[{"tags": ["perl", "split"], "answers": [{"tags": [], "owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "is_accepted": false, "score": 0, "last_activity_date": 1548877649, "creation_date": 1548877649, "answer_id": 54448412, "question_id": 54448287, "link": "https://stackoverflow.com/questions/54448287/perl-array-prints-as-globx/54448412#54448412", "title": "perl array prints as GLOB(#x#########)", "body": "<p>Starting point:</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\n\nopen(my $fh, '&lt;', 'dummy.txt')\n    or die \"$!\";\n\nmy @values;\nwhile (&lt;$fh&gt;) {\n    chomp;\n    # original\n    # push(@values, split(';', $_));\n    # handle white space\n    push(@values, split(/\\s*;\\s*/, $_));\n}\n\nclose($fh);\n\nforeach my $val (@values) {\n    print \"$val\\n\";\n}\n\nexit 0;\n</code></pre>\n\n<p>Output for your example:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>$ perl dummy.pl\ncasper1@foo.com\ncasper2@foo.com\ncasper3@foo.com\ncasper.casper4@foo.com\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 1, "creation_date": 1548890938, "post_id": 54448414, "comment_id": 95710738, "body": "only with error checking; as is, that will give a warning if there was no line to read"}], "tags": [], "owner": {"reputation": 81037, "user_id": 8454, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/2NlHs.png?s=128&g=1", "display_name": "Andy Lester", "link": "https://stackoverflow.com/users/8454/andy-lester"}, "is_accepted": false, "score": 2, "last_activity_date": 1548877652, "creation_date": 1548877652, "answer_id": 54448414, "question_id": 54448287, "link": "https://stackoverflow.com/questions/54448287/perl-array-prints-as-globx/54448414#54448414", "title": "perl array prints as GLOB(#x#########)", "body": "<p>This line</p>\n\n<pre><code>my @values = split(';', $fh);\n</code></pre>\n\n<p>is not reading from the filehandle like you think it is.  You're actually calling <code>split</code> on the filehandle object itself.</p>\n\n<p>You want this:</p>\n\n<pre><code>my $line = &lt;$fh&gt;;\nmy @values = split(';', $line);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 3, "last_activity_date": 1548883455, "creation_date": 1548883455, "answer_id": 54449762, "question_id": 54448287, "link": "https://stackoverflow.com/questions/54448287/perl-array-prints-as-globx/54449762#54449762", "title": "perl array prints as GLOB(#x#########)", "body": "<p>You do not \"suck the whole file into an array\". You don't even attempt to read from the file handle. Instead, you pass the file handle to <code>split</code>. Expecting a string, it stringifies the file handle into <code>GLOB(0x80070b90)</code>.</p>\n\n<p>You could read the file into an array of lines as follows:</p>\n\n<pre><code>my @lines = &lt;$fh&gt;;\nfor my $line ($lines) {\n   ...\n}\n</code></pre>\n\n<p>But it's far simpler to read one line at a time.</p>\n\n<pre><code>while ( my $line = &lt;$fh&gt; ) {\n   ...\n}\n</code></pre>\n\n<p>In fact, there is no reason not to use <code>ARGV</code> here, simplifying your program to the following:</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\nuse feature qw( say );\n\nwhile (&lt;&gt;) {\n   chomp;\n   say for split /\\s*;\\s*/, $_;\n}\n</code></pre>\n"}], "owner": {"reputation": 2167, "user_id": 824282, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/8f0cb967adb644f6408e5ff3df8c8a0f?s=128&d=identicon&r=PG", "display_name": "capser", "link": "https://stackoverflow.com/users/824282/capser"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 165, "favorite_count": 1, "answer_count": 3, "score": 1, "last_activity_date": 1548883455, "creation_date": 1548877166, "last_edit_date": 1548877696, "question_id": 54448287, "link": "https://stackoverflow.com/questions/54448287/perl-array-prints-as-globx", "title": "perl array prints as GLOB(#x#########)", "body": "<p>I have a file which contains a list of email addresses which are separated by a semi-colon which is configured much like this (but much larger) :</p>\n\n<pre><code>$ cat email_casper.txt\ncasper1@foo.com; casper2@foo.com; casper3@foo.com; casper.casper4@foo.com;\n\n#these throw outlook error :\n#casper101@foo.com ; casper100@foo.com\n#cat /tmp/emailist.txt | tr '\\n' '; '\n#cat /tmp/emallist.txt | perl -nle 'print /\\&lt;(.*)\\&gt;/' | sort\n</code></pre>\n\n<p>I want to break it up on the semicolon - so I suck the whole file into an array supposedly the contents are split on semicolon.</p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\nmy $filename = shift @ARGV ;\nopen(my $fh, '&lt;', $filename) or die \"Could not open file $filename $!\";\n\nmy @values = split(';', $fh);\n\nforeach my $val (@values) {\n    print \"$val\\n\";\n}\n\nexit 0 ;\n</code></pre>\n\n<p>But the file awards me with a golb. I just don't know what is going one.</p>\n\n<pre><code>$ ./spliton_semi.pl email_casper.txt\nGLOB(0x80070b90)\n</code></pre>\n\n<p>If I use Data::Dumper I get </p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\nuse Data::Dumper ;\nmy $filename = shift @ARGV ;\nopen(my $fh, '&lt;', $filename) or die \"Could not open file $filename $!\";\nmy @values = split(';', $fh);\nprint Dumper \\@values ;\n</code></pre>\n\n<p>This is what the Dumper returns : </p>\n\n<pre><code>$ ./spliton_semi.pl email_casper.txt\n$VAR1 = [\n          'GLOB(0x80070b90)'\n        ];\n</code></pre>\n"}, {"tags": ["bash", "perl", "photo", "exiftool"], "comments": [{"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1548881416, "post_id": 54448005, "comment_id": 95707372, "body": "The shell will interpret <code>$</code> variables in a double quoted string. Try single quoting the code you pass."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 7287357, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ec7711a93bd37c7c8722a4263a8e610?s=128&d=identicon&r=PG&f=1", "display_name": "justonetaste2003", "link": "https://stackoverflow.com/users/7287357/justonetaste2003"}, "edited": false, "score": 0, "creation_date": 1548878280, "post_id": 54448267, "comment_id": 95705972, "body": "Yes!  Works for me.  Thanks. I&#39;m sure there may be a native way to do this using exiftool&#39;s expressions, but this did the trick."}], "tags": [], "owner": {"reputation": 144799, "user_id": 2836621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/suHg4.jpg?s=128&g=1", "display_name": "Mark Setchell", "link": "https://stackoverflow.com/users/2836621/mark-setchell"}, "is_accepted": false, "score": 3, "last_activity_date": 1548877033, "creation_date": 1548877033, "answer_id": 54448267, "question_id": 54448005, "link": "https://stackoverflow.com/questions/54448005/how-do-i-update-exif-datetimeoriginal-based-on-filename/54448267#54448267", "title": "How do I update exif DateTimeOriginal based on filename?", "body": "<p>There may be a better way, but this works:</p>\n\n<pre><code>#!/bin/bash\nfor f in *.jpg; do\n   year=$(grep -Eo \"^\\d+\" &lt;&lt;&lt; \"$f\")\n   echo File: $f, setting year:$year\n   exiftool \"-datetimeoriginal=${year}01:01 12:00:00\" \"$f\"\ndone\n</code></pre>\n\n<p><strong>Debug Output</strong></p>\n\n<pre><code>File: 2013 Family Reunion.jpg, setting year:2013\n    1 image files updated\nFile: 2017 Some wedding.jpg, setting year:2017\n    1 image files updated\n</code></pre>\n\n<p>Try it on a <strong>COPY</strong> of your files in a temporary directory!</p>\n"}, {"comments": [{"owner": {"reputation": 1, "user_id": 7287357, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ec7711a93bd37c7c8722a4263a8e610?s=128&d=identicon&r=PG&f=1", "display_name": "justonetaste2003", "link": "https://stackoverflow.com/users/7287357/justonetaste2003"}, "edited": false, "score": 0, "creation_date": 1549052052, "post_id": 54451297, "comment_id": 95779815, "body": "This is much faster than looping provided above.  10k images using loop took 10minutes.   exiftool  native took 1 minute for 10k images.  Thanks this is the best answer.  I appreciate Mark&#39;s answer too!"}], "tags": [], "owner": {"reputation": 3221, "user_id": 3525475, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/53a3e5e7036697bc76954b0d02d71c15?s=128&d=identicon&r=PG&f=1", "display_name": "StarGeek", "link": "https://stackoverflow.com/users/3525475/stargeek"}, "is_accepted": true, "score": 2, "last_activity_date": 1548891939, "creation_date": 1548891939, "answer_id": 54451297, "question_id": 54448005, "link": "https://stackoverflow.com/questions/54448005/how-do-i-update-exif-datetimeoriginal-based-on-filename/54451297#54451297", "title": "How do I update exif DateTimeOriginal based on filename?", "body": "<p>You're close with your original, but as @Grinnz said, you need to use single quotes.  Additionally, you want the first 4 numbers for the year, but you're only grabbing 3.</p>\n\n<p>So try:<br>\n<code>exiftool '-DateTimeOriginal&lt;${filename;$_=substr($_,0,4)} 01:01 12:00:00' FileOrDir</code>  </p>\n\n<p>The startup time of exiftool is its biggest performance hit, so you'll find this is much faster than looping over each file (see <a href=\"https://sno.phy.queensu.ca/~phil/exiftool/mistakes.html#M3\" rel=\"nofollow noreferrer\">exiftool Common Mistake #3</a>).</p>\n\n<p>This command creates backup files.  Add <code>-overwrite_original</code> to suppress the creation of backup files.  Add <code>-r</code> to recurse into subdirectories. </p>\n"}], "owner": {"reputation": 1, "user_id": 7287357, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ec7711a93bd37c7c8722a4263a8e610?s=128&d=identicon&r=PG&f=1", "display_name": "justonetaste2003", "link": "https://stackoverflow.com/users/7287357/justonetaste2003"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 413, "favorite_count": 0, "accepted_answer_id": 54451297, "answer_count": 2, "score": 2, "last_activity_date": 1548891939, "creation_date": 1548875885, "last_edit_date": 1548881255, "question_id": 54448005, "link": "https://stackoverflow.com/questions/54448005/how-do-i-update-exif-datetimeoriginal-based-on-filename", "title": "How do I update exif DateTimeOriginal based on filename?", "body": "<p>I want to share 10K photos using Google Photos.  These images were\nscanned, so they don't have correct DateTimeOriginal for chronological ordering.</p>\n\n<p>I need to update DateTimeOriginal to YYYY:01:01 00:00:00 to allow me to organize these within Google Photos for sharing\nand having some sense of order.  My understanding is Google uses exif DateTimeOriginal for sorting.  </p>\n\n<p>My photo naming conventions:</p>\n\n<p>1967 Smith G &amp; J Wedding - 3.jpg</p>\n\n<p>1962 Smith Family Reunion - 87.jpeg</p>\n\n<p>1990 Smith 50th Anniversary - 16.jpeg</p>\n\n<p>I tried this:</p>\n\n<pre><code>exiftool \"-datetimeoriginal &lt; ${filename;$_=substr($_,0,3)} 01:01 12:00:00\" DIR\n</code></pre>\n\n<p>but receive a BASH \"bad substitution error\"</p>\n\n<p>Any assistance would be appreciated. </p>\n"}, {"tags": ["regex", "xml", "perl"], "comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 3, "creation_date": 1548874180, "post_id": 54447450, "comment_id": 95704016, "body": "Re &quot;<i>Is there some sort of ...</i>&quot; -- there are proper XML parsers, best <a href=\"https://metacpan.org/pod/XML::LibXML\" rel=\"nofollow noreferrer\">XML::LibXML</a> and <a href=\"https://metacpan.org/pod/XML::Twig\" rel=\"nofollow noreferrer\">XML::Twig</a>.  There are also other (larger) frameworks that contain this as well. Just don&#39;t do it by hand, with regex, since there&#39;s no end of trouble to that (unless it&#39;s really <i>really</i> simple, only one thing, just this once ... but which it normally isn&#39;t, even if it may start out that way)."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1548874467, "post_id": 54447450, "comment_id": 95704155, "body": "For instance, Grinnz&#39;s answer is one good way to go"}], "answers": [{"comments": [{"owner": {"reputation": 88920, "user_id": 290085, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/306077a2fb7af6587f470214a1b337ff?s=128&d=identicon&r=PG", "display_name": "kjhughes", "link": "https://stackoverflow.com/users/290085/kjhughes"}, "edited": false, "score": 0, "creation_date": 1548883697, "post_id": 54447547, "comment_id": 95708371, "body": "Plus one for <b><i>not</i></b> obliging the request to parse XML via regex but rather showing OP a better way."}], "tags": [], "owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "is_accepted": true, "score": 5, "last_activity_date": 1548875346, "last_edit_date": 1548875346, "creation_date": 1548874190, "answer_id": 54447547, "question_id": 54447450, "link": "https://stackoverflow.com/questions/54447450/regex-match-all-xml-tags-that-contain-a-certain-attribute-value/54447547#54447547", "title": "regex match all xml tags that contain a certain attribute value", "body": "<p>The appropriate Perl solution is not regex. With <a href=\"https://metacpan.org/pod/Mojo::DOM\" rel=\"nofollow noreferrer\">Mojo::DOM</a> (one of many options):</p>\n\n<pre><code>use strict;\nuse warnings;\nuse Mojo::DOM;\nuse File::Slurper 'read_text';\n\nmy $xml = read_text 'test.xml';\nmy $dom = Mojo::DOM-&gt;new-&gt;xml(1)-&gt;parse($xml);\nmy $tags = $dom-&gt;find('item[attr*=\".htm\"]');\nprint \"$_\\n\" for @$tags;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1548883046, "post_id": 54447702, "comment_id": 95708108, "body": "I think it&#39;s important to note these regexes will be incredibly inefficient and very difficult to restrict to a single &quot;tag&quot;. Non-greedy quantifiers are often assumed to be something smarter than they actually are, which is just &quot;as few characters as will lead to a successful overall match starting from the point we have already reached&quot;."}, {"owner": {"reputation": 88920, "user_id": 290085, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/306077a2fb7af6587f470214a1b337ff?s=128&d=identicon&r=PG", "display_name": "kjhughes", "link": "https://stackoverflow.com/users/290085/kjhughes"}, "edited": false, "score": 0, "creation_date": 1548883611, "post_id": 54447702, "comment_id": 95708333, "body": "(-1)   Aside from inefficiencies, <b>regex is also incredibly brittle for parsing XML.</b> When someone asks how to shoot themselves in the foot, the right thing to do is not to help them aim.  The right thing is to show them <a href=\"https://stackoverflow.com/a/54447547/290085\">a better way</a>."}, {"owner": {"reputation": 15255, "user_id": 3761628, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/9414f7276059e8c1c63214430338ad7e?s=128&d=identicon&r=PG&f=1", "display_name": "eol", "link": "https://stackoverflow.com/users/3761628/eol"}, "reply_to_user": {"reputation": 88920, "user_id": 290085, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/306077a2fb7af6587f470214a1b337ff?s=128&d=identicon&r=PG", "display_name": "kjhughes", "link": "https://stackoverflow.com/users/290085/kjhughes"}, "edited": false, "score": 0, "creation_date": 1548923409, "post_id": 54447702, "comment_id": 95720634, "body": "@kjhughes Excuse me, but I don&#39;t really understand your comment and I don&#39;t see the need for a downvote. I never adviced him/her to use this regex-based solution, since I actually wrote to prefer Grinnz&#39; solution in the first sentence?! I added the regex solution just in case he/she wanted to know how such a regex with lookarounds would look like and it might be useful in another situation where the use of regex is valid ..."}], "tags": [], "owner": {"reputation": 15255, "user_id": 3761628, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/9414f7276059e8c1c63214430338ad7e?s=128&d=identicon&r=PG&f=1", "display_name": "eol", "link": "https://stackoverflow.com/users/3761628/eol"}, "is_accepted": false, "score": 1, "last_activity_date": 1548876853, "last_edit_date": 1548876853, "creation_date": 1548874643, "answer_id": 54447702, "question_id": 54447450, "link": "https://stackoverflow.com/questions/54447450/regex-match-all-xml-tags-that-contain-a-certain-attribute-value/54447702#54447702", "title": "regex match all xml tags that contain a certain attribute value", "body": "<p>As Grinnz suggested you should use an approriate xml-parser (check out this interesting post on <a href=\"https://stackoverflow.com/questions/6751105/why-its-not-possible-to-use-regex-to-parse-html-xml-a-formal-explanation-in-la\">stackoverflow</a> explaining why), but since you asked for it here's a simple regex you could use with a positive lookahead:</p>\n\n<p><code>&lt;item.*?attr=\".*(?=\\.htm).*</code></p>\n\n<p>If you want to match tags with only one \".htm\" in it, you can use both a negative and positive lookaround:</p>\n\n<p><code>^(?:(?!\\.htm).)*\\.htm(?!.*\\.htm).*$</code></p>\n"}], "owner": {"reputation": 103, "user_id": 6415812, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/3b5d9b8833ced68c38cff956ad6836af?s=128&d=identicon&r=PG&f=1", "display_name": "Simon2233", "link": "https://stackoverflow.com/users/6415812/simon2233"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 693, "favorite_count": 0, "accepted_answer_id": 54447547, "answer_count": 2, "score": 1, "last_activity_date": 1548876853, "creation_date": 1548873799, "question_id": 54447450, "link": "https://stackoverflow.com/questions/54447450/regex-match-all-xml-tags-that-contain-a-certain-attribute-value", "title": "regex match all xml tags that contain a certain attribute value", "body": "<p>I have an xml file where I want to match all xml tags that contain an attribute matching a certain string in Perl.</p>\n\n<p>Sample XML:</p>\n\n<pre><code>&lt;item attr=\"Car\" /&gt;\n&lt;item attr=\"Apple_And_Pears.htm#123\" /&gt;\n&lt;item attr=\"Paper\" /&gt;\n&lt;item attr=\"Orange_And_Peach.htm#213\" /&gt;\n</code></pre>\n\n<p>I want a regex that grabs all nodes that has an attribute that contains \".htm\"</p>\n\n<pre><code>&lt;item attr=\"Orange_And_Peach.htm#213\" /&gt;\n&lt;item attr=\"Apple_And_Pears.htm#123\" /&gt;\n</code></pre>\n\n<p>With the following regex, I'm matching with all tags rather than only tags with .htm attribute:</p>\n\n<pre><code>&lt;item.*?attr=\"[^&gt;]*&gt;\n</code></pre>\n\n<p>Is there some sort of positive lookahead until a certain character?</p>\n\n<p>Thanks</p>\n"}, {"tags": ["perl", "bugzilla"], "comments": [{"owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "edited": false, "score": 1, "creation_date": 1548867248, "post_id": 54445312, "comment_id": 95700484, "body": "My first thought would be: <code>assigned_to</code> is a pre-defined field. Where is the piece of code where your announce to/extend/configure <code>Bug::Buzilla</code> that you are adding a field <i>also</i> needs to go to the database? I&#39;m pretty sure just adding a key to the object hash can&#39;t be enough,"}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1548867286, "post_id": 54445312, "comment_id": 95700507, "body": "Maybe use <a href=\"https://github.com/bugzilla/bugzilla/blob/5.0/Bugzilla/Bug.pm#L2558\" rel=\"nofollow noreferrer\">set_custom_field</a>?"}, {"owner": {"reputation": 21, "user_id": 10991440, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a9e60c1a84a7a031226b88336adc95a3?s=128&d=identicon&r=PG&f=1", "display_name": "Tom", "link": "https://stackoverflow.com/users/10991440/tom"}, "reply_to_user": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "edited": false, "score": 0, "creation_date": 1548868347, "post_id": 54445312, "comment_id": 95701091, "body": "@StefanBecker I don&#39;t have any code that specifically tells it to go back to the database at all.  I was mostly just following the examples in the example extension perl file provided by Bugzilla and didn&#39;t see that anywhere."}, {"owner": {"reputation": 21, "user_id": 10991440, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a9e60c1a84a7a031226b88336adc95a3?s=128&d=identicon&r=PG&f=1", "display_name": "Tom", "link": "https://stackoverflow.com/users/10991440/tom"}, "reply_to_user": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1548868579, "post_id": 54445312, "comment_id": 95701229, "body": "@choroba I tried using the set_custom_field as you suggested without success.  What I tried with the accompanying errors are below: $bug-&gt;set_custom_field(cf_custom_field, &#39;hello world&#39;); #Can&#39;t locate object method &quot;custom&quot; via package &quot;cf_custom_field&quot; (perhaps you forgot to load &quot;cf_custom_field&quot;?) at Bugzilla/Bug.pm line 2364. $bug-&gt;set_custom_field({cf_custom_field}, &#39;hello world&#39;); #Can&#39;t call method &quot;custom&quot; on unblessed reference at Bugzilla/Bug.pm line 2364."}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1548869229, "post_id": 54445312, "comment_id": 95701545, "body": "The first parameter to <code>set_custom_field</code> must be a field object."}, {"owner": {"reputation": 21, "user_id": 10991440, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a9e60c1a84a7a031226b88336adc95a3?s=128&d=identicon&r=PG&f=1", "display_name": "Tom", "link": "https://stackoverflow.com/users/10991440/tom"}, "edited": false, "score": 0, "creation_date": 1548869605, "post_id": 54445312, "comment_id": 95701739, "body": "OK I changed it to the below and it stopped erroring, but still does not update the actual bug.  I should add, changing the assign_to field only worked in object_end_of_set_all hook.     my $field = new Bugzilla::Field({ name =&gt; &#39;cf_custom_field&#39; });      $object-&gt;set_custom_field($field, &#39;hello world&#39;);"}, {"owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "edited": false, "score": 0, "creation_date": 1548870108, "post_id": 54445312, "comment_id": 95701976, "body": "<a href=\"https://www.bugzilla.org/docs/4.4/en/html/api/Bugzilla/Field.html#SYNOPSIS\" rel=\"nofollow noreferrer\">Bugzilla::Field</a> says <code>my $field = Bugzilla::Field-&gt;create({name =&gt; &#39;cf_silly&#39;, description =&gt; &#39;Silly&#39;, custom =&gt; 1});</code> with <code>name</code> and <code>description</code> being mandatory."}, {"owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "edited": false, "score": 0, "creation_date": 1548870846, "post_id": 54445312, "comment_id": 95702365, "body": "<a href=\"https://git.lysator.liu.se/lysator/bugzilla/blob/release-4.4/Bugzilla/Bug.pm#L2364\" rel=\"nofollow noreferrer\">Bug.pm:2364</a> says that non-custom fields cause <code>set_custom_field()</code> to throw an error."}, {"owner": {"reputation": 21, "user_id": 10991440, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a9e60c1a84a7a031226b88336adc95a3?s=128&d=identicon&r=PG&f=1", "display_name": "Tom", "link": "https://stackoverflow.com/users/10991440/tom"}, "edited": false, "score": 0, "creation_date": 1548871261, "post_id": 54445312, "comment_id": 95702545, "body": "If I try to use the Field-&gt;create, I get an exception saying the custom field has already been created (it has, I did it through the UI)."}, {"owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "edited": false, "score": 0, "creation_date": 1548872159, "post_id": 54445312, "comment_id": 95702997, "body": "<a href=\"https://www.bugzilla.org/docs/4.4/en/html/api/Bugzilla/Field.html#SYNOPSIS\" rel=\"nofollow noreferrer\">Bugzilla::Field</a> again: <code>my $field = new Bugzilla::Field({name =&gt; &#39;cf_custom_field&#39;});</code>. I assume as you have already created it as custom field, <code>$field-&gt;{custom}</code> should be true then."}, {"owner": {"reputation": 21, "user_id": 10991440, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a9e60c1a84a7a031226b88336adc95a3?s=128&d=identicon&r=PG&f=1", "display_name": "Tom", "link": "https://stackoverflow.com/users/10991440/tom"}, "edited": false, "score": 0, "creation_date": 1548873536, "post_id": 54445312, "comment_id": 95703660, "body": "That is correct, $field-&gt;{custom} returns as 1.  Calling $object-&gt;set_custom_field($field, &#39;hello world&#39;); or $object-&gt;set($field, &#39;hi&#39;); immediately after still has no impact on the actual bug."}], "owner": {"reputation": 21, "user_id": 10991440, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a9e60c1a84a7a031226b88336adc95a3?s=128&d=identicon&r=PG&f=1", "display_name": "Tom", "link": "https://stackoverflow.com/users/10991440/tom"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 79, "favorite_count": 1, "answer_count": 0, "score": 2, "last_activity_date": 1548871601, "creation_date": 1548866130, "last_edit_date": 1548871601, "question_id": 54445312, "link": "https://stackoverflow.com/questions/54445312/how-do-i-update-a-custom-bugzilla-field-in-a-custom-bugzilla-extension-using-per", "title": "How do I update a custom Bugzilla field in a custom Bugzilla extension using Perl?", "body": "<p>I have a custom field in Bugzilla that I need to update after making a JSON call to another server after a bug has been updated.  I am able to make the call and get the response back, but attempting to update the bug is failing.</p>\n\n<p>I have tried setting the field in the hooks <code>bug_end_of_update</code> and <code>object_end_of_set_all</code> and it hasn't worked at all.  If I attempt to do it in <code>bug_end_of_update</code>, the object itself gets updated in memory, but it will never get set in the database.  Calling update on the <code>$bug</code> object in that method sends Bugzilla into an infinite loop that requires a complete restart to fix.  In the code below, I am able to update the <code>assigned_to</code> field correctly.  Using the same exact call doesn't work for a custom field though.</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>sub object_end_of_set_all {\n    my ($self, $args) = @_;\n\n    my $object = $args-&gt;{'object'};\n\n    if ($object-&gt;isa('Bugzilla::Bug')) {        \n        $object-&gt;{'assigned_to'} = $object-&gt;{'reporter_id'};    #this works\n        $object-&gt;{'cf_custom_field'} = 'hello world';         #this doesn't\n        my $blessedField = {cf_custom_field};\n        bless $blessedField;\n        $object-&gt;set($blessedField, 'hello world');         #also doesn't work\n        $object-&gt;update;                                    #puts bugzilla into an infinite loop that never returns\n    }\n}\n</code></pre>\n\n<p>I would expect setting a custom field would work exactly like <code>assigned_to</code>, but it doesn't and the documentation on this is extremely lacking.</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 0, "creation_date": 1548838068, "post_id": 54436460, "comment_id": 95682267, "body": "This is a &quot;Debug my code for me&quot; question, which is off-topic here. Can you maybe walk us through your code and explain what the <code>map</code> statement is supposed to do? Especially, what is <code>$barcode[1]..$barcode[11]</code> supposed to do? Look at the case of <code>$barcode[1]=99</code> and <code>$barcode[11]=0</code>."}, {"owner": {"reputation": 16761, "user_id": 1454708, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eSzgk.png?s=128&g=1", "display_name": "Nahuel Fouilleul", "link": "https://stackoverflow.com/users/1454708/nahuel-fouilleul"}, "edited": false, "score": 1, "creation_date": 1548840828, "post_id": 54436460, "comment_id": 95684025, "body": "normally array of 11 elements, elements are indexed from 0 to 10 ; <code>@barcode[0..10]</code> note the <code>@</code> prefix to get a sliced array"}], "answers": [{"comments": [{"owner": {"reputation": 3509, "user_id": 4243840, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aaeabd769bae1bf82fd4b8882fed6653?s=128&d=identicon&r=PG", "display_name": "JGNI", "link": "https://stackoverflow.com/users/4243840/jgni"}, "edited": false, "score": 1, "creation_date": 1548839452, "post_id": 54436775, "comment_id": 95683142, "body": "You could shrink your two greps to, in order <code>grep { $_ % 2 }</code> and <code>gerep { ! ($_ %  2)}</code>"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 3509, "user_id": 4243840, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aaeabd769bae1bf82fd4b8882fed6653?s=128&d=identicon&r=PG", "display_name": "JGNI", "link": "https://stackoverflow.com/users/4243840/jgni"}, "edited": false, "score": 1, "creation_date": 1548839868, "post_id": 54436775, "comment_id": 95683413, "body": "1) I purposefully didn&#39;t for symmetry (which produces clearer code). 2) While it does reduce the number of tokens for odds, it actually increases the number of tokens for evens."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 9, "last_activity_date": 1548859596, "last_edit_date": 1548859596, "creation_date": 1548838912, "answer_id": 54436775, "question_id": 54436460, "link": "https://stackoverflow.com/questions/54436460/sum-the-odd-and-even-indices-of-an-array-separately-perl/54436775#54436775", "title": "Sum the odd and even indices of an array separately - Perl", "body": "<p>Sum of even/odd indicies (what you asked for, but not what you want<sup>[1]</sup>):</p>\n\n<pre><code>use List::Util qw( sum );   # Or: sub sum { my $acc; $acc += $_ for @_; $acc }\n\nmy $sum_of_even_idxs = sum grep { $_ % 2 == 0 } 0..$#nums;\nmy $sum_of_odd_idxs  = sum grep { $_ % 2 == 1 } 0..$#nums;\n</code></pre>\n\n<p>Sum of even/odd values (what you also asked for, but not what you want<sup>[1]</sup>):</p>\n\n<pre><code>use List::Util qw( sum );   # Or: sub sum { my $acc; $acc += $_ for @_; $acc }\n\nmy $sum_of_even_vals = sum grep { $_ % 2 == 0 } @nums;\nmy $sum_of_odd_vals  = sum grep { $_ % 2 == 1 } @nums;\n</code></pre>\n\n<p>Sum of values at even/odd indexes (what you appear to want):</p>\n\n<pre><code>use List::Util qw( sum );   # Or: sub sum { my $acc; $acc += $_ for @_; $acc }\n\nmy $sum_of_vals_at_even_idxs = sum @nums[ grep { $_ % 2 == 0 } 0..$#nums ];\nmy $sum_of_vals_at_odd_idxs  = sum @nums[ grep { $_ % 2 == 1 } 0..$#nums ];\n</code></pre>\n\n<p>Given that you know how many elements you have, you could use the following:</p>\n\n<pre><code>use List::Util qw( sum );   # Or: sub sum { my $acc; $acc += $_ for @_; $acc }\n\nmy $sum_of_vals_at_even_idxs = sum @nums[0,2,4,6,8,10];\nmy $sum_of_vals_at_odd_idxs  = sum @nums[1,3,5,7,9];\n</code></pre>\n\n<hr>\n\n<ol>\n<li>I included these in case someone needing these lands on this Q&amp;A.</li>\n</ol>\n"}, {"tags": [], "owner": {"reputation": 3509, "user_id": 4243840, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aaeabd769bae1bf82fd4b8882fed6653?s=128&d=identicon&r=PG", "display_name": "JGNI", "link": "https://stackoverflow.com/users/4243840/jgni"}, "is_accepted": false, "score": 4, "last_activity_date": 1548839610, "last_edit_date": 1548839610, "creation_date": 1548839175, "answer_id": 54436845, "question_id": 54436460, "link": "https://stackoverflow.com/questions/54436460/sum-the-odd-and-even-indices-of-an-array-separately-perl/54436845#54436845", "title": "Sum the odd and even indices of an array separately - Perl", "body": "<p>You can use the fact that the <code>?:</code> operator is assignable</p>\n\n<pre><code>print 'Enter the 11 digiet serial number: ';\nchomp( my @barcode = //, &lt;STDIN&gt; );\n\nmy $odd = 0;\nmy $even = 0;\nfor (my $index = 0; $index &lt; @barcode; $index++) {\n    ($index % 2 ? $even : $odd) += $barcode[$index];\n}\n</code></pre>\n\n<p>This works by indexing over <code>@barcode</code> and taking the mod 2 of the index, ie dividing the index by 2 and taking the remainder, and if the remainder is 1 adding that element of <code>@barcode</code> to <code>$even</code> otherwise to <code>$odd</code>. </p>\n\n<p>That looks strange until you remember that arrays are 0 based so your first number of the barcode is stored in <code>$barcode[0]</code> which is an even index.</p>\n"}, {"comments": [{"owner": {"reputation": 7646, "user_id": 6867048, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b939fdb5809fed8097c38bdf4370747b?s=128&d=identicon&r=PG&f=1", "display_name": "stack0114106", "link": "https://stackoverflow.com/users/6867048/stack0114106"}, "edited": false, "score": 1, "creation_date": 1550060683, "post_id": 54436904, "comment_id": 96130088, "body": "nice use of ternary operator to assign odds/evens.. I also have posted an answer for this.."}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": false, "score": 5, "last_activity_date": 1548872042, "last_edit_date": 1548872042, "creation_date": 1548839371, "answer_id": 54436904, "question_id": 54436460, "link": "https://stackoverflow.com/questions/54436460/sum-the-odd-and-even-indices-of-an-array-separately-perl/54436904#54436904", "title": "Sum the odd and even indices of an array separately - Perl", "body": "<p>Add up values at odd and at even indices</p>\n\n<pre><code>perl -wE'@ary = 1..6;  \n    for (0..$#ary) { $_ &amp; 1 ? $odds += $ary[$_] : $evens += $ary[$_] }; \n    say \"odds: $odds, evens: $evens\"\n'\n</code></pre>\n\n<p>Note for tests: with even indices (0,2,4) we have (odd!) values (1,3,5), in this (<code>1..6</code>) example</p>\n"}, {"tags": [], "owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "is_accepted": false, "score": 3, "last_activity_date": 1548865555, "creation_date": 1548865555, "answer_id": 54445119, "question_id": 54436460, "link": "https://stackoverflow.com/questions/54436460/sum-the-odd-and-even-indices-of-an-array-separately-perl/54445119#54445119", "title": "Sum the odd and even indices of an array separately - Perl", "body": "<p><code>chomp( my @barcode = //, &lt;STDIN&gt; );</code> presumably was supposed to have a <code>split</code> before the <code>//</code>?</p>\n\n<p><code>@barcode</code> will have all the characters in the line read, including the newline.  The chomp will change the final element from a newline to an empty string.</p>\n\n<p>Better to chomp first so you just have your digits in the array:</p>\n\n<pre><code>chomp(my $barcode = &lt;STDIN&gt;);\nmy @barcode = split //, $barcode;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1550082334, "post_id": 54447745, "comment_id": 96143248, "body": "An interesting way to do even/odd in a string!  Nits to pick: it is destructive to the original string (in a way that isn&#39;t useful), and it uses regex with <code>&#47;e</code> for its side-effect; perhaps can do the same but as <code>while (&#47;...&#47;g) { $odd += ... }</code> ? I am not sure how it goes efficiency wise: The <code>s&#47;&#47;&#47;</code> runs under <code>&#47;e</code> but is one regex while <code>while</code> starts the engine each time (unless this case is optimized?). I am not suggesting to change this, just a note to consider in the future."}], "tags": [], "owner": {"reputation": 7646, "user_id": 6867048, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b939fdb5809fed8097c38bdf4370747b?s=128&d=identicon&r=PG&f=1", "display_name": "stack0114106", "link": "https://stackoverflow.com/users/6867048/stack0114106"}, "is_accepted": false, "score": 3, "last_activity_date": 1548875222, "last_edit_date": 1548875222, "creation_date": 1548874817, "answer_id": 54447745, "question_id": 54436460, "link": "https://stackoverflow.com/questions/54436460/sum-the-odd-and-even-indices-of-an-array-separately-perl/54447745#54447745", "title": "Sum the odd and even indices of an array separately - Perl", "body": "<p>Another Perl, if the string is of length 11 and contains only digits</p>\n\n<pre><code>$ perl -le ' $_=\"12345678911\"; s/(.)(.)|(.)$/$odd+=$1+$3;$even+=$2/ge; print \"odd=$odd; even=$even\" '\nodd=26; even=21\n\n$\n</code></pre>\n\n<p>with different input</p>\n\n<pre><code>$ perl -le ' $_=\"12121212121\"; s/(.)(.)|(.)$/$odd+=$1+$3;$even+=$2/ge; print \"odd=$odd; even=$even\" '\nodd=6; even=10\n\n$\n</code></pre>\n"}], "owner": {"reputation": 6124, "user_id": 461887, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/73a86b3136bfdda99045ba5de86dd9ec?s=128&d=identicon&r=PG", "display_name": "sayth", "link": "https://stackoverflow.com/users/461887/sayth"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 637, "favorite_count": 0, "accepted_answer_id": 54436775, "answer_count": 5, "score": 2, "last_activity_date": 1548875222, "creation_date": 1548837865, "question_id": 54436460, "link": "https://stackoverflow.com/questions/54436460/sum-the-odd-and-even-indices-of-an-array-separately-perl", "title": "Sum the odd and even indices of an array separately - Perl", "body": "<p>I have an array of 11 elements. Where I want to sum the odd elements including the first and last elements as one scalar and the evens as another.</p>\n\n<p>This is my code I am trying to use map adding 2 to each index to achieve the result but I think I have got it wrong.</p>\n\n<pre><code>use strict;\nuse warnings;\nuse Data::Dumper;\n\nprint 'Enter the 11 digiet serial number: ';\nchomp( my @barcode = //, &lt;STDIN&gt; );\n\nmy @sum1 = map { 2 + $_ } $barcode[1] .. $barcode[11];\nmy $sum1 = sum Dumper( \\@sum1 );\n\n# sum2 = l2 + l4 + l6 + r8 + r10;\nprintf \"{$sum1}\";\n</code></pre>\n\n<p>What is a good way to achieve this?</p>\n"}, {"tags": ["php", "perl"], "comments": [{"owner": {"reputation": 217, "user_id": 6323383, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-sSX68ArHTZs/AAAAAAAAAAI/AAAAAAAAAB4/N0HT5g-jKdo/photo.jpg?sz=128", "display_name": "Sven Mich", "link": "https://stackoverflow.com/users/6323383/sven-mich"}, "edited": false, "score": 3, "creation_date": 1548833809, "post_id": 54435364, "comment_id": 95680242, "body": "What you posted is not a question, but asking someone to do your work. Try <a href=\"https://perldoc.perl.org/index-language.html\" rel=\"nofollow noreferrer\">perldoc.perl.org/index-language.html</a> and go from there."}, {"owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "edited": false, "score": 1, "creation_date": 1548844176, "post_id": 54435364, "comment_id": 95686106, "body": "Why not do it correctly and use a XML parser? <code>curl --silent https:&#47;&#47;applicazioni.cnipa.gov.it&#47;TSL&#47;_IT_TSL_signed.xml | perl -MXML::LibXML -e &#39;@nodes=XML::LibXML-&gt;load_xml(IO =&gt; \\*STDIN)-&gt;getElementsByTagName(&quot;X509Certificate&quot;); print &quot;-----BEGIN CERTIFICATE-----\\n&quot;, join(&quot;\\n&quot;, $nodes[0]-&gt;textContent =~ &#47;(.{0,64})&#47;g), &quot;-----END CERTIFICATE-----\\n&quot;;&#39;</code>"}, {"owner": {"reputation": 147, "user_id": 8877287, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/7811251ebbd7ca2da3f98bb123e4b39c?s=128&d=identicon&r=PG&f=1", "display_name": "itajackass", "link": "https://stackoverflow.com/users/8877287/itajackass"}, "edited": false, "score": 0, "creation_date": 1548879712, "post_id": 54435364, "comment_id": 95706584, "body": "i&#39;ve update with a partial solution. but i don&#39;t how to semplify it. if there a method to retrieve only an element by it&#39;s name. BTW the correct url is: <a href=\"https://eidas.agid.gov.it/TL/TSL-IT.xml\" rel=\"nofollow noreferrer\">eidas.agid.gov.it/TL/TSL-IT.xml</a>"}, {"owner": {"reputation": 147, "user_id": 8877287, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/7811251ebbd7ca2da3f98bb123e4b39c?s=128&d=identicon&r=PG&f=1", "display_name": "itajackass", "link": "https://stackoverflow.com/users/8877287/itajackass"}, "reply_to_user": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "edited": false, "score": 0, "creation_date": 1548879825, "post_id": 54435364, "comment_id": 95706633, "body": "@StefanBecker hi, i&#39;d like to use pure PHP cause the script can run on windows or linux system. So perl can&#39;t be executed in an hosted windows server where i can&#39;t install 3&#39; party software"}], "answers": [{"tags": [], "owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "is_accepted": false, "score": 1, "last_activity_date": 1548885521, "last_edit_date": 1548885521, "creation_date": 1548881170, "answer_id": 54449256, "question_id": 54435364, "link": "https://stackoverflow.com/questions/54435364/convert-shperl-script-to-php-script/54449256#54449256", "title": "Convert sh+perl script to php script", "body": "<p>Use the <a href=\"http://php.net/manual/en/simplexmlelement.xpath.php\" rel=\"nofollow noreferrer\">xpath()</a> method with a <a href=\"https://en.wikipedia.org/wiki/XPath\" rel=\"nofollow noreferrer\">XPath</a> for the node you are looking for:</p>\n\n<p><strong>EDIT:</strong> just to be on the safe side I added namespace handling</p>\n\n<pre class=\"lang-php prettyprint-override\"><code># default namespace for elements without namespace prefix\n$xmlDoc-&gt;registerXPathNamespace('default', 'http://uri.etsi.org/02231/v2#');\n\nforeach ($xmlDoc-&gt;xpath(\"//default:X509Certificate\") as $element) {\n</code></pre>\n\n<p>If you stringify <code>$element</code> you should get the text content of the node, i.e. the Base64 string you are looking for.</p>\n"}], "owner": {"reputation": 147, "user_id": 8877287, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/7811251ebbd7ca2da3f98bb123e4b39c?s=128&d=identicon&r=PG&f=1", "display_name": "itajackass", "link": "https://stackoverflow.com/users/8877287/itajackass"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 94, "favorite_count": 0, "answer_count": 1, "score": -3, "last_activity_date": 1548885521, "creation_date": 1548833534, "last_edit_date": 1548879651, "question_id": 54435364, "link": "https://stackoverflow.com/questions/54435364/convert-shperl-script-to-php-script", "title": "Convert sh+perl script to php script", "body": "<p>I've found a coded to retrieve CA certificates. The problem is that the script is .sh format:</p>\n\n<pre><code>wget -O - https://eidas.agid.gov.it/TL/TSL-IT.xml | perl -ne 'if (/&lt;X509Certificate&gt;/) {\ns/^\\s+//; s/\\s+$//;\ns/&lt;\\/*X509Certificate&gt;//g;\nprint \"-----BEGIN CERTIFICATE-----\\n\";\nwhile (length($_)&gt;64) {\nprint substr($_,0,64).\"\\n\";\n$_=substr($_,64);\n}\nprint $_.\"\\n\";\nprint \"-----END CERTIFICATE-----\\n\";\n}' &gt;CA.pem\n</code></pre>\n\n<p>I'd like to have it on PHP but i don't know how it work in .sh (i use windows and I can't view the output in .sh) so i don't know how to start conversion :(</p>\n\n<p>UPDATE: after some try i'm arrived to this point:</p>\n\n<pre><code>$xmlDoc = simplexml_load_file('https://eidas.agid.gov.it/TL/TSL-IT.xml');\n\n$content = \"\";\n\nforeach ($xmlDoc-&gt;SchemeInformation-&gt;PointersToOtherTSL-&gt;OtherTSLPointer-&gt;ServiceDigitalIdentities-&gt;ServiceDigitalIdentity as $key)\n{\n    $content .= \"-----BEGIN CERTIFICATE-----\" . PHP_EOL;\n    $content .= wordwrap($key-&gt;DigitalId-&gt;X509Certificate, 64, PHP_EOL, true);\n    $content .= PHP_EOL;\n    $content .= \"-----END CERTIFICATE-----\" . PHP_EOL;\n\n}\n\nfile_put_contents(\"test.txt\",$content);\n</code></pre>\n\n<p>The problem is that \"X509Certificate\" is in other blocks inside the XML, so i've to create a loop for every block. Is there a way to extract value only by element name = \"X509Certificate\" without know the correct tree gerarchy?</p>\n"}, {"tags": ["perl", "module", "package"], "comments": [{"owner": {"reputation": 188041, "user_id": 10676716, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/arsQA.jpg?s=128&g=1", "display_name": "GMB", "link": "https://stackoverflow.com/users/10676716/gmb"}, "edited": false, "score": 1, "creation_date": 1548819810, "post_id": 54433026, "comment_id": 95675635, "body": "Your package is called <code>Prepare</code>, not <code>My::Prepare</code>. Change <code>use My::Prepare;</code> to <code>use Prepare;</code>"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1548819894, "post_id": 54433026, "comment_id": 95675650, "body": "Questions:  Where is the module&#39;s file, in relation to the script (and/or to the path in <code>use lib</code>)?  What is the name of that (module&#39;s) file?"}, {"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 0, "creation_date": 1548820015, "post_id": 54433026, "comment_id": 95675668, "body": "<code>package Prepare;</code>, <code>use My::Prepare;</code>... one of those is wrong."}], "answers": [{"tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": true, "score": 11, "last_activity_date": 1615401737, "last_edit_date": 1615401737, "creation_date": 1548821441, "answer_id": 54433246, "question_id": 54433026, "link": "https://stackoverflow.com/questions/54433026/perl-module-creation-undefined-subroutine/54433246#54433246", "title": "Perl Module Creation - Undefined subroutine", "body": "<p>When it comes to package naming, three things need to agree:</p>\n<ul>\n<li><p>location and name of the package file</p>\n</li>\n<li><p>name in the <a href=\"https://perldoc.perl.org/functions/package.html\" rel=\"nofollow noreferrer\">package</a> statement in the package file (the namespace)</p>\n</li>\n<li><p>the <a href=\"https://perldoc.perl.org/functions/use.html\" rel=\"nofollow noreferrer\">use</a> statement for the package in the code that uses it</p>\n</li>\n</ul>\n<p>They need to &quot;agree&quot; as follows.</p>\n<p>If the package declaration in its file is <code>package My::Package;</code> then the package need be used as <code>use My::Package</code>, and its file is <code>Package.pm</code> in the directory <code>My</code>.</p>\n<p>This directory <code>My</code> itself need be in a location that the interpreter will search, or we need to inform it where to look. Custom packages are usually not in directories that are searched by default, which is what <a href=\"https://perldoc.perl.org/lib.html\" rel=\"nofollow noreferrer\">lib pragma</a> is for:  With your</p>\n<pre><code>use lib '/home/foobar/code';\n</code></pre>\n<p>I'd expect <code>My</code> directory, with <code>Package.pm</code> in it, to be in <code>/home/foobar/code</code> directory.</p>\n<p>Then here is your example, with fixed names and with a few more adjustments.</p>\n<p>File <code>/home/foobar/code/My/Prepare.pm</code> :</p>\n<pre><code>package My::Prepare;\n\nuse warnings;\nuse strict;\n\nuse Exporter qw(import);\n\nour @EXPORT_OK = qw( clean my_print );\n\nsub clean { chomp(@_); return @_ }\n\nsub my_print { print &quot;The Results: $_[0]\\n&quot; }\n\n1;\n</code></pre>\n<p>And a script that uses this module</p>\n<pre><code>#!/usr/bin/perl\nuse warnings;\nuse strict;\n\nuse lib '/home/foobar/code';\n\nuse My::Prepare qw(clean my_print);\n\nprint &quot;Enter a word: &quot;;\nmy $input = &lt;STDIN&gt;;\n\nprint &quot;You entered: $input&quot;;\n\nmy $cleaned_input = clean($input);\nmy_print($cleaned_input);\n</code></pre>\n<p>Please adjust paths above to your actual directory structure, by adding or removing path components as suitable. The name <code>My::</code> is sticking out in particular.</p>\n<p>A few notes.</p>\n<ul>\n<li><p>there is no need for the &quot;shebang&quot; line (<code>#!/usr/bin/perl</code>) in a module</p>\n</li>\n<li><p>use of <a href=\"http://perldoc.perl.org/Exporter.html\" rel=\"nofollow noreferrer\">Exporter</a> above is a bit more modern</p>\n</li>\n<li><p>I strongly recommend using <code>@EXPORT_OK</code> (instead of <code>@EXPORT</code>), so that all listed symbols must be specifically imported by the user of the module. That is just better for everybody</p>\n</li>\n</ul>\n"}], "owner": {"reputation": 67, "user_id": 10988002, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-PFZip3LpO5U/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQO6hyhBkwkGwXsrqulVyei3H2Oa-w/mo/photo.jpg?sz=128", "display_name": "James Gomez", "link": "https://stackoverflow.com/users/10988002/james-gomez"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 425, "favorite_count": 1, "accepted_answer_id": 54433246, "answer_count": 1, "score": 4, "last_activity_date": 1615401737, "creation_date": 1548819518, "last_edit_date": 1587372173, "question_id": 54433026, "link": "https://stackoverflow.com/questions/54433026/perl-module-creation-undefined-subroutine", "title": "Perl Module Creation - Undefined subroutine", "body": "<p>I'm new in perl and I'm trying to do this exercise but it doesn't work.</p>\n\n<p>This is my module that I created.</p>\n\n<pre><code>#!/usr/bin/perl \nuse warnings;\nuse strict;\n\npackage Prepare;\nrequire Exporter;\nour @ISA = qw(Exporter);\nour @EXPORT = qw( clean my_print );\n\nsub clean{\n    return chomp($_[0]);\n}\n\nsub my_print{\n    return print(\"The Results: $_[0]\\n\");\n}\n\n1;\n</code></pre>\n\n<p>And this my script <code>test_lib.pl</code></p>\n\n<pre><code>#!/usr/bin/perl\nuse warnings;\nuse strict;\n\nuse lib '/home/foobar/code';\nuse My::Prepare;\n\nprint \"Enter a word: \";\nmy $input=&lt;STDIN&gt;;\n\nprint \"You entered: $varia\";\n\nclean($input);\nmy_print($input);\n</code></pre>\n\n<p>I get this error:</p>\n\n<pre>\nUndefined subroutine &main::clean called at ./test_lib.pl line 13,  line 1.\n</pre>\n"}, {"tags": ["perl", "ole", "sqloledb"], "comments": [{"owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "edited": false, "score": 0, "creation_date": 1548829928, "post_id": 54430432, "comment_id": 95678410, "body": "Is <code>dbOpen(%dbConnectstr)</code> a typo? Are you sure you didn&#39;t mean to write <code>dbOpen(\\%dbConnectstr)</code> instead? Is <code>dpOpen()</code> your own code or from a module? If it is your own code, you should add to your question."}, {"owner": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "edited": false, "score": 0, "creation_date": 1554582482, "post_id": 54430432, "comment_id": 97807552, "body": "I don&#39;t recognize <code>dbOpen</code>. Is it a function they wrote? You may need <a href=\"https://docs.microsoft.com/en-us/sql/ado/microsoft-activex-data-objects-ado?view=sql-server-2017\" rel=\"nofollow noreferrer\">ADO</a> installed or to mess with ODBC settings."}], "owner": {"reputation": 251, "user_id": 5679516, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b368e234c403d64d0cca50ab81d06913?s=128&d=identicon&r=PG&f=1", "display_name": "Owen", "link": "https://stackoverflow.com/users/5679516/owen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 457, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1554582061, "creation_date": 1548800036, "last_edit_date": 1554582061, "question_id": 54430432, "link": "https://stackoverflow.com/questions/54430432/activestate-perl-and-win32ole-on-windows-10", "title": "ActiveState Perl and Win32::OLE on Windows 10", "body": "<p>I'm trying to figure out what some old Perl that is used for reporting on our websites is doing. I've gotten ActiveState Perl installed and things seem to be working EXCEPT that when the Perl tries to open a database connection. The following error is displayed:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>Error creating ADODB.Connection to [our connection string redacted]: OLE exception from \"ADODB.Connection\":\n\nProvider cannot be found. It may not be properly installed.\n\nWin32::OLE(0.1712) error 0x800a0e7a\n    in METHOD/PROPERTYGET \"Open\"\" failed:256\n</code></pre>\n\n<p>The offending line of Perl is:</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>$dbhandle = dbOpen(%dbConnectstr);\n</code></pre>\n\n<p>The following use statements are also used:</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>use Win32::OLE;\nuse Win32::OLE::Const 'Microsoft ActiveX Data Objects';\n</code></pre>\n\n<p>How do I install (or configure or?) the provider on Windows&nbsp;10?</p>\n"}, {"tags": ["perl", "data-structures"], "comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1548793259, "post_id": 54428980, "comment_id": 95668107, "body": "Surely it does, and there are many ways in fact.  Can you provide a little context?  There really are all kinds of ways ..."}, {"owner": {"reputation": 2833, "user_id": 9300627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7a38cf029222bcf1d902e6b2759ffeb?s=128&d=identicon&r=PG", "display_name": "haukex", "link": "https://stackoverflow.com/users/9300627/haukex"}, "edited": false, "score": 3, "creation_date": 1548794224, "post_id": 54428980, "comment_id": 95668497, "body": "IIRC, this is covered in <a href=\"http://shop.oreilly.com/product/9781565923980.do\" rel=\"nofollow noreferrer\">Mastering Algorithms with Perl</a>. But since Perl&#39;s arrays are dynamic, you usually don&#39;t need to create linked lists, except as an exercise in data structures. Maybe you could explain more about what you&#39;re trying to do."}], "answers": [{"tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 6, "last_activity_date": 1548794857, "creation_date": 1548794857, "answer_id": 54429332, "question_id": 54428980, "link": "https://stackoverflow.com/questions/54428980/creating-a-linked-list-structure-in-perl/54429332#54429332", "title": "Creating a linked list structure in Perl", "body": "<p>You don't tend to see Perl programmers creating things like linked lists. You might want to read <a href=\"https://perldoc.perl.org/perllol.html\" rel=\"noreferrer\">perllol</a> and <a href=\"https://perldoc.perl.org/perldsc.html\" rel=\"noreferrer\">perldsc</a> to find out about more typically \"Perlish\" data structures.</p>\n\n<p>Having said that, you could look at the source of <a href=\"https://metacpan.org/pod/LinkedList::Single\" rel=\"noreferrer\">LinkedList::Single</a> to see one way to write a singly-linked list in Perl.</p>\n"}, {"comments": [{"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 2, "creation_date": 1548796226, "post_id": 54429528, "comment_id": 95669321, "body": "These days I&#39;d recommend using <a href=\"https://metacpan.org/pod/FFI::Platypus\" rel=\"nofollow noreferrer\">libffi</a> to link such a library. It is almost trivial and requires only a basic understanding of the C data types you&#39;re interacting with. <a href=\"https://metacpan.org/pod/Unix::Groups::FFI\" rel=\"nofollow noreferrer\">It&#39;s so easy even I can do it!</a>"}], "tags": [], "owner": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "is_accepted": true, "score": 7, "last_activity_date": 1548795801, "creation_date": 1548795801, "answer_id": 54429528, "question_id": 54428980, "link": "https://stackoverflow.com/questions/54428980/creating-a-linked-list-structure-in-perl/54429528#54429528", "title": "Creating a linked list structure in Perl", "body": "<p>You can do this basically the same way you'd do it in C, but use <a href=\"http://perldoc.perl.org/perlreftut.html\" rel=\"noreferrer\">references instead of pointers</a> and hashes instead of structs.</p>\n\n<p>But in Perl usually you don't have to because Perl's built in arrays are pretty smart and fast. They grow automatically and already do most of what a linked list can do like adding and removing arbitrary elements with <code>splice</code>, and adding and removing from the front and back of the array with <code>pop</code>, <code>push</code>, <code>shift</code>, and <code>unshift</code>. And, unlike a linked list, you get O(1) random access. See <a href=\"https://perldoc.perl.org/perlfunc.html\" rel=\"noreferrer\">perlfunc</a> for more.</p>\n\n<p>You also don't do this because writing your own data structures in Perl tend to be pretty slow. Perl arrays are written in C, but your linked list will be written in much slower Perl and consume much more memory. While the algorithm might be more efficient, the implementation will be slow. In Computer Science terms, the constant will be very large. The end result is specialized data structures like linked lists and trees only make sense when you start to get into hundreds of thousands or millions of elements.</p>\n\n<p>Your other option is to use a linked list library written in C. <a href=\"http://perldoc.perl.org/perlxstut.html\" rel=\"noreferrer\">You can take advantage of C libraries using a thing called XS that acts as a bridge between C code and Perl code</a>. But it's not the easiest thing to use.</p>\n"}], "owner": {"reputation": 601, "user_id": 1419500, "user_type": "registered", "accept_rate": 7, "profile_image": "https://www.gravatar.com/avatar/e1e29dcd06504cfdf8a0e2427a8cff73?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel Kaplan", "link": "https://stackoverflow.com/users/1419500/daniel-kaplan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1152, "favorite_count": 1, "accepted_answer_id": 54429528, "answer_count": 2, "score": 3, "last_activity_date": 1548795801, "creation_date": 1548793099, "question_id": 54428980, "link": "https://stackoverflow.com/questions/54428980/creating-a-linked-list-structure-in-perl", "title": "Creating a linked list structure in Perl", "body": "<p>In C you can create your own structure, and from there create a linked list where a record in the structure would point to the next record as well as the previous one.  </p>\n\n<p>Surely Perl must have a way to do this?  Would love to know how.</p>\n\n<p>Thanks</p>\n"}, {"tags": ["r", "regex", "perl"], "comments": [{"owner": {"reputation": 11263, "user_id": 10323798, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JT4VX.png?s=128&g=1", "display_name": "NelsonGon", "link": "https://stackoverflow.com/users/10323798/nelsongon"}, "edited": false, "score": 0, "creation_date": 1548787610, "post_id": 54427682, "comment_id": 95665508, "body": "Your expected output isn&#39;t clear. What is it exactly?"}, {"owner": {"reputation": 35, "user_id": 10979556, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Yk3PR.jpg?s=128&g=1", "display_name": "Dr_Zlo", "link": "https://stackoverflow.com/users/10979556/dr-zlo"}, "reply_to_user": {"reputation": 11263, "user_id": 10323798, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JT4VX.png?s=128&g=1", "display_name": "NelsonGon", "link": "https://stackoverflow.com/users/10323798/nelsongon"}, "edited": false, "score": 0, "creation_date": 1548833797, "post_id": 54427682, "comment_id": 95680238, "body": "@NelsonGon the output should contain the first eight numbers of each line, YearsTopith and Radius values if they exist (values with labels). I hope it is more clear now."}], "answers": [{"comments": [{"owner": {"reputation": 35, "user_id": 10979556, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Yk3PR.jpg?s=128&g=1", "display_name": "Dr_Zlo", "link": "https://stackoverflow.com/users/10979556/dr-zlo"}, "edited": false, "score": 0, "creation_date": 1548834451, "post_id": 54427837, "comment_id": 95680529, "body": "Pop-up warning that argument passed to stri_replace_all_regex should be an atomic vector. Instead, some coercing were done and output is: [1] ....\\&quot;\\&quot;, \\&quot;\\&quot;, \\&quot;\\&quot;, \\&quot;\\&quot;, \\&quot;\\&quot;, \\&quot;\\&quot;, \\&quot;\\&quot;, \\&quot;\\&quot;, \\&quot;\\&quot;, \\&quot;\\&quot;, \\&quot;\\&quot;, \\&quot;\\&quot;, \\&quot;\\&quot;, \\&quot;\\&quot;, \\&quot;\\&quot;, \\&quot;\\&quot;, \\&quot;\\&quot;, \\&quot;\\&quot;, \\&quot;\\&quot;, \\&quot;\\&quot;, \\&quot;\\&quot;, \\&quot;\\&quot;, \\&quot;\\&quot;, \\&quot;\\&quot;, \\&quot;\\&quot;, \\&quot;\\&quot;, \\&quot;\\&quot;, \\&quot;\\&quot;, \\&quot;\\&quot;, \\&quot;\\&quot;, \\&quot;\\&quot;, \\&quot;\\&quot;, \\&quot;\\&quot;, \\&quot;\\&quot;, \\&quot;\\&quot;, \\&quot;\\&quot;, \\&quot;\\&quot;, \\&quot;\\&quot;, \\&quot;\\&quot;, 1825\\&quot;, 2013\\&quot;)&quot; [2] &quot;c(00010131\\&quot;, \\&quot;DistanceToPith=15.0;\\&quot;, \\&quot;YearsToPith=3;\\&quot;, \\&quot;Radius=50.128;\\&quot;, \\&quot;CalcRadius=Yes;\\&quot;, \\&quot;\\&quot;)&quot;"}], "tags": [], "owner": {"reputation": 11263, "user_id": 10323798, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JT4VX.png?s=128&g=1", "display_name": "NelsonGon", "link": "https://stackoverflow.com/users/10323798/nelsongon"}, "is_accepted": false, "score": 1, "last_activity_date": 1548790836, "last_edit_date": 1548790836, "creation_date": 1548787885, "answer_id": 54427837, "question_id": 54427682, "link": "https://stackoverflow.com/questions/54427682/extract-several-part-of-the-string-using-r/54427837#54427837", "title": "Extract several part of the string using R", "body": "<pre><code>library(stringr)\nres&lt;-sapply(str_split(s,\" \"),\"[\")[c(2,4,5)]\nstr_remove_all(res,\"(\\\\D(?=\\\\d{4,}))\")\n[1] \"00010131\"       \"YearsToPith=3;\" \"Radius=50.128;\"\n</code></pre>\n\n<p>Minus the words:</p>\n\n<pre><code>res1&lt;-str_remove_all(res,\"(\\\\D(?=\\\\d{4,}))\")\nstr_remove(res1,\"\\\\w{3,}=\")\n[1] \"00010131\" \"3;\"       \"50.128;\"\n</code></pre>\n\n<p>Just first eight numbers:</p>\n\n<pre><code>str_extract_all(s,\"\\\\d{8,}(?=\\\\s)\")\n[[1]]\n[1] \"00010131\"\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 7646, "user_id": 6867048, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b939fdb5809fed8097c38bdf4370747b?s=128&d=identicon&r=PG&f=1", "display_name": "stack0114106", "link": "https://stackoverflow.com/users/6867048/stack0114106"}, "is_accepted": false, "score": 0, "last_activity_date": 1548788668, "creation_date": 1548788668, "answer_id": 54428024, "question_id": 54427682, "link": "https://stackoverflow.com/questions/54427682/extract-several-part-of-the-string-using-r/54428024#54428024", "title": "Extract several part of the string using R", "body": "<p>I understand that you need the eight-digit id, followed by text containing YearsToPith and Radius values.</p>\n\n<p>Try this Perl</p>\n\n<pre><code>$ perl -ne ' @x=$_=~m/\\S+\\s\"(\\S+)\\s+.+?YearsToPith=(\\d+).+\\s+Radius=(\\S+)/ ; print \"$x[0] $x[1] $x[2]\\n\" if (@x) ' marko.txt\n00010131 3 50.128;\n00010132 3 104.927;\n\n$\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "is_accepted": true, "score": 1, "last_activity_date": 1548791315, "creation_date": 1548791315, "answer_id": 54428632, "question_id": 54427682, "link": "https://stackoverflow.com/questions/54427682/extract-several-part-of-the-string-using-r/54428632#54428632", "title": "Extract several part of the string using R", "body": "<p>The output of <code>gregexpr</code> with capture groups in the <code>pattern</code> and <code>perl=TRUE</code> has attributes <code>\"capture.start\"</code> and <code>\"capture.length\"</code>, which give you the indexes into the input that match your pattern.</p>\n\n<pre><code>ind &lt;- lapply(gregexpr(PATTERN, INPUT, perl=TRUE),\n     function(r) rbind(attr(r,\"capture.start\"),\n                       attr(r,\"capture.length\")-1))\nOUPTUT &lt;- t(sapply(1:length(input), function(i) \n    apply(ind[[i]],2, function(y) substr(input[i],y[1],y[1]+y[2]))))\n</code></pre>\n\n<p>On your input with</p>\n\n<pre><code>PATTERN &lt;- \"^(\\\\d{8}).*(YearsToPith=\\\\d+;).*(Radius=[\\\\d\\\\.]+;)\"\n</code></pre>\n\n<p>the output is:</p>\n\n<pre><code> [1,] \"00010131\" \"YearsToPith=3;\" \"Radius=50.128;\" \n [2,] \"\"         \"\"               \"\"               \n [3,] \"\"         \"\"               \"\"               \n [4,] \"\"         \"\"               \"\"               \n [5,] \"\"         \"\"               \"\"               \n [6,] \"\"         \"\"               \"\"               \n [7,] \"\"         \"\"               \"\"               \n [8,] \"\"         \"\"               \"\"               \n [9,] \"00010132\" \"YearsToPith=3;\" \"Radius=104.927;\"\n[10,] \"\"         \"\"               \"\"               \n[11,] \"\"         \"\"               \"\"               \n[12,] \"\"         \"\"               \"\"               \n[13,] \"\"         \"\"               \"\"               \n[14,] \"\"         \"\"               \"\"               \n[15,] \"\"         \"\"               \"\"               \n</code></pre>\n"}], "owner": {"reputation": 35, "user_id": 10979556, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Yk3PR.jpg?s=128&g=1", "display_name": "Dr_Zlo", "link": "https://stackoverflow.com/users/10979556/dr-zlo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 63, "favorite_count": 0, "accepted_answer_id": 54428632, "answer_count": 3, "score": 1, "last_activity_date": 1548791315, "creation_date": 1548787377, "question_id": 54427682, "link": "https://stackoverflow.com/questions/54427682/extract-several-part-of-the-string-using-r", "title": "Extract several part of the string using R", "body": "<p>I keep trying to compile the expression which would extract from the following data: </p>\n\n<pre><code>  [4] \"00010131 DistanceToPith=15.0; YearsToPith=3; Radius=50.128; CalcRadius=Yes; \"  \n  [5] \"00010131 PithCoordinates=60.919,6.071; SiteId=KO31; \"                          \n  [6] \"00010131 Location=Djerdap, GJ \\\"Ko\u017eica\\\" odeljenje 31; State=Srbija; \"         \n  [7] \"00010131 SpeciesCode=QUPE; SpeciesName=Kitnjak, Quercus petrea; \"              \n  [8] \"00010131 Personal_ID=Marko Kazimirovic; DateOfSampling=jesen 2013; \"           \n  [9] \"00010131 Name=00010131; Written=2018-05-04 16:53:09; \"                         \n [10] \"00010131 EarthCoord=E 44 35 N 21 58; Elev=450-465; \"                           \n [11] \"00010131 Project=Radakovicev magistarski; \"                                    \n [12] \"00010132 DistanceToPith=6.7; YearsToPith=3; Radius=104.927; CalcRadius=Yes; \"  \n [13] \"00010132 PithCoordinates=108.974,27.022; Written=2018-05-04 17:09:35; \"        \n [14] \"00010132 SiteId=KO31; Location=Djerdap, GJ \\\"Ko\u017eica\\\" odeljenje 31; \"          \n [15] \"00010132 EarthCoord=E 44 35 N 21 58; Elev=450-465; State=Srbija; \"             \n [16] \"00010132 SpeciesCode=QUPE; SpeciesName=Kitnjak, Quercus petrea; \"              \n [17] \"00010132 Project=Radakovicev magistarski; Personal_ID=Marko Kazimirovic; \"     \n [18] \"00010132 DateOfSampling=jesen 2013; Name=00010132; \"   \n</code></pre>\n\n<p>just first eight numbers</p>\n\n<pre><code>(^\\\\d{8}), (YearsToPith=\\\\d+;)) and (Radius=\\\\d+;) \n</code></pre>\n\n<p>and nothing else. </p>\n\n<p>Beside this, I am looking for advice and the links where to find comprehensive literature for regular expression in R, since the scope of manuals that I have looked at were quite narrow, limited only to explaining the basics with pretty much simple examples.</p>\n"}, {"tags": ["python-3.x", "perl"], "comments": [{"owner": {"reputation": 1290, "user_id": 4180176, "user_type": "registered", "accept_rate": 77, "profile_image": "https://graph.facebook.com/1022787394506806/picture?type=large", "display_name": "Joshua Nixon", "link": "https://stackoverflow.com/users/4180176/joshua-nixon"}, "edited": false, "score": 0, "creation_date": 1548785650, "post_id": 54427104, "comment_id": 95664540, "body": "Maybe this might help <a href=\"https://stackoverflow.com/a/46521290/4180176\">stackoverflow.com/a/46521290/4180176</a>"}, {"owner": {"reputation": 145, "user_id": 6150003, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/3153eed198c13a08fc7ba7ca1f57e5e1?s=128&d=identicon&r=PG&f=1", "display_name": "rooger", "link": "https://stackoverflow.com/users/6150003/rooger"}, "reply_to_user": {"reputation": 1290, "user_id": 4180176, "user_type": "registered", "accept_rate": 77, "profile_image": "https://graph.facebook.com/1022787394506806/picture?type=large", "display_name": "Joshua Nixon", "link": "https://stackoverflow.com/users/4180176/joshua-nixon"}, "edited": false, "score": 0, "creation_date": 1548786192, "post_id": 54427104, "comment_id": 95664790, "body": "If I&#39;m using smtplib.SMTP_SSL() I&#39;m getting  Connection reset by peer"}, {"owner": {"reputation": 1290, "user_id": 4180176, "user_type": "registered", "accept_rate": 77, "profile_image": "https://graph.facebook.com/1022787394506806/picture?type=large", "display_name": "Joshua Nixon", "link": "https://stackoverflow.com/users/4180176/joshua-nixon"}, "edited": false, "score": 0, "creation_date": 1548786461, "post_id": 54427104, "comment_id": 95664916, "body": "So the email domain you are attempting to connect to is local? Perhaps try <code>localhost</code> or <code>0.0.0.0</code>, is the port correct? I saw an example where the port is not provided at call, try that too. Throwing ideas out."}, {"owner": {"reputation": 145, "user_id": 6150003, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/3153eed198c13a08fc7ba7ca1f57e5e1?s=128&d=identicon&r=PG&f=1", "display_name": "rooger", "link": "https://stackoverflow.com/users/6150003/rooger"}, "reply_to_user": {"reputation": 1290, "user_id": 4180176, "user_type": "registered", "accept_rate": 77, "profile_image": "https://graph.facebook.com/1022787394506806/picture?type=large", "display_name": "Joshua Nixon", "link": "https://stackoverflow.com/users/4180176/joshua-nixon"}, "edited": false, "score": 0, "creation_date": 1548786589, "post_id": 54427104, "comment_id": 95664985, "body": "Yes, I&#39;m every host/port I&#39;m trying I get Connection unexpectedly closed unless I use 127.0.0.1 with port 25 and with SMTP_SSL() then I get Connection reset by peer"}, {"owner": {"reputation": 1290, "user_id": 4180176, "user_type": "registered", "accept_rate": 77, "profile_image": "https://graph.facebook.com/1022787394506806/picture?type=large", "display_name": "Joshua Nixon", "link": "https://stackoverflow.com/users/4180176/joshua-nixon"}, "edited": false, "score": 0, "creation_date": 1548787228, "post_id": 54427104, "comment_id": 95665320, "body": "Your error occurred when I attempted to connect to gmail with an incorrect port. Did you try omitting the port parameter when you call <code>.SMTP</code>?"}, {"owner": {"reputation": 248, "user_id": 6275985, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Gs7TzA40-wo/AAAAAAAAAAI/AAAAAAAABas/xBIyaZU21Bk/photo.jpg?sz=128", "display_name": "Surendra Deshpande", "link": "https://stackoverflow.com/users/6275985/surendra-deshpande"}, "edited": false, "score": 0, "creation_date": 1548790346, "post_id": 54427104, "comment_id": 95666874, "body": "This can be achieved through Jenkins post build action as well, is there any limitation that is stopping you from using Jenkins feature of extended email?"}, {"owner": {"reputation": 145, "user_id": 6150003, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/3153eed198c13a08fc7ba7ca1f57e5e1?s=128&d=identicon&r=PG&f=1", "display_name": "rooger", "link": "https://stackoverflow.com/users/6150003/rooger"}, "reply_to_user": {"reputation": 248, "user_id": 6275985, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Gs7TzA40-wo/AAAAAAAAAAI/AAAAAAAABas/xBIyaZU21Bk/photo.jpg?sz=128", "display_name": "Surendra Deshpande", "link": "https://stackoverflow.com/users/6275985/surendra-deshpande"}, "edited": false, "score": 0, "creation_date": 1548865825, "post_id": 54427104, "comment_id": 95699575, "body": "@SurendraDeshpande Nothing is stopping me from using that jenkins feature, just for learning reasons I&#39;m trying to achieve this via Python"}], "answers": [{"comments": [{"owner": {"reputation": 145, "user_id": 6150003, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/3153eed198c13a08fc7ba7ca1f57e5e1?s=128&d=identicon&r=PG&f=1", "display_name": "rooger", "link": "https://stackoverflow.com/users/6150003/rooger"}, "edited": false, "score": 0, "creation_date": 1548786233, "post_id": 54427235, "comment_id": 95664810, "body": "Hmm this wont work, I&#39;m not trying to connect to an external mail server, I&#39;m trying to make it work with my mail server that is installed on the server"}], "tags": [], "owner": {"reputation": 1, "user_id": 10980476, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b844a6e502f72c50073eed9556c9aebc?s=128&d=identicon&r=PG&f=1", "display_name": "Fe Jacobs", "link": "https://stackoverflow.com/users/10980476/fe-jacobs"}, "is_accepted": false, "score": -1, "last_activity_date": 1548785591, "creation_date": 1548785591, "answer_id": 54427235, "question_id": 54427104, "link": "https://stackoverflow.com/questions/54427104/sending-email-works-in-perl-doesnt-in-python/54427235#54427235", "title": "Sending email works in perl, doesn&#39;t in python", "body": "<p>Yes i have done it for an gmx-mail</p>\n\n<pre><code>import smtplib\nfrom email.mime.text import MIMEText\n\n\nclass MailService:\n    senderEmail = \"...\"\n    fromMail = \"...\"\n\n    def __init__(self):\n        self.server = smtplib.SMTP('mail.gmx.net', 587)  # Die Server Daten\n        self.server.starttls()\n        self.server.login(self.senderEmail, \"passwort\")  # Das Passwort\n\n    def __delete__(self, instance):\n        self.server.quit()\n\n    def sendMail(self, toMail, text, subject):\n        msg = MIMEText(text)\n        msg['From'] = self.fromMail\n        msg['To'] = toMail\n        msg['Subject'] = subject\n        mail = msg.as_string()\n        self.server.sendmail(self.fromMail, toMail, mail)\n</code></pre>\n"}], "owner": {"reputation": 145, "user_id": 6150003, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/3153eed198c13a08fc7ba7ca1f57e5e1?s=128&d=identicon&r=PG&f=1", "display_name": "rooger", "link": "https://stackoverflow.com/users/6150003/rooger"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 187, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1548785591, "creation_date": 1548785048, "question_id": 54427104, "link": "https://stackoverflow.com/questions/54427104/sending-email-works-in-perl-doesnt-in-python", "title": "Sending email works in perl, doesn&#39;t in python", "body": "<p>I can sent emails from a perl script but not from a python script.    </p>\n\n<p>I've created a perl script that runs on a daily basis via jenkins and if some checks fails it sends me an email.   </p>\n\n<p>I'm trying to migrate the script from perl to python3.7 but can't send an email from python.    </p>\n\n<p>This is the code in perl:</p>\n\n<pre><code>use strict;\nuse warnings;\n\nuse Email::MIME;\nuse Email::Sender::Simple qw(sendmail);\nuse Data::Dumper;\n\nmy $message = Email::MIME-&gt;create(\n    header_str =&gt; [\n    From    =&gt; 'my_email@domain.com',\n    To      =&gt;  $email,\n    Subject =&gt; 'just a subject',\n    ],\n    attributes =&gt; {\n        encoding =&gt; 'quoted-printable',\n        charset  =&gt; 'ISO-8859-1',\n    },\n    body_str =&gt; $arr_msg,\n    );\n\n    my $email_test = sendmail($message);\n\n}\n</code></pre>\n\n<p>This is the code in python:   </p>\n\n<pre><code>import smtplib\n\nserver = smtplib.SMTP('127.0.0.1', 25) # also tried my-domain.com with port 2525\n\nserver.sendmail(\n    \"me@my-domain.com\", \n    \"someone@address.com\", \n    \"this message is from python\")\nserver.quit()\n</code></pre>\n\n<p>It dies at server = smtplib.SMTP('127.0.0.1', 25)  with error:   </p>\n\n<pre><code>smtplib.SMTPServerDisconnected: Connection unexpectedly closed\n</code></pre>\n\n<p>Output of lsof -i :25</p>\n\n<pre><code>COMMAND  PID USER   FD   TYPE     DEVICE SIZE/OFF NODE NAME\nmaster  2728 root   12u  IPv4 1774572613      0t0  TCP \nlocalhost.localdomain:smtp (LISTEN)\n</code></pre>\n\n<p>What could it be?</p>\n"}, {"tags": ["perl", "go"], "comments": [{"owner": {"reputation": 32095, "user_id": 7426, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5a562698800b535e47b68590f63c402a?s=128&d=identicon&r=PG", "display_name": "Adrian", "link": "https://stackoverflow.com/users/7426/adrian"}, "edited": false, "score": 3, "creation_date": 1548771425, "post_id": 54422977, "comment_id": 95656008, "body": "Go has arrays, though you usually use slices. Go&#39;s hashes are called maps. There is no reason you can&#39;t create an array of maps or a map of arrays. Take the Go tour to get a handle on the basics: <a href=\"https://tour.golang.org\" rel=\"nofollow noreferrer\">tour.golang.org</a>"}, {"owner": {"reputation": 118, "user_id": 2542096, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/w3iTP.png?s=128&g=1", "display_name": "jiri.hofman", "link": "https://stackoverflow.com/users/2542096/jiri-hofman"}, "edited": false, "score": 1, "creation_date": 1548772374, "post_id": 54422977, "comment_id": 95656602, "body": "Seems like similar question is <a href=\"https://stackoverflow.com/questions/43379772/making-array-of-hashes-in-golang\">already answered</a>"}, {"owner": {"reputation": 2799, "user_id": 1485311, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/sNWZV.jpg?s=128&g=1", "display_name": "ChatterOne", "link": "https://stackoverflow.com/users/1485311/chatterone"}, "edited": false, "score": 1, "creation_date": 1548772415, "post_id": 54422977, "comment_id": 95656629, "body": "You can put a hash map into an array, just remember that Perl is one of the few languages (if not the only one) that supports auto-vivification. So, if you expect to have a dynamic hash that changes its structure and replicate that in golang, that&#39;s not going to work."}, {"owner": {"reputation": 35, "user_id": 4354065, "user_type": "registered", "profile_image": "https://graph.facebook.com/100002060422067/picture?type=large", "display_name": "Raimonds Linde", "link": "https://stackoverflow.com/users/4354065/raimonds-linde"}, "edited": false, "score": 0, "creation_date": 1548832337, "post_id": 54422977, "comment_id": 95679492, "body": "Thanks everyone!  type host map[string]interface{}  and  var hosts []host  it is. I always search for all possible posts, but yesterday was kind of slow for me."}], "answers": [{"tags": [], "owner": {"reputation": 118, "user_id": 2542096, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/w3iTP.png?s=128&g=1", "display_name": "jiri.hofman", "link": "https://stackoverflow.com/users/2542096/jiri-hofman"}, "is_accepted": false, "score": 1, "last_activity_date": 1548772718, "creation_date": 1548772718, "answer_id": 54423434, "question_id": 54422977, "link": "https://stackoverflow.com/questions/54422977/how-to-recreate-perls-array-of-hashes-in-golang/54423434#54423434", "title": "How to recreate perl&#39;s array of hashes in golang?", "body": "<pre><code>var array = []map[string]interface{}{\n    {\"address\": \"test.com\", \"hostgroups\": []string{\"zero\", \"one\", \"or many\"}, \"id\": 101},\n    {\"address\": \"test2.com\", \"hostgroups\": []string{\"zero\", \"one\", \"or many\"}, \"id\": 102},\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 35, "user_id": 4354065, "user_type": "registered", "profile_image": "https://graph.facebook.com/100002060422067/picture?type=large", "display_name": "Raimonds Linde", "link": "https://stackoverflow.com/users/4354065/raimonds-linde"}, "is_accepted": false, "score": 0, "last_activity_date": 1548832667, "creation_date": 1548832667, "answer_id": 54435160, "question_id": 54422977, "link": "https://stackoverflow.com/questions/54422977/how-to-recreate-perls-array-of-hashes-in-golang/54435160#54435160", "title": "How to recreate perl&#39;s array of hashes in golang?", "body": "<p>This is the answer.</p>\n\n<pre><code>type host map[string]interface{}\n\nvar hosts []host\n\nh := host{\n    \"id\":         id,\n    \"file_id\":    \"etc/config/hosts.cfg\",\n    \"host_name\":  host_name,\n    \"alias\":      host_name,\n    \"address\":    host_name,\n    \"hostgroups\": hg,\n    \"template\":   \"generic-host\",\n}\n\nhosts = append(hosts, h)\n</code></pre>\n"}], "owner": {"reputation": 35, "user_id": 4354065, "user_type": "registered", "profile_image": "https://graph.facebook.com/100002060422067/picture?type=large", "display_name": "Raimonds Linde", "link": "https://stackoverflow.com/users/4354065/raimonds-linde"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 130, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1548832667, "creation_date": 1548771200, "question_id": 54422977, "link": "https://stackoverflow.com/questions/54422977/how-to-recreate-perls-array-of-hashes-in-golang", "title": "How to recreate perl&#39;s array of hashes in golang?", "body": "<p>In perl I can push $hashref into @array and have this data for next foreach and possible encode_json (HTTP POST).</p>\n\n<p>I can't figure out how to recreate the same login in golang?</p>\n\n<pre><code>$VAR1 = [\n      {\n        'address' =&gt; 'test.com',\n        'id' =&gt; 101,\n        'hostgroups' =&gt; [\n                          zero\n                          'one',\n                          'or many'\n                        ],\n        'host_name' =&gt; 'test.com',\n        'alias' =&gt; 'test.com',\n        'template' =&gt; 'generic',\n        'file_id' =&gt; 'etc/config'\n      },\n      {\n        'address' =&gt; 'test2.com',\n        'id' =&gt; 102,\n        'hostgroups' =&gt; [\n                          zero\n                          'one',\n                          'or many'\n                        ],\n        'host_name' =&gt; 'test2.com',\n        'alias' =&gt; 'test2.com',\n        'template' =&gt; 'generic',\n        'file_id' =&gt; 'etc/config'\n      },\n      (..)\n</code></pre>\n"}, {"tags": ["perl", "module", "cpan", "autoconf", "msys2"], "comments": [{"owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "edited": false, "score": 1, "creation_date": 1548770871, "post_id": 54422713, "comment_id": 95655601, "body": "Just my $0.02, but <code>&#47;usr&#47;local&#47;</code> doesn&#39;t sound like you are calling <code>&#47;usr&#47;bin&#47;perl.exe</code> from the MSYS2 Perl package..."}, {"owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "edited": false, "score": 1, "creation_date": 1548771392, "post_id": 54422713, "comment_id": 95655986, "body": "FYI: when printing <code>@INC</code> under MSYS2 on my WIndows 10 machine I only get paths under <code>&#47;usr&#47;lib&#47;perl5</code> and <code>&#47;usr&#47;share&#47;perl5</code>."}, {"owner": {"reputation": 1091, "user_id": 2474153, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/135319305ef65fd3ac0259fdbd7f4116?s=128&d=identicon&r=PG", "display_name": "Terry", "link": "https://stackoverflow.com/users/2474153/terry"}, "reply_to_user": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "edited": false, "score": 0, "creation_date": 1548773656, "post_id": 54422713, "comment_id": 95657516, "body": "@StefanBecker Thank you for the comment. I have installed the MSYS Perl into a new directoryunder /usr/local on purpose in order to be able to switch to the ActiveState&#39;s Perl when I need to. And I defined this new Perl into MSYS&#39;s .bash_profile like so <code>export PERL5=&#47;usr&#47;local&#47;perl-5.22.1 &amp;&amp; PATH=$PATH:$PERL5&#47;bin</code> and I of course erased the ActiveState&#39;s Perl path from Windows System Environment Variables. This setup works quite fine under the MSYS environment."}, {"owner": {"reputation": 1091, "user_id": 2474153, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/135319305ef65fd3ac0259fdbd7f4116?s=128&d=identicon&r=PG", "display_name": "Terry", "link": "https://stackoverflow.com/users/2474153/terry"}, "reply_to_user": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "edited": false, "score": 0, "creation_date": 1548773672, "post_id": 54422713, "comment_id": 95657532, "body": "To define the Perl modules&#39; directory I entered those lines into ~/.bash_profile <code>export PERL5LIB=$PERL5&#47;lib&#47;perl5&#47;vendor_perl&quot;${PERL5LIB:+:$PERL5LIB&zwnj;&#8203;}&quot;</code> <code>export PERL5LIB=$PERL5&#47;lib&#47;perl5&#47;site_perl&quot;${PERL5LIB:+:$PERL5LIB}&quot;</code> <code>export PERL5LIB=$PERL5&#47;lib&#47;perl5&#47;core_perl&quot;${PERL5LIB:+:$PERL5LIB}&quot;</code> and that seems to work fine too."}, {"owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "edited": false, "score": 0, "creation_date": 1548775458, "post_id": 54422713, "comment_id": 95658807, "body": "Hacking and &quot;shooting yourself in the foot&quot; go hand-in-hand most of the time :-) Glad you got your problem solved. Probably you should close/delete your question."}, {"owner": {"reputation": 1091, "user_id": 2474153, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/135319305ef65fd3ac0259fdbd7f4116?s=128&d=identicon&r=PG", "display_name": "Terry", "link": "https://stackoverflow.com/users/2474153/terry"}, "reply_to_user": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "edited": false, "score": 0, "creation_date": 1548777030, "post_id": 54422713, "comment_id": 95659784, "body": "This setup works fine as long as there are no modules being used. The problem is how to install any modules on this setup."}, {"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 0, "creation_date": 1548777159, "post_id": 54422713, "comment_id": 95659878, "body": "Is the autoconf package that&#39;s installable through msys2 not working?"}, {"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 0, "creation_date": 1548777259, "post_id": 54422713, "comment_id": 95659946, "body": "And the version of perl in my msys2 installation is 5.28.1. Have you not run a <code>pacman -Syu</code> in years or something?"}, {"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 0, "creation_date": 1548777612, "post_id": 54422713, "comment_id": 95660186, "body": "And of course none of your paths make sense. What do you think &quot;MSYS Perl&quot; is and how are you installing it? It doesn&#39;t appear to be via the usual way."}, {"owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "edited": false, "score": 1, "creation_date": 1548779241, "post_id": 54422713, "comment_id": 95661175, "body": "@Romario: if your &quot;requirement to switch&quot; is static, how about installing msys2 perl package with <code>pacman</code> and then making <code>&#47;usr&#47;bin&#47;perl</code> a symlink that you can switch? You might even want to look into using <code>alternatives</code> system for that."}, {"owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "edited": false, "score": 0, "creation_date": 1548779571, "post_id": 54422713, "comment_id": 95661375, "body": "Another option might be to to use regular msys2 perl installation and <code>PERL=&#47;usr&#47;bin&#47;perl5.22.1 .&#47;autoconf.sh</code>."}, {"owner": {"reputation": 1091, "user_id": 2474153, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/135319305ef65fd3ac0259fdbd7f4116?s=128&d=identicon&r=PG", "display_name": "Terry", "link": "https://stackoverflow.com/users/2474153/terry"}, "reply_to_user": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 0, "creation_date": 1548779971, "post_id": 54422713, "comment_id": 95661614, "body": "@Shawn Thank you for the comment. The autoscan command doesn&#39;t seem to work, when the autoconf is installed from the msys2 repository. That&#39;s why I wanted to install autconf from scratch."}, {"owner": {"reputation": 1091, "user_id": 2474153, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/135319305ef65fd3ac0259fdbd7f4116?s=128&d=identicon&r=PG", "display_name": "Terry", "link": "https://stackoverflow.com/users/2474153/terry"}, "reply_to_user": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 0, "creation_date": 1548780438, "post_id": 54422713, "comment_id": 95661907, "body": "@Shawn I don&#39;t use pacman because it installs redundant software. But now I will try  it to see if it helps. I &#39;ll try it after the dinner time."}, {"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 0, "creation_date": 1548781731, "post_id": 54422713, "comment_id": 95662639, "body": "You <i>don&#39;t use</i> the package manager the whole setup is built around and intended to work with.... Ooookay. That goes a long ways towards explaining why you&#39;re having really weird issues."}], "answers": [{"tags": [], "owner": {"reputation": 5208, "user_id": 351154, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/21b6b9da626b128a26f839b8f96579da?s=128&d=identicon&r=PG", "display_name": "user8128167", "link": "https://stackoverflow.com/users/351154/user8128167"}, "is_accepted": false, "score": 1, "last_activity_date": 1576184149, "creation_date": 1576184149, "answer_id": 59312567, "question_id": 54422713, "link": "https://stackoverflow.com/questions/54422713/how-to-install-basic-modules-for-msys-perl/59312567#59312567", "title": "How to install basic modules for MSYS Perl?", "body": "<p>This is how I install your <code>perl</code> module in <code>msys2</code>:</p>\n\n<pre><code>$ pacman -S perl-Carp-Clan\n</code></pre>\n\n<p>Here is a full list of the <code>perl</code> packages available for <code>msys2</code>:  </p>\n\n<p><a href=\"https://packages.msys2.org/group/perl-modules\" rel=\"nofollow noreferrer\">https://packages.msys2.org/group/perl-modules</a></p>\n"}], "owner": {"reputation": 1091, "user_id": 2474153, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/135319305ef65fd3ac0259fdbd7f4116?s=128&d=identicon&r=PG", "display_name": "Terry", "link": "https://stackoverflow.com/users/2474153/terry"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1146, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1576184149, "creation_date": 1548770259, "question_id": 54422713, "link": "https://stackoverflow.com/questions/54422713/how-to-install-basic-modules-for-msys-perl", "title": "How to install basic modules for MSYS Perl?", "body": "<p>I need to use the <a href=\"http://repo.msys2.org/msys/x86_64\" rel=\"nofollow noreferrer\">MSYS Perl</a> to be able to install autoconf on my MSYS2 on Windows 7 because ActivePerl or Strawberry Perl don't work for the autoconf installation. The only problem is the default installation of MSYS Perl doesn't seem to include some basic modules such as <code>strict</code> or <code>Carp</code>. When I make autoconf it gives:</p>\n\n<blockquote>\n  <p>Can't locate Carp.pm in @INC (you may need to install the Carp module) (@INC contains: ../lib /usr/local/perl-5.22.1/lib/perl5/core_perl /usr/local/perl-5.22.1/lib/perl5/site_perl /usr/local/perl-5.22.1/lib/perl5/vendor_perl</p>\n</blockquote>\n\n<p>When I try to do a manual installation of <code>Carp</code>, during the <code>perl Makefile.PL</code> step I get:</p>\n\n<blockquote>\n  <p>Can't locate warnings.pm in @INC</p>\n</blockquote>\n\n<p>The problem is, in order to install the <code>warnings.pm</code> I need to have installed the basic set of modules such as <code>strict</code> but those modules don't seem to be present in the core modules directory <code>/usr/local/perl-5.22.1/lib/perl5/core_perl</code></p>\n\n<p>How can I install those basic modules for my MSYS Perl?</p>\n"}, {"tags": ["perl", "ssh", "escaping", "rsync", "non-ascii-characters"], "comments": [{"owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "edited": false, "score": 2, "creation_date": 1548769769, "post_id": 54422427, "comment_id": 95654873, "body": "Probably this bit from <code>perldoc -f quotemeta</code> applies to your case: &quot;In Perl v5.14, all non-ASCII characters are quoted in             non-UTF-8-encoded strings, but not quoted in UTF-8 strings.              Starting in Perl v5.16, Perl adopted a Unicode-defined strategy             for quoting non-ASCII characters; the quoting of ASCII             characters is unchanged. ...&quot;"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1548770234, "post_id": 54422427, "comment_id": 95655183, "body": "You&#39;re doing something wrong/deceptive if you claim your script contains a non-ASCII char (e.g. <code>&#230;</code>), but you don&#39;t use <code>use utf8;</code>."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1548770412, "post_id": 54422427, "comment_id": 95655299, "body": "It&#39;s unclear what you are asking. Are you asking if what you are doing is correct? To know that, we&#39;d need to know what consumes the output of your script. It seems to me that String::ShellQuote&#39;s <code>shell_quote</code> should be involved if composing a command to execute remotely."}, {"owner": {"reputation": 31, "user_id": 10325204, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4YDEm.jpg?s=128&g=1", "display_name": "Christian", "link": "https://stackoverflow.com/users/10325204/christian"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1548770840, "post_id": 54422427, "comment_id": 95655577, "body": "@ikegami I know my code is incorrect as its failing the rsync. Let me expand... I am receiving HTML encoded server paths, I need to use this supplied path in an rsync destination. Whats happening is my input path (e.g. $my_string_a) becomes $my_string_b in my rsync. Reading the comments I am assuming I need to do character encoding conversions to make it work?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1548773614, "post_id": 54422427, "comment_id": 95657477, "body": "No idea. Show your inputs precisely (e.g. using something <code>sprintf(&quot;%vX&quot;, $input)</code>), and as I mentioned above, identify how the outputs are used."}, {"owner": {"reputation": 333, "user_id": 4220763, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6AuCF.jpg?s=128&g=1", "display_name": "Hannibal", "link": "https://stackoverflow.com/users/4220763/hannibal"}, "edited": false, "score": 0, "creation_date": 1548786410, "post_id": 54422427, "comment_id": 95664892, "body": "@Christian : <i>Is there a better canned solution or will I need to Regex my way past this?</i> IMHO the answer is: NO. Not with quotemeta if you have to preserve some non ASCII chars. A simple regex escaping parens and whitespaces can be the best way, depending on the fantasy of your client."}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1548795615, "post_id": 54422427, "comment_id": 95669064, "body": "We need to know precisely how you are passing the paths to rsync. If you are passing it through the shell (such as a string form system, backticks, or within a ssh command), quotemeta is the wrong tool, you should be using String::ShellQuote."}], "answers": [{"tags": [], "owner": {"reputation": 9262, "user_id": 124951, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/c46d5911a8fb4ffd5fb8523d56a60de0?s=128&d=identicon&r=PG", "display_name": "salva", "link": "https://stackoverflow.com/users/124951/salva"}, "is_accepted": true, "score": 0, "last_activity_date": 1548885080, "last_edit_date": 1548885080, "creation_date": 1548870838, "answer_id": 54446679, "question_id": 54422427, "link": "https://stackoverflow.com/questions/54422427/escaping-bad-server-paths-for-rsync-via-ssh/54446679#54446679", "title": "Escaping bad server paths for RSYNC via SSH", "body": "<p>Perl builtins invoking external programs (i.e. <code>system</code>, <code>exec</code>, etc.) don't always handle encodings correctly.</p>\n\n<p>You can try using <a href=\"https://metacpan.org/pod/Net::OpenSSH\" rel=\"nofollow noreferrer\">Net::OpenSSH</a> which has native support for transferring files with <code>rsync</code> and can handle automatic <a href=\"https://metacpan.org/pod/Net::OpenSSH#Shell-quoting\" rel=\"nofollow noreferrer\">quoting</a> and <a href=\"https://metacpan.org/pod/Net::OpenSSH#Data-encoding\" rel=\"nofollow noreferrer\">encoding</a> of the <code>rsync</code> command line for you.</p>\n\n<pre><code>use Net::OpenSSH;\nuse utf8;\n\nmy $ssh = Net::OpenSSH-&gt;new(...,\n                            argument_encoding =&gt; 'utf8');\n\n$ssh-&gt;rsync_put(\"/data/stuff/folder K/ \\snappy/SLE.T.TET/Div (erse)/SLETTET/Disk kl\u00e6bere\",\n                $target_dir)\n    or die \"rsync_failed \" . $ssh-&gt;error;\n</code></pre>\n"}], "owner": {"reputation": 31, "user_id": 10325204, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4YDEm.jpg?s=128&g=1", "display_name": "Christian", "link": "https://stackoverflow.com/users/10325204/christian"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 122, "favorite_count": 0, "accepted_answer_id": 54446679, "answer_count": 1, "score": 0, "last_activity_date": 1548885080, "creation_date": 1548769282, "question_id": 54422427, "link": "https://stackoverflow.com/questions/54422427/escaping-bad-server-paths-for-rsync-via-ssh", "title": "Escaping bad server paths for RSYNC via SSH", "body": "<p>I have a client using the most ridiculous file/folder naming, and need to RSYNC their data to a NAS. My RSYNC logic is written in Perl, and quotemeta() worked well, until we had to deal with Danish characters.</p>\n\n<p>See example code: </p>\n\n<pre><code>#!/usr/bin/env perl\n$my_string_a = \"/data/stuff/folder K/ \\snappy/SLE.T.TET/Div (erse)/SLETTET/Disk kl\u00e6bere\";\n$my_string_b = quotemeta($my_string_a);\nprint \"\\n\".$my_string_a.\"\\n\".$my_string_b.\"\\n\";\nexit;\n</code></pre>\n\n<p>Outputs:</p>\n\n<pre><code>/data/stuff/folder K/ snappy/SLE.T.TET/Div (erse)/SLETTET/Disk kl\u00e6bere\n\\/data\\/stuff\\/folder\\ K\\/\\ snappy\\/SLE\\.T\\.TET\\/Div\\ \\(erse\\)\\/SLETTET\\/Disk\\ kl\\\ufffd\\\ufffdbere\n</code></pre>\n\n<p>Note: I have to use escape characters as ssh / rsync requires \"double escaping\" in Perl.</p>\n\n<p>Is there a better canned solution or will I need to Regex my way past this?</p>\n"}, {"tags": ["perl", "ssl", "soap", "soaplite"], "comments": [{"owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 1, "creation_date": 1548768059, "post_id": 54421962, "comment_id": 95653783, "body": "Have you checked that <a href=\"https://metacpan.org/pod/Mozilla::CA\" rel=\"nofollow noreferrer\">Mozilla::CA</a> is up-to-date on your machine? Have you verified that the certificate on the remote end is actually a valid certificate (for example by using a web browser to connect to the remote endpoint)?"}, {"owner": {"reputation": 673, "user_id": 545798, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/55274f3b3dc7fb6094c38c8aec8dd8a6?s=128&d=identicon&r=PG", "display_name": "MiroJanosik", "link": "https://stackoverflow.com/users/545798/mirojanosik"}, "reply_to_user": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 0, "creation_date": 1548769013, "post_id": 54421962, "comment_id": 95654375, "body": "Updated Mozilla::CA to latest 20180117 and result is the same. Please how to form web browser url to connect to remote endpoint? If I enter <a href=\"https://usr:pwd@website.com\" rel=\"nofollow noreferrer\">usr:pwd@website.com</a> into browser browser shows that certificate there is valid."}, {"owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 2, "creation_date": 1548769546, "post_id": 54421962, "comment_id": 95654710, "body": "I would check what Perl thinks about the certificate using the <a href=\"https://github.com/noxxi/p5-ssl-tools\" rel=\"nofollow noreferrer\">p5-ssl-tools</a>, especially <code>analyze-ssl.pl</code>."}, {"owner": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "edited": false, "score": 1, "creation_date": 1548795413, "post_id": 54421962, "comment_id": 95668990, "body": "Please run your script with <code>perl -MIO::Socket::SSL=debug4 yourscript.pl</code> so that it shows you the problems it faces with SSL in more detail. Add the output of it to your question."}, {"owner": {"reputation": 673, "user_id": 545798, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/55274f3b3dc7fb6094c38c8aec8dd8a6?s=128&d=identicon&r=PG", "display_name": "MiroJanosik", "link": "https://stackoverflow.com/users/545798/mirojanosik"}, "edited": false, "score": 0, "creation_date": 1548837002, "post_id": 54421962, "comment_id": 95681708, "body": "Thank you both, both approaches return the same error: SSL connect attempt failed error:1416F086:SSL routines:tls_process_server_certificate:certificate verify failed This points me to: <a href=\"https://stackoverflow.com/questions/49308744/telegram-bot-ssl-error-ssl-error-error1416f086ssl-routinestls-process-serve\" title=\"telegram bot ssl error ssl error error1416f086ssl routinestls process serve\">stackoverflow.com/questions/49308744/&hellip;</a> where I found that I too have &quot;Chain issues Incomplete&quot;. So we have to fix certificate on our server."}], "answers": [{"tags": [], "owner": {"reputation": 673, "user_id": 545798, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/55274f3b3dc7fb6094c38c8aec8dd8a6?s=128&d=identicon&r=PG", "display_name": "MiroJanosik", "link": "https://stackoverflow.com/users/545798/mirojanosik"}, "is_accepted": true, "score": 0, "last_activity_date": 1549009522, "creation_date": 1549009522, "answer_id": 54475545, "question_id": 54421962, "link": "https://stackoverflow.com/questions/54421962/soap-perl-and-ssl-certificate-changed/54475545#54475545", "title": "Soap perl and ssl certificate changed", "body": "<p>Here is solution mentioned in comments by <strong>Corion</strong> and <strong>Steffen Ullrich</strong>:</p>\n\n<p>Running either:</p>\n\n<ol>\n<li><a href=\"https://github.com/noxxi/p5-ssl-tools\" rel=\"nofollow noreferrer\">https://github.com/noxxi/p5-ssl-tools</a> script <strong>analyze-ssl.pl</strong> </li>\n<li>perl <strong>-MIO::Socket::SSL=debug4</strong> yourscript.pl</li>\n</ol>\n\n<p>displayed same error: <em>SSL connect attempt failed error:1416F086:SSL routines:tls_process_server_certificate:certificate verify failed</em>. This pointed me to: <a href=\"https://stackoverflow.com/questions/49308744/telegram-bot-ssl-error-ssl-error-error1416f086ssl-routinestls-process-serve\">telegram bot SSL error: SSL error {error:1416F086:SSL routines:tls_process_server_certificate:certificate verify failed}</a> where I found that I too have \"Chain issues Incomplete\". </p>\n\n<p>After fixing certificate the error is gone.</p>\n"}], "owner": {"reputation": 673, "user_id": 545798, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/55274f3b3dc7fb6094c38c8aec8dd8a6?s=128&d=identicon&r=PG", "display_name": "MiroJanosik", "link": "https://stackoverflow.com/users/545798/mirojanosik"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 174, "favorite_count": 0, "accepted_answer_id": 54475545, "answer_count": 1, "score": 1, "last_activity_date": 1549009522, "creation_date": 1548767784, "last_edit_date": 1548881361, "question_id": 54421962, "link": "https://stackoverflow.com/questions/54421962/soap-perl-and-ssl-certificate-changed", "title": "Soap perl and ssl certificate changed", "body": "<p>I have a perl code that sends SOAP request through <em>SOAP::Lite</em> like this:</p>\n\n<pre><code>eval \n{\n  $sresp = SOAP::Lite\n    -&gt;uri('http://machine/key')\n    -&gt;proxy('https://usr:pwd@website.com/addr/addr/remotescript.pl')\n    -&gt;remotescript_pl_function(@parms, $gmtime);\n};\nif ($@)\n{\n  print $@;\n}\n</code></pre>\n\n<p>After existing certificate for *.website.com has been replaced I am not getting valid responses anymore, I am getting </p>\n\n<pre><code>500 Can\\'t connect to website.com:443 at localscript.pl line 123.\n</code></pre>\n\n<p>If I enable</p>\n\n<pre><code>$ENV{PERL_LWP_SSL_VERIFY_HOSTNAME} = 0;\n</code></pre>\n\n<p>everything works. But I would like to verify the SSL hostname, how can I do that, or track down the problem? (I am a little lost in this proxying).</p>\n\n<p>I have c++ code with libcurl that goes along the same lines and works well. Entering <a href=\"https://website.com\" rel=\"nofollow noreferrer\">https://website.com</a> into browser works fine. Entering <a href=\"http://machine\" rel=\"nofollow noreferrer\">http://machine</a> (machine is on local network) works.</p>\n\n<p><strong>edit 1:</strong></p>\n\n<p>Both <strong>perl -MIO::Socket::SSL=debug4 yourscript.pl</strong> and <strong>analyze-ssl.pl from p5-ssl-tools</strong> show error message 1416F086 which lead me to information that SSL certificate has \"Chain issues\" that have to be fixed in certificate installation.</p>\n\n<p><strong>edit 2:</strong></p>\n\n<p>After fix of the certificate is the error gone! Perfect, solved!</p>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1548762096, "post_id": 54419928, "comment_id": 95650151, "body": "hmm... Windows&#39;s Explorer (&quot;My Computer&quot;) actually sorts those names in the order you want, so what is it that isn&#39;t sorting it correctly for you? If you mean Perl&#39;s <code>sort</code>, then it&#39;s simply a matter of using Sort::Key::Natural&#39;s <code>natsort</code> instead of the builtin <code>sort</code>."}], "answers": [{"comments": [{"owner": {"reputation": 7646, "user_id": 6867048, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b939fdb5809fed8097c38bdf4370747b?s=128&d=identicon&r=PG&f=1", "display_name": "stack0114106", "link": "https://stackoverflow.com/users/6867048/stack0114106"}, "edited": false, "score": 0, "creation_date": 1548789048, "post_id": 54420050, "comment_id": 95666263, "body": "the output is not sorted as the OP expected"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 7646, "user_id": 6867048, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b939fdb5809fed8097c38bdf4370747b?s=128&d=identicon&r=PG&f=1", "display_name": "stack0114106", "link": "https://stackoverflow.com/users/6867048/stack0114106"}, "edited": false, "score": 0, "creation_date": 1548792353, "post_id": 54420050, "comment_id": 95667709, "body": "@stack0114106: The OP asked to rename the files. He knows how to sort the results."}, {"owner": {"reputation": 93, "user_id": 5321658, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/31b99f01e4d0c95b35e0cb886ab7fe90?s=128&d=identicon&r=PG&f=1", "display_name": "notorious.dds", "link": "https://stackoverflow.com/users/5321658/notorious-dds"}, "edited": false, "score": 0, "creation_date": 1548807037, "post_id": 54420050, "comment_id": 95672687, "body": "Good call on the &quot;global&quot; operator.  However, what I failed to mention in my original post is that some of the &quot;names&quot; in my filenames also contain numeric characters.  If I process it globably, it makes the sorting work.  But, any other numeric characters get clobbered as well.  I&#39;ve updated the orignal post to reflect this previously unstated condition."}], "tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": true, "score": 4, "last_activity_date": 1548839184, "last_edit_date": 1548839184, "creation_date": 1548761322, "answer_id": 54420050, "question_id": 54419928, "link": "https://stackoverflow.com/questions/54419928/padding-second-occurance-of-numbers-in-hundreds-of-files/54420050#54420050", "title": "Padding SECOND OCCURANCE of numbers in hundreds of files", "body": "<p>You're missing <code>/g</code> on your substitution operator. Without it, the Perl just changes the first regex match in the string.</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\n\nwhile (&lt;DATA&gt;) {\n  s/\\d+/sprintf('%02d', $&amp;)/eg;\n  print;\n}\n\n__DATA__\n1 - 1 BillyBob.ext\n1 - 10 Jimmy.ext\n1 - 2 Stewy.ext\n10 - 1 Cletus.ext\n2 - 1 Homer.ext\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>01 - 01 BillyBob.ext\n01 - 10 Jimmy.ext\n01 - 02 Stewy.ext\n10 - 01 Cletus.ext\n02 - 01 Homer.ext\n</code></pre>\n\n<p><strong>Update:</strong> To deal with the new requirement that you've added to your question, we'd need to make the regex more explicit. In this fix, I'm looking for two sets of digits separated by a dash. I capture the two sets of digits (which puts them in <code>$1</code> and <code>$2</code>) and expand them in the righthand side of the substitution operator.</p>\n\n<p>The only line I needed to change was the one containing the substitution. It now looks like this:</p>\n\n<pre><code>s/(\\d+) - (\\d+)/sprintf('%02d - %02d', $1, $2)/e;\n</code></pre>\n\n<p>(And, as we're only making a single substitution here, we can lose the <code>/g</code> option.)</p>\n"}, {"tags": [], "owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "is_accepted": false, "score": 2, "last_activity_date": 1548763798, "last_edit_date": 1548763798, "creation_date": 1548763330, "answer_id": 54420626, "question_id": 54419928, "link": "https://stackoverflow.com/questions/54419928/padding-second-occurance-of-numbers-in-hundreds-of-files/54420626#54420626", "title": "Padding SECOND OCCURANCE of numbers in hundreds of files", "body": "<p>For completeness: this can also be solved directly on the (UNIX) shell with the <code>sort</code> from GNU coreutils:</p>\n\n<pre class=\"lang-sh prettyprint-override\"><code>$ cat dummy.txt\n1 - 1 BillyBob.ext\n1 - 10 Jimmy.ext\n1 - 2 Stewy.ext\n10 - 1 Cletus.ext\n2 - 1 Homer.ext\n\n$ sort --field-separator=- -k 1n -k 2n &lt;dummy.txt\n1 - 1 BillyBob.ext\n1 - 2 Stewy.ext\n1 - 10 Jimmy.ext\n2 - 1 Homer.ext\n10 - 1 Cletus.ext\n</code></pre>\n\n<p>i.e.</p>\n\n<ul>\n<li>use <code>-</code> as field separator,</li>\n<li>sort by first field numerically, and</li>\n<li>sort by second field numerically</li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 7646, "user_id": 6867048, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b939fdb5809fed8097c38bdf4370747b?s=128&d=identicon&r=PG&f=1", "display_name": "stack0114106", "link": "https://stackoverflow.com/users/6867048/stack0114106"}, "is_accepted": false, "score": 0, "last_activity_date": 1548789458, "creation_date": 1548789458, "answer_id": 54428204, "question_id": 54419928, "link": "https://stackoverflow.com/questions/54419928/padding-second-occurance-of-numbers-in-hundreds-of-files/54428204#54428204", "title": "Padding SECOND OCCURANCE of numbers in hundreds of files", "body": "<p>Try this Perl one-liner</p>\n\n<pre><code>perl -lne ' s/(\\d+)\\s-\\s(\\d+)\\s+(\\S+)/sprintf(\"%02d-%02d %s\",$1,$2,$3)/ge; $kv{$_}=1 ; END { print join(\"\\n\",sort keys %kv) } '\n</code></pre>\n\n<p>with inputs</p>\n\n<pre><code>$ cat notorious.txt\n1 - 1 BillyBob.ext\n1 - 10 Jimmy.ext\n1 - 2 Stewy.ext\n10 - 1 Cletus.ext\n2 - 1 Homer.ext\n\n$ perl -lne ' s/(\\d+)\\s-\\s(\\d+)\\s+(\\S+)/sprintf(\"%02d-%02d %s\",$1,$2,$3)/ge; $kv{$_}=1 ; END { print join(\"\\n\",sort keys %kv) } ' notorious.txt\n01-01 BillyBob.ext\n01-02 Stewy.ext\n01-10 Jimmy.ext\n02-01 Homer.ext\n10-01 Cletus.ext\n\n$\n</code></pre>\n"}], "owner": {"reputation": 93, "user_id": 5321658, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/31b99f01e4d0c95b35e0cb886ab7fe90?s=128&d=identicon&r=PG&f=1", "display_name": "notorious.dds", "link": "https://stackoverflow.com/users/5321658/notorious-dds"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 64, "favorite_count": 0, "accepted_answer_id": 54420050, "answer_count": 3, "score": 1, "last_activity_date": 1548839184, "creation_date": 1548760878, "last_edit_date": 1548806916, "question_id": 54419928, "link": "https://stackoverflow.com/questions/54419928/padding-second-occurance-of-numbers-in-hundreds-of-files", "title": "Padding SECOND OCCURANCE of numbers in hundreds of files", "body": "<p>I've got hundreds files that are named with the following scheme:</p>\n\n<p>XX - YY Title.ext</p>\n\n<p>However, they don't always sort properly because XX and YY can be 1 or 2 digit numbers. I would like to rename the files such that XX and YY are always 2 digits by adding a leading zero if necessary.</p>\n\n<p>For example, I'm currently getting sorting that looks like this:</p>\n\n<pre><code>1 - 1 BillyBob.ext   \n1 - 10 Jimmy2.ext  \n1 - 2 Stewy3.ext  \n10 - 1 Cletus.ext     \n2 - 1 Homer.ext\n</code></pre>\n\n<p>What I want is this:</p>\n\n<pre><code>01 - 01 BillyBob.ext\n01 - 02 Stewy3.ext\n01 - 10 Jimmy2.ext\n02 - 01 Homer.ext\n10 - 01 Cletus.ext\n</code></pre>\n\n<p>I've successfully changed the XX part using the code:</p>\n\n<pre><code>rename -n 's/\\d+/sprintf(\"%02d\", $&amp;)/e' *\n</code></pre>\n\n<p>However, I cannot seem to figure out how to property execute something that will act on the YY part.</p>\n\n<p>****Appended to orignial post****</p>\n\n<p>More specifically, I don't know how to act on the YY part without also acting on any numeric charters that appear later in the filename.</p>\n\n<p>****End appended content****</p>\n\n<p>Any help is appreciated.</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["regex", "perl", "replace"], "comments": [{"owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 0, "creation_date": 1548754890, "post_id": 54417951, "comment_id": 95645651, "body": "Have you looked at the &quot;word boundary&quot; <code>\\b</code> zero-width assertion in <a href=\"http://perldoc.perl.org/perlre.html\" rel=\"nofollow noreferrer\">perlre</a> ? It does just what you need. If you show the relevant code (+ test data) you have as an <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>, you are more likely to get good answers."}, {"owner": {"reputation": 106, "user_id": 4997534, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/593a268ebc9d21935c2b136280eb85ff?s=128&d=identicon&r=PG&f=1", "display_name": "kanishka", "link": "https://stackoverflow.com/users/4997534/kanishka"}, "reply_to_user": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 0, "creation_date": 1548755129, "post_id": 54417951, "comment_id": 95645792, "body": "Try running : perl -n -e &#39;s/[&#91;,&#40;]?ER[&#41;,&#93;]?/GD/g&amp;&amp;print&#39; on your command prompt and provide &#39;GDPER   checks ER&#39; as input . you will get &#39;GDPGD   checks GD&#39; as output. Where as I expect it to be &#39;GDPER   checks GD&#39;"}, {"owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 2, "creation_date": 1548755160, "post_id": 54417951, "comment_id": 95645815, "body": "Please <a href=\"https://stackoverflow.com/posts/54417951/edit\">edit</a> your post and add the relevant code and data and explanation there, instead of posting this in the comments."}, {"owner": {"reputation": 106, "user_id": 4997534, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/593a268ebc9d21935c2b136280eb85ff?s=128&d=identicon&r=PG&f=1", "display_name": "kanishka", "link": "https://stackoverflow.com/users/4997534/kanishka"}, "reply_to_user": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 0, "creation_date": 1548755435, "post_id": 54417951, "comment_id": 95646000, "body": "Does that work for you?"}, {"owner": {"reputation": 137100, "user_id": 874188, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/ZcY77.png?s=128&g=1", "display_name": "tripleee", "link": "https://stackoverflow.com/users/874188/tripleee"}, "edited": false, "score": 0, "creation_date": 1548755762, "post_id": 54417951, "comment_id": 95646204, "body": "The question marks say &quot;this could be here or not here&quot;. It&#39;s generally not useful to put in a boundary condition which is optional because then you are permitting no boundary."}], "answers": [{"comments": [{"owner": {"reputation": 106, "user_id": 4997534, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/593a268ebc9d21935c2b136280eb85ff?s=128&d=identicon&r=PG&f=1", "display_name": "kanishka", "link": "https://stackoverflow.com/users/4997534/kanishka"}, "edited": false, "score": 0, "creation_date": 1548759232, "post_id": 54418291, "comment_id": 95648434, "body": "This just works fine !  but a case is there &#39;ThisTestCaseDoesNotReplaceER&#39; string should replace and result should be &#39;ThisTestCaseDoesNotReplaceGD&#39;"}, {"owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "reply_to_user": {"reputation": 106, "user_id": 4997534, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/593a268ebc9d21935c2b136280eb85ff?s=128&d=identicon&r=PG&f=1", "display_name": "kanishka", "link": "https://stackoverflow.com/users/4997534/kanishka"}, "edited": false, "score": 1, "creation_date": 1548761319, "post_id": 54418291, "comment_id": 95649683, "body": "That will be difficult, because you do not want to replace it in <code>GPDER checks ER</code>, i.e. the simple approach <code>s&#47;\\b?ER\\b&#47;GD&#47;g</code> won&#39;t work. So what is the differentiating factor between <code>GPDER </code> and <code>ThisTestCaseDoesNotReplaceER </code>?"}, {"owner": {"reputation": 106, "user_id": 4997534, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/593a268ebc9d21935c2b136280eb85ff?s=128&d=identicon&r=PG&f=1", "display_name": "kanishka", "link": "https://stackoverflow.com/users/4997534/kanishka"}, "edited": false, "score": 0, "creation_date": 1548793013, "post_id": 54418291, "comment_id": 95668000, "body": "Camel case is the only thing that i get in such type of strings"}, {"owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "reply_to_user": {"reputation": 106, "user_id": 4997534, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/593a268ebc9d21935c2b136280eb85ff?s=128&d=identicon&r=PG&f=1", "display_name": "kanishka", "link": "https://stackoverflow.com/users/4997534/kanishka"}, "edited": false, "score": 0, "creation_date": 1548829563, "post_id": 54418291, "comment_id": 95678276, "body": "Updated to handle the camel case mentioned by OP."}], "tags": [], "owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "is_accepted": true, "score": 2, "last_activity_date": 1548829511, "last_edit_date": 1548829511, "creation_date": 1548755703, "answer_id": 54418291, "question_id": 54417951, "link": "https://stackoverflow.com/questions/54417951/replacing-in-perl/54418291#54418291", "title": "Replacing in Perl", "body": "<p>Does this work for you?</p>\n\n<p><strong>NOTE:</strong> <code>\\K</code> requires Perl >= 5.10.0.</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>$ perl -pe 's/(?:\\b|[[:upper:]]*[[:lower:]]+\\w*\\K)ER\\b/GD/g'\n</code></pre>\n\n<p>Input (copy &amp; paste)</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>TERMS of use    [ER]\nSERVICE manager ER Data\nStack OVERFLOW  (ER) check\nERPS Value         ER\nGDPER   checks ER\nThisTestCaseDoesNotReplaceER\n</code></pre>\n\n<p>Output</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>TERMS of use    [GD]\nSERVICE manager GD Data\nStack OVERFLOW  (GD) check\nERPS Value         GD\nGDPER   checks GD\nThisTestCaseDoesNotReplaceGD\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 7646, "user_id": 6867048, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b939fdb5809fed8097c38bdf4370747b?s=128&d=identicon&r=PG&f=1", "display_name": "stack0114106", "link": "https://stackoverflow.com/users/6867048/stack0114106"}, "is_accepted": false, "score": 0, "last_activity_date": 1548790018, "creation_date": 1548790018, "answer_id": 54428345, "question_id": 54417951, "link": "https://stackoverflow.com/questions/54417951/replacing-in-perl/54428345#54428345", "title": "Replacing in Perl", "body": "<p>Another Perl using positive lookbehind</p>\n\n<pre><code>$ perl -pe 's/(?&lt;=\\[|\\s|\\()ER/GD/g' kanishka.txt\nTERMS of use    [GD]\nSERVICE manager GD Data\nStack OVERFLOW  (GD) check\nERPS Value         GD\nGDPER   checks GD\n\n$\n</code></pre>\n\n<p>with one more edge case as mentioned by OP in the comments</p>\n\n<pre><code>$ perl -pe 's/(?&lt;=\\[|\\s|\\(|[a-z])ER/GD/g' kanishka.txt2\nTERMS of use    [GD]\nSERVICE manager GD Data\nStack OVERFLOW  (GD) check\nERPS Value         GD\nGDPER   checks GD\nThisTestCaseDoesNotReplaceGD\n\n\n$ cat kanishka.txt2\nTERMS of use    [ER]\nSERVICE manager ER Data\nStack OVERFLOW  (ER) check\nERPS Value         ER\nGDPER   checks ER\nThisTestCaseDoesNotReplaceER\n\n\n$\n</code></pre>\n"}], "owner": {"reputation": 106, "user_id": 4997534, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/593a268ebc9d21935c2b136280eb85ff?s=128&d=identicon&r=PG&f=1", "display_name": "kanishka", "link": "https://stackoverflow.com/users/4997534/kanishka"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 77, "favorite_count": 0, "accepted_answer_id": 54418291, "answer_count": 2, "score": 0, "last_activity_date": 1548829511, "creation_date": 1548754765, "last_edit_date": 1548756726, "question_id": 54417951, "link": "https://stackoverflow.com/questions/54417951/replacing-in-perl", "title": "Replacing in Perl", "body": "<p>So i have a scenario where i have strings like:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>TERMS of use    [ER]\nSERVICE manager ER Data\nStack OVERFLOW  (ER) check\nERPS Value         ER\nGDPER   checks ER\n</code></pre>\n\n<p>These are the strings where you can see space , multi space or tab between the strings.\ni want to replace 'ER' with 'GD'.</p>\n\n<p>So i used on command prompt: </p>\n\n<pre><code>perl -n -e 's/[[,(]?ER[),]]?/GD/g&amp;&amp;print';\n</code></pre>\n\n<p>Input: <code>GDPER checks ER</code></p>\n\n<p>Output: <code>GDPGD checks GD</code></p>\n\n<p>Required: <code>GDPER checks GD'</code></p>\n"}, {"tags": ["macos", "perl", "unix", "awk", "sed"], "comments": [{"owner": {"reputation": 4739, "user_id": 5403468, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZJ8BE.jpg?s=128&g=1", "display_name": "Tiw", "link": "https://stackoverflow.com/users/5403468/tiw"}, "edited": false, "score": 1, "creation_date": 1548731374, "post_id": 54413269, "comment_id": 95637118, "body": "It&#39;s better to show what you have tried and the results of them first."}, {"owner": {"reputation": 95936, "user_id": 5866580, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/1de2cd722d865edac1575102a48ecc0a?s=128&d=identicon&r=PG&f=1", "display_name": "RavinderSingh13", "link": "https://stackoverflow.com/users/5866580/ravindersingh13"}, "edited": false, "score": 0, "creation_date": 1548732956, "post_id": 54413269, "comment_id": 95637442, "body": "Welcome to SO @Stanley, it is always advisable to add 3 simple things in your posts. 1- sample of input, 2-sample of output and 3rd- your attempts in code tags <code>{}</code> symbol. We ask efforts of people to be added in their questions, as we all are here to learn."}], "answers": [{"tags": [], "owner": {"reputation": 95936, "user_id": 5866580, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/1de2cd722d865edac1575102a48ecc0a?s=128&d=identicon&r=PG&f=1", "display_name": "RavinderSingh13", "link": "https://stackoverflow.com/users/5866580/ravindersingh13"}, "is_accepted": false, "score": 0, "last_activity_date": 1548734951, "last_edit_date": 1548734951, "creation_date": 1548733100, "answer_id": 54413489, "question_id": 54413269, "link": "https://stackoverflow.com/questions/54413269/unix-help-moving-lines-2-and-3-to-the-middle-of-line-1/54413489#54413489", "title": "Unix help moving lines 2 and 3 to the middle of line 1", "body": "<p>Could you please try following(As it is advisable to add your efforts in your post so kindly do so in your post).</p>\n\n<pre><code>awk '\n/^[0-9]+\\/[0-9]+/{\n  if(value){\n     print value,val\n     value=val=\"\"\n  }\n  found=1\n  val=$NF\n  sub(/.*/,\"\",$NF)\n  value=$0\n  next\n}\n  found{\n      value=(value?value OFS:\"\")$0\n  }\n/^[0-9]*$/{\n  found=\"\"\n}\nEND{\n  if(value){\n      print value,val\n  }\n}'  Input_file\n</code></pre>\n\n<p>Output will be as follows.</p>\n\n<pre><code>05/04 DEBIT CARD PURCHASE, AUT 055329 VISA DDA PUR  ESTABLISHMENT 941 00009415 MAYS LNDG * MN 4885434317495585 30.64\n05/07 DEBIT CARD PURCHASE, AUT 055329 VISA DDA PUR  ESTABLISHMENT 555 5551212 * TX 4885434317495585 181.24\n05/07 DEBIT CARD PURCHASE, AUT 050418 VISA DDA PUR  ESTABLISHMENT * IL 4885434317495585 42.50\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 4739, "user_id": 5403468, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZJ8BE.jpg?s=128&g=1", "display_name": "Tiw", "link": "https://stackoverflow.com/users/5403468/tiw"}, "is_accepted": false, "score": 0, "last_activity_date": 1548737089, "last_edit_date": 1548737089, "creation_date": 1548734530, "answer_id": 54413657, "question_id": 54413269, "link": "https://stackoverflow.com/questions/54413269/unix-help-moving-lines-2-and-3-to-the-middle-of-line-1/54413657#54413657", "title": "Unix help moving lines 2 and 3 to the middle of line 1", "body": "<p>Given your sample data and result, a <code>harcode</code> way can be:</p>\n\n<pre><code>awk -F\"\\t\" 'FNR%3==1{left=$1 \"\\t\" $2; right=$3}FNR%3!=1{left=left \" \" $1}FNR%3==0{print left \"\\t\" right;}'\n</code></pre>\n\n<p>Another way (GNU awk):</p>\n\n<pre><code>awk 'BEGIN{FS=OFS=\"\\t\"}FNR%3==1{tvar=$NF;NF--;printf $0 \" \"}FNR%3==2{printf $0 \" \"}FNR%3==0{print $0,tvar}'\n</code></pre>\n\n<p>It's also strictly 3 lines a round.</p>\n\n<p>If you have <code>ruby</code> on you system:</p>\n\n<pre><code>ruby -aF\"\\t\" -ne 'case $.%3;when 1; tvar=$F[-1];gsub(/\\t[^\\t]*$/,\" \");print $_; when 2; print $_.chomp + \" \";else; puts $_.chomp + \"\\t\" + tvar;end'\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 7646, "user_id": 6867048, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b939fdb5809fed8097c38bdf4370747b?s=128&d=identicon&r=PG&f=1", "display_name": "stack0114106", "link": "https://stackoverflow.com/users/6867048/stack0114106"}, "is_accepted": false, "score": 1, "last_activity_date": 1548796235, "last_edit_date": 1548796235, "creation_date": 1548737589, "answer_id": 54414049, "question_id": 54413269, "link": "https://stackoverflow.com/questions/54413269/unix-help-moving-lines-2-and-3-to-the-middle-of-line-1/54414049#54414049", "title": "Unix help moving lines 2 and 3 to the middle of line 1", "body": "<p>Using Perl,</p>\n\n<pre><code>$ cat stanley.txt\n05/04   DEBIT CARD PURCHASE, AUT 055329 VISA DDA PUR    30.64\nESTABLISHMENT 941 00009415 MAYS LNDG * MN\n4885434317495585\n05/07   DEBIT CARD PURCHASE, AUT 055329 VISA DDA PUR    181.24\nESTABLISHMENT 555 5551212 * TX\n4885434317495585\n05/07   DEBIT CARD PURCHASE, AUT 050418 VISA DDA PUR    42.50\nESTABLISHMENT * IL\n4885434317495585\n\n$ perl -0777 -ne ' while( /^(\\d+.+?)\\n(.+?)\\n(.+?)\\n/msg ) { $x=$1;$a=$2;$c=$3;$y=$x;$y=~s/.*\\s([\\d\\.]+)$/\\1/g; $x=~s/$y$//g; print \"$x $a $c $y\\n\" } ' stanley.txt\n05/04   DEBIT CARD PURCHASE, AUT 055329 VISA DDA PUR     ESTABLISHMENT 941 00009415 MAYS LNDG * MN 4885434317495585 30.64\n05/07   DEBIT CARD PURCHASE, AUT 055329 VISA DDA PUR     ESTABLISHMENT 555 5551212 * TX 4885434317495585 181.24\n05/07   DEBIT CARD PURCHASE, AUT 050418 VISA DDA PUR     ESTABLISHMENT * IL 4885434317495585 42.50\n\n$\n</code></pre>\n\n<p>or </p>\n\n<pre><code>$ perl -0777 -ne ' while( /^(\\d+.+?)\\n(.+?)\\n(.+?)\\n/msg ) { $x=$1;$a=\"$2 $3\";$y=$x;$y=~s/.*\\s+([\\d\\.]+)$/\\1/g; $x=~s/$y$//g; print \"$x $a $y\\n\" } ' stanley.txt\n05/04   DEBIT CARD PURCHASE, AUT 055329 VISA DDA PUR     ESTABLISHMENT 941 00009415 MAYS LNDG * MN 4885434317495585 30.64\n05/07   DEBIT CARD PURCHASE, AUT 055329 VISA DDA PUR     ESTABLISHMENT 555 5551212 * TX 4885434317495585 181.24\n05/07   DEBIT CARD PURCHASE, AUT 050418 VISA DDA PUR     ESTABLISHMENT * IL 4885434317495585 42.50\n\n$\n</code></pre>\n\n<p>or</p>\n\n<pre><code>$ perl -0777 -ne ' while( /^(\\d+.+?)\\n(.+?)\\n(.+?)\\n/msg ) { $x=$1;$a=\"$2 $3\";@z=$x=~/\\s+(\\S+)$/g; $x=~s/$z[0]$//g; print \"$x $a $z[0]\\n\" } ' stanley.txt\n05/04   DEBIT CARD PURCHASE, AUT 055329 VISA DDA PUR     ESTABLISHMENT 941 00009415 MAYS LNDG * MN 4885434317495585 30.64\n05/07   DEBIT CARD PURCHASE, AUT 055329 VISA DDA PUR     ESTABLISHMENT 555 5551212 * TX 4885434317495585 181.24\n05/07   DEBIT CARD PURCHASE, AUT 050418 VISA DDA PUR     ESTABLISHMENT * IL 4885434317495585 42.50\n\n$\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 46858, "user_id": 967492, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/526ea226101e199d029049dda22a4e58?s=128&d=identicon&r=PG", "display_name": "potong", "link": "https://stackoverflow.com/users/967492/potong"}, "is_accepted": false, "score": 0, "last_activity_date": 1548769792, "creation_date": 1548769792, "answer_id": 54422574, "question_id": 54413269, "link": "https://stackoverflow.com/questions/54413269/unix-help-moving-lines-2-and-3-to-the-middle-of-line-1/54422574#54422574", "title": "Unix help moving lines 2 and 3 to the middle of line 1", "body": "<p>This might work for you (GNU sed):</p>\n\n<pre><code>sed -E 'N;N;s/^(.*\\S)(\\s+\\S+)\\n(.*)\\n(.*)/\\1 \\3 \\4\\2/' file\n</code></pre>\n\n<p>Append the next two lines to the current line and using pattern matching combine groups of string into the required format.</p>\n"}], "owner": {"reputation": 9, "user_id": 10982196, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ef7c5ae612aff1f506a8260dacb11f07?s=128&d=identicon&r=PG&f=1", "display_name": "Stanley", "link": "https://stackoverflow.com/users/10982196/stanley"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 116, "favorite_count": 1, "answer_count": 4, "score": 0, "last_activity_date": 1548796235, "creation_date": 1548731164, "question_id": 54413269, "link": "https://stackoverflow.com/questions/54413269/unix-help-moving-lines-2-and-3-to-the-middle-of-line-1", "title": "Unix help moving lines 2 and 3 to the middle of line 1", "body": "<p>I'm trying to concatenate every 2nd and 3rd lines into the middle of line 1; before the last tab character in line 1 specifically.  </p>\n\n<p>Here is a sample of the data that i have as outputted by a terrible banking system. Every first line starts with a date in MM/DD format followed by a tab character and ends with a dollar amount preceded by a tab character. </p>\n\n<pre><code>05/04   DEBIT CARD PURCHASE, AUT 055329 VISA DDA PUR    30.64\nESTABLISHMENT 941 00009415 MAYS LNDG * MN\n4885434317495585\n05/07   DEBIT CARD PURCHASE, AUT 055329 VISA DDA PUR    181.24\nESTABLISHMENT 555 5551212 * TX\n4885434317495585\n05/07   DEBIT CARD PURCHASE, AUT 050418 VISA DDA PUR    42.50\nESTABLISHMENT * IL\n4885434317495585\n</code></pre>\n\n<p>As you can see, I'm trying to concatenate lines 2 and 3 and put them before the last tab character in line 1. So basically, </p>\n\n<pre><code>05/04   DEBIT CARD PURCHASE, AUT 055329 VISA DDA PUR  ESTABLISHMENT 941 00009415 MAYS LNDG * MN 4885434317495585    30.64\n05/07   DEBIT CARD PURCHASE, AUT 055329 VISA DDA PUR ESTABLISHMENT 555 5551212 * TX 4885434317495585    181.24 \n05/07   DEBIT CARD PURCHASE, AUT 050418 VISA DDA PUR ESTABLISHMENT * IL 4885434317495585    42.50\n</code></pre>\n\n<p>Hopefully this made sense. I've looked through a ton of posts here, and while they were all useful, most of them were about merging 2 lines together, or printing them into a file etc, but not sticking lines into the middle of another line. Thanks in advance for any help. </p>\n"}, {"tags": ["perl", "encryption", "openssl", "rsa"], "comments": [{"owner": {"reputation": 11, "user_id": 10981613, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mSF4c.jpg?s=128&g=1", "display_name": "Basildave", "link": "https://stackoverflow.com/users/10981613/basildave"}, "edited": false, "score": 0, "creation_date": 1549223269, "post_id": 54411491, "comment_id": 95817446, "body": "This issue was resolved, turns out using a qq~~ quote for the private/public keys was the culprit.  If I read the keys from the &quot;.pem&quot; file they are loaded fine."}], "owner": {"reputation": 11, "user_id": 10981613, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mSF4c.jpg?s=128&g=1", "display_name": "Basildave", "link": "https://stackoverflow.com/users/10981613/basildave"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 289, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1548719683, "creation_date": 1548716165, "last_edit_date": 1548719683, "question_id": 54411491, "link": "https://stackoverflow.com/questions/54411491/perl-cryptopensslrsa-new-public-key-error-unrecognized-key-format", "title": "Perl - Crypt::OpenSSL::RSA-&gt;new_public_key &quot;Error : unrecognized key format&quot;", "body": "<p>I'm trying to generate a token for an Http request call based on a private key generated using OpenSSL RSA (2048) and then a public key, which is generated by the group that has the API we're calling.  One side of the token string is encrypted using the public key the other with the private key.  The private key encryption works with the code below but calling the <code>Crypt::OpenSSL::RSA-&gt;new_public_key(public key string)</code> fails with the \"Error : unrecognized key format\" issue.  I'm not sure what's wrong with the key but given that the other one works (and was supposedly generated using same OpenSSL unix tool) it seems odd.</p>\n\n<p>Any help would be greatly appreciated.</p>\n\n<p>Thanks,\nDave</p>\n\n<pre><code>use strict;\n\nuse Time::HiRes qw( gettimeofday );\nuse Crypt::OpenSSL::RSA;\nuse Crypt::OpenSSL::X509;\nuse Crypt::OpenSSL::Random;\nuse MIME::Base64;\nuse DateTime;\n\n\nmy $sysTime=undef;\nmy $sTime=undef;\nmy $sAPIToken;\n\nmy $EDMPrivateKey=qq~\n-----BEGIN PRIVATE KEY-----\n&lt;private key base 64&gt;\n-----END PRIVATE KEY-----\n~;\n\nmy $DMPublicKey=qq~\n-----BEGIN PUBLIC KEY-----\nMIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAsftmdt4aAZ7B1F7wVjIz0RSO6w1bIX/4\n&lt;rest of public key&gt;\n-----END PUBLIC KEY-----\n~;\n\nsub setTime() {\n    my $ms;\n    my $ms2;\n    my $microSec;\n    my $tz;\n    ($sysTime,$microSec) = gettimeofday();\n#    $sysTime=gettimeofday();\n    $ms=sprintf(\"%.*s\",3,$microSec);\n    $ms2=$microSec-($ms*1000);\n    my ($sec,$min,$hour,$mday,$mon,$year,$wday,$yday,$isdst)=localtime($sysTime);\n\n    $sTime=sprintf(\"%04d-%02d-%02dT%02d:%02d:%02d.%03d-%04d\",\n                                   $year+1900,$mon+1,$mday,$hour,$min,$sec,$ms,$tz);\n    $sysTime=$sysTime*1000+$ms;\n}\n\nsub setTimeNew() {\n    my $ms;\n    my $ms2;\n    my $microSec;\n    ($sysTime,$microSec) = gettimeofday();\n    my ($sec,$min,$hour,$mday,$mon,$year,$wday,$yday,$isdst)=localtime($sysTime);\n    $ms=sprintf(\"%.*s\",3,$microSec);\n    $ms2=$microSec-($ms*1000);\n\n    my $dt=DateTime-&gt;new(\n      year       =&gt; $year+1900,\n      month      =&gt; $mon+1,\n      day        =&gt; $yday,\n      hour       =&gt; $hour,\n      minute     =&gt; $min,\n      second     =&gt; $sec,\n      nanosecond =&gt; $microSec*1000\n    );\n    $sysTime=$sysTime*1000+$ms;\n    $sTime=$dt-&gt;strftime(\"%C%y-%m-%dT%H:%M:%S.%3N%z\");\n}\n\n\nsub main() {\n    my $sTokenPt1;\n    my $sTokenPt2;\n    my $sPubStr;\n\n    my $rsaPublic  = Crypt::OpenSSL::RSA-&gt;new_public_key($DMPublicKey);\n    $rsaPublic-&gt;use_sha1_hash();\n\n    setTimeNew();\n\n    $sTokenPt1 = encode_base64($rsaPrivate-&gt;encrypt($sysTime));\n    $sTokenPt2 = encode_base64($rsaPublic-&gt;encrypt($sTime));\n\n    printf \"%d\\n%s\\n\",$sysTime,$sTime;\n    $sAPIToken = sprintf(\"%s,%s\",$sTokenPt1,$sTokenPt2);\n    printf \"%d\\n%s\\nTTOKEN=%s\\n\",$sysTime,$sTime,$sAPIToken;\n\n\n}\neval {\n    main();\n};\n\nif ($@) {\n    printf \"Error : %s\\n\",$@;\n}\n</code></pre>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "edited": false, "score": 0, "creation_date": 1548717573, "post_id": 54410957, "comment_id": 95634267, "body": "Any chance you could provide a more detailed explanation on what you&#39;re trying to do or expect as output? I&#39;m almost positive my <a href=\"https://metacpan.org/pod/Devel::Examine::Subs\" rel=\"nofollow noreferrer\">Devel::Examine::Subs</a> can do what you require, but it&#39;s been a while, and I&#39;d need further clarification for testing (I use <a href=\"https://metacpan.org/pod/PPI\" rel=\"nofollow noreferrer\">PPI</a> in the background)."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1548722334, "post_id": 54410957, "comment_id": 95635287, "body": "You are assuming that there <i>is</i> a (single, unique) module name. That&#39;s not necessarily the case. What do you want to do if there are 0 or 2+ names?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1548747380, "post_id": 54410957, "comment_id": 95641871, "body": "Change your script so it takes two inputs: The base dir (<code>&#47;some_path</code>) and a package name (<code>Foo::Bar::Baz</code>, or maybe even <code>Foo::Bar::*</code>)"}, {"owner": {"reputation": 1445, "user_id": 1441592, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/2a58917def8d1523a840b52ae7d59d21?s=128&d=identicon&r=PG", "display_name": "Paul Serikov", "link": "https://stackoverflow.com/users/1441592/paul-serikov"}, "edited": false, "score": 0, "creation_date": 1550046999, "post_id": 54410957, "comment_id": 96121750, "body": "Thanks all for answers, finally I used <a href=\"https://metacpan.org/pod/Module::Metadata\" rel=\"nofollow noreferrer\">Module::Metadata</a> for my <a href=\"https://metacpan.org/release/App-iperlmoddir\" rel=\"nofollow noreferrer\">project</a>."}], "answers": [{"tags": [], "owner": {"reputation": 19969, "user_id": 23512, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/tUj1I.png?s=128&g=1", "display_name": "Tanktalus", "link": "https://stackoverflow.com/users/23512/tanktalus"}, "is_accepted": false, "score": 2, "last_activity_date": 1548713308, "creation_date": 1548713308, "answer_id": 54411006, "question_id": 54410957, "link": "https://stackoverflow.com/questions/54410957/how-to-get-module-name-by-file-name/54411006#54411006", "title": "How to get module name by file name?", "body": "<p>I've used <a href=\"https://metacpan.org/pod/PPI\" rel=\"nofollow noreferrer\">PPI</a> for analysing (and rewriting) perl code. As I recall, a bit of a learning curve, but it worked fairly well. In your case, you really only need to find the <code>package &lt;...&gt;</code> statement from within the file. Anything more complex than that, such as someone using <a href=\"https://metacpan.org/pod/autopackage\" rel=\"nofollow noreferrer\">autopackage</a>, and PPI probably wouldn't be able to help, either.</p>\n"}, {"tags": [], "owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "is_accepted": true, "score": 4, "last_activity_date": 1548714524, "last_edit_date": 1548714524, "creation_date": 1548713749, "answer_id": 54411075, "question_id": 54410957, "link": "https://stackoverflow.com/questions/54410957/how-to-get-module-name-by-file-name/54411075#54411075", "title": "How to get module name by file name?", "body": "<p>There's no requirement for package names to match the filename it was loaded from to begin with, or <a href=\"https://metacpan.org/source/JPEACOCK/version-0.9924/vperl/vpp.pm\" rel=\"nofollow noreferrer\">for the first package to</a>. But for any sanely-written module that you can <code>use</code> normally and even some weird ones, <a href=\"https://perldoc.pl/Module::Metadata\" rel=\"nofollow noreferrer\">Module::Metadata</a> can find this information. As a general rule, you should work with absolute filenames regardless of your current directory, which may help. (<a href=\"https://perldoc.pl/File::Spec\" rel=\"nofollow noreferrer\">File::Spec</a> and <a href=\"https://metacpan.org/pod/Path::Tiny\" rel=\"nofollow noreferrer\">Path::Tiny</a> can help there)</p>\n\n<pre><code>use strict;\nuse warnings;\nuse Module::Metadata;\nmy $metadata = Module::Metadata-&gt;new_from_file('/path/to/File.pm');\nmy $package = $metadata-&gt;name;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1548792782, "post_id": 54412174, "comment_id": 95667904, "body": "<code>[0-9.]*</code> is not sufficient to parse the VERSION component of a package statement, and package statements can take BLOCKs containing the package contents since Perl 5.14. I strongly suggest not trying to reinvent this."}, {"owner": {"reputation": 333, "user_id": 4220763, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6AuCF.jpg?s=128&g=1", "display_name": "Hannibal", "link": "https://stackoverflow.com/users/4220763/hannibal"}, "reply_to_user": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1548794796, "post_id": 54412174, "comment_id": 95668731, "body": "@Grinnz U&#39;re right, I fixed the regex.. it&#39;s still a fragile regex that not consider repetitions in one-line perl code nor other exotic cases. It&#39;s just for school, even if it can address the 99.99% of cases. BTW I think it&#39;s more educational to try to do things on their own, at least for personal culture, before using classes from others. Otherwise programming in perl will become like programming in Java, where the only thing to know is the name of the class to be instantiated without knowing how it works under the hood. But it&#39;s only my opionion, probably I&#39;m wrong."}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1548795234, "post_id": 54412174, "comment_id": 95668920, "body": "I think it&#39;s more effective to look at the source code of those modules suggested for your problem, than to try to reinvent all of the problems it already fixed."}], "tags": [], "owner": {"reputation": 333, "user_id": 4220763, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6AuCF.jpg?s=128&g=1", "display_name": "Hannibal", "link": "https://stackoverflow.com/users/4220763/hannibal"}, "is_accepted": false, "score": 2, "last_activity_date": 1548794870, "last_edit_date": 1548794870, "creation_date": 1548721274, "answer_id": 54412174, "question_id": 54410957, "link": "https://stackoverflow.com/questions/54410957/how-to-get-module-name-by-file-name/54412174#54412174", "title": "How to get module name by file name?", "body": "<p>Basically you can't, without parsing your files.\nThe right way is to use some standard perl module like <a href=\"https://perldoc.pl/Module::Metadata\" rel=\"nofollow noreferrer\">https://perldoc.pl/Module::Metadata</a>, but if you want to do it by yourself, with the following snippet you can extract all namespaces from inside each file (yes.. a file is just a container, so you may have more packages inside).</p>\n\n<p>Quick and dirty way:</p>\n\n<pre><code>my $PACKAGES ;\nmy @files = ('lib/Foo.pm','lib/Bar.pm') ;\nmy $row ;\nmap {\n    open PKGFILE , '&lt;', $_ or die \"Got error opening file $_: $!\" ;\n    while ( $row = &lt;MODULE&gt;){\n        if ( $row =~ /\\s*package\\s+([\\S]+)(.*?)[;{]/ ){\n            # rx modified on Grinnz review\n            push @{$PACKAGES-&gt;{ $_ }} , $1 ;\n            # last ; # &lt;== uncomment if you are sure each file \n                     #     contains only one package\n        } ;\n    }\n    close PKGFILE ;\n} @files ;\n</code></pre>\n\n<p>Assuming we have two files:</p>\n\n<p>1) <code>lib/Foo.pm</code> (with 2 packages inside)</p>\n\n<pre><code>package Banana::Joe 0.003 ;\n\n...code...\n\npackage Papaya::Frank 0.001 ;\n\n...code...\n\n1 ;\n</code></pre>\n\n<p>2) <code>lib/Bar.pm</code></p>\n\n<pre><code>package Apple::Steve 0.013 ;\n\n...code...\n\n1 ;\n</code></pre>\n\n<p><code>$PACKAGES</code> will be:</p>\n\n<pre><code> {\n   'lib/Bar.pm' =&gt; [\n                     'Apple::Steve'\n                   ],\n   'lib/Foo.pm' =&gt; [\n                     'Banana::Joe',\n                     'Papaya::Frank'\n                   ]\n };\n</code></pre>\n"}], "owner": {"reputation": 1445, "user_id": 1441592, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/2a58917def8d1523a840b52ae7d59d21?s=128&d=identicon&r=PG", "display_name": "Paul Serikov", "link": "https://stackoverflow.com/users/1441592/paul-serikov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 157, "favorite_count": 0, "accepted_answer_id": 54411075, "answer_count": 3, "score": 2, "last_activity_date": 1548794870, "creation_date": 1548713020, "question_id": 54410957, "link": "https://stackoverflow.com/questions/54410957/how-to-get-module-name-by-file-name", "title": "How to get module name by file name?", "body": "<p>I have module <code>Foo::Bar::Baz</code>, which is located on <code>/some_path/Foo/Bar/Baz.pm</code>, and perl script that runs from <code>/some_path/Foo/Bar</code>. Script need to analyse all modules in this folder.</p>\n\n<p>How can I get module name (<code>Foo::Bar::Baz</code>) by file name (<code>Baz.pm</code>) ? I can't just trim <code>.pm</code> ending and also <code>lib</code> path in @INC is non-deterministic</p>\n\n<p>Firstly I supposed to use <a href=\"https://metacpan.org/pod/Module::Info#name\" rel=\"nofollow noreferrer\">new_from_file</a> and <a href=\"https://metacpan.org/pod/Module::Info#name\" rel=\"nofollow noreferrer\">name</a> methods of <a href=\"https://metacpan.org/pod/Module::Info\" rel=\"nofollow noreferrer\">Module::Info</a>, but unfortunately </p>\n\n<blockquote>\n  <p>Module loaded using new_from_file() won't have this information</p>\n</blockquote>\n\n<p>Looks like I need some module which do static code analysis. Anyone knows its name ?</p>\n"}, {"tags": ["perl", "testing"], "answers": [{"comments": [{"owner": {"reputation": 619, "user_id": 550852, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4e23b3cac88c57f3c5c39dfd41817a93?s=128&d=identicon&r=PG", "display_name": "Exodist", "link": "https://stackoverflow.com/users/550852/exodist"}, "edited": false, "score": 3, "creation_date": 1548703603, "post_id": 54408578, "comment_id": 95628637, "body": "I am the inventor/maintainer of Test2, I approve this answer as a correct one."}], "tags": [], "owner": {"reputation": 2833, "user_id": 9300627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7a38cf029222bcf1d902e6b2759ffeb?s=128&d=identicon&r=PG", "display_name": "haukex", "link": "https://stackoverflow.com/users/9300627/haukex"}, "is_accepted": true, "score": 5, "last_activity_date": 1548701961, "creation_date": 1548701961, "answer_id": 54408578, "question_id": 54408357, "link": "https://stackoverflow.com/questions/54408357/how-do-we-test-for-an-optional-hash-field-using-test2v0/54408578#54408578", "title": "How do we test for an optional hash field using Test2::V0", "body": "<p>See <a href=\"https://metacpan.org/pod/Test2::Tools::Compare\" rel=\"noreferrer\"><code>Test2::Tools::Compare</code></a>'s <code>in_set</code> - the following works for me. Don't forget to test failures as well <code>:-)</code></p>\n\n<pre><code>use warnings;\nuse 5.016;\nuse Test2::V0;\n\nsubtest 'optional fields in a hash' =&gt; sub {\n    my $check = hash {\n        field foo =&gt; qr/^[0-9]+$/;\n        field bar =&gt; in_set( DNE(), qr/^[a-zA-Z]+$/ );\n    };\n    like( { foo =&gt; 1 }, $check,\n        'should pass when optional field is omitted' );\n    like( { foo =&gt; 2, bar =&gt; 'a' }, $check,\n        'should pass when optional field is provided' );\n    unlike( { foo =&gt; 2, bar =&gt; undef }, $check,\n        'should fail when optional field is provided with no value' );\n    unlike( { foo =&gt; 2, bar =&gt; '+' }, $check,\n        'should fail when optional field is provided with bad value' );\n};\n\ndone_testing;\n</code></pre>\n"}], "owner": {"reputation": 357, "user_id": 430968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6db7c6ecdbe97a1e844c88ecf587f61f?s=128&d=identicon&r=PG", "display_name": "j1n3l0", "link": "https://stackoverflow.com/users/430968/j1n3l0"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 81, "favorite_count": 1, "accepted_answer_id": 54408578, "answer_count": 1, "score": 4, "last_activity_date": 1548701961, "creation_date": 1548701017, "question_id": 54408357, "link": "https://stackoverflow.com/questions/54408357/how-do-we-test-for-an-optional-hash-field-using-test2v0", "title": "How do we test for an optional hash field using Test2::V0", "body": "<p>I am trying to work out how to test for an optional hash field using <a href=\"https://metacpan.org/pod/Test2::V0\" rel=\"nofollow noreferrer\">Test2::V0</a>. I currently have the following:</p>\n\n<pre><code>use 5.016;\nuse Test2::V0;\n\nsubtest 'optional fields in a hash' =&gt; sub {\n    my $check = hash {\n        field foo =&gt; qr/^[0-9]+$/;\n        field bar =&gt; qr/^[a-zA-Z]+$/; # this field is optional\n    };\n\n    like(\n        { foo =&gt; 1 },\n        $check,\n        'should pass when optional field is omitted',\n    );\n\n    like(\n        { foo =&gt; 2, bar =&gt; 'a' },\n        $check,\n        'should pass when optional field is provided',\n    );\n};\n\ndone_testing;\n</code></pre>\n\n<p>Now if I drop the check for the optional field:</p>\n\n<pre><code>my $check = hash {\n    field foo =&gt; qr/^[0-9]+$/;\n    # field bar =&gt; qr/^[a-zA-Z]+$/; # this field is optional\n};\n</code></pre>\n\n<p>the test will pass. But I want to test the value when it's there.</p>\n\n<p>Any ideas?</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 4229, "user_id": 3973175, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/9c15391d610e59c350912be638b14074?s=128&d=identicon&r=PG", "display_name": "con", "link": "https://stackoverflow.com/users/3973175/con"}, "edited": false, "score": 1, "creation_date": 1548696818, "post_id": 54406545, "comment_id": 95625589, "body": "<code>set_border()</code> could be set on every cell within a column"}], "owner": {"reputation": 133, "user_id": 10157177, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-cifsisoxCms/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7qgl7bNfO7PoxgxvnAkalc7y4NiXw/mo/photo.jpg?sz=128", "display_name": "James Finnegan", "link": "https://stackoverflow.com/users/10157177/james-finnegan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 108, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1548693671, "creation_date": 1548693671, "question_id": 54406545, "link": "https://stackoverflow.com/questions/54406545/excelwriterxlsx-separating-column-with-bold-border", "title": "Excel::Writer::XLSX separating column with bold border", "body": "<p>I've worked with the Excel::Writer::XLSX module to build a lot of spreadsheets, but  I was wondering if there is a way to basically separate certain columns with a bold border.  In my script I use a merge range of columns, so for example, C-E is merged, F-H, etc...  So I would like to put a bold divider along the E column, the H column, etc...  I think it would be some kind of add_format, however I'm already using an add_format to get the date centered, the headers rotated 90 degrees, etc.  Here is a quick snapshot of what I'm talking about (this is what I'm trying to copy via perl).</p>\n\n<p><a href=\"https://i.stack.imgur.com/UAlfw.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/UAlfw.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["regex", "xml", "perl", "xml-parsing"], "comments": [{"owner": {"reputation": 88920, "user_id": 290085, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/306077a2fb7af6587f470214a1b337ff?s=128&d=identicon&r=PG", "display_name": "kjhughes", "link": "https://stackoverflow.com/users/290085/kjhughes"}, "edited": false, "score": 4, "creation_date": 1548693313, "post_id": 54406280, "comment_id": 95623582, "body": "Use a real XML parser and then test the element names.   Don&#39;t try to parse XML with regex."}], "answers": [{"tags": [], "owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "is_accepted": false, "score": 1, "last_activity_date": 1548701154, "creation_date": 1548701154, "answer_id": 54408394, "question_id": 54406280, "link": "https://stackoverflow.com/questions/54406280/read-contents-of-all-xml-tags-that-start-with-a-certain-string/54408394#54408394", "title": "read contents of all xml tags that start with a certain string", "body": "<p>Using <a href=\"https://metacpan.org/pod/Mojo::DOM\" rel=\"nofollow noreferrer\">Mojo::DOM</a>:</p>\n\n<pre><code>use strict;\nuse warnings;\nuse Mojo::DOM;\n\nmy $dom = Mojo::DOM-&gt;new-&gt;xml(1)-&gt;parse($xml);\n\nmy @tags_with_subtags = $dom-&gt;find('*')-&gt;grep(sub {\n  $_-&gt;tag =~ m/\\Atag-[0-9]+\\z/ and $_-&gt;find('*')-&gt;grep(sub {\n    $_-&gt;tag =~ m/\\Atag-[0-9]+\\z/\n  })-&gt;size\n})-&gt;each;\n</code></pre>\n\n<p>Each of the results is a Mojo::DOM object you can further search or manipulate. CSS unfortunately is not (as far as I know) well suited for finding dynamic tag names, so you have to do this bit yourself; it would be very easy if it was instead dynamic attributes.</p>\n"}, {"comments": [{"owner": {"reputation": 103, "user_id": 6415812, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/3b5d9b8833ced68c38cff956ad6836af?s=128&d=identicon&r=PG&f=1", "display_name": "Simon2233", "link": "https://stackoverflow.com/users/6415812/simon2233"}, "edited": false, "score": 0, "creation_date": 1548701873, "post_id": 54408483, "comment_id": 95627870, "body": "It doesn&#39;t need to be a direct descendant, so tag-0 would still be returned in that case!"}], "tags": [], "owner": {"reputation": 2833, "user_id": 9300627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7a38cf029222bcf1d902e6b2759ffeb?s=128&d=identicon&r=PG", "display_name": "haukex", "link": "https://stackoverflow.com/users/9300627/haukex"}, "is_accepted": false, "score": 2, "last_activity_date": 1548702065, "last_edit_date": 1548702065, "creation_date": 1548701567, "answer_id": 54408483, "question_id": 54406280, "link": "https://stackoverflow.com/questions/54406280/read-contents-of-all-xml-tags-that-start-with-a-certain-string/54408483#54408483", "title": "read contents of all xml tags that start with a certain string", "body": "<p><a href=\"https://metacpan.org/pod/distribution/XML-LibXML/LibXML.pod\" rel=\"nofollow noreferrer\"><code>XML::LibXML</code></a> is my most used XML module - there are plenty others, but this one does just about everything I need, at the expense of sometimes being a little more verbose than other modules. The following prints the four desired nodes:</p>\n\n<pre><code>use warnings;\nuse strict;\nuse XML::LibXML;\n\nmy $dom = XML::LibXML-&gt;load_xml(string =&gt; &lt;&lt;'EOT');\n&lt;tag-0&gt;\n    &lt;tag-1&gt;This is&lt;tag-2&gt;some example&lt;/tag-2&gt;text&lt;/tag-1&gt;\n    &lt;tag-3&gt;This is some &lt;ice-8&gt; more &lt;/ice-8&gt;text&lt;/tag-3&gt;\n    &lt;tag-4&gt;This \n        &lt;tag-5&gt;is \n            &lt;tag-6&gt;even more&lt;/tag-6&gt;\n        &lt;/tag-5&gt; \n        &lt;tag-7&gt; text&lt;/tag-7&gt;\n    &lt;/tag-4&gt;\n&lt;/tag-0&gt;\nEOT\n\nmy $expr = \"*[substring(name(), 1, 4) = 'tag-']\";\nfor my $node ( $dom-&gt;findnodes(\"//$expr\") ) {\n    my @children = $node-&gt;findnodes(\"./$expr\");\n    if (@children) {\n        print $node-&gt;nodeName,\"\\n\";\n    }\n}\n</code></pre>\n\n<p>Note that your problem description is a little unclear: does <em>\"contain a nested <code>&lt;tag-[num]&gt;</code>\"</em> mean that only direct descendants are to be considered, or should <code>&lt;tag-0&gt;A&lt;x&gt;B&lt;tag-1&gt;C&lt;/tag-1&gt;D&lt;/x&gt;E&lt;/tag-0&gt;</code> also return <code>tag-0</code>?</p>\n\n<p>If so, then you can change the second <code>findnodes</code> expression to <code>\".//$expr\"</code>.</p>\n"}], "owner": {"reputation": 103, "user_id": 6415812, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/3b5d9b8833ced68c38cff956ad6836af?s=128&d=identicon&r=PG&f=1", "display_name": "Simon2233", "link": "https://stackoverflow.com/users/6415812/simon2233"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 52, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1548702065, "creation_date": 1548692713, "question_id": 54406280, "link": "https://stackoverflow.com/questions/54406280/read-contents-of-all-xml-tags-that-start-with-a-certain-string", "title": "read contents of all xml tags that start with a certain string", "body": "<p>I have an xml structure where I'm looking to write a perl script that reads the content of all tags that start with a certain string.</p>\n\n<p>Example:</p>\n\n<pre><code>&lt;tag-0&gt;\n    &lt;tag-1&gt;This is&lt;tag-2&gt;some example&lt;/tag2&gt;text&lt;/tag-1&gt;\n    &lt;tag-3&gt;This is some &lt;ice-8&gt; more &lt;/ice-8&gt;text&lt;/tag-3&gt;\n    &lt;tag-4&gt;This \n        &lt;tag-5&gt;is \n            &lt;tag-6&gt;even more&lt;/tag-6&gt;\n        &lt;/tag-5&gt; \n        &lt;tag-7&gt; text&lt;/tag-7&gt;\n    &lt;/tag-4&gt;\n&lt;/tag-0&gt;\n</code></pre>\n\n<p>The purpose of the script is to find all nodes that start with <code>&lt;tag-[num]&gt;</code> that contain a nested <code>&lt;tag-[num]&gt;</code>. I'm not familiar with perl, so how would I go about reading contents of a \"dynamic\" tag, and checking for more dynamic nesting tags?</p>\n\n<p>In the above example, I would want to get tag-0, tag-1, tag-4, and tag-5, which I would then be able to further manipulate their contents.</p>\n"}, {"tags": ["php", "regex", "perl", "pcre"], "comments": [{"owner": {"reputation": 137726, "user_id": 345031, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/b7ec7f22d50ea13c796815c13075b08f?s=128&d=identicon&r=PG", "display_name": "mario", "link": "https://stackoverflow.com/users/345031/mario"}, "edited": false, "score": 2, "creation_date": 1548691492, "post_id": 54405892, "comment_id": 95622365, "body": "In PHP the delimiters are handled somewhat crudely <a href=\"https://stackoverflow.com/questions/20705399/warning-preg-replace-unknown-modifier\">beforehand</a>, not by the PCRE library which knows about \\Q and \\E."}, {"owner": {"reputation": 381798, "user_id": 1863229, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/4sh1l.png?s=128&g=1", "display_name": "Tim Biegeleisen", "link": "https://stackoverflow.com/users/1863229/tim-biegeleisen"}, "edited": false, "score": 0, "creation_date": 1548691622, "post_id": 54405892, "comment_id": 95622460, "body": "What would be wrong with just using <code>[foo&#47;bar]</code>?  By the way, I don&#39;t see much point of surrounding that text with <code>\\Q ... \\E</code> anyway, because it contains no actual regex meta characters."}, {"owner": {"reputation": 589595, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1548691631, "post_id": 54405892, "comment_id": 95622466, "body": "<code>&#47;</code> has no special meaning to <code>grep</code>, since it doesn&#39;t use delimiters."}, {"owner": {"reputation": 589595, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "reply_to_user": {"reputation": 381798, "user_id": 1863229, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/4sh1l.png?s=128&g=1", "display_name": "Tim Biegeleisen", "link": "https://stackoverflow.com/users/1863229/tim-biegeleisen"}, "edited": false, "score": 0, "creation_date": 1548691651, "post_id": 54405892, "comment_id": 95622482, "body": "@TimBiegeleisen Square brackets aren&#39;t used for grouping in regexp."}, {"owner": {"reputation": 589595, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 1, "creation_date": 1548691683, "post_id": 54405892, "comment_id": 95622506, "body": "Why don&#39;t you use <code>preg_quote()</code>?"}, {"owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 0, "creation_date": 1548691687, "post_id": 54405892, "comment_id": 95622510, "body": "In your source code, <code>\\Q</code> and <code>\\E</code> do not handle the RE delimiter."}, {"owner": {"reputation": 18883, "user_id": 2612235, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/dpsjq.jpg?s=128&g=1", "display_name": "nowox", "link": "https://stackoverflow.com/users/2612235/nowox"}, "reply_to_user": {"reputation": 381798, "user_id": 1863229, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/4sh1l.png?s=128&g=1", "display_name": "Tim Biegeleisen", "link": "https://stackoverflow.com/users/1863229/tim-biegeleisen"}, "edited": false, "score": 0, "creation_date": 1548691750, "post_id": 54405892, "comment_id": 95622543, "body": "@TimBiegeleisen Because I am not matching <code>foo&#47;bar</code> but anything that could be a regex such as <code>&#47;\\r\\n.*?(?\\$)</code>"}, {"owner": {"reputation": 18883, "user_id": 2612235, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/dpsjq.jpg?s=128&g=1", "display_name": "nowox", "link": "https://stackoverflow.com/users/2612235/nowox"}, "reply_to_user": {"reputation": 589595, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1548691810, "post_id": 54405892, "comment_id": 95622573, "body": "@Barmar Yes <code>preg_quote()</code> looks like a good candidate to my particular case, but it does not answer the question title."}, {"owner": {"reputation": 589595, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "reply_to_user": {"reputation": 481636, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 1, "creation_date": 1548691978, "post_id": 54405892, "comment_id": 95622678, "body": "@WiktorStribi\u017cew That doesn&#39;t seem to be a good dup, it doesn&#39;t discuss <code>\\Q...\\E</code> in source code."}, {"owner": {"reputation": 589595, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1548692049, "post_id": 54405892, "comment_id": 95622728, "body": "The documentation says that it ignores metacharacters in the pattern. The delimiters aren&#39;t in the pattern, they&#39;re used to find the pattern in the first place."}, {"owner": {"reputation": 137726, "user_id": 345031, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/b7ec7f22d50ea13c796815c13075b08f?s=128&d=identicon&r=PG", "display_name": "mario", "link": "https://stackoverflow.com/users/345031/mario"}, "reply_to_user": {"reputation": 589595, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 1, "creation_date": 1548692213, "post_id": 54405892, "comment_id": 95622848, "body": "@Barmar: It does now (more explicitly). // As for Perl, I believe that&#39;s more of a language tokenizer issue (never looked into that though)."}, {"owner": {"reputation": 589595, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "reply_to_user": {"reputation": 481636, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1548692665, "post_id": 54405892, "comment_id": 95623143, "body": "@WiktorStribi\u017cew There are also lots of questions that say that <code>.</code> must be escaped if you want it treated literally. That can be escaped with <code>\\Q</code> and <code>\\E</code>. The delimiter is different, it can&#39;t be escaped this way."}], "answers": [{"comments": [{"owner": {"reputation": 589595, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "reply_to_user": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 0, "creation_date": 1548780522, "post_id": 54406253, "comment_id": 95661955, "body": "Thanks, I&#39;ve updated the answer to incorporate some bits of that."}], "tags": [], "owner": {"reputation": 589595, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "is_accepted": true, "score": 1, "last_activity_date": 1548780505, "last_edit_date": 1548780505, "creation_date": 1548692569, "answer_id": 54406253, "question_id": 54405892, "link": "https://stackoverflow.com/questions/54405892/are-q-and-e-supposed-to-escape-the-delimiter-in-pcre/54406253#54406253", "title": "Are \\Q and \\E supposed to escape the delimiter in PCRE?", "body": "<p>The <a href=\"http://php.net/manual/en/regexp.reference.escape.php\" rel=\"nofollow noreferrer\">PHP documentation</a> is not explicit about this. What it says is:</p>\n\n<blockquote>\n  <p><code>\\Q</code> and <code>\\E</code> can be used to ignore regexp metacharacters in the pattern. For example: <code>\\w+\\Q.$.\\E$</code> will match one or more word characters, followed by literals <code>.$.</code> and anchored at the end of the string.</p>\n</blockquote>\n\n<p>However, the delimiters aren't \"metacharacters in the pattern\". They're used to determine where the pattern ends. So the order of operations apparently is:</p>\n\n<ol>\n<li>Find the pattern in the input string, looking for matching delimiters.</li>\n<li>Escape any special characters between <code>\\Q</code> and <code>\\E</code> within the pattern.</li>\n<li>Do the rest of regexp parsing.</li>\n</ol>\n\n<p><a href=\"http://perldoc.perl.org/perlop.html#Gory-details-of-parsing-quoted-constructs\" rel=\"nofollow noreferrer\">Perl documentation</a> is clearer, describing parsing of quoted constructs in general (regular expressions are just one particular form of this).</p>\n\n<blockquote>\n  <p>The first pass is finding the end of the quoted construct....<br>\n  When searching for single-character delimiters, escaped delimiters and \\ are skipped....<br>\n  During this search no attention is paid to the semantics of the construct. </p>\n</blockquote>\n\n<p>and elsewhere:</p>\n\n<blockquote>\n  <p>For the pattern of regex operators (<code>qr//</code>, <code>m//</code> and <code>s///</code>), the quoting from <code>\\Q</code> is applied after interpolation is processed, but before escapes are processed. </p>\n</blockquote>\n\n<p>But this is still after it has first found the end of the regexp.</p>\n"}], "owner": {"reputation": 18883, "user_id": 2612235, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/dpsjq.jpg?s=128&g=1", "display_name": "nowox", "link": "https://stackoverflow.com/users/2612235/nowox"}, "delete_vote_count": 1, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 291, "favorite_count": 0, "closed_date": 1548692713, "accepted_answer_id": 54406253, "answer_count": 1, "score": 0, "last_activity_date": 1548780505, "creation_date": 1548691382, "last_edit_date": 1548692122, "question_id": 54405892, "link": "https://stackoverflow.com/questions/54405892/are-q-and-e-supposed-to-escape-the-delimiter-in-pcre", "closed_reason": "Duplicate", "title": "Are \\Q and \\E supposed to escape the delimiter in PCRE?", "body": "<p>I am generating regex automatically to validate URLs. To avoid clashes I am simply escaping regular text with <code>\\Q</code> and <code>\\E</code>. Unfortunately I discovered that this syntax does not work as it should in PHP:  </p>\n\n<pre><code>reg_match('/\\Qfoo/bar\\E/', 'foo/bar')\nPHP Warning:  preg_match(): Unknown modifier 'b' in ... code on line ...\n</code></pre>\n\n<p>But it works in <code>grep</code>:</p>\n\n<pre><code>$ echo 'foo/bar' | grep -P '\\Qfoo/bar\\E'\nfoo/bar\n</code></pre>\n\n<p>And in regex101:</p>\n\n<p><a href=\"https://regex101.com/r/mKI0Q9/1\" rel=\"nofollow noreferrer\">https://regex101.com/r/mKI0Q9/1</a></p>\n\n<p>But not in Perl:</p>\n\n<pre><code>$ echo 'foo/bar' | perl -ne 'print $_ if m/\\Qfoo/bar\\E/'\nBackslash found where operator expected at -e line 1, near \"m/\\Qfoo/bar\\\"\n</code></pre>\n\n<p>Does <code>\\Q</code> and <code>\\E</code> are supposed to escape the delimiter?</p>\n"}, {"tags": ["perl", "debugging"], "comments": [{"owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 2, "creation_date": 1548690201, "post_id": 54405288, "comment_id": 95621488, "body": "Most likely you need to rebuild mod_perl and then enable <a href=\"https://perl.apache.org/docs/1.0/guide/debug.html#Debug_Tracing\" rel=\"nofollow noreferrer\">Debug Tracing</a>. Maybe your distribution has already built <code>mod_perl</code> that way but unless you show us the relevant information, that&#39;s hard to tell."}], "owner": {"reputation": 1445, "user_id": 1441592, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/2a58917def8d1523a840b52ae7d59d21?s=128&d=identicon&r=PG", "display_name": "Paul Serikov", "link": "https://stackoverflow.com/users/1441592/paul-serikov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 78, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1548691235, "creation_date": 1548689573, "last_edit_date": 1548691235, "question_id": 54405288, "link": "https://stackoverflow.com/questions/54405288/alternative-way-to-set-nonstop-perldb-opts", "title": "Alternative way to set NonStop PERLDB_OPTS", "body": "<p>I have a perl script, let's call it <code>test.pl</code></p>\n\n<p>I need to run it same way as </p>\n\n<pre><code>$ PERLDB_OPTS=\"NonStop frame=1\" perl -d test.pl\n</code></pre>\n\n<p>Since script runs under mod_perl setting PERLDB_OPTS does not work.</p>\n\n<p>I tried to set NonStop options another 3 ways, via <code>$ENV</code>, <code>DB::parse_options</code> and <code>.perldb</code> :</p>\n\n<p>1) </p>\n\n<pre><code>$ cat test.pl\n#!/usr/bin/perl -d\n$ENV{'PERLDB_OPTS'} = 'NonStop frame=1';\n...\n</code></pre>\n\n<p>2) </p>\n\n<pre><code>$ cat test.pl\n#!/usr/bin/perl -d\nDB::parse_options(\"NonStop=1 frame=1\");\n...\n</code></pre>\n\n<p>3) </p>\n\n<pre><code>$ cat test.pl\n#!/usr/bin/perl -d\n...\n\n$ cat .perldb \nparse_options(\"NonStop=1 frame=1\");\n</code></pre>\n\n<p>But neither worked, output is like when only <code>-d</code> option enabled.</p>\n\n<p>What am I doing wrong ?</p>\n"}, {"tags": ["mongodb", "perl", "aggregate", "fastcgi"], "comments": [{"owner": {"reputation": 333, "user_id": 4220763, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6AuCF.jpg?s=128&g=1", "display_name": "Hannibal", "link": "https://stackoverflow.com/users/4220763/hannibal"}, "edited": false, "score": 0, "creation_date": 1548687872, "post_id": 54404351, "comment_id": 95620005, "body": "First of all <code>&#39;$subtract&#39;</code> isn&#39;t perl but a MongoDB pipeline operator. Second, what is your intent? Could you explain better what are you trying to do? You want to update documents server side? Get documents and subtract some seconds?"}, {"owner": {"reputation": 177, "user_id": 5649717, "user_type": "registered", "profile_image": "https://graph.facebook.com/963955006998290/picture?type=large", "display_name": "Yudistira Sugandi", "link": "https://stackoverflow.com/users/5649717/yudistira-sugandi"}, "reply_to_user": {"reputation": 333, "user_id": 4220763, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6AuCF.jpg?s=128&g=1", "display_name": "Hannibal", "link": "https://stackoverflow.com/users/4220763/hannibal"}, "edited": false, "score": 0, "creation_date": 1548688358, "post_id": 54404351, "comment_id": 95620280, "body": "yea, I want to get document and subtract some minutes :D"}], "answers": [{"comments": [{"owner": {"reputation": 177, "user_id": 5649717, "user_type": "registered", "profile_image": "https://graph.facebook.com/963955006998290/picture?type=large", "display_name": "Yudistira Sugandi", "link": "https://stackoverflow.com/users/5649717/yudistira-sugandi"}, "edited": false, "score": 0, "creation_date": 1548691605, "post_id": 54404796, "comment_id": 95622446, "body": "how about to update field execution time with this new data (after subtract by 5 minutes) ??"}], "tags": [], "owner": {"reputation": 2514, "user_id": 4763449, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RkPIB.jpg?s=128&g=1", "display_name": "Vadim Landa", "link": "https://stackoverflow.com/users/4763449/vadim-landa"}, "is_accepted": true, "score": 0, "last_activity_date": 1548688092, "creation_date": 1548688092, "answer_id": 54404796, "question_id": 54404351, "link": "https://stackoverflow.com/questions/54404351/how-to-subtract-minutes-from-isodate-in-perl-and-mongodb/54404796#54404796", "title": "How to subtract minutes from ISODate() in perl and mongoDB?", "body": "<p>As the error clearly states, <code>$subtract</code> is not an aggregation pipeline stage. Use <code>$project</code> to transform query results:</p>\n\n<pre><code>    $collection-&gt;aggregate(\n        [\n            {\n                '$project' =&gt; \n                    {\n                        'alteredExecutionTime' =&gt; \n                            {\n                                '$subtract' =&gt; ['$executiontime', 5 * 60 * 1000]\n                            }\n                    }\n            }\n        ]\n    );\n\n</code></pre>\n"}], "owner": {"reputation": 177, "user_id": 5649717, "user_type": "registered", "profile_image": "https://graph.facebook.com/963955006998290/picture?type=large", "display_name": "Yudistira Sugandi", "link": "https://stackoverflow.com/users/5649717/yudistira-sugandi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 179, "favorite_count": 0, "accepted_answer_id": 54404796, "answer_count": 1, "score": 0, "last_activity_date": 1548688092, "creation_date": 1548686574, "question_id": 54404351, "link": "https://stackoverflow.com/questions/54404351/how-to-subtract-minutes-from-isodate-in-perl-and-mongodb", "title": "How to subtract minutes from ISODate() in perl and mongoDB?", "body": "<p>Actually, I want to subtract minutes from my execution time field (subtract 5 minutes)...\nthis is my mongodb collection : </p>\n\n<pre><code>{\n    \"_id\" : ObjectId(\"5c4f11fae2fb4adc98f323ad\"),\n    \"datetime\" : ISODate(\"2019-01-28T14:30:18.423Z\"),\n    \"queuename\" : \"indotama_advice\",\n    \"payload\" : \"xxxxxxx\",\n    \"executiontime\" : ISODate(\"2019-01-28T14:31:18.423Z\")\n}\n</code></pre>\n\n<p>this is my code : </p>\n\n<pre><code>my $collection = $db-&gt;get_collection('schedulequeue');\n$person =  $collection-&gt;find_one({\"queuename\" =&gt; \"indotama_advice\"},{\"executiontime\"=&gt;1,\"_id\"=&gt;0});\nmy $new_data = $collection-&gt;aggregate([\n        {'$subtract' =&gt; [\"executiontime\", 5 * 60 * 1000]}\n]);\n</code></pre>\n\n<p>but I got error message <code>unrecognized pipeline stage name : $subtract</code>, can anyone tell me the correct way to use $subtract in perl ??</p>\n"}, {"tags": ["perl", "eval", "assert"], "comments": [{"owner": {"reputation": 1856, "user_id": 6607497, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/f0a0b03f5bbd44186399f4b0aea38049?s=128&d=identicon&r=PG&f=1", "display_name": "U. Windl", "link": "https://stackoverflow.com/users/6607497/u-windl"}, "edited": false, "score": 0, "creation_date": 1550055227, "post_id": 54404312, "comment_id": 96126926, "body": "Could it be done using <code>Filter::Simple</code>?"}], "answers": [{"comments": [{"owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "edited": false, "score": 0, "creation_date": 1548688312, "post_id": 54404538, "comment_id": 95620253, "body": "Updated the answer to use syntactic sugar, i.e. <code>&#224;ssert { CONDITION };</code>."}, {"owner": {"reputation": 1856, "user_id": 6607497, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/f0a0b03f5bbd44186399f4b0aea38049?s=128&d=identicon&r=PG&f=1", "display_name": "U. Windl", "link": "https://stackoverflow.com/users/6607497/u-windl"}, "edited": false, "score": 0, "creation_date": 1548710043, "post_id": 54404538, "comment_id": 95631719, "body": "If the output were just <code>defined $var</code> (the condition that actually failed) instead of the whole block where the assert was executed, It would be acceptable."}, {"owner": {"reputation": 1856, "user_id": 6607497, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/f0a0b03f5bbd44186399f4b0aea38049?s=128&d=identicon&r=PG&f=1", "display_name": "U. Windl", "link": "https://stackoverflow.com/users/6607497/u-windl"}, "edited": false, "score": 0, "creation_date": 1548713723, "post_id": 54404538, "comment_id": 95633063, "body": "I was able to mangle the output a bit, but still the condition has to be passed as CODE reference. Most of all the condition is optimized, so it may be hard to recognize: <code>{ 1 &lt; 2 &amp;&amp; 7 == 8 }</code> becomes <code>Assertion failed: !1 at &#47;tmp&#47;c.pl line 26.</code>"}], "tags": [], "owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "is_accepted": false, "score": 9, "last_activity_date": 1548731050, "last_edit_date": 1548731050, "creation_date": 1548687219, "answer_id": 54404538, "question_id": 54404312, "link": "https://stackoverflow.com/questions/54404312/how-to-implement-assert-in-perl/54404538#54404538", "title": "How to implement assert in Perl?", "body": "<p>Use <a href=\"https://metacpan.org/pod/B::Deparse\" rel=\"nofollow noreferrer\">B::Deparse</a>?</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\n\nuse B::Deparse;\nmy $deparser = B::Deparse-&gt;new();\n\nsub assert(&amp;) {\n    my($condfunc) = @_;\n    my @caller    = caller();\n    unless ($condfunc-&gt;()) {\n        my $src = $deparser-&gt;coderef2text($condfunc);\n        $src =~ s/^\\s*use\\s.*$//mg;\n        $src =~ s/^\\s+(.+?)/$1/mg;\n        $src =~ s/(.+?)\\s+$/$1/mg;\n        $src =~ s/[\\r\\n]+/ /mg;\n        $src =~ s/^\\{\\s*(.+?)\\s*\\}$/$1/g;\n        $src =~ s/;$//mg;\n        die \"Assertion failed: $src at $caller[1] line $caller[2].\\n\";\n    }\n}\n\nmy $var;\nassert { 1 };\n#assert { 0 };\nassert { defined($var) };\n\nexit 0;\n</code></pre>\n\n<p>Test output:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>$ perl dummy.pl\nAssertion failed: defined $var at dummy.pl line 26.\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1856, "user_id": 6607497, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/f0a0b03f5bbd44186399f4b0aea38049?s=128&d=identicon&r=PG&f=1", "display_name": "U. Windl", "link": "https://stackoverflow.com/users/6607497/u-windl"}, "edited": false, "score": 0, "creation_date": 1548710167, "post_id": 54405762, "comment_id": 95631761, "body": "Actually before asking here, I had looked at a few &quot;solutions&quot;, but none of them was really what I&#39;m looking for. Maybe that&#39;s the reason why there are so many different solutions. Despite of that I had been thinking about this problem, and I wondered what the most elegant solution might look like (the &quot;learning effect&quot;)."}], "tags": [], "owner": {"reputation": 11684, "user_id": 1990570, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/B1hso.png?s=128&g=1", "display_name": "tobyink", "link": "https://stackoverflow.com/users/1990570/tobyink"}, "is_accepted": false, "score": 8, "last_activity_date": 1548691007, "creation_date": 1548691007, "answer_id": 54405762, "question_id": 54404312, "link": "https://stackoverflow.com/questions/54404312/how-to-implement-assert-in-perl/54405762#54405762", "title": "How to implement assert in Perl?", "body": "<p>There are a load of assertion modules on CPAN. These are open source, so it's pretty easy to peek at them and see how they're done.</p>\n\n<p><a href=\"https://metacpan.org/pod/Carp::Assert\" rel=\"noreferrer\">Carp::Assert</a> is a low-magic implementation. It has links to a few more complicated assertion modules in its documentation, one of which is my module <a href=\"https://metacpan.org/pod/PerlX::Assert\" rel=\"noreferrer\">PerlX::Assert</a>.</p>\n"}, {"comments": [{"owner": {"reputation": 1856, "user_id": 6607497, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/f0a0b03f5bbd44186399f4b0aea38049?s=128&d=identicon&r=PG&f=1", "display_name": "U. Windl", "link": "https://stackoverflow.com/users/6607497/u-windl"}, "edited": false, "score": 0, "creation_date": 1548711565, "post_id": 54408227, "comment_id": 95632331, "body": "It seems the usefulness of <code>caller()</code> is underestimated ;-) I like the approach to get the original line, even it may seem a bit inefficient. However there&#39;s a little problem if the condition does not fit into one line; then only the first line is output."}, {"owner": {"reputation": 1856, "user_id": 6607497, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/f0a0b03f5bbd44186399f4b0aea38049?s=128&d=identicon&r=PG&f=1", "display_name": "U. Windl", "link": "https://stackoverflow.com/users/6607497/u-windl"}, "edited": false, "score": 0, "creation_date": 1548833383, "post_id": 54408227, "comment_id": 95680018, "body": "Probably caller() could be improved: If I print an anonymous subroutine (code ref), I get output showing the line range, not just the first line, like &quot;<code>CODE(0x24b57e0) -&gt; &amp;main::__ANON__[&#47;tmp&#47;t.pl:13] in &#47;tmp&#47;t.pl:8-13</code>&quot;. But when the call to a subroutine is spread over multiple lines, I just get the number of the first line."}], "tags": [], "owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "is_accepted": true, "score": 5, "last_activity_date": 1548700413, "creation_date": 1548700413, "answer_id": 54408227, "question_id": 54404312, "link": "https://stackoverflow.com/questions/54404312/how-to-implement-assert-in-perl/54408227#54408227", "title": "How to implement assert in Perl?", "body": "<p>Use <code>caller</code> and extract the line of source code that made the assertion?</p>\n\n<pre><code>sub assert {\n    my ($condition, $msg) = @_;\n    return if $condition;\n    if (!$msg) {\n        my ($pkg, $file, $line) = caller(0);\n        open my $fh, \"&lt;\", $file;\n        my @lines = &lt;$fh&gt;;\n        close $fh;\n        $msg = \"$file:$line: \" . $lines[$line - 1];\n    }\n    die \"Assertion failed: $msg\";\n}\n\nassert(2 + 2 == 5);\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>Assertion failed:  assert.pl:14: assert(2 + 2 == 5);\n</code></pre>\n\n<p>If you use <code>Carp::croak</code> instead of <code>die</code>, Perl will also report stack trace information and identify where the failing assertion was called.</p>\n"}, {"comments": [{"owner": {"reputation": 1856, "user_id": 6607497, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/f0a0b03f5bbd44186399f4b0aea38049?s=128&d=identicon&r=PG&f=1", "display_name": "U. Windl", "link": "https://stackoverflow.com/users/6607497/u-windl"}, "edited": false, "score": 0, "creation_date": 1548714749, "post_id": 54410899, "comment_id": 95633371, "body": "Actually I disagree: Assertions serve a documentation purpose and are a part of the code, while test cases are always extern to the code. Most of all, you can&#39;t check some internal details with external tests. (Sorry I also did some Eiffel programming where assertions are actually a part of the language. I also did play with JUnit, but still the sources have assertions.)"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 1856, "user_id": 6607497, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/f0a0b03f5bbd44186399f4b0aea38049?s=128&d=identicon&r=PG&f=1", "display_name": "U. Windl", "link": "https://stackoverflow.com/users/6607497/u-windl"}, "edited": false, "score": 0, "creation_date": 1548715137, "post_id": 54410899, "comment_id": 95633512, "body": "@U.Windl Hum? The example above <i>is</i> your program (as indicated by an unrelated <code>say ...</code>), and the tests are part of it.  I am not showing a separate (external) test suite, but tests <i>in your code</i>.  That&#39;ll do <i>everything</i> <code>assert</code> does (which I had used and loved for years), and a whole lot more if needed."}, {"owner": {"reputation": 1856, "user_id": 6607497, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/f0a0b03f5bbd44186399f4b0aea38049?s=128&d=identicon&r=PG&f=1", "display_name": "U. Windl", "link": "https://stackoverflow.com/users/6607497/u-windl"}, "edited": false, "score": 0, "creation_date": 1548717146, "post_id": 54410899, "comment_id": 95634170, "body": "But to summarize regarding the most wanted feature: Any <code>Test::</code> cannot reproduce the test condition as a string; instead you&#39;ll have to specify a string for each test condition. So basically you substitute <code>assert($a &lt; $b)</code> with something like <code>assert_less($a, $b)</code>, so that <code>assert_less()</code> knows all it needs (operands and operator). Thus it&#39;s easy to output <code>&quot;$a &lt; $b failed&quot;</code> (but still <code>$a</code> and <code>$b</code> are already evaluated then)."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 1856, "user_id": 6607497, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/f0a0b03f5bbd44186399f4b0aea38049?s=128&d=identicon&r=PG&f=1", "display_name": "U. Windl", "link": "https://stackoverflow.com/users/6607497/u-windl"}, "edited": false, "score": 0, "creation_date": 1548746002, "post_id": 54410899, "comment_id": 95641157, "body": "@U.Windl Re &quot;<i>cannot reproduce the test condition as a string</i>&quot; -- Added an example of that: set up the condition and then use it for both testing and report. It uses <code>eval</code> as there is no way to get what you want just so; it&#39;s just two clean lines here. This is a complex system that can be stacked any way you want it. (I also edited the answer.)"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 1856, "user_id": 6607497, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/f0a0b03f5bbd44186399f4b0aea38049?s=128&d=identicon&r=PG&f=1", "display_name": "U. Windl", "link": "https://stackoverflow.com/users/6607497/u-windl"}, "edited": false, "score": 0, "creation_date": 1548746052, "post_id": 54410899, "comment_id": 95641176, "body": "@U.Windl In the end it may be abput what you&#39;ll, simply, <i>like</i>. However, perhaps consider sacrificing some of &quot;elegant&quot; for some of &quot;better.&quot; In a modern high level scripting language we don&#39;t have to settle for (the good old) C-style assertions. You can go with a tad bit less of that (not quite as clean) but with a lot more of other (tests as a part of a manageable system). Just suggesting an option."}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": false, "score": 4, "last_activity_date": 1562982845, "last_edit_date": 1562982845, "creation_date": 1548712776, "answer_id": 54410899, "question_id": 54404312, "link": "https://stackoverflow.com/questions/54404312/how-to-implement-assert-in-perl/54410899#54410899", "title": "How to implement assert in Perl?", "body": "<p>One approach to any kind of \"assertions\" is to use a testing framework.  It isn't as clean-cut as C's <code>assert</code> but then it is incomparably more flexible and manageable, while tests can still be freely embedded in code much like <code>assert</code> statements are.</p>\n\n<p>A few very simple examples</p>\n\n<pre><code>use warnings;\nuse strict;\nuse feature 'say';\n\nuse Test::More 'no_plan';\nTest::More-&gt;builder-&gt;output('/dev/null');\n\nsay \"A few examples of tests, scattered around code\\n\";\n\nlike('may be', qr/(?:\\w+\\s+)?be/, 'regex');\ncmp_ok('a', 'eq', 'a ', 'string equality');\n\nmy ($x, $y) = (1.7, 13);\n\ncmp_ok($x, '==', $y, '$x == $y');\n\nsay \"\\n'eval' expression in a string so we can see the failing code\\n\";\n\nmy $expr = '$x**2 == $y';\nok(eval $expr, 'Quadratic') || diag explain $expr;  \n\n# ok(eval $expr, $expr);\n</code></pre>\n\n<p>with output</p>\n\n<pre>\nA few examples of tests, scattered around code\n\n#   Failed test 'string equality'\n#   at assertion.pl line 19.\n#          got: 'a'\n#     expected: 'a '\n#   Failed test '$x == $y'\n#   at assertion.pl line 20.\n#          got: 1.7\n#     expected: 13\n\n'eval' expression in a string so we can see the failing code\n\n#   Failed test 'Quadratic'\n#   at assertion.pl line 26.\n# $x**2 == $y\n# Looks like you failed 3 tests of 4.\n</pre>\n\n<p>This is just a scattershot of examples, where the last one answers the question directly.</p>\n\n<p>The module <a href=\"https://perldoc.perl.org/Test/More.html\" rel=\"nofollow noreferrer\">Test::More</a> brings together a number of tools; there are many options in how to use it and how to manipulate output. See <a href=\"https://perldoc.perl.org/Test/Harness.html\" rel=\"nofollow noreferrer\">Test::Harness</a>, and <a href=\"https://perldoc.perl.org/Test/Builder.html\" rel=\"nofollow noreferrer\">Test::Builder</a> (used above), and a number of tutorials and SO posts.</p>\n\n<p>I don't know how the above <code>eval</code> counts toward \"elegant\" but it does move you from singular and individually cared for C-style <code>assert</code> statements toward a more easily manageable system.</p>\n\n<p>Good assertions are meant and planned as systemic tests and code documentation but by their nature lack formal structure (and so may still end up scattered and ad-hoc). When done this way they come with a framework and can be managed and tuned with many tools, and as a suite.</p>\n"}], "owner": {"reputation": 1856, "user_id": 6607497, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/f0a0b03f5bbd44186399f4b0aea38049?s=128&d=identicon&r=PG&f=1", "display_name": "U. Windl", "link": "https://stackoverflow.com/users/6607497/u-windl"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 737, "favorite_count": 0, "accepted_answer_id": 54408227, "answer_count": 4, "score": 6, "last_activity_date": 1562982845, "creation_date": 1548686464, "last_edit_date": 1548717913, "question_id": 54404312, "link": "https://stackoverflow.com/questions/54404312/how-to-implement-assert-in-perl", "title": "How to implement assert in Perl?", "body": "<p>When trying to implement C's <code>assert()</code> macro in Perl, there is some fundamental problem. Consider this code first:</p>\n\n<pre><code>sub assert($$) {\n   my ($assertion, $failure_msg) = @_;\n   die $failure_msg unless $assertion;\n}\n\n# ...\nassert($boolean, $message);\n</code></pre>\n\n<p>While this works, it's not like C: In C I'd write <code>assert($foo &lt;= $bar)</code>, but with this implementation I'd have to write <code>assert($foo &lt;= $bar, '$foo &lt;= $bar')</code>, i.e. <em>repeat</em> the condition as string.</p>\n\n<p>Now  I wonder how to implement this <em>efficiently</em>. The easy variant seems to pass the string to <code>assert()</code> and use <code>eval</code> to evaluate the string, but you can't access the variables when evaluating eval. Even if it would work, it would be quite inefficient as the condition is parsed and evaluated each time.</p>\n\n<p>When passing the expression, I have no idea how to make a string from it, especially as it's evaluated already.</p>\n\n<p>Another variant using <code>assert(sub { $condition })</code> where it's likely easier to make a string from the code ref, is considered too ugly.</p>\n\n<p>The construct <code>assert(sub { (eval $_[0], $_[0]) }-&gt;(\"condition\"));</code> with</p>\n\n<pre><code>sub assert($)\n{\n    die \"Assertion failed: $_[1]\\n\" unless $_[0];\n}\n</code></pre>\n\n<p>would do, but is ugly to call.\nThe <em>solution</em> I am looking for is to <em>write the condition to check <strong>only once</em></strong>, while being able to <strong>reproduce the original (non-evaluated) condition</strong> and <strong>efficiently evaluate the condition</strong>.</p>\n\n<p>So what are more elegant solutions? Obviously solutions would be easier if Perl had a macro or comparable syntax mechanism that allows transforming the input before compiling or evaluating.</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 1, "creation_date": 1548684395, "post_id": 54403637, "comment_id": 95617806, "body": "What have you tried? What problems are you having? Please show us your code."}, {"owner": {"reputation": 63, "user_id": 10955982, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-fXlUjyZGvU4/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQM1ntguuklLWl7NMRK18InSOUcfEg/mo/photo.jpg?sz=128", "display_name": "Red_Developper", "link": "https://stackoverflow.com/users/10955982/red-developper"}, "reply_to_user": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1548684844, "post_id": 54403637, "comment_id": 95618086, "body": "I have not done anything yet but I need advice, i need in the first step some helps like, what method to follow (steps of algorithm), which library to use and some links to help me to advance on this subject"}, {"owner": {"reputation": 567, "user_id": 9652562, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff7179b8082590d9450b7783721493cb?s=128&d=identicon&r=PG&f=1", "display_name": "jsor", "link": "https://stackoverflow.com/users/9652562/jsor"}, "edited": false, "score": 1, "creation_date": 1548709709, "post_id": 54403637, "comment_id": 95631550, "body": "try this moulde : <a href=\"https://metacpan.org/pod/CAM::PDF\" rel=\"nofollow noreferrer\">metacpan.org/pod/CAM::PDF</a>"}, {"owner": {"reputation": 63, "user_id": 10955982, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-fXlUjyZGvU4/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQM1ntguuklLWl7NMRK18InSOUcfEg/mo/photo.jpg?sz=128", "display_name": "Red_Developper", "link": "https://stackoverflow.com/users/10955982/red-developper"}, "edited": false, "score": 0, "creation_date": 1548862731, "post_id": 54403637, "comment_id": 95697698, "body": "Thanks to everyone else who replied to this post, i will try"}, {"owner": {"reputation": 11771, "user_id": 1275653, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cb781e5bd49c5d403228b98859d8b6dd?s=128&d=identicon&r=PG", "display_name": "thb", "link": "https://stackoverflow.com/users/1275653/thb"}, "reply_to_user": {"reputation": 567, "user_id": 9652562, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff7179b8082590d9450b7783721493cb?s=128&d=identicon&r=PG&f=1", "display_name": "jsor", "link": "https://stackoverflow.com/users/9652562/jsor"}, "edited": false, "score": 0, "creation_date": 1548894727, "post_id": 54403637, "comment_id": 95711686, "body": "@jsor: CAM::PDF is a good idea. If I wanted to solve this problem robustly, that is probably what I would try. However, I gather that OP prefers a solution with less fuss. His later remarks suggest that he probably does not know Perl well enough to manage CAM::PDF with reasonable effort. This is why I have instead suggested a quick-and-dirty hack."}], "answers": [{"comments": [{"owner": {"reputation": 63, "user_id": 10955982, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-fXlUjyZGvU4/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQM1ntguuklLWl7NMRK18InSOUcfEg/mo/photo.jpg?sz=128", "display_name": "Red_Developper", "link": "https://stackoverflow.com/users/10955982/red-developper"}, "edited": false, "score": 0, "creation_date": 1548862649, "post_id": 54404001, "comment_id": 95697640, "body": "awesome. Thanks. First time using perl, to extract the contents of the pdf on the stdout poppler works great, but I have a small problem of the display of some words containing accents example: d&#233;signation (in pdf) = D&#195;&#169;signation in the standard output ?"}, {"owner": {"reputation": 11771, "user_id": 1275653, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cb781e5bd49c5d403228b98859d8b6dd?s=128&d=identicon&r=PG", "display_name": "thb", "link": "https://stackoverflow.com/users/1275653/thb"}, "reply_to_user": {"reputation": 63, "user_id": 10955982, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-fXlUjyZGvU4/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQM1ntguuklLWl7NMRK18InSOUcfEg/mo/photo.jpg?sz=128", "display_name": "Red_Developper", "link": "https://stackoverflow.com/users/10955982/red-developper"}, "edited": false, "score": 0, "creation_date": 1548893634, "post_id": 54404001, "comment_id": 95711401, "body": "I have updated my answer to answer your follow-up question. If you find the answer useful, then you can <i>upvote</i> it by marking the orange up arrow to the answer&#39;s left. If the answer is the best or only answer, then you can also <i>accept</i> it by marking the green check under the orange arrow. Answerers on Stack Overflow like arrows and checks because arrows and checks award answerers Reputation points on the site."}], "tags": [], "owner": {"reputation": 11771, "user_id": 1275653, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cb781e5bd49c5d403228b98859d8b6dd?s=128&d=identicon&r=PG", "display_name": "thb", "link": "https://stackoverflow.com/users/1275653/thb"}, "is_accepted": true, "score": 1, "last_activity_date": 1548894321, "last_edit_date": 1548894321, "creation_date": 1548685405, "answer_id": 54404001, "question_id": 54403637, "link": "https://stackoverflow.com/questions/54403637/how-to-extract-the-contents-of-a-pdf-file-into-string-variables/54404001#54404001", "title": "how to Extract the contents of a pdf file into string variables", "body": "<p>Briefly scanning, I see no existing Perl module that does exactly what you want with minimal fuss. However, on an open-source platform, <a href=\"https://packages.debian.org/stretch/poppler-utils\" rel=\"nofollow noreferrer\">Poppler</a> brings the utility <code>pdftotext</code>. Nothing prevents Perl from invoking the <code>pdftotext</code> binary via</p>\n\n<pre><code>my $output_of_pdftotext = `pdftotext $pdf_file`;\n</code></pre>\n\n<p>or</p>\n\n<pre><code>my @output_of_pdftotext = `pdftotext $pdf_file`;\n</code></pre>\n\n<p>If you do not mean to generalize your solution but just need something to solve your immediate problem (which, I assume, is your present orientation, insofar as you are using Perl, which excels at such usage), then my practical suggestion would be that you install Poppler's <code>pdftotext</code> utility, try it manually on your PDF, and see what it outputs. Then, given some minimal fluency in Perl, you can have your Perl script pattern-match the output and reformat it as you like.</p>\n\n<p><strong>CHARACTER ENCODINGS</strong></p>\n\n<p>Following up, OP asks:</p>\n\n<blockquote>\n  <p>[T]o extract the contents of the pdf on the stdout poppler works great, but I have a small problem of the display of some words containing accents example: d\u00e9signation (in pdf) = D\u00c3\u00a9signation in the standard output ?</p>\n</blockquote>\n\n<p>The utf-8 character encoding encodes \"\u00e9\" with the two bytes C3 A9 (hexadecimal). The iso-8859-1 encoding encodes \"\u00c3\u00a9\" with the same two bytes. Your \"d\u00e9signation\" is evidently encoded as utf-8, which is normal, so your standard output is right. However, apparently, your terminal wants to display iso-8859-1. If so, then your terminal is misinterpreting the standard output.</p>\n\n<p>You could tell <code>pdftotext</code> to use iso-8859-1 (I leave it to you as an exercise to read the man page and figure out how to do this). However, my recommendation would be that you instead set your terminal to display utf-8.</p>\n\n<p>How to set your terminal to display utf-8? This depends on which terminal you are using. I do not know your terminal. On my terminal, changing the encoding is easy. Perhaps a few minutes of exploration and experimentation with your terminal's preferences and settings will show you how to change to utf-8.</p>\n"}], "owner": {"reputation": 63, "user_id": 10955982, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-fXlUjyZGvU4/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQM1ntguuklLWl7NMRK18InSOUcfEg/mo/photo.jpg?sz=128", "display_name": "Red_Developper", "link": "https://stackoverflow.com/users/10955982/red-developper"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 67, "favorite_count": 0, "accepted_answer_id": 54404001, "answer_count": 1, "score": 1, "last_activity_date": 1548894321, "creation_date": 1548684188, "question_id": 54403637, "link": "https://stackoverflow.com/questions/54403637/how-to-extract-the-contents-of-a-pdf-file-into-string-variables", "title": "how to Extract the contents of a pdf file into string variables", "body": "<p>I want to know how to do (a perl script) to extract the contents of a pdf and insert it into a database.</p>\n\n<p>Example : I have a pdf file (see the example below : MyPdfFile), from this file I want to extract the item codes items (A and B), quantities (3 and 2) and prices (10 and 20) and insert them into a database (Table : ORDERS).</p>\n\n<p><a href=\"https://i.stack.imgur.com/Z179f.png\" rel=\"nofollow noreferrer\">MyPdfFile</a></p>\n\n<p>thanks in advance for your helps.</p>\n"}, {"tags": ["regex", "string", "perl"], "comments": [{"owner": {"reputation": 886, "user_id": 6933458, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/sO3wJ.jpg?s=128&g=1", "display_name": "BitBeats", "link": "https://stackoverflow.com/users/6933458/bitbeats"}, "edited": false, "score": 0, "creation_date": 1548685453, "post_id": 54402878, "comment_id": 95618466, "body": "IS there not a &quot;set&quot; DS in perl? That could probably help"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 886, "user_id": 6933458, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/sO3wJ.jpg?s=128&g=1", "display_name": "BitBeats", "link": "https://stackoverflow.com/users/6933458/bitbeats"}, "edited": false, "score": 0, "creation_date": 1548693461, "post_id": 54402878, "comment_id": 95623693, "body": "@Predicate: We tend to use hashes to model sets."}], "answers": [{"comments": [{"owner": {"reputation": 2197, "user_id": 1236569, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f0f377976002909c580d08c57f3c3676?s=128&d=identicon&r=PG", "display_name": "giordano", "link": "https://stackoverflow.com/users/1236569/giordano"}, "edited": false, "score": 0, "creation_date": 1548682329, "post_id": 54402965, "comment_id": 95616624, "body": "Thanks for this regexp and for expanation. How can I print each distinct pattern? <code>perl -e &quot;$x = &#39;abx1acy2acz3ab&#39;; $x =~ &#47;(a[a-z])(?!.*\\1)&#47;g; print $1;&quot;</code> prints only <code>ac</code>."}, {"owner": {"reputation": 1111, "user_id": 4732334, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FmMJS.png?s=128&g=1", "display_name": "Ildar Akhmetov", "link": "https://stackoverflow.com/users/4732334/ildar-akhmetov"}, "edited": false, "score": 1, "creation_date": 1548685928, "post_id": 54402965, "comment_id": 95618770, "body": "That&#39;s a quite clever solution!"}, {"owner": {"reputation": 7646, "user_id": 6867048, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b939fdb5809fed8097c38bdf4370747b?s=128&d=identicon&r=PG&f=1", "display_name": "stack0114106", "link": "https://stackoverflow.com/users/6867048/stack0114106"}, "reply_to_user": {"reputation": 2197, "user_id": 1236569, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f0f377976002909c580d08c57f3c3676?s=128&d=identicon&r=PG", "display_name": "giordano", "link": "https://stackoverflow.com/users/1236569/giordano"}, "edited": false, "score": 1, "creation_date": 1548736210, "post_id": 54402965, "comment_id": 95638157, "body": "@giordano.. you are doing a global search, so wrap it in a while loop <code>perl -e &#39;$x = &quot;abx1acy2acz3ab&quot;; while( $x =~ &#47;(a[a-z])(?!.*\\1)&#47;g ) { print &quot;$1\\n&quot; } &#39;</code>"}], "tags": [], "owner": {"reputation": 8926, "user_id": 5331061, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/g1Sv2.jpg?s=128&g=1", "display_name": "Gurmanjot Singh", "link": "https://stackoverflow.com/users/5331061/gurmanjot-singh"}, "is_accepted": false, "score": 5, "last_activity_date": 1548681750, "creation_date": 1548681750, "answer_id": 54402965, "question_id": 54402878, "link": "https://stackoverflow.com/questions/54402878/perl-extract-distinct-patterns-from-a-string/54402965#54402965", "title": "Perl: Extract distinct patterns from a string", "body": "<p>You will get distinct patterns by this regex(if you don't care about their order):</p>\n\n<pre><code>(a[a-z])(?!.*\\1)\n</code></pre>\n\n<p><strong><a href=\"https://regex101.com/r/WSt781/1\" rel=\"noreferrer\">click for Demo</a></strong></p>\n\n<p><strong>Explanation:</strong></p>\n\n<ul>\n<li><code>(a[a-z])</code> - matches letter <code>a</code> followed by any other letter in range <code>a-z</code>. The contents are captured in Group 1</li>\n<li><code>(?!.*\\1)</code> - negative lookahead to make sure that the contents of group 1 are not present later in the string.</li>\n</ul>\n"}, {"comments": [{"owner": {"reputation": 2197, "user_id": 1236569, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f0f377976002909c580d08c57f3c3676?s=128&d=identicon&r=PG", "display_name": "giordano", "link": "https://stackoverflow.com/users/1236569/giordano"}, "edited": false, "score": 0, "creation_date": 1548696755, "post_id": 54403280, "comment_id": 95625552, "body": "This is very interesting: it is possible to screen over a string usnig <code>for</code>. I didn&#39;t know that. Very useful."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 2197, "user_id": 1236569, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f0f377976002909c580d08c57f3c3676?s=128&d=identicon&r=PG", "display_name": "giordano", "link": "https://stackoverflow.com/users/1236569/giordano"}, "edited": false, "score": 1, "creation_date": 1548740702, "post_id": 54403280, "comment_id": 95639226, "body": "@giordano: You&#39;re not really iterating over the string. <code>&#47;(...)&#47;g</code> will return a list of matches and you&#39;re iterating over that list."}], "tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": true, "score": 6, "last_activity_date": 1548682867, "creation_date": 1548682867, "answer_id": 54403280, "question_id": 54402878, "link": "https://stackoverflow.com/questions/54402878/perl-extract-distinct-patterns-from-a-string/54403280#54403280", "title": "Perl: Extract distinct patterns from a string", "body": "<p>If you ever want unique data, consider using a hash.</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\nuse feature 'say';\n\n$_ = 'abx1acy2acz3ab';\nmy %seen;\n\nfor (/(a[a-z])/g) {\n  say $_ unless $seen{$_}++;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 1, "creation_date": 1548693426, "post_id": 54404594, "comment_id": 95623671, "body": "This doesn&#39;t work if the input string is, for example, &quot;abx1axy2acz3ab&quot;."}, {"owner": {"reputation": 7646, "user_id": 6867048, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b939fdb5809fed8097c38bdf4370747b?s=128&d=identicon&r=PG&f=1", "display_name": "stack0114106", "link": "https://stackoverflow.com/users/6867048/stack0114106"}, "reply_to_user": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 1, "creation_date": 1548696007, "post_id": 54404594, "comment_id": 95625168, "body": "@Dave.. I just fixed.. could you please review"}, {"owner": {"reputation": 7646, "user_id": 6867048, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b939fdb5809fed8097c38bdf4370747b?s=128&d=identicon&r=PG&f=1", "display_name": "stack0114106", "link": "https://stackoverflow.com/users/6867048/stack0114106"}, "reply_to_user": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1548696451, "post_id": 54404594, "comment_id": 95625379, "body": "Thanks Dave.but onething surprising me.. I&#39;m expecting the character that is matched with [a-z] to go into &quot;values&quot; of the hash.. but it is printing empty.. Any idea why it is empty string?"}, {"owner": {"reputation": 4969, "user_id": 10971581, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XPQr1.png?s=128&g=1", "display_name": "jhnc", "link": "https://stackoverflow.com/users/10971581/jhnc"}, "edited": false, "score": 0, "creation_date": 1548698210, "post_id": 54404594, "comment_id": 95626253, "body": "m//g return an list. You are getting 8 matches, every second one of which is empty ( <code>((?&lt;=.))</code> ), and those are becoming your hash values."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1548698757, "post_id": 54404594, "comment_id": 95626509, "body": "This is an interesting way to use hash for uniqueness over all matches. So you care about keys here and thus all is well.  (And I don&#39;t get that empty line at the end of printout ?!)"}, {"owner": {"reputation": 7646, "user_id": 6867048, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b939fdb5809fed8097c38bdf4370747b?s=128&d=identicon&r=PG&f=1", "display_name": "stack0114106", "link": "https://stackoverflow.com/users/6867048/stack0114106"}, "reply_to_user": {"reputation": 4969, "user_id": 10971581, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XPQr1.png?s=128&g=1", "display_name": "jhnc", "link": "https://stackoverflow.com/users/10971581/jhnc"}, "edited": false, "score": 0, "creation_date": 1548698793, "post_id": 54404594, "comment_id": 95626515, "body": "@jhnc.. if I understand right, the positive lookbehind doesn&#39;t consume any string and so if any capture groups are covered with it, then those also doesn&#39;t consume..right?"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1548699000, "post_id": 54404594, "comment_id": 95626622, "body": "If you really want to capture the values, then the capturing parens should go around the pattern itself (not the whole assertion): <code>&#47;(a[a-z])(?&lt;=(.))&#47;g;</code>, for <code>perl -E&#39;$_ = &quot;abxaxyaczab&quot;; %h = &#47;(a[a-z])(?=(.))&#47;g; say &quot;$_ =&gt; $h{$_}&quot; for keys %h&#39;</code>"}, {"owner": {"reputation": 4969, "user_id": 10971581, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XPQr1.png?s=128&g=1", "display_name": "jhnc", "link": "https://stackoverflow.com/users/10971581/jhnc"}, "edited": false, "score": 0, "creation_date": 1548699747, "post_id": 54404594, "comment_id": 95626954, "body": "@stack0114106 With perl I tend to just try things rather than think too hard! :)  <code>perl -le &#39; $x=&quot;abxaxy2acz3ab&quot; ; @g=($x=~&#47;(a[a-z])((?&lt;=.))&#47;g); print&quot;&lt;&lt;$_&gt;&gt;&quot; for @g&#39;</code>"}, {"owner": {"reputation": 685, "user_id": 10101956, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1PZFP.jpg?s=128&g=1", "display_name": "Learner", "link": "https://stackoverflow.com/users/10101956/learner"}, "edited": false, "score": 0, "creation_date": 1550004975, "post_id": 54404594, "comment_id": 96108561, "body": "@stack0114106 I liked your answer here, thanks for your time"}], "tags": [], "owner": {"reputation": 7646, "user_id": 6867048, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b939fdb5809fed8097c38bdf4370747b?s=128&d=identicon&r=PG&f=1", "display_name": "stack0114106", "link": "https://stackoverflow.com/users/6867048/stack0114106"}, "is_accepted": false, "score": 3, "last_activity_date": 1548695967, "last_edit_date": 1548695967, "creation_date": 1548687416, "answer_id": 54404594, "question_id": 54402878, "link": "https://stackoverflow.com/questions/54402878/perl-extract-distinct-patterns-from-a-string/54404594#54404594", "title": "Perl: Extract distinct patterns from a string", "body": "<p>Another Perl one-liner</p>\n\n<pre><code>$ perl -le ' $x=\"abx1acy2acz3ab\" ;%kv=$x=~/(a[a-z])((?&lt;=.))/g; $,=\"\\n\"; print keys %kv '\nac\nab\n\n$\n</code></pre>\n\n<p>with another input:</p>\n\n<pre><code>$  perl -le ' $x=\"abxaxy2acz3ab\" ; %kv=$x=~/(a[a-z])((?&lt;=.))/g; $,=\"\\n\"; print keys %kv '\nax\nab\nac\n\n$\n</code></pre>\n"}], "owner": {"reputation": 2197, "user_id": 1236569, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f0f377976002909c580d08c57f3c3676?s=128&d=identicon&r=PG", "display_name": "giordano", "link": "https://stackoverflow.com/users/1236569/giordano"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 144, "favorite_count": 3, "accepted_answer_id": 54403280, "answer_count": 3, "score": 2, "last_activity_date": 1548695967, "creation_date": 1548681438, "last_edit_date": 1548681827, "question_id": 54402878, "link": "https://stackoverflow.com/questions/54402878/perl-extract-distinct-patterns-from-a-string", "title": "Perl: Extract distinct patterns from a string", "body": "<p>I would like to extract patterns according to <code>a[a-z]</code> from a long string and output only distinct values. For example for the following string in <code>$x</code></p>\n\n<pre><code>perl -e \"$x = 'abx1acy2acz3ab'\";\n</code></pre>\n\n<p>The results should be:</p>\n\n<p>ab<br>\n   ac</p>\n\n<p>Problem: There is no rule to split the record/string into an array which  makes it easy to extract the pattern.</p>\n"}, {"tags": ["javascript", "ajax", "perl", "cgi"], "answers": [{"comments": [{"owner": {"reputation": 1958, "user_id": 5553963, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3e043e536e9b6017ab7a9c38c219f7ad?s=128&d=identicon&r=PG&f=1", "display_name": "AVarf", "link": "https://stackoverflow.com/users/5553963/avarf"}, "edited": false, "score": 0, "creation_date": 1548677365, "post_id": 54401556, "comment_id": 95613838, "body": "Thank you. As I said I am new to Perl, can you please introduce a server that I can install fast and with minimal config?"}, {"owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "reply_to_user": {"reputation": 1958, "user_id": 5553963, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3e043e536e9b6017ab7a9c38c219f7ad?s=128&d=identicon&r=PG&f=1", "display_name": "AVarf", "link": "https://stackoverflow.com/users/5553963/avarf"}, "edited": false, "score": 0, "creation_date": 1548679784, "post_id": 54401556, "comment_id": 95615143, "body": "@AVarf For running a CGI script as a subprocess, <a href=\"https://metacpan.org/pod/CGI::PSGI\" rel=\"nofollow noreferrer\">CGI::PSGI</a> together with <a href=\"https://metacpan.org/pod/distribution/Plack/script/plackup\" rel=\"nofollow noreferrer\">plackup</a> would be a good start IMO."}, {"owner": {"reputation": 793701, "user_id": 19068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d2d3229ed1961d2bd81853242493247?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/19068/quentin"}, "reply_to_user": {"reputation": 1958, "user_id": 5553963, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3e043e536e9b6017ab7a9c38c219f7ad?s=128&d=identicon&r=PG&f=1", "display_name": "AVarf", "link": "https://stackoverflow.com/users/5553963/avarf"}, "edited": false, "score": 0, "creation_date": 1548681153, "post_id": 54401556, "comment_id": 95615912, "body": "@AVarf \u2014 Apache HTTPD, Nginx, or Lighttpd"}, {"owner": {"reputation": 1958, "user_id": 5553963, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3e043e536e9b6017ab7a9c38c219f7ad?s=128&d=identicon&r=PG&f=1", "display_name": "AVarf", "link": "https://stackoverflow.com/users/5553963/avarf"}, "edited": false, "score": 0, "creation_date": 1549012296, "post_id": 54401556, "comment_id": 95759561, "body": "Just an update: I tried Lighttpd and Apache 2 both could ran the perl script but I couldn&#39;t send or receive messages (in Json format) so I just dropped it and used Flask and python could easily get the job done."}], "tags": [], "owner": {"reputation": 793701, "user_id": 19068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d2d3229ed1961d2bd81853242493247?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/19068/quentin"}, "is_accepted": true, "score": 3, "last_activity_date": 1548676798, "creation_date": 1548676798, "answer_id": 54401556, "question_id": 54401449, "link": "https://stackoverflow.com/questions/54401449/xml-parsing-error-when-getting-query-from-perl-script/54401556#54401556", "title": "XML Parsing Error when getting query from perl script", "body": "<p>CGI programs need to be executed by a web server (which has to be properly configured to execute CGI programs).</p>\n\n<p>You are opening the file directly in a browser from the filesystem (we can tell because the <code>Location</code> is a <code>file:</code> scheme URL) and it is trying to parse it as XML (possibly you have associated <code>pl</code> files with the XML mime type in your OS somehow). Since it isn't XML, it fails.</p>\n\n<p>Pick a web server, install it, and consult its manual on how to configure it to run CGI programs.</p>\n"}], "owner": {"reputation": 1958, "user_id": 5553963, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3e043e536e9b6017ab7a9c38c219f7ad?s=128&d=identicon&r=PG&f=1", "display_name": "AVarf", "link": "https://stackoverflow.com/users/5553963/avarf"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 91, "favorite_count": 0, "accepted_answer_id": 54401556, "answer_count": 1, "score": 1, "last_activity_date": 1548676798, "creation_date": 1548676413, "question_id": 54401449, "link": "https://stackoverflow.com/questions/54401449/xml-parsing-error-when-getting-query-from-perl-script", "title": "XML Parsing Error when getting query from perl script", "body": "<p>I am new to Perl and I just copied the Cleb answer (<a href=\"https://stackoverflow.com/a/28992992/5553963\">https://stackoverflow.com/a/28992992/5553963</a>) (and also made the ajax.pl executable) but it doesn't work and it gives this error:</p>\n\n<pre><code>XML Parsing Error: not well-formed\nLocation: file:///home/workspace/snmp-agent/query_ui/ajax.pl\nLine Number 1, Column 2:\n</code></pre>\n\n<p>When I run the ajax.pl there is no error but when I get the query via Ajax I faced above error and as you can see from Cleb answer the first line is: \"#!/usr/bin/perl\".</p>\n\n<p>Can someone please give me a hint how to solve this?</p>\n"}, {"tags": ["file", "perl"], "comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1551515945, "post_id": 54400889, "comment_id": 96675314, "body": "How did this work out? As a reminder, see <a href=\"http://stackoverflow.com/help/someone-answers\">What should I do when someone answers my question?</a>"}, {"owner": {"reputation": 487, "user_id": 2181250, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/4d1e994b6cd446b4fc4a4a111d81ec53?s=128&d=identicon&r=PG", "display_name": "gil_mo", "link": "https://stackoverflow.com/users/2181250/gil-mo"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1551604065, "post_id": 54400889, "comment_id": 96694594, "body": "I&#39;m sorry, but none of the replies I got (including yours) were clear enough for me to use. Behaviors are different across OSs, documentation is unclear - seems like each OS has its own, un-coherent definition of the 3 timestamps. Also see my last comment on the bottom reply."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1551645449, "post_id": 54400889, "comment_id": 96706098, "body": "Alright then. Thanks for replying. That&#39;s just what it is with timestamps.  If you really need a portable way to track your copy time you&#39;d have to write far more code than call a flag/builtin."}], "answers": [{"comments": [{"owner": {"reputation": 487, "user_id": 2181250, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/4d1e994b6cd446b4fc4a4a111d81ec53?s=128&d=identicon&r=PG", "display_name": "gil_mo", "link": "https://stackoverflow.com/users/2181250/gil-mo"}, "edited": false, "score": 0, "creation_date": 1548676516, "post_id": 54401204, "comment_id": 95613365, "body": "I wasn&#39;t suggesting that ctime is creation time, I was looking for a solution. Please tell me what I <i>can</i> do, not what I can&#39;t :)"}, {"owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "reply_to_user": {"reputation": 487, "user_id": 2181250, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/4d1e994b6cd446b4fc4a4a111d81ec53?s=128&d=identicon&r=PG", "display_name": "gil_mo", "link": "https://stackoverflow.com/users/2181250/gil-mo"}, "edited": false, "score": 0, "creation_date": 1548676735, "post_id": 54401204, "comment_id": 95613479, "body": "I assume with &quot;copy time&quot; you mean &quot;when was the copy created&quot;. That would be <code>btime</code>, which isn&#39;t portable. If you use a copy process that does not preserve file stamps, e.g. <code>cp --no-preserve=timestamps</code>, then you could use <code>ctime</code> as &quot;file creation time&quot;."}, {"owner": {"reputation": 1110, "user_id": 9749458, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/001ed2d47a01593ee5c6463c2f5fe224?s=128&d=identicon&r=PG&f=1", "display_name": "Dave Mitchell", "link": "https://stackoverflow.com/users/9749458/dave-mitchell"}, "edited": false, "score": 0, "creation_date": 1548680950, "post_id": 54401204, "comment_id": 95615797, "body": "The mtime of a new file just copied from an old file will be the time of the copy, unless whatever tool used to copy sets times; e.g.$ perl -le&#39;print scalar localtime( (stat &quot;/etc/passwd&quot;)[9])&#39; Tue Dec 11 20:33:24 2018 $ cp /etc/passwd /tmp $ perl -le&#39;print scalar localtime( (stat &quot;/tmp/passwd&quot;)[9])&#39; Mon Jan 28 13:07:29 2019"}, {"owner": {"reputation": 487, "user_id": 2181250, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/4d1e994b6cd446b4fc4a4a111d81ec53?s=128&d=identicon&r=PG", "display_name": "gil_mo", "link": "https://stackoverflow.com/users/2181250/gil-mo"}, "edited": false, "score": 0, "creation_date": 1548699620, "post_id": 54401204, "comment_id": 95626903, "body": "Just tried: in Windows File Explorer, created a file, made a copy of it, ran:   my @statA = stat &quot;C:\\\\tempcopy.txt&quot;; print &quot;$statA[8]\\n&quot;; print &quot;$statA[9]\\n&quot;;   And got:   1548699422 1539269413"}], "tags": [], "owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "is_accepted": false, "score": 1, "last_activity_date": 1548675909, "last_edit_date": 1548675909, "creation_date": 1548675552, "answer_id": 54401204, "question_id": 54400889, "link": "https://stackoverflow.com/questions/54400889/modified-time-after-copying-a-file/54401204#54401204", "title": "Modified time after copying a file", "body": "<p>Simple answer: you can't in most cases.</p>\n\n<p><code>ctime</code> is <strong>not</strong> the file creation time. Quoting from <code>man 7 inode</code> on a Linux system:</p>\n\n<blockquote>\n  <p>Last status change timestamp (<code>ctime</code>)\n                <code>stat.st_ctime</code>; <code>statx.stx_ctime</code></p>\n  \n  <p>This is the file's last status change timestamp.  It is  changed\n  by  writing or by setting inode information (i.e., owner, group,\n  link count, mode, etc.).</p>\n</blockquote>\n\n<p>Unless </p>\n\n<ul>\n<li>you don't require portability</li>\n<li>are running on kernel with support for it</li>\n<li>the file is on a file system that has support for it.</li>\n</ul>\n\n<p>Quoting from <code>man 7 inode</code> on a Linux system:</p>\n\n<blockquote>\n  <p>File creation (birth) timestamp (<code>btime</code>)\n  (not returned in the <code>stat</code> structure); <code>statx.stx_btime</code></p>\n  \n  <p>The file's creation timestamp.  This is set on file creation and\n  not changed subsequently.</p>\n  \n  <p>The <code>btime</code> timestamp was not historically present on UNIX systems\n  and is not currently supported by most Linux filesystems.</p>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": false, "score": 1, "last_activity_date": 1548989878, "last_edit_date": 1548989878, "creation_date": 1548703042, "answer_id": 54408832, "question_id": 54400889, "link": "https://stackoverflow.com/questions/54400889/modified-time-after-copying-a-file/54408832#54408832", "title": "Modified time after copying a file", "body": "<p>There are a few unspecified details, but it seems that <code>ctime</code> timestamp is the best builtin tool at your disposal. (For Windows, also see the module linked below.)</p>\n\n<p>On Windows, according to <a href=\"http://perldoc.perl.org/perlport.html#Files-and-Filesystems\" rel=\"nofollow noreferrer\">perlport (Files and Filesystems)</a>, the <em>inode change time</em> time-stamp</p>\n\n<blockquote>\n  <p>... may really be the \"creation timestamp\" (which it is not in Unix).</p>\n</blockquote>\n\n<p>This would directly work for you, if the file is created by copying. </p>\n\n<p>In Unix <code>ctime</code> does track the inode change (along with metadata changes), what seems to be what you need. This timestamp can also be obtained simply with the <code>-C</code> <a href=\"http://perldoc.perl.org/functions/-X.html\" rel=\"nofollow noreferrer\">file-test operator</a>.</p>\n\n<p>If the copying may update the contents of an existing file I don't see why <code>ctime</code> wouldn't work.</p>\n\n<p>Note the module <a href=\"http://search.cpan.org/~wyant/Win32API-File-Time-0.006/lib/Win32API/File/Time.pm\" rel=\"nofollow noreferrer\">Win32API::File::Time</a>, with the purpose to</p>\n\n<blockquote>\n  <p>provide maximal access to the file creation, modification, and access times under MSWin32  </p>\n</blockquote>\n\n<p>Please see some caveats in docs. I haven't used it and can't test on Windows now.</p>\n"}], "owner": {"reputation": 487, "user_id": 2181250, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/4d1e994b6cd446b4fc4a4a111d81ec53?s=128&d=identicon&r=PG", "display_name": "gil_mo", "link": "https://stackoverflow.com/users/2181250/gil-mo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 583, "favorite_count": 1, "answer_count": 2, "score": 0, "last_activity_date": 1548989878, "creation_date": 1548674471, "question_id": 54400889, "link": "https://stackoverflow.com/questions/54400889/modified-time-after-copying-a-file", "title": "Modified time after copying a file", "body": "<p>In perl 5, Using stat on a file that was freshly copied from an old file, it seems that mtime is the time in which the old file was initially created, not copied.</p>\n\n<p>How do I get the copy time? ctime seems the closest, however there are warnings in the documentation about compatibility across OSs.</p>\n"}, {"tags": ["perl", "overriding"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1548674036, "post_id": 54400617, "comment_id": 95612038, "body": "Is your test.pl script the only new test thing you have? What about the t/ directory?"}, {"owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 1, "creation_date": 1548675295, "post_id": 54400617, "comment_id": 95612714, "body": "If you want to do logging, <a href=\"https://metacpan.org/pod/DBI#Callbacks\" rel=\"nofollow noreferrer\">DBI has various callback methods that you can use</a>. Overwriting existing methods is far more hacky than just using the API the module provides."}, {"owner": {"reputation": 1445, "user_id": 1441592, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/2a58917def8d1523a840b52ae7d59d21?s=128&d=identicon&r=PG", "display_name": "Paul Serikov", "link": "https://stackoverflow.com/users/1441592/paul-serikov"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1548683421, "post_id": 54400617, "comment_id": 95617258, "body": "@simbabque, no, actually in t/ directory of repository there are also some new tests regarding issue <a href=\"https://github.com/zorgnax/dbilog/issues/2\" rel=\"nofollow noreferrer\">github.com/zorgnax/dbilog/issues/2</a>, but they don&#39;t affect on problem."}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 1, "creation_date": 1548702414, "post_id": 54400617, "comment_id": 95628114, "body": "DBI is a very complex module, I would not recommend ever trying to do anything beyond the documented interfaces (which are very extensive). For example every DBI object consists of an &#39;inner&#39; object and an &#39;outer&#39; object and there is a weird tied interface."}, {"owner": {"reputation": 2833, "user_id": 9300627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7a38cf029222bcf1d902e6b2759ffeb?s=128&d=identicon&r=PG", "display_name": "haukex", "link": "https://stackoverflow.com/users/9300627/haukex"}, "edited": false, "score": 0, "creation_date": 1548704863, "post_id": 54400617, "comment_id": 95629285, "body": "Untested, but perhaps <a href=\"https://metacpan.org/pod/Class::Method::Modifiers\" rel=\"nofollow noreferrer\"><code>Class::Method::Modifiers</code></a>&#39;s <code>around</code> would be worth a try instead."}], "owner": {"reputation": 1445, "user_id": 1441592, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/2a58917def8d1523a840b52ae7d59d21?s=128&d=identicon&r=PG", "display_name": "Paul Serikov", "link": "https://stackoverflow.com/users/1441592/paul-serikov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 68, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1548673558, "creation_date": 1548673558, "question_id": 54400617, "link": "https://stackoverflow.com/questions/54400617/suboverride-doesnt-override-dbi-methods-why", "title": "Sub::Override doesn&#39;t override DBI methods. Why?", "body": "<p>I'm writing a fork of <a href=\"https://metacpan.org/pod/DBI::Log\" rel=\"nofollow noreferrer\">DBI::Log</a>, my purpose is to make it conditionally-pluggable to be able to log SQL queries more flexible, e.g. only from particular module or after specified call.</p>\n\n<p>I faced with strange problem - <code>Sub::Override</code> can not override <code>DBI::db::*</code> and <code>DBI::st::execute</code> methods.</p>\n\n<p>Scheme of overriding is following</p>\n\n<p>1) I save reference to original method to variable, e.g. <code>my $orig_execute = \\&amp;DBI::st::execute;</code></p>\n\n<p>2) Create a new function with adding some additional logging code, e.g.</p>\n\n<pre><code>sub _execute {\n    my ( $sth, @args ) = @_;\n    warn \"Execute is working!\";\n    my $log = dbilog( \"execute\", $sth-&gt;{Database}, $sth-&gt;{Statement}, \\@args );\n    my $retval = $orig_execute-&gt;( $sth, @args );\n    dbilog2($log);\n    return $retval;\n}\n</code></pre>\n\n<p>3) Replace old to new function using <code>Sub::Override</code></p>\n\n<pre><code>my $sub = Sub::Override-&gt;new;\n$sub-&gt;replace( 'DBI::st::execute', \\&amp;_execute );\n</code></pre>\n\n<p><a href=\"https://github.com/pavelsr/dbilog/blob/plugged/lib/DBI/Log/Plugged.pm\" rel=\"nofollow noreferrer\">Here is a full code of changed DBI::Log module</a>. It must do same as <a href=\"https://github.com/zorgnax/dbilog/blob/master/lib/DBI/Log.pm\" rel=\"nofollow noreferrer\">original DBI::Log</a>, just use Sub::Override, so original unit tests must pass.</p>\n\n<p>If I run <a href=\"https://github.com/pavelsr/dbilog/blob/plugged/test.pl\" rel=\"nofollow noreferrer\">test.pl</a> and <a href=\"https://github.com/pavelsr/dbilog/blob/plugged/lib/DBI/Log/Plugged.pm#L40\" rel=\"nofollow noreferrer\">added debug output</a> script I see that <code>Sub::Override</code> is working, but for some reason overrided function can not start - no <code>Execute is working!</code> <a href=\"https://github.com/pavelsr/dbilog/blob/plugged/lib/DBI/Log/Plugged.pm#L44\" rel=\"nofollow noreferrer\">message</a>.</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 31386, "user_id": 9661424, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rnnvz.png?s=128&g=1", "display_name": "sticky bit", "link": "https://stackoverflow.com/users/9661424/sticky-bit"}, "edited": false, "score": 1, "creation_date": 1548672182, "post_id": 54400121, "comment_id": 95611090, "body": "Do need to capture the output too or do you only want to display it and foget it directly afterwards?"}, {"owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "edited": false, "score": 2, "creation_date": 1548672499, "post_id": 54400121, "comment_id": 95611231, "body": "Sounds like you should be using <code>system()</code> rather than backticks to run the command?"}, {"owner": {"reputation": 1, "user_id": 10978470, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99dfee390dfeea0d70b2cd6284594efc?s=128&d=identicon&r=PG&f=1", "display_name": "Alex", "link": "https://stackoverflow.com/users/10978470/alex"}, "edited": false, "score": 0, "creation_date": 1548679554, "post_id": 54400121, "comment_id": 95615013, "body": "I&#39;d just want to display and forget it, but additionally capturing the output in an array whilst the thing is happening can&#39;t be wrong."}], "answers": [{"tags": [], "owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "is_accepted": false, "score": 0, "last_activity_date": 1548686637, "creation_date": 1548686637, "answer_id": 54404373, "question_id": 54400121, "link": "https://stackoverflow.com/questions/54400121/calling-an-external-program-in-perl-under-windows-and-linux-and-printing-what-it/54404373#54404373", "title": "Calling an external program in Perl under Windows and Linux and printing what it&#39;s doing live", "body": "<p>This should do it: it lets the shell handle the redirection for STDERR. I don't have Windows, so I don't know what the corresponding bits in <code>cmd.exe</code> would be.</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\n\nsub run_command(\\@$) {\n    my($log, $cmd) = @_;\n\n    my($redirect_start, $redirect_end);\n    if ($^O =~ /Win/) {\n        # @TODO\n        $redirect_start = '???';\n        $redirect_end   = '???';\n    } else {\n        $redirect_start = '(';\n        $redirect_end   = ') 2&gt;&amp;1';\n    }\n    open(my $fh, \"${redirect_start}${cmd}${redirect_end} |\")\n        or die \"ERROR: $!\\n\";\n\n    while (&lt;$fh&gt;) {\n        push(@{ $log }, $_);\n        print;\n    }\n\n    close($fh)\n        or die \"ERROR: $!\\n\";\n}\n\nmy @log;\nrun_command(@log, 'ls dummy.*');\nrun_command(@log, 'ls -lht dummy.txt');\n\nprint \"\\nLOG:\\n\";\nprint foreach (@log);\n\nexit 0;\n</code></pre>\n\n<p>Example output from my machine:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>$ perl dummy.pl\ndummy.c\ndummy.c~\n...\ndummy.txt\ndummy.txt~\ndummy.xml\n-rw-rw-r--. 1 USER USER 926 Jan 25 23:33 dummy.txt\n\nLOG:\ndummy.c\ndummy.c~\n...\ndummy.txt\ndummy.txt~\ndummy.xml\n-rw-rw-r--. 1 USER USER 926 Jan 25 23:33 dummy.txt\n</code></pre>\n\n<p>If the above solution isn't satisfactory, I would suggest to look into <a href=\"https://metacpan.org/pod/IPC::Open3\" rel=\"nofollow noreferrer\">IPC::Open3</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 2833, "user_id": 9300627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7a38cf029222bcf1d902e6b2759ffeb?s=128&d=identicon&r=PG", "display_name": "haukex", "link": "https://stackoverflow.com/users/9300627/haukex"}, "is_accepted": false, "score": 0, "last_activity_date": 1548702918, "creation_date": 1548702918, "answer_id": 54408803, "question_id": 54400121, "link": "https://stackoverflow.com/questions/54400121/calling-an-external-program-in-perl-under-windows-and-linux-and-printing-what-it/54408803#54408803", "title": "Calling an external program in Perl under Windows and Linux and printing what it&#39;s doing live", "body": "<p>For interactive stuff like this, <a href=\"https://metacpan.org/pod/IPC::Run\" rel=\"nofollow noreferrer\"><code>IPC::Run</code></a> is usually a good bet.</p>\n\n<pre><code>use warnings;\nuse strict;\nuse IPC::Run qw/ run new_chunker /;\n\nmy @cmd = ('yourcommand', 'arg1', 'arg2');\nmy (@out,@err);\nrun \\@cmd, '&gt;', new_chunker(\"\\n\"), sub {\n        my $line = shift;\n        print $line;\n        push @out, $line;\n    }, '2&gt;', new_chunker(\"\\n\"), sub {\n        my $line = shift;\n        print STDERR $line;\n        push @err, $line;\n    } or die $?;\n</code></pre>\n\n<p><em>Copied from my post <a href=\"https://www.perlmonks.org/?node_id=1210365\" rel=\"nofollow noreferrer\">here</a>. I also wrote about the topic of calling external commands, with example code, at length <a href=\"https://www.perlmonks.org/?node_id=1180578\" rel=\"nofollow noreferrer\">here</a>.</em></p>\n"}, {"tags": [], "owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "is_accepted": false, "score": 0, "last_activity_date": 1548703008, "creation_date": 1548703008, "answer_id": 54408826, "question_id": 54400121, "link": "https://stackoverflow.com/questions/54400121/calling-an-external-program-in-perl-under-windows-and-linux-and-printing-what-it/54408826#54408826", "title": "Calling an external program in Perl under Windows and Linux and printing what it&#39;s doing live", "body": "<p>First, note that surrounding something in quotes is not an effective way to protect it from shell parsing, since it could contain quotes itself. The best way is to avoid the shell parsing entirely by using the list form of open/system/open3/etc, but since you are using the shell metacharacter <code>&amp;</code> you can't do this. So you can use <a href=\"https://metacpan.org/pod/String::ShellQuote\" rel=\"nofollow noreferrer\">String::ShellQuote</a> to provide a string quoted for the appropriate shell.</p>\n\n<p>Using <a href=\"https://perldoc.pl/IPC::Open3\" rel=\"nofollow noreferrer\">IPC::Open3</a>:</p>\n\n<pre><code>use strict;\nuse warnings;\nuse IPC::Open3;\nuse String::ShellQuote;\n\nmy $quoted_dir = shell_quote $wholepath_dir;\nmy $quoted_file = shell_quote $_;\nmy $cmd = $^O =~ /Win/\n  ? \"cd $quoted_dir &amp; $laufwerk &amp; unrar x -v -y $quoted_file\"\n  : \"cd $quoted_dir; unrar x -v -y $quoted_file\";\n\nmy $pid = open3 undef, my $stdout, '&gt;&amp;STDERR', $cmd;\nmy @lines;\nwhile (my $line = readline $stdout) {\n  print $line;\n  push @lines, $line;\n}\nwaitpid $pid, 0;\nmy $exit_code = $? &gt;&gt; 8;\n# you can now act on the $exit_code and the @lines of STDOUT\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 10978470, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99dfee390dfeea0d70b2cd6284594efc?s=128&d=identicon&r=PG&f=1", "display_name": "Alex", "link": "https://stackoverflow.com/users/10978470/alex"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 52, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1548703008, "creation_date": 1548671887, "last_edit_date": 1548672143, "question_id": 54400121, "link": "https://stackoverflow.com/questions/54400121/calling-an-external-program-in-perl-under-windows-and-linux-and-printing-what-it", "title": "Calling an external program in Perl under Windows and Linux and printing what it&#39;s doing live", "body": "<p>I am trying to call an external program, i.e. unrar, from Perl and allow for printing its output to screen while it is running. </p>\n\n<pre><code>@lin1=`cd \"$wholepath_dir\" &amp; $laufwerk &amp; unrar x -v -y \"$_\" ` if ($^O =~ /Win/) ;       \n\n@lin1=`cd \"$wholepath_dir\"; unrar x -v -y \"$_\" ` if (not ($^O =~ /Win/)) ;\n</code></pre>\n\n<p>This code unrars some-rar-file.rar inside a directory.\nHowever, it does not show any progress. \nIt would be nice if it displayed the unrar output live, whilst unraring is happening, instead of feeding the unrar result to an array.</p>\n\n<p>Any idea of how to do that, both for windows and linux?</p>\n"}, {"tags": ["windows", "perl", "zip"], "comments": [{"owner": {"reputation": 25, "user_id": 10024557, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-1uHUBRuk5dc/AAAAAAAAAAI/AAAAAAAAC34/AXfwmx2cj7c/photo.jpg?sz=128", "display_name": "Siddaramu KS", "link": "https://stackoverflow.com/users/10024557/siddaramu-ks"}, "edited": false, "score": 0, "creation_date": 1548655495, "post_id": 54396297, "comment_id": 95603683, "body": "If it cannot be solved, at least i need a solution to ignore these errors"}], "answers": [{"comments": [{"owner": {"reputation": 25, "user_id": 10024557, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-1uHUBRuk5dc/AAAAAAAAAAI/AAAAAAAAC34/AXfwmx2cj7c/photo.jpg?sz=128", "display_name": "Siddaramu KS", "link": "https://stackoverflow.com/users/10024557/siddaramu-ks"}, "edited": false, "score": 0, "creation_date": 1548738970, "post_id": 54396619, "comment_id": 95638781, "body": "Thanks for sharing the knowledge. It looks meaningful. I try this."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 25, "user_id": 10024557, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-1uHUBRuk5dc/AAAAAAAAAAI/AAAAAAAAC34/AXfwmx2cj7c/photo.jpg?sz=128", "display_name": "Siddaramu KS", "link": "https://stackoverflow.com/users/10024557/siddaramu-ks"}, "edited": false, "score": 0, "creation_date": 1548739180, "post_id": 54396619, "comment_id": 95638840, "body": "@SiddaramuKS  Great.  This should work, let me know how it goes."}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": true, "score": 1, "last_activity_date": 1607592500, "last_edit_date": 1607592500, "creation_date": 1548657131, "answer_id": 54396619, "question_id": 54396297, "link": "https://stackoverflow.com/questions/54396297/getting-format-error-cant-find-eocd-signature-with-archives/54396619#54396619", "title": "Getting &quot;format error: can&#39;t find EOCD signature&quot; with archives", "body": "<p>It seems that some of those files indeed have format errors.  Then you can catch those failures and handle the bad files (record names or delete files, etc), and otherwise proceed normally.</p>\n<p>If the &quot;error&quot; you show is an exception (the program dies) then you can trap and handle that</p>\n<pre><code>eval { unzip($zipfile, $folder, $out) };\nif ($@) {\n    say &quot;Error: $@&quot;;\n    # Interrogate. (Is it the expected error or some other?)\n    # handle it: record the filename for later/delete it/etc ...\n}\n# control returns here, unless the block above does exit/die/goto\n</code></pre>\n<p>A builtin way to handle exceptions in Perl (which is <a href=\"https://perldoc.perl.org/functions/die.html\" rel=\"nofollow noreferrer\">die</a>) is via the block form of <a href=\"https://perldoc.perl.org/functions/eval.html\" rel=\"nofollow noreferrer\">eval</a>.<sup>\u2020</sup> Also see the <a href=\"https://perldoc.perl.org/perlvar.html#$@\" rel=\"nofollow noreferrer\"><code>$@</code> error variable in perlvar</a>.</p>\n<p>If your message is a mere warning and the program continues then the <code>eval</code> can't catch that. One way to detect that is to install a <code>SIG{__WARN__}</code> hook and in it throw a <code>die</code>, and then the same <code>eval</code> as above will work</p>\n<pre><code># Block, so the change to how warnings work is scoped as tight as possible\nHANDLE_ZIP: {\n    local $SIG{__WARN__} = sub {\n        die  $_[0] if $_[0] =~ /^\\s*format error:/;  # raise exception, or\n        warn $_[0];                                  # re-emit the warning\n    };\n\n    eval { unzip($zipfile, $folder, $out) };\n    if ($@) {\n        # same as above...\n    }\n};\n</code></pre>\n<p>Now if a warning comes out of <code>unzip</code>, instead of it being printed the sub with reference assigned to <code>$SIG{__WARN__}</code> is invoked. Then, if the warning's message is matched by that regex, a <code>die</code> is thrown instead, with that message. Since this is triggered inside the <code>eval</code> it is handled, as above. See <a href=\"https://perldoc.perl.org/perlvar.html#%SIG\" rel=\"nofollow noreferrer\"><code>%SIG</code> in perlvar</a>.</p>\n<p>Another way is to simply raise an exception in <code>$SIG{__WARN__}</code> for any warning  (only within this block!) and then deal with all details in the <code>eval</code>'s handler.  Note that <a href=\"https://perldoc.perl.org/functions/local.html\" rel=\"nofollow noreferrer\">local</a> is crucial here, so that we don't change how warnings work across all code.</p>\n<p>This should work as it stands but please study the linked docs.</p>\n<hr />\n<p><sup>\u2020</sup> There used to be subtle traps with handling <code>$@</code> directly (prior to v5.14). While that had been resolved, all this is indeed low-level and it may be a good idea to consider using a module instead. That would wrap <code>eval</code>+<code>$@</code> for easier digestion, and perhaps for easier correct usage.</p>\n\n"}], "owner": {"reputation": 25, "user_id": 10024557, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-1uHUBRuk5dc/AAAAAAAAAAI/AAAAAAAAC34/AXfwmx2cj7c/photo.jpg?sz=128", "display_name": "Siddaramu KS", "link": "https://stackoverflow.com/users/10024557/siddaramu-ks"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1858, "favorite_count": 0, "accepted_answer_id": 54396619, "answer_count": 1, "score": 1, "last_activity_date": 1607592500, "creation_date": 1548655237, "last_edit_date": 1548697529, "question_id": 54396297, "link": "https://stackoverflow.com/questions/54396297/getting-format-error-cant-find-eocd-signature-with-archives", "title": "Getting &quot;format error: can&#39;t find EOCD signature&quot; with archives", "body": "<p>The code below works fine, except that for a few of the zip files I am getting the error</p>\n\n<pre>\nformat error: can't find EOCD signature \n at C:/LegacyApp/perl/lib/Archive/Zip/Archive.pm line 695\n    Archive::Zip::Archive::_findEndOfCentralDirectory('Archive::Zip::Archive=HASH(0x375a730)', 'IO::File=GLOB(0x380eb90)') called at C:/LegacyApp/perl/lib/Archive/Zip/Archive.pm line 581\n    Archive::Zip::Archive::readFromFileHandle('Archive::Zip::Archive=HASH(0x375a730)', 'IO::File=GLOB(0x380eb90)',\n</pre>\n\n<p>Using below piece of code:</p>\n\n<pre><code>use Archive::Zip;\n\nunzip($zipfile,$folder,$out);\n\nsub unzip {\n    my ($archive, $want, $dir) = @_;\n    my $zip = Archive::Zip-&gt;new($archive);\n    foreach my $file ($zip-&gt;members) {      \n        if (($file-&gt;fileName =~ /VERSION\\/(.*?).cosipa.xlsx$/i)) {\n            $zip-&gt;extractMember($file,$dir.$file-&gt;fileName);\n        }\n        if ($file-&gt;fileName =~ /VERSION\\/(.*?).txt$/i) {\n            $zip-&gt;extractMember($file,$dir.$file-&gt;fileName);\n        }\n    }\n    return 1; \n}\n</code></pre>\n\n<p>If i delete that particular zip file, then it works fine. But I need a solution where i should be able to handle these zip files also and if possible please let me know what is wrong in code and zip files.</p>\n\n<p>Thanks in advance</p>\n"}, {"tags": ["regex", "windows", "perl", "match", "carriage-return"], "comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1548655666, "post_id": 54396278, "comment_id": 95603728, "body": "Why do you think you have two carriage returns next to each other?"}, {"owner": {"reputation": 8926, "user_id": 5331061, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/g1Sv2.jpg?s=128&g=1", "display_name": "Gurmanjot Singh", "link": "https://stackoverflow.com/users/5331061/gurmanjot-singh"}, "edited": false, "score": 0, "creation_date": 1548656018, "post_id": 54396278, "comment_id": 95603851, "body": "Replace <code>[\\r\\n]+</code> with <code>\\r\\n</code> as shown <a href=\"https://regex101.com/r/ZywcuC/1\" rel=\"nofollow noreferrer\">HERE</a>. Here&#39;s the <a href=\"https://regex101.com/r/ZywcuC/1/codegen?language=perl\" rel=\"nofollow noreferrer\">CODE</a>"}, {"owner": {"reputation": 325, "user_id": 5856095, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/e8e5c412b90786077ddfa0927904b8fe?s=128&d=identicon&r=PG&f=1", "display_name": "katyusza", "link": "https://stackoverflow.com/users/5856095/katyusza"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1548658304, "post_id": 54396278, "comment_id": 95604594, "body": "@zdim I can see two carriage returns when I view the file in binary format."}, {"owner": {"reputation": 144799, "user_id": 2836621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/suHg4.jpg?s=128&g=1", "display_name": "Mark Setchell", "link": "https://stackoverflow.com/users/2836621/mark-setchell"}, "edited": false, "score": 0, "creation_date": 1548659594, "post_id": 54396278, "comment_id": 95605095, "body": "Presumably you saved the edited text? Are you accessing the input/output files in binary mode?"}, {"owner": {"reputation": 325, "user_id": 5856095, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/e8e5c412b90786077ddfa0927904b8fe?s=128&d=identicon&r=PG&f=1", "display_name": "katyusza", "link": "https://stackoverflow.com/users/5856095/katyusza"}, "edited": false, "score": 0, "creation_date": 1548659939, "post_id": 54396278, "comment_id": 95605212, "body": "I did save the edited text; besides, when I try matching other keyword it did work."}, {"owner": {"reputation": 144799, "user_id": 2836621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/suHg4.jpg?s=128&g=1", "display_name": "Mark Setchell", "link": "https://stackoverflow.com/users/2836621/mark-setchell"}, "edited": false, "score": 0, "creation_date": 1548661501, "post_id": 54396278, "comment_id": 95605775, "body": "Run under the Perl debugger and inspect your string inside Perl."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1548662636, "post_id": 54396278, "comment_id": 95606245, "body": "Correct me if I&#39;m wrong (for Windows), but you shouldn&#39;t notice anything with extra <code>\\r</code>s (when they&#39;re back to back) ...?  For a whole extra empty line you need an extra linefeed, not just <code>\\r</code>, no?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1548681414, "post_id": 54396278, "comment_id": 95616074, "body": "For what OS is this Perl built? Did you forget to account for CRLF&lt;-&gt;LF translation in Windows?"}, {"owner": {"reputation": 325, "user_id": 5856095, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/e8e5c412b90786077ddfa0927904b8fe?s=128&d=identicon&r=PG&f=1", "display_name": "katyusza", "link": "https://stackoverflow.com/users/5856095/katyusza"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1548732648, "post_id": 54396278, "comment_id": 95637380, "body": "@zdim Extra <code>\\r</code>s may not cause trouble for a human reader, but I&#39;m reading the data file in another program (Verilog&#39;s $readmemh) so that every ASCII code matters."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1548734395, "post_id": 54396278, "comment_id": 95637735, "body": "@katyusza OK.  I meant to say that what you are seeing may not be due to doubled <code>\\r</code> -- with doubled <code>\\r</code> you <i>wouldn&#39;t</i> see that (I think?).  Perhaps there is really more hiding there (while there is a reason why that shows in your hex output)?"}, {"owner": {"reputation": 325, "user_id": 5856095, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/e8e5c412b90786077ddfa0927904b8fe?s=128&d=identicon&r=PG&f=1", "display_name": "katyusza", "link": "https://stackoverflow.com/users/5856095/katyusza"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1548736573, "post_id": 54396278, "comment_id": 95638220, "body": "@ikegami This Perl is built and run on Windows; the text file in question was also created on Windows. However, in my understanding, a Perl script should always be able to do regex match &amp; replace ASCII combinations on a file, whether it&#39;s Linux or Windows format."}], "answers": [{"comments": [{"owner": {"reputation": 325, "user_id": 5856095, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/e8e5c412b90786077ddfa0927904b8fe?s=128&d=identicon&r=PG&f=1", "display_name": "katyusza", "link": "https://stackoverflow.com/users/5856095/katyusza"}, "edited": false, "score": 0, "creation_date": 1548742920, "post_id": 54409024, "comment_id": 95639990, "body": "Thanks for your reply! Upon your kind suggestion I already updated my post, put my entire Perl script in it, and added a URL pointing to my original data file, ensuring that my question can be reproduced. My data file was created on Windows, and my Perl also runs on Windows, does it mean they&#39;rea all &quot;Windows encoding&quot;?"}, {"owner": {"reputation": 2833, "user_id": 9300627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7a38cf029222bcf1d902e6b2759ffeb?s=128&d=identicon&r=PG", "display_name": "haukex", "link": "https://stackoverflow.com/users/9300627/haukex"}, "reply_to_user": {"reputation": 325, "user_id": 5856095, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/e8e5c412b90786077ddfa0927904b8fe?s=128&d=identicon&r=PG&f=1", "display_name": "katyusza", "link": "https://stackoverflow.com/users/5856095/katyusza"}, "edited": false, "score": 0, "creation_date": 1548793969, "post_id": 54409024, "comment_id": 95668396, "body": "@katyusza Thanks for the update. It looks like you&#39;re not opening the file with the <code>:raw</code> layer, which would remove the <code>:crlf</code> that is automatically added on Windows, which is why my code worked on my end. I&#39;m pretty sure using <code>&lt;:raw:encoding(...)</code> should work for you too, in that you&#39;ll get the original CR/CR/LF sequences that you could then fix in your code."}, {"owner": {"reputation": 325, "user_id": 5856095, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/e8e5c412b90786077ddfa0927904b8fe?s=128&d=identicon&r=PG&f=1", "display_name": "katyusza", "link": "https://stackoverflow.com/users/5856095/katyusza"}, "edited": false, "score": 0, "creation_date": 1548905505, "post_id": 54409024, "comment_id": 95714053, "body": "Buddy thank you for your futher follow-up! I didn&#39;t know that Windows would AUTOMATICALLY ADD stuffs in my file WITHOUT LETTING ME KNOW THAT, and now I know this :) My problem is solved now, thank you for your careful explanations!"}, {"owner": {"reputation": 2833, "user_id": 9300627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7a38cf029222bcf1d902e6b2759ffeb?s=128&d=identicon&r=PG", "display_name": "haukex", "link": "https://stackoverflow.com/users/9300627/haukex"}, "reply_to_user": {"reputation": 325, "user_id": 5856095, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/e8e5c412b90786077ddfa0927904b8fe?s=128&d=identicon&r=PG&f=1", "display_name": "katyusza", "link": "https://stackoverflow.com/users/5856095/katyusza"}, "edited": false, "score": 0, "creation_date": 1548971606, "post_id": 54409024, "comment_id": 95747431, "body": "@katyusza Glad to help. Just to make sure it&#39;s clear, it&#39;s not exactly Window&#39;s fault - by &quot;<code>:crlf</code>&quot; I meant Perl&#39;s I/O layer by that name, which Perl automatically uses on Windows in an attempt to be helpful with reading and writing text files with CRLF line endings on Windows. For more information, see <a href=\"http://perldoc.perl.org/perlport.html#Newlines\" rel=\"nofollow noreferrer\">Newlines in perlport</a> and <a href=\"http://perldoc.perl.org/PerlIO.html\" rel=\"nofollow noreferrer\">PerlIO</a>."}], "tags": [], "owner": {"reputation": 2833, "user_id": 9300627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7a38cf029222bcf1d902e6b2759ffeb?s=128&d=identicon&r=PG", "display_name": "haukex", "link": "https://stackoverflow.com/users/9300627/haukex"}, "is_accepted": false, "score": 1, "last_activity_date": 1548703901, "creation_date": 1548703901, "answer_id": 54409024, "question_id": 54396278, "link": "https://stackoverflow.com/questions/54396278/in-perl-how-to-match-two-consecutive-carriage-returns/54409024#54409024", "title": "In Perl, how to match two consecutive Carriage Returns?", "body": "<p>The first of your regexes appears to work fine for me, which means that there may be an issue in some other piece of code. Please provide a <a href=\"https://stackoverflow.com/help/mcve\">Minimal, <strong>Complete, and Verifiable</strong> Example</a>, which means including sample input data and so on.</p>\n\n<pre><code>$ perl -wMstrict -e 'print \"Foo\\r\\r\\nBar\\r\\r\\n\"' &gt;test.txt\n$ hexdump -C test.txt \n00000000  46 6f 6f 0d 0d 0a 42 61  72 0d 0d 0a              |Foo...Bar...|\n0000000c\n$ cat test.pl \n#!/usr/bin/env perl\nuse warnings;\nuse strict;\nuse Data::Dump;\n\nmy $filename = 'test.txt';\nopen my $fh, '&lt;:raw:encoding(ASCII)', $filename or die \"$filename: $!\";\nmy $prune_txt = do { local $/; &lt;$fh&gt; }; # slurp file\nclose $fh;\n\ndd $prune_txt;\n$prune_txt =~ s/\\x0D\\x0D/\\x0D/g;\ndd $prune_txt;\n\n$ perl test.pl\n\"Foo\\r\\r\\nBar\\r\\r\\n\"\n\"Foo\\r\\nBar\\r\\n\"\n</code></pre>\n\n<p>By the way, it's not immediately obvious to me which encoding your file is using? In the above example, you may need to adjust the <code>:encoding(...)</code> layer appropriately.</p>\n"}, {"comments": [{"owner": {"reputation": 325, "user_id": 5856095, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/e8e5c412b90786077ddfa0927904b8fe?s=128&d=identicon&r=PG&f=1", "display_name": "katyusza", "link": "https://stackoverflow.com/users/5856095/katyusza"}, "edited": false, "score": 0, "creation_date": 1548773687, "post_id": 54415169, "comment_id": 95657540, "body": "Thanks for your help! Your post clarified my misunderstanding about file format and solved my problem! Thanks again!"}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 2, "last_activity_date": 1548758602, "last_edit_date": 1548758602, "creation_date": 1548743800, "answer_id": 54415169, "question_id": 54396278, "link": "https://stackoverflow.com/questions/54396278/in-perl-how-to-match-two-consecutive-carriage-returns/54415169#54415169", "title": "In Perl, how to match two consecutive Carriage Returns?", "body": "<p>On Windows, file handles have a <code>:crlf</code> layer given to them by default.</p>\n\n<ul>\n<li>This layer converts CR LF to LF on read.</li>\n<li>This layer converts LF to CR LF on write.</li>\n</ul>\n\n<p><strong>Solution 1: Compensate for the <code>:crlf</code> layer.</strong></p>\n\n<p>You'd use this solution if you want to end up with system-appropriate line endings.</p>\n\n<pre><code># ... read ...      # CR CR LF \u21d2 CR LF\ns/\\r+\\n/\\n/g;       # CR LF    \u21d2 LF\n# ... write ...     # LF       \u21d2 CR LF\n</code></pre>\n\n<p><strong>Solution 2: Remove the <code>:crlf</code> layer.</strong></p>\n\n<p>You'd use this solution if you want to end up with CR LF unconditionally.</p>\n\n<p>Use <code>&lt;:raw</code> and <code>&gt;:raw</code> instead of <code>&lt;</code> and <code>&gt;</code> as the mode.</p>\n\n<pre><code># ... read ...      # CR CR LF \u21d2 CR CR LF\ns/\\r*\\n/\\r\\n/g;     # CR CR LF \u21d2 CR LF\n# ... write ...     # CR LF    \u21d2 CR LF\n</code></pre>\n"}], "owner": {"reputation": 325, "user_id": 5856095, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/e8e5c412b90786077ddfa0927904b8fe?s=128&d=identicon&r=PG&f=1", "display_name": "katyusza", "link": "https://stackoverflow.com/users/5856095/katyusza"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 238, "favorite_count": 1, "accepted_answer_id": 54415169, "answer_count": 2, "score": 1, "last_activity_date": 1548758602, "creation_date": 1548655152, "last_edit_date": 1548743201, "question_id": 54396278, "link": "https://stackoverflow.com/questions/54396278/in-perl-how-to-match-two-consecutive-carriage-returns", "title": "In Perl, how to match two consecutive Carriage Returns?", "body": "<p>Hi StackOverflow buddies,</p>\n\n<p>I'm on <strong>Windows platform</strong>;  I have a data file but something wrong happened and (I don't know why) all combinations of \"Carriage Return + New Line\" became \"Carriage Return + Carriage Return + New Line\", <strong>(190128 edit:)</strong> for example:</p>\n\n<p>When viewing the file as plain text, it is:</p>\n\n<p><a href=\"https://i.stack.imgur.com/yzmNF.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/yzmNF.png\" alt=\"Text file in plain text (with unprintable stuffs)\"></a></p>\n\n<p>When viewing the same file in hex mode, it is:</p>\n\n<p><a href=\"https://i.stack.imgur.com/hOz4n.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/hOz4n.png\" alt=\"Text file in hex mode, can see the double &quot;0D&quot;s\"></a></p>\n\n<p>Out of practical purposes I need to remove the extra \"0D\" in double \"0D\"s like \"<code>.... 30 30 0D 0D 0A 30 30 ....</code>\", and change it to \"<code>.... 30 30 0D 0A 30 30 ....</code>\".</p>\n\n<p><strong>190129 edit:</strong> Besides, to ensure that my problem can be reproduced, I uploaded my data file to GitHub at URL (should download &amp; unzip it before using; in a binary \\ hex editor you can <code>0D 0D 0A</code> in the first line): <a href=\"https://github.com/katyusza/hello_world/blob/master/ram_init.zip\" rel=\"nofollow noreferrer\">https://github.com/katyusza/hello_world/blob/master/ram_init.zip</a></p>\n\n<p>I used the following Perl script to remove the extra Carriage Return, but to my astonishment my regex just do NOT work!! My entire code is (<strong>190129 edit</strong>: past entire Perl script here):</p>\n\n<pre><code>use warnings            ;\nuse strict              ;\nuse File::Basename      ;\n\n#-----------------------------------------------------------\n# command line handling, file open \\ create\n#-----------------------------------------------------------\n\n# Capture input input filename from command line:\nmy $input_fn = $ARGV[0] or\ndie \"Should provide input file name at command line!\\n\";\n\n# Parse input file name, and generate output file name:\nmy ($iname, $ipath, $isuffix) = fileparse($input_fn, qr/\\.[^.]*/);\nmy $output_fn = $iname.\"_pruneNonPrintable\".$isuffix;\n\n# Open input file:\nopen (my $FIN, \"&lt;\", $input_fn) or die \"Open file error $!\\n\";\n\n# Create output file:\nopen (my $FO, \"&gt;\", $output_fn) or die \"Create file error $!\\n\";\n\n\n#-----------------------------------------------------------\n# Read input file, search &amp; replace, write to output\n#-----------------------------------------------------------\n\n# Read all lines in one go:\n$/ = undef;\n\n# Read entire file into variable:\nmy $prune_txt = &lt;$FIN&gt; ;\n\n# Do match &amp; replace:\n $prune_txt =~ s/\\x0D\\x0D/\\x0D/g;          # do NOT work.\n# $prune_txt =~ s/\\x0d\\x0d/\\x30/g;          # do NOT work.\n# $prune_txt =~ s/\\x30\\x0d/\\x0d/g;          # can work.\n# $prune_txt =~ s/\\x0d\\x0d\\x0a/\\x0d\\x0a/gs; # do NOT work.\n\n# Print end time of processing:\nprint $FO $prune_txt  ;\n\n# Close files:\nclose($FIN)     ;\nclose($FO)      ;\n</code></pre>\n\n<p>I did everything I could to match two consecutive Carriage Returns, but failed. Can anyone please point out my mistake, or tell me the right way to go? Thanks in advance!</p>\n"}, {"tags": ["perl", "moo"], "comments": [{"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1548622069, "post_id": 54391782, "comment_id": 95597158, "body": "That sounds like the sort of thing you might use metaclasses for."}, {"owner": {"reputation": 1523, "user_id": 4204037, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab78fa882cbf4a03c4fd2a0b92622dc5?s=128&d=identicon&r=PG&f=1", "display_name": "bytepusher", "link": "https://stackoverflow.com/users/4204037/bytepusher"}, "edited": false, "score": 1, "creation_date": 1548626126, "post_id": 54391782, "comment_id": 95598188, "body": "Why not use Moose, which offers a proper api for this. Moo is like Moose without the meta stuff, if you start needing it, just use Moose. They should be reasonably compatible, so you don&#39;t have to redevelop everything."}, {"owner": {"reputation": 2000, "user_id": 1275160, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/0e59227edde0173c28ade664aac101ec?s=128&d=identicon&r=PG", "display_name": "Diab Jerius", "link": "https://stackoverflow.com/users/1275160/diab-jerius"}, "reply_to_user": {"reputation": 1523, "user_id": 4204037, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab78fa882cbf4a03c4fd2a0b92622dc5?s=128&d=identicon&r=PG&f=1", "display_name": "bytepusher", "link": "https://stackoverflow.com/users/4204037/bytepusher"}, "edited": false, "score": 0, "creation_date": 1548634551, "post_id": 54391782, "comment_id": 95599940, "body": "@bytepusher Unfortunately, for my applications in my compute environment Moose has too high of a startup overhead."}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 1, "creation_date": 1548703528, "post_id": 54391782, "comment_id": 95628604, "body": "In fact you can use the Moose metaclass directly from a Moo object by calling <code>-&gt;meta</code>, but this just means the overhead will be when you inflate the metaclass instead of during compilation."}, {"owner": {"reputation": 2833, "user_id": 9300627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7a38cf029222bcf1d902e6b2759ffeb?s=128&d=identicon&r=PG", "display_name": "haukex", "link": "https://stackoverflow.com/users/9300627/haukex"}, "edited": false, "score": 0, "creation_date": 1548704683, "post_id": 54391782, "comment_id": 95629202, "body": "@DiabJerius When do you need to make this modification? Before or after the call to <code>apply_roles_to_objects</code>? Grinnz&#39;s <a href=\"https://stackoverflow.com/a/54408953\">answer</a> works in the &quot;before&quot; case."}, {"owner": {"reputation": 2000, "user_id": 1275160, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/0e59227edde0173c28ade664aac101ec?s=128&d=identicon&r=PG", "display_name": "Diab Jerius", "link": "https://stackoverflow.com/users/1275160/diab-jerius"}, "edited": false, "score": 0, "creation_date": 1548783310, "post_id": 54391782, "comment_id": 95663387, "body": "It needs to be done in code which is completely separate from the class definition.  The proximity of the code in my example was simply to keep it short."}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 1, "creation_date": 1548792608, "post_id": 54391782, "comment_id": 95667820, "body": "Honestly since you ruled out the metaclass approach, if you cannot solve the problem with roles, I would suggest a completely different approach, like event distribution, a form of instantaneous pub/sub. Instead of trying to wrap methods, you change the methods to emit events, and then other parts of the system subscribe to the events they want to affect. See <a href=\"https://metacpan.org/pod/Role::EventEmitter#SEE-ALSO\" rel=\"nofollow noreferrer\">Role::EventEmitter and all the similar options listed in its SEE ALSO</a>."}, {"owner": {"reputation": 2000, "user_id": 1275160, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/0e59227edde0173c28ade664aac101ec?s=128&d=identicon&r=PG", "display_name": "Diab Jerius", "link": "https://stackoverflow.com/users/1275160/diab-jerius"}, "edited": false, "score": 0, "creation_date": 1548793030, "post_id": 54391782, "comment_id": 95668006, "body": "Moo&#39;s internal API provides support for what I need to do, so there&#39;s enough of a MOP in Moo.   I just want to make sure that I haven&#39;t missed the obvious way of doing it with the public API."}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1548794452, "post_id": 54391782, "comment_id": 95668586, "body": "I strongly recommend against relying on Moo&#39;s &quot;internal API&quot;. You are free to keep fighting against your tools, but it doesn&#39;t seem like a good use of time."}, {"owner": {"reputation": 2000, "user_id": 1275160, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/0e59227edde0173c28ade664aac101ec?s=128&d=identicon&r=PG", "display_name": "Diab Jerius", "link": "https://stackoverflow.com/users/1275160/diab-jerius"}, "edited": false, "score": 0, "creation_date": 1548863175, "post_id": 54391782, "comment_id": 95697945, "body": "Well, that&#39;s always the balance, isn&#39;t it?  Since I have constraints on what I can use I have to use the tools I have available and push them as far as I can."}], "answers": [{"comments": [{"owner": {"reputation": 2000, "user_id": 1275160, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/0e59227edde0173c28ade664aac101ec?s=128&d=identicon&r=PG", "display_name": "Diab Jerius", "link": "https://stackoverflow.com/users/1275160/diab-jerius"}, "edited": false, "score": 0, "creation_date": 1548783147, "post_id": 54408953, "comment_id": 95663311, "body": "I&#39;m afraid I don&#39;t see how this solves the issue. This will only work when defining the class, not afterwards.  I need to modify the methods outside of class definition."}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "reply_to_user": {"reputation": 2000, "user_id": 1275160, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/0e59227edde0173c28ade664aac101ec?s=128&d=identicon&r=PG", "display_name": "Diab Jerius", "link": "https://stackoverflow.com/users/1275160/diab-jerius"}, "edited": false, "score": 0, "creation_date": 1548792226, "post_id": 54408953, "comment_id": 95667655, "body": "@DiabJerius I&#39;m not sure what you mean. You can apply roles at any time. Do you mean that the manner of modifying the methods is dynamically determined, and you can&#39;t create such roles to cover all cases?"}, {"owner": {"reputation": 2000, "user_id": 1275160, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/0e59227edde0173c28ade664aac101ec?s=128&d=identicon&r=PG", "display_name": "Diab Jerius", "link": "https://stackoverflow.com/users/1275160/diab-jerius"}, "edited": false, "score": 0, "creation_date": 1548793720, "post_id": 54408953, "comment_id": 95668266, "body": "Yes to your question.  Classes are generated dynamically and their methods are also modified dynamically. As for applying roles at any time, that&#39;s technically not quite correct -- you can&#39;t apply roles after a class has been instantiated, see <a href=\"https://rt.cpan.org/Ticket/Display.html?id=101631\" rel=\"nofollow noreferrer\">rt.cpan.org/Ticket/Display.html?id=101631</a>."}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "reply_to_user": {"reputation": 2000, "user_id": 1275160, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/0e59227edde0173c28ade664aac101ec?s=128&d=identicon&r=PG", "display_name": "Diab Jerius", "link": "https://stackoverflow.com/users/1275160/diab-jerius"}, "edited": false, "score": 0, "creation_date": 1548794514, "post_id": 54408953, "comment_id": 95668612, "body": "@DiabJerius You absolutely can apply roles after it has been instantiated, this is the entire purpose of the apply_roles_to_object method. This creates a new class and reblesses the object."}, {"owner": {"reputation": 2000, "user_id": 1275160, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/0e59227edde0173c28ade664aac101ec?s=128&d=identicon&r=PG", "display_name": "Diab Jerius", "link": "https://stackoverflow.com/users/1275160/diab-jerius"}, "edited": false, "score": 0, "creation_date": 1548862490, "post_id": 54408953, "comment_id": 95697520, "body": "This is escalating a bit I think, so let me clarify. My question is about modifying classes, not objects and the RT link I pointed to is about classes, not objects. I understand that roles can be applied to objects (I used apply_roles_to_object in my example code)."}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "reply_to_user": {"reputation": 2000, "user_id": 1275160, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/0e59227edde0173c28ade664aac101ec?s=128&d=identicon&r=PG", "display_name": "Diab Jerius", "link": "https://stackoverflow.com/users/1275160/diab-jerius"}, "edited": false, "score": 0, "creation_date": 1548872886, "post_id": 54408953, "comment_id": 95703311, "body": "@DiabJerius Yes classes should be modified only before instantiation (or generally, &quot;during its compilation unit&quot;) and anything else can be problematic. But why does it matter whether you modify the class or a new class that you rebless the object to?"}], "tags": [], "owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "is_accepted": false, "score": 1, "last_activity_date": 1548703634, "creation_date": 1548703634, "answer_id": 54408953, "question_id": 54391782, "link": "https://stackoverflow.com/questions/54391782/dynamically-modifying-methods-in-moo-using-the-published-moo-api/54408953#54408953", "title": "Dynamically modifying methods in Moo using the published Moo API", "body": "<p>You can modify methods by just applying another role (it doesn't even have to be Moo::Role unless you are dealing with attributes):</p>\n\n<pre><code>use Role::Tiny;\nbefore r1 =&gt; sub { say \"BEFORE r1\" };\n</code></pre>\n\n<p>Just make sure you apply this role after the one that composes the r1 method, or include a dummy <code>sub r1 {}</code> in the role (if one already exists it will be ignored).</p>\n"}], "owner": {"reputation": 2000, "user_id": 1275160, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/0e59227edde0173c28ade664aac101ec?s=128&d=identicon&r=PG", "display_name": "Diab Jerius", "link": "https://stackoverflow.com/users/1275160/diab-jerius"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 109, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1548704471, "creation_date": 1548615497, "last_edit_date": 1548704471, "question_id": 54391782, "link": "https://stackoverflow.com/questions/54391782/dynamically-modifying-methods-in-moo-using-the-published-moo-api", "title": "Dynamically modifying methods in Moo using the published Moo API", "body": "<p>I'm trying to stick to the published API to dynamically modify methods in <a href=\"https://metacpan.org/pod/Moo\" rel=\"nofollow noreferrer\"><code>Moo</code></a>, and have not come up with a general solution.</p>\n\n<p>First off, some code:</p>\n\n<pre><code>package R1 {\n    use Moo::Role;\n    sub r1 { say __PACKAGE__ }\n}\n\npackage C1 {\n    use Moo;\n    sub c1 { say __PACKAGE__ }\n}\n\nuse Scalar::Util qw[ blessed ];\nuse Moo::Role ();\n\nmy $c = C1-&gt;new;\nMoo::Role-&gt;apply_roles_to_object( $c, 'R1' );\n</code></pre>\n\n<p>The role application will illustrate a failure in one approach.</p>\n\n<p>I've tried two approaches.</p>\n\n<p>The first uses <a href=\"https://metacpan.org/pod/Class::Method::Modifiers\" rel=\"nofollow noreferrer\">Class::Method::Modifiers</a>:</p>\n\n<pre><code>use Class::Method::Modifiers qw[ install_modifier ];\ninstall_modifier( blessed( $c ), \n                  before =&gt; r1 =&gt;\n                  sub { say \"BEFORE r1\" }\n                );\n$c-&gt;r1;\n</code></pre>\n\n<p>and works fine:</p>\n\n<pre><code>% perl test.pl\nBEFORE r1\nR1\n</code></pre>\n\n<p>The code for <code>Moo</code>'s internal <a href=\"https://metacpan.org/source/HAARG/Moo-2.003004/lib/Moo/_Utils.pm#L36\" rel=\"nofollow noreferrer\"><code>_install_modifier</code></a> subroutine is very similar, but also performs additional <code>Moo</code> specific actions, so this approach is not exactly equivalent.</p>\n\n<p>The next approach I tried was to directly use the <code>before</code> modifier available to <code>$c</code>, and thus get the additional <code>Moo</code> special sauce:</p>\n\n<pre><code>$c-&gt;can('before')-&gt;( r1 =&gt; sub { say \"BEFORE r1\" } );\n$c-&gt;r1;\n</code></pre>\n\n<p>But...</p>\n\n<pre><code>% perl test.pl\nThe method 'r1' is not found in the inheritance hierarchy for class C1 at [...]/lib/site_perl/5.28.0/Class/Method/Modifiers.pm line 42.\n        Class::Method::Modifiers::install_modifier(\"C1\", \"before\", \"r1\") called at /[...]/lib/site_perl/5.28.0/Moo/_Utils.pm line 44\n        Moo::_Utils::_install_modifier(\"C1\", \"before\", \"r1\", CODE(0x5590bb800360)) called at [...]/lib/site_perl/5.28.0/Moo.pm line 84\n        Moo::before(\"r1\", CODE(0x5590bb800360)) called at test.pl line 25\n</code></pre>\n\n<p>It seems that modifiers were generated for the original <code>C1</code> class, and not updated when the <code>R1</code> role was applied.  The following egregious hack \"fixes\" that:</p>\n\n<pre><code>use Import::Into;\nMoo-&gt;import::into( blessed $c );\n\n$c-&gt;can('before')-&gt;( r1 =&gt; sub { say \"BEFORE r1\" } );\n$c-&gt;r1;\n</code></pre>\n\n<p>which results in:</p>\n\n<pre><code>% perl test.pl\nBEFORE r1\nR1\n</code></pre>\n\n<p>So, is there a means of achieving my goal using only the published <code>Moo</code> API?</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["c++", "perl", "perl-module", "perl-xs"], "comments": [{"owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 6, "creation_date": 1548612213, "post_id": 54391220, "comment_id": 95594253, "body": "When upgrading the Perl major version, you need to recompile all XS modules"}, {"owner": {"reputation": 497, "user_id": 2218666, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/cc24be21f448cefbfda82e5b8f39cd02?s=128&d=identicon&r=PG", "display_name": "Deepak Selvakumar", "link": "https://stackoverflow.com/users/2218666/deepak-selvakumar"}, "reply_to_user": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 0, "creation_date": 1548613566, "post_id": 54391220, "comment_id": 95594674, "body": "compilation happens in windows machine and it is supposed to have happened in perl 5.26.2.  I am not able to verify if the xs modules are recompiled properly though. Any clue on that ?"}, {"owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 5, "creation_date": 1548615547, "post_id": 54391220, "comment_id": 95595363, "body": "XS modules are not automatically recompiled. You will need to reinstall the XS module ideally from source."}, {"owner": {"reputation": 497, "user_id": 2218666, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/cc24be21f448cefbfda82e5b8f39cd02?s=128&d=identicon&r=PG", "display_name": "Deepak Selvakumar", "link": "https://stackoverflow.com/users/2218666/deepak-selvakumar"}, "reply_to_user": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 0, "creation_date": 1548644860, "post_id": 54391220, "comment_id": 95601566, "body": "I have a cmakelist file for the xs modules and I can see with the build logs that the crypt.xs is compiled to crypt.xs.cpp and then to crypt.c which is bundled to a dll. And as the FindPerl.cmake finds 5.26.2 Perl version the xs must have recompiled , is my understanding right ? I have pm files too. Should they also be recompiled ?"}, {"owner": {"reputation": 497, "user_id": 2218666, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/cc24be21f448cefbfda82e5b8f39cd02?s=128&d=identicon&r=PG", "display_name": "Deepak Selvakumar", "link": "https://stackoverflow.com/users/2218666/deepak-selvakumar"}, "reply_to_user": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 0, "creation_date": 1548651754, "post_id": 54391220, "comment_id": 95602826, "body": "how do we determine which perl version the xs module is compiled with?"}, {"owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 1, "creation_date": 1548663427, "post_id": 54391220, "comment_id": 95606525, "body": "Using <code>cmake</code> to compile Perl XS modules is quite nonstandard. I recommend compiling and installing the modules using <code>cpan That::Module</code> (if it&#39;s on CPAN) or <code>cpan .</code> from the respective module distribution directory (if the module is private). If you have more than one Perl executable, clean up the environment so that only the Perl executable and scripts from one version are visible."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1561052482, "post_id": 54391220, "comment_id": 99947999, "body": "Re &quot;<i>the problem is with a standard perl module and rebuilding using cpan or pacman solves the issue.</i>&quot; The problem, as always, is with an XS module that was installed by a different version of Perl than the one using it. In fact, it&#39;s very unlikely to happen to a standard module (unless you&#39;ve done something very weird); it will happen when you install a module a module to a non-standard location (e.g. using local::lib) and tell two Perls to use that location."}], "owner": {"reputation": 497, "user_id": 2218666, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/cc24be21f448cefbfda82e5b8f39cd02?s=128&d=identicon&r=PG", "display_name": "Deepak Selvakumar", "link": "https://stackoverflow.com/users/2218666/deepak-selvakumar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 793, "favorite_count": 0, "answer_count": 0, "score": 3, "last_activity_date": 1548644896, "creation_date": 1548612174, "last_edit_date": 1548644896, "question_id": 54391220, "link": "https://stackoverflow.com/questions/54391220/loadable-library-and-perl-binaries-mismatch-on-a-custom-xs-after-upgrading-to-5", "title": "loadable library and perl binaries mismatch on a custom xs after upgrading to 5.26", "body": "<p>I have an application which has C++ and perl modules.\nI have a custom xs module crypt.xs (not a module provided with perl)\nPreviously our perl module was built with 5.16.0 perl version. </p>\n\n<p>I have another C# application which executes some perl command through System.Diagnostics.Process.</p>\n\n<p>All these were working fine until i upgraded the perl version to 5.26.2</p>\n\n<p>After upgrading, the same System.Diagnostics.Process throes a standard error </p>\n\n<pre><code>\"crypt.c: loadable library and perl binaries are mismatched (got handshake key 0000000011800080, needed 0000000011C00080)\"\n</code></pre>\n\n<p>I googled and found many threads for the same issue but everywhere the problem is with a standard perl module and rebuilding using cpan or pacman solves the issue.</p>\n\n<p>But here its a custom user defined xs module.</p>\n\n<p>Moreover i use cmake to find perl libs and i have updated the version it. So dont know why this error occurs still.</p>\n\n<p>How would i go about it to debug?</p>\n\n<p>Any help is appreciated</p>\n"}, {"tags": ["perl", "for-loop", "parallel-processing"], "comments": [{"owner": {"reputation": 137100, "user_id": 874188, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/ZcY77.png?s=128&g=1", "display_name": "tripleee", "link": "https://stackoverflow.com/users/874188/tripleee"}, "edited": false, "score": 0, "creation_date": 1548599758, "post_id": 54389215, "comment_id": 95590381, "body": "Why are you using Perl for this? The task would be trivial in shell script. Also, do you require the output to be collected in a particular order, or is it okay for the parallel tasks to write to the output file in whichever order they happen to finish?"}, {"owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "edited": false, "score": 0, "creation_date": 1548599837, "post_id": 54389215, "comment_id": 95590401, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/1752357/how-can-i-run-a-system-command-in-perl-asynchronously\">How can I run a system command in Perl asynchronously?</a>"}, {"owner": {"reputation": 53, "user_id": 6077470, "user_type": "registered", "profile_image": "https://graph.facebook.com/10209079461209527/picture?type=large", "display_name": "MilosR.", "link": "https://stackoverflow.com/users/6077470/milosr"}, "edited": false, "score": 0, "creation_date": 1548599990, "post_id": 54389215, "comment_id": 95590452, "body": "The order does not matter. I use perl because I inherited the code from previous person working on this. The script itself has ~1300 lines (where we have to set and check many kind of configurations), and rewriting it in shell for me (newbie in this) will take a lot of time."}, {"owner": {"reputation": 137100, "user_id": 874188, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/ZcY77.png?s=128&g=1", "display_name": "tripleee", "link": "https://stackoverflow.com/users/874188/tripleee"}, "edited": false, "score": 1, "creation_date": 1548600084, "post_id": 54389215, "comment_id": 95590486, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/1752357/how-can-i-run-a-system-command-in-perl-asynchronously\">How can I run a system command in Perl asynchronously?</a>"}, {"owner": {"reputation": 53, "user_id": 6077470, "user_type": "registered", "profile_image": "https://graph.facebook.com/10209079461209527/picture?type=large", "display_name": "MilosR.", "link": "https://stackoverflow.com/users/6077470/milosr"}, "reply_to_user": {"reputation": 137100, "user_id": 874188, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/ZcY77.png?s=128&g=1", "display_name": "tripleee", "link": "https://stackoverflow.com/users/874188/tripleee"}, "edited": false, "score": 0, "creation_date": 1548600706, "post_id": 54389215, "comment_id": 95590701, "body": "@tripleee But i run perl script using the top level bash script ( test.sh ) From test.sh i run perl script (only once, no for loops) that runs the command I mentioned before. Does that means something to you? Can that been parallelized at the shell script?"}, {"owner": {"reputation": 53, "user_id": 6077470, "user_type": "registered", "profile_image": "https://graph.facebook.com/10209079461209527/picture?type=large", "display_name": "MilosR.", "link": "https://stackoverflow.com/users/6077470/milosr"}, "reply_to_user": {"reputation": 137100, "user_id": 874188, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/ZcY77.png?s=128&g=1", "display_name": "tripleee", "link": "https://stackoverflow.com/users/874188/tripleee"}, "edited": false, "score": 0, "creation_date": 1548601888, "post_id": 54389215, "comment_id": 95591072, "body": "@triplee could you explain the possible duplicate? I do not see this is the same problem."}, {"owner": {"reputation": 137100, "user_id": 874188, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/ZcY77.png?s=128&g=1", "display_name": "tripleee", "link": "https://stackoverflow.com/users/874188/tripleee"}, "edited": false, "score": 0, "creation_date": 1548602866, "post_id": 54389215, "comment_id": 95591353, "body": "The proposed duplicate asks about timeouts, but several of the answers explain exactly how to run things in parallel (aka asynchronously)."}], "answers": [{"comments": [{"owner": {"reputation": 53, "user_id": 6077470, "user_type": "registered", "profile_image": "https://graph.facebook.com/10209079461209527/picture?type=large", "display_name": "MilosR.", "link": "https://stackoverflow.com/users/6077470/milosr"}, "edited": false, "score": 1, "creation_date": 1548607895, "post_id": 54389786, "comment_id": 95592919, "body": "Thanks. I&#39;ve been explored Parallel::ForkManager and came to the solution."}], "tags": [], "owner": {"reputation": 4229, "user_id": 3973175, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/9c15391d610e59c350912be638b14074?s=128&d=identicon&r=PG", "display_name": "con", "link": "https://stackoverflow.com/users/3973175/con"}, "is_accepted": true, "score": 0, "last_activity_date": 1548603265, "creation_date": 1548603265, "answer_id": 54389786, "question_id": 54389215, "link": "https://stackoverflow.com/questions/54389215/run-multiple-jobs-within-perl-script-at-the-same-time/54389786#54389786", "title": "Run multiple jobs within perl script at the same time", "body": "<p>I have been using code like this for years </p>\n\n<pre><code>#!/usr/bin/env perl\n\nuse strict;\nuse warnings 'FATAL' =&gt; 'all';\nuse Cwd 'getcwd';\nuse feature 'say';\nmy $TOP_DIRECTORY = getcwd();\nuse autodie qw(:all);\n\nsub execute {\n    my $command = shift;\n    print \"Executing Command: $command\\n\";\n    if (system($command) != 0) {\n        my $fail_filename = \"$TOP_DIRECTORY/$0.fail\";\n        open my $fh, '&gt;', $fail_filename;\n        print $fh \"$command failed.\\n\";\n        close $fh;\n        print \"$command failed.\\n\";\n        die;\n    }\n}\n\nuse Parallel::ForkManager;\nsub run_parallel {\n    my $command_array_reference = shift;\n    unless ((ref $command_array_reference) =~ m/ARRAY/) {\n        say \"run_parallel requires an array reference as input.\";\n        die;\n    }\n    my $manager = new Parallel::ForkManager(2);\n    foreach my $command (@{ $command_array_reference }) {\n        $manager-&gt;start and next;\n        execute( $command );\n        $manager-&gt;finish;\n    }\n    $manager-&gt;wait_all_children;#necessary after all lists\n}\n</code></pre>\n\n<p>execute the above subroutine <code>run_parallel</code> with your series of commands <code>@cmd</code></p>\n\n<p>you can install <code>Parallel::ForkManager</code> from CPAN, e.g. <code>sudo cpanm Parallel::ForkManager</code> or many other ways.</p>\n"}, {"tags": [], "owner": {"reputation": 333, "user_id": 4220763, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6AuCF.jpg?s=128&g=1", "display_name": "Hannibal", "link": "https://stackoverflow.com/users/4220763/hannibal"}, "is_accepted": false, "score": 0, "last_activity_date": 1548616333, "last_edit_date": 1548616333, "creation_date": 1548612815, "answer_id": 54391332, "question_id": 54389215, "link": "https://stackoverflow.com/questions/54389215/run-multiple-jobs-within-perl-script-at-the-same-time/54391332#54391332", "title": "Run multiple jobs within perl script at the same time", "body": "<p>What about a naive approach based on <code>fork()</code> ?</p>\n\n<pre><code># --- Prepare job queues ---\nmy @jobs = ( ['cmd01'..'cmd10'], ['cmd11'..'cmd20'] ) ;\n\n# --- If fork returns PID means we're in the parent proc ---\n# --- otherwise we're in the child proc ---\nworker( fork ? $jobs[0] : $jobs[1] ) ;\n\n# --- Worker --- \nsub worker {\n    # --- Do jobs ---\n    foreach my $cmd ( @{ $_[0] } ){\n        # --- Do system command or die if RC &gt; 0 ---\n        die $! if system($cmd) ;\n    }\n}\n</code></pre>\n\n<p>The main concept is to split your job queue into chunks, then fork the process for getting a parallelism of 2 (or whatever you want), then each process will process its job queue.</p>\n\n<p>This is a working but super sintetic example with a parallelism of 2 as your request. If you need more parallel procs you have to implement the split of your job queue depending on wanted parallelism and <code>fork()</code> a number of <code>parallelism - 1</code> times. </p>\n\n<p>Since each forked process runs in its own address space, they're agnostic one about each other. This means that, depending on your needs, you  may have to implement an IPC mechanism for controlling the execution flows and dependancies, but in your case I think it's not necessary.</p>\n"}], "owner": {"reputation": 53, "user_id": 6077470, "user_type": "registered", "profile_image": "https://graph.facebook.com/10209079461209527/picture?type=large", "display_name": "MilosR.", "link": "https://stackoverflow.com/users/6077470/milosr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1431, "favorite_count": 0, "accepted_answer_id": 54389786, "answer_count": 2, "score": 0, "last_activity_date": 1548616333, "creation_date": 1548599451, "last_edit_date": 1548601126, "question_id": 54389215, "link": "https://stackoverflow.com/questions/54389215/run-multiple-jobs-within-perl-script-at-the-same-time", "title": "Run multiple jobs within perl script at the same time", "body": "<p>I have to run video encoding program, where I have different quantization parameters QP. QP goes from 0 to 51. In my perl script I iterate over this parameter and execute command line. The command line is qiven with:</p>\n\n<blockquote>\n  <p>TAppEncoder encoder_intra_main_rext.cfg -i BSEQ.RAW -b BSEQ_1.bin -o /dev/null -qp 1 -wdt 7811 -hgt 7911 -fr 1 -fs 0 -f 2 --InputBitDepth=16 --OutputBitDepth=16 --InternalBitDepth=16 --InputChromaFormat=400 --ConformanceMode=1 --SEIDecodedPictureHash >> BSEQ_1.txt</p>\n</blockquote>\n\n<p>In each iteration I change ONLY qp. Now, in my Perl script when I execute the line above, it waits to finish and than proceed to the next iteration in the loop (e.g. <code>qp=2</code>).</p>\n\n<p>Also perl script has been called by the top level shell script:</p>\n\n<pre><code>test.sh ---&gt; test.pl ---&gt; command1 with qp=1\n                     ---&gt; command2 with qp=2\n                     ---&gt; command3 with qp=3\n                     ---&gt; command4 with qp=4\n                     ---&gt; until the end of the for loop\n</code></pre>\n\n<p>I was wondering how to run two (or more) processes in parallel. For example, to run <code>qp=1</code> and immediately after <code>qp=2</code>, without waiting <code>qp=1</code> to finish. And than when one of those two is done (no matter if qp=1 or qp=2 finished first) to run qp=3, and so on.</p>\n\n<p>So basically, I do not want to run the perl script in parallel, do not need multiple instances of the perl script. I need command within script (which is part of the loop) to be run in parallel. However, if there is other way to accomplis this, let me know.</p>\n\n<p>The part of the code is below, now it runs one qp at the time. I want to run 2 in the parallel all the time, once one is done to go to the next, so all the time 2 processes are running.</p>\n\n<p>I'm running scripts on linux mint. Im running it on one computer (I do not have a cluster). The idea is to tun it on a two cores.</p>\n\n<p>Any idea how to accomplish that, or at least where to start?\nThanks.</p>\n\n<pre><code>    $QP_end = $Configuration-&gt;{nb_QPs}-1;\n    foreach $QP_index (0 .. $QP_end)\n    {\n      $QP = $Configuration-&gt;{QP_list}[$QP_index];\n      print($QP,\" \");\n      set_command_line(); # HERE I CHANGE THE QP TO SET NEW COMMAND LINE, AND THEN EXECUTE THE NEW COMMAND\n      @RunCommand = ($command_line);\n      `@RunCommand`;\n    }\n</code></pre>\n"}, {"tags": ["mongodb", "perl"], "comments": [{"owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 0, "creation_date": 1548599549, "post_id": 54389036, "comment_id": 95590304, "body": "Most likely, <code>$id</code> does not have the value you think it has, or there is no element in your collection with the <code>transactionid</code> you&#39;re looking for,"}, {"owner": {"reputation": 177, "user_id": 5649717, "user_type": "registered", "profile_image": "https://graph.facebook.com/963955006998290/picture?type=large", "display_name": "Yudistira Sugandi", "link": "https://stackoverflow.com/users/5649717/yudistira-sugandi"}, "reply_to_user": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 0, "creation_date": 1548599758, "post_id": 54389036, "comment_id": 95590380, "body": "I get $id value from param.. <code>my $id = $query-&gt;param(&#39;trx_id&#39;);</code> and there is element in my collection with <code>transactionid</code> I&#39;m looking for :D"}, {"owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 0, "creation_date": 1548600955, "post_id": 54389036, "comment_id": 95590769, "body": "Does the query work with <code>$id</code> set to a hardcoded value? Try <code>my $id = &#39;1234&#39;;</code> (or whatever the value is) to see if it works. Also, <code>-&gt;find_one</code> does not return an iterator but the document itself."}, {"owner": {"reputation": 177, "user_id": 5649717, "user_type": "registered", "profile_image": "https://graph.facebook.com/963955006998290/picture?type=large", "display_name": "Yudistira Sugandi", "link": "https://stackoverflow.com/users/5649717/yudistira-sugandi"}, "reply_to_user": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 0, "creation_date": 1548602053, "post_id": 54389036, "comment_id": 95591122, "body": "still the same and I just changed my code... XD"}], "answers": [{"comments": [{"owner": {"reputation": 177, "user_id": 5649717, "user_type": "registered", "profile_image": "https://graph.facebook.com/963955006998290/picture?type=large", "display_name": "Yudistira Sugandi", "link": "https://stackoverflow.com/users/5649717/yudistira-sugandi"}, "edited": false, "score": 0, "creation_date": 1548607788, "post_id": 54390163, "comment_id": 95592893, "body": "I got this response <code>$VAR1 = undef;</code> .-. actually I use this for cgi-perl.."}, {"owner": {"reputation": 333, "user_id": 4220763, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6AuCF.jpg?s=128&g=1", "display_name": "Hannibal", "link": "https://stackoverflow.com/users/4220763/hannibal"}, "reply_to_user": {"reputation": 177, "user_id": 5649717, "user_type": "registered", "profile_image": "https://graph.facebook.com/963955006998290/picture?type=large", "display_name": "Yudistira Sugandi", "link": "https://stackoverflow.com/users/5649717/yudistira-sugandi"}, "edited": false, "score": 0, "creation_date": 1548608210, "post_id": 54390163, "comment_id": 95593016, "body": "@YudistiraSugandi check your query. In the code you provided there&#39;s no a value assignment to <code>$id</code>.. is it a typo error? BTW the answer of @davecross is correct."}, {"owner": {"reputation": 177, "user_id": 5649717, "user_type": "registered", "profile_image": "https://graph.facebook.com/963955006998290/picture?type=large", "display_name": "Yudistira Sugandi", "link": "https://stackoverflow.com/users/5649717/yudistira-sugandi"}, "edited": false, "score": 0, "creation_date": 1548608310, "post_id": 54390163, "comment_id": 95593057, "body": "I got it from <code>my $id = $query-&gt;param(&#39;trx_id&#39;);</code> , and I don&#39;t know why I got undef value..."}, {"owner": {"reputation": 177, "user_id": 5649717, "user_type": "registered", "profile_image": "https://graph.facebook.com/963955006998290/picture?type=large", "display_name": "Yudistira Sugandi", "link": "https://stackoverflow.com/users/5649717/yudistira-sugandi"}, "edited": false, "score": 0, "creation_date": 1548608688, "post_id": 54390163, "comment_id": 95593158, "body": "and I got new error like this <code>MongoDB::DecodingError: Invalid UTF-8 detected while decoding BSON at &#47;usr&#47;lib&#47;x86_64-linux-gnu&#47;perl5&#47;5.24&#47;MongoDB&#47;BSON.pm</code>"}, {"owner": {"reputation": 333, "user_id": 4220763, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6AuCF.jpg?s=128&g=1", "display_name": "Hannibal", "link": "https://stackoverflow.com/users/4220763/hannibal"}, "edited": false, "score": 0, "creation_date": 1548608800, "post_id": 54390163, "comment_id": 95593198, "body": "<code>$query-&gt;param</code> smells of a query string parameter got using the CGI module. Well.. I guess the problem is in the input data at HTTP layer, so focus your debug on that direction. Check the data received by your web request handler, and why the <code>trx_id</code> parameter is empty."}, {"owner": {"reputation": 333, "user_id": 4220763, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6AuCF.jpg?s=128&g=1", "display_name": "Hannibal", "link": "https://stackoverflow.com/users/4220763/hannibal"}, "reply_to_user": {"reputation": 177, "user_id": 5649717, "user_type": "registered", "profile_image": "https://graph.facebook.com/963955006998290/picture?type=large", "display_name": "Yudistira Sugandi", "link": "https://stackoverflow.com/users/5649717/yudistira-sugandi"}, "edited": false, "score": 0, "creation_date": 1548609021, "post_id": 54390163, "comment_id": 95593267, "body": "@YudistiraSugandi this is not a real time support chat. Please, detail you problem with a complete example and , if needed, open a new post for it for avoiding confusion."}, {"owner": {"reputation": 177, "user_id": 5649717, "user_type": "registered", "profile_image": "https://graph.facebook.com/963955006998290/picture?type=large", "display_name": "Yudistira Sugandi", "link": "https://stackoverflow.com/users/5649717/yudistira-sugandi"}, "edited": false, "score": 0, "creation_date": 1548609109, "post_id": 54390163, "comment_id": 95593295, "body": "actually, this answer is correct, I got invalid utf8 because there are invalid utf8 in my mongodb data... :D"}], "tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": true, "score": 1, "last_activity_date": 1548605581, "creation_date": 1548605581, "answer_id": 54390163, "question_id": 54389036, "link": "https://stackoverflow.com/questions/54389036/cant-get-data-from-mongodb-using-perl-get-undefined-value/54390163#54390163", "title": "can&#39;t get data from mongodb using perl (get undefined value)", "body": "<p>I think you're misunderstanding the value returned by <code>find_one()</code>. There's a big clue in the name, but <code>find_one()</code> returns a single record, not an iterator.</p>\n\n<p>Obviously, I don't have access to your data, so I can't confirm this, but I expect you'll get what you want by running this code:</p>\n\n<pre><code>my $client = MongoDB::MongoClient-&gt;new(\n  host     =&gt; 'mongodb://xxx.xxx.xxx.xxx',\n  port     =&gt; 27017,\n  username =&gt; 'xxxx', \n  password =&gt; 'xxxx',\n);\n\nmy $db = $client-&gt;get_database(\"xxx\");\nmy $collection = $db-&gt;get_collection(\"xxx\");\n\nmy $person = $collection-&gt;find_one({\"transactionid\" =&gt; $id});\nprint Dumper $person;\n</code></pre>\n"}], "owner": {"reputation": 177, "user_id": 5649717, "user_type": "registered", "profile_image": "https://graph.facebook.com/963955006998290/picture?type=large", "display_name": "Yudistira Sugandi", "link": "https://stackoverflow.com/users/5649717/yudistira-sugandi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 73, "favorite_count": 0, "accepted_answer_id": 54390163, "answer_count": 1, "score": 1, "last_activity_date": 1548605623, "creation_date": 1548598370, "last_edit_date": 1548605623, "question_id": 54389036, "link": "https://stackoverflow.com/questions/54389036/cant-get-data-from-mongodb-using-perl-get-undefined-value", "title": "can&#39;t get data from mongodb using perl (get undefined value)", "body": "<p>I am trying to get data from mongodb using perl, but I get undefined value for variable <code>$people</code></p>\n\n<pre><code>my $client = MongoDB::MongoClient-&gt;new(host =&gt; \n'mongodb://xxx.xxx.xxx.xxx',port=&gt;27017, username =&gt; 'xxxx', \npassword =&gt; 'xxxx');\nmy $db = $client-&gt;get_database(\"xxx\");\nmy $collection = $db-&gt;get_collection(\"xxx\");\nmy $people = $collection-&gt;find_one({\"transactionid\" =&gt; $id});\nwhile (my $p = $people-&gt;next) {\n    print Dumper $p;\n} \n</code></pre>\n\n<p>and I want to get this data : </p>\n\n<pre><code>{\n    \"_id\" : ObjectId(\"5c453500e2fb4adc98e9fa84\"),\n    \"transactionid\" : NumberLong(45282),\n    \"transactionbillerid\" : NumberLong(43137),\n    \"requesttime\" : ISODate(\"2019-01-21T02:57:04.923Z\"),\n    \"requestmessage\" : \"xxxxxxxx\",\n    \"responsetime\" : ISODate(\"2019-01-21T02:57:05.236Z\"),\n    \"responsemessage\" : \"xxx\"\n}\n</code></pre>\n\n<p>any suggestions, is there something wrong with my code ?</p>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1548576424, "post_id": 54386096, "comment_id": 95584685, "body": "Re &quot;<i>I would like to write a perl script</i>&quot; --- then do so! I&#39;d suggest to not worry about translating some random code you find around, but rather work it out yourself.  If in the process you need a programming (and/or Perl) tutorial, even better.  (Also, one-liners in particular are often poor sources to use for learning as they rely on tricks to keep things short.)"}, {"owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 5, "creation_date": 1548577099, "post_id": 54386096, "comment_id": 95584819, "body": "A good first start for getting a rough outline of a script from a oneliner is to use the <code>B::Deparse</code> module: <code>perl -MO=Deparse -ape &#39;$k=&quot;@F[0..2]&quot;; $_=&quot; $F[3]&quot;,next if $k eq $o; $_= &quot;\\n@F&quot;;$o=$k&#39; filename</code>. You will still need to learn how to program though."}], "answers": [{"tags": [], "owner": {"reputation": 2833, "user_id": 9300627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7a38cf029222bcf1d902e6b2759ffeb?s=128&d=identicon&r=PG", "display_name": "haukex", "link": "https://stackoverflow.com/users/9300627/haukex"}, "is_accepted": false, "score": 2, "last_activity_date": 1548593062, "creation_date": 1548593062, "answer_id": 54388229, "question_id": 54386096, "link": "https://stackoverflow.com/questions/54386096/convert-perl-one-liner-to-script/54388229#54388229", "title": "Convert perl one liner to script", "body": "<p>As @Corion said, <a href=\"http://perldoc.perl.org/B/Deparse.html\" rel=\"nofollow noreferrer\"><code>B::Deparse</code></a> can help here.</p>\n\n<pre><code>$ perl -MO=Deparse -ape '$k=\"@F[0..2]\"; $_=\" $F[3]\",next if $k eq $o; $_= \"\\n@F\";$o=$k'\nLINE: while (defined($_ = readline ARGV)) {\n    our @F = split(' ', $_, 0);\n    $k = join($\", @F[0..2]);\n    $_ = \" $F[3]\", next if $k eq $o;\n    $_ = \"\\n@F\";\n    $o = $k;\n}\ncontinue {\n    die \"-p destination: $!\\n\" unless print $_;\n}\n</code></pre>\n\n<p>Cleaning that up into a pretty much equivalent script:</p>\n\n<pre><code>#!/usr/bin/env perl\nuse warnings;\nuse strict;\n\nmy $o;\nwhile ( my $line = &lt;&gt; ) {\n    my @fields = split ' ', $line;\n    my $k = \"@fields[0..2]\";\n    if (defined $o &amp;&amp; $k eq $o) {\n        $line = \" $fields[3]\";\n        next;\n    }\n    $line = \"\\n@fields\";\n    $o = $k;\n} continue { print $line }\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 10974026, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/369cd334891bcaaf46cb31f9c8735f43?s=128&d=identicon&r=PG&f=1", "display_name": "Vijay Vincent Peris", "link": "https://stackoverflow.com/users/10974026/vijay-vincent-peris"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 134, "favorite_count": 1, "answer_count": 1, "score": -2, "last_activity_date": 1548593062, "creation_date": 1548575116, "last_edit_date": 1548575223, "question_id": 54386096, "link": "https://stackoverflow.com/questions/54386096/convert-perl-one-liner-to-script", "title": "Convert perl one liner to script", "body": "<p>I am Vijay and i am a student and very much interested to learn perl scripting.\nI was learning about perl on liner. \nI would like to write a perl script that goes through the file line by line and compares each line with the previous line (or next line) to look for matching values in the first 3 columns. Then I would like to print the values in the first three columns only once, with the fourth column value pushed on as new column.For example</p>\n\n<pre><code>1 760605 769233 15.65  \n1 760605 769233 44.11  \n1 760605 769233 18.5 \n</code></pre>\n\n<p>Output should be</p>\n\n<pre><code>1 760605 769233 15.65 44.11 18.5\n</code></pre>\n\n<p>The one liner for this is </p>\n\n<pre><code>perl -ape '$k=\"@F[0..2]\"; $_=\" $F[3]\",next if $k eq $o; $_= \"\\n@F\";$o=$k' filename\n</code></pre>\n\n<p>Here i want to covert this into script and run that script. If i get to know how to convert this above one liner to scripting it will be great full and i can implement the same logic to others also.</p>\n\n<p>Thank you.</p>\n"}, {"tags": ["mysql", "sql", "perl"], "comments": [{"owner": {"reputation": 117184, "user_id": 9473764, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aGMXl.jpg?s=128&g=1", "display_name": "Nick", "link": "https://stackoverflow.com/users/9473764/nick"}, "edited": false, "score": 0, "creation_date": 1548568401, "post_id": 54385315, "comment_id": 95583379, "body": "I presume there&#39;s no <code>user_id</code> field in the <code>persons</code> or <code>company</code> table?"}, {"owner": {"reputation": 75, "user_id": 9797162, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Ben Jenney", "link": "https://stackoverflow.com/users/9797162/ben-jenney"}, "reply_to_user": {"reputation": 117184, "user_id": 9473764, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aGMXl.jpg?s=128&g=1", "display_name": "Nick", "link": "https://stackoverflow.com/users/9473764/nick"}, "edited": false, "score": 0, "creation_date": 1548569465, "post_id": 54385315, "comment_id": 95583525, "body": "there is a foreign key field in <code>persons</code>, but none in the <code>company</code> table."}, {"owner": {"reputation": 117184, "user_id": 9473764, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aGMXl.jpg?s=128&g=1", "display_name": "Nick", "link": "https://stackoverflow.com/users/9473764/nick"}, "edited": false, "score": 0, "creation_date": 1548569541, "post_id": 54385315, "comment_id": 95583544, "body": "So are you sure it&#39;s not that query causing the error? If it&#39;s a foreign key I&#39;m guessing it doesn&#39;t have a default value."}, {"owner": {"reputation": 75, "user_id": 9797162, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Ben Jenney", "link": "https://stackoverflow.com/users/9797162/ben-jenney"}, "reply_to_user": {"reputation": 117184, "user_id": 9473764, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aGMXl.jpg?s=128&g=1", "display_name": "Nick", "link": "https://stackoverflow.com/users/9473764/nick"}, "edited": false, "score": 0, "creation_date": 1548569772, "post_id": 54385315, "comment_id": 95583590, "body": "im sorry, but there is a user_id field. <code>user_id INT NOT NULL</code>"}, {"owner": {"reputation": 75, "user_id": 9797162, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Ben Jenney", "link": "https://stackoverflow.com/users/9797162/ben-jenney"}, "reply_to_user": {"reputation": 117184, "user_id": 9473764, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aGMXl.jpg?s=128&g=1", "display_name": "Nick", "link": "https://stackoverflow.com/users/9473764/nick"}, "edited": false, "score": 0, "creation_date": 1548569876, "post_id": 54385315, "comment_id": 95583603, "body": "thank you I didn&#39;t consider that. Should I set it to auto_increment in <code>persons</code> also? I appreciate the help, this is my first internship so I am new to this stuff."}, {"owner": {"reputation": 117184, "user_id": 9473764, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aGMXl.jpg?s=128&g=1", "display_name": "Nick", "link": "https://stackoverflow.com/users/9473764/nick"}, "edited": false, "score": 2, "creation_date": 1548570004, "post_id": 54385315, "comment_id": 95583623, "body": "If that field is a foreign key pointing to <code>users</code>, you will need to do the insert into <code>users</code> first, then get the new <code>user_id</code> field from there (look into <code>last_insert_id</code>) and use that in the insert into the <code>persons</code> table. If it&#39;s not a foreign key, setting it to <code>auto_increment</code> should be fine."}, {"owner": {"reputation": 75, "user_id": 9797162, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Ben Jenney", "link": "https://stackoverflow.com/users/9797162/ben-jenney"}, "reply_to_user": {"reputation": 117184, "user_id": 9473764, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aGMXl.jpg?s=128&g=1", "display_name": "Nick", "link": "https://stackoverflow.com/users/9473764/nick"}, "edited": false, "score": 0, "creation_date": 1548571393, "post_id": 54385315, "comment_id": 95583863, "body": "I&#39;ve been at this for the last ten hours, and am just about going cross eyed! <code>FOREIGN KEY (user_id) REFERENCES users(user_id)</code> it is indeed a foreign key, I tried moving the handle for the <code>$usersQuery</code> to prepare and execute before the <code>$personsQuery</code> but to no avail."}, {"owner": {"reputation": 117184, "user_id": 9473764, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aGMXl.jpg?s=128&g=1", "display_name": "Nick", "link": "https://stackoverflow.com/users/9473764/nick"}, "edited": false, "score": 1, "creation_date": 1548574275, "post_id": 54385315, "comment_id": 95584306, "body": "You&#39;ll need to get the <code>last_insert_id</code> from the insert into <code>users</code> and then add that value to the insert into <code>persons</code> query."}, {"owner": {"reputation": 75, "user_id": 9797162, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Ben Jenney", "link": "https://stackoverflow.com/users/9797162/ben-jenney"}, "reply_to_user": {"reputation": 117184, "user_id": 9473764, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aGMXl.jpg?s=128&g=1", "display_name": "Nick", "link": "https://stackoverflow.com/users/9473764/nick"}, "edited": false, "score": 0, "creation_date": 1548608346, "post_id": 54385315, "comment_id": 95593070, "body": "Fell asleep as it was late where I am. Thank you! so much!"}], "answers": [{"comments": [{"owner": {"reputation": 117184, "user_id": 9473764, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aGMXl.jpg?s=128&g=1", "display_name": "Nick", "link": "https://stackoverflow.com/users/9473764/nick"}, "edited": false, "score": 0, "creation_date": 1548590431, "post_id": 54387617, "comment_id": 95587833, "body": "Thanks for answering, I could see the problem but didn&#39;t know <code>perl</code> well enough to produce one."}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 1, "creation_date": 1548703905, "post_id": 54387617, "comment_id": 95628783, "body": "You can also get the last insert ID and thus not need to depend on the username to find the inserted ID by running <code>SELECT LAST_INSERT_ID()</code> or calling <code>$dbh-&gt;last_insert_id</code> after running the first <code>INSERT</code>."}], "tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": true, "score": 1, "last_activity_date": 1548596129, "last_edit_date": 1548596129, "creation_date": 1548588352, "answer_id": 54387617, "question_id": 54385315, "link": "https://stackoverflow.com/questions/54385315/auto-increment-not-setting-value-for-primary-key/54387617#54387617", "title": "auto_increment not setting value for primary key?", "body": "<p>If your <code>persons</code> table has a foreign key to the <code>users</code> table then you need insert the <code>users</code> record first, then get the id of the new <code>users</code> record and add that to the SQL to insert the <code>persons</code> record.</p>\n\n<p>Something like this:</p>\n\n<pre><code>my $usersQuery   = \"INSERT INTO users (username, account_password) VALUES (?,?)\";\n$sth      = $dbh-&gt;prepare($usersQuery);\n$sth-&gt;execute($email, $encpswrd);\n\n$sth = $dbh-&gt;prepare('SELECT user_id FROM users WHERE username = ?');\n$sth-&gt;execute($email);\nmy $user_id = $sth-&gt;fetch-&gt;[0];\n\nmy $personsQuery = \"INSERT INTO persons (user_id ,first_name, last_name) VALUES (?,?,?)\";\n$sth   = $dbh-&gt;prepare($personsQuery); \n$sth-&gt;execute($user_id, $fName, $lName);\n</code></pre>\n\n<p>This is an area where <a href=\"https://metacpan.org/pod/distribution/DBIx-Class/lib/DBIx/Class.pod\" rel=\"nofollow noreferrer\">DBIx::Class</a> will definitely make your life easier.</p>\n"}], "owner": {"reputation": 75, "user_id": 9797162, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Ben Jenney", "link": "https://stackoverflow.com/users/9797162/ben-jenney"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 66, "favorite_count": 0, "accepted_answer_id": 54387617, "answer_count": 1, "score": 0, "last_activity_date": 1548596129, "creation_date": 1548566527, "question_id": 54385315, "link": "https://stackoverflow.com/questions/54385315/auto-increment-not-setting-value-for-primary-key", "title": "auto_increment not setting value for primary key?", "body": "<p>I'm baffled, when I use the terminal (mysql) and insert into <code>username</code>,<code>account_password</code> columns, user_id AUTO_INCREMENTS just as it should.</p>\n\n<p>my table: </p>\n\n<pre><code>        CREATE TABLE users (\n  user_id int NOT NULL  AUTO_INCREMENT,\n  user_type VARCHAR(20) NULL,\n  creation_date TIMESTAMP NOT NULL,\n  username VARCHAR(100) NOT  NULL,\n  account_password VARCHAR(255) NOT NULL,\n  PRIMARY KEY (user_id)\n);\n</code></pre>\n\n<p>yet when I use this script: </p>\n\n<pre><code>use strict;\nuse warnings FATAL =&gt; 'all';# good for debugging, FATAL kills program so warnings are more identifiable\nuse CGI qw/:standard/;\nuse CGI::Carp qw(fatalsToBrowser); # good for debugging, sends info to browser\nuse DBI;\nuse DBD::mysql;\nuse Digest::SHA qw(sha256);\n\nprint header, start_html;\nmy $fName    = param('firstName');\nmy $lName    = param('lastName');\nmy $compName = param('compName');\nmy $email    = param('email');\nmy $pswrd    = param('password');\nmy $cnfPswrd = param('confPassword');\nmy $encpswrd = \"\";\n\n#check passwords match, if not display error, and exit script\nif ($pswrd eq $cnfPswrd) {\n    $encpswrd = sha256($pswrd);\n} else {\n    print \"Passwords did not match! refresh form!\";\n    exit;\n}\n\n#database credentials, to be changed accordingly\nmy $database = \"intsystest\";\nmy $host     = \"localhost\";\nmy $user     = \"root\";\nmy $pw       = \"password\";\nmy $dsn      = \"dbi:mysql:$database:localhost:3306\";\n\n#connect to database\nmy $dbh      = DBI-&gt;connect($dsn, $user, $pw,\n                           { RaiseError =&gt; 1 }) or die \"unable to connect:$DBI::errstr\\n\"; # &lt;- this line good for debugging\n\n#create, prepare, execute query, disconnect from DB\nmy $personsQuery = \"INSERT INTO persons (first_name, last_name) VALUES (?,?)\";\nmy $compQuery    = \"INSERT INTO company (company_name) VALUES (?)\";\nmy $usersQuery   = \"INSERT INTO users (username, account_password) VALUES (?,?)\";\n\nmy $sth   = $dbh-&gt;prepare($personsQuery); \n$sth-&gt;execute($fName, $lName);\n$sth      = $dbh-&gt;prepare($compQuery);\n$sth-&gt;execute($compName);\n$sth      = $dbh-&gt;prepare($usersQuery);\n$sth-&gt;execute($email, $encpswrd);\n$dbh -&gt; disconnect;\n\n# additional processing as needed ...\n\nprint end_html;\n</code></pre>\n\n<p>I get this error:</p>\n\n<pre><code> DBD::mysql::st execute failed: Field 'user_id' doesn't have a default value at /usr/lib/cgi-bin/compSignUpDBCGI.pl line 44.\n</code></pre>\n\n<p>I'm assuming it's likely something wrong with the handler. What am I missing??</p>\n"}, {"tags": ["regex", "bash", "perl", "awk", "data-science"], "comments": [{"owner": {"reputation": 10314, "user_id": 6124411, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4E3zE.jpg?s=128&g=1", "display_name": "cody", "link": "https://stackoverflow.com/users/6124411/cody"}, "edited": false, "score": 4, "creation_date": 1548550926, "post_id": 54384189, "comment_id": 95581311, "body": "So why is the <code>SD</code> entry in the desired output as an oddball, while the <code>E B</code> entry is not?"}, {"owner": {"reputation": 3409, "user_id": 424747, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/c186b6b71d44c1c7f36878c9e60f71e0?s=128&d=identicon&r=PG", "display_name": "Bubnoff", "link": "https://stackoverflow.com/users/424747/bubnoff"}, "reply_to_user": {"reputation": 10314, "user_id": 6124411, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4E3zE.jpg?s=128&g=1", "display_name": "cody", "link": "https://stackoverflow.com/users/6124411/cody"}, "edited": false, "score": 0, "creation_date": 1548565763, "post_id": 54384189, "comment_id": 95583077, "body": "@cody I&#39;m debating as to how to present the data. I think I should pull them out and present them separately as my math routines aren&#39;t going to produce anything of value, given that they will be missing crucial fields."}], "answers": [{"comments": [{"owner": {"reputation": 3409, "user_id": 424747, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/c186b6b71d44c1c7f36878c9e60f71e0?s=128&d=identicon&r=PG", "display_name": "Bubnoff", "link": "https://stackoverflow.com/users/424747/bubnoff"}, "edited": false, "score": 0, "creation_date": 1548565577, "post_id": 54384439, "comment_id": 95583052, "body": "It&#39;s tab delimited."}, {"owner": {"reputation": 3409, "user_id": 424747, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/c186b6b71d44c1c7f36878c9e60f71e0?s=128&d=identicon&r=PG", "display_name": "Bubnoff", "link": "https://stackoverflow.com/users/424747/bubnoff"}, "edited": false, "score": 0, "creation_date": 1548565957, "post_id": 54384439, "comment_id": 95583101, "body": "I&#39;m not sure your <code>grep -f</code> would work in the case where <code>E</code> is canonical and <code>E B</code> is a cataloger mistake in the file. This is what I keep running into."}, {"owner": {"reputation": 3409, "user_id": 424747, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/c186b6b71d44c1c7f36878c9e60f71e0?s=128&d=identicon&r=PG", "display_name": "Bubnoff", "link": "https://stackoverflow.com/users/424747/bubnoff"}, "edited": false, "score": 0, "creation_date": 1548566043, "post_id": 54384439, "comment_id": 95583107, "body": "Ah -- I get it. You added the REGEX in the codes file. Smart! OK."}, {"owner": {"reputation": 3409, "user_id": 424747, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/c186b6b71d44c1c7f36878c9e60f71e0?s=128&d=identicon&r=PG", "display_name": "Bubnoff", "link": "https://stackoverflow.com/users/424747/bubnoff"}, "edited": false, "score": 0, "creation_date": 1548567090, "post_id": 54384439, "comment_id": 95583200, "body": "I will test soon and hit the checkmark upon success. Pretty sure this will work. The REGEX in the codes file pretty much slam dunks this and massively reduces fragility. In the meantime ...upvoted! Thanks!"}, {"owner": {"reputation": 3409, "user_id": 424747, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/c186b6b71d44c1c7f36878c9e60f71e0?s=128&d=identicon&r=PG", "display_name": "Bubnoff", "link": "https://stackoverflow.com/users/424747/bubnoff"}, "edited": false, "score": 0, "creation_date": 1548798717, "post_id": 54384439, "comment_id": 95670364, "body": "Breaks on <code>E B</code> but I swapped out <code>\\s</code> with <code>\\t</code> and it works now."}], "tags": [], "owner": {"reputation": 10314, "user_id": 6124411, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4E3zE.jpg?s=128&g=1", "display_name": "cody", "link": "https://stackoverflow.com/users/6124411/cody"}, "is_accepted": true, "score": 4, "last_activity_date": 1548555698, "last_edit_date": 1548555698, "creation_date": 1548553949, "answer_id": 54384439, "question_id": 54384189, "link": "https://stackoverflow.com/questions/54384189/bash-clean-and-merge-data/54384439#54384439", "title": "bash: clean and merge data", "body": "<p>Your question says the data is csv, but based on your samples I'm assuming it's tsv. I'm also assuming <code>E B</code> should end up in the outlier output and that NA values should be filled with <code>0</code>.</p>\n\n<p>Given those assumptions, the following may be sufficient:</p>\n\n<pre><code>sort -t $'\\t' -k 1b,1 fileA &gt; fileA.sorted &amp;&amp; sort -t $'\\t' -k 1b,1 fileB &gt; fileB.sorted\njoin -t $'\\t' -a1 -a2 -e0 -o auto fileA.sorted fileB.sorted &gt; out\ngrep -f codes out &gt; out-canon\ngrep -vf codes out &gt; out-oddball\n</code></pre>\n\n<p>The content of file <code>codes</code>:</p>\n\n<pre><code>^B\\s\n^CO\\s\n^ZX\\s\n^J\\s\n^EB\\s\n</code></pre>\n\n<p>Result:</p>\n\n<pre>\n$ cat out-canon\nB       547     5\nCO      8900    76\nEB      289     10\nJ       65      54\nZX      7       67\n\n$ cat out-oddball\nE B     1       0\nSD      0       4\n</pre>\n"}, {"tags": [], "owner": {"reputation": 4739, "user_id": 5403468, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZJ8BE.jpg?s=128&g=1", "display_name": "Tiw", "link": "https://stackoverflow.com/users/5403468/tiw"}, "is_accepted": false, "score": 1, "last_activity_date": 1548557231, "creation_date": 1548557231, "answer_id": 54384649, "question_id": 54384189, "link": "https://stackoverflow.com/questions/54384189/bash-clean-and-merge-data/54384649#54384649", "title": "bash: clean and merge data", "body": "<p>Try this(GNU awk):</p>\n\n<pre><code>awk 'BEGIN{FS=OFS=\"\\t\";}ARGIND==1{c[$1]++;}ARGIND==2{b[$1]=$2}ARGIND==3{if (c[$1]) {print $1,$2,b[$1]+0; delete b[$1];} else {if(tolower($1)~\"[a-z]+ +[a-z]+\")print&gt;\"error.fileA\"; else print&gt;\"oddball.fileA\";}}END{for (i in b) {print i,0,b[i] \" (? maybe?)\";print i,b[i] &gt; \"oddball.fileB\";}}' codes fileB fileA\n</code></pre>\n\n<p>It will create <code>error.fileA</code>, <code>oddball.fileA</code> if such lines exists, <code>oddball.fileB</code>.<br>\nNormal output didn't write to file, you can write with <code>&gt;</code> yourself when results are ok:</p>\n\n<pre><code>B   547 5\nJ   65  54\nEB  289 10\nCO  8900    76\nZX  7   67\nSD  0   4 (? maybe?)\n</code></pre>\n\n<p>Had a hard time reading your description, not sure if this is what you want.<br>\nAnyway it's easy to improve this awk code.  </p>\n\n<p>You can change to <code>FILENAME==\"file1\"</code>, or <code>FILENAME==ARGV[1]</code> if <code>ARGIND</code> is not working.</p>\n"}], "owner": {"reputation": 3409, "user_id": 424747, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/c186b6b71d44c1c7f36878c9e60f71e0?s=128&d=identicon&r=PG", "display_name": "Bubnoff", "link": "https://stackoverflow.com/users/424747/bubnoff"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 110, "favorite_count": 0, "accepted_answer_id": 54384439, "answer_count": 2, "score": 0, "last_activity_date": 1548566165, "creation_date": 1548550145, "last_edit_date": 1548566165, "question_id": 54384189, "link": "https://stackoverflow.com/questions/54384189/bash-clean-and-merge-data", "title": "bash: clean and merge data", "body": "<p>I have three csv files containing different data for a common object. These represent data about distinct collections of items at work. These objects have unique codes. The number of files is not important so I will set this problem up with two. I have a handy recipe for joining these files using <code>join</code> -- but the cleaning part is killing me.</p>\n\n<p>File A snippet - contains unique data. Also the cataloging error <code>E B</code>.</p>\n\n<pre><code>B    547\nJ    65\nEB   289\nE B  1\nCO   8900\nZX   7\n</code></pre>\n\n<p>File B snippet - unique data about a different dimension of the objects.</p>\n\n<pre><code>B    5\nZX   67\nSD   4\nCO   76\nJ    54\nEB   10\n</code></pre>\n\n<p>Note that file B contains a code not in common with file A.</p>\n\n<p>Now I submit to you the \"official\" canon of codes designated for this set of objects:</p>\n\n<pre><code>B\nCO\nZX\nJ\nEB\n</code></pre>\n\n<p>Note that File B contains a non-canonical code with data. It needs to be captured and documented. Same with bad code in file A.</p>\n\n<p>End goal: run trend and stats on the collections using the various fields from the multiple reports. They mostly match the canon but there are oddballs due to cataloging errors and codes that are no longer in use.</p>\n\n<p>End goal result after merge/join:</p>\n\n<pre><code>B    547    5\nJ    65     54\nEB   289    10\nCO   8900   76\nZX   7      67\n</code></pre>\n\n<p>So my first idea was to use <code>grep -F -f</code> for this, using the canonical codes as a search list then merge with <code>join</code>. Problem is, with one letter codes it's too inclusive. It would seem like a job for <code>awk</code> where it can work with <code>tab</code> delimiters and <code>REGEX</code> the oddball codes. I'm not sure though, how to get <code>awk</code> to use a list to sift other files. Will <code>join</code> alone handle all this? Maybe I merge with <code>join</code> or <code>paste</code>, then sift out the weirdos? Which method is the least brittle and more likely to handle edge cases like the drunk cataloger?</p>\n\n<p>If you're thinking, \"Dude, this is better done with Perl or Python ...etc.\". I'm all ears. No rules, I just need to deliver!</p>\n"}, {"tags": ["html", "regex", "perl"], "comments": [{"owner": {"reputation": 82895, "user_id": 372239, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/2twLb.jpg?s=128&g=1", "display_name": "Toto", "link": "https://stackoverflow.com/users/372239/toto"}, "edited": false, "score": 0, "creation_date": 1548607797, "post_id": 54381253, "comment_id": 95592897, "body": "<a href=\"https://stackoverflow.com/a/4234491/372239\">Parsing HTML with regex is hard job</a>"}], "answers": [{"tags": [], "owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "is_accepted": false, "score": 5, "last_activity_date": 1548606512, "last_edit_date": 1548606512, "creation_date": 1548530388, "answer_id": 54381890, "question_id": 54381253, "link": "https://stackoverflow.com/questions/54381253/regex-get-column-information-based-on-other-column/54381890#54381890", "title": "Regex get column information based on other column", "body": "<p>Don't use regexes to parse HTML. Use a HTML parser to convert the HTML to a DOM tree. Then perform your operations in the DOM domain. E.g.</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>use HTML::TreeParser;\n\nmy $parser = HTML::TreeParser-&gt;new;\nmy $root   = $parser-&gt;parse_content($html_string);\n\nmy $table = $root-&gt;look_down(_tag =&gt; 'table');\nmy @rows  = $table-&gt;look_down(_tag =&gt; 'tr');\nfor my $row (@rows) {\n    # perform your row operation here using HTML::Element methods\n    # search, replace, insert, modify content...\n\n    my @columns = $row-&gt;look_down(_tag =&gt; 'tr');\n\n    # we need 1st (Name) and 4th (Values) column\n    if (@columns &gt;= 4) {\n        if ($column[0]-&gt;as_trimmed_text() eq \"Phone\") {\n            my $number = $column[3]-&gt;as_trimmed_text();\n            ...\n        }\n    }\n}\n\n# if you need to dump the modified tree again...\nprint $root-&gt;as_HTML();\n\n# IMPORTANT: must be done after done with DOM tree!\n$root-&gt;delete();\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 1, "last_activity_date": 1548587695, "creation_date": 1548587695, "answer_id": 54387530, "question_id": 54381253, "link": "https://stackoverflow.com/questions/54381253/regex-get-column-information-based-on-other-column/54387530#54387530", "title": "Regex get column information based on other column", "body": "<p>Parsing HTML with a regex is a terrible idea. My current weapon of choice when parsing HTML is <a href=\"https://metacpan.org/pod/Web::Query\" rel=\"nofollow noreferrer\">Web::Query</a>.</p>\n\n<p>My approach would be to parse the table into a suitable data structure which then allows you to extract the data you want.</p>\n\n<p>Something like this, perhaps...</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\nuse feature 'say';\n\nuse Data::Dumper;\nuse Path::Tiny;\nuse Web::Query;\n\n# Get the HTML. I'm reading it from a file, you might\n# need to make an HTTP request.\nmy $html = path('table.html')-&gt;slurp;\n\n# Parse the HTML.\nmy $wq = wq($html);\n\n# Extract the text from all of the &lt;th&gt; elements.\n# These will be the keys of our hash.\nmy @cols;\n$wq-&gt;find('th')-&gt;each(sub { push @cols, $_-&gt;text });\n\n# A hash to store our data\nmy %data;\n\n# Find all of the &lt;tr&gt; elements in the HTML\n$wq-&gt;find('tr')-&gt;each(sub {\n  # Each table row will be a sub-hash in our hash\n  my %rec;\n  # Find each &lt;td&gt; element in the row.\n  # For each element, get the text and match it with the column header.\n  # Store the key/value pair in a hash.\n  $_-&gt;find('td')-&gt;each(sub {\n    my ($i, $elem) = @_;\n    my $key = $cols[$i];\n    $rec{$key} = $elem-&gt;text;\n  });\n  # If we have data, then store it in the main hash.\n  $data{$rec{Name}} = \\%rec if $rec{Name};\n});\n\n# Show what we've made.\nsay Dumper \\%data;\n\n# A sample query which extracts all of the values\n# from the data structure.\nfor (keys %data) {\n  say \"$_ is $data{$_}{Values}\";\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "is_accepted": false, "score": 2, "last_activity_date": 1548704878, "creation_date": 1548704878, "answer_id": 54409244, "question_id": 54381253, "link": "https://stackoverflow.com/questions/54381253/regex-get-column-information-based-on-other-column/54409244#54409244", "title": "Regex get column information based on other column", "body": "<p>A <a href=\"https://metacpan.org/pod/Mojo::DOM\" rel=\"nofollow noreferrer\">Mojo::DOM</a> option:</p>\n\n<pre><code>use strict;\nuse warnings;\nuse Mojo::DOM;\nuse List::Util 'first';\n\nmy $dom = Mojo::DOM-&gt;new($html);\nmy $query = 'phone';\n\nmy @cols = $dom-&gt;at('tr')-&gt;find('th')-&gt;map('text')-&gt;each;\nmy $name_col = 1 + first { $cols[$_] eq 'Name' } 0..$#cols;\nmy $values_col = 1 + first { $cols[$_] eq 'Values' } 0..$#cols;\n\nmy $row = $dom-&gt;find('tr')-&gt;first(sub {\n  my $name = $_-&gt;at(\"td:nth-of-type($name_col)\");\n  defined $name and $name-&gt;text =~ m/\\Q$query\\E/i;\n});\n\nif (defined $row) {\n  my $values = $row-&gt;at(\"td:nth-of-type($values_col)\")-&gt;text;\n  print \"Values: $values\\n\";\n} else {\n  print \"Not found\\n\";\n}\n</code></pre>\n"}], "owner": {"reputation": 71, "user_id": 10068608, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/639cd2d504b673ab1febc181a6bcf619?s=128&d=identicon&r=PG&f=1", "display_name": "Amir", "link": "https://stackoverflow.com/users/10068608/amir"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 139, "favorite_count": 0, "answer_count": 3, "score": 1, "last_activity_date": 1548704878, "creation_date": 1548526252, "last_edit_date": 1548527765, "question_id": 54381253, "link": "https://stackoverflow.com/questions/54381253/regex-get-column-information-based-on-other-column", "title": "Regex get column information based on other column", "body": "<p>I have this:</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>&lt;table border=\"1\" cellspacing=\"1\" cellpadding=\"0\"&gt;\r\n\r\n&lt;tbody&gt;\r\n\r\n&lt;tr&gt;&lt;th class=\"align-left\" style=\"text-align: left;\"&gt;Name&lt;/th&gt;&lt;th&gt;Type&lt;/th&gt;&lt;th&gt;Size&lt;/th&gt;&lt;th&gt;Values&lt;/th&gt;&lt;th&gt;Description&lt;/th&gt;&lt;th&gt;Attributes&lt;/th&gt;&lt;th&gt;Default&lt;/th&gt;&lt;/tr&gt;\r\n\r\n&lt;tr&gt;\r\n\r\n&lt;td&gt;E-mail&lt;/td&gt;\r\n\r\n&lt;td&gt;text&lt;/td&gt;\r\n\r\n&lt;td&gt;60&lt;/td&gt;\r\n\r\n&lt;td&gt;test@test.com&lt;/td&gt;\r\n\r\n&lt;td&gt;&amp;#160;&lt;/td&gt;\r\n\r\n&lt;td&gt;M&lt;/td&gt;\r\n\r\n&lt;td&gt;test@test.com&lt;/td&gt;\r\n\r\n&lt;/tr&gt;\r\n\r\n&lt;tr&gt;\r\n\r\n&lt;td&gt;Phone&lt;/td&gt;\r\n\r\n&lt;td&gt;text&lt;/td&gt;\r\n\r\n&lt;td&gt;20&lt;/td&gt;\r\n\r\n&lt;td&gt;01-250 481 00&lt;/td&gt;\r\n\r\n&lt;td&gt;&amp;#160;&lt;/td&gt;\r\n\r\n&lt;td&gt;&amp;#160;&lt;/td&gt;\r\n\r\n&lt;td&gt;&amp;#160;&lt;/td&gt;\r\n\r\n&lt;/tr&gt;\r\n\r\n&lt;/tbody&gt;\r\n\r\n&lt;/table&gt;</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>This is how the code looks like:</p>\n\n<p><a href=\"https://i.stack.imgur.com/9B7tz.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/9B7tz.png\" alt=\"enter image description here\"></a></p>\n\n<p>I want to pull out the information from (values) based on the left from (name) with regex/regexp but I don't know if this is possible...</p>\n\n<p>For example, I want to search for \"phone\" and get \"01-250 481 00\"</p>\n\n<p>What do you think?</p>\n"}, {"tags": ["perl", "mocking"], "comments": [{"owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 2, "creation_date": 1548523386, "post_id": 54379833, "comment_id": 95574892, "body": "Are you also calling <code>use Test::MockFile</code>? That&#39;s where the mock <code>opendir</code> and <code>readdir</code> functions are installed."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1548545104, "post_id": 54379833, "comment_id": 95580279, "body": "Test::MockFile::DirHandle specifically says you shouldn&#39;t be using it directly; it&#39;s a class Test::MockFile uses internally."}], "answers": [{"tags": [], "owner": {"reputation": 1445, "user_id": 1441592, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/2a58917def8d1523a840b52ae7d59d21?s=128&d=identicon&r=PG", "display_name": "Paul Serikov", "link": "https://stackoverflow.com/users/1441592/paul-serikov"}, "is_accepted": false, "score": 1, "last_activity_date": 1548873952, "creation_date": 1548873952, "answer_id": 54447494, "question_id": 54379833, "link": "https://stackoverflow.com/questions/54379833/how-to-mock-standart-perl-opendir-and-readdir-functions/54447494#54447494", "title": "How to mock standart perl opendir and readdir functions?", "body": "<p>Right usage is</p>\n\n<pre><code>my $mocked_dir = Test::MockFile-&gt;dir(\"/fake/path\", [ 'Foo.pm', 'bar.pl' ] );\n\nopendir(my $dh, \"/fake/path\") or die $!;\nwhile (my $file = readdir($dh)) {\n    print \"$file \";    # will print '. .. Foo.pm bar.pl'\n}        \n\nundef $mocked_dir;\n</code></pre>\n\n<p>So, instead of <code>Test::MockFile::DirHandle</code> you should use <a href=\"https://metacpan.org/pod/Test::MockFile#dir\" rel=\"nofollow noreferrer\">Test::MockFile->dir</a></p>\n"}], "owner": {"reputation": 1445, "user_id": 1441592, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/2a58917def8d1523a840b52ae7d59d21?s=128&d=identicon&r=PG", "display_name": "Paul Serikov", "link": "https://stackoverflow.com/users/1441592/paul-serikov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 138, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1548873952, "creation_date": 1548516833, "question_id": 54379833, "link": "https://stackoverflow.com/questions/54379833/how-to-mock-standart-perl-opendir-and-readdir-functions", "title": "How to mock standart perl opendir and readdir functions?", "body": "<p>I'm writing test for function which gets list of all <code>*.pm</code> files in current directory.</p>\n\n<p>Here is function:</p>\n\n<pre><code>sub get_inspected_modules_list {\n    my ( $dir ) = @_;\n    opendir(my $dh, $dir) or die $!;\n    my @files;\n    while (my $file = readdir($dh)) {\n        next unless (-f \"$dir/$file\");   # skip nested dirs\n        next unless ($file =~ m/\\.pm$/); # push only *.pm\n        push @files, $file;\n    }\n    closedir($dh);\n    return \\@files\n}\n</code></pre>\n\n<p>I tried to use <a href=\"https://metacpan.org/pod/Test::MockFile::DirHandle\" rel=\"nofollow noreferrer\">Test::MockFile::DirHandle</a> for test, but it prints <code>No such file or directory</code> error:</p>\n\n<pre><code>subtest \"get_inspected_modules_list\" =&gt; sub {\n\n    my $handle = Test::MockFile::DirHandle-&gt;new(\n        \"/fake/path\", \n        [qw/Foo.pm Bar.pm Baz.pm test.txt 1.pl/]\n    );\n\n    warn Dumper get_inspected_modules_list( '/fake/path' ); # error\n\n};\n</code></pre>\n\n<p>How to mock opendir/readdir calls ?</p>\n"}, {"tags": ["perl", "module", "tcl"], "comments": [{"owner": {"reputation": 2408, "user_id": 3207222, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1338b351d1bac0e771a0c90016d3482d?s=128&d=identicon&r=PG&f=1", "display_name": "mrcalvin", "link": "https://stackoverflow.com/users/3207222/mrcalvin"}, "edited": false, "score": 1, "creation_date": 1548515915, "post_id": 54379165, "comment_id": 95572875, "body": "Welcome! What is the directory content at <code>C:\\ActiveTcl\\include</code>? Can you post the content of <code>tclConfig.sh</code> (using some external paste bin pls.)?"}, {"owner": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "edited": false, "score": 1, "creation_date": 1548538948, "post_id": 54379165, "comment_id": 95578973, "body": "<code>incpath C:\\ActiveTcl\\include from your tclconfig C:&#47;ActiveTcl&#47;lib&#47;tclConfig.sh does not provide tcl.h at Makefile.PL line 36.</code> being the important bit. It can&#39;t find the TCL header files needed to build the TCL library."}, {"owner": {"reputation": 41, "user_id": 10971623, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-qZlbV6Zi2N4/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQOkN9Uubb-DbnTZpUXmt-6C6dXHfg/mo/photo.jpg?sz=128", "display_name": "andy", "link": "https://stackoverflow.com/users/10971623/andy"}, "edited": false, "score": 0, "creation_date": 1548558433, "post_id": 54379165, "comment_id": 95582216, "body": "attached picture shown include folder, and tclconfig.sh content"}, {"owner": {"reputation": 119001, "user_id": 301832, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/965220a70d38e6a29466f44cdb4f804e?s=128&d=identicon&r=PG", "display_name": "Donal Fellows", "link": "https://stackoverflow.com/users/301832/donal-fellows"}, "edited": false, "score": 0, "creation_date": 1548591037, "post_id": 54379165, "comment_id": 95587989, "body": "Is there a more complete log of what was actually tested? Right now, it&#39;s in \u201cComputer Says No!\u201d mode and that&#39;s impossible for some of us to help out with\u2026"}, {"owner": {"reputation": 2408, "user_id": 3207222, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1338b351d1bac0e771a0c90016d3482d?s=128&d=identicon&r=PG&f=1", "display_name": "mrcalvin", "link": "https://stackoverflow.com/users/3207222/mrcalvin"}, "edited": false, "score": 0, "creation_date": 1548627290, "post_id": 54379165, "comment_id": 95598465, "body": "Mmmh. Your printout of <code>tclConfig.sh</code> does not seem to be accurate, it documents <code>TCL_INCLUDE_SPEC</code> with a directory prefix <code>C:\\TEMP\\ActiveTcl\\include\\...</code> ... which is not what you show us in the make log: <code>C:\\ActiveTcl\\include</code>."}, {"owner": {"reputation": 41, "user_id": 10971623, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-qZlbV6Zi2N4/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQOkN9Uubb-DbnTZpUXmt-6C6dXHfg/mo/photo.jpg?sz=128", "display_name": "andy", "link": "https://stackoverflow.com/users/10971623/andy"}, "edited": false, "score": 0, "creation_date": 1548655355, "post_id": 54379165, "comment_id": 95603646, "body": "<code>C:\\TEMP\\ActiveTcl\\include\\...</code> this is original path after ActiveTcl install in tclConfig.sh file\uff0csince I don&#39;t know how to run install script as above picture shown, I changed the path to <code>C:\\ActiveTcl\\include</code> manually."}, {"owner": {"reputation": 527, "user_id": 4896937, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b849b641ff3f8495ba3ce610fbd6e6f3?s=128&d=identicon&r=PG", "display_name": "chrstphrchvz", "link": "https://stackoverflow.com/users/4896937/chrstphrchvz"}, "edited": false, "score": 0, "creation_date": 1557805207, "post_id": 54379165, "comment_id": 98877538, "body": "I encountered this issue in ActiveTcl 8.6.9.8609.2 (5ccbd9ac8) as well, and have reported it to the ActiveTcl mailing list. Note to asker: please copy the relevant contents of tclConfig.sh rather than using a screenshot; doing so would probably make it much easier for search engine users to find this question."}], "answers": [{"comments": [{"owner": {"reputation": 41, "user_id": 10971623, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-qZlbV6Zi2N4/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQOkN9Uubb-DbnTZpUXmt-6C6dXHfg/mo/photo.jpg?sz=128", "display_name": "andy", "link": "https://stackoverflow.com/users/10971623/andy"}, "edited": false, "score": 0, "creation_date": 1548655772, "post_id": 54396365, "comment_id": 95603772, "body": "I don&#39;t know why this two path needed to be modified manually, and how to run the install script as described in tclConfig.sh file. but after change the two paths, Cpan Tcl works fine"}, {"owner": {"reputation": 2408, "user_id": 3207222, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1338b351d1bac0e771a0c90016d3482d?s=128&d=identicon&r=PG&f=1", "display_name": "mrcalvin", "link": "https://stackoverflow.com/users/3207222/mrcalvin"}, "edited": false, "score": 0, "creation_date": 1548670984, "post_id": 54396365, "comment_id": 95610407, "body": "well, hard to tell without providing more details to us. Seems like the installer failed to complete fully? How did you exactly obtain ActiveTcl? Back in the days, this was a sign of using the ActiveTcl archive release (*.zip; which is not available anymore IIRC) and not running <code>install.bat</code> or similar."}, {"owner": {"reputation": 41, "user_id": 10971623, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-qZlbV6Zi2N4/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQOkN9Uubb-DbnTZpUXmt-6C6dXHfg/mo/photo.jpg?sz=128", "display_name": "andy", "link": "https://stackoverflow.com/users/10971623/andy"}, "reply_to_user": {"reputation": 2408, "user_id": 3207222, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1338b351d1bac0e771a0c90016d3482d?s=128&d=identicon&r=PG&f=1", "display_name": "mrcalvin", "link": "https://stackoverflow.com/users/3207222/mrcalvin"}, "edited": false, "score": 0, "creation_date": 1548768635, "post_id": 54396365, "comment_id": 95654161, "body": "download the exe file from ActiveTcl website. and installed  &#39;ActiveTcl-8.6.8.0-MSWin32-x64.exe&#39; without any Error <a href=\"https://www.activestate.com/products/activetcl/\" rel=\"nofollow noreferrer\">activestate.com/products/activetcl</a>"}], "tags": [], "owner": {"reputation": 41, "user_id": 10971623, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-qZlbV6Zi2N4/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQOkN9Uubb-DbnTZpUXmt-6C6dXHfg/mo/photo.jpg?sz=128", "display_name": "andy", "link": "https://stackoverflow.com/users/10971623/andy"}, "is_accepted": true, "score": 2, "last_activity_date": 1548655626, "creation_date": 1548655626, "answer_id": 54396365, "question_id": 54379165, "link": "https://stackoverflow.com/questions/54379165/strawberry-perl-cant-install-tcl-module/54396365#54396365", "title": "Strawberry Perl: can&#39;t install Tcl module", "body": "<p>manually change the below path in tclConfig.sh file, </p>\n\n<pre><code>TCL_LIB_SPEC='-TC:\\ActiveTcl\\lib\\tcl86t.lib'\nTCL_INCLUDE_SPEC='-IC:\\ActiveTcl\\include'\n</code></pre>\n"}], "owner": {"reputation": 41, "user_id": 10971623, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-qZlbV6Zi2N4/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQOkN9Uubb-DbnTZpUXmt-6C6dXHfg/mo/photo.jpg?sz=128", "display_name": "andy", "link": "https://stackoverflow.com/users/10971623/andy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 335, "favorite_count": 1, "accepted_answer_id": 54396365, "answer_count": 1, "score": 2, "last_activity_date": 1548655626, "creation_date": 1548511866, "last_edit_date": 1548577144, "question_id": 54379165, "link": "https://stackoverflow.com/questions/54379165/strawberry-perl-cant-install-tcl-module", "title": "Strawberry Perl: can&#39;t install Tcl module", "body": "<p><img src=\"https://i.stack.imgur.com/dI96b.png\" alt=\"include folder files\">\n<img src=\"https://i.stack.imgur.com/N2QTD.png\" alt=\"TclConfig.sh content\"></p>\n\n<p>I have installed activeTcl, it seems something wrong with my tclconfig.file</p>\n\n<p>window10+ strawberry perl(v5.28.1)+activeTcl(8.6.8.0)</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>Loading internal logger. Log::Log4perl recommended for better logging\n    CPAN: CPAN::SQLite loaded ok (v0.212)\n    Database was generated on Sat, 26 Jan 2019 12:11:52 GMT\n\n    Running install for module 'Tcl'\n    CPAN: Digest::SHA loaded ok (v6.02)\n    CPAN: Compress::Zlib loaded ok (v2.081)\n    Checksum for C:\\STRAWB~1\\cpan\\sources\\authors\\id\\V\\VK\\VKON\\Tcl-1.27.tar.gz ok\n    CPAN: Archive::Tar loaded ok (v2.32)\n    CPAN: YAML::XS loaded ok (v0.75)\n    CPAN: CPAN::Meta::Requirements loaded ok (v2.140)\n    CPAN: Parse::CPAN::Meta loaded ok (v2.150010)\n    CPAN: CPAN::Meta loaded ok (v2.150010)\n    CPAN: Module::CoreList loaded ok (v5.20181130)\n    Configuring V/VK/VKON/Tcl-1.27.tar.gz with Makefile.PL\n    tclsh=C:/ActiveTcl/bin/tclsh.exe\n    tclConfig.sh=C:/ActiveTcl/lib/tclConfig.sh\n    tcl_library=C:/ActiveTcl/lib/tcl8.6\n    tcl_version=8.6\n    Using config data in C:/ActiveTcl/lib/tclConfig.sh\n    incpath C:\\ActiveTcl\\include from your tclconfig C:/ActiveTcl/lib/tclConfig.sh does not provide tcl.h at Makefile.PL line 36.\n    No 'Makefile' created  VKON/Tcl-1.27.tar.gz\n      C:\\Strawberry\\perl\\bin\\perl.exe Makefile.PL -- NOT OK\n    Stopping: 'install' failed for 'Tcl'.\n</code></pre>\n"}, {"tags": ["perl", "debugging"], "answers": [{"comments": [{"owner": {"reputation": 124, "user_id": 7203861, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/195e424f743cc19a615e17d26a87e5dc?s=128&d=identicon&r=PG&f=1", "display_name": "HRitter", "link": "https://stackoverflow.com/users/7203861/hritter"}, "edited": false, "score": 0, "creation_date": 1548577447, "post_id": 54381821, "comment_id": 95584869, "body": "Awesome! Despite the fact, that it&#39;s only viable for dumping a single expression (i. e. variable).  In order to have an alias to dump multiple expression I tried the following command.    <code>$DB::alias{ &#39;xc3&#39; } = &#39;s&#47;^.*&#47;x join &quot;,&quot;, qw($var1 $var2)&#47;&#39;;</code>  However, the output is not properly formated as it should. Hence, the output using the aliased command gives <code>0  &#39;FOO,BAR&#39;</code>   <code>x $var1, $var2</code> and directly invoked in the debugger shell gives two properly formated elements <code>0  &#39;FOO&#39; 1  &#39;BAR&#39;</code> in two lines."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "reply_to_user": {"reputation": 124, "user_id": 7203861, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/195e424f743cc19a615e17d26a87e5dc?s=128&d=identicon&r=PG&f=1", "display_name": "HRitter", "link": "https://stackoverflow.com/users/7203861/hritter"}, "edited": false, "score": 1, "creation_date": 1548577503, "post_id": 54381821, "comment_id": 95584880, "body": "@Phrosch Untested, but that should be <code>&#39;s&#47;^.*&#47;x \\$var1, \\$var2&#47;&#39;</code>."}], "tags": [], "owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "is_accepted": true, "score": 3, "last_activity_date": 1548529857, "creation_date": 1548529857, "answer_id": 54381821, "question_id": 54377294, "link": "https://stackoverflow.com/questions/54377294/alias-definition-in-perldb-perl-debugger-for-expression-evaluation-x-doesn/54381821#54381821", "title": "Alias definition in .perldb (Perl Debugger) for expression evaluation &#39;x&#39; doesn&#39;t work", "body": "<p>This is not documented, but <a href=\"https://metacpan.org/source/SHAY/perl-5.28.1/lib/perl5db.pl#L2845-2864\" rel=\"nofollow noreferrer\">the contents of the <code>%alias</code> hash are strings that are used as the right-hand side of a <code>$cmd =~ ...</code> expression</a>. That is, to work as expected, the aliases must be <code>s///</code> commands.</p>\n\n<p>Try something like</p>\n\n<pre><code>$DB::alias{ 'x1' } = 's/^.*/x %config/'; \n</code></pre>\n"}], "owner": {"reputation": 124, "user_id": 7203861, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/195e424f743cc19a615e17d26a87e5dc?s=128&d=identicon&r=PG&f=1", "display_name": "HRitter", "link": "https://stackoverflow.com/users/7203861/hritter"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 85, "favorite_count": 0, "accepted_answer_id": 54381821, "answer_count": 1, "score": 3, "last_activity_date": 1548529857, "creation_date": 1548496386, "last_edit_date": 1548525371, "question_id": 54377294, "link": "https://stackoverflow.com/questions/54377294/alias-definition-in-perldb-perl-debugger-for-expression-evaluation-x-doesn", "title": "Alias definition in .perldb (Perl Debugger) for expression evaluation &#39;x&#39; doesn&#39;t work", "body": "<p>I am wondering if there is a way to define aliases in the Perl Debugger configuration file <code>.perldb</code> for the command <code>x</code> which dumps expressions.</p>\n\n<p>All the following imaginable varieties of alias definitions doesn't work:</p>\n\n<pre><code>cat .perldb\n$DB::alias{ 'x0' }    = \"x '%states'\";             # Does not work\n$DB::alias{ 'x1' }    = 'x %config';               # Does not work\n$DB::alias{ 'x2' }    = '\"x %config\"';             # Does not work\n$DB::alias{ 'x3' }    = 'x \"%config, $foo\"';       # Does not work\n$DB::alias{ 'x4' }    = 'x \"@L\"';                  # Does not work\n$DB::alias{ 'x5' }    = 'x %config, $foo';         # Does not work\n$DB::alias{ 'x6' }    = '\"x %config, $foo\"';       # Does not work\n$DB::alias{ 'xc' }    = 'x %config';               # Does not work\n$DB::alias{ 'pFoo1' } = 'print(\"foo=$var1\\n\")';    # Works\n$DB::alias{ 'pFoo2' } = 'print(\"$var2\\n\")';        # Works\n$DB::alias{ 'p1' }    = 'print \"\\$_ =  $_\"';       # Works\n$DB::alias{ 'code' }  = 's/^.*$/l 1+99999/';       # Works\n</code></pre>\n\n<p>After starting the debugger with 'perl -d script.pl' and display the aliases with <code>=</code> I get:</p>\n\n<pre><code>code    s/^.*$/l 1+99999/\np1  print \"\\$_ =  $_\"\npFoo1   print(\"foo=$var1\\n\")\npFoo2   print(\"$var2\\n\")\nx0  x '%states'\nx1  x %config\nx2  \"x %config\"\nx3  x \"%config, $foo\"\nx4  x \"@L\"\nx5  x %config, $foo\nx6  \"x %config, $foo\"\nxc  x %config\n</code></pre>\n\n<p>Any ideas if the alias definitions in <code>.perldb</code> expect a special syntax or does it just not work?</p>\n"}, {"tags": ["bash", "perl"], "comments": [{"owner": {"reputation": 11476, "user_id": 8572380, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f4a5d854aa543e6bf01abe8351d38782?s=128&d=identicon&r=PG&f=1", "display_name": "tshiono", "link": "https://stackoverflow.com/users/8572380/tshiono"}, "edited": false, "score": 0, "creation_date": 1548468850, "post_id": 54375065, "comment_id": 95564554, "body": "Would you please show the expected output based on the given sample?"}, {"owner": {"reputation": 473, "user_id": 4367994, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/add879bb03f3b2b6b0a856814cf73e98?s=128&d=identicon&r=PG&f=1", "display_name": "geeb.24", "link": "https://stackoverflow.com/users/4367994/geeb-24"}, "reply_to_user": {"reputation": 11476, "user_id": 8572380, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f4a5d854aa543e6bf01abe8351d38782?s=128&d=identicon&r=PG&f=1", "display_name": "tshiono", "link": "https://stackoverflow.com/users/8572380/tshiono"}, "edited": false, "score": 0, "creation_date": 1548468980, "post_id": 54375065, "comment_id": 95564573, "body": "Sure, I&#39;ve provided the expected output above - subset based on column 8 in the # line being &lt; -34.4.  Thanks!"}], "answers": [{"tags": [], "owner": {"reputation": 3918, "user_id": 922613, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3621f704501599658906409b078ae204?s=128&d=identicon&r=PG", "display_name": "George", "link": "https://stackoverflow.com/users/922613/george"}, "is_accepted": false, "score": 3, "last_activity_date": 1548469377, "creation_date": 1548469377, "answer_id": 54375150, "question_id": 54375065, "link": "https://stackoverflow.com/questions/54375065/subset-file-based-one-line-and-printing-other-lines-until-it-reaches-next-line/54375150#54375150", "title": "Subset File based One Line and Printing Other lines Until it reaches next line", "body": "<pre><code>perl -lane '$matches = ($F[7] &lt; -34.4); print if ($matches .. (/^#/ and not $matches)) and ($matches or not /^#/)'\n</code></pre>\n\n<p>It's a bit involved. You can make <code>$matches</code> be any expression on the <code># ...</code> lines that you want. <code>($matches .. (/^#/ and not $matches))</code> matches all header lines up to and including the next (potentially non-matching) header and then <code>and ($matches or not /^#/)</code> excludes any non-matching headers.</p>\n\n<p>(The <code>..</code> is the <a href=\"https://perldoc.perl.org/perlop.html#Range-Operators\" rel=\"nofollow noreferrer\">Range Operator</a> which was designed for exactly these use cases)</p>\n"}, {"comments": [{"owner": {"reputation": 473, "user_id": 4367994, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/add879bb03f3b2b6b0a856814cf73e98?s=128&d=identicon&r=PG&f=1", "display_name": "geeb.24", "link": "https://stackoverflow.com/users/4367994/geeb-24"}, "edited": false, "score": 0, "creation_date": 1548470024, "post_id": 54375157, "comment_id": 95564678, "body": "+1.  Thanks!  I was wondering if you could describe what this code is doing?  I&#39;m fairly new to awk and hopefully this post could be useful for others.  With your above one-liner, is the record separator <code>RS=&#39;(^|\\n)#&#39;</code> splitting up the record, and then rest of the one-liner is describing the condition to print for each record?Thanks!"}], "tags": [], "owner": {"reputation": 62252, "user_id": 1435869, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TrEd9.jpg?s=128&g=1", "display_name": "karakfa", "link": "https://stackoverflow.com/users/1435869/karakfa"}, "is_accepted": true, "score": 2, "last_activity_date": 1548470990, "last_edit_date": 1548470990, "creation_date": 1548469457, "answer_id": 54375157, "question_id": 54375065, "link": "https://stackoverflow.com/questions/54375065/subset-file-based-one-line-and-printing-other-lines-until-it-reaches-next-line/54375157#54375157", "title": "Subset File based One Line and Printing Other lines Until it reaches next line", "body": "<p>with <code>gawk</code> record separator, <code>perl</code> should have similar... </p>\n\n<pre><code>$ awk -v RS='(^|\\n)#' '$7&lt;-34.4{printf \"%s\", rt $0} {rt=RT}' file\n\n# 2018 11 22 11 58 25.550581 -34.439400 116.750832 2.8513 0.288144 3.306790 2.576028 0.771026 891\nLM01 1.664419 1.00 P\nLM01 2.471786 1.00 S\nLM03 3.536432 1.00 P\n# 2018 11 22 14 38 7.190175 -34.447819 116.788727 3.1661 0.577347 2.063253 2.132511 0.608057 892\nLM01 1.629825 1.00 P\nLM02 3.059825 1.00 P\nLM03 3.284825 1.00 P\nLM01 2.378885 1.00 S\n</code></pre>\n\n<p>note that you want <code>&lt;</code> since the sign is negative.  Since we use <code>#</code> as the record delimiter, field number is one less.</p>\n\n<p>We define the record separator as the leading # or after new line.  Normally RS is between records but here it's leading the records.  That's why we capture the matched record separator <code>RT</code> and assign to a variable to be used in the (next) record.  Also the RT includes the new line, that's why <code>printf</code> doesn't have one.</p>\n"}, {"tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": false, "score": 5, "last_activity_date": 1548663527, "last_edit_date": 1548663527, "creation_date": 1548471504, "answer_id": 54375319, "question_id": 54375065, "link": "https://stackoverflow.com/questions/54375065/subset-file-based-one-line-and-printing-other-lines-until-it-reaches-next-line/54375319#54375319", "title": "Subset File based One Line and Printing Other lines Until it reaches next line", "body": "<p>On lines not starting with <code>#</code> print if flag is on, otherwise set flag (and print) subject to a condition</p>\n\n<pre><code>perl -wlnE'\n    if (/^\\s*[^#]/) { say if $y } elsif ((split)[7] &lt; -34.4) { $y=1, say }\n' file\n</code></pre>\n\n<p>With the offered sample input in <code>file</code> this prints the expected output.</p>\n\n<p>The flags <code>-lnE</code> can be <code>-ne</code> instead, with <code>print</code> instead of <code>say</code> in code. The <code>-w</code> is just for warnings, often omitted in one-liners (I always use it).  See <a href=\"https://perldoc.perl.org/perlrun.html#Command-Switches\" rel=\"nofollow noreferrer\">Command switches in perlrun</a></p>\n"}, {"comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1548696039, "post_id": 54405127, "comment_id": 95625183, "body": "Nice :). Don&#39;t need quotes, just <code>print $1</code>.  Also I often find it clearer to drop at least some parens, up to <code>... if (split &quot; &quot;, $1)[7] &lt; -34.4</code> (but these are preferences I guess)"}, {"owner": {"reputation": 7646, "user_id": 6867048, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b939fdb5809fed8097c38bdf4370747b?s=128&d=identicon&r=PG&f=1", "display_name": "stack0114106", "link": "https://stackoverflow.com/users/6867048/stack0114106"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1548696765, "post_id": 54405127, "comment_id": 95625561, "body": "Thanks @zdim. I shortened further..removed parens and used <code>$&amp;</code>..just updated it"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1548700014, "post_id": 54405127, "comment_id": 95627077, "body": "OK, that&#39;s a valid and interesting use of <code>$&amp;</code> but I am not sure that it is better than capturing explicitly (it can cause head-scratching, may be less efficient ... and possibly introduce bugs if things are changed in the future)?"}], "tags": [], "owner": {"reputation": 7646, "user_id": 6867048, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b939fdb5809fed8097c38bdf4370747b?s=128&d=identicon&r=PG&f=1", "display_name": "stack0114106", "link": "https://stackoverflow.com/users/6867048/stack0114106"}, "is_accepted": false, "score": 1, "last_activity_date": 1548700376, "last_edit_date": 1548700376, "creation_date": 1548689072, "answer_id": 54405127, "question_id": 54375065, "link": "https://stackoverflow.com/questions/54375065/subset-file-based-one-line-and-printing-other-lines-until-it-reaches-next-line/54405127#54405127", "title": "Subset File based One Line and Printing Other lines Until it reaches next line", "body": "<p>Another Perl one-liner</p>\n\n<pre><code>  perl -0777 -ne ' while( /(^#.+?)(?=^#|\\Z)/gsm ) { print $1 if (split(\" \",$1))[7] &lt; -34.4 } '\n</code></pre>\n\n<p>with Inputs</p>\n\n<pre><code>$ cat geeb.txt\n# 2018 11 21 17 47 37.708756 -34.390213 116.803673 2.6972 0.442474 3.324627 2.840390 0.885880 890\nLM01 0.836408 1.00 P\nLM01 1.035398 1.00 S\nLM03 3.987074 1.00 S\n# 2018 11 22 11 58 25.550581 -34.439400 116.750832 2.8513 0.288144 3.306790 2.576028 0.771026 891\nLM01 1.664419 1.00 P\nLM01 2.471786 1.00 S\nLM03 3.536432 1.00 P\n# 2018 11 22 14 38 7.190175 -34.447819 116.788727 3.1661 0.577347 2.063253 2.132511 0.608057 892\nLM01 1.629825 1.00 P\nLM02 3.059825 1.00 P\nLM03 3.284825 1.00 P\nLM01 2.378885 1.00 S\n$ perl -0777 -ne ' while( /(^#.+?)(?=^#|\\Z)/gsm ) { print $1 if (split(\" \",$1))[7] &lt; -34.4 } ' geeb.txt\n# 2018 11 22 11 58 25.550581 -34.439400 116.750832 2.8513 0.288144 3.306790 2.576028 0.771026 891\nLM01 1.664419 1.00 P\nLM01 2.471786 1.00 S\nLM03 3.536432 1.00 P\n# 2018 11 22 14 38 7.190175 -34.447819 116.788727 3.1661 0.577347 2.063253 2.132511 0.608057 892\nLM01 1.629825 1.00 P\nLM02 3.059825 1.00 P\nLM03 3.284825 1.00 P\nLM01 2.378885 1.00 S\n$\n</code></pre>\n"}], "owner": {"reputation": 473, "user_id": 4367994, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/add879bb03f3b2b6b0a856814cf73e98?s=128&d=identicon&r=PG&f=1", "display_name": "geeb.24", "link": "https://stackoverflow.com/users/4367994/geeb-24"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 76, "favorite_count": 0, "accepted_answer_id": 54375157, "answer_count": 4, "score": 1, "last_activity_date": 1548700376, "creation_date": 1548468312, "last_edit_date": 1548468943, "question_id": 54375065, "link": "https://stackoverflow.com/questions/54375065/subset-file-based-one-line-and-printing-other-lines-until-it-reaches-next-line", "title": "Subset File based One Line and Printing Other lines Until it reaches next line", "body": "<p>I have a text file that contains multiple entries that look like the sample below:</p>\n\n<pre><code># 2018 11 21 17 47 37.708756 -34.390213 116.803673 2.6972 0.442474 3.324627 2.840390 0.885880 890\nLM01 0.836408 1.00 P\nLM01 1.035398 1.00 S\nLM03 3.987074 1.00 S\n# 2018 11 22 11 58 25.550581 -34.439400 116.750832 2.8513 0.288144 3.306790 2.576028 0.771026 891\nLM01 1.664419 1.00 P\nLM01 2.471786 1.00 S\nLM03 3.536432 1.00 P\n# 2018 11 22 14 38 7.190175 -34.447819 116.788727 3.1661 0.577347 2.063253 2.132511 0.608057 892\nLM01 1.629825 1.00 P\nLM02 3.059825 1.00 P\nLM03 3.284825 1.00 P\nLM01 2.378885 1.00 S\n</code></pre>\n\n<p>I need to come up with a way, preferably in Bash or Perl, that reads line with the <code>#</code>, subsets that line based on column 8 (latitude), and if the condition is met, prints the rest of the lines (e.g. LM...) until it reaches the next line with the <code>#</code>.  For example, I only want to print the 'entries' where column 8 &lt; -34.4, and include the LM* lines for that entry.  </p>\n\n<p>I can come up with code to read each <code>#</code> line, but I'm unsure how to program \"if condition is met, print LM lines until you reach the next # line\".  The expected output would be:</p>\n\n<pre><code># 2018 11 22 11 58 25.550581 -34.439400 116.750832 2.8513 0.288144 3.306790 2.576028 0.771026 891\nLM01 1.664419 1.00 P\nLM01 2.471786 1.00 S\nLM03 3.536432 1.00 P\n# 2018 11 22 14 38 7.190175 -34.447819 116.788727 3.1661 0.577347 2.063253 2.132511 0.608057 892\nLM01 1.629825 1.00 P\nLM02 3.059825 1.00 P\nLM03 3.284825 1.00 P\nLM01 2.378885 1.00 S\n</code></pre>\n"}, {"tags": ["mongodb", "perl"], "answers": [{"tags": [], "owner": {"reputation": 333, "user_id": 4220763, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6AuCF.jpg?s=128&g=1", "display_name": "Hannibal", "link": "https://stackoverflow.com/users/4220763/hannibal"}, "is_accepted": true, "score": 2, "last_activity_date": 1548475325, "last_edit_date": 1548475325, "creation_date": 1548474028, "answer_id": 54375489, "question_id": 54374549, "link": "https://stackoverflow.com/questions/54374549/perl-and-mongodb-find-and-take-results/54375489#54375489", "title": "Perl and MongoDB... find and take results", "body": "<p>Simply accessing to attributes you need inside each document :)\nExample using a cursor iterator:</p>\n\n<pre><code>my $cursor = $collection-&gt;find({})-&gt;fields({ \n   name =&gt; 1, \n   _id =&gt; 1 \n});\nwhile (my $doc = $cursor-&gt;next){\n    say \"name: $doc-&gt;{name}\" ;\n    say \" _id: $doc-&gt;{_id}\" ;\n}\n</code></pre>\n\n<p>or slurping all results at once:</p>\n\n<pre><code>map {\n    say \"name: $_-&gt;{name}\" ;\n    say \" _id: $_-&gt;{_id}\" ;\n} $cursor-&gt;all ;\n</code></pre>\n"}], "owner": {"reputation": 285, "user_id": 476918, "user_type": "registered", "accept_rate": 29, "profile_image": "https://i.stack.imgur.com/qGBOr.jpg?s=128&g=1", "display_name": "Alfons", "link": "https://stackoverflow.com/users/476918/alfons"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 37, "favorite_count": 0, "accepted_answer_id": 54375489, "answer_count": 1, "score": 1, "last_activity_date": 1548475325, "creation_date": 1548462430, "question_id": 54374549, "link": "https://stackoverflow.com/questions/54374549/perl-and-mongodb-find-and-take-results", "title": "Perl and MongoDB... find and take results", "body": "<p>Ok.. I'd like take \"name\" and \"id\" value...but how?! :)</p>\n\n<pre><code>my $results = $collection-&gt;find( { })-&gt;fields( { name =&gt; 1, _id =&gt; 1 } );\nwhile (my $doc = $results-&gt;next){\n  foreach my $key (keys %$doc){\n    my $name = $doc-&gt;{$key};\n    ...\n    print \"name: $name\\n\";\n    print \"id: $id\\n\";\n  }\n}\n</code></pre>\n"}, {"tags": ["perl", "getopt-long"], "comments": [{"owner": {"reputation": 21, "user_id": 10969605, "user_type": "registered", "profile_image": "https://graph.facebook.com/2093340017380806/picture?type=large", "display_name": "PCM", "link": "https://stackoverflow.com/users/10969605/pcm"}, "edited": false, "score": 0, "creation_date": 1548454095, "post_id": 54373398, "comment_id": 95561255, "body": "I had tried &#39;cmd=s&#39; =&gt; \\$cmd and then  ./abc.pl -pro JKFK -cmd &#39;ls abc/bcd/def;cp abn/cdf ads&#39; -dom ABC after that i had used split(&quot;;&quot;,$cmd) which resulted in an array but i like to know the solution using GetOptions"}], "answers": [{"tags": [], "owner": {"reputation": 19969, "user_id": 23512, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/tUj1I.png?s=128&g=1", "display_name": "Tanktalus", "link": "https://stackoverflow.com/users/23512/tanktalus"}, "is_accepted": false, "score": 6, "last_activity_date": 1548468388, "last_edit_date": 1548468388, "creation_date": 1548454320, "answer_id": 54373469, "question_id": 54373398, "link": "https://stackoverflow.com/questions/54373398/pass-multiple-values-to-command-line-argument-and-store-it-as-an-array/54373469#54373469", "title": "Pass Multiple Values to command Line argument and Store it as an array", "body": "<p>You're evaluating an array in scalar context:</p>\n\n<pre><code>print $pro.\"\\n\".@$cmd.\"\\n\".$dom.\"\\n\" \n</code></pre>\n\n<p>Try:</p>\n\n<pre><code>print $pro.\"\\n@$cmd\\n\".$dom.\"\\n\"\n</code></pre>\n\n<p>In other words, use interpolation, which, for arrays, is equivalent to <code>join($\", @array)</code> - where <code>$\"</code> defaults to a space. This means you could use the following:</p>\n\n<pre><code>print $pro.\"\\n\".join(' ', @$cmd).\"\\n\".$dom.\"\\n\" \n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 21, "user_id": 10969605, "user_type": "registered", "profile_image": "https://graph.facebook.com/2093340017380806/picture?type=large", "display_name": "PCM", "link": "https://stackoverflow.com/users/10969605/pcm"}, "edited": false, "score": 0, "creation_date": 1548952555, "post_id": 54373925, "comment_id": 95738349, "body": "With the code of yours the output is this      JKFK     [ ls abc/bcd/def cp abn/cdf ads ]     ABC"}], "tags": [], "owner": {"reputation": 560, "user_id": 10850601, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-3R2h7RDJ9yU/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcYNkQa9HPTd778Jo28o4mlsEFPJpw/mo/photo.jpg?sz=128", "display_name": "Ed Grimm", "link": "https://stackoverflow.com/users/10850601/ed-grimm"}, "is_accepted": false, "score": 1, "last_activity_date": 1549073611, "last_edit_date": 1549073611, "creation_date": 1548457288, "answer_id": 54373925, "question_id": 54373398, "link": "https://stackoverflow.com/questions/54373398/pass-multiple-values-to-command-line-argument-and-store-it-as-an-array/54373925#54373925", "title": "Pass Multiple Values to command Line argument and Store it as an array", "body": "<p>Your output method does not in any way suggest the brackets in the output you want.</p>\n\n<pre><code>print join(\"\\n\", $pro, \"[ '\" . join(\"', '\", @$cmd) . \"' ]\", $dom, \"\");\n</code></pre>\n\n<p>or</p>\n\n<pre><code>use Data::Dump; # This is a CPAN module that's not normally installed by default\n\ndd $pro, $cmd, $dom;\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 10969605, "user_type": "registered", "profile_image": "https://graph.facebook.com/2093340017380806/picture?type=large", "display_name": "PCM", "link": "https://stackoverflow.com/users/10969605/pcm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 164, "favorite_count": 1, "answer_count": 2, "score": 2, "last_activity_date": 1549073611, "creation_date": 1548453866, "last_edit_date": 1548952755, "question_id": 54373398, "link": "https://stackoverflow.com/questions/54373398/pass-multiple-values-to-command-line-argument-and-store-it-as-an-array", "title": "Pass Multiple Values to command Line argument and Store it as an array", "body": "<p>I am trying to pass Multiple Values to an Command line Argument as -cmd 'cp abc def' 'ls abd/def/ghi' etc ... and wanted to store these individually as an element of an array. I can take this to a string and use split function. i am trying to achieve the same using GetOptions. I am not sure of the reason it provides the size of the array. please help me with this. </p>\n\n<pre><code>use strict;    \nuse warnings;    \nuse Getopt::Long;    \n\nmy( $cmd ,$pro, $dom );      \n\nGetOptions ( 'pro=s' =&gt; \\$pro ,   \n             'dom=s' =&gt; \\$dom ,    \n             'cmd=s@{1,}' =&gt; \\$cmd );     \n\n\n\nprint $pro.\"\\n\".@$cmd.\"\\n\".$dom.\"\\n\" ;     \n\n--&gt;./abc.pl -pro JKFK -cmd 'ls abc/bcd/def' 'cp abn/cdf ads' -dom ABC        \n\n\nExpected:     \nJKFK    \n['ls abc/bcd/def','cp abn/cdf ads']    \nABC    \n\nActual Results :    \nJKFK    \n2    \nABC  \n</code></pre>\n\n<p>I am trying to get these system commands users provide and those commands directly go to DB tables. I am trying to store those system commands as it is as an element in array so that it would be easy to parse and Insert into DB table. \nPlease help me put them into array.</p>\n\n<p>Thanks.</p>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 589595, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1548451942, "post_id": 54373030, "comment_id": 95560580, "body": "The <code>-n</code> option performs one iteration per input line. You have nothing that loops over all the matches in the line."}, {"owner": {"reputation": 188041, "user_id": 10676716, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/arsQA.jpg?s=128&g=1", "display_name": "GMB", "link": "https://stackoverflow.com/users/10676716/gmb"}, "edited": false, "score": 0, "creation_date": 1548452178, "post_id": 54373030, "comment_id": 95560659, "body": "<code>perl -ne &#39;print &quot;$1\\n&quot; for (&#47;&quot;resolution.(\\w+)&#47;g)&#39; FILE_NAME</code>"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1548553166, "post_id": 54373030, "comment_id": 95581599, "body": "That is JSON. Use a proper, existing JSON parser, even in a one-liner. It will be simpler, cleaner and more reliable, and hardly any longer. I downvoted the answers that did not even mention this."}], "answers": [{"comments": [{"owner": {"reputation": 21, "user_id": 5335413, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9667eca6c9f604e4d9b00637eec643ee?s=128&d=identicon&r=PG&f=1", "display_name": "E.T.", "link": "https://stackoverflow.com/users/5335413/e-t"}, "edited": false, "score": 0, "creation_date": 1548456332, "post_id": 54373093, "comment_id": 95561981, "body": "Thanks Stefan. This: perl -ne &#39;print &quot;$_\\n&quot; foreach (/&quot;resolution\\.(\\w+)/g)&#39; dummy.txt did the trick."}], "tags": [], "owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "is_accepted": false, "score": 1, "last_activity_date": 1548452615, "last_edit_date": 1548452615, "creation_date": 1548452169, "answer_id": 54373093, "question_id": 54373030, "link": "https://stackoverflow.com/questions/54373030/why-is-perl-not-printing-all-regex-matches-found-in-single-line/54373093#54373093", "title": "Why is Perl not printing all regex matches found in single line?", "body": "<p>Scalar vs. list context:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>$ perl -ne 'print \"$_\\n\" foreach (/\"resolution\\.(\\w+)/g)' dummy.txt\nCOMPLAINTS_CHANGE_STATUS_SUCCESS\nMCS_CHANGE_COMPLAINTS_STATUS_TIMEOUT\nMCS_CHANGE_COMPLAINTS_STATUS_WARNING\nCOMPLAINTS_CHANGE_STATUS_FAIL\n</code></pre>\n\n<p>i.e. <code>/g</code> only returns multiple results if the regex gets repeatedly executed. Your command line only executed the match once.</p>\n\n<p>Maybe the following code example makes it more clear;</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\n\nmy $re    = qr/string\\.(\\w+)/;\nmy $input = \"asdlkj string.TEST1 daklkl string.TEST2 kas\u00f6ldk\";\n\nmy($scalar) = ($input =~ /$re/g);\nprint \"SCALAR: $scalar\\n\";\n\nmy @array   = ($input =~ /$re/g);\nprint \"ARRAY:  @array\\n\";\n\nexit 0;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 19969, "user_id": 23512, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/tUj1I.png?s=128&g=1", "display_name": "Tanktalus", "link": "https://stackoverflow.com/users/23512/tanktalus"}, "is_accepted": false, "score": 1, "last_activity_date": 1548452202, "creation_date": 1548452202, "answer_id": 54373100, "question_id": 54373030, "link": "https://stackoverflow.com/questions/54373030/why-is-perl-not-printing-all-regex-matches-found-in-single-line/54373100#54373100", "title": "Why is Perl not printing all regex matches found in single line?", "body": "<p>I don't see OPEN_IT in your input file.</p>\n\n<p>Try looping over the matches instead:</p>\n\n<pre><code>perl -ne 'print \"$_\\n\" for (/\"resolution.(\\w+)/g)' FILE_NAME\n</code></pre>\n\n<p>The parenthesis give the match a list context, the for will set <code>$_</code> to each match one at a time and call <code>print \"$_\\n\"</code> on each.</p>\n"}, {"comments": [{"owner": {"reputation": 21, "user_id": 5335413, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9667eca6c9f604e4d9b00637eec643ee?s=128&d=identicon&r=PG&f=1", "display_name": "E.T.", "link": "https://stackoverflow.com/users/5335413/e-t"}, "edited": false, "score": 0, "creation_date": 1548456128, "post_id": 54373117, "comment_id": 95561925, "body": "Thank you very much Steffen. This: perl -ne &#39;print &quot;$1\\n&quot; while /&quot;resolution.(\\w+)/g&#39; file worked like a charm."}], "tags": [], "owner": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "is_accepted": false, "score": 2, "last_activity_date": 1548452641, "last_edit_date": 1548452641, "creation_date": 1548452311, "answer_id": 54373117, "question_id": 54373030, "link": "https://stackoverflow.com/questions/54373030/why-is-perl-not-printing-all-regex-matches-found-in-single-line/54373117#54373117", "title": "Why is Perl not printing all regex matches found in single line?", "body": "<p><code>if /.../g</code> is using the regex in a scalar context. In this context <code>/.../g</code> is returning only a single match. The next <code>/.../g</code> will return the next single match etc:</p>\n\n<pre><code>$ perl -ne '\n   print \"$1\\n\" if /\"resolution.(\\w+)/g; \n   print \"$1\\n\" if /\"resolution.(\\w+)/g;' file\nCOMPLAINTS_CHANGE_STATUS_SUCCESS\nMCS_CHANGE_COMPLAINTS_STATUS_TIMEOUT\n</code></pre>\n\n<p>If you want all matches you have to either call <code>/.../g</code> repeatedly in scalar context or use it in array context. The first option would look like this:</p>\n\n<pre><code>$ perl -ne 'print \"$1\\n\" while /\"resolution.(\\w+)/g' file\nCOMPLAINTS_CHANGE_STATUS_SUCCESS\nMCS_CHANGE_COMPLAINTS_STATUS_TIMEOUT\nMCS_CHANGE_COMPLAINTS_STATUS_WARNING\nCOMPLAINTS_CHANGE_STATUS_FAIL\n</code></pre>\n\n<p>In array context <code>/.../g</code> returns all matches at once as an array, i.e. </p>\n\n<pre><code>@matches = /\"resolution.(\\w+)/\n</code></pre>\n\n<p>Within some command line statement this could  look like this:</p>\n\n<pre><code>$ perl -ne 'print map { \"$_\\n\" } /\"resolution.(\\w+)/g' \nCOMPLAINTS_CHANGE_STATUS_SUCCESS\nMCS_CHANGE_COMPLAINTS_STATUS_TIMEOUT\nMCS_CHANGE_COMPLAINTS_STATUS_WARNING\nCOMPLAINTS_CHANGE_STATUS_FAIL\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 71, "user_id": 10661935, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XBJ2G.jpg?s=128&g=1", "display_name": "\u690e\u540d\u68a8\u68a8\u82b1", "link": "https://stackoverflow.com/users/10661935/%e6%a4%8e%e5%90%8d%e6%a2%a8%e6%a2%a8%e8%8a%b1"}, "edited": false, "score": 0, "creation_date": 1548521404, "post_id": 54380443, "comment_id": 95574316, "body": "I prefer such a solution that can save a for-loop (whenever possible)."}], "tags": [], "owner": {"reputation": 173, "user_id": 10621944, "user_type": "registered", "profile_image": "https://graph.facebook.com/1042363385806265/picture?type=large", "display_name": "Charles Jie", "link": "https://stackoverflow.com/users/10621944/charles-jie"}, "is_accepted": false, "score": 1, "last_activity_date": 1548520952, "creation_date": 1548520952, "answer_id": 54380443, "question_id": 54373030, "link": "https://stackoverflow.com/questions/54373030/why-is-perl-not-printing-all-regex-matches-found-in-single-line/54380443#54380443", "title": "Why is Perl not printing all regex matches found in single line?", "body": "<p>It's very easy. Just save all the matched in an array @x:</p>\n\n<p><code>perl -ne 'say join \"\\n\",@x if @x=/\\\"resolution.(\\w+)/g' FILE_NAME</code></p>\n\n<p>@x will be evaluated (by <code>if</code>) to be true if it's not empty.</p>\n"}], "owner": {"reputation": 21, "user_id": 5335413, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9667eca6c9f604e4d9b00637eec643ee?s=128&d=identicon&r=PG&f=1", "display_name": "E.T.", "link": "https://stackoverflow.com/users/5335413/e-t"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 149, "favorite_count": 0, "answer_count": 4, "score": 1, "last_activity_date": 1548520952, "creation_date": 1548451766, "last_edit_date": 1548451883, "question_id": 54373030, "link": "https://stackoverflow.com/questions/54373030/why-is-perl-not-printing-all-regex-matches-found-in-single-line", "title": "Why is Perl not printing all regex matches found in single line?", "body": "<p>I have a regex that matches multiple Strings inside a line in a text file. However, when I use it to try to print all the instances of the captured group it is only printing the first instance.  </p>\n\n<p>My regex is:</p>\n\n<pre><code>/\"resolution.(\\w+)/g\n</code></pre>\n\n<p>When feeding the following line to the regex:</p>\n\n<pre><code>\"signalcfg\": \"{\\\"signals\\\":[{\\\"order\\\":1,\\\"id\\\":\\\"oryx_C20C0E15-2028-4F4B-A8DD-0DA8D87B4FF9\\\",\\\"name\\\":\\\"success\\\",\\\"rrcodes\\\":\\\"resolution.COMPLAINTS_CHANGE_STATUS_SUCCESS\\\",\\\"testModule\\\":\\\"MCSChangeComplaintsStatus\\\",\\\"default\\\":false},{\\\"order\\\":2,\\\"id\\\":\\\"oryx_C943ADB8-6FA2-4DA1-B4D7-24515D96B9DA\\\",\\\"name\\\":\\\"TimeOut\\\",\\\"rrcodes\\\":\\\"resolution.MCS_CHANGE_COMPLAINTS_STATUS_TIMEOUT\\\",\\\"testModule\\\":\\\"MCSChangeComplaintsStatus\\\",\\\"default\\\":false},{\\\"order\\\":3,\\\"id\\\":\\\"oryx_0CAC0F97-AD57-4C49-807A-B41839191F74\\\",\\\"name\\\":\\\"Warning\\\",\\\"rrcodes\\\":\\\"resolution.MCS_CHANGE_COMPLAINTS_STATUS_WARNING\\\",\\\"testModule\\\":\\\"MCSChangeComplaintsStatus\\\",\\\"default\\\":false},{\\\"order\\\":4,\\\"id\\\":\\\"oryx_4583A3EC-DFC8-47B9-9B04-DEE71DC3F17A\\\",\\\"name\\\":\\\"APIError\\\",\\\"rrcodes\\\":\\\"resolution.COMPLAINTS_CHANGE_STATUS_FAIL,resolution.MCS_CHANGE_COMPLAINTS_STATUS_FAIL\\\",\\\"testModule\\\":\\\"MCSChangeComplaintsStatus\\\",\\\"default\\\":true}]}\",\n</code></pre>\n\n<p>It matches all expressions like this:</p>\n\n<pre><code>\"resolution.COMPLAINTS_CHANGE_STATUS_SUCCESS\n</code></pre>\n\n<p>I've tried this to print the instances capturing group:</p>\n\n<pre><code>perl -ne 'print \"$1\\n\" if /\"resolution.(\\w+)/g' FILE_NAME\nperl -ne 'print \"$1\\n\" if m/\"resolution.(\\w+)/sig' FILE_NAME\n</code></pre>\n\n<p>I'm expecting to get:</p>\n\n<pre><code>OPEN_IT_COMPLAINTS_FOUND\nOPEN_IT_COMPLAINTS_NOT_FOUND\nMCS_GET_COMPLAINTS_WARNING\nMCS_GET_COMPLAINTS_TIMEOUT\nMCS_GET_COMPLAINTS_FAIL\n</code></pre>\n\n<p>But I'm only getting:</p>\n\n<pre><code>OPEN_IT_COMPLAINTS_FOUND\n</code></pre>\n\n<p>If I put the above mentioned kind of expressions each in a single line inside the file as this:</p>\n\n<pre><code>\\\"rrcodes\\\":\\\"resolution.OPEN_IT_COMPLAINTS_NOT_FOUND1\\\"\n\\\"rrcodes\\\":\\\"resolution.OPEN_IT_COMPLAINTS_NOT_FOUND2\\\"\n\\\"rrcodes\\\":\\\"resolution.OPEN_IT_COMPLAINTS_NOT_FOUND2\\\"\n\\\"rrcodes\\\":\\\"resolution.OPEN_IT_COMPLAINTS_NOT_FOUND4\\\"\n</code></pre>\n\n<p>I do get the expected output:</p>\n\n<pre><code>OPEN_IT_COMPLAINTS_NOT_FOUND1\nOPEN_IT_COMPLAINTS_NOT_FOUND2\nOPEN_IT_COMPLAINTS_NOT_FOUND2\nOPEN_IT_COMPLAINTS_NOT_FOUND4\n</code></pre>\n"}, {"tags": ["bash", "perl", "awk", "sed"], "comments": [{"owner": {"reputation": 31251, "user_id": 4162356, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/dGhuV.png?s=128&g=1", "display_name": "James Brown", "link": "https://stackoverflow.com/users/4162356/james-brown"}, "edited": false, "score": 1, "creation_date": 1548427122, "post_id": 54367360, "comment_id": 95548644, "body": "If the last number is 9, what&#39;s the desired outcome? What if it&#39;s 59?"}, {"owner": {"reputation": 6463, "user_id": 6387170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d425edf9cc20e61c8cc3be162915f06?s=128&d=identicon&r=PG&f=1", "display_name": "UKMonkey", "link": "https://stackoverflow.com/users/6387170/ukmonkey"}, "reply_to_user": {"reputation": 31251, "user_id": 4162356, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/dGhuV.png?s=128&g=1", "display_name": "James Brown", "link": "https://stackoverflow.com/users/4162356/james-brown"}, "edited": false, "score": 1, "creation_date": 1548427352, "post_id": 54367360, "comment_id": 95548790, "body": "if the last number is 9; then the desired is 10.  59; 60.  99-&gt;100 etc   (question updated for posterity)"}, {"owner": {"reputation": 16763, "user_id": 2749397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/rcNMz.png?s=128&g=1", "display_name": "gboffi", "link": "https://stackoverflow.com/users/2749397/gboffi"}, "edited": false, "score": 0, "creation_date": 1548428322, "post_id": 54367360, "comment_id": 95549342, "body": "It&#39;s always preceded by an underscore this last number of yours?"}, {"owner": {"reputation": 6463, "user_id": 6387170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d425edf9cc20e61c8cc3be162915f06?s=128&d=identicon&r=PG&f=1", "display_name": "UKMonkey", "link": "https://stackoverflow.com/users/6387170/ukmonkey"}, "reply_to_user": {"reputation": 16763, "user_id": 2749397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/rcNMz.png?s=128&g=1", "display_name": "gboffi", "link": "https://stackoverflow.com/users/2749397/gboffi"}, "edited": false, "score": 0, "creation_date": 1548428486, "post_id": 54367360, "comment_id": 95549441, "body": "@gboffi no;  the previous character is not fixed."}, {"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 0, "creation_date": 1548430282, "post_id": 54367360, "comment_id": 95550570, "body": "<code>if it&#39;s greater than a script argument</code> you mean the whole string, or the number?  if the number, do you mean increment the last number in the string that is greater than an argument, or increment the last number in the string if it is greater than an argument?"}, {"owner": {"reputation": 62252, "user_id": 1435869, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TrEd9.jpg?s=128&g=1", "display_name": "karakfa", "link": "https://stackoverflow.com/users/1435869/karakfa"}, "edited": false, "score": 0, "creation_date": 1548432256, "post_id": 54367360, "comment_id": 95551767, "body": "not clear what you mean by <code>if it&#39;s greater than a script argument</code> for your example is it to be incremented if the arg is given as 4?"}, {"owner": {"reputation": 6463, "user_id": 6387170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d425edf9cc20e61c8cc3be162915f06?s=128&d=identicon&r=PG&f=1", "display_name": "UKMonkey", "link": "https://stackoverflow.com/users/6387170/ukmonkey"}, "reply_to_user": {"reputation": 62252, "user_id": 1435869, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TrEd9.jpg?s=128&g=1", "display_name": "karakfa", "link": "https://stackoverflow.com/users/1435869/karakfa"}, "edited": false, "score": 0, "creation_date": 1548432803, "post_id": 54367360, "comment_id": 95552078, "body": "@karakfa updated question.  So if I&#39;m trying to compare to 3 for example; the 5 would be increased; but if comparing to 7 then the 5 would be unchanged."}], "answers": [{"comments": [{"owner": {"reputation": 95936, "user_id": 5866580, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/1de2cd722d865edac1575102a48ecc0a?s=128&d=identicon&r=PG&f=1", "display_name": "RavinderSingh13", "link": "https://stackoverflow.com/users/5866580/ravindersingh13"}, "edited": false, "score": 0, "creation_date": 1548428986, "post_id": 54367738, "comment_id": 95549745, "body": "@UKMonkey, could you please check this one also once and let me know if this works for you?"}, {"owner": {"reputation": 95936, "user_id": 5866580, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/1de2cd722d865edac1575102a48ecc0a?s=128&d=identicon&r=PG&f=1", "display_name": "RavinderSingh13", "link": "https://stackoverflow.com/users/5866580/ravindersingh13"}, "reply_to_user": {"reputation": 6463, "user_id": 6387170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d425edf9cc20e61c8cc3be162915f06?s=128&d=identicon&r=PG&f=1", "display_name": "UKMonkey", "link": "https://stackoverflow.com/users/6387170/ukmonkey"}, "edited": false, "score": 0, "creation_date": 1548429530, "post_id": 54367738, "comment_id": 95550095, "body": "@UKMonkey, cool glad that it helped  you, why I have specifically asked is no other solution have taken argument from script and compared it, so I wanted to make sure I understood question correctly, if you tested by passing argument then cool :)"}, {"owner": {"reputation": 6463, "user_id": 6387170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d425edf9cc20e61c8cc3be162915f06?s=128&d=identicon&r=PG&f=1", "display_name": "UKMonkey", "link": "https://stackoverflow.com/users/6387170/ukmonkey"}, "edited": false, "score": 0, "creation_date": 1548430014, "post_id": 54367738, "comment_id": 95550406, "body": "it was the principle behind the replacement that I cared about - the full implementation such as how to plug in the string etc is a worry I didn&#39;t want to infect the question with."}, {"owner": {"reputation": 95936, "user_id": 5866580, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/1de2cd722d865edac1575102a48ecc0a?s=128&d=identicon&r=PG&f=1", "display_name": "RavinderSingh13", "link": "https://stackoverflow.com/users/5866580/ravindersingh13"}, "reply_to_user": {"reputation": 6463, "user_id": 6387170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d425edf9cc20e61c8cc3be162915f06?s=128&d=identicon&r=PG&f=1", "display_name": "UKMonkey", "link": "https://stackoverflow.com/users/6387170/ukmonkey"}, "edited": false, "score": 0, "creation_date": 1548430153, "post_id": 54367738, "comment_id": 95550492, "body": "@UKMonkey, well(if I get it correctly) if that is complete requirement then you need not to worry now, you have complete solution now :)"}], "tags": [], "owner": {"reputation": 95936, "user_id": 5866580, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/1de2cd722d865edac1575102a48ecc0a?s=128&d=identicon&r=PG&f=1", "display_name": "RavinderSingh13", "link": "https://stackoverflow.com/users/5866580/ravindersingh13"}, "is_accepted": false, "score": 1, "last_activity_date": 1548429002, "last_edit_date": 1548429002, "creation_date": 1548428181, "answer_id": 54367738, "question_id": 54367360, "link": "https://stackoverflow.com/questions/54367360/how-to-increment-the-last-number-in-a-string-bash/54367738#54367738", "title": "How to increment the last number in a string; bash", "body": "<blockquote>\n  <p>if it's greater than a script argument.</p>\n</blockquote>\n\n<p>If I get it correctly(I am assuming you are passing an argument through a script and if its value is greater than string's 2nd field digit then increase 1 into that 2nd field's digit), could you please try following once.</p>\n\n<pre><code>cat script.ksh\nvalue=$1\necho \"/foo/bar/baz59_ 5stuff.thing\" | \nawk -v arg=\"$value\" '\n  match($2,/[0-9]+/){\n    val=substr($2,RSTART,RLENGTH)\n    val=val&lt;arg?val+1:val\n    $2=val substr($2,RSTART+RLENGTH)\n}\n1'\n</code></pre>\n\n<p>Here is an example when I run script.ksh it gives following output.</p>\n\n<pre><code>/script.ksh 7\n/foo/bar/baz59_ 6stuff.thing\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 6463, "user_id": 6387170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d425edf9cc20e61c8cc3be162915f06?s=128&d=identicon&r=PG&f=1", "display_name": "UKMonkey", "link": "https://stackoverflow.com/users/6387170/ukmonkey"}, "edited": false, "score": 0, "creation_date": 1548428802, "post_id": 54367784, "comment_id": 95549633, "body": "This seems to work perfectly; and even handles a string containing quotes"}, {"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 5, "creation_date": 1548430077, "post_id": 54367784, "comment_id": 95550452, "body": "or <code>s&#47;.*(?&lt;!\\d)\\K(\\d+)&#47;$1+1&#47;sea</code>"}, {"owner": {"reputation": 144799, "user_id": 2836621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/suHg4.jpg?s=128&g=1", "display_name": "Mark Setchell", "link": "https://stackoverflow.com/users/2836621/mark-setchell"}, "reply_to_user": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "edited": false, "score": 2, "creation_date": 1548436570, "post_id": 54367784, "comment_id": 95554018, "body": "@EdMorton Well spotted! I hadn&#39;t seen that, but have added it in now."}, {"owner": {"reputation": 34304, "user_id": 1733163, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/gmGvj.jpg?s=128&g=1", "display_name": "Miller", "link": "https://stackoverflow.com/users/1733163/miller"}, "edited": false, "score": 1, "creation_date": 1548447471, "post_id": 54367784, "comment_id": 95558842, "body": "or <code>s&#47;(\\d+)(?=\\D*$)&#47;$1+1&#47;ea</code>"}, {"owner": {"reputation": 144799, "user_id": 2836621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/suHg4.jpg?s=128&g=1", "display_name": "Mark Setchell", "link": "https://stackoverflow.com/users/2836621/mark-setchell"}, "edited": false, "score": 0, "creation_date": 1548449709, "post_id": 54367784, "comment_id": 95559678, "body": "Thank you all for your alternative suggestions."}], "tags": [], "owner": {"reputation": 144799, "user_id": 2836621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/suHg4.jpg?s=128&g=1", "display_name": "Mark Setchell", "link": "https://stackoverflow.com/users/2836621/mark-setchell"}, "is_accepted": true, "score": 7, "last_activity_date": 1548436515, "last_edit_date": 1548436515, "creation_date": 1548428320, "answer_id": 54367784, "question_id": 54367360, "link": "https://stackoverflow.com/questions/54367360/how-to-increment-the-last-number-in-a-string-bash/54367784#54367784", "title": "How to increment the last number in a string; bash", "body": "<p><strong>Updated Answer</strong></p>\n\n<p>Thanks to @EdMorton for pointing out the further requirement of the number exceeding a threshold. That can be done like this:</p>\n\n<pre><code>perl -spe 's/(\\d+)(?!.*\\d+)/$1&gt;$thresh? $1+1 : $1/e' &lt;&lt;&lt;  \"abc123_456.txt\" -- -thresh=500\n</code></pre>\n\n<p><strong>Original Answer</strong></p>\n\n<p>You can evaluate/calculate a replacement with <code>/e</code> in Perl regexes. Here I just add 1 to the captured string of digits but you can do more complicated stuff:</p>\n\n<pre><code>perl -pe 's/(\\d+)(?!.*\\d+)/$1+1/e' &lt;&lt;&lt; \"abc123_456.txt\"\nabc123_457.txt\n</code></pre>\n\n<p>The <code>(?!.*\\d+)</code> is (hopefully) a negative look-ahead for any more digits.</p>\n\n<p>The <code>$1</code> represents any sequence of digits captured in the capture group <code>(\\d+)</code>.</p>\n\n<p>Note that this would need modification to handle decimal numbers, negative numbers and scientific notation - but that is possible.</p>\n"}, {"tags": [], "owner": {"reputation": 205702, "user_id": 7552, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b60298053f87465641c1b1192338c8cd?s=128&d=identicon&r=PG", "display_name": "glenn jackman", "link": "https://stackoverflow.com/users/7552/glenn-jackman"}, "is_accepted": false, "score": 4, "last_activity_date": 1548429751, "last_edit_date": 1548429751, "creation_date": 1548429015, "answer_id": 54367982, "question_id": 54367360, "link": "https://stackoverflow.com/questions/54367360/how-to-increment-the-last-number-in-a-string-bash/54367982#54367982", "title": "How to increment the last number in a string; bash", "body": "<p>Using bash regular expression matching:</p>\n\n<pre><code>$ f=\"/foo/bar/baz59_ 99stuff.thing\"\n$ [[ $f =~ ([0-9]+)([^0-9]+)$ ]]\n</code></pre>\n\n<p>OK, what do we have now?</p>\n\n<pre><code>$ declare -p BASH_REMATCH\ndeclare -ar BASH_REMATCH=([0]=\"99stuff.thing\" [1]=\"99\" [2]=\"stuff.thing\")\n</code></pre>\n\n<p>So we can construct the new filename</p>\n\n<pre><code>if [[ $f =~ ([0-9]+)([^0-9]+)$ ]]; then\n    prefix=${f%${BASH_REMATCH[0]}}           # remove \"99stuff.thing\" from $f\n    number=$(( 10#${BASH_REMATCH[1]} + 1 ))  # use \"10#\" to force base10\n    new=${prefix}${number}${BASH_REMATCH[2]}\n    echo $new\nfi\n# =&gt; /foo/bar/baz59_ 100stuff.thing\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 31251, "user_id": 4162356, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/dGhuV.png?s=128&g=1", "display_name": "James Brown", "link": "https://stackoverflow.com/users/4162356/james-brown"}, "edited": false, "score": 0, "creation_date": 1548431921, "post_id": 54367984, "comment_id": 95551573, "body": "Updated with the script argument requirement. Missed it at first."}], "tags": [], "owner": {"reputation": 31251, "user_id": 4162356, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/dGhuV.png?s=128&g=1", "display_name": "James Brown", "link": "https://stackoverflow.com/users/4162356/james-brown"}, "is_accepted": false, "score": 1, "last_activity_date": 1548431808, "last_edit_date": 1548431808, "creation_date": 1548429020, "answer_id": 54367984, "question_id": 54367360, "link": "https://stackoverflow.com/questions/54367360/how-to-increment-the-last-number-in-a-string-bash/54367984#54367984", "title": "How to increment the last number in a string; bash", "body": "<p>An awk:</p>\n\n<pre><code>$ echo /foo/bar/baz59_ 99stuff.thing |\nawk '\n/[0-9]/ {\n    rstart=1                                    # keep track of the start\n    while(match(substr($0,rstart),/[0-9]+/)) {  # while numbers last\n        rstart+=RSTART+RLENGTH-1                # increase rstart\n        rlength=RLENGTH                         # remember length too\n    }\n    v=substr($0,rstart-rlength,rlength)+1                    # increase last number\n    print substr($0,1,rstart-rlength-1) v substr($0,rstart)  # print in parts\n    next\n}1'                                             # in case there was no number\n/foo/bar/baz59_ 100stuff.thing\n</code></pre>\n\n<p><strong>Edit</strong>:</p>\n\n<p>Whoops, I missed the argument requirement (<em>increase the last number - - by a one, if it's greater than a script argument</em>):</p>\n\n<pre><code>$ echo /foo/bar/baz59_ 99stuff.thing |\nawk -v arg=100 '\n/[0-9]/ {\n    rstart=1\n    while(match(substr($0,rstart),/[0-9]+/)) {\n        rstart+=RSTART+RLENGTH-1\n        rlength=RLENGTH\n    }\n    v=substr($0,rstart-rlength,rlength)\n    if(0+v&gt;arg) {                           # test if v greater that argument\n        print substr($0,1,rstart-rlength-1) v+1 substr($0,rstart)\n        next\n    }\n}1'\n</code></pre>\n\n<p>Output now:</p>\n\n<pre><code>/foo/bar/baz59_ 99stuff.thing\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 658023, "user_id": 548225, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/dab08478b226280d4a30894c9a7ed719?s=128&d=identicon&r=PG", "display_name": "anubhava", "link": "https://stackoverflow.com/users/548225/anubhava"}, "is_accepted": false, "score": 1, "last_activity_date": 1548430132, "creation_date": 1548430132, "answer_id": 54368285, "question_id": 54367360, "link": "https://stackoverflow.com/questions/54367360/how-to-increment-the-last-number-in-a-string-bash/54368285#54368285", "title": "How to increment the last number in a string; bash", "body": "<p>Here is a shorter <code>gnu awk</code> approach:</p>\n\n<pre><code>cat incr.awk\n{\n   n = split($0, a, /[0-9]+/, b)\n   for(i=1; i&lt;n; i++)\n      s = s a[i] b[i] + (b[i] &lt; max &amp;&amp; i == n-1 ? 1 : 0)\n   print s a[i]\n}\n</code></pre>\n\n<p>Then use it as:</p>\n\n<pre><code>awk -v max=80 -f incr.awk &lt;&lt;&lt; '/foo/bar/baz59_ 5stuff.thing'\n/foo/bar/baz59_ 6stuff.thing\n\nawk -v max=80 -f incr.awk &lt;&lt;&lt; '/foo/bar/baz59_ 79stuff.thing'\n/foo/bar/baz59_ 80stuff.thing\n\n\nawk -v max=80 -f incr.awk &lt;&lt;&lt; '/foo/bar/baz59_ 90stuff.thing'\n/foo/bar/baz59_ 90stuff.thing\n\nawk -v max=80 -f incr.awk &lt;&lt;&lt; '/foo/bar/baz59_ 80stuff.thing'\n/foo/bar/baz59_ 80stuff.thing\n\nawk -v max=80 -f incr.awk &lt;&lt;&lt; '/foo/bar/stuff.thing'\n/foo/bar/stuff.thing\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "is_accepted": false, "score": 4, "last_activity_date": 1548435487, "creation_date": 1548435487, "answer_id": 54369708, "question_id": 54367360, "link": "https://stackoverflow.com/questions/54367360/how-to-increment-the-last-number-in-a-string-bash/54369708#54369708", "title": "How to increment the last number in a string; bash", "body": "<p>With GNU awk for the 3rd arg to match():</p>\n\n<pre><code>$ awk -v t=3 'match($0,/(.*)([0-9]+)([^0-9]*)$/,a) &amp;&amp; a[2]&gt;t{a[2]++; $0=a[1] a[2] a[3]} 1' file\n/foo/bar/baz59_ 6stuff.thing\n</code></pre>\n\n<p>Just set <code>t</code> to whatever your threshold value is for incrementing, e.g.:</p>\n\n<pre><code>$ awk -v t=7 'match($0,/(.*)([0-9]+)([^0-9]*)$/,a) &amp;&amp; a[2]&gt;t{a[2]++; $0=a[1] a[2] a[3]} 1' file\n/foo/bar/baz59_ 5stuff.thing\n</code></pre>\n"}, {"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user7712945"}, "is_accepted": false, "score": 0, "last_activity_date": 1555958393, "last_edit_date": 1555958393, "creation_date": 1554713243, "answer_id": 55569461, "question_id": 54367360, "link": "https://stackoverflow.com/questions/54367360/how-to-increment-the-last-number-in-a-string-bash/55569461#55569461", "title": "How to increment the last number in a string; bash", "body": "<p>if the 'testing' number is in 'bound' variable:</p>\n\n<pre><code>perl -pe 'BEGIN{$bound=6} s{(\\d+)_(\\d+)(?!.*\\d+)}{ $i=$2+1;($i&gt;$bound? $1+1:$1).\"_\".$i}e' &lt;&lt;&lt;\"/foo/bar/baz59_5stuff.thing\"\n/foo/bar/baz59_6stuff.thing\n</code></pre>\n"}], "owner": {"reputation": 6463, "user_id": 6387170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d425edf9cc20e61c8cc3be162915f06?s=128&d=identicon&r=PG&f=1", "display_name": "UKMonkey", "link": "https://stackoverflow.com/users/6387170/ukmonkey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2504, "favorite_count": 1, "accepted_answer_id": 54367784, "answer_count": 7, "score": 8, "last_activity_date": 1555958393, "creation_date": 1548426866, "last_edit_date": 1548432737, "question_id": 54367360, "link": "https://stackoverflow.com/questions/54367360/how-to-increment-the-last-number-in-a-string-bash", "title": "How to increment the last number in a string; bash", "body": "<p>I have a string that looks something like\n<code>/foo/bar/baz59_ 5stuff.thing</code></p>\n\n<p>I would like to increase the last number (5 in the example) by one, if it's greater than another variable.  A 9 would be increased to 10. Note that the last number could be multiple digits also; also that \"stuff.thing\" could be anything; other than a number; so it can't be hard coded.</p>\n\n<p>The above example would result in <code>/foo/bar/baz59_ 6stuff.thing</code></p>\n\n<p>I've found multiple questions (and answers) that would extract the last number from the string, and obviously that could then be used in a comparison. \n The issue I'm having is how to ensure that when I do the replace, I only replace the last number (since obviously I can't just replace \"5\" for \"6\").  Can anyone make any suggestions?</p>\n\n<p>awk/sed/bash/grep are all viable.</p>\n"}, {"tags": ["html", "css", "perl", "parsing"], "comments": [{"owner": {"reputation": 2833, "user_id": 9300627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7a38cf029222bcf1d902e6b2759ffeb?s=128&d=identicon&r=PG", "display_name": "haukex", "link": "https://stackoverflow.com/users/9300627/haukex"}, "edited": false, "score": 1, "creation_date": 1548424582, "post_id": 54366670, "comment_id": 95547214, "body": "BTW, <i>&quot;parse line-by-line, rather than the whole file at once&quot;</i> - why? HTML tags can be split across multiple lines, <code>&quot;&lt;div\\nclass\\n=\\n&#39;foo&#39;\\n&gt;&quot;</code> is valid HTML."}, {"owner": {"reputation": 2167, "user_id": 824282, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/8f0cb967adb644f6408e5ff3df8c8a0f?s=128&d=identicon&r=PG", "display_name": "capser", "link": "https://stackoverflow.com/users/824282/capser"}, "reply_to_user": {"reputation": 2833, "user_id": 9300627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7a38cf029222bcf1d902e6b2759ffeb?s=128&d=identicon&r=PG", "display_name": "haukex", "link": "https://stackoverflow.com/users/9300627/haukex"}, "edited": false, "score": 0, "creation_date": 1548425274, "post_id": 54366670, "comment_id": 95547624, "body": "I was taught not to suck in file all at once - because it takes up too much memory - however in this case, you might be right.  It is just a habit."}, {"owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "edited": false, "score": 0, "creation_date": 1548434785, "post_id": 54366670, "comment_id": 95553161, "body": "Have you tried <code>HTML::TreeBuilder</code> from <a href=\"https://metacpan.org/pod/HTML::Tree\" rel=\"nofollow noreferrer\">HTML::Tree</a>?"}, {"owner": {"reputation": 2167, "user_id": 824282, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/8f0cb967adb644f6408e5ff3df8c8a0f?s=128&d=identicon&r=PG", "display_name": "capser", "link": "https://stackoverflow.com/users/824282/capser"}, "edited": false, "score": 0, "creation_date": 1550178384, "post_id": 54366670, "comment_id": 96185007, "body": "HTML:: Tree is not installed on the company network. Gotta work with what I have."}], "answers": [{"tags": [], "owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "is_accepted": false, "score": 0, "last_activity_date": 1548443094, "last_edit_date": 1548443094, "creation_date": 1548435477, "answer_id": 54369704, "question_id": 54366670, "link": "https://stackoverflow.com/questions/54366670/html-parse-with-perl-get-rid-of-inline-css-styles/54369704#54369704", "title": "HTML parse with perl get rid of inline css styles", "body": "<p>Use <code>HTML::TreeBuilder</code> from <a href=\"https://metacpan.org/pod/HTML::Tree\" rel=\"nofollow noreferrer\">HTML::Tree</a>:</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\n\nuse HTML::TreeBuilder;\nmy $parser = HTML::TreeBuilder-&gt;new()\n    or die \"can't create parser\\n\";\n\nmy $root = $parser-&gt;parse_file(\\*DATA)\n    or die \"can't parse HTML\\n\";\n\n#$root-&gt;dump();\nmy $style = $root-&gt;look_down(_tag =&gt; 'style')\n    or die \"can't find &lt;style&gt;!\\n\";\n\n$style-&gt;dump();\n\n# IMPORTANT: needs to be deleted() if you continue your code!\n$root-&gt;delete();\n\nexit 0;\n\n__DATA__\n&lt;html&gt;\n&lt;head&gt;\n&lt;style&gt;\na{text-decoration:none}\na:link{color:024C7E}\na:visited{color:024C7E}\na:active{color:958600}\nbody{font:10pt verdana;text-align:justify}\n&lt;/style&gt;\n&lt;/head&gt;\n&lt;body&gt;\n&lt;pre&gt;\nx\n-----\ncasper foo text\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n\n<p>Output:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>$ perl dummy.pl\n&lt;style&gt; @0.0.0\n  \"\\x0aa{text-decoration:none}\\x0aa:link{color:024C7E}\\x0aa:visited{color:024...\"\n</code></pre>\n\n<p>Use the <a href=\"https://metacpan.org/pod/HTML::Element\" rel=\"nofollow noreferrer\">HTML::Element</a> methods to manipulate the DOM node <code>$style</code> points to.</p>\n"}], "owner": {"reputation": 2167, "user_id": 824282, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/8f0cb967adb644f6408e5ff3df8c8a0f?s=128&d=identicon&r=PG", "display_name": "capser", "link": "https://stackoverflow.com/users/824282/capser"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 94, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1548443094, "creation_date": 1548424334, "last_edit_date": 1548428218, "question_id": 54366670, "link": "https://stackoverflow.com/questions/54366670/html-parse-with-perl-get-rid-of-inline-css-styles", "title": "HTML parse with perl get rid of inline css styles", "body": "<p>I have this file that I get from a wget. </p>\n\n<pre><code>casperadm@casper:~&gt; cat /tmp/one\n&lt;html&gt;\n&lt;head&gt;\n&lt;style&gt;\na{text-decoration:none}\na:link{color:024C7E}\na:visited{color:024C7E}\na:active{color:958600}\nbody{font:10pt verdana;text-align:justify}\n&lt;/style&gt;\n&lt;/head&gt;\n&lt;body&gt;\n&lt;pre&gt;\nx\n-----\ncasper foo text\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n\n<p>and then I built a very simple HTML parse in Perl </p>\n\n<pre><code>#!/usr/bin/perl -w\nuse warnings ;\nuse strict;\n\npackage HTMLStrip;\nuse base \"HTML::Parser\";\n\n  subtext {\n     my ($self, $text) = @_;\n     print $text;\n  }\n\n  my $p = new HTMLStrip;\n  # parse line-by-line, rather than the whole file at once\n  while (&lt;&gt;) {\n      $p-&gt;parse($_);\n  }\n # flush and parse remaining unparsed HTML\n  $p-&gt;eof;\n</code></pre>\n\n<p>The parsing works fine, however, it seems to ignore the inline stylings which were unexpected error and is screwing up my data collections of the older web pages that I have to get data from. \nAny ideas on how to get rid of the smooth inline CSS stylings?</p>\n\n<pre><code>casperadm@casper:~&gt; /tmp/pleaseParse /tmp/one\na{text-decoration:none}a:link{color:024C7E}a:visited{color:024C7E}a:active{color:958600}body{font:10pt verdana;text-align:justify}\nx\n-----\ncasper foo text\n</code></pre>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 91433, "user_id": 5424988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d0b4f91c20dcd87cbd58dd351455198c?s=128&d=identicon&r=PG&f=1", "display_name": "The fourth bird", "link": "https://stackoverflow.com/users/5424988/the-fourth-bird"}, "edited": false, "score": 0, "creation_date": 1548421873, "post_id": 54365980, "comment_id": 95545652, "body": "Try it like this <code>\\[\\K0[xX][0-9a-fA-F]+(?=\\])</code>"}], "answers": [{"comments": [{"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 2132, "user_id": 7620805, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/3f2d11bb6c725bca5c844805789f68c1?s=128&d=identicon&r=PG&f=1", "display_name": "Yash", "link": "https://stackoverflow.com/users/7620805/yash"}, "edited": false, "score": 0, "creation_date": 1548424424, "post_id": 54366109, "comment_id": 95547103, "body": "@Yash: Well, I know it works! But, more importantly, did you understand it? :-)"}, {"owner": {"reputation": 2132, "user_id": 7620805, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/3f2d11bb6c725bca5c844805789f68c1?s=128&d=identicon&r=PG&f=1", "display_name": "Yash", "link": "https://stackoverflow.com/users/7620805/yash"}, "edited": false, "score": 0, "creation_date": 1548424808, "post_id": 54366109, "comment_id": 95547352, "body": "yes i understood it. just wanted to clarify that in the above method isn&#39;t it mandatory to <code>close</code> the file handle ?"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 2132, "user_id": 7620805, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/3f2d11bb6c725bca5c844805789f68c1?s=128&d=identicon&r=PG&f=1", "display_name": "Yash", "link": "https://stackoverflow.com/users/7620805/yash"}, "edited": false, "score": 0, "creation_date": 1548426704, "post_id": 54366109, "comment_id": 95548416, "body": "@Yash: Well, it&#39;s never mandatory to <code>close()</code> a filehandle. But one of the advantages of using a lexical variable is that the filehandle will be closed automatically as the variable goes out of scope (or, in this case, when the program ends)."}], "tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": true, "score": 4, "last_activity_date": 1548422300, "creation_date": 1548422300, "answer_id": 54366109, "question_id": 54365980, "link": "https://stackoverflow.com/questions/54365980/read-a-logfile-in-perl-and-find-the-value-within-square-brackets/54366109#54366109", "title": "Read a logfile in perl and find the value within square brackets", "body": "<p>Something like this:</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\n\nopen my $log_fh, '&lt;', 'logfile.txt' or die $!;\n\nwhile (&lt;$log_fh&gt;) {\n  print $1 if /The job has completed.+\\[(.+)\\]/;\n}\n</code></pre>\n\n<p>I've used parentheses (<code>(...)</code>) to \"capture\" whatever appears between <code>[</code> and <code>]</code>. When the regex matches, the captured text will be stored in <code>$1</code>.</p>\n\n<p>Note, I've also updated your code to use a more modern idiom for opening files. I a) use a lexical filehandle, b) use the three-argument version of <code>open()</code> and c) check the return value from <code>open()</code> and kill the program if it fails.</p>\n"}, {"tags": [], "owner": {"reputation": 91433, "user_id": 5424988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d0b4f91c20dcd87cbd58dd351455198c?s=128&d=identicon&r=PG&f=1", "display_name": "The fourth bird", "link": "https://stackoverflow.com/users/5424988/the-fourth-bird"}, "is_accepted": false, "score": 4, "last_activity_date": 1548422848, "last_edit_date": 1548422848, "creation_date": 1548422332, "answer_id": 54366115, "question_id": 54365980, "link": "https://stackoverflow.com/questions/54365980/read-a-logfile-in-perl-and-find-the-value-within-square-brackets/54366115#54366115", "title": "Read a logfile in perl and find the value within square brackets", "body": "<p>To match the last line including the start of you sentence, you could use:</p>\n\n<pre><code>^The job has completed,.*?\\[\\K0[xX][0-9a-fA-F]+(?=\\])\n</code></pre>\n\n<p><a href=\"https://regex101.com/r/YSOiLk/1\" rel=\"nofollow noreferrer\">Regex demo</a></p>\n\n<p>That will match:</p>\n\n<ul>\n<li><code>^The job has completed,</code> Match literally from the start of the string</li>\n<li><code>.*?</code> Match any character non greedy</li>\n<li><code>\\[\\K</code> Match an opening bracket and forget what was matched using <code>\\K</code></li>\n<li><code>0[xX][0-9a-fA-F]+</code> Match a hexadecimal number</li>\n<li><code>(?=\\])</code> Positive lookahead to verify what follows is a closing bracket</li>\n</ul>\n"}, {"comments": [{"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1548422484, "post_id": 54366133, "comment_id": 95545969, "body": "There&#39;s no need for the first or last <code>.*</code> in your regex."}], "tags": [], "owner": {"reputation": 7646, "user_id": 6867048, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b939fdb5809fed8097c38bdf4370747b?s=128&d=identicon&r=PG&f=1", "display_name": "stack0114106", "link": "https://stackoverflow.com/users/6867048/stack0114106"}, "is_accepted": false, "score": 0, "last_activity_date": 1548422564, "last_edit_date": 1548422564, "creation_date": 1548422400, "answer_id": 54366133, "question_id": 54365980, "link": "https://stackoverflow.com/questions/54365980/read-a-logfile-in-perl-and-find-the-value-within-square-brackets/54366133#54366133", "title": "Read a logfile in perl and find the value within square brackets", "body": "<p>Try this Perl one-liner</p>\n\n<pre><code>$ perl -lne ' if(eof) { /.*\\[(.*)\\].*/ and print \"Hex = $1\" } ' logfile.txt\nHex = 0x0\n$\n</code></pre>\n\n<p>More shorter.. Thanks @Dave Cross</p>\n\n<pre><code>$ perl -lne ' if(eof) { /\\[(.*)\\]/ and print \"Hex = $1\" } ' logfile.txt\nHex = 0x0\n$\n</code></pre>\n\n<p>If you want to make sure \"The job has completed\" in last line, then</p>\n\n<pre><code>$  perl -lne ' if(eof) { /The job has completed.*\\[(.*)\\].*/ and print \"Hex = $1\" } ' logfile.txt\nHex = 0x0\n$\n</code></pre>\n"}], "owner": {"reputation": 2132, "user_id": 7620805, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/3f2d11bb6c725bca5c844805789f68c1?s=128&d=identicon&r=PG&f=1", "display_name": "Yash", "link": "https://stackoverflow.com/users/7620805/yash"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 60, "favorite_count": 0, "accepted_answer_id": 54366109, "answer_count": 3, "score": 1, "last_activity_date": 1548422848, "creation_date": 1548421770, "question_id": 54365980, "link": "https://stackoverflow.com/questions/54365980/read-a-logfile-in-perl-and-find-the-value-within-square-brackets", "title": "Read a logfile in perl and find the value within square brackets", "body": "<p>I have a <code>logfile.txt</code> which has the execution log of a certain testcase. A sample of this file is as shown below. Although it has many other lines but i have removed them for the sake of simplicity.</p>\n\n<p>In this <code>logfile.txt</code>, my final goal is to get the hex value within the square brackets in the last line.</p>\n\n<p>I have written a sample code in <code>PERL</code> to search for the last line and print but i'm unable to formulate the regex to get the desired value.</p>\n\n<p>My code:</p>\n\n<pre><code>#!/usr/bin/perl\n\nmy $logfile = \"/path/to/logfile.txt\";\nopen ( IN1 , $logfile) or die \"Cannot find the file $logfile \\n\";\nwhile (&lt;IN1&gt;)\n    {\n        chomp ($_);\n        print $_ if ($_ =~ m/The job has completed/i);\n    }\nclose (IN1);\n</code></pre>\n\n<p><strong>INPUT</strong></p>\n\n<pre><code>   &gt; cat logfile.txt\n\nWaiting for the completion of job..\n.\n.\n.\n.\n.\n\n\nThe job has completed, returning [0x0]\n</code></pre>\n\n<p><strong>OUTPUT</strong></p>\n\n<pre><code>0x0\n</code></pre>\n"}, {"tags": ["perl", "sorting", "awk", "sed", "sdiff"], "comments": [{"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1548417355, "post_id": 54364389, "comment_id": 95543397, "body": "I&#39;ve added some formatting to your post to make it easier to understand. But there seems to be some repetition in there. Can you please check it and remove any duplicate text."}, {"owner": {"reputation": 95936, "user_id": 5866580, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/1de2cd722d865edac1575102a48ecc0a?s=128&d=identicon&r=PG&f=1", "display_name": "RavinderSingh13", "link": "https://stackoverflow.com/users/5866580/ravindersingh13"}, "edited": false, "score": 0, "creation_date": 1548417866, "post_id": 54364389, "comment_id": 95543661, "body": "Welcome to SO @Jeevan Patil, your question is NOT clear. Please do mention 3 simple things, 1- sample of input, 2- sample of output and 3rd- whatever you have tried in order to fix it in CODE TAGS <code>{}</code> button  and let us know then."}, {"owner": {"reputation": 53, "user_id": 10842759, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-tMaxGmTRYhg/AAAAAAAAAAI/AAAAAAAABN4/39toVPNi634/photo.jpg?sz=128", "display_name": "Jeevan Patil", "link": "https://stackoverflow.com/users/10842759/jeevan-patil"}, "edited": false, "score": 0, "creation_date": 1548418440, "post_id": 54364389, "comment_id": 95543929, "body": "Hi . thanks for the suggestion. I edited it and removed duplicated statements"}], "answers": [{"comments": [{"owner": {"reputation": 13122, "user_id": 1001884, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/14116728c7413097a42cf22736503f56?s=128&d=identicon&r=PG", "display_name": "Hambone", "link": "https://stackoverflow.com/users/1001884/hambone"}, "edited": false, "score": 0, "creation_date": 1548428870, "post_id": 54364451, "comment_id": 95549674, "body": "Looks a lot like C#."}], "tags": [], "owner": {"reputation": 11, "user_id": 10966306, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9db6ecb50280111aa3d99ae30c7fa2a1?s=128&d=identicon&r=PG&f=1", "display_name": "&#214;m&#252;r Buruk", "link": "https://stackoverflow.com/users/10966306/%c3%96m%c3%bcr-buruk"}, "is_accepted": false, "score": 1, "last_activity_date": 1548415801, "creation_date": 1548415801, "answer_id": 54364451, "question_id": 54364389, "link": "https://stackoverflow.com/questions/54364389/how-to-compare-values-between-two-files/54364451#54364451", "title": "how to compare values between two files?", "body": "<p>You must use two loop in your code. Also split ',' character and set two array, after </p>\n\n<pre><code>foreach(var itemOne as arrayOne){\nboolean isExist=false;\nforeach(var itemTwo as arrayTwo)\nif(itemOne==itemTwo) isExist=true;\n\nif(isExist) console.log(itemOne+\" is exist\");\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 53, "user_id": 10842759, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-tMaxGmTRYhg/AAAAAAAAAAI/AAAAAAAABN4/39toVPNi634/photo.jpg?sz=128", "display_name": "Jeevan Patil", "link": "https://stackoverflow.com/users/10842759/jeevan-patil"}, "edited": false, "score": 0, "creation_date": 1548434388, "post_id": 54365243, "comment_id": 95552930, "body": "hi thanks for you input. But my perl version is old and doesnt support feature.pm. I cant up-grade perl. can you suggest some alternate to it ?"}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "reply_to_user": {"reputation": 53, "user_id": 10842759, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-tMaxGmTRYhg/AAAAAAAAAAI/AAAAAAAABN4/39toVPNi634/photo.jpg?sz=128", "display_name": "Jeevan Patil", "link": "https://stackoverflow.com/users/10842759/jeevan-patil"}, "edited": false, "score": 0, "creation_date": 1548434710, "post_id": 54365243, "comment_id": 95553125, "body": "@JeevanPatil: Just use <a href=\"http://p3rl.org/print\" rel=\"nofollow noreferrer\">print</a> instead of <a href=\"http://p3rl.org/say\" rel=\"nofollow noreferrer\">say</a> and append a <code>&quot;\\n&quot;</code>."}, {"owner": {"reputation": 53, "user_id": 10842759, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-tMaxGmTRYhg/AAAAAAAAAAI/AAAAAAAABN4/39toVPNi634/photo.jpg?sz=128", "display_name": "Jeevan Patil", "link": "https://stackoverflow.com/users/10842759/jeevan-patil"}, "edited": false, "score": 0, "creation_date": 1548447699, "post_id": 54365243, "comment_id": 95558933, "body": "Great.. print is working . thanks . But at what line i should append &quot;\\n&quot; ?"}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "reply_to_user": {"reputation": 53, "user_id": 10842759, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-tMaxGmTRYhg/AAAAAAAAAAI/AAAAAAAABN4/39toVPNi634/photo.jpg?sz=128", "display_name": "Jeevan Patil", "link": "https://stackoverflow.com/users/10842759/jeevan-patil"}, "edited": false, "score": 1, "creation_date": 1548448657, "post_id": 54365243, "comment_id": 95559288, "body": "<code>print $key, &#39; &#39;, (join &#39;,&#39;, keys %surplus), &quot;\\n&quot; if keys %surplus;</code>"}, {"owner": {"reputation": 53, "user_id": 10842759, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-tMaxGmTRYhg/AAAAAAAAAAI/AAAAAAAABN4/39toVPNi634/photo.jpg?sz=128", "display_name": "Jeevan Patil", "link": "https://stackoverflow.com/users/10842759/jeevan-patil"}, "edited": false, "score": 0, "creation_date": 1548449840, "post_id": 54365243, "comment_id": 95559722, "body": "it worked as expected . Thanks once again. I just came across the problem where in file2 column 2 has no value for some object in column 1.. Like below......"}, {"owner": {"reputation": 53, "user_id": 10842759, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-tMaxGmTRYhg/AAAAAAAAAAI/AAAAAAAABN4/39toVPNi634/photo.jpg?sz=128", "display_name": "Jeevan Patil", "link": "https://stackoverflow.com/users/10842759/jeevan-patil"}, "edited": false, "score": 0, "creation_date": 1548450057, "post_id": 54365243, "comment_id": 95559828, "body": "cat file1.txt 281475225437349 33,32,21,17,20,22,18,30,19,16,23,31 281475550885480 35,32,33,21,39,40,57,36,41,17,20,38,34,37,16,99  cat file2.txt 281475550885480 16,17,20,21,32,33,34,35,36,37,38,39,40,41 281475225437349   So o/p should be  281475225437349 33,32,21,17,20,22,18,30,19,16,23,31 281475550885480 57,99  But it gives error for this condition"}, {"owner": {"reputation": 53, "user_id": 10842759, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-tMaxGmTRYhg/AAAAAAAAAAI/AAAAAAAABN4/39toVPNi634/photo.jpg?sz=128", "display_name": "Jeevan Patil", "link": "https://stackoverflow.com/users/10842759/jeevan-patil"}, "edited": false, "score": 0, "creation_date": 1548451046, "post_id": 54365243, "comment_id": 95560231, "body": "its not working with ~1k values in column2. I have ~2k values from 16 till 2016 in column2 for some objects and it doesnt work there."}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "reply_to_user": {"reputation": 53, "user_id": 10842759, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-tMaxGmTRYhg/AAAAAAAAAAI/AAAAAAAABN4/39toVPNi634/photo.jpg?sz=128", "display_name": "Jeevan Patil", "link": "https://stackoverflow.com/users/10842759/jeevan-patil"}, "edited": false, "score": 1, "creation_date": 1548451611, "post_id": 54365243, "comment_id": 95560439, "body": "Oh, I see, to fix the error, add the <code>if</code> condition to <code>undef @{ $seen{$key} }{@values} if @values;</code>."}, {"owner": {"reputation": 53, "user_id": 10842759, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-tMaxGmTRYhg/AAAAAAAAAAI/AAAAAAAABN4/39toVPNi634/photo.jpg?sz=128", "display_name": "Jeevan Patil", "link": "https://stackoverflow.com/users/10842759/jeevan-patil"}, "edited": false, "score": 0, "creation_date": 1548660749, "post_id": 54365243, "comment_id": 95605496, "body": "Thanks .. It is working exactly. I would test this script with more scenarios. :)"}], "tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": true, "score": 3, "last_activity_date": 1548418818, "creation_date": 1548418818, "answer_id": 54365243, "question_id": 54364389, "link": "https://stackoverflow.com/questions/54364389/how-to-compare-values-between-two-files/54365243#54365243", "title": "how to compare values between two files?", "body": "<p>Perl solution: create a hash of hashes from the second file. The key is the large number, the inner keys are the smaller numbers from the comma separated list. Then iterate over the first file and check what numbers aren't mentioned in the remembered structure.</p>\n\n<pre><code>#!/usr/bin/perl\nuse warnings;\nuse strict;\nuse feature qw{ say };\n\nopen my $f1, '&lt;', 'file1' or die $!;\nopen my $f2, '&lt;', 'file2' or die $!;\n\nmy %seen;\nwhile (&lt;$f2&gt;) {\n    my ($key, $value_string) = split ' ';\n    my @values = split /,/, $value_string;  #/\n    undef @{ $seen{$key} }{@values};\n}\nwhile (&lt;$f1&gt;) {\n    my ($key, $value_string) = split ' ';\n    my @values = split /,/, $value_string;\n    my %surplus;\n    undef @surplus{@values};\n    delete @surplus{ keys %{ $seen{$key} } };\n    say $key, ' ', join ',', keys %surplus\n        if keys %surplus;\n}\n</code></pre>\n\n<p>BTW, when you switch the files, the output will be </p>\n\n<pre><code>281475225437349 24,25\n</code></pre>\n\n<p>because 24 and 25 aren't present in file1.</p>\n"}, {"tags": [], "owner": {"reputation": 20517, "user_id": 8344060, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1UbPk.png?s=128&g=1", "display_name": "kvantour", "link": "https://stackoverflow.com/users/8344060/kvantour"}, "is_accepted": false, "score": 0, "last_activity_date": 1548421360, "last_edit_date": 1548421360, "creation_date": 1548420991, "answer_id": 54365763, "question_id": 54364389, "link": "https://stackoverflow.com/questions/54364389/how-to-compare-values-between-two-files/54365763#54365763", "title": "how to compare values between two files?", "body": "<p>This is straightforward with awk:</p>\n\n<pre><code>awk '(NR==FNR) { a[$1]=\",\"$2\",\"; next }\n     { delete b }                   # clear array for new run\n     { split($2,f,\",\") }            # split string of file1 in array f\n     { for(i in f) if (! match(a[$1],\",\" f[i] \",\")) b[f[i]]  }                                                                                                                                                                             \n     { c=$1\" \"; for(i in b) {printf c i; c=\",\" }; if (c==\",\") printf \"\\n\" }' file2 file1\n</code></pre>\n\n<p>which returns:</p>\n\n<pre><code>281475550885480 57,99\n</code></pre>\n\n<p>The idea is to store the string of column two with an extra two &lt;comma&gt;'s to ensure that every number is between commas. Then search for the comma-sandwiched substring.</p>\n\n<p>If you have to do a real number check and you might have to compare numbers \"5\" with \"005\" and they should be equal, then you should do the following:</p>\n\n<pre><code>awk '(NR==FNR) { a[$1]=$2; next }\n     { delete b }                       # clear array\n     { # split strings in number elements\n       split($2,f,\",\");    for(i in f) f1[f[i]+0];\n       split(a[$1],f,\",\"); for(i in f) f2[f[i]+0]\n     }\n     { for(i in f1) if (! (i in f2)) b[i] }\n     { c=$1\" \"; for(i in b) {printf c i; c=\",\" }; if (c==\",\") printf \"\\n\" }' file2 file1\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 46858, "user_id": 967492, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/526ea226101e199d029049dda22a4e58?s=128&d=identicon&r=PG", "display_name": "potong", "link": "https://stackoverflow.com/users/967492/potong"}, "is_accepted": false, "score": 0, "last_activity_date": 1548422216, "creation_date": 1548422216, "answer_id": 54366094, "question_id": 54364389, "link": "https://stackoverflow.com/questions/54364389/how-to-compare-values-between-two-files/54366094#54366094", "title": "how to compare values between two files?", "body": "<p>This might work for you (GNU sed):</p>\n\n<pre><code>sed -r 's#^(\\S+)\\s(\\S+)$#/^\\1 /s/$/,\\\\n\\2,/#' file2 |\nsed -rnf - -e ':a;s/(\\b[0-9]+,)(.*\\n.*)\\1/\\2/;ta;s/(.*),\\n.*/\\1/p' file1\n</code></pre>\n\n<p>The solution can be split into two parts. </p>\n\n<p>First file2 is turned into a sed script which appends the values for each key to the same key in file1. Additional <code>,</code>'s are added to make matching easier and will act as indicator of whether a line from file1 has values to be printed.</p>\n\n<p>The script generated from file2 is piped into a second sed invocation and an additional subscript uses substitution and a loop to remove matching values from file1.</p>\n\n<p>On a match failing, and because the second sed invocation uses the <code>-n</code> switch to make printing explicit, a final match removes the introduced <code>,</code> and non-matched values following the newline and prints the required result.</p>\n"}, {"tags": [], "owner": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "is_accepted": false, "score": 0, "last_activity_date": 1548433206, "last_edit_date": 1548433206, "creation_date": 1548430925, "answer_id": 54368539, "question_id": 54364389, "link": "https://stackoverflow.com/questions/54364389/how-to-compare-values-between-two-files/54368539#54368539", "title": "how to compare values between two files?", "body": "<pre><code>$ cat tst.awk\nBEGIN { FS=\"[ ,]\" }\nNR==FNR {\n    for (i=2; i&lt;=NF; i++) {\n        file2[$1,$i]\n    }\n    next\n}\n{\n    diff = \"\"\n    for (i=2; i&lt;=NF; i++) {\n        if ( !(($1,$i) in file2) ) {\n            diff = (diff == \"\" ? \"\" : diff \",\") $i\n        }\n    }\n    if (diff != \"\") {\n        print $1, diff\n    }\n}\n\n$ awk -f tst.awk file2 file1\n281475550885480 57,99\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 62252, "user_id": 1435869, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TrEd9.jpg?s=128&g=1", "display_name": "karakfa", "link": "https://stackoverflow.com/users/1435869/karakfa"}, "is_accepted": false, "score": 1, "last_activity_date": 1548441984, "creation_date": 1548441984, "answer_id": 54371191, "question_id": 54364389, "link": "https://stackoverflow.com/questions/54364389/how-to-compare-values-between-two-files/54371191#54371191", "title": "how to compare values between two files?", "body": "<p>another <code>awk</code></p>\n\n<pre><code>$ awk -v c=, 'NR==FNR {a[$1]=$2; next}\n                      {for(i=2;i&lt;=NF;i++) \n                         {if(c a[$1] c !~ c $i c) p=(p==\"\"?$1\" \":p c) $i} \n                          if(p) print p; p=\"\"}' file2 FS=' |,' file1\n\n281475550885480 57,99\n</code></pre>\n"}], "owner": {"reputation": 53, "user_id": 10842759, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-tMaxGmTRYhg/AAAAAAAAAAI/AAAAAAAABN4/39toVPNi634/photo.jpg?sz=128", "display_name": "Jeevan Patil", "link": "https://stackoverflow.com/users/10842759/jeevan-patil"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 709, "favorite_count": 0, "accepted_answer_id": 54365243, "answer_count": 6, "score": 2, "last_activity_date": 1548441984, "creation_date": 1548415547, "last_edit_date": 1548418390, "question_id": 54364389, "link": "https://stackoverflow.com/questions/54364389/how-to-compare-values-between-two-files", "title": "how to compare values between two files?", "body": "<p>I have two files with two columns separated by space</p>\n\n<pre><code>cat file1.txt\n281475225437349 33,32,21,17,20,22,18,30,19,16,23,31\n281475550885480 35,32,33,21,39,40,57,36,41,17,20,38,34,37,16,99\n\ncat file2.txt\n281475550885480 16,17,20,21,32,33,34,35,36,37,38,39,40,41\n281475225437349 16,17,18,19,20,21,22,23,24,25,30,31,32,33\n</code></pre>\n\n<p>i want to compare values from file1 column2 with file2 column2 for same value in column1. \nand print only those values which does exist in file1 column2 but not in file2 column2 along and not vice versa along with respective value in column1</p>\n\n<p>Desired o/p</p>\n\n<p>it should not print anything for 281475225437349 as all values from file1 column2 present in file2 column 2 for 281475225437349</p>\n\n<p>it should only print values for 281475550885480 which present in file1 column2 but not present in file2 column2 . Like values 57 and 99 for 281475550885480</p>\n\n<p>So o/p file like:</p>\n\n<pre><code>cat output.txt\n281475550885480 57,99\n</code></pre>\n\n<p>I have tried sorting the file and the comparing using sdiff but it give difference and its taking time</p>\n\n<pre><code>sdiff file1.txt file2.txt\n</code></pre>\n"}, {"tags": ["perl", "intellij-idea"], "comments": [{"owner": {"reputation": 560, "user_id": 10850601, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-3R2h7RDJ9yU/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcYNkQa9HPTd778Jo28o4mlsEFPJpw/mo/photo.jpg?sz=128", "display_name": "Ed Grimm", "link": "https://stackoverflow.com/users/10850601/ed-grimm"}, "edited": false, "score": 1, "creation_date": 1548458116, "post_id": 54362677, "comment_id": 95562488, "body": "I would think the first requirement for being able to stop processing at breakpoints would be to either be able to invoke the code from the command line in a way that matches how it&#39;s called from Apache, or have Apache hook into an IDE that would wrap the perl debugger around the code (I&#39;ve no idea if the latter can even be done, but I&#39;d probably look to Padre for any hope of doing that.)  For my own web page debugging, I found logging Data::Dumper output of the arguments and pertinent environment of the calls I was interested in to be invaluable, but too awkward for me to say it&#39;s the answer."}, {"owner": {"reputation": 906, "user_id": 5827002, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46bb54c6217b5142b641251f83562319?s=128&d=identicon&r=PG&f=1", "display_name": "Quinn Wynn", "link": "https://stackoverflow.com/users/5827002/quinn-wynn"}, "reply_to_user": {"reputation": 560, "user_id": 10850601, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-3R2h7RDJ9yU/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcYNkQa9HPTd778Jo28o4mlsEFPJpw/mo/photo.jpg?sz=128", "display_name": "Ed Grimm", "link": "https://stackoverflow.com/users/10850601/ed-grimm"}, "edited": false, "score": 1, "creation_date": 1548509300, "post_id": 54362677, "comment_id": 95571099, "body": "Thanks @EdGrimm. Honestly, I&#39;m looking for something beyond Data::Dumper."}, {"owner": {"reputation": 560, "user_id": 10850601, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-3R2h7RDJ9yU/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcYNkQa9HPTd778Jo28o4mlsEFPJpw/mo/photo.jpg?sz=128", "display_name": "Ed Grimm", "link": "https://stackoverflow.com/users/10850601/ed-grimm"}, "edited": false, "score": 1, "creation_date": 1548528159, "post_id": 54362677, "comment_id": 95576233, "body": "Me, too. As I said, that&#39;&#39;s too awkward to be the answer. I&#39;d like an IDE hook, but when I was last in this situation, there was no such hook I could find. But that said, Padre was still very new at that time, so here&#39;s hoping that something has come out since then. :)"}, {"owner": {"reputation": 906, "user_id": 5827002, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46bb54c6217b5142b641251f83562319?s=128&d=identicon&r=PG&f=1", "display_name": "Quinn Wynn", "link": "https://stackoverflow.com/users/5827002/quinn-wynn"}, "reply_to_user": {"reputation": 560, "user_id": 10850601, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-3R2h7RDJ9yU/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcYNkQa9HPTd778Jo28o4mlsEFPJpw/mo/photo.jpg?sz=128", "display_name": "Ed Grimm", "link": "https://stackoverflow.com/users/10850601/ed-grimm"}, "edited": false, "score": 0, "creation_date": 1548638713, "post_id": 54362677, "comment_id": 95600561, "body": "Yeah, we&#39;re still hoping."}], "owner": {"reputation": 906, "user_id": 5827002, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46bb54c6217b5142b641251f83562319?s=128&d=identicon&r=PG&f=1", "display_name": "Quinn Wynn", "link": "https://stackoverflow.com/users/5827002/quinn-wynn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 140, "favorite_count": 1, "answer_count": 0, "score": 4, "last_activity_date": 1548409716, "creation_date": 1548409716, "question_id": 54362677, "link": "https://stackoverflow.com/questions/54362677/how-to-debug-perl-under-apache-with-perl5-idea", "title": "How to debug Perl under Apache with Perl5-IDEA?", "body": "<p>I suffered through the wiki of Perl5 plugin of IntelliJ IDEA, and this issue: <a href=\"https://github.com/Camelcade/Perl5-IDEA/issues/1771\" rel=\"nofollow noreferrer\">https://github.com/Camelcade/Perl5-IDEA/issues/1771</a> but I couldn't find any solutions.</p>\n\n<p>So how do we config this plugin to be able to debug Perl projects running under Apache mod_perl?</p>\n\n<p>Thank you.</p>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 481636, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 1, "creation_date": 1548402323, "post_id": 54360930, "comment_id": 95536089, "body": "<code>\\S+</code> only matches one or more non-whitespace chars while you have line breaks in there. Replace it with <code>((?s:.*?))</code> (or with <code>(.*?)</code> and add <code>s</code> modifier after the <code>&#47;</code> ending regex delimiter) and make sure the text is not read in line by line."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1548408406, "post_id": 54360930, "comment_id": 95538743, "body": "Does key2 contain line feeds (despite what you showed), or does it contain the two characters <code>` and </code>n` as shown?"}], "answers": [{"tags": [], "owner": {"reputation": 7646, "user_id": 6867048, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b939fdb5809fed8097c38bdf4370747b?s=128&d=identicon&r=PG&f=1", "display_name": "stack0114106", "link": "https://stackoverflow.com/users/6867048/stack0114106"}, "is_accepted": false, "score": 0, "last_activity_date": 1548416367, "last_edit_date": 1548416367, "creation_date": 1548408844, "answer_id": 54362431, "question_id": 54360930, "link": "https://stackoverflow.com/questions/54360930/how-to-match-a-key-starting-with-begin-private-key-in-perl/54362431#54362431", "title": "How to match a key starting with -----BEGIN PRIVATE KEY----- in perl?", "body": "<p>Turn on the /m and /s switch. When /m is turned on $ will match at newline and since you have \"\\n\" in key2 using $ will fail the match. You can match still end of the string with just (.+) or anchor it using \\Z. </p>\n\n<p>Check this out:</p>\n\n<pre><code>$ export a=\"Password ABCD1234 -----BEGIN PRIVATE KEY-----ABCDEFG\\nasdafasfas\\n\\safaf\\n-----END PRIVATE KEY-----\"\n$ echo $a | perl -0777 -ne ' /^\\s*Password\\s+(\\S+)\\s+(-+BEGIN.+)/ms and print \"key1=$1\\nkey2=$2\" '\nkey1=ABCD1234\nkey2=-----BEGIN PRIVATE KEY-----ABCDEFG\nasdafasfas\n\\safaf\n-----END PRIVATE KEY-----\n$ echo $a | perl -0777 -ne ' /^\\s*Password\\s+(\\S+)\\s+(-+BEGIN.+)\\Z/ms and print \"key1=$1\\nkey2=$2\" '\nkey1=ABCD1234\nkey2=-----BEGIN PRIVATE KEY-----ABCDEFG\nasdafasfas\n\\safaf\n-----END PRIVATE KEY-----\n$\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 4071515, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/620b98b757bd9a80d63afed754f3354b?s=128&d=identicon&r=PG&f=1", "display_name": "tesla", "link": "https://stackoverflow.com/users/4071515/tesla"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 204, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1548416367, "creation_date": 1548402173, "last_edit_date": 1548402745, "question_id": 54360930, "link": "https://stackoverflow.com/questions/54360930/how-to-match-a-key-starting-with-begin-private-key-in-perl", "title": "How to match a key starting with -----BEGIN PRIVATE KEY----- in perl?", "body": "<p>I am trying to match a key which is in the following format in Perl language.</p>\n\n<pre><code>Format =&gt; 'Password key1 key2'\n\nkey1   =&gt;  Alphanumeric text (ABCD1234)\n\nkey2 =&gt; -----BEGIN PRIVATE KEY-----ABCDEFG\\nasdafasfas\\n\\safaf\\n-----END PRIVATE KEY-----\n</code></pre>\n\n<p>I am not able to match this format with my regular expression.</p>\n\n<p>I have tried matching the keyword 'Password' then key1 but I am not able to match the key2 starting with hyphens.</p>\n\n<pre><code>^\\s*Password\\s+(\\S+)\\s+(-----BEGIN PRIVATE KEY-----(\\S+)-----END PRIVATE KEY-----)\\s*$\n</code></pre>\n\n<p>What am I doing wrong?</p>\n"}, {"tags": ["arrays", "perl", "matrix", "multidimensional-array", "2d"], "comments": [{"owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "edited": false, "score": 1, "creation_date": 1548395450, "post_id": 54358712, "comment_id": 95533613, "body": "One idea: can you express the rotation as a function <code>f(x,y)</code> i.e. the input <code>(x,y)</code> are the row/col index of each member in the middle layer and the output is the rotated position <code>(x&#39;,y&#39;)</code>?. Then the approach would be (1) make a copy of <code>@arr</code>, (2) loop over the middle layer members and place each member in the copy based on the output of <code>f()</code>."}, {"owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "edited": false, "score": 1, "creation_date": 1548395558, "post_id": 54358712, "comment_id": 95533653, "body": "I guess you would also need a function <code>members(ring_identifier)</code> which returns an array with <code>[x,y]</code> entries of all members of ring <code>ring_identifier</code>. That would be the source for the <code>for my($x, $y) (@{ $members }) { ... }</code> loop."}, {"owner": {"reputation": 116, "user_id": 5384096, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b64e6361b322baa128ab1ab00f2338a6?s=128&d=identicon&r=PG", "display_name": "SM177Y", "link": "https://stackoverflow.com/users/5384096/sm177y"}, "reply_to_user": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "edited": false, "score": 0, "creation_date": 1548452195, "post_id": 54358712, "comment_id": 95560667, "body": "I was thinking of something like this but wasn&#39;t exactly sure how to implement it. Thank you very much."}, {"owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "edited": false, "score": 1, "creation_date": 1548452888, "post_id": 54358712, "comment_id": 95560894, "body": "Glad we could be of help, I definitely enjoyed working on this. Please remember to up-vote on the answers and accept the one you like best."}], "answers": [{"comments": [{"owner": {"reputation": 116, "user_id": 5384096, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b64e6361b322baa128ab1ab00f2338a6?s=128&d=identicon&r=PG", "display_name": "SM177Y", "link": "https://stackoverflow.com/users/5384096/sm177y"}, "edited": false, "score": 0, "creation_date": 1548451723, "post_id": 54360415, "comment_id": 95560483, "body": "Thank you for your time. This is definitely the most intricate answer and thorough response. In a 1KB array test it is only 1/3 the speed of my example."}, {"owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "reply_to_user": {"reputation": 116, "user_id": 5384096, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b64e6361b322baa128ab1ab00f2338a6?s=128&d=identicon&r=PG", "display_name": "SM177Y", "link": "https://stackoverflow.com/users/5384096/sm177y"}, "edited": false, "score": 0, "creation_date": 1548455728, "post_id": 54360415, "comment_id": 95561793, "body": "If you use the in-place approach on a large array it might improve performance when you replace the <code>push(@members, ...</code> with (a) before the first loop <code>$#members = $length - 1</code>, i.e. pre-allocate the array, and (b) in the first loop <code>$members[$index] = ...</code>"}, {"owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "reply_to_user": {"reputation": 116, "user_id": 5384096, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b64e6361b322baa128ab1ab00f2338a6?s=128&d=identicon&r=PG", "display_name": "SM177Y", "link": "https://stackoverflow.com/users/5384096/sm177y"}, "edited": false, "score": 0, "creation_date": 1548541707, "post_id": 54360415, "comment_id": 95579619, "body": "Added 3rd &amp; 4th optimization idea."}], "tags": [], "owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "is_accepted": false, "score": 1, "last_activity_date": 1548541688, "last_edit_date": 1548541688, "creation_date": 1548399612, "answer_id": 54360415, "question_id": 54358712, "link": "https://stackoverflow.com/questions/54358712/how-do-you-rotate-a-single-layer-of-a-matrix-by-n-places/54360415#54360415", "title": "How do you rotate a single layer of a matrix by n places?", "body": "<p>The approach in a nutshell:</p>\n\n<ul>\n<li>copy array</li>\n<li>calculate list of members (row, column) for the ring</li>\n<li><p>loop over list index</p>\n\n<ul>\n<li>read from member[index] in original array</li>\n<li>write to member[(index + shift) % ring length] in copy array</li>\n</ul></li>\n<li><p>Right shift by N places: shift ==  N</p></li>\n<li>Left shift by N places:  shift == -N</li>\n</ul>\n\n<pre class=\"lang-perl prettyprint-override\"><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\n\nsub dump_array($$) {\n    my($label, $array) = @_;\n    print \"${label}:\\n\";\n    foreach my $row (@{ $array }) {\n        print join(\" \", @{ $row }), \"\\n\";\n    }\n    print \"\\n\";\n}\n\nsub copy_array($) {\n    my($array) = @_;\n    my @copy;\n    foreach my $row (@{ $array }) {\n        push(@copy, [ @{ $row } ]);\n    }\n    return(\\@copy);\n}\n\nsub ring_index_to_row_col($$$$$) {\n    my($N, $ring, $total, $length, $index) = @_;\n    my($row, $col);\n\n    if ($index &lt; $length) {\n        # top row, left to right\n        $row = 0;\n        $col = $index;\n    } elsif ($index &lt; 2 * $length - 2) {\n        # top to bottom, right row\n        $row = $index - $length + 1;\n        $col = $N - 1 - 2 * $ring;\n    } elsif ($index &lt; 3 * $length - 2) {\n        # bottom row, right to left\n        $row = $N - 1 - 2 * $ring;\n        #$col = $length - 1 - ($index - 2 * $length + 2);\n        $col = -$index + 3 * $length - 3;\n    } else {\n        # bottom to top, left row\n        #$row = $total - 1 - $index + 1;\n        $row = $total - $index;\n        $col = 0;\n    }\n\n    #print \"${index}\\t of ${total}\\t-&gt; ${row}, ${col}\\n\";\n\n    # shift $length x length array to offset ($ring, $ring)\n    return([$row + $ring, $col + $ring]);\n}\n\nsub ring_members($$) {\n    my($N, $ring) = @_;\n    my @list;\n\n    # @TODO: odd N?\n    #\n    # Examples for N == 6\n    #   0   -&gt; 2*6 + 2*4 = 20\n    #   1   -&gt; 2*4 + 2*2 = 12\n    #   2   -&gt; 2*2 + 2*0 =  4\n    #\n    # Examples for N == 5\n    #   0   -&gt; 2*5 + 2*3\n    #   1   -&gt; 2*3 + 2*1\n    #   2   -&gt; 1\n    #\n    # Examples for N == 4\n    #   0   -&gt; 2*4 + 2*2 = 12\n    #   1   -&gt; 2*2 + 2*0 =  4\n    my $length  = $N - 2 * $ring;\n    my $members = 4 *  $N - 8 * $ring - 4;\n\n    foreach my $index (0..$members-1) {\n        push(@list, ring_index_to_row_col($N, $ring, $members, $length, $index));\n    }\n\n    return(\\@list);\n}\n\nsub rotate_array_ring(\\@$$) {\n    my($source, $ring, $shift) = @_;\n\n    # Sanity check. @TODO is the check correct for odd N?\n    my $N              = @{ $source };\n    die \"ERROR: invalid ring '${ring}' for 2D array of size $N!\\n\"\n        unless $ring &lt; ($N / 2);\n\n    my $copy   = copy_array($source);\n\n    my $list   = ring_members($N, $ring);\n    my $length = @{ $list };\n\n    foreach my $index (0..$length-1) {\n        my($row,   $col)   = @{ $list-&gt;[ $index                     ] };\n        my($s_row, $s_col) = @{ $list-&gt;[($index + $shift) % $length ] };\n\n        $copy-&gt;[$s_row]-&gt;[$s_col] = $source-&gt;[$row]-&gt;[$col];\n    }\n\n    return($copy);\n}\n\nmy @source;\nwhile (&lt;DATA&gt;) {\n    chomp;\n    push(@source, [ split(/\\s+/, $_) ]);\n}\ndump_array('SOURCE', \\@source);\n\ndump_array('SHIFT 1 RING 0', rotate_array_ring(@source, 0, 1));\ndump_array('SHIFT 1 RING 1', rotate_array_ring(@source, 1, 1));\ndump_array('SHIFT 1 RING 2', rotate_array_ring(@source, 2, 1));\ndump_array('SHIFT 2 RING 0', rotate_array_ring(@source, 0, 2));\ndump_array('SHIFT 2 RING 1', rotate_array_ring(@source, 1, 2));\ndump_array('SHIFT 2 RING 2', rotate_array_ring(@source, 2, 2));\n\nexit 0;\n\n__DATA__\n0 1 2 3 4 5\na b c d e f\n5 4 3 2 1 0\n9 8 7 6 5 4\nf e d c b a\n4 5 6 7 8 9\n</code></pre>\n\n<p>Example output:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>$ perl dummy.pl\nSOURCE:\n0 1 2 3 4 5\na b c d e f\n5 4 3 2 1 0\n9 8 7 6 5 4\nf e d c b a\n4 5 6 7 8 9\n\nSHIFT 1 RING 0:\na 0 1 2 3 4\n5 b c d e 5\n9 4 3 2 1 f\nf 8 7 6 5 0\n4 e d c b 4\n5 6 7 8 9 a\n\nSHIFT 1 RING 1:\n0 1 2 3 4 5\na 4 b c d f\n5 8 3 2 e 0\n9 e 7 6 1 4\nf d c b 5 a\n4 5 6 7 8 9\n\nSHIFT 1 RING 2:\n0 1 2 3 4 5\na b c d e f\n5 4 7 3 1 0\n9 8 6 2 5 4\nf e d c b a\n4 5 6 7 8 9\n\nSHIFT 2 RING 0:\n5 a 0 1 2 3\n9 b c d e 4\nf 4 3 2 1 5\n4 8 7 6 5 f\n5 e d c b 0\n6 7 8 9 a 4\n\nSHIFT 2 RING 1:\n0 1 2 3 4 5\na 8 4 b c f\n5 e 3 2 d 0\n9 d 7 6 e 4\nf c b 5 1 a\n4 5 6 7 8 9\n\nSHIFT 2 RING 2:\n0 1 2 3 4 5\na b c d e f\n5 4 6 7 1 0\n9 8 2 3 5 4\nf e d c b a\n4 5 6 7 8 9\n</code></pre>\n\n<p><strong>OPTIMIZATION:</strong> don't copy the whole array, but</p>\n\n<ol>\n<li>use <code>$list</code> to copy out the ring members to a list and then</li>\n<li>loop over that list to place them into the shifted position back into the array.</li>\n</ol>\n\n<p>I.e. two loops instead of one:</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>my $list   = ring_members($N, $ring);\nmy $length = @{ $list };\n\n# in-place approach\nmy @members;\nforeach my $index (0..$length-1) {\n    my($row, $col) = @{ $list-&gt;[ $index ] };\n    push(@members, $source-&gt;[$row]-&gt;[$col]);\n}\nforeach my $index (0..$length-1) {\n    my($row, $col) = @{ $list-&gt;[ ($index + $shift) % $length ] };\n    $source-&gt;[$row]-&gt;[$col] = $members[$index];\n}\n\nreturn($source);\n</code></pre>\n\n<p><strong>OPTIMIZATION 2:</strong> if you have a sequence of operations that you need to apply to a set of same-sized 2D arrays, then you could pre-generate them and process them over-and-over using a function:</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>my $N     = 6; # all arrays are of same size\nmy @rings = (\n    ring_members($N, 0),\n    ring_members($N, 1),\n    ring_members($N, 2),\n);\nmy @operations = (\n    { ring =&gt; $rings[0], shift =&gt;  1 },\n    { ring =&gt; $rings[1], shift =&gt; -1 },\n    { ring =&gt; $rings[2], shift =&gt;  2 },\n    # ...\n)\n\n# apply one operation in-place on array\nsub apply_operation($$) {\n    my($array, $operation) = @_;\n    my $list               = $operation-&gt;{ring};\n    my $shift              = $operation-&gt;{shift};\n    my $length             = @{ $list };\n\n    my @members;\n    foreach my $index (0..$length-1) {\n        my($row, $col) = @{ $list-&gt;[ $index ] };\n        push(@members, $array-&gt;[$row]-&gt;[$col]);\n    }\n    foreach my $index (0..$length-1) {\n        my($row, $col) = @{ $list-&gt;[ ($index + $shift) % $length ] };\n        $array-&gt;[$row]-&gt;[$col] = $members[$index];\n    }\n}\n\n# apply operation sequence in-place on array\nsub apply_operations($$) {\n    my($array, $operations) = @_;\n\n    foreach my $operation (@{ $operations }) {\n        apply_operation($array, $operation);    \n    }\n}\n\napply_operations(\\@array1, \\@operations);\napply_operations(\\@array2, \\@operations);\napply_operations(\\@array3, \\@operations);\n...\n</code></pre>\n\n<p><strong>OPTIMIZATION 3:</strong> don't make a copy of the complete group in the in-place approach, but only of those members which would be overwritten by the roation. I.e. use 3 loops:</p>\n\n<ol>\n<li>copy the first or last <code>$shift</code> members (depending on the rotation direction) to <code>@cache</code> array.</li>\n<li>do a straight copy for the other <code>$length - abs($shift)</code> members.</li>\n<li>copy <code>@cache</code> members to their rotated places.</li>\n</ol>\n\n<p><strong>OPTIMIZATION 4:</strong> don't use a 2D array (AoA) but a 1D array with <code>$N * $N</code> entries. I.e.</p>\n\n<ul>\n<li>instead of <code>ring_index_to_row_col()</code> returning <code>[$row, $col]</code> you would have <code>ring_index_to_array_index()</code> returning <code>$row * $N + $col</code>.</li>\n<li>array accesses <code>-&gt;[$row]-&gt;[$col]</code> would be replaced with <code>-&gt;[$array_index]</code>.</li>\n</ul>\n"}, {"comments": [{"owner": {"reputation": 116, "user_id": 5384096, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b64e6361b322baa128ab1ab00f2338a6?s=128&d=identicon&r=PG", "display_name": "SM177Y", "link": "https://stackoverflow.com/users/5384096/sm177y"}, "edited": false, "score": 0, "creation_date": 1548451255, "post_id": 54364201, "comment_id": 95560302, "body": "This is good. I like it :) In practice, on a 1KB matrix it is almost identical performance to my original method."}], "tags": [], "owner": {"reputation": 3472, "user_id": 4990392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89acc35f0339a9c7e6ae36443a23e2d9?s=128&d=identicon&r=PG&f=1", "display_name": "Dada", "link": "https://stackoverflow.com/users/4990392/dada"}, "is_accepted": false, "score": 1, "last_activity_date": 1548499501, "last_edit_date": 1548499501, "creation_date": 1548414870, "answer_id": 54364201, "question_id": 54358712, "link": "https://stackoverflow.com/questions/54358712/how-do-you-rotate-a-single-layer-of-a-matrix-by-n-places/54364201#54364201", "title": "How do you rotate a single layer of a matrix by n places?", "body": "<p>The idea of my method is to use a <a href=\"https://en.wikipedia.org/wiki/Queue_(abstract_data_type)\" rel=\"nofollow noreferrer\">queue</a> (well, I'm using a Perl array here because I couldn't find a suitable module, but it's far from ideal) containing <code>n</code> elements (where <code>n</code> is the number of places you want to rotate your layer by), and to iterate through each elements of the layer, and each time, <code>push</code> its value to the queue, and replace it with the first element of the queue.</p>\n\n<p>This is what the sub <code>rotate_matrix</code> does.<br>\n - <code>$i</code> and <code>$j</code> represent the index of the current element of the layer. Their values goes between <code>$target_layer</code> and <code>$max_i</code>/<code>$max_j</code>; the sub <code>next_ij</code> takes care of computing the index of the next element of the layer.<br>\n - The interesting stuffs happen inside the <code>while(1)</code> loop (which is actually a <code>do...while</code>; but <code>do while</code> loops are <a href=\"https://stackoverflow.com/questions/7897015/perl-do-while-and-last-command\">a bit special</a> in Perl): the value of the current element is pushed to the queue, and, if their are more than <code>$n</code> elements in the queue (meaning that we have already pushed <code>$n</code> elements, representing the fact the we want to rotate by <code>$n</code>), we replace its value by the first element of the queue. The <code>continue</code> block takes care of incrementing <code>$i</code> and <code>$j</code>, and stops the loop once we come back to the first element of the layer.<br>\n- Once this is loop is done, the first <code>n</code> elements of the layer haven't been updated (because of this <code>next unless @queue &gt; $n</code>), so we need to take care of that: this is the <code>while (@queue)</code> loop).  </p>\n\n<p>Complexity-wise, there is no need to copy the array. The memory usage is <code>O(n)</code> (the size of the queue). Time-wise, you loop once over each element of the layer, and each time, you <code>push</code> and <code>shift</code> from you queue (using a better datastructure, like a linked list, this would be <code>O(1)</code>, but with a Perl array, it's probably in the lines of <code>O(n)</code>; but probably amortized to <code>O(1)</code>), and compute the next index (<code>O(1)</code>). So you end up with a time complexity, you end up with <code>O(size of the layer to rotate)</code>.</p>\n\n<p>A few caveats: if <code>$n</code> is greater than the number of elements in the layer, this won't work (but it can be fixed with a simple modulo). If you ask for a layer that isn't present in the matrix (like 4-th layer of a 2x2 matrix), weird stuffs will happen (but once again, it's easy to fix).</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\nuse v5.14;\n\n\nmy @arr = ( [qw(0 1 2 3 4 5)],\n            [qw(a b c d e f)],\n            [qw(5 4 3 2 1 0)],\n            [qw(9 8 7 6 5 4)],\n            [qw(f e d c b a)],\n            [qw(4 5 6 7 8 9)] );\n\nprint_matrix(@arr);\n\nrotate_matrix(\\@arr, 2, 2);\nsay \"\";\n\nprint_matrix(@arr);\n\n\nsub rotate_matrix {\n    my ($matrix, $target_layer, $n) = @_;\n    --$target_layer; # I prefer a 0-indexed value\n    # TODO: check that $target_layer &lt; @$matrix/2\n    # TODO: do something like $n = $n % (num of elements in layer)\n\n    my @queue;\n    my ($i, $j) = ($target_layer, $target_layer);\n    my ($max_i, $max_j) = (@{$matrix-&gt;[0]}-$target_layer-1, @$matrix-$target_layer-1);\n\n    while (1) { # Actually a do...while loop (see 'continue' block)\n        push @queue, $matrix-&gt;[$i][$j];\n        next unless @queue &gt; $n; # Waiting to reach n-th element\n        $matrix-&gt;[$i][$j] = shift @queue;\n    } continue {\n        ($i, $j) = next_ij($target_layer,$max_i,$max_j,$i,$j);\n        # Stopping if we are back at the begining\n        last if $i == $target_layer &amp;&amp; $j == $target_layer;\n    }\n\n    # Emptying queue\n    while (@queue) {\n        $matrix-&gt;[$i][$j] = shift @queue;\n        ($i, $j) = next_ij($target_layer,$max_i,$max_j,$i,$j);\n    }\n\n\n}\n\n# Computes the index of the next element of the layer\nsub next_ij {\n    my ($target_layer, $max_i, $max_j, $i, $j) = @_;\n    if ($j == $max_j) { # Last column\n        if ($i == $max_i) { # Last row (bottom right -&gt; going left)\n            return ($i, $j-1);\n        } else { # Not last row (somewhere on the right col -&gt; going down)\n            return ($i+1, $j);\n        }\n    } elsif ($j == $target_layer) { # First column\n        if ($i == $target_layer) { # First row (top left -&gt; going right)\n            return ($i, $j+1);\n        } else { # Not top row (somewhere on the left col -&gt; going up)\n            return ($i-1, $j);\n        }\n    } else { # Neither first nor last column\n        if ($i == $target_layer) { # First row (somewhere on the top row -&gt; going right)\n            return ($i, $j+1);\n        } else { # Last row (somewhere on the last row -&gt; going left)\n            return ($i, $j-1);\n        }\n    }\n}\n\n\n\n# Prints given matrix\nsub print_matrix {\n    foreach my $row (@_) {\n        my $cnt=0;\n        foreach my $char (@$row) {\n            print $char; $cnt++;\n            if ( $cnt == scalar(@_) ) {\n                print \"\\n\";\n            } else {\n                print \" \";\n            }\n        }\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 116, "user_id": 5384096, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b64e6361b322baa128ab1ab00f2338a6?s=128&d=identicon&r=PG", "display_name": "SM177Y", "link": "https://stackoverflow.com/users/5384096/sm177y"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 202, "favorite_count": 1, "answer_count": 2, "score": 2, "last_activity_date": 1548541688, "creation_date": 1548388291, "last_edit_date": 1548454428, "question_id": 54358712, "link": "https://stackoverflow.com/questions/54358712/how-do-you-rotate-a-single-layer-of-a-matrix-by-n-places", "title": "How do you rotate a single layer of a matrix by n places?", "body": "<p>I have read all the questions on stack overflow regarding rotating matrices\nand none of them address anything other than transposing or rotating by 90 or 180 degrees in either direction of either single layers or the entire matrices.</p>\n\n<p>I have already answered the question as far as accomplishing it but I am looking for fast and/or 'in place' methods, preferably, but any methods\nother than the one I have given would be nice to see as well if only for\neducational purposes. My example is in Perl 5 but as long as your intentions are clear, most any language should be acceptable.</p>\n\n<p>The matrix used in my example is as follows</p>\n\n<pre><code># 2D array @arr has 3 layers.\n# @arr is \n#         0 1 2 3 4 5\n#         a b c d e f\n#         5 4 3 2 1 0\n#         9 8 7 6 5 4\n#         f e d c b a\n#         4 5 6 7 8 9\n</code></pre>\n\n<p>Goal->Rotate middle layer 2 places clockwise to get the following...</p>\n\n<p>Notice how the top left corner of the middle layer, 'b c', has moved 2 places to the right and the '8 4' from the middle left side is now where the 'b c' was.</p>\n\n<pre><code># Rotated @arr is \n#         0 1 2 3 4 5\n#         a 8 4 b c f\n#         5 e 3 2 d 0\n#         9 d 7 6 e 4 \n#         f c b 5 1 a\n#         4 5 6 7 8 9\n</code></pre>\n\n<p>Currently I have been doing something along the lines of this, which is admittedly, terribly slow. Especially on many large arrays.</p>\n\n<pre><code>#!/usr/bin/env perl\nuse strict; use warnings;\n\n# Coordinates are $arr[$row][$col]\nmy @arr;\n$arr[0][0]='0'; $arr[0][1]='1'; $arr[0][2]='2'; $arr[0][3]='3'; $arr[0][4]='4'; $arr[0][5]='5';\n$arr[1][0]='a'; $arr[1][1]='b'; $arr[1][2]='c'; $arr[1][3]='d'; $arr[1][4]='e'; $arr[1][5]='f';\n$arr[2][0]='5'; $arr[2][1]='4'; $arr[2][2]='3'; $arr[2][3]='2'; $arr[2][4]='1'; $arr[2][5]='0';\n$arr[3][0]='9'; $arr[3][1]='8'; $arr[3][2]='7'; $arr[3][3]='6'; $arr[3][4]='5'; $arr[3][5]='4';\n$arr[4][0]='f'; $arr[4][1]='e'; $arr[4][2]='d'; $arr[4][3]='c'; $arr[4][4]='b'; $arr[4][5]='a';\n$arr[5][0]='4'; $arr[5][1]='5'; $arr[5][2]='6'; $arr[5][3]='7'; $arr[5][4]='8'; $arr[5][5]='9';\n\n# Print matrix\nprint_matrix(@arr);\n\n# Extract layer 2\nmy $target_layer=2;\nmy $layer_two=extract_layer($target_layer,@arr);\n\n# From the top left corner of the layer, it is as follows\n# bcde15bcde84\nprint \"\\n$layer_two\\n\";\n\n# Rotate layer 2 clockwise 2 places\n$layer_two=rotate_layer_cl($layer_two,2);\n\n# 84bcde15bcde\nprint \"$layer_two\\n\\n\";\n\n# Replace layer 2 in the same way\n@arr=replace_layer($target_layer,$layer_two,@arr);\n\n# Print again\nprint_matrix(@arr);\n\n### Sub functions ###\n# Extract layer by walking around it's coordinates like so\n# [1,1]-[1,4]  Top(left-&gt;right)\n# [2,4]-[4,4]  Right(top-&gt;bottom)\n# [4,3]-[4,1]  Bottom(right-&gt;left)\n# [3,1]-[2,1]  Left(bottom-&gt;top)\nsub extract_layer {\n    my ($layer_cnt,@matrix)=@_;\n    my $width=scalar(@matrix);\n    my $layer_width=$width-$layer_cnt;\n    # layer_cnt=2\n    # width=6\n    # layer_width=4\n    my $layer;\n    for my $col ( $layer_cnt-1..$layer_width ) {\n        $layer.=$matrix[$layer_cnt-1][$col];\n    }\n    for my $row ( $layer_cnt..$layer_width ) {\n        $layer.=$matrix[$row][$layer_width];\n    }\n    my $cnt=$layer_width-1;\n    while ( $cnt &gt;= $layer_cnt-1 ) {\n        $layer.=$matrix[$layer_width][$cnt];\n        $cnt--;\n    }\n    $cnt=$layer_width-1;\n    while ( $cnt &gt;= $layer_cnt ) {\n        $layer.=$matrix[$cnt][$layer_cnt-1];\n        $cnt--;\n    }\n    return $layer;\n}\n\n# Shift input to the right by $n places, wrapping around.\nsub rotate_layer_cl {\n    my $n=$_[1];\n    my $buf=substr($_[0],length($_[0])-$n,$n);\n    return $buf.substr($_[0],0,length($_[0])-$n);\n}\n\n# Replace each char from the rotated layer.\nsub replace_layer {\n    my ($layer_cnt,$layer,@matrix)=@_;\n    my $width=scalar(@matrix);\n    my $layer_width=$width-$layer_cnt;\n    # layer_cnt=2\n    # width=6\n    # layer_width=4\n    my $slot=0;\n    for my $col ( $layer_cnt-1..$layer_width ) {\n        $matrix[$layer_cnt-1][$col]=substr($layer,$slot,1);\n        $slot++;\n    }\n    for my $row ( $layer_cnt..$layer_width ) {\n        $matrix[$row][$layer_width]=substr($layer,$slot,1);\n        $slot++;\n    }\n    my $cnt=$layer_width-1;\n    while ( $cnt &gt;= $layer_cnt-1 ) {\n        $matrix[$layer_width][$cnt]=substr($layer,$slot,1);\n        $slot++;\n        $cnt--;\n    }\n    $cnt=$layer_width-1;\n    while ( $cnt &gt;= $layer_cnt ) {\n        $matrix[$cnt][$layer_cnt-1]=substr($layer,$slot,1);\n        $slot++;\n        $cnt--;\n    }\n    return @matrix;\n}\n\n# Prints given matrix\nsub print_matrix {\n    foreach my $row (@_) {\n        my $cnt=0;\n        foreach my $char (@$row) {\n            print $char; $cnt++;\n            if ( $cnt == scalar(@_) ) {\n                print \"\\n\";\n            } else {\n                print \" \";\n            }\n        }\n    }\n}\n</code></pre>\n\n<p>The above code outputs as follows,</p>\n\n<pre><code>0 1 2 3 4 5\na b c d e f\n5 4 3 2 1 0\n9 8 7 6 5 4\nf e d c b a\n4 5 6 7 8 9\n\nbcde15bcde84\n84bcde15bcde\n\n0 1 2 3 4 5\na 8 4 b c f\n5 e 3 2 d 0\n9 d 7 6 e 4\nf c b 5 1 a\n4 5 6 7 8 9\n</code></pre>\n\n<p>which shows the array before rotating the middle layer, the middle layer as a string, the middle layer shifted as a string, and the final resulting array after the middle layer has been rotated 2 places to the right.</p>\n\n<p>-----EDIT-----</p>\n\n<p>So far, the fastest method I have found is to not actually use the full 2D array but to put the block in a regular array like...</p>\n\n<pre><code>my @hex_ary=('1234', '5678', '90ab', 'cdef');\n</code></pre>\n\n<p>Then create the layer string and shift it the same way my original example shows.</p>\n\n<p>However, because they are strings, I only need to \"walk\" up and down the sides. The top and bottom are simply referenced as... </p>\n\n<pre><code>my $top=substr($hex_ary[0],0,3);\n</code></pre>\n\n<p>and</p>\n\n<pre><code>my $bot=reverse(substr($hex_ary[3],0,3));\n</code></pre>\n\n<p>for the outer layer in this small 4x4 array, while the sides are itered through with</p>\n\n<pre><code>my $right_side_char=substr($hex_ary[$top_row-$i],-1);\nmy $left_side_char=substr($hex_ary[$bot_row+$i],0,1);\n</code></pre>\n\n<p>Doing so increases performance approx. 100% from the 2D method because the number of slices taken from the array is then half+2.</p>\n\n<p>Maybe someone with a better grasp of C could create something more efficient. I feel like Perl is just only capable of so much sometimes.</p>\n"}, {"tags": ["linux", "perl", "cron"], "comments": [{"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1548352359, "post_id": 54352666, "comment_id": 95520595, "body": "Compare the output <code>perl -V</code> (and maybe <code>set</code>) in both the environments."}, {"owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "edited": false, "score": 3, "creation_date": 1548352501, "post_id": 54352666, "comment_id": 95520670, "body": "Did you check the logs from the cron job? Any messages or errors? If you can&#39;t get any job output from cron, maybe change the end of the cron job from <code>2&gt;&amp;1</code> to <code>&gt;&gt;&#47;tmp&#47;my-cron-job.log 2&gt;&amp;1</code> and then monitor that file."}, {"owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "edited": false, "score": 1, "creation_date": 1548352612, "post_id": 54352666, "comment_id": 95520718, "body": "BTW: you should also be able to create a user cron job on your Linux test machine (<code>crontab -e</code>). Maybe you can already reproduce the issue there?"}, {"owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "edited": false, "score": 0, "creation_date": 1548352823, "post_id": 54352666, "comment_id": 95520826, "body": "Is <code>&#47;apps&#47;tu01668&#47;</code> available in the production environment? Are the perl versions in both environment compatible to each other, i.e. can the production environment env load (binary) modules from <code>&#47;apps&#47;tu01688&#47;perl5&#47;lib&#47;perl5</code>?"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 2, "creation_date": 1548357039, "post_id": 54352666, "comment_id": 95522661, "body": "Adding <code>MAILTO=user@machine</code> (with your email for instance) to the top of the crontab may recover some messages (that are emitted but now go to some forsaken account/log)"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1548357249, "post_id": 54352666, "comment_id": 95522755, "body": "Hhow does this do in the production environment, run by hand (command-line)?"}, {"owner": {"reputation": 4598, "user_id": 145364, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7fdd3f07ac5b720b510dc17843ab9d37?s=128&d=identicon&r=PG", "display_name": "Jim Davis", "link": "https://stackoverflow.com/users/145364/jim-davis"}, "edited": false, "score": 2, "creation_date": 1548359857, "post_id": 54352666, "comment_id": 95523915, "body": "Is <code>cvs2xls</code> a typo in your cron entry, or just in the question here?"}, {"owner": {"reputation": 2833, "user_id": 9300627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7a38cf029222bcf1d902e6b2759ffeb?s=128&d=identicon&r=PG", "display_name": "haukex", "link": "https://stackoverflow.com/users/9300627/haukex"}, "edited": false, "score": 4, "creation_date": 1548364099, "post_id": 54352666, "comment_id": 95525773, "body": "I&#39;ve learned the hard way (several times \ud83d\ude09): Always use absolute path names for everything in <code>crontab</code>. <code>&#47;path&#47;to&#47;perl &#47;path&#47;to&#47;cvs2xls &#47;path&#47;to&#47;input.txt &#47;path&#47;to&#47;output.xls</code>. Also don&#39;t assume any environment variables will be the same as at the command line, including <code>PATH</code> and <code>PERL5LIB</code> (if necessary, add <code>-I&#47;path&#47;to&#47;libs</code>)."}], "answers": [{"tags": [], "owner": {"reputation": 333, "user_id": 4220763, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6AuCF.jpg?s=128&g=1", "display_name": "Hannibal", "link": "https://stackoverflow.com/users/4220763/hannibal"}, "is_accepted": false, "score": 2, "last_activity_date": 1548367651, "last_edit_date": 1548367651, "creation_date": 1548367346, "answer_id": 54355990, "question_id": 54352666, "link": "https://stackoverflow.com/questions/54352666/perl-script-cron-environment-issue/54355990#54355990", "title": "Perl script cron/environment issue", "body": "<p>Uhmm.. don't put chained commands in cron, use an external script instead. Anyway: some suggestions that may help you:</p>\n\n<h2>Debugging cron commands</h2>\n\n<p>Check the mail! By default cron will mail any output from the command to the user it is running the command as. If there is no output there will be no mail. If you want cron to send mail to a different account then you can set the MAILTO environment variable in the crontab file e.g.</p>\n\n<pre><code>MAILTO=user@somehost.tld\n1 2 * * * /path/to/your/command\n</code></pre>\n\n<p>Capture the output yourself</p>\n\n<pre><code>1 2 * * *  /path/to/your/command &amp;&gt;/tmp/mycommand.log\n</code></pre>\n\n<p>which captures stdout and stderr to /tmp/mycommand.log</p>\n\n<p>Look at the logs; cron logs its actions via syslog, which (depending on your setup) often go to <code>/var/log/cron</code> or <code>/var/log/syslog</code>.</p>\n\n<p>If required you can filter the cron statements with e.g.</p>\n\n<pre><code>grep CRON /var/log/syslog \n</code></pre>\n\n<p>Now that we've gone over the basics of cron, where the files are and how to use them let's look at some common problems. </p>\n\n<h3>Check that cron is running</h3>\n\n<p>If cron isn't running then your commands won't be scheduled ...</p>\n\n<pre><code>ps -ef | grep cron | grep -v grep\n</code></pre>\n\n<p>should get you something like </p>\n\n<pre><code>root    1224   1  0 Nov16 ?    00:00:03 cron\n</code></pre>\n\n<p>or</p>\n\n<pre><code>root    2018   1  0 Nov14 ?    00:00:06 crond\n</code></pre>\n\n<p>If not restart it</p>\n\n<pre><code>/sbin/service cron start\n</code></pre>\n\n<p>or</p>\n\n<pre><code>/sbin/service crond start\n</code></pre>\n\n<p>There may be other methods; use what your distro provides.</p>\n\n<h3>cron runs your command in a restricted environment.</h3>\n\n<p>What environment variables are available is likely to be very limited.  Typically, you'll only get a few variables defined, such as <code>$LOGNAME</code>, <code>$HOME</code>, and <code>$PATH</code>.</p>\n\n<p>Of particular note is the <code>PATH</code> is restricted to <code>/bin:/usr/bin</code>. <strong>The vast majority of \"my cron script doesn't work\" problems are caused by this restrictive path</strong>.  If your command is in a different location you can solve this in a couple of ways:</p>\n\n<ol>\n<li><p>Provide the full path to your command.</p>\n\n<pre><code>1 2 * * * /path/to/your/command\n</code></pre></li>\n<li><p>Provide a suitable PATH in the crontab file</p>\n\n<pre><code>PATH=/usr:/usr/bin:/path/to/something/else\n1 2 * * * command \n</code></pre></li>\n</ol>\n\n<p>If your command requires other environment variables you can define them in the crontab file too.</p>\n\n<h3>cron runs your command with cwd == $HOME</h3>\n\n<p>Regardless of where the program you execute resides on the filesystem, the current working directory of the program when cron runs it will be <strong>the user's home directory</strong>.  If you access files in your program, you'll need to take this into account if you use relative paths, or (preferably) just use fully-qualified paths everywhere, and save everyone a whole lot of confusion.</p>\n\n<h3>The last command in my crontab doesn't run</h3>\n\n<p>Cron generally requires that commands are terminated with a new line. Edit your crontab; go to the end of the line which contains the last command and insert a new line (press enter).</p>\n\n<h3>Check the crontab format</h3>\n\n<p>You can't use a user crontab formatted crontab for /etc/crontab or the fragments in /etc/cron.d and vice versa.  A user formatted crontab does not include a username in the 6th position of a row, while a system formatted crontab includes the username and runs the command as that user.</p>\n\n<h3>I put a file in /etc/cron.{hourly,daily,weekly,monthly} and it doesn't run</h3>\n\n<ul>\n<li>Check that the filename doesn't have an extension see <a href=\"http://man.cx/run-parts%288%29\" rel=\"nofollow noreferrer\">run-parts</a></li>\n<li>Ensure the file has execute permissions.</li>\n<li>Tell the system what to use when executing your script (eg. put <code>#!/bin/sh</code> at top)</li>\n</ul>\n\n<h3>Cron date related bugs</h3>\n\n<p>If your date is recently changed by a user or system update, timezone or other, then crontab will start behaving erratically and exhibit bizarre bugs, sometimes working, sometimes not.  This is crontab's attempt to try to \"do what you want\" when the time changes out from underneath it.  The \"minute\" field will become ineffective after the hour is changed.  In this scenario, only asterisks would be accepted.  Restart cron and try it again without connecting to the internet (so the date doesn't have a chance to reset to one of the time servers).</p>\n\n<h3>Percent signs, again</h3>\n\n<p>To emphasise the advice about percent signs, here's an example of what cron does with them:</p>\n\n<pre><code># cron entry\n* * * * * cat &gt;$HOME/cron.out%foo%bar%baz\n</code></pre>\n\n<p>will create the ~/cron.out file containing the 3 lines</p>\n\n<pre><code>foo\nbar\nbaz\n</code></pre>\n\n<p>This is particularly intrusive when using the <code>date</code> command. Be sure to escape the percent signs</p>\n\n<pre><code>* * * * * /path/to/command --day \"$(date \"+\\%Y\\%m\\%d\")\"\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 873, "user_id": 508427, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/3zmlJ.jpg?s=128&g=1", "display_name": "Recct", "link": "https://stackoverflow.com/users/508427/recct"}, "edited": false, "score": 1, "creation_date": 1548430959, "post_id": 54367295, "comment_id": 95550979, "body": "Copying? Unable to install with cpanm or cpan? You might be missing or having outdated dependencies producing odd errors in the future"}], "tags": [], "owner": {"reputation": 448, "user_id": 3266589, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/vAroQ.jpg?s=128&g=1", "display_name": "Tiggyboo", "link": "https://stackoverflow.com/users/3266589/tiggyboo"}, "is_accepted": false, "score": 0, "last_activity_date": 1548426638, "creation_date": 1548426638, "answer_id": 54367295, "question_id": 54352666, "link": "https://stackoverflow.com/questions/54352666/perl-script-cron-environment-issue/54367295#54367295", "title": "Perl script cron/environment issue", "body": "<p>Thanks so much for the extensive feedback, everyone.  I'm certainly taking a lot more away from this than I put into it.  In any event, I ran across the answer.  In my perl5 lib folder I found that somehow the IO and OLE libraries were missing on production.  Copying those over from development resulted in everything working fine. The fact that I was unable to determine/capture this through conventional debugging efforts as opposed to merely comparing directory listings out of exasperation speaks to how much more I have to learn along these lines.  But I'm confident that the great feedback I received will go a long ways towards getting me there.  Thanks again, everyone.</p>\n"}], "owner": {"reputation": 448, "user_id": 3266589, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/vAroQ.jpg?s=128&g=1", "display_name": "Tiggyboo", "link": "https://stackoverflow.com/users/3266589/tiggyboo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 215, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1548426638, "creation_date": 1548352244, "question_id": 54352666, "link": "https://stackoverflow.com/questions/54352666/perl-script-cron-environment-issue", "title": "Perl script cron/environment issue", "body": "<p>The following Perl script generates an .xls file from a text file.  It runs great in our linux test environment, but generates an empty spreadsheet (.xls) in our production environment when run via cron (cron works in test, as well.)  Nothing jumps out at our sys admins in terms of system level settings that might account for this behavior.  Towards the bottom of the script in the import_data subroutine, the correct number of lines is reported, but nothing is written to the spreadsheet and no errors are returned at either the script or system level.  I ran it through the perl debugger but my skills fell short of being able to interactively watch it populate the file.  The cron entry looks like this:</p>\n\n<pre><code>cd &lt;script directory&gt;; cvs2xls input.txt output.xls 2&gt;&amp;1\n</code></pre>\n\n<p>Any debugging tips would be appreciated, as well as potential system settings that I can forward on to our sysadmins.</p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\n\nuse lib '/apps/tu01688/perl5/lib/perl5';\n\nuse Spreadsheet::WriteExcel;\nuse Text::CSV::Simple;\n\nBEGIN {\n  unshift @INC, \"/apps/tu01688/jobs/mayo-expert\";\n};\n\nmy $infile = shift;\nusage()  unless defined $infile &amp;&amp; -f $infile;\nmy $parser = Text::CSV::Simple-&gt;new;\nmy @data = $parser-&gt;read_file($infile);\nmy $headers = shift @data;\n\nmy $outfile = shift || $infile . \".xls\";\nmy $subject = shift || 'worksheet';\n\nsub usage {\n    print \"csv2xls infile [outfile] [subject]\\n\";\n    exit;\n}\n\nmy $workbook = Spreadsheet::WriteExcel-&gt;new($outfile);\nmy $bold = $workbook-&gt;add_format();\n$bold-&gt;set_bold(1);\nimport_data($workbook, $subject, $headers, \\@data);\n\n# Add a worksheet\nsub import_data {\n    my $workbook  = shift;\n    my $base_name = shift;\n    my $colums    = shift;\n    my $data      = shift;\n    my $limit     = shift || 50_000;\n    my $start_row = shift || 1;\n    my $worksheet = $workbook-&gt;add_worksheet($base_name);\n    $worksheet-&gt;add_write_handler(qr[\\w], \\&amp;store_string_widths);\n    #$worksheet-&gt;add_write_handler(qr[\\w]| \\&amp;store_string_widths);\n    my $w = 1;\n    $worksheet-&gt;write('A' . $start_row, $colums, ,$bold);\n    my $i = $start_row;\n    my $qty = 0;\n    for my $row (@$data) {\n        $qty++;\n        if ($i &gt; $limit) {\n             $i = $start_row;\n             $w++;\n             $worksheet = $workbook-&gt;add_worksheet(\"$base_name - $w\");\n             $worksheet-&gt;write('A1', $colums,$bold);\n        }\n        $worksheet-&gt;write($i++, 0, $row);\n    }\n    autofit_columns($worksheet);\n    warn \"Converted $qty rows.\";\n    return $worksheet;\n}\n\n\n###############################################################################\n###############################################################################\n#\n# Functions used for Autofit.\n#\n\n###############################################################################\n#\n# Adjust the column widths to fit the longest string in the column.\n#\nsub autofit_columns {\n\n    my $worksheet = shift;\n    my $col       = 0;\n\n    for my $width (@{$worksheet-&gt;{__col_widths}}) {\n\n        $worksheet-&gt;set_column($col, $col, $width) if $width;\n        $col++;\n    }\n}\n\n\n###############################################################################\n#\n# The following function is a callback that was added via add_write_handler()\n# above. It modifies the write() function so that it stores the maximum\n# unwrapped width of a string in a column.\n#\nsub store_string_widths {\n\n    my $worksheet = shift;\n    my $col       = $_[1];\n    my $token     = $_[2];\n\n    # Ignore some tokens that we aren't interested in.\n    return if not defined $token;       # Ignore undefs.\n    return if $token eq '';             # Ignore blank cells.\n    return if ref $token eq 'ARRAY';    # Ignore array refs.\n    return if $token =~ /^=/;           # Ignore formula\n\n    # Ignore numbers\n    #return if $token =~ /^([+-]?)(?=\\d|\\.\\d)\\d*(\\.\\d*)?([Ee]([+-]?\\d+))?$/;\n\n    # Ignore various internal and external hyperlinks. In a real scenario\n    # you may wish to track the length of the optional strings used with\n    # urls.\n    return if $token =~ m{^[fh]tt?ps?://};\n    return if $token =~ m{^mailto:};\n    return if $token =~ m{^(?:in|ex)ternal:};\n\n\n    # We store the string width as data in the Worksheet object. We use\n    # a double underscore key name to avoid conflicts with future names.\n    #\n    my $old_width    = $worksheet-&gt;{__col_widths}-&gt;[$col];\n    my $string_width = string_width($token);\n\n    if (not defined $old_width or $string_width &gt; $old_width) {\n        # You may wish to set a minimum column width as follows.\n        #return undef if $string_width &lt; 10;\n\n        $worksheet-&gt;{__col_widths}-&gt;[$col] = $string_width;\n    }\n\n\n    # Return control to write();\n    return undef;\n}\n\n\n###############################################################################\n#\n# Very simple conversion between string length and string width for Arial 10.\n# See below for a more sophisticated method.\n#\nsub string_width {\n\n    return length $_[0];\n}\n</code></pre>\n"}, {"tags": ["c++", "perl", "swig"], "answers": [{"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1548408731, "post_id": 54347685, "comment_id": 95538924, "body": "They&#39;re expecting the code to return multiple strings, not a AoAoString, so should be: &quot;Your <code>commit</code> method is returning a single scalar (a reference to an array), not multiple strings.&quot;"}, {"owner": {"reputation": 31, "user_id": 10954860, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216319517733638/picture?type=large", "display_name": "Yoni Shamula", "link": "https://stackoverflow.com/users/10954860/yoni-shamula"}, "edited": false, "score": 0, "creation_date": 1548575291, "post_id": 54347685, "comment_id": 95584461, "body": "thank you, but I have an api that I can&#39;t change that uses the compiled swig file so I am looking for a typemap solution that will return what is expected. meaning just an array of strings."}], "tags": [], "owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "is_accepted": false, "score": 3, "last_activity_date": 1548336145, "creation_date": 1548336145, "answer_id": 54347685, "question_id": 54345460, "link": "https://stackoverflow.com/questions/54345460/swig-perl-typemapout-stdvectorstdstring-doesnt-return-the-desired-outpu/54347685#54347685", "title": "swig perl typemap(out) std::vector&lt;std::string&gt; doesn&#39;t return the desired output in perl", "body": "<p>Your <code>commit</code> method is just returning an array reference, not an array of array references. Maybe it looks like an array of array references because you are assigning the result to an array?</p>\n\n<p>In any case, without touching the typemap code, you can dereference the function call</p>\n\n<pre><code>@commitReturn = @{$SomeClass-&gt;commit()};\n</code></pre>\n\n<p>or create a wrapper method to dereference it for you</p>\n\n<pre><code>package SomeClass;\n...\nsub commit_list {\n    my $self = shift;\n    @{$self-&gt;commit()};\n}\n...\n@commitReturn = $SomeClass-&gt;commit_list();\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "is_accepted": false, "score": 1, "last_activity_date": 1549839072, "creation_date": 1549839072, "answer_id": 54621935, "question_id": 54345460, "link": "https://stackoverflow.com/questions/54345460/swig-perl-typemapout-stdvectorstdstring-doesnt-return-the-desired-outpu/54621935#54621935", "title": "swig perl typemap(out) std::vector&lt;std::string&gt; doesn&#39;t return the desired output in perl", "body": "<p>To return an array instead of a reference to an array, you have to manipulate the stack such that Perl knows that more than one scalar is returned.</p>\n\n<p>According to <a href=\"http://www.swig.org/Doc3.0/Perl5.html#Perl5\" rel=\"nofollow noreferrer\">the documentation</a>:</p>\n\n<blockquote>\n  <p>The current value of the argument stack pointer is contained in a\n  variable <code>argvi</code>. Whenever a new output value is added, it is critical\n  that this value be incremented. For multiple output values, the final\n  value of <code>argvi</code> should be the total number of output values.</p>\n</blockquote>\n\n<p>So the following typemap should be sufficient:</p>\n\n<pre><code>%typemap(out) std::vector&lt;std::string&gt; {\n    int len = $1.size();\n    for (int x = 0; x &lt; len; x++) {\n        $result = sv_newmortal();\n        sv_setpvn($result, $1[x].data(), $1[x].size());\n        argvi++;\n    }\n} \n</code></pre>\n"}], "owner": {"reputation": 31, "user_id": 10954860, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216319517733638/picture?type=large", "display_name": "Yoni Shamula", "link": "https://stackoverflow.com/users/10954860/yoni-shamula"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 198, "favorite_count": 1, "answer_count": 2, "score": 3, "last_activity_date": 1549839072, "creation_date": 1548328904, "question_id": 54345460, "link": "https://stackoverflow.com/questions/54345460/swig-perl-typemapout-stdvectorstdstring-doesnt-return-the-desired-outpu", "title": "swig perl typemap(out) std::vector&lt;std::string&gt; doesn&#39;t return the desired output in perl", "body": "<p>I am trying to type a typemap(out) std::vector.\nI want it to get to the perl code as an array instead I am getting an array of arrays which after a double dereference contains the desired data.\nhow can I make it an array of strings in perl?</p>\n\n<p>I have tried to edit the typemap myself and to use the typemaps in the \"std_vector.i\" and in \"std_string.i\" without editing and they all give the same results.</p>\n\n<p>this is the typemap code:</p>\n\n<pre><code>%typemap(out) std::vector&lt;std::string&gt; {\n        int len = $1.size();\n        SV *svs = new SV[len];\n        for (int x = 0; x &lt; len; x++) {\n                SV* sv = sv_newmortal();\n                sv_setpvn(sv, $1[x].data(), $1[x].size());\n                svs[x] = SvPV(sv, $1[x].size());\n        }\n        AV *myav = av_make(len, svs);\n        delete[] svs;\n        $result = newRV_noinc((SV*) myav);\n        sv_2mortal($result);\n        argvi++;\n} \n</code></pre>\n\n<p>my code for testing the output:</p>\n\n<pre><code>#this return a std vector&lt;string&gt; in the cpp code\nmy @commitReturn = $SomeClass-&gt;commit();\n        print \"\\n\";\n        #this should return a string instead it returns an array.\n        print $commitReturn[0];\n        print \"\\n\";\n        #this should not work, instead it returns the desired output.\n        print $commitReturn[0][0];\n</code></pre>\n\n<p>the output is:</p>\n\n<pre><code>ARRAY(0x908c88)\n20790\n</code></pre>\n\n<p>instead of:</p>\n\n<pre><code>20790\nCan't use string (\"20791\") as an ARRAY ref while \"strict refs\"\n</code></pre>\n"}, {"tags": ["linux", "perl", "unix"], "comments": [{"owner": {"reputation": 13, "user_id": 10170449, "user_type": "registered", "profile_image": "https://graph.facebook.com/2544178898929487/picture?type=large", "display_name": "Alan Saldanha", "link": "https://stackoverflow.com/users/10170449/alan-saldanha"}, "edited": false, "score": 0, "creation_date": 1548309190, "post_id": 54340126, "comment_id": 95496511, "body": "Here, $fubname is my variable, and I am trying to concatenate the _early_exit_indicator string to it."}, {"owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 1, "creation_date": 1548309896, "post_id": 54340126, "comment_id": 95496742, "body": "Use <code>${fubname}_early_exit_indicator</code>"}, {"owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "edited": false, "score": 1, "creation_date": 1548323899, "post_id": 54340126, "comment_id": 95503378, "body": "<a href=\"https://metacpan.org/pod/distribution/perl/pod/perldata.pod#Scalar-value-constructors\" rel=\"nofollow noreferrer\">Read the fine manual</a>: &quot;As in some shells, you can enclose the variable name in braces to disambiguate it from following alphanumerics (and underscores).&quot;"}], "answers": [{"comments": [{"owner": {"reputation": 333, "user_id": 4220763, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6AuCF.jpg?s=128&g=1", "display_name": "Hannibal", "link": "https://stackoverflow.com/users/4220763/hannibal"}, "edited": false, "score": 0, "creation_date": 1548368844, "post_id": 54344255, "comment_id": 95527615, "body": "Another way is to escape the string for separating it from the variable name: <code>&quot;$fubname\\_early_exit_indicator = 1&quot;</code>"}], "tags": [], "owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "is_accepted": true, "score": 1, "last_activity_date": 1548325166, "creation_date": 1548325166, "answer_id": 54344255, "question_id": 54340126, "link": "https://stackoverflow.com/questions/54340126/concatenating-variables-inside-linux-commands-in-perl/54344255#54344255", "title": "concatenating variables inside linux commands in perl", "body": "<p>The problem is that the <code>.</code> operator is not recognized as an operator inside quotes. Dot operators are use <em>between</em> strings, not <em>inside</em> strings. Using the dot inside a string, inserts it literally. This literal dot in the pattern, causes the <code>grep</code> command in your code to fail.</p>\n\n<p>Also note that inside quotes, Perl tries to interpolates variable using certain identifier parsing rules.\nSee <a href=\"https://perldoc.perl.org/perlop.html\" rel=\"nofollow noreferrer\"><code>perldoc perlop</code></a> for the different types of quoting that are used in Perl, and see <a href=\"https://perldoc.perl.org/perldata.html\" rel=\"nofollow noreferrer\"><code>perldoc perldata</code></a> for information about the identifier parsing rules.</p>\n\n<p>In summary, in order to interpolate the variable <code>$fubname</code> in the backticks argument, use </p>\n\n<pre><code>\"${fubname}_early_exit_indicator = 1\"\n</code></pre>\n\n<p>Note that we need braces around the identifier, since the following underscore is a valid identifier character. (To the contrary a literal dot is not a valid identifier character, so if following character was a literal dot, you would not need the braces around the identifier.)</p>\n"}, {"tags": [], "owner": {"reputation": 23, "user_id": 6056930, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/add1809f2082daed7956b300dbe674ba?s=128&d=identicon&r=PG&f=1", "display_name": "Dumb", "link": "https://stackoverflow.com/users/6056930/dumb"}, "is_accepted": false, "score": -1, "last_activity_date": 1548341151, "creation_date": 1548341151, "answer_id": 54349271, "question_id": 54340126, "link": "https://stackoverflow.com/questions/54340126/concatenating-variables-inside-linux-commands-in-perl/54349271#54349271", "title": "concatenating variables inside linux commands in perl", "body": "<p>The . operator will not work inside the quotes. use something like this-</p>\n\n<p>if(`grep -e \"${fubname}_early_exit_indicator = 1\" ...</p>\n\n<p>I hope this works</p>\n"}], "owner": {"reputation": 13, "user_id": 10170449, "user_type": "registered", "profile_image": "https://graph.facebook.com/2544178898929487/picture?type=large", "display_name": "Alan Saldanha", "link": "https://stackoverflow.com/users/10170449/alan-saldanha"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 155, "favorite_count": 0, "accepted_answer_id": 54344255, "answer_count": 2, "score": -1, "last_activity_date": 1548341151, "creation_date": 1548309060, "last_edit_date": 1548314256, "question_id": 54340126, "link": "https://stackoverflow.com/questions/54340126/concatenating-variables-inside-linux-commands-in-perl", "title": "concatenating variables inside linux commands in perl", "body": "<p>I need to use a system command (<code>grep</code>) which has a variable concatenated with a string as the regex to search a file.\nIs it possible to concatenate a regex for <code>grep</code> between a variable and string in Perl??</p>\n\n<p>I have tried using the <code>.</code> operator but it doesn't work.</p>\n\n<pre><code>if(`grep -e \"$fubname._early_exit_indicator = 1\" $golden_path/early_exit_information.tsv`){\n    print \"-D- The golden data indicates early exit should occur\\n\";\n    $golden_early_exit_indicator=1;\n}\n</code></pre>\n\n<p>Expected to match the regex, <code>\"$fubname._early_exit_indicator = 1\"</code> but it doesn't match as required.\nThe expected result should be:\n<code>-D- The golden data indicates early exit should occur</code>\nBut in the present code, it doesn't print this.</p>\n\n<p>Output link: (<a href=\"https://drive.google.com/open?id=1N0SaZ-r3bYPlljKUgTOH5AbxCAaHw7zD\" rel=\"nofollow noreferrer\">https://drive.google.com/open?id=1N0SaZ-r3bYPlljKUgTOH5AbxCAaHw7zD</a>)</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 7, "creation_date": 1548307091, "post_id": 54339706, "comment_id": 95495936, "body": "Welcome to Stack Overflow. Please read the <a href=\"https://stackoverflow.com/tour\">About</a> and <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a> pages soon.  It isn&#39;t clear what you mean by a &#39;db con&#39; object.  There are many possible packages that you might be asking about \u2014 Perl DBI (Database Interface) is perhaps the best known and most comprehensive, but it is very far from being the only one.  FCGI is another rather broad topic; there is an FCGI module, but there are alternatives and extensions too.  You need to specify more precisely what you&#39;re after.  In DBI, there is a <code>ping</code> method that might be relevant.  As it stands, your question is to imprecise to be answerable."}, {"owner": {"reputation": 188041, "user_id": 10676716, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/arsQA.jpg?s=128&g=1", "display_name": "GMB", "link": "https://stackoverflow.com/users/10676716/gmb"}, "edited": false, "score": 0, "creation_date": 1548376838, "post_id": 54339706, "comment_id": 95529715, "body": "Give a try at <a href=\"https://metacpan.org/pod/DBIx::Connector\" rel=\"nofollow noreferrer\">DBIx::Connector</a> : it caches the database connection, and provides several ways to deal with unwanted disconnections."}], "answers": [{"tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 1, "last_activity_date": 1548337232, "creation_date": 1548337232, "answer_id": 54348007, "question_id": 54339706, "link": "https://stackoverflow.com/questions/54339706/how-do-check-db-connection-is-proper-perl/54348007#54348007", "title": "How do check DB connection is proper [PERL]", "body": "<p>I assume you're talking about a DBI connection object. All DBI handles have a <code>ping()</code> method which will check whether or not the connection is still active.</p>\n\n<p>The <a href=\"https://metacpan.org/pod/DBI#ping\" rel=\"nofollow noreferrer\">documentation</a> says this:</p>\n\n<blockquote>\n  <p><strong>ping</strong></p>\n\n<pre><code>$rc = $dbh-&gt;ping;\n</code></pre>\n  \n  <p>Attempts to determine, in a reasonably efficient way, if the database server is still running and the connection to it is still working. Individual drivers should implement this function in the most suitable manner for their database engine.</p>\n  \n  <p>The current default implementation always returns true without actually doing anything. Actually, it returns \"0 but true\" which is true but zero. That way you can tell if the return value is genuine or just the default. Drivers should override this method with one that does the right thing for their type of database.</p>\n  \n  <p>Few applications would have direct use for this method. See the specialized Apache::DBI module for one example usage.</p>\n</blockquote>\n\n<p>I think that's what you want.</p>\n"}], "owner": {"reputation": 45, "user_id": 10726189, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-jLvl28IUsCM/AAAAAAAAAAI/AAAAAAAAG6k/SVd1ngNnO0o/photo.jpg?sz=128", "display_name": "Sunilkumar Godi", "link": "https://stackoverflow.com/users/10726189/sunilkumar-godi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 238, "favorite_count": 0, "answer_count": 1, "score": -3, "last_activity_date": 1548337232, "creation_date": 1548306474, "question_id": 54339706, "link": "https://stackoverflow.com/questions/54339706/how-do-check-db-connection-is-proper-perl", "title": "How do check DB connection is proper [PERL]", "body": "<p>In perl how to check whether db con object is able to access data base or not ?</p>\n\n<p>== when fcgi is running and db got disconnected/shutdown fcgi db con object will fail to connect to database and the error will get only while binding a query or executing a query .. How to detect dbcon obj is proper before binding or executing a query .. ? </p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 6606, "user_id": 4135670, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mArsS.jpg?s=128&g=1", "display_name": "Rafael", "link": "https://stackoverflow.com/users/4135670/rafael"}, "edited": false, "score": 1, "creation_date": 1548306850, "post_id": 54339610, "comment_id": 95495871, "body": "Ah, I&#39;d love to help, but you&#39;d have to explain this in general term; not everyone is up-to-date on their bio. Please define a clear problem statement."}, {"owner": {"reputation": 21, "user_id": 10323205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64e2d3b01204bc9864864c2ac0051609?s=128&d=identicon&r=PG&f=1", "display_name": "IrisChang", "link": "https://stackoverflow.com/users/10323205/irischang"}, "reply_to_user": {"reputation": 6606, "user_id": 4135670, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mArsS.jpg?s=128&g=1", "display_name": "Rafael", "link": "https://stackoverflow.com/users/4135670/rafael"}, "edited": false, "score": 0, "creation_date": 1548310718, "post_id": 54339610, "comment_id": 95497019, "body": "Thanks for the reminder. I have revised my question."}, {"owner": {"reputation": 6606, "user_id": 4135670, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mArsS.jpg?s=128&g=1", "display_name": "Rafael", "link": "https://stackoverflow.com/users/4135670/rafael"}, "edited": false, "score": 0, "creation_date": 1548311128, "post_id": 54339610, "comment_id": 95497163, "body": "Do you mind posting some example input?"}, {"owner": {"reputation": 21, "user_id": 10323205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64e2d3b01204bc9864864c2ac0051609?s=128&d=identicon&r=PG&f=1", "display_name": "IrisChang", "link": "https://stackoverflow.com/users/10323205/irischang"}, "reply_to_user": {"reputation": 6606, "user_id": 4135670, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mArsS.jpg?s=128&g=1", "display_name": "Rafael", "link": "https://stackoverflow.com/users/4135670/rafael"}, "edited": false, "score": 0, "creation_date": 1548314049, "post_id": 54339610, "comment_id": 95498253, "body": "yep, please check the first box"}], "answers": [{"tags": [], "owner": {"reputation": 7646, "user_id": 6867048, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b939fdb5809fed8097c38bdf4370747b?s=128&d=identicon&r=PG&f=1", "display_name": "stack0114106", "link": "https://stackoverflow.com/users/6867048/stack0114106"}, "is_accepted": true, "score": 2, "last_activity_date": 1548312187, "creation_date": 1548312187, "answer_id": 54340753, "question_id": 54339610, "link": "https://stackoverflow.com/questions/54339610/pick-up-the-longest-peptide-using-perl/54340753#54340753", "title": "Pick up the longest peptide using perl", "body": "<p>Check out this Perl one-liner</p>\n\n<pre><code>$ cat iris.txt\n&gt;111\nKKKKKKKMGFSOXLKPXLLLLLLLLLLLLLLLLLMJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJX\n&gt;222\nWWWMPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPMPPPPPXKKKKKK\n\n$ perl -ne ' if(!/^&gt;/) { print \"$p\"; while(/(M[^M]+?X)/g ) { if(length($1)&gt;length($x)) {$x=$1 }  } print \"$x \". length($x).\"\\n\";$x=\"\" } else { $p=$_ }  ' iris.txt\n&gt;111\nMJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJX 32\n&gt;222\nMPPPPPX 7\n\n$\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 6606, "user_id": 4135670, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mArsS.jpg?s=128&g=1", "display_name": "Rafael", "link": "https://stackoverflow.com/users/4135670/rafael"}, "is_accepted": false, "score": 1, "last_activity_date": 1548318074, "last_edit_date": 1548318074, "creation_date": 1548317199, "answer_id": 54341943, "question_id": 54339610, "link": "https://stackoverflow.com/questions/54339610/pick-up-the-longest-peptide-using-perl/54341943#54341943", "title": "Pick up the longest peptide using perl", "body": "<p>There's more than one way to do it!</p>\n\n<p>Try this too:</p>\n\n<pre><code>print and next if /^&gt;/;\nchomp and my @z = $_ =~ /(M[^X]*X)/g;\n\nmy $m = \"\";\nfor my $s (@z) {\n    $m = $s if length $s &gt; length $m\n}\nsay \"$m\\t\" . length $m\n</code></pre>\n\n<p>Output:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>&gt;111\nMJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJX    32\n&gt;222\nMPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPMPPPPPX  38\n</code></pre>\n\n<p><em>uses >=5.14 and make sure to run script with <code>perl -n</code></em></p>\n\n<hr>\n\n<p>As a one-liner:</p>\n\n<pre><code>perl -E 'print and next if /^&gt;/; chomp and my @z = $_ =~ /(M[^X]*X)/g; my $m = \"\"; for my $s (@z) { $m = $s if length $s &gt; length $m } say \"$m\\t\" . length $m' -n data.txt\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 5701, "user_id": 35812, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e663162cefd6ac833e0555933b8583f?s=128&d=identicon&r=PG", "display_name": "Chris Charley", "link": "https://stackoverflow.com/users/35812/chris-charley"}, "is_accepted": false, "score": 1, "last_activity_date": 1548373189, "last_edit_date": 1548373189, "creation_date": 1548362895, "answer_id": 54355085, "question_id": 54339610, "link": "https://stackoverflow.com/questions/54339610/pick-up-the-longest-peptide-using-perl/54355085#54355085", "title": "Pick up the longest peptide using perl", "body": "<p>Here is solution using <code>reduce</code> from <code>List::Util</code>.</p>\n\n<p>Edit: mistakenly used <code>maxstr</code> which gave results but is not what was needed. Have reedited this post to use <code>reduce</code> (correctly) instead.</p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\nuse List::Util qw/reduce/;\n\nopen my $fh, '&lt;', \\&lt;&lt;EOF;\n&gt;111\nKKKKKKKMGFSOXLKPXLLLLLLLLLLLLLLLLLMJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJX\n&gt;222\nWWWMPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPMPPPPPXKKKKKK\nEOF\n\nmy $id;\nwhile (&lt;$fh&gt;) {\n    chomp;\n    if (/^&gt;/) {\n        $id = $_;   \n    }\n    else {\n        my $data = reduce {length($a) &gt; length($b) ? $a : $b} /M[^X]*X/g;\n        print \"$id\\n$data\\t\" . length($data) . \"\\n\" if $data;\n    }\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 21, "user_id": 10323205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64e2d3b01204bc9864864c2ac0051609?s=128&d=identicon&r=PG&f=1", "display_name": "IrisChang", "link": "https://stackoverflow.com/users/10323205/irischang"}, "edited": false, "score": 0, "creation_date": 1548752938, "post_id": 54356292, "comment_id": 95644540, "body": "Thanks for the concept!! Sorry for my late reply. Actually, my main purpose is to find out the longest isoform to do domain identify from RNA-seq data. But it seems that length() may solve it here."}, {"owner": {"reputation": 590, "user_id": 10637327, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UhloK.jpg?s=128&g=1", "display_name": "M__", "link": "https://stackoverflow.com/users/10637327/m"}, "reply_to_user": {"reputation": 21, "user_id": 10323205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64e2d3b01204bc9864864c2ac0051609?s=128&d=identicon&r=PG&f=1", "display_name": "IrisChang", "link": "https://stackoverflow.com/users/10323205/irischang"}, "edited": false, "score": 0, "creation_date": 1548772618, "post_id": 54356292, "comment_id": 95656782, "body": "Modified accordingly."}], "tags": [], "owner": {"reputation": 590, "user_id": 10637327, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UhloK.jpg?s=128&g=1", "display_name": "M__", "link": "https://stackoverflow.com/users/10637327/m"}, "is_accepted": false, "score": 0, "last_activity_date": 1548772601, "last_edit_date": 1548772601, "creation_date": 1548368874, "answer_id": 54356292, "question_id": 54339610, "link": "https://stackoverflow.com/questions/54339610/pick-up-the-longest-peptide-using-perl/54356292#54356292", "title": "Pick up the longest peptide using perl", "body": "<p>Here's my take on it. </p>\n\n<p>I like fasta files tucked into a hash, with the fasta name as the key. This way you can just add descriptions to it, e.g. base composition etc... </p>\n\n<pre><code>#!/usr/local/ActivePerl-5.20/bin/env perl \nuse strict;\nuse warnings;\nmy %prot;\n\nopen (my $fh, '&lt;', '/Users/me/Desktop/fun_prot.fa') or die $!;\nmy $string = do { local $/; &lt;$fh&gt; };\nclose $fh;\nchomp $string;\nmy @fasta = grep {/./} split (\"&gt;\", $string);\nfor my $aa (@fasta){\n    my ($key, $value) = split (\"\\n\", $aa);\n    $value =~ s/[A-Z]*(M.*M)[A-Z]/$1/;\n    $prot{$key}-&gt;{'len'} = length($value);\n    $prot{$key}-&gt;{'prot'} = $value;\n    }\nfor my $sequence (sort { $prot{$b}-&gt;{'len'} &lt;=&gt; $prot{$a}-&gt;{'len'} } keys %prot){\n    print \"&gt;\" . $sequence, \"\\n\", $prot{$sequence}-&gt;{'prot'}, \"\\t\", $prot{$sequence}-&gt;{'len'}, \"\\n\";\n    last;\n}     \n__DATA__\n&gt;1232\nASDFASMJJJJJMFASDFSDAFSDDFSA\n&gt;2343\nAASFDFASMJJJJJJJJJJJJJJMRGQEGDAGDA\n</code></pre>\n\n<p><strong>Output</strong></p>\n\n<pre><code>&gt;2343\nMJJJJJJJJJJJJJJM  16\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 10323205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64e2d3b01204bc9864864c2ac0051609?s=128&d=identicon&r=PG&f=1", "display_name": "IrisChang", "link": "https://stackoverflow.com/users/10323205/irischang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 106, "favorite_count": 0, "accepted_answer_id": 54340753, "answer_count": 4, "score": 1, "last_activity_date": 1548772601, "creation_date": 1548305845, "last_edit_date": 1548313632, "question_id": 54339610, "link": "https://stackoverflow.com/questions/54339610/pick-up-the-longest-peptide-using-perl", "title": "Pick up the longest peptide using perl", "body": "<p>I want to find out the longest possible protein sequence translated from cds in 6 forward and reverse frame. </p>\n\n<p>This is the example input format:</p>\n\n<pre><code>&gt;111\nKKKKKKKMGFSOXLKPXLLLLLLLLLLLLLLLLLMJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJX\n&gt;222\nWWWMPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPMPPPPPXKKKKKK\n</code></pre>\n\n<p>I would like to find out all the strings which start from \"M\" and stop at \"X\", count the each length of the strings and select the longest.</p>\n\n<p>For example, in the case above:</p>\n\n<p>the script will find,</p>\n\n<pre><code>&gt;111 has two matches:\nMGFSOX\nMJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJX\n&gt;222 has one match:\nMPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPMPPPPPX\n</code></pre>\n\n<p>Then count each match's length, and print the string and number of longest matches which is the result I want:</p>\n\n<pre><code>&gt;111\nMJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJX    32\n&gt;222\nMPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPMPPPPPX    38\n</code></pre>\n\n<p>But it prints out no answer. Does anyone know how to fix it? Any suggestion will be helpful.</p>\n\n<pre><code>#!/usr/bin/perl -w\n\nuse strict;\nuse warnings;\n\nmy @pep=();\nmy $i=();\nmy @Xnum=();\nmy $n=();\nmy %hash=();\nmy @k=();\nmy $seq=();\n$n=0;\nopen(IN, \"&lt;$ARGV[0]\");\nwhile(&lt;IN&gt;){\n        chomp;\n        if($_=~/^[^\\&gt;]/){\n                @pep=split(//, $_);\n                if($_ =~ /(X)/){\n                        push(@Xnum, $1);\n                        if($n &gt;= 0 &amp;&amp; $n &lt;= $#Xnum){\n                                if(@pep eq \"M\"){\n                                        for($i=1; $i&lt;=$#pep; $i++){\n                                                $seq=join(\"\",@pep);\n                                                $hash{$i}=$seq;\n                                                push(@k, $i);\n                                        }\n                                }\n                                elsif(@pep eq \"X\"){\n                                        $n=$n+1;\n                                        }\n                                foreach (sort {$a cmp $b} @k){\n                                        print \"$hash{$k[0]}\\t$k[0]\";\n                                }\n                        }\n                }\n        }\n        elsif($_=~/^\\&gt;/){\n                print \"$_\\n\";\n        }\n\n}\nclose IN;\n</code></pre>\n"}, {"tags": ["perl", "cpan"], "comments": [{"owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 1, "creation_date": 1548322265, "post_id": 54338825, "comment_id": 95502344, "body": "You will need to tell us what version of Strawberry Perl you are using (<code>perl -V</code>). See also the <a href=\"https://metacpan.org/source/KARASIK/Prima-1.53/README.md\" rel=\"nofollow noreferrer\">Prima documentation</a> on installation steps. Maybe upgrading your Strawberry Perl version is all that&#39;s needed."}, {"owner": {"reputation": 2061, "user_id": 1911722, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/5728af95179355c1f422a77e54929928?s=128&d=identicon&r=PG", "display_name": "user15964", "link": "https://stackoverflow.com/users/1911722/user15964"}, "reply_to_user": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 0, "creation_date": 1548329536, "post_id": 54338825, "comment_id": 95506760, "body": "Hi, @Corion  I updated my post. Even latest strawberry perl doesn&#39;t work."}, {"owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 0, "creation_date": 1548331137, "post_id": 54338825, "comment_id": 95507648, "body": "<code>CreateProcess(NULL, pl2bat.bat blib\\script\\VB.pl ... failed</code> - this means that your <code>PATH</code> environment was not set up correctly. You can likely force-install Prima at this point or reboot the machine to make sure that the path is set up correctly for the new Strawberry Perl version"}], "owner": {"reputation": 2061, "user_id": 1911722, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/5728af95179355c1f422a77e54929928?s=128&d=identicon&r=PG", "display_name": "user15964", "link": "https://stackoverflow.com/users/1911722/user15964"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 136, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1548329506, "creation_date": 1548299136, "last_edit_date": 1548329506, "question_id": 54338825, "link": "https://stackoverflow.com/questions/54338825/strawberry-perl-on-windows-install-prima-failed-with-no-tiff-h", "title": "strawberry perl on windows install Prima failed with no tiff.h", "body": "<p>I use strawberry perl on windows. I tried to install Prima module, running</p>\n\n<pre><code>install Prima\n</code></pre>\n\n<p>in CPAN console, I got</p>\n\n<pre><code>&gt; img\\codec_tiff.c:14:10: fatal error: tiff.h: No such file or directory\n&gt; #include &lt;tiff.h&gt;\n&gt;           ^~~~~~~~ compilation terminated. dmake.exe:  Error code 129, while making 'img\\codec_tiff.o'   KARASIK/Prima-1.53.tar.gz  \n&gt; C:\\STRAWB~1\\c\\bin\\dmake.exe -- NOT OK Stopping: 'install' failed for\n&gt; 'Prima'. Failed during this command:  KARASIK/Prima-1.53.tar.gz       \n&gt; : make NO\n</code></pre>\n\n<p>so finally it failed to install Prima. So what to fix missing tiff.h problem?</p>\n\n<p><strong>update</strong>\nNow I reinstalled the latest strawberry perl version 5.28.1.1\nHowever, installing Prima failed for another reason. Error message as below:</p>\n\n<pre><code>dlltool -l blib/arch/auto/Prima/libPrima.a -d Prima.def -D PRIMA.xs.dll blib\\arch\\auto\\Prima\\Prima.xs.dll\n\"C:\\Strawberry\\perl\\bin\\perl.exe\" -MExtUtils::Command -e chmod -- 755 blib\\arch\\auto\\Prima\\Prima.xs.dll\n\"C:\\Strawberry\\perl\\bin\\perl.exe\" -MExtUtils::Command -e cp -- Prima/VB/VB.pl blib\\script\\VB.pl\npl2bat.bat blib\\script\\VB.pl\nprocess_begin: CreateProcess(NULL, pl2bat.bat blib\\script\\VB.pl, ...) failed.\nmake (e=2): The system cannot find the file specified.\ngmake: *** [Makefile:1165: blib\\script\\VB.pl] Error 2\n  KARASIK/Prima-1.53.tar.gz\n  C:\\STRAWB~1\\c\\bin\\gmake.exe -- NOT OK\nStopping: 'install' failed for 'Prima'.\nFailed during this command:\n KARASIK/Prima-1.53.tar.gz                    : make NO\n</code></pre>\n\n<p>And if I run <code>install Prima</code> the second time, it shows</p>\n\n<pre><code>Running install for module 'Prima'\n  KARASIK/Prima-1.53.tar.gz\n  Has already been unwrapped into directory C:\\STRAWB~1\\cpan\\build\\Prima-1.53-0\n  KARASIK/Prima-1.53.tar.gz\n  Has already been prepared\n  KARASIK/Prima-1.53.tar.gz\n  Could not make: Unknown error\n</code></pre>\n\n<p>What should I do?</p>\n"}]