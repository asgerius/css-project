[{"tags": ["perl"], "answers": [{"tags": [], "owner": {"reputation": 7565, "user_id": 1021515, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/Z9QcP.jpg?s=128&g=1", "display_name": "mwp", "link": "https://stackoverflow.com/users/1021515/mwp"}, "is_accepted": true, "score": 0, "last_activity_date": 1472684631, "creation_date": 1472684631, "answer_id": 39260333, "question_id": 39260280, "link": "https://stackoverflow.com/questions/39260280/apply-backspace-to-the-line-directly-after-the-matching-line-perl/39260333#39260333", "title": "apply &quot;backspace&quot; to the line directly after the matching line perl", "body": "<p>It would help to see your full solution, but here's a one-liner that does what you'd like:</p>\n\n<pre><code>perl -pe's/\\s*$/ / if /^.+?[:.]/' \n</code></pre>\n\n<p>This replaces any whitespace, including a newline, at the end of the string with a single space, but only if the pattern matches. The pattern looks for some characters at the beginning of the line followed by a period or colon. Add <code>-i.bak</code> to modify files in-place. Hope this helps!</p>\n"}], "owner": {"reputation": 49, "user_id": 6672948, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/3J891.png?s=128&g=1", "display_name": "Matt", "link": "https://stackoverflow.com/users/6672948/matt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 35, "favorite_count": 0, "accepted_answer_id": 39260333, "answer_count": 1, "score": 0, "last_activity_date": 1474397328, "creation_date": 1472684221, "question_id": 39260280, "link": "https://stackoverflow.com/questions/39260280/apply-backspace-to-the-line-directly-after-the-matching-line-perl", "title": "apply &quot;backspace&quot; to the line directly after the matching line perl", "body": "<p>I'd like to re-format a text file such that the line immediately bellow the matching string gets cut and appended to the line with the matching string. Here is an example text: </p>\n\n<pre><code>Answer:\nrenice\n\nX.\nfind / -name filename &amp;\nY.\nfind / -name filename\nZ.\nbg find / -name filename\n</code></pre>\n\n<p>I'm looking for the end result:</p>\n\n<pre><code>Answer: renice\n\nX. find / -name filename &amp;\nY. find / -name filename\nZ. bg find / -name filenames\n</code></pre>\n\n<p>I'm unable to get the following right trim suggestion:</p>\n\n<pre><code>$str =~ s/\\s+$//;\n</code></pre>\n\n<p>To generate the result I need inline. The space is gone, but the string I need is still on the line bellow. The lines to cut and paste only occur directly bellow \"Answer:\" \"X.\" \"Y.\" or \"Z.\" </p>\n"}, {"tags": ["python", "bash", "perl"], "comments": [{"owner": {"reputation": 191202, "user_id": 147356, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/b9506717d24256a090524dd5505d3207?s=128&d=identicon&r=PG", "display_name": "larsks", "link": "https://stackoverflow.com/users/147356/larsks"}, "edited": false, "score": 1, "creation_date": 1472684368, "post_id": 39260133, "comment_id": 65856477, "body": "And what have you tried so far?  This seems like a pretty simple shell scripting task.  Maybe a <code>for</code> loop?"}, {"owner": {"reputation": 192, "user_id": 1573157, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/b17cba205718bdc29af75882921b5ca4?s=128&d=identicon&r=PG", "display_name": "Metahuman", "link": "https://stackoverflow.com/users/1573157/metahuman"}, "reply_to_user": {"reputation": 191202, "user_id": 147356, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/b9506717d24256a090524dd5505d3207?s=128&d=identicon&r=PG", "display_name": "larsks", "link": "https://stackoverflow.com/users/147356/larsks"}, "edited": false, "score": 0, "creation_date": 1472703276, "post_id": 39260133, "comment_id": 65860802, "body": "I posted the sed command I could think of. But it renames all the 1000 to 1001. However, it should be 1002 in file 1002.xml, 1003 in 1003.xml and so on."}], "answers": [{"comments": [{"owner": {"reputation": 192, "user_id": 1573157, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/b17cba205718bdc29af75882921b5ca4?s=128&d=identicon&r=PG", "display_name": "Metahuman", "link": "https://stackoverflow.com/users/1573157/metahuman"}, "edited": false, "score": 0, "creation_date": 1472703388, "post_id": 39260362, "comment_id": 65860824, "body": "Thanks Padraic. How do I edit the file content in id, count to the file name?"}, {"owner": {"reputation": 159764, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "reply_to_user": {"reputation": 192, "user_id": 1573157, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/b17cba205718bdc29af75882921b5ca4?s=128&d=identicon&r=PG", "display_name": "Metahuman", "link": "https://stackoverflow.com/users/1573157/metahuman"}, "edited": false, "score": 0, "creation_date": 1472730333, "post_id": 39260362, "comment_id": 65875644, "body": "@Metahuman,that is what the second snippet does, follow it with <code>tree.write(fle, encoding=&quot;utf-8&quot;)</code> and it will write the new data, I edited the answer."}, {"owner": {"reputation": 159764, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "reply_to_user": {"reputation": 192, "user_id": 1573157, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/b17cba205718bdc29af75882921b5ca4?s=128&d=identicon&r=PG", "display_name": "Metahuman", "link": "https://stackoverflow.com/users/1573157/metahuman"}, "edited": false, "score": 0, "creation_date": 1472731020, "post_id": 39260362, "comment_id": 65876099, "body": "Are you just wanting to replace to replace the 1000 with 1001  etc... or use the full filename?"}, {"owner": {"reputation": 192, "user_id": 1573157, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/b17cba205718bdc29af75882921b5ca4?s=128&d=identicon&r=PG", "display_name": "Metahuman", "link": "https://stackoverflow.com/users/1573157/metahuman"}, "edited": false, "score": 0, "creation_date": 1472743920, "post_id": 39260362, "comment_id": 65885832, "body": "Just the number. I found out how to get it done with your solution. Thanks a lot!"}, {"owner": {"reputation": 159764, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "reply_to_user": {"reputation": 192, "user_id": 1573157, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/b17cba205718bdc29af75882921b5ca4?s=128&d=identicon&r=PG", "display_name": "Metahuman", "link": "https://stackoverflow.com/users/1573157/metahuman"}, "edited": false, "score": 0, "creation_date": 1472743969, "post_id": 39260362, "comment_id": 65885865, "body": "No worries, it is just a matter of removing the extension"}], "tags": [], "owner": {"reputation": 159764, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "is_accepted": false, "score": 2, "last_activity_date": 1472731140, "last_edit_date": 1472731140, "creation_date": 1472684868, "answer_id": 39260362, "question_id": 39260133, "link": "https://stackoverflow.com/questions/39260133/rename-a-particular-instance-in-multiple-files-with-the-file-name/39260362#39260362", "title": "Rename a particular instance in multiple files with the file name?", "body": "<p>After deciphering your question I see you want to change actual content in the xml file i.e the id or some other node's text to the name of the file so use an xml parser like <a href=\"http://lxml.de/\" rel=\"nofollow\"><em>lxml</em></a></p>\n\n<pre><code>from  glob import iglob\nimport lxml.etree as et\n\nfor fle in iglob(\"[0-9][0-9][0-9][0-9].xml\"):\n    tree = et.parse(fle)\n    id_ = tree.find(\".//id\").text = fle\n    tree.write(fle, encoding=\"utf-8\")\n</code></pre>\n\n<p>If you want to change the count also use:</p>\n\n<pre><code> for fle in iglob(\"[0-9][0-9][0-9][0-9].xml\"):\n        tree = et.parse(fle)\n        id_, count = tree.find(\".//id\"), tree.find(\".//count\")\n        id_.text = count.text = fle\n        tree.write(fle, encoding=\"utf-8\")\n</code></pre>\n\n<p>Whatever text you want to set to the file name just look for the node with find and set the text use the <em>node.text = ...</em> logic. If you want to use the name ignoring the extension just split:</p>\n\n<pre><code>for fle in iglob(\"[0-9][0-9][0-9][0-9].xml\"):\n        tree = et.parse(fle)\n        id_, count = tree.find(\".//id\"), tree.find(\".//count\")\n        id_.text = count.text = fle.split(\".\")[0]\n        tree.write(fle, encoding=\"utf-8\")\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 1, "creation_date": 1472725835, "post_id": 39263222, "comment_id": 65872612, "body": "I&#39;m really not sure this is a good solution. It works, but.... handling XML without parsing it is pretty much always hacky at best."}, {"owner": {"reputation": 137100, "user_id": 874188, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/ZcY77.png?s=128&g=1", "display_name": "tripleee", "link": "https://stackoverflow.com/users/874188/tripleee"}, "edited": false, "score": 0, "creation_date": 1473950834, "post_id": 39263222, "comment_id": 66343994, "body": "If you know the context will always include the brokets, maybe do <code>&quot;s&#47;&gt;1000&lt;&#47;&gt;$i&lt;&#47;g&quot;</code>"}], "tags": [], "owner": {"reputation": 1440, "user_id": 6029161, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fedb673e6de045bd5db6e515162a7977?s=128&d=identicon&r=PG&f=1", "display_name": "Chem-man17", "link": "https://stackoverflow.com/users/6029161/chem-man17"}, "is_accepted": false, "score": 1, "last_activity_date": 1472707297, "creation_date": 1472707297, "answer_id": 39263222, "question_id": 39260133, "link": "https://stackoverflow.com/questions/39260133/rename-a-particular-instance-in-multiple-files-with-the-file-name/39263222#39263222", "title": "Rename a particular instance in multiple files with the file name?", "body": "<p>Try your sed command in a loop-</p>\n\n<pre><code>for i in {1000..1500} #or whatever your maximum number is\ndo\nsed -i \"s/1000/\"$i\"/g\" \"$i\".xml\ndone\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": false, "score": 3, "last_activity_date": 1472725733, "creation_date": 1472725733, "answer_id": 39269104, "question_id": 39260133, "link": "https://stackoverflow.com/questions/39260133/rename-a-particular-instance-in-multiple-files-with-the-file-name/39269104#39269104", "title": "Rename a particular instance in multiple files with the file name?", "body": "<p>You've tagged it <code>perl</code> so here's how I'd do it:</p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\n\nuse XML::Twig;\n#iterate the files. \nforeach my $xml_file ( glob \"*.xml\" ) { \n    #regex match the number for the XML. \n    my ( $file_num ) = $xml_file =~ m/(\\d+).xml/; \n    #create an XML::Twig, and set it to 'indented' output. \n    XML::Twig -&gt; new ( pretty_print =&gt; 'indented',\n          #matches elements and runs the subroutine on 'it'. ($_) is the \n          #current element in this context. \n                       twig_handlers =&gt; { 'address/id' =&gt; sub { $_ -&gt; set_text($file_num) }, \n                                          'count'      =&gt; sub { $_ -&gt; set_text($file_num) },  \n           #parsefile_inplace reads and writes back any changes to the file\n           #as it goes. \n                                        } ) -&gt; parsefile_inplace($xml_file); \n\n\n}\n</code></pre>\n\n<p>This uses <code>XML::Twig</code>, which allows you do an in place edit. It does this via the element handlers, which upon hitting a suitable match, replaces the content with the right numeric value for the file.</p>\n\n<p>I've opted to replace the defined content for <code>address/id</code> and <code>count</code>, rather than just doing straight search and replace, because then ... you don't have to worry about <code>1000</code> showing up anywhere else in the content. (Like the address). </p>\n"}], "owner": {"reputation": 192, "user_id": 1573157, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/b17cba205718bdc29af75882921b5ca4?s=128&d=identicon&r=PG", "display_name": "Metahuman", "link": "https://stackoverflow.com/users/1573157/metahuman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 56, "favorite_count": 1, "answer_count": 3, "score": -2, "last_activity_date": 1472731140, "creation_date": 1472683408, "last_edit_date": 1472703200, "question_id": 39260133, "link": "https://stackoverflow.com/questions/39260133/rename-a-particular-instance-in-multiple-files-with-the-file-name", "title": "Rename a particular instance in multiple files with the file name?", "body": "<p>I had to create about 500 copies of a xml file in the directory, which I managed to get done. As a part of the next problem is that I want to rename particular text in the file. How can I go about doing it?</p>\n\n<p>This is what I have:\n1000.xml, 1001.xml, 1002.xml...</p>\n\n<p>1000.xml:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;addresses xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n       xsi:noNamespaceSchemaLocation='test.xsd'&gt;\n&lt;address&gt;\n    &lt;name&gt;Joe Tester&lt;/name&gt;\n    &lt;street&gt;Baker street 5&lt;/street&gt;\n    &lt;id&gt;1000&lt;/id&gt;\n&lt;/address&gt;\n&lt;count&gt;1000&lt;/count&gt;\n</code></pre>\n\n<p></p>\n\n<p>Essentially, this is copied to all the other files, but with a numerical and chronological name. How do I replace this \"1000\" with the \"file name\"? So, the new file should be -\n1001.xml:</p>\n\n<pre><code>    &lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n    &lt;addresses xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n           xsi:noNamespaceSchemaLocation='test.xsd'&gt;\n    &lt;address&gt;\n        &lt;name&gt;Joe Tester&lt;/name&gt;\n        &lt;street&gt;Baker street 5&lt;/street&gt;\n        &lt;id&gt;1001&lt;/id&gt;\n    &lt;/address&gt;\n    &lt;count&gt;1001&lt;/count&gt;\n&lt;/addresses&gt;\n</code></pre>\n\n<p>I could do only this - <code>sed -i '' -e 's/1000/1001/g' $(find . -type f)</code> which will replace all the 1000 with 1001, but not the file name.</p>\n"}, {"tags": ["python", "perl", "python-multiprocessing", "perf"], "owner": {"reputation": 23, "user_id": 6566727, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/08f9cd21a453b262de87c975c4134c7c?s=128&d=identicon&r=PG&f=1", "display_name": "Kestrell", "link": "https://stackoverflow.com/users/6566727/kestrell"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 408, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1472743479, "creation_date": 1472676289, "last_edit_date": 1495542766, "question_id": 39258689, "link": "https://stackoverflow.com/questions/39258689/python-high-system-load-from-hpet", "title": "Python High System Load From HPET", "body": "<p>I have a python program that uses many processes to exercise add-in cards for a specified amount of time.  I based it on an old perl program.</p>\n\n<p>The program is not stressing the add-in cards as much as it should.  It results in performance that is is about 60% of the old perl program, and it should be at least 2x the performance of the old perl program because I'm sending data through memory instead of to disc drives.</p>\n\n<p>I noticed that the %system from <code>iostat -c -d -x -t -m /dev/md127 2</code> is around 20-25% on the new python program, and 5-10% on the old perl program, so I ran perf based on this question: <a href=\"https://stackoverflow.com/questions/30245823/high-kernel-cpu-when-running-multiple-python-progams\">High Kernel CPU when running multiple python progams</a></p>\n\n<p>These are the results from <code>perf record -a -g python ...</code> and <code>perf report -g graph</code> on the new python program.  I have tried this on two different systems, and both show a high \"ktime_get\" and \"read_hpet\".  </p>\n\n<p>My program uses multiprocessing.pool to run <code>while time.time() &lt; numberOfMinutes:</code> but the perf results below is from a run where I set the pool size to 1.    </p>\n\n<p>Is something going on where I have a lot of competition for the high precision timer on these systems?</p>\n\n<pre><code>Samples: 388K of event 'cycles', Event count (approx.): 1345230671182                                \n  Children      Self  Command          Shared Object                 Symbol                         \u25c6\n+   35.81%     0.24%  swapper          [kernel.kallsyms]             [k] cpu_startup_entry          \u00a6\n+   29.27%     0.00%  swapper          [kernel.kallsyms]             [k] start_secondary            \u00a6\n-   27.64%     0.15%  swapper          [kernel.kallsyms]             [k] ktime_get                  \u00a6\n   - ktime_get                                                                                      \u00a6\n      + 10.93% clockevents_program_event                                                            \u00a6\n      + 5.23% cpuidle_enter_state                                                                   \u00a6\n      + 4.02% sched_clock_tick                                                                      \u00a6\n      + 3.55% tick_nohz_idle_exit                                                                   \u00a6\n      + 3.35% __tick_nohz_idle_enter                                                                \u00a6\n      + 0.43% tick_check_idle                                                                       \u00a6\n      + 0.05% tick_sched_timer                                                                      \u00a6\n      + 0.04% clockevents_program_min_delta                                                         \u00a6\n      + 0.01% cpuidle_idle_call                                                                     \u00a6\n      + 0.01% tick_program_event                                                                    \u00a6\n      + 0.00% intel_pstate_timer_func                                                               \u00a6\n      + 0.00% tick_nohz_idle_enter                                                                  \u00a6\n      + 0.00% cpu_startup_entry                                                                     \u00a6\n      + 0.00% sched_clock_idle_wakeup_event                                                         \u00a6\n      + 0.00% poll_idle                                                                             \u00a6\n      + 0.00% irq_enter                                                                             \u00a6\n-   27.60%    27.60%  swapper          [kernel.kallsyms]             [k] read_hpet                  \u00a6\n-   27.60%    27.60%  swapper          [kernel.kallsyms]             [k] read_hpet                  \u00a6\n   - read_hpet                                                                                      \u00a6\n      + 27.49% ktime_get                                                                            \u00a6\n      + 0.07% ktime_get_update_offsets_now                                                          \u00a6\n      + 0.01% update_wall_time                                                                      \u00a6\n      + 0.01% __tick_nohz_idle_enter                                                                \u00a6\n      + 0.01% clockevents_program_event                                                             \u00a6\n      + 0.01% cpuidle_enter_state                                                                   \u00a6\n      + 0.00% tick_nohz_idle_exit                                                                   \u00a6\n      + 0.00% sched_clock_tick                                                                      \u00a6\n      + 0.00% hrtimer_interrupt                                                                     \u00a6\n+   13.79%     0.03%  swapper          [kernel.kallsyms]             [k] tick_nohz_idle_exit        \u00a6\n+   11.58%     0.03%  swapper          [kernel.kallsyms]             [k] tick_program_event         \u00a6\n+   11.57%     0.10%  swapper          [kernel.kallsyms]             [k] clockevents_program_event  \u00a6\n+    9.93%     0.01%  swapper          [kernel.kallsyms]             [k] arch_cpu_idle              \u00a6\n+    9.90%     0.08%  swapper          [kernel.kallsyms]             [k] cpuidle_idle_call          \u00a6\n+    9.81%     0.16%  swapper          [kernel.kallsyms]             [k] hrtimer_start_range_ns     \u00a6\n+    9.79%     0.03%  swapper          [kernel.kallsyms]             [k] __tick_nohz_idle_enter     \u00a6\n\n             \u2592\n</code></pre>\n\n<p><strong>Update</strong>\nDiscovered that the high \"read_hpet\" is coming from a multiprocessing.manager list.  I have a function that spawns a process and walks through a directory adding each file to a manager.list().  Without this, `perf record -a -g python ...' shows me the below report.  Now I'm running some experiments to see if I still get slow performance without using a manager.list().  Why does building a manager.list() from os.walk() use the high precision timer so much?</p>\n\n<pre><code>Samples: 118K of event 'cycles', Event count (approx.): 344546484735                                             \n  Children      Self  Command         Shared Object             Symbol                                           \n+   12.80%     0.01%  python          [kernel.kallsyms]         [k] system_call_fastpath\n+    9.45%     0.00%  python          libpython2.7.so.1.0       [.] 0xffff80585ab02ae0\n+    8.88%     0.06%  python          libc-2.17.so              [.] __xstat64\n+    8.81%     0.03%  python          [kernel.kallsyms]         [k] vfs_fstatat\n+    8.43%     0.01%  python          [kernel.kallsyms]         [k] sys_newstat\n+    8.41%     0.02%  python          [kernel.kallsyms]         [k] SYSC_newstat\n+    8.27%     0.01%  python          [kernel.kallsyms]         [k] user_path_at\n+    8.25%     0.03%  python          [kernel.kallsyms]         [k] user_path_at_empty\n+    8.08%     8.05%  python          libpython2.7.so.1.0       [.] PyEval_EvalFrameEx\n+    8.03%     0.00%  python          multiarray.so             [.] 0xffff8058641f12c0\n+    7.89%     0.02%  python          [kernel.kallsyms]         [k] filename_lookup\n+    7.83%     0.10%  python          [kernel.kallsyms]         [k] path_lookupat\n+    6.37%     0.00%  python          libpython2.7.so.1.0       [.] 0xffff80585ab03940\n+    4.36%     0.00%  python          [unknown]                 [.] 0000000000000000\n+    3.94%     0.00%  python          multiarray.so             [.] 0xffff8058641f1120\n+    3.56%     0.03%  swapper         [kernel.kallsyms]         [k] cpu_startup_entry\n+    3.56%     0.90%  python          [kernel.kallsyms]         [k] link_path_walk\n+    3.39%     0.00%  python          [unknown]                 [.] 0x6c2f746573617461\n+    3.10%     0.04%  python          libc-2.17.so              [.] __getdents64\n+    3.08%     0.00%  python          [unknown]                 [.] 0x6d2f746573617461\n+    2.98%     0.02%  python          [kernel.kallsyms]         [k] lookup_slow\n</code></pre>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user557597"}, "edited": false, "score": 0, "creation_date": 1472671969, "post_id": 39257491, "comment_id": 65851223, "body": "$html =~ s/&lt;begin&gt;([^&gt;}+?)&lt;end&gt;/callback($1) /eg; sub callback { my ($txt) = @_;  $txt =~ s/([a-z])\\1/toupper($1)/g; return &quot;&lt;begin&gt;$txt&lt;end&gt;&quot;; }"}], "answers": [{"tags": [], "owner": {"reputation": 27179, "user_id": 710099, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/0413774874b9baeccef7a5ba0344fec7?s=128&d=identicon&r=PG", "display_name": "Federico Piazza", "link": "https://stackoverflow.com/users/710099/federico-piazza"}, "is_accepted": false, "score": 0, "last_activity_date": 1472671774, "creation_date": 1472671774, "answer_id": 39257594, "question_id": 39257491, "link": "https://stackoverflow.com/questions/39257491/in-perl-how-can-i-substitute-only-after-and-before-certain-character-sequences/39257594#39257594", "title": "In perl, how can I substitute only after and before certain character sequences?", "body": "<p>I think you could extract first the text between those tags and work with it.</p>\n\n<p>However, if you want to use a regex, I can come up with a regex like this:</p>\n\n<pre><code> (.*&lt;begin&gt;)|(&lt;end&gt;.*)|([a-z])\\3\n</code></pre>\n\n<p>And a replacement string:</p>\n\n<pre><code> $1$2$3\n</code></pre>\n\n<p><strong><a href=\"https://regex101.com/r/pU5oG4/1\" rel=\"nofollow noreferrer\">Regex demo</a></strong></p>\n\n<p>Of course, you need to capitalize the group <code>$3</code></p>\n\n<p><a href=\"https://i.stack.imgur.com/Oy2yI.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Oy2yI.png\" alt=\"enter image description here\"></a></p>\n"}, {"comments": [{"owner": {"reputation": 19969, "user_id": 23512, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/tUj1I.png?s=128&g=1", "display_name": "Tanktalus", "link": "https://stackoverflow.com/users/23512/tanktalus"}, "edited": false, "score": 1, "creation_date": 1472673134, "post_id": 39257835, "comment_id": 65851780, "body": "I&#39;d suggest <code>\\U$1</code> instead of <code>uc $1</code> with the <code>e</code> flag on the inner substitution."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 19969, "user_id": 23512, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/tUj1I.png?s=128&g=1", "display_name": "Tanktalus", "link": "https://stackoverflow.com/users/23512/tanktalus"}, "edited": false, "score": 0, "creation_date": 1472673469, "post_id": 39257835, "comment_id": 65851955, "body": "@Tanktalus: Why would you suggest that? I think it&#39;s far clearer the way it is."}, {"owner": {"reputation": 19969, "user_id": 23512, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/tUj1I.png?s=128&g=1", "display_name": "Tanktalus", "link": "https://stackoverflow.com/users/23512/tanktalus"}, "edited": false, "score": 0, "creation_date": 1472673986, "post_id": 39257835, "comment_id": 65852237, "body": "One less use of eval."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 19969, "user_id": 23512, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/tUj1I.png?s=128&g=1", "display_name": "Tanktalus", "link": "https://stackoverflow.com/users/23512/tanktalus"}, "edited": false, "score": 0, "creation_date": 1472676765, "post_id": 39257835, "comment_id": 65853602, "body": "@Tanktalus: A single <code>&#47;e</code> modifier doesn&#39;t use <code>eval</code>. It is short for <i>expression</i> as I said in my answer. A standard substitution uses the same construct because it is the same as <code>s&#47;...&#47; qq{\\U$1} &#47;e</code>, except that you are forced to use a double-quoted string."}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 1, "last_activity_date": 1472672846, "creation_date": 1472672846, "answer_id": 39257835, "question_id": 39257491, "link": "https://stackoverflow.com/questions/39257491/in-perl-how-can-i-substitute-only-after-and-before-certain-character-sequences/39257835#39257835", "title": "In perl, how can I substitute only after and before certain character sequences?", "body": "<p></p>\n\n<p>You can use an <em>expression substitution</em> where the expression is another substitution that uses the non-destructive option <code>/r</code></p>\n\n<p>It looks like this</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>use strict;\nuse warnings 'all';\nuse feature 'say';\n\nmy $s = 'Noot thiis &lt;begin&gt; buut theese need too bee chaanged &lt;end&gt; buut noot heeree eitheer';\n\n\n$s =~ s{(&lt;begin&gt;.*?&lt;end&gt;)}{ $1 =~ s/([aeiou])\\g1/uc $1/egr }esg;\n\nsay $s;\n</code></pre>\n\n<h3>output</h3>\n\n<pre class=\"lang-none prettyprint-override\"><code>Noot thiis &lt;begin&gt; bUt thEse nEd tO bE chAnged &lt;end&gt; buut noot heeree eitheer\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 121, "user_id": 2989653, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4df7866097471a15c3cf51e06b7a1980?s=128&d=identicon&r=PG&f=1", "display_name": "user2989653", "link": "https://stackoverflow.com/users/2989653/user2989653"}, "edited": false, "score": 0, "creation_date": 1472673490, "post_id": 39257842, "comment_id": 65851966, "body": "This seems to do exactly what I needed.  Since I am new to perl regex, can you walk me through what&#39;s going on here? In particular, the <code>\\G</code> , <code>(?&lt;!^</code>, and <code>(?=</code> ?"}, {"owner": {"reputation": 1945, "user_id": 5669174, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XGSyr.jpg?s=128&g=1", "display_name": "Mike", "link": "https://stackoverflow.com/users/5669174/mike"}, "reply_to_user": {"reputation": 121, "user_id": 2989653, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4df7866097471a15c3cf51e06b7a1980?s=128&d=identicon&r=PG&f=1", "display_name": "user2989653", "link": "https://stackoverflow.com/users/2989653/user2989653"}, "edited": false, "score": 0, "creation_date": 1472673596, "post_id": 39257842, "comment_id": 65852027, "body": "@user2989653 I try to write this in response. although I do not know much English ;)"}, {"owner": {"reputation": 83048, "user_id": 2255089, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZNAsT.jpg?s=128&g=1", "display_name": "Casimir et Hippolyte", "link": "https://stackoverflow.com/users/2255089/casimir-et-hippolyte"}, "edited": false, "score": 0, "creation_date": 1472673662, "post_id": 39257842, "comment_id": 65852065, "body": "Since <code>^</code> is a zero-length assertion, you can write <code>(?!^)</code> instead of <code>(?&lt;!^)</code>."}, {"owner": {"user_type": "does_not_exist", "display_name": "user557597"}, "edited": false, "score": 0, "creation_date": 1472674202, "post_id": 39257842, "comment_id": 65852360, "body": "This <code>(?(?=&lt;end&gt;)|.)*?</code> conditional doesn&#39;t do anything. Indeed is the same as <code>.*?</code> There is no check for a closing &lt;end&gt;, so it is just triggered by a &lt;begin&gt;"}, {"owner": {"reputation": 83048, "user_id": 2255089, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZNAsT.jpg?s=128&g=1", "display_name": "Casimir et Hippolyte", "link": "https://stackoverflow.com/users/2255089/casimir-et-hippolyte"}, "edited": false, "score": 0, "creation_date": 1472674507, "post_id": 39257842, "comment_id": 65852520, "body": "@sln: <code>(?(?=&lt;end&gt;)|.)</code> breaks the contiguity for the next match when the closing tag follows"}, {"owner": {"user_type": "does_not_exist", "display_name": "user557597"}, "edited": false, "score": 0, "creation_date": 1472674607, "post_id": 39257842, "comment_id": 65852570, "body": "I get this regex matching  &#39;&lt;begin&gt; should become become&lt;end&gt; b<code>ee</code>come&#39; can you confirm that?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user557597"}, "edited": false, "score": 0, "creation_date": 1472675056, "post_id": 39257842, "comment_id": 65852787, "body": "Wow, that&#39;s impressive. Funny thing is @Mike regex matched my comment text under boost&#39;s regex engine. But, yup the continuity looks broken under pcre. (I mean with the conditional, it should stop but still will fail if there is no end. I mean it could be nested begin/ends, but still no real end check."}, {"owner": {"reputation": 1945, "user_id": 5669174, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XGSyr.jpg?s=128&g=1", "display_name": "Mike", "link": "https://stackoverflow.com/users/5669174/mike"}, "reply_to_user": {"reputation": 83048, "user_id": 2255089, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZNAsT.jpg?s=128&g=1", "display_name": "Casimir et Hippolyte", "link": "https://stackoverflow.com/users/2255089/casimir-et-hippolyte"}, "edited": false, "score": 0, "creation_date": 1472675261, "post_id": 39257842, "comment_id": 65852908, "body": "@CasimiretHippolyte Thanks! Your decision is clearly faster"}, {"owner": {"user_type": "does_not_exist", "display_name": "user557597"}, "reply_to_user": {"reputation": 83048, "user_id": 2255089, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZNAsT.jpg?s=128&g=1", "display_name": "Casimir et Hippolyte", "link": "https://stackoverflow.com/users/2255089/casimir-et-hippolyte"}, "edited": false, "score": 0, "creation_date": 1472675317, "post_id": 39257842, "comment_id": 65852933, "body": "I take back it didn&#39;t work under boost, I rechecked it and it works. And wow @CasimiretHippolyte what a regex. I&#39;m going to benchmark these two regex&#39;s."}, {"owner": {"user_type": "does_not_exist", "display_name": "user557597"}, "edited": false, "score": 0, "creation_date": 1472675653, "post_id": 39257842, "comment_id": 65853077, "body": "<i>They are comparable in speed:</i> Regex1:   (?:&lt;begin&gt;|(?&lt;!^)\\G)(?(?=&lt;end&gt;)|.)*?\\K([a-z])(\\1) Options:  &lt; none &gt; Completed iterations:   50  /  50     ( x 1000 ) Matches found per iteration:   7 Elapsed Time:    1.68 s,   1677.93 ms,   1677927 &#181;s   Regex2:   (?:[^&lt;]*&lt;begin&gt;|\\G(?!^))[^&lt;a-z]*+(?:&lt;(?!end&gt;)[^&lt;a-z]*|([a-z]&zwnj;&#8203;)(?!\\g{-1})[^&lt;a-z]*)&zwnj;&#8203;*+(*SKIP)\\K([a-z])\\g&zwnj;&#8203;{-1} Options:  &lt; none &gt; Completed iterations:   50  /  50     ( x 1000 ) Matches found per iteration:   7 Elapsed Time:    1.96 s,   1955.25 ms,   1955253 &#181;s"}, {"owner": {"reputation": 83048, "user_id": 2255089, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZNAsT.jpg?s=128&g=1", "display_name": "Casimir et Hippolyte", "link": "https://stackoverflow.com/users/2255089/casimir-et-hippolyte"}, "edited": false, "score": 0, "creation_date": 1472676128, "post_id": 39257842, "comment_id": 65853315, "body": "@sln: bad news, and this new version <a href=\"https://regex101.com/r/aG1tU9/11\" rel=\"nofollow noreferrer\">regex101.com/r/aG1tU9/11</a> ?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user557597"}, "reply_to_user": {"reputation": 83048, "user_id": 2255089, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZNAsT.jpg?s=128&g=1", "display_name": "Casimir et Hippolyte", "link": "https://stackoverflow.com/users/2255089/casimir-et-hippolyte"}, "edited": false, "score": 0, "creation_date": 1472754861, "post_id": 39257842, "comment_id": 65891903, "body": "@CasimiretHippolyte - There might be a backtracking issue with that version::  <b>1k interval between tags:</b>   <i>Rx Has <code>[^&lt;]*</code></i> <a href=\"https://regex101.com/r/aG1tU9/12\" rel=\"nofollow noreferrer\">without end &#39;&lt;&#39;</a> - <a href=\"https://regex101.com/r/aG1tU9/13\" rel=\"nofollow noreferrer\">with end &#39;&lt;&#39;</a> ; <i>Rx Has no <code>[^&lt;]*</code></i> <a href=\"https://regex101.com/r/aG1tU9/14\" rel=\"nofollow noreferrer\">without end &#39;&lt;&#39;</a> - <a href=\"https://regex101.com/r/aG1tU9/15\" rel=\"nofollow noreferrer\">with end &#39;&lt;&#39;</a>"}, {"owner": {"user_type": "does_not_exist", "display_name": "user557597"}, "edited": false, "score": 0, "creation_date": 1472755387, "post_id": 39257842, "comment_id": 65892174, "body": "@Mike - There is no difference between <code>(?(?=&lt;end&gt;)|.)*?</code> and <code>(?:(?!&lt;end&gt;).)*?</code>, so if your engine is lower in the food chain, but still supports <code>\\G</code>, then.. As far as conditionals, the only <i>real</i> use for them is as a flag to see if a <i>capture</i> group matched. If you can find any other use, please tell me."}, {"owner": {"reputation": 1945, "user_id": 5669174, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XGSyr.jpg?s=128&g=1", "display_name": "Mike", "link": "https://stackoverflow.com/users/5669174/mike"}, "edited": false, "score": 0, "creation_date": 1472757915, "post_id": 39257842, "comment_id": 65893328, "body": "@sln It can be used to skip unnecessary blocks (on example, between &lt;end&gt; and &lt;begin&gt;). as it <a href=\"https://regex101.com/r/pI9mN4/6\" rel=\"nofollow noreferrer\">regex101.com/r/pI9mN4/6</a>"}, {"owner": {"user_type": "does_not_exist", "display_name": "user557597"}, "reply_to_user": {"reputation": 83048, "user_id": 2255089, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZNAsT.jpg?s=128&g=1", "display_name": "Casimir et Hippolyte", "link": "https://stackoverflow.com/users/2255089/casimir-et-hippolyte"}, "edited": false, "score": 0, "creation_date": 1472763728, "post_id": 39257842, "comment_id": 65895979, "body": "@Mike - Ok, I checked it. That condition does more than <i>skip</i> ahead. If there is no other &lt;begin&gt; downstream, the match is disrupted, as the position can never get past the &lt;end&gt;, and <code>^ .*? &lt;begin&gt;</code> can only execute once. So, it looks good. I&#39;m trying to do the equivalent without a conditional, let you know if I succeed. @CasimiretHippolyte woah, 409 steps, I got to check this."}, {"owner": {"user_type": "does_not_exist", "display_name": "user557597"}, "reply_to_user": {"reputation": 83048, "user_id": 2255089, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZNAsT.jpg?s=128&g=1", "display_name": "Casimir et Hippolyte", "link": "https://stackoverflow.com/users/2255089/casimir-et-hippolyte"}, "edited": false, "score": 0, "creation_date": 1472765791, "post_id": 39257842, "comment_id": 65896871, "body": "(For @Mike &amp; @CasimiretHippolyte) Ok, I think we have the winner here. This <i>header</i> seems to solve issues <code>(?:\\G(?!^)|(?:[^&lt;]+(*SKIP)(*FAIL)|&lt;begin&gt;))</code>, no matter what the bottom end is. Obviously, a condition to <i>skip</i> ahead is not needed. Solves performance issues by a one or two factor. I kept getting <i>too complex</i> error in my tester using the <code>[^&lt;]*(*SKIP)</code> from Casimir&#39;s latest regex, so I forced it, and viola! works and benches as the fastest. I&#39;ll make one more comment with a benchmark. <a href=\"https://regex101.com/r/aG1tU9/17\" rel=\"nofollow noreferrer\">regex101.com/r/aG1tU9/17</a> <i>and</i> <a href=\"https://regex101.com/r/aG1tU9/18\" rel=\"nofollow noreferrer\">regex101.com/r/aG1tU9/18</a>"}, {"owner": {"user_type": "does_not_exist", "display_name": "user557597"}, "edited": false, "score": 0, "creation_date": 1472766692, "post_id": 39257842, "comment_id": 65897248, "body": "I threw in the worst case, large distance between  and to the end  <i>Completed iterations:   10  /  10     ( x 1000 ) Matches found per iteration:   35</i> <code>Regex1:</code>   (?:\\G(?!^)|(?:[^&lt;]+(<i>SKIP)(*FAIL)|&lt;begin&gt;))[^&lt;a-z]*+(?:&lt;(?!en&zwnj;&#8203;d&gt;)[^&lt;a-z]*|([a-z])(&zwnj;&#8203;?!\\g{-1})[^&lt;a-z]</i>)*+(<i>&zwnj;&#8203;SKIP)\\K([a-z])\\g{-1} Elapsed Time:    2.37 s,   2371.80 ms,   2371802 &#181;s <code>Regex2:</code>   (?:\\G(?!^)|(?:[^&lt;]+(*SKIP)(*FAIL)|&lt;begin&gt;))(?:(?!&lt;end&gt;).)</i>?\\K&zwnj;&#8203;([a-z])\\1 Elapsed Time:    2.04 s,   2035.29 ms,   2035285 &#181;s <code>Regex3:</code>   (?&gt;^.*?&lt;begin&gt;|\\G)(?(?=&lt;end&gt;).*?&lt;begin&gt;|.)*?\\K([a-z])\\1 Elapsed Time:    3.25 s,   3251.26 ms,   3251259 &#181;s"}], "tags": [], "owner": {"reputation": 1945, "user_id": 5669174, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XGSyr.jpg?s=128&g=1", "display_name": "Mike", "link": "https://stackoverflow.com/users/5669174/mike"}, "is_accepted": true, "score": 6, "last_activity_date": 1472677181, "last_edit_date": 1472677181, "creation_date": 1472672866, "answer_id": 39257842, "question_id": 39257491, "link": "https://stackoverflow.com/questions/39257491/in-perl-how-can-i-substitute-only-after-and-before-certain-character-sequences/39257842#39257842", "title": "In perl, how can I substitute only after and before certain character sequences?", "body": "<p>Regular expression for case <code>&lt;begin&gt;</code> and <code>&lt;end&gt;</code> can occur several times:</p>\n\n<pre><code>$_=\"Noot thiis &lt;begin&gt; buut theese need too bee chaanged &lt;end&gt; buut noot heeree eitheer&lt;begin&gt;and thiis &lt;end&gt;\";\ns/(?:&lt;begin&gt;|\\G(?!^))(?(?=&lt;end&gt;)|.)*?\\K([a-z])(\\1)/uc($1)/ge;\nprint;\n</code></pre>\n\n<p>Result</p>\n\n<pre><code>Noot thiis &lt;begin&gt; bUt thEse nEd tO bE chAnged &lt;end&gt; buut noot heeree eitheer&lt;begin&gt;and thIs &lt;end&gt;\n</code></pre>\n\n<p><a href=\"https://regex101.com/r/aG1tU9/1\" rel=\"nofollow\">Demo on regex101.com</a></p>\n\n<p>Regular expression:</p>\n\n<pre><code>(?:&lt;begin&gt;|      # Search from &lt;begin&gt;\n   \\G            # or position of last match\n   (?!^)         #    excluding start of string\n)      \n(?(?=&lt;end&gt;)|     # If found &lt;end&gt; then test expression between `)` and `|`.\n                 # as it is empty (not a &lt;end&gt;)\n                 #  - then not matched - end of current search.\n  .)*?           # if NOT &lt;end&gt; then any symbol. too many times\n\\K               # Matched only be considered from this position\n                 # replace only after this position\n([a-z])(\\1)      # 1-character and 1 same\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1472673844, "post_id": 39257999, "comment_id": 65852164, "body": "Not my vote, although I don&#39;t like it a lot as it doesn&#39;t handle line breaks properly."}], "tags": [], "owner": {"reputation": 481636, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "is_accepted": false, "score": 0, "last_activity_date": 1472684418, "last_edit_date": 1472684418, "creation_date": 1472673421, "answer_id": 39257999, "question_id": 39257491, "link": "https://stackoverflow.com/questions/39257491/in-perl-how-can-i-substitute-only-after-and-before-certain-character-sequences/39257999#39257999", "title": "In perl, how can I substitute only after and before certain character sequences?", "body": "<p>A little variation of Borodin's approach simulating a callback method inside a regex-based replacement. The tag matching regex is faster that lazy dot matching pattern since it conforms to the unroll-the-loop principle. The inner substitution is using the <code>\\u</code> uppercasing operator (makes the next char uppercase):</p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\n\nmy $s = 'Noot thiis &lt;begin&gt; buut theese need too bee chaanged &lt;end&gt; buut noot heeree eitheer';\n$s =~ s{(&lt;begin&gt;[^&lt;]*(?:&lt;(?!end&gt;)[^&lt;]*)*&lt;end&gt;)}{ $1 =~ s/([eiaou])\\1/\\u$1/gr }eg;\nprint $s;\n</code></pre>\n\n<p>See the <a href=\"http://ideone.com/CurRK6\" rel=\"nofollow\">regex demo</a></p>\n\n<p>The <code>&lt;begin&gt;[^&lt;]*(?:&lt;(?!end&gt;)[^&lt;]*)*&lt;end&gt;</code> pattern means:</p>\n\n<ul>\n<li><code>&lt;begin&gt;</code> - matches a literal string </li>\n<li><code>[^&lt;]*</code>  - zero or more chars other than <code>&lt;</code></li>\n<li><code>(?:&lt;(?!end&gt;)[^&lt;]*)*</code> - zero or more sequences of:\n\n<ul>\n<li><code>&lt;(?!end&gt;)</code>  - a <code>&lt;</code> not followed with <code>end&gt;</code></li>\n<li><code>[^&lt;]*</code> - zero or more chars other than <code>&lt;</code> </li>\n</ul></li>\n<li><code>&lt;end&gt;</code> - literal text.</li>\n</ul>\n\n<p>Due to the use of negated character classes, no <code>/s</code> DOTALL modifier is necessary with this regex, and it is faster than <code>.*?</code> based regex since negated character classes grab whole chunks of text matching their pattern in one go without checking each subsequent positions.</p>\n"}], "owner": {"reputation": 121, "user_id": 2989653, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4df7866097471a15c3cf51e06b7a1980?s=128&d=identicon&r=PG&f=1", "display_name": "user2989653", "link": "https://stackoverflow.com/users/2989653/user2989653"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 945, "favorite_count": 1, "accepted_answer_id": 39257842, "answer_count": 4, "score": 1, "last_activity_date": 1472684418, "creation_date": 1472671376, "question_id": 39257491, "link": "https://stackoverflow.com/questions/39257491/in-perl-how-can-i-substitute-only-after-and-before-certain-character-sequences", "title": "In perl, how can I substitute only after and before certain character sequences?", "body": "<p>For example, if I want to substitute all occurrences of double vowels to a single capital vowel only if they occur between <code>&lt;begin&gt;</code> and <code>&lt;end&gt;</code>, how would I do that?</p>\n\n<pre><code>Noot thiis &lt;begin&gt; buut theese need too bee chaanged &lt;end&gt; buut noot heeree eitheer\n</code></pre>\n\n<p>should become</p>\n\n<pre><code>Noot thiis &lt;begin&gt; bUt thEse nEd tO bE chAnged &lt;end&gt; buut noot heeree eitheer \n</code></pre>\n"}, {"tags": ["regex", "perl", "variables"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user557597"}, "edited": false, "score": 0, "creation_date": 1472667883, "post_id": 39256384, "comment_id": 65848880, "body": "Wouldn&#39;t do it this way. First of all, you need an array of hash structures. To accomplish that you&#39;d use the regex like <code>while ( $data =~ &#47;your regex&#47;g ) { $href = {}; $href-&gt;mV = $1; $href-&gt;N1 = $2; $href-&gt;N2 = $3; push @ary, $href; }</code> or something like that. Then loop through the array making calculations. Alternatively, in the while body, just do your calcs instead of storing the info."}, {"owner": {"user_type": "does_not_exist", "display_name": "user557597"}, "edited": false, "score": 0, "creation_date": 1472668293, "post_id": 39256384, "comment_id": 65849109, "body": "Another note, the regex you are using is very rigid, almost fixed form. I&#39;d loosen that up and add firmer anchors, which would give you a higher percentage chance you won&#39;t miss matches."}, {"owner": {"reputation": 83048, "user_id": 2255089, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZNAsT.jpg?s=128&g=1", "display_name": "Casimir et Hippolyte", "link": "https://stackoverflow.com/users/2255089/casimir-et-hippolyte"}, "edited": false, "score": 0, "creation_date": 1472668338, "post_id": 39256384, "comment_id": 65849134, "body": "&quot;(very large) file&quot; =&gt; read one line at a time (don&#39;t load the whole file) and anchor your pattern at the start of the line using <code>^</code>"}, {"owner": {"user_type": "does_not_exist", "display_name": "user557597"}, "edited": false, "score": 0, "creation_date": 1472668453, "post_id": 39256384, "comment_id": 65849199, "body": "Also, Perl&#39;s variables have duality in typing. <code>flexible vairables</code> which I suppose you mean. If you use it as a string, it will convert it to a string, same with number."}], "answers": [{"comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1472668979, "post_id": 39256451, "comment_id": 65849498, "body": "That values of the capture variables are set every time a regex match <i>succeeds</i>, so you need to test the result of the match before using them. You could write <code>if ( $string =~ &#47;^m(\\d+)_(\\d+)&#47; and $1 &lt; 500 || $2 &lt; 500 ) { ... }</code> but your tests don&#39;t correspond to what the OP describes."}], "tags": [], "owner": {"reputation": 4320, "user_id": 5103620, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/8ae06ea53a316cc879b9100b3ff25bfc?s=128&d=identicon&r=PG", "display_name": "Sebastian Lenartowicz", "link": "https://stackoverflow.com/users/5103620/sebastian-lenartowicz"}, "is_accepted": false, "score": 0, "last_activity_date": 1472669800, "last_edit_date": 1472669800, "creation_date": 1472667500, "answer_id": 39256451, "question_id": 39256384, "link": "https://stackoverflow.com/questions/39256384/perl-regex-multiple-matches-as-variables/39256451#39256451", "title": "perl regex: multiple matches as variables", "body": "<p>Perl stores the results of captures in special numbered variables. The first capture group is <code>$1</code>, the second is <code>$2</code>, and so on. Their values are set <em>every</em> time a regex match succeeds (whether replacement or matching).</p>\n\n<p>So, in your case, you could do something like this:</p>\n\n<pre><code>my $string = \"m160505_031746_42156_c100980652550000001823221307061611_s1_p0|114630|20543_24727\";\nif ($string =~ /^m(\\d+)_(\\d+)/) {\n    if ($1 &lt; 500 || $2 &lt; 500) {\n        do_something()\n    }\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 165, "user_id": 5880355, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/b78c85bb76849376873b8e1556d3000d?s=128&d=identicon&r=PG&f=1", "display_name": "Rob", "link": "https://stackoverflow.com/users/5880355/rob"}, "edited": false, "score": 0, "creation_date": 1472672526, "post_id": 39256781, "comment_id": 65851481, "body": "Great answer. Thanks! I would just suggest one edit to the if statement: &quot; or $end_pos &lt; 500)&quot;, as per the question asked. Thanks again."}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": true, "score": 2, "last_activity_date": 1472673006, "last_edit_date": 1472673006, "creation_date": 1472668747, "answer_id": 39256781, "question_id": 39256384, "link": "https://stackoverflow.com/questions/39256384/perl-regex-multiple-matches-as-variables/39256781#39256781", "title": "perl regex: multiple matches as variables", "body": "<p>It's wasteful and unnecessary to read an entire file into memory; more so if it is a very large file</p>\n\n<p>My solution below sets the record separator to <code>&gt;</code> so that the file can be read one chunk at a time. The variables that you describe are extracted from the chunk, and the remainder of the loop is skipped if any of them aren't found</p>\n\n<p>This program expects the path to the input file as a parameter on the command line</p>\n\n<pre><code>use strict;\nuse warnings 'all';\nuse feature 'say';\n\nlocal $/ = \"&gt;\";\n\nwhile ( &lt;&gt; ) {\n\n    next unless my ($m_variable) = / ^ ( m \\d+ .+ ) /x;\n    next unless my ($length)     = / ^ Length=(\\d+) /xm;\n    next unless my ($end_pos)    = / ^ Sbjct \\b .*  \\b (\\d+) /xm;\n\n    if ( abs($length - $end_pos) &lt; 500 or $end_pos &lt; 500 ) {\n        say $m_variable;\n    }\n}\n</code></pre>\n\n<h3>output</h3>\n\n<pre><code>m160505_031746_42156_c100980652550000001823221307061611_s1_p0|153096|3235_13893 \n</code></pre>\n"}, {"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user557597"}, "edited": false, "score": 0, "creation_date": 1472669659, "post_id": 39256978, "comment_id": 65849928, "body": "Not sure but, since you set the global flag there won&#39;t the list variables get overwritten on each match ? Or maybe just the last match, I&#39;m not sure."}, {"owner": {"reputation": 173, "user_id": 6317042, "user_type": "registered", "profile_image": "https://graph.facebook.com/1057926774279190/picture?type=large", "display_name": "Marco Silva", "link": "https://stackoverflow.com/users/6317042/marco-silva"}, "edited": false, "score": 0, "creation_date": 1472677765, "post_id": 39256978, "comment_id": 65854086, "body": "The global flag was in your code. But since you are insecure about it, you can read from the docs: &quot;match the pattern repeatedly in the string&quot; . In the case when getting $1,$2, $3 will be the last one. Just reading your problem your code is not quite right, because you have to make the pattern match for each record (&gt;m until next &gt;m). But, since your question was limited to understand how to get the variables I limited answer to this part of the problem."}], "tags": [], "owner": {"reputation": 173, "user_id": 6317042, "user_type": "registered", "profile_image": "https://graph.facebook.com/1057926774279190/picture?type=large", "display_name": "Marco Silva", "link": "https://stackoverflow.com/users/6317042/marco-silva"}, "is_accepted": false, "score": 0, "last_activity_date": 1472669499, "creation_date": 1472669499, "answer_id": 39256978, "question_id": 39256384, "link": "https://stackoverflow.com/questions/39256384/perl-regex-multiple-matches-as-variables/39256978#39256978", "title": "perl regex: multiple matches as variables", "body": "<p>When matching against a pattern you could extract the $1, $2, etc... using a list. So instead of:</p>\n\n<pre><code>my @matches = $data =~ /&gt;(m.+)\\nLength=([0-9]+)\\n\\n Score.+\\n Iden.+\\n Str.+\\n\\nQuery.+\\n.+\\nSbjct  [0-9]+  [TAGC]+  ([0-9]+)/g;\n</code></pre>\n\n<p><strong>you could use this</strong>:</p>\n\n<pre><code>my ($m_var, $first, $second) = $data =~ /&gt;(m.+)\\nLength=([0-9]+)\\n\\n Score.+\\n Iden.+\\n Str.+\\n\\nQuery.+\\n.+\\nSbjct  [0-9]+  [TAGC]+  ([0-9]+)/g;\n</code></pre>\n"}], "owner": {"reputation": 165, "user_id": 5880355, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/b78c85bb76849376873b8e1556d3000d?s=128&d=identicon&r=PG&f=1", "display_name": "Rob", "link": "https://stackoverflow.com/users/5880355/rob"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 901, "favorite_count": 0, "accepted_answer_id": 39256781, "answer_count": 3, "score": 1, "last_activity_date": 1472673006, "creation_date": 1472667244, "question_id": 39256384, "link": "https://stackoverflow.com/questions/39256384/perl-regex-multiple-matches-as-variables", "title": "perl regex: multiple matches as variables", "body": "<p>I am not interested in how to use a variable in a regex search. Instead, I am curious how I can turn multiple regex matches into variables.  </p>\n\n<p>I have a file that looks like this: </p>\n\n<pre><code>&gt;m160505_031746_42156_c100980652550000001823221307061611_s1_p0|153096|3235_13893 \nLength=10658\n\n Score = 33.7 bits (18),  Expect = 0.19\n Identities = 18/18 (100%), Gaps = 0/18 (0%)\n Strand=Plus/Minus\n\nQuery  3     CTATTTAAACCTAATCGG  20\n             ||||||||||||||||||\nSbjct  10604  CTATTTAAACCTAATCGG  10587\n\n\n&gt;m160505_031746_42156_c100980652550000001823221307061611_s1_p0|114630|20543_24727 \nLength=4184\n\n Score = 33.7 bits (18),  Expect = 0.19\n Identities = 18/18 (100%), Gaps = 0/18 (0%)\n Strand=Plus/Plus\n\nQuery  3    CTATTTAAACCTAATCGG  20\n            ||||||||||||||||||\nSbjct  85   CTATTTAAACCTAATCGG  102\n</code></pre>\n\n<p>My ultimate goal is to search this (very large) file and only extract lines that look like \">m160505_...\" based on the end position of the subject match (seen as 10587 and 102 in the above example). If the end position of the subject is within 500 of the Length of the query length, or if it is within 500 absolutely, the >m... line gets printed. I realize this seems complicated, so looking at my code might help clarify things. \nThis is what my code looks like so far: </p>\n\n<pre><code>use strict;\nuse warnings;\n\nmy $file = '/path/to/file.txt';\nmy $data;\n{\n    open my $fh, '&lt;', $file or die;\n    local $/ = undef;\n    $data = &lt;$fh&gt;;\n    close $fh;\n}\nmy @matches = $data =~ /&gt;(m.+)\\nLength=([0-9]+)\\n\\n Score.+\\n Iden.+\\n Str.+\\n\\nQuery.+\\n.+\\nSbjct  [0-9]+  [TAGC]+  ([0-9]+)/g;\nforeach (@matches) {\n    print \"$_\\n\";\n} \n</code></pre>\n\n<p>This prints out something like the following: </p>\n\n<pre><code>&gt;m160505_031746_42156_c100980652550000001823221307061611_s1_p0|153096|3235_13893\n 10658 \n 10587 \n&gt;m160505_031746_42156_c100980652550000001823221307061611_s1_p0|114630|20543_24727 \n  4184 \n  102 \n</code></pre>\n\n<p>From here I need to change things so the regex matches turn into variables (flexible vairables). I would like to be able to use them in something like the following: </p>\n\n<pre><code> my $mVariable = \"m160505_031746_42156_c100980652550000001823221307061611_s1_p0|114630|20543_24727\"; \n my $firstnumber = 10685; \n my $secondnumber = 10587; \n if ($firstnumber - $secondnumber &lt; 500 || $secondnumber &lt; 500) { \n      print $mVariable, \"\\n\"; \n } \n</code></pre>\n\n<p>Thanks for your help! \nIf I can clarify something please let me know. </p>\n"}, {"tags": ["bash", "perl", "shell", "scripting", "sh"], "answers": [{"comments": [{"owner": {"reputation": 145, "user_id": 6292987, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/cf408d91ad5f6adb872fb56220c1b85b?s=128&d=identicon&r=PG&f=1", "display_name": "connollyc4", "link": "https://stackoverflow.com/users/6292987/connollyc4"}, "edited": false, "score": 0, "creation_date": 1472689163, "post_id": 39259696, "comment_id": 65857680, "body": "I got an error running this script:  <code>.&#47;monitor.sh: line 2: syntax error at line 5: </code>do&#39; unexpected`.   any idea&#39;s why?"}, {"owner": {"reputation": 13254, "user_id": 78351, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/0d6a337105bd3a30f7c3ceec12097c09?s=128&d=identicon&r=PG", "display_name": "euphoria83", "link": "https://stackoverflow.com/users/78351/euphoria83"}, "reply_to_user": {"reputation": 145, "user_id": 6292987, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/cf408d91ad5f6adb872fb56220c1b85b?s=128&d=identicon&r=PG&f=1", "display_name": "connollyc4", "link": "https://stackoverflow.com/users/6292987/connollyc4"}, "edited": false, "score": 0, "creation_date": 1472695389, "post_id": 39259696, "comment_id": 65859067, "body": "can u paste the a couple of lines before and after the line where u run this script?"}, {"owner": {"reputation": 145, "user_id": 6292987, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/cf408d91ad5f6adb872fb56220c1b85b?s=128&d=identicon&r=PG&f=1", "display_name": "connollyc4", "link": "https://stackoverflow.com/users/6292987/connollyc4"}, "edited": false, "score": 0, "creation_date": 1472696372, "post_id": 39259696, "comment_id": 65859282, "body": "<code>processes_to_be_tracked=(&#39;Apple-TE--03&#39; &#39;Orange-TE--02&#39;) running_processes=( $(process.sh -s | awk &#39;{print $2}&#39; ) non_running=() for process_name in ${processes_to_be_tracked[@]}; do     if [[ &quot;${running_processes[*]}&quot; == *$process_name* ]]; then         echo &quot;$process_name is running&quot;     else         echo &quot;$process_name is not running&quot;         non_running+=($process_name)     fi done</code> ` BASH:-&gt;monitor.sh ./monitor.sh: line 4: syntax error near unexpected token <code>(&#39; .&#47;monitor.sh: line 4: </code>non_running=()&#39; Apple-TE--03 is not running Orange-TE--02 is not running BASH:-&gt; `"}, {"owner": {"reputation": 13254, "user_id": 78351, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/0d6a337105bd3a30f7c3ceec12097c09?s=128&d=identicon&r=PG", "display_name": "euphoria83", "link": "https://stackoverflow.com/users/78351/euphoria83"}, "reply_to_user": {"reputation": 145, "user_id": 6292987, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/cf408d91ad5f6adb872fb56220c1b85b?s=128&d=identicon&r=PG&f=1", "display_name": "connollyc4", "link": "https://stackoverflow.com/users/6292987/connollyc4"}, "edited": false, "score": 0, "creation_date": 1472756386, "post_id": 39259696, "comment_id": 65892666, "body": "@connollyc4 I had a syntax error on line 2. I had missed a closing &#39;)&#39; . I have fixed it now. Sorry."}], "tags": [], "owner": {"reputation": 13254, "user_id": 78351, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/0d6a337105bd3a30f7c3ceec12097c09?s=128&d=identicon&r=PG", "display_name": "euphoria83", "link": "https://stackoverflow.com/users/78351/euphoria83"}, "is_accepted": false, "score": 0, "last_activity_date": 1472756277, "last_edit_date": 1472756277, "creation_date": 1472681015, "answer_id": 39259696, "question_id": 39254959, "link": "https://stackoverflow.com/questions/39254959/how-to-monitor-a-list-of-process-names-and-send-email/39259696#39259696", "title": "How to monitor a list of process names and send email", "body": "<pre><code>processes_to_be_tracked=('Apple-TE--03' 'Orange-TE--02')\nrunning_processes=( $(process.sh -s | awk '{print $2}') )\nnon_running=()\nfor process_name in ${processes_to_be_tracked[@]}; do\n    if [[ \"${running_processes[*]}\" == *$process_name* ]]; then\n        echo \"$process_name is running\"\n    else\n        echo \"$process_name is not running\"\n        non_running+=($process_name)\n    fi\ndone\nsend-alert-mail-with-names-of-dead-processes \"${non_running[*]}\"\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1472725383, "post_id": 39260505, "comment_id": 65872314, "body": "@connollyc4 Rewritten to address the actual problem, which I misunderstood at first"}, {"owner": {"reputation": 145, "user_id": 6292987, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/cf408d91ad5f6adb872fb56220c1b85b?s=128&d=identicon&r=PG&f=1", "display_name": "connollyc4", "link": "https://stackoverflow.com/users/6292987/connollyc4"}, "edited": false, "score": 0, "creation_date": 1472762502, "post_id": 39260505, "comment_id": 65895409, "body": "Thanks @zdim ! I didn&#39;t see this answer for some reason until you mentioned it on the other post. Is there a way I can print to screen to see if this works? like print &quot; Apple-JI--01 is down on the terminal?"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 145, "user_id": 6292987, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/cf408d91ad5f6adb872fb56220c1b85b?s=128&d=identicon&r=PG&f=1", "display_name": "connollyc4", "link": "https://stackoverflow.com/users/6292987/connollyc4"}, "edited": false, "score": 0, "creation_date": 1472763741, "post_id": 39260505, "comment_id": 65895985, "body": "@connollyc4  Sure -- for example, inside <code>if (@down) { ... }</code> add <code>print &quot;@down\\n&quot;;</code>.  I added it to the answer.  I tested, but not with your processes of course."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 145, "user_id": 6292987, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/cf408d91ad5f6adb872fb56220c1b85b?s=128&d=identicon&r=PG&f=1", "display_name": "connollyc4", "link": "https://stackoverflow.com/users/6292987/connollyc4"}, "edited": false, "score": 0, "creation_date": 1472763897, "post_id": 39260505, "comment_id": 65896046, "body": "@connollyc4  Note, this doesn&#39;t do what your newer question asks (which I don&#39;t fully understand) -- just what <i>this</i> one is about."}, {"owner": {"reputation": 145, "user_id": 6292987, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/cf408d91ad5f6adb872fb56220c1b85b?s=128&d=identicon&r=PG&f=1", "display_name": "connollyc4", "link": "https://stackoverflow.com/users/6292987/connollyc4"}, "edited": false, "score": 0, "creation_date": 1472764596, "post_id": 39260505, "comment_id": 65896347, "body": "Thanks! that works! the issue I am now running into is that the script will always have the process names up (Orange-TE--02 Apple-JI--01 Orange-JI--06) using process.sh -s. However, when a process goes down the PID column will not have a PID number. Instead it will say &quot;Down&quot; as a PID in the 3rd column. Do you know if it&#39;s possible to look at the PID part of process.sh -s and if it says &quot;Down&quot; print the corresponding process name in column 2?  thanks!!!"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 145, "user_id": 6292987, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/cf408d91ad5f6adb872fb56220c1b85b?s=128&d=identicon&r=PG&f=1", "display_name": "connollyc4", "link": "https://stackoverflow.com/users/6292987/connollyc4"}, "edited": false, "score": 0, "creation_date": 1472764785, "post_id": 39260505, "comment_id": 65896421, "body": "@connollyc4  All of this is processing of that table of output -- you can do anything with it.  Let me get it -- So all processes will be listed in fact (none are missing from the list), but some will have &quot;Down&quot; instead of PID -- and you want to identify these?  All such processes or just to check whether any in the list <code>@watch</code> has &quot;Down&quot;?"}, {"owner": {"reputation": 145, "user_id": 6292987, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/cf408d91ad5f6adb872fb56220c1b85b?s=128&d=identicon&r=PG&f=1", "display_name": "connollyc4", "link": "https://stackoverflow.com/users/6292987/connollyc4"}, "edited": false, "score": 0, "creation_date": 1472765623, "post_id": 39260505, "comment_id": 65896787, "body": "exactly, I only want to check process in the list @watch have &quot;Down&quot; If any of the <code>@watch</code> do say &quot;Down&quot; then print the process name in the error."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 145, "user_id": 6292987, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/cf408d91ad5f6adb872fb56220c1b85b?s=128&d=identicon&r=PG&f=1", "display_name": "connollyc4", "link": "https://stackoverflow.com/users/6292987/connollyc4"}, "edited": false, "score": 0, "creation_date": 1472765719, "post_id": 39260505, "comment_id": 65896835, "body": "@connollyc4  I have that in working code, but I don&#39;t really know how to communicate it.  Adding it here answers a slightly different question than posted, while if you edit this one that invalidates other present answers.  Answering the next (newer) question practically makes a near-duplicate of this one, and leaves this one unresolved. Perhaphs you should take care of marking answers here, for <i>this</i> question, as it stands, and I can post the answer for the new one -- and in the future be careful to not end up in a mix like this."}, {"owner": {"reputation": 145, "user_id": 6292987, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/cf408d91ad5f6adb872fb56220c1b85b?s=128&d=identicon&r=PG&f=1", "display_name": "connollyc4", "link": "https://stackoverflow.com/users/6292987/connollyc4"}, "edited": false, "score": 0, "creation_date": 1472766261, "post_id": 39260505, "comment_id": 65897071, "body": "Thank you and great point! Your original answer is exactly what I was trying to do when I first wrote this question. I added your post as the my accepted answer and we can use the new post for my modified question. Thanks again!"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 145, "user_id": 6292987, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/cf408d91ad5f6adb872fb56220c1b85b?s=128&d=identicon&r=PG&f=1", "display_name": "connollyc4", "link": "https://stackoverflow.com/users/6292987/connollyc4"}, "edited": false, "score": 0, "creation_date": 1472766554, "post_id": 39260505, "comment_id": 65897193, "body": "@connollyc4  In the meanwhile the other one got put on hold (just as I finished typing in code and explanation!), as it was not a good question in teh beginning.  I&#39;ll add that answer here (so that you get it). Then I&#39;ll consider asking for the other one to be reopened, but I am not sure whether there is enough merit to that.  Will let you know how that goes."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 145, "user_id": 6292987, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/cf408d91ad5f6adb872fb56220c1b85b?s=128&d=identicon&r=PG&f=1", "display_name": "connollyc4", "link": "https://stackoverflow.com/users/6292987/connollyc4"}, "edited": false, "score": 0, "creation_date": 1472768043, "post_id": 39260505, "comment_id": 65897717, "body": "@connollyc4  Added the answer to the follow-up question, in the end.  That question (the next, newer one) really should have not been asked or should have been different.  Never mind now, note it for future questions.  Let me know about the addition.  If that other question ever gets reopened I&#39;ll move this (added part of the) answer there. Thank you for the attribution."}, {"owner": {"reputation": 145, "user_id": 6292987, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/cf408d91ad5f6adb872fb56220c1b85b?s=128&d=identicon&r=PG&f=1", "display_name": "connollyc4", "link": "https://stackoverflow.com/users/6292987/connollyc4"}, "edited": false, "score": 0, "creation_date": 1472848581, "post_id": 39260505, "comment_id": 65934695, "body": "Thank you so much @zdim ! Do you know if it&#39;s possible to have mailx print out the elements in separate lines? I have tried to do so but it&#39;s not giving me an error, nor is it working. This is what I added:  <code>if (@down) {      print &quot;$_ is down\\n&quot; for @down;     # send email }</code>  I added this part after the &quot;my down&quot; function.  Does there seem to be an issue with what I added?  Thanks!"}, {"owner": {"reputation": 145, "user_id": 6292987, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/cf408d91ad5f6adb872fb56220c1b85b?s=128&d=identicon&r=PG&f=1", "display_name": "connollyc4", "link": "https://stackoverflow.com/users/6292987/connollyc4"}, "edited": false, "score": 0, "creation_date": 1472849092, "post_id": 39260505, "comment_id": 65934921, "body": "Here is more of the code  <code>foreach (@down) {   print &quot;$_\\n&quot;; } if (@down) {     my $body = &quot;Process are down @down&quot;;     my $cmd_email = &quot;echo $body | &quot; .         &quot;mailx -s \\&quot;Alert process are down\\&quot; tneal01\\@gmail.com&quot;;     system($cmd_email) == 0  or die &quot;Error sending email -- $!&quot;; }</code>"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 145, "user_id": 6292987, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/cf408d91ad5f6adb872fb56220c1b85b?s=128&d=identicon&r=PG&f=1", "display_name": "connollyc4", "link": "https://stackoverflow.com/users/6292987/connollyc4"}, "edited": false, "score": 0, "creation_date": 1472963221, "post_id": 39260505, "comment_id": 65959694, "body": "@connollyc4   I added code for it to the answer (tested), with comments.  For a multi-line message you have to write the desired content to a file and then attach the file.  (Or -- I don&#39;t know a way to do it otherwise.)  Or use a module, of course."}, {"owner": {"reputation": 145, "user_id": 6292987, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/cf408d91ad5f6adb872fb56220c1b85b?s=128&d=identicon&r=PG&f=1", "display_name": "connollyc4", "link": "https://stackoverflow.com/users/6292987/connollyc4"}, "edited": false, "score": 0, "creation_date": 1474577696, "post_id": 39260505, "comment_id": 66600778, "body": "Sorry I have been away for a while. Thank you very much for your help. Last question I have is, how can I add the words &quot;key process&#39;s are down&quot; as the first line of <code>services_down.$$</code>  so that the second line would be the first process down. Thanks!"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 145, "user_id": 6292987, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/cf408d91ad5f6adb872fb56220c1b85b?s=128&d=identicon&r=PG&f=1", "display_name": "connollyc4", "link": "https://stackoverflow.com/users/6292987/connollyc4"}, "edited": false, "score": 0, "creation_date": 1474578474, "post_id": 39260505, "comment_id": 66601162, "body": "@connollyc4  That&#39;s fine :).  You print that line to that file right after you opened the file -- so after <code>open my $fh, &#39;&gt;&#39;, $down_file  or die &quot;...&quot;;</code> the next line would be  <code>print $fh &quot;key ...\\n&quot;;</code>.  Then you can print <code>@data</code> to the file.  Is this what you meant?"}, {"owner": {"reputation": 145, "user_id": 6292987, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/cf408d91ad5f6adb872fb56220c1b85b?s=128&d=identicon&r=PG&f=1", "display_name": "connollyc4", "link": "https://stackoverflow.com/users/6292987/connollyc4"}, "edited": false, "score": 0, "creation_date": 1477187219, "post_id": 39260505, "comment_id": 67663289, "body": "Thank you! That is exactly what I was trying to do. I was reading online that perl can&#39;t call another shell script. Is that true? I have the output of <code>@down</code> go to another file for formatting. I was trying to figure out after the file is created - sleep 10 seconds and then call another script /users/tneal01/email_format.sh before the scripts exits. Is it possible to call that script at the end of the above perl script?"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 145, "user_id": 6292987, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/cf408d91ad5f6adb872fb56220c1b85b?s=128&d=identicon&r=PG&f=1", "display_name": "connollyc4", "link": "https://stackoverflow.com/users/6292987/connollyc4"}, "edited": false, "score": 0, "creation_date": 1477188429, "post_id": 39260505, "comment_id": 67663466, "body": "@connollyc4  I am not sure I understand, it&#39;s been a while and I forgot what exactly this is about.  I&#39;ll look, but just to answer right now -- of course you can call a script from Perl. Why not? Are you saying that the output of this Perl script goes to a file and then another script needs to run on it?  Then you can write <i>to a file</i> from inside this script, instead of writing to sceen. Open a file, write to it, and when you are done <code>close</code> the filehandle you wrote to. Right after that you can call the other script, using either <code>system</code> or backticks (<code>qx</code>). Is this what you are asking?"}, {"owner": {"reputation": 145, "user_id": 6292987, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/cf408d91ad5f6adb872fb56220c1b85b?s=128&d=identicon&r=PG&f=1", "display_name": "connollyc4", "link": "https://stackoverflow.com/users/6292987/connollyc4"}, "edited": false, "score": 0, "creation_date": 1477190297, "post_id": 39260505, "comment_id": 67663712, "body": "You added an example which creates a file called <code>&quot;services_down&quot;</code> for the purpose of emailing the down process&#39; as an email attachment for a muti-line message. Instead of sending the list of process&#39; down as an email attachment, I created another script called &quot;email_format.sh&quot; which all it does is email the content of &quot;services_down&quot; as the body of the email and removes the services_down file once emailed.   <code>shell script content</code> <code>mailx -s &#39;Status&#39; tneal01@gmail.com, jjake@gmail.com &lt;status_down sleep 30 rm &#47;users&#47;tneal01&#47;status_down </code>"}, {"owner": {"reputation": 145, "user_id": 6292987, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/cf408d91ad5f6adb872fb56220c1b85b?s=128&d=identicon&r=PG&f=1", "display_name": "connollyc4", "link": "https://stackoverflow.com/users/6292987/connollyc4"}, "edited": false, "score": 0, "creation_date": 1477190804, "post_id": 39260505, "comment_id": 67663787, "body": "here is the code that creates the services_down file, it&#39;s been a while :) <code>sub send_email {     my @data = @_;     # Write a file  (but use File::Temp) and attach for a multi-line message     my $down_file = &quot;services_down.$$&quot;;     open my $fh, &#39;&gt;&#39;, $down_file  or die &quot;Can&#39;t open $down_file: $!&quot;;     print $fh &quot;Process down:\\n\\n&quot;;     print $fh &quot;$_\\n&quot; for @data;      close $fh; }  &#39; All I&#39;m trying to do is after the file is created email the contents of </code>services_down` as the body if there are indeed services down and delete the file once emailed (like the above comment)"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 145, "user_id": 6292987, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/cf408d91ad5f6adb872fb56220c1b85b?s=128&d=identicon&r=PG&f=1", "display_name": "connollyc4", "link": "https://stackoverflow.com/users/6292987/connollyc4"}, "edited": false, "score": 0, "creation_date": 1477191245, "post_id": 39260505, "comment_id": 67663848, "body": "@connollyc4 Ah, I see, the <code>sub send_email</code> in the first part.  Then, right after <code>close $fh;</code> you can call that other script. For example, instead of the email command in <code>my $cmd = ...</code> define the command that invokes that other script.  You may well be able to just say <code>my $cmd = &#39;email_format.sh&#39;;</code> (if that script is executable).  Then also remove the code that would delete the file."}, {"owner": {"reputation": 145, "user_id": 6292987, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/cf408d91ad5f6adb872fb56220c1b85b?s=128&d=identicon&r=PG&f=1", "display_name": "connollyc4", "link": "https://stackoverflow.com/users/6292987/connollyc4"}, "edited": false, "score": 0, "creation_date": 1477363153, "post_id": 39260505, "comment_id": 67724003, "body": "Thanks @zdim ! One last question :) is there a way to count the number of process down to add to the  email alert? for example <code>print $fh &quot;There are (x) processes down:\\n\\n&quot;;</code>  in place of (x) it would have the count of processes that don&#39;t match."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 145, "user_id": 6292987, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/cf408d91ad5f6adb872fb56220c1b85b?s=128&d=identicon&r=PG&f=1", "display_name": "connollyc4", "link": "https://stackoverflow.com/users/6292987/connollyc4"}, "edited": false, "score": 0, "creation_date": 1477379071, "post_id": 39260505, "comment_id": 67729268, "body": "@connollyc4  The array with that info is called <code>@data</code> in the first part (it&#39;s <code>@down</code> in the second).  The number of elements in an array is obtained by using the array in a <i>scalar context</i> --- say, when you add it, <code>0 + @data</code>, or, properly by <code>scalar @data</code>.  So you can either say <code>my $numel = scalar @data;</code> and use <code>$numel</code>, or <code>print $fh &quot;There are ( &quot; . scalar(@data) . &quot;) processes down:\\n\\n&quot;;</code>"}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": true, "score": 2, "last_activity_date": 1564634658, "last_edit_date": 1564634658, "creation_date": 1472685911, "answer_id": 39260505, "question_id": 39254959, "link": "https://stackoverflow.com/questions/39254959/how-to-monitor-a-list-of-process-names-and-send-email/39260505#39260505", "title": "How to monitor a list of process names and send email", "body": "<p><strong>Note</strong> &nbsp;  There is also an answer to a follow-up question (that got put on hold and deleted)</p>\n\n<hr>\n\n<p>With a Perl script</p>\n\n<pre><code>use warnings 'all';\nuse strict;\n\nmy @watch = qw(Orange-TE--02 Apple-JI--01 Orange-JI--06);\n\n# Extract second column from the table of running processes, drop header line\nmy @running = map { (split)[1] } `process.sh -s`; \nshift @running;\n\nmy @down;\nforeach my $proc_name (@watch) {\n    push @down, $proc_name  if not grep { /^$proc_name$/ } @running;\n}\nprint \"$_ is down\\n\" for @down;\nsend_email(@down) if @down;\n\nsub send_email {\n    my @data = @_;\n    # Write a file  (but use File::Temp) and attach for a multi-line message\n    my $down_file = \"services_down.$$\";\n    open my $fh, '&gt;', $down_file  or die \"Can't open $down_file: $!\";\n    print $fh \"$_\\n\" for @data; \n    close $fh;\n    my $cmd = \"echo \\\"Services down: @data. See attached.\\\" | \" .\n        \"mailx -a $down_file -s \\\"Services down\\\" user\\@email\";\n    # Or, for an email with a single-line body\n    # my $cmd = \"echo @data | mailx -s \\\"Services down\\\"  user\\@email\";\n    system($cmd) == 0  or do {\n        warn \"Error with system($cmd): $!\";\n        warn \"File $down_file left behind for debugging. Remove.\";\n        return;\n    };\n    unlink $down_file  or warn \"Can't unlink $down_file $!\";\n    return 1;\n}   \n</code></pre>\n\n<p>Notes on email.  If <code>mailx</code> is used we cannot pipe newlines into it. So if email needs to have service-per-line we can write to a file and attach the file to the message.  That file is removed, change that if you wish to keep it. I tag its name with the PID (<code>$$</code>), but <em>note that this isn't enough</em>  -- if there are multiple such files written in the process only the last one remains. Better use the core <a href=\"http://perldoc.perl.org/File/Temp.html\" rel=\"nofollow noreferrer\">File::Temp</a> for temporary files. Or use the commented-out version, with the whole body being in one line. Then there is no reason to write the file. </p>\n\n<p>The error-checking on <code>system</code> will trigger only if there is a problem with running <code>$cmd</code>. If it runs fine but email itself fails (wrong address, for example), that likely won't be detected.  </p>\n\n<p>The alternative to all this is to use one of a number of modules for email.</p>\n\n<p>Note that <a href=\"http://perldoc.perl.org/List/Util.html\" rel=\"nofollow noreferrer\">List::Util</a> and <a href=\"http://search.cpan.org/~rehsack/List-MoreUtils-0.416/lib/List/MoreUtils.pm\" rel=\"nofollow noreferrer\">List::MoreUtils</a> have many useful routines, so the above can go as <code>if none { /.../ } @running;</code>. Here the improvement is subtle but often it is very direct.</p>\n\n<p>I don't know how this should be monitored but you can put it in a loop such as </p>\n\n<pre><code>for (1..$max_time_steps) {\n    # code above\n    sleep 1;\n}\n</code></pre>\n\n<p>Or you can have it inside of <code>while (1) { ... }</code> with a suitable condition for when to break out.</p>\n\n<hr>\n\n<p>A variation of this got asked as a new question, which got put on hold (right as I completed entering code and an explanation of why I decide to answer it there) and is gone by now. See the end for how it differed. Here is the answer to <em>that</em> question.  The difference is shown at the end.</p>\n\n<p>Use a hash for running processes returned by <code>process.sh -s</code>, where each process-name is a key with the value from the last column (PID/\"Down\"). The output of <code>process.sh</code> is fed into an array first in order to discard headers.</p>\n\n<pre><code>use warnings 'all';\nuse strict;\n\nmy @watch = qw(Orange-TE--02 Apple-TE--03 Orange-JI--01);\n\nmy @procs_info = `process.sh -s`;\nmy %running = map { (split)[1,2] } @procs_info[2..$#procs_info]; \n\nprint \"$_ =&gt; $running{$_}\\n\" for keys %running;  # just to see it\n\nmy @down;\nforeach my $proc_name (@watch) \n{\n    push @down, $proc_name  \n        if !exists $running{$proc_name} \n        or $running{$proc_name} eq 'Down';\n}\n\nif (@down) { \n    print \"$_ is down\\n\" for @down;\n    # send email\n}\n</code></pre>\n\n<p>I add to <code>@down</code> a watched process if it isn't even on the list of running ones.  Change if wrong.</p>\n\n<hr>\n\n<p>For the record, here is what is different in the other question (and how I tested)</p>\n\n<pre><code>my @procs_info = &lt;DATA&gt;;    # The only change to the above code\n\n# same code ...\n\n__DATA__\nname            Process                         Pid\n---------------- ------------------------------- ----\ntneal01        Orange-JI--06                     3443\ntneal01        Orange-TE--09                     Down\ntneal01        Orange-JI--01                     5533\ntneal01        Apple-TE--03                      Down\ntneal01        Orange-TE--02                     4992\n</code></pre>\n"}], "owner": {"reputation": 145, "user_id": 6292987, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/cf408d91ad5f6adb872fb56220c1b85b?s=128&d=identicon&r=PG&f=1", "display_name": "connollyc4", "link": "https://stackoverflow.com/users/6292987/connollyc4"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 231, "favorite_count": 1, "accepted_answer_id": 39260505, "answer_count": 2, "score": 1, "last_activity_date": 1564634754, "creation_date": 1472661897, "last_edit_date": 1564634754, "question_id": 39254959, "link": "https://stackoverflow.com/questions/39254959/how-to-monitor-a-list-of-process-names-and-send-email", "title": "How to monitor a list of process names and send email", "body": "<p>I am trying to figure out the best way to monitor a list of process id's within a shell script. I don't want to monitor them all, just a custom list. </p>\n\n<p>For example:\nIf I have process names::</p>\n\n<pre><code>Orange-TE--02\nOrange-TE--03\nApple-JI--01\nOrange-TE--09\nOrange-JI--06\n</code></pre>\n\n<p>I am trying to write a script that will only Monitor Orange-TE--02, Apple-JI--01, Orange-JI--06 so if any of them goes down an email alert would be sent with the name of which process went down. if Orange-TE--03, Orange-TE--09 goes down, nothing happens.</p>\n\n<p>Here is the output of the process'\nprocess.sh -s</p>\n\n<pre><code>name            Process                         Pid\n---------------- ------------------------------- ----\ntneal01        Orange-JI--06                     3443\ntneal01        Orange-TE--09                     2233\ntneal01        Orange-JI--01                     5533\ntneal01        Apple-TE--03                     9384\ntneal01        Orange-TE--02                     4992\n</code></pre>\n\n<p>I was thinking about outputting the results to a file and have a list of expected process name, the ones that don't match send an email saying</p>\n\n<pre><code>Alert Process:\nApple-TE--03 \nOrange-TE--02 \nAre down\n</code></pre>\n\n<p>Not really sure how to do that. Any help would be greatly appreciated.</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user557597"}, "edited": false, "score": 0, "creation_date": 1472657570, "post_id": 39253626, "comment_id": 65843154, "body": "It&#39;s because $hit is assigned the first capture variable, which matches everything. What are you trying to match ?"}, {"owner": {"reputation": 23234, "user_id": 4333555, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/i9zgM.jpg?s=128&g=1", "display_name": "chris85", "link": "https://stackoverflow.com/users/4333555/chris85"}, "edited": false, "score": 0, "creation_date": 1472657719, "post_id": 39253626, "comment_id": 65843259, "body": "Why not just search for the string you are looking for <code>TTATGCCCACACACACCCACTCACCCATT</code>? or is part of that string dynamic? You could do <code>.*(TTAT.*)</code>, if you want the last occurrence of <code>TTAT</code> then everything else."}, {"owner": {"user_type": "does_not_exist", "display_name": "user557597"}, "edited": false, "score": 3, "creation_date": 1472657801, "post_id": 39253626, "comment_id": 65843307, "body": "And the reason it matches everything is there is only one substring <code>CCATT</code> so greedy or not it matches everything."}], "answers": [{"tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": true, "score": 2, "last_activity_date": 1472657923, "last_edit_date": 1472657923, "creation_date": 1472657773, "answer_id": 39253728, "question_id": 39253626, "link": "https://stackoverflow.com/questions/39253626/perl-non-greedy-matching/39253728#39253728", "title": "Perl non-greedy matching", "body": "<p>Frugal (aka non-greedy or lazy) means \"shortest\", but still \"leftmost\". You need look-around assertions to find the other matches:</p>\n\n<pre><code> while ($seq =~ m/(?=(TTATG.*?CCATT))/g) {\n    say for $seq, $1;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user557597"}, "is_accepted": false, "score": 0, "last_activity_date": 1472659028, "last_edit_date": 1472659028, "creation_date": 1472658290, "answer_id": 39253903, "question_id": 39253626, "link": "https://stackoverflow.com/questions/39253626/perl-non-greedy-matching/39253903#39253903", "title": "Perl non-greedy matching", "body": "<p>To get to the inner <code>TTATG</code> there are a few ways.  </p>\n\n<p>One is <code>^.*(TTATG.+?CCATT)</code>, which goes to the end, will get the <em>last</em>.</p>\n\n<p>Another is <code>(TTATG(?:(?!TTATG).)*?CCATT)</code> which will find an un-nested pair.  </p>\n\n<p>In your case, both match the same thing.  </p>\n\n<p>(<em>If for any reason you think overlapping matches will actually help you here<br>\nI'd say it's probably the wrong assumption.</em>)</p>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 1, "last_activity_date": 1472665545, "last_edit_date": 1472665545, "creation_date": 1472665238, "answer_id": 39255846, "question_id": 39253626, "link": "https://stackoverflow.com/questions/39253626/perl-non-greedy-matching/39255846#39255846", "title": "Perl non-greedy matching", "body": "<p><code>.+?</code> matched <code>GCTTCTTATGCCCACACACACCCACTCACC</code> because <code>GCTTCTTATGCCCACACACACCCACTCACC</code> is the least <code>.+?</code> can match at position 5 (where <code>TTATG</code> left off) and still allow the rest of the pattern to match.</p>\n\n<hr>\n\n<p>You want one of the following, probably the last one:</p>\n\n<pre><code>/ ( TTATG (?:(?!TTATG).)* CCATT ) /xs\n/ ( TTATG (?:(?!CCATT).)* CCATT ) /xs\n/ ( TTATG (?:(?!TTATG|CCATT).)* CCATT ) /xs\n</code></pre>\n\n<p><code>(?:(?!STRING).)*</code> is to <code>[^CHAR]*</code> as <code>(?:STRING)</code> is to <code>CHAR</code>.</p>\n"}], "owner": {"reputation": 349, "user_id": 6533608, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/1baf1c473b65b87cdda29b98186c60be?s=128&d=identicon&r=PG&f=1", "display_name": "nak3c", "link": "https://stackoverflow.com/users/6533608/nak3c"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 351, "favorite_count": 0, "accepted_answer_id": 39253728, "answer_count": 3, "score": -3, "last_activity_date": 1523394359, "creation_date": 1472657409, "last_edit_date": 1523394359, "question_id": 39253626, "link": "https://stackoverflow.com/questions/39253626/perl-non-greedy-matching", "title": "Perl non-greedy matching", "body": "<p>Consider this non-greedy matching; given:</p>\n\n<pre><code>my $seq = \"TTATGCTTCTTATGCCCACACACACCCACTCACCCATT\";\n</code></pre>\n\n<p>I want to match <code>TTATGCCCACACACACCCACTCACCCATT</code> non-greedily.</p>\n\n<p>I tried the following:</p>\n\n<pre><code>($match) = $seq =~ m/(TTATG.*?CCATT)/;\n($match) = $seq =~ m/(TTATG(.*)?CCATT)/;\n($match) = $seq =~ m/(TTATG.+?CCATT)/;\n</code></pre>\n\n<p>But $match is always assigned to the entire string, i.e.</p>\n\n<pre><code>TTATGCTTCTTATGCCCACACACACCCACTCACCCATT\n</code></pre>\n\n<p>What am I missing?</p>\n"}, {"tags": ["perl", "logging", "timezone", "log4perl"], "answers": [{"tags": [], "owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "is_accepted": true, "score": 5, "last_activity_date": 1472739970, "last_edit_date": 1472739970, "creation_date": 1472658457, "answer_id": 39253958, "question_id": 39253229, "link": "https://stackoverflow.com/questions/39253229/how-can-i-log-the-timezone-with-loglog4perl/39253958#39253958", "title": "How can I log the timezone with Log::Log4perl?", "body": "<p>The date formats in <a href=\"https://metacpan.org/pod/Log::Log4perl::Layout::PatternLayout\" rel=\"nofollow\">Log::Log4perl::Layout::PatternLayout</a> are implemented by <a href=\"https://metacpan.org/pod/Log::Log4perl::DateFormat\" rel=\"nofollow\">Log::Log4perl::DateFormat\n</a>, which supports the <code>Z</code> specifier for timezone offset:</p>\n\n<pre><code>use strict;\nuse warnings 'all';\n\nuse Log::Log4perl;\n\nmy $conf = &lt;&lt;'CONF';\n    log4perl.logger.Foo = INFO, perllog\n\n    log4perl.appender.perllog          = Log::Log4perl::Appender::File\n    log4perl.appender.perllog.filename = foo.log\n    log4perl.appender.perllog.layout   = Log::Log4perl::Layout::PatternLayout\n    log4perl.appender.perllog.layout.ConversionPattern = \\\n        %d{yyyyMMdd.hhmmssZ:}-%P-%H-%p{2}-%m\nCONF\n\nLog::Log4perl::init(\\$conf);\n\nmy $logger = Log::Log4perl-&gt;get_logger('Foo');\n$logger-&gt;warn('Hello, timezone!');\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>20160831.094036-0600:-28223-www.example.com-WA-Hello, timezone!\n</code></pre>\n\n<p>This is not documented in Log::Log4perl::Layout::PatternLayout; generally it's a bad idea to use undocumented features, but in this case it looks like the author just forgot to update the docs in one module when features were added to another. I've submitted <a href=\"https://rt.cpan.org/Public/Bug/Display.html?id=117377\" rel=\"nofollow\">a ticket</a> to get the docs updated.</p>\n"}], "owner": {"reputation": 375, "user_id": 2536324, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/89f65b38c258b6500443c52f3c6c9a67?s=128&d=identicon&r=PG", "display_name": "Deepanshu Arora", "link": "https://stackoverflow.com/users/2536324/deepanshu-arora"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 210, "favorite_count": 2, "accepted_answer_id": 39253958, "answer_count": 1, "score": 3, "last_activity_date": 1472739970, "creation_date": 1472656173, "last_edit_date": 1472657278, "question_id": 39253229, "link": "https://stackoverflow.com/questions/39253229/how-can-i-log-the-timezone-with-loglog4perl", "title": "How can I log the timezone with Log::Log4perl?", "body": "<p>We use <a href=\"https://metacpan.org/pod/Log::Log4perl\" rel=\"nofollow\">Log::Log4perl</a> to log the current date like this:</p>\n\n<pre><code>log4perl.appender.perllog.layout.ConversionPattern=%d{yyyyMMdd.hhmmss:}-%P-%H-%p{2}-%m\n</code></pre>\n\n<p>Is there a way to log the timezone as well?</p>\n"}, {"tags": ["perl"], "answers": [{"comments": [{"owner": {"reputation": 125, "user_id": 4577205, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/a2a3d629d3c27d219184e5901e9e617c?s=128&d=identicon&r=PG&f=1", "display_name": "pupil", "link": "https://stackoverflow.com/users/4577205/pupil"}, "edited": false, "score": 0, "creation_date": 1472653787, "post_id": 39252294, "comment_id": 65840422, "body": "i tried the if ($path eq &#39;.&#39;) syntax and i get below error"}], "tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": false, "score": 0, "last_activity_date": 1472653498, "creation_date": 1472653498, "answer_id": 39252294, "question_id": 39252147, "link": "https://stackoverflow.com/questions/39252147/how-to-check-if-an-argument-has-both-filename-and-a-path-or-just-the-filename/39252294#39252294", "title": "How to check if an argument has both filename and a path or just the filename", "body": "<p>I'd say:</p>\n\n<pre><code>if ( -f $input ) { \n   #it's a file that exists, so the path is probably right\n}\n</code></pre>\n\n<p>Alternatively, you can just test if <code>$path eq '.'</code> instead? </p>\n"}, {"tags": [], "owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "is_accepted": false, "score": 1, "last_activity_date": 1472653509, "creation_date": 1472653509, "answer_id": 39252302, "question_id": 39252147, "link": "https://stackoverflow.com/questions/39252147/how-to-check-if-an-argument-has-both-filename-and-a-path-or-just-the-filename/39252302#39252302", "title": "How to check if an argument has both filename and a path or just the filename", "body": "<p>You can check if the file exists (and is a file) as sent in by the user. If not, prepend the file with your custom directory:</p>\n\n<pre><code>use warnings;\nuse strict;\n\nuse File::Basename qw(dirname basename);\n\nmy $input = &lt;STDIN&gt;;\nchomp $input;\n\nmy $file = basename($input);\nmy $path = dirname($input);\n\nmy $custom_dir = '/path/to';\n\nif (! -f $input){\n    print \"$custom_dir/$file\\n\";\n}\nelse {\n    print \"$input\\n\";\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": true, "score": 2, "last_activity_date": 1472653560, "creation_date": 1472653560, "answer_id": 39252318, "question_id": 39252147, "link": "https://stackoverflow.com/questions/39252147/how-to-check-if-an-argument-has-both-filename-and-a-path-or-just-the-filename/39252318#39252318", "title": "How to check if an argument has both filename and a path or just the filename", "body": "<p>You could just check if there's a <code>/</code> in the <code>$input</code>.</p>\n\n<pre><code>use File::Basename qw(dirname basename);\n\nmy $input = &lt;STDIN&gt;;\nmy ($file, $path);\n\nif ($input =~ m{/}) {\n    $file = basename($input);\n    $path = dirname($input);\n} else {\n    $path = '/foo/bar/';\n    $file = $input;\n}\n</code></pre>\n"}], "owner": {"reputation": 125, "user_id": 4577205, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/a2a3d629d3c27d219184e5901e9e617c?s=128&d=identicon&r=PG&f=1", "display_name": "pupil", "link": "https://stackoverflow.com/users/4577205/pupil"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 162, "favorite_count": 0, "accepted_answer_id": 39252318, "answer_count": 3, "score": 3, "last_activity_date": 1472653560, "creation_date": 1472653115, "question_id": 39252147, "link": "https://stackoverflow.com/questions/39252147/how-to-check-if-an-argument-has-both-filename-and-a-path-or-just-the-filename", "title": "How to check if an argument has both filename and a path or just the filename", "body": "<p>User input can be just a filename / filename with a path of where the file \nexists. These are the only 2 options to users.</p>\n\n<pre><code>use File::Basename qw(dirname basename);\n\nmy $input = &lt;STDIN&gt;;\nmy $file = basename($input);\nmy $path = dirname($input);\n</code></pre>\n\n<p>Whenever user gives just the file name, i am getting path as .(DOT - current directory). The file doesn't exist in that path. For me if the user doesn't provide the path it means i pick it from a specific directory.</p>\n\n<p>I am currently using a crude logic of checking the length of $path to see if a path is given or not.</p>\n\n<p>Is there any other way which i can use which tells if path is mentioned or not. Any inputs are really helpful.</p>\n"}, {"tags": ["perl", "concatenation"], "answers": [{"tags": [], "owner": {"reputation": 1945, "user_id": 5669174, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XGSyr.jpg?s=128&g=1", "display_name": "Mike", "link": "https://stackoverflow.com/users/5669174/mike"}, "is_accepted": false, "score": 0, "last_activity_date": 1472652704, "creation_date": 1472652704, "answer_id": 39252004, "question_id": 39251915, "link": "https://stackoverflow.com/questions/39251915/concatenate-with-non-variable-stuff-in-perl/39252004#39252004", "title": "Concatenate with non-variable stuff in perl", "body": "<pre><code>perl -le 'print join(\"\",map { (q(a)..q(z))[rand(26)] } 1..3) . \"123\"'\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 2003, "user_id": 213759, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/e1e0ceabcfbd199505d02ce1f9c50cf0?s=128&d=identicon&r=PG", "display_name": "Kirby", "link": "https://stackoverflow.com/users/213759/kirby"}, "edited": false, "score": 0, "creation_date": 1472652835, "post_id": 39252017, "comment_id": 65839688, "body": "So, it&#39;s not a concatenation. It just uses comma for output."}, {"owner": {"reputation": 82895, "user_id": 372239, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/2twLb.jpg?s=128&g=1", "display_name": "Toto", "link": "https://stackoverflow.com/users/372239/toto"}, "reply_to_user": {"reputation": 2003, "user_id": 213759, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/e1e0ceabcfbd199505d02ce1f9c50cf0?s=128&d=identicon&r=PG", "display_name": "Kirby", "link": "https://stackoverflow.com/users/213759/kirby"}, "edited": false, "score": 0, "creation_date": 1472653004, "post_id": 39252017, "comment_id": 65839812, "body": "@Kirby: Yes. You can&#39;t concatenate an array with a string, the array is evaluated in strig context, so it gives the length of the array."}, {"owner": {"reputation": 2003, "user_id": 213759, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/e1e0ceabcfbd199505d02ce1f9c50cf0?s=128&d=identicon&r=PG", "display_name": "Kirby", "link": "https://stackoverflow.com/users/213759/kirby"}, "edited": false, "score": 0, "creation_date": 1472653091, "post_id": 39252017, "comment_id": 65839874, "body": "got it. I didn&#39;t know the result of <code>map</code> is an array. Thanks for clarification."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1472654560, "post_id": 39252017, "comment_id": 65841042, "body": "The result of <code>map</code> is <b>not</b> an array. In list context, the return value from <code>map</code> is a list. In scalar context, it is the number of elements in that list. Lists are not arrays."}], "tags": [], "owner": {"reputation": 82895, "user_id": 372239, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/2twLb.jpg?s=128&g=1", "display_name": "Toto", "link": "https://stackoverflow.com/users/372239/toto"}, "is_accepted": false, "score": 0, "last_activity_date": 1472652732, "creation_date": 1472652732, "answer_id": 39252017, "question_id": 39251915, "link": "https://stackoverflow.com/questions/39251915/concatenate-with-non-variable-stuff-in-perl/39252017#39252017", "title": "Concatenate with non-variable stuff in perl", "body": "<p>Enclose the whole line to be printed inside parenthesis and use a comma as separator:</p>\n\n<pre><code>perl -le 'print ( (map { (q(a)..q(z))[rand(26)] } 1..3) , \"123\")'\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 3, "last_activity_date": 1472655547, "last_edit_date": 1472655547, "creation_date": 1472654833, "answer_id": 39252773, "question_id": 39251915, "link": "https://stackoverflow.com/questions/39251915/concatenate-with-non-variable-stuff-in-perl/39252773#39252773", "title": "Concatenate with non-variable stuff in perl", "body": "<p>With warnings:</p>\n\n<pre><code>print (...) interpreted as function at -e line 1.\nUseless use of concatenation (.) or string in void context at -e line 1.\n</code></pre>\n\n<p>This is because your code is of the following form:</p>\n\n<pre><code>print(...) . \"123\"\n</code></pre>\n\n<p>Solutions:</p>\n\n<pre><code>perl -le'print( map( { (q(a)..q(z))[rand(26)] } 1..3 ) . \"123\" )'   # Fully parenthesized\nperl -le'print map( { (q(a)..q(z))[rand(26)] } 1..3 ) . \"123\"'      # Opt parens dropped\nperl -le'print( ( map { (q(a)..q(z))[rand(26)] } 1..3 ) . \"123\" )'\nperl -le'print +( map { (q(a)..q(z))[rand(26)] } 1..3 ) . \"123\"'    # \"Disambiguated\"\n</code></pre>\n\n<p>Except those aren't right either. While they fix the problem you asked about, they reveal a second problem. They invariably print <code>3123</code> because <code>map</code> in scalar context returns the number of scalars it would otherwise return in list context.</p>\n\n<p>Solutions:</p>\n\n<pre><code>perl -le'print( map( { (q(a)..q(z))[rand(26)] } 1..3 ), \"123\" )'         # . =&gt; ,\nperl -le'print map( { (q(a)..q(z))[rand(26)] } 1..3 ), \"123\"'            # . =&gt; ,\nperl -le'print( ( map { (q(a)..q(z))[rand(26)] } 1..3 ), \"123\" )'        # . =&gt; ,\nperl -le'print +( map { (q(a)..q(z))[rand(26)] } 1..3 ), \"123\"'          # . =&gt; ,\nperl -le'print join \"\", ( map { (q(a)..q(z))[rand(26)] } 1..3 ), \"123\"'  # join\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 2, "last_activity_date": 1472655155, "creation_date": 1472655155, "answer_id": 39252888, "question_id": 39251915, "link": "https://stackoverflow.com/questions/39251915/concatenate-with-non-variable-stuff-in-perl/39252888#39252888", "title": "Concatenate with non-variable stuff in perl", "body": "<p>There are a couple of interesting things going on here. First let's ask Perl to help up track down any problems by turning on warnings.</p>\n\n<pre><code>$ perl -Mwarnings -le 'print (map { (q(a)..q(z))[rand(26)] } 1..3) . \"123\"'\nprint (...) interpreted as function at -e line 1.\nUseless use of concatenation (.) or string in void context at -e line 1.\nlfy\n</code></pre>\n\n<p>Two warnings there. Let's look at both of them.</p>\n\n<blockquote>\n  <p>print (...) interpreted as function</p>\n</blockquote>\n\n<p>If the first non-whitespace character following <code>print</code> (or any other list operator) is a opening parenthesis, then Perl assumes that you want to call <code>print</code> as a function and it will look for the balancing closing parenthesis to end the list of arguments to <code>print</code>.</p>\n\n<blockquote>\n  <p>Useless use of concatenation (.) or string in void context</p>\n</blockquote>\n\n<p>Because the <code>print</code> call is assumed to end with the closing parenthesis, the <code>. \"123\"</code> isn't doing anything useful. And is therefore ignored.</p>\n\n<p>The standard way to tell Perl that an opening parenthesis isn't marking a function call is to use a <code>+</code>.</p>\n\n<pre><code>$ perl -Mwarnings -le 'print +(map { (q(a)..q(z))[rand(26)] } 1..3) . \"123\"'\n3123\n</code></pre>\n\n<p>Well, we lost the warnings. But we got '3' where we were hoping to see three symbols. What we have here now is basically this:</p>\n\n<pre><code>print +(map ...) . \"123\";\n</code></pre>\n\n<p>Because of the concatenation, <code>map</code> is being called in scalar context. And in scalar context, <code>map</code> no longer returns a list of values, but the size of that list (an integer - 3 in this case).</p>\n\n<p>The fix for that is to replace the <code>.</code> with a comma, so <code>map</code> is called in list context.</p>\n\n<pre><code>$ perl -Mwarnings -le 'print +(map { (q(a)..q(z))[rand(26)] } 1..3), \"123\"'\nntg123\n</code></pre>\n\n<p>So you were being burnt by a) the parentheses not doing what you wanted them to do and b) <code>map</code> being called in scalar context.</p>\n"}], "owner": {"reputation": 2003, "user_id": 213759, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/e1e0ceabcfbd199505d02ce1f9c50cf0?s=128&d=identicon&r=PG", "display_name": "Kirby", "link": "https://stackoverflow.com/users/213759/kirby"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 59, "favorite_count": 0, "answer_count": 4, "score": 1, "last_activity_date": 1472655547, "creation_date": 1472652483, "last_edit_date": 1472652710, "question_id": 39251915, "link": "https://stackoverflow.com/questions/39251915/concatenate-with-non-variable-stuff-in-perl", "title": "Concatenate with non-variable stuff in perl", "body": "<p>I need to concate <code>map</code> result with a string.</p>\n\n<pre><code>perl -le 'print (map { (q(a)..q(z))[rand(26)] } 1..3) . \"123\"'\n</code></pre>\n\n<p>Expected 3 random symbols and <code>123</code>. But there is no <code>123</code> just 3 random symbols.\nIn general, I need to add a variable there.</p>\n"}, {"tags": ["perl", "websocket"], "comments": [{"owner": {"reputation": 936, "user_id": 2066126, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/224ed6420ee88dea389bb21ca1cfa0aa?s=128&d=identicon&r=PG", "display_name": "TheAmigo", "link": "https://stackoverflow.com/users/2066126/theamigo"}, "edited": false, "score": 0, "creation_date": 1472672222, "post_id": 39251557, "comment_id": 65851351, "body": "If it receives a pause command, how will it read the socket to see a resume command?"}, {"owner": {"reputation": 809, "user_id": 1151718, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/eb6505c0711f36325e0d1d68d73b4f82?s=128&d=identicon&r=PG", "display_name": "capfan", "link": "https://stackoverflow.com/users/1151718/capfan"}, "edited": false, "score": 0, "creation_date": 1472681108, "post_id": 39251557, "comment_id": 65855404, "body": "Pausing could mean to stop working on a task and listen for a resume command."}, {"owner": {"reputation": 147, "user_id": 1958295, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/dce738831c2712369e3ce16cab9a26b6?s=128&d=identicon&r=PG", "display_name": "Mojo", "link": "https://stackoverflow.com/users/1958295/mojo"}, "reply_to_user": {"reputation": 809, "user_id": 1151718, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/eb6505c0711f36325e0d1d68d73b4f82?s=128&d=identicon&r=PG", "display_name": "capfan", "link": "https://stackoverflow.com/users/1151718/capfan"}, "edited": false, "score": 0, "creation_date": 1472714702, "post_id": 39251557, "comment_id": 65865304, "body": "@capfan that&#39;s great solution , do you think of a way of doing it ?"}, {"owner": {"reputation": 809, "user_id": 1151718, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/eb6505c0711f36325e0d1d68d73b4f82?s=128&d=identicon&r=PG", "display_name": "capfan", "link": "https://stackoverflow.com/users/1151718/capfan"}, "edited": false, "score": 0, "creation_date": 1472751467, "post_id": 39251557, "comment_id": 65890086, "body": "@Mojo I&#39;m not familiar with IO::Async or AnyEvent::Handle. But I did work with POE or Windows threads in the past. This page helped me to understand how to change my code to allow to listen to a resume command: <a href=\"http://poe.perl.org/?POE_Cookbook/Looping\" rel=\"nofollow noreferrer\">poe.perl.org/?POE_Cookbook/Looping</a> It basically says that you should break up your loops. Not sure, if this is a solution to your issue. On the level of the operating system, I think it&#39;s also possible to pause a running process and let it continue afterwards. However, I did not try to do such a thing yet."}], "answers": [{"tags": [], "owner": {"reputation": 936, "user_id": 2066126, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/224ed6420ee88dea389bb21ca1cfa0aa?s=128&d=identicon&r=PG", "display_name": "TheAmigo", "link": "https://stackoverflow.com/users/2066126/theamigo"}, "is_accepted": false, "score": 0, "last_activity_date": 1472672313, "creation_date": 1472672313, "answer_id": 39257710, "question_id": 39251557, "link": "https://stackoverflow.com/questions/39251557/open-async-socket-in-perl-that-can-somehow-pause-and-resume-perl-script/39257710#39257710", "title": "open async socket in perl that can somehow pause and resume perl script", "body": "<p>Consider using <a href=\"http://search.cpan.org/~mlehmann/AnyEvent-7.12/lib/AnyEvent/Handle.pm\" rel=\"nofollow\">AnyEvent::Handle</a> for async reads.</p>\n"}], "owner": {"reputation": 147, "user_id": 1958295, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/dce738831c2712369e3ce16cab9a26b6?s=128&d=identicon&r=PG", "display_name": "Mojo", "link": "https://stackoverflow.com/users/1958295/mojo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 60, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1472672313, "creation_date": 1472651496, "question_id": 39251557, "link": "https://stackoverflow.com/questions/39251557/open-async-socket-in-perl-that-can-somehow-pause-and-resume-perl-script", "title": "open async socket in perl that can somehow pause and resume perl script", "body": "<p>I have perl script that I want to open a socket in it  , so I can send some kind of message through it to the perl script so the perl script will pause / resume per request.\nI tried using the IO::Async module from CPAN , but the installation keeps failing for me.\nanyone has other suggestions ? </p>\n\n<p>thanks.</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 60461, "user_id": 3636601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/69a1b4f750ece89db0e49c94519f1a7d?s=128&d=identicon&r=PG&f=1", "display_name": "Jens", "link": "https://stackoverflow.com/users/3636601/jens"}, "edited": false, "score": 4, "creation_date": 1472646117, "post_id": 39249469, "comment_id": 65834713, "body": "Where do you stuck?"}], "answers": [{"tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 6, "last_activity_date": 1472648899, "last_edit_date": 1472648899, "creation_date": 1472647696, "answer_id": 39250117, "question_id": 39249469, "link": "https://stackoverflow.com/questions/39249469/an-arithmetic-calculation-on-each-number-in-a-txt-file-by-perl/39250117#39250117", "title": "an arithmetic calculation on each number in a txt file by perl", "body": "<p>Hard-coding a filename is almost always a bad idea. If you read from <code>&lt;&gt;</code> then you can pass any filename on the command line. Also, it's more Perlish to read data into <code>$_</code>.</p>\n\n<pre><code>while (&lt;&gt;) {\n  # do stuff with $_\n}\n</code></pre>\n\n<p>So what do we want to do? Well first let's split the data into individual columns and store them in an array.</p>\n\n<pre><code>my @numbers = split;\n</code></pre>\n\n<p>Notice that <code>split()</code> works on <code>$_</code> and splits on whitespace by default.</p>\n\n<p>Now we need to do your calculation. We can do it on all elements of <code>@numbers</code> using <code>map()</code>.</p>\n\n<pre><code>my @new_numbers = map { $_ * 100 / 16 } @numbers;\n</code></pre>\n\n<p>And finally we want to print our results. That's as simple as:</p>\n\n<pre><code>print \"@new_numbers\\n\";\n</code></pre>\n"}], "owner": {"reputation": 9, "user_id": 6609306, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3d081746b9f9954429faf729a1b042cf?s=128&d=identicon&r=PG&f=1", "display_name": "C. Tyagi", "link": "https://stackoverflow.com/users/6609306/c-tyagi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 61, "favorite_count": 0, "answer_count": 1, "score": -5, "last_activity_date": 1472648899, "creation_date": 1472645955, "last_edit_date": 1472646135, "question_id": 39249469, "link": "https://stackoverflow.com/questions/39249469/an-arithmetic-calculation-on-each-number-in-a-txt-file-by-perl", "title": "an arithmetic calculation on each number in a txt file by perl", "body": "<p>I am very new to programming. I need to read a file line-by-line in perl. The text file has two columns and 100,000 rows all having numbers. I need to apply this formula (/16)*100 on each number and the result should be a separate file again with 2 columns and 100000 rows. </p>\n\n<pre><code>use strict;\nuse warnings;\n\nmy $filename = 'results_AH.txt';\nopen(my $fh, '&lt;:encoding(UTF-8)', $filename)\n  or die \"Could not open file '$filename' $!\";\n\nwhile (my $row = &lt;$fh&gt;) {\n  chomp $row;\n  print \"$row\\n\";\n}\nprint \"done\\n\";\n</code></pre>\n\n<p>This is what I have. The file looks like (just a part). The calculation is to be done on both columns and each number.Please help :) </p>\n\n<pre><code>AH LHH\n5   0\n4   0\n3   0\n5   0\n5   0\n4   0\n3   0\n4   0\n4   0\n4   0\n5   0\n5   0\n3   0\n4   0\n</code></pre>\n"}, {"tags": ["perl", "variables"], "comments": [{"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1472637188, "post_id": 39246261, "comment_id": 65828499, "body": "Your code has too many close brackets. What are you trying to write to this file? Can you give some examples?"}, {"owner": {"reputation": 3703, "user_id": 2127296, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/kjm9H.png?s=128&g=1", "display_name": "Iv&#225;n Rodr&#237;guez Torres", "link": "https://stackoverflow.com/users/2127296/iv%c3%a1n-rodr%c3%adguez-torres"}, "edited": false, "score": 0, "creation_date": 1472637383, "post_id": 39246261, "comment_id": 65828632, "body": "any errors on the output?"}, {"owner": {"reputation": 2415, "user_id": 4251338, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UNbCO.png?s=128&g=1", "display_name": "ssr1012", "link": "https://stackoverflow.com/users/4251338/ssr1012"}, "edited": false, "score": 0, "creation_date": 1472637393, "post_id": 39246261, "comment_id": 65828637, "body": "&gt;<code>unless ($_ = ~&#47;^#&#47;) {</code> instead <code>unless ($_ = ~&#47;^\\#&#47;) { </code> and why you are using this line <code>$_ = $line;</code>"}, {"owner": {"reputation": 11, "user_id": 6778092, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/049b75209e13c752b664885f6fb71691?s=128&d=identicon&r=PG&f=1", "display_name": "Bravofox", "link": "https://stackoverflow.com/users/6778092/bravofox"}, "edited": false, "score": 0, "creation_date": 1472637872, "post_id": 39246261, "comment_id": 65828971, "body": "Right, there was one closing bracket to remove."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1472639974, "post_id": 39246261, "comment_id": 65830496, "body": "You should take care to <i>indent</i> your code properly. Even if you enjoy the challenge of counting brace characters to see of you have put a statement in the correct block, it is only polite to make your code readable if you are asking for help with it from others. I have tidied it for you in this instance (and removed the brace that I think was superfluous) but please pay attention to this in the future."}], "answers": [{"tags": [], "owner": {"reputation": 2415, "user_id": 4251338, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UNbCO.png?s=128&g=1", "display_name": "ssr1012", "link": "https://stackoverflow.com/users/4251338/ssr1012"}, "is_accepted": false, "score": 0, "last_activity_date": 1472637891, "creation_date": 1472637891, "answer_id": 39246601, "question_id": 39246261, "link": "https://stackoverflow.com/questions/39246261/perl-write-variables-to-a-file/39246601#39246601", "title": "perl write variables to a file", "body": "<p>You need to append the text into the creating new file <code>mongoData.txt</code></p>\n\n<pre><code>while ($line=&lt;$FILE&gt;)\n{\n    chomp ($line);\n    my ($KEY, $VALUE) = split /\\:/,$line;\n\n    # Ignoring commented lines\n    $_ = $line;\n    unless ($_ = ~/^#/)\n    {\n    open my $FILE2, \"&gt;&gt;\", \"/home/sierra/Documents/mongoData.txt\" or die \"Cannot create file $!\\n\";\n    print $FILE2 \"$KEY\",\"$VALUE\\n\";\n    }\n}\nclose($FILE2);\n</code></pre>\n\n<blockquote>\n  <p>or else</p>\n</blockquote>\n\n<p>Create the text file once before your nesting the while loop</p>\n\n<pre><code>open my $FILE2, \"&gt;\", \"/home/sierra/Documents/mongoData.txt\"\n        or die \"Cannot create file $!\\n\";\n\n\nwhile ($line=&lt;$FILE&gt;)\n{\n    chomp ($line);\n    my ($KEY, $VALUE) = split /\\:/,$line;\n\n    # Ignoring commented lines\n    $_ = $line;\n    unless ($_ = ~/^#/)\n    {\n        print $FILE2 \"$KEY\",\"$VALUE\\n\";\n    }\n}\nclose($FILE2);\n</code></pre>\n\n<p>May be this will help you.</p>\n"}, {"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 4, "last_activity_date": 1472639762, "creation_date": 1472639762, "answer_id": 39247287, "question_id": 39246261, "link": "https://stackoverflow.com/questions/39246261/perl-write-variables-to-a-file/39247287#39247287", "title": "perl write variables to a file", "body": "<p>Every time you open a file for output, you create a new file and delete any pre-existing file with the same name. That means you're going to be left with only the <em>last</em> line you wrote to the file</p>\n\n<p>Here are some more pointers</p>\n\n<ul>\n<li><p>Variable identifiers should in general be all in digits, lower case letters, and underscores. Capital letters are reserved for global identifiers such as package names</p></li>\n<li><p>If you are running a version of Perl later than v5.14 then you can <code>use autodie</code> which checks all IO operations for you and removes the need to test the return status by hand</p></li>\n<li><p>If you use a <code>die</code> string that has no newline at the end, then Perl will add information about the source file name and line number where it occurred, which can be useful for debugging</p></li>\n<li><p>It is unnecessary to name your loop control variables. Programs can be made much more concise and readable by using Perl's pronoun variable <code>$_</code> which is the default for many built-in operators</p></li>\n<li><p>It is wasteful to reconnect to your database every time you need to make changes. You should connect <em>once</em> at the top of your program and use that static connection throughout your code</p></li>\n<li><p>You should use <em>placeholders</em> when passing parameter expressions to an SQL operation. It can be dangerous, and that way <code>DBI</code> will quote them correctly for you</p></li>\n<li><p>There is no need to close input files explicitly. Everything will be closed automatically at the end of the program. But if you are worried about the integrity of your output data, you may want to do an explicit <code>close</code> on output file handles so that you can check that they succeeded</p></li>\n</ul>\n\n<p>Here's what I would write. Rather than testing whether each line of the input begins with a hash, it removes everything from the first hash character onwards and then checks to see if there are any non-blank characters in what remains. That allows for trailing comments in the data</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings 'all';\nuse autodie;\n\nuse DBI;\n\nmy ($input, $output, $dsn) = qw{\n    /etc/mongod.conf\n    /home/sierra/Documents/mongoData.txt\n    dbi:mysql:dbname=mongodconf;host=localhost;\n};\n\nopen my $fh,     '&lt;', $input;\nopen my $out_fh, '&gt;', $output;\n\nmy $dbh = DBI-&gt;connect($dsn, qw/ root sqladmin /)\n        or die \"Can't connect to MySQL: $DBI::errstr\";\n\nwhile ( &lt;$fh&gt; ) {\n\n    chomp;\n    s/#.*//;\n    next unless /\\S/;\n\n    my ( $key, $val ) = split /\\:/;\n\n    print $out_fh \"$key $val\\n\";\n\n    $dbh-&gt;do('insert into data values (?, ?)', $key, $val);\n}\n\nclose $out_fh or die $!;\n$dbh-&gt;disconnect or warn $dbh-&gt;errstr;\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 6778092, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/049b75209e13c752b664885f6fb71691?s=128&d=identicon&r=PG&f=1", "display_name": "Bravofox", "link": "https://stackoverflow.com/users/6778092/bravofox"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 354, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1472639762, "creation_date": 1472636980, "last_edit_date": 1472638456, "question_id": 39246261, "link": "https://stackoverflow.com/questions/39246261/perl-write-variables-to-a-file", "title": "perl write variables to a file", "body": "<p>Here's my code to parse a configuration file, write the retrieved data to another file and send it to a MySQL database.</p>\n\n<p>The database connection and writing data to a table works fine, however I can't get it to write data to the mentioned file <code>mongoData.txt</code>.</p>\n\n<p>I'm quite new to Perl, so any help will be highly appreciated.</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\n\nuse DBI;\n\nmy $line;\n\n# Retrieving data\nopen( my $FILE, \"&lt;\", \"/etc/mongod.conf\" )\n        or die \"Cannot find file! : $!\\n\";\n\nwhile ( $line = &lt;$FILE&gt; ) {\n\n    chomp($line);\n\n    my ( $KEY, $VALUE ) = split /\\:/, $line;\n\n    # Ignoring commented lines\n    $_ = $line;\n\n    unless ( $_ = ~/^#/ ) {\n\n        # Write to file\n        open my $FILE2, \"&gt;\", \"/home/sierra/Documents/mongoData.txt\"\n                or die \"Cannot create file $!\\n\";\n\n        print $FILE2 \"$KEY\", \"$VALUE\\n\";\n\n    }\n\n    # Connection to SQL database\n    my $db = DBI-&gt;connect(( \"dbi:mysql:dbname=mongodconf;\nhost = localhost;\", \"root\", \"sqladmin\"\n    )) or die \"can't connect to mysql\";\n\n    # Inserting into database\n    $db-&gt;do(\"insert into data values ('$KEY', '$VALUE')\")\n            or die \"query error\\n\";\n}\n\nclose($FILE);\n</code></pre>\n"}, {"tags": ["multithreading", "perl"], "comments": [{"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 3, "creation_date": 1472637392, "post_id": 39245156, "comment_id": 65828636, "body": "This feels an awful lot like an <a href=\"http://meta.stackexchange.com/questions/66377/what-is-the-xy-problem\"><code>XY problem</code></a>. Why do you want to &#39;top up&#39; the queue? The whole point of a queue is it&#39;s a batch of work to be completed - you queue it up, and leave it to run. But you can always use <code>$DataQueue -&gt; pending</code> to see how many items are in there."}, {"owner": {"reputation": 27241, "user_id": 363028, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/cP1F2.jpg?s=128&g=1", "display_name": "Ole Tange", "link": "https://stackoverflow.com/users/363028/ole-tange"}, "reply_to_user": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1472649341, "post_id": 39245156, "comment_id": 65837100, "body": "The problem is that I want to prespawn processes. What will be passed around is handles for the processes. The spawning takes forever to warm up if done in the same thread. I am perfectly OK with not using a queue, which is why I ask if there is a more elegant way of doing it (e.g. without a queue)."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 1, "creation_date": 1472650225, "post_id": 39245156, "comment_id": 65837723, "body": "Well, maybe it&#39;s just me, but I&#39;m still not following what you&#39;re trying to do. There&#39;s no real reason you can&#39;t just start a thread to do your &#39;pre spawned&#39; process, and just use a Semaphore or similar to indicate readiness. But really - a queue that&#39;s full of stuff, waiting for the &#39;spawn&#39; to finish starting up, is ... just something that&#39;s waiting to go as soon as it&#39;s ready."}, {"owner": {"reputation": 27241, "user_id": 363028, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/cP1F2.jpg?s=128&g=1", "display_name": "Ole Tange", "link": "https://stackoverflow.com/users/363028/ole-tange"}, "reply_to_user": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1472650257, "post_id": 39245156, "comment_id": 65837744, "body": "Ha: I can probably just use $DataQueue-&gt;limit = 2*$no_of_threads - assuming that this will block an enqueue() statement."}], "answers": [{"tags": [], "owner": {"reputation": 27241, "user_id": 363028, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/cP1F2.jpg?s=128&g=1", "display_name": "Ole Tange", "link": "https://stackoverflow.com/users/363028/ole-tange"}, "is_accepted": false, "score": 1, "last_activity_date": 1472650649, "creation_date": 1472650649, "answer_id": 39251213, "question_id": 39245156, "link": "https://stackoverflow.com/questions/39245156/perl-threads-how-to-make-a-producer/39251213#39251213", "title": "Perl threads: How to make a producer?", "body": "<p>Something like this will probably work:</p>\n\n<pre><code>my $DataQueue = Thread::Queue-&gt;new();\n\nmy @producers;\nmy $no_of_threads = 10;\nfor (1..$no_of_threads) {\n  push @producers, threads-&gt;create(\\&amp;producer);\n}\n$DataQueue-&gt;limit = 2 * $no_of_threads;\n\nfor(&lt;&gt;) {\n  # This blocks until $DataQueue-&gt;pending &gt; 0\n  my $val = $DataQueue-&gt;dequeue();\n  do_something($_,$val);\n}\n# We are done: The producers are no longer needed\nkill @producers;\n\nsub producer {\n   while(1) {\n      # enqueue will block until $DataQueue-&gt;pending &lt; $DataQueue-&gt;limit\n      $DataQueue-&gt;enqueue(compute_slow_value());\n   }\n}\n</code></pre>\n"}], "owner": {"reputation": 27241, "user_id": 363028, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/cP1F2.jpg?s=128&g=1", "display_name": "Ole Tange", "link": "https://stackoverflow.com/users/363028/ole-tange"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 213, "favorite_count": 0, "answer_count": 1, "score": 9, "last_activity_date": 1472650649, "creation_date": 1472634050, "last_edit_date": 1472636097, "question_id": 39245156, "link": "https://stackoverflow.com/questions/39245156/perl-threads-how-to-make-a-producer", "title": "Perl threads: How to make a producer?", "body": "<p>I have a function that is very slow to run. I need input from that function in the main part of the program. So I would like to do something similar to the UNIX command <code>yes</code>, that produces as much input as is read, but only a little more than is needed. Unlike <code>yes</code> I do not want the values from STDIN but I want the values in a Perl queue.</p>\n\n<p>In other words: This problem is not about selecting on file-handles, but on queues maintained by threads.</p>\n\n<p>I imagine the meta code will look similar to this:</p>\n\n<pre><code>my $DataQueue = Thread::Queue-&gt;new();\n\nmy @producers;\nmy $no_of_threads = 10;\nfor (1..$no_of_threads) {\n  push @producers, threads-&gt;create(\\&amp;producer);\n}\n\nfor(&lt;&gt;) {\n  # This should block until there is a value to dequeue\n  # Maybe dequeue blocks by default - then this part is not a problem\n  my $val = $DataQueue-&gt;dequeue();\n  do_something($_,$val);\n}\n# We are done: The producers are no longer needed\nkill @producers;\n\nsub producer {\n   while(1) {\n      # How do I wait until the queue length is smaller than number of threads?\n      wait_until(length of $DataQueue &lt; $no_of_threads);\n      $DataQueue-&gt;enqueue(compute_slow_value());\n   }\n}\n</code></pre>\n\n<p>But is there a more elegant way of doing this? I am especially unsure of how to do the <code>wait_until</code> part in an efficient way.</p>\n"}, {"tags": ["perl", "fork", "dbi"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 2, "creation_date": 1472631876, "post_id": 39244223, "comment_id": 65824871, "body": "I can reproduce that this works on 5.20 and Ubuntu."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1472632745, "post_id": 39244223, "comment_id": 65825397, "body": "Looks like it&#39;s not calling <code>disconnect</code> implicitly at the <code>exit</code> neither in the child nor the parent with the sqlite that I am trying. If you do <code>$dbConn-&gt;disconnect</code> in the child, it will complain."}, {"owner": {"reputation": 37, "user_id": 2923324, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/5628cd0c42de8d13817d6cf64d6954d3?s=128&d=identicon&r=PG&f=1", "display_name": "R6D1H2", "link": "https://stackoverflow.com/users/2923324/r6d1h2"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1472633873, "post_id": 39244223, "comment_id": 65826184, "body": "@simbabque I wonder why that doesn&#39;t happen. If you try to use dbConn after the loop it says &quot;connection has gone away&quot; which makes sense but if that happened it should complain mid loop iteration as well. Do you know if there&#39;s any danger in using it like that?"}], "answers": [{"comments": [{"owner": {"reputation": 37, "user_id": 2923324, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/5628cd0c42de8d13817d6cf64d6954d3?s=128&d=identicon&r=PG&f=1", "display_name": "R6D1H2", "link": "https://stackoverflow.com/users/2923324/r6d1h2"}, "edited": false, "score": 0, "creation_date": 1472635354, "post_id": 39245155, "comment_id": 65827119, "body": "Ok that makes sense thanks. However regarding your update: Why would the loop continue after the statement handle is being closed on exit of the child which finished first?"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 37, "user_id": 2923324, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/5628cd0c42de8d13817d6cf64d6954d3?s=128&d=identicon&r=PG&f=1", "display_name": "R6D1H2", "link": "https://stackoverflow.com/users/2923324/r6d1h2"}, "edited": false, "score": 0, "creation_date": 1472635702, "post_id": 39245155, "comment_id": 65827392, "body": "@R6D1H2: I don&#39;t know. Have you checked whether the full set of rows is processed? Is there more than one row in your selection? Or it may be that the <code>fetchrow_array</code> call just silently fails after the first child has exited, which will happen if <code>DESTROY</code> just calls <code>finish</code> on the statement handles. You should check <code>$sth-&gt;{Active}</code> to see the state of the handle."}, {"owner": {"reputation": 37, "user_id": 2923324, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/5628cd0c42de8d13817d6cf64d6954d3?s=128&d=identicon&r=PG&f=1", "display_name": "R6D1H2", "link": "https://stackoverflow.com/users/2923324/r6d1h2"}, "edited": false, "score": 0, "creation_date": 1472636024, "post_id": 39245155, "comment_id": 65827659, "body": "yes the full set of rows is processed. As mentioned in the post I even made sure that processes exit before the loop is done to test exactly this case."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 37, "user_id": 2923324, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/5628cd0c42de8d13817d6cf64d6954d3?s=128&d=identicon&r=PG&f=1", "display_name": "R6D1H2", "link": "https://stackoverflow.com/users/2923324/r6d1h2"}, "edited": false, "score": 0, "creation_date": 1472636291, "post_id": 39245155, "comment_id": 65827860, "body": "@R6D1H2: Okay, then I&#39;m guessing that the driver caches the entire <code>select</code> result and simply has to pass it back in chunks when a <code>fetchrow</code> is called. That would work even if the handle has been disconnected. I can&#39;t say much more without knowing what driver we&#39;re dealing with here and reading how it&#39;s coded."}, {"owner": {"reputation": 37, "user_id": 2923324, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/5628cd0c42de8d13817d6cf64d6954d3?s=128&d=identicon&r=PG&f=1", "display_name": "R6D1H2", "link": "https://stackoverflow.com/users/2923324/r6d1h2"}, "edited": false, "score": 0, "creation_date": 1472637089, "post_id": 39245155, "comment_id": 65828426, "body": "Mysql. That was what I suspected as well but I wanted to ask the question because I wasn&#39;t sure about the safety of using this method (since I get errors with my first piece of code which it should cache as well?)."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 37, "user_id": 2923324, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/5628cd0c42de8d13817d6cf64d6954d3?s=128&d=identicon&r=PG&f=1", "display_name": "R6D1H2", "link": "https://stackoverflow.com/users/2923324/r6d1h2"}, "edited": false, "score": 1, "creation_date": 1472637412, "post_id": 39245155, "comment_id": 65828648, "body": "@R6D1H2: You shouldn&#39;t use this method. It is undocumented and unreliable. You should set <code>$dbConn-&gt;{AutoInactiveDestroy} = 1</code> when you make the connection. That way only the process that created a handle will automatically destroy it, and your handles will stay intact and useable after the <code>while</code> loop."}, {"owner": {"reputation": 37, "user_id": 2923324, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/5628cd0c42de8d13817d6cf64d6954d3?s=128&d=identicon&r=PG&f=1", "display_name": "R6D1H2", "link": "https://stackoverflow.com/users/2923324/r6d1h2"}, "edited": false, "score": 0, "creation_date": 1472654626, "post_id": 39245155, "comment_id": 65841090, "body": "I tested it the way I wrote it in my post and was very surprised that it worked, that&#39;s why I asked. I was going to use refs from fetchall_arayref in the real script. The DBI version is too old to support AutoInactiveDestroy but I&#39;ll use InactiveDestroy. Thanks!"}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": true, "score": 2, "last_activity_date": 1472634950, "last_edit_date": 1592644375, "creation_date": 1472634048, "answer_id": 39245155, "question_id": 39244223, "link": "https://stackoverflow.com/questions/39244223/forkdbi-and-statement-handles/39245155#39245155", "title": "Fork+DBI and statement handles", "body": "<h3>Update</h3>\n<p>You say in your comment above that the child processes <em>do</em> close the parent's database handle, so the only question is why there is no message about still-active statement handles associated with the closing of the handle</p>\n<p>That is because the child process will <em>also</em> first close the statement handles on termination before closing the database handle, so there is no error condition to report</p>\n<br/>\n<hr />\n<p>You don't say what database driver you're using, and it's my guess that you simply happen to have a well-behaving one</p>\n<p>The documentation for the <code>DBI</code> module says this</p>\n<blockquote>\n<p>For <em><strong>some drivers</strong></em>, when the child process exits the destruction of inherited handles cause the corresponding handles in the parent process to cease working.</p>\n</blockquote>\n<p>so perhaps the driver you're using isn't one of those drivers</p>\n<p>An alternative is that the code connecting to the database sets the <code>AutoInactiveDestroy</code> flag. It forces the <code>DESTROY</code> method to check whether the current PID is the same as one that created the database and statement handles, and is recommended practice for all new code anyway</p>\n"}], "owner": {"reputation": 37, "user_id": 2923324, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/5628cd0c42de8d13817d6cf64d6954d3?s=128&d=identicon&r=PG&f=1", "display_name": "R6D1H2", "link": "https://stackoverflow.com/users/2923324/r6d1h2"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 626, "favorite_count": 0, "accepted_answer_id": 39245155, "answer_count": 1, "score": 1, "last_activity_date": 1472634950, "creation_date": 1472631414, "last_edit_date": 1592644375, "question_id": 39244223, "link": "https://stackoverflow.com/questions/39244223/forkdbi-and-statement-handles", "title": "Fork+DBI and statement handles", "body": "<h3>Situation</h3>\n<p>So I know that the connection gets shared across the processes and I can't use the connection I opened before the fork in the childprocesses.</p>\n<p>I also know that perl complains when I try to do something like this:</p>\n<pre><code>my $sth = $dbConn-&gt;prepare($sql);\n$sth-&gt;execute();\n$dbConn-&gt;disconnect();\nwhile(my @row = $sth-&gt;fetchrow_array){\n    print @row,&quot;\\n&quot;;\n}\n</code></pre>\n<p>because I try to disconnect while the statement handle is still active.</p>\n<h3>Why does this work then:</h3>\n<pre><code>my $sth = $dbConn-&gt;prepare($sql);\n$sth-&gt;execute();\nwhile(my @row = $sth-&gt;fetchrow_array){\n    my $pid = fork; \n    if(not defined $pid){\n        warn &quot;Could not fork\\n&quot;;\n        next;  # abort loop\n    }\n    if($pid){\n        #Parent: Do nothing\n    }\n    else{ \n        #do stuff\n        exit;\n    }\n}\n</code></pre>\n<p>If the child closes it on exit shouldn't perl complain about a statement handle still being active? I also made sure that the execution of some processes is over before the loop is fully iterated and thought it might complain then but it didn't. Shouldn't I fetch array refs and iterate using them instead of my demonstrated approach in this scenario?</p>\n"}, {"tags": ["linux", "bash", "perl", "awk"], "comments": [{"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1472631267, "post_id": 39243984, "comment_id": 65824500, "body": "Why are you even trying to do this? Execcing <code>cat&#47;cut&#47;awk&#47;sort</code> from perl is redundant? Could you explain what you&#39;re trying to get out of your <code>&#47;etc&#47;passwd</code> ? Looking at it, all UIDs between 7600 and 76500?"}], "answers": [{"comments": [{"owner": {"reputation": 5041, "user_id": 1061331, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/w3Tbz.jpg?s=128&g=1", "display_name": "Chamara Keragala", "link": "https://stackoverflow.com/users/1061331/chamara-keragala"}, "edited": false, "score": 0, "creation_date": 1472631858, "post_id": 39244281, "comment_id": 65824857, "body": "Sorry my bad, it&#39;s not a file i&#39;m reading from. its the <code>ypcat</code> command in NIS. I&#39;ve updated question above."}, {"owner": {"reputation": 5041, "user_id": 1061331, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/w3Tbz.jpg?s=128&g=1", "display_name": "Chamara Keragala", "link": "https://stackoverflow.com/users/1061331/chamara-keragala"}, "edited": false, "score": 0, "creation_date": 1472636506, "post_id": 39244281, "comment_id": 65828004, "body": "Can you please provide me an example?"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "reply_to_user": {"reputation": 5041, "user_id": 1061331, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/w3Tbz.jpg?s=128&g=1", "display_name": "Chamara Keragala", "link": "https://stackoverflow.com/users/1061331/chamara-keragala"}, "edited": false, "score": 0, "creation_date": 1472636921, "post_id": 39244281, "comment_id": 65828292, "body": "See last line of answer :)"}, {"owner": {"reputation": 5041, "user_id": 1061331, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/w3Tbz.jpg?s=128&g=1", "display_name": "Chamara Keragala", "link": "https://stackoverflow.com/users/1061331/chamara-keragala"}, "edited": false, "score": 0, "creation_date": 1472637879, "post_id": 39244281, "comment_id": 65828976, "body": "Thanks, One more thing i want to sort and print the last element of the array - <code>@uids</code>, can you update that too."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "reply_to_user": {"reputation": 5041, "user_id": 1061331, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/w3Tbz.jpg?s=128&g=1", "display_name": "Chamara Keragala", "link": "https://stackoverflow.com/users/1061331/chamara-keragala"}, "edited": false, "score": 0, "creation_date": 1472638771, "post_id": 39244281, "comment_id": 65829614, "body": "OK... but that shouldn&#39;t be too horrific to figure out."}], "tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": true, "score": 2, "last_activity_date": 1472638712, "last_edit_date": 1472638712, "creation_date": 1472631556, "answer_id": 39244281, "question_id": 39243984, "link": "https://stackoverflow.com/questions/39243984/define-a-perl-variable-inside-awk-statement/39244281#39244281", "title": "Define a perl variable inside AWK statement", "body": "<p>OK, so my first answer would be: Don't.</p>\n\n<pre><code>#!/usr/bin/env perl\nuse strict;\nuse warnings;\n\nopen ( my $passwd_file, '&lt;', 'passwd' ) or die $!; \n\nwhile ( &lt;$passwd_file&gt; ) { \n    chomp;\n    my ( $username, $x, $uid, @rest ) = split /:/;\n    print $uid,\"\\n\" if $uid &gt;= 76000 and $uid &lt;= 76500;\n}\n</code></pre>\n\n<p>That's not sorted, it's just in 'passwd file' order it'll print. I'm not clear what you're actually looking for, because you sort at the end - so will have a string with a load of numbers in it.</p>\n\n<p>But maybe something like this is what you'd want?</p>\n\n<pre><code>#!/usr/bin/env perl\nuse strict;\nuse warnings;\n\n\nopen ( my $passwd_file, '&lt;', 'passwd' ) or die $!; \n\nmy @uids; \nwhile ( &lt;$passwd_file&gt; ) { \n    chomp;\n    my ( $username, $x, $uid, @rest ) = split /:/;\n    push ( @uids, $uid ) if $uid &lt;=76500 and $uid &gt;= 76000; \n}\n\nprint join \"\\n\", sort { $a &lt;=&gt; $b } @uids;\n</code></pre>\n\n<p>Note - as you mention in the comments it's a ypcat command:</p>\n\n<pre><code>open ( my $input, '-|', 'ypcat passwd' ); \n</code></pre>\n\n<p>And then do the same thing. </p>\n\n<p>Sorting the list and printing last element:</p>\n\n<pre><code>print \"UID:\", (sort { $a &lt;=&gt; $b } @uids )[-1],\"\\n\";\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 2, "last_activity_date": 1472637591, "last_edit_date": 1472637591, "creation_date": 1472632626, "answer_id": 39244639, "question_id": 39243984, "link": "https://stackoverflow.com/questions/39243984/define-a-perl-variable-inside-awk-statement/39244639#39244639", "title": "Define a perl variable inside AWK statement", "body": "<p>You can write</p>\n\n<pre><code>my $uidNumber = `ypcat passwd | cut -d \":\" -f3 | awk '\\$NF &gt;= 76000 &amp;&amp; \\$NF &lt;= $max' | sort -n`;\n</code></pre>\n\n<p>But you're writing a Perl program, and it would be far better to do this in Perl, or even as a single awk command</p>\n\n<pre><code>my $max = 76_500;\n\nmy @uids = do {\n    open my $fh, '-|', 'ypcat passwd' or die $!;\n    sort { $a &lt;=&gt; $b } grep { $_ &gt;= 76_000 and $_ &lt;= $max } map { (split /:/)[2] } &lt;$fh&gt;;\n};\n</code></pre>\n\n<p>Your use of a scalar <code>$uidNumber</code> implies that you expect to find only a single UID in that range, but your use of <code>sort</code> says that you expect many. If you want multiple UIDs in one string, each followed by a newline then you can now say</p>\n\n<pre><code>my  $uidNumber = join \"\", map \"$_\\n\", @uids;\n</code></pre>\n\n<p>but it seems more useful to keep the UIDs in an array</p>\n"}], "owner": {"reputation": 5041, "user_id": 1061331, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/w3Tbz.jpg?s=128&g=1", "display_name": "Chamara Keragala", "link": "https://stackoverflow.com/users/1061331/chamara-keragala"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 267, "favorite_count": 0, "accepted_answer_id": 39244281, "answer_count": 2, "score": 0, "last_activity_date": 1472638712, "creation_date": 1472630681, "last_edit_date": 1472631885, "question_id": 39243984, "link": "https://stackoverflow.com/questions/39243984/define-a-perl-variable-inside-awk-statement", "title": "Define a perl variable inside AWK statement", "body": "<p>I have defined a perl variable inside the awk script.</p>\n\n<pre><code>my $max = 76500;\nmy $uidNumber = `ypcat passwd | cut -d \":\" -f3 | awk -v var=\\$max '\\$NF &gt;= 76000 &amp;&amp; \\$NF &lt;= \\{print var\\}' | sort -n`;\nprint $uidNumber\n</code></pre>\n\n<p>I get below error when I run the script</p>\n\n<pre><code>awk: $NF &gt;= 76000 &amp;&amp; $NF &lt;= {print var}\nawk:                        ^ syntax error\n</code></pre>\n\n<p>Works perfectly when the varible is not defined</p>\n\n<pre><code>my $uidNumber = `ypcat passwd | cut -d \":\" -f3 | awk '\\$NF &gt;= 76000 &amp;&amp; \\$NF &lt;= 76500' | sort -n`;\nprint $uidNumber\n</code></pre>\n"}, {"tags": ["perl", "cgi"], "comments": [{"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 1, "creation_date": 1472626453, "post_id": 39242633, "comment_id": 65821716, "body": "None of my perl files are CGI scripts, and none of the web applications I&#39;ve seen in the last 6 years were CGI scripts. Your question is weird."}, {"owner": {"reputation": 407, "user_id": 6531580, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/00b4ddb79c22f2db4912af705c14c3d8?s=128&d=identicon&r=PG&f=1", "display_name": "sago", "link": "https://stackoverflow.com/users/6531580/sago"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1472626590, "post_id": 39242633, "comment_id": 65821805, "body": "i have got confused with where to save my perl files@melpomene"}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1472626637, "post_id": 39242633, "comment_id": 65821830, "body": "Are your files CGI scripts?"}, {"owner": {"reputation": 407, "user_id": 6531580, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/00b4ddb79c22f2db4912af705c14c3d8?s=128&d=identicon&r=PG&f=1", "display_name": "sago", "link": "https://stackoverflow.com/users/6531580/sago"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1472626690, "post_id": 39242633, "comment_id": 65821861, "body": "yes. my files are CGI scripts@melpomene"}], "answers": [{"comments": [{"owner": {"reputation": 19192, "user_id": 257635, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/El2tc.jpg?s=128&g=1", "display_name": "Chankey Pathak", "link": "https://stackoverflow.com/users/257635/chankey-pathak"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1472627135, "post_id": 39242827, "comment_id": 65822129, "body": "OP had mentioned <code>&#47;data&#47;web&#47;apache&#47;cgi-bin</code> so I assumed he is using Apache."}, {"owner": {"reputation": 407, "user_id": 6531580, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/00b4ddb79c22f2db4912af705c14c3d8?s=128&d=identicon&r=PG&f=1", "display_name": "sago", "link": "https://stackoverflow.com/users/6531580/sago"}, "edited": false, "score": 0, "creation_date": 1472627188, "post_id": 39242827, "comment_id": 65822160, "body": "In my system cgi-bin location is under following category(/var/www/cgi-bin).I want know here what kind of files will be saved@Chankey Pathak"}, {"owner": {"reputation": 19192, "user_id": 257635, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/El2tc.jpg?s=128&g=1", "display_name": "Chankey Pathak", "link": "https://stackoverflow.com/users/257635/chankey-pathak"}, "edited": false, "score": 0, "creation_date": 1472627247, "post_id": 39242827, "comment_id": 65822199, "body": "Please go through the links which I have posted at the bottom of my answer. Everything you ask for is mentioned there."}], "tags": [], "owner": {"reputation": 19192, "user_id": 257635, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/El2tc.jpg?s=128&g=1", "display_name": "Chankey Pathak", "link": "https://stackoverflow.com/users/257635/chankey-pathak"}, "is_accepted": true, "score": 2, "last_activity_date": 1472627194, "last_edit_date": 1495540301, "creation_date": 1472626968, "answer_id": 39242827, "question_id": 39242633, "link": "https://stackoverflow.com/questions/39242633/where-to-save-perl-cgi-files/39242827#39242827", "title": "Where to save perl CGI files?", "body": "<blockquote>\n  <p>Query:</p>\n  \n  <p>Is it mandatory to save the perl file under cgi-bin location</p>\n</blockquote>\n\n<p>No. It's configurable.</p>\n\n<p>You can put them in any directory just make sure they are readable+executable by Apache.</p>\n\n<pre><code>&lt;Directory /usr/local/apache2/htdocs/somedir&gt;\n    Options +ExecCGI\n&lt;/Directory&gt;\n</code></pre>\n\n<p>The above directive tells Apache to permit the execution of CGI files. You will also need to tell the server what files are CGI files. The following AddHandler directive tells the server to treat all files with the cgi or pl extension as CGI programs:</p>\n\n<pre><code>AddHandler cgi-script .cgi .pl\n</code></pre>\n\n<p>See:</p>\n\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/560749/how-do-i-configure-apache2-to-run-perl-cgi-scripts\">How do I configure Apache 2 to run Perl CGI scripts?</a></li>\n<li><a href=\"http://httpd.apache.org/docs/2.2/howto/cgi.html\" rel=\"nofollow noreferrer\">Apache tutorial: Dynamic content with CGI</a></li>\n</ul>\n"}], "owner": {"reputation": 407, "user_id": 6531580, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/00b4ddb79c22f2db4912af705c14c3d8?s=128&d=identicon&r=PG&f=1", "display_name": "sago", "link": "https://stackoverflow.com/users/6531580/sago"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 277, "favorite_count": 1, "closed_date": 1472643659, "accepted_answer_id": 39242827, "answer_count": 1, "score": 0, "last_activity_date": 1472628174, "creation_date": 1472626288, "last_edit_date": 1472628174, "question_id": 39242633, "link": "https://stackoverflow.com/questions/39242633/where-to-save-perl-cgi-files", "closed_reason": "Opinion-based", "title": "Where to save perl CGI files?", "body": "<hr>\n\n<p>Where to save the user created perl CGI files?</p>\n\n<p>I have currently using the location /home/httpd/cgi-bin location to save the perl files.</p>\n\n<p>I also came across saving some perl files in /data/web/apache/cgi-bin.</p>\n\n<p>Query:</p>\n\n<p>Is it mandatory to save the perl file under cgi-bin location</p>\n"}, {"tags": ["perl", "command-line-interface", "command-line-arguments"], "comments": [{"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 1, "creation_date": 1472744931, "post_id": 39241527, "comment_id": 65886536, "body": "See also <a href=\"http://stackoverflow.com/questions/21496063/using-e-and-s-switch-in-perl\">Using -e and -s switch in perl</a>"}], "answers": [{"comments": [{"owner": {"reputation": 51391, "user_id": 132382, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/20fc7ee8f405aa42e36eb73e841e5a36?s=128&d=identicon&r=PG", "display_name": "pilcrow", "link": "https://stackoverflow.com/users/132382/pilcrow"}, "edited": false, "score": 0, "creation_date": 1472746177, "post_id": 39241632, "comment_id": 65887278, "body": "Very nice remembering the often forgotten <code>-s</code>.  I find it a bit less convenient than <a href=\"http://pubs.opengroup.org/onlinepubs/9699919799/utilities/awk.html\" rel=\"nofollow noreferrer\">awk&#39;s <code>-v</code> option</a> (and normally for my usage perl is a better awk than awk)."}], "tags": [], "owner": {"reputation": 7565, "user_id": 1021515, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/Z9QcP.jpg?s=128&g=1", "display_name": "mwp", "link": "https://stackoverflow.com/users/1021515/mwp"}, "is_accepted": true, "score": 5, "last_activity_date": 1472744283, "last_edit_date": 1472744283, "creation_date": 1472622397, "answer_id": 39241632, "question_id": 39241527, "link": "https://stackoverflow.com/questions/39241527/is-it-possible-to-pass-command-line-arguments-to-argv-when-using-the-n-or-p-o/39241632#39241632", "title": "Is it possible to pass command-line arguments to @ARGV when using the -n or -p options?", "body": "<p>You've basically identified them all. The only one you missed, that I know of at least, is the option of passing switch arguments (instead of positional arguments):</p>\n\n<pre><code>$ perl -sne'chomp; print if $_ eq $kwarg' -- -kwarg=bb &lt;&lt;&lt;$'aa\\nbb\\ncc';\nbb\n</code></pre>\n\n<p>You could also use one of the many getopt modules instead of <code>-s</code>. This is essentially doing the same thing as manipulating <code>@ARGV</code> in a <code>BEGIN {}</code> block before the main program loop, but doing it for you and making it a little cleaner for a one-liner.</p>\n"}], "owner": {"reputation": 30275, "user_id": 4272464, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4fa45261dec56004145c653832504920?s=128&d=identicon&r=PG&f=1", "display_name": "bgoldst", "link": "https://stackoverflow.com/users/4272464/bgoldst"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 358, "favorite_count": 0, "accepted_answer_id": 39241632, "answer_count": 1, "score": 3, "last_activity_date": 1472744283, "creation_date": 1472621970, "question_id": 39241527, "link": "https://stackoverflow.com/questions/39241527/is-it-possible-to-pass-command-line-arguments-to-argv-when-using-the-n-or-p-o", "title": "Is it possible to pass command-line arguments to @ARGV when using the -n or -p options?", "body": "<p>I think the title of my question basically covers it. Here's a contrived example which tries to filter for input lines that exactly equal a parameterized string, basically a Perlish <code>fgrep -x</code>:</p>\n\n<pre><code>perl -ne 'chomp; print if $_ eq $ARGV[0];' bb &lt;&lt;&lt;$'aa\\nbb\\ncc';\n## Can't open bb: No such file or directory.\n</code></pre>\n\n<p>The problem of course is that the <code>-n</code> option creates an implicit <code>while (&lt;&gt;) { ... }</code> loop around the code, and the diamond operator gobbles up all command-line arguments for file names. So, although technically the <code>bb</code> argument <em>did</em> get to <code>@ARGV</code>, the whole program fails because the argument was <em>also</em> picked up by the diamond operator. The end result is, it is impossible to pass command-line arguments to the Perl program when using <code>-n</code>.</p>\n\n<p>I suppose what I really want is an option that would create an implicit <code>while (&lt;STDIN&gt;) { ... }</code> loop around the code, so command-line arguments wouldn't be taken for file names, but such a thing does not exist.</p>\n\n<p>I can think of three possible workarounds:</p>\n\n<p><strong>1:</strong> <code>BEGIN { ... }</code> block to copy and clear <code>@ARGV</code>.</p>\n\n<pre><code>perl -ne 'BEGIN { our @x = shift(@ARGV); } chomp; print if $_ eq $x[0];' bb &lt;&lt;&lt;$'aa\\nbb\\ncc';\n## bb\n</code></pre>\n\n<p><strong>2:</strong> Manually code the while-loop in the one-liner.</p>\n\n<pre><code>perl -e 'while (&lt;STDIN&gt;) { chomp; print if $_ eq $ARGV[0]; }' bb &lt;&lt;&lt;$'aa\\nbb\\ncc';\n## bb\n</code></pre>\n\n<p><strong>3:</strong> Find another way to pass the arguments, such as environment variables.</p>\n\n<pre><code>PAT=bb perl -ne 'chomp; print if $_ eq $ENV{PAT};' &lt;&lt;&lt;$'aa\\nbb\\ncc';\n## bb\n</code></pre>\n\n<p>The <code>BEGIN { ... }</code> block solution is undesirable since it constitutes a bit of a jarring context switch in the one-liner, is somewhat verbose, and requires messing with the special variable <code>@ARGV</code>.</p>\n\n<p>I consider the manual while-loop solution to be more of a non-solution, since it forsakes the <code>-n</code> option entirely, and the point is I want to be able to use the <code>-n</code> option with command-line arguments.</p>\n\n<p>The same can be said for the environment variable solution; the point is I want to be able to use command-line arguments with the <code>-n</code> option.</p>\n\n<p>Is there a better way?</p>\n"}, {"tags": ["arrays", "perl", "dataset"], "comments": [{"owner": {"reputation": 7570, "user_id": 17945, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/e8cbc0b9ed29b027a127d8df309af5a6?s=128&d=identicon&r=PG", "display_name": "reinierpost", "link": "https://stackoverflow.com/users/17945/reinierpost"}, "edited": false, "score": 1, "creation_date": 1472595825, "post_id": 39236826, "comment_id": 65813110, "body": "I&#39;d use an XML library to read the input (e.g. XML::LibXML) and Text::CSV to write the output."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 1, "creation_date": 1472629958, "post_id": 39236826, "comment_id": 65823753, "body": "Is that your actual text? Because it&#39;s almost XML. But almost XML that isn&#39;t XML is Evil."}, {"owner": {"reputation": 2415, "user_id": 4251338, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UNbCO.png?s=128&g=1", "display_name": "ssr1012", "link": "https://stackoverflow.com/users/4251338/ssr1012"}, "edited": false, "score": 0, "creation_date": 1472649203, "post_id": 39236826, "comment_id": 65837006, "body": "simple homework for stack users?"}, {"owner": {"reputation": 1, "user_id": 6738488, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84b6a6255b0cd473954d78851ce99148?s=128&d=identicon&r=PG&f=1", "display_name": "89pies", "link": "https://stackoverflow.com/users/6738488/89pies"}, "reply_to_user": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1472694010, "post_id": 39236826, "comment_id": 65858731, "body": "Yes, the exact almost XML text @Sobrique thee evilest"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1472718143, "post_id": 39236826, "comment_id": 65867344, "body": "I think a rolled up copy of the XML spec, being used to slap whoever wrote it around the head, is the only really appropriate answer at that point"}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 6738488, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84b6a6255b0cd473954d78851ce99148?s=128&d=identicon&r=PG&f=1", "display_name": "89pies", "link": "https://stackoverflow.com/users/6738488/89pies"}, "edited": false, "score": 0, "creation_date": 1472591584, "post_id": 39237129, "comment_id": 65811489, "body": "The datasets contain multiple series of these &quot;paragraphs&quot; will the quick and easy one-liner allow for multiple arrays if I print within a loop?"}, {"owner": {"reputation": 16405, "user_id": 6776093, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/heFeh.png?s=128&g=1", "display_name": "redneb", "link": "https://stackoverflow.com/users/6776093/redneb"}, "reply_to_user": {"reputation": 1, "user_id": 6738488, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84b6a6255b0cd473954d78851ce99148?s=128&d=identicon&r=PG&f=1", "display_name": "89pies", "link": "https://stackoverflow.com/users/6738488/89pies"}, "edited": false, "score": 0, "creation_date": 1472592047, "post_id": 39237129, "comment_id": 65811715, "body": "No, you have to provide some more details for that (e.g. give an example with at least two paragraphs)."}, {"owner": {"reputation": 1, "user_id": 6738488, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84b6a6255b0cd473954d78851ce99148?s=128&d=identicon&r=PG&f=1", "display_name": "89pies", "link": "https://stackoverflow.com/users/6738488/89pies"}, "edited": false, "score": 0, "creation_date": 1472593714, "post_id": 39237129, "comment_id": 65812393, "body": "Sorry, changed accordingly"}], "tags": [], "owner": {"reputation": 16405, "user_id": 6776093, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/heFeh.png?s=128&g=1", "display_name": "redneb", "link": "https://stackoverflow.com/users/6776093/redneb"}, "is_accepted": false, "score": 0, "last_activity_date": 1472594713, "last_edit_date": 1472594713, "creation_date": 1472591380, "answer_id": 39237129, "question_id": 39236826, "link": "https://stackoverflow.com/questions/39236826/how-to-parse-values-from-multiple-lines-into-a-single-array-in-perl/39237129#39237129", "title": "How to parse values from multiple lines into a single array in perl", "body": "<p>If you are looking for a quick and dirty solution you can do the following:</p>\n\n<pre><code>while ($s=~/dataset\\d*\\s*(.*?)\\s*end ?dataset\\d*/gs) {\n    my $r=$1;\n    my @a=$r=~m{&lt;\\w+&gt;(.*?)&lt;/\\w+&gt;}g;\n    print join(\"\\t\",@a),\"\\n\";\n}\n</code></pre>\n\n<p>The code assumes that all the input is stored in the variable <code>$s</code> (i.e. in memory). Your formatting is slightly incosicistent (e.g. <code>enddataset1</code> vs <code>end dataset</code>), so you might have to tweak my regular expressions a little bit.</p>\n"}, {"comments": [{"owner": {"reputation": 1665, "user_id": 1848140, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/c0bc64ef33e6ab5560ce5c534190a6a0?s=128&d=identicon&r=PG&f=1", "display_name": "Nagaraju", "link": "https://stackoverflow.com/users/1848140/nagaraju"}, "reply_to_user": {"reputation": 1, "user_id": 6738488, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84b6a6255b0cd473954d78851ce99148?s=128&d=identicon&r=PG&f=1", "display_name": "89pies", "link": "https://stackoverflow.com/users/6738488/89pies"}, "edited": false, "score": 0, "creation_date": 1472703211, "post_id": 39248667, "comment_id": 65860787, "body": "if it worked you may accept/upvote the answer that helped you @89pies"}, {"owner": {"reputation": 1, "user_id": 6738488, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84b6a6255b0cd473954d78851ce99148?s=128&d=identicon&r=PG&f=1", "display_name": "89pies", "link": "https://stackoverflow.com/users/6738488/89pies"}, "edited": false, "score": 0, "creation_date": 1472842000, "post_id": 39248667, "comment_id": 65931925, "body": "definitely up-voted but I don&#39;t have enough credit yet apologies"}, {"owner": {"reputation": 1665, "user_id": 1848140, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/c0bc64ef33e6ab5560ce5c534190a6a0?s=128&d=identicon&r=PG&f=1", "display_name": "Nagaraju", "link": "https://stackoverflow.com/users/1848140/nagaraju"}, "reply_to_user": {"reputation": 1, "user_id": 6738488, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84b6a6255b0cd473954d78851ce99148?s=128&d=identicon&r=PG&f=1", "display_name": "89pies", "link": "https://stackoverflow.com/users/6738488/89pies"}, "edited": false, "score": 0, "creation_date": 1472875058, "post_id": 39248667, "comment_id": 65940031, "body": "@89pies i didnt notice btw no need to apologize"}], "tags": [], "owner": {"reputation": 1665, "user_id": 1848140, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/c0bc64ef33e6ab5560ce5c534190a6a0?s=128&d=identicon&r=PG&f=1", "display_name": "Nagaraju", "link": "https://stackoverflow.com/users/1848140/nagaraju"}, "is_accepted": false, "score": 0, "last_activity_date": 1472643604, "creation_date": 1472643604, "answer_id": 39248667, "question_id": 39236826, "link": "https://stackoverflow.com/questions/39236826/how-to-parse-values-from-multiple-lines-into-a-single-array-in-perl/39248667#39248667", "title": "How to parse values from multiple lines into a single array in perl", "body": "<p>Provided your data is consistent. This will work.</p>\n\n<pre><code>use strict;\nuse warnings;\n\nopen(my $in,\"&lt;\",$ARGV[0]) or die \"File $ARGV[0] open error:$!\\n\";\nmy @in = &lt;$in&gt;;\nclose($in);\n\nforeach my $in(@in) {\n    chomp($in);\n    if($in=~/enddataset/) {\n        print \"\\n\";\n    }   \n    elsif($in=~/dataset/) {\n        #do nothing\n    }   \n    elsif ($in=~/&lt;.*&gt;(.*)&lt;\\/.*&gt;/) {  #get data between tags\n        print \"$1\\t\";\n    }   \n}   \n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2415, "user_id": 4251338, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UNbCO.png?s=128&g=1", "display_name": "ssr1012", "link": "https://stackoverflow.com/users/4251338/ssr1012"}, "is_accepted": false, "score": 0, "last_activity_date": 1472650654, "creation_date": 1472650654, "answer_id": 39251215, "question_id": 39236826, "link": "https://stackoverflow.com/questions/39236826/how-to-parse-values-from-multiple-lines-into-a-single-array-in-perl/39251215#39251215", "title": "How to parse values from multiple lines into a single array in perl", "body": "<blockquote>\n  <p><em>I am not encouraging these type of codings unless temporarily solution.</em></p>\n</blockquote>\n\n<pre><code>use strict;\nuse warnings;\n\nmy $inputfile = \"input.txt\";\n\nopen(IN, $inputfile) || die \"Couldn't read..: $!..\\n\";\nlocal $/; $_ = &lt;IN&gt;; my $temp = $_;\nclose(IN);\n\nmy @arrays = (); my $joinVals = \"\";\nwhile($temp=~m/dataset(\\d+)((?:(?!enddataset\\1).)*)enddataset\\1/sg)\n{\n    my $tags = $&amp;;\n    $tags=~s/&lt;([a-z0-9\\-\\_]*)&gt;((?:(?!&lt;\\/\\1&gt;).)*)&lt;\\/\\1&gt;/ $joinVals .= \"$2\\t\";  ($&amp;);/ieg;\n    $joinVals .= \"\\n\";\n}\n\nmy @storearr = split /\\n/i, $joinVals;\nprint join \"\\n\", @storearr;\n</code></pre>\n\n<blockquote>\n  <p><em>May be someone can simplify this above coding</em>.</p>\n</blockquote>\n"}], "owner": {"reputation": 1, "user_id": 6738488, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84b6a6255b0cd473954d78851ce99148?s=128&d=identicon&r=PG&f=1", "display_name": "89pies", "link": "https://stackoverflow.com/users/6738488/89pies"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 75, "favorite_count": 0, "answer_count": 3, "score": -2, "last_activity_date": 1472650654, "creation_date": 1472590041, "last_edit_date": 1472600333, "question_id": 39236826, "link": "https://stackoverflow.com/questions/39236826/how-to-parse-values-from-multiple-lines-into-a-single-array-in-perl", "title": "How to parse values from multiple lines into a single array in perl", "body": "<p>I'm trying to put specific variables from a chunk of text into a single array for example the raw data:</p>\n\n<pre><code>dataset1\n    &lt;Time&gt;08/30/2016 00:08:44.568&lt;/Time&gt;\n    &lt;Tag&gt;01234/&lt;Tag&gt;\n    &lt;Runs&gt;2&lt;/Runs&gt;\n    &lt;ID&gt;A0 04 78 C1 02&lt;/ID&gt;\n    &lt;Count&gt;4&lt;/Count&gt;\n    &lt;Kind&gt;134&lt;/Kind&gt;\nenddataset1\ndataset2\n    &lt;Time&gt;08/30/2016 00:08:34.568&lt;/Time&gt;\n    &lt;Tag&gt;12345&lt;/Tag&gt;\n    &lt;Runs&gt;3&lt;/Runs&gt;\n    &lt;ID&gt;A0 04 78 C1 02&lt;/ID&gt;\n    &lt;Count&gt;1&lt;/Count&gt;\n    &lt;Kind&gt;140&lt;/Kind&gt;\nenddataset2\n</code></pre>\n\n<p>And I'd like to put it into an array as such</p>\n\n<pre><code>08/30/2016 00:08:44.568 \\t 01234 \\t 2 \\t A0 04 78 C1 02 \\t 4 \\t 134\n08/30/2016 00.08:34.568 \\t 12345 \\t 3 \\t A0 04 78 C1 02 \\t 1 \\t 140\n</code></pre>\n\n<p>The descriptors (i.e. Time, Tag, Runs, etc) are constant and the values between them are variable.</p>\n\n<p>Any knowledge on how to pull from within? </p>\n"}, {"tags": ["sql-server", "perl", "dbi"], "comments": [{"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 2, "creation_date": 1472584064, "post_id": 39235237, "comment_id": 65807579, "body": "Unrelated, but your previous question showed that you&#39;ve enabled RaiseError. That means you can drop all of the <code>or die</code> statements you have after each DBI command; an exception will be raised automatically if something goes wrong."}, {"owner": {"reputation": 1935, "user_id": 2034048, "user_type": "registered", "accept_rate": 46, "profile_image": "https://i.stack.imgur.com/aDv88.jpg?s=128&g=1", "display_name": "7 Reeds", "link": "https://stackoverflow.com/users/2034048/7-reeds"}, "reply_to_user": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1472584384, "post_id": 39235237, "comment_id": 65807765, "body": "Yup, you are absolutely correct.  It is legacy code though and they don&#39;t want the boat rocked too much."}], "answers": [{"comments": [{"owner": {"reputation": 1935, "user_id": 2034048, "user_type": "registered", "accept_rate": 46, "profile_image": "https://i.stack.imgur.com/aDv88.jpg?s=128&g=1", "display_name": "7 Reeds", "link": "https://stackoverflow.com/users/2034048/7-reeds"}, "edited": false, "score": 0, "creation_date": 1472586150, "post_id": 39235471, "comment_id": 65808764, "body": "hmm, comments are too short... tried your suggestion. the minimal trace output and error is: DBD::ODBC::st bind_param failed: [unixODBC][FreeTDS][SQL Server]Invalid data type (SQL-HY004) at ./script.pl line 363.  Searching for SQL-HY004 led me to use SQL_TIMESTAMP instead of SQL_DATETIME for the date fields.  That has carried me farther.  There are other issues now but probably managable.  thank you"}], "tags": [], "owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "is_accepted": true, "score": 4, "last_activity_date": 1472584700, "creation_date": 1472584700, "answer_id": 39235471, "question_id": 39235237, "link": "https://stackoverflow.com/questions/39235237/perl-dbi-ms-sql-cant-bind-unknown-placeholder/39235471#39235471", "title": "Perl, DBI MS SQL: Can&#39;t bind unknown placeholder", "body": "<p>Don't quote the placeholders, even for char/string types.</p>\n\n<pre><code>...\nWHERE\n     UPPER(P.PersonLoginID) = UPPER('?')\n...\n</code></pre>\n\n<p>should just be</p>\n\n<pre><code>...\nWHERE\n     UPPER(P.PersonLoginID) = UPPER(?)\n...\n</code></pre>\n"}], "owner": {"reputation": 1935, "user_id": 2034048, "user_type": "registered", "accept_rate": 46, "profile_image": "https://i.stack.imgur.com/aDv88.jpg?s=128&g=1", "display_name": "7 Reeds", "link": "https://stackoverflow.com/users/2034048/7-reeds"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1068, "favorite_count": 0, "accepted_answer_id": 39235471, "answer_count": 1, "score": 1, "last_activity_date": 1472584700, "creation_date": 1472583858, "question_id": 39235237, "link": "https://stackoverflow.com/questions/39235237/perl-dbi-ms-sql-cant-bind-unknown-placeholder", "title": "Perl, DBI MS SQL: Can&#39;t bind unknown placeholder", "body": "<p>I have Perl, DBI and ODBC drivers running on a RedHat box.  I know that from a very, very recent sister question that the ODBC connection is working.  I am having issues with the first <code>bind_param</code> in a query.  I am given the error:</p>\n\n<pre><code>Can't bind unknown placeholder '1' at ./script.pl line 361.\n</code></pre>\n\n<p>That portion of the code looks like:</p>\n\n<pre><code>326:  sub isStaff {\n327:      my ($MSdbh, $PersonLoginID, $start, $end) = @_;\n328:\n329:      my $sth = undef;\n330:\n331:      my $result = undef;\n332:\n333:      my $tmp = &lt;&lt;EOF;\n334:  SELECT\n335:          P.PersonLoginID\n336:  FROM\n337:          Personnel.Persons AS P\n338:          INNER JOIN Personnel.Memberships AS M ON M.PersonId = P.PersonId\n339:          INNER JOIN Personnel.Groups AS G ON G.GroupId = M.GroupId\n340:  WHERE\n341:      UPPER(P.PersonLoginID) = UPPER('?')\n342:          AND (G.GroupAbbv = 'MyGroup'\n343:                  OR G.GroupAbbv = 'SubGroup1'\n344:                  OR G.GroupAbbv = 'SubGroup2')\n345:          AND (M.StartDate &lt;= '?'\n346:                  OR M.StartDate BETWEEN '?' AND '?')\n347:          AND (M.EndDate &gt;= '?'\n348:                  OR M.EndDate IS NULL)\n349:  EOF\n350:\n351:  $MSdbh-&gt;trace(2);\n352:\n353:      if ( !( $sth = $MSdbh-&gt;prepare($tmp) ) ) {\n354:                  die \"DB prepare failed\";\n355:          }\n356:\n357:      print STDERR \"$PersonLoginID\\n\";\n358:      print STDERR \"$start\\n\";\n359:      print STDERR \"$end\\n\";\n360:\n361:          $sth-&gt;bind_param( 1, $PersonLoginID, SQL_VARCHAR )\n362:                  || die \"bind_param 1:\" . $sth-&gt;errstr;\n363:          $sth-&gt;bind_param( 2, $start, SQL_DATETIME )\n364:                  || die \"bind_param 2:\" . $sth-&gt;errstr;\n365:          $sth-&gt;bind_param( 3, $start, SQL_DATETIME )\n366:                  || die \"bind_param 3:\" . $sth-&gt;errstr;\n367:          $sth-&gt;bind_param( 4, $end, SQL_DATETIME )\n368:                  || die \"bind_param 4:\" . $sth-&gt;errstr;\n369:          $sth-&gt;bind_param( 5, $end, SQL_DATETIME )\n370:                  || die \"bind_param 5:\" . $sth-&gt;errstr;\n371:\n372:          if ( !( $sth-&gt;execute() ) ) {\n373:                  die \"DB execute failed\";\n374:          }\n375:\n376:          $sth-&gt;bind_col(1, \\$PersonLoginID )\n377:                  || die \"bind_columns:\" . $sth-&gt;errstr;\n378:\n379:      my $i = 0;\n380:      for ($i = 0; $sth-&gt;fetch; $i++) {\n381:          ;\n382:      }\n383:\n384:      $sth-&gt;finish;\n385:\n386:      if ($i == 1) {\n387:          return 1;\n388:      } else {\n389:          return 0;\n390:      }\n391:  }\n</code></pre>\n\n<p>The <code>DBI-&gt;trace()</code> and diagnostic print output is:</p>\n\n<pre><code>    DBI::db=HASH(0x35c5420) trace level set to 0x0/2 (DBI @ 0x0/0) in DBI 1.634-ithread (pid 5792)\n    -&gt; prepare for DBD::ODBC::db (DBI::db=HASH(0x35c54c8)~0x35c5420 'SELECT\n        P.PersonLoginID\nFROM\n        Personnel.Persons AS P\n        INNER JOIN Personnel.Memberships AS M ON M.PersonId = P.PersonId\n        INNER JOIN Personnel.Groups AS G ON G.GroupId = M.GroupId\nWHERE\n    UPPER(P.PersonLoginID) = UPPER('?')\n        AND (G.GroupAbbv = 'MyGroup'\n                OR G.GroupAbbv = 'SubGroup1'\n                OR G.GroupAbbv = 'SubGroup2')\n        AND (M.StartDate &lt;= '?'\n                OR M.StartDate BETWEEN '?' AND '?')\n        AND (M.EndDate &gt;= '?'\n                OR M.EndDate IS NULL)\n') thr#299a010\n    &lt;- prepare= ( DBI::st=HASH(0x3641e08) ) [1 items] at billing.cgi line 353\nSomeLoginID\n2016-03-10 13:54:44\n2016-03-10 16:11:05\n    -&gt; bind_param for DBD::ODBC::st (DBI::st=HASH(0x3641e08)~0x3641d78 1 'SomeLoginID' 12) thr#299a010\n    -&gt; DESTROY for DBD::ODBC::st (DBI::st=HASH(0x3641d78)~INNER) thr#299a010\n    &lt;- DESTROY= ( undef ) [1 items] at billing.cgi line 361\n</code></pre>\n\n<p>The diagnostic prints show the values that <em>should</em> be going into the query.</p>\n\n<pre><code>357:      print STDERR \"$PersonLoginID\\n\";  --&gt; SomeLoginID\n358:      print STDERR \"$start\\n\";          --&gt; 2016-03-10 13:54:44\n359:      print STDERR \"$end\\n\";            --&gt; 2016-03-10 16:11:05\n</code></pre>\n\n<p>Some DBI doc I have read in the last hour or so says that the <code>?</code> is the only \"portable\" placeholder.  Does MS SQL prefer one of the others?</p>\n\n<p>I have seen examples in which place holders for strings do not use single quotes around the placeholder character but that did not work for me.</p>\n\n<p>ideas?</p>\n"}, {"tags": ["sql-server", "perl", "dbi"], "comments": [{"owner": {"reputation": 1945, "user_id": 5669174, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XGSyr.jpg?s=128&g=1", "display_name": "Mike", "link": "https://stackoverflow.com/users/5669174/mike"}, "edited": false, "score": 2, "creation_date": 1472580099, "post_id": 39233896, "comment_id": 65805525, "body": "Where <code>$msTest-&gt;fetch</code> after bind ?"}, {"owner": {"reputation": 1935, "user_id": 2034048, "user_type": "registered", "accept_rate": 46, "profile_image": "https://i.stack.imgur.com/aDv88.jpg?s=128&g=1", "display_name": "7 Reeds", "link": "https://stackoverflow.com/users/2034048/7-reeds"}, "reply_to_user": {"reputation": 1945, "user_id": 5669174, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XGSyr.jpg?s=128&g=1", "display_name": "Mike", "link": "https://stackoverflow.com/users/5669174/mike"}, "edited": false, "score": 1, "creation_date": 1472581057, "post_id": 39233896, "comment_id": 65806022, "body": "DOH! I am a blind fool.  thank you"}], "owner": {"reputation": 1935, "user_id": 2034048, "user_type": "registered", "accept_rate": 46, "profile_image": "https://i.stack.imgur.com/aDv88.jpg?s=128&g=1", "display_name": "7 Reeds", "link": "https://stackoverflow.com/users/2034048/7-reeds"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 99, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1472578993, "creation_date": 1472578993, "question_id": 39233896, "link": "https://stackoverflow.com/questions/39233896/perl-dbi-ms-sql-and-prepared-statements", "title": "perl, DBI, MS SQL and prepared statements", "body": "<p>I have Perl, DBI and the linux ODBC drivers on a RedHat box.  I am trying to connect to an MS SQL database.  I think the ODBC setup is correct.  I was about to ask a different question when I decided to make sure the connection was really working and just do a simple query.</p>\n\n<pre><code>...\nmy @connection_MSSQL = (\n    \"DBI:ODBC:DSN=msdb.my.company.com\",\n    'notARealUser',\n    'notAPassword',\n    {   PrintError =&gt; 0,\n        RaiseError =&gt; 1,\n        AutoCommit =&gt; 1\n    }\n);\n\nmy $MSdbh = DBI-&gt;connect_cached(@connection_MSSQL)\n    or die __LINE__ . \": $&lt;: \" . DBI::errstr . \"\\n\";\n\n$MSdbh-&gt;trace(2);\nmy $msTest = $MSdbh-&gt;prepare('SELECT SYSDATETIME()');\n$msTest-&gt;execute();\nmy $msTestVal = \"\";\n$msTest-&gt;bind_col(1, \\$msTestVal);\nprint STDERR \"msTestVal=$msTestVal\\n\";\n$MSdbh-&gt;trace(0);\n...\n</code></pre>\n\n<p>with the <code>trace</code> result</p>\n\n<pre><code>DBI::db=HASH(0xf405818) trace level set to 0x0/2 (DBI @ 0x0/0) in DBI 1.634-ithread (pid 3974)\n-&gt; prepare for DBD::ODBC::db (DBI::db=HASH(0xf4058c0)~0xf405818 'SELECT SYSDATETIME()') thr#e7da010\n&lt;- prepare= ( DBI::st=HASH(0xf405bf0) ) [1 items] at script.pl line 133\n-&gt; execute for DBD::ODBC::st (DBI::st=HASH(0xf405bf0)~0xf405ba8) thr#e7da010\n&lt;- execute= ( -1 ) [1 items] at script.pl line 134\n-&gt; bind_col for DBD::ODBC::st (DBI::st=HASH(0xf405bf0)~0xf405ba8 1 SCALAR(0xf11ff88)) thr#e7da010\n&lt;- bind_col= ( 1 ) [1 items] at script.pl line 136\nmsTestVal=\n-&gt; trace in DBD::_::common for DBD::ODBC::db (DBI::db=HASH(0xf4058c0)~0xf405818 0) thr#e7da010\n&lt;- trace= ( 2 ) [1 items] at script.pl line 138\n-&gt; DESTROY for DBD::ODBC::st (DBI::st=HASH(0xf405ba8)~INNER) thr#e7da010\n&lt;- DESTROY= ( undef ) [1 items] at script.pl line 365\n</code></pre>\n\n<p>It seems like the connection is working... or not barfing.  It looks like the <code>prepare</code>, <code>execute</code> and <code>bind_col</code> all \"work\" but I'm not seeing a result bound into the result variable.</p>\n\n<p>In this case I am asking for a system datetime value.  I have also tried selecting a static string value, a la: <code>SELECT 'asdf'</code> with the same result. No errors are reported. </p>\n\n<p>Ideas?</p>\n"}, {"tags": ["bash", "perl"], "comments": [{"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1472568842, "post_id": 39230714, "comment_id": 65798548, "body": "Why don&#39;t you sanitize the data before dumping it? For example, copy the data to a temporary table, hash the email addresses, and then do your dump."}, {"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 0, "creation_date": 1472570154, "post_id": 39230714, "comment_id": 65799555, "body": "what is the format of this database dump?"}, {"owner": {"reputation": 2003, "user_id": 213759, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/e1e0ceabcfbd199505d02ce1f9c50cf0?s=128&d=identicon&r=PG", "display_name": "Kirby", "link": "https://stackoverflow.com/users/213759/kirby"}, "edited": false, "score": 0, "creation_date": 1472571249, "post_id": 39230714, "comment_id": 65800377, "body": "It doesn&#39;t matter. It can be just simple text. The main goal save email length."}], "answers": [{"comments": [{"owner": {"reputation": 2003, "user_id": 213759, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/e1e0ceabcfbd199505d02ce1f9c50cf0?s=128&d=identicon&r=PG", "display_name": "Kirby", "link": "https://stackoverflow.com/users/213759/kirby"}, "edited": false, "score": 0, "creation_date": 1472632061, "post_id": 39236298, "comment_id": 65824992, "body": "Thanks for the solution. Yeah, it requires installation of the module. And admin rights on my work laptop."}, {"owner": {"reputation": 2003, "user_id": 213759, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/e1e0ceabcfbd199505d02ce1f9c50cf0?s=128&d=identicon&r=PG", "display_name": "Kirby", "link": "https://stackoverflow.com/users/213759/kirby"}, "edited": false, "score": 0, "creation_date": 1472635655, "post_id": 39236298, "comment_id": 65827344, "body": "Unfortunately, I need to share a solution within a team with default environment stuffs. Anyway, this approach should be here as an option. Thanks."}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "reply_to_user": {"reputation": 2003, "user_id": 213759, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/e1e0ceabcfbd199505d02ce1f9c50cf0?s=128&d=identicon&r=PG", "display_name": "Kirby", "link": "https://stackoverflow.com/users/213759/kirby"}, "edited": false, "score": 0, "creation_date": 1472654013, "post_id": 39236298, "comment_id": 65840597, "body": "@Kirby You don&#39;t need admin rights to install modules. As for sharing, Email::Find is a pure-Perl module, so the easiest thing is to simply download it and include the source with your script."}, {"owner": {"reputation": 2003, "user_id": 213759, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/e1e0ceabcfbd199505d02ce1f9c50cf0?s=128&d=identicon&r=PG", "display_name": "Kirby", "link": "https://stackoverflow.com/users/213759/kirby"}, "edited": false, "score": 0, "creation_date": 1472658574, "post_id": 39236298, "comment_id": 65843803, "body": "Maybe... What I know I need <code>cpan</code> to install a module (<a href=\"http://www.cpan.org/modules/INSTALL.html\" rel=\"nofollow noreferrer\">cpan.org/modules/INSTALL.html</a>). Stuffs in the section Perl on Windows (Win32 and Win64) require admin rights."}, {"owner": {"reputation": 19969, "user_id": 23512, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/tUj1I.png?s=128&g=1", "display_name": "Tanktalus", "link": "https://stackoverflow.com/users/23512/tanktalus"}, "reply_to_user": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 1, "creation_date": 1472672517, "post_id": 39236298, "comment_id": 65851474, "body": "EF also requires some other modules, @ThisSuitIsBlackNot, thus it&#39;s a bit more than just copying."}, {"owner": {"reputation": 19969, "user_id": 23512, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/tUj1I.png?s=128&g=1", "display_name": "Tanktalus", "link": "https://stackoverflow.com/users/23512/tanktalus"}, "reply_to_user": {"reputation": 2003, "user_id": 213759, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/e1e0ceabcfbd199505d02ce1f9c50cf0?s=128&d=identicon&r=PG", "display_name": "Kirby", "link": "https://stackoverflow.com/users/213759/kirby"}, "edited": false, "score": 1, "creation_date": 1472672521, "post_id": 39236298, "comment_id": 65851477, "body": "@Kirby - <a href=\"http://www.perlmonks.org/index.pl?node=yes%2C+even+you+can+use+cpan\" rel=\"nofollow noreferrer\">Yes, even you can use CPAN</a>"}, {"owner": {"reputation": 2003, "user_id": 213759, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/e1e0ceabcfbd199505d02ce1f9c50cf0?s=128&d=identicon&r=PG", "display_name": "Kirby", "link": "https://stackoverflow.com/users/213759/kirby"}, "edited": false, "score": 0, "creation_date": 1472726603, "post_id": 39236298, "comment_id": 65873206, "body": "@Tanktalus thanks for link. Anyway, for me it&#39;s overhead for replacing emails. Base functionality only."}], "tags": [], "owner": {"reputation": 19969, "user_id": 23512, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/tUj1I.png?s=128&g=1", "display_name": "Tanktalus", "link": "https://stackoverflow.com/users/23512/tanktalus"}, "is_accepted": false, "score": 1, "last_activity_date": 1472587915, "creation_date": 1472587915, "answer_id": 39236298, "question_id": 39230714, "link": "https://stackoverflow.com/questions/39230714/how-to-replace-emails-safety-in-database-dump/39236298#39236298", "title": "How to replace emails safety in database dump?", "body": "<p>If you install <a href=\"https://metacpan.org/pod/Email::Find\" rel=\"nofollow\">Email::Find</a> to your perl, you can do your transformation like this:</p>\n\n<pre><code>echo \"john.doe@gmail.com too.long.email@hotmail.com\" | \\\nperl -MEmail::Find -pe 'BEGIN{$junk=\"abc123\"x100; $ef=Email::Find-&gt;new(sub { substr($junk,0,length $_[0]-7) . \"@aa.com\"})}; $ef-&gt;find(\\$_)'\n</code></pre>\n\n<p>Hopefully, none of your emails are more than 607 characters long.  Note that unicode or other non-ascii characters may require a bit more work.</p>\n"}, {"tags": [], "owner": {"reputation": 2003, "user_id": 213759, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/e1e0ceabcfbd199505d02ce1f9c50cf0?s=128&d=identicon&r=PG", "display_name": "Kirby", "link": "https://stackoverflow.com/users/213759/kirby"}, "is_accepted": false, "score": -1, "last_activity_date": 1472726800, "last_edit_date": 1472726800, "creation_date": 1472655805, "answer_id": 39253105, "question_id": 39230714, "link": "https://stackoverflow.com/questions/39230714/how-to-replace-emails-safety-in-database-dump/39253105#39253105", "title": "How to replace emails safety in database dump?", "body": "<p>Finally...</p>\n\n<p>Just a bit changed original command... It's a bit complex but it works. </p>\n\n<p>And it's too slow: for database dump 4GB size total time was almost 10 hours.</p>\n\n<pre><code>perl -pe 's/(([A-z0-9_]|-|\\+|\\.)+)@(([A-z0-9_]|\\.|-)+\\.[A-z0-9]+)/(join(\"\", map { (q(a)..q(z))[rand(26)] } 1..length($1))) . \"@\" . (join(\"\", map { (q(a)..q(z))[rand(26)] } 1..length($3)-3)) . \".cc\"/eg' path/to/file\n</code></pre>\n\n<p>Result from question will be</p>\n\n<pre><code>vxtergkw@juagge.cc viufmhfnwvqubk@vzphosyz.cc\n</code></pre>\n\n<p>I will be really appreciated if someone could optimize the performance of the script.</p>\n"}], "owner": {"reputation": 2003, "user_id": 213759, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/e1e0ceabcfbd199505d02ce1f9c50cf0?s=128&d=identicon&r=PG", "display_name": "Kirby", "link": "https://stackoverflow.com/users/213759/kirby"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 77, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1472726800, "creation_date": 1472568493, "last_edit_date": 1472631597, "question_id": 39230714, "link": "https://stackoverflow.com/questions/39230714/how-to-replace-emails-safety-in-database-dump", "title": "How to replace emails safety in database dump?", "body": "<p>I have already the command which covers this.</p>\n\n<pre><code>perl -pe 's/(([A-z0-9_]|-|\\+|\\.)+)@([A-z0-9_]|\\.|-)+\\.[A-z0-9]+/\"ss.some.email.\" . ++$n . \"\\@example.com\"/eg' inputfile.sql &gt; outfile.sql\n</code></pre>\n\n<p>But it can break serialized data - string check length won't match because exist email will be replaced with another random email with different length.</p>\n\n<p>I would like to find some solution which would replace emails with unique or at least random ones but with the same email string length</p>\n\n<pre><code>$ cat inputfile.txt\njohn.doe@gmail.com too.long.email@hotmail.com\n\n$ command_replace inputfile.txt\nabc123abc12@aa.com abc123abc123abc123a@aa.com\n</code></pre>\n"}, {"tags": ["regex", "perl", "logfile-analysis"], "comments": [{"owner": {"reputation": 61409, "user_id": 485343, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e18b024a122df74275dd2c4486e8a2b4?s=128&d=identicon&r=PG", "display_name": "rustyx", "link": "https://stackoverflow.com/users/485343/rustyx"}, "edited": false, "score": 1, "creation_date": 1472568752, "post_id": 39230707, "comment_id": 65798464, "body": "<code>163</code> - is that decimal or hex? Unclear what you&#39;re asking. Pls clarify."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 1, "creation_date": 1472568817, "post_id": 39230707, "comment_id": 65798525, "body": "It is impossible to know if a given string of characters is a decimal or hexadecimal number. If it contains the characters A-F then you can be sure that it&#39;s hexadecimal (assuming decimal and hexadecimal are your only options). But what about 1234? Is that decimal 1234 or hexadecimal 4660? There&#39;s no way to be sure."}], "answers": [{"comments": [{"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 1, "creation_date": 1472571925, "post_id": 39230839, "comment_id": 65800832, "body": "Perhaps a hash would be better than an array: <code>my %names = $line =~ &#47;(\\w+)\\s+([a-f\\d]+)&#47;gi;</code>"}, {"owner": {"reputation": 4320, "user_id": 5103620, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/8ae06ea53a316cc879b9100b3ff25bfc?s=128&d=identicon&r=PG", "display_name": "Sebastian Lenartowicz", "link": "https://stackoverflow.com/users/5103620/sebastian-lenartowicz"}, "reply_to_user": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1472572796, "post_id": 39230839, "comment_id": 65801493, "body": "Huh, I didn&#39;t know you could assign to a hash like that. Edited."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1472573241, "post_id": 39230839, "comment_id": 65801755, "body": "I like Boradin&#39;s <a href=\"http://stackoverflow.com/a/39231305/7231\">split approach</a> even more."}], "tags": [], "owner": {"reputation": 4320, "user_id": 5103620, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/8ae06ea53a316cc879b9100b3ff25bfc?s=128&d=identicon&r=PG", "display_name": "Sebastian Lenartowicz", "link": "https://stackoverflow.com/users/5103620/sebastian-lenartowicz"}, "is_accepted": false, "score": 1, "last_activity_date": 1472572766, "last_edit_date": 1472572766, "creation_date": 1472568893, "answer_id": 39230839, "question_id": 39230707, "link": "https://stackoverflow.com/questions/39230707/regex-a-file-with-names-and-numbers-hexes-alternated/39230839#39230839", "title": "Regex a file with names and numbers/hexes alternated", "body": "<p>OK, what I'd do is something like this:</p>\n\n<pre><code>if ($line =~ /^milk/) {\n    my %names = ($line =~ /(\\w+)\\s+([a-f\\d]+)/gi);\n\n    use Data::Dumper;\n    print Dumper \\%names;\n}\n</code></pre>\n\n<p>What it'll do is first ensure the line starts with <code>milk</code>, and then grab every pair of single word and hex number in the line and dump each pair to an array.</p>\n"}, {"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": true, "score": 2, "last_activity_date": 1472570136, "creation_date": 1472570136, "answer_id": 39231305, "question_id": 39230707, "link": "https://stackoverflow.com/questions/39230707/regex-a-file-with-names-and-numbers-hexes-alternated/39231305#39231305", "title": "Regex a file with names and numbers/hexes alternated", "body": "<p>Aside from the issue of determining whether a digit string is decimal or hex, something like this will extract the text that you need</p>\n\n<pre><code>use strict;\nuse warnings 'all';\n\nuse Data::Dump 'dd';\n\nmy @data;\n\nwhile ( &lt;DATA&gt; ) {\n    my ($col1, %item) = split;\n    push @data, \\%item if $col1 eq 'milk';\n}\n\ndd \\@data;\n\n__DATA__\nmilk marta 1231 joe 1223 ralph 7C3D\ncookie\njam\nmilk marta 163 joe 23 ralph 7FFF\n</code></pre>\n\n<h3>output</h3>\n\n<pre><code>[\n  { joe =&gt; 1223, marta =&gt; 1231, ralph =&gt; \"7C3D\" },\n  { joe =&gt; 23, marta =&gt; 163, ralph =&gt; \"7FFF\" },\n]\n</code></pre>\n"}], "owner": {"reputation": 507, "user_id": 3417549, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/3VOwl.jpg?s=128&g=1", "display_name": "titus.andronicus", "link": "https://stackoverflow.com/users/3417549/titus-andronicus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 52, "favorite_count": 0, "accepted_answer_id": 39231305, "answer_count": 2, "score": -1, "last_activity_date": 1472572766, "creation_date": 1472568481, "question_id": 39230707, "link": "https://stackoverflow.com/questions/39230707/regex-a-file-with-names-and-numbers-hexes-alternated", "title": "Regex a file with names and numbers/hexes alternated", "body": "<p>Have a logfile <code>my_file.txt</code> which I know has the following structure:</p>\n\n<pre><code>milk marta 1231 joe 1223 ralph 7C3D\ncookie\njam\nmilk marta 163 joe 23 ralph 7FFF\n</code></pre>\n\n<p>And what I want to do is extract with the help of regex in perl all the values of lines that start with the delimiter <code>milk</code> (which I know beforehand). Then I know I will have a number of value names (in the toy example <code>marta</code>, <code>joe</code>, <code>ralph</code>), each followed by a decimal or hexadecimal value.</p>\n\n<ul>\n<li><p>Is there a way to read the values without knowing beforehand if they are decimal or hex?</p></li>\n<li><p>What is the best way to store this values? I thought of doing a hash with the keys being <code>marta</code>, <code>joe</code>, <code>ralph</code>, but I might not know them beforehand, meaning I will know all of them once I have read the first line, not before.</p></li>\n</ul>\n\n<p>And here comes my attempt so far</p>\n\n<pre><code>$my_file = \"my_file.txt\"\nopen my $fh, $my_file or die \"Nope!\"\n\nwhile (my $line = &lt;$fh&gt;)\n{\n    if ($line =~ m/milk/)\n    {\n        # here iterate with a for or while loop over the $line\n        # and read word and value\n    }\n}\n</code></pre>\n"}, {"tags": ["linux", "perl", "shell"], "answers": [{"tags": [], "owner": {"reputation": 3364, "user_id": 693294, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d5935d56f077497b60c12cf86b9d2e1?s=128&d=identicon&r=PG", "display_name": "Gilbert", "link": "https://stackoverflow.com/users/693294/gilbert"}, "is_accepted": false, "score": 0, "last_activity_date": 1472563369, "last_edit_date": 1472563369, "creation_date": 1472562684, "answer_id": 39228456, "question_id": 39228363, "link": "https://stackoverflow.com/questions/39228363/remove-the-stuff-up-to-and-including-the-word-in-a-string-with-multiple-lines/39228456#39228456", "title": "Remove the stuff up to and including the word in a string with multiple lines", "body": "<p>Try dropping quotes:</p>\n\n<pre>if($myString =~ s/.*(scrambled)//s)</pre>\n\n<p>With the quotes its trying to match the literal <code>s/.*(scrambled)//s </code> without trying to change anything. Without the quotes the \"s\" substitute will be seen.</p>\n"}, {"comments": [{"owner": {"reputation": 2415, "user_id": 4251338, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UNbCO.png?s=128&g=1", "display_name": "ssr1012", "link": "https://stackoverflow.com/users/4251338/ssr1012"}, "edited": false, "score": 2, "creation_date": 1472564956, "post_id": 39228486, "comment_id": 65795648, "body": "What about if the string contains <code>unscrambled</code>...? Better we will use <code>\\bscrambled\\b</code>."}], "tags": [], "owner": {"reputation": 19192, "user_id": 257635, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/El2tc.jpg?s=128&g=1", "display_name": "Chankey Pathak", "link": "https://stackoverflow.com/users/257635/chankey-pathak"}, "is_accepted": true, "score": 2, "last_activity_date": 1472619660, "last_edit_date": 1472619660, "creation_date": 1472562746, "answer_id": 39228486, "question_id": 39228363, "link": "https://stackoverflow.com/questions/39228363/remove-the-stuff-up-to-and-including-the-word-in-a-string-with-multiple-lines/39228486#39228486", "title": "Remove the stuff up to and including the word in a string with multiple lines", "body": "<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\n\nmy $myString = \"Lorem Ipsum is simply dummy text of the printing and typesetting industry. \nLorem Ipsum has been the industry's standard dummy text ever since the 1500s,\nwhen an unknown printer took a galley of type and scrambled it to make a \ntype specimen book. It has survived not only five centuries, but also \nthe leap into electronic typesetting, remaining essentially unchanged. \nIt was popularised in the 1960s\";\n\n$myString =~ s/.*\\bscrambled\\b//s;\n\nprint $myString;\n</code></pre>\n\n<p><a href=\"http://ideone.com/EHzxLU\" rel=\"nofollow\"><strong>Demo</strong></a></p>\n"}, {"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user6572950"}, "is_accepted": false, "score": -1, "last_activity_date": 1472563852, "creation_date": 1472563852, "answer_id": 39228913, "question_id": 39228363, "link": "https://stackoverflow.com/questions/39228363/remove-the-stuff-up-to-and-including-the-word-in-a-string-with-multiple-lines/39228913#39228913", "title": "Remove the stuff up to and including the word in a string with multiple lines", "body": "<blockquote>\n  <p>Use can use <code>pre</code> &amp; <code>post</code>.</p>\n</blockquote>\n\n<pre><code>$myString =~ s/\\bscrambled\\b//ig &amp;&amp; print $`.$';\n</code></pre>\n\n<blockquote>\n  <p>or else</p>\n</blockquote>\n\n<pre><code>if($myString =~ s/\\bscrambled\\b//s)\n{\n    print \"Pre: &lt;$`&gt;\\n\";\n    print \"Match:   &lt;$&amp;&gt;\\n\";\n    print \"Post:   &lt;$'&gt;\\n\";\n}\n</code></pre>\n"}], "owner": {"reputation": 5041, "user_id": 1061331, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/w3Tbz.jpg?s=128&g=1", "display_name": "Chamara Keragala", "link": "https://stackoverflow.com/users/1061331/chamara-keragala"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 45, "favorite_count": 1, "accepted_answer_id": 39228486, "answer_count": 3, "score": 0, "last_activity_date": 1472619660, "creation_date": 1472562434, "question_id": 39228363, "link": "https://stackoverflow.com/questions/39228363/remove-the-stuff-up-to-and-including-the-word-in-a-string-with-multiple-lines", "title": "Remove the stuff up to and including the word in a string with multiple lines", "body": "<p>I have the following string with multiple lines. I cannot make it one line since it is coming from a command output. for e.g:</p>\n\n<pre><code>my $myString = \"Lorem Ipsum is simply dummy text of the printing and typesetting industry. \nLorem Ipsum has been the industry's standard dummy text ever since the 1500s,\nwhen an unknown printer took a galley of type and scrambled it to make a \ntype specimen book. It has survived not only five centuries, but also \nthe leap into electronic typesetting, remaining essentially unchanged. \nIt was popularised in the 1960s\"\n</code></pre>\n\n<p>I want to strip off the stuff up to and including the word \"scrambled\"</p>\n\n<p>I have tried below but does not seem to work.</p>\n\n<pre><code>if($myString =~ 's/.*(scrambled)//s')\n{\n  print \"Match:   &lt;$&amp;&gt;\\n\";\n}\n</code></pre>\n"}, {"tags": ["perl", "cgi"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 2, "creation_date": 1472561490, "post_id": 39227981, "comment_id": 65793122, "body": "If you are concerned about <i>separation of concerns</i>, don&#39;t go with CGI. Watch <a href=\"https://youtu.be/jKOqtRMT85s\" rel=\"nofollow noreferrer\">this lightning talk</a> and then use a PSGI/Plack webframework. It&#39;s more modern, easier to implement and maintain, and you can still do your separation. The key point is you separate using modules that produce and consume. Then you bundle them in one application. If you still want it to be CGI, bundle those modules in one CGI script. But don&#39;t try to do multiple programs. That&#39;s going to be hell to set up and maintain. It&#39;s not how stuff is done."}, {"owner": {"reputation": 439, "user_id": 5175044, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/1V440.jpg?s=128&g=1", "display_name": "tulians", "link": "https://stackoverflow.com/users/5175044/tulians"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1472562465, "post_id": 39227981, "comment_id": 65793801, "body": "@simbabque, I agree the CGI is and obsolete technology (and btw thanks for the video), but I think my issue can&#39;t be solved only by approaching CGI, but instead the HTML form and the Perl scripts. I just wondered if there was a way of starting both scripts at the same time. The HTML form only starts the producer because there I could only fill the &lt;a&gt; tag with one URL, but is there a way of starting the other script also?"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1472563399, "post_id": 39227981, "comment_id": 65794444, "body": "No, there is not. Only if you put them behind a single point of entry. Essentially, turn them into modules. Or make one script that forks out to one, waits for it to complete, and then forks out to the other. But that would (to say it with Sawyer&#39;s words) really require double-gloving. ;)"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1472563508, "post_id": 39227981, "comment_id": 65794530, "body": "What I&#39;m trying to say is, you can have a single point of entry that serves all things, including the HTML. That <i>can</i> be a CGI app, but it could also be a PSGI app. In any case, the idea that one web request triggers two processes, where one waits for the other to finish and then sends the response is wrong. Web doesn&#39;t work that way. If you insist on working with patterns, work with MVC instead."}, {"owner": {"reputation": 247, "user_id": 6338639, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-dE0EhH0ZVHo/AAAAAAAAAAI/AAAAAAAAAFE/4-Rr-uDV1tM/photo.jpg?sz=128", "display_name": "Mitch Jackson", "link": "https://stackoverflow.com/users/6338639/mitch-jackson"}, "edited": false, "score": 0, "creation_date": 1472612668, "post_id": 39227981, "comment_id": 65817055, "body": "You need one feature to store data.  You need another feature to view the stored data.  Why wouldn&#39;t you use some sort of database?  Then your database engine could handle all the thorny stuff about file locking, concurrent access, etc.  SQLite might be appropriate."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1472682372, "post_id": 39227981, "comment_id": 65855873, "body": "I&#39;ve been thinking a lot about why you want to do it this way. I&#39;m not sure. I think there is an academic background, but I might be mistaken. Anyway, you have asked for a theoretical answer. I&#39;ve combined the theory with a few practical examples, guiding from your pattern to a more web-oriented pattern. It still preserves the general idea, but builds up on it."}], "answers": [{"comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1472635717, "post_id": 39245514, "comment_id": 65827405, "body": "Do you have any sources for the claim that FCGI has <i>all the speed</i>? I would be interested to see them. From my professional experience, a well-designed and properly configured Plack application beats the an FCGI implementation by both speed and flexibility. Unfortunately I cannot publish the internal benchmarks we have run at $work for that. However, that is not what the question is about anyway."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1473250434, "post_id": 39245514, "comment_id": 66067174, "body": "Actually that perlmonks thread reads not like what you said at all in my opinion."}], "tags": [], "owner": {"reputation": 111, "user_id": 6447967, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-4kt-uhK8pQk/AAAAAAAAAAI/AAAAAAAAADM/d7KEkgnoFOw/photo.jpg?sz=128", "display_name": "Shaka Flex", "link": "https://stackoverflow.com/users/6447967/shaka-flex"}, "is_accepted": false, "score": 0, "last_activity_date": 1472635036, "creation_date": 1472635036, "answer_id": 39245514, "question_id": 39227981, "link": "https://stackoverflow.com/questions/39227981/multiple-cgi-perl-scripts/39245514#39245514", "title": "Multiple CGI Perl scripts", "body": "<p>You can import modules with <code>use Module_Name;</code> or <code>require Module_Name;</code> in your CGI script. \n<a href=\"http://perldoc.perl.org/functions/use.html\" rel=\"nofollow\">http://perldoc.perl.org/functions/use.html</a>\n<a href=\"http://perldoc.perl.org/functions/require.html\" rel=\"nofollow\">http://perldoc.perl.org/functions/require.html</a></p>\n\n<p>A Plack web framework is not a silver bullet, CGI is not dead and FCGI is where all the speed is at.</p>\n\n<p>Do not buy into the Plack hype. Learn what it is first!</p>\n"}, {"comments": [{"owner": {"reputation": 439, "user_id": 5175044, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/1V440.jpg?s=128&g=1", "display_name": "tulians", "link": "https://stackoverflow.com/users/5175044/tulians"}, "edited": false, "score": 0, "creation_date": 1472782377, "post_id": 39259922, "comment_id": 65901135, "body": "Thanks for the detailed explanation, it&#39;s great food for thought."}], "tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": true, "score": 0, "last_activity_date": 1472682249, "creation_date": 1472682249, "answer_id": 39259922, "question_id": 39227981, "link": "https://stackoverflow.com/questions/39227981/multiple-cgi-perl-scripts/39259922#39259922", "title": "Multiple CGI Perl scripts", "body": "<p>Disclaimer: I think what this question boils down to is how to have two different components of a program interact with each other to create one application that is accessible from the web. If that is not what you want, just treat this as food for thought.</p>\n\n<p><strong>Common Gateway Interface</strong></p>\n\n<p>You are talking about CGI scripts in your question. (Emphasis mine).</p>\n\n<blockquote>\n  <p>I'm trying to develop a Perl <em>application</em> based on the producer-consumer paradigm. One of <em>the scripts</em> creates a file with data, while the other reads the data and has to present it in a HTML.</p>\n</blockquote>\n\n<p>In general, <a href=\"https://en.wikipedia.org/wiki/Common_Gateway_Interface\" rel=\"nofollow\">CGI</a> works in a way that a request goes through a web server, and is passed on to an application. That application might be written in Perl. If it is a Perl script, then that script is run by the perl interpreter. The web server starts that process. It can access the request information through the CGI, which is mostly environment variables. When the process is done, it writes data to STDOUT, which the web server takes as a response and sends back.</p>\n\n<pre><code>+-----------+        +-------------+                     +----------------+\n|           | +----&gt; |             | +-----Request-----&gt; |                |\n|  Browser  |        | Web server  |                     |  perl foo.cgi  |\n|           | &lt;----+ |             | &lt;-----Response----+ |                |\n+-----------+        +-------------+                     +----------------+\n</code></pre>\n\n<p>Now because there is only one process involved behind the web server, you cannot have two scripts. There is just no way for the server to communicate with two things at the same time. That's not how CGI works.</p>\n\n<p><strong>A combined approach</strong></p>\n\n<p>Instead, you need to wrap your two scripts into a single point of entry and turn them into some kind of components. Then you can have them talk to each other internally, while on the outside the web server is only waiting for one program to finish.</p>\n\n<pre><code>+-----------+        +-------------+                     +-----------------+\n|           | +----&gt; |             | +-----Request-----&gt; |                 |\n|  Browser  |        | Web server  |                     |  perl foo.cgi   |\n|           | &lt;----+ |             | &lt;-----Response----+ |                 |\n+-----------+        +-------------+                     | +-------------+ |\n                                                         | |  Producer   | |\n                                                         | +-----+-------+ |\n                                                         |       |         |\n                                                         |       |         |\n                                                         |       V         |\n                                                         | +-------------+ |\n                                                         | | Consumer    | |\n                                                         | +-------------+ |\n                                                         |                 |\n                                                         +-----------------+\n</code></pre>\n\n<p>To translate this into Perl, let's first determine some terminology.</p>\n\n<ul>\n<li><em>script</em>: a Perl program that is in a .pl file and that does not have its own <code>package</code></li>\n<li><em>module</em>: a Perl module that is in a .pm file and that has a <code>package</code> with a namespace that fits to the file name</li>\n</ul>\n\n<p>Let's assume you have these two Perl scripts that we call <em>producer.pl</em> and <em>consumer.pl</em>. They are heavily simplified and do not take any arguments into account.</p>\n\n<p><strong>producer.pl</strong></p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings 'all';\nuse CGI;\n\nopen my $fh, '&gt;', 'product.data' or die $!;\nprint $fh \"lots of data\\n\";\nclose $fh;\n</code></pre>\n\n<p><strong>consumer.pl</strong></p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings 'all';\nuse CGI;\n\nmy $q = CGI-&gt;new;\nprint $q-&gt;header('text/plain');\n\nopen my $fh, '&lt;', 'product.data' or die $!;\nwhile my $line (&lt;$fh&gt;) {\n    print $line;\n}\n\nexit;\n</code></pre>\n\n<p>This is as simplified as it gets. There is one script that creates data and one that consumes it. Now we need to make these two interact without actually running them.</p>\n\n<p>Let's jump ahead and assume that we have already refactored both of these scripts and turned them into modules. We'll see how that works a bit later. We can now use those modules in our new <em>foo.pl</em> script. It will process the request, ask the producer for the data and let the consumer turn the data into the format the reader wants.</p>\n\n<p><strong>foo.pl</strong></p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings 'all';\nuse Producer; # this was producer.pl\nuse Consumer; # this was consumer.pl\nuse CGI;\n\nmy $q = CGI-&gt;new;\n\nmy $params; # those would come from $q and are the parameters for the producer\n\nmy $product = Producer::produce($params);\nmy $output = Consumer::consume($product);\n\nprint $q-&gt;header;\nprint $output;\n\nexit;\n</code></pre>\n\n<p>This is very straightforward. We read the parameter from the CGI, pass them to the producer, and pass the product to the consumer. That gives us output, which we print out so it goes back to the server, which sends a response.</p>\n\n<p>Let's take a look at how we turned the two scripts into simple modules. Those do not need to be object oriented, though that might be preferred. Note that the spelling of the file names is now different. Module names conventionally start with capital letters.</p>\n\n<p><strong>Producer.pm</strong></p>\n\n<pre><code>package Producer;\nuse strict;\nuse warnings 'all';\n\nsub produce {\n    my @args = @_;\n\n    return \"lots of data\\n\";\n}\n\n1;\n</code></pre>\n\n<p><strong>Consumer.pm</strong></p>\n\n<pre><code>package Consumer;\nuse strict;\nuse warnings 'all';\n\nsub consume {\n    my ($data) = @_;\n\n    return $data; # this is really simple\n}\n\n1;\n</code></pre>\n\n<p>Now we have two modules that do the same as the scripts if you call the right function. All I did was put a namespace (<code>package</code>) at the top and wrap the code in a <code>sub</code>. I also removed the CGI part.</p>\n\n<p>In our example, it's not necessary for the producer to write to a file. It can just return the data structure. The consumer in turn doesn't need to read from a file. It just takes a variable with the data structure and does stuff to it to present it.</p>\n\n<p>If you stick to consistent function names (like <code>produce</code> and <code>consume</code>, just better), you can even write multiple producers or consumers. We have basically defined an interface here. That gives us the possibility to refactor the internals of the code without breaking compatibility, but also to stick in completely different producers or consumers. You can switch from the one-line-string producer to one that looks up stuff in a database in a heartbeat, as long as you stick to your interface.</p>\n\n<p>Essentially, what we just did can also be shown like this:</p>\n\n<pre><code>+--foo.pl---------------------------+\n|                                   |\n|  +------+        +-------------+  |\n|  |      | +----&gt; |             |  |\n|  |      |        |  Producer   |  |\n|  |      | &lt;----+ |             |  |\n|  | main |        +-------------+  |\n|  | foo  |                         |\n|  | body |        +-------------+  |\n|  |      | +----&gt; |             |  |\n|  |      |        |  Consumer   |  |\n|  |      | &lt;----+ |             |  |\n|  +------+        +-------------+  |\n|                                   |\n+-----------------------------------+\n</code></pre>\n\n<p>This might look slightly familiar. It is essentially the <a href=\"https://en.wikipedia.org/wiki/Model%E2%80%93view%E2%80%93controller\" rel=\"nofollow\">Model-View-Controller</a> (MVC) pattern. In a web context, the model and the view often only talk to each other through the controller, but it's pretty much the same.</p>\n\n<p>Our producer is a data <em>model</em>. The consumer turns the data into a website that the user can see, so it's the <em>view</em>. The main program inside foo.pl that glues both of them together controls the flow of data. It's the <em>controller</em>.</p>\n\n<p>The initial website that triggers the whole thing could be either part of the program, and be shown if no parameters are passed, or could be a stand-alone .html file. That's up to you.</p>\n\n<p>All of this is possible with plain old CGI. You don't need to use any web frameworks for it. But as you grow your application, you'll see that a modern framework makes your life easier.</p>\n\n<hr>\n\n<p><sup>The diagrams where created with <a href=\"http://asciiflow.com/\" rel=\"nofollow\">http://asciiflow.com/</a></sup></p>\n"}], "owner": {"reputation": 439, "user_id": 5175044, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/1V440.jpg?s=128&g=1", "display_name": "tulians", "link": "https://stackoverflow.com/users/5175044/tulians"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 418, "favorite_count": 0, "accepted_answer_id": 39259922, "answer_count": 2, "score": 1, "last_activity_date": 1472893614, "creation_date": 1472561330, "last_edit_date": 1472893614, "question_id": 39227981, "link": "https://stackoverflow.com/questions/39227981/multiple-cgi-perl-scripts", "title": "Multiple CGI Perl scripts", "body": "<p>This is kind of a theoretical question. I'm trying to develop a Perl application based on the producer-consumer paradigm. One of the scripts creates a file with data, while the other reads the data and has to present it in a HTML. There's also a third file, a HTML form, that starts the producer perl file.</p>\n\n<p>What I don't know is how to run <strong>both</strong> the producer and the consumer at the same time using CGI, and I couldn't find information about it online (at least not how I searched for it).</p>\n\n<p>I would like to know if you could tell me where to find this kind of information so I could test the app in the Apache server.</p>\n\n<p>Thanks in advance</p>\n"}, {"tags": ["perl", "sockets", "hash", "reference", "dereference"], "answers": [{"tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": true, "score": 7, "last_activity_date": 1472560760, "creation_date": 1472560760, "answer_id": 39227774, "question_id": 39227611, "link": "https://stackoverflow.com/questions/39227611/how-to-convert-the-perl-hash-string-reference-to-perl-hash-reference/39227774#39227774", "title": "how to convert the perl hash string reference to perl hash reference", "body": "<p><strong>You can't convert this back</strong>.</p>\n\n<p>The <code>HASH(0x991f0dc)</code> is not a hash reference. It is the string representation of a variable that contains a reference to a hash at that address. The error message you describe when you deref it points to that you have something similar to this:</p>\n\n<pre><code>my $foo = 'HASH(0x991f0dc)';\nprint %$foo;\n</code></pre>\n\n<p>Now that won't work, because the actual data structure is not there.</p>\n\n<p>It looks like you got this over a socket that you read from through the <code>GEN0</code> filehandle. Whoever sends you that data structure is doing something wrong.</p>\n\n<p>They need to <em>serialize</em> the data, and then you need to <em>deserialize</em> it back. A good way to do that is <a href=\"https://v1.metacpan.org/pod/JSON\">JSON</a>. But you could also use <a href=\"https://v1.metacpan.org/pod/Storable\">Storable</a>, or <a href=\"https://v1.metacpan.org/pod/Sereal\">Sereal</a>.</p>\n"}], "owner": {"reputation": 220, "user_id": 5109649, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1tgCc.jpg?s=128&g=1", "display_name": "dhana govindarajan", "link": "https://stackoverflow.com/users/5109649/dhana-govindarajan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 691, "favorite_count": 1, "accepted_answer_id": 39227774, "answer_count": 1, "score": 3, "last_activity_date": 1472560760, "creation_date": 1472560331, "question_id": 39227611, "link": "https://stackoverflow.com/questions/39227611/how-to-convert-the-perl-hash-string-reference-to-perl-hash-reference", "title": "how to convert the perl hash string reference to perl hash reference", "body": "<pre><code> HASH(0x991f0dc)\n</code></pre>\n\n<p>so the above hash reference is stored as string in scalar variable,if we\ndereference it with \"%\" in the Perl program it throws error,</p>\n\n<p><code>Can't use string (\"HASH(0x991f0dc)\n\") as a HASH ref while \"strict refs\" in use at tcpclient1.pl line 49, &lt;GEN0&gt; line 1</code> </p>\n\n<p>this above is throws from Perl program,i request solution,to convert back the hash string reference to Perl hash reference.</p>\n"}, {"tags": ["perl", "sorting", "memory", "mmap"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1472559108, "post_id": 39226743, "comment_id": 65791478, "body": "So you want to print the five lines of the file that have the highest value iun the second column?"}, {"owner": {"reputation": 35, "user_id": 6488428, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c4229784e0ea54c7a013cf0d96acd49?s=128&d=identicon&r=PG&f=1", "display_name": "Rockey", "link": "https://stackoverflow.com/users/6488428/rockey"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1472619098, "post_id": 39226743, "comment_id": 65818569, "body": "yes, i want to print only 5 top lines from second column after sorting"}], "answers": [{"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": true, "score": 3, "last_activity_date": 1472559984, "creation_date": 1472559984, "answer_id": 39227473, "question_id": 39226743, "link": "https://stackoverflow.com/questions/39226743/how-loading-of-file-into-memory-in-perl/39227473#39227473", "title": "How loading of file into memory in perl", "body": "\n\n<p>I think you want to print the five lines of the file that have the highest value in the second column</p>\n\n<p>That can be done by a sort of insertion sort that checks each line of the file to see if it comes higher than the lowest of the five lines most recently found, but it's easier to just accumulate a sensible subset of the data, sort it, and discard all but the top five</p>\n\n<p>Here, I have array <code>@top</code> containing lines from the file. When there are 100 lines in the array, it is sorted and reduced to the five maximal entries. Then the <code>while</code> loop continues to add lines to the file until it reaches the limit again or the end of the file has been reached, when the process is repeated. That way, no more than 100 lines from the file are ever help in memory</p>\n\n<p>I have generated a 1,000-line data file to test this with random values between 100 and 2,000 in column 2. The output below is the result</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>use strict;\nuse warnings 'all';\n\nopen my $fh, '&lt;', 'usage.txt' or die $!;\n\nmy @top;\n\nwhile ( &lt;$fh&gt; ) {\n\n    push @top, $_;\n\n    if ( @top &gt;= 100 or eof ) {\n\n        @top = sort {\n            my ($aa, $bb) = map { (split /,/)[1] } ($a, $b);\n            $bb &lt;=&gt; $aa;\n        } @top;\n\n        @top = @top[0..4];\n    }\n}\n\nprint @top;\n</code></pre>\n\n<h3>output</h3>\n\n<pre class=\"lang-none prettyprint-override\"><code>qcmmt,2000,10.2.3.5\nciumt,1999,10.2.3.5\neweae,1998,10.2.3.5\ngvhwv,1998,10.2.3.5\nwonmd,1993,10.2.3.5\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 121669, "user_id": 56778, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/34b152ef95a49568ce45df38cd87e54b?s=128&d=identicon&r=PG", "display_name": "Jim Mischel", "link": "https://stackoverflow.com/users/56778/jim-mischel"}, "is_accepted": false, "score": 2, "last_activity_date": 1472567092, "creation_date": 1472567092, "answer_id": 39230176, "question_id": 39226743, "link": "https://stackoverflow.com/questions/39226743/how-loading-of-file-into-memory-in-perl/39230176#39230176", "title": "How loading of file into memory in perl", "body": "<p>The standard way to do this is to create a priority queue that contains <code>k</code> items, where <code>k</code> is the number of items you want to return. So if you want the five lines that have the highest value, you'd do the following:</p>\n\n<pre><code>pq = new priority_queue\nadd the first five items in the file to the priority queue\nfor each remaining line in the file\n    if value &gt; lowest value on pq\n        remove lowest value on the pq\n        add new value to pq\n</code></pre>\n\n<p>When you're done going through the file, pq will contain the five items with the highest value.</p>\n\n<p>To do this in Perl, use the <a href=\"http://search.cpan.org/~fwojcik/Heap-Priority-0.11/Priority.pm\" rel=\"nofollow\">Heap::Priority</a> module.</p>\n\n<p>This will be faster and use less memory than the other suggestions.</p>\n"}, {"tags": [], "owner": {"reputation": 1945, "user_id": 5669174, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XGSyr.jpg?s=128&g=1", "display_name": "Mike", "link": "https://stackoverflow.com/users/5669174/mike"}, "is_accepted": false, "score": 1, "last_activity_date": 1472570452, "last_edit_date": 1472570452, "creation_date": 1472569984, "answer_id": 39231234, "question_id": 39226743, "link": "https://stackoverflow.com/questions/39226743/how-loading-of-file-into-memory-in-perl/39231234#39231234", "title": "How loading of file into memory in perl", "body": "<p>Algorithm remembering the last 5 biggest rows.</p>\n\n<p>For each row, check with the lowest memorized element. If more - are stored in the array before next biggest item with unshift lowest.</p>\n\n<pre><code>use warnings;\nuse strict;\n\nmy $file = $ARGV[0] ;\nmy @keys=(0,0,0,0,0);\nmy @res;\n\nopen (my $fh, \"&lt;\", $file) or die \"Can't open the file $file: \";\nwhile(&lt;$fh&gt;)\n{\n my($name,$key,$ip) = split /,/;\n next if($key&lt;$keys[0]);\n for(0..4) {\n  if($_==4 || $key&lt;$keys[$_+1]) {\n   @keys[0..$_-1]=@keys[1..$_] if($_&gt;0);\n   $keys[$_]=$key;\n   $res[$_]=[ $name, $ip ];\n   last;\n  } \n }\n}\nfor(0..4) {\n  print \"$keys[4-$_]  @{$res[4-$_]}\";\n}\n</code></pre>\n\n<p>Test on file from 1M random rows (20 Mbytes):</p>\n\n<pre><code>Last items (This algorithm):\nStart 1472567980.91183\nEnd   1472567981.94729 (duration 1.03546 seconds)\n\nfull sort in memory (Algorithm of @Rishi):\nStart 1472568441.00438\nEnd   1472568443.43829 (duration 2.43391 seconds)\n\nsort by parts of 100 rows (Algorithm of @Borodin):\nStart 1472568185.21896\nEnd   1472568195.59322 (duration 10.37426 seconds)\n</code></pre>\n"}], "owner": {"reputation": 35, "user_id": 6488428, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c4229784e0ea54c7a013cf0d96acd49?s=128&d=identicon&r=PG&f=1", "display_name": "Rockey", "link": "https://stackoverflow.com/users/6488428/rockey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 207, "favorite_count": 1, "accepted_answer_id": 39227473, "answer_count": 3, "score": 2, "last_activity_date": 1473138405, "creation_date": 1472557841, "last_edit_date": 1473138405, "question_id": 39226743, "link": "https://stackoverflow.com/questions/39226743/how-loading-of-file-into-memory-in-perl", "title": "How loading of file into memory in perl", "body": "<p>i have tried with some script for sorting a input text file in descending order and print only top usage customer.</p>\n\n<p>input text file containts:</p>\n\n<pre><code>  NAME,USAGE,IP\n  example :\n  Abc,556,10.2.3.5\n  bbc,126,14.2.5.6\n</code></pre>\n\n<p>and so on, this is very large file and i am trying to avoid loading file into memory.</p>\n\n<p>I have tried with following script.</p>\n\n<pre><code>use warnings ;\n\nuse strict;\n\nmy %hash = ();\nmy $file = $ARGV[0] ;\n\n\nopen (my $fh, \"&lt;\", $file) or die \"Can't open the file $file: \";\n\nwhile (my $line =&lt;$fh&gt;) \n{\nchomp ($line) ;\nmy( $name,$key,$ip) = split /,/, $line;\n\n$hash{$key} = [ $name, $ip ];\n}\n\nmy $count= 0 ;\n\nforeach ( sort { $b &lt;=&gt; $a } keys %hash ){\nmy $value = $hash{$_};\nprint \"$_  @{$value} \\n\" ;\nlast if (++$count == 5);\n} \n</code></pre>\n\n<p>Output should be sorted based on usage and it will show the name and IP for respective usage. \"    `</p>\n"}, {"tags": ["mongodb", "perl"], "answers": [{"tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": true, "score": 5, "last_activity_date": 1472551252, "creation_date": 1472551252, "answer_id": 39224433, "question_id": 39224293, "link": "https://stackoverflow.com/questions/39224293/how-can-i-print-only-values-in-perl-result-returned-from-mongodb/39224433#39224433", "title": "How can I print only values in perl, result returned from mongodb?", "body": "<p><a href=\"http://p3rl.org/Data::Printer\" rel=\"noreferrer\">Data::Printer</a> is meant for <em>human-readable data inspection</em>. It prints to <code>STDOUT</code>. That's for debugging and looking at data structures during development.</p>\n\n<p>If you want to actually access and print the data to the screen, you need to access it yourself. Data::Printer helps you do this, because it tells you what your data structure looks like.</p>\n\n<p>To print your <code>student_id</code>s (the values of those keys), just <code>print</code> them.</p>\n\n<pre><code>while (my $row = $stu-&gt;next){\n    print \"$row-&gt;{student_id}\\n\";\n}\n</code></pre>\n\n<p>That's it. Consider using <a href=\"http://perldoc.perl.org/functions/say.html\" rel=\"noreferrer\"><code>say</code></a> instead as it contains the <code>\\n</code> already.</p>\n\n<pre><code>say $row-&gt;{student_id};\n</code></pre>\n\n<p>You need to do <code>use feature 'say';</code> or <a href=\"http://perldoc.perl.org/functions/use.html\" rel=\"noreferrer\">use a version pragma</a> that includes it to do that.</p>\n"}], "owner": {"reputation": 35, "user_id": 5412856, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a55539d0eb6d48913f21c2f5be4ef7d?s=128&d=identicon&r=PG&f=1", "display_name": "saber", "link": "https://stackoverflow.com/users/5412856/saber"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 50, "favorite_count": 0, "accepted_answer_id": 39224433, "answer_count": 1, "score": 1, "last_activity_date": 1472551252, "creation_date": 1472550820, "last_edit_date": 1472551130, "question_id": 39224293, "link": "https://stackoverflow.com/questions/39224293/how-can-i-print-only-values-in-perl-result-returned-from-mongodb", "title": "How can I print only values in perl, result returned from mongodb?", "body": "<p><strong>Script</strong></p>\n\n<pre><code>#!/usr/bin/perl -w\nuse MongoDB;\nuse Data::Printer;\nmy $client = MongoDB::MongoClient-&gt;new();\nmy $db   = $client-&gt;get_database('students');\nmy $grades = $db-&gt;get_collection('grades');\nmy $stu = $grades-&gt;find-&gt;fields({student_id=&gt;1,_id=&gt;0});\nwhile (my $row = $stu-&gt;next){\np($row);\n}\n</code></pre>\n\n<p><strong>Output:</strong></p>\n\n<pre><code>\\ {\n    student_id   198\n}\n\\ {\n    student_id   199\n}\n</code></pre>\n\n<p><strong>Intended Output:</strong></p>\n\n<pre><code>198\n199\n</code></pre>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1472548116, "post_id": 39223178, "comment_id": 65784209, "body": "What is your question? I don&#39;t understand what you are trying to do. Please <a href=\"https://stackoverflow.com/posts/39223178/edit\">edit</a> your question and show the actual code that you are using with WWW::Mechanize and say what it is you are trying to achieve. Where does <code>$url</code> come from in your program? What is <code>$url2</code> and why do you need it? What do you want to do with those two URLs?"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1472548931, "post_id": 39223178, "comment_id": 65784727, "body": "What does your code do? Do you parse out the <i>action</i> from that HTML and then submit another request? Why don&#39;t you just use Mechanize to fill in the form and submit it? It will use the correct action, unless it&#39;s done via JS (in which case parsing it won&#39;t help either)."}, {"owner": {"reputation": 81, "user_id": 1016031, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/249efa12bf73ca67f217bf1a07740e45?s=128&d=identicon&r=PG", "display_name": "user1016031", "link": "https://stackoverflow.com/users/1016031/user1016031"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1472549109, "post_id": 39223178, "comment_id": 65784879, "body": "Yes, I parse the HTML page via scraping. It&#39;s 2 different FORM requests, one to login, one for data/data/time."}, {"owner": {"reputation": 81, "user_id": 1016031, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/249efa12bf73ca67f217bf1a07740e45?s=128&d=identicon&r=PG", "display_name": "user1016031", "link": "https://stackoverflow.com/users/1016031/user1016031"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1472549428, "post_id": 39223178, "comment_id": 65785087, "body": "I&#39;ve added the code section that is in production. I had to wrap them with if(1) because the server got rid of 3xx redirection and uses dynamic URLs"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1472549890, "post_id": 39223178, "comment_id": 65785364, "body": "That looks like it would work. Add debugging to see what action for the <code>loginForm</code> Mechanize sees. Also, there&#39;s no scraping in that code."}], "answers": [{"tags": [], "owner": {"reputation": 81, "user_id": 1016031, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/249efa12bf73ca67f217bf1a07740e45?s=128&d=identicon&r=PG", "display_name": "user1016031", "link": "https://stackoverflow.com/users/1016031/user1016031"}, "is_accepted": false, "score": -1, "last_activity_date": 1472550534, "creation_date": 1472550534, "answer_id": 39224172, "question_id": 39223178, "link": "https://stackoverflow.com/questions/39223178/wwwmechanize-grab-form-action-for-variable-to-pass-to-url2/39224172#39224172", "title": "WWW::Mechanize - Grab &lt;form&gt; action for variable to pass to $url2", "body": "<p>Seems there was a serverside issue causing this problem.. </p>\n"}], "owner": {"reputation": 81, "user_id": 1016031, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/249efa12bf73ca67f217bf1a07740e45?s=128&d=identicon&r=PG", "display_name": "user1016031", "link": "https://stackoverflow.com/users/1016031/user1016031"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 77, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1476429445, "creation_date": 1472547995, "last_edit_date": 1472550825, "question_id": 39223178, "link": "https://stackoverflow.com/questions/39223178/wwwmechanize-grab-form-action-for-variable-to-pass-to-url2", "title": "WWW::Mechanize - Grab &lt;form&gt; action for variable to pass to $url2", "body": "<p>I've using WWW-Mechanize to login to a page for years, submit form data, then grab the data/display it etc. The problem is now the source site where I am grabbing from has started using another variable after the login (the POST data) which is a dynamic URL at random times (it's the user ID of the person I've logged in with, seems to be changing.) I can't seem to find a way to grab the action link to store it as a variable: $url2 </p>\n\n<pre><code>&lt;form name=\"searchForm\" method=\"post\" action=\"../Emsresponse/?id=106\"  onsubmit=\"return validate()\"&gt;\n</code></pre>\n\n<p>When I run my code, I store the original $url as well as $url2, which is a slightly different /real/ URL with variables at the, but it's becoming dynamic so I need to store the action part and in $url2 so I don't have to keep changing the static URLs variables. </p>\n\n<p>For example, this was working: </p>\n\n<pre><code>my $url = \"www.whatever.com/form\";\nmy $url2 = \"www.whatever.com/Ems/id?102\";\n</code></pre>\n\n<p>I simply need to store the data within action (ie: ../Emsresponse/?id=106) as a variable, but I cannot find a reliable way to do this with Mechanize. </p>\n\n<p>So I need $url2 to contain the ?id=whatever-it-is-now so I don't have to keep modifying the code every 2 weeks.</p>\n\n<pre><code>$url  = \"www.page.com\";\n$url2 = \"www.page.com/userName/id?=101\";\nmy $r = $mech-&gt;get($url2);\n\n#  if we are not logged in $r hold has a key previous holding the http response from the 302 redirect call to the login page\nif (1) {\n\n    # if we were redirected to the login location we are not logged in\n    if (1) {\n        $mech-&gt;get($url);\n        if ( $mech-&gt;success() ) {\n            $mech-&gt;form_name(\"loginForm\");\n            $mech-&gt;set_fields( LoginUserName =&gt; ... );\n            $mech-&gt;click();\n            if ( $mech-&gt;success() ) {\n                $authme = 0;\n            }\n\n            # check for success --&gt; this is important to not break the script on any errors\n            if (   $authme == 0\n                &amp;&amp; $mech-&gt;success() )\n            {\n                $mech-&gt;cookie_jar-&gt;save($cookie_file);\n\n                $mech-&gt;form_name(\"searchForm\");\n                $mech-&gt;set_fields( DateStart =&gt; $date_yesterday );\n                $mech-&gt;click();\n                if ( $mech-&gt;success() ) { }\n</code></pre>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 4, "creation_date": 1472545544, "post_id": 39222196, "comment_id": 65782596, "body": "Welcome to Stack Overflow and the Perl tag. Your question is off-topic for SO because it asks for a tool recommendation. It also does not contain enough information. Please <a href=\"https://stackoverflow.com/posts/39222196/edit\">edit</a> the question and tell us what database, and how you connect to it. <i>wget</i> is essentially an HTTP client (like <i>curl</i>). So I presume you are talking to some kind of NOSQL database that has an HTTP API. Maybe Couchbase or MongoDB or something like that. There are modules for those on CPAN. If you want to implement simple HTTP requests in Perl, those are documented well. A simple search will give a lot of resources."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 2, "creation_date": 1472545564, "post_id": 39222196, "comment_id": 65782607, "body": "Also, please take a moment to read the <a href=\"https://stackoverflow.com/tour\">faq</a> and take the Stack Overflow <a href=\"https://stackoverflow.com/tour\">tour</a> to learn more about what&#39;s on-topic here, and how to ask good questions. Thank you. :)"}, {"owner": {"reputation": 1532, "user_id": 791908, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tmGC4.jpg?s=128&g=1", "display_name": "Drav Sloan", "link": "https://stackoverflow.com/users/791908/drav-sloan"}, "edited": false, "score": 1, "creation_date": 1472547702, "post_id": 39222196, "comment_id": 65783955, "body": "Also, I&#39;m not sure how you want to achieve &quot;wget functionality&quot; on one hand, yet &quot;a module without installation&quot; on the other - seems a bit unrealistic - most specific behaviour outside of core perl <i>comes from</i> installed CPAN modules."}, {"owner": {"reputation": 1786, "user_id": 1820650, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/ce47757627908a1013e0951158f4c2e6?s=128&d=identicon&r=PG", "display_name": "Dr.Avalanche", "link": "https://stackoverflow.com/users/1820650/dr-avalanche"}, "reply_to_user": {"reputation": 1532, "user_id": 791908, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tmGC4.jpg?s=128&g=1", "display_name": "Drav Sloan", "link": "https://stackoverflow.com/users/791908/drav-sloan"}, "edited": false, "score": 0, "creation_date": 1472548200, "post_id": 39222196, "comment_id": 65784271, "body": "@DravSloan pure perl modules can just be copied with a minor change to your code, without cpan or ppm installation. They&#39;re just scripts after all"}, {"owner": {"reputation": 1532, "user_id": 791908, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tmGC4.jpg?s=128&g=1", "display_name": "Drav Sloan", "link": "https://stackoverflow.com/users/791908/drav-sloan"}, "reply_to_user": {"reputation": 1786, "user_id": 1820650, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/ce47757627908a1013e0951158f4c2e6?s=128&d=identicon&r=PG", "display_name": "Dr.Avalanche", "link": "https://stackoverflow.com/users/1820650/dr-avalanche"}, "edited": false, "score": 1, "creation_date": 1472548808, "post_id": 39222196, "comment_id": 65784644, "body": "@Dr.Avalanche but that still requires some form of &quot;installation&quot;, it doesn&#39;t get to your filesystem by magic :)"}, {"owner": {"reputation": 1786, "user_id": 1820650, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/ce47757627908a1013e0951158f4c2e6?s=128&d=identicon&r=PG", "display_name": "Dr.Avalanche", "link": "https://stackoverflow.com/users/1820650/dr-avalanche"}, "reply_to_user": {"reputation": 1532, "user_id": 791908, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tmGC4.jpg?s=128&g=1", "display_name": "Drav Sloan", "link": "https://stackoverflow.com/users/791908/drav-sloan"}, "edited": false, "score": 0, "creation_date": 1472548990, "post_id": 39222196, "comment_id": 65784774, "body": "@DravSloan now you&#39;re simply splitting hairs. Your argument is terrible, if you copy and paste the string &quot;abc&quot; to a text file on a computer your argument is that you&#39;ve installed it?"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 3, "creation_date": 1472549045, "post_id": 39222196, "comment_id": 65784832, "body": "You&#39;re asking for an HTTP client. The &quot;standard&quot; Perl HTTP client is the <a href=\"https://metacpan.org/pod/LWP\" rel=\"nofollow noreferrer\">LWP</a> suite of modules. But that requires installation. If you&#39;re using a modern version of Perl (5.14+) then that will include <a href=\"https://metacpan.org/pod/HTTP::Tiny\" rel=\"nofollow noreferrer\">HTTP::Tiny</a> which is a small HTTP client."}, {"owner": {"user_type": "does_not_exist", "display_name": "user6734995"}, "reply_to_user": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1472549320, "post_id": 39222196, "comment_id": 65785014, "body": "@DaveCross thank you kindly. Yes, this is what I was searching for."}, {"owner": {"reputation": 1532, "user_id": 791908, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tmGC4.jpg?s=128&g=1", "display_name": "Drav Sloan", "link": "https://stackoverflow.com/users/791908/drav-sloan"}, "reply_to_user": {"reputation": 1786, "user_id": 1820650, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/ce47757627908a1013e0951158f4c2e6?s=128&d=identicon&r=PG", "display_name": "Dr.Avalanche", "link": "https://stackoverflow.com/users/1820650/dr-avalanche"}, "edited": false, "score": 1, "creation_date": 1472549378, "post_id": 39222196, "comment_id": 65785047, "body": "@Dr.Avalanche No my point is that you still have to goto CPAN or similar, locate the module, get the source code, open a file with the correct/name and path and &quot;paste&quot; the code. That is <i>still</i> better serviced via CPAN (even for pure perl), because at least then unit tests and dependancies can also be checked. I&#39;d like to see a &quot;replacement for wget&quot; than wouldn&#39;t need a number of modules, and some form of &quot;installation&quot;."}, {"owner": {"reputation": 1786, "user_id": 1820650, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/ce47757627908a1013e0951158f4c2e6?s=128&d=identicon&r=PG", "display_name": "Dr.Avalanche", "link": "https://stackoverflow.com/users/1820650/dr-avalanche"}, "reply_to_user": {"reputation": 1532, "user_id": 791908, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tmGC4.jpg?s=128&g=1", "display_name": "Drav Sloan", "link": "https://stackoverflow.com/users/791908/drav-sloan"}, "edited": false, "score": 0, "creation_date": 1472549509, "post_id": 39222196, "comment_id": 65785143, "body": "@DravSloan also HTTP::Tiny is pure perl and depends on core modules which can replicate wget functionality easily"}, {"owner": {"user_type": "does_not_exist", "display_name": "user6734995"}, "reply_to_user": {"reputation": 1532, "user_id": 791908, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tmGC4.jpg?s=128&g=1", "display_name": "Drav Sloan", "link": "https://stackoverflow.com/users/791908/drav-sloan"}, "edited": false, "score": 0, "creation_date": 1472549562, "post_id": 39222196, "comment_id": 65785186, "body": "@DravSloan when I meant &quot;wget functionalitty without module installation&quot; I was wondering if there is a module which comes with the Perl distribution that I could have missed"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 1786, "user_id": 1820650, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/ce47757627908a1013e0951158f4c2e6?s=128&d=identicon&r=PG", "display_name": "Dr.Avalanche", "link": "https://stackoverflow.com/users/1820650/dr-avalanche"}, "edited": false, "score": 0, "creation_date": 1472553222, "post_id": 39222196, "comment_id": 65787683, "body": "@Dr.Avalanche: Your sarcasm isn&#39;t welcome. It is inadvisable to simply copy the source of modules into place. Every module comes with a specific installation procedure which may include non-obvious steps, and a test suite that will ensure that the module is working correctly. cpan also maintains a database of installed modules on your system which is clearly not updated by such a manual procedure. Those who feel unable to install modules properly usually have a misconception about what options are available, and it is better to encourage them than to advocate manhandling things into place."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1472553276, "post_id": 39222196, "comment_id": 65787722, "body": "@DaveCross: Thank you. I was unaware that <code>HTTP::Tiny</code> was in core."}, {"owner": {"reputation": 1786, "user_id": 1820650, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/ce47757627908a1013e0951158f4c2e6?s=128&d=identicon&r=PG", "display_name": "Dr.Avalanche", "link": "https://stackoverflow.com/users/1820650/dr-avalanche"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1472554019, "post_id": 39222196, "comment_id": 65788179, "body": "@Borodin where did I say &quot;the source of modules into place&quot;. &quot;Every module comes with a specific installation procedure which may include non-obvious steps&quot; all steps are documented in the module source, otherwise cpan wouldn&#39;t be able to install it. All of which can be done manually if need be. &quot;cpan also maintains a database of installed modules on your system which is clearly not updated by such a manual procedure.&quot; The entire point of my answer is that you can use the modules code without installing the module."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 1786, "user_id": 1820650, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/ce47757627908a1013e0951158f4c2e6?s=128&d=identicon&r=PG", "display_name": "Dr.Avalanche", "link": "https://stackoverflow.com/users/1820650/dr-avalanche"}, "edited": false, "score": 0, "creation_date": 1472558796, "post_id": 39222196, "comment_id": 65791257, "body": "@Dr.Avalanche: You said <i>&quot;pure perl modules can just be copied&quot;</i>. Objecting to my <i>&quot;into place&quot;</i> seems strange and leaves me wondering what you actually intended. The steps to build the module are included as <code>Makefile.PL</code> which generates a file for <code>make</code> to interpret to build and install the module. It is far from being straightforward to interpret, and the vast majority of systems are equipped with the necessary command-line tools to install the module properly, even on Windows. There is no need to encourage anyone to &quot;just copy&quot; it."}, {"owner": {"reputation": 1786, "user_id": 1820650, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/ce47757627908a1013e0951158f4c2e6?s=128&d=identicon&r=PG", "display_name": "Dr.Avalanche", "link": "https://stackoverflow.com/users/1820650/dr-avalanche"}, "edited": false, "score": 0, "creation_date": 1472559724, "post_id": 39222196, "comment_id": 65791866, "body": "this was in response to the technically incorrect statement made earlier <code>&quot;a module without installation&quot; on the other - seems a bit unrealistic</code>. I didn&#39;t encourage anyone to do this, simply stated that it is not impossible and can be done. Try reading the context before getting on your high horse"}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user6734995"}, "edited": false, "score": 0, "creation_date": 1472551007, "post_id": 39224329, "comment_id": 65786193, "body": "Thank you for your answer, even though the credit belgongs to @Dave Cross"}], "tags": [], "owner": {"reputation": 6313, "user_id": 328115, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/9a029d2d948f128443f996fa12b3d3a1?s=128&d=identicon&r=PG", "display_name": "dolmen", "link": "https://stackoverflow.com/users/328115/dolmen"}, "is_accepted": true, "score": 0, "last_activity_date": 1472550939, "creation_date": 1472550939, "answer_id": 39224329, "question_id": 39222196, "link": "https://stackoverflow.com/questions/39222196/perl-module-to-substitute-the-wget-command/39224329#39224329", "title": "Perl module to substitute the wget command", "body": "<p><a href=\"https://metacpan.org/pod/HTTP::Tiny\" rel=\"nofollow\">HTTP::Tiny</a> is in bundled with perl since perl 5.14. This should be enough to send a GET or POST request to an HTTP server.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user6734995"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 229, "favorite_count": 0, "closed_date": 1472554729, "accepted_answer_id": 39224329, "answer_count": 1, "score": 0, "last_activity_date": 1472550939, "creation_date": 1472544959, "question_id": 39222196, "link": "https://stackoverflow.com/questions/39222196/perl-module-to-substitute-the-wget-command", "closed_reason": "Not suitable for this site", "title": "Perl module to substitute the wget command", "body": "<p>I am using currently <code>wget</code> to send information to a database. Is there a Perl module that can provide the same functionality of the wget command?</p>\n\n<p>Update: Preferable a module which doesn't need installation.</p>\n"}, {"tags": ["perl", "redirect", "cookies", "lwp", "lwp-useragent"], "comments": [{"owner": {"reputation": 1786, "user_id": 1820650, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/ce47757627908a1013e0951158f4c2e6?s=128&d=identicon&r=PG", "display_name": "Dr.Avalanche", "link": "https://stackoverflow.com/users/1820650/dr-avalanche"}, "edited": false, "score": 1, "creation_date": 1472544143, "post_id": 39221941, "comment_id": 65781682, "body": "make life easier on yourself, WWW::Mechanize is a subclass of LWP::UserAgent, and takes care of all the low level stuff for you, letting you just &#39;browse&#39;"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1472545254, "post_id": 39221941, "comment_id": 65782410, "body": "While WWW::Mechanize is nice, it might be overkill because it way heavier than LWP::UserAgent. It really depends on the use-case."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1472545374, "post_id": 39221941, "comment_id": 65782494, "body": "How does it look if you do it in your browser? I suggest you inspect the headers of all the requests and responses from the initial one through the redirect until the final page, and take a close look at the cookies. Without seeing that, it&#39;s going to be hard to help here I believe. The solution might be as simple as reaching into the cookie jar and slightly altering the cookie&#39;s domain."}, {"owner": {"reputation": 4093, "user_id": 675462, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/4ce47f47105a3bd1ca4700f02b5deff1?s=128&d=identicon&r=PG", "display_name": "papaiatis", "link": "https://stackoverflow.com/users/675462/papaiatis"}, "edited": false, "score": 0, "creation_date": 1472545796, "post_id": 39221941, "comment_id": 65782731, "body": "If I manually set the cookies for the redirected domain as well, my code works as usual. However the redirected domain seems to be a random cdn server which is changing all the time. As you said I need to alter the cookie&#39;s domain through each redirect. I agree on WWW::Mechanize being overkill for my issue."}, {"owner": {"reputation": 19192, "user_id": 257635, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/El2tc.jpg?s=128&g=1", "display_name": "Chankey Pathak", "link": "https://stackoverflow.com/users/257635/chankey-pathak"}, "edited": false, "score": 0, "creation_date": 1472546885, "post_id": 39221941, "comment_id": 65783392, "body": "See <a href=\"http://www.perlmonks.org/?node_id=35085\" rel=\"nofollow noreferrer\">perlmonks.org/?node_id=35085</a>"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1472548237, "post_id": 39221941, "comment_id": 65784300, "body": "LWP  (and any browser) should check the cookies for the original domain and add them as headers to the HTTP message. After that the message may be redirected as required and the headers won&#39;t be changed. If you&#39;re seeing behaviour different from that then you have a bug, but we need far more detail to be able to help you."}], "answers": [{"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 4093, "user_id": 675462, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/4ce47f47105a3bd1ca4700f02b5deff1?s=128&d=identicon&r=PG", "display_name": "papaiatis", "link": "https://stackoverflow.com/users/675462/papaiatis"}, "edited": false, "score": 0, "creation_date": 1472653996, "post_id": 39234333, "comment_id": 65840584, "body": "@papaiatis, Why not?"}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 2, "last_activity_date": 1472654237, "last_edit_date": 1472654237, "creation_date": 1472580527, "answer_id": 39234333, "question_id": 39221941, "link": "https://stackoverflow.com/questions/39221941/how-to-maintain-cookies-during-redirects-using-perls-lwpuseragent/39234333#39234333", "title": "How to maintain cookies during redirects using perl&#39;s LWP::UserAgent?", "body": "<p>The following adds support for cookies to LWP::UserAgent.</p>\n\n<pre><code>my $ua = LWP::UserAgent-&gt;new( cookie_jar =&gt; {} );\n</code></pre>\n\n<p>It causes cookies returned in a response to be sent with subsequent matching requests, just like a browser does.</p>\n"}], "owner": {"reputation": 4093, "user_id": 675462, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/4ce47f47105a3bd1ca4700f02b5deff1?s=128&d=identicon&r=PG", "display_name": "papaiatis", "link": "https://stackoverflow.com/users/675462/papaiatis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 364, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1472654237, "creation_date": 1472544039, "question_id": 39221941, "link": "https://stackoverflow.com/questions/39221941/how-to-maintain-cookies-during-redirects-using-perls-lwpuseragent", "title": "How to maintain cookies during redirects using perl&#39;s LWP::UserAgent?", "body": "<p>The HTTP Request I used to send to a specific website is now getting redirected which eventually broke my code. I realized that the cookies are not working anymore for the redirected domain (of course). I read the docs of LWP but I did not find any related option to preserve/maintain cookies automatically. Is there an easy way to do it?</p>\n\n<p><em>Just for a side note: this behavior works out of the box using Python's Requests class.</em></p>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 466742, "user_id": 224671, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/c90de868a7e95d75bdfd6a906dfedac7?s=128&d=identicon&r=PG", "display_name": "kennytm", "link": "https://stackoverflow.com/users/224671/kennytm"}, "edited": false, "score": 0, "creation_date": 1472540807, "post_id": 39220858, "comment_id": 65779650, "body": "you only need a single backslash."}, {"owner": {"reputation": 920, "user_id": 4819884, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/5b96c68654d5ecce5ace521d7371fec5?s=128&d=identicon&r=PG&f=1", "display_name": "yonyon100", "link": "https://stackoverflow.com/users/4819884/yonyon100"}, "reply_to_user": {"reputation": 466742, "user_id": 224671, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/c90de868a7e95d75bdfd6a906dfedac7?s=128&d=identicon&r=PG", "display_name": "kennytm", "link": "https://stackoverflow.com/users/224671/kennytm"}, "edited": false, "score": 0, "creation_date": 1472540929, "post_id": 39220858, "comment_id": 65779724, "body": "I edited my question, it is only a single backslash in the first. my bad."}, {"owner": {"reputation": 15906, "user_id": 3527940, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/k1R45.jpg?s=128&g=1", "display_name": "jcaron", "link": "https://stackoverflow.com/users/3527940/jcaron"}, "edited": false, "score": 0, "creation_date": 1472540933, "post_id": 39220858, "comment_id": 65779727, "body": "Also you probably want to look into <code>\\b</code> and/or non-capturing groups <code>(?:whatever)</code> which would allow you to group alternatives."}, {"owner": {"reputation": 920, "user_id": 4819884, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/5b96c68654d5ecce5ace521d7371fec5?s=128&d=identicon&r=PG&f=1", "display_name": "yonyon100", "link": "https://stackoverflow.com/users/4819884/yonyon100"}, "edited": false, "score": 0, "creation_date": 1472545196, "post_id": 39220858, "comment_id": 65782364, "body": "I found a way to bypass this problem by removing the first char of <code>$word</code> and escaping <code>*</code> in the pattern, but if <code>$word = &quot;**.?FOO&quot;</code> for example, how do I create a <code>qr&#47;&#47;</code> with <code>$word</code> so that all the meta-characters are escaped?"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 2, "creation_date": 1472545653, "post_id": 39220858, "comment_id": 65782651, "body": "You can use <code>\\Q</code> and <code>\\E</code> to escape metacharacters."}], "answers": [{"tags": [], "owner": {"reputation": 253, "user_id": 2128733, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ebf5a899490dae76b3944ce5dd9677c5?s=128&d=identicon&r=PG", "display_name": "ltux", "link": "https://stackoverflow.com/users/2128733/ltux"}, "is_accepted": false, "score": 1, "last_activity_date": 1472545655, "creation_date": 1472545655, "answer_id": 39222395, "question_id": 39220858, "link": "https://stackoverflow.com/questions/39220858/pre-compiled-regex-with-special-characters-matching/39222395#39222395", "title": "Pre-compiled regex with special characters matching", "body": "<h3>Question 1:</h3>\n\n<pre><code>my $word = '*FOO';\nmy $pattern = qr/\\\\$word/;\n</code></pre>\n\n<p>is equivalent to</p>\n\n<pre><code>my $pattern = qr/\\\\*FOO/; # zero or more '\\' followed by 'FOO'\n</code></pre>\n\n<p>The <code>$word</code> is simply interpolated as is.</p>\n\n<p>To get something equivalent to</p>\n\n<pre><code>my $pattern = qr/\\*FOO/;\n</code></pre>\n\n<p>you should use</p>\n\n<pre><code>my $word = '*FOO';\nmy $pattern = qr/\\Q$word\\E/;\n</code></pre>\n\n<p>By default, an interpolated variable is considered a mini-regular expression, meta characters in the variable such as <code>*</code>, <code>+</code>, <code>?</code> are still interpreted as meta character. <code>\\Q...\\E</code> will add a backslash before any character not matching <code>/[A-Za-z_0-9]/</code>, thus any meta characters in the interpolated variable is interpreted as literal ones. Refer to <a href=\"http://perldoc.perl.org/functions/quotemeta.html\" rel=\"nofollow\">perldoc</a>.</p>\n\n<h3>Question 2</h3>\n\n<p>I tried</p>\n\n<pre><code>my $pattern = qr/[^a-zA-Z](\\*FOO)[^a-zA-Z]|^\\s*(\\*FOO)[^a-zA-Z]/;\nmy $line = '//FOO programming using stuff and things';\n\nif($line =~ m/$pattern/){\n    print \"$&amp;\\n\";\n}\nelse{\n    print \"No match!\";\n}\n</code></pre>\n\n<p>and it printed \"No match!\". I can't explain how you get it matched.</p>\n"}, {"tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": true, "score": 2, "last_activity_date": 1583826504, "last_edit_date": 1583826504, "creation_date": 1472545695, "answer_id": 39222407, "question_id": 39220858, "link": "https://stackoverflow.com/questions/39220858/pre-compiled-regex-with-special-characters-matching/39222407#39222407", "title": "Pre-compiled regex with special characters matching", "body": "<p>You do need to escape the <code>*</code>. One way to do it is by the <a href=\"http://perldoc.perl.org/functions/quotemeta.html\" rel=\"nofollow noreferrer\">quotemeta</a> <code>\\Q</code> operator:</p>\n\n<pre><code>use warnings;\nuse strict;\n\nmy $qr = qr/\\Q*FOO/;\n\nwhile (&lt;DATA&gt;) { print if /$qr/ }\n\n__DATA__\n//FOO programming using stuff and things\nhey *FOO.BAR\n</code></pre>\n\n<p>Note that this escapes all ASCII non-\"word\" characters through the rest of the pattern. If you need to limit its action to only a part of the pattern then stop it using <code>\\E</code>.  Please see linked docs.</p>\n\n<p>The above determines whether <code>*FOO</code> is in the line, regardless of whether it is a word or a part of one. It is not clear to me which is needed.  Once that is specified the pattern can be adjusted.</p>\n\n<p>Note that <code>/\\*FOO/</code> works, too. What you tried failed probably because of all the rest that you are trying to match, which purpose I do not understand.  If you only need to detect whether the pattern is present the above does it. if there is a more specific requirement please clarify.</p>\n\n<hr>\n\n<p>As for the examples: for me that string <code>//FOO...</code> is <em>not matched</em> by the main (first) <code>$pattern</code> you show.  The second one won't interpolate <code>$word</code> -- but is firstly much too convoluted.  The regex can really tie one in nasty knots when pushed; I suggest to keep it simple as much as possible.</p>\n"}], "owner": {"reputation": 920, "user_id": 4819884, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/5b96c68654d5ecce5ace521d7371fec5?s=128&d=identicon&r=PG&f=1", "display_name": "yonyon100", "link": "https://stackoverflow.com/users/4819884/yonyon100"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 143, "favorite_count": 0, "accepted_answer_id": 39222407, "answer_count": 2, "score": 1, "last_activity_date": 1583826504, "creation_date": 1472540559, "last_edit_date": 1472545236, "question_id": 39220858, "link": "https://stackoverflow.com/questions/39220858/pre-compiled-regex-with-special-characters-matching", "title": "Pre-compiled regex with special characters matching", "body": "<p>I'm trying to match if a word such as <code>*FOO</code> (* as a normal character) is in a line. My input is a C++ source code. I need to use a pre-compiled regex for this due to program flow requirements, so I tried the following:</p>\n\n<pre><code>$pattern = qr/[^a-zA-Z](\\*FOO)[^a-zA-Z]|^\\s*(\\*FOO)[^a-zA-Z]/;\n</code></pre>\n\n<p>And I use it like this:</p>\n\n<pre><code>if ($line =~ m/$pattern/) { ... }\n</code></pre>\n\n<p>It works and catches lines containing <code>*FOO</code> such as <code>hey *FOO.BAR</code> but also matches lines such as:</p>\n\n<pre><code>//FOO programming using stuff and things\n</code></pre>\n\n<p>which I want to ignore. What am I missing? Is <code>\\*</code> not the right way to escape <code>*</code> in a pre-compiled regex in perl? If <code>*FOO</code> is stored in <code>$word</code> and the pattern looks like this:</p>\n\n<pre><code>$pattern = qr/[^a-zA-Z](\\\\$word)[^a-zA-Z]|^\\s*(\\\\$word)[^a-zA-Z]/;\n</code></pre>\n\n<p>Is that different from the previous pattern? Because I tried both and the result seems to be the same.</p>\n\n<p>I found a way to bypass this problem by removing the first char of <code>$word</code> and escaping <code>*</code> in the pattern, but if <code>$word = \"**.?FOO\"</code> for example, how do I create a <code>qr//</code> with <code>$word</code> so that all the meta-characters are escaped?</p>\n"}, {"tags": ["perl", "web-services", "environment-variables"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1472547955, "post_id": 39220751, "comment_id": 65784094, "body": "Welcome to Stack Overflow. Unfortunately, your question does not make any sense. Please <a href=\"https://stackoverflow.com/posts/39220751/edit\">edit</a> and include at least the full command that you ran, and the full error message. On top of that, we might need to see the environment. It looks like it could be a simple typo, but what you have written in the question is incredibly unclear, so all we can do is make wild guesses. Please also take a moment to read the <a href=\"https://stackoverflow.com/tour\">faq</a> and take the <a href=\"https://stackoverflow.com/tour\">tour</a>. Thank you. :)"}, {"owner": {"reputation": 1, "user_id": 6430081, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/024346be7b853f3558583542bb197963?s=128&d=identicon&r=PG&f=1", "display_name": "Adharsh", "link": "https://stackoverflow.com/users/6430081/adharsh"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1472549183, "post_id": 39220751, "comment_id": 65784927, "body": "Thanks you. I found what the problem but I got another problem now. I might add another question."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1472550000, "post_id": 39220751, "comment_id": 65785451, "body": "When you do, try to be very specific. ;)"}, {"owner": {"reputation": 1, "user_id": 6430081, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/024346be7b853f3558583542bb197963?s=128&d=identicon&r=PG&f=1", "display_name": "Adharsh", "link": "https://stackoverflow.com/users/6430081/adharsh"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1472550753, "post_id": 39220751, "comment_id": 65785985, "body": "Sure :) i will try my best. Hope the admins here can bear with me till I improve :("}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1472551045, "post_id": 39220751, "comment_id": 65786220, "body": "If by <i>admins</i> you mean <i>moderators</i>, then there are none. You should really take a look at the <a href=\"https://stackoverflow.com/tour\">faq</a>. This is a community-moderated question and answer site. Other users vote on posts based on the quality and the usefulness for future readers. We can also vote to close a question if it is off-topic. The more you participate, the more reputation you get, and that gives you more privileges. We all want the quality of the site to be high. That&#39;s what sets us apart from old-fashioned forums. You don&#39;t need &quot;hi&quot; and &quot;thank you&quot;, but good examples are very valuable. :)"}, {"owner": {"reputation": 1, "user_id": 6430081, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/024346be7b853f3558583542bb197963?s=128&d=identicon&r=PG&f=1", "display_name": "Adharsh", "link": "https://stackoverflow.com/users/6430081/adharsh"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1472552030, "post_id": 39220751, "comment_id": 65786877, "body": "Okay. I understand now."}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 6430081, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/024346be7b853f3558583542bb197963?s=128&d=identicon&r=PG&f=1", "display_name": "Adharsh", "link": "https://stackoverflow.com/users/6430081/adharsh"}, "is_accepted": false, "score": 0, "last_activity_date": 1472549129, "creation_date": 1472549129, "answer_id": 39223628, "question_id": 39220751, "link": "https://stackoverflow.com/questions/39220751/error-ratlperl-is-not-recognized-as-a-internal-or-external-command/39223628#39223628", "title": "Error &quot;ratlperl is not recognized as a internal or external command&quot;", "body": "<p>The problem here was the PATH environmental variable. It has to pointed to System32 path of the local.</p>\n"}], "owner": {"reputation": 1, "user_id": 6430081, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/024346be7b853f3558583542bb197963?s=128&d=identicon&r=PG&f=1", "display_name": "Adharsh", "link": "https://stackoverflow.com/users/6430081/adharsh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 235, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1472549234, "creation_date": 1472540252, "last_edit_date": 1472549234, "question_id": 39220751, "link": "https://stackoverflow.com/questions/39220751/error-ratlperl-is-not-recognized-as-a-internal-or-external-command", "title": "Error &quot;ratlperl is not recognized as a internal or external command&quot;", "body": "<p>Ran a Perl command \"Perl pdi add2is -isdc 2/1095- -prodno \"CXC 101 999/1\" -rstate R1G09 -object ABC-115511 -objver A env -Accept</p>\n\n<p>( which is used to access a web service) in cmd of windows, got error \"ratlperl is not recognized as a internal or external command\"</p>\n\n<p>I had to login to the web services application before running any web service, which I am 100% sure is successfully logged in. I guess the problem is with my Environmental variables.. Kindly help.</p>\n"}, {"tags": ["perl", "exe"], "comments": [{"owner": {"reputation": 917, "user_id": 3014263, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rFh51.jpg?s=128&g=1", "display_name": "AbhiNickz", "link": "https://stackoverflow.com/users/3014263/abhinickz"}, "edited": false, "score": 0, "creation_date": 1472540955, "post_id": 39220197, "comment_id": 65779740, "body": "You could use <code>ps aux | grep name</code> to find out processid and then kill it."}], "answers": [{"tags": [], "owner": {"reputation": 144799, "user_id": 2836621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/suHg4.jpg?s=128&g=1", "display_name": "Mark Setchell", "link": "https://stackoverflow.com/users/2836621/mark-setchell"}, "is_accepted": true, "score": 2, "last_activity_date": 1472543515, "creation_date": 1472543515, "answer_id": 39221791, "question_id": 39220197, "link": "https://stackoverflow.com/questions/39220197/how-to-kill-a-process-using-its-name-in-perl-script-on-windows/39221791#39221791", "title": "How to kill a process using its name in perl script on windows", "body": "<p>Use <code>TASKKILL</code>, like this:</p>\n\n<pre><code>TASKKILL /IM &lt;NAME&gt; /F\n</code></pre>\n\n<p>You'll need to shell out to do it, but you seem to be doing that already to start it anyway.</p>\n"}], "owner": {"reputation": 167, "user_id": 5005698, "user_type": "registered", "accept_rate": 39, "profile_image": "https://graph.facebook.com/962075417175866/picture?type=large", "display_name": "Vishal Khemani", "link": "https://stackoverflow.com/users/5005698/vishal-khemani"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 609, "favorite_count": 0, "accepted_answer_id": 39221791, "answer_count": 1, "score": 0, "last_activity_date": 1472543515, "creation_date": 1472538358, "last_edit_date": 1472543391, "question_id": 39220197, "link": "https://stackoverflow.com/questions/39220197/how-to-kill-a-process-using-its-name-in-perl-script-on-windows", "title": "How to kill a process using its name in perl script on windows", "body": "<p>I am running a perl script which calls a batch file.\nThis batch file runs an exe( It was created by a console application in Visual Studio earlier).</p>\n\n<p>I want to kill this exe from the perl script later using its name.</p>\n\n<p>Could someone please help.</p>\n"}, {"tags": ["multithreading", "perl"], "comments": [{"owner": {"reputation": 18507, "user_id": 13317, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/47a9a5b4589057085336011863d2ee9a?s=128&d=identicon&r=PG", "display_name": "Kenster", "link": "https://stackoverflow.com/users/13317/kenster"}, "edited": false, "score": 1, "creation_date": 1472524077, "post_id": 39217642, "comment_id": 65774139, "body": "When the program crashes, is there any error message? What exactly does the error say?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1472580614, "post_id": 39217642, "comment_id": 65805791, "body": "Re &quot;<i>I used htop in linux to check how many processes are running, it seems only 3 processes are using. Isn&#39;t it supposed to create more threads?</i>&quot;, uh, threads aren&#39;t processes."}], "answers": [{"comments": [{"owner": {"reputation": 5, "user_id": 6772363, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/12a564b71d1e652bd4a8c293b9f4d932?s=128&d=identicon&r=PG&f=1", "display_name": "zufl", "link": "https://stackoverflow.com/users/6772363/zufl"}, "edited": false, "score": 0, "creation_date": 1472667332, "post_id": 39223941, "comment_id": 65848626, "body": "HI Sobrique, you are right about how my program got killed. I noticed that with my original code, the memory usages gets bigger and bigger and finally program crashed. I have modified my code according to your suggestions and also come with another design:"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "reply_to_user": {"reputation": 5, "user_id": 6772363, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/12a564b71d1e652bd4a8c293b9f4d932?s=128&d=identicon&r=PG&f=1", "display_name": "zufl", "link": "https://stackoverflow.com/users/6772363/zufl"}, "edited": false, "score": 0, "creation_date": 1472718080, "post_id": 39223941, "comment_id": 65867303, "body": "There&#39;s still a lot of unnecessary overhead to spawning a new thread per &#39;pair&#39;."}], "tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": false, "score": 0, "last_activity_date": 1472549920, "creation_date": 1472549920, "answer_id": 39223941, "question_id": 39217642, "link": "https://stackoverflow.com/questions/39217642/perl-multi-threading-code-killed-in-the-middle/39223941#39223941", "title": "Perl multi-threading code killed in the middle", "body": "<p>OK, stop for a moment - backtrack a bit, and rethink your understanding of threads.</p>\n\n<p>In <code>perl</code> a thread is <em>not</em> a lightweight thing, like you seem to be assuming. It's a full copy of your program. If you spin up 500 threads, you're going to exhaust your system resources in a real hurry. Also - thread startup is not a lightweight process. It's actually a bad idea to do what you're doing. (Although doing it via <code>fork()</code> isn't as much of a problem, if you really wanted to go that way). </p>\n\n<p>If I had to guess (and I do, because you haven't given us enough information) then I would guess your 'crash' was due to out of memory, and your process getting killed. <code>/var/log/messages</code> or similar should tell you. </p>\n\n<p>I don't know why <code>htop</code> isn't doing what you think - try <code>ps -eft</code> and see if that does it? </p>\n\n<p>However, I'd strongly urge a rewrite of your code - if you have a sequence of things to process that aren't coupled, then it would be MUCH more sensible to use <code>Thread::Queue</code> and a set of worker threads.</p>\n\n<p>Rewrite <code>thread_func</code> like so:</p>\n\n<pre><code>my $workers = 10; \nmy $work_q = Thread::Queue -&gt; new(); \n\nsub thread_func { \n   while ( my $pair = $work_q -&gt; dequeue ) { \n        ## all the messing around you do with each pair; \n   }\n}\n</code></pre>\n\n<p>In your main:</p>\n\n<pre><code>thread -&gt; create ( \\&amp;thread_func ) for 1..$workers; \n$work_q -&gt; enqueue ( @correlatedPttns ); \n$work_q -&gt; end; \nforeach my $thr ( threads -&gt; list ) { \n    $thr -&gt; join(); \n}\n</code></pre>\n\n<p>this will then start 10 workers, and each will work down your <code>work_q</code> one \"pair\" at a time. You can coalesce any results in a similar way with a results queue. </p>\n\n<p>I will also point out - maintaining a list of threads yourself is redundant, because <code>threads-&gt;list</code> will do that for you. </p>\n"}, {"tags": [], "owner": {"reputation": 5, "user_id": 6772363, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/12a564b71d1e652bd4a8c293b9f4d932?s=128&d=identicon&r=PG&f=1", "display_name": "zufl", "link": "https://stackoverflow.com/users/6772363/zufl"}, "is_accepted": false, "score": 0, "last_activity_date": 1472669064, "creation_date": 1472669064, "answer_id": 39256864, "question_id": 39217642, "link": "https://stackoverflow.com/questions/39217642/perl-multi-threading-code-killed-in-the-middle/39256864#39256864", "title": "Perl multi-threading code killed in the middle", "body": "<p>here is <strong>design 1</strong> according to your suggestions:</p>\n\n<pre><code>my $workers = Sys::CPU::cpu_count();\nmy $work_q = Thread::Queue -&gt; new();\n\nthreads-&gt;create (\\&amp;thread_func, \\@pttnIndexMap, \\@data, $cnt, $intervalOutput) for 1..$workers; \n$work_q -&gt; enqueue ( @correlatedPttns ); \n$work_q -&gt; end; \n\nforeach my $thr ( threads -&gt; list() )\n{    \n    $thr -&gt; join(); \n} \n</code></pre>\n\n<p>in the thread_func:</p>\n\n<pre><code>  sub thread_func\n  {\n    # omit here other stuffs\n    while ( my $pair = $work_q -&gt; dequeue() )\n    {\n         #get the element from @data (2D array) based on the $pair information and run processing\n    }\n  }\n</code></pre>\n\n<p>Here is <strong>Design 2</strong> based on limiting threads number of my original implementation:</p>\n\n<pre><code>my $number_of_cpus = Sys::CPU::cpu_count();\nmy $threadCnt = 0; \n\nforeach my $pair (@correlatedPttns)\n{    \n   # slice the data out\n    my @tmp = ();\n    for (my $x = 0; $x&lt;$cnt; $x++)\n    {\n        push @tmp,[ @{ $data[$x] } [ 0, @$pair[0], @$pair[1] ] ]; # epochtime, Pi, Pj\n    }\n\n    threads-&gt;create (\\&amp;thread_func, $pair, \\@pttnIndexMap, \\@tmp,$cnt, $intervalOutput);\n    $threadCnt++;\n\n    if ($threadCnt &gt;= $number_of_cpus)\n    {\n        $threadCnt = 0; \n        foreach my $thr ( threads -&gt; list() )\n        {\n            $thr -&gt; join(); \n        }\n    }\n\n}    \n\nforeach my $thr ( threads -&gt; list() )\n{    \n    $thr -&gt; join();\n}\n</code></pre>\n\n<p>Now both design work fine with the large dataset. However, I notice the big difference in terms of speed. <strong>Design 1 works much slower than design 2</strong>. In Design 1, I notice that it executes $workers threads, but each thread only uses &lt;30% of CPU. On the other hand, design 2 executes 3 threads each time, and each thread uses 100% CPU. </p>\n\n<p>The execution time for Design 1 is almost the same as sequential programming (without any multi-threading). Why? I notice that in Design 1, the @data (2d array) is used in the thread_func, each thread needs to access certain columns of the 2d array based on $pair information, will this slow down the multi-thread processing? In Design 2, I first slice those columns out before send it to thread_func, so that each thread is independent. </p>\n\n<p>Thanks a lot!!</p>\n"}], "owner": {"reputation": 5, "user_id": 6772363, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/12a564b71d1e652bd4a8c293b9f4d932?s=128&d=identicon&r=PG&f=1", "display_name": "zufl", "link": "https://stackoverflow.com/users/6772363/zufl"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 139, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1472669064, "creation_date": 1472521882, "question_id": 39217642, "link": "https://stackoverflow.com/questions/39217642/perl-multi-threading-code-killed-in-the-middle", "title": "Perl multi-threading code killed in the middle", "body": "<p>I have a piece of Perl multithread code as follows. I have two questions:</p>\n\n<ol>\n<li><p>the length of @correlatedPttns array is about 500. When executing, I used htop in linux to check how many processes are running, it seems only 3 processes are using. Isn't it supposed to create more threads?</p></li>\n<li><p>the program crashed in the middle, when it finishes about 140 $pairs. Why did it happened? If I run the same piece of code on a small number of @correlatedPttns, then it worked fine. </p></li>\n</ol>\n\n<p>Thanks!</p>\n\n<p>code:</p>\n\n<pre><code>my @threads = ();\nforeach my $pair (@correlatedPttns)\n{    \n   # slice the data out\n    my @tmp = ();\n    for (my $x = 0; $x&lt;$cnt; $x++)\n    {    \n        push @tmp,[ @{ $data[$x] } [ 0, @$pair[0], @$pair[1] ] ]; \n    }    \n   push (@threads, threads-&gt;create (\\&amp;thread_func, $pair, \\@pttnIndexMap, \\@tmp,$cnt, $intervalOutput));\n}\n\nforeach (@threads)\n{\n   $_-&gt;join(); # blocks until this thread exits\n}\n</code></pre>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 13399, "user_id": 716443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8d13509991dbbd5467f01f55988ae4e?s=128&d=identicon&r=PG", "display_name": "DavidO", "link": "https://stackoverflow.com/users/716443/davido"}, "edited": false, "score": 0, "creation_date": 1472530506, "post_id": 39216466, "comment_id": 65775433, "body": "So are we to consider a single string with many lines manifest by embedded newlines, or is this a multi-line file?"}], "answers": [{"comments": [{"owner": {"reputation": 7565, "user_id": 1021515, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/Z9QcP.jpg?s=128&g=1", "display_name": "mwp", "link": "https://stackoverflow.com/users/1021515/mwp"}, "reply_to_user": {"reputation": 27, "user_id": 5336791, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-28ZelRSiAxo/AAAAAAAAAAI/AAAAAAAACGs/3n92FXcfuok/photo.jpg?sz=128", "display_name": "Ian Chang", "link": "https://stackoverflow.com/users/5336791/ian-chang"}, "edited": false, "score": 0, "creation_date": 1472592569, "post_id": 39216732, "comment_id": 65811931, "body": "@IanChang You&#39;re welcome. Thank you for updating your question. I&#39;ve posted what I believe is a solution. Let me know if you&#39;d like any further assistance!"}], "tags": [], "owner": {"reputation": 7565, "user_id": 1021515, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/Z9QcP.jpg?s=128&g=1", "display_name": "mwp", "link": "https://stackoverflow.com/users/1021515/mwp"}, "is_accepted": false, "score": 0, "last_activity_date": 1472592530, "last_edit_date": 1472592530, "creation_date": 1472513773, "answer_id": 39216732, "question_id": 39216466, "link": "https://stackoverflow.com/questions/39216466/append-string-in-the-beginning-and-the-end-of-a-line-containing-certain-string/39216732#39216732", "title": "Append string in the beginning and the end of a line containing certain string", "body": "<p>Welcome to StackOverflow. We strive to help people solve problems in their existing code and learn languages, rather than simply answer one-off questions, the solutions to which can be easily found in 101 tutorials and documentation. The type of question you've posted doesn't leave a lot of room for learning, and doesn't do much to help future learners. It would help us greatly if you could post a more complete example, including what you've tried so far to get it working.</p>\n\n<p>All that being said, there are two main ways to prepend and append to a string in Perl: 1. the <a href=\"http://perldoc.perl.org/perlop.html#Additive-Operators\" rel=\"nofollow\">concatenation</a> operator, <code>.</code> and 2. string <a href=\"http://perldoc.perl.org/perlop.html#Quote-and-Quote-like-Operators\" rel=\"nofollow\">interpolation</a>. </p>\n\n<ol>\n<li><p>Concatenation</p>\n\n<p>Use a <code>.</code> to join two strings together. You can chain operations together to compose a longer string.</p>\n\n<pre><code>my $str = '%abc %efd';\n$str = '123 ' . $str . ' 456';\nsay $str; # prints \"123 %abc %efd 456\" with a trailing newline\n</code></pre></li>\n<li><p>Interpolation</p>\n\n<p>Enclose a string in double quotes to instruct Perl to interpolate (i.e. find and evaluate) any Perl-style variables enclosed within the string.</p>\n\n<pre><code>my $str = '%abc %efd';\n$str = \"123 $str 456\";\nsay $str; # prints \"123 %abc %efd 456\" with a trailing newline\n</code></pre></li>\n</ol>\n\n<p>You'll notice that in both examples we prepended and appended to the existing string. You can also create new variable(s) to hold the result(s) of these operations. Other methods of manipulating and building strings include the <code>printf</code> and <a href=\"http://perldoc.perl.org/functions/sprintf.html\" rel=\"nofollow\"><code>sprintf</code></a> functions, the <a href=\"http://perldoc.perl.org/functions/substr.html\" rel=\"nofollow\"><code>substr</code></a> function, the <a href=\"http://perldoc.perl.org/functions/join.html\" rel=\"nofollow\"><code>join</code></a> function, and <a href=\"http://perldoc.perl.org/perlre.html\" rel=\"nofollow\">regular expressions</a>, all of which you will encounter as you continue learning Perl. </p>\n\n<p>As far as looking to see if a string contains a certain substring before performing the operation, you can use the <a href=\"http://perldoc.perl.org/functions/index.html\" rel=\"nofollow\"><code>index</code></a> function or a regular expression:</p>\n\n<pre><code>if (index($str, '%abc %efd') &gt;= 0) {\n# or...\nif ($str =~ /%abc %efd/) {\n</code></pre>\n\n<p>Remember to <a href=\"http://perldoc.perl.org/strict.html\" rel=\"nofollow\"><code>use strict;</code></a> at the top of your Perl scripts and always (at least while you're learning) declare variables with <a href=\"http://perldoc.perl.org/functions/my.html\" rel=\"nofollow\"><code>my</code></a>. If you're having trouble with the <a href=\"http://perldoc.perl.org/functions/say.html\" rel=\"nofollow\"><code>say</code></a> function, you may need to add the statement <code>use feature 'say';</code> to the top of your script. </p>\n\n<p>You can find an index of excellent Perl tutorials at <a href=\"https://learn.perl.org/tutorials/\" rel=\"nofollow\">learn.perl.org</a>. Good luck and have fun!</p>\n\n<p><strong>UPDATE</strong> Here is (I believe) a complete answer to your revised question:</p>\n\n<pre><code>find . -type f -exec perl -i.bak -pe's/^(%abc)\\s+(\\S*)\\s+(%def;)$/**\\1 \\2 \\3**/'\n</code></pre>\n\n<p>This will modify the files in place and create backup files with the extension .bak. Keep in mind that the expression <code>\\S*</code> will only match non-whitespace characters; if you need to match strings that contain whitespace, you will need to update this expression (something like <code>.*?</code> might be workable for you). </p>\n"}, {"tags": [], "owner": {"reputation": 1217, "user_id": 6318325, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ATZyf.jpg?s=128&g=1", "display_name": "Ngoan Tran", "link": "https://stackoverflow.com/users/6318325/ngoan-tran"}, "is_accepted": false, "score": 0, "last_activity_date": 1472525803, "creation_date": 1472525803, "answer_id": 39218104, "question_id": 39216466, "link": "https://stackoverflow.com/questions/39216466/append-string-in-the-beginning-and-the-end-of-a-line-containing-certain-string/39218104#39218104", "title": "Append string in the beginning and the end of a line containing certain string", "body": "<p>In you case, you want to append string when line of file match the certain string, it means match and replace.</p>\n\n<p>Firstly, read each line of your input file.</p>\n\n<p>Secondly, check if it match with the string you want to append string into the beginning and the end.</p>\n\n<p>Then replace the match string by the new string which contain additional beginning string, the match string and additional end string.</p>\n\n<pre><code>my $input_file = 'your file name here';\nmy $search_string = '%abc %efd';\nmy $add_begin = '123';\nmy $add_end = '456';\n# Read file \nopen(my $IN, '&lt;', $input_file) or die \"cannot open file $input_file\";\n# Check each line of file\nwhile (my $row = &lt;$IN&gt;) {\n  chomp $row;\n  $row =~ s/^($search_string)$/$add_begin $1 $add_end/g;\n  print $row.\"\\n\";\n}\n</code></pre>\n\n<p>Try with input file as below:</p>\n\n<pre><code>%abc %efd\nasdahsd\n234234\n%abc\n%efd\n%abc%efd\n</code></pre>\n\n<p>You will receive the result as we expected:</p>\n\n<pre><code>123 %abc %efd 456\nasdahsd\n234234\n%abc\n%efd\n%abc%efd\n</code></pre>\n\n<p>Modify the code as your requirement and contact me if there's any issue.</p>\n"}, {"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user6572950"}, "is_accepted": false, "score": 0, "last_activity_date": 1472558588, "creation_date": 1472558588, "answer_id": 39226992, "question_id": 39216466, "link": "https://stackoverflow.com/questions/39216466/append-string-in-the-beginning-and-the-end-of-a-line-containing-certain-string/39226992#39226992", "title": "Append string in the beginning and the end of a line containing certain string", "body": "<p>Use <code>m</code> modifier to replacing beginning and ending with line by line.</p>\n\n<pre><code> s/^\\%abc/123 $&amp;/mg;\n s/\\%def$/ 456/mg;\n</code></pre>\n\n<blockquote>\n  <p>Used together, as /ms, they let the \".\" match any character whatsoever, while still allowing \"^\" and \"$\" to match, respectively, just after and just before newlines within the string. <a href=\"http://perldoc.perl.org/perlre.html\" rel=\"nofollow\">source</a></p>\n</blockquote>\n"}], "owner": {"reputation": 27, "user_id": 5336791, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-28ZelRSiAxo/AAAAAAAAAAI/AAAAAAAACGs/3n92FXcfuok/photo.jpg?sz=128", "display_name": "Ian Chang", "link": "https://stackoverflow.com/users/5336791/ian-chang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 3985, "favorite_count": 0, "answer_count": 3, "score": -1, "last_activity_date": 1472592530, "creation_date": 1472511833, "last_edit_date": 1472591332, "question_id": 39216466, "link": "https://stackoverflow.com/questions/39216466/append-string-in-the-beginning-and-the-end-of-a-line-containing-certain-string", "title": "Append string in the beginning and the end of a line containing certain string", "body": "<p>all\nI want to know how to append string in the beginning and the end of a line containing certain string using perl?</p>\n\n<p>So for example, my line contains:\n%abc %efd;\nand I want to append 123 at the beginning of the line and 456 at the end of the line, so it would look like this:</p>\n\n<p>123 %abc %efd 456</p>\n\n<p>8/30/16 UPDATE--------------------------------\nSo far I have done something like this:</p>\n\n<p>foreach file (<code>find . -type f</code>)\nperl -ne 's/^\\%abc\\s+(\\S*)/**\\%abc $1/; print;' $file > tmp; mv tmp $file\nend</p>\n\n<p>foreach file (<code>find . -type f</code>)\nperl -ne 's/$\\%def\\;\\s+(\\S*)/\\%def\\;**\\n $1/; print;' $file > tmp; mv tmp $file\nend</p>\n\n<p>so this does pretty well except that when abc and def are not in one string.\nfor example:</p>\n\n<p>%abc <br>\nsomething something something <br>\n%def <br></p>\n\n<p>this would turn out to be \n<strong>%abc <br>\nsomething something something <br>\n%def;</strong> <br></p>\n\n<p>which is not what I want.</p>\n\n<p>Thank you</p>\n"}, {"tags": ["perl", "activeperl"], "comments": [{"owner": {"reputation": 188, "user_id": 5905963, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/72082d7f3fad17922d38870eb1675927?s=128&d=identicon&r=PG&f=1", "display_name": "KeepLearn", "link": "https://stackoverflow.com/users/5905963/keeplearn"}, "edited": false, "score": 0, "creation_date": 1472508249, "post_id": 39215701, "comment_id": 65770374, "body": "OS is Redhat Linux"}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1472508765, "post_id": 39215701, "comment_id": 65770514, "body": "Why not just use the version of perl that comes with Redhat?"}, {"owner": {"reputation": 188, "user_id": 5905963, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/72082d7f3fad17922d38870eb1675927?s=128&d=identicon&r=PG&f=1", "display_name": "KeepLearn", "link": "https://stackoverflow.com/users/5905963/keeplearn"}, "reply_to_user": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1472560277, "post_id": 39215701, "comment_id": 65792252, "body": "Currently I am working on Migration project. So lot of scripts are using ActivePerl so I want to install this."}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1472566400, "post_id": 39215701, "comment_id": 65796728, "body": "As long as you use the same version number, your scripts will work fine on non-ActivePerl. ActivePerl is almost exclusively used on Windows because most *nix operating systems (including Mac OS X) come with perl pre-installed. If you want to install a different version of perl on *nix, <a href=\"https://perlbrew.pl/\" rel=\"nofollow noreferrer\">perlbrew</a> is the easiest option."}, {"owner": {"reputation": 188, "user_id": 5905963, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/72082d7f3fad17922d38870eb1675927?s=128&d=identicon&r=PG&f=1", "display_name": "KeepLearn", "link": "https://stackoverflow.com/users/5905963/keeplearn"}, "reply_to_user": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1472588891, "post_id": 39215701, "comment_id": 65810189, "body": "Thanks for the information. I am trying with non-ActivePerl. Looks like it is working but some of the modules are missing like sendmail. Please let me know how to install particular module &quot;Mail::Sendmail&quot;. I am new to perl."}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1472589428, "post_id": 39215701, "comment_id": 65810463, "body": "If you&#39;re using the system perl, it&#39;s best to use the package manager. On Redhat that would be yum or dnf. Package names have the form perl-Module-Name, so to install Mail::Sendmail, run <code>yum install perl-Mail-Sendmail</code>. Not all CPAN modules are available as RPMs, though, so I would recommend installing another version of perl in your home directory using perlbrew; then you can install modules using the cpan command, e.g. <code>cpan Mail::Sendmail</code>."}, {"owner": {"reputation": 188, "user_id": 5905963, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/72082d7f3fad17922d38870eb1675927?s=128&d=identicon&r=PG&f=1", "display_name": "KeepLearn", "link": "https://stackoverflow.com/users/5905963/keeplearn"}, "reply_to_user": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1472591547, "post_id": 39215701, "comment_id": 65811479, "body": "Thanks for info. Yes lot of modules are missing. I am not sure what all the modules need to install. The project is Migrating AIX server to Linux."}, {"owner": {"reputation": 188, "user_id": 5905963, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/72082d7f3fad17922d38870eb1675927?s=128&d=identicon&r=PG&f=1", "display_name": "KeepLearn", "link": "https://stackoverflow.com/users/5905963/keeplearn"}, "reply_to_user": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1472591586, "post_id": 39215701, "comment_id": 65811491, "body": "Right now I am getting the following error:Loading DB routines from perl5db.pl version 1.32 Editor support available.  Enter h or <code>h h&#39; for help, or </code>man perldebug&#39; for more help.  BEGIN not safe after errors--compilation aborted at /usr/share/perl5/Carp/Heavy.pm line 11, &lt;DATA&gt; line 522. Compilation failed in require at /usr/share/perl5/Carp.pm line 33, &lt;DATA&gt; line 522. Debugged program terminated.  Use q to quit or R to restart,   use o inhibit_exit to avoid stopping after program termination,   h q, h R or h o to get additional info."}, {"owner": {"reputation": 188, "user_id": 5905963, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/72082d7f3fad17922d38870eb1675927?s=128&d=identicon&r=PG&f=1", "display_name": "KeepLearn", "link": "https://stackoverflow.com/users/5905963/keeplearn"}, "reply_to_user": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1472592000, "post_id": 39215701, "comment_id": 65811684, "body": "which one need to install: yum list perl-* | grep -i carp perl-Carp-Always.noarch        0.09-2.el6   rhel-x86_64-server-6-datacenter-epel perl-Carp-Assert.noarch        0.20-4.el6   rhel-x86_64-server-6-datacenter-epel perl-Carp-Assert-More.noarch   1.12-6.el6   rhel-x86_64-server-6-datacenter-epel perl-Carp-Clan.noarch          6.03-2.el6   rhel-x86_64-server-6-datacenter perl-Carp-Fix-1_25.noarch      1.000001-3.el6 perl-Test-Carp.noarch          0.2-2.el6    rhel-x86_64-server-6-datacenter-epel"}], "answers": [{"comments": [{"owner": {"reputation": 188, "user_id": 5905963, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/72082d7f3fad17922d38870eb1675927?s=128&d=identicon&r=PG&f=1", "display_name": "KeepLearn", "link": "https://stackoverflow.com/users/5905963/keeplearn"}, "edited": false, "score": 0, "creation_date": 1472560347, "post_id": 39216446, "comment_id": 65792302, "body": "Hi ToofHurtz, Thanks for your reply. May I know what are those other methods. I think its not possible to update the OS."}, {"owner": {"reputation": 41, "user_id": 6232905, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ea5a7728ba9df778c5b7e1a4de95de3?s=128&d=identicon&r=PG&f=1", "display_name": "ToofHurtz", "link": "https://stackoverflow.com/users/6232905/toofhurtz"}, "reply_to_user": {"reputation": 188, "user_id": 5905963, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/72082d7f3fad17922d38870eb1675927?s=128&d=identicon&r=PG&f=1", "display_name": "KeepLearn", "link": "https://stackoverflow.com/users/5905963/keeplearn"}, "edited": false, "score": 0, "creation_date": 1472577090, "post_id": 39216446, "comment_id": 65803905, "body": "Upgrade the glibc as per the red hat article. Also what version of Perl are you running?"}], "tags": [], "owner": {"reputation": 41, "user_id": 6232905, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ea5a7728ba9df778c5b7e1a4de95de3?s=128&d=identicon&r=PG&f=1", "display_name": "ToofHurtz", "link": "https://stackoverflow.com/users/6232905/toofhurtz"}, "is_accepted": true, "score": 0, "last_activity_date": 1472511714, "creation_date": 1472511714, "answer_id": 39216446, "question_id": 39215701, "link": "https://stackoverflow.com/questions/39215701/activeperl-installation-error/39216446#39216446", "title": "ActivePerl Installation error", "body": "<p>Sounds like you are on an older version linux with its corresponding Glibc that is not new enough to run the perl binary. Updating your OS would be ideal, but if that isn't possible, you can try other methods, note some of these can be a bit tricky.</p>\n\n<p>RedHat has an article on upgrading glibc:  <a href=\"http://developers.redhat.com/blog/2016/02/17/upgrading-the-gnu-c-library-within-red-hat-enterprise-linux/\" rel=\"nofollow\">http://developers.redhat.com/blog/2016/02/17/upgrading-the-gnu-c-library-within-red-hat-enterprise-linux/</a></p>\n\n<p>A previous issue (was on ORACLE linux) sounds like it might be related is here: \n<a href=\"https://community.activestate.com/node/12912\" rel=\"nofollow\">https://community.activestate.com/node/12912</a></p>\n"}], "owner": {"reputation": 188, "user_id": 5905963, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/72082d7f3fad17922d38870eb1675927?s=128&d=identicon&r=PG&f=1", "display_name": "KeepLearn", "link": "https://stackoverflow.com/users/5905963/keeplearn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 830, "favorite_count": 0, "accepted_answer_id": 39216446, "answer_count": 1, "score": 0, "last_activity_date": 1472511714, "creation_date": 1472507202, "question_id": 39215701, "link": "https://stackoverflow.com/questions/39215701/activeperl-installation-error", "title": "ActivePerl Installation error", "body": "<p>Hi, I tried to install ActivePerl on Linux ( 64 bit ). I got the following error.</p>\n\n<p>perl/bin/perl: /lib64/libc.so.6: version `GLIBC_2.14' not found (required by perl/bin/perl)</p>\n\n<p>Any one faced this issue?</p>\n\n<p>Thanks,\nChaitanya</p>\n"}, {"tags": ["apache", "perl", "mod-perl", "mod-perl2"], "comments": [{"owner": {"reputation": 927, "user_id": 5403907, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/F3lnS.jpg?s=128&g=1", "display_name": "mbethke", "link": "https://stackoverflow.com/users/5403907/mbethke"}, "edited": false, "score": 2, "creation_date": 1473128777, "post_id": 39215504, "comment_id": 66010677, "body": "I&#39;m no expert on mod_perl2 but generally this looks like something you&#39;d use exceptions for. Inside do_post_response(), use <code>die &quot;We have a situation...&quot;;</code> and catch this in handler() using an <code>eval</code> block or even better using a module like <code>Try::Tiny</code>. Add some <code>Exception::Class</code> if you need to differentiate your custom exceptions from others that may occur as a result of other uncaught failures."}], "answers": [{"comments": [{"owner": {"reputation": 3208, "user_id": 2162673, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/9XSFy.jpg?s=128&g=1", "display_name": "Francisco Zarabozo", "link": "https://stackoverflow.com/users/2162673/francisco-zarabozo"}, "edited": false, "score": 0, "creation_date": 1473523224, "post_id": 39421395, "comment_id": 66179259, "body": "I tried exit before asking this question. It doesn&#39;t work, it doesn&#39;t make the handler return what it needs to return, it&#39;s the same as calling a die."}, {"owner": {"reputation": 1419, "user_id": 2137931, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e3d3ef09dfac1974cde73014c4e07e3f?s=128&d=identicon&r=PG", "display_name": "Daniel Wisehart", "link": "https://stackoverflow.com/users/2137931/daniel-wisehart"}, "reply_to_user": {"reputation": 3208, "user_id": 2162673, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/9XSFy.jpg?s=128&g=1", "display_name": "Francisco Zarabozo", "link": "https://stackoverflow.com/users/2162673/francisco-zarabozo"}, "edited": false, "score": 0, "creation_date": 1473536126, "post_id": 39421395, "comment_id": 66183159, "body": "Then you have another problem in your code or your mod_perl has been modified.  mod_perl overrides exit, as explained in the docs I linked."}, {"owner": {"reputation": 3208, "user_id": 2162673, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/9XSFy.jpg?s=128&g=1", "display_name": "Francisco Zarabozo", "link": "https://stackoverflow.com/users/2162673/francisco-zarabozo"}, "edited": false, "score": 0, "creation_date": 1473536406, "post_id": 39421395, "comment_id": 66183241, "body": "Yes, it overrides exit, because you are in a persistent interpreter and you don&#39;t want it to really exit. If you use the real exit, then you actually kill the Apache thread. However, the fact that it overrides exit just terminates the current function call, but it doesn&#39;t return anything to Apache, and that&#39;s the problem, Apache needs an actual response or it takes it as a failure in the request."}, {"owner": {"reputation": 1419, "user_id": 2137931, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e3d3ef09dfac1974cde73014c4e07e3f?s=128&d=identicon&r=PG", "display_name": "Daniel Wisehart", "link": "https://stackoverflow.com/users/2137931/daniel-wisehart"}, "reply_to_user": {"reputation": 3208, "user_id": 2162673, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/9XSFy.jpg?s=128&g=1", "display_name": "Francisco Zarabozo", "link": "https://stackoverflow.com/users/2162673/francisco-zarabozo"}, "edited": false, "score": 0, "creation_date": 1473548676, "post_id": 39421395, "comment_id": 66185913, "body": "You could override CORE::GLOBAL::exit with a modified version of ModPerl::Util::exit that returns a value to Apache, but you are going to have to catch each place Apache calls into mod_perl and there is possibly going to be an exit to setup the return."}], "tags": [], "owner": {"reputation": 1419, "user_id": 2137931, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e3d3ef09dfac1974cde73014c4e07e3f?s=128&d=identicon&r=PG", "display_name": "Daniel Wisehart", "link": "https://stackoverflow.com/users/2137931/daniel-wisehart"}, "is_accepted": false, "score": 2, "last_activity_date": 1473467757, "creation_date": 1473467757, "answer_id": 39421395, "question_id": 39215504, "link": "https://stackoverflow.com/questions/39215504/close-response-under-mod-perl-2/39421395#39421395", "title": "Close response under mod_perl 2", "body": "<p>I think you are still fine to call exit() because mod_perl overrides what exit does:</p>\n\n<blockquote>\n  <p><strong>exit</strong></p>\n  \n  <p>In the normal Perl code exit() is used to stop the program flow and exit the Perl interpreter. However under mod_perl we only want the stop the program flow without killing the Perl interpreter.</p>\n  \n  <p>You should take no action if your code includes exit() calls and it's OK to continue using them. mod_perl worries to override the exit() function with its own version which stops the program flow, and performs all the necessary cleanups, but doesn't kill the server. This is done by overriding:</p>\n  \n  <p>*CORE::GLOBAL::exit = \\&amp;ModPerl::Util::exit;</p>\n</blockquote>\n\n<p><a href=\"https://perl.apache.org/docs/2.0/user/coding/coding.html\" rel=\"nofollow\">https://perl.apache.org/docs/2.0/user/coding/coding.html</a></p>\n"}], "owner": {"reputation": 3208, "user_id": 2162673, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/9XSFy.jpg?s=128&g=1", "display_name": "Francisco Zarabozo", "link": "https://stackoverflow.com/users/2162673/francisco-zarabozo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 206, "favorite_count": 0, "answer_count": 1, "score": 14, "last_activity_date": 1473467757, "creation_date": 1472506083, "last_edit_date": 1472524985, "question_id": 39215504, "link": "https://stackoverflow.com/questions/39215504/close-response-under-mod-perl-2", "title": "Close response under mod_perl 2", "body": "<p>I'm trying to find out if there's a way to complete a response under mod_perl 2 without returning to the main handler. Haven't been able to find a method for that in the docs so far. The following is an example of what I'm trying to achieve:</p>\n\n<pre><code>#!/usr/bin/perl\n# This is some mod_perl handler\nuse strict;\nuse warnings;\nuse Apache2::Const ':common';\n\nsub handler {\n    my $r = shift;\n    if ($r-&gt;method eq 'POST') {\n        # just to do something as example\n        do_post_response($r);\n    }\n    $r-&gt;content_type('text/plain');\n    print \"Thank you, goodbye.\";\n    return Apache2::Const::OK;\n}\n\nsub do_post_response {\n    my $r = shift;\n    unless (check_somthing()) {\n        # Suppose I find a situation that requires\n        # a different response than normal...\n        $r-&gt;content_type('text/plain');\n        print \"We have a situation...\";\n        $r-&gt;something_to_finish_the_request_immediatly(Apache2::Const::OK);\n    }\n}\n</code></pre>\n\n<p>In a regular Perl script, running as stand alone or under mod_cgi, I could just <code>exit()</code> with the new response, but under <code>mod_perl</code> I need to return something in the original <code>handler</code>subroutine. This is leading me to keep track of a whole chain of calls where all of them have to return something until I get back to the main <code>handler</code>.</p>\n\n<p>For example, instead of:</p>\n\n<pre><code>unless (check_something()) { ...\n</code></pre>\n\n<p>I need to do things like:</p>\n\n<pre><code>my $check = check_something();\nreturn $check if $check;\n</code></pre>\n\n<p>and I also have to do something similar in the main handler, which is quite ungly for some situation handlings.</p>\n\n<p>Is there a way to close the request when inside a nested call, just like what I tried to illustrate with my example?</p>\n\n<p><strong>EDIT:</strong> I've found that I can call a <code>goto LABEL</code> and place that label just before the last return in the main <code>handler</code>subroutine. It works, but still feels like a dirty hack. I really hope there's a nicer way.</p>\n"}, {"tags": ["perl", "plot", "gnuplot"], "comments": [{"owner": {"reputation": 2310, "user_id": 380329, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/f2971b8caa637f5949413f0da1ce26a8?s=128&d=identicon&r=PG", "display_name": "SSilk", "link": "https://stackoverflow.com/users/380329/ssilk"}, "reply_to_user": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1472503778, "post_id": 39214507, "comment_id": 65768644, "body": "Thanks for the suggestion, I&#39;ll see if the solution discussed there works for me. One challenge for me is the script I&#39;m writing gets called by another main script which is handling STDIN/OUT so all the printing etc I do is to a logfile using functions provided by that main script. This has some weird effects in practice, e.g. if I use &lt;STDIN&gt; to pause for a keyhit, it locks up the main script. That&#39;s why I was hoping to get the output of plot2d in some way other than messing around with STDIN/OUT redirection."}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1472506559, "post_id": 39214507, "comment_id": 65769787, "body": "Never mind, I was wrong. ikegami&#39;s answer is way simpler."}], "answers": [{"comments": [{"owner": {"reputation": 2310, "user_id": 380329, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/f2971b8caa637f5949413f0da1ce26a8?s=128&d=identicon&r=PG", "display_name": "SSilk", "link": "https://stackoverflow.com/users/380329/ssilk"}, "edited": false, "score": 0, "creation_date": 1472570712, "post_id": 39215484, "comment_id": 65799990, "body": "Thanks, this looks promising! I didn&#39;t realize you could set the output file to a text file, but it appears to work if you&#39;re using <code>terminal dumb</code>. I&#39;ll do some experimenting and see if I hit any problems."}, {"owner": {"reputation": 2310, "user_id": 380329, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/f2971b8caa637f5949413f0da1ce26a8?s=128&d=identicon&r=PG", "display_name": "SSilk", "link": "https://stackoverflow.com/users/380329/ssilk"}, "edited": false, "score": 0, "creation_date": 1472674950, "post_id": 39215484, "comment_id": 65852739, "body": "Yup, that worked great. Also for anyone else doing this, if you&#39;re not worried about multiple instances of your script fighting over the same file, you can use the built in <code>time</code> function to get a fairly unique timestamp and use that as a filename."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 2310, "user_id": 380329, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/f2971b8caa637f5949413f0da1ce26a8?s=128&d=identicon&r=PG", "display_name": "SSilk", "link": "https://stackoverflow.com/users/380329/ssilk"}, "edited": false, "score": 0, "creation_date": 1472678987, "post_id": 39215484, "comment_id": 65854613, "body": "Or use File::Temp as I suggested. It will also ensure the temporary file gets erased if possible. F::T is core, and is even used by Chart::Gnuplot"}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 2, "last_activity_date": 1472506019, "creation_date": 1472506019, "answer_id": 39215484, "question_id": 39214507, "link": "https://stackoverflow.com/questions/39214507/perl-chartgnuplot-access-ascii-output-of-plot2d/39215484#39215484", "title": "Perl Chart::Gnuplot - access ASCII output of plot2d", "body": "<p>Create a temporary file (say using <a href=\"http://search.cpan.org/perldoc?File::Temp\" rel=\"nofollow\">File::Temp</a>) and pass its path to the constructor's <code>output</code> option. You can collect the output from that temporary file.</p>\n"}], "owner": {"reputation": 2310, "user_id": 380329, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/f2971b8caa637f5949413f0da1ce26a8?s=128&d=identicon&r=PG", "display_name": "SSilk", "link": "https://stackoverflow.com/users/380329/ssilk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 181, "favorite_count": 0, "accepted_answer_id": 39215484, "answer_count": 1, "score": 2, "last_activity_date": 1472506019, "creation_date": 1472501865, "question_id": 39214507, "link": "https://stackoverflow.com/questions/39214507/perl-chartgnuplot-access-ascii-output-of-plot2d", "title": "Perl Chart::Gnuplot - access ASCII output of plot2d", "body": "<p>I'm using the Perl module Chart::Gnuplot to produce some ASCII plots with <code>terminal 'dumb'</code>. </p>\n\n<p>Instead of having the function plot2d directly print the plot results I would like to capture the nicely formatted ASCII plot in a temporary variable so I can print it later. </p>\n\n<p>Here is a MWE of what I'm doing, showing what works and what does not. </p>\n\n<pre><code>use strict;\nuse warnings;\nuse Chart::Gnuplot;\n\nmy @xvals=(1...10);\nmy @yvals=(1...10);\n\n\nmy $chart = Chart::Gnuplot-&gt;new( \n    terminal=&gt;'dumb',\n    xrange =&gt; [0, 10], \n    yrange =&gt; [0, 10], \n);\n\nmy $dataset = Chart::Gnuplot::DataSet-&gt;new(\n    style =&gt; \"dots\",    \n    xdata =&gt; \\@xvals,\n    ydata =&gt; \\@yvals\n\n);\n\n$chart-&gt;plot2d($dataset);                  # This works\n\n\nmy $textplot = $chart-&gt;plot2d($dataset);   # This does not work, nor did I expect it to\nprint($textplot);                          # Prints a hash ref like \"Chart::Gnuplot=HASH(0x6000cbb80)\"\n</code></pre>\n\n<p>As I mentioned, I didn't expect plot2d to directly output the plot, but I'm wondering if there is some method/function/whatever that would allow me to do this. Can I tell plot2d to plot to a string variable instead of STDOUT? </p>\n\n<p>Thanks! </p>\n"}, {"tags": ["html", "mysql", "database", "forms", "perl"], "comments": [{"owner": {"reputation": 793701, "user_id": 19068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d2d3229ed1961d2bd81853242493247?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/19068/quentin"}, "edited": false, "score": 1, "creation_date": 1472500775, "post_id": 39214169, "comment_id": 65767178, "body": "If you&#39;re running it on a Godaddy hosting account, then you need to install the module on the Godaddy computer, not your own."}, {"owner": {"reputation": 793701, "user_id": 19068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d2d3229ed1961d2bd81853242493247?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/19068/quentin"}, "edited": false, "score": 0, "creation_date": 1472500823, "post_id": 39214169, "comment_id": 65767193, "body": "<a href=\"https://uk.godaddy.com/help/can-i-add-perl-modules-to-my-hosting-account-1488\" rel=\"nofollow noreferrer\">uk.godaddy.com/help/&hellip;</a>"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1472522044, "post_id": 39214169, "comment_id": 65773700, "body": "You can&#39;t send an HTTP status line from CGI code. You can set the status using a <code>Status</code> header, but if you don&#39;t specify one then it defaults to <code>200</code>. To send that explicitly you would <code>print &quot;Status: 200 OK\\n&quot;</code> but there is no need, and the only required header is <code>Content-Type</code>, which should be followed by <i>two</i> newlines, not three."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1472522165, "post_id": 39214169, "comment_id": 65773723, "body": "<code>my $o = new CGI</code> won&#39;t work because you have no <code>use CGI</code>. You can print your <code>Content-Type</code> header using just <code>print $o-&gt;header</code>."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 5232596, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/fee77eac99b670e794a226435a3c3384?s=128&d=identicon&r=PG&f=1", "display_name": "TonyaL", "link": "https://stackoverflow.com/users/5232596/tonyal"}, "edited": false, "score": 0, "creation_date": 1472507169, "post_id": 39214307, "comment_id": 65770008, "body": "I am using ActiveState - when I enter that command in the command prompt it says that there are no missing packages to install. When I look in the Perl Package Manager, I can see DBD-mysql in the list. Is there something special I have to do to get that package into my godaddy web root folder besides the &quot;use&quot; statement in my .pl file?"}, {"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "reply_to_user": {"reputation": 1, "user_id": 5232596, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/fee77eac99b670e794a226435a3c3384?s=128&d=identicon&r=PG&f=1", "display_name": "TonyaL", "link": "https://stackoverflow.com/users/5232596/tonyal"}, "edited": false, "score": 0, "creation_date": 1472513546, "post_id": 39214307, "comment_id": 65771812, "body": "@TonyaL When you look in PPM located <i>where</i>?"}, {"owner": {"reputation": 1, "user_id": 5232596, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/fee77eac99b670e794a226435a3c3384?s=128&d=identicon&r=PG&f=1", "display_name": "TonyaL", "link": "https://stackoverflow.com/users/5232596/tonyal"}, "edited": false, "score": 0, "creation_date": 1472516271, "post_id": 39214307, "comment_id": 65772486, "body": "In the list of packages - I even also marked it then installed it. I called godaddy, and they said if I switched to the Linux type of account it should fix the problem. They deleted old account, started new one, I re-uploaded everything (and changed the host and sign in info in the code). I&#39;m no longer getting that error - but now I&#39;m getting a 500 internal error msg. Head -&gt; desk."}, {"owner": {"reputation": 61508, "user_id": 78259, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/844c572938eaad1e44eb084fb39416f9?s=128&d=identicon&r=PG", "display_name": "Chas. Owens", "link": "https://stackoverflow.com/users/78259/chas-owens"}, "reply_to_user": {"reputation": 1, "user_id": 5232596, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/fee77eac99b670e794a226435a3c3384?s=128&d=identicon&r=PG&f=1", "display_name": "TonyaL", "link": "https://stackoverflow.com/users/5232596/tonyal"}, "edited": false, "score": 0, "creation_date": 1472652665, "post_id": 39214307, "comment_id": 65839579, "body": "@TonyaL Ah, I see your problem, you are installing Perl modules on your machine, not in your program. Copying your program up to a server won&#39;t take the modules with it.  You need to install modules on the server as well, or use <a href=\"http://search.cpan.org/dist/App-FatPacker/lib/App/FatPacker.pm\" rel=\"nofollow noreferrer\">App::Fatpacker</a> or <a href=\"http://search.cpan.org/dist/PAR/lib/PAR.pm\" rel=\"nofollow noreferrer\">PAR</a> to bundle your dependencies with your program."}], "tags": [], "owner": {"reputation": 61508, "user_id": 78259, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/844c572938eaad1e44eb084fb39416f9?s=128&d=identicon&r=PG", "display_name": "Chas. Owens", "link": "https://stackoverflow.com/users/78259/chas-owens"}, "is_accepted": false, "score": -1, "last_activity_date": 1472501129, "last_edit_date": 1495540301, "creation_date": 1472501129, "answer_id": 39214307, "question_id": 39214169, "link": "https://stackoverflow.com/questions/39214169/sending-data-from-web-form-to-mysql-database-with-perl/39214307#39214307", "title": "Sending data from web form to MySQL database with Perl", "body": "<p>The error you are getting is saying that DBD::mysql isn't installed where the instance of <code>perl</code> you are running is expecting it.  Do you know if you are using ActiveState Perl, Strawberry Perl, or some other distribution?</p>\n\n<p>With ActiveState, you are probably best served by using its repository of precompiled packages: ppm.  The command to install a module is something like:</p>\n\n<pre><code>ppm install DBD::mysql\n</code></pre>\n\n<p>If you are using Strawberry Perl, then see this <a href=\"https://stackoverflow.com/questions/6643939/installing-modules-using-strawberry-perl\">question</a>.</p>\n"}], "owner": {"reputation": 1, "user_id": 5232596, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/fee77eac99b670e794a226435a3c3384?s=128&d=identicon&r=PG&f=1", "display_name": "TonyaL", "link": "https://stackoverflow.com/users/5232596/tonyal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 334, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1472522364, "creation_date": 1472500571, "last_edit_date": 1472522364, "question_id": 39214169, "link": "https://stackoverflow.com/questions/39214169/sending-data-from-web-form-to-mysql-database-with-perl", "title": "Sending data from web form to MySQL database with Perl", "body": "<p>I'm trying to make an address book that takes the data entered by a user in a form, and then sends it to a table in a database. I have no idea if I'm doing it right since I haven't found a whole example of html for and perl code - just snippets. I'm getting an error (I'll post it after the code).</p>\n\n<pre><code>&lt;!doctype html&gt;\n&lt;html lang=\"en\"&gt;\n    &lt;head&gt;\n      &lt;meta charset=\"utf-8\"&gt;\n      &lt;title&gt;Address Book&lt;/title&gt;\n   &lt;link rel=\"stylesheet\" href=\"stylesheet.css\"&gt;\n &lt;/head&gt;\n\n&lt;body&gt;\n&lt;h2&gt;Address Book&lt;/h2&gt;\n&lt;form action=\"test2.pl\" name=\"myForm\" method=\"post\"&gt;\n    &lt;fieldset&gt;\n        &lt;legend&gt;Contact Details&lt;/legend&gt;\n        &lt;div&gt;\n            &lt;label for=\"First_Name\"&gt;First Name:  &lt;/label&gt;\n            &lt;input type=\"text\" id=\"First_Name\" name=\"First_Name\" placeholder=\"John\" required&gt;&lt;br&gt;\n        &lt;/div&gt;\n\n        &lt;div&gt;\n            &lt;label for=\"Last_Name\"&gt;Last Name:  &lt;/label&gt;\n            &lt;input type=\"text\" id=\"Last_Name\" name=\"Last_Name\" placeholder=\"Doe\" required&gt;&lt;br&gt;\n        &lt;/div&gt;\n\n        &lt;div&gt;\n            &lt;label for=\"Address\"&gt;Address:  &lt;/label&gt;\n            &lt;input type=\"text\" id=\"Address\" name=\"Address\" placeholder=\"123 My Street Anytown, US 45678\" required&gt;&lt;br&gt;\n        &lt;/div&gt;\n\n        &lt;div&gt;\n            &lt;label for=\"Phone\"&gt;Phone:  &lt;/label&gt;\n            &lt;input &lt;input pattern=\"(?:\\(\\d{3}\\)|\\d{3})[- ]?\\d{3}[- ]?\\d{4}\" id=\"Phone\" name=\"Phone\" placeholder=\"(xxx)xxx-xxxx\" maxlength=\"13\" required&gt; &lt;br&gt;\n        &lt;/div&gt;\n\n        &lt;div&gt;\n            &lt;label for=\"Birthday\"&gt;Birthday:  &lt;/label&gt;\n            &lt;input type=\"date\" id=\"Birthday\" name=\"Birthday\" value=\"\" required&gt;&lt;br&gt;\n        &lt;/div&gt;\n\n        &lt;div&gt;\n            &lt;label for=\"Email\"&gt;Email:  &lt;/label&gt;\n            &lt;input type=\"email\" id=\"Email\" name=\"Email\" placeholder=\"johndoe@email.com\" required&gt;&lt;br&gt;\n        &lt;/div&gt;\n\n        &lt;div&gt;\n            &lt;label for=\"Relationship\"&gt;Relationship:  &lt;/label&gt;\n            &lt;input type=\"text\" id=\"Relationship\" name=\"Relationship\" placeholder=\"brother\" required&gt;&lt;br&gt;\n        &lt;/div&gt;\n\n        &lt;div&gt;\n            &lt;input type=\"submit\" value=\"Submit\"&gt;\n            &lt;input type=\"reset\" value=\"Reset\"&gt;\n        &lt;/div&gt;\n&lt;/form&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n\n<p>And perl code:</p>\n\n<pre><code>use strict;\nuse warnings;\nuse DBI;\nprint \"HTTP/1.0 200 OK\\n\";\nprint \"Content-Type: text/html\\n\\n\\n\";\n\n my $dbh=DBI-&gt;connect(\"DBI:mysql:database=address_book;host=**.**.***.159\", \"***\", \"****\");\nmy $o = new CGI;\n\nmy $Contact_ID = $o -&gt; param(\"Contact_ID\");\nmy $First_Name = $o -&gt; param(\"First_Name\");\nmy $Last_Name = $o -&gt; param(\"Last_Name\");\nmy $Address = $o -&gt; param(\"Address\");\nmy $Phone = $o -&gt; param(\"Phone\");\nmy $Birthday = $o -&gt; param(\"Birthday\");\nmy $Email = $o -&gt; param(\"Email\");\nmy $Relationship = $o -&gt; param(\"Relationship\");\n\n$dbh-&gt;do(\"INSERT INTO Contacts VALUES (?, ?, ?, ?, ?, ?, ?, ?)\", undef, '0', $First_Name, $Last_Name, $Address, $Phone, $Birthday, $Email, $Relationship);\n\n\n$dbh-&gt;disconnect();\n</code></pre>\n\n<p>The error: </p>\n\n<blockquote>\n  <p>The specified CGI application misbehaved by not returning a complete set of HTTP headers. The headers it did return are \"install_driver(mysql) failed: Can't locate DBD/mysql.pm in @INC (@INC contains: C:/Program Files (x86)/Parallels/Plesk/Additional/Perl/site/lib C:/Program Files (x86)/Parallels/Plesk/Additional/Perl/lib .) at (eval 3) line 3. Perhaps the DBD::mysql perl module hasn't been fully installed, or perhaps the capitalisation of 'mysql' isn't right. Available drivers: CSV, DBM, ExampleP, File, Gofer, ODBC, Oracle, Proxy, SQLite, Sponge. at G:\\PleskVhosts\\tonyalesher.com\\httpdocs\\project\\test2.pl line 7 HTTP/1.0 200 OK Content-Type: text/html \".</p>\n</blockquote>\n\n<p>I downloaded the DBD from my command prompt, but I can't find the folder that it's mentioning - it doesn't exist on my computer. I'm using a godaddy account (plesk) I don't know if that matters. Thank you!</p>\n"}, {"tags": ["perl", "sorting"], "comments": [{"owner": {"reputation": 34726, "user_id": 133939, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/pN9C5.png?s=128&g=1", "display_name": "Zaid", "link": "https://stackoverflow.com/users/133939/zaid"}, "edited": false, "score": 0, "creation_date": 1472489284, "post_id": 39211215, "comment_id": 65761298, "body": "Tested on both Perl 5.8.8 and 5.16.3"}], "answers": [{"comments": [{"owner": {"reputation": 34726, "user_id": 133939, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/pN9C5.png?s=128&g=1", "display_name": "Zaid", "link": "https://stackoverflow.com/users/133939/zaid"}, "edited": false, "score": 0, "creation_date": 1472489513, "post_id": 39211273, "comment_id": 65761408, "body": "I figured that. But the question is why? I put parens around the arguments to <code>uniq</code> and it&#39;s supposed to return a list, right?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 34726, "user_id": 133939, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/pN9C5.png?s=128&g=1", "display_name": "Zaid", "link": "https://stackoverflow.com/users/133939/zaid"}, "edited": false, "score": 0, "creation_date": 1472489582, "post_id": 39211273, "comment_id": 65761452, "body": "So you&#39;re asking why is <code>uniq</code> treated as a sub name? Well, it is one, isn&#39;t it?"}, {"owner": {"reputation": 185733, "user_id": 152948, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/194ef8f807c34a9d7aab0e11a8674768?s=128&d=identicon&r=PG", "display_name": "hobbs", "link": "https://stackoverflow.com/users/152948/hobbs"}, "reply_to_user": {"reputation": 34726, "user_id": 133939, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/pN9C5.png?s=128&g=1", "display_name": "Zaid", "link": "https://stackoverflow.com/users/133939/zaid"}, "edited": false, "score": 0, "creation_date": 1472489769, "post_id": 39211273, "comment_id": 65761552, "body": "@Zaid because there&#39;s &quot;sort&quot;, the name of a sub, and then a list."}, {"owner": {"reputation": 18466, "user_id": 477563, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/07a89fb7b2fd8ece1e9e39e95e004a36?s=128&d=identicon&r=PG", "display_name": "Mr. Llama", "link": "https://stackoverflow.com/users/477563/mr-llama"}, "edited": false, "score": 0, "creation_date": 1472489820, "post_id": 39211273, "comment_id": 65761579, "body": "@ikegami - I get what you&#39;re saying.  Perl sees <code>uniq</code> as <code>SUBNAME</code> and <code>(@stuff)</code> as <code>LIST</code>, but why does <code>sort( uniq(@stuff) )</code> not parse the same way? (Which will more fully answer OP&#39;s question.)"}, {"owner": {"reputation": 34726, "user_id": 133939, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/pN9C5.png?s=128&g=1", "display_name": "Zaid", "link": "https://stackoverflow.com/users/133939/zaid"}, "edited": false, "score": 0, "creation_date": 1472489941, "post_id": 39211273, "comment_id": 65761635, "body": "I see, so you&#39;re saying that the post-<code>uniq</code> parens do nothing to change precedence of how the call is evaluated"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 18466, "user_id": 477563, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/07a89fb7b2fd8ece1e9e39e95e004a36?s=128&d=identicon&r=PG", "display_name": "Mr. Llama", "link": "https://stackoverflow.com/users/477563/mr-llama"}, "edited": false, "score": 0, "creation_date": 1472490073, "post_id": 39211273, "comment_id": 65761697, "body": "@Mr. Llama, Probably so <code>sort( uniq(@stuff) )</code> does what you want!"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 34726, "user_id": 133939, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/pN9C5.png?s=128&g=1", "display_name": "Zaid", "link": "https://stackoverflow.com/users/133939/zaid"}, "edited": false, "score": 1, "creation_date": 1472490197, "post_id": 39211273, "comment_id": 65761761, "body": "@Zaid, No different than <code>@a = (@b);</code>"}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 1, "last_activity_date": 1472490029, "last_edit_date": 1472490029, "creation_date": 1472489453, "answer_id": 39211273, "question_id": 39211215, "link": "https://stackoverflow.com/questions/39211215/sort-uniqstuff-doesnt-sort-doesnt-de-dupe/39211273#39211273", "title": "sort uniq(@stuff) doesn&#39;t sort, doesn&#39;t de-dupe", "body": "<p><code>uniq</code> treated as a sub name because it's an identifier or a qualified identifier that's not also a function name. No actual check is made to see if the sub actually exists (although it would have found the sub to exist in this case).</p>\n\n<p><code>sort</code> needs to be followed by a function name or something that's not an identifier or qualified identifier to be disqualified from the <code>sort SUBNAME LIST</code> syntax.</p>\n"}, {"comments": [{"owner": {"reputation": 18466, "user_id": 477563, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/07a89fb7b2fd8ece1e9e39e95e004a36?s=128&d=identicon&r=PG", "display_name": "Mr. Llama", "link": "https://stackoverflow.com/users/477563/mr-llama"}, "edited": false, "score": 1, "creation_date": 1472489983, "post_id": 39211343, "comment_id": 65761655, "body": "To answer OP&#39;s question as to why the extra parens are necessary: <code>sort( ... )</code> is being interpreted as <code>sort</code> with a <i>single</i> parameter which is what OP wants.  Without the parens, Perl sees the multiple parameter version <code>sort SUBNAME LIST</code>."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1477412367, "post_id": 39211343, "comment_id": 67752113, "body": "The OP knows all that. They asked why it&#39;s being interpreted as <code>sort SUBNAME LIST</code> without the parens."}, {"owner": {"reputation": 185733, "user_id": 152948, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/194ef8f807c34a9d7aab0e11a8674768?s=128&d=identicon&r=PG", "display_name": "hobbs", "link": "https://stackoverflow.com/users/152948/hobbs"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1477413846, "post_id": 39211343, "comment_id": 67753054, "body": "@ikegami you&#39;re replying to a months-old closed post."}], "tags": [], "owner": {"reputation": 185733, "user_id": 152948, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/194ef8f807c34a9d7aab0e11a8674768?s=128&d=identicon&r=PG", "display_name": "hobbs", "link": "https://stackoverflow.com/users/152948/hobbs"}, "is_accepted": false, "score": 2, "last_activity_date": 1472489727, "creation_date": 1472489727, "answer_id": 39211343, "question_id": 39211215, "link": "https://stackoverflow.com/questions/39211215/sort-uniqstuff-doesnt-sort-doesnt-de-dupe/39211343#39211343", "title": "sort uniq(@stuff) doesn&#39;t sort, doesn&#39;t de-dupe", "body": "<p>Although it's rarely used, the first form listed in <code>perldoc -f sort</code> is <code>sort SUBNAME LIST</code>. i.e. the optional second argument to sort is the <em>name</em> of a function to use as the sort comparator. The <code>LIST</code>, of course, may or may not have parentheses as it wants, and whitespace is free, so</p>\n\n<pre><code> sort uniq( @test, qw/ d d c c b b a a / )\n</code></pre>\n\n<p>means to sort the list <code>(@test, qw/ d d c c b b a a /)</code> with the function <code>uniq</code> as a comparator. Since the result of <code>uniq</code> is independent of <code>$a</code> and <code>$b</code> and it has no prototype, it always returns <code>undef</code>, which sort considers as 0, and sort responds to this assertion that everything is equal by not changing the order of anything (since it's a stable sort, since 5.8 at least).</p>\n"}], "owner": {"reputation": 34726, "user_id": 133939, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/pN9C5.png?s=128&g=1", "display_name": "Zaid", "link": "https://stackoverflow.com/users/133939/zaid"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 89, "favorite_count": 0, "closed_date": 1472489977, "answer_count": 2, "score": 3, "last_activity_date": 1477384638, "creation_date": 1472489198, "last_edit_date": 1477384638, "question_id": 39211215, "link": "https://stackoverflow.com/questions/39211215/sort-uniqstuff-doesnt-sort-doesnt-de-dupe", "closed_reason": "Duplicate", "title": "sort uniq(@stuff) doesn&#39;t sort, doesn&#39;t de-dupe", "body": "<blockquote>\n  <p>Some code has me waxing lyrical,<br>\n  The outcome is slightly hysterical.<br>\n  <code>sort</code>ed output I seek,<br>\n  All elements <code>uniq</code>ue,<br>\n  But the results? Far from clinical.</p>\n</blockquote>\n\n<h3>Code in question</h3>\n\n<pre><code>use strict;\nuse warnings;\n\nsub uniq { my %seen; grep ! $seen{$_}++, @_ }\n\nmy @test = ();\nfor ( 1 .. 3 ) {\n  @test = sort uniq( @test, qw/ d d c c b b a a / );\n  print \"@test\\n\";\n}\n</code></pre>\n\n<h3>Output</h3>\n\n<pre><code>d d c c b b a a\nd d c c b b a a d d c c b b a a\nd d c c b b a a d d c c b b a a d d c c b b a a\n</code></pre>\n\n<h3>The Fix</h3>\n\n<p>An extra set of parentheses restores parity:</p>\n\n<pre><code>@test = sort( uniq( @test, qw/ d d c c b b a a / ) );  # a b c d\n</code></pre>\n\n<p>Running the two lines through <code>-MO=Deparse</code> sheds some light on the effect of the extra parens - it forces the interpreter to treat the RHS as <code>sort LIST</code> instead of <code>sort SUBNAME LIST</code>:</p>\n\n<pre><code># Doesn't work as intended (sort SUBNAME LIST)\n@test = (sort uniq @test, ('d', 'd', 'c', 'c', 'b', 'b', 'a', 'a'));\n\n# Works as intended (sort LIST)\n@test = sort(uniq(@test, ('d', 'd', 'c', 'c', 'b', 'b', 'a', 'a')));\n</code></pre>\n\n<h3>My Question</h3>\n\n<ul>\n<li><p><strong>Why is the extra set of parentheses necessary?</strong></p>\n\n<p><code>uniq</code> returns a list, so I'd expect</p>\n\n<pre><code>sort uniq( @stuff );\n</code></pre>\n\n<p>to be equivalent to</p>\n\n<pre><code>sort LIST\n</code></pre></li>\n</ul>\n"}, {"tags": ["mysql", "perl", "replace", "escaping", "single-quotes"], "comments": [{"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 2, "creation_date": 1472488135, "post_id": 39210890, "comment_id": 65760639, "body": "&quot;I want to escape any single quotes that might appear in them so that the SQL statements run properly&quot; That way lies madness. Use <a href=\"https://metacpan.org/pod/DBI\" rel=\"nofollow noreferrer\">DBI</a> and <a href=\"https://metacpan.org/pod/DBI#Placeholders-and-Bind-Values\" rel=\"nofollow noreferrer\">placeholders</a>."}, {"owner": {"reputation": 16802, "user_id": 1235929, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/9f460ae7deb6fa19034c810a53b9fbac?s=128&d=identicon&r=PG", "display_name": "Dave", "link": "https://stackoverflow.com/users/1235929/dave"}, "reply_to_user": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1472489219, "post_id": 39210890, "comment_id": 65761265, "body": "Ok, so how do you do that?"}], "answers": [{"tags": [], "owner": {"reputation": 1945, "user_id": 5669174, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XGSyr.jpg?s=128&g=1", "display_name": "Mike", "link": "https://stackoverflow.com/users/5669174/mike"}, "is_accepted": false, "score": -1, "last_activity_date": 1472495049, "last_edit_date": 1472495049, "creation_date": 1472491491, "answer_id": 39211811, "question_id": 39210890, "link": "https://stackoverflow.com/questions/39210890/how-do-i-do-search-and-replace-within-a-search-and-replace-perl-statement/39211811#39211811", "title": "How do I do search and replace within a search and replace perl statement?", "body": "<pre><code>perl -pi -e \"sub R{(\\$a=shift)=~s/'/''/g;\\$a;} s/([^,]+),([^,]+),([^,]+),(.*[^\\n]+)\\n/select '\\$1', u.id, u.first_Name, u.last_name, u.url FROM user u, user_role ur where u.id = ur.user_id and lower(ur.role_id) = '\\$2' and lower(u.first_name) = lower('@{[R(\\$3)]}') and lower(u.last_name) = lower('@{[R(\\$4)]}');/g;\" /tmp/users.csv\n</code></pre>\n\n<p>Perl transposes any string (including regular expression). And execute any code enclosed in <code>@{[ code ]}</code>.</p>\n\n<p>Create function (<code>R()</code>) for escaping MySQL string and call it from replacement string as <code>@{[ R($3) ]}</code>.</p>\n"}], "owner": {"reputation": 16802, "user_id": 1235929, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/9f460ae7deb6fa19034c810a53b9fbac?s=128&d=identicon&r=PG", "display_name": "Dave", "link": "https://stackoverflow.com/users/1235929/dave"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 63, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1472495049, "creation_date": 1472487985, "question_id": 39210890, "link": "https://stackoverflow.com/questions/39210890/how-do-i-do-search-and-replace-within-a-search-and-replace-perl-statement", "title": "How do I do search and replace within a search and replace perl statement?", "body": "<p>I\u2019m using bash shell with Perl v 5.18.2.  I\u2019m running this statement</p>\n\n<pre><code>perl -pi -e \"s/([^,]+),([^,]+),([^,]+),(.*[^\\n]+)\\n/select '\\$1', u.id, u.first_Name, u.last_name, u.url FROM user u, user_role ur where u.id = ur.user_id and lower(ur.role_id) = '\\$2' and lower(u.first_name) = lower('\\$3') and lower(u.last_name) = lower('\\$4');/g\" /tmp/users.csv \n</code></pre>\n\n<p>But what I want to do is somehow before the \u201c$3\u201d and \u201c$4\u201d arguments are placed into the replace section of this perl statement, I want to escape any single quotes that might appear in them so that the SQL statements run properly (this will run on MySQL 5.5.18).  How do I adjust the above so that when perl replaces the $3 and $4 arguments it replaces single quotes with escaped MySQL singe quotes?</p>\n"}, {"tags": ["perl", "url", "cgi", "gitweb"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1472488804, "post_id": 39210677, "comment_id": 65761033, "body": "Re &quot;<i>the browser escapes the &#39;;&#39; to &#39;%3b&#39;</i>&quot;, No way. That would not be legal."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1472489376, "post_id": 39210677, "comment_id": 65761347, "body": "Re &quot;<i>replacing the &#39;;&#39; by &#39;&amp;&#39; gives me a malformed xhtml in the browser.</i>&quot;, You have an XHTML injection error. You forgot to escape text (the URL) you embedded in the XHTML. <code>&amp;</code> needs to be replaced with <code>&amp;amp;</code>"}, {"owner": {"reputation": 11, "user_id": 6770876, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d030bf87de238b6fc1aa0640647e4200?s=128&d=identicon&r=PG&f=1", "display_name": "quantenquatsch", "link": "https://stackoverflow.com/users/6770876/quantenquatsch"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1472541873, "post_id": 39210677, "comment_id": 65780307, "body": "Replacing the &#39;;&#39; by &#39;&amp;amp;&#39; does not work either, since again the &#39;;&#39; is being escaped when I click on the link."}, {"owner": {"reputation": 11, "user_id": 6770876, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d030bf87de238b6fc1aa0640647e4200?s=128&d=identicon&r=PG&f=1", "display_name": "quantenquatsch", "link": "https://stackoverflow.com/users/6770876/quantenquatsch"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1472541960, "post_id": 39210677, "comment_id": 65780350, "body": "Is there a way to tell perl to replace the %3b with an &#39;;&#39; before parsing the query-string?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1472573697, "post_id": 39210677, "comment_id": 65802022, "body": "Again, that&#39;s not true. if you replaced <code>;</code> with <code>&amp;</code> and then encoded it to <code>&amp;amp;</code> when you placed it in the XHTML, there is no <code>;</code> in the link."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1472573719, "post_id": 39210677, "comment_id": 65802042, "body": "That would be bad. That would corrupt your data."}, {"owner": {"reputation": 11, "user_id": 6770876, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d030bf87de238b6fc1aa0640647e4200?s=128&d=identicon&r=PG&f=1", "display_name": "quantenquatsch", "link": "https://stackoverflow.com/users/6770876/quantenquatsch"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1472575318, "post_id": 39210677, "comment_id": 65802926, "body": "Maybe I am misunderstood here. I know the behavior is not right, but I did not cause it. The XHTML is generated by gitweb.cgi and seems to be valid in the DOM. But when I klick on the link, the Browser (Firefox, Edge) does this weird escaping. So there must be something in the webpage causing this. However, I did not find anything."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1472577035, "post_id": 39210677, "comment_id": 65803862, "body": "No, they don&#39;t. That would break half the web. See for yourself <a href=\"http://www.adaelis.com/misc/show_url?foo=1;bar=1\" rel=\"nofollow noreferrer\"><code>http:&#47;&#47;www.adaelis.com&#47;misc&#47;show_url?foo=1;bar=1</code></a>. Your diagnosis of the problem is incorrect."}, {"owner": {"reputation": 11, "user_id": 6770876, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d030bf87de238b6fc1aa0640647e4200?s=128&d=identicon&r=PG&f=1", "display_name": "quantenquatsch", "link": "https://stackoverflow.com/users/6770876/quantenquatsch"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1472628456, "post_id": 39210677, "comment_id": 65822942, "body": "See for yourself here: <a href=\"https://eats3.et.tu-dresden.de/gitweb-public/gitweb.cgi/projects/js-boilerplate/code-assembly.git\" rel=\"nofollow noreferrer\">eats3.et.tu-dresden.de/gitweb-public/gitweb.cgi/projects/&hellip;</a> Just klick on the link at the top of the page that says &#39;js-boilerplate&#39;. The Problem is not that the browser does not send the request that is entered to the location bar, the problem is that something happens on the page when the link is being klicked. If you mean that it is incorrect, how would you explain the behaviour?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1472653587, "post_id": 39210677, "comment_id": 65840261, "body": "It&#39;s not the browser. The browser correctly requests <code>http:&#47;&#47;eats3.et.tu-dresden.de&#47;gitweb-public&#47;gitweb.cgi?a=pro&zwnj;&#8203;ject_list;pf=project&zwnj;&#8203;s&#47;js-boilerplate</code>. But when you request that, the server redirects you (using a 302 response) to <code>https:&#47;&#47;eats3.et.tu-dresden.de&#47;gitweb-public&#47;gitweb.cgi?a=pr&zwnj;&#8203;oject_list%3bpf=proj&zwnj;&#8203;ects&#47;js-boilerplate</code>. It means to switch you from HTTP to HTTPS, but corrupts the URL in the process."}, {"owner": {"reputation": 11, "user_id": 6770876, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d030bf87de238b6fc1aa0640647e4200?s=128&d=identicon&r=PG&f=1", "display_name": "quantenquatsch", "link": "https://stackoverflow.com/users/6770876/quantenquatsch"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1472659021, "post_id": 39210677, "comment_id": 65844088, "body": "Layer 8 problem detected! Thank you very much, that was the error."}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 6770876, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d030bf87de238b6fc1aa0640647e4200?s=128&d=identicon&r=PG&f=1", "display_name": "quantenquatsch", "link": "https://stackoverflow.com/users/6770876/quantenquatsch"}, "edited": false, "score": 0, "creation_date": 1472574915, "post_id": 39226620, "comment_id": 65802723, "body": "I added the command      &#39;die $ENV{&#39;REQUEST_URI&#39;}&#39; to my gitweb.conf which got me the following line in the apache error log:     &#39;[Tue Aug 30 18:37:08.416866 2016] [cgi:error] [pid 32381] [client 141.30.155.71:54651] AH01215: [Tue Aug 30 18:37:08 2016] gitweb.cgi: FATAL: [Tue Aug 30 18:37:08 2016] gitweb.cgi: FATAL: /gitweb/gitweb.cgi?a=project_list%3bpf=projects/foo at /home/git/gitweb.conf line 61.&#39;   -- So it seems the browser sends the request as printed in the location bar.  Maybe I can rewrite the request through Apache in order to replace &#39;%3b&#39; with &#39;;&#39; ..."}], "tags": [], "owner": {"reputation": 111, "user_id": 6447967, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-4kt-uhK8pQk/AAAAAAAAAAI/AAAAAAAAADM/d7KEkgnoFOw/photo.jpg?sz=128", "display_name": "Shaka Flex", "link": "https://stackoverflow.com/users/6447967/shaka-flex"}, "is_accepted": false, "score": 0, "last_activity_date": 1472557465, "creation_date": 1472557465, "answer_id": 39226620, "question_id": 39210677, "link": "https://stackoverflow.com/questions/39210677/gitweb-url-escapes-in-query-string/39226620#39226620", "title": "Gitweb URL escapes in query string", "body": "<p>You do not encoded or decoded the query string as a hole.\nThe param name and value must be encoded and decoded individually and the delimiters of the query string i.e..</p>\n\n<pre><code>= ; &amp;amp;\n</code></pre>\n\n<p>never get URL encoded or decoded. </p>\n\n<p>You can check the server environment variable <code>$ENV{REQUEST_URI}</code> to see if the server did receive the information encoded like you said. If the browser is sending it then that is the problem and there is nothing you can do in your Perl code to fix that. Because it will just cause more problems down the road in your Perl code.</p>\n"}, {"comments": [{"owner": {"reputation": 6329, "user_id": 1207769, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/63df759e2779af56fd050a968ff98d09?s=128&d=identicon&r=PG", "display_name": "ctrueden", "link": "https://stackoverflow.com/users/1207769/ctrueden"}, "edited": false, "score": 0, "creation_date": 1494344298, "post_id": 39244641, "comment_id": 74783385, "body": "For what it&#39;s worth, I had this same issue, and fixed it by adding the NE flag to my existing RewriteRule directives in my Apache configuration. See also <a href=\"http://stackoverflow.com/questions/18323782/semi-colons-in-url-changes-to-3b-via-htaccess\" title=\"semi colons in url changes to 3b via htaccess\">stackoverflow.com/questions/18323782/&hellip;</a>"}], "tags": [], "owner": {"reputation": 11, "user_id": 6770876, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d030bf87de238b6fc1aa0640647e4200?s=128&d=identicon&r=PG&f=1", "display_name": "quantenquatsch", "link": "https://stackoverflow.com/users/6770876/quantenquatsch"}, "is_accepted": false, "score": 0, "last_activity_date": 1472632635, "creation_date": 1472632635, "answer_id": 39244641, "question_id": 39210677, "link": "https://stackoverflow.com/questions/39210677/gitweb-url-escapes-in-query-string/39244641#39244641", "title": "Gitweb URL escapes in query string", "body": "<p>I somehow solved the problem using a rewrite rule in apache:</p>\n\n<pre><code>RewriteEngine on\nRewriteCond %{QUERY_STRING} ^a=project_list%3bpf=(.*)$\nRewriteRule (.*) $1?a=project_list;pf=%1 [QSA]\n</code></pre>\n\n<p>It only works for the project list with a specified path with the pathinfo feature enabled. A holistic approach would be to search for all possible query parameters and to replace them all.</p>\n\n<p>However, this solution is not satisfying, since it does not fix the actual problem of the weird url escaping of gitweb.</p>\n"}], "owner": {"reputation": 11, "user_id": 6770876, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d030bf87de238b6fc1aa0640647e4200?s=128&d=identicon&r=PG&f=1", "display_name": "quantenquatsch", "link": "https://stackoverflow.com/users/6770876/quantenquatsch"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 220, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1472632635, "creation_date": 1472487117, "last_edit_date": 1472541898, "question_id": 39210677, "link": "https://stackoverflow.com/questions/39210677/gitweb-url-escapes-in-query-string", "title": "Gitweb URL escapes in query string", "body": "<p>My gitweb installation works so far, but all generated links that include a querystring, e.g. </p>\n\n<pre><code>host/gitweb?p=somepath&amp;a=summary\n</code></pre>\n\n<p>are somehow malformed.\nFirst, the ampersand is replaced by a semicolon. When inspecting the html, the link looks like</p>\n\n<pre><code>host/gitweb?p=somepath;a=summary\n</code></pre>\n\n<p>When klicking the link, the browser escapes the ';' to '%3b', so the url sent to the server looks like</p>\n\n<pre><code>host/gitweb?p=somepath%3ba=summary\n</code></pre>\n\n<p>The <em>gitweb.cgi</em> does not parse this and displays a 404 error page. When I replace the '%3b' with a ';' or a '&amp;', everything works fine.</p>\n\n<p>How can this be fixed on the server-side?</p>\n\n<p>So far, I have tried to find the line producing the ';' in the urls, which is line 1457</p>\n\n<pre><code>$href .= \"?\" . join(';', @result) if scalar @result;\n</code></pre>\n\n<p>replacing the ';' by '&amp;' gives me a malformed xhtml in the browser. Replacing it by '&amp;amp;' forces the browser again to escape the ';' which produces broken urls again.</p>\n\n<p>The issue is kind of hidden (I can view the repositories), if I set the option </p>\n\n<pre><code>$feature{'pathinfo'}{'default'} = [1];\n</code></pre>\n\n<p>in the <em>gitweb.conf</em> file, but unfortunately, folders containing multiple repositories cannot be displayed, since the respective link uses some query-parameters.</p>\n"}, {"tags": ["windows", "perl", "cpan"], "comments": [{"owner": {"reputation": 1786, "user_id": 1820650, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/ce47757627908a1013e0951158f4c2e6?s=128&d=identicon&r=PG", "display_name": "Dr.Avalanche", "link": "https://stackoverflow.com/users/1820650/dr-avalanche"}, "edited": false, "score": 1, "creation_date": 1472485526, "post_id": 39210107, "comment_id": 65759150, "body": "your cpan config must be going to some out of date location. what does <code>o conf urllist</code> show?"}, {"owner": {"reputation": 1702, "user_id": 880797, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/bace3dcc4a83523d93399ab2bd1f3728?s=128&d=identicon&r=PG", "display_name": "Andrey", "link": "https://stackoverflow.com/users/880797/andrey"}, "reply_to_user": {"reputation": 1786, "user_id": 1820650, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/ce47757627908a1013e0951158f4c2e6?s=128&d=identicon&r=PG", "display_name": "Dr.Avalanche", "link": "https://stackoverflow.com/users/1820650/dr-avalanche"}, "edited": false, "score": 0, "creation_date": 1472485850, "post_id": 39210107, "comment_id": 65759354, "body": "urllist 0 [<a href=\"http://ppm.activestate.com/CPAN]\" rel=\"nofollow noreferrer\">ppm.activestate.com/CPAN]</a> 1 [<a href=\"http://cpan.perl.org]\" rel=\"nofollow noreferrer\">cpan.perl.org]</a>"}, {"owner": {"reputation": 1786, "user_id": 1820650, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/ce47757627908a1013e0951158f4c2e6?s=128&d=identicon&r=PG", "display_name": "Dr.Avalanche", "link": "https://stackoverflow.com/users/1820650/dr-avalanche"}, "edited": false, "score": 0, "creation_date": 1472486040, "post_id": 39210107, "comment_id": 65759444, "body": "within cpan try <code>reolad index</code> then <code>reload cpan</code>. Something is very wrong because the version numbers don&#39;t match those on the repos. Do you have more than one perl installed?"}, {"owner": {"reputation": 1702, "user_id": 880797, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/bace3dcc4a83523d93399ab2bd1f3728?s=128&d=identicon&r=PG", "display_name": "Andrey", "link": "https://stackoverflow.com/users/880797/andrey"}, "reply_to_user": {"reputation": 1786, "user_id": 1820650, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/ce47757627908a1013e0951158f4c2e6?s=128&d=identicon&r=PG", "display_name": "Dr.Avalanche", "link": "https://stackoverflow.com/users/1820650/dr-avalanche"}, "edited": false, "score": 0, "creation_date": 1472486348, "post_id": 39210107, "comment_id": 65759634, "body": "No luck. I even upgrade CPAN from 2.11 to 2.14. After trying to reinstall Datetime::Locale it still installs 0.92. I am running only one version of PERL"}, {"owner": {"reputation": 1786, "user_id": 1820650, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/ce47757627908a1013e0951158f4c2e6?s=128&d=identicon&r=PG", "display_name": "Dr.Avalanche", "link": "https://stackoverflow.com/users/1820650/dr-avalanche"}, "edited": false, "score": 0, "creation_date": 1472486931, "post_id": 39210107, "comment_id": 65760007, "body": "can you post a pastebin or update your Q with an install attempted from within the Shell? As a last resort manually download the correct .gz file from cpan and do it manually"}, {"owner": {"reputation": 1702, "user_id": 880797, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/bace3dcc4a83523d93399ab2bd1f3728?s=128&d=identicon&r=PG", "display_name": "Andrey", "link": "https://stackoverflow.com/users/880797/andrey"}, "reply_to_user": {"reputation": 1786, "user_id": 1820650, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/ce47757627908a1013e0951158f4c2e6?s=128&d=identicon&r=PG", "display_name": "Dr.Avalanche", "link": "https://stackoverflow.com/users/1820650/dr-avalanche"}, "edited": false, "score": 0, "creation_date": 1472491658, "post_id": 39210107, "comment_id": 65762482, "body": "I made it work by installing 1.26 version of DateTime. Thanks for you help Dr. A"}], "owner": {"reputation": 1702, "user_id": 880797, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/bace3dcc4a83523d93399ab2bd1f3728?s=128&d=identicon&r=PG", "display_name": "Andrey", "link": "https://stackoverflow.com/users/880797/andrey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 154, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1607030799, "creation_date": 1472485129, "last_edit_date": 1607030799, "question_id": 39210107, "link": "https://stackoverflow.com/questions/39210107/issue-with-datetimelocaleen-us-module-when-upgrading", "title": "Issue with DateTime::Locale::en_US module when upgrading", "body": "<p>I have an issue with <a href=\"https://metacpan.org/pod/DateTime::Locale::en_US\" rel=\"nofollow noreferrer\"><code>DateTime::Locale::en_US</code></a> module.</p>\n<p>I am running ActiveState Perl (64 bit) for Windows.</p>\n<p>I am trying to upgrade from v5.16.3 to v5.22.2.</p>\n<p>After installing the <a href=\"https://metacpan.org/pod/DateTime\" rel=\"nofollow noreferrer\"><code>DateTime</code></a> module and running my Perl scripts I am getting an error message:</p>\n<blockquote>\n<pre><code>Can't locate DateTime/Locale/en_US.pm in @INC (you may need to install the DateTime::Locale::en_US module)\n</code></pre>\n</blockquote>\n<p>I am not able to install that module via ActiveState PPM.</p>\n<p>I am able to install it via CPAN.</p>\n<p>If I install it via CPAN, <code>DateTime::Locale::en_US</code> is downgraded from 1.05 to 0.92.</p>\n<p>When I am trying to run the script after, it complains that 0.92 is incompatible and want me to upgrade back to 1.05.</p>\n"}, {"tags": ["c++", "perl", "imagemagick", "temporary-files", "tmp"], "comments": [{"owner": {"reputation": 3864, "user_id": 620908, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2abd643ecb33f1a18a7a4f976cef0dbe?s=128&d=identicon&r=PG", "display_name": "Adrian Colomitchi", "link": "https://stackoverflow.com/users/620908/adrian-colomitchi"}, "edited": false, "score": 0, "creation_date": 1472489103, "post_id": 39210038, "comment_id": 65761209, "body": "Is it possible to create a memory disk and put the /tmp there (between two consecutive launches you destroy the ram-disk, recreate/remount it again)? Failing that, is it possible to launch your program from a script which deletes /tmp once your app terminates?"}, {"owner": {"reputation": 3227, "user_id": 249199, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/0878f26eba467efc1d90fc6959b9b531?s=128&d=identicon&r=PG", "display_name": "Zac B", "link": "https://stackoverflow.com/users/249199/zac-b"}, "reply_to_user": {"reputation": 3864, "user_id": 620908, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2abd643ecb33f1a18a7a4f976cef0dbe?s=128&d=identicon&r=PG", "display_name": "Adrian Colomitchi", "link": "https://stackoverflow.com/users/620908/adrian-colomitchi"}, "edited": false, "score": 0, "creation_date": 1472502080, "post_id": 39210038, "comment_id": 65767837, "body": "The ramdisk option is possible; so is using and clearing <code>&#47;dev&#47;shm</code> or similar. Those both require the code to cope with previous hard-aborted (crashed, segfaulted, etc) runs leaving a mess, and subsequent runs having to clean it up, so it&#39;s not ideal.  Auto-cleaning /tmp doesn&#39;t achieve much, as the filesystem access still has to happen (and slow everything down) in the first place."}, {"owner": {"reputation": 430, "user_id": 661440, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd32692c3bb8c4161d4e78c9041abb69?s=128&d=identicon&r=PG", "display_name": "Finbar Crago", "link": "https://stackoverflow.com/users/661440/finbar-crago"}, "edited": false, "score": 0, "creation_date": 1476843078, "post_id": 39210038, "comment_id": 67512844, "body": "Take look at the full list of <a href=\"http://www.imagemagick.org/script/resources.php\" rel=\"nofollow noreferrer\">environment variables</a>. Maybe try setting <code>MAGICK_DISK_LIMIT</code> to zero and increasing the <code>MAGICK_MEMORY_LIMIT</code>?"}, {"owner": {"reputation": 3227, "user_id": 249199, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/0878f26eba467efc1d90fc6959b9b531?s=128&d=identicon&r=PG", "display_name": "Zac B", "link": "https://stackoverflow.com/users/249199/zac-b"}, "edited": false, "score": 0, "creation_date": 1476883667, "post_id": 39210038, "comment_id": 67535347, "body": "Increasing the memory limit seems to help somewhat, but I&#39;m interested in preventing temp file usage in all cases--even if more memory is needed, a failure would be preferable."}], "answers": [{"tags": [], "owner": {"reputation": 430, "user_id": 661440, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd32692c3bb8c4161d4e78c9041abb69?s=128&d=identicon&r=PG", "display_name": "Finbar Crago", "link": "https://stackoverflow.com/users/661440/finbar-crago"}, "is_accepted": false, "score": 2, "last_activity_date": 1477075699, "creation_date": 1477075699, "answer_id": 40183563, "question_id": 39210038, "link": "https://stackoverflow.com/questions/39210038/how-can-i-configure-imagemagick-to-not-use-any-temporary-files/40183563#40183563", "title": "How can I configure ImageMagick to not use any temporary files?", "body": "<p>The trick is to set <code>MAGICK_DISK_LIMIT=0</code> and <code>MAGICK_AREA_LIMIT</code>/<code>MAGICK_AREA_LIMIT</code> to a value larger than the maximum memory required by the program. </p>\n\n<pre><code>#!/usr/bin/perl\nBEGIN {\n    $ENV{'MAGICK_DISK_LIMIT'  }='0';\n    $ENV{'MAGICK_AREA_LIMIT'  }='1Mb';\n    $ENV{'MAGICK_MEMORY_LIMIT'}='1Mb';\n}\n\nuse Image::Magick;    \nmy $img = Image::Magick-&gt;new();\nmy $err = $img-&gt;Read('in.png');\ndie $err if $err;\n</code></pre>\n\n<p>If ImageMagick exceeds this memory limit it will die with a message like:</p>\n\n<pre><code>Exception 450: Memory allocation failed `in.png' @ error/png.c/MagickPNGErrorHandler/1645 at ./imagemem.pl line 11.\n</code></pre>\n\n<p>You can view ImageMagick's default limits by running <code>identify -list resource</code></p>\n"}, {"tags": [], "owner": {"reputation": 93, "user_id": 2300883, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3B4k8.jpg?s=128&g=1", "display_name": "Janne", "link": "https://stackoverflow.com/users/2300883/janne"}, "is_accepted": false, "score": 0, "last_activity_date": 1608221634, "creation_date": 1608221634, "answer_id": 65344362, "question_id": 39210038, "link": "https://stackoverflow.com/questions/39210038/how-can-i-configure-imagemagick-to-not-use-any-temporary-files/65344362#65344362", "title": "How can I configure ImageMagick to not use any temporary files?", "body": "<p>I had to increase the memory in the config file, when using the command line tools:</p>\n<p>In <strong>/etc/ImageMagick-6/policy.xml:</strong></p>\n<pre><code>&lt;!-- DEFAULT: &lt;policy domain=&quot;resource&quot; name=&quot;memory&quot; value=&quot;256MiB&quot;/&gt; --&gt;\n&lt;policy domain=&quot;resource&quot; name=&quot;memory&quot; value=&quot;1024MiB&quot;/&gt; \n</code></pre>\n<p>There was a discrepancy with versions: 8:6.9.7.4+dfsg-16ubuntu6.9 (Ubuntu 18.04) worked default without writing temporary files and with 256MiB, but with 8:6.9.10.23+dfsg-2.1ubuntu11.2 (Ubuntu 20.04) I had to increase the memory as above.</p>\n"}], "owner": {"reputation": 3227, "user_id": 249199, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/0878f26eba467efc1d90fc6959b9b531?s=128&d=identicon&r=PG", "display_name": "Zac B", "link": "https://stackoverflow.com/users/249199/zac-b"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1448, "favorite_count": 1, "answer_count": 2, "score": 8, "last_activity_date": 1608221634, "creation_date": 1472484900, "last_edit_date": 1473168060, "question_id": 39210038, "link": "https://stackoverflow.com/questions/39210038/how-can-i-configure-imagemagick-to-not-use-any-temporary-files", "title": "How can I configure ImageMagick to not use any temporary files?", "body": "<p>I'm trying to run ImageMagick without touching the filesystem: image data is read from memory/the network, and written back to a socket as a <a href=\"http://www.imagemagick.org/Magick++/Blob.html\" rel=\"nofollow noreferrer\">blob</a>.</p>\n\n<p>However, ImageMagick continually tries to write temp files, which either fill up my test system due to aborted/failed tests, or cause problems on systems with extremely slow disks: it's a weird constraint, but many of my conversion hosts are embedded-like systems with block devices that are <em>extremely</em> slow to respond to any operations, even <code>stat()</code>s.</p>\n\n<p><strong>Questions:</strong></p>\n\n<ol>\n<li><p>Is there a way to configure ImageMagick to not touch the disk during image processing?Assume that all required modules that ImageMagick will use have already been loaded, and that none of the ImageMagick functionality that farms processing out to subprocesses that talk to the filesystem will be used.</p></li>\n<li><p>What are the side effects of doing this? I'm OK with processing that won't fit in memory failing, rather than falling back to the disks.</p></li>\n</ol>\n\n<p>I'm converting using the C++ or Perl ImageMagick APIs, not the <code>convert</code> utility. If another binding has support for this, though, I'm fine switching platforms.</p>\n\n<p><strong>What I've Tried</strong></p>\n\n<ul>\n<li>I've set the <code>MAGICK_TEMPORARY_PATH</code> to various places, including <code>/dev/null</code> on POSIX. <code>/dev/null</code> sometimes seems to work, but my target systems aren't POSIX, so I'm not sure if I can count on it. Rather than fooling the temp file management system, I'd prefer something that I can trust to disable the need for temp files in the first place.</li>\n<li>I've used the <code>registry:temporary-path</code> option, with similar results.</li>\n<li>Setting the various temporary path options to nonexistent/unusable locations (e.g. <code>/dev/null</code> or a non-writable location) often seems to result in temporary files being created in the directory from which my program is launched. If that directory is non-writable, I have seen temp files get created in the system <code>/tmp</code> directory even if the code was told not to use it. These seem to happen in exceptional cases (e.g. segfaulting/OOMing/<code>kill -9</code>'d situations), so I gather that files may be created in these places normally, but are usually cleaned up.</li>\n</ul>\n"}, {"tags": ["html", "css", "twitter-bootstrap", "perl", "cgi"], "comments": [{"owner": {"reputation": 7179, "user_id": 3305454, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GFCwY.jpg?s=128&g=1", "display_name": "roberrrt-s", "link": "https://stackoverflow.com/users/3305454/roberrrt-s"}, "edited": false, "score": 0, "creation_date": 1472481463, "post_id": 39208837, "comment_id": 65756635, "body": "<code>&lt;font color=&quot;white&quot;&gt;</code> that&#39;s no valid HTML, there&#39;s not <code>&lt;font&gt;</code> tag."}, {"owner": {"reputation": 67, "user_id": 6699525, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e9f6d64aed2540e4e050fd906d977e9d?s=128&d=identicon&r=PG", "display_name": "superzero10", "link": "https://stackoverflow.com/users/6699525/superzero10"}, "reply_to_user": {"reputation": 7179, "user_id": 3305454, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GFCwY.jpg?s=128&g=1", "display_name": "roberrrt-s", "link": "https://stackoverflow.com/users/3305454/roberrrt-s"}, "edited": false, "score": 0, "creation_date": 1472482002, "post_id": 39208837, "comment_id": 65756970, "body": "@Roberrrt that is not what i asked, but it&#39;s working this way."}, {"owner": {"reputation": 7179, "user_id": 3305454, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GFCwY.jpg?s=128&g=1", "display_name": "roberrrt-s", "link": "https://stackoverflow.com/users/3305454/roberrrt-s"}, "edited": false, "score": 0, "creation_date": 1472482162, "post_id": 39208837, "comment_id": 65757080, "body": "That might be &#39;working&#39; this way, but that&#39;s no way the reason why your font color is white. You can remove the <code>&lt;font&gt;&lt;&#47;font&gt;</code> entirely."}, {"owner": {"reputation": 67, "user_id": 6699525, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e9f6d64aed2540e4e050fd906d977e9d?s=128&d=identicon&r=PG", "display_name": "superzero10", "link": "https://stackoverflow.com/users/6699525/superzero10"}, "reply_to_user": {"reputation": 7179, "user_id": 3305454, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GFCwY.jpg?s=128&g=1", "display_name": "roberrrt-s", "link": "https://stackoverflow.com/users/3305454/roberrrt-s"}, "edited": false, "score": 0, "creation_date": 1472482212, "post_id": 39208837, "comment_id": 65757101, "body": "so what is the good way you think ? @Roberrrt"}, {"owner": {"reputation": 927, "user_id": 5403907, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/F3lnS.jpg?s=128&g=1", "display_name": "mbethke", "link": "https://stackoverflow.com/users/5403907/mbethke"}, "reply_to_user": {"reputation": 7179, "user_id": 3305454, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GFCwY.jpg?s=128&g=1", "display_name": "roberrrt-s", "link": "https://stackoverflow.com/users/3305454/roberrrt-s"}, "edited": false, "score": 2, "creation_date": 1472482328, "post_id": 39208837, "comment_id": 65757190, "body": "@Roberrrt with clear-text passwords in the JS and <code>require</code>d .pl files that print HTML that&#39;s probably the least of the OP&#39;s problems. @superzero10 if this is something you inherited, it&#39;s time to rewrite it from scratch. It can probably be done in a few lines using a modern framework like <a href=\"https://metacpan.org/pod/Mojolicious\" rel=\"nofollow noreferrer\">Mojolicious</a> or <a href=\"https://metacpan.org/pod/Dancer\" rel=\"nofollow noreferrer\">Dancer</a> but you should probably read a few of their guides and then ask a more specific question -- with code like the above I don&#39;t even know where to start."}, {"owner": {"reputation": 1786, "user_id": 1820650, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/ce47757627908a1013e0951158f4c2e6?s=128&d=identicon&r=PG", "display_name": "Dr.Avalanche", "link": "https://stackoverflow.com/users/1820650/dr-avalanche"}, "edited": false, "score": 0, "creation_date": 1472482499, "post_id": 39208837, "comment_id": 65757289, "body": "since someone could &#39;view source&#39; in browser and get the login details this is offering you zero security. Anyone can see these details and where the redirect goes."}, {"owner": {"reputation": 67, "user_id": 6699525, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e9f6d64aed2540e4e050fd906d977e9d?s=128&d=identicon&r=PG", "display_name": "superzero10", "link": "https://stackoverflow.com/users/6699525/superzero10"}, "reply_to_user": {"reputation": 927, "user_id": 5403907, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/F3lnS.jpg?s=128&g=1", "display_name": "mbethke", "link": "https://stackoverflow.com/users/5403907/mbethke"}, "edited": false, "score": 0, "creation_date": 1472482639, "post_id": 39208837, "comment_id": 65757386, "body": "@mbethke the only thing i didn&#39;t do is the login.js script, everything else is from me and i&#39;m on it since 2 weeks ago so i don&#39;t really want to rewrite it from scratch ^^&#39;"}, {"owner": {"reputation": 67, "user_id": 6699525, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e9f6d64aed2540e4e050fd906d977e9d?s=128&d=identicon&r=PG", "display_name": "superzero10", "link": "https://stackoverflow.com/users/6699525/superzero10"}, "reply_to_user": {"reputation": 1786, "user_id": 1820650, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/ce47757627908a1013e0951158f4c2e6?s=128&d=identicon&r=PG", "display_name": "Dr.Avalanche", "link": "https://stackoverflow.com/users/1820650/dr-avalanche"}, "edited": false, "score": 0, "creation_date": 1472482729, "post_id": 39208837, "comment_id": 65757436, "body": "@Dr.Avalanche so what is the best way for good security and not really difficult to make ? ^^&#39;"}, {"owner": {"reputation": 1786, "user_id": 1820650, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/ce47757627908a1013e0951158f4c2e6?s=128&d=identicon&r=PG", "display_name": "Dr.Avalanche", "link": "https://stackoverflow.com/users/1820650/dr-avalanche"}, "edited": false, "score": 0, "creation_date": 1472482745, "post_id": 39208837, "comment_id": 65757448, "body": "@superzero10 nothing is being passed to your perl script, there&#39;s nothing to stop anyone from accessing success.cgi. There may as well be no login form"}, {"owner": {"reputation": 1786, "user_id": 1820650, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/ce47757627908a1013e0951158f4c2e6?s=128&d=identicon&r=PG", "display_name": "Dr.Avalanche", "link": "https://stackoverflow.com/users/1820650/dr-avalanche"}, "edited": false, "score": 0, "creation_date": 1472482808, "post_id": 39208837, "comment_id": 65757488, "body": "@superzero10 It seems you don&#39;t understand CGI, HTTP or JavaScript well enough. Take the advice of a modern framework, Dancer or Mojolicious. Learn the basics of one. The &#39;best way&#39; is to validate logins server side without having the credentials hard coded for in the webpage for the world to see."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 7179, "user_id": 3305454, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GFCwY.jpg?s=128&g=1", "display_name": "roberrrt-s", "link": "https://stackoverflow.com/users/3305454/roberrrt-s"}, "edited": false, "score": 1, "creation_date": 1472482899, "post_id": 39208837, "comment_id": 65757532, "body": "@Roberrrt since the OP did not specify which version of HTML they are using, it is very valid. E.g. in <a href=\"https://www.w3.org/TR/REC-html32.html#font\" rel=\"nofollow noreferrer\">HTML 3.2 the <code>&lt;font&gt;</code> tag was still included</a>. Don&#39;t assume everything is HTML 5. Old applications are old."}, {"owner": {"reputation": 7179, "user_id": 3305454, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GFCwY.jpg?s=128&g=1", "display_name": "roberrrt-s", "link": "https://stackoverflow.com/users/3305454/roberrrt-s"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1472482994, "post_id": 39208837, "comment_id": 65757598, "body": "@simbabque I herby apologize. You have taught me a valuable lesson today. (<a href=\"https://www.w3.org/MarkUp/Wilbur/pr7may96.html\" rel=\"nofollow noreferrer\">w3.org/MarkUp/Wilbur/pr7may96.html</a>) 1996, damn"}, {"owner": {"reputation": 67, "user_id": 6699525, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e9f6d64aed2540e4e050fd906d977e9d?s=128&d=identicon&r=PG", "display_name": "superzero10", "link": "https://stackoverflow.com/users/6699525/superzero10"}, "reply_to_user": {"reputation": 1786, "user_id": 1820650, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/ce47757627908a1013e0951158f4c2e6?s=128&d=identicon&r=PG", "display_name": "Dr.Avalanche", "link": "https://stackoverflow.com/users/1820650/dr-avalanche"}, "edited": false, "score": 0, "creation_date": 1472483306, "post_id": 39208837, "comment_id": 65757782, "body": "@Dr.Avalanche so if i understand, everything i done is useless and i have to restart it all with dancer or mojo ? wich one is the most simple ?"}, {"owner": {"reputation": 1786, "user_id": 1820650, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/ce47757627908a1013e0951158f4c2e6?s=128&d=identicon&r=PG", "display_name": "Dr.Avalanche", "link": "https://stackoverflow.com/users/1820650/dr-avalanche"}, "edited": false, "score": 1, "creation_date": 1472483562, "post_id": 39208837, "comment_id": 65757952, "body": "@superzero10 that&#39;s only your server side. As it is your client and server side are both wrong. there is nothing in success.cgi to stop anyone from viewing it. How do you expect this to work? You need to learn basic HTTP first"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 7179, "user_id": 3305454, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GFCwY.jpg?s=128&g=1", "display_name": "roberrrt-s", "link": "https://stackoverflow.com/users/3305454/roberrrt-s"}, "edited": false, "score": 0, "creation_date": 1472483664, "post_id": 39208837, "comment_id": 65758013, "body": "@Roberrrt and a bright future! My rule is that if it has CGI then it doesn&#39;t comply to anything. ;-) Also the code in question does not have <code>use strict</code> or <code>use warnings</code> and has <code>FatalsToBrowser</code> in it. All of those are good indications that it&#39;s very old."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1472484354, "post_id": 39208837, "comment_id": 65758440, "body": "In regards to restarting this with a modern web framework, can you tell us a bit more background? Is this a personal project, is it for paid work, or for school? Do you have the authority to just change everything and start from scratch? Is it going to run somewhere where you can decide what kind of program will be run there? All of those need to be taken into account before making such a decision. Dancer has a very low learning curve for simple things and is likely a good approach, but you need to know if you will be able to use it in your specific setting."}, {"owner": {"reputation": 1786, "user_id": 1820650, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/ce47757627908a1013e0951158f4c2e6?s=128&d=identicon&r=PG", "display_name": "Dr.Avalanche", "link": "https://stackoverflow.com/users/1820650/dr-avalanche"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1472484372, "post_id": 39208837, "comment_id": 65758452, "body": "@simbabque no, the page <code>success.cgi</code> can be seen in the JavaScript redirect, nothing is passed to it to validate a login. Anyone could type this into the URL bar and get there, without having to type in the hardcoded plain text login details also in the JavaScript"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 1786, "user_id": 1820650, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/ce47757627908a1013e0951158f4c2e6?s=128&d=identicon&r=PG", "display_name": "Dr.Avalanche", "link": "https://stackoverflow.com/users/1820650/dr-avalanche"}, "edited": false, "score": 0, "creation_date": 1472484400, "post_id": 39208837, "comment_id": 65758473, "body": "@Dr.Avalanche yes, I reread your comment and then understood what you mean. Sorry about that. I agree."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1472484995, "post_id": 39208837, "comment_id": 65758835, "body": "I believe <a href=\"https://youtu.be/jKOqtRMT85s\" rel=\"nofollow noreferrer\">this lightning talk</a> by Sawyer X is very relevant and highly entertaining."}, {"owner": {"reputation": 67, "user_id": 6699525, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e9f6d64aed2540e4e050fd906d977e9d?s=128&d=identicon&r=PG", "display_name": "superzero10", "link": "https://stackoverflow.com/users/6699525/superzero10"}, "reply_to_user": {"reputation": 1786, "user_id": 1820650, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/ce47757627908a1013e0951158f4c2e6?s=128&d=identicon&r=PG", "display_name": "Dr.Avalanche", "link": "https://stackoverflow.com/users/1820650/dr-avalanche"}, "edited": false, "score": 0, "creation_date": 1472545962, "post_id": 39208837, "comment_id": 65782823, "body": "@Dr.Avalanche sorry i was not at work. so, my project is to do a dashboard web with login, who display statuts of many servers. It&#39;s for paid work, for my traineeship. the server use index.cgi first. my boss ask for perl usage for server request at least"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1472547712, "post_id": 39208837, "comment_id": 65783963, "body": "In that case, using a modern web framework might not be the best approach. Your boss might not like that. I suggest you look at existing code. There are probably a bunch of programs that already do what you want. Read code, and also read the version control history. It will tell you a lot about how work is being done in your company. On the other hand, if your company is fine with using new stuff, go for a Dancer2 application."}, {"owner": {"reputation": 67, "user_id": 6699525, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e9f6d64aed2540e4e050fd906d977e9d?s=128&d=identicon&r=PG", "display_name": "superzero10", "link": "https://stackoverflow.com/users/6699525/superzero10"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1472553158, "post_id": 39208837, "comment_id": 65787634, "body": "@simbabque can i use Dancer &#39;1&#39; ? he is already install on my server and it might be difficult to install Dancer2.. and, when i try to run app.pl, he says : bind to 0.0.0.0:3000: Address already in use at... /Dancer.pm"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1472555015, "post_id": 39208837, "comment_id": 65788833, "body": "Sure. Dancer is fine. There is one running on port 3000. That is good because it shows it will work. You need to use a different port though. That should be <code>-p 4444</code> or something like that. The port is where the server is going to listen."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1472555186, "post_id": 39208837, "comment_id": 65788954, "body": "I can&#39;t search right now as I am on my phone. Go to metacpan.org and look for the Dancer tutorial. Or go to irc.perl.org and join # dancer. People there will explain. :-)"}, {"owner": {"reputation": 67, "user_id": 6699525, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e9f6d64aed2540e4e050fd906d977e9d?s=128&d=identicon&r=PG", "display_name": "superzero10", "link": "https://stackoverflow.com/users/6699525/superzero10"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1472559320, "post_id": 39208837, "comment_id": 65791618, "body": "@simbabque so, i want to put dancer on the port 1080, where my website is supposed to be, but same problem. then, i tried random port : 1090, 1081, 2000... and when i sucess to &quot;enter the dancefloor&quot; i can&#39;t access the page. i think this might come from my server, but it&#39;s a huge server with many stuff on it so i don&#39;t want to mess with it..."}, {"owner": {"reputation": 67, "user_id": 6699525, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e9f6d64aed2540e4e050fd906d977e9d?s=128&d=identicon&r=PG", "display_name": "superzero10", "link": "https://stackoverflow.com/users/6699525/superzero10"}, "edited": false, "score": 0, "creation_date": 1472559447, "post_id": 39208837, "comment_id": 65791701, "body": "and the fact that Dancer needs to be run 24/7 to access the website is weird"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1472560237, "post_id": 39208837, "comment_id": 65792223, "body": "You need to understand how the whole thing works. Maybe read the Plack documentation. Dancer is running through PSGI, not CGI. For a CGI script, there is a webserver like Apache 2. For PSGI/Plack, there is not. It brings its own tiny server. You will need to <i>deploy</i> it, and it will then run itself. You run the <code>bin&#47;app.pl</code> manually only during development. When you pick your port, let&#39;s say you do <code>perl bin&#47;app.pl -p 1090</code>, then it will listen on that port. So on the same machine, you go to <a href=\"http://localhost:1090/\" rel=\"nofollow noreferrer\">localhost:1090</a> to access it. Read up on PSGI/Plack on CPAN, it&#39;s very easy once you understand"}], "answers": [{"tags": [], "owner": {"reputation": 111, "user_id": 6447967, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-4kt-uhK8pQk/AAAAAAAAAAI/AAAAAAAAADM/d7KEkgnoFOw/photo.jpg?sz=128", "display_name": "Shaka Flex", "link": "https://stackoverflow.com/users/6447967/shaka-flex"}, "is_accepted": false, "score": 0, "last_activity_date": 1473245077, "last_edit_date": 1495542167, "creation_date": 1473245077, "answer_id": 39367759, "question_id": 39208837, "link": "https://stackoverflow.com/questions/39208837/web-login-usage-with-perl-and-cgi/39367759#39367759", "title": "Web login usage with Perl and CGI", "body": "<p>First your method is very insecure. </p>\n\n<p>I found this link that should put you on the right track, it does not <code>use HTML::Template;</code> but you can add that in for your code. \n<a href=\"https://stackoverflow.com/questions/10991156/login-and-logout-of-sessions-in-2-cgi-scripts\" title=\"login and logout of sessions in 2 cgi scripts\">login and logout of sessions in 2 cgi scripts</a></p>\n"}], "owner": {"reputation": 67, "user_id": 6699525, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e9f6d64aed2540e4e050fd906d977e9d?s=128&d=identicon&r=PG", "display_name": "superzero10", "link": "https://stackoverflow.com/users/6699525/superzero10"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1360, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1473245077, "creation_date": 1472481334, "question_id": 39208837, "link": "https://stackoverflow.com/questions/39208837/web-login-usage-with-perl-and-cgi", "title": "Web login usage with Perl and CGI", "body": "<p>I have to do a website with <code>.cgi</code> files, so i have my index.cgi :</p>\n\n<pre><code>#!/usr/bin/perl\nuse CGI qw/:standard/;\nuse HTML::Template;\nuse CGI::Session;\nuse CGI::Carp qw(fatalsToBrowser);\nrequire \"cgi-bin/web_base.pl\";\n\nmy $q = CGI-&gt;new();\nmy $s = CGI::Session-&gt;new($q);\n\nprint header();\n\nprint my_topbar();\n\nprint login_form();\nprint footer();\n</code></pre>\n\n<blockquote>\n  <p>\"web_base.pl\"  contains functions who print html code</p>\n</blockquote>\n\n<p>evrything is displaying corectly etc.. but i don't understand anything about login form :/</p>\n\n<p>here is my login form input :</p>\n\n<pre><code>&lt;div class=\"container\" align=center&gt;\n    &lt;form id=\"form_id\" method=\"post\" name=\"myform\"&gt;\n        &lt;font color=\"white\"&gt;\n            &lt;label&gt;Username :&lt;/label&gt;\n            &lt;input type=\"text\" class=\"form-small\" name=\"username\" id=\"username\"/&gt;\n            &lt;br&gt;\n            &lt;label&gt;Password :&lt;/label&gt;\n            &lt;input type=\"password\" class=\"form-small\" name=\"password\" id=\"password\"/&gt;\n            &lt;br&gt;\n            &lt;input type=\"button\" class=\"form-small btn btn-default\" value=\"Login\" id=\"submit\" onclick=\"validate()\"/&gt;\n        &lt;/font&gt;\n    &lt;/form&gt;\n</code></pre>\n\n<p>and my JS login script (he is include in header) :</p>\n\n<pre><code>function validate(){\nvar username = document.getElementById(\"username\").value;\nvar password = document.getElementById(\"password\").value;\nif ( username == \"moomoo\" &amp;&amp; password == \"foobar\"){\nalert (\"Login successfully\");\nwindow.location = \"success.cgi\"; // Redirecting to other page.\nreturn false;\n}\nelse\n{\nalert(\"Error: Invalid username or password. Try again or contact support.\");\nreturn false;\n}\n}\n</code></pre>\n\n<p>So, my question is, how can i make my website verify if user is logged on every page ? and change few things like display disconnect button etc...</p>\n\n<p>I hope someone nice is going to help me &lt;3 i'm on this since 1 week ago :')</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 917, "user_id": 3014263, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rFh51.jpg?s=128&g=1", "display_name": "AbhiNickz", "link": "https://stackoverflow.com/users/3014263/abhinickz"}, "edited": false, "score": 0, "creation_date": 1472481096, "post_id": 39208504, "comment_id": 65756435, "body": "Are JIRA, DEV &amp; QA fixed?"}, {"owner": {"reputation": 456, "user_id": 4902679, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/4c798e668824f0209721b21bcb86ba1f?s=128&d=identicon&r=PG&f=1", "display_name": "Goku", "link": "https://stackoverflow.com/users/4902679/goku"}, "reply_to_user": {"reputation": 917, "user_id": 3014263, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rFh51.jpg?s=128&g=1", "display_name": "AbhiNickz", "link": "https://stackoverflow.com/users/3014263/abhinickz"}, "edited": false, "score": 0, "creation_date": 1472481165, "post_id": 39208504, "comment_id": 65756458, "body": "@AbhiNickz : Firstly thanks and Yes, they are fixed."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1472483805, "post_id": 39208504, "comment_id": 65758100, "body": "You mean someone wrote the original code for you and you have no idea how to modify it?"}, {"owner": {"reputation": 456, "user_id": 4902679, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/4c798e668824f0209721b21bcb86ba1f?s=128&d=identicon&r=PG&f=1", "display_name": "Goku", "link": "https://stackoverflow.com/users/4902679/goku"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1472484338, "post_id": 39208504, "comment_id": 65758429, "body": "@Borodin : This is the pre-exisiting script in system and I&#39;m trying to modify according to my requirement as displayed above . I&#39;m kind of new to Perl so struggling to get the exact logic"}, {"owner": {"reputation": 6313, "user_id": 328115, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/9a029d2d948f128443f996fa12b3d3a1?s=128&d=identicon&r=PG", "display_name": "dolmen", "link": "https://stackoverflow.com/users/328115/dolmen"}, "edited": false, "score": 0, "creation_date": 1472552324, "post_id": 39208504, "comment_id": 65787070, "body": "@Goku So you mean you haven&#39;t tried anything by yourself, but want someone to to the job for you?"}], "answers": [{"comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1472486712, "post_id": 39209992, "comment_id": 65759860, "body": "That&#39;s a poor example of Perl. Apart from anything else, it uses <code>keys</code> and <code>values</code> on hard references, which wasn&#39;t possible until Perl v5.14 and has been made illegal in v5.24. That means it will only work on five different releases of Perl, and will probably generating a warnings even on those."}], "tags": [], "owner": {"reputation": 917, "user_id": 3014263, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rFh51.jpg?s=128&g=1", "display_name": "AbhiNickz", "link": "https://stackoverflow.com/users/3014263/abhinickz"}, "is_accepted": false, "score": 0, "last_activity_date": 1472486629, "last_edit_date": 1472486629, "creation_date": 1472484763, "answer_id": 39209992, "question_id": 39208504, "link": "https://stackoverflow.com/questions/39208504/perl-output-format/39209992#39209992", "title": "Perl output format", "body": "<pre><code>#!/usr/bin/perl -w\n\nuse strict;\nuse warnings;\n\nuse Data::Dumper;\n\nmy $file = 'test';\nmy $hash;\nmy $id_hash = ();\nmy $line_found = 0;\nmy $line_count = 1;\nmy $ID;\nmy $ID_num;\n\nopen (my $FH, '&lt;', \"$file\") or warn $!;\n\nwhile (my $line = &lt;$FH&gt; ) {\n\n    chomp($line);\n\n    if ( $line =~ m/------------------------------------------/){\n        $line_found = 1;\n        $line_count++;\n        next;\n    }\n\n    if ( $line_found ) {\n        $line =~ m/(.*?):(.*)/;\n        $ID = $1;\n        $ID_num = $2;\n        $line_found = 0;\n    }\n\n    if ( $line =~ m/Program:(.*)/ ) {\n        my $pro = $1;\n        push @{$hash-&gt;{$pro}-&gt;{$ID}}, ($ID_num) ;\n    }\n\n    $line_count++;\n}\n\nclose $FH;\n\nforeach my $pro (keys %$hash){\n    # print Dumper($pro);\n\n    print \"PROGRAM:\\t$pro\\nChange IDs:\\n\";\n\n    foreach my $ids (keys $hash-&gt;{$pro}){\n\n        print \"\\t1. $ids\\n\";\n\n        foreach my $id (values $hash-&gt;{$pro}-&gt;{$ids}){\n            print \"\\t\\ta. $id\\n\";\n        }\n    }\n}\n</code></pre>\n\n<h3>OUTPUT</h3>\n\n<pre><code>PROGRAM:        Testing\nChange IDs:\n        1. QA\n                a.  COM-9696\n        1. DEV\n                a.  COM-1258\n        1. JIRA\n                a.  COM-6789\n                a.  COM-8585\nPROGRAM:        Development\nChange IDs:\n        1. JIRA\n                a. COM-1234\n                a. COM-1234\n</code></pre>\n\n<p>Just change the output to your need!!</p>\n"}, {"comments": [{"owner": {"reputation": 456, "user_id": 4902679, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/4c798e668824f0209721b21bcb86ba1f?s=128&d=identicon&r=PG&f=1", "display_name": "Goku", "link": "https://stackoverflow.com/users/4902679/goku"}, "edited": false, "score": 0, "creation_date": 1472535024, "post_id": 39210673, "comment_id": 65776827, "body": "Really appreciate your inputs here and for the suggestions."}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": true, "score": 1, "last_activity_date": 1472487113, "creation_date": 1472487113, "answer_id": 39210673, "question_id": 39208504, "link": "https://stackoverflow.com/questions/39208504/perl-output-format/39210673#39210673", "title": "Perl output format", "body": "<p></p>\n\n<p>I would write this</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>use strict;\nuse warnings 'all';\n\nuse List::Util 'uniq';\n\nmy $file = 'log.txt';\nopen my $fh, $file or die \"Couldn't open file: [$!]\\n\";\n\nmy @data;\n{\n    my %item;\n\n    while ( &lt;$fh&gt; ) {\n        chomp;\n\n        if ( eof or /\\-{2,}/ ) {\n            push @data, { %item } if keys %item;\n            %item = ();\n        }\n        else {\n            my ( $key, $value ) = split /\\s*:\\s*/;\n            next unless $value;\n            $item{$key} = $value;\n            $item{jira} = $key if grep { $key eq $_ } qw/ JIRA DEV QA /;\n        }\n    }\n}\n\nmy %data;\n{\n    for my $item ( @data ) {\n        my ($prog, $jira) = @{$item}{qw/ Program jira /};\n        push @{ $data{$prog}{$jira} }, $item-&gt;{$jira};\n    }\n}\n\nfor my $prog ( sort keys %data ) {\n\n    printf \"PROGRAM:   %s\\n\", $prog;\n    print \"Change IDs:\\n\";\n\n    my $n = 1;\n    for my $jira ( qw/ JIRA QA DEV / ) {\n\n        next unless my $codes = $data{$prog}{$jira};\n\n        printf \"%d.%s\\n\", $n++, $jira;\n\n        my $l = 'a';\n        printf \"    %s.%s\\n\", $l++, $_ for sort(uniq(@$codes));\n    }\n\n    print \"\\n\";\n}\n</code></pre>\n\n<h3>output</h3>\n\n<pre class=\"lang-none prettyprint-override\"><code>PROGRAM:   Development\nChange IDs:\n1.JIRA\n    a.COM-1234\n\nPROGRAM:   Testing\nChange IDs:\n1.JIRA\n    a.COM-6789\n    b.COM-8585\n2.QA\n    a.COM-9696\n3.DEV\n    a.COM-1258\n</code></pre>\n"}], "owner": {"reputation": 456, "user_id": 4902679, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/4c798e668824f0209721b21bcb86ba1f?s=128&d=identicon&r=PG&f=1", "display_name": "Goku", "link": "https://stackoverflow.com/users/4902679/goku"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 72, "favorite_count": 1, "accepted_answer_id": 39210673, "answer_count": 2, "score": -4, "last_activity_date": 1524828702, "creation_date": 1472480261, "last_edit_date": 1524828702, "question_id": 39208504, "link": "https://stackoverflow.com/questions/39208504/perl-output-format", "title": "Perl output format", "body": "<p>I'm reading a log file and grouping it based on the 'Program' name and in turn its ID.</p>\n\n<p>LOG FILE</p>\n\n<pre><code>------------------------------------------\nDEV: COM-1258\nProgram:Testing\nReviewer:Jackie\nDescription:New Entries\nrev:r145201\n------------------------------------------\nQA: COM-9696\nProgram:Testing\nReviewer:Poikla\nDescription:Some random changes\nrev:r112356\n------------------------------------------\nJIRA: COM-1234\nProgram:Development\nReviewer:John Wick\nDescription:Genral fix\nrev:r345676\n------------------------------------------\nJIRA:COM-1234\nProgram:Development\nReviewer:None\nDescription:Updating Received\nrev:r909276\n------------------------------------------\nJIRA: COM-6789\nProgram:Testing\nReviewer:Balise Mat\nDescription:Audited\nrev:r876391\n------------------------------------------\nJIRA: COM-8585\nProgram:Testing\nReviewer:Gold frt\nDescription: yet to be reviewed\nrev:r565639\n</code></pre>\n\n<p>The code I have,</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\n\nuse Data::Dumper;\n\n$Data::Dumper::Sortkeys = 1;\n$Data::Dumper::Terse    = 1;\n\nmy $file = \"log.txt\";\nopen FH, $file or die \"Couldn't open file: [$!]\\n\";\n\nmy $data = {};\nmy $hash = {};\nwhile (&lt;FH&gt;)\n{\n    my $line = $_;\n    chomp $line;\n    if ($line =~ m/(-){2,}/)\n    {\n        my $program = $hash-&gt;{Program} || '';\n        my $jira    = $hash-&gt;{JIRA} || $hash-&gt;{QA} || $hash-&gt;{DEV} ||\n+'';\n        if ($program &amp;&amp; $jira)\n        {\n            push @{$data-&gt;{$program}{$jira}}, $hash;\n            $hash = {};\n        }\n    }\n    else\n    {\n        if ($line =~ m/:/)\n        {\n            my ($key, $value) = split /:\\s*/, $line;\n            $hash-&gt;{$key} = $value;\n        }\n        elsif ($line =~ m#/# &amp;&amp; exists $hash-&gt;{Files})\n        {\n            $hash-&gt;{Files} .= \"\\n$line\";\n        }\n    }\n}\nprint 'data = ' . Dumper($data);\n\nforeach my $prg (sort keys %{$data})\n{\n    print \"===========================================================\n+=\\n\";\n    print \"    PROGRAM : $prg\n+         \\n\";\n    print \"===========================================================\n+=\\n\";\n\n    foreach my $jira (sort keys %{$data-&gt;{$prg}})\n    {\n        print \"******************\\n\";\n        print \"JIRA ID : $jira\\n\";\n        print \"******************\\n\";\n\n        foreach my $hash (@{$data-&gt;{$prg}{$jira}})\n        {\n            foreach my $key (keys %{$hash})\n            {\n                # print the data except Program and JIRA\n                next if $key =~ m/(Program|JIRA|DEV|QA)/;\n                print \"    $key =&gt; $hash-&gt;{$key}\\n\";\n            }\n            print \"\\n\";\n        }\n    }\n}\n</code></pre>\n\n<p>I have a requirement to print the output in the <strong>below format</strong> and currently unable to do so with my logic, any ideas would be really helpful.</p>\n\n<pre><code>PROGRAM:  Development\nChange IDs:\n1.JIRA\n    a.COM-1234\n\nPROGRAM:  Testing\nChange IDs:\n1.JIRA\n    a.COM-6789\n    b.COM-8585\n2.QA\n    a.COM-9696\n3.DEV\n    a.COM-1258\n</code></pre>\n"}, {"tags": ["perl", "super"], "comments": [{"owner": {"reputation": 11, "user_id": 6770296, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aa21aa122a8df678581cfb3370812e06?s=128&d=identicon&r=PG&f=1", "display_name": "Adam", "link": "https://stackoverflow.com/users/6770296/adam"}, "reply_to_user": {"reputation": 17713, "user_id": 226648, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/3196df423fd95dc4fce7dfadb8ec9953?s=128&d=identicon&r=PG", "display_name": "el.pescado", "link": "https://stackoverflow.com/users/226648/el-pescado"}, "edited": false, "score": 0, "creation_date": 1472479580, "post_id": 39207985, "comment_id": 65755433, "body": "I&#39;m not sure what that means @el.pescado"}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 6770296, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aa21aa122a8df678581cfb3370812e06?s=128&d=identicon&r=PG&f=1", "display_name": "Adam", "link": "https://stackoverflow.com/users/6770296/adam"}, "edited": false, "score": 0, "creation_date": 1472479895, "post_id": 39208287, "comment_id": 65755648, "body": "Wow. I completely overlooked that. The case was my issue. new vs New. It works now. Thank you very much!"}], "tags": [], "owner": {"reputation": 17713, "user_id": 226648, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/3196df423fd95dc4fce7dfadb8ec9953?s=128&d=identicon&r=PG", "display_name": "el.pescado", "link": "https://stackoverflow.com/users/226648/el-pescado"}, "is_accepted": true, "score": 2, "last_activity_date": 1472479564, "creation_date": 1472479564, "answer_id": 39208287, "question_id": 39207985, "link": "https://stackoverflow.com/questions/39207985/perl-cant-locate-object-method-via-modulesuper/39208287#39208287", "title": "Perl - Can&#39;t locate object method via &quot;Module::SUPER&quot;", "body": "<pre><code>\"Can't locate object method \"New\" via package \"Module::SUPER\" at Module.pm line 10\"\n</code></pre>\n\n<p>You try to call <code>BaseModule::New</code> whis hasn't been defined (did you mean <code>BaseModule::new</code>? Perl is case sensitive).</p>\n\n<blockquote>\n  <p>Do I need to bless the child class if the parent class returns an\n  already blessed $self?</p>\n</blockquote>\n\n<p>No, <code>$self</code> at that point is already blesses (you could check that by means of <code>Scalar::Util::blessed()</code>.</p>\n"}], "owner": {"reputation": 11, "user_id": 6770296, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aa21aa122a8df678581cfb3370812e06?s=128&d=identicon&r=PG&f=1", "display_name": "Adam", "link": "https://stackoverflow.com/users/6770296/adam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 661, "favorite_count": 0, "accepted_answer_id": 39208287, "answer_count": 1, "score": 0, "last_activity_date": 1472479564, "creation_date": 1472478667, "question_id": 39207985, "link": "https://stackoverflow.com/questions/39207985/perl-cant-locate-object-method-via-modulesuper", "title": "Perl - Can&#39;t locate object method via &quot;Module::SUPER&quot;", "body": "<p>This is my first time using OOP with perl. I am in the processes of refactoring a 4k line procedural program at work. It seems pretty straight forward but I am having an issue with inheritance and SUPER.</p>\n\n<p><strong>Error message:</strong> <br /></p>\n\n<pre><code>\"Can't locate object method \"New\" via package \"Module::SUPER\" at Module.pm line 10\"\n</code></pre>\n\n<p>I have tried, use base, parent and setting @ISA but they all get the same error. I'm sure I have to be overlooking something.</p>\n\n<p>(This is not code from the program I am working on. Just an example that produces the same error)</p>\n\n<p>All .pm and .pl files are in the same directory in this example. In the program I am working on the main program is in bin and the modules will be in ../modules(relative to bin). <br/>\nI would assume this would be all I need to make that work:</p>\n\n<pre><code>use lib \"../modules\";\n</code></pre>\n\n<p> If I am wrong in thinking that please let me know.</p>\n\n<p><strong>Parent Module</strong></p>\n\n<pre><code>package BaseModule;\nuse strict;\nuse warnings;\nsub new {\n    my $class = shift;\n    my $self  = {\n        ARRAY =&gt; shift,\n        DIVIDER =&gt; \",\"\n    };\n    bless ($self, $class);\n    return $self;\n}\nsub array {\n    my $self = shift;\n    if(@_) { $self-&gt;{ARRAY} = shift };\n    return $self-&gt;{ARRAY};  \n}\nsub divider {\n    my $self = shift;\n    if(@_) { $self-&gt;{DIVIDER} = shift };\n    return $self-&gt;{DIVIDER};    \n}\nsub testSub {\n    my $self = shift;   \n    print join($self-&gt;{DIVIDER}, @{ $self-&gt;{ARRAY} } );\n    return 1;\n}\n\n1;\n</code></pre>\n\n<p><strong>Child Module</strong></p>\n\n<pre><code>package Module;\nuse strict;\nuse warnings;\n#use base qw(BaseModule);\n#require BaseModule;\n#our @ISA = qw(BaseModule);\nuse parent qw(BaseModule);\nsub new {\n    my $class = shift;\n    my $self  = $class-&gt;SUPER::New(@_);\n    $self-&gt;{STRING} = shift;\n    bless ($self, $class);\n    return $self;\n}\nsub string {\n    my $self = shift;\n    if(@_) { $self-&gt;{STRING} = shift };\n    return $self-&gt;{STRING}; \n}\nsub testSub {\n    my $self = shift;\n    print \"$self-&gt;{STRING}:\\n\";\n    $self-&gt;SUPER::testSub();\n    return 1;\n}    \n1;\n</code></pre>\n\n<p>Do I need to bless the child class if the parent class returns an already blessed $self?</p>\n\n<p><strong>Main Script</strong></p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\nuse Module;\n\nmy $module = Module-&gt;new([1, 2, 3, 4, 5], \"Example\");\n$module-&gt;divider(\" | \"); # Test Changing divider;\n$module-&gt;testSub();\n</code></pre>\n\n<p>Any help is greatly appreciated.</p>\n"}, {"tags": ["perl", "shell", "unix", "awk", "sed"], "comments": [{"owner": {"reputation": 172306, "user_id": 164835, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/ayYoh.jpg?s=128&g=1", "display_name": "Kent", "link": "https://stackoverflow.com/users/164835/kent"}, "edited": false, "score": 1, "creation_date": 1472472410, "post_id": 39205870, "comment_id": 65750609, "body": "I guess this question has been answered here &gt;10 times."}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 6164910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7aeedf4e2673af921cad5771feb39bbb?s=128&d=identicon&r=PG&f=1", "display_name": "RAZ", "link": "https://stackoverflow.com/users/6164910/raz"}, "edited": false, "score": 0, "creation_date": 1472472631, "post_id": 39205918, "comment_id": 65750744, "body": "I Tried awk also but it is adding blank line in the end I am giving actual scenario   $ cat FoundationIssuerPlusDailyChange_ObjectRelType.txt_bkp 1&#39;~&#39;Issuer to Company&#39;~&#39;137&#39;~&#39;2#@#@#2&#39;~&#39;Contract to Underlying Security&#39;~&#39;21&#39;~&#39;21#@#@#wdm@wuvra96a0540:/opt/informatica/Inf&zwnj;&#8203;ormatica_Projects/wd&zwnj;&#8203;m/infa_shared/SrcFil&zwnj;&#8203;es $ awk &#39;!seen[$0]++&#39; FoundationIssuerPlusDailyChange_ObjectRelType.txt_bkp 1&#39;~&#39;Issuer to Company&#39;~&#39;137&#39;~&#39;2#@#@#2&#39;~&#39;Contract to Underlying Security&#39;~&#39;21&#39;~&#39;21#@#@# wdm@wuvra96a0540:/opt/informatica/Informatica_Projects/wdm/i&zwnj;&#8203;nfa_shared/SrcFiles"}, {"owner": {"reputation": 658023, "user_id": 548225, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/dab08478b226280d4a30894c9a7ed719?s=128&d=identicon&r=PG", "display_name": "anubhava", "link": "https://stackoverflow.com/users/548225/anubhava"}, "reply_to_user": {"reputation": 3, "user_id": 6164910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7aeedf4e2673af921cad5771feb39bbb?s=128&d=identicon&r=PG&f=1", "display_name": "RAZ", "link": "https://stackoverflow.com/users/6164910/raz"}, "edited": false, "score": 1, "creation_date": 1472472735, "post_id": 39205918, "comment_id": 65750822, "body": "That is only possible if input file has blank lines. In that case try: <code>awk &#39;NF &amp;&amp; !seen[$0]++&#39; file</code>"}], "tags": [], "owner": {"reputation": 658023, "user_id": 548225, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/dab08478b226280d4a30894c9a7ed719?s=128&d=identicon&r=PG", "display_name": "anubhava", "link": "https://stackoverflow.com/users/548225/anubhava"}, "is_accepted": false, "score": 1, "last_activity_date": 1472472281, "creation_date": 1472472281, "answer_id": 39205918, "question_id": 39205870, "link": "https://stackoverflow.com/questions/39205870/sed-comand-to-remove-duplicate-records-from-file-witout-sorting/39205918#39205918", "title": "sed comand to remove duplicate Records from file witout sorting", "body": "<p>awk is better suited for this by using an associative array with key as record itself:</p>\n\n<pre><code>awk '!seen[$0]++' file\n\nA B C\nE F G\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 6164910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7aeedf4e2673af921cad5771feb39bbb?s=128&d=identicon&r=PG&f=1", "display_name": "RAZ", "link": "https://stackoverflow.com/users/6164910/raz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 64, "favorite_count": 0, "closed_date": 1472472700, "answer_count": 1, "score": 0, "last_activity_date": 1472472335, "creation_date": 1472472135, "last_edit_date": 1472472335, "question_id": 39205870, "link": "https://stackoverflow.com/questions/39205870/sed-comand-to-remove-duplicate-records-from-file-witout-sorting", "closed_reason": "Duplicate", "title": "sed comand to remove duplicate Records from file witout sorting", "body": "<p>source file </p>\n\n<pre><code>A B C\nE F G\nA B C\n</code></pre>\n\n<p>o/p Should  be</p>\n\n<pre><code>A B C\nE F G\n</code></pre>\n\n<p>i dont want to use sort comand as it is adding blank line in the end.I used this</p>\n\n<pre><code>sed '$!N; /^\\(.*\\)\\n\\1$/!P; D'\n</code></pre>\n\n<p>but it required sorted data any alternative to sort the data instead of sed command..?</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1472471766, "post_id": 39205702, "comment_id": 65750212, "body": "You have a couple of very strange things going on in there. I believe your code does not do what you think it does at all. As for the correctness of the code, I do not see a syntax error in it. It will likely compile. But it&#39;s weird."}, {"owner": {"reputation": 920, "user_id": 4819884, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/5b96c68654d5ecce5ace521d7371fec5?s=128&d=identicon&r=PG&f=1", "display_name": "yonyon100", "link": "https://stackoverflow.com/users/4819884/yonyon100"}, "edited": false, "score": 0, "creation_date": 1472471968, "post_id": 39205702, "comment_id": 65750365, "body": "<code>print</code> returns <code>true</code> or <code>false</code> based on its success or failure. What are you trying to get in <code>$abc</code>? If that variable needs to contain <code>$var1,$var2,$var3\\n</code> then you should omit the <code>print</code>, open the file to write to (possibly in append mode <code>&gt;&gt;</code> so you won&#39;t overwrite) and print to that filehandle."}], "answers": [{"tags": [], "owner": {"reputation": 793701, "user_id": 19068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d2d3229ed1961d2bd81853242493247?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/19068/quentin"}, "is_accepted": false, "score": 2, "last_activity_date": 1472471870, "creation_date": 1472471870, "answer_id": 39205779, "question_id": 39205702, "link": "https://stackoverflow.com/questions/39205702/write-if-statement-variable-to-new-file/39205779#39205779", "title": "Write If Statement Variable to New File", "body": "<p>Your current code:</p>\n\n<ol>\n<li>Prints the string</li>\n<li>Assigns the result of printing it to a variable</li>\n<li>Immediately overwrites that variable with a file handle (assuming <code>open</code> succeeded)</li>\n<li>Closes that file handle without using it</li>\n</ol>\n\n<p>Your logic should look more like this:</p>\n\n<pre><code>if ( $var1 =~ \"c01\" &amp;&amp; $var2 =~ \"$newdate\" ) {\n    my $abc = \"$var1,$var2,$var3\\n\"\n    open (my $file, '&gt;', '/home/.../.../newfile.txt') || die(\"Could not open file: \" . $!);\n    print $file $abc;\n    close $file;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 881, "user_id": 2888846, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/0b972b7482afdf07dfd240400f61a13a?s=128&d=identicon&r=PG&f=1", "display_name": "Aaron Perry", "link": "https://stackoverflow.com/users/2888846/aaron-perry"}, "edited": false, "score": 0, "creation_date": 1472472895, "post_id": 39205882, "comment_id": 65750933, "body": "Thank you very much for helping me out with my wonky code! I am currently getting the following output from the <code>print $fh_out</code> line :<code>GLOB(0x2643690)</code>, and still no new file."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 881, "user_id": 2888846, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/0b972b7482afdf07dfd240400f61a13a?s=128&d=identicon&r=PG&f=1", "display_name": "Aaron Perry", "link": "https://stackoverflow.com/users/2888846/aaron-perry"}, "edited": false, "score": 1, "creation_date": 1472473127, "post_id": 39205882, "comment_id": 65751080, "body": "The <code>GLOB()</code> is a filehandle reference. In my code above, note that there is <b>no comma</b> after the <code>print $fh_out</code>. That&#39;s because it tells <code>print</code> where to print to."}, {"owner": {"reputation": 881, "user_id": 2888846, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/0b972b7482afdf07dfd240400f61a13a?s=128&d=identicon&r=PG&f=1", "display_name": "Aaron Perry", "link": "https://stackoverflow.com/users/2888846/aaron-perry"}, "edited": false, "score": 0, "creation_date": 1472473511, "post_id": 39205882, "comment_id": 65751336, "body": "Any idea as to why I am still having a problem with <code>&quot;$var1,$var2,$var3\\n&quot;</code> not being passed to a new file named <code>newfile.txt</code>?"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 881, "user_id": 2888846, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/0b972b7482afdf07dfd240400f61a13a?s=128&d=identicon&r=PG&f=1", "display_name": "Aaron Perry", "link": "https://stackoverflow.com/users/2888846/aaron-perry"}, "edited": false, "score": 0, "creation_date": 1472473673, "post_id": 39205882, "comment_id": 65751440, "body": "@Aaaron without seeing updated code, I cannot answer that. You can edit your question and add the new code to the end with an explanation of what you updated and I&#39;ll take a look."}, {"owner": {"reputation": 881, "user_id": 2888846, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/0b972b7482afdf07dfd240400f61a13a?s=128&d=identicon&r=PG&f=1", "display_name": "Aaron Perry", "link": "https://stackoverflow.com/users/2888846/aaron-perry"}, "edited": false, "score": 0, "creation_date": 1472474505, "post_id": 39205882, "comment_id": 65752023, "body": "Updated the code for you. As for the code that you suggested, I have not changed any of it. I just copy/pasted and I am getting a new file but, it&#39;s empty (0 bytes)."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 881, "user_id": 2888846, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/0b972b7482afdf07dfd240400f61a13a?s=128&d=identicon&r=PG&f=1", "display_name": "Aaron Perry", "link": "https://stackoverflow.com/users/2888846/aaron-perry"}, "edited": false, "score": 0, "creation_date": 1472474599, "post_id": 39205882, "comment_id": 65752077, "body": "@AaronPerry reread my answer. If you run the code that you have in the question now, then it&#39;s still valid. You are not writing anything into the file, and the other things are still wrong. Just go through my answer point by point, and if you don&#39;t understand parts of it, ask in a comment."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 2, "creation_date": 1472474707, "post_id": 39205882, "comment_id": 65752147, "body": "<i>&quot;Don&#39;t do conditional assignments. If the condition is false, your <code>$abc</code> will be undef.&quot;</i>  There is nothing wrong with conditional assignments; the issue is with conditional <i>declarations</i>. <a href=\"http://perldoc.perl.org/perlsyn.html#Statement-Modifiers\" rel=\"nofollow noreferrer\"><b>perlsyn</b> says this</a> <i>&quot;The behaviour of a <code>my</code>, <code>state</code>, or <code>our</code> modified with a statement modifier conditional or loop construct (for example, <code>my $x if ...</code> ) is</i> <b>undefined</b>.*&quot;*"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 881, "user_id": 2888846, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/0b972b7482afdf07dfd240400f61a13a?s=128&d=identicon&r=PG&f=1", "display_name": "Aaron Perry", "link": "https://stackoverflow.com/users/2888846/aaron-perry"}, "edited": false, "score": 1, "creation_date": 1472476025, "post_id": 39205882, "comment_id": 65753045, "body": "@AaronPerry:  <i>&quot;I am getting a new file but, it&#39;s empty (0 bytes)&quot;</i> Maybe that&#39;s because none of the lines in your input contain <code>c01</code> in the second column? There are certainly no such lines in your sample data."}], "tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": false, "score": 4, "last_activity_date": 1472474830, "last_edit_date": 1472474830, "creation_date": 1472472171, "answer_id": 39205882, "question_id": 39205702, "link": "https://stackoverflow.com/questions/39205702/write-if-statement-variable-to-new-file/39205882#39205882", "title": "Write If Statement Variable to New File", "body": "<p>In your code you have a few odd things that are likely mistakes.</p>\n\n<pre><code>my $abc = print \"$var1,$var2,$var3\\n\" if ($var1 =~ \"c01\" &amp;&amp; $var2 =~ \"$newdate\");\n</code></pre>\n\n<ul>\n<li><code>print</code> will return success, which it does as <code>1</code>. So you will print out the string to STDOUT, and then assign <code>1</code> to a new lexical variable <code>$abc</code>. <code>$abc</code> is now <code>1</code>.</li>\n<li>All of that only happens if that condition is met. Don't do conditional assignments. The behavior for this is <em>undefined</em>. So if the condition is false, your <code>$abc</code> might be <code>undef</code>. Or something else. Who knows?</li>\n</ul>\n\n\n\n<pre><code>open my $abc, '&gt;', '/home/.../.../newfile.txt';\nclose $abc;\n</code></pre>\n\n<ul>\n<li>You are opening a new filehandle called <code>$abc</code>. The <code>my</code> will redeclare it. That's a warning that you would get if you had <code>use warnings</code> in your code. It also overwrites your old <code>$abc</code> with a new file handle object. </li>\n<li>You don't write anything to the file</li>\n<li><code>...</code> are weird foldernames, but that's probably just obfuscation for your example</li>\n</ul>\n\n<p>I think what you actually want to do is this:</p>\n\n<pre><code>use strict;\nuse warnings 'all';\n\n# ...\n\nopen my $fh, '&lt;', $filename or die $!;\nwhile ( my $line = &lt;$fh&gt; ) {\n    chomp $line;\n\n    my @fields = split( ',', $line );\n\n    my $site = $fields[0];\n    my $var1 = $fields[1];\n    my $var2 = $fields[4];\n    my $var3 = $fields[7];\n\n    open my $fh_out, '&gt;', '/home/.../.../newfile.txt';\n    print $fh_out \"$var1,$var2,$var3\\n\" if ( $var1 =~ \"c01\" &amp;&amp; $var2 =~ \"$newdate\" );\n    close $fh_out;\n}\nclose $fh;\n</code></pre>\n\n<p>You don't need the <code>$abc</code> variable in between at all. You can just print to your new file handle <code>$fh_out</code> that's open for writing.</p>\n\n<p>Note that you will overwrite the <code>newfile.txt</code> file every time you have a match in a line inside <code>$filename</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 0, "last_activity_date": 1472475597, "creation_date": 1472475597, "answer_id": 39206970, "question_id": 39205702, "link": "https://stackoverflow.com/questions/39205702/write-if-statement-variable-to-new-file/39206970#39206970", "title": "Write If Statement Variable to New File", "body": "<p>You have a number of problems with your code. In addition to what others have mentioned</p>\n\n<ul>\n<li><p>You create a new output file every time you find a matching input line. That will leave the file containing only the <em>last</em> printed string</p></li>\n<li><p>Your test checks whether the text in the second column contains <code>c01</code>, but all of the lines in your sample input have <code>control</code> in the second column, so nothing will be printed</p></li>\n<li><p>I'm guessing that you want to test for <em>string equality</em>, in which case you need <code>eq</code> instead of <code>=~</code> which does a regular expression pattern match</p></li>\n</ul>\n\n<p>I think it should look something more like this</p>\n\n<pre><code>use strict;\nuse warnings 'all';\n\nuse POSIX 'strftime';\n\nmy $currdate = uc strftime '%d%b%Y', localtime;\n\nmy ($input, $output) = qw/ data.txt newfile.txt /;\n\nopen my $fh,     '&lt;', $input  or die qq{Unable to open \"$input\" for input: $!};\nopen my $out_fh, '&gt;', $output or die qq{Unable to open \"$output\" for output: $!};\n\nwhile ( &lt;$fh&gt; ) {\n  chomp;\n\n  my @fields = split /,/;\n  my ($site, $var1, $var2, $var3) = @fields[0,1,4,7];\n\n  next unless $var1 eq 'c01' and $var2 eq $currdate;\n\n  print $out_fh \"$var1,$var2,$var3\\n\";\n}\n\nclose $out_fh or die $!;\n</code></pre>\n"}], "owner": {"reputation": 881, "user_id": 2888846, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/0b972b7482afdf07dfd240400f61a13a?s=128&d=identicon&r=PG&f=1", "display_name": "Aaron Perry", "link": "https://stackoverflow.com/users/2888846/aaron-perry"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 112, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1472477475, "creation_date": 1472471612, "last_edit_date": 1472477475, "question_id": 39205702, "link": "https://stackoverflow.com/questions/39205702/write-if-statement-variable-to-new-file", "title": "Write If Statement Variable to New File", "body": "<p>I am trying to send a variable that is defined in an if statement <code>$abc</code> to a new file. The code seems correct but, I know that it is not working because the file is not being created.</p>\n\n<p><strong>Data File Sample:</strong></p>\n\n<pre><code>bos,control,x1,x2,29AUG2016,y1,y2,76.4\nbos,control,x2,x3,30AUG2016,y2,y3,78.9\nbos,control,x3,x4,01SEP2016,y3,y4,72.5\nbos,control,x4,x5,02SEP2016,y4,y5,80.5\n</code></pre>\n\n<p><strong>Perl Code:</strong></p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings 'all';\n\nuse POSIX qw(strftime); #Pull in date\n\nmy $currdate = strftime( \"%Y%m%d\", localtime ); #Date in YYYYMMDD format\nmy $modded = strftime( \"%d%b%Y\", localtime ); #Date in DDMONYYYY format\nmy $newdate = uc $modded; #converts lowercase to uppercase\n\nmy $filename = '/home/.../.../text_file'; #Define full file path before opening\n\nopen(FILE, '&lt;', $filename) or die \"Uh, where's the file again?\\n\"; #Open file else give up and relay snarky error\n\nwhile(&lt;FILE&gt;) #Open While Loop\n{\n  chomp;\n\n  my @fields = split(',' , $_); #Identify columns\n\n  my $site = $fields[0];\n  my $var1 = $fields[1];\n  my $var2 = $fields[4];\n  my $var3 = $fields[7];\n\n  my $abc = print \"$var1,$var2,$var3\\n\" if ($var1 =~ \"control\" &amp;&amp; $var2 =~ \"$newdate\");\n\n\n  open my $abc, '&gt;', '/home/.../.../newfile.txt';\n  close $abc;\n\n}\n\nclose FILE;\n</code></pre>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1472471162, "post_id": 39205497, "comment_id": 65749861, "body": "What are you expecting this to return?"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1472472252, "post_id": 39205497, "comment_id": 65750514, "body": "I disagree with the duplicate. I think OP&#39;s question is, why the return value is <code>1</code> and not something else."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1472472279, "post_id": 39205497, "comment_id": 65750534, "body": "Oh. I have a reopen-hammer?"}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1472480863, "post_id": 39205497, "comment_id": 65756303, "body": "Are you expecting it to return 2 instead of 1?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1472498155, "post_id": 39205497, "comment_id": 65765767, "body": "<code>&#47;m</code> (multi-line) is not the default, and the behaviour you described is the behaviour when <code>&#47;m</code> isn&#39;t used."}], "answers": [{"comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1472471634, "post_id": 39205686, "comment_id": 65750119, "body": "It actually does it in scalar context too. <code>my $foo = qq&#47;a\\n&#47; =~ &#47;$&#47;; print $foo;</code> is also <code>1</code>."}, {"owner": {"reputation": 14052, "user_id": 1004301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0a6aacd03deb37cb13cbc8b65e454f2b?s=128&d=identicon&r=PG", "display_name": "Lee Duhem", "link": "https://stackoverflow.com/users/1004301/lee-duhem"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1472472056, "post_id": 39205686, "comment_id": 65750415, "body": "@simbabque I guess in this case <code>perl</code> using <code>1</code> to indicate true value."}], "tags": [], "owner": {"reputation": 14052, "user_id": 1004301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0a6aacd03deb37cb13cbc8b65e454f2b?s=128&d=identicon&r=PG", "display_name": "Lee Duhem", "link": "https://stackoverflow.com/users/1004301/lee-duhem"}, "is_accepted": false, "score": 0, "last_activity_date": 1472474008, "last_edit_date": 1472474008, "creation_date": 1472471563, "answer_id": 39205686, "question_id": 39205497, "link": "https://stackoverflow.com/questions/39205497/why-does-a-match-against-regex-return-1-when-the-input-string-contains-a-newli/39205686#39205686", "title": "Why does a match against regex $ return 1 when the input string contains a newline?", "body": "<p>Here is how the following command works:</p>\n\n<pre><code>perl -e \"print qq/a\\n/ =~ /$/\"\n</code></pre>\n\n<ol>\n<li><code>print</code> provides a list context,and</li>\n<li>in list context, <code>m//</code> will return \"(1)\" for success, if there is no parentheses in the pattern, and</li>\n<li><code>$</code> match the end of the string (or before newline at the end of the string).</li>\n</ol>\n"}, {"tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": false, "score": 4, "last_activity_date": 1472471564, "creation_date": 1472471564, "answer_id": 39205688, "question_id": 39205497, "link": "https://stackoverflow.com/questions/39205497/why-does-a-match-against-regex-return-1-when-the-input-string-contains-a-newli/39205688#39205688", "title": "Why does a match against regex $ return 1 when the input string contains a newline?", "body": "<p>It prints <code>1</code> because there is a match. An ordinary pattern match like <code>m//</code> stops after the first match, and returns <code>1</code> because that's a true value.</p>\n\n<p>According to that explanation, it doesn't matter if it matches your <code>\"a\\n\"</code> after the <code>a</code> or after the <code>\\n</code> character. In either case, there's a match, so it's true, and that's represented by <code>1</code>.</p>\n\n<p>You can take a deeper look with <a href=\"https://v1.metacpan.org/pod/distribution/perl/ext/re/re.pm#debug-mode\" rel=\"nofollow\"><code>use re 'debug'</code></a>.</p>\n\n<pre><code>Compiling REx \"$\"\nFinal program:\n   1: EOL (2)\n   2: END (0)\nanchored \"\"$ at 0 minlen 0 \nMatching REx \"$\" against \"a%n\"\n   1 &lt;a&gt; &lt;%n&gt;                |  1:EOL(2)\n   1 &lt;a&gt; &lt;%n&gt;                |  2:END(0)\nMatch successful!\nFreeing REx: \"$\"\n</code></pre>\n\n<p>That's all there is to it.</p>\n"}, {"tags": [], "owner": {"reputation": 121105, "user_id": 2766176, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/edd8638efe875601bfe394a8aea5b16d?s=128&d=identicon&r=PG", "display_name": "brian d foy", "link": "https://stackoverflow.com/users/2766176/brian-d-foy"}, "is_accepted": true, "score": 2, "last_activity_date": 1472491299, "creation_date": 1472491299, "answer_id": 39211768, "question_id": 39205497, "link": "https://stackoverflow.com/questions/39205497/why-does-a-match-against-regex-return-1-when-the-input-string-contains-a-newli/39211768#39211768", "title": "Why does a match against regex $ return 1 when the input string contains a newline?", "body": "<p>The match operator returns <code>1</code> as the true value because the pattern matched. The <code>print</code> outputs that value.</p>\n\n<p>The <code>$</code> is an anchor, which is a specific sort of zero-width assertion. It matches a condition in the pattern but consumes no text. Since you have nothing else in the pattern, the <code>/$/</code> matches any target string including the empty string. It will always return true.</p>\n\n<p>The <code>$</code> is the end-of-line anchor, as documented in <a href=\"http://perldoc.perl.org/perlre.html\" rel=\"nofollow\">perlre</a>.  The <code>$</code> allows a vestigial newline at the end, so both of these can match:</p>\n\n<pre><code>\"a\"   =~ /a$/\n\"a\\n\" =~ /a$/\n</code></pre>\n\n<p>Without the <code>/m</code> regex modifier, the end of the line is the end of the string. But, with that modifier it can match before any newline in the string:</p>\n\n<pre><code>\"a\\n\" =~ /a$b/m\n</code></pre>\n\n<p>You might get this behavior even if you don't see it attached to the particular match operator since people can set default match flags:</p>\n\n<pre><code>use re '/m'; # applies to all in lexical scope\n</code></pre>\n\n<p>Over-enthusiastic fans of <em>Perl Best Practices</em> like to make a trio of pattern changing commands the default (often not auditing every regex it affects):</p>\n\n<pre><code>use re '/msx'\n</code></pre>\n\n<p>There's another anchor, the end-of-string anchor <code>\\Z</code>, that also allows a trailing newline. If you don't want to allow a newline, you can use the lowercase <code>\\z</code> to mean the absolute end of the string. These are not affected by regex flags.</p>\n"}], "owner": {"reputation": 67, "user_id": 6677819, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/dd31a5abc18a4ff84927da58d8b0e35a?s=128&d=identicon&r=PG&f=1", "display_name": "osiv", "link": "https://stackoverflow.com/users/6677819/osiv"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 145, "favorite_count": 0, "accepted_answer_id": 39211768, "answer_count": 3, "score": 1, "last_activity_date": 1472491299, "creation_date": 1472470969, "last_edit_date": 1472480825, "question_id": 39205497, "link": "https://stackoverflow.com/questions/39205497/why-does-a-match-against-regex-return-1-when-the-input-string-contains-a-newli", "title": "Why does a match against regex $ return 1 when the input string contains a newline?", "body": "<p>Why does the command</p>\n\n<pre><code>perl -e \"print qq/a\\n/ =~ /$/\"\n</code></pre>\n\n<p>print <code>1</code>?</p>\n\n<p>As far as I know, Perl considers <code>$</code> as the position both before <code>\\n</code> as well as the position at the end of the whole string in multi-line mode, which is the default (no modifier is applied).</p>\n"}, {"tags": ["perl", "github", "lwp-useragent"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1472471040, "post_id": 39205420, "comment_id": 65749764, "body": "Obvious question, but do you run this from a machine with internet connection?"}, {"owner": {"reputation": 18919, "user_id": 891440, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/dd366bcdcf85991fa8af1b6d11d3ad49?s=128&d=identicon&r=PG", "display_name": "jjmerelo", "link": "https://stackoverflow.com/users/891440/jjmerelo"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1472471677, "post_id": 39205420, "comment_id": 65750148, "body": "Wouldn&#39;t have a &quot;500&quot; error if I didn&#39;t... I guess I could get a 404 error from a local proxy, but that&#39;s not the case. It works without a glitch using wget, it&#39;s only the client the one that does not work."}, {"owner": {"reputation": 1786, "user_id": 1820650, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/ce47757627908a1013e0951158f4c2e6?s=128&d=identicon&r=PG", "display_name": "Dr.Avalanche", "link": "https://stackoverflow.com/users/1820650/dr-avalanche"}, "edited": false, "score": 0, "creation_date": 1472480103, "post_id": 39205420, "comment_id": 65755793, "body": "are you behind a proxy/firewall? works fine from here."}, {"owner": {"reputation": 18919, "user_id": 891440, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/dd366bcdcf85991fa8af1b6d11d3ad49?s=128&d=identicon&r=PG", "display_name": "jjmerelo", "link": "https://stackoverflow.com/users/891440/jjmerelo"}, "edited": false, "score": 0, "creation_date": 1472485707, "post_id": 39205420, "comment_id": 65759269, "body": "It works perfectly if I use wget or the browser."}], "answers": [{"tags": [], "owner": {"reputation": 6313, "user_id": 328115, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/9a029d2d948f128443f996fa12b3d3a1?s=128&d=identicon&r=PG", "display_name": "dolmen", "link": "https://stackoverflow.com/users/328115/dolmen"}, "is_accepted": false, "score": 1, "last_activity_date": 1472553577, "creation_date": 1472553577, "answer_id": 39225291, "question_id": 39205420, "link": "https://stackoverflow.com/questions/39205420/cant-seem-to-use-githubusercontent-from-a-script/39225291#39225291", "title": "Can&#39;t seem to use githubusercontent from a script", "body": "<p>This looks like a connectivity issue. Your browser probably uses a proxy. <code>wget</code> also because environment variables are correctly set: <code>http_proxy</code>, <code>HTTPS_PROXY</code>, <code>ALL_PROXY</code>...</p>\n\n<p>But LWP::UserAgent does not uses those environment variables unless explicitely told to. Add this line just after the user agent construction:</p>\n\n<pre><code>$ua-&gt;env_proxy;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 121105, "user_id": 2766176, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/edd8638efe875601bfe394a8aea5b16d?s=128&d=identicon&r=PG", "display_name": "brian d foy", "link": "https://stackoverflow.com/users/2766176/brian-d-foy"}, "is_accepted": false, "score": 1, "last_activity_date": 1615665030, "creation_date": 1615665030, "answer_id": 66617888, "question_id": 39205420, "link": "https://stackoverflow.com/questions/39205420/cant-seem-to-use-githubusercontent-from-a-script/66617888#66617888", "title": "Can&#39;t seem to use githubusercontent from a script", "body": "<p>This issue is old, but people are likely to have the same question about LWP.</p>\n<p>First, LWP cannot handle HTTPS unless you install <a href=\"https://www.metacpan.org/pod/LWP::Protocol::https\" rel=\"nofollow noreferrer\">LWP::Protocol::https</a>.</p>\n<p>Second, you mentioned in the comment that you know you are connected because you get a 500 error. That's simply not true. LWP uses 500 when it can't connect. That could be because there's no such host, the host is not accepting connections, or you are not connected to the network. All of those are 500 errors. Here, for example, I turn off networking, try to connect, and get a 500:</p>\n<pre><code>$ ping 1.1.1.1\nping: sending packet: No route to host\n$ perl -MLWP::UserAgent -le 'print LWP::UserAgent-&gt;new-&gt;get(shift)-&gt;status_line' http://www.example.com\n500 Can't connect to www.example.com:80 (nodename nor servname provided, or not known)\n</code></pre>\n<p>But, I can fetch your files just fine:</p>\n<pre><code>$ perl -MLWP::UserAgent -le 'print LWP::UserAgent-&gt;new-&gt;get(shift)-&gt;status_line' https://raw.githubusercontent.com/JJ/IV-2015-16/master/ejercicios/README.md\n200 OK\n</code></pre>\n<p>However, if you want to grab files, there's the <a href=\"https://docs.github.com/en/rest/reference/repos#contents\" rel=\"nofollow noreferrer\">Contents API</a> which has a specific endpoint for fetching READMEs (although only top-level ones). And, you can get them raw or interpreted. Using the API, you can look at rate limit information in the response headers.</p>\n"}], "owner": {"reputation": 18919, "user_id": 891440, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/dd366bcdcf85991fa8af1b6d11d3ad49?s=128&d=identicon&r=PG", "display_name": "jjmerelo", "link": "https://stackoverflow.com/users/891440/jjmerelo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 93, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1615665030, "creation_date": 1472470747, "last_edit_date": 1615622018, "question_id": 39205420, "link": "https://stackoverflow.com/questions/39205420/cant-seem-to-use-githubusercontent-from-a-script", "title": "Can&#39;t seem to use githubusercontent from a script", "body": "<p>I have been trying to download automatically some GitHub content from this script</p>\n<pre><code>#!/usr/bin/env perl\nuse strict;\nuse warnings;\nuse LWP::UserAgent;\nuse File::Slurp::Tiny qw(write_file);\nuse v5.16;\nmy $dir = shift || &quot;.&quot;;\nmy $previo = shift || &quot;IV-2015-16&quot;;\nmy $ua = LWP::UserAgent-&gt;new;\n$ua-&gt;agent(&quot;Mozilla/5.0&quot;);\nfor my $d ( qw( ejercicios objetivos practicas sesiones ) ) {\n    my $url = &quot;https://raw.githubusercontent.com/JJ/$previo/master/$d/README.md&quot;;\n    my $response = $ua-&gt;get( $url );\n    if ($response-&gt;is_success ) {\n        my $file = $response-&gt;decoded_content;\n        say &quot;$url gave $file&quot;;\n        write_file($file, &quot;$dir/$d/README.md&quot; ) || die &quot;Can't write file&quot;;\n    } else {\n        die &quot;Can't download this $url because &quot;. $response-&gt;status_line;\n    }\n}\n</code></pre>\n<p>URLs are correct, however it fails with</p>\n<pre><code>'_msg' =&gt; 'Can\\'t connect to raw.githubusercontent.com:443'\n'_rc' =&gt; 500\n</code></pre>\n<p>That is, returning a 500 error.</p>\n<pre><code>Can't download this https://raw.githubusercontent.com/JJ/IV-2015-16/master/ejercicios/README.md because 500 Can't connect to raw.githubusercontent.com:443 at /tmp/cosas.pl line 19.\nat /tmp/cosas.pl line 19.\n</code></pre>\n<p>I have tried to set the user agent, and it still does not work. I wonder if it needs authentication, however using wget or just putting this on the URL bar downloads stuff correctly. Any idea? Maybe some API banning or throttling?</p>\n"}, {"tags": ["perl", "dbi", "fetchall"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1472474237, "post_id": 39204115, "comment_id": 65751847, "body": "It&#39;s a strange approach to copy a reference to an array <code>$list=\\@col1</code> only to dereference it again <code>foreach my $item(@$list)</code> can you explain your thinking behind that, please? Also there seems to be no reason for <code>my ($list,$tblname,$values)</code> to be declared so early: you don&#39;t need them to available throughout the subroutine."}, {"owner": {"reputation": 86, "user_id": 6330057, "user_type": "registered", "accept_rate": 83, "profile_image": "https://graph.facebook.com/1185636201448528/picture?type=large", "display_name": "Dipit Sethi", "link": "https://stackoverflow.com/users/6330057/dipit-sethi"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1472537350, "post_id": 39204115, "comment_id": 65777755, "body": "@Borodin Thanks for your suggestion but this logic has to be implemented for about million rows. That is why always using references for storing values, just for safer side. And the variables &quot;my ($list,$tblname,$values)&quot;, i require to use them in other subroutines. Any other suggestions welcome."}], "answers": [{"comments": [{"owner": {"reputation": 86, "user_id": 6330057, "user_type": "registered", "accept_rate": 83, "profile_image": "https://graph.facebook.com/1185636201448528/picture?type=large", "display_name": "Dipit Sethi", "link": "https://stackoverflow.com/users/6330057/dipit-sethi"}, "edited": false, "score": 0, "creation_date": 1472467970, "post_id": 39204264, "comment_id": 65747956, "body": "Appreciating your reply @chankey, i got the point i was missing but can you tell how to compare without using &quot;use Test::More&quot;  and my expected final o/p is to generate log in which element wise result should be shown, whether pass or fail."}, {"owner": {"reputation": 19192, "user_id": 257635, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/El2tc.jpg?s=128&g=1", "display_name": "Chankey Pathak", "link": "https://stackoverflow.com/users/257635/chankey-pathak"}, "reply_to_user": {"reputation": 86, "user_id": 6330057, "user_type": "registered", "accept_rate": 83, "profile_image": "https://graph.facebook.com/1185636201448528/picture?type=large", "display_name": "Dipit Sethi", "link": "https://stackoverflow.com/users/6330057/dipit-sethi"}, "edited": false, "score": 0, "creation_date": 1472468357, "post_id": 39204264, "comment_id": 65748197, "body": "Check the edited answer, I&#39;ve also added the solution which does not use any module."}, {"owner": {"reputation": 86, "user_id": 6330057, "user_type": "registered", "accept_rate": 83, "profile_image": "https://graph.facebook.com/1185636201448528/picture?type=large", "display_name": "Dipit Sethi", "link": "https://stackoverflow.com/users/6330057/dipit-sethi"}, "edited": false, "score": 0, "creation_date": 1472472177, "post_id": 39204264, "comment_id": 65750468, "body": "i am getting following thing when i inserted this code in my script, last module you have shared : Index: 0, Equal: NO, [Expected: ARRAY(0x86d6924), GOT: ARRAY(0x863a540)]. please help man."}, {"owner": {"reputation": 19192, "user_id": 257635, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/El2tc.jpg?s=128&g=1", "display_name": "Chankey Pathak", "link": "https://stackoverflow.com/users/257635/chankey-pathak"}, "reply_to_user": {"reputation": 86, "user_id": 6330057, "user_type": "registered", "accept_rate": 83, "profile_image": "https://graph.facebook.com/1185636201448528/picture?type=large", "display_name": "Dipit Sethi", "link": "https://stackoverflow.com/users/6330057/dipit-sethi"}, "edited": false, "score": 0, "creation_date": 1472473246, "post_id": 39204264, "comment_id": 65751161, "body": "Include <code>use Data::Dumper;</code> and share the result of <code>print Dumper $res1</code> and <code>print Dumper $res2</code>."}, {"owner": {"reputation": 86, "user_id": 6330057, "user_type": "registered", "accept_rate": 83, "profile_image": "https://graph.facebook.com/1185636201448528/picture?type=large", "display_name": "Dipit Sethi", "link": "https://stackoverflow.com/users/6330057/dipit-sethi"}, "reply_to_user": {"reputation": 19192, "user_id": 257635, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/El2tc.jpg?s=128&g=1", "display_name": "Chankey Pathak", "link": "https://stackoverflow.com/users/257635/chankey-pathak"}, "edited": false, "score": 0, "creation_date": 1472474275, "post_id": 39204264, "comment_id": 65751884, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/122105/discussion-between-dipit-sethi-and-chankey-pathak\">continue this discussion in chat</a>."}], "tags": [], "owner": {"reputation": 19192, "user_id": 257635, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/El2tc.jpg?s=128&g=1", "display_name": "Chankey Pathak", "link": "https://stackoverflow.com/users/257635/chankey-pathak"}, "is_accepted": true, "score": 2, "last_activity_date": 1472475628, "last_edit_date": 1495540850, "creation_date": 1472467286, "answer_id": 39204264, "question_id": 39204115, "link": "https://stackoverflow.com/questions/39204115/how-to-compare-values-from-array-references-in-perl/39204264#39204264", "title": "How to compare values from Array references in perl?", "body": "<blockquote>\n  <p>My output is all \"pass\" irrespective of the changes</p>\n</blockquote>\n\n<p>That is because of the below condition, which is just comparing the number of elements in both de-referenced arrays.</p>\n\n<pre><code>if(@$res1 == @$res2)\n</code></pre>\n\n<p>If you want to compare the content of both array references (which are numerical as per your question) then you can do</p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\nuse Test::More 'no_plan';\nmy $res1 = [5,8,10,12];\nmy $res2 = [5,8,10,12];\nis_deeply( $res1, $res2, 'Compare arrayref' );\n</code></pre>\n\n<p>Output for above case:</p>\n\n<pre><code>chankey@pathak:~/Desktop$ perl test.pl \nok 1 - Compare arrayref\n1..1\n</code></pre>\n\n<p>If they are unequal like:</p>\n\n<pre><code>my $res1 = [5,8,10,12];\nmy $res2 = [3,8,10,12];\n</code></pre>\n\n<p>Then you will get below detailed output where you can easily check which value was unequal</p>\n\n<pre><code>chankey@pathak:~/Desktop$ perl test.pl \nnot ok 1 - Compare arrayref\n#   Failed test 'Compare arrayref'\n#   at test.pl line 7.\n#     Structures begin differing at:\n#          $got-&gt;[0] = '5'\n#     $expected-&gt;[0] = '3'\n1..1\n# Looks like you failed 1 test of 1.\n</code></pre>\n\n<p>I showed you one method on how to compare 2 arrayrefs, you might want to see other methods answered in below questions (just make sure you de-reference your arrays first then do the comparison): </p>\n\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/2933347/comparing-two-arrays-using-perl\">Difference of Two Arrays Using Perl</a></li>\n<li><a href=\"https://stackoverflow.com/questions/1609467/in-perl-is-there-a-built-in-way-to-compare-two-arrays-for-equality?rq=1\">In Perl, is there a built in way to compare two arrays for equality?</a></li>\n</ul>\n\n<hr>\n\n<p>Solution without using any module</p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\nmy $res1 = [5,8,10,12];\nmy $res2 = [3,8,10,12];\nforeach my $index (0..$#{$res1}){\n    if ($res1-&gt;[$index] == $res2-&gt;[$index]){\n        print \"Index: $index, Equal: YES\";\n    }\n    else{\n        print \"Index: $index, Equal: NO\";\n        print \" [Expected: $res1-&gt;[$index], GOT: $res2-&gt;[$index]]\";\n    }\n    print \"\\n\";\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>chankey@pathak:~/Desktop$ perl test.pl \nIndex: 0, Equal: NO [Expected: 5, GOT: 3]\nIndex: 1, Equal: YES\nIndex: 2, Equal: YES\nIndex: 3, Equal: YES\n</code></pre>\n\n<hr>\n\n<p>As per the discussion on chat:</p>\n\n<p>Since there are arrayrefs at each index of $res1 and $res2. Therefore you should use something like below:</p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\n\nmy $res1 = [[5],[4],[3],[2]];\nmy $res2 = [[5],[4],[3],[1]];\nforeach my $index (0..$#{$res1}){\n    foreach my $inner_index (0..$#{$res1-&gt;[$index]}){\n        if ($res1-&gt;[$index]-&gt;[$inner_index] == $res2-&gt;[$index]-&gt;[$inner_index]){\n            print \"Equal!! expected: $res1-&gt;[$index]-&gt;[$inner_index] got: $res2-&gt;[$index]-&gt;[$inner_index]\\n\" ;\n        }\n        else{\n            print \"Not Equal!! expected: $res1-&gt;[$index]-&gt;[$inner_index] got: $res2-&gt;[$index]-&gt;[$inner_index]\\n\" \n        }\n\n    }\n\n}\n</code></pre>\n"}], "owner": {"reputation": 86, "user_id": 6330057, "user_type": "registered", "accept_rate": 83, "profile_image": "https://graph.facebook.com/1185636201448528/picture?type=large", "display_name": "Dipit Sethi", "link": "https://stackoverflow.com/users/6330057/dipit-sethi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 192, "favorite_count": 0, "accepted_answer_id": 39204264, "answer_count": 1, "score": 2, "last_activity_date": 1472475628, "creation_date": 1472466848, "question_id": 39204115, "link": "https://stackoverflow.com/questions/39204115/how-to-compare-values-from-array-references-in-perl", "title": "How to compare values from Array references in perl?", "body": "<pre><code>#!/usr/bin/perl -C0\nuse strict;\nuse warnings;   \nuse DBI;\n\nsub agg_verification\n{\nmy ($list,$tblname,$values);\nmy $res1=undef;\nmy $res2=undef;\n\n    #First DB Connection******\n    my $connstr = \"ENG=xxx;CommLinks=tcpip{port=xxx};UID=xxx;PWD=xxx\";\n    my $dbh = DBI-&gt;connect( \"DBI:SQLAnywhere:$connstr\", '', '', {AutoCommit =&gt; 0} ) or warn $DBI::errstr;\n    my $stmt=\"select col1||':'||col3 as a, col2||'('||col3||')' as b from table where col1 like '%xxxx:((15))%'\"; #making 'a' as primary key for fetchall_hashref() later.\n    my $sth=$dbh-&gt;prepare($stmt) or warn $DBI::errstr;\n    $sth-&gt;execute() or warn $DBI::errstr;\n\n    #Second DB Connection******\n    my $connstr1 = \"ENG=xxx;CommLinks=tcpip{port=xxx};UID=xxx;PWD=xxx\";\n    my $dbh1 = DBI-&gt;connect( \"DBI:SQLAnywhere:$connstr1\", '', '', {AutoCommit =&gt; 0} ) or warn $DBI::errstr;\n    my ($sth1,$stmt1,$stmt2);\n    #creating, opening and writing the result in a file \n       open my $fh, '+&gt;&gt;', \"/eniq/home/dcuser/output.txt\" or warn \"Cannot open output.txt: $!\";\n\n       my $res = $sth-&gt;fetchall_hashref('a');\n\n       foreach my $key(sort keys %$res) {\n            my @col1 = $res-&gt;{$key}-&gt;{'a'};\n            $list=\\@col1;\n                foreach my $item(@$list)\n                    {\n                        my @values=${$res}{$item}-&gt;{'b'};\n                        $values=\\@values;\n                        my @tblname=$item=~ m/[(\\w*)(\\:)](DC\\w*)/; #trimming table name\n                        $tblname =\\@tblname;\n                        #print $fh \"TABLENAME :@$tblname\\n\";\n\n                            foreach my $raw(@$tblname) #Extracting _RAW data*********************\n                            {\n                                $raw.=\"_RAW\";\n                                chomp($raw);\n                                $stmt1 = \"select @$values from $raw\";\n                                $stmt2 = \"\";\n                                $sth1=$dbh1-&gt;prepare($stmt1) or warn $DBI::errstr;\n                                $sth1-&gt;execute() or warn $DBI::errstr;\n                                my $max_rows1 = 5_000;\n                                $res1 = $sth1-&gt;fetchall_arrayref(undef,$max_rows1);\n\n                                                }\n                            foreach my $day(@$tblname) #Extracting _DAY DATA******************** \n                            {\n                                $day  =~ s/(\\_RAW)//;\n                                chomp($day);\n                                $day .=\"_DAY\";\n                                $stmt2 = \"select @$values from $day\";\n                                $sth1=$dbh1-&gt;prepare($stmt2) or warn $DBI::errstr;\n                                $sth1-&gt;execute() or warn $DBI::errstr;\n                                my $max_rows = 5_000;\n                                $res2 = $sth1-&gt;fetchall_arrayref(undef,$max_rows);                              \n                                                }\n\n                                if(@$res1 == @$res2)\n                                {\n                                    print $fh \"PASS at @$values\\n\";\n                                                }\n                                else\n                                {\n                                    print $fh \"FAIL at @$values\\n\";\n                                                }\n                                                    }\n                                                        }\n\n\n    close $fh or warn \"Couldn't close file properly\";\n        $sth1-&gt;finish();\n        $sth-&gt;finish();\n        $dbh1-&gt;disconnect;\n        $dbh-&gt;disconnect;\n}\nagg_verification();\n</code></pre>\n\n<p>Guys, i want to compare the numerical values coming in $res1 and $res2 but i am not getting the result on which it is passing or failing. My output is all \"pass\" irrespective of the changes. Please suggest how can i compare values from array references in my code above without using external CPAN library as i don't have permissions to update or add libraries. </p>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 481636, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1472462745, "post_id": 39202602, "comment_id": 65744709, "body": "<code>&#47;&amp;$&#47;</code> works - <a href=\"https://ideone.com/hOBnUu\" rel=\"nofollow noreferrer\">ideone.com/hOBnUu</a>"}, {"owner": {"reputation": 11, "user_id": 6769439, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/86c781c1453d6b932387b056f36ac820?s=128&d=identicon&r=PG&f=1", "display_name": "Asuka", "link": "https://stackoverflow.com/users/6769439/asuka"}, "reply_to_user": {"reputation": 481636, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1472463039, "post_id": 39202602, "comment_id": 65744954, "body": "Why can&#39;t mine? <code>45:             if ($command =~ &#47;&amp;$&#47;) {</code>   <code>DB&lt;2&gt; p $command</code> <code>mkdir a &amp;</code>   <code>DB&lt;3&gt; s</code> <code>54:             print $_;print &quot;\\n&quot;;</code>"}, {"owner": {"reputation": 481636, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1472464303, "post_id": 39202602, "comment_id": 65745708, "body": "Actually, no idea what you have after <code>&amp;</code>. Maybe there are unprintable characters. See below answers."}], "answers": [{"comments": [{"owner": {"reputation": 481636, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1472463115, "post_id": 39202789, "comment_id": 65745004, "body": "That&#39;s right: <code>\\n</code> matches a newline. What if there is no newline, but the end of the string? Then, the pattern won&#39;t work. OP needs a <i>pattern match for &quot;&amp;+EOL&quot;</i>, not <code>&amp;</code> + LF."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1472463945, "post_id": 39202789, "comment_id": 65745482, "body": "@baddger964: That is little different from the original. <code>$</code> will match before a newline at the end of a string."}, {"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 0, "creation_date": 1472463989, "post_id": 39202789, "comment_id": 65745504, "body": "@baddger964 No, $ matches either the end of a string or before a newline at the end of a string"}], "tags": [], "owner": {"reputation": 1217, "user_id": 2660911, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/580a3e9a6939226a59fadb456c38912a?s=128&d=identicon&r=PG", "display_name": "baddger964", "link": "https://stackoverflow.com/users/2660911/baddger964"}, "is_accepted": false, "score": 0, "last_activity_date": 1485779701, "last_edit_date": 1485779701, "creation_date": 1472462899, "answer_id": 39202789, "question_id": 39202602, "link": "https://stackoverflow.com/questions/39202602/perl-anchor-failed-to-match-end-of-line/39202789#39202789", "title": "perl $ anchor failed to match end of line", "body": "<p>Try using this : <code>/&amp;\\n|&amp;$/</code>.</p>\n\n<p><code>$</code> match the end of the string so if yours commands are all in the same string the pattern will not work.</p>\n\n<p><code>\\n</code> match a newline.</p>\n"}, {"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": true, "score": 3, "last_activity_date": 1472463562, "creation_date": 1472463562, "answer_id": 39203041, "question_id": 39202602, "link": "https://stackoverflow.com/questions/39202602/perl-anchor-failed-to-match-end-of-line/39203041#39203041", "title": "perl $ anchor failed to match end of line", "body": "<p>Your pattern works fine</p>\n\n<pre><code>use strict;\nuse warnings 'all';\nuse feature 'say';\n\nmy $pattern = 'mkdir a &amp;';\n\nsay $pattern =~ /&amp;$/ ? 'match' : 'no match';\n</code></pre>\n\n<h3>output</h3>\n\n<pre><code>match\n</code></pre>\n\n<p>It is impossible to tell from your question, but it is likely that you have some whitespace at the end of the string you are trying to match. Perhaps you have a space or a linefeed there, or perhaps you are processing a file that has originated on Windows and you have removed only the LF, leaving a terminating CR.</p>\n\n<p>You can fix this by adding optional whitespace at the end of your regex pattern, like this</p>\n\n<pre><code>say $pattern =~ /&amp;\\s*$/ ? 'match' : 'no match';\n</code></pre>\n\n<p>You can see exactly what your string contains using <code>Data::Dumper</code>, like this</p>\n\n<pre><code>use Data::Dumper;\n$Data::Dumper::Useqq = 1;\n\nprint Dumper $pattern;\n</code></pre>\n\n<p>In this instance it produces <code>$VAR1 = \"mkdir a &amp;\";</code>, and you will be able to see if there are any superfluous characters after the <code>&amp;</code>.</p>\n"}], "owner": {"reputation": 11, "user_id": 6769439, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/86c781c1453d6b932387b056f36ac820?s=128&d=identicon&r=PG&f=1", "display_name": "Asuka", "link": "https://stackoverflow.com/users/6769439/asuka"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2036, "favorite_count": 0, "accepted_answer_id": 39203041, "answer_count": 2, "score": 0, "last_activity_date": 1485779701, "creation_date": 1472462349, "last_edit_date": 1472463429, "question_id": 39202602, "link": "https://stackoverflow.com/questions/39202602/perl-anchor-failed-to-match-end-of-line", "title": "perl $ anchor failed to match end of line", "body": "<p>Example: <code>my $pattern = \"mkdir a &amp;\"</code></p>\n\n<p>As you can see, my patterns are commands and I want to do a pattern match for \"&amp;+EOL\" to distinguish whether this command runs on background or not.</p>\n\n<p>I tried with <code>/&amp;$/</code>, <code>/&amp;\\$/</code> but failed.</p>\n\n<p>What is wrong? What is your suggestion with this pattern match?</p>\n\n<p><code>45:             if ($command =~ /&amp;$/) {</code></p>\n\n<p><code>DB&lt;2&gt; p $command</code></p>\n\n<p><code>mkdir a &amp;</code></p>\n\n<p><code>DB&lt;3&gt; s</code></p>\n\n<p><code>54:             print $_;print \"\\n\";</code></p>\n"}, {"tags": ["perl", "facebook-like"], "answers": [{"tags": [], "owner": {"reputation": 19192, "user_id": 257635, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/El2tc.jpg?s=128&g=1", "display_name": "Chankey Pathak", "link": "https://stackoverflow.com/users/257635/chankey-pathak"}, "is_accepted": false, "score": 1, "last_activity_date": 1472457657, "creation_date": 1472457657, "answer_id": 39201257, "question_id": 39201137, "link": "https://stackoverflow.com/questions/39201137/facebook-and-twitter-data-scraping-using-perl/39201257#39201257", "title": "Facebook and Twitter data scraping using perl", "body": "<p>This question is broad. Have a look at below CPAN modules, write your logic on top of it. If you face any problem show us where you get stuck with a minimal example.</p>\n\n<ul>\n<li><a href=\"https://metacpan.org/pod/Facebook::Graph\" rel=\"nofollow\">Facebook::Graph</a></li>\n<li><a href=\"https://metacpan.org/pod/API::Facebook\" rel=\"nofollow\">API::Facebook</a></li>\n</ul>\n\n<p>Check more at: <a href=\"https://metacpan.org/search?q=Facebook&amp;search_type=modules\" rel=\"nofollow\">https://metacpan.org/search?q=Facebook&amp;search_type=modules</a></p>\n\n<ul>\n<li><a href=\"https://metacpan.org/pod/distribution/Net-Twitter/lib/Net/Twitter.pod\" rel=\"nofollow\">Net::Twitter</a></li>\n<li><a href=\"https://metacpan.org/pod/API::Twitter\" rel=\"nofollow\">API::Twitter</a></li>\n</ul>\n\n<p>Check more at: <a href=\"https://metacpan.org/search?q=Twitter&amp;search_type=modules\" rel=\"nofollow\">https://metacpan.org/search?q=Twitter&amp;search_type=modules</a></p>\n\n<hr>\n\n<blockquote>\n  <p>I cant use graph API as it shows for only users allow my app</p>\n</blockquote>\n\n<p>There's a reason for it, right? </p>\n"}], "owner": {"reputation": 1, "user_id": 6768938, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c9a2c0fe39bb2a763fbfc895e4eb3bcf?s=128&d=identicon&r=PG&f=1", "display_name": "Nitin chaudhary", "link": "https://stackoverflow.com/users/6768938/nitin-chaudhary"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 245, "favorite_count": 0, "closed_date": 1472479353, "answer_count": 1, "score": -2, "last_activity_date": 1472457657, "creation_date": 1472457217, "question_id": 39201137, "link": "https://stackoverflow.com/questions/39201137/facebook-and-twitter-data-scraping-using-perl", "closed_reason": "Needs more focus", "title": "Facebook and Twitter data scraping using perl", "body": "<p>I want to create a web dashboard where i can search any user by name from facebook, &amp; twitter and then show all the details (public like educations about , likes ) on my dashboard.</p>\n\n<p>How this can be done using perl?</p>\n\n<p>I cant use graph API as it shows for only users allow my app (permission based.)</p>\n\n<p>Please guide me .</p>\n"}, {"tags": ["arrays", "perl"], "comments": [{"owner": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "edited": false, "score": 1, "creation_date": 1472444170, "post_id": 39198189, "comment_id": 65737028, "body": "If you get rid of that extra level of indirection, then you would have one array with all of the values from all rows of your csv file.  Is that what you really want?"}, {"owner": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "edited": false, "score": 3, "creation_date": 1472444431, "post_id": 39198189, "comment_id": 65737079, "body": "Either way, you should not parse csv by yourself, you should use a library, otherwise you may get bitten by edge cases.  <code>Text::CSV</code> would be a good choice: <a href=\"http://search.cpan.org/~makamaka/Text-CSV-1.33/lib/Text/CSV.pm\" rel=\"nofollow noreferrer\">search.cpan.org/~makamaka/Text-CSV-1.33/lib/Text/CSV.pm</a>"}, {"owner": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "edited": false, "score": 2, "creation_date": 1472444540, "post_id": 39198189, "comment_id": 65737099, "body": "The extra level is coming because you are pushing <code>[ @line ]</code> onto your <code>@fields</code> array.  The <code>[ ... ]</code> wraps the contents in an Array Reference."}], "answers": [{"comments": [{"owner": {"reputation": 2531, "user_id": 1067305, "user_type": "registered", "accept_rate": 31, "profile_image": "https://www.gravatar.com/avatar/d0d62c9f798697f2c32f86d66f5e4a86?s=128&d=identicon&r=PG", "display_name": "user1067305", "link": "https://stackoverflow.com/users/1067305/user1067305"}, "edited": false, "score": 0, "creation_date": 1472455449, "post_id": 39200061, "comment_id": 65740963, "body": "When I say $names = shift @fields; , I just keep getting a reference to the SAME array, so all the members end up pointing to the Last array. I need to pass a deep copy."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 2531, "user_id": 1067305, "user_type": "registered", "accept_rate": 31, "profile_image": "https://www.gravatar.com/avatar/d0d62c9f798697f2c32f86d66f5e4a86?s=128&d=identicon&r=PG", "display_name": "user1067305", "link": "https://stackoverflow.com/users/1067305/user1067305"}, "edited": false, "score": 0, "creation_date": 1472461658, "post_id": 39200061, "comment_id": 65744095, "body": "@user1067305: Then there is more to your program than you have shown, and you must ask another question."}, {"owner": {"reputation": 1945, "user_id": 5669174, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XGSyr.jpg?s=128&g=1", "display_name": "Mike", "link": "https://stackoverflow.com/users/5669174/mike"}, "reply_to_user": {"reputation": 2531, "user_id": 1067305, "user_type": "registered", "accept_rate": 31, "profile_image": "https://www.gravatar.com/avatar/d0d62c9f798697f2c32f86d66f5e4a86?s=128&d=identicon&r=PG", "display_name": "user1067305", "link": "https://stackoverflow.com/users/1067305/user1067305"}, "edited": false, "score": 0, "creation_date": 1472461711, "post_id": 39200061, "comment_id": 65744125, "body": "@user1067305 Why do you need deep copy ? &quot;shift&quot; will remove old array from outher array and it be lost."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1472487159, "post_id": 39200061, "comment_id": 65760120, "body": "Re &quot;<i>and don&#39;t forget to <code>close $CSV;</code></i>&quot;, Why? Adding that is useless without <code>use autodie;</code>."}, {"owner": {"reputation": 7565, "user_id": 1021515, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/Z9QcP.jpg?s=128&g=1", "display_name": "mwp", "link": "https://stackoverflow.com/users/1021515/mwp"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1472510107, "post_id": 39200061, "comment_id": 65770924, "body": "@ikegami: Just for my own edification, can you explain why that is? Isn&#39;t it a good practice to close your file handles when you&#39;re done with them, autodie or not?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 7565, "user_id": 1021515, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/Z9QcP.jpg?s=128&g=1", "display_name": "mwp", "link": "https://stackoverflow.com/users/1021515/mwp"}, "edited": false, "score": 0, "creation_date": 1472520991, "post_id": 39200061, "comment_id": 65773479, "body": "@mwp, Yes, but that would happen anyway as the scalar goes out of scope. Calling <code>close</code> without checking for an error is therefore redundant."}, {"owner": {"reputation": 7565, "user_id": 1021515, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/Z9QcP.jpg?s=128&g=1", "display_name": "mwp", "link": "https://stackoverflow.com/users/1021515/mwp"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1472522449, "post_id": 39200061, "comment_id": 65773781, "body": "@ikegami Ah, that makes sense. I didn&#39;t see the scalar going out of scope in any of the snippets here so I thought maybe I was missing something. Thank you for taking a moment to answer my question!"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 7565, "user_id": 1021515, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/Z9QcP.jpg?s=128&g=1", "display_name": "mwp", "link": "https://stackoverflow.com/users/1021515/mwp"}, "edited": false, "score": 1, "creation_date": 1472573618, "post_id": 39200061, "comment_id": 65801977, "body": "@mwp, They go out of scope when at end of file. If they don&#39;t go out of scope, I&#39;d rather create a scope than add <code>close</code> since there&#39;s no reason to keep a closed file handle around!"}], "tags": [], "owner": {"reputation": 13167, "user_id": 546205, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/5d7dd187ae1f4400664cbc0e66c8a2ce?s=128&d=identicon&r=PG", "display_name": "Miguel Prz", "link": "https://stackoverflow.com/users/546205/miguel-prz"}, "is_accepted": false, "score": 1, "last_activity_date": 1472453864, "last_edit_date": 1472453864, "creation_date": 1472453215, "answer_id": 39200061, "question_id": 39198189, "link": "https://stackoverflow.com/questions/39198189/perl-why-does-shifting-an-array-off-an-array-of-arrays-add-an-extra-level-of-in/39200061#39200061", "title": "perl: Why does shifting an array off an array of arrays add an extra level of indirection?", "body": "<p>Your code stored a <a href=\"http://perldoc.perl.org/perlref.html\" rel=\"nofollow\">reference</a> to an array into <code>@fields</code> variable, so it's necessary to change the way you try to extract this kind of data:</p>\n\n<pre><code>$names = shift @fields;               # get a reference, so use $ sigil (scalar)\nprint \"\\nat12 names=@$names\";         # dereference array ref\nprint \"\\nat13 names[0]=$names-&gt;[0]\";  # get the first element (access with -&gt; notation)\n</code></pre>\n\n<p>I think you are trying that for learning purposes. Other way, if you are serious about parsing CSV, it's better to use a well tested and documented module from CPAN, like <a href=\"https://metacpan.org/pod/Text::CSV\" rel=\"nofollow\">Text::CSV</a>.</p>\n\n<p>Also, for debugging purposes, if you want to analyze the structure of a variable, <a href=\"https://metacpan.org/pod/Data::Dumper\" rel=\"nofollow\">Data::Dumper</a> may helps you to understand it. For example:</p>\n\n<pre><code>print Dumper(\\@names), \"\\n\";\n</code></pre>\n\n<p>And your code opens the file in an old-way. There is a modern approach which uses a 3 params:</p>\n\n<pre><code>open CSV, \"ExDivExport.csv\" or die;;\n</code></pre>\n\n<p>should be</p>\n\n<pre><code>open my $CSV, '&lt;', 'ExDivExport.csv' or die \"cannot open file: $!\";\n#... then use the lexical variable $CSV instead of the CSV bareword\n</code></pre>\n\n<p>and don't forget to <code>close $CSV;</code></p>\n"}, {"comments": [{"owner": {"reputation": 6313, "user_id": 328115, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/9a029d2d948f128443f996fa12b3d3a1?s=128&d=identicon&r=PG", "display_name": "dolmen", "link": "https://stackoverflow.com/users/328115/dolmen"}, "edited": false, "score": 0, "creation_date": 1472554104, "post_id": 39216036, "comment_id": 65788234, "body": "As you found out the &quot;level of indirection&quot; was not <i>added</i> by <code>shift</code>. It is <i>there for every row</i>, but you wanted to have it removed to extract the list of names."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1472573537, "post_id": 39216036, "comment_id": 65801931, "body": "That&#39;s an aweful solution. It needlessly makes a copy of the array. As previously mentioned, you should be using <code>my $names = shift @fields;</code>"}], "tags": [], "owner": {"reputation": 2531, "user_id": 1067305, "user_type": "registered", "accept_rate": 31, "profile_image": "https://www.gravatar.com/avatar/d0d62c9f798697f2c32f86d66f5e4a86?s=128&d=identicon&r=PG", "display_name": "user1067305", "link": "https://stackoverflow.com/users/1067305/user1067305"}, "is_accepted": false, "score": 0, "last_activity_date": 1472509074, "creation_date": 1472509074, "answer_id": 39216036, "question_id": 39198189, "link": "https://stackoverflow.com/questions/39198189/perl-why-does-shifting-an-array-off-an-array-of-arrays-add-an-extra-level-of-in/39216036#39216036", "title": "perl: Why does shifting an array off an array of arrays add an extra level of indirection?", "body": "<p>So, all I had to do was replace:</p>\n\n<p>@names = shift @fields;</p>\n\n<p>with</p>\n\n<p>@names = @{shift @fields};</p>\n\n<p>Problem solved.</p>\n"}], "owner": {"reputation": 2531, "user_id": 1067305, "user_type": "registered", "accept_rate": 31, "profile_image": "https://www.gravatar.com/avatar/d0d62c9f798697f2c32f86d66f5e4a86?s=128&d=identicon&r=PG", "display_name": "user1067305", "link": "https://stackoverflow.com/users/1067305/user1067305"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 120, "favorite_count": 0, "answer_count": 2, "score": -2, "last_activity_date": 1472509074, "creation_date": 1472442162, "question_id": 39198189, "link": "https://stackoverflow.com/questions/39198189/perl-why-does-shifting-an-array-off-an-array-of-arrays-add-an-extra-level-of-in", "title": "perl: Why does shifting an array off an array of arrays add an extra level of indirection?", "body": "<p>The first line of my CSV file contains names for the fields below.\nI read the file into an array of arrays, and try to shift off the 0th row.</p>\n\n<p>But the array appears to be wrapped in another array level.</p>\n\n<p>How can I get rid of that extra level of indirection?</p>\n\n<p>Here's the code:</p>\n\n<pre><code>open CSV, \"ExDivExport.csv\" or die;;\n@fields=();\nwhile (&lt;CSV&gt;) \n{   chomp;\n    ($temp) = /^\"(.+)\"$/; # remove first and last \"\n    @line=split /\",\"/, $temp ;\n    print\"\\n@line\";  # all the lines print correctly here\n    push @fields, [@line];\n}\n@names = shift @fields;   # Here I shift off the 0th row\n\nprint \"\\nat12 names=@names\";         # prints: ARRAY(0x26e52c)\nprint \"\\nat13 names[0]=$names[0]\";   # prints ARRAY(0x26e52c)\nprint \"\\nat14 names[0][0]=$names[0][0]\"; # correctly prints first name 'Symbol'  \n</code></pre>\n"}, {"tags": ["perl", "cgi"], "comments": [{"owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "edited": false, "score": 0, "creation_date": 1472430006, "post_id": 39196558, "comment_id": 65734329, "body": "what is the UID:GID of the file itself, and what is the name of the user who&#39;s acting as the web server?"}, {"owner": {"reputation": 439, "user_id": 5175044, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/1V440.jpg?s=128&g=1", "display_name": "tulians", "link": "https://stackoverflow.com/users/5175044/tulians"}, "reply_to_user": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "edited": false, "score": 0, "creation_date": 1472431616, "post_id": 39196558, "comment_id": 65734651, "body": "@stevieb, maybe I&#39;m wrong, but isn&#39;t the file supposed to be created if it doesn&#39;t exist when the script tries to open it?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1472435579, "post_id": 39196558, "comment_id": 65735341, "body": "So what&#39;s your question? As the error says, the user+group as which the script runs doesn&#39;t have permission to create a file in <code>&#47;path&#47;to&#47;directory</code>. Either configure apache to use a different user+group, or change the permissions so that the existing user+group can access the directory and create the file."}], "answers": [{"comments": [{"owner": {"reputation": 439, "user_id": 5175044, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/1V440.jpg?s=128&g=1", "display_name": "tulians", "link": "https://stackoverflow.com/users/5175044/tulians"}, "edited": false, "score": 0, "creation_date": 1472514409, "post_id": 39197607, "comment_id": 65772031, "body": "As I&#39;m using Ubuntu 16.04 I couldn&#39;t find the file you told me, because the global configuration is in <code>&#47;etc&#47;apache2&#47;apache2.conf</code>. But I finally made it work by setting Apache the permissions to write in the folder I&#39;ve selected, as you told me. Thanks!"}], "tags": [], "owner": {"reputation": 247, "user_id": 6338639, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-dE0EhH0ZVHo/AAAAAAAAAAI/AAAAAAAAAFE/4-Rr-uDV1tM/photo.jpg?sz=128", "display_name": "Mitch Jackson", "link": "https://stackoverflow.com/users/6338639/mitch-jackson"}, "is_accepted": true, "score": 3, "last_activity_date": 1472461151, "last_edit_date": 1472461151, "creation_date": 1472436490, "answer_id": 39197607, "question_id": 39196558, "link": "https://stackoverflow.com/questions/39196558/permissions-issue-on-opening-a-file-perl-cgi/39197607#39197607", "title": "Permissions issue on opening a file - Perl, CGI", "body": "<p>The Apache web server typically runs as a separate user on your system.  Your <code>~/Desktop</code> directory will be specific to <em>YOUR</em> user.  Any directory Apache writes to will need to be writable by the Apache user.</p>\n\n<p>To find what username Apache is operating under, check your config file.  This might have defaulted to <code>/etc/httpd/conf/httpd.conf</code>. You will probably find a line in that file with the <a href=\"http://httpd.apache.org/docs/current/mod/mod_unixd.html#user\" rel=\"nofollow\" title=\"User Directive\"><code>User</code> directive</a>.  It's probably set to user <code>apache</code>. </p>\n\n<p>Apache already has a log directory.  Usually it's <code>/var/log/httpd</code>.  Perhaps try writing your log there.</p>\n\n<p>Please note, the sample code you provided is very problematic.  Each time your CGI script is run, your log file will be erased and overwritten.  If it's run with concurrent users, you'll have even bigger problems.  Two threads trying to write the same file, locking issues, etc.  You may want to take a look at <a href=\"http://search.cpan.org/~jmoore/CGI-Log-1.00/Log.pm\" rel=\"nofollow\" title=\"CGI::Log\"><code>CGI::Log</code></a> for something more functional.</p>\n"}], "owner": {"reputation": 439, "user_id": 5175044, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/1V440.jpg?s=128&g=1", "display_name": "tulians", "link": "https://stackoverflow.com/users/5175044/tulians"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1504, "favorite_count": 0, "accepted_answer_id": 39197607, "answer_count": 1, "score": 2, "last_activity_date": 1472893676, "creation_date": 1472425332, "last_edit_date": 1472893676, "question_id": 39196558, "link": "https://stackoverflow.com/questions/39196558/permissions-issue-on-opening-a-file-perl-cgi", "title": "Permissions issue on opening a file - Perl, CGI", "body": "<p>I've been trying to create a log file for an application, using Perl and CGI in an Apache server. For this reason the script needs to keep a log file, which must be opened when the script starts. From the logs I get: <code>Unable to open the file: Permission denied at /usr/lib/cgi-bin/generate_logs.cgi</code>, and the script goes as follows:</p>\n\n<pre><code>#!/usr/bin/perl\nuse CGI qw(:standard);\nprint \"Content-type: text/plain\\n\\n\";\n...\nopen (my $logs, \"&gt;\", \"/path/to/directory/logs.txt\") || die \"Unable to open the file: $!\";\n...\n</code></pre>\n\n<p>I've been trying to use non-root paths for the <code>.txt</code> log file, like <code>~/Desktop</code>, but still the script can't create/open log the file. Don't hesitate to ask me if you need more information. Thanks in advance</p>\n"}, {"tags": ["perl", "cgi"], "comments": [{"owner": {"reputation": 793701, "user_id": 19068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d2d3229ed1961d2bd81853242493247?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/19068/quentin"}, "edited": false, "score": 1, "creation_date": 1472420377, "post_id": 39195951, "comment_id": 65732540, "body": "The Perl community has largely moved away from CGI and on to <a href=\"http://plackperl.org/\" rel=\"nofollow noreferrer\">PSGI/Plack</a> these days."}, {"owner": {"reputation": 793701, "user_id": 19068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d2d3229ed1961d2bd81853242493247?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/19068/quentin"}, "edited": false, "score": 1, "creation_date": 1472420589, "post_id": 39195951, "comment_id": 65732591, "body": "<a href=\"http://perlmaven.com/always-use-strict-and-use-warnings\" rel=\"nofollow noreferrer\">use strict, use warnings</a>"}, {"owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "reply_to_user": {"reputation": 793701, "user_id": 19068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d2d3229ed1961d2bd81853242493247?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/19068/quentin"}, "edited": false, "score": 0, "creation_date": 1472421540, "post_id": 39195951, "comment_id": 65732824, "body": "@Quentin: &quot;moved away from CGI&quot; is one thing, but not everyone is moving to just one framework..."}, {"owner": {"reputation": 793701, "user_id": 19068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d2d3229ed1961d2bd81853242493247?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/19068/quentin"}, "reply_to_user": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "edited": false, "score": 1, "creation_date": 1472421633, "post_id": 39195951, "comment_id": 65732844, "body": "@stevieb \u2014 18 frameworks listed on the page I linked to."}, {"owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "reply_to_user": {"reputation": 793701, "user_id": 19068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d2d3229ed1961d2bd81853242493247?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/19068/quentin"}, "edited": false, "score": 0, "creation_date": 1472421721, "post_id": 39195951, "comment_id": 65732859, "body": "@Quentin: my apologies; the link text is just a bit misleading; I should have followed through. ++"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1472548539, "post_id": 39195951, "comment_id": 65784472, "body": "Plack/PSGI is not a framework. Plack/PSGI is a specification and a toolkit that underlie most modern Perl web frameworks."}, {"owner": {"reputation": 192, "user_id": 5185210, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DNqsL.png?s=128&g=1", "display_name": "oals", "link": "https://stackoverflow.com/users/5185210/oals"}, "edited": false, "score": 0, "creation_date": 1472562556, "post_id": 39195951, "comment_id": 65793863, "body": "<code>close ... || die</code> will not do what you mean. Use <code>close ... or die</code> or <code>close(...) || die</code>"}, {"owner": {"reputation": 439, "user_id": 5175044, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/1V440.jpg?s=128&g=1", "display_name": "tulians", "link": "https://stackoverflow.com/users/5175044/tulians"}, "reply_to_user": {"reputation": 192, "user_id": 5185210, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DNqsL.png?s=128&g=1", "display_name": "oals", "link": "https://stackoverflow.com/users/5185210/oals"}, "edited": false, "score": 0, "creation_date": 1472562678, "post_id": 39195951, "comment_id": 65793949, "body": "@oals, thanks for pointing that out. What does it do? I thought it was raising an exception if the file could not be closed."}, {"owner": {"reputation": 192, "user_id": 5185210, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DNqsL.png?s=128&g=1", "display_name": "oals", "link": "https://stackoverflow.com/users/5185210/oals"}, "edited": false, "score": 0, "creation_date": 1472563090, "post_id": 39195951, "comment_id": 65794235, "body": "The precedence is wrong. The <code>die</code> won&#39;t be executed on a failed <code>close()</code>. It will be executed only on an un-defined <code>$readings</code> (which shouldn&#39;t happen with your script)"}], "answers": [{"comments": [{"owner": {"reputation": 439, "user_id": 5175044, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/1V440.jpg?s=128&g=1", "display_name": "tulians", "link": "https://stackoverflow.com/users/5175044/tulians"}, "edited": false, "score": 1, "creation_date": 1472420927, "post_id": 39196014, "comment_id": 65732679, "body": "The error 500 was solved by adding what you stated. It&#39;s my first time with Apache and never used the logs before, but now I know how. Thanks for pointing it out."}], "tags": [], "owner": {"reputation": 793701, "user_id": 19068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d2d3229ed1961d2bd81853242493247?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/19068/quentin"}, "is_accepted": true, "score": 2, "last_activity_date": 1472420286, "creation_date": 1472420286, "answer_id": 39196014, "question_id": 39195951, "link": "https://stackoverflow.com/questions/39195951/cant-find-reason-for-error-500-perl/39196014#39196014", "title": "Can&#39;t find reason for error 500 - Perl", "body": "<p>The obvious problem there is that the script doesn't output an HTTP response, which the CGI specification requires.</p>\n\n<p>At a minimum you would need something like:</p>\n\n<pre><code>print \"Status: 204 No Content\", \"\\n\\n\";\n</code></pre>\n\n<p>but it would be more usual to say</p>\n\n<pre><code>print \"Status: 200 OK\", \"\\n\";\nprint \"Content-type: text/plain\", \"\\n\\n\";\nprint \"Success!\";\n</code></pre>\n\n<p>That said, <code>500</code> just means there there is an error. It might be related to the code. It might be related to the server configuration. The above is the obvious problem, but there might be other issues. When you get a 500 error you <strong>need</strong> to look at the server's error log and see what the error message actually says. There is no point in trying to solve the problem before you do that.</p>\n"}], "owner": {"reputation": 439, "user_id": 5175044, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/1V440.jpg?s=128&g=1", "display_name": "tulians", "link": "https://stackoverflow.com/users/5175044/tulians"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 185, "favorite_count": 0, "accepted_answer_id": 39196014, "answer_count": 1, "score": 0, "last_activity_date": 1472893683, "creation_date": 1472419801, "last_edit_date": 1472893683, "question_id": 39195951, "link": "https://stackoverflow.com/questions/39195951/cant-find-reason-for-error-500-perl", "title": "Can&#39;t find reason for error 500 - Perl", "body": "<p>I'm new to Perl and its use in CGI. I've been having this error 500 for some hours and still don't know where's the error(s). The script is placed in the corresponding <code>/usr/lib/cgi-bin</code> folder of the Apache server. It's then called by this simple HTML form:</p>\n\n<pre><code>&lt;FORM action=\"http://localhost/cgi-bin/sensors.cgi\" method=\"POST\"&gt;\nSample period: &lt;input type=\"text\" name=\"sample_period\"&gt;  &lt;br&gt;\n&lt;input type=\"submit\" value=\"Submit\"&gt;\n&lt;/FORM&gt;\n</code></pre>\n\n<p>As fas as I know, an error 500 appears when there was an improper upload or a bug in the script. But I've tested uploading other files and had no problems with it. Thats why I believe there may be a bug in the code. This is the Perl script:</p>\n\n<pre><code>#!/usr/bin/perl\nuse IO::Handle;\n\n# Open the output file that contains the sensors' readings. It's open in write mode, and\n# empties the content of the file on each opening.\nopen (my $readings, \"&gt;\", \"sensors_outputs.txt\") || die \"Couldn't open the output file.\\n\";\n\n\n# Defines the physical magnitudes and sets each one a random value.\nmy $temp = rand 30;\nmy $hum = rand 100;\nmy $pres = 1000 + rand(1010 - 1000);\nmy $speed = rand 100;\n\nfor(;;) {\n    # Writes in the file-handler's file the values of the physical magnitudes.\n    print $readings \"$temp\\n$hum\\n$pres\\n$speed\";\n    # Flush the object so as not to open and close the file each time a new set of\n    # values is generated.\n    $readings-&gt;autoflush;\n    # Move the file-handler to the beggining of the file.\n    seek($readings, 0, SEEK_SET);\n    # Generate new a new data set.\n    $temp = rand 10;\n    $hum = rand 100;\n    $pres = 1000 + rand 10;\n    $speed = rand 100;\n    sleep 1;\n}\nclose $readings || die \"$readings: $!\";\n</code></pre>\n\n<p>Don't hesitate to ask me for more context if needed. Thanks in advance</p>\n"}, {"tags": ["facebook", "perl", "facebook-graph-api", "schedule"], "comments": [{"owner": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "edited": false, "score": 0, "creation_date": 1472447140, "post_id": 39195504, "comment_id": 65737688, "body": "Use the <code>at</code> command.  <a href=\"https://en.wikipedia.org/wiki/At_(Unix)\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/At_(Unix)</a>"}], "owner": {"reputation": 45, "user_id": 6634654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b76f66c4cfb1bbceaecbab001de34c85?s=128&d=identicon&r=PG&f=1", "display_name": "tr0in", "link": "https://stackoverflow.com/users/6634654/tr0in"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 69, "favorite_count": 1, "answer_count": 0, "score": 1, "last_activity_date": 1472416132, "creation_date": 1472416132, "question_id": 39195504, "link": "https://stackoverflow.com/questions/39195504/perl-how-to-schedule-a-photo-to-facebook-page", "title": "perl - How to schedule a photo to Facebook page", "body": "<p>Using <a href=\"http://search.cpan.org/~rizen/Facebook-Graph/lib/Facebook/Graph.pm\" rel=\"nofollow\">Facebook::Graph</a> module I can schedule a simple text message to one of my pages. But, I want to schedule a photo instead of text message.</p>\n\n<p>Here is the sample code that <strong>post a scheduled text message</strong> to my Facebook page. It will post \"Hello World!\", scheduled on 1 hour.</p>\n\n<pre><code>use strict;\nuse warnings;\nuse Facebook::Graph;\n\nmy $FB_PAGE_ID = 'FACEBOOK_PAGE_ID';\n\n# Short-lived Page Token with permissions: manage_pages, publish_pages, publish_actions, public_profile\nmy $FB_PAGE_TOKEN = 'FACEBOOK_PAGE_ACCESS_TOKEN';\n\nmy $fb = Facebook::Graph-&gt;new;\n$fb-&gt;access_token($FB_PAGE_TOKEN);\n\nmy $R = $fb-&gt;add_page_feed\n    -&gt;set_page_id($FB_PAGE_ID)\n    -&gt;set_message('Hello World!')\n    -&gt;set_scheduled_publish_time(time+3600)\n    -&gt;set_published('false')\n    -&gt;publish\n    -&gt;as_string;\n\nprint \"\\n$R\\n\\n\";\n</code></pre>\n\n<p>Here is another sample code that <strong>post a photo</strong> to Facebook page, but without \"schedule\" feature.</p>\n\n<pre><code>use strict;\nuse warnings;\nuse Facebook::Graph;\n\nmy $FB_PAGE_ID = 'FACEBOOK_PAGE_ID';\nmy $FB_PAGE_TOKEN = 'FACEBOOK_PAGE_ACCESS_TOKEN';\n\nmy $fb = Facebook::Graph-&gt;new;\n$fb-&gt;access_token($FB_PAGE_TOKEN);\n\nmy $R = $fb-&gt;add_photo($FB_PAGE_ID)\n    -&gt;set_source('sample_photo.jpg')\n    -&gt;publish\n    -&gt;as_string;\n\nprint \"\\n$R\\n\\n\";\n</code></pre>\n\n<p>I am trying to figure out how to schedule a photo (instead of text message or link) to a Facebook page. Is there any other Perl module or something that can accomplish this?</p>\n"}, {"tags": ["perl", "nonblocking"], "comments": [{"owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "edited": false, "score": 3, "creation_date": 1472417857, "post_id": 39195311, "comment_id": 65731885, "body": "can someone please explain to me the <code>close</code> vote? I don&#39;t quite understand how this doesn&#39;t fit..."}, {"owner": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "edited": false, "score": 1, "creation_date": 1472420120, "post_id": 39195311, "comment_id": 65732471, "body": "Please try with sysread instead of read. sysread implements non-buffering read (i.e. similar to syscall read) while read implements buffered read and tries to read the full buffer (like fread). Also I recommend to use select to find out which file descriptor has data."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1472435950, "post_id": 39195311, "comment_id": 65735405, "body": "<code>eval &quot;use Fcntl qw(:DEFAULT :flock); 1;&quot;</code> makes no sense outside of a <code>BEGIN</code> block. Replace <code>$Global::use{&quot;Fcntl&quot;} ||= eval &quot;use Fcntl qw(:DEFAULT :flock); 1;&quot;;</code> with <code>require Fcntl;</code>. [This isn&#39;t going to help with your problem.]"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "edited": false, "score": 2, "creation_date": 1472436036, "post_id": 39195311, "comment_id": 65735419, "body": "@stevieb, I imagine it&#39;s because they thought the question&#39;s code is far from a <i>minimal</i> demonstration of the problem. I know I won&#39;t be spending time on this when the OP isn&#39;t willing to."}, {"owner": {"reputation": 27241, "user_id": 363028, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/cP1F2.jpg?s=128&g=1", "display_name": "Ole Tange", "link": "https://stackoverflow.com/users/363028/ole-tange"}, "reply_to_user": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "edited": false, "score": 0, "creation_date": 1472451754, "post_id": 39195311, "comment_id": 65739278, "body": "@SteffenUllrich On my system <code>sysread</code> makes no difference. Did it work on your system? (I fought a full day getting <code>select</code> to work, and failed, so expect a follow up question when the EOF-problem is solved)."}, {"owner": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "edited": false, "score": 1, "creation_date": 1472452332, "post_id": 39195311, "comment_id": 65739559, "body": "@OleTange: I agree that you should first produce a minimal example to demonstrate the problem. The code as it is is too complex to reproduce the problem. And remember to always <code>use strict</code> to eliminate the most trivial bugs, which is not the case with the code you have given."}], "answers": [{"tags": [], "owner": {"reputation": 27241, "user_id": 363028, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/cP1F2.jpg?s=128&g=1", "display_name": "Ole Tange", "link": "https://stackoverflow.com/users/363028/ole-tange"}, "is_accepted": false, "score": 1, "last_activity_date": 1472512674, "creation_date": 1472512674, "answer_id": 39216586, "question_id": 39195311, "link": "https://stackoverflow.com/questions/39195311/perl-read-fifos-non-blocking/39216586#39216586", "title": "Perl: read fifos non-blocking", "body": "<p>This solution opens a fake writer that is closed as soon as any data is received. It does the right thing except that it does not end if the input is empty:</p>\n\n<pre><code>mkfifo {1..100}\nparcat {1..100} &amp;\nparallel -j2 echo works '&gt;' {} ::: {1..100}\n\nparcat {1..100} &amp;\n# Fails (parcat does not exit)\nparallel -j2 cat /dev/null '&gt;' {} ::: {1..100}\n</code></pre>\n\n<p>Code:</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse Symbol qw(gensym);\nuse IPC::Open3;\nuse POSIX qw(:errno_h);\nuse IO::Select;\nuse strict;\n\nmy $s = IO::Select-&gt;new();\nmy %fhr;\nmy %fhw;\n\nfor (@ARGV) {\n    # Open the file with a fake writer that will never write\n    open(my $fhw,\"+&lt;\",$_) || die;\n    # Open the file for real\n    open(my $fhr,\"&lt;\",$_) || die;\n    set_fh_non_blocking($fhr);\n    $s-&gt;add($fhr);\n    $fhr{$fhr}++;\n    $fhw{$fhr}=$fhw;\n}\n\nmy %buffer;\nwhile(keys %fhr) {\n    for my $file ($s-&gt;can_read(undef)) {\n        my $rv = sysread($file, substr($buffer{$file},length $buffer{$file}), 327680);\n        if (!$rv) {\n            if($! == EAGAIN) {\n            # Would block: Nothing read\n        next;\n            } else {\n            # This file is done\n        $s-&gt;remove($file);\n            delete $fhr{$file};\n        print $buffer{$file};\n            delete $buffer{$file};\n        # Closing the $file causes it to block\n        # close $file;\n        next;\n            }\n        }\n    if($fhw{$file}) {\n        # We have received data from $file:\n        # Close the fake writer\n        close $fhw{$file};\n        delete $fhw{$file};\n    }\n\n        # Find \\n or \\r for full line\n        my $i = (::rindex64(\\$buffer{$file},\"\\n\")+1) ||\n            (::rindex64(\\$buffer{$file},\"\\r\")+1);\n        if($i) {\n            # Print full line\n            # Remove full line from $buffer\n        print substr($buffer{$file},0,$i);\n        substr($buffer{$file},0,$i) = \"\";\n        next;\n        } else {\n            # Something read, but not a full line\n        next;\n        }\n    }\n}\n\nsub rindex64 {\n    # Do rindex on strings &gt; 2GB.\n    # rindex in Perl &lt; v5.22 does not work for &gt; 2GB\n    # Input:\n    #   as rindex except STR which must be passed as a reference\n    # Output:\n    #   as rindex\n    my $ref = shift;\n    my $match = shift;\n    my $pos = shift;\n    my $block_size = 2**31-1;\n    my $strlen = length($$ref);\n    # Default: search from end\n    $pos = defined $pos ? $pos : $strlen;\n    # No point in doing extra work if we don't need to.\n    if($strlen &lt; $block_size) {\n        return rindex($$ref, $match, $pos);\n    }\n\n    my $matchlen = length($match);\n    my $ret;\n    my $offset = $pos - $block_size + $matchlen;\n    if($offset &lt; 0) {\n        # The offset is less than a $block_size\n        # Set the $offset to 0 and\n        # Adjust block_size accordingly\n        $block_size = $block_size + $offset;\n        $offset = 0;\n    }\n    while($offset &gt;= 0) {\n        $ret = rindex(\n            substr($$ref, $offset, $block_size),\n            $match);\n        if($ret != -1) {\n            return $ret + $offset;\n        }\n        $offset -= ($block_size - $matchlen - 1);\n    }\n    return -1;\n}\n\nsub set_fh_non_blocking {\n    # Set filehandle as non-blocking\n    # Inputs:\n    #   $fh = filehandle to be blocking\n    # Returns:\n    #   N/A\n    my $fh = shift;\n    $Global::use{\"Fcntl\"} ||= eval \"use Fcntl qw(:DEFAULT :flock); 1;\";\n    my $flags;\n    fcntl($fh, &amp;F_GETFL, $flags) || die $!; # Get the current flags on the filehandle\n    $flags |= &amp;O_NONBLOCK; # Add non-blocking to the flags\n    fcntl($fh, &amp;F_SETFL, $flags) || die $!; # Set the flags on the filehandle\n}\n</code></pre>\n"}], "owner": {"reputation": 27241, "user_id": 363028, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/cP1F2.jpg?s=128&g=1", "display_name": "Ole Tange", "link": "https://stackoverflow.com/users/363028/ole-tange"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1106, "favorite_count": 0, "answer_count": 1, "score": 4, "last_activity_date": 1472512674, "creation_date": 1472414790, "last_edit_date": 1490005101, "question_id": 39195311, "link": "https://stackoverflow.com/questions/39195311/perl-read-fifos-non-blocking", "title": "Perl: read fifos non-blocking", "body": "<p>My original solution for <a href=\"https://superuser.com/questions/482953/read-non-blocking-from-multiple-fifos-in-parallel?answertab=oldest#tab-top\">https://superuser.com/questions/482953/read-non-blocking-from-multiple-fifos-in-parallel?answertab=oldest#tab-top</a> saves a copy of the data on disk.</p>\n\n<p>I have now made a second version that buffers a line in memory.</p>\n\n<p>It works but it needs all fifos to be connected before it starts. This works:</p>\n\n<pre><code>window1$ mkfifo {1..100}\nwindow1$ parcat {1..100} | pv &gt;/dev/null\n\nwindow2$ parallel -j0 'cat bigfile &gt; ' ::: *\n</code></pre>\n\n<p>This does not give any output (because 100 is not connected):</p>\n\n<pre><code>window1$ mkfifo {1..100}\nwindow1$ parcat {1..100} | pv &gt;/dev/null\n\nwindow2$ parallel -j0 'cat bigfile &gt; ' ::: {1..99}\n</code></pre>\n\n<p>I tried using <code>open '+&lt;'</code>. That solves the above problem, but now it does not stop at EOF.</p>\n\n<p>How do I do that?</p>\n\n<p>Minimal version (does not support big lines and does not backoff-wait):</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse Symbol qw(gensym);\nuse IPC::Open3;\nuse POSIX qw(:errno_h);\nuse Fcntl qw(:DEFAULT :flock);\n\nfor (@ARGV) {\n    open($fh{$_},\"&lt;\",$_) || die;\n    # set fh non blocking($fh{$_});\n    my $flags;\n    fcntl($fh{$_}, &amp;F_GETFL, $flags) || die $!; # Get the current flags on the filehandle\n    $flags |= &amp;O_NONBLOCK; # Add non-blocking to the flags\n    fcntl($fh{$_}, &amp;F_SETFL, $flags) || die $!; # Set the flags on the filehandle\n}\n\nwhile(keys %fh) {\n    for(keys %fh) {\n        my($string,$something_read) = non_blocking_read($_);\n    print $string;\n    }\n    # Sleep 1 ms\n    select(undef, undef, undef, 1/1000);\n}\n\n{\n    my %buffer;\n\n    sub non_blocking_read {\n\n        my $file = shift;\n        my $in = $fh{$file};\n        my $rv = sysread($in, substr($buffer{$file},length $buffer{$file}), 327680);\n        if (!$rv) {\n            if($! == EAGAIN) {\n            # Would block: Nothing read\n            return(undef,undef);\n            } else {\n            # This file is done\n            close $in;\n            delete $fh{$file};\n            my $buf = $buffer{$file};\n            delete $buffer{$file};\n            return ($buf,1);\n            }\n        }\n\n        # Find \\n for full line\n        my $i = (rindex($buffer{$file},\"\\n\")+1);\n        if($i) {\n            # Return full line\n            # Remove full line from $buffer\n            return(substr($buffer{$file},0,$i),\n               1,substr($buffer{$file},0,$i) = \"\");\n        } else {\n            # Something read, but not a full line\n            return(\"\",1);\n        }\n    }\n}\n</code></pre>\n\n<p>Full version: The important code is in the first 40 lines: The rest is well-tested code.</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse Symbol qw(gensym);\nuse IPC::Open3;\n\nfor (@ARGV) {\n    open($fh{$_},\"&lt;\",$_) || die;\n    set_fh_non_blocking($fh{$_});\n}\n\n$ms = 1;\nwhile(keys %fh) {\n    for(keys %fh) {\n    my($string,$something_read) = non_blocking_read($_);\n    if($something_read) {\n        $ms = 0.1;\n        print $string;\n    }\n    }\n    $ms = exp_usleep($ms);\n}\n\n{\n    my %buffer;\n    my $ms;\n\n    sub non_blocking_read {\n    use POSIX qw(:errno_h);\n\n    my $file = shift;\n    my $in = $fh{$file};\n    my $rv = read($in, substr($buffer{$file},length $buffer{$file}), 327680);\n    if (!$rv) {\n        if($! == EAGAIN) {\n        # Would block: Nothing read\n        return(undef,undef);\n        } else {\n        # This file is done\n        close $in;\n        delete $fh{$file};\n        my $buf = $buffer{$file};\n        delete $buffer{$file};\n        return ($buf,1);\n        }\n    }\n\n    #### Well-tested code below                                                           \n\n    # Find \\n or \\r for full line\n    my $i = (::rindex64(\\$buffer{$file},\"\\n\")+1) ||\n        (::rindex64(\\$buffer{$file},\"\\r\")+1);\n    if($i) {\n        # Return full line\n        # Remove full line from $buffer\n        return(substr($buffer{$file},0,$i),\n           1,substr($buffer{$file},0,$i) = \"\");\n    } else {\n        # Something read, but not a full line\n        return(\"\",1);\n    }\n    }\n}\n\nsub rindex64 {\n    # Do rindex on strings &gt; 2GB.\n    # rindex in Perl &lt; v5.22 does not work for &gt; 2GB\n    # Input:\n    #   as rindex except STR which must be passed as a reference\n    # Output:\n    #   as rindex\n    my $ref = shift;\n    my $match = shift;\n    my $pos = shift;\n    my $block_size = 2**31-1;\n    my $strlen = length($$ref);\n    # Default: search from end\n    $pos = defined $pos ? $pos : $strlen;\n    # No point in doing extra work if we don't need to.\n    if($strlen &lt; $block_size) {\n    return rindex($$ref, $match, $pos);\n    }\n\n    my $matchlen = length($match);\n    my $ret;\n    my $offset = $pos - $block_size + $matchlen;\n    if($offset &lt; 0) {\n    # The offset is less than a $block_size\n    # Set the $offset to 0 and\n    # Adjust block_size accordingly\n    $block_size = $block_size + $offset;\n    $offset = 0;\n    }\n    while($offset &gt;= 0) {\n    $ret = rindex(\n        substr($$ref, $offset, $block_size),\n        $match);\n    if($ret != -1) {\n        return $ret + $offset;\n    }\n    $offset -= ($block_size - $matchlen - 1);\n    }\n    return -1;\n}\n\nsub exp_usleep {\n    # Sleep this many milliseconds.\n    # Input:\n    #   $ms = milliseconds to sleep\n    # Returns:\n    #   $ms + 10%\n    my $ms = shift;\n    select(undef, undef, undef, $ms/1000);\n    return (($ms &lt; 1000) ? ($ms * 1.1) : ($ms));\n}\n\nsub set_fh_non_blocking {\n    # Set filehandle as non-blocking\n    # Inputs:\n    #   $fh = filehandle to be blocking\n    # Returns:\n    #   N/A\n    my $fh = shift;\n    $Global::use{\"Fcntl\"} ||= eval \"use Fcntl qw(:DEFAULT :flock); 1;\";\n    my $flags;\n    fcntl($fh, &amp;F_GETFL, $flags) || die $!; # Get the current flags on the filehandle\n    $flags |= &amp;O_NONBLOCK; # Add non-blocking to the flags\n    fcntl($fh, &amp;F_SETFL, $flags) || die $!; # Set the flags on the filehandle\n}\n</code></pre>\n"}, {"tags": ["arrays", "json", "perl", "hash", "cgi"], "comments": [{"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 1, "creation_date": 1472379395, "post_id": 39190133, "comment_id": 65720962, "body": "What module do you use to create the JSON? <a href=\"http://p3rl.org/JSON::PP\" rel=\"nofollow noreferrer\">JSON::PP</a>, <a href=\"http://p3rl.org/JSON::XS\" rel=\"nofollow noreferrer\">JSON::XS</a>, <a href=\"http://p3rl.org/JSON::Tiny\" rel=\"nofollow noreferrer\">JSON::Tiny</a>, <a href=\"http://p3rl.org/Cpanel::JSON::XS\" rel=\"nofollow noreferrer\">Cpanel::JSON::XS</a>, something else?"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1472388840, "post_id": 39190133, "comment_id": 65723540, "body": "You have both <code>page</code> and <code>content</code> as arrays containing a single hash. Is that correct? Similarly, you have <code>pages</code> as a hash containing a single array <code>page</code>. I would have thought that <code>pages</code> should be an array and <code>page</code> is superfluous, or are you tied to someone else&#39;s design?"}, {"owner": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "edited": false, "score": 1, "creation_date": 1472392248, "post_id": 39190133, "comment_id": 65724504, "body": "How about formatting your json for humans first? <a href=\"http://codebeautify.org/jsonviewer/cb62c7cf\" rel=\"nofollow noreferrer\">codebeautify.org/jsonviewer/cb62c7cf</a>"}], "answers": [{"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 0, "last_activity_date": 1472410561, "last_edit_date": 1472410561, "creation_date": 1472409980, "answer_id": 39194649, "question_id": 39190133, "link": "https://stackoverflow.com/questions/39190133/adding-to-perl-arrays-and-hashes/39194649#39194649", "title": "Adding to Perl arrays and hashes", "body": "<p>All you need is</p>\n\n<pre><code>push @{ $data-&gt;{pages}{page} }, \\%rec_hash;\n</code></pre>\n\n<p>But your <code>%rec_hash</code> has problems.</p>\n\n<pre><code>my %rec_hash = (\n    PID        =&gt; $PID,\n    UID        =&gt; $UID,              # &lt;-- Was missing\n    menu_order =&gt; '1',\n    status     =&gt; '1',\n    name       =&gt; $name,\n    blocked    =&gt; '0',               # &lt;-- Was missing\n    frontpage  =&gt; '1',               # &lt;-- Was missing\n    content    =&gt; [                  # &lt;-- Array was missing\n        {\n            'block1' =&gt; $block1,\n            'block2' =&gt; $block2,\n            'block3' =&gt; $block3,\n            'block4' =&gt; $block4,\n            'block5' =&gt; $block5,\n        },\n    ],\n);\n</code></pre>\n\n<hr>\n\n<p>By the way, this appears to be a weird data structure.</p>\n\n<ul>\n<li><code>pages</code> is a single-key associative array.</li>\n<li>Singular <code>page</code> is an array of pages.</li>\n<li><code>content</code> is a single-element array.</li>\n</ul>\n"}], "owner": {"reputation": 1, "user_id": 5497001, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5e7b8bf10a4635878be8a8872eea4979?s=128&d=identicon&r=PG&f=1", "display_name": "Webavec", "link": "https://stackoverflow.com/users/5497001/webavec"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 95, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1472410561, "creation_date": 1472378665, "last_edit_date": 1472410459, "question_id": 39190133, "link": "https://stackoverflow.com/questions/39190133/adding-to-perl-arrays-and-hashes", "title": "Adding to Perl arrays and hashes", "body": "<p>I'm currently working with JSON files, creating, adding, changing and removing data from them. I'm now completely lost in the array-hash levels issue.</p>\n\n<p>I have a JSON file, looking like this:</p>\n\n<pre><code>{\n  \"pages\": {\n    \"page\": [\n      {\n        \"PID\": \"84634572\",\n        \"UID\": \"2\",\n        \"menu_order\": \"65\",\n        \"status\": \"1\",\n        \"name\": \"Blabla\",\n        \"blocked\": \"0\",\n        \"frontpage\": \"1\",\n        \"content\": [\n          {\n            \"block1\": \"test3\",\n            \"block2\": \"test2\",\n            \"block3\": \"test5\",\n            \"block4\": \"test1\",\n            \"block5\": \"test4\"\n          }\n        ],\n      }\n    ]\n  }\n}\n</code></pre>\n\n<p>I want to add more pages to the file, and have come up with the following way of building the string from where \"PID\" begins, before pushing it to the existing file:</p>\n\n<pre><code>my %rec_hash = (\n    'PID'        =&gt; $PID,\n    'menu_order' =&gt; '1',\n    'status'     =&gt; '1',\n    'name'       =&gt; $name,\n    'content'    =&gt; {\n        'block1' =&gt; $block1,\n        'block2' =&gt; $block2,\n        'block3' =&gt; $block3,\n        'block4' =&gt; $block4,\n        'block5' =&gt; $block5\n    }\n);\n</code></pre>\n\n<p>This works, in a way, but I won't get the starting brace <code>{</code> before \"PID\". Any help on how to build <code>%rec_hash</code> the correct way?</p>\n"}, {"tags": ["perl", "directory"], "comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1472377445, "post_id": 39189652, "comment_id": 65720496, "body": "I can&#39;t test on Windows now, but how about this -- evaluate that into a string, then use that string in <code>mkpath</code>.  Like <code>my $path = &quot;C:&#47;CD${version}...&quot;; mkpath($path, ...);</code>  Or use <code>sprintf</code> to create the string, if necessary."}], "answers": [{"comments": [{"owner": {"reputation": 561, "user_id": 1974272, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/40fd8c37aba4fc96a6788942e4694360?s=128&d=identicon&r=PG&f=1", "display_name": "Epligam", "link": "https://stackoverflow.com/users/1974272/epligam"}, "edited": false, "score": 0, "creation_date": 1472376469, "post_id": 39189705, "comment_id": 65720236, "body": "hem, using curly braces create this C:\\CD{12.0}\\PROD{12.0}_NEW"}, {"owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "reply_to_user": {"reputation": 561, "user_id": 1974272, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/40fd8c37aba4fc96a6788942e4694360?s=128&d=identicon&r=PG&f=1", "display_name": "Epligam", "link": "https://stackoverflow.com/users/1974272/epligam"}, "edited": false, "score": 1, "creation_date": 1472379482, "post_id": 39189705, "comment_id": 65720986, "body": "@Epligam Then you wrote <code>&quot;C:&#47;CD{$version}&#47;\u2026&quot;</code> instead of <code>&quot;C:&#47;CD${version}&#47;\u2026&quot;</code>."}], "tags": [], "owner": {"reputation": 3840, "user_id": 2176756, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/66a04dca4e95f5b58b187c491463ba06?s=128&d=identicon&r=PG", "display_name": "j.holetzeck", "link": "https://stackoverflow.com/users/2176756/j-holetzeck"}, "is_accepted": true, "score": 2, "last_activity_date": 1472410804, "last_edit_date": 1472410804, "creation_date": 1472375767, "answer_id": 39189705, "question_id": 39189652, "link": "https://stackoverflow.com/questions/39189652/perl-create-folder-combination-of-variable-and-underscore/39189705#39189705", "title": "Perl create folder combination of variable and underscore", "body": "<p>You have to use curly braces or the concatenation operator</p>\n\n<pre><code>\"C:/CD$version/PROD${version}_NEW\"\n\n\"C:/CD$version/PROD\" . $version . \"_NEW\"\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 15906, "user_id": 3527940, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/k1R45.jpg?s=128&g=1", "display_name": "jcaron", "link": "https://stackoverflow.com/users/3527940/jcaron"}, "is_accepted": false, "score": 2, "last_activity_date": 1472378346, "creation_date": 1472378346, "answer_id": 39190085, "question_id": 39189652, "link": "https://stackoverflow.com/questions/39189652/perl-create-folder-combination-of-variable-and-underscore/39190085#39190085", "title": "Perl create folder combination of variable and underscore", "body": "<p>Instead of doing implicit concatenation as in <code>\"this$that\"</code>, you can do explicit concatenation, as in <code>\"this\".$that</code>.</p>\n\n<p>So:</p>\n\n<pre><code>  mkpath(\"C:/CD\".$version.\"/PROD\".$version.\"_NEW\") or die;\n</code></pre>\n\n<p>Alternatively, use braces:</p>\n\n<pre><code>  mkpath(\"C:/CD${version}PROD${version}_NEW\") or die;\n</code></pre>\n"}], "owner": {"reputation": 561, "user_id": 1974272, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/40fd8c37aba4fc96a6788942e4694360?s=128&d=identicon&r=PG&f=1", "display_name": "Epligam", "link": "https://stackoverflow.com/users/1974272/epligam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 53, "favorite_count": 0, "accepted_answer_id": 39189705, "answer_count": 2, "score": 0, "last_activity_date": 1472410804, "creation_date": 1472375425, "question_id": 39189652, "link": "https://stackoverflow.com/questions/39189652/perl-create-folder-combination-of-variable-and-underscore", "title": "Perl create folder combination of variable and underscore", "body": "<p>How can I create a folder which is a combination of a variable and underscore ( and other special characters ) on Windows ?</p>\n\n<p>I need to create this folder C:\\CD12.0\\PROD12.0_NEW so I tried this</p>\n\n<pre><code>  use File::Basename;\n  use File::Path;\n  my $version = \"12.0\";\n  mkpath(\"C:/CD$version/PROD$version_NEW\") or die;\n</code></pre>\n\n<p>Get this error</p>\n\n<pre><code>  Global symbol \"$version_NEW\" requires explicit package name\n</code></pre>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 9855, "user_id": 7780, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/bf9668c1ebea8ecea9f1ac4474236b5e?s=128&d=identicon&r=PG", "display_name": "dsm", "link": "https://stackoverflow.com/users/7780/dsm"}, "edited": false, "score": 1, "creation_date": 1472362134, "post_id": 39188159, "comment_id": 65717494, "body": "you could just <code>echo before &amp;&amp; test -f qux &amp;&amp; ...</code>"}, {"owner": {"reputation": 537, "user_id": 4889818, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b6eff6321f38676111fedcac92f91a2b?s=128&d=identicon&r=PG&f=1", "display_name": "newguy", "link": "https://stackoverflow.com/users/4889818/newguy"}, "reply_to_user": {"reputation": 9855, "user_id": 7780, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/bf9668c1ebea8ecea9f1ac4474236b5e?s=128&d=identicon&r=PG", "display_name": "dsm", "link": "https://stackoverflow.com/users/7780/dsm"}, "edited": false, "score": 0, "creation_date": 1472362444, "post_id": 39188159, "comment_id": 65717541, "body": "@dsm yeah that seems like a good workaround, thanks"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 2, "creation_date": 1472364568, "post_id": 39188159, "comment_id": 65717856, "body": "The interpreter (Perl) is returning to the shell, not the (one-line) program that it executed. There is no reason for it to return anything other than success (0). If you were to invoke a script instead of a one-liner you could have it <code>exit 1</code>."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1472364986, "post_id": 39188159, "comment_id": 65717935, "body": "Another point -- the loop over the input is setup as part of <code>-p</code> so the absence of a file is an uncaught exception and you have no control over what happens. You could drop that, like <code>perl -e &#39;-f qux || exit 1; ...&#39;</code> and then it will work as expected.  But then of course you&#39;d have to set up <code>while(&lt;&gt;) { ... }</code> yourself and things become unwieldy."}, {"owner": {"reputation": 537, "user_id": 4889818, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b6eff6321f38676111fedcac92f91a2b?s=128&d=identicon&r=PG&f=1", "display_name": "newguy", "link": "https://stackoverflow.com/users/4889818/newguy"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1472434234, "post_id": 39188159, "comment_id": 65735114, "body": "@zdim I am curious is there a reason I can&#39;t do <code>$SIG{__DIE__} = sub {exit 1};</code> I just tried setting up a while(&lt;&gt;) and the die signal handler isn&#39;t called"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1472436626, "post_id": 39188159, "comment_id": 65735512, "body": "The idea of using only <code>-e</code> is that you can test for the file (<code>-f</code>, <code>not -z</code>), since it&#39;s not setup in the loop already, and you don&#39;t have to go to signals. Then you&#39;d have to loop your self, which isn&#39;t too bad -- <code>while &lt;&gt; {...}</code> (it reads <code>ARGV</code>) or just <code>@o = map { s&#47;..&#47;...&#47;r } &lt;&gt;</code>.  But then you also have to write the file yourself. So it adds up and solution by <a href=\"http://stackoverflow.com/users/18914/dave-sherohman\">Dave Sherohman</a> is much better. The problem with signal handler is that <code>-p</code> does the loop first, while you can&#39;t set it in <code>BEGIN</code>."}], "answers": [{"comments": [{"owner": {"reputation": 42833, "user_id": 18914, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7a20a39ae2ef47ae042a3eddd5b5bd19?s=128&d=identicon&r=PG", "display_name": "Dave Sherohman", "link": "https://stackoverflow.com/users/18914/dave-sherohman"}, "edited": false, "score": 0, "creation_date": 1472371295, "post_id": 39188288, "comment_id": 65719028, "body": "This does, however, change the semantics of the Perl, as the output will be written to STDOUT rather than modifying the file in-place."}, {"owner": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "reply_to_user": {"reputation": 42833, "user_id": 18914, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7a20a39ae2ef47ae042a3eddd5b5bd19?s=128&d=identicon&r=PG", "display_name": "Dave Sherohman", "link": "https://stackoverflow.com/users/18914/dave-sherohman"}, "edited": false, "score": 0, "creation_date": 1472371556, "post_id": 39188288, "comment_id": 65719102, "body": "@DaveSherohman: you are right, I did not notice the <code>-i</code> switch. I&#39;ve added another way to deal with the problem."}], "tags": [], "owner": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "is_accepted": true, "score": 4, "last_activity_date": 1472371665, "last_edit_date": 1472371665, "creation_date": 1472362069, "answer_id": 39188288, "question_id": 39188159, "link": "https://stackoverflow.com/questions/39188159/perl-why-exit-code-0-if-error-file-not-found-can-i-make-it-code-1/39188288#39188288", "title": "perl - Why exit code 0 if error file not found, can I make it code 1?", "body": "<p>You might use <code>perl -pe ... &lt; file</code> instead of <code>perl -pe ... file</code>. In this case the shell will already complain if the file does not exist without even invoking perl. But this can not be used together with the <code>-i</code> switch.</p>\n\n<p>Or since you want to use the <code>-i</code> switch you might check that the file is writable before using it. Not that this checks for <code>qux</code> being both file and writable because being only one of these is not enough (maybe one needs to check for readable too).</p>\n\n<pre><code>[ -f qux ] &amp;&amp; [ -w qux ] &amp;&amp; perl -pe ... -i qux\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 2, "creation_date": 1472377086, "post_id": 39189394, "comment_id": 65720404, "body": "Ah, that escaped me. I put together a short one-liner with only <code>-e</code> but this is better. In my testing <code>BEGIN { exit 1 if not -f $ARGV[0] or -z $ARGV[0] }</code> takes care of both cases. Longer, but then there is no need for <code>seek</code>."}, {"owner": {"reputation": 42833, "user_id": 18914, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7a20a39ae2ef47ae042a3eddd5b5bd19?s=128&d=identicon&r=PG", "display_name": "Dave Sherohman", "link": "https://stackoverflow.com/users/18914/dave-sherohman"}, "reply_to_user": {"reputation": 34726, "user_id": 133939, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/pN9C5.png?s=128&g=1", "display_name": "Zaid", "link": "https://stackoverflow.com/users/133939/zaid"}, "edited": false, "score": 0, "creation_date": 1472454896, "post_id": 39189394, "comment_id": 65740713, "body": "Very nice, @Zaid! I didn&#39;t know <code>eof</code> had that magic. Unfortunately, it still fails to distinguish between empty files and missing files. It&#39;s looking like there may not be a way to do that without explicitly using file tests from within the Perl code, as @zdim suggests."}, {"owner": {"reputation": 34726, "user_id": 133939, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/pN9C5.png?s=128&g=1", "display_name": "Zaid", "link": "https://stackoverflow.com/users/133939/zaid"}, "edited": false, "score": 1, "creation_date": 1472464505, "post_id": 39189394, "comment_id": 65745823, "body": "Yes, I think something like <code>BEGIN { @ARGV = grep -f &amp;&amp; ! -z, @ARGV; exit 1 if eof() || ! @ARGV }</code> would address that, but the solution is an eyesore to say the least. I think it is best to defer these sorts of file checks to the shell if possible, in which case there is no need for the <code>BEGIN</code> block at all. Still, this question made for an interesting exercise."}, {"owner": {"reputation": 42833, "user_id": 18914, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7a20a39ae2ef47ae042a3eddd5b5bd19?s=128&d=identicon&r=PG", "display_name": "Dave Sherohman", "link": "https://stackoverflow.com/users/18914/dave-sherohman"}, "reply_to_user": {"reputation": 34726, "user_id": 133939, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/pN9C5.png?s=128&g=1", "display_name": "Zaid", "link": "https://stackoverflow.com/users/133939/zaid"}, "edited": false, "score": 0, "creation_date": 1472477609, "post_id": 39189394, "comment_id": 65754163, "body": "@Zaid Yes, exactly. I really had a lot of fun tracking down the solution in my answer!"}], "tags": [], "owner": {"reputation": 42833, "user_id": 18914, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7a20a39ae2ef47ae042a3eddd5b5bd19?s=128&d=identicon&r=PG", "display_name": "Dave Sherohman", "link": "https://stackoverflow.com/users/18914/dave-sherohman"}, "is_accepted": false, "score": 2, "last_activity_date": 1472373212, "creation_date": 1472373212, "answer_id": 39189394, "question_id": 39188159, "link": "https://stackoverflow.com/questions/39188159/perl-why-exit-code-0-if-error-file-not-found-can-i-make-it-code-1/39189394#39189394", "title": "perl - Why exit code 0 if error file not found, can I make it code 1?", "body": "<p>OK, so...</p>\n\n<p>As mentioned in comments to the question, the reason <code>perl</code> exits with a 0 is because <code>perl</code> itself was successful, even if the code executed by <code>perl</code> was not.  In order to get it to exit with a failure, then, we need to find a way to make it <code>die</code> (or explicitly <code>exit</code> with a non-zero status) if the file can't be opened.</p>\n\n<p>But <code>perl -p</code> wraps a loop around your one-liner, so can we do that without having to repeat the test on every line?  Yes, we can!  <code>perldoc perlrun</code> tells us that <code>BEGIN</code> and <code>END</code> blocks allow us to take control before or after the loop executes.</p>\n\n<p>But we still need a way to tell whether the file was successfully opened.  To do that, we need to know the name of the filehandle used by <code>&lt;&gt;</code>, which <code>perldoc perlvar</code> tells us is called <code>ARGV</code>.</p>\n\n<p>But <code>ARGV</code> is only (reliably) magical when it's read from, so we can't just test for whether it's defined because (in my quick testing) it's <em>always</em> defined, even if the file is missing.  So we have to read from it.  And then the first line is lost.  But that's easily fixed by <code>seek</code>ing back to the start of the file.</p>\n\n<p><strong>TL;DR</strong> and the upshot of all that:</p>\n\n<pre><code>echo before &amp;&amp; \\\nperl -pe 'BEGIN { exit 1 unless &lt;&gt; ; seek ARGV,0,0 } s/foo/bar/g' -i qux &amp;&amp; \\\necho after\n</code></pre>\n\n<p>Note that this still isn't 100% perfect.  It will also <code>die</code> if the file exists, but is empty.  Checking <code>defined &lt;&gt;</code> doesn't fix this flaw and attempting to <code>&lt;&gt; ; die unless ARGV</code> causes <code>&lt;&gt;</code> to read from <code>STDIN</code> if the file doesn't exist.  If anyone has a way to get it to correctly detect empty files, I'd be very interested to hear about it!</p>\n"}], "owner": {"reputation": 537, "user_id": 4889818, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b6eff6321f38676111fedcac92f91a2b?s=128&d=identicon&r=PG&f=1", "display_name": "newguy", "link": "https://stackoverflow.com/users/4889818/newguy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 975, "favorite_count": 3, "accepted_answer_id": 39188288, "answer_count": 2, "score": 6, "last_activity_date": 1472373212, "creation_date": 1472360384, "question_id": 39188159, "link": "https://stackoverflow.com/questions/39188159/perl-why-exit-code-0-if-error-file-not-found-can-i-make-it-code-1", "title": "perl - Why exit code 0 if error file not found, can I make it code 1?", "body": "<p>I have a several logical AND commands and in the middle is a perl command that edits a file in-place.</p>\n\n<pre><code>echo before &amp;&amp; \\\nperl -pe 's/foo/bar/g' -i qux &amp;&amp; \\\necho after\n</code></pre>\n\n<p>If the file does not exist perl will die with \"Can't open qux: No such file or directory.\" But the error code is 0. That is a problem because I don't want the command to continue. In other words 'after' shouldn't print if the file doesn't exist. Why is that happening and how can I stop it?</p>\n"}, {"tags": ["regex", "perl", "cpan"], "answers": [{"comments": [{"owner": {"reputation": 81, "user_id": 6724223, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/ae8147e8133e7977beed4438cf79baa7?s=128&d=identicon&r=PG&f=1", "display_name": "V. Tej", "link": "https://stackoverflow.com/users/6724223/v-tej"}, "edited": false, "score": 0, "creation_date": 1472504940, "post_id": 39188296, "comment_id": 65769159, "body": "Thanks a lot for a detailed answer. It helps."}], "tags": [], "owner": {"reputation": 13817, "user_id": 1005215, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/33a92149e35c60382fa24bcc2b20722e?s=128&d=identicon&r=PG", "display_name": "Nehal J Wani", "link": "https://stackoverflow.com/users/1005215/nehal-j-wani"}, "is_accepted": true, "score": 3, "last_activity_date": 1472362580, "last_edit_date": 1472362580, "creation_date": 1472362253, "answer_id": 39188296, "question_id": 39187003, "link": "https://stackoverflow.com/questions/39187003/perl-script-to-read-all-the-elements-in-particular-column-of-an-excel-file/39188296#39188296", "title": "perl script to read all the elements in particular column of an excel file", "body": "<p>Suppose my data is:</p>\n\n<p><a href=\"https://i.stack.imgur.com/cfU1E.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/cfU1E.png\" alt=\"enter image description here\"></a></p>\n\n<p>One way is to do what you want (since 'D' corresponds to 4th column):</p>\n\n<pre><code>$ cat a.pl\nuse strict;\nuse warnings;\nuse feature 'say';\nuse Spreadsheet::Read;\nuse Spreadsheet::ParseExcel;\nuse Data::Dumper;\n\nmy $workbook = ReadData (\"/tmp/file.xls\", parser =&gt; \"xls\");\nprint Dumper($workbook-&gt;[1]{cell}[4]);\nforeach my $cell (@{$workbook-&gt;[1]{cell}[4]}) {\n   if ($cell) {\n       print $cell . \"\\n\";\n   }\n}\n\n\n$ perl a.pl\n$VAR1 = [\n          undef,\n          'grid',\n          1115,\n          1512,\n          212\n        ];\ngrid\n1115\n1512\n212\n</code></pre>\n\n<p>Another way is to use <a href=\"http://search.cpan.org/~gng/Spreadsheet-BasicReadNamedCol-1.03/BasicReadNamedCol.pm\" rel=\"nofollow noreferrer\">Spreadsheet::BasicReadNamedCol</a>:</p>\n\n<pre><code>$ cat a.pl\nuse strict;\nuse warnings;\nuse feature 'say';\nuse Spreadsheet::BasicReadNamedCol;\nuse Data::Dumper;\nmy @columnHeadings = (\n    'grid',\n);\nmy $workbook = new Spreadsheet::BasicReadNamedCol(\"/tmp/file.xls\");\n$workbook-&gt;setColumns(@columnHeadings);\nwhile (my $data = $workbook-&gt;getNextRow()) {\n    print \"@{$data}[0]\\n\";\n}\n$ perl a.pl\ngrid\n1115\n1512\n212\n</code></pre>\n"}], "owner": {"reputation": 81, "user_id": 6724223, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/ae8147e8133e7977beed4438cf79baa7?s=128&d=identicon&r=PG&f=1", "display_name": "V. Tej", "link": "https://stackoverflow.com/users/6724223/v-tej"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 855, "favorite_count": 0, "accepted_answer_id": 39188296, "answer_count": 1, "score": 2, "last_activity_date": 1472362580, "creation_date": 1472344383, "question_id": 39187003, "link": "https://stackoverflow.com/questions/39187003/perl-script-to-read-all-the-elements-in-particular-column-of-an-excel-file", "title": "perl script to read all the elements in particular column of an excel file", "body": "<p>I wrote a perl script to read a particular cell value of a column in an excel file. </p>\n\n<pre><code>use strict;\nuse warnings;\nuse feature 'say';\nuse Spreadsheet::Read;\nuse Spreadsheet::ParseExcel;\n\nmy $workbook = ReadData (\"C::/Users/Tej/Work.xlsx\");\nprint $workbook-&gt;[6]{D4} . \"\\n\";\n</code></pre>\n\n<p>All good till here. I want to write the logic to read all cell values under column D until there are values in that column. Can anyone help me with it.</p>\n\n<p>Thanks</p>\n"}, {"tags": ["string", "perl"], "answers": [{"tags": [], "owner": {"reputation": 148, "user_id": 3788443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d1534339750cdb1b7abc2220fe102a0a?s=128&d=identicon&r=PG&f=1", "display_name": "Boncrete", "link": "https://stackoverflow.com/users/3788443/boncrete"}, "is_accepted": true, "score": 0, "last_activity_date": 1472352818, "last_edit_date": 1472352818, "creation_date": 1472346335, "answer_id": 39187145, "question_id": 39186901, "link": "https://stackoverflow.com/questions/39186901/perl-print-remaining-string-only-if-there-is-no-character-before-the-matched-va/39187145#39187145", "title": "perl: print remaining string only if there is no character before the matched value.", "body": "<p>A regex with a leading carat indicates that the expression should match only if it is the first item on the line. The pattern <code>/^B[.] (.*)/s</code> should get you the result you're looking for.</p>\n"}, {"tags": [], "owner": {"reputation": 5455, "user_id": 3961170, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/PtFol.jpg?s=128&g=1", "display_name": "mkHun", "link": "https://stackoverflow.com/users/3961170/mkhun"}, "is_accepted": false, "score": 0, "last_activity_date": 1472569883, "last_edit_date": 1472569883, "creation_date": 1472353162, "answer_id": 39187638, "question_id": 39186901, "link": "https://stackoverflow.com/questions/39186901/perl-print-remaining-string-only-if-there-is-no-character-before-the-matched-va/39187638#39187638", "title": "perl: print remaining string only if there is no character before the matched value.", "body": "<p>Put <code>^</code> in front of the <code>B</code>. It means match the word starts with <code>B</code>. So your regex should be <code>/^B\\. (.*)/</code>. Then no need you <code>s</code> flag in your pattern match.</p>\n"}], "owner": {"reputation": 49, "user_id": 6672948, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/3J891.png?s=128&g=1", "display_name": "Matt", "link": "https://stackoverflow.com/users/6672948/matt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 66, "favorite_count": 0, "accepted_answer_id": 39187145, "answer_count": 2, "score": 0, "last_activity_date": 1472569883, "creation_date": 1472343110, "question_id": 39186901, "link": "https://stackoverflow.com/questions/39186901/perl-print-remaining-string-only-if-there-is-no-character-before-the-matched-va", "title": "perl: print remaining string only if there is no character before the matched value.", "body": "<p>The following prints the entire content of the line after \"B. \"</p>\n\n<pre><code>perl -ne'print if /B[.] (.*)/s' $string &gt; file\n</code></pre>\n\n<p>How can I match/print the line only if there is no other character before the \"B. \"? In other words, if there is a character before the <code>\"B. \"</code> ie. <code>\"TAB.\"</code> skip the line / do not print. </p>\n\n<p>The correct \"B.\" is always on a new line, the only correct line to match appears as follows:</p>\n\n<pre><code>B. some text here\n</code></pre>\n"}, {"tags": ["perl", "ubuntu", "irc", "channel", "irssi"], "answers": [{"tags": [], "owner": {"reputation": 2060, "user_id": 478163, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a376793e24fae15f01575c6f46aea2b6?s=128&d=identicon&r=PG", "display_name": "Jason Iverson", "link": "https://stackoverflow.com/users/478163/jason-iverson"}, "is_accepted": false, "score": 0, "last_activity_date": 1475001503, "creation_date": 1475001503, "answer_id": 39732038, "question_id": 39186718, "link": "https://stackoverflow.com/questions/39186718/how-to-configure-triggers-for-specific-users-in-irssi/39732038#39732038", "title": "How to configure triggers for specific users in IRSSI", "body": "<p>I believe this is what you want:</p>\n\n<pre><code>/TRIGGER ADD -name \"channel_join_chat\" -joins -channels \"#channel\" -masks foo!*@* -command \"Foo\" -command \"bar\"\n</code></pre>\n\n<p><code>-publics</code> should be when someone sends a <code>PRIVMSG</code> to a channel, so you want <code>-joins</code> to replace that for triggering on a <code>JOIN</code> (NOTE: it doesn't take a parameter which is why you get <code>Unknown option: foo</code>).</p>\n\n<p><code>-masks</code> is used to match users and wants a <code>nick!ident@host</code> mask, so to match the nick only, the mask would be <code>foo!*@*</code>.</p>\n"}], "owner": {"reputation": 243, "user_id": 4999890, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/c34942cc479898b04d21c6c917d64955?s=128&d=identicon&r=PG&f=1", "display_name": "MadisonCooper", "link": "https://stackoverflow.com/users/4999890/madisoncooper"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 342, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1475001503, "creation_date": 1472340670, "question_id": 39186718, "link": "https://stackoverflow.com/questions/39186718/how-to-configure-triggers-for-specific-users-in-irssi", "title": "How to configure triggers for specific users in IRSSI", "body": "<p>I'm not quite understanding the few examples for the <code>irssi</code> trigger.pl script, who's docs can be found <a href=\"http://wouter.coekaerts.be/irssi/trigger\" rel=\"nofollow\" title=\"Trigger.pl\">here</a>, on my Ubuntu machine (If that matters for irssi).</p>\n\n<p>I'm trying to:\nWhen a specific user <code>foo</code> joins a specific channel <code>#channel</code> , say 2 things in separate chat messages.</p>\n\n<p>(Such as foo in message 1, and bar in message 2 as if I hit the enter key if I were typing it)</p>\n\n<p>What I have so far: </p>\n\n<p><code>/trigger add -name \"channel_join_chat\" -publics -channels \"#channel\" -joins \"foo\" -command \"Foo\" -command \"bar\"</code></p>\n\n<p>And I'm not sure how to specify a specific user, as 'foo' is an unknown option to irssi. </p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 2, "creation_date": 1472336527, "post_id": 39186193, "comment_id": 65713859, "body": "Please show the Perl code that you are having problems with."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1472336806, "post_id": 39186193, "comment_id": 65713925, "body": "I cannot fathom what you mean. Your example doesn&#39;t correspond to any interpretation of <i>&quot;all of the possible combinations&quot;</i> of two strings that I know. Also, <i>&quot;lowercase letters are removed and the remaining lowercase letters are uppercased&quot;</i> doesn&#39;t make sense: once lower case letters have been removed there are none left to upper case."}, {"owner": {"reputation": 509, "user_id": 4580217, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/e50Dd.png?s=128&g=1", "display_name": "Aly", "link": "https://stackoverflow.com/users/4580217/aly"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1472345667, "post_id": 39186193, "comment_id": 65715382, "body": "Some lowercase letters are removed @Borodin"}], "answers": [{"comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1472340016, "post_id": 39186506, "comment_id": 65714556, "body": "Would you please explain the problem that you&#39;re solving?"}, {"owner": {"reputation": 509, "user_id": 4580217, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/e50Dd.png?s=128&g=1", "display_name": "Aly", "link": "https://stackoverflow.com/users/4580217/aly"}, "edited": false, "score": 0, "creation_date": 1472346020, "post_id": 39186506, "comment_id": 65715419, "body": "This give me an error: <code>&quot;all&quot; is not exported by the List::Util module</code>"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1472354549, "post_id": 39186506, "comment_id": 65716505, "body": "Upgrade your version of List::Util to 1.33 or higher."}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "reply_to_user": {"reputation": 509, "user_id": 4580217, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/e50Dd.png?s=128&g=1", "display_name": "Aly", "link": "https://stackoverflow.com/users/4580217/aly"}, "edited": false, "score": 0, "creation_date": 1472363233, "post_id": 39186506, "comment_id": 65717662, "body": "@moo_we_all_do: Or remove the offending line and change the <code>all</code> call to <code>until (@present == grep $_, @present) {</code>"}], "tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": false, "score": 0, "last_activity_date": 1472338329, "creation_date": 1472338329, "answer_id": 39186506, "question_id": 39186193, "link": "https://stackoverflow.com/questions/39186193/how-to-tell-if-a-string-can-be-transformed-into-another-string-by-removing-or-up/39186506#39186506", "title": "How to tell if a string can be transformed into another string by removing or uppercasing lowercase letters?", "body": "<p>Kind of unelegant solution, but it seems to output what you need.</p>\n\n<pre><code>#!/usr/bin/perl\nuse warnings;\nuse strict;\n\nuse List::Util qw{ all };\n\nmy ($str1, $str2) = qw( ahueFFggLKy HFFGLK );\n\nmy @small_indices;\npush @small_indices, pos($str1) - 1 while $str1 =~ /[[:lower:]]/g;\n\nmy @present = (0) x @small_indices;\nuntil (all { $_ } @present) {\n    my $try = $str1;\n    for my $i (reverse 0 .. $#present) {\n        substr $try, $small_indices[$i], 1,\n            $present[$i] ? substr $str1, $small_indices[$i], 1\n                         : q();\n    }\n\n    if (uc $try eq $str2) {\n        print $present[$_] ? q() : substr $str1, $small_indices[$_], 1\n            for 0 .. $#present;\n        print \":\\n\";\n\n        my $j = 0;\n        for my $i (0 .. length($str1) - 1) {\n            my $char = substr $str1, $i, 1;\n            if ($char eq uc $char || $present[$j++]) {\n                print $char;\n            } else {\n                print '.';\n            }\n        }\n        print \"\\n\";\n    }\n\n    my $idx = 0;\n    $present[$idx] = 0, ++$idx while $present[$idx];\n    $present[$idx] = 1;\n}\n</code></pre>\n\n<p>It builds an indicator function @present, which say what lowercase letters are present in the string. All possible values of @present are iterated by adding 1 to the binary number corresponding to the function.</p>\n"}, {"comments": [{"owner": {"reputation": 509, "user_id": 4580217, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/e50Dd.png?s=128&g=1", "display_name": "Aly", "link": "https://stackoverflow.com/users/4580217/aly"}, "edited": false, "score": 0, "creation_date": 1472400205, "post_id": 39191634, "comment_id": 65726815, "body": "How do I read the pairs from STDIN, with each word on a new line? <code>ahueFFggLKy</code> &lt;newline&gt; <code>HFFGLK</code>"}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": true, "score": 1, "last_activity_date": 1472402604, "last_edit_date": 1472402604, "creation_date": 1472389995, "answer_id": 39191634, "question_id": 39186193, "link": "https://stackoverflow.com/questions/39186193/how-to-tell-if-a-string-can-be-transformed-into-another-string-by-removing-or-up/39191634#39191634", "title": "How to tell if a string can be transformed into another string by removing or uppercasing lowercase letters?", "body": "<p>I think I have understood your requirement: the first string may be transformed by either deleting or upper-casing any lower-case letter, and you wish to know whether the second string can be derived from the first in this way</p>\n\n<p>I suggest that you can transform the second string to a regex pattern to achieve this. If every upper-case letter in the second string must be matched by the corresponding upper or lower-case letter in the first, with any number of intervening lower-case letters, then the transformation is possible. Otherwise it is not</p>\n\n<p>This program implements the idea</p>\n\n<pre><code>use strict;\nuse warnings 'all';\nuse feature 'say';\n\nmy @pairs = (\n    [ qw/ ahueFFggLKy HFFGLK / ],\n    [ qw/ fOoBar      BAR    / ],\n);\n\nfor my $pair ( @pairs ) {\n    my ($s1, $s2) = @$pair;\n    printf \"%s =&gt; %s -- %s\\n\", $s1, $s2, contains($s1, $s2) ? 'YES' : 'NO';\n}\n\nsub contains {\n    my ($s1, $s2) = @_;\n\n    my $re = join ' \\p{Ll}* ', map { \"(?i: $_ )\" } $s2 =~ /\\p{Lu}/g;\n    $re = qr/ ^ \\p{Ll}* $re \\p{Ll}* $ /x;\n\n    $s1 =~ $re;\n}\n</code></pre>\n\n<h3>output</h3>\n\n<pre><code>ahueFFggLKy =&gt; HFFGLK -- YES\nfOoBar =&gt; BAR -- NO\n</code></pre>\n\n<p><br/></p>\n\n<hr>\n\n<p>To read an array like <code>@pairs</code> from STDIN you could write something like this</p>\n\n<pre><code>my @pairs;\n\n{\n    local $/;\n    my @input = split ' ', &lt;&gt;;\n    push @pairs, [ splice @input, 0, 2 ] while @input &gt; 1;\n}\n</code></pre>\n"}], "owner": {"reputation": 509, "user_id": 4580217, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/e50Dd.png?s=128&g=1", "display_name": "Aly", "link": "https://stackoverflow.com/users/4580217/aly"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 81, "favorite_count": 0, "accepted_answer_id": 39191634, "answer_count": 2, "score": -1, "last_activity_date": 1497894027, "creation_date": 1472335640, "last_edit_date": 1497894027, "question_id": 39186193, "link": "https://stackoverflow.com/questions/39186193/how-to-tell-if-a-string-can-be-transformed-into-another-string-by-removing-or-up", "title": "How to tell if a string can be transformed into another string by removing or uppercasing lowercase letters?", "body": "<p>In perl, I have two input strings, for this example, <code>ahueFFggLKy</code> and <code>HFFGLK</code>. I want to be able to iterate through all of the possible combinations of my input without lowercase letter groups (<code>a</code>, <code>h</code>, <code>u</code>, <code>e</code>, <code>g</code>...<code>ah</code>, <code>au</code>...<code>hegy</code>, etc) so in each iteration lowercase letters are removed and the remaining lowercase letters are uppercased:</p>\n\n<pre><code>ah:\n  ueFFggLKy                (UEFFGGLKY)\n^^\n\nau:\n h eFFggLKy                (HEFFGGLKY)\n^ ^\n\nhegy:\na u FF gLKy | a u FFg LKy  (AUFFGLKY)\n ^ ^  ^     |  ^ ^   ^\n\nauegy:\n h  FF gLK  |  h  FFg LK    (HFFGLK)\n^ ^^  ^   ^   ^ ^^   ^  ^    -^--^-\n</code></pre>\n\n<p>The last option (<code>auegy</code>) is the answer, and I want to be able to iterate over letters to determine if I am able to convert <code>ahueFFggLKy</code> to <code>HFFGLK</code> without modifying any of the capital letters. This example would return <code>\"YES\"</code>.</p>\n\n<p>If inputs like <code>fOoBar</code> and <code>BAR</code> come up, I am not successfully able to convert <code>fOoBar</code> to <code>BAR</code> because the <code>O</code> in <code>fOoBar</code> is capitalized. My program would return <code>\"NO\"</code>.</p>\n\n<p>Can someone provide me with a perl example of how this would be done?</p>\n"}, {"tags": ["arrays", "perl", "subroutine"], "comments": [{"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1472334162, "post_id": 39185976, "comment_id": 65713288, "body": "Why do you think so? <code>testSub</code> prints the <i>reference</i> to the array, as you used the backslash, and returns 1 if the print is successful."}, {"owner": {"reputation": 2476, "user_id": 1092785, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/f3463f1ed04180b8e766f35772096b16?s=128&d=identicon&r=PG", "display_name": "rplantiko", "link": "https://stackoverflow.com/users/1092785/rplantiko"}, "edited": false, "score": 0, "creation_date": 1472334579, "post_id": 39185976, "comment_id": 65713387, "body": "The first level comes from the Dumper (you are passing a reference). The second level comes from the fact that <code>[ &#39;www.example.com&#39; ]</code>  also is a reference to an array. So in the subroutine <code>@arr</code>  is not what you expect in this case. You expect it to be <code>(&#39;www.example.com&#39;)</code>, but it is <code>([www.example.com])</code> ."}, {"owner": {"reputation": 341, "user_id": 743803, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/9d8fd15cee015367730a75ef9cce6634?s=128&d=identicon&r=PG", "display_name": "th3penguinwhisperer", "link": "https://stackoverflow.com/users/743803/th3penguinwhisperer"}, "edited": false, "score": 0, "creation_date": 1472377627, "post_id": 39185976, "comment_id": 65720546, "body": "So the array is an &quot;anonymous&quot; array here, right? So the hash only has a reference to it. Is it actually possible for a hash key to have an array directly or can it only hold 1 dimensional data (for a specific key)?"}], "answers": [{"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 1, "last_activity_date": 1472335669, "creation_date": 1472335669, "answer_id": 39186200, "question_id": 39185976, "link": "https://stackoverflow.com/questions/39185976/passing-an-array-to-a-subroutine-encloses-it-in-another-array/39186200#39186200", "title": "Passing an array to a subroutine encloses it in another array?", "body": "<ul>\n<li><p>You are passing <code>$item-&gt;{'urls'}</code> to your subroutine</p></li>\n<li><p>Your <code>Data::Dumper</code> output clearly shows that the hash element looks like this</p>\n\n<pre><code>'urls' =&gt; [ 'www.example.com' ]\n</code></pre></li>\n<li><p>When you call <code>testSub</code>, you are making an assignment that is equivalent to</p>\n\n<pre><code>my @arr = ( [ 'www.example.com' ] );\n</code></pre></li>\n<li><p>Your statement <code>print Dumper \\@arr</code> passes an <em>array reference</em> to <code>Dumper</code>, so it displays</p>\n\n<pre><code>[ [ 'www.example.com' ] ]\n</code></pre></li>\n</ul>\n\n<p>It would help your confusion if you were consistent in calling <code>Dumper</code>. <code>print Dumper @testArray</code> passes the contents of <code>@testArray</code> as individual parameters (although in this case the array has only a single element) while <code>print Dumper \\@arr</code> passes an array reference as a <em>single parameter</em>, and is the better choice</p>\n"}, {"tags": [], "owner": {"reputation": 1945, "user_id": 5669174, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XGSyr.jpg?s=128&g=1", "display_name": "Mike", "link": "https://stackoverflow.com/users/5669174/mike"}, "is_accepted": true, "score": 1, "last_activity_date": 1472377992, "last_edit_date": 1472377992, "creation_date": 1472341847, "answer_id": 39186798, "question_id": 39185976, "link": "https://stackoverflow.com/questions/39185976/passing-an-array-to-a-subroutine-encloses-it-in-another-array/39186798#39186798", "title": "Passing an array to a subroutine encloses it in another array?", "body": "<pre><code>my @urls = testSub( $item-&gt;{'urls'}, 'abc' );\n\nResult of Dumper in subrotine:\n$VAR1 = [\n          [\n            'www.example.com'\n          ],\n          'abc'\n        ];\n</code></pre>\n\n<p>Array passed by reference. Since at the time of compilation perl did not know what will be in the scalar <code>$item-&gt;{'urls'}</code>.</p>\n\n<pre><code>my @urls = testSub( @{ $item-&gt;{'urls'} }, 'abc' );\n\nResult of Dumper in subrotine:\n$VAR1 = [\n          'www.example.com',\n          'abc'\n        ];\n</code></pre>\n\n<p>Now the compiler expects an array and turns it into a list.</p>\n"}, {"tags": [], "owner": {"reputation": 6313, "user_id": 328115, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/9a029d2d948f128443f996fa12b3d3a1?s=128&d=identicon&r=PG", "display_name": "dolmen", "link": "https://stackoverflow.com/users/328115/dolmen"}, "is_accepted": false, "score": 0, "last_activity_date": 1472554625, "creation_date": 1472554625, "answer_id": 39225637, "question_id": 39185976, "link": "https://stackoverflow.com/questions/39185976/passing-an-array-to-a-subroutine-encloses-it-in-another-array/39225637#39225637", "title": "Passing an array to a subroutine encloses it in another array?", "body": "<p>If you want <code>testSub</code> to receive a list of URLs, you must expand the <em>array</em> <code>$item-&gt;{urls}</code> into a <em>list</em> with <code>@{ ... }</code>:</p>\n\n<pre><code>my @urls = testSub( @{ $item-&gt;{'urls'} } );\n</code></pre>\n"}], "owner": {"reputation": 341, "user_id": 743803, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/9d8fd15cee015367730a75ef9cce6634?s=128&d=identicon&r=PG", "display_name": "th3penguinwhisperer", "link": "https://stackoverflow.com/users/743803/th3penguinwhisperer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 51, "favorite_count": 0, "accepted_answer_id": 39186798, "answer_count": 3, "score": 0, "last_activity_date": 1472554625, "creation_date": 1472333948, "last_edit_date": 1472334979, "question_id": 39185976, "link": "https://stackoverflow.com/questions/39185976/passing-an-array-to-a-subroutine-encloses-it-in-another-array", "title": "Passing an array to a subroutine encloses it in another array?", "body": "<p>I noticed that when I pass an array to my subroutine it seems like it gets encapsulated by another array (so two levels, while the initial is only one).</p>\n\n<p>I know that using references to arrays is better, but I'm wondering in this specific case why it is not working as expected.</p>\n\n<h3>Code example:</h3>\n\n<pre><code>#!/usr/local/bin/perl\n\nuse Data::Dumper;\n\nsub testSub {\n    my (@arr) = (@_);\n    print Dumper \\@arr;\n}\n\nmy @testArray = ();\npush @testArray, {\n    'key1' =&gt; 'value1',\n    'key2' =&gt; 'value2',\n    'urls' =&gt; [ 'www.example.com' ]\n};\n\nprint Dumper @testArray;\n\nforeach my $item ( @testArray ) {\n\n    my @urls = testSub( $item-&gt;{'urls'} );\n}\n</code></pre>\n\n<h3>output</h3>\n\n<pre><code>$VAR1 = {\n          'urls' =&gt; [\n                      'www.example.com'\n                    ],\n          'key1' =&gt; 'value1',\n          'key2' =&gt; 'value2'\n        };\n$VAR1 = [\n          [\n            'www.example.com'\n          ]\n        ];\n</code></pre>\n"}, {"tags": ["javascript", "html", "css", "perl"], "comments": [{"owner": {"reputation": 27492, "user_id": 3773011, "user_type": "moderator", "profile_image": "https://i.stack.imgur.com/Hmfxy.jpg?s=128&g=1", "display_name": "Makyen", "link": "https://stackoverflow.com/users/3773011/makyen"}, "edited": false, "score": 1, "creation_date": 1472327621, "post_id": 39185055, "comment_id": 65711570, "body": "Please <a href=\"https://stackoverflow.com/posts/39185055/edit\">edit</a> your question to be on-topic: Questions seeking debugging help (&quot;<b>why isn&#39;t this code working?</b>&quot;) must include: \u25bathe desired behavior, \u25baa specific problem or error <i>and</i> \u25bathe shortest code necessary to reproduce it <b>in the question itself</b>. Questions without a clear problem statement are not useful to other readers. See: &quot;<b>How to create a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a></b>&quot;, <a href=\"http://stackoverflow.com/help/on-topic\">What topics can I ask about here?</a>, and <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1472338117, "post_id": 39185055, "comment_id": 65714212, "body": "Have &quot;your friends at O&#39;Reilly&quot; really endorsed your publication and accepted the roadrunner image? Have you seen O&#39;Reilly&#39;s <a href=\"http://i.booksee.org/covers/737000/3c3e04e14b48e33e8a9e112f78833b48-d.jpg\" rel=\"nofollow noreferrer\"><i>iPhone Game Development</i></a> cover?"}, {"owner": {"reputation": 107, "user_id": 6765403, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/673a20de8de2255501cefa3d7b47764e?s=128&d=identicon&r=PG", "display_name": "Will Braswell", "link": "https://stackoverflow.com/users/6765403/will-braswell"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1472371575, "post_id": 39185055, "comment_id": 65719108, "body": "@Borodin: Sorry, I don&#39;t have time for trolls today, I&#39;ve got real work to do! Maybe next time.  ;-)"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1472386329, "post_id": 39185055, "comment_id": 65722808, "body": "@WillBraswell: I am sure you realise that I am not trolling and I can only assume that that&#39;s a &quot;no&quot;. The preamble to <i>iPhone Game Development</i> says <b>the image of a roadrunner, and related trade dress are trademarks of O&#39;Reilly Media. Inc.</b> and you shouldn&#39;t be implying any relationship with O&#39;Reilly that doesn&#39;t exist."}, {"owner": {"reputation": 107, "user_id": 6765403, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/673a20de8de2255501cefa3d7b47764e?s=128&d=identicon&r=PG", "display_name": "Will Braswell", "link": "https://stackoverflow.com/users/6765403/will-braswell"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1472483583, "post_id": 39185055, "comment_id": 65757968, "body": "@Borodin: Actually, you ARE trolling.  The image of the roadrunner on the iPhone book is totally different than the RPerl roadrunner image.  We have never implied any connection between RPerl and O&#39;Reilly, other than to promote the purchase of the O&#39;Reilly book &quot;Learning Perl&quot;.  If you had bothered to actually look at the images, or read the content, you would have already known both of those things.  Good luck with your next trolling opportunity, hopefully it won&#39;t have anything to do with RPerl or Perl at all."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1472487775, "post_id": 39185055, "comment_id": 65760450, "body": "@WillBraswell: That is a ridiculous defence, and it makes me all the more certain that you are aware of your guilt and can think of nothing better. <i>&quot;We have never implied any connection between RPerl and O&#39;Reilly&quot;</i> apart from using an engraving of a creature as the frontpiece of your work, which is an established and well-known O&#39;Reilly device; referring to the company as &quot;our friends at O&#39;Reilly&quot;; referring to &quot;Roadrunner Book and the Llama book&quot; in the same sentence; and even copying the structure of <i>Learning Perl</i>. I may well write to the publisher and ask them about their &quot;friend&quot;."}, {"owner": {"reputation": 107, "user_id": 6765403, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/673a20de8de2255501cefa3d7b47764e?s=128&d=identicon&r=PG", "display_name": "Will Braswell", "link": "https://stackoverflow.com/users/6765403/will-braswell"}, "edited": false, "score": 0, "creation_date": 1472498928, "post_id": 39185055, "comment_id": 65766182, "body": "How does it feel, to be so full of hatred, and so devoid of actual useful advice pertaining to the technical question at hand?"}, {"owner": {"reputation": 107, "user_id": 6765403, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/673a20de8de2255501cefa3d7b47764e?s=128&d=identicon&r=PG", "display_name": "Will Braswell", "link": "https://stackoverflow.com/users/6765403/will-braswell"}, "edited": false, "score": 0, "creation_date": 1472498998, "post_id": 39185055, "comment_id": 65766216, "body": "And sorry, we already have our quota of jealous RPerl haters, you&#39;ll need to find some other FOSS project to pick on, we&#39;re all full up here."}], "answers": [{"comments": [{"owner": {"reputation": 1374, "user_id": 2637098, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/QtXCz.jpg?s=128&g=1", "display_name": "Maarten Bicknese", "link": "https://stackoverflow.com/users/2637098/maarten-bicknese"}, "edited": false, "score": 0, "creation_date": 1472363038, "post_id": 39185220, "comment_id": 65717626, "body": "Might I know why my answer is down voted? Does it not answer the question, is it unclear, does it endorse bad practices?"}, {"owner": {"reputation": 107, "user_id": 6765403, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/673a20de8de2255501cefa3d7b47764e?s=128&d=identicon&r=PG", "display_name": "Will Braswell", "link": "https://stackoverflow.com/users/6765403/will-braswell"}, "edited": false, "score": 0, "creation_date": 1472483754, "post_id": 39185220, "comment_id": 65758068, "body": "I already added one comment but it appears to have been deleted by somebody?  (I&#39;m guessing it was done by our troll friend Borodin, but I have no proof of that whatsoever.)  Please rest assured that it was definitely not me who voted down your answer, in fact I have gone ahead and clicked the check-icon to accept your answer, although I have not yet had the time to work through all the actual Javascript stuff and try to implement it yet.  As I said in my now-delete reply, I will try your solution and let you know how it works.  Thanks again for welcoming me to Stack Overflow!  :-)"}, {"owner": {"reputation": 107, "user_id": 6765403, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/673a20de8de2255501cefa3d7b47764e?s=128&d=identicon&r=PG", "display_name": "Will Braswell", "link": "https://stackoverflow.com/users/6765403/will-braswell"}, "edited": false, "score": 1, "creation_date": 1472502618, "post_id": 39185220, "comment_id": 65768099, "body": "Okay I tried it out and it totally works!  Thank you so much, this was a huge help.  You can see the change is live now: <a href=\"http://rperl.org/learning_rperl.html\" rel=\"nofollow noreferrer\">rperl.org/learning_rperl.html</a>  I am also trying to shrink the size of the large empty left margin, any idea how to do that?"}], "tags": [], "owner": {"reputation": 1374, "user_id": 2637098, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/QtXCz.jpg?s=128&g=1", "display_name": "Maarten Bicknese", "link": "https://stackoverflow.com/users/2637098/maarten-bicknese"}, "is_accepted": true, "score": -2, "last_activity_date": 1472327944, "creation_date": 1472327944, "answer_id": 39185220, "question_id": 39185055, "link": "https://stackoverflow.com/questions/39185055/css-javascript-need-hide-auto-generated-html-by-default/39185220#39185220", "title": "CSS &amp; Javascript, Need Hide Auto-Generated HTML By Default", "body": "<p>Although the described behavior does not appear for me (OSX + Firefox). Here's what you might do:</p>\n\n<p>Hide the element by default using CSS. Add this to your <code>head</code> element (extend with stronger hiding CSS when needed).</p>\n\n<pre><code>&lt;style&gt;.wait-for-js { display: none; }&lt;/style&gt;\n</code></pre>\n\n<p>And hide your element by adding the class</p>\n\n<pre><code>&lt;div id=\"index-container\" class=\"hide-index wait-for-js\"&gt;\n</code></pre>\n\n<p>Last but not least, to make this trick functional. Remove the class as soon as JS is loaded, which would also mean that other logic has been loaded and you're save to show the table of contents. Be sure to load this JavaScript last thing you'll do.</p>\n\n<pre><code>&lt;script&gt;\n    document.getElementById('index-container').className = 'hide-index';\n&lt;/script&gt;\n</code></pre>\n\n<p>Or if you're using jQuery</p>\n\n<pre><code>&lt;script&gt;$('.wait-for-js').removeClass('wait-for-js');&lt;/script&gt;\n</code></pre>\n\n<p>Welcome to SO!</p>\n"}], "owner": {"reputation": 107, "user_id": 6765403, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/673a20de8de2255501cefa3d7b47764e?s=128&d=identicon&r=PG", "display_name": "Will Braswell", "link": "https://stackoverflow.com/users/6765403/will-braswell"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 74, "favorite_count": 0, "accepted_answer_id": 39185220, "answer_count": 1, "score": -4, "last_activity_date": 1472329075, "creation_date": 1472326833, "last_edit_date": 1472329075, "question_id": 39185055, "link": "https://stackoverflow.com/questions/39185055/css-javascript-need-hide-auto-generated-html-by-default", "title": "CSS &amp; Javascript, Need Hide Auto-Generated HTML By Default", "body": "<p>I am writing a free online e-book which needs a few minor formatting tweaks:</p>\n\n<p><a href=\"http://rperl.org/learning_rperl.html\" rel=\"nofollow\">http://rperl.org/learning_rperl.html</a></p>\n\n<p>The \"Full Table Of Contents\" at the very top of the page starts out by being visible for a few seconds, then finally collapses itself to be hidden.  What we need is for it to start as hidden, and not be visible at all for the several seconds while the page loads.  You can see that I have already tried to solve this issue by setting \"var index_hidden=1;\" at the following link, otherwise the table of contents would never hide itself at all:</p>\n\n<p><a href=\"https://github.com/wbraswell/rperl/blob/gh-pages/javascripts/metacpan_rperl.js#L832-L833\" rel=\"nofollow\">https://github.com/wbraswell/rperl/blob/gh-pages/javascripts/metacpan_rperl.js#L832-L833</a></p>\n\n<p>It probably shouldn't matter, but I'm using some custom Perl scripts to generate this file from Perl POD source, I can give more info if needed.</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 19246, "user_id": 51577, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/cbfaeb8d0e2ee5da976331d2cb13d0ec?s=128&d=identicon&r=PG", "display_name": "tddmonkey", "link": "https://stackoverflow.com/users/51577/tddmonkey"}, "edited": false, "score": 1, "creation_date": 1472324874, "post_id": 39184692, "comment_id": 65710811, "body": "What&#39;s your actual question?"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1472333663, "post_id": 39184692, "comment_id": 65713167, "body": "What do you mean by <i>&quot;extract the generic password&quot;</i>? I don&#39;t know of such a thing, and Google seems to agree with me. Perhaps you should elaborate further on what you are trying to do?"}, {"owner": {"reputation": 541, "user_id": 3524762, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/65791fbdfc309187aa6eb7f40261753a?s=128&d=identicon&r=PG&f=1", "display_name": "user3524762", "link": "https://stackoverflow.com/users/3524762/user3524762"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1472338949, "post_id": 39184692, "comment_id": 65714378, "body": "@Borodin - generic paswords - Generic credentials are defined and authenticated by applications that manage authorization and security directly instead of delegating these tasks to the operating system. <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/aa380517(v=vs.85).aspx\" rel=\"nofollow noreferrer\">msdn.microsoft.com/en-us/library/windows/desktop/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 247, "user_id": 6338639, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-dE0EhH0ZVHo/AAAAAAAAAAI/AAAAAAAAAFE/4-Rr-uDV1tM/photo.jpg?sz=128", "display_name": "Mitch Jackson", "link": "https://stackoverflow.com/users/6338639/mitch-jackson"}, "is_accepted": true, "score": 1, "last_activity_date": 1472437442, "last_edit_date": 1472437442, "creation_date": 1472436915, "answer_id": 39197665, "question_id": 39184692, "link": "https://stackoverflow.com/questions/39184692/perl-and-windows-win32-credential-manager-api/39197665#39197665", "title": "Perl and Windows Win32 Credential Manager API", "body": "<p>You can interact with Win32 api calls through the CPAN module <a href=\"http://search.cpan.org/~acalpini/Win32-API-0.41/API.pm\" rel=\"nofollow\">WIn32::API</a></p>\n"}], "owner": {"reputation": 541, "user_id": 3524762, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/65791fbdfc309187aa6eb7f40261753a?s=128&d=identicon&r=PG&f=1", "display_name": "user3524762", "link": "https://stackoverflow.com/users/3524762/user3524762"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 220, "favorite_count": 0, "accepted_answer_id": 39197665, "answer_count": 1, "score": 0, "last_activity_date": 1472437442, "creation_date": 1472324347, "last_edit_date": 1472417461, "question_id": 39184692, "link": "https://stackoverflow.com/questions/39184692/perl-and-windows-win32-credential-manager-api", "title": "Perl and Windows Win32 Credential Manager API", "body": "<p>I am not an advanced Perl or Windows developer.</p>\n\n<p>My question, is it possible via ActivePerl 5.22 on Win64 to interface with the Win32 Credential Manager API/windows.security.credentials. I want to use the API to manage user credentials, by that view accounts, add accounts and delete accounts.</p>\n\n<p>I found a PowerShell example that does exactly that but I cannot use powershell at work, also looking to understand the limitations of Perl when it comes to interacting wih Win32 API's.\n<a href=\"https://gallery.technet.microsoft.com/scriptcenter/PowerShell-Credentials-d44c3cde\" rel=\"nofollow\">https://gallery.technet.microsoft.com/scriptcenter/PowerShell-Credentials-d44c3cde</a></p>\n"}, {"tags": ["linux", "perl", "shell", "curl", "jenkins"], "answers": [{"comments": [{"owner": {"reputation": 91, "user_id": 6557829, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/ae98484a1392cce8b37852c6accd3aa7?s=128&d=identicon&r=PG&f=1", "display_name": "WorkingOnBeingBetter", "link": "https://stackoverflow.com/users/6557829/workingonbeingbetter"}, "edited": false, "score": 0, "creation_date": 1472245604, "post_id": 39172562, "comment_id": 65691590, "body": "now it just says no such file or directory instead of no command"}], "tags": [], "owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "is_accepted": false, "score": 2, "last_activity_date": 1472235826, "creation_date": 1472235826, "answer_id": 39172562, "question_id": 39171980, "link": "https://stackoverflow.com/questions/39171980/jenkins-running-linux-shell-program-does-not-reccogize-commands/39172562#39172562", "title": "Jenkins running Linux shell program does not reccogize commands", "body": "<p>The error message is telling you that <code>perl</code> and <code>curl</code> binaries couldn't be found, which means that the environment for your script does not have <code>PATH</code> environment variable set.</p>\n\n<p>To fix this, use the full paths to the binaries, instead of just their names. eg:</p>\n\n<pre><code>/usr/bin/perl WORKSPACE/directory/scripts/FileLoaderDoItTwiceFinal.pl $workspaceDirectory $appName\n\n/usr/bin/curl --ntlm --user myUserName:myPassword --upload-file WORKSPACE/directory/test/ClaimCenterUnmatchedProperties.csv     https://sharpoint/share/sharesight/TrainingManuals/RTC/PropertyFileAnalyzer/filename.csv`\n</code></pre>\n"}], "owner": {"reputation": 91, "user_id": 6557829, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/ae98484a1392cce8b37852c6accd3aa7?s=128&d=identicon&r=PG&f=1", "display_name": "WorkingOnBeingBetter", "link": "https://stackoverflow.com/users/6557829/workingonbeingbetter"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 736, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1472235826, "creation_date": 1472233488, "question_id": 39171980, "link": "https://stackoverflow.com/questions/39171980/jenkins-running-linux-shell-program-does-not-reccogize-commands", "title": "Jenkins running Linux shell program does not reccogize commands", "body": "<p>I have the following code running on my jenkins build step: \"execute shell\" </p>\n\n<pre><code>#!/bin/sh\nworkspaceDirectory=WORKSPACE\nappName=ClaimCenter\n\nperl WORKSPACE/directory/scripts/FileLoaderDoItTwiceFinal.pl  $workspaceDirectory $appName\ncurl --ntlm --user myUserName:myPassword --upload-file WORKSPACE/directory/test/ClaimCenterUnmatchedProperties.csv     https://sharpoint/share/sharesight/TrainingManuals/RTC/PropertyFileAnalyzer/filename.csv`\n\nappName=ContactManager\n\nperl WORKSPACE/dircectory/scripts/FileLoaderDoItTwiceFinal.pl $workspaceDirectory $appName\ncurl --ntlm --user myUserName:MyPassWord --upload-file WORKSPACE/CliamCenterBatch/test/ContactManagerUnmatchedProperties.csv\nhttps://sharpoint/share/sharesight/TrainingManuals/RTC/PropertyFileAnalyzer/filename.csv`\n</code></pre>\n\n<p>Jenkins builds for a long time so it is very difficult to test repeatedly but after the build opperations happen, the following is output to the jenkins console: </p>\n\n<pre><code> [TEST-SAMPLE-BUILD-CLAIMS_Dev_Tools_blucas-DEF] $ /bin/sh/tmp/hudson4025671051509183982.sh\n/tmp/hudson4025671051509183982.sh: line 5: perl: command not found\n/tmp/hudson4025671051509183982.sh: line 6: curl: command not found\n/tmp/hudson4025671051509183982.sh: line 10: perl: command not found\n/tmp/hudson4025671051509183982.sh: line 11: curl: command not found\n/tmp/hudson4025671051509183982.sh: line 12: https://sharpoint/share/sharesight/TrainingManuals/RTC/PropertyFileAnalyzer/filename.csv` : No such file or directory\n</code></pre>\n\n<p>please help me understand why this build is not understanding these commands</p>\n"}, {"tags": ["perl", "email", "sendmail", "sender", "io-async"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1472240595, "post_id": 39171818, "comment_id": 65689498, "body": "Might have to do with how the FCGI library replaces STDIN to be compatible with CGI libraries."}, {"owner": {"reputation": 3692, "user_id": 223960, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/03cFY.jpg?s=128&g=1", "display_name": "Brian C.", "link": "https://stackoverflow.com/users/223960/brian-c"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1472477849, "post_id": 39171818, "comment_id": 65754316, "body": "FCGI problems could be it. <a href=\"http://stackoverflow.com/questions/2592157/whats-the-proper-way-to-fork-in-fastcgi\" title=\"whats the proper way to fork in fastcgi\">stackoverflow.com/questions/2592157/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 3692, "user_id": 223960, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/03cFY.jpg?s=128&g=1", "display_name": "Brian C.", "link": "https://stackoverflow.com/users/223960/brian-c"}, "is_accepted": false, "score": 0, "last_activity_date": 1484937526, "creation_date": 1484937526, "answer_id": 41770332, "question_id": 39171818, "link": "https://stackoverflow.com/questions/39171818/deadlock-with-perl-ioasyncloop-and-pipe-to-sendmail/41770332#41770332", "title": "Deadlock with Perl, IO:Async::Loop and pipe to sendmail", "body": "<p>ikegami comment lead us to the answer of doing a double fork. Looking at the signal handlers and file handles set up under FCGI made it clear that excessively clever things were happening. So I moved to cut all ties with the parent process using a double fork like when starting a daemon. That worked. </p>\n\n<pre><code>  # FCGI does some clever signal handeling and file handers to do\n  # its work.  This causes problems with forked processes that then\n  # fork and wait for other processes. So use exec to get a process\n  # that is not a copy of the parent. Double fork to avoid zombies.\n\n  # Check -e of submit script because $! has a cryptic messsage if it doens't exist\n  my $script = \"$SAFEBINDIR/submit.pl\";\n  unless( -e -r -x $script  ){\n    $submission-&gt;submit_log-&gt;error($submission-&gt;submission_id . \": $script doesn't exist\");\n    $c-&gt;flash( message =&gt; \"There was a problem\");\n    $c-&gt;res-&gt;redirect( $c-&gt;uri_for('/user') );\n    $c-&gt;detach;\n  }\n\n  # Do the double fork + exec to have an independent process\n  my $pid;\n  unless( $pid = fork() ) { #this is the child\n    unless( fork() ){ #this is the grandchild\n      exec( $script, $submission-&gt;submission_id ) #should never return\n        or $submission-&gt;submit_log-&gt;error($submission-&gt;submission_id\n                                          . \": Error when trying to exec() $script '$!'\");\n      exit(0);\n    }\n  }\n  waitpid($pid,0); #wait for child, grandchild will get ppid 1\n}\n</code></pre>\n"}], "owner": {"reputation": 3692, "user_id": 223960, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/03cFY.jpg?s=128&g=1", "display_name": "Brian C.", "link": "https://stackoverflow.com/users/223960/brian-c"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 134, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1484937526, "creation_date": 1472232766, "last_edit_date": 1472477808, "question_id": 39171818, "link": "https://stackoverflow.com/questions/39171818/deadlock-with-perl-ioasyncloop-and-pipe-to-sendmail", "title": "Deadlock with Perl, IO:Async::Loop and pipe to sendmail", "body": "<p>We are seeing suck sendmail processes when we are attempting to send email from a Perl FCGI process. These processes are taking too long, hours to a day, since it should just be doing a relay to a server configured in sendmail as the smart host. Most of the mail from the FCGI processes takes less than 5 seconds. The slow sendmail processes are easy to find on the our servers with $ ps -ef | grep sendmail</p>\n\n<p>Almost all of the email works normally from these web nodes. I'd guess thousands of mails go through with no problem. Sending test email from the command line goes smoothly. The sendmail command gets stuck rarely and we don't have a way to reproduce it.</p>\n\n<p>It seems that most of this stuck email gets through sooner or later. These seem to be sending mail hours later, sometimes over a day later.</p>\n\n<p>All of the sendmail that we've seen stuck has been a command that was run by a Perl process, which is a child process of a FCGI process. </p>\n\n<p>Looking at the logs of the smart host we see that most of this mail does get through sooner or later but we have found some that don't seem to have ever been sent.</p>\n\n<p>This is running in FCGI for Catalyst and then added to a IO::Async::Loop which does some processing, and in the IO::Async::Loop, Email::Sender::Transport::Sendmail is used which does a open($fh, '|-', @args) and pipes the mail header+body and does a close($fh).</p>\n\n<p>I've seen this <a href=\"http://perldoc.perl.org/perlipc.html#Avoiding-Pipe-Deadlocks\" rel=\"nofollow\">http://perldoc.perl.org/perlipc.html#Avoiding-Pipe-Deadlocks</a> but don't know how to apply it in this situation. The child sendmail has only STDIN open. </p>\n\n<p>When we have one of these stuck sendmails the sendmail is waiting on STDIN:</p>\n\n<pre><code>[&lt;ffffffff8119ce8b&gt;] pipe_wait+0x5b/0x80\n[&lt;ffffffff8119d8ad&gt;] pipe_read+0x34d/0x4d0\n[&lt;ffffffff8119204a&gt;] do_sync_read+0xfa/0x140\n[&lt;ffffffff81192945&gt;] vfs_read+0xb5/0x1a0\n[&lt;ffffffff81192c91&gt;] sys_read+0x51/0xb0\n[&lt;ffffffff8100b0d2&gt;] system_call_fastpath+0x16/0x1b\n[&lt;ffffffffffffffff&gt;] 0xffffffffffffffff\n</code></pre>\n\n<p>and the async perl process is waiting on the child to die:</p>\n\n<pre><code>#0  0x00007f8849e6065e in waitpid () from /lib64/libc.so.6\n#1  0x000000000046dc2d in Perl_wait4pid ()\n#2  0x000000000046de2d in Perl_my_pclose ()\n#3  0x00000000004cec4e in Perl_io_close ()\n#4  0x00000000004ceda8 in Perl_do_close ()\n#5  0x00000000004c2629 in Perl_pp_close ()\n#6  0x00000000004804de in Perl_runops_standard ()\n#7  0x000000000042e7ad in perl_run ()\n#8  0x000000000041bbc5 in main ()\n</code></pre>\n\n<p>An example of one that didn't get through:\nJob #1653576 (that's just our internal job number) has a sendmail process that started on Aug 19 13:04.</p>\n\n<p>Process on webnode2:</p>\n\n<pre><code>fcgi-user 13621 13466  0 13:04 ?        00:00:00 /usr/sbin/sendmail -i -f admin@ourServer.org -- proffunnyhat@mit.edu\nI don't see the record I expect to see on our smart host for this in /var/log/maillog that would indicate that it was relayed to nexus and then to MIT.\n</code></pre>\n\n<p>I do see successful email for proffunnyhat@mit.edu on Aug 21 (from web2 /var/log/maillog):</p>\n\n<pre><code>Aug 21 00:00:02 node-008 sendmail[13621]: u7JH4tbr013621: to=proffunnyhat@mit.edu, ctladdr=admin@ourServer.org (10520/10520), delay=1+10:55:07, xdelay=00:00:01, mailer=relay, pri=32292, relay=[127.0.0.1] [127.0.0.1], dsn=2.0.0, stat=Sent (u7L401Z1026237 Message accepted for delivery)\nAug 21 00:00:02 node-008 sendmail[26247]: u7L401Z1026237: to=&lt;proffunnyhat@mit.edu&gt;, delay=00:00:01, xdelay=00:00:00, mailer=relay, pri=122657, relay=mail.ourServer.org. [128.84.4.11], dsn=2.0.0, stat=Sent (u7L402jx001185 Message accepted for delivery)\n</code></pre>\n\n<p>and then on mail.ourServer.org:</p>\n\n<pre><code>bdc34 @mail.ourServer.org: log$ sudo grep u7L402jx001185 maillog*\nmaillog-20160821:Aug 21 00:00:02 web2 sendmail[1185]: u7L402jx001185: from=&lt;admin@ourServer.org&gt;, size=2874, class=0, nrcpts=1, msgid=&lt;201608191704.u7JH4tbr013621@mail.ourServer.org&gt;, proto=ESMTP, daemon=MTA, relay=mail.ourServer.org [128.84.4.13]\nmaillog-20160821:Aug 21 00:00:03 mail.ourServer.org[1200]: u7L402jx001185: to=&lt;proffunnyhat@mit.edu&gt;, ctladdr=&lt;e-admin@ourServer.org&gt; (10519/10519), delay=00:00:01, xdelay=00:00:01, mailer=esmtp, pri=122874, relay=dmz-mailsec-scanner-8.mit.edu. [18.7.68.37], dsn=2.0.0, stat=Sent (OK 5E/2D-20045-34729B75)\n</code></pre>\n\n<p>An example of one that was stuck but seems to have been sent:\nmail.ourServer.org:/var/log/sendmail:</p>\n\n<pre><code>Aug 19 02:19:51 mail.ourServer.org sendmail[20792]: u7J6JlP6020790: to=&lt;jxjx@connect.ust.hk&gt;, ctladdr=&lt;admin@ourServer.org&gt; (10519/10519), delay=00:00:04, xdelay=00:00:04, mailer=esmtp, pri=122504, relay=connect-ust-hk\\\n.mai...ction.outlook.com. [213.199.154.87], dsn=2.0.0, stat=Sent (&lt;201608190619.u7J6Jlda000738@web2.ourServer.org&gt; [InternalId=15526306777069,...1MB1197.apcprd01.prod.exchangelabs.com] 9137 bytes in 0.189, 47.082 KB/sec\\\n Queued mail for delivery)\n</code></pre>\n\n<p><strong>Things we have tried</strong></p>\n\n<p>I've modified Email::Sender::Transport::Sendmail to send a '\\x00' to the pipe, that didn't work.</p>\n\n<p>I've replaced IO::Async::Loop::Poll with IO::Async::Loop::Select. That didn't change anything.</p>\n\n<p>I've tried sending signals to the sendmail and its parent. That killed them but the mail was aborted. </p>\n\n<p>Added our fcgi user to sendmail's trusted users file. Didn't change anything.</p>\n\n<p>I wrote a wrapper script that read from STDIN and writes to sendmail. If nothing comes in on STDIN for 5 seconds it exits. This feels really hacky to me but it does seem to work. Since mail is a critical part of our system I'd rather have a real solution.</p>\n"}, {"tags": ["xml", "perl"], "comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1472234021, "post_id": 39171808, "comment_id": 65686501, "body": "What you posted as &quot;<i>My code</i>&quot; makes no sense.  Do you literally have a line with <code>perl ...</code> in a script?  The <code>perl</code> an unquoted bareword in a script. The regex itself is fine (no need to escape <code>&quot;</code> or anything else).  However, how <code>$fh</code> is used is wrong -- it&#39;s a filehandle.  Also, you are clearly missing a <code>;</code> on that <code>line 7</code> from (the first) error."}, {"owner": {"reputation": 5432, "user_id": 4723732, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/77fa71fdc548472c228be40043c1bc1f?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Rublev", "link": "https://stackoverflow.com/users/4723732/richard-rublev"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1472234119, "post_id": 39171808, "comment_id": 65686550, "body": "@zdim Yes,I am beginner with perl.How should the line look like?"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1472234539, "post_id": 39171808, "comment_id": 65686733, "body": "OK.  It is far from valid Perl. <code>open</code> line needs a <code>;</code>. The <code>$fh</code> is a <i>filehandle</i>, which gives access to the resource (file) -- you use it to read data from said resource, not to print it. So you&#39;d need a loop like <code>while(&lt;$fh&gt;)</code>. There is no keyword <code>perl</code> in the language. The statement <code>$fh if &#47;...&#47;</code> makes no sense, I don&#39;t see what you mean by it. The firts part of the regex, <code>&#47;...&#47;</code>, is fine, but the rest (second <code>&#47;...&#47;</code>) does not make sense.  Etc. I&#39;d suggest to go through the basics of the language first."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1472235097, "post_id": 39171808, "comment_id": 65687000, "body": "When I use &quot;<i>no sense</i>&quot; I mean to say that it doesn&#39;t conform to the most basic language rules and that I can&#39;t even see what you want to do with it.  I don&#39;t mean to be offensive."}], "answers": [{"tags": [], "owner": {"reputation": 42833, "user_id": 18914, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7a20a39ae2ef47ae042a3eddd5b5bd19?s=128&d=identicon&r=PG", "display_name": "Dave Sherohman", "link": "https://stackoverflow.com/users/18914/dave-sherohman"}, "is_accepted": true, "score": 6, "last_activity_date": 1472248194, "creation_date": 1472248194, "answer_id": 39175068, "question_id": 39171808, "link": "https://stackoverflow.com/questions/39171808/how-to-split-xml-file-with-perl/39175068#39175068", "title": "How to split xml file with perl?", "body": "<p>To clarify why the posted code \"doesn't make sense\", <code>perl -p -i -e</code> is something you would type on the command line by itself, not something which goes into a Perl program.  Basically, the <code>perl -p -i -e '...'</code> is itself the program to run.  <a href=\"http://perldoc.perl.org/perlrun.html\">perldoc perlrun</a> explains in greater detail, but:</p>\n\n<ul>\n<li><code>-p</code> puts a loop around the <code>...</code> code which runs it against each line of the input file</li>\n<li><code>-i</code> means to edit the input file in place (instead of creating any new files for output)</li>\n<li><code>-e</code> tells <code>perl</code> that you're providing executable code as part of the command line, rather than running a program from a file</li>\n</ul>\n\n<p>The correct way to do what you were attempting would be something like (warning - untested code):</p>\n\n<pre><code>#!/usr/bin/env perl\n\nuse strict;\nuse warnings;\n\nopen my $in, '&lt;', '263.xml' or die \"Can't open input file: $!\";\nopen my $out_on, '&gt;', 'on.xml' or die \"Can't open 'on' output file: $!\";\nopen my $out_off, '&gt;', 'off.xml' or die \"Can't open 'off' output file: $!\";\n\nwhile (my $line = &lt;$in&gt;) {\n  $line =~ /&lt;caldata chopper=\"(on|off)\"/;\n  if ($1 eq 'on') {\n    print $out_on, $line;\n  } elsif ($1 eq 'off') {\n    print $out_off, $line;\n  }\n}\n</code></pre>\n\n<p>Note, however, that this technique will not create proper XML output files.  It will just generate files containing lists of <code>caldata</code> elements without any of the additional surrounding elements needed to have a single, well-formed XML document.  If you need a well-formed XML document, I would suggest taking a look at <a href=\"https://metacpan.org/pod/XML::Twig\">XML::Twig</a> rather than attempting to parse or generate XML by hand.</p>\n"}], "owner": {"reputation": 5432, "user_id": 4723732, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/77fa71fdc548472c228be40043c1bc1f?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Rublev", "link": "https://stackoverflow.com/users/4723732/richard-rublev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 479, "favorite_count": 1, "accepted_answer_id": 39175068, "answer_count": 1, "score": -2, "last_activity_date": 1504569019, "creation_date": 1472232746, "last_edit_date": 1472233201, "question_id": 39171808, "link": "https://stackoverflow.com/questions/39171808/how-to-split-xml-file-with-perl", "title": "How to split xml file with perl?", "body": "<p>My code</p>\n\n<pre><code>use strict;\n\nuse warnings;\n\nmy $filename = '263.xml';\n\nopen(my $fh, $filename)\n\nperl -p -i -e '$fh if /&lt;caldata chopper=\"on\"/ \"(\\d+)\"/; print $fh;' \n</code></pre>\n\n<p>But</p>\n\n<pre><code>Warning: Use of \"-p\" without parentheses is ambiguous at a1.pl line 7.\nsyntax error at a1.pl line 7, near \")\n\nperl \"\nExecution of a1.pl aborted due to compilation errors.\n</code></pre>\n\n<p>I want to separate line with </p>\n\n<pre><code>caldata chopper=\"on\"\n</code></pre>\n\n<p>and caldata chopper=\"off\"\ninto separate files.\nThis is the whole line</p>\n\n<pre><code>&lt;caldata chopper=\"on\" gain_1=\"0\" gain_2=\"0\" gain_3=\"0\" impedance=\"(0,0)\"&gt;\n</code></pre>\n"}, {"tags": ["perl", "replace"], "comments": [{"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1472223228, "post_id": 39168812, "comment_id": 65680697, "body": "I was going to propose <a href=\"http://stackoverflow.com/q/7970702/176646\">this question</a> as a duplicate, but I just don&#39;t like the accepted answer. You&#39;ve actually combined two common (but good!) questions: 1) how can I pass a shell variable to Perl? and 2) how can I escape special characters in a regex? I can&#39;t find a suitable question that addresses both of those at once, so maybe this can become a new canonical question."}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 2, "creation_date": 1472224008, "post_id": 39168812, "comment_id": 65681233, "body": "You should always wrap Perl one-liners in single quotes on *nix. It&#39;s just too easy to accidentally interpolate a shell variable by accident, or trigger a history command (e.g. <code>perl -e&quot;s!foo!bar!&quot;</code> errors out with <code>&quot;bash: !foo!bar!&quot;: event not found</code> in bash). You should either use Perl&#39;s <code>%ENV</code> hash or pass the bash variables as arguments to the Perl script. There are several nice posts about this, I&#39;ll try to find them for you."}, {"owner": {"reputation": 1532, "user_id": 791908, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tmGC4.jpg?s=128&g=1", "display_name": "Drav Sloan", "link": "https://stackoverflow.com/users/791908/drav-sloan"}, "edited": false, "score": 1, "creation_date": 1472224010, "post_id": 39168812, "comment_id": 65681236, "body": "I would hasten to point out that your <code>perl</code> will not do what you expect it to do when the <code>find</code> locates files that contain spaces."}, {"owner": {"reputation": 1052, "user_id": 754001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ovQ5n.png?s=128&g=1", "display_name": "Apoorv", "link": "https://stackoverflow.com/users/754001/apoorv"}, "reply_to_user": {"reputation": 1532, "user_id": 791908, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tmGC4.jpg?s=128&g=1", "display_name": "Drav Sloan", "link": "https://stackoverflow.com/users/791908/drav-sloan"}, "edited": false, "score": 0, "creation_date": 1472224221, "post_id": 39168812, "comment_id": 65681363, "body": "@DravSloan That is true. I am getting by that with a naming convention for my directories --which works for my special use case. But in the interest of leaving a reusable solution for others, the accepted solution must work for files that have spaces in their names too."}, {"owner": {"reputation": 18548, "user_id": 4082052, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GUNps.jpg?s=128&g=1", "display_name": "Sundeep", "link": "https://stackoverflow.com/users/4082052/sundeep"}, "edited": false, "score": 3, "creation_date": 1472225146, "post_id": 39168812, "comment_id": 65681943, "body": "why not <code>find my_dir -type f -exec perl -i -pe &#39;commands&#39; {} +</code> ?"}], "answers": [{"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 9, "last_activity_date": 1472238021, "last_edit_date": 1472238021, "creation_date": 1472225624, "answer_id": 39169872, "question_id": 39168812, "link": "https://stackoverflow.com/questions/39168812/use-in-perl-search-and-replace/39169872#39169872", "title": "Use ~ in Perl search and replace", "body": "<p>Actually, <code>~</code> isn't special in double-quote string literals such as the replacement expression of <code>s///</code>. A few others are special, however. Of the four characters you listed, <code>/</code> is special when <code>/</code> is used as the delimiter as is the case here.</p>\n\n<hr>\n\n<p>Don't try to generate Perl code from the shell! Use one of the following:</p>\n\n<pre><code>export $user_input\nperl -i -pe's/__MY_PLACEHOLDER__/$ENV{user_input}/g'\n</code></pre>\n\n<p>or</p>\n\n<pre><code>USER_INPUT=$user_input perl -i -pe's/__MY_PLACEHOLDER__/$ENV{USER_INPUT}/g'\n</code></pre>\n\n<p>or</p>\n\n<pre><code>perl -i -pe'\n   BEGIN { $user_input = shift }\n   s/__MY_PLACEHOLDER__/$user_input/g\n' \"$user_input\"\n</code></pre>\n\n<hr>\n\n<p>By the way, you really missed the point of <code>xargs</code>!</p>\n\n<pre><code>perl ... `find my_dir -type f -print0 | xargs -0`\n</code></pre>\n\n<p>is no different than</p>\n\n<pre><code>perl ... `find my_dir -type f`\n</code></pre>\n\n<p>What you wanted is</p>\n\n<pre><code>find my_dir -type f -print0 | xargs -0 perl ...\n</code></pre>\n\n<p>This will pass the file names to <code>perl</code> unmangled. It will even call <code>perl</code> more than once with different batches of arguments if necessary to avoid hitting command line length limits.</p>\n"}], "owner": {"reputation": 1052, "user_id": 754001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ovQ5n.png?s=128&g=1", "display_name": "Apoorv", "link": "https://stackoverflow.com/users/754001/apoorv"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 252, "favorite_count": 0, "accepted_answer_id": 39169872, "answer_count": 1, "score": 2, "last_activity_date": 1472238021, "creation_date": 1472222157, "question_id": 39168812, "link": "https://stackoverflow.com/questions/39168812/use-in-perl-search-and-replace", "title": "Use ~ in Perl search and replace", "body": "<p>I want to replace a placeholder in all files under a directory with a string that is generated from user input. This input can contain <code>/ : . ~</code> </p>\n\n<p>I chose Perl for this task.</p>\n\n<pre><code>perl -p -i -e \"s/__MY_PLACEHOLDER__/$user_input/g\" `find my_dir -type f -print0 | xargs -0`\n</code></pre>\n\n<p>Now, <code>~</code> is a reserved character in Perl. How can I escape <code>~</code> in <code>$user_input</code>? <code>\\~</code> does not work.</p>\n"}, {"tags": ["arrays", "perl"], "comments": [{"owner": {"reputation": 930, "user_id": 6594367, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/03c046cae270605c2376680482e52f6d?s=128&d=identicon&r=PG&f=1", "display_name": "John Doe", "link": "https://stackoverflow.com/users/6594367/john-doe"}, "edited": false, "score": 0, "creation_date": 1472220121, "post_id": 39167888, "comment_id": 65678607, "body": "You must learn to post short questions"}, {"owner": {"reputation": 2848, "user_id": 5334307, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/9796a2147e71f886989921a480f2feb1?s=128&d=identicon&r=PG&f=1", "display_name": "neilH", "link": "https://stackoverflow.com/users/5334307/neilh"}, "reply_to_user": {"reputation": 930, "user_id": 6594367, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/03c046cae270605c2376680482e52f6d?s=128&d=identicon&r=PG&f=1", "display_name": "John Doe", "link": "https://stackoverflow.com/users/6594367/john-doe"}, "edited": false, "score": 0, "creation_date": 1472220202, "post_id": 39167888, "comment_id": 65678669, "body": "Admittedly that was a concern with this one, but the script needed to be there in its entirity unfortunate for me to explain what is going on, sorry!"}, {"owner": {"reputation": 930, "user_id": 6594367, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/03c046cae270605c2376680482e52f6d?s=128&d=identicon&r=PG&f=1", "display_name": "John Doe", "link": "https://stackoverflow.com/users/6594367/john-doe"}, "edited": false, "score": 1, "creation_date": 1472221544, "post_id": 39167888, "comment_id": 65679544, "body": "You should reduce your problem to something simplier, otherwise, i&#39;m concerned that someone will have the time to understand the whole script and the problem and your request"}, {"owner": {"reputation": 1945, "user_id": 5669174, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XGSyr.jpg?s=128&g=1", "display_name": "Mike", "link": "https://stackoverflow.com/users/5669174/mike"}, "edited": false, "score": 0, "creation_date": 1472228172, "post_id": 39167888, "comment_id": 65683626, "body": "<code>$numIncsv1 &gt;= $desired</code> - strange test. If one word found in one title more than once, it is counted as N words or one ?"}, {"owner": {"reputation": 2848, "user_id": 5334307, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/9796a2147e71f886989921a480f2feb1?s=128&d=identicon&r=PG&f=1", "display_name": "neilH", "link": "https://stackoverflow.com/users/5334307/neilh"}, "edited": false, "score": 0, "creation_date": 1472229014, "post_id": 39167888, "comment_id": 65684100, "body": "Well considered, this is something else I have been struggling with. I wanted it so that each word must be matched in the other file for it to be be considered a match, but at the moment if one of the csv&#39;s has, for example <code>the</code> 3 times and the other has <code>the</code> once, it counts to 3 in <code>desired</code> , this is a separate issue I need to work out."}], "answers": [{"comments": [{"owner": {"reputation": 2848, "user_id": 5334307, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/9796a2147e71f886989921a480f2feb1?s=128&d=identicon&r=PG&f=1", "display_name": "neilH", "link": "https://stackoverflow.com/users/5334307/neilh"}, "edited": false, "score": 0, "creation_date": 1472324535, "post_id": 39172121, "comment_id": 65710720, "body": "Well, what can I say except you&#39;ve absolutely nailed that one! It&#39;s solved two issues for the price of one! cheers. Just trying to get my head around how it works now!"}, {"owner": {"reputation": 1945, "user_id": 5669174, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XGSyr.jpg?s=128&g=1", "display_name": "Mike", "link": "https://stackoverflow.com/users/5669174/mike"}, "reply_to_user": {"reputation": 2848, "user_id": 5334307, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/9796a2147e71f886989921a480f2feb1?s=128&d=identicon&r=PG&f=1", "display_name": "neilH", "link": "https://stackoverflow.com/users/5334307/neilh"}, "edited": false, "score": 0, "creation_date": 1472327018, "post_id": 39172121, "comment_id": 65711418, "body": "@bms9nmh You can ask if something is not clear at all.  But I do not know English. Very difficult to explain ;)"}, {"owner": {"reputation": 2848, "user_id": 5334307, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/9796a2147e71f886989921a480f2feb1?s=128&d=identicon&r=PG&f=1", "display_name": "neilH", "link": "https://stackoverflow.com/users/5334307/neilh"}, "edited": false, "score": 0, "creation_date": 1472332653, "post_id": 39172121, "comment_id": 65712880, "body": "i&#39;ve just noticed something that doesn&#39;t work as I expected. If the title is, for example, <code>the the the the the</code> in both csv1 and csv2, I would like this to be a match because each file has 5 matching words, but I&#39;ve tested this and it doesn&#39;t at the moment."}, {"owner": {"reputation": 1945, "user_id": 5669174, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XGSyr.jpg?s=128&g=1", "display_name": "Mike", "link": "https://stackoverflow.com/users/5669174/mike"}, "reply_to_user": {"reputation": 2848, "user_id": 5334307, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/9796a2147e71f886989921a480f2feb1?s=128&d=identicon&r=PG&f=1", "display_name": "neilH", "link": "https://stackoverflow.com/users/5334307/neilh"}, "edited": false, "score": 0, "creation_date": 1472334622, "post_id": 39172121, "comment_id": 65713399, "body": "@bms9nmh Previously, I have comments on this case. I add to response variant of minimum number of same words between csv1 and csv2. Now if in csv1 word count 2 and in csv2 word count is 3, then result count is 2."}, {"owner": {"reputation": 2848, "user_id": 5334307, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/9796a2147e71f886989921a480f2feb1?s=128&d=identicon&r=PG&f=1", "display_name": "neilH", "link": "https://stackoverflow.com/users/5334307/neilh"}, "edited": false, "score": 0, "creation_date": 1472922068, "post_id": 39172121, "comment_id": 65951295, "body": "Hi Mike, is there any way to prevent a full stop not being part of a word? For example <code>hello</code> and <code>hello.</code> are currently classed as different words because the full stop is counted as part of the word but I would like the full stop to be ignored?"}, {"owner": {"reputation": 1945, "user_id": 5669174, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XGSyr.jpg?s=128&g=1", "display_name": "Mike", "link": "https://stackoverflow.com/users/5669174/mike"}, "reply_to_user": {"reputation": 2848, "user_id": 5334307, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/9796a2147e71f886989921a480f2feb1?s=128&d=identicon&r=PG&f=1", "display_name": "neilH", "link": "https://stackoverflow.com/users/5334307/neilh"}, "edited": false, "score": 0, "creation_date": 1472923611, "post_id": 39172121, "comment_id": 65951740, "body": "Need replace split for get words to <code>&#47;(\\w+)&#47;g</code>. answer updated. two lines: 1. <code>for((split &#47;,\\s*&#47;)[1]=~&#47;(\\w+)&#47;g) { # list words in title</code>  2. <code>} $title=~&#47;(\\w+)&#47;g; #&#47;</code>"}, {"owner": {"reputation": 2848, "user_id": 5334307, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/9796a2147e71f886989921a480f2feb1?s=128&d=identicon&r=PG&f=1", "display_name": "neilH", "link": "https://stackoverflow.com/users/5334307/neilh"}, "edited": false, "score": 0, "creation_date": 1473350815, "post_id": 39172121, "comment_id": 66117340, "body": "I&#39;m confused why these two title are considered a match, I can only see 3 matching words the first title is <code>Top Gear magazine January 2011\u00a0 DS3R\u00a0 1 series\u00a0 A6\u00a0 911 GT3\u00a0 458 Italia\u00a0 Stratos</code>  and the other title is     <code>PORSCHE GT3 RS 4 0 Prospekt\u00a0 \u00a0Preise von 2011\u00a0 \u00a0911\u00a0 \u00a0997\u00a0 \u00a0Coup&#232;\u00a0 \u00a0Top Zustand</code> can anyone see any reason why?"}, {"owner": {"reputation": 1945, "user_id": 5669174, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XGSyr.jpg?s=128&g=1", "display_name": "Mike", "link": "https://stackoverflow.com/users/5669174/mike"}, "reply_to_user": {"reputation": 2848, "user_id": 5334307, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/9796a2147e71f886989921a480f2feb1?s=128&d=identicon&r=PG&f=1", "display_name": "neilH", "link": "https://stackoverflow.com/users/5334307/neilh"}, "edited": false, "score": 0, "creation_date": 1473360554, "post_id": 39172121, "comment_id": 66122315, "body": "@bms9nmh shown here algorithm  sees only 4 matches. <code>Top,911,2011,GT3</code>"}], "tags": [], "owner": {"reputation": 1945, "user_id": 5669174, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XGSyr.jpg?s=128&g=1", "display_name": "Mike", "link": "https://stackoverflow.com/users/5669174/mike"}, "is_accepted": true, "score": 1, "last_activity_date": 1472923481, "last_edit_date": 1472923481, "creation_date": 1472234076, "answer_id": 39172121, "question_id": 39167888, "link": "https://stackoverflow.com/questions/39167888/incorporate-year-matching-sub-routine-into-script-and-apply-condition-to-result/39172121#39172121", "title": "Incorporate year matching sub-routine into script and apply condition to result", "body": "<p>I review algorithm. Replaced many csv2 loops to hash of words containing list of csv2 rows numbers. Preliminary check's of years no longer required.</p>\n\n<pre><code>#!/usr/bin/perl\n#use Data::Dumper;\n#####CREATE CSV2 DATA\nopen CSV2, \"&lt;csv2\" or die;\nmy @csv2=&lt;CSV2&gt;;\nclose CSV2;\nmy %words2; # $words2{lower_case_word}-&gt;{csv2_row_number}-&gt;word_count\nmy $i=0; # csv2 row number\nmy %c2year; # Years of csv2 row numbers\nfor(@csv2) {\n   chomp;\n   for((split /,\\s*/)[1]=~/(\\w+)/g) { # list words in title\n    $words2{lc($_)}{$i}++;\n    $c2year{$i}=$_ if(/^(19|20)\\d\\d$/);\n   }\n   $i++;\n}\n#print Dumper(\\%words2);\n\n###### READ CSV1 DATA\nmy $desired = 5;      # Desired matching number of words\n\nopen CSV1, \"&lt;csv1\" or die;\nwhile (&lt;CSV1&gt;) {\n   chomp;       #removes new lines\n   my %rows=(); # $rows{csv2_row_number} =&gt; number_of_matched_words_in_row\n   my $matched = 0;\n   my ($title) = (split /,\\s*/)[1]; #/ creates variable of title\n   my %words;\n   my $year=0;\n####### get words and filter it\n   $words{lc($_)}++ for\n       grep {\n         $year=$_ if(/^(19|20)\\d\\d$/); # Years present in word list\n         !/^(rare|vol|volume|issue|double|magazine|mag)$/i\n       } $title=~/(\\w+)/g; #/\n###### The comparison algorithm\n   for(keys(%words)) {\n    # my $word=$_; # &lt;-- if need count words\n    if($words2{$_}) {\n     for(keys(%{$words2{$_}})) {\n      $rows{$_}++; # &lt;-- OR $rows{$_}+=$words{$word} OR/AND +=$words2{$word}{$_}\n     }\n    }\n   }\n#    print Dumper(\\%rows);\n   for(keys(%rows)) {\n      if ( ($rows{$_} &gt;= $desired)\n          &amp;&amp; (!$year || !$c2year{$_} || $year==$c2year{$_} )\n         ) {\n        print \"$year&lt;=&gt;$c2year{$_} csv2: \",$csv2[$_],\"\\n\";\n        ++$matched;\n      }\n   }\n print \"csv1: $_\\n\\n\" if $matched;\n}\n</code></pre>\n\n<p>Uncomment <code>use Data::Dumper</code> and <code>print Dumper(...)</code> for hash's review.</p>\n\n<p>If need consider count of same words, then:</p>\n\n<pre><code>###### The comparison algorithm\n   for(keys(%words)) {\n    my $W=$_;\n    if($words2{$_}) {\n     for(keys(%{$words2{$_}})) {\n      $rows{$_} += $words{$W} &lt; $words2{$W}{$_} ? $words{$W} : $words2{$W}{$_};\n      # $words{$W} - same word count in csv1, $words2{$W}{$_} - count in csv2\n     }\n    }\n   }\n#    print Dumper(\\%rows);\n</code></pre>\n"}], "owner": {"reputation": 2848, "user_id": 5334307, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/9796a2147e71f886989921a480f2feb1?s=128&d=identicon&r=PG&f=1", "display_name": "neilH", "link": "https://stackoverflow.com/users/5334307/neilh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 71, "favorite_count": 0, "accepted_answer_id": 39172121, "answer_count": 1, "score": 0, "last_activity_date": 1472923481, "creation_date": 1472219191, "last_edit_date": 1495542770, "question_id": 39167888, "link": "https://stackoverflow.com/questions/39167888/incorporate-year-matching-sub-routine-into-script-and-apply-condition-to-result", "title": "Incorporate year matching sub-routine into script and apply condition to result", "body": "<p>I have a script which reads a csv file line by line, and compares the title in field 2 of to another csv file. If 5 or more words match, the it prints out the line of each file which matches this criteria. Here is the script:</p>\n\n<pre><code>#!/bin/perl\n\n#subroutine for discovering year\n\nsub find_year {\n    my( $str ) = @_;\n    my $year = $1 if( $str =~ /\\b((?:19|20)\\d\\d)\\b/ );\n    return $year\n}\n\n#####CREATE CSV2 DATA\n\nmy @csv2 = ();\n\nopen CSV2, \"&lt;csv2\" or die;\n@csv2=&lt;CSV2&gt;;\nclose CSV2;\n\nmy %csv2hash = ();\nmy @csv2years;\n\nfor ( @csv2 ) {\n    chomp;\n    my ($title) = $_ =~ /^.+?,\\s*([^,]+?),/; #/define the data which is the title\n    $csv2hash{$_} = $title; # Indicate that title data will input into csv2hash.\n}\n\n###### CREATE CSV1 DATA\n\nopen CSV1, \"&lt;csv1\" or die;\n\nwhile (&lt;CSV1&gt;) {\n    chomp;      #removes new lines\n\n    my ($title) = $_ =~ /^.+?,\\s*([^,]+?),/; #/ creates variable of title\n    my %words;\n\n    $words{$_}++ for split /\\s+/, $title;    #/ get words\n\n    ## Collect unique words into an array- the @ means an array\n\n    my @titlewords = keys(%words);\n\n    # Add exception words which shouldn't be matched.\n\n    my @new;\n    foreach my $t (@titlewords){\n        push(@new, $t) if $t !~ /^(rare|vol|volume|issue|double|magazine|mag)$/i;\n    }\n\n\n    ###### The comparison algorithm\n\n    @titlewords = @new;\n\n    my $desired = 5;      # Desired matching number of words\n    my $matched = 0;\n\n    foreach my $csv2 (keys %csv2hash) {\n        my $count = 0;\n        my $value = $csv2hash{$csv2};\n\n        foreach my $word (@titlewords) {\n            my @matches   = ( $value=~/\\b$word\\b/ig );\n            my $numIncsv2 = scalar(@matches);\n\n            @matches      = ( $title=~/\\b$word\\b/ig );\n\n            my $numIncsv1 = scalar(@matches);\n\n            ++$count if $value =~ /\\b$word\\b/i;\n\n            if ($count &gt;= $desired || ($numIncsv1 &gt;= $desired &amp;&amp; $numIncsv2 &gt;= $desired)) {\n                $count = $desired+1;\n                last;\n            }\n        }\n\n        if ($count &gt;= $desired) {\n            print \"$csv2\\n\";\n            ++$matched;\n        }\n    }\n    print \"$_\\n\\n\" if $matched;\n}\n</code></pre>\n\n<p>As you can see i've created a find_year subroutine which can be used to discover if the title contains a year in the 20th or 21st century (19xx or 20xx). I asked a question a few days ago which would allow me to assign a result to a set of conditions which involve matching a year and Borodin provided a great answer here.</p>\n\n<p><a href=\"https://stackoverflow.com/questions/39055441/perl-what-function-am-i-looking-for-assigning-multiple-rules-to-a-specified-ou/39056452?noredirect=1#comment65464160_39056452\">Perl- What function am I looking for? Assigning multiple rules to a specified outcome</a></p>\n\n<p>I want the same conditions to apply to now, only this time the script will be comparing dates in the title of the csv's rather than standard input and a data list (as in the previous question). </p>\n\n<p>What I now want to do is include this logic as a function in my word matching script so that if the condition met in my previous question are considered Pass, then perform the word matching part of the script (i.e. 5 words match). If they match the Fail condition, then skip comparing the lines and move onto the next one (i.e. don't bother with the 5 matching word element of the script). The Pass and Fail result's don't have to be printed out, I am just using these words to describe the rules of the year comparison condition in my previous question. </p>\n\n<p>example for csv1:</p>\n\n<pre><code>14564564,1987 the door to the other doors,546456,47878787\n456456445,Mullholland Drive is the bets film ever 1959,45454545,45454545\n456456445,The Twin Peaks forget that stuff,45454545,45454545\n454654564, 1939 hello good world you are great ,45456456, 54564654\n</code></pre>\n\n<p>example for csv2:</p>\n\n<pre><code>154465454,the other door was the door to 1949,546456,478787870\n2156485754,Mullholland Drive is the bets film ever 1939,45454545,45454545\n87894454,Twin Peaks forget that stuff 1984,45454545,45454545\n2145678787, 1939 good lord you are great ,787425454,878777874\n</code></pre>\n\n<p>Current result before year_match subroutine is incorporated:</p>\n\n<pre><code>2156485754,Mullholland Drive is the best film ever 1939,45454545,45454545\n456456445,Mullholland Drive is the best film ever 1959,45454545,45454545\n\n87894454,Twin Peaks forget that stuff 1984,45454545,45454545\n456456445,The Twin Peaks forget that stuff,45454545,45454545\n\n2145678787, 1939 good lord you are great ,787425454,878777874\n454654564, 1939 hello good world you are great ,45456456, 54564654\n</code></pre>\n\n<p>Desired result after match_year subroutine is incorporated:</p>\n\n<pre><code>87894454,Twin Peaks forget that stuff 1984,45454545,45454545\n456456445,The Twin Peaks forget that stuff,45454545,45454545\n\n2145678787, 1939 good lord you are great ,787425454,878777874\n454654564, 1939 hello good world you are great ,45456456, 54564654\n</code></pre>\n\n<p>I can get my head around Borodin's answer to my previous question, but as this script I'm working on is difficult to read (IMO noob opinion anyway!), I'm having trouble working out how I can incorporate this new function into it. </p>\n"}, {"tags": ["perl", "hash"], "answers": [{"comments": [{"owner": {"reputation": 1532, "user_id": 791908, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tmGC4.jpg?s=128&g=1", "display_name": "Drav Sloan", "link": "https://stackoverflow.com/users/791908/drav-sloan"}, "edited": false, "score": 1, "creation_date": 1472219387, "post_id": 39167806, "comment_id": 65678113, "body": ":O The code in the answer I was preparing was identical! Except I was spliting implicty on <code>\\t</code> instead of <code>\\s+</code> (the right hand string may have spaces in it)"}, {"owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "reply_to_user": {"reputation": 1532, "user_id": 791908, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tmGC4.jpg?s=128&g=1", "display_name": "Drav Sloan", "link": "https://stackoverflow.com/users/791908/drav-sloan"}, "edited": false, "score": 0, "creation_date": 1472220432, "post_id": 39167806, "comment_id": 65678805, "body": ":) yep, it&#39;s a pretty common code idiom to get to where the OP needed to be"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 1, "creation_date": 1472228496, "post_id": 39167806, "comment_id": 65683821, "body": "Can I suggest rather than <code>split &#47;\\s+&#47;</code> that <code>split;</code> is all that&#39;s needed - they&#39;re almost the same, it&#39;s just the latter skips leading whitespace (which is moot). Both work, but I feel the latter is clearer. ("}, {"owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "reply_to_user": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1472230152, "post_id": 39167806, "comment_id": 65684666, "body": "@Sobrique: agreed, and fixed. To be honest, I never realized (or had somehow forgotten) that <code>split</code> split on more than just a single whitespace char by default. Learned something new, I did!"}, {"owner": {"reputation": 57, "user_id": 5098071, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/903a54b41a713d250f114e1e32e25444?s=128&d=identicon&r=PG&f=1", "display_name": "sangramjit basu", "link": "https://stackoverflow.com/users/5098071/sangramjit-basu"}, "edited": false, "score": 0, "creation_date": 1472279646, "post_id": 39167806, "comment_id": 65698079, "body": "@stevieb ....my man you must be godly being...you reduced my 18lines code to 3 lines...how I can I learn perl like this ??...and yes may you please explain &quot;push @{ $hash{$key} }, $val;&quot; and where did you choose the keys to be unique ????"}, {"owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "reply_to_user": {"reputation": 57, "user_id": 5098071, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/903a54b41a713d250f114e1e32e25444?s=128&d=identicon&r=PG&f=1", "display_name": "sangramjit basu", "link": "https://stackoverflow.com/users/5098071/sangramjit-basu"}, "edited": false, "score": 0, "creation_date": 1472304198, "post_id": 39167806, "comment_id": 65704655, "body": "@sangramjitbasu: You&#39;ll learn things like this the longer you write Perl :) Keys in a hash are always unique, so what happens is, if the left-hand value in the CSV is not yet in the hash when we first come across it, we create it as a key. If it is seen again, we add the next right-hand side value to the array held by the key."}, {"owner": {"reputation": 57, "user_id": 5098071, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/903a54b41a713d250f114e1e32e25444?s=128&d=identicon&r=PG&f=1", "display_name": "sangramjit basu", "link": "https://stackoverflow.com/users/5098071/sangramjit-basu"}, "edited": false, "score": 0, "creation_date": 1472563040, "post_id": 39167806, "comment_id": 65794197, "body": "@stevieb...okei...but now there&#39;s a small problem my command for printing the hash is     while (($k,$v)=each %hash){print &quot;$k\\t@$v&quot;}    and in the output the multiple values for a certain key are seperated by new line but I want it tab or comma seperated, which some how I can&#39;t bring in !!!"}], "tags": [], "owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "is_accepted": true, "score": 4, "last_activity_date": 1472230089, "last_edit_date": 1472230089, "creation_date": 1472218943, "answer_id": 39167806, "question_id": 39167437, "link": "https://stackoverflow.com/questions/39167437/unique-value-in-hash-while-merging-their-keys/39167806#39167806", "title": "unique value in hash while merging their keys", "body": "<p>You can avoid using two arrays and perform what you want in one fell swoop treating the left-side value as the hash key and making it an array reference, then pushing the right-side values that correlate with that key onto that aref:</p>\n\n<pre><code>use warnings;\nuse strict;\n\nuse Data::Dumper;\n\nmy %hash;\n\nwhile (&lt;DATA&gt;){\n    my ($key, $val) = split;\n    push @{ $hash{$key} }, $val;\n}\n\nprint Dumper \\%hash;\n\n__DATA__\nTR1 P0C134\nTR2 P0C133\nTR2 P0C136\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>$VAR1 = {\n    'TR1' =&gt; [\n        'P0C134'\n    ],\n    'TR2' =&gt; [\n        'P0C133',\n        'P0C136'\n    ]\n};\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 766, "user_id": 4445448, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/3fbf664dc5d850436aac1fd98700c0ae?s=128&d=identicon&r=PG&f=1", "display_name": "SSN", "link": "https://stackoverflow.com/users/4445448/ssn"}, "is_accepted": false, "score": 0, "last_activity_date": 1472447030, "last_edit_date": 1472447030, "creation_date": 1472219169, "answer_id": 39167878, "question_id": 39167437, "link": "https://stackoverflow.com/questions/39167437/unique-value-in-hash-while-merging-their-keys/39167878#39167878", "title": "unique value in hash while merging their keys", "body": "<p>If you want that same structure output use hash of hash.    </p>\n\n<pre><code>#!/usr/bin/perl\nuse warnings;\nuse strict;\n\nmy @arr = &lt;DATA&gt;;\nmy %hash;\n\nforeach (@arr)\n{\n    my ($k,$v) = split(/\\s+/,$_);\n    chomp $v;\n    $hash{$k}{$v}++;\n}\n\nforeach my $key1 (keys %hash)\n{\n    print \"$key1=&gt;\";\n    foreach my $key2 (keys $hash{$key1})\n    {\n        print \"$key2,\";\n    }\n    print \"\\n\";\n}\n\n__DATA__\nTR1 P0C134\nTR2 P0C133\nTR2 P0C136\n</code></pre>\n\n<p>Output is:</p>\n\n<pre><code>TR2=&gt;P0C136,P0C133,\nTR1=&gt;P0C134,\n</code></pre>\n"}], "owner": {"reputation": 57, "user_id": 5098071, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/903a54b41a713d250f114e1e32e25444?s=128&d=identicon&r=PG&f=1", "display_name": "sangramjit basu", "link": "https://stackoverflow.com/users/5098071/sangramjit-basu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 67, "favorite_count": 0, "accepted_answer_id": 39167806, "answer_count": 2, "score": 1, "last_activity_date": 1472447030, "creation_date": 1472217866, "question_id": 39167437, "link": "https://stackoverflow.com/questions/39167437/unique-value-in-hash-while-merging-their-keys", "title": "unique value in hash while merging their keys", "body": "<p>I have a file with tab separated columns like this:</p>\n\n<p>TR1\"\\t\"P0C134</p>\n\n<p>TR2\"\\t\"P0C133</p>\n\n<p>TR2\"\\t\"P0C136</p>\n\n<p>Now I split these into two arrays (one for each column values) then convert them into hashes but I want to remove the duplicates (here its TR2) while merging their right column values...something like this TR2=>P0C133,P0C136...how is it possible?? is there any function to do it in perl?? </p>\n\n<pre><code>for($i=0;$i&lt;=scalar@s_arr;$i++)\n{\n if($s_arr[$i] eq $s_arr[$i+1])\n  { push(@temp,$idx_arr[$i]); }\n\n else\n  { \n   if(@temp eq \"\") \n    { $s_hash{$s_arr[$i]}=$idx_arr[$i]; }\n   else\n    {\n      $idx_str=join(\",\",@temp);\n      $s_hash{$s_arr[$i]}=$idx_str;\n      @temp=\"\";\n     }\n   }\n}\n</code></pre>\n\n<p>this is code I've written where @s_arr is storing left column values and @idx_arr is storing right column value</p>\n"}, {"tags": ["regex", "string", "perl", "shell", "metacharacters"], "comments": [{"owner": {"reputation": 930, "user_id": 6594367, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/03c046cae270605c2376680482e52f6d?s=128&d=identicon&r=PG&f=1", "display_name": "John Doe", "link": "https://stackoverflow.com/users/6594367/john-doe"}, "edited": false, "score": 0, "creation_date": 1472216951, "post_id": 39166896, "comment_id": 65676458, "body": "Someone please edit this..."}, {"owner": {"reputation": 19192, "user_id": 257635, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/El2tc.jpg?s=128&g=1", "display_name": "Chankey Pathak", "link": "https://stackoverflow.com/users/257635/chankey-pathak"}, "edited": false, "score": 0, "creation_date": 1472217218, "post_id": 39166896, "comment_id": 65676646, "body": "Edited a bit but still the question is unclear."}], "answers": [{"tags": [], "owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "is_accepted": false, "score": 0, "last_activity_date": 1472217870, "creation_date": 1472217870, "answer_id": 39167438, "question_id": 39166896, "link": "https://stackoverflow.com/questions/39166896/how-to-replace-all-types-of-strings-meta-alphanumeric-using-perl-or-shell/39167438#39167438", "title": "How to replace all types of strings meta/alphanumeric/ using Perl or shell", "body": "<pre><code>perl -0777 -pi -e's/\\Q$ENV{search}/$ENV{replace}/g' $file\n</code></pre>\n\n<p><code>-0777</code> is only necessary if the search string contains literal newlines.</p>\n"}], "owner": {"reputation": 1, "user_id": 3169005, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/58ad83576c395f0d5b3dae5826aa020a?s=128&d=identicon&r=PG&f=1", "display_name": "Vishnuprasad", "link": "https://stackoverflow.com/users/3169005/vishnuprasad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 48, "favorite_count": 0, "closed_date": 1472721205, "answer_count": 1, "score": -2, "last_activity_date": 1472218454, "creation_date": 1472216208, "last_edit_date": 1472217174, "question_id": 39166896, "link": "https://stackoverflow.com/questions/39166896/how-to-replace-all-types-of-strings-meta-alphanumeric-using-perl-or-shell", "closed_reason": "Duplicate", "title": "How to replace all types of strings meta/alphanumeric/ using Perl or shell", "body": "<pre><code>sed -i 's/'$search'/'$replace'/g' $file\n</code></pre>\n\n<p>this command is able to replace only strings..but i wanted to search and replace any kind of strings in a file </p>\n\n<p>Ex : if i give input </p>\n\n<pre><code> $search= /jms/CodeBasev1.23*\n $replace= /jms/CodeBasev1.24/baseline*.\n</code></pre>\n\n<p>it should search for exact string and replace the exact line .. Not only with slashes but also it should accept meta-characters also </p>\n\n<p>ex: [..],%,&amp;,() ..etc</p>\n"}, {"tags": ["regex", "perl", "split"], "answers": [{"comments": [{"owner": {"reputation": 930, "user_id": 6594367, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/03c046cae270605c2376680482e52f6d?s=128&d=identicon&r=PG&f=1", "display_name": "John Doe", "link": "https://stackoverflow.com/users/6594367/john-doe"}, "edited": false, "score": 0, "creation_date": 1472216696, "post_id": 39166894, "comment_id": 65676282, "body": "That&#39;s smart, I tryed with a  <code>[</code> <code>^\\&#47;</code> <code>]</code> , but that would remove the last character of each element"}, {"owner": {"reputation": 481636, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 1, "creation_date": 1472217012, "post_id": 39166894, "comment_id": 65676498, "body": "Unless there can also be <code>\\\\</code> in the input denoting a literal backslash, this will work."}, {"owner": {"reputation": 1532, "user_id": 791908, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tmGC4.jpg?s=128&g=1", "display_name": "Drav Sloan", "link": "https://stackoverflow.com/users/791908/drav-sloan"}, "reply_to_user": {"reputation": 930, "user_id": 6594367, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/03c046cae270605c2376680482e52f6d?s=128&d=identicon&r=PG&f=1", "display_name": "John Doe", "link": "https://stackoverflow.com/users/6594367/john-doe"}, "edited": false, "score": 0, "creation_date": 1472217629, "post_id": 39166894, "comment_id": 65676903, "body": "@JohnDoe yeah, even negated character class have to match at least one character, which is why it would get consumed."}], "tags": [], "owner": {"reputation": 1532, "user_id": 791908, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tmGC4.jpg?s=128&g=1", "display_name": "Drav Sloan", "link": "https://stackoverflow.com/users/791908/drav-sloan"}, "is_accepted": false, "score": 1, "last_activity_date": 1472218063, "last_edit_date": 1495540849, "creation_date": 1472216192, "answer_id": 39166894, "question_id": 39166375, "link": "https://stackoverflow.com/questions/39166375/perl-spliting-string-with-quoted-characters/39166894#39166894", "title": "perl - spliting string with quoted characters", "body": "<p>You could use a negative lookbehind:</p>\n\n<pre><code>use warnings 'all';\nuse strict;\n\nuse Data::Dumper;\n\nmy $str = '123|ABC|x\\|yz|123';\nmy @bits = split /(?&lt;!\\\\)\\|/, $str;\n\nprint Dumper(@bits);\n</code></pre>\n\n<p>Results in:</p>\n\n<pre><code>$VAR1 = '123';\n$VAR2 = 'ABC';\n$VAR3 = 'x\\\\|yz';\n$VAR4 = '123';\n</code></pre>\n\n<p>As pointed out by <a href=\"https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew\">Wiktor</a>, if your string was of the form:</p>\n\n<pre><code>my $str = '123|ABC|x\\|yz|123\\\\|456|123\\\\345';\n</code></pre>\n\n<p>The <code>123\\\\</code> would be grouped with <code>456</code> (athough the last string\n<code>123\\\\345</code> would be okay):</p>\n\n<pre><code>$VAR1 = '123';\n$VAR2 = 'ABC';\n$VAR3 = 'x\\\\|yz';\n$VAR4 = '123\\\\|456';\n$VAR5 = '123\\\\345';\n</code></pre>\n\n<p>This is because the negative lookbehind only asserts a single backslash.</p>\n"}], "owner": {"reputation": 1, "user_id": 6761413, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-TsGJuXFDnhM/AAAAAAAAAAI/AAAAAAAAAEg/BNpCrgulNnE/photo.jpg?sz=128", "display_name": "irata73", "link": "https://stackoverflow.com/users/6761413/irata73"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 53, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1472218063, "creation_date": 1472214484, "last_edit_date": 1472216464, "question_id": 39166375, "link": "https://stackoverflow.com/questions/39166375/perl-spliting-string-with-quoted-characters", "title": "perl - spliting string with quoted characters", "body": "<p>I want to split the following string at the pipe character without split at the escaped pipe:</p>\n\n<pre><code>\"123|ABC|x\\|yz|123\"  should result in [\"123\",\"ABC\",\"x|yz\",123]\n</code></pre>\n\n<p>Does anyone had such a split regexp for perl?</p>\n"}, {"tags": ["linux", "bash", "perl"], "comments": [{"owner": {"reputation": 19192, "user_id": 257635, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/El2tc.jpg?s=128&g=1", "display_name": "Chankey Pathak", "link": "https://stackoverflow.com/users/257635/chankey-pathak"}, "edited": false, "score": 0, "creation_date": 1472212090, "post_id": 39165520, "comment_id": 65673427, "body": "Try using absolute path."}, {"owner": {"reputation": 1089, "user_id": 2339034, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/BWdZJ.jpg?s=128&g=1", "display_name": "PowerMan2015", "link": "https://stackoverflow.com/users/2339034/powerman2015"}, "reply_to_user": {"reputation": 19192, "user_id": 257635, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/El2tc.jpg?s=128&g=1", "display_name": "Chankey Pathak", "link": "https://stackoverflow.com/users/257635/chankey-pathak"}, "edited": false, "score": 0, "creation_date": 1472212167, "post_id": 39165520, "comment_id": 65673459, "body": "tried but the same result"}, {"owner": {"reputation": 930, "user_id": 6594367, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/03c046cae270605c2376680482e52f6d?s=128&d=identicon&r=PG&f=1", "display_name": "John Doe", "link": "https://stackoverflow.com/users/6594367/john-doe"}, "edited": false, "score": 0, "creation_date": 1472212582, "post_id": 39165520, "comment_id": 65673704, "body": "use <code>\\ to escape the </code>/"}, {"owner": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "edited": false, "score": 3, "creation_date": 1472212612, "post_id": 39165520, "comment_id": 65673723, "body": "how is this perl within perl as claimed in the title? This is perl within bash."}, {"owner": {"reputation": 1089, "user_id": 2339034, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/BWdZJ.jpg?s=128&g=1", "display_name": "PowerMan2015", "link": "https://stackoverflow.com/users/2339034/powerman2015"}, "edited": false, "score": 0, "creation_date": 1472213179, "post_id": 39165520, "comment_id": 65674065, "body": "i am new to linux so you will have to excuse the terminology used"}, {"owner": {"reputation": 1089, "user_id": 2339034, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/BWdZJ.jpg?s=128&g=1", "display_name": "PowerMan2015", "link": "https://stackoverflow.com/users/2339034/powerman2015"}, "reply_to_user": {"reputation": 930, "user_id": 6594367, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/03c046cae270605c2376680482e52f6d?s=128&d=identicon&r=PG&f=1", "display_name": "John Doe", "link": "https://stackoverflow.com/users/6594367/john-doe"}, "edited": false, "score": 0, "creation_date": 1472213347, "post_id": 39165520, "comment_id": 65674172, "body": "@JohnDoe can you please elaborate on your answer. Not sure how to interpret"}, {"owner": {"reputation": 930, "user_id": 6594367, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/03c046cae270605c2376680482e52f6d?s=128&d=identicon&r=PG&f=1", "display_name": "John Doe", "link": "https://stackoverflow.com/users/6594367/john-doe"}, "edited": false, "score": 0, "creation_date": 1472213554, "post_id": 39165520, "comment_id": 65674290, "body": "@PowerMan2015 can you explain what each line should do? also have you tryed to give an absolute path to <code>myfile.csv</code>, like <code>d:\\myfile.csv</code>?"}, {"owner": {"reputation": 1089, "user_id": 2339034, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/BWdZJ.jpg?s=128&g=1", "display_name": "PowerMan2015", "link": "https://stackoverflow.com/users/2339034/powerman2015"}, "reply_to_user": {"reputation": 930, "user_id": 6594367, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/03c046cae270605c2376680482e52f6d?s=128&d=identicon&r=PG&f=1", "display_name": "John Doe", "link": "https://stackoverflow.com/users/6594367/john-doe"}, "edited": false, "score": 0, "creation_date": 1472213910, "post_id": 39165520, "comment_id": 65674491, "body": "@JohnDoe i have amended the above script to show the expected result. I have just tried changing myfile.csv to /root/saxon-lint/myfile.csv but getting the same result"}, {"owner": {"reputation": 930, "user_id": 6594367, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/03c046cae270605c2376680482e52f6d?s=128&d=identicon&r=PG&f=1", "display_name": "John Doe", "link": "https://stackoverflow.com/users/6594367/john-doe"}, "edited": false, "score": 0, "creation_date": 1472214095, "post_id": 39165520, "comment_id": 65674611, "body": "What about your input file?"}, {"owner": {"reputation": 1089, "user_id": 2339034, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/BWdZJ.jpg?s=128&g=1", "display_name": "PowerMan2015", "link": "https://stackoverflow.com/users/2339034/powerman2015"}, "edited": false, "score": 0, "creation_date": 1472214258, "post_id": 39165520, "comment_id": 65674709, "body": "my input file is a text file with a url on each line. i can see the correct url being printer to the screen as it cycles through the list. Copying the executed line from the output and running works great. ./script2.pl: line 6: ./\\saxon-lint.pl --html --xpath &#39;string-join(//div[2]/div[2]/div[1]/div[2]/div[2])&#39; <a href=\"http://find.icaew.com/listings/view/listing_id/20669/avonhurst-chartered-accountants\" rel=\"nofollow noreferrer\">find.icaew.com/listings/view/listing_id/20669/&hellip;</a> : No such file or directory"}, {"owner": {"reputation": 930, "user_id": 6594367, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/03c046cae270605c2376680482e52f6d?s=128&d=identicon&r=PG&f=1", "display_name": "John Doe", "link": "https://stackoverflow.com/users/6594367/john-doe"}, "edited": false, "score": 0, "creation_date": 1472215114, "post_id": 39165520, "comment_id": 65675285, "body": "Can you put the full eror in your question?"}, {"owner": {"reputation": 930, "user_id": 6594367, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/03c046cae270605c2376680482e52f6d?s=128&d=identicon&r=PG&f=1", "display_name": "John Doe", "link": "https://stackoverflow.com/users/6594367/john-doe"}, "reply_to_user": {"reputation": 1089, "user_id": 2339034, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/BWdZJ.jpg?s=128&g=1", "display_name": "PowerMan2015", "link": "https://stackoverflow.com/users/2339034/powerman2015"}, "edited": false, "score": 0, "creation_date": 1472215164, "post_id": 39165520, "comment_id": 65675324, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/121929/discussion-between-john-doe-and-powerman2015\">continue this discussion in chat</a>."}, {"owner": {"reputation": 1089, "user_id": 2339034, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/BWdZJ.jpg?s=128&g=1", "display_name": "PowerMan2015", "link": "https://stackoverflow.com/users/2339034/powerman2015"}, "edited": false, "score": 0, "creation_date": 1472215184, "post_id": 39165520, "comment_id": 65675337, "body": "i have added the error message to the question above"}], "answers": [{"comments": [{"owner": {"reputation": 205702, "user_id": 7552, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b60298053f87465641c1b1192338c8cd?s=128&d=identicon&r=PG", "display_name": "glenn jackman", "link": "https://stackoverflow.com/users/7552/glenn-jackman"}, "edited": false, "score": 1, "creation_date": 1472216081, "post_id": 39166838, "comment_id": 65675911, "body": "You probably intended to put the quotes outside the command substitution, but for variable assignments they are not strictly necessary."}], "tags": [], "owner": {"reputation": 205702, "user_id": 7552, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b60298053f87465641c1b1192338c8cd?s=128&d=identicon&r=PG", "display_name": "glenn jackman", "link": "https://stackoverflow.com/users/7552/glenn-jackman"}, "is_accepted": true, "score": 5, "last_activity_date": 1472216016, "creation_date": 1472216016, "answer_id": 39166838, "question_id": 39165520, "link": "https://stackoverflow.com/questions/39165520/execute-perl-script-from-bash-script/39166838#39166838", "title": "Execute Perl Script from Bash script", "body": "<p>Don't put double quotes inside the command substitution.</p>\n\n<p>Not:</p>\n\n<pre><code>mydata=$(\"perl saxon-lint.pl --html --xpath 'string-join(//div[2]/div[2]/div[1]/div[2]/div[2])' $url \")\n# .......^...........................................................................................^\n</code></pre>\n\n<p>But this:</p>\n\n<pre><code>mydata=$(perl saxon-lint.pl --html --xpath 'string-join(//div[2]/div[2]/div[1]/div[2]/div[2])' $url )\n</code></pre>\n\n<p>With the double quotes, you're instructing bash to look for a program named \"perl saxon-lint.pl --html etc etc\" in the path, spaces and all, and clearly no such program exists.</p>\n"}, {"comments": [{"owner": {"reputation": 80721, "user_id": 797049, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5f4f7a23e3d0134123a66015bdc4edd1?s=128&d=identicon&r=PG", "display_name": "Mark Reed", "link": "https://stackoverflow.com/users/797049/mark-reed"}, "reply_to_user": {"reputation": 205702, "user_id": 7552, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b60298053f87465641c1b1192338c8cd?s=128&d=identicon&r=PG", "display_name": "glenn jackman", "link": "https://stackoverflow.com/users/7552/glenn-jackman"}, "edited": false, "score": 0, "creation_date": 1472229186, "post_id": 39167101, "comment_id": 65684187, "body": "Yes, including them..  try typing <code>&quot;ls&quot;</code> with the quotes at the command line, and you&#39;ll get a directory listing. The shell doesn&#39;t distinguish between words and strings.  All quotes do is keep you from having to escape characters (including spaces). To the shell, <code>&quot;ls&quot;</code> and <code>ls</code> (and <code>&#39;ls&#39;</code> and <code>\\ls</code> and <code>l\\s</code> and <code>\\l\\s</code>...) are exactly the same thing (except the quoted versions won&#39;t trigger an alias lookup). If you try <code>&quot;ls -l&quot;</code>, then you&#39;ll get an error because it&#39;s looking for a command named <code>ls -l</code>, instead of looking for one named <code>ls</code> and running it with an argument of <code>-l</code>."}], "tags": [], "owner": {"reputation": 80721, "user_id": 797049, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5f4f7a23e3d0134123a66015bdc4edd1?s=128&d=identicon&r=PG", "display_name": "Mark Reed", "link": "https://stackoverflow.com/users/797049/mark-reed"}, "is_accepted": false, "score": 1, "last_activity_date": 1472216893, "creation_date": 1472216893, "answer_id": 39167101, "question_id": 39165520, "link": "https://stackoverflow.com/questions/39165520/execute-perl-script-from-bash-script/39167101#39167101", "title": "Execute Perl Script from Bash script", "body": "<p>You should accept @glennjackman's answer, as that is exactly the problem.  This line:</p>\n\n<pre><code>mydata=$(\"perl saxon-lint.pl --html --xpath 'string-join(//div[2]/div[2]/div[1]/div[2]/div[2])' $url \")\n</code></pre>\n\n<p>is telling the shell to run this command: </p>\n\n<pre><code>\"perl saxon-lint.pl --html --xpath 'string-join(//div[2]/div[2]/div[1]/div[2]/div[2])' $url \"\n</code></pre>\n\n<p>... <em>including the double quotes</em>.  If you type that with the double quotes at the shell prompt, you'll get the same \"No such file or directory\" error message that you're getting from your script.</p>\n\n<p>A couple other notes on the script:</p>\n\n<pre><code>  url=\"$(echo $inputline)\"\n</code></pre>\n\n<p>This is a roundabout way of making a second variable into a copy of the first.  A simple <code>url=$intputline</code> would work as well, but you could also just use <code>read url</code> in the first place.  Not sure why you need two variables.</p>\n\n<pre><code>  //output the result in myfile.csv\n  echo \"$url,$mydata\" &gt;&gt; myfile.csv\n</code></pre>\n\n<p>Be aware that when passing a variable containing user-supplied input as the first argument to <code>echo</code>, you create the possibility of unexpected behavior. In this case, it's a low possibility, since a URL isn't likely to start with a <code>-</code> character, but it's good to get out of the habit; I would use <code>printf</code>.  Also, instead of appending each line inside the loop, I would just redirect the output of the loop along with the input:</p>\n\n<pre><code>  printf '%s,%s\\n' \"$url\" \"$mydata\"\n  [...]\ndone &lt;urls.txt &gt;&gt;myfile.csv\n</code></pre>\n\n<p>If you don't expect <code>myfile.csv</code> to exist or have anything you need to keep at the top of the loop, you can change that to a single <code>&gt;</code> and avoid the possibility of messy mixtures of output from different runs.</p>\n"}], "owner": {"reputation": 1089, "user_id": 2339034, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/BWdZJ.jpg?s=128&g=1", "display_name": "PowerMan2015", "link": "https://stackoverflow.com/users/2339034/powerman2015"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3650, "favorite_count": 0, "accepted_answer_id": 39166838, "answer_count": 2, "score": 0, "last_activity_date": 1472216893, "creation_date": 1472211900, "last_edit_date": 1472215603, "question_id": 39165520, "link": "https://stackoverflow.com/questions/39165520/execute-perl-script-from-bash-script", "title": "Execute Perl Script from Bash script", "body": "<p>Ok so i have the following script to scrape contact details from a list of urls (urls.txt). When i run the following command direct from the terminal i get the correct result</p>\n\n<pre><code>perl saxon-lint.pl --html --xpath 'string-join(//div[2]/div[2]/div[1]/div[2]/div[2])' http://url.com \n</code></pre>\n\n<p>however when i call the above command from within a script i get a \"no such file or directory\" result</p>\n\n<p>Here is a copy of my script</p>\n\n<pre><code>#!/bin/bash\n\nwhile read inputline\ndo\n  //Read the url from urls.txt\n  url=\"$(echo $inputline)\"\n\n  //execute saxon-lint to grab the contents of the XPATH from the url within urls.txt\n  mydata=$(\"perl saxon-lint.pl --html --xpath 'string-join(//div[2]/div[2]/div[1]/div[2]/div[2])' $url \")\n\n  //output the result in myfile.csv\n  echo \"$url,$mydata\" &gt;&gt; myfile.csv\n\n  //wait 4 seconds\n  sleep 4\n\n//move to the next url\ndone &lt;urls.txt\n</code></pre>\n\n<p>i have tried changing the perl to ./ but get the same result</p>\n\n<p>can anyone advise where i am going wrong with this please</p>\n\n<p>The error that i am receiving is </p>\n\n<pre><code>./script2.pl: line 6: ./saxon-lint.pl --html --xpath 'string-join(//div[2]/div[2]/div[1]/div[2]/div[2])' http://find.icaew.com/listings/view/listing_id/20669/avonhurst-chartered-accountants : No such file or directory\n</code></pre>\n\n<p>Thanks in advance</p>\n"}, {"tags": ["perl", "ternary-operator", "subroutine"], "answers": [{"tags": [], "owner": {"reputation": 1532, "user_id": 791908, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tmGC4.jpg?s=128&g=1", "display_name": "Drav Sloan", "link": "https://stackoverflow.com/users/791908/drav-sloan"}, "is_accepted": true, "score": 1, "last_activity_date": 1472211728, "last_edit_date": 1472211728, "creation_date": 1472211386, "answer_id": 39165397, "question_id": 39165110, "link": "https://stackoverflow.com/questions/39165110/using-triadic-operator-to-select-a-perl-subroutine/39165397#39165397", "title": "Using triadic operator to select a perl subroutine", "body": "<p>If you want to use function references you have to wrap them inside subroutine invocation syntax:</p>\n\n<pre><code>&amp;{ something that is a code reference } ($args)\n</code></pre>\n\n<p>So you would have to rewrite that as:</p>\n\n<pre><code>$res = &amp;{ ($d eq 'something' ? \\&amp;func1 : \\&amp;func2) } (parameters);\n</code></pre>\n\n<p>The ternary operator doesn't need to be braced either:</p>\n\n<pre><code>$res = &amp;{ $d eq 'something' ? \\&amp;func1 : \\&amp;func2 } (parameters);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1592, "user_id": 2307345, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/RMPBA.jpg?s=128&g=1", "display_name": "catzilla", "link": "https://stackoverflow.com/users/2307345/catzilla"}, "is_accepted": false, "score": 0, "last_activity_date": 1472211857, "last_edit_date": 1472211857, "creation_date": 1472211555, "answer_id": 39165429, "question_id": 39165110, "link": "https://stackoverflow.com/questions/39165110/using-triadic-operator-to-select-a-perl-subroutine/39165429#39165429", "title": "Using triadic operator to select a perl subroutine", "body": "<p>try using this:</p>\n\n<pre><code>use strict;\nuse warnings;\n\nmy $d = 'something';\nmy $res = &amp;{($d eq 'something' ? \\&amp;func1 : \\&amp;func2)}('world');\n\nprint $res;\n\nsub func1 {\n  my $resp = shift;\n  return 'hello'.$resp;\n}\n\nsub func2 {\n  my $resp = shift;\n  return 'world'. $resp;\n}\n</code></pre>\n\n<p>and of course it wouldn't hurt if you use this:</p>\n\n<pre><code>$param = 'world';\n\nif ($d eq 'something') {\n  print func1($param);\n}\nelse {\n  print func2($param);\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "is_accepted": false, "score": 5, "last_activity_date": 1472225685, "last_edit_date": 1472225685, "creation_date": 1472214154, "answer_id": 39166260, "question_id": 39165110, "link": "https://stackoverflow.com/questions/39165110/using-triadic-operator-to-select-a-perl-subroutine/39166260#39166260", "title": "Using triadic operator to select a perl subroutine", "body": "<p><code>\\func1</code> calls func1 and takes a reference to its return value(s) - not what you want.  To take a reference to a sub, use <code>\\&amp;func1</code> (with <code>&amp;</code> and without parentheses).</p>\n\n<p>To call a reference to a sub, you either dereference it with <code>&amp;BLOCK</code>:</p>\n\n<pre><code>&amp;{ statements-yielding-a-coderef }(parameters)\n\n# can be simplified to this if the reference is in a simple scalar:\n&amp;$coderef(parameters)\n</code></pre>\n\n<p>or with <code>-&gt;</code> (parentheses may be required because of <code>-&gt;</code>'s high precedence):</p>\n\n<pre><code>( expression-yielding-a-coderef )-&gt;(parameters)\n</code></pre>\n\n<p>So do either:</p>\n\n<pre><code>$result = &amp;{ $d eq 'something' ? \\&amp;func1 : \\&amp;func2 }(parameters);\n</code></pre>\n\n<p>or:</p>\n\n<pre><code>$result = ( $d eq 'something' ? \\&amp;func1 : \\&amp;func2 )-&gt;(parameters);\n</code></pre>\n"}], "owner": {"reputation": 8959, "user_id": 1182921, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/5cbca9fe5b06dab4005212a4bf9a5416?s=128&d=identicon&r=PG", "display_name": "Tom Tanner", "link": "https://stackoverflow.com/users/1182921/tom-tanner"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 49, "favorite_count": 0, "accepted_answer_id": 39165397, "answer_count": 3, "score": 1, "last_activity_date": 1472261542, "creation_date": 1472210406, "last_edit_date": 1472261542, "question_id": 39165110, "link": "https://stackoverflow.com/questions/39165110/using-triadic-operator-to-select-a-perl-subroutine", "title": "Using triadic operator to select a perl subroutine", "body": "<p>I have a situation where I want to call one of two subroutines depending on a fairly simple test, but the parameter list is sadly complex. This would seem to read easiest using the ternary operator and works fine in C, but the perl equivalent is evading me.</p>\n\n<p>Code is something like</p>\n\n<pre><code>$res = ($d eq 'something' ? \\func1 : \\func2)(parameters);\n</code></pre>\n\n<p>But perl gets very upset by the <code>)(</code> sequence and for the life of me I can't work out what to put there</p>\n"}, {"tags": ["html", "perl", "html-table", "cell", "word-wrap"], "comments": [{"owner": {"reputation": 917, "user_id": 3014263, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rFh51.jpg?s=128&g=1", "display_name": "AbhiNickz", "link": "https://stackoverflow.com/users/3014263/abhinickz"}, "edited": false, "score": 0, "creation_date": 1472209312, "post_id": 39164672, "comment_id": 65671860, "body": "Try this <a href=\"http://stackoverflow.com/questions/28642049/limit-the-character-in-html-column\" title=\"limit the character in html column\">stackoverflow.com/questions/28642049/&hellip;</a> <code>word-break: break-all; word-wrap:break-word;</code>"}, {"owner": {"reputation": 1532, "user_id": 791908, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tmGC4.jpg?s=128&g=1", "display_name": "Drav Sloan", "link": "https://stackoverflow.com/users/791908/drav-sloan"}, "edited": false, "score": 0, "creation_date": 1472209471, "post_id": 39164672, "comment_id": 65671954, "body": "As well as the top answer in <a href=\"http://stackoverflow.com/questions/15405817/truncating-text-inside-a-div\">this</a>"}, {"owner": {"reputation": 499, "user_id": 6760948, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/48c180d3ffe5cf06bf86515f9bc6776c?s=128&d=identicon&r=PG&f=1", "display_name": "voltas", "link": "https://stackoverflow.com/users/6760948/voltas"}, "reply_to_user": {"reputation": 917, "user_id": 3014263, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rFh51.jpg?s=128&g=1", "display_name": "AbhiNickz", "link": "https://stackoverflow.com/users/3014263/abhinickz"}, "edited": false, "score": 0, "creation_date": 1472211664, "post_id": 39164672, "comment_id": 65673208, "body": "Thank you @AbhiNickz &amp; Drav Sloan for your inputs"}, {"owner": {"reputation": 6313, "user_id": 328115, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/9a029d2d948f128443f996fa12b3d3a1?s=128&d=identicon&r=PG", "display_name": "dolmen", "link": "https://stackoverflow.com/users/328115/dolmen"}, "edited": false, "score": 0, "creation_date": 1472554990, "post_id": 39164672, "comment_id": 65788807, "body": "Have you heard about <a href=\"https://en.wikipedia.org/wiki/Cross-site_scripting\" rel=\"nofollow noreferrer\">XSS attacks</a>? Your code does not seem to protect against malicious data injected in <code>%work</code>."}], "answers": [{"comments": [{"owner": {"reputation": 499, "user_id": 6760948, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/48c180d3ffe5cf06bf86515f9bc6776c?s=128&d=identicon&r=PG&f=1", "display_name": "voltas", "link": "https://stackoverflow.com/users/6760948/voltas"}, "edited": false, "score": 0, "creation_date": 1472211616, "post_id": 39164840, "comment_id": 65673177, "body": "Thanks much for your suggestion , will try from my end."}], "tags": [], "owner": {"reputation": 1374, "user_id": 2637098, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/QtXCz.jpg?s=128&g=1", "display_name": "Maarten Bicknese", "link": "https://stackoverflow.com/users/2637098/maarten-bicknese"}, "is_accepted": false, "score": 0, "last_activity_date": 1472209574, "last_edit_date": 1495535352, "creation_date": 1472209574, "answer_id": 39164840, "question_id": 39164672, "link": "https://stackoverflow.com/questions/39164672/how-to-limit-characters-in-a-row-in-html/39164840#39164840", "title": "How to limit characters in a row in HTML", "body": "<p>welcome to Stack Overflow.</p>\n\n<p>You can possibly solve this by using CSS. Which can either be used by using an external stylesheet or inline style tag.</p>\n\n<p>For example (as seen in <a href=\"https://stackoverflow.com/questions/9789723/css-text-overflow-in-a-table-cell\">CSS text-overflow in a table cell?</a>)</p>\n\n<pre><code>td {\n    max-width: 100px;\n    overflow: hidden;\n    text-overflow: ellipsis;\n    white-space: nowrap;\n}\n</code></pre>\n\n<p>Though looking at your code, I think you might refactor or cleanup your HTML. I'm not experienced with Perl but guessing from other languages.</p>\n\n<p>The <code>body</code> tag should only be used once per HTML file/output. The <code>font</code> and <code>center</code> tags are deprecated in favor of CSS. I thought <code>col</code> was not an element at all, but seems it had just been deprecated for a long time. Having such errors in your HTML might lead to unexpected rendering issues as well.</p>\n"}], "owner": {"reputation": 499, "user_id": 6760948, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/48c180d3ffe5cf06bf86515f9bc6776c?s=128&d=identicon&r=PG&f=1", "display_name": "voltas", "link": "https://stackoverflow.com/users/6760948/voltas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 237, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1472209574, "creation_date": 1472209010, "last_edit_date": 1472209473, "question_id": 39164672, "link": "https://stackoverflow.com/questions/39164672/how-to-limit-characters-in-a-row-in-html", "title": "How to limit characters in a row in HTML", "body": "<p>I'm iterating through a hash and printing the output to a HTML file in perl.</p>\n\n<p>Currently I'm able to print to the HTML file but the text characters are getting printed out of the table row for a particular field called - <strong>FILES</strong>.</p>\n\n<p>For certain values there are multiple file paths for the field \"FILES\", hence data is getting printed out of the table.</p>\n\n<p>In HTML how can I limit the content or the table data to be printed within the Row.</p>\n\n<p>I tried using the wrap but of no use:</p>\n\n<pre><code>&lt;td wrap&gt;$$val{Files}&lt;/td&gt;\n</code></pre>\n\n<p>and</p>\n\n<pre><code>&lt;td nowrap&gt;$$val{Files}&lt;/td&gt;\n</code></pre>\n\n<p>I want the extended files or path to get fit in to the particular cell without flowing out of the row.</p>\n\n<p>Below is my piece of code:</p>\n\n<pre><code>foreach $prg (keys %work) {\n    print FH \"&lt;font color = #000000&gt; &lt;font size = 4&gt; &lt;u&gt;&lt;center&gt;&lt;br/&gt;Design: &lt;b&gt;$prg&lt;/b&gt;&lt;/center&gt;&lt;/u&gt;&lt;/font&gt;\\n\";\n\n    foreach $jir (keys %{$work{$prg}}) {\n      print FH \"&lt;p&gt;&lt;font color = #000000&gt;&lt;b&gt;DESIGN ID:$jir&lt;/b&gt;&lt;/font&gt;&lt;/p&gt; \";\n        @myarr = @{$work{$prg}{$jir}};\n        foreach $val (@myarr) {\n            print FH \"&lt;body&gt;&lt;table border=1 width=100% style='table-layout:fixed'&gt;&lt;/body&gt;\\n\";\n\n            print FH \"&lt;col width=6%&gt; &lt;col width=5%&gt;&lt;col width=10%&gt;&lt;col width=15%&gt;&lt;col width=10%&gt;&lt;col width=50%&gt;\";\n\n            print FH \"&lt;tr bgcolor=##4169E1&gt;&lt;th&gt;&lt;font color = #FFF5EE&gt;Design_ID&lt;/th&gt;&lt;th&gt;&lt;font color = #FFF5EE&gt;Submitter&lt;/th&gt;&lt;th&gt;&lt;font color = #FFF5EE&gt;Reviewer&lt;/th&gt;&lt;th&gt;&lt;font color = #FFF5EE&gt;Description&lt;/th&gt;&lt;th&gt;&lt;font color = #FFF5EE&gt;Date&lt;/th&gt;&lt;th&gt;&lt;font color = #FFF5EE&gt;Files&lt;/th&gt;&lt;/tr&gt;\\n\";\n\n             print FH \"&lt;tr bgcolor=#FFF8C6 border=1&gt;&lt;td&gt;$$val{design}&lt;/td&gt;&lt;td&gt;$$val{Initial}&lt;/td&gt;&lt;td&gt;$$val{Reviewer}&lt;/td&gt;&lt;td bgcolor=#FFF8C6&gt;$$val{Description}&lt;/td&gt;&lt;td&gt;$$val{time}&lt;/td&gt;&lt;td&gt;$$val{Files}&lt;/td&gt;&lt;/tr&gt;\\n\";\n             print FH \"&lt;/table&gt;\\n\";\n            }\n    }\n}\n</code></pre>\n"}, {"tags": ["perl", "usb", "cpan", "libusb", "usb-drive"], "answers": [{"comments": [{"owner": {"reputation": 340, "user_id": 2165436, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/kJoGX.jpg?s=128&g=1", "display_name": "dubis", "link": "https://stackoverflow.com/users/2165436/dubis"}, "edited": false, "score": 0, "creation_date": 1472203597, "post_id": 39162625, "comment_id": 65668650, "body": "Could you tell me which Makefile.PL file  I&#39;ve to modify ? However I solved the problem installing the package libdevice-usb-perl Thanks for you help"}, {"owner": {"reputation": 19192, "user_id": 257635, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/El2tc.jpg?s=128&g=1", "display_name": "Chankey Pathak", "link": "https://stackoverflow.com/users/257635/chankey-pathak"}, "reply_to_user": {"reputation": 340, "user_id": 2165436, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/kJoGX.jpg?s=128&g=1", "display_name": "dubis", "link": "https://stackoverflow.com/users/2165436/dubis"}, "edited": false, "score": 0, "creation_date": 1472203746, "post_id": 39162625, "comment_id": 65668750, "body": "You could use the repo with fix. Use <a href=\"https://github.com/devsaurus/perl-device-usb\" rel=\"nofollow noreferrer\">this link</a> and follow install instructions from there."}, {"owner": {"reputation": 19192, "user_id": 257635, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/El2tc.jpg?s=128&g=1", "display_name": "Chankey Pathak", "link": "https://stackoverflow.com/users/257635/chankey-pathak"}, "reply_to_user": {"reputation": 340, "user_id": 2165436, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/kJoGX.jpg?s=128&g=1", "display_name": "dubis", "link": "https://stackoverflow.com/users/2165436/dubis"}, "edited": false, "score": 1, "creation_date": 1472203787, "post_id": 39162625, "comment_id": 65668783, "body": "In short, download ZIP from there. Run following commands <code>perl Makefile.PL</code>, <code>make</code>, <code>make test</code>, <code>make install</code>."}], "tags": [], "owner": {"reputation": 19192, "user_id": 257635, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/El2tc.jpg?s=128&g=1", "display_name": "Chankey Pathak", "link": "https://stackoverflow.com/users/257635/chankey-pathak"}, "is_accepted": true, "score": 1, "last_activity_date": 1472202737, "creation_date": 1472202737, "answer_id": 39162625, "question_id": 39162316, "link": "https://stackoverflow.com/questions/39162316/cpan-install-deviceusb-not-ok/39162625#39162625", "title": "CPAN install Device::USB Not OK", "body": "<p>This is a known issue which has been reported to <a href=\"https://github.com/gwadej/perl-device-usb/issues/2\" rel=\"nofollow\">GitHub repo of Device::USB</a>.</p>\n\n<p>Possible solutions as per disucssion on that thread are:</p>\n\n<ol>\n<li><p>Downgrade Inline::MakeMaker</p></li>\n<li><p><a href=\"https://github.com/devsaurus/perl-device-usb/commit/4da24648a1f46c84ae45e7bcfcd425bc961ba1ad\" rel=\"nofollow\">Apply patch suggested by devsaurus</a></p></li>\n</ol>\n\n<p>i.e.</p>\n\n<p>Make below change in Makefile.PL</p>\n\n<pre><code>+sub MY::libscan {\n+   return if ($_[1] eq 'USB.pm' or $_[1] eq 'dump_usb.pl');\n+   return $_[1];\n+}\n</code></pre>\n"}], "owner": {"reputation": 340, "user_id": 2165436, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/kJoGX.jpg?s=128&g=1", "display_name": "dubis", "link": "https://stackoverflow.com/users/2165436/dubis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 402, "favorite_count": 0, "accepted_answer_id": 39162625, "answer_count": 1, "score": 1, "last_activity_date": 1494467388, "creation_date": 1472201890, "question_id": 39162316, "link": "https://stackoverflow.com/questions/39162316/cpan-install-deviceusb-not-ok", "title": "CPAN install Device::USB Not OK", "body": "<p>I'm on Debian 8 and I've got error when I Try to install Device::USB module with cpan</p>\n\n<pre><code>cpan  Device::USB \nReading '/home/system/.cpan/Metadata'\nDatabase was generated on Thu, 25 Aug 2016 14:29:02 GMT\nRunning install for module 'Device::USB'\nChecksum for /home/system/.cpan/sources/authors/id/G/GW/GWADEJ/Device-USB-0.36.tar.gz ok\nConfiguring G/GW/GWADEJ/Device-USB-0.36.tar.gz with Makefile.PL\nChecking if your kit is complete...\nLooks good\nGenerating a Unix-style Makefile\nWriting Makefile for Device::USB\nWriting MYMETA.yml and MYMETA.json\nFailed to find module path for 'dump_usb.pl' at Makefile.PL line 50.\nWarning: No success on command[/usr/bin/perl Makefile.PL INSTALLDIRS=site]\nGWADEJ/Device-USB-0.36.tar.gz\n/usr/bin/perl Makefile.PL INSTALLDIRS=site -- NOT OK\n</code></pre>\n\n<p>I Checked the FAQ in the dump_usb.pl page in the cpan.org web site and I didn't find any relevant information about this snake biting its tail problem, as the cpan should install dump_usb.pl and its showing it didn't find the module</p>\n\n<p>Thanks for any  help</p>\n"}, {"tags": ["perl", "unix", "cpan"], "comments": [{"owner": {"reputation": 930, "user_id": 6594367, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/03c046cae270605c2376680482e52f6d?s=128&d=identicon&r=PG&f=1", "display_name": "John Doe", "link": "https://stackoverflow.com/users/6594367/john-doe"}, "edited": false, "score": 2, "creation_date": 1472197952, "post_id": 39160814, "comment_id": 65665430, "body": "Can you try to print <code>$workbook-&gt;[0]{error}</code> ?"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 2, "creation_date": 1472200610, "post_id": 39160814, "comment_id": 65666849, "body": "Do you have <a href=\"https://metacpan.org/release/Spreadsheet-ParseXLSX\" rel=\"nofollow noreferrer\">metacpan.org/release/Spreadsheet-ParseXLSX</a> or <a href=\"https://metacpan.org/release/Spreadsheet-XLSX\" rel=\"nofollow noreferrer\">metacpan.org/release/Spreadsheet-XLSX</a> installed?"}, {"owner": {"reputation": 1786, "user_id": 1820650, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/ce47757627908a1013e0951158f4c2e6?s=128&d=identicon&r=PG", "display_name": "Dr.Avalanche", "link": "https://stackoverflow.com/users/1820650/dr-avalanche"}, "edited": false, "score": 0, "creation_date": 1472211652, "post_id": 39160814, "comment_id": 65673197, "body": "you get that if it can&#39;t open the file (e.g. permissions, wrong name etc)"}, {"owner": {"reputation": 81, "user_id": 6724223, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/ae8147e8133e7977beed4438cf79baa7?s=128&d=identicon&r=PG&f=1", "display_name": "V. Tej", "link": "https://stackoverflow.com/users/6724223/v-tej"}, "reply_to_user": {"reputation": 930, "user_id": 6594367, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/03c046cae270605c2376680482e52f6d?s=128&d=identicon&r=PG&f=1", "display_name": "John Doe", "link": "https://stackoverflow.com/users/6594367/john-doe"}, "edited": false, "score": 0, "creation_date": 1472223669, "post_id": 39160814, "comment_id": 65681000, "body": "@John Doe I get the same error when I try to print $workbook-&gt;[0]{error}"}, {"owner": {"reputation": 81, "user_id": 6724223, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/ae8147e8133e7977beed4438cf79baa7?s=128&d=identicon&r=PG&f=1", "display_name": "V. Tej", "link": "https://stackoverflow.com/users/6724223/v-tej"}, "reply_to_user": {"reputation": 1786, "user_id": 1820650, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/ce47757627908a1013e0951158f4c2e6?s=128&d=identicon&r=PG", "display_name": "Dr.Avalanche", "link": "https://stackoverflow.com/users/1820650/dr-avalanche"}, "edited": false, "score": 0, "creation_date": 1472223843, "post_id": 39160814, "comment_id": 65681112, "body": "@Dr.Avalanche I see that the file name is correct. How do I check with the permissions. ?"}, {"owner": {"reputation": 81, "user_id": 6724223, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/ae8147e8133e7977beed4438cf79baa7?s=128&d=identicon&r=PG&f=1", "display_name": "V. Tej", "link": "https://stackoverflow.com/users/6724223/v-tej"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1472223917, "post_id": 39160814, "comment_id": 65681169, "body": "@simbabque I installed the Spreadsheet modules from cpan by entering into the cpan shell from the command line and installing the modules. How do I check for what you asked. ?"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1472224445, "post_id": 39160814, "comment_id": 65681524, "body": "You can do <code>perl -MModule::Name\\ 999</code>."}, {"owner": {"reputation": 81, "user_id": 6724223, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/ae8147e8133e7977beed4438cf79baa7?s=128&d=identicon&r=PG&f=1", "display_name": "V. Tej", "link": "https://stackoverflow.com/users/6724223/v-tej"}, "edited": false, "score": 0, "creation_date": 1472226544, "post_id": 39160814, "comment_id": 65682753, "body": "When I type the above it says Can&#39;t locate Module/Name.pm in @INC"}, {"owner": {"reputation": 81, "user_id": 6724223, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/ae8147e8133e7977beed4438cf79baa7?s=128&d=identicon&r=PG&f=1", "display_name": "V. Tej", "link": "https://stackoverflow.com/users/6724223/v-tej"}, "edited": false, "score": 0, "creation_date": 1472237047, "post_id": 39160814, "comment_id": 65687894, "body": "I fixed the issue. It was about file was not being accessed. I used samba to Map unix disk to Windows Network Drive.  But now, I get a different error which says :  Parser for XLSX is not installed at.. Can someone help me to resolve it."}], "answers": [{"comments": [{"owner": {"reputation": 930, "user_id": 6594367, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/03c046cae270605c2376680482e52f6d?s=128&d=identicon&r=PG&f=1", "display_name": "John Doe", "link": "https://stackoverflow.com/users/6594367/john-doe"}, "edited": false, "score": 0, "creation_date": 1472463283, "post_id": 39172905, "comment_id": 65745100, "body": "Well you obviously need to follow the error. Install a XLSX parser"}, {"owner": {"reputation": 81, "user_id": 6724223, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/ae8147e8133e7977beed4438cf79baa7?s=128&d=identicon&r=PG&f=1", "display_name": "V. Tej", "link": "https://stackoverflow.com/users/6724223/v-tej"}, "reply_to_user": {"reputation": 930, "user_id": 6594367, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/03c046cae270605c2376680482e52f6d?s=128&d=identicon&r=PG&f=1", "display_name": "John Doe", "link": "https://stackoverflow.com/users/6594367/john-doe"}, "edited": false, "score": 0, "creation_date": 1472504985, "post_id": 39172905, "comment_id": 65769183, "body": "Yes, you are correct. I figured it out. Thanks for the help."}], "tags": [], "owner": {"reputation": 81, "user_id": 6724223, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/ae8147e8133e7977beed4438cf79baa7?s=128&d=identicon&r=PG&f=1", "display_name": "V. Tej", "link": "https://stackoverflow.com/users/6724223/v-tej"}, "is_accepted": false, "score": 0, "last_activity_date": 1472237128, "creation_date": 1472237128, "answer_id": 39172905, "question_id": 39160814, "link": "https://stackoverflow.com/questions/39160814/perl-script-to-read-an-excel-file-using-cpan-modules/39172905#39172905", "title": "perl script to read an excel file using cpan modules", "body": "<p>I fixed the issue. It was about file was not being accessed. I used samba to Map unix disk to Windows Network Drive. But now, I get a different error which says : <code>Parser for XLSX is not installed at..</code> Can someone help me to resolve it.</p>\n"}], "owner": {"reputation": 81, "user_id": 6724223, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/ae8147e8133e7977beed4438cf79baa7?s=128&d=identicon&r=PG&f=1", "display_name": "V. Tej", "link": "https://stackoverflow.com/users/6724223/v-tej"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 409, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1472237128, "creation_date": 1472196855, "question_id": 39160814, "link": "https://stackoverflow.com/questions/39160814/perl-script-to-read-an-excel-file-using-cpan-modules", "title": "perl script to read an excel file using cpan modules", "body": "<p>I am writing a perl script to read data from an excel file. The script is being written in an unix environment and run on the server, whereas the excel file is available on my Desktop in Windows.</p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\nuse feature 'say';\n\n\nuse Spreadsheet::Read;\n\nmy $workbook = ReadData (\"C:/Users/tej/Desktop/Work.xlsx\");\nsay $workbook-&gt;[1]{A1};\n</code></pre>\n\n<p>The output gives out a warning saying \n<code>Use of uninitialized value in say at..... line 10</code>\nAnd there is no other output being printed. I just wrote a sample code to read the A1 cell value from sheet 1. Later, I need to write a logic to read particular values. For right now, need to fix the error to read and print the excel cell values. Appreciate any help. :) </p>\n"}, {"tags": ["perl", "postfix-mta", "milter"], "comments": [{"owner": {"reputation": 19192, "user_id": 257635, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/El2tc.jpg?s=128&g=1", "display_name": "Chankey Pathak", "link": "https://stackoverflow.com/users/257635/chankey-pathak"}, "edited": false, "score": 0, "creation_date": 1472200751, "post_id": 39160671, "comment_id": 65666921, "body": "<code>my $queue_id = $ctx-&gt;getsymval(&#39;i&#39;);</code> should provide you queue id."}, {"owner": {"reputation": 4721, "user_id": 1289384, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7f4c98828479774a3afc4a5e3ae6b924?s=128&d=identicon&r=PG", "display_name": "David-SkyMesh", "link": "https://stackoverflow.com/users/1289384/david-skymesh"}, "reply_to_user": {"reputation": 19192, "user_id": 257635, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/El2tc.jpg?s=128&g=1", "display_name": "Chankey Pathak", "link": "https://stackoverflow.com/users/257635/chankey-pathak"}, "edited": false, "score": 0, "creation_date": 1472441139, "post_id": 39160671, "comment_id": 65736421, "body": "Works for <code>Sendmail::Milter</code> out of the box, thanks. Noticed we&#39;d been accidentally using <code>Sendmail::PMilter</code> which needed to be patched. If you&#39;d like to write up answer, I&#39;ll accept it."}, {"owner": {"reputation": 19192, "user_id": 257635, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/El2tc.jpg?s=128&g=1", "display_name": "Chankey Pathak", "link": "https://stackoverflow.com/users/257635/chankey-pathak"}, "edited": false, "score": 0, "creation_date": 1472447110, "post_id": 39160671, "comment_id": 65737680, "body": "I see. I have added the answer."}], "answers": [{"tags": [], "owner": {"reputation": 19192, "user_id": 257635, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/El2tc.jpg?s=128&g=1", "display_name": "Chankey Pathak", "link": "https://stackoverflow.com/users/257635/chankey-pathak"}, "is_accepted": true, "score": 2, "last_activity_date": 1472446889, "creation_date": 1472446889, "answer_id": 39198764, "question_id": 39160671, "link": "https://stackoverflow.com/questions/39160671/get-queue-id-during-execution-of-postfix-before-queue-perl-milter/39198764#39198764", "title": "Get Queue ID during execution of Postfix before-queue (perl) milter", "body": "<p>Use below to get queue_id.</p>\n\n<pre><code>my $queue_id = $ctx-&gt;getsymval('i'); \n</code></pre>\n"}], "owner": {"reputation": 4721, "user_id": 1289384, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7f4c98828479774a3afc4a5e3ae6b924?s=128&d=identicon&r=PG", "display_name": "David-SkyMesh", "link": "https://stackoverflow.com/users/1289384/david-skymesh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 561, "favorite_count": 0, "accepted_answer_id": 39198764, "answer_count": 1, "score": 2, "last_activity_date": 1472446889, "creation_date": 1472196395, "question_id": 39160671, "link": "https://stackoverflow.com/questions/39160671/get-queue-id-during-execution-of-postfix-before-queue-perl-milter", "title": "Get Queue ID during execution of Postfix before-queue (perl) milter", "body": "<p><strong>Problem:</strong></p>\n\n<p>Trying to write a milter for Postfix to tie the presence of certain headers in an email to the destination IP address and TCP Port of the outbound relay host.</p>\n\n<p>Following the Postfix <a href=\"http://postfix.cs.utah.edu/MILTER_README.html\" rel=\"nofollow\" title=\"milter guide\">milter guide</a> it seems I need to implement a <code>before-queue</code> milter.</p>\n\n<p>Doing so using the <a href=\"http://search.cpan.org/~cying/Sendmail-Milter-0.18/Milter.pm\" rel=\"nofollow\">Sendmail::Milter</a> perl module.</p>\n\n<p>I can get at everything I need in the headers, envelope, etc except for the ultimate destination (IP and port) that it will be relayed to. Obviously <strong>that makes sense</strong> for a <code>before-queue</code> milter.</p>\n\n<p><strong>Where to get the relay information?</strong></p>\n\n<p>Looking at our Postfix logs I can see messages of the following format:</p>\n\n<pre><code>TIMESTAMP HOST postfix/qmgr[pid]: XXXXXXXXXX: log message here\nTIMESTAMP HOST postfix/smtp[pid]: XXXXXXXXXX: log message here\nTIMESTAMP HOST postfix/smtpd[pid]: XXXXXXXXXX: log message here\n</code></pre>\n\n<p>Some of the log lines have the relay information I'm looking for, i.e:</p>\n\n<pre><code>&lt;TIMESTAMP&gt; &lt;HOST&gt; postfix/smtp[pid]: XXXXXXXXXX: to=EMAIL, relay=HOST[ADDR]:PORT, ...\n</code></pre>\n\n<p>That <code>ADDR</code> and <code>PORT</code> is exactly what I'm looking for. The <code>XXXXXXXXXX</code> is what seems to tie it all together in the logs. I'm led to believe that this is called the 'Queue ID' or 'Job ID' depending on what you're talking about.</p>\n\n<p>If I could get at that <code>XXXXXXXXXX</code> Queue/Job ID from the milter, then it'd be no problem to tie the logs together.</p>\n\n<p><strong>Tried?</strong></p>\n\n<p>It looks like I might be able to get at some vendor specific information by calling <code>$ctx-&gt;getsymval SYMNAME</code> from the callbacks.</p>\n\n<pre><code>Additional information is passed in to the vendor filter routines using symbols. \nSymbols correspond closely to sendmail macros. The symbols defined depend on the \ncontext. SYMNAME is the name of the symbol to access.\n\nThis function returns the value of the symbol name SYMNAME.\n</code></pre>\n\n<p>The milter guide has code like the following to get at the 'Queue ID':</p>\n\n<pre><code>/* Determine the job ID for logging. */\nif (dfc-&gt;mctx_jobid == 0 || strcmp(dfc-&gt;mctx_jobid, JOBIDUNKNOWN) == 0) {\n        char *jobid = smfi_getsymval(ctx, \"i\");\n        if (jobid != 0)\n                dfc-&gt;mctx_jobid = jobid;\n}\n</code></pre>\n\n<p>I just can't figure out if I can get at that jobid via <code>getsymval</code> (and what the <code>SYMNAME</code> might be), or via some other context method.</p>\n\n<p>Any ideas?</p>\n"}, {"tags": ["regex", "perl", "regex-greedy"], "comments": [{"owner": {"reputation": 381798, "user_id": 1863229, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/4sh1l.png?s=128&g=1", "display_name": "Tim Biegeleisen", "link": "https://stackoverflow.com/users/1863229/tim-biegeleisen"}, "edited": false, "score": 0, "creation_date": 1472176650, "post_id": 39157237, "comment_id": 65658039, "body": "Welcome to Stack Overlow.  Your formatting is hard to read.  Can you edit your question to include a clean sample of the actual problem you are trying to solve?"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1472178304, "post_id": 39157237, "comment_id": 65658436, "body": "<code>ID</code> doesn&#39;t occur anywhere in your sample data. What are you really trying to do?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1472184543, "post_id": 39157237, "comment_id": 65659783, "body": "Most of that string is irrelevant. Trim it down, show what output you get, and show what output you want."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1472198287, "post_id": 39157237, "comment_id": 65665608, "body": "Your sample string looks an awful lot like JSON. Why not parse it as JSON?"}, {"owner": {"reputation": 9, "user_id": 5666313, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-LR6N4mbSKI4/AAAAAAAAAAI/AAAAAAAACJA/NV-5h62XKbc/photo.jpg?sz=128", "display_name": "Judd", "link": "https://stackoverflow.com/users/5666313/judd"}, "edited": false, "score": 0, "creation_date": 1472228753, "post_id": 39157237, "comment_id": 65683953, "body": "The ID appears in different data, this the what the barcode on the back of a driver&#39;s license(DL) or ID contains. There are a lot of oddball states and a range of versions that add fun edge cases."}], "answers": [{"comments": [{"owner": {"reputation": 185733, "user_id": 152948, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/194ef8f807c34a9d7aab0e11a8674768?s=128&d=identicon&r=PG", "display_name": "hobbs", "link": "https://stackoverflow.com/users/152948/hobbs"}, "edited": false, "score": 1, "creation_date": 1472178936, "post_id": 39157414, "comment_id": 65658565, "body": "It&#39;s not the JSON that&#39;s the interesting part. Sure, this is the right first step, but my understanding is that the real task is extracting bits of data like e.g. <code>00389199ZO04420478</code>."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 185733, "user_id": 152948, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/194ef8f807c34a9d7aab0e11a8674768?s=128&d=identicon&r=PG", "display_name": "hobbs", "link": "https://stackoverflow.com/users/152948/hobbs"}, "edited": false, "score": 0, "creation_date": 1472181166, "post_id": 39157414, "comment_id": 65659005, "body": "@hobbs: My apologies. I missed that you weren&#39;t the OP"}, {"owner": {"reputation": 9, "user_id": 5666313, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-LR6N4mbSKI4/AAAAAAAAAAI/AAAAAAAACJA/NV-5h62XKbc/photo.jpg?sz=128", "display_name": "Judd", "link": "https://stackoverflow.com/users/5666313/judd"}, "reply_to_user": {"reputation": 185733, "user_id": 152948, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/194ef8f807c34a9d7aab0e11a8674768?s=128&d=identicon&r=PG", "display_name": "hobbs", "link": "https://stackoverflow.com/users/152948/hobbs"}, "edited": false, "score": 0, "creation_date": 1472227660, "post_id": 39157414, "comment_id": 65683340, "body": "@hobbs is correct, the JSON stuff is handled elsewhere, it&#39;s the ANSI stream that&#39;s the relevant part for my question."}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 0, "last_activity_date": 1472178090, "creation_date": 1472178090, "answer_id": 39157414, "question_id": 39157237, "link": "https://stackoverflow.com/questions/39157237/perl-regex-back-reference-not-being-greedy/39157414#39157414", "title": "Perl regex back reference not being greedy", "body": "\n\n<p>Your data is JSON, and it is very wrong to try to process it using regex patterns. There are perfectly good Perl modules to convert the text to a navigable data structure</p>\n\n<p>I can't understand exactly what you need because you're talking about <code>DA</code> and <code>ID</code> strings, and <code>ID</code> doesn't occur anywhere in your sample data. But this short program should help</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>use strict;\nuse warnings 'all';\nuse feature 'say';\n\nuse JSON 'decode_json';\n\nmy $json = do {\n    local $/;\n    &lt;DATA&gt;;\n};\n\nmy $data = decode_json $json;\n\nsay $data-&gt;{msg};\n\n\n__DATA__\n{\"name\":\"SC\",\"hostname\":\"tukwila\",\"pid\":11,\"level\":30,\"msg\":\"@\\n\\nANSI 6334290212DL00389199ZO04420478DLDAQ3572928\\nDAASMITH, JOHN DOE\\nDAG\\nDAL4389 NE 47TH AVE\\nDAIASHLAND\\nDAJOR\\nDAK97555      \\nDARC   \\nDASD         \\nDATM     \\nDAU504\\nDAW180\\nDBA12201212\\nDBB19780303\\n\",\"time\":\"2016-04-02T01:09:07.113Z\",\"v\":0}\n</code></pre>\n\n<h3>output</h3>\n\n<pre class=\"lang-none prettyprint-override\"><code>@\n\nANSI 6334290212DL00389199ZO04420478DLDAQ3572928\nDAASMITH, JOHN DOE\nDAG\nDAL4389 NE 47TH AVE\nDAIASHLAND\nDAJOR\nDAK97555      \nDARC   \nDASD         \nDATM     \nDAU504\nDAW180\nDBA12201212\nDBB19780303\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1472180340, "post_id": 39157501, "comment_id": 65658843, "body": "<i>&quot;it&#39;s old and weird&quot;</i> You&#39;ll have to defend that. I have no idea what your background is, but the OP&#39;s data is JSON. It&#39;s a very useful and common representation of simple data that is supported by JavaScript, where it originated, Python, Perl, PHP, Java, C and its family, and others. It has its own MIME type of <code>application&#47;json</code> and I would guess that it is at least as popular as XML. Where have you been?"}, {"owner": {"reputation": 185733, "user_id": 152948, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/194ef8f807c34a9d7aab0e11a8674768?s=128&d=identicon&r=PG", "display_name": "hobbs", "link": "https://stackoverflow.com/users/152948/hobbs"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1472180555, "post_id": 39157501, "comment_id": 65658885, "body": "@Borodin I&#39;m obviously not talking about JSON. You didn&#39;t pay sufficient attention to the question or my answer."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1472180944, "post_id": 39157501, "comment_id": 65658966, "body": "I read your submission carefully. While it may make perfect sense in your head, you never mention JSON and begin a new paragraph with <i>&quot;I don&#39;t entirely understand the format you&#39;re trying to extract&quot;</i>. To me that means you are clueless about the whole of the OP&#39;s data. You also have a semicolon ( these <code>;</code> ) after <i>&quot;Although, Borodin&#39;s observation is also valid&quot;</i> which indicates that you disagree with me. Drop the comma ( <code>,</code> ) and use a colon ( <code>:</code> ) and the sense of your post will agree with your comment."}, {"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 0, "creation_date": 1472205281, "post_id": 39157501, "comment_id": 65669710, "body": "if the json is decoded first, <code>&#47;s</code> would also be needed"}, {"owner": {"reputation": 9, "user_id": 5666313, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-LR6N4mbSKI4/AAAAAAAAAAI/AAAAAAAACJA/NV-5h62XKbc/photo.jpg?sz=128", "display_name": "Judd", "link": "https://stackoverflow.com/users/5666313/judd"}, "edited": false, "score": 0, "creation_date": 1472229102, "post_id": 39157501, "comment_id": 65684152, "body": "Making the match be the \\g{-2} OR an empty string was good fix, it let me add the + sign without missing when the 2nd one isn&#39;t there :), I assumed that the \\g{-2}? would prefer to match 1 over 0, but seems like that&#39;s not the case."}, {"owner": {"reputation": 185733, "user_id": 152948, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/194ef8f807c34a9d7aab0e11a8674768?s=128&d=identicon&r=PG", "display_name": "hobbs", "link": "https://stackoverflow.com/users/152948/hobbs"}, "reply_to_user": {"reputation": 9, "user_id": 5666313, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-LR6N4mbSKI4/AAAAAAAAAAI/AAAAAAAACJA/NV-5h62XKbc/photo.jpg?sz=128", "display_name": "Judd", "link": "https://stackoverflow.com/users/5666313/judd"}, "edited": false, "score": 0, "creation_date": 1472234299, "post_id": 39157501, "comment_id": 65686631, "body": "@Judd it <i>does</i> prefer to match 1 over 0, but if it&#39;s attempted at a location where it can&#39;t match, it <i>will</i> match 0."}, {"owner": {"reputation": 9, "user_id": 5666313, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-LR6N4mbSKI4/AAAAAAAAAAI/AAAAAAAACJA/NV-5h62XKbc/photo.jpg?sz=128", "display_name": "Judd", "link": "https://stackoverflow.com/users/5666313/judd"}, "edited": false, "score": 0, "creation_date": 1472234722, "post_id": 39157501, "comment_id": 65686808, "body": "@hobbs Ahh, I get it, very subtle. Thank you."}], "tags": [], "owner": {"reputation": 185733, "user_id": 152948, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/194ef8f807c34a9d7aab0e11a8674768?s=128&d=identicon&r=PG", "display_name": "hobbs", "link": "https://stackoverflow.com/users/152948/hobbs"}, "is_accepted": false, "score": 3, "last_activity_date": 1472183200, "last_edit_date": 1472183200, "creation_date": 1472178796, "answer_id": 39157501, "question_id": 39157237, "link": "https://stackoverflow.com/questions/39157237/perl-regex-back-reference-not-being-greedy/39157501#39157501", "title": "Perl regex back reference not being greedy", "body": "<p>The problem isn't that <code>\\g{-2}?</code> is non-greedy, it's that the <code>(.*?)</code> immediately before it is non-greedy, and <code>\\g{-2}?</code> is capable of matching nothing, which means that it <em>can't fail</em>. And if it can't fail, then it doesn't force the group before it to match more than 0 characters. So invariably, <code>(.*?)</code> will match nothing, <code>\\g{-2}</code> will match nothing, and <code>([^\"]+)</code> will match everything.</p>\n\n<p>I don't entirely understand the format you're trying to extract (other than that it's old and weird and reminds me of CIBER billing records), but I would suggest that you either need more anchoring to focus your regex's attention on the right place, or you need to upgrade to something like a proper parser for the format. Since you're saying that you added the <code>?</code> to handle the case where the delimiter never appears, the quickest band-aid fix would possibly be <code>(?:\\g{-2}|(?=\"))</code> which asserts that you either find the delimiter, <em>or</em> you got to the closing quote without finding it.</p>\n\n<p>Although, Borodin's observation is also valid; it would be much better to decode the JSON first and then work with the string from the decoded JSON structure, instead of trying to run a regex on the JSON directly. In that case, you should be looking for <code>\\z</code> (end of string) rather than <code>\"</code>.</p>\n"}], "owner": {"reputation": 9, "user_id": 5666313, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-LR6N4mbSKI4/AAAAAAAAAAI/AAAAAAAACJA/NV-5h62XKbc/photo.jpg?sz=128", "display_name": "Judd", "link": "https://stackoverflow.com/users/5666313/judd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 140, "favorite_count": 0, "answer_count": 2, "score": -2, "last_activity_date": 1472230067, "creation_date": 1472176388, "last_edit_date": 1472230067, "question_id": 39157237, "link": "https://stackoverflow.com/questions/39157237/perl-regex-back-reference-not-being-greedy", "title": "Perl regex back reference not being greedy", "body": "<p>This is a working regex:</p>\n\n<pre><code>/(ANSI|AAMVA) (\\d{6})(\\d{2})(\\d{2})(\\d{0,2})((?:DL)|(?:ID))+(.*?)\\g{-2}+([^\"]+)/\n</code></pre>\n\n<p>This is a sample string:</p>\n\n<pre><code>\"@\\n\\nANSI 6334290212DL00389199ZO04420478DLDAQ3572928\\nDAASMITH, JOHN DOE\\nDAG\\nDAL4389 NE 47TH AVE\\nDAIASHLAND\\nDAJOR\\nDAK97555      \\nDARC   \\nDASD         \\nDATM     \\nDAU504\\nDAW180\\nDBA12201212\\nDBB19780303\\n\"\n</code></pre>\n\n<p>I am trying to match a delimiter, either <code>DL</code> or <code>ID</code>, that may be in the string a second time.</p>\n\n<p>I want to match whichever of <code>DL</code> or <code>ID</code>matched previously.</p>\n\n<p>The problem is, if I use <code>?</code> to accomplish this it stops being greedy and prefers 0 matches.</p>\n\n<p>I'm stumped, am I missing something basic with how <code>?</code> operates?</p>\n\n<p>Edit: The problem isn't extracting the JSON data, it's parsing the msg bit, using JSON doesn't do anything to accomplish this. I trimmed the string to just the pertinent part.</p>\n\n<p>The fix by @hobbs works because it let's me change the <code>?</code> to a <code>+</code> and still match nothing, if nothing is there.</p>\n\n<p>Works! :)</p>\n\n<pre><code>/(ANSI|AAMVA) (\\d{6})(\\d{2})(\\d{2})(\\d{0,2})((?:DL)|(?:ID))+(.*?)(?:\\g{-2}|(?=\"))+([^\"]+)/\n</code></pre>\n"}, {"tags": ["perl"], "answers": [{"comments": [{"owner": {"reputation": 220, "user_id": 3295322, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/1a114d13f7cb21d6f699f5ac0b2de8a3?s=128&d=identicon&r=PG&f=1", "display_name": "YouHaveaBigEgo", "link": "https://stackoverflow.com/users/3295322/youhaveabigego"}, "edited": false, "score": 0, "creation_date": 1472167143, "post_id": 39156119, "comment_id": 65655751, "body": "Nice. Yes, I want it to run endlessly... thanks! I see my mistake now. Thank-you for shining the light."}, {"owner": {"reputation": 220, "user_id": 3295322, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/1a114d13f7cb21d6f699f5ac0b2de8a3?s=128&d=identicon&r=PG&f=1", "display_name": "YouHaveaBigEgo", "link": "https://stackoverflow.com/users/3295322/youhaveabigego"}, "edited": false, "score": 0, "creation_date": 1472191900, "post_id": 39156119, "comment_id": 65662153, "body": "Thanks,. I like the second update using map and join way better. It helps to learn those as well."}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": true, "score": 4, "last_activity_date": 1472170079, "last_edit_date": 1592644375, "creation_date": 1472166897, "answer_id": 39156119, "question_id": 39155987, "link": "https://stackoverflow.com/questions/39155987/unable-to-loop-back-when-using-natatime/39156119#39156119", "title": "Unable to loop back when using natatime", "body": "<p>There is no way to &quot;reset&quot; the iterator returned by <code>natatime</code>: you need to simply create a new iterator each time the outer <code>while</code> is executed</p>\n<p>And don't use <code>our</code> unless you have a very good reason to do so</p>\n<p>This version of your code should work, but beware that it will run endlessly as it stands because there is no exit from the outer <code>while</code></p>\n<pre><code>while () {\n\n    my $iter = List::MoreUtils::natatime(7, @attn_range);\n    \n    while ( my @vals = $iter-&gt;() ) {\n\n        for my $i ( 0 .. $#vals ) {\n            printf &quot;Port%d: %d, &quot;, $i, $vals[$i];\n            ...\n        }\n    }\n\n    print &quot;\\n&quot;;\n}\n</code></pre>\n<br/>\n<hr />\n<h3>Update</h3>\n<p>Now that I'm back at a proper keyboard I can offer something that I hope is more useful</p>\n<p>It's wasteful to create a seven-element iterator over and over again, and I would prefer to copy the data into an array of seven-element arrays</p>\n<p>This code shows the idea, and also uses <code>join</code> together with <code>map</code> to produce the output that you describe in your question. Each seven-item chunk is available within the <code>for</code> loop as <code>@$group</code>, and its elements are <code>$group-&gt;[0]</code> through to <code>$group-&gt;[6]</code></p>\n<pre><code>use strict;\nuse warnings 'all';\nuse feature 'say';\n\nmy @attn_range = (\n      0, 39, 21, 17, 62, 43, 62,\n      1, 40, 22, 16, 60, 41, 59,\n      2, 41, 23, 15, 58, 39, 56,\n      3, 42, 24, 14, 56, 37, 53,\n      4, 43, 25, 13, 54, 35, 50,\n      5, 44, 26, 12, 52, 33, 47,\n      6, 45, 27, 11, 50, 31, 44,\n      7, 46, 28, 10, 48, 29, 41,\n     62, 23, 33, 45, 62, 39, 59,\n);\n\nmy @groups;\n{\n    for ( my $i = 0; $i &lt; @attn_range; $i += 7 ) {\n        push @groups, [ @attn_range[ $i .. $i+6 ] ];\n    }\n}\n\nwhile () {\n\n    for my $group ( @groups ) {\n        say join ', ', map {\n            sprintf 'Port%d: %2d', $_, $group-&gt;[$_];\n        } 0 .. $#$group;\n    }\n\n    exit;  # For testing\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 1, "last_activity_date": 1472185724, "last_edit_date": 1472185724, "creation_date": 1472185035, "answer_id": 39158212, "question_id": 39155987, "link": "https://stackoverflow.com/questions/39155987/unable-to-loop-back-when-using-natatime/39158212#39158212", "title": "Unable to loop back when using natatime", "body": "<p>Unlike the solutions in the earlier answer, the following solutions don't require <code>@attn_range</code> to have a multiple of 7 elements:</p>\n\n<pre><code>sub make_cyclic_natatime {\n   my ($n, @list) = @_;\n   die if !@list;\n   my $i = -1;\n   return sub {\n       return map { $list[++$i % @list] } 1..$n;\n   };\n}\n\nmy $iter = make_cyclic_natatime(7, @attn_range);\nwhile (1) {\n    my @vals = $iter-&gt;();\n    say join ', ', map { \"Port$i: $vals[$i]\" } 0..$#vals;\n    select(undef, undef, undef, 0.100);\n}\n</code></pre>\n\n<p>Or just</p>\n\n<pre><code>die if !@attn_range;\nmy $i = -1;\nwhile (1) {\n    my @vals = map { $attn_range[++$i % @attn_range] } 1..7;\n    say join ', ', map { \"Port$i: $vals[$i]\" } 0..$#vals;\n    select(undef, undef, undef, 0.100);\n}\n</code></pre>\n\n<p>The downside is these solutions won't be as fast as the earlier answer's second solution.</p>\n"}], "owner": {"reputation": 220, "user_id": 3295322, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/1a114d13f7cb21d6f699f5ac0b2de8a3?s=128&d=identicon&r=PG&f=1", "display_name": "YouHaveaBigEgo", "link": "https://stackoverflow.com/users/3295322/youhaveabigego"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 117, "favorite_count": 1, "accepted_answer_id": 39156119, "answer_count": 2, "score": 1, "last_activity_date": 1472185724, "creation_date": 1472165899, "question_id": 39155987, "link": "https://stackoverflow.com/questions/39155987/unable-to-loop-back-when-using-natatime", "title": "Unable to loop back when using natatime", "body": "<p>I have a array from which I am taking 7 elements at a time, using the function <code>natatime</code> from <code>List::MoreUtils</code>. They are all positive integers between 0 and 62 in no specific order and are random.</p>\n\n<pre><code>my @attn_range = (0, 39, 21, 17, 62, 43, 62,\n                  1, 40, 22, 16, 60, 41, 59,\n                  2, 41, 23, 15, 58, 39, 56,\n                  3, 42, 24, 14, 56, 37, 53,\n                  4, 43, 25, 13, 54, 35, 50,\n                  5, 44, 26, 12, 52, 33, 47,\n                  6, 45, 27, 11, 50, 31, 44,\n                  7, 46, 28, 10, 48, 29, 41,\n                  ....                         \n                  62, 23, 33, 45, 62, 39, 59);\nour $it = List::MoreUtils::natatime(7, @attn_range);\nwhile (1) {\n    while (my @vals = $it-&gt;()){\n        for my $i (0 .. $#vals){\n            print \"Port$i: $vals[$i], \";\n        }\n        print \"\\n\";\n }\n</code></pre>\n\n<p>However, I was expecting to cycle through back from the top when the end of list is reached, but this method doesn't do that.</p>\n\n<p>Can you help me? I desire to loop back to the top at when the last 7 is read and printed inside my <code>while (1)</code> loop.</p>\n\n<p><em>(in my example I created an array <code>@attn_range</code> above, but in reality the values in my array are read from a .csv file and @attn_range array is very large and a multiple of 7. I used <code>natatime</code> because i found it to be easy, any way can be adopted to take 7 elements from my array.)</em></p>\n"}, {"tags": ["perl", "hash"], "comments": [{"owner": {"reputation": 987, "user_id": 1895544, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9810a079a08d263f69f513db10475659?s=128&d=identicon&r=PG", "display_name": "Philip Rollins", "link": "https://stackoverflow.com/users/1895544/philip-rollins"}, "edited": false, "score": 0, "creation_date": 1472161726, "post_id": 39155159, "comment_id": 65653952, "body": "<a href=\"http://stackoverflow.com/questions/13804351/assign-a-variable-and-check-existence-of-hash-key\" title=\"assign a variable and check existence of hash key\">stackoverflow.com/questions/13804351/&hellip;</a> ?"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1472172151, "post_id": 39155159, "comment_id": 65657026, "body": "White space \u2014 indentation and blank lines \u2014 is free of charge and will make your software much more convenient for you to visualise and debug. If you have to ask others to help you then it is only polite to make your code as readable as possible. In this instance I have done it for you."}, {"owner": {"reputation": 912, "user_id": 6507620, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/nI75J.jpg?s=128&g=1", "display_name": "Abhay Dixit", "link": "https://stackoverflow.com/users/6507620/abhay-dixit"}, "edited": false, "score": 1, "creation_date": 1472202689, "post_id": 39155159, "comment_id": 65668127, "body": "You must specify exists on a scalar $hash{key}"}, {"owner": {"reputation": 55, "user_id": 6759030, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cc18e91fdd884f9b3f60e758cc97b125?s=128&d=identicon&r=PG&f=1", "display_name": "Zoe", "link": "https://stackoverflow.com/users/6759030/zoe"}, "edited": false, "score": 0, "creation_date": 1475634559, "post_id": 39155159, "comment_id": 67016860, "body": "Thanks Borodin, apologies - this is the first time I have posted so was unsure of this etiquette."}], "answers": [{"comments": [{"owner": {"reputation": 55, "user_id": 6759030, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cc18e91fdd884f9b3f60e758cc97b125?s=128&d=identicon&r=PG&f=1", "display_name": "Zoe", "link": "https://stackoverflow.com/users/6759030/zoe"}, "edited": false, "score": 0, "creation_date": 1475634584, "post_id": 39155333, "comment_id": 67016867, "body": "Thanks Bjerre and Abhay!"}], "tags": [], "owner": {"reputation": 109, "user_id": 1538878, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/043f9f3d175e02989f90a8cea883741e?s=128&d=identicon&r=PG", "display_name": "bjerre", "link": "https://stackoverflow.com/users/1538878/bjerre"}, "is_accepted": false, "score": 9, "last_activity_date": 1472162091, "creation_date": 1472162091, "answer_id": 39155333, "question_id": 39155159, "link": "https://stackoverflow.com/questions/39155159/correct-use-of-perl-exists/39155333#39155333", "title": "Correct use of Perl &quot;exists&quot;", "body": "<p>The syntax of the following line is incorrect:</p>\n\n<pre><code>if (exists %hash1{$key}) { ... }\n</code></pre>\n\n<p>This should be:</p>\n\n<pre><code>if (exists $hash1{$key}) { ... }\n</code></pre>\n"}], "owner": {"reputation": 55, "user_id": 6759030, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cc18e91fdd884f9b3f60e758cc97b125?s=128&d=identicon&r=PG&f=1", "display_name": "Zoe", "link": "https://stackoverflow.com/users/6759030/zoe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 247, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1472171807, "creation_date": 1472161338, "last_edit_date": 1472171807, "question_id": 39155159, "link": "https://stackoverflow.com/questions/39155159/correct-use-of-perl-exists", "title": "Correct use of Perl &quot;exists&quot;", "body": "<p>I have two files. The first two columns in both are chromosome loci and genotypes, for instance <code>chr1:1736464585</code> and <code>T/G</code>.</p>\n\n<p>I have put the first two columns into a hash. I want to check whether the hash key (the chromosome locus) exists in the second file.</p>\n\n<p>I have written this Perl program and have tried many variations but I'm not sure if I'm using <code>exists</code> correctly: it gives the error <code>exists is not an HASH or ARRAY element or a subroutine</code>.</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\n\nmy $output = \"annotated.txt\";\nopen( O, \"&gt;&gt;$output\" );\n\nmy $filename  = \"datatest.txt\";\nmy $filename2 = \"MP2.txt\";\n\nchomp $filename;\nchomp $filename2;\n\nmy %hash1 = ();\n\nopen( FN1, $filename ) or die \"Can't open $filename: $!\";\nmy @lines = &lt;FN1&gt;;\n\nforeach my $line (@lines) {\n\n    my @split = split /\\t/, $line;\n\n    if ( $line =~ /^chr/ ) {\n\n        my ( $key, $value ) = ( $split[0], $split[1] );\n        $hash1{$key} = $value;\n    }\n}\n\nmy $DATA;\nopen( $DATA, $filename2 ) or die $!;\nmy @lines2 = &lt;$DATA&gt;;\n\nforeach my $line2 (@lines2) {\n\n    my @split2 = split /\\t/, $line2;\n\n    if ( $line2 =~ /^chr/ ) {\n\n        if ( exists %hash1{$key} ) {\n\n            print \"$line2\\n\";\n        }\n    }\n}\n</code></pre>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 1945, "user_id": 5669174, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XGSyr.jpg?s=128&g=1", "display_name": "Mike", "link": "https://stackoverflow.com/users/5669174/mike"}, "edited": false, "score": 0, "creation_date": 1472158738, "post_id": 39154130, "comment_id": 65652776, "body": "Where the pattern <code>BVN*...</code> in your code ?"}, {"owner": {"reputation": 107, "user_id": 2570205, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/3cd43bc2f446af96853b38898be3fa62?s=128&d=identicon&r=PG", "display_name": "user2570205", "link": "https://stackoverflow.com/users/2570205/user2570205"}, "reply_to_user": {"reputation": 1945, "user_id": 5669174, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XGSyr.jpg?s=128&g=1", "display_name": "Mike", "link": "https://stackoverflow.com/users/5669174/mike"}, "edited": false, "score": 0, "creation_date": 1472159940, "post_id": 39154130, "comment_id": 65653288, "body": "@Mike ERR_FILETYPE is a variable set in property files $ERR_FILETYPE = &quot;BVN*.fin.bc_lerr.xml.bc&quot;;"}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 1, "creation_date": 1472161411, "post_id": 39154130, "comment_id": 65653842, "body": "Be aware that if your <code>$ERR_STAGING</code> variable happens to contain any of the regex metacharacters <code>\\ | ( ) [ { ^ $ * + ? .</code> you may get unexpected behavior. I would recommend that you always quote regular expressions where you want to match literal strings, see <a href=\"http://perldoc.perl.org/functions/quotemeta.html\" rel=\"nofollow noreferrer\">quotemeta</a> for more information."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1472206554, "post_id": 39154130, "comment_id": 65670452, "body": "Rather than hacking away trying to turn a shellglob into a regex - as you seem to be - can I suggest that what you really need is <code>glob</code> instead?"}], "answers": [{"tags": [], "owner": {"reputation": 1945, "user_id": 5669174, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XGSyr.jpg?s=128&g=1", "display_name": "Mike", "link": "https://stackoverflow.com/users/5669174/mike"}, "is_accepted": true, "score": 1, "last_activity_date": 1472160675, "creation_date": 1472160675, "answer_id": 39155019, "question_id": 39154130, "link": "https://stackoverflow.com/questions/39154130/find-files-matching-pattern-in-the-file-array/39155019#39155019", "title": "Find files matching pattern in the file array", "body": "<p>Correct two rows:</p>\n\n<pre><code>$ERR_FILETYPE =~ s/\\*/.\\*/g;                      # Add DOT\n\n@file_type = grep /\\/$ERR_FILETYPE$/, @allfiles;  # such a filter is sufficient  \n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 107, "user_id": 2570205, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/3cd43bc2f446af96853b38898be3fa62?s=128&d=identicon&r=PG", "display_name": "user2570205", "link": "https://stackoverflow.com/users/2570205/user2570205"}, "edited": false, "score": 0, "creation_date": 1472222895, "post_id": 39163833, "comment_id": 65680470, "body": "This makes lot sense too."}], "tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": false, "score": 1, "last_activity_date": 1472206385, "creation_date": 1472206385, "answer_id": 39163833, "question_id": 39154130, "link": "https://stackoverflow.com/questions/39154130/find-files-matching-pattern-in-the-file-array/39163833#39163833", "title": "Find files matching pattern in the file array", "body": "<p>I'm going to suggest an alternative - you mention <code>'BVN*.fin.bc_lerr.xml.bc'</code> as a pattern. </p>\n\n<p>But that's not a regular expression (well, ok, it is - but I'm pretty sure you don't want 'zero or more <code>N</code>' you want 'anything after <code>BVN</code>). And you appear to be trying to convert it into a regex.</p>\n\n<p>That means you're actually looking a shell glob, not a regex. They're similar, but not the same. </p>\n\n<p>So can I suggest instead of <code>readdir</code> and <code>grep</code> that instead what you want is <a href=\"http://perldoc.perl.org/functions/glob.html\" rel=\"nofollow\"><code>glob</code></a>. </p>\n\n<p>Then you can:</p>\n\n<pre><code>my @files = glob ( '/path/to/BVN*.fin.bc_lerr.xml.bc' ); \n</code></pre>\n\n<p>... and that's it. It'll expand your pattern using <em>shell</em> logic, not <em>regex</em> logic - and then read <code>/path/to</code> to find files matching that. </p>\n\n<p>So in your example:</p>\n\n<pre><code>my @files = glob ( \"$ERR_STAGING/$ERR_FILETYPE\" ); \n</code></pre>\n"}], "owner": {"reputation": 107, "user_id": 2570205, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/3cd43bc2f446af96853b38898be3fa62?s=128&d=identicon&r=PG", "display_name": "user2570205", "link": "https://stackoverflow.com/users/2570205/user2570205"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 534, "favorite_count": 0, "accepted_answer_id": 39155019, "answer_count": 2, "score": 0, "last_activity_date": 1472206385, "creation_date": 1472156498, "question_id": 39154130, "link": "https://stackoverflow.com/questions/39154130/find-files-matching-pattern-in-the-file-array", "title": "Find files matching pattern in the file array", "body": "<p>I have code in perl as below. Trying pick files which matches the pattern.</p>\n\n<pre><code>opendir ERR_STAGING_DIR, \"$ERR_STAGING\" or die \"$PID: Cannot open directory $ERR_STAGING\";\n@allfiles = grep !/^$ERR_STAGING\\/\\./, map \"$ERR_STAGING/$_\", readdir(ERR_STAGING_DIR);\nclosedir(ERR_STAGING_DIR);\n\n$ERR_FILETYPE = basename ($ERR_FILETYPE);\n\n$ERR_FILETYPE =~ s/\\./\\\\\\./g;\n$ERR_FILETYPE =~ s/\\*/\\*/g;\n\n@file_type = grep /^$ERR_STAGING/./$ERR_FILETYPE$/, @allfiles;\n$numelements = @file_type;\nif ($numelements &lt;= 0) {\n    print LOG \"$PID: No files match specified pattern, exiting.\\n\";\n    &amp;HandlerDie($NO_FILE_TYPE, $current_poid);\n}\n</code></pre>\n\n<p>Here is what I'm doing above. Grep all files from ERR_STAGING directory. grep files matching pattern <code>'BVN*.fin.bc_lerr.xml.bc'</code> e.g <code>BVN_201608250000.fin.bc_lerr.xml.bc</code> and do something with the file. However the above code is returning files which doesn't match pattern too, it also pickup some temp directories.</p>\n"}, {"tags": ["perl", "awk", "sed"], "comments": [{"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 2, "creation_date": 1472150773, "post_id": 39152632, "comment_id": 65648776, "body": "Is it possible for any of the IDs to contain spaces?"}, {"owner": {"reputation": 937, "user_id": 2810362, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/3494457038ffb6c6144f1ee2727d225e?s=128&d=identicon&r=PG&f=1", "display_name": "Paul", "link": "https://stackoverflow.com/users/2810362/paul"}, "reply_to_user": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1472151059, "post_id": 39152632, "comment_id": 65648910, "body": "No they do not have spaces."}, {"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 1, "creation_date": 1472161129, "post_id": 39152632, "comment_id": 65653728, "body": "And what have you tried so far?"}], "answers": [{"comments": [{"owner": {"reputation": 18548, "user_id": 4082052, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GUNps.jpg?s=128&g=1", "display_name": "Sundeep", "link": "https://stackoverflow.com/users/4082052/sundeep"}, "edited": false, "score": 0, "creation_date": 1472184114, "post_id": 39152740, "comment_id": 65659680, "body": "assuming all IDs end with a number, <code>sed &#39;s&#47;\\([0-9]\\) &#47;\\1,&#47;g&#39; textfile</code>"}, {"owner": {"reputation": 96909, "user_id": 3030305, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/En2fP.png?s=128&g=1", "display_name": "John1024", "link": "https://stackoverflow.com/users/3030305/john1024"}, "reply_to_user": {"reputation": 18548, "user_id": 4082052, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GUNps.jpg?s=128&g=1", "display_name": "Sundeep", "link": "https://stackoverflow.com/users/4082052/sundeep"}, "edited": false, "score": 1, "creation_date": 1472190565, "post_id": 39152740, "comment_id": 65661542, "body": "@spasic That is also an interesting approach:  I just added it to the answer.  Thanks."}, {"owner": {"reputation": 31251, "user_id": 4162356, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/dGhuV.png?s=128&g=1", "display_name": "James Brown", "link": "https://stackoverflow.com/users/4162356/james-brown"}, "edited": false, "score": 1, "creation_date": 1472206186, "post_id": 39152740, "comment_id": 65670262, "body": "To make it a bit (well a byte) shorter: <code>sed &#39;s&#47;\\([^:]\\) &#47;\\1,&#47;g&#39; testfile</code>"}, {"owner": {"reputation": 96909, "user_id": 3030305, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/En2fP.png?s=128&g=1", "display_name": "John1024", "link": "https://stackoverflow.com/users/3030305/john1024"}, "reply_to_user": {"reputation": 31251, "user_id": 4162356, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/dGhuV.png?s=128&g=1", "display_name": "James Brown", "link": "https://stackoverflow.com/users/4162356/james-brown"}, "edited": false, "score": 0, "creation_date": 1472231486, "post_id": 39152740, "comment_id": 65685305, "body": "@JamesBrown Very good.  I added that to the answer also.  Thanks."}], "tags": [], "owner": {"reputation": 96909, "user_id": 3030305, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/En2fP.png?s=128&g=1", "display_name": "John1024", "link": "https://stackoverflow.com/users/3030305/john1024"}, "is_accepted": true, "score": 1, "last_activity_date": 1472231440, "last_edit_date": 1472231440, "creation_date": 1472151080, "answer_id": 39152740, "question_id": 39152632, "link": "https://stackoverflow.com/questions/39152632/adding-a-comma-in-the-text-file/39152740#39152740", "title": "adding a comma in the text file", "body": "<pre><code>$ sed 's/ /,/g; s/,/ /' textfile\ngroup1: 2010EL-1749,2010EL-1749_00001,3554-08,3554-08_01855,2010EL-1749_00002\ngroup2: 2010EL-1749,2010EL-1749_00002,3554-08,3554-08_01856,2010EL-1749_00001\ngroup7: 3554-08,2010EL-1749_00001,3554-08_01855\n</code></pre>\n\n<p>This works by changing all spaces to commas: <code>s/ /,/g</code>.  It then changes the first comma back to a space: <code>s/,/ /</code>.</p>\n\n<p><code>s/,/ /</code> is an example of a <em>substitute</em> command.  The form is <code>s/old/new/</code> where <code>old</code> is a <em>regular expression</em> and the first match for <code>old</code> is replaced with <code>new</code>.  If we add a <code>g</code> to the end of the command, like <code>s/ /,/g</code>, then not just the first is replaced: all non-overlapping matches are replaced.</p>\n\n<p>This approach assumes that no ID contains a space and no group name contains a comma.</p>\n\n<p>To change the file in place:</p>\n\n<pre><code>sed -i.bak 's/ /,/g; s/,/ /' textfile\n</code></pre>\n\n<h3>Alternatives</h3>\n\n<p>As suggested by sp asic in the comments, if we can assume that all IDs end with a number, then:</p>\n\n<pre><code>sed 's/\\([0-9]\\) /\\1,/g' textfile\n</code></pre>\n\n<p>Or, if instead we can assume that only groups, not IDs, end with a colon (Hat tip: James Brown):</p>\n\n<pre><code>sed 's/\\([^:]\\) /\\1,/g' testfile\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 31251, "user_id": 4162356, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/dGhuV.png?s=128&g=1", "display_name": "James Brown", "link": "https://stackoverflow.com/users/4162356/james-brown"}, "is_accepted": false, "score": 2, "last_activity_date": 1472206419, "last_edit_date": 1472206419, "creation_date": 1472205189, "answer_id": 39163465, "question_id": 39152632, "link": "https://stackoverflow.com/questions/39152632/adding-a-comma-in-the-text-file/39163465#39163465", "title": "adding a comma in the text file", "body": "<p>In AWK, replace all spaces with commas and then the first comma back to space:</p>\n\n<p><code>awk 'gsub(/ /,\",\") &amp;&amp; sub(/,/,\" \")' testfile</code></p>\n\n<p>or using <code>gensub</code>:</p>\n\n<p><code>awk '$0=gensub(/([^:]) /,\"\\\\1,\",\"g\")' testfile</code></p>\n"}], "owner": {"reputation": 937, "user_id": 2810362, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/3494457038ffb6c6144f1ee2727d225e?s=128&d=identicon&r=PG&f=1", "display_name": "Paul", "link": "https://stackoverflow.com/users/2810362/paul"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 90, "favorite_count": 0, "accepted_answer_id": 39152740, "answer_count": 2, "score": -3, "last_activity_date": 1472231440, "creation_date": 1472150684, "question_id": 39152632, "link": "https://stackoverflow.com/questions/39152632/adding-a-comma-in-the-text-file", "title": "adding a comma in the text file", "body": "<p>I have a text file in the following format</p>\n\n<pre><code>group1: 2010EL-1749 2010EL-1749_00001 3554-08 3554-08_01855 2010EL-1749_00002\ngroup2: 2010EL-1749 2010EL-1749_00002 3554-08 3554-08_01856 2010EL-1749_00001\ngroup7: 3554-08 2010EL-1749_00001 3554-08_01855\n</code></pre>\n\n<p>And would like to add a comma in between the ids as shown below</p>\n\n<pre><code>group1: 2010EL-1749,2010EL-1749_00001,3554-08,3554-08_01855,2010EL-1749_00002\ngroup2: 2010EL-1749,2010EL-1749_00002,3554-08,3554-08_01856,2010EL-1749_00001\ngroup7: 3554-08,2010EL-1749_00001,3554-08_01855\n</code></pre>\n"}, {"tags": ["perl", "parsing", "iteration"], "comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1472147988, "post_id": 39151671, "comment_id": 65647297, "body": "So what is your problem with this?  Are you asking us to write the script for you?"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1472148151, "post_id": 39151671, "comment_id": 65647402, "body": "I don&#39;t know what you imagine Stack Overflow to be, but it is certainly not a resource where you can post a requirement and a free solution pops out. Away with you."}, {"owner": {"reputation": 881, "user_id": 2888846, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/0b972b7482afdf07dfd240400f61a13a?s=128&d=identicon&r=PG&f=1", "display_name": "Aaron Perry", "link": "https://stackoverflow.com/users/2888846/aaron-perry"}, "edited": false, "score": 0, "creation_date": 1472160026, "post_id": 39151671, "comment_id": 65653319, "body": "Thank you both for your warm and welcoming responses, they are appreciated. I am brand new to perl. I have only come to ask questions that I have not found the answers to. Hardly asking for &quot;free solutions&quot; or for people to write my scripts for me. Also, being courteous is a virtue."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1472202027, "post_id": 39151671, "comment_id": 65667692, "body": "You are welcome -- I hope that you get to appreciate them. We did bother to read, think, and write in order to respond to your post. Your question <i>does</i> in fact ask for someone to write the script for you, from scratch. You say &quot;<i>Using perl, I&#39;m trying to ...</i>&quot; while you have not shown either."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1472202222, "post_id": 39151671, "comment_id": 65667813, "body": "If &quot;<i>brand new to Perl</i>&quot; means that you don&#39;t know any then I&#39;d suggest to start there -- learn and ask when you get stuck. Otherwise, it seems that you&#39;ve been around here enough to know what is expected of a question. So please show us some of that courtesy you mention -- do your best for your problem and put some effort into posting a good question. You are asking for help after all."}, {"owner": {"reputation": 930, "user_id": 6594367, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/03c046cae270605c2376680482e52f6d?s=128&d=identicon&r=PG&f=1", "display_name": "John Doe", "link": "https://stackoverflow.com/users/6594367/john-doe"}, "edited": false, "score": 0, "creation_date": 1472202986, "post_id": 39151671, "comment_id": 65668273, "body": "How big is your file?"}], "answers": [{"tags": [], "owner": {"reputation": 42833, "user_id": 18914, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7a20a39ae2ef47ae042a3eddd5b5bd19?s=128&d=identicon&r=PG", "display_name": "Dave Sherohman", "link": "https://stackoverflow.com/users/18914/dave-sherohman"}, "is_accepted": true, "score": 3, "last_activity_date": 1472201652, "creation_date": 1472201652, "answer_id": 39162250, "question_id": 39151671, "link": "https://stackoverflow.com/questions/39151671/iteration-to-match-line-patterns-from-text-file-and-then-parse-out-n-lines/39162250#39162250", "title": "Iteration to Match Line Patterns from Text File and Then Parse out N Lines", "body": "<p>Based on your comment in response to zdim and Borodin, it appears that you're asking for pointers on how to do this with Perl rather than actual working code, so I am answering on that basis.</p>\n\n<p>What you describe in the \"logic\" portion of your question is extremely simple and straightforward to do in Perl - the actual code would be far shorter than this description of it:</p>\n\n<ul>\n<li>Start your program with <code>use strict; use warnings;</code> - this will catch most common errors and make debugging <em>vastly</em> easier!</li>\n<li>Open your input file for reading (<code>open(my $fh, '&lt;', $file_name) or die \"Failed to open $file_name: $!\"</code>)</li>\n<li>Read in each line of the file (<code>my $line = &lt;$fh&gt;;</code>)</li>\n<li>Optionally use <code>chomp</code> to remove line endings</li>\n<li>Use <code>split</code> to break the line into fields (<code>my @column = split /,/, $line;</code>)</li>\n<li>Check the values of the first and third fields (note that arrays start counting from 0, not from 1, so these will be <code>$column[1]</code> and <code>$column[2]</code> rather than <code>2</code> and <code>3</code>)</li>\n<li>If the field values match your criteria, set a counter to 4 (the total number of lines to output)</li>\n<li>If the counter is greater than zero, output the original <code>$line</code> and decrement the counter</li>\n<li>The logic mentions \"new files\" but does not specify when a new output file should be created and when output should continue to be sent to the same file.  Since this was not specified, I have ignored it and described all output going to a single destination.</li>\n</ul>\n\n<p>Note, however, that your sample desired output does not match the described logic.  According to the specified logic, the output should include the first seven lines of your example data, but not the final line (because none of the three lines preceding it include \"e01\").</p>\n\n<p>So.  Take this information, along with whatever you may already know about Perl, and try to write a solution.  If you reach a point where you can't figure out how to make any further progress, post a new question (or update this one) containing a copy of your code and input data, so that we can run it ourselves, and a description of how it fails to work properly, then we'll be much more able to help you with that information (and more people will be willing to help if you can show that you made an effort to do it yourself first).</p>\n"}], "owner": {"reputation": 881, "user_id": 2888846, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/0b972b7482afdf07dfd240400f61a13a?s=128&d=identicon&r=PG&f=1", "display_name": "Aaron Perry", "link": "https://stackoverflow.com/users/2888846/aaron-perry"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 91, "favorite_count": 1, "accepted_answer_id": 39162250, "answer_count": 1, "score": -2, "last_activity_date": 1472201652, "creation_date": 1472147099, "last_edit_date": 1472148231, "question_id": 39151671, "link": "https://stackoverflow.com/questions/39151671/iteration-to-match-line-patterns-from-text-file-and-then-parse-out-n-lines", "title": "Iteration to Match Line Patterns from Text File and Then Parse out N Lines", "body": "\n\n<p>I have a text file that contains three columns. Using <code>perl</code>, I'm trying to loop through the text file and search for a particular pattern...</p>\n\n<p><strong>Logic:</strong> <code>IF column2 = 00z24aug2016 &amp; column3 = e01</code>. When this pattern is matched I need to parse out the matched line and then the next <code>3</code> lines. to new files.</p>\n\n<p><strong>Text File:</strong></p>\n\n<pre class=\"lang-none prettyprint-override\"><code>site1,00z24aug2016,e01\nsite1,00z24aug2016,e01\nsite1,00z24aug2016,e01\nsite1,00z24aug2016,e01\nsite2,00z24aug2016,e02\nsite2,00z24aug2016,e02\nsite2,00z24aug2016,e02\nsite2,00z24aug2016,e02\n</code></pre>\n\n<p><strong>Desired Output...</strong></p>\n\n<p><strong>New File 1:</strong></p>\n\n<pre class=\"lang-none prettyprint-override\"><code>site1,00z24aug2016,e01\nsite1,00z24aug2016,e01\nsite1,00z24aug2016,e01\nsite1,00z24aug2016,e01\n</code></pre>\n\n<p><strong>New File 2:</strong></p>\n\n<pre class=\"lang-none prettyprint-override\"><code>site2,00z24aug2016,e02\nsite2,00z24aug2016,e02\nsite2,00z24aug2016,e02\nsite2,00z24aug2016,e02\n</code></pre>\n"}, {"tags": ["perl", "log4perl"], "comments": [{"owner": {"reputation": 2465, "user_id": 302249, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/38c467a8b11ef0dde2bc97919502a047?s=128&d=identicon&r=PG", "display_name": "Dan Walmsley", "link": "https://stackoverflow.com/users/302249/dan-walmsley"}, "edited": false, "score": 0, "creation_date": 1472168457, "post_id": 39151483, "comment_id": 65656135, "body": "Please show all the code <a href=\"http://stackoverflow.com/help/mcve\">stackoverflow.com/help/mcve</a>. Things get a little mysterious as you have shown so little.   One issue is that you are using info but only showing errors in your config."}], "answers": [{"tags": [], "owner": {"reputation": 2465, "user_id": 302249, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/38c467a8b11ef0dde2bc97919502a047?s=128&d=identicon&r=PG", "display_name": "Dan Walmsley", "link": "https://stackoverflow.com/users/302249/dan-walmsley"}, "is_accepted": false, "score": 0, "last_activity_date": 1472168588, "creation_date": 1472168588, "answer_id": 39156353, "question_id": 39151483, "link": "https://stackoverflow.com/questions/39151483/log4perl-missing-init/39156353#39156353", "title": "Log4perl missing init", "body": "<p>Your example lacks enough detail for me to understand what is going on. </p>\n\n<p>But here is an example that works. </p>\n\n<pre><code>use strict;\nuse warnings;\nuse Log::Log4perl;\n\n\nmy $conf = q(\n          log4perl.rootLogger = ERROR, LOGFILE   \n          log4perl.appender.LOGFILE.filename = /tmp/Application.log\n          log4perl.appender.LOGFILE = Log::Log4perl::Appender::File\n          log4perl.appender.LOGFILE.mode = write  \n          log4perl.appender.LOGFILE.layout = PatternLayout\n          log4perl.appender.LOGFILE.layout.ConversionPattern = [%r] %F %L %c - %m%n\n          );\nLog::Log4perl-&gt;init(\\$conf);\n\nmy $logger = Log::Log4perl-&gt;get_logger(\"Hotels\");\n\n$logger-&gt;error(\"test\");\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 6758213, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f84af2be525233828ca7e60175a0897c?s=128&d=identicon&r=PG&f=1", "display_name": "kdjantzen", "link": "https://stackoverflow.com/users/6758213/kdjantzen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1496, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1472168588, "creation_date": 1472146477, "question_id": 39151483, "link": "https://stackoverflow.com/questions/39151483/log4perl-missing-init", "title": "Log4perl missing init", "body": "<p>I wrote a class A where I define and initialize a rootlogger</p>\n\n<pre><code>my $conf = q(\n          log4perl.rootLogger = ERROR, LOGFILE   \n          log4perl.appender.LOGFILE.filename = /var/log/Application.log\n          log4perl.appender.LOGFILE = Log::Log4perl::Appender::File\n          log4perl.appender.LOGFILE.mode = write  \n          log4perl.appender.LOGFILE.layout = PatternLayout\n          log4perl.appender.LOGFILE.layout.ConversionPattern = [%r] %F %L %c - %m%n\n          );\nLog::Log4perl-&gt;init(\\$conf);\n</code></pre>\n\n<p>In a subclass of A I want to use this logger</p>\n\n<pre><code>$self-&gt;LOG(Log::Log4perl-&gt;get_logger(\"Hotels\"));\n$self-&gt;LOG()-&gt;info(\"Starting 'Hotels'\");\n</code></pre>\n\n<p>When running the application I get the message</p>\n\n<p>Log4perl: Seems like no initialization happened. Forgot to call init()?</p>\n\n<p>Why is the init not recognized?</p>\n\n<p>K.D.J.</p>\n"}, {"tags": ["perl", "if-statement"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1472145819, "post_id": 39151074, "comment_id": 65646071, "body": "Every line matches <code>&#47;\\R&#47;</code>, so <code>print if &#47;A[.] &#47;..&#47;\\R&#47;;</code> is the same as <code>print if &#47;A[.] &#47;;</code>"}, {"owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 0, "creation_date": 1472146387, "post_id": 39151074, "comment_id": 65646366, "body": "Only after using <code>perl -MO=Deparse -ne &#39;print if &#47;A[.] &#47;..&#47;\\R&#47;&#39;</code> I figured out what your code actually does: it prints every line between lines that match <code>&#47;A[.] &#47;</code> and lines that match <code>&#47;\\R&#47;</code> (a generic newline). Not sure whether you used the flip-flop operator (<code>..</code>) intentionally."}, {"owner": {"reputation": 49, "user_id": 6672948, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/3J891.png?s=128&g=1", "display_name": "Matt", "link": "https://stackoverflow.com/users/6672948/matt"}, "edited": false, "score": 0, "creation_date": 1472149982, "post_id": 39151074, "comment_id": 65648358, "body": "<code>perl -nle &#39;print if &#47;A[.] (.*)&#47;&#39; test.txt &gt; test2.txt</code> produces the same result as the command i provided in the example, but the output is still not ending at the end of the line when a hyphen is present."}], "answers": [{"comments": [{"owner": {"reputation": 49, "user_id": 6672948, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/3J891.png?s=128&g=1", "display_name": "Matt", "link": "https://stackoverflow.com/users/6672948/matt"}, "edited": false, "score": 0, "creation_date": 1472149930, "post_id": 39151292, "comment_id": 65648332, "body": "<code>perl -nle &#39;print if &#47;A[.] (.*)&#47;&#39; test.txt &gt; test2.txt</code> produces the same result as the command i provided in the example, but the output is still not ending at the end of the line when a hyphen is present."}, {"owner": {"reputation": 49, "user_id": 6672948, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/3J891.png?s=128&g=1", "display_name": "Matt", "link": "https://stackoverflow.com/users/6672948/matt"}, "edited": false, "score": 0, "creation_date": 1472150807, "post_id": 39151292, "comment_id": 65648791, "body": "your suggestion: <code>perl -ne&#39;print &#47;A[.] (.*)&#47;s&#39; test.txt &gt; test2.txt</code> does not solve the hyphen problem and produces a badly formatted output compared to my original command."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 49, "user_id": 6672948, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/3J891.png?s=128&g=1", "display_name": "Matt", "link": "https://stackoverflow.com/users/6672948/matt"}, "edited": false, "score": 0, "creation_date": 1472151264, "post_id": 39151292, "comment_id": 65649005, "body": "That&#39;s not true, as the answer now demonstrates."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 49, "user_id": 6672948, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/3J891.png?s=128&g=1", "display_name": "Matt", "link": "https://stackoverflow.com/users/6672948/matt"}, "edited": false, "score": 0, "creation_date": 1472151425, "post_id": 39151292, "comment_id": 65649076, "body": "The solutions I provided will only print <code>-rw-r-----, -r--------B. -rw-r--r--, -r--r--r--C. -rw-r--r--, -r--------D. -rw-r--rw-, -r-----r--E. -rw-------, -r--------: C</code> if that&#39;s the rest of the line, and you said you wanted to print the rest of the line."}, {"owner": {"reputation": 49, "user_id": 6672948, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/3J891.png?s=128&g=1", "display_name": "Matt", "link": "https://stackoverflow.com/users/6672948/matt"}, "edited": false, "score": 0, "creation_date": 1472154579, "post_id": 39151292, "comment_id": 65650629, "body": "The string had been converted to one line earlier in my script. Thank you."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 49, "user_id": 6672948, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/3J891.png?s=128&g=1", "display_name": "Matt", "link": "https://stackoverflow.com/users/6672948/matt"}, "edited": false, "score": 0, "creation_date": 1472158494, "post_id": 39151292, "comment_id": 65652642, "body": "@Matthew L. Abrasax, If A, B, C, D, E are not found anywhere else, it&#39;s super easy to fix. <code>perl -pe&#39;s&#47;(?=[A-E])&#47;\\n&#47;g&#39;</code>"}, {"owner": {"reputation": 49, "user_id": 6672948, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/3J891.png?s=128&g=1", "display_name": "Matt", "link": "https://stackoverflow.com/users/6672948/matt"}, "edited": false, "score": 0, "creation_date": 1472212004, "post_id": 39151292, "comment_id": 65673375, "body": "Thanks @ikegami. I used <code>pdftotext -layout</code> to print the lines individually."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 0, "last_activity_date": 1472151656, "last_edit_date": 1472151656, "creation_date": 1472145869, "answer_id": 39151292, "question_id": 39151074, "link": "https://stackoverflow.com/questions/39151074/grab-text-between-identifiers-while-escaping-a-hyphen-in-perl/39151292#39151292", "title": "Grab text between identifiers while escaping a hyphen &quot;-&quot; in perl", "body": "<p>I think you're looking for</p>\n\n<pre><code>perl -nle'print $1 if /A[.] (.*)/'\n</code></pre>\n\n<p>You could also use</p>\n\n<pre><code>perl -ne'print /A[.] (.*)/s'\n</code></pre>\n\n<p>or</p>\n\n<pre><code>perl -ne'print if s/^(.*?)A[.] //'\n</code></pre>\n\n<hr>\n\n<pre><code>$ cat test.txt\nA. -rw-r-----, -r--------\nB. -rw-r-----, -r------w-\nC. -rw-r-----, -r------x-\nA. -rw-r-----, -r------y-\nD. -rw-r-----, -r------z-\n\n$ perl -nle'print $1 if /A[.] (.*)/' test.txt\n-rw-r-----, -r--------\n-rw-r-----, -r------y-\n\n$ perl -ne'print /A[.] (.*)/s' test.txt\n-rw-r-----, -r--------\n-rw-r-----, -r------y-\n\n$ perl -ne'print if s/^(.*?)A[.] //' test.txt\n-rw-r-----, -r--------\n-rw-r-----, -r------y-\n</code></pre>\n"}], "owner": {"reputation": 49, "user_id": 6672948, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/3J891.png?s=128&g=1", "display_name": "Matt", "link": "https://stackoverflow.com/users/6672948/matt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 56, "favorite_count": 0, "accepted_answer_id": 39151292, "answer_count": 1, "score": -1, "last_activity_date": 1472151656, "creation_date": 1472144977, "last_edit_date": 1472151364, "question_id": 39151074, "link": "https://stackoverflow.com/questions/39151074/grab-text-between-identifiers-while-escaping-a-hyphen-in-perl", "title": "Grab text between identifiers while escaping a hyphen &quot;-&quot; in perl", "body": "<p>I'm attempting to grab the text of a line after the \"A. \" until the end of the line. I've tried:</p>\n\n<pre><code>perl -ne 'print if /A[.] /../\\R/' test.txt &gt; test2.txt\n</code></pre>\n\n<p>Where I thought the \"\\R\" would match the end of a line. However when the line contains a hyphen \"-\", the output does not stop at the end of the line, instead prints the next lines until the hyphens stop.  </p>\n\n<p>An example line from <strong>test.txt</strong> that fails is as follows:</p>\n\n<pre><code>A. -rw-r-----, -r--------\n</code></pre>\n\n<p>The intended <strong>test2.txt</strong> output is:</p>\n\n<pre><code>-rw-r-----, -r--------\n</code></pre>\n\n<p>I'm getting the following bad output:</p>\n\n<pre><code>-rw-r-----, -r--------B. -rw-r--r--, -r--r--r--C. -rw-r--r--, -r--------D. -rw-r--rw-, -r-----r--E. -rw-------, -r--------: C\n</code></pre>\n\n<p>The following: </p>\n\n<p><code>perl -nle 'print if /A[.] (.*)/' test.txt &gt; test2.txt</code> produces the same result as the command i provided above, but the output is still not ending at the end of the line when a hyphen is present.</p>\n"}, {"tags": ["perl", "zip", "archive"], "comments": [{"owner": {"reputation": 930, "user_id": 6594367, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/03c046cae270605c2376680482e52f6d?s=128&d=identicon&r=PG&f=1", "display_name": "John Doe", "link": "https://stackoverflow.com/users/6594367/john-doe"}, "edited": false, "score": 0, "creation_date": 1472197466, "post_id": 39150748, "comment_id": 65665166, "body": "Take a look at this <a href=\"https://www.example-code.com/perl/zip_appendFilesToExistingZip.asp\" rel=\"nofollow noreferrer\">link</a>, it may have what you need."}, {"owner": {"reputation": 930, "user_id": 6594367, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/03c046cae270605c2376680482e52f6d?s=128&d=identicon&r=PG&f=1", "display_name": "John Doe", "link": "https://stackoverflow.com/users/6594367/john-doe"}, "edited": false, "score": 0, "creation_date": 1472197712, "post_id": 39150748, "comment_id": 65665300, "body": "Also you can use the <code>$zip-&gt;addMember( $member )</code>"}], "answers": [{"comments": [{"owner": {"reputation": 1270, "user_id": 3174311, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/b1f9e368ac7b3e1e8a983683cf305edc?s=128&d=identicon&r=PG&f=1", "display_name": "user3174311", "link": "https://stackoverflow.com/users/3174311/user3174311"}, "edited": false, "score": 0, "creation_date": 1472308324, "post_id": 39161104, "comment_id": 65705938, "body": "sorry if I wasn&#39;t clear enough, I want to add file to an existing zip file."}, {"owner": {"reputation": 930, "user_id": 6594367, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/03c046cae270605c2376680482e52f6d?s=128&d=identicon&r=PG&f=1", "display_name": "John Doe", "link": "https://stackoverflow.com/users/6594367/john-doe"}, "reply_to_user": {"reputation": 1270, "user_id": 3174311, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/b1f9e368ac7b3e1e8a983683cf305edc?s=128&d=identicon&r=PG&f=1", "display_name": "user3174311", "link": "https://stackoverflow.com/users/3174311/user3174311"}, "edited": false, "score": 1, "creation_date": 1472464056, "post_id": 39161104, "comment_id": 65745555, "body": "ok, I added a solution for the second case, if it does fix your problem, please accept it as an answer"}], "tags": [], "owner": {"reputation": 930, "user_id": 6594367, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/03c046cae270605c2376680482e52f6d?s=128&d=identicon&r=PG&f=1", "display_name": "John Doe", "link": "https://stackoverflow.com/users/6594367/john-doe"}, "is_accepted": true, "score": 3, "last_activity_date": 1472464024, "last_edit_date": 1472464024, "creation_date": 1472197843, "answer_id": 39161104, "question_id": 39150748, "link": "https://stackoverflow.com/questions/39150748/how-to-add-a-file-to-an-archive-using-perl-archivezip/39161104#39161104", "title": "How to add a file to an archive using perl Archive::Zip?", "body": "<pre><code>use strict;\nuse warnings;\nuse Archive::Zip;\n\nmy $zip = Archive::Zip-&gt;new();\n#create your archive\nmy $member = #\"file you want to add to archive\";\n$zip-&gt;addMember( $member );\n</code></pre>\n\n<p>If you don't create your zip inside your script, then just \"read\" it and add your file...<br></p>\n\n<pre><code>use warnings;\n\nuse strict;\n\nuse Archive::Zip qw( :ERROR_CODES );\n\nmy $zip = Archive::Zip-&gt;new();\n\n$zip-&gt;read('c:\\users\\user\\desktop\\test.zip') == AZ_OK or die \"read error\\n\";\n\n$zip-&gt;addFile('test.pl');\n\n$zip-&gt;overwrite()     == AZ_OK or die \"write error\\n\";\n</code></pre>\n"}], "owner": {"reputation": 1270, "user_id": 3174311, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/b1f9e368ac7b3e1e8a983683cf305edc?s=128&d=identicon&r=PG&f=1", "display_name": "user3174311", "link": "https://stackoverflow.com/users/3174311/user3174311"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1282, "favorite_count": 0, "accepted_answer_id": 39161104, "answer_count": 1, "score": 2, "last_activity_date": 1472464024, "creation_date": 1472143765, "question_id": 39150748, "link": "https://stackoverflow.com/questions/39150748/how-to-add-a-file-to-an-archive-using-perl-archivezip", "title": "How to add a file to an archive using perl Archive::Zip?", "body": "<p>I am using Archive::Zip to create archive files, I'd like to know if I can add a file to an already existing archive? looks like every time I call ->writeToFileNamed the file is truncated...</p>\n"}, {"tags": ["perl", "debugging"], "answers": [{"tags": [], "owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "is_accepted": true, "score": 9, "last_activity_date": 1472141384, "last_edit_date": 1592644375, "creation_date": 1472139228, "answer_id": 39149322, "question_id": 39148894, "link": "https://stackoverflow.com/questions/39148894/how-to-run-x-command-within-a-action-in-the-perl-debugger/39149322#39149322", "title": "How to run `x` command within a &lt; action in the perl debugger?", "body": "<p>See the documentation for <code>&lt; [command]</code> in <a href=\"http://perldoc.perl.org/perldebug.html#%3C-%5B-command-%5D\" rel=\"noreferrer\">perldebug</a>:</p>\n<blockquote>\n<p><strong>&lt; [ command ]</strong></p>\n<p>Set an action (Perl command) to happen before every debugger prompt.</p>\n</blockquote>\n<p><code>x</code> is not a Perl command. You want <code>{ [command]</code>:</p>\n<blockquote>\n<p><strong>{ [ command ]</strong></p>\n<p>Set an action (debugger command) to happen before every debugger prompt.</p>\n</blockquote>\n<p>For example:</p>\n<pre class=\"lang-none prettyprint-override\"><code>$ perl -de'$foo = { foo =&gt; &quot;bar&quot; };\n           print $foo'\n\nLoading DB routines from perl5db.pl version 1.37\nEditor support available.\n\nEnter h or 'h h' for help, or 'man perldebug' for more help.\n\nmain::(-e:1):   $foo = { foo =&gt; &quot;bar&quot; };\n  DB&lt;1&gt; { x $foo\n  DB&lt;2&gt; n\nmain::(-e:2):   print $foo\nauto(-1)  DB&lt;2&gt; x $foo\n0  HASH(0x22af2c8)\n   'foo' =&gt; 'bar'\n</code></pre>\n<p>Alternatively, use your favorite dumper module (e.g. <a href=\"https://metacpan.org/pod/Data::Dumper\" rel=\"noreferrer\">Data::Dumper</a>, <a href=\"https://metacpan.org/pod/Data::Dump\" rel=\"noreferrer\">Data::Dump</a>, <a href=\"https://metacpan.org/pod/Data::Printer\" rel=\"noreferrer\">Data::Printer</a>):</p>\n<pre class=\"lang-none prettyprint-override\"><code>$ perl -de'$foo = { foo =&gt; &quot;bar&quot; };\n           print $foo'\n\nLoading DB routines from perl5db.pl version 1.37\nEditor support available.\n\nEnter h or 'h h' for help, or 'man perldebug' for more help.\n\nmain::(-e:1):   $foo = { foo =&gt; &quot;bar&quot; };\n  DB&lt;1&gt; use Data::Dumper\n\n  DB&lt;2&gt; &lt; print Dumper $foo\n  DB&lt;3&gt; n\nmain::(-e:2):   print $foo\n$VAR1 = {\n          'foo' =&gt; 'bar'\n        };\n</code></pre>\n"}], "owner": {"reputation": 8353, "user_id": 1366368, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/9CxXt.jpg?s=128&g=1", "display_name": "Adrian", "link": "https://stackoverflow.com/users/1366368/adrian"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 94, "favorite_count": 0, "accepted_answer_id": 39149322, "answer_count": 1, "score": 4, "last_activity_date": 1472141384, "creation_date": 1472137917, "question_id": 39148894, "link": "https://stackoverflow.com/questions/39148894/how-to-run-x-command-within-a-action-in-the-perl-debugger", "title": "How to run `x` command within a &lt; action in the perl debugger?", "body": "<p>I'd like to get a semicomplex structure to be output before displaying the prompt in the debugger.  The best way to display it is to use the <code>x</code> command, but the command isn't available under that name or perhaps it's not in scope.</p>\n\n<p>How would I accomplish this?</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 1532, "user_id": 791908, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tmGC4.jpg?s=128&g=1", "display_name": "Drav Sloan", "link": "https://stackoverflow.com/users/791908/drav-sloan"}, "edited": false, "score": 0, "creation_date": 1472133330, "post_id": 39146924, "comment_id": 65638208, "body": "<code>&lt;</code> causes the shell to redirect the contents of <code>1.txt</code> to <code>STDIN</code> for the command <code>print.pl</code> and pass <code>2.txt</code> as the only element in <code>@ARGV</code>"}, {"owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 1, "creation_date": 1472133824, "post_id": 39146924, "comment_id": 65638538, "body": "Is <code>&lt;1.txt</code> really the filename? Including the leading <code>&lt;</code>? Or do you want to call <code>print.pl</code> with one file that comes from stdin and another one that is given as a filename?"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 1, "creation_date": 1472136061, "post_id": 39146924, "comment_id": 65640092, "body": "And this is one reason why you <i>always</i> use a 3 arg open!"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1472138246, "post_id": 39146924, "comment_id": 65641502, "body": "It is very difficult to understand what you&#39;re asking. Please at least show your Perl code."}, {"owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 0, "creation_date": 1472139490, "post_id": 39146924, "comment_id": 65642270, "body": "If your filename is really <code>1.txt</code> and you pipe its content into <code>print.pl</code> by means of shell metacharacter <code>&lt;</code>, then there&#39;s no way. Your script cannot figure out where that input comes from \u2013 it&#39;s just the script&#39;s STDIN."}], "answers": [{"tags": [], "owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "is_accepted": true, "score": -1, "last_activity_date": 1472133330, "creation_date": 1472133330, "answer_id": 39147287, "question_id": 39146924, "link": "https://stackoverflow.com/questions/39146924/perl-finding-input-file/39147287#39147287", "title": "Perl finding input file", "body": "<p>If you really have a file name that starts with <code>&lt;</code>, put the filename in quotes when you send it in as an argument.</p>\n\n<p>This prints just the file name:</p>\n\n<pre><code>perl -E 'say $ARGV[0]' \"&lt;1.txt\"\n&lt;1.txt\n</code></pre>\n\n<p>This small script prints out the file's contents:</p>\n\n<pre><code>use warnings;\nuse strict;\n\nfor (@ARGV){\n    open my $fh, '&lt;', $_ or die $!;\n    print &lt;$fh&gt;;\n}\n</code></pre>\n\n<p>Example:</p>\n\n<pre><code>perl script.pl \"&lt;1.txt\"\na\nb\nc\n</code></pre>\n"}], "owner": {"reputation": 5, "user_id": 6702987, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eda6e84abaea46dec307fe11a84a0a69?s=128&d=identicon&r=PG&f=1", "display_name": "FrostL", "link": "https://stackoverflow.com/users/6702987/frostl"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 62, "favorite_count": 0, "accepted_answer_id": 39147287, "answer_count": 1, "score": -1, "last_activity_date": 1472138156, "creation_date": 1472132335, "last_edit_date": 1472138156, "question_id": 39146924, "link": "https://stackoverflow.com/questions/39146924/perl-finding-input-file", "title": "Perl finding input file", "body": "<p>In perl I need to print all the chosen files:</p>\n\n<pre><code>./print.pl 1.txt 2.txt 3.txt\n</code></pre>\n\n<p>the ARGV is 2 and I can print them.But then I write the command like:</p>\n\n<pre><code>./print.pl &lt;1.txt 2.txt\n</code></pre>\n\n<p>when I run in this way the output is 2.txt only and the ARGV is 0.How can I detected &lt;1.txt as a input file?</p>\n\n<p>the file name is 1.txt, '&lt;' is used to put 1.txt into the code.</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 60461, "user_id": 3636601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/69a1b4f750ece89db0e49c94519f1a7d?s=128&d=identicon&r=PG&f=1", "display_name": "Jens", "link": "https://stackoverflow.com/users/3636601/jens"}, "edited": false, "score": 0, "creation_date": 1472131359, "post_id": 39146508, "comment_id": 65636800, "body": "What is the exact problem?"}, {"owner": {"reputation": 881, "user_id": 2888846, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/0b972b7482afdf07dfd240400f61a13a?s=128&d=identicon&r=PG&f=1", "display_name": "Aaron Perry", "link": "https://stackoverflow.com/users/2888846/aaron-perry"}, "reply_to_user": {"reputation": 60461, "user_id": 3636601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/69a1b4f750ece89db0e49c94519f1a7d?s=128&d=identicon&r=PG&f=1", "display_name": "Jens", "link": "https://stackoverflow.com/users/3636601/jens"}, "edited": false, "score": 0, "creation_date": 1472131527, "post_id": 39146508, "comment_id": 65636913, "body": "I have defined a variable that result in a date string (ex. 20160825). I am trying to then substitute this into the filename for a text file that has the 20160825 date text and then open the file in the perl script."}, {"owner": {"reputation": 60461, "user_id": 3636601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/69a1b4f750ece89db0e49c94519f1a7d?s=128&d=identicon&r=PG&f=1", "display_name": "Jens", "link": "https://stackoverflow.com/users/3636601/jens"}, "edited": false, "score": 0, "creation_date": 1472133195, "post_id": 39146508, "comment_id": 65638121, "body": "Yes that i understand. But i do not understand what your Problem is"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1472138557, "post_id": 39146508, "comment_id": 65641684, "body": "You say you want to create a file called <code>abc_20160825_filename.txt</code>, but your Perl code (which won&#39;t even compile) looks like it&#39;s trying to create <code>directory&#47;20160825_filename.txt</code>. Which is it please?"}], "answers": [{"comments": [{"owner": {"reputation": 1786, "user_id": 1820650, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/ce47757627908a1013e0951158f4c2e6?s=128&d=identicon&r=PG", "display_name": "Dr.Avalanche", "link": "https://stackoverflow.com/users/1820650/dr-avalanche"}, "edited": false, "score": 0, "creation_date": 1472132331, "post_id": 39146623, "comment_id": 65637501, "body": "you&#39;ve got a newline appended to <code>$currdate</code> which is going to be used as a part of a file name. Single quotes for strings unless you&#39;re doing interpolation"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1472149561, "post_id": 39146623, "comment_id": 65648155, "body": "<b><i>Please test your solutions</i></b>. You are publishing to the entire world what is supposed to be a solution to the OP&#39;s problem, yet you don&#39;t even test what you are proposing! Using your code, perl will try to interpolate the variable <code>$currdate_filename</code>, which doesn&#39;t exist. It will generate the warning message <code>Use of uninitialized value $currdate_filename in concatenation (.) or string</code> and set <code>$filename</code> top <code>directory&#47;.txt</code>."}], "tags": [], "owner": {"reputation": 808, "user_id": 2994171, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/eed6f54fe04fc2f00fd7240c69bffec4?s=128&d=identicon&r=PG&f=1", "display_name": "mtizziani", "link": "https://stackoverflow.com/users/2994171/mtizziani"}, "is_accepted": false, "score": -3, "last_activity_date": 1472149655, "last_edit_date": 1472149655, "creation_date": 1472131553, "answer_id": 39146623, "question_id": 39146508, "link": "https://stackoverflow.com/questions/39146508/open-text-file-using-variable-in-filename/39146623#39146623", "title": "Open Text File Using Variable in Filename", "body": "<p>I'm using PHP, but I think its similar to Perl.</p>\n\n<pre><code>$currdate = strftime \"%Y%m%d\\n\", localtime;\n$filename = \"directory/$currdate_filename.txt\";\n</code></pre>\n\n<p>All you have done wrong is the syntax to building the string.</p>\n\n<p>Another way to build a string is like this:</p>\n\n<pre><code>$currdate = strftime \"%Y%m%d\\n\", localtime;\n$filename = \"directory/\" . $currdate . \"_filename.txt\";\n</code></pre>\n\n<p>Please check whether Perl uses <code>.</code> like PHP, or <code>+</code> like JavaScript to chain separate text elements.</p>\n"}, {"tags": [], "owner": {"reputation": 1786, "user_id": 1820650, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/ce47757627908a1013e0951158f4c2e6?s=128&d=identicon&r=PG", "display_name": "Dr.Avalanche", "link": "https://stackoverflow.com/users/1820650/dr-avalanche"}, "is_accepted": true, "score": 1, "last_activity_date": 1472132049, "creation_date": 1472132049, "answer_id": 39146813, "question_id": 39146508, "link": "https://stackoverflow.com/questions/39146508/open-text-file-using-variable-in-filename/39146813#39146813", "title": "Open Text File Using Variable in Filename", "body": "<p>A couple of things, you had <code>\\n</code> in your strftime call, which appends a new line. You don't want this. You're not concatenating your string properly here:</p>\n\n<pre><code>$filename = 'directory/', $currdate '_filename.txt';\n</code></pre>\n\n<p>it's <code>.</code> not <code>,</code>, and you don't have one between the variable and <code>_filename.txt</code>. The example below includes <code>use strict; use warnings;</code> and does what you want:</p>\n\n<pre><code>use strict;\nuse warnings;\nuse POSIX qw(strftime);\n\nmy $currdate = strftime( \"%Y%m%d\", localtime );\nmy $filename = 'directory/' . $currdate . '_filename.txt';\nprint $filename;\n</code></pre>\n\n<p>Edit, also use 3 argument <a href=\"http://perldoc.perl.org/functions/open.html\" rel=\"nofollow\">open</a>, and get it to tell you why it failed:</p>\n\n<pre><code>open(FILE,'&lt;', $filename) or die \"Cant find file $!\\n\";\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 0, "last_activity_date": 1472149211, "last_edit_date": 1472149211, "creation_date": 1472138901, "answer_id": 39149211, "question_id": 39146508, "link": "https://stackoverflow.com/questions/39146508/open-text-file-using-variable-in-filename/39149211#39149211", "title": "Open Text File Using Variable in Filename", "body": "\n\n<p>You say you want to create a file called <code>abc_20160825_filename.txt</code>, but your Perl code (which won't even compile) looks like it's trying to create <code>directory/20160825_filename.txt</code>. Which is it please?</p>\n\n<p>I suggest that you use the <a href=\"https://metacpan.org/pod/Time::Piece\" rel=\"nofollow\"><code>Time::Piece</code></a> module together with <code>sprintf</code>. This example program generates both variations, and I hope it is easy to see how you could modify it</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>use strict;\nuse warnings 'all';\nuse feature 'say';\n\nuse Time::Piece 'localtime';\n\n{\n    my $filename = sprintf\n            'abc_%s_filename.txt',\n            localtime-&gt;strftime('%Y%m%d');\n\n    say $filename;\n}\n\n{\n    my $filename = sprintf\n            'directory/%s_filename.txt',\n            localtime-&gt;strftime('%Y%m%d');\n\n    say $filename;\n}\n</code></pre>\n\n<h3>output</h3>\n\n<pre class=\"lang-none prettyprint-override\"><code>abc_20160825_filename.txt\ndirectory/20160825_filename.txt\n</code></pre>\n"}], "owner": {"reputation": 881, "user_id": 2888846, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/0b972b7482afdf07dfd240400f61a13a?s=128&d=identicon&r=PG&f=1", "display_name": "Aaron Perry", "link": "https://stackoverflow.com/users/2888846/aaron-perry"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 123, "favorite_count": 0, "accepted_answer_id": 39146813, "answer_count": 3, "score": 0, "last_activity_date": 1472149655, "creation_date": 1472131258, "last_edit_date": 1472131836, "question_id": 39146508, "link": "https://stackoverflow.com/questions/39146508/open-text-file-using-variable-in-filename", "title": "Open Text File Using Variable in Filename", "body": "<p>I am trying to open a text file in my perl script. Part of the filename contains the date in YYYYMMDD format, which changes. I am having problems building the file path correctly.</p>\n\n<p><strong>Full Filename:</strong></p>\n\n<pre><code>abc_20160825_filename.txt\n</code></pre>\n\n<p><strong>Code:</strong></p>\n\n<pre><code>use POSIX qw(strftime);\n$currdate = strftime \"%Y%m%d\\n\", localtime;\n\n$filename = 'directory/', $currdate '_filename.txt';\n\nopen(FILE, $filename) or die \"Cant find file\";\n</code></pre>\n"}, {"tags": ["perl", "ieee-754"], "comments": [{"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 0, "creation_date": 1472154558, "post_id": 39146372, "comment_id": 65650621, "body": "The result of <code>Double.doubleToLongBits()</code> includes the sign and exponent. That method can fail if <code>a</code> and <code>b</code> have different exponent values."}, {"owner": {"reputation": 440, "user_id": 3275525, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0d68ce468e284dc44b8d0c43b7178757?s=128&d=identicon&r=PG&f=1", "display_name": "Evan", "link": "https://stackoverflow.com/users/3275525/evan"}, "reply_to_user": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 0, "creation_date": 1472221766, "post_id": 39146372, "comment_id": 65679699, "body": "@KeithThompson true it is no longer multiples of the unit in last place but it is a measure of floating point accuracy. I.e. how many numbers are in between a and b."}], "answers": [{"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 3, "last_activity_date": 1472152448, "last_edit_date": 1472152448, "creation_date": 1472132239, "answer_id": 39146883, "question_id": 39146372, "link": "https://stackoverflow.com/questions/39146372/what-is-the-perl-equivalent-to-javas-double-doubletolongbits/39146883#39146883", "title": "What is the perl equivalent to Java&#39;s Double.doubleToLongBits()?", "body": "<p>On a Perl with double-precision floats<sup>[1]</sup> and unsigned integers at least 64 bits in size<sup>[2]</sup>, you can use the following:</p>\n\n<pre><code>unpack('Q', pack('d', $n))\n</code></pre>\n\n<p>For example,</p>\n\n<pre><code>$ perl -e'\n   use Config qw( %Config );\n\n   die(\"Not supported\\n\")\n      if $Config{nvsize} != 8\n      || $Config{uvsize} &lt; 8;\n\n   printf(\"%X\\n\", unpack(\"Q\", pack(\"d\", -0.1)));\n'\nBFB999999999999A\n</code></pre>\n\n<hr>\n\n<ol>\n<li><code>perl -V:nvsize</code> gives <code>8</code></li>\n<li><code>perl -V:uvsize</code> gives <code>8</code> or higher</li>\n</ol>\n"}], "owner": {"reputation": 440, "user_id": 3275525, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0d68ce468e284dc44b8d0c43b7178757?s=128&d=identicon&r=PG&f=1", "display_name": "Evan", "link": "https://stackoverflow.com/users/3275525/evan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 92, "favorite_count": 0, "accepted_answer_id": 39146883, "answer_count": 1, "score": 2, "last_activity_date": 1472152448, "creation_date": 1472130886, "question_id": 39146372, "link": "https://stackoverflow.com/questions/39146372/what-is-the-perl-equivalent-to-javas-double-doubletolongbits", "title": "What is the perl equivalent to Java&#39;s Double.doubleToLongBits()?", "body": "<p>I have two floating point numbers and I want to compute their difference in Units in Last Place (ULP). In Java this is:</p>\n\n<pre><code>Double.doubleToLongBits(a) - Double.doubleToLongBits(b)\n</code></pre>\n\n<p>What is the equivalent in Perl?</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 1786, "user_id": 1820650, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/ce47757627908a1013e0951158f4c2e6?s=128&d=identicon&r=PG", "display_name": "Dr.Avalanche", "link": "https://stackoverflow.com/users/1820650/dr-avalanche"}, "edited": false, "score": 0, "creation_date": 1472130234, "post_id": 39145896, "comment_id": 65636003, "body": "not without the errors you claim to have seen"}, {"owner": {"reputation": 3, "user_id": 6074362, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6778eff1c4d9a0dbf9b1cd7a5281812b?s=128&d=identicon&r=PG&f=1", "display_name": "rowers", "link": "https://stackoverflow.com/users/6074362/rowers"}, "reply_to_user": {"reputation": 1786, "user_id": 1820650, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/ce47757627908a1013e0951158f4c2e6?s=128&d=identicon&r=PG", "display_name": "Dr.Avalanche", "link": "https://stackoverflow.com/users/1820650/dr-avalanche"}, "edited": false, "score": 0, "creation_date": 1472131342, "post_id": 39145896, "comment_id": 65636784, "body": "Sorry my friend, i don&#39;t understand why i&#39;m getting -rep. I wrote that i have problem with running this program. Maybe it&#39;s not a problem with only perl. It might be a problem with config of this program. I don&#39;t know... For example, when I want to run hypertextperl.pl file, command line show me &quot;LOCATION /&quot; and want to the exit the program. But there are many perl files. I wrote this post, because i tought that someone running this program on Windows and can help me with this."}, {"owner": {"reputation": 1786, "user_id": 1820650, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/ce47757627908a1013e0951158f4c2e6?s=128&d=identicon&r=PG", "display_name": "Dr.Avalanche", "link": "https://stackoverflow.com/users/1820650/dr-avalanche"}, "edited": false, "score": 1, "creation_date": 1472131455, "post_id": 39145896, "comment_id": 65636865, "body": "Unlikely, you&#39;re supposed to show what you&#39;re doing, what code causes the problem and what the actual problem is. You say &quot;but Perl command line displays errors&quot; which gives us literally nothing to go on. If you&#39;re asking anyone for help, regardless what the subject is, you have to tell them what&#39;s wrong."}], "answers": [{"tags": [], "owner": {"reputation": 16, "user_id": 6835993, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/866eec58828d20999063a12667daa6dd?s=128&d=identicon&r=PG", "display_name": "Ivoo", "link": "https://stackoverflow.com/users/6835993/ivoo"}, "is_accepted": true, "score": 0, "last_activity_date": 1473953661, "creation_date": 1473953661, "answer_id": 39515064, "question_id": 39145896, "link": "https://stackoverflow.com/questions/39145896/cant-running-eplsite-on-windows/39515064#39515064", "title": "Can&#39;t running EplSite on Windows", "body": "<p><strong>Don't waste your time</strong> with EplSite ETL. There's no useful documentation. I've wasted two days trying to install it with no success. Maybe something would work if there was some info about using hypertextperl.pl (especially with Apache server on Windows) but link to developer's site is dead. </p>\n\n<p>Just find some other software for ETL, because if you somehow manage to install Eplsite ETL you would have to guess how to use it properly. It's not worth the time and effort.</p>\n"}], "owner": {"reputation": 3, "user_id": 6074362, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6778eff1c4d9a0dbf9b1cd7a5281812b?s=128&d=identicon&r=PG&f=1", "display_name": "rowers", "link": "https://stackoverflow.com/users/6074362/rowers"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 52, "favorite_count": 0, "accepted_answer_id": 39515064, "answer_count": 1, "score": -2, "last_activity_date": 1473953661, "creation_date": 1472129597, "last_edit_date": 1472131618, "question_id": 39145896, "link": "https://stackoverflow.com/questions/39145896/cant-running-eplsite-on-windows", "title": "Can&#39;t running EplSite on Windows", "body": "<p>I have problem with running EplSite program. This program is written in Perl. I'm new in Perl. I tried to run it, but Perl command line displays errors. Can you help me? <a href=\"https://sourceforge.net/projects/eplsiteetl/\" rel=\"nofollow\">https://sourceforge.net/projects/eplsiteetl/</a></p>\n\n<p>CODE one of many files: <a href=\"http://pastebin.com/yM9srKGn\" rel=\"nofollow\">http://pastebin.com/yM9srKGn</a></p>\n"}, {"tags": ["perl", "module"], "comments": [{"owner": {"reputation": 930, "user_id": 6594367, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/03c046cae270605c2376680482e52f6d?s=128&d=identicon&r=PG&f=1", "display_name": "John Doe", "link": "https://stackoverflow.com/users/6594367/john-doe"}, "edited": false, "score": 0, "creation_date": 1472126462, "post_id": 39144405, "comment_id": 65633402, "body": "Can you provide an examaple?"}, {"owner": {"reputation": 49, "user_id": 680164, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1edfd29d858683d7467bfa0064e6dc57?s=128&d=identicon&r=PG", "display_name": "yahan", "link": "https://stackoverflow.com/users/680164/yahan"}, "reply_to_user": {"reputation": 930, "user_id": 6594367, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/03c046cae270605c2376680482e52f6d?s=128&d=identicon&r=PG&f=1", "display_name": "John Doe", "link": "https://stackoverflow.com/users/6594367/john-doe"}, "edited": false, "score": 0, "creation_date": 1472132114, "post_id": 39144405, "comment_id": 65637361, "body": "rephrased, I&#39;d like to include scripts in a module directory managed through a local CPAN which would then when deploying the module become available for execution. Don&#39;t know if compilation will object to the presence of those scripts and in addition the scripts location will not be in the PATH."}, {"owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "edited": false, "score": 0, "creation_date": 1472132168, "post_id": 39144405, "comment_id": 65637403, "body": "See my answer below. The method I&#39;ve shown will install your scripts into a location in <code>PATH</code>, and install the module into the proper location at the same time."}], "answers": [{"comments": [{"owner": {"reputation": 49, "user_id": 680164, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1edfd29d858683d7467bfa0064e6dc57?s=128&d=identicon&r=PG", "display_name": "yahan", "link": "https://stackoverflow.com/users/680164/yahan"}, "edited": false, "score": 1, "creation_date": 1472135567, "post_id": 39146808, "comment_id": 65639736, "body": "Thanks, will try this. We already use module-starter so this should be a nice extension to our procedure."}], "tags": [], "owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "is_accepted": true, "score": 3, "last_activity_date": 1472132459, "last_edit_date": 1472132459, "creation_date": 1472132038, "answer_id": 39146808, "question_id": 39144405, "link": "https://stackoverflow.com/questions/39144405/can-a-perl-module-distribution-include-a-script/39146808#39146808", "title": "Can a Perl module distribution include a script", "body": "<p>You can include scripts along with your module by including the <code>EXE_FILES</code> directive in a <code>Makefile.PL</code> file, and supplying the relative path to the scripts in an array reference. In the below example, the scripts live in a <code>bin/</code> directory within the top level of your module's directory. You do not need to have your files in a distribution-like layout, but it helps (see below).</p>\n\n<p>After setting up your directory structure and fiddling with the paths within the <code>Makefile.PL</code>, running <code>make install</code> will install your scripts along with your module.</p>\n\n<pre><code>use ExtUtils::MakeMaker;\n\nWriteMakefile(\n    NAME              =&gt; 'My::Module',\n    VERSION_FROM      =&gt; 'lib/My/Module.pm',\n    ($] &gt;= 5.005 ?\n      (ABSTRACT_FROM  =&gt; 'lib/My/Module.pm',\n    AUTHOR            =&gt; 'My Name &lt;email.addr&gt;') : ()),\n    LIBS              =&gt; [],\n    EXE_FILES         =&gt; [qw(bin/script1 bin/script2)],\n    DEFINE            =&gt; '',\n    INC               =&gt; '-I.',\n    PREREQ_PM         =&gt; {},\n);\n</code></pre>\n\n<p>Personally, I'd recommend turning your module into a full-blown distribution. Here's an example. First, install <a href=\"https://metacpan.org/pod/Module::Starter\" rel=\"nofollow\">Module::Starter</a>, then:</p>\n\n<pre><code>module-starter --author=\"My Name\" --email=\"my@email.com\" --module=My::Module --eumm\n</code></pre>\n\n<p>Now you can copy your module's code to <code>lib/My/Module.pm</code>, create a <code>bin/</code> directory, put your scripts in it, add the <code>EXE_FILES</code> directive to the <code>Makefile.PL</code>, and you can use the full suite of <code>make</code> commands to make, test and install your modules and the scripts, eg:</p>\n\n<pre><code>perl Makefile.PL\nmake\nmake test\nmake install\n</code></pre>\n\n<p>Here's a real-world <a href=\"https://metacpan.org/source/STEVEB/RPi-WiringPi-1.00/Makefile.PL\" rel=\"nofollow\">example</a>, one of my own distributions on the CPAN that includes a bundled <code>pinmap</code> Perl script along with the distribution's modules:</p>\n"}], "owner": {"reputation": 49, "user_id": 680164, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1edfd29d858683d7467bfa0064e6dc57?s=128&d=identicon&r=PG", "display_name": "yahan", "link": "https://stackoverflow.com/users/680164/yahan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 127, "favorite_count": 0, "accepted_answer_id": 39146808, "answer_count": 1, "score": 1, "last_activity_date": 1472136204, "creation_date": 1472125526, "last_edit_date": 1472136204, "question_id": 39144405, "link": "https://stackoverflow.com/questions/39144405/can-a-perl-module-distribution-include-a-script", "title": "Can a Perl module distribution include a script", "body": "<p>I'm considering of using modules to group scripts. I often end up in the scenario that I have one or more scripts that uses a certain module.</p>\n\n<p>Is it possible to pack the scripts together with the module?</p>\n\n<p>Are there any specifics to how to achieve that?</p>\n\n<p>Thanks for your input.</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 930, "user_id": 6594367, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/03c046cae270605c2376680482e52f6d?s=128&d=identicon&r=PG&f=1", "display_name": "John Doe", "link": "https://stackoverflow.com/users/6594367/john-doe"}, "edited": false, "score": 1, "creation_date": 1472122045, "post_id": 39142820, "comment_id": 65630499, "body": "Do you expect the values <code>10</code> and <code>4</code> to be printed?"}], "answers": [{"tags": [], "owner": {"reputation": 71, "user_id": 4369588, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5dc11ff0fc0b464d07dee0c51b5a7f93?s=128&d=identicon&r=PG&f=1", "display_name": "Wolfgang Loch", "link": "https://stackoverflow.com/users/4369588/wolfgang-loch"}, "is_accepted": true, "score": 1, "last_activity_date": 1472124396, "creation_date": 1472124396, "answer_id": 39144008, "question_id": 39142820, "link": "https://stackoverflow.com/questions/39142820/scope-of-variable-in-perl/39144008#39144008", "title": "Scope of Variable in Perl", "body": "<p>The \"local\" statement effectively hides the original value of the global variable. If you need the original value, you will have to make a copy before the \"local\" declaration:</p>\n\n<pre><code>$x=4;\n&amp;routine;\nprint \"value of x in main is $x\\n\";\n\nsub routine\n{\n    my $originalX = $x;\n    local $x = 10;\n    print \"value of x in routine is $x\\n\";\n    print \"value of x in main is $originalX\\n\";\n}\n</code></pre>\n\n<p>The most useful propery of \"local\" as opposed to \"my\" is that the local value still visible in functions that are called from within the scope of the local variable.</p>\n\n<pre><code>our $x=4;\nfoo();\nprint \"value of x in main is $x\\n\";\n\nsub foo {\n  local $x = 10;\n  print \"value of x in foo is $x\\n\";\n  bar();\n}\n\nsub bar {\n  print \"value of x in bar is $x\\n\";\n}\n</code></pre>\n\n<p>results in</p>\n\n<pre><code>value of x in foo is 10\nvalue of x in bar is 10\nvalue of x in main is 4\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1532, "user_id": 791908, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tmGC4.jpg?s=128&g=1", "display_name": "Drav Sloan", "link": "https://stackoverflow.com/users/791908/drav-sloan"}, "is_accepted": false, "score": 1, "last_activity_date": 1472130445, "last_edit_date": 1472130445, "creation_date": 1472130129, "answer_id": 39146104, "question_id": 39142820, "link": "https://stackoverflow.com/questions/39142820/scope-of-variable-in-perl/39146104#39146104", "title": "Scope of Variable in Perl", "body": "<p>There are a few things to understand here in regards to variables and how perl treats and uses them.</p>\n\n<p>When you declare <code>$x</code> and assign the value <code>4</code>, you are actually defining a package variable. When not using <code>strict</code> pragmas (enabled by the use of <code>use strict 'vars'</code> or <code>use strict</code>), you do not have to preceed the variable declaration with either <code>my</code> or <code>our</code>. As such, Perl will then default to initializing <code>$x</code> as a package variable. Packages are set via the <code>package</code> keyword and if that is omitted then perl defaults to the <code>main</code> package. This means you have created a package variable called <code>$main::x</code> with value <code>4</code>. Whilst remaining in the package <code>main</code>, you can use the <em>alias</em> <code>$x</code> to mean <code>$main::x</code>.</p>\n\n<p>A package variable can be utilized anywhere within your main package scope (often referred to as <em>global variables</em>), and this is why you can access <code>$x</code> in the subroutine <code>routine()</code>.</p>\n\n<p><code>local</code> will store away the value of <code>$x</code> for the duration of the scope it was declared at until the end of the scope it was declared in. So in your example, the scope of the <code>local</code> declaration is for the whole of the <code>routine()</code> (between where <code>local</code> was used and the closing <code>}</code> brace of the <code>routine()</code> declaration). When leaving the scope, it reinitializes <code>$x</code> to the stored value. This is why the print statement after calling <code>routine()</code> shows <code>$x</code> as <code>4</code>.</p>\n\n<p>First to answer your immediate problem:</p>\n\n<p>Because <code>local</code> is specific to the closure it was utilized in, you can create a <em>separate</em> closure with in <code>routine()</code>. This way you can localize <code>$x</code> within that scope, but retain the package variable of <code>$x</code> within your subroutine:</p>\n\n<pre><code>#! /usr/bin/perl \n\n$x=4;  # declare a package variable $main::x\nroutine();\nprint \"value of x in main is $x\\n\";\n\nsub routine {\n    # now create a closure, so we can localize the package variable\n    # within its own scope\n    {\n        local $x = 10;\n        print \"value of x routine, within locally scoped closure is $x\\n\";\n    }\n    print \"value of x _from_ main is $x\\n\";  #will now print 4\n}\n</code></pre>\n\n<p>As touched on in other answers, best practice in perl is to use strict pragmas as well as asking for warnings when errant coding is detected:</p>\n\n<pre><code>use strict;\nuse warnings 'all';\n</code></pre>\n\n<p>As such running your code will then give:</p>\n\n<p><code>Global symbol \"$x\" requires explicit package name</code>. </p>\n\n<p>We can solve this in a couple of ways, we can either declare it with a package name:</p>\n\n<pre><code>$main::x = 4;\n</code></pre>\n\n<p>and then have to implictly refer to it in the rest of the code as <code>$main::x</code>.</p>\n\n<p>Or if we prefer to have access to aliases, we can use the keyword <code>our</code> to declare <code>$main::x</code> as a package variable, and then refer to it as <code>$x</code> in the rest of our code.</p>\n\n<pre><code>our $x=4;      # (is the same as writing $main::x = 4, but you also\n               # can refer to it by its alias $x from this point onwards).\n</code></pre>\n\n<p>With these points covered you can then have the final recommended solution:</p>\n\n<pre><code>#! /usr/bin/perl \n\nuse strict;\nuse warnings 'all';\n\nour $x=4;  # declare a package variable $main::x\nroutine();\nprint \"value of x in main is $x\\n\";\n\nsub routine {\n    # now create a closure, so we can localize the package variable\n    # within its own scope\n    {\n        local $x = 10;\n        print \"value of x routine, within locally scoped closure is $x\\n\";\n    }\n    print \"value of x _from_ main is $x\\n\";  # will now print 4\n}\n</code></pre>\n\n<p><strong>Extra Information</strong></p>\n\n<p>Note that localized variables remain in scope, even when other subroutines are called within that scope:</p>\n\n<pre><code>our $x=4;\nroutine();\n\nsub routine {\n    {\n        local $x = 10;\n        print \"routine() localized, x is $x\\n\";\n        another_routine();\n    }\n    print \"routine() x is $x\\n\";\n}\n\nsub another_routine {\n    print \"another_routine() still localized, x is $x\\n\";\n}\n</code></pre>\n\n<p>Will output:</p>\n\n<pre><code>routine() localized, x is 10\nanother_routine() still localized, x is 10\nroutine() x is 4\n</code></pre>\n\n<p>We have not touched open <em>lexical variables</em> declared by the <code>my</code> keyword (sometimes referred to as <em>private variables</em> or <em>my variables</em>). These are different in behaviour that they only live for the duration they remain in scope (well technically until their reference count becomes 0, but that's another topic!). This allows us to declare variables which (for example) only get created and used during your <code>routine()</code> subroutine:</p>\n\n<pre><code>sub routine {\n    my $y = 20;\n\n    print \"y is set to $y during the duration of routine()\\n\";\n}\n</code></pre>\n\n<p><code>my</code> also has the subtle effect of allowing us to re-use package variable names, and use <em>private</em> values for that variable, for the duration of the scope they were declared in. Note, they do not behave like localized variables, and calling other routines within scope will default to using the package variable value:</p>\n\n<pre><code>our $x=4;\nroutine();\n\nsub routine {\n    my $x = 20;\n\n    print \"routine() x is $x\\n\";\n    another_routine();\n}\n\nsub another_routine {\n    print \"another_routine() x is $x\\n\";\n}\n</code></pre>\n\n<p>will output:</p>\n\n<pre><code>routine() x is 20\nanother_routine() x is 4\n</code></pre>\n\n<p><code>$x</code> inside <code>routine()</code> is <em>private</em> to <code>routine()</code> and only <code>routine()</code>.</p>\n\n<p>I hope the lanuague is clear enough to understand!</p>\n"}], "owner": {"reputation": 37, "user_id": 5789329, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/592c6bf45a450e8dcb15f41a766fa829?s=128&d=identicon&r=PG&f=1", "display_name": "Darshan K S", "link": "https://stackoverflow.com/users/5789329/darshan-k-s"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 190, "favorite_count": 0, "accepted_answer_id": 39144008, "answer_count": 2, "score": 0, "last_activity_date": 1472130445, "creation_date": 1472120885, "question_id": 39142820, "link": "https://stackoverflow.com/questions/39142820/scope-of-variable-in-perl", "title": "Scope of Variable in Perl", "body": "<p>I am new to Perl and I got a doubt with the usage of the variable in the subroutines.</p>\n\n<pre><code>    #! /usr/bin/perl\n\n    $x=4;\n    &amp;routine;\n    print \"value of x in main is $x\\n\";\n\n    sub routine\n    {\n      local $x = 10;\n      print \"value of x in routine is $x\\n\";\n      print \"value of x in main is $x\\n\";       #what should be replaced in $x to get correct answer\n    }\n</code></pre>\n\n<p>As in the program, what should be replaced in this line</p>\n\n<pre><code>    print \"value of x in main is $x\\n\";\n</code></pre>\n\n<p>to get the value of $x variable in main function?</p>\n"}]