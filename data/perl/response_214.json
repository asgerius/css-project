[{"tags": ["perl", "split"], "comments": [{"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1550096737, "post_id": 54680379, "comment_id": 96149685, "body": "The first argument to split is a regex pattern, not a string. <code>my ($before, $after) = split(&#47;IMAGE&#47;, $fshare, 2)</code> should work fine (the limit prevents it from splitting into more than 2 strings)."}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1550096902, "post_id": 54680379, "comment_id": 96149750, "body": "The only caveat is if your split pattern contains regex metacharacters, you need to put <code>\\Q</code> at the beginning to quotemeta it if you want it used literally. But <code>IMAGE</code> does not."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1550097183, "post_id": 54680379, "comment_id": 96149839, "body": "If you plainly want everything after <code>IMAGE</code>, no questions asked, I&#39;d recommend a regex in this case; the <code>split</code> returns both what&#39;s before and after (all occurrences of) the pattern. Then you&#39;d need to think of how many <code>IMAGE</code> substrings there may be and which one you want. For everything after the first one, <code>my ($rest) = $fshare =~ &#47;IMAGE(.*)&#47;;</code>"}, {"owner": {"reputation": 37, "user_id": 6256858, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5vVYL.jpg?s=128&g=1", "display_name": "Opethian", "link": "https://stackoverflow.com/users/6256858/opethian"}, "edited": false, "score": 0, "creation_date": 1550097217, "post_id": 54680379, "comment_id": 96149851, "body": "Thanks Grinnz, that should do the job,"}, {"owner": {"reputation": 37, "user_id": 6256858, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5vVYL.jpg?s=128&g=1", "display_name": "Opethian", "link": "https://stackoverflow.com/users/6256858/opethian"}, "edited": false, "score": 0, "creation_date": 1550097289, "post_id": 54680379, "comment_id": 96149875, "body": "Thanks zdim. I will try that also to get a better understanding of regex."}], "answers": [{"tags": [], "owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "is_accepted": true, "score": 3, "last_activity_date": 1550099423, "creation_date": 1550099423, "answer_id": 54680845, "question_id": 54680379, "link": "https://stackoverflow.com/questions/54680379/can-i-use-a-full-word-to-split-on-a-string/54680845#54680845", "title": "Can I use a full word to split on a string?", "body": "<p>The first argument to split is a regex pattern, not a string. You can pass a third argument as a limit to prevent it from splitting into more than 2 strings (more than once).</p>\n\n<pre><code>my ($before, $after) = split /IMAGE/, $fshare, 2;\n</code></pre>\n\n<p>If the string you want to split on contains regex metacharacters, you will want to use <a href=\"https://perldoc.pl/functions/quotemeta\" rel=\"nofollow noreferrer\">\\Q</a> so the string is interpreted literally.</p>\n\n<pre><code>my ($before, $after) = split /\\Qfoo.bar/, $fshare, 2;\n</code></pre>\n\n<p>If you only care about what is after the delimiter, you can use a simple <a href=\"https://perldoc.pl/perlretut#Extracting-matches\" rel=\"nofollow noreferrer\">regex capture</a> to retrieve this.</p>\n\n<pre><code>my ($after) = $fshare =~ m/IMAGE(.*)/s;\n</code></pre>\n\n<p>The <code>/s</code> modifier allows <code>.</code> to additionally match newlines.</p>\n"}, {"tags": [], "owner": {"reputation": 2177, "user_id": 3124587, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/adc0af022f8a3b35bcde0a4405e4c673?s=128&d=identicon&r=PG&f=1", "display_name": "Joshua", "link": "https://stackoverflow.com/users/3124587/joshua"}, "is_accepted": false, "score": 2, "last_activity_date": 1550107968, "last_edit_date": 1550107968, "creation_date": 1550100407, "answer_id": 54681007, "question_id": 54680379, "link": "https://stackoverflow.com/questions/54680379/can-i-use-a-full-word-to-split-on-a-string/54681007#54681007", "title": "Can I use a full word to split on a string?", "body": "<p>If you just want to get the part after the string, you could avoid using <code>split</code> (and the RegEx engine) all together and use string ops instead.</p>\n\n<pre><code>my $string = '\\\\Disk\\InfoIMAGEstuff';\nmy $delim  = 'IMAGE';\nmy $post   = substr($string, index($string, $delim) + length($delim));\n</code></pre>\n\n<p>It's not super pretty, but it benchmarks twice as fast as using <code>split</code>. Even though we are calling 3 functions (<code>substr</code>, <code>index</code>, and <code>length</code>), string ops like these are incredibly fast.</p>\n\n<p>In this example, <code>index</code> matches the first occurrence of <code>$delim</code>. If you want to match the last occurrence, use <code>rindex</code> instead.</p>\n"}], "owner": {"reputation": 37, "user_id": 6256858, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5vVYL.jpg?s=128&g=1", "display_name": "Opethian", "link": "https://stackoverflow.com/users/6256858/opethian"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 66, "favorite_count": 1, "accepted_answer_id": 54680845, "answer_count": 2, "score": 1, "last_activity_date": 1550107968, "creation_date": 1550096575, "last_edit_date": 1550097871, "question_id": 54680379, "link": "https://stackoverflow.com/questions/54680379/can-i-use-a-full-word-to-split-on-a-string", "title": "Can I use a full word to split on a string?", "body": "<p>This may be a simpleton question. I have a string that is consistent with the content. It will contain the word <code>\"IMAGE\"</code>. I want to be able to split on this word so I get the content after the word. I tried:</p>\n\n<pre><code>my @sname = split('IMAGE', $fshare);\n</code></pre>\n\n<p><code>$fshare</code> contains a string such as <code>'\\\\Disk\\InfoIMAGEstuff'</code>. I want the <code>'stuff'</code> part.</p>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1550095149, "post_id": 54680062, "comment_id": 96149071, "body": "Well, <code>s&#47;{{\\K(\\w)&#47;uc($1)&#47;e</code> for example (the <code>&#47;e</code> makes it evaluate the replacement side as code) ... but are you <i>certain</i> that you may just unleash that on your whole files?  Will it catch all cases you need?  Will it not clip something else you didn&#39;t mean to?"}, {"owner": {"reputation": 1547, "user_id": 950218, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/c30b290f28a1b3ceb9f39d65e88b4339?s=128&d=identicon&r=PG", "display_name": "Sam Palmer", "link": "https://stackoverflow.com/users/950218/sam-palmer"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1550095352, "post_id": 54680062, "comment_id": 96149164, "body": "that seems to get rid of the braces, i need the braces preserved (dw i have a copy of my original file!) Title = The Particle Swarm - Explosion, Stability, and Convergence in a Multidimensional Complex Space}},"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1550095435, "post_id": 54680062, "comment_id": 96149200, "body": "Yeah, that was the original where I forgot the <code>\\K</code> ... comment edited, look again please ... there&#39;s an &quot;answer&quot; posted now as well."}, {"owner": {"reputation": 1547, "user_id": 950218, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/c30b290f28a1b3ceb9f39d65e88b4339?s=128&d=identicon&r=PG", "display_name": "Sam Palmer", "link": "https://stackoverflow.com/users/950218/sam-palmer"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1550095605, "post_id": 54680062, "comment_id": 96149263, "body": "perfect thank you so much!!!"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1550167594, "post_id": 54680062, "comment_id": 96180486, "body": "Added a snippet that allows for (optional) spaces, probably what you want"}], "answers": [{"comments": [{"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 1, "creation_date": 1550095445, "post_id": 54680154, "comment_id": 96149205, "body": "<code>s&#47;{{\\K(\\w)&#47;\\U$1&#47;g</code> doesn&#39;t require the <code>&#47;e</code> modifier, as <code>\\U</code> works in double-quoted strings."}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": true, "score": 3, "last_activity_date": 1550604074, "last_edit_date": 1550604074, "creation_date": 1550095384, "answer_id": 54680154, "question_id": 54680062, "link": "https://stackoverflow.com/questions/54680062/perl-change-the-case-of-letter-at-character/54680154#54680154", "title": "Perl, Change the Case of Letter at { character", "body": "<p>One way, for the question as asked</p>\n\n<pre><code>$string =~ s/{{\\K(\\w)/uc($1)/ge;\n</code></pre>\n\n<p>whereby <code>/e</code> makes it evaluate the replacement side as code.  The <code>\\K</code> makes it drop all previous matches so <code>{{</code> aren't \"consumed\" (and thus need not be retyped in the replacement side). </p>\n\n<p>If you wish to allow for possible spaces:&thinsp; <code>$string =~ s/{{\\s*\\K(\\w)/uc($1)/ge;</code>, and as far as I know bibtex why not allow for spaces between curlies as well, so <code>{\\s*{</code>.</p>\n\n<p>If simple capitalization is all you need then <code>\\U$1</code> in the replacement side sufficies and there is no need for <code>/e</code> modifier with it, per comment by <a href=\"https://stackoverflow.com/users/5848200/grinnz\">Grinnz</a>. The <code>\\U</code> is a generic <a href=\"https://perldoc.perl.org/perlop.html#Quote-and-Quote-like-Operators\" rel=\"nofollow noreferrer\">quote-like operator</a>, which can thus also be used in regex; see under <em>Escape sequences</em> <a href=\"https://perldoc.perl.org/perlre.html#Regular-Expressions\" rel=\"nofollow noreferrer\">in perlre</a>, and <a href=\"https://perldoc.perl.org/perlretut.html#More-on-characters%2c-strings%2c-and-character-classes\" rel=\"nofollow noreferrer\">in perlretut</a>.</p>\n\n<p>I recommend a good read through the tutorial <a href=\"https://perldoc.perl.org/perlretut.html\" rel=\"nofollow noreferrer\">perlretut</a>.  That will go a long way.</p>\n\n<p>However, I must also ask: Are you <em>certain</em> that you may indeed just unleash that on your whole file? Will it catch all cases you need? Will it not clip something else you didn't mean to?</p>\n"}], "owner": {"reputation": 1547, "user_id": 950218, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/c30b290f28a1b3ceb9f39d65e88b4339?s=128&d=identicon&r=PG", "display_name": "Sam Palmer", "link": "https://stackoverflow.com/users/950218/sam-palmer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 46, "favorite_count": 0, "accepted_answer_id": 54680154, "answer_count": 1, "score": -1, "last_activity_date": 1550604074, "creation_date": 1550094955, "question_id": 54680062, "link": "https://stackoverflow.com/questions/54680062/perl-change-the-case-of-letter-at-character", "title": "Perl, Change the Case of Letter at { character", "body": "<p>I am a perl newb, and just need to get something done quick and dirty. \nI have lines of text (from .bib files) such as</p>\n\n<pre><code>Title = {{the Particle Swarm - Explosion, Stability, and Convergence in a Multidimensional Complex Space}},\n</code></pre>\n\n<p>How can I write a regex such that the first letter after the second { becomes capitalised.</p>\n\n<p>Thanks</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1550096533, "post_id": 54679296, "comment_id": 96149610, "body": "You might try <a href=\"https://perldoc.pl/re#&#39;debug&#39;-mode\" rel=\"nofollow noreferrer\">use re &#39;debug&#39;</a> or <a href=\"https://metacpan.org/pod/Regexp::Debugger\" rel=\"nofollow noreferrer\">Regexp::Debugger</a> to narrow down the problem."}, {"owner": {"reputation": 2626, "user_id": 849967, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/137c89ef80ed860b95e68b42e0d5353e?s=128&d=identicon&r=PG", "display_name": "Kjetil S.", "link": "https://stackoverflow.com/users/849967/kjetil-s"}, "edited": false, "score": 0, "creation_date": 1550826206, "post_id": 54679296, "comment_id": 96421650, "body": "<code>$ [a-zA-z]+</code> should probably be <code>\\$ [a-zA-Z_]\\w*</code> with uppercase Z, backslash before <code>$</code> since it&#39;s a metacharacter in regexes and allowing for <code>_</code> and 0-9 in variable names. Remove <code>-</code> from <code>&lt;Var-Decl&gt;</code> and others and of course <code>use Regexp::Grammars;</code> and <code>use Data::Dumper;</code>."}], "answers": [{"tags": [], "owner": {"reputation": 81, "user_id": 3406765, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lg2Et.jpg?s=128&g=1", "display_name": "buchi", "link": "https://stackoverflow.com/users/3406765/buchi"}, "is_accepted": false, "score": 4, "last_activity_date": 1552250918, "last_edit_date": 1552250918, "creation_date": 1550141566, "answer_id": 54688692, "question_id": 54679296, "link": "https://stackoverflow.com/questions/54679296/convert-a-perl6-grammar-to-perl5/54688692#54688692", "title": "convert a perl6 grammar to perl5", "body": "<p><code>&lt;debug: on&gt;</code>  is very helpful. after few changes it is working</p>\n\n<p>perl5 code</p>\n\n<pre><code>my $text = q[my $x = 23; say $x;];\n\nmy $parser = qr {\n    &lt;nocontext:&gt;\n    #&lt;debug: on&gt;\n    &lt;Statements&gt;\n    &lt;rule: Statements&gt;    &lt;[Statement]&gt;+ % &lt;Separator&gt;\n    &lt;rule: Statement&gt;     &lt;VarDecl&gt; | &lt;FunCall&gt;\n    &lt;rule: VarDecl&gt;       my &lt;VarName&gt; = &lt;Value&gt;\n    &lt;rule: VarName&gt;       \\$ [a-zA-Z]+\n    &lt;token: Value&gt;        \\d+\n    &lt;rule: FunCall&gt;       &lt;FunName&gt; &lt;VarName&gt;\n    &lt;token: FunName&gt;      say\n    &lt;token: Separator&gt;    ;\n}xms;\n\n\nif( $text =~ $parser ) {\n    my %res = %/;\n    print Dumper \\%res;\n}\n</code></pre>\n"}], "owner": {"reputation": 81, "user_id": 3406765, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lg2Et.jpg?s=128&g=1", "display_name": "buchi", "link": "https://stackoverflow.com/users/3406765/buchi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 113, "favorite_count": 2, "answer_count": 1, "score": 4, "last_activity_date": 1552250918, "creation_date": 1550091450, "last_edit_date": 1550092246, "question_id": 54679296, "link": "https://stackoverflow.com/questions/54679296/convert-a-perl6-grammar-to-perl5", "title": "convert a perl6 grammar to perl5", "body": "<p>I am converting a Perl6 grammar to Perl5. Perl5 code below is not working, i'm using Regexp::Grammars module. Please help me with a working example.</p>\n\n<p>I got this error on posting - It looks like your post is mostly code; please add some more details. so i'm repeating it to add some text</p>\n\n<p>perl6 code</p>\n\n<pre><code>my $program = 'my $x = 23; say $x;';\n\ngrammar G {\n  rule TOP {\n    &lt;statement&gt;* %% ';'\n  }\n  rule statement {\n    | &lt;variable-declaration&gt;\n    | &lt;function-call&gt;\n  }\n  rule variable-declaration {\n    'my' &lt;variable-name&gt; '=' &lt;value&gt;\n  }\n  token variable-name {\n    '$' &lt;alpha&gt;+\n  }\n  token value {\n    &lt;digit&gt;+\n  }\n  rule function-call {\n    &lt;function-name&gt; &lt;variable-name&gt;\n  }\n  token function-name {\n    'say'\n  }\n}\n\nsay G.parse($program);\n\n</code></pre>\n\n<p>perl5 code </p>\n\n<pre><code>my $text = q[my $x = 23; say $x;];\n\nmy $parser = qr {\n    &lt;nocontext:&gt;\n    &lt;Statements&gt;\n    &lt;rule: Statements&gt;    &lt;[Statement]&gt;* % &lt;Separator&gt;\n    &lt;rule: Statement&gt;     &lt;Var-Decl&gt; | &lt;Fun-Call&gt;\n    &lt;rule: Var-Decl&gt;      my &lt;Var-Name&gt; = &lt;Value&gt;\n    &lt;rule: Var-Name&gt;      $ [a-zA-z]+\n    &lt;token: Value&gt;        \\d+\n    &lt;rule: Fun-Call&gt;      &lt;Fun-Name&gt; &lt;Var-Name&gt;\n    &lt;token: Fun-Name&gt;     say\n    &lt;token: Separator&gt;    ;\n}xms;\n\nif( $text =~ $parser ) {\n    my %res = %/;\n    print Dumper \\%res;\n}\n</code></pre>\n"}, {"tags": ["shell", "perl", "ksh"], "answers": [{"comments": [{"owner": {"reputation": 823, "user_id": 3447165, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/952db6be75d2ce2f316713ed95355503?s=128&d=identicon&r=PG&f=1", "display_name": "Andre Gelinas", "link": "https://stackoverflow.com/users/3447165/andre-gelinas"}, "edited": false, "score": 0, "creation_date": 1550089867, "post_id": 54678606, "comment_id": 96146746, "body": "If I may, since it&#39;s in ksh, instead of using echo which is an external utility, should use &quot;print -u {file handler number} &quot; since print is internal."}, {"owner": {"reputation": 21, "user_id": 11058439, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aa1467f936d1d9199e09be3e719af79b?s=128&d=identicon&r=PG&f=1", "display_name": "Chazzn", "link": "https://stackoverflow.com/users/11058439/chazzn"}, "edited": false, "score": 0, "creation_date": 1550090137, "post_id": 54678606, "comment_id": 96146881, "body": "Will try this immediately. Thanks."}, {"owner": {"reputation": 21, "user_id": 11058439, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aa1467f936d1d9199e09be3e719af79b?s=128&d=identicon&r=PG&f=1", "display_name": "Chazzn", "link": "https://stackoverflow.com/users/11058439/chazzn"}, "edited": false, "score": 0, "creation_date": 1550091512, "post_id": 54678606, "comment_id": 96147487, "body": "Thank You Tanktalus ! That change has made a dramatic change in the speed. I am going to switch to the &quot;print&quot; command suggested by Andre next which I believe will make additional improvements. I am also wondering in the elif comparison I wanted to figure out how to execute the equivalent of a -ge in a string comparison rather than the compound comparisin I am using in this code which might also make a small improvement but not much. Though I wonder internally if  the difference is not worth it if internally there is only one time that the second condition would ever come into play."}, {"owner": {"reputation": 100758, "user_id": 1899640, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/47374ccb28e4b0d2454b64f7b975bc66?s=128&d=identicon&r=PG", "display_name": "that other guy", "link": "https://stackoverflow.com/users/1899640/that-other-guy"}, "reply_to_user": {"reputation": 823, "user_id": 3447165, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/952db6be75d2ce2f316713ed95355503?s=128&d=identicon&r=PG&f=1", "display_name": "Andre Gelinas", "link": "https://stackoverflow.com/users/3447165/andre-gelinas"}, "edited": false, "score": 1, "creation_date": 1550097018, "post_id": 54678606, "comment_id": 96149788, "body": "@AndreGelinas In my ksh, <code>type echo</code> says <code>echo is a shell builtin</code>"}], "tags": [], "owner": {"reputation": 19969, "user_id": 23512, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/tUj1I.png?s=128&g=1", "display_name": "Tanktalus", "link": "https://stackoverflow.com/users/23512/tanktalus"}, "is_accepted": false, "score": 3, "last_activity_date": 1550088419, "creation_date": 1550088419, "answer_id": 54678606, "question_id": 54678437, "link": "https://stackoverflow.com/questions/54678437/splitting-file-with-if-then-else-into-3-files/54678606#54678606", "title": "Splitting file with If-Then-Else into 3 files", "body": "<p>Each time you have <code>&gt;&gt; filename</code>, you're opening the file again, moving the pointer to the end of the file, and then closing the file again at the end of the statement. Better to keep the files open.</p>\n\n<pre><code>while read inrec                           # Read base file until EOF\n do                                        # Start work loop\n    v_pcn=${inrec:0:9}                     # Get 1st 9 Characters in v_pcn\n#   v_pcn=${v_pcn/' '/0}                   # Replace blanks with '0'\n    if [[ $v_pcn &lt; '518000000' ]]; then    # pcn &lt; \"518000000\"\n         echo $inrec &gt;&amp;3\n    elif [[ $v_pcn &gt; '525000000' || $v_pcn == '525000000' ]]; then  # pcn &gt;= \"525000000\"\n         echo $inrec &gt;&amp;4\n    else                                   # else &gt;= \"518000000\" &amp; &lt; \"525000000\"\n         echo $inrec &gt;&amp;5\n    fi\n done &lt; base.dat 3&gt;&gt; base1.dat 4&gt;&gt; base2.dat 5&gt;&gt; base3.dat\n</code></pre>\n\n<p>This will open the files once, maintain their pointers into the files, and should help speed things up immensely.</p>\n\n<p>Normally when shell is slow, it's due to the commands you're running, but nothing here spawns subshells, so then I look at the next most likely culprit - file handling. And that's what I see here.</p>\n"}, {"tags": [], "owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "is_accepted": false, "score": 2, "last_activity_date": 1550090941, "last_edit_date": 1550090941, "creation_date": 1550090623, "answer_id": 54679100, "question_id": 54678437, "link": "https://stackoverflow.com/questions/54678437/splitting-file-with-if-then-else-into-3-files/54679100#54679100", "title": "Splitting file with If-Then-Else into 3 files", "body": "<p>Perl code is compiled into a \"binary\" representation. Then that binary representation is executed by a highly optimized interpreter.</p>\n\n<p>Shell scripts on the other hand</p>\n\n<ul>\n<li>parse each line every time it gets executed,</li>\n<li>file redirections are repeated every time they get executed,</li>\n<li>usually execute <em>external</em> commands, except if the command happens to be a shell builtin.</li>\n</ul>\n\n<p>I'm not sure what builtins the Korn shell has, but bash has quite a few of them.</p>\n\n<p>Executing external commands is <em>expensive</em> as it involves at least a <code>fork()</code> and a <code>execve()</code> system calls.</p>\n\n<p>In general a shell script will only be faster than a Perl script when it is extremely short, i.e. when the startup cost of the Perl compiler is higher than the actual code execution time.</p>\n\n<p>The short answer: don't be surprised when you translate a shell script into an equivalent Perl script that it will run much faster.</p>\n"}, {"tags": [], "owner": {"reputation": 575, "user_id": 5826441, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b2fbe8a34efcbef0f2ca5dc0de180c63?s=128&d=identicon&r=PG&f=1", "display_name": "Akhil Jalagam", "link": "https://stackoverflow.com/users/5826441/akhil-jalagam"}, "is_accepted": false, "score": 0, "last_activity_date": 1550147442, "creation_date": 1550147442, "answer_id": 54690471, "question_id": 54678437, "link": "https://stackoverflow.com/questions/54678437/splitting-file-with-if-then-else-into-3-files/54690471#54690471", "title": "Splitting file with If-Then-Else into 3 files", "body": "<p>To avoid confusion with file descriptors , you can use for loop.</p>\n\n<pre><code>for inrec in `cat base.dat`                           # Read base file until EOF\n do                                        # Start work loop\n    v_pcn=${inrec:0:9}                     # Get 1st 9 Characters in v_pcn\n#   v_pcn=${v_pcn/' '/0}                   # Replace blanks with '0'\n    if [[ $v_pcn &lt; '518000000' ]]; then    # pcn &lt; \"518000000\"\n         echo $inrec &gt;&gt; base1.dat          # write rec to \"base1.dat\"\n    elif [[ $v_pcn &gt; '525000000' || $v_pcn == '525000000' ]]; then  # pcn &gt;= \"525000000\"\n         echo $inrec &gt;&gt; base3.dat          # write rec to \"base3.dat\"\n    else                                   # else &gt;= \"518000000\" &amp; &lt; \"525000000\"\n         echo $inrec &gt;&gt; base2.dat          # write rec to \"base2.dat\"\n    fi\n done\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 16325, "user_id": 3220113, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a1c0b015f14adfdf581d04c065e903d?s=128&d=identicon&r=PG&f=1", "display_name": "Walter A", "link": "https://stackoverflow.com/users/3220113/walter-a"}, "is_accepted": false, "score": 0, "last_activity_date": 1551907868, "last_edit_date": 1551907868, "creation_date": 1550524122, "answer_id": 54755383, "question_id": 54678437, "link": "https://stackoverflow.com/questions/54678437/splitting-file-with-if-then-else-into-3-files/54755383#54755383", "title": "Splitting file with If-Then-Else into 3 files", "body": "<p>Only tested with <code>bash</code>, but the next solution should work with some <code>ksh</code> versions too.\nFirst reconsider the boundaries. The beautiful round figures allow us to look at the first 3 characters. This should benefit you in all solutions.<br>\nWith <code>tee</code> you can write to stdout and a file, but also to different processes.</p>\n\n<pre><code>tee &lt; base.dat \\\n    &gt;(grep -E \"^([0-4]|50|51[0-7])\"    &gt; base1.dat) \\\n    &gt;(grep -E \"^5(1[89]|2[0-4])\"       &gt; base2.dat) |\n      grep -E \"^(52[5-9]|5[3-9]|6-9])\" &gt; base3.dat\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 11058439, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aa1467f936d1d9199e09be3e719af79b?s=128&d=identicon&r=PG&f=1", "display_name": "Chazzn", "link": "https://stackoverflow.com/users/11058439/chazzn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 90, "favorite_count": 1, "answer_count": 4, "score": 2, "last_activity_date": 1551907868, "creation_date": 1550087865, "last_edit_date": 1550091290, "question_id": 54678437, "link": "https://stackoverflow.com/questions/54678437/splitting-file-with-if-then-else-into-3-files", "title": "Splitting file with If-Then-Else into 3 files", "body": "<p>Why code to split large file written in Perl running much faster the code written in Korn Shell. Over a million input records. The first 9 characters of each record are used to determine which file the record is written to, and it runs in about 4-5 minutes in Perl.\nI have attempted to convert this code to ksh and it seems to run forever (hours). </p>\n\n<p>I really have no clue what I have done wrong that is causing this problem. In some of the records there is a blank and/or alpha characters embedded in the string so the comparison must be a string type comparison. Any ideas about making my ksh script get the perl performance or why it is not ?</p>\n\n<p>I have tried several different options since ksh/bash tends to have a lot of ways to do the same or similar things in handling variables and comparisons. I also do not have a good handle on exactly how this very old Perl code is operating. </p>\n\n<p>My Perl Code:</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>open(FILEIN,\"base.dat\") || die \"Could not open FILEIN\\n.\";\n\nopen(FILEOUT1,\"&gt;base1.dat\") || die \"Could not open FILEOUT1\\n.\";\nopen(FILEOUT2,\"&gt;base2.dat\") || die \"Could not open FILEOUT2\\n.\";\nopen(FILEOUT3,\"&gt;base3.dat\") || die \"Could not open FILEOUT3\\n.\";\n\n$v_break =  \"518000000\";\n$v_break2 = \"525000000\";\n\n#Run until end of file\nwhile (&lt;FILEIN&gt;)   {\n  $v_pcn = substr($_, 0, 9);\n\n  if ($v_break gt $v_pcn) {\n     print FILEOUT1 $_;\n  }\n  elsif (($v_pcn ge $v_break) &amp;&amp; ($v_pcn lt $v_break2)) {\n     print FILEOUT2 $_;\n  }\n  else\n  {\n    print FILEOUT3 $_;\n  }\n}  #(&lt;FILEIN&gt;)\n\nclose(FILEIN);\nclose(FILEOUT1);\nclose(FILEOUT2);\nclose(FILEOUT3);\n</code></pre>\n\n<p>My Shell script (ksh):</p>\n\n<pre class=\"lang-ksh prettyprint-override\"><code>while read inrec                           # Read base file until EOF\n do                                        # Start work loop\n    v_pcn=${inrec:0:9}                     # Get 1st 9 Characters in v_pcn\n#   v_pcn=${v_pcn/' '/0}                   # Replace blanks with '0'\n    if [[ $v_pcn &lt; '518000000' ]]; then    # pcn &lt; \"518000000\"\n         echo $inrec &gt;&gt; base1.dat          # write rec to \"base1.dat\"\n    elif [[ $v_pcn &gt; '525000000' || $v_pcn == '525000000' ]]; then  # pcn &gt;= \"525000000\"\n         echo $inrec &gt;&gt; base3.dat          # write rec to \"base3.dat\"\n    else                                   # else &gt;= \"518000000\" &amp; &lt; \"525000000\"\n         echo $inrec &gt;&gt; base2.dat          # write rec to \"base2.dat\"\n    fi\n done &lt; base.dat\n</code></pre>\n\n<p>I expect the shell script to produce 3 output files matching those produced by the perl code and about the same amount of time; </p>\n\n<p>input:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>-rw-r--r--. 1 mfadjobt mfadset 2095795750 Feb 13 10:07 base.dat\n</code></pre>\n\n<p>Output:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>-rw-r--r--. 1 mfadjobt mfadset  461650125 Feb 13 10:07 base1.dat\n-rw-r--r--. 1 mfadjobt mfadset  519783625 Feb 13 10:07 base2.dat\n-rw-r--r--. 1 mfadjobt mfadset 1114362000 Feb 13 10:07 base3.dat\n</code></pre>\n"}, {"tags": ["perl", "text-processing"], "comments": [{"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 3, "creation_date": 1550079966, "post_id": 54676341, "comment_id": 96142066, "body": "There&#39;s no &quot;magic bullet&quot;, you have to write the logic you want. If you have a more specific set of requirements you want to clean up, people may have suggestions. However, in a oneliner the <a href=\"https://perldoc.pl/perlrun#-a\" rel=\"nofollow noreferrer\">-a option</a> may help."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1550080316, "post_id": 54676341, "comment_id": 96142260, "body": "Well, specifying indices <code>3,8,9,15</code> ... ? How are you going to do that &quot;elegantly&quot; in the shell?  You have to write what you want done, but that can also be done in a number of ways and some are far nicer than others.  Also, for some jobs there are ready solutions.  So, what do you want to do?"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 2, "creation_date": 1550080354, "post_id": 54676341, "comment_id": 96142282, "body": "Note, the Perl code you show will not be &quot;<i>easy</i>&quot; with &quot;<i>a combination</i>&quot; of those 4 (&quot;<i>&amp; so on</i>&quot;) tools, two of which are themselves programming languages."}, {"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 3, "creation_date": 1550081660, "post_id": 54676341, "comment_id": 96142882, "body": "Autosplit mode (<code>-a</code>) in combination with <code>-l</code>, <code>-n</code> and often <code>-F</code> is about as simple as using awk. See <code>man perlrun</code> for details on those options."}, {"owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "edited": false, "score": 0, "creation_date": 1550085603, "post_id": 54676341, "comment_id": 96144724, "body": "The first <code>split()</code> indicates that your input data may be CSV. So the first change would be not to write <a href=\"https://stackoverflow.com/a/24950812/8866606\">yet another faulty CSV parser</a> and use <a href=\"https://metacpan.org/pod/Text::CSV\" rel=\"nofollow noreferrer\">Text::CSV</a> instead."}, {"owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "edited": false, "score": 1, "creation_date": 1550085758, "post_id": 54676341, "comment_id": 96144801, "body": "Why does your code read the file into memory instead of using the standard Perl idiom <code>while (&lt;$FH&gt;) { ... }</code>? Better yet, if you have only one input file to process, why don&#39;t you implement your code as filter from <code>STDIN</code> to <code>STDOUT</code>, i.e. <code>while (&lt;STDIN&gt;) {</code>?"}, {"owner": {"reputation": 628, "user_id": 4279387, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/yEPjV.png?s=128&g=1", "display_name": "olivierg", "link": "https://stackoverflow.com/users/4279387/olivierg"}, "edited": false, "score": 0, "creation_date": 1550089576, "post_id": 54676341, "comment_id": 96146606, "body": "thanks for your answers. i was &quot;thinking&quot; that this kind of Perl code was dirty, but looking at your comments it looks like there&#39;s nothing really wrong in my example (apart from the fact that i&#39;m loading all the file in memory in this example) which is.. dissapointing a little bit (i was think that i could do simpler things in perl) but i am glad that my code is not so dirty in fact.. thank you all for your comments"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1550094293, "post_id": 54676341, "comment_id": 96148729, "body": "OK, fair enough, thanks for feedback.  Look, the code you show can be written more &quot;nicely&quot; (have far too many parens, for instance) -- but the main thing here is that there is no well defined task in your example, to put together a &quot;nicer&quot; code snippet for. On the other hand, try splitting a string and extracting some fields in C++ for instance.  Perhaps you just aren&#39;t enjoying Perl&#39;s syntax, with all the @$%  (not swearing!) ... ? :)"}], "answers": [{"comments": [{"owner": {"reputation": 628, "user_id": 4279387, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/yEPjV.png?s=128&g=1", "display_name": "olivierg", "link": "https://stackoverflow.com/users/4279387/olivierg"}, "edited": false, "score": 0, "creation_date": 1550089698, "post_id": 54677810, "comment_id": 96146663, "body": "thank you for your answer, this will help me :), the comma was just to give an example separator, i don&#39;t intend to use CSV specifically, but it will help for sure. Also, i didn&#39;t know that i could use that @fields[1,2,3] syntax, ty"}], "tags": [], "owner": {"reputation": 2833, "user_id": 9300627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7a38cf029222bcf1d902e6b2759ffeb?s=128&d=identicon&r=PG", "display_name": "haukex", "link": "https://stackoverflow.com/users/9300627/haukex"}, "is_accepted": true, "score": 2, "last_activity_date": 1550085438, "creation_date": 1550085438, "answer_id": 54677810, "question_id": 54676341, "link": "https://stackoverflow.com/questions/54676341/perl-text-processing-in-particular-when-loading-files/54677810#54677810", "title": "perl text-processing (in particular when loading files)", "body": "<p>Elegance is subjective, but I can answer at least one of your questions, and suggest some things that might shorten or improve your code.</p>\n\n<p><em>\"is there a way to load just the required part of the file at loading time\"</em> - in the code you showed, I don't see the need to load the entire file into memory. The typical pattern for processing files line-by-line, and the equivalent of what Perl's <a href=\"http://perldoc.perl.org/perlrun.html\" rel=\"nofollow noreferrer\"><code>-n</code> and <code>-p</code> switches</a> do, is this pattern:</p>\n\n<pre><code>open my $fh, '&lt;', $file or die \"$file: $!\";\nwhile (&lt;$fh&gt;) {          # reads line into $_\n    my @fields = split;  # splits $_ on whitespace, like awk\n    my ($foo, $bar, $some, $thing) = @fields[3,8,9,15];\n    ...\n}\nclose $fh;\n</code></pre>\n\n<p>I consider that fairly elegant, but based on what you're writing I guess you're comparing that to oneliners of piped commands that fit within maybe 100 characters. Perl can do that too: as the comments have already mentioned, have a look at the switches <a href=\"http://perldoc.perl.org/perlrun.html\" rel=\"nofollow noreferrer\"><code>-n</code>, <code>-p</code>, <code>-a</code>, <code>-F</code>, and <code>-i</code></a>. If you show some concrete examples of things you want to do, you'll probably get some replies showing how to do it shorter with Perl.</p>\n\n<p>But if you're going to be doing more, then it's usually better to expand that into a script like the one above. IMHO putting things into a script gives you more power: it's not ephemeral like the command-line history, it's more easily extensible, and it's easier to use modules, you can add command-line options, process multiple files, and so on. Just for example, with the following snippet, you get all the power of <a href=\"https://metacpan.org/pod/Text::CSV\" rel=\"nofollow noreferrer\"><code>Text::CSV</code></a> - support for quoting, escaping, multiline strings, etc.</p>\n\n<pre><code>use Text::CSV;\nmy $csv = Text::CSV-&gt;new({binary=&gt;1, auto_diag=&gt;2, eol=&gt;$/});\nopen my $fh, '&lt;', $file or die \"$file: $!\";\nwhile ( my $row = $csv-&gt;getline($fh) ) {\n    ...\n    $csv-&gt;print(select, $row);\n}\n$csv-&gt;eof or $csv-&gt;error_diag;\nclose $fh;\n</code></pre>\n\n<p>You might also want to check out that module's <code>csv</code> function, which provides a lot of functionality in a short function. If you still think that's all to <em>\"painful\"</em> and <em>\"dirty\"</em> and you'd rather do stuff with less code, then there are a few shortcuts you could take, for example to slurp a whole file into memory, <code>my $data = do { local (*ARGV, $/) = $file; &lt;&gt; };</code>, or to do the same as the <code>-i</code> command-line switch:</p>\n\n<pre><code>local ($^I, @ARGV) = ('.bak', $file);\nwhile (&lt;&gt;) {\n    # s///; or @F=split; or whatever\n    print;  # prints $_ back out\n}\n</code></pre>\n\n<p>One thing I like about Perl is that it lets you express yourself in lots of different ways - whether you want to hack together a really short script to take care of a one-time task, or write a big OO project, <a href=\"https://en.wikipedia.org/wiki/There%27s_more_than_one_way_to_do_it\" rel=\"nofollow noreferrer\">TIMTOWTDI</a> \ud83d\ude42</p>\n"}], "owner": {"reputation": 628, "user_id": 4279387, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/yEPjV.png?s=128&g=1", "display_name": "olivierg", "link": "https://stackoverflow.com/users/4279387/olivierg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 95, "favorite_count": 1, "accepted_answer_id": 54677810, "answer_count": 1, "score": 2, "last_activity_date": 1550085438, "creation_date": 1550079652, "last_edit_date": 1550085273, "question_id": 54676341, "link": "https://stackoverflow.com/questions/54676341/perl-text-processing-in-particular-when-loading-files", "title": "perl text-processing (in particular when loading files)", "body": "<p>Loading files and sorting columns is usually easy in shell with a combination of <code>grep</code>, <code>cut</code>, <code>sed</code>, <code>awk</code> &amp; so on.</p>\n\n<p>However, when I have to do it in Perl, I often end up doing long and painful things using many splits, one after another, regexes, and the result is dirty code that looks like something like this:</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>open $FH, \"&lt;\", $file;\n@file = &lt;$FH&gt;;\nclose $FH;\nforeach $line (@file) {\n    ( $foo, $bar, $some, $thing) = ( split(/,/, $line) )[3,8,9,15] \n    ( $new_some ) = (split(/-/, $some))[2];\n    ($new_foo = $foo) =~ s/xx//;\n    $uc_bar = uc($bar);\n    # and so on.....\n}\n</code></pre>\n\n<p>Isn't there a more elegant way of doing such things (splitting fields, replacing patterns etc.)? Or a more \"quicker\" way (not necessarily elegant)?</p>\n\n<p>Also is there a way to load just the required part of the file at loading time, (without having to load everything in memory, but filter prior to the loading)?</p>\n"}, {"tags": ["sql", "sqlite", "perl", "dbi"], "comments": [{"owner": {"reputation": 188041, "user_id": 10676716, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/arsQA.jpg?s=128&g=1", "display_name": "GMB", "link": "https://stackoverflow.com/users/10676716/gmb"}, "edited": false, "score": 2, "creation_date": 1550076082, "post_id": 54675195, "comment_id": 96139936, "body": "Can you please share the table structure ? You can just execute <code>.schema MY_TABLE;</code> from sqlite command line and update your question with the output."}, {"owner": {"reputation": 129, "user_id": 10547018, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec880f350ef1c870c705ac6310294d2f?s=128&d=identicon&r=PG&f=1", "display_name": "Garry White", "link": "https://stackoverflow.com/users/10547018/garry-white"}, "reply_to_user": {"reputation": 188041, "user_id": 10676716, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/arsQA.jpg?s=128&g=1", "display_name": "GMB", "link": "https://stackoverflow.com/users/10676716/gmb"}, "edited": false, "score": 0, "creation_date": 1550076459, "post_id": 54675195, "comment_id": 96140158, "body": "@GMB I added the info for the <code>ID</code> field, unfortunately, can&#39;t share more."}, {"owner": {"reputation": 188041, "user_id": 10676716, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/arsQA.jpg?s=128&g=1", "display_name": "GMB", "link": "https://stackoverflow.com/users/10676716/gmb"}, "edited": false, "score": 0, "creation_date": 1550076833, "post_id": 54675195, "comment_id": 96140359, "body": "Without the full definition of the table it is hard to tell exactly what is going wrong. Why can&#39;t you share more ? You can make anonymous the information that you don&#39;t want to share."}, {"owner": {"reputation": 188041, "user_id": 10676716, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/arsQA.jpg?s=128&g=1", "display_name": "GMB", "link": "https://stackoverflow.com/users/10676716/gmb"}, "edited": false, "score": 0, "creation_date": 1550076839, "post_id": 54675195, "comment_id": 96140361, "body": "Also, <code>AUTO_INCREMENT</code> should be <code>AUTOINCREMENT</code> in sqlite."}], "answers": [{"comments": [{"owner": {"reputation": 188041, "user_id": 10676716, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/arsQA.jpg?s=128&g=1", "display_name": "GMB", "link": "https://stackoverflow.com/users/10676716/gmb"}, "edited": false, "score": 0, "creation_date": 1550076649, "post_id": 54675309, "comment_id": 96140275, "body": "@GarryWhite : there was an extra <code>?</code> that I forgot to remove. Please try again now."}, {"owner": {"reputation": 129, "user_id": 10547018, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec880f350ef1c870c705ac6310294d2f?s=128&d=identicon&r=PG&f=1", "display_name": "Garry White", "link": "https://stackoverflow.com/users/10547018/garry-white"}, "edited": false, "score": 0, "creation_date": 1550076688, "post_id": 54675309, "comment_id": 96140291, "body": "<code>I also tried to skip the paramter completely from the querry and from the parameters but same results</code> ... I thought about it too, but it throws the same error"}], "tags": [], "owner": {"reputation": 188041, "user_id": 10676716, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/arsQA.jpg?s=128&g=1", "display_name": "GMB", "link": "https://stackoverflow.com/users/10676716/gmb"}, "is_accepted": false, "score": 2, "last_activity_date": 1550076621, "last_edit_date": 1550076621, "creation_date": 1550076149, "answer_id": 54675309, "question_id": 54675195, "link": "https://stackoverflow.com/questions/54675195/dbdsqlitest-execute-failed-id-may-not-be-null/54675309#54675309", "title": "DBD::SQLite::st execute failed: ID may not be NULL", "body": "<p>I suspect that you should not pass an empty value to the column, but instead not pass the column itself.</p>\n\n<p>Try :</p>\n\n<pre><code>use DBI;\nmy $db = DBI-&gt;connect(\"...\");\nmy $sql = qq{\n    insert into MY_TABLE (col_b, col_c, col_d)\n    values(?, ?, ?)\n}\n\nmy $st = $db-&gt;prepare($sql);\n$st-&gt;execute('val2', 'val3', 'val4');\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 129, "user_id": 10547018, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec880f350ef1c870c705ac6310294d2f?s=128&d=identicon&r=PG&f=1", "display_name": "Garry White", "link": "https://stackoverflow.com/users/10547018/garry-white"}, "edited": false, "score": 0, "creation_date": 1550078267, "post_id": 54675910, "comment_id": 96141108, "body": "Apparently the database which I received was wrongly configured with that <code>[INT AUTO_INCRMEENT]</code>. I didn&#39;t even considered I should check it first... thanks!"}], "tags": [], "owner": {"reputation": 2050, "user_id": 4488070, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/343f7e053fbfad125f237b9178e5b688?s=128&d=identicon&r=PG&f=1", "display_name": "varro", "link": "https://stackoverflow.com/users/4488070/varro"}, "is_accepted": true, "score": 1, "last_activity_date": 1550078021, "creation_date": 1550078021, "answer_id": 54675910, "question_id": 54675195, "link": "https://stackoverflow.com/questions/54675195/dbdsqlitest-execute-failed-id-may-not-be-null/54675910#54675910", "title": "DBD::SQLite::st execute failed: ID may not be NULL", "body": "<p>As elsewhere mentioned, the correct spelling is AUTOINCREMENT, not AUTO_INCREMENT, but never mind about that, what you really need is to declare your ID field <code>INTEGER PRIMARY KEY</code>, <em>exactly</em> like that, <code>INT</code> isn't good enough, and you don't normally need the <code>AUTOINCREMENT</code> keyword anyway (see under <a href=\"https://sqlite.org/lang_createtable.html\" rel=\"nofollow noreferrer\">https://sqlite.org/lang_createtable.html</a>), and don't specify anything for ID in your <code>INSERT</code> statment.</p>\n"}, {"comments": [{"owner": {"reputation": 129, "user_id": 10547018, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec880f350ef1c870c705ac6310294d2f?s=128&d=identicon&r=PG&f=1", "display_name": "Garry White", "link": "https://stackoverflow.com/users/10547018/garry-white"}, "edited": false, "score": 0, "creation_date": 1550078413, "post_id": 54675987, "comment_id": 96141185, "body": "Thank you Shawn, as @varro already answered that was the mistake. I received the database and I wasn&#39;t considering checking whether it was correclty setup or not."}], "tags": [], "owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "is_accepted": false, "score": 1, "last_activity_date": 1550078307, "creation_date": 1550078307, "answer_id": 54675987, "question_id": 54675195, "link": "https://stackoverflow.com/questions/54675195/dbdsqlitest-execute-failed-id-may-not-be-null/54675987#54675987", "title": "DBD::SQLite::st execute failed: ID may not be NULL", "body": "<pre><code>ID [INT AUTO_INCREMENT] NOT NULL,\nPRIMARY KEY (ID)\n</code></pre>\n\n<ol>\n<li><code>AUTOINCREMENT</code> (Not <code>AUTO_INCREMEMENT</code>) only works with an <code>INTEGER PRIMARY KEY</code> column (And usually shouldn't be used anyways as it doesn't do what the name implies; <a href=\"https://www.sqlite.org/autoinc.html\" rel=\"nofollow noreferrer\">details</a>).</li>\n<li>Most sqlite tables have a primary key that's an signed 64 bit integer (The <a href=\"https://www.sqlite.org/rowidtable.html\" rel=\"nofollow noreferrer\">rowid</a>). When inserting a new row, if a rowid value is absent or <code>NULL</code>, a new one is generated automatically (This is what people <em>think</em> <code>AUTOINCREMENT</code> does because they're used to how other databases work). An <code>INTEGER PRIMARY KEY</code> column acts an alias for the rowid and behaves the same way. Any other primary key is equivalent to a unique index on that column(s). The column affinity has to be <code>INTEGER</code> for a rowid alias. Nothing else, like <code>INT</code>. <a href=\"https://www.sqlite.org/lang_createtable.html#rowid\" rel=\"nofollow noreferrer\">More reading</a>.</li>\n</ol>\n\n<p>So, basically, change your table definition to include</p>\n\n<pre><code>id INTEGER PRIMARY KEY\n</code></pre>\n\n<p>instead and you can leave it out of an <code>INSERT</code> or assign <code>NULL</code> to it and it'll work the way you want.</p>\n"}], "owner": {"reputation": 129, "user_id": 10547018, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec880f350ef1c870c705ac6310294d2f?s=128&d=identicon&r=PG&f=1", "display_name": "Garry White", "link": "https://stackoverflow.com/users/10547018/garry-white"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 151, "favorite_count": 0, "accepted_answer_id": 54675910, "answer_count": 3, "score": 0, "last_activity_date": 1550127076, "creation_date": 1550075744, "last_edit_date": 1550127076, "question_id": 54675195, "link": "https://stackoverflow.com/questions/54675195/dbdsqlitest-execute-failed-id-may-not-be-null", "title": "DBD::SQLite::st execute failed: ID may not be NULL", "body": "<p>I try to insert a row using Perl in a table from an SQLite database.\nThe table has a column <code>ID</code> with the <code>AUTOINCREMENT</code> and <code>PRIMARY KEY</code> properties set.</p>\n\n<p>From the <code>MY_TABLE</code> schema, this is all the information regarding the <code>ID</code> field:  </p>\n\n<pre><code>ID [INT AUTO_INCREMENT] NOT NULL,\nPRIMARY KEY (ID)\n</code></pre>\n\n<p>I don't want to configure the <code>ID</code> for each new row added, therefore I tried several ways to let the database to update it itself, but I get:  </p>\n\n<blockquote>\n  <p>DBD::SQLite::st execute failed: MY_TABLE.ID may not be NULL</p>\n</blockquote>\n\n<pre><code>use DBI;\nmy $db = DBI-&gt;connect(\"...\");\nmy $sql = qq{\n    insert into MY_TABLE (ID, col_b, col_c, col_d)\n    values(?, ?, ?, ?)\n}\n\nmy $st = $db-&gt;prepare($sql);\n$st-&gt;execute(undef, 'val2', 'val3', 'val4');\n</code></pre>\n\n<p>I also tried to skip the parameter completely from the query and from the parameters but same results. Putting <code>0</code> instead of <code>undef</code> inserts the actual value (which I don't want to, I want to be incremented automatically).</p>\n\n<p>What am I missing?</p>\n"}, {"tags": ["perl", "debugging", "tie"], "comments": [{"owner": {"reputation": 514, "user_id": 10844371, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LSI8M.jpg?s=128&g=1", "display_name": "sergiotarxz", "link": "https://stackoverflow.com/users/10844371/sergiotarxz"}, "edited": false, "score": 0, "creation_date": 1550051296, "post_id": 54666281, "comment_id": 96124396, "body": "Is your hash only two dimensional or more/less than two dimensions can appear?"}, {"owner": {"reputation": 13167, "user_id": 546205, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/5d7dd187ae1f4400664cbc0e66c8a2ce?s=128&d=identicon&r=PG", "display_name": "Miguel Prz", "link": "https://stackoverflow.com/users/546205/miguel-prz"}, "edited": false, "score": 1, "creation_date": 1550060548, "post_id": 54666281, "comment_id": 96130022, "body": "Use a tie hash and overload the methods you want: <a href=\"https://perldoc.perl.org/Tie/Hash.html\" rel=\"nofollow noreferrer\">perldoc.perl.org/Tie/Hash.html</a>"}], "answers": [{"comments": [{"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1550079626, "post_id": 54669292, "comment_id": 96141874, "body": "Another reason the set magic may be preferred in this case is that restricted hashes (what you get when you set a hash readonly) are a little more than just read-only; it also errors if you access a nonexistent key, even as an rvalue. (See <a href=\"https://metacpan.org/pod/Const::Fast#CAVEATS\" rel=\"nofollow noreferrer\">Const::Fast caveats</a> for example)"}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 6, "last_activity_date": 1550067986, "last_edit_date": 1550067986, "creation_date": 1550057953, "answer_id": 54669292, "question_id": 54666281, "link": "https://stackoverflow.com/questions/54666281/how-to-watch-particular-hash-key-for-changing-its-value/54669292#54669292", "title": "How to watch particular hash key for changing its value?", "body": "<pre><code>my $hash = { foo =&gt; { bar =&gt; 1 } };\nInternals::SvREADONLY( $hash-&gt;{foo}{bar}, 1 );\n$hash-&gt;{foo}{bar} = 2;\n</code></pre>\n\n<p>produces </p>\n\n<pre><code>Modification of a read-only value attempted at -e line 4.\n</code></pre>\n\n<p>But that's a fatal error, and it doesn't include a trace (unless Carp::Always is used). </p>\n\n<p>I would recommend adding <em>set magic</em> to the scalar.</p>\n\n<pre><code>use Carp            qw( cluck );\nuse Variable::Magic qw( wizard cast );\n\nmy $wizard = wizard(\n   set =&gt; sub {\n      cluck(\"Warning: Modification of a read-only value attempted\");\n   },\n);\n\nmy $hash = { foo =&gt; { bar =&gt; 1 } };\ncast( $hash-&gt;{foo}{bar}, $wizard );\n$hash-&gt;{foo}{bar} = 2;\n</code></pre>\n\n<p>produces</p>\n\n<pre><code>Warning: Modification of a read-only value attempted at -e line 6.\n        main::__ANON__(SCALAR(0x4200c90), undef) called at -e line 12\n        eval {...} called at -e line 12\n</code></pre>\n\n<p>The same can be accomplished with <code>tie</code>, but it would be more expensive. (Tied variables are built upon <code>magic</code>.)</p>\n"}, {"tags": [], "owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "is_accepted": false, "score": 3, "last_activity_date": 1550084263, "last_edit_date": 1550084263, "creation_date": 1550067730, "answer_id": 54672437, "question_id": 54666281, "link": "https://stackoverflow.com/questions/54666281/how-to-watch-particular-hash-key-for-changing-its-value/54672437#54672437", "title": "How to watch particular hash key for changing its value?", "body": "<p><a href=\"https://metacpan.org/pod/Tie::Trace\" rel=\"nofollow noreferrer\"><code>Tie::Trace</code></a> almost gets you there.</p>\n\n<pre><code>use Tie::Trace 'watch';\nmy $hash = { foo =&gt; { bar =&gt; \"original value\" } };\nwatch $hash-&gt;{foo}{bar};\nsub f1 { f2() }\nsub f2 { f3() }\nsub f3 { $hash-&gt;{foo}{bar} = \"new value\" }\nf1();\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>'new value' at watch.pl line 6\n</code></pre>\n\n<p>You can make the output produce a full stack trace by importing <code>Carp::Always</code> or by monkey patching the <a href=\"https://metacpan.org/source/KTAT/Tie-Trace-0.17/lib/Tie/Trace.pm#L114\" rel=\"nofollow noreferrer\"><code>Tie::Trace::_carpit</code></a> function or with a <code>$SIG{__WARN__}</code> handler like</p>\n\n<pre><code>$SIG{__WARN__} = sub {\n    if (caller(0) eq 'Tie::Trace') {\n        # warning is from Tie::Trace\n        Carp::cluck(@_);\n    } else {\n        CORE::warn(@_);\n    }\n};\n...\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 514, "user_id": 10844371, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LSI8M.jpg?s=128&g=1", "display_name": "sergiotarxz", "link": "https://stackoverflow.com/users/10844371/sergiotarxz"}, "is_accepted": false, "score": 0, "last_activity_date": 1550138893, "creation_date": 1550138893, "answer_id": 54687839, "question_id": 54666281, "link": "https://stackoverflow.com/questions/54666281/how-to-watch-particular-hash-key-for-changing-its-value/54687839#54687839", "title": "How to watch particular hash key for changing its value?", "body": "<p>I have done a \"simple\" function to do this, it doesn't work with hashes which contains arrays:</p>\n\n<pre><code>use v5.28;\nuse Storable qw(dclone);\n\nmy $ori = {\n    'hola' =&gt; {\n        'hola' =&gt; 'adios',\n        'adios' =&gt; 'hola'\n    },\n    'hey' =&gt; 'you'\n};\nmy $copy = dclone($ori);\n$ori-&gt;{'hola'}{'adios'} = {'good', 'bye', 'hello', 'year'};\ncompare($ori, $copy, sub { say $_[0]; });\n\nsub compare {\n    my $original = shift;\n    my $copy = shift;\n    my $func = shift;\n    for my $el (keys %{$original}) {\n        if (ref $original-&gt;{$el} eq ref {}) {\n                compare($original-&gt;{$el}, ref $copy-&gt;{$el} \n                        eq ref {} ? $copy-&gt;{$el}:{} , $func);\n        } else {\n            unless ($copy-&gt;{$el} eq $original-&gt;{$el}) {\n                &amp;$func($original-&gt;{$el}, {}, $func);\n            }\n        }\n    }\n}\n~             \n</code></pre>\n"}], "owner": {"reputation": 1445, "user_id": 1441592, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/2a58917def8d1523a840b52ae7d59d21?s=128&d=identicon&r=PG", "display_name": "Paul Serikov", "link": "https://stackoverflow.com/users/1441592/paul-serikov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 114, "favorite_count": 1, "answer_count": 3, "score": 4, "last_activity_date": 1550138893, "creation_date": 1550048848, "question_id": 54666281, "link": "https://stackoverflow.com/questions/54666281/how-to-watch-particular-hash-key-for-changing-its-value", "title": "How to watch particular hash key for changing its value?", "body": "<p>I have a hash, e.g. <code>$hash-&gt;{'foo'}{'bar'}</code>.</p>\n\n<p>I want to call <code>Carp::cluck</code> in any place where value of <code>bar</code> key changed.</p>\n\n<p>How to do that ? Is there any ready module on CPAN that can do that trick ?</p>\n"}, {"tags": ["perl", "naming", "tie"], "comments": [{"owner": {"reputation": 1167, "user_id": 2032248, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/1d472dbfa93dfa948df2f9664622893d?s=128&d=identicon&r=PG&f=1", "display_name": "smartmeta", "link": "https://stackoverflow.com/users/2032248/smartmeta"}, "edited": false, "score": 0, "creation_date": 1550048768, "post_id": 54666089, "comment_id": 96122759, "body": "It is more or less to bind a perl structure in memory directly to a file. So when your script/application closes and starts again it can excess the prior values."}, {"owner": {"reputation": 2833, "user_id": 9300627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7a38cf029222bcf1d902e6b2759ffeb?s=128&d=identicon&r=PG", "display_name": "haukex", "link": "https://stackoverflow.com/users/9300627/haukex"}, "reply_to_user": {"reputation": 1167, "user_id": 2032248, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/1d472dbfa93dfa948df2f9664622893d?s=128&d=identicon&r=PG&f=1", "display_name": "smartmeta", "link": "https://stackoverflow.com/users/2032248/smartmeta"}, "edited": false, "score": 0, "creation_date": 1550082676, "post_id": 54666089, "comment_id": 96143405, "body": "@smartmeta That&#39;s only a small subset of what the <code>tie</code> interface can do. One of the oldest, certainly, but the <code>tie</code> interface is a general-purpose interface that allows tying most kinds of Perl variables to any logic one wants."}], "answers": [{"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 9, "last_activity_date": 1550052647, "last_edit_date": 1550052647, "creation_date": 1550050840, "answer_id": 54666916, "question_id": 54666089, "link": "https://stackoverflow.com/questions/54666089/what-is-the-common-idea-of-perl-modules-with-tie-namespace/54666916#54666916", "title": "What is the common idea of perl modules with Tie:: namespace?", "body": "<p>The modules in the Tie:: namespace fall into two categories:</p>\n\n<ul>\n<li>Those that implement a class to which a variable can be tied (e.g. <a href=\"http://search.cpan.org/perldoc?Tie::DBI\" rel=\"noreferrer\">Tie::DBI</a>), and</li>\n<li>Those that assist the user in building such classes (e.g. <a href=\"http://search.cpan.org/perldoc?Tie::Hash\" rel=\"noreferrer\">Tie::Hash</a>).</li>\n</ul>\n\n<p><a href=\"http://perldoc.perl.org/functions/tie.html\" rel=\"noreferrer\"><code>tie</code></a> allows an object to take on the interface of a variable. When you read from a tied variable, you are actually calling a method to retrieve information. When you write to a tied variable, you are actually calling a method to with the information.</p>\n\n<p>For example, let's look at a hash tied to Tie::DBI.</p>\n\n<ul>\n<li>When you list the keys of the hash, a method is called which obtains the primary key of each row of a database table instead.</li>\n<li>When you fetch the value of an element of the hash, a method is called which gets the specified row of a database table instead.</li>\n<li>When you create/set the value of an element of the hash, a method is called which creates/set the fields of the specified row of a database table instead.</li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 3, "last_activity_date": 1550163534, "creation_date": 1550163534, "answer_id": 54695472, "question_id": 54666089, "link": "https://stackoverflow.com/questions/54666089/what-is-the-common-idea-of-perl-modules-with-tie-namespace/54695472#54695472", "title": "What is the common idea of perl modules with Tie:: namespace?", "body": "<p>It only covers tying hashes, but my <a href=\"https://www.perl.com/pub/2001/09/04/tiedhash.html/\" rel=\"nofollow noreferrer\">article on perl.com from 2001</a> might answer a few questions.</p>\n"}], "owner": {"reputation": 1445, "user_id": 1441592, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/2a58917def8d1523a840b52ae7d59d21?s=128&d=identicon&r=PG", "display_name": "Paul Serikov", "link": "https://stackoverflow.com/users/1441592/paul-serikov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 89, "favorite_count": 0, "answer_count": 2, "score": 4, "last_activity_date": 1550163534, "creation_date": 1550048256, "question_id": 54666089, "link": "https://stackoverflow.com/questions/54666089/what-is-the-common-idea-of-perl-modules-with-tie-namespace", "title": "What is the common idea of perl modules with Tie:: namespace?", "body": "<p>There are a lot of modules with <code>Tie::</code>namespace on CPAN - <a href=\"https://metacpan.org/pod/distribution/perl/lib/Tie/Hash.pm\" rel=\"nofollow noreferrer\">Tie::Hash</a>, <a href=\"https://metacpan.org/pod/Tie::Sub\" rel=\"nofollow noreferrer\">Tie::Sub</a>, <a href=\"https://metacpan.org/pod/Tie::Cache\" rel=\"nofollow noreferrer\">Tie::Cache</a>, <a href=\"https://metacpan.org/pod/Tie::DBI\" rel=\"nofollow noreferrer\">Tie::DBI</a>, etc. What is common among them ?</p>\n\n<p>I checked <a href=\"https://metacpan.org/pod/distribution/perl/pod/perltie.pod\" rel=\"nofollow noreferrer\">perltie</a> but 'm not sure that I understood the concept clear. Could someone explain it?</p>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "reply_to_user": {"reputation": 48179, "user_id": 905093, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tNTUJ.png?s=128&g=1", "display_name": "Book Of Zeus", "link": "https://stackoverflow.com/users/905093/book-of-zeus"}, "edited": false, "score": 1, "creation_date": 1550037753, "post_id": 54663343, "comment_id": 96117574, "body": "@BookOfZeus that question does not apply, because it talks about string variables, not regexes."}, {"owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "edited": false, "score": 1, "creation_date": 1550038245, "post_id": 54663343, "comment_id": 96117760, "body": "Finally I get it, the formatting in your question was incorrect. You are talking about multiple lines. I&#39;ll improve my answer."}, {"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 0, "creation_date": 1550040542, "post_id": 54663343, "comment_id": 96118727, "body": "Can the two characters appear in any order, or only a / followed by a period?"}, {"owner": {"reputation": 99, "user_id": 10782176, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ecf99d5611f25e7124a2eb47c7cfd011?s=128&d=identicon&r=PG&f=1", "display_name": "Crazy coder", "link": "https://stackoverflow.com/users/10782176/crazy-coder"}, "reply_to_user": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 0, "creation_date": 1550040887, "post_id": 54663343, "comment_id": 96118861, "body": "@Shawn Any order but the matching line should contain both / and ."}], "answers": [{"comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1550042471, "post_id": 54663499, "comment_id": 96119594, "body": "Note clarification from a comment: &quot;<i><b>Any order</b> but the matching line should contain both <code>&#47;</code> and <code>.</code></i>&quot;  (my emphasis)"}, {"owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1550042935, "post_id": 54663499, "comment_id": 96119808, "body": "Updated my answer to reflect the latest comments from OP. Thanks."}], "tags": [], "owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "is_accepted": false, "score": 3, "last_activity_date": 1550044098, "last_edit_date": 1550044098, "creation_date": 1550037549, "answer_id": 54663499, "question_id": 54663343, "link": "https://stackoverflow.com/questions/54663343/wild-card-matching/54663499#54663499", "title": "Wild card matching", "body": "<p>This feels like a duplicate, but I just can't find a good previous question for this.</p>\n\n<p>For <code>/</code> there are two ways:</p>\n\n<ul>\n<li>use <code>m//</code> operator with different separator characters, e.g. <code>m,&lt;regex with /&gt;,</code>, <code>m{&lt;regex with /&gt;}</code>, or</li>\n<li>escape it, i.e. <code>/\\//</code></li>\n</ul>\n\n<p>For <code>.</code> use escaping.</p>\n\n<p>Note that inside a character class (<code>[...]</code>) many special characters no longer need escaping.</p>\n\n<p>Hence we get:</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>$ perl &lt;dummy.txt -ne 'print \"$1: $_\" if m,(\\w+/\\w*\\.),'\nhhail/afgsh.: hhail/afgsh.\nadterhjc/sgsagh.: adterhjc/sgsagh.\n</code></pre>\n\n<p>i.e. the line is printed if it contains one-or-more word characters, followed by a <code>/</code>, zero-or-more word characters, ending with a <code>.</code>.</p>\n\n<p>Recommended reading <a href=\"https://perldoc.perl.org/perlrequick.html\" rel=\"nofollow noreferrer\">perlrequick</a>, <a href=\"https://perldoc.perl.org/perlretut.html\" rel=\"nofollow noreferrer\">perlretut</a> &amp; <a href=\"https://perldoc.perl.org/perlre.html\" rel=\"nofollow noreferrer\">perlre</a>.</p>\n\n<hr>\n\n<p><strong>UPDATE</strong> after OP clarified the requirement in a comment:</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code> $ perl &lt;dummy.txt -ne 'print if m,/, &amp;&amp; m{\\.}'\n hhail/afgsh.\n adterhjc/sgsagh.\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 99, "user_id": 10782176, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ecf99d5611f25e7124a2eb47c7cfd011?s=128&d=identicon&r=PG&f=1", "display_name": "Crazy coder", "link": "https://stackoverflow.com/users/10782176/crazy-coder"}, "edited": false, "score": 0, "creation_date": 1550042037, "post_id": 54664459, "comment_id": 96119394, "body": "It is working but I need your code in the form of script or program but not like command line."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 99, "user_id": 10782176, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ecf99d5611f25e7124a2eb47c7cfd011?s=128&d=identicon&r=PG&f=1", "display_name": "Crazy coder", "link": "https://stackoverflow.com/users/10782176/crazy-coder"}, "edited": false, "score": 1, "creation_date": 1550042269, "post_id": 54664459, "comment_id": 96119521, "body": "@cherry  Edited, and will edit some more.  Let me know if any particular explanations/comments would be helpful."}, {"owner": {"reputation": 99, "user_id": 10782176, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ecf99d5611f25e7124a2eb47c7cfd011?s=128&d=identicon&r=PG&f=1", "display_name": "Crazy coder", "link": "https://stackoverflow.com/users/10782176/crazy-coder"}, "edited": false, "score": 0, "creation_date": 1550046668, "post_id": 54664459, "comment_id": 96121588, "body": "Awesome!Thank you!Can you able to do anything with this program    open(a,&quot;&lt;file.txt&quot;); while(my $line = &lt;a&gt;) { if($line =~ m/\\w+/\\w*\\.//){ \tprint $line;  \t} } close(a);"}, {"owner": {"reputation": 99, "user_id": 10782176, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ecf99d5611f25e7124a2eb47c7cfd011?s=128&d=identicon&r=PG&f=1", "display_name": "Crazy coder", "link": "https://stackoverflow.com/users/10782176/crazy-coder"}, "edited": false, "score": 0, "creation_date": 1550046851, "post_id": 54664459, "comment_id": 96121675, "body": "Please indent it in proper format for my code and analyze it."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 99, "user_id": 10782176, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ecf99d5611f25e7124a2eb47c7cfd011?s=128&d=identicon&r=PG&f=1", "display_name": "Crazy coder", "link": "https://stackoverflow.com/users/10782176/crazy-coder"}, "edited": false, "score": 1, "creation_date": 1550047108, "post_id": 54664459, "comment_id": 96121806, "body": "@cherry  The code you show has two problems: (1) It won&#39;t do what you ask for, because it will only match first <code>&#47;</code> and then <code>.</code>.  It won&#39;t match lines on which there is a <code>.</code> and after it the <code>&#47;</code> (and no more <code>.</code>). (2) Don&#39;t use <code>a</code> for a filehandle -- it may actually work but just wait for trouble.  Instead, make it a &quot;lexical&quot; variable, like <code>$fh</code>"}, {"owner": {"reputation": 99, "user_id": 10782176, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ecf99d5611f25e7124a2eb47c7cfd011?s=128&d=identicon&r=PG&f=1", "display_name": "Crazy coder", "link": "https://stackoverflow.com/users/10782176/crazy-coder"}, "edited": false, "score": 0, "creation_date": 1550047385, "post_id": 54664459, "comment_id": 96121977, "body": "Okay!Thanks for sharing info friend :-)"}, {"owner": {"reputation": 99, "user_id": 10782176, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ecf99d5611f25e7124a2eb47c7cfd011?s=128&d=identicon&r=PG&f=1", "display_name": "Crazy coder", "link": "https://stackoverflow.com/users/10782176/crazy-coder"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1550047506, "post_id": 54664459, "comment_id": 96122054, "body": "Let us <a href=\"https://chat.stackoverflow.com/rooms/188330/discussion-between-cherry-and-zdim\">continue this discussion in chat</a>."}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": true, "score": 3, "last_activity_date": 1550081621, "last_edit_date": 1550081621, "creation_date": 1550041772, "answer_id": 54664459, "question_id": 54663343, "link": "https://stackoverflow.com/questions/54663343/wild-card-matching/54664459#54664459", "title": "Wild card matching", "body": "<p>Given a clarification from a comment</p>\n\n<blockquote>\n  <p>Any order but the matching line should contain both <code>/</code> and <code>.</code></p>\n</blockquote>\n\n<p>an easy way</p>\n\n<pre><code>perl -wne'print if m{/} and m{\\.}' filename\n</code></pre>\n\n<p>This is inefficient in the sense that it starts the regex engine twice and scans each string twice.  However, in most cases that is unnoticable while this code is much clearer than a single regex for the task.</p>\n\n<p>I use <code>{}</code> delimiters so to not have to escape the <code>/</code>, in which case the <code>m</code> in front is compulsory. Then I use the same <code>m{...}</code> on the other pattern for consistency.</p>\n\n<hr>\n\n<p>A most welcome inquiry comes that this be done in a script, not one-liner!  Happy to oblige.</p>\n\n<pre><code>use warnings;\nuse strict;\n\nmy $file = shift || die \"Usage: $0 file\\n\";\n\nopen my $fh, '&lt;', $file or die \"Can't open $file: $!\";\n\nwhile (&lt;$fh&gt;) {\n    print if m{/} and m{\\.};\n}\n\nclose $fh;\n</code></pre>\n"}], "owner": {"reputation": 99, "user_id": 10782176, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ecf99d5611f25e7124a2eb47c7cfd011?s=128&d=identicon&r=PG&f=1", "display_name": "Crazy coder", "link": "https://stackoverflow.com/users/10782176/crazy-coder"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 75, "favorite_count": 0, "accepted_answer_id": 54664459, "answer_count": 2, "score": 0, "last_activity_date": 1550081621, "creation_date": 1550036723, "last_edit_date": 1550038207, "question_id": 54663343, "link": "https://stackoverflow.com/questions/54663343/wild-card-matching", "title": "Wild card matching", "body": "<p>I need to match a sentences which contains both wild card character \\ and . in same sentence.How to do it with Perl?</p>\n\n<p>Say suppose my file has following sentences :</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>ttterfasghti.\nddseghies/affag\nhhail/afgsh.\nasfsdgagh/\nadterhjc/sgsagh.\n</code></pre>\n\n<p>My expected output should be :</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>hhail/afgsh.\nadterhjc/sgsagh.\n</code></pre>\n"}, {"tags": ["perl", "tcp"], "comments": [{"owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "edited": false, "score": 0, "creation_date": 1550028125, "post_id": 54660920, "comment_id": 96115039, "body": "Does the orphan listening port stay forever or does it disappear after a timeout period? If the latter then you probably just need to use the socket option <code>SO_REUSEADDR</code>. Maybe this <a href=\"https://stackoverflow.com/questions/14388706/socket-options-so-reuseaddr-and-so-reuseport-how-do-they-differ-do-they-mean-t\">SO question</a> will help."}, {"owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "edited": false, "score": 0, "creation_date": 1550028651, "post_id": 54660920, "comment_id": 96115187, "body": "i.e. in <a href=\"https://metacpan.org/pod/IO::Socket::INET#new-(-%5BARGS%5D-)\" rel=\"nofollow noreferrer\">IO::Socket::INET</a> terms <code>-&gt;new(..., ReuseAddr =&gt; 1, ...);</code>"}, {"owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "edited": false, "score": 0, "creation_date": 1550084784, "post_id": 54660920, "comment_id": 96144373, "body": "Is your problem solved? If yes, then please accept the answer so it will no longer show up as unanswered. Thank you."}], "answers": [{"comments": [{"owner": {"reputation": 31, "user_id": 9791536, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "orsapihki wiioiv", "link": "https://stackoverflow.com/users/9791536/orsapihki-wiioiv"}, "edited": false, "score": 0, "creation_date": 1550088195, "post_id": 54662128, "comment_id": 96145979, "body": "Thanks for the suggestion, ended up with the error &#39;Your vendor has not defined Socket macro SO_REUSEPORT, used at C:/Dwimperl/perl/lib/IO/Socket/INET.pm line 194&#39;"}, {"owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "reply_to_user": {"reputation": 31, "user_id": 9791536, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "orsapihki wiioiv", "link": "https://stackoverflow.com/users/9791536/orsapihki-wiioiv"}, "edited": false, "score": 0, "creation_date": 1550089836, "post_id": 54662128, "comment_id": 96146728, "body": "Yes, I feared that might happen, because the mentioned SO answer said it is not available on Windows, I just wanted to post the complete standard solution. Please try again after removing <code>ReusePort =&gt; 1</code>."}, {"owner": {"reputation": 31, "user_id": 9791536, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "orsapihki wiioiv", "link": "https://stackoverflow.com/users/9791536/orsapihki-wiioiv"}, "edited": false, "score": 0, "creation_date": 1550110617, "post_id": 54662128, "comment_id": 96153397, "body": "With just <code>ReuseAddr =&gt;1&#39; only I end up with two listening processes </code> TCP    0.0.0.0:10009          0.0.0.0:0              LISTENING       13268 [perl.exe]   TCP    0.0.0.0:10009          0.0.0.0:0              LISTENING       30004 [System]`. Then when I try and connect the socket is opened, but the script does not see the attempt or traffic. As though the socket has been accepted by the old process."}, {"owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "reply_to_user": {"reputation": 31, "user_id": 9791536, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "orsapihki wiioiv", "link": "https://stackoverflow.com/users/9791536/orsapihki-wiioiv"}, "edited": false, "score": 0, "creation_date": 1550113510, "post_id": 54662128, "comment_id": 96154014, "body": "Then I guess the problem is caused by something else, i.e. you&#39;ll need to strip down your server code to the bare minimum that exhibits the problem and add it to the question. Which Perl are your using under WIndows? Have you tried your code with another version, eg. under cygwin or mingw?"}], "tags": [], "owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "is_accepted": false, "score": 2, "last_activity_date": 1550089927, "last_edit_date": 1550089927, "creation_date": 1550029095, "answer_id": 54662128, "question_id": 54660920, "link": "https://stackoverflow.com/questions/54660920/how-do-you-avoid-ophan-listening-socket-in-perl-after-a-script-crash/54662128#54662128", "title": "How do you avoid ophan listening socket in Perl after a script crash?", "body": "<p>Does the problem go away when you add the following?</p>\n\n<p>On most systems the solution would be:</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>my $socket = new IO::Socket::INET (\n    ...\n    ReuseAddr =&gt; 1,\n    ReusePort =&gt; 1,\n    ...\n);\n</code></pre>\n\n<p>On systems that do not have <code>SO_REUSEPORT</code>, like Windows, the solution would be:</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>my $socket = new IO::Socket::INET (\n    ...\n    ReuseAddr =&gt; 1,\n    ...\n);\n</code></pre>\n"}], "owner": {"reputation": 31, "user_id": 9791536, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "orsapihki wiioiv", "link": "https://stackoverflow.com/users/9791536/orsapihki-wiioiv"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 87, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1550089927, "creation_date": 1550019178, "question_id": 54660920, "link": "https://stackoverflow.com/questions/54660920/how-do-you-avoid-ophan-listening-socket-in-perl-after-a-script-crash", "title": "How do you avoid ophan listening socket in Perl after a script crash?", "body": "<p>I have a script that uses IO::Socket::INET to establish a TCP server</p>\n\n<pre><code>my $socket = new IO::Socket::INET (\nLocalHost =&gt; '0.0.0.0',\nLocalPort =&gt; '10010',\nProto =&gt; 'tcp',\nListen =&gt; 5,\n);\n</code></pre>\n\n<p>If my script crashes or is stopped by the user before it reaches the closure of the server socket, then the next time the script is run it cannot bind to the port as there is still a process listening on the to port</p>\n\n<p>Except from the results netstat -anobp tcp</p>\n\n<pre><code>TCP    0.0.0.0:10010          0.0.0.0:0              LISTENING       22628\n[System]\n</code></pre>\n\n<p>Yes I am using Windows.</p>\n\n<p>A task kill request: </p>\n\n<pre><code>taskkill /f /PID 22628\n</code></pre>\n\n<p>fails with:</p>\n\n<pre><code>ERROR: The process \"22628\" not found.\n</code></pre>\n\n<p>The only way to get around this is to reboot, or increment the listening port. Since I am not a real software developer and can write great code first time that doesn't crash, then I run into this problem a lot.</p>\n\n<p>Also worth noting that this happens only once a client has connected to the server.</p>\n\n<p>Is there a way to stop this from happening (no orphan listen process) or a way of getting rid of orphan?</p>\n"}, {"tags": ["perl", "awk", "sed"], "comments": [{"owner": {"reputation": 62252, "user_id": 1435869, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TrEd9.jpg?s=128&g=1", "display_name": "karakfa", "link": "https://stackoverflow.com/users/1435869/karakfa"}, "edited": false, "score": 0, "creation_date": 1550011234, "post_id": 54659691, "comment_id": 96111008, "body": "what do the numbers next the 10 letter long words mean?  Also how big is your file?"}, {"owner": {"reputation": 685, "user_id": 10101956, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1PZFP.jpg?s=128&g=1", "display_name": "Learner", "link": "https://stackoverflow.com/users/10101956/learner"}, "reply_to_user": {"reputation": 62252, "user_id": 1435869, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TrEd9.jpg?s=128&g=1", "display_name": "karakfa", "link": "https://stackoverflow.com/users/1435869/karakfa"}, "edited": false, "score": 0, "creation_date": 1550011323, "post_id": 54659691, "comment_id": 96111032, "body": "@karakfa 0 means there is no F, 1 means there is 1, 2 means there is 2 F in that selection etc etc. The file is rather huge :-) I know that <code>shuf</code> is very memory consumable but still I could not get it to use :-D"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1550012013, "post_id": 54659691, "comment_id": 96111261, "body": "(1) &quot;<i>rather huge</i>&quot; -- how big is your file?  &quot;huge&quot; means different things to different people :)  (2) Do lines  <code>&gt;sp[..]</code> count?  Or do you mean to pick random regions only out of lines with data?"}, {"owner": {"reputation": 685, "user_id": 10101956, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1PZFP.jpg?s=128&g=1", "display_name": "Learner", "link": "https://stackoverflow.com/users/10101956/learner"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1550012405, "post_id": 54659691, "comment_id": 96111383, "body": "@zdim 10000000 lines , random from any line but consecutive (for example cannot pick up a letter from each place, it should get a region including 10 letters) for a number of times"}, {"owner": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "edited": false, "score": 0, "creation_date": 1550074058, "post_id": 54659691, "comment_id": 96138612, "body": "Clarify <code>Note, we should not pick up the same region twice</code>. If we pick the region of chars at positions <code>5-15</code> - can we later pick the region <code>10-20</code> or is that considered picking up the same region twice since they overlap at <code>10-15</code>?"}, {"owner": {"reputation": 685, "user_id": 10101956, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1PZFP.jpg?s=128&g=1", "display_name": "Learner", "link": "https://stackoverflow.com/users/10101956/learner"}, "reply_to_user": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "edited": false, "score": 0, "creation_date": 1550075283, "post_id": 54659691, "comment_id": 96139419, "body": "@Ed Morton yes we can pick up shared but not similar"}], "answers": [{"comments": [{"owner": {"reputation": 685, "user_id": 10101956, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1PZFP.jpg?s=128&g=1", "display_name": "Learner", "link": "https://stackoverflow.com/users/10101956/learner"}, "edited": false, "score": 0, "creation_date": 1550013481, "post_id": 54659920, "comment_id": 96111706, "body": "you said you picked each line once and all together, I see only one solution, do you mind to post the two of them? when you picked up randomly one section of each line ?"}, {"owner": {"reputation": 62252, "user_id": 1435869, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TrEd9.jpg?s=128&g=1", "display_name": "karakfa", "link": "https://stackoverflow.com/users/1435869/karakfa"}, "reply_to_user": {"reputation": 685, "user_id": 10101956, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1PZFP.jpg?s=128&g=1", "display_name": "Learner", "link": "https://stackoverflow.com/users/10101956/learner"}, "edited": false, "score": 0, "creation_date": 1550015141, "post_id": 54659920, "comment_id": 96112140, "body": "This is it. Each line can be picked multiple times."}, {"owner": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "edited": false, "score": 0, "creation_date": 1550085689, "post_id": 54659920, "comment_id": 96144772, "body": "Since it&#39;s selecting a random 10 char string from a random line on each iteration, that could print the same 10-char string from the same line more than once but the OP said <code>Note, we should not pick up the same region twice</code>."}, {"owner": {"reputation": 62252, "user_id": 1435869, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TrEd9.jpg?s=128&g=1", "display_name": "karakfa", "link": "https://stackoverflow.com/users/1435869/karakfa"}, "edited": false, "score": 0, "creation_date": 1550086115, "post_id": 54659920, "comment_id": 96144954, "body": "yes, I know.  It was modified after my answer.  For a true random sample it should be able have duplicates. Still not clear whether each line could be sampled more than once.  Overlapping sequences have their place in sampling as well.  Also not clear it&#39;s allowed or not.  I gave up."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1550087290, "post_id": 54659920, "comment_id": 96145518, "body": "&quot;<i>For a true random sample it should be able have duplicates</i>&quot; -- right, but then most good generators (that I know of) don&#39;t.  If any decent randomness is needed this is a very complex problem really -- but that probably just isn&#39;t the case"}, {"owner": {"reputation": 62252, "user_id": 1435869, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TrEd9.jpg?s=128&g=1", "display_name": "karakfa", "link": "https://stackoverflow.com/users/1435869/karakfa"}, "edited": false, "score": 0, "creation_date": 1550087974, "post_id": 54659920, "comment_id": 96145868, "body": "more fundamental than that.  I guess here it&#39;s intended to have a subrandom (or low-discrepancy) to cover the space more or less evenly avoiding clustering (or repeats) that come from random sequences."}], "tags": [], "owner": {"reputation": 62252, "user_id": 1435869, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TrEd9.jpg?s=128&g=1", "display_name": "karakfa", "link": "https://stackoverflow.com/users/1435869/karakfa"}, "is_accepted": false, "score": 1, "last_activity_date": 1550012578, "last_edit_date": 1550012578, "creation_date": 1550012240, "answer_id": 54659920, "question_id": 54659691, "link": "https://stackoverflow.com/questions/54659691/randomly-pick-a-region-and-process-it-a-number-of-times/54659920#54659920", "title": "Randomly pick a region and process it, a number of times", "body": "<p><code>awk</code> to the rescue!</p>\n\n<p>you didn't specify but there are two random actions going on.  I treated them independently, may not be so.  First picking a line and second picking a random 10 letter substring from that line.</p>\n\n<p>This assumes the file (or actually half of it) can fit in memory.  Otherwise, split the file into equal chunks and run this on chunks. Doing so will reduce some of the clustering but not sure how important in this case.  (If you have one big file, it's possible that all samples may be drawn from the first half, with splitting you eliminate this probability). For certain cases this is a desired property.  Don't know your case.</p>\n\n<pre><code>$ awk 'BEGIN {srand()} \n       !/^&gt;/ {a[++n]=$0} \n       END   {while(i++&lt;1000) \n                {line=a[int(rand()*n)+1]; \n                 s=int(rand()*(length(line)-9));\n                 print ss=substr(line,s,10), gsub(/F/,\"\",ss)}}' file\n\nGERISPKDRC 0\nQDEPRCLHEW 0\nLLYQLFRNLF 2\nGTHGAGAMES 0\nTKALQDVQIR 0\nFCVHTKALQD 1\nSNKAQVKPGQ 0\nCMECQGHGER 0\nTRRFVGHTKD 1\n...\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 685, "user_id": 10101956, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1PZFP.jpg?s=128&g=1", "display_name": "Learner", "link": "https://stackoverflow.com/users/10101956/learner"}, "edited": false, "score": 0, "creation_date": 1550015959, "post_id": 54660518, "comment_id": 96112311, "body": "I am just wondering whey it does not have any threshold number, for example 1000 times, it can go forever when we use while, no?"}, {"owner": {"reputation": 7646, "user_id": 6867048, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b939fdb5809fed8097c38bdf4370747b?s=128&d=identicon&r=PG&f=1", "display_name": "stack0114106", "link": "https://stackoverflow.com/users/6867048/stack0114106"}, "reply_to_user": {"reputation": 685, "user_id": 10101956, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1PZFP.jpg?s=128&g=1", "display_name": "Learner", "link": "https://stackoverflow.com/users/10101956/learner"}, "edited": false, "score": 0, "creation_date": 1550016040, "post_id": 54660518, "comment_id": 96112337, "body": "yes.. if you just pass while(1), it will go forever.. just for capturing the answer, I made it 10"}, {"owner": {"reputation": 685, "user_id": 10101956, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1PZFP.jpg?s=128&g=1", "display_name": "Learner", "link": "https://stackoverflow.com/users/10101956/learner"}, "edited": false, "score": 0, "creation_date": 1550016122, "post_id": 54660518, "comment_id": 96112353, "body": "what are those numbers ? how did you calculate those ?"}, {"owner": {"reputation": 7646, "user_id": 6867048, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b939fdb5809fed8097c38bdf4370747b?s=128&d=identicon&r=PG&f=1", "display_name": "stack0114106", "link": "https://stackoverflow.com/users/6867048/stack0114106"}, "reply_to_user": {"reputation": 685, "user_id": 10101956, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1PZFP.jpg?s=128&g=1", "display_name": "Learner", "link": "https://stackoverflow.com/users/10101956/learner"}, "edited": false, "score": 0, "creation_date": 1550016216, "post_id": 54660518, "comment_id": 96112379, "body": "it is generated by Perl with the cap of your file length(size) after removing lines starting with &gt;"}, {"owner": {"reputation": 685, "user_id": 10101956, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1PZFP.jpg?s=128&g=1", "display_name": "Learner", "link": "https://stackoverflow.com/users/10101956/learner"}, "edited": false, "score": 0, "creation_date": 1550016438, "post_id": 54660518, "comment_id": 96112442, "body": "sure but what for example 1378.61409368207 means?"}, {"owner": {"reputation": 7646, "user_id": 6867048, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b939fdb5809fed8097c38bdf4370747b?s=128&d=identicon&r=PG&f=1", "display_name": "stack0114106", "link": "https://stackoverflow.com/users/6867048/stack0114106"}, "reply_to_user": {"reputation": 685, "user_id": 10101956, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1PZFP.jpg?s=128&g=1", "display_name": "Learner", "link": "https://stackoverflow.com/users/10101956/learner"}, "edited": false, "score": 0, "creation_date": 1550016611, "post_id": 54660518, "comment_id": 96112484, "body": "perl just gives random values in float.. when we use that value in integer context (i.e substr) it will truncate to 1378"}, {"owner": {"reputation": 7646, "user_id": 6867048, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b939fdb5809fed8097c38bdf4370747b?s=128&d=identicon&r=PG&f=1", "display_name": "stack0114106", "link": "https://stackoverflow.com/users/6867048/stack0114106"}, "reply_to_user": {"reputation": 685, "user_id": 10101956, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1PZFP.jpg?s=128&g=1", "display_name": "Learner", "link": "https://stackoverflow.com/users/10101956/learner"}, "edited": false, "score": 0, "creation_date": 1550016643, "post_id": 54660518, "comment_id": 96112493, "body": "To show an example.. <code>echo QLDGSLTMSS | perl -lne &#39; $x=rand(10); print $x; print substr($_,$x) &#39; 2.86913719101907 DGSLTMSS</code>"}], "tags": [], "owner": {"reputation": 7646, "user_id": 6867048, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b939fdb5809fed8097c38bdf4370747b?s=128&d=identicon&r=PG&f=1", "display_name": "stack0114106", "link": "https://stackoverflow.com/users/6867048/stack0114106"}, "is_accepted": false, "score": 0, "last_activity_date": 1550015795, "creation_date": 1550015795, "answer_id": 54660518, "question_id": 54659691, "link": "https://stackoverflow.com/questions/54659691/randomly-pick-a-region-and-process-it-a-number-of-times/54660518#54660518", "title": "Randomly pick a region and process it, a number of times", "body": "<p>Here is one solution using Perl</p>\n\n<p>It slurps the entire file to memory. Then the lines starting with > are removed.\nHere I'm looping for 10 times <code>$i&lt;10</code>, you can increase the count here.\nThen rand function is called by passing length of the file and using the rand value, substr of 10 is computed. <code>$s!~/\\n/</code> guard is to make sure we don't choose the substring crossing newlines.</p>\n\n<pre><code>$ perl -0777 -ne '$_=~s/^&gt;.+?\\n//smg; while($i&lt;10) { $x=rand(length($_)); $s=substr($_,$x,10); $f=()=$s=~/F/g; if($s!~/\\n/) { print \"$s $f\\n\" ;$i++} else { $i-- } } '\nrandom10.txt\nENTQLLETKN 0\nLSEGALSPDG 0\nLRKARAEAED 0\nRLWDLTTGTT 0\nKWSGRCGLGY 0\nTRRFVGHTKD 1\nPVKRPIPHPA 0\nGMVQQIQSVC 0\nLTHPVLSFGI 1\nKVNFPENGFL 2\n\n$\n</code></pre>\n\n<p>To know the random number generated</p>\n\n<pre><code>$ perl -0777 -ne '$_=~s/^&gt;.+?\\n//smg; while($i&lt;10) { $x=rand(length($_)); $s=substr($_,$x,10); $f=()=$s=~/F/g; if($s!~/\\n/) { print \"$s $f $x\\n\" ;$i++} else { $i-- } }\n ' random10.txt\nQLDGSLTMSS 0 1378.61409368207\nDLIAKVDELT 0 1703.46689004765\nSGGGANGTSF 1 900.269562152326\nPEELTLSPKL 0 1368.55540468164\nTCLSEGALSP 0 1016.50744004085\nNRTWNSSAVP 0 23.7868578293154\nVNFPENGFLS 2 363.527933104776\nNSGLTWSGND 0 48.656607650744\nMILSASRDKT 0 422.67705815168\nRRGEDLFMCM 1 290.828530365\nAGDGLLTPDA 0 1481.78080339531\n\n$\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": true, "score": 5, "last_activity_date": 1551170798, "last_edit_date": 1551170798, "creation_date": 1550017338, "answer_id": 54660690, "question_id": 54659691, "link": "https://stackoverflow.com/questions/54659691/randomly-pick-a-region-and-process-it-a-number-of-times/54660690#54660690", "title": "Randomly pick a region and process it, a number of times", "body": "<p>I've got to assume some things here, and leave some restrictions</p>\n\n<ul>\n<li><p>Random regions to pick don't depend on lines; they are simply picked out of the text</p></li>\n<li><p>Order doesn't matter; there should just be N regions spread out through the file</p></li>\n<li><p>File can go to a Gigabyte in size, so can't read it whole first (would be much easier!)</p></li>\n<li><p>There are unhandled (edge or unlikely) cases, discussed after code</p></li>\n</ul>\n\n<p>First build a sorted list of random numbers; these are positions in the file at which regions start. Then, as each line is read, compute its range of characters in the file, and check whether our numbers fall within it. If some do, they mark the start of each random region: pick substrings of desired length starting at those characters. Check whether substrings fit on the line.</p>\n\n<pre><code>use warnings;\nuse strict;\nuse feature 'say';\n\nuse Getopt::Long;\nuse List::MoreUtils qw(uniq);\n\nmy ($region_len, $num_regions) = (10, 10);\nmy $count_freq_for = 'F';\n#srand(10);\n\nGetOptions(\n    'num-regions|n=i' =&gt; \\$num_regions, \n    'region-len|l=i'  =&gt; \\$region_len, \n    'char|c=s'        =&gt; \\$count_freq_for,\n) or usage();\n\nmy $file = shift || usage();\n\n# List of (up to) $num_regions random numbers, spanning the file size\n# However, we skip all '&gt;sp' lines so take more numbers (estimate)\nopen my $fh, '&lt;', $file  or die \"Can't open $file: $!\";\n$num_regions += int $num_regions * fraction_skipped($fh);\nmy @rand = uniq sort { $a &lt;=&gt; $b } \n    map { int(rand (-s $file)-$region_len) } 1..$num_regions;\nsay \"Starting positions for regions: @rand\";\n\nmy ($nchars_prev, $nchars, $chars_left) = (0, 0, 0); \n\nmy $region;\n\nwhile (my $line = &lt;$fh&gt;) { \n    chomp $line;\n    # Total number of characters so far, up to this line and with this line\n    $nchars_prev = $nchars;\n    $nchars += length $line;\n    next if $line =~ /^\\s*&gt;sp/;\n\n    # Complete the region if there wasn't enough chars on the previous line \n    if ($chars_left &gt; 0) {\n        $region .= substr $line, 0, $chars_left;\n        my $cnt = () = $region =~ /$count_freq_for/g;\n        say \"$region $cnt\";\n        $chars_left = -1; \n    };  \n\n    # Random positions that happen to be on this line    \n    my @pos = grep { $_ &gt; $nchars_prev and $_ &lt; $nchars } @rand;\n    # say \"\\tPositions on ($nchars_prev -- $nchars) line: @pos\" if @pos;\n\n    for (@pos) { \n        my $pos_in_line = $_ - $nchars_prev;\n        $region = substr $line, $pos_in_line, $region_len; \n\n        # Don't print if there aren't enough chars left on this line\n        last if ( $chars_left = \n            ($region_len - (length($line) - $pos_in_line)) ) &gt; 0;\n\n        my $cnt = () = $region =~ /$count_freq_for/g;\n        say \"$region $cnt\";\n    }   \n}\n\n\nsub fraction_skipped {\n    my ($fh) = @_;\n    my ($skip_len, $data_len);\n    my $curr_pos = tell $fh;\n    seek $fh, 0, 0  if $curr_pos != 0;\n    while (&lt;$fh&gt;) {\n        chomp;\n        if (/^\\s*&gt;sp/) { $skip_len += length }\n        else           { $data_len += length }\n    }\n    seek $fh, $curr_pos, 0;  # leave it as we found it\n    return $skip_len / ($skip_len+$data_len);\n}\n\nsub usage {\n    say STDERR \"Usage: $0 [options] file\", \"\\n\\toptions: ...\";\n    exit;\n}\n</code></pre>\n\n<p>Uncomment the <code>srand</code> line so to have the same run always, for testing.\nNotes follow.</p>\n\n<p><strong>Some corner cases</strong></p>\n\n<ul>\n<li><p>If the 10-long window doesn't fit on the line from its random position it is completed in the next line -- but any (possible) <em>further</em> random positions on this line are left out. So if our random list has 1120 and 1122 while a line ends at 1125 then the window starting at 1122 is skipped. Unlikely, possible, and of no consequence (other than having one region fewer).</p></li>\n<li><p>When an incomplete region is filled up in the next line (the first <code>if</code> in the <code>while</code> loop), it is <em>possible</em> that that line is shorter than the remaining needed characters (<code>$chars_left</code>). This is very unlikely and needs an additional check there, which is left out.</p></li>\n<li><p>Random numbers are pruned of dupes. This skews the sequence, but minutely what should not matter here; and we may stay with fewer numbers than asked for, but only by very little</p></li>\n</ul>\n\n<p><strong>Handling of issues regarding randomness</strong></p>\n\n<p>\"Randomness\" here is pretty basic, what seems suitable. We also need to consider the following.</p>\n\n<p>Random numbers are drawn over the interval spanning the file size, <code>int(rand -s $file)</code> (minus the region size). But lines <code>&gt;sp</code> are skipped and any of our numbers that may fall within those lines won't be used, and so we may end up with fewer regions than the drawn numbers. Those lines are shorter, thus with a lesser chance of having numbers on them and so not many numbers are lost, but in some runs I saw even 3 out of 10 numbers skipped, ending up with a random sample 70% size of desired.</p>\n\n<p>If this is a bother, there are ways to approach it. To not skew the distribution even further they all should involve pre-processing the file. </p>\n\n<p>The code above makes an initial run over the file, to compute the fraction of chars that will be skipped. That is then used to increase the number of random points drawn. This is of course an \"average\" measure, but which should still produce the number of regions close to desired for large enough files.  </p>\n\n<p>More detailed measures would need to see which random points of a (much larger) distribution are going to be lost to skipped lines and then re-sample to account for that.  This may still mess with the distribution, what arguably isn't an issue here, but more to the point may simply be unneeded.</p>\n\n<p>In all this you read the big file twice. The extra processing time should only be in the seconds but if this is unacceptable change the function <code>fraction_skipped</code> to read through only 10-20% of the file.  With large files this should still provide a reasonable estimate.</p>\n\n<p><strong>Note on a particular test case</strong></p>\n\n<p>With <code>srand(10)</code> (commented-out line near the beginning) we get the random numbers such that on one line the region starts 8 characters before the end of the line! So that case does test the code to complete the region on the next line.</p>\n\n<hr>\n\n<p>A simple driver to run the above a given number of times, for statistics.  </p>\n\n<p>Doing it using only builtin tools (<code>system</code>, <code>qx</code>) is troubled and picky; realistically one needs modules.  So I use <a href=\"https://metacpan.org/pod/IPC::Run\" rel=\"nofollow noreferrer\">IPC::Run</a> here.  There are quite a few other options.<sup>&dagger;</sup> </p>\n\n<p>Adjust and add code to process as needed for statistics; output is in files.  </p>\n\n<pre><code>use warnings;\nuse strict;\nuse feature 'say';\n\nuse Getopt::Long;\nuse IPC::Run qw(run);\n\nmy $outdir = 'rr_output';         # pick a directory name\nmkdir $outdir if not -d $outdir;    \nmy $prog  = 'random_regions.pl';  # your name for the program\nmy $input = 'data_file.txt';      # your name for input file     \nmy $ch = 'F';\n\nmy ($runs, $regions, $len) = (10, 10, 10);    \nGetOptions(\n    'runs|n=i'  =&gt; \\$runs, \n    'regions=i' =&gt; \\$regions, \n    'length=i'  =&gt; \\$len, \n    'char=s'    =&gt; \\$ch, \n    'input=s'   =&gt; \\$input\n) or usage();\n\nmy @cmd = ( $prog, $input, \n    '--num-regions', $regions, \n    '--region-len', $len, \n    '--char', $ch\n);    \nsay \"Run: @cmd, $runs times.\";\n\nfor my $n (1..$runs) {\n    my $outfile = \"$outdir/regions_r$n.txt\";\n    say \"Run #$n, output in: $outdir/$outfile\";\n    run \\@cmd, '&gt;', $outfile  or die \"Error with @cmd: $!\";\n}    \n\nsub usage {\n    say STDERR \"Usage: $0 [options]\", \"\\n\\toptions: ...\";\n    exit;\n}\n</code></pre>\n\n<p>Please expand on the error checking. See for instance <a href=\"https://stackoverflow.com/a/40777096/4653379\">this post</a> and links on details.</p>\n\n<p>Simplest use: <code>driver_random.pl -n 4</code>, but you can give all of main program's parameters.</p>\n\n<p><strong>Note:</strong> The called program (<code>random_regions.pl</code> above) must be executable.</p>\n\n<hr>\n\n<p><sup>&dagger;</sup> &thinsp; Some, from simple to more capable: <a href=\"https://metacpan.org/pod/IPC::System::Simple\" rel=\"nofollow noreferrer\">IPC::System::Simple</a>, <a href=\"https://metacpan.org/pod/Capture::Tiny\" rel=\"nofollow noreferrer\">Capture::Tiny</a>, <a href=\"https://metacpan.org/pod/IPC::Run3\" rel=\"nofollow noreferrer\">IPC::Run3</a>.  (Then comes <code>IPC::Run</code> used here.)  Also see <a href=\"https://metacpan.org/pod/String::ShellQuote\" rel=\"nofollow noreferrer\">String::ShellQuote</a>, to prepare commands without quoting issues, shell injection bugs, and other problems. See links (examples) assembled in <a href=\"https://stackoverflow.com/a/44185799/4653379\">this post</a>, for example.</p>\n"}, {"tags": [], "owner": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "is_accepted": false, "score": 0, "last_activity_date": 1550085203, "last_edit_date": 1550085203, "creation_date": 1550081372, "answer_id": 54676777, "question_id": 54659691, "link": "https://stackoverflow.com/questions/54659691/randomly-pick-a-region-and-process-it-a-number-of-times/54676777#54676777", "title": "Randomly pick a region and process it, a number of times", "body": "<p>Since your input file is huge I'd do it in these steps:</p>\n\n<ol>\n<li>select random 10-char strings from each line of your input file</li>\n<li>shuffle those to get the number of samples you want in random order</li>\n<li>count the Fs</li>\n</ol>\n\n<p>e.g.</p>\n\n<pre><code>$ cat tst.sh\n#!/bin/env bash\ninfile=\"$1\"\n\nsampleSize=10\nnumSamples=15\n\nawk -v sampleSize=\"$sampleSize\" '\n    BEGIN { srand() }\n    !/^&gt;/ {\n        begPos = int((rand() * sampleSize) + 1)\n        endPos = length($0) - sampleSize\n        for (i=begPos; i&lt;=endPos; i+=sampleSize) {\n            print substr($0,i,sampleSize)\n        }\n    }\n' \"$infile\" |\nshuf -n \"$numSamples\"\n</code></pre>\n\n<p>.</p>\n\n<pre><code>$ ./tst.sh file\nHGDIKCVLNE\nQDEPRCLHEW\nSEVQAIIEST\nTHDLRVSLEE\nSEWVSCVRFS\nLTRYLTLNAS\nKDGQKITFHG\nSNSPEPQKAV\nQGGSKATTPA\nQLLETKNALN\nLLFCDNHKKQ\nDETNYGIPQR\nIRFQPQLNPD\nLQTIRFSPDI\nSLKRCGGFLI\n\n$ ./tst.sh file | awk '{print $0, gsub(/F/,\"\")}'\nSPKLQLDGSL 0\nIKLFCVHTKA 1\nVVSRCRLRHT 0\nSPEPQKAVEQ 0\nAYNPKNFSND 1\nFGESRPELGS 1\nAGDGLLTPDA 0\nVGHTKDVLSV 0\nVTHDLRVSLE 0\nPISLGIFPLP 1\nASQITNLRSF 1\nLTRPPEELTL 0\nFDRYGEEGLK 1\nIYIEGQDEPR 0\nWNTLGVCKYT 0\n</code></pre>\n\n<p>Just change the numSamples from 15 to 1000 or whatever you like when run against your real data.</p>\n\n<p>The above relies on <code>shuf -n</code> being able to handle however much input we throw at it, presumably much like <code>sort</code> does by using paging. If it fails in that regard then obviously you'd have to choose/implement a different tool for that part. FWIW I tried <code>seq 100000000 | shuf -n 10000</code> (i.e. 10 times as many input lines as the OPs posted max file length of 10000000 to account for the awk part generating N lines of output per 1 line of input and 10 times as many output lines required than the OPs posted 1000) and it worked fine and only took a few secs to complete.</p>\n"}], "owner": {"reputation": 685, "user_id": 10101956, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1PZFP.jpg?s=128&g=1", "display_name": "Learner", "link": "https://stackoverflow.com/users/10101956/learner"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 156, "favorite_count": 0, "accepted_answer_id": 54660690, "answer_count": 4, "score": 2, "last_activity_date": 1551170798, "creation_date": 1550010874, "last_edit_date": 1550052155, "question_id": 54659691, "link": "https://stackoverflow.com/questions/54659691/randomly-pick-a-region-and-process-it-a-number-of-times", "title": "Randomly pick a region and process it, a number of times", "body": "<p>I have a data like this </p>\n\n<pre><code>&gt;sp|Q96A73|P33MX_HUMAN Putative monooxygenase p33MONOX OS=Homo sapiens OX=9606 GN=KIAA1191 PE=1 SV=1\nRNDDDDTSVCLGTRQCSWFAGCTNRTWNSSAVPLIGLPNTQDYKWVDRNSGLTWSGNDTCLYSCQNQTKGLLYQLFRNLFCSYGLTEAHGKWRCADASITNDKGHDGHRTPTWWLTGSNLTLSVNNSGLFFLCGNGVYKGFPPKWSGRCGLGYLVPSLTRYLTLNASQITNLRSFIHKVTPHR\n&gt;sp|P13674|P4HA1_HUMAN Prolyl 4-hydroxylase subunit alpha-1 OS=Homo sapiens OX=9606 GN=P4HA1 PE=1 SV=2\nVECCPNCRGTGMQIRIHQIGPGMVQQIQSVCMECQGHGERISPKDRCKSCNGRKIVREKKILEVHIDKGMKDGQKITFHGEGDQEPGLEPGDIIIVLDQKDHAVFTRRGEDLFMCMDIQLVEALCGFQKPISTLDNRTIVITSHPGQIVKHGDIKCVLNEGMPIYRRPYEKGRLIIEFKVNFPENGFLSPDKLSLLEKLLPERKEVEE\n&gt;sp|Q7Z4N8|P4HA3_HUMAN Prolyl 4-hydroxylase subunit alpha-3 OS=Homo sapiens OX=9606 GN=P4HA3 PE=1 SV=1\nMTEQMTLRGTLKGHNGWVTQIATTPQFPDMILSASRDKTIIMWKLTRDETNYGIPQRALRGHSHFVSDVVISSDGQFALSGSWDGTLRLWDLTTGTTTRRFVGHTKDVLSVAFSSDNRQIVSGSRDKTIKLWNTLGVCKYTVQDESHSEWVSCVRFSPNSSNPIIVSCGWDKLVKVWNLANCKLK\n&gt;sp|P04637|P53_HUMAN Cellular tumor antigen p53 OS=Homo sapiens OX=9606 GN=TP53 PE=1 SV=4\nIQVVSRCRLRHTEVLPAEEENDSLGADGTHGAGAMESAAGVLIKLFCVHTKALQDVQIRFQPQL\n&gt;sp|P10144|GRAB_HUMAN Granzyme B OS=Homo sapiens OX=9606 GN=GZMB PE=1 SV=2\nMQPILLLLAFLLLPRADAGEIIGGHEAKPHSRPYMAYLMIWDQKSLKRCGGFLIRDDFVLTAAHCWGSSINVTLGAHNIKEQEPTQQFIPVKRPIPHPAYNPKNFSNDIMLLQLERKAKRTRAVQPLRLPSNKAQVKPGQTCSVAGWGQTAPLGKHSHTLQEVKMTVQEDRKCES\n&gt;sp|Q9UHX1|PUF60_HUMAN Poly(U)-binding-splicing factor PUF60 OS=Homo sapiens OX=9606 GN=PUF60 PE=1 SV=1\nMGKDYYQTLGLARGASDEEIKRAYRRQALRYHPDKNKEPGAEEKFKEIAEAYDVLSDPRKREIFDRYGEEGLKGSGPSGGSGGGANGTSFSYTFHGDPHAMFAEFFGGRNPFDTFFGQRNGEEGMDIDDPFSGFPMGMGGFTNVNFGRSRSAQEPARKKQDPPVTHDLRVSLEEIYSGCTKKMKISHK\n&gt;sp|Q06416|P5F1B_HUMAN Putative POU domain, class 5, transcription factor 1B OS=Homo sapiens OX=9606 GN=POU5F1B PE=5 SV=2\nIVVKGHSTCLSEGALSPDGTVLATASHDGYVKFWQIYIEGQDEPRCLHEWKPHDGRPLSCLLFCDNHKKQDPDVPFWRFLITGADQNRELKMWCTVSWTCLQTIRFSPDIFSSVSVPPSLKVCLDLSAEYLILSDVQRKVLYVMELLQNQEEGHACFSSISEFLLTHPVLSFGIQVVSRCRLRHTEVLPAEEENDSLGADGTHGAGAMESAAGVLIKLFCVHTKALQDVQIRFQPQLNPDVVAPLPTHTAHEDFTFGESRPELGSEGLGSAAHGSQPDLRRIVELPAPADFLSLSSETKPKLMTPDAFMTPSASLQQITASPSSSSSGSSSSSSSSSSSLTAVSAMSSTSAVDPSLTRPPEELTLSPKLQLDGSLTMSSSGSLQASPRGLLPGLLPAPADKLTPKGPGQVPTATSALSLELQEVEP\n&gt;sp|O14683|P5I11_HUMAN Tumor protein p53-inducible protein 11 OS=Homo sapiens OX=9606 GN=TP53I11 PE=1 SV=2\nMIHNYMEHLERTKLHQLSGSDQLESTAHSRIRKERPISLGIFPLPAGDGLLTPDAQKGGETPGSEQWKFQELSQPRSHTSLKVSNSPEPQKAVEQEDELSDVSQGGSKATTPASTANSDVATIPTDTPLKEENEGFVKVTDAPNKSEISKHIEVQVAQETRNVSTGSAENEEKSEVQAIIESTPELDMDKDLSGYKGSSTPTKGIENKAFDRNTESLFEELSSAGSGLIGDVDEGADLLGMGREVENLILENTQLLETKNALNIVKNDLIAKVDELTCEKDVLQGELEAVKQAKLKLEEKNRELEEELRKARAEAEDARQKAKDDDDSDIPTAQRKRFTRVEMARVLMERNQYKERLMELQEAVRWTEMIRASRENPAMQEKKRSSIWQFFSRLFSSSSNTTKKPEPPVNLKYNAPTSHVTPSVK\n</code></pre>\n\n<p>I want to randomly pick up a region with 10 letters from it then calculate the number of F, I want to do that for a certain number of times for example 1000 times or even more </p>\n\n<p>as an example, I randomly pick </p>\n\n<pre><code>LVPSLTRYLT    0\n</code></pre>\n\n<p>then </p>\n\n<pre><code>ITNLRSFIHK    1\n</code></pre>\n\n<p>then again randomly go and pick up 10 letters consecutive </p>\n\n<pre><code>AHSRIRKERP    0\n</code></pre>\n\n<p>This continues until it meets the number of run asked. I want to store all randomly selected ones with their values, because then I want to calculate how many times F is seen </p>\n\n<p>So I do the following </p>\n\n<pre><code># first I remove the header \ngrep -v \"&gt;\" data.txt &gt; out.txt\n</code></pre>\n\n<p>then get randomly one region with 10 letters I tried to use <code>shuf</code> with no success, </p>\n\n<pre><code>shuf -n1000 data.txt \n</code></pre>\n\n<p>then I tried to use awk and was not successful either </p>\n\n<pre><code>awk 'BEGIN {srand()} !/^$/ { if (rand() == 10) print $0}'\n</code></pre>\n\n<p>then calculate the number of F and save it in the file</p>\n\n<pre><code>grep -i -e [F] |wc -l \n</code></pre>\n\n<blockquote>\n  <p>Note, we should not pick up the same region twice</p>\n</blockquote>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "edited": false, "score": 0, "creation_date": 1549992556, "post_id": 54655400, "comment_id": 96102803, "body": "Did you mean to write <code>set_column</code> instead of <code>add_column</code> in your question?"}, {"owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "edited": false, "score": 0, "creation_date": 1549992686, "post_id": 54655400, "comment_id": 96102855, "body": "To quote <a href=\"https://metacpan.org/pod/Excel::Writer::XLSX#set_column(-%24first_col,-%24last_col,-%24width,-%24format,-%24hidden,-%24level,-%24collapsed-)\" rel=\"nofollow noreferrer\">Excel::Write::XLSX</a>: &quot;This method can be used to change the default properties of a single column or a range of columns.&quot;. So I guess you would need to clear any possible formats that are already attached to the cells?"}, {"owner": {"reputation": 133, "user_id": 10157177, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-cifsisoxCms/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7qgl7bNfO7PoxgxvnAkalc7y4NiXw/mo/photo.jpg?sz=128", "display_name": "James Finnegan", "link": "https://stackoverflow.com/users/10157177/james-finnegan"}, "reply_to_user": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "edited": false, "score": 0, "creation_date": 1549995658, "post_id": 54655400, "comment_id": 96104170, "body": "Yes, sorry.  I meant to say set_column, not add_column.  I was confusing the add_format.  I think whatever format is in &#39;write&#39; will take precendence over set_column."}], "owner": {"reputation": 133, "user_id": 10157177, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-cifsisoxCms/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7qgl7bNfO7PoxgxvnAkalc7y4NiXw/mo/photo.jpg?sz=128", "display_name": "James Finnegan", "link": "https://stackoverflow.com/users/10157177/james-finnegan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 202, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1549991787, "creation_date": 1549991787, "question_id": 54655400, "link": "https://stackoverflow.com/questions/54655400/excelwriterxlsx-adding-format-after-writing-to-cell", "title": "Excel::Writer::XLSX adding format after writing to cell", "body": "<p>I am writing out a spreadsheet using the Excel::Writer::XLSX module and everything works fine.  I wanted to ask if it is possible to issue a 'set_column' with a particular format to change some columns that have already been written using another format.  The older format does not use the border attribute.  Does the new format using the add_column override the old format from the previous write?</p>\n\n<p>I'm basically putting borders around certain columns using the add_column, but the add_column is not doing it.  </p>\n\n<pre><code>my $fmt_border = $workbook-&gt;add_format( border =&gt; 1);\n$worksheet-&gt;set_column( 'A:A', 40, $fmt_border );\n</code></pre>\n"}, {"tags": ["linux", "shell", "perl", "single-quotes"], "answers": [{"tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 2, "last_activity_date": 1549972546, "creation_date": 1549972546, "answer_id": 54649604, "question_id": 54649510, "link": "https://stackoverflow.com/questions/54649510/quoting-problem-when-use-perl-e-command-in-shell/54649604#54649604", "title": "quoting problem when use perl -e command in shell", "body": "<p>Because with double quotes, the whole string is passed through your shell's variable expansion mechanisms before the Perl compiler sees the code. And as you don't have shell variables called <code>$x</code> or <code>$_</code>, the Perl compiler sees this:</p>\n\n<pre><code>+= ; END{ print ;}\n</code></pre>\n\n<p>With single quotes, your Perl variables are protected from expansion until the Perl compiler can see them.</p>\n"}, {"comments": [{"owner": {"reputation": 1, "user_id": 1633394, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fb1a870f1f046cfd9efd2e2426b65794?s=128&d=identicon&r=PG", "display_name": "infantcoder", "link": "https://stackoverflow.com/users/1633394/infantcoder"}, "edited": false, "score": 0, "creation_date": 1550108359, "post_id": 54649622, "comment_id": 96152919, "body": "yes, need to escape all of the variables."}], "tags": [], "owner": {"reputation": 514, "user_id": 10844371, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LSI8M.jpg?s=128&g=1", "display_name": "sergiotarxz", "link": "https://stackoverflow.com/users/10844371/sergiotarxz"}, "is_accepted": false, "score": 0, "last_activity_date": 1549972628, "creation_date": 1549972628, "answer_id": 54649622, "question_id": 54649510, "link": "https://stackoverflow.com/questions/54649510/quoting-problem-when-use-perl-e-command-in-shell/54649622#54649622", "title": "quoting problem when use perl -e command in shell", "body": "<p>I think the problem is your shell expanding $x as it was a shell variable and not as a perl variable, the solution should be escape $ like this \\$.</p>\n"}], "owner": {"reputation": 1, "user_id": 1633394, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fb1a870f1f046cfd9efd2e2426b65794?s=128&d=identicon&r=PG", "display_name": "infantcoder", "link": "https://stackoverflow.com/users/1633394/infantcoder"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 43, "favorite_count": 0, "closed_date": 1549973872, "answer_count": 2, "score": -1, "last_activity_date": 1549973725, "creation_date": 1549972231, "last_edit_date": 1549973725, "question_id": 54649510, "link": "https://stackoverflow.com/questions/54649510/quoting-problem-when-use-perl-e-command-in-shell", "closed_reason": "Duplicate", "title": "quoting problem when use perl -e command in shell", "body": "<h2>With double quotes</h2>\n\n<p>The following command</p>\n\n<pre class=\"lang-bash prettyprint-override\"><code>$ cat ./multi_meta | jq .Partitions[].DocCount | perl -lne \"$x += $_; END{ print $x;}\"\n</code></pre>\n\n<p>gives me a syntax error\uff1a</p>\n\n<pre class=\"lang-bash prettyprint-override\"><code>syntax error at -e line 1, near \"+=\"\nExecution of -e aborted due to compilation errors.\n</code></pre>\n\n<h2>With single quotes</h2>\n\n<p>I get the correct result with</p>\n\n<pre class=\"lang-bash prettyprint-override\"><code>$ cat ./multi_meta | jq .Partitions[].DocCount | perl -lne '$x += $_; END{ print $x;}'\n</code></pre>\n\n<p>Why?</p>\n"}, {"tags": ["perl", "ssl", "https", "mojolicious"], "comments": [{"owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "edited": false, "score": 0, "creation_date": 1549972817, "post_id": 54649390, "comment_id": 96090384, "body": "There is probably no client certificate, ie. <code>$handle-&gt;peer_certificate()</code> will not return anything. I think it is extremely rare to enable certificates in SSL clients, e.g. if you require your server to only accept clients that provide a valid certificate."}, {"owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "edited": false, "score": 0, "creation_date": 1549973164, "post_id": 54649390, "comment_id": 96090619, "body": "I.e. calling <code>dump_peer_certificate()</code> only makes sense on the <i>client</i> side. It will of course print the information of the server certificate."}, {"owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "edited": false, "score": 0, "creation_date": 1550002298, "post_id": 54649390, "comment_id": 96107286, "body": "Quoting from this <a href=\"https://stackoverflow.com/a/1710543/8866606\">answer</a>: &quot;(1) <b>Client certificate authentication can only be enforced by the server.</b> (2) (Important!) When the server requests a client certificate (as part of the TLS handshake), it will also provide a list of trusted CA&#39;s as part of the certificate request. When the client certificate you wish to present for authentication is <i>not</i> signed by one of these CA&#39;s, it won&#39;t be presented at all&quot; - have you set up your SSL server to request client certificate authentication?"}, {"owner": {"reputation": 105, "user_id": 471355, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8109b6558356a1f16acd73c25790414a?s=128&d=identicon&r=PG", "display_name": "Arunraj Nair", "link": "https://stackoverflow.com/users/471355/arunraj-nair"}, "reply_to_user": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "edited": false, "score": 0, "creation_date": 1550042355, "post_id": 54649390, "comment_id": 96119552, "body": "@StefanBecker I have added the SSL certificate in my browser and SoapUI. Therefore, I presume it should be sending the certificate in the request. I didn&#39;t find relevant info in Mojo::Lite docs to enable client certificate authentication."}, {"owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "edited": false, "score": 0, "creation_date": 1550042644, "post_id": 54649390, "comment_id": 96119688, "body": "My statements are not specific to Mojo::Lite, i.e. they apply to any SSL/TLS server/client setup. I.e. without additional setup the SSL server won&#39;t request and the SSL client won&#39;t authenticate with a certificate. This is <b>different</b> from the other direction, i.e. a server always needs to authenticate with a certificate to the client."}, {"owner": {"reputation": 1934, "user_id": 10667839, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c9ee13d3681ace95a1c13693db607f72?s=128&d=identicon&r=PG&f=1", "display_name": "clamp", "link": "https://stackoverflow.com/users/10667839/clamp"}, "edited": false, "score": 0, "creation_date": 1550050538, "post_id": 54649390, "comment_id": 96123885, "body": "Did you configure hypnotoads listen attribute with a CA certificate file  to verify the client certificate?"}, {"owner": {"reputation": 105, "user_id": 471355, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8109b6558356a1f16acd73c25790414a?s=128&d=identicon&r=PG", "display_name": "Arunraj Nair", "link": "https://stackoverflow.com/users/471355/arunraj-nair"}, "reply_to_user": {"reputation": 1934, "user_id": 10667839, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c9ee13d3681ace95a1c13693db607f72?s=128&d=identicon&r=PG&f=1", "display_name": "clamp", "link": "https://stackoverflow.com/users/10667839/clamp"}, "edited": false, "score": 0, "creation_date": 1550209674, "post_id": 54649390, "comment_id": 96192719, "body": "Thank you @clamp! I had not set <code>?ca=...</code> in the hypnotoad listen config"}], "owner": {"reputation": 105, "user_id": 471355, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8109b6558356a1f16acd73c25790414a?s=128&d=identicon&r=PG", "display_name": "Arunraj Nair", "link": "https://stackoverflow.com/users/471355/arunraj-nair"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 194, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1559068161, "creation_date": 1549971771, "last_edit_date": 1559068161, "question_id": 54649390, "link": "https://stackoverflow.com/questions/54649390/how-to-view-the-client-certificate-in-mojoliciouspluginsslauth-plugin", "title": "How to view the client certificate in Mojolicious::Plugin::SslAuth plugin?", "body": "<p>I have set up a <a href=\"https://metacpan.org/pod/Mojolicious::Lite\" rel=\"nofollow noreferrer\">Mojolicious::Lite</a> server with SSL support using Hypnotoad. I am using <a href=\"https://metacpan.org/pod/distribution/Mojolicious-Plugin-SslAuth/README.pod\" rel=\"nofollow noreferrer\">Mojolicious::Plugin::SslAuth</a> for authenticating the client certificate. When I call <code>dump_peer_certificate()</code> I get </p>\n\n<pre class=\"lang-none prettyprint-override\"><code>[Tue Feb 12 07:26:32 2019] [debug] peer: Subject Name: undefined Issuer  Name: undefined\n</code></pre>\n\n<p>but I expected valid certificate information. Can you help me to understand this message?</p>\n\n<p>Here is SSL handler code:</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>sub register {\n    my ($plugin, $app) = @_;\n\n    $app-&gt;helper(\n        ssl_auth =&gt; sub {\n            my $self     = shift;\n            my $callback = shift;\n\n            my $id     = $self-&gt;tx-&gt;connection;\n            my $handle = Mojo::IOLoop-&gt;stream($id)-&gt;handle;\n\n            # dump_peer_certificate returns-\n            #     Subject Name: undefined\n            #     Issuer  Name: undefined \n            $app-&gt;log-&gt;debug(\"peer: \" . $handle-&gt;dump_peer_certificate());\n\n            # Not SSL connection\n            return if ref $handle ne 'IO::Socket::SSL';\n\n            return $callback-&gt;($handle);\n        }\n    );\n}\n</code></pre>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 3, "creation_date": 1549966847, "post_id": 54647491, "comment_id": 96086784, "body": "Your pattern does not match anything. There&#39;s a typo in there (<i>Adress</i> vs <i>Adresse</i>), and the quantifier is wrong. Please post your <b>real code</b>."}, {"owner": {"reputation": 63, "user_id": 10955982, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-fXlUjyZGvU4/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQM1ntguuklLWl7NMRK18InSOUcfEg/mo/photo.jpg?sz=128", "display_name": "Red_Developper", "link": "https://stackoverflow.com/users/10955982/red-developper"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1549967384, "post_id": 54647491, "comment_id": 96087162, "body": "thank you, I corrected I forgot Address with &quot;E&quot; in the code because I was in French version"}], "answers": [{"comments": [{"owner": {"reputation": 63, "user_id": 10955982, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-fXlUjyZGvU4/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQM1ntguuklLWl7NMRK18InSOUcfEg/mo/photo.jpg?sz=128", "display_name": "Red_Developper", "link": "https://stackoverflow.com/users/10955982/red-developper"}, "edited": false, "score": 0, "creation_date": 1549970728, "post_id": 54647791, "comment_id": 96089065, "body": "thank you very much @ikegami, it answers correctly to my need"}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 4, "last_activity_date": 1549966881, "creation_date": 1549966881, "answer_id": 54647791, "question_id": 54647491, "link": "https://stackoverflow.com/questions/54647491/get-all-occurances-of-matches-pattern-perl/54647791#54647791", "title": "Get all occurances of matches pattern perl", "body": "<p>All captures of all matches are returned, so you'd have to group them up.</p>\n\n<pre><code>use List::Util 1.29 qw( pairs );\n\nfor ( pairs( $str =~ /Name=(.*) Address=(.*)/g ) ) {\n   my @matches = @$_;\n    ...\n}\n</code></pre>\n\n<p>That said, it's far more common to grab the matches iteratively.</p>\n\n<pre><code>while ($str =~ /Name=(.*) Address=(.*)/g) {\n   my @matches = ( $1, $2 );\n   ...\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 2833, "user_id": 9300627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7a38cf029222bcf1d902e6b2759ffeb?s=128&d=identicon&r=PG", "display_name": "haukex", "link": "https://stackoverflow.com/users/9300627/haukex"}, "edited": false, "score": 2, "creation_date": 1549968458, "post_id": 54647926, "comment_id": 96087787, "body": "Nitpick: <i>&quot;No need for a pattern match here.&quot;</i> but <code>split</code> uses one \ud83d\ude09"}, {"owner": {"reputation": 63, "user_id": 10955982, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-fXlUjyZGvU4/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQM1ntguuklLWl7NMRK18InSOUcfEg/mo/photo.jpg?sz=128", "display_name": "Red_Developper", "link": "https://stackoverflow.com/users/10955982/red-developper"}, "edited": false, "score": 0, "creation_date": 1549969178, "post_id": 54647926, "comment_id": 96088167, "body": "thank you very much for your answer, but I want the solution to be in regex,  because the example that I posted normally is not the one in reality just to have an idea on how to do this with the regex, on the other hand in the reality I do not have key = value, I have a text paragraph on which j apply my regex and I can extract values \u200b\u200b$ 1, $ 2... and this text is repetitive on other paragraph it means I can apply the same regex for the other paragraph and it pulls me the same info ,on the other hand I do not know how to apply the regex to send me $ 1, $ 2... of all occurrence s in a boocle"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 63, "user_id": 10955982, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-fXlUjyZGvU4/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQM1ntguuklLWl7NMRK18InSOUcfEg/mo/photo.jpg?sz=128", "display_name": "Red_Developper", "link": "https://stackoverflow.com/users/10955982/red-developper"}, "edited": false, "score": 0, "creation_date": 1549969833, "post_id": 54647926, "comment_id": 96088547, "body": "@Red_Developper so in short, you&#39;ve wasted my time but not asking your real question. Please don&#39;t do that. It discourages people from helping you and others, and it wastes everyone&#39;s time."}], "tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": false, "score": 3, "last_activity_date": 1549967227, "creation_date": 1549967227, "answer_id": 54647926, "question_id": 54647491, "link": "https://stackoverflow.com/questions/54647491/get-all-occurances-of-matches-pattern-perl/54647926#54647926", "title": "Get all occurances of matches pattern perl", "body": "<p>Regex is not always the right tool for the job. Your data looks a lot like it's just key/value pairs. Use <a href=\"http://perldoc.perl.org/functions/split.html\" rel=\"nofollow noreferrer\"><code>split</code></a> to break it up. No need for a pattern match here.</p>\n\n<p>Your code and data doesn't match, so I've gone with what the code said.</p>\n\n<pre><code>use strict;\nuse warnings;\n\nmy $str = &lt;&lt;EO_STR;\n   Name=Value1\n   Adress=Value4\n   Name=Value2\n   Adress=Value5\n   Name=Value3\n   Adress=Value6\nEO_STR\n\nmy $fields;\nforeach my $pair (split /\\n/, $str) {\n    my ($key, $value) = split /=/, $pair;\n    $key =~ s/^\\s+//;\n    push @{ $fields-&gt;{$key} }, $value;\n}\n\nuse Data::Dumper;\nprint Dumper $fields;\n</code></pre>\n\n<p>The code will create this data structure:</p>\n\n<pre><code>$VAR1 = {\n          'Name' =&gt; [\n                      'Value1',\n                      'Value2',\n                      'Value3'\n                    ],\n          'Adress' =&gt; [\n                        'Value4',\n                        'Value5',\n                        'Value6'\n                      ]\n        };\n</code></pre>\n\n<p>You can now access these two array references and use them to insert data into your table.</p>\n"}, {"tags": [], "owner": {"reputation": 514, "user_id": 10844371, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LSI8M.jpg?s=128&g=1", "display_name": "sergiotarxz", "link": "https://stackoverflow.com/users/10844371/sergiotarxz"}, "is_accepted": false, "score": 2, "last_activity_date": 1549970750, "last_edit_date": 1549970750, "creation_date": 1549969732, "answer_id": 54648741, "question_id": 54647491, "link": "https://stackoverflow.com/questions/54647491/get-all-occurances-of-matches-pattern-perl/54648741#54648741", "title": "Get all occurances of matches pattern perl", "body": "<p>I have done the following:</p>\n\n<pre><code>#!/usr/bin/env perl\nuse v5.28;\nmy $str = &lt;&lt;EO_STR;\n    Name=Value1 Adress=Value4\n    Name=Value2 Adress=Value5\n    Name=Value3 Adress=Value6\nEO_STR\nmy @array;\nfor my $a (split(/\\n/, $str)) {\n    my %res = $a =~ m/(\\w+)=(\\w+)/g;\n    push @array, \\%res;\n}\nfor my $a (@array) {\n    for my $b (sort keys %{$a}) {\n      \"\\n\", &lt;INPUT_FILE&gt; );   say $b.'-&gt;'.$a-&gt;{$b};\n    }\n}\n</code></pre>\n\n<p>It creates this structure:</p>\n\n<pre><code>@array = [\n    {\n        Name-&gt;Value1,\n        Adress-&gt;Value4\n    },\n    ...\n];\n</code></pre>\n"}], "owner": {"reputation": 63, "user_id": 10955982, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-fXlUjyZGvU4/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQM1ntguuklLWl7NMRK18InSOUcfEg/mo/photo.jpg?sz=128", "display_name": "Red_Developper", "link": "https://stackoverflow.com/users/10955982/red-developper"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 60, "favorite_count": 0, "accepted_answer_id": 54647791, "answer_count": 3, "score": 1, "last_activity_date": 1549970750, "creation_date": 1549965962, "last_edit_date": 1549967319, "question_id": 54647491, "link": "https://stackoverflow.com/questions/54647491/get-all-occurances-of-matches-pattern-perl", "title": "Get all occurances of matches pattern perl", "body": "<p>if we are in the following case:</p>\n\n<pre><code> my $str = &lt;&lt;EO_STR;\n   Name=Value1 Adress=Value4\n   Name=Value2 Adress=Value5\n   Name=Value3 Adress=Value6\nEO_STR\n</code></pre>\n\n<p>I have a table <code>\"T1\"</code> in the database with columns: <code>(\"Name\", \"Address\")</code> and I want to put on the column <code>\"Name\"</code> values <code>\"value1,Value2,Value3\"</code> and on the column <code>\"Adress\"</code> values <code>\"Value4,Value5,Value6\"</code>\nin this case we have : </p>\n\n<pre><code>my @matches = $str =~ /Name=(.*?)\\nAdress=(.*?)\\n/g;\n</code></pre>\n\n<p>how can we use <code>$1</code> and <code>$2</code> with <code>@matches</code> in order to get separately all occurence of Name and Adresse in order to insert them on the Table <code>T1</code>?</p>\n"}, {"tags": ["perl", "divide"], "comments": [{"owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 2, "creation_date": 1549964055, "post_id": 54646773, "comment_id": 96084960, "body": "The <code>&#47;</code> in your division is seen as the delimiter for the regular expression. Why are you doing divisions in the replacement part? What is your input data? Most likely, <code>unpack</code> is a much better choice."}], "answers": [{"comments": [{"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1549966624, "post_id": 54646895, "comment_id": 96086628, "body": "You haven&#39;t explained why you think <code>&lt;...&gt;</code> is a better choice than, for example, <code>|...|</code>. And you should explain why <code>&#47;...&#47;...&#47;</code> becomes <code>&lt;...&gt;&lt;...&gt;</code> - with two delimiters in the middle."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 3, "creation_date": 1549967334, "post_id": 54646895, "comment_id": 96087127, "body": "Re &quot;<i>I chose <code>&lt;&gt;</code> as it is not there is the expression.</i>&quot;, The best part of <code>&lt;&gt;</code> is that it&#39;s fine if <code>&lt;</code> and <code>&gt;</code> are part of the expression, as long as they are paired. This is far more likely to happen with <code>{}</code>, making it a better choice in general."}, {"owner": {"reputation": 587, "user_id": 2245633, "user_type": "registered", "accept_rate": 18, "profile_image": "https://i.stack.imgur.com/SLpQK.gif?s=128&g=1", "display_name": "CodeGorilla", "link": "https://stackoverflow.com/users/2245633/codegorilla"}, "edited": false, "score": 0, "creation_date": 1549968686, "post_id": 54646895, "comment_id": 96087908, "body": "I tend to use <code>#</code> (hash, or pound), and thus <code>&#39;s#(\\w{3})#sprintf(&quot;%d&quot;, ( hex($1)&#47;4 ))#e&#39; formats work fine for me  (though it did confuse the gvim syntax highlighter, that thought the </code>#` was a comment :) )"}, {"owner": {"reputation": 7646, "user_id": 6867048, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b939fdb5809fed8097c38bdf4370747b?s=128&d=identicon&r=PG&f=1", "display_name": "stack0114106", "link": "https://stackoverflow.com/users/6867048/stack0114106"}, "edited": false, "score": 0, "creation_date": 1549968964, "post_id": 54646895, "comment_id": 96088057, "body": "# -- for comments and  &quot;|&quot; for  piping to other commands..so my best practice in this case is to go for &lt;&gt;"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1549970242, "post_id": 54646895, "comment_id": 96088792, "body": "<i>when you convert s/// with other delimiters other than | (pipe) , you have to use them in pair</i> That&#39;s not true. You have to pair <code>&lt;...&gt;</code>, <code>(...)</code>, <code>[...]</code> and <code>{...}</code>. All other characters (not just <code>|</code>) can be used unpaired."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 1, "creation_date": 1549970530, "post_id": 54646895, "comment_id": 96088944, "body": "@stack0114106: The full details <a href=\"https://perldoc.pl/perlop#Quote-and-Quote-like-Operators\" rel=\"nofollow noreferrer\">are here</a>."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1550179791, "post_id": 54646895, "comment_id": 96185604, "body": "Talking of preferences, mine is <code>m{}{}</code>.  I guess because code blocks are written that way anyway, and these are code blocks of sorts.  (What, of course, could be used as a reason against -- to do something <i>else</i> ! Just preference :)"}, {"owner": {"reputation": 7646, "user_id": 6867048, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b939fdb5809fed8097c38bdf4370747b?s=128&d=identicon&r=PG&f=1", "display_name": "stack0114106", "link": "https://stackoverflow.com/users/6867048/stack0114106"}, "edited": false, "score": 0, "creation_date": 1550201380, "post_id": 54646895, "comment_id": 96190844, "body": "yeah..me too. I first used <code>{}</code> in the answer, but then to explain better to the OP, switched to &lt;&gt;"}], "tags": [], "owner": {"reputation": 7646, "user_id": 6867048, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b939fdb5809fed8097c38bdf4370747b?s=128&d=identicon&r=PG&f=1", "display_name": "stack0114106", "link": "https://stackoverflow.com/users/6867048/stack0114106"}, "is_accepted": true, "score": 4, "last_activity_date": 1549971294, "last_edit_date": 1549971294, "creation_date": 1549964197, "answer_id": 54646895, "question_id": 54646773, "link": "https://stackoverflow.com/questions/54646773/perl-why-cant-divide/54646895#54646895", "title": "Perl: Why can&#39;t divide?", "body": "<p>The default delimiter for substitution s/// is not balanced, so  you get the error. This is because you are dividing the $1 by 4 and it introduced another '/' . So to be safe use some other character other than the one that would mess with the expression. In this case better use &lt;> as delimtier</p>\n\n<pre><code>$ echo 'cb0' | perl -p -e 's&lt;(\\w{3})&gt;&lt;sprintf(\"%d\", ( hex($1)/4 ))&gt;e '\n812\n</code></pre>\n\n<p>when you convert s/// with other delimiters, you have to pair &lt;...>, (...), [...] and {...}. I chose &lt;> as it is not there in the expression. </p>\n"}, {"tags": [], "owner": {"reputation": 2349, "user_id": 6794384, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153707640356246/picture?type=large", "display_name": "drclaw", "link": "https://stackoverflow.com/users/6794384/drclaw"}, "is_accepted": false, "score": 0, "last_activity_date": 1549964619, "creation_date": 1549964619, "answer_id": 54647015, "question_id": 54646773, "link": "https://stackoverflow.com/questions/54646773/perl-why-cant-divide/54647015#54647015", "title": "Perl: Why can&#39;t divide?", "body": "<p>Either use a different delimiter for the substitution or you will need to escape the divide with a backslash:</p>\n\n<pre><code>echo 'cb0' | perl -p -e 's/(\\w{3})/sprintf(\"%d\", ( hex($1)\\/4 ))/e'\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 2, "last_activity_date": 1549964798, "creation_date": 1549964798, "answer_id": 54647080, "question_id": 54646773, "link": "https://stackoverflow.com/questions/54646773/perl-why-cant-divide/54647080#54647080", "title": "Perl: Why can&#39;t divide?", "body": "<p>This doesn't work:</p>\n\n<pre><code>$ echo 'cb0' | perl -p -e 's/(\\w{3})/sprintf(\"%d\", ( hex($1)/4 ))/e'\nUnknown regexp modifier \"/4\" at -e line 1, at end of line\nsyntax error at -e line 1, near \"s/(\\w{3})/sprintf(\"%d\", ( hex($1)/4 )\"\nExecution of -e aborted due to compilation errors.\n</code></pre>\n\n<p>This does:</p>\n\n<pre><code>$ echo 'cb0' | perl -p -e 's/(\\w{3})/sprintf(\"%d\", ( hex($1)\\/4 ))/e'\n812\n</code></pre>\n\n<p>So does this, and it might be easier to follow:</p>\n\n<pre><code>$ echo 'cb0' | perl -p -e 's|(\\w{3})|sprintf(\"%d\", ( hex($1)/4 ))|e'\n812\n</code></pre>\n\n<p>When you use a <code>/</code> character as the separator character in a substitution, then all occurrences of <code>/</code> in your expression will be seen as separators. If you want one to be see as something else (a division operator, for example) you need to escape it (by putting <code>\\</code> in front of it).</p>\n\n<p>Another option is to choose a different separator for your substitution. In my third example, I've switched to using <code>|</code> instead. In this case, the <code>/</code> is no longer seen as special and doesn't need to be escaped.</p>\n"}], "owner": {"reputation": 247, "user_id": 3760602, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/732064147de1fd2695fbfb3550d6ef67?s=128&d=identicon&r=PG&f=1", "display_name": "Fisher", "link": "https://stackoverflow.com/users/3760602/fisher"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 107, "favorite_count": 1, "accepted_answer_id": 54646895, "answer_count": 3, "score": 0, "last_activity_date": 1550009599, "creation_date": 1549963807, "last_edit_date": 1550009599, "question_id": 54646773, "link": "https://stackoverflow.com/questions/54646773/perl-why-cant-divide", "title": "Perl: Why can&#39;t divide?", "body": "<p>Why divide is not working?</p>\n\n<pre><code>echo 'cb0' | perl -p -e 's/(\\w{3})/sprintf(\"%d\", ( hex($1)/4 ))/e'\n\nNumber found where operator expected at -e line 1, near\n\"s/(\\w{3})/sprintf(\"%d\", ( hex($1)/4\" syntax error at -e line 1, near\n\"s/(\\w{3})/sprintf(\"%d\", ( hex($1)/4\" Execution of -e aborted due to\ncompilation errors.\n</code></pre>\n\n<p>Raw input data is 12 bits hex number.</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 1, "creation_date": 1549961891, "post_id": 54646119, "comment_id": 96083618, "body": "<code>know{2}</code> will only match <code>knoww</code>. Maybe you wanted <code>\\b(know)\\b.*?\\b(know)\\b</code> ?"}, {"owner": {"reputation": 99, "user_id": 10782176, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ecf99d5611f25e7124a2eb47c7cfd011?s=128&d=identicon&r=PG&f=1", "display_name": "Crazy coder", "link": "https://stackoverflow.com/users/10782176/crazy-coder"}, "reply_to_user": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 0, "creation_date": 1549962215, "post_id": 54646119, "comment_id": 96083799, "body": "No.It should match first two occurrences of know(not in same line).Likewise,How to do it for n number of matching?"}, {"owner": {"reputation": 514, "user_id": 10844371, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LSI8M.jpg?s=128&g=1", "display_name": "sergiotarxz", "link": "https://stackoverflow.com/users/10844371/sergiotarxz"}, "edited": false, "score": 1, "creation_date": 1549962394, "post_id": 54646119, "comment_id": 96083915, "body": "If they are different lines <code>if($line =~ m&#47;know&#47;) { </code> should be enough."}, {"owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 1, "creation_date": 1549962397, "post_id": 54646119, "comment_id": 96083920, "body": "If you are matching line-by-line, you will need to add additional program logic to keep track of how many words you have seen in your input. Your course material should have something on &quot;hashes&quot;"}], "answers": [{"comments": [{"owner": {"reputation": 99, "user_id": 10782176, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ecf99d5611f25e7124a2eb47c7cfd011?s=128&d=identicon&r=PG&f=1", "display_name": "Crazy coder", "link": "https://stackoverflow.com/users/10782176/crazy-coder"}, "edited": false, "score": 0, "creation_date": 1549962765, "post_id": 54646322, "comment_id": 96084129, "body": "No friend, It should match exactly 2 times irrespective of lines."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 99, "user_id": 10782176, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ecf99d5611f25e7124a2eb47c7cfd011?s=128&d=identicon&r=PG&f=1", "display_name": "Crazy coder", "link": "https://stackoverflow.com/users/10782176/crazy-coder"}, "edited": false, "score": 1, "creation_date": 1549962894, "post_id": 54646322, "comment_id": 96084201, "body": "I can&#39;t understand your comment, and your question remains unclear as ever. Please address these issues"}, {"owner": {"reputation": 157, "user_id": 4234065, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/880adc30c370216c76c21791ff3fc479?s=128&d=identicon&r=PG&f=1", "display_name": "mirchev1977", "link": "https://stackoverflow.com/users/4234065/mirchev1977"}, "edited": false, "score": 1, "creation_date": 1549963017, "post_id": 54646322, "comment_id": 96084273, "body": "you should maybe use the regex like this: $line =~ m/^.*know.*know.*$/"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 157, "user_id": 4234065, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/880adc30c370216c76c21791ff3fc479?s=128&d=identicon&r=PG&f=1", "display_name": "mirchev1977", "link": "https://stackoverflow.com/users/4234065/mirchev1977"}, "edited": false, "score": 1, "creation_date": 1549963058, "post_id": 54646322, "comment_id": 96084299, "body": "@mirchev1977, That couldn&#39;t possibly result in the expected output."}, {"owner": {"reputation": 157, "user_id": 4234065, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/880adc30c370216c76c21791ff3fc479?s=128&d=identicon&r=PG&f=1", "display_name": "mirchev1977", "link": "https://stackoverflow.com/users/4234065/mirchev1977"}, "edited": false, "score": 0, "creation_date": 1549963175, "post_id": 54646322, "comment_id": 96084377, "body": "could you post the content of the file &quot;file.txt&quot;?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 157, "user_id": 4234065, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/880adc30c370216c76c21791ff3fc479?s=128&d=identicon&r=PG&f=1", "display_name": "mirchev1977", "link": "https://stackoverflow.com/users/4234065/mirchev1977"}, "edited": false, "score": 0, "creation_date": 1549963380, "post_id": 54646322, "comment_id": 96084512, "body": "@mirchev1977, That comment doesn&#39;t appear to relate to my answer."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 99, "user_id": 10782176, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ecf99d5611f25e7124a2eb47c7cfd011?s=128&d=identicon&r=PG&f=1", "display_name": "Crazy coder", "link": "https://stackoverflow.com/users/10782176/crazy-coder"}, "edited": false, "score": 0, "creation_date": 1549963386, "post_id": 54646322, "comment_id": 96084519, "body": "@cherry, I see the update you&#39;ve made to your question. My answer stands."}, {"owner": {"reputation": 99, "user_id": 10782176, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ecf99d5611f25e7124a2eb47c7cfd011?s=128&d=identicon&r=PG&f=1", "display_name": "Crazy coder", "link": "https://stackoverflow.com/users/10782176/crazy-coder"}, "edited": false, "score": 0, "creation_date": 1549964256, "post_id": 54646322, "comment_id": 96085098, "body": "@ikegami,Your answer works for me but can you able to do anything with this syntax &quot;a{n} = match exactly n times&quot; ?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1549965264, "post_id": 54646322, "comment_id": 96085745, "body": "You want a line if it contains know, and if you&#39;ve only printed one other line. That would not help you determine if a line contains <code>know</code>, and it would not help you determine if you&#39;ve printed any earlier lines."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 2, "last_activity_date": 1549962411, "creation_date": 1549962411, "answer_id": 54646322, "question_id": 54646119, "link": "https://stackoverflow.com/questions/54646119/matching-only-twice/54646322#54646322", "title": "Matching only twice", "body": "<p>You appear to be asking how to find the first two lines that contain <code>know</code>.</p>\n\n<p>For that, you need to keep track of how many lines you've previously found.</p>\n\n<pre><code>my $count = 0;\nwhile (&lt;&gt;) {\n   if (/know/) {\n      print;\n      last if ++$count == 2;\n   }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 7646, "user_id": 6867048, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b939fdb5809fed8097c38bdf4370747b?s=128&d=identicon&r=PG&f=1", "display_name": "stack0114106", "link": "https://stackoverflow.com/users/6867048/stack0114106"}, "is_accepted": false, "score": 1, "last_activity_date": 1549963566, "last_edit_date": 1549963566, "creation_date": 1549963023, "answer_id": 54646507, "question_id": 54646119, "link": "https://stackoverflow.com/questions/54646119/matching-only-twice/54646507#54646507", "title": "Matching only twice", "body": "<p>Try this Perl one-liner</p>\n\n<pre><code>$ perl -ne 'BEGIN {$x=2} s/(know)/$x--;$kv{$_}=1/ge; if($x==0) { print keys %kv ; exit } ' cherry2.txt\nI know Perl.\nI know English.\n$\n\n$ cat cherry2.txt\nI know Perl.\nI know English.\nI know French.\nI know Dutch.\n$\n</code></pre>\n"}], "owner": {"reputation": 99, "user_id": 10782176, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ecf99d5611f25e7124a2eb47c7cfd011?s=128&d=identicon&r=PG&f=1", "display_name": "Crazy coder", "link": "https://stackoverflow.com/users/10782176/crazy-coder"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 55, "favorite_count": 1, "answer_count": 2, "score": 0, "last_activity_date": 1549963566, "creation_date": 1549961677, "last_edit_date": 1549963212, "question_id": 54646119, "link": "https://stackoverflow.com/questions/54646119/matching-only-twice", "title": "Matching only twice", "body": "<p>I want to match a word for exactly two times.The output should not display all occurrences of matching.How to do with perl?</p>\n\n<pre><code>open(a,\"&lt;file.txt\");\nopen(c,\"&gt;&gt;output.txt\");\nwhile (my $line = &lt;a&gt;) {\n        if($line =~ m/know{2}/) { \n          print $line;\n        }\n}\nclose(a);\nclose(c);\n</code></pre>\n\n<p>Example: \nIf file.txt has following lines :</p>\n\n<pre><code>I know Perl.\nI know English.\nI know French.\nI know Dutch.\n</code></pre>\n\n<p>The expected result should be :</p>\n\n<pre><code>I know Perl.\nI know English.\n</code></pre>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 2, "creation_date": 1549960555, "post_id": 54645772, "comment_id": 96082851, "body": "What is your Perl version? Run <code>perl -v</code> to see the version. Also, <code>say((\\a)-&gt;@*)</code> should maybe be <code>say((\\@a)-&gt;@*)</code> ?"}, {"owner": {"reputation": 514, "user_id": 10844371, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LSI8M.jpg?s=128&g=1", "display_name": "sergiotarxz", "link": "https://stackoverflow.com/users/10844371/sergiotarxz"}, "reply_to_user": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 0, "creation_date": 1549960860, "post_id": 54645772, "comment_id": 96083039, "body": "This is perl 5, version 22, subversion 1 (v5.22.1) built for x86_64-linux-gnu-thread-multi"}, {"owner": {"reputation": 514, "user_id": 10844371, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LSI8M.jpg?s=128&g=1", "display_name": "sergiotarxz", "link": "https://stackoverflow.com/users/10844371/sergiotarxz"}, "reply_to_user": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 0, "creation_date": 1549961057, "post_id": 54645772, "comment_id": 96083167, "body": "@Corion I feel sorry, I posted the code copied by hand and I had no time to see the erratas;"}], "answers": [{"comments": [{"owner": {"reputation": 514, "user_id": 10844371, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LSI8M.jpg?s=128&g=1", "display_name": "sergiotarxz", "link": "https://stackoverflow.com/users/10844371/sergiotarxz"}, "edited": false, "score": 0, "creation_date": 1549960971, "post_id": 54645854, "comment_id": 96083106, "body": "I get the same error with <code>say((\\@a)-&gt;@*);</code> in your code"}, {"owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "reply_to_user": {"reputation": 514, "user_id": 10844371, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LSI8M.jpg?s=128&g=1", "display_name": "sergiotarxz", "link": "https://stackoverflow.com/users/10844371/sergiotarxz"}, "edited": false, "score": 0, "creation_date": 1549961219, "post_id": 54645854, "comment_id": 96083256, "body": "The feature is experimental in 5.22.x. I&#39;ve updated my answer."}, {"owner": {"reputation": 514, "user_id": 10844371, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LSI8M.jpg?s=128&g=1", "display_name": "sergiotarxz", "link": "https://stackoverflow.com/users/10844371/sergiotarxz"}, "edited": false, "score": 0, "creation_date": 1549961321, "post_id": 54645854, "comment_id": 96083313, "body": "Solved, thank you, this was the problem, I will compile a more recent version."}, {"owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "reply_to_user": {"reputation": 514, "user_id": 10844371, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LSI8M.jpg?s=128&g=1", "display_name": "sergiotarxz", "link": "https://stackoverflow.com/users/10844371/sergiotarxz"}, "edited": false, "score": 0, "creation_date": 1549961585, "post_id": 54645854, "comment_id": 96083445, "body": "Updated my answer how to get it working with 5.20.0+"}, {"owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "reply_to_user": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1550084592, "post_id": 54645854, "comment_id": 96144284, "body": "@Grinnz Fedora Perl maintainers seem to have decided to keep it as separate module. Rewording my answer."}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 1, "creation_date": 1550084818, "post_id": 54645854, "comment_id": 96144389, "body": "@StefanBecker On Fedora many core modules are packaged separately from the interpreter, you need to install <code>perl</code> (this used to be named <code>perl-core</code>) to get a usable Perl."}, {"owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "reply_to_user": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1550471677, "post_id": 54645854, "comment_id": 96265395, "body": "@Grinnz I guess a side-effect of the Fedora Atomic Host cleanup, i.e. to reduce the size of a absolutely minimal installation. My current working machines are relatively new installs (less than 1 year old), hence I only got <code>perl-core</code> or <code>perl-interpreter</code> through the standard install. <code>dnf install perl</code> dragged in 70+ new packages. Thanks for the hint!"}], "tags": [], "owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "is_accepted": true, "score": 3, "last_activity_date": 1550084713, "last_edit_date": 1550084713, "creation_date": 1549960557, "answer_id": 54645854, "question_id": 54645772, "link": "https://stackoverflow.com/questions/54645772/postfix-dereference-say-a-v5-22/54645854#54645854", "title": "Postfix dereference say((\\@a)-&gt;@*) v5.22", "body": "<p>The feature is experimental in 5.22.x, quoting <a href=\"https://perldoc.perl.org/perl5240delta.html\" rel=\"nofollow noreferrer\">perl5240delta</a>:</p>\n\n<blockquote>\n  <p><strong>Postfix dereferencing is no longer experimental</strong></p>\n  \n  <p>Using the \"postderef\" and \"postderef_qq\" features no longer emits a warning. Existing code\n       that disables the \"experimental::postderef\" warning category that they previously used\n         will continue to work. The \"postderef\" feature has no effect; all Perl code can use\n         postfix dereferencing, regardless of what feature declarations are in scope. The 5.24\n         feature bundle now includes the \"postderef_qq\" feature.</p>\n</blockquote>\n\n<p>Quoting <a href=\"https://perldoc.perl.org/perlexperiment.html\" rel=\"nofollow noreferrer\">perlexperiment</a>:</p>\n\n<blockquote>\n  <p><strong>Postfix dereference syntax</strong></p>\n  \n  <p>Introduced in Perl 5.20.0</p>\n  \n  <p>Accepted in Perl 5.24.0</p>\n</blockquote>\n\n<p>This is how you would write the code for 5.20.0+. Please note that <a href=\"https://metacpan.org/pod/experimental\" rel=\"nofollow noreferrer\">experimental</a> may <em>not</em> be installed together with the default Perl package, i.e. you would need to install it separately:</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>#!/usr/bin/perl\nuse v5.20;\nuse strict;\nuse warnings;\n\nuse experimental qw(postderef);\n\nmy @a = ('hello', 'bye', 'see you');\n\nsay(@a);\nsay(@{ \\@a });\nsay((\\@a)-&gt;@*);\n\nexit 0;\n</code></pre>\n\n<p>Output (<code>This is perl 5, version 28, subversion 1 (v5.28.1)</code>):</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>hellobyesee you\nhellobyesee you\nhellobyesee you\n</code></pre>\n\n<p>i.e. all three are equivalent.</p>\n"}, {"comments": [{"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1550079275, "post_id": 54646171, "comment_id": 96141663, "body": "It actually doesn&#39;t need a feature at all in 5.24+, it&#39;s automatically active."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 4, "last_activity_date": 1549963773, "last_edit_date": 1549963773, "creation_date": 1549961840, "answer_id": 54646171, "question_id": 54645772, "link": "https://stackoverflow.com/questions/54645772/postfix-dereference-say-a-v5-22/54646171#54646171", "title": "Postfix dereference say((\\@a)-&gt;@*) v5.22", "body": "<p>The feature can be activated as follows:</p>\n\n<pre><code>use feature qw( postderef );\nno warnings qw( experimental::postderef );\n</code></pre>\n\n<p>That can be reduced to</p>\n\n<pre><code>use experimental qw( postderef );\n</code></pre>\n\n<p>The <code>postderef</code> feature is also activated by <code>use feature ':5.24';</code> (and thus by <code>use v5.24;</code>), but it's activated by neither <code>use feature ':5.20';</code> nor <code>use feature ':5.22';</code> (and thus by neither <code>use v5.20;</code> nor <code>use v5.22;</code>) because the feature was still experimental in 5.20 and 5.22.</p>\n\n<p>The feature didn't change between 5.20 and 5.24, so it's safe to use in 5.20 and 5.22, so it's safe to ignore the warning.</p>\n"}], "owner": {"reputation": 514, "user_id": 10844371, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LSI8M.jpg?s=128&g=1", "display_name": "sergiotarxz", "link": "https://stackoverflow.com/users/10844371/sergiotarxz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 93, "favorite_count": 0, "accepted_answer_id": 54645854, "answer_count": 2, "score": 2, "last_activity_date": 1550084713, "creation_date": 1549960237, "last_edit_date": 1549998133, "question_id": 54645772, "link": "https://stackoverflow.com/questions/54645772/postfix-dereference-say-a-v5-22", "title": "Postfix dereference say((\\@a)-&gt;@*) v5.22", "body": "<p>I have read about postfix dereference and I wanted to try it, but I am unable to make this simple example work.</p>\n\n<pre><code>use v5.22;\nmy @a = ('hello', 'bye', 'see you');\nsay((\\@a)-&gt;@*);\n</code></pre>\n\n<p>I should get the array printed, but all I got was: </p>\n\n<blockquote>\n  <p>Array found where operator expected at hola.pl line 3, at end of line\n    (Missing operator before ?) syntax error at hola.pl line 7, near\n  \"->@\"</p>\n</blockquote>\n\n<p>My perl version is:</p>\n\n<blockquote>\n  <p>This is perl 5, version 22, subversion 1 (v5.22.1) built for x86_64-linux-gnu-thread-multi </p>\n</blockquote>\n"}, {"tags": ["perl", "text", "hash", "split"], "answers": [{"tags": [], "owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "is_accepted": true, "score": 2, "last_activity_date": 1549959467, "last_edit_date": 1549959467, "creation_date": 1549955478, "answer_id": 54644594, "question_id": 54644086, "link": "https://stackoverflow.com/questions/54644086/how-to-split-a-long-file-and-printout-to-different-text-files-by-perl/54644594#54644594", "title": "How to split a long file and printout to different text files by Perl?", "body": "<p>I think this is what you are looking for:</p>\n\n<ul>\n<li>read input lines from STDIN\n\n<ul>\n<li>split into first part + key</li>\n<li>if we haven't seen key before\n\n<ul>\n<li>open new file for writing, using index in the file name</li>\n<li>store file handle in hash using key.</li>\n<li>increase index by one</li>\n</ul></li>\n<li>get file handle from hash with key and write first part to it</li>\n</ul></li>\n<li>close all open file handles when we're done</li>\n</ul>\n\n<pre class=\"lang-perl prettyprint-override\"><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\n\nmy $index = 1;\nmy %seen;\n\nwhile (&lt;STDIN&gt;) {\n    chomp;\n    my($start, $key) = /^(\\S+\\s+\\S+)\\s+(.+)\\s*$/;\n\n    unless ($seen{$key}) {\n        # new key detected, we need to open new file\n        open(my $fh, '&gt;', \"File_${index}.txt\")\n            or die \"can't open new file: $!\\n\";\n        $seen{$key} = $fh;\n        $index++;\n    }\n\n    my $fh = $seen{$key};\n    print $fh \"${start}\\n\";\n}\n\n# close files\nclose $_ foreach (values %seen);\n\nexit 0;\n</code></pre>\n\n<p>Test run:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>$ perl dummy.pl &lt;dummy.txt\n$ cat File_1.txt \nXIGO    XIGO_24480\nXIGO    XIGO_24481\n$ cat File_2.txt \nXOLO    XOLO_Z1E01\nXOLO    XOLO_Z1G01\n$ cat File_3.txt \nYORK    TYo_0GT393\nYORK    TYo_0GT394\n</code></pre>\n\n<p><strong>NOTE:</strong> for completeness sake: the above solution will run into <code>too many open files</code> error on a standard Linux machine if your input has more than ~1000 keys. You'll have to use <code>ulimit</code> to increase the limits, or pre-sort the data to be able to use the optimized version below. Or keep all data in memory and write the files after the end of the loop.</p>\n\n<hr>\n\n<p><strong>EDIT:</strong> this can be optimized if you are sure that keys don't repeat in the input file, e.g.</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>my $fh;    \nwhile (&lt;STDIN&gt;) {\n    chomp;\n    my($start, $key) = /^(\\S+\\s+\\S+)\\s+(.+)\\s*$/;\n\n    unless ($seen{$key}++) {\n        # new key detected, we need to open new file\n        if ($fh) {\n            close($fh) or die \"close: $!\\n\";\n        }\n        open($fh, '&gt;', \"File_${index}.txt\")\n            or die \"can't open new file: $!\\n\";\n        $index++;\n    }\n\n    print $fh \"${start}\\n\";\n}\n\n# make sure to close last open file\nclose($fh) or die \"close: $!\\n\";\n</code></pre>\n\n<p>I don't know what your real input data looks like, but if order of the output isn't relevant then you could pre-sort the input data in bash for this optimized version with:</p>\n\n<pre class=\"lang-bash prettyprint-override\"><code>$ sort -t $'\\t' -k 3 dummy.txt | perl dummy.pl\n</code></pre>\n\n<hr>\n\n<p><strong>EDIT2</strong> if you want to keep your original <code>split()</code> approach:</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code># remove trailing whitespace\ns/\\s+$//;\nmy($FID, $IID, $key) = split('\\t', $_);\n...\nprint $fh \"${FID}\\t${IID}\\n\";\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 7646, "user_id": 6867048, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b939fdb5809fed8097c38bdf4370747b?s=128&d=identicon&r=PG&f=1", "display_name": "stack0114106", "link": "https://stackoverflow.com/users/6867048/stack0114106"}, "is_accepted": false, "score": 1, "last_activity_date": 1549965832, "creation_date": 1549965832, "answer_id": 54647427, "question_id": 54644086, "link": "https://stackoverflow.com/questions/54644086/how-to-split-a-long-file-and-printout-to-different-text-files-by-perl/54647427#54647427", "title": "How to split a long file and printout to different text files by Perl?", "body": "<p>Though awk is not tagged, it works best in this case. If you want to try, here is how you do it</p>\n\n<pre><code>$ cat victor.txt\nXIGO    XIGO_24480  Xigou\nXIGO    XIGO_24481  Xigou\nXOLO    XOLO_Z1E01  Xoloitzcuintle\nXOLO    XOLO_Z1G01  Xoloitzcuintle\nYORK    TYo_0GT393  Yorkshire Terrier\nYORK    TYo_0GT394  Yorkshire Terrier\n$ awk ' { curr=$1; if(prev!=curr) { x++ } print $1, $2, \"File_\" x \".txt\" ; prev=curr } ' victor.txt\nXIGO XIGO_24480 File_1.txt\nXIGO XIGO_24481 File_1.txt\nXOLO XOLO_Z1E01 File_2.txt\nXOLO XOLO_Z1G01 File_2.txt\nYORK TYo_0GT393 File_3.txt\nYORK TYo_0GT394 File_3.txt\n$ ls File_1.txt File_2.txt File_3.txt\n/bin/ls: cannot access File_1.txt: No such file or directory\n/bin/ls: cannot access File_2.txt: No such file or directory\n/bin/ls: cannot access File_3.txt: No such file or directory\n</code></pre>\n\n<p>The above awk prints the results we needed. awk can redirect output to files </p>\n\n<pre><code>$ awk ' { curr=$1; if(prev!=curr) { x++ } print $1, $2  &gt; \"File_\" x \".txt\" ; prev=curr } ' victor.txt\n$ ls File_1.txt File_2.txt File_3.txt\nFile_1.txt  File_2.txt  File_3.txt\n$ cat File_1.txt\nXIGO XIGO_24480\nXIGO XIGO_24481\n$ cat File_2.txt\nXOLO XOLO_Z1E01\nXOLO XOLO_Z1G01\n$ cat File_3.txt\nYORK TYo_0GT393\nYORK TYo_0GT394\n$\n</code></pre>\n"}], "owner": {"reputation": 147, "user_id": 9426481, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92d9e5d67bf0ef6f703fffa820ba1a5e?s=128&d=identicon&r=PG&f=1", "display_name": "Victor.H", "link": "https://stackoverflow.com/users/9426481/victor-h"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 39, "favorite_count": 0, "accepted_answer_id": 54644594, "answer_count": 2, "score": 1, "last_activity_date": 1549965832, "creation_date": 1549953141, "last_edit_date": 1549954813, "question_id": 54644086, "link": "https://stackoverflow.com/questions/54644086/how-to-split-a-long-file-and-printout-to-different-text-files-by-perl", "title": "How to split a long file and printout to different text files by Perl?", "body": "<p>I have a long list text file with 3 column.</p>\n\n<p>The input file:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>XIGO    XIGO_24480  Xigou  \nXIGO    XIGO_24481  Xigou  \nXOLO    XOLO_Z1E01  Xoloitzcuintle  \nXOLO    XOLO_Z1G01  Xoloitzcuintle  \nYORK    TYo_0GT393  Yorkshire Terrier  \nYORK    TYo_0GT394  Yorkshire Terrier  \n</code></pre>\n\n<p>I want the output text files with the number-tags. The list split by the 3rd column. </p>\n\n<p>File_1.txt  </p>\n\n<pre class=\"lang-none prettyprint-override\"><code>XIGO    XIGO_24480   \nXIGO    XIGO_24481  \n</code></pre>\n\n<p>File_2.txt  </p>\n\n<pre class=\"lang-none prettyprint-override\"><code>XOLO    XOLO_Z1E01   \nXOLO    XOLO_Z1G01  \n</code></pre>\n\n<p>File_3.txt</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>YORK    TYo_0GT393   \nYORK    TYo_0GT394  \n</code></pre>\n\n<p>I try to split the file in Perl with hash function. However, I still can not get the right files.</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>#!/usr/bin/perl -w\nuse strict;\nuse warnings;\n\nmy $input = 'File_List_1.txt';\nmy %results;\nmy $out;\nmy $FID;\nmy $IID;\nmy $Breed;\nmy $results;\nmy @array;\nmy $index=0;\n\nopen(my $fh, '&lt;', $input) or die \"cannot open input file: $!\";\n\n\n while (&lt;$fh&gt;) {\n   chomp;\n   my ($FID, $IID, $Breed) = split '\\t', $_;\n   $results{$Breed}{$IID} = $FID;\n }\n\n for my $values (keys %results) {\n open (my $out, '&gt;', 'File_',\"$index.txt\") or die \"cannot open input file: $!\";\n\n for my $values_1 (keys %{$results{$values}}){\n   print $out, join (\"\\t\" , map {$results{$values}-&gt;{$values_1},$values_1} keys%results);\n }\n close $out;\n</code></pre>\n\n<p>Are there any suggestions for me? Thank you</p>\n"}, {"tags": ["xml", "perl", "serialization", "utf-8"], "answers": [{"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 4, "last_activity_date": 1549933419, "creation_date": 1549933419, "answer_id": 54641376, "question_id": 54641269, "link": "https://stackoverflow.com/questions/54641269/how-to-make-perls-xmllibxml-serializer-to-use-utf-8-encoding/54641376#54641376", "title": "How to make Perl&#39;s XML::Libxml serializer to use utf-8 encoding?", "body": "<pre><code>my $str = '&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;&lt;item&gt;&lt;name&gt;\u00e1rv\u00edzt\u0171r\u0151 t\u00fck\u00f6rf\u00far\u00f3g\u00e9p&lt;/name&gt;&lt;/item&gt;';\nmy $doc = XML::LibXML-&gt;load_xml( string =&gt; $str );\nprint $doc-&gt;serialize(1);\n</code></pre>\n\n<p>or</p>\n\n<pre><code>my $str = '&lt;item&gt;&lt;name&gt;\u00e1rv\u00edzt\u0171r\u0151 t\u00fck\u00f6rf\u00far\u00f3g\u00e9p&lt;/name&gt;&lt;/item&gt;';\nmy $doc = XML::LibXML-&gt;load_xml( string =&gt; $str );\n$doc-&gt;setEncoding(\"UTF-8\");    \nprint $doc-&gt;serialize(1);\n</code></pre>\n"}], "owner": {"reputation": 425, "user_id": 5547553, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/99f225ea4837d3be18c806f798328b7c?s=128&d=identicon&r=PG&f=1", "display_name": "lmocsi", "link": "https://stackoverflow.com/users/5547553/lmocsi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 104, "favorite_count": 0, "accepted_answer_id": 54641376, "answer_count": 1, "score": 1, "last_activity_date": 1549933419, "creation_date": 1549932609, "question_id": 54641269, "link": "https://stackoverflow.com/questions/54641269/how-to-make-perls-xmllibxml-serializer-to-use-utf-8-encoding", "title": "How to make Perl&#39;s XML::Libxml serializer to use utf-8 encoding?", "body": "<p>I'd like to serialize an xml with XML::LibXML, but it always converts utf-8 characters to html representations: I get &amp;#xE1; from \"\u00e1\", etc...<br>\nHow can I make it use utf-8 instead?</p>\n\n<pre><code>use strict;\nuse XML::LibXML;\nuse utf8;\n\nmy $str = '&lt;item&gt;&lt;name&gt;\u00e1rv\u00edzt\u0171r\u0151 t\u00fck\u00f6rf\u00far\u00f3g\u00e9p&lt;/name&gt;&lt;/item&gt;';\nmy $dom = XML::LibXML-&gt;load_xml(string =&gt; $str);\n\nprint $str.\"\\n\";\nprint $dom-&gt;serialize(1);\n</code></pre>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1549921150, "post_id": 54639292, "comment_id": 96071019, "body": "Consider passing references (for arrays/hashes) instead of flat lists"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1549935969, "post_id": 54639292, "comment_id": 96075073, "body": "@zdim, hmm... Taking an arbitrary number of scalars is far more useful for <code>uniq</code>."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1550089118, "post_id": 54639292, "comment_id": 96146412, "body": "@ikegami As a (&quot;far&quot;) more common use case (a handful of scalars to clean up)? Right, good point.  I just get all itchy when I see multi-valued variables passed around subs freely, for fear of stack abuse or unintended flattening (and out of habits from elsewhere I guess)."}], "answers": [{"tags": [], "owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "is_accepted": true, "score": 4, "last_activity_date": 1549920241, "creation_date": 1549920241, "answer_id": 54639371, "question_id": 54639292, "link": "https://stackoverflow.com/questions/54639292/get-unique-list-of-values-from-array-inside-hash-perl/54639371#54639371", "title": "Get Unique list of values from array inside hash perl", "body": "<p>You are passing an array reference containing the values to the function, but the function is expecting the values directly in <code>@_</code>.</p>\n\n<pre><code>my @unique = uniq(@{$hash-&gt;{$id}{str}{TOKEN}});\n</code></pre>\n\n<p>On Perl 5.24+, you can use postderef to make this look a bit nicer (maybe?)</p>\n\n<pre><code>my @unique = uniq($hash-&gt;{$id}{str}{TOKEN}-&gt;@*)\n</code></pre>\n\n<p>On Perl 5.26+, the core version of List::Util is new enough (1.45) to contain the <code>uniq</code> function and it will be faster than your pure-perl version and also handle <code>undef</code> values distinctly.</p>\n"}, {"tags": [], "owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "is_accepted": false, "score": 2, "last_activity_date": 1549920317, "creation_date": 1549920317, "answer_id": 54639386, "question_id": 54639292, "link": "https://stackoverflow.com/questions/54639292/get-unique-list-of-values-from-array-inside-hash-perl/54639386#54639386", "title": "Get Unique list of values from array inside hash perl", "body": "<p><code>uniq</code> expects a list but <code>$hash-&gt;{$id}-&gt;{str}-&gt;{TOKEN}</code> is an array reference (a single element). Either pass an array to <code>uniq</code></p>\n\n<pre><code> uniq(@{$hash-&gt;{$id}{str}{TOKEN}})\n</code></pre>\n\n<p>or write <code>uniq</code> to expect an array reference</p>\n\n<pre><code>sub uniq {\n    my %seen;\n    grep !$seen{$_}++, @{$_[0]};\n}\n</code></pre>\n"}], "owner": {"reputation": 5970, "user_id": 2618323, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/3Czph.jpg?s=128&g=1", "display_name": "Developer", "link": "https://stackoverflow.com/users/2618323/developer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 252, "favorite_count": 1, "accepted_answer_id": 54639371, "answer_count": 2, "score": 0, "last_activity_date": 1549920317, "creation_date": 1549919881, "last_edit_date": 1549920192, "question_id": 54639292, "link": "https://stackoverflow.com/questions/54639292/get-unique-list-of-values-from-array-inside-hash-perl", "title": "Get Unique list of values from array inside hash perl", "body": "<p>I have a hash which contains a list of array and i have to get a unique list from that array . But when i am trying to id i am not getting any error or the unique list.</p>\n\n<p><strong>NOTE : I don't want to use any module</strong>.</p>\n\n<p>Below is the sample structure of my hash which has the array :</p>\n\n<pre><code>'15445' =&gt; { 'str' =&gt; {\n                        'TOKEN' =&gt; [\n                           'HC',\n                           'HC',\n                           'HC',\n                           'HC',\n                           'HC',\n                           'HC'\n                            ]\n                }\n        }\n</code></pre>\n\n<p>How i am tying to get a unique list of values from the array <code>TOKEN</code></p>\n\n<pre><code>foreach my $id (keys %$client) {\n    my @unique_srp_id;\n    @unique_srp_id = uniq($hash-&gt;{$id}-&gt;{str}-&gt;{TOKEN});\n    print @unique_srp_id;\n}\n\nsub uniq {\n    my %seen;\n    grep !$seen{$_}++, @_;\n}\n</code></pre>\n\n<p>Can anyone suggest me what wrong i am doing here.</p>\n"}, {"tags": ["bash", "file", "perl", "directory-listing"], "answers": [{"tags": [], "owner": {"reputation": 6928, "user_id": 1015385, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8fc84a03227c566697c4a16b2e9f8782?s=128&d=identicon&r=PG", "display_name": "JRFerguson", "link": "https://stackoverflow.com/users/1015385/jrferguson"}, "is_accepted": false, "score": 0, "last_activity_date": 1549920861, "last_edit_date": 1549920861, "creation_date": 1549919933, "answer_id": 54639307, "question_id": 54638871, "link": "https://stackoverflow.com/questions/54638871/how-can-i-list-files-with-find-and-perl/54639307#54639307", "title": "How can I list files with find and Perl?", "body": "<pre><code>find /home/user/Documents/*.log* -type f -exec perl -MPOSIX -le 'print strftime(\"%Y%m%d\",localtime((stat $ARGV[0])[9])),\";$ARGV[0]\"' {} \\; | sort -k1,1\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 7646, "user_id": 6867048, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b939fdb5809fed8097c38bdf4370747b?s=128&d=identicon&r=PG&f=1", "display_name": "stack0114106", "link": "https://stackoverflow.com/users/6867048/stack0114106"}, "edited": false, "score": 0, "creation_date": 1550017220, "post_id": 54639347, "comment_id": 96112602, "body": "Great day!...saw your comments on 54659691.. I have also posted an answer.. pls review and I would like to see your answer as well.."}, {"owner": {"reputation": 7646, "user_id": 6867048, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b939fdb5809fed8097c38bdf4370747b?s=128&d=identicon&r=PG&f=1", "display_name": "stack0114106", "link": "https://stackoverflow.com/users/6867048/stack0114106"}, "edited": false, "score": 0, "creation_date": 1550017309, "post_id": 54639347, "comment_id": 96112622, "body": "also when you get time.. pls review 54654803 and suggest improvements.. will connect later.. have a great day!"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 7646, "user_id": 6867048, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b939fdb5809fed8097c38bdf4370747b?s=128&d=identicon&r=PG&f=1", "display_name": "stack0114106", "link": "https://stackoverflow.com/users/6867048/stack0114106"}, "edited": false, "score": 0, "creation_date": 1550047585, "post_id": 54639347, "comment_id": 96122098, "body": "@stack0114106 As for the <a href=\"https://stackoverflow.com/questions/54659691/how-to-randomly-pick-a-region-consecutive-and-perform-it-for-a-number-of-time\">first one</a> -- nice solution coding wise! But not efficiency wise: (1) the file has 10 million lines (up to 1Gb), too much to slurp -- AND (2) the regex goes over all that first, to clean out those lines, and (less of a problem) (3) has to scan into that up-to-Gb string for each random number"}, {"owner": {"reputation": 7646, "user_id": 6867048, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b939fdb5809fed8097c38bdf4370747b?s=128&d=identicon&r=PG&f=1", "display_name": "stack0114106", "link": "https://stackoverflow.com/users/6867048/stack0114106"}, "edited": false, "score": 0, "creation_date": 1550048834, "post_id": 54639347, "comment_id": 96122796, "body": "thanks zdim.. I also felt that substring over a slurped file is expensive.."}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": true, "score": 6, "last_activity_date": 1551171259, "last_edit_date": 1551171259, "creation_date": 1549920151, "answer_id": 54639347, "question_id": 54638871, "link": "https://stackoverflow.com/questions/54638871/how-can-i-list-files-with-find-and-perl/54639347#54639347", "title": "How can I list files with find and Perl?", "body": "<p>Can do it all in Perl</p>\n\n<pre><code>perl -MPOSIX=strftime -wE'$d = shift || \".\"; \n    say strftime(\"%Y-%m-%d\", localtime((stat $_)[9])), \"; $_\" \n        for sort { (stat $b)[9] &lt;=&gt; (stat $a)[9] } glob \"$d/*log*\"\n' dir-name\n</code></pre>\n\n<p>where you submit the <code>dir-name</code> to the one-liner (or it works with <code>.</code>, the current directory). </p>\n\n<p>Note, I don't see a need for <code>find</code> as you're getting a listing of (log) files from a directory.</p>\n\n<p>This can be optimized, to not run <code>stat</code> repeatedly, but I doubt that it matters in expected use. I would recommend putting this in a nice little script though.</p>\n\n<hr>\n\n<p>Still, <code>stat</code> isn't cheap and if this regularly catches long file lists then use</p>\n\n<pre><code>perl -MPOSIX=strftime -wE'$d = shift || \".\"; \n    say strftime(\"%Y-%m-%d\", localtime($_-&gt;[1])), \"; $_-&gt;[0]\" \n        for \n            sort { $b-&gt;[1] &lt;=&gt; $a-&gt;[1] } \n                map { [$_, (stat $_)[9]] } glob \"$d/*log*\"\n' dir-name\n</code></pre>\n\n<p>where I've split the statement into yet more lines to emphasize the change.</p>\n\n<p>The input file list from <code>glob</code> is used to first build another list, using <code>map</code>, with an arrayref for each filename: The name itself <em>and</em> that file's timestamp.  Then the pair-wise comparisons in <code>sort</code> don't have to run <code>stat</code> every time through; they use time-stamps precomputed once.  This is called a <a href=\"https://en.wikipedia.org/wiki/Schwartzian_transform\" rel=\"nofollow noreferrer\">Schwartzian transform</a>. Additionally, the <code>sprintf</code> need not run <code>stat</code> again, either.</p>\n\n<p>Note that the optimization comes with an overhead, so use this only when it is indeed expected to be needed.  See, for example, <a href=\"https://stackoverflow.com/a/50150736/4653379\">this post</a> (last section) for a discussion and links.</p>\n"}], "owner": {"reputation": 45, "user_id": 11047335, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-SqjrL4vHhXk/AAAAAAAAAAI/AAAAAAAAKO4/MJHITNSajdk/photo.jpg?sz=128", "display_name": "Nico Espa&#241;a", "link": "https://stackoverflow.com/users/11047335/nico-espa%c3%b1a"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 82, "favorite_count": 0, "accepted_answer_id": 54639347, "answer_count": 2, "score": 3, "last_activity_date": 1551171259, "creation_date": 1549917979, "last_edit_date": 1549955947, "question_id": 54638871, "link": "https://stackoverflow.com/questions/54638871/how-can-i-list-files-with-find-and-perl", "title": "How can I list files with find and Perl?", "body": "<p>I'm working in a HP-UX based machine and I need to list the name of the logs contained in a folder by the date and separated of the name by a \";\" and the result, sorted by date in descending order this stored in a txt so the content of the txt will be like:</p>\n\n<pre><code>2019-02-02;/home/user/Documents/imthelog03.log\n2019-02-01;/home/user/Documents/imthelog02.log\n2019-01-29;/home/user/Documents/imthelog01.log\n</code></pre>\n\n<p>I've tried this:</p>\n\n<pre><code>find /home/user/Documents/*.log* exec perl -MPOSIX -e 'print POSIX::strftime \"%Y%m%d\\n\", localtime((stat $ARGV[0])[9])'\n</code></pre>\n\n<p>but I can't get what I need, I can't use <code>stats</code>\nI'm using a <code>for</code> to read line by line \nso How can I get the date and the <code>path/filename</code> separated by a <code>;</code> in a txt, sorted by date descending using bash and eventually perl, thanks!</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 19, "user_id": 11047240, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4779f9abd5db2279bf1839a7a7f51920?s=128&d=identicon&r=PG&f=1", "display_name": "NewUser", "link": "https://stackoverflow.com/users/11047240/newuser"}, "edited": false, "score": 0, "creation_date": 1549925047, "post_id": 54638858, "comment_id": 96072434, "body": "I had to add a little more complexity, that if file 1 has &quot;h1 0 h2 1 h3 1 h4 1&quot; and file2 has &quot;h1 1&quot; output should look like, h1 1 h2 0 h3 0 h4 0 (apparently all the second fields for file 2 except for matching first field from file2 should be made 0), can this be acheived?"}], "answers": [{"comments": [{"owner": {"reputation": 19, "user_id": 11047240, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4779f9abd5db2279bf1839a7a7f51920?s=128&d=identicon&r=PG&f=1", "display_name": "NewUser", "link": "https://stackoverflow.com/users/11047240/newuser"}, "edited": false, "score": 0, "creation_date": 1549925007, "post_id": 54639723, "comment_id": 96072417, "body": "I had to add a little more complexity, that if file 1 has &quot;h1 0 h2 1 h3 1 h4 1&quot; and file2 has &quot;h1 1&quot; output should look like, h1 1 h2 0 h3 0 h4 0 (apparently all the second fields for file 2 except for matching first field from file2 should be made 0), can this be acheived?"}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "reply_to_user": {"reputation": 19, "user_id": 11047240, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4779f9abd5db2279bf1839a7a7f51920?s=128&d=identicon&r=PG&f=1", "display_name": "NewUser", "link": "https://stackoverflow.com/users/11047240/newuser"}, "edited": false, "score": 0, "creation_date": 1549925924, "post_id": 54639723, "comment_id": 96072708, "body": "Yes, that can be done. See my updated answer for an approach."}, {"owner": {"reputation": 19, "user_id": 11047240, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4779f9abd5db2279bf1839a7a7f51920?s=128&d=identicon&r=PG&f=1", "display_name": "NewUser", "link": "https://stackoverflow.com/users/11047240/newuser"}, "edited": false, "score": 0, "creation_date": 1549982903, "post_id": 54639723, "comment_id": 96096863, "body": "The above code gives and error at line: delete %lines{$_} for keys %used_keys; and the error is &quot;delete argument is not a HASH or ARRAY element or slice &quot; !"}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "reply_to_user": {"reputation": 19, "user_id": 11047240, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4779f9abd5db2279bf1839a7a7f51920?s=128&d=identicon&r=PG&f=1", "display_name": "NewUser", "link": "https://stackoverflow.com/users/11047240/newuser"}, "edited": false, "score": 0, "creation_date": 1549983034, "post_id": 54639723, "comment_id": 96096942, "body": "@NewUser Maybe you could send me the files you are using? Then I will have a look at it."}, {"owner": {"reputation": 19, "user_id": 11047240, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4779f9abd5db2279bf1839a7a7f51920?s=128&d=identicon&r=PG&f=1", "display_name": "NewUser", "link": "https://stackoverflow.com/users/11047240/newuser"}, "edited": false, "score": 1, "creation_date": 1549986893, "post_id": 54639723, "comment_id": 96099555, "body": "sure, will send an email in a while!"}], "tags": [], "owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "is_accepted": false, "score": 1, "last_activity_date": 1549994633, "last_edit_date": 1549994633, "creation_date": 1549921876, "answer_id": 54639723, "question_id": 54638858, "link": "https://stackoverflow.com/questions/54638858/how-do-overwrite-changed-columns-of-one-file-from-another-file-in-perl/54639723#54639723", "title": "how do overwrite changed columns of one file from another file in perl", "body": "<p>Assuming the first field on each line in each file is a \"key\" that indicates whether a line in <code>file1.txt</code> should be replaced by a line in <code>file2.txt</code> , you could try:</p>\n\n<pre><code>use feature qw(say);\nuse strict;\nuse warnings;\n\nmy %lines;\nmy @lines;\nmy $fn = 'file1.txt';\nopen ( my $fh, '&lt;', $fn ) or die \"Could not open file '$fn': $!\";\nwhile (my $line = &lt;$fh&gt;) {\n    chomp $line;\n    my ( $key, @rest ) = split \" \", $line;\n    push @{ $lines{$key} }, $. ;\n    push @lines, $line;\n}\nclose $fh;\nmy $fn2 = 'file2.txt';\nopen ( my $fh2, '&lt;', $fn2 ) or die \"Could not open file '$fn2': $!\";\nwhile( my $line = &lt;$fh2&gt; ) {\n    chomp $line;\n    my ( $key, @rest ) = split \" \", $line;\n    if ( exists $lines{$key} ) {\n        for my $line_no (@{ $lines{$key} }) {\n            $lines[$line_no -1] = $line;\n        }\n    }\n}\nclose $fh2;\n\nsay for @lines;\n</code></pre>\n\n<p><strong>Output</strong>:</p>\n\n<pre><code>h1 1\nh2 1\nh3 0\nh4 0\n</code></pre>\n\n<p><strong>Edit</strong>: To also set all lines which is not updated by <code>file2.txt</code> to \"$key 0\":</p>\n\n<pre><code>[...]\nmy %used_keys;\nwhile( my $line = &lt;$fh2&gt; ) {\n    chomp $line;\n    my ( $key, @rest ) = split \" \", $line;\n    if ( exists $lines{$key} ) {\n        for my $line_no (@{ $lines{$key} }) {\n            $lines[$line_no -1] = $line;\n        }\n        $used_keys{$key} = 1;\n    }\n}\nclose $fh2;\ndelete @lines{ keys %used_keys };\nfor my $key (keys %lines) {\n    for my $line_no (@{ $lines{$key} }) {\n        $lines[$line_no -1] = \"$key 0\";\n    }\n}\n[...]\n</code></pre>\n"}], "owner": {"reputation": 19, "user_id": 11047240, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4779f9abd5db2279bf1839a7a7f51920?s=128&d=identicon&r=PG&f=1", "display_name": "NewUser", "link": "https://stackoverflow.com/users/11047240/newuser"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 51, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1549994633, "creation_date": 1549917910, "last_edit_date": 1549959753, "question_id": 54638858, "link": "https://stackoverflow.com/questions/54638858/how-do-overwrite-changed-columns-of-one-file-from-another-file-in-perl", "title": "how do overwrite changed columns of one file from another file in perl", "body": "<p>I have two files like below:</p>\n\n<p>file1:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>column1 column2\n---------------\nh1      0\nh2      0\nh3      0\nh4      0\n</code></pre>\n\n<p>file2:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>column1 column2\n---------------\nh1      1\nh2      1\n</code></pre>\n\n<p>I want to compare these two files and write a new file, which will look like below:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>column1 column2\n---------------\nh1      1\nh2      1\nh3      0\nh4      0\n</code></pre>\n\n<p>Whats the best way to do it, since reading the files to array and looping over wouldn't exactly get the file3 output.</p>\n"}, {"tags": ["python", "perl", "flask", "cgi"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1549912620, "post_id": 54637449, "comment_id": 96067147, "body": "Can it do CGI? The language in which the CGI program is written doesn&#39;t matter."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1549919579, "post_id": 54637449, "comment_id": 96070312, "body": "Again, the language in which the program is written doesn&#39;t matter, so you have a CGI program called SRL.pl, ....and?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1549919698, "post_id": 54637449, "comment_id": 96070358, "body": "(I don&#39;t know Python. I don&#39;t know what Flask is. I just know that this question has nothing to do with Perl.)"}, {"owner": {"reputation": 9, "user_id": 4019779, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Narendra Gupta", "link": "https://stackoverflow.com/users/4019779/narendra-gupta"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1549921675, "post_id": 54637449, "comment_id": 96071217, "body": "You are right this question is not Perl specific. My CGI script works fine when used on any Apache server.  I am trying to use Flask (a python micro framework) as my web server, and instead of rendering an html file directly I want to use the CGI script."}], "owner": {"reputation": 9, "user_id": 4019779, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Narendra Gupta", "link": "https://stackoverflow.com/users/4019779/narendra-gupta"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 118, "favorite_count": 0, "closed_date": 1549914049, "answer_count": 0, "score": 0, "last_activity_date": 1549920405, "creation_date": 1549912103, "last_edit_date": 1549920405, "question_id": 54637449, "link": "https://stackoverflow.com/questions/54637449/is-there-a-way-to-serve-existing-perl-cgi-scripts-from-a-flask-python-server", "closed_reason": "Duplicate", "title": "Is there a way to serve existing Perl CGI scripts from a Flask (python) server", "body": "<p>A typical Flask script looks like:</p>\n\n<pre><code>from flask import Flask, render_template\napp=Flask(__name__)\n@app.route('/')\ndef home():\n    return render_template('index.html')\n</code></pre>\n\n<p>My question is instead of 'index.html', how can I use a cgi script 'SRL.pl' wrtten in perl.</p>\n"}, {"tags": ["perl", "grep"], "comments": [{"owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 3, "creation_date": 1549887398, "post_id": 54630410, "comment_id": 96052959, "body": "What Perl code have you already written and how does it fail to do what the <code>grep</code> code does? See <a href=\"http://perldoc.perl.org/perlrun.html\" rel=\"nofollow noreferrer\">perlrun</a> for the basics of how to run Perl. A good first step is likely to consider what the <code>grep</code> command does and the explain that in prose. Then, take that prose and rewrite it as a program."}, {"owner": {"reputation": 263, "user_id": 1895112, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/O1L2A.jpg?s=128&g=1", "display_name": "Gabelins", "link": "https://stackoverflow.com/users/1895112/gabelins"}, "reply_to_user": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 0, "creation_date": 1549887797, "post_id": 54630410, "comment_id": 96053203, "body": "@Corion I edited my question with the draft of the code I was writing"}, {"owner": {"reputation": 4969, "user_id": 10971581, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XPQr1.png?s=128&g=1", "display_name": "jhnc", "link": "https://stackoverflow.com/users/10971581/jhnc"}, "edited": false, "score": 0, "creation_date": 1549888656, "post_id": 54630410, "comment_id": 96053665, "body": "For that grep to work, second file can&#39;t be using <code>|</code>. Perhaps ` `?"}, {"owner": {"reputation": 4969, "user_id": 10971581, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XPQr1.png?s=128&g=1", "display_name": "jhnc", "link": "https://stackoverflow.com/users/10971581/jhnc"}, "edited": false, "score": 0, "creation_date": 1549888858, "post_id": 54630410, "comment_id": 96053784, "body": "Why is the <code>while</code> inside the <code>for</code>? And why does it try to read <code>&lt;$RES&gt;</code> when you already emptied it into <code>@c</code> (and closed it!) ?"}, {"owner": {"reputation": 263, "user_id": 1895112, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/O1L2A.jpg?s=128&g=1", "display_name": "Gabelins", "link": "https://stackoverflow.com/users/1895112/gabelins"}, "reply_to_user": {"reputation": 4969, "user_id": 10971581, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XPQr1.png?s=128&g=1", "display_name": "jhnc", "link": "https://stackoverflow.com/users/10971581/jhnc"}, "edited": false, "score": 0, "creation_date": 1549889045, "post_id": 54630410, "comment_id": 96053906, "body": "@jhnc I edited the post"}, {"owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "edited": false, "score": 2, "creation_date": 1549889231, "post_id": 54630410, "comment_id": 96054012, "body": "First thing I would do is to add <code>use strict;</code> and <code>use warnings;</code>. Then fix the errors you&#39;ll get."}, {"owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "edited": false, "score": 0, "creation_date": 1549889318, "post_id": 54630410, "comment_id": 96054064, "body": "<code>for ($i=0; $i&lt;=$#r; $i++){</code> -&gt; <code>for my $r (@r) {</code> and <code>$r[$i]</code> -&gt; <code>$r</code>."}, {"owner": {"reputation": 4969, "user_id": 10971581, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XPQr1.png?s=128&g=1", "display_name": "jhnc", "link": "https://stackoverflow.com/users/10971581/jhnc"}, "edited": false, "score": 0, "creation_date": 1549889499, "post_id": 54630410, "comment_id": 96054164, "body": "The logic of your perl (<code>$orto1</code>/<code>$orto2</code> assignments) indicates that you actually wanted to run grep without <code>-F</code> and with second file containing <code>|</code> delimiters. However in that case, you wouldn&#39;t get the output you show as lines 4 and 5 would also be deleted."}], "answers": [{"comments": [{"owner": {"reputation": 263, "user_id": 1895112, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/O1L2A.jpg?s=128&g=1", "display_name": "Gabelins", "link": "https://stackoverflow.com/users/1895112/gabelins"}, "edited": false, "score": 0, "creation_date": 1549889898, "post_id": 54630987, "comment_id": 96054385, "body": "thanks, but I&#39;m on a windows machine and I cannot use &quot;cat&quot;."}, {"owner": {"reputation": 157, "user_id": 4234065, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/880adc30c370216c76c21791ff3fc479?s=128&d=identicon&r=PG&f=1", "display_name": "mirchev1977", "link": "https://stackoverflow.com/users/4234065/mirchev1977"}, "reply_to_user": {"reputation": 263, "user_id": 1895112, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/O1L2A.jpg?s=128&g=1", "display_name": "Gabelins", "link": "https://stackoverflow.com/users/1895112/gabelins"}, "edited": false, "score": 0, "creation_date": 1549890579, "post_id": 54630987, "comment_id": 96054773, "body": "I edited the code. You can use the Perl built-in open in order to read the files. The same applies for writing into a file too. open ( my $fh, &#39;&gt;&#39;, &#39;./output.txt&#39;);"}, {"owner": {"reputation": 263, "user_id": 1895112, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/O1L2A.jpg?s=128&g=1", "display_name": "Gabelins", "link": "https://stackoverflow.com/users/1895112/gabelins"}, "edited": false, "score": 0, "creation_date": 1549891169, "post_id": 54630987, "comment_id": 96055108, "body": "as output I get only the file 1 content"}], "tags": [], "owner": {"reputation": 157, "user_id": 4234065, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/880adc30c370216c76c21791ff3fc479?s=128&d=identicon&r=PG&f=1", "display_name": "mirchev1977", "link": "https://stackoverflow.com/users/4234065/mirchev1977"}, "is_accepted": false, "score": 1, "last_activity_date": 1549890534, "last_edit_date": 1549890534, "creation_date": 1549889330, "answer_id": 54630987, "question_id": 54630410, "link": "https://stackoverflow.com/questions/54630410/from-grep-to-perl-inverse-matching-by-perl/54630987#54630987", "title": "From grep to perl: inverse matching by perl", "body": "<p>Here is one not very elaborate, but working solution:</p>\n\n<pre><code>    #!/usr/bin/env perl \n\nuse strict;\nuse warnings;\nuse 5.010;\nuse Data::Dumper;\n\n#my @first_file_lines = split \"\\n\", `cat ./first_file.txt`;\n#my @second_file_lines = split \"\\n\",`cat ./second_file.txt`;\nopen( my $fh, '&lt;', './first_file.txt' );\nopen( my $fh1, '&lt;', './second_file.txt' );\nchomp ( my @first_file_lines = &lt;$fh&gt; );\nchomp (my @second_file_lines = &lt;$fh1&gt;) ;\n\nclose( $fh );\nclose( $fh1 );\n\n\nmy @output = grep { filter( $_, \\@second_file_lines ) } @first_file_lines;\n\nsub filter {\n    my $current    = shift;\n    my $compare_to = shift;\n\n    for my $comp ( @$compare_to ) {\n        my $comp1 = $comp;\n        $comp1 =~ s/\\|/ /;\n        if ( $current =~ /^$comp1/ ) {\n            say 'equal: ' . \"$current   :  $comp\";\n            return;\n        }\n    }\n\n\n    return $current;\n}\n\nsay Dumper( @first_file_lines );\nsay Dumper( @second_file_lines );\n\nfor my $out ( @output ) {\n    `echo \"$out\" &gt;&gt; ./output.txt`;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "edited": false, "score": 0, "creation_date": 1549891961, "post_id": 54631456, "comment_id": 96055558, "body": "@Gabelins updated my answer to be more efficient, i.e. only do one regex match."}, {"owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "edited": false, "score": 0, "creation_date": 1549892121, "post_id": 54631456, "comment_id": 96055653, "body": "Updated the answer to act as filter, i.e. the input to filter is passed in through STDIN (see command line example)."}], "tags": [], "owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "is_accepted": true, "score": 1, "last_activity_date": 1549892538, "last_edit_date": 1549892538, "creation_date": 1549890895, "answer_id": 54631456, "question_id": 54630410, "link": "https://stackoverflow.com/questions/54630410/from-grep-to-perl-inverse-matching-by-perl/54631456#54631456", "title": "From grep to perl: inverse matching by perl", "body": "<p>This should work:</p>\n\n<ul>\n<li>read lines from the reference file\n\n<ul>\n<li>quote the contents of the line to make it compatible for compiling a regex from</li>\n</ul></li>\n<li>compile a combined regex which ORs all matches together\n\n<ul>\n<li>for your example that would be <code>(?:pf1 er2|pf1 er3|er2 pf1|er3 pf1)</code></li>\n</ul></li>\n<li>read lines from STDIN\n\n<ul>\n<li>print the line to STDOUT unless the regex matches</li>\n</ul></li>\n</ul>\n\n<pre class=\"lang-perl prettyprint-override\"><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\n\nmy($reference) = @ARGV;\n\nmy $fh;\nopen($fh, \"&lt;\". $reference)\n    or die \"open '${reference}': $!\\n\";\nmy @matches;\nwhile (&lt;$fh&gt;) {\n    chomp;\n    push(@matches, quotemeta);\n}\nclose($fh)\n    or die \"close '${reference}': $!\\n\";\n\n# compile combined regex\nmy $regex = join('|', @matches);\n$regex = qr/(?:${regex})/;\n\nwhile (&lt;STDIN&gt;) {\n    print unless $_ =~ $regex;\n}\n\nexit 0;\n</code></pre>\n\n<p>Test output:</p>\n\n<pre><code>$ cat dummy1.txt\n1   pf1 er2 0,4  \n2   pf1 er3 0,56  \n3   pf1 er6 0,72365  \n4   er3 pf3 0,263\n5   pf5 er2 0,28473\n\n$ cat dummy2.txt\npf1 er2\npf1 er3\ner2 pf1\ner3 pf1\n\n$ perl dummy.pl &lt;dummy1.txt dummy2.txt\n3   pf1 er6 0,72365  \n4   er3 pf3 0,263\n5   pf5 er2 0,28473\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "is_accepted": false, "score": 2, "last_activity_date": 1549895889, "creation_date": 1549895889, "answer_id": 54632941, "question_id": 54630410, "link": "https://stackoverflow.com/questions/54630410/from-grep-to-perl-inverse-matching-by-perl/54632941#54632941", "title": "From grep to perl: inverse matching by perl", "body": "<p>Based on that sample data, you want to exclude lines from the first file if the second and third columns match the first and second columns of a line of the second file. Storing the second file's columns in a hash and then checking for existence of those keys when reading the first file is an easy, very time efficient approach:</p>\n\n<pre><code>#!/usr/bin/perl\nuse warnings;\nuse strict;\nuse autodie;\n\nmy ($data_file, $excludes_file) = @ARGV;\n\nmy %excludes;\nopen my $ex, \"&lt;\", $excludes_file;\nwhile (&lt;$ex&gt;) {\n  chomp;\n  my @F = split;\n  $excludes{$F[0]}-&gt;{$F[1]} = 1;\n}\n\nopen my $data, \"&lt;\", $data_file;\nwhile (&lt;$data&gt;) {\n  my @F = split;\n  print unless exists $excludes{$F[1]}-&gt;{$F[2]};\n}\n</code></pre>\n\n<p>Running it will give:</p>\n\n<pre><code>$ perl filter.pl file1.txt file2.txt\n3   pf1 er6 0,72365  \n4   er3 pf3 0,263\n5   pf5 er2 0,28473\n</code></pre>\n"}], "owner": {"reputation": 263, "user_id": 1895112, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/O1L2A.jpg?s=128&g=1", "display_name": "Gabelins", "link": "https://stackoverflow.com/users/1895112/gabelins"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 116, "favorite_count": 0, "accepted_answer_id": 54631456, "answer_count": 3, "score": 1, "last_activity_date": 1549895889, "creation_date": 1549887255, "last_edit_date": 1549889156, "question_id": 54630410, "link": "https://stackoverflow.com/questions/54630410/from-grep-to-perl-inverse-matching-by-perl", "title": "From grep to perl: inverse matching by perl", "body": "<p>it is pretty long time that I don't program in perl and I need some push.</p>\n\n<p>I need to compare two lists in order to retain only the lines that are not matching.</p>\n\n<p>my first file looks like this:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>1   pf1 er2 0,4  \n2   pf1 er3 0,56  \n3   pf1 er6 0,72365  \n4   er3 pf3 0,263\n5   pf5 er2 0,28473\n</code></pre>\n\n<p>The second file is like:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>pf1 er2\npf1 er3\ner2 pf1\ner3 pf1\n</code></pre>\n\n<p>And I would like to have an output like:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>3   pf1 er6 0,72365  \n4   er3 pf3 0,263\n5   pf5 er2 0,28473\n</code></pre>\n\n<p>I used to do that by <code>grep -Fvf second_file.txt first-file.txt &gt; output.txt</code></p>\n\n<p>Now i need to perform the same in perl, but I'm not able to organize a code.</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>open(HAN, \"&lt; $file_1\") ||  die \"Impossibile aprire il file $file_1\";\n@r = &lt;HAN&gt;;\nclose(HAN);\nopen(RES, \"&lt; $file_2\") ||  die \"Impossibile aprire il file $file_2\";\n@c = &lt;RES&gt;;\nclose(RES);\n\nfor ($i=0; $i&lt;=$#r; $i++){\n    ($num, $id1, $id2, $v) = split (/\\t/, $r[$i], 4);\n\n    $ppi1 = $id1.\"\\t\".$id2;\n\n    for($t=0; $t&lt;=$#c; $t++){\n        ($iid1, $iid2) = split (/ /, $c[$t]);\n        $orto1 = $iid1.\"\\t\".$iid2;\n        $orto2 = $iid2.\"\\t\".$iid1;\n\n        if( ($ppi1 ne $orto1) || ($ppi1 ne $orto2) ){\n            print \"$ppi1\\n\";\n        }\n    }\n}\n</code></pre>\n\n<p>Any suggestion is very welcome!</p>\n"}, {"tags": ["perl", "fatal-error"], "comments": [{"owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 3, "creation_date": 1549886036, "post_id": 54630008, "comment_id": 96052150, "body": "These error messages don&#39;t come from your Perl script. Either you are not posting the code you are running, or the error comes from somewhere else. Also note that the error messages seem to contain a newline between <code>folder</code> and <code>&#47;.&#47;</code>. Maybe that&#39;s the source of the problem. Please <a href=\"https://stackoverflow.com/posts/54630008/edit\">edit</a> your post and post the relevant code and/or the correct error messages."}, {"owner": {"reputation": 97, "user_id": 10907113, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99a903cad6d1fbf0597b3405521571b5?s=128&d=identicon&r=PG&f=1", "display_name": "ritz", "link": "https://stackoverflow.com/users/10907113/ritz"}, "reply_to_user": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 0, "creation_date": 1549886536, "post_id": 54630008, "comment_id": 96052430, "body": "@Corion This is the same code and error nothing change."}, {"owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 2, "creation_date": 1549886655, "post_id": 54630008, "comment_id": 96052500, "body": "You claim the script outputs <code>FATAL ERROR:Error opening cel file</code> somewhere. That string is nowhere in your script and Perl does not produce such error messages. So, please check again. Also, if you are running on Windows, using <code>chomp</code> will not remove all whitespace from the end of the directory names in <code>CEL</code>. Why do you write the names to a file just to read them again?!"}, {"owner": {"reputation": 5296, "user_id": 418066, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/38yuw.png?s=128&g=1", "display_name": "Biffen", "link": "https://stackoverflow.com/users/418066/biffen"}, "edited": false, "score": 1, "creation_date": 1549886667, "post_id": 54630008, "comment_id": 96052506, "body": "<i>Always</i> <code>use strict; use warnings;</code>!"}, {"owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "edited": false, "score": 1, "creation_date": 1549887601, "post_id": 54630008, "comment_id": 96053072, "body": "I would also recommend some consistent indentation. This code is quite unreadable."}, {"owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "edited": false, "score": 0, "creation_date": 1549887953, "post_id": 54630008, "comment_id": 96053290, "body": "Where are <code>$input_file</code> and <code>$output_file</code> used? I gather from your code that <code>$fullspec</code> is supposed to be the same as the input file?!???"}, {"owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "edited": false, "score": 0, "creation_date": 1549888089, "post_id": 54630008, "comment_id": 96053345, "body": "Why does your script first write to a file (<code>$cel_files</code>) and then read that exact same file in again? Why don&#39;t you use the information collected in <code>@wanted_files</code> directly?"}, {"owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "edited": false, "score": 0, "creation_date": 1549888240, "post_id": 54630008, "comment_id": 96053422, "body": "and then your write in a temp file the exact same contents you wrote to the first file?!?!?!?!? Sorry, your code makes absolutely <i>no sense</i>..."}, {"owner": {"reputation": 97, "user_id": 10907113, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99a903cad6d1fbf0597b3405521571b5?s=128&d=identicon&r=PG&f=1", "display_name": "ritz", "link": "https://stackoverflow.com/users/10907113/ritz"}, "reply_to_user": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "edited": false, "score": 0, "creation_date": 1549888277, "post_id": 54630008, "comment_id": 96053446, "body": "@StefanBecker I am new with Perl. So my code is little long.  output file will use further in program. and $fulspec = $input_file"}, {"owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "edited": false, "score": 0, "creation_date": 1549889607, "post_id": 54630008, "comment_id": 96054232, "body": "You can&#39;t expect people to answer your question if your code makes no sense."}, {"owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 0, "creation_date": 1549892808, "post_id": 54630008, "comment_id": 96056092, "body": "I think a major problem with your logic is that you don&#39;t know arrays and use lines in files instead. Whenever you write lines into a file, push them into an array instead: <code>push @my_lines, $line</code> instead of <code>print CEL, &quot;$file\\n&quot;</code>. Then, use <code>for my $line (@my_lines) { ...</code> instead of <code>for my $line (&lt;CEL&gt;) { ...</code>"}], "answers": [{"comments": [{"owner": {"reputation": 97, "user_id": 10907113, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99a903cad6d1fbf0597b3405521571b5?s=128&d=identicon&r=PG&f=1", "display_name": "ritz", "link": "https://stackoverflow.com/users/10907113/ritz"}, "edited": false, "score": 0, "creation_date": 1549957330, "post_id": 54636339, "comment_id": 96081172, "body": "Thank you for your response. I don&#39;t have too much knowledge about programming and I am learning it so it may be vary easy in Shell."}, {"owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "reply_to_user": {"reputation": 97, "user_id": 10907113, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99a903cad6d1fbf0597b3405521571b5?s=128&d=identicon&r=PG&f=1", "display_name": "ritz", "link": "https://stackoverflow.com/users/10907113/ritz"}, "edited": false, "score": 0, "creation_date": 1549985280, "post_id": 54636339, "comment_id": 96098533, "body": "@ritz Well, is my answer correct, i.e. did I guess what your program is supposed to do? If yes, then please up-vote and accept it. Otherwise I would suggest to rephrase or close your question."}], "tags": [], "owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "is_accepted": false, "score": 1, "last_activity_date": 1549907786, "last_edit_date": 1549907786, "creation_date": 1549907458, "answer_id": 54636339, "question_id": 54630008, "link": "https://stackoverflow.com/questions/54630008/how-to-read-a-file-from-a-folder-by-full-file-name-in-perl/54636339#54636339", "title": "How to read a file from a folder by full file name in Perl", "body": "<p>I'm going to ignore all the stuff from the OP code that seems to be unnecessary.</p>\n\n<p>Instead my answer concentrates on the only piece that actually does seem to do something: the anonymous function passed to <code>find()</code>. Based on that I determine that the OP wants to search for files with the same name as given on the command line, starting at the current directory.</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\n\nuse File::Find;\n\nmy($match) = @ARGV;\ndie \"usage: $0 &lt;file name to match&gt;\\n\"\n    unless defined $match;\n\n# file search\nfind({\n        wanted   =&gt; sub {\n            print \"$File::Find::name\\n\"\n                if (-f $_) &amp;&amp; ($_ eq $match);\n        },\n     },\n     '.'\n);\n\nexit 0;\n</code></pre>\n\n<p>Example usage:</p>\n\n<pre class=\"lang-sh prettyprint-override\"><code>$ ./R.pl some_file_name_to_find &gt;cel_files.txt\n</code></pre>\n\n<hr>\n\n<p>The question remains: <strong>WHY?</strong> The same can be achieved on the shell command line with:</p>\n\n<pre class=\"lang-sh prettyprint-override\"><code>$ find . -type f -name some_file_name_to_find &gt;cel_files.txt\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 97, "user_id": 10907113, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99a903cad6d1fbf0597b3405521571b5?s=128&d=identicon&r=PG&f=1", "display_name": "ritz", "link": "https://stackoverflow.com/users/10907113/ritz"}, "is_accepted": false, "score": 0, "last_activity_date": 1549956962, "creation_date": 1549956962, "answer_id": 54644942, "question_id": 54630008, "link": "https://stackoverflow.com/questions/54630008/how-to-read-a-file-from-a-folder-by-full-file-name-in-perl/54644942#54644942", "title": "How to read a file from a folder by full file name in Perl", "body": "<p>After removing $CEL_dir It is working as expected </p>\n\n<pre><code>use File::Find;\nmy @wanted_files;\nfind(\n sub{ \n     -f $_ &amp;&amp; $_ =~ $files  \n           &amp;&amp; push @wanted_files,$File::Find::name\n },\"$ARGV[0]\"\n);\n\nforeach(@wanted_files){\nprint CEL \"$_\\n\"; # remove $CEL_dir\n}close (CEL);\n</code></pre>\n"}], "owner": {"reputation": 97, "user_id": 10907113, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99a903cad6d1fbf0597b3405521571b5?s=128&d=identicon&r=PG&f=1", "display_name": "ritz", "link": "https://stackoverflow.com/users/10907113/ritz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 321, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1549957011, "creation_date": 1549885878, "last_edit_date": 1549957011, "question_id": 54630008, "link": "https://stackoverflow.com/questions/54630008/how-to-read-a-file-from-a-folder-by-full-file-name-in-perl", "title": "How to read a file from a folder by full file name in Perl", "body": "<p>I have a Perl script and I am giving the location &amp; name of the input file and output file on the terminal </p>\n\n<pre><code>./R.pl  &lt;input file&gt;  &lt;output file&gt;\n</code></pre>\n\n<p>I am trying to write a Perl program which can take a file name as input and do some function and generate output in a given folder.</p>\n\n<p>This is my Perl script:- </p>\n\n<pre><code>my $input_file = $ARGV[0]\nor die \"usage: $0 &lt;input file&gt; &lt;output file&gt;\\n\";\nmy $output_file = $ARGV[1]\nor die \"usage: $0 &lt;input file&gt; &lt;output file&gt;\\n\";\nuse File::Basename;\n$fullspec = $ARGV[0];\nmy($files,$dir) = fileparse($fullspec);\nprint \"Directory: \" . $dir . \"\\n\";\nprint \"File:\" . $files . \"\\n\";\nchomp($CEL_dir = $dir);\nopendir (DIR, \"$CEL_dir\") or die \"Couldn't open directory $CEL_dir\";\n$cel_files = $CEL_dir.\"/cel_files.txt\";\nopen(CEL,\"&gt;$cel_files\")|| die \"cannot open $file to write\";\nprint CEL \"cel_files\\n\";\n\nuse File::Find;\n\nmy @wanted_files;\nfind(\n sub{ \n     -f $_ &amp;&amp; $_ =~ $files  \n           &amp;&amp; push @wanted_files,$File::Find::name\n }, \".\"\n );\n\n foreach(@wanted_files){\n print CEL $CEL_dir.\"$_\\n\";\n }close (CEL);\n</code></pre>\n\n<p>But it is giving the error:-</p>\n\n<pre><code>FATAL ERROR:Error opening cel file: /media/home/folder\n/./44754.CEL\nRead 2 cel files from: cel_files.txt\n\nFATAL ERROR:Can't read file: '/media/home/folder\n/./folder/44754.CEL'\n</code></pre>\n\n<p>where I am wrong or what modification is required in this script.</p>\n"}, {"tags": ["perl", "debugging"], "answers": [{"tags": [], "owner": {"reputation": 2954, "user_id": 235961, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f8e403d928f09096477fd2b4f3c00560?s=128&d=identicon&r=PG", "display_name": "Pradeep", "link": "https://stackoverflow.com/users/235961/pradeep"}, "is_accepted": true, "score": 7, "last_activity_date": 1549882073, "creation_date": 1549882073, "answer_id": 54628830, "question_id": 54628182, "link": "https://stackoverflow.com/questions/54628182/how-to-redirect-debug-trace-of-perl-script-to-file-when-using-nonstop-debugger-o/54628830#54628830", "title": "How to redirect debug trace of perl script to file when using NonStop debugger option?", "body": "<p>Use Perl option <em>LineInfo=db.out</em> to output to a file.</p>\n\n<p>Example:</p>\n\n<pre><code>PERLDB_OPTS=\"NonStop frame=1 LineInfo=db.out\" perl -d ./test.pl\n</code></pre>\n\n<p>Sample output:</p>\n\n<pre><code>entering CODE(0x14c53f0)\nentering CODE(0x14ce788)\n entering CODE(0x164f2a0)\n  entering strict::import\n entering CODE(0x164f270)\n  entering warnings::import\n entering CODE(0x16168b8)\n  entering CODE(0x16160f0)\n   entering CODE(0x15fc378)\n   entering CODE(0x1601a10)\n    Package /usr/share/perl5/warnings/register.pm.\n</code></pre>\n\n<p>More info at <a href=\"https://perldoc.perl.org/perldebug.html#Configurable-Options\" rel=\"noreferrer\">https://perldoc.perl.org/perldebug.html#Configurable-Options</a></p>\n"}], "owner": {"reputation": 1445, "user_id": 1441592, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/2a58917def8d1523a840b52ae7d59d21?s=128&d=identicon&r=PG", "display_name": "Paul Serikov", "link": "https://stackoverflow.com/users/1441592/paul-serikov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 172, "favorite_count": 0, "accepted_answer_id": 54628830, "answer_count": 1, "score": 3, "last_activity_date": 1549885141, "creation_date": 1549879985, "last_edit_date": 1549885141, "question_id": 54628182, "link": "https://stackoverflow.com/questions/54628182/how-to-redirect-debug-trace-of-perl-script-to-file-when-using-nonstop-debugger-o", "title": "How to redirect debug trace of perl script to file when using NonStop debugger option?", "body": "<p>I'm using the standard Perl debugger to trace calls:</p>\n\n<pre><code>$ cat test.pl \nsub test { print \"Hello world\" }\ntest();\n$ PERLDB_OPTS=\"NonStop frame=1\" perl -d test.pl &gt; /dev/null\nPackage test.pl.\n  entering DB::Obj::_init\n  entering main::test\n</code></pre>\n\n<p>How to redirect output to file? </p>\n\n<p>If I make </p>\n\n<pre><code>PERLDB_OPTS=\"NonStop frame=1\" perl -d test.pl &gt; /dev/null 2&gt;trace.txt\n</code></pre>\n\n<p><code>trace.txt</code> is empty.</p>\n\n<p>It doesn't look like that debug output printed on standard streams (STDERR or STDOUT both).</p>\n"}, {"tags": ["xml", "perl", "xml-twig"], "answers": [{"comments": [{"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 1, "creation_date": 1549907915, "post_id": 54627305, "comment_id": 96064936, "body": "To add: the easiest way to load a huge amount of data into Perl without permanently increasing the process&#39;s memory usage, is to fork, load the data in the child process, then exit that child (after doing something useful with the data, presumably)."}], "tags": [], "owner": {"reputation": 15323, "user_id": 11095, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c911d40f47f422f820d8a524658bd5a?s=128&d=identicon&r=PG", "display_name": "mirod", "link": "https://stackoverflow.com/users/11095/mirod"}, "is_accepted": true, "score": 3, "last_activity_date": 1549876948, "creation_date": 1549876948, "answer_id": 54627305, "question_id": 54627117, "link": "https://stackoverflow.com/questions/54627117/xmltwig-purge-not-releasing-system-memory-in-perl-program/54627305#54627305", "title": "XML::Twig purge not releasing system memory in perl program", "body": "<p>The basic reason is that Perl never releases the memory it uses to the system.</p>\n\n<p>The <code>purge</code> is actually useless. You just have to let the twig go out of scope, and the memory will be released... for Perl to use again. So if you parsed several files, the memory used would be the amount used by the biggest file.</p>\n\n<p><code>purge</code> is used in handlers, so the memory from a part of the XML tree is released (to Perl, not the system) and reused for the next part. So the memory used is the amount used by he biggest part kept in memory at once.</p>\n"}], "owner": {"reputation": 473, "user_id": 8721281, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7DKU2.jpg?s=128&g=1", "display_name": "Chazg76", "link": "https://stackoverflow.com/users/8721281/chazg76"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 59, "favorite_count": 0, "accepted_answer_id": 54627305, "answer_count": 1, "score": 2, "last_activity_date": 1549876967, "creation_date": 1549876205, "last_edit_date": 1549876967, "question_id": 54627117, "link": "https://stackoverflow.com/questions/54627117/xmltwig-purge-not-releasing-system-memory-in-perl-program", "title": "XML::Twig purge not releasing system memory in perl program", "body": "<p>I have been using XML::Twig for a while now on fairly small xml files with no issues. About a week ago I needed to parse a much larger xml file that was about 260MB. The file was contained within a zip archive (260MB is size of uncompressed file).</p>\n\n<p>I loaded the entire file in memory (it took up about 3GB (about 50% of available) which was to be expected). I then added/modified some values and saved the file to disk using the print to file method. Once this was all done I performed a purge thinking that I would get back the memory used to parse the file. However this does not seem to be the case and I was wondering why? I am XML::Twig version 3.34 and perl version 5.10.1 on a linux machine.</p>\n\n<p>My basic code structure is as follows:</p>\n\n<pre><code> my $Sheetx= $zip-&gt;contents('file1.xml');\n my $tw11=new XML::Twig();\n my $Sheetx_parse = $tw11-&gt;parse($Sheetx);\n my $fh1PB_filename='file2.xml';\n open(my $fh1PB, '&gt;:encoding(UTF-8)', $fh1PB_filename) or die \"Could not open file \" . $fh1PB_filename .  \" $!\";\n $tw11-&gt;print($fh1PB);\n close($fh1PB);\n $tw11-&gt;purge();\n my $member1 = $zip-&gt;removeMember('file1.xml');\n my $member1A = $zip-&gt;addFile($fh1PB_filename,'file1.xml','8');\n</code></pre>\n\n<p>Any help much appreciated.</p>\n\n<p>P.S. I know I could use twig handlers to reduce memory usage but would like to know why the purge idea does not seem to work when parsing the entire file.</p>\n"}, {"tags": ["perl", "hash"], "answers": [{"comments": [{"owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "reply_to_user": {"reputation": 17, "user_id": 7700359, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh4.googleusercontent.com/-wEdE_ERIePM/AAAAAAAAAAI/AAAAAAAAJGQ/k2ceucupQb4/photo.jpg?sz=128", "display_name": "ary", "link": "https://stackoverflow.com/users/7700359/ary"}, "edited": false, "score": 0, "creation_date": 1549870858, "post_id": 54625791, "comment_id": 96043915, "body": "What do you mean by &quot;print&quot;? The problem in your code is that you tried to use hash de-reference <code>%{ ... }</code> on an array reference. My <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> shows how to loop over an array reference."}, {"owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "edited": false, "score": 0, "creation_date": 1549871107, "post_id": 54625791, "comment_id": 96044020, "body": "I&#39;ve updated my answer to use the example data set instead. Maybe now it becomes more clear?"}, {"owner": {"reputation": 17, "user_id": 7700359, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh4.googleusercontent.com/-wEdE_ERIePM/AAAAAAAAAAI/AAAAAAAAJGQ/k2ceucupQb4/photo.jpg?sz=128", "display_name": "ary", "link": "https://stackoverflow.com/users/7700359/ary"}, "edited": false, "score": 0, "creation_date": 1549871144, "post_id": 54625791, "comment_id": 96044035, "body": "That is great but then it duplicates the results for me. So in my example the variable $onecell1 has multiple values and then it prints out multiple times. THe whole idea of creating the hash was to remove the duplicates and have a single field for the values. Thanks for the advice. I will keep it in mind and thanks again for your code."}, {"owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "reply_to_user": {"reputation": 17, "user_id": 7700359, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh4.googleusercontent.com/-wEdE_ERIePM/AAAAAAAAAAI/AAAAAAAAJGQ/k2ceucupQb4/photo.jpg?sz=128", "display_name": "ary", "link": "https://stackoverflow.com/users/7700359/ary"}, "edited": false, "score": 0, "creation_date": 1549871433, "post_id": 54625791, "comment_id": 96044137, "body": "OK, I think I got it now. I&#39;ve removed the last loop and replaced it with a <code>join()</code> for the array element."}, {"owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "reply_to_user": {"reputation": 17, "user_id": 7700359, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh4.googleusercontent.com/-wEdE_ERIePM/AAAAAAAAAAI/AAAAAAAAJGQ/k2ceucupQb4/photo.jpg?sz=128", "display_name": "ary", "link": "https://stackoverflow.com/users/7700359/ary"}, "edited": false, "score": 0, "creation_date": 1549877342, "post_id": 54625791, "comment_id": 96047053, "body": "Is your problem solved now, i.e. can we close this question?"}], "tags": [], "owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "is_accepted": false, "score": 1, "last_activity_date": 1549871505, "last_edit_date": 1549871505, "creation_date": 1549870383, "answer_id": 54625791, "question_id": 54625651, "link": "https://stackoverflow.com/questions/54625651/i-am-having-problems-trying-to-print-this-hash-using-perl/54625791#54625791", "title": "I am having problems trying to print this hash using perl", "body": "<p>Because your last level is an array ref, not a hash. You need to use array dereference <code>@{ ... }</code> on an array reference:</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\n\nmy %test = (\n    'A1RE' =&gt; {\n        'Recombinant Human' =&gt; {\n            \"Lyophilized protein \" =&gt; [\n                '10 ug',\n                '50 ug',\n                '500 ug',\n                '1 mg',\n            ],\n        },\n    },\n);\n\nforeach my $name (sort keys %test) {\n    my $subjects = $test{$name};\n    foreach my $subject (keys %{ $subjects }) {\n        my $storages = $subjects-&gt;{$subject};\n        foreach my $storage (keys %{ $storages }) {\n            my $sizes = $storages-&gt;{$storage};\n            print \"$name: $subject: $storage: \", join(\", \", @{ $sizes }), \"\\n\";\n        }\n    }\n}\n\nexit 0;\n</code></pre>\n\n<p>Output:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>$ perl dummy.pl \nA1RE: Recombinant Human: Lyophilized protein : 10 ug, 50 ug, 500 ug, 1 mg\n</code></pre>\n"}], "owner": {"reputation": 17, "user_id": 7700359, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh4.googleusercontent.com/-wEdE_ERIePM/AAAAAAAAAAI/AAAAAAAAJGQ/k2ceucupQb4/photo.jpg?sz=128", "display_name": "ary", "link": "https://stackoverflow.com/users/7700359/ary"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 54, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1549871505, "creation_date": 1549869750, "last_edit_date": 1549870168, "question_id": 54625651, "link": "https://stackoverflow.com/questions/54625651/i-am-having-problems-trying-to-print-this-hash-using-perl", "title": "I am having problems trying to print this hash using perl", "body": "<p>I am trying to work through a problem where I created a hash using </p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>push @{ $test{$onecell2}{$onecell3}{$onecell4} }, $onecell1;\n</code></pre>\n\n<p>The reason for using this is due to the fact that the first 3 are repeated with multiple values which is the oncell1.</p>\n\n<p>I am not able to print the hash because at the fourth level I am getting this error: <code>N\u00f2t a HASH reference</code></p>\n\n<p>It would be great if somebody could help. Thanks</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>my %test;  \n\npush @{ $test{$onecell2}{$onecell3}{$onecell4} }, $onecell1;\n\nforeach my $name (sort keys %test) {\n    foreach my $subject (keys %{ $test{$name} }) {\n     foreach my $storage (keys %{ $test{$name}{$subject} }) {\n      foreach my $size (keys %{ $test{$name}{$subject}{$storage} }) {\n        print \"$name: $subject: $storage: $size \\n\";\n     }  \n    }\n   }\n}\n</code></pre>\n\n<p>And the error is: <code>Not a HASH reference</code></p>\n\n<p>This is the hash structure</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>$VAR1 = {\n      'A1RE' =&gt; {\n           'Recombinant Human' =&gt; {                                       \n               \"Lyophilized protein \" =&gt; [\n                   '10 ug',                                                                                                                                                                                                                                                                                                                                  \n                   '50 ug',                                                                                                                                                                                                                                                                                                                                \n                   '500 ug',                                                                                                                                                                                                                                                                                                                                 \n                   '1 mg'                                                                                                                                                                                                                                                                              \n               ]                                                               \n           }\n      };\n</code></pre>\n\n<p>I expect the output to be:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code> AIRE: Recombinant Human: Lyophilized protein: 10 ug,50 ug, 500 ug, 1mg.\n</code></pre>\n"}, {"tags": ["perl", "awk", "posix", "locale", "standards-compliance"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1549867183, "post_id": 54624935, "comment_id": 96042444, "body": "What&#39;s your version of Perl? &quot;<i>Unfortunately, there are quite a few deficiencies with the design (and often, the implementations) of locales. Unicode was invented (see perlunitut for an introduction to that) in part to address these design deficiencies, and nowadays, there is a series of &quot;UTF-8 locales&quot;, based on Unicode. These are locales whose character set is Unicode, encoded in UTF-8. Starting in v5.20, Perl fully supports UTF-8 locales, except for sorting and string comparisons like <code>lt</code> and <code>ge</code>.</i>"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1549867191, "post_id": 54624935, "comment_id": 96042447, "body": "&quot;<i>Starting in v5.26, Perl can handle these reasonably as well, depending on the platform&#39;s implementation. However, for earlier releases or for better control, use Unicode::Collate. Perl continues to support the old non UTF-8 locales as well. There are currently no UTF-8 locales for EBCDIC platforms.</i>&quot;"}, {"owner": {"reputation": 599, "user_id": 4411491, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DSLfn.jpg?s=128&g=1", "display_name": "Guenther Brunthaler", "link": "https://stackoverflow.com/users/4411491/guenther-brunthaler"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1549867708, "post_id": 54624935, "comment_id": 96042643, "body": "@ikegami I have perl 5, version 24, subversion 1 (v5.24.1) built for i686-linux-gnu-thread-multi-64int - this is the current Debian-9 version."}, {"owner": {"reputation": 599, "user_id": 4411491, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DSLfn.jpg?s=128&g=1", "display_name": "Guenther Brunthaler", "link": "https://stackoverflow.com/users/4411491/guenther-brunthaler"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1549868027, "post_id": 54624935, "comment_id": 96042768, "body": "@ikegami Can you give me a hint how Unicode::Collate could be integrated within my above script? As far as I noticed from a quick glance, Unicode::Collate does not care about the current locale. And I do not want my script to require a UNICODE locale either."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1549868154, "post_id": 54624935, "comment_id": 96042814, "body": "I wasn&#39;t suggesting you use U::C; I was just pointing out the issues with different versions of Perl. If your trying to sort (rather than change case), <a href=\"https://metacpan.org/pod/Unicode::Collate::Locale\" rel=\"nofollow noreferrer\">Unicode::Collate::Locale</a> would be more up your alley."}, {"owner": {"reputation": 599, "user_id": 4411491, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DSLfn.jpg?s=128&g=1", "display_name": "Guenther Brunthaler", "link": "https://stackoverflow.com/users/4411491/guenther-brunthaler"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1549868373, "post_id": 54624935, "comment_id": 96042910, "body": "@ikegami Do I understand you correctly then, that &quot;use locale&quot; is buggy in Perl versions before 5.26, and just does not work correctly with all locales, not even with UTF-8 based locales?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1549868405, "post_id": 54624935, "comment_id": 96042924, "body": "Well, according to the passage, it should have word with 5.20+. But yeah, UTF-8 locales were largely ignored by Perl for a while (because they were so broken in so many distros, as I understand things)."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1549868590, "post_id": 54624935, "comment_id": 96043003, "body": "oo, Turns out my host does have <code>de_AT.UTF-8</code>. Testing..."}, {"owner": {"reputation": 599, "user_id": 4411491, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DSLfn.jpg?s=128&g=1", "display_name": "Guenther Brunthaler", "link": "https://stackoverflow.com/users/4411491/guenther-brunthaler"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1549868683, "post_id": 54624935, "comment_id": 96043045, "body": "I wonder if I might have to do more than just &quot;use locale&quot; in the Perl script? But as far as I have understood the documentation, this should not be the case provided the locale has been set correctly. Which seems to be the case, or the AWK could not work correctly either."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1549870685, "post_id": 54624935, "comment_id": 96043841, "body": "<code>LC_ALL=de_AT.UTF-8 LANG=de_AT.UTF-8 LANGUAGE=de_AT.UTF-8 perl -le&#39;use locale; $_ = &quot;&#196;gypten&quot;; printf &quot;%vX\\n&quot;, $_; $_ = lc($_);  printf &quot;%vX\\n&quot;, $_;&#39;</code> converts <code>C3.84</code> into <code>E3.84</code> instead of <code>C3.A4</code>, suggesting the input should be decoded before being passed to <code>lc</code>. But while that seems required for UTF-8 locales, my understanding of perllocale leads me to believe that&#39;s bad for non-UTF-8 locales because it can lead to the following situation: (&quot;Greek locale&quot; refers to ISO8859-7)"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1549870696, "post_id": 54624935, "comment_id": 96043849, "body": "&quot;<i>Still another problem is that this approach can lead to two code points meaning the same character. Thus in a Greek locale, both U+03A7 and U+00D7 are GREEK CAPITAL LETTER CHI. Because of all these problems, starting in v5.22, Perl will raise a warning if a multi-byte (hence Unicode) code point is used when a single-byte locale is in effect. (Although it doesn&#39;t check for this if doing so would unreasonably slow execution down.)</i>&quot;"}], "answers": [{"comments": [{"owner": {"reputation": 599, "user_id": 4411491, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DSLfn.jpg?s=128&g=1", "display_name": "Guenther Brunthaler", "link": "https://stackoverflow.com/users/4411491/guenther-brunthaler"}, "edited": false, "score": 0, "creation_date": 1549869400, "post_id": 54625258, "comment_id": 96043327, "body": "Thanks, this is in fact good enough for my question because my test case does not involve sorting. Otherwise it would still be a problem."}, {"owner": {"reputation": 599, "user_id": 4411491, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DSLfn.jpg?s=128&g=1", "display_name": "Guenther Brunthaler", "link": "https://stackoverflow.com/users/4411491/guenther-brunthaler"}, "edited": false, "score": 0, "creation_date": 1549870035, "post_id": 54625258, "comment_id": 96043593, "body": "I mean it would have been a problem if my script needed to use the locale&#39;s collation sequence. But it does not."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 599, "user_id": 4411491, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DSLfn.jpg?s=128&g=1", "display_name": "Guenther Brunthaler", "link": "https://stackoverflow.com/users/4411491/guenther-brunthaler"}, "edited": false, "score": 0, "creation_date": 1549870415, "post_id": 54625258, "comment_id": 96043742, "body": "You can use <a href=\"https://metacpan.org/pod/Unicode::Collate::Locale\" rel=\"nofollow noreferrer\">Unicode::Collate::Locale</a> for sorting."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 3, "last_activity_date": 1549867816, "creation_date": 1549867816, "answer_id": 54625258, "question_id": 54624935, "link": "https://stackoverflow.com/questions/54624935/how-to-make-uc-work-in-perl-like-toupper-does-in-awk-in-a-locale-aware-posix/54625258#54625258", "title": "How to make uc() work in Perl like toupper() does in AWK in a locale-aware POSIX environment?", "body": "<p>This is not quite what you asked since it determines casing based on Unicode rules instead of the locale's rules, but it will work for all locales (UTF-8 and otherwise):</p>\n\n<pre><code>use open ':std', ':locale';\nwhile (&lt;&gt;) {\n    print \"original \", $_;\n    print \"to lower \", lc;\n    print \"to upper \", uc;\n}\n</code></pre>\n"}], "owner": {"reputation": 599, "user_id": 4411491, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DSLfn.jpg?s=128&g=1", "display_name": "Guenther Brunthaler", "link": "https://stackoverflow.com/users/4411491/guenther-brunthaler"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 113, "favorite_count": 0, "accepted_answer_id": 54625258, "answer_count": 1, "score": 0, "last_activity_date": 1549868924, "creation_date": 1549866121, "last_edit_date": 1549868924, "question_id": 54624935, "link": "https://stackoverflow.com/questions/54624935/how-to-make-uc-work-in-perl-like-toupper-does-in-awk-in-a-locale-aware-posix", "title": "How to make uc() work in Perl like toupper() does in AWK in a locale-aware POSIX environment?", "body": "<p>When I use functions like toupper() in AWK, they are automatically locale-aware and process text in the user's current locale.</p>\n\n<p>I would like to do the same in a Perl script, but have failed so far.</p>\n\n<p>For this, I wrote the following ASCII shell script for testing Perl and AWK:</p>\n\n<pre><code>$ unexpand -t 2 &lt;&lt; 'END_SCRIPT' | tee case3 &amp;&amp; chmod +x case3\n#! /bin/sh\n{\n  iconv -cf UTF-7 \\\n  | case $1 in\n  awk)\n    awk '{\n      print \"original\", $0\n      print \"to lower\", tolower($0)\n      print \"to upper\", toupper($0)\n    }'\n    ;;\n  perl)\n    perl -e '\n      use locale;\n      while (defined($_= &lt;&gt;)) {\n        print \"original \", $_;\n        print \"to lower \", lc;\n        print \"to upper \", uc;\n      }\n    '\n  esac \\\n  | iconv -ct UTF-7 | iconv -cf UTF-7\n} &lt;&lt; 'EOF'\n+AMQ-gypten\nS+APw-d\n+APY-stlich\nEOF\nEND_SCRIPT\n</code></pre>\n\n<p>Note the iconv UTF-7 stuff at the end of the script: This is just there to drop any characters from the output that the current locale cannot represent.</p>\n\n<p>Here is the output when I run the script for testing AWK:</p>\n\n<pre><code>$ ./case3 awk\noriginal \u00c4gypten\nto lower \u00e4gypten\nto upper \u00c4GYPTEN\noriginal S\u00fcd\nto lower s\u00fcd\nto upper S\u00dcD\noriginal \u00f6stlich\nto lower \u00f6stlich\nto upper \u00d6STLICH\n</code></pre>\n\n<p>This looks quite good and how it should be.</p>\n\n<p>Now the same for Perl:</p>\n\n<pre><code>$ ./case3 perl\noriginal \u00c4gypten\nto lower gypten\nto upper \u00c4GYPTEN\noriginal S\u00fcd\nto lower sd\nto upper S\u00fcD\noriginal \u00f6stlich\nto lower stlich\nto upper \u00f6STLICH\n</code></pre>\n\n<p>Obviously, this produces different output and works just not right.</p>\n\n<p>I would appreciate to know what I made wrong in the \"perl\"-case of the script.</p>\n\n<p>Note: I do <em>not</em> want my script to require a UTF-8 locale, it should work with any locale which can represent the German Umlauts used in my test.txt file.</p>\n\n<p>In case you should be curious, the above results were generated with the following locale settings:</p>\n\n<pre><code>$ locale\nLANG=de_AT.UTF-8\nLANGUAGE=de_AT.UTF-8:de.UTF-8:en_US.UTF-8:de_AT:de:en_US:en\nLC_CTYPE=\"de_AT.UTF-8\"\nLC_NUMERIC=\"de_AT.UTF-8\"\nLC_TIME=\"de_AT.UTF-8\"\nLC_COLLATE=\"de_AT.UTF-8\"\nLC_MONETARY=\"de_AT.UTF-8\"\nLC_MESSAGES=\"de_AT.UTF-8\"\nLC_PAPER=\"de_AT.UTF-8\"\nLC_NAME=\"de_AT.UTF-8\"\nLC_ADDRESS=\"de_AT.UTF-8\"\nLC_TELEPHONE=\"de_AT.UTF-8\"\nLC_MEASUREMENT=\"de_AT.UTF-8\"\nLC_IDENTIFICATION=\"de_AT.UTF-8\"\nLC_ALL=\n</code></pre>\n"}, {"tags": ["perl", "csv"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1549839645, "post_id": 54621539, "comment_id": 96036684, "body": "Tip: You have a lot a bugs in your parsing of the CSV file. You should use Text::CSV. It&#39;s not any longer to use, and it will correctly parse your CSV.  Usage: <code>my $csv = Text::CSV-&gt;new({ auto_diag =&gt; 2, binary =&gt; 1 }); while (my $fields = $csv-&gt;getline($data)) { ... }</code>"}], "answers": [{"tags": [], "owner": {"reputation": 155387, "user_id": 978917, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/92d059913eace78a868a3e87f98e0a57?s=128&d=identicon&r=PG", "display_name": "ruakh", "link": "https://stackoverflow.com/users/978917/ruakh"}, "is_accepted": false, "score": 7, "last_activity_date": 1549839473, "last_edit_date": 1549839473, "creation_date": 1549836683, "answer_id": 54621611, "question_id": 54621539, "link": "https://stackoverflow.com/questions/54621539/assigning-a-value-to-a-variable-containing-a-colon-in-perl/54621611#54621611", "title": "Assigning a value to a variable containing a colon in Perl", "body": "<p>The error-message indicates a problem with how Perl is being invoked. It's trying to run <code>part1.csv</code> as a Perl program (instead of running your actual Perl program).</p>\n\n<pre><code>perl -d part1.csv EJHour1-1.mp3\n</code></pre>\n\n<p>should be</p>\n\n<pre><code>perl script.pl part1.csv EJHour1-1.mp3\n</code></pre>\n\n<p>or just</p>\n\n<pre><code>script.pl part1.csv EJHour1-1.mp3\n</code></pre>\n"}], "owner": {"reputation": 9, "user_id": 11042536, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/77545d9858f2072c0b44edd0e5c4097e?s=128&d=identicon&r=PG&f=1", "display_name": "EJ-The-DJ", "link": "https://stackoverflow.com/users/11042536/ej-the-dj"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 312, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1549840828, "creation_date": 1549836147, "last_edit_date": 1549840828, "question_id": 54621539, "link": "https://stackoverflow.com/questions/54621539/assigning-a-value-to-a-variable-containing-a-colon-in-perl", "title": "Assigning a value to a variable containing a colon in Perl", "body": "<p>I wrote this nifty Perl script to generate a .cue file for a radio station's automation system.  It worked the first day I wrote it and a week later it does not work.  </p>\n\n<p>Here is the pseudo-code of how it works:</p>\n\n<ol>\n<li><p>Call script and assign the following variables as a parameter at start up:\n--name of CSV file to be imported into array\n--name of MP3 file</p></li>\n<li><p>I declare the names of variables that the comma separated values will be assigned to</p></li>\n<li><p>Open file</p></li>\n<li><p>In a while loop, I iterate through each line of the CSV and assign each comma separated value to a variable.  Before I move to the next iteration, I print on the screen the output for the .cue file</p></li>\n<li><p>Iterate through the while loop until all the lines of the CSV have been processed</p></li>\n</ol>\n\n<p>Here is the problem,  in my CSV, I the last field has a value containing a colon and Perl thinks its an operator.  Here is a sample line:</p>\n\n<p>No One Like You,Scorpions,Blackout,13:38:00</p>\n\n<p>When I run the script I get the following error:\nsyntax error at part1.csv line 4, near \"13:\"</p>\n\n<p>Here is my question: How do I assign to a variable a string that contains a : operator? It appears that when Perl is seeing the string with the colon in it, it thinks that it needs to do something with : instead of just passing it into the variable.</p>\n\n<p>I am running active state perl on Windows 10.  Here is my</p>\n\n<pre><code>#!perl\nuse strict;\nuse warnings;\n\n\nmy $file = $ARGV[0] or die \"Need to get CSV file on the command line\\n\";\nmy $mp3Filename = $ARGV[1] or die \"Need the MP3 File Name\\n\";\nmy $title;\nmy $performer;\nmy $remAlbum;\nmy $myTrackIndex;\nmy $line;\nmy $data;\nmy @fields;\nmy $track = 1;\n#FILE \"show1.mp3\" WAVE\nprint \"FILE \\\"$ARGV[1]\\\" WAVE\\n\";\nopen($data, '&lt;', $file) or die \"Could not open '$file' $!\\n\";\n\nwhile (my $line = &lt;$data&gt;) {\nchomp $line;\nmy @fields = split \",\" , $line;\n$title = $fields[0];\n$performer = $fields[1];\n$remAlbum = $fields[2];\n$myTrackIndex = $fields[3];\nprint \"TRACK 0$track AUDIO\\n\";\nprint \"TITLE \\\"$title\\\"\\n\";\nprint \"PERFORMER \\\"$performer\\\"\\n\";\nprint \"REM ALBUM \\\"$remAlbum\\\"\\n\";\nprint \"INDEX 01 $myTrackIndex\\n\";\n$track++;\n#TRACK 01 AUDIO\n#TITLE \"Heavy Metal Halloween - Toccata And Fugue\"\n#PERFORMER \"Heavy Metal Halloween\"\n#REM ALBUM \"Heavy Metal Halloween\"\n#INDEX 01 00:02:00\n\n\n\n}\n</code></pre>\n\n<p>Here are the errors I am getting:</p>\n\n<pre><code>Semicolon seems to be missing at part1.csv line 1.\n at part1.csv line 1.\nSemicolon seems to be missing at part1.csv line 2.\n at part1.csv line 2.\nSemicolon seems to be missing at part1.csv line 3.\n at part1.csv line 3.\nSemicolon seems to be missing at part1.csv line 4.\n at part1.csv line 4.\nSemicolon seems to be missing at part1.csv line 5.\n at part1.csv line 5.\nsyntax error at part1.csv line 1, near \"00:\"\nsyntax error at part1.csv line 2, near \"05:\"\nIllegal octal digit '9' at part1.csv line 3, at end of line\nsyntax error at part1.csv line 3, near \"09:\"\nsyntax error at part1.csv line 4, near \"13:\"\nsyntax error at part1.csv line 5, near \"17:\"\nsyntax error at part1.csv line 6, near \"24:\"\nExecution of part1.csv aborted due to compilation errors.\n at part1.csv line 6.\n</code></pre>\n\n<p>Thanks for your patience.  Its been quite a few years since I have written any code.</p>\n"}, {"tags": ["perl", "aws-lambda", "sh"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1549781506, "post_id": 54613945, "comment_id": 96021676, "body": "<code>cpan URI::Escape</code> to install"}, {"owner": {"reputation": 93172, "user_id": 1734130, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AZ5Sn.png?s=128&g=1", "display_name": "mvp", "link": "https://stackoverflow.com/users/1734130/mvp"}, "edited": false, "score": 1, "creation_date": 1549794319, "post_id": 54613945, "comment_id": 96024047, "body": "Python script calling Perl to parse URL? This sounds completely wrong. Python is perfectly capable of parsing URLs using native python libraries. Don&#39;t get me wrong; I love Perl too."}], "answers": [{"comments": [{"owner": {"reputation": 138098, "user_id": 1695906, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/638d2ec6b52f3db1583890be23d74cc6?s=128&d=identicon&r=PG", "display_name": "Michael - sqlbot", "link": "https://stackoverflow.com/users/1695906/michael-sqlbot"}, "edited": false, "score": 1, "creation_date": 1549827253, "post_id": 54614219, "comment_id": 96033238, "body": "In Lambda, the root of the deployment package zip file becomes <code>&#47;var&#47;task</code>, so copying the module into the zip (i.e. <code>Escape.pm</code> in a directory called <code>URI</code> in the root of the zip) would allow you to use <code>perl -I&#47;var&#47;task -MURI::Escape ...</code> which would be <i>the start</i> of what&#39;s needed (next: dependencies...).  I used this stragegy with solid success when I wanted the ability to call <code>Storable::thaw()</code> from Node.js in Lambda (<code>Storable</code> was already there, of course, but other things I needed for usable thawing, like <code>DateTime</code>, were not).  In this case, though... the effort seems unjustifiable."}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1549907770, "post_id": 54614219, "comment_id": 96064853, "body": "Also note that modules generally can&#39;t just be copied around, they need to be installed as well as their dependencies, and only pureperl modules (which URI::Escape is) can be used in a different Perl from the one that installed it generally."}], "tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 3, "last_activity_date": 1581513426, "last_edit_date": 1581513426, "creation_date": 1549782808, "answer_id": 54614219, "question_id": 54613945, "link": "https://stackoverflow.com/questions/54613945/cant-locate-uri-escape-pm-in-inc-on-aws-lambda/54614219#54614219", "title": "Can&#39;t locate URI/Escape.pm in @INC on AWS lambda", "body": "<blockquote>\n  <p>however on AWS lamba looks like the perl MURI is not installed</p>\n</blockquote>\n\n<p>You're almost right. the <code>-M</code> is a command-line option telling Perl to load a module. The complete module name is \"URI::Escape\".</p>\n\n<p>And, yes, that module isn't part of a standard Perl installation, so you'll need to install it separately as part of whatever process you use to set up the environment that your lambda runs in. The simplest approach is probably to run:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>cpan URI::Escape\n</code></pre>\n\n<p>But I'm not sure how that would translate to the lambda environment.</p>\n"}], "owner": {"reputation": 55, "user_id": 6539722, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5b34a111b2487d496f96558334ac32a?s=128&d=identicon&r=PG&f=1", "display_name": "Rini", "link": "https://stackoverflow.com/users/6539722/rini"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2515, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1581513426, "creation_date": 1549780228, "last_edit_date": 1549783597, "question_id": 54613945, "link": "https://stackoverflow.com/questions/54613945/cant-locate-uri-escape-pm-in-inc-on-aws-lambda", "title": "Can&#39;t locate URI/Escape.pm in @INC on AWS lambda", "body": "<p>I have an AWS Lamba function in python that generates a url using a shell script.\nThe input parameters to the shell script is provided by the python code.\nThe shell script uses perl to URL encode the required URL.\nThis script runs fine when I run in locally;however on AWS lamba looks like the perl <code>MURI</code> is not installed. Would appreciate if there is alternative way to do this or any other suggestions to go about it.I am doing URL encode by the following commands. The error I see in lambda logs is:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>Can't locate URI/Escape.pm in @INC (@INC contains: /usr/local/lib64/perl5 /usr/local/share/perl5 /usr/lib64/perl5/vendor_perl /usr/share/perl5/vendor_perl /usr/lib64/perl5 /usr/share/perl5 .).\nBEGIN failed--compilation aborted.\n</code></pre>\n\n<p>Code in the script is</p>\n\n<pre class=\"lang-sh prettyprint-override\"><code>cred=$(perl -MURI::Escape -e 'print uri_escape($ARGV[0]);' \"$PARM1/$DATE/$PUBLIC_REGION/$SERVICE_NAME/request\")\nFULLDT=$(perl -MURI::Escape -e 'print uri_escape($ARGV[0]);' \"$FULLDT\")\nSESSION_TOKEN=$(perl -MURI::Escape -e 'print uri_escape($ARGV[0]);' \"$SESSION_TOKEN\")\n</code></pre>\n"}, {"tags": ["regex", "perl", "awk", "sed"], "comments": [{"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 1, "creation_date": 1549751859, "post_id": 54611456, "comment_id": 96017255, "body": "Do the commands have to be as unreadable as possible?"}], "answers": [{"comments": [{"owner": {"reputation": 481636, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 1, "creation_date": 1549752386, "post_id": 54611540, "comment_id": 96017389, "body": "See <a href=\"https://ideone.com/Oz6ckt\" rel=\"nofollow noreferrer\">ideone.com/Oz6ckt</a>. It should be <code>&#39;s{&lt;phrase&gt;.*?&lt;&#47;phrase&gt;}{ $&amp; =~ tr&#47; &#47;_&#47;r }eg&#39;</code>. However, strings might have line breaks between tags, in the general case."}, {"owner": {"reputation": 1993, "user_id": 3614578, "user_type": "registered", "accept_rate": 55, "profile_image": "https://graph.facebook.com/100007057867557/picture?type=large", "display_name": "gary69", "link": "https://stackoverflow.com/users/3614578/gary69"}, "edited": false, "score": 0, "creation_date": 1549752977, "post_id": 54611540, "comment_id": 96017521, "body": "Thank you so much.  For the input I&#39;ll be handling there won&#39;t be line breaks between tags."}, {"owner": {"reputation": 7646, "user_id": 6867048, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b939fdb5809fed8097c38bdf4370747b?s=128&d=identicon&r=PG&f=1", "display_name": "stack0114106", "link": "https://stackoverflow.com/users/6867048/stack0114106"}, "edited": false, "score": 0, "creation_date": 1549755596, "post_id": 54611540, "comment_id": 96018084, "body": "@melpomene.. I tried something like <code>perl -lne &#39; s&#47;(?=&gt;)([^&lt;&gt;]+?)(?=&lt;\\&#47;)&#47;</code> but it is not working... could you please help me?."}], "tags": [], "owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "is_accepted": true, "score": 2, "last_activity_date": 1549752621, "last_edit_date": 1549752621, "creation_date": 1549752128, "answer_id": 54611540, "question_id": 54611456, "link": "https://stackoverflow.com/questions/54611456/sed-replace-whitespace-with-underscore-between-2-strings/54611540#54611540", "title": "sed replace whitespace with underscore between 2 strings", "body": "<blockquote>\n  <p>I need to replace every space that falls between <code>&gt;</code> and <code>&lt;/</code> with an underscore.</p>\n</blockquote>\n\n<p>That won't actually do what you want because e.g. in</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>some thing &lt;phrase&gt;a phrase&lt;/phrase&gt; some thing else &lt;phrase&gt;other stuff&lt;/phrase&gt;\n                  ^^^^^^^^^^^      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n</code></pre>\n\n<p>the substrings \"between <code>&gt;</code> and <code>&lt;/</code>\" cover more than you think (marked <code>^</code> above).</p>\n\n<p>I think the most straightforward way to express your requirements in Perl is</p>\n\n<pre><code>perl -pe 's{&gt;[^&lt;&gt;]*&lt;/}{ $&amp; =~ tr/ /_/r }eg'\n</code></pre>\n\n<p>Here <code>[^&lt;&gt;]</code> is used to make sure that the matched substring cannot contain <code>&lt;</code> or <code>&gt;</code> (in particular, it cannot match other <code>&lt;phrase&gt;</code> tags).</p>\n\n<p>If that's too readable, you can also do</p>\n\n<pre><code>perl '-pes;&gt;[^&lt;&gt;]*&lt;/;$&amp;=~y&gt; &gt;_&gt;r;eg'\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1993, "user_id": 3614578, "user_type": "registered", "accept_rate": 55, "profile_image": "https://graph.facebook.com/100007057867557/picture?type=large", "display_name": "gary69", "link": "https://stackoverflow.com/users/3614578/gary69"}, "edited": false, "score": 0, "creation_date": 1549753265, "post_id": 54611654, "comment_id": 96017586, "body": "Thank you, I thought since it had a lot of free text mixed in with tags that a parser wouldn&#39;t work"}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1549753267, "post_id": 54611654, "comment_id": 96017589, "body": "I was assuming the input file wasn&#39;t HTML because OP described it as being line based."}, {"owner": {"reputation": 1993, "user_id": 3614578, "user_type": "registered", "accept_rate": 55, "profile_image": "https://graph.facebook.com/100007057867557/picture?type=large", "display_name": "gary69", "link": "https://stackoverflow.com/users/3614578/gary69"}, "edited": false, "score": 1, "creation_date": 1549753310, "post_id": 54611654, "comment_id": 96017595, "body": "it is line based, its not an xml/html file"}, {"owner": {"reputation": 2833, "user_id": 9300627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7a38cf029222bcf1d902e6b2759ffeb?s=128&d=identicon&r=PG", "display_name": "haukex", "link": "https://stackoverflow.com/users/9300627/haukex"}, "edited": false, "score": 0, "creation_date": 1549753480, "post_id": 54611654, "comment_id": 96017632, "body": "<code>Mojo::DOM</code> is luckily pretty liberal in what it accepts, as the example shows"}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "reply_to_user": {"reputation": 1993, "user_id": 3614578, "user_type": "registered", "accept_rate": 55, "profile_image": "https://graph.facebook.com/100007057867557/picture?type=large", "display_name": "gary69", "link": "https://stackoverflow.com/users/3614578/gary69"}, "edited": false, "score": 2, "creation_date": 1549777786, "post_id": 54611654, "comment_id": 96021221, "body": "@gary69 &quot;free text&quot; is just a text node in XML. It can contain anything, except for XML tags which are separate nodes. Like most HTML/XML parsers, Mojo::DOM allows you to get at the text nodes as well."}], "tags": [], "owner": {"reputation": 2833, "user_id": 9300627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7a38cf029222bcf1d902e6b2759ffeb?s=128&d=identicon&r=PG", "display_name": "haukex", "link": "https://stackoverflow.com/users/9300627/haukex"}, "is_accepted": false, "score": 5, "last_activity_date": 1549753446, "last_edit_date": 1549753446, "creation_date": 1549753108, "answer_id": 54611654, "question_id": 54611456, "link": "https://stackoverflow.com/questions/54611456/sed-replace-whitespace-with-underscore-between-2-strings/54611654#54611654", "title": "sed replace whitespace with underscore between 2 strings", "body": "<p>Don't use regular expressions to parse XML/HTML.</p>\n\n<pre><code>use warnings;\nuse 5.014;  # for /r modifier\nuse Mojo::DOM;\n\nmy $text = &lt;&lt;'ENDTEXT';\nsome thing &lt;phrase&gt;a phrase&lt;/phrase&gt; some thing else &lt;phrase&gt;other stuff&lt;/phrase&gt;\nENDTEXT\n\nmy $dom = Mojo::DOM-&gt;new($text);\n$dom-&gt;find('phrase')-&gt;each(sub { $_-&gt;content( $_-&gt;content=~tr/ /_/r ) });\nprint $dom;\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>some thing &lt;phrase&gt;a_phrase&lt;/phrase&gt; some thing else &lt;phrase&gt;other_stuff&lt;/phrase&gt;\n</code></pre>\n\n<hr>\n\n<p><em>Update:</em> <a href=\"https://metacpan.org/release/Mojolicious\" rel=\"nofollow noreferrer\">Mojolicious</a> even contains some sugar that allows smashing that code into a oneliner:</p>\n\n<pre><code>$ perl -Mojo -pe '($_=x($_))-&gt;find(\"phrase\")-&gt;each(sub{$_-&gt;content($_-&gt;content=~tr/ /_/r)})' input.txt\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 2833, "user_id": 9300627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7a38cf029222bcf1d902e6b2759ffeb?s=128&d=identicon&r=PG", "display_name": "haukex", "link": "https://stackoverflow.com/users/9300627/haukex"}, "edited": false, "score": 0, "creation_date": 1549755579, "post_id": 54611858, "comment_id": 96018081, "body": "IMHO <code>s&#47;&lt;phrase&gt;\\K(.+?)(?=&lt;\\&#47;phrase&gt;)&#47;</code> would be better, so the <code>&lt;phrase&gt;</code> isn&#39;t part of the match. Also, what is <code>sprintf(&quot;%s&quot;,$x)</code> for?"}, {"owner": {"reputation": 7646, "user_id": 6867048, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b939fdb5809fed8097c38bdf4370747b?s=128&d=identicon&r=PG&f=1", "display_name": "stack0114106", "link": "https://stackoverflow.com/users/6867048/stack0114106"}, "reply_to_user": {"reputation": 2833, "user_id": 9300627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7a38cf029222bcf1d902e6b2759ffeb?s=128&d=identicon&r=PG", "display_name": "haukex", "link": "https://stackoverflow.com/users/9300627/haukex"}, "edited": false, "score": 0, "creation_date": 1549755857, "post_id": 54611858, "comment_id": 96018148, "body": "@haukex, yes \\K is fine, but <code>(?=&lt;phrase&gt;)</code> is more readable here.. using sprintf(), you can replace back the matched string (actually $1=$&amp; here)"}, {"owner": {"reputation": 7646, "user_id": 6867048, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b939fdb5809fed8097c38bdf4370747b?s=128&d=identicon&r=PG&f=1", "display_name": "stack0114106", "link": "https://stackoverflow.com/users/6867048/stack0114106"}, "reply_to_user": {"reputation": 2833, "user_id": 9300627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7a38cf029222bcf1d902e6b2759ffeb?s=128&d=identicon&r=PG", "display_name": "haukex", "link": "https://stackoverflow.com/users/9300627/haukex"}, "edited": false, "score": 0, "creation_date": 1549755986, "post_id": 54611858, "comment_id": 96018175, "body": "@haukex.. btw melphomene has done it cleverly using <code>$&amp; =~ tr&#47; &#47;_&#47;r</code> and I like that"}, {"owner": {"reputation": 2833, "user_id": 9300627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7a38cf029222bcf1d902e6b2759ffeb?s=128&d=identicon&r=PG", "display_name": "haukex", "link": "https://stackoverflow.com/users/9300627/haukex"}, "edited": false, "score": 0, "creation_date": 1549756440, "post_id": 54611858, "comment_id": 96018278, "body": "&quot;More readable&quot; is of course a matter of opinion, my point was that it acts differently than <code>\\K</code> - the equivalent would be <code>(?&lt;=&lt;phrase&gt;)</code>. <code>sprintf(&quot;%s&quot;,$x)</code> can be replaced by just <code>$x</code>."}, {"owner": {"reputation": 7646, "user_id": 6867048, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b939fdb5809fed8097c38bdf4370747b?s=128&d=identicon&r=PG&f=1", "display_name": "stack0114106", "link": "https://stackoverflow.com/users/6867048/stack0114106"}, "reply_to_user": {"reputation": 2833, "user_id": 9300627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7a38cf029222bcf1d902e6b2759ffeb?s=128&d=identicon&r=PG", "display_name": "haukex", "link": "https://stackoverflow.com/users/9300627/haukex"}, "edited": false, "score": 0, "creation_date": 1549756947, "post_id": 54611858, "comment_id": 96018363, "body": "@haukex.. yes you are right. I updated the answer.. and reg sprintf()... I wonder  why I missed.. as I have been lots of %05d replacements in my projects and totally forgot that simple variable would do.. im really stuck!.. thanks for hammering it.."}, {"owner": {"reputation": 7646, "user_id": 6867048, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b939fdb5809fed8097c38bdf4370747b?s=128&d=identicon&r=PG&f=1", "display_name": "stack0114106", "link": "https://stackoverflow.com/users/6867048/stack0114106"}, "reply_to_user": {"reputation": 2833, "user_id": 9300627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7a38cf029222bcf1d902e6b2759ffeb?s=128&d=identicon&r=PG", "display_name": "haukex", "link": "https://stackoverflow.com/users/9300627/haukex"}, "edited": false, "score": 0, "creation_date": 1549757497, "post_id": 54611858, "comment_id": 96018445, "body": "@haukex.. I think you can help me.. do you know why <code>&#47;(?=&gt;)(.*?)(?=&lt;\\&#47;)&#47;</code> works but not <code>(?=&gt;)([^&lt;&gt;]+)(?=&lt;\\&#47;)</code>"}, {"owner": {"reputation": 2833, "user_id": 9300627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7a38cf029222bcf1d902e6b2759ffeb?s=128&d=identicon&r=PG", "display_name": "haukex", "link": "https://stackoverflow.com/users/9300627/haukex"}, "edited": false, "score": 0, "creation_date": 1549790319, "post_id": 54611858, "comment_id": 96023267, "body": "The problem with the second one is again the lookahead instead of a lookbehind. Remember that lookarounds are zero-width, they don&#39;t cause the position of the matcher to change. <code>(?=&gt;)</code> means &quot;only match here if the next thing is a <code>&gt;</code>&quot;, i.e. it overlaps with the next part of the match, but then the next thing is <code>[^&lt;&gt;]</code>, so the match is always impossible. (This overlap issue is what I meant in my first comment regarding <code>(?=&lt;phrase&gt;)</code>.) <code>(?&lt;=&gt;)</code> means &quot;only match here if the <i>previous</i> thing is <code>&gt;</code>&quot;, so that lookbehind doesn&#39;t overlap with <code>[^&lt;&gt;]+</code> and it works."}, {"owner": {"reputation": 7646, "user_id": 6867048, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b939fdb5809fed8097c38bdf4370747b?s=128&d=identicon&r=PG&f=1", "display_name": "stack0114106", "link": "https://stackoverflow.com/users/6867048/stack0114106"}, "reply_to_user": {"reputation": 2833, "user_id": 9300627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7a38cf029222bcf1d902e6b2759ffeb?s=128&d=identicon&r=PG", "display_name": "haukex", "link": "https://stackoverflow.com/users/9300627/haukex"}, "edited": false, "score": 0, "creation_date": 1549801133, "post_id": 54611858, "comment_id": 96025558, "body": "@haukex.. thank you for the explanation..now I understand"}], "tags": [], "owner": {"reputation": 7646, "user_id": 6867048, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b939fdb5809fed8097c38bdf4370747b?s=128&d=identicon&r=PG&f=1", "display_name": "stack0114106", "link": "https://stackoverflow.com/users/6867048/stack0114106"}, "is_accepted": false, "score": 1, "last_activity_date": 1549989590, "last_edit_date": 1549989590, "creation_date": 1549754897, "answer_id": 54611858, "question_id": 54611456, "link": "https://stackoverflow.com/questions/54611456/sed-replace-whitespace-with-underscore-between-2-strings/54611858#54611858", "title": "sed replace whitespace with underscore between 2 strings", "body": "<p>Another Perl, replacing between the <code>&lt;phrase&gt;</code> tags</p>\n\n<pre><code>$ export a=\"some thing &lt;phrase&gt;a phrase&lt;/phrase&gt; some thing else &lt;phrase&gt;other stuff&lt;/phrase&gt;\"\n\n$ echo $a | perl -lne ' s/(?&lt;=&lt;phrase&gt;)(.+?)(?=&lt;\\/phrase&gt;)/$x=$1;$x=~s{ }{_}g;sprintf(\"%s\",$x)/ge ;  print '\nsome thing &lt;phrase&gt;a_phrase&lt;/phrase&gt; some thing else &lt;phrase&gt;other_stuff&lt;/phrase&gt;\n\n$\n</code></pre>\n\n<p><strong>EDIT</strong></p>\n\n<p>Thanks @haukex, shortening further</p>\n\n<pre><code>$ echo $a | perl -lne ' s/(?&lt;=&lt;phrase&gt;)(.+?)(?=&lt;\\/phrase&gt;)/$x=$1;$x=~s{ }{_}g;$x/ge ;  print '\nsome thing &lt;phrase&gt;a_phrase&lt;/phrase&gt; some thing else &lt;phrase&gt;other_stuff&lt;/phrase&gt;\n\n$\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 46858, "user_id": 967492, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/526ea226101e199d029049dda22a4e58?s=128&d=identicon&r=PG", "display_name": "potong", "link": "https://stackoverflow.com/users/967492/potong"}, "is_accepted": false, "score": 2, "last_activity_date": 1549760208, "creation_date": 1549760208, "answer_id": 54612365, "question_id": 54611456, "link": "https://stackoverflow.com/questions/54611456/sed-replace-whitespace-with-underscore-between-2-strings/54612365#54612365", "title": "sed replace whitespace with underscore between 2 strings", "body": "<p>This might work for you (GNU sed):</p>\n\n<pre><code>sed -E 's/&lt;phrase&gt;|&lt;\\/phrase&gt;/\\n&amp;/g;ta;:a;s/^([^\\n]*(\\n[^\\n ]*\\n[^\\n]*)*\\n[^\\n]*) /\\1_/;ta;s/\\n//g' file\n</code></pre>\n\n<p>Delimit tags by inserting newlines. Iteratively substitute spaces between pairs of newlines with underscores. When there are no more matches, remove the introduced newlines.  </p>\n"}, {"tags": [], "owner": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "is_accepted": false, "score": 1, "last_activity_date": 1549774316, "creation_date": 1549774316, "answer_id": 54613457, "question_id": 54611456, "link": "https://stackoverflow.com/questions/54611456/sed-replace-whitespace-with-underscore-between-2-strings/54613457#54613457", "title": "sed replace whitespace with underscore between 2 strings", "body": "<p>With GNU awk for multi-char RS and RT:</p>\n\n<pre><code>$ awk -v RS='&lt;/?phrase&gt;' '!(NR%2){gsub(/\\s+/,\"_\")} {ORS=RT}1' file\nsome thing &lt;phrase&gt;a_phrase&lt;/phrase&gt; some thing else &lt;phrase&gt;other_stuff&lt;/phrase&gt;\n</code></pre>\n"}, {"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user7712945"}, "is_accepted": false, "score": 1, "last_activity_date": 1554805097, "creation_date": 1554805097, "answer_id": 55590461, "question_id": 54611456, "link": "https://stackoverflow.com/questions/54611456/sed-replace-whitespace-with-underscore-between-2-strings/55590461#55590461", "title": "sed replace whitespace with underscore between 2 strings", "body": "<p>if your data in 'd' by gnu sed;</p>\n\n<pre><code>sed -E ':b s/&lt;(\\w+)&gt;([^&lt;]*)\\s([^&lt;]*)(&lt;\\/\\1)/&lt;\\1&gt;\\2_\\3\\4/;tb' d\n</code></pre>\n"}], "owner": {"reputation": 1993, "user_id": 3614578, "user_type": "registered", "accept_rate": 55, "profile_image": "https://graph.facebook.com/100007057867557/picture?type=large", "display_name": "gary69", "link": "https://stackoverflow.com/users/3614578/gary69"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 559, "favorite_count": 0, "accepted_answer_id": 54611540, "answer_count": 6, "score": 3, "last_activity_date": 1554805097, "creation_date": 1549751450, "question_id": 54611456, "link": "https://stackoverflow.com/questions/54611456/sed-replace-whitespace-with-underscore-between-2-strings", "title": "sed replace whitespace with underscore between 2 strings", "body": "<p>I have a file that contains lines like this </p>\n\n<p><code>some thing &lt;phrase&gt;a phrase&lt;/phrase&gt; some thing else &lt;phrase&gt;other stuff&lt;/phrase&gt;</code></p>\n\n<p>I need to replace all the spaces between <code>&lt;phrase&gt;</code> tags with an underscore.  So basically I need to replace every space that falls between <code>&gt;</code> and <code>&lt;/</code> with an underscore.  I've tried many different commands in sed, awk, and perl but haven't been able to get anything to work.  Below are some of the commands I've tried.</p>\n\n<p><code>sed 's@&gt;\\s+[&lt;/]@_@g'</code></p>\n\n<p><code>perl -pe 'sub c{$s=shift;$s=~s/ /_/g;$s}s/&gt;.*?[&lt;\\/]/c$&amp;/ge'</code></p>\n\n<p><code>sed 's@\\(\\[&gt;^[&lt;\\/]]*\\)\\s+@\\1_@g'</code></p>\n\n<p><code>awk -v RS='\\\\[&gt;^[&lt;\\]/]*\\\\]' '{ gsub(/\\&lt;(\\s+)\\&gt;/, \"_\", RT); printf \"%s%s\", $0, RT }' infile</code></p>\n\n<p>I've been looking at these 2 questions trying to modify the answers to use the characters I need.<br>\n<a href=\"https://stackoverflow.com/questions/46946593/sed-substitute-whitespace-for-dash-only-between-specific-character-patterns\">sed substitute whitespace for dash only between specific character patterns</a></p>\n\n<p><a href=\"https://unix.stackexchange.com/questions/63335/how-to-remove-all-white-spaces-just-between-brackets-using-unix-tools\">https://unix.stackexchange.com/questions/63335/how-to-remove-all-white-spaces-just-between-brackets-using-unix-tools</a></p>\n\n<p>Can anyone please help?</p>\n"}, {"tags": ["perl", "rss"], "answers": [{"comments": [{"owner": {"reputation": 1215, "user_id": 1418533, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/832e7fd1713de344d00ba3cc9c6fae54?s=128&d=identicon&r=PG", "display_name": "Ken Ingram", "link": "https://stackoverflow.com/users/1418533/ken-ingram"}, "edited": false, "score": 0, "creation_date": 1549746630, "post_id": 54610724, "comment_id": 96016063, "body": "Thanks. That&#39;s perfect. I just needed a start. I was looking through the docs and was not seeing what I needed. Probably too stressed and kept overlooking the answer."}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 4, "creation_date": 1549747281, "post_id": 54610724, "comment_id": 96016236, "body": "The XML::LibXML docs are quite extensive and dense (they&#39;re basically the entire XML spec) so I wouldn&#39;t fault anyone for overlooking something like this."}, {"owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "edited": false, "score": 0, "creation_date": 1549748575, "post_id": 54610724, "comment_id": 96016529, "body": "Interesting that you have to use <code>-&gt;documentElement</code>, because <a href=\"https://metacpan.org/pod/distribution/XML-LibXML/lib/XML/LibXML/Document.pod\" rel=\"nofollow noreferrer\">XML::LibXML::Document</a> is a <a href=\"https://metacpan.org/pod/distribution/XML-LibXML/lib/XML/LibXML/Node.pod\" rel=\"nofollow noreferrer\">XML::LibXML::Node</a>, but its <code>getNamespaces</code> returns an empty list..."}, {"owner": {"reputation": 2833, "user_id": 9300627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7a38cf029222bcf1d902e6b2759ffeb?s=128&d=identicon&r=PG", "display_name": "haukex", "link": "https://stackoverflow.com/users/9300627/haukex"}, "reply_to_user": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "edited": false, "score": 1, "creation_date": 1549752382, "post_id": 54610724, "comment_id": 96017388, "body": "@StefanBecker Yes, in the <a href=\"https://www.w3.org/TR/dom/\" rel=\"nofollow noreferrer\">DOM</a>, a &quot;document&quot; and &quot;document element&quot; are different things."}], "tags": [], "owner": {"reputation": 2833, "user_id": 9300627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7a38cf029222bcf1d902e6b2759ffeb?s=128&d=identicon&r=PG", "display_name": "haukex", "link": "https://stackoverflow.com/users/9300627/haukex"}, "is_accepted": true, "score": 5, "last_activity_date": 1549746265, "creation_date": 1549746265, "answer_id": 54610724, "question_id": 54610536, "link": "https://stackoverflow.com/questions/54610536/how-to-parse-rss-tag-with-xmllibxml-to-find-xmlns-defintions/54610724#54610724", "title": "How to parse &lt;rss&gt; tag with XML::LibXML to find xmlns defintions", "body": "<p>I'm not sure I understand exactly what kind of output you're looking for, but <a href=\"https://metacpan.org/release/XML-LibXML\" rel=\"noreferrer\"><code>XML::LibXML</code></a> is indeed able to list the namespaces:</p>\n\n<pre><code>use warnings;\nuse strict;\nuse XML::LibXML;\n\nmy $dom = XML::LibXML-&gt;load_xml(string =&gt; &lt;&lt;'EOT');\n&lt;rss \n    xmlns:content=\"http://purl.org/rss/1.0/modules/content/\" \n    xmlns:wfw=\"http://wellformedweb.org/CommentAPI/\" \n    xmlns:dc=\"http://purl.org/dc/elements/1.1/\" \n    xmlns:atom=\"http://www.w3.org/2005/Atom\" \n    xmlns:sy=\"http://purl.org/rss/1.0/modules/syndication/\" \n    xmlns:slash=\"http://purl.org/rss/1.0/modules/slash/\" version=\"2.0\"&gt;\n&lt;/rss&gt;\nEOT\nfor my $ns ($dom-&gt;documentElement-&gt;getNamespaces) {\n    print $ns-&gt;getLocalName(), \" / \", $ns-&gt;getData(), \"\\n\";\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>content / http://purl.org/rss/1.0/modules/content/\nwfw / http://wellformedweb.org/CommentAPI/\ndc / http://purl.org/dc/elements/1.1/\natom / http://www.w3.org/2005/Atom\nsy / http://purl.org/rss/1.0/modules/syndication/\nslash / http://purl.org/rss/1.0/modules/slash/\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1215, "user_id": 1418533, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/832e7fd1713de344d00ba3cc9c6fae54?s=128&d=identicon&r=PG", "display_name": "Ken Ingram", "link": "https://stackoverflow.com/users/1418533/ken-ingram"}, "edited": false, "score": 0, "creation_date": 1549854884, "post_id": 54618169, "comment_id": 96039459, "body": "In fact after looking through your example. Resilient stands out as something important. And it is a big part of my approach to writing good code."}, {"owner": {"reputation": 1215, "user_id": 1418533, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/832e7fd1713de344d00ba3cc9c6fae54?s=128&d=identicon&r=PG", "display_name": "Ken Ingram", "link": "https://stackoverflow.com/users/1418533/ken-ingram"}, "edited": false, "score": 0, "creation_date": 1549854997, "post_id": 54618169, "comment_id": 96039476, "body": "I could probably build a module to account for known namespace DTD&#39;s and follow your resilience pattern. I&#39;ll keep it in mind for a more robust version of what I&#39;m doing."}], "tags": [], "owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "is_accepted": false, "score": 2, "last_activity_date": 1549813996, "creation_date": 1549813996, "answer_id": 54618169, "question_id": 54610536, "link": "https://stackoverflow.com/questions/54610536/how-to-parse-rss-tag-with-xmllibxml-to-find-xmlns-defintions/54618169#54618169", "title": "How to parse &lt;rss&gt; tag with XML::LibXML to find xmlns defintions", "body": "<p>I know that OP has already accepted an answer. But for completeness sake it should be mentioned that the recommended way to make searches on the DOM resilient is to use <a href=\"https://metacpan.org/pod/XML::LibXML::XPathContext\" rel=\"nofollow noreferrer\">XML::LibXML::XPathContext</a>:</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\n\nuse XML::LibXML;\n\nmy @examples = (\n    &lt;&lt;EOT\n&lt;rss xmlns:atom=\"http://www.w3.org/2005/Atom\"&gt;\n  &lt;atom:test&gt;One Ring to rule them all,&lt;/atom:test&gt;\n&lt;/rss&gt;\nEOT\n    ,\n    &lt;&lt;EOT\n&lt;rss xmlns:a=\"http://www.w3.org/2005/Atom\"&gt;\n  &lt;a:test&gt;One Ring to find them,&lt;/a:test&gt;\n&lt;/rss&gt;\nEOT\n    ,\n    &lt;&lt;EOT\n&lt;rss xmlns=\"http://www.w3.org/2005/Atom\"&gt;\n  &lt;test&gt;The end...&lt;/test&gt;\n&lt;/rss&gt;\nEOT\n    ,\n);\n\nmy $xpc = XML::LibXML::XPathContext-&gt;new();\n$xpc-&gt;registerNs('atom', 'http://www.w3.org/2005/Atom');\n\nfor my $example (@examples) {\n    my $dom = XML::LibXML-&gt;load_xml(string =&gt; $example)\n        or die \"XML: $!\\n\";\n\n    for my $node ($xpc-&gt;findnodes(\"//atom:test\", $dom)) {\n        printf(\"%-10s: %s\\n\", $node-&gt;nodeName, $node-&gt;textContent);\n    }\n}\n\nexit 0;\n</code></pre>\n\n<p>i.e. you assign a local namespace prefix for those namespaces you are interested in.</p>\n\n<p>Output:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>$ perl dummy.pl\natom:test : One Ring to rule them all,\na:test    : One Ring to find them,\ntest      : The end...\n</code></pre>\n"}], "owner": {"reputation": 1215, "user_id": 1418533, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/832e7fd1713de344d00ba3cc9c6fae54?s=128&d=identicon&r=PG", "display_name": "Ken Ingram", "link": "https://stackoverflow.com/users/1418533/ken-ingram"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1311, "favorite_count": 2, "accepted_answer_id": 54610724, "answer_count": 2, "score": 4, "last_activity_date": 1549989617, "creation_date": 1549744786, "last_edit_date": 1549989617, "question_id": 54610536, "link": "https://stackoverflow.com/questions/54610536/how-to-parse-rss-tag-with-xmllibxml-to-find-xmlns-defintions", "title": "How to parse &lt;rss&gt; tag with XML::LibXML to find xmlns defintions", "body": "<p>It seems that there is no consistent way that podcasts define their rss feeds.\nRan into one that is using different schema defs for the RSS.</p>\n\n<p>What's the best way to scan for xmlnamespace in an RSS url, using XML::LibXML</p>\n\n<p>E.g.</p>\n\n<p>One feed might be</p>\n\n<pre><code>&lt;rss \n    xmlns:content=\"http://purl.org/rss/1.0/modules/content/\" \n    xmlns:wfw=\"http://wellformedweb.org/CommentAPI/\" \n    xmlns:dc=\"http://purl.org/dc/elements/1.1/\" \n    xmlns:atom=\"http://www.w3.org/2005/Atom\" \n    xmlns:sy=\"http://purl.org/rss/1.0/modules/syndication/\" \n    xmlns:slash=\"http://purl.org/rss/1.0/modules/slash/\" version=\"2.0\"&gt;\n</code></pre>\n\n<p>Another might be</p>\n\n<pre><code>&lt;rss xmlns:itunes=\"http://www.itunes.com/dtds/podcast-1.0.dtd\"version=\"2.0\"\n     xmlns:atom=\"http://www.w3.org/2005/Atom\"&gt;\n</code></pre>\n\n<p>I want to include in my script an assessment of all the namespaces being used so that when parsing the rss, the appropriate field names can be tracked.</p>\n\n<p>Not sure what that will look like yet, as I'm not sure this module has the capability to do the <code>&lt;rss&gt;</code> tag attribute atomization that I want.</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "edited": false, "score": 0, "creation_date": 1549729288, "post_id": 54607772, "comment_id": 96011302, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/2608574/passing-arguments-to-commandline-with-directories-having-spaces\">Passing arguments to commandline with directories having spaces</a>"}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 2, "creation_date": 1549730276, "post_id": 54607772, "comment_id": 96011554, "body": "Why are you not just using the <code>rename</code> function built into Perl?"}, {"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 1, "creation_date": 1549730438, "post_id": 54607772, "comment_id": 96011600, "body": "Using <code>move</code> from the core <a href=\"http://perldoc.perl.org/File/Copy.html\" rel=\"nofollow noreferrer\">File::Copy</a> module is another option."}, {"owner": {"reputation": 21, "user_id": 11038137, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2be84d3749693a5296a36d53795a10b1?s=128&d=identicon&r=PG&f=1", "display_name": "fr6", "link": "https://stackoverflow.com/users/11038137/fr6"}, "edited": false, "score": 0, "creation_date": 1549731891, "post_id": 54607772, "comment_id": 96011951, "body": "Yes, &quot;That&#39;s solved my problem&quot; ! The chomp was essential - didn&#39;t noticed the requirement at first. Thanks so much for the relief. Have to think a lot around this."}], "answers": [{"comments": [{"owner": {"reputation": 21, "user_id": 11038137, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2be84d3749693a5296a36d53795a10b1?s=128&d=identicon&r=PG&f=1", "display_name": "fr6", "link": "https://stackoverflow.com/users/11038137/fr6"}, "edited": false, "score": 0, "creation_date": 1549732382, "post_id": 54608047, "comment_id": 96012093, "body": "1) perlfunc recalls me the general subject of variable number of arguments (somewhere in other languages) - just remembering..."}, {"owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 0, "creation_date": 1549732482, "post_id": 54608047, "comment_id": 96012123, "body": "You buried the lede. A <code>chomp</code> call is sufficient to solve the OP&#39;s problem."}, {"owner": {"reputation": 21, "user_id": 11038137, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2be84d3749693a5296a36d53795a10b1?s=128&d=identicon&r=PG&f=1", "display_name": "fr6", "link": "https://stackoverflow.com/users/11038137/fr6"}, "edited": false, "score": 0, "creation_date": 1549734141, "post_id": 54608047, "comment_id": 96012574, "body": "2) The aim is to remove duplicates I find in my iTunes Podcast folders: after renaming, I would have to delete the original file... Well, move is a rename which is king of move : why a move ? Anyway ."}, {"owner": {"reputation": 21, "user_id": 11038137, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2be84d3749693a5296a36d53795a10b1?s=128&d=identicon&r=PG&f=1", "display_name": "fr6", "link": "https://stackoverflow.com/users/11038137/fr6"}, "edited": false, "score": 0, "creation_date": 1549734419, "post_id": 54608047, "comment_id": 96012649, "body": "@ mob noticed this to be very, very important - could be essential, as you said. Thx."}, {"owner": {"reputation": 21, "user_id": 11038137, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2be84d3749693a5296a36d53795a10b1?s=128&d=identicon&r=PG&f=1", "display_name": "fr6", "link": "https://stackoverflow.com/users/11038137/fr6"}, "edited": false, "score": 0, "creation_date": 1549734514, "post_id": 54608047, "comment_id": 96012684, "body": "@ Shawn Will investigate. Thx."}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 1, "creation_date": 1549742916, "post_id": 54608047, "comment_id": 96015127, "body": "Avoiding the shell is also very important in case one of your files happens to have a shell metacharacter other than a space."}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "reply_to_user": {"reputation": 21, "user_id": 11038137, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2be84d3749693a5296a36d53795a10b1?s=128&d=identicon&r=PG&f=1", "display_name": "fr6", "link": "https://stackoverflow.com/users/11038137/fr6"}, "edited": false, "score": 1, "creation_date": 1549742972, "post_id": 54608047, "comment_id": 96015141, "body": "@fr6 Your comment makes no sense. <a href=\"https://perldoc.pl/functions/rename\" rel=\"nofollow noreferrer\">rename</a> is the same as move, it does not leave the &quot;original file&quot;."}, {"owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "reply_to_user": {"reputation": 21, "user_id": 11038137, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2be84d3749693a5296a36d53795a10b1?s=128&d=identicon&r=PG&f=1", "display_name": "fr6", "link": "https://stackoverflow.com/users/11038137/fr6"}, "edited": false, "score": 0, "creation_date": 1549744691, "post_id": 54608047, "comment_id": 96015584, "body": "@fr6 I&#39;ve added example code to replace the <code>system()</code>."}], "tags": [], "owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "is_accepted": false, "score": 4, "last_activity_date": 1549752628, "last_edit_date": 1549752628, "creation_date": 1549728669, "answer_id": 54608047, "question_id": 54607772, "link": "https://stackoverflow.com/questions/54607772/how-to-use-perls-qx-mv-file-to-directory/54608047#54608047", "title": "How to use Perl&#39;s qx mv file to directory?", "body": "<p>The immediate problem is that you don't remove that trailing line feed from the lines you read from the file handle.</p>\n\n<p>That said, don't rely on shell parsing and instead use the safe way of passing parameters unmodified to the called program:</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>system(qw(mv -f -v --), $_, 'TRANS/');\n</code></pre>\n\n<p><strong>NOTE:</strong> you are passing the whole line to the command, which will include the line ending. You should <code>chomp</code> the line first.</p>\n\n<p>To quote <a href=\"http://perldoc.perl.org/perlfunc.html\" rel=\"nofollow noreferrer\">perlfunc</a>:</p>\n\n<blockquote>\n  <p><code>system LIST</code></p>\n  \n  <p>... If there is more than one argument in LIST,\n              or if LIST is an array with more than one value, starts the\n              program given by the first element of the list with arguments\n              given by the rest of the list.</p>\n</blockquote>\n\n<p>In C language terms the <code>main()</code> function of the program will be called with <code>argc == 4</code> and <code>argv[2]</code> will receive the contents of <code>$_</code> from your Perl script.</p>\n\n<hr>\n\n<p><strong>Alternative solution</strong></p>\n\n<p>For this simple problem you don't really need the shell. You could simply use the Perl <a href=\"http://perldoc.perl.org/perlfunc.html\" rel=\"nofollow noreferrer\"><code>rename()</code> function</a> </p>\n\n<hr>\n\n<p><strong>BONUS CODE</strong> I would suggest to rewrite your code to be more Perl-idiomatic:</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>use strict;\nuse warnings;\n\nuse POSIX qw(:sys_wait_h);\n\nwhile (&lt;PODCASTS&gt;) {\n   if (/ \\d\\.mp3$/) {\n       chomp;\n       print \"$_\\n\";\n       system(qw(mv -f -v --), $_, 'TRANS/');\n       die \"Can't execute \\\"mv\\\": $!\\n\"\n           if $? &lt; 0;\n       die '\"mv\" killed by signal '  . WTERMSIG($?)    . \"\\n\"\n           if WIFSIGNALED($?);\n       die '\"mv\" exited with error ' . WEXITSTATUS($?) . \"\\n\"\n           if WEXITSTATUS($?);\n   }\n}\n</code></pre>\n\n<p><strong>BONUS CODE 2</strong> how to replace the <code>system('mv', ...)</code> with Perl builtin functions:</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>   my $target = \"TRANS/$_\";\n\n   # Emulate the \"mv -f\" option\n   unlink($target) || $!{ENOENT}\n       or die \"unlink: $!\\n\";\n\n   # same as \"mv\"\n   rename($_, $target)\n       or die \"rename: $!\\n\";\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 11038137, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2be84d3749693a5296a36d53795a10b1?s=128&d=identicon&r=PG&f=1", "display_name": "fr6", "link": "https://stackoverflow.com/users/11038137/fr6"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 126, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1549803874, "creation_date": 1549726602, "last_edit_date": 1549803874, "question_id": 54607772, "link": "https://stackoverflow.com/questions/54607772/how-to-use-perls-qx-mv-file-to-directory", "title": "How to use Perl&#39;s qx mv file to directory?", "body": "<p>I want to move dedicated files to a subfolder of their current folder. This work (with one dedicated file): </p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>qx/mv -v 'the name of the file' TRANS/; # TRANS is the subfolder at the same level as 'my file'\n</code></pre>\n\n<p>But the following doesn't work:</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>while (defined($_ = &lt;PODCASTS&gt;)) {\n   if (/ \\d{1}\\.mp3$/) {\n       print $_;\n       qx/mv -f -v \"$_\" TRANS/;\n       die; # for testing on first occurrence\n   };\n}\n</code></pre>\n\n<p>Which gives (<code>Ariane ...Tadjikistan 1.mp3</code> being the actual name of the file):</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>mv: rename Ariane Zevaco autour des Musiciens populaires au Tadjikistan 1.mp3\n    to TRANS/Ariane Zevaco autour des Musiciens populaires au Tadjikistan 1.mp3: No such file or directory\n</code></pre>\n\n<p>I used many quoting variations with no avail (giving various error comments).</p>\n"}, {"tags": ["perl", "oauth-2.0", "mojolicious"], "answers": [{"tags": [], "owner": {"reputation": 9353, "user_id": 3197055, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ns7gZ.jpg?s=128&g=1", "display_name": "Kavindu Dodanduwa", "link": "https://stackoverflow.com/users/3197055/kavindu-dodanduwa"}, "is_accepted": true, "score": 2, "last_activity_date": 1550026677, "creation_date": 1550026677, "answer_id": 54661809, "question_id": 54604318, "link": "https://stackoverflow.com/questions/54604318/which-oauth2-grant-type-should-i-use/54661809#54661809", "title": "Which OAuth2 grant type should I use?", "body": "<p>From overview of your scenario it is clear that interactions occur among system to system. There is no end user (a human) user interaction.</p>\n\n<p>First, given that your applications are executed in a secure environment (closed) they can be considered as confidential clients. <a href=\"https://tools.ietf.org/html/rfc6749#section-2.1\" rel=\"nofollow noreferrer\">OAuth 2.0 client types</a> explain more on this. With this background, you can issue each distributed application component a client id and a client secret.</p>\n\n<p>Regarding the grant type, first I welcome you to get familiarize with all available options. This can be done by going through <a href=\"https://tools.ietf.org/html/rfc6749#section-4\" rel=\"nofollow noreferrer\">Obtaining Authorization</a> section. In simple words it explain different ways an application can obtain tokens (specially access token) that can be used to invoke OAuth 2.0 protected endpoint (in your case RPC endpoint).</p>\n\n<p>For you, the best grant type will be <a href=\"https://tools.ietf.org/html/rfc6749#section-4\" rel=\"nofollow noreferrer\">client credential grant</a>. It is designed for clients which has a pre-established trust with OAuth 2.0 protected endpoint. Also it does not require a browser (user agent) or an end user compared to other grant types.</p>\n\n<p>Finally, you will require to use a OAuth 2.0 authorization server. This will registered different distributed clients and issue client id, secrets to them. And when a client require to obtain tokens, they will consume token endpoint. And each client invocation of your RPC endpoint will contain a valid access token which you can validate using token introspection (or any specific desired method).</p>\n"}], "owner": {"reputation": 1079, "user_id": 4472848, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0bc7b33199a0a5e067e1a33265cf88d1?s=128&d=identicon&r=PG", "display_name": "Wouter Verhelst", "link": "https://stackoverflow.com/users/4472848/wouter-verhelst"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 121, "favorite_count": 0, "accepted_answer_id": 54661809, "answer_count": 1, "score": 4, "last_activity_date": 1550484540, "creation_date": 1549698747, "last_edit_date": 1550484540, "question_id": 54604318, "link": "https://stackoverflow.com/questions/54604318/which-oauth2-grant-type-should-i-use", "title": "Which OAuth2 grant type should I use?", "body": "<p>I'm maintaining SReview, a mojolicious-based webapp which needs to run a lot of background tasks that will need to change database state. These jobs require a large amount of CPU time and there are many of them, so depending on the size of the installation it may be prudent to have multiple machines run these background jobs. Even so, the number of machines that have access to the database is rather limited, so currently I'm having them access the database directly, using a direct PostgreSQL connection.</p>\n\n<p>This works, but sometimes the background jobs may need to run somewhere on the other side of a hostile network, and therefore it may be less desirable to require an extra open network port just for database access. As such, I was thinking of implementing some sort of web based RPC protocol (probably something with JSON), and to protect the access with OAuth2. However, I've never worked with that protocol in detail before, and could use some guidance as to which grant flow to use.</p>\n\n<p>There are two ways in which the required credentials can be provided to the machine that runs these background jobs:</p>\n\n<ol>\n<li>The job dispatcher has the ability to specify environment variables or command line options to the background jobs. These will then be passed on to the machines that actually run the jobs in a way that can be assumed to be secure. However, that would mean that in some cases the job dispatcher itself would need to be authenticated with OAuth2, too, preferably in a way that it can be restarted at will without having to authenticate again and again.</li>\n<li>As the number of machines running jobs is likely to be fairly limited, it should be possible to create machine credentials for each machine. In that case, it would be important to be able to run multiple sessions in parallel on the sale machine, however.</li>\n</ol>\n\n<p>Which grant flow would support either of those models best?</p>\n"}, {"tags": ["perl", "optimization"], "answers": [{"comments": [{"owner": {"reputation": 914, "user_id": 4114394, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/100006056441825/picture?type=large", "display_name": "Erik Bennett", "link": "https://stackoverflow.com/users/4114394/erik-bennett"}, "edited": false, "score": 0, "creation_date": 1549663743, "post_id": 54600128, "comment_id": 95998192, "body": "Man, you&#39;re batting 1.000 this week.  Thanks!  I agree about the readability.  I think I was going to leave it anyway in the event that I want to inspect the sub-expressions for other reasons.  It is awesome to learn how to get the output to investigate this.  Someday I&#39;ll learn how to read it."}, {"owner": {"reputation": 914, "user_id": 4114394, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/100006056441825/picture?type=large", "display_name": "Erik Bennett", "link": "https://stackoverflow.com/users/4114394/erik-bennett"}, "edited": false, "score": 0, "creation_date": 1549663992, "post_id": 54600128, "comment_id": 95998263, "body": "This is what I started with.  <code>my $targetPrice = $opt{&quot;buyDollars&quot;}&#47;(((($$s{&quot;basis&quot;}*$$s{&quot;held&quot;})+$opt{&quot;buyDo&zwnj;&#8203;llars&quot;})&#47;$targetBasi&zwnj;&#8203;s)-$$s{&quot;held&quot;});</code>.  I should have put that in the original posting."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 914, "user_id": 4114394, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/100006056441825/picture?type=large", "display_name": "Erik Bennett", "link": "https://stackoverflow.com/users/4114394/erik-bennett"}, "edited": false, "score": 2, "creation_date": 1549666727, "post_id": 54600128, "comment_id": 95999033, "body": "<code>padrange</code>/<code>padsv</code> are lexical (<code>my</code>) variable lookups.  <code>LVINTRO</code> means it&#39;s the <code>my</code> itself. <code>multideref</code> is a new operator that subsumes other operators including lexical variable lookups) for efficiency."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 9, "last_activity_date": 1549751566, "last_edit_date": 1549751566, "creation_date": 1549659603, "answer_id": 54600128, "question_id": 54600066, "link": "https://stackoverflow.com/questions/54600066/perl-optimizer-question-will-the-perl-compiler-optimize-away-all-of-these-tempo/54600128#54600128", "title": "Perl optimizer question: Will the perl compiler optimize away all of these temporary variables?", "body": "<p>No.</p>\n\n<p>The following The compiled version of the program</p>\n\n<pre><code>$ perl -MO=Concise,-exec a.pl\n1  &lt;0&gt; enter\n2  &lt;;&gt; nextstate(main 2 a.pl:2) v:*,&amp;,{,x*,x&amp;,x$,$\n3  &lt;0&gt; padrange[$s:2,8; %opt:2,8; $targetBasis:2,8] vM/LVINTRO,range=3\n4  &lt;;&gt; nextstate(main 3 a.pl:3) v:*,&amp;,{,x*,x&amp;,x$,$\n5  &lt;+&gt; multideref($s-&gt;{\"basis\"}) sK/STRICT\n6  &lt;+&gt; multideref($s-&gt;{\"held\"}) sK/STRICT\n7  &lt;2&gt; multiply[t5] sK/2\n8  &lt;0&gt; padsv[$dollarsHeld:3,8] sRM*/LVINTRO\n9  &lt;2&gt; sassign vKS/2\na  &lt;;&gt; nextstate(main 4 a.pl:4) v:*,&amp;,{,x*,x&amp;,x$,$\nb  &lt;0&gt; padsv[$dollarsHeld:3,8] s\nc  &lt;+&gt; multideref($opt{\"buyDollars\"}) sK\nd  &lt;2&gt; add[t7] sK/2\ne  &lt;0&gt; padsv[$targetDollars:4,8] sRM*/LVINTRO\nf  &lt;2&gt; sassign vKS/2\ng  &lt;;&gt; nextstate(main 5 a.pl:5) v:*,&amp;,{,x*,x&amp;,x$,$\nh  &lt;0&gt; padsv[$targetDollars:4,8] s\ni  &lt;0&gt; padsv[$targetBasis:2,8] s\nj  &lt;2&gt; divide[t9] sK/2\nk  &lt;0&gt; padsv[$targetShares:5,8] sRM*/LVINTRO\nl  &lt;2&gt; sassign vKS/2\nm  &lt;;&gt; nextstate(main 6 a.pl:6) v:*,&amp;,{,x*,x&amp;,x$,$\nn  &lt;0&gt; padsv[$targetShares:5,8] s\no  &lt;+&gt; multideref($s-&gt;{\"held\"}) sK/STRICT\np  &lt;2&gt; subtract[t11] sK/2\nq  &lt;0&gt; padsv[$newShares:6,8] sRM*/LVINTRO\nr  &lt;2&gt; sassign vKS/2\ns  &lt;;&gt; nextstate(main 7 a.pl:7) v:*,&amp;,{,x*,x&amp;,x$,$\nt  &lt;+&gt; multideref($opt{\"buyDollars\"}) sK\nu  &lt;0&gt; padsv[$newShares:6,8] s\nv  &lt;2&gt; divide[t13] sK/2\nw  &lt;0&gt; padsv[$targetPrice:7,8] sRM*/LVINTRO\nx  &lt;2&gt; sassign vKS/2\ny  &lt;@&gt; leave[1 ref] vKP/REFC\na.pl syntax OK\n</code></pre>\n\n<p>Note that I prepended the following to the program first:</p>\n\n<pre><code>use strict;\nmy ($s, %opt, $targetBasis);\n</code></pre>\n\n<p>Optimizing the variables away would save copying a value into them, but copying a numerical scalar into another one is very cheap.</p>\n\n<p>I would leave the code in its readable form. Readability is far more important than saving a few nanoseconds.</p>\n"}, {"comments": [{"owner": {"reputation": 914, "user_id": 4114394, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/100006056441825/picture?type=large", "display_name": "Erik Bennett", "link": "https://stackoverflow.com/users/4114394/erik-bennett"}, "edited": false, "score": 1, "creation_date": 1549739096, "post_id": 54601206, "comment_id": 96014131, "body": "Good information about the sequential nature of the parser.  Thanks.  As to &#39;Why would you use perl for this?&#39;, I&#39;d say, it&#39;s a very expressive language.  If I need fast execution, I use &#39;C&#39;.  If I need fast development time, I use perl.  If I need really good type checking, I use Java or C++.  I am running though millions of lines, but not so often that I need to sweat it.  Someone clever, whose name escapes me,  echoed your notion of inefficient algorithms.  &quot;There is not now, nor will there ever be a language in which it is the least bit difficult to write a bad program.&quot;"}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "reply_to_user": {"reputation": 914, "user_id": 4114394, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/100006056441825/picture?type=large", "display_name": "Erik Bennett", "link": "https://stackoverflow.com/users/4114394/erik-bennett"}, "edited": false, "score": 1, "creation_date": 1549742242, "post_id": 54601206, "comment_id": 96014953, "body": "@ErikBennett I wasn&#39;t asking why you use Perl for your task, but why you (general you) would use it for real-time sensitive applications, which is a very specific and difficult requirement."}, {"owner": {"reputation": 914, "user_id": 4114394, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/100006056441825/picture?type=large", "display_name": "Erik Bennett", "link": "https://stackoverflow.com/users/4114394/erik-bennett"}, "edited": false, "score": 0, "creation_date": 1549743247, "post_id": 54601206, "comment_id": 96015215, "body": "I understand.  It&#39;s not real time."}], "tags": [], "owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "is_accepted": false, "score": 5, "last_activity_date": 1549665574, "creation_date": 1549665574, "answer_id": 54601206, "question_id": 54600066, "link": "https://stackoverflow.com/questions/54600066/perl-optimizer-question-will-the-perl-compiler-optimize-away-all-of-these-tempo/54601206#54601206", "title": "Perl optimizer question: Will the perl compiler optimize away all of these temporary variables?", "body": "<p>In general, Perl does not ever optimize out variables, only constant expressions, because these are known during the parsing and compilation phase, whereas variable assignment happens at runtime. Consider that any of those variables could be used again later in the scope, or a reference to them could be taken by something and used elsewhere. The Perl parser works sequentially so that would be really difficult to account for.</p>\n\n<p>As for your concerns, unless you are writing code with a real-time requirement (why would you use Perl for this?) or running this code in a loop millions of times, the overhead of variable declaration is not something to be concerned about. Sub calls are slightly more noticeable, method calls moreso, but inefficient algorithms dwarf those concerns. When in doubt, benchmark.</p>\n"}, {"comments": [{"owner": {"reputation": 914, "user_id": 4114394, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/100006056441825/picture?type=large", "display_name": "Erik Bennett", "link": "https://stackoverflow.com/users/4114394/erik-bennett"}, "edited": false, "score": 0, "creation_date": 1549738310, "post_id": 54604722, "comment_id": 96013888, "body": "Both good points, and both reveal to some degree my age.  The <code>$opt{&quot;buyDollars&quot;}</code> notation is to make sure that I&#39;m not getting some unintended side effect of using a bareword, like a subref, or something.  It happened once to me and &quot;made a mess&quot;.  The <code>$$s{key}</code> notation predates the recent introduction of the <code>$hash-&gt;{}</code> notation.  &quot;Recent&quot; being a relative term."}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "reply_to_user": {"reputation": 914, "user_id": 4114394, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/100006056441825/picture?type=large", "display_name": "Erik Bennett", "link": "https://stackoverflow.com/users/4114394/erik-bennett"}, "edited": false, "score": 1, "creation_date": 1549742421, "post_id": 54604722, "comment_id": 96014996, "body": "@ErikBennett I certainly did the same for a while with quoting hash keys. But with a good understanding of how hash key quoting works, you can be certain that it will not happen. As long as it is a valid identifier, consisting only of letters, digits, and underscore, and not starting with a digit; then it will always be treated as a string."}, {"owner": {"reputation": 914, "user_id": 4114394, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/100006056441825/picture?type=large", "display_name": "Erik Bennett", "link": "https://stackoverflow.com/users/4114394/erik-bennett"}, "edited": false, "score": 0, "creation_date": 1549743152, "post_id": 54604722, "comment_id": 96015187, "body": "I don&#39;t remember the specifics, and it may no longer be the case, but at one point I did something like <code>$foo{delete}</code> or <code>$foo{sort}</code> and it didn&#39;t do what I wanted.  This may have been perl3 or perl4.  It was a while ago.  I&#39;ll read up on the current state of affairs.  Thanks."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1549748104, "post_id": 54604722, "comment_id": 96016402, "body": "<code>$h-&gt;{...}</code> is not recent by any measure.  It&#39;s been with us since at least 5.6, which came out almost 20 years ago. Most of CPAN only offers compatibility to 5.8"}, {"owner": {"reputation": 914, "user_id": 4114394, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/100006056441825/picture?type=large", "display_name": "Erik Bennett", "link": "https://stackoverflow.com/users/4114394/erik-bennett"}, "edited": false, "score": 0, "creation_date": 1549909605, "post_id": 54604722, "comment_id": 96065773, "body": "Yes, that&#39;s why I said earlier, &quot;recent&quot; is a relative term.  Perl 5 was quite an expansion on Perl 4."}], "tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 5, "last_activity_date": 1549702480, "creation_date": 1549702480, "answer_id": 54604722, "question_id": 54600066, "link": "https://stackoverflow.com/questions/54600066/perl-optimizer-question-will-the-perl-compiler-optimize-away-all-of-these-tempo/54604722#54604722", "title": "Perl optimizer question: Will the perl compiler optimize away all of these temporary variables?", "body": "<p>You already have a couple of good answers to your question, but I wanted to add a couple of tips for improving the readability of your code.</p>\n\n<ul>\n<li>Hash keys don't need to be quoted unless they contain whitespace. So <code>$opt{\"buyDollars\"}</code>, for example, can be written as <code>$opt{buyDollars}</code>.</li>\n<li>It looks like you have a hash reference in <code>$s</code>. The standard way to access a value from a hash reference is <code>$s-&gt;{key}</code>. You're using <code>$$s{key}</code> which works, but which will be very confusing to most people reading your code.</li>\n</ul>\n"}], "owner": {"reputation": 914, "user_id": 4114394, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/100006056441825/picture?type=large", "display_name": "Erik Bennett", "link": "https://stackoverflow.com/users/4114394/erik-bennett"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 148, "favorite_count": 1, "accepted_answer_id": 54600128, "answer_count": 3, "score": 5, "last_activity_date": 1549751566, "creation_date": 1549659321, "last_edit_date": 1549739588, "question_id": 54600066, "link": "https://stackoverflow.com/questions/54600066/perl-optimizer-question-will-the-perl-compiler-optimize-away-all-of-these-tempo", "title": "Perl optimizer question: Will the perl compiler optimize away all of these temporary variables?", "body": "<p>I've got a pretty simple piece of arithmetic, but for readability and correctness, I've expanded it out into a bunch of temporary variables.  It's easier to read, change, and examine partial pieces of the expression.</p>\n\n<p>My question is, will this code take a run-time beating just because it's expanded?  I don't know how the perl compiler works, but in 'C', or such, these extra (not quite) variables would be optimized right out of existence.</p>\n\n<pre><code>my $targetBasis = $$s{\"basis\"} * $nextBasisPct;\nmy $dollarsHeld = $$s{\"basis\"} * $$s{\"held\"};\nmy $targetDollars = $dollarsHeld + $opt{\"buyDollars\"};\nmy $targetShares = $targetDollars / $targetBasis;\nmy $newShares = $targetShares - $$s{\"held\"};\nmy $targetPrice = $opt{\"buyDollars\"} / $newShares;\n</code></pre>\n\n<p>Thanks.</p>\n\n<p>-E</p>\n\n<p>I just got done expanding this from a nasty looking one liner, only to find that it was correct.  I'd rather not put it back to unreadable if there's no reason to do so.</p>\n"}, {"tags": ["linux", "bash", "perl", "sed", "ps1"], "comments": [{"owner": {"reputation": 100758, "user_id": 1899640, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/47374ccb28e4b0d2454b64f7b975bc66?s=128&d=identicon&r=PG", "display_name": "that other guy", "link": "https://stackoverflow.com/users/1899640/that-other-guy"}, "edited": false, "score": 0, "creation_date": 1549659829, "post_id": 54599967, "comment_id": 95996718, "body": "Thanks for including clear instructions for reproducing, as well as expected and actual results! You should also take some time to try to narrow the problem down. For example, this problem is not specific to PS1, and a MCVE could be &quot;Why does <code>echo &quot;foobar&quot; | sed &#39;s&#47;foo&#47;\\n&#47;&#39;</code> output a linefeed+bar instead of <code>\\nbar</code>?&quot; See <a href=\"https://meta.stackoverflow.com/questions/261592/how-much-research-effort-is-expected-of-stack-overflow-users\">How much research effort is expected of Stack Overflow users?</a>"}], "answers": [{"tags": [], "owner": {"reputation": 100758, "user_id": 1899640, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/47374ccb28e4b0d2454b64f7b975bc66?s=128&d=identicon&r=PG", "display_name": "that other guy", "link": "https://stackoverflow.com/users/1899640/that-other-guy"}, "is_accepted": true, "score": 1, "last_activity_date": 1549660439, "creation_date": 1549660439, "answer_id": 54600301, "question_id": 54599967, "link": "https://stackoverflow.com/questions/54599967/replacement-of-ps1-variable-in-bashrc-using-sed-or-perl/54600301#54600301", "title": "Replacement of PS1 variable in .bashrc using Sed or Perl", "body": "<p>For <code>sed</code>, you have to escape each backslash with another backslash for them to be treated literally.</p>\n\n<p>The <code>s</code> command additionally requires you to escape the delimiter and <code>&amp;</code>, so it's easier to use the <code>c</code> command, so that doubling backslashes is the only requirement:</p>\n\n<pre><code>sed -i '/PS1/c\\\nexport PS1=\"\\\\n\\\\[\\\\e[32;1m\\\\][\\\\[\\\\e[37;1m\\\\]\\\\u@\\\\h:\\\\[\\\\e[37;1m\\\\]\\\\w\\\\[\\\\e[32;1m\\\\]]\\\\\\\\$ \\\\[\\\\e[0m\\\\]\"\n' file.txt\n</code></pre>\n\n<p>If <code>file.txt</code> contains:</p>\n\n<pre><code>hello\nPS1=foo\nworld\n</code></pre>\n\n<p>then after running this command, it will contain:</p>\n\n<pre><code>hello\nexport PS1=\"\\n\\[\\e[32;1m\\][\\[\\e[37;1m\\]\\u@\\h:\\[\\e[37;1m\\]\\w\\[\\e[32;1m\\]]\\\\$ \\[\\e[0m\\]\"\nworld\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "is_accepted": false, "score": 0, "last_activity_date": 1549670129, "creation_date": 1549670129, "answer_id": 54601811, "question_id": 54599967, "link": "https://stackoverflow.com/questions/54599967/replacement-of-ps1-variable-in-bashrc-using-sed-or-perl/54601811#54601811", "title": "Replacement of PS1 variable in .bashrc using Sed or Perl", "body": "<p>Just use a tool that can work with literal strings, e.g. awk:</p>\n\n<pre><code>$ awk 'BEGIN{new=ARGV[1]; ARGV[1]=\"\"} sub(/PS1=.*/,\"PS1=\"){$0=$0 new} 1' \\\n    '\"\\n\\[\\e[32;1m\\][\\[\\e[37;1m\\]\\u@\\h:\\[\\e[37;1m\\]\\w\\[\\e[32;1m\\]]\\\\$ \\[\\e[0m\\]\"' file\nexport PS1=\"\\n\\[\\e[32;1m\\][\\[\\e[37;1m\\]\\u@\\h:\\[\\e[37;1m\\]\\w\\[\\e[32;1m\\]]\\\\$ \\[\\e[0m\\]\"\n</code></pre>\n\n<p>or if you prefer:</p>\n\n<pre><code>$ new='\"\\n\\[\\e[32;1m\\][\\[\\e[37;1m\\]\\u@\\h:\\[\\e[37;1m\\]\\w\\[\\e[32;1m\\]]\\\\$ \\[\\e[0m\\]\"' \\\n    awk 'sub(/PS1=.*/,\"PS1=\"){$0=$0 ENVIRON[\"new\"]} 1' file\nexport PS1=\"\\n\\[\\e[32;1m\\][\\[\\e[37;1m\\]\\u@\\h:\\[\\e[37;1m\\]\\w\\[\\e[32;1m\\]]\\\\$ \\[\\e[0m\\]\"\n</code></pre>\n\n<p>sed does not have any mechanism to understand literal strings, see <a href=\"https://stackoverflow.com/q/29613304/1745001\">Is it possible to escape regex metacharacters reliably with sed</a> for the hoops you'd need to jump through to get sed to act as if it does.</p>\n"}, {"tags": [], "owner": {"reputation": 2838, "user_id": 4154375, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d56dba9cd817fb4dfb662c6a91010fbb?s=128&d=identicon&r=PG&f=1", "display_name": "pjh", "link": "https://stackoverflow.com/users/4154375/pjh"}, "is_accepted": false, "score": 0, "last_activity_date": 1549917676, "creation_date": 1549917676, "answer_id": 54638804, "question_id": 54599967, "link": "https://stackoverflow.com/questions/54599967/replacement-of-ps1-variable-in-bashrc-using-sed-or-perl/54638804#54638804", "title": "Replacement of PS1 variable in .bashrc using Sed or Perl", "body": "<p>You can do this using pure Bash code with:</p>\n\n<pre><code>newps1='\"\\n\\[\\e[32;1m\\][\\[\\e[37;1m\\]\\u@\\h:\\[\\e[37;1m\\]\\w\\[\\e[32;1m\\]]\\\\$ \\[\\e[0m\\]\"'\nreadarray -t bashrc_lines &lt;~/.bashrc\nprintf '%s\\n' \"${bashrc_lines[@]/PS1=*/PS1=$newps1}\" &gt;~/.bashrc\n</code></pre>\n\n<p>The only quoting required is to put single quotes around the exact string (including the double quotes) that is to be put to the right of <code>PS1=</code>.</p>\n\n<p>The code requires Bash 4 (or 5) for <code>readarray</code>.  It reads all of the '.bashrc' file into memory, but that shouldn't be a problem in practice.  (If it's too big to load into memory than it's almost certainly too big to be a useful '.bashrc'.)</p>\n\n<p>See <a href=\"https://mywiki.wooledge.org/BashFAQ/100#Substituting_part_of_a_string\" rel=\"nofollow noreferrer\">Substituting part of a string (BashFAQ/100 (How do I do string manipulation in bash?))</a> for information about how the substitution is done.</p>\n"}], "owner": {"reputation": 1439, "user_id": 1507616, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/8a30f87d73bfcc6b74a9bfafd5475dce?s=128&d=identicon&r=PG", "display_name": "brakertech", "link": "https://stackoverflow.com/users/1507616/brakertech"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 395, "favorite_count": 0, "accepted_answer_id": 54600301, "answer_count": 3, "score": 3, "last_activity_date": 1549917676, "creation_date": 1549658932, "question_id": 54599967, "link": "https://stackoverflow.com/questions/54599967/replacement-of-ps1-variable-in-bashrc-using-sed-or-perl", "title": "Replacement of PS1 variable in .bashrc using Sed or Perl", "body": "<p>I am trying to replace a line in file and am running in to issues.</p>\n\n<p><strong>Original File:</strong></p>\n\n<pre><code>export PS1='\\h:\\w\\$ '\n</code></pre>\n\n<p><strong>Command I am running:</strong></p>\n\n<pre><code>perl -pi -e 's~PS1.*~PS1=\"\\n\\[\\e[32;1m\\][\\[\\e[37;1m\\]\\u@\\h:\\[\\e[37;1m\\]\\w\\[\\e[32;1m\\]]\\\\$ \\[\\e[0m\\]~g' ~/.bashrc\n</code></pre>\n\n<p><strong>Error message:</strong></p>\n\n<pre><code>syntax error at -e line 1, near \"e[\"\nExecution of -e aborted due to compilation errors.\n</code></pre>\n\n<p><strong>I also tried sed:</strong></p>\n\n<pre><code>sed -i 's~PS1.*~PS1=\"\\n\\[\\e[32;1m\\][\\[\\e[37;1m\\]\\u@\\h:\\[\\e[37;1m\\]\\w\\[\\e[32;1m\\]]\\\\$ \\[\\e[0m\\]~g' ~/.bashrc\n</code></pre>\n\n<p><strong>Result with Sed:</strong></p>\n\n<pre><code>export PS1=\"\n[e[32;1m][[e[37;1m]@h:[e[37;1m]w[e[32;1m]]\\$ [e[0m]\n</code></pre>\n\n<p><strong>Expected Result File:</strong></p>\n\n<pre><code>export PS1=\"\\n\\[\\e[32;1m\\][\\[\\e[37;1m\\]\\u@\\h:\\[\\e[37;1m\\]\\w\\[\\e[32;1m\\]]\\\\$ \\[\\e[0m\\]\"\n</code></pre>\n\n<p><strong>End Result</strong></p>\n\n<p>This doesn't have much to do with the question except to show folks what the PS1 will look like when working properly</p>\n\n<p><a href=\"https://i.stack.imgur.com/MiGSO.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/MiGSO.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["php", "laravel", "perl", "eloquent", "dbix-class"], "owner": {"reputation": 175, "user_id": 2501114, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/11828669ae1ad44e7334fc2b90d721c1?s=128&d=identicon&r=PG", "display_name": "Andrey Ch", "link": "https://stackoverflow.com/users/2501114/andrey-ch"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 77, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1549656114, "creation_date": 1549656114, "question_id": 54599412, "link": "https://stackoverflow.com/questions/54599412/dbixclass-perl-orm-equivalent-in-php", "title": "DBIx::Class (Perl ORM) equivalent in PHP", "body": "<p>We started our web-based app back in 2012 when Perl was still popular. Now we want to reimplement it in PHP, preferably Laravel. However, I miss the power of DBIx::Class in their default ORM, Eloquent, and the alternative, Doctrine, from reading the docs seems more complicated, but doesn't solve the issue either. What I use DBIx::Class for:</p>\n\n<ul>\n<li>Regenerate model classes from reading the DB structure, preserving any code that has been added to them (should have).</li>\n<li>Generate complex queries (incl. nested joins, subqueries) from pure language constructs, no SQL needed (must have).</li>\n</ul>\n\n<p>Code sample:</p>\n\n<pre><code>rows =&gt; $rows,\npage =&gt; $page,\n'select' =&gt; [\n        'entity_id',\n        { group_concat =&gt; [ { distinct =&gt; 'pictures.id' } ], -as =&gt; 'photos' },\n        { '' =&gt; [ 'entity.name' ], -as =&gt; 'entity_name' },\n        { '' =&gt; [ 'municipality.name' ], -as =&gt; 'municipality_name' },\n        { '' =&gt; [ 'me.birth_date' ], -as =&gt; 'bd' },\n        { concat =&gt; [ { date_format =&gt; [ 'me.birth_date', \\$c-&gt;config-&gt;{dateFormat} ] }, \\\"' ('\", { timestampdiff =&gt; [ \\'YEAR', 'me.birth_date', \\'CURDATE()' ] }, \\\"')'\" ], -as\n        { date_format =&gt; [ 'me.birth_date', \\$c-&gt;config-&gt;{dateFormat} ], -as =&gt; 'bd1' },\n        { timestampdiff =&gt; [ \\'YEAR', 'me.birth_date', \\'CURDATE()' ], -as =&gt; 'bd2' },\n        { '' =&gt; [ 'entity_state_type.name' ], -as =&gt; 'entity_state_name' },\n        { '' =&gt; [ 'data_list_item.name' ], -as =&gt; 'entity_state_reason_name' },\n        { '' =&gt; [ 'entity_state.note_text' ], -as =&gt; 'entity_state_note' },\n        { '' =&gt; [ { if =&gt; [ 'entity.archived', \\\"'Yes'\", \\\"''\" ] } ], -as =&gt; 'entity_archived' },\n],\njoin =&gt; {\n        entity =&gt; [ 'municipality', 'pictures', { 'entity_state' =&gt; [ 'entity_state_type', 'data_list_item' ] } ],\n},\ngroup_by =&gt; [ 'entity.id' ],\n</code></pre>\n\n<ul>\n<li>Subclass the result (row) and resultset classes to add user role-based limiting conditions transparently to the application code (must have, or equivalent).</li>\n</ul>\n\n<p>The call and the resulting query:</p>\n\n<pre><code>$c-&gt;model('DB::Person')-&gt;all\n\nSELECT * FROM person WHERE owner = &lt;user_id&gt;\n</code></pre>\n\n<ul>\n<li>...if the user role security settings indicate user should only access his own persons.</li>\n<li>The security settings are read from DB on request start and specify which security conditions (separate classes) should apply to which table.</li>\n<li>This moves all security away from application code, where mistakes are made most often.</li>\n</ul>\n\n<p>Which PHP library would allow us to implement this?</p>\n"}, {"tags": ["perl", "idn", "punycode"], "comments": [{"owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "edited": false, "score": 0, "creation_date": 1549652960, "post_id": 54598619, "comment_id": 95993800, "body": "It would help to add your output. Especially helpful would probably also be to see the Unicode sequence of the domain name."}, {"owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "edited": false, "score": 0, "creation_date": 1549653120, "post_id": 54598619, "comment_id": 95993878, "body": "I&#39;m not sure if code for this exists, but my first idea would be to create a map \\Uxxxx -&gt; &quot;visual equivalent ASCII/UTF-8 code&quot;. Then you could apply the map on the Unicode string to &quot;convert&quot; it to ASCII/UTF-8 code and compare the resulting string with a list of domains."}, {"owner": {"reputation": 161, "user_id": 8738086, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BmwIx.jpg?s=128&g=1", "display_name": "Claude", "link": "https://stackoverflow.com/users/8738086/claude"}, "reply_to_user": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "edited": false, "score": 0, "creation_date": 1549653203, "post_id": 54598619, "comment_id": 95993924, "body": "./testx.pl IDN: www.\u0430\u0440\u0440\u04cf\u0435.com Visually the output is similar."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1549668528, "post_id": 54598619, "comment_id": 95999436, "body": "The authority on this is the section of UTR#36: Unicode Security Considerations on <a href=\"http://www.unicode.org/reports/tr36/tr36-8.html#visual_spoofing\" rel=\"nofollow noreferrer\">Visual Security Issues</a>."}], "answers": [{"comments": [{"owner": {"reputation": 161, "user_id": 8738086, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BmwIx.jpg?s=128&g=1", "display_name": "Claude", "link": "https://stackoverflow.com/users/8738086/claude"}, "edited": false, "score": 0, "creation_date": 1549653703, "post_id": 54598888, "comment_id": 95994142, "body": "Your idea seems good, but how to get the rest of unicode equivalents? We need a-z 0-9."}, {"owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "reply_to_user": {"reputation": 161, "user_id": 8738086, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BmwIx.jpg?s=128&g=1", "display_name": "Claude", "link": "https://stackoverflow.com/users/8738086/claude"}, "edited": false, "score": 0, "creation_date": 1549653887, "post_id": 54598888, "comment_id": 95994229, "body": "Is there some list of &quot;homographs&quot; available?"}, {"owner": {"reputation": 161, "user_id": 8738086, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BmwIx.jpg?s=128&g=1", "display_name": "Claude", "link": "https://stackoverflow.com/users/8738086/claude"}, "edited": false, "score": 0, "creation_date": 1549654099, "post_id": 54598888, "comment_id": 95994317, "body": "Hmm, I don&#39;t know. But my idea was to block all domains looking similar to an alphanumeric domain. The point of IDN is to translate domains having country-special characters. So, if result of decoded punycode looks alphanumeric, this is a sure sign of scam and all domains must be blocked."}, {"owner": {"reputation": 161, "user_id": 8738086, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BmwIx.jpg?s=128&g=1", "display_name": "Claude", "link": "https://stackoverflow.com/users/8738086/claude"}, "edited": false, "score": 0, "creation_date": 1549654239, "post_id": 54598888, "comment_id": 95994386, "body": "Chrome already found a patch for this. If all characters visually look alphanumeric, then punycode domain is not decoded displaying xn--... address."}, {"owner": {"reputation": 161, "user_id": 8738086, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BmwIx.jpg?s=128&g=1", "display_name": "Claude", "link": "https://stackoverflow.com/users/8738086/claude"}, "edited": false, "score": 0, "creation_date": 1549655543, "post_id": 54598888, "comment_id": 95994918, "body": "Following the first &quot;print&quot; example, &lt;d0 b0&gt; is equivalent to visually &quot;a&quot;, &lt;d1 80&gt; to &quot;p&quot;,  &lt;d3 8f&gt; to &quot;l&quot;,  &lt;d0 b5&gt; to &quot;e&quot;. I will try to create a filter based on these pairs mapped to their alphanumeric visual equivalent. Maybe I will succeed. Thanks for idea."}, {"owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "reply_to_user": {"reputation": 161, "user_id": 8738086, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BmwIx.jpg?s=128&g=1", "display_name": "Claude", "link": "https://stackoverflow.com/users/8738086/claude"}, "edited": false, "score": 0, "creation_date": 1549656163, "post_id": 54598888, "comment_id": 95995160, "body": "Finally got some code working, updated my answer. Probably not optimal, but it works."}, {"owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "reply_to_user": {"reputation": 161, "user_id": 8738086, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BmwIx.jpg?s=128&g=1", "display_name": "Claude", "link": "https://stackoverflow.com/users/8738086/claude"}, "edited": false, "score": 0, "creation_date": 1549656370, "post_id": 54598888, "comment_id": 95995255, "body": "@Claude &lt;d0 b0&gt; is the UTF-8 encoded character (Unicode U+0430). For UTF-8 you need to track if the next character is 1, 2, 3, etc bytes long."}, {"owner": {"reputation": 161, "user_id": 8738086, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BmwIx.jpg?s=128&g=1", "display_name": "Claude", "link": "https://stackoverflow.com/users/8738086/claude"}, "edited": false, "score": 0, "creation_date": 1549657009, "post_id": 54598888, "comment_id": 95995549, "body": "Great!! For me in Europe it&#39;s too late now. I will check tomorrow some other &quot;scammy&quot; domains in punycode to get more &quot;visual&quot; equivalents and complete the list."}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 2, "creation_date": 1549657941, "post_id": 54598888, "comment_id": 95995943, "body": "There is unicode data you could possibly use for this, which is used by <a href=\"https://unicode.org/cldr/utility/confusables.jsp\" rel=\"nofollow noreferrer\">unicode.org/cldr/utility/confusables.jsp</a>, but I&#39;m not sure if that data is available to Perl."}, {"owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 1, "creation_date": 1549659055, "post_id": 54598888, "comment_id": 95996391, "body": "Also see <a href=\"https://metacpan.org/pod/Text::Unidecode\" rel=\"nofollow noreferrer\">Text::Unidecode</a>, which converts/transliterates Unicode to plain ASCII"}], "tags": [], "owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "is_accepted": false, "score": 1, "last_activity_date": 1549665427, "last_edit_date": 1549665427, "creation_date": 1549653358, "answer_id": 54598888, "question_id": 54598619, "link": "https://stackoverflow.com/questions/54598619/perl-homograph-attacks-it-is-possible-to-compare-ascii-non-ascii-strings-vi/54598888#54598888", "title": "Perl: Homograph attacks. It is possible to compare ascii / non-ascii strings, visually similar?", "body": "<p>Your example converted by the <a href=\"https://www.punycoder.com/\" rel=\"nofollow noreferrer\">Punycode converter</a> results in this UTF-8 string:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>www.\u0430\u0440\u0440\u04cf\u0435.com\n</code></pre>\n\n<pre class=\"lang-perl prettyprint-override\"><code>$ perl -e 'printf(\"%02x \", ord) for split(\"\", \"www.\u0430\u0440\u0440\u04cf\u0435.com\"); print \"\\n\"'\n77 77 77 2e d0 b0 d1 80 d1 80 d3 8f d0 b5 2e 63 6f 6d\n</code></pre>\n\n<p>As Unicode:</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>$ perl -Mutf8 -e 'printf(\"%04x \", ord) for split(\"\", \"www.\u0430\u0440\u0440\u04cf\u0435.com\"); print \"\\n\"'\n0077 0077 0077 002e 0430 0440 0440 04cf 0435 002e 0063 006f 006d\n</code></pre>\n\n<p>Using @ikegamis input:</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>$ perl -Mutf8 -MEncode -e 'print encode(\"UTF-8\", $_) for (\"www.\u0430\u0440\u0440\u04cf\u0435.com\" =~ /\\p{Cyrillic}/g); print \"\\n\"'\n\u0430\u0440\u0440\u04cf\u0435\n$ perl -Mutf8 -MEncode -e 'print encode(\"UTF-8\", $_) for (\"www.\u0430\u0440\u0440\u04cf\u0435.com\" =~ /\\P{Cyrillic}/g); print \"\\n\"'\nwww..com\n</code></pre>\n\n<hr>\n\n<h2>Original idea</h2>\n\n<p>I'm not sure if code for this exists, but my first idea would be to create a map <code>\\N{xxxx}</code> -> \"visual equivalent ASCII/UTF-8 code\". Then you could apply the map on the Unicode string to \"convert\" it to ASCII/UTF-8 code and compare the resulting string with a list of domains.</p>\n\n<p>Example code (I'm skipping the IDN decoding stuff and use the UTF-8 result directly in the test data). This could probably still be improved, but at least it shows the idea.</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\n\nuse utf8;\nuse Encode;\n\n# Unicode (in HEX) -&gt; visually equal ASCII/ISO-8859-1/... character\nmy %unicode_to_equivalent = (\n   '0430' =&gt; 'a',\n   '0435' =&gt; 'e',\n   '04CF' =&gt; 'l',\n   '0440' =&gt; 'p',\n);\n\nwhile (&lt;DATA&gt;) {\n    chomp;\n\n    # assuming that this returns a valid Perl UTF-8 string\n    #my $IDN = domain_to_unicode($_);\n    my($IDN, $compare) = split(' ', $_) ; # already decoded in test data\n\n    my $visually_decoded =\n        join('',              # merge result\n             map {            # map, if mapping exists\n                 $unicode_to_equivalent{sprintf(\"%04X\", ord($_))} // $_\n             }\n             split ('', $IDN) # split to characters\n        );\n\n    print \"Testing: \", encode('UTF-8', $IDN), \" -&gt; $compare \";\n    print \"Visual match!\"\n        if ($visually_decoded eq $compare);\n    print \"\\n\";\n}\n\nexit 0;\n\n__DATA__\nwww.\u0430\u0440\u0440\u04cf\u0435.com www.apple.com\n</code></pre>\n\n<p>Test run (depends if copy &amp; paste from the answer preserves the original UTF-8 strings)</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>$ perl dummy.pl\nTesting: www.\u0430\u0440\u0440\u04cf\u0435.com -&gt; www.apple.com Visual match!\n</code></pre>\n\n<hr>\n\n<h2>Counting the # of scripts in the string</h2>\n\n<pre class=\"lang-perl prettyprint-override\"><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\n\nuse utf8;\nuse Encode;\nuse Unicode::UCD qw(charscript);\n\nwhile (&lt;DATA&gt;) {\n    chomp;\n\n    # assuming that this returns a valid Perl UTF-8 string\n    #my $IDN = domain_to_unicode($_);\n    my($IDN) = $_;  # already decoded in test data\n\n    # Unicod characters\n    my @characters = split ('', $IDN);\n\n    # See UTR #39: Unicode Security Mechanisms\n    my %scripts =\n        map { (charscript(ord), 1) } # Codepoint to script\n        @characters;\n    delete %scripts{Common};\n\n    print 'Testing: ',\n        encode('UTF-8', $IDN),\n        ' (', join(' ', map { sprintf(\"%04X\", ord) } @characters), ')',\n        (keys %scripts == 1) ? ' not' : '', \" suspicious\\n\";\n}\n\nexit 0;\n\n__DATA__\nwww.\u0430\u0440\u0440\u04cf\u0435.com\nwww.apple.com\nwww.\u00e9cole.fr\n</code></pre>\n\n<p>Test run (depends if copy &amp; paste from the answer preserves the original UTF-8 strings)</p>\n\n<pre><code>$ perl dummy.pl\nTesting: www.\u0430\u0440\u0440\u04cf\u0435.com (0077 0077 0077 002E 0430 0440 0440 04CF 0435 002E 0063 006F 006D) suspicious\nTesting: www.apple.com (0077 0077 0077 002E 0061 0070 0070 006C 0065 002E 0063 006F 006D) not suspicious\nTesting: www.\u00e9cole.fr (0077 0077 0077 002E 00E9 0063 006F 006C 0065 002E 0066 0072) not suspicious\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 161, "user_id": 8738086, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BmwIx.jpg?s=128&g=1", "display_name": "Claude", "link": "https://stackoverflow.com/users/8738086/claude"}, "is_accepted": true, "score": 0, "last_activity_date": 1549972822, "last_edit_date": 1549972822, "creation_date": 1549703877, "answer_id": 54604863, "question_id": 54598619, "link": "https://stackoverflow.com/questions/54598619/perl-homograph-attacks-it-is-possible-to-compare-ascii-non-ascii-strings-vi/54604863#54604863", "title": "Perl: Homograph attacks. It is possible to compare ascii / non-ascii strings, visually similar?", "body": "<p>After some research and thanks to your comments, I have a conclusion now. \nThe most frequent issues are coming from Cyrillic. This set contains a lot of visually-similar to Latin characters and you can do many combinations.</p>\n\n<p>I have identified some scammy IDN domains including these names:</p>\n\n<pre><code>\"\u0430\u0440\u0440\u04cf\u0435\" \"\u0441\u04bb\u0430\u0455\u0435\" \"\u0441\u0456\u0455\u0441\u043e\"\n</code></pre>\n\n<p>Maybe here, with this font, you can see a difference, but in browser is absolutely no visual difference. </p>\n\n<p>Consulting <a href=\"https://en.wikipedia.org/wiki/Cyrillic_script_in_Unicode\" rel=\"nofollow noreferrer\">https://en.wikipedia.org/wiki/Cyrillic_script_in_Unicode</a> I was able to create a table with 12 visually similar characters. </p>\n\n<p><strong>Update:</strong> I found 4 more Latin-like characters in Cyrillic charset, 16 in total now.</p>\n\n<p>It is possible to create many combinations between these, to create IDNs 100% visually-similar to legit domains.</p>\n\n<pre><code>0430 a CYRILLIC SMALL LETTER A\n0441 c CYRILLIC SMALL LETTER ES\n0501 d CYRILLIC SMALL LETTER KOMI DE\n0435 e CYRILLIC SMALL LETTER IE\n04bb h CYRILLIC SMALL LETTER SHHA \n0456 i CYRILLIC SMALL LETTER BYELORUSSIAN-UKRAINIAN I \n0458 j CYRILLIC SMALL LETTER JE\n043a k CYRILLIC SMALL LETTER KA\n04cf l CYRILLIC SMALL LETTER PALOCHKA \n043e o CYRILLIC SMALL LETTER O\n0440 p CYRILLIC SMALL LETTER ER\n051b q CYRILLIC SMALL LETTER QA \n0455 s CYRILLIC SMALL LETTER DZE\n051d w CYRILLIC SMALL LETTER WE \n0445 x CYRILLIC SMALL LETTER HA\n0443 y CYRILLIC SMALL LETTER U\n</code></pre>\n\n<p>The problem is happening with second level domain. Extensions can also be IDN, but they are verified, can not be spoofed and not subject of this issue.\nDomain registrar will check if all letters are from the same set. IDN will not be accepted if you have a mix of Latin,non-Latin characters. So, extra validation is pointless.</p>\n\n<p>My idea is simple. We split the domain and only decode SLD part, then we match against a visually-similar Cyrillic list.\nIf all letters are visually similar to Latin, then result is almost sure scam.</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\n\nuse utf8;\nuse open ':std', ':encoding(UTF-8)';\nuse Net::IDN::Encode ':all';\nuse Array::Utils qw(:all);\n\nmy @latinlike_cyrillics = qw (0430 0441 0501 0435 04bb 0456 0458 043a 04cf 043e 0440 051b 0455 051d 0445 0443);\n\n# maybe you can find better examples\nmy $domain1 = \"www.xn--80ak6aa92e.com\";\nmy $domain2 = \"www.xn--d1acpjx3f.xn--p1ai\";\n\ntest_domain ($domain1);\ntest_domain ($domain2);\n\nsub test_domain {\n    my $testdomain = shift;\n    my ($tLD, $sLD, $topLD) = split(/\\./, $testdomain);\n    my $IDN = domain_to_unicode($sLD);\n\n    my @decoded; push (@decoded,sprintf(\"%04x\", ord)) for ( split(\"\", $IDN) );\n\n    my @checker = array_minus( @decoded, @latinlike_cyrillics );\n    if (@checker){print \"$testdomain [$IDN] seems to be ok\\n\"}\n    else {print \"$testdomain [$IDN] is possibly scam\\n\"}\n}\n</code></pre>\n"}], "owner": {"reputation": 161, "user_id": 8738086, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BmwIx.jpg?s=128&g=1", "display_name": "Claude", "link": "https://stackoverflow.com/users/8738086/claude"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 127, "favorite_count": 0, "accepted_answer_id": 54604863, "answer_count": 2, "score": 2, "last_activity_date": 1549972822, "creation_date": 1549652062, "last_edit_date": 1549653423, "question_id": 54598619, "link": "https://stackoverflow.com/questions/54598619/perl-homograph-attacks-it-is-possible-to-compare-ascii-non-ascii-strings-vi", "title": "Perl: Homograph attacks. It is possible to compare ascii / non-ascii strings, visually similar?", "body": "<p>I faced this so called \"homograph attack\" and I want to reject domains where decoded punycode visually seems to be alphanumeric only. For example, www.xn--80ak6aa92e.com will display www.apple.com in browser (Firefox). Domains are visually the same, but character set is different. Chrome already patched this and browser display the punycode. </p>\n\n<p>I have example below.</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\n\nuse Net::IDN::Encode ':all';\nuse utf8;                             \n\n\nmy $testdomain = \"www.xn--80ak6aa92e.com\";\nmy $IDN = domain_to_unicode($testdomain);\nmy $visual_result_ascii = \"www.apple.com\";\n\nprint \"S1: $IDN\\n\";\nprint \"S2: $visual_result_ascii\";\nprint \"MATCH\" if ($IDN eq $visual_result_ascii);\n</code></pre>\n\n<p>Visually are the same, but they won't match. It is possible to compare an unicode string ($IDN) against an alphanumeric string, visually the same? </p>\n"}, {"tags": ["mysql", "perl", "limit", "quotes", "sanitization"], "answers": [{"tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": false, "score": 5, "last_activity_date": 1549641365, "last_edit_date": 1549641365, "creation_date": 1549640231, "answer_id": 54595729, "question_id": 54595523, "link": "https://stackoverflow.com/questions/54595523/perl-dbdmysql-execute-doesnt-support-string-parameter-after-limit-keyword-al/54595729#54595729", "title": "Perl DBD::MySQL execute doesn&#39;t support string parameter after limit keyword. Always treated as number", "body": "<p>Parsing of commands containing LIMIT is buggy. Try <a href=\"http://p3rl.org/DBD::MariaDB\" rel=\"nofollow noreferrer\">DBD::MariaDB</a> instead which has hopefully already fixed the issue (<a href=\"https://github.com/gooddata/DBD-MariaDB/pull/57/files\" rel=\"nofollow noreferrer\">here</a>).</p>\n"}, {"comments": [{"owner": {"reputation": 77017, "user_id": 463304, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/s77Za.jpg?s=128&g=1", "display_name": "700 Software", "link": "https://stackoverflow.com/users/463304/700-software"}, "edited": false, "score": 0, "creation_date": 1549895252, "post_id": 54595754, "comment_id": 96057701, "body": "I tried just parenthesis but somehow it didn&#39;t solve the problem like a derived table was doing."}], "tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 0, "last_activity_date": 1549640304, "creation_date": 1549640304, "answer_id": 54595754, "question_id": 54595523, "link": "https://stackoverflow.com/questions/54595523/perl-dbdmysql-execute-doesnt-support-string-parameter-after-limit-keyword-al/54595754#54595754", "title": "Perl DBD::MySQL execute doesn&#39;t support string parameter after limit keyword. Always treated as number", "body": "<p>Does your updated OS include a newer version of MySQL? The <a href=\"https://dev.mysql.com/doc/refman/5.5/en/union.html\" rel=\"nofollow noreferrer\">documentation for UNION in MySQL</a> says this:</p>\n\n<blockquote>\n  <p>To apply ORDER BY or LIMIT to an individual SELECT, place the clause inside the parentheses that enclose the SELECT:</p>\n\n<pre><code>(SELECT a FROM t1 WHERE a=10 AND B=1 ORDER BY a LIMIT 10)\nUNION\n(SELECT a FROM t2 WHERE a=11 AND B=2 ORDER BY a LIMIT 10);\n</code></pre>\n</blockquote>\n\n<p>And this:</p>\n\n<blockquote>\n  <p>To use an ORDER BY or LIMIT clause to sort or limit the entire UNION result, parenthesize the individual SELECT statements and place the ORDER BY or LIMIT after the last one. The following example uses both clauses:</p>\n\n<pre><code>(SELECT a FROM t1 WHERE a=10 AND B=1)\nUNION\n(SELECT a FROM t2 WHERE a=11 AND B=2)\nORDER BY a LIMIT 10;\n</code></pre>\n</blockquote>\n\n<p>So I think you need to add some parentheses to your SQL.</p>\n"}], "owner": {"reputation": 77017, "user_id": 463304, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/s77Za.jpg?s=128&g=1", "display_name": "700 Software", "link": "https://stackoverflow.com/users/463304/700-software"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 70, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1549641365, "creation_date": 1549639473, "last_edit_date": 1549640339, "question_id": 54595523, "link": "https://stackoverflow.com/questions/54595523/perl-dbdmysql-execute-doesnt-support-string-parameter-after-limit-keyword-al", "title": "Perl DBD::MySQL execute doesn&#39;t support string parameter after limit keyword. Always treated as number", "body": "<p>We recently set up a new OS with up-to-date DBI MySQL, Perl, etc.</p>\n\n<p>This pattern in found several of our applications, and is breaking when installed on the new OS.</p>\n\n<pre><code>my $sth = $dbh-&gt;prepare('select null colname, null colname2 limit 0'\n        . ' union all select x, y from tbl where col like ?'\n        . ' union all select z, a from tbl2 where col like ?');\n$sth-&gt;execute('%test%', '%test%') or die ...;\n</code></pre>\n\n<p>The error is a MySQL Syntax error.\nWe've identified the issue in the way parameters are quoted.</p>\n\n<p>In the above example, it resolves like this at MySQL.</p>\n\n<pre><code>select null colname, null colname2 limit 0\nunion all select x, y from tbl where col like \nunion all select z, a from tbl2 where col like \n</code></pre>\n\n<p>However, if <code>'%test%'</code> is swapped out with numbers (e.g. <code>'555'</code>), it comes through.</p>\n\n<pre><code>select null colname, null colname2 limit 0\nunion all select x, y from tbl where col like 555\nunion all select z, a from tbl2 where col like 555\n</code></pre>\n\n<p>Notice the absence of quotes.</p>\n\n<p>We've identified this as being related to presence of the <code>limit</code> keyword. Removing the keyword solves the syntax error.</p>\n\n<pre><code>select null colname, null colname2\nunion all select x, y from tbl where col like '%test%'\nunion all select z, a from tbl2 where col like '%test%'\n</code></pre>\n\n<p>Also, setting <code>'555'</code> in Perl now results in <code>'555'</code> at MySQL, with quotes.</p>\n\n<p>We found that using a derived table is the quickest way to resolve right now,</p>\n\n<pre><code>select * from (select null colname, null colname2 limit 0)a\nunion all select x, y from tbl where col like '%test%'\nunion all select z, a from tbl2 where col like '%test%'\n</code></pre>\n\n<p>(tried just parenthesis, but needed derived table to work) but I am curious if there's a way to control the quotation method through the DBI/DBD::MySQL interface instead. (avoiding an update to the statement)</p>\n\n<p>Either change default behavior to disable the <code>limit</code> keyword logic<br>\nor, to force a particular parameter type as string?</p>\n"}, {"tags": ["shell", "perl"], "comments": [{"owner": {"reputation": 4186, "user_id": 2773311, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/wIGqo.png?s=128&g=1", "display_name": "Arc676", "link": "https://stackoverflow.com/users/2773311/arc676"}, "edited": false, "score": 1, "creation_date": 1549622031, "post_id": 54590346, "comment_id": 95977274, "body": "You can also just pass them as arguments to the script. Or are you trying specifically to access the shell environment variables?"}, {"owner": {"reputation": 97, "user_id": 10907113, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99a903cad6d1fbf0597b3405521571b5?s=128&d=identicon&r=PG&f=1", "display_name": "ritz", "link": "https://stackoverflow.com/users/10907113/ritz"}, "reply_to_user": {"reputation": 4186, "user_id": 2773311, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/wIGqo.png?s=128&g=1", "display_name": "Arc676", "link": "https://stackoverflow.com/users/2773311/arc676"}, "edited": false, "score": 0, "creation_date": 1549622507, "post_id": 54590346, "comment_id": 95977544, "body": "I have 3 scripts and I am calling all in a shell script  so I specified input and output file in shell script so I can call them in all script. But I don&#39;t know how to introduce these variable to other script."}, {"owner": {"reputation": 4229, "user_id": 3973175, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/9c15391d610e59c350912be638b14074?s=128&d=identicon&r=PG", "display_name": "con", "link": "https://stackoverflow.com/users/3973175/con"}, "edited": false, "score": 0, "creation_date": 1549849166, "post_id": 54590346, "comment_id": 96038394, "body": "you can also use Getopt::Long <a href=\"https://perldoc.perl.org/Getopt/Long.html\" rel=\"nofollow noreferrer\">perldoc.perl.org/Getopt/Long.html</a>"}], "answers": [{"comments": [{"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1549622534, "post_id": 54590626, "comment_id": 95977564, "body": "I strongly recommend quoting the variables, as in <code>perl myscript &quot;$_input_file&quot; &quot;$_output_file&quot;</code>. See <a href=\"http://mywiki.wooledge.org/BashPitfalls#cp_.24file_.24target\" rel=\"nofollow noreferrer\">mywiki.wooledge.org/BashPitfalls#cp_.24file_.24target</a>."}, {"owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1549622590, "post_id": 54590626, "comment_id": 95977598, "body": "Sorry, developer asleep at the keyboard."}, {"owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1549622812, "post_id": 54590626, "comment_id": 95977735, "body": "I guess I only write filters or use <a href=\"https://metacpan.org/pod/Getopt::Long\" rel=\"nofollow noreferrer\">Getopt::Long</a> in my code :-)"}, {"owner": {"reputation": 137100, "user_id": 874188, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/ZcY77.png?s=128&g=1", "display_name": "tripleee", "link": "https://stackoverflow.com/users/874188/tripleee"}, "edited": false, "score": 1, "creation_date": 1549622965, "post_id": 54590626, "comment_id": 95977818, "body": "A common arrangement is to accept a <i>list</i> of input files, and simply produce output on standard output. That way your program behaves as expected in a shell pipeline."}, {"owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "edited": false, "score": 0, "creation_date": 1549623164, "post_id": 54590626, "comment_id": 95977929, "body": "These are all valid comments, but I&#39;ll refer to the <a href=\"https://stackoverflow.com/questions/54572433/how-to-give-output-location-of-file-in-shell-script/\">question</a> that preceded this one."}], "tags": [], "owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "is_accepted": true, "score": 2, "last_activity_date": 1549846384, "last_edit_date": 1549846384, "creation_date": 1549622389, "answer_id": 54590626, "question_id": 54590346, "link": "https://stackoverflow.com/questions/54590346/how-to-introduce-a-shell-input-file-as-perl-input-file/54590626#54590626", "title": "How to introduce a Shell input file as Perl input file", "body": "<p>Start your Perl script with this:</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\n\nmy $input_file = $ARGV[0]\n   or die \"usage: $0 &lt;input file&gt; &lt;output file&gt;\\n\";\nmy $output_file = $ARGV[1]\n   or die \"usage: $0 &lt;input file&gt; &lt;output file&gt;\\n\";\n</code></pre>\n\n<p>... and then you can call it like this from shell script</p>\n\n<pre class=\"lang-sh prettyprint-override\"><code>\"${_script_path}/my_perl.pl\" \"${_input_file}\" \"${_output_file}\"\n</code></pre>\n\n<hr>\n\n<p><strong>NOTE:</strong> if you have only one input file and one output file, then you should consider writing a filter instead, i.e. reading from STDIN and writing to STDOUT. Then you can integrate into a pipe like this</p>\n\n<pre class=\"lang-sh prettyprint-override\"><code>[command that generates input] | perl my_perl.pl | [command that consumes output]\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 6928, "user_id": 1015385, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8fc84a03227c566697c4a16b2e9f8782?s=128&d=identicon&r=PG", "display_name": "JRFerguson", "link": "https://stackoverflow.com/users/1015385/jrferguson"}, "edited": false, "score": 2, "creation_date": 1549630363, "post_id": 54591315, "comment_id": 95981836, "body": "&quot;# While there is data available on STDIN&quot; :-)"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 6928, "user_id": 1015385, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8fc84a03227c566697c4a16b2e9f8782?s=128&d=identicon&r=PG", "display_name": "JRFerguson", "link": "https://stackoverflow.com/users/1015385/jrferguson"}, "edited": false, "score": 0, "creation_date": 1549634366, "post_id": 54591315, "comment_id": 95984039, "body": "@JRFerguson Oops. Thanks, fixed :-/"}], "tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 2, "last_activity_date": 1549634355, "last_edit_date": 1549634355, "creation_date": 1549624821, "answer_id": 54591315, "question_id": 54590346, "link": "https://stackoverflow.com/questions/54590346/how-to-introduce-a-shell-input-file-as-perl-input-file/54591315#54591315", "title": "How to introduce a Shell input file as Perl input file", "body": "<p>Whenever possible, I would recommend writing programs as Unix filters - that is, read from <code>STDIN</code> and write to <code>STDOUT</code>. This makes your programs as flexible as possible and is usually easier to write (as you avoid all that tedious opening of files).</p>\n\n<p>In Perl, you can use <code>&lt;&gt;</code> to read from <code>STDIN</code> and <code>print()</code> to write to <code>STDOUT</code>. So one common approach would look like this:</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\n\n# While there is data available on STDIN\n# Read a line and store it in $_\nwhile (&lt;&gt;) {\n  # Do something useful with the data in $_\n  ...\n  # Print $_ to STDOUT\n  print;\n}\n</code></pre>\n\n<p>Then you just need to ensure that STDIN and STDOUT are connected to the correct files when you call your program. If <code>_input_file</code> and <code>_output_file</code> are environment variables and your program is called <code>my_filter</code>, then you could call it like this:</p>\n\n<pre><code>my_filter &lt; \"$_input_file\" &gt; \"$_output_file\"\n</code></pre>\n"}], "owner": {"reputation": 97, "user_id": 10907113, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99a903cad6d1fbf0597b3405521571b5?s=128&d=identicon&r=PG&f=1", "display_name": "ritz", "link": "https://stackoverflow.com/users/10907113/ritz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 206, "favorite_count": 0, "accepted_answer_id": 54590626, "answer_count": 2, "score": -1, "last_activity_date": 1549846384, "creation_date": 1549621533, "question_id": 54590346, "link": "https://stackoverflow.com/questions/54590346/how-to-introduce-a-shell-input-file-as-perl-input-file", "title": "How to introduce a Shell input file as Perl input file", "body": "<p>I'm having some troubles trying to insert a bash variable inside my Perl code. \nIn Shell script :- </p>\n\n<pre><code>_input_file     # contain input file name\n_output_file    # contain output folder name\n</code></pre>\n\n<p>How to introduce input file and output file to Perl script. So Perl script can read that input file.</p>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1549574609, "post_id": 54582418, "comment_id": 95961960, "body": "Need to set up the regex to match only when <code>...co|info</code> is the <i>last</i> thing in the string; the way it&#39;s now the regex matches the given pattern but it&#39;s OK if the string then have more after it.  So you need to add the end-of-string anchor.  So <code>...co|info)$&#47;</code> (or <code>\\Z</code>)"}, {"owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "edited": false, "score": 0, "creation_date": 1549574870, "post_id": 54582418, "comment_id": 95962086, "body": "... and you should also add the beginning-of-string achor, to make sure that you are not accepting junk at the beginning, i.e. <code>= qr&#47;^</code>."}, {"owner": {"reputation": 39, "user_id": 10863848, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/716fe55d4119511b62597bc3cbfa84ef?s=128&d=identicon&r=PG&f=1", "display_name": "learningunix717", "link": "https://stackoverflow.com/users/10863848/learningunix717"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1549574972, "post_id": 54582418, "comment_id": 95962130, "body": "@zdim this is still not matching the correct number of emails, take a look at my edit maybe that could help?"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1549575655, "post_id": 54582418, "comment_id": 95962450, "body": "Ah, that&#39;s different: change the anchor to word-boundary, <code>\\b</code>, as @Nick says in their answer, except that you may have to allow <code>&lt;</code> instead."}, {"owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "edited": false, "score": 1, "creation_date": 1549575700, "post_id": 54582418, "comment_id": 95962474, "body": "Why should <code>apache.apache_testapache@apache.edu</code> not match? It seems to fulfill your requirements?"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1549575739, "post_id": 54582418, "comment_id": 95962491, "body": "More to the point: I expect that this catches what you need, but it is very incomplete as far as email goes so consider changing to a better email-identification system, as @Grinnz recommends."}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1549576803, "post_id": 54582418, "comment_id": 95962905, "body": "Updated my answer to reflect finding these within larger strings."}], "answers": [{"tags": [], "owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "is_accepted": false, "score": 3, "last_activity_date": 1549576665, "last_edit_date": 1549576665, "creation_date": 1549574949, "answer_id": 54582589, "question_id": 54582418, "link": "https://stackoverflow.com/questions/54582418/perl-regex-for-emails-with-multiple-tld/54582589#54582589", "title": "Perl regex for emails with multiple TLD", "body": "<p>Since you are trying to find these within a larger string, you need to define what characters would not be considered part of the email address (I will assume any characters that you have not specified as allowed) so that you can anchor the beginning and ending of each match. Regexes will keep trying every possibility until they find a substring that matches, so unless you define these constraints, you will end up with the biggest chunks of what you consider \"emails\" that match your rules. One approach is to extract all possible strings of characters you allow, then run a second regex (your original regex), anchored to the beginning and end with <code>\\A</code> and <code>\\z</code>, to validate its format and the TLDs you want to allow.</p>\n\n<p>Also note that since TLDs are not case sensitive, you probably want the <code>/i</code> regex modifier.</p>\n\n<pre><code>foreach my $email ($str =~ m/([a-zA-Z0-9._@]+)/g) {\n    next unless $email =~ m/\\A...\\z/i;\n}\n</code></pre>\n\n<p>Your regex is also woefully incomplete, email addresses are complex. (If you want to see what a complete email address parsing regex looks like, <a href=\"https://metacpan.org/source/RJBS/Email-Valid-1.202/lib/Email/Valid.pm#L399-402\" rel=\"nofollow noreferrer\">check out Email::Valid</a>.) If you want to allow more valid email addresses and are flexible in your approach, I recommend using <a href=\"https://metacpan.org/pod/Email::Address::XS\" rel=\"nofollow noreferrer\">Email::Address::XS</a> to parse them.</p>\n\n<pre><code>use strict;\nuse warnings;\nuse Email::Address::XS;\n\nmy $tld_re = qr/\\.(com|org|edu|gov|uk|net|ca|de|jp|fr|au|us|ru|ch|it|nl|se|no|mil|biz|io|cc|co|info)\\z/i;\n\nmy $address = Email::Address::XS-&gt;parse_bare_address($email);\n\nif ($address-&gt;is_valid and $address-&gt;host =~ m/$tld_re/) {\n   # matches\n}\n</code></pre>\n"}], "owner": {"reputation": 39, "user_id": 10863848, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/716fe55d4119511b62597bc3cbfa84ef?s=128&d=identicon&r=PG&f=1", "display_name": "learningunix717", "link": "https://stackoverflow.com/users/10863848/learningunix717"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 80, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1549576665, "creation_date": 1549574208, "last_edit_date": 1549575303, "question_id": 54582418, "link": "https://stackoverflow.com/questions/54582418/perl-regex-for-emails-with-multiple-tld", "title": "Perl regex for emails with multiple TLD", "body": "<p>I have a regex that is to only match alphanumeric characters,\".\", and \"_\" both before and after the @ sign. It is to match only the following TLDs:</p>\n\n<p>com, org, edu, gov, uk, net, ca, de, jp, fr, au, us, ru, ch, it, nl, se, no, mil, biz, io, cc, co, info</p>\n\n<p>For example, it should match <code>sample22_test.tester.edu@auto.gmail.mil</code> and <code>test@gmail.com</code>, but not <code>anothertest.325-2352@yahoo.pys</code> (contains hyphen and non matching TLD) or <code>tester1234@yahoo.neta</code> (.net is a matching TLD, but .neta is not)</p>\n\n<p>I have the following regex: </p>\n\n<pre><code>my $email_regex = qr/[a-zA-Z0-9._]+\\@[a-zA-Z0-9._]+\\.(com|org|edu|gov|uk|net|ca|de|jp|fr|au|us|ru|ch|it|nl|se|no|mil|biz|io|cc|co|info)/;\n</code></pre>\n\n<p>This is matching correctly up to the appropriate TLD, but then if the TLD has any additional alphanumeric characters after it, it is still counting it as a match (which it shouldn't), it just doesn't display any alphanumeric characters after the TLD.</p>\n\n<p>input:</p>\n\n<pre><code>sample@gmail.com example@autotest.comcast.net&lt;sender: apache.apache_testapache@apache.edu &gt;\nwhoisthis@questions.gov,find@find.co{}Failure@pastattempts.frz;\nsample2@yahoo.com\nsample5@test.biz : test\nsample92.sdfj@gmail.com\nsample22_242@tech.org\ngreenjeans_93_who.ask@tester.info\ncomputergeek324@ask.nets\nanothertest.tester.gov@gmail.ch\nhelloooooow232@aol.com&lt;;Senderfailure&gt;\nfinaltest23_3test@yahoo.its\n</code></pre>\n\n<p>output (I have inserted comments to indicate what matched correctly and what shouldn't have matched but did anyways):</p>\n\n<pre><code>sample@gmail.com #correct\nexample@autotest.comcast.net #correct\napache.apache_testapache@apache.edu #should not match\nwhoisthis@questions.gov #correct\nfind@find.co #correct\nFailure@past.attempts.fr #should not match\nsample2@yahoo.com #correct\nsample5@test.biz #correct\nsample92.sdfj@gmail.com #correct\nsample22_242@tech.org #correct \ngreenjeans_93_who.ask@tester.info #correct\ncomputergeek324@ask.net #should not match\nanothertest.tester.gov@gmail.ch #correct\nhelloooooow232@aol.com #correct\nfinaltest23_3test@yahoo.it #should not match\n</code></pre>\n\n<p>EDIT: input file contains many other characters after the email such as <code>&lt; , &gt; , :, ;, \"</code> these are okay and can still be matched, just not included in the output as seen above.</p>\n"}, {"tags": ["perl", "canvas", "tk"], "comments": [{"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1549570136, "post_id": 54580110, "comment_id": 95959947, "body": "Maybe try an event loop like <a href=\"https://metacpan.org/pod/AnyEvent::Impl::Tk\" rel=\"nofollow noreferrer\"><code>AnyEvent::Impl::Tk</code></a> ?"}], "answers": [{"comments": [{"owner": {"reputation": 209, "user_id": 8516392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04539bf98f6da7d74908a7fae11df82e?s=128&d=identicon&r=PG&f=1", "display_name": "technoleap84", "link": "https://stackoverflow.com/users/8516392/technoleap84"}, "edited": false, "score": 0, "creation_date": 1549662078, "post_id": 54582188, "comment_id": 95997574, "body": "Stefan, thanks a lot. I&#39;ve implemented solution nr.2 as suggested by you an now everything works like a charm. I will follow up with a code snippet of what figured out as final solution to the original problem. Thanks again man"}], "tags": [], "owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "is_accepted": false, "score": 2, "last_activity_date": 1549573183, "creation_date": 1549573183, "answer_id": 54582188, "question_id": 54580110, "link": "https://stackoverflow.com/questions/54580110/perl-tk-canvas-dynamic-updating/54582188#54582188", "title": "Perl Tk: Canvas dynamic updating", "body": "<p>Quoting from <a href=\"http://shop.oreilly.com/product/9781565927162.do\" rel=\"nofollow noreferrer\">Mastering Perl/Tk</a>, chapter 15 \"Anatomy of the MainLoop\":</p>\n\n<h2>Option 1: use your own <code>MainLoop</code> implementation</h2>\n\n<pre class=\"lang-perl prettyprint-override\"><code>use Tk qw(:eventtypes);\n\nwhile (Tk::MainWindow-&gt;Count) {\n    # process events - but don't block waiting for them\n    DoOneEvent(ALL_EVENTS | DONT_WAIT);\n\n    # your update implementation goes here\n}\n</code></pre>\n\n<h2>Option 2: use a repeat timer event</h2>\n\n<p>Later in the chapter it is stated that <code>DoOneEvent()</code> isn't really necessary for most stuff. You could use timer events instead, e.g.</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>my $update = sub {\n    # your update implementation goes here\n};\n\n# run update every 50ms\n$top-&gt;repeat(50, $update);\n\nMainLoop;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 5004, "user_id": 1930666, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BiEzi.jpg?s=128&g=1", "display_name": "Brad Lanam", "link": "https://stackoverflow.com/users/1930666/brad-lanam"}, "edited": false, "score": 0, "creation_date": 1549744378, "post_id": 54600743, "comment_id": 96015491, "body": "It would be far more efficient to use the canvas move command to move the oval than to delete and re-create it.  Not a python user, but I know it can be done."}], "tags": [], "owner": {"reputation": 209, "user_id": 8516392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04539bf98f6da7d74908a7fae11df82e?s=128&d=identicon&r=PG&f=1", "display_name": "technoleap84", "link": "https://stackoverflow.com/users/8516392/technoleap84"}, "is_accepted": false, "score": 1, "last_activity_date": 1549662700, "creation_date": 1549662700, "answer_id": 54600743, "question_id": 54580110, "link": "https://stackoverflow.com/questions/54580110/perl-tk-canvas-dynamic-updating/54600743#54600743", "title": "Perl Tk: Canvas dynamic updating", "body": "<p>SOLUTION:</p>\n\n<p>As per Stefan Becker suggested option nr.2, here is what has finally fixed the problem:</p>\n\n<pre><code>use Tk:\n\n$top = MainWindow-&gt;new();\n\n# create a canvas widget\n$canvas = $top-&gt;Canvas(width =&gt; 600, \n                        height =&gt; 400,\n                        background =&gt; 'black') -&gt; pack();\n\n$x=300; \n$y=200; \n\nmy $update = sub {\n    $canvas-&gt;delete('all'); #unquote this line if you don't want the original point positions to be drawn in the canvas. Viceversa\n    $x=$x+(-5+rand(10)); #white noise\n    $y=$y-(-5+rand(10)); #white noise\n    $canvas-&gt;create ('oval', $x , $y , $x+5, $y+5, -fill=&gt;\"red\"); \n    };  \n\n    $top-&gt;repeat(50, $update); \n\nMainLoop;\n</code></pre>\n\n<p>I've just added the statement $canvas->delete('all') at the beginning of the updating loop in order to draw just actual points and not the history.</p>\n"}], "owner": {"reputation": 209, "user_id": 8516392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04539bf98f6da7d74908a7fae11df82e?s=128&d=identicon&r=PG&f=1", "display_name": "technoleap84", "link": "https://stackoverflow.com/users/8516392/technoleap84"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 240, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1549662700, "creation_date": 1549564620, "last_edit_date": 1549623420, "question_id": 54580110, "link": "https://stackoverflow.com/questions/54580110/perl-tk-canvas-dynamic-updating", "title": "Perl Tk: Canvas dynamic updating", "body": "<p>I'm trying to animate the results of a mathematical process in a 2D canvas with Tk. I've decided to do it with Tk and not SDL because right now i'm working with both Linux and Windows machines and Strawberry Perl doesn't compile proberly in windows, whil Tk is up on both pcs.</p>\n\n<p>What i would like to do with Tk is that:</p>\n\n<p>1)Popping up the canvas while my program is working out the coordinates of the points i would like to draw.</p>\n\n<p>2)Drawing them instantly into the canvas without waiting for the process to reach the end</p>\n\n<p>It's actually a simple animation, where a bunch of points moves around the Canvas while my script updates their coordinates.</p>\n\n<p>Here you have a code snippet i've been writing so far for a single point:</p>\n\n<pre><code>use Tk;\n\n#calcuate the coordinate of a single point\n$x=10;\n$y=10;\n$top = MainWindow-&gt;new();\n\n# create a canvas widget\n$canvas = $top-&gt;Canvas(width =&gt; 600, height =&gt; 400) -&gt; pack();\n\n# For example, let's create 1 point inside the canvas\n$canvas-&gt;create ('oval', $x, $y, $x+3, $y+3, -fill=&gt;\"black\");  # fill color of object\n\nMainLoop;\n</code></pre>\n\n<p>The problem with the above code is that i would like to add my 'math' script inside it in order to update the $x and $y coordinates above (with some sort of for/while cycle) without shutting down the original canvas, by obtaining a single point moving all around it (atually there are more points i'm supposed to display but that's a minor detail).\nFYI, using a simple for cycle embedding the ''Mainloop'' directive doesn't fix the problem.</p>\n\n<p>Thanks in advance guys  </p>\n"}, {"tags": ["perl", "handler", "stat", "filehandler"], "comments": [{"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 2, "creation_date": 1549563070, "post_id": 54579573, "comment_id": 95956637, "body": "If you are on a filesystem that supports it, you can compare the <code>dev</code> and <code>ino</code> values from stat. However, your filename indicates you&#39;re on Windows, where these values are not meaningful."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1549564577, "post_id": 54579573, "comment_id": 95957421, "body": "Can&#39;t do that in general.  An existing filehandle need not be associated with a file at all; could be a socket/pipe/etc.  Can you change how the files are opened in that program?  Then you can add a hash to keep track of them using <code>fileno</code> for instance"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1549565630, "post_id": 54579573, "comment_id": 95957932, "body": "Note: it is not filehandle<b>R</b> (with &quot;r&quot; at the end), it is filehandle (no &quot;r&quot;).  It&#39;s a handle -- something associated with a file and given to us, so that we can handle the file."}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1549568834, "post_id": 54579573, "comment_id": 95959346, "body": "Seconding @zdim&#39;s advice to use lexical filehandles, three-arg open, and error handling. The <a href=\"https://metacpan.org/pod/File::Open\" rel=\"nofollow noreferrer\">File::Open</a> module can wrap all of this up nicely for you, as well as modules like <a href=\"https://metacpan.org/pod/Path::Tiny\" rel=\"nofollow noreferrer\">Path::Tiny</a>."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1549605484, "post_id": 54579573, "comment_id": 95969986, "body": "@zdim, It&#39;s called a handle because it allows us to hold onto a system resource."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1549609733, "post_id": 54579573, "comment_id": 95971439, "body": "@ikegami Eh, I guess that&#39;s right.  I like to think of a &quot;handle&quot; being something that allows me to ... handle the thing. But I guess it allows me to hold it  .. um ... little circular"}], "answers": [{"tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": false, "score": 5, "last_activity_date": 1570440607, "last_edit_date": 1570440607, "creation_date": 1549565414, "answer_id": 54580288, "question_id": 54579573, "link": "https://stackoverflow.com/questions/54579573/how-to-determine-if-two-handles-refer-to-the-same-file/54580288#54580288", "title": "How to determine if two handles refer to the same file", "body": "<p>That can't be done in general (portably),<sup>&dagger;</sup> what is understandable given that a \"file\"handle need not be associated with a file at all.  One thing you can do is to record the <a href=\"https://perldoc.perl.org/functions/fileno.html\" rel=\"nofollow noreferrer\">fileno</a> for each filehandle.  </p>\n\n<p>So when opening a file</p>\n\n<pre><code>my %filename_fileno;\n\nopen my $fh, '&gt;', $file or die \"Can't open $file: $!\";\n\n$filename_fileno{fileno $fh} = $file;\n</code></pre>\n\n<p>and then you can look it up when needed <sup>&Dagger;</sup></p>\n\n<pre><code>say \"Filename is: \", $filename_fileno{fileno $fh};\n</code></pre>\n\n<p>Don't forget to remove the entry from the hash when that file is (to be) closed</p>\n\n<pre><code>delete $filename_fileno{fileno $fh};\nclose $fh;\n</code></pre>\n\n<p>So these should be in utility functions. Given that more care is needed, as outlined in the footnote <sup>&Dagger;</sup>, altogether this would make for a nice little module. Then one can also consider to extend (inherit from) a related module, like <a href=\"https://metacpan.org/pod/Path::Tiny\" rel=\"nofollow noreferrer\">Path::Tiny</a>.</p>\n\n<p>Note: You cannot write to a file from separate filehandles like in the question.  Operations on each filehandle keep track of where <em>that</em> filehandle was last in the file, thus writes will clobber intermediate writes by the other filehandle.</p>\n\n<p>Note:  Use lexical filehandles (<code>my $fh</code>) and not globs (<code>FH</code>), use the three-argument <code>open</code>, and <em>always check the <code>open</code> call</em>.</p>\n\n<hr>\n\n<p><sup>&dagger;</sup> &thinsp; On some (most?) Linux systems you can use <code>/proc</code> filesystem</p>\n\n<pre><code>say readlink(\"/proc/$$/fd/\" . fileno $fh);\n</code></pre>\n\n<p>and on more (all?) Unix-y systems can use the (device and) inode number</p>\n\n<pre><code>say for (stat $fh)[0,1];\n</code></pre>\n\n<hr>\n\n<p><sup>&Dagger;</sup> &thinsp; Links, both soft (symbolic) and hard, can be used to change the data and have different names. So we can have different filenames but same \"file\" (data). </p>\n\n<p>On Windows systems the best way to check is given in <a href=\"https://stackoverflow.com/a/50245729/4653379\">this post</a>, except for the hardlink case for which one would have to use the other answer's method (parse output), as far as I can tell.</p>\n\n<p>Also, non-canonical names, as well as different capitalizations (on case insensitive systems), short/long names on some systems, (more?) ... can make for different names for the same file. This is easier to clean up, using modules, but needs to be added as well.</p>\n\n<p>On most (all?) other systems the notion of inode and any available <code>stat</code>-like functionality makes these a non-issue, since device+inode refers uniquely to data.</p>\n\n<p>Thanks to <a href=\"https://stackoverflow.com/users/589924/ikegami\">ikegami</a> for comments on this.</p>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 2, "last_activity_date": 1549660856, "last_edit_date": 1549660856, "creation_date": 1549605629, "answer_id": 54586770, "question_id": 54579573, "link": "https://stackoverflow.com/questions/54579573/how-to-determine-if-two-handles-refer-to-the-same-file/54586770#54586770", "title": "How to determine if two handles refer to the same file", "body": "<p>Yes, on some system+device combinations, <code>stat</code> can be used.</p>\n\n<pre><code>use File::stat;\n\nmy $st1 = stat($fh1)\n   or die $!;\nmy $st2 = stat($fh2)\n   or die $!;\n\nsay $st1-&gt;dev == $st2-&gt;dev &amp;&amp; $st1-&gt;ino == $st2-&gt;ino ? \"same\" : \"different\";\n</code></pre>\n\n<p>Notably, this won't work on NTFS or FAT32, one of which you appear to be using.</p>\n\n<p>You should have your program keep track of that itself, but that's easier said than done. It's rather hard to identify if two paths refer to the same file when you have to contend with hard links, soft links, paths with <code>.</code>/<code>..</code>, capitalization/slash differences, short/long names, conventional/UNC paths, shares, etc.</p>\n\n<p>For example, all of the following paths could refer to the same file:</p>\n\n<ul>\n<li><code>C:\\Moo\\Foo Bar.txt</code></li>\n<li><code>C:\\Hardlink\\Foo Bar.txt</code></li>\n<li><code>C:\\Softlink\\Foo Bar.txt</code></li>\n<li><code>C:\\.\\Moo\\Foo Bar.txt</code></li>\n<li><code>C:\\Baz\\..\\Moo\\Foo Bar.txt</code></li>\n<li><code>c:\\moo\\foo bar.txt</code></li>\n<li><code>C:/Moo/Foo Bar.txt</code></li>\n<li><code>C:\\Moo\\FOOBAR~1.TXT</code></li>\n<li><code>\\\\?\\C:\\Moo\\Foo Bar.txt</code></li>\n<li><code>\\\\127.0.0.1\\C$\\Moo\\Foo Bar.txt</code></li>\n<li><code>Z:\\Moo\\Foo Bar.txt</code></li>\n</ul>\n\n<p>All but the last two can be handled via normalization.</p>\n"}], "owner": {"reputation": 43, "user_id": 5040519, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4f4e0697a52068e7dbc1e7f9412273ec?s=128&d=identicon&r=PG&f=1", "display_name": "fabrizio", "link": "https://stackoverflow.com/users/5040519/fabrizio"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 160, "favorite_count": 0, "answer_count": 2, "score": 3, "last_activity_date": 1570440607, "creation_date": 1549562583, "last_edit_date": 1549605877, "question_id": 54579573, "link": "https://stackoverflow.com/questions/54579573/how-to-determine-if-two-handles-refer-to-the-same-file", "title": "How to determine if two handles refer to the same file", "body": "<p>I would like to check if two file handles refer to the same file. In order to do this, can I use the <code>stat</code> function applied to each file handle?\nThanks in advance</p>\n\n<pre><code>my $file = 'C:\\temp\\file.txt');\nopen( TXT1, \"&gt; $file\" );\nopen( TXT2, \"&gt; $file\" );\nprint( \"The handles refer to the same file!\") if (\\TXT1 eq \\TXT2);\n</code></pre>\n"}, {"tags": ["perl"], "answers": [{"comments": [{"owner": {"reputation": 1652, "user_id": 4414367, "user_type": "registered", "accept_rate": 62, "profile_image": "https://lh3.googleusercontent.com/-l6uq-uiBGvg/AAAAAAAAAAI/AAAAAAAAAVA/F0AWblrmSTM/photo.jpg?sz=128", "display_name": "Kamal Nayan", "link": "https://stackoverflow.com/users/4414367/kamal-nayan"}, "edited": false, "score": 1, "creation_date": 1549559816, "post_id": 54578735, "comment_id": 95955006, "body": "Shouldn&#39;t it be <code>push @{$hashref-&gt;{$key}}, $value;</code>?"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 1, "creation_date": 1549560232, "post_id": 54578735, "comment_id": 95955233, "body": "I&#39;d recommend <code>while</code> over <code>foreach</code> here. That way, you only read the data a line at a time."}], "tags": [], "owner": {"reputation": 2347, "user_id": 1717259, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f70451a8ea5b380bf1a28fe529b190cc?s=128&d=identicon&r=PG", "display_name": "user1717259", "link": "https://stackoverflow.com/users/1717259/user1717259"}, "is_accepted": false, "score": 0, "last_activity_date": 1549560495, "last_edit_date": 1549560495, "creation_date": 1549559478, "answer_id": 54578735, "question_id": 54578558, "link": "https://stackoverflow.com/questions/54578558/create-a-mapping-hash-in-perl/54578735#54578735", "title": "Create a mapping hash in perl", "body": "<p>Iterate over the file line by line. For each value, push it into an array in a hashmap. The hashmap is keyed by your key values.</p>\n\n<p>This line <code>push @{$hashref-&gt;{$key}}, $value;</code></p>\n\n<p>If the key exists in the map already, pushes the value onto an array associated with that key. If not, an array is initialised with the value, and the map is inistialised with that key.</p>\n\n<pre><code>my $hashref;\nwhile(&lt;&gt;){\nchomp;\nmy ($key, $value) = split;\npush @{$hashref-&gt;{$key}}, $value;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1652, "user_id": 4414367, "user_type": "registered", "accept_rate": 62, "profile_image": "https://lh3.googleusercontent.com/-l6uq-uiBGvg/AAAAAAAAAAI/AAAAAAAAAVA/F0AWblrmSTM/photo.jpg?sz=128", "display_name": "Kamal Nayan", "link": "https://stackoverflow.com/users/4414367/kamal-nayan"}, "is_accepted": true, "score": 1, "last_activity_date": 1549559624, "creation_date": 1549559624, "answer_id": 54578777, "question_id": 54578558, "link": "https://stackoverflow.com/questions/54578558/create-a-mapping-hash-in-perl/54578777#54578777", "title": "Create a mapping hash in perl", "body": "<p>You may use an array to store all values for a key, below is demo program.</p>\n\n<pre><code>use Data::Dumper;    \nmy @key = qw/PY CH QQ TD TD TD TD TD ES HI HI/;\nmy @val = qw/AB BC CD EF IG IH RD GD SE VG NH/;\nmy $hash = {};\nfor (0..$#key) {\n    push @{$hash-&gt;{$key[$_]}}, $val[$_];\n}\nprint Dumper $hash;\n</code></pre>\n\n<p>Let's run it to see output:</p>\n\n<pre><code>$VAR1 = {\n          'HI' =&gt; [\n                    'VG',\n                    'NH'\n                  ],\n          'QQ' =&gt; [\n                    'CD'\n                  ],\n          'TD' =&gt; [\n                    'EF',\n                    'IG',\n                    'IH',\n                    'RD',\n                    'GD'\n                  ],\n          'PY' =&gt; [\n                    'AB'\n                  ],\n          'ES' =&gt; [\n                    'SE'\n                  ],\n          'CH' =&gt; [\n                    'BC'\n                  ]\n        };\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 7646, "user_id": 6867048, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b939fdb5809fed8097c38bdf4370747b?s=128&d=identicon&r=PG&f=1", "display_name": "stack0114106", "link": "https://stackoverflow.com/users/6867048/stack0114106"}, "is_accepted": false, "score": 2, "last_activity_date": 1549626419, "last_edit_date": 1549626419, "creation_date": 1549617872, "answer_id": 54589292, "question_id": 54578558, "link": "https://stackoverflow.com/questions/54578558/create-a-mapping-hash-in-perl/54589292#54589292", "title": "Create a mapping hash in perl", "body": "<p>Another Perl, using one-liner</p>\n\n<pre><code>perl -ne ' ($x,$y)=/(\\S+)\\s+(\\S+)/; if( exists($kv{$x})) { @t=@{$kv{$x}}; push(@t,$y);$kv{$x}=[@t] } else { $kv{$x}=[$y]} ; END { foreach(keys %kv) { if(ref($kv{$_}) eq \"ARRAY\" ) { print \"$_ =&gt; @{$kv{$_}}\\n\" } else { print \"$_ -&gt;$kv{$_}\\n\"  } }}' dev.txt\n</code></pre>\n\n<p>Output</p>\n\n<pre><code>HI =&gt; VG NH\nQQ =&gt; CD\nTD =&gt; EF IG IH RD GD\nPY =&gt; AB\nES =&gt; SE\nCH =&gt; BC\n</code></pre>\n"}], "owner": {"reputation": 5970, "user_id": 2618323, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/3Czph.jpg?s=128&g=1", "display_name": "Developer", "link": "https://stackoverflow.com/users/2618323/developer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 169, "favorite_count": 0, "accepted_answer_id": 54578777, "answer_count": 3, "score": 0, "last_activity_date": 1549626419, "creation_date": 1549558924, "question_id": 54578558, "link": "https://stackoverflow.com/questions/54578558/create-a-mapping-hash-in-perl", "title": "Create a mapping hash in perl", "body": "<p>I have 2 string from which i want to create a hash , first_string value will be key and second script  will be value for key. Below are the 2 diffrent string data.</p>\n\n<pre><code>First   Second\nPY       AB\nCH       BC\nQQ       CD\nTD       EF\nTD       IG\nTD       IH\nTD       RD\nTD       GD\nES       SE\nHI       VG\nHI       NH\n</code></pre>\n\n<p>From this data PY will be the key and it's value will AB , similarly for all of the them.</p>\n\n<p>But i want to handle a special case for a single key we have multiple values, like TD it has multiple values , in that i want to create an array\nlike \n<code>TD =[EF,IG,IH]</code> similarly  for all case where we will have this scenario </p>\n\n<p>Could you please suggest how we can handle this case in Perl .</p>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 33687, "user_id": 9624435, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/h44B4.jpg?s=128&g=1", "display_name": "Code Maniac", "link": "https://stackoverflow.com/users/9624435/code-maniac"}, "edited": false, "score": 0, "creation_date": 1549557482, "post_id": 54577823, "comment_id": 95953621, "body": "Have a look at this <a href=\"https://regex101.com/r/C24sBA/1/\" rel=\"nofollow noreferrer\">regex101.com/r/C24sBA/1</a>"}, {"owner": {"reputation": 1652, "user_id": 4414367, "user_type": "registered", "accept_rate": 62, "profile_image": "https://lh3.googleusercontent.com/-l6uq-uiBGvg/AAAAAAAAAAI/AAAAAAAAAVA/F0AWblrmSTM/photo.jpg?sz=128", "display_name": "Kamal Nayan", "link": "https://stackoverflow.com/users/4414367/kamal-nayan"}, "edited": false, "score": 0, "creation_date": 1549557698, "post_id": 54577823, "comment_id": 95953751, "body": "from your regex it seems that you don&#39;t want values from <code>bch x1.00003 y0.99988</code>. Is it?"}, {"owner": {"reputation": 357, "user_id": 3752927, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/f0d8aad08c87abac3043cf23f85cb3c9?s=128&d=identicon&r=PG&f=1", "display_name": "Alexglvr", "link": "https://stackoverflow.com/users/3752927/alexglvr"}, "edited": false, "score": 0, "creation_date": 1549557857, "post_id": 54577823, "comment_id": 95953836, "body": "I want it to work with all the shapes the line can have. So for this one I want to get $x=1.00003 and $y=0.99988"}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1549561047, "post_id": 54577823, "comment_id": 95955627, "body": "Consider the <code>decimal</code> regex from <a href=\"https://metacpan.org/pod/Regexp::Common::number\" rel=\"nofollow noreferrer\">Regexp::Common::number</a>"}, {"owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "reply_to_user": {"reputation": 82895, "user_id": 372239, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/2twLb.jpg?s=128&g=1", "display_name": "Toto", "link": "https://stackoverflow.com/users/372239/toto"}, "edited": false, "score": 0, "creation_date": 1549565981, "post_id": 54577823, "comment_id": 95958049, "body": "@Toto I&#39;m not sure if I agree with the verdict &quot;duplicate&quot;. The other question is different and the accepted answer only solves one part of OPs problem."}], "answers": [{"comments": [{"owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "edited": false, "score": 0, "creation_date": 1549558389, "post_id": 54578260, "comment_id": 95954144, "body": "still need to work on the reverse case though..."}, {"owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "edited": false, "score": 0, "creation_date": 1549559304, "post_id": 54578260, "comment_id": 95954718, "body": "Reverse case handled too now. Have fun."}], "tags": [], "owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "is_accepted": false, "score": 1, "last_activity_date": 1549565115, "last_edit_date": 1549565115, "creation_date": 1549557961, "answer_id": 54578260, "question_id": 54577823, "link": "https://stackoverflow.com/questions/54577823/perl-regexp-for-float/54578260#54578260", "title": "Perl REGEXP for float", "body": "<p>Maybe like this?</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\n\n# NOTE: change this if you need it to be more strict, e.g. should not match \"0\"\nmy $regex_float    = qr/\\d+(?:\\.\\d+)?/;\n\n# match: white space   + one letter      (group 1) +\n#        (optional) :  + floating number (group 2)\nmy $regex_variable = qr/\\s+(\\w):?(${regex_float})/;\n\nwhile (&lt;DATA&gt;) {\n    chomp;\n\n    #         applied multiple times\n    # returns list: g1, g2, g1, g2, ...\n    my %values =\n        map { uc }  # upper case variable name\n        ($_ =~ /${regex_variable}/g);\n\n    my $x = $values{X} // die \"can't find X on line '$_'\\n\";\n    my $y = $values{Y} // die \"can't find Y on line '$_'\\n\";\n\n    print \"$_ -&gt; (${x}, ${y})\\n\";\n}\n\nexit 0;\n\n__DATA__\n(ATT: X:0.0 Y:0.0)\n(ATT: X:0 Y:2.70823)\n(bch x1.00003 y0.99988)\n(ATT: Y:3.0 X:4.0)\nTime-space continuum with lazy and x: nast y: generator t:1.0 Y2.1 z3.2 x:4.3\n</code></pre>\n\n<p>Test output:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>$ perl dummy.pl\n(ATT: X:0.0 Y:0.0) -&gt; (0.0, 0.0)\n(ATT: X:0 Y:2.70823) -&gt; (0, 2.70823)\n(bch x1.00003 y0.99988) -&gt; (1.00003, 0.99988)\n(ATT: Y:3.0 X:4.0) -&gt; (4.0, 3.0)\nTime-space continuum with lazy and x: nast y: generator t:1.0 Y2.1 z3.2 x:4.3 -&gt; (4.3, 2.1)\n</code></pre>\n\n<p>NOTE: float regex taken from this <a href=\"https://stackoverflow.com/questions/51732041/perl-regex-to-extract-floating-number\">SO question</a></p>\n"}, {"tags": [], "owner": {"reputation": 1429, "user_id": 2170283, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/78338c6b71a8d6c214f57845d52e6641?s=128&d=identicon&r=PG", "display_name": "d g", "link": "https://stackoverflow.com/users/2170283/d-g"}, "is_accepted": false, "score": 1, "last_activity_date": 1549561255, "last_edit_date": 1549561255, "creation_date": 1549559797, "answer_id": 54578820, "question_id": 54577823, "link": "https://stackoverflow.com/questions/54577823/perl-regexp-for-float/54578820#54578820", "title": "Perl REGEXP for float", "body": "<p>This does the trick (switch the comments to test each):</p>\n\n<pre><code>$ cat file.pl\nuse strict;\n\n#my $str = '(ATT: X:0.0 Y:0.0)';\n#my $str = '(ATT: X:0 Y:2.70823)';\n#my $str = '(bch x1.00003 y0.99988)';\nmy $str = '(bch y1.00003 x0.99988)';\n\nmy %hash;\n\nif ( $str =~ /([xy]):*([\\d.]+)\\s+([xy]):*([\\d.]+)/i ) {\n   $hash{lc($1)} = $2;\n   $hash{lc($3)} = $4;\n\n   print \"X = \". $hash{'x'} . \"\\n\";\n   print \"Y = \". $hash{'y'} . \"\\n\";\n}\n\n\n$ perl file.pl\nX = 0.99988\nY = 1.00003\n</code></pre>\n"}], "owner": {"reputation": 357, "user_id": 3752927, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/f0d8aad08c87abac3043cf23f85cb3c9?s=128&d=identicon&r=PG&f=1", "display_name": "Alexglvr", "link": "https://stackoverflow.com/users/3752927/alexglvr"}, "delete_vote_count": 1, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 77, "favorite_count": 0, "closed_date": 1549561818, "answer_count": 2, "score": 0, "last_activity_date": 1549569280, "creation_date": 1549556696, "last_edit_date": 1549569280, "question_id": 54577823, "link": "https://stackoverflow.com/questions/54577823/perl-regexp-for-float", "closed_reason": "Duplicate", "title": "Perl REGEXP for float", "body": "<p>New to Perl, I try using REGEXP to get parameters from file lines.</p>\n\n<p>The corresponding line can take several forms :</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>(ATT: X:0.0 Y:0.0)\n(ATT: X:0 Y:2.70823)\n(bch x1.00003 y0.99988)\n</code></pre>\n\n<p>the goal is to retrieve the X and Y values.</p>\n\n<p>I wrote this</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>(($x, $xd, $y, $yd) = ($v =~ m/[xX][^0-9+-]*([+-]?\\d+(\\.\\d+)?)[^0-9+-yY]*[yY][^0-9+-]*([+-]?\\d+(\\.\\d+)?)/ ))\n</code></pre>\n\n<p>It works but I have to use 4 vars to achieve it</p>\n\n<p>Is there a better way?</p>\n\n<p>Furthermore, if we now consider that X and Y values can be reversed in the line for example </p>\n\n<pre class=\"lang-none prettyprint-override\"><code>(ATT: Y:0.0 X:0.0)\n</code></pre>\n\n<p>My solution does not work any more... Is there a solution that could work in all cases?</p>\n\n<p>Thank you for your help</p>\n"}, {"tags": ["perl", "cgi"], "answers": [{"comments": [{"owner": {"reputation": 1940, "user_id": 169287, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/1158b3457e0e53861ba6ee1aac772c39?s=128&d=identicon&r=PG", "display_name": "Derek", "link": "https://stackoverflow.com/users/169287/derek"}, "edited": false, "score": 0, "creation_date": 1549548877, "post_id": 54574878, "comment_id": 95948197, "body": "Brilliant! That worked. I&#39;m pulling apart someone&#39;s code from 2004 who seems to have been trained in the 1950&#39;s.  This is very hacky but I went with : if([param($p)]-&gt;[1]){ \t\t    $dataToReturn{$p} = [param($p)]-&gt;[1]; \t\t}else{ \t\t    $dataToReturn{$p} = [param($p)]-&gt;[0]; \t\t}"}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1549560481, "post_id": 54574878, "comment_id": 95955353, "body": "Note that using <code>param</code> in list context is deprecated, and you should use <code>multi_param</code> for this instead, to make it clear that you want a list. This attempts to avoid the case where it is accidentally used in a list context."}], "tags": [], "owner": {"reputation": 793701, "user_id": 19068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d2d3229ed1961d2bd81853242493247?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/19068/quentin"}, "is_accepted": true, "score": 3, "last_activity_date": 1549547446, "creation_date": 1549547446, "answer_id": 54574878, "question_id": 54574224, "link": "https://stackoverflow.com/questions/54574224/handle-post-data-sent-as-array/54574878#54574878", "title": "Handle POST data sent as array", "body": "<blockquote>\n  <p>I have an html form which sends a hidden field and a radio button with\n  the same name.</p>\n  \n  <p>This allows people to submit the form without picking from the list\n  (but records a zero answer).</p>\n</blockquote>\n\n<p>That's an odd approach. It would be easier to leave the hidden input out and treat the absence of the data as a zero answer.</p>\n\n<hr>\n\n<p>However, if you want to stick to your approach, read the documentation for <a href=\"https://metacpan.org/pod/distribution/CGI/lib/CGI.pod\" rel=\"nofollow noreferrer\">the CGI module</a>.</p>\n\n<p>Specifically, the <a href=\"https://metacpan.org/pod/distribution/CGI/lib/CGI.pod#Fetching-the-value-or-values-of-a-single-named-parameter\" rel=\"nofollow noreferrer\">documentation for param</a>:</p>\n\n<blockquote>\n  <p>When calling param() If the parameter is multivalued (e.g. from multiple selections in a scrolling list), you can ask to receive an array. Otherwise the method will return the first value.</p>\n</blockquote>\n\n<p>Thus:</p>\n\n<pre><code>$form{$p} = [ param($p) ]; \n</code></pre>\n\n<hr>\n\n<p>However, you do seem to be reinventing the wheel. There is a <a href=\"https://metacpan.org/pod/distribution/CGI/lib/CGI.pod#Fetching-the-parameter-list-as-a-hash\" rel=\"nofollow noreferrer\">built-in method to get a hash of all paramaters</a>:</p>\n\n<pre><code>$form = $CGI-&gt;new-&gt;Vars\n</code></pre>\n\n<hr>\n\n<p>That said, the documentation also says:</p>\n\n<blockquote>\n  <p>CGI.pm is no longer considered good practice for developing web applications, including quick prototyping and small web scripts. There are far better, cleaner, quicker, easier, safer, more scalable, more extensible, more modern alternatives available at this point in time. These will be documented with <a href=\"https://metacpan.org/pod/CGI::Alternatives\" rel=\"nofollow noreferrer\">CGI::Alternatives</a>.</p>\n</blockquote>\n\n<p>So you should migrate away from this anyway.</p>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 0, "last_activity_date": 1549606487, "creation_date": 1549606487, "answer_id": 54586928, "question_id": 54574224, "link": "https://stackoverflow.com/questions/54574224/handle-post-data-sent-as-array/54586928#54586928", "title": "Handle POST data sent as array", "body": "<p>Replace</p>\n\n<pre><code>$form{$p} = param($p);                             # Value of first field named $p\n</code></pre>\n\n<p>with</p>\n\n<pre><code>$form{$p} = ( multi_param($p) )[-1];               # Value of last field named $p\n</code></pre>\n\n<p>or</p>\n\n<pre><code>$form{$p} = ( grep length, multi_param($p) )[-1];  # Value of last field named $p\n                                                   # that has a non-blank value\n</code></pre>\n"}], "owner": {"reputation": 1940, "user_id": 169287, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/1158b3457e0e53861ba6ee1aac772c39?s=128&d=identicon&r=PG", "display_name": "Derek", "link": "https://stackoverflow.com/users/169287/derek"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 103, "favorite_count": 0, "accepted_answer_id": 54574878, "answer_count": 2, "score": 0, "last_activity_date": 1549606487, "creation_date": 1549545300, "question_id": 54574224, "link": "https://stackoverflow.com/questions/54574224/handle-post-data-sent-as-array", "title": "Handle POST data sent as array", "body": "<p>I have an html form which sends a hidden field and a radio button with the same name.</p>\n\n<p>This allows people to submit the form without picking from the list (but records a zero answer).</p>\n\n<p>When the user <em>does</em> select a radio button, the form posts BOTH the hidden value and the selected value.</p>\n\n<p>I'd like to write a perl function to convert the POST data to a hash. The following works for standard text boxes etc.</p>\n\n<pre><code>#!/usr/bin/perl\nuse CGI qw(:standard);\nsub GetForm{\n    %form;\n    foreach my $p (param()) {\n         $form{$p} = param($p); \n    }\n    return %form;\n}   \n</code></pre>\n\n<p>However when faced with two form inputs with the same name it just returns the first one (ie the hidden one)</p>\n\n<p>I can see that the inputs are included in the POST header as an array but I don't know how to process them.</p>\n\n<p>I'm working with legacy code so I can't change the form unfortunately!</p>\n\n<p>Is there a way to do this?</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 3, "creation_date": 1549539876, "post_id": 54572526, "comment_id": 95942849, "body": "If you mean whether changes in <code>mypackage.pm</code> get automatically loaded into a running <code>test.pl</code>, the answer is no. If you (re)start <code>test.pl</code> after saving changes to <code>mypackage.pm</code>, please show a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> that reproduces the problem. Most likely, you are not editing the file you think you want to edit."}, {"owner": {"reputation": 542, "user_id": 1667456, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/4c8f36624afa18b5bb13fc9d14dfdc9c?s=128&d=identicon&r=PG", "display_name": "Sim", "link": "https://stackoverflow.com/users/1667456/sim"}, "reply_to_user": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 0, "creation_date": 1549541159, "post_id": 54572526, "comment_id": 95943616, "body": "@Corion you my friend, could not be on the money more. Thank you."}], "answers": [{"comments": [{"owner": {"reputation": 542, "user_id": 1667456, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/4c8f36624afa18b5bb13fc9d14dfdc9c?s=128&d=identicon&r=PG", "display_name": "Sim", "link": "https://stackoverflow.com/users/1667456/sim"}, "edited": false, "score": 0, "creation_date": 1549539978, "post_id": 54572621, "comment_id": 95942919, "body": "When you say restart your program, I am just executing from command line inside a directory on linx i.e. sudo ./test.pl - what do I restart in this case? I am not using apache or anything I can restart, do I need to start a new terminal?"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 542, "user_id": 1667456, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/4c8f36624afa18b5bb13fc9d14dfdc9c?s=128&d=identicon&r=PG", "display_name": "Sim", "link": "https://stackoverflow.com/users/1667456/sim"}, "edited": false, "score": 0, "creation_date": 1549540226, "post_id": 54572621, "comment_id": 95943077, "body": "@Sim if your program end, and you start it again, it will load modules freshly from disk. I don&#39;t understand your problem."}, {"owner": {"reputation": 542, "user_id": 1667456, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/4c8f36624afa18b5bb13fc9d14dfdc9c?s=128&d=identicon&r=PG", "display_name": "Sim", "link": "https://stackoverflow.com/users/1667456/sim"}, "edited": false, "score": 1, "creation_date": 1549541141, "post_id": 54572621, "comment_id": 95943602, "body": "I am just really dumb... thanks for your help. I copied my scripts to another directory. When i edit mypackage.pm i was editing the copied one, however my script seemed to be referencing the original one, despite being in the same directory as the package i was editing."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 542, "user_id": 1667456, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/4c8f36624afa18b5bb13fc9d14dfdc9c?s=128&d=identicon&r=PG", "display_name": "Sim", "link": "https://stackoverflow.com/users/1667456/sim"}, "edited": false, "score": 0, "creation_date": 1549549495, "post_id": 54572621, "comment_id": 95948579, "body": "@Sim it happens to the best of us :)"}], "tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": true, "score": 2, "last_activity_date": 1549540183, "last_edit_date": 1549540183, "creation_date": 1549539869, "answer_id": 54572621, "question_id": 54572526, "link": "https://stackoverflow.com/questions/54572526/perl-script-not-updating-when-disk-code-changes-are-made/54572621#54572621", "title": "Perl script not updating when disk code changes are made", "body": "<p><strong>No.</strong></p>\n\n<p>When you start a Perl program, the perl compiler will read all the modules referenced in the program from disk, compile them and store the resulting opcode in memory. It will also remember which files it has already read (in <code>%INC</code>) so it does not read them again.</p>\n\n<p>There is a difference to <em>when</em> those files are read, but they are likely not significant here. If you <code>use</code> a module, it will be loaded at compile time, as in when the program starts. If you <code>require</code> a module, that can be inside of conditionals, and the file will be read when that code is executed at run time. That might be while the program starts up, or way later, or even never. Perl then switches back to compile time for that file to compile it, and then returns to run time.</p>\n\n<p>If you want to re-read a module that you use, you will typically have to restart your program.</p>\n\n<hr>\n\n<p>Having said that, there are some black magic implementations that allow you to re-load a module that has changed on disk. Unless you are building a daemon with insane start-up time and high throughput there is probably no need to use that.</p>\n\n<p>One of these modules is <a href=\"https://metacpan.org/pod/Module::Reload\" rel=\"nofollow noreferrer\">Module::Reload</a>. Its been around for a while and has recently seen some changes. Its See Also section points to further implementations, namely <a href=\"https://metacpan.org/pod/Module::Reload::Selective\" rel=\"nofollow noreferrer\">Module::Reload::Selective</a> and the <a href=\"https://metacpan.org/pod/again\" rel=\"nofollow noreferrer\">again</a> pragma.</p>\n\n<p>I have used neither of these and can't say if they work or how.</p>\n"}], "owner": {"reputation": 542, "user_id": 1667456, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/4c8f36624afa18b5bb13fc9d14dfdc9c?s=128&d=identicon&r=PG", "display_name": "Sim", "link": "https://stackoverflow.com/users/1667456/sim"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 239, "favorite_count": 0, "accepted_answer_id": 54572621, "answer_count": 1, "score": 0, "last_activity_date": 1549540183, "creation_date": 1549539549, "question_id": 54572526, "link": "https://stackoverflow.com/questions/54572526/perl-script-not-updating-when-disk-code-changes-are-made", "title": "Perl script not updating when disk code changes are made", "body": "<p>I have a perl package called mypackage.pm (that i have on disk)</p>\n\n<p>I have a script called test.pl</p>\n\n<p>Inside my test.pl I have the following statement</p>\n\n<pre><code>use mypackage;\n</code></pre>\n\n<p>Now why, when I make changes inside mypackage, are those changes are NOT reflected when running my test.pl script?</p>\n"}, {"tags": ["r", "shell", "perl", "variables"], "comments": [{"owner": {"reputation": 11741, "user_id": 1934428, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/072774c5d4204a1c2385560e6114a887?s=128&d=identicon&r=PG", "display_name": "user1934428", "link": "https://stackoverflow.com/users/1934428/user1934428"}, "edited": false, "score": 0, "creation_date": 1549539904, "post_id": 54572433, "comment_id": 95942865, "body": "You could pass the file names either as parameter to the script, or via environment variables."}, {"owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "edited": false, "score": 0, "creation_date": 1549544968, "post_id": 54572433, "comment_id": 95945917, "body": "Do you mean <code>perl perl_script.pl &lt;parameters for perl&gt; &#166; sh shell_script.sh &lt;parameters for shell&gt; &#166; r r_script.r &lt;parameters for r script&gt;</code> and you want to put that command line into another shell script? (assuming that perl &amp; shell script write to <code>stdout</code> and that shell &amp; R script read from <code>stdin</code>)"}, {"owner": {"reputation": 97, "user_id": 10907113, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99a903cad6d1fbf0597b3405521571b5?s=128&d=identicon&r=PG&f=1", "display_name": "ritz", "link": "https://stackoverflow.com/users/10907113/ritz"}, "reply_to_user": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "edited": false, "score": 0, "creation_date": 1549608570, "post_id": 54572433, "comment_id": 95970989, "body": "@StefanBecker I want to pass parameter one time only for shell script.   ./R.sh &lt;path and of input file&gt;  &lt; path amd name of output file&gt; .  R.sh is  first  calling one Perl script and then one R script."}, {"owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "edited": false, "score": 0, "creation_date": 1549608683, "post_id": 54572433, "comment_id": 95971026, "body": "Please provide <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>, in your case at least the contents of <code>R.sh</code>"}, {"owner": {"reputation": 97, "user_id": 10907113, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99a903cad6d1fbf0597b3405521571b5?s=128&d=identicon&r=PG&f=1", "display_name": "ritz", "link": "https://stackoverflow.com/users/10907113/ritz"}, "reply_to_user": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "edited": false, "score": 0, "creation_date": 1549609482, "post_id": 54572433, "comment_id": 95971337, "body": "@StefanBecker see edits"}, {"owner": {"reputation": 13767, "user_id": 2413201, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/rxfuw.jpg?s=128&g=1", "display_name": "Armali", "link": "https://stackoverflow.com/users/2413201/armali"}, "edited": false, "score": 0, "creation_date": 1549616158, "post_id": 54572433, "comment_id": 95973941, "body": "What do you mean by <i>output of Perl script</i> - the standard output (which would be just the prompt), or the files <code>cel_files.txt</code> and <code>temp.txt</code> (which contain only a list of pathnames, wherefore a Perl script is overkill)? Neither is used by your code as <i>input for Shell script</i>, so you didn&#39;t post the real scripts."}, {"owner": {"reputation": 97, "user_id": 10907113, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99a903cad6d1fbf0597b3405521571b5?s=128&d=identicon&r=PG&f=1", "display_name": "ritz", "link": "https://stackoverflow.com/users/10907113/ritz"}, "reply_to_user": {"reputation": 13767, "user_id": 2413201, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/rxfuw.jpg?s=128&g=1", "display_name": "Armali", "link": "https://stackoverflow.com/users/2413201/armali"}, "edited": false, "score": 0, "creation_date": 1549616338, "post_id": 54572433, "comment_id": 95974027, "body": "@Armali This is only the head part of R.pl"}, {"owner": {"reputation": 13767, "user_id": 2413201, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/rxfuw.jpg?s=128&g=1", "display_name": "Armali", "link": "https://stackoverflow.com/users/2413201/armali"}, "edited": false, "score": 0, "creation_date": 1549616801, "post_id": 54572433, "comment_id": 95974271, "body": "If you show only a part of the script, you shall show the relevant part. Again, what is the <i>output of Perl script</i>? What has the directory name prompted for by the Perl script have to do with the <i>input file name</i> you want to give? Where does the <i>output file name</i> come into play? What are <code>&#47;media&#47;data&#47;abc.cnv</code> and <code>&#47;media&#47;data&#47;abc1.txt</code> with respect to this all?"}], "answers": [{"comments": [{"owner": {"reputation": 97, "user_id": 10907113, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99a903cad6d1fbf0597b3405521571b5?s=128&d=identicon&r=PG&f=1", "display_name": "ritz", "link": "https://stackoverflow.com/users/10907113/ritz"}, "edited": false, "score": 0, "creation_date": 1549613732, "post_id": 54587838, "comment_id": 95972906, "body": "Please see edits : My code take the path of file Now I want to modifies it what changes are required in Perl script."}, {"owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "reply_to_user": {"reputation": 97, "user_id": 10907113, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99a903cad6d1fbf0597b3405521571b5?s=128&d=identicon&r=PG&f=1", "display_name": "ritz", "link": "https://stackoverflow.com/users/10907113/ritz"}, "edited": false, "score": 0, "creation_date": 1549613971, "post_id": 54587838, "comment_id": 95973011, "body": "It is a bad idea to hard-code file paths in scripts. Instead either read/write to STDIN/STDOUT or accept the file names as command line parameters. I think this is the root cause of your problem."}], "tags": [], "owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "is_accepted": true, "score": 0, "last_activity_date": 1549623339, "last_edit_date": 1549623339, "creation_date": 1549611245, "answer_id": 54587838, "question_id": 54572433, "link": "https://stackoverflow.com/questions/54572433/how-to-give-output-location-of-file-in-shell-script/54587838#54587838", "title": "How to give output location of file in shell script?", "body": "<p>I guess this is what you want:</p>\n\n<pre class=\"lang-bash prettyprint-override\"><code>#!/bin/bash\n# command line parameters\n_input_file=$1\n_output_file=$2\n\n# @TODO: not sure if this path is the one you intended...\n_script_path=$(dirname $0)\n\n# sanity checks\nif [[ -z \"${_input_file}\"  ]] ||\n   [[ -z \"${_output_file}\" ]]; then\n    echo 1&gt;&amp;2 \"usage: $0 &lt;input file&gt; &lt;output file&gt;\"\n    exit 1\nfi\nif [[ ! -r \"${_input_file}\" ]]; then\n    echo 1&gt;&amp;2 \"ERROR: can't find input file '${input_file}'!\"\n    exit 1\n fi\n\n # process input file\n # 1. with Perl script (writes to STDOUT)\n # 2. post-process with Perl filter\n # 3. run R script (reads from STDIN, writes to STDOUT)\n perl ${_script_path}/R.pl &lt;\"${_input_file}\"      | \\\n     perl -lane 'print $F[0]'                     | \\\n     Rscript ${_script_path}/R.r &gt;\"${_output_file}\"\n\n exit 0\n</code></pre>\n\n<p>Please see the notes how the called scripts should behave.</p>\n\n<p><strong>NOTE:</strong> I don't quite understand why you need to post-process the output of the Perl script with Perl filter. Why not integrate it directly into the Perl script itself?</p>\n\n<hr>\n\n<p><strong>BONUS CODE:</strong> this is how you would write the main loop in <code>R.pl</code> to act as proper filter, i.e. reading lines from <code>STDIN</code> and writing the result to <code>STDOUT</code>. You can use the same approach also in other languages, e.g. R.</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\n\n# read lines from STDIN\nwhile (&lt;STDIN&gt;) {\n    chomp;\n\n    # add your processing code here that does something with $_, i.e. the line\n    # EXAMPLE: upper case first letter in all words on the line\n    s/\\b([[:lower:]])/\\U\\1/;\n\n    # write result to STDOUT\n    print \"$_\\n\";\n}\n</code></pre>\n"}], "owner": {"reputation": 97, "user_id": 10907113, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99a903cad6d1fbf0597b3405521571b5?s=128&d=identicon&r=PG&f=1", "display_name": "ritz", "link": "https://stackoverflow.com/users/10907113/ritz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 825, "favorite_count": 0, "accepted_answer_id": 54587838, "answer_count": 1, "score": -1, "last_activity_date": 1549885934, "creation_date": 1549539215, "last_edit_date": 1549885934, "question_id": 54572433, "link": "https://stackoverflow.com/questions/54572433/how-to-give-output-location-of-file-in-shell-script", "title": "How to give output location of file in shell script?", "body": "<p>I have a a Shell script that contain a Perl script and R script.</p>\n\n<p>my Shell script R.sh:- </p>\n\n<pre><code>#!/bin/bash\n./R.pl                               #calling Perl script\n`perl -lane 'print $F[0]' /media/data/abc.cnv &gt; /media/data/abc1.txt`;\n                                     #Shell script\n Rscript R.r                         #calling R script\n</code></pre>\n\n<p>This is my R.pl (head):-</p>\n\n<pre><code>`export path=$PATH:/media/exe_folder/bin`;\nprint \"Enter the path to your input file:\";\n$base_dir =\"/media/exe_folder\";\nchomp($CEL_dir = &lt;STDIN&gt;);\nopendir (DIR, \"$CEL_dir\") or die \"Couldn't open directory $CEL_dir\";\n$cel_files = \"$CEL_dir\".\"/cel_files.txt\";\nopen(CEL,\"&gt;$cel_files\")|| die \"cannot open $file to write\";\nprint CEL \"cel_files\\n\";\nfor ( grep { /^[\\w\\d]/ } readdir DIR ){\n\nprint CEL \"$CEL_dir\".\"/$_\\n\";\n}close (CEL);\n</code></pre>\n\n<p>The output of Perl script is input for Shell script and Shell's output is input for R script.</p>\n\n<p>I want to run the Shell script by providing the input file name and output file name like :-</p>\n\n<pre><code>./R.sh  home/folder/inputfile.txt  home/folder2/output.txt\n</code></pre>\n\n<p>If  folder contain many files then it will take only user define file and process it.\nIs There is a way to do this?   </p>\n"}, {"tags": ["windows", "perl", "cmd", "cygwin"], "comments": [{"owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "edited": false, "score": 0, "creation_date": 1549539506, "post_id": 54571969, "comment_id": 95942618, "body": "EMSIA? <a href=\"https://metacpan.org/pod/Expect#What-systems-does-Expect-run-on?\" rel=\"nofollow noreferrer\">Expect FAQ</a>: &quot;Expect itself doesn&#39;t have real system dependencies, but the underlying IO::Tty needs pseudoterminals. IO::Stty uses POSIX.pm and Fcntl.pm.&quot; Then follows a note to check <a href=\"https://metacpan.org/pod/IO::Tty\" rel=\"nofollow noreferrer\">IO::Tty</a>"}, {"owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "edited": false, "score": 2, "creation_date": 1549539571, "post_id": 54571969, "comment_id": 95942662, "body": "<a href=\"https://metacpan.org/pod/IO::Tty\" rel=\"nofollow noreferrer\">IO::Tty</a>: &quot;Windows is now supported, but ONLY under the Cygwin environment&quot;. I guess this sums up the answer to your question."}, {"owner": {"reputation": 9869, "user_id": 1147688, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/c76a3f29c105a73c4060b3d1934ccd9a?s=128&d=identicon&r=PG", "display_name": "not2qubit", "link": "https://stackoverflow.com/users/1147688/not2qubit"}, "edited": false, "score": 1, "creation_date": 1549870949, "post_id": 54571969, "comment_id": 96043959, "body": "Instead of CMD, you can also try by installing the latest <i>PowerShell Core</i> (PWSH &gt; 6.2). AFAIK PWSH in Win10 environment should now be able to use Pty&#39;s. But I must admit, I have not tested this."}], "answers": [{"comments": [{"owner": {"reputation": 83, "user_id": 9013966, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92d43193cd79adf3dfcf725f321af357?s=128&d=identicon&r=PG&f=1", "display_name": "SomeOne", "link": "https://stackoverflow.com/users/9013966/someone"}, "edited": false, "score": 0, "creation_date": 1549541933, "post_id": 54572639, "comment_id": 95944044, "body": "Thank you stefan for the references, i will refer them.. Actually i am trying to run on eclipse as well setting the preference to cgywin (windows -&gt; preference -&gt; perl -&gt; interpreter type: cygwin). which actually worked in past .. recently i had to re-install the whole setup .. and thus, came across and stuck with this error"}], "tags": [], "owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "is_accepted": false, "score": 2, "last_activity_date": 1549539925, "last_edit_date": 1592644375, "creation_date": 1549539925, "answer_id": 54572639, "question_id": 54571969, "link": "https://stackoverflow.com/questions/54571969/sshauthenticationerror-occurs-when-executed-perl-script-through-windows-cmd/54572639#54572639", "title": "SSHAuthenticationError occurs when executed perl script through windows CMD", "body": "<blockquote>\n<p>... Pseudo-terminal will not be allocated <strong>because stdin is not a terminal</strong>. ...\n<em>Expect.pm</em></p>\n</blockquote>\n<p>I guess the answer to this error message can be found from the documentation:</p>\n<p><a href=\"https://metacpan.org/pod/Expect#What-systems-does-Expect-run-on?\" rel=\"nofollow noreferrer\">Expect FAQ</a></p>\n<blockquote>\n<p>Expect itself doesn't have real system dependencies, but the underlying <code>IO::Tty</code> needs pseudoterminals. ...</p>\n<p>See <code>IO::Tty</code> for a list of verified systems.</p>\n</blockquote>\n<p>and <a href=\"https://metacpan.org/pod/IO::Tty\" rel=\"nofollow noreferrer\">IO::Tty</a></p>\n<blockquote>\n<p>Windows is now supported, but ONLY under the Cygwin environment, ...</p>\n</blockquote>\n"}], "owner": {"reputation": 83, "user_id": 9013966, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92d43193cd79adf3dfcf725f321af357?s=128&d=identicon&r=PG&f=1", "display_name": "SomeOne", "link": "https://stackoverflow.com/users/9013966/someone"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 59, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1549539925, "creation_date": 1549537726, "question_id": 54571969, "link": "https://stackoverflow.com/questions/54571969/sshauthenticationerror-occurs-when-executed-perl-script-through-windows-cmd", "title": "SSHAuthenticationError occurs when executed perl script through windows CMD", "body": "<p>I am trying to execute a perl script which using \"Net::SSH::Expect\" module.</p>\n\n<p>the problem that am facing is that , when i execute the script through Cygwin, it works like a charm .. but the same script when executed over windows CMD , it fails giving the below error -></p>\n\n<pre><code>SSHAuthenticationError Login timed out. The input stream currently has the contents bellow: Pseudo-terminal will not be allocated because stdin is not a terminal.\nat /usr/local/share/perl5/site_perl/5.26/Expect.pm line 904.\n</code></pre>\n\n<p>could you please suggest what have i missed?</p>\n"}, {"tags": ["perl", "dynamic", "substitution"], "comments": [{"owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "edited": false, "score": 0, "creation_date": 1549529396, "post_id": 54569131, "comment_id": 95936732, "body": "Obviously <code>qr&#47;(?X:)...&#47;</code> doesn&#39;t work for substitution-only modifiers like <code>&#47;g</code>: <code>Useless (?g) - use &#47;g modifier in regex; marked by &lt;-- HERE in m&#47;(?g &lt;-- HERE :)</code>"}], "answers": [{"comments": [{"owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "edited": false, "score": 0, "creation_date": 1549534415, "post_id": 54569663, "comment_id": 95939564, "body": "Updated code to also handle <code>&#47;e</code>+. Update the test example to include <code>&#47;e</code>."}], "tags": [], "owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "is_accepted": true, "score": 2, "last_activity_date": 1549534328, "last_edit_date": 1549534328, "creation_date": 1549530199, "answer_id": 54569663, "question_id": 54569131, "link": "https://stackoverflow.com/questions/54569131/how-to-create-dynamically-a-substitution/54569663#54569663", "title": "How to create dynamically a substitution?", "body": "<p><code>qr/(?X:).../</code> doesn't work for operation-only modifiers like <code>/g</code>.</p>\n\n<p>A possible approach would be:</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\n\nmy $str = 'aaBaabaabaa';\n\nprint \"BEFORE: ${str}\\n\";\n\n# regex configuration\nmy $pattern     = '(.)(.)'; # 'b';\nmy $replacement = '\"$2$1\"'; # '';\nmy $mod         = 'ieg';    # 'g';\n\n# extract operation-only modifiers\nmy $operation_only = qr/([ge])/;\nmy %special;\n$special{$_}++ foreach ($mod =~ /$operation_only/g);\nmy $mod_filtered;\n($mod_filtered = $mod) =~ s/$operation_only//g;\n\n# generate regex\nmy $regex    = \"(?${mod_filtered}:${pattern})\";\nmy $compiled = qr/$regex/;\nprint \"s/ ${regex} -&gt; ${compiled} / ${replacement} / $mod -&gt; \", join('', sort keys %special), \"\\n\";\n\n# execute substitution\nmy $replacement_code = sub { return $replacement };\nfor (1..$special{e} // 0) {\n    my $recurse = $replacement_code;\n    $replacement_code = sub { return eval $recurse-&gt;() };\n}\n\nif (exists $special{g}) {\n    $str =~ s/$compiled/$replacement_code-&gt;()/ge;\n} else {\n    $str =~ s/$compiled/$replacement_code-&gt;()/e;\n}\n\nprint \"AFTER:  ${str}\\n\";\n\nexit 0;\n</code></pre>\n\n<p>Output:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>$ perl dummy.pl\nBEFORE: aaBaabaabaa\ns/ (?i:(.)(.)) -&gt; (?^:(?i:(.)(.))) / \"$2$1\" / ieg -&gt; eg\nAFTER:  aaaBbaaaaba\n</code></pre>\n"}], "owner": {"reputation": 21019, "user_id": 198183, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/52f281a988bae754991af26224c796af?s=128&d=identicon&r=PG", "display_name": "sid_com", "link": "https://stackoverflow.com/users/198183/sid-com"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 55, "favorite_count": 0, "accepted_answer_id": 54569663, "answer_count": 1, "score": 2, "last_activity_date": 1549534328, "creation_date": 1549528196, "question_id": 54569131, "link": "https://stackoverflow.com/questions/54569131/how-to-create-dynamically-a-substitution", "title": "How to create dynamically a substitution?", "body": "<p>How could I add dynamically a modifier to a substitution?</p>\n\n<pre><code>my $str = 'aaBaabaabaa';\nmy $mod = 'g';\n$str =~ s/b// + $mod;\n</code></pre>\n"}, {"tags": ["perl", "sockets"], "comments": [{"owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "edited": false, "score": 1, "creation_date": 1549523268, "post_id": 54567530, "comment_id": 95934011, "body": "Please do add <code>use strict;</code> and <code>use warnings;</code> do your code. Then fix the errors reported and update your question."}, {"owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "edited": false, "score": 0, "creation_date": 1549523442, "post_id": 54567530, "comment_id": 95934075, "body": "Several problems with your code: (a) you do not check how many bytes <code>recv()</code> does return. It may be less then you requested, (b) JSON decode returns refs, i.e. it should be <code>my $json = json_decode($response);</code> and <code>switch($json-&gt;{type}) {</code>"}, {"owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "edited": false, "score": 0, "creation_date": 1549524000, "post_id": 54567530, "comment_id": 95934315, "body": "You also use <code>recv()</code> on a <code>SOCK_STREAM</code> socket."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1549526141, "post_id": 54567530, "comment_id": 95935208, "body": "Shouldn&#39;t the messages you send be length-prefixed like the ones you received?"}], "answers": [{"comments": [{"owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "edited": false, "score": 0, "creation_date": 1549527064, "post_id": 54568305, "comment_id": 95935603, "body": "Sorry, missed the <code>print $socket</code> hidden in the code. Updated my answer."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1549607319, "post_id": 54568305, "comment_id": 95970564, "body": "Tip: <code>pack(&#39;Na*&#39;, length($resp_json), $resp_json)</code> can be shortened to <code>pack(&#39;N&#47;a*&#39;, $resp_json);</code>"}], "tags": [], "owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "is_accepted": false, "score": 2, "last_activity_date": 1549526965, "last_edit_date": 1549526965, "creation_date": 1549524625, "answer_id": 54568305, "question_id": 54567530, "link": "https://stackoverflow.com/questions/54567530/perl-socket-programing-send-method/54568305#54568305", "title": "Perl socket programing send method", "body": "<ul>\n<li>You can't assume the <code>recv</code> (or <code>read</code>) will return the entire response. You need to call it repeatedly.</li>\n<li>You can't assume the <code>recv</code> (or <code>read</code>) will just the response. You need to limit the size of the read of buffer the excess.</li>\n<li><code>decode_json</code> returns a reference (not a list of key-value pairs you can assign to a hash).</li>\n<li>You might also have to handle encoding of the JSON string. The example below assumes UTF-8 encoding.</li>\n<li>JSON response to the server (<code>case 2</code> in the original code) needs to include length too.</li>\n</ul>\n\n<p>The following code should be used instead:</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\n\nuse JSON;\nuse IO::Socket;\n\nmy $socket = IO::Socket::INET-&gt;new(\n    PeerHost =&gt; '127.0.0.1',\n    PeerPort =&gt; '22',\n    Proto    =&gt; 'tcp',\n) or\n    die \"cannot connect to the server $!\\n\";\n\nprint \"connected to the server\\n\";\n\nsub read_bytes($$) {\n    my($socket, $length) = @_;\n    my $result = '';\n    print \"ATTEMPT TO READ ${length}\\n\";\n    while ($length &gt; 0) {\n        my $received = $socket-&gt;read($result, $length, length($result));\n        die \"socket error: $!\\n\" unless defined($received);\n        die \"unexpected EOF\\n\"   unless $received;\n        $length -= $received;\n    }\n\n    print \"READ '${result}'\\n\";\n    return($result);\n}\n\nwhile (1) {\n    my $length = unpack(\"N\", read_bytes($socket, 4));\n    my $json   = read_bytes($socket, $length);\n    my $data   = JSON-&gt;new-&gt;utf8-&gt;decode($json);\n\n    print $data-&gt;{type}, \"\\n\";\n\n    if ($data-&gt;{type} == 2) {\n        my $response = {\n            type  =&gt; 0,\n            point =&gt; [5, 4],\n        };\n        my $resp_json = JSON-&gt;new-&gt;utf8-&gt;encode($response);\n        print \"JSON:   ${resp_json}\\n\";\n\n        my $packet = pack('NA*', length($resp_json), $resp_json);\n        print \"PACKET: \", unpack('H*', $packet), \"\\n\";\n\n        $socket-&gt;write($packet);\n    }\n}\n</code></pre>\n\n<p>As I don't have access to your server I used <code>sshd</code> on my local machine, which of course does not send me a JSON. But it shows that reading works :-)</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>$ perl dummy.pl\nconnected to the server\nATTEMPT TO READ 4\nREAD 'SSH-'\nATTEMPT TO READ 1397966893\n^C\n</code></pre>\n\n<p>Output for an example response to the server would be:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>JSON:   {\"type\":0,\"point\":[5,4]}\nPACKET: 000000187b2274797065223a302c22706f696e74223a5b352c345d7d\n</code></pre>\n"}], "owner": {"reputation": 45, "user_id": 11023814, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QQM9P.png?s=128&g=1", "display_name": "SAnji Holic", "link": "https://stackoverflow.com/users/11023814/sanji-holic"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 384, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1549526965, "creation_date": 1549521078, "last_edit_date": 1549523044, "question_id": 54567530, "link": "https://stackoverflow.com/questions/54567530/perl-socket-programing-send-method", "title": "Perl socket programing send method", "body": "<p>I am making socket programming for simple communication now.</p>\n\n<p>I have noticed that the server is not the one I created and it works fine (given the experimental client)</p>\n\n<p>In my code, recv works fine, but send does not work. Is there anything wrong with my code?</p>\n\n<pre><code>my $socket = new IO::Socket::INET (\n    #PeerHost =&gt; '127.0.0.1',\n    PeerHost =&gt; '192.168.0.100',\n    PeerPort =&gt; '8472',\n    Proto =&gt; 'tcp',\n);\ndie \"cannot connect to the server $!\\n\" unless $socket;\nprint \"connected to the server\\n\";\n\nwhile (1) {\n    my $response = \"\";\n    $socket-&gt;recv($response, 1024);\n    if ($response) {\n        my @test = split(//,$response);\n        my ($length,$data) = unpack(\"N A*\",$response);\n        %json = json_decode($data,$length);\n\n        switch ($json{'type'}) {\n            case 1 { print \"Game Start\\n\";}\n            #case 2 { my $tmp = &amp;my_turn(%json);} #my_turn func is return  \"{'type': 0, 'point': [5, 4]}\", but fail!\n            #case 2 { $socket-&gt;send(\"{'type': 0, 'point': [5, 4]}\");} # fail!\n            case 2 { print $socket \"{'type': 0, 'point': [5, 4]}\"; print \"ok\\n\";} # print is executed. However, the server does not receive packets\n            #case 2 { $socket-&gt;send(\"{'type': 0, 'point': [5, 4]}\");} #fail...\n            case 3 { print \"ACCEPT\\n\";}\n            case 5 { print \"NOPOINT\\n\";}\n            case 6 { print \"GAMEOVER\\n\";}\n            case 7 { print \"ERROR\\n\";}\n            else {print \"ERROR type : $json{'type'}\\n\"}\n        }\n    }\n}\n</code></pre>\n\n<p>The server works fine. I checked with the example source (python code) given with the server. What am I missing?</p>\n"}, {"tags": ["perl", "assignment-operator"], "comments": [{"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 0, "creation_date": 1549503586, "post_id": 54564428, "comment_id": 95928930, "body": "could you add an explicit question?  there isn&#39;t one"}, {"owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 0, "creation_date": 1549513071, "post_id": 54564428, "comment_id": 95930755, "body": "<code>my ($first) = @array</code>"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 0, "creation_date": 1549513655, "post_id": 54564428, "comment_id": 95930878, "body": "@ysth, Technically, there are 8 questions. But feel free to rewrite."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 0, "creation_date": 1549514678, "post_id": 54564428, "comment_id": 95931111, "body": "@mob, Of course! Added"}], "answers": [{"comments": [{"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 0, "creation_date": 1549503430, "post_id": 54564429, "comment_id": 95928890, "body": "change to say just array or hash or array or hash slice, to be inclusive of the postderef syntax"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 0, "creation_date": 1549513850, "post_id": 54564429, "comment_id": 95930914, "body": "@ysth, Ah yes, those didn&#39;t exists when this was <a href=\"https://www.perlmonks.org/?node_id=790129\" rel=\"nofollow noreferrer\">originally written</a>"}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 6, "last_activity_date": 1564867786, "last_edit_date": 1564867786, "creation_date": 1549497649, "answer_id": 54564429, "question_id": 54564428, "link": "https://stackoverflow.com/questions/54564428/scalar-vs-list-assignment-operator/54564429#54564429", "title": "Scalar vs List Assignment Operator", "body": "<p>The symbol <code>=</code> is compiled into one of two assignment operators:</p>\n\n<ul>\n<li>A <em>list assignment operator</em> (<code>aassign</code>) is used if the left-hand side (LHS) of a <code>=</code> is some kind of aggregate.</li>\n<li>A <em>scalar assignment operator</em> (<code>sassign</code>)  is used otherwise.</li>\n</ul>\n\n<p>The following are considered to be aggregates:</p>\n\n<ul>\n<li>Any expression in parentheses (e.g. <code>(...)</code>)</li>\n<li>An array (e.g. <code>@array</code>)</li>\n<li>An array slice (e.g. <code>@array[...]</code>)</li>\n<li>A hash (e.g. <code>%hash</code>)</li>\n<li>A hash slice (e.g. <code>@hash{...}</code>)</li>\n<li>Any of the above preceded by <code>my</code>, <code>our</code> or <code>local</code></li>\n</ul>\n\n<p>There are two differences between the operators.</p>\n\n<h2>Context of Operands</h2>\n\n<p>The two operators differ in the context in which their operands are evaluated.</p>\n\n<ul>\n<li><p>The scalar assignment evaluates both of its operands in scalar context.</p>\n\n<pre><code># @array evaluated in scalar context.\nmy $count = @array;\n</code></pre></li>\n<li><p>The list assignment evaluates both of its operands in list context.</p>\n\n<pre><code># @array evaluated in list context.\nmy @copy = @array;\n</code></pre>\n\n<p>&#x20;</p>\n\n<pre><code># @array evaluated in list context.\nmy ($first) = @array;\n</code></pre></li>\n</ul>\n\n<h2>Value(s) Returned</h2>\n\n<p>The two operators differ in what they return.</p>\n\n<ul>\n<li><p>The scalar assignment ...</p>\n\n<ul>\n<li><p>... in scalar context evaluates to its LHS as an lvalue.</p>\n\n<pre><code># The s/// operates on $copy.\n(my $copy = $str) =~ s/\\\\/\\\\\\\\/g;\n</code></pre></li>\n<li><p>... in list context evaluates to its LHS as an lvalue.</p>\n\n<pre><code># Prints $x.\nprint($x = $y);\n</code></pre></li>\n</ul></li>\n<li><p>The list assignment ...</p>\n\n<ul>\n<li><p>... in scalar context evaluates to the number of scalars returned by its RHS.</p>\n\n<pre><code># Only dies if f() returns an empty list.\n# This does not die if f() returns a\n# false scalar like zero or undef.\nmy ($x) = f() or die;\n</code></pre>\n\n<p>&#x20;</p>\n\n<pre><code># $counts gets the number of scalars returns by f().\nmy $count = () = f();\n</code></pre></li>\n<li><p>... in list context evaluates to the scalars returned by its LHS as lvalues.</p>\n\n<pre><code># Prints @x.\nprint(@x = @y);\n</code></pre></li>\n</ul></li>\n</ul>\n"}], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 221, "favorite_count": 3, "accepted_answer_id": 54564429, "answer_count": 1, "score": 5, "last_activity_date": 1564867786, "creation_date": 1549497649, "last_edit_date": 1549514790, "question_id": 54564428, "link": "https://stackoverflow.com/questions/54564428/scalar-vs-list-assignment-operator", "title": "Scalar vs List Assignment Operator", "body": "<p>Please help me understand the following snippets:</p>\n\n<ul>\n<li><code>my $count = @array;</code></li>\n<li><code>my @copy = @array;</code></li>\n<li><code>my ($first) = @array;</code></li>\n<li><code>(my $copy = $str) =~ s/\\\\/\\\\\\\\/g;</code></li>\n<li><code>my ($x) = f() or die;</code></li>\n<li><code>my $count = () = f();</code></li>\n<li><code>print($x = $y);</code></li>\n<li><code>print(@x = @y);</code></li>\n</ul>\n"}]