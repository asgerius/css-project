[{"tags": ["perl", "typescript"], "comments": [{"owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 0, "creation_date": 1531941308, "post_id": 51409432, "comment_id": 89790322, "body": "Why backslashes in the path? Is this a Windows application? If it is windows, why doesn&#39;t the path have a drive specification (i.e., path=<code>C:\\frmsgfxauto4\\...</code>)?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 1, "creation_date": 1531942415, "post_id": 51409432, "comment_id": 89790823, "body": "@mob, It&#39;s a Windows UNC path (<code>\\\\foo\\bar\\...</code>), but <code>\\\\ </code> is being rendered as <code>\\ </code> until the edit is approved"}], "answers": [{"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 3, "last_activity_date": 1531942238, "creation_date": 1531942238, "answer_id": 51409706, "question_id": 51409432, "link": "https://stackoverflow.com/questions/51409432/preserving-spaces-in-path-variable-names/51409706#51409706", "title": "Preserving spaces in path variable names", "body": "<p>In double-quoted string literals, of the characters present, <code>\\</code> and <code>$</code> need escaping.</p>\n\n<pre><code>my $pathg = \"\\\\\\\\fmsgfxauto4\\\\mediatests\\$\\\\ATS-MediaTests\\\\Tests\\\\Media\\\\Video\\\\Decoder-Streams\\\\AVC\\\\Suite\\\\VClips\\\\Main_Profile\\\\VC-303-A D-Traffic-AVC-MP\\\\FunctionalTests\\\\V30313_B_D-Traffic_AVC_MP_num_ref_frames_6\";\n</code></pre>\n\n<p>In single-quoted string literals, of the characters present, <code>\\</code> may be escaped, but it's only required if it's followed by another <code>\\</code>. </p>\n\n<pre><code>my $pathg = '\\\\\\\\fmsgfxauto4\\\\mediatests$\\\\ATS-MediaTests\\\\Tests\\\\Media\\\\Video\\\\Decoder-Streams\\\\AVC\\\\Suite\\\\VClips\\\\Main_Profile\\\\VC-303-A D-Traffic-AVC-MP\\\\FunctionalTests\\\\V30313_B_D-Traffic_AVC_MP_num_ref_frames_6';\n</code></pre>\n\n<p>or</p>\n\n<pre><code>my $pathg = '\\\\\\fmsgfxauto4\\mediatests$\\ATS-MediaTests\\Tests\\Media\\Video\\Decoder-Streams\\AVC\\\\Suite\\VClips\\Main_Profile\\VC-303-A D-Traffic-AVC-MP\\FunctionalTests\\V30313_B_D-Traffic_AVC_MP_num_ref_frames_6';\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 8283602, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-DDKT3oabPww/AAAAAAAAAAI/AAAAAAAAAMg/e4lxpuVnuIA/photo.jpg?sz=128", "display_name": "Ashish khobragade", "link": "https://stackoverflow.com/users/8283602/ashish-khobragade"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 95, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1531945379, "creation_date": 1531941097, "last_edit_date": 1531945379, "question_id": 51409432, "link": "https://stackoverflow.com/questions/51409432/preserving-spaces-in-path-variable-names", "title": "Preserving spaces in path variable names", "body": "<p>I want to open a clip directory. In the directory path, space is there in between. path is stored in the <code>$pathg</code> variable. </p>\n\n<p>can please tell me how to open the path or how to add escape character in path using path variable? </p>\n\n<pre><code>Path = \\\\fmsgfxauto4\\mediatests$\\ATS-MediaTests\\Tests\\Media\\Video\\Decoder-Streams\\AVC\\Suite\\VClips\\Main_Profile\\VC-303-A D-Traffic-AVC-MP\\FunctionalTests\\V30313_B_D-Traffic_AVC_MP_num_ref_frames_6\n</code></pre>\n\n<p>Code:</p>\n\n<pre><code>        opendir (CLIPDIR, $pathg) or die \"Couldn't open directory $pathg, $!\";\n        my $isfound = 0;\n        while (my $clip = readdir CLIPDIR and $pathg)\n        {\n            #if($clip =~ /.264$/)\n            if(grep{/.264$/ || /.avc$/ || /.26l$/} \"$clip\")\n            {   \n</code></pre>\n"}, {"tags": ["regex", "perl", "repeat"], "comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1531941406, "post_id": 51409142, "comment_id": 89790360, "body": "Are you trying to transform a whole XML file?  Then you should use a module.  Also, why a one-liner? It will be unwieldy, in multiple lines, merely compressing what would be a normal program.  Is there something specifically bad about having a script for it?"}, {"owner": {"reputation": 249, "user_id": 5814380, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cc5247afa42014a646feaf185d52c6e2?s=128&d=identicon&r=PG&f=1", "display_name": "jan", "link": "https://stackoverflow.com/users/5814380/jan"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1531942101, "post_id": 51409142, "comment_id": 89790688, "body": "@zdim It&#39;s not a full XML file. It&#39;s stretches of text that will eventually be transformed into LaTeX code. So the &lt;gl&gt;  &lt;/gl&gt; tags are actually arbitrary, they could be anything and will eventually turn into \\ and {}. I&#39;ve just used the xml format as it&#39;s easily to recognize and unique enough so it won&#39;t mess other things up in the file."}, {"owner": {"reputation": 249, "user_id": 5814380, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cc5247afa42014a646feaf185d52c6e2?s=128&d=identicon&r=PG&f=1", "display_name": "jan", "link": "https://stackoverflow.com/users/5814380/jan"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1531942265, "post_id": 51409142, "comment_id": 89790753, "body": "And no, it doesn&#39;t have to be a oneliner.  It&#39;s actually part of a workflow that executes perl within a shell script, so a perl script would probably also do."}], "answers": [{"comments": [{"owner": {"reputation": 618, "user_id": 2057516, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/sEoLL.jpg?s=128&g=1", "display_name": "hepcat72", "link": "https://stackoverflow.com/users/2057516/hepcat72"}, "edited": false, "score": 0, "creation_date": 1531942495, "post_id": 51409758, "comment_id": 89790866, "body": "You can test it with <code>perl -e &#39;$s=&quot;word &lt;gl&gt;aaa&lt;&#47;gl&gt; word &lt;gl&gt;aaa-bbb=ccc&lt;&#47;gl&gt;&quot;;print(&quot;$s\\n&quot;);$s=~s&#47;(\\w+)([\\-=])(?=\\w+&zwnj;&#8203;)&#47;$1&lt;\\&#47;gl&gt;$2&lt;gl&gt;&#47;g;p&zwnj;&#8203;rint(&quot;$s\\n&quot;)&#39;</code>"}, {"owner": {"reputation": 249, "user_id": 5814380, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cc5247afa42014a646feaf185d52c6e2?s=128&d=identicon&r=PG&f=1", "display_name": "jan", "link": "https://stackoverflow.com/users/5814380/jan"}, "edited": false, "score": 1, "creation_date": 1531945735, "post_id": 51409758, "comment_id": 89792430, "body": "This is perfect and sufficient for what I need."}, {"owner": {"reputation": 705, "user_id": 6490359, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/711f0af849e984c1633fe69ae8354b8f?s=128&d=identicon&r=PG&f=1", "display_name": "Silvar", "link": "https://stackoverflow.com/users/6490359/silvar"}, "edited": false, "score": 0, "creation_date": 1531988625, "post_id": 51409758, "comment_id": 89806449, "body": "This code breaks if you feed it data with extra hyphenated words that are <i>not</i> within a <code>&lt;gl&gt;</code>...<code>&lt;&#47;gl&gt;</code> block. Just try &quot;<code>word &lt;gl&gt;aaa&lt;&#47;gl&gt; word extra-hyphenated-word &lt;gl&gt;aaa-bbb=ccc&lt;&#47;gl&gt;</code>&quot;. This assuming the <code>word</code>s in the input are some random words or word combinations - this won&#39;t be a problem if the only things in input apart from the <code>&lt;gl&gt;</code> blocks are literal <code>word</code>s."}, {"owner": {"reputation": 618, "user_id": 2057516, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/sEoLL.jpg?s=128&g=1", "display_name": "hepcat72", "link": "https://stackoverflow.com/users/2057516/hepcat72"}, "reply_to_user": {"reputation": 705, "user_id": 6490359, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/711f0af849e984c1633fe69ae8354b8f?s=128&d=identicon&r=PG&f=1", "display_name": "Silvar", "link": "https://stackoverflow.com/users/6490359/silvar"}, "edited": false, "score": 0, "creation_date": 1532032797, "post_id": 51409758, "comment_id": 89833654, "body": "Yes, @Silvar, it assumes proper input. I was aware of that when I suggested it, though I didn&#39;t mention it. I will add that as a caveat."}, {"owner": {"reputation": 618, "user_id": 2057516, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/sEoLL.jpg?s=128&g=1", "display_name": "hepcat72", "link": "https://stackoverflow.com/users/2057516/hepcat72"}, "reply_to_user": {"reputation": 705, "user_id": 6490359, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/711f0af849e984c1633fe69ae8354b8f?s=128&d=identicon&r=PG&f=1", "display_name": "Silvar", "link": "https://stackoverflow.com/users/6490359/silvar"}, "edited": false, "score": 0, "creation_date": 1532035248, "post_id": 51409758, "comment_id": 89834645, "body": "OK @Silvar, after the caveat, I added code to address the code breakage you uncovered."}, {"owner": {"reputation": 618, "user_id": 2057516, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/sEoLL.jpg?s=128&g=1", "display_name": "hepcat72", "link": "https://stackoverflow.com/users/2057516/hepcat72"}, "edited": false, "score": 0, "creation_date": 1532035597, "post_id": 51409758, "comment_id": 89834768, "body": "I&#39;m sure there are probably other ways to break the code that have to do with unexpected input (e.g. upper case gl tags, etc.).  Though the OP said he wanted to do this in the form of &quot;<code>perl -pe &#39;s&#47;&#47;&#47;g;&#39; in out</code>&quot; and I don&#39;t think that a single pattern match can handle what you pointed out my code could not handle, so I&#39;d be very impressed if you were able to come up with a single regular expression that will do the requested substitution and handle the issue you brought up."}], "tags": [], "owner": {"reputation": 618, "user_id": 2057516, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/sEoLL.jpg?s=128&g=1", "display_name": "hepcat72", "link": "https://stackoverflow.com/users/2057516/hepcat72"}, "is_accepted": true, "score": -1, "last_activity_date": 1532036460, "last_edit_date": 1532036460, "creation_date": 1531942421, "answer_id": 51409758, "question_id": 51409142, "link": "https://stackoverflow.com/questions/51409142/repeating-regex-pattern/51409758#51409758", "title": "Repeating regex pattern", "body": "<p>This will do it:</p>\n\n<pre><code>s/(\\w+)([\\-=])(?=\\w+)/$1&lt;\\/gl&gt;$2&lt;gl&gt;/g;\n</code></pre>\n\n<p>The /g at the end is the repeat and stands for \"global\".  It will pick up matching at the end of the previous match and keep matching until it doesn't match anymore, so we have to be careful about where the match ends.  That's what the (?=...) is for.  It's a \"followed by pattern\" that tells the repeat to not include it as part of \"where you left off\" in the previous match.  That way, it picks up where it left off by re-matching the second \"word\".</p>\n\n<p>The s/ at the beginning is a substitution, so the command would be something like:</p>\n\n<pre><code>cat in | perl -pne 's/(\\w+)([\\-=])(?=\\w+)/$1&lt;\\/gl&gt;$2&lt;gl&gt;/g;$_' &gt; out\n</code></pre>\n\n<p>You need the $_ at the end because the result of the global substitution is the number of substitutions made.</p>\n\n<p>This will only match one line.  If your pattern spans multiple lines, you'll need some fancier code.  It also assumes the XML is correct and that there are no words surrounding dashes or equals signs outside of  tags.  To account for this would necessitate an extra pattern match in a loop to pull out the values surrounded by gl tags so that you can do your substitution on just those portions, like:</p>\n\n<pre><code>my $e = $in;\nwhile($in =~ /(.*?&lt;gl&gt;)(.*?)(?=&lt;\\/gl&gt;)/g){\n    my $p = $1;\n    my $s = $2;\n    print($p);\n    $s =~ s/(\\w+)([\\-=])(?=\\w+)/$1&lt;\\/gl&gt;$2&lt;gl&gt;/g;\n    print($s);\n    $e = $';   # ' (stop markup highlighter)\n}\nprint($e);\n</code></pre>\n\n<p>You'd have to write your own surrounding loop to read STDIN and put the lines read in into <code>$in</code>.  (You would also need to not use -p or -n flags to the perl interpreter since you're reading the input and printing the output manually.)  The while loop above however grabs everything inside the gl tags and then performs your substitution on just that content.  It prints everything occurring between the last match (or the beginning of the string) and before the current match (<code>$p</code>) and saves everything after in <code>$e</code> which gets printed after the last match outside the loop.</p>\n"}, {"comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1531945787, "post_id": 51410011, "comment_id": 89792461, "body": "@jan Added the one-liner"}, {"owner": {"reputation": 249, "user_id": 5814380, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cc5247afa42014a646feaf185d52c6e2?s=128&d=identicon&r=PG&f=1", "display_name": "jan", "link": "https://stackoverflow.com/users/5814380/jan"}, "edited": false, "score": 0, "creation_date": 1531945903, "post_id": 51410011, "comment_id": 89792515, "body": "Oh, thank you very much, this is great.  I&#39;m sorry, I just accepted the other answer before your edit, as the one-liner was working fine in my workflow."}, {"owner": {"reputation": 249, "user_id": 5814380, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cc5247afa42014a646feaf185d52c6e2?s=128&d=identicon&r=PG&f=1", "display_name": "jan", "link": "https://stackoverflow.com/users/5814380/jan"}, "edited": false, "score": 0, "creation_date": 1531945992, "post_id": 51410011, "comment_id": 89792548, "body": "Although, I must admit (as a non-expert) your code looks more sophisticated."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 249, "user_id": 5814380, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cc5247afa42014a646feaf185d52c6e2?s=128&d=identicon&r=PG&f=1", "display_name": "jan", "link": "https://stackoverflow.com/users/5814380/jan"}, "edited": false, "score": 1, "creation_date": 1531947468, "post_id": 51410011, "comment_id": 89793214, "body": "@jan  That&#39;s perfectly fine, what you accept and all :)  Was just letting you know.  If you can explain how you actually want to pass the string to Perl in your shell script I can add a way to make the script use it.  Again, just as an additional resource for you.  (This code doesn&#39;t assume fixed strings for your tags so it must do more. While it can be simplified but I wanted to avoid advanced regex.)"}, {"owner": {"reputation": 249, "user_id": 5814380, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cc5247afa42014a646feaf185d52c6e2?s=128&d=identicon&r=PG&f=1", "display_name": "jan", "link": "https://stackoverflow.com/users/5814380/jan"}, "edited": false, "score": 0, "creation_date": 1531947970, "post_id": 51410011, "comment_id": 89793441, "body": "Adding <code>s{(&lt;[^&gt;]+&gt;) (.+?) (&lt;&#47;[^&gt;]+&gt;)}          {($o,$t,$c)=($1,$2,$3);$t=~s&#47;(\\w+)&#47;$o$1$c&#47;g; $t}gex;</code> to my shell script above (after the other regexes) does exactly what I need!  The data is passed on to the script from another program as the <code>$1</code> argument and then the output is produced within the script calling some other commands."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 249, "user_id": 5814380, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cc5247afa42014a646feaf185d52c6e2?s=128&d=identicon&r=PG&f=1", "display_name": "jan", "link": "https://stackoverflow.com/users/5814380/jan"}, "edited": false, "score": 0, "creation_date": 1531960922, "post_id": 51410011, "comment_id": 89797183, "body": "@jan I edited to also show a way to use a script in your use case"}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": false, "score": 2, "last_activity_date": 1554699185, "last_edit_date": 1554699185, "creation_date": 1531943503, "answer_id": 51410011, "question_id": 51409142, "link": "https://stackoverflow.com/questions/51409142/repeating-regex-pattern/51410011#51410011", "title": "Repeating regex pattern", "body": "<p>This needs a mini nested-parser and I'd recommend a script, as easier to maintain</p>\n\n<pre><code>use warnings;\nuse strict;\nuse feature 'say';\n\nmy $str = q(word &lt;gl&gt;aaa&lt;/gl&gt; word &lt;gl&gt;aaa-bbb=ccc&lt;/gl&gt;);\n\nmy $tag_re = qr{(&lt;[^&gt;]+&gt;) (.+?) (&lt;/[^&gt;]+&gt;)}x;   # / (stop markup highlighter)\n\n$str =~ s{$tag_re}{\n    my ($o, $t, $c) = ($1, $2, $3);  # open (tag), text, close (tag)\n    $t =~ s/(\\w+)/$o$1$c/g; \n    $t;\n}ge;\n\nsay $str;\n</code></pre>\n\n<p>The regex gives us its built-in \"parsing,\" where words that don't match the <code>$tag_re</code> are unchanged. Once the <code>$tag_re</code> is matched, it is processed as required inside the replacement side. The <code>/e</code> modifier makes the replacement side be evaluated as code.</p>\n\n<p>One way to provide input for a script is via command-line arguments, available in <code>@ARGV</code> global array in the script. For the use indicated in the question's \"Edit\" replace the hardcoded</p>\n\n<pre><code>my $str = q(...);\n</code></pre>\n\n<p>with </p>\n\n<pre><code>my $str = shift @ARGV;  # first argument on the command line\n</code></pre>\n\n<p>and then use that script in your shell script as</p>\n\n<pre><code>#!/bin/sh\n...\nscript.pl $1 &gt; output_file\n</code></pre>\n\n<p>where <code>$1</code> is the shell variable as shown in the \"Edit\" to the question. </p>\n\n<hr>\n\n<p>In a one-liner</p>\n\n<pre><code>echo \"word &lt;gl&gt;aaa&lt;/gl&gt; word &lt;gl&gt;aaa-bbb=ccc&lt;/gl&gt;\"  |\n    perl -wpe'\n        s{(&lt;[^&gt;]+&gt;) (.+?) (&lt;/[^&gt;]+&gt;)}\n         {($o,$t,$c)=($1,$2,$3);$t=~s/(\\w+)/$o$1$c/g; $t}gex;\n    '\n</code></pre>\n\n<p>what in your shell script becomes &nbsp; <code>echo $1 | perl -wpe'...' &gt; output_file</code>. Or you can change the code to read from <code>@ARGV</code> and drop the <code>-n</code> switch, and add a print</p>\n\n<pre><code>#!/bin/sh\n...\nperl -wE'$_=shift; ...; say' $1 &gt; output_file \n</code></pre>\n\n<p>where <code>...</code> in one-liner indicate the same code as above, and <code>say</code> is now needed since we don't have the <code>-p</code> with which the <code>$_</code> is printed out once it's processed.</p>\n\n<p>The <a href=\"https://perldoc.perl.org/functions/shift.html\" rel=\"nofollow noreferrer\">shift</a> takes an element off of an array's front and returns it. Without an argument it does that to <code>@ARGV</code> when outside a subroutine, as here (inside a subroutine its default target is <code>@_</code>).</p>\n"}], "owner": {"reputation": 249, "user_id": 5814380, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cc5247afa42014a646feaf185d52c6e2?s=128&d=identicon&r=PG&f=1", "display_name": "jan", "link": "https://stackoverflow.com/users/5814380/jan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 225, "favorite_count": 1, "accepted_answer_id": 51409758, "answer_count": 2, "score": 2, "last_activity_date": 1554699185, "creation_date": 1531940021, "last_edit_date": 1531942417, "question_id": 51409142, "link": "https://stackoverflow.com/questions/51409142/repeating-regex-pattern", "title": "Repeating regex pattern", "body": "<p>I have a string such as this</p>\n\n<pre><code>word &lt;gl&gt;aaa&lt;/gl&gt; word &lt;gl&gt;aaa-bbb=ccc&lt;/gl&gt;\n</code></pre>\n\n<p>where, if there is one ore more words enclosed in   tags. In those instances where there are more than one words (which are usually separated by - or = and potentially other non-word characters), I'd like to make sure that the tags enclose each word individually so that the resulting string would be:</p>\n\n<pre><code>word &lt;gl&gt;aaa&lt;/gl&gt; word &lt;gl&gt;aaa&lt;/gl&gt;-&lt;gl&gt;bbb&lt;/gl&gt;=&lt;gl&gt;ccc&lt;/gl&gt;\n</code></pre>\n\n<p>So I'm trying to come up with a regex that would find any number of iterations of \\W*?(\\w+) and then enclose each word individually with the tags. And ideally I'd have this as a one-liner that I can execute from the command line with perl, like so:</p>\n\n<pre><code>perl -pe 's///g;' in out\n</code></pre>\n\n<p>This is how far I've gotten after a lot of trial and error and googling - I'm not a programmer :( ... : </p>\n\n<pre><code>/&lt;gl&gt;\\W*?(\\w+)\\W*?((\\w+)\\W*?){0,10}&lt;\\/gl&gt;/\n</code></pre>\n\n<p>It finds the first and last word (aaa and ccc). Now, how can I make it repeat the operation and find other words if present? And then how to get the replacement? Any hints on how to do this or where I can find further information would be much appreciated? </p>\n\n<p><strong>EDIT:</strong> \nThis is part of a workflow that does some other transformations within a shell script: </p>\n\n<pre><code>#!/bin/sh\n\nperl -pe '# \n  s/replace/me/g;  \n  s/replace/me/g;  \n  ' $1 &gt; tmp\n\n... some other commands ...\n</code></pre>\n"}, {"tags": ["perl", "scheduled-tasks", "taskscheduler", "output-redirect"], "comments": [{"owner": {"reputation": 1058, "user_id": 57033, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/c2391bf9668024d9e442f011358df881?s=128&d=identicon&r=PG", "display_name": "hello_earth", "link": "https://stackoverflow.com/users/57033/hello-earth"}, "edited": false, "score": 0, "creation_date": 1613118952, "post_id": 51408861, "comment_id": 116982709, "body": "I know that in your case you specify the &quot;Start in&quot; directory - but the default for it is to be empty - so it&#39;s easy to lose it - and hava a case like mine, where the file I was redirecting to actually ended up to be in C:\\Windows\\System32 - just a note for others who might be searching for similar cases ..."}], "answers": [{"tags": [], "owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "is_accepted": true, "score": 3, "last_activity_date": 1531939804, "creation_date": 1531939804, "answer_id": 51409078, "question_id": 51408861, "link": "https://stackoverflow.com/questions/51408861/output-redirects-are-not-working-running-perl-program-via-windows-task-scheduler/51409078#51409078", "title": "Output redirects are not working running Perl program via Windows Task Scheduler", "body": "<p>Output redirection <a href=\"https://social.technet.microsoft.com/Forums/windows/en-US/985ce84c-ac55-4fe8-b652-259d5373f747/redirect-script-output-to-file-in-task-scheduler?forum=winserverpowershell\" rel=\"nofollow noreferrer\">may or may not work with the Task Scheduler</a>. The workaround is to run your desired command (including output redirection) inside a batch file, and to call the batch file from Task Scheduler.</p>\n\n<pre><code>script.bat\n----------\nC:\\Perl64\\bin\\perl.exe script.pl config.json &gt; output.txt 2&gt;&amp;1\n</code></pre>\n"}], "owner": {"reputation": 2063, "user_id": 72234, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/DOqkL.jpg?s=128&g=1", "display_name": "flamey", "link": "https://stackoverflow.com/users/72234/flamey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 113, "favorite_count": 1, "accepted_answer_id": 51409078, "answer_count": 1, "score": 1, "last_activity_date": 1531939804, "creation_date": 1531938970, "question_id": 51408861, "link": "https://stackoverflow.com/questions/51408861/output-redirects-are-not-working-running-perl-program-via-windows-task-scheduler", "title": "Output redirects are not working running Perl program via Windows Task Scheduler", "body": "<p>I have Perl script configured to run periodically via Windows Task Scheduler.</p>\n\n<pre><code>Action: Start a program\nProgram: C:\\Perl64\\bin\\perl.exe\nAdd arguments: script.pl config.json &gt; output.txt 2&gt;&amp;1\n           or: script.pl config.json 2&gt;&amp;1 &gt; output.txt\nStart in: c:\\path\\to\\scriptPL\\\n</code></pre>\n\n<p>The program runs, but it gets either <code>&gt;</code> or <code>2&gt;&amp;1</code> in <code>$ARGV[1]</code>, instead of redirecting outputs. When running from the command prompt output redirects work.</p>\n\n<p>What am I missing?</p>\n\n<p><a href=\"https://i.stack.imgur.com/4J3rP.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/4J3rP.png\" alt=\"enter image description here\"></a>\n<a href=\"https://i.stack.imgur.com/PbruG.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/PbruG.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["string", "perl", "raku", "filehandle"], "comments": [{"owner": {"reputation": 2971, "user_id": 4975646, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-XzXhmdjjKB0/AAAAAAAAAAI/AAAAAAAAAeg/9rsygRfbVyk/photo.jpg?sz=128", "display_name": "callyalater", "link": "https://stackoverflow.com/users/4975646/callyalater"}, "edited": false, "score": 0, "creation_date": 1531934537, "post_id": 51407331, "comment_id": 89786686, "body": "<a href=\"https://docs.perl6.org/language/io\" rel=\"nofollow noreferrer\">The documentation</a> has a section about this under Input/Output."}, {"owner": {"reputation": 3967, "user_id": 5829526, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/K2mSz.jpg?s=128&g=1", "display_name": "chenyf", "link": "https://stackoverflow.com/users/5829526/chenyf"}, "reply_to_user": {"reputation": 2971, "user_id": 4975646, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-XzXhmdjjKB0/AAAAAAAAAAI/AAAAAAAAAeg/9rsygRfbVyk/photo.jpg?sz=128", "display_name": "callyalater", "link": "https://stackoverflow.com/users/4975646/callyalater"}, "edited": false, "score": 0, "creation_date": 1531935204, "post_id": 51407331, "comment_id": 89787020, "body": "@callyalater I&#39;m afraid not. the document only mentioned open a file, instead of open a filehandle on a string."}, {"owner": {"reputation": 2971, "user_id": 4975646, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-XzXhmdjjKB0/AAAAAAAAAAI/AAAAAAAAAeg/9rsygRfbVyk/photo.jpg?sz=128", "display_name": "callyalater", "link": "https://stackoverflow.com/users/4975646/callyalater"}, "edited": false, "score": 0, "creation_date": 1531935404, "post_id": 51407331, "comment_id": 89787135, "body": "The documentation also refers to the <code>IO::Handle</code> class. So, you can just stop at the <code>$filename.IO</code> to get the <code>IO</code> role object or you can do <code>$filename.IO.open</code> and get the <code>IO::Handle</code> filehandle object for the string."}, {"owner": {"reputation": 25859, "user_id": 1077672, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f00f8b55b0ade2c4748e94fb73a40662?s=128&d=identicon&r=PG", "display_name": "raiph", "link": "https://stackoverflow.com/users/1077672/raiph"}, "edited": false, "score": 3, "creation_date": 1531936157, "post_id": 51407331, "comment_id": 89787512, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/28702850/i-can-create-filehandles-to-strings-in-perl-5-how-do-i-do-it-in-perl-6\">I can create filehandles to strings in Perl 5, how do I do it in Perl 6?</a>"}, {"owner": {"reputation": 25859, "user_id": 1077672, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f00f8b55b0ade2c4748e94fb73a40662?s=128&d=identicon&r=PG", "display_name": "raiph", "link": "https://stackoverflow.com/users/1077672/raiph"}, "reply_to_user": {"reputation": 2971, "user_id": 4975646, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-XzXhmdjjKB0/AAAAAAAAAAI/AAAAAAAAAeg/9rsygRfbVyk/photo.jpg?sz=128", "display_name": "callyalater", "link": "https://stackoverflow.com/users/4975646/callyalater"}, "edited": false, "score": 1, "creation_date": 1531936576, "post_id": 51407331, "comment_id": 89787744, "body": "@callyalater That&#39;s a convenient way to turn a string containing a <i>filename</i> into a handle to that <i>file</i>. I can totally see why you&#39;re thinking that that&#39;s &quot;open a filehandle on a string&quot;. But language is ambiguous and it looks like OP is asking about a scenario where no file is involved at all but rather to pretend there&#39;s a file <i>containing</i> a string, and to open that pretend file. See the SO I just linked."}, {"owner": {"reputation": 2971, "user_id": 4975646, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-XzXhmdjjKB0/AAAAAAAAAAI/AAAAAAAAAeg/9rsygRfbVyk/photo.jpg?sz=128", "display_name": "callyalater", "link": "https://stackoverflow.com/users/4975646/callyalater"}, "reply_to_user": {"reputation": 25859, "user_id": 1077672, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f00f8b55b0ade2c4748e94fb73a40662?s=128&d=identicon&r=PG", "display_name": "raiph", "link": "https://stackoverflow.com/users/1077672/raiph"}, "edited": false, "score": 0, "creation_date": 1531936723, "post_id": 51407331, "comment_id": 89787818, "body": "@raiph I see what you are saying now. Yeah, what you linked to is much better. Thank you for the clarification."}, {"owner": {"reputation": 31843, "user_id": 1337, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/72de240484e389dbedb6a3e428b9f0c1?s=128&d=identicon&r=PG", "display_name": "Brad Gilbert", "link": "https://stackoverflow.com/users/1337/brad-gilbert"}, "edited": false, "score": 1, "creation_date": 1531962731, "post_id": 51407331, "comment_id": 89797533, "body": "zef install <a href=\"http://modules.perl6.org/dist/IO::String\" rel=\"nofollow noreferrer\">IO::String</a>"}], "answers": [{"tags": [], "owner": {"reputation": 2971, "user_id": 4975646, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-XzXhmdjjKB0/AAAAAAAAAAI/AAAAAAAAAeg/9rsygRfbVyk/photo.jpg?sz=128", "display_name": "callyalater", "link": "https://stackoverflow.com/users/4975646/callyalater"}, "is_accepted": true, "score": 4, "last_activity_date": 1531937017, "last_edit_date": 1531937017, "creation_date": 1531935062, "answer_id": 51407906, "question_id": 51407331, "link": "https://stackoverflow.com/questions/51407331/how-to-open-a-file-handle-on-a-string-in-perl-6/51407906#51407906", "title": "How to open a file handle on a string in Perl 6?", "body": "<p>EDIT: See <a href=\"https://stackoverflow.com/questions/28702850/i-can-create-filehandles-to-strings-in-perl-5-how-do-i-do-it-in-perl-6\">this question</a> for how to do what @raiph says about opening a filehandle to a string. Also, read @raiph's comments.</p>\n\n<p>This is how to open a filehandle to a <em>file</em> from a string, not how to open a filehandle to a <em>string</em> without a file being involved. Thanks to @raiph for clarifying the OP's meaning.</p>\n\n<hr>\n\n<p>The documentation has a section called <a href=\"https://docs.perl6.org/language/io\" rel=\"nofollow noreferrer\">Input/Output</a> that describes this process.</p>\n\n<blockquote>\n  <p>One way to read the contents of a file is to open the file via the open function with the :r (read) file mode option and slurp in the contents:</p>\n\n<pre><code>my $fh = open \"testfile\", :r;\nmy $contents = $fh.slurp-rest;\n$fh.close;\n</code></pre>\n  \n  <p>Here we explicitly close the filehandle using the close method on the IO::Handle object. This is a very traditional way of reading the contents of a file. However, the same can be done more easily and clearly like so:</p>\n\n<pre><code>my $contents = \"testfile\".IO.slurp;\n# or in procedural form: \n$contents = slurp \"testfile\"\n</code></pre>\n  \n  <p>By adding the IO role to the file name string, we are effectively able to refer to the string as the file object itself and thus slurp in its contents directly. Note that the slurp takes care of opening and closing the file for you.</p>\n</blockquote>\n\n<p><a href=\"https://docs.perl6.org/language/5to6-nutshell#File-related_operations\" rel=\"nofollow noreferrer\">This is also found in the Perl5 to Perl6 pages as well.</a></p>\n\n<blockquote>\n  <p>In Perl 5, a common idiom for reading the lines of a text file goes something like this:</p>\n\n<pre><code>open my $fh, \"&lt;\", \"file\" or die \"$!\";\nmy @lines = &lt;$fh&gt;;                # lines are NOT chomped \nclose $fh;`\n</code></pre>\n  \n  <p>In Perl 6, this has been simplified to</p>\n  \n  <p><code>my @lines = \"file\".IO.lines;  # auto-chomped</code></p>\n</blockquote>\n\n<p>Further references to do this are found in the <a href=\"https://docs.perl6.org/type/IO::Handle\" rel=\"nofollow noreferrer\"><code>IO::Handle</code></a> documentation:</p>\n\n<blockquote>\n  <p>Instances of <code>IO::Handle</code> encapsulate an handle to manipulate input/output resources. Usually there is no need to create directly an <code>IO::Handle</code> instance, since it will be done by other roles and methods. For instance, an <code>IO::Path</code> object provides an open method that returns an <code>IO::Handle</code>:</p>\n\n<pre><code>my $fh = '/tmp/log.txt'.IO.open;\nsay $fh.^name; # OUTPUT: IO::Handle \n</code></pre>\n</blockquote>\n"}], "owner": {"reputation": 3967, "user_id": 5829526, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/K2mSz.jpg?s=128&g=1", "display_name": "chenyf", "link": "https://stackoverflow.com/users/5829526/chenyf"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 370, "favorite_count": 0, "accepted_answer_id": 51407906, "answer_count": 1, "score": 6, "last_activity_date": 1532697333, "creation_date": 1531932993, "last_edit_date": 1532697333, "question_id": 51407331, "link": "https://stackoverflow.com/questions/51407331/how-to-open-a-file-handle-on-a-string-in-perl-6", "title": "How to open a file handle on a string in Perl 6?", "body": "<p>In Perl 5, I can open a filehandle on string like this:</p>\n\n<pre><code>open my $kfh, \"&lt;\", \\$message-&gt;payload;\n</code></pre>\n\n<p>I have a scenario that uses string as a filehandle and passes it to the <code>open</code> method:</p>\n\n<pre><code>my $fh = new IO::Zlib;\nopen my $kfh, \"&lt;\", \\$message-&gt;payload;\nif($fh-&gt;open($kfh, 'rb')){\n   print &lt;$fh&gt;;\n   $fh-&gt;close;\n}\n</code></pre>\n\n<p>where <code>$message-&gt;payload</code> is read from <a href=\"https://kafka.apache.org/\" rel=\"nofollow noreferrer\">Kafka</a>, and the content is a byte array. <a href=\"https://stackoverflow.com/users/1077672/raiph\">raiph</a> had a <a href=\"https://stackoverflow.com/questions/28702850/i-can-create-filehandles-to-strings-in-perl-5-how-do-i-do-it-in-perl-6\">similar question</a>, but it didn't answer my question.</p>\n\n<p>So I want to know how to open a filehandle on a string in Perl 6 like Perl 5 does? These documentation pages have no information on this:</p>\n\n<ul>\n<li><a href=\"https://docs.perl6.org/language/5to6-perlfunc#open\" rel=\"nofollow noreferrer\">open</a>  </li>\n<li><a href=\"https://docs.perl6.org/language/101-basics#index-entry-filehandle\" rel=\"nofollow noreferrer\">filehandle</a>  </li>\n<li><a href=\"https://docs.perl6.org/type/IO::Handle\" rel=\"nofollow noreferrer\">IO::Handle</a>  </li>\n</ul>\n"}, {"tags": ["javascript", "perl", "timestamp", "utc", "epoch"], "comments": [{"owner": {"reputation": 162900, "user_id": 1175966, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d3d9dfbd040f9cbc1a6b82f0da2b345?s=128&d=identicon&r=PG", "display_name": "charlietfl", "link": "https://stackoverflow.com/users/1175966/charlietfl"}, "edited": false, "score": 0, "creation_date": 1531929988, "post_id": 51406411, "comment_id": 89784124, "body": "your epoch seems to be in seconds not milliseconds"}, {"owner": {"reputation": 5320, "user_id": 4480180, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/1970535e346ac19a4642c5ac27c97998?s=128&d=identicon&r=PG&f=1", "display_name": "justHelloWorld", "link": "https://stackoverflow.com/users/4480180/justhelloworld"}, "reply_to_user": {"reputation": 162900, "user_id": 1175966, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d3d9dfbd040f9cbc1a6b82f0da2b345?s=128&d=identicon&r=PG", "display_name": "charlietfl", "link": "https://stackoverflow.com/users/1175966/charlietfl"}, "edited": false, "score": 0, "creation_date": 1531930129, "post_id": 51406411, "comment_id": 89784212, "body": "@charlietfl That could be a reason, but still <code>now&#47;1000 &gt; endTime</code>"}, {"owner": {"reputation": 162900, "user_id": 1175966, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d3d9dfbd040f9cbc1a6b82f0da2b345?s=128&d=identicon&r=PG", "display_name": "charlietfl", "link": "https://stackoverflow.com/users/1175966/charlietfl"}, "edited": false, "score": 0, "creation_date": 1531930207, "post_id": 51406411, "comment_id": 89784272, "body": "After dividing could be timezone offset issue now if dates are close (within hours)"}, {"owner": {"reputation": 5320, "user_id": 4480180, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/1970535e346ac19a4642c5ac27c97998?s=128&d=identicon&r=PG&f=1", "display_name": "justHelloWorld", "link": "https://stackoverflow.com/users/4480180/justhelloworld"}, "reply_to_user": {"reputation": 162900, "user_id": 1175966, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d3d9dfbd040f9cbc1a6b82f0da2b345?s=128&d=identicon&r=PG", "display_name": "charlietfl", "link": "https://stackoverflow.com/users/1175966/charlietfl"}, "edited": false, "score": 0, "creation_date": 1531930554, "post_id": 51406411, "comment_id": 89784480, "body": "@charlietfl Could you please explain this a little bit more? I thought that this UTC was an universal solution exactly to avoid this kind of problems"}, {"owner": {"reputation": 5320, "user_id": 4480180, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/1970535e346ac19a4642c5ac27c97998?s=128&d=identicon&r=PG&f=1", "display_name": "justHelloWorld", "link": "https://stackoverflow.com/users/4480180/justhelloworld"}, "reply_to_user": {"reputation": 162900, "user_id": 1175966, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d3d9dfbd040f9cbc1a6b82f0da2b345?s=128&d=identicon&r=PG", "display_name": "charlietfl", "link": "https://stackoverflow.com/users/1175966/charlietfl"}, "edited": false, "score": 0, "creation_date": 1531930898, "post_id": 51406411, "comment_id": 89784673, "body": "Btw by using <a href=\"https://www.epochconverter.com/\" rel=\"nofollow noreferrer\">this</a> I see that in GMT the bigger one is 3:57:12.906 PM while the other one is 4:17:14 PM, so to me it&#39;s not a matter of hours, but minutes too"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1531931037, "post_id": 51406411, "comment_id": 89784757, "body": "Re &quot;<i>I want to use UTC</i>&quot;, You&#39;re not using UTC date-time --you&#39;re not using a date-time at all-- but epoch timestamps will do perfectly fine too."}, {"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 0, "creation_date": 1531931316, "post_id": 51406411, "comment_id": 89784908, "body": "Assuming that the line below your code is output from <code>console.log</code>, <code>endTime</code> should be <code>1531929409</code>, right?"}, {"owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "edited": false, "score": 0, "creation_date": 1531989919, "post_id": 51406411, "comment_id": 89807212, "body": "Are you sure your Perl is calculating a timestamp that is in the future? Your example looks more like it&#39;s &quot;now&quot; as it&#39;s only a few (23) seconds different from the timestamp Javascript is giving."}], "answers": [{"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 2, "last_activity_date": 1531931195, "creation_date": 1531931195, "answer_id": 51406876, "question_id": 51406411, "link": "https://stackoverflow.com/questions/51406411/how-to-use-timestamp-from-perl-in-javascript/51406876#51406876", "title": "How to use timestamp from perl in Javascript?", "body": "<p>If we organize the numbers differently</p>\n\n<pre><code>now:     1531929432906 \nendTime: 1531929409\n</code></pre>\n\n<p>you might notice <code>now</code> is roughly 1000x larger than <code>endTime</code>. That's because JS's <code>new Date().getTime()</code> returns the number of <em>milliseconds</em> since <code>1970-01-01T00:00:00Z</code>, while Perl's <code>time</code> returns the number of <em>seconds</em> since <code>1970-01-01T00:00:00Z</code>.</p>\n\n<p>So, simply multiply <code>endTime</code> by 1000, or divide <code>now</code> by 1000.</p>\n\n<p>(You could also use different means of obtaining the time in Perl to obtain more precision, but that doesn't appear to be needed.)</p>\n"}], "owner": {"reputation": 5320, "user_id": 4480180, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/1970535e346ac19a4642c5ac27c97998?s=128&d=identicon&r=PG&f=1", "display_name": "justHelloWorld", "link": "https://stackoverflow.com/users/4480180/justhelloworld"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 124, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1531931195, "creation_date": 1531929521, "question_id": 51406411, "link": "https://stackoverflow.com/questions/51406411/how-to-use-timestamp-from-perl-in-javascript", "title": "How to use timestamp from perl in Javascript?", "body": "<p>In my backend (written in Perl), I generate an end date. In the front end, I want to compute the remaining time before this end date. To avoid time zones problems, I want to use UTC </p>\n\n<p>In perl, the end date is encapsulated in a <code>data</code> object:</p>\n\n<pre><code>data =&gt; {endTime =&gt; $date-&gt;epoch()}\n</code></pre>\n\n<p>And this is the Java Script function that I've written:</p>\n\n<pre><code>    updateCounter: function (element){\n        var now = new Date().getTime();\n        var endTime = $(element).data(\"endtime\");\n        var diff = epochEndDealTime - milliseconds;\n        console (diff, now, endTime);\n        ...\n    }\n</code></pre>\n\n<p>I know for a fact that <code>endTime</code> is in the future, so <code>diff</code> should be positive, but when I test it is smaller, e.g.:</p>\n\n<pre><code>-1530397503497 1531929432906 1531929409\n</code></pre>\n\n<p>What am I doing wrong?</p>\n"}, {"tags": ["perl", "hashmap"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 4, "creation_date": 1531924862, "post_id": 51404813, "comment_id": 89780586, "body": "I think madness lies down that path. Keep track of the keys yourself."}, {"owner": {"reputation": 79, "user_id": 7637846, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/65cedf5b34239b72e08f1e6733e1dabf?s=128&d=identicon&r=PG&f=1", "display_name": "TheAdam122", "link": "https://stackoverflow.com/users/7637846/theadam122"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1531924991, "post_id": 51404813, "comment_id": 89780673, "body": "@simbabque yes, I will probably keep track of the keys, I was curious if some perl wizards knew a way to do it"}, {"owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 0, "creation_date": 1531926036, "post_id": 51404813, "comment_id": 89781412, "body": "This is more or less what <a href=\"https://metacpan.org/pod/Data::Find\" rel=\"nofollow noreferrer\"><code>Data::Find</code></a> does, more or less with brute force."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1531931933, "post_id": 51404813, "comment_id": 89785306, "body": "Re &quot;<i>I know hashes point to a location in memory</i>&quot;, References point. A hash is a data structures (a type of associative array)."}, {"owner": {"reputation": 79, "user_id": 7637846, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/65cedf5b34239b72e08f1e6733e1dabf?s=128&d=identicon&r=PG&f=1", "display_name": "TheAdam122", "link": "https://stackoverflow.com/users/7637846/theadam122"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1531938629, "post_id": 51404813, "comment_id": 89788839, "body": "@ikegami Correct, I edited the question accordingly."}, {"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 0, "creation_date": 1531939171, "post_id": 51404813, "comment_id": 89789142, "body": "showing more of your real code, including how you are getting the value that you later want to figure out where it exists in the data structure, might help us give you a better answer for your actual underlying problem"}, {"owner": {"reputation": 79, "user_id": 7637846, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/65cedf5b34239b72e08f1e6733e1dabf?s=128&d=identicon&r=PG&f=1", "display_name": "TheAdam122", "link": "https://stackoverflow.com/users/7637846/theadam122"}, "reply_to_user": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 0, "creation_date": 1531939351, "post_id": 51404813, "comment_id": 89789225, "body": "@ysth Well, I doubt it, I can fairly easily track the keys I am using, I was curious if I could skip that part by some sort of trick."}], "answers": [{"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 79, "user_id": 7637846, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/65cedf5b34239b72e08f1e6733e1dabf?s=128&d=identicon&r=PG&f=1", "display_name": "TheAdam122", "link": "https://stackoverflow.com/users/7637846/theadam122"}, "edited": false, "score": 0, "creation_date": 1531940207, "post_id": 51407096, "comment_id": 89789745, "body": "To get what keys?"}, {"owner": {"reputation": 79, "user_id": 7637846, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/65cedf5b34239b72e08f1e6733e1dabf?s=128&d=identicon&r=PG&f=1", "display_name": "TheAdam122", "link": "https://stackoverflow.com/users/7637846/theadam122"}, "edited": false, "score": 0, "creation_date": 1531940255, "post_id": 51407096, "comment_id": 89789773, "body": "well, only <code>flintstones</code>"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 79, "user_id": 7637846, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/65cedf5b34239b72e08f1e6733e1dabf?s=128&d=identicon&r=PG&f=1", "display_name": "TheAdam122", "link": "https://stackoverflow.com/users/7637846/theadam122"}, "edited": false, "score": 0, "creation_date": 1531940282, "post_id": 51407096, "comment_id": 89789791, "body": "<code>my $key = &quot;flinstones&quot;;</code>"}, {"owner": {"reputation": 79, "user_id": 7637846, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/65cedf5b34239b72e08f1e6733e1dabf?s=128&d=identicon&r=PG&f=1", "display_name": "TheAdam122", "link": "https://stackoverflow.com/users/7637846/theadam122"}, "edited": false, "score": 0, "creation_date": 1531940500, "post_id": 51407096, "comment_id": 89789908, "body": "I am sorry, you don&#39;t seem to understand. What I would like to know is if I dont happen to know the keys used in the hash, i only have $ref-&gt;\\%hash; $ref-&gt;{key1}... so on, only having $ref, and for instance, not knowing the hash, can you tell what keys have been used to get that value? I am certain now, that no, you can&#39;t. Hope you understand now. Sorry if I was unclear."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 79, "user_id": 7637846, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/65cedf5b34239b72e08f1e6733e1dabf?s=128&d=identicon&r=PG&f=1", "display_name": "TheAdam122", "link": "https://stackoverflow.com/users/7637846/theadam122"}, "edited": false, "score": 0, "creation_date": 1531940576, "post_id": 51407096, "comment_id": 89789945, "body": "Keys weren&#39;t used to get that value. An assignment probably was used, though you didn&#39;t show how it got its value."}, {"owner": {"reputation": 79, "user_id": 7637846, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/65cedf5b34239b72e08f1e6733e1dabf?s=128&d=identicon&r=PG&f=1", "display_name": "TheAdam122", "link": "https://stackoverflow.com/users/7637846/theadam122"}, "edited": false, "score": 0, "creation_date": 1531940670, "post_id": 51407096, "comment_id": 89789988, "body": "Yes, but I assigned a value or whatever the key points to, to it. After that point the key is NOT being stored or used for anything."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 79, "user_id": 7637846, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/65cedf5b34239b72e08f1e6733e1dabf?s=128&d=identicon&r=PG&f=1", "display_name": "TheAdam122", "link": "https://stackoverflow.com/users/7637846/theadam122"}, "edited": false, "score": 0, "creation_date": 1531940731, "post_id": 51407096, "comment_id": 89790023, "body": "Keys don&#39;t point. Keys are string, and it&#39;s references that point. And you assigned the value of a hash element"}, {"owner": {"reputation": 79, "user_id": 7637846, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/65cedf5b34239b72e08f1e6733e1dabf?s=128&d=identicon&r=PG&f=1", "display_name": "TheAdam122", "link": "https://stackoverflow.com/users/7637846/theadam122"}, "edited": false, "score": 0, "creation_date": 1531940875, "post_id": 51407096, "comment_id": 89790113, "body": "Yes, now I did, but I could assign anything, I am only interested in the &#39;steps&#39;, and because they are not stored anywhere by default, I need to store them. Fair enough. I will."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": -1, "last_activity_date": 1531934201, "last_edit_date": 1531934201, "creation_date": 1531932083, "answer_id": 51407096, "question_id": 51404813, "link": "https://stackoverflow.com/questions/51404813/how-to-find-out-where-a-hash-reference-points-in-perl/51407096#51407096", "title": "How to find out where a hash reference points in perl?", "body": "<blockquote>\n  <p><em>How to find out where a hash reference points in perl?</em></p>\n</blockquote>\n\n<p><code>$hoh_ref</code> isn't a hash reference (or a reference of any kind).</p>\n\n<pre><code>my $hoh_ref = \\%hoh;\n$hoh_ref = $hoh_ref-&gt;{flintstones};\n$hoh_ref = $hoh_ref-&gt;{husband};\n</code></pre>\n\n<p>is identical to</p>\n\n<pre><code>my $hoh_ref = \"fred\";\n</code></pre>\n\n<p>which is to say it creates scalar <code>$hoh_ref</code> and sets its value to the string <code>fred</code>. In both cases, there is absolutely no association between (misnamed) <code>$hoh_ref</code> and <code>%hoh</code> except that one of the values of the HoH happens to be equal to the value of <code>$hoh_ref</code>.</p>\n\n<pre><code>+- %hoh -----------------------+           +- Anon hash ------------------+\n|               +-----------+  |     +----&gt;|               +-----------+  |\n|  flintstones: | Ref      ----------+     |  husband:     | fred      |  |\n|               +-----------+  |           |               +-----------+  |\n|  jetsons:     | Ref      ------------+   |  pal:         | barney    |  |\n|               +-----------+  |       |   |               +-----------+  |\n|  simpsons:    | Ref      --------+   |   +------------------------------+\n|               +-----------+  |   |   |\n+------------------------------+   |   |   +- Anon hash ------------------+\n                                   |   +--&gt;|               +-----------+  |\n+- $hoh_ref -------------------+   |       |  husband:     | george    |  |\n| fred                         |   |       |               +-----------+  |\n+------------------------------+   |       |  wife:        | jane      |  |\n                                   |       |               +-----------+  |\n                                   |       |  his boy:     | elroy     |  |\n                                   |       |               +-----------+  |\n                                   |       +------------------------------+\n                                   |\n                                   |       +- Anon hash ------------------+\n                                   +------&gt;|               +-----------+  |\n                                           |  husband:     | homer     |  |\n                                           |               +-----------+  |\n                                           |  wife:        | marge     |  |\n                                           |               +-----------+  |\n                                           |  kid:         | bart      |  |\n                                           |               +-----------+  |\n                                           +------------------------------+\n</code></pre>\n\n<p>So, at best, you could iterate through <code>%hoh</code> looking for values that are equal to the one of <code>$hoh_ref</code>.</p>\n\n<blockquote>\n  <p><em>I don't want to loop through the original hash and find where the value is</em></p>\n</blockquote>\n\n<p>Too bad.</p>\n"}], "owner": {"reputation": 79, "user_id": 7637846, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/65cedf5b34239b72e08f1e6733e1dabf?s=128&d=identicon&r=PG&f=1", "display_name": "TheAdam122", "link": "https://stackoverflow.com/users/7637846/theadam122"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 152, "favorite_count": 0, "accepted_answer_id": 51407096, "answer_count": 1, "score": 0, "last_activity_date": 1531938601, "creation_date": 1531924627, "last_edit_date": 1531938601, "question_id": 51404813, "link": "https://stackoverflow.com/questions/51404813/how-to-find-out-where-a-hash-reference-points-in-perl", "title": "How to find out where a hash reference points in perl?", "body": "<p>I have a script that calls a function to go recursively through hashes of hashes by converting them into references, and always adding the next key to the reference. I would like to know if it is possible to find out where a hash reference is pointing. This is not my script, just an example.</p>\n\n<pre><code>#!/usr/bin/perl -w\n\nuse strict;\nuse Data::Dumper;\n\nmy %hoh = (\n    flintstones =&gt; {\n        husband   =&gt; \"fred\",\n        pal       =&gt; \"barney\",\n    },\n    jetsons =&gt; {\n        husband   =&gt; \"george\",\n        wife      =&gt; \"jane\",\n        \"his boy\" =&gt; \"elroy\",\n    },\n    simpsons =&gt; {\n        husband   =&gt; \"homer\",\n        wife      =&gt; \"marge\",\n        kid       =&gt; \"bart\",\n    },\n);\n\nprint Dumper \\%hoh;\n\n#my hash has way more levels and not all levels have the same depth\n#my scrypt does what is in the next 3 lines, just through more levels\n\nmy $hoh_ref=\\%hoh;\n$hoh_ref=$hoh_ref-&gt;{flintstones};\n$hoh_ref=$hoh_ref-&gt;{husband};\n\n#it would be nice to know where a hash reference points, like the following example:\n#sub findkeys{???}\n#findkeys($hoh_ref);\n#should return '$hoh{flintstones}{husband}' the syntax can be different\n\nprint \"$hoh_ref\\n\";\nprint \"$hoh{flintstones}{husband}\\n\";     #same as last line, just to demonstrate what it looks like using keys\n</code></pre>\n\n<p>I know references point to a location in memory, so if the hash reference just points to the location of the data, without storing the keys needed in the original hash, it is not possible. I don't want to loop through the original hash and find where the value is, the point is, if there is an easy way to do it. If not, I can keep track of the keys, where the hash reference is pointing, I was just curious if I could skip that.</p>\n"}, {"tags": ["perl", "awk", "sed"], "comments": [{"owner": {"reputation": 33642, "user_id": 620097, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/820980fd43f2607a815c1f3dbfe152cc?s=128&d=identicon&r=PG", "display_name": "shellter", "link": "https://stackoverflow.com/users/620097/shellter"}, "edited": false, "score": 0, "creation_date": 1531924577, "post_id": 51404687, "comment_id": 89780388, "body": "try <a href=\"https://shellcheck.net\" rel=\"nofollow noreferrer\">shellcheck.net</a> to see what it flags. Generally don&#39;t use dbl-quotes for <code>sed</code> cmds. And some seds require escaping the parens for named buffers to work.  <code>&#39;&#47;\\([0-9]+\\)&#47;factor \\1&#47;ge</code>. That&#39;a a weird error message, and not from <code>sed</code>. Good luck."}, {"owner": {"reputation": 1405, "user_id": 1476792, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/29c301fe5a5792851c5eb25873d06214?s=128&d=identicon&r=PG", "display_name": "Yimin Rong", "link": "https://stackoverflow.com/users/1476792/yimin-rong"}, "reply_to_user": {"reputation": 33642, "user_id": 620097, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/820980fd43f2607a815c1f3dbfe152cc?s=128&d=identicon&r=PG", "display_name": "shellter", "link": "https://stackoverflow.com/users/620097/shellter"}, "edited": false, "score": 0, "creation_date": 1531925260, "post_id": 51404687, "comment_id": 89780872, "body": "@shellter - confirmed same results with single quotes; <code>shellcheck</code> indicates no issues."}, {"owner": {"reputation": 33642, "user_id": 620097, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/820980fd43f2607a815c1f3dbfe152cc?s=128&d=identicon&r=PG", "display_name": "shellter", "link": "https://stackoverflow.com/users/620097/shellter"}, "edited": false, "score": 0, "creation_date": 1531925722, "post_id": 51404687, "comment_id": 89781190, "body": "Also, its not clear from your code. Even if we get it to work, it will only insert the word &quot;factor&quot; before each number. Your Q seems to want to actually run a function on each of the found words. No version of <code>sed</code> that I know of will do that for you. You&#39;ll need to use a higher level language.  I think it could be done in awk, and definitely python, perl and others. Good luck."}, {"owner": {"reputation": 33642, "user_id": 620097, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/820980fd43f2607a815c1f3dbfe152cc?s=128&d=identicon&r=PG", "display_name": "shellter", "link": "https://stackoverflow.com/users/620097/shellter"}, "edited": false, "score": 0, "creation_date": 1531925848, "post_id": 51404687, "comment_id": 89781266, "body": "<i>&quot;Is what I&#39;m asking for possible in sed, perl, or awk?&quot;</i> . Just re-read this. Yes possible in perl and awk. Not in sed ;-) Good luck."}, {"owner": {"reputation": 1405, "user_id": 1476792, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/29c301fe5a5792851c5eb25873d06214?s=128&d=identicon&r=PG", "display_name": "Yimin Rong", "link": "https://stackoverflow.com/users/1476792/yimin-rong"}, "reply_to_user": {"reputation": 33642, "user_id": 620097, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/820980fd43f2607a815c1f3dbfe152cc?s=128&d=identicon&r=PG", "display_name": "shellter", "link": "https://stackoverflow.com/users/620097/shellter"}, "edited": false, "score": 0, "creation_date": 1531925990, "post_id": 51404687, "comment_id": 89781369, "body": "@shellter - That&#39;s too bad, it would seem to be a really powerful and useful feature for <code>sed</code>."}, {"owner": {"reputation": 33642, "user_id": 620097, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/820980fd43f2607a815c1f3dbfe152cc?s=128&d=identicon&r=PG", "display_name": "shellter", "link": "https://stackoverflow.com/users/620097/shellter"}, "edited": false, "score": 1, "creation_date": 1531926475, "post_id": 51404687, "comment_id": 89781760, "body": "IMHO, you&#39;re really holding yourself back, by trying to stick to one (really limited) tool. Anything beyond simple <code>s&#47;s&#47;r&#47;</code> replacements should be done in a real language designed with text processing in mind (yes, sed is definitely only for text processing ;-) ). What I always found was, that even though I mastered <code>sed</code>, <code>csh</code> for my current job scope, when I moved up, I found that I could spend hours trying to find a super advanced usage of <code>csh</code> OR I could just write it in 5 minutes using a bourne shell deriviative (bash, zsh, ksh). Just saying ;-) ...."}, {"owner": {"reputation": 33642, "user_id": 620097, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/820980fd43f2607a815c1f3dbfe152cc?s=128&d=identicon&r=PG", "display_name": "shellter", "link": "https://stackoverflow.com/users/620097/shellter"}, "edited": false, "score": 0, "creation_date": 1531926538, "post_id": 51404687, "comment_id": 89781798, "body": "The same would be true for <code>sed</code> vs <code>awk</code> and or <code>perl</code> and now <code>python</code>. Good luck!"}], "answers": [{"comments": [{"owner": {"reputation": 1405, "user_id": 1476792, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/29c301fe5a5792851c5eb25873d06214?s=128&d=identicon&r=PG", "display_name": "Yimin Rong", "link": "https://stackoverflow.com/users/1476792/yimin-rong"}, "edited": false, "score": 0, "creation_date": 1531943523, "post_id": 51407919, "comment_id": 89791380, "body": "Thank you for the answer. Unfortunately, I can&#39;t hardcode the output. It has to do a search and replace into the input."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 1405, "user_id": 1476792, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/29c301fe5a5792851c5eb25873d06214?s=128&d=identicon&r=PG", "display_name": "Yimin Rong", "link": "https://stackoverflow.com/users/1476792/yimin-rong"}, "edited": false, "score": 0, "creation_date": 1531960288, "post_id": 51407919, "comment_id": 89797054, "body": "@YiminRong Moved the solution which directly replaces numbers in the string to the top (and corrected typos in it)"}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": false, "score": 3, "last_activity_date": 1531985157, "last_edit_date": 1531985157, "creation_date": 1531935114, "answer_id": 51407919, "question_id": 51404687, "link": "https://stackoverflow.com/questions/51404687/search-and-replace-using-a-custom-utility-to-do-the-transformation/51407919#51407919", "title": "Search and replace using a custom utility to do the transformation", "body": "<p>To replace numbers with the output of <code>factor</code> on each</p>\n\n<pre><code>echo \"Given these numbers: 27, 13, 230, and 19, it is evident which are primes.\" | \n    perl -wnE'say s{([0-9]+)}{$f=qx(factor $1); chomp $f; $f}egr'\n</code></pre>\n\n<p>This uses <code>/e</code> modifier to evaluate the replacement side as code. The <code>qx</code> runs the command and returns its output, from which the newline is removed  by <code>chomp</code>. With <code>/g</code> it keeps going through the string to replace all numbers. See below for explanations. </p>\n\n<p>With the <code>/r</code> modifier the substitution operator <code>s///</code> returns the modified string. </p>\n\n<p>Output:</p>\n\n<pre>\nGiven these numbers: 27: 3 3 3, 13: 13, 230: 2 5 23, and 19: 19, it is evident which are primes.\n</pre>\n\n<p>Read on for explanations, in the context of other approaches.</p>\n\n<hr>\n\n<p><em>Original post</em></p>\n\n<p>To extract numbers from lines of input and call a program on each on it, for example</p>\n\n<pre><code>echo \"Given these numbers: 27, 13, 230, and 19, it is evident which are primes.\"\n    | perl -wnE'say \"Result: \", join(\",\", map { qx(factor $_) } /([0-9]+)/g)'\n</code></pre>\n\n<p>The regex's match operator in the <em>list <a href=\"https://perldoc.perl.org/perldata.html#Context\" rel=\"nofollow noreferrer\">context</em></a><sup>&dagger;</sup> returns matches, while the <a href=\"https://perldoc.perl.org/perlretut.html#Using-regular-expressions-in-Perl\" rel=\"nofollow noreferrer\"><code>/g</code> modifier</a> makes it find all of them. That list is passed to <a href=\"http://perldoc.perl.org/functions/map.html\" rel=\"nofollow noreferrer\">map</a>, which applies the code in its body to each element and returns the resulting list.\nThe <a href=\"https://perldoc.perl.org/perlop.html#Quote-Like-Operators\" rel=\"nofollow noreferrer\"><code>qx</code> is the operator</a> form of backticks, which returns the output of the command, what seems to be what you wanted. </p>\n\n<p>I'll leave formatting of the output to you, here the list is <a href=\"https://perldoc.perl.org/functions/join.html\" rel=\"nofollow noreferrer\">join</a>-ed by <code>,</code> and prepended by a string.</p>\n\n<p>If the input lines are in a file</p>\n\n<pre><code>perl -wnE'say \"Result: \", join(\",\", map { qx(factor $_) } /([0-9]+)/g)' file\n</code></pre>\n\n<p>For more involved processing you can assign the list of matches to an array \nand then do what you please with it</p>\n\n<pre><code>perl -wnE'@n = /([0-9]+)/g; for (@n) { say \"process $_\" }' file\n</code></pre>\n\n<p>This processes one line of input at a time.</p>\n\n<p>More simply, to call the program <code>factor</code> on each number as it is matched </p>\n\n<pre><code>perl -wnE'while (/([0-9]+)/g) { say qx(factor $1) }' file\n</code></pre>\n\n<p>The regex in the <code>while</code> condition keeps looking for matches in each iteration, continuing from the position of the previous match, by the virtue of <code>/g</code> modifier in <em>scalar context</em><sup>&dagger;</sup>. Inside the body you can then do what you need with each captured match which is in <code>$1</code>.</p>\n\n<hr>\n\n<p><sup>&dagger;</sup> &nbsp; The list context in the first use of <code>/g</code>\nis imposed since <code>map</code> takes a list as input. In the second one the context is scalar since the code in the <code>while</code> condition is evaluated to a scalar.</p>\n"}, {"comments": [{"owner": {"reputation": 1405, "user_id": 1476792, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/29c301fe5a5792851c5eb25873d06214?s=128&d=identicon&r=PG", "display_name": "Yimin Rong", "link": "https://stackoverflow.com/users/1476792/yimin-rong"}, "edited": false, "score": 0, "creation_date": 1531943722, "post_id": 51408468, "comment_id": 89791474, "body": "Thank you. So far yours seems to be the best answer."}, {"owner": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "edited": false, "score": 0, "creation_date": 1531944393, "post_id": 51408468, "comment_id": 89791802, "body": "best because it&#39;s so clear that you can tell by reading it that it doesn&#39;t contain any bugs, (e.g. would it work if the input contained regexp or backreference metacharacters?) and/or you would find it easiest to enhance later when you have to build upon it and/or it&#39;s most portable and/or most efficient and/or best by some other measure?"}, {"owner": {"reputation": 1228, "user_id": 4709524, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/wGrTV.jpg?s=128&g=1", "display_name": "beasy", "link": "https://stackoverflow.com/users/4709524/beasy"}, "edited": false, "score": 0, "creation_date": 1531954938, "post_id": 51408468, "comment_id": 89795827, "body": "It should work on any string. But I grant that it&#39;s not pretty. It would definitely be more readable as a script, in which case I would also be using strict syntax."}], "tags": [], "owner": {"reputation": 1228, "user_id": 4709524, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/wGrTV.jpg?s=128&g=1", "display_name": "beasy", "link": "https://stackoverflow.com/users/4709524/beasy"}, "is_accepted": false, "score": 2, "last_activity_date": 1531937440, "creation_date": 1531937440, "answer_id": 51408468, "question_id": 51404687, "link": "https://stackoverflow.com/questions/51404687/search-and-replace-using-a-custom-utility-to-do-the-transformation/51408468#51408468", "title": "Search and replace using a custom utility to do the transformation", "body": "<p>Here's a solution for replacing the text within the string:</p>\n\n<pre><code>perl -MList::Util=pairs -E '($m,$s) = ($_-&gt;key,$_-&gt;value) and $ARGV[0] =~ s/$m/$s/ for pairs map {$_, qx/factor $_/} $ARGV[0] =~ /(\\d+)/g; say $ARGV[0]' \\\n'Given these numbers: 27, 13, 230, and 19, it is evident which are primes'\n</code></pre>\n\n<p>Note that the output of <code>factor</code> has a newline at the end.</p>\n"}, {"comments": [{"owner": {"reputation": 1405, "user_id": 1476792, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/29c301fe5a5792851c5eb25873d06214?s=128&d=identicon&r=PG", "display_name": "Yimin Rong", "link": "https://stackoverflow.com/users/1476792/yimin-rong"}, "edited": false, "score": 0, "creation_date": 1531943053, "post_id": 51408686, "comment_id": 89791156, "body": "Thank you. The input may have <code>$</code> and other special characters in it, so that might cause issues."}], "tags": [], "owner": {"reputation": 46858, "user_id": 967492, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/526ea226101e199d029049dda22a4e58?s=128&d=identicon&r=PG", "display_name": "potong", "link": "https://stackoverflow.com/users/967492/potong"}, "is_accepted": false, "score": 1, "last_activity_date": 1531938289, "creation_date": 1531938289, "answer_id": 51408686, "question_id": 51404687, "link": "https://stackoverflow.com/questions/51404687/search-and-replace-using-a-custom-utility-to-do-the-transformation/51408686#51408686", "title": "Search and replace using a custom utility to do the transformation", "body": "<p>This might work for you (GNU sed):</p>\n\n<pre><code>sed 's/[0-9]\\+/$(factor &amp;)/g;s/.*/echo \"&amp;\"/e' file\n</code></pre>\n\n<p>Surround all numbers by an inline function call, then surround the entire string by double quotes and evaluate that string using <code>echo</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 1405, "user_id": 1476792, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/29c301fe5a5792851c5eb25873d06214?s=128&d=identicon&r=PG", "display_name": "Yimin Rong", "link": "https://stackoverflow.com/users/1476792/yimin-rong"}, "edited": false, "score": 0, "creation_date": 1531996609, "post_id": 51410019, "comment_id": 89811791, "body": "Thank you. Yours is the clearest answer so far. All the answers work more-or-less in the specific case, but I&#39;m finding issues when trying to modify the regular expressions in all of them. For example, to recognize numbers written in assembly languages: <code>$FFFF</code>, <code>&amp;7777</code> <code>%1111</code>, the <code>$</code> or the <code>&amp;</code> messes up, and because all the quoting possibilities are &quot;used up&quot; there&#39;s no way to escape them and make the regex and/or the evaluation work. I think I&#39;m just going to bite the bullet and write a parser in <code>re2c</code>."}, {"owner": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "reply_to_user": {"reputation": 1405, "user_id": 1476792, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/29c301fe5a5792851c5eb25873d06214?s=128&d=identicon&r=PG", "display_name": "Yimin Rong", "link": "https://stackoverflow.com/users/1476792/yimin-rong"}, "edited": false, "score": 2, "creation_date": 1531998869, "post_id": 51410019, "comment_id": 89813279, "body": "If you have to deal with &quot;numbers&quot; that are something other than digits then obviously you should have included that in your sample input/output. It&#39;d almost certainly have been trivial for us to include whatever cases you have to deal with but at this point everyone&#39;s put effort into helping you solve the problem you said you had so YMV with getting people to revisit it now as everyone hates <a href=\"https://meta.stackexchange.com/q/43478/361691\">Chameleon Questions</a>"}, {"owner": {"reputation": 1405, "user_id": 1476792, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/29c301fe5a5792851c5eb25873d06214?s=128&d=identicon&r=PG", "display_name": "Yimin Rong", "link": "https://stackoverflow.com/users/1476792/yimin-rong"}, "edited": false, "score": 0, "creation_date": 1532088990, "post_id": 51410019, "comment_id": 89854474, "body": "I was debating how much detail to put in the question. If there&#39;s too much, it looks &quot;well defined&quot; and people suspect it&#39;s a homework question. Because I was asking a generic question, with the generic requirement of <i>for every match of a regular expression, call a custom utility with the characters comprising the match</i> I was hoping people would code for the generic case and not for the specific illustration."}, {"owner": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "reply_to_user": {"reputation": 1405, "user_id": 1476792, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/29c301fe5a5792851c5eb25873d06214?s=128&d=identicon&r=PG", "display_name": "Yimin Rong", "link": "https://stackoverflow.com/users/1476792/yimin-rong"}, "edited": false, "score": 0, "creation_date": 1532092083, "post_id": 51410019, "comment_id": 89856338, "body": "That&#39;s fine if you knew how to write the regular expression you really cared about but you got the generic answer (replace the regexp <code>[0-9]+</code> in my scripts with your real regexp) to your generic question and now you say you can&#39;t use it for some reason and have to go write a parser in some tool. As long as you&#39;re happy I guess..."}], "tags": [], "owner": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "is_accepted": true, "score": 2, "last_activity_date": 1531944240, "last_edit_date": 1531944240, "creation_date": 1531943528, "answer_id": 51410019, "question_id": 51404687, "link": "https://stackoverflow.com/questions/51404687/search-and-replace-using-a-custom-utility-to-do-the-transformation/51410019#51410019", "title": "Search and replace using a custom utility to do the transformation", "body": "<p>The <code>1</code> in your awk command output comes from you printing the return code from <code>system()</code>. <code>system()</code> returns the exit status of the command it calls, not the output from the command - that just goes to stdout. Also, with the syntax you used system() is called before gensub() so you're calling factor with the literal string <code>\\\\1</code>.</p>\n\n<p>The correct syntax to do what you tried to do with GNU awk:</p>\n\n<pre><code>awk '{r = gensub(/([0-9]+)/, system(\"factor \\\\1\"), \"g\"); print r}'\n</code></pre>\n\n<p>is this which will work with any awk:</p>\n\n<pre><code>$ awk '{\n    head = \"\"\n    while ( match($0,/[0-9]+/) ) {\n        cmd = \"factor \" substr($0,RSTART,RLENGTH)\n        ret = ( (cmd | getline line) &gt; 0 ? line : cmd \" failed\" )\n        close(cmd)\n        head = head substr($0,1,RSTART-1) ret\n        $0 = substr($0,RSTART+RLENGTH)\n    }\n    $0 = head $0\n    print\n}' &lt;&lt;&lt; 'Given these numbers: 27, 13, 230, and 19, it is evident which are primes.'\nGiven these numbers: 27: 3 3 3, 13: 13, 230: 2 5 23, and 19: 19, it is evident which are primes.\n</code></pre>\n\n<p>and with GNU awk for the 4th arg to split() it could be written as:</p>\n\n<pre><code>$ awk '{\n    n = split($0,others,/[0-9]+/,nums)\n    $0 = \"\"\n    for (i=1; i&lt;n; i++) {\n        cmd = \"factor \" nums[i]\n        ret = ( (cmd | getline line) &gt; 0 ? line : cmd \" failed\" )\n        close(cmd)\n        $0 = $0 others[i] ret\n    }\n    $0 = $0 others[n]\n    print\n}' &lt;&lt;&lt; 'Given these numbers: 27, 13, 230, and 19, it is evident which are primes.'\nGiven these numbers: 27: 3 3 3, 13: 13, 230: 2 5 23, and 19: 19, it is evident which are primes.\n</code></pre>\n"}], "owner": {"reputation": 1405, "user_id": 1476792, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/29c301fe5a5792851c5eb25873d06214?s=128&d=identicon&r=PG", "display_name": "Yimin Rong", "link": "https://stackoverflow.com/users/1476792/yimin-rong"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 135, "favorite_count": 0, "accepted_answer_id": 51410019, "answer_count": 4, "score": 3, "last_activity_date": 1535395157, "creation_date": 1531924277, "last_edit_date": 1535395157, "question_id": 51404687, "link": "https://stackoverflow.com/questions/51404687/search-and-replace-using-a-custom-utility-to-do-the-transformation", "title": "Search and replace using a custom utility to do the transformation", "body": "<p>I want to run a custom replacement utility for values matching a regular expression. This means for every match of a regular expression, call a custom utility with the characters comprising the match. The output of the custom utility replaces the original characters.</p>\n\n<p>Can illustrate using <code>factor</code>, but this case should not be considered exhaustive, for example may want to include expressions with <code>$</code>, <code>%</code>, and arithmetic operators:</p>\n\n<pre><code>$ factor 230\n230: 2 5 23\n</code></pre>\n\n<p>Using this utility and invoking it for all integers in the input, this is an example input and output:</p>\n\n<pre><code>$ [code] &lt;&lt;&lt; 'Given these numbers: 27, 13, 230, and 19, it is evident which are primes.'\nGiven these numbers: 27: 3 3 3, 13: 13, 230: 2 5 23, and 19: 19, it is evident which are primes.\n</code></pre>\n\n<p>I thought this might work, but it looks like it's trying to interpret the input directly. Using <code>sed (GNU sed) 4.2.2</code>. </p>\n\n<pre><code>$ sed -E 's/([0-9]+)/factor \\1/ge' &lt;&lt;&lt; 'Given these numbers: 27, 13, 230, and 19, it is evident which are primes.'\nsh: 1: Given: not found\n</code></pre>\n\n<p>Obviously I'm not understanding what the <code>e</code> flag does. I tried doing this in <code>awk</code>:</p>\n\n<pre><code>$ awk '{r = gensub(/([0-9]+)/, system(\"factor \\\\1\"), \"g\"); print r}' &lt;&lt;&lt; 'Given the numbers with factors: 27, 13, 230, and 19, it is evident which are primes.'\n1:\nGiven the numbers with factors: 0, 0, 0, and 0, it is evident which are primes.\n</code></pre>\n\n<p>I'm not sure where the <code>1:</code> comes from, but it's apparent that it's printing just the return code from <code>system</code>. There doesn't appear to be a way to capture the standard output from a command in <code>awk</code>.</p>\n\n<p>Is what I'm asking for possible in the core utilities?</p>\n"}, {"tags": ["perl", "url", "mojolicious"], "answers": [{"tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": true, "score": 6, "last_activity_date": 1531924191, "creation_date": 1531924191, "answer_id": 51404643, "question_id": 51404491, "link": "https://stackoverflow.com/questions/51404491/how-can-i-modify-only-a-part-of-query-in-url/51404643#51404643", "title": "How can I modify only a part of &quot;query&quot; in URL?", "body": "<p>Because you call <code>-&gt;merge</code> on the Mojo::Parameters object that <code>-&gt;query</code> returns explicitly you only get the query part of the URL. Get rid of the <code>-&gt;merge</code> and <a href=\"https://metacpan.org/pod/Mojo::URL#query\" rel=\"noreferrer\">use an array reference</a> instead, and it will return the URL object. </p>\n\n<blockquote>\n  <p>Query part of this URL, key/value pairs in an array reference will be merged with \"merge\" in Mojo::Parameters, and key/value pairs in a hash reference appended with \"append\" in Mojo::Parameters, defaults to a Mojo::Parameters object.</p>\n</blockquote>\n\n<p>This does what you want.</p>\n\n<pre><code>use Mojo::URL;\n\nmy $url = Mojo::URL-&gt;new('http://example.org/foo?bar=test&amp;q_key1=asdf');\nmy $new_url = $url-&gt;query( \n    [ \n        'q_key1' =&gt; 'something',\n        'q_key2' =&gt; 'something2',\n    ]\n);\nsay $new_url-&gt;to_string;\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>http://example.org/foo?bar=test&amp;q_key1=something&amp;q_key2=something2\n</code></pre>\n\n<p>Note that this is not a copy, but the same object with updated values. You don't need to assign it to a <code>$new_url</code>.</p>\n"}], "owner": {"reputation": 167, "user_id": 10034680, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4fac2f173884d186d88e7f7c8b951f5e?s=128&d=identicon&r=PG&f=1", "display_name": "Rattiku", "link": "https://stackoverflow.com/users/10034680/rattiku"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 51, "favorite_count": 1, "accepted_answer_id": 51404643, "answer_count": 1, "score": 2, "last_activity_date": 1531924191, "creation_date": 1531923756, "question_id": 51404491, "link": "https://stackoverflow.com/questions/51404491/how-can-i-modify-only-a-part-of-query-in-url", "title": "How can I modify only a part of &quot;query&quot; in URL?", "body": "<p>I have a Mojo app. And I have a list of URLs from \"a\" tags. I want to <em>either</em> add some query params to each one or modify existing query params in it if they already exist in that URL. The rest of a URL must remain untouched.\nHere's how I'm doing it:</p>\n\n<pre><code>  $doc-&gt;find('a')-&gt;each(sub {\n    my $aTag = $_;\n    my $aUrl = Mojo::URL-&gt;new($aTag-&gt;attr('href'));\n    my $newUrl = $aUrl-&gt;query-&gt;merge('q_key1' =&gt; 'something', 'q_key2' =&gt; 'something2'); # &lt;--- warn: returns only the query part, removes the \"path\" part\n    $_-&gt;attr('href' =&gt; $newUrl-&gt;to_string);\n  });  \n</code></pre>\n\n<p>The problem is that it returns only the query part and removes, for instance, the \"path\" part when it exists.</p>\n\n<p>Whereas I want all of it as is: path, domain, proto, etc... -- I only want to add/modify the query part and only \"q_key1\" and \"q_key1\" params.</p>\n\n<p>How can I do that?</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 6, "creation_date": 1531924277, "post_id": 51404314, "comment_id": 89780153, "body": "It would help to know the exact <code>h2xs</code> command line that you ran. It&#39;s never done that for me :-)"}], "answers": [{"tags": [], "owner": {"reputation": 576, "user_id": 5011914, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-VmVVjxIV_Z4/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-hRfo1mLeBEbuXEzu2dqYltIE6c1Q/mo/photo.jpg?sz=128", "display_name": "k-mx", "link": "https://stackoverflow.com/users/5011914/k-mx"}, "is_accepted": false, "score": 0, "last_activity_date": 1532111882, "creation_date": 1532111882, "answer_id": 51448582, "question_id": 51404314, "link": "https://stackoverflow.com/questions/51404314/why-does-h2xs-generate-module-name-with-trailing-colons/51448582#51448582", "title": "Why does h2xs generate module name with trailing colons?", "body": "<p>My suggestion: trailing double colon signals that we are dealing with package name.</p>\n\n<p>Example from <a href=\"https://www.perlmonks.org/?node_id=986250\" rel=\"nofollow noreferrer\">perlmonks </a>:</p>\n\n<pre><code>use 5.010;\n\n{\n   package Foo;\n   sub new { bless [] }\n   sub Bar { 'Quux' }\n}\n{\n   package Foo::Bar;\n   sub new { bless [] }\n}\n{\n   package Quux;\n   sub new { bless [] }\n}\n\nmy $object1 = Foo::Bar::-&gt;new;\nsay ref $object1;   # says \"Foo::Bar\"\n\nmy $object2 = Foo::Bar-&gt;new;\nsay ref $object2;   # says \"Quux\"\n</code></pre>\n"}], "owner": {"reputation": 8277, "user_id": 270511, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/cdb15b84fe2146fa0f381240875081bd?s=128&d=identicon&r=PG", "display_name": "Lawrence I. Siden", "link": "https://stackoverflow.com/users/270511/lawrence-i-siden"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 48, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1532111882, "creation_date": 1531923269, "last_edit_date": 1532042157, "question_id": 51404314, "link": "https://stackoverflow.com/questions/51404314/why-does-h2xs-generate-module-name-with-trailing-colons", "title": "Why does h2xs generate module name with trailing colons?", "body": "<p>I ran h2xs to start a new Perl module.  It creates the main module and Makefile.PL with a package name ending with double colons.  For example, in My/Module.pm:</p>\n\n<pre><code>package My::Module::\n</code></pre>\n\n<p>and in Makefile.PL:</p>\n\n<pre><code>WriteMakefile(\n    NAME   =&gt; 'My::Module::',\n    ...\n);\n</code></pre>\n\n<p>As a consequence, the tiny script </p>\n\n<pre><code>perl -Ipath/to/my/module -MMy::Module -e 'print $My::Module::VERSION, \"\\n\"'\n</code></pre>\n\n<p>prints nothing.</p>\n\n<p>When I change the package name to 'My::Module' without the trailing colons, that script will print the version number.</p>\n\n<p>Why does h2xs append the '::' to the main package name by default?  I couldn't find anything in the docs.</p>\n\n<p>Perl 5.18.2</p>\n"}, {"tags": ["perl", "tie", "storable"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1531913162, "post_id": 51400732, "comment_id": 89772193, "body": "You need to probably load Hash::Case::Lower before the restore so it can tie it."}, {"owner": {"reputation": 13971, "user_id": 554807, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/11449ff391eb9e813ac9f467ae6e0102?s=128&d=identicon&r=PG", "display_name": "GreenAsJade", "link": "https://stackoverflow.com/users/554807/greenasjade"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1531913960, "post_id": 51400732, "comment_id": 89772712, "body": "Wow - so easy!   By all means answer and I will accept."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1531914201, "post_id": 51400732, "comment_id": 89772881, "body": "Lucky guess. I&#39;ve seen it with objects, not with a <code>tie</code>, but I guess it really is the same thing. :)"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1531914255, "post_id": 51400732, "comment_id": 89772918, "body": "(I do wonder if those passwords are clear-text though...)"}, {"owner": {"reputation": 13971, "user_id": 554807, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/11449ff391eb9e813ac9f467ae6e0102?s=128&d=identicon&r=PG", "display_name": "GreenAsJade", "link": "https://stackoverflow.com/users/554807/greenasjade"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1531914525, "post_id": 51400732, "comment_id": 89773110, "body": "Nope, it&#39;s just the hashes :)"}], "answers": [{"tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": true, "score": 4, "last_activity_date": 1531922410, "last_edit_date": 1531922410, "creation_date": 1531914178, "answer_id": 51401171, "question_id": 51400732, "link": "https://stackoverflow.com/questions/51400732/error-restoring-from-nstore-fd-cant-locate-object-method-firstkey-via-packag/51401171#51401171", "title": "Error restoring from nstore_fd: Can&#39;t locate object method &quot;FIRSTKEY&quot; via package &quot;Hash::Case::Lower&quot;", "body": "<p>When you restore objects that are\n<a href=\"https://perldoc.perl.org/functions/tie.html\" rel=\"nofollow noreferrer\"><code>tied</code></a>\nto packages, you first need to load their classes.\n<a href=\"https://metacpan.org/pod/Storable\" rel=\"nofollow noreferrer\"><code>Storable</code></a>\nas well as, for example,\n<a href=\"https://metacpan.org/pod/Sereal\" rel=\"nofollow noreferrer\"><code>Sereal</code></a>\nwill not load them for you. It recreates the objects as they are stored, and Perl expects the packages to exist.</p>\n\n<p>All you need to do is load the module before deserializing your backup.</p>\n\n<pre><code>use Storable qw(fd_retrieve); \nuse Hash::Case::Lower;\n\nmy $data = fd_retrieve(*STDIN);  # the backup file \n</code></pre>\n"}], "owner": {"reputation": 13971, "user_id": 554807, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/11449ff391eb9e813ac9f467ae6e0102?s=128&d=identicon&r=PG", "display_name": "GreenAsJade", "link": "https://stackoverflow.com/users/554807/greenasjade"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 49, "favorite_count": 0, "accepted_answer_id": 51401171, "answer_count": 1, "score": 1, "last_activity_date": 1531922410, "creation_date": 1531912840, "question_id": 51400732, "link": "https://stackoverflow.com/questions/51400732/error-restoring-from-nstore-fd-cant-locate-object-method-firstkey-via-packag", "title": "Error restoring from nstore_fd: Can&#39;t locate object method &quot;FIRSTKEY&quot; via package &quot;Hash::Case::Lower&quot;", "body": "<p>I am doing some archeology of a program from 2005.   It's been happily writing backups like this:</p>\n\n<pre><code>use Storable qw(nstore_fd);  \nmy %data = \n    (\n     \"Games\" =&gt; \\%Games,\n     \"Members\" =&gt; \\%Members,\n     \"Scenarios\" =&gt; \\%Scenarios,\n     \"Passwords\" =&gt; \\%Passwords,\n     \"TourneyNames\" =&gt; \\%TourneyNames\n     );\n\n    nstore_fd(\\%data, *BACKUP) or die \"Can't write backup: $!\";\n</code></pre>\n\n<p>I need to recover some of this data.</p>\n\n<p>I did this:</p>\n\n<pre><code>use Storable qw(fd_retrieve); \n\n$data = fd_retrieve(*STDIN);  # the backup file \n\nprint keys %{$data}, \"\\n\";\n\nforeach $thing (keys(%{$data})) {\n    print \"$thing\\n\";\n    print scalar keys %{$data-&gt;{$thing}}, \"\\n\";\n}\n</code></pre>\n\n<p>and got:</p>\n\n<pre><code>$ perl ~/foo.pl &lt; BobsterBackup2018-7-9-35131.bak\nGamesMembersPasswordsScenariosTourneyNames\nGames\n15556\nMembers\nCan't locate object method \"FIRSTKEY\" via package \"Hash::Case::Lower\" at /Users/mgregory/foo.pl line 9.\n$ \n</code></pre>\n\n<p>I see that the original source has:</p>\n\n<pre><code>tie %Members, 'Hash::Case::Lower';    # index by non-case-sensitive member-name.\n</code></pre>\n\n<p>... but I'm at a loss what to make of it!</p>\n"}, {"tags": ["git", "perl", "gitolite"], "comments": [{"owner": {"reputation": 391, "user_id": 1725535, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qnaZJ.png?s=128&g=1", "display_name": "Shubham Naik", "link": "https://stackoverflow.com/users/1725535/shubham-naik"}, "edited": false, "score": 1, "creation_date": 1531898401, "post_id": 51395809, "comment_id": 89762820, "body": "How do you know &#39;&quot;git push&quot; is succeed&#39;? Also you forgot to mention the remote repo like &#39;origin&#39; and the branch"}, {"owner": {"reputation": 942, "user_id": 5540925, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/EvR2E.jpg?s=128&g=1", "display_name": "Najam", "link": "https://stackoverflow.com/users/5540925/najam"}, "edited": false, "score": 0, "creation_date": 1531898635, "post_id": 51395809, "comment_id": 89762963, "body": "<a href=\"https://stackoverflow.com/questions/15396853/how-to-solve-invalid-repo-name-git-error?answertab=active#tab-top\" title=\"how to solve invalid repo name git error\">stackoverflow.com/questions/15396853/&hellip;</a>"}, {"owner": {"reputation": 1034879, "user_id": 6309, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7aa22372b695ed2b26052c340f9097eb?s=128&d=identicon&r=PG", "display_name": "VonC", "link": "https://stackoverflow.com/users/6309/vonc"}, "reply_to_user": {"reputation": 942, "user_id": 5540925, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/EvR2E.jpg?s=128&g=1", "display_name": "Najam", "link": "https://stackoverflow.com/users/5540925/najam"}, "edited": false, "score": 0, "creation_date": 1531898691, "post_id": 51395809, "comment_id": 89763000, "body": "@Najam I agree ;) (having written that post)"}, {"owner": {"reputation": 99, "user_id": 3416447, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c04d9b99792da9c9fb64219db12a5045?s=128&d=identicon&r=PG&f=1", "display_name": "user3416447", "link": "https://stackoverflow.com/users/3416447/user3416447"}, "reply_to_user": {"reputation": 391, "user_id": 1725535, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qnaZJ.png?s=128&g=1", "display_name": "Shubham Naik", "link": "https://stackoverflow.com/users/1725535/shubham-naik"}, "edited": false, "score": 0, "creation_date": 1531900131, "post_id": 51395809, "comment_id": 89763840, "body": "@Shubham Naik because, I succeed add new user."}, {"owner": {"reputation": 1034879, "user_id": 6309, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7aa22372b695ed2b26052c340f9097eb?s=128&d=identicon&r=PG", "display_name": "VonC", "link": "https://stackoverflow.com/users/6309/vonc"}, "edited": false, "score": 0, "creation_date": 1531905486, "post_id": 51395809, "comment_id": 89767264, "body": "Adding a new user, and pushing an incorrect conf/gitolite.conf (<a href=\"http://gitolite.com/gitolite/conf/\" rel=\"nofollow noreferrer\">gitolite.com/gitolite/conf</a>) file are two different things: you can add successfuly a new public key, creating a new user, while your gitolite.conf might still be incorrect."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 2, "creation_date": 1531908814, "post_id": 51395809, "comment_id": 89769502, "body": "Yet another person who thinks it&#39;s useful to post images of text. I will never understand this. Why do you do it?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1531922124, "post_id": 51395809, "comment_id": 89778653, "body": "If you think it&#39;s not a duplicate of the linked question, update your question to include your configuration"}], "owner": {"reputation": 99, "user_id": 3416447, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c04d9b99792da9c9fb64219db12a5045?s=128&d=identicon&r=PG&f=1", "display_name": "user3416447", "link": "https://stackoverflow.com/users/3416447/user3416447"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 63, "favorite_count": 1, "closed_date": 1531922096, "answer_count": 0, "score": 1, "last_activity_date": 1531902128, "creation_date": 1531898205, "last_edit_date": 1531902128, "question_id": 51395809, "link": "https://stackoverflow.com/questions/51395809/git-push-error-message", "closed_reason": "Duplicate", "title": "git push error message", "body": "<p>I installed gitolite and git server in linux.\nI created repository, push anythings.</p>\n\n<p>\"git push\" is succeed. because I succeed add new user.\nbut It show error.\nis this,</p>\n\n<p><a href=\"https://i.stack.imgur.com/QvTX7.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/QvTX7.png\" alt=\"enter image description here\"></a></p>\n\n<blockquote>\n  <p>remote: FATAL: invalid repo ''</p>\n</blockquote>\n\n<p>what is this?\nI checked this answers,  <a href=\"https://stackoverflow.com/questions/35847483/gitolite-refuses-to-accept-commits-to-gitolite-admin-git\">Gitolite refuses to accept commits to gitolite-admin.git</a>. but unsolved.</p>\n\n<p>I want to clear this error.</p>\n\n<p>and, This error is not only 1 repository but also all of repositories show. This error is not only 1 user but also all of user show.</p>\n\n<p>I chekced \n<a href=\"https://stackoverflow.com/questions/15396853/how-to-solve-invalid-repo-name-git-error?answertab=active#tab-top\">How to solve &#39;invalid repo name&#39; Git error?</a></p>\n\n<p>but I don't understand.</p>\n\n<pre><code>_die \"invalid repo name: '$repo'\" if $repo !~ $REPONAME_PATT; \n</code></pre>\n\n<p>will be work only  <code>$soc =~ m(^($git_commands) '?/?(.*?)'?$)</code> is true.\nmaybe $soc is \"git push\". and $git_commands is \"git-upload-pack|git-receive-pack|git-upload-archive\".</p>\n\n<p>so, My question seems to have nothing to do with that answer.\nI don't know about perl. If I wrong that, please help me. </p>\n"}, {"tags": ["perl", "csv", "parsing", "text"], "comments": [{"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 3, "creation_date": 1531872569, "post_id": 51391677, "comment_id": 89755516, "body": "What have you tried? How did it fail?"}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1531872668, "post_id": 51391677, "comment_id": 89755538, "body": "Can you show the expected output for the given sample input? It&#39;s unclear what parts of the data should be used."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1531879994, "post_id": 51391677, "comment_id": 89756974, "body": "@choroba: Transposing this data gives rows like <code>P-LCC|EP-LCC|2|undef|P-LCC|EP-1S</code>, and the fourteenth row is <code>P-HCC|EP-HCC|2|undef|3|EP-2S</code> which corresponds to the OP&#39;s requested output. &quot;Header&quot; row five looks like <code>Soc&#47;Pac|Chop&#47;Segment|Max KTI|Active KTI|Soc&#47;Pac|Config Name</code>, so it looks like they want <code>Chop&#47;Segment</code> and <code>Config Name</code>\u2014columns two and six\u2014munged into a file name."}, {"owner": {"reputation": 85, "user_id": 4480711, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/8162e424e87f54d3ae391ce44b808404?s=128&d=identicon&r=PG&f=1", "display_name": "chmod", "link": "https://stackoverflow.com/users/4480711/chmod"}, "reply_to_user": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1531881311, "post_id": 51391677, "comment_id": 89757292, "body": "@choroba I&#39;ve not been able to come up with a solution for it yet. I&#39;ve been able to read the contents of the CSV into an array and as a hash key pair but I&#39;ve not had any luck with generating the empty text files with correct names.."}], "answers": [{"comments": [{"owner": {"reputation": 85, "user_id": 4480711, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/8162e424e87f54d3ae391ce44b808404?s=128&d=identicon&r=PG&f=1", "display_name": "chmod", "link": "https://stackoverflow.com/users/4480711/chmod"}, "edited": false, "score": 0, "creation_date": 1531881945, "post_id": 51392781, "comment_id": 89757445, "body": "@Borodin..sorry for the obscure nature of my question. CSV data that I have here is actually the converted format of an excel spreadsheet. Do you think extracting data directly from the spreadsheet would make more sense? Also, I need as many text files as there are valid &#39;EP-&#39; and numbers followed by &#39;S&#39; in the data. Correlation would be first &#39;EP-&#39; picks up the first occurrence of number followed by the &#39;S&#39;..etc. Hope that made it clearer. Will try out your solution too. Thanks!"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 85, "user_id": 4480711, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/8162e424e87f54d3ae391ce44b808404?s=128&d=identicon&r=PG&f=1", "display_name": "chmod", "link": "https://stackoverflow.com/users/4480711/chmod"}, "edited": false, "score": 0, "creation_date": 1531882220, "post_id": 51392781, "comment_id": 89757503, "body": "@chmod: No. Excel files are dreadful to read by anything but Excel. Your description matches what my code does."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 85, "user_id": 4480711, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/8162e424e87f54d3ae391ce44b808404?s=128&d=identicon&r=PG&f=1", "display_name": "chmod", "link": "https://stackoverflow.com/users/4480711/chmod"}, "edited": false, "score": 0, "creation_date": 1531882355, "post_id": 51392781, "comment_id": 89757533, "body": "@chmod: The file names correspond to columns <code>Total K2K AD VNA credits</code> and <code>Total K2K BL VNA credits</code>, right?"}, {"owner": {"reputation": 85, "user_id": 4480711, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/8162e424e87f54d3ae391ce44b808404?s=128&d=identicon&r=PG&f=1", "display_name": "chmod", "link": "https://stackoverflow.com/users/4480711/chmod"}, "edited": false, "score": 0, "creation_date": 1531883003, "post_id": 51392781, "comment_id": 89757675, "body": "yes, that&#39;s correct!! The file names match the columns you named. I have all this data in a CSV file. I&#39;m going to pass the CSV file as an input and try out your solution."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 85, "user_id": 4480711, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/8162e424e87f54d3ae391ce44b808404?s=128&d=identicon&r=PG&f=1", "display_name": "chmod", "link": "https://stackoverflow.com/users/4480711/chmod"}, "edited": false, "score": 0, "creation_date": 1531883316, "post_id": 51392781, "comment_id": 89757762, "body": "@chmod: Just change <code>&lt;DATA&gt;</code> to <code>&lt;&gt;</code> and the program will read from a file you name on the command line instead of from the <code>__DATA__</code> segment."}, {"owner": {"reputation": 85, "user_id": 4480711, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/8162e424e87f54d3ae391ce44b808404?s=128&d=identicon&r=PG&f=1", "display_name": "chmod", "link": "https://stackoverflow.com/users/4480711/chmod"}, "edited": false, "score": 0, "creation_date": 1531885072, "post_id": 51392781, "comment_id": 89758102, "body": "@Borodin..I did that and see the code executing without any errors but it does not do anything..the output file names should get printed on the console or get generated in the same path as the input file, right?"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 85, "user_id": 4480711, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/8162e424e87f54d3ae391ce44b808404?s=128&d=identicon&r=PG&f=1", "display_name": "chmod", "link": "https://stackoverflow.com/users/4480711/chmod"}, "edited": false, "score": 0, "creation_date": 1531888424, "post_id": 51392781, "comment_id": 89758786, "body": "@chmod: Yes, they will appear on the console. What command line are you using?Try running it against the data in your question (as I have edited it\u2014without the line breaks). Or show in your question the first dozen or so lines of the data you&#39;re using."}, {"owner": {"reputation": 85, "user_id": 4480711, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/8162e424e87f54d3ae391ce44b808404?s=128&d=identicon&r=PG&f=1", "display_name": "chmod", "link": "https://stackoverflow.com/users/4480711/chmod"}, "edited": false, "score": 0, "creation_date": 1531890426, "post_id": 51392781, "comment_id": 89759326, "body": "@Borodin..yup that works! One more question though: My actual data looks exactly like the one I&#39;ve posted here, just that it is much much bigger (several lines of CSV)..is this logic limited in any way to just this chunk of data? Or is the array structure unable to expand to the large data I have?"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 85, "user_id": 4480711, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/8162e424e87f54d3ae391ce44b808404?s=128&d=identicon&r=PG&f=1", "display_name": "chmod", "link": "https://stackoverflow.com/users/4480711/chmod"}, "edited": false, "score": 0, "creation_date": 1531905482, "post_id": 51392781, "comment_id": 89767261, "body": "@chmod: It will look through those two columns in every line of the file for <code>EP-</code> values. It should be fine unless those two <code>Total K2K</code> columns are not columns two and six."}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": true, "score": -1, "last_activity_date": 1531882527, "last_edit_date": 1531882527, "creation_date": 1531881501, "answer_id": 51392781, "question_id": 51391677, "link": "https://stackoverflow.com/questions/51391677/reading-csv-and-generating-text-files-with-field-names-read/51392781#51392781", "title": "Reading CSV and generating text files with field names read", "body": "\n\n<p>Your question is very obscure. Not only did you put two line breaks in each line of data, but you didn't explain at all the correspondence between the data and the file names you want</p>\n\n<p>Some detective work reveals that your data seems to be <em>column-wise</em>, </p>\n\n<p>Transposing this data gives rows like</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>P-LCC|EP-LCC|2|undef|P-LCC|EP-1S\n</code></pre>\n\n<p>and the fourteenth row is</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>P-HCC|EP-HCC|2|undef|3|EP-2S\n</code></pre>\n\n<p>which corresponds to your requested output. \"Header\" row five looks like </p>\n\n<pre class=\"lang-none prettyprint-override\"><code>Soc/Pac|Chop/Segment|Max KTI|Active KTI|Soc/Pac|Config Name\n</code></pre>\n\n<p>so it looks like you want <code>Chop/Segment</code> and <code>Config Name</code>\u2014columns two and six of the transposed data\u2014made into a file name.</p>\n\n<p>That is what this code does</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>use strict;\nuse warnings 'all';\nuse feature 'say';\n\nuse List::Util 'max';\n\n# Read and split the data\nmy @data = map { chomp; [ split /,/ ]; } &lt;DATA&gt;;\n\n# Find the last element of the longest row\nmy $n = max map { $#$_ } @data;\n\n# Pull out columns two and six of each row and build filename\nfor my $i ( 0 .. $n ) {\n\n    my @row           = map { $_-&gt;[$i] } @data;\n    my ($chop, $conf) = @row[1,5];\n\n    next unless $chop and $conf;\n    next unless $chop =~ s/^EP\\K-/_/ and $conf =~ s/^EP-//;\n\n    my $filename = sprintf '%s_%s_XXX_lm_por_credits.e', map lc, $chop, $conf;\n    say $filename;\n}\n\n\n__DATA__\nMin KTI AD VNA credits per CHA,,,1,Soc/Pac,P-LCC,P-LCC,P-MCC,P-MCC,P-MHCC,P-MHCC,P-HCC,P-HCC,P-HCC,P-HCC,P-HCC,P-HCC,P-HCC,P-HCC,P-HCC,P-HCC,,,,,,,,,\nTotal K2K AD VNA credits,,,12,Chop/Segment,EP-LCC,EP-LCC,EP-MCC,EP-MCC,EP-MHCC,EP-MHCC,XCC,XCC,EP-HCC,EX-HCC,EX-HCC,EX-HCC,EX-HCC,EX-HCC,EX-HCC,XCC,,,,,,,,,\nMin K2K AD VNA per KTI,,,6,Max KTI,2,2,2,2,2,2,2,2,2,3,3,3,3,3,3,3,,,,,,,,,\nMax KTI AD VNA credits shared by IIO,,,4,Active KTI \nMin KTI AD VNA credits per CHA,,,1,Soc/Pac,P-LCC,P-LCC,P-MCC,P-MCC,P-Stops,3,3,3,3,3,3,4,4,4,3,3,3,3,3,3,4,,,,,,,,,\nTotal K2K BL VNA credits,,,4,Config Name,EP-1S,EP-2S,EP-1S,EP-2S,EP-1S,EP-2S,EP-1S,EP-2S,EP-2S,EX-1S,EX-2S,EX-2S,EX-4S,EX-4S,EX-8S,EX-4S,,,,,,,,,\n</code></pre>\n\n<h3>output</h3>\n\n<pre class=\"lang-none prettyprint-override\"><code>ep_lcc_1s_XXX_lm_por_credits.e\nep_lcc_2s_XXX_lm_por_credits.e\nep_mcc_1s_XXX_lm_por_credits.e\nep_mcc_2s_XXX_lm_por_credits.e\nep_mhcc_1s_XXX_lm_por_credits.e\nep_mhcc_2s_XXX_lm_por_credits.e\nep_hcc_2s_XXX_lm_por_credits.e\n</code></pre>\n"}], "owner": {"reputation": 85, "user_id": 4480711, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/8162e424e87f54d3ae391ce44b808404?s=128&d=identicon&r=PG&f=1", "display_name": "chmod", "link": "https://stackoverflow.com/users/4480711/chmod"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 90, "favorite_count": 0, "accepted_answer_id": 51392781, "answer_count": 1, "score": -3, "last_activity_date": 1531882527, "creation_date": 1531871533, "last_edit_date": 1531879042, "question_id": 51391677, "link": "https://stackoverflow.com/questions/51391677/reading-csv-and-generating-text-files-with-field-names-read", "title": "Reading CSV and generating text files with field names read", "body": "\n\n<p>I have a CSV file that looks something like this: </p>\n\n<pre class=\"lang-none prettyprint-override\"><code>Min KTI AD VNA credits per CHA,,,1,Soc/Pac,P-LCC,P-LCC,P-MCC,P-MCC,P-MHCC,P-MHCC,P-HCC,P-HCC,P-HCC,P-HCC,P-HCC,P-HCC,P-HCC,P-HCC,P-HCC,P-HCC,,,,,,,,,\nTotal K2K AD VNA credits,,,12,Chop/Segment,EP-LCC,EP-LCC,EP-MCC,EP-MCC,EP-MHCC,EP-MHCC,XCC,XCC,EP-HCC,EX-HCC,EX-HCC,EX-HCC,EX-HCC,EX-HCC,EX-HCC,XCC,,,,,,,,,\nMin K2K AD VNA per KTI,,,6,Max KTI,2,2,2,2,2,2,2,2,2,3,3,3,3,3,3,3,,,,,,,,,\nMax KTI AD VNA credits shared by IIO,,,4,Active KTI \nMin KTI AD VNA credits per CHA,,,1,Soc/Pac,P-LCC,P-LCC,P-MCC,P-MCC,P-Stops,3,3,3,3,3,3,4,4,4,3,3,3,3,3,3,4,,,,,,,,,\nTotal K2K BL VNA credits,,,4,Config Name,EP-1S,EP-2S,EP-1S,EP-2S,EP-1S,EP-2S,EP-1S,EP-2S,EP-2S,EX-1S,EX-2S,EX-2S,EX-4S,EX-4S,EX-8S,EX-4S,,,,,,,,,\n</code></pre>\n\n<p>I'm trying to read this file in and generate empty text files that have names like <code>ep_hcc_2s_XXX_lm_por_credits.e</code>.</p>\n\n<p>All the <code>EP-</code> portions of the CSV become the first part of the text file name, all the numbers followed by an 'S' become the second part of the text file name, followed by <code>_XXX_lm_por_credits.e</code> which is appended to the file name.</p>\n\n<p>I'm looking to do this in Perl.</p>\n"}, {"tags": ["xml", "perl"], "comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1531864189, "post_id": 51390589, "comment_id": 89753447, "body": "Would it be terribly difficult to change from <code>XML::Simple</code> to either of the standard and excellent <a href=\"https://metacpan.org/pod/XML::LibXML\" rel=\"nofollow noreferrer\">XML::LibXML</a> or <a href=\"https://metacpan.org/pod/XML::Twig\" rel=\"nofollow noreferrer\">XML::Twig</a>?  The <code>XML::Simple</code> had had its place and value but this was a long time ago.  It is dismissed in its own docs and even its author wrote a <a href=\"https://grantm.github.io/perl-libxml-by-example/\" rel=\"nofollow noreferrer\">tutorial on <code>XML::LibXML</code></a>. It may require a little work upfront but now you are looking into the rabbit hole of debugging an obsolete module (regardless of whether the problem is or not about it)."}, {"owner": {"reputation": 1968, "user_id": 5919561, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/b008619cfd8503c2c7cc599f4282ce28?s=128&d=identicon&r=PG&f=1", "display_name": "nik", "link": "https://stackoverflow.com/users/5919561/nik"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1531864544, "post_id": 51390589, "comment_id": 89753545, "body": "@zdim if I modify it to XML::LibXML , then I change use <code>use XML::Simple;</code>to use XML::LibXML<code>and </code>my $xs = new XML::Simple` to <code>my $xs = new XML::LibXML</code> unfortunatelly I get another error saying cannot locate object method &quot;XMlin&quot; via package &quot;XML::LibXML&quot;"}, {"owner": {"reputation": 1968, "user_id": 5919561, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/b008619cfd8503c2c7cc599f4282ce28?s=128&d=identicon&r=PG&f=1", "display_name": "nik", "link": "https://stackoverflow.com/users/5919561/nik"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1531864661, "post_id": 51390589, "comment_id": 89753586, "body": "@zdim the same error for when I use <code>XML::Twig</code>"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1531864666, "post_id": 51390589, "comment_id": 89753588, "body": "I can&#39;t look at all that code right now, hopefully someone else will. If that&#39;s the only change you need then please do it.  Look at docs to see how to do with other modules what you have now. (Do they have that exact &quot;<i>XMlin</i>&quot; capability?)"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1531874013, "post_id": 51390589, "comment_id": 89755782, "body": "@nik: <code>XML::LibXML</code> has a completely different API, and you will need to rewrite your program. Why don&#39;t you start with the tutorial that <b>zdim</b> linked?"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1531874825, "post_id": 51390589, "comment_id": 89755921, "body": "I think <i>&quot;Use <code>XML::Simple</code> DOM parser - Okay as <code>unimod.xml</code> is small&quot;</i> is a little hopeful. It&#39;s 44,000 lines of XML! <code>XML::Twig</code> is good at processing large XML data, and I suggest you go for that. I think its documentation is also a little better than that of <code>XML::LibXML</code>."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1531875271, "post_id": 51390589, "comment_id": 89755993, "body": "The error message implies that there&#39;s an error in the XML data at line 13, but the version of the file on the internet is fine. Have you tried running your program without a parameter to use the online data instead? If you particularly want to use your offline files then please post a couple of dozen lines from it in your question here."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1531896034, "post_id": 51390589, "comment_id": 89761402, "body": "This problem has nothing to do with your code. It&#39;s your input data that is the problem. And without seeing that input data, we can&#39;t be much help. The error message is pretty clear, there&#39;s a mismatched tag at line 13, column 3 of your XML document."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1531906882, "post_id": 51390589, "comment_id": 89768230, "body": "That message indicates an error in the XML document."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1531906939, "post_id": 51390589, "comment_id": 89768265, "body": "Tip: <code>$FindBin::Bin</code> doesn&#39;t always work. You should use <code>$FindBin::RealBin</code> instead."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1531907044, "post_id": 51390589, "comment_id": 89768326, "body": "Your question&#39;s code is neither minimal (contains crazy amounts of unrelated code), nor sufficient (doesn&#39;t include the data needed to produce the error). Please fix your question."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1531907145, "post_id": 51390589, "comment_id": 89768409, "body": "Tip: Avoid XML::Simple. It&#39;s own documentation discourages its use. You can read up on why XML::Simple is one of the hardest XML parsers to use <a href=\"https://stackoverflow.com/questions/33267765/why-is-xmlsimple-discouraged\">here</a>."}, {"owner": {"reputation": 1968, "user_id": 5919561, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/b008619cfd8503c2c7cc599f4282ce28?s=128&d=identicon&r=PG&f=1", "display_name": "nik", "link": "https://stackoverflow.com/users/5919561/nik"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1531924655, "post_id": 51390589, "comment_id": 89780444, "body": "@Borodin input is huge, check this linke which is the input <a href=\"http://www.unimod.org/xml/unimod.xml\" rel=\"nofollow noreferrer\">unimod.org/xml/unimod.xml</a>"}, {"owner": {"reputation": 1968, "user_id": 5919561, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/b008619cfd8503c2c7cc599f4282ce28?s=128&d=identicon&r=PG&f=1", "display_name": "nik", "link": "https://stackoverflow.com/users/5919561/nik"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1531924751, "post_id": 51390589, "comment_id": 89780520, "body": "@ikegami thanks for the tip you gave me. I really tried all the above ones, I could not figure it out why it cannot be parsed with Simple and when I change to LibXML  everything changes"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1531925808, "post_id": 51390589, "comment_id": 89781237, "body": "Are you running the program without any arguments (so it pulls a new copy of the file from the web site) or are you giving it the name of a previously downloaded file? If it&#39;s the latter, then I suspect your local file has been corrupted in some way."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1531925918, "post_id": 51390589, "comment_id": 89781318, "body": "Can you give us an extract (say, lines 10 to 15) from the file that you are parsing? I don&#39;t mean the copy on the web site, I mean the local copy."}, {"owner": {"reputation": 1968, "user_id": 5919561, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/b008619cfd8503c2c7cc599f4282ce28?s=128&d=identicon&r=PG&f=1", "display_name": "nik", "link": "https://stackoverflow.com/users/5919561/nik"}, "reply_to_user": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1531926263, "post_id": 51390589, "comment_id": 89781578, "body": "@Dave Cross No I use the one from the web. There is not any saved locally. I will try to paste 10 lines if this web allow me because it always says I use a lot of code ..."}, {"owner": {"reputation": 1968, "user_id": 5919561, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/b008619cfd8503c2c7cc599f4282ce28?s=128&d=identicon&r=PG&f=1", "display_name": "nik", "link": "https://stackoverflow.com/users/5919561/nik"}, "reply_to_user": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1531926343, "post_id": 51390589, "comment_id": 89781640, "body": "@Dave Cross I pasted it above dave"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1531926390, "post_id": 51390589, "comment_id": 89781681, "body": "No. Don&#39;t bother, I can see the version on the web. I think you need to change the program so it writes the data that it gets from the web to a file and examine that file."}, {"owner": {"reputation": 1968, "user_id": 5919561, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/b008619cfd8503c2c7cc599f4282ce28?s=128&d=identicon&r=PG&f=1", "display_name": "nik", "link": "https://stackoverflow.com/users/5919561/nik"}, "reply_to_user": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1531926449, "post_id": 51390589, "comment_id": 89781740, "body": "@Dave Cross would it be possible to help me with this?"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1531926459, "post_id": 51390589, "comment_id": 89781747, "body": "Er... that input that you&#39;ve just pasted isn&#39;t XML. Where did it come from?"}, {"owner": {"reputation": 1968, "user_id": 5919561, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/b008619cfd8503c2c7cc599f4282ce28?s=128&d=identicon&r=PG&f=1", "display_name": "nik", "link": "https://stackoverflow.com/users/5919561/nik"}, "reply_to_user": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1531926577, "post_id": 51390589, "comment_id": 89781817, "body": "@Dave Cross It is xml , check here <a href=\"http://www.unimod.org/downloads.html\" rel=\"nofollow noreferrer\">unimod.org/downloads.html</a> then on the bottom of the web, you can see xml, I simply click on it and pasted it above ."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1531926744, "post_id": 51390589, "comment_id": 89781953, "body": "The sample that you have added to your question is not XML. Look at it. You can see it&#39;s not XML - it contains no tags."}, {"owner": {"reputation": 1968, "user_id": 5919561, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/b008619cfd8503c2c7cc599f4282ce28?s=128&d=identicon&r=PG&f=1", "display_name": "nik", "link": "https://stackoverflow.com/users/5919561/nik"}, "reply_to_user": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1531926967, "post_id": 51390589, "comment_id": 89782085, "body": "@Dave Cross   I downloaded it from <a href=\"http://www.unimod.org/downloads.html\" rel=\"nofollow noreferrer\">unimod.org/downloads.html</a> . 3 years ago it used to work"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1531930363, "post_id": 51390589, "comment_id": 89784380, "body": "Re &quot;<i>I could not figure it out why it cannot be parsed with Simple and when I change to LibXML everything changes</i>&quot;, hum? XML::Simple (or rather, the parser it&#39;s using, XML::Parser) should be able to parse any valid XML. The problem with XML::Simple isn&#39;t with its ability to parse XML."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1531930465, "post_id": 51390589, "comment_id": 89784436, "body": "Re &quot;<i>input is huge</i>&quot;, So? Isolate the problem. It should be easy since the parser gave you the exact line and column numbers where the problem occurs"}, {"owner": {"reputation": 1968, "user_id": 5919561, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/b008619cfd8503c2c7cc599f4282ce28?s=128&d=identicon&r=PG&f=1", "display_name": "nik", "link": "https://stackoverflow.com/users/5919561/nik"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1531930545, "post_id": 51390589, "comment_id": 89784473, "body": "@ikegami I think Dave is somehow right about the XML fetching. I am now trying to understand how to download the xml file and parse it with above code rather than fetching it through . if you know anyone, please let me know"}, {"owner": {"reputation": 1968, "user_id": 5919561, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/b008619cfd8503c2c7cc599f4282ce28?s=128&d=identicon&r=PG&f=1", "display_name": "nik", "link": "https://stackoverflow.com/users/5919561/nik"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1531930608, "post_id": 51390589, "comment_id": 89784509, "body": "@ikegami I cannot fetch the xml I guess , i tried to give 10 lines of the xml file above but it seems that it is not xml ."}, {"owner": {"reputation": 1968, "user_id": 5919561, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/b008619cfd8503c2c7cc599f4282ce28?s=128&d=identicon&r=PG&f=1", "display_name": "nik", "link": "https://stackoverflow.com/users/5919561/nik"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1531931424, "post_id": 51390589, "comment_id": 89784979, "body": "@ikegami  I downloaded the xml file into the folder where this script is. Do you know how to use the script above to parse that xml instead of fetching it? The name of the file is unimod.xml"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1531938831, "post_id": 51390589, "comment_id": 89788961, "body": "@nik: If you pass the program the name of an XML file, then it will parse that file instead of downloading it from the web site."}, {"owner": {"reputation": 1968, "user_id": 5919561, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/b008619cfd8503c2c7cc599f4282ce28?s=128&d=identicon&r=PG&f=1", "display_name": "nik", "link": "https://stackoverflow.com/users/5919561/nik"}, "reply_to_user": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1531939963, "post_id": 51390589, "comment_id": 89789611, "body": "@Dave Cross I tried few things with no sucess. would it be possible to help me amending the above code? instead downloading it , just take it from the place that the script is with the name of myfile.xml and then parse it to the database ?"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1531940543, "post_id": 51390589, "comment_id": 89789927, "body": "@nik: I just told you exactly how to do that. There&#39;s no need to change the code, it already supports what you want to do."}, {"owner": {"reputation": 1968, "user_id": 5919561, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/b008619cfd8503c2c7cc599f4282ce28?s=128&d=identicon&r=PG&f=1", "display_name": "nik", "link": "https://stackoverflow.com/users/5919561/nik"}, "reply_to_user": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1531940674, "post_id": 51390589, "comment_id": 89789991, "body": "@Dave Cross You mean I change this line ? <code>my $response = $ua-&gt;get( &quot;http:&#47;&#47;www.unimod.org&#47;xml&#47;unimod.xml&quot; );</code> to this my $response = $ua-&gt;get( &quot;unimod.xml&quot; );` because I saved the input in the folder as the script"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 1, "creation_date": 1531940767, "post_id": 51390589, "comment_id": 89790048, "body": "@nik: No. There&#39;s no need to change the code at all. I&#39;m sorry, but if you can&#39;t read the code or the conversation we&#39;ve had here and work out what to do, then there&#39;s no point in helping you any further."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1531945769, "post_id": 51390589, "comment_id": 89792452, "body": "@nik: I am not doing a PhD. My qualifications are BSc (hons) Computer Science &amp; Cybernetics; PhD &quot;Manipulating real-world objects in a virtual space&quot; Reading 1980; PhD &quot;Anticipating the missing pronoun&quot; Kent 1982. It is you who are being disrespectful: I have never before seen such an example of neediness and requests for hand-holding as this question and your comments. <i>Stack Overflow</i> is a place for accomplished programmers to ask for help with issues that have eluded them. You are unable to use code and advice that is handed to you, and it is you who is wasting our time."}], "answers": [{"comments": [{"owner": {"reputation": 1968, "user_id": 5919561, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/b008619cfd8503c2c7cc599f4282ce28?s=128&d=identicon&r=PG&f=1", "display_name": "nik", "link": "https://stackoverflow.com/users/5919561/nik"}, "edited": false, "score": 0, "creation_date": 1531928330, "post_id": 51405697, "comment_id": 89782980, "body": "thanks Dave, I have a question, can you extend the code you gave me so that I save the xml file on my desktop without running it using my original or should i add it after <code>my $ref = $xs-&gt;XMLin( $xml );</code>?"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 1968, "user_id": 5919561, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/b008619cfd8503c2c7cc599f4282ce28?s=128&d=identicon&r=PG&f=1", "display_name": "nik", "link": "https://stackoverflow.com/users/5919561/nik"}, "edited": false, "score": 0, "creation_date": 1531928413, "post_id": 51405697, "comment_id": 89783030, "body": "@nik: Add my new lines immediately after <code>$xml = $response-&gt;content;</code>."}, {"owner": {"reputation": 1968, "user_id": 5919561, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/b008619cfd8503c2c7cc599f4282ce28?s=128&d=identicon&r=PG&f=1", "display_name": "nik", "link": "https://stackoverflow.com/users/5919561/nik"}, "edited": false, "score": 0, "creation_date": 1531928673, "post_id": 51405697, "comment_id": 89783202, "body": "I added the print in my question"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 1968, "user_id": 5919561, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/b008619cfd8503c2c7cc599f4282ce28?s=128&d=identicon&r=PG&f=1", "display_name": "nik", "link": "https://stackoverflow.com/users/5919561/nik"}, "edited": false, "score": 0, "creation_date": 1531928922, "post_id": 51405697, "comment_id": 89783373, "body": "@nik: Sorry, there was a typo in my code. It should be <code>print $xml_fh $xml;</code>, not <code>print $xml_fh, $xml;</code> (no comma). But your print output shows what the problem is. That&#39;s HTML you&#39;re getting, not XML."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 1968, "user_id": 5919561, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/b008619cfd8503c2c7cc599f4282ce28?s=128&d=identicon&r=PG&f=1", "display_name": "nik", "link": "https://stackoverflow.com/users/5919561/nik"}, "edited": false, "score": 0, "creation_date": 1531928943, "post_id": 51405697, "comment_id": 89783389, "body": "@nik: Also, you&#39;ve accidentally removed your code from the question."}, {"owner": {"reputation": 1968, "user_id": 5919561, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/b008619cfd8503c2c7cc599f4282ce28?s=128&d=identicon&r=PG&f=1", "display_name": "nik", "link": "https://stackoverflow.com/users/5919561/nik"}, "edited": false, "score": 0, "creation_date": 1531929149, "post_id": 51405697, "comment_id": 89783528, "body": "when I change to <code>print $xml_fh $xml;</code> I get the same error I pasted above. so what I must do then ? do you have any idea?"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 1968, "user_id": 5919561, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/b008619cfd8503c2c7cc599f4282ce28?s=128&d=identicon&r=PG&f=1", "display_name": "nik", "link": "https://stackoverflow.com/users/5919561/nik"}, "edited": false, "score": 0, "creation_date": 1531929224, "post_id": 51405697, "comment_id": 89783581, "body": "@nik: But printed to the file, rather than the console?"}, {"owner": {"reputation": 1968, "user_id": 5919561, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/b008619cfd8503c2c7cc599f4282ce28?s=128&d=identicon&r=PG&f=1", "display_name": "nik", "link": "https://stackoverflow.com/users/5919561/nik"}, "edited": false, "score": 0, "creation_date": 1531929316, "post_id": 51405697, "comment_id": 89783642, "body": "Yes I see a file created text.xml there and when I use nano text.xml, it is empty !"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 1968, "user_id": 5919561, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/b008619cfd8503c2c7cc599f4282ce28?s=128&d=identicon&r=PG&f=1", "display_name": "nik", "link": "https://stackoverflow.com/users/5919561/nik"}, "edited": false, "score": 0, "creation_date": 1531929471, "post_id": 51405697, "comment_id": 89783777, "body": "@nik: Ok, that&#39;s weird. Did you copy my code exactly?"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 1968, "user_id": 5919561, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/b008619cfd8503c2c7cc599f4282ce28?s=128&d=identicon&r=PG&f=1", "display_name": "nik", "link": "https://stackoverflow.com/users/5919561/nik"}, "edited": false, "score": 0, "creation_date": 1531929527, "post_id": 51405697, "comment_id": 89783818, "body": "@nik: But it doesn&#39;t really matter where the data is written. We know what the problem is now. You&#39;re not getting XML back from the web site - you&#39;re getting HTML."}, {"owner": {"reputation": 1968, "user_id": 5919561, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/b008619cfd8503c2c7cc599f4282ce28?s=128&d=identicon&r=PG&f=1", "display_name": "nik", "link": "https://stackoverflow.com/users/5919561/nik"}, "edited": false, "score": 0, "creation_date": 1531929539, "post_id": 51405697, "comment_id": 89783829, "body": "@ Dave Cross This is what I copied $xml = $response-&gt;content;   open my $xml_fh, &#39;&gt;&#39;, &#39;test.xml&#39; or die $!;   print $xml_fh $xml;"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 1968, "user_id": 5919561, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/b008619cfd8503c2c7cc599f4282ce28?s=128&d=identicon&r=PG&f=1", "display_name": "nik", "link": "https://stackoverflow.com/users/5919561/nik"}, "edited": false, "score": 0, "creation_date": 1531929626, "post_id": 51405697, "comment_id": 89783891, "body": "@nik: I can&#39;t help thinking you&#39;re rather missing the point here. It doesn&#39;t matter where the error goes, as long as you can read the error."}, {"owner": {"reputation": 1968, "user_id": 5919561, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/b008619cfd8503c2c7cc599f4282ce28?s=128&d=identicon&r=PG&f=1", "display_name": "nik", "link": "https://stackoverflow.com/users/5919561/nik"}, "edited": false, "score": 0, "creation_date": 1531929812, "post_id": 51405697, "comment_id": 89784030, "body": "I really don&#39;t want to waste your valuable time but it seems like you are very experienced. I have been struggling with this for long time I could not figure out how to fix it. I do appreciate your thought and your help a lot."}, {"owner": {"reputation": 1968, "user_id": 5919561, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/b008619cfd8503c2c7cc599f4282ce28?s=128&d=identicon&r=PG&f=1", "display_name": "nik", "link": "https://stackoverflow.com/users/5919561/nik"}, "edited": false, "score": 0, "creation_date": 1531930459, "post_id": 51405697, "comment_id": 89784431, "body": "I see your point. Is there any way to download the xml and then parse it to database with above script rather than fetching it? actually we do have a proxy and I gave a port which one can download anything . Let me know your thought please"}], "tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 2, "last_activity_date": 1531928831, "last_edit_date": 1531928831, "creation_date": 1531927327, "answer_id": 51405697, "question_id": 51390589, "link": "https://stackoverflow.com/questions/51390589/error-in-simple-pm-when-i-try-to-parse-a-database-in-mysql-database/51405697#51405697", "title": "error in Simple.pm when I try to parse a database in mysql database", "body": "<p>For future reference, here is a cut-down version of your code which is just enough to demonstrate the problem. This is what you should have shown us as part of your original question.</p>\n\n<pre><code>use strict;\nuse warnings;\n\nuse XML::Simple;\nuse LWP::UserAgent;\n\nprint \"Fetching unimod.xml from unimod web site\\n\";\n\n# Retrieve latest xml version of Unimod from the website\nmy $ua = LWP::UserAgent-&gt;new();\n$ua-&gt;env_proxy();\nmy $response = $ua-&gt;get( \"http://www.unimod.org/xml/unimod.xml\" );\n\nmy $xml = $response-&gt;content;\n\nprint \"Parsing XML\\n\";\n\n# Use XML::Simple DOM parser - Okay as unimod.xml is small\n# Force specificity and neutral losses into an array to simplify code\nmy $xs = new XML::Simple(\n    KeyAttr    =&gt; { \"umod:mod\" =&gt; \"+title\" },\n    ForceArray =&gt; [ \"umod:specificity\", \"umod:NeutralLoss\" ]\n);\nmy $ref = $xs-&gt;XMLin( $xml );\n</code></pre>\n\n<p>See how I've removed all of the distractions about config files or updating the database. It just grabs the XML from the web site and parses it.</p>\n\n<p>The bad news is that, for me, this works fine. It parses the XML without throwing any errors. For reference, I'm using XML::Simple version 2.25 and Perl 5.26.2.</p>\n\n<p>It would be useful to know whether this program gives the same error as your original code when you run it.</p>\n\n<p>As mentioned in a comment, it would also be interesting to see what XML you are actually getting from the web site. You can get that by taking the <code>$xml</code> variable and writing its contents to a file:</p>\n\n<pre><code>open my $xml_fh, '&gt;', 'test.xml' or die $!;\nprint $xml_fh $xml;\n</code></pre>\n\n<p>Then, once you have run the code, you will have a file called <code>test.xml</code> which contains the XML that the web site has given you. You can examine line 13 of that file to determine what the error is.</p>\n\n<p>For what it's worth, I suspect you're not getting XML back for some reason. I suspect that either the proxy on your network or the web site itself is blocking your attempts to pull down the data automatically and is returning a 404 or 503 HTML page to you. That's just a guess though and we won't know for sure unless you run the tests I've suggested above.</p>\n"}], "owner": {"reputation": 1968, "user_id": 5919561, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/b008619cfd8503c2c7cc599f4282ce28?s=128&d=identicon&r=PG&f=1", "display_name": "nik", "link": "https://stackoverflow.com/users/5919561/nik"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 88, "favorite_count": 1, "closed_date": 1531942362, "answer_count": 1, "score": -3, "last_activity_date": 1531943187, "creation_date": 1531863655, "last_edit_date": 1531943187, "question_id": 51390589, "link": "https://stackoverflow.com/questions/51390589/error-in-simple-pm-when-i-try-to-parse-a-database-in-mysql-database", "closed_reason": "Needs more focus", "title": "error in Simple.pm when I try to parse a database in mysql database", "body": "<p>I am using the following script to parse a database inside my database.</p>\n\n<p>Few people asked about the input. It is a large file and I cannot paste all of it here , can you just check this <a href=\"http://www.unimod.org/xml/unimod.xml\" rel=\"nofollow noreferrer\">http://www.unimod.org/xml/unimod.xml</a>\nIf no, would you give me an option to paste it somewhere that I can share it with you? I try to paste a bit of input here </p>\n\n<pre><code>GIST acetyl light PT and GIST acetyl light O-acetyl glyoxal-derived hydroimidazolone AA0048 RESID AA0049 RESID AA0041 RESID AA0052 RESID AA0364 RESID AA0056 RESID AA0046 RESID AA0051 RESID AA0045 RESID AA0354 RESID AA0044 RESID AA0043 RESID 11999733 PubMed PMID Chemical Reagents for Protein Modification 3rd edition, pp 215-221, Roger L. Lundblad, CRC Press, New York, N.Y., 2005 Book IonSource acetylation tutorial Misc. URL http://www.ionsource.com/Card/acetylation/acetylation.htm AA0055 RESID 14730666 PubMed PMID 15350136 PubMed PMID AA0047 RESID 12175151 PubMed PMID 11857757 PubMed PMID AA0042 RESID AA0050 RESID AA0053 RESID AA0054 RESID ACET FindMod PNAS 2006 103: 18574-18579 Journal http://dx.doi.org/10.1073/pnas.0608995103 MS/MS experiments of mass spectrometric c-ions (MS^3) can be used for protein identification by library searching. T3-sequencing is such a technique (see reference). Search engines must recognize this as a virtual modification. Top-Down sequencing c-type fragment ion AA0088 RESID AA0087 RESID AA0086 RESID AA0085 RESID AA0084 RESID AA0083 RESID AA0082 RESID AA0081 RESID AA0089 RESID AA0090 RESID AA0091 RESID AA0092 RESID AA0093 RESID AA0094 RESID AA0095 RESID AA0096 RESID AA0097 RESID AA0098 RESID AA0099 RESID AA0100 RESID AMID FindMod 14588022 PubMed PMID AA0117 RESID BIOT FindMod Carboxyamidomethylation 11510821 PubMed PMID 12422359 PubMed PMID Boja, E. S., Fales, H. M., Anal. Chem. 73 3576-82 (2001) Journal Creasy, D. M., Cottrell, J. S., Proteomics 2 1426-34 (2002) Journal 12203680 PubMed PMID Stark; Modification of proteins with cyanate. Meth Enz 25B, 579-584 (1972) Journal AA0343 RESID 10978403 PubMed PMID AA0332 RESID Smyth; Carbamylation of amino and tyrosine hydroxyl groups. J Biol Chem 242, 1579-1591 (1967) Journal IonSource carbamylation tutorial Misc. URL http://www.ionsource.com/Card/carbam/carbam.htm Carbamylation is an irreversible process of non-enzymatic modification of proteins by the breakdown products of urea isocyanic acid reacts with the N-term of a proteine or side chains of lysine and arginine residues Hydroxylethanone Carboxymethylation Protein which is post-translationally modified by the de-imination of one or more arginine residues; Peptidylarginine deiminase (PAD) converts protein bound to citrulline Convertion of glycosylated asparagine residues upon deglycosylation with PNGase F in H2O phenyllactyl from N-term Phe Citrullination FLAC FindMod AA0128 RESID CITR FindMod IonSource\n</code></pre>\n\n<p>I get this error</p>\n\n<blockquote>\n  <p>mismatched tag at line 13, column 3, byte 569 at /srv/myscr/script/../extern/cpan/lib/perl5/XML/Simple.pm line 391</p>\n</blockquote>\n\n<p>The code that I used to parse the data is as follows and I would appreciate if one could tell me why I receive such a error and how to fix it. </p>\n\n<p>After adding the code I get the following error</p>\n\n<pre><code>Fetching unimod.xml from unimod web site\nConnecting to pipeline database\nEmptying modifications table\nParsing XML\nmismatched tag at line 13, column 3, byte 569 at /srv/myscr/script/../extern/cpan/lib/perl5/XML/Simple.pm line 39\n</code></pre>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 6, "creation_date": 1531846382, "post_id": 51386599, "comment_id": 89745185, "body": "<code>$X{$i} = [@l]</code>"}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1531846539, "post_id": 51386599, "comment_id": 89745270, "body": "If you store a reference to the array, the reference stays the same."}, {"owner": {"reputation": 371, "user_id": 5941270, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-SUN0cJxejpM/AAAAAAAAAAI/AAAAAAAAAFw/GRkavdkMb-k/photo.jpg?sz=128", "display_name": "Daniel Abercrombie", "link": "https://stackoverflow.com/users/5941270/daniel-abercrombie"}, "edited": false, "score": 0, "creation_date": 1531848773, "post_id": 51386599, "comment_id": 89746390, "body": "<code>@{$X {$i}} = @l;</code> would also work."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 3, "creation_date": 1531850430, "post_id": 51386599, "comment_id": 89747229, "body": "<code>@{ $X{$i} } = @l;</code> works because it&#39;s short for <code>@{ $X{$i} &#47;&#47;= [] } = @l;</code>. <code>X{$i} = [ @l ];</code> is far clearer."}], "answers": [{"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 3, "last_activity_date": 1531850344, "last_edit_date": 1531850344, "creation_date": 1531847845, "answer_id": 51387029, "question_id": 51386599, "link": "https://stackoverflow.com/questions/51386599/perl-scope-and-allocation-of-a-named-variable/51387029#51387029", "title": "Perl: scope and allocation of a named variable", "body": "<p>No, it's not possible for each value of <code>%X</code> to be a reference to a different array, while at the same time all being a reference to the same array.</p>\n\n<p>If you want each value of <code>%X</code> to be a reference to a same array, go ahead an allocate a single array outside of the loop.</p>\n\n<p>If you want each value of <code>%X</code> to be a reference to a different array, you'll need to allocate a new array for each pass through the loop. This can be a named one (created using <code>my</code>), or an anonymous one (created using <code>[ ]</code>).</p>\n\n<hr>\n\n<p>If you simply wanted to use the values within the outside <code>@l</code> so that every referenced array initially has the same value, you could use</p>\n\n<pre><code>my @a = @l;\n$X{$i} = \\@l;\n</code></pre>\n\n<p>or</p>\n\n<pre><code>$X{$i} = [ @l ];\n</code></pre>\n"}], "owner": {"reputation": 8001, "user_id": 307297, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/e28FD.png?s=128&g=1", "display_name": "chris01", "link": "https://stackoverflow.com/users/307297/chris01"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 59, "favorite_count": 0, "accepted_answer_id": 51387029, "answer_count": 1, "score": 0, "last_activity_date": 1531850344, "creation_date": 1531846102, "question_id": 51386599, "link": "https://stackoverflow.com/questions/51386599/perl-scope-and-allocation-of-a-named-variable", "title": "Perl: scope and allocation of a named variable", "body": "<p>Here is a little sample.</p>\n\n<pre><code>my %X = ();\n\nfor (my $i = 0; $i &lt; 5; $i ++)\n{\n    $X {$i} = [$i .. 4];  # the assignment: reference to an unnamed array\n}\n\n# this is just for output - you can ignore it\nforeach (sort keys %X)\n{\n    print \"\\n\" . $_ . \" = \";\n    foreach (@{$X {$_}})\n    {\n        print $_;\n    }\n}\n</code></pre>\n\n<p>The output is like expected.</p>\n\n<pre><code>0 = 01234\n1 = 1234\n2 = 234\n3 = 34\n4 = 4\n</code></pre>\n\n<p>If I use a local variable for the assignment it will produce the same output - thats ok!\nThe memory for the list is always reallocated and not overwritten because @l is always new. There is still a reference to it in %X so no release is possible(or however the memory-managment in perl is working - I dont know).</p>\n\n<pre><code>for (my $i = 0; $i &lt; 5; $i ++)\n{\n  my @l = ($i .. 4);  # inside\n  $X {$i} = \\@l;\n}\n</code></pre>\n\n<p>But can I produce the same output from above with using an outside variable? </p>\n\n<p>Is that possible with some allocation trick - like to give it a new memory but not garbage the old one?</p>\n\n<pre><code>my %X = ();\nmy @l;  # outside\nfor (my $i = 0; $i &lt; 5; $i ++)\n{\n    @l = ($i .. 4);\n    $X {$i} = \\@l;\n}\n</code></pre>\n\n<p>All hash-elements now the the content of the last loop.</p>\n\n<pre><code>0 = 4\n1 = 4\n2 = 4\n3 = 4\n4 = 4\n</code></pre>\n\n<p>Is it possible to get the output from the beginning with the outer variable?</p>\n"}, {"tags": ["amazon-web-services", "perl", "log4perl"], "comments": [{"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 2, "creation_date": 1531844745, "post_id": 51386087, "comment_id": 89744324, "body": "<a href=\"http://p3rl.org/system\" rel=\"nofollow noreferrer\">system</a> waits for the command to complete, unless the command starts a background process without waiting for it. When you run the command from the command line, does the prompt appear as late as it&#39;s completed?"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1531846188, "post_id": 51386087, "comment_id": 89745082, "body": "You must <i>add <code>use strict</code> and <code>use warnings</code></i> to the top of every Perl program you write, and fix any errors or warnings that appear. This is especially important before asking the entire world for help with your code."}, {"owner": {"reputation": 1, "user_id": 3361284, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/K6bDk.jpg?s=128&g=1", "display_name": "familydweeb", "link": "https://stackoverflow.com/users/3361284/familydweeb"}, "edited": false, "score": 0, "creation_date": 1531846571, "post_id": 51386087, "comment_id": 89745291, "body": "When the long transfer is run from the command line it waits until the transfer completes before the prompt returns."}, {"owner": {"reputation": 1, "user_id": 3361284, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/K6bDk.jpg?s=128&g=1", "display_name": "familydweeb", "link": "https://stackoverflow.com/users/3361284/familydweeb"}, "edited": false, "score": 1, "creation_date": 1531846644, "post_id": 51386087, "comment_id": 89745328, "body": "The script has use strict and use warnings -- there is some housekeeping code that&#39;s not included here where the command line parameters are validated and loaded into the variables you see in the code excerpt."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1531848220, "post_id": 51386087, "comment_id": 89746114, "body": "Does the rest of the script run fine?  If you add prints of those status messages to screen as well what do they say?  Is it the same as when it works?"}, {"owner": {"reputation": 1, "user_id": 3361284, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/K6bDk.jpg?s=128&g=1", "display_name": "familydweeb", "link": "https://stackoverflow.com/users/3361284/familydweeb"}, "edited": false, "score": 0, "creation_date": 1531851417, "post_id": 51386087, "comment_id": 89747702, "body": "Everything else runs fine, and the logging works fine for small transfers. If it&#39;s a big transfer the transfer itself works but nothing gets logged, like it never goes back to the script to finish up.  Is there a better way than system  to do the call to the AWS program?"}, {"owner": {"reputation": 1050, "user_id": 1636683, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c5f282a2b7d41f9a3e3f9eced4c3fcf7?s=128&d=identicon&r=PG", "display_name": "Ron Bergin", "link": "https://stackoverflow.com/users/1636683/ron-bergin"}, "edited": false, "score": 0, "creation_date": 1531852585, "post_id": 51386087, "comment_id": 89748251, "body": "If the logfile is not being created, then it sounds like the command hasn&#39;t exited and might be waiting for user input.  Have you tried moving the creation of the logger up prior to executing the system call?  I&#39;d also cleanup the code a little by putting the status messages into a hash lookup table instead of the if/elsif/else block."}, {"owner": {"reputation": 1050, "user_id": 1636683, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c5f282a2b7d41f9a3e3f9eced4c3fcf7?s=128&d=identicon&r=PG", "display_name": "Ron Bergin", "link": "https://stackoverflow.com/users/1636683/ron-bergin"}, "edited": false, "score": 0, "creation_date": 1531852784, "post_id": 51386087, "comment_id": 89748357, "body": "If you want more control over the execution, then use one of the IPC modules.  IPC::Run or IPC::Open2 or IPC::Open3"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1531865001, "post_id": 51386087, "comment_id": 89753695, "body": "It&#39;s still not clear -- does the script continue past <code>system(...)</code> for those long runs, when the log file isn&#39;t created?  Can you add prints of status to screen?"}], "answers": [{"tags": [], "owner": {"reputation": 43, "user_id": 10134195, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/992be08906b17fa83ebfb1272b0e4b05?s=128&d=identicon&r=PG&f=1", "display_name": "PKI Guy", "link": "https://stackoverflow.com/users/10134195/pki-guy"}, "is_accepted": false, "score": 1, "last_activity_date": 1532545268, "creation_date": 1532545268, "answer_id": 51525954, "question_id": 51386087, "link": "https://stackoverflow.com/questions/51386087/perl-logging-not-working-on-long-system-call/51525954#51525954", "title": "Perl logging not working on long system call", "body": "<p>Since you're logging to file, i would add a <code>$|=1;</code> in the very beginning of the script.</p>\n\n<p>Also i think you should instantiate logger earlier, before launching aws_command, and launch it using ``:</p>\n\n<pre><code>$|=1;\nmy @dt = localtime;\nmy $TransferStartDate = strftime(\"%Y-%m-%d\", @dt);\nmy $TransferStartTime = strftime(\"%H:%M:%S\", @dt);\n\nmy $log_conf = \"\n   log4perl.rootLogger                 = $log_level, LOG1\n   log4perl.appender.LOG1              = Log::Log4perl::Appender::File\n   log4perl.appender.LOG1.filename     = /path/to/logs/aws_s3_log-$TransferStartDate.txt\n   log4perl.appender.LOG1.mode         = append\n   log4perl.appender.LOG1.layout       = Log::Log4perl::Layout::PatternLayout\n   log4perl.appender.LOG1.layout.ConversionPattern = %d %p %m %n\n \";\n\n\nLog::Log4perl::init(\\$log_conf);\nmy $logger = Log::Log4perl-&gt;get_logger();\n\nmy $aws_command = \"/path/to/aws/bin/aws s3 mv $local_file s3://\" . $s3_bucket;\nmy $aws_output = `$aws_command`;\nmy $aws_status = $?;\n\n#get stop time\n@dt = localtime;\nmy $TransferEndDate = strftime(\"%Y-%m-%d\", @dt);\nmy $TransferEndTime = strftime(\"%H:%M:%S\", @dt);\n\n$logger-&gt;info( \"Transfer command = $aws_command\" );\n$logger-&gt;info( \"Transfer result = $aws_result\" );\n</code></pre>\n\n<p>Not sure it'll solve your issue, but might help you narrow your diagnostics.</p>\n"}], "owner": {"reputation": 1, "user_id": 3361284, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/K6bDk.jpg?s=128&g=1", "display_name": "familydweeb", "link": "https://stackoverflow.com/users/3361284/familydweeb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 89, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1532608179, "creation_date": 1531844291, "last_edit_date": 1532608179, "question_id": 51386087, "link": "https://stackoverflow.com/questions/51386087/perl-logging-not-working-on-long-system-call", "title": "Perl logging not working on long system call", "body": "<p>I have a Perl script that is making a call to the AWS command line to upload a file to S3. It uses Log4Perl to log information about the upload. When the upload is small, a few seconds, the logging works fine -- but when the file is bigger and takes a few minutes then nothing gets logged. The file gets uploaded fine, but the log file is not created. </p>\n\n<p>This is how I'm doing it: </p>\n\n<pre><code>#get start time\nmy @dt = localtime;\nmy $TransferStartDate = strftime(\"%Y-%m-%d\", @dt);\nmy $TransferStartTime = strftime(\"%H:%M:%S\", @dt);\n\nmy $aws_command = \"/path/to/aws/bin/aws s3 mv $local_file s3://\" . $s3_bucket;\nmy $aws_status = system( $aws_command);\n\n#get stop time\n@dt = localtime;\nmy $TransferEndDate = strftime(\"%Y-%m-%d\", @dt);\nmy $TransferEndTime = strftime(\"%H:%M:%S\", @dt);\n\nmy $log_conf = \"\n   log4perl.rootLogger                 = $log_level, LOG1\n   log4perl.appender.LOG1              = Log::Log4perl::Appender::File\n   log4perl.appender.LOG1.filename     = /path/to/logs/aws_s3_log-$TransferEndDate.txt\n   log4perl.appender.LOG1.mode         = append\n   log4perl.appender.LOG1.layout       = Log::Log4perl::Layout::PatternLayout\n   log4perl.appender.LOG1.layout.ConversionPattern = %d %p %m %n\n\";\n\nLog::Log4perl::init(\\$log_conf);\nmy $logger = Log::Log4perl-&gt;get_logger();\n\n$logger-&gt;info( \"Transfer command = $aws_command\" );\n$logger-&gt;info( \"Transfer start = $TransferStartDate $TransferStartTime\" );\n$logger-&gt;info( \"Transfer end = $TransferEndDate $TransferEndTime\" );\n\n#check return code \nif ( $aws_status == 0 ) \n{\n    $logger-&gt;info( \"Transfer completed successfully\");\n}\nelsif ( $aws_status == 1 ) \n{\n    $errstring = \"s3 transfer failed status = $aws_status\";\n    $logger-&gt;error( $errstring );\n}\nelsif ( $aws_status == 2 ) \n{\n    $errstring = \"Syntax error on AWS S3 command status = $aws_status\";   \n    $logger-&gt;error( $errstring );\n}\nelsif ( $aws_status == 130 ) \n{\n    $errstring = \"transfer interrupted by Ctrl-C or other SIGINT status = $aws_status\";   \n    $logger-&gt;error( $errstring );\n}\nelsif ( $aws_status == 255 ) \n{\n    $errstring = \"Command failed status = $aws_status\";   \n    $logger-&gt;error( $errstring );\n}\nelsif ( $aws_status == 512 ) \n{\n    $errstring = \"s3 command formatted incorrectly status = $aws_status\";\n    $logger-&gt;error( $errstring );\n}\nelse \n{\n    $errstring = \"Error with AWS s3 command status = $aws_status\"; \n    $logger-&gt;error( $errstring );\n}\n</code></pre>\n\n<p>Any ideas what I am doing wrong? Using system to make the call should cause the Perl script to stop until the upload completes, right?</p>\n"}, {"tags": ["c++", "perl", "swig", "elf"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1531840473, "post_id": 51382757, "comment_id": 89741720, "body": "You shouldn&#39;t ask multiple questions at once, especially in the comments section."}, {"owner": {"reputation": 38072, "user_id": 46395, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5ce828f20abb195ef5d971205ee36c27?s=128&d=identicon&r=PG", "display_name": "daxim", "link": "https://stackoverflow.com/users/46395/daxim"}, "edited": false, "score": 2, "creation_date": 1531841658, "post_id": 51382757, "comment_id": 89742516, "body": "I can&#39;t reproduce the instructions because the file <code>my_module.cxx</code> is missing."}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1531842579, "post_id": 51382757, "comment_id": 89743110, "body": "You might have to add the current directory to shared library search path. Try run <code>perl</code> like this: <code>$ LD_LIBRARY_PATH=. perl</code>. See <a href=\"https://stackoverflow.com/q/38214651/2173773\">SWIG: Wrapping C++ for Perl using only a header and a shared library, can&#39;t locate loadable object error</a> for an example.."}], "answers": [{"tags": [], "owner": {"reputation": 162619, "user_id": 50617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YFykQ.png?s=128&g=1", "display_name": "Employed Russian", "link": "https://stackoverflow.com/users/50617/employed-russian"}, "is_accepted": true, "score": 1, "last_activity_date": 1531877289, "creation_date": 1531877289, "answer_id": 51392271, "question_id": 51382757, "link": "https://stackoverflow.com/questions/51382757/swig-perl-wrong-elf-class/51392271#51392271", "title": "Swig Perl: wrong ELF class", "body": "<pre><code>Can't load './my_module.so' for module my_module: ./my_module.so: wrong ELF class: ELFCLASS64 \n</code></pre>\n\n<p>This means: you are trying to load 64-bit <code>my_module.so</code> into a 32-bit <code>perl</code> process.</p>\n\n<p>You must either use 64-bit <code>perl</code>, or rebuild <code>my_module.so</code> as a 32-bit shared library (by adding <code>-m32</code> to compile and link commands).</p>\n"}], "owner": {"reputation": 1386, "user_id": 1897839, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/4c0e6f8798265cc958340ee121a018b7?s=128&d=identicon&r=PG", "display_name": "Carsten", "link": "https://stackoverflow.com/users/1897839/carsten"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 165, "favorite_count": 0, "accepted_answer_id": 51392271, "answer_count": 1, "score": 0, "last_activity_date": 1531877289, "creation_date": 1531834426, "last_edit_date": 1531840374, "question_id": 51382757, "link": "https://stackoverflow.com/questions/51382757/swig-perl-wrong-elf-class", "title": "Swig Perl: wrong ELF class", "body": "<p>I am trying to build a Perl module out of a CXX module using Swig.\nThere are multiple guides related to this:</p>\n\n<ol>\n<li>The generic <a href=\"http://www.swig.org/tutorial.html\" rel=\"nofollow noreferrer\">Swig tutorial</a> with a Perl section</li>\n<li>The <a href=\"http://www.swig.org/Doc1.3/SWIGPlus.html\" rel=\"nofollow noreferrer\">Swig and C++</a> guide</li>\n<li>The <a href=\"http://www.swig.org/Doc2.0/Perl5.html\" rel=\"nofollow noreferrer\">Swig and Perl5</a> guide</li>\n</ol>\n\n<p>I'm new to Swig and not very familiar with C(++), but I've been able to compile my module following the tutorial in <a href=\"http://www.swig.org/tutorial.html\" rel=\"nofollow noreferrer\">1</a>:</p>\n\n<p>I created an interface file:</p>\n\n<pre><code>%module my_module\n\n%{\n    #include \"case.h\"\n    #include \"case.h\"\n    #include \"lexindex.h\"\n    #include \"intlist.h\"\n    #include \"weight.h\"\n    #include \"invindex.h\"\n    #include \"winnow.h\"\n    #include \"nbayes.h\"\n    #include \"svmclass.h\"\n    #include \"svm.h\"\n    #include \"sockhelp.h\"\n    #include \"strtok_r.h\"\n    extern int num_features_guess;\n    void StopServerFun( int Signal );\n%}\nextern int num_features_guess;\n\nclass Case {\npublic:\n    Case();\n    ~Case();\n};\n\nclass Feature {\npublic:\n    Feature();\n    ~Feature();\n};\n</code></pre>\n\n<p>I run Swig:</p>\n\n<pre><code>swig -c++ -perl5 my_module.i\n</code></pre>\n\n<p>This generates the file <code>my_module_wrap.cxx</code>.\nI compile:</p>\n\n<pre><code>g++ -c `perl -MConfig -e 'print join(\" \", @Config{qw(ccflags optimize cccdlflags)}, \"-I$Config{archlib}/CORE\")'` my_module.cxx my_module_wrap.cxx\n</code></pre>\n\n<p>And subsequently:</p>\n\n<pre><code>g++ `perl -MConfig -e 'print $Config{lddlflags}'` my_module.o my_module_wrap.o -o my_module.so\n</code></pre>\n\n<p>As expected, this does create the file <code>my_module.so</code>.</p>\n\n<p>Then I try to use it like this:</p>\n\n<pre><code>$ perl\nuse my_module;\n</code></pre>\n\n<p>This results in the following error:</p>\n\n<blockquote>\n  <p>Can't load './my_module.so' for module my_module: ./my_module.so: wrong ELF class: ELFCLASS64 at /usr/net/ActivePerl-5.14.2.1402/lib/DynaLoader.pm line 191.</p>\n</blockquote>\n\n<p>As you can see from the error message, I use ActivePerl v5.14.\nAccording to the documentation, Swig should support Perl version >=5.8. Otherwise, I do not see where to dig deeper.</p>\n\n<p>There is a <a href=\"https://stackoverflow.com/questions/12184036/python-swig-importerror-wrong-elf-class-elfclass64\">similar question about Python</a>, but this was a user fault using different Python interpreters.</p>\n"}, {"tags": ["arrays", "perl"], "comments": [{"owner": {"reputation": 229, "user_id": 1195443, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/2eb518cdd36536d35b63cfb9d29f9af3?s=128&d=identicon&r=PG", "display_name": "clarkseth", "link": "https://stackoverflow.com/users/1195443/clarkseth"}, "edited": false, "score": 1, "creation_date": 1531833850, "post_id": 51382530, "comment_id": 89736871, "body": "In my opinion you have to use a third array, without use map function"}, {"owner": {"reputation": 91, "user_id": 10033194, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4cde3f9ea294cca4f0d23b1ed2a041e7?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Anowez", "link": "https://stackoverflow.com/users/10033194/thomas-anowez"}, "reply_to_user": {"reputation": 229, "user_id": 1195443, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/2eb518cdd36536d35b63cfb9d29f9af3?s=128&d=identicon&r=PG", "display_name": "clarkseth", "link": "https://stackoverflow.com/users/1195443/clarkseth"}, "edited": false, "score": 1, "creation_date": 1531833911, "post_id": 51382530, "comment_id": 89736922, "body": "@clarkseth but if I use a third array, performance of my script would worsen.. is it not possible to use a pop into @new_events?"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1531834083, "post_id": 51382530, "comment_id": 89737057, "body": "This looks familiar. Have we not had a similar question a few days ago?"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1531834275, "post_id": 51382530, "comment_id": 89737209, "body": "You are talking about an array and a hash here. Your data structures are NOT similar, and are not really useful to hold the information you want to convey. I take it that you mean to say that <i>simpson</i>&#39;s date is <code>2018&#47;03&#47;09</code> and time is <code>03:24:21</code>."}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1531834373, "post_id": 51382530, "comment_id": 89737278, "body": "Please clarify: Is the question about removing element 0 and 1 from <code>@{ $new_events{surname} }</code> ?"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1531834464, "post_id": 51382530, "comment_id": 89737344, "body": "See <a href=\"https://stackoverflow.com/q/51059931/1331451\">stackoverflow.com/q/51059931/1331451</a> for an explanation of why your data structure is strange."}, {"owner": {"reputation": 91, "user_id": 10033194, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4cde3f9ea294cca4f0d23b1ed2a041e7?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Anowez", "link": "https://stackoverflow.com/users/10033194/thomas-anowez"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1531834503, "post_id": 51382530, "comment_id": 89737366, "body": "@simbabque my older question was about sort -u command (&quot;Remove multiple duplicate lines from a file&quot;)"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1531834617, "post_id": 51382530, "comment_id": 89737462, "body": "No, not your question. But the data structure you are using looks almost exactly like the one in the question I linked above. Are you reading a file by columns, not lines?"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1531834872, "post_id": 51382530, "comment_id": 89737653, "body": "Then re-read my answer there please. You&#39;ll see it might not be the best idea to do it the way you are doing. Explain where you are getting your data from and I&#39;ll help you structure it to make your life easier. :)"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1531835010, "post_id": 51382530, "comment_id": 89737769, "body": "It&#39;s especially interesting to know what else you want to do with the data. If you only want to check for duplicates, you can generate an ID for each row based on a  digest of the whole row (or even just a concatenation of all fields) and put them in a lookup hash like that. Since you&#39;ve mentioned speed, that would make sense. But then speed shouldn&#39;t be an issue unless you have millions of records and are running on a Raspberry Pie."}, {"owner": {"reputation": 91, "user_id": 10033194, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4cde3f9ea294cca4f0d23b1ed2a041e7?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Anowez", "link": "https://stackoverflow.com/users/10033194/thomas-anowez"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1531835161, "post_id": 51382530, "comment_id": 89737885, "body": "@simbabque yes, I&#39;ve start my script from it &quot;stackoverflow.com/q/51059931/1331451&quot; because it was very similar to mine. I&#39;m reading a file by line, not column and I have to push elements into array. I&#39;ve a history file named history.log so I use it for load &quot;date,time,surname&quot; elements into @ older_events and I have a current log file named anagr_sysdate.log that load each elements (date, time and surname) into @ new_events, using the same keys."}, {"owner": {"reputation": 91, "user_id": 10033194, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4cde3f9ea294cca4f0d23b1ed2a041e7?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Anowez", "link": "https://stackoverflow.com/users/10033194/thomas-anowez"}, "edited": false, "score": 0, "creation_date": 1531835173, "post_id": 51382530, "comment_id": 89737892, "body": "I have to made a diff from @ older_events and @ new_events, for storing only new rows, because new_events will contain some elements already present into @ older_events and I don&#39;t want to have duplicate at the end of my elaboration"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 91, "user_id": 10033194, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4cde3f9ea294cca4f0d23b1ed2a041e7?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Anowez", "link": "https://stackoverflow.com/users/10033194/thomas-anowez"}, "edited": false, "score": 0, "creation_date": 1531835222, "post_id": 51382530, "comment_id": 89737937, "body": "Let us <a href=\"https://chat.stackoverflow.com/rooms/176157/discussion-between-simbabque-and-thomas-anowez\">continue this discussion in chat</a>."}], "answers": [{"comments": [{"owner": {"reputation": 91, "user_id": 10033194, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4cde3f9ea294cca4f0d23b1ed2a041e7?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Anowez", "link": "https://stackoverflow.com/users/10033194/thomas-anowez"}, "edited": false, "score": 0, "creation_date": 1532006466, "post_id": 51383115, "comment_id": 89818436, "body": "so, is it better if I push my elements, not into an array, but into an hash? My array loader is push @newer_events, {\tdate =&gt; &quot;$y/$m/$d&quot;, time =&gt; $time, surname =&gt; $surname};\t# Array loader"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 91, "user_id": 10033194, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4cde3f9ea294cca4f0d23b1ed2a041e7?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Anowez", "link": "https://stackoverflow.com/users/10033194/thomas-anowez"}, "edited": false, "score": 1, "creation_date": 1532015505, "post_id": 51383115, "comment_id": 89825160, "body": "That&#39;s NOT what you do according to your question. If it is was you actually do, skip the first two steps of my answer (since they transform the data from the structure you posted in your question into the structure you posted in the comment)."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 7, "last_activity_date": 1531850162, "last_edit_date": 1531850162, "creation_date": 1531835336, "answer_id": 51383115, "question_id": 51382530, "link": "https://stackoverflow.com/questions/51382530/perl-remove-element-from-an-array-if-already-exist-in-another/51383115#51383115", "title": "Perl - Remove element from an array if already exist in another", "body": "<p>First of all, you're using arrays for key-value pairs. This is not useful.</p>\n\n<pre><code>my %older_events = @older_events;\nmy %newer_events = @newer_events;\n</code></pre>\n\n<p>Secondly, your want to perform operations on records, but your data isn't organized into records.</p>\n\n<pre><code>my @older_events =\n   map {\n      +{\n         surname =&gt; $older_events-&gt;{ surname }[$_],\n         date    =&gt; $older_events-&gt;{ date    }[$_],\n         time    =&gt; $older_events-&gt;{ time    }[$_],\n      }\n   }\n      0..$#{ $older_events-&gt;{surname} };\n\nmy @newer_events =\n   map {\n      +{\n         surname =&gt; $newer_events-&gt;{ surname }[$_],\n         date    =&gt; $newer_events-&gt;{ date    }[$_],\n         time    =&gt; $newer_events-&gt;{ time    }[$_],\n      }\n   }\n      0..$#{ $newer_events-&gt;{surname} };\n</code></pre>\n\n<p>Thirdly, we need a quick way to lookup if an event is in <code>@older_events</code>.</p>\n\n<pre><code>sub key { join \"\\0\", @{ $_[0] }{qw( surname date time )} }\n\nmy %older_event_by_key =\n   map { key($_) =&gt; $_ }\n      @older_events;\n</code></pre>\n\n<p>Finally, we can grep</p>\n\n<pre><code>@newer_events =\n   grep { !$old_event_by_key{ key($_) } }\n      @newer_events;\n</code></pre>\n"}], "owner": {"reputation": 91, "user_id": 10033194, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4cde3f9ea294cca4f0d23b1ed2a041e7?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Anowez", "link": "https://stackoverflow.com/users/10033194/thomas-anowez"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 136, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1531858711, "creation_date": 1531833783, "last_edit_date": 1531834582, "question_id": 51382530, "link": "https://stackoverflow.com/questions/51382530/perl-remove-element-from-an-array-if-already-exist-in-another", "title": "Perl - Remove element from an array if already exist in another", "body": "<p>I've a question about perl embeded functions.\nIn your opinion, \"map\" function could help me for made a pop of all elements in an array, if already exist it in another array?</p>\n\n<p>These are the arrays:</p>\n\n<p><strong>Array named OLDER_EVENTS:</strong></p>\n\n<pre><code>my @older_events = (\n    surname =&gt; [\n        qw(\n            red\n            brown\n            simpson\n            donald         \n        )\n    ],\n    date =&gt; [\n        qw(\n            2018/02/14\n            2018/03/09\n            2018/05/01\n            2018/08/02\n        )\n    ],\n    time =&gt; [\n        qw(\n            01:00:52\n            01:06:41\n            03:24:31\n            19:14:31            \n        )\n    ]\n);\n</code></pre>\n\n<p><strong>ARRAY NAMED NEW ELEMENTS:</strong></p>\n\n<pre><code>my @new_events = (\n    surname =&gt; [\n        qw(\n            simpson\n            donald         \n            blanco\n            ernald\n        )\n    ],\n    date =&gt; [\n        qw(\n            2018/03/09\n            2018/08/02\n            2018/08/01\n            2018/08/14\n        )\n    ],\n    time =&gt; [\n        qw(\n            03:24:31\n            19:14:31            \n            00:03:16\n            09:21:45\n        )\n    ]\n);\n</code></pre>\n\n<p>In new events, last two entries are new, so, I would pop elements 1 and 2 from @new_events because it already exist in @older_events</p>\n\n<p>How could I do it, with a smart solution?</p>\n\n<p>Have I to use a third array, or, could I pop it from @older_events?</p>\n\n<p>Thanks for your attention</p>\n"}, {"tags": ["perl", "segmentation-fault", "child-process", "exit-code"], "comments": [{"owner": {"reputation": 10359, "user_id": 1216776, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/504692de390dabd9ca22fd716e178993?s=128&d=identicon&r=PG", "display_name": "stark", "link": "https://stackoverflow.com/users/1216776/stark"}, "edited": false, "score": 0, "creation_date": 1531832162, "post_id": 51381045, "comment_id": 89735617, "body": "What is in the low byte of <code>$?</code>"}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1531832992, "post_id": 51381045, "comment_id": 89736232, "body": "Note that the <a href=\"https://perldoc.perl.org/functions/open.html\" rel=\"nofollow noreferrer\"><code>open</code></a> call actually does a fork, and runs your command in a separate process.. According to <a href=\"https://perldoc.perl.org/perlipc.html\" rel=\"nofollow noreferrer\">perlipc</a>: <i>&quot;... readers of bogus commands return just a quick EOF&quot;</i> so that might be the reason why there is no apparent indication of the SIGSEGV signal"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1531833054, "post_id": 51381045, "comment_id": 89736282, "body": "@H&#229;kon H&#230;gland, uh no. The command is valid. The passage you quoted means that problems executing the command might only be revealed by <code>close</code>."}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1531833508, "post_id": 51381045, "comment_id": 89736603, "body": "@ikegami Thanks, I completely missed that! Of course you are right."}], "answers": [{"comments": [{"owner": {"reputation": 2481, "user_id": 1444748, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/WqxKU.jpg?s=128&g=1", "display_name": "Morad", "link": "https://stackoverflow.com/users/1444748/morad"}, "edited": false, "score": 0, "creation_date": 1531833968, "post_id": 51382242, "comment_id": 89736971, "body": "And what about the &quot;Segmentation fault&quot; message... Why I don&#39;t see it?"}, {"owner": {"reputation": 1110, "user_id": 9749458, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/001ed2d47a01593ee5c6463c2f5fe224?s=128&d=identicon&r=PG&f=1", "display_name": "Dave Mitchell", "link": "https://stackoverflow.com/users/9749458/dave-mitchell"}, "edited": false, "score": 4, "creation_date": 1531834207, "post_id": 51382242, "comment_id": 89737164, "body": "because that message is produced by the shell"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1531834755, "post_id": 51382242, "comment_id": 89737558, "body": "<code>open -|</code> uses the same optimization as system: If you pass a shell command that consists of nothing that non-special characters, whitespace, and optionally <code>2&gt;&amp;1</code>, the shell isn&#39;t invoked. The shell is the source of that message. Feel free to adjust <code>&quot;Killed by signal &quot;.( $? &amp; 0x7F ).&quot;\\n&quot;</code> to produce the same message."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1531841348, "post_id": 51382242, "comment_id": 89742304, "body": "$previous_comment =~ s/nothing that/nothing but/"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1531841479, "post_id": 51382242, "comment_id": 89742395, "body": "By the way, the fact that the shell is bypassed is why you can get accurate information about how the process exited."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 5, "last_activity_date": 1531832983, "creation_date": 1531832983, "answer_id": 51382242, "question_id": 51381045, "link": "https://stackoverflow.com/questions/51381045/segmentation-fault-disappears-when-running-command-from-perl/51382242#51382242", "title": "Segmentation fault disappears when running command from Perl", "body": "<p>You are specifically ignoring the parts of <code>$?</code> that indicate if the process was killed by a signal.</p>\n\n<p>Replace</p>\n\n<pre><code>my $exit_status = $?&gt;&gt;8;\nprint \"exit status: $exit_status\\n\";\n</code></pre>\n\n<p>with</p>\n\n<pre><code>die(\"Killed by signal \".( $? &amp; 0x7F ).\"\\n\") if $? &amp; 0x7F;\ndie(\"Exited with error \".( $? &gt;&gt; 8 ).\"\\n\") if $? &gt;&gt; 8;\nprint(\"Completed successfully\\n\");\n</code></pre>\n"}], "owner": {"reputation": 2481, "user_id": 1444748, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/WqxKU.jpg?s=128&g=1", "display_name": "Morad", "link": "https://stackoverflow.com/users/1444748/morad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 369, "favorite_count": 0, "accepted_answer_id": 51382242, "answer_count": 1, "score": 2, "last_activity_date": 1531833300, "creation_date": 1531829409, "last_edit_date": 1531833300, "question_id": 51381045, "link": "https://stackoverflow.com/questions/51381045/segmentation-fault-disappears-when-running-command-from-perl", "title": "Segmentation fault disappears when running command from Perl", "body": "<p>I have a simple c++ program that raises SIGSEGV:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;signal.h&gt;\n\nint main() {\n    std::cout &lt;&lt; \"Raising seg fault...\" &lt;&lt; std::endl;\n    raise(SIGSEGV);\n    return 0;\n}\n</code></pre>\n\n<p>When running this program I get the following output</p>\n\n<pre><code>Raising seg fault...\nSegmentation fault\n</code></pre>\n\n<p>But when I run my program inside a perl script using pipe, the segmentation fault disappears.\nHere is my Perl script:</p>\n\n<pre><code>use strict;\nuse warnings;\n\n\nmy $cmd =\"./test\";\n\nopen (OUTPUT, \"$cmd 2&gt;&amp;1 |\") || die();\nwhile (&lt;OUTPUT&gt;) {\n      print;\n}\nclose (OUTPUT);\nmy $exit_status = $?&gt;&gt;8;\nprint \"exit status: $exit_status\\n\";\n</code></pre>\n\n<p>I get the following output when running the script:</p>\n\n<pre><code>Raising seg fault...\nexit status: 0\n</code></pre>\n\n<p>How could this be possible? Where is the segmentation fault and why is the exit status 0?</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1531818524, "post_id": 51377365, "comment_id": 89726315, "body": "You need <code>sprintf</code> there in your <code>my $perm</code> line."}], "answers": [{"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 3, "creation_date": 1531823806, "post_id": 51377545, "comment_id": 89729936, "body": "Re &quot;<i>You shouldn&#39;t be using the underlying array structure, but rather the accessors</i>&quot;, Indeed. There&#39;s no point is using File::stat if one keeps using array offsets. The whole reason File::stat exists is to give readable names to the fields so one doesn&#39;t have to use numerical offsets!"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1531829482, "post_id": 51377545, "comment_id": 89733735, "body": "The rest of the program should be using the object returned from <code>File::stat</code> too, and it shouldn&#39;t be called <code>$mode</code>. With <code>my $st = stat $filename</code>, the other values can be accessed with <code>$st-&gt;mode &amp; 07777</code>, <code>$st-&gt;uid</code>, and <code>$st-&gt;gid</code>."}], "tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": true, "score": 4, "last_activity_date": 1531829652, "last_edit_date": 1531829652, "creation_date": 1531818953, "answer_id": 51377545, "question_id": 51377365, "link": "https://stackoverflow.com/questions/51377365/perl-get-user-group-and-file-permission-and-assign-to-variable/51377545#51377545", "title": "Perl get user, group and file permission and assign to variable", "body": "<blockquote>\n<pre><code>my $perm = \"%04o\\n\", @$mode[2] &amp; 07777;\n</code></pre>\n</blockquote>\n\n<p>You are missing an <a href=\"http://perldoc.perl.org/functions/sprintf.html\" rel=\"nofollow noreferrer\"><code>sprintf</code></a> call here. In your example above you had <a href=\"http://perldoc.perl.org/functions/printf.html\" rel=\"nofollow noreferrer\"><code>printf</code></a>, which formats and prints. If you only want to format and assign, you have to use <code>sprintf</code>. That will make the error go away.</p>\n\n<p>Furthermore, your <code>stat</code> call returns an object because you are using <a href=\"https://metacpan.org/pod/File::stat\" rel=\"nofollow noreferrer\">File::stat</a>. You shouldn't be using the underlying array structure, but rather the accessors.</p>\n\n<pre><code>my $stat = stat $filename;\nmy $perm = sprintf \"%04o\\n\", $stat-&gt;mode &amp; 07777;\n</code></pre>\n\n<p>Note how I also renamed it to <code>$stat</code>, because the object holds all of the information regarding that file's <code>stat</code> call, not only the mode. You can use it throughout your program to increase readability.</p>\n"}], "owner": {"reputation": 980, "user_id": 2486083, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/pZudJ.jpg?s=128&g=1", "display_name": "Chetan", "link": "https://stackoverflow.com/users/2486083/chetan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 105, "favorite_count": 0, "accepted_answer_id": 51377545, "answer_count": 1, "score": 0, "last_activity_date": 1531829652, "creation_date": 1531818457, "question_id": 51377365, "link": "https://stackoverflow.com/questions/51377365/perl-get-user-group-and-file-permission-and-assign-to-variable", "title": "Perl get user, group and file permission and assign to variable", "body": "<p>I am having a below code which gets a file's user, group and permission.</p>\n\n<pre><code>use File::stat;\n\nmy $filename = \"/home/chetanv/filecheck\";\n\nmy $mode = (stat($filename));\nmy $user = getpwuid(@$mode[4]);\nmy $group = getgrgid(@$mode[5]);\n\nprintf \"Permission : %04o\\n\", @$mode[2] &amp; 07777;\nprint \"User : $user\\n\";\nprint \"Group : $group\\n\";\n</code></pre>\n\n<p>OUTPUT for the same:</p>\n\n<pre><code>Permission : 0777\nUser : chetanv\nGroup : wheel\n</code></pre>\n\n<p>The below line works fine because i use printf statement</p>\n\n<pre><code>printf \"Permission : %04o\\n\", @$mode[2] &amp; 07777;\n</code></pre>\n\n<p>Now if i am trying to assign it to a variable for future use i am unable to do it. I tried something like this:</p>\n\n<pre><code>my $mode = (stat($filename));\nmy $perm = \"%04o\\n\", @$mode[2] &amp; 07777;\nmy $user = getpwuid(@$mode[4]);\nmy $group = getgrgid(@$mode[5]);\nprint \"Perm : $perm\\n\";\nprint \"User : $user\\n\";\nprint \"Group : $group\\n\";\n</code></pre>\n\n<p>It says,</p>\n\n<pre><code>Useless use of bitwise and (&amp;) in void context \n</code></pre>\n\n<p>Can someone help me on how i can assign the permission output to a variable and use the variable later</p>\n"}, {"tags": ["perl", "ftp"], "comments": [{"owner": {"reputation": 38072, "user_id": 46395, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5ce828f20abb195ef5d971205ee36c27?s=128&d=identicon&r=PG", "display_name": "daxim", "link": "https://stackoverflow.com/users/46395/daxim"}, "edited": false, "score": 1, "creation_date": 1531819462, "post_id": 51375882, "comment_id": 89726945, "body": "Define &quot;does not work&quot;. What result do you expect? What happens actually? /// For debugging, print out or otherwise log the values of the relevant variables/expressions."}, {"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 1, "creation_date": 1531819810, "post_id": 51375882, "comment_id": 89727168, "body": "<code>&amp;ftp&#39;get(...)</code>. Wow. I haven&#39;t seen that style syntax in over 20 years. Isn&#39;t it from perl 4? Please say this is ancient code that got dumped on you and not something written recently..."}, {"owner": {"reputation": 90, "user_id": 7917654, "user_type": "registered", "profile_image": "https://graph.facebook.com/709814869202626/picture?type=large", "display_name": "ElfoDerElf", "link": "https://stackoverflow.com/users/7917654/elfoderelf"}, "edited": false, "score": 0, "creation_date": 1531821159, "post_id": 51375882, "comment_id": 89728199, "body": "it does not delete the file on the server. i cant print out values because the script runs totaly in the background and i have no idea where it gets triggered because its no cronjob or something. and i have no idea the script is from 2002 and now they issue network problems where a .lock file remains on the ftp. therefor i need to check how old the file is and deletet it evantually and that doesnt work"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1531827325, "post_id": 51375882, "comment_id": 89732285, "body": "<i>&quot;now they issue network problems where a .lock file remains on the ftp&quot;</i> So this is a hack to &quot;fix&quot; a bug elsewhere. It sounds like this system is a mess."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1531827584, "post_id": 51375882, "comment_id": 89732449, "body": "Your code has <code>print</code> statements. Find out what is being printed by <code>timedprint</code> and tell us, please."}, {"owner": {"reputation": 90, "user_id": 7917654, "user_type": "registered", "profile_image": "https://graph.facebook.com/709814869202626/picture?type=large", "display_name": "ElfoDerElf", "link": "https://stackoverflow.com/users/7917654/elfoderelf"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1531835075, "post_id": 51375882, "comment_id": 89737822, "body": "@Borodin the system is no mess but when they have electricity problems ot happens that the files dont get deleted. in normal case they get deleted at the end of the script, this works perfectly. i have no output because i have nothing in my console that is printed, i dont know why. should i post the whole script??"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1531844509, "post_id": 51375882, "comment_id": 89744199, "body": "@Bertl: That&#39;s a problem that should be solved by an uninterruptible power supply. You shouldn&#39;t rely on a process deleting its own temporary files anyway, but on Linux you should delete the file as soon as it is created; it will then remain accessible until the file handle is closed."}, {"owner": {"reputation": 90, "user_id": 7917654, "user_type": "registered", "profile_image": "https://graph.facebook.com/709814869202626/picture?type=large", "display_name": "ElfoDerElf", "link": "https://stackoverflow.com/users/7917654/elfoderelf"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1531844582, "post_id": 51375882, "comment_id": 89744232, "body": "@Borodin ...why wasnt i thinking about that.. but im a software engineer and when the customer wants to have that in the programm like that its not my job to tell them to fix their network.."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1531844823, "post_id": 51375882, "comment_id": 89744375, "body": "Yes, I suggest you post the whole program if it&#39;s small enough."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1531845962, "post_id": 51375882, "comment_id": 89744947, "body": "I recommend that you take a look at the question <a href=\"https://stackoverflow.com/questions/9889277/\"><i>How to create temporary files on linux that will automatically clean up after themselves no matter what?</i></a> in particular <a href=\"https://stackoverflow.com/a/9889520/622310\">this answer</a>."}, {"owner": {"reputation": 90, "user_id": 7917654, "user_type": "registered", "profile_image": "https://graph.facebook.com/709814869202626/picture?type=large", "display_name": "ElfoDerElf", "link": "https://stackoverflow.com/users/7917654/elfoderelf"}, "edited": false, "score": 0, "creation_date": 1531978467, "post_id": 51375882, "comment_id": 89801148, "body": "Thats a total different topic?! the code is 400 lines long.. i guess thats too long. i found out that mdtm is only for newer perl versions. i have perl version 5 on that machine. but i cant upgrade because there are to many perl scripts on the server and i cant redo all of them. does somebody have a different solution instead of mdtm?"}], "answers": [{"tags": [], "owner": {"reputation": 90, "user_id": 7917654, "user_type": "registered", "profile_image": "https://graph.facebook.com/709814869202626/picture?type=large", "display_name": "ElfoDerElf", "link": "https://stackoverflow.com/users/7917654/elfoderelf"}, "is_accepted": true, "score": 0, "last_activity_date": 1533051209, "creation_date": 1533051209, "answer_id": 51617105, "question_id": 51375882, "link": "https://stackoverflow.com/questions/51375882/delete-file-from-ftp-if-its-older-than-a-given-time-with-perl-script/51617105#51617105", "title": "Delete file from ftp if its older than a given time with PERL script", "body": "<p>Rebuilt the script with the Net::FTP Module and cleared old code totaly. and now it works with the mdtm() from the module.</p>\n\n<p>works fine:</p>\n\n<pre><code>my $file_ku_mdtm = $ftp-&gt;mdtm($lockkudatei);\nif( time - $file_ku_mdtm &gt;= $max_time ) {}\n</code></pre>\n"}], "owner": {"reputation": 90, "user_id": 7917654, "user_type": "registered", "profile_image": "https://graph.facebook.com/709814869202626/picture?type=large", "display_name": "ElfoDerElf", "link": "https://stackoverflow.com/users/7917654/elfoderelf"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 115, "favorite_count": 0, "accepted_answer_id": 51617105, "answer_count": 1, "score": 0, "last_activity_date": 1533051209, "creation_date": 1531813443, "question_id": 51375882, "link": "https://stackoverflow.com/questions/51375882/delete-file-from-ftp-if-its-older-than-a-given-time-with-perl-script", "title": "Delete file from ftp if its older than a given time with PERL script", "body": "<p>i try to delete a given file from my ftp server if its older than a given value like 2 minutes for example</p>\n\n<p>i have it like this atm. the script runs perfectly but the part where it should check the files does not work. </p>\n\n<p>my code so far:</p>\n\n<pre><code>my $max_time = 120;\n\nif (!&amp;ftp'get($lockkudatei, $Path.$tmpfile, 0)) {\n    &amp;timedprint(\"No excisting Lock file\");\n} else {\n    my $file_ku_mdtm = $ftp-&gt;mdtm($lockkudatei);\n\n    if( time - $file_ku_mdtm &gt;= $max_time ) {\n        if(&amp;ftp'delete(\"$lockkudatei\")) {\n            &amp;timedprint(\"Lock file deleted\");\n        } else {\n            &amp;timedprint(\"Lock file could not be deleted\");\n            &amp;dodie(\"Lock file could not be deleted\");\n        }\n    } else {\n        &amp;dodie( \"No excisting Lock file\\n\");\n    }\n}\n</code></pre>\n\n<p>dodie:</p>\n\n<pre><code> sub dodie {\n     ($msg) = @_;\n     #$t=localtime(time());\n     #print STDOUT \"\\nt: $msg\";\n     print STDOUT \"\\nERROR:$msg\";\n     die( $msg );\n }\n</code></pre>\n\n<p>timedprint:</p>\n\n<pre><code>sub timedprint {\n     ($msg) = @_;\n     #$t=localtime(time());\n     #print STDOUT \"\\nt: $msg\";\n     print STDOUT \"\\n$msg\";\n }\n</code></pre>\n\n<p>thanks in advance!</p>\n"}, {"tags": ["perl"], "answers": [{"comments": [{"owner": {"reputation": 19969, "user_id": 23512, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/tUj1I.png?s=128&g=1", "display_name": "Tanktalus", "link": "https://stackoverflow.com/users/23512/tanktalus"}, "edited": false, "score": 0, "creation_date": 1531845113, "post_id": 51375502, "comment_id": 89744517, "body": "the numeric one probably would barf if any item in the haystack is longer than (or maybe even the same length as) the needle ;) Also, you can use the <code>compute_length</code> difference to create a power of 10 that gets you the right amount to divide by in a single shot."}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "reply_to_user": {"reputation": 19969, "user_id": 23512, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/tUj1I.png?s=128&g=1", "display_name": "Tanktalus", "link": "https://stackoverflow.com/users/23512/tanktalus"}, "edited": false, "score": 0, "creation_date": 1531845870, "post_id": 51375502, "comment_id": 89744903, "body": "@Tanktalus: Thanks, removed the loop from the numeric solution."}], "tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": false, "score": 6, "last_activity_date": 1531845828, "last_edit_date": 1531845828, "creation_date": 1531812256, "answer_id": 51375502, "question_id": 51375300, "link": "https://stackoverflow.com/questions/51375300/how-to-check-if-a-number-starts-with-other-numbers-in-perl/51375502#51375502", "title": "How to check if a number starts with other numbers in perl", "body": "<p>You can join all the prefixes into a regex and match the random number against it:</p>\n\n<pre><code>#!/usr/bin/perl\nuse warnings;\nuse strict;\n\nsub prefix_in_list {\n    my ($needle, $haystack) = @_;\n    my $regex = join '|', @$haystack;\n    return $needle =~ /^(?:$regex)/\n}\n\nuse Test::More tests =&gt; 3;\n\nok prefix_in_list(45789277, [1, 2, 45, 757, 3, 7466]);\n\nok ! prefix_in_list(55366363, [1, 4, 3]);\n\nok prefix_in_list(55366363, [6535, 55, 1, 8]);\n</code></pre>\n\n<p>Or, if you like a numeric solution:</p>\n\n<pre><code>sub compute_length {\n    my ($n) = @_;\n    return int(log($n) / log 10)\n}\n\nsub prefix_in_list {\n    my ($needle, $haystack) = @_;\n    for my $prefix (@$haystack) {\n        my $start = $needle;\n        my $divider = 10 ** (compute_length($start) - compute_length($prefix));\n        return 1 if int($start / $divider) == $prefix;\n    }\n    return\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "reply_to_user": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1531890570, "post_id": 51375584, "comment_id": 89759369, "body": "@choroba Thanks for the suggestion. I have updated my answer. A drawback of the <code>index</code> solution could be that it scans the whole string even if a match is not found at position zero."}, {"owner": {"reputation": 11, "user_id": 10092025, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cfb0eb3638487612b5bf0f22e21a833b?s=128&d=identicon&r=PG&f=1", "display_name": "Programmingislife", "link": "https://stackoverflow.com/users/10092025/programmingislife"}, "edited": false, "score": 0, "creation_date": 1531936664, "post_id": 51375584, "comment_id": 89787792, "body": "Writing this for the next people come here. What ill probably do, is to use the index with an if, if the index is not 0 i will ignore it, so it will be a good solution..."}], "tags": [], "owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "is_accepted": false, "score": -1, "last_activity_date": 1531890577, "last_edit_date": 1531890577, "creation_date": 1531812559, "answer_id": 51375584, "question_id": 51375300, "link": "https://stackoverflow.com/questions/51375300/how-to-check-if-a-number-starts-with-other-numbers-in-perl/51375584#51375584", "title": "How to check if a number starts with other numbers in perl", "body": "<p>You can also use <a href=\"https://perldoc.perl.org/functions/substr.html\" rel=\"nofollow noreferrer\"><code>substr</code></a>:</p>\n\n<pre><code># Checks if a number $num has a prefix given by an item in @$list\nsub starts_width {\n    my ( $num, $list ) = @_;\n\n    for (@$list) {\n        return 1 if (substr $num, 0, length $_) eq $_;\n    }\n    return 0;\n}\n</code></pre>\n\n<p>Alternatively as @choroba mentioned, <a href=\"https://perldoc.perl.org/functions/index.html\" rel=\"nofollow noreferrer\"><code>index</code></a> can be used:</p>\n\n<pre><code>return 1 if (index $num, $_) == 0;\n</code></pre>\n\n<p>Note that <code>index</code> will scan the whole string even if it did not find a match at position 0. So the most efficient solution of <code>substr</code> and <code>index</code> will most likely depend on your data.</p>\n"}], "owner": {"reputation": 11, "user_id": 10092025, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cfb0eb3638487612b5bf0f22e21a833b?s=128&d=identicon&r=PG&f=1", "display_name": "Programmingislife", "link": "https://stackoverflow.com/users/10092025/programmingislife"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 162, "favorite_count": 1, "answer_count": 2, "score": 1, "last_activity_date": 1531890577, "creation_date": 1531811600, "question_id": 51375300, "link": "https://stackoverflow.com/questions/51375300/how-to-check-if-a-number-starts-with-other-numbers-in-perl", "title": "How to check if a number starts with other numbers in perl", "body": "<p>i need help with creating a function that get a random number(for example 45789277) \nAnd will check if the number above starts with one of list of number that are same always\n(for example [1,2,45,757, 3, 7466])</p>\n\n<p>If the number given is 55366363 and the list is [1,4,3] the function will return False, if the list is [6535,55,1,8] the function will return a True\n*there is not a chance that the number will start in two numbers from the list\n*the first digit of the number given will never be 0\n*in list there going to be diffrent length numbers(one/two/three/four digits)\n* the number given will always have more digits then the numbers in the list</p>\n\n<p>Thanks ;)</p>\n"}, {"tags": ["regex", "perl"], "answers": [{"comments": [{"owner": {"reputation": 411, "user_id": 1513168, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/3ffcf603d473674e38f604b5c8c8e582?s=128&d=identicon&r=PG", "display_name": "Supertech", "link": "https://stackoverflow.com/users/1513168/supertech"}, "edited": false, "score": 0, "creation_date": 1531793001, "post_id": 51371853, "comment_id": 89716359, "body": "Thank you for your solutions. Is there a drawback doing this m/([ATGC]*?)G*$/. It seems to give the same result. It&#39;s [ATGC]*? part that I had hard time to figure out until I see your answer."}, {"owner": {"reputation": 22367, "user_id": 2288659, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/bBg8v.png?s=128&g=1", "display_name": "Silvio Mayolo", "link": "https://stackoverflow.com/users/2288659/silvio-mayolo"}, "reply_to_user": {"reputation": 411, "user_id": 1513168, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/3ffcf603d473674e38f604b5c8c8e582?s=128&d=identicon&r=PG", "display_name": "Supertech", "link": "https://stackoverflow.com/users/1513168/supertech"}, "edited": false, "score": 1, "creation_date": 1531795541, "post_id": 51371853, "comment_id": 89716862, "body": "That would work perfectly well. <code>m&#47;&#47;</code> won&#39;t modify the original string, whereas <code>s&#47;&#47;&#47;</code> will actually change the string in-place, so it depends on what you want out of it."}], "tags": [], "owner": {"reputation": 22367, "user_id": 2288659, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/bBg8v.png?s=128&g=1", "display_name": "Silvio Mayolo", "link": "https://stackoverflow.com/users/2288659/silvio-mayolo"}, "is_accepted": false, "score": 3, "last_activity_date": 1531789461, "creation_date": 1531789461, "answer_id": 51371853, "question_id": 51371808, "link": "https://stackoverflow.com/questions/51371808/remove-last-distinct-k-characters-from-end-of-a-string/51371853#51371853", "title": "Remove last distinct K character(s) from end of a string", "body": "<p>Removing trailing <code>G</code>s is easy.</p>\n\n<pre><code>s/G*$//\n</code></pre>\n\n<p>If it's not necessarily a <code>G</code>, you can match it with a capture group.</p>\n\n<pre><code>s/(.)\\1*$//\n</code></pre>\n\n<p>If you want to only remove a character if it is <em>repeated</em> at the end (so <code>ATCG</code> would be untouched but <code>ATCGGG</code> would change), you can do that with <code>+</code></p>\n\n<pre><code>s/(.)\\1+$//\n</code></pre>\n"}], "owner": {"reputation": 411, "user_id": 1513168, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/3ffcf603d473674e38f604b5c8c8e582?s=128&d=identicon&r=PG", "display_name": "Supertech", "link": "https://stackoverflow.com/users/1513168/supertech"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 56, "favorite_count": 1, "answer_count": 1, "score": -1, "last_activity_date": 1531790006, "creation_date": 1531788991, "question_id": 51371808, "link": "https://stackoverflow.com/questions/51371808/remove-last-distinct-k-characters-from-end-of-a-string", "title": "Remove last distinct K character(s) from end of a string", "body": "<p>How to I remove G s at the end of each string, and capture string left of it. <br/>\n    ...TGTGGG <br/>\n    ...CTGAGGGGG <br/>\n    ...ACAGGGGGGGG <br/>\n    ...CAAACAGGGGGGGGGGGG <br/></p>\n\n<p>The result would like this. If possible I want to capture this remaining string in a regex. <br/>\n    ...TGT <br/>\n    ...CTGA <br/>\n    ...ACA<br/>\n    ...CAAACA <br/>\nThank you.</p>\n"}, {"tags": ["perl", "perl-xs"], "comments": [{"owner": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "edited": false, "score": 0, "creation_date": 1531788875, "post_id": 51371752, "comment_id": 89715575, "body": "Could you give some example code, please?"}, {"owner": {"reputation": 5822, "user_id": 546218, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/f6f59bf629073f1eb8cdd492d10386c4?s=128&d=identicon&r=PG", "display_name": "rocky", "link": "https://stackoverflow.com/users/546218/rocky"}, "reply_to_user": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "edited": false, "score": 0, "creation_date": 1531791548, "post_id": 51371752, "comment_id": 89716072, "body": "@Schwern ok code added. Does this make it clear?"}, {"owner": {"reputation": 2833, "user_id": 9300627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7a38cf029222bcf1d902e6b2759ffeb?s=128&d=identicon&r=PG", "display_name": "haukex", "link": "https://stackoverflow.com/users/9300627/haukex"}, "edited": false, "score": 0, "creation_date": 1531808422, "post_id": 51371752, "comment_id": 89720279, "body": "<a href=\"https://www.perlmonks.org/?node_id=1218517\" rel=\"nofollow noreferrer\">Crossposted from PerlMonks</a>."}, {"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 0, "creation_date": 1531810463, "post_id": 51371752, "comment_id": 89721396, "body": "just in case it worked, I tried <code>B::svref_2object( bless(\\$op_addr, &#39;B::SV&#39;)-&gt;object_2svref )</code>.  but it didn&#39;t :)"}], "answers": [{"comments": [{"owner": {"reputation": 5822, "user_id": 546218, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/f6f59bf629073f1eb8cdd492d10386c4?s=128&d=identicon&r=PG", "display_name": "rocky", "link": "https://stackoverflow.com/users/546218/rocky"}, "edited": false, "score": 0, "creation_date": 1531849013, "post_id": 51386837, "comment_id": 89746507, "body": "So simple that I wonder why didn&#39;t I think of this before? ;-)  I will be adding this to Devel::Callsite in a future version.  Have any thoughts how much  if this varies over the various Perl versions. (I can check this myself, but if you happen to know...)"}, {"owner": {"reputation": 5822, "user_id": 546218, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/f6f59bf629073f1eb8cdd492d10386c4?s=128&d=identicon&r=PG", "display_name": "rocky", "link": "https://stackoverflow.com/users/546218/rocky"}, "edited": false, "score": 0, "creation_date": 1531871642, "post_id": 51386837, "comment_id": 89755323, "body": "That may be true but <code>op_class</code> isn&#39;t in Perl versions 5.24 or earlier. You probably you can duplicate the 5.26 code in earlier versions though."}, {"owner": {"reputation": 5822, "user_id": 546218, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/f6f59bf629073f1eb8cdd492d10386c4?s=128&d=identicon&r=PG", "display_name": "rocky", "link": "https://stackoverflow.com/users/546218/rocky"}, "edited": false, "score": 0, "creation_date": 1531904539, "post_id": 51386837, "comment_id": 89766588, "body": "As I mention on perlmonks, although the <code>name</code> field is correct, the address changes and the other fields like parent are wrong. Sigh."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 5822, "user_id": 546218, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/f6f59bf629073f1eb8cdd492d10386c4?s=128&d=identicon&r=PG", "display_name": "rocky", "link": "https://stackoverflow.com/users/546218/rocky"}, "edited": false, "score": 0, "creation_date": 1531906080, "post_id": 51386837, "comment_id": 89767684, "body": "Re &quot;<i>Have any thoughts how much if this varies over the various Perl versions.</i>&quot;, When mucking with not just Perl internals, but the internals of another module, breakage is to be expected. Just be sure to test your module with against dev releases of Perl, and the release candidates specifically. (p5p already does this for you, but it&#39;s best if you do it too.) p5p is always happy to help find a solution to breakage they cause."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 5822, "user_id": 546218, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/f6f59bf629073f1eb8cdd492d10386c4?s=128&d=identicon&r=PG", "display_name": "rocky", "link": "https://stackoverflow.com/users/546218/rocky"}, "edited": false, "score": 0, "creation_date": 1531921984, "post_id": 51386837, "comment_id": 89778545, "body": "Re &quot;<i><code>op_class</code> isn&#39;t in Perl versions 5.24 or earlier</i>&quot;, Then look at older versions of <code>ext&#47;B&#47;B.xs</code> to see what the module did before"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 5822, "user_id": 546218, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/f6f59bf629073f1eb8cdd492d10386c4?s=128&d=identicon&r=PG", "display_name": "rocky", "link": "https://stackoverflow.com/users/546218/rocky"}, "edited": false, "score": 0, "creation_date": 1531922011, "post_id": 51386837, "comment_id": 89778567, "body": "Re &quot;<i>the address changes and the other fields like parent are wrong</i>&quot;, You&#39;re printing the address of the B objects, not the address of the ops themselves. <code>printf(&quot;op: %s (0x%x), parent: %s (0x%x)\\n&quot;, $op-&gt;name, $$op, $parent-&gt;name, $$parent);</code>"}, {"owner": {"reputation": 5822, "user_id": 546218, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/f6f59bf629073f1eb8cdd492d10386c4?s=128&d=identicon&r=PG", "display_name": "rocky", "link": "https://stackoverflow.com/users/546218/rocky"}, "edited": false, "score": 0, "creation_date": 1531952397, "post_id": 51386837, "comment_id": 89795164, "body": "Thanks for the information and clarification. I need to put all of this on hold and focus on other things, but if/when I come back to this I&#39;ll use your suggestions with respect to Perl versions other than 5.26."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 4, "last_activity_date": 1531847450, "last_edit_date": 1531847450, "creation_date": 1531847085, "answer_id": 51386837, "question_id": 51371752, "link": "https://stackoverflow.com/questions/51371752/how-can-i-turn-an-op-address-into-the-right-kind-of-bop/51386837#51386837", "title": "How can I turn an op address into the right kind of B::OP?", "body": "<p>This duplicates B's internal <code>make_op_object</code>.</p>\n\n<pre><code>use B qw( );\n\nuse Inline C =&gt; &lt;&lt;'__EOS__';\n\n    static const char * const opclassnames[] = {\n        \"B::NULL\",\n        \"B::OP\",\n        \"B::UNOP\",\n        \"B::BINOP\",\n        \"B::LOGOP\",\n        \"B::LISTOP\",\n        \"B::PMOP\",\n        \"B::SVOP\",\n        \"B::PADOP\",\n        \"B::PVOP\",\n        \"B::LOOP\",\n        \"B::COP\",\n        \"B::METHOP\",\n        \"B::UNOP_AUX\"\n    };\n\n    SV *make_op_object(IV o_addr) {\n        const OP *o = INT2PTR(OP*, o_addr);\n        SV *opsv = newSV(0);\n        sv_setiv(newSVrv(opsv, opclassnames[op_class(o)]), o_addr);\n        return opsv;\n    }\n\n__EOS__\n</code></pre>\n\n<p>Example use:    </p>\n\n<pre><code>use Devel::Callsite qw( callsite );\n\nmy $site = sub { return callsite() };\nmy $addr = $site-&gt;();\nmy $op = make_op_object($addr);\nsay $op-&gt;name;\n</code></pre>\n"}], "owner": {"reputation": 5822, "user_id": 546218, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/f6f59bf629073f1eb8cdd492d10386c4?s=128&d=identicon&r=PG", "display_name": "rocky", "link": "https://stackoverflow.com/users/546218/rocky"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 99, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1531903260, "creation_date": 1531788408, "last_edit_date": 1531903260, "question_id": 51371752, "link": "https://stackoverflow.com/questions/51371752/how-can-i-turn-an-op-address-into-the-right-kind-of-bop", "title": "How can I turn an op address into the right kind of B::OP?", "body": "<p>In a running Perl program if I have an Op address (either by <a href=\"https://metacpan.org/pod/B::Concise\" rel=\"nofollow noreferrer\">B::Concise</a>, <a href=\"https://metacpan.org/pod/Devel::Callsite\" rel=\"nofollow noreferrer\">Devel::Callsite</a> or via mysterious other ways) is there a simple way to cast that into the right kind of B::OP, short of walking an Opcode tree?</p>\n\n<p>To try to make this clearer, here's some code:</p>\n\n<pre><code>use Devel::Callsite;\nuse B::Concise qw(set_style);\nuse B;\n\nsub testing\n{\n    sub foo { callsite() };\n    my $op_addr =  foo;\n    printf \"Op address is 0x%x\\n\", $op_addr;\n\n\n    # I can get OPs by walking and looking for $op_addr,\n    # but I don't want to do that.\n    my $walker = B::Concise::compile('-terse', '-src', \\&amp;testing);\n    B::Concise::walk_output(\\my $buf);\n    $walker-&gt;();   # walks and renders into $buf;\n    print $buf;\n}\n\ntesting();\n</code></pre>\n\n<p>When this is run you'll see something like: </p>\n\n<pre><code>$ perl /tmp/foo.pl\nOp address is 0x2026940\nB::Concise::compile(CODE(0x1f32b18))\nUNOP (0x1f40fd0) leavesub [1] \n    LISTOP (0x20aa870) lineseq \n# 8:     my $op_addr =  foo;\n         COP (0x1f7cd80) nextstate \n         BINOP (0x20aba80) sassign \n            UNOP (0x20ad200) entersub [2] \n                UNOP (0x1f39b80) null [148] \n                    OP (0x1fd14f0) pushmark \n                    UNOP (0x1f397c0) null [17] \n                        SVOP (0x1f39890) gv  GV (0x1fa0968) *foo \n            OP (0x2026940) padsv [1]\n                ^^^^^^^^^^ \n....\n</code></pre>\n\n<p>So <code>0x2026940</code> is the address of a <code>B::OP</code> and and which according to <a href=\"http://perldoc.perl.org/5.8.9/B.html#B%3a%3aOP-METHODS\" rel=\"nofollow noreferrer\">this</a> has <code>next()</code>, <code>sibling()</code>, <code>name()</code> methods. If the address were say <code>0x20aa870</code> that would be the address of a <code>LISTOP</code> which has in addition a <code>children()</code> method.</p>\n\n<p>I added B::Concise just to show what's going on. In practice I don't want to walk the optree, because I'm assuming/hoping that the address is in fact where that listop resides. </p>\n\n<p>So perhaps there are two parts, first casting an address to <code>B::Op</code> which I believe is the parent class, but after that I'd like to know which kind of Op, (UNOP, BINOP, LISTOP) we are then talking about.</p>\n\n<p>If I can get the cast part done, the second part is probably easy: all <code>B::OP</code>'s have a <code>name()</code> method, so from that I can figure out what subclass of OP I have. </p>\n\n<p><strong>EDIT:</strong>\nikegami's solution is now part of Devel::Callsite version 1.0.1 al though it isn't quite right.</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 3, "creation_date": 1531775687, "post_id": 51370192, "comment_id": 89712618, "body": "Try <code>perl -Ilib -E &quot;print \\&quot;@INC\\&quot;&quot;</code> and then take a guess."}, {"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 1, "creation_date": 1531786654, "post_id": 51370192, "comment_id": 89715237, "body": "Enable warnings, especially on one-liners :)"}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1531804540, "post_id": 51370192, "comment_id": 89718812, "body": "The <code>-e</code> or <code>-E</code> switch has to come after any other command line switches. Strangely I could not find this documented clearly in <a href=\"https://perldoc.perl.org/perlrun.html\" rel=\"nofollow noreferrer\"><code>perlrun</code></a>"}, {"owner": {"reputation": 38072, "user_id": 46395, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5ce828f20abb195ef5d971205ee36c27?s=128&d=identicon&r=PG", "display_name": "daxim", "link": "https://stackoverflow.com/users/46395/daxim"}, "edited": false, "score": 1, "creation_date": 1531808175, "post_id": 51370192, "comment_id": 89720163, "body": "It does not have to come after. Run <code>perl -E &#39;say &quot;@INC&quot;&#39; -I&#47;tmp</code>."}], "answers": [{"tags": [], "owner": {"reputation": 1445, "user_id": 1441592, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/2a58917def8d1523a840b52ae7d59d21?s=128&d=identicon&r=PG", "display_name": "Paul Serikov", "link": "https://stackoverflow.com/users/1441592/paul-serikov"}, "is_accepted": true, "score": 1, "last_activity_date": 1532760724, "creation_date": 1532760724, "answer_id": 51568871, "question_id": 51370192, "link": "https://stackoverflow.com/questions/51370192/perl-doesnt-print-inc-with-i-option-in-one-line-program/51568871#51568871", "title": "Perl doesn&#39;t print @INC with -I option in one line program", "body": "<p>I just mixed up the usage of parameters, code must be written after <code>-E</code> parameter:</p>\n\n<pre><code>perl -Ilib -E \"print \\\"@INC\\\"\"\n</code></pre>\n"}], "owner": {"reputation": 1445, "user_id": 1441592, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/2a58917def8d1523a840b52ae7d59d21?s=128&d=identicon&r=PG", "display_name": "Paul Serikov", "link": "https://stackoverflow.com/users/1441592/paul-serikov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 185, "favorite_count": 0, "accepted_answer_id": 51568871, "answer_count": 1, "score": 0, "last_activity_date": 1532760724, "creation_date": 1531775601, "question_id": 51370192, "link": "https://stackoverflow.com/questions/51370192/perl-doesnt-print-inc-with-i-option-in-one-line-program", "title": "Perl doesn&#39;t print @INC with -I option in one line program", "body": "<p>This one works:</p>\n\n<pre><code>pavel@x79:/data/projects/zone-service$ perl -E \"print \\\"@INC\\\";\"\n/etc/perl /usr/local/lib/x86_64-linux-gnu/perl/5.22.1 /usr/local/share/perl/5.22.1 /usr/lib/x86_64-linux-gnu/perl5/5.22 /usr/share/perl5 /usr/lib/x86_64-linux-gnu/perl/5.22 /usr/share/perl/5.22 /usr/local/lib/site_perl /usr/lib/x86_64-linux-gnu/perl-base .\n</code></pre>\n\n<p>And same command with <code>-I</code> option doesn't (show empty output):</p>\n\n<pre><code>pavel@x79:/data/projects/zone-service$ perl -E -Ilib \"print \\\"@INC\\\";\"\n</code></pre>\n\n<p>Why ?</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 2, "creation_date": 1531766244, "post_id": 51367470, "comment_id": 89708724, "body": "What do you mean by &quot;it doesn&#39;t upload files&quot;? Does the file exist locally? Do you get an error message back from Net::Google::Drive::Simple?"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1531777114, "post_id": 51367470, "comment_id": 89713072, "body": "You can&#39;t create a file name like <code>file_name_yyyy-mm-dd.txt</code> with the expression <code>&quot;testfile_${date}_${code}.txt&quot;</code>. Even if <code>$code</code> is empty, it will create <code>file_name_yyyy-mm-dd_.txt</code> with a trailing underscore."}, {"owner": {"reputation": 3913, "user_id": 8305127, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/E381l.png?s=128&g=1", "display_name": "Viet", "link": "https://stackoverflow.com/users/8305127/viet"}, "edited": false, "score": 0, "creation_date": 1531791559, "post_id": 51367470, "comment_id": 89716076, "body": "Thank you for the comments. I don&#39;t mean to create the files. Those files are already in the same folder with the pl file. I just need to use the pl file to upload all the text files with the name format name-date-code"}], "answers": [{"comments": [{"owner": {"reputation": 3913, "user_id": 8305127, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/E381l.png?s=128&g=1", "display_name": "Viet", "link": "https://stackoverflow.com/users/8305127/viet"}, "edited": false, "score": 0, "creation_date": 1531763892, "post_id": 51367554, "comment_id": 89707577, "body": "Thanks @Borodin. It does take the value of $date and uploads file like this: file_name_yyyy-mm-dd.txt but it doesn&#39;t upload files with names like this: file_name_yyyy-mm-dd_somecode.txt"}, {"owner": {"reputation": 3913, "user_id": 8305127, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/E381l.png?s=128&g=1", "display_name": "Viet", "link": "https://stackoverflow.com/users/8305127/viet"}, "edited": false, "score": 0, "creation_date": 1531763976, "post_id": 51367554, "comment_id": 89707617, "body": "What I&#39;m trying to do is: uploading files with different dates and different codes."}, {"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "reply_to_user": {"reputation": 3913, "user_id": 8305127, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/E381l.png?s=128&g=1", "display_name": "Viet", "link": "https://stackoverflow.com/users/8305127/viet"}, "edited": false, "score": 2, "creation_date": 1531764588, "post_id": 51367554, "comment_id": 89707953, "body": "@Viet Your comments are too ambiguous. You&#39;ll have to show some more code if you want anyone to be able to help you."}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": true, "score": 5, "last_activity_date": 1531763580, "creation_date": 1531763580, "answer_id": 51367554, "question_id": 51367470, "link": "https://stackoverflow.com/questions/51367470/perl-variable-that-takes-different-values/51367554#51367554", "title": "Perl variable that takes different values", "body": "<p>The problem is that, in</p>\n\n<pre><code>\"file_name_$date_$code.txt\"\n</code></pre>\n\n<p><code>$date_</code> is a valid variable name, but not the one you want. Delineate the identifiers with braces, like this</p>\n\n<pre><code>\"file_name_${date}_${code}.txt\"\n</code></pre>\n\n<p>Or you can use <code>sprintf</code>, like this</p>\n\n<pre><code>sprintf 'file_name_%s_%s.txt', $date, $code\n</code></pre>\n\n<p>which produces the same result</p>\n"}, {"tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 1, "last_activity_date": 1531815154, "creation_date": 1531815154, "answer_id": 51376349, "question_id": 51367470, "link": "https://stackoverflow.com/questions/51367470/perl-variable-that-takes-different-values/51376349#51376349", "title": "Perl variable that takes different values", "body": "<p>You still haven't been very clear in describing what you want, but I wonder if you're looking for <a href=\"https://perldoc.pl/functions/glob\" rel=\"nofollow noreferrer\"><code>glob()</code></a>.</p>\n\n<pre><code>for my $file (glob(\"file_name_${date}_*.txt\")) {\n  $gd-&gt;file_upload($file, $folder);\n}\n</code></pre>\n\n<p>You can adjust the string you pass to <code>glob()</code> so it gives you whatever files your really want.</p>\n"}], "owner": {"reputation": 3913, "user_id": 8305127, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/E381l.png?s=128&g=1", "display_name": "Viet", "link": "https://stackoverflow.com/users/8305127/viet"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 68, "favorite_count": 0, "accepted_answer_id": 51367554, "answer_count": 2, "score": 0, "last_activity_date": 1535549929, "creation_date": 1531763250, "last_edit_date": 1535549929, "question_id": 51367470, "link": "https://stackoverflow.com/questions/51367470/perl-variable-that-takes-different-values", "title": "Perl variable that takes different values", "body": "<p>I need to upload files with different names in the same format like this:\n<code>file_name_yyyy-mm-dd_code.txt</code></p>\n\n<p>How can I write it in Perl?</p>\n\n<p>Right now I can do this:</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse warnings;\nuse strict;\nuse Config::Simple;\nuse File::Basename;\nuse Getopt::Long;\nuse Pod::Usage;\nuse Net::Google::Drive::Simple;\nuse POSIX 'strftime';\nuse Storable;\n\n# my $date = strftime '%m-%d-%Y', localtime;\n# for testing purpose, use specific date\nmy $date = '2018-07-16'; \nmy $code;\n# $code will change\n\n\nmy $gd = Net::Google::Drive::Simple-&gt;new();\nmy ($p1, $folder) = $gd-&gt;children(\"Test\");\n$folder = &lt;folder id&gt;;\n\n$gd-&gt;file_upload(\"testfile_${date}_${code}.txt\", $folder);\n</code></pre>\n\n<p>and it uploads files with this format in the same folder as the <code>perl</code> file:\n<code>file_name_yyyy-mm-dd.txt</code></p>\n\n<p>but it doesn't upload files with this format (which I need to do): <code>file_name_yyyy-mm-dd_somecode.txt</code></p>\n\n<p>For example:\n<code>file_name_2018-07-16_code1.txt</code> or <code>file_name_2018-07-16_code2.txt</code></p>\n\n<p>I have absolutely no experience with Perl so I don't even know where to look. </p>\n"}, {"tags": ["json", "perl", "hash"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 3, "creation_date": 1531760817, "post_id": 51366750, "comment_id": 89706027, "body": "JSON.org: &quot;An object is an unordered set of name/value pairs.&quot; If you want to preserve order, use an array instead of an object. Then, just grep to keep all but the item you want to remove."}, {"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 0, "creation_date": 1531765490, "post_id": 51366750, "comment_id": 89708373, "body": "Every perl JSON parser I&#39;ve looked at represents JSON objects as hash tables, which, of course, don&#39;t preserve order. It&#39;s not something you can really rely on with JSON objects in general as already mentioned. Maybe use an array if order matters?"}, {"owner": {"reputation": 907, "user_id": 1677926, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec08c32808dffec5028fc8ffdafc22e4?s=128&d=identicon&r=PG", "display_name": "soger", "link": "https://stackoverflow.com/users/1677926/soger"}, "edited": false, "score": 0, "creation_date": 1531773816, "post_id": 51366750, "comment_id": 89711881, "body": "The problem is that the website is written in PHP which preserves the order so that is how the order of the charts are saved. I&#39;m not aware that there would be a plphp for postgres so I guess I could do a system() call from a plperl function but that would be a horribe solution."}, {"owner": {"reputation": 907, "user_id": 1677926, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec08c32808dffec5028fc8ffdafc22e4?s=128&d=identicon&r=PG", "display_name": "soger", "link": "https://stackoverflow.com/users/1677926/soger"}, "edited": false, "score": 1, "creation_date": 1531785071, "post_id": 51366750, "comment_id": 89714954, "body": "I looked into JSON::PP code and I&#39;d just need to add a tie to IxHash at the beginning of the function called object(). I can&#39;t believe no one ever needed that! Having to modify OS povided files introduces more problems than it solves so I&#39;ll just modify my json in PHP right after deletion and hope no one will delete more data anywhere else or calls my cleanup function. How wondeful. Or should I go with the plperl system() call from the trigger? I&#39;m between a rock and a hard place."}], "answers": [{"tags": [], "owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "is_accepted": false, "score": 0, "last_activity_date": 1531761858, "creation_date": 1531761858, "answer_id": 51367133, "question_id": 51366750, "link": "https://stackoverflow.com/questions/51366750/perl-decode-and-encode-json-preserving-order/51367133#51367133", "title": "perl decode and encode json preserving order", "body": "<p>JSON objects are unordered. You will have to encode the desired order into your data somehow</p>\n\n<pre><code>{\"Name\":[[1,1],[1,2],[2,1]],\"Name2\":[[3,2]], \"__order__\":[\"Name\",\"Name2\"]}\n\n[{\"Name\":[[1,1],[1,2],[2,1]]},{\"Name2\":[[3,2]]}]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2450, "user_id": 1186729, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec301bbe6bfd4c849a29d715f6094745?s=128&d=identicon&r=PG", "display_name": "Denis Ibaev", "link": "https://stackoverflow.com/users/1186729/denis-ibaev"}, "is_accepted": false, "score": 0, "last_activity_date": 1531775775, "creation_date": 1531775775, "answer_id": 51370227, "question_id": 51366750, "link": "https://stackoverflow.com/questions/51366750/perl-decode-and-encode-json-preserving-order/51370227#51370227", "title": "perl decode and encode json preserving order", "body": "<p>May be you want streaming decoder of JSON data like SAX parser. If so then see <a href=\"https://metacpan.org/pod/JSON::Streaming::Reader\" rel=\"nofollow noreferrer\"><code>JSON::Streaming::Reader</code></a>, or <a href=\"https://metacpan.org/pod/JSON::SL\" rel=\"nofollow noreferrer\"><code>JSON::SL</code></a>.</p>\n"}, {"comments": [{"owner": {"reputation": 907, "user_id": 1677926, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec08c32808dffec5028fc8ffdafc22e4?s=128&d=identicon&r=PG", "display_name": "soger", "link": "https://stackoverflow.com/users/1677926/soger"}, "edited": false, "score": 0, "creation_date": 1531840079, "post_id": 51380273, "comment_id": 89741463, "body": "I asked the developer of JSON::PP if he&#39;d add an option to tie to IxHash every hash created during the decode and the answer was &quot;Sorry, no.&quot; I wish I understood why this is such a taboo."}], "tags": [], "owner": {"reputation": 907, "user_id": 1677926, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec08c32808dffec5028fc8ffdafc22e4?s=128&d=identicon&r=PG", "display_name": "soger", "link": "https://stackoverflow.com/users/1677926/soger"}, "is_accepted": false, "score": 1, "last_activity_date": 1531826988, "creation_date": 1531826988, "answer_id": 51380273, "question_id": 51366750, "link": "https://stackoverflow.com/questions/51366750/perl-decode-and-encode-json-preserving-order/51380273#51380273", "title": "perl decode and encode json preserving order", "body": "<p>Well, I managed to solve my problem, but it's not a general solution so it will probably not help the casual reader. Anyway I got the order of keys using the help of the database, I called my function like this:</p>\n\n<pre><code>SELECT remove_from_chart(\n    chart_config,\n    array(select * from json_object_keys(chart_config::json)),\n    id);\n</code></pre>\n\n<p>then I walked through the keys in the order of the second parameter and put the results in a new tied (IxHash) hash and json encoded it.</p>\n\n<p>It's pretty sad that there is no perl json decoder that could preserve the key order when everything else I work with, at least on this project, does it (php, postgres, firefox, chrome).</p>\n"}, {"comments": [{"owner": {"reputation": 907, "user_id": 1677926, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec08c32808dffec5028fc8ffdafc22e4?s=128&d=identicon&r=PG", "display_name": "soger", "link": "https://stackoverflow.com/users/1677926/soger"}, "edited": false, "score": 0, "creation_date": 1531831722, "post_id": 51380696, "comment_id": 89735331, "body": "Thank you, I think I got the gist of what you are doing here, so I accepted your response because it&#39;s a lot more general than what I was doing before and I can reformat the data to what I want."}], "tags": [], "owner": {"reputation": 2177, "user_id": 3124587, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/adc0af022f8a3b35bcde0a4405e4c673?s=128&d=identicon&r=PG&f=1", "display_name": "Joshua", "link": "https://stackoverflow.com/users/3124587/joshua"}, "is_accepted": true, "score": 2, "last_activity_date": 1531828338, "creation_date": 1531828338, "answer_id": 51380696, "question_id": 51366750, "link": "https://stackoverflow.com/questions/51366750/perl-decode-and-encode-json-preserving-order/51380696#51380696", "title": "perl decode and encode json preserving order", "body": "<p>You need to use a streaming JSON decoder, such as <code>JSON::Streaming::Reader</code>. You could then store your JSON as an array of key/value pairs, instead of a hash.</p>\n\n<p>The actual implementation of how you might use do this is highly dependent on the structure of your data, but given the simple example provided... here's a simple implementation.</p>\n\n<pre><code>use strict;\nuse warnings;\nuse JSON::Streaming::Reader;\nuse JSON 'to_json';\n\nmy $s = '{\"Name\":[[1,1],[1,2],[2,1]],\"Name2\":[[3,2]]}';\n\nmy $jsonr = JSON::Streaming::Reader-&gt;for_string($s);\n\nmy @data;\nwhile (my $token = $jsonr-&gt;get_token) {\n    my ($key, $value) = @$token;\n    if ($key eq 'start_property') {\n        push @data, { $value =&gt; $jsonr-&gt;slurp };\n    }   \n}   \n\nprint to_json(\\@data);\n</code></pre>\n\n<p>The output for this script is always: -</p>\n\n<pre><code>[{\"Name\":[[1,1],[1,2],[2,1]]},{\"Name2\":[[3,2]]}]\n</code></pre>\n"}], "owner": {"reputation": 907, "user_id": 1677926, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec08c32808dffec5028fc8ffdafc22e4?s=128&d=identicon&r=PG", "display_name": "soger", "link": "https://stackoverflow.com/users/1677926/soger"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1328, "favorite_count": 0, "accepted_answer_id": 51380696, "answer_count": 4, "score": 0, "last_activity_date": 1531828338, "creation_date": 1531760304, "question_id": 51366750, "link": "https://stackoverflow.com/questions/51366750/perl-decode-and-encode-json-preserving-order", "title": "perl decode and encode json preserving order", "body": "<p>I have in a text database field a json encoded chart configuration in the form of:</p>\n\n<pre><code>{\"Name\":[[1,1],[1,2],[2,1]],\"Name2\":[[3,2]]}\n</code></pre>\n\n<p>The first number of these IDs is a primary key of another table. I'd like to remove those entries with a trigger when the row is deleted, a plperl function would be good except it does not preserve the order of the hash and the order is important in this project. What can I do (without changing the format of the json encoded config)? Note: the chart name can contain any characters so it's hard to do it with regex.</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 38072, "user_id": 46395, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5ce828f20abb195ef5d971205ee36c27?s=128&d=identicon&r=PG", "display_name": "daxim", "link": "https://stackoverflow.com/users/46395/daxim"}, "edited": false, "score": 2, "creation_date": 1531745879, "post_id": 51362286, "comment_id": 89696899, "body": "I&#39;m voting to close this question as off-topic because it belongs on <a href=\"https://codereview.stackexchange.com\">codereview.stackexchange.com</a>"}, {"owner": {"reputation": 3508, "user_id": 5069029, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Fdj5oVYaBD0/AAAAAAAAAAI/AAAAAAAAADY/EhiTrws4Qiw/photo.jpg?sz=128", "display_name": "301_Moved_Permanently", "link": "https://stackoverflow.com/users/5069029/301-moved-permanently"}, "reply_to_user": {"reputation": 38072, "user_id": 46395, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5ce828f20abb195ef5d971205ee36c27?s=128&d=identicon&r=PG", "display_name": "daxim", "link": "https://stackoverflow.com/users/46395/daxim"}, "edited": false, "score": 3, "creation_date": 1531746006, "post_id": 51362286, "comment_id": 89696988, "body": "@daxim I don&#39;t know Perl but the various <code>.........</code> in the code look like placeholders; which means the code is off-topic for Code Review."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 3, "creation_date": 1531746966, "post_id": 51362286, "comment_id": 89697602, "body": "It looks like you are reinventing the wheel. Is there a reason you are not using a web framework like Dancer2 or Mojolicious? It looks like you are already doing Plack, so if those are too big, maybe look at Web::Simple?"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 2, "creation_date": 1531759896, "post_id": 51362286, "comment_id": 89705528, "body": "<i>&quot;solves the given problem with the least amount of necessary code (less code to debug - obvious speedup)&quot;</i> No, it gives you <i>more</i> code to debug, because you are rewriting a templating system at the same as your web app. That means an &quot;obvious&quot; big increase in development time and an increase in the roll-out bug count."}], "answers": [{"comments": [{"owner": {"reputation": 121105, "user_id": 2766176, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/edd8638efe875601bfe394a8aea5b16d?s=128&d=identicon&r=PG", "display_name": "brian d foy", "link": "https://stackoverflow.com/users/2766176/brian-d-foy"}, "edited": false, "score": 1, "creation_date": 1531754543, "post_id": 51363713, "comment_id": 89702680, "body": "Ancient Perl programming also consisted of plumbing together the right things :)"}], "tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 3, "last_activity_date": 1531749849, "creation_date": 1531749849, "answer_id": 51363713, "question_id": 51362286, "link": "https://stackoverflow.com/questions/51362286/perl-package-module-alternative-to-template-system/51363713#51363713", "title": "perl - package module alternative to template system", "body": "<blockquote>\n  <p>Is this good way to build maintainable code?</p>\n</blockquote>\n\n<p>No.</p>\n\n<p>At the heart of your system you have HTML (and, perhaps, CSS and Javascript) embedded in your Perl code. This might look like a good idea when it's just you maintaining the site, but when you get successful enough to need a separate front-end development team, you'll realise what a terrible idea it is.</p>\n\n<p>Also, you are reinventing wheels. There are many great web frameworks and templating systems available on CPAN. Most of them have been used in production by lots of people over many years. They will have more features than your code and will be far better tested.</p>\n\n<p>You say you're doing this because you don't want to install more modules. I urge you to reconsider this approach. Most modern Perl programming consists of plumbing together the right CPAN modules. You will be needlessly restricting the power of the language.</p>\n"}, {"comments": [{"owner": {"reputation": 366, "user_id": 8569128, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f2cde21e40e767064c4e4e0b61f1b8f8?s=128&d=identicon&r=PG&f=1", "display_name": "Imylor", "link": "https://stackoverflow.com/users/8569128/imylor"}, "edited": false, "score": 1, "creation_date": 1531757747, "post_id": 51364404, "comment_id": 89704513, "body": "Thanks to all the comments.  brian d foy, relation to template system i think to used:  Template::Alloy"}], "tags": [], "owner": {"reputation": 121105, "user_id": 2766176, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/edd8638efe875601bfe394a8aea5b16d?s=128&d=identicon&r=PG", "display_name": "brian d foy", "link": "https://stackoverflow.com/users/2766176/brian-d-foy"}, "is_accepted": true, "score": 5, "last_activity_date": 1531754700, "last_edit_date": 1531754700, "creation_date": 1531752161, "answer_id": 51364404, "question_id": 51362286, "link": "https://stackoverflow.com/questions/51362286/perl-package-module-alternative-to-template-system/51364404#51364404", "title": "perl - package module alternative to template system", "body": "<p>You say that your constraint is not installing modules. But, what's the on-the-ground difference between installing prewritten modules and creating new ones?</p>\n\n<p>Maybe you have issues with deployment. That's understandable. However, you can use things such as <a href=\"https://metacpan.org/pod/Carton\" rel=\"nofollow noreferrer\">Carton</a> to create applications. Set up everything on a system where you have the flexibility you need to deploy to a system where you don't.</p>\n\n<p>With many CPAN modules you can take the libraries directly from the distribution and reuse them. If they don't use XS or need external libraries (say, like, openssl), they are able to run out of the box.\nI don't particularly advise this, but it's doable. You get widely tested modules and the community support that comes with it. That's less code to debug because someone else already did the work! These things are complicated systems and you are going to have to do quite a bit of work to not only debug what you've done but discover everything else that you should have done and supported. Having reinvented a few things myself, I've learned my lesson.</p>\n\n<p>Everyone eventually writes their own templating system (and everyone should as part of their life experience). That's fine. However, you should study what other systems do and how they do it so you don't repeat their mistakes. Some templating modules are small and simple and can be the basis for your explorations. Check out <a href=\"https://metacpan.org/pod/Text::Template\" rel=\"nofollow noreferrer\">Text::Template</a> for example: it's two module files and no dependencies. Going through this exercise shows you the hidden depths and complexities of what you are trying to do.</p>\n\n<p>If you are making a web framework, have you looked at <a href=\"https://metacpan.org/pod/Mojolicious\" rel=\"nofollow noreferrer\">Mojolicious</a>? It is a self-contained system that only requires core Perl modules (although you'll likely still need other things like a database connection and so on). It has a nice templating system. For something lighter weight (but how much lighter can you get), your approach looks like <a href=\"https://metacpan.org/pod/CGI::Prototype\" rel=\"nofollow noreferrer\">CGI::Prototype</a>. Take a look at that.</p>\n\n<p>Lastly, avoiding modules because you're anxious about installing anything might be something you just need to confront and get it over with. Almost any system is a bit scary at first and gets better after you get used it and learns how it works. You might not like CPAN (but what does \"like\" have to do with getting work done?), but perhaps you can get what you need from system packages already. In the end you want to get more work done. A little work at the front can save you a lot of work at the end. </p>\n\n<p>We're here to help when you run into problems installing modules! :)</p>\n"}], "owner": {"reputation": 366, "user_id": 8569128, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f2cde21e40e767064c4e4e0b61f1b8f8?s=128&d=identicon&r=PG&f=1", "display_name": "Imylor", "link": "https://stackoverflow.com/users/8569128/imylor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 105, "favorite_count": 0, "accepted_answer_id": 51364404, "answer_count": 2, "score": -1, "last_activity_date": 1531754700, "creation_date": 1531745463, "question_id": 51362286, "link": "https://stackoverflow.com/questions/51362286/perl-package-module-alternative-to-template-system", "title": "perl - package module alternative to template system", "body": "<p>I building a web service, instead of using template system like toolkit I using package module like this:</p>\n\n<p>Create pages urls, each page in independent module according to url previous create in the route,\npass as argument to every module a unique hash ref with variables for global title, footer, and all others data where is the same in each page (module).</p>\n\n<p>main.pl</p>\n\n<pre><code>use strict;\nuse warnings;\n\nuse Handler;    \n\nmy %mvs = (# my variables\n     username         =&gt; $set{user},\n     titleglobal      =&gt; '|  web System ',\n     ip               =&gt; $env-&gt;{REMOTE_ADDR}\n     .........\n     ......... \n   );\n\n\nfor my $module_url (reverse @all_urls_names ) {\n  $router-&gt;add($module_url, sub {\n     $module_url-&gt;new(\\%mvs);\n   })      \n} \n</code></pre>\n\n<p>In the module page, I have anothers modules who load header.pm, footer.pm but the body.pm is loaded directly in the current module page, in this case Handler.pm</p>\n\n<p>Handler.pm</p>\n\n<pre><code>package Handler;\n\nuse strict;\nuse warnings;\n\nuse Layout::Head;\nuse Layout::Footer;\n\n\nmy $layout = sub {\n\nmy ($head, $body, $footer) = ( Head::new($mvs), thebody($mvs), Footer::new($mvs) );\n\nreturn &lt;&lt;THE_HTML;\n\n$head\n\n$body\n\n$footer\n\nTHE_HTML\n};\n\n return [ 200, [ \"Content-Type\" =&gt; \"text/html\" ], [ $layout-&gt;() ] ];\n\n}\n\n\nsub thebody{\n\n.........\n.........\n\n}\n</code></pre>\n\n<p>I have done this approach having as reference the wordpress layout, all is working fine and good. </p>\n\n<p><strong>\u00bfis this good way to building maintainable code ?</strong></p>\n\n<p><strong>Note:</strong> I chose this way because I not want to install more modules. \n(solves the given problem with the least amount of necessary code (less code to debug - obvious speedup)</p>\n"}, {"tags": ["linux", "perl", "awk", "sed"], "answers": [{"tags": [], "owner": {"reputation": 11096, "user_id": 2749717, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46af1ef54856d737d52b7667afd240ee?s=128&d=identicon&r=PG&f=1", "display_name": "bipll", "link": "https://stackoverflow.com/users/2749717/bipll"}, "is_accepted": false, "score": 0, "last_activity_date": 1531736184, "last_edit_date": 1531736184, "creation_date": 1531735699, "answer_id": 51359345, "question_id": 51359229, "link": "https://stackoverflow.com/questions/51359229/i-want-to-remove-multiple-line-of-text-on-linux/51359345#51359345", "title": "I want to remove multiple line of text on linux", "body": "<p>If there's exactly one blank line after each paragraph you can use a long <code>awk</code> oneliner (three patterns, so probably not a oneliner actually):</p>\n\n<pre><code>$ echo '1\n19:22\nabcde\n\n2\n19:23\n\n3\n19:24\nabbff\n\n4\n19:25\nabbc\n' |  awk '/[^[:space:]]/ { accum = accum $0 \"\\n\" } /^[[:space:]]*$/ { if(on) print accum $0; on = 0; accum = \"\" } /[[:alpha:]]/ { on =  1 }'\n1\n19:22\nabcde\n\n3\n19:24\nabbff\n\n4\n19:25\nabbc\n</code></pre>\n\n<p>The idea is to accumulate non-blank lines, setting flag once an alphabetical character found, and on a blank input line, flush the whole accumulated paragraph if that flag is set, reset accum to empty string and reset flag to zero.</p>\n\n<p>(Note that if the last line of input is not necessarily empty you might need to add an <code>END</code> block that checks if currently there's a paragraph unflushed and flush it as needed.)</p>\n"}, {"tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 4, "last_activity_date": 1531738788, "last_edit_date": 1531738788, "creation_date": 1531738395, "answer_id": 51360135, "question_id": 51359229, "link": "https://stackoverflow.com/questions/51359229/i-want-to-remove-multiple-line-of-text-on-linux/51360135#51360135", "title": "I want to remove multiple line of text on linux", "body": "<p>Simple enough in Perl. The secret is to put Perl in \"paragraph mode\" by setting the input record separator (<code>$/</code>) to an empty string. Then we only print records if they contain a letter.</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\n\n# Paragraph mode\nlocal $/ = '';\n\n# Read from STDIN a record (i.e. paragraph) at a time\nwhile (&lt;&gt;) {\n  # Only print records that include a letter\n  print if /[a-z]/i;\n}\n</code></pre>\n\n<p>This is written as a Unix filter, i.e. it reads from <code>STDIN</code> and writes to <code>STDOUT</code>. So if it's in a file called <code>filter</code>, you can call it like this:</p>\n\n<pre><code>$ filter &lt; your_input_file &gt; your_output_file\n</code></pre>\n\n<p>Alternatively this is a simple command line script in Perl (<code>-00</code> is the command line option to put Perl into paragraph mode):</p>\n\n<pre><code>$ perl -00 -ne'print if /[a-z]/' &lt; your_input_file &gt; your_output_file\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "is_accepted": true, "score": 4, "last_activity_date": 1531751548, "last_edit_date": 1531751548, "creation_date": 1531746396, "answer_id": 51362559, "question_id": 51359229, "link": "https://stackoverflow.com/questions/51359229/i-want-to-remove-multiple-line-of-text-on-linux/51362559#51362559", "title": "I want to remove multiple line of text on linux", "body": "<p>sed is for doing s/old/new/ on individual lines, <strong>that is all</strong>. For anything else you should be using awk:</p>\n\n<pre><code>$ awk -v RS= -v ORS='\\n\\n' '/[[:alpha:]]/' file\n1\n19:22\nabcde\n\n3\n19:24\nabbff\n\n4\n19:25\nabbc\n</code></pre>\n\n<p>The above is simply this:</p>\n\n<ul>\n<li><code>RS=</code> tells awk the input records are separated by blank lines.</li>\n<li><code>ORS='\\n\\n'</code> tells awk the output records must also be separated by blank lines.</li>\n<li><code>/[[:alpha:]]/</code> searches for and prints records that contain alphabetic characters.</li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 46858, "user_id": 967492, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/526ea226101e199d029049dda22a4e58?s=128&d=identicon&r=PG", "display_name": "potong", "link": "https://stackoverflow.com/users/967492/potong"}, "is_accepted": false, "score": 0, "last_activity_date": 1531750929, "creation_date": 1531750929, "answer_id": 51364020, "question_id": 51359229, "link": "https://stackoverflow.com/questions/51359229/i-want-to-remove-multiple-line-of-text-on-linux/51364020#51364020", "title": "I want to remove multiple line of text on linux", "body": "<p>This might work for you (GNU sed):</p>\n\n<pre><code>sed ':a;$!{N;/^$/M!ba};/[[:alpha:]]/!d' file\n</code></pre>\n\n<p>Gather up lines delimited by an empty line or end-of-file and delete the latest collection if it does not contain an alpha character.</p>\n\n<p>This presupposes that the file format is fixed as in the example. To be more accurate use:</p>\n\n<pre><code>sed -r ':a;$!{N;/^$/M!ba};/^[1-9][0-9]*\\n[0-9]{2}:[0-9]{2}\\n[[:alpha:]]+\\n?$/!d' file\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 20517, "user_id": 8344060, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1UbPk.png?s=128&g=1", "display_name": "kvantour", "link": "https://stackoverflow.com/users/8344060/kvantour"}, "is_accepted": false, "score": 0, "last_activity_date": 1531835977, "creation_date": 1531835977, "answer_id": 51383358, "question_id": 51359229, "link": "https://stackoverflow.com/questions/51359229/i-want-to-remove-multiple-line-of-text-on-linux/51383358#51383358", "title": "I want to remove multiple line of text on linux", "body": "<p>Similar to the solution of <a href=\"https://stackoverflow.com/a/51362559/8344060\">Ed Morton</a> but with the following assumptions: </p>\n\n<ul>\n<li>The text blocks consist of 2 or 3 lines.</li>\n<li>If there is a third line, it contains characters from any alphabet.</li>\n</ul>\n\n<p>In essence, under these conditions we only need to check for a third field:</p>\n\n<pre><code>awk 'BEGIN{RS=;ORS=\"\\n\\n\";FS=\"\\n\"}(NF&lt;3)' file\n</code></pre>\n\n<p>or similar without <code>BEGIN</code>:</p>\n\n<pre><code>awk -v RS= -v ORS='\\n\\n' -F '\\n' '(NF&lt;3)' file\n</code></pre>\n"}], "owner": {"reputation": 19, "user_id": 10087520, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Um_GBt2Raw8/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7qv_0ID1hve-3EFm4lNUioXOsJ-VQ/mo/photo.jpg?sz=128", "display_name": "\uc804\uc138\uc601", "link": "https://stackoverflow.com/users/10087520/%ec%a0%84%ec%84%b8%ec%98%81"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 756, "favorite_count": 0, "accepted_answer_id": 51362559, "answer_count": 5, "score": 0, "last_activity_date": 1531835977, "creation_date": 1531735308, "last_edit_date": 1531746495, "question_id": 51359229, "link": "https://stackoverflow.com/questions/51359229/i-want-to-remove-multiple-line-of-text-on-linux", "title": "I want to remove multiple line of text on linux", "body": "<p>Just like this.\n<br>Before:\n<br></p>\n\n<pre><code>1\n19:22\nabcde\n\n2\n19:23\n\n3\n19:24\nabbff\n\n4\n19:25\nabbc\n</code></pre>\n\n<p>After:</p>\n\n<pre><code>1\n19:22\nabcde\n\n3\n19:24\nabbff\n\n4\n19:25\nabbc\n</code></pre>\n\n<p>I want remove the section having no alphabet like section 2.<br>\nI think that I should use perl or sed. But I don't know how to do.\nI tried like this. But it didn't work.<br></p>\n\n<pre><code>sed 's/[0-9]\\n[0-9]\\n%s\\n//'\n</code></pre>\n"}, {"tags": ["regex", "perl", "email-attachments"], "answers": [{"tags": [], "owner": {"reputation": 285, "user_id": 2319672, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ff1340a932140322d41db199c6cf1a4?s=128&d=identicon&r=PG", "display_name": "Dev123", "link": "https://stackoverflow.com/users/2319672/dev123"}, "is_accepted": true, "score": 0, "last_activity_date": 1532334657, "creation_date": 1532334657, "answer_id": 51474570, "question_id": 51358973, "link": "https://stackoverflow.com/questions/51358973/download-email-attachment/51474570#51474570", "title": "Download email attachment", "body": "<p>Finally I was able to download the email attachment. I just needed to create a new file with the same extension as the attached file in the email and write the content to it by decoding the attachment content. </p>\n"}], "owner": {"reputation": 285, "user_id": 2319672, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ff1340a932140322d41db199c6cf1a4?s=128&d=identicon&r=PG", "display_name": "Dev123", "link": "https://stackoverflow.com/users/2319672/dev123"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 94, "favorite_count": 0, "accepted_answer_id": 51474570, "answer_count": 1, "score": 0, "last_activity_date": 1532334657, "creation_date": 1531734479, "last_edit_date": 1531749889, "question_id": 51358973, "link": "https://stackoverflow.com/questions/51358973/download-email-attachment", "title": "Download email attachment", "body": "<p>I am reading email from an IMAP server using the\n<a href=\"https://metacpan.org/pod/Mail::IMAPClient\" rel=\"nofollow noreferrer\"><code>Mail::IMAPClient</code></a>\nmodule over SSL.\nI am able to extract the body of the email but not the attachment. </p>\n\n<p>Please suggest how can I download the email attachment? I want to avoid downloading  attachment inside the attachments. i.e. multilevel attachments.</p>\n\n<p>Here is how I am fetching the email body</p>\n\n<pre><code>my $struct = $client-&gt;get_bodystructure( $msg_id );\n\nif ( $struct-&gt;bodytype ne \"MULTIPART\" ) {\n    print \"\\n BodyEnc:\" . $struct-&gt;bodyenc();\n}\n\nmy $rDecode = decode( $struct, $client, $msg_id );\n\nif ( $rDecode ne \"\" &amp;&amp; ( length( $rDecode ) &gt; 2 ) ) {\n    print( $rDecode . \"\\n\" );\n}\n\nforeach my $dumpme ( $struct-&gt;bodystructure() ) {\n\n    if ( $dumpme-&gt;bodytype() eq \"MULTIPART\" ) {\n        next;\n    }\n\n    $rDecode = \"\";\n\n    $rDecode = decode( $dumpme, $client, $msg_id );\n\n    if ( ( $rDecode ne \"\" ) &amp;&amp; ( length( $rDecode ) &gt; 2 ) ) {\n        print( $rDecode . \"\\n\" );\n    }\n}\n\nsub decode {\n\n    my ( $process, $imap, $msg_id ) = @_;\n\n    if ( $process-&gt;bodytype eq \"TEXT\" ) {\n\n        if ( $process-&gt;bodyenc eq \"base64\" ) {\n\n            return decode_base64( $imap-&gt;bodypart_string( $msg_id, $process-&gt;id ) );\n        }\n        elsif ( index( \" -7bit- -8bit- -quoted-printable- \", lc( $process-&gt;bodyenc ) ) != -1 ) {\n\n            return $imap-&gt;bodypart_string( $msg_id, $process-&gt;id );\n        }\n    }\n</code></pre>\n"}, {"tags": ["bash", "perl"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 7, "creation_date": 1531707056, "post_id": 51353675, "comment_id": 89680083, "body": "There&#39;s not much point in writing a Perl program that just shells out to execute bash commands. Why no write a shell script instead? It doesn&#39;t work as it is because <code>system</code> will accept only one shell command."}, {"owner": {"reputation": 35, "user_id": 9639111, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qjWc4.png?s=128&g=1", "display_name": "mr-wacker", "link": "https://stackoverflow.com/users/9639111/mr-wacker"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1531707257, "post_id": 51353675, "comment_id": 89680115, "body": "This is just a part that is integrated with perl codes. Do you think I should write them separately? Perl and Bash"}, {"owner": {"reputation": 35, "user_id": 9639111, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qjWc4.png?s=128&g=1", "display_name": "mr-wacker", "link": "https://stackoverflow.com/users/9639111/mr-wacker"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1531707718, "post_id": 51353675, "comment_id": 89680194, "body": "@Borodin I rewrote the code in a bash file but the result is exactly the same one. I don&#39;t understand what makes it returns &quot;No such file or directory&quot; even though it exists."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 2, "creation_date": 1531708014, "post_id": 51353675, "comment_id": 89680255, "body": "<i>&quot;Do you think I should write them separately?&quot;</i>  No, I think you should write it all in Perl."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1531717776, "post_id": 51353675, "comment_id": 89682199, "body": "It should also complain about being unable to find <code>warning.pm</code> in <code>@INC</code>."}, {"owner": {"reputation": 68617, "user_id": 3776858, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/juunm.png?s=128&g=1", "display_name": "Cyrus", "link": "https://stackoverflow.com/users/3776858/cyrus"}, "edited": false, "score": 0, "creation_date": 1531719430, "post_id": 51353675, "comment_id": 89682643, "body": "Do you get <code>mv: cannot stat &quot;&#39;&#47;root&#47;dump&#39;&quot;: No such file or directory</code> or <code>mv: cannot stat &#39;&quot;&#47;root&#47;dump&quot;&#39;: No such file or directory</code>? Watch the quotes."}, {"owner": {"reputation": 3432, "user_id": 604642, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/48daad611ba387f8473b0c1e5792aa3f?s=128&d=identicon&r=PG", "display_name": "shawnhcorey", "link": "https://stackoverflow.com/users/604642/shawnhcorey"}, "edited": false, "score": 0, "creation_date": 1531743399, "post_id": 51353675, "comment_id": 89695339, "body": "Do not turn on warnings in the shebang line. Some modules do dangerous stuff and turn off warnings, <code>no warnings;</code> But if warnings are turned on in the shebang, then they cannot be turned off; warnings about hings the module must do will be shown."}], "answers": [{"comments": [{"owner": {"reputation": 35, "user_id": 9639111, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qjWc4.png?s=128&g=1", "display_name": "mr-wacker", "link": "https://stackoverflow.com/users/9639111/mr-wacker"}, "edited": false, "score": 0, "creation_date": 1531709807, "post_id": 51353979, "comment_id": 89680547, "body": "echo &quot;Copy the application here and paste it here&quot;  read apple  mv -f $apple /opt                                                                                      is this correct form?"}, {"owner": {"reputation": 48006, "user_id": 96588, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/425fed56a46504d37ec907d99b09ecde?s=128&d=identicon&r=PG", "display_name": "l0b0", "link": "https://stackoverflow.com/users/96588/l0b0"}, "reply_to_user": {"reputation": 35, "user_id": 9639111, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qjWc4.png?s=128&g=1", "display_name": "mr-wacker", "link": "https://stackoverflow.com/users/9639111/mr-wacker"}, "edited": false, "score": 2, "creation_date": 1531709919, "post_id": 51353979, "comment_id": 89680566, "body": "@Seho Sorry, but what am I supposed to do with that comment? Certainly as a single line that won&#39;t do what you expect. Please update your question if you&#39;ve tried something else."}], "tags": [], "owner": {"reputation": 48006, "user_id": 96588, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/425fed56a46504d37ec907d99b09ecde?s=128&d=identicon&r=PG", "display_name": "l0b0", "link": "https://stackoverflow.com/users/96588/l0b0"}, "is_accepted": false, "score": 4, "last_activity_date": 1531709510, "creation_date": 1531709510, "answer_id": 51353979, "question_id": 51353675, "link": "https://stackoverflow.com/questions/51353675/bash-script-mv-f-embedded-in-perl-file/51353979#51353979", "title": "Bash script &#39;mv -f&#39; embedded in Perl file", "body": "<p>If it literally says <code>\"'/root/dump'\"</code> that means you have added some literal <a href=\"https://mywiki.wooledge.org/Quotes\" rel=\"nofollow noreferrer\">quotes</a> in addition to the syntactic ones. Make sure to quote <code>$apple</code> in your Bash script and <em>not</em> quote the stuff you give to <code>read</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "is_accepted": false, "score": 3, "last_activity_date": 1531715931, "creation_date": 1531715931, "answer_id": 51354672, "question_id": 51353675, "link": "https://stackoverflow.com/questions/51353675/bash-script-mv-f-embedded-in-perl-file/51354672#51354672", "title": "Bash script &#39;mv -f&#39; embedded in Perl file", "body": "<p>If you want to use <em>just perl</em>, instead of <code>system()</code>ing out to a shell, use  <code>dirmove()</code> from <a href=\"https://metacpan.org/pod/File::Copy::Recursive\" rel=\"nofollow noreferrer\">File::Copy::Recursive</a> to move the directory tree.</p>\n"}, {"comments": [{"owner": {"reputation": 79, "user_id": 7637846, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/65cedf5b34239b72e08f1e6733e1dabf?s=128&d=identicon&r=PG&f=1", "display_name": "TheAdam122", "link": "https://stackoverflow.com/users/7637846/theadam122"}, "edited": false, "score": 0, "creation_date": 1531829303, "post_id": 51364970, "comment_id": 89733605, "body": "@Seho if the answer did not help you could you clarify your question? What do you want to achieve?"}], "tags": [], "owner": {"reputation": 79, "user_id": 7637846, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/65cedf5b34239b72e08f1e6733e1dabf?s=128&d=identicon&r=PG&f=1", "display_name": "TheAdam122", "link": "https://stackoverflow.com/users/7637846/theadam122"}, "is_accepted": false, "score": -1, "last_activity_date": 1531753822, "creation_date": 1531753822, "answer_id": 51364970, "question_id": 51353675, "link": "https://stackoverflow.com/questions/51353675/bash-script-mv-f-embedded-in-perl-file/51364970#51364970", "title": "Bash script &#39;mv -f&#39; embedded in Perl file", "body": "<p>If I understand your question, you just want to move a directory recoursively to <code>/opt</code>. This script does just that.</p>\n\n<pre><code>#!/usr/bin/perl -w\n\nuse strict;\n\nprint \"Copy the application directory here and paste it here: \";\nchomp (my $apple = &lt;STDIN&gt;);\n`mv -f $apple /opt`;\n</code></pre>\n\n<blockquote>\n  <p>using perl. Just perl.</p>\n</blockquote>\n\n<p>I don't understand that. You are using system commands in your code provided above. If you want to use just perl use <code>dirmove() from File::Copy::Recursive</code> as Shawn mentioned already. Hope this helps.</p>\n"}], "owner": {"reputation": 35, "user_id": 9639111, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qjWc4.png?s=128&g=1", "display_name": "mr-wacker", "link": "https://stackoverflow.com/users/9639111/mr-wacker"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 124, "favorite_count": 0, "answer_count": 3, "score": -2, "last_activity_date": 1531753822, "creation_date": 1531706333, "last_edit_date": 1531710366, "question_id": 51353675, "link": "https://stackoverflow.com/questions/51353675/bash-script-mv-f-embedded-in-perl-file", "title": "Bash script &#39;mv -f&#39; embedded in Perl file", "body": "<p>Attempting to move directory which contains sub-directory to the /opt using perl. Just perl.</p>\n\n<pre><code>#!/usr/bin/perl -w\n\nuse strict;\nuse warning\n\nsystem(\n\n'echo \"Copy the application directory here and paste it here\"\n\nread apple\n\nmv -f $apple /opt\n\n');\n</code></pre>\n\n<p>This returns</p>\n\n<pre><code>mv: cannot stat \"'/root/dump'\": No such file or directory\n</code></pre>\n\n<p>My input for <code>read apple</code> is <code>/root/dump</code> which is a directory. When I did it directly from terminal it worked but then by perl file it doesn't. Could you be descriptive as possible, as I'm not that familiar with bash script please? Thank you in Advance.</p>\n\n<p>Update: </p>\n\n<p>I tried the bash file I wrote</p>\n\n<pre><code>#!/bin/bash\n\necho \"Copy the application directory here and paste it here\"\n\nread apple\n\nmv -f $apple /opt\n</code></pre>\n\n<p>This also returns the same result as perl.</p>\n"}, {"tags": ["perl", "ssh", "expect"], "comments": [{"owner": {"reputation": 3201, "user_id": 2685938, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/663b724c87371073eeeaef472a9b65d1?s=128&d=identicon&r=PG&f=1", "display_name": "david", "link": "https://stackoverflow.com/users/2685938/david"}, "edited": false, "score": 0, "creation_date": 1531711204, "post_id": 51352770, "comment_id": 89680792, "body": "Removing excessive spaces"}, {"owner": {"reputation": 137100, "user_id": 874188, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/ZcY77.png?s=128&g=1", "display_name": "tripleee", "link": "https://stackoverflow.com/users/874188/tripleee"}, "edited": false, "score": 0, "creation_date": 1531755562, "post_id": 51352770, "comment_id": 89703311, "body": "The error message means <code>$login_output</code> is undefined. The fact that you failed to login explains why."}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 10085440, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-NJs_PIjHfnM/AAAAAAAAAAI/AAAAAAAAAII/AJYgc4ava48/photo.jpg?sz=128", "display_name": "Shanil Dutt", "link": "https://stackoverflow.com/users/10085440/shanil-dutt"}, "edited": false, "score": 0, "creation_date": 1531772905, "post_id": 51365560, "comment_id": 89711503, "body": "Thanks.    Error: SSHProcessError The ssh process was terminated.    My credentials work, not sure why login fails.  Reading more on NET::SSH::Expect"}, {"owner": {"reputation": 121105, "user_id": 2766176, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/edd8638efe875601bfe394a8aea5b16d?s=128&d=identicon&r=PG", "display_name": "brian d foy", "link": "https://stackoverflow.com/users/2766176/brian-d-foy"}, "reply_to_user": {"reputation": 11, "user_id": 10085440, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-NJs_PIjHfnM/AAAAAAAAAAI/AAAAAAAAAII/AJYgc4ava48/photo.jpg?sz=128", "display_name": "Shanil Dutt", "link": "https://stackoverflow.com/users/10085440/shanil-dutt"}, "edited": false, "score": 0, "creation_date": 1531775260, "post_id": 51365560, "comment_id": 89712498, "body": "According to the docs that&#39;s a failure before you even had a chance to get to the network. You weren&#39;t able to create the ssh process. Since you mess with PATH at the top of the program I&#39;d start by investigating that. I suspect that it can&#39;t find the ssh binary."}, {"owner": {"reputation": 11, "user_id": 10085440, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-NJs_PIjHfnM/AAAAAAAAAAI/AAAAAAAAAII/AJYgc4ava48/photo.jpg?sz=128", "display_name": "Shanil Dutt", "link": "https://stackoverflow.com/users/10085440/shanil-dutt"}, "edited": false, "score": 0, "creation_date": 1531776487, "post_id": 51365560, "comment_id": 89712877, "body": "Issue fixed. The issue all this time was due to RSA keys. Removed old record from known_hosts file and established ssh connection again. Works fine :) Thanks for the help"}], "tags": [], "owner": {"reputation": 121105, "user_id": 2766176, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/edd8638efe875601bfe394a8aea5b16d?s=128&d=identicon&r=PG", "display_name": "brian d foy", "link": "https://stackoverflow.com/users/2766176/brian-d-foy"}, "is_accepted": false, "score": 1, "last_activity_date": 1531755674, "creation_date": 1531755674, "answer_id": 51365560, "question_id": 51352770, "link": "https://stackoverflow.com/questions/51352770/why-cant-netsshexpect-log-in/51365560#51365560", "title": "Why can&#39;t Net::SSH::Expect log in?", "body": "<p>You have this bit of code that produces your error message:</p>\n\n<pre><code>eval { $login_output = $ssh-&gt;login(); };\n\nif( $@ )\n{\n    $msg = \"Login has failed. Output: $login_output\";\n    return( 252, $msg );\n}\n</code></pre>\n\n<p>The <code>$@</code> is the error from the <code>eval</code>. If something went wrong with <code>$ssh-&gt;login</code> then <code>$login_output</code> would be empty. </p>\n\n<p>Try this instead so you see what's in <code>$@</code>. That probably has the clue you need to continue:</p>\n\n<pre><code>eval { $login_output = $ssh-&gt;login(); };\n\nif( $@ )\n{\n    $msg = \"Login has failed.\\nError: $@\\nOutput: $login_output\";\n    return( 252, $msg );\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 166, "user_id": 3399702, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/n2ObF.jpg?s=128&g=1", "display_name": "Seth", "link": "https://stackoverflow.com/users/3399702/seth"}, "is_accepted": false, "score": 1, "last_activity_date": 1531924105, "creation_date": 1531924105, "answer_id": 51404615, "question_id": 51352770, "link": "https://stackoverflow.com/questions/51352770/why-cant-netsshexpect-log-in/51404615#51404615", "title": "Why can&#39;t Net::SSH::Expect log in?", "body": "<p>Maybe you need to add this into your ~/.ssh/config</p>\n\n<pre><code>Host your_server\n    user your_login\n    port 22\n    UserKnownHostsFile /dev/null\n    StrictHostKeyChecking no\n</code></pre>\n\n<p>Or the command : <code>ssh-keygen -R server_ip_address</code></p>\n\n<p>In order to avoid that the RSA host key has just been changed</p>\n\n<p>Of course be aware from the man in the middle attack.</p>\n"}], "owner": {"reputation": 11, "user_id": 10085440, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-NJs_PIjHfnM/AAAAAAAAAAI/AAAAAAAAAII/AJYgc4ava48/photo.jpg?sz=128", "display_name": "Shanil Dutt", "link": "https://stackoverflow.com/users/10085440/shanil-dutt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 382, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1531924105, "creation_date": 1531694914, "last_edit_date": 1531775361, "question_id": 51352770, "link": "https://stackoverflow.com/questions/51352770/why-cant-netsshexpect-log-in", "title": "Why can&#39;t Net::SSH::Expect log in?", "body": "<pre><code>#!/opt/SPECTRUM/bin/perl -w\n\n# This script will capture the running configuration of a\n# Cisco SAN-OS device through an SSH session and print it to STDOUT.\n#\n# Error Codes:\n#   0   = Success\n#   255 = Usage error\n#   254 = Invalid timeout value\n#   252 = Login error\n#   249 = Exec prompt not found error\n#   244 = Error retrieving configuration\n#   245 = Insufficient privileges\n#   253 = Unexpected output\n#\n\nuse strict;\nuse warnings;\nuse Net::SSH::Expect;\n\n$ENV{'PATH'} = \"/usr/bin:\". $ENV{'PATH'};\n\n### Main ###\nif( $#ARGV != 4 &amp;&amp; $#ARGV != 5 )\n{\n    print \"Usage: capture_running.pl &lt;device IP&gt; &lt;user&gt; &lt;pass&gt; &lt;enable_pass&gt;\n      &lt;login_timeout_in_seconds&gt; &lt;capture_timeout_in_seconds&gt;\\n\";\n    print STDERR \"Usage:  capture_running.pl &lt;deviceIP&gt; &lt;user&gt; &lt;pass&gt;\n      &lt;enable_pass&gt; &lt;login_timeout_in_seconds&gt; &lt;capture_timeout_in_seconds&gt;\\n\";\n    exit 255;\n}\nelsif( $ARGV[4] &lt; 1 || $ARGV[4] &gt; 600 )\n{\n    print \"$ARGV[4] is the login timeout and must be an int between 1 and 600  seconds\\n\";\n    print STDERR \"$ARGV[4] is the login timeout and must be an int between 1 and  600 seconds\\n\";\n    exit 254;\n}\nelsif( $#ARGV == 5 &amp;&amp; ( $ARGV[5] &lt; 1 || $ARGV[5] &gt; 600 ) )\n{\n    print \"$ARGV[5] is the capture timeout and must be an int between 1 and 600  seconds\\n\";\n    print STDERR \"$ARGV[5] is the capture timeout and must be an int between 1  and 600 seconds\\n\";\n    exit 254;\n}\nelse\n{\n    my $capture_timeout = $ARGV[4];\n    if( $ARGV[5] )\n    {\n        $capture_timeout = $ARGV[5];\n    }\n\n    my $errorCode = 1;\n    my @data;\n    my $errorString = \"\\nHost $ARGV[0]:  \\n\";\n\n    ($errorCode, @data) = GetConfig( $ARGV[0], $ARGV[1], $ARGV[2], $ARGV[3], $ARGV[4], $capture_timeout );\n\n    if( $errorCode == 0 )\n    {\n        # Success.  The running configuration\n        # content is in the data variable\n\n        foreach ( @data ) { print \"$_\\n\" }; # print the configuration to STDOUT\n        exit 0;\n    }\n    else\n    {\n        print STDERR $errorString;\n\n        if( $errorCode == 245 )\n        {\n            print STDERR join \" \", @data, \"\\nEnsure that the device user has sufficient privileges to disable paging and view the config\\n\";\n        }\n        else\n        {\n            print STDERR join \" \", @data, \"\\n\";\n        }\n\n        exit $errorCode;\n    }\n}\n\nexit 0;\n\nsub GetConfig\n{\n    my $deviceIP=shift;\n    my $user=shift;\n    my $pass=shift;\n    my $epass=shift;\n    my $login_timeout=shift;\n    my $capture_timeout=shift;\n    my @config;\n    my $msg;\n\n    my $ssh = Net::SSH::Expect-&gt;new (\n        host =&gt; $deviceIP,\n        user =&gt; $user,\n        password=&gt; $pass,\n        raw_pty =&gt; 1,\n        no_terminal =&gt; 0,\n        timeout =&gt; $login_timeout\n    );\n\n    my $login_output;\n    eval { $login_output = $ssh-&gt;login(); };\n\n    if( $@ )\n    {\n        $msg = \"Login has failed. Output: $login_output\";\n        return( 252, $msg );\n    }\n\n    # login output should contain the right prompt characters\n    if( $login_output !~ /\\&gt;\\s*\\z/ )\n    {\n        $msg = \"Login has failed. Didn't see device prompt as expected.\";\n        $ssh-&gt;close();\n        return( 252, $msg );\n    }\n\n    if( $login_output !~ /\\&gt;\\s*\\z/ )  # Replace '#' is the prompt character here\n    {\n        # we don't have the '#' prompt, means we still can't exec commands\n        $msg = \"Exec prompt not found.\";\n        $ssh-&gt;close();\n        return( 249, $msg );\n    }\n\n    my $elogin = $ssh-&gt;exec(\"en\");\n\n    my $elogin2 = $ssh-&gt;exec($epass);\n\n    if( $elogin2 !~ /\\#\\s*\\z/ )  # Replace '#' is the prompt character here\n    {\n        $msg = \"Exec prompt not found.\";\n        $ssh-&gt;close();\n        return( 249, $msg );\n    }\n\n    # disable paging\n    # different commands for different devices, if they don't\n    # work then we will get messages about problems later\n    # specifically the \"No prompt after 'sh run'\" error\n    # errmsg doesn't get set when these error and if we use print\n    # and getlines to read for errors it causes problems with print \"sh run\"\n    # later.\n    # $ssh-&gt;exec( \"term pager 0\" );\n    my $paging = $ssh-&gt;exec( \"term pager 0\" );\n    if ( $paging =~  /\\s?%\\s/ )\n    {\n        $msg = \"Unable to set terminal size to 0 - Insufficient privileges\";\n        $ssh-&gt;close();\n        return( 245, $msg);\n    }\n\n    $ssh-&gt;send( \"sh run\" );\n    $ssh-&gt;timeout( $capture_timeout );\n    $ssh-&gt;peek(0);\n\n    while( my $line = $ssh-&gt;read_line() )\n    {\n        # get configuration content\n\n        if( $line !~ /sh run|Building configuration|Current configuration|^\\s*$/ )\n        {\n            push @config, $line;\n        }\n    }\n\n    if( @config &lt;= 0 )\n    {\n        $msg = \"No data retrieved, the capture timeout may be too low.\";\n        $ssh-&gt;close();\n        return( 244, $msg );\n    }\n\n    if( scalar grep { $_ =~ /^%/ } @config )\n    {\n        # Ensure show running actually returned the config and not an error\n        # message containing '%'\n        return( 245, @config );\n    }\n\n    return( 0, @config ); # everything was okay, return the captured data\n}\n</code></pre>\n\n<p>Line 112:</p>\n\n<pre><code>if( $@ )\n{\n    $msg = \"Login has failed. Output: $login_output\";\n    return( 252, $msg );\n}\n</code></pre>\n\n<p>The $msg returned is:   Login has failed. Output: . \nCan anyone help me regarding this issue, fairly new to Perl. I am trying to get a backup of the config for a Cisco ASA device. </p>\n\n<p>I have tried to use chomp, but couldn't get it working. Any help will be appreciated.</p>\n"}, {"tags": ["perl", "geoip2"], "answers": [{"comments": [{"owner": {"reputation": 502, "user_id": 2487509, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/Oz6bq.jpg?s=128&g=1", "display_name": "Russell Fulton", "link": "https://stackoverflow.com/users/2487509/russell-fulton"}, "edited": false, "score": 0, "creation_date": 1531693821, "post_id": 51352574, "comment_id": 89677886, "body": "I knew I was missing something obvious.  I followed the links on the line above."}], "tags": [], "owner": {"reputation": 793701, "user_id": 19068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d2d3229ed1961d2bd81853242493247?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/19068/quentin"}, "is_accepted": true, "score": 4, "last_activity_date": 1531706338, "last_edit_date": 1531706338, "creation_date": 1531692426, "answer_id": 51352574, "question_id": 51352539, "link": "https://stackoverflow.com/questions/51352539/where-is-the-documentation-and-code-synopsis-for-the-geoip2-module/51352574#51352574", "title": "Where is the documentation and code synopsis for the GeoIP2 module?", "body": "<p>The documentation is on MetaCPAN in\n<a href=\"https://metacpan.org/pod/GeoIP2\" rel=\"nofollow noreferrer\">the normal place</a>.\nYou just have to follow the link through to the module you are actually going to use.</p>\n\n<p><img src=\"https://i.stack.imgur.com/v3IzG.png\" alt=\"Screenshot of the documentation mentioned in the question\"></p>\n"}], "owner": {"reputation": 502, "user_id": 2487509, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/Oz6bq.jpg?s=128&g=1", "display_name": "Russell Fulton", "link": "https://stackoverflow.com/users/2487509/russell-fulton"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 29, "favorite_count": 0, "accepted_answer_id": 51352574, "answer_count": 1, "score": 0, "last_activity_date": 1531706338, "creation_date": 1531691876, "last_edit_date": 1531706245, "question_id": 51352539, "link": "https://stackoverflow.com/questions/51352539/where-is-the-documentation-and-code-synopsis-for-the-geoip2-module", "title": "Where is the documentation and code synopsis for the GeoIP2 module?", "body": "<p>I am trying to update my old Perl script to use the new\n<a href=\"https://metacpan.org/pod/GeoIP2\" rel=\"nofollow noreferrer\"><code>GeoIP2</code></a> module\nbut I can't find any documentation of the actual API calls anywhere.</p>\n\n<p>The README on github, metacpan and the man pages are all the same and don't contain any sample code that I can see.</p>\n"}, {"tags": ["regex", "perl", "awk", "sed", "grep"], "answers": [{"comments": [{"owner": {"reputation": 29, "user_id": 3791998, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/37bef8addfa108ae1c3d6e72f81a67ce?s=128&d=identicon&r=PG&f=1", "display_name": "user3791998", "link": "https://stackoverflow.com/users/3791998/user3791998"}, "edited": false, "score": 0, "creation_date": 1531707017, "post_id": 51353281, "comment_id": 89680076, "body": "dawg, thank you for taking a stab at this. Actually your idea worked. Just had to make a few minor tweaks. The final working expression for me was perl -0777 -lne &#39;s/^[ ]*(&gt;)/\\t\\t$1/mg; s/^(repeat[ ]+\\d+)\\s+/$1\\t/mg; print&#39; inputfile | tee output file"}, {"owner": {"reputation": 29, "user_id": 3791998, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/37bef8addfa108ae1c3d6e72f81a67ce?s=128&d=identicon&r=PG&f=1", "display_name": "user3791998", "link": "https://stackoverflow.com/users/3791998/user3791998"}, "edited": false, "score": 0, "creation_date": 1531707192, "post_id": 51353281, "comment_id": 89680101, "body": "I tried to add a -i switch after the perl -0777 to try to see if the changes can be applied in-place but it did not seem to work. For now, I am okay with redirecting the output stream to a new file but curious to know as to why in-place did not work."}, {"owner": {"reputation": 18548, "user_id": 4082052, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GUNps.jpg?s=128&g=1", "display_name": "Sundeep", "link": "https://stackoverflow.com/users/4082052/sundeep"}, "reply_to_user": {"reputation": 29, "user_id": 3791998, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/37bef8addfa108ae1c3d6e72f81a67ce?s=128&d=identicon&r=PG&f=1", "display_name": "user3791998", "link": "https://stackoverflow.com/users/3791998/user3791998"}, "edited": false, "score": 0, "creation_date": 1531719071, "post_id": 51353281, "comment_id": 89682557, "body": "@user3791998 the <code>-i</code> option accepts an optional argument for backup purposes.. so if you tried the option combining with other options, it wouldn&#39;t work... try <code>perl -i -0777 -lne &#39;...&#39;</code>"}, {"owner": {"reputation": 29, "user_id": 3791998, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/37bef8addfa108ae1c3d6e72f81a67ce?s=128&d=identicon&r=PG&f=1", "display_name": "user3791998", "link": "https://stackoverflow.com/users/3791998/user3791998"}, "edited": false, "score": 0, "creation_date": 1531720644, "post_id": 51353281, "comment_id": 89683002, "body": "Hi Sundeep, thank you for your tip. yes I was trying to do a perl -0777 -ilne and it did not work. After changing it to perl -i -0777 -lne, it worked well. Also perl -0777 -i -lne worked. So the position of the -i switch in the command did not matter as long as this switch wasn&#39;t combined with the others."}], "tags": [], "owner": {"reputation": 79972, "user_id": 298607, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/DVW9g.jpg?s=128&g=1", "display_name": "dawg", "link": "https://stackoverflow.com/users/298607/dawg"}, "is_accepted": false, "score": 2, "last_activity_date": 1531775156, "last_edit_date": 1531775156, "creation_date": 1531701052, "answer_id": 51353281, "question_id": 51352103, "link": "https://stackoverflow.com/questions/51352103/mutliline-regex-concatenation/51353281#51353281", "title": "mutliline regex concatenation", "body": "<p>In <code>perl</code>:</p>\n\n<pre><code>perl -0777 -lne 's/^(repeat[ ]+\\d+)\\s+/\\1\\t/mg; s/^[ ]*&gt;/\\t\\t&gt;/mg; print' file \n//                                                                                                            \nimport tset flash_read, flash_writ;\nvector  (      , (XMOSI, XMISO, XSCLK, XSTRMSTRT, XSTRMSCLK, XSTRMCKEN, XXTALIN, XXTALCPUEN, XHVREGON, XFDRESET, XGLDATA5, XGLDATA4, XGLDATA3, XGLDATA2, XGLDATA1, XGLDATA0):H, (XSTRMD3, XSTRMD2, XSTRMD1, XSTRMD0, XNSS3, XNSS2, XNSS1, XNSS0):H, XTECLOCK, XRXDATA, XRXENABLE, XTXDATA, XTXENABLE, XNRESET, XTCK, XTMS, XTDI, XTDO, XNTRST)\n{\nrepeat 2    &gt; flash_writ X0X00X0XXXXXXXXX 0000XXXX X 0 L X X 0 1 0 0 X 0; // XNTRST\nrepeat 9    &gt; flash_writ X0X00X0XXXXXXXXX 0000XXXX X 0 L X X 0 1 1 0 X 1; // Test Logic Reset\n            &gt; flash_writ X0X00X0XXXXXXXXX 0000XXXX X 0 L X X 0 1 0 0 X 1; // Run Test Idle\nrepeat 2    &gt; flash_writ X0X00X0XXXXXXXXX 0000XXXX X 0 L X X 0 1 1 0 X 1; // Select IR\n</code></pre>\n\n<p>Or, you can also do:</p>\n\n<pre><code>perl -0777 -lpe 's/^(repeat[ ]+\\d+)\\s+/\\1\\t/mg; s/^[ ]*&gt;/\\t\\t&gt;/mg;' file\n</code></pre>\n\n<p>You may need to play with how many <code>\\t</code> in the second substitution, but you get the idea.</p>\n\n<hr>\n\n<p>Ed's <code>awk</code> is brilliant. You can also do something like that in <code>perl</code>:</p>\n\n<pre><code>perl -lne ' if (/^repeat[\\h]+\\d+/) {$ll=$_; next} \n            if (/^\\h+&gt;/) {$_=sprintf(\"%-21s%s\",$ll,$_);$ll=\"\";}\n            print' file\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 29, "user_id": 3791998, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/37bef8addfa108ae1c3d6e72f81a67ce?s=128&d=identicon&r=PG&f=1", "display_name": "user3791998", "link": "https://stackoverflow.com/users/3791998/user3791998"}, "edited": false, "score": 0, "creation_date": 1531720191, "post_id": 51354886, "comment_id": 89682848, "body": "Hi Ed, thank you for your answer. The solutions are excellent. After looking at the 3 solutions, I prefer the first one due to the clarity. However, a little bit of explanation on what the 3 lines of awk do would have helped save me some time to decode them or perhaps for some other awk newbie who may try to discern this to apply these ideas for his/her specific use-cases."}, {"owner": {"reputation": 29, "user_id": 3791998, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/37bef8addfa108ae1c3d6e72f81a67ce?s=128&d=identicon&r=PG&f=1", "display_name": "user3791998", "link": "https://stackoverflow.com/users/3791998/user3791998"}, "edited": false, "score": 0, "creation_date": 1531720450, "post_id": 51354886, "comment_id": 89682937, "body": "So my understanding is as follows: (1) In the first line, awk looks for a line beginning with repeat and if it finds such a line, it stores it in a variable called pfx and then moves on to the next line. (2) In the second line, if the immediate next line beginning with &gt; is found, then the content stored in pfx is placed in a 22 character length left justified format string followed by the content of the current line. Then the value of the pfx variable is reset to &quot;&quot; so that for all other lines the &gt; prints out after a left justification of 22 spaces."}, {"owner": {"reputation": 29, "user_id": 3791998, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/37bef8addfa108ae1c3d6e72f81a67ce?s=128&d=identicon&r=PG&f=1", "display_name": "user3791998", "link": "https://stackoverflow.com/users/3791998/user3791998"}, "edited": false, "score": 0, "creation_date": 1531720493, "post_id": 51354886, "comment_id": 89682959, "body": "(3) Third line of the awk program just says print all the lines by satisfying the above 2 conditions."}, {"owner": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "reply_to_user": {"reputation": 29, "user_id": 3791998, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/37bef8addfa108ae1c3d6e72f81a67ce?s=128&d=identicon&r=PG&f=1", "display_name": "user3791998", "link": "https://stackoverflow.com/users/3791998/user3791998"}, "edited": false, "score": 0, "creation_date": 1531744563, "post_id": 51354886, "comment_id": 89696070, "body": "RIght and I didn&#39;t comment the code as it&#39;s simple enough for any newbie to understand with just a little thought and they learn more about awk from researching and thinking about that than if they were spoonfed just this answer. You can always add &quot;print&quot;s to the script see see what values the variables have too if there&#39;s anything you don&#39;t understand."}], "tags": [], "owner": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "is_accepted": false, "score": 1, "last_activity_date": 1531717907, "last_edit_date": 1531717907, "creation_date": 1531717489, "answer_id": 51354886, "question_id": 51352103, "link": "https://stackoverflow.com/questions/51352103/mutliline-regex-concatenation/51354886#51354886", "title": "mutliline regex concatenation", "body": "<pre><code>$ awk '\n    /^repeat/ { pfx = $0; next }\n    /^ &gt;/     { $0 = sprintf(\"%-21s%s\", pfx, $0); pfx=\"\" }\n    { print }\n' file\n//\nimport tset flash_read, flash_writ;\nvector  ( $tset     , (XMOSI, XMISO, XSCLK, XSTRMSTRT, XSTRMSCLK, XSTRMCKEN, XXTALIN, XXTALCPUEN, XHVREGON, XFDRESET, XGLDATA5, XGLDATA4, XGLDATA3, XGLDATA2, XGLDATA1, XGLDATA0):H, (XSTRMD3, XSTRMD2, XSTRMD1, XSTRMD0, XNSS3, XNSS2, XNSS1, XNSS0):H, XTECLOCK, XRXDATA, XRXENABLE, XTXDATA, XTXENABLE, XNRESET, XTCK, XTMS, XTDI, XTDO, XNTRST)\n{\nrepeat 2              &gt; flash_writ X0X00X0XXXXXXXXX 0000XXXX X 0 L X X 0 1 0 0 X 0; // XNTRST\nrepeat 9              &gt; flash_writ X0X00X0XXXXXXXXX 0000XXXX X 0 L X X 0 1 1 0 X 1; // Test Logic Reset\n                      &gt; flash_writ X0X00X0XXXXXXXXX 0000XXXX X 0 L X X 0 1 0 0 X 1; // Run Test Idle\nrepeat 2              &gt; flash_writ X0X00X0XXXXXXXXX 0000XXXX X 0 L X X 0 1 1 0 X 1; // Select IR\n</code></pre>\n\n<p>or if you prefer brevity over clarity:</p>\n\n<pre><code>awk '/^repeat/{p=$0;next} /^ &gt;/{$0=sprintf(\"%-21s\",p)$0;p=\"\"} 1' file\n</code></pre>\n\n<p>and if you want \"in place\" editing then use GNU awk:</p>\n\n<pre><code>awk -i inplace '/^repeat/{p=$0;next} /^ &gt;/{$0=sprintf(\"%-21s\",p)$0;p=\"\"} 1' file\n</code></pre>\n"}], "owner": {"reputation": 29, "user_id": 3791998, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/37bef8addfa108ae1c3d6e72f81a67ce?s=128&d=identicon&r=PG&f=1", "display_name": "user3791998", "link": "https://stackoverflow.com/users/3791998/user3791998"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 196, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1531775156, "creation_date": 1531687569, "last_edit_date": 1531717266, "question_id": 51352103, "link": "https://stackoverflow.com/questions/51352103/mutliline-regex-concatenation", "title": "mutliline regex concatenation", "body": "<p>I have a tough one here which I am struggling with. It involves a case of multiline search-replace and/or concatenation situation. \nHere is my input text: </p>\n\n<pre><code>//                                                                                                            \nimport tset flash_read, flash_writ;\nvector  ( $tset     , (XMOSI, XMISO, XSCLK, XSTRMSTRT, XSTRMSCLK, XSTRMCKEN, XXTALIN, XXTALCPUEN, XHVREGON, XFDRESET, XGLDATA5, XGLDATA4, XGLDATA3, XGLDATA2, XGLDATA1, XGLDATA0):H, (XSTRMD3, XSTRMD2, XSTRMD1, XSTRMD0, XNSS3, XNSS2, XNSS1, XNSS0):H, XTECLOCK, XRXDATA, XRXENABLE, XTXDATA, XTXENABLE, XNRESET, XTCK, XTMS, XTDI, XTDO, XNTRST)\n{\nrepeat 2 \n &gt; flash_writ X0X00X0XXXXXXXXX 0000XXXX X 0 L X X 0 1 0 0 X 0; // XNTRST\nrepeat 9 \n &gt; flash_writ X0X00X0XXXXXXXXX 0000XXXX X 0 L X X 0 1 1 0 X 1; // Test Logic Reset\n &gt; flash_writ X0X00X0XXXXXXXXX 0000XXXX X 0 L X X 0 1 0 0 X 1; // Run Test Idle\nrepeat 2 \n &gt; flash_writ X0X00X0XXXXXXXXX 0000XXXX X 0 L X X 0 1 1 0 X 1; // Select IR\n</code></pre>\n\n<p>My desired output format is this:</p>\n\n<pre><code>//                                                                                                            \nimport tset flash_read, flash_writ;\nvector  ( $tset     , (XMOSI, XMISO, XSCLK, XSTRMSTRT, XSTRMSCLK, XSTRMCKEN, XXTALIN, XXTALCPUEN, XHVREGON, XFDRESET, XGLDATA5, XGLDATA4, XGLDATA3, XGLDATA2, XGLDATA1, XGLDATA0):H, (XSTRMD3, XSTRMD2, XSTRMD1, XSTRMD0, XNSS3, XNSS2, XNSS1, XNSS0):H, XTECLOCK, XRXDATA, XRXENABLE, XTXDATA, XTXENABLE, XNRESET, XTCK, XTMS, XTDI, XTDO, XNTRST)\n{\nrepeat 2              &gt; flash_writ X0X00X0XXXXXXXXX 0000XXXX X 0 L X X 0 1 0 0 X 0; // XNTRST\nrepeat 9              &gt; flash_writ X0X00X0XXXXXXXXX 0000XXXX X 0 L X X 0 1 1 0 X 1; // Test Logic Reset\n                      &gt; flash_writ X0X00X0XXXXXXXXX 0000XXXX X 0 L X X 0 1 0 0 X 1; // Run Test Idle\nrepeat 2              &gt; flash_writ X0X00X0XXXXXXXXX 0000XXXX X 0 L X X 0 1 1 0 X 1; // Select IR \n</code></pre>\n\n<p>I am looking for a unix one liner that would search for lines that contain repeat in the input text and replace the new line character at the end of repeat count with a space such that the end outcome looks like the repeat line being concatenated with its next line as illustrated in the output text with the indicated number of white spaces. </p>\n\n<p>For lines that do not contain a repeat count, it is just a matter of pushing the commencement of the line to as many spaces as illustrated in the output text. </p>\n\n<p>Some of the areas where I have explored to accomplish this but with futile finishes are \n(1) Sed with usage of branch labels, N, pattern space\n(2) AWK with changing the RS\n(3) Perl with s/// and multiline flag turned on      </p>\n\n<p>Granted that this could be done with nested regex if conditions in a full-fledged perl or python script but I am looking for a more elegant solution.                </p>\n"}, {"tags": ["perl", "session", "cookies", "get"], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 10085046, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a08cae8933e4addad96070855e6ef95?s=128&d=identicon&r=PG&f=1", "display_name": "Bert", "link": "https://stackoverflow.com/users/10085046/bert"}, "edited": false, "score": 0, "creation_date": 1531688565, "post_id": 51352120, "comment_id": 89676931, "body": "Thank you so much! I was searching for hours for this solution! How did you find out, that this was the problem?"}, {"owner": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "reply_to_user": {"reputation": 23, "user_id": 10085046, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a08cae8933e4addad96070855e6ef95?s=128&d=identicon&r=PG&f=1", "display_name": "Bert", "link": "https://stackoverflow.com/users/10085046/bert"}, "edited": false, "score": 1, "creation_date": 1531691458, "post_id": 51352120, "comment_id": 89677496, "body": "<i>&quot;How did you find out, that this was the problem?&quot;</i> - experience with several similar issues: I&#39;ve taken the original working request from the browser, fed it directly via socket (i.e. w/o LWP) to the server and then reduced the request as much as possible to find out what the relevant part is the server is looking for. Then I&#39;ve added this part to the HTTP::Request."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 1, "creation_date": 1531726327, "post_id": 51352120, "comment_id": 89685466, "body": "<i>Note that it might change at any time if the server setup will be changed, i.e. it might then need other workarounds.</i> Which is why the best approach here would be to ask the owners of the web site to supply an API giving access to their data."}], "tags": [], "owner": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "is_accepted": true, "score": 2, "last_activity_date": 1531688262, "last_edit_date": 1531688262, "creation_date": 1531687721, "answer_id": 51352120, "question_id": 51351586, "link": "https://stackoverflow.com/questions/51351586/perl-get-request-returns-empty-response-maybe-session-related/51352120#51352120", "title": "Perl get request returns empty response, maybe session related?", "body": "<p>Either there is some rudimentary anti-bot protection at the server or the server is misconfigured or otherwise broken. It looks like it  expects to have an <code>Accept-Encoding</code> header in the request which LWP by default does not sent. The value of this header does not really seem to matter, i.e. the server will send the content compressed with <code>gzip</code> if the client claims to support it but it will send uncompressed data if the client offered only a compression method which is unknown to the server.</p>\n\n<p>With this knowledge one can change the code like this:</p>\n\n<pre><code>my $request = HTTP::Request-&gt;new('GET',\n    'https://www.mytischtennis.de/clicktt/ByTTV/18-19/ligen/Bezirksoberliga/gruppe/323819/mannschaftsmeldungen/vr',\n    [ 'Accept-Encoding' =&gt; 'foobar' ]\n);\n</code></pre>\n\n<p>With this simple change the code works currently for me. Note that it might change at any time if the server setup will be changed, i.e. it might then need other workarounds. </p>\n"}], "owner": {"reputation": 23, "user_id": 10085046, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a08cae8933e4addad96070855e6ef95?s=128&d=identicon&r=PG&f=1", "display_name": "Bert", "link": "https://stackoverflow.com/users/10085046/bert"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 420, "favorite_count": 0, "accepted_answer_id": 51352120, "answer_count": 1, "score": 2, "last_activity_date": 1531688262, "creation_date": 1531683273, "last_edit_date": 1531684977, "question_id": 51351586, "link": "https://stackoverflow.com/questions/51351586/perl-get-request-returns-empty-response-maybe-session-related", "title": "Perl get request returns empty response, maybe session related?", "body": "<p>I was using an open source tool called SimTT which gets an URL of a tabletennis league and then calculates the probable results (e.g. ranking of teams and players). Unfortunately the webpage moved to a different webpage.</p>\n\n<p>I downloaded the open source and repaired the parsing of the webpage, but currently I'm only able to download the page manually and read it then from a file.</p>\n\n<p>Below you can find an excerpt of my code to retrieve the page. It prints success, but the response is empty. Unfortunately I'm not familiar with perl and webtechniques very well, but in Wireshark I could see that one of the last things send was a new session key. But I'm not sure, if the problem is related to cookies, ssl or something like that.</p>\n\n<p>It would be very nice if someone could help me to get access. I know that there are some people out there which would like to use the tool.</p>\n\n<p>So heres the code:</p>\n\n<pre><code>use LWP::UserAgent ();\nuse HTTP::Cookies;\n\nmy $ua = LWP::UserAgent-&gt;new(keep_alive=&gt;1);\n$ua-&gt;agent('Mozilla/5.0');\n$ua-&gt;cookie_jar({});\nmy $request = new HTTP::Request('GET', 'https://www.mytischtennis.de/clicktt/ByTTV/18-19/ligen/Bezirksoberliga/gruppe/323819/mannschaftsmeldungen/vr');\nmy $response = $ua-&gt;request($request);\n\nif ($response-&gt;is_success) {\n    print \"Success: \", $response-&gt;decoded_content;\n}\nelse {\n    die $response-&gt;status_line;\n}\n</code></pre>\n"}, {"tags": ["perl", "split", "hashmap"], "answers": [{"tags": [], "owner": {"reputation": 3432, "user_id": 604642, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/48daad611ba387f8473b0c1e5792aa3f?s=128&d=identicon&r=PG", "display_name": "shawnhcorey", "link": "https://stackoverflow.com/users/604642/shawnhcorey"}, "is_accepted": false, "score": 4, "last_activity_date": 1531675162, "creation_date": 1531675162, "answer_id": 51350497, "question_id": 51350409, "link": "https://stackoverflow.com/questions/51350409/how-to-split-a-string-into-multiple-hash-keys-in-perl/51350497#51350497", "title": "How to split a string into multiple hash keys in perl", "body": "<p>You have to use hash references to walk down thru the list of keys.</p>\n\n<pre><code>use Data::Dumper;\n\nmy %hash = ();\n\nwhile( my $string = &lt;DATA&gt; ){\n    chomp $string;\n    my @keys = split /\\//, $string;\n    my $hash_ref = \\%hash;\n    for my $key ( @keys ){\n        $hash_ref-&gt;{$key} = {};\n        $hash_ref = $hash_ref-&gt;{$key};\n    }\n}\nsay Dumper \\%hash;\n\n__DATA__\nfoo/bar/some/more\nalso/some/stuff\nthis/can/have/way/too/many/substrings\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 914, "user_id": 4114394, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/100006056441825/picture?type=large", "display_name": "Erik Bennett", "link": "https://stackoverflow.com/users/4114394/erik-bennett"}, "edited": false, "score": 1, "creation_date": 1531743298, "post_id": 51350555, "comment_id": 89695278, "body": "I just tried this with the following data, and I don&#39;t think it&#39;s working like one would hope.  <code>my @keys = qw(   foo&#47;bar&#47;some&#47;more   also&#47;some&#47;stuff   also&#47;bar&#47;baz   this&#47;can&#47;have&#47;way&#47;too&#47;many&#47;substrings );</code>  Specifically, the second <code>also</code> stomps on the first."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 914, "user_id": 4114394, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/100006056441825/picture?type=large", "display_name": "Erik Bennett", "link": "https://stackoverflow.com/users/4114394/erik-bennett"}, "edited": false, "score": 1, "creation_date": 1531743578, "post_id": 51350555, "comment_id": 89695469, "body": "@ErikBennett: Yes, I thought of that bug over the weekend, but got distracted before I could fix it. Thanks for reminding me. I&#39;ve fixed it now (I changed <code>$curr_ref-&gt;{$_} = {}</code> to <code>$curr_ref-&gt;{$_} &#47;&#47;= {}</code>)."}, {"owner": {"reputation": 914, "user_id": 4114394, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/100006056441825/picture?type=large", "display_name": "Erik Bennett", "link": "https://stackoverflow.com/users/4114394/erik-bennett"}, "edited": false, "score": 0, "creation_date": 1531743834, "post_id": 51350555, "comment_id": 89695603, "body": "How would one make it work for ` my @keys = qw(   foo/bar/some/more   also/some/stuff   also/bar/baz   also/bar   this/can/have/way/too/many/substrings ); ` ?"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 914, "user_id": 4114394, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/100006056441825/picture?type=large", "display_name": "Erik Bennett", "link": "https://stackoverflow.com/users/4114394/erik-bennett"}, "edited": false, "score": 0, "creation_date": 1531744054, "post_id": 51350555, "comment_id": 89695745, "body": "It already works for that situation as far as it can ever work. You&#39;ve run into a logical limitation of Perl hashes. It is impossible for <code>$hash{also}{bar}</code> to simultaneously contain both <code>1</code> and a reference to another sub-hash."}, {"owner": {"reputation": 914, "user_id": 4114394, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/100006056441825/picture?type=large", "display_name": "Erik Bennett", "link": "https://stackoverflow.com/users/4114394/erik-bennett"}, "edited": false, "score": 0, "creation_date": 1531744700, "post_id": 51350555, "comment_id": 89696153, "body": "That makes sense.  I was thinking of a situation like ( usr usr/local usr/local/bin ).  So, where is the <code>&#47;&#47;=</code> operator documented?  I can&#39;t find it in perldocs, and my new book is in the mail.  Mine is 5.006, or something.  Thanks."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 914, "user_id": 4114394, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/100006056441825/picture?type=large", "display_name": "Erik Bennett", "link": "https://stackoverflow.com/users/4114394/erik-bennett"}, "edited": false, "score": 1, "creation_date": 1531745110, "post_id": 51350555, "comment_id": 89696406, "body": "<code>&#47;&#47;=</code> is the assignment version of <code>&#47;&#47;</code>. So <code>$x &#47;&#47;= %y</code> is a short way of writing <code>$x = $x &#47;&#47; $y</code>. And <code>&#47;&#47;</code> is the &quot;defined-or&quot; operator. It&#39;s like <code>||</code> but it checks its left-hand operand for &quot;definedness&quot;, not truth. So it&#39;s really <code>$x = defined $x ? $x : $y</code>. The operator was <a href=\"https://metacpan.org/pod/distribution/perl/pod/perl5100delta.pod#Defined-or-operator\" rel=\"nofollow noreferrer\">introduced in 5.10.0</a>. And, as an operator, it&#39;s documented in <a href=\"https://perldoc.perl.org/perlop.html#Logical-Defined-Or\" rel=\"nofollow noreferrer\">perlop</a>."}], "tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": true, "score": 5, "last_activity_date": 1531743486, "last_edit_date": 1531743486, "creation_date": 1531675635, "answer_id": 51350555, "question_id": 51350409, "link": "https://stackoverflow.com/questions/51350409/how-to-split-a-string-into-multiple-hash-keys-in-perl/51350555#51350555", "title": "How to split a string into multiple hash keys in perl", "body": "<p>Identical logic to Shawn's answer. But I've hidden the clever hash-walking bit in a subroutine. And I've set the final value to 1 rather than an empty hash reference.</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\nuse feature 'say';\n\nuse Data::Dumper;\n\nmy @keys = qw(\n  foo/bar/some/more\n  also/some/stuff\n  this/can/have/way/too/many/substrings\n);\n\nmy %hash;\n\nfor (@keys) {\n  multilevel(\\%hash, $_);\n}\n\nsay Dumper \\%hash;\n\nsub multilevel {\n  my ($hashref, $string) = @_;\n\n  my $curr_ref = $hashref;\n  my @strings = split m[/], $string;\n  for (@strings[0 .. $#strings - 1]) {\n    $curr_ref-&gt;{$_} //= {};\n    $curr_ref = $curr_ref-&gt;{$_};\n  }\n\n  $curr_ref-&gt;{@strings[-1]} = 1;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 79, "user_id": 7637846, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/65cedf5b34239b72e08f1e6733e1dabf?s=128&d=identicon&r=PG&f=1", "display_name": "TheAdam122", "link": "https://stackoverflow.com/users/7637846/theadam122"}, "edited": false, "score": 0, "creation_date": 1531748139, "post_id": 51362356, "comment_id": 89698339, "body": "Looks good, I sadly don&#39;t have that library, and I will rather go with the other solutions, than install a new library."}], "tags": [], "owner": {"reputation": 38072, "user_id": 46395, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5ce828f20abb195ef5d971205ee36c27?s=128&d=identicon&r=PG", "display_name": "daxim", "link": "https://stackoverflow.com/users/46395/daxim"}, "is_accepted": false, "score": 0, "last_activity_date": 1531745718, "creation_date": 1531745718, "answer_id": 51362356, "question_id": 51350409, "link": "https://stackoverflow.com/questions/51350409/how-to-split-a-string-into-multiple-hash-keys-in-perl/51362356#51362356", "title": "How to split a string into multiple hash keys in perl", "body": "<p>Just use a library.</p>\n\n<pre><code>use Data::Diver qw(DiveVal);\nmy @strings = (\n    undef,\n    'foo/bar/some/more',\n    'also/some/stuff',\n    'this/can/have/way/too/many/substrings',\n);\nmy %hash;\nfor my $index (1..3) {\n    my $root = {};\n    DiveVal($root, split '/', $strings[$index]) = 1;\n    %hash = (%hash, %$root);\n}\n__END__\n(\n    also =&gt; {some =&gt; {stuff =&gt; 1}},\n    foo  =&gt; {bar =&gt; {some =&gt; {more =&gt; 1}}},\n    this =&gt; {can =&gt; {have =&gt; {way =&gt; {too =&gt; {many =&gt; {substrings =&gt; 1}}}}}},\n)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 79, "user_id": 7637846, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/65cedf5b34239b72e08f1e6733e1dabf?s=128&d=identicon&r=PG&f=1", "display_name": "TheAdam122", "link": "https://stackoverflow.com/users/7637846/theadam122"}, "edited": false, "score": 0, "creation_date": 1531900097, "post_id": 51391700, "comment_id": 89763816, "body": "Please always use <code>strict</code> and <code>warnings</code> in any code you post here. And I suggest, that you use <code>print Dumper(\\%hash );</code> instead of <code>print Dumper( %hash ).&quot;\\n&quot;;</code>, it is clearer."}], "tags": [], "owner": {"reputation": 1, "user_id": 10096506, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/bede204eda4fd3cdfe9a59d5cab99fef?s=128&d=identicon&r=PG", "display_name": "user10096506", "link": "https://stackoverflow.com/users/10096506/user10096506"}, "is_accepted": false, "score": 0, "last_activity_date": 1531871778, "creation_date": 1531871778, "answer_id": 51391700, "question_id": 51350409, "link": "https://stackoverflow.com/questions/51350409/how-to-split-a-string-into-multiple-hash-keys-in-perl/51391700#51391700", "title": "How to split a string into multiple hash keys in perl", "body": "<p>I took the easy way out w/'eval':</p>\n\n<pre><code>use Data::Dumper;\n\n%hash = ();\n@strings = ( 'this/is/a/path', 'and/another/path', 'and/one/final/path' );\nforeach ( @strings ) {\n    s/\\//\\}\\{/g;\n    $str = '{' . $_ . '}';      # version 2: remove this line, and then\n    eval( \"\\$hash$str = 1;\" );  #   eval( \"\\$hash{$_} = 1;\" );\n}\n\nprint Dumper( %hash ).\"\\n\";\n</code></pre>\n"}], "owner": {"reputation": 79, "user_id": 7637846, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/65cedf5b34239b72e08f1e6733e1dabf?s=128&d=identicon&r=PG&f=1", "display_name": "TheAdam122", "link": "https://stackoverflow.com/users/7637846/theadam122"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 571, "favorite_count": 1, "accepted_answer_id": 51350555, "answer_count": 4, "score": 1, "last_activity_date": 1531871778, "creation_date": 1531674334, "last_edit_date": 1531675387, "question_id": 51350409, "link": "https://stackoverflow.com/questions/51350409/how-to-split-a-string-into-multiple-hash-keys-in-perl", "title": "How to split a string into multiple hash keys in perl", "body": "<p>I have a series of strings for example</p>\n\n<pre><code>my @strings;\n$strings[1] = 'foo/bar/some/more';\n$strings[2] = 'also/some/stuff';\n$strings[3] = 'this/can/have/way/too/many/substrings';\n</code></pre>\n\n<p>What I would like to do is to split these strings and store them in a hash as keys like this</p>\n\n<pre><code>my %hash;\n$hash{foo}{bar}{some}{more} = 1;\n$hash{also}{some}{stuff} = 1;\n$hash{this}{can}{have}{way}{too}{many}{substrings} = 1;\n</code></pre>\n\n<p>I could go on and list my failed attempts, but I don't think they add to the value to the question, but I will mention one. Lets say I converted <code>'foo/bar/some/more'</code> to <code>'{foo}{bar}{some}{more}'</code>. Could I somehow store that in a variable and do something like the following?</p>\n\n<pre><code>my $var = '{foo}{bar}{some}{more}';\n$hash$var = 1;\n</code></pre>\n\n<p>NOTE: THIS DOESN'T WORK, but I hope it only doesn't due to a syntax error.</p>\n\n<p>All help appreciated.</p>\n"}, {"tags": ["perl", "reference"], "comments": [{"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 2, "creation_date": 1531661951, "post_id": 51348807, "comment_id": 89670317, "body": "Note: <code>my %Peer = %$p</code> will make a copy of the hash, if you instead keep the reference <code>my $Peer = $p</code> or simply just use <code>$p</code>, and modify the hash value through the reference, you do not need to update the whole hash later. For example, you can do <code>$p-&gt;{peer} = $PC1</code> instead of copying the whole hash: <code>%$p = %Peer</code>. See <a href=\"https://perldoc.perl.org/perlref.html\" rel=\"nofollow noreferrer\">perlref</a> for more information about Perl references"}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 2, "creation_date": 1531662423, "post_id": 51348807, "comment_id": 89670435, "body": "The warning that you get, stems from this line: <code>my %PEER = $THIS{peer}</code>. Here <code>$THIS{peer}</code> is a hash reference, but the left-hand side of the assignment is not a reference. So you would need <code>my %PEER = %{ $THIS{peer} }</code>"}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 7, "creation_date": 1531662744, "post_id": 51348807, "comment_id": 89670516, "body": "I feel your question might find a better reception here if you remove the first paragraph and change the title to something more technical (and related to the problem). As someone else on this site said: &quot;<i>A title should attempt to describe the problem, not how you feel</i>&quot;. :-)"}], "answers": [{"tags": [], "owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "is_accepted": false, "score": 6, "last_activity_date": 1531665879, "last_edit_date": 1531665879, "creation_date": 1531662410, "answer_id": 51349011, "question_id": 51348807, "link": "https://stackoverflow.com/questions/51348807/unable-to-fathom-perl-hash-references/51349011#51349011", "title": "Unable to fathom Perl hash references", "body": "<p>If you want a good introduction to references in Perl, I recommend <a href=\"https://perldoc.pl/perlreftut\" rel=\"nofollow noreferrer\"><code>perldoc perlreftut</code></a>. From the languages you listed, C and its pointers are closest to Perl's references (except that there is no \"reference arithmetic\" or invalid references). In particular, dereferencing is an explicit operation in Perl.</p>\n\n<p>You're trying to construct a cyclic structure: <code>$PC1</code> contains a reference to <code>$PC2</code>, and <code>$PC2</code> contains a reference to <code>$PC1</code>. I recommend against doing so because Perl's automatic memory management is based on reference counting. If you create a reference cycle, it will not be freed automatically until you manually break the cycle. (You can work around this by judicious use of <a href=\"https://perldoc.pl/Scalar::Util#weaken\" rel=\"nofollow noreferrer\">weak references</a>, but it requires some thought about which references should \"own\" the structure and which references shouldn't.)</p>\n\n<p>The easiest way to implement this might be to keep your data structures as they are but put them in a hash:</p>\n\n<pre><code>my %PEERS = (\n    PC1 =&gt; {\n        name    =&gt; 'PC1',\n        os      =&gt; 'Linux',\n        data    =&gt; '/its/data/directory',\n        peer    =&gt; 'PC2',\n    },\n    PC2 =&gt; {\n        name    =&gt; 'PC2',\n        os      =&gt; 'MSWin32',\n        data    =&gt; 'X:\\\\its\\\\data\\\\directory',\n        peer    =&gt; 'PC1',\n    },\n);\n</code></pre>\n\n<p>Then you can write code like:</p>\n\n<pre><code>for my $name (sort keys %PEERS) {\n    my $THIS = $PEERS{$name};\n    my $PEER = $PEERS{$THIS-&gt;{peer}};\n    if ($THIS-&gt;{name} eq hostname &amp;&amp; $THIS-&gt;{os} eq $^O) {\n        print $THIS-&gt;{name} . ', ' . $PEER-&gt;{name} . \"\\n\";\n        last;\n    }\n}\n</code></pre>\n\n<p>Of course, you're now effectively storing the name twice (once as a hash key, once as a field in the (sub-)hash), so you might prefer to change things to:</p>\n\n<pre><code>my %PEERS = (\n    PC1 =&gt; {\n        os      =&gt; 'Linux',\n        data    =&gt; '/its/data/directory',\n        peer    =&gt; 'PC2',\n    },\n    PC2 =&gt; {\n        os      =&gt; 'MSWin32',\n        data    =&gt; 'X:\\\\its\\\\data\\\\directory',\n        peer    =&gt; 'PC1',\n    },\n);\n\nif (my $THIS = $PEERS{hostname()}) {\n    if ($THIS-&gt;{os} eq $^O) {\n        print \"$THIS-&gt;{name}, $THIS-&gt;{peer}\\n\";\n    }\n}\n</code></pre>\n\n<p>This saves us a loop because we can directly look up peers by their hostname.\nThis assumes your peer names are unique, of course.</p>\n\n<hr>\n\n<p>That said, you can get your original attempt to work, if you really want:</p>\n\n<pre><code># my $PEERS = [ $PC1, $PC2 ];\n# I'm not sure why you're using a reference to an array here.\n# I'd just use an array, which saves us some dereferencing below:\nmy @PEERS = ($PC1, $PC2);\n\nfor my $Peer ( @PEERS ) {\n    # my %Peer = %$p;\n    # This line makes a copy of the %$p hash.\n    # We want to modify %$p directly, so let's not do that.\n\n    if ($Peer-&gt;{name} eq 'PC1') {\n        $Peer-&gt;{peer} = $PC2;\n    }\n    else {\n        $Peer-&gt;{peer} = $PC1;\n    }\n    # %$p = %Peer;    # I was surprised to find this line is necessary, otherwise the changes are lost\n    # We don't need to copy the modified hash back because now we're modifying %$p directly.\n}\n</code></pre>\n\n<p>Similarly,</p>\n\n<pre><code>for my $p ( @$PEERS ) {\n    my %THIS = %$p;\n    my %PEER = $THIS{peer};\n</code></pre>\n\n<p>should become</p>\n\n<pre><code>for my $THIS ( @PEERS ) {\n    my $PEER = $THIS-&gt;{peer};\n</code></pre>\n\n<p>There's no need to copy <code>%$p</code> into <code>%THIS</code>, and you're getting warnings because you're assigning <code>$THIS{peer}</code> (a reference) to <code>%PEER</code> (a hash). If you really wanted to make a copy here, you'd have to use <code>%PEER = %{ $THIS-&gt;{peer} }</code> (dereference the reference, as with <code>%{ $p }</code> (which was shortened to <code>%$p</code> in the original code)).</p>\n"}, {"comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1531682813, "post_id": 51349837, "comment_id": 89675547, "body": "I think this would benefit from using a named loop control variable <code>$pc</code> in your first <code>for</code> loop, as you do in the second."}], "tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 1, "last_activity_date": 1531669238, "creation_date": 1531669238, "answer_id": 51349837, "question_id": 51348807, "link": "https://stackoverflow.com/questions/51348807/unable-to-fathom-perl-hash-references/51349837#51349837", "title": "Unable to fathom Perl hash references", "body": "<p>You have two different issues here.</p>\n\n<p>Firstly, the complexity for your code for setting the <code>peer</code> value in your hashes. Your code works, but I think we can make it a lot simpler if a) we stop storing PC details in individual scalars and b) we stop creating unnecessary dereferenced copies of hashes.</p>\n\n<pre><code>my $PCs = {\n  PC1 =&gt; {\n    name    =&gt; 'PC1',\n    os      =&gt; 'Linux',\n    data    =&gt; '/its/data/directory',\n    peer    =&gt; 'PC2',\n  },\n  PC2 =&gt; {\n    name    =&gt; 'PC2',\n    os      =&gt; 'MSWin32',\n    data    =&gt; 'X:\\\\its\\\\data\\\\directory',\n    peer    =&gt; 'PC1',\n  },\n};\n</code></pre>\n\n<p>We can then wire up the <code>peer</code> values with code like this:</p>\n\n<pre><code>for (values %$PCs) {\n  if (exists $PCs-&gt;{$_-&gt;{peer}) {\n    $_-&gt;{peer} = $PCs-&gt;{$_-&gt;{peer}};\n  } else {\n    warn \"PC $_-&gt;{name} has an unknown peer: $_-&gt;{peer}\\n\";\n  }\n}\n</code></pre>\n\n<p>But that's just a cleaner way of writing your existing code. The PCs end up wired together in exactly the same way.</p>\n\n<p>Then there's your error message. That's not caused by your data structures at all. It's caused by this line:</p>\n\n<pre><code>my %PEER = $THIS{peer};\n</code></pre>\n\n<p>You're trying to initialise a hash with a hash reference. And that's not going to work; you need to dereference the hash.</p>\n\n<pre><code>my %PEER = %{ $THIS{peer} };\n</code></pre>\n\n<p>But we don't really need that <code>%PEER</code> variable at all (or <code>%THIS</code>).</p>\n\n<pre><code>for my $p ( values %$PCs ) {\n  if ( ($p-&gt;{name} eq hostname) &amp;&amp; ($p-&gt;{os} eq $^O) ) {\n    print \"$p-&gt;{name}, $p-&gt;{peer}{name}\\n\";\n    last;\n  }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 29, "user_id": 7636685, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f6967f0a043c716b3d0fef3453cbbde0?s=128&d=identicon&r=PG", "display_name": "CharlesMacfarlane", "link": "https://stackoverflow.com/users/7636685/charlesmacfarlane"}, "is_accepted": true, "score": 0, "last_activity_date": 1531780452, "creation_date": 1531780452, "answer_id": 51370925, "question_id": 51348807, "link": "https://stackoverflow.com/questions/51348807/unable-to-fathom-perl-hash-references/51370925#51370925", "title": "Unable to fathom Perl hash references", "body": "<p>Many thanks for the inputs, and apologies for not replying sooner.  I've changed the test file accordingly, and it now works, but you may care to note the extra fix to get it to work with Active Perl v5.24.1 on Windows.  Because of this, I thought it better to post another answer to my own question, rather than post a comment or whatever.  The successful test file now reads:</p>\n\n<pre><code>use strict;\nuse warnings;\nuse Sys::Hostname;\n\n# Peer computers\nmy $PC1 =\n    {\n    name    =&gt; 'PC1',\n    os      =&gt; 'Linux',\n    data    =&gt; '/its/data/directory',\n    peer    =&gt; 'PC2' #  But whas is really needed here is a reference to PC2's data structure below\n    };\n\nmy $PC2 =\n    {\n    name    =&gt; 'PC2',\n    os      =&gt; 'MSWin32',\n    data    =&gt; 'X:\\\\its\\\\data\\\\directory',\n    peer    =&gt; 'PC1' #  But whas is really needed here is a reference to PC1's data structure above\n    };\n\nmy @PEERS = ( $PC1, $PC2 );\n\n# Some code to set up the peer fields, for example\nfor my $p ( @PEERS )\n    {\n    if( $p-&gt;{name} eq $PC1-&gt;{name} )\n        {\n        $p-&gt;{peer} = $PC2;\n        }\n    else\n        {\n        $p-&gt;{peer} = $PC1;\n        }\n    }\n\n# Debug check  -  dump the fields\nfor my $p ( @PEERS )\n    {\n    my %This = %{$p};               # Fix needed for MSWin32, not needed for Linux\n    for my $f ( sort(keys %This) )\n        {\n        print( $f.' = '.($f eq 'peer' ? $p-&gt;{$f}-&gt;{name} : $p-&gt;{$f}).\"\\n\" );\n        }\n    print( \"\\n\" );\n    }\n\n# Determine which system we are, and which we should pair with by default\nfor my $p ( @PEERS )\n    {\n    my $THIS = $p;\n    my $PEER = $THIS-&gt;{peer};\n    if( ($THIS-&gt;{name} eq hostname) &amp;&amp; (lc($THIS-&gt;{os}) eq lc($^O)) )\n        {\n        print( $THIS-&gt;{name}.', '.$PEER-&gt;{name}.\"\\n\" );\n        last;\n        }\n    }\n</code></pre>\n"}], "owner": {"reputation": 29, "user_id": 7636685, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f6967f0a043c716b3d0fef3453cbbde0?s=128&d=identicon&r=PG", "display_name": "CharlesMacfarlane", "link": "https://stackoverflow.com/users/7636685/charlesmacfarlane"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 152, "favorite_count": 0, "accepted_answer_id": 51370925, "answer_count": 3, "score": -1, "last_activity_date": 1531780452, "creation_date": 1531660961, "last_edit_date": 1531682286, "question_id": 51348807, "link": "https://stackoverflow.com/questions/51348807/unable-to-fathom-perl-hash-references", "title": "Unable to fathom Perl hash references", "body": "<p>My Perl project can run on multiple systems, but I don't want them to run in isolation without knowing what other systems are doing. I need to keep their data files more or less in sync, which means merging their contents, so I need a data structure to contain details of each computer together with a reference to another computer which is its peer.</p>\n\n<p>It is this referencing that is causing me problems.</p>\n\n<p>If I simplify it to just two PCs</p>\n\n<pre><code>use strict;\nuse warnings;\n\nuse Sys::Hostname;\n\n# Peer computers\nmy $PC1 = {\n    name =&gt; 'PC1',\n    os   =&gt; 'Linux',\n    data =&gt; '/its/data/directory',\n    peer =&gt; 'PC2' #  But whas is really needed here is a reference to PC2's data structure below\n};\n\nmy $PC2 = {\n    name =&gt; 'PC2',\n    os   =&gt; 'MSWin32',\n    data =&gt; 'X:\\\\its\\\\data\\\\directory',\n    peer =&gt; 'PC1' #  But whas is really needed here is a reference to PC1's data structure above\n};\n\nmy $PEERS = [ $PC1, $PC2 ];\n\n# Some code to set up the peer fields, for example\nfor my $p ( @$PEERS ) {\n\n    my %Peer = %$p;\n\n    if ( $Peer{name} eq 'PC1' ) {\n        $Peer{peer} = $PC2;\n    }\n    else {\n        $Peer{peer} = $PC1;\n    }\n\n    %$p = %Peer;    # I was surprised to find this line is necessary, otherwise the changes are lost\n}\n\n# Determine which system we are, and which we should pair with by default\nfor my $p ( @$PEERS ) {\n\n    my %THIS = %$p;\n    my %PEER = $THIS{peer};\n\n    if ( ( $THIS{name} eq hostname ) &amp;&amp; ( $THIS{os} eq $^O ) ) {\n        print( $THIS{name}.', '.$PEER{name}.\"\\n\" );\n        last;\n    }\n}\n</code></pre>\n\n<p>This gives the following</p>\n\n<blockquote>\n  <p># perl test.pl<br>\n      Reference found where even-sized list expected at test.pl line 43.<br>\n      Reference found where even-sized list expected at test.pl line 43.</p>\n</blockquote>\n\n<p>How can I achieve setting a reference in the peer field which can be dereferenced later?</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1531656875, "post_id": 51348004, "comment_id": 89669094, "body": "<i>&quot;I need the path of where the script was called from&quot;</i> You shouldn&#39;t need to do this. Explain why you think it&#39;s necessary."}, {"owner": {"reputation": 525, "user_id": 3272110, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/3a30dbd0c0785ff9369805ebafc853dc?s=128&d=identicon&r=PG&f=1", "display_name": "Zippy1970", "link": "https://stackoverflow.com/users/3272110/zippy1970"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1531664795, "post_id": 51348004, "comment_id": 89671134, "body": "It&#39;s a script that dynamically generates an HTML page. It can be called from different location (different URLs but even from local command prompt). Depending on from where it&#39;s called, the script needs to make subtle changes to the generated page."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1531681664, "post_id": 51348004, "comment_id": 89675270, "body": "Then pass a parameter to the script as  normal."}], "answers": [{"comments": [{"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "reply_to_user": {"reputation": 525, "user_id": 3272110, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/3a30dbd0c0785ff9369805ebafc853dc?s=128&d=identicon&r=PG&f=1", "display_name": "Zippy1970", "link": "https://stackoverflow.com/users/3272110/zippy1970"}, "edited": false, "score": 2, "creation_date": 1531665199, "post_id": 51348454, "comment_id": 89671228, "body": "@Zippy1970 Strange. What system are you on? How do you run the script? If you run the script from a shell, what is the current directory of the shell when you run the script?"}, {"owner": {"reputation": 525, "user_id": 3272110, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/3a30dbd0c0785ff9369805ebafc853dc?s=128&d=identicon&r=PG&f=1", "display_name": "Zippy1970", "link": "https://stackoverflow.com/users/3272110/zippy1970"}, "edited": false, "score": 0, "creation_date": 1531682914, "post_id": 51348454, "comment_id": 89675570, "body": "It&#39;s running on an old Debian system. I&#39;m testing the script from a shell. When I do, the current directory is /scripts/linked and still it returns /scripts/original"}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "reply_to_user": {"reputation": 525, "user_id": 3272110, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/3a30dbd0c0785ff9369805ebafc853dc?s=128&d=identicon&r=PG&f=1", "display_name": "Zippy1970", "link": "https://stackoverflow.com/users/3272110/zippy1970"}, "edited": false, "score": 1, "creation_date": 1531683704, "post_id": 51348454, "comment_id": 89675758, "body": "Ok, I still think it should work. So in order to make progress in solving this issue, I think you should debug the source of the <code>FindBin</code> module. Try to download the source of <code>FindBin</code> from <a href=\"https://fastapi.metacpan.org/source/XSAWYERX/perl-5.28.0/lib/FindBin.pm\" rel=\"nofollow noreferrer\">here</a>. Then put that file in e.g. a temp directory, for example <code>&#47;tmp&#47;mylib&#47;FindBin.pm</code>. Then at the top of your script add <code>&#47;tmp&#47;mylib</code> to you Perl search path by using <code>use lib &#39;&#47;tmp&#47;mylib&#39;</code>. Now you can start debugging the module by adding debug print statements to <code>&#47;tmp&#47;mylib&#47;FindBin.pm</code> and ..."}], "tags": [], "owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "is_accepted": false, "score": 3, "last_activity_date": 1531659476, "last_edit_date": 1531659476, "creation_date": 1531658308, "answer_id": 51348454, "question_id": 51348004, "link": "https://stackoverflow.com/questions/51348004/perl-get-unresolved-path-of-symbolic-link/51348454#51348454", "title": "Perl: Get (unresolved) path of symbolic link", "body": "<p>You could use <code>Cwd::getcwd()</code> to get the unresolved path to script. But this has already been implemented in a more robust and general way in <a href=\"https://metacpan.org/pod/FindBin\" rel=\"nofollow noreferrer\"><code>FindBin</code></a>, so we do not have to reinvent the wheel:</p>\n\n<pre><code>use FindBin;\nprint '$Bin: ', $FindBin::Bin, \"\\n\";\nprint '$Script: ', $FindBin::Script, \"\\n\";\n</code></pre>\n\n<p><strong>Output</strong>:</p>\n\n<pre><code>$Bin: /scripts/linked\n$Script: ascript.pl\n</code></pre>\n\n<p>You check out the source of <code>FindBin</code> <a href=\"https://metacpan.org/source/XSAWYERX/perl-5.28.0/lib/FindBin.pm\" rel=\"nofollow noreferrer\">here</a>.</p>\n"}], "owner": {"reputation": 525, "user_id": 3272110, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/3a30dbd0c0785ff9369805ebafc853dc?s=128&d=identicon&r=PG&f=1", "display_name": "Zippy1970", "link": "https://stackoverflow.com/users/3272110/zippy1970"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 174, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1531659476, "creation_date": 1531654633, "question_id": 51348004, "link": "https://stackoverflow.com/questions/51348004/perl-get-unresolved-path-of-symbolic-link", "title": "Perl: Get (unresolved) path of symbolic link", "body": "<p>I have a perl script whose path is <strong>/scripts/original/ascript.pl</strong></p>\n\n<p>A symbolic link to this script also exists: <strong>/scripts/linked/ascript.pl</strong></p>\n\n<p>In ascript.pl, I need the path of where the script was called from (so either /scripts/original or /scripts/linked).</p>\n\n<p>abs_path() always returns the resolved location:</p>\n\n<pre><code>use strict;\nuse Cwd qw(abs_path);\n\nprint abs_path($0); # Always prints /scripts/original/ascript.pl\n</code></pre>\n\n<p>How can I get the full unresolved path?</p>\n"}, {"tags": ["perl", "filehandle"], "comments": [{"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 1, "creation_date": 1531633090, "post_id": 51344959, "comment_id": 89664265, "body": "Last time, I asked you to fix your code indentation yourself in the future. If you can&#39;t be bothered to post readable code, why should we make the effort to help you?"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 3, "creation_date": 1531633264, "post_id": 51344959, "comment_id": 89664303, "body": "<i>The argument I passed to subroutine is a scalar</i> In this code, you do not pass anything into a subroutine anywhere."}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 4, "creation_date": 1531634405, "post_id": 51344959, "comment_id": 89664495, "body": "Please use the <code>strict</code> and <code>warnings</code> pragmas on code you post here."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 2, "creation_date": 1531645672, "post_id": 51344959, "comment_id": 89666542, "body": "@seedof: I see you&#39;ve edited your code to add <code>use strict</code> and <code>use warnings</code>. Because you haven&#39;t made any other fixes, the <code>use strict</code> now means your code doesn&#39;t even compile. Please be more careful."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 1, "creation_date": 1531648655, "post_id": 51344959, "comment_id": 89667189, "body": "I also see that the same edit added an image of your input data. I will never understand why some people think it is useful to post an image of text. If I want to test code that I have written to help you solve your problem, then I need to retype your data. If you had just given us the text, I could have just pasted it into a test file. You seem to be doing all you can to prevent us from helping you :-/"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 2, "creation_date": 1531652064, "post_id": 51344959, "comment_id": 89667939, "body": "Your program doesn&#39;t even compile!"}], "answers": [{"tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 4, "last_activity_date": 1531654097, "last_edit_date": 1531654097, "creation_date": 1531634380, "answer_id": 51345687, "question_id": 51344959, "link": "https://stackoverflow.com/questions/51344959/perl-move-file-handle-in-main-and-subroutine/51345687#51345687", "title": "Perl,Move file handle in main and subroutine", "body": "<p>You have forgotten to tell us what the program is supposed to do, so it's very hard to be any help. There might be more information in your previous question, but we don't all read every question here and you don't even include a link to your previous question.</p>\n\n<p>The answer to your question is that you can use <a href=\"https://perldoc.pl/functions/seek\" rel=\"nofollow noreferrer\"><code>seek()</code></a> to move to an arbitrary position in a file. You might also find it useful to look at <a href=\"https://perldoc.pl/functions/tell\" rel=\"nofollow noreferrer\"><code>tell()</code></a> which can tell you where you currently are in a file.</p>\n\n<p>But I don't think that information will be particularly helpful to you as you seem rather confused about what you're trying to do. If you were to explain your task in a bit more detail, then I strongly suspect that we could help you (and I also suspect that help would largely involve rewriting your code from scratch). But until you give us details, all we can do is to point out some of the more obvious problems with your code.</p>\n\n<ul>\n<li>You should always include <code>use strict</code> and <code>use warnings</code> in your code.</li>\n<li>I don't think that <code>@ff = &lt;@ARGV&gt;</code> does what you think it does. I think you want <code>@ff = @ARGV</code> instead. And, even then, that feels like you're copying <code>@ARGV</code> pointlessly.</li>\n<li>Having an array (<code>@ff</code>) and a scalar (<code>$ff</code>) with the same name is going to confuse someone at some point. And, more generally, you need to put more effort into naming your variables clearly.</li>\n<li>Please use the three-argument version of <code>open()</code> along with lexical filehandles. You should also always check the return code from <code>open()</code> - <code>open my $fh, \"&lt;\", $ff or die \"Could not open $ff: $!\"</code>.</li>\n<li>Your lines like <code>@fswf=@fschuck=@fsxpos=@fsypos=@fsdev=@csnom=\"\"</code> aren't doing what you think they are doing. You end up with a lot of arrays each of which contain a single element. Better to just declare the arrays with <code>my</code> - Perl will create them empty (<code>my (@fswf, @fschuck, @fsxpos, ...)</code>).</li>\n<li>If you really need to skip eight lines when reading from your file then it's much clearer to write: <code>$a = &lt;F&gt; for 1 .. 8</code>.</li>\n<li>You are making heavy use of global variables. There's a good reason why this goes against software engineering best practices. It makes your code far more fragile than it needs to be.</li>\n</ul>\n\n<p>All in all, you seem to be guessing at a solution here, and that's never a good approach. As I said above, we'd like to help you, but without a lot more information that's going to be almost impossible.</p>\n\n<p><strong>Update:</strong> Looking at your code a bit more closely, I see that you are storing the data that you parse from the files in a number of arrays. Each array contains data from a single column of the input file and in order to get all of the data from a single row, you need to access each of these arrays using the same index value. This isn't a very good idea. Splitting linked data across different variables is a recipe for disaster. A far better idea would be to store each record in a hash (where the key would denote the data item that is stored) and to store references to all of these hashes in an array. This brings all of your data together in a single variable.</p>\n\n<p><strong>Updated update:</strong> I don't know enough about your data to be sure, but here's the kind of approach I would take. I've only parsed the data and then used <a href=\"https://metacpan.org/pod/Data::Dumper\" rel=\"nofollow noreferrer\">Data::Dumper</a> to display the parsed data structure. Producing better output is left as an exercise for the reader :-)</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\nuse feature 'say';\n\nuse Data::Dumper;\n\n@ARGV or die \"Usage: $0 file [file...]\\n\";\n\n# Define two list of keys for the different types\nmy %cols = (\n  II  =&gt; [qw(wf chuck xpos ypos dev)],\n  III =&gt; [qw(wf chuck xpos ypos nom)],\n);\n\nmy @data;     # To store the parsed data\nmy $cur_type; # Keep track of the current type of record\n\nwhile (&lt;&gt;) {\n  # Look for a record header and determine which type of \n  # record we're dealing with (I think 'II' or 'III').\n  if (/^F M STATISTICS (III?)$/) {\n    $cur_type = $1;\n    next;\n  }\n\n  # Skip lines that are just headers/footers\n  next if /\\+[-=]/;\n  # Skip lines that don't include data\n  next unless /\\d/;\n\n  chomp;\n\n  # Remove the start and end of the line\n  s/^\\|\\s+//;\n  s/\\s+\\|$//;\n\n  # Store the data in a hash with the correct keys \n  # for this type of record\n  my %rec;\n  @rec{@{$cols{$cur_type}}} = split /\\s+\\|\\s+/;\n\n  # Store a reference to our hash in @data\n  push @data, \\%rec;\n}\n\n# Dump the contents of @data\nsay Dumper \\@data;\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 8319907, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/229f429a223e51e38d17f5879acfca0a?s=128&d=identicon&r=PG&f=1", "display_name": "seedof", "link": "https://stackoverflow.com/users/8319907/seedof"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 106, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1531656248, "creation_date": 1531624739, "last_edit_date": 1592644375, "question_id": 51344959, "link": "https://stackoverflow.com/questions/51344959/perl-move-file-handle-in-main-and-subroutine", "title": "Perl,Move file handle in main and subroutine", "body": "<p>The propose of the script to grep some value from some data table in the ASCII files.</p>\n<p><img src=\"https://i.stack.imgur.com/Fn3IU.jpg\" alt=\"datatable\" /></p>\n<p>I modified the\n<a href=\"https://stackoverflow.com/questions/51323208/perl-multiple-match-string-in-multiple-files\">script which I posted yesterday</a>.\nNow it barely works. I wonder if it is the proper way to move a file handle in this way.</p>\n<p>The usage is still the same</p>\n<pre><code>myscript.pl targetfolder/*&gt; result.csv\n</code></pre>\n<p><code>F</code> is my file handle.</p>\n<p>The argument I passed to the subroutine is the scalar <code>$_</code>, which is used by the <code>if</code> condition. When I want to move downward in my subroutine <code>next if 1..4</code> will not work, so I repeat <code>$a = &lt;F&gt;;</code> a few times to achieve moving file handle downward.</p>\n<p>But I think this is not a proper way to move the same file handle both in my main code and my subroutine. I am not sure it will really go through every line. I need your advice.</p>\n<h3>myscript.pl</h3>\n<pre><code>#Report strip\nuse warnings;\nuse strict;\n\n##Print the title \nTfms2();\n\n##Print the title \nprint &quot;\\n&quot;;\n\n@ff = &lt;@ARGV&gt;;\n\nforeach $ff ( @ff ) {\n\n    open (F, $ff);\n\n    @fswf = @fschuck = @fsxpos = @fsypos = @fsdev = @csnom = &quot;&quot;; \n    @cswf = @cschuck = @csxpos = @csypos = @csnom = &quot;&quot;;    # is there an efficient way?\n\n    while (&lt;F&gt;) {\n        Mfms2();\n        Mfms3();\n    }\n\n    $r = 1;\n\n    while ( $r &lt;= $#fswf ) {      # because @fsws is the largest array\n        Cfms3();   \n        print &quot;\\n&quot;;\n        $r++;\n    }\n\n    close (F);\n}\n##==========================================================================================\n##Subs\n##==========================================================================================\n\n##FS II\nsub Tfms2 {\n    print &quot;FS_Wafer,FS_ChuckID,FS_pos_X,FS_pos_Y,FS_deviation,CS_Wafer,CS_ChuckID,CS_pos_X,CS_pos_Y,CS_NofWafer_Ident_Spot&quot;;\n}\n\n\nsub Mfms2 {\n\n    if ( /^F\\sM\\sSTATISTICS\\sII$/ ) {\n\n        $a = (&lt;F&gt;);\n        $a = (&lt;F&gt;);\n        $a = (&lt;F&gt;);\n        $a = (&lt;F&gt;);\n        $a = (&lt;F&gt;);\n        $a = (&lt;F&gt;);\n        $a = (&lt;F&gt;);\n        $a = (&lt;F&gt;);\n\n        $r = 1;\n\n        @b = &quot;&quot;;\n\n        while ( $a !~ /\\+\\-/ ) {\n            chomp $a;\n            @b = split / *\\| */, $a;\n\n            $fswf[$r]    = $b[1];\n            $fschuck[$r] = $b[2];\n            $fsxpos[$r]  = $b[3];\n            $fsypos[$r]  = $b[4];\n            $fsdev[$r]   = $b[5];\n\n            $r++;\n\n            $a = (&lt;F&gt;);\n            @b = &quot;&quot;;\n        }\n    }\n}\n\n\n##FS III\nsub Mfms3 {\n    if ( /^F\\sM\\sSTATISTICS\\sIII$/ ) {\n\n        $a = (&lt;F&gt;);\n        $a = (&lt;F&gt;);\n        $a = (&lt;F&gt;);\n        $a = (&lt;F&gt;);\n        $a = (&lt;F&gt;);\n        $a = (&lt;F&gt;);\n        $a = (&lt;F&gt;);\n        $a = (&lt;F&gt;);\n\n        $r = 1;\n\n        @b = &quot;&quot;;\n\n        while ( $a !~ /\\+\\-/ ) {\n            chomp $a;\n            @b = split / *\\| */, $a;\n\n            $cswf[$r]    = $b[1];\n            $cschuck[$r] = $b[2];\n            $csxpos[$r]  = $b[3];\n            $csypos[$r]  = $b[4];\n            $csnom[$r]   = $b[5];\n\n            $r++;\n\n            $a = (&lt;F&gt;);\n\n            @b = &quot;&quot;;\n        }\n    }\n}\n\n\nsub Cfms3 {\n    print &quot;$fswf[$r],$fschuck[$r],$fsxpos[$r],$fsypos[$r],$fsdev[$r],&quot;;\n    print &quot;$cswf[$r],$cschuck[$r],$csxpos[$r],$csypos[$r],$csnom[$r],&quot;;\n}\n</code></pre>\n"}, {"tags": ["java", "regex", "perl", "regex-lookarounds"], "comments": [{"owner": {"reputation": 481636, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1531597733, "post_id": 51342824, "comment_id": 89659103, "body": "Why not use a regex like <code>\\b\\p{Ll}</code> to only match the first lowercase letter in words? Or do you plan to <code>.toLowerCase()</code> the rest of the word?"}], "answers": [{"tags": [], "owner": {"reputation": 481636, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "is_accepted": true, "score": 2, "last_activity_date": 1531597929, "creation_date": 1531597929, "answer_id": 51342868, "question_id": 51342824, "link": "https://stackoverflow.com/questions/51342824/replace-grouped-matches-globally-using-java-regex/51342868#51342868", "title": "Replace grouped matches globally using Java RegEx", "body": "<p>To match the first lowercase letter of words (in order not to match those that are already uppercase) you may use <code>\\b\\p{Ll}</code> regex and use <code>Matcher#appendReplacement()</code> method to manipulate the match:</p>\n\n<pre><code>String INPUT=\"united states corp\";\nPattern p = Pattern.compile(\"\\\\b\\\\p{Ll}\");\nStringBuffer result = new StringBuffer();\nMatcher m = p.matcher(INPUT);\nwhile (m.find()) {\n    m.appendReplacement(result, m.group().toUpperCase());\n}\nm.appendTail(result);\nSystem.out.println(result.toString()); // =&gt; United States Corp\n</code></pre>\n\n<p>See the <a href=\"https://ideone.com/LVedpK\" rel=\"nofollow noreferrer\">Java demo</a>.</p>\n\n<p>As per <a href=\"https://docs.oracle.com/javase/7/docs/api/java/util/regex/Matcher.html\" rel=\"nofollow noreferrer\">Java <em>Matcher</em> class docs</a>:</p>\n\n<blockquote>\n  <p>The <a href=\"https://docs.oracle.com/javase/7/docs/api/java/util/regex/Matcher.html#appendReplacement(java.lang.StringBuffer,%20java.lang.String)\" rel=\"nofollow noreferrer\">appendReplacement</a> and <a href=\"https://docs.oracle.com/javase/7/docs/api/java/util/regex/Matcher.html#appendTail(java.lang.StringBuffer)\" rel=\"nofollow noreferrer\">appendTail</a> methods can be used in tandem in order to collect the result into an existing string buffer</p>\n</blockquote>\n\n<p>So, if you use your current regex, <code>\"\\\\b(.)(.*?)\\\\b\"</code>, you will need to replace the <code>while (m.find())</code> body with</p>\n\n<pre><code>m.appendReplacement(result, m.group(1).toUpperCase() + m.group(2));\n</code></pre>\n"}], "owner": {"reputation": 63, "user_id": 8743332, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a73688fadfa164a75c527e5e83cbef1d?s=128&d=identicon&r=PG&f=1", "display_name": "Ambr", "link": "https://stackoverflow.com/users/8743332/ambr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 187, "favorite_count": 1, "accepted_answer_id": 51342868, "answer_count": 1, "score": 1, "last_activity_date": 1531597932, "creation_date": 1531597476, "last_edit_date": 1531597932, "question_id": 51342824, "link": "https://stackoverflow.com/questions/51342824/replace-grouped-matches-globally-using-java-regex", "title": "Replace grouped matches globally using Java RegEx", "body": "<p>I have following PERL one liner. This perl RegEx simply upcase first letters of all the words of a given sentence.</p>\n\n<pre><code>$val =~ s/\\b(.)(.*?)\\b/uc($1).$2/eg;\n</code></pre>\n\n<p>Input:</p>\n\n<pre><code>\"united states corp\"\n</code></pre>\n\n<p>Output</p>\n\n<pre><code>\"United States Corp\"\n</code></pre>\n\n<p>However, I need to achieve same functionality in JAVA. I am doing following.</p>\n\n<pre><code>String INPUT=\"united states corp\"\nPattern p = Pattern.compile(\"\\\\b(.)(.*?)\\\\b\");\nMatcher m = p.matcher(INPUT);\nif (m.find()) {\n    INPUT = m.replaceAll(m.group(1).toUpperCase() + m.group(2));\n}\n</code></pre>\n\n<p>Input:</p>\n\n<pre><code>\"United States Corp\".\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>\"UnitedUnitedUnitedUnitedUnited\"\n</code></pre>\n\n<p>Thanks.</p>\n"}, {"tags": ["perl", "mojolicious"], "comments": [{"owner": {"reputation": 8974, "user_id": 205207, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/1OH7W.jpg?s=128&g=1", "display_name": "i alarmed alien", "link": "https://stackoverflow.com/users/205207/i-alarmed-alien"}, "edited": false, "score": 0, "creation_date": 1531582390, "post_id": 51340610, "comment_id": 89655291, "body": "Are you wanting to find out which is more efficient? You&#39;ve practically written out method 2 already - just need to add in the filter code."}, {"owner": {"reputation": 167, "user_id": 10034680, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4fac2f173884d186d88e7f7c8b951f5e?s=128&d=identicon&r=PG&f=1", "display_name": "Rattiku", "link": "https://stackoverflow.com/users/10034680/rattiku"}, "reply_to_user": {"reputation": 8974, "user_id": 205207, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/1OH7W.jpg?s=128&g=1", "display_name": "i alarmed alien", "link": "https://stackoverflow.com/users/205207/i-alarmed-alien"}, "edited": false, "score": 0, "creation_date": 1531582486, "post_id": 51340610, "comment_id": 89655314, "body": "@ialarmedalien yes. and how to add a filter code?"}, {"owner": {"reputation": 8974, "user_id": 205207, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/1OH7W.jpg?s=128&g=1", "display_name": "i alarmed alien", "link": "https://stackoverflow.com/users/205207/i-alarmed-alien"}, "edited": false, "score": 0, "creation_date": 1531583018, "post_id": 51340610, "comment_id": 89655439, "body": "Filtering code is just something like <code>if ($link =~ &#47;whatever&#47;)</code>"}], "answers": [{"tags": [], "owner": {"reputation": 8974, "user_id": 205207, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/1OH7W.jpg?s=128&g=1", "display_name": "i alarmed alien", "link": "https://stackoverflow.com/users/205207/i-alarmed-alien"}, "is_accepted": true, "score": 2, "last_activity_date": 1531585904, "last_edit_date": 1531585904, "creation_date": 1531585343, "answer_id": 51341266, "question_id": 51340610, "link": "https://stackoverflow.com/questions/51340610/find-links-in-mojo-that-start-with-certain-url/51341266#51341266", "title": "Find links in Mojo that start with certain url", "body": "<p>You can use <a href=\"https://mojolicious.org/perldoc/Mojo/DOM/CSS\" rel=\"nofollow noreferrer\">css selectors</a> to narrow down your search to specific URLs. In particular, you'll want to search for links with the attribute <code>href</code> ( <code>a[href]</code>) where the value of <code>href</code> starts with a certain string (<code>a[href^=\"...\"]</code>). To search for several different URLs, just use a comma-separated list of selectors in <code>$dom-&gt;find('...')</code>.</p>\n\n<p>Here is an example that extracts links beginning with three different strings (I used URLs from this web page). You can adapt it to your own case:</p>\n\n<pre><code>my $dom = Mojo::DOM-&gt;new($page);\n\nfor my $url ( $dom-&gt;find('a[href^=\"https://stackoverflow.com\"], a[href^=\"https://stackexchange.com\"], a[href^=\"https://area51\"]')-&gt;each ) {\n    say $url-&gt;attr('href'); # or do whatever you want to here\n}\n</code></pre>\n\n<p>If you want to use your suggested method (2), fetch all links and filter them yourself, you could do so like this:</p>\n\n<pre><code>for my $url ( $dom-&gt;find('a[href^=\"https://\"]')-&gt;each ) {\n\n    # substitute in your own regex here\n    if ( $url-&gt;attr('href') =~ /(stackoverflow|area51|codereview)/ ) {\n       say $url-&gt;attr('href'); # or whatever\n    }\n}\n</code></pre>\n\n<p>It's unlikely that there will be much difference in efficiency between the two methods, and it's likely that you'd spend more time benchmarking them than you would gain by using whichever of the two is quicker.</p>\n"}], "owner": {"reputation": 167, "user_id": 10034680, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4fac2f173884d186d88e7f7c8b951f5e?s=128&d=identicon&r=PG&f=1", "display_name": "Rattiku", "link": "https://stackoverflow.com/users/10034680/rattiku"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 87, "favorite_count": 0, "accepted_answer_id": 51341266, "answer_count": 1, "score": 0, "last_activity_date": 1531585904, "creation_date": 1531580350, "question_id": 51340610, "link": "https://stackoverflow.com/questions/51340610/find-links-in-mojo-that-start-with-certain-url", "title": "Find links in Mojo that start with certain url", "body": "<p>I have Mojo::DOM. </p>\n\n<pre><code>  my $doc = Mojo::DOM-&gt;new(decode_utf8($html_page_content);\n</code></pre>\n\n<p>I want either of 2 things:</p>\n\n<p>1) find all \"a\" tags that <strong>start</strong> with \"/my_link\", \"/my_link2\" or \"/my_link3\"</p>\n\n<p>or</p>\n\n<p>2) find all \"a\" tags, iterate over them and check whether a link starts with \"/my_link\", \"/my_link2\" or \"/my_link3\"</p>\n\n<p>Whichever is more effective, if there's a big difference between them at all.</p>\n\n<p>How can I do that?</p>\n\n<p>I know how to find all the links:</p>\n\n<pre><code>  $doc-&gt;find('a')-&gt;each(sub {\n    my $link = Mojo::URL-&gt;new($_);\n    # ....\n</code></pre>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 5900, "user_id": 931154, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/bTrZd.jpg?s=128&g=1", "display_name": "Gregory Nisbet", "link": "https://stackoverflow.com/users/931154/gregory-nisbet"}, "edited": false, "score": 1, "creation_date": 1531527952, "post_id": 51334200, "comment_id": 89643753, "body": "actually, <code>open(STDOUT, &#39;&gt;&amp;&#39;, $sink)</code> does the trick. It was not initially obvious that <code>&gt;&amp;</code> was usable as a &quot;mode&quot; here."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1531528118, "post_id": 51334200, "comment_id": 89643774, "body": "See <code>perldoc -f open</code>: &quot;<i>If you use the three-argument form, then you can pass either a number, the name of a filehandle, or the normal &quot;reference to a glob&quot;.</i>&quot; and the following examples."}, {"owner": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "edited": false, "score": 4, "creation_date": 1531531526, "post_id": 51334200, "comment_id": 89644235, "body": "Might <a href=\"https://metacpan.org/pod/IPC::Run\" rel=\"nofollow noreferrer\">IPC::Run</a> so what you need instead?"}], "answers": [{"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 4, "last_activity_date": 1531538575, "last_edit_date": 1531538575, "creation_date": 1531537406, "answer_id": 51334889, "question_id": 51334200, "link": "https://stackoverflow.com/questions/51334200/perl-redirect-stdout-to-lexical-filehandle/51334889#51334889", "title": "perl redirect stdout to lexical filehandle", "body": "<pre><code>sub get_reader {\n   my ($cmd) = @_;\n\n   open(my $pipe, '-|', @$cmd);\n\n   return sub {\n      return undef if !$pipe;\n\n      my $line = &lt;$pipe&gt;;\n      if (!defined($line)) {\n         close($pipe);\n         $pipe = undef;\n         return undef;\n      }\n\n      chomp($line);\n      return $line;\n   };\n}\n</code></pre>\n\n<p>If that's not good enough (e.g. because you also need to redirect the child's STDIN or STDERR), you can use IPC::Run instead.</p>\n\n<pre><code>use IPC::Run qw( start );\n\nsub get_reader {\n   my ($cmd) = @_;\n\n   my $buf = '';\n   my $h = start($cmd, '&gt;', \\$buf);\n\n   return sub {\n      return undef if !$h;\n\n      while (1) {\n         if ($buf =~ s/^([^\\n]*)\\n//) {\n            return $1;\n         }\n\n         if (!$h-&gt;pump())) {\n            $h-&gt;finish();\n            $h = undef;\n            return substr($buf, 0, length($buf), '') if length($buf);\n            return undef;\n         }\n      }\n   };\n}\n</code></pre>\n\n<p>Either way, you can now do</p>\n\n<pre><code>my $i = get_reader(['prog', 'arg', 'arg']);\nwhile (defined( my $line = $i-&gt;() )) {\n   print \"$line\\n\";\n}\n</code></pre>\n\n<p>Either way, error handling left to you.</p>\n"}], "owner": {"reputation": 5900, "user_id": 931154, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/bTrZd.jpg?s=128&g=1", "display_name": "Gregory Nisbet", "link": "https://stackoverflow.com/users/931154/gregory-nisbet"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 208, "favorite_count": 1, "accepted_answer_id": 51334889, "answer_count": 1, "score": 1, "last_activity_date": 1531538575, "creation_date": 1531527644, "question_id": 51334200, "link": "https://stackoverflow.com/questions/51334200/perl-redirect-stdout-to-lexical-filehandle", "title": "perl redirect stdout to lexical filehandle", "body": "<p>I'm trying to write a helper function that runs a perl function in another process and returns a closure that produces a line of output at a time when called.</p>\n\n<p>I figured out a way of doing this using <code>pipe</code> that mixes old and new-style filehandles. I used an old-style one for the sink in order to use the <code>open(STDOUT, \"&gt;&amp;thing\")</code> syntax and a new-style one for the source since it needs to be captured by a closure and I didn't want to burden the caller with providing a filehandle.</p>\n\n<p>Is there a way of using a new-style filehandle in a construction with the same meaning as <code>open(STDOUT, \"&gt;&amp;thing\")</code>?</p>\n\n<pre><code>#!/usr/bin/env perl\n\n# pipe.pl\n# use pipe() to create a pair of fd's.\n# write to one and read from the other.\n#\n# The source needs to be captured by the closure and can't be\n# destructed at the end of get_reader(), so it has to be lexical.\n#\n# We need to be able to redirect stdout to sink in such a way that\n# we actually dup the file descriptor (so shelling out works as intended).\n# open(STDOUT, \"&gt;&amp;FILEHANDLE\") achieves this but appears to require an\n# old-style filehandle.\n\nuse strict;\nuse warnings;\n\nsub get_reader {\n    local *SINK;\n    my $source;\n    pipe($source, SINK) or die \"can't open pipe!\";\n    my $cpid = fork();\n    if ($cpid == -1) {\n        die 'failed to fork';\n    }\n    elsif ($cpid == 0) {\n        open STDOUT, \"&gt;&amp;SINK\" or die \"can't open sink\";\n        system(\"echo -n hi\");\n        exit;\n    }\n    else {\n        return sub {\n            my $line = readline($source);\n            printf \"from child (%s)\\n\", $line;\n            exit;\n        }\n    }\n}\n\nsub main {\n    my $reader = get_reader();\n    $reader-&gt;();\n}\n\nmain();\n</code></pre>\n\n<p>When run, this produces</p>\n\n<pre><code>from child (hi)\n</code></pre>\n\n<p>as expected.</p>\n"}, {"tags": ["perl", "dependency-management", "cpan"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1531561574, "post_id": 51333460, "comment_id": 89649116, "body": "Do you have a question?"}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 1, "creation_date": 1531562755, "post_id": 51333460, "comment_id": 89649384, "body": "I don&#39;t know if it is relevant for your case, but there is a <a href=\"https://github.com/travis-perl/helpers\" rel=\"nofollow noreferrer\">perl module Travis-CI helper script</a> that will work with any of <code>Makefile.PL</code>, <code>Build.PL</code>, or <code>Dist::Zilla</code>"}, {"owner": {"reputation": 13121, "user_id": 805266, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/eabce8cd59f72d8f9e7db06a0343bdb1?s=128&d=identicon&r=PG", "display_name": "nponeccop", "link": "https://stackoverflow.com/users/805266/nponeccop"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1531590094, "post_id": 51333460, "comment_id": 89657190, "body": "@Borodin In case it&#39;s not obvious from &quot;the problem&quot; section, I added an explicit question in the end."}, {"owner": {"reputation": 13121, "user_id": 805266, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/eabce8cd59f72d8f9e7db06a0343bdb1?s=128&d=identicon&r=PG", "display_name": "nponeccop", "link": "https://stackoverflow.com/users/805266/nponeccop"}, "reply_to_user": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1531590254, "post_id": 51333460, "comment_id": 89657225, "body": "@H&#229;konH&#230;gland The script is specific to both PerlBrew and Travis, so it isn&#39;t helpful to the question. However, I can still use some ideas from it elsewhere. Thanks!"}], "answers": [{"tags": [], "owner": {"reputation": 13121, "user_id": 805266, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/eabce8cd59f72d8f9e7db06a0343bdb1?s=128&d=identicon&r=PG", "display_name": "nponeccop", "link": "https://stackoverflow.com/users/805266/nponeccop"}, "is_accepted": false, "score": 0, "last_activity_date": 1531757473, "creation_date": 1531757473, "answer_id": 51366054, "question_id": 51333460, "link": "https://stackoverflow.com/questions/51333460/is-there-a-cross-platform-way-to-build-a-distribution/51366054#51366054", "title": "Is there a cross-platform way to build a distribution?", "body": "<p>I managed to find a solution myself.</p>\n\n<ol>\n<li><p>CPANPLUS comes with another tool besides <code>cpanp</code> named <code>cpan2dist</code>. <code>cpan2dist --archive Foo-Bar-6.66.tar.gz</code> works as intended - it builds distributions of dependencies and the current tarball, and autodetects the necessary build tool the way <code>cpanp</code> does.</p></li>\n<li><p>To determine the real <code>make</code> you can use <code>CPANPLUS::Config-&gt;new-&gt;get_prog('make')</code>. It again uses the same autodetection logic as <code>CPANPLUS</code> so it's pretty robust.</p></li>\n</ol>\n"}], "owner": {"reputation": 13121, "user_id": 805266, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/eabce8cd59f72d8f9e7db06a0343bdb1?s=128&d=identicon&r=PG", "display_name": "nponeccop", "link": "https://stackoverflow.com/users/805266/nponeccop"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 78, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1531757473, "creation_date": 1531520230, "last_edit_date": 1531590005, "question_id": 51333460, "link": "https://stackoverflow.com/questions/51333460/is-there-a-cross-platform-way-to-build-a-distribution", "title": "Is there a cross-platform way to build a distribution?", "body": "<p>I'm writing a CI script to build a Perl library located at GitHub.</p>\n\n<p>Now I do it this way:</p>\n\n<pre><code>cpanp i Module::Install # and other configure dependencies  \nperl Makefile.PL\nmake dist\ncpanp i Foo-Bar-6.66.tar.gz\n</code></pre>\n\n<ul>\n<li>I want to create a PAR packages for all the dependencies I build. That's why I use cpanp. </li>\n<li>Unlike <code>cpanm .</code>, <code>cpanp i .</code> is buggy and uses the name of the directory to name the distribution, which is incorrect. That's why I use this make dist step.</li>\n</ul>\n\n<p>I can use something else as long as my PARs are built, of course. There is <a href=\"https://metacpan.org/pod/PAR::Dist#blib_to_par\" rel=\"nofollow noreferrer\">https://metacpan.org/pod/PAR::Dist#blib_to_par</a> function which can in principle be called during any other build process.</p>\n\n<p>The problem with my current approach is that:</p>\n\n<ul>\n<li>the list of configure dependencies is maintained manually. I'd like to use some tool which does it automatically</li>\n<li>on Windows <code>make</code> may be called <code>gmake</code> or <code>dmake</code> depending on perl version. I want to use an existing autodetection logic instead of rolling my own</li>\n<li>Finally, I'd like autodetection of Makefile.PL vs Build.PL so I can copy-paste the code for different distributions</li>\n</ul>\n\n<p>My question is: Is there any way to build local sources of a distribution either by using cpanp (this way would solve my problem) or in any other way which works for different versions of Windows Perl and builds PAR distributions of dependencies?</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 3, "creation_date": 1531510963, "post_id": 51331859, "comment_id": 89639348, "body": "<code>use My_Util.pm;</code> is a syntax error."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 1, "creation_date": 1531511048, "post_id": 51331859, "comment_id": 89639375, "body": "Your <code>MyUtil.pm</code> file is missing a <code>package</code> declaration and a return value."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1531511450, "post_id": 51331859, "comment_id": 89639520, "body": "Is your <code>My_Util.pm</code>( meant to be) a class, or not?  The problem is that the code you show can&#39;t run so it&#39;s not clear what&#39;s really happening."}, {"owner": {"reputation": 850, "user_id": 3508142, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XVORk.png?s=128&g=1", "display_name": "ErikusMaximus", "link": "https://stackoverflow.com/users/3508142/erikusmaximus"}, "edited": false, "score": 0, "creation_date": 1531515231, "post_id": 51331859, "comment_id": 89640826, "body": "Fixed the syntax errors (package declaration, import, and return code).  <code>My_Util.pm</code> is intended to be a collection of helpers."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1531515842, "post_id": 51331859, "comment_id": 89640989, "body": "If that package isn&#39;t meant to be(come) a class I&#39;d suggest to <i>not</i> use the <code>-&gt;</code> in order to call subs from it, but rather <code>My_Util::func</code> (or export the name <code>func</code> in the module and import it in the caller if you wish to be able to use the unqualified name)."}], "answers": [{"comments": [{"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 2, "creation_date": 1531548324, "post_id": 51331860, "comment_id": 89646476, "body": "There&#39;s no reference being passed in <code>My_Util-&gt;get_header()</code>. The first parameter the method receives is a string containing &quot;My_Util&quot;. That would usually be stored in a variable called <code>$class</code>, not <code>$self</code>."}], "tags": [], "owner": {"reputation": 850, "user_id": 3508142, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XVORk.png?s=128&g=1", "display_name": "ErikusMaximus", "link": "https://stackoverflow.com/users/3508142/erikusmaximus"}, "is_accepted": false, "score": 0, "last_activity_date": 1531511405, "last_edit_date": 1531511405, "creation_date": 1531510865, "answer_id": 51331860, "question_id": 51331859, "link": "https://stackoverflow.com/questions/51331859/module-reference-passed-in-call-to-module-method/51331860#51331860", "title": "Module reference passed in call to module method", "body": "<p>The problem is that the call to <code>My_Util-&gt;get_header()</code> implicitly passes a reference to <code>My_Util</code> to <code>get_header()</code>, which isn't accounted for.</p>\n\n<pre><code>sub get_header\n{\n    my $self = shift;\n    my $msg = shift;\n    return \" ===== $msg ===== \";\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "is_accepted": true, "score": 10, "last_activity_date": 1531511221, "creation_date": 1531511221, "answer_id": 51331938, "question_id": 51331859, "link": "https://stackoverflow.com/questions/51331859/module-reference-passed-in-call-to-module-method/51331938#51331938", "title": "Module reference passed in call to module method", "body": "<p>The <code>-&gt;get_header</code> syntax is that for a method call. A method call passes the invocant (i.e. the object or class name) as an implicit first argument.</p>\n\n<p>So, assuming we have</p>\n\n<pre><code>package MyUtil;\nsub foo {}\n</code></pre>\n\n<p>somewhere, the call</p>\n\n<pre><code>MyUtil-&gt;foo(1, 2, 3)\n</code></pre>\n\n<p>ends up doing <code>MyUtil::foo(\"MyUtil\", 1, 2, 3)</code>.</p>\n\n<p>Of course you can call</p>\n\n<pre><code>MyUtil::foo(1, 2, 3)\n</code></pre>\n\n<p>directly without passing any implicit arguments.</p>\n\n<p>See also <a href=\"https://perldoc.pl/perlobj#Method-Invocation\" rel=\"noreferrer\"><code>perldoc perlobj</code></a>.</p>\n\n<p>Another difference is that the <code>::</code> version does a normal function call, whereas the <code>-&gt;</code> version does a method call, which also follows inheritance, i.e. with <code>MyUtil-&gt;foo</code> there need not be a <code>MyUtil::foo</code> sub at all if <code>MyUtil</code> inherits from a class that provides a <code>foo</code> method.</p>\n"}, {"tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 3, "last_activity_date": 1531548874, "creation_date": 1531548874, "answer_id": 51335808, "question_id": 51331859, "link": "https://stackoverflow.com/questions/51331859/module-reference-passed-in-call-to-module-method/51335808#51335808", "title": "Module reference passed in call to module method", "body": "<p>The problem is that with the syntax <code>MyUtil-&gt;get_header()</code>, you are calling <code>get_header()</code> as a class method. That call gets converted to <code>MyUtil::get_handler('MyUtil', 'foo')</code> and you need to take account of that extra argument that is passed to your subroutine.</p>\n\n<pre><code>sub get_header {\n  my $class = shift; # Get class name\n  my ($msg) = @_;    # Get message\n\n  return \" ===== $msg ===== \";\n}\n</code></pre>\n\n<p>If you don't intend for <code>get_header()</code> to be a class method, then don't call it as a class method. If you call it as <code>MyUtil::get_header('foo')</code>, then your existing module code will work fine.</p>\n\n<p>Alternatively, you could \"export\" your subroutine from your module into the calling package. You can do this by adding the following two lines into your package:</p>\n\n<pre><code>use Exporter;\nour @EXPORT = qw[get_header];\n</code></pre>\n\n<p>Then, from your main program, you will be able to call the exported subroutine without mentioning its package name at all.</p>\n\n<pre><code>get_header('foo');\n</code></pre>\n"}], "owner": {"reputation": 850, "user_id": 3508142, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XVORk.png?s=128&g=1", "display_name": "ErikusMaximus", "link": "https://stackoverflow.com/users/3508142/erikusmaximus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 83, "favorite_count": 0, "accepted_answer_id": 51331938, "answer_count": 3, "score": 3, "last_activity_date": 1531548874, "creation_date": 1531510865, "last_edit_date": 1531515065, "question_id": 51331859, "link": "https://stackoverflow.com/questions/51331859/module-reference-passed-in-call-to-module-method", "title": "Module reference passed in call to module method", "body": "<p>I have a perl script called <code>fetch.pl</code> and a module called <code>My_Util.pm</code>.</p>\n\n<p><strong>My_Util.pm</strong></p>\n\n<pre><code>package My_Util;\n\nsub get_header\n{\n    my $msg = shift;\n    return \" ===== $msg ===== \";\n}\n\n1; # Perl modules must return a true value when loaded.\n</code></pre>\n\n<p><strong>fetch.pl</strong></p>\n\n<pre><code>use My_Util;\n\nprint_and_log(My_Util-&gt;get_header(\"foo\"));\nprint_and_log(\"blah\");\n\nsub print_and_log\n{\n    my $message = shift;\n    print(\"$message\\n\");\n}\n</code></pre>\n\n<p><strong>Expected Output:</strong></p>\n\n<pre><code>===== foo =====\nblah\n</code></pre>\n\n<p><strong>Actual Output:</strong></p>\n\n<pre><code>===== My_Util =====\nblah\n</code></pre>\n\n<p>Edit: Fixed syntax errors</p>\n"}, {"tags": ["regex", "perl", "permutation"], "answers": [{"tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 4, "last_activity_date": 1531493354, "creation_date": 1531493354, "answer_id": 51327791, "question_id": 51327214, "link": "https://stackoverflow.com/questions/51327214/find-any-permutation-of-a-set-using-perls-regex/51327791#51327791", "title": "Find any permutation of a set using Perl&#39;s RegEx", "body": "<p>Regexes are almost certainly the wrong tool here. You want something that deals with permutations of an input list.</p>\n\n<p><a href=\"http://blogs.perl.org/users/dana_jacobsen/2015/02/short-survey-of-modules-for-combinations-and-permutations.html\" rel=\"nofollow noreferrer\">This blog post</a> gives a useful overview of Perl modules that deal with permutations and combinations. Sounds to me like <a href=\"https://metacpan.org/pod/Algorithm::Combinatorics\" rel=\"nofollow noreferrer\">Algorithm::Combinatorics</a> would be a good place to start. Something like this, perhaps:</p>\n\n<pre><code>use Algorithm::Combinatorics;\n\nmy @input = qw[1 2 3 4 5 6 8 9 10];\n\nmy @perms = permutations(\\@input);\n</code></pre>\n\n<p>You then need some way to compare the valid permutations with the sets you want to test. I'd consider constructing a string representation of the sets (by joining them with a known delimiter) and doing a simple string comparison.</p>\n\n<pre><code>my @perm_strs = map { join ':' } @perms;\n\nmy @test = qw[2 4 3 1 10 5 9 8 6];\nmy $test_str = join ':', @test;\n\nmy $match = 0;\nfor (@perm_strs) {\n  if ($test_str eq $_) {\n    $match = 1;\n    last;\n  }\n}\n</code></pre>\n\n<p>The success of the match is now in <code>$match</code>.</p>\n"}, {"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user557597"}, "is_accepted": true, "score": 2, "last_activity_date": 1531506436, "last_edit_date": 1531506436, "creation_date": 1531502855, "answer_id": 51330139, "question_id": 51327214, "link": "https://stackoverflow.com/questions/51327214/find-any-permutation-of-a-set-using-perls-regex/51330139#51330139", "title": "Find any permutation of a set using Perl&#39;s RegEx", "body": "<p>This regex does that.<br>\nHere 10 slots are allocated, but you can add as many as you want ( a hundred ? ).   </p>\n\n<p>It doesn't mean you have to match 10 unique numbers in a set,<br>\nYou can match anything less than or equal  to 10 (example <code>{5}</code>),<br>\nor even a range like <code>{3,7}</code>  </p>\n\n<p>The slots will be filled sequentially starting from 1.<br>\nSo, you just have to sit in a loop from 1 - N, seeing if it is defined.  </p>\n\n<p>If you're looking for speed, this is the demon you want !</p>\n\n<p><code>/\\{(?&gt;(?&gt;(?(1)(?!))((?&amp;GetNum))|(?(2)(?!))((?&amp;GetNum))|(?(3)(?!))((?&amp;GetNum))|(?(4)(?!))((?&amp;GetNum))|(?(5)(?!))((?&amp;GetNum))|(?(6)(?!))((?&amp;GetNum))|(?(7)(?!))((?&amp;GetNum))|(?(8)(?!))((?&amp;GetNum))|(?(9)(?!))((?&amp;GetNum))|(?(10)(?!))((?&amp;GetNum)))(?:,(?!\\})|(?=\\}))){3,7}\\}(?(DEFINE)(?&lt;GetNum&gt;(?!(?:\\g{1}|\\g{2}|\\g{3}|\\g{4}|\\g{5}|\\g{6}|\\g{7}|\\g{8}|\\g{9}|\\g{10})\\b)\\d+))/</code></p>\n\n<p><a href=\"https://regex101.com/r/pPwPTe/1\" rel=\"nofollow noreferrer\">https://regex101.com/r/pPwPTe/1</a></p>\n\n<p>Readable regex  </p>\n\n<pre><code> # Unique numbers in set, 10 slots\n \\{\n (?&gt;                    # Atomic, no backtracking allowed\n      (?&gt;               # ditto\n            (?(1) (?!) )  ( (?&amp;GetNum) )        # (1),  Slot 1\n          | (?(2) (?!) )  ( (?&amp;GetNum) )        # (2),  Slot 2\n          | (?(3) (?!) )  ( (?&amp;GetNum) )        # (3),  Slot 3\n          | (?(4) (?!) )  ( (?&amp;GetNum) )        # (4),  Slot 4\n          | (?(5) (?!) )  ( (?&amp;GetNum) )        # (5),  Slot 5\n          | (?(6) (?!) )  ( (?&amp;GetNum) )        # (6),  Slot 6\n          | (?(7) (?!) )  ( (?&amp;GetNum) )        # (7),  Slot 7\n          | (?(8) (?!) )  ( (?&amp;GetNum) )        # (8),  Slot 8\n          | (?(9) (?!) )  ( (?&amp;GetNum) )        # (9),  Slot 9\n          | (?(10) (?!) ) ( (?&amp;GetNum) )        # (10), Slot 10\n      )\n      (?: , (?! \\} ) | (?= \\} ) )\n ){3,7}                   # Set range, example: 3 to 7 unique numbers in set\n \\}\n\n (?(DEFINE)\n      (?&lt;GetNum&gt;       # (4) Get a new number, must not be seen before\n           (?! (?: \\g{1}|\\g{2}|\\g{3}|\\g{4}|\\g{5}|\\g{6}|\\g{7}|\\g{8}|\\g{9}|\\g{10} ) \\b )       \n           \\d+\n      )\n )\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 120535, "user_id": 123109, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/157c96de3d125abc1c363ff25c20dfaf?s=128&d=identicon&r=PG", "display_name": "Greg Bacon", "link": "https://stackoverflow.com/users/123109/greg-bacon"}, "is_accepted": false, "score": 1, "last_activity_date": 1531511645, "creation_date": 1531511645, "answer_id": 51332017, "question_id": 51327214, "link": "https://stackoverflow.com/questions/51327214/find-any-permutation-of-a-set-using-perls-regex/51332017#51332017", "title": "Find any permutation of a set using Perl&#39;s RegEx", "body": "<p>Given front matter and test cases of</p>\n\n<pre><code>#! /usr/bin/env perl\n\nuse strict;\nuse warnings;\n\nmy @tests = (\n  \"{}\",\n  \"{1,1}\",\n  \"{1,2,3,4,5,6,8,9,10}\",\n  \"{1,1,2,3,4,5,6,8,9,10}\",\n  \"{1,2,3,4,5,6,7,8,9,10}\",\n  \"{10,9,8,7,6,5,4,3,2,1}\",\n  \"{10,9,8,6,5,4,3,2,1}\",\n  \"{10,9,8,6,5,4,3,2,1\",\n  \"{10,9,8,6,5,4,3,2,1,1}\",\n  \"{2,4,6,8,10,9,5,3,1}\",\n);\n</code></pre>\n\n<p>you have at least three approaches to implementing what you want.</p>\n\n<h3>Brute force</h3>\n\n<p>When in doubt, try a bigger hammer. Generate all permutations and bake those into your pattern directly. Note that this has a factorial cost, so it quickly becomes intractable as the number of elements in your set grows.</p>\n\n<pre><code># perlfaq4: How do I permute N elements of a list?\nsub permute (&amp;@) {\n  my $code = shift;\n  my @idx = 0..$#_;\n  while ( $code-&gt;(@_[@idx]) ) {\n    my $p = $#idx;\n    --$p while $idx[$p-1] &gt; $idx[$p];\n    my $q = $p or return;\n    push @idx, reverse splice @idx, $p;\n    ++$q while $idx[$p-1] &gt; $idx[$q];\n    @idx[$p-1,$q]=@idx[$q,$p-1];\n  }\n}\n\nmy $brute_force;\npermute { local $\" = \",\";\n          $brute_force .= \"|\" if $brute_force;\n          $brute_force .= \"{@_}\" }\n  @members;\n\n$brute_force = qr/ ^ (?: $brute_force ) $/x;\n\nfor (@tests) {\n  my $result = /$brute_force/x ? \"ACCEPT\" : \"REJECT\";\n  print \"$_ - $result\\n\";\n}\n</code></pre>\n\n<p>Generating all permutations on my laptop takes about 3 minutes. Precomputing the pattern may or may not make sense depending on your application.</p>\n\n<h3>Piggyback on the regex engine\u2019s backtracking</h3>\n\n<p>One way to do it is to take advantage of the Perl regex engine\u2019s backtracking and <a href=\"https://perldoc.perl.org/perlre.html#(%3f%7b-code-%7d)\" rel=\"nofollow noreferrer\">running <code>(?{ code })</code></a> at various points within your pattern.</p>\n\n<p>Define members of your set as below. Note that these must be global variables because of limitations of the regex engine, so use <code>our</code> and not <code>my</code>.</p>\n\n<pre><code># must use package variables inside (?{ })\nour @members = (1 .. 6, 8 .. 10);\nour %remaining;\n</code></pre>\n\n<p>A pattern that matches permutations becomes</p>\n\n<pre><code>my $permutation = qr!\n  \\{  (?{ @remaining{@members} = map +($_ =&gt; 1), @members })\n\n  ( ([0-9]+), (?(?{ delete local $remaining{$^N} })|(*FAIL)))+\n\n  ([0-9]+)\\} (?(?{ delete local $remaining{$^N} &amp;&amp; keys %remaining == 0 })|(*FAIL))\n!x;\n</code></pre>\n\n<p>Code inside <a href=\"https://perldoc.perl.org/perlre.html#(%3f%7b-code-%7d)\" rel=\"nofollow noreferrer\"><code>(?{ code })</code> sections</a> runs at corresponding points of the pattern match. For example, the first one initializes the hash <code>%remaining</code> to contain all members of the set as keys.</p>\n\n<p>The second and third <code>(?{ code })</code> sections are within <a href=\"https://perldoc.perl.org/perlre.html#(%3f(condition)yes-pattern%7cno-pattern)\" rel=\"nofollow noreferrer\"><code>(?(condition)yes-pattern|no-pattern)</code> sections</a> and <a href=\"https://perldoc.perl.org/perlre.html#(*FAIL)-(*F)-(*FAIL%3aarg)\" rel=\"nofollow noreferrer\"><code>(*FAIL)</code> backtracking control verbs</a>. For any member before the last in the set (which we know because it is terminated by a comma), the member just matched, available in the <code>$^N</code> special variable, must be still available in <code>%remaining</code>. For the last member (terminated by right curly brace), the member just matched must be available and we must have covered all elements of the set to succeed. If these constraints are met, we match against an empty <em>yes-pattern</em> and continue successfully, but if one of these conditions fails, we meet <a href=\"https://perldoc.perl.org/perlre.html#(*FAIL)-(*F)-(*FAIL%3aarg)\" rel=\"nofollow noreferrer\"><code>(*FAIL)</code></a> in the <em>no-pattern</em>. This causes the current attempted match to fail and the regex engine backtracks to attempt the next possibility.</p>\n\n<p>Writing <a href=\"http://perldoc.perl.org/functions/delete.html\" rel=\"nofollow noreferrer\"><code>delete local</code></a> localizes deletion of the particular key from <code>%remaining</code>. This delegates the error-prone bookkeeping to the regex engine that correctly restores localized values when it backtracks past a non-viable match.</p>\n\n<p>Note that this implementation requires a set of at least two members.</p>\n\n<p>Use it as in</p>\n\n<pre><code>for (@tests) {\n  my $result = /^ $permutation $/x ? \"ACCEPT\" : \"REJECT\";\n  print \"$_ - $result\\n\";\n}\n</code></pre>\n\n<h3>Hybrid approach</h3>\n\n<p>Finally, combine the approaches by searching for everything that looks like a set and reject invalid permutations.</p>\n\n<pre><code>sub _assert_permutation_of {\n  my($members,$set) = @_;\n  my %seen = map +($_ =&gt; 1), @$members;\n  while ($set =~ /\\b([0-9]+)\\b/g) {\n    return unless delete $seen{$1};\n  }\n  keys %seen == 0;\n}\n\nmy $hybrid = qr!\n  (  \\{                # opening brace\n     (?: [0-9]+ , )+   # comma-terminated integers\n         [0-9]+        # final integer\n     \\}                # closing brace\n  )\n  (?(?{ _assert_permutation_of \\@members, $^N })|(*FAIL))\n!x;\n\nfor (@tests) {\n  my $result = /^ $hybrid $/x ? \"ACCEPT\" : \"REJECT\";\n  print \"$_ - $result\\n\";\n}\n</code></pre>\n\n<h3>Test output</h3>\n\n<p>For all three, the output is</p>\n\n<pre>{} - REJECT\n{1,1} - REJECT\n{1,2,3,4,5,6,8,9,10} - ACCEPT\n{1,1,2,3,4,5,6,8,9,10} - REJECT\n{1,2,3,4,5,6,7,8,9,10} - REJECT\n{10,9,8,7,6,5,4,3,2,1} - REJECT\n{10,9,8,6,5,4,3,2,1} - ACCEPT\n{10,9,8,6,5,4,3,2,1 - REJECT\n{10,9,8,6,5,4,3,2,1,1} - REJECT\n{2,4,6,8,10,9,5,3,1} - ACCEPT</pre>\n"}], "owner": {"reputation": 1155, "user_id": 6449910, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OvekE.jpg?s=128&g=1", "display_name": "SeSodesa", "link": "https://stackoverflow.com/users/6449910/sesodesa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 139, "favorite_count": 0, "accepted_answer_id": 51330139, "answer_count": 3, "score": 2, "last_activity_date": 1531511645, "creation_date": 1531491392, "last_edit_date": 1531491850, "question_id": 51327214, "link": "https://stackoverflow.com/questions/51327214/find-any-permutation-of-a-set-using-perls-regex", "title": "Find any permutation of a set using Perl&#39;s RegEx", "body": "<p>I need to find a way of checking for the existence of sets of the type <code>{1,2,3,4,5,6,8,9,10}</code>, that have a preset number of elements. Also, notice the missing <code>7</code>. Obviously the numbers could be in any order and should appear only once, since according to definition, <code>{1,2,3} = {3,2,1} = {1,2,3,3} = ...</code> and so forth.</p>\n\n<p>How could I do this with Perl (or is it even possible)? One thing I tried was\n<code>{([1-6],|[8-9],|10,){8}([1-6]|[8-9]|10)}</code> <a href=\"https://regex101.com/r/46MchL/1\" rel=\"nofollow noreferrer\">here</a>, but this doesn't take care of the multiple instances of the same number within the brackets.</p>\n"}, {"tags": ["perl", "post"], "comments": [{"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1531492451, "post_id": 51326846, "comment_id": 89630273, "body": "I&#39;m guessing you mean the <code>post_https()</code> subroutine from <a href=\"https://metacpan.org/pod/distribution/Net-SSLeay/lib/Net/SSLeay.pod\" rel=\"nofollow noreferrer\">Net::SSLeay</a>. IT would be good if you could include that information in your question so we don&#39;t have to guess :-)"}, {"owner": {"reputation": 29, "user_id": 6227090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6d3abda3ee0a742f866ddabee6161773?s=128&d=identicon&r=PG&f=1", "display_name": "Diane", "link": "https://stackoverflow.com/users/6227090/diane"}, "reply_to_user": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1531496041, "post_id": 51326846, "comment_id": 89632498, "body": "Sorry - yes, you are correct."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1531496400, "post_id": 51326846, "comment_id": 89632721, "body": "What is the server error? Is it from your system or from authorize? Is this part of a CGI application?"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1531496760, "post_id": 51326846, "comment_id": 89632941, "body": "When you say that there was &quot;no reply&quot; do you mean your code hung at that call, or that the returned values were empty?"}, {"owner": {"reputation": 8974, "user_id": 205207, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/1OH7W.jpg?s=128&g=1", "display_name": "i alarmed alien", "link": "https://stackoverflow.com/users/205207/i-alarmed-alien"}, "edited": false, "score": 0, "creation_date": 1531501161, "post_id": 51326846, "comment_id": 89635196, "body": "have you been in touch with <code>authorize.net</code> to see if they&#39;ve changed things on their end? You need to post the code that handles the response as the generic <code>post_https()</code> call doesn&#39;t give us any information about what you&#39;re doing with <code>$reply_data</code>, <code>$reply_type</code> and <code>%reply_headers</code>."}, {"owner": {"reputation": 29, "user_id": 6227090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6d3abda3ee0a742f866ddabee6161773?s=128&d=identicon&r=PG&f=1", "display_name": "Diane", "link": "https://stackoverflow.com/users/6227090/diane"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1531826414, "post_id": 51326846, "comment_id": 89731608, "body": "Yes @Borodin, by &quot;no reply&quot; I mean that my code hung at that call. When comparing my logs with authorize.net&#39;s processing time, I see that there&#39;s about a fifteen minute lag time. All four attempts were completed before the first processing occurred. Authorize.net says there were no problems or changes on their end."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1531827066, "post_id": 51326846, "comment_id": 89732103, "body": "I think you&#39;ve really left it too long to provide that information and people will have moved on. I suggest that you add it to your question in the hope that people will notice the update."}, {"owner": {"reputation": 29, "user_id": 6227090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6d3abda3ee0a742f866ddabee6161773?s=128&d=identicon&r=PG&f=1", "display_name": "Diane", "link": "https://stackoverflow.com/users/6227090/diane"}, "reply_to_user": {"reputation": 8974, "user_id": 205207, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/1OH7W.jpg?s=128&g=1", "display_name": "i alarmed alien", "link": "https://stackoverflow.com/users/205207/i-alarmed-alien"}, "edited": false, "score": 0, "creation_date": 1531827092, "post_id": 51326846, "comment_id": 89732112, "body": "@ialarmedalien I have added thecode that handles the response."}, {"owner": {"reputation": 29, "user_id": 6227090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6d3abda3ee0a742f866ddabee6161773?s=128&d=identicon&r=PG&f=1", "display_name": "Diane", "link": "https://stackoverflow.com/users/6227090/diane"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1531827123, "post_id": 51326846, "comment_id": 89732137, "body": "@Borodin Thanks will do."}, {"owner": {"reputation": 8974, "user_id": 205207, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/1OH7W.jpg?s=128&g=1", "display_name": "i alarmed alien", "link": "https://stackoverflow.com/users/205207/i-alarmed-alien"}, "edited": false, "score": 0, "creation_date": 1531998287, "post_id": 51326846, "comment_id": 89812897, "body": "You&#39;ve pretty much answered your own question already: test whether or not the response indicates that the request was successful, and then return an appropriate page. You just need to do the &quot;return an appropriate page&quot; bit. Without knowing what other modules you&#39;re using and how you&#39;re creating html pages, it&#39;s difficult to know how to create the error page. In your position, I&#39;d have a generic error page template with <code>$response_code</code> and <code>$response_reason_text</code> fields that get populated with the values from <code>$reply_data</code>."}, {"owner": {"reputation": 29, "user_id": 6227090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6d3abda3ee0a742f866ddabee6161773?s=128&d=identicon&r=PG&f=1", "display_name": "Diane", "link": "https://stackoverflow.com/users/6227090/diane"}, "edited": false, "score": 0, "creation_date": 1532091659, "post_id": 51326846, "comment_id": 89856063, "body": "It seems to be hanging up, waiting for a response, and finally results in a server error. It didn&#39;t get to the lines after the post_https line. Should I use an eval? Would that keep it from resulting in a server error if there is no response from authorize.net?"}], "answers": [{"comments": [{"owner": {"reputation": 29, "user_id": 6227090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6d3abda3ee0a742f866ddabee6161773?s=128&d=identicon&r=PG&f=1", "display_name": "Diane", "link": "https://stackoverflow.com/users/6227090/diane"}, "edited": false, "score": 0, "creation_date": 1532354837, "post_id": 51465352, "comment_id": 89930175, "body": "You understand correctly. This is exactly what I was looking for. Thank you!"}], "tags": [], "owner": {"reputation": 8974, "user_id": 205207, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/1OH7W.jpg?s=128&g=1", "display_name": "i alarmed alien", "link": "https://stackoverflow.com/users/205207/i-alarmed-alien"}, "is_accepted": true, "score": 1, "last_activity_date": 1532264122, "creation_date": 1532264122, "answer_id": 51465352, "question_id": 51326846, "link": "https://stackoverflow.com/questions/51326846/perl-netssleay-post-https-how-to-detect-no-response-from-server/51465352#51465352", "title": "Perl Net::SSLeay post_https how to detect no response from server", "body": "<p>As I understand it, your problem is that your local server is timing out before receiving a response from authorize.net, and from your log files, it seems that the response does arrive, but after a long delay. Although it is probably possible to configure your server to wait for longer before timing out (assuming you have control of the server config, etc.), 15 minutes is too long for a user to wait and would provide very poor user experience. Therefore, I'd suggest one of the following strategies:</p>\n\n<ul>\n<li><p>submit the form by AJAX and wait for a response -- i.e. translate your form processing logic into javascript and perform the transaction asynchronously. Looks like there's an existing <a href=\"https://developer.authorize.net/api/reference/features/acceptjs.html\" rel=\"nofollow noreferrer\">authorize.net JS API</a>.</p></li>\n<li><p>the old school method: when the form is submitted, fork a new process that posts the form data (e.g. using curl) and saves the response to a file. The UI would return an intermediate page informing the user that their payment is being processed, and would periodically check whether the response has arrived, either through a link the user clicks to trigger a test for the presence of the response file, or through automatically refreshing the page (but see these  <a href=\"https://www.w3.org/TR/WAI-WEBCONTENT-TECHS/#tech-no-periodic-refresh\" rel=\"nofollow noreferrer\">accessibility guidelines</a>).</p></li>\n</ul>\n\n<p>Whatever strategy you use, I would get in touch with authorize.net and see if you can find out why the response is taking so long. Adding a note to users that indicates that there have been delays recently and preventing them from submitting the same payment four times in a row would also definitely be good!</p>\n"}], "owner": {"reputation": 29, "user_id": 6227090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6d3abda3ee0a742f866ddabee6161773?s=128&d=identicon&r=PG&f=1", "display_name": "Diane", "link": "https://stackoverflow.com/users/6227090/diane"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 99, "favorite_count": 0, "accepted_answer_id": 51465352, "answer_count": 1, "score": 0, "last_activity_date": 1532264122, "creation_date": 1531490201, "last_edit_date": 1531827359, "question_id": 51326846, "link": "https://stackoverflow.com/questions/51326846/perl-netssleay-post-https-how-to-detect-no-response-from-server", "title": "Perl Net::SSLeay post_https how to detect no response from server", "body": "<p>I have been using\n<a href=\"https://metacpan.org/pod/Net::SSLeay\" rel=\"nofollow noreferrer\"><code>Net::SSLeay</code></a>\nfor 20 years to post data to <code>authorize.net</code> and receive the reply, as shown below:</p>\n\n<pre><code>   ($reply_data, $reply_type, %reply_headers) =\n                      post_https($host, $port, $script, '', $form_data);\n\n        @data = split (/\\,/, $reply_data);\n\n        $FORM{'x_response_code'} = $data[0];\n        $FORM{'x_response_reason_text'} = $data[3];\n        $FORM{'x_auth_code'} = $data[4];\n        $FORM{'x_amount'} = $data[9];\n\nif ($FORM{'x_response_code'} != 1) {... \n</code></pre>\n\n<p><code>authorize.net</code> received the data and processed the payment, but my system did not receive a reply. The user got a server error, and tried submitting the form several more times, all which resulted in payment processing, but no reply from <code>authorize.net</code>. When comparing my logs with authorize.net's processing time, I see that there's about a fifteen minute lag time between when the call was sent, and when authorize.net processed the payment. All four attempts were completed before the first processing occurred. Authorize.net says there were no problems or changes on their end.</p>\n\n<p>How can I suppress the server error and instead return a custom error message?</p>\n"}, {"tags": ["perl", "ssh", "openssh"], "comments": [{"owner": {"reputation": 38072, "user_id": 46395, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5ce828f20abb195ef5d971205ee36c27?s=128&d=identicon&r=PG", "display_name": "daxim", "link": "https://stackoverflow.com/users/46395/daxim"}, "edited": false, "score": 0, "creation_date": 1531480860, "post_id": 51323230, "comment_id": 89622934, "body": "Half a solution: <code>$ssh-&gt;capture2(&#39;find &#47;tmp&#39;, { stdout_fh =&gt; *STDOUT });</code> should work, but doesn&#39;t. Subclass Net::OpenSSH and remove the offending check."}, {"owner": {"reputation": 9262, "user_id": 124951, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/c46d5911a8fb4ffd5fb8523d56a60de0?s=128&d=identicon&r=PG", "display_name": "salva", "link": "https://stackoverflow.com/users/124951/salva"}, "edited": false, "score": 1, "creation_date": 1531513645, "post_id": 51323230, "comment_id": 89640283, "body": "Use <code>system</code> instead of <code>capture2</code>."}], "owner": {"reputation": 99, "user_id": 3344013, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/131deed33d242151849bec9de1b661e3?s=128&d=identicon&r=PG&f=1", "display_name": "vatsal", "link": "https://stackoverflow.com/users/3344013/vatsal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 81, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1531478241, "creation_date": 1531478241, "question_id": 51323230, "link": "https://stackoverflow.com/questions/51323230/how-to-redirect-ssh-capture2-output-to-stdout-without-buffering", "title": "How to redirect ssh-&gt;capture2 output to STDOUT without buffering?", "body": "<p>I am using Net::OpenSSH module. The capture2 function returns the output to a variable which I can print to get the output but I want to do this directly to STDOUT without buffering.</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 2177, "user_id": 3124587, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/adc0af022f8a3b35bcde0a4405e4c673?s=128&d=identicon&r=PG&f=1", "display_name": "Joshua", "link": "https://stackoverflow.com/users/3124587/joshua"}, "edited": false, "score": 1, "creation_date": 1531478719, "post_id": 51323208, "comment_id": 89621741, "body": "Your code does not compile, eg. your <code>fswf</code> variable doesn&#39;t exist. Please make sure the code in your question is a <a href=\"https://stackoverflow.com/help/mcve\">Minimal, Complete, and Verifiable example</a>"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 3, "creation_date": 1531479821, "post_id": 51323208, "comment_id": 89622372, "body": "I&#39;ve added some sensible indentation to your code. You&#39;re welcome, of course, but please do it yourself next time. Proper indentation is a powerful tool for understanding code and if you&#39;re asking a large group of strangers to read and understand your code, it&#39;s only polite to make that as easy as possible for them."}, {"owner": {"reputation": 11, "user_id": 8319907, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/229f429a223e51e38d17f5879acfca0a?s=128&d=identicon&r=PG&f=1", "display_name": "seedof", "link": "https://stackoverflow.com/users/8319907/seedof"}, "reply_to_user": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1531529365, "post_id": 51323208, "comment_id": 89643941, "body": "@Dave Cross :  Thank for correcting me, I am sorry the original one is too long to put here. Besides,it does not work either. I will modify it and my post later."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1531532772, "post_id": 51323208, "comment_id": 89644395, "body": "By the way, it&#39;s <i>handle</i>, not &quot;hander&quot;, &quot;hanlder&quot;, or &quot;handler&quot;."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1531548159, "post_id": 51323208, "comment_id": 89646444, "body": "@seedof: It&#39;s ok not to show us your actual code. It&#39;s not ok to show us code that doesn&#39;t even compile. Cut down your original code to a simple version that demonstrates the problem. Also, show us a cut-down version of the input and tell us exactly what output you want to get. We want to help you, but there&#39;s really not much we can do with your existing question."}], "answers": [{"comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1531483538, "post_id": 51323546, "comment_id": 89624370, "body": "That&#39;s fair. I think it&#39;s about the best that can be said. Well done."}], "tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 1, "last_activity_date": 1531479417, "creation_date": 1531479417, "answer_id": 51323546, "question_id": 51323208, "link": "https://stackoverflow.com/questions/51323208/perl-multiple-match-string-in-multiple-files/51323546#51323546", "title": "Perl, multiple match string in multiple files", "body": "<p>Your filehandle is just stored in a scalar variable (<code>$filehanlder</code>) so it can be passed into a subroutine in exactly the same way as any other variable.</p>\n\n<pre><code>some_subroutine($filehanlder);\n</code></pre>\n\n<p>And, inside the subroutine:</p>\n\n<pre><code>sub some_subroutine {\n  my ($fh) = @_;\n\n  # do something with $fh\n}\n</code></pre>\n\n<p>But I think you have more serious problems to worry about. You have two subroutines that have a <code>while (&lt;$filehanlder&gt;)</code> loop in them. The first of those to be called, will go to the end of the file, leaving the second with no data to process.</p>\n\n<p>You probably want to rethink the design of this code.</p>\n"}], "owner": {"reputation": 11, "user_id": 8319907, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/229f429a223e51e38d17f5879acfca0a?s=128&d=identicon&r=PG&f=1", "display_name": "seedof", "link": "https://stackoverflow.com/users/8319907/seedof"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 65, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1531532618, "creation_date": 1531478133, "last_edit_date": 1531532618, "question_id": 51323208, "link": "https://stackoverflow.com/questions/51323208/perl-multiple-match-string-in-multiple-files", "title": "Perl, multiple match string in multiple files", "body": "<p>I would like to use</p>\n\n<pre><code> myscript.pl targetfolder/* &gt; result.csv\n</code></pre>\n\n<p>to grep some number from multiple ASCII files.</p>\n\n<p>The data table is like  </p>\n\n<blockquote>\n  <p>|   44.2 | 3123.7 |   3123 |<br>\n  +--------+--------+--------+</p>\n</blockquote>\n\n<p>--> this is the end of data table is like</p>\n\n<p><strong>myscript.pl</strong></p>\n\n<pre><code>#!/usr/bin/env perl\n\nuse warnings;\nuse strict;\nuse Data::Dumper;  # for debugging\n\n$Data::Dumper::Useqq=1;\n\n#####start######\n\nTitle1();\nTitle2();\n\nprint \"\\n\"; \n\n#####Grep#######\n\nforeach my $currentfile (@ARGV) {     # ARGV is the target files list\n    print Dumper($currentfile);       # debug\n    open my $filehanlder, '&lt;', $currentfile or die \"$currentfile: $!\";   \n\n    while ($r &lt;= $#fswf) {      #judge end of the open file\n        Value1();\n        Value2();\n        Print1();\n        Print2();\n        print \"\\n\";             \n        $r++;\n    }                 #go next line output\n\n    Close $filehanlder; \n}\n\n#####sub#######\nsub Title1 {\n    print \"title1,title2\";\n}\n\nsub Title2{\n    print \"title5,title6,title7,title8\";\n}\n\n\nsub Value1 {\n    my ($line);\n    while ($line = &lt;$filehanlder&gt;)) {\n        if ($line =~ /^\\|\\sMachine\\:(\\S+)\\s+Release\\:(\\S+)\\s+/) {\n            our ($machine) = $1;our ($sw) = $2;\n        }\n    }\n}\n\n\nsub Value2 {\n    my ($line);\n    while ($line = &lt;$filehanlder&gt;)) {\n        if ($line =~ /^\\|\\sProduction\\sResult\\s+\\|\\s(\\S+)\\s+\\|/) {\n            next if 1..4;\n            my (@b) = \"\";\n            $r = 1\n            @result1 = @result2 = @result3 = @result4 = \"\";\n\n            while ($line !~ /\\+\\-/) {                                 \n                chomp $line; \n                @b = split / *\\| */, $line;\n                our ($result1[$r]) = $b[1];\n                our ($result2[$r]) = $b[2];\n                our ($result3[$r]) = $b[3];\n                our ($result4[$r]) = $b[4];\n                $r++;\n                $line = (&lt;$filehanlder&gt;);\n                @b = \"\";\n            }\n        }\n    }\n}\n\n##I need a value as file counter, but not sure where to put it.\n\nSub Print1 {\n    print \"$machine,$sw,\";   # this keeps same cross lines from same file\n}\n\nSub Print2 {\n    print \"$result1[$r],$result2[$r],$result3[$r],$result4[$r],\";  # change every line    \n}\n\n#####sub#######\n</code></pre>\n\n<p>I don't know is this correct way to pass the $filehander to the subroutine and pass it throught different subroutine.</p>\n\n<p>@Dave Cross: Thanks for pointing out. Exactly as you said. If I do loop in the subroutine, then one subroutine will go to the end of file, other subroutine get nothing. So shall I do while loop in the main ? Or shall I do open in every subroutines? so I can reset the filehandler to the 1st line of the file in every subroutine.   If I have multiple @result as I grep in the sub values2 , how I can print them with the max lines number of these @result.  For example, I have @result5[7] ,@result6[12], so I would like to print 12 lines record, the first 7 lines with result5 grep result, the last 5 line ,result5 column keeps empty and result6 column continue printout.</p>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 2565, "user_id": 4593127, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d661b3425b0e9cd38ee220844e1b8659?s=128&d=identicon&r=PG&f=1", "display_name": "gaganso", "link": "https://stackoverflow.com/users/4593127/gaganso"}, "edited": false, "score": 0, "creation_date": 1531444605, "post_id": 51316412, "comment_id": 89609160, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/2468999/how-can-i-split-a-perl-string-only-on-the-last-occurrence-of-the-separator\">How can I split a Perl string only on the last occurrence of the separator?</a>"}, {"owner": {"reputation": 3, "user_id": 9571950, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba6dc4eca22a6317e1893126f1b849df?s=128&d=identicon&r=PG&f=1", "display_name": "Bin Yang", "link": "https://stackoverflow.com/users/9571950/bin-yang"}, "reply_to_user": {"reputation": 2565, "user_id": 4593127, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d661b3425b0e9cd38ee220844e1b8659?s=128&d=identicon&r=PG&f=1", "display_name": "gaganso", "link": "https://stackoverflow.com/users/4593127/gaganso"}, "edited": false, "score": 0, "creation_date": 1531446125, "post_id": 51316412, "comment_id": 89609434, "body": "Thanks. Above one is close but not what I want. For my example, I want a list of 5 items  [a b c;; d, ee]. The other question would give out a list of two items [a;b;c;;  d,ee]"}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 9571950, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba6dc4eca22a6317e1893126f1b849df?s=128&d=identicon&r=PG&f=1", "display_name": "Bin Yang", "link": "https://stackoverflow.com/users/9571950/bin-yang"}, "edited": false, "score": 0, "creation_date": 1531451802, "post_id": 51316752, "comment_id": 89610347, "body": "I need to read this <a href=\"https://www.regular-expressions.info/lookaround.html\" rel=\"nofollow noreferrer\">article</a>"}], "tags": [], "owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "is_accepted": true, "score": 3, "last_activity_date": 1531448125, "last_edit_date": 1531448125, "creation_date": 1531447630, "answer_id": 51316752, "question_id": 51316412, "link": "https://stackoverflow.com/questions/51316412/regular-expression-find-the-last-character-of-repeating-characters/51316752#51316752", "title": "regular expression find the last character of repeating characters", "body": "<pre><code>split /;(?!;)/\n</code></pre>\n\n<p>(Split only on <code>;</code> not followed by <code>;</code>)</p>\n"}, {"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 0, "last_activity_date": 1531479779, "creation_date": 1531479779, "answer_id": 51323656, "question_id": 51316412, "link": "https://stackoverflow.com/questions/51316412/regular-expression-find-the-last-character-of-repeating-characters/51323656#51323656", "title": "regular expression find the last character of repeating characters", "body": "<p>Another way, which works by bypassing all but the last semicolon of a sequence</p>\n\n<pre><code>use strict;\nuse warnings 'all';\n\nmy @vals = split /;*\\K;/, 'a;b;c;;;d,;ee';\n\nuse Data::Dumper;\nprint Dumper \\@vals;\n</code></pre>\n\n<h3>output</h3>\n\n<pre><code>$VAR1 = [\n          'a',\n          'b',\n          'c;;',\n          'd,',\n          'ee'\n        ];\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3432, "user_id": 604642, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/48daad611ba387f8473b0c1e5792aa3f?s=128&d=identicon&r=PG", "display_name": "shawnhcorey", "link": "https://stackoverflow.com/users/604642/shawnhcorey"}, "is_accepted": false, "score": -2, "last_activity_date": 1531486097, "creation_date": 1531486097, "answer_id": 51325481, "question_id": 51316412, "link": "https://stackoverflow.com/questions/51316412/regular-expression-find-the-last-character-of-repeating-characters/51325481#51325481", "title": "regular expression find the last character of repeating characters", "body": "<p>Use capture groups.</p>\n\n<pre><code>my ( $first, $last ) = $string =~ /(.*);([^;]*)$/;\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 9571950, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba6dc4eca22a6317e1893126f1b849df?s=128&d=identicon&r=PG&f=1", "display_name": "Bin Yang", "link": "https://stackoverflow.com/users/9571950/bin-yang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 195, "favorite_count": 0, "accepted_answer_id": 51316752, "answer_count": 3, "score": 0, "last_activity_date": 1531486097, "creation_date": 1531444298, "last_edit_date": 1531471300, "question_id": 51316412, "link": "https://stackoverflow.com/questions/51316412/regular-expression-find-the-last-character-of-repeating-characters", "title": "regular expression find the last character of repeating characters", "body": "<p>I've searched Stack Overflow for similar questions but could not find one. What I'd like to have is a regular expression (I'm using Perl) to find the last occurrence of a <strong>possible</strong> repeating characters.</p>\n\n<p>For example, <code>a;b;c;;;d,;ee</code>, I want to call the <code>split</code> function to split on very last of <code>;</code> in this string, so that the results after split would be <code>[a b c;; d, ee]</code>.</p>\n\n<p>Thanks</p>\n\n<p><a href=\"https://stackoverflow.com/questions/2468999/how-can-i-split-a-perl-string-only-on-the-last-occurrence-of-the-separator\">This question</a> is similar but not what I want. For my example, I want a list of 5 items <code>[a b c;; d, ee]</code>. The other question would give out a list of two items <code>[a;b;c;; d,ee]</code>.</p>\n"}, {"tags": ["perl", "split", "pipe"], "comments": [{"owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 4, "creation_date": 1531417644, "post_id": 51311601, "comment_id": 89600012, "body": "Can not reproduce. Consider adding more detail to your question."}, {"owner": {"reputation": 381, "user_id": 3380064, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PrmsH.jpg?s=128&g=1", "display_name": "interduo", "link": "https://stackoverflow.com/users/3380064/interduo"}, "edited": false, "score": 0, "creation_date": 1531501023, "post_id": 51311601, "comment_id": 89635132, "body": "The split you&#39;ve written in the example will output <code>my_string|is, _ok</code>, and won&#39;t split apart the &#39;is&#39;. Are you sure that <code>$line</code> contains what you&#39;re expecting it to?"}], "answers": [{"tags": [], "owner": {"reputation": 24167, "user_id": 7388477, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e42e688ade97076d4fdd1939946e7c7b?s=128&d=identicon&r=PG&f=1", "display_name": "Valdi_Bo", "link": "https://stackoverflow.com/users/7388477/valdi-bo"}, "is_accepted": false, "score": 3, "last_activity_date": 1531423490, "creation_date": 1531423490, "answer_id": 51313072, "question_id": 51311601, "link": "https://stackoverflow.com/questions/51311601/in-perl-why-split-is-breaking-at-pipe/51313072#51313072", "title": "In perl why split is breaking at pipe(|)", "body": "<p>It looks like your program contains some error elsewhere.</p>\n\n<p>Run the following script:</p>\n\n<pre><code>use strict; use warnings;\nmy $line = 'my_string|is\"_ok';\nprint \"Source: $line\\n\";\nmy @temp1 = split(/\"/, $line);\nprint \"Result 1:\\n\";\nmy $index;\nfor my $elem (@temp1) {\n    print ++$index, \": $elem\\n\";\n}\n@temp1 = split(/[\"|]/, $line);\nprint \"Result 2:\\n\";\n$index = 0;\nfor my $elem (@temp1) {\n    print ++$index, \": $elem\\n\";\n}\n</code></pre>\n\n<p>and you will get the result given below</p>\n\n<pre><code>Source: my_string|is\"_ok\nResult 1:\n1: my_string|is\n2: _ok\nResult 2:\n1: my_string\n2: is\n3: _ok\n</code></pre>\n\n<p>As you can see, the script contains 2 variants of match:</p>\n\n<ol>\n<li>As you tried, splitting only on a double quote.</li>\n<li>An attempt to reproduce your result - splitting on either\n a double quote or a vertical bar.</li>\n</ol>\n\n<p>To write a regex matching a double quote, you don't need to\nescape it.</p>\n\n<p>Note that in a <em>character class</em> (between <code>[</code> and <code>]</code>) you even\ndon't need to escape the vertical bar.</p>\n\n<p>So, in order to keep the program simple and readable, avoid unnecessary\nbackslashes.</p>\n"}], "owner": {"reputation": 1, "user_id": 10072119, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-3m3daSgBfvg/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7pHEuYuKvRP1hnUppZa9SpoTqorUA/mo/photo.jpg?sz=128", "display_name": "Kairav Sharma", "link": "https://stackoverflow.com/users/10072119/kairav-sharma"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 70, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1531423490, "creation_date": 1531417316, "last_edit_date": 1531418550, "question_id": 51311601, "link": "https://stackoverflow.com/questions/51311601/in-perl-why-split-is-breaking-at-pipe", "title": "In perl why split is breaking at pipe(|)", "body": "<p>In perl why split is breaking at pipe (<code>|</code>).\nI have string to be split at <code>\"</code> and</p>\n\n<pre><code>my @temp1 = split(/\\\"/,$line);\n</code></pre>\n\n<p>but this will break at pipe(<code>|</code>) as well. Like for input </p>\n\n<pre><code>my_string|is\"_ok\n</code></pre>\n\n<p>the output is </p>\n\n<pre><code>mystring ,  is, _ok\n</code></pre>\n\n<p>Why ?\nWhy is it not</p>\n\n<pre><code>mystring|, is, _ok\n</code></pre>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 2, "creation_date": 1531413208, "post_id": 51310313, "comment_id": 89597848, "body": "Seems like an XY problem. What is the larger issue you are dealing with?"}, {"owner": {"reputation": 8016, "user_id": 196241, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/9b0541fbc7bb5d5bd29aa59c96315c37?s=128&d=identicon&r=PG", "display_name": "w.k", "link": "https://stackoverflow.com/users/196241/w-k"}, "reply_to_user": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 0, "creation_date": 1531414208, "post_id": 51310313, "comment_id": 89598341, "body": "@mob edited question to address XY problem"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1531414240, "post_id": 51310313, "comment_id": 89598369, "body": "If you need to know which alias was used then you shouldn&#39;t be using aliases. You need an additional parameter to the subroutine to convey the information you are hoping to pass in the subroutine alias used."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1531414393, "post_id": 51310313, "comment_id": 89598434, "body": "You haven&#39;t explained why you can&#39;t just use <code>&amp;foo</code> in both places in the hash."}, {"owner": {"reputation": 8016, "user_id": 196241, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/9b0541fbc7bb5d5bd29aa59c96315c37?s=128&d=identicon&r=PG", "display_name": "w.k", "link": "https://stackoverflow.com/users/196241/w-k"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1531414487, "post_id": 51310313, "comment_id": 89598476, "body": "@Borodin because I can&#39;t then distinct, which task was caller"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 2, "creation_date": 1531414532, "post_id": 51310313, "comment_id": 89598495, "body": "Okay, but you haven&#39;t explained why you need to be able to distinguish. This should be either two different subroutines or the same subroutine with a parameter, like <code>foo(&#39;x_y_z&#39;)</code> and <code>foo(&#39;a_b_c_d&#39;)</code>"}, {"owner": {"reputation": 8016, "user_id": 196241, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/9b0541fbc7bb5d5bd29aa59c96315c37?s=128&d=identicon&r=PG", "display_name": "w.k", "link": "https://stackoverflow.com/users/196241/w-k"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1531414864, "post_id": 51310313, "comment_id": 89598651, "body": "@Borodin  I process tasks  based on database + table + action, and I can call <code>&amp;{ $dispatch-&gt;{ $tb }{ $table }{ $task } }( $params )</code>, and mostly those result with specific subs. But on many cases the action needs just to know which db and table and task are involved."}, {"owner": {"reputation": 29951, "user_id": 8233, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/5ed2571484765d12fcb3230f235a8ecc?s=128&d=identicon&r=PG", "display_name": "Michael Carman", "link": "https://stackoverflow.com/users/8233/michael-carman"}, "edited": false, "score": 0, "creation_date": 1531416444, "post_id": 51310313, "comment_id": 89599376, "body": "Your question uses aliasing but your example uses references (to anonymous wrappers). Those are two very different things."}, {"owner": {"reputation": 8016, "user_id": 196241, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/9b0541fbc7bb5d5bd29aa59c96315c37?s=128&d=identicon&r=PG", "display_name": "w.k", "link": "https://stackoverflow.com/users/196241/w-k"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1531416884, "post_id": 51310313, "comment_id": 89599625, "body": "@Borodin calling in dispatch tree <code>foo( &#39;x_y_z&#39;, @_ )</code> solves my XY problem. Still, calling aliased sub problem is interesting ;)"}, {"owner": {"reputation": 8016, "user_id": 196241, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/9b0541fbc7bb5d5bd29aa59c96315c37?s=128&d=identicon&r=PG", "display_name": "w.k", "link": "https://stackoverflow.com/users/196241/w-k"}, "reply_to_user": {"reputation": 29951, "user_id": 8233, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/5ed2571484765d12fcb3230f235a8ecc?s=128&d=identicon&r=PG", "display_name": "Michael Carman", "link": "https://stackoverflow.com/users/8233/michael-carman"}, "edited": false, "score": 0, "creation_date": 1531417089, "post_id": 51310313, "comment_id": 89599727, "body": "@MichaelCarman in my second example anonymous sub-refs contain call to aliased subs. Question is about those."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1531417691, "post_id": 51310313, "comment_id": 89600042, "body": "<i>&quot;calling aliased sub problem is interesting&quot;</i> No, it&#39;s a misconception. You&#39;re trying to use the name of the alias as an additional parameter, and your comment makes it clear that all this has come about because you&#39;re trying to be &quot;clever&quot; by calling <code>&amp;a_b_c_d</code> to pass the current contents of <code>@_</code>. Don&#39;t do that: write clear code instead. I&#39;m surprised you&#39;re not using <code>goto &amp;abcd</code> to mess with the call frame as well."}, {"owner": {"reputation": 8016, "user_id": 196241, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/9b0541fbc7bb5d5bd29aa59c96315c37?s=128&d=identicon&r=PG", "display_name": "w.k", "link": "https://stackoverflow.com/users/196241/w-k"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1531418853, "post_id": 51310313, "comment_id": 89600650, "body": "@Borodin calling it misconception refers that there is no meaningful use for that. In script-level I can introspect which name was used to call my script. And I find it useful. In subroutine- level, seems, I can&#39;t. My use-case may be poor, but knowing caller alias may have uses which make code better."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1531441613, "post_id": 51310313, "comment_id": 89608571, "body": "Don&#39;t have time to really read the question, much less post and answer right now, but <a href=\"https://www.perlmonks.org/?node_id=1202098\" rel=\"nofollow noreferrer\">this</a> might help"}], "answers": [{"comments": [{"owner": {"reputation": 8016, "user_id": 196241, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/9b0541fbc7bb5d5bd29aa59c96315c37?s=128&d=identicon&r=PG", "display_name": "w.k", "link": "https://stackoverflow.com/users/196241/w-k"}, "edited": false, "score": 0, "creation_date": 1531418025, "post_id": 51310909, "comment_id": 89600222, "body": "Can&#39;t understand, what you mean with &quot;Such a name might not even exist&quot;? Both <code>foo_bar_baz</code> and <code>x_y_z</code> live happily in symbol table."}, {"owner": {"reputation": 29951, "user_id": 8233, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/5ed2571484765d12fcb3230f235a8ecc?s=128&d=identicon&r=PG", "display_name": "Michael Carman", "link": "https://stackoverflow.com/users/8233/michael-carman"}, "reply_to_user": {"reputation": 8016, "user_id": 196241, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/9b0541fbc7bb5d5bd29aa59c96315c37?s=128&d=identicon&r=PG", "display_name": "w.k", "link": "https://stackoverflow.com/users/196241/w-k"}, "edited": false, "score": 0, "creation_date": 1531418661, "post_id": 51310909, "comment_id": 89600550, "body": "@w.k: I was alluding to calls made via a <code>CODE</code> reference. I&#39;ve revised my answer to make that clearer."}], "tags": [], "owner": {"reputation": 29951, "user_id": 8233, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/5ed2571484765d12fcb3230f235a8ecc?s=128&d=identicon&r=PG", "display_name": "Michael Carman", "link": "https://stackoverflow.com/users/8233/michael-carman"}, "is_accepted": false, "score": 4, "last_activity_date": 1531418608, "last_edit_date": 1531418608, "creation_date": 1531414363, "answer_id": 51310909, "question_id": 51310313, "link": "https://stackoverflow.com/questions/51310313/how-to-get-name-of-the-called-aliased-subroutine/51310909#51310909", "title": "How to get name of the called aliased subroutine?", "body": "<p>You can't. <code>foo_bar_baz</code> is an alias. <code>caller</code> reports the name of the subroutine as declared, not the name by which it was called. Note that not all subroutines have names and not all calls are by name. (Anonymous subs exist only as a <code>CODE</code> reference; they don't have an entry in the symbol table. Any sub\u2014named or not\u2014can be called via a reference.)</p>\n\n<p>That said, you don't need aliasing here. What you really want is extra parameters for the database, table, etc., on which the sub should operate. The idiomatic way to do that is to wrap the generic sub and pass that information via the wrapper:</p>\n\n<pre><code>my %dispatch = (\n    a =&gt; { b =&gt; { c =&gt; sub { foo('a', 'b', 'c', @_) } } },\n    x =&gt; { y =&gt; { z =&gt; sub { foo('x', 'y', 'z', @_) } } },\n);\n\n$dispatch{a}{b}{c}-&gt;('foo');\n$dispatch{x}{y}{z}-&gt;('bar');\n\nsub foo {\n    my $db     = shift;\n    my $table  = shift;\n    my $task   = shift;\n    my @params = @_;\n    say \"$db $table $task: @params\";\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 54872, "user_id": 1521179, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/MH7pk.png?s=128&g=1", "display_name": "amon", "link": "https://stackoverflow.com/users/1521179/amon"}, "is_accepted": true, "score": 4, "last_activity_date": 1531419884, "creation_date": 1531419884, "answer_id": 51312238, "question_id": 51310313, "link": "https://stackoverflow.com/questions/51310313/how-to-get-name-of-the-called-aliased-subroutine/51312238#51312238", "title": "How to get name of the called aliased subroutine?", "body": "<p>What you're trying to do is simply not possible within Perl's datamodel. An alias is just an alias, not an object with its own identity.</p>\n\n<p>Note that it's possible to copy a subroutine and give it a new name, for example:</p>\n\n<pre><code>use Sub::Name;\n\n*x_y_z = subname x_y_z =&gt; \\&amp;foo;\n</code></pre>\n\n<p>But you will have to do this manually.</p>\n\n<p>It is not a good idea to depend on subnames for anything except for stack traces. Trying to build any logic on top of these names will likely end up in a hard to debug mess, not elegant software.</p>\n\n<p>It might be better to pass the route name into the handler function as an explicit parameter, and to create a helper function to abstract over the necessary plumbing. For example:</p>\n\n<pre><code>my %routes;\n\nsub route {\n  my ($name, $handler) = @_;\n  $routes{$name} = sub { $handler-&gt;($name =&gt; @_) };\n  return;\n}\n\nsub common_handler { ... }\n\nroute a_b_c =&gt; \\&amp;common_handler;\nroute x_y_z =&gt; \\&amp;common_handler;\nroute foo_bar =&gt; sub {\n  my ($route) = @_;\n  say \"Custom handler invoked for route $route\";\n};\n\n$routes{$name}-&gt;(@args);\n</code></pre>\n\n<p>If absolutely necessary you can of course implement such a <code>route</code> function so that it installs the handlers as a named subroutine. But at that point you are building some kind of framework like Moo(se), not an ordinary Perl module.</p>\n"}], "owner": {"reputation": 8016, "user_id": 196241, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/9b0541fbc7bb5d5bd29aa59c96315c37?s=128&d=identicon&r=PG", "display_name": "w.k", "link": "https://stackoverflow.com/users/196241/w-k"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 121, "favorite_count": 0, "accepted_answer_id": 51312238, "answer_count": 2, "score": 2, "last_activity_date": 1531419884, "creation_date": 1531412083, "last_edit_date": 1531414163, "question_id": 51310313, "link": "https://stackoverflow.com/questions/51310313/how-to-get-name-of-the-called-aliased-subroutine", "title": "How to get name of the called aliased subroutine?", "body": "<p>How could I get know which alias was used to call aliased subroutine? <code>caller</code> gives the original <code>sub</code>-name, but I'd like to see name used on calling.</p>\n\n<p>Example:</p>\n\n<pre><code>use 5.010;\nsub x_y_z {\n  return ( caller(0) )[3];\n}\n\n*foo_bar_baz = \\&amp;x_y_z;\n\nsay x_y_z();        # x_y_z\nsay foo_bar_baz();  # x_y_z, but need foo_bar_baz\n</code></pre>\n\n<p><strong>Edit to address XY problem</strong></p>\n\n<p>I add another example to show my deeper intentsions. I want to create dispatch-table to route some tasks:</p>\n\n<pre><code>my $dispatch = {\n  x =&gt; {\n    y =&gt; {\n      z =&gt; sub {\n          &amp;x_y_z;\n      },\n    }\n  },\n  a =&gt; {\n    b =&gt; {\n      c =&gt; {\n        d =&gt; sub {\n          &amp;a_b_c_d;\n        },\n      }\n    }\n  }\n}\n\nsub foo {\n  my @arg = ( split '_', ( split( '::', ( caller(0) )[3] ) )[1] );  \n  return @arg;\n}\n\n*x_y_z = \\&amp;foo;\n*a_b_c_d = \\&amp;foo;\n</code></pre>\n\n<p>As you may imagine, this tree may grow pretty big. Now many leaves in dispatch-tree needs basically same sub, they differ just how they are called (named) and I'd like to have just one sub and alias it for specific task.</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1531407298, "post_id": 51308770, "comment_id": 89594157, "body": "Have you considered using the DBI with <a href=\"https://metacpan.org/pod/DBD::Informix\" rel=\"nofollow noreferrer\">metacpan.org/pod/DBD::Informix</a>?"}, {"owner": {"reputation": 5970, "user_id": 2618323, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/3Czph.jpg?s=128&g=1", "display_name": "Developer", "link": "https://stackoverflow.com/users/2618323/developer"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1531407550, "post_id": 51308770, "comment_id": 89594329, "body": "I can&#39;t use that because my server don&#39;t have informix driver and we can&#39;t install that as well because of some restriction"}, {"owner": {"reputation": 19969, "user_id": 23512, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/tUj1I.png?s=128&g=1", "display_name": "Tanktalus", "link": "https://stackoverflow.com/users/23512/tanktalus"}, "edited": false, "score": 0, "creation_date": 1531408240, "post_id": 51308770, "comment_id": 89594774, "body": "<a href=\"https://www.perlmonks.org/?node=693828\" rel=\"nofollow noreferrer\">I second that DBI suggestion.</a>"}, {"owner": {"reputation": 4446, "user_id": 7500028, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbf0e88580cccb9004735bcb92be952e?s=128&d=identicon&r=PG&f=1", "display_name": "Julio", "link": "https://stackoverflow.com/users/7500028/julio"}, "edited": false, "score": 0, "creation_date": 1531408593, "post_id": 51308770, "comment_id": 89594979, "body": "Do you want to get the error thrown at stderr? Or the exit code of the command?"}, {"owner": {"reputation": 5970, "user_id": 2618323, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/3Czph.jpg?s=128&g=1", "display_name": "Developer", "link": "https://stackoverflow.com/users/2618323/developer"}, "edited": false, "score": 0, "creation_date": 1531409076, "post_id": 51308770, "comment_id": 89595294, "body": "Exit code of the command"}], "answers": [{"tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 2, "last_activity_date": 1531410052, "creation_date": 1531410052, "answer_id": 51309724, "question_id": 51308770, "link": "https://stackoverflow.com/questions/51308770/handle-unix-command-execution-in-perl-script/51309724#51309724", "title": "Handle Unix command execution in Perl Script", "body": "<p>The best answer here is to stop doing what you're doing and get <a href=\"https://metacpan.org/pod/DBD::Informix\" rel=\"nofollow noreferrer\">DBD::Informix</a> installed. I know you think there's an insurmountable obstacle there, but so much of modern Perl programming is down to plumbing together useful CPAN modules that you really need to be able to install stuff from CPAN whenever you want. Whatever you need to do in order to break this logjam will be worth it in the long run.</p>\n\n<p>You may be able to do what you want by looking at the value in one of Perl's <a href=\"https://perldoc.perl.org/perlvar.html#Error-Variables\" rel=\"nofollow noreferrer\">error variables</a>. I think you'll probably want <code>$?</code>. But note that you'll need <code>$? &gt;&gt; 8</code> to get the actual exit code.</p>\n"}], "owner": {"reputation": 5970, "user_id": 2618323, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/3Czph.jpg?s=128&g=1", "display_name": "Developer", "link": "https://stackoverflow.com/users/2618323/developer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 52, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1531410052, "creation_date": 1531407213, "question_id": 51308770, "link": "https://stackoverflow.com/questions/51308770/handle-unix-command-execution-in-perl-script", "title": "Handle Unix command execution in Perl Script", "body": "<p>I am creating a Perl script in which i am using isql command to connect to the informix database . Sometime when there is a problem in query the command is getting hanged because of that script is not throwing any error or getting out of that.\nI am using below command to connect informix db :</p>\n\n<pre><code>`isql db &lt;&lt;EOF\nunload to data DELIMITER ','\nselect* from tablename\nEOF`;\n</code></pre>\n\n<p>How we can handle the script to quit if this command is not working , how we can check the status of the command.</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1531400251, "post_id": 51306198, "comment_id": 89589174, "body": "You could try <a href=\"https://metacpan.org/pod/Benchmark\" rel=\"nofollow noreferrer\"><code>Benchmark</code></a>"}], "answers": [{"tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": false, "score": 3, "last_activity_date": 1531407571, "last_edit_date": 1531407571, "creation_date": 1531400861, "answer_id": 51306549, "question_id": 51306198, "link": "https://stackoverflow.com/questions/51306198/checking-the-performance-of-two-ways-to-append-string-in-perl/51306549#51306549", "title": "Checking the performance of two ways to append string in Perl", "body": "<p><a href=\"http://p3rl.org/Benchmark\" rel=\"nofollow noreferrer\">Benchmark</a> is usually used to benchmark code. It's good to also test that the code being benchmarked gives the same output, so I included <a href=\"http://p3rl.org/Test::More\" rel=\"nofollow noreferrer\">Test::More</a>.</p>\n\n<pre><code>#! /usr/bin/perl\nuse warnings;\nuse strict;\n\nuse Benchmark qw{ cmpthese };\n\nmy $var = join \"\", 'a' .. 'z';\nmy $string = uc $var;\n\nmy $dot = \"\\$string . ' $var'\";\nmy $dq  = qq(\"\\$string $var\");\n\nuse Test::More tests =&gt; 1;\nis  eval $dot,\n    eval $dq,\n    'same';\n\ncmpthese(-3, {\n         dot =&gt; $dot,\n         dq  =&gt; $dq,\n});\n</code></pre>\n\n<p>The results from repeated runs seem random, so the difference is probably negligible:</p>\n\n<pre><code>1..1\nok 1 - same\n          Rate dot  dq\ndot 19583087/s  -- -6%\ndq  20725520/s  6%  --\n\n1..1\nok 1 - same\n          Rate  dq dot\ndq  18925046/s  -- -7%\ndot 20246124/s  7%  --\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 54872, "user_id": 1521179, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/MH7pk.png?s=128&g=1", "display_name": "amon", "link": "https://stackoverflow.com/users/1521179/amon"}, "edited": false, "score": 3, "creation_date": 1531408317, "post_id": 51306732, "comment_id": 89594815, "body": "I&#39;ve done some more experiments and could not find any significant difference. Concatenation seems to come out slightly ahead in most but not all runs, but the spread of results is much larger than the difference between concatenation and interpolation. Also, note that a subroutine call has much more overhead than a simple operation like string concatenation. For microbenchmarks it can be helpful to include a loop instead, e.g. <code>sub { ...  for 1 .. 1E6 }</code>."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 2, "creation_date": 1531443928, "post_id": 51306732, "comment_id": 89609013, "body": "Re &quot;<i>Concatenation is slightly faster</i>&quot;, No, they literally produce exactly the same code.  Your analysis is flawed: A difference of 0.000,000,02 s is well within the error margin"}], "tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 8, "last_activity_date": 1531468958, "last_edit_date": 1531468958, "creation_date": 1531401440, "answer_id": 51306732, "question_id": 51306198, "link": "https://stackoverflow.com/questions/51306198/checking-the-performance-of-two-ways-to-append-string-in-perl/51306732#51306732", "title": "Checking the performance of two ways to append string in Perl", "body": "<p><a href=\"https://metacpan.org/pod/Benchmark\" rel=\"nofollow noreferrer\">Benchmark</a> is the way to do this.</p>\n\n<p>The two methods you're describing are called concatenation and interpolation, so we'll use those names as labels in the test.</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\n\nuse Benchmark;\n\nmy $str = 'hello';\n\n# Run this two subroutines for at least 3 CPU seconds.\n# That \"negative seconds\" parameter is possibly the worst\n# interface in all of Perl!\ntimethese(-3, {\n  concat =&gt; sub { $str . ' world' },\n  interp =&gt; sub { \"$str world\" },\n});\n</code></pre>\n\n<p>And the results...</p>\n\n<pre><code>$ perl benchmark\nBenchmark: running concat, interp for at least 3 CPU seconds...\n    concat:  4 wallclock secs ( 3.16 usr +  0.00 sys =  3.16 CPU) @ 32680513.61/s (n=103270423)\n    interp:  3 wallclock secs ( 3.22 usr +  0.00 sys =  3.22 CPU) @ 29918605.90/s (n=96337911)\n</code></pre>\n\n<p>Concatenation is slightly faster [<strong>Note:</strong> as pointed out in the comments, that's note really true - any differences are well within the margin of error for these tests]. But note that we needed to run around a hundred million tests in order to find this tiny difference. So I don't think you really need to worry here.</p>\n"}, {"comments": [{"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 0, "creation_date": 1531459894, "post_id": 51316285, "comment_id": 89612245, "body": "Do you have 5.28 available for testing? It has some improvements to string concatenation that might be used here."}, {"owner": {"reputation": 1110, "user_id": 9749458, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/001ed2d47a01593ee5c6463c2f5fe224?s=128&d=identicon&r=PG&f=1", "display_name": "Dave Mitchell", "link": "https://stackoverflow.com/users/9749458/dave-mitchell"}, "edited": false, "score": 1, "creation_date": 1531469919, "post_id": 51316285, "comment_id": 89616819, "body": "I measure 5.28 as being more than twice as fast as 5.26 :-)"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 0, "creation_date": 1531474176, "post_id": 51316285, "comment_id": 89619298, "body": "@Shawn, 5.28 fails to build on my machine, but I don&#39;t see what they would suddenly start being different there. The optimization you&#39;re talking about would actually remove differences if anything. It really only kicks in if you concatenate more than two things, though."}, {"owner": {"reputation": 1110, "user_id": 9749458, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/001ed2d47a01593ee5c6463c2f5fe224?s=128&d=identicon&r=PG&f=1", "display_name": "Dave Mitchell", "link": "https://stackoverflow.com/users/9749458/dave-mitchell"}, "edited": false, "score": 1, "creation_date": 1531476989, "post_id": 51316285, "comment_id": 89620866, "body": "The 5.28 multiconcat optimisation also makes a big difference for my $x = ..., since it optimises away the assign and the padmy ops. (And yes, on 5.28, both the concat and stringify versions still compile to the same code as each other)"}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 3, "last_activity_date": 1531477645, "last_edit_date": 1531477645, "creation_date": 1531442907, "answer_id": 51316285, "question_id": 51306198, "link": "https://stackoverflow.com/questions/51306198/checking-the-performance-of-two-ways-to-append-string-in-perl/51316285#51316285", "title": "Checking the performance of two ways to append string in Perl", "body": "<p>They're not merely similar; they both produce exactly the same code.</p>\n\n<pre><code>$ for v in 5.10 5.12 5.14 5.16 5.18 5.20 5.22 5.24 5.26 5.28\ndo\n   diff -u \\\n      &lt;( \"$v\"t/bin/perl -MO=Concise,-exec -e'my $x = $str . \" world\"' 2&gt;&amp;1 ) \\\n      &lt;( \"$v\"t/bin/perl -MO=Concise,-exec -e'my $x = \"$str world\"'    2&gt;&amp;1 ) \\\n      &amp;&amp; echo \"$v: identical\" \\\n      || echo \"$v: different\"\ndone\n5.10: identical\n5.12: identical\n5.14: identical\n5.16: identical\n5.18: identical\n5.20: identical\n5.22: identical\n5.24: identical\n5.26: identical \n5.28: identical \n</code></pre>\n\n<p>As such, there will be no difference in performance.</p>\n\n<p>By the way, you're not thinking straight if you're wondering about the performance difference of those two; you should be thinking about readability/maintainability. </p>\n"}], "owner": {"reputation": 710, "user_id": 9218410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c988d41e9d827d1c64078fa1a73bb4c8?s=128&d=identicon&r=PG&f=1", "display_name": "TTaJTa4", "link": "https://stackoverflow.com/users/9218410/ttajta4"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 153, "favorite_count": 1, "answer_count": 3, "score": 0, "last_activity_date": 1531477645, "creation_date": 1531399899, "question_id": 51306198, "link": "https://stackoverflow.com/questions/51306198/checking-the-performance-of-two-ways-to-append-string-in-perl", "title": "Checking the performance of two ways to append string in Perl", "body": "<p>I can use the two following ways in Perl:</p>\n\n<pre><code>my $str = \"hello\";\nmy $o1 = $str.\" world\";\nmy $o2 = \"$str world\";\n</code></pre>\n\n<p>They do the same thing, although I was wondering if they are the same when speaking about performance. How can I check it? is there a special online tool?</p>\n"}, {"tags": ["perl", "subroutine", "data-transfer"], "comments": [{"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 2, "creation_date": 1531399361, "post_id": 51305674, "comment_id": 89588511, "body": "Shouldn&#39;t the <code>$cycleToUse</code> be assigned to the second item returned from the <a href=\"https://perldoc.perl.org/functions/split.html\" rel=\"nofollow noreferrer\"><code>split</code></a> call? Like: <code>(undef, $cycleToUse) = split &#47;\\s*=\\s*&#47;</code>. Note: then you should also <a href=\"https://perldoc.perl.org/functions/chomp.html\" rel=\"nofollow noreferrer\"><code>chomp</code></a> the line before you call <code>split</code> to avoid a newline character from creeping into the value... To call a subroutine defined in a variable I would use a dispatch table, e.g. <code>my %dispatch = (cycle01 =&gt; \\&amp;cycle01::cycle01 )</code> and then call the <code>sub</code> like this: <code>$dispatch{$cycleToUse}-&gt;($filename, $nb_cycle)</code>"}], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 10060052, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4209597e38bda3cdad0ecc6bb6e95f12?s=128&d=identicon&r=PG&f=1", "display_name": "chocovore17", "link": "https://stackoverflow.com/users/10060052/chocovore17"}, "edited": false, "score": 0, "creation_date": 1531401276, "post_id": 51306520, "comment_id": 89589893, "body": "Thank you very much, and do you know what to do not to use the name of the subroutine cycle01 at the end of the main program ? Because some subroutines cycle02, 03 ...  will be added later and the main program must not be changed."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 23, "user_id": 10060052, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4209597e38bda3cdad0ecc6bb6e95f12?s=128&d=identicon&r=PG&f=1", "display_name": "chocovore17", "link": "https://stackoverflow.com/users/10060052/chocovore17"}, "edited": false, "score": 0, "creation_date": 1531401529, "post_id": 51306520, "comment_id": 89590075, "body": "That&#39;s not the name of the subroutine. That&#39;s the name of the module. The one you load at the top of the program - <code>use Cycle01</code>."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1531413708, "post_id": 51306520, "comment_id": 89598111, "body": "There is also no declaration for <code>$filename</code>."}], "tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": true, "score": 4, "last_activity_date": 1531400797, "creation_date": 1531400797, "answer_id": 51306520, "question_id": 51305674, "link": "https://stackoverflow.com/questions/51305674/call-a-subroutine-defined-as-a-variable/51306520#51306520", "title": "Call a subroutine defined as a variable", "body": "<p>Your code doesn't compile, because in the final call, you have mistyped the name of <code>$nb_cycle</code>. It's helpful if you post code that actually runs :-)</p>\n\n<p>Traditionally, Perl module names start with a capital letter, so you might want to rename your package to <code>Cycle01</code>.</p>\n\n<p>The quick and dirty way to do this is to use the string version of <code>eval</code>. But evaluating an arbitrary string containing code is dangerous, so I'm not going to show you that. The best way is to use a dispatch table - basically a hash where the keys are valid subroutine names and the values are references to the subroutines themselves. The best place to add this is in the <code>Cycle01.pm</code> file:</p>\n\n<pre><code>our %subs = (\n  cycle01 =&gt; \\&amp;cycle01,\n);\n</code></pre>\n\n<p>Then, the end of your program becomes:</p>\n\n<pre><code>if (exists $Cycle01::subs{$cycleToUse}) {\n  $Cycle01::subs{$cycleToUse}-&gt;($filename, $nb_cycle);\n} else {\n  die \"$cycleToUse is not a valid subroutine name\";\n}\n</code></pre>\n\n<p>(Note that you'll also need to <code>chomp()</code> the lines as you read them in your <code>while</code> loop.)</p>\n"}, {"comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1531413973, "post_id": 51309840, "comment_id": 89598229, "body": "Your odd habit of adding a prefix to your subroutine names is irrelevant to the question and rather confuses things."}, {"owner": {"reputation": 19969, "user_id": 23512, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/tUj1I.png?s=128&g=1", "display_name": "Tanktalus", "link": "https://stackoverflow.com/users/23512/tanktalus"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1531416969, "post_id": 51309840, "comment_id": 89599669, "body": "@Borodin The point here is using <code>can</code> to get the code reference, the odd prefix habit is just how I ensure that untrusted data doesn&#39;t invoke arbitrary code (as the accepted answer also ensures)."}, {"owner": {"reputation": 3432, "user_id": 604642, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/48daad611ba387f8473b0c1e5792aa3f?s=128&d=identicon&r=PG", "display_name": "shawnhcorey", "link": "https://stackoverflow.com/users/604642/shawnhcorey"}, "edited": false, "score": 0, "creation_date": 1531486418, "post_id": 51309840, "comment_id": 89626103, "body": "This method is tainted. How do you know that a module will not use the prefix for its imported subroutines? Better to use a dispatch table and minimize possible bugs."}], "tags": [], "owner": {"reputation": 19969, "user_id": 23512, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/tUj1I.png?s=128&g=1", "display_name": "Tanktalus", "link": "https://stackoverflow.com/users/23512/tanktalus"}, "is_accepted": false, "score": 1, "last_activity_date": 1531410444, "creation_date": 1531410444, "answer_id": 51309840, "question_id": 51305674, "link": "https://stackoverflow.com/questions/51305674/call-a-subroutine-defined-as-a-variable/51309840#51309840", "title": "Call a subroutine defined as a variable", "body": "<p>To build on Dave Cross' answer, I usually avoid the hash table, partly because, in perl, everything is a hash table anyway. Instead, I have all my entry-point subs start with a particular prefix, that prefix depends on what I'm doing, but here we'll just use <code>ep_</code> for entry-point.  And then I do something like this:</p>\n\n<pre><code>my $subname = 'ep_' . $cycleToUse;\nif (my $func = Cycle01-&gt;can($subname))\n{\n  $func-&gt;($filename, $nb_cycle);\n}\nelse\n{\n  die \"$cycleToUse is not a valid subroutine name\";\n}\n</code></pre>\n\n<p>The <code>can</code> method in <code>UNIVERSAL</code> extracts the CODE reference for me from perl's hash tables, instead of me maintaining my own (and forgetting to update it).  The prefix allows me to have other functions and methods in that same namespace that cannot be called by the user code directly, allowing me to still refactor code into common functions, etc.</p>\n\n<p>If you want to have other namespaces as well, I would suggest having them all be in a single parent namespace, and potentially all prefixed the same way, and, ideally, don't allow <code>::</code> or <code>'</code> (single quote) in those names, so that you minimise the scope of what the user might call to only that which you're willing to test.</p>\n\n<p>e.g.,</p>\n\n<pre><code>die \"Invalid namespace $cycleNameSpaceToUse\"\n  if $cycleNameSpaceToUse =~ /::|'/;\nmy $ns = 'UserCallable::' . $cycleNameSpaceToUse;\nmy $subname = 'ep_' . $cycleToUse;\nif (my $func = $ns-&gt;can($subname))\n# ... as before\n</code></pre>\n\n<p>There are definitely advantages to doing it the other way, such as being explicit about what you want to expose. The advantage here is in not having to maintain a separate list. I'm always horrible at doing that.</p>\n"}], "owner": {"reputation": 23, "user_id": 10060052, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4209597e38bda3cdad0ecc6bb6e95f12?s=128&d=identicon&r=PG&f=1", "display_name": "chocovore17", "link": "https://stackoverflow.com/users/10060052/chocovore17"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 537, "favorite_count": 0, "accepted_answer_id": 51306520, "answer_count": 2, "score": 1, "last_activity_date": 1531413638, "creation_date": 1531398376, "last_edit_date": 1531413638, "question_id": 51305674, "link": "https://stackoverflow.com/questions/51305674/call-a-subroutine-defined-as-a-variable", "title": "Call a subroutine defined as a variable", "body": "<p>I am working on a program which uses different subroutines in separate files.</p>\n\n<p>There are three parts </p>\n\n<ul>\n<li><p>A text file with the name of the subroutine</p></li>\n<li><p>A Perl program with the subroutine</p></li>\n<li><p>The main program which extracts the name of the subroutine and launches it</p></li>\n</ul>\n\n<p>The subroutine takes its data from a text file.</p>\n\n<p>I need the user to choose the text file, the program then extracts the name of the subroutine. </p>\n\n<p>The text file contains</p>\n\n<pre><code>cycle.name=cycle01\n</code></pre>\n\n<p>Here is the main program : </p>\n\n<pre><code># !/usr/bin/perl -w\n\nuse strict;\nuse warnings;\n\nuse cycle01;\n\nmy $nb_cycle = 10;\n\n# The user chooses a text file\n\nprint STDERR \"\\nfilename: \";\n\nchomp($filename = &lt;STDIN&gt;);\n\n# Extract the name of the cycle \n\nopen (my $fh, \"&lt;\", \"$filename.txt\") or die \"cannot open $filename\";\n\nwhile ( &lt;$fh&gt; ) {\n\n    if ( /cycle\\.name/ ) {\n\n        (undef, $cycleToUse) = split /\\s*=\\s*/;\n    }\n}\n\n# I then try to launch the subroutine by passing variables.\n# This fails because the subroutine is defined as a variable.\n\n$cycleToUse($filename, $nb_cycle);\n</code></pre>\n\n<p>And here is the subroutine in another file</p>\n\n<pre><code># !/usr/bin/perl\n\npackage cycle01;\n\nuse strict;\nuse warnings;\n\nsub cycle01 {\n\n    # Get the total number of arguments passed\n    my ($filename, $nb_cycle) = @_;\n    print \"$filename, $nb_cycle\";\n</code></pre>\n"}, {"tags": ["perl", "file", "unix", "format"], "comments": [{"owner": {"reputation": 8974, "user_id": 205207, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/1OH7W.jpg?s=128&g=1", "display_name": "i alarmed alien", "link": "https://stackoverflow.com/users/205207/i-alarmed-alien"}, "edited": false, "score": 1, "creation_date": 1531388250, "post_id": 51301914, "comment_id": 89581074, "body": "where&#39;s the code for writing the header and the other material?"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 2, "creation_date": 1531388911, "post_id": 51301914, "comment_id": 89581530, "body": "I&#39;ve added indentation to your code. You&#39;re welcome, of course, but please consider doing yourself in the future. Clear indentation is one of the best ways to help people to understand your code and if you&#39;re asking a large number of strangers to give you help, then it&#39;s surely a good idea to make it as easy as possible for them."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 1, "creation_date": 1531389102, "post_id": 51301914, "comment_id": 89581657, "body": "<code>write()</code>? Are you really using <a href=\"https://metacpan.org/pod/distribution/perl/pod/perlform.pod\" rel=\"nofollow noreferrer\">formats</a>?"}, {"owner": {"reputation": 155, "user_id": 6135994, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-SjTwnq0Oymg/AAAAAAAAAAI/AAAAAAAAABA/NDhWurHslmA/photo.jpg?sz=128", "display_name": "Vihaari Varma", "link": "https://stackoverflow.com/users/6135994/vihaari-varma"}, "reply_to_user": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1531455539, "post_id": 51301914, "comment_id": 89611099, "body": "I have put the code regarding the header and body formats. @DaveCross, Is there any other way to print format other than write ?."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 2, "creation_date": 1531469059, "post_id": 51301914, "comment_id": 89616380, "body": "@vihaarivarma: No, <code>write()</code> is the correct function to use for formats. But I&#39;d question whether formats are ever the right tool to use in 2018!"}, {"owner": {"reputation": 155, "user_id": 6135994, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-SjTwnq0Oymg/AAAAAAAAAAI/AAAAAAAAABA/NDhWurHslmA/photo.jpg?sz=128", "display_name": "Vihaari Varma", "link": "https://stackoverflow.com/users/6135994/vihaari-varma"}, "reply_to_user": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1531474107, "post_id": 51301914, "comment_id": 89619244, "body": "@DaveCross I&#39;m still a perl learner. If there are any other ways to achieve my goal, I am pleased to know. Thanks in advance."}], "answers": [{"tags": [], "owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "is_accepted": true, "score": 1, "last_activity_date": 1531464726, "last_edit_date": 1531464726, "creation_date": 1531464008, "answer_id": 51319056, "question_id": 51301914, "link": "https://stackoverflow.com/questions/51301914/how-to-write-perl-format-header-to-multiple-files-in-a-loop/51319056#51319056", "title": "How to write perl format header to multiple files in a loop", "body": "<p>It's not writing the header to each file because closing and re-opening the <code>MODULE</code> handle doesn't reset <code>$-</code> (<code>$FORMAT_LINES_LEFT</code> with <code>use English;</code>), the variable that tracks how many lines are left in the current page. If you reset that variable to 0 each time you reopen the file handle with a new file, it'll make the format reset to a new page. It's not clear from the documentation, but you <strong>ALSO</strong> have to re-<code>select</code> the file handle before doing that. Reusing file handles is tricky; one of many reasons it's good style to use autovivified ones instead of bare handles (Though that doesn't save you from having to use <code>select</code> when using formats).</p>\n\n<pre><code>#!/usr/bin/perl\nuse warnings;\nuse strict;\nuse autodie;\n\nour $file;\n\nformat FOO_TOP =\nHeader line\n-----------\n\n.\n\nformat FOO =\nBody of @&lt;&lt;&lt;&lt;&lt;&lt;\n$file\n.\n\nfor $file (\"a.txt\", \"b.txt\") {\n  open FOO, \"&gt;\", $file;\n  my $oldfd = select FOO;\n  $- = 0;\n  select $oldfd;\n  write FOO;\n  close FOO;\n}\n</code></pre>\n\n<p>The loop in the above can be written in a more modern style like so:</p>\n\n<pre><code>for $file (\"a.txt\", \"b.txt\") {\n  open my $foo, \"&gt;\", $file;\n  my $oldfd = select $foo;\n  $^ = \"FOO_TOP\";\n  $~ = \"FOO\";\n  select $oldfd;\n  write $foo;\n  close $foo;\n}\n</code></pre>\n\n<p>Another, cleaner looking approach is to use the methods in the <a href=\"https://perldoc.perl.org/IO/Handle.html\" rel=\"nofollow noreferrer\">IO::Handle</a> module:</p>\n\n<pre><code>for $file (\"a.txt\", \"b.txt\") {\n  open FOO, \"&gt;\", $file;\n  format_lines_left FOO 0;\n  write FOO;\n  close FOO;\n}\n</code></pre>\n\n<p>or</p>\n\n<pre><code>for $file (\"a.txt\", \"b.txt\") {\n  open my $foo, \"&gt;\", $file;\n  $foo-&gt;format_name(\"FOO\");\n  $foo-&gt;format_top_name(\"FOO_TOP\");\n  write $foo;\n  close $foo;\n}\n</code></pre>\n\n<p>which does the <code>select</code> wrapping for you.</p>\n"}], "owner": {"reputation": 155, "user_id": 6135994, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-SjTwnq0Oymg/AAAAAAAAAAI/AAAAAAAAABA/NDhWurHslmA/photo.jpg?sz=128", "display_name": "Vihaari Varma", "link": "https://stackoverflow.com/users/6135994/vihaari-varma"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 199, "favorite_count": 0, "accepted_answer_id": 51319056, "answer_count": 1, "score": 0, "last_activity_date": 1531464726, "creation_date": 1531387556, "last_edit_date": 1531455448, "question_id": 51301914, "link": "https://stackoverflow.com/questions/51301914/how-to-write-perl-format-header-to-multiple-files-in-a-loop", "title": "How to write perl format header to multiple files in a loop", "body": "<p>I am developing a perl script that generates Verilog templates based on command line arguments. To that, i need to write the same header to multiple files in a loop. here is my code.</p>\n\n<pre><code>format MODULE_TOP=\n// --------------------------------------------------------------------\n// RELEASE HISTORY\n// VERSION DATE             AUTHOR            DESCRIPTION\n// @&lt;&lt;&lt;&lt;&lt;&lt; @&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;  @&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;   @&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;\n$VERSION,$DATE,$AUTHOR,$DESCRIPTION\n// --------------------------------------------------------------------\n// KEYWORDS :\n// --------------------------------------------------------------------\n// PURPOSE  :\n// --------------------------------------------------------------------\n.\nformat MODULE=\nmodule @&lt;&lt;&lt;&lt;&lt;&lt; (\n$module_name\n\n);\n//signal declarations\n\n//main body of the module\n\nendmodule\n\nforeach (@modules) {\n  $file_name = \"$_.v\";\n  open MODULE,'&gt;',$file_name or die \"$!\";\n  $FILENAME = $file_name;\n  $module_name = $_;\n  write MODULE;\n  close MODULE; \n}\n</code></pre>\n\n<p>But the header in getting written to only the first file, The rest of the modules contain only the body. Is there any way to write the header in all the files. </p>\n"}, {"tags": ["c#", "perl", "ole", "activeperl"], "owner": {"reputation": 695, "user_id": 2060441, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e093d389dd8919b616a4835e4adcf22f?s=128&d=identicon&r=PG", "display_name": "Nick P", "link": "https://stackoverflow.com/users/2060441/nick-p"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 105, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1531376120, "creation_date": 1531376120, "question_id": 51298446, "link": "https://stackoverflow.com/questions/51298446/win32ole-with-c-dll-and-returned-objects", "title": "Win32::OLE with C# DLL and returned objects", "body": "<p>I've created a working example calling a <code>C#</code> DLL from ActivePerl using <code>Win32::OLE</code>. However, as expected <code>out</code> parameters on the <code>C#</code> side are not updated on the <code>perl</code> side, but also 'complex' types (such as <code>List&lt;int&gt;</code> instead of <code>int[]</code>) do not work.</p>\n\n<p>While I can probably stick to the basics of <code>int</code>, <code>string</code>, and arrays of such, is there a way to return these complex types to <code>perl</code> apart from serialising as a <code>string</code>? At the moment, an attempt to return <code>List&lt;int&gt;</code> as below simply results in an undefined variable.</p>\n\n<p><strong>perl</strong></p>\n\n<pre><code>use Win32::OLE;\nWin32::OLE-&gt;Option(Warn =&gt; 3); # to check I'm not missing any exceptions\n\nmy $dll = Win32::OLE-&gt;new('TestDLL.TestClass');\nmy $result = $dll-&gt;GetIntList(); # $result is undef\n</code></pre>\n\n<p><strong>C#</strong></p>\n\n<pre><code>public List&lt;int&gt; GetIntList()\n{\n    return  new List&lt;int&gt;() { 1, 2, 3 };\n}\n</code></pre>\n\n<p>I've also added debugging statements to the above in C# to confirm it is called and the list has 3 members before returning.</p>\n"}, {"tags": ["perl"], "answers": [{"comments": [{"owner": {"reputation": 165, "user_id": 5496710, "user_type": "registered", "accept_rate": 34, "profile_image": "https://lh4.googleusercontent.com/-oxW_dxQk1Rk/AAAAAAAAAAI/AAAAAAAAG80/dwiQZtq7VMA/photo.jpg?sz=128", "display_name": "StarCoder17", "link": "https://stackoverflow.com/users/5496710/starcoder17"}, "edited": false, "score": 0, "creation_date": 1531381268, "post_id": 51298626, "comment_id": 89576566, "body": "Thanks Nick, How can i store or print this hash value to verify whether its taking only unique values from column 1 and respective values from column 2."}, {"owner": {"reputation": 695, "user_id": 2060441, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e093d389dd8919b616a4835e4adcf22f?s=128&d=identicon&r=PG", "display_name": "Nick P", "link": "https://stackoverflow.com/users/2060441/nick-p"}, "reply_to_user": {"reputation": 165, "user_id": 5496710, "user_type": "registered", "accept_rate": 34, "profile_image": "https://lh4.googleusercontent.com/-oxW_dxQk1Rk/AAAAAAAAAAI/AAAAAAAAG80/dwiQZtq7VMA/photo.jpg?sz=128", "display_name": "StarCoder17", "link": "https://stackoverflow.com/users/5496710/starcoder17"}, "edited": false, "score": 0, "creation_date": 1531441166, "post_id": 51298626, "comment_id": 89608480, "body": "@DanishSheikh <a href=\"https://perldoc.perl.org/Data/Dumper.html\" rel=\"nofollow noreferrer\">Data::Dumper</a> is the typical method, it uses references so something like <code>print Dumper \\%seen;</code>"}], "tags": [], "owner": {"reputation": 695, "user_id": 2060441, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e093d389dd8919b616a4835e4adcf22f?s=128&d=identicon&r=PG", "display_name": "Nick P", "link": "https://stackoverflow.com/users/2060441/nick-p"}, "is_accepted": false, "score": 1, "last_activity_date": 1531376810, "creation_date": 1531376810, "answer_id": 51298626, "question_id": 51298376, "link": "https://stackoverflow.com/questions/51298376/perl-read-columns-and-convert-to-array/51298626#51298626", "title": "Perl: Read columns and convert to array", "body": "<p>Change the loop to be something like:</p>\n\n<pre><code>while (my $line = &lt;FILE&gt;)\n{\n    chomp($line);\n    my @elements = split (\" \", $line);\n    push(@{$seen{$elements[0]}}, $elements[1]);\n}\n</code></pre>\n\n<p>This will create/append a list of each item as it is found, and result in a hash where the keys are the left items, and the values are lists of the right items. You can then process or reassign the values as you wish.</p>\n"}, {"comments": [{"owner": {"reputation": 3432, "user_id": 604642, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/48daad611ba387f8473b0c1e5792aa3f?s=128&d=identicon&r=PG", "display_name": "shawnhcorey", "link": "https://stackoverflow.com/users/604642/shawnhcorey"}, "edited": false, "score": 0, "creation_date": 1531394880, "post_id": 51301146, "comment_id": 89585431, "body": "Storing data by a name in the data is called symbolic referencing, in case you want to research it. This is bad because the wrong name in the data could clobber a Perl variable. Using a hash with the name as a key is much better."}], "tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": true, "score": 3, "last_activity_date": 1531385374, "creation_date": 1531385374, "answer_id": 51301146, "question_id": 51298376, "link": "https://stackoverflow.com/questions/51298376/perl-read-columns-and-convert-to-array/51301146#51301146", "title": "Perl: Read columns and convert to array", "body": "<p>Firstly some general Perl advice. These days, we like to use lexical variables as filehandles and pass three arguments to <code>open()</code>.</p>\n\n<pre><code>open(my $fh, '&lt;', $filename) or die \"Could not open file '$filename' $!\";\n</code></pre>\n\n<p>And then...</p>\n\n<pre><code>while (&lt;$fh&gt;) { ... }\n</code></pre>\n\n<p>But, given that you have your filename in <code>$ARGV[0]</code>, another tip is to use an empty file input operator (<code>&lt;&gt;</code>) which will return data from the files named in <code>@ARGV</code> without you having to open them. So you can remove your <code>open()</code> line completely and replace the <code>while</code> with:</p>\n\n<pre><code>while (&lt;&gt;) { ... }\n</code></pre>\n\n<p>Second piece of advice - don't store this data in individual arrays. Far better to store it in a more complex data structure. I'd suggest a hash where the key is the letter and the value is an array containing all of the numbers matching that letter. This is surprisingly easy to build:</p>\n\n<pre><code>use strict;\nuse warnings;\nuse feature 'say';\n\nmy %data; # I'd give this a better name if I knew what your data was\n\nwhile (&lt;&gt;) {\n  chomp;\n  my ($letter, $number) = split; # splits $_ on whitespace by default\n  push @{ $data{$letter} }, $number;\n}\n\n# Walk the hash to see what we've got\nfor (sort keys %data) {\n  say \"$_ : @{ $data{$_ } }\";\n}\n</code></pre>\n"}], "owner": {"reputation": 165, "user_id": 5496710, "user_type": "registered", "accept_rate": 34, "profile_image": "https://lh4.googleusercontent.com/-oxW_dxQk1Rk/AAAAAAAAAAI/AAAAAAAAG80/dwiQZtq7VMA/photo.jpg?sz=128", "display_name": "StarCoder17", "link": "https://stackoverflow.com/users/5496710/starcoder17"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 334, "favorite_count": 1, "accepted_answer_id": 51301146, "answer_count": 2, "score": 0, "last_activity_date": 1531385374, "creation_date": 1531375739, "question_id": 51298376, "link": "https://stackoverflow.com/questions/51298376/perl-read-columns-and-convert-to-array", "title": "Perl: Read columns and convert to array", "body": "<p>I am new to perl, trying to read a file with columns and creating an array.\nI am having a file with following columns.</p>\n\n<pre><code>file.txt\nA    15\nA    20\nA    33 \nB    20 \nB    45\nC    32\nC    78\n</code></pre>\n\n<p>I wanted to create an array for each unique item present in A with its values assigned from second column.\neg:</p>\n\n<pre><code>@A = (15,20,33)\n@B = (20,45)\n@C = (32,78)\n</code></pre>\n\n<p>Tried following code, only for printing 2 columns</p>\n\n<pre><code>use strict;\nuse warnings;\nmy $filename = $ARGV[0];\nopen(FILE, $filename) or die \"Could not open file '$filename' $!\";\nmy %seen;\nwhile (&lt;FILE&gt;)\n{\n    chomp;\n    my $line = $_;\n    my @elements = split (\" \", $line);\n    my $row_name = join \"\\t\", @elements[0,1];\n    print $row_name . \"\\n\" if ! $seen{$row_name}++;\n\n}\nclose FILE;\n</code></pre>\n\n<p>Thanks</p>\n"}, {"tags": ["bash", "perl", "csv", "awk", "sed"], "comments": [{"owner": {"reputation": 95936, "user_id": 5866580, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/1de2cd722d865edac1575102a48ecc0a?s=128&d=identicon&r=PG&f=1", "display_name": "RavinderSingh13", "link": "https://stackoverflow.com/users/5866580/ravindersingh13"}, "edited": false, "score": 1, "creation_date": 1531364951, "post_id": 51296673, "comment_id": 89570863, "body": "Always try to show your efforts too which you have put to solve the issue in your post in code tags."}, {"owner": {"reputation": 33, "user_id": 1174924, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8b5d5eec2e83ca7628a563e53e06e4fc?s=128&d=identicon&r=PG", "display_name": "xsnk", "link": "https://stackoverflow.com/users/1174924/xsnk"}, "reply_to_user": {"reputation": 95936, "user_id": 5866580, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/1de2cd722d865edac1575102a48ecc0a?s=128&d=identicon&r=PG&f=1", "display_name": "RavinderSingh13", "link": "https://stackoverflow.com/users/5866580/ravindersingh13"}, "edited": false, "score": 1, "creation_date": 1531371217, "post_id": 51296673, "comment_id": 89572112, "body": "Thank you very much for the answer! I was trying to write a huge bash script on tty, before deleting it. Will make sure to post my efforts next time!"}, {"owner": {"reputation": 3432, "user_id": 604642, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/48daad611ba387f8473b0c1e5792aa3f?s=128&d=identicon&r=PG", "display_name": "shawnhcorey", "link": "https://stackoverflow.com/users/604642/shawnhcorey"}, "edited": false, "score": 1, "creation_date": 1531394964, "post_id": 51296673, "comment_id": 89585493, "body": "Please show the code of what you have tried so far."}], "answers": [{"tags": [], "owner": {"reputation": 95936, "user_id": 5866580, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/1de2cd722d865edac1575102a48ecc0a?s=128&d=identicon&r=PG&f=1", "display_name": "RavinderSingh13", "link": "https://stackoverflow.com/users/5866580/ravindersingh13"}, "is_accepted": true, "score": 0, "last_activity_date": 1531364824, "last_edit_date": 1531364824, "creation_date": 1531364292, "answer_id": 51296700, "question_id": 51296673, "link": "https://stackoverflow.com/questions/51296673/selectively-transposing-a-large-csv/51296700#51296700", "title": "Selectively transposing a large CSV", "body": "<p>If you don't care about the order of the output should be same as Input_file then following may help you here.</p>\n\n<pre><code>awk 'BEGIN{FS=\", \";OFS=\",\"}{a[$1]=a[$1]?a[$1] OFS $NF:$NF} END{for(i in a){print i,a[i]}}' Input_file\n</code></pre>\n\n<p><strong><em>OR</em></strong></p>\n\n<pre><code>awk '\nBEGIN{  FS=\", \";OFS=\",\"  }\n{\n  a[$1]=a[$1]?a[$1] OFS $NF:$NF\n}\nEND{\n  for(i in a){ print i,a[i] }\n}' Input_file\n</code></pre>\n\n<p><strong><em>2nd Solution:</em></strong> In case you want output order should be same as Input_file's order then following may help you.</p>\n\n<pre><code>awk '\nBEGIN   { FS=\", \";OFS=\",\" }\n!b[$1]++{ c[++count]=$1   }\n{\n  a[$1]=a[$1]?a[$1] OFS $NF:$NF\n}\nEND{\n  for(i=1;i&lt;=count;i++){  print c[i],a[c[i]]  }\n}'  Input_file\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 95936, "user_id": 5866580, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/1de2cd722d865edac1575102a48ecc0a?s=128&d=identicon&r=PG&f=1", "display_name": "RavinderSingh13", "link": "https://stackoverflow.com/users/5866580/ravindersingh13"}, "edited": false, "score": 0, "creation_date": 1531368246, "post_id": 51297075, "comment_id": 89571423, "body": "You could remove <code>cat</code> in second solution and could use it with <code>sort</code> itself."}, {"owner": {"reputation": 3543, "user_id": 6329118, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c5a20c0ed8a82fd967952e2539203af9?s=128&d=identicon&r=PG&f=1", "display_name": "CWLiu", "link": "https://stackoverflow.com/users/6329118/cwliu"}, "reply_to_user": {"reputation": 95936, "user_id": 5866580, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/1de2cd722d865edac1575102a48ecc0a?s=128&d=identicon&r=PG&f=1", "display_name": "RavinderSingh13", "link": "https://stackoverflow.com/users/5866580/ravindersingh13"}, "edited": false, "score": 1, "creation_date": 1531369868, "post_id": 51297075, "comment_id": 89571817, "body": "Thanks @RavinderSingh13, modified it."}, {"owner": {"reputation": 33, "user_id": 1174924, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8b5d5eec2e83ca7628a563e53e06e4fc?s=128&d=identicon&r=PG", "display_name": "xsnk", "link": "https://stackoverflow.com/users/1174924/xsnk"}, "edited": false, "score": 0, "creation_date": 1531371381, "post_id": 51297075, "comment_id": 89572157, "body": "Thank you so much for the answer!! Next time I will make sure to post what I tried first!!"}, {"owner": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "edited": false, "score": 1, "creation_date": 1531399964, "post_id": 51297075, "comment_id": 89588990, "body": "Never do <code>printf $N</code>, always do <code>printf &quot;%s&quot;, $N</code> instead. Consider the difference when <code>$N</code> contains printf formatting chars like <code>%s</code>. What <code>END{print}</code> does is undefined by POSIX so in some awks it&#39;ll print the last record read, in others it&#39;ll print a null string, and in others it could do just about anything else. Finally - that script just cannot produce the desired output, try it."}], "tags": [], "owner": {"reputation": 3543, "user_id": 6329118, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c5a20c0ed8a82fd967952e2539203af9?s=128&d=identicon&r=PG&f=1", "display_name": "CWLiu", "link": "https://stackoverflow.com/users/6329118/cwliu"}, "is_accepted": false, "score": 0, "last_activity_date": 1531369848, "last_edit_date": 1531369848, "creation_date": 1531367869, "answer_id": 51297075, "question_id": 51296673, "link": "https://stackoverflow.com/questions/51296673/selectively-transposing-a-large-csv/51297075#51297075", "title": "Selectively transposing a large CSV", "body": "<p>Here's another solution for <code>awk</code>, depends on whether your data is sorted for the first column</p>\n\n<p><strong>Sorted:</strong></p>\n\n<pre><code>awk -F',' -v OFS=',' '{if(a!=$1){printf (a!=\"\")?\"\\n\"$1:$1;a=$1} printf \"%s%s\",OFS,$2}END{print}'\n</code></pre>\n\n<p>Brief explanation,</p>\n\n<ol>\n<li><code>if(a!=$1){printf (a!=\"\")?\"\\n\"$1:$1;a=$1}</code>: defined <code>a</code> and print it if it's not defined</li>\n<li><code>printf \"%s%s\",OFS,$2</code>: always print the following columns.</li>\n</ol>\n\n<p><strong>Unsorted</strong></p>\n\n<pre><code>sort -sk1,1 file | awk -F',' -v OFS=',' '{if(a!=$1){printf (a!=\"\")?\"\\n\"$1:$1;a=$1} printf \"%s%s\",OFS,$2}END{print}'\n</code></pre>\n\n<p>Sorted the first column by using <code>sort -sk1,1</code>, then do the same job as sorted one.</p>\n"}, {"tags": [], "owner": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "is_accepted": false, "score": 0, "last_activity_date": 1531399889, "creation_date": 1531399889, "answer_id": 51306195, "question_id": 51296673, "link": "https://stackoverflow.com/questions/51296673/selectively-transposing-a-large-csv/51306195#51306195", "title": "Selectively transposing a large CSV", "body": "<p>This just prints the values for each unique key as it finds it so you don't have to store the whole huge file in memory:</p>\n\n<pre><code>$ cat tst.awk\nBEGIN {\n    FS  = \"[[:space:]]*,[[:space:]]*\"\n    OFS = \", \"\n}\n$1 != prev {\n    if ( NR &gt; 1 ) {\n        prt()\n    }\n    prev = $1\n}\n{\n    vals[++numVals] = $2\n}\nEND {\n    prt()\n}\nfunction prt(   numCols, colNr, val) {\n    numCols = 3\n    printf \"%s\", prev\n    for (colNr=1; colNr&lt;=numCols; colNr++) {\n        val = (colNr in vals ? vals[colNr] : \"nil\")\n        printf \"%s%s\", OFS, val\n    }\n    print \"\"\n    delete vals\n    numVals = 0\n}\n\n$ awk -f tst.awk file\nA, XYZ, ZSY, TVT\nB, GHJ, XYZ, nil\nC, XYZ, TVT, nil\n</code></pre>\n"}], "owner": {"reputation": 33, "user_id": 1174924, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8b5d5eec2e83ca7628a563e53e06e4fc?s=128&d=identicon&r=PG", "display_name": "xsnk", "link": "https://stackoverflow.com/users/1174924/xsnk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 257, "favorite_count": 0, "accepted_answer_id": 51296700, "answer_count": 3, "score": 0, "last_activity_date": 1531399889, "creation_date": 1531364002, "last_edit_date": 1531364347, "question_id": 51296673, "link": "https://stackoverflow.com/questions/51296673/selectively-transposing-a-large-csv", "title": "Selectively transposing a large CSV", "body": "<p>I am working on some huge CSV files (> 500 MB) on a tty Linux. I have my data in this format:</p>\n\n<pre><code>A, XYZ\nA, ZSY\nA, TVT\nB,  GHJ\nB, XYZ\nC,  XYZ\nC, TVT\n</code></pre>\n\n<p>Output should be as follows.</p>\n\n<pre><code>A, XYZ, ZSY, TVT\nB, GHJ, XYZ, nil\nC, XYZ, TVT, nil\n</code></pre>\n\n<p>The first column works as a key, and transposes all the other corresponding rows into columns. I only have standard Unix tools (+ perl). </p>\n\n<p>Is there any standard Unix solution to solve this pragmatically?</p>\n"}]