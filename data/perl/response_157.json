[{"tags": ["perl"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1515614722, "post_id": 48195133, "comment_id": 83371289, "body": "You don&#39;t need a prototype. You should never use prototypes unless you&#39;re certain what you&#39;re doing and have a great reason.Just pass the lexical file handle as a parameter. Don&#39;t use global file handles. If you need to use a built-in file handle like <code>STDOUT</code> then pass a reference to the glob: <code>\\*STDOUT</code>."}, {"owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1515615151, "post_id": 48195133, "comment_id": 83371495, "body": "@Borodin Well, I think the question is about the special syntax of <code>print</code>: the filehandle is optional and is <i>not</i> followed by a comma <code>, </code>. <a href=\"https://stackoverflow.com/a/388211/5830574\">This</a> is an interesting answer about redefining <code>print</code>. They say it doesn&#39;t work."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 1, "creation_date": 1515616200, "post_id": 48195133, "comment_id": 83372069, "body": "@Perl: <code>print $fh</code> uses <code>$fh</code> as an object with a <code>print</code> method. It&#39;s only valid Perl because it&#39;s an established idiom, and it really should be <code>$fh-&gt;print(...)</code>. If the OP wants that then they should subclass <code>IO::File</code>, but it would have to be a very special requirement to need such chicanery."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1515624489, "post_id": 48195133, "comment_id": 83375743, "body": "@Thomson: Why do you want to do this? What do you need that ordinary subroutines can&#39;t offer? It&#39;s very odd to want to write something that pretends to be part of the language when it&#39;s clearly not."}, {"owner": {"reputation": 17943, "user_id": 396383, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/9WwJr.jpg?s=128&g=1", "display_name": "Thomson", "link": "https://stackoverflow.com/users/396383/thomson"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1515628257, "post_id": 48195133, "comment_id": 83376914, "body": "@Borodin, I am trying to write a logging method and want to get similar syntax as built-in <code>print</code>, like if <code>$filehandle</code> is not specified, just log to console. I thought <code>print</code> is just an built-in Perl function and I could mimic it in my code."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1515628410, "post_id": 48195133, "comment_id": 83376961, "body": "@Thomson: <code>print</code> is a built-in operator, but why do you want to emulate it? What&#39;s wrong with <code>sub myprint { ... }</code>? I assume you wouldn&#39;t want to write a replacement for <code>use</code>, <code>for</code>, <code>next</code> etc.?"}, {"owner": {"reputation": 17943, "user_id": 396383, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/9WwJr.jpg?s=128&g=1", "display_name": "Thomson", "link": "https://stackoverflow.com/users/396383/thomson"}, "edited": false, "score": 0, "creation_date": 1515628725, "post_id": 48195133, "comment_id": 83377034, "body": "Just for similarity. I assumed it is in special prototype but I am wrong. Switching to normal Perl function is fine."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1515629707, "post_id": 48195133, "comment_id": 83377330, "body": "@Thomson: The last thing you want is apparent  <i>similarity</i> when what you&#39;re writing is actually completely different from the core operator."}], "answers": [{"comments": [{"owner": {"reputation": 17943, "user_id": 396383, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/9WwJr.jpg?s=128&g=1", "display_name": "Thomson", "link": "https://stackoverflow.com/users/396383/thomson"}, "edited": false, "score": 0, "creation_date": 1515652977, "post_id": 48195721, "comment_id": 83383273, "body": "Any reference about <code>NAME EXPR LIST</code> syntax? Haven&#39;t got meaning answer via literal search."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 17943, "user_id": 396383, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/9WwJr.jpg?s=128&g=1", "display_name": "Thomson", "link": "https://stackoverflow.com/users/396383/thomson"}, "edited": false, "score": 0, "creation_date": 1515654037, "post_id": 48195721, "comment_id": 83383731, "body": "You mean indirect method call syntax? A <a href=\"https://www.google.ca/search?q=site%3Aperldoc.perl.org+indirect+method+call+syntax\" rel=\"nofollow noreferrer\">search</a> leads to <a href=\"https://perldoc.perl.org/perlobj.html#Indirect-Object-Syntax\" rel=\"nofollow noreferrer\">this</a>"}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 3, "last_activity_date": 1515698134, "last_edit_date": 1515698134, "creation_date": 1515616869, "answer_id": 48195721, "question_id": 48195133, "link": "https://stackoverflow.com/questions/48195133/create-perl-function-which-accepts-optional-file-handle-like-built-in-print/48195721#48195721", "title": "Create Perl function which accepts optional file handle like built-in print?", "body": "<p>The syntax of <code>print</code> can't be replicated by Perl subs.</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>$ perl -le'print defined(prototype(\"CORE::print\")) ? \"Can\" : \"Can'\\''t\", \" be replicated\"'\nCan't be replicated\n</code></pre>\n\n<p>Specifically, the syntax <code>NAME EXPR LIST</code> can't be used to call a Perl sub because the syntax is for an indirect method call. <code>NAME EXPR LIST</code> already means <code>EXPR-&gt;NAME(LIST)</code></p>\n\n<p><strong>Option 1</strong></p>\n\n<pre><code># myprint $fh, LIST\n# myprint *FH, LIST\n# myprint \\*FH, LIST\n\nsub myprint {\n   my $fh = shift;\n   ...\n}\n</code></pre>\n\n<p><strong>Option 2</strong></p>\n\n<pre><code># myprint $fh, LIST\n# myprint *FH, LIST\n# myprint \\*FH, LIST\n# myprint FH, LIST\n\nsub myprint(*@) {\n   my $fh = shift;\n   if (!ref($fh)) {\n      $fh = caller().'::'.$fh if $fh !~ /^(?:ARGV|STD(?:IN|OUT|ERR))\\z/;\n      no strict qw( refs );\n      $fh = \\*$fh;\n   }\n\n   ...\n}\n</code></pre>\n\n<hr>\n\n<p>On the flip side, even <code>print</code> doesn't actually support <code>print EXPR LIST</code>. It supports the following syntaxes:</p>\n\n<pre><code>print LIST         # Short for: print { select() } LIST\nprint IDENT LIST   # Short for: print { \\*IDENT  } LIST\nprint $VAR LIST    # Short for: print { $VAR     } LIST\nprint BLOCK LIST\n</code></pre>\n\n<p>You can actually support the final form of <code>print</code> (for which the others are merely shortcuts):</p>\n\n<pre><code># myprint { select } LIST\n# myprint { $fh } LIST\n# myprint { *FH } LIST\n# myprint { \\*FH } LIST\n\nsub myprint(&amp;@) {\n   my $fh = shift-&gt;();\n   ...\n}\n</code></pre>\n\n<p>I like this solution less than the first two.</p>\n"}, {"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1515633405, "post_id": 48197777, "comment_id": 83378256, "body": "<code>print $fh @list</code> isn&#39;t a method call (indirect or otherwise), and it&#39;s not equivalent to <code>$fh-&gt;print(@list)</code> or <code>IO::Handle::print($fh, &quot;hello\\n&quot;)</code>."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1515633843, "post_id": 48197777, "comment_id": 83378353, "body": "<code>$fh-&gt;print(@list)</code> has worked since 5.8, but you had to make sure IO::Handle was loaded until 5.14."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1515634309, "post_id": 48197777, "comment_id": 83378441, "body": "Finally, and most importantly, you&#39;re are advocating monkey-patching a basic class for no reason. That&#39;s horrible advice!"}, {"owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1515681978, "post_id": 48197777, "comment_id": 83400422, "body": "No, I&#39;m advocating monkey-patching a basic class for a reason."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1515682027, "post_id": 48197777, "comment_id": 83400461, "body": "Elaborate. Even if the OP had asked to create a method for all file handles (which they didn&#39;t), that wouldn&#39;t be a reason for doing it. (It would be a reason to tell them not to do it.) What possible reason is there to add <code>myprint</code> to IO::Handle?"}, {"owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1515682829, "post_id": 48197777, "comment_id": 83401006, "body": "To create new functions that can be invoked with <code>func FILEHANDLE LIST</code> syntax."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1515683183, "post_id": 48197777, "comment_id": 83401235, "body": "But that&#39;s not what you did; you did far far more than that. /// I also see your answer still claims that <code>print $fh</code> is equivalent to <code>$fh-&gt;print</code>. Unlike the latter, the former doesn&#39;t call <code>IO::Handle::print</code> (unlike what your comment claims)."}], "tags": [], "owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "is_accepted": false, "score": 2, "last_activity_date": 1515628068, "last_edit_date": 1515628068, "creation_date": 1515627207, "answer_id": 48197777, "question_id": 48195133, "link": "https://stackoverflow.com/questions/48195133/create-perl-function-which-accepts-optional-file-handle-like-built-in-print/48197777#48197777", "title": "Create Perl function which accepts optional file handle like built-in print?", "body": "<p><code>print $fh @list</code> as an example of an indirect method call, equivalent to</p>\n\n<pre><code>$fh-&gt;print(@list)\n</code></pre>\n\n<p>To use a different function that can be indirectly invoked with a filehandle, define it in the <code>IO::Handle</code> package.</p>\n\n<pre><code>sub IO::Handle::myprint {\n    my ($self, @list) = @_;\n    #$self-&gt;print(scalar localtime,\": \",@list);\n    print $self scalar localtime, \": \", @list;\n}\n\nopen my $fh, '&gt;', 'foo';\nprint $fh \"hello\\n\";          # IO::Handle::print($fh, \"hello\\n\")\nmyprint $fh \"world\\n\";        # IO::Handle::myprint($fh, \"world\\n\")\nclose $fh;\n</code></pre>\n\n<p><strike>This works with Perl v5.16 and better, and doesn't work with Perl v5.12 and earlier, for reasons I haven't investigated (maybe it's because it's not until v5.14 or v5.16 that all filehandles are automatically blessed into <code>IO::File</code>)</strike></p>\n\n<p>This seems to work on all versions of Perl back to at least v5.8. It's the syntax <code>$self-&gt;print(...)</code> inside the <code>myprint</code> method that requires v5.16 (or maybe v5.14, whenever it was that all filehandles were automatically blessed into <code>IO::File</code>) -- <code>print $self ...</code> still works with older Perls.</p>\n"}], "owner": {"reputation": 17943, "user_id": 396383, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/9WwJr.jpg?s=128&g=1", "display_name": "Thomson", "link": "https://stackoverflow.com/users/396383/thomson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 163, "favorite_count": 2, "closed_date": 1515657056, "answer_count": 2, "score": 2, "last_activity_date": 1515698134, "creation_date": 1515614207, "last_edit_date": 1515618520, "question_id": 48195133, "link": "https://stackoverflow.com/questions/48195133/create-perl-function-which-accepts-optional-file-handle-like-built-in-print", "closed_reason": "Needs details or clarity", "title": "Create Perl function which accepts optional file handle like built-in print?", "body": "<p>How to declare the function prototype if I want to get similar parameter passing as built-in <code>print</code>, like accepts optional first parameter which is file handle? For example, the calling syntax would be <code>myprint $filehandle @mylist</code>.</p>\n"}, {"tags": ["r", "perl", "csv"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1515607388, "post_id": 48193433, "comment_id": 83367513, "body": "Add the shebang line (<code>#!&#47;usr&#47;bin&#47;perl</code>) and make the file executable. Then, it just becomes a question of a launching an executable from R."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1515607443, "post_id": 48193433, "comment_id": 83367538, "body": "That&#39;s a horrible way to generate CSV. Use Text::CSV_XS. (And if the input is really a tab-separated file, you should also use Text::CSV_XS to parse the input!)"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1515609008, "post_id": 48193433, "comment_id": 83368422, "body": "My comments have nothing to do with your question, so no, I can&#39;t elaborate. If you want your code reviewed, there&#39;s a StackExchange site where you can do that. <a href=\"https://codereview.stackexchange.com/\">codereview.stackexchange.com</a>"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1515609917, "post_id": 48193433, "comment_id": 83368900, "body": "<i>&quot;nothing with this complexity.&quot;</i> It&#39;s thirty lines!!"}], "answers": [{"tags": [], "owner": {"reputation": 11, "user_id": 7055214, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f82db0c936c7753e1ea857c802ccdb83?s=128&d=identicon&r=PG", "display_name": "kaiux", "link": "https://stackoverflow.com/users/7055214/kaiux"}, "is_accepted": false, "score": 1, "last_activity_date": 1516480683, "creation_date": 1516480683, "answer_id": 48360845, "question_id": 48193433, "link": "https://stackoverflow.com/questions/48193433/execute-a-perl-script-from-r/48360845#48360845", "title": "Execute a Perl script from R", "body": "<p>Call it by using R's system call:</p>\n\n<pre><code>my.seed &lt;- as.numeric(try(system(\" perl -e 'print int(rand(1000000))'\", intern = TRUE))) #get random number :D\n</code></pre>\n\n<p>However, I must agree with @ikegami, there are better modules to handle CSV data.</p>\n"}], "owner": {"reputation": 224, "user_id": 8104893, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/552139501d9907e150275d1a0450e67a?s=128&d=identicon&r=PG&f=1", "display_name": "ebb", "link": "https://stackoverflow.com/users/8104893/ebb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 655, "favorite_count": 0, "answer_count": 1, "score": -3, "last_activity_date": 1516480683, "creation_date": 1515606990, "last_edit_date": 1515609867, "question_id": 48193433, "link": "https://stackoverflow.com/questions/48193433/execute-a-perl-script-from-r", "title": "Execute a Perl script from R", "body": "<p>I need to execute a Perl program as part of a larger R program.</p>\n\n<p>The R code generates a series of output files with different extensions, for instance <code>.out</code> or <code>.lis</code>.</p>\n\n<p>I have a Perl program that converts those files to CSV.</p>\n\n<p>I've seen Perl arguments executed on R, but nothing with this complexity.</p>\n\n<pre><code>@outfiles = glob( \"*.lis\" );\n\nforeach $outfile ( @outfiles ) {\n\n    print $outfile, \"\\n\";\n\n    $outfile =~ /(\\S+)lis$/;\n    $csvfile = $1 . \"lis.csv\";\n    print $csvfile, \"\\n\";\n\n    open( OUTFILE, \"$outfile\" )  || die \"ERROR: Unable to open $outfile\\n\";\n    open( CSVFILE, \"&gt;$csvfile\" ) || die \"ERROR: Unable to open $csvfile\\n\";\n\n    $lineCnt = 0;\n\n    while ( $outline = &lt;OUTFILE&gt; ) {\n        chomp( $outline );\n\n        $lineCnt++;\n\n        $outline =~ s/^\\s+//;    # Remove whitespace at the beginning of the line\n        if ( $lineCnt == 1 ) {\n            $outline =~ s/,/\\./g;    # Replace all the commas with periods in the hdr line\n        }\n\n        $outline =~ s/\\s+/,/g;       # Replace remaining whitespace delimiters with a comma\n        print CSVFILE \"$outline\\n\";\n    }\n\n    close( OUTFILE );\n    close( CSVFILE );\n}\n</code></pre>\n\n<p>Is there any way I can integrate the Perl code into my R code? I could develop an R program that does the same. But I wouldn't know where to start to convert a <code>.lis</code> or <code>.out</code> file to <code>.csv</code>.</p>\n"}, {"tags": ["perl", "cpan", "hp-ux"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1515603536, "post_id": 48190605, "comment_id": 83365377, "body": "Try using <code>cpan</code> instead. In my experience it can often install a module successfully when <code>cpanm</code> fails. After all, people are likely to test their install script only with <code>cpan</code>. If that fails, try starting <code>cpan</code> and then using <code>look ExtUtils::MakeMaker</code> followed by <code>perl Makefile.pl</code>; <code>gmake</code>; <code>gmake test</code>; and <code>gmake install</code> (if the tests succeeded, or at your own risk) as described in <a href=\"https://perldoc.perl.org/perlmodinstall.html\" rel=\"nofollow noreferrer\"><code>perlmodinstall</code></a>."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1515603646, "post_id": 48190605, "comment_id": 83365435, "body": "Thanks. Is <code>gmake</code> in your PATH?"}, {"owner": {"reputation": 1013, "user_id": 8715761, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/637c6b941109f3e57ab5e8125d0feef9?s=128&d=identicon&r=PG&f=1", "display_name": "Rutnet", "link": "https://stackoverflow.com/users/8715761/rutnet"}, "edited": false, "score": 0, "creation_date": 1515684107, "post_id": 48190605, "comment_id": 83401859, "body": "gmake was not installed. After installing this worked fine! Thanks"}], "answers": [{"tags": [], "owner": {"reputation": 1013, "user_id": 8715761, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/637c6b941109f3e57ab5e8125d0feef9?s=128&d=identicon&r=PG&f=1", "display_name": "Rutnet", "link": "https://stackoverflow.com/users/8715761/rutnet"}, "is_accepted": true, "score": 0, "last_activity_date": 1515885331, "creation_date": 1515885331, "answer_id": 48245176, "question_id": 48190605, "link": "https://stackoverflow.com/questions/48190605/cpan-module-installation-fails/48245176#48245176", "title": "CPAN Module Installation Fails", "body": "<p>gmake was not installed. After installing this worked fine! Thanks</p>\n"}, {"tags": [], "owner": {"reputation": 601, "user_id": 3352877, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8932cb7d42c222a951c2be6589eb6cfd?s=128&d=identicon&r=PG&f=1", "display_name": "Matt", "link": "https://stackoverflow.com/users/3352877/matt"}, "is_accepted": false, "score": 0, "last_activity_date": 1593520254, "creation_date": 1593520254, "answer_id": 62657523, "question_id": 48190605, "link": "https://stackoverflow.com/questions/48190605/cpan-module-installation-fails/62657523#62657523", "title": "CPAN Module Installation Fails", "body": "<p>I had this trouble with CPAN</p>\n<p>The key in your error &quot;You probably need to have 'make'.&quot;</p>\n<pre><code>sudo apt install build-essential\n</code></pre>\n<p>Will install makefile.pl</p>\n<p>Strange that something essential is not installed by default?</p>\n"}], "owner": {"reputation": 1013, "user_id": 8715761, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/637c6b941109f3e57ab5e8125d0feef9?s=128&d=identicon&r=PG&f=1", "display_name": "Rutnet", "link": "https://stackoverflow.com/users/8715761/rutnet"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1184, "favorite_count": 0, "accepted_answer_id": 48245176, "answer_count": 2, "score": 2, "last_activity_date": 1593520254, "creation_date": 1515597619, "last_edit_date": 1515601188, "question_id": 48190605, "link": "https://stackoverflow.com/questions/48190605/cpan-module-installation-fails", "title": "CPAN Module Installation Fails", "body": "<p>Trying to install certain CPAN modules on HP-UX (May 2017), but getting an error:</p>\n\n<pre><code># cpanm ExtUtils-MakeMaker-7.30.tar.gz\n--&gt; Working on ExtUtils-MakeMaker-7.30.tar.gz\nFetching file:///home/users/root_user/CPAN/ExtUtils-MakeMaker-7.30.tar.gz ... OK\nConfiguring ExtUtils-MakeMaker-7.30 ... OK\n! Can't configure the distribution. You probably need to have 'make'. See /.cpanm/work/1515577528.15913/build.log for details.\n</code></pre>\n\n<p>But, looks like Perl is set to use gmake. </p>\n\n<pre><code># perl -V:make\nmake='gmake';\n</code></pre>\n\n<p>make is installed on the system. How do I resolve this? Any help is appreciated.</p>\n\n<p>Build Log File</p>\n\n<pre><code>cpanm (App::cpanminus) 1.7043 on perl 5.008008 built for IA64.ARCHREV_0-thread-multi\nWork directory is //.cpanm/work/1515577528.15913\nYou have LWP 5.820\nFalling back to Archive::Tar 1.40\n--&gt; Working on ExtUtils-MakeMaker-7.30.tar.gz\nFetching file:///home/users/root_user/CPAN/ExtUtils-MakeMaker-7.30.tar.gz\n-&gt; OK\nUnpacking ExtUtils-MakeMaker-7.30.tar.gz\nEntering ExtUtils-MakeMaker-7.30\nChecking configure dependencies from META.json\nConfiguring ExtUtils-MakeMaker-7.30\nRunning Makefile.PL \nUsing included version of CPAN::Meta (2.143240) because it is not already installed.\nUsing included version of Parse::CPAN::Meta (1.4414) because it is not already installed.\nUsing included version of CPAN::Meta::YAML (0.011) because it is not already installed.\nUsing included version of File::Temp (0.22) as it is newer than the installed version (0.16).\nUsing included version of ExtUtils::Manifest (1.70) as it is newer than the installed version (1.46).\nUsing included version of JSON::PP (2.27203) because it is not already installed.\nUsing included version of ExtUtils::Install (2.06) as it is newer than the installed version (1.33).\nUsing included version of CPAN::Meta::Requirements (2.131) because it is not already installed.\nChecking if your kit is complete...\nWarning: the following files are missing in your kit:\n        't/liblist/win32/di\n        't/liblist/win32/space\nPlease inform the author.\nGenerating a Unix-style Makefile\nWriting Makefile for ExtUtils::MakeMaker\nWriting MYMETA.yml and MYMETA.json\n-&gt; OK\nChecking dependencies from MYMETA.json ...\nChecking if you have Data::Dumper 0 ... Yes (2.121_08)\nChecking if you have File::Spec 0.8 ... Yes (3.12)\nChecking if you have Pod::Man 0 ... Yes (1.37)\nChecking if you have File::Basename 0 ... Yes (2.74)\nChecking if you have Encode 0 ... Yes (2.12)\n-&gt; FAIL Can't configure the distribution. You probably need to have 'make'. See /.cpanm/work/1515577528.15913/build.log for details.\n</code></pre>\n\n<p>Thanks</p>\n"}, {"tags": ["perl", "pipe", "stdout", "executable", "stderr"], "answers": [{"comments": [{"owner": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "edited": false, "score": 8, "creation_date": 1515594452, "post_id": 48188099, "comment_id": 83359038, "body": "While I agree that this answer would be made more useful with the inclusion of a simple example, <i>reviewers</i> please note that the links are to the actual documentation of the modules recommended to solve the issue, not to some transient blog post etc. metacpan is much <i>much</i> less likely to change or disappear."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "edited": false, "score": 1, "creation_date": 1515605300, "post_id": 48188099, "comment_id": 83366370, "body": "@Sinan&#220;n&#252;r: There are many reasons to avoid a link-only solution other than the volatility of those links, and this should have been posted as a comment. A full answer should include an explanation of the errant behaviour, as well as a reason why any links could make a difference. Clearly it is best of all if sample code is also provided."}, {"owner": {"reputation": 109, "user_id": 4255834, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/31da357b5bc58c73b14b5580f6fd9d22?s=128&d=identicon&r=PG", "display_name": "uldics", "link": "https://stackoverflow.com/users/4255834/uldics"}, "edited": false, "score": 0, "creation_date": 1515618718, "post_id": 48188099, "comment_id": 83373306, "body": "Yes, looks promising. But ... I can not install, use external code, modules, dependencies etc. Isn&#39;t there a simple, manual way to achieve same results?"}, {"owner": {"reputation": 25491, "user_id": 49197, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/15ebf24a33a29b9efbf9924f530dd736?s=128&d=identicon&r=PG", "display_name": "Hynek -Pichi- Vychodil", "link": "https://stackoverflow.com/users/49197/hynek-pichi-vychodil"}, "reply_to_user": {"reputation": 109, "user_id": 4255834, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/31da357b5bc58c73b14b5580f6fd9d22?s=128&d=identicon&r=PG", "display_name": "uldics", "link": "https://stackoverflow.com/users/4255834/uldics"}, "edited": false, "score": 2, "creation_date": 1515627353, "post_id": 48188099, "comment_id": 83376684, "body": "@uldics You mean like simpler than reinventing the wheel? If you would know that  <code>open my $fh, &#39;-|&#39;, ...</code> is internally just bunch of calls to <code>pipe()</code>, <code>fork()</code>, <code>close()</code>, <code>dup()</code>, <code>execl()</code> or <code>execve()</code> and so on, you wouldn&#39;t have to ask. But you ask so the best advice is to stick to the recommended modules. It&#39;s not a simple task and a lot of opportunities for nasty bugs."}, {"owner": {"reputation": 109, "user_id": 4255834, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/31da357b5bc58c73b14b5580f6fd9d22?s=128&d=identicon&r=PG", "display_name": "uldics", "link": "https://stackoverflow.com/users/4255834/uldics"}, "edited": false, "score": 0, "creation_date": 1516106260, "post_id": 48188099, "comment_id": 83546315, "body": "IPC::Cmd is unable to interleave STDOUT and STDERR, IPC::Run3 probably waits till finished (does not allow interaction with the subprocess), so from your three suggestions I suppose only one able to satisfy my requirements is IPC:Run. How do I get it to perform like I have asked? I see no examples anywhere with other than file output redirection. Can it do something like open-pipe-while in my example?"}, {"owner": {"reputation": 25491, "user_id": 49197, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/15ebf24a33a29b9efbf9924f530dd736?s=128&d=identicon&r=PG", "display_name": "Hynek -Pichi- Vychodil", "link": "https://stackoverflow.com/users/49197/hynek-pichi-vychodil"}, "reply_to_user": {"reputation": 109, "user_id": 4255834, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/31da357b5bc58c73b14b5580f6fd9d22?s=128&d=identicon&r=PG", "display_name": "uldics", "link": "https://stackoverflow.com/users/4255834/uldics"}, "edited": false, "score": 0, "creation_date": 1516213506, "post_id": 48188099, "comment_id": 83600633, "body": "@uldics If you would bother to read the documentation of IPC::Run there is an example about commands <code>start</code>, <code>pump</code>, <code>finish</code>, <code>timeout</code>. Namely <code>## Scripting subprocesses (like Expect):</code>"}, {"owner": {"reputation": 109, "user_id": 4255834, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/31da357b5bc58c73b14b5580f6fd9d22?s=128&d=identicon&r=PG", "display_name": "uldics", "link": "https://stackoverflow.com/users/4255834/uldics"}, "edited": false, "score": 0, "creation_date": 1519727391, "post_id": 48188099, "comment_id": 85017365, "body": "I have studied IPC::Run &quot;Scripting subprocesses&quot; and poked and pulled in various directions. No luck so far. Almost every example has input, then output. And  they assume output will be known (same as last input). I do not know what will be the output: <code>pump $h until $out =~ &#47;input\\n&#47;g;</code>. Seems to me I do not understand some more basic stuff here - how does the while work here, does it just runs the one line, or all after it until the finish?"}], "tags": [], "owner": {"reputation": 25491, "user_id": 49197, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/15ebf24a33a29b9efbf9924f530dd736?s=128&d=identicon&r=PG", "display_name": "Hynek -Pichi- Vychodil", "link": "https://stackoverflow.com/users/49197/hynek-pichi-vychodil"}, "is_accepted": false, "score": 6, "last_activity_date": 1515589264, "creation_date": 1515589264, "answer_id": 48188099, "question_id": 48187395, "link": "https://stackoverflow.com/questions/48187395/perl-script-to-log-external-executables-output-and-error-while-that-still-runs/48188099#48188099", "title": "Perl script to log external executables output and error while that still runs", "body": "<p>Look at <a href=\"https://metacpan.org/search?q=IPC\" rel=\"noreferrer\">IPC</a> modules, especially <a href=\"https://metacpan.org/pod/IPC::Cmd\" rel=\"noreferrer\">IPC::Cmd</a>, <a href=\"https://metacpan.org/pod/IPC::Run\" rel=\"noreferrer\">IPC::Run</a> and if not satisfied then <a href=\"https://metacpan.org/pod/IPC::Run3\" rel=\"noreferrer\">IPC::Run3</a>. There is a lot of details you would have to cover and those modules will make your life a lot easier.</p>\n"}, {"tags": [], "owner": {"reputation": 109, "user_id": 4255834, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/31da357b5bc58c73b14b5580f6fd9d22?s=128&d=identicon&r=PG", "display_name": "uldics", "link": "https://stackoverflow.com/users/4255834/uldics"}, "is_accepted": false, "score": 1, "last_activity_date": 1519975121, "creation_date": 1519975121, "answer_id": 49064396, "question_id": 48187395, "link": "https://stackoverflow.com/questions/48187395/perl-script-to-log-external-executables-output-and-error-while-that-still-runs/49064396#49064396", "title": "Perl script to log external executables output and error while that still runs", "body": "<p>OK, have got it to work, so far. Might have some issues - not sure about environment variables, like umask or language related or the system load when push is waiting/blocking, or how to replace die with capturing of all variables for status. Nevertheless for my purpose, seems to work well. Will see how it works on a real system.</p>\n\n<pre><code>#! /usr/bin/perl\nBEGIN {\n    push @INC, '/home/myusername/perl5/lib/perl5';          #Where the modules from Cpan are\n}\nuse IPC::Run qw( start pump finish );\n\n@array_executable_and_parameters = ();\npush(@array_executable_and_parameters,\"/home/myusername/perl/myexecutable.sh\"); #ls -lh ; for i in {1..5}; do echo X; sleep 1; done\nmy $h = start \\@array_executable_and_parameters, \\undef, \\$out, \\$err ;\nwhile (42) {\n    pump $h;# while ($out or $err);\n    if ($out eq '' and $err eq '') {last;}\n    print \"1A. \\$out: $out\\n\";\n    print \"1A. \\$err: $err\\n\";\n    $out = \"\";\n    $err = \"\";\n}\nfinish $h or die \"Command returned:\\n\\$?=$?\\n\\$@=$@\\nKilled by=\".( $? &amp; 0x7F ).\"\\nExit code=\".( $? &gt;&gt; 8 ).\"\\n\" ;\nprint \"1B. \\$out: $out\\n\";\nprint \"1B. \\$err: $err\\n\";\n</code></pre>\n\n<p>The key was understanding how the blocking of pump works. All the manuals and help places kind of skipped over this part. So a neverending while which jumps out when pump lets go further without output was the key.</p>\n"}], "owner": {"reputation": 109, "user_id": 4255834, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/31da357b5bc58c73b14b5580f6fd9d22?s=128&d=identicon&r=PG", "display_name": "uldics", "link": "https://stackoverflow.com/users/4255834/uldics"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 198, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1519975121, "creation_date": 1515586871, "last_edit_date": 1519732687, "question_id": 48187395, "link": "https://stackoverflow.com/questions/48187395/perl-script-to-log-external-executables-output-and-error-while-that-still-runs", "title": "Perl script to log external executables output and error while that still runs", "body": "<p>I have a Perl script, which runs an external executable. That executable runs for a while (sometimes seconds, sometimes an hour), can spit out text to both STDOUT and STDERR as well as an exit code, which all are needed. Following code demonstrates first successful external executable run (small bash script with one line - the comment), then with bad exit status (example with gs - ghostscript).\nI want the external executable give its STDOUT to the Perl script for evaluation, filtering, formatting etc. before it gets logged to a logfile (used for other stuff as well) while the external is still executing. STDERR would also be great to be worked on same way.\nThis script is in stand to log everything from STDOUT, but only after the executable has finished. And the STDERR is logged only directly, without evaluations etc. I have no possibility to install any additional Perl parts, modules etc.</p>\n\n<p>How do I get my Perl script to get each line (STDOUT + STDERR) from the executable while it is spitting it out (not just at the end) as well as its exit code for other purposes?</p>\n\n<pre><code>#!/usr/bin/perl\n@array_executable_and_parameters = \"/home/username/perl/myexecutable.sh\" ; #ls -lh ; for i in {1..5}; do echo X; sleep 1; done\n@array_executable_and_parameters2= \"gs aaa\" ;\nmy $line;\nchdir(\"/home/username/perl/\");\n$logFileName = \"logfileforsomespecificinput.log\";\nopen(LOGHANDLE, \"&gt;&gt;$logFileName\" );\nopen (STDERR, '&gt;&gt;', $logFileName);                  #Prints to logfile directly\n#open (STDERR, '&gt;&gt;', &lt;STDOUT&gt;);                 #Prints to own STDOUT (screen or mailfile)\n\nprint LOGHANDLE \"--------------OK run\\n\";\nopen CMD, '-|', @array_executable_and_parameters or die $@;\nwhile (defined($line = &lt;CMD&gt;)) {                    #Logs all at once at end\n    print LOGHANDLE \"-----\\$line=$line-----\\n\";\n}\nclose CMD;\n$returnCode1= $?&gt;&gt;8;\nprint LOGHANDLE \"\\$returnCode1=$returnCode1\\n\";\n\nprint LOGHANDLE \"--------------BAD run\\n\";\nopen CMD2, '-|', @array_executable_and_parameters2 or die $@;\nwhile (defined($line = &lt;CMD2&gt;)) {\n    print LOGHANDLE \"-----\\$line=$line-----\\n\";\n}\nclose CMD2;\n$returnCode2= $?&gt;&gt;8;\nprint LOGHANDLE \"\\$returnCode2=$returnCode2\\n\";\n\nclose(LOGHANDLE);\n</code></pre>\n\n<p>Take 2. After good advice in comments I have tried the IPC::Run. But something still does not work as expected. I seem to be missing how the looping from start (or pump?) to finish works, as well as how to get it to iterate when I do not know what the last output would be - as the examples everywhere mentions. So far I have now the following code, but it does not work line by line. It spits out listing of files in one go, then waits until the external loop is fully finished to print all the X's out. How do I tame it to the initial needs?</p>\n\n<pre><code>#! /usr/bin/perl\nuse IPC::Run qw( start pump finish );\n\n@array_executable_and_parameters = ();\npush(@array_executable_and_parameters,\"/home/username/perl/myexecutable.sh\"); #ls -lh ; for i in {1..5}; do echo X; sleep 1; done\nmy $h = start \\@array_executable_and_parameters, \\undef, \\$out, \\$err ;\npump $h;# while ($out or $err);\nprint \"1A. \\$out: $out\\n\";\nprint \"1A. \\$err: $err\\n\";\n$out = \"\";\n$err = \"\";\nfinish $h or die \"Command returned:\\n\\$?=$?\\n\\$@=$@\\nKilled by=\".( $? &amp; 0x7F ).\"\\nExit code=\".( $? &gt;&gt; 8 ).\"\\n\" ;\nprint \"1B. \\$out: $out\\n\";\nprint \"1B. \\$err: $err\\n\";\n</code></pre>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1515604795, "post_id": 48186656, "comment_id": 83366065, "body": "Given your input, what&#39;s the desired output? I&#39;m pretty sure you&#39;re tackling this the wrong way - substr isn&#39;t a good choice, and the <code>$part++</code> test looks clunky too."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1515605113, "post_id": 48186656, "comment_id": 83366244, "body": "For example - what&#39;s &quot;HETATM1&quot; &quot;HETATM2&quot; in your example?"}], "answers": [{"comments": [{"owner": {"reputation": 51, "user_id": 9192366, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/0e1ee151f4ec5285d9c36bba7211d722?s=128&d=identicon&r=PG&f=1", "display_name": "milan", "link": "https://stackoverflow.com/users/9192366/milan"}, "edited": false, "score": 0, "creation_date": 1515587007, "post_id": 48187051, "comment_id": 83354380, "body": "Oh, I see..but, I have change it and its still not giving me any output..should I change the script in the question nas well?"}, {"owner": {"reputation": 766, "user_id": 4445448, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/3fbf664dc5d850436aac1fd98700c0ae?s=128&d=identicon&r=PG&f=1", "display_name": "SSN", "link": "https://stackoverflow.com/users/4445448/ssn"}, "edited": false, "score": 0, "creation_date": 1515588748, "post_id": 48187051, "comment_id": 83355418, "body": "2 things have to change. 1) remove <code>next</code>. 2) change <code>elsif( $part==1) to elsif($part)</code>. This is working fine."}, {"owner": {"reputation": 51, "user_id": 9192366, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/0e1ee151f4ec5285d9c36bba7211d722?s=128&d=identicon&r=PG&f=1", "display_name": "milan", "link": "https://stackoverflow.com/users/9192366/milan"}, "reply_to_user": {"reputation": 766, "user_id": 4445448, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/3fbf664dc5d850436aac1fd98700c0ae?s=128&d=identicon&r=PG&f=1", "display_name": "SSN", "link": "https://stackoverflow.com/users/4445448/ssn"}, "edited": false, "score": 0, "creation_date": 1515654823, "post_id": 48187051, "comment_id": 83384072, "body": "@SSN: Hm,  yesterday I have changed it was not working, and today it was working, I probably didn&#39;t change it well. Many thanks!"}], "tags": [], "owner": {"reputation": 12075, "user_id": 1137055, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/59d7b43b9eb7d01bd8f7e51febe6053c?s=128&d=identicon&r=PG", "display_name": "dgw", "link": "https://stackoverflow.com/users/1137055/dgw"}, "is_accepted": false, "score": 2, "last_activity_date": 1515585722, "creation_date": 1515585722, "answer_id": 48187051, "question_id": 48186656, "link": "https://stackoverflow.com/questions/48186656/calculating-distances-between-protein-and-ligand/48187051#48187051", "title": "Calculating distances between protein and ligand", "body": "<p>When seeing a line with <code>HETATM</code> you increment <code>$part</code> and skip to the next input line. Your array <code>@refer</code> will therefor be empty.</p>\n\n<p>Remove the line with <code>next;</code> after incrementing <code>$part</code>.</p>\n\n<p>And your test should be <code>} elsif( $part ) { ... }</code> since you increment <code>$part</code> for each line of <code>HETATM</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 51, "user_id": 9192366, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/0e1ee151f4ec5285d9c36bba7211d722?s=128&d=identicon&r=PG&f=1", "display_name": "milan", "link": "https://stackoverflow.com/users/9192366/milan"}, "edited": false, "score": 0, "creation_date": 1515589678, "post_id": 48187812, "comment_id": 83355986, "body": "It&#39;s late in my place so Ill give it a try tomorrow, if I have some questions after running it, Ill type here. Thanks"}], "tags": [], "owner": {"reputation": 25491, "user_id": 49197, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/15ebf24a33a29b9efbf9924f530dd736?s=128&d=identicon&r=PG", "display_name": "Hynek -Pichi- Vychodil", "link": "https://stackoverflow.com/users/49197/hynek-pichi-vychodil"}, "is_accepted": false, "score": -1, "last_activity_date": 1515596250, "last_edit_date": 1515596250, "creation_date": 1515588345, "answer_id": 48187812, "question_id": 48186656, "link": "https://stackoverflow.com/questions/48186656/calculating-distances-between-protein-and-ligand/48187812#48187812", "title": "Calculating distances between protein and ligand", "body": "<p>I would use this approach:</p>\n\n<pre><code>#!/usr/bin/env perl \n\nuse strict;\nuse warnings;\n\nuse constant POZITION =&gt; ( 6, 7, 8 );    # X, Y, Z\n\nsub dist {\n    my ( $a, $b ) = @_;\n    my $s = 0;\n    for my $i ( 0 .. $#$a ) {\n        $s += ( $a-&gt;[$i] - $b-&gt;[$i] )**2;\n    }\n    return sqrt($s);\n}\n\n# Record format\nuse constant {\n    LINE =&gt; 0,\n    POZ  =&gt; 1,\n    KEEP =&gt; 2,\n};\n\nmy ( @refer, @points );\nwhile ( my $line = &lt;&gt; ) {\n    my ( $type, @poz ) = ( split ' ', $line )[ 0, POZITION ];\n    print STDERR join( ',', $type, @poz ), \"\\n\";\n    if ( $type eq 'ATOM' ) {\n        push @refer, [ $line, \\@poz ];\n    }\n    elsif ( $type eq 'HETATM' ) {\n        push @points, [ $line, \\@poz ];\n    }\n}\n\nfor my $ref (@refer) {\n    for my $atom (@points) {\n        my $dist = dist( $ref-&gt;[POZ], $atom-&gt;[POZ] );\n        print STDERR \"$ref-&gt;[LINE]$atom-&gt;[LINE]dist: $dist\\n\";\n        next if $dist &gt; 5;\n        $ref-&gt;[KEEP]  ||= 1;\n        $atom-&gt;[KEEP] ||= 1;\n    }\n}\n\nprint $_-&gt;[LINE] for grep $_-&gt;[KEEP], @refer, @points;\n</code></pre>\n\n<p>Unfortunately, your data doesn't contain any <code>ATOM</code> and <code>HETATM</code> pair with distance &lt;= 5. (Note that <code>split ' '</code> is word split. It means <code>split /\\s+/</code> with omitting any leading and trailing whitespaces.)</p>\n\n<p>It works as a filter with debugging output to the STDERR.</p>\n"}, {"comments": [{"owner": {"reputation": 51, "user_id": 9192366, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/0e1ee151f4ec5285d9c36bba7211d722?s=128&d=identicon&r=PG&f=1", "display_name": "milan", "link": "https://stackoverflow.com/users/9192366/milan"}, "edited": false, "score": 0, "creation_date": 1515656227, "post_id": 48193214, "comment_id": 83384739, "body": "Hey, thank You very much for this question. When I run it on my file or on the same input that I put here it constantly gives me this error although there are no unbalanced brackets. <code>syntax error at distances.new.pl line 39, near &quot;} ) &quot; syntax error at distances.new.pl line 58, near &quot;}&quot; Missing right curly or square bracket at distances.new.pl line 60, at end of line Execution of distances.new.pl aborted due to compilation errors. </code> You do not encounter similar problem? Yeah, I would like to keep the lines so that I know which <code>ATOM</code>and<code>HETATM</code> gives me this value. Thanks in advance"}, {"owner": {"reputation": 51, "user_id": 9192366, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/0e1ee151f4ec5285d9c36bba7211d722?s=128&d=identicon&r=PG&f=1", "display_name": "milan", "link": "https://stackoverflow.com/users/9192366/milan"}, "edited": false, "score": 0, "creation_date": 1515924880, "post_id": 48193214, "comment_id": 83479565, "body": "@Sorbique: I managed to fix the problem I had with the brackets and yes, if I change these two lines in my script I also get printed the result. I searched and I am having problem with overwrighting on the file. I want not to print in terminal or create another files with results, but to overwright to existed one. Do You have any tip, hint or approach how can I do this? It is important, because I want these files that do not have number &lt;=5 as a result to be deleted."}], "tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": true, "score": 1, "last_activity_date": 1515606215, "creation_date": 1515606215, "answer_id": 48193214, "question_id": 48186656, "link": "https://stackoverflow.com/questions/48186656/calculating-distances-between-protein-and-ligand/48193214#48193214", "title": "Calculating distances between protein and ligand", "body": "<p>OK, I have to say - I'd rewrite your code, to work a bit differently. </p>\n\n<p>Something like this:</p>\n\n<pre><code>#!/usr/bin/env perl\nuse strict;\nuse warnings;\n\nuse Data::Dumper;\n\nmy %coordinates; \n#use types to track different types. Unclear if you need to handle anything other than 'not ATOM' but this is in case you do. \n\nmy %types; \n\n#read STDIN or files specified on command line - like how grep/sed do it. \nwhile ( &lt;&gt; ) {\n   my ( $type, $id, undef, undef, undef, undef, $x, $y, $z ) = split; # splits on white space. \n   $coordinates{$type}{$id} = [$x, $y, $z];\n   $types{$type}++ if $type ne 'ATOM'; \n}\n\n#print for debugging:\nprint Dumper \\%coordinates;\nprint Dumper \\%types;\n\n#iterate each element of \"ATOM\"\nforeach my $atom_id ( keys %{$coordinates{'ATOM'}} ) { \n   #iterate all the types (HETATM)\n   foreach my $type ( sort keys %types ) { \n      #iterate each id within the data structure. \n      foreach my $id ( sort keys %{$coordinates{$type}} ) { \n\n         my $dist = 0;\n         #take square of x - x1, y - y1, z - z1\n         #do it iteratively, using 'for' loop.\n         $dist += (($coordinates{$type}{$id}[$_] - $coordinates{'ATOM'}{$atom_id}[$_]) ** 2) for 0..2; \n         $dist = sqrt $dist; \n\n         print \"$atom_id -&gt; $type $id $dist\\n\";\n      }\n</code></pre>\n\n<p>This is:</p>\n\n<ul>\n<li>Using <code>&lt;&gt;</code> to read STDIN or named files on command line instead of manually opening <code>ARGV[0]</code> which accomplishes a similar result. (but means you can pipe stuff through it too). </li>\n<li>Reads your data into a hash first. </li>\n<li>Then iterates all the possible pairings, calculating your distance. </li>\n<li>Conditionally prints if they match the criteria (all your results seem to?) </li>\n</ul>\n\n<p>This gives as results:</p>\n\n<pre><code>1592 -&gt; HETATM 1597 23.5145474334506\n1592 -&gt; HETATM 1598 22.5965224094328\n1592 -&gt; HETATM 1599 22.7844420822631\n1592 -&gt; HETATM 1600 21.8665559702483\n1595 -&gt; HETATM 1597 22.6919443415499\n1595 -&gt; HETATM 1598 21.7968036647578\n1595 -&gt; HETATM 1599 22.1437585337268\n1595 -&gt; HETATM 1600 21.2693868505888\n1594 -&gt; HETATM 1597 24.3815421169376\n1594 -&gt; HETATM 1598 23.509545380547\n1594 -&gt; HETATM 1599 23.8816415683679\n1594 -&gt; HETATM 1600 23.0248383056212\n1593 -&gt; HETATM 1597 23.6802952050856\n1593 -&gt; HETATM 1598 22.74957513889\n1593 -&gt; HETATM 1599 23.1402816102138\n1593 -&gt; HETATM 1600 22.2296935201545\n</code></pre>\n\n<p>Now you mention wanting to delete lines that are 'too far' - that's a bit complicated, because you've a compound criteria (and you'll delete all your lines). </p>\n\n<p>The problem is - you don't know if your <code>ATOM</code> lines have too much \"distance\" until you've tested every single pairing in the file. </p>\n\n<p>You could perhaps do this by:</p>\n\n<pre><code>#iterate each element of \"ATOM\"\nforeach my $atom_id ( keys %{$coordinates{'ATOM'}} ) { \n   #iterate all the types (HETATM)\n   foreach my $type ( sort keys %types ) { \n      #iterate each id within the data structure. \n      foreach my $id ( sort keys %{$coordinates{$type}} ) { \n\n         my $dist = 0;\n         #take square of x - x1, y - y1, z - z1\n         #do it iteratively, using 'for' loop.\n         $dist += (($coordinates{$type}{$id}[$_] - $coordinates{'ATOM'}{$atom_id}[$_]) ** 2) for 0..2; \n         $dist = sqrt $dist; \n\n         print \"### $atom_id -&gt; $type $id $dist\\n\";\n\n         ##note - this will print out multiple times if there's multiple pairings. \n         if ( $dist &lt;= 5 ) {\n            print $lines{'ATOM'}{$atom_id};\n            print $lines{$type}{$id};\n         }\n      }\n   }\n}\n</code></pre>\n\n<p>Which will - for each pairing-comparison print both the <code>ATOM</code> and <code>HETATM</code> lines that had a distance of &lt;= 5. But it will do so multiple times if multiple pairings exist. </p>\n\n<p>But I think your core error is in mishandling the <code>$part</code> and <code>next</code> clauses.</p>\n\n<ul>\n<li>You only ever increment <code>$part</code> and whilst you initialise it at <code>0</code>, you never reset it to zero. So it'll be 1,2,3,4 for each successive <code>HETATM</code>. </li>\n<li>You use <code>next</code> after incrementing <code>part</code> which means you skip the <code>if ( $part == 1</code> clause entirely. </li>\n</ul>\n"}], "owner": {"reputation": 51, "user_id": 9192366, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/0e1ee151f4ec5285d9c36bba7211d722?s=128&d=identicon&r=PG&f=1", "display_name": "milan", "link": "https://stackoverflow.com/users/9192366/milan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 185, "favorite_count": 0, "accepted_answer_id": 48193214, "answer_count": 3, "score": 1, "last_activity_date": 1515606215, "creation_date": 1515584418, "question_id": 48186656, "link": "https://stackoverflow.com/questions/48186656/calculating-distances-between-protein-and-ligand", "title": "Calculating distances between protein and ligand", "body": "<p>I am trying to calculate distance between each coordinate of protein atom (<code>ATOM</code>) and ligand atom (<code>HETATM</code>). I have number of files that look like this:</p>\n\n<pre><code>ATOM   1592 HD13 LEU D  46      11.698 -10.914   2.183  1.00  0.00           H  \nATOM   1593 HD21 LEU D  46      11.528  -8.800   5.301  1.00  0.00           H  \nATOM   1594 HD22 LEU D  46      12.997  -9.452   4.535  1.00  0.00           H  \nATOM   1595 HD23 LEU D  46      11.722  -8.718   3.534  1.00  0.00           H  \nHETATM 1597  N1  308 A   1       0.339   6.314  -9.091  1.00  0.00           N  \nHETATM 1598  C10 308 A   1      -0.195   5.226  -8.241  1.00  0.00           C  \nHETATM 1599  C7  308 A   1      -0.991   4.254  -9.133  1.00  0.00           C  \nHETATM 1600  C1  308 A   1      -1.468   3.053  -8.292  1.00  0.00           C \n</code></pre>\n\n<p>So  I am trying to calculate distances between <code>ATOM1</code> and all other <code>HETATM1</code>, between <code>ATOM1</code> and all other 'HETATM2' and so on. I have written a script in perl, but I cannot figure it out what is wrong with the script, it doesnt give me any error it just does not print anything. </p>\n\n<p>I am also not sure how to add it in the script and if it is possible, that if the result of each calculation is more then <code>5</code> then delete this both lines that were included into calculation. If it is <code>&lt;=</code> then <code>5</code> then keep it. </p>\n\n<pre><code>#!/usr/local/bin/perl \n\n    use strict;\n    use warnings;\n\n    open(IN, $ARGV[0]) or die \"$!\"; \n    my (@refer, @points);\n    my $part = 0;\n    my $dist;\n    while (my $line = &lt;IN&gt;) { \n        chomp($line);\n        if ($line =~ /^HETATM/) {\n            $part++;\n            next;\n        }\n        my @array = (substr($line, 30, 8),substr($line,38,8),substr($line,46,8));\n    #    print \"@array\\n\";\n        if ($part == 0) {\n            push @refer, [ @array ]; \n        } elsif ($part ==1){\n            push @points, [ @array ]; \n        }\n    }\n\n        foreach my $ref(@refer) {\n        my ($x1, $y1, $z1) = @{$ref};\n        foreach my $atom(@points) {\n            my ($x, $y, $z) = @{$atom};\n            my $dist = sqrt( ($x-$x1)**2 + ($y-$y1)**2 + ($z-$z1)**2 );\n        print $dist;\n\n        }\n\n    }\n</code></pre>\n"}, {"tags": ["perl", "ubuntu-16.04", "python-3.6"], "answers": [{"tags": [], "owner": {"reputation": 377, "user_id": 6583638, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1zobe.jpg?s=128&g=1", "display_name": "Flying_whale", "link": "https://stackoverflow.com/users/6583638/flying-whale"}, "is_accepted": true, "score": -1, "last_activity_date": 1515582397, "creation_date": 1515582397, "answer_id": 48186023, "question_id": 48184258, "link": "https://stackoverflow.com/questions/48184258/how-to-installing-perl-inlinepython-in-ubuntu-16-04-python-3-6/48186023#48186023", "title": "How to installing perl Inline::Python in ubuntu 16.04 , python 3.6", "body": "<p>why don't you launch your python script with</p>\n\n<pre><code>system \"python yourScript.py\";\n</code></pre>\n\n<p>into your perl script?</p>\n"}], "owner": {"reputation": 37, "user_id": 7699162, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh4.googleusercontent.com/-QsC-jFFTJ6s/AAAAAAAAAAI/AAAAAAAAAM8/6SA6NTt3M4s/photo.jpg?sz=128", "display_name": "pushkar rawat", "link": "https://stackoverflow.com/users/7699162/pushkar-rawat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 308, "favorite_count": 0, "accepted_answer_id": 48186023, "answer_count": 1, "score": 0, "last_activity_date": 1515582397, "creation_date": 1515576872, "question_id": 48184258, "link": "https://stackoverflow.com/questions/48184258/how-to-installing-perl-inlinepython-in-ubuntu-16-04-python-3-6", "title": "How to installing perl Inline::Python in ubuntu 16.04 , python 3.6", "body": "<p>I have python code which i want to use in perl application, for this I am trying to use perl inline::python module. But I am facing problem in installing this perl module.  I get the following error:</p>\n\n<p>\"lto1: fatal error: bytecode stream generated with LTO version 6.0 instead of the expected 4.1\"</p>\n\n<p>I have python 3.6 (using anaconda 3) on ubuntu 16.04 system , gcc: 5.4.0. Not getting exactly how to fix this issue.</p>\n"}, {"tags": ["bash", "perl", "awk"], "comments": [{"owner": {"reputation": 144799, "user_id": 2836621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/suHg4.jpg?s=128&g=1", "display_name": "Mark Setchell", "link": "https://stackoverflow.com/users/2836621/mark-setchell"}, "edited": false, "score": 0, "creation_date": 1515575679, "post_id": 48183135, "comment_id": 83347402, "body": "If you are trying to do it in Perl, then add the Perl tag and show the code you have. Your description is very confused so I am not surprised you are having difficulty coding it. Maybe try and write 3 separate, simple rules either for keeping or for discarding rather than a rule that mixes things like you currently have...  <i>&quot;I want to keep lines with FORMUL and if it has something else I don&#39;t want to keep it.&quot;.</i>"}, {"owner": {"reputation": 209, "user_id": 9180236, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f564cb07c66bd0cb7d993bc4b921615f?s=128&d=identicon&r=PG&f=1", "display_name": "djordje", "link": "https://stackoverflow.com/users/9180236/djordje"}, "reply_to_user": {"reputation": 144799, "user_id": 2836621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/suHg4.jpg?s=128&g=1", "display_name": "Mark Setchell", "link": "https://stackoverflow.com/users/2836621/mark-setchell"}, "edited": false, "score": 0, "creation_date": 1515576995, "post_id": 48183135, "comment_id": 83348269, "body": "Thanks, I did it few days ago then I deleted it but I will write it now.. The thing is that I am pretty unskilled with manipulating with lines. I can include in the script like read file, read each line till the end, if it starts with <code>^FORMUL</code> then I have a problem to assign conditions and to delete lines id they do not meet these conditions."}, {"owner": {"reputation": 72748, "user_id": 3185459, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PBjxg.jpg?s=128&g=1", "display_name": "RomanPerekhrest", "link": "https://stackoverflow.com/users/3185459/romanperekhrest"}, "edited": false, "score": 0, "creation_date": 1515577286, "post_id": 48183135, "comment_id": 83348444, "body": "@djordje, what if there is no <code>C</code> char but <code>N22</code> is presented?"}, {"owner": {"reputation": 209, "user_id": 9180236, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f564cb07c66bd0cb7d993bc4b921615f?s=128&d=identicon&r=PG&f=1", "display_name": "djordje", "link": "https://stackoverflow.com/users/9180236/djordje"}, "edited": false, "score": 0, "creation_date": 1515577665, "post_id": 48183135, "comment_id": 83348749, "body": "Then I should not delete it: so delete all lines that have <code>C&gt;2</code> (C3,C4,C5..) and sum of <code>CON</code> has to be <code>=&gt;</code>. So line that has <code>C1 N22 O1</code> should be deleted although <code>sum</code> is more then <code>6</code>, <code>C</code> is less then <code>2</code>. If <code>C3 N1 O1</code> this should also not be included"}, {"owner": {"reputation": 209, "user_id": 9180236, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f564cb07c66bd0cb7d993bc4b921615f?s=128&d=identicon&r=PG&f=1", "display_name": "djordje", "link": "https://stackoverflow.com/users/9180236/djordje"}, "edited": false, "score": 0, "creation_date": 1515579876, "post_id": 48183135, "comment_id": 83350190, "body": "I edited the question including the perl script that I just wrote, but I am having a real trouble to assign these two conditions (having gaps in my regular expression knowledge)."}, {"owner": {"reputation": 11476, "user_id": 8572380, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f4a5d854aa543e6bf01abe8351d38782?s=128&d=identicon&r=PG&f=1", "display_name": "tshiono", "link": "https://stackoverflow.com/users/8572380/tshiono"}, "edited": false, "score": 0, "creation_date": 1515580534, "post_id": 48183135, "comment_id": 83350630, "body": "You say the two conditions are inclusive, right?  How come the line with C1 O5 N3 should be deleted?"}, {"owner": {"reputation": 209, "user_id": 9180236, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f564cb07c66bd0cb7d993bc4b921615f?s=128&d=identicon&r=PG&f=1", "display_name": "djordje", "link": "https://stackoverflow.com/users/9180236/djordje"}, "edited": false, "score": 0, "creation_date": 1515582493, "post_id": 48183135, "comment_id": 83351774, "body": "because <code>C&lt;2</code>.  It has to support both conditions. If within this sum <code>C</code> is <code>1</code> or <code>2</code>, then I cannot use it. Only <code>C3 NX OX</code> in which <code>sum</code> is more or equal to 6 then delete them."}, {"owner": {"reputation": 137100, "user_id": 874188, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/ZcY77.png?s=128&g=1", "display_name": "tripleee", "link": "https://stackoverflow.com/users/874188/tripleee"}, "edited": false, "score": 0, "creation_date": 1516958791, "post_id": 48183135, "comment_id": 83909960, "body": "I&#39;m voting to close this question as off-topic because this is a cross-site duplicate of <a href=\"https://stackoverflow.com/questions/48183135/how-to-delete-all-the-lines-that-match-specific-condition\" title=\"how to delete all the lines that match specific condition\">stackoverflow.com/questions/48183135/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 72748, "user_id": 3185459, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PBjxg.jpg?s=128&g=1", "display_name": "RomanPerekhrest", "link": "https://stackoverflow.com/users/3185459/romanperekhrest"}, "is_accepted": false, "score": 2, "last_activity_date": 1515580621, "creation_date": 1515580621, "answer_id": 48185445, "question_id": 48183135, "link": "https://stackoverflow.com/questions/48183135/how-to-delete-all-the-lines-that-match-specific-condition/48185445#48185445", "title": "How to delete all the lines that match specific condition", "body": "<p>Extended <strong><code>Awk</code></strong> solution:</p>\n\n<pre><code>awk -F'[[:space:]][[:space:]]+' \\\n    '/^FORMUL/{ \n         if ($4 !~ /\\&lt;C/) print; \n         else { \n             match($4, /\\&lt;C[0-9]+/); \n             c=substr($4, RSTART+1, RLENGTH); \n             if (c &gt; 2) next; \n             else { \n                 match($4, /\\&lt;O[0-9]+/); \n                 o=substr($4, RSTART+1, RLENGTH); \n                 match($4, /\\&lt;N[0-9]+/); \n                 n=substr($4, RSTART+1, RLENGTH); \n                 if (c+o+n &lt; 6) print \n             }\n         } \n     }' 5PCZ.pdb\n</code></pre>\n\n<p>The output:</p>\n\n<pre><code>FORMUL   3  HOH   *207(H2 O)\nFORMUL   2  SF4    FE4 S4\nFORMUL   4  HOH   *321(H2 O)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 209, "user_id": 9180236, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f564cb07c66bd0cb7d993bc4b921615f?s=128&d=identicon&r=PG&f=1", "display_name": "djordje", "link": "https://stackoverflow.com/users/9180236/djordje"}, "edited": false, "score": 0, "creation_date": 1515583353, "post_id": 48185972, "comment_id": 83352242, "body": "Dave: Thank You for this answer. Yeah I also realized that it is much simpler to print lines that I want to keep. Comment make it more very understandable! I have to practice much more to switch mindset from biology to programming. Cheers"}, {"owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 0, "creation_date": 1515600699, "post_id": 48185972, "comment_id": 83363508, "body": "@Dave, the people at <a href=\"https://askubuntu.com\">Ask Ubuntu</a> like <a href=\"https://askubuntu.com/a/994248/504066\">your solution</a> ;-)"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 0, "creation_date": 1515601898, "post_id": 48185972, "comment_id": 83364338, "body": "@PerlDuck: Oh, well, <b>isn&#39;t</b> that interesting! Thanks for pointing it out."}], "tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": true, "score": 2, "last_activity_date": 1515585203, "last_edit_date": 1515585203, "creation_date": 1515582209, "answer_id": 48185972, "question_id": 48183135, "link": "https://stackoverflow.com/questions/48183135/how-to-delete-all-the-lines-that-match-specific-condition/48185972#48185972", "title": "How to delete all the lines that match specific condition", "body": "<p>As you've seen, it's probably easier to write this as a filter that prints the lines that you want to keep. I've also written this following the Unix Filter Model (reads from <code>STDIN</code>, writes to <code>STDOUT</code>) as that makes the program far more flexible (and, interestingly, easier to write!)</p>\n\n<p>Assuming that you're running the program on Linux (or similar) and that your code is in an executable file called <code>my_filter</code> (I recommend a more descriptive name!) then you would call it like this:</p>\n\n<pre><code>$ my_filter &lt; 5PCZ.pdb &gt; 5PCZ.pdb.new\n</code></pre>\n\n<p>The code would look like this:</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\n\nwhile (&lt;&gt;) { # read from STDIN a line at a time\n  # Split data on whitespace, but only into four columns\n  my @cols = split /\\s+/, $_, 4;\n\n  next unless $cols[0] eq 'FORMUL';\n\n  # Now extract the letter stuff into a hash for easy access.\n  # We extract letters from the final column in the record.\n  my %letters = $cols[-1] =~ m/([A-Z])(\\d+)/g;\n\n  # Give the values we're interested in, a default of 0\n  $letters{$_} //= 0 for (qw[C O N]);\n\n  next if $letters{C} &gt; 2\n    and $letters{C} + $letters{O} + $letters{N} &gt;= 6;\n\n  # I think we can then print the line;\n  print;\n}\n</code></pre>\n\n<p>This seems to give the correct output for your sample data. And I hope the comments make it obvious how to tweak the conditions.</p>\n"}], "owner": {"reputation": 209, "user_id": 9180236, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f564cb07c66bd0cb7d993bc4b921615f?s=128&d=identicon&r=PG&f=1", "display_name": "djordje", "link": "https://stackoverflow.com/users/9180236/djordje"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 94, "favorite_count": 0, "accepted_answer_id": 48185972, "answer_count": 2, "score": -2, "last_activity_date": 1515585203, "creation_date": 1515572856, "last_edit_date": 1515579807, "question_id": 48183135, "link": "https://stackoverflow.com/questions/48183135/how-to-delete-all-the-lines-that-match-specific-condition", "title": "How to delete all the lines that match specific condition", "body": "<p>I have a number of pdb files and I want to keep only those lines that starts with <code>^FORMUL</code> and if line has <code>C</code> followed by the number that is larger then (<code>C3,C4,C5,C6..100 etc</code>) then I should not print it. Second condition is that within every line sum of <code>C, H and N</code> should be <code>&gt;=</code> 6, then delete it</p>\n\n<p>So overall delete the lines in which <code>C</code> is followed by number more then <code>2&gt;</code> and sum of <code>C+O+N</code> is <code>&gt;=</code> then 6.</p>\n\n<pre><code>FORMUL   3  HOH   *207(H2 O)    (print it)                                     \nFORMUL   2  SF4    FE4 S4       (print it)                                                \nFORMUL   3  NIC    C5 H7 N O7   (don't print, there is C5 and sum is more then 6)                                               \nFORMUL   4  HOH   *321(H2 O)    (print it)                                                \nFORMUL   3  HEM    2(C34 H32 FE N4 O4)  (don't print, there is C34)\n</code></pre>\n\n<p>I have tried to do it in <code>perl</code> but lines are soo diverse from each other so Im not sure if it is possible to do.</p>\n\n<p>Over all these conditions chould be included together, meaning that all lines in which <code>C&gt;2</code> and <code>sum&gt;=6</code> should be deleted.\n<code>C1 O5 N3</code> should be deleted; <code>C3 N1 01</code> should not be deleted although <code>C</code> is <code>3</code>.</p>\n\n<p>In perl I don't know how to assign these two conditions. Here I wrote opposite situation not to delete but to print these lines if these two conditions are not met.</p>\n\n<pre><code>#!/usr/bin/perl\n\n\nuse strict;\nuse warnings;\n\nmy @lines; \nmy $file;\nmy $line;\nopen ($file, '&lt;', '5PCZ.pdb') or die $!; \nwhile (my $line = &lt;$file&gt;)\n{\n if ($line =~ m/^FORMUL/)\n{\n  push (@lines, $line);   \n}\n}\nclose $file;\n#print \"@lines\\n\";\n\n\nforeach $line(@lines) \n{\n  if ($line eq /\"C\"(?=([0-2]))/ )\n{\n  elsif ($line eq \"Sum of O,N &amp; C is lt 6\")\n\n    print @lines    \n}\n}\n</code></pre>\n"}, {"tags": ["perl", "cookies", "mechanize"], "comments": [{"owner": {"reputation": 7445, "user_id": 1529709, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/3tKqC.jpg?s=128&g=1", "display_name": "zb226", "link": "https://stackoverflow.com/users/1529709/zb226"}, "edited": false, "score": 1, "creation_date": 1515590048, "post_id": 48182932, "comment_id": 83356179, "body": "The server refuses connections for me. Nonetheless, the <code>.cookies</code> file is created. If I change the server to <code>www.google.com</code>, I get the cookie as expected from that server... So your code seems to work as intended."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1515601977, "post_id": 48182932, "comment_id": 83364393, "body": "<i>&quot;Root-Me: A fast, accessible and realistic platform to test your hacking skills&quot;</i> I really don&#39;t think I want to help you with this."}, {"owner": {"reputation": 208794, "user_id": 229044, "user_type": "moderator", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/591426cbbacd4025d920467bad356911?s=128&d=identicon&r=PG&f=1", "display_name": "meagar", "link": "https://stackoverflow.com/users/229044/meagar"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1515612034, "post_id": 48182932, "comment_id": 83369907, "body": "@Borodin Learning how to break things is the best way to learn how to secure things. You need to know how attack works to effectively protect against them. There is absolutely nothing wrong with whitehat/recreational hacking, so long as you aren&#39;t breaking into other people&#39;s production systems."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 208794, "user_id": 229044, "user_type": "moderator", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/591426cbbacd4025d920467bad356911?s=128&d=identicon&r=PG&f=1", "display_name": "meagar", "link": "https://stackoverflow.com/users/229044/meagar"}, "edited": false, "score": 0, "creation_date": 1515612886, "post_id": 48182932, "comment_id": 83370328, "body": "@meagar: Of course. But I hoped that there was also nothing wrong with raising a flag asking whether a post like this was acceptable on <i>Stack Overflow</i>. It seems that we must be all-knowing, as simple questions on <i>Meta</i> are also quickly destroyed."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1515613261, "post_id": 48182932, "comment_id": 83370535, "body": "@TomB: I suggest that you start using the <code>LWP</code> suite. <code>WWW::Mechanize</code> subclasses <code>LWP::UserAgent</code> and is meant as a very simple emulation of browser behaviour; it doesn&#39;t even support JavaScript. If you&#39;re looking at low-level hacking techniques then <code>Mechanize</code> doesn&#39;t cut it."}, {"owner": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "edited": false, "score": 0, "creation_date": 1515649595, "post_id": 48182932, "comment_id": 83381973, "body": "I tried loading that url and got an unable to connect message, either the site is down, or login first?.  Anyway, you would be good to check your <code>status</code> after the <code>get</code> to see that you actually fetched the page.  If there is no content...there is no cookie."}], "owner": {"reputation": 79, "user_id": 7283876, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/1220500691331604/picture?type=large", "display_name": "Tom Barat", "link": "https://stackoverflow.com/users/7283876/tom-barat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 120, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1515572012, "creation_date": 1515572012, "question_id": 48182932, "link": "https://stackoverflow.com/questions/48182932/perl-mechanize-empty-cookies", "title": "perl mechanize empty cookies", "body": "<p>i have the following perl code :</p>\n\n<pre><code>my %conf = ( file =&gt; \".cookies\", autosave =&gt; 1, destroy_at_the_end =&gt; 0 );\nmy $mech_instance = WWW::Mechanize-&gt;new(        \n        cookie_jar =&gt; HTTP::Cookies-&gt;new(\n            file           =&gt; $conf{file},\n            autosave       =&gt; $conf{autosave},\n            ignore_discard =&gt; $conf{destroy_at_the_end},        \n        ));\n\n$mech_instance-&gt;agent_alias('Linux Mozilla');\nmy $url = \"http://challenge01.root-me.org/programmation/ch8/\";\n\n$mech_instance-&gt;get($url);\n$mech_instance-&gt;cookie_jar-&gt;save(\"cookies\");\n</code></pre>\n\n<p>However both \"cookies\" and \".cookies\" files are empty.\nI'm trying to solve a captcha related exercise on rootme, but the server won't accept my solutions, probably because the cookies aren't stored properly.</p>\n\n<p>All documentation seems to indicate that mechanize should be able to work with cookies easily. (I should not even have to manually set the cookie_jar, according to the docs).</p>\n\n<p>Does anyone know what is going on ?</p>\n\n<p>Thank you for your help</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 2784, "user_id": 8413636, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d8c46d1ea221e93d32a1b3d2ee354cae?s=128&d=identicon&r=PG&f=1", "display_name": "zzxyz", "link": "https://stackoverflow.com/users/8413636/zzxyz"}, "edited": false, "score": 2, "creation_date": 1515542890, "post_id": 48178467, "comment_id": 83337104, "body": "<code>perl -nle &quot;print &#47;&#39;(.*)&#39;&#47;&quot;</code>"}, {"owner": {"reputation": 2784, "user_id": 8413636, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d8c46d1ea221e93d32a1b3d2ee354cae?s=128&d=identicon&r=PG&f=1", "display_name": "zzxyz", "link": "https://stackoverflow.com/users/8413636/zzxyz"}, "edited": false, "score": 0, "creation_date": 1515542956, "post_id": 48178467, "comment_id": 83337115, "body": "The syntax for escaping a <code>&#39;</code> is insane, so if you can avoid it, ^"}, {"owner": {"reputation": 137100, "user_id": 874188, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/ZcY77.png?s=128&g=1", "display_name": "tripleee", "link": "https://stackoverflow.com/users/874188/tripleee"}, "edited": false, "score": 2, "creation_date": 1515562259, "post_id": 48178467, "comment_id": 83341591, "body": "As an aside, lose the <a href=\"https://stackoverflow.com/questions/11710552/useless-use-of-cat\">useless use of <code>cat</code></a>"}], "answers": [{"comments": [{"owner": {"reputation": 22367, "user_id": 2288659, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/bBg8v.png?s=128&g=1", "display_name": "Silvio Mayolo", "link": "https://stackoverflow.com/users/2288659/silvio-mayolo"}, "edited": false, "score": 0, "creation_date": 1515546338, "post_id": 48178590, "comment_id": 83337876, "body": "This form of escaping does not work in <code>csh</code>, <code>dash</code>, or <code>sh</code>. May be worth noting that this is a <code>bash</code>/<code>zsh</code> -specific feature."}], "tags": [], "owner": {"reputation": 1064, "user_id": 1031776, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/3fed911ae9175eaf6c4e4ec51de7e6ac?s=128&d=identicon&r=PG", "display_name": "Will", "link": "https://stackoverflow.com/users/1031776/will"}, "is_accepted": true, "score": 5, "last_activity_date": 1515562183, "last_edit_date": 1515562183, "creation_date": 1515543608, "answer_id": 48178590, "question_id": 48178467, "link": "https://stackoverflow.com/questions/48178467/perl-capture-between-single-quotes-in-a-one-liner/48178590#48178590", "title": "Perl capture between single quotes in a one-liner", "body": "<p>In the Bash and Zsh shells, you can use <code>$''</code> to allow escaped single quotes.</p>\n\n<pre><code>echo $'I wouldn\\'t'\n</code></pre>\n\n<p>This also keeps <code>$1</code> from being interpreted by bash and available to perl too.</p>\n\n<pre><code>perl -nle $'print $1 if /\\'(.*)\\'/' &lt; /tmp/boobomb\n</code></pre>\n\n<p>also see \n<a href=\"https://unix.stackexchange.com/questions/30903/how-to-escape-quotes-in-shell\">https://unix.stackexchange.com/questions/30903/how-to-escape-quotes-in-shell</a></p>\n"}, {"tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": false, "score": 5, "last_activity_date": 1563958723, "last_edit_date": 1563958723, "creation_date": 1515561626, "answer_id": 48180759, "question_id": 48178467, "link": "https://stackoverflow.com/questions/48178467/perl-capture-between-single-quotes-in-a-one-liner/48180759#48180759", "title": "Perl capture between single quotes in a one-liner", "body": "<p>Use hex for the single quote (27) via <a href=\"https://perldoc.perl.org/perlrebackslash.html#Character-Escapes\" rel=\"nofollow noreferrer\">hexadecimal escape</a>, so <code>\\x27</code> </p>\n\n<pre><code>perl -wnE'say $1 if /\\x27(.*)\\x27/' input.txt\n</code></pre>\n\n<p>This assumes a single pair of single quotes, per shown sample data on which it was tested.</p>\n"}], "owner": {"reputation": 2167, "user_id": 824282, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/8f0cb967adb644f6408e5ff3df8c8a0f?s=128&d=identicon&r=PG", "display_name": "capser", "link": "https://stackoverflow.com/users/824282/capser"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 184, "favorite_count": 0, "accepted_answer_id": 48178590, "answer_count": 2, "score": 2, "last_activity_date": 1563958723, "creation_date": 1515542597, "last_edit_date": 1515608624, "question_id": 48178467, "link": "https://stackoverflow.com/questions/48178467/perl-capture-between-single-quotes-in-a-one-liner", "title": "Perl capture between single quotes in a one-liner", "body": "<p>I am trying to print out the text that is surrounded by single quotes.</p>\n\n<pre><code>/bin/bash -lc '/home/CASPER_REPORTS/scripts/CASPER_gen_report.sh CASPER_1'\n/bin/bash -lc '/home/CASPER_REPORTS/scripts/CASPER_gen_report.sh CASPER_1A'\n/bin/bash -lc '/home/CASPER_REPORTS/scripts/CASPER_gen_report.sh CASPER_2'\n/bin/bash -lc '/home/CASPER_REPORTS/scripts/CASPER_gen_report.sh CASPER_3'\n/bin/bash -lc '/home/CASPER_REPORTS/scripts/CASPER_gen_report.sh CASPER_3A'\n</code></pre>\n\n<p>The Boolean one I guess means that perl sees the string. </p>\n\n<pre><code>$ cat /tmp/casper_reports | perl -nle 'print /'.*'/'\n1\n1\n1\n1\n1\n</code></pre>\n\n<p>However when I try and capture it with the parenthesis it throws an error </p>\n\n<pre><code>$ cat /tmp/boobomb | perl -nle 'print /'(.*)'/'\n-bash: syntax error near unexpected token `('\n</code></pre>\n"}, {"tags": ["c#", "regex", "string", "perl"], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 9195033, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9e950056f30b6facd8de3e7952d520c5?s=128&d=identicon&r=PG", "display_name": "CyberCarotte", "link": "https://stackoverflow.com/users/9195033/cybercarotte"}, "edited": false, "score": 0, "creation_date": 1515528416, "post_id": 48175669, "comment_id": 83331480, "body": "Thank you! I can&#39;t believe it was so easy... I was on that site to test for expressions and I&#39;d been trying things for well over an hour now. Clearly I need to go read a book about Regex, eh? EDIT: Hang on, this doesn&#39;t remove the main parentheses though - I&#39;m really looking for only the contents, not everything after filename, that&#39;s too easy. ;)"}, {"owner": {"reputation": 23, "user_id": 9195033, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9e950056f30b6facd8de3e7952d520c5?s=128&d=identicon&r=PG", "display_name": "CyberCarotte", "link": "https://stackoverflow.com/users/9195033/cybercarotte"}, "edited": false, "score": 2, "creation_date": 1515529199, "post_id": 48175669, "comment_id": 83331848, "body": "OK, so after more tweaking, I ended up with <code>\\((.*)\\)</code> which seems to meet all the requirements. So far, anyway. :)"}], "tags": [], "owner": {"reputation": 6829, "user_id": 5649561, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xNgLZ.jpg?s=128&g=1", "display_name": "Vadim Martynov", "link": "https://stackoverflow.com/users/5649561/vadim-martynov"}, "is_accepted": true, "score": 2, "last_activity_date": 1515528082, "last_edit_date": 1515528082, "creation_date": 1515527335, "answer_id": 48175669, "question_id": 48175619, "link": "https://stackoverflow.com/questions/48175619/regex-to-extract-string-between-parentheses-which-also-contains-other-parenthese/48175669#48175669", "title": "Regex to extract string between parentheses which also contains other parentheses", "body": "<p>You can change exception for <code>@</code> symbol in your regex to regex matches any characters and add quantifier that matches from 0 to infinity symbols. And also simplify your regex by deleting group construction:</p>\n\n<pre><code>\\(.*\\)\n</code></pre>\n\n<p>Here is the explanation for the regular expression:</p>\n\n<ul>\n<li>Symbol <code>\\(</code> matches the character <code>(</code> literally. </li>\n<li><code>.*</code> matches any character (except for line terminators) </li>\n<li><code>*</code> quantifier matches between zero and unlimited times, as many times\nas possible, giving back as needed (greedy) </li>\n<li><code>\\)</code> matches the character <code>)</code> literally.</li>\n</ul>\n\n<p>You can use <a href=\"https://regex101.com/\" rel=\"nofollow noreferrer\">regex101</a> to compose and debug your regular expressions.</p>\n"}, {"comments": [{"owner": {"reputation": 6829, "user_id": 5649561, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xNgLZ.jpg?s=128&g=1", "display_name": "Vadim Martynov", "link": "https://stackoverflow.com/users/5649561/vadim-martynov"}, "edited": false, "score": 0, "creation_date": 1515528228, "post_id": 48175737, "comment_id": 83331382, "body": "It&#39;ll be good to check <code>first</code> and <code>last</code> variables for boundary scenarios."}, {"owner": {"reputation": 23, "user_id": 9195033, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9e950056f30b6facd8de3e7952d520c5?s=128&d=identicon&r=PG", "display_name": "CyberCarotte", "link": "https://stackoverflow.com/users/9195033/cybercarotte"}, "edited": false, "score": 0, "creation_date": 1515529110, "post_id": 48175737, "comment_id": 83331803, "body": "I expect this would totally have been easier, yes. I guess I first thought of doing it with Regex because the original code (not mine) was that way?"}, {"owner": {"reputation": 946, "user_id": 1765406, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/Koqta.jpg?s=128&g=1", "display_name": "vanHoesel", "link": "https://stackoverflow.com/users/1765406/vanhoesel"}, "edited": false, "score": 0, "creation_date": 1515601810, "post_id": 48175737, "comment_id": 83364286, "body": "@Rotem, there are several reasons not to use Regexes, performance would be one, unfamiliarity or being scared another reason. And probably a dozen more. About the first, micro optimisation here is not something to concern about, unless we need to deel with massive amounts of strings and every nano second counts. I&#39;d suggest do C or assembler. Unfamiliarity is what i would call a challenge, for every developer. ---- However, code clarity is a very good reason to do use regex, especially here. compare your 6 lines with this 1: <code>my ($substring) = $str =~ &#47; \\( (.*) \\) &#47;x ;</code> that is the Perl way!"}, {"owner": {"reputation": 19618, "user_id": 860585, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/YagL1.jpg?s=128&g=1", "display_name": "Rotem", "link": "https://stackoverflow.com/users/860585/rotem"}, "reply_to_user": {"reputation": 946, "user_id": 1765406, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/Koqta.jpg?s=128&g=1", "display_name": "vanHoesel", "link": "https://stackoverflow.com/users/1765406/vanhoesel"}, "edited": false, "score": 0, "creation_date": 1515602582, "post_id": 48175737, "comment_id": 83364782, "body": "@vanHoesel The Perl way is golfed unreadable code? Glad I don&#39;t write Perl ;)"}, {"owner": {"reputation": 946, "user_id": 1765406, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/Koqta.jpg?s=128&g=1", "display_name": "vanHoesel", "link": "https://stackoverflow.com/users/1765406/vanhoesel"}, "edited": false, "score": 0, "creation_date": 1515603334, "post_id": 48175737, "comment_id": 83365236, "body": "You are saying ... you can not understand that the result of the &#39;binding match&#39; operation <code>=~</code>, that could have multiple matches if we had multiple capturing parenthesis <code>(</code> ... <code>)</code>, that it would assign that result to a list of variables <code>( $substring , )</code> which happened to be only 1 and discard the remaining? You will learn quick enough that <code>$count = $str =~ &#47; \\( (.*) \\) &#47;x;</code> does give you the number of matches and <i>not</i> the first and only matched captured string. And be honest, that was just a simple 1 line of code --- I was not talking about Perl golf &#39;oneliners&#39; - those are horrifying!"}, {"owner": {"reputation": 19618, "user_id": 860585, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/YagL1.jpg?s=128&g=1", "display_name": "Rotem", "link": "https://stackoverflow.com/users/860585/rotem"}, "edited": false, "score": 0, "creation_date": 1515605589, "post_id": 48175737, "comment_id": 83366529, "body": "I am saying, or trying to say, that I don&#39;t measure clarity or readability by number of lines of code, but by how long is the sentence in your head that you need to construct in order to explain to yourself what the code you are looking at does. I could golf my code to one line, but I doubt it would make it any more readable. Having said that, I don&#39;t use Perl at all and rarely have to use Regex in my work, so I am not in a place to make an objective apples to apples comparison."}], "tags": [], "owner": {"reputation": 19618, "user_id": 860585, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/YagL1.jpg?s=128&g=1", "display_name": "Rotem", "link": "https://stackoverflow.com/users/860585/rotem"}, "is_accepted": false, "score": 0, "last_activity_date": 1515527679, "creation_date": 1515527679, "answer_id": 48175737, "question_id": 48175619, "link": "https://stackoverflow.com/questions/48175619/regex-to-extract-string-between-parentheses-which-also-contains-other-parenthese/48175737#48175737", "title": "Regex to extract string between parentheses which also contains other parentheses", "body": "<p>Regex seems overkill to me in this case. Can be more reliably achieved using <code>string</code> manipulation methods.</p>\n\n<pre><code>int first = str.IndexOf(\"(\");\nint last = str.LastIndexOf(\")\");\nif (first != -1 &amp;&amp; last != -1)\n{\n    string subString = str.Substring(first + 1, last - first - 1);\n}\n</code></pre>\n\n<p>I've never used Perl, but I'll venture a guess that it has equivalent methods.</p>\n"}], "owner": {"reputation": 23, "user_id": 9195033, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9e950056f30b6facd8de3e7952d520c5?s=128&d=identicon&r=PG", "display_name": "CyberCarotte", "link": "https://stackoverflow.com/users/9195033/cybercarotte"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1027, "favorite_count": 0, "accepted_answer_id": 48175669, "answer_count": 2, "score": 2, "last_activity_date": 1515528082, "creation_date": 1515527102, "question_id": 48175619, "link": "https://stackoverflow.com/questions/48175619/regex-to-extract-string-between-parentheses-which-also-contains-other-parenthese", "title": "Regex to extract string between parentheses which also contains other parentheses", "body": "<p>I've been trying to figure this out, but I don't think I understand Regex well enough to get to where I need to.</p>\n\n<p>I have string that resemble these:</p>\n\n<pre><code>filename.txt(1)attribute, 2)attribute(s), more!)\notherfile.txt(abc, def)\n</code></pre>\n\n<p>Basically, a string that always starts with a filename, then has some text between parentheses. And I'm trying to extract that part which is between the main parentheses, but the text that's there can contain absolutely anything, even some more parentheses (it often does.)</p>\n\n<p>Originally, there was a 'hacky' expression made like this:</p>\n\n<pre><code>/\\(([^@]+)\\)\\g\n</code></pre>\n\n<p>And it worked, until we ran into a case where the input string contained a @ and we were stuck. Obviously...</p>\n\n<p>I can't change the way the strings are generated, it's always a filename, then some parentheses and something of unknown length and content inside.</p>\n\n<p>I'm hoping for a simple Regex expression, since I need this to work in both C# and in Perl -- is such a thing possible? Or does this require something more complex, like its own parsing method?</p>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 985, "user_id": 1028276, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/e6162fc9b0b93763c9b03531b32ab519?s=128&d=identicon&r=PG", "display_name": "eeijlar", "link": "https://stackoverflow.com/users/1028276/eeijlar"}, "reply_to_user": {"reputation": 19159, "user_id": 3600709, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/731c8c4c0029d3414563333de16b8977?s=128&d=identicon&r=PG&f=1", "display_name": "ctwheels", "link": "https://stackoverflow.com/users/3600709/ctwheels"}, "edited": false, "score": 0, "creation_date": 1515521587, "post_id": 48174150, "comment_id": 83328181, "body": "<code>\\s+A\\s+\\&#47;Modules\\&#47;[^\\&#47;]+\\&#47;[^\\&#47;]+\\&#47;(?:branches|trunk|tags)$</code> works thank you @ctwheels"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1515523809, "post_id": 48174150, "comment_id": 83329327, "body": "The <code>\\s+</code> at the beginning requires at least one space at the beginning of the target string. It cannot match the &quot;<i>string</i>&quot; you show, which starts with <code>A</code> and not space. Is that &quot;<i>string</i>&quot; in fact text in a larger string?  You got a complete answer but I suggest that you edit the question and clarify this point with a small comment."}, {"owner": {"reputation": 5563, "user_id": 836748, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fa0788ea4af0508334e34621bda10a9e?s=128&d=identicon&r=PG", "display_name": "Aaron D. Marasco", "link": "https://stackoverflow.com/users/836748/aaron-d-marasco"}, "edited": false, "score": 1, "creation_date": 1515534410, "post_id": 48174150, "comment_id": 83334266, "body": "FYI, instead of trying to parse <code>svn</code> output, you might just want to use <a href=\"http://search.cpan.org/~mschwern/Alien-SVN-v1.8.11.0/src/subversion/subversion/bindings/swig/perl/native/Client.pm\" rel=\"nofollow noreferrer\">SVN::Client from CPAN</a>."}, {"owner": {"reputation": 985, "user_id": 1028276, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/e6162fc9b0b93763c9b03531b32ab519?s=128&d=identicon&r=PG", "display_name": "eeijlar", "link": "https://stackoverflow.com/users/1028276/eeijlar"}, "edited": false, "score": 0, "creation_date": 1515534991, "post_id": 48174150, "comment_id": 83334534, "body": "The markup requires 4 spaces before the string to mark it up so i don&#39;t know how to indicate that there should be additional spaces"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1515540357, "post_id": 48174150, "comment_id": 83336411, "body": "@eeijlar: Uh, five spaces? Had you noticed that indentation works just fine?"}], "answers": [{"comments": [{"owner": {"reputation": 985, "user_id": 1028276, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/e6162fc9b0b93763c9b03531b32ab519?s=128&d=identicon&r=PG", "display_name": "eeijlar", "link": "https://stackoverflow.com/users/1028276/eeijlar"}, "edited": false, "score": 0, "creation_date": 1515534865, "post_id": 48174600, "comment_id": 83334470, "body": "Apologies, there are actually spaces before the &#39;A&#39; character."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 985, "user_id": 1028276, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/e6162fc9b0b93763c9b03531b32ab519?s=128&d=identicon&r=PG", "display_name": "eeijlar", "link": "https://stackoverflow.com/users/1028276/eeijlar"}, "edited": false, "score": 1, "creation_date": 1515537824, "post_id": 48174600, "comment_id": 83335602, "body": "@eeijlar I edited your question to add spaces.  In the future perhaps write a note?"}, {"owner": {"reputation": 19159, "user_id": 3600709, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/731c8c4c0029d3414563333de16b8977?s=128&d=identicon&r=PG&f=1", "display_name": "ctwheels", "link": "https://stackoverflow.com/users/3600709/ctwheels"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1516307740, "post_id": 48174600, "comment_id": 83645433, "body": "@zdim no worries, thanks for the edit and cleaning up your comments, it&#39;s much appreciated!"}], "tags": [], "owner": {"reputation": 19159, "user_id": 3600709, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/731c8c4c0029d3414563333de16b8977?s=128&d=identicon&r=PG&f=1", "display_name": "ctwheels", "link": "https://stackoverflow.com/users/3600709/ctwheels"}, "is_accepted": true, "score": 4, "last_activity_date": 1515533309, "last_edit_date": 1592644375, "creation_date": 1515522800, "answer_id": 48174600, "question_id": 48174150, "link": "https://stackoverflow.com/questions/48174150/why-is-m-matching-when-i-asked-for-a-to-match-in-this-regex/48174600#48174600", "title": "Why is &#39;M&#39; matching when I asked for &#39;A&#39; to match in this regex?", "body": "\n<p>Your regex isn't matching <code>M</code>: it's matching <code>trunk</code>. Your regex pattern currently says:</p>\n<ul>\n<li>Match any of the following patterns\n<ul>\n<li><code>\\s+A\\s+\\/Modules\\/\\w\\/\\w\\/branches</code></li>\n<li><code>trunk</code></li>\n<li><code>tags$</code></li>\n</ul>\n</li>\n</ul>\n<p>To fix this you need to group the options together such that the alternates <code>|</code> are separate from the rest of the pattern. Using a &quot;non-capturing group&quot; <code>(?: ... )</code> works fine.</p>\n<p>Another issue you're facing is with the <code>\\w</code> character class. It matches a <em>single character</em> in the set <code>A-Za-z0-9_</code>. It looks like you need to match <code>odd-core</code> which will fail because of the hyphen <code>-</code> and because it is more than one character. You need to add to the character class and use <code>[\\w-]+</code> which will match the whole substring.</p>\n<p>You <em>could</em> use <code>[^/]+</code> (change the delimiters of the regex to avoid escaping slashes) but that will match <em>any character at all</em> except for a slash.</p>\n<p>As mentioned in comments below the OP's question as well as my answer, we aren't sure what the <code>\\s+</code> in your pattern is used for as there are no whitespaces characters at the start of your string. You may be able to remove the <code>\\s+</code> altogether or change the quantifier to <code>*</code> instead (any number of whitespace characters rather than one or more whitespace characters) if your strings don't actually contain leading whitespace.</p>\n<h3>Code</h3>\n<p>Either of the following methods works.</p>\n<p><a href=\"https://regex101.com/r/ezC8c8/2\" rel=\"nofollow noreferrer\">See the first regex in use here</a></p>\n<p><a href=\"https://regex101.com/r/ezC8c8/1\" rel=\"nofollow noreferrer\">See the second regex in use here</a></p>\n<pre class=\"lang-none prettyprint-override\"><code>\\s+A\\s+\\/Modules(?:\\/[^\\/]+){2}\\/(?:branches|trunk|tags)$\n\\s+A\\s+\\/Modules\\/[^\\/]+\\/[^\\/]+\\/(?:branches|trunk|tags)$\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1515537790, "post_id": 48176296, "comment_id": 83335586, "body": "They explained that spaces are indeed there and commented that they didn&#39;t know how to enter them.  So I edited the question and did that ... I hope that you don&#39;t mind, as it changes things. Perhaps add a note about the change?  Or, of course, by all means please roll back my change in the question if that&#39;s better."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1515540098, "post_id": 48176296, "comment_id": 83336345, "body": "@zdim: Far from it; I&#39;m grateful for your support."}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 0, "last_activity_date": 1515540292, "last_edit_date": 1515540292, "creation_date": 1515530232, "answer_id": 48176296, "question_id": 48174150, "link": "https://stackoverflow.com/questions/48174150/why-is-m-matching-when-i-asked-for-a-to-match-in-this-regex/48176296#48176296", "title": "Why is &#39;M&#39; matching when I asked for &#39;A&#39; to match in this regex?", "body": "<ul>\n<li><p>I assume you have code something like this</p>\n\n<pre><code>my $str = 'A /Modules/framework/odd-core/tags';\n\nif ( $str =~ /\\s+A\\s+\\/Modules\\/\\w\\/\\w\\/branches|trunk|tags$/ ) { ... }\n</code></pre></li>\n<li><p>First of all, if you're writing a pattern that matches slashes <code>/</code> then it's much simpler to change to a different delimiter. We can do that with any non-space character like <code>!</code> as long as there's an <code>m</code> in front</p>\n\n<pre><code>if ( $str =~ m!\\s+A\\s+/Modules/\\w/\\w/branches|trunk|tags$! ) { ... }\n</code></pre></li>\n<li><p>Now there are no spaces before the <code>A</code> in your string, so the initial <code>\\s+</code> won't match. Let's remove it</p>\n\n<pre><code>if ( $str =~ m!A\\s+/Modules/\\w/\\w/branches|trunk|tags$! ) { ... }\n</code></pre></li>\n<li><p>Now you're trying to match <code>framework</code> and <code>odd-core</code> with just <code>\\w</code>, which matches only a <em>single</em> alphanumeric character or an underscore. Let's add a hyphen <code>-</code> to make a new character class <code>[\\w-]</code> and append a <code>+</code> to match \"one or more\"</p>\n\n<pre><code>if ( $str =~ m!A\\s+/Modules/[\\w-]+/[\\w-]+/branches|trunk|tags$! ) { ... }\n</code></pre></li>\n<li><p>Now you're matching <code>A\\s+/Modules/framework/odd-core</code> <strong><em>or</em></strong> <code>trunk</code> <strong><em>or</em></strong> <code>tags$</code>. Let's put in non-capturing parentheses to make it say what I think you mean</p>\n\n<pre><code>if ( $str =~ m!A\\s+/Modules/[\\w-]+/[\\w-]+/(?:branches|trunk|tags)$! ) { ... }\n</code></pre>\n\n<p>That should work!</p></li>\n</ul>\n\n<h3>Update</h3>\n\n<p>Since your question has been updated to show that there really are spaces before the <code>A</code> you may add back the initial <code>\\s+</code>, but I think the pattern is likely to be fine without it</p>\n"}], "owner": {"reputation": 985, "user_id": 1028276, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/e6162fc9b0b93763c9b03531b32ab519?s=128&d=identicon&r=PG", "display_name": "eeijlar", "link": "https://stackoverflow.com/users/1028276/eeijlar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 79, "favorite_count": 0, "accepted_answer_id": 48174600, "answer_count": 2, "score": -2, "last_activity_date": 1515540292, "creation_date": 1515520804, "last_edit_date": 1515537445, "question_id": 48174150, "link": "https://stackoverflow.com/questions/48174150/why-is-m-matching-when-i-asked-for-a-to-match-in-this-regex", "title": "Why is &#39;M&#39; matching when I asked for &#39;A&#39; to match in this regex?", "body": "<p>I have this string:</p>\n\n<pre>\n    A /Modules/framework/odd-core/tags\n</pre>\n\n<p>(it does start with spaces). I am trying to match it using</p>\n\n<pre><code>\\s+A\\s+\\/Modules\\/\\w\\/\\w\\/branches|trunk|tags$\n</code></pre>\n\n<p>That works fine, but it is also matching:</p>\n\n<pre>\n    M /Modules/framework/buildtools/trunk/modules-parent/pom.xml\n</pre>\n\n<p>I have specifically asked for it to match the character 'A', but it's also picking up the character 'M'</p>\n"}, {"tags": ["linux", "perl", "ssh"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1515516500, "post_id": 48172699, "comment_id": 83325460, "body": "What happened when you tried using <code>echo</code>? Why don&#39;t you use the Perl program to filter the logs?"}, {"owner": {"reputation": 516, "user_id": 2224218, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/f7db38a8b0010381be6cde932b0f8b7b?s=128&d=identicon&r=PG", "display_name": "Subhash", "link": "https://stackoverflow.com/users/2224218/subhash"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1515581397, "post_id": 48172699, "comment_id": 83351148, "body": "Perl program involves reading the message file which would have more than a lakh lines. Whenever I look for a error message, File handle reads each line from the beginning of the file(which is very time taking process)."}], "answers": [{"tags": [], "owner": {"reputation": 9262, "user_id": 124951, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/c46d5911a8fb4ffd5fb8523d56a60de0?s=128&d=identicon&r=PG", "display_name": "salva", "link": "https://stackoverflow.com/users/124951/salva"}, "is_accepted": false, "score": 1, "last_activity_date": 1515660578, "creation_date": 1515660578, "answer_id": 48202950, "question_id": 48172699, "link": "https://stackoverflow.com/questions/48172699/using-netopenssh-tail-the-message-file-and-grep/48202950#48202950", "title": "Using Net::OpenSSH tail the message file and grep", "body": "<p>You can read the <code>messages</code> file via SFTP (see <a href=\"https://metacpan.org/pod/Net::SFTP::Foreign\" rel=\"nofollow noreferrer\">Net::SFTP::Foreign</a>):</p>\n\n<pre><code># untested!\nuse Net::SFTP::Foreign::Constants qw(:flags);\n\n...\nmy $sftp = $ssh-&gt;sftp;\n# open the messages file creating it if it doesn't exist\n# and move to the end:\nmy $fh = $sftp-&gt;open(\"/var/adm/messages\",\n                     SSH2_FXF_READ|SSH2_FXF_CREAT)\n    or die $sftp-&gt;error;\nseek($fh, 0, 2);\n\n$ssh-&gt;capture2(\"some command which...\");\n\n# look for the size of /var/adm/messages now so that we\n# can ignore any lines that may be appended while we are\n# reading it:\nmy $end = (stat $fh)[7];\n\n# and finally read any lines added since we opened it:\nmy @msg;\nwhile (1) {\n    my $pos = tell $fh;\n    last if $pos &lt; 0 or $pos &gt;= $end;\n    my $line = &lt;$fh&gt;;\n    last unless defined $line;\n    push @msg, $line;\n}\n</code></pre>\n\n<p>Note that you are not taking into account that the messages file may be rotated. Handling that would require more convoluted approaches.</p>\n"}], "owner": {"reputation": 516, "user_id": 2224218, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/f7db38a8b0010381be6cde932b0f8b7b?s=128&d=identicon&r=PG", "display_name": "Subhash", "link": "https://stackoverflow.com/users/2224218/subhash"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 152, "favorite_count": 1, "answer_count": 1, "score": 2, "last_activity_date": 1515660578, "creation_date": 1515515674, "last_edit_date": 1592644375, "question_id": 48172699, "link": "https://stackoverflow.com/questions/48172699/using-netopenssh-tail-the-message-file-and-grep", "title": "Using Net::OpenSSH tail the message file and grep", "body": "<p>I am using <a href=\"https://metacpan.org/pod/Net::OpenSSH\" rel=\"nofollow noreferrer\"><code>Net::OpenSSH</code></a></p>\n<pre><code>my $ssh = Net::OpenSSH-&gt;new(&quot;$linux_machine_host&quot;)\n</code></pre>\n<p>Using the SSH object, fews commands are executed multiple times for N hours.</p>\n<p>At times I need to look for any error messages, such as <em>Timeout</em>, in the <code>var/adm/message</code> file.</p>\n<h3>My suggestion</h3>\n<pre><code>$ssh-&gt;capture2(&quot;echo START &gt;&gt; /var/adm/messages&quot;);\n</code></pre>\n\n<pre><code>$ssh-&gt;capture2(&quot;some command which will be run in background for n hours&quot;);\n</code></pre>\n\n<pre><code>$ssh-&gt;capture2(&quot;echo END &gt;&gt; /var/adm/messages&quot;);\n</code></pre>\n<p>Then read all lines between <code>START</code> and <code>END</code> and grep for the required error message.</p>\n<pre><code>$ssh-&gt;capture2(&quot;grep -A 100000 &quot;START&quot; /var/adm/messages | grep -B 100000 END&quot;);`\n</code></pre>\n<p>Without writing <code>START</code> and <code>END</code> into the message file, can I <code>tail</code> the <code>var/adm/message</code> file at some point and capture any new messages appearing afterwards.</p>\n<p>Are there any <code>Net::OpenSSH</code> methods which would capture new lines and write them into a file?</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1515508184, "post_id": 48170223, "comment_id": 83320081, "body": "Backticks interpolate as double-quoted strings (i.e. <code>`...`</code> is the same as <code>readpipe(qq`...`)</code>), so that&#39;s not a problem. (You do suffer from shell command injection bugs, though. Use String::ShellQuote&#39;s <code>shell_quote</code>)"}, {"owner": {"reputation": 52334, "user_id": 702638, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/892f65bc0a8a0949ab88598de7d83cab?s=128&d=identicon&r=PG", "display_name": "Hunter McMillen", "link": "https://stackoverflow.com/users/702638/hunter-mcmillen"}, "edited": false, "score": 1, "creation_date": 1515508313, "post_id": 48170223, "comment_id": 83320164, "body": "If $log has white space in it, that would be an issue"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1515508404, "post_id": 48170223, "comment_id": 83320206, "body": "Tip: Probably should use <code>chomp; my @fields = split &#47;;&#47;;</code> instead of <code>if ( $_ =~ &#47;^([A-Za-z&#233;&#232;\\s-]*);([A-Za-z&#233;&#232;\\s-]*);([A-Za-z\\s-]*);([A-Za-z\\&zwnj;&#8203;s-]*);([A-Za-z\\s-]*)&zwnj;&#8203;$&#47; )</code>."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1515508434, "post_id": 48170223, "comment_id": 83320227, "body": "You are inserting arbitrary text into code without first converting the arbitrary text into code first (e.g. using aforementioned <code>shell_quote</code>)."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1515527807, "post_id": 48170223, "comment_id": 83331196, "body": "<code>my $cmd = shell_quote(&#39;printf&#39;, &quot;%s&quot;, &quot;$5\\n$5\\n&quot;) . &quot; | &quot; . shell_quote(&#39;passwd&#39;, &#39;--stdin&#39;, $log);</code>"}], "answers": [{"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": true, "score": 7, "last_activity_date": 1515515379, "last_edit_date": 1515515379, "creation_date": 1515509045, "answer_id": 48170639, "question_id": 48170223, "link": "https://stackoverflow.com/questions/48170223/perl-my-variable-is-not-consider-in-my-string/48170639#48170639", "title": "Perl : my variable is not consider in my string", "body": "<p>The problem is with what you have written, not with its colour! If you use a different editor to look at the same source files then you are very likely to see different colours, or everything may be in the same colour</p>\n\n<p>The way your editor colours the code is just for your convenience. The Perl compiler will see and process only the text</p>\n\n<p>Syntax colouring can often alert you to errors like unterminated string or comments that can swallow the rest of the program, or perhaps to a missing closing parenthesis. But because Perl is very difficult to parse, Perl syntax colouring is often not very good. As you can see, <em>gedit</em> has misunderstood the line</p>\n\n<pre><code>my $password = `echo -e \"'$l5'\\n'$5'\" | passwd --stdin $log`;\n</code></pre>\n\n<p>colouring <code>`echo -e \"'</code>\nand <code>'\" | passwd --stdin $log`</code>\nin pink because it</p>\n\n<p>na\u00efvely believes that the opening backtick <code>`</code> is closed by the following single quote <code>'</code></p>\n\n<p>It can be very difficult to get quoting right when you are passing a string to the shell for execution. It is much easier to install the\n<a href=\"https://metacpan.org/pod/String::ShellQuote\" rel=\"noreferrer\"><code>String::ShellQuote</code></a>\nmodule and let it take care of any corner cases</p>\n"}], "owner": {"reputation": 135, "user_id": 8278930, "user_type": "registered", "accept_rate": 20, "profile_image": "https://graph.facebook.com/10213591166512071/picture?type=large", "display_name": "Pierre Colart", "link": "https://stackoverflow.com/users/8278930/pierre-colart"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 113, "favorite_count": 0, "accepted_answer_id": 48170639, "answer_count": 1, "score": -1, "last_activity_date": 1515515379, "creation_date": 1515507656, "last_edit_date": 1515509704, "question_id": 48170223, "link": "https://stackoverflow.com/questions/48170223/perl-my-variable-is-not-consider-in-my-string", "title": "Perl : my variable is not consider in my string", "body": "<p>In gedit, pink is the color for strings, green for variables.</p>\n\n<p>As you can see in this image, when I try to add a password in my echo, my variable <code>$log</code> is in pink, so Perl considers it to be a string.</p>\n\n<p>How can I change this? I need Perl to consider <code>$log</code> to be a variable</p>\n\n<p><br/></p>\n\n<p><img src=\"https://i.stack.imgur.com/lCiba.png\" alt=\"code\"></p>\n\n<p>I do not have error, but the code does not add the password to my accounts</p>\n\n<p>Here is the code as text</p>\n\n<pre><code>open( LIST, \"&lt;liste-utilisateur.txt\" ) or die \"ERREUR FICHIER\";\n\nwhile ( &lt;LIST&gt; ) {\n\n    if ( $_ =~ /^([A-Za-z\u00e9\u00e8\\s-]*);([A-Za-z\u00e9\u00e8\\s-]*);([A-Za-z\\s-]*);([A-Za-z\\s-]*);([A-Za-z\\s-]*)$/ ) {\n\n        #$1=&gt;Nom\n        #$2=&gt;Prenom\n        #$3=&gt;Login\n        #$4=&gt;groupe\n\n        print $1;\n        print $2;\n        my $log = \"loc\" . uc $3;\n        print \"$log\";\n\n        #my $newgroup = `$groupadd -f $4`;\n        #my $newuser = `$useradd $log -g users -G $4 -c '$2.$1'`;\n\n        my $password = `echo -e \"'$5'\\n'$5'\" | passwd --stdin $log`;\n\n        close( LIST );\n</code></pre>\n"}, {"tags": ["linux", "perl", "centos", "protein-database"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 2, "creation_date": 1515495249, "post_id": 48166370, "comment_id": 83312204, "body": "It would help you a lot if you laid out your program properly, and it is only polite to do so when you are asking for free help with your code. Please fix it: it is virtually unreadable as it is."}, {"owner": {"reputation": 51, "user_id": 9192366, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/0e1ee151f4ec5285d9c36bba7211d722?s=128&d=identicon&r=PG&f=1", "display_name": "milan", "link": "https://stackoverflow.com/users/9192366/milan"}, "edited": false, "score": 0, "creation_date": 1515496217, "post_id": 48166370, "comment_id": 83312776, "body": "Thanks for the useful comments. I am not using any text editor which is bad. I have change it"}, {"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 0, "creation_date": 1515496261, "post_id": 48166370, "comment_id": 83312801, "body": "Thanks for the attempt to improve layout. It has however made things worse, at least by removing the essential identification of line 39."}, {"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 0, "creation_date": 1515496503, "post_id": 48166370, "comment_id": 83312943, "body": "If you continue editing, please: 1) indent by at most 4 chars 2) use spaces, not tabs (or at least use either consistently) 3) not more than one empty line at once, and then only with good reason."}, {"owner": {"reputation": 51, "user_id": 9192366, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/0e1ee151f4ec5285d9c36bba7211d722?s=128&d=identicon&r=PG&f=1", "display_name": "milan", "link": "https://stackoverflow.com/users/9192366/milan"}, "edited": false, "score": 0, "creation_date": 1515496615, "post_id": 48166370, "comment_id": 83313006, "body": "Ok, thanks. I just wanted to make it easier to read by putting more spaces and tabs, thats all."}, {"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 0, "creation_date": 1515496766, "post_id": 48166370, "comment_id": 83313108, "body": "Could you double check that the code as shown now (after many edits) is still the code which causes the error you describe?"}, {"owner": {"reputation": 51, "user_id": 9192366, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/0e1ee151f4ec5285d9c36bba7211d722?s=128&d=identicon&r=PG&f=1", "display_name": "milan", "link": "https://stackoverflow.com/users/9192366/milan"}, "edited": false, "score": 0, "creation_date": 1515496824, "post_id": 48166370, "comment_id": 83313140, "body": "It doesnt give me the same error, it gives me now this warning: <code>Global symbol &quot;$files&quot; requires explicit package name at select_pdb_filesREAL.pl line 11.</code> Although after running the script it didnt make any changes and deleted any lines in the files."}, {"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 0, "creation_date": 1515497181, "post_id": 48166370, "comment_id": 83313346, "body": "Please explain your understanding of line 39 <code>foreach($file_each[$line])</code>. What is the list to process? What is the variable to take each list entry? How many entries are in the list?"}, {"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 0, "creation_date": 1515497314, "post_id": 48166370, "comment_id": 83313421, "body": "You edited <code>use stricts;</code> into the code. You now have to work with that. You should keep it, fix the errors it causes (e.g. by adding a few strategic <code>my</code>s) and then come back with the sanitised code which gives you the initial error again. Or maybe trying that fixes it. Then please make an answer yourself or keep the question deleted."}, {"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 0, "creation_date": 1515497473, "post_id": 48166370, "comment_id": 83313518, "body": "With your last comment, your question is now prone to get some close-votes for &quot;not reproducable error&quot;, maybe downvotes. So better delete the question now, debug, test, edit and then undelete."}, {"owner": {"reputation": 51, "user_id": 9192366, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/0e1ee151f4ec5285d9c36bba7211d722?s=128&d=identicon&r=PG&f=1", "display_name": "milan", "link": "https://stackoverflow.com/users/9192366/milan"}, "edited": false, "score": 0, "creation_date": 1515497671, "post_id": 48166370, "comment_id": 83313618, "body": "I splitted each line that starts with <code>^HETATM</code> and took only fourth element <code>is[3]</code>, but I didn&#39;t pushed these elements into an array. I wanted to say that foreach line that starts with <code>^HETATM</code> see if the elements <code>is[3]</code> in each line match with the one that are in the <code>@ion</code> array and for those who are delete whole lines from the input files. I also tried to push all <code>is[3]</code> from each line into and array and then to use this array into foreach loop, but I had the same problem."}, {"owner": {"reputation": 51, "user_id": 9192366, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/0e1ee151f4ec5285d9c36bba7211d722?s=128&d=identicon&r=PG&f=1", "display_name": "milan", "link": "https://stackoverflow.com/users/9192366/milan"}, "edited": false, "score": 0, "creation_date": 1515498868, "post_id": 48166370, "comment_id": 83314354, "body": "Ok, Ill do so.."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1515500640, "post_id": 48166370, "comment_id": 83315369, "body": "You can&#39;t remove lines from a file using <code>rm</code>! Please give an example of the contents of <code>ions_solvents_cofactors</code>."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1515500740, "post_id": 48166370, "comment_id": 83315427, "body": "It&#39;s a very bad idea to declare every variable globally at the top of the program. The declaration should be as close as possible to the first occurrence of the variable."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1515500830, "post_id": 48166370, "comment_id": 83315481, "body": "Do you want to delete the lines from the original PDB files, or do you want to keep a backup copy?"}, {"owner": {"reputation": 51, "user_id": 9192366, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/0e1ee151f4ec5285d9c36bba7211d722?s=128&d=identicon&r=PG&f=1", "display_name": "milan", "link": "https://stackoverflow.com/users/9192366/milan"}, "edited": false, "score": 0, "creation_date": 1515500930, "post_id": 48166370, "comment_id": 83315541, "body": "I tought that if using <code>system</code> command or `` I can do it same way as a bash command. But I am probably wrong. Content of  <code>ions_solvents_cofactors</code> is a list of different letters that look like this: <code>SB SN IN 008 03S 06C 0KA 0NG 0NM</code> So if <code>308</code> is found under this list I wanted to remove all these lines in which 308 is found in."}, {"owner": {"reputation": 51, "user_id": 9192366, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/0e1ee151f4ec5285d9c36bba7211d722?s=128&d=identicon&r=PG&f=1", "display_name": "milan", "link": "https://stackoverflow.com/users/9192366/milan"}, "edited": false, "score": 0, "creation_date": 1515501040, "post_id": 48166370, "comment_id": 83315598, "body": "Thanks for the tip about the variable declaration, I am not that experienced so this is very useful. These are txt files, and it does not matter, I can overwrite over original txt file or make and copy new one into different folder."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1515502187, "post_id": 48166370, "comment_id": 83316315, "body": "What operating system are you using?"}, {"owner": {"reputation": 51, "user_id": 9192366, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/0e1ee151f4ec5285d9c36bba7211d722?s=128&d=identicon&r=PG&f=1", "display_name": "milan", "link": "https://stackoverflow.com/users/9192366/milan"}, "edited": false, "score": 0, "creation_date": 1515502405, "post_id": 48166370, "comment_id": 83316461, "body": "I am using centos 6.9"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1515514063, "post_id": 48166370, "comment_id": 83323974, "body": "@milan: Your PDB file doesn&#39;t follow the <a href=\"http://www.wwpdb.org/documentation/file-format-content/format33/sect9.html#ATOM\" rel=\"nofollow noreferrer\"><i>Protein Data Bank</i> format</a> so my solutions just splits each line on whitespace. I assume you want to match the <b><i>Atom name</i></b> field?"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1515514225, "post_id": 48166370, "comment_id": 83324062, "body": "@milan: With the possibility of off-by-one errors, I assume that you&#39;re referring to the column that contains <code>LEU</code> and <code>308</code> in your sample?"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1515514356, "post_id": 48166370, "comment_id": 83324128, "body": "@milan: You almost <i>never</i> want <code>split &#47;\\s+&#47;</code>, and if you&#39;re <i>sure</i> that you do you should add a comment to your code to explain yourself. <code>split &#39; &#39;</code> is probably correct. It is also the default, so if you leave the file record in <code>$_</code> you can say just <code>my @fields = split</code>."}], "answers": [{"comments": [{"owner": {"reputation": 51, "user_id": 9192366, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/0e1ee151f4ec5285d9c36bba7211d722?s=128&d=identicon&r=PG&f=1", "display_name": "milan", "link": "https://stackoverflow.com/users/9192366/milan"}, "edited": false, "score": 0, "creation_date": 1515509199, "post_id": 48169181, "comment_id": 83320698, "body": "I have never used any module, I guess that if they are not built that I can easily install them. Thank You for Your explanation. This look like a super organised code, with Your description I understood it well. I will run it tomorrow morning cause I am on the far east, time to sleep. I hope it removes whole lines whenever col4 matches element from the file. Just wanted to ask You, in my previous code, I know that the level of skills in low, but how could have I changed this remove line in perl so that it works as well? Just to know in the future if I encounter with the same kind of task."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 51, "user_id": 9192366, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/0e1ee151f4ec5285d9c36bba7211d722?s=128&d=identicon&r=PG&f=1", "display_name": "milan", "link": "https://stackoverflow.com/users/9192366/milan"}, "edited": false, "score": 0, "creation_date": 1515513269, "post_id": 48169181, "comment_id": 83323471, "body": "@milan: <code>Tie::File</code> was added to core Perl with version 5.7.3 in March 2002. If your perl is older than that then you really should consider updating it, otherwise my code should work as it stands. There are many useful modules available with standard Perl, but one of the biggest advantages of Perl is the <a href=\"https://www.cpan.org/\" rel=\"nofollow noreferrer\"><i>Comprehensive Perl Archive Network</i> (CPAN)</a> where ordinary people like you and I may submit code that could be useful to others. Standard command-line tools like sed and awk become irrelevant if you know perl."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 51, "user_id": 9192366, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/0e1ee151f4ec5285d9c36bba7211d722?s=128&d=identicon&r=PG&f=1", "display_name": "milan", "link": "https://stackoverflow.com/users/9192366/milan"}, "edited": false, "score": 0, "creation_date": 1515515972, "post_id": 48169181, "comment_id": 83325159, "body": "@milan: <i>&quot;I hope it removes whole lines whenever col4 matches element from the file&quot;</i> As I said, <a href=\"https://metacpan.org/pod/Tie::File\" rel=\"nofollow noreferrer\"><code>Tie::File</code></a> maps each line of a text file to an array element. If you read the documentation on <a href=\"http://perldoc.perl.org/functions/splice.html\" rel=\"nofollow noreferrer\"><code>splice</code></a> then you will see that it removes elements from an array. That means it will also delete a line from the PDB file. But you <i>must always</i> let the program run to completion. If you interrupt it then the file will probably be unusable."}, {"owner": {"reputation": 51, "user_id": 9192366, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/0e1ee151f4ec5285d9c36bba7211d722?s=128&d=identicon&r=PG&f=1", "display_name": "milan", "link": "https://stackoverflow.com/users/9192366/milan"}, "edited": false, "score": 0, "creation_date": 1515549654, "post_id": 48169181, "comment_id": 83338602, "body": "<code>&quot;bsd_glob&quot; is not defined in %File::Glob::EXPORT_TAGS at script_coord.pl line 5 \tmain::BEGIN() called at &#47;usr&#47;share&#47;perl5&#47;Carp.pm line 5 \teval {...} called at &#47;usr&#47;share&#47;perl5&#47;Carp.pm line 5 Can&#39;t continue after import errors at script_coord.pl line 5</code> This is the error I got when I try to run the script. I have searched on the internet how to define bsd_glob in Centos but couldn&#39;t find it. I am using perl 5.10 so I guess that this is not a problem"}, {"owner": {"reputation": 51, "user_id": 9192366, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/0e1ee151f4ec5285d9c36bba7211d722?s=128&d=identicon&r=PG&f=1", "display_name": "milan", "link": "https://stackoverflow.com/users/9192366/milan"}, "edited": false, "score": 0, "creation_date": 1515550996, "post_id": 48169181, "comment_id": 83338889, "body": "I have tried to run it by deleting <code>bsd_glob</code>, its running but it still removing some lines that under 4th column doesn&#39;t have element matching <code>elements from ion_solvent_cofactor</code> file. However it has to search only col4 of those lines that start with <code>^HETATM</code>. So, I ran it on some .txt that don&#39;t have <code>^HETATM</code> and it was stillremoving some lines. It also removes lines when I ran it on the files that under <code>^HETATM</code> 4th column doesn&#39;t have elements that matches with one from the list. For example on one file, it needs to remove only 4 lines, and it removes around 3000 lines which is strange"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 51, "user_id": 9192366, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/0e1ee151f4ec5285d9c36bba7211d722?s=128&d=identicon&r=PG&f=1", "display_name": "milan", "link": "https://stackoverflow.com/users/9192366/milan"}, "edited": false, "score": 0, "creation_date": 1515584407, "post_id": 48169181, "comment_id": 83352788, "body": "@milan: There is no mention of any of this in your question. Reduce your problem to a small sample of data that we can work with and ask a new question, showing both your PDB file and the list file. And you should have <code>:bsd_glob</code>, not <code>bsd_glob</code>."}, {"owner": {"reputation": 51, "user_id": 9192366, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/0e1ee151f4ec5285d9c36bba7211d722?s=128&d=identicon&r=PG&f=1", "display_name": "milan", "link": "https://stackoverflow.com/users/9192366/milan"}, "edited": false, "score": 0, "creation_date": 1515585341, "post_id": 48169181, "comment_id": 83353316, "body": "Yeah, You are right! I completely lost to mention it into the question. Sorry for that. I will open a new question and make it clear what is the problem if it is not working with the script that You have wrote. Anyway, if it also reads lines that start with <code>^ATOM</code> is shouldnt be a problem because under <code>col[4]</code> of <code>^ATOM</code> there shouldn&#39;t be any element that matches with the content of <code>ions_solvents_cofactors</code> file"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 51, "user_id": 9192366, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/0e1ee151f4ec5285d9c36bba7211d722?s=128&d=identicon&r=PG&f=1", "display_name": "milan", "link": "https://stackoverflow.com/users/9192366/milan"}, "edited": false, "score": 0, "creation_date": 1515585704, "post_id": 48169181, "comment_id": 83353540, "body": "@milan: If you add a list file to this question that doesn&#39;t give the correct results with the PDB that you have already shown then we may be able to avoid a whole new question. The problem is undoubtedly that you haven&#39;t fully specified the requirement."}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": true, "score": 0, "last_activity_date": 1515504173, "creation_date": 1515504173, "answer_id": 48169181, "question_id": 48166370, "link": "https://stackoverflow.com/questions/48166370/how-to-delete-lines-that-match-elements-from-another-file/48169181#48169181", "title": "How to delete lines that match elements from another file", "body": "<p>I would make use of the\n<a href=\"https://metacpan.org/pod/Tie::File\" rel=\"nofollow noreferrer\"><code>Tie::File</code></a>\nmodule, which allows you to <code>tie</code> an array to the module so that any changes you make to the array are reflected in the file</p>\n\n<p>I've used <code>glob</code> to find all the <code>.txt</code> files, with the option <code>:bsd_glob</code> so as to support spaces in the file paths</p>\n\n<p>The first job is to build a hash <code>%matches</code> that maps all the values in <code>ions_solvents_cofactors</code> to 1. This makes it trivial to test the PDB files for the required values</p>\n\n<p>Then it's just a matter of using <code>tie</code> on each <code>.txt</code> file, and testing each line to see whether the value in column 4 is represented in the hash</p>\n\n<p>I use variable <code>$i</code> to index into the <code>@file</code> array which maps the on-disk file. If a match is found then the array element is deleted with <code>splice @file, $i, 1</code>. (This naturally leaves <code>$i</code> indexing the next element in sequence without incrementing <code>$i</code>.) If there is no match then <code>$i</code> is incremented to index the next array element, leaving the line in place</p>\n\n<pre><code>use strict;\nuse warnings 'all';\n\nuse File::Glob ':bsd_glob';\nuse Tie::File;\n\nmy %matches = do {\n    open my $fh, '&lt;', 'ions_solvents_cofactors.txt';\n    local $/;\n    map { $_ =&gt; 1 } split ' ', &lt;$fh&gt;;\n};\n\nfor my $pdb ( glob '*.txt' ) {\n\n    tie my @file, 'Tie::File', $pdb or die $!;\n\n    for ( my $i = 0; $i &lt; @file; ) {\n\n        next unless my $col4 = ( split ' ', $file[$i] )[3];\n\n        if ( $matches{$col4} ) {\n            printf qq{Removing line %d from \"%s\"\\n},\n                    $i+1,\n                    $pdb;\n            splice @file, $i, 1;\n        }\n        else {\n            ++$i;\n        }\n    } \n}\n</code></pre>\n"}], "owner": {"reputation": 51, "user_id": 9192366, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/0e1ee151f4ec5285d9c36bba7211d722?s=128&d=identicon&r=PG&f=1", "display_name": "milan", "link": "https://stackoverflow.com/users/9192366/milan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 98, "favorite_count": 0, "accepted_answer_id": 48169181, "answer_count": 1, "score": 0, "last_activity_date": 1515514118, "creation_date": 1515494587, "last_edit_date": 1515514118, "question_id": 48166370, "link": "https://stackoverflow.com/questions/48166370/how-to-delete-lines-that-match-elements-from-another-file", "title": "How to delete lines that match elements from another file", "body": "\n\n<p>I am in the process of learning Perl and I am trying to figure out how to do this task. I have a folder with a bunch of text files and I have a file <code>ions_solvents_cofactors</code> that contains bunch of three letters list.</p>\n\n<p>I wrote a script that opens and reads each file in a folder and should delete those lines that under a specific column [3] matches with some element from the list. It is not working well. I have some problem at the end of the script and cant figure out what it is.</p>\n\n<p>Error I get is : <code>rm: invalid option -- '5'</code></p>\n\n<p>My input file look like this:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>ATOM   1592 HD13 LEU D  46      11.698 -10.914   2.183  1.00  0.00           H  \nATOM   1593 HD21 LEU D  46      11.528  -8.800   5.301  1.00  0.00           H  \nATOM   1594 HD22 LEU D  46      12.997  -9.452   4.535  1.00  0.00           H  \nATOM   1595 HD23 LEU D  46      11.722  -8.718   3.534  1.00  0.00           H  \nHETATM 1597  N1  308 A   1       0.339   6.314  -9.091  1.00  0.00           N  \nHETATM 1598  C10 308 A   1      -0.195   5.226  -8.241  1.00  0.00           C  \nHETATM 1599  C7  308 A   1      -0.991   4.254  -9.133  1.00  0.00           C  \nHETATM 1600  C1  308 A   1      -1.468   3.053  -8.292  1.00  0.00           C \n</code></pre>\n\n<p>Here is the script:</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>#!/usr/bin/perl -w\n\n$dirname = '.';\nopendir( DIR, $dirname ) or die \"cannot open directory\";\n@files = grep( /\\.txt$/, readdir( DIR ) );\n\nforeach $files ( @files ) {\n\n    open( FH, $files ) or die \"could not open $files\\n\";\n    @file_each = &lt;FH&gt;;\n    close FH;\n\n    close DIR;\n\n    my @ion_names = ();\n\n    my $ionfile   = 'ions_solvents_cofactors';\n    open( ION, $ionfile ) or die \"Could not open $ionfile, $!\";\n    my @ion = &lt;ION&gt;;\n    close ION;\n\n    for ( my $line = 0; $line &lt;= $#file_each; $line++ ) {\n\n        chomp( $file_each[$line] );\n        if ( $file_each[$line] =~ /^HETATM/ ) {\n            @is = split '\\s+', $file_each[$line];\n            chomp $is[3];\n        }\n\n        foreach ( $file_each[$line] ) {    #line 39\n\n            if ( \"@ion\" =~ $is[3] ) {\n                system( \"rm $file_each[$line]\" );\n            }\n        }\n    }\n}\n</code></pre>\n\n<p>So for example if <code>308</code> from the input file matches in the file ions_cofactors_solvents` then delete all these lines in which it matches.</p>\n"}, {"tags": ["python", "r", "perl"], "answers": [{"comments": [{"owner": {"reputation": 79, "user_id": 5446064, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/vLJgn.jpg?s=128&g=1", "display_name": "Pramod", "link": "https://stackoverflow.com/users/5446064/pramod"}, "edited": false, "score": 0, "creation_date": 1515496438, "post_id": 48165544, "comment_id": 83312899, "body": "the use bioconductor for this problem look relevant if its able to compare the location between two file faste than the code i have written ."}, {"owner": {"reputation": 42885, "user_id": 547331, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/39cb6add19f5b4f82c5152065d2065e7?s=128&d=identicon&r=PG", "display_name": "Martin Morgan", "link": "https://stackoverflow.com/users/547331/martin-morgan"}, "reply_to_user": {"reputation": 79, "user_id": 5446064, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/vLJgn.jpg?s=128&g=1", "display_name": "Pramod", "link": "https://stackoverflow.com/users/5446064/pramod"}, "edited": false, "score": 0, "creation_date": 1515496515, "post_id": 48165544, "comment_id": 83312955, "body": "generally it will be &#39;fast&#39;; there will be no R-level iteration (no <code>for</code> loop) in your final solution."}, {"owner": {"reputation": 79, "user_id": 5446064, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/vLJgn.jpg?s=128&g=1", "display_name": "Pramod", "link": "https://stackoverflow.com/users/5446064/pramod"}, "edited": false, "score": 0, "creation_date": 1515559429, "post_id": 48165544, "comment_id": 83340786, "body": "can you provide the possible script by which i can compare the two files using Rsamtools and GRanges()"}, {"owner": {"reputation": 42885, "user_id": 547331, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/39cb6add19f5b4f82c5152065d2065e7?s=128&d=identicon&r=PG", "display_name": "Martin Morgan", "link": "https://stackoverflow.com/users/547331/martin-morgan"}, "reply_to_user": {"reputation": 79, "user_id": 5446064, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/vLJgn.jpg?s=128&g=1", "display_name": "Pramod", "link": "https://stackoverflow.com/users/5446064/pramod"}, "edited": false, "score": 0, "creation_date": 1515584142, "post_id": 48165544, "comment_id": 83352659, "body": "Have you created the BAM files from your SAM files, and created the GRanges object from your &#39;sites.csv&#39; file?"}, {"owner": {"reputation": 79, "user_id": 5446064, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/vLJgn.jpg?s=128&g=1", "display_name": "Pramod", "link": "https://stackoverflow.com/users/5446064/pramod"}, "edited": false, "score": 0, "creation_date": 1515647102, "post_id": 48165544, "comment_id": 83381168, "body": "yes i have created BAM file and GRanges object. Next process script please."}, {"owner": {"reputation": 79, "user_id": 5446064, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/vLJgn.jpg?s=128&g=1", "display_name": "Pramod", "link": "https://stackoverflow.com/users/5446064/pramod"}, "edited": false, "score": 0, "creation_date": 1515735539, "post_id": 48165544, "comment_id": 83421934, "body": "many thanks for helping out in this. Now the R giving error while running readGAlignments () .   &gt; reads = readGAlignments(&quot;sample1_sort.bam&quot;, param = param) Error in .io_bam(.scan_bamfile, file, reverseComplement, yieldSize(file),  :    seqlevels(param) not in BAM header:"}, {"owner": {"reputation": 42885, "user_id": 547331, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/39cb6add19f5b4f82c5152065d2065e7?s=128&d=identicon&r=PG", "display_name": "Martin Morgan", "link": "https://stackoverflow.com/users/547331/martin-morgan"}, "reply_to_user": {"reputation": 79, "user_id": 5446064, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/vLJgn.jpg?s=128&g=1", "display_name": "Pramod", "link": "https://stackoverflow.com/users/5446064/pramod"}, "edited": false, "score": 0, "creation_date": 1515768967, "post_id": 48165544, "comment_id": 83439312, "body": "Looks like you&#39;re also asking <a href=\"https://support.bioconductor.org/p/104827/\" rel=\"nofollow noreferrer\">here</a> which is the more appropriate place, so let&#39;s continue on <a href=\"https://support.bioconductor.org\" rel=\"nofollow noreferrer\">support.bioconductor.org</a>"}], "tags": [], "owner": {"reputation": 42885, "user_id": 547331, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/39cb6add19f5b4f82c5152065d2065e7?s=128&d=identicon&r=PG", "display_name": "Martin Morgan", "link": "https://stackoverflow.com/users/547331/martin-morgan"}, "is_accepted": true, "score": 1, "last_activity_date": 1515677806, "last_edit_date": 1515677806, "creation_date": 1515491860, "answer_id": 48165544, "question_id": 48161550, "link": "https://stackoverflow.com/questions/48161550/get-the-sequenced-reads-present-300-base-near-to-restriction-sites/48165544#48165544", "title": "get the sequenced reads present 300 base near to restriction sites", "body": "<p>One overall strategy is to make indexed bam files using <a href=\"https://bioconductor.org\" rel=\"nofollow noreferrer\">Bioconductor</a> <a href=\"https://bioconductor.org/packages/Rsamtools\" rel=\"nofollow noreferrer\">Rsamtools</a> <code>asBam()</code> and <code>indexBam()</code>. Read your first file into a data.frame and construct a <a href=\"https://bioconductor.org/packages/GenomicRanges\" rel=\"nofollow noreferrer\">GenomicRanges</a> <code>GRanges()</code> object. Finally, use <a href=\"https://bioconductor.org/packages/GenomicAlignments\" rel=\"nofollow noreferrer\">GenomicAlignments</a> <code>readGAlignments()</code> to read the bam file, using the <code>GRanges()</code> as the which= argument to <code>ScanBamParam()</code>. The Bioconductor support site <a href=\"https://support.bioconductor.org\" rel=\"nofollow noreferrer\">https://support.bioconductor.org</a> is more appropriate for Bioconductor questions, if you decide to go this route.</p>\n\n<p>It looks like you want reads that are within +/- 300 base pairs of your GRanges object. Resize the GRanges</p>\n\n<pre><code>library(GenomicRanges)\n## create gr = GRanges(...)\ngr = resize(gr, width = 600, fix=\"center\")\n</code></pre>\n\n<p>use this as the <code>which=</code> in <code>ScanBamParam()</code>, and read your BAM file</p>\n\n<pre><code>library(GenomicAlignments)\nparam = ScanBamParam(which = gr)\nreads = readGAlignments(\"your.bam\", param = param)\n</code></pre>\n\n<p>Use <code>what=</code> to control fields read from the BAM file, e.g.</p>\n\n<pre><code>param = ScanBamParam(which = gr, what = \"seq\")\n</code></pre>\n"}], "owner": {"reputation": 79, "user_id": 5446064, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/vLJgn.jpg?s=128&g=1", "display_name": "Pramod", "link": "https://stackoverflow.com/users/5446064/pramod"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 86, "favorite_count": 0, "accepted_answer_id": 48165544, "answer_count": 1, "score": -3, "last_activity_date": 1515677806, "creation_date": 1515472975, "last_edit_date": 1515487525, "question_id": 48161550, "link": "https://stackoverflow.com/questions/48161550/get-the-sequenced-reads-present-300-base-near-to-restriction-sites", "title": "get the sequenced reads present 300 base near to restriction sites", "body": "<p>I have many sam file containing sequenced reads and i want to get the reads which are present near to restriction sequence at least 300 bases in both direction.<br>\n1st File containing the position of restrion sites, having two columns.<br>\nchr01 4957<br>\nchr01 6605<br>\nchr02 19968<br>\nchr02 21055<br>\nchr02 208555<br>\nchr03 243398</p>\n\n<p>2nd file having the reads in SAM file format. (almost 2.6M lines)</p>\n\n<p>id1995    147     chr03   119509969       42      85M<br>\nid1999    83      chr10   131560619       26      81M<br>\nid1999    163     chr10   131560429       26      85M<br>\nid2099    73      chr10   60627850        42      81M   </p>\n\n<p>Now I want to compare column 3 of sam file with column one of position file and column 4 of sam file with column 2 of position file. \nI tried doing in R language but because the data is large it is taking lot of time to do.\nif you can improve the R script to do work faster by implementing best algorithm.\nR code:</p>\n\n<pre><code>pos = read.csv(file=\"sites.csv\",header=F,sep=\"\\t\")\nfastq = read.csv(file=\"reads.sam\", header=F,sep=\"\\t\")\nnewFastq = data.frame(fastq)\nnewFastq = NULL\ntrim &lt;- function (x) gsub(\"^\\\\s+|\\\\s+$\", \"\", x)\n\nfor(i  in 1:nrow(fastq)){\nfor(j in 1:nrow(pos)){\n    if(as.character(fastq[i,3]) == trim(as.character(pos[j,1]))){\n      if(fastq[i,4] - pos[j,2] &lt; 300 &amp;&amp; fastq[i,4] - pos[j,2] &gt; -300){\n       newFastq = rbind(newFastq,fastq[i,])\n     }\n   }\n }  \n}\n#Write data into file \nwrite.table(newFastq, file = \"sitesFound.csv\",row.names=FALSE, na=\"\",quote=FALSE,col.names=FALSE, sep=\"\\t\")\n</code></pre>\n\n<p>or can you improve this code by writing in perl.</p>\n"}, {"tags": ["javascript", "perl", "cookies"], "comments": [{"owner": {"reputation": 6214, "user_id": 4865723, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/2a94d3ff9e3ae1ddf8c09b8511ba76f0?s=128&d=identicon&r=PG&f=1", "display_name": "buhtz says get vaccinated", "link": "https://stackoverflow.com/users/4865723/buhtz-says-get-vaccinated"}, "edited": false, "score": 0, "creation_date": 1515461947, "post_id": 48160242, "comment_id": 83300222, "body": "Please use correct interpunction and upcase letters where there are needed."}, {"owner": {"reputation": 4111, "user_id": 23033, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a6b6c69cae4d2061cafe851676f8d262?s=128&d=identicon&r=PG", "display_name": "Dre", "link": "https://stackoverflow.com/users/23033/dre"}, "edited": false, "score": 1, "creation_date": 1515473344, "post_id": 48160242, "comment_id": 83302509, "body": "I&#39;m not even sure if your code even will compile in the state it is currently in, but: please always <code>use strict;</code> when writing Perl scripts."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1515555639, "post_id": 48160242, "comment_id": 83339925, "body": "Your program doesn&#39;t even compile!!! Also, <i>always</i> use <code>use strict; use warnings qw( all );</code>."}], "answers": [{"tags": [], "owner": {"reputation": 170445, "user_id": 149341, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/omfTQ.png?s=128&g=1", "display_name": "duskwuff -inactive-", "link": "https://stackoverflow.com/users/149341/duskwuff-inactive"}, "is_accepted": false, "score": 4, "last_activity_date": 1515484578, "creation_date": 1515484578, "answer_id": 48163636, "question_id": 48160242, "link": "https://stackoverflow.com/questions/48160242/i-cant-get-site-content-usin-perl-script/48163636#48163636", "title": "i cant get site content usin perl script", "body": "<p>The web site you're trying to access has implemented protections against bots -- the script you're looking at is a part of that. Contact the site operator if you need programmatic access to their content.</p>\n"}], "owner": {"reputation": 25, "user_id": 7944190, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/149f94e13e4167f75ad334793c220203?s=128&d=identicon&r=PG&f=1", "display_name": "z&#233;tfe ege&#232;e", "link": "https://stackoverflow.com/users/7944190/z%c3%a9tfe-ege%c3%a8e"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 87, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1515484578, "creation_date": 1515460750, "last_edit_date": 1515472454, "question_id": 48160242, "link": "https://stackoverflow.com/questions/48160242/i-cant-get-site-content-usin-perl-script", "title": "i cant get site content usin perl script", "body": "<pre><code>#!/usr/bin/perl\n\nuse HTTP::Request;\nuse LWP::UserAgent;\nuse IO::Select;\nuse HTTP::Cookies;\nuse HTTP::Response;\nuse Term::ANSIColor;\nuse HTTP::Request::Common qw(POST);\nuse HTTP::Request::Common qw(GET);\nuse URI::URL;\nuse IO::Socket::INET;\nuse HTTP::Cookies;\nuse HTTP::Headers;\n\nmy $url = \"http://www.zone-h.org/archive\";\n\nmy $cookie_jar= HTTP::Cookies-&gt;new;\n$cookie_jar-&gt;clear;\n$cookie_jar-&gt;set_cookie(ZH=11e5b6849ca38da2d65328b70e83b4c5);\n$cookie_jar-&gt;set_cookie(PHPSESSID=3ekj4g38r2mtls63krlkrhevc1);\n\n\nmy $ua= LWP::UserAgent-&gt;new();\n$ua-&gt;agent('NeonFlash');\n$ua-&gt;timeout(30);\n$ua-&gt;cookie_jar($cookie_jar);\n\nmy $req= HTTP::Request-&gt;new(GET =&gt; $url);\nmy $res= ($ua-&gt;request($req))-&gt;content;\n\n\n\nprint \"$res\";\n</code></pre>\n\n<p>This code to get zone-h.org content, but when I run it I get this javascript page: <a href=\"http://www.zone-h.org/js/zh.js\" rel=\"nofollow noreferrer\">http://www.zone-h.org/js/zh.js</a></p>\n\n<p>so what is the problem?</p>\n\n<pre><code>&lt;html&gt;&lt;body&gt;-&lt;script type=\"text/javascript\" src=\"/z.js\" &gt;&lt;/script&gt;\n&lt;script&gt;function toNumbers(d){var e=[];d.replace(/(..)/g,function(d){e.push(parseInt(d,16))});return e}function toHex(){for(var d=[],d=1==arguments.length&amp;&amp;arguments[0].constructor==Array?arguments[0]:arguments,e=\"\",f=0;f&lt;d.length;f++)e+=(16&gt;d[f]?\"0\":\"\")+d[f].toString(16);return e.toLowerCase()}var a=toNumbers(\"86b33d8444a58c32376785a3ad250859\"),b=toNumbers(\"7e8afef3877883ecd58a95444a210c13\"),c=toNumbers(\"e1afd8ce7ba1c3d18178f4d4624b6db8\");document.cookie=\"ZH=\"+toHex(slowAES.decrypt(c,2,a,b))+\"; expires=Thu, 31-Dec-37 23:55:55 GMT; path=/\";location.href=\"http://www.zone-h.org/archive?zh=1\";&lt;/script&gt;&lt;/body&gt;&lt;/html&gt;\n</code></pre>\n"}, {"tags": ["perl", "cookies"], "comments": [{"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 0, "creation_date": 1515443349, "post_id": 48157561, "comment_id": 83294458, "body": "What happens if you swap the two code parts? Is then the other one, which is then the first one, written but not the second?"}, {"owner": {"reputation": 793701, "user_id": 19068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d2d3229ed1961d2bd81853242493247?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/19068/quentin"}, "edited": false, "score": 0, "creation_date": 1515443504, "post_id": 48157561, "comment_id": 83294533, "body": "<a href=\"https://metacpan.org/pod/distribution/CGI/lib/CGI.pod#CGI.pm-HAS-BEEN-REMOVED-FROM-THE-PERL-CORE\" rel=\"nofollow noreferrer\">Stop using CGI.pm</a>"}, {"owner": {"reputation": 47, "user_id": 6437905, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0148e34a275395e33da0c81d21292357?s=128&d=identicon&r=PG&f=1", "display_name": "Fred Garvin", "link": "https://stackoverflow.com/users/6437905/fred-garvin"}, "edited": false, "score": 0, "creation_date": 1515444460, "post_id": 48157561, "comment_id": 83295009, "body": "Yes. Swapping will write the other one."}, {"owner": {"reputation": 47, "user_id": 6437905, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0148e34a275395e33da0c81d21292357?s=128&d=identicon&r=PG&f=1", "display_name": "Fred Garvin", "link": "https://stackoverflow.com/users/6437905/fred-garvin"}, "edited": false, "score": 0, "creation_date": 1515444514, "post_id": 48157561, "comment_id": 83295036, "body": "What is a better alternative to cgi.pm?"}, {"owner": {"reputation": 793701, "user_id": 19068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d2d3229ed1961d2bd81853242493247?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/19068/quentin"}, "edited": false, "score": 0, "creation_date": 1515445334, "post_id": 48157561, "comment_id": 83295398, "body": "@FredGarvin \u2014 Follow the link"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1515446807, "post_id": 48157561, "comment_id": 83296003, "body": "<code>my @cookies; push @cookies, CGI::Cookie-&gt;new(...); push @cookies, CGI::Cookie-&gt;new(...); -&gt;header(-cookie =&gt; \\@cookies);</code>"}], "answers": [{"tags": [], "owner": {"reputation": 793701, "user_id": 19068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d2d3229ed1961d2bd81853242493247?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/19068/quentin"}, "is_accepted": true, "score": 5, "last_activity_date": 1515443359, "creation_date": 1515443359, "answer_id": 48157608, "question_id": 48157561, "link": "https://stackoverflow.com/questions/48157561/not-sure-how-to-write-2-different-cookies/48157608#48157608", "title": "Not sure how to write 2 different cookies", "body": "<p>Look at <a href=\"https://metacpan.org/pod/CGI::Cookie\" rel=\"noreferrer\">the documentation for CGI::Cookie</a>. It has an example of sending multiple cookies:</p>\n\n<blockquote>\n<pre><code>print header(-cookie=&gt;[$cookie1,$cookie2]);\n</code></pre>\n</blockquote>\n\n<p>Don't set the value, then set a different value.</p>\n\n<p>Set a single value, which is an arrayref containing <strong>both</strong> cookies.</p>\n\n<pre><code>use CGI::Cookie qw();\nuse Digest::MD5 qw(md5_hex);    #for cookie\n\nprint CGI::header(\n  -cookie =&gt; [\n    CGI::Cookie-&gt;new(\n      -name    =&gt; '_SESSION',\n      -value   =&gt; $cookiedata,\n      -expires =&gt; $session_length,\n      -path    =&gt; '/',\n      -domain  =&gt; $owner,\n      -secure  =&gt; $secure\n    ),\n    CGI::Cookie-&gt;new(\n      -name    =&gt; $username,\n      -value   =&gt; $username,\n      -expires =&gt; $session_length,\n      -path    =&gt; '/',\n      -domain  =&gt; $owner,\n      -secure  =&gt; $secure\n      )\n\n  ]\n);\n</code></pre>\n"}], "owner": {"reputation": 47, "user_id": 6437905, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0148e34a275395e33da0c81d21292357?s=128&d=identicon&r=PG&f=1", "display_name": "Fred Garvin", "link": "https://stackoverflow.com/users/6437905/fred-garvin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 34, "favorite_count": 0, "accepted_answer_id": 48157608, "answer_count": 1, "score": -1, "last_activity_date": 1515443359, "creation_date": 1515443151, "last_edit_date": 1515443253, "question_id": 48157561, "link": "https://stackoverflow.com/questions/48157561/not-sure-how-to-write-2-different-cookies", "title": "Not sure how to write 2 different cookies", "body": "<p>I need to write 2 different cookies. This is what I'm using. Writes the first 1 but not the second. Thanks.</p>\n\n<pre><code>use CGI::Cookie qw();\nuse Digest::MD5 qw(md5_hex);#for cookie\n\nprint CGI::header(-cookie =&gt; [CGI::Cookie-&gt;new(\n-name =&gt; '_SESSION',\n-value =&gt; $cookiedata,\n-expires=&gt; $session_length, \n-path=&gt;'/', \n-domain=&gt; $owner, \n-secure=&gt;$secure)]);\n\nprint CGI::header(-cookie =&gt; [CGI::Cookie-&gt;new(\n-name =&gt; $username,\n-value =&gt; $username,\n-expires=&gt; $session_length, \n-path=&gt;'/', \n-domain=&gt; $owner, \n-secure=&gt; $secure)]);\n</code></pre>\n"}, {"tags": ["perl", "ssh", "sftp", "lftp"], "comments": [{"owner": {"reputation": 1702, "user_id": 880797, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/bace3dcc4a83523d93399ab2bd1f3728?s=128&d=identicon&r=PG", "display_name": "Andrey", "link": "https://stackoverflow.com/users/880797/andrey"}, "edited": false, "score": 5, "creation_date": 1515443705, "post_id": 48156581, "comment_id": 83294649, "body": "Why are not you using a Perl module for that (Net::SFTP::Foreign)?"}], "answers": [{"tags": [], "owner": {"reputation": 1177, "user_id": 3292582, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/616abc13c1fd4782a1ac9362968bc4db?s=128&d=identicon&r=PG", "display_name": "lav", "link": "https://stackoverflow.com/users/3292582/lav"}, "is_accepted": false, "score": 0, "last_activity_date": 1515556420, "creation_date": 1515556420, "answer_id": 48180057, "question_id": 48156581, "link": "https://stackoverflow.com/questions/48156581/perl-lftp-pipe-using-ssh-key/48180057#48180057", "title": "Perl LFTP Pipe Using SSH Key", "body": "<p>Add -u option to the open command inside -e argument and use the pass phrase as the password. You should also use url syntax to select the sftp protocol, e.g. sftp://user:phrase@server</p>\n"}], "owner": {"reputation": 146, "user_id": 2503801, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/0d61ba76fec5ee0062ad1288d0fe5e11?s=128&d=identicon&r=PG&f=1", "display_name": "r1pster", "link": "https://stackoverflow.com/users/2503801/r1pster"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 435, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1515556420, "creation_date": 1515438280, "question_id": 48156581, "link": "https://stackoverflow.com/questions/48156581/perl-lftp-pipe-using-ssh-key", "title": "Perl LFTP Pipe Using SSH Key", "body": "<p>I can currently connect to an SFTP server using a username/password combination:</p>\n\n<pre><code>print \"Attempting connection...\\n\";\n\nopen( my $LFTP,'|-', \"lftp -u $ftpuser,'$ftppwd' -e open -p $ftpport $ftpserver\" ) or die \"Cannot open lftp: $!\";\n\nprint $LFTP &lt;&lt;\"END\";\n                    ls\nEND\nclose($LFTP); # die unless lftp exit code is 0\n\nexit 0;\n</code></pre>\n\n<p>How can change this code to connect to a different server using an SSH key which is encrypted with a passphrase?</p>\n\n<p>This is what I've tried:</p>\n\n<pre><code>print \"Attempting connection...\\n\";\n\n# $ftppwd is blank now!\n\nopen( my $LFTP,'|-', \"lftp -u $ftpuser,'$ftppwd' -e 'set sftp:connect-program \\\"ssh -a -x -i $keypath\\\"; open $ftpserver;'\" ) or die \"Cannot open lftp: $!\";\n\nprint $LFTP &lt;&lt;\"END\";\n                                ls\nEND\nclose($LFTP); # die unless lftp exit code is 0\nexit 0;\n</code></pre>\n\n<p>The output is stuck at:</p>\n\n<pre><code>Attempting connection...\n`ls' at 0 [Connecting...]\n</code></pre>\n\n<p>Thank you in advance for any help.. </p>\n"}, {"tags": ["python", "perl"], "answers": [{"tags": [], "owner": {"reputation": 377, "user_id": 6583638, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1zobe.jpg?s=128&g=1", "display_name": "Flying_whale", "link": "https://stackoverflow.com/users/6583638/flying-whale"}, "is_accepted": false, "score": 0, "last_activity_date": 1515429275, "last_edit_date": 1515429275, "creation_date": 1515428620, "answer_id": 48154208, "question_id": 48153891, "link": "https://stackoverflow.com/questions/48153891/running-python-script-from-perl-with-argument-to-stdin-and-saving-stdout-output/48154208#48154208", "title": "Running python script from perl, with argument to stdin and saving stdout output", "body": "<p>To launch your external script you can do</p>\n\n<pre><code>system \"python ../python/pythonScript.py hi\";\n</code></pre>\n\n<p>and then in your python script</p>\n\n<pre><code>import sys\ndef yourFct(a, b):\n    ...\n\nif __name__== \"__main__\":\n    yourFct(sys.argv[1])\n</code></pre>\n\n<p>you can have more informations on the python part <a href=\"https://stackoverflow.com/questions/17544307/how-do-i-run-python-script-using-arguments-in-windows-command-line\">here</a></p>\n"}, {"tags": [], "owner": {"reputation": 190, "user_id": 9053226, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z1XNt.jpg?s=128&g=1", "display_name": "A Gold Man", "link": "https://stackoverflow.com/users/9053226/a-gold-man"}, "is_accepted": false, "score": 1, "last_activity_date": 1515433795, "creation_date": 1515433795, "answer_id": 48155505, "question_id": 48153891, "link": "https://stackoverflow.com/questions/48153891/running-python-script-from-perl-with-argument-to-stdin-and-saving-stdout-output/48155505#48155505", "title": "Running python script from perl, with argument to stdin and saving stdout output", "body": "<p>You're getting this error because you're using shell redirection instead of just passing an argument</p>\n\n<pre><code>../python/pythonScript.py &lt; hi\n</code></pre>\n\n<p>tells your shell to read input from a file called hi in the current directory, rather than using it as an argument. What you mean to do is</p>\n\n<pre><code>my $ret = `../python/pythonScript.py hi`; \n</code></pre>\n\n<p>Which correctly executes your python script with the hi argument, and returns the result to the variable <code>$ret</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "is_accepted": false, "score": 1, "last_activity_date": 1515437001, "last_edit_date": 1515437001, "creation_date": 1515435183, "answer_id": 48155847, "question_id": 48153891, "link": "https://stackoverflow.com/questions/48153891/running-python-script-from-perl-with-argument-to-stdin-and-saving-stdout-output/48155847#48155847", "title": "Running python script from perl, with argument to stdin and saving stdout output", "body": "<p><s>The</s> Some of the other answers assume that <code>hi</code> must be passed as a command line parameter to the Python script but the asker says it comes from stdin.</p>\n\n<p>Thus:</p>\n\n<pre><code>my $ret = `echo \"hi\" | ../python/pythonScript.py`;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": true, "score": 2, "last_activity_date": 1515654341, "last_edit_date": 1515654341, "creation_date": 1515436255, "answer_id": 48156086, "question_id": 48153891, "link": "https://stackoverflow.com/questions/48153891/running-python-script-from-perl-with-argument-to-stdin-and-saving-stdout-output/48156086#48156086", "title": "Running python script from perl, with argument to stdin and saving stdout output", "body": "<p>The <a href=\"https://perldoc.perl.org/perlop.html#Quote-Like-Operators\" rel=\"nofollow noreferrer\"><code>qx</code> operator</a> (backticks) starts a shell (<code>sh</code>), in which <code>prog &lt; input</code> syntax <a href=\"https://www.tldp.org/LDP/abs/html/io-redirection.html\" rel=\"nofollow noreferrer\">expects a file</a> named <code>input</code> from which it will read lines and feed them to the program <code>prog</code>.  But you want the python script to receive on its <code>STDIN</code> the string <code>hi</code> instead, not lines of a file named <code>hi</code>.</p>\n\n<p>One way is to directly do that, <code>my $ret = qx(echo \"hi\" | python_script)</code>. </p>\n\n<p>But I'd suggest to consider using modules for this.  Here is a simple example with <a href=\"http://search.cpan.org/~rjbs/IPC-Run3-0.048/lib/IPC/Run3.pm\" rel=\"nofollow noreferrer\">IPC::Run3</a></p>\n\n<pre><code>use warnings;\nuse strict;\nuse feature 'say';\n\nuse IPC::Run3;\n\nmy @cmd = ('program', 'arg1', 'arg2');\n\nmy $in = \"hi\";\n\nrun3 \\@cmd, \\$in, \\my $out;\n\nsay \"script's stdout: $out\";\n</code></pre>\n\n<p>The <code>program</code> is the path to your script if it is executable, or perhaps <code>python script.py</code>. This will be run by <code>system</code> so the output is obtained once that completes, what is consistent with the attempt in the question. See documentation for module's operation.</p>\n\n<p>This module is intended to be simple while \"<em>satisfy 99% of the need for using <code>system</code>, <code>qx</code>, and <code>open3 [...]</code></em>. For far more power and control see <a href=\"http://search.cpan.org/~toddr/IPC-Run-0.96/lib/IPC/Run.pm\" rel=\"nofollow noreferrer\">IPC::Run</a>.</p>\n"}], "owner": {"reputation": 759, "user_id": 5410948, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/fabc426325c7ee30f3200419d02e2a63?s=128&d=identicon&r=PG&f=1", "display_name": "John", "link": "https://stackoverflow.com/users/5410948/john"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1274, "favorite_count": 0, "accepted_answer_id": 48156086, "answer_count": 4, "score": 1, "last_activity_date": 1515654341, "creation_date": 1515427347, "question_id": 48153891, "link": "https://stackoverflow.com/questions/48153891/running-python-script-from-perl-with-argument-to-stdin-and-saving-stdout-output", "title": "Running python script from perl, with argument to stdin and saving stdout output", "body": "<p>My perl script is at path:           </p>\n\n<pre><code>a/perl/perlScript.pl\n</code></pre>\n\n<p>my python script is at path:      </p>\n\n<pre><code>a/python/pythonScript.py\n</code></pre>\n\n<p><code>pythonScript.py</code> gets an argument from stdin, and returns result to stdout. From <code>perlScript.pl</code> , I want to run <code>pythonScript.py</code> with the argument <code>hi</code> to stdin, and save the results in some variable. That's what I tried:          </p>\n\n<pre><code>my $ret = `../python/pythonScript.py &lt; hi`;                   \n</code></pre>\n\n<p>but I got the following error:          </p>\n\n<pre><code>The system cannot find the path specified.            \n</code></pre>\n\n<p>Can you explain the path can't be found?</p>\n"}, {"tags": ["perl", "unit-testing", "mocking"], "comments": [{"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1515425926, "post_id": 48153318, "comment_id": 83285693, "body": "<code>mkpath</code> is probably tested enough, so it&#39;s OK to mock it. See <a href=\"http://p3rl.org/Test::Spec::Mocks\" rel=\"nofollow noreferrer\">Test::Spec::Mocks</a> for another possiblity."}], "answers": [{"comments": [{"owner": {"reputation": 307, "user_id": 6850179, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/b776cc6e5d6d16b4490da030c7a55bbd?s=128&d=identicon&r=PG&f=1", "display_name": "paulj", "link": "https://stackoverflow.com/users/6850179/paulj"}, "edited": false, "score": 0, "creation_date": 1515507024, "post_id": 48153635, "comment_id": 83319278, "body": "Please see revision above."}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "reply_to_user": {"reputation": 307, "user_id": 6850179, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/b776cc6e5d6d16b4490da030c7a55bbd?s=128&d=identicon&r=PG&f=1", "display_name": "paulj", "link": "https://stackoverflow.com/users/6850179/paulj"}, "edited": false, "score": 0, "creation_date": 1515510691, "post_id": 48153635, "comment_id": 83321736, "body": "<code>if ($@)</code> is dangerous, see <a href=\"http://www.perlmonks.org/?node_id=1153468\" rel=\"nofollow noreferrer\">Bug in eval in pre-5.14</a>"}, {"owner": {"reputation": 307, "user_id": 6850179, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/b776cc6e5d6d16b4490da030c7a55bbd?s=128&d=identicon&r=PG&f=1", "display_name": "paulj", "link": "https://stackoverflow.com/users/6850179/paulj"}, "edited": false, "score": 0, "creation_date": 1515525843, "post_id": 48153635, "comment_id": 83330297, "body": "Thank you. This bug is all over, even in some remote CPAN."}, {"owner": {"reputation": 307, "user_id": 6850179, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/b776cc6e5d6d16b4490da030c7a55bbd?s=128&d=identicon&r=PG&f=1", "display_name": "paulj", "link": "https://stackoverflow.com/users/6850179/paulj"}, "edited": false, "score": 0, "creation_date": 1515791330, "post_id": 48153635, "comment_id": 83450576, "body": "<code>remove_tree( &#39;foo&#47;bar&#39;, &#39;bar&#47;rat&#39;, {error =&gt; \\my $err} );   if (@$err) {...}</code> This has no known bugs, correct?"}], "tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": true, "score": 0, "last_activity_date": 1515426458, "creation_date": 1515426458, "answer_id": 48153635, "question_id": 48153318, "link": "https://stackoverflow.com/questions/48153318/testing-file-i-o-with-perl-frameworks/48153635#48153635", "title": "Testing file i/o with Perl - frameworks", "body": "<pre><code>#! /usr/bin/perl\nuse warnings;\nuse strict;\n\n{\n    package TestMe;\n    use File::Path qw{ mkpath };\n    sub testme {\n        mkpath('dir', 0, 0777);\n    }\n}\n\nuse Test::More;\nuse Sub::Override;\n\n{\n    my $override = 'Sub::Override'-&gt;new('TestMe::mkpath' =&gt; sub {\n        my ($dir, $verbose, $mode) = @_;\n        is $dir, 'dir', 'right dir';\n        is $verbose, 0, 'no verbosity';\n        is $mode, 0777, 'correct mode';\n    });\n    TestMe::testme();\n}  # End of scope, $overrides si destroyed, original mkpath is restored.\n</code></pre>\n\n<p>Note that you override mkpath in the TestMe package, as it's been imported by the <code>use</code> clause.</p>\n"}], "owner": {"reputation": 307, "user_id": 6850179, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/b776cc6e5d6d16b4490da030c7a55bbd?s=128&d=identicon&r=PG&f=1", "display_name": "paulj", "link": "https://stackoverflow.com/users/6850179/paulj"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 158, "favorite_count": 1, "accepted_answer_id": 48153635, "answer_count": 1, "score": 1, "last_activity_date": 1515506999, "creation_date": 1515425388, "last_edit_date": 1515506999, "question_id": 48153318, "link": "https://stackoverflow.com/questions/48153318/testing-file-i-o-with-perl-frameworks", "title": "Testing file i/o with Perl - frameworks", "body": "<p>I have the following command in pl script:</p>\n\n<pre><code>mkpath($my_dir,0,0777);\n</code></pre>\n\n<p>I want to test instances when it encounters errors when executing this command. Currently, I change permissions of the parent directory, or some other such change to the file system, to force an error. How would I set up a unit test, if possible, without altering the physical machine? I am reading up on Test::MockModule and Sub::Override, but not seeing how this could be used above. I have used Test::More in the past, but not for mocking or injection.</p>\n\n<p>There are many other file system calls where errors may arise than the one shown above.</p>\n\n<p>Expanding on below answer, I came up with the following shown below. Are there any caveats to below? I want to run the script, with 'bad' input to make sure I am capturing error conditions correctly.</p>\n\n<pre><code>use warnings;\nuse strict;\n\nuse Test::More;\nuse Sub::Override;\nuse File::Path qw{ mkpath };\n\nmy $my_dir = \"somedir\";\nmy $err_msg = \"\";\nsub testme { \n    eval {mkpath($my_dir, 0, 0777)};\n    if ($@) {\n        $err_msg = \"Could not create directory $my_dir. Error was as follows: $@\\n\";\n    }\n    return $err_msg;\n}\n\n#The following will be a series of tests for different error conditions when script is run in test mode\n{\n    my $override = 'Sub::Override'-&gt;new('mkpath' =&gt; sub {\n        my ($dir, $verbose, $mode) = @_;\n        if ($dir eq \"somedir\") { $dir = \"/baddir\" };\n        return File::Path::mkpath ($dir,$verbose, $mode);\n    });\n\n    my $res = testme(); #will check result with maybe \"is\" or \"ok\"\n    print \"Result of testme sub:$res\\n\";\n}  \n</code></pre>\n"}, {"tags": ["perl", "arguments", "subroutine"], "comments": [{"owner": {"reputation": 1884, "user_id": 4527978, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Od9E3.png?s=128&g=1", "display_name": "parik", "link": "https://stackoverflow.com/users/4527978/parik"}, "edited": false, "score": 0, "creation_date": 1515405189, "post_id": 48147787, "comment_id": 83273699, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/15043414/perl-not-enough-arguments-for-function\">Perl: Not enough arguments for function</a>"}, {"owner": {"reputation": 324, "user_id": 2068595, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f38e720ef9a9bca657b396fa1eeecced?s=128&d=identicon&r=PG", "display_name": "bam500", "link": "https://stackoverflow.com/users/2068595/bam500"}, "reply_to_user": {"reputation": 1884, "user_id": 4527978, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Od9E3.png?s=128&g=1", "display_name": "parik", "link": "https://stackoverflow.com/users/4527978/parik"}, "edited": false, "score": 0, "creation_date": 1515405498, "post_id": 48147787, "comment_id": 83273914, "body": "The issue with this question is that a Perl built-in function is redefined. Here I redefine my own function."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 2, "creation_date": 1515406968, "post_id": 48147787, "comment_id": 83274758, "body": "<code>&amp;Test::More::is( @_ )</code> will work here, with a comment to say why. Your prototype is forcing <code>@_</code> to be evaluated in scalar context, so it passes one parameter which is the <i>number of elements</i> in <code>@_</code>. You want the prototype to be ignored so that you can pass the <i>contents</i> of <code>@_</code>, which is what a call with <code>&amp;</code> does."}, {"owner": {"reputation": 324, "user_id": 2068595, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f38e720ef9a9bca657b396fa1eeecced?s=128&d=identicon&r=PG", "display_name": "bam500", "link": "https://stackoverflow.com/users/2068595/bam500"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1515407146, "post_id": 48147787, "comment_id": 83274856, "body": "Thank you @Borodin , indeed with <code>&amp;Test::More::is( @_ )</code> it works well!"}, {"owner": {"reputation": 324, "user_id": 2068595, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f38e720ef9a9bca657b396fa1eeecced?s=128&d=identicon&r=PG", "display_name": "bam500", "link": "https://stackoverflow.com/users/2068595/bam500"}, "edited": false, "score": 1, "creation_date": 1515407500, "post_id": 48147787, "comment_id": 83275040, "body": "Maybe you should write an answer so that I validate it."}], "answers": [{"comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 3, "creation_date": 1515406466, "post_id": 48147901, "comment_id": 83274498, "body": "I don&#39;t think the issue is that <i>&quot;Perl doesn&#39;t know how many elements the call will have&quot;</i> but instead that the call is passing only one parameter when three are required. A call like <code>a(@_, @_, @_)</code> would work fine. Each parameter is evaluated in scalar context and will be equal to the number of elements in <code>@_</code>."}], "tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": false, "score": 5, "last_activity_date": 1515405578, "last_edit_date": 1592644375, "creation_date": 1515405578, "answer_id": 48147901, "question_id": 48147787, "link": "https://stackoverflow.com/questions/48147787/not-enough-arguments-when-redefining-a-subroutine/48147901#48147901", "title": "Not enough arguments when redefining a subroutine", "body": "<p>You are not redefining anything here.</p>\n<p>You've set a <a href=\"http://perldoc.perl.org/perlsub.html#Prototypes\" rel=\"noreferrer\"><em>prototype</em></a> for your sub <code>a</code> by saying <code>sub a($$$)</code>. The dollar signs in the function definition tell Perl that this sub has exactly three scalar parameters. When you call it with <code>a(@_)</code>, Perl doesn't know how many elements will be in that list, thus it doesn't know how many arguments the call will have, and fails at compile time.</p>\n<p><strong>Don't mess with prototypes</strong>. You probably don't need them.</p>\n<p>Instead, if you know your sub will need three arguments, explicitly grab them where you call it.</p>\n<pre><code>sub a($$$) {\n    ...\n} \n\nsub b {\n    my ($one, $two, $three) = @_; \n    a($one, $two, $three);\n}\n</code></pre>\n<p>Or better, don't use the prototype at all.</p>\n<hr />\n<p>Also, <code>a</code> and <code>b</code> are terrible names. Don't use them.</p>\n"}, {"comments": [{"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1515422570, "post_id": 48148460, "comment_id": 83283603, "body": "@ikegami: I&#39;m a little wary of recommending a solution that overrides a safety feature (no matter how ill-advised that safety feature is)."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1515422605, "post_id": 48148460, "comment_id": 83283630, "body": "Why, because the prototype might change? Your code will still break then."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1515422728, "post_id": 48148460, "comment_id": 83283713, "body": "@ikegami: I just think it&#39;s a bad habit to get into. But I&#39;m happy to admit that&#39;s probably a personal foible that&#39;s unhelpful here :-)"}], "tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 7, "last_activity_date": 1515407911, "last_edit_date": 1515407911, "creation_date": 1515407551, "answer_id": 48148460, "question_id": 48147787, "link": "https://stackoverflow.com/questions/48147787/not-enough-arguments-when-redefining-a-subroutine/48148460#48148460", "title": "Not enough arguments when redefining a subroutine", "body": "<p>The prototype that you have given your subroutine (copied from <code>Test::More::is</code>) says that your subroutine requires two mandatory parameters and one optional one. Passing in a single array will not satisfy that prototype - it is seen as a single parameter which will be evaluated in scalar context.</p>\n\n<p>The fix is to retrieve the two (or three) parameters passed to your subroutine and to pass them, individually, to <code>Test::More::is</code>.</p>\n\n<pre><code>sub is ($$;$) {\n   my ($got, $expected, $test_name) = @_;\n\n   my $t    = gmtime(time);\n   my $date = $t-&gt;ymd('/').' '.$t-&gt;hms.' ';\n\n   print($date);\n   Test::More::is($got, $expected, $test_name);\n}\n</code></pre>\n\n<p>The problem has nothing to do with your use of a prototype or the fact that you are redefining a subroutine (which, strictly, you aren't as the two subroutines are in different packages) but it's  because <code>Test::More::is()</code> has a prototype.</p>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 4, "last_activity_date": 1515441744, "last_edit_date": 1515441744, "creation_date": 1515422921, "answer_id": 48152656, "question_id": 48147787, "link": "https://stackoverflow.com/questions/48147787/not-enough-arguments-when-redefining-a-subroutine/48152656#48152656", "title": "Not enough arguments when redefining a subroutine", "body": "<p>In Perl, prototypes don't validate arguments so much as alter parsing rules. <code>$$;$</code> means the sub expects the caller to match <code>is(EXPR, EXPR)</code> or <code>is(EXPR, EXPR, EXPR)</code>.</p>\n\n<p>In this case, bypassing the prototype is ideal.</p>\n\n<pre><code>sub is($$;$) {\n   print gmtime-&gt;strftime(\"%Y/%m/%d %H:%M:%S \");\n   return &amp;Test::More::is(@_);\n}\n</code></pre>\n\n<p>Since you don't care if <code>Test::More::is</code> modifies yours <code>@_</code>, the following is a simple optimization:</p>\n\n<pre><code>sub is($$;$) {\n   print gmtime-&gt;strftime(\"%Y/%m/%d %H:%M:%S \");\n   return &amp;Test::More::is;\n}\n</code></pre>\n\n<p>If <code>Test::More::is</code> uses <code>caller</code>, you'll find the following useful:</p>\n\n<pre><code>sub is($$;$) {\n   print gmtime-&gt;strftime(\"%Y/%m/%d %H:%M:%S \");\n   goto &amp;Test::More::is;\n}\n</code></pre>\n"}], "owner": {"reputation": 324, "user_id": 2068595, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f38e720ef9a9bca657b396fa1eeecced?s=128&d=identicon&r=PG", "display_name": "bam500", "link": "https://stackoverflow.com/users/2068595/bam500"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 328, "favorite_count": 0, "accepted_answer_id": 48152656, "answer_count": 3, "score": 0, "last_activity_date": 1515441744, "creation_date": 1515405151, "last_edit_date": 1515406391, "question_id": 48147787, "link": "https://stackoverflow.com/questions/48147787/not-enough-arguments-when-redefining-a-subroutine", "title": "Not enough arguments when redefining a subroutine", "body": "<p>When I redefine my own subroutine (and not a Perl built-in function), as below : </p>\n\n<pre><code>perl -ce 'sub a($$$){} sub b {a(@_)}'\n</code></pre>\n\n<p>I get this error : </p>\n\n<blockquote>\n  <p>Not enough arguments for main::a at -e line 1, near \"@_)\"</p>\n</blockquote>\n\n<p>I'm wondering why.</p>\n\n<p>Edit : </p>\n\n<p>The word \"redefine\" is maybe not well chosen. But in my case (and I probably should have explained what I was trying to do originally), I want to redefine (and here \"redefine\" makes sense) the Test::More::is function by printing first Date and Time before the test result.  </p>\n\n<p>Here's what I've done : </p>\n\n<pre><code>Test::More.pm :\n\nsub is ($$;$) {\n    my $tb = Test::More-&gt;builder;\n\n    return $tb-&gt;is_eq(@_);\n}\n\n\nMyModule.pm :\n\nsub is ($$;$) {\n   my $t    = gmtime(time);\n   my $date = $t-&gt;ymd('/').' '.$t-&gt;hms.' ';\n\n   print($date);\n   Test::More::is(@_);\n}\n</code></pre>\n"}, {"tags": ["regex", "perl"], "answers": [{"comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 2, "creation_date": 1515403185, "post_id": 48147175, "comment_id": 83272607, "body": "It looks like single quotes and <code>eq</code> are the best choice here."}, {"owner": {"reputation": 10213, "user_id": 1686628, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a03a6bd4b5f83b04ff39aec4b44e17ed?s=128&d=identicon&r=PG&f=1", "display_name": "ealeon", "link": "https://stackoverflow.com/users/1686628/ealeon"}, "edited": false, "score": 0, "creation_date": 1515403637, "post_id": 48147175, "comment_id": 83272853, "body": "ty very much. it worked!"}], "tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": true, "score": 3, "last_activity_date": 1515403928, "last_edit_date": 1515403928, "creation_date": 1515402822, "answer_id": 48147175, "question_id": 48147143, "link": "https://stackoverflow.com/questions/48147143/perl-regex-to-match-with-a-string-with-a-character/48147175#48147175", "title": "perl regex to match with a string with a &#39;+&#39; character", "body": "<p>The problem is that <code>+</code> is a metacharacter in regex.</p>\n\n<p>Your pattern is therefore \"reading\" <code>t+</code> as \"one or more instances of 't'\" not literally like you want. </p>\n\n<p>There's two solutions:</p>\n\n<ul>\n<li><code>quotemeta</code> on your string will escape any metachars (<code>+</code>) <code>my $regex = quotemeta \"buildroot+platfs2g@final.x86_64\";</code></li>\n<li><code>\\Q</code> and <code>\\E</code> to quote your regex. <code>if ($line =~ m/^\\Q$regex\\E$/) {</code></li>\n<li>And as Borodin notes - you don't actually need a regex at all here. <code>if ( $line eq $regex ) {</code> will do the trick. (but rename <code>$regex</code> because it will confuse people). </li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 2, "last_activity_date": 1515403398, "creation_date": 1515403398, "answer_id": 48147319, "question_id": 48147143, "link": "https://stackoverflow.com/questions/48147143/perl-regex-to-match-with-a-string-with-a-character/48147319#48147319", "title": "perl regex to match with a string with a &#39;+&#39; character", "body": "<p>You have a few problems here.</p>\n\n<p>You can solve the problem you have noticed by escaping the <code>+</code> in your regex - as is it a metacharacter and has a special meaning in regexes. There are a few ways to escape a metacharacter - the simplest is to put a <code>\\</code> in front of it.</p>\n\n<p>You also have a <code>.</code> in your regex. That's another metacharacter. You will need to escape that too.</p>\n\n<p>Then there's the fact that your strings don't contain what you think they contain. Variables are expanded in double-quoted strings, so when Perl sees <code>@final</code> in a double-quoted string, it looks for an array with that name to insert at that point. This code wouldn't have compiled with <code>use strict</code> turned on. You can escape the <code>@</code> in the same way, but it probably makes more sense to just change your double-quoted strings to single-quoted ones (as variables aren't expanded in single-quoted strings).</p>\n\n<pre><code>#!/usr/bin/perl\n\n# Always use these.\nuse strict;\nuse warnings;\n\n# Single-quote strings that don't need double-quotes\nmy $line = 'buildroot+platfs2g@final.x86_64';\n# Escape metacharacters in regexes\nmy $regex = 'buildroot\\+platfs2g@final\\.x86_64';\n\nif ($line =~ m/^$regex$/) {\n    print \"matched\\n\";\n} else {\n    print \"not matched\\n\";\n}\n</code></pre>\n\n<p>Of course, if you're matching two strings that should be exactly the same, then regexes are the wrong tool. Better to just use <code>eq</code>.</p>\n"}], "owner": {"reputation": 10213, "user_id": 1686628, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a03a6bd4b5f83b04ff39aec4b44e17ed?s=128&d=identicon&r=PG&f=1", "display_name": "ealeon", "link": "https://stackoverflow.com/users/1686628/ealeon"}, "delete_vote_count": 1, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 57, "favorite_count": 0, "closed_date": 1515404986, "accepted_answer_id": 48147175, "answer_count": 2, "score": -3, "last_activity_date": 1515403928, "creation_date": 1515402688, "last_edit_date": 1515402835, "question_id": 48147143, "link": "https://stackoverflow.com/questions/48147143/perl-regex-to-match-with-a-string-with-a-character", "closed_reason": "Duplicate", "title": "perl regex to match with a string with a &#39;+&#39; character", "body": "<pre><code>my $line = \"buildroot+platfs2g@final.x86_64\";\nmy $regex = \"buildroot+platfs2g@final.x86_64\";\n\nif ($line =~ m/^$regex$/) {\n    print \"matched\\n\";\n} else {\n    print \"not matched\\n\";\n}\n</code></pre>\n\n<p>Even though <code>$line</code> and <code>$regex</code> are the same string, regex is not matched.<br>\nIf I remove <code>+</code> from both of the strings, they match.<br>\nHow do I get those two strings to match with <code>+</code> in them?</p>\n"}, {"tags": ["bash", "perl"], "comments": [{"owner": {"reputation": 11476, "user_id": 8572380, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f4a5d854aa543e6bf01abe8351d38782?s=128&d=identicon&r=PG&f=1", "display_name": "tshiono", "link": "https://stackoverflow.com/users/8572380/tshiono"}, "edited": false, "score": 0, "creation_date": 1515392502, "post_id": 48144072, "comment_id": 83268373, "body": "If your mentioning &quot;the first column&quot; is located just after ^ATOM or ^HETATM, it will be found in $xyz[0], not $xyz[1].  You may want to say @xyz[0, 5, 6, 7] instead.  Try to insert a code: <code>print join(&#39;:&#39;, @xyz), &quot;\\n&quot;;</code> just after the split() line to observe which is stored where."}, {"owner": {"reputation": 144799, "user_id": 2836621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/suHg4.jpg?s=128&g=1", "display_name": "Mark Setchell", "link": "https://stackoverflow.com/users/2836621/mark-setchell"}, "edited": false, "score": 1, "creation_date": 1515395974, "post_id": 48144072, "comment_id": 83269616, "body": "Your code is only matching <code>HEADER</code> lines and you don&#39;t show any if those in your sample data..."}, {"owner": {"reputation": 11476, "user_id": 8572380, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f4a5d854aa543e6bf01abe8351d38782?s=128&d=identicon&r=PG&f=1", "display_name": "tshiono", "link": "https://stackoverflow.com/users/8572380/tshiono"}, "edited": false, "score": 0, "creation_date": 1515396431, "post_id": 48144072, "comment_id": 83269808, "body": "Where are the HEADER line and END line?  Please show your minimal but symptom-reproduceable data with according result."}, {"owner": {"reputation": 209, "user_id": 9180236, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f564cb07c66bd0cb7d993bc4b921615f?s=128&d=identicon&r=PG&f=1", "display_name": "djordje", "link": "https://stackoverflow.com/users/9180236/djordje"}, "edited": false, "score": 0, "creation_date": 1515396557, "post_id": 48144072, "comment_id": 83269850, "body": "Each file starts with <code>HEADER</code> line and ends up with <code>END</code> line, I am reading each file from start to the end, I have only used <code>HEADER</code> to pop last element of the line that starts with <code>HEADER</code> and to use this to name each file. However I am matching those lines that start with <code>ATOM</code> and <code>HETATM</code> in each file."}, {"owner": {"reputation": 11476, "user_id": 8572380, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f4a5d854aa543e6bf01abe8351d38782?s=128&d=identicon&r=PG&f=1", "display_name": "tshiono", "link": "https://stackoverflow.com/users/8572380/tshiono"}, "edited": false, "score": 0, "creation_date": 1515398009, "post_id": 48144072, "comment_id": 83270423, "body": "First, do not remove the ATOM or HETATM words from the line with s/// operator. The leading whitespace remains and may be harmful to split().  Make use of indices to control which columns to keep or not.  Next, do not push \\@xyz to \\@coord.  Print them out immediately.  You may need to &quot;line-by-line&quot; processing custom.  It is a unpreferable manner to store everything in a single array because you will lose punctuations of data."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 3, "creation_date": 1515398090, "post_id": 48144072, "comment_id": 83270457, "body": "You can&#39;t write working software by copying a likely-looking program from somewhere else and hacking it at random until it works. You clearly aren&#39;t skilled enough to understand the code yourself, and it&#39;s inappropriate to ask strangers on the internet to fix it for free. You should employ a software engineer, just as you would with any other job that you were unable to complete yourself."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 11476, "user_id": 8572380, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f4a5d854aa543e6bf01abe8351d38782?s=128&d=identicon&r=PG&f=1", "display_name": "tshiono", "link": "https://stackoverflow.com/users/8572380/tshiono"}, "edited": false, "score": 0, "creation_date": 1515398585, "post_id": 48144072, "comment_id": 83270632, "body": "@tshiono: What do you mean by <i>&quot;you will lose punctuations of data&quot;</i>?"}, {"owner": {"reputation": 11476, "user_id": 8572380, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f4a5d854aa543e6bf01abe8351d38782?s=128&d=identicon&r=PG&f=1", "display_name": "tshiono", "link": "https://stackoverflow.com/users/8572380/tshiono"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1515398981, "post_id": 48144072, "comment_id": 83270779, "body": "@Borodin: Just wanted to say the posted script merges every columns into an array without separating by lines."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 11476, "user_id": 8572380, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f4a5d854aa543e6bf01abe8351d38782?s=128&d=identicon&r=PG&f=1", "display_name": "tshiono", "link": "https://stackoverflow.com/users/8572380/tshiono"}, "edited": false, "score": 0, "creation_date": 1515399073, "post_id": 48144072, "comment_id": 83270805, "body": "@tshiono: The array contains one line of text per array element. What more separation do you want? Oh, I see, you mean the <code>@code</code> array? The only problem there is that it is never emptied. <code>push @coord, @xyz[0,6,7,8]</code> should be just <code>my @coord = @xyz[0,6,7,8]</code>."}, {"owner": {"reputation": 11476, "user_id": 8572380, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f4a5d854aa543e6bf01abe8351d38782?s=128&d=identicon&r=PG&f=1", "display_name": "tshiono", "link": "https://stackoverflow.com/users/8572380/tshiono"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1515399531, "post_id": 48144072, "comment_id": 83270984, "body": "@Borodin: I mean \\@coord keeps every columns without line separations.  That is why the output is not <i>organized</i>. Do I make myself clear?"}, {"owner": {"reputation": 11476, "user_id": 8572380, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f4a5d854aa543e6bf01abe8351d38782?s=128&d=identicon&r=PG&f=1", "display_name": "tshiono", "link": "https://stackoverflow.com/users/8572380/tshiono"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1515399869, "post_id": 48144072, "comment_id": 83271132, "body": "@Borodin: Okay, then only the last line will be printed out won&#39;t it?  The open() and print() may have problem in terms of their position."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 11476, "user_id": 8572380, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f4a5d854aa543e6bf01abe8351d38782?s=128&d=identicon&r=PG&f=1", "display_name": "tshiono", "link": "https://stackoverflow.com/users/8572380/tshiono"}, "edited": false, "score": 0, "creation_date": 1515400166, "post_id": 48144072, "comment_id": 83271249, "body": "@tshiono: Yes, but that&#39;s a separate issue. There are too many errors to fix in an ordinary comment, and the code is trash anyway so it needs redesigning."}], "answers": [{"comments": [{"owner": {"reputation": 209, "user_id": 9180236, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f564cb07c66bd0cb7d993bc4b921615f?s=128&d=identicon&r=PG&f=1", "display_name": "djordje", "link": "https://stackoverflow.com/users/9180236/djordje"}, "edited": false, "score": 0, "creation_date": 1515460043, "post_id": 48155359, "comment_id": 83299825, "body": "I am in the proccess of learning but it seems that I am trying to do some stuff that are above my current knowledge of perl. Problem I have is that I don&#39;t have anybody to ask something that I don&#39;t know. Anyway, will stick to the smaller tasks, and when I feel more comfortable I will move.."}, {"owner": {"reputation": 209, "user_id": 9180236, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f564cb07c66bd0cb7d993bc4b921615f?s=128&d=identicon&r=PG&f=1", "display_name": "djordje", "link": "https://stackoverflow.com/users/9180236/djordje"}, "edited": false, "score": 0, "creation_date": 1515460571, "post_id": 48155359, "comment_id": 83299918, "body": "I found the way how to do it in bash by following command : <code>for i in *pdb; do awk &#39;{ if ($1 ==&quot;ATOM&quot;|| $1==&quot;HETATM&quot;) print $0}&#39; $i &gt; $ {i||.pdb&#47;}.txt.pdb; done</code>. But I wanted it in perl. Thank You and all the best."}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": true, "score": 1, "last_activity_date": 1515433241, "creation_date": 1515433241, "answer_id": 48155359, "question_id": 48144072, "link": "https://stackoverflow.com/questions/48144072/how-to-extract-specific-values-from-a-file-and-print-them-into-another-file/48155359#48155359", "title": "How to extract specific values from a file and print them into another file", "body": "<p></p>\n\n<p>This will do as you ask</p>\n\n<p>Do you see how trying to hack an existing program leads you to write way too much code, and so increase the chances of a bug? Please learn to program in Perl and stop relying on freebies from generous souls</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>use strict;\nuse warnings 'all';\nuse autodie;\n\nfor my $pdb ( glob '*.pdb' ) {\n\n    open my $fh, '&lt;', $pdb;\n    my $out_fh;\n\n    while ( &lt;$fh&gt; ) {\n        next unless my @fields = split;\n\n        if ( $fields[0] eq 'HEADER' ) {\n            open $out_fh, '&gt;', \"$fields[-1].txt\";\n        }\n        elsif ( $fields[0] eq 'ATOM' or $fields[0] eq 'HETATM' ) {\n\n            unless ( $out_fh ) {\n                warn qq{No ID found for file \"$pdb\"};\n                last;\n            }\n\n            print $out_fh \"@fields[0,6,7,8]\\n\";\n        }\n    }\n}\n</code></pre>\n\n<h3>output</h3>\n\n<pre class=\"lang-none prettyprint-override\"><code>ATOM 15.200 27.271 13.911\nATOM 15.336 27.312 15.415\nATOM 16.364 26.299 15.932\nATOM 16.167 25.081 15.787\nATOM 14.019 26.968 16.088\nATOM 14.198 27.038 17.607\nATOM 13.515 25.568 15.575\nATOM 14.524 28.415 18.088\nATOM 17.456 26.771 16.532\nATOM 18.424 25.815 17.028\nATOM 19.122 26.165 18.302\nATOM 19.066 27.314 18.764\n...\n</code></pre>\n"}], "owner": {"reputation": 209, "user_id": 9180236, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f564cb07c66bd0cb7d993bc4b921615f?s=128&d=identicon&r=PG&f=1", "display_name": "djordje", "link": "https://stackoverflow.com/users/9180236/djordje"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 278, "favorite_count": 0, "accepted_answer_id": 48155359, "answer_count": 1, "score": 0, "last_activity_date": 1515433241, "creation_date": 1515384066, "last_edit_date": 1515397861, "question_id": 48144072, "link": "https://stackoverflow.com/questions/48144072/how-to-extract-specific-values-from-a-file-and-print-them-into-another-file", "title": "How to extract specific values from a file and print them into another file", "body": "<p>I have PDB files that are named by their PDB ID, for instance <code>2KRJ.pdb</code>. I want to extract from them only the lines that begin with <code>ATOM</code> or <code>HETATM</code>, and copy them into a new file with the same name and a <code>.txt</code> extension, for instance <code>2KRJ.txt</code>.</p>\n\n<p>I know how to extract those lines but I am having trouble copying them to another file.</p>\n\n<p>This is the script that I have written so far for extracting:</p>\n\n<pre><code>#!/usr/bin/perl -w\n\n$dirname = '.';\nopendir(DIR, $dirname) or die \"cannot open directory\";\n@files = grep(/\\.pdb$/,readdir(DIR));\n\nforeach $files ( @files ) {\n\n    open (FH, $files) or die \"could not open $files\\n\";\n    @file_each = &lt;FH&gt;;\n    #print @file_each;\n    #print \"$file\\n\";\n    close FH;\n\n    #$dir_sz = scalar @files;\n    #print \"$dir_sz\\n\";\n    close DIR;\n\n    my @ac        = ();\n    my @dr        = ();\n    my @os        = ();\n    my @names     = ();\n    my @ion_names = ();\n    my $flag      = 0;\n\n    for ( my $line = 0; $line &lt;= $#file_each; $line++ ) {  # loop reading each line from the @file up to the end of file  \n\n        chomp( $file_each[$line] );\n\n        if ( $file_each[$line] =~ /^HEADER/ ) {\n\n            my @id       = split '\\s+', $file_each[$line];\n            my $filename = pop @id;\n            $filename    = \"$filename.pdb\";\n\n            while ( $file_each[$line] !~ /^END/ ) { # read the lines until you get the symbol 'END'\n\n                $line++;\n\n                if ( $file_each[$line] =~/^ATOM|^HETATM/ ) {\n\n                    $file_each[$line] =~ s/^ATOM|^HETATM//;\n\n                    @xyz = split '\\s+', $file_each[$line];\n                    chomp @xyz[0,6,7,8];\n                    print join (':', @xyz), \"\\n\";\n\n                    push @coord, @xyz[0,6,7,8];\n                    print \"@coord\\n\";\n                }\n\n                open (OUTPUT, \"&gt;$filename.txt\"); \n                print(OUTPUT \"@coord\\n\"); \n                close OUTPUT;\n            }\n        }\n    }\n}\n</code></pre>\n\n<p>The problem is that this script does not print the first column and the output is a bit disorganised, there are no four column of each row.</p>\n\n<p>Lines that I am trying to extract look like this:</p>\n\n<pre><code>ATOM    946  OH  TYR A  59      37.734  36.478  24.541  1.00  0.00           O  \nATOM    947  H   TYR A  59      33.478  35.320  18.896  1.00  0.00           H  \n</code></pre>\n\n<p>And I am trying to change it so that the new text file script contains only this:</p>\n\n<pre><code>ATOM   37.734  36.478  24.541          \nATOM   33.478  35.320  18.896 \n</code></pre>\n\n<p>But I am getting this</p>\n\n<pre><code> .326 2.859  229 -18.940 4.490  230 -23.744 0.422  230 -24.558 -0.785  230  \n -24.256 -1.547  230 -23.137 -2.012  230 -24.338 -1.681  230 -25.135 -2.969   \n 230 -26.307 -2.940  230 -24.589 -4.016  230 -22.773 0.364  231 -25.257   \n-1.661  231 -25.103 -2.360  231 -26.141 -3.471  231 -27.309 -3.282  231   \n-25.252 -1.396  \n</code></pre>\n"}, {"tags": ["perl", "loops", "while-loop"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1515368757, "post_id": 48142226, "comment_id": 83263358, "body": "What is your question? <code>$LOOP</code> is never defined so the <code>if</code> is never executed and your program is effectively just the final<code>while</code>/<code>print</code> loop"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1515372133, "post_id": 48142226, "comment_id": 83264027, "body": "Always use <code>use strict; use warnings qw( all );</code>. At the very least, it will find some scoping issues in your program. /// Also, avoid using global variables (<code>open(FILE, ...</code>). Use lexical variables instead. (<code>open(my $FILE, ...)</code>)."}], "answers": [{"comments": [{"owner": {"reputation": 27, "user_id": 6780943, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/5aa345ac3eb2e6032d8129a0286b0ce9?s=128&d=identicon&r=PG&f=1", "display_name": "andrew99", "link": "https://stackoverflow.com/users/6780943/andrew99"}, "edited": false, "score": 0, "creation_date": 1515366415, "post_id": 48142272, "comment_id": 83262799, "body": "Thnks for the respond,but i want to print it as variable not as array.anyway tht script doesn&#39;t work :D"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 2, "creation_date": 1515368874, "post_id": 48142272, "comment_id": 83263384, "body": "<code>my @lines = &lt;$filename&gt;</code>? Please don&#39;t post untested code if you can possibly avoid it."}, {"owner": {"reputation": 1, "user_id": 4383713, "user_type": "registered", "profile_image": "https://graph.facebook.com/521615055/picture?type=large", "display_name": "DJ AndieK", "link": "https://stackoverflow.com/users/4383713/dj-andiek"}, "edited": false, "score": 0, "creation_date": 1515456333, "post_id": 48142272, "comment_id": 83299077, "body": "Sorry about that. I typed it too quickly and used $filename instead of $fh. Simple mistake. I edited the original code to fix it."}, {"owner": {"reputation": 1, "user_id": 4383713, "user_type": "registered", "profile_image": "https://graph.facebook.com/521615055/picture?type=large", "display_name": "DJ AndieK", "link": "https://stackoverflow.com/users/4383713/dj-andiek"}, "edited": false, "score": 0, "creation_date": 1515456389, "post_id": 48142272, "comment_id": 83299088, "body": "Arrays are variable. If you mean convert the Array to a Scalar then you can do so by adding the line my $variable = join(q{}, @lines); and changing print @lines to print $variable"}], "tags": [], "owner": {"reputation": 1, "user_id": 4383713, "user_type": "registered", "profile_image": "https://graph.facebook.com/521615055/picture?type=large", "display_name": "DJ AndieK", "link": "https://stackoverflow.com/users/4383713/dj-andiek"}, "is_accepted": false, "score": -2, "last_activity_date": 1515456242, "last_edit_date": 1515456242, "creation_date": 1515365411, "answer_id": 48142272, "question_id": 48142226, "link": "https://stackoverflow.com/questions/48142226/create-infinite-loop/48142272#48142272", "title": "Create infinite loop", "body": "<p>You can try something like this...</p>\n\n<pre><code>my ( $filename ) = @ARGV;\n\nwhile ( 1 )\n{\n    open my $fh, '&lt;', $filename or die $!;\n    my @lines = &lt;$fh&gt;;\n    close $fh;\n    print @lines;\n}\n</code></pre>\n\n<p>It should open the file, read it in, close it, print contents and then repeat.</p>\n"}, {"comments": [{"owner": {"reputation": 1228, "user_id": 4709524, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/wGrTV.jpg?s=128&g=1", "display_name": "beasy", "link": "https://stackoverflow.com/users/4709524/beasy"}, "reply_to_user": {"reputation": 27, "user_id": 6780943, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/5aa345ac3eb2e6032d8129a0286b0ce9?s=128&d=identicon&r=PG&f=1", "display_name": "andrew99", "link": "https://stackoverflow.com/users/6780943/andrew99"}, "edited": false, "score": 0, "creation_date": 1515692891, "post_id": 48142503, "comment_id": 83407567, "body": "@andrew99 you can express your thanks by accepting the answer :)"}], "tags": [], "owner": {"reputation": 1228, "user_id": 4709524, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/wGrTV.jpg?s=128&g=1", "display_name": "beasy", "link": "https://stackoverflow.com/users/4709524/beasy"}, "is_accepted": false, "score": -1, "last_activity_date": 1515367502, "creation_date": 1515367502, "answer_id": 48142503, "question_id": 48142226, "link": "https://stackoverflow.com/questions/48142226/create-infinite-loop/48142503#48142503", "title": "Create infinite loop", "body": "<p>Use <code>seek</code> to go reset the position in the filehandle. <code>eof</code> is true if the filehandle is on the last line.</p>\n\n<pre><code>open FILE,'&lt;',$ARGV[0];\nwhile (my $line = &lt;FILE&gt;) {\n    print $line;\n    if (eof) {\n        seek FILE,0,0;\n    }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 2, "last_activity_date": 1515373859, "last_edit_date": 1515373859, "creation_date": 1515372034, "answer_id": 48142953, "question_id": 48142226, "link": "https://stackoverflow.com/questions/48142226/create-infinite-loop/48142953#48142953", "title": "Create infinite loop", "body": "<p>Just wrap what you want to loop with <code>while (1) { ... }</code>.</p>\n\n<p>Cleaned up, you get:</p>\n\n<pre><code>my $qfn = $ARGV[0];\n\nwhile (1) {\n   open(my $fh, '&lt;', $qfn)\n      or die(\"Can't open \\\"$qfn\\\": $!\\n\");\n\n   while (&lt;$fh&gt;) {\n      print;\n   }\n}\n</code></pre>\n\n<p>A very minor optimization is to avoid re-opening the file, seeking instead.</p>\n\n<pre><code>use Fcntl qw( SEEK_SET );\n\nmy $qfn = $ARGV[0];\n\nopen(my $fh, '&lt;', $qfn)\n   or die(\"Can't open \\\"$qfn\\\": $!\\n\");\n\nwhile (1) {\n   while (&lt;$fh&gt;) {\n      print;\n   }\n\n   seek($fh, 0, SEEK_SET);\n}\n</code></pre>\n"}], "owner": {"reputation": 27, "user_id": 6780943, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/5aa345ac3eb2e6032d8129a0286b0ce9?s=128&d=identicon&r=PG&f=1", "display_name": "andrew99", "link": "https://stackoverflow.com/users/6780943/andrew99"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 271, "favorite_count": 0, "answer_count": 3, "score": -5, "last_activity_date": 1515456242, "creation_date": 1515364898, "last_edit_date": 1515368591, "question_id": 48142226, "link": "https://stackoverflow.com/questions/48142226/create-infinite-loop", "title": "Create infinite loop", "body": "<p>This script is looping only once. I want to make it an infinite loop.</p>\n\n<pre><code>open( FILE, \"&lt;$ARGV[0]\" );\n\nif ( $LOOP == 1) {\n\n    while ( &lt;FILE&gt; ) {\n\n        if ( $. == $LOOP ) {\n            next\n        };\n   }\n}\n\nwhile ( &lt;FILE&gt; ) {\n    $LIST = $_;\n    print \"$LIST\"; \n}\n</code></pre>\n\n<p>I want make it looping back to the first line, like this</p>\n\n<pre><code>abc\nabcd\nabcde\nabc\nabcd\nabcde\n...\n</code></pre>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1515310625, "post_id": 48134735, "comment_id": 83247689, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/9538542/counting-number-of-occurrences-of-a-string-inside-another-perl\">Counting number of occurrences of a string inside another (Perl)</a>"}, {"owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 1, "creation_date": 1515336872, "post_id": 48134735, "comment_id": 83254019, "body": "This is an off topic comment but: you should use 3-argument <code>open</code> with lexical file handles and check for success (as in <code>open( my $fh_in, &#39;&lt;&#39;, $filename) or die &quot;cannot open $filename: $!\\n&quot;</code>) <i>and</i> you shouldn&#39;t name a read-only filehandle <code>DESTINATION</code>. This will only confuse you (and others) later. And please always <code>use strict; use warnings;</code>."}], "answers": [{"tags": [], "owner": {"reputation": 33, "user_id": 8191890, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/10210222397819480/picture?type=large", "display_name": "Vibes", "link": "https://stackoverflow.com/users/8191890/vibes"}, "is_accepted": false, "score": 1, "last_activity_date": 1515378080, "last_edit_date": 1515378080, "creation_date": 1515307610, "answer_id": 48134961, "question_id": 48134735, "link": "https://stackoverflow.com/questions/48134735/how-to-count-a-repeating-string-in-a-line-using-perl/48134961#48134961", "title": "how to count a repeating string in a line using perl", "body": "<p>This produces the number of instances of <code>host</code> in <code>$line</code>:</p>\n\n<pre><code>my $count = () = $line =~ /host/g;\n</code></pre>\n\n<p>But that also matches <code>hosting</code>. To avoid that, the following will probably do the trick:</p>\n\n<pre><code>my $count = () = $line =~ /\\bhost\\b/g;\n</code></pre>\n\n<p><code>=()=</code> this is called Perl secret Goatse operator. More <a href=\"http://search.cpan.org/dist/perlsecret/lib/perlsecret.pod#Goatse\" rel=\"nofollow noreferrer\">info</a></p>\n"}, {"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 2, "creation_date": 1515358239, "post_id": 48134993, "comment_id": 83260676, "body": "You probably want <code>&#47;\\bhost\\b&#47;</code> to avoid, for example, matching <code>hosting</code>"}], "tags": [], "owner": {"reputation": 666, "user_id": 2243865, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/32c60daf8fbec71c63b1e78e8ed38bc1?s=128&d=identicon&r=PG", "display_name": "user3243135", "link": "https://stackoverflow.com/users/2243865/user3243135"}, "is_accepted": true, "score": 1, "last_activity_date": 1515307909, "creation_date": 1515307909, "answer_id": 48134993, "question_id": 48134735, "link": "https://stackoverflow.com/questions/48134735/how-to-count-a-repeating-string-in-a-line-using-perl/48134993#48134993", "title": "how to count a repeating string in a line using perl", "body": "<p>I don't know why you're looping through two files in your example, but you can use the <code>/g</code> (global) flag:</p>\n\n<pre><code>my $line = \"abc def host 123 host 869 host\";\n\nmy $x = 0;\nwhile ($line =~ /host/g){\n    $x++;\n}\nprint \"$x\\n\"; # 3\n</code></pre>\n\n<p>When you run a regex with <code>/g</code> in scalar context (as is the conditional in the while statement), it will keep track of the location of the last match and restart from there. Therefore, <code>/host/g</code> in a loop as above will find each occurence of host. You can also use the <code>/g</code> in list contexts:</p>\n\n<pre><code>my $line = \"abc def host 123 host 869 host\";\nmy @matches = $contents =~ /host/g;\nprint scalar @matches; # 3 again\n</code></pre>\n\n<p>In this case, @matches will contain all matches of the regexp against the string, which will be ('host', 'host', 'host') since the query is a simple string. Then, scalar(@matches) will yield the length of the list. </p>\n"}, {"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 3, "last_activity_date": 1515334498, "creation_date": 1515334498, "answer_id": 48137991, "question_id": 48134735, "link": "https://stackoverflow.com/questions/48134735/how-to-count-a-repeating-string-in-a-line-using-perl/48137991#48137991", "title": "how to count a repeating string in a line using perl", "body": "<p>Your own solution will match instances like <code>hostages</code> and <code>Shostakovich</code></p>\n\n<p><code>grep</code> is the canonical way to count elements of a list, and <code>split</code> will turn your line into a list of words, giving</p>\n\n<pre><code>my $count = grep { $_ eq 'host' } split ' ', $line\n</code></pre>\n"}], "owner": {"reputation": 33, "user_id": 8191890, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/10210222397819480/picture?type=large", "display_name": "Vibes", "link": "https://stackoverflow.com/users/8191890/vibes"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 361, "favorite_count": 0, "accepted_answer_id": 48134993, "answer_count": 3, "score": 0, "last_activity_date": 1515378080, "creation_date": 1515304919, "question_id": 48134735, "link": "https://stackoverflow.com/questions/48134735/how-to-count-a-repeating-string-in-a-line-using-perl", "title": "how to count a repeating string in a line using perl", "body": "<p>I have the below file</p>\n\n<p>file1:</p>\n\n<p>abc def host 123 host 869 host</p>\n\n<p>I wrote below script to count the occurrence of a \"host\" keyword in each line.\nI tried all the ways(refer the ones which are commented) still it does not seem to work. sed command worked in command line but not inside the perl script</p>\n\n<pre><code>#!/usr/bin/perl\nopen(SOURCE,\"&lt;/home/amp/surevy01/file1\");\nopen(DESTINATION,\"&lt;/home/amp/surevy01/file2\");\nwhile(my $line = &lt;SOURCE&gt;)\n    {\n  while(my $line1 = &lt;DESTINATION&gt;)\n     {\n        #chomp($line);\n        #chomp($line1);\n            if ($line =~ \"host\")\n            {\n            #my $count = grep {host} $line;\n            #my $count = `sed -i {s/host/host\\n/g} $line1 | grep -c {host}`;\n            #my $count = `perl -pi -e 's/host/host\\n/g' $line1 | grep -c host`;\n            #my $count grep (\"host\" ,$line);\n            print \"$count\";\n            print \"match found \\n\";\n            next;\n            }\n           else\n            {\n               print \"match not found \\n\";\n               exit;\n            }\n      }\n    }\n</code></pre>\n\n<p>I'm a beginner to perl. Looking for your valuable suggestions</p>\n"}, {"tags": ["perl", "www-mechanize"], "comments": [{"owner": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "edited": false, "score": 1, "creation_date": 1515264040, "post_id": 48130596, "comment_id": 83238131, "body": "Can you get any other https URLs? What versions of WWW::Mechanize and IO::Socket::SSL are you using?"}, {"owner": {"reputation": 4644, "user_id": 1431720, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/f5a1388d4d3b2bf03b11bb5658c68c29?s=128&d=identicon&r=PG", "display_name": "Robert", "link": "https://stackoverflow.com/users/1431720/robert"}, "edited": false, "score": 0, "creation_date": 1515264296, "post_id": 48130596, "comment_id": 83238198, "body": "You could google the actual error message. (Why do you enable debugging when you ignore the debug output?) See <a href=\"https://stackoverflow.com/questions/17084886/ssl-error-routinesssl3-get-server-certificatecertificate-verify-failed\" title=\"ssl error routinesssl3 get server certificatecertificate verify failed\">stackoverflow.com/questions/17084886/&hellip;</a> for example."}, {"owner": {"reputation": 123, "user_id": 2127543, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/65a85704e4310fb0c0d6f00e426f6447?s=128&d=identicon&r=PG", "display_name": "scorpio", "link": "https://stackoverflow.com/users/2127543/scorpio"}, "edited": false, "score": 0, "creation_date": 1515264940, "post_id": 48130596, "comment_id": 83238371, "body": "Schwern, I am able to access other https URLs. For example, access to <a href=\"https://www.google.com/\" rel=\"nofollow noreferrer\">google.com</a> succeeds."}], "answers": [{"comments": [{"owner": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "edited": false, "score": 2, "creation_date": 1515265944, "post_id": 48130783, "comment_id": 83238665, "body": "<i>&quot;It&#39;s indicative of a bug that it will return a memory address.&quot;</i> - No, it&#39;s indicative of an older version of IO::Socket::SSL. Before 2.018 (released 08/2015) it just showed the memory address here. See <a href=\"https://github.com/noxxi/p5-io-socket-ssl/commit/d2ef480d#diff-0135668435a0eb8608a43d2405021ec0L2504\" rel=\"nofollow noreferrer\">github.com/noxxi/p5-io-socket-ssl/commit/&hellip;</a>"}, {"owner": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "reply_to_user": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "edited": false, "score": 0, "creation_date": 1515266240, "post_id": 48130783, "comment_id": 83238784, "body": "@SteffenUllrich Thanks, I&#39;ve removed that speculation."}, {"owner": {"reputation": 123, "user_id": 2127543, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/65a85704e4310fb0c0d6f00e426f6447?s=128&d=identicon&r=PG", "display_name": "scorpio", "link": "https://stackoverflow.com/users/2127543/scorpio"}, "edited": false, "score": 2, "creation_date": 1515267639, "post_id": 48130783, "comment_id": 83239267, "body": "Thanks Schwern. The issue was indeed with the library versions. I upgraded the 3 packages to the latest versions available from ActivePerl and that resolved the issue."}, {"owner": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "reply_to_user": {"reputation": 123, "user_id": 2127543, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/65a85704e4310fb0c0d6f00e426f6447?s=128&d=identicon&r=PG", "display_name": "scorpio", "link": "https://stackoverflow.com/users/2127543/scorpio"}, "edited": false, "score": 0, "creation_date": 1515269000, "post_id": 48130783, "comment_id": 83239724, "body": "@scorpio: thanks to Schwern for the quick answer which got the problem fixed for you. If you are interested in the details of the underlying problem and what other options are for fixes you might take a look at <a href=\"https://stackoverflow.com/a/48131319/3081018\">my analysis</a>."}], "tags": [], "owner": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "is_accepted": true, "score": 4, "last_activity_date": 1515266230, "last_edit_date": 1515266230, "creation_date": 1515265146, "answer_id": 48130783, "question_id": 48130596, "link": "https://stackoverflow.com/questions/48130596/wwwmechanize-ssl-connect-attempt-failed-for-https-get/48130783#48130783", "title": "WWW::Mechanize SSL connect attempt failed for https get", "body": "<p>Works For Me\u2122 with IO::Socket::SSL 2.052, WWW::Mechanize 1.86, and Net::SSLeay 1.80. I suspect you need to upgrade Net::SSLeay. I'd suggest upgrading all of them.</p>\n\n<p>The differences start here. Yours considers the cert to not be ok.</p>\n\n<pre><code>DEBUG: .../IO/Socket/SSL.pm:2552: did not get stapled OCSP response\nDEBUG: .../IO/Socket/SSL.pm:2505: ok=0 cert=102327360\n</code></pre>\n\n<p>But mine does. The more verbose output is because of my upgraded Net::SSLeay.</p>\n\n<pre><code>DEBUG: .../IO/Socket/SSL.pm:2722: did not get stapled OCSP response\nDEBUG: .../IO/Socket/SSL.pm:2675: ok=1 [2] /C=US/O=Entrust, Inc./OU=See www.entrust.net/legal-terms/OU=(c) 2009 Entrust, Inc. - for authorized use only/CN=Entrust Root Certification Authority - G2/C=US/O=Entrust, Inc./OU=See www.entrust.net/legal-terms/OU=(c) 2009 Entrust, Inc. - for authorized use only/CN=Entrust Root Certification Authority - G2\n</code></pre>\n\n<p>That process is handled by Net::SSLeay. It's possible your version of Net::SSLeay is incompatible with your OpenSSL C library. There have been <a href=\"https://metacpan.org/changes/distribution/Net-SSLeay\" rel=\"nofollow noreferrer\">a lot of fixes for compatibility with OpenSSL 1.1</a> since ActivePerl 5.20.2 came out.</p>\n"}, {"tags": [], "owner": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "is_accepted": false, "score": 5, "last_activity_date": 1515271479, "last_edit_date": 1515271479, "creation_date": 1515268631, "answer_id": 48131319, "question_id": 48130596, "link": "https://stackoverflow.com/questions/48130596/wwwmechanize-ssl-connect-attempt-failed-for-https-get/48131319#48131319", "title": "WWW::Mechanize SSL connect attempt failed for https get", "body": "<p>TL;DR: upgrade Perl or at least the Mozilla::CA module or use <code>SSL_ca_file</code> with your own trust store.</p>\n\n<hr>\n\n<p>I suspect the problem is because you are using an old version of Perl and specifically the old version of the Mozilla::CA module included with this Perl. Looking at the certificate chain for this site (for example at <a href=\"https://www.ssllabs.com/ssltest/analyze.html?d=fundresearch.fidelity.com\" rel=\"nofollow noreferrer\">SSLLabs</a>) you'll find that it looks the following:</p>\n\n<pre><code>[0] CN=fundresearch.fidelity.com\n[1] CN=Entrust Certification Authority - L1K\n[2] CN=Entrust Root Certification Authority - G2   -- selfsigned\n</code></pre>\n\n<p>The last certificate in this trust chain is self-signed, i.e. the trust in this certificate comes from the certificate itself. This is an obvious misconfiguration of the the server and that's why this certificate gets ignored when validating the trust chain. </p>\n\n<p>The issuer CA for <code>CN=Entrust Certification Authority - L1K</code> is <code>CN=Entrust Root Certification Authority - G2</code>, i.e. exactly the certificate which got sent by the server but which got ignored because one should not base the trust only on what the server sends. This means there need to be an instance of this root CA in the local trust store.</p>\n\n<p>Modern browsers and OS have this CA in the trust store and that's why you can access this site with a browser. But, WWW::Mechanize (based on LWP::UserAgent) does not use the systems trust store (at least on Windows). Instead the trust store is provided by the Mozilla::CA module which from time to time takes a copy of the trust store from Mozilla (i.e. Firefox). </p>\n\n<p>Based on the version of your Perl distribution you probably use version 20141217 of Mozilla::CA. This version does not yet include the CA <code>Entrust Root Certification Authority - G2</code> as trusted. This CA is only included with the next <a href=\"https://metacpan.org/source/ABH/Mozilla-CA-20150826/lib/Mozilla/CA/cacert.pem#L3916\" rel=\"nofollow noreferrer\">version 20150826</a>. And since the CA is not considered trusted the validation will fail.</p>\n\n<p>There are several fixes possible. </p>\n\n<ul>\n<li>One would be to upgrade the version of Perl. This is maybe the best option since this also includes fixes to OpenSSL when dealing with multiple possible trust path - which is a problem you might run into at other sites (see <a href=\"https://stackoverflow.com/questions/27804710/python-urllib2-ssl-error/27826829#27826829\">here</a> for more details).</li>\n<li>Another way would be to just upgrade the Mozilla::CA module. But this might actually cause problems with some sites if you still use the old Perl where the OpenSSL issue described above is not fixed.</li>\n<li>Or you could add <a href=\"https://metacpan.org/source/ABH/Mozilla-CA-20150826/lib/Mozilla/CA/cacert.pem#L3916\" rel=\"nofollow noreferrer\">the missing certificate</a> to your cacert.pem (the one provided by Mozilla::CA). </li>\n<li>And finally you could use the <a href=\"https://metacpan.org/pod/LWP::UserAgent#ssl_opts\" rel=\"nofollow noreferrer\">ssl_opts</a> with <code>SSL_ca_file</code> to set your own trust store which includes the missing CA certificate.</li>\n</ul>\n"}], "owner": {"reputation": 123, "user_id": 2127543, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/65a85704e4310fb0c0d6f00e426f6447?s=128&d=identicon&r=PG", "display_name": "scorpio", "link": "https://stackoverflow.com/users/2127543/scorpio"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1170, "favorite_count": 1, "accepted_answer_id": 48130783, "answer_count": 2, "score": 2, "last_activity_date": 1515271479, "creation_date": 1515263861, "last_edit_date": 1515268452, "question_id": 48130596, "link": "https://stackoverflow.com/questions/48130596/wwwmechanize-ssl-connect-attempt-failed-for-https-get", "title": "WWW::Mechanize SSL connect attempt failed for https get", "body": "<p>I am trying to retrieve a Web page using WWW::Mechanize and it is failing with SSL connect error. How do I fix the issue? I am running ActivePerl 5.20.2 on Windows 10 x64. </p>\n\n<p>Here is the script I executed:</p>\n\n<pre><code>perl -MIO::Socket::SSL=debug4 -MWWW::Mechanize -e 'WWW::Mechanize-&gt;new()-&gt;get(\"https://fundresearch.fidelity.com/mutual-funds/fees-and-prices/316343201\")'\n</code></pre>\n\n<p>The output is as follows:</p>\n\n<pre><code>DEBUG: .../IO/Socket/SSL.pm:2649: new ctx 98842176\nDEBUG: .../IO/Socket/SSL.pm:562: socket not yet connected\nDEBUG: .../IO/Socket/SSL.pm:564: socket connected\nDEBUG: .../IO/Socket/SSL.pm:586: ssl handshake not started\nDEBUG: .../IO/Socket/SSL.pm:619: using SNI with hostname fundresearch.fidelity.com\nDEBUG: .../IO/Socket/SSL.pm:654: request OCSP stapling\nDEBUG: .../IO/Socket/SSL.pm:673: set socket to non-blocking to enforce timeout=180\nDEBUG: .../IO/Socket/SSL.pm:686: call Net::SSLeay::connect\nDEBUG: .../IO/Socket/SSL.pm:689: done Net::SSLeay::connect -&gt; -1\nDEBUG: .../IO/Socket/SSL.pm:699: ssl handshake in progress\nDEBUG: .../IO/Socket/SSL.pm:709: waiting for fd to become ready: SSL wants a read first\nDEBUG: .../IO/Socket/SSL.pm:729: socket ready, retrying connect\nDEBUG: .../IO/Socket/SSL.pm:686: call Net::SSLeay::connect\nDEBUG: .../IO/Socket/SSL.pm:2552: did not get stapled OCSP response\nDEBUG: .../IO/Socket/SSL.pm:2505: ok=0 cert=102327360\nDEBUG: .../IO/Socket/SSL.pm:689: done Net::SSLeay::connect -&gt; -1\nDEBUG: .../IO/Socket/SSL.pm:692: SSL connect attempt failed\n\nDEBUG: .../IO/Socket/SSL.pm:692: local error: SSL connect attempt failed error:14090086:SSL routines:ssl3_get_server_certificate:certificate verify failed\nDEBUG: .../IO/Socket/SSL.pm:695: fatal SSL error: SSL connect attempt failed error:14090086:SSL routines:ssl3_get_server_certificate:certificate verify failed\nDEBUG: .../lib/Net/HTTPS.pm:69: ignoring less severe local error 'IO::Socket::IP configuration failed', keep 'SSL connect attempt failed error:14090086:SSL routines:ssl3_get_server_certificate:certificate verify failed'\nDEBUG: .../IO/Socket/SSL.pm:2682: free ctx 98842176 open=98842176\nDEBUG: .../IO/Socket/SSL.pm:2687: free ctx 98842176 callback\nDEBUG: .../IO/Socket/SSL.pm:2694: OK free ctx 98842176\nError GETing https://fundresearch.fidelity.com/mutual-funds/fees-and-prices/316343201: Can't connect to fundresearch.fidelity.com:443 at -e line 1.\n</code></pre>\n\n<p>I am able to successfully retrieve the Web page using curl.</p>\n"}, {"tags": ["perl", "variables", "implicit", "chomp"], "comments": [{"owner": {"reputation": 52821, "user_id": 632407, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/AfGWW.jpg?s=128&g=1", "display_name": "jm666", "link": "https://stackoverflow.com/users/632407/jm666"}, "edited": false, "score": 3, "creation_date": 1515242173, "post_id": 48124025, "comment_id": 83231394, "body": "Instead trying reinventing the wheel again an again, you should use some already developed modules for reading FASTA files (<a href=\"https://metacpan.org/pod/FAST::Bio::SeqIO\" rel=\"nofollow noreferrer\">for example this one</a> )and you could put more efforts for the real problem solving..."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 5, "creation_date": 1515254828, "post_id": 48124025, "comment_id": 83235046, "body": "Please don&#39;t post images of text. That&#39;s useless if we want to cut and paste it in order to try and solve your problem."}, {"owner": {"reputation": 31, "user_id": 8230588, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a20df5a29fbb7d6bef4d5ebf9e8d1f04?s=128&d=identicon&r=PG&f=1", "display_name": "Alfredo Mari", "link": "https://stackoverflow.com/users/8230588/alfredo-mari"}, "reply_to_user": {"reputation": 52821, "user_id": 632407, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/AfGWW.jpg?s=128&g=1", "display_name": "jm666", "link": "https://stackoverflow.com/users/632407/jm666"}, "edited": false, "score": 0, "creation_date": 1515407378, "post_id": 48124025, "comment_id": 83274981, "body": "Thanks a lot @jm666 for the hint, actually i should start use this FAST::Bio."}, {"owner": {"reputation": 31, "user_id": 8230588, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a20df5a29fbb7d6bef4d5ebf9e8d1f04?s=128&d=identicon&r=PG&f=1", "display_name": "Alfredo Mari", "link": "https://stackoverflow.com/users/8230588/alfredo-mari"}, "reply_to_user": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1515407564, "post_id": 48124025, "comment_id": 83275072, "body": "@DaveCross, sorry about that, i thought my issue was stupid enough that already with the image one could immediately spot the error. I will try not to do it."}], "answers": [{"tags": [], "owner": {"reputation": 2422, "user_id": 9112798, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e2689048404de2b747c712b6782e8c7?s=128&d=identicon&r=PG&f=1", "display_name": "David Collins", "link": "https://stackoverflow.com/users/9112798/david-collins"}, "is_accepted": true, "score": 2, "last_activity_date": 1515262720, "last_edit_date": 1515262720, "creation_date": 1515211745, "answer_id": 48124164, "question_id": 48124025, "link": "https://stackoverflow.com/questions/48124025/how-do-i-use-correctly-chomp-command-to-get-rid-of-n-character-in-perl/48124164#48124164", "title": "How do I use correctly chomp command to get rid of \\n character in perl?", "body": "<p>There are three issues with your <code>while()</code> loop.</p>\n\n<ul>\n<li>You are <code>chomp()</code>'ing unconditionally at the beginning of the loop.</li>\n<li>You are then re-adding the newline character at the end of the loop\n(defeating the purpose of the previous <code>chomp()</code>).</li>\n<li>You are concatenating the header to every line.</li>\n</ul>\n\n<p>Here is a simplified version.</p>\n\n<pre><code>use strict;\nuse warnings;\n\nmy $db = shift;\nmy $outfile = \"out.fasta\";\n\nopen(my $fh, \"&lt;\", $db) or die \"Could not open input file\";\nopen(my $out, \"&gt;\", $outfile) or die \"Could not open output file\";\n\nmy $header;\n\nwhile (&lt;$fh&gt;) {\n    $header = /^&gt;/;\n    chomp unless $header;\n    print $out $. &gt; 1 &amp;&amp; $header &amp;&amp; \"\\n\", $_;\n}\n\nclose $out;\nclose $fh;\n</code></pre>\n\n<p>The line</p>\n\n<pre><code>print $out $. &gt; 1 &amp;&amp; $header &amp;&amp; \"\\n\", $_;\n</code></pre>\n\n<p>will conditionally <em>prepend</em> a newline to the output if this line begins with a '>' - unless it is the first line in the file. (The <code>$.</code> variable is the current linenumber.)</p>\n\n<p><strong>Credit:</strong> ikegami spotted the failure in my original code to allow for more than one sequence within the input database.</p>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 1, "last_activity_date": 1515258989, "last_edit_date": 1515258989, "creation_date": 1515258684, "answer_id": 48129794, "question_id": 48124025, "link": "https://stackoverflow.com/questions/48124025/how-do-i-use-correctly-chomp-command-to-get-rid-of-n-character-in-perl/48129794#48129794", "title": "How do I use correctly chomp command to get rid of \\n character in perl?", "body": "<pre><code>my $add_lf = 0;\nwhile (&lt;&gt;) {\n   chomp;\n   if (/^&gt;/) {\n      print(\"\\n\") if $add_lf;\n      print(\"$_\\n\");\n      $add_lf = 0;\n   } else {\n      print;\n      $add_lf = 1;\n   }\n}\n\nprint(\"\\n\") if $add_lf;\n</code></pre>\n"}], "owner": {"reputation": 31, "user_id": 8230588, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a20df5a29fbb7d6bef4d5ebf9e8d1f04?s=128&d=identicon&r=PG&f=1", "display_name": "Alfredo Mari", "link": "https://stackoverflow.com/users/8230588/alfredo-mari"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 493, "favorite_count": 0, "accepted_answer_id": 48124164, "answer_count": 2, "score": -1, "last_activity_date": 1515262720, "creation_date": 1515209793, "last_edit_date": 1515232289, "question_id": 48124025, "link": "https://stackoverflow.com/questions/48124025/how-do-i-use-correctly-chomp-command-to-get-rid-of-n-character-in-perl", "title": "How do I use correctly chomp command to get rid of \\n character in perl?", "body": "<p>my question is very simple: i have a database that is looking like this:\n<a href=\"https://i.stack.imgur.com/ivJbt.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ivJbt.png\" alt=\"enter image description here\"></a></p>\n\n<p>My goal is just to eliminate the newline \\n at the end of every sequence line, NOT OF THE HEADER, i tried the following code</p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nmy $db = shift;\nmy $outfile= \"Silva_chomped_for_R_fin.fasta\";\nmy $header;\nmy $seq;\nmy $kick = \"&gt;\";\n\nopen(FASTAFILE, $db);\nopen(OUTFILE,\"&gt;\". $outfile);\n\nwhile(&lt;FASTAFILE&gt;) {\n    my $currentline = $_;\n    chomp $currentline;\n    if ($currentline =~ m/^$kick/) {\n        $header = $currentline;\n    } else {\n        chomp $currentline;\n        $seq = $currentline;\n    }\n    my $path = $header.$seq.\"\\n\";\n    print(OUTFILE $path);\n}\n\nclose OUTFILE;\nclose FASTAFILE;\nexit;\n</code></pre>\n\n<p>But instead of having just the sequence line chomped i obtain the following<a href=\"https://i.stack.imgur.com/m606s.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/m606s.png\" alt=\"enter image description here\"></a></p>\n\n<p>like if chomp didn't work at all..\nany idea of what i do wrong?\nthanks a lot\nAlfredo</p>\n"}, {"tags": ["perl", "hash", "syntax", "scalar"], "answers": [{"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 5, "last_activity_date": 1515207265, "creation_date": 1515207265, "answer_id": 48123845, "question_id": 48123717, "link": "https://stackoverflow.com/questions/48123717/how-to-directly-assign-the-sole-hash-key-to-a-scalar-in-perl/48123845#48123845", "title": "How to directly assign the SOLE hash key to a scalar in perl", "body": "<pre><code>my ($key) = keys(%hash);\n</code></pre>\n\n<p>or</p>\n\n<pre><code>my $key = ( keys(%hash) )[0];\n</code></pre>\n"}], "owner": {"reputation": 9, "user_id": 5960918, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/--cy00ZF2wkM/AAAAAAAAAAI/AAAAAAAAAP4/qF1X40Ve2YE/photo.jpg?sz=128", "display_name": "kloot", "link": "https://stackoverflow.com/users/5960918/kloot"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 44, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1515207265, "creation_date": 1515205504, "question_id": 48123717, "link": "https://stackoverflow.com/questions/48123717/how-to-directly-assign-the-sole-hash-key-to-a-scalar-in-perl", "title": "How to directly assign the SOLE hash key to a scalar in perl", "body": "<p>Is it possible to assign the <em>only existing</em> hash key <em>directly</em> to a scalar?</p>\n\n<p>For example can these two statements be combined into one?</p>\n\n<pre><code>@the_keys = keys %the_hash;       # a hash with a single key\n$the_sole_key = shift @the_keys;\n</code></pre>\n\n<p>The existence of a <em>SINGLE</em> key in %the_hash has been verified in preceding code.</p>\n\n<p>Thanks in advance!</p>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 19159, "user_id": 3600709, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/731c8c4c0029d3414563333de16b8977?s=128&d=identicon&r=PG&f=1", "display_name": "ctwheels", "link": "https://stackoverflow.com/users/3600709/ctwheels"}, "edited": false, "score": 0, "creation_date": 1515182927, "post_id": 48120490, "comment_id": 83217689, "body": "Scope issue: <a href=\"https://tio.run/##K0gtyjH9/z@3UkElMSWlKLW42FYpOCTIMdzJNSgoUsHD08dHyZoLJF2cnJGamxqfl5ibas3FlZmmAddQp5CrrxFTrh1TrA0kNfU1uaq5OJHVK9gqqBhac9VyFRRl5pUoKCkEg@UU/IByVigmK1n//w8A\" rel=\"nofollow noreferrer\">see here</a> -&gt; moved this to <a href=\"https://stackoverflow.com/a/48120612/3600709\">answer</a>."}, {"owner": {"user_type": "does_not_exist", "display_name": "user557597"}, "edited": false, "score": 4, "creation_date": 1515184790, "post_id": 48120490, "comment_id": 83218530, "body": "Only one thing to say <code>use strict; use warnings;</code>"}], "answers": [{"comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1515191372, "post_id": 48120612, "comment_id": 83221088, "body": "This is horrible. You can&#39;t distinguish between declaration and definition; there is no <i>if statement</i> and so it cannot <i>return</i> anything. The problem isn&#39;t that <i>&quot;<code>$scheme_name</code> never actually gets set&quot;</i> but that it doesn&#39;t exist. Please stop &quot;helping&quot; with your Perl insights."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1515191587, "post_id": 48120612, "comment_id": 83221171, "body": "And please use <i>markdown</i> and avoid HTML"}, {"owner": {"reputation": 19159, "user_id": 3600709, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/731c8c4c0029d3414563333de16b8977?s=128&d=identicon&r=PG&f=1", "display_name": "ctwheels", "link": "https://stackoverflow.com/users/3600709/ctwheels"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 2, "creation_date": 1515273808, "post_id": 48120612, "comment_id": 83241194, "body": "@Borodin yes I agree that I should have been more careful with my terminology, that&#39;s completely my fault and I do appreciate you pointing out those mistakes and correcting them for me. Was it really necessary to remove all the additional information from my question though? I&#39;ve added back the coding sample, link to tio (to see it running) and the link to Perl&#39;s documentation. I believe these pieces are key for any programmer to succeed: Know where to find the information and give an example so that they can see exactly how to implement the solution. Thank you for helping me improve my answer"}], "tags": [], "owner": {"reputation": 19159, "user_id": 3600709, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/731c8c4c0029d3414563333de16b8977?s=128&d=identicon&r=PG&f=1", "display_name": "ctwheels", "link": "https://stackoverflow.com/users/3600709/ctwheels"}, "is_accepted": true, "score": 0, "last_activity_date": 1515273555, "last_edit_date": 1515273555, "creation_date": 1515183060, "answer_id": 48120612, "question_id": 48120490, "link": "https://stackoverflow.com/questions/48120490/match-string-using-perl/48120612#48120612", "title": "Match string using perl", "body": "<h2>Brief</h2>\n\n<p><code>$scheme_name</code> needs to be defined outside the <code>if</code> block. If the <code>if</code> test were false then <code>$scheme_name</code> wouldn't be declared.</p>\n\n<p>As per <a href=\"http://perldoc.perl.org/functions/my.html\" rel=\"nofollow noreferrer\">Perl's documentation of <code>my</code></a>:</p>\n\n<blockquote>\n  <p>A <code>my</code> declares the listed variables to be local (lexically) to the\n  enclosing block, file, or <code>eval</code>. If more than one variable is\n  listed, the list must be placed in parentheses.</p>\n</blockquote>\n\n<hr>\n\n<h2>Code</h2>\n\n<p><a href=\"https://tio.run/##K0gtyjH9/z@3UkElMSWlKLW42FYpOCTIMdzJNSgoUsHD08dHyZoLJF2cnJGamxqfl5ibaqsEFOPKTNOA66lTyNXXiCnXjinWBpKa@ppc1VycyFoUbBVUDK25arkKijLzShSUFILBcgp@QDkrFMOVrP//BwA\" rel=\"nofollow noreferrer\">See code in use here</a></p>\n\n<pre><code>my $address=\"STRAWBERRY HILL\";\nmy $scheme_name=\"\";\n\nif($address=~ m/(\\w+\\s+\\w+)/)\n{\n    $scheme_name = $1;\n}\nprint \" Scheme Name: $scheme_name\";\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 2, "last_activity_date": 1515193632, "last_edit_date": 1515193632, "creation_date": 1515189392, "answer_id": 48121832, "question_id": 48120490, "link": "https://stackoverflow.com/questions/48120490/match-string-using-perl/48121832#48121832", "title": "Match string using perl", "body": "<p>First of all, always use <code>use strict; use warnings qw( all );</code>. Your error would have been found at compile-time.</p>\n\n<p><code>my</code> creates a new variable which is scoped to (only visible in) the inner-most block in which it resides.</p>\n\n<p>There are many possible solutions.</p>\n\n<ul>\n<li><p>Move the <code>print</code>.</p>\n\n<pre><code>if ( my ($scheme_name) = $address =~ /(\\w+\\s+\\w+)/ ) {\n    print \"Scheme Name: $scheme_name\\n\";\n} else {\n    print \"Scheme Name: default\\n\";\n}\n</code></pre></li>\n<li><p>Create the variable before the <code>if</code>.</p>\n\n<pre><code>my $scheme_name = \"default\";\nif ($address =~ /(\\w+\\s+\\w+)/) {\n    $scheme_name = $1;\n}\n\nprint \"Scheme Name: $scheme_name\\n\";\n</code></pre></li>\n<li><p>Switch from using <code>if</code> to using the conditional operator.</p>\n\n<pre><code>my $scheme_name = $address =~ /(\\w+\\s+\\w+)/ ? $1 : \"default\";\nprint \"Scheme Name: $scheme_name\\n\";\n</code></pre></li>\n</ul>\n"}], "owner": {"reputation": 33, "user_id": 7830084, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a50bb2fd9150fc684ada1b4116a64468?s=128&d=identicon&r=PG&f=1", "display_name": "A.Ban", "link": "https://stackoverflow.com/users/7830084/a-ban"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 143, "favorite_count": 0, "closed_date": 1515192304, "accepted_answer_id": 48120612, "answer_count": 2, "score": -2, "last_activity_date": 1515273555, "creation_date": 1515182423, "question_id": 48120490, "link": "https://stackoverflow.com/questions/48120490/match-string-using-perl", "closed_reason": "Duplicate", "title": "Match string using perl", "body": "<p>I have stored a piece of string \"Strawberry Hill\" in a variable. However I am trying to use a regular expression to see if the string matches a particular format. If the string matches I would like to store it in a variable. However nothing gets stored in the variable. I tested the regular expression in the same script outside of the if statement and it worked.</p>\n\n<pre><code>  my $address=\"STRAWBERRY HILL\";\n\n    if($address=~ m/(\\w+\\s+\\w+)/)\n    {\n        my $scheme_name=$1;\n    }\n    print \" Scheme Name: $scheme_name\";\n</code></pre>\n"}, {"tags": ["perl", "foreach", "hashmap"], "comments": [{"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 4, "creation_date": 1515168933, "post_id": 48116824, "comment_id": 83210914, "body": "always <code>use strict; use warnings;</code> and declare all your variables."}], "answers": [{"tags": [], "owner": {"reputation": 1672, "user_id": 4355253, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ee8cbfecfb7686f370b07eea52273c5?s=128&d=identicon&r=PG&f=1", "display_name": "Javier Elices", "link": "https://stackoverflow.com/users/4355253/javier-elices"}, "is_accepted": false, "score": 0, "last_activity_date": 1515168978, "last_edit_date": 1515168978, "creation_date": 1515167352, "answer_id": 48116943, "question_id": 48116824, "link": "https://stackoverflow.com/questions/48116824/understanding-the-foreach-syntax-for-the-keys-of-a-hash/48116943#48116943", "title": "Understanding the &#39;foreach&#39; syntax for the keys of a hash", "body": "<p>The syntax <code>%{ $scalar }</code> is used to tell Perl that the type of <code>$scalar</code> is a hash ref and you want to undo the reference. That is why you need the dollar sign <code>$</code>: <code>$skosfile</code> is the variable you are trying to dereference.</p>\n\n<p>In the same fashion, <code>@{ $scalar }</code> serves to dereference an array.</p>\n\n<p>Although it does not work for complex constructions, in simple cases you may also abbreviate <code>%{$scalar}</code> to <code>%$scalar</code> and <code>@{$scalar}</code> to <code>@$scalar</code>.</p>\n\n<p>In the case of the expression <code>keys %{$skosfile}</code>, <code>keys</code> needs a hash which you obtain by dereferencing <code>$skosfile</code>, a hash ref. In fact, the typical <code>foreach</code> loop for a hash looks like:</p>\n\n<pre><code>foreach my $key ( keys %hash ) {\n  # do something with $key\n}\n</code></pre>\n\n<p>When you iterate a hash ref:</p>\n\n<pre><code>foreach my $key ( keys %{ $hashref } ) {\n  # do something with $key\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 185733, "user_id": 152948, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/194ef8f807c34a9d7aab0e11a8674768?s=128&d=identicon&r=PG", "display_name": "hobbs", "link": "https://stackoverflow.com/users/152948/hobbs"}, "is_accepted": true, "score": 4, "last_activity_date": 1515167471, "creation_date": 1515167471, "answer_id": 48116976, "question_id": 48116824, "link": "https://stackoverflow.com/questions/48116824/understanding-the-foreach-syntax-for-the-keys-of-a-hash/48116976#48116976", "title": "Understanding the &#39;foreach&#39; syntax for the keys of a hash", "body": "<p><code>%{skosfile}</code> is the same as <code>%skosfile</code>. It refers to a hash variable with that name. Usually that form isn't used for a simple variable name, but it's allowable.</p>\n\n<p><code>%{$skosfile}</code> means to look at the scalar variable <code>$skosfile</code> (remember, in perl, <code>$foo</code>, <code>%foo</code>, and <code>@foo</code> are distinctvariables), and, expecting <code>$skosfile</code> to be a hashref, it returns the hash that the reference points to. It is equivalent to <code>%$skosfile</code>, but in fact any expression that returns a hashref can appear inside of <code>%{...}</code>.</p>\n"}], "owner": {"reputation": 157, "user_id": 5874038, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/09e2231304cd8fb588e68918d0d87f56?s=128&d=identicon&r=PG&f=1", "display_name": "James Peter McConnell", "link": "https://stackoverflow.com/users/5874038/james-peter-mcconnell"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 879, "favorite_count": 0, "accepted_answer_id": 48116976, "answer_count": 2, "score": 1, "last_activity_date": 1515179003, "creation_date": 1515166839, "last_edit_date": 1592644375, "question_id": 48116824, "link": "https://stackoverflow.com/questions/48116824/understanding-the-foreach-syntax-for-the-keys-of-a-hash", "title": "Understanding the &#39;foreach&#39; syntax for the keys of a hash", "body": "<p>I have created a simple Perl hash</p>\n<h3>Sample.pl</h3>\n<pre><code>$skosName = 'foo';\n$skosId   = 'abc123';\n\n$skosFile{'type'}{$skosId} = $skosName; \n</code></pre>\n<p>Later on I try to print the hash values using <code>foreach</code>.</p>\n<p>This variant works</p>\n<pre><code>foreach $skosfile1type ( keys %{skosFile} ){\n\n    print ...\n}\n</code></pre>\n<p>While this one doesn't</p>\n<pre><code>foreach $skosfile1type ( keys %{$skosFile} ) {\n\n    print ...\n}\n</code></pre>\n<p>What is the difference between the two <code>foreach</code> statements?</p>\n<p>In particular, what is the significance of the dollar sign <code>$</code> in the statement that doesn't work?</p>\n<p>Is it something to do with scope, or perhaps my omission of the <code>my</code> or <code>our</code> keywords?</p>\n"}, {"tags": ["perl", "exec", "archive", "7zip", "sevenzipsharp"], "comments": [{"owner": {"reputation": 52821, "user_id": 632407, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/AfGWW.jpg?s=128&g=1", "display_name": "jm666", "link": "https://stackoverflow.com/users/632407/jm666"}, "edited": false, "score": 4, "creation_date": 1515157851, "post_id": 48114100, "comment_id": 83204374, "body": "How we could help without seeing of <i>your</i> code? See: <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> (But, guessing - try replace the <code>Filelocation</code> with some actual path)."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1515161158, "post_id": 48114100, "comment_id": 83206329, "body": "Do you have <code>7z</code> installed? Is it on your path?"}], "answers": [{"comments": [{"owner": {"reputation": 77, "user_id": 7568434, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/097e26962f64b93b5a09a51423616979?s=128&d=identicon&r=PG&f=1", "display_name": "keeru", "link": "https://stackoverflow.com/users/7568434/keeru"}, "edited": false, "score": 0, "creation_date": 1515261247, "post_id": 48119515, "comment_id": 83237199, "body": "I checked the changes are already in my system. i installed 7z in my machine.&quot;Unexpected line in 7zip output, hope that&#39;s OK: [] at /usr/local/share/perl/5.18.2/Archive/SevenZip.pm line 256, &lt;GEN6&gt; line 7.&quot; still got this error. And the line in the file is                                          &quot;if( $output[0] =~ /^----------\\s*$/ ) {  shift @output;  } else { warn &quot;Unexpected line in 7zip output, hope that&#39;s OK: [$output[0]]&quot;; };&quot;"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 77, "user_id": 7568434, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/097e26962f64b93b5a09a51423616979?s=128&d=identicon&r=PG&f=1", "display_name": "keeru", "link": "https://stackoverflow.com/users/7568434/keeru"}, "edited": false, "score": 0, "creation_date": 1515268202, "post_id": 48119515, "comment_id": 83239468, "body": "Re &quot;<i>I checked the changes are already in my system</i>&quot;, The error message you posted in the OP shows otherwise. You have have used the <code>perldoc</code> that was installed by a different <code>perl</code> then the <code>perl</code> used when you obtained the error message."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 77, "user_id": 7568434, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/097e26962f64b93b5a09a51423616979?s=128&d=identicon&r=PG&f=1", "display_name": "keeru", "link": "https://stackoverflow.com/users/7568434/keeru"}, "edited": false, "score": 0, "creation_date": 1515268343, "post_id": 48119515, "comment_id": 83239521, "body": "The warning you are now asking about indicates that <code>7z</code> provided different output than expected."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 2, "last_activity_date": 1515185076, "last_edit_date": 1515185076, "creation_date": 1515177846, "answer_id": 48119515, "question_id": 48114100, "link": "https://stackoverflow.com/questions/48114100/open3-exec-of-failed-at-perl-5-18-2/48119515#48119515", "title": "open3: exec of failed at perl 5.18.2", "body": "<p>Archive::SevenZip is using <code>open3</code> to execute the command-line utility <code>7z</code>. That message indicates the call to <code>exec</code> is failing.</p>\n\n<p>Most likely problem: <code>7z</code> isn't installed on your machine.</p>\n\n<p>If you think that's not the problem,</p>\n\n<ol>\n<li>Edit the file named by <code>perldoc -lm IPC::Open3</code>.</li>\n<li><p>Replace</p>\n\n<pre><code>exec @cmd or do {\n    carp \"$Me: exec of @cmd failed\";\n</code></pre>\n\n<p>with</p>\n\n<pre><code>exec @_ or do {\n    local($\")=(\" \");\n    croak \"$Me: exec of @_ failed: $!\";\n};\n</code></pre>\n\n<p>(This change is already present in newer versions of IPC::Open3.)</p></li>\n<li>Rerun the program.</li>\n<li>Provide the more detailed error message.</li>\n</ol>\n"}], "owner": {"reputation": 77, "user_id": 7568434, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/097e26962f64b93b5a09a51423616979?s=128&d=identicon&r=PG&f=1", "display_name": "keeru", "link": "https://stackoverflow.com/users/7568434/keeru"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 475, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1515185076, "creation_date": 1515156925, "last_edit_date": 1515157237, "question_id": 48114100, "link": "https://stackoverflow.com/questions/48114100/open3-exec-of-failed-at-perl-5-18-2", "title": "open3: exec of failed at perl 5.18.2", "body": "<p>I wrote perl script for zipping the files with <a href=\"http://p3rl.org/Archive::SevenZip\" rel=\"nofollow noreferrer\">Archive::SevenZip</a> module.</p>\n\n<p>I got this error</p>\n\n<blockquote>\n  <p>open3: exec of 7z -y -bd l -slt \"Filelocation\" failed at /usr/local/share/perl/5.18.2/Archive/SevenZip.pm. </p>\n</blockquote>\n\n<p>I can't able to resolve that.</p>\n"}, {"tags": ["bash", "perl"], "comments": [{"owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 0, "creation_date": 1515152048, "post_id": 48112761, "comment_id": 83201048, "body": "Just for my understanding: in your first block each line represents one array element and they make up a 9-element array, right?"}, {"owner": {"reputation": 21, "user_id": 8968797, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/5d8df1da3578402d9557c974ec40e76a?s=128&d=identicon&r=PG", "display_name": "sergio", "link": "https://stackoverflow.com/users/8968797/sergio"}, "reply_to_user": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 1, "creation_date": 1515152464, "post_id": 48112761, "comment_id": 83201292, "body": "Yeah thats right.. So I basically have many files and I wrote a script to read each file and whenever it meets specific line I splitted this by space. Then I push 4th element into an array but can only make use of it if it is organized as in the second block. So, for nine files nine element array."}, {"owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "edited": false, "score": 0, "creation_date": 1515153286, "post_id": 48112761, "comment_id": 83201777, "body": "Your output isn&#39;t consistent based on your input - you strip the single space from the first line, but keep the spaces on the last."}, {"owner": {"reputation": 68617, "user_id": 3776858, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/juunm.png?s=128&g=1", "display_name": "Cyrus", "link": "https://stackoverflow.com/users/3776858/cyrus"}, "edited": false, "score": 1, "creation_date": 1515154618, "post_id": 48112761, "comment_id": 83202521, "body": "The goal is that you add some code of your own to show at least the research effort you made to solve this yourself."}], "answers": [{"comments": [{"owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "edited": false, "score": 1, "creation_date": 1515152732, "post_id": 48112893, "comment_id": 83201445, "body": "It&#39;s also not a perl solution as requested"}, {"owner": {"reputation": 4452, "user_id": 1782782, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/99Sl0.jpg?s=128&g=1", "display_name": "Pierre Fran&#231;ois", "link": "https://stackoverflow.com/users/1782782/pierre-fran%c3%a7ois"}, "reply_to_user": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "edited": false, "score": 3, "creation_date": 1515152936, "post_id": 48112893, "comment_id": 83201569, "body": "If you want a perl solution, I suggest you to remove the bash tag from the question. I thought it was bash <b>or</b> perl."}, {"owner": {"reputation": 21, "user_id": 8968797, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/5d8df1da3578402d9557c974ec40e76a?s=128&d=identicon&r=PG", "display_name": "sergio", "link": "https://stackoverflow.com/users/8968797/sergio"}, "edited": false, "score": 0, "creation_date": 1515153110, "post_id": 48112893, "comment_id": 83201666, "body": "Yes, it was bash or perl, although perl is &quot;preffered&quot;. For me either is fine."}], "tags": [], "owner": {"reputation": 4452, "user_id": 1782782, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/99Sl0.jpg?s=128&g=1", "display_name": "Pierre Fran&#231;ois", "link": "https://stackoverflow.com/users/1782782/pierre-fran%c3%a7ois"}, "is_accepted": false, "score": 1, "last_activity_date": 1515152841, "last_edit_date": 1515152841, "creation_date": 1515152398, "answer_id": 48112893, "question_id": 48112761, "link": "https://stackoverflow.com/questions/48112761/modifying-the-elements-inside-the-array/48112893#48112893", "title": "Modifying the elements inside the array", "body": "<p>Use <code>sed</code>. Assuming your input file is <em>input.txt</em>:</p>\n\n<pre><code>sed '/C/s/[0-9]*(C/C/g' input.txt | sed '/C/s/^[^C]*//'\n</code></pre>\n\n<p>The first <code>sed</code> command removes the digits and parenthese before C, the second one, removes spaces and other chars before a C standing alone. </p>\n\n<p>For the example, this is working. You will have to check that all the cases are matched.</p>\n"}, {"comments": [{"owner": {"reputation": 21, "user_id": 8968797, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/5d8df1da3578402d9557c974ec40e76a?s=128&d=identicon&r=PG", "display_name": "sergio", "link": "https://stackoverflow.com/users/8968797/sergio"}, "edited": false, "score": 0, "creation_date": 1515154002, "post_id": 48113034, "comment_id": 83202163, "body": "choroba: Thank You very much for this solution! All the best!"}, {"owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "reply_to_user": {"reputation": 21, "user_id": 8968797, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/5d8df1da3578402d9557c974ec40e76a?s=128&d=identicon&r=PG", "display_name": "sergio", "link": "https://stackoverflow.com/users/8968797/sergio"}, "edited": false, "score": 0, "creation_date": 1515154876, "post_id": 48113034, "comment_id": 83202679, "body": "@sergio Please read <a href=\"https://stackoverflow.com/help/someone-answers\"><i>What should I do when someone answers my question?</i></a>. But take your time; don&#39;t hurry."}], "tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": false, "score": 1, "last_activity_date": 1515152925, "creation_date": 1515152925, "answer_id": 48113034, "question_id": 48112761, "link": "https://stackoverflow.com/questions/48112761/modifying-the-elements-inside-the-array/48113034#48113034", "title": "Modifying the elements inside the array", "body": "<pre><code>#! /usr/bin/perl\nuse warnings;\nuse strict;\n\nmy @array = ('C32',\n             '14(C55',\n             '2(C14',\n             'C10',\n             '3(C20',\n             'C10',\n             '2(O4 *149(H2',\n             'ZN C14',\n             '6(C5 6(C7 6(C3 6(C8 6(C11');\n\nmy @expected = ('C32',\n                'C55',\n                'C14',\n                'C10',\n                'C20',\n                'C10',\n                '2(O4 *149(H2',\n                'C14',\n                'C5 C7 C6 C8 C11');\n\ns/\\S\\S.?C/C/g for @array;\n\nuse Test::More tests =&gt; 1;\nis_deeply \\@array, \\@expected;\n</code></pre>\n\n<p>Note that the test fails because <code>C3</code> and <code>C6</code> are not equal.</p>\n"}, {"tags": [], "owner": {"reputation": 205702, "user_id": 7552, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b60298053f87465641c1b1192338c8cd?s=128&d=identicon&r=PG", "display_name": "glenn jackman", "link": "https://stackoverflow.com/users/7552/glenn-jackman"}, "is_accepted": false, "score": 0, "last_activity_date": 1515154918, "creation_date": 1515154918, "answer_id": 48113569, "question_id": 48112761, "link": "https://stackoverflow.com/questions/48112761/modifying-the-elements-inside-the-array/48113569#48113569", "title": "Modifying the elements inside the array", "body": "<p>with bash:</p>\n\n<pre><code>mapfile -t arr &lt;&lt;END\n C32\n14(C55\n2(C14\nC10\n3(C20\nC10\n2(O4 *149(H2\nZN C14\n6(C5 6(C7 6(C3 6(C8 6(C11\nEND\n\nfor ((i=0; i&lt;${#arr[@]}; i++)); do \n    if [[ ${arr[i]} == *C* ]]; then\n        # replace digits and open parentheses before a C\n        arr[i]=${arr[i]//+([0-9])(C/C}\n    fi\ndone\n\nprintf \"%s\\n\" \"${arr[@]}\"\n</code></pre>\n\n\n\n<pre><code> C32\nC55\nC14\nC10\nC20\nC10\n2(O4 *149(H2\nZN C14\nC5 C7 C3 C8 C11\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 8968797, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/5d8df1da3578402d9557c974ec40e76a?s=128&d=identicon&r=PG", "display_name": "sergio", "link": "https://stackoverflow.com/users/8968797/sergio"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 71, "favorite_count": 0, "answer_count": 3, "score": -1, "last_activity_date": 1515154918, "creation_date": 1515151850, "question_id": 48112761, "link": "https://stackoverflow.com/questions/48112761/modifying-the-elements-inside-the-array", "title": "Modifying the elements inside the array", "body": "<p>I have an array that looks like this:</p>\n\n<pre><code> C32\n14(C55\n2(C14\nC10\n3(C20\nC10\n2(O4 *149(H2\nZN C14\n6(C5 6(C7 6(C3 6(C8 6(C11\n</code></pre>\n\n<p>I don't know if it is possible but I am trying to figure it out how to do it for days. So basically what I need is to modify the elements of this array so that for each element of the array (only if it contains C) I would like to delete two/three charachters before, whenever it ecounters C. So I will end up with something like this:</p>\n\n<pre><code>    C32\n    C55\n    C14\n    C10\n    C20\n    C10\n    2(O4 *149(H2\n    C14\n    C5 C7 C6 C8 C11\n</code></pre>\n"}, {"tags": ["perl"], "answers": [{"tags": [], "owner": {"reputation": 25, "user_id": 4745977, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5359b458aff0f81c446579a03bde2af6?s=128&d=identicon&r=PG&f=1", "display_name": "jmasa", "link": "https://stackoverflow.com/users/4745977/jmasa"}, "is_accepted": false, "score": -1, "last_activity_date": 1515145987, "creation_date": 1515145987, "answer_id": 48111055, "question_id": 48111054, "link": "https://stackoverflow.com/questions/48111054/perl-iostringy-and-ioinnerfile-install-test-failure-on-windows-os-and-how-t/48111055#48111055", "title": "Perl IO::Stringy and IO::InnerFile install test failure on Windows OS (and how to fix it)", "body": "<p>Soon I realized that (because of seeking) the test script <strong>IO_InnerFile.t</strong> can be used only on platforms where a line terminator is a single byte.\nIn case of M$ Windows, where the line terminator consists of two bytes \\r\\n sequence, seeking to absolute position does not work \u2013 simply <strong>the test itself is not portable</strong>.</p>\n\n<p>The possible fix is adding PerlIO layer <strong>\":crlf\"</strong>:</p>\n\n<ol>\n<li><p>Open the file IO_InnerFile.t and find the line reading:</p>\n\n<p><code>my $fh = IO::File-&gt;new('&lt;t/dummy-test-file');</code></p>\n\n<p>and change it to:</p>\n\n<p><code>my $fh = IO::File-&gt;new('&lt;:crlf t/dummy-test-file');</code></p>\n\n<p>Note the space between \u201c&lt;:crlf\u201d and \u201ct/ dummy-test-file\u201d</p></li>\n<li><p>Open console window and switch to the module build directory (<em>C:\\Perl64\\cpan\\build\\IO-stringy-2.111-0</em> in my case)</p></li>\n<li><p>Run manually:</p>\n\n<p><code>dmake test</code></p>\n\n<p><code>dmake install</code></p></li>\n</ol>\n\n<p>Note: I don\u2019t bother with proper PATH settings and absolute file positions, which may vary.</p>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 9452379, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/65a93dfd2584af2878dba311d7d67e66?s=128&d=identicon&r=PG", "display_name": "John Pisello", "link": "https://stackoverflow.com/users/9452379/john-pisello"}, "is_accepted": false, "score": 1, "last_activity_date": 1520354333, "creation_date": 1520354333, "answer_id": 49135846, "question_id": 48111054, "link": "https://stackoverflow.com/questions/48111054/perl-iostringy-and-ioinnerfile-install-test-failure-on-windows-os-and-how-t/49135846#49135846", "title": "Perl IO::Stringy and IO::InnerFile install test failure on Windows OS (and how to fix it)", "body": "<p>The approach by jmasa didn't work for me, but this did:</p>\n\n<p>In IO_InnerFile.t, change the block right after <code># Create a test file</code> to:</p>\n\n<pre><code># Create a test file\ndo {\n    open(OUT, '&gt;t/dummy-test-file') || die(\"Cannot write t/dummy-test-file: $!\");\n    local $\\ = \"\\n\";    ## Use `print` vs. `say` to avoid extra blank lines.\n    binmode OUT, ':raw';    ## Force output of UNIX line terminators.\n    print OUT &lt;&lt;'EOF';\nHere is some dummy content.\nHere is some more dummy content\nHere is yet more dummy content.\nAnd finally another line.\nEOF\n    close(OUT);\n};\n</code></pre>\n\n<p>This localizes the change to <code>$/</code> (changed to the UNIX single-character line terminator) and uses it to output the test text to the dummy file.</p>\n\n<p>Then run </p>\n\n<p><code>dmake test</code></p>\n\n<p><code>dmake install</code></p>\n"}], "owner": {"reputation": 25, "user_id": 4745977, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5359b458aff0f81c446579a03bde2af6?s=128&d=identicon&r=PG&f=1", "display_name": "jmasa", "link": "https://stackoverflow.com/users/4745977/jmasa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 84, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1520354333, "creation_date": 1515145987, "last_edit_date": 1515158674, "question_id": 48111054, "link": "https://stackoverflow.com/questions/48111054/perl-iostringy-and-ioinnerfile-install-test-failure-on-windows-os-and-how-t", "title": "Perl IO::Stringy and IO::InnerFile install test failure on Windows OS (and how to fix it)", "body": "<p>After clean installation of Active Perl (64-bit edition, version 5.24.3) on Windows 8.1 PC I needed to add Spreadsheet::Read Perl module. However, its CPAN installation failed.</p>\n\n<p>Analysis of the console report showed that the root cause of failure is <strong>IO::InnerFile</strong> module, which was not installed. Or \u2013 better said \u2013 failure of all seven automated tests of this module. The test script is named <strong>IO_InnerFile.t</strong> and (in my case) it is located in the <em>C:\\Perl64\\cpan\\build\\IO-stringy-2.111-0\\t</em> directory.</p>\n"}, {"tags": ["bash", "perl", "sorting", "awk", "sed"], "answers": [{"tags": [], "owner": {"reputation": 62252, "user_id": 1435869, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TrEd9.jpg?s=128&g=1", "display_name": "karakfa", "link": "https://stackoverflow.com/users/1435869/karakfa"}, "is_accepted": true, "score": 4, "last_activity_date": 1515117766, "creation_date": 1515117766, "answer_id": 48106233, "question_id": 48106128, "link": "https://stackoverflow.com/questions/48106128/how-to-sort-a-file-in-bash-whose-lines-are-in-a-particular-format/48106233#48106233", "title": "how to sort a file in bash whose lines are in a particular format?", "body": "<p><code>sort</code> is designed for this task</p>\n\n<pre><code>sort -t'|' -k2nr file\n</code></pre>\n\n<p>set the delimiter to <code>|</code> and sort by the second field numerical reverse order</p>\n"}, {"tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": false, "score": 0, "last_activity_date": 1515143354, "creation_date": 1515143354, "answer_id": 48110345, "question_id": 48106128, "link": "https://stackoverflow.com/questions/48106128/how-to-sort-a-file-in-bash-whose-lines-are-in-a-particular-format/48110345#48110345", "title": "how to sort a file in bash whose lines are in a particular format?", "body": "<p>You've tagged it as <code>perl</code> so I'll add a perlish answer.</p>\n\n<p>perl's <code>sort</code> function lets you specify an arbitary comparison criteria, provided you return 'positive/negative/zero' depending on relative position. By default the <code>&lt;=&gt;</code> operator does this numerically, and the <code>cmp</code> operator does that alphabetically.</p>\n\n<p><code>sort</code> works by setting <code>$a</code> and <code>$b</code> to each element of a list in turn, and performing the comparison function for each pair</p>\n\n<p>So for your scenario - we  craft a function that regex matches each line, and extracts the points value:</p>\n\n<pre><code>sub sort_by_points {\n   #$a and $b are provided by sort. \n   #we regex capture one or more numbers that are followed by \"Points\". \n   my ($a_points) = $a =~ m/(\\d+) Points/;\n   my ($b_points) = $b =~ m/(\\d+) Points/;\n   #we compare the points - note $b comes first, because we're sorting \n   #descending. \n   return $b_points &lt;=&gt; $a_points;\n}\n</code></pre>\n\n<p>And then you use that function by calling <code>sort</code> with it.</p>\n\n<pre><code>#!/usr/bin/env perl\nuse strict;\nuse warnings;\n\nsub sort_by_points {\n   my ($a_points)= $a =~ m/(\\d+) Points/;\n   my ($b_points) = $b =~ m/(\\d+) Points/;\n   return $b_points &lt;=&gt; $a_points;\n}\n\n#reads from the special __DATA__ filehandle. \nchomp ( my @list = &lt;DATA&gt; ) ;\nmy @sorted_list = sort {sort_by_points} @list;\nprint join \"\\n\", @sorted_list;\n\n__DATA__\nplayer16:level8|2200 Points\nplayer99:level8|19000 Points\nplayer23:level8|260 Points\n</code></pre>\n\n<p>For your purposes, you can use <code>&lt;&gt;</code> as your input, because that's the magic file handle - arguments on command line, or data piped through STDIN (might sound weird, but it's the same thing as sed/grep/awk do)</p>\n"}, {"tags": [], "owner": {"reputation": 25491, "user_id": 49197, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/15ebf24a33a29b9efbf9924f530dd736?s=128&d=identicon&r=PG", "display_name": "Hynek -Pichi- Vychodil", "link": "https://stackoverflow.com/users/49197/hynek-pichi-vychodil"}, "is_accepted": false, "score": 0, "last_activity_date": 1515144155, "creation_date": 1515144155, "answer_id": 48110567, "question_id": 48106128, "link": "https://stackoverflow.com/questions/48106128/how-to-sort-a-file-in-bash-whose-lines-are-in-a-particular-format/48110567#48110567", "title": "how to sort a file in bash whose lines are in a particular format?", "body": "<p>If you ask for Perl solution:</p>\n\n<pre><code>perl -F'\\|' -e'push@a,[$_,$F[1]]}{print$_-&gt;[0]for sort{$b-&gt;[1]&lt;=&gt;$a-&gt;[1]}@a' file.txt\n</code></pre>\n\n<p>but using <code>sort</code> is far simpler</p>\n\n<pre><code>sort -t'|' -k2nr file.txt\n</code></pre>\n"}], "owner": {"reputation": 844, "user_id": 8071224, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/STtHv.png?s=128&g=1", "display_name": "as diu", "link": "https://stackoverflow.com/users/8071224/as-diu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 56, "favorite_count": 0, "accepted_answer_id": 48106233, "answer_count": 3, "score": 0, "last_activity_date": 1515144155, "creation_date": 1515116932, "question_id": 48106128, "link": "https://stackoverflow.com/questions/48106128/how-to-sort-a-file-in-bash-whose-lines-are-in-a-particular-format", "title": "how to sort a file in bash whose lines are in a particular format?", "body": "<p>all lines in <code>file.txt</code> are in the following format:  </p>\n\n<p><code>player16:level8|2200 Points</code><br>\n<code>player99:level8|19000 Points</code><br>\n<code>player23:level8|260 Points</code></p>\n\n<p>how can I sort this file based on points? looking for the following output</p>\n\n<p><code>player99:level8|19000 Points</code><br>\n<code>player16:level8|2200 Points</code><br>\n<code>player23:level8|260 Points</code></p>\n\n<p>Any help would be greatly appreciated. Thank you.</p>\n"}, {"tags": ["regex", "bash", "perl", "awk", "sed"], "answers": [{"comments": [{"owner": {"reputation": 6598, "user_id": 6176817, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/s0NIX.jpg?s=128&g=1", "display_name": "PesaThe", "link": "https://stackoverflow.com/users/6176817/pesathe"}, "edited": false, "score": 0, "creation_date": 1515112979, "post_id": 48105613, "comment_id": 83186996, "body": "I didn&#39;t provide good enough input, sorry. There can be any character between <code>xx&#47;zz</code>, including whitespace."}, {"owner": {"reputation": 6598, "user_id": 6176817, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/s0NIX.jpg?s=128&g=1", "display_name": "PesaThe", "link": "https://stackoverflow.com/users/6176817/pesathe"}, "edited": false, "score": 0, "creation_date": 1515113690, "post_id": 48105613, "comment_id": 83187191, "body": "Also, this won&#39;t work properly if there are more pairs in one &quot;word&quot;: <code>&#39;b xxczzaxxczz b&#39;</code>."}, {"owner": {"reputation": 2134, "user_id": 3412074, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Iggj7.png?s=128&g=1", "display_name": "Xen2050", "link": "https://stackoverflow.com/users/3412074/xen2050"}, "edited": false, "score": 0, "creation_date": 1515143131, "post_id": 48105613, "comment_id": 83195804, "body": "Can you explain it? What all the options &amp; <code>:rep;</code> &amp; <code>trep</code> &amp; the search/replace 1 &amp; 2 are &amp; how they interact?"}, {"owner": {"reputation": 6598, "user_id": 6176817, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/s0NIX.jpg?s=128&g=1", "display_name": "PesaThe", "link": "https://stackoverflow.com/users/6176817/pesathe"}, "reply_to_user": {"reputation": 2134, "user_id": 3412074, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Iggj7.png?s=128&g=1", "display_name": "Xen2050", "link": "https://stackoverflow.com/users/3412074/xen2050"}, "edited": false, "score": 0, "creation_date": 1515718560, "post_id": 48105613, "comment_id": 83418140, "body": "@Xen2050 <code>\\1</code> references the first captured group <code>( regex )</code>. <code>:rep</code> is a label, <code>t rep</code> is a command that jumps to label <code>rep</code> <b>ONLY</b> if any of the <code>sed</code> commands changed the patter space. The space is not mandatory: <code>trep</code>."}], "tags": [], "owner": {"reputation": 76, "user_id": 9115126, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c0dad23c39291319085329b1376e0921?s=128&d=identicon&r=PG&f=1", "display_name": "DjLegolas", "link": "https://stackoverflow.com/users/9115126/djlegolas"}, "is_accepted": false, "score": 0, "last_activity_date": 1515112514, "creation_date": 1515112514, "answer_id": 48105613, "question_id": 48105521, "link": "https://stackoverflow.com/questions/48105521/replace-multiple-occurrences-between-two-strings/48105613#48105613", "title": "Replace multiple occurrences between two strings", "body": "<p>Your problem is with the <code>.*</code> as <code>.</code> will match every character including white space.\nYou should use <code>\\S</code> instead as it will match all non-white space characters:</p>\n\n<pre><code>$ echo 'a xxababzz ca xxbczz aaa axxazza' | sed -r ':rep; s/(xx\\S*?)a(\\S*?zz)/\\1hello\\2/; trep'\na xxhellobhellobzz ca xxbczz aaa axxhellozza\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 6598, "user_id": 6176817, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/s0NIX.jpg?s=128&g=1", "display_name": "PesaThe", "link": "https://stackoverflow.com/users/6176817/pesathe"}, "edited": false, "score": 0, "creation_date": 1515113390, "post_id": 48105686, "comment_id": 83187093, "body": "This works great. However, is there a solution that won&#39;t get extra ugly when the pairs have more characters, for example: <code>xxxxxx&#47;zzzzzz</code>?"}, {"owner": {"reputation": 83048, "user_id": 2255089, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZNAsT.jpg?s=128&g=1", "display_name": "Casimir et Hippolyte", "link": "https://stackoverflow.com/users/2255089/casimir-et-hippolyte"}, "reply_to_user": {"reputation": 6598, "user_id": 6176817, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/s0NIX.jpg?s=128&g=1", "display_name": "PesaThe", "link": "https://stackoverflow.com/users/6176817/pesathe"}, "edited": false, "score": 0, "creation_date": 1515113634, "post_id": 48105686, "comment_id": 83187169, "body": "It&#39;s obviously possible to write a replacement pattern in the same way even if this one is long with sed. If you want something shorter, use Perl."}, {"owner": {"reputation": 83048, "user_id": 2255089, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZNAsT.jpg?s=128&g=1", "display_name": "Casimir et Hippolyte", "link": "https://stackoverflow.com/users/2255089/casimir-et-hippolyte"}, "reply_to_user": {"reputation": 6598, "user_id": 6176817, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/s0NIX.jpg?s=128&g=1", "display_name": "PesaThe", "link": "https://stackoverflow.com/users/6176817/pesathe"}, "edited": false, "score": 0, "creation_date": 1515114201, "post_id": 48105686, "comment_id": 83187330, "body": "Feel free to downvote my answer, I like that since I don&#39;t make a reputation competition."}, {"owner": {"reputation": 6598, "user_id": 6176817, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/s0NIX.jpg?s=128&g=1", "display_name": "PesaThe", "link": "https://stackoverflow.com/users/6176817/pesathe"}, "edited": false, "score": 0, "creation_date": 1515114231, "post_id": 48105686, "comment_id": 83187339, "body": "It wasn&#39;t me, if you are implying that :)"}, {"owner": {"reputation": 83048, "user_id": 2255089, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZNAsT.jpg?s=128&g=1", "display_name": "Casimir et Hippolyte", "link": "https://stackoverflow.com/users/2255089/casimir-et-hippolyte"}, "reply_to_user": {"reputation": 6598, "user_id": 6176817, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/s0NIX.jpg?s=128&g=1", "display_name": "PesaThe", "link": "https://stackoverflow.com/users/6176817/pesathe"}, "edited": false, "score": 0, "creation_date": 1515114341, "post_id": 48105686, "comment_id": 83187372, "body": "@PesaThe: Don&#39;t worry of that, I know."}, {"owner": {"reputation": 46858, "user_id": 967492, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/526ea226101e199d029049dda22a4e58?s=128&d=identicon&r=PG", "display_name": "potong", "link": "https://stackoverflow.com/users/967492/potong"}, "edited": false, "score": 0, "creation_date": 1515115756, "post_id": 48105686, "comment_id": 83187704, "body": "This does not appear to work if the input is  &#39;xxzazz&#39;"}], "tags": [], "owner": {"reputation": 83048, "user_id": 2255089, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZNAsT.jpg?s=128&g=1", "display_name": "Casimir et Hippolyte", "link": "https://stackoverflow.com/users/2255089/casimir-et-hippolyte"}, "is_accepted": false, "score": 0, "last_activity_date": 1515115775, "last_edit_date": 1515115775, "creation_date": 1515113104, "answer_id": 48105686, "question_id": 48105521, "link": "https://stackoverflow.com/questions/48105521/replace-multiple-occurrences-between-two-strings/48105686#48105686", "title": "Replace multiple occurrences between two strings", "body": "<p>You have to describe all that isn't <code>zz</code> <em>(a character that isn't a <code>z</code> or a <code>z</code> followed by an other character)</em> before and after the <code>a</code> until the <code>zz</code> and to use a label and a conditional test to process the line until there is no more <code>a</code> between <code>xx</code> and <code>zz</code> :</p>\n\n<pre><code>sed -E ':a;s/(xx([^z]|z[^z])*z?)a(([^z]|z[^z])*zz)/\\1hello\\3/g;ta' file\n</code></pre>\n\n<hr>\n\n<p>A Perl way:</p>\n\n<pre><code>perl -pe's/(?:\\G(?!^)|xx(?=.*zz))[^za]*(?:z(?!z)[^za]*)*\\Ka/hello/g' file\n</code></pre>\n\n<p>that can be easily changed to:</p>\n\n<pre><code>perl -pe's/(?:\\G(?!^)|xxxxxx(?=.*zzzzzz))[^za]*(?:z(?!zzzzz)[^za]*)*\\Ka/hello/g' file\n</code></pre>\n\n<p>to deal with <code>xxxxxx</code> and <code>zzzzzz</code></p>\n"}, {"tags": [], "owner": {"reputation": 46858, "user_id": 967492, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/526ea226101e199d029049dda22a4e58?s=128&d=identicon&r=PG", "display_name": "potong", "link": "https://stackoverflow.com/users/967492/potong"}, "is_accepted": false, "score": 2, "last_activity_date": 1515115530, "creation_date": 1515115530, "answer_id": 48105940, "question_id": 48105521, "link": "https://stackoverflow.com/questions/48105521/replace-multiple-occurrences-between-two-strings/48105940#48105940", "title": "Replace multiple occurrences between two strings", "body": "<p>This might work for you (GNU sed):</p>\n\n<pre><code>sed -r ':a;s/zz/\\n/;:b;tb;s/(xx[^\\na]*)a([^\\n]*\\n)/\\1hello\\2/;tb;/zz/ba;s/\\n/zz/g' file\n</code></pre>\n\n<p>This replaces <code>zz</code> with newline and then replaces any <code>a</code>'s between <code>xx</code> and a newline with <code>hello</code>.</p>\n\n<p>N.B. It is possible to have any number of <code>xx</code> that are not paired with <code>zz</code> and any <code>a</code>'s between them will be substituted.</p>\n"}, {"tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": false, "score": 1, "last_activity_date": 1515208779, "last_edit_date": 1515208779, "creation_date": 1515131774, "answer_id": 48107966, "question_id": 48105521, "link": "https://stackoverflow.com/questions/48105521/replace-multiple-occurrences-between-two-strings/48107966#48107966", "title": "Replace multiple occurrences between two strings", "body": "<p>There may be an award for a regex-only solution, but here is a straightforward one.</p>\n\n<p>Split the string by <code>xx</code>. Iterate over terms and replace <code>a</code> in each term's part up to <code>zz</code>.</p>\n\n<p>I replace <code>a</code> to <code>-</code> for easy reviewing. The begin and stop patterns are in <code>$pb</code> and <code>$pe</code>.</p>\n\n<pre><code>perl -wE'$_ = q(a xxab abzz ca xxbczz aaa axxazza); say; \n    $pb = qr(xx); $pe = qr(zz); \n    ($r, @t) = split /($pb)/; \n    for (@t) { \n        if (/^$pb$/) { $r.=$_, next }; \n        /(.*?)($pe.*)/; \n        if ($m = $1) { $m =~ s/a/-/g; $r .= $m} \n        $r .= $2 if $2 \n    }; say $r\n'\n</code></pre>\n\n<p>This is in a form that is ready to test but it should be a script. It prints</p>\n\n<pre>\na xxab abzz ca xxbczz aaa axxazza\na xx-b -bzz ca xxbczz aaa axx-zza\n</pre>\n\n<p>I've tested with a few more strings but by all means please test more.</p>\n\n<p>This can also be done with a regex but that is much more advanced and harder to understand.</p>\n"}, {"tags": [], "owner": {"reputation": 5455, "user_id": 3961170, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/PtFol.jpg?s=128&g=1", "display_name": "mkHun", "link": "https://stackoverflow.com/users/3961170/mkhun"}, "is_accepted": false, "score": 3, "last_activity_date": 1515152780, "last_edit_date": 1515152780, "creation_date": 1515135177, "answer_id": 48108606, "question_id": 48105521, "link": "https://stackoverflow.com/questions/48105521/replace-multiple-occurrences-between-two-strings/48108606#48108606", "title": "Replace multiple occurrences between two strings", "body": "<p>You can try this Perl method </p>\n\n<pre><code>perl -E '$_=\"a xxab abzz ca xxbczz aaa axxazza xxczzaxxczz\";\ns{xx(.+?)zz}{\"xx\".$1=~s/a/hello/gr.\"zz\"}xge; \nsay $_ ; '\n</code></pre>\n\n<p>Explanation</p>\n\n<pre><code>s{\n   xx(.+?)zz #grouping the content\n }\n {\n   \"xx\".$1=~s/a/hello/gr.\"zz\" #again making the substitution for $1 and concatenating `xx` and `zz`  \n }xge;\n</code></pre>\n\n<p>Flags</p>\n\n<p><code>g</code> -> global</p>\n\n<p><code>r</code> -> non destructive modifier</p>\n\n<p><code>e</code> -> eval.</p>\n\n<p>with look arounds</p>\n\n<pre><code>perl -E '$_=\"a xxab abzz ca xxbczz aaa axxazza xxczzaxxczz\";\ns{(?&lt;=xx)(.+?)(?=zz)}{$1=~s/a/hello/gr}xge; \nsay $_ ; '\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 6598, "user_id": 6176817, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/s0NIX.jpg?s=128&g=1", "display_name": "PesaThe", "link": "https://stackoverflow.com/users/6176817/pesathe"}, "edited": false, "score": 0, "creation_date": 1515164324, "post_id": 48111019, "comment_id": 83208302, "body": "I had a hard time choosing of all the great solutions here. This one makes the most sense to me with my limited <code>perl</code> knowledge. Thanks!"}, {"owner": {"reputation": 6598, "user_id": 6176817, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/s0NIX.jpg?s=128&g=1", "display_name": "PesaThe", "link": "https://stackoverflow.com/users/6176817/pesathe"}, "edited": false, "score": 0, "creation_date": 1515190495, "post_id": 48111019, "comment_id": 83220774, "body": "Also, I would love to hear the reason of someone&#39;s downvote here."}, {"owner": {"reputation": 5455, "user_id": 3961170, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/PtFol.jpg?s=128&g=1", "display_name": "mkHun", "link": "https://stackoverflow.com/users/3961170/mkhun"}, "reply_to_user": {"reputation": 6598, "user_id": 6176817, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/s0NIX.jpg?s=128&g=1", "display_name": "PesaThe", "link": "https://stackoverflow.com/users/6176817/pesathe"}, "edited": false, "score": 1, "creation_date": 1515406965, "post_id": 48111019, "comment_id": 83274756, "body": "@PesaThe I&#39;m not downvoted. Hope, there is no explanation in the answer or the answer is same as <a href=\"https://stackoverflow.com/questions/48105521/replace-multiple-occurrences-between-two-strings/48108606#48108606\">this</a> answer."}], "tags": [], "owner": {"reputation": 25491, "user_id": 49197, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/15ebf24a33a29b9efbf9924f530dd736?s=128&d=identicon&r=PG", "display_name": "Hynek -Pichi- Vychodil", "link": "https://stackoverflow.com/users/49197/hynek-pichi-vychodil"}, "is_accepted": true, "score": 3, "last_activity_date": 1515146179, "last_edit_date": 1515146179, "creation_date": 1515145869, "answer_id": 48111019, "question_id": 48105521, "link": "https://stackoverflow.com/questions/48105521/replace-multiple-occurrences-between-two-strings/48111019#48111019", "title": "Replace multiple occurrences between two strings", "body": "<p>Yes, it's best to use Perl</p>\n\n<pre><code>perl -pe's/xx(.+?)zz/\"xx\".$1=~s|a|hello|gr.\"zz\"/ge' file.txt\n</code></pre>\n"}], "owner": {"reputation": 6598, "user_id": 6176817, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/s0NIX.jpg?s=128&g=1", "display_name": "PesaThe", "link": "https://stackoverflow.com/users/6176817/pesathe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 762, "favorite_count": 2, "accepted_answer_id": 48111019, "answer_count": 6, "score": 4, "last_activity_date": 1515208779, "creation_date": 1515111806, "last_edit_date": 1515120012, "question_id": 48105521, "link": "https://stackoverflow.com/questions/48105521/replace-multiple-occurrences-between-two-strings", "title": "Replace multiple occurrences between two strings", "body": "<p>I need to replace <strong>every</strong> character <code>a</code> between <code>xx</code> and <code>zz</code> with <code>hello</code>:</p>\n\n<pre><code>#input\na xxab abzz ca xxbczz aaa axxazza xxczzaxxczz\n#output\na xxhellob hellobzz ca xxbczz aaa axxhellozza xxczzaxxczz\n</code></pre>\n\n<p>This works for one pair, it doesn't work for more <code>xx/zz</code> pairs (it replaces every <code>a</code> between the first <code>xx</code> and last <code>zz</code>):</p>\n\n<pre><code>sed -r ':rep; s/(xx.*)a(.*zz)/\\1hello\\2/; trep'\n</code></pre>\n\n<hr>\n\n<p>I assume the best approach is to use more advanced regex, such as <code>perl</code>.</p>\n\n<p>I am looking for a solution in <code>bash</code>, <code>sed</code>, <code>awk</code> or <code>perl</code>. Is this task even possible with basic/extended regex? Solutions that will not become hard to digest when the pairs have more characters (for example <code>xxxxxx/zzzzzz</code>) are preferred.</p>\n"}, {"tags": ["multithreading", "perl", "thread-synchronization"], "comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1515104742, "post_id": 48102800, "comment_id": 83184582, "body": "I take this as a toy example made up to accommodate a complete question about thread synchronization.  If not, what is described is much too little to spread across threads.  In Perl in particular, threads are heavy and you normally want a few of them each doing more work rather than many each doing little. The good advice you got in the last part of the <a href=\"https://stackoverflow.com/a/48103050/4653379\">answer by Zac B</a> applies even (much) more in Perl."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1515132607, "post_id": 48102800, "comment_id": 83191521, "body": "(I meant to say that threads are heavy in Perl, not in general...)"}, {"owner": {"reputation": 3227, "user_id": 249199, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/0878f26eba467efc1d90fc6959b9b531?s=128&d=identicon&r=PG", "display_name": "Zac B", "link": "https://stackoverflow.com/users/249199/zac-b"}, "edited": false, "score": 0, "creation_date": 1515177015, "post_id": 48102800, "comment_id": 83214927, "body": "Truth! Well, they&#39;re heavi<i>er</i> in Perl than some other runtimes, but are heavy in general too :) Unless you&#39;re using green threads (e.g. Go, Stackless) or some other system that coordinates multiplexing work onto &quot;real&quot; OS threads without the programmer noticing, setup/teardown is still surprisingly expensive."}], "answers": [{"tags": [], "owner": {"reputation": 3227, "user_id": 249199, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/0878f26eba467efc1d90fc6959b9b531?s=128&d=identicon&r=PG", "display_name": "Zac B", "link": "https://stackoverflow.com/users/249199/zac-b"}, "is_accepted": false, "score": 5, "last_activity_date": 1515107043, "last_edit_date": 1515107043, "creation_date": 1515097541, "answer_id": 48103050, "question_id": 48102800, "link": "https://stackoverflow.com/questions/48102800/how-to-control-multi-threads-synchronization-in-perl/48103050#48103050", "title": "How to control multi-threads synchronization in Perl", "body": "<p>You're looking for <code>$thread-&gt;join</code>, which waits for a thread to finish. It's documented <a href=\"https://perldoc.perl.org/threads.html\" rel=\"nofollow noreferrer\">here</a>, and <a href=\"https://stackoverflow.com/questions/2453432/in-perl-how-can-i-wait-for-threads-to-end-in-parallel\">this SO question</a> may also help.</p>\n\n<p>Since in your case it looks like the work being done in the threads is roughly equal in cost (no thread is going to take a long time more than any other), you can just <code>join</code> each thread in order, like so, to wait for them all to finish:</p>\n\n<pre><code># Store all the threads for each letter in an array.\nmy @threads = map { thread-&gt;new(\\sub{ return chr($_); }) } @alphabet;\nmy @results = map { $_-&gt;join } @threads;\n</code></pre>\n\n<p>Since, when the first thread returns from <code>join</code>, the others are likely already done and just waiting for \"join\" to grab their return code, or about to be done, this gets you pretty close to \"as fast as possible\" parallelism-wise, and, since the threads were created in order, <code>@results</code> is ordered already for free.</p>\n\n<p>Now, if your threads <em>can</em> take variable amounts of time to finish, or if you need to do some time-consuming processing in the \"main\"/spawning thread before plugging child threads' results into the output data structure, <code>join</code>ing them in order might not be so good. In that case, you'll need to somehow either: a) detect thread \"exit\" events as they happen, or b) poll to see which threads have exited. </p>\n\n<p>You can detect thread \"exit\" events using signals/notifications sent from the child threads to the main/spawning thread. The easiest/most common way to do that is to use the <code>cond_wait</code> and <code>cond_signal</code> functions from <a href=\"https://metacpan.org/pod/threads::shared\" rel=\"nofollow noreferrer\"><code>threads::shared</code></a>. Your main thread would wait for signals from child threads, process their output, and store it into the result array. If you take this approach, you should preallocate your result array to the right size, and provide the output index to your threads (e.g. use a C-style <code>for</code> loop when you create your threads and have them return <code>($result, $index_to_store)</code> or similar) so you can store results in the right place even if they are out of order.</p>\n\n<p>You can poll which threads are done using the <code>is_joinable</code> thread instance method, or using the <code>threads-&gt;list(threads::joinable)</code> and <code>threads-&gt;list(threads::running)</code> methods in a loop (hopefully not a busy-waiting one; adding a sleep call--even a subsecond one from <a href=\"https://metacpan.org/pod/Time::HiRes\" rel=\"nofollow noreferrer\"><code>Time::HiRes</code></a>--will save a lot of performance/battery in this case) to detect when things are done and grab their results.</p>\n\n<p><strong>Important Caveat</strong>: spawning a huge number of threads to perform a lot of work in parallel, especially if that work is small/quick to complete, can cause performance problems, and it might be better to use a smaller number of threads that each do more than one \"piece\" of work (e.g. spawn a small number of threads, and each thread uses the <code>threads::shared</code> functions to lock and pop the first item off of a shared array of \"work to do\" and do it rather than map work to threads as 1:1). There are two main performance problems that arise from a 1:1 mapping:</p>\n\n<ol>\n<li>the overhead (in memory and time) of spawning and joining each thread is much higher than you'd think (<a href=\"https://metacpan.org/pod/Benchmark\" rel=\"nofollow noreferrer\">benchmark</a> it on threads that don't do anything, just <code>return</code>, to see). If the work you need to do is fast, the overhead of thread management for tons of threads can make it much slower than just managing a few re-usable threads.</li>\n<li><p>If you end up with a lot more threads than there are logical CPU cores and each thread is doing CPU-intensive work, or if each thread is accessing the same resource (e.g. reading from the same disks or the same rows in a database), you hit a performance cliff pretty quickly. Tuning the number of threads to the \"resources\" underneath (whether those are CPUs or hard drives or whatnot) tends to yield much better throughput than trusting the thread scheduler to switch between many more threads than there are available resources to run them on. The reasons this is slow are, very broadly:</p></li>\n<li><p>Because the thread scheduler (part of the OS, not the language) can't know enough about what each thread is trying to do, so <a href=\"https://en.wikipedia.org/wiki/Preemption_(computing)\" rel=\"nofollow noreferrer\">preemptive scheduling</a> cannot optimize for performance past a certain point, given that limited knowledge.</p></li>\n<li>The OS usually tries to give most threads a reasonably fair shot, so it can't reliably say \"let one run to completion and then run the next one\" unless you explicitly bake that into the code (since the alternative would be unpredictably starving certain threads for opportunities to run). Basically, switching between \"run a slice of thread 1 on resource X\" and \"run a slice of thread 2 on resource X\" doesn't get you anything once you have more threads than resources, and adds some overhead as well.</li>\n</ol>\n\n<p>TL;DR threads don't give you performance increases past a certain point, and after that point they can make performance <em>worse</em>. When you can, reuse a number of threads corresponding to available resources; don't create/destroy individual threads corresponding to tasks that need to be done.</p>\n"}, {"comments": [{"owner": {"reputation": 25491, "user_id": 49197, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/15ebf24a33a29b9efbf9924f530dd736?s=128&d=identicon&r=PG", "display_name": "Hynek -Pichi- Vychodil", "link": "https://stackoverflow.com/users/49197/hynek-pichi-vychodil"}, "edited": false, "score": 0, "creation_date": 1515147820, "post_id": 48107280, "comment_id": 83198735, "body": "Wow, so much work for which you need two simple lines in Erlang <a href=\"https://stackoverflow.com/a/20573151/49197\">stackoverflow.com/a/20573151/49197</a>"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 25491, "user_id": 49197, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/15ebf24a33a29b9efbf9924f530dd736?s=128&d=identicon&r=PG", "display_name": "Hynek -Pichi- Vychodil", "link": "https://stackoverflow.com/users/49197/hynek-pichi-vychodil"}, "edited": false, "score": 1, "creation_date": 1515176359, "post_id": 48107280, "comment_id": 83214643, "body": "@Hynek -Pichi- Vychodil,  Same in Perl. See update. :) (Pity the worker sub can be defined when the job is added, though. That said, it&#39;s just a question of writing the interface.)"}, {"owner": {"reputation": 25491, "user_id": 49197, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/15ebf24a33a29b9efbf9924f530dd736?s=128&d=identicon&r=PG", "display_name": "Hynek -Pichi- Vychodil", "link": "https://stackoverflow.com/users/49197/hynek-pichi-vychodil"}, "edited": false, "score": 0, "creation_date": 1515322614, "post_id": 48107280, "comment_id": 83250185, "body": "Well, it&#39;s better. ;-)"}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 2, "last_activity_date": 1515176340, "last_edit_date": 1515176340, "creation_date": 1515127381, "answer_id": 48107280, "question_id": 48102800, "link": "https://stackoverflow.com/questions/48102800/how-to-control-multi-threads-synchronization-in-perl/48107280#48107280", "title": "How to control multi-threads synchronization in Perl", "body": "<p>Building on Zac B's answer, you can use the following if you want to reuse threads:</p>\n\n<pre><code>use strict;\nuse warnings;\n\nuse Thread::Pool::Simple qw( );\n\n$| = 1;\n\nmy $pool = Thread::Pool::Simple-&gt;new(\n   do =&gt; [ sub {\n      select(undef, undef, undef, (200+int(rand(8))*100)/1000);\n      return chr($_[0]);\n   } ],\n);\n\nmy @alphabet = ( 65..90, 97..122 );\n\nprint $pool-&gt;remove($_) for map { $pool-&gt;add($_) } @alphabet;\nprint \"\\n\";\n</code></pre>\n\n<p>The results are returned in order, as soon as they become available.</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 9193587, "user_type": "registered", "profile_image": "https://graph.facebook.com/875248272560969/picture?type=large", "display_name": "Joelle Maslak", "link": "https://stackoverflow.com/users/9193587/joelle-maslak"}, "is_accepted": false, "score": 0, "last_activity_date": 1515508193, "creation_date": 1515508193, "answer_id": 48170384, "question_id": 48102800, "link": "https://stackoverflow.com/questions/48102800/how-to-control-multi-threads-synchronization-in-perl/48170384#48170384", "title": "How to control multi-threads synchronization in Perl", "body": "<p>I'm the author of Parallel::WorkUnit so I'm partial to it.  And I thought adding ordered responses was actually a great idea.  It does it with forks, not threads, because forks are more widely supported and they often perform better in Perl.</p>\n\n<pre><code>my $wu = Parallel::WorkUnit-&gt;new();\nfor my $ascii(@alphabet){\n    $wu-&gt;async(sub{ return chr($ascii); });\n}\n@output = $wu-&gt;waitall();\n</code></pre>\n\n<p>If you want to limit the number of simultaneous processes:</p>\n\n<pre><code>my $wu = Parallel::WorkUnit-&gt;new(max_children =&gt; 5);\nfor my $ascii(@alphabet){\n    $wu-&gt;queue(sub{ return chr($ascii); });\n}\n@output = $wu-&gt;waitall();\n</code></pre>\n"}], "owner": {"reputation": 51, "user_id": 1453914, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/d5d90ca4050b8c2c973b7701b60afc65?s=128&d=identicon&r=PG", "display_name": "Kamil Hajduk", "link": "https://stackoverflow.com/users/1453914/kamil-hajduk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 335, "favorite_count": 0, "answer_count": 3, "score": 3, "last_activity_date": 1515508193, "creation_date": 1515096451, "question_id": 48102800, "link": "https://stackoverflow.com/questions/48102800/how-to-control-multi-threads-synchronization-in-perl", "title": "How to control multi-threads synchronization in Perl", "body": "<p>I got array with [a-z,A-Z] ASCII numbers like so: <code>my @alphabet = (65..90,97..122);</code></p>\n\n<p>So main thread functionality is checking each character from alphabet and return string if condition is true. </p>\n\n<p>Simple example :</p>\n\n<pre><code>    my @output = ();\n    for my $ascii(@alphabet){\n      thread-&gt;new(\\sub{ return chr($ascii); });\n    }\n</code></pre>\n\n<p>I want to run thread on every ASCII number, then put letter from thread function into array in the correct order.</p>\n\n<p>So in out case array <code>@output</code> should be dynamic and contain <code>[a..z,A-Z]</code> after all threads finish their job. </p>\n\n<p>How to check, is all threads is done and keep the order?</p>\n"}, {"tags": ["perl", "cgi", "require"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1515088551, "post_id": 48100717, "comment_id": 83176999, "body": "Is <code>$number</code> already a CGI param, or a different value?"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1515088796, "post_id": 48100717, "comment_id": 83177138, "body": "@mob your answer was almost correct."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1515090823, "post_id": 48100717, "comment_id": 83178111, "body": "For starters, don&#39;t use <code>require</code> for .pl files. You should be using <code>do</code>."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1515178332, "post_id": 48100717, "comment_id": 83215595, "body": "<i>&quot;Is there any way to do this without rewriting the second script as a module?&quot;</i> Doing that rewrite is almost certainly the correct option, but a lot depends on what <code>two.pl</code> actually does. There is a pitfall with the <code>require</code> solution and it is the wrong choice. Persisting with it may suit your purposes, but you are condemning others to deal with hard-to-find bugs."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1515180640, "post_id": 48100717, "comment_id": 83216649, "body": "I think we need to see what <code>one.pl</code> and <code>two.pl</code> contain so that we can better understand what you&#39;re trying to do. If you can reduce it to just a few lines of code that we can run ourselves then that would be excellent!"}], "answers": [{"comments": [{"owner": {"reputation": 21, "user_id": 4934573, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34838532ecbe69cf229b52315d73f082?s=128&d=identicon&r=PG&f=1", "display_name": "JMac", "link": "https://stackoverflow.com/users/4934573/jmac"}, "edited": false, "score": 0, "creation_date": 1515098025, "post_id": 48101052, "comment_id": 83181664, "body": "Thanks @simbabque. I got it to work by editing <code>one.pl</code> to use CGI as well."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1515177262, "post_id": 48101052, "comment_id": 83215042, "body": "@simbabque: Embarrassingly it hadn&#39;t hit me that this required a shell, but my <i>&quot;or the equivalent&quot;</i> was meant to include <code>system &#39;two.pl&#39;, &quot;number=$number&quot;</code> which should be implemented within perl. I also question the use of <code>require</code>, which inappropriately searches <code>@INC</code> and adds to <code>%INC</code>, but most importantly will not execute the file again if there is a <code>%INC</code> entry that matches. <code>require</code> is meant only to load definitions, and it doesn&#39;t work for executable code. You need <code>do</code> (or <code>system</code> or backticks) and I&#39;ve had to give you a down vote."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1515178102, "post_id": 48101052, "comment_id": 83215465, "body": "@simbabque: I would also say that <i>&quot;because we are not executing it in a new shell&quot;</i> is an unfounded assumption: it is your choice for a solution. The OP says <i>&quot;I want to pass a CGI variable to the second script&quot;</i> so it sounds like just <i>one</i> environment variable needs to be communicated. There&#39;s certainly no reason to stay within the current process apart from the obvious overhead of starting a new process for whatever <code>two.pl</code> does."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1515179314, "post_id": 48101052, "comment_id": 83216096, "body": "@Borodin you&#39;re right that the <code>require</code> is not very reasonable. But ikegami had already pointed out that <code>do</code> makes more sense, and for the answer itself it doesn&#39;t matter. The OP doesn&#39;t say how they call the script. They had <code>require</code>, so I stuck with require. I just meant to explain that method of faking the CGI environment."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1515180349, "post_id": 48101052, "comment_id": 83216525, "body": "@simbabque: I don&#39;t think the OP&#39;s strategy should be considered to be a constraint: someone who will try <code>require &quot;two.pl $number&quot;</code> is casting about for anything that may work. Meanwhile, there is a hole in your answer that has gone undeclared: that <code>require</code> will only ever work once, and once <b><i>ever</i></b> if we&#39;re talking about modperl or similar here."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1515180474, "post_id": 48101052, "comment_id": 83216582, "body": "@simbabque: I also think that, given the OP&#39;s apparent expertise, you should be careful to define what you mean by <i>&quot;in a CGI environment&quot;</i>. Anyone who understands process environments pretty much have the answer already."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1515180710, "post_id": 48101052, "comment_id": 83216688, "body": "Fair enough @borodin. Better?"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1515181463, "post_id": 48101052, "comment_id": 83217020, "body": "@simbabque: A little, but my point is that <code>require &#39;two.pl&#39;; require &#39;two.pl&#39;;</code> will execute the code <i>only once</i>, because <code>require</code> is supposed <i>only to load definitions</i>. The OP is trying to use it as a weird subroutine call, which won&#39;t work. I believe that their <i>&quot;without rewriting <code>two.pl</code> as a Perl module&quot;</i> is misguided and should be discouraged, but without sight of the code we can only guess."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1515181702, "post_id": 48101052, "comment_id": 83217112, "body": "@Borodin I did say that you can only run it once like that."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1515190599, "post_id": 48101052, "comment_id": 83220808, "body": "@simbabque: You said <i>&quot;you can only ever <code>require</code> a script once&quot;</i>, and that was in an addendum. I am certain that the OP would be willing to accept your solution wholesale and consider any addenda as irrelevant provisos. That addition belongs right at the top of your answer, together with a disclaimer to explain that it will work only once. Or you could just use <code>do</code>, and ask about the contents of <code>one.pl</code> and <code>two.pl</code>.I know what you mean, but I doubt that the OP has the same understanding."}, {"owner": {"reputation": 21, "user_id": 4934573, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34838532ecbe69cf229b52315d73f082?s=128&d=identicon&r=PG&f=1", "display_name": "JMac", "link": "https://stackoverflow.com/users/4934573/jmac"}, "edited": false, "score": 0, "creation_date": 1515278207, "post_id": 48101052, "comment_id": 83242254, "body": "Using <code>require</code> is suitable in my scenario as <code>two.pl</code> should/can only ever be called once (in terms of the logic of the application). Refactoring the script into a module is not an option for me as it is not feasible due to its complexity and dependence on several other Perl scripts/external programs."}], "tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": true, "score": 1, "last_activity_date": 1515180883, "last_edit_date": 1515180883, "creation_date": 1515088930, "answer_id": 48101052, "question_id": 48100717, "link": "https://stackoverflow.com/questions/48100717/calling-one-perl-script-from-another-passing-a-cgi-parameter/48101052#48101052", "title": "Calling one Perl script from another, passing a CGI parameter", "body": "<h2>If <em>one.pl</em> is not in a CGI environment</h2>\n\n<p>If your <em>one.pl</em> is a shell script, you can set <code>@ARGV</code> before the call to <code>require</code>. This abuses <a href=\"https://metacpan.org/pod/distribution/CGI/lib/CGI.pod\" rel=\"nofollow noreferrer\">CGI</a>'s mode to work with command line arguments. The arg needs to be the param name equals the value.</p>\n\n<pre><code>{\n    my $number = 5;\n    local @ARGV = ( \"number=$number\" );\n    require \"two.pl\";\n}\n</code></pre>\n\n<p>The <code>key=value</code> format is important. The <a href=\"http://perldoc.perl.org/functions/local.html\" rel=\"nofollow noreferrer\"><code>local</code> keyword</a> makes sure that <code>@ARGV</code> is only set inside the block, making sure other possible arguments to your script are not permanently lost, but rather invisible to <em>two.pl</em>.</p>\n\n<h2>If <em>one.pl</em> is in a CGI environment</h2>\n\n<ul>\n<li>If the param is already there, you don't have to do anything.</li>\n<li>Else, see above.</li>\n</ul>\n\n<hr>\n\n<p>Note that for both of these you can only ever <code>require</code> a script once. That's the idea of <code>require</code>. Perl keeps track of what it's loaded already (in <code>%INC</code>). If you are in an environment like <code>mod_perl</code>, or a modern Perl application that runs persistently, you should use <code>do \"two.pl\"</code> instead, which will execute it every time. But then that might break other things if <em>two.pl</em> is not designed to be ran multiple times in the same process.</p>\n\n<p>Your best bet is to refactor the code inside <em>two.pl</em> into a module, and use that in both scripts.</p>\n"}], "owner": {"reputation": 21, "user_id": 4934573, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34838532ecbe69cf229b52315d73f082?s=128&d=identicon&r=PG&f=1", "display_name": "JMac", "link": "https://stackoverflow.com/users/4934573/jmac"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 505, "favorite_count": 0, "accepted_answer_id": 48101052, "answer_count": 1, "score": 0, "last_activity_date": 1515278273, "creation_date": 1515087618, "last_edit_date": 1515278273, "question_id": 48100717, "link": "https://stackoverflow.com/questions/48100717/calling-one-perl-script-from-another-passing-a-cgi-parameter", "title": "Calling one Perl script from another, passing a CGI parameter", "body": "<p>I have two Perl scripts. Let's call them <code>one.pl</code> and <code>two.pl</code>.</p>\n\n<p><code>one.pl</code> processes some data and needs to call <code>two.pl</code>, passing a variable.</p>\n\n<p>In <code>one.pl</code> I can</p>\n\n<pre><code>require \"two.pl\"\n</code></pre>\n\n<p>to call the second script.</p>\n\n<p>That works fine, but I want to pass a CGI variable to <code>two.pl</code>.</p>\n\n<p>Is there any way to do this without rewriting <code>two.pl</code> as a Perl module?</p>\n\n<p>For example what I want is:</p>\n\n<h3>one.pl</h3>\n\n<pre><code>...\n\nrequire \"two.pl $number\";\n</code></pre>\n\n<h3>two.pl</h3>\n\n<pre><code>use CGI;\n\nmy $cgi = new CGI;\n\nmy $number = $cgi-&gt;param('number');\n\n...\n</code></pre>\n\n<hr>\n\n<p><strong>EDIT:</strong> <code>two.pl</code> should only ever be called once</p>\n"}, {"tags": ["perl"], "answers": [{"comments": [{"owner": {"reputation": 478, "user_id": 3261294, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e04c85709847a658e1699565b21a363?s=128&d=identicon&r=PG&f=1", "display_name": "BarneySchmale", "link": "https://stackoverflow.com/users/3261294/barneyschmale"}, "edited": false, "score": 0, "creation_date": 1515086827, "post_id": 48100297, "comment_id": 83176121, "body": "For the sake of consistence, shouldn&#39;t this be @a = f(\\@a) in the first line?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 478, "user_id": 3261294, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e04c85709847a658e1699565b21a363?s=128&d=identicon&r=PG&f=1", "display_name": "BarneySchmale", "link": "https://stackoverflow.com/users/3261294/barneyschmale"}, "edited": false, "score": 0, "creation_date": 1515086870, "post_id": 48100297, "comment_id": 83176143, "body": "@BarneySchmale, No. The question was not specifically about taking a reference, and neither is my answer. <code>f(@a)</code> can be <code>func(\\@a)</code> or any other function."}, {"owner": {"reputation": 478, "user_id": 3261294, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e04c85709847a658e1699565b21a363?s=128&d=identicon&r=PG&f=1", "display_name": "BarneySchmale", "link": "https://stackoverflow.com/users/3261294/barneyschmale"}, "edited": false, "score": 0, "creation_date": 1515087470, "post_id": 48100297, "comment_id": 83176444, "body": "Actually the question was about the case when @array is passed as a reference."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 478, "user_id": 3261294, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e04c85709847a658e1699565b21a363?s=128&d=identicon&r=PG&f=1", "display_name": "BarneySchmale", "link": "https://stackoverflow.com/users/3261294/barneyschmale"}, "edited": false, "score": 0, "creation_date": 1515087573, "post_id": 48100297, "comment_id": 83176490, "body": "@BarneySchmale, &quot;func is an arbitrary perl builtin&quot;"}, {"owner": {"reputation": 478, "user_id": 3261294, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e04c85709847a658e1699565b21a363?s=128&d=identicon&r=PG&f=1", "display_name": "BarneySchmale", "link": "https://stackoverflow.com/users/3261294/barneyschmale"}, "edited": false, "score": 0, "creation_date": 1515088722, "post_id": 48100297, "comment_id": 83177089, "body": "&quot;func is an arbitrary perl builtin or user defined function that may or may not modify @array passed by reference&quot;"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 478, "user_id": 3261294, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e04c85709847a658e1699565b21a363?s=128&d=identicon&r=PG&f=1", "display_name": "BarneySchmale", "link": "https://stackoverflow.com/users/3261294/barneyschmale"}, "edited": false, "score": 0, "creation_date": 1515089365, "post_id": 48100297, "comment_id": 83177416, "body": "@BarneySchmale, Exactly. Again, if I made my answer as restrictive as you requested, it would not cover all that. Now, please stop spamming because I made the answer more useful than you want it to be."}, {"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 0, "creation_date": 1515106092, "post_id": 48100297, "comment_id": 83185070, "body": "@ikegami I too did not take your <code>func(@array)</code> as necessarily including <code>func(\\@array)</code>"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 0, "creation_date": 1515108081, "post_id": 48100297, "comment_id": 83185688, "body": "Yes everyone, functions can take references! Made clear in answer. @ysth"}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 4, "last_activity_date": 1515107843, "last_edit_date": 1515107843, "creation_date": 1515085974, "answer_id": 48100297, "question_id": 48099732, "link": "https://stackoverflow.com/questions/48099732/is-the-assignment-array-func-array-well-behaved-in-perl/48100297#48100297", "title": "Is the assignment @array = func(\\@array) well behaved in perl?", "body": "<p>Yes. <code>$x = some_combination_of_operators($x)</code> and <code>@a = some_combination_of_operators(@a)</code> are common practice.</p>\n\n<p>The operand evaluation order of the assignment operators are not explicitly documented, but <code>my $x = $x;</code> and <code>local $x = $x;</code> are documented. As an another example, <code>@a = sort @a;</code> is not only common, it's optimized (to do the sort in-place). This demonstrates support for the construct in question. Even funky stuff like <code>($x,$y)=($y,$x);</code> is fully supported.</p>\n\n<p>Finally, there's only one Perl compiler, which always produces the same result.</p>\n\n<pre><code>$ perl -MO=Concise,-exec -e'@array = func(\\@array);'\n1  &lt;0&gt; enter\n2  &lt;;&gt; nextstate(main 1 -e:1) v:{\n3  &lt;0&gt; pushmark s                   \\\n4  &lt;0&gt; pushmark s                   |\n5  &lt;#&gt; gv[*array] s                 |\n6  &lt;1&gt; rv2av[t5] lKRM/1              &gt; RHS of list assignment evaluated first\n7  &lt;1&gt; srefgen sKM/1                |\n8  &lt;#&gt; gv[*func] s/EARLYCV          |\n9  &lt;1&gt; entersub[t6] lKS/TARG        /\na  &lt;0&gt; pushmark s                   \\\nb  &lt;#&gt; gv[*array] s                  &gt; LHS of list assignment evaluated second\nc  &lt;1&gt; rv2av[t2] lKRM*/1            /\nd  &lt;2&gt; aassign[t7] vKS/COM_AGG\ne  &lt;@&gt; leave[1 ref] vKP/REFC\n-e syntax OK\n</code></pre>\n"}], "owner": {"reputation": 2389, "user_id": 429540, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/4a349a24d5fac7a1a0728f3fd9e0d413?s=128&d=identicon&r=PG", "display_name": "highsciguy", "link": "https://stackoverflow.com/users/429540/highsciguy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 73, "favorite_count": 1, "accepted_answer_id": 48100297, "answer_count": 1, "score": 1, "last_activity_date": 1515107843, "creation_date": 1515083970, "question_id": 48099732, "link": "https://stackoverflow.com/questions/48099732/is-the-assignment-array-func-array-well-behaved-in-perl", "title": "Is the assignment @array = func(\\@array) well behaved in perl?", "body": "<p>The title says it all: \nI am wondering whether perl statements like </p>\n\n<pre><code>@array = func(\\@array);\n</code></pre>\n\n<p>always behave determinisitic in perl, i.e. whether the evaluation of the right hand side completes before anything is stored in @array on the left hand side. <code>func</code> is an arbitrary perl builtin or user defined function that may or may not modify @array passed by reference.</p>\n"}, {"tags": ["linux", "bash", "perl", "awk", "sed"], "comments": [{"owner": {"reputation": 9406, "user_id": 4923629, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/2abZO.png?s=128&g=1", "display_name": "123", "link": "https://stackoverflow.com/users/4923629/123"}, "edited": false, "score": 2, "creation_date": 1515074934, "post_id": 48096785, "comment_id": 83168928, "body": "Where do the list and array come from? When you say use other languages, do you mean use them on bash vars, or just rewrite in them?"}, {"owner": {"reputation": 373, "user_id": 9115155, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/6cee14c2307aaf761698e79776f380e4?s=128&d=identicon&r=PG&f=1", "display_name": "enodmilvado", "link": "https://stackoverflow.com/users/9115155/enodmilvado"}, "reply_to_user": {"reputation": 9406, "user_id": 4923629, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/2abZO.png?s=128&g=1", "display_name": "123", "link": "https://stackoverflow.com/users/4923629/123"}, "edited": false, "score": 0, "creation_date": 1515075043, "post_id": 48096785, "comment_id": 83168996, "body": "yes they need to runs under bash script , about  list and array its only example , but in real this function read them from other function in the script , you can reconfigure the bash if you think you can do it much better"}, {"owner": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "edited": false, "score": 1, "creation_date": 1515075477, "post_id": 48096785, "comment_id": 83169276, "body": "The thing is shell was not designed for manipulating text. That&#39;s why the guys who invented shell also invented awk to be called from shell to manipulate text. So having a shell string and a shell array as a starting point is forcing a solution that&#39;s probably completely wrong for whatever you&#39;re really trying to do. If you provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> that shows where that string and that array are coming from we can help you more."}, {"owner": {"reputation": 32690, "user_id": 3266847, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/U0oyt.png?s=128&g=1", "display_name": "Benjamin W.", "link": "https://stackoverflow.com/users/3266847/benjamin-w"}, "edited": false, "score": 2, "creation_date": 1515077609, "post_id": 48096785, "comment_id": 83170578, "body": "Side note: if you do this: <code>for arr in ${array[*]}</code> you lose any advantage an array would have given you and you&#39;re subject to word splitting and path expansion. Always use <code>for arr in &quot;${array[@]}&quot;</code> to loop over arrays."}, {"owner": {"reputation": 2285, "user_id": 8592975, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56fea54eef1c73000439a2c38b53d422?s=128&d=identicon&r=PG&f=1", "display_name": "ctac_", "link": "https://stackoverflow.com/users/8592975/ctac"}, "edited": false, "score": 0, "creation_date": 1515083696, "post_id": 48096785, "comment_id": 83174277, "body": "This question is answered here <a href=\"https://unix.stackexchange.com/questions/413118/bash-how-to-verify-words-are-in-list-of-values/413147#413147\" title=\"bash how to verify words are in list of values\">unix.stackexchange.com/questions/413118/&hellip;</a>"}, {"owner": {"reputation": 2415, "user_id": 4251338, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UNbCO.png?s=128&g=1", "display_name": "ssr1012", "link": "https://stackoverflow.com/users/4251338/ssr1012"}, "edited": false, "score": 1, "creation_date": 1515151222, "post_id": 48096785, "comment_id": 83200599, "body": "I should think someone getting points while downvoting for all answers..."}, {"owner": {"reputation": 25491, "user_id": 49197, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/15ebf24a33a29b9efbf9924f530dd736?s=128&d=identicon&r=PG", "display_name": "Hynek -Pichi- Vychodil", "link": "https://stackoverflow.com/users/49197/hynek-pichi-vychodil"}, "edited": false, "score": 0, "creation_date": 1515522287, "post_id": 48096785, "comment_id": 83328529, "body": "Checkout this simple and efficient Perl oneliner <code>perl -e&#39;@h{split&#47; &#47;,shift}=();exists$h{$_}||exit 1 for@ARGV&#39; &quot;$list&quot; &quot;${array[@]}&quot; &amp;&amp; echo &quot;true&quot; || echo &quot;false&quot;</code>"}], "answers": [{"comments": [{"owner": {"reputation": 373, "user_id": 9115155, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/6cee14c2307aaf761698e79776f380e4?s=128&d=identicon&r=PG&f=1", "display_name": "enodmilvado", "link": "https://stackoverflow.com/users/9115155/enodmilvado"}, "edited": false, "score": 0, "creation_date": 1515076794, "post_id": 48097153, "comment_id": 83170106, "body": "can you convert your code to python one-liner , so I will set it in my bash ?"}, {"owner": {"reputation": 305, "user_id": 1118367, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7b1c5a15a9c878311a33a52fad0a9f84?s=128&d=identicon&r=PG", "display_name": "amasmiller", "link": "https://stackoverflow.com/users/1118367/amasmiller"}, "reply_to_user": {"reputation": 373, "user_id": 9115155, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/6cee14c2307aaf761698e79776f380e4?s=128&d=identicon&r=PG&f=1", "display_name": "enodmilvado", "link": "https://stackoverflow.com/users/9115155/enodmilvado"}, "edited": false, "score": 0, "creation_date": 1515076993, "post_id": 48097153, "comment_id": 83170214, "body": "[user@local ~] python -c &quot;list=&#39;sdb sdc sdd sde sdf sdg sdh sdi sdk sdj sdo&#39;; array=&#39;sdb sdd sde sdf sdg&#39;; print set(array.split(&#39; &#39;)).issubset(set(list.split(&#39; &#39;)));&quot;"}, {"owner": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "reply_to_user": {"reputation": 373, "user_id": 9115155, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/6cee14c2307aaf761698e79776f380e4?s=128&d=identicon&r=PG&f=1", "display_name": "enodmilvado", "link": "https://stackoverflow.com/users/9115155/enodmilvado"}, "edited": false, "score": 0, "creation_date": 1515077396, "post_id": 48097153, "comment_id": 83170458, "body": "@enodmilvado why are you asking people to cram their code onto one line?"}, {"owner": {"reputation": 373, "user_id": 9115155, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/6cee14c2307aaf761698e79776f380e4?s=128&d=identicon&r=PG&f=1", "display_name": "enodmilvado", "link": "https://stackoverflow.com/users/9115155/enodmilvado"}, "reply_to_user": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "edited": false, "score": 0, "creation_date": 1515077800, "post_id": 48097153, "comment_id": 83170693, "body": "@Ed Morton , I need to add this to my bash script"}, {"owner": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "edited": false, "score": 0, "creation_date": 1515077894, "post_id": 48097153, "comment_id": 83170752, "body": "OK but that&#39;s no reason to cram it all on one line. <code>command &#39;script&#39;</code> works just fine whether <code>script</code> is on one line or spread across multiple lines for any given <code>command</code>."}], "tags": [], "owner": {"reputation": 305, "user_id": 1118367, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7b1c5a15a9c878311a33a52fad0a9f84?s=128&d=identicon&r=PG", "display_name": "amasmiller", "link": "https://stackoverflow.com/users/1118367/amasmiller"}, "is_accepted": false, "score": -1, "last_activity_date": 1515075436, "creation_date": 1515075436, "answer_id": 48097153, "question_id": 48096785, "link": "https://stackoverflow.com/questions/48096785/bash-how-to-verify-the-words-in-array-are-contain-in-the-variable/48097153#48097153", "title": "BASH + how to verify the words in array are contain in the variable", "body": "<p>Here's a few lines of python that would do it.</p>\n\n<pre><code>[user@local ~/tmp/b] python\n\n&gt;&gt;&gt; list=\"sdb sdc sdd sde sdf sdg sdh sdi sdk sdj sdo\"\n&gt;&gt;&gt; array=\"sdb sdd sde sdf sdg\"\n&gt;&gt;&gt; set(array.split(\" \")).issubset(set(list.split(\" \")))\nTrue\n\n&gt;&gt;&gt; list=\"sdb sdc sdd sde sdf sdg sdh sdi sdk sdj sdo\"\n&gt;&gt;&gt; array=\"sdw sdd sde sdf sdg\"\n&gt;&gt;&gt; set(array.split(\" \")).issubset(set(list.split(\" \")))\nFalse\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 9406, "user_id": 4923629, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/2abZO.png?s=128&g=1", "display_name": "123", "link": "https://stackoverflow.com/users/4923629/123"}, "edited": false, "score": 0, "creation_date": 1515075498, "post_id": 48097158, "comment_id": 83169291, "body": "This is perl, OP is using bash vars. Also excludes comparing them entirely"}, {"owner": {"reputation": 2415, "user_id": 4251338, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UNbCO.png?s=128&g=1", "display_name": "ssr1012", "link": "https://stackoverflow.com/users/4251338/ssr1012"}, "reply_to_user": {"reputation": 9406, "user_id": 4923629, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/2abZO.png?s=128&g=1", "display_name": "123", "link": "https://stackoverflow.com/users/4923629/123"}, "edited": false, "score": 0, "creation_date": 1515075966, "post_id": 48097158, "comment_id": 83169568, "body": "&quot; <i>I wrote the following script in order to verify the words in array are contain in the $list variable</i> and tagged in <i>perl</i> also&quot;. Hence how to verify the arrays in one way validate or compare itself."}, {"owner": {"reputation": 373, "user_id": 9115155, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/6cee14c2307aaf761698e79776f380e4?s=128&d=identicon&r=PG&f=1", "display_name": "enodmilvado", "link": "https://stackoverflow.com/users/9115155/enodmilvado"}, "edited": false, "score": 0, "creation_date": 1515076588, "post_id": 48097158, "comment_id": 83169980, "body": "@ssr1012 can you convert your code to perl one liner , so I will set it in my bash ?"}, {"owner": {"reputation": 9406, "user_id": 4923629, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/2abZO.png?s=128&g=1", "display_name": "123", "link": "https://stackoverflow.com/users/4923629/123"}, "edited": false, "score": 0, "creation_date": 1515077121, "post_id": 48097158, "comment_id": 83170293, "body": "@ssr1012 I don&#39;t understand your comment, but OP clearly says in the comments <code>yes they need to runs under bash script</code>"}], "tags": [], "owner": {"reputation": 2415, "user_id": 4251338, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UNbCO.png?s=128&g=1", "display_name": "ssr1012", "link": "https://stackoverflow.com/users/4251338/ssr1012"}, "is_accepted": false, "score": -1, "last_activity_date": 1515075459, "creation_date": 1515075459, "answer_id": 48097158, "question_id": 48096785, "link": "https://stackoverflow.com/questions/48096785/bash-how-to-verify-the-words-in-array-are-contain-in-the-variable/48097158#48097158", "title": "BASH + how to verify the words in array are contain in the variable", "body": "<p>You can convert the scalar variable into array variable and compare both arrays (Not a single linear and probably there is a lot of way).</p>\n\n<pre><code>my $list = \"sdb sdc sdd sde sdf sdg sdh sdi sdk sdj sdo\";\nmy @listary = split / /, $list;\n\nmy @myarray = qw(sdb sdd sde sdf sdg);\n</code></pre>\n\n<blockquote>\n  <p>And please compare both <a href=\"https://stackoverflow.com/questions/2591747/how-can-i-compare-arrays-in-perl\">arrays</a></p>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 2841, "user_id": 2545194, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/ab05c442f50628acfcca2c70174f23e7?s=128&d=identicon&r=PG", "display_name": "Jdamian", "link": "https://stackoverflow.com/users/2545194/jdamian"}, "is_accepted": false, "score": -1, "last_activity_date": 1515079115, "creation_date": 1515079115, "answer_id": 48098287, "question_id": 48096785, "link": "https://stackoverflow.com/questions/48096785/bash-how-to-verify-the-words-in-array-are-contain-in-the-variable/48098287#48098287", "title": "BASH + how to verify the words in array are contain in the variable", "body": "<p>My solution is <code>awk</code> based and it turns the <code>list</code> into a regular expression in order to remove every word in the list from the array. If the result is empty, <code>true</code> is printed; otherwise <code>false</code> is printed. </p>\n\n<pre><code>awk -v list=\"$list\" '\n{\n  gsub(\" +\",\"|\",list)\n  gsub(\" *(\"list\") *\",\"\")\n  print ($0) ? \"false\" : \"true\"\n}\n' &lt;&lt;&lt;\"${array[*]}\"\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 16761, "user_id": 1454708, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eSzgk.png?s=128&g=1", "display_name": "Nahuel Fouilleul", "link": "https://stackoverflow.com/users/1454708/nahuel-fouilleul"}, "edited": false, "score": 0, "creation_date": 1515171628, "post_id": 48098483, "comment_id": 83212488, "body": "why downvotes ? from comments, OP wanted a perl oneliner. if something is not clear feel free to ask."}], "tags": [], "owner": {"reputation": 16761, "user_id": 1454708, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eSzgk.png?s=128&g=1", "display_name": "Nahuel Fouilleul", "link": "https://stackoverflow.com/users/1454708/nahuel-fouilleul"}, "is_accepted": false, "score": -2, "last_activity_date": 1515172178, "last_edit_date": 1515172178, "creation_date": 1515079830, "answer_id": 48098483, "question_id": 48096785, "link": "https://stackoverflow.com/questions/48096785/bash-how-to-verify-the-words-in-array-are-contain-in-the-variable/48098483#48098483", "title": "BASH + how to verify the words in array are contain in the variable", "body": "<p>A perl one-liner</p>\n\n<pre><code>perl -ape 'BEGIN{$H{$_}=1while$_=shift}$_=!grep!$H{$_},@F' $list &lt;&lt;&lt;\"${array[*]}\"\n</code></pre>\n\n<p>prints</p>\n\n<pre><code>1\n</code></pre>\n\n<p>and</p>\n\n<pre><code>perl -ape 'BEGIN{$H{$_}=1while$_=shift}$_=!grep!$H{$_},@F' $list &lt;&lt;&lt;\"${array[*]} not\"\n</code></pre>\n\n<p>prints nothing because <code>not</code> is not in <code>$list</code></p>\n\n<p>How it works, <code>perl -h</code> for command line switches,</p>\n\n<ul>\n<li><code>BEGIN{$H{$_}=1while$_=shift}</code> : fill a hash with keys <code>@ARGV</code> and values <code>1</code> and empties <code>@ARGV</code> list</li>\n<li><code>$_=!grep!$H{$_},@F</code> : grep return the array of elements not found in the hash, because of scalar context <code>$=!</code>, returns the number of element, and <code>!</code> returns 1 if <code>=0</code>, nothing if <code>&gt;0</code>.</li>\n</ul>\n\n<p>Otherwise it can also be done in bash >=4.0 with associative arrays:</p>\n\n<pre><code>declare -A hashlist=([sdg]=\"1\" [sdf]=\"1\" [sde]=\"1\" [sdd]=\"1\" [sdc]=\"1\" [sdb]=\"1\" [sdo]=\"1\" [sdk]=\"1\" [sdj]=\"1\" [sdi]=\"1\" [sdh]=\"1\" )\n\narray=( sdb sdd sde sdf sdg  )\n\nr=0; for a in \"${array[@]}\"; do ((r|=\\!hashlist[$a])); done ;((r=\\!r))\n</code></pre>\n\n<p>to follow the same logic than perl but can be simplified inverting logic</p>\n\n<pre><code>r=1; for a in \"${array[@]}\"; do ((r&amp;=\\!hashlist[$a])); done\n</code></pre>\n\n<p>also can be optimized to break the loop when first item is not found</p>\n\n<pre><code>r=1; for a in \"${array[@]}\"; do ((r&amp;=hashlist[$a])) || break; done\n</code></pre>\n\n<p>then r=1 if all entries were found, 0 otherwise.</p>\n\n<p>note that <code>!</code> must be escaped <code>\\!</code> only in command line because of <code>-H</code> switch but in a script the <code>\\</code> must be removed.</p>\n"}, {"tags": [], "owner": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "is_accepted": true, "score": -1, "last_activity_date": 1515093382, "creation_date": 1515093382, "answer_id": 48102048, "question_id": 48096785, "link": "https://stackoverflow.com/questions/48096785/bash-how-to-verify-the-words-in-array-are-contain-in-the-variable/48102048#48102048", "title": "BASH + how to verify the words in array are contain in the variable", "body": "<pre><code>$ cat tst.sh\ncontain_word() {\n    list=\"sdb sdc sdd sde sdf sdg sdh sdi sdk sdj sdo\"\n\n    printf '%s\\n' \"${array[@]}\" |\n    awk -v list=\"$list\" '\n        BEGIN {\n            split(list,tmpArr)\n            for (idx in tmpArr) {\n                wordSet[tmpArr[idx]]\n            }\n        }\n        !($0 in wordSet) {\n            exit 1\n        }\n    '\n}\n\narray=( sdb sdd sde sdf sdg  )\ncontain_word\nprintf '%s -&gt; %s\\n' \"${array[*]}\" \"$?\"\n\narray=( sdw sdd sde sdf sdg )\ncontain_word\nprintf '%s -&gt; %s\\n' \"${array[*]}\" \"$?\"\n\n$ ./tst.sh\nsdb sdd sde sdf sdg -&gt; 0\nsdw sdd sde sdf sdg -&gt; 1\n</code></pre>\n\n<p>The above uses full string comparison so no partial matches nor false regexp matches are possible. It also won't fail due to globbing and will work using any awk in any shell (that supports arrays using the syntax you provided) on any UNIX box. You can of course tweak the awk code or the calling shell code to print true or false rather than just the awk exit status as appropriate.</p>\n"}, {"tags": [], "owner": {"reputation": 25491, "user_id": 49197, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/15ebf24a33a29b9efbf9924f530dd736?s=128&d=identicon&r=PG", "display_name": "Hynek -Pichi- Vychodil", "link": "https://stackoverflow.com/users/49197/hynek-pichi-vychodil"}, "is_accepted": false, "score": -1, "last_activity_date": 1515579702, "last_edit_date": 1515579702, "creation_date": 1515148807, "answer_id": 48111857, "question_id": 48096785, "link": "https://stackoverflow.com/questions/48096785/bash-how-to-verify-the-words-in-array-are-contain-in-the-variable/48111857#48111857", "title": "BASH + how to verify the words in array are contain in the variable", "body": "<p><strong>Edit2</strong>: Using Perl is nice, simple and very efficient.</p>\n\n<pre><code>perl -e'@h{split/ /,shift}=();exists$h{$_}||exit 1 for@ARGV' \"$list\" \"${array[@]}\" &amp;&amp; echo \"true\" || echo \"false\"\n</code></pre>\n\n<p><strong>Original</strong>:</p>\n\n<p>It would be much simpler if array is in file but anyway</p>\n\n<pre><code>list=\"sdb sdc sdd sde sdf sdg sdh sdi sdk sdj sdo\"\narray=( sdb sdd sde sdf sdg )\n[[ $(echo $list | sed 's/ /\\n/g' | sort -u | grep -Ff &lt;(echo ${array[@]} | sed 's/ /\\n/g') | wc -l) -eq ${#array[@]} ]] &amp;&amp; echo \"true\" || echo \"false\"\n</code></pre>\n\n<p>or shorter</p>\n\n<pre><code>[[ $(sed 's/ /\\n/g' &lt;&lt;&lt;$list | sort -u | grep -Ff &lt;(sed 's/ /\\n/g' &lt;&lt;&lt;${array[@]}) | wc -l) -eq ${#array[@]} ]] &amp;&amp; echo \"true\" || echo \"false\"\n</code></pre>\n\n<p>Why would anybody cycle around array? There is a difference between O(N*M) and O(N+M).</p>\n\n<p><strong>Edit</strong>: It seems that understanding how computers work and what is O notation is less common than I expected, there is a small demonstration.</p>\n\n<pre class=\"lang-sh prettyprint-override\"><code>#!/bin/bash\n\nlist=\"aaa aab aac aad aae aaf aag aah aai aaj aak aal aam aan aao aap aaq aar aas aat aau aav aaw aax aay aaz aba abb abc abd abe abf abg abh abi abj abk abl abm abn abo abp abq abr abs abt abu abv abw abx aby abz aca acb acc acd ace acf acg ach aci acj ack acl acm acn aco acp acq acr acs act acu acv acw acx acy acz ada adb adc add ade adf adg adh adi adj adk adl adm adn ado adp adq adr ads adt adu adv adw adx ady adz aea aeb aec aed aee aef aeg aeh aei aej aek ael aem aen aeo aep aeq aer aes aet aeu aev aew aex aey aez afa afb afc afd afe aff afg afh afi afj afk afl afm afn afo afp afq afr afs aft afu afv afw afx afy afz aga agb agc agd age agf agg agh agi agj agk agl agm agn ago agp agq agr ags agt agu agv agw agx agy agz aha ahb ahc ahd ahe ahf ahg ahh ahi ahj ahk ahl ahm ahn aho ahp ahq ahr ahs aht ahu ahv ahw ahx ahy ahz aia aib aic aid aie aif aig aih aii aij aik ail aim ain aio aip aiq air ais ait aiu aiv aiw aix aiy aiz aja ajb ajc ajd aje ajf ajg ajh aji ajj ajk ajl ajm ajn ajo ajp ajq ajr ajs ajt aju ajv ajw ajx ajy ajz aka akb akc akd ake akf akg akh aki akj akk akl akm akn ako akp akq akr aks akt aku akv akw akx aky akz ala alb alc ald ale alf alg alh ali alj alk all alm aln alo alp alq alr als alt alu alv alw alx aly alz ama amb amc amd ame amf amg amh ami amj amk aml amm amn amo amp amq amr ams amt amu amv amw amx amy amz ana anb anc and ane anf ang anh ani anj ank anl anm ann ano anp anq anr ans ant anu anv anw anx any anz aoa aob aoc aod aoe aof aog aoh aoi aoj aok aol aom aon aoo aop aoq aor aos aot aou aov aow aox aoy aoz apa apb apc apd ape apf apg aph api apj apk apl apm apn apo app apq apr aps apt apu apv apw apx apy apz aqa aqb aqc aqd aqe aqf aqg aqh aqi aqj aqk aql aqm aqn aqo aqp aqq aqr aqs aqt aqu aqv aqw aqx aqy aqz ara arb arc ard are arf arg arh ari arj ark arl arm arn aro arp arq arr ars art aru arv arw arx ary arz asa asb asc asd ase asf asg ash asi asj ask asl asm asn aso asp asq asr ass ast asu asv asw asx asy asz ata atb atc atd ate atf atg ath ati atj atk atl atm atn ato atp atq atr ats att atu atv atw atx aty atz aua aub auc aud aue auf aug auh aui auj auk aul aum aun auo aup auq aur aus aut auu auv auw aux auy auz ava avb avc avd ave avf avg avh avi avj avk avl avm avn avo avp avq avr avs avt avu avv avw avx avy avz awa awb awc awd awe awf awg awh awi awj awk awl awm awn awo awp awq awr aws awt awu awv aww awx awy awz axa axb axc axd axe axf axg axh axi axj axk axl axm axn axo axp axq axr axs axt axu axv axw axx axy axz aya ayb ayc ayd aye ayf ayg ayh ayi ayj ayk ayl aym ayn ayo ayp ayq ayr ays ayt ayu ayv ayw ayx ayy ayz aza azb azc azd aze azf azg azh azi azj azk azl azm azn azo azp azq azr azs azt azu azv azw azx azy azz baa bab bac bad bae baf bag bah bai baj bak bal bam ban bao bap baq bar bas bat bau bav baw bax bay baz bba bbb bbc bbd bbe bbf bbg bbh bbi bbj bbk bbl bbm bbn bbo bbp bbq bbr bbs bbt bbu bbv bbw bbx bby bbz bca bcb bcc bcd bce bcf bcg bch bci bcj bck bcl bcm bcn bco bcp bcq bcr bcs bct bcu bcv bcw bcx bcy bcz bda bdb bdc bdd bde bdf bdg bdh bdi bdj bdk bdl bdm bdn bdo bdp bdq bdr bds bdt bdu bdv bdw bdx bdy bdz bea beb bec bed bee bef beg beh bei bej bek bel bem ben beo bep beq ber bes bet beu bev bew bex bey bez bfa bfb bfc bfd bfe bff bfg bfh bfi bfj bfk bfl bfm bfn bfo bfp bfq bfr bfs bft bfu bfv bfw bfx bfy bfz bga bgb bgc bgd bge bgf bgg bgh bgi bgj bgk bgl bgm bgn bgo bgp bgq bgr bgs bgt bgu bgv bgw bgx bgy bgz bha bhb bhc bhd bhe bhf bhg bhh bhi bhj bhk bhl bhm bhn bho bhp bhq bhr bhs bht bhu bhv bhw bhx bhy bhz bia bib bic bid bie bif big bih bii bij bik bil bim bin bio bip biq bir bis bit biu biv biw bix biy biz bja bjb bjc bjd bje bjf bjg bjh bji bjj bjk bjl bjm bjn bjo bjp bjq bjr bjs bjt bju bjv bjw bjx bjy bjz bka bkb bkc bkd bke bkf bkg bkh bki bkj bkk bkl bkm bkn bko bkp bkq bkr bks bkt bku bkv bkw bkx bky bkz bla blb blc bld ble blf blg blh bli blj blk bll blm bln blo blp blq blr bls blt blu blv blw blx bly blz bma bmb bmc bmd bme bmf bmg bmh bmi bmj bmk bml\"\narray=(\naaa aab aac aad aae aaf aag aah aai aaj aak aal aam aan aao aap aaq aar aas\naat aau aav aaw aax aay aaz aba abb abc abd abe abf abg abh abi abj abk abl\nabm abn abo abp abq abr abs abt abu abv abw abx aby abz aca acb acc acd ace\nacf acg ach aci acj ack acl acm acn aco acp acq acr acs act acu acv acw acx\nacy acz ada adb adc add ade adf adg adh adi adj adk adl adm adn ado adp adq\nadr ads adt adu adv adw adx ady adz aea aeb aec aed aee aef aeg aeh aei aej\naek ael aem aen aeo aep aeq aer aes aet aeu aev aew aex aey aez afa afb afc\nafd afe aff afg afh afi afj afk afl afm afn afo afp afq afr afs aft afu afv\nafw afx afy afz aga agb agc agd age agf agg agh agi agj agk agl agm agn ago\nagp agq agr ags agt agu agv agw agx agy agz aha ahb ahc ahd ahe ahf ahg ahh\nahi ahj ahk ahl ahm ahn aho ahp ahq ahr ahs aht ahu ahv ahw ahx ahy ahz aia\naib aic aid aie aif aig aih aii aij aik ail aim ain aio aip aiq air ais ait\naiu aiv aiw aix aiy aiz aja ajb ajc ajd aje ajf ajg ajh aji ajj ajk ajl ajm\najn ajo ajp ajq ajr ajs ajt aju ajv ajw ajx ajy ajz aka akb akc akd ake akf\nakg akh aki akj akk akl akm akn ako akp akq akr aks akt aku akv akw akx aky\nakz ala alb alc ald ale alf alg alh ali alj alk all alm aln alo alp alq alr\nals alt alu alv alw alx aly alz ama amb amc amd ame amf amg amh ami amj amk\naml amm amn amo amp amq amr ams amt amu amv amw amx amy amz ana anb anc and\nane anf ang anh ani anj ank anl anm ann ano anp anq anr ans ant anu anv anw\nanx any anz aoa aob aoc aod aoe aof aog aoh aoi aoj aok aol aom aon aoo aop\naoq aor aos aot aou aov aow aox aoy aoz apa apb apc apd ape apf apg aph api\napj apk apl apm apn apo app apq apr aps apt apu apv apw apx apy apz aqa aqb\naqc aqd aqe aqf aqg aqh aqi aqj aqk aql aqm aqn aqo aqp aqq aqr aqs aqt aqu\naqv aqw aqx aqy aqz ara arb arc ard are arf arg arh ari arj ark arl arm arn\naro arp arq arr ars art aru arv arw arx ary arz asa asb asc asd ase asf asg\nash asi asj ask asl asm asn aso asp asq asr ass ast asu asv asw asx asy asz\nata atb atc atd ate atf atg ath ati atj atk atl atm atn ato atp atq atr ats\natt atu atv atw atx aty atz aua aub auc aud aue auf aug auh aui auj auk aul\naum aun auo aup auq aur aus aut auu auv auw aux auy auz ava avb avc avd ave\navf avg avh avi avj avk avl avm avn avo avp avq avr avs avt avu avv avw avx\navy avz awa awb awc awd awe awf awg awh awi awj awk awl awm awn awo awp awq\nawr aws awt awu awv aww awx awy awz axa axb axc axd axe axf axg axh axi axj\naxk axl axm axn axo axp axq axr axs axt axu axv axw axx axy axz aya ayb ayc\nayd aye ayf ayg ayh ayi ayj ayk ayl aym ayn ayo ayp ayq ayr ays ayt ayu ayv\nayw ayx ayy ayz aza azb azc azd aze azf azg azh azi azj azk azl azm azn azo\nazp azq azr azs azt azu azv azw azx azy azz baa bab bac bad bae baf bag bah\nbai baj bak bal bam ban bao bap baq bar bas bat bau bav baw bax bay baz bba\nbbb bbc bbd bbe bbf bbg bbh bbi bbj bbk bbl bbm bbn bbo bbp bbq bbr bbs bbt\nbbu bbv bbw bbx bby bbz bca bcb bcc bcd bce bcf bcg bch bci bcj bck bcl bcm\nbcn bco bcp bcq bcr bcs bct bcu bcv bcw bcx bcy bcz bda bdb bdc bdd bde bdf\nbdg bdh bdi bdj bdk bdl bdm bdn bdo bdp bdq bdr bds bdt bdu bdv bdw bdx bdy\nbdz bea beb bec bed bee bef beg beh bei bej bek bel bem ben beo bep beq ber\nbes bet beu bev bew bex bey bez bfa bfb bfc bfd bfe bff bfg bfh bfi bfj bfk\nbfl bfm bfn bfo bfp bfq bfr bfs bft bfu bfv bfw bfx bfy bfz bga bgb bgc bgd\nbge bgf bgg bgh bgi bgj bgk bgl bgm bgn bgo bgp bgq bgr bgs bgt bgu bgv bgw\nbgx bgy bgz bha bhb bhc bhd bhe bhf bhg bhh bhi bhj bhk bhl bhm bhn bho bhp\nbhq bhr bhs bht bhu bhv bhw bhx bhy bhz bia bib bic bid bie bif big bih bii\nbij bik bil bim bin bio bip biq bir bis bit biu biv biw bix biy biz bja bjb\nbjc bjd bje bjf bjg bjh bji bjj bjk bjl bjm bjn bjo bjp bjq bjr bjs bjt bju\nbjv bjw bjx bjy bjz bka bkb bkc bkd bke bkf bkg bkh bki bkj bkk bkl bkm bkn\nbko bkp bkq bkr bks bkt bku bkv bkw bkx bky bkz bla blb blc bld ble blf blg\nblh bli blj blk bll blm bln blo blp blq blr bls blt blu blv blw blx bly blz\nbma bmb bmc bmd bme bmf bmg bmh bmi bmj bmk bml\n);\n\nfunction contain_word\n{\n\n[[ -z \"${list// }\" ]] &amp;&amp; return 1\n\nfor arr in ${array[*]}\ndo\n echo \"$list\" | grep -q $arr\n [[ $? -eq 0 ]] &amp;&amp;  (( count ++ ))\ndone\n\n[[ ${#array[@]} -eq $count ]]\n\n}\n\nfunction contain_word2\n{\n    [[ $(sed 's/ /\\n/g' &lt;&lt;&lt;$list | sort -u | grep -Ff &lt;(sed 's/ /\\n/g' &lt;&lt;&lt;${array[@]}) | wc -l) -eq ${#array[@]} ]]\n}\n\ncontain_word$1 &amp;&amp; echo \"true\" || echo \"false\"\n</code></pre>\n\n<p>And simple demonstration what O(M*N) vs O(M+N) means for M=N=1000 which is not too much for modern HW, isn't it?</p>\n\n<pre><code>$ time ./test.sh\ntrue\n\nreal    0m0.989s\nuser    0m1.040s\nsys     0m0.319s\n$ time ./test.sh 2\ntrue\n\nreal    0m0.011s\nuser    0m0.012s\nsys     0m0.000s\n</code></pre>\n\n<p>Even for M=N=100</p>\n\n<pre class=\"lang-sh prettyprint-override\"><code>list=\"aaa aab aac aad aae aaf aag aah aai aaj aak aal aam aan aao aap aaq aar aas aat aau aav aaw aax aay aaz aba abb abc abd abe abf abg abh abi abj abk abl abm abn abo abp abq abr abs abt abu abv abw abx aby abz aca acb acc acd ace acf acg ach aci acj ack acl acm acn aco acp acq acr acs act acu acv acw acx acy acz ada adb adc add ade adf adg adh adi adj adk adl adm adn ado adp adq adr ads adt adu adv\"\narray=(\naaa aab aac aad aae aaf aag aah aai aaj aak aal aam aan aao aap aaq aar aas\naat aau aav aaw aax aay aaz aba abb abc abd abe abf abg abh abi abj abk abl\nabm abn abo abp abq abr abs abt abu abv abw abx aby abz aca acb acc acd ace\nacf acg ach aci acj ack acl acm acn aco acp acq acr acs act acu acv acw acx\nacy acz ada adb adc add ade adf adg adh adi adj adk adl adm adn ado adp adq\nadr ads adt adu adv\n)\n</code></pre>\n\n\n\n<pre><code>$ time ./test.sh\ntrue\n\nreal    0m0.117s\nuser    0m0.105s\nsys     0m0.042s\n$ time ./test.sh 2\ntrue\n\nreal    0m0.008s\nuser    0m0.008s\nsys     0m0.001s\n</code></pre>\n\n<p>That's it for how inefficient it is.</p>\n\n<p>BTW using Perl would be more elegant than AWK</p>\n\n<pre><code>function contain_word3\n{\n    perl -e'@h{split/ /,shift}=();exists$h{$_}||exit 1 for@ARGV' \"$list\" \"${array[@]}\"\n}\n</code></pre>\n\n<p>and fast (8ms).</p>\n"}], "owner": {"reputation": 373, "user_id": 9115155, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/6cee14c2307aaf761698e79776f380e4?s=128&d=identicon&r=PG&f=1", "display_name": "enodmilvado", "link": "https://stackoverflow.com/users/9115155/enodmilvado"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 271, "favorite_count": 1, "accepted_answer_id": 48102048, "answer_count": 6, "score": 0, "last_activity_date": 1515579702, "creation_date": 1515074091, "last_edit_date": 1515075073, "question_id": 48096785, "link": "https://stackoverflow.com/questions/48096785/bash-how-to-verify-the-words-in-array-are-contain-in-the-variable", "title": "BASH + how to verify the words in array are contain in the variable", "body": "<p>Hi friend and colleges</p>\n\n<p>I wrote the following script in order to verify the words in array are contain in the $list variable</p>\n\n<pre><code>#!/bin/bash\n\nlist=\"sdb sdc sdd sde sdf sdg sdh sdi sdk sdj sdo\"\narray=( sdb sdd sde sdf sdg  )\n\n\nfunction contain_word\n{\n\ncontain=false\n\n[[ -z \"${list// }\" ]] &amp;&amp; return\n\nfor arr in ${array[*]}\ndo\n echo \"$list\" | grep -q $arr\n [[ $? -eq 0 ]] &amp;&amp;  (( count ++ ))\ndone\n\n[[ ${#array[@]} -eq $count ]] &amp;&amp; export contain=true\n\n}\n\ncontain_word\necho $contain\n</code></pre>\n\n<p>this script do the job but its long code for this purpose and ugly</p>\n\n<p>I will happy to get good idea how to do it better  ( in bash / awk / perl one liner etc  )</p>\n\n<p><strong>Example1</strong></p>\n\n<p>For </p>\n\n<pre><code>  list=\"sdb sdc sdd sde sdf sdg sdh sdi sdk sdj sdo\"\n\n  array=( sdb sdd sde sdf sdg  )\n</code></pre>\n\n<p>it will print <strong>true</strong></p>\n\n<p><strong>Example2</strong> </p>\n\n<p>For </p>\n\n<pre><code> list=\"sdb sdc sdd sde sdf sdg sdh sdi sdk sdj sdo\"\n\n array=( sdw sdd sde sdf sdg  )\n</code></pre>\n\n<p>it will print <strong>false</strong></p>\n"}, {"tags": ["mongodb", "perl"], "comments": [{"owner": {"reputation": 3269, "user_id": 93745, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8F5Wc.jpg?s=128&g=1", "display_name": "tinita", "link": "https://stackoverflow.com/users/93745/tinita"}, "edited": false, "score": 5, "creation_date": 1515066514, "post_id": 48094454, "comment_id": 83163735, "body": "Welcome to stackoverflow. You might want to take the <a href=\"https://stackoverflow.com/tour\">tour</a> and read about how to create a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>. Please format the code to make it readable."}, {"owner": {"reputation": 2855, "user_id": 11800, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d37a63484d9878cf6c07dcc08adda9e2?s=128&d=identicon&r=PG", "display_name": "xdg", "link": "https://stackoverflow.com/users/11800/xdg"}, "edited": false, "score": 0, "creation_date": 1515162526, "post_id": 48094454, "comment_id": 83207138, "body": "That&#39;s not really an <a href=\"http://sscce.org\" rel=\"nofollow noreferrer\">SSCCE</a>, since I can&#39;t actually run it, but I&#39;ll still try to answer."}], "answers": [{"comments": [{"owner": {"reputation": 15, "user_id": 9112108, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/5c3b5eed4b0ada82393efbb33c430de9?s=128&d=identicon&r=PG&f=1", "display_name": "BASAVARAJ JM", "link": "https://stackoverflow.com/users/9112108/basavaraj-jm"}, "edited": false, "score": 0, "creation_date": 1515296014, "post_id": 48115696, "comment_id": 83245464, "body": "after using boolean and removing single coat i am getting correct answer thanks"}], "tags": [], "owner": {"reputation": 2855, "user_id": 11800, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d37a63484d9878cf6c07dcc08adda9e2?s=128&d=identicon&r=PG", "display_name": "xdg", "link": "https://stackoverflow.com/users/11800/xdg"}, "is_accepted": true, "score": 1, "last_activity_date": 1515162835, "creation_date": 1515162835, "answer_id": 48115696, "question_id": 48094454, "link": "https://stackoverflow.com/questions/48094454/how-do-i-write-a-mongodb-exists-query-in-perl/48115696#48115696", "title": "How do I write a MongoDB $exists query in Perl?", "body": "<p>The two suspicious bits I see are that you've quoted \"true\" and \"false\" -- which make those strings, not boolean values -- and I wonder what you're using for <code>$date</code>, since you don't have that in your shell example.</p>\n\n<p>Here is what you wrote, formatted nicely:</p>\n\n<pre><code>my $Subscriber2 = $Subscriber-&gt;find(\n    {\n        '$and' =&gt; [\n            { dateOfJoining        =&gt; { '$gt'     =&gt; $date } },\n            { registerFrom         =&gt; { '$exists' =&gt; 'false' } },\n            { googleRegistrationId =&gt; { '$exists' =&gt; 'true' } },\n            { isGuest              =&gt; 'false' }\n        ]\n    }\n)-&gt;fields( { _id =&gt; 1, streamzCampaigns =&gt; 1 } );\n</code></pre>\n\n<p>For the booleans, you should use the <a href=\"https://p3rl.org/boolean\" rel=\"nofollow noreferrer\">boolean.pm</a> module:</p>\n\n<pre><code>use boolean;\n\nmy $Subscriber2 = $Subscriber-&gt;find(\n    {\n        '$and' =&gt; [\n            { dateOfJoining        =&gt; { '$gt'     =&gt; $date } },\n            { registerFrom         =&gt; { '$exists' =&gt; false } },\n            { googleRegistrationId =&gt; { '$exists' =&gt; true } },\n            { isGuest              =&gt; false }\n        ]\n    }\n)-&gt;fields( { _id =&gt; 1, streamzCampaigns =&gt; 1 } );\n</code></pre>\n"}], "owner": {"reputation": 15, "user_id": 9112108, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/5c3b5eed4b0ada82393efbb33c430de9?s=128&d=identicon&r=PG&f=1", "display_name": "BASAVARAJ JM", "link": "https://stackoverflow.com/users/9112108/basavaraj-jm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 197, "favorite_count": 0, "accepted_answer_id": 48115696, "answer_count": 1, "score": -1, "last_activity_date": 1515162926, "creation_date": 1515065887, "last_edit_date": 1515162926, "question_id": 48094454, "link": "https://stackoverflow.com/questions/48094454/how-do-i-write-a-mongodb-exists-query-in-perl", "title": "How do I write a MongoDB $exists query in Perl?", "body": "<p>db.getCollection('Subscriber').find({$and:[{\"registerFrom\":{$exists:false}},{\"googleRegistrationId\":{$exists:true}},{\"isGuest\":\"false\"}]})</p>\n\n<p>how to write the above query in Perl please help this.I am getting different results on this when execute on perl</p>\n\n<p>i have written like this in perl</p>\n\n<p>my $Subscriber2 = $Subscriber->find({'$and' =>[{dateOfJoining => {'$gt' =>  $date}},{registerFrom => { '$exists' => 'false'}},{googleRegistrationId => {'$exists' => 'true'}},{isGuest => 'false'}]})->fields({ _id => 1,streamzCampaigns => 1});</p>\n\n<p>I am not getting the same results as when executing in perl.How to use $exits of mongoDB in Perl.Please help on this one.</p>\n"}, {"tags": ["javascript", "perl", "authentication", "websocket"], "answers": [{"tags": [], "owner": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "is_accepted": true, "score": 1, "last_activity_date": 1515076344, "creation_date": 1515076344, "answer_id": 48097441, "question_id": 48093847, "link": "https://stackoverflow.com/questions/48093847/websocket-with-authentication-serial-with-js-and-perl/48097441#48097441", "title": "Websocket with authentication serial with js and perl", "body": "<p>In <a href=\"https://metacpan.org/pod/Net::WebSocket::Server\" rel=\"nofollow noreferrer\">the documentation</a> you have multiple examples. One of these uses the <code>handshake</code> event as follows:</p>\n\n<pre><code>    ...\n    $conn-&gt;on(\n        handshake =&gt; sub {\n            my ($conn, $handshake) = @_;\n            $conn-&gt;disconnect() unless $handshake-&gt;req-&gt;origin eq $origin;\n        },\n</code></pre>\n\n<p>By following links to <a href=\"https://metacpan.org/pod/Net::WebSocket::Server::Connection\" rel=\"nofollow noreferrer\">more documentation</a> you can see that <code>$handshake</code> in the handshake event is a <a href=\"https://metacpan.org/pod/Protocol::WebSocket::Handshake::Server\" rel=\"nofollow noreferrer\">Protocol::WebSocket::Handshake::Server</a> object and the (currently undocumented) <code>req</code> method used in the above example probably leads to a <a href=\"https://metacpan.org/pod/Protocol::WebSocket::Request\" rel=\"nofollow noreferrer\">Protocol::WebSocket::Request</a> object. The documentation for this class mentions an undocumented <code>resource_name</code> method but the example provided for this class suggests, that this is the path component of the URL, i.e. <code>/?UserID=329729</code> in your specific question.</p>\n\n<p>Based on this I would suggest that the following should work with your specific URL:</p>\n\n<pre><code>    $conn-&gt;on(\n        handshake =&gt; sub {\n            my($conn,$handshake)=@_;\n            my ($id) = $handshake-&gt;req-&gt;resource_name =~m{\\?UserID=(\\d+)};\n</code></pre>\n"}], "owner": {"reputation": 389, "user_id": 2644315, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/5AWB7.jpg?s=128&g=1", "display_name": "Xerix", "link": "https://stackoverflow.com/users/2644315/xerix"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 83, "favorite_count": 0, "accepted_answer_id": 48097441, "answer_count": 1, "score": 1, "last_activity_date": 1515076344, "creation_date": 1515063792, "question_id": 48093847, "link": "https://stackoverflow.com/questions/48093847/websocket-with-authentication-serial-with-js-and-perl", "title": "Websocket with authentication serial with js and perl", "body": "<p>I am using plain js (no library) to implement websocket connection to the server (to PERL script). \nLooking online I found that it is possible to add custom parameters in URL request as follows:</p>\n\n<pre><code>var ws=new WebSocket('wss://mydomain.com:9999/?UserID=329729');\n</code></pre>\n\n<p>My question is: How then in PERL's NET::WebSocket::Server I can handle this query string to retrieve the UserID in handshake (if even possible)?</p>\n\n<pre><code>Net::WebSocket::Server-&gt;new(\n    listen =&gt; $ssl,\n    silence_max=&gt;3600,\n    on_connect =&gt; sub {\n        my($serv,$conn)=@_;\n        $conn-&gt;on(\n            handshake =&gt; sub {\n                my($conn,$handshake)=@_;\n\n                # ???\n\n\n\n            },\n        );\n    }\n)-&gt;start;\n</code></pre>\n\n<p>Any help can be appreciate</p>\n"}, {"tags": ["perl", "mojolicious"], "answers": [{"comments": [{"owner": {"reputation": 3574, "user_id": 676192, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/fcef8c55deae46cc0bfe986b2c189f70?s=128&d=identicon&r=PG", "display_name": "simone", "link": "https://stackoverflow.com/users/676192/simone"}, "edited": false, "score": 0, "creation_date": 1515093857, "post_id": 48098990, "comment_id": 83179599, "body": "thanks - it looks like it works but is it possible to do for only one route in a lite  - as opposed to for every dispatch? I don&#39;t need it all the time - only on some responses."}, {"owner": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "edited": false, "score": 0, "creation_date": 1515099211, "post_id": 48098990, "comment_id": 83182214, "body": "Timer with fork() then? <a href=\"http://mojolicious.org/perldoc/Mojo/IOLoop#timer\" rel=\"nofollow noreferrer\">mojolicious.org/perldoc/Mojo/IOLoop#timer</a>"}, {"owner": {"reputation": 3574, "user_id": 676192, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/fcef8c55deae46cc0bfe986b2c189f70?s=128&d=identicon&r=PG", "display_name": "simone", "link": "https://stackoverflow.com/users/676192/simone"}, "edited": false, "score": 0, "creation_date": 1515100045, "post_id": 48098990, "comment_id": 83182583, "body": "Yep - I found out thanks to your answer. <a href=\"https://gist.github.com/simonecesano/0ed2163c2ba4e635d458611963027762\" rel=\"nofollow noreferrer\">gist.github.com/simonecesano/0ed2163c2ba4e635d45861196302776&zwnj;&#8203;2</a>. Want to edit so I can accept the answer?"}], "tags": [], "owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "is_accepted": false, "score": 0, "last_activity_date": 1515110130, "last_edit_date": 1515110130, "creation_date": 1515081516, "answer_id": 48098990, "question_id": 48092089, "link": "https://stackoverflow.com/questions/48092089/how-can-i-execute-code-after-rendering-in-mojolicious/48098990#48098990", "title": "How can I execute code after rendering in Mojolicious?", "body": "<p>Call <code>fork</code> in an <a href=\"http://mojolicious.org/perldoc/Mojolicious#after_dispatch\" rel=\"nofollow noreferrer\"><code>after_dispatch</code></a> hook?</p>\n\n<pre><code>$app-&gt;hook(after_dispatch =&gt; sub {\n  my $c = shift;\n  my $pid = fork();\n  if (defined($pid) &amp;&amp; $pid == 0) {\n      doSlowStuff();\n      exit;\n  }\n\n});\n</code></pre>\n"}], "owner": {"reputation": 3574, "user_id": 676192, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/fcef8c55deae46cc0bfe986b2c189f70?s=128&d=identicon&r=PG", "display_name": "simone", "link": "https://stackoverflow.com/users/676192/simone"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 341, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1515110130, "creation_date": 1515057584, "question_id": 48092089, "link": "https://stackoverflow.com/questions/48092089/how-can-i-execute-code-after-rendering-in-mojolicious", "title": "How can I execute code after rendering in Mojolicious?", "body": "<p>I have some long running code that I'd like to execute after rendering in a Mojolicious app.</p>\n\n<p>I'd like to avoid using <a href=\"http://mojolicious.org/perldoc/Minion\" rel=\"nofollow noreferrer\">Minion</a> queues as I'd be calling many very short processes, and I've looked into <a href=\"http://search.cpan.org/~jberger/Mojo-IOLoop-ForkCall/\" rel=\"nofollow noreferrer\">Mojolicious::Plugin::ForkCall</a> and <a href=\"http://search.cpan.org/~dbook/Mojolicious-Plugin-Subprocess/\" rel=\"nofollow noreferrer\">Mojolicious::Plugin::Subprocess</a> but they both timeout (as the short processes get called many times).</p>\n\n<p>I remember coming across an example of this somewhere but cannot find it anymore.</p>\n\n<p>Any help?</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1515053195, "post_id": 48090602, "comment_id": 83156379, "body": "<code>use Data::Dumper;</code> and <code>print Dumper($st);</code> shows information like: <code>$VAR1 = bless( [ 16777220, 8603307603, 33188, 1, 501, 20, 0, 269, 1515052646, 1515052639, 1515052639, 4194304, 8 ], &#39;File::stat&#39; );</code> \u2014 which is some sort of blessed object, not a hash ref. Which is why you get the complaints you do. I&#39;m not sure what the fix is."}, {"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 1, "creation_date": 1515053780, "post_id": 48090602, "comment_id": 83156631, "body": "@JonathanLeffler the <code>-&gt;size</code> is a method call, which isn&#39;t something you can interpolate"}, {"owner": {"reputation": 42833, "user_id": 18914, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7a20a39ae2ef47ae042a3eddd5b5bd19?s=128&d=identicon&r=PG", "display_name": "Dave Sherohman", "link": "https://stackoverflow.com/users/18914/dave-sherohman"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 1, "creation_date": 1515061143, "post_id": 48090602, "comment_id": 83160574, "body": "@JonathanLeffler - Perl objects are traditionally blessed hash references, but you can actually bless any type of reference to create an object. In this particular case, your <code>Dumper</code> output shows that <code>File::stat</code> uses a blessed array reference."}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 0, "creation_date": 1515084111, "post_id": 48090602, "comment_id": 83174513, "body": "I&#39;d just write <code>print &quot;File size: &quot;, $st-&gt;size, &quot;\\n&quot;;</code> -- or, if you can assume Perl 5.10 or later: <code>say &quot;File size: &quot;, $st-&gt;size;</code>"}], "answers": [{"comments": [{"owner": {"reputation": 52821, "user_id": 632407, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/AfGWW.jpg?s=128&g=1", "display_name": "jm666", "link": "https://stackoverflow.com/users/632407/jm666"}, "edited": false, "score": 1, "creation_date": 1515058382, "post_id": 48091083, "comment_id": 83158898, "body": "Heh, &lt;grin&gt;. I would to use: <code>print &quot;File size: @{[ $st-&gt;size ]}\\n&quot;;</code> :)"}, {"owner": {"reputation": 42833, "user_id": 18914, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7a20a39ae2ef47ae042a3eddd5b5bd19?s=128&d=identicon&r=PG", "display_name": "Dave Sherohman", "link": "https://stackoverflow.com/users/18914/dave-sherohman"}, "edited": false, "score": 1, "creation_date": 1515061665, "post_id": 48091083, "comment_id": 83160938, "body": "In your last version, the parentheses aren&#39;t actually needed. <code>say &quot;size: ${\\$st-&gt;size}&quot;</code> works, too. Does that version also have the &quot;hidden list context&quot; issue? (I assume it does, but just checking, since it&#39;s not a construct I&#39;m personally familiar with. I tend to use explicit concatenation rather than interpolation for anything other than simple scalars.)"}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 4, "last_activity_date": 1515054023, "last_edit_date": 1515054023, "creation_date": 1515053199, "answer_id": 48091083, "question_id": 48090602, "link": "https://stackoverflow.com/questions/48090602/what-is-the-correct-way-to-print-file-size-st-size-in-perl/48091083#48091083", "title": "What is the correct way to: print &quot;File size: $st-&gt;size&quot; in perl?", "body": "<p>You can't put Perl code in double quotes and expect it to be executed unless you somehow involve <code>eval EXPR</code>.</p>\n\n<pre><code>my $x = 4;\nmy $y = 5;\nprint \"Sum: $x + $y\\n\";   # Prints Sum: 4 + 5, not Sum: 9.\n</code></pre>\n\n<p>The following work:</p>\n\n<pre><code>print \"File size: \" . $st-&gt;size . \"\\n\";\n\nprint \"File size: \".( $st-&gt;size ).\"\\n\";\n\nsay \"File size: \" . $st-&gt;size;\n\nprintf \"File size: %s\\n\", $st-&gt;size;\n\nTemplate-&gt;new()-&gt;process(\\\"File size: [% st.size %]\\n\", { st =&gt; $st });\n\nprint \"File size: ${\\( $st-&gt;size )}\\n\";\n</code></pre>\n\n<p>Please avoid the last one. It's wasteful, it evaluates the expression in list context even though it looks like it calls it in scalar context (which leads to surprises), and it makes your code less readable in practice. It is the least correct of the above ways. I'm only including it because I know someone else will post it if I don't.</p>\n"}, {"comments": [{"owner": {"reputation": 107, "user_id": 2808707, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/177b84896458d1715e65fd911cdae8a1?s=128&d=identicon&r=PG&f=1", "display_name": "SiliconBadger", "link": "https://stackoverflow.com/users/2808707/siliconbadger"}, "edited": false, "score": 0, "creation_date": 1515076301, "post_id": 48096267, "comment_id": 83169801, "body": "Thanks, Javier.  I do understand that it was accessing only $st rather than the whole $st-&gt;size from the output, which is why I thought perhaps the File::stat object was an array at first.  I clearly have much learning to do on the fundamentals of Perl."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1515076337, "post_id": 48096267, "comment_id": 83169827, "body": "Re &quot;<i>which is why I thought perhaps the File::stat object was an array at first</i>&quot;, It is, but you shouldn&#39;t go about messing with the internals of objects."}, {"owner": {"reputation": 1672, "user_id": 4355253, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ee8cbfecfb7686f370b07eea52273c5?s=128&d=identicon&r=PG&f=1", "display_name": "Javier Elices", "link": "https://stackoverflow.com/users/4355253/javier-elices"}, "reply_to_user": {"reputation": 107, "user_id": 2808707, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/177b84896458d1715e65fd911cdae8a1?s=128&d=identicon&r=PG&f=1", "display_name": "SiliconBadger", "link": "https://stackoverflow.com/users/2808707/siliconbadger"}, "edited": false, "score": 0, "creation_date": 1515078985, "post_id": 48096267, "comment_id": 83171391, "body": "@SiliconBadger, the explanation is there for anyone to read it... Perl is by no means simple. It gets the work done but it is also full of traps. As ikegami says, libraries should be used by means of the methods provided. Trying to guess at their implementation details is asking for trouble."}, {"owner": {"reputation": 107, "user_id": 2808707, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/177b84896458d1715e65fd911cdae8a1?s=128&d=identicon&r=PG&f=1", "display_name": "SiliconBadger", "link": "https://stackoverflow.com/users/2808707/siliconbadger"}, "edited": false, "score": 0, "creation_date": 1515170375, "post_id": 48096267, "comment_id": 83211810, "body": "@JavierElices I wasn&#39;t trying to guess at anything which is intended to be"}, {"owner": {"reputation": 107, "user_id": 2808707, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/177b84896458d1715e65fd911cdae8a1?s=128&d=identicon&r=PG&f=1", "display_name": "SiliconBadger", "link": "https://stackoverflow.com/users/2808707/siliconbadger"}, "edited": false, "score": 0, "creation_date": 1515171333, "post_id": 48096267, "comment_id": 83212343, "body": "It wasn&#39;t my intention to access anything which is intended to be obscured/protected/private.  My background is more C/C++, so when I saw the term &quot;array&quot;, I merely thought that <i>might</i> indicate that I should treat it as such, even though it didn&#39;t seem right.  If I don&#39;t follow the leads I have (within reasonable time), I&#39;d be posting all kinds of pointless questions on here, getting downvoted, and seeing comments like &quot;you didn&#39;t think to try treating it as an array based on the output?&quot;  Which is similar to: &quot;the explanation is there for anyone to read it&quot;.  ;-)"}, {"owner": {"reputation": 1672, "user_id": 4355253, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ee8cbfecfb7686f370b07eea52273c5?s=128&d=identicon&r=PG&f=1", "display_name": "Javier Elices", "link": "https://stackoverflow.com/users/4355253/javier-elices"}, "reply_to_user": {"reputation": 107, "user_id": 2808707, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/177b84896458d1715e65fd911cdae8a1?s=128&d=identicon&r=PG&f=1", "display_name": "SiliconBadger", "link": "https://stackoverflow.com/users/2808707/siliconbadger"}, "edited": false, "score": 1, "creation_date": 1515171953, "post_id": 48096267, "comment_id": 83212664, "body": "@SiliconBadger, I am sorry if my writting did not sound good to you. By &quot;the explanation is there for anyone to read it&quot; I mean that Stack Overflow questions / answers style is meant to be a way for many people to find good questions and good answers. When I write an answer I have other readers in mind, not only the person asking the question. A good answer may be useful to others looking for the same thing. That&#39;s all. :-)"}, {"owner": {"reputation": 107, "user_id": 2808707, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/177b84896458d1715e65fd911cdae8a1?s=128&d=identicon&r=PG&f=1", "display_name": "SiliconBadger", "link": "https://stackoverflow.com/users/2808707/siliconbadger"}, "edited": false, "score": 0, "creation_date": 1515226592, "post_id": 48096267, "comment_id": 83227674, "body": "@JavierElices: I understand now, I&#39;m sorry for being defensive.  I appreciate your assistance!  :-)"}], "tags": [], "owner": {"reputation": 1672, "user_id": 4355253, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ee8cbfecfb7686f370b07eea52273c5?s=128&d=identicon&r=PG&f=1", "display_name": "Javier Elices", "link": "https://stackoverflow.com/users/4355253/javier-elices"}, "is_accepted": false, "score": 0, "last_activity_date": 1515072078, "creation_date": 1515072078, "answer_id": 48096267, "question_id": 48090602, "link": "https://stackoverflow.com/questions/48090602/what-is-the-correct-way-to-print-file-size-st-size-in-perl/48096267#48096267", "title": "What is the correct way to: print &quot;File size: $st-&gt;size&quot; in perl?", "body": "<p>@ikegami has provided more than enough ways of printing what you want. But maybe the reason why you don't get interpolation within the double quotes is not clear. The <code>-&gt;</code> operator in Perl is overloaded and has more than one use:</p>\n\n<ol>\n<li>If <code>$hash</code> is a hash ref, <code>$hash-&gt;{key}</code> or even <code>$hash-&gt;{'key'}</code> will access the key <code>key</code>.</li>\n<li>If <code>$array</code> is an array ref, <code>$array-&gt;[N]</code> will access index <code>N</code>.</li>\n<li>If <code>My::Module</code> is a module, <code>My::Module-&gt;member</code> will access <code>member</code> within the module. This way any function of the module may be accessed even if not exported.</li>\n<li>Finally, if <code>$object</code> is an object, <code>$object-&gt;member</code> will access <code>member</code> related to that object instance.</li>\n</ol>\n\n<p>So <code>$st-&gt;size</code> is accessing the member <code>size</code> of the object of type <code>File::stat</code>. In this case <code>size</code> is a method (function) that is being executed on <code>$st</code>, its object instance. String interpolation happens with variables, so:</p>\n\n<pre><code>print \"File size: $st-&gt;size\\n\";\n</code></pre>\n\n<p>Prints the value of <code>$st</code>, which is <code>File::stat=ARRAY(0x15bb4d8)</code> (the address of the ref may vary) and then the rest of the string <code>-&gt;size\\n</code>. The function invocation will be clear if we use <code>$st-&gt;size()</code> which is equivalent.</p>\n\n<p>As pointed out, to get the result of the function invocation we need to keep that piece of code outside of the doble quotes, like:</p>\n\n<pre><code>print 'File size: ' . $st-&gt;size . \"\\n\";\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 946, "user_id": 1765406, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/Koqta.jpg?s=128&g=1", "display_name": "vanHoesel", "link": "https://stackoverflow.com/users/1765406/vanhoesel"}, "is_accepted": false, "score": 0, "last_activity_date": 1515083477, "creation_date": 1515083477, "answer_id": 48099574, "question_id": 48090602, "link": "https://stackoverflow.com/questions/48090602/what-is-the-correct-way-to-print-file-size-st-size-in-perl/48099574#48099574", "title": "What is the correct way to: print &quot;File size: $st-&gt;size&quot; in perl?", "body": "<p>use the Baby Cart</p>\n\n<blockquote>\n  <p>Discovered by Larry Wall, 1994. (Alternate nicknames: \"shopping-trolley\", \"pram\", \"turtle\")</p>\n</blockquote>\n\n<p>it gets the job done in almost any situation where you need to print the result of a method:</p>\n\n<pre><code>print \"File size: @{[ $st-&gt;size ]}\\n\"\n</code></pre>\n\n<p>see: <a href=\"https://metacpan.org/pod/distribution/perlsecret/lib/perlsecret.pod\" rel=\"nofollow noreferrer\">Perl Secrets</a></p>\n"}], "owner": {"reputation": 107, "user_id": 2808707, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/177b84896458d1715e65fd911cdae8a1?s=128&d=identicon&r=PG&f=1", "display_name": "SiliconBadger", "link": "https://stackoverflow.com/users/2808707/siliconbadger"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 324, "favorite_count": 0, "accepted_answer_id": 48091083, "answer_count": 3, "score": 4, "last_activity_date": 1515083477, "creation_date": 1515050975, "last_edit_date": 1515051717, "question_id": 48090602, "link": "https://stackoverflow.com/questions/48090602/what-is-the-correct-way-to-print-file-size-st-size-in-perl", "title": "What is the correct way to: print &quot;File size: $st-&gt;size&quot; in perl?", "body": "<p>I'd like to know how to print the value of member <code>size</code> from a <code>File::stat</code> object, within double quotes.  I can <code>print \"File size: \" . $st-&gt;size</code> and get what I want:</p>\n\n<blockquote>\n  <p>File size: 4003856350</p>\n</blockquote>\n\n<p>But if I <code>print \"File size: $st-&gt;size\"</code>, I get:</p>\n\n<blockquote>\n  <p>File size: File::stat=ARRAY(0x15bb4d8)->size</p>\n</blockquote>\n\n<p>I've searched with terms like \"perl print dereference\", \"perl print object member\", \"perl print arrow operator\", and many other combinations.  I have tried using <code>$st-&gt;{size}</code>, but am informed that $st is not a hash.  I tried <code>$st-&gt;[size]</code>, since the original error seemed to indicate it's an array, but am told:</p>\n\n<blockquote>\n  <p>Bareword \"size\" not allowed while \"strict subs\" in use</p>\n</blockquote>\n\n<p>It seems like there should be a way for this to work within the quotes, and if so, I'd really like to know what it is.  I know I can use <code>printf</code> to do this without the concatenation, but after this much searching, trial, and error, my curiosity is piqued.</p>\n\n<p>Sample code:</p>\n\n<pre><code>#!/usr/bin/perl -w\nuse strict;\nuse utf8;\nuse File::stat;\n\nmy $st = stat(\"/path/to/file\");\nprint \"File size: $st-&gt;size\\n\";\nprint \"File size: \" . $st-&gt;size . \"\\n\";\nprintf \"File size: %d\\n\", $st-&gt;size;\n</code></pre>\n"}]