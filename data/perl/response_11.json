[{"tags": ["windows", "perl", "arguments"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1427333087, "post_id": 29268118, "comment_id": 46740198, "body": "It looks like you need to use backticks or <code>system</code> to execute the command line, but what is the application that takes <code>Args</code> as parameters?"}, {"owner": {"reputation": 695, "user_id": 2060441, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e093d389dd8919b616a4835e4adcf22f?s=128&d=identicon&r=PG", "display_name": "Nick P", "link": "https://stackoverflow.com/users/2060441/nick-p"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1427336872, "post_id": 29268118, "comment_id": 46741104, "body": "I&#39;m not sure how that is relevant to the question but test-echo-args.pl is an example of one such application. Assume the string $my_args comes from a file instead. How do we parse that string into an array?"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1427341196, "post_id": 29268118, "comment_id": 46742130, "body": "I&#39;m trying to understand what is <i>the script</i>, what is <i>the other script</i>, and what <code>Args=--test ...</code> is an example of. It&#39;s clear to you only because you know the answer! If you&#39;re looking to write a program that will work with its command-line arguments, or read from <code>STDIN</code> if there are none, then you just need to write <code>if ( @ARGV ) { ... }</code> But I suspect that there&#39;s more to your question than that"}, {"owner": {"reputation": 695, "user_id": 2060441, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e093d389dd8919b616a4835e4adcf22f?s=128&d=identicon&r=PG", "display_name": "Nick P", "link": "https://stackoverflow.com/users/2060441/nick-p"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1427351462, "post_id": 29268118, "comment_id": 46744638, "body": "Program A is designed to use <code>@ARGV</code> as is normal. Program B will call Program A but not with a proper command line. Instead it writes the string to a config file, and provides the config file name on the command line. Program A then needs to read this config file, find the argument string, and handle it. Since we already have code to parse <code>@ARGV</code>, we want to reuse it instead of reinventing the wheel. We will do this by splitting the string into an array. The examples above show this happening in a simplified way. Showing other details would have detracted from the point."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1427381090, "post_id": 29268118, "comment_id": 46760669, "body": "Tip: <code>while ($num &gt; 0) { --$num; ... }</code> =&gt; <code>while ($num--) { ... }</code>. Or in this case, <code>for (1..$num) { ... }</code>"}, {"owner": {"reputation": 695, "user_id": 2060441, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e093d389dd8919b616a4835e4adcf22f?s=128&d=identicon&r=PG", "display_name": "Nick P", "link": "https://stackoverflow.com/users/2060441/nick-p"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1427408224, "post_id": 29268118, "comment_id": 46776876, "body": "@ikegami yes definitely it&#39;s a bad habit, fixed"}, {"owner": {"reputation": 695, "user_id": 2060441, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e093d389dd8919b616a4835e4adcf22f?s=128&d=identicon&r=PG", "display_name": "Nick P", "link": "https://stackoverflow.com/users/2060441/nick-p"}, "reply_to_user": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1427408234, "post_id": 29268118, "comment_id": 46776880, "body": "@ThisSuitIsBlackNot good advice, done"}], "answers": [{"comments": [{"owner": {"reputation": 695, "user_id": 2060441, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e093d389dd8919b616a4835e4adcf22f?s=128&d=identicon&r=PG", "display_name": "Nick P", "link": "https://stackoverflow.com/users/2060441/nick-p"}, "edited": false, "score": 0, "creation_date": 1427338978, "post_id": 29270267, "comment_id": 46741638, "body": "Thanks, this will be interesting to look into even if I can&#39;t use it. I&#39;ll give it a try and update later. I understand there are some differences from unix around wildcard expansion but was unable to find that spec when searching."}, {"owner": {"reputation": 695, "user_id": 2060441, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e093d389dd8919b616a4835e4adcf22f?s=128&d=identicon&r=PG", "display_name": "Nick P", "link": "https://stackoverflow.com/users/2060441/nick-p"}, "edited": false, "score": 0, "creation_date": 1427350509, "post_id": 29270267, "comment_id": 46744399, "body": "Thanks a lot, I&#39;ve edited to add some working code. I was about to give up until I saw your answer at <a href=\"http://stackoverflow.com/questions/5529928/perl-win32api-and-pointers\" title=\"perl win32api and pointers\">stackoverflow.com/questions/5529928/perl-win32api-and-pointe&zwnj;&#8203;rs</a> which had the very useful encode/decode/pack/unpack examples that I could use."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 2, "last_activity_date": 1427338235, "creation_date": 1427338235, "answer_id": 29270267, "question_id": 29268118, "link": "https://stackoverflow.com/questions/29268118/parsing-string-into-argv-equivalent-windows-and-perl/29270267#29270267", "title": "Parsing string into ARGV equivalent (Windows and Perl)", "body": "<p>In unix systems, it's the shell that parses that shell command into strings. But in Windows, it's up to each application. I think this is normally done using the <a href=\"https://msdn.microsoft.com/en-us/library/ms647232.aspx\" rel=\"nofollow\"><code>CommandLineToArgv</code></a> system call (which you could call with the help of <a href=\"http://search.cpan.org/perldoc?Win32::API\" rel=\"nofollow\">Win32::API</a>), but the spec is documented <a href=\"https://msdn.microsoft.com/en-us/library/17w5ykft.aspx\" rel=\"nofollow\">here</a> if you want to reimplement it yourself.</p>\n"}, {"tags": [], "owner": {"reputation": 695, "user_id": 2060441, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e093d389dd8919b616a4835e4adcf22f?s=128&d=identicon&r=PG", "display_name": "Nick P", "link": "https://stackoverflow.com/users/2060441/nick-p"}, "is_accepted": false, "score": 3, "last_activity_date": 1427431273, "last_edit_date": 1427431273, "creation_date": 1427408153, "answer_id": 29289898, "question_id": 29268118, "link": "https://stackoverflow.com/questions/29268118/parsing-string-into-argv-equivalent-windows-and-perl/29289898#29289898", "title": "Parsing string into ARGV equivalent (Windows and Perl)", "body": "<p><strong>Answer - thanks ikegami!</strong></p>\n\n<p>I've posted a working program below that uses <code>Win32::API</code> and <code>CommandLineToArgvW</code> from <code>shell32.dll</code> based on ikegami's advice. It is intentionally verbose in the hopes that it'll be more easy to follow for anyone like myself who is extremely rusty with C and pointer arithmetic.</p>\n\n<p>Any tips are welcome, apart from the obvious simplifications :)</p>\n\n<pre><code>use strict;\nuse warnings;\n\nuse Encode     qw( encode decode );\nuse Win32::API qw( );\nuse Data::Dumper;\n\n# create a test argument string, with some variations, and pack it\n# apparently an empty string returns $^X which is documented so check before calling\nmy $arg_string = '--test 33 -3-t\"  \"es 33\\t2 ';\nmy $packed_arg_string = encode('UTF-16le', $arg_string.\"\\0\");\n\n# create a packed integer buffer for output\nmy $packed_argc_buf_ptr = pack('L', 0);\n\n# create then call the function and get the result\nmy $func = Win32::API-&gt;new('shell32.dll', 'CommandLineToArgvW', 'PP', 'N')\n   or die $^E;\nmy $ret = $func-&gt;Call($packed_arg_string, $packed_argc_buf_ptr);\n\n# unpack to get the number of parsed arguments\nmy $argc = unpack('L', $packed_argc_buf_ptr);\nprint \"We parsed $argc arguments\\n\";\n\n# parse the return value to get the actual strings\nmy @argv = decode_LPWSTR_array($ret, $argc);\nprint Dumper \\@argv;\n\n# try not to leak memory\nmy $local_free = Win32::API-&gt;new('kernel32.dll', 'LocalFree', 'N', '')\n    or die $^E; \n$local_free-&gt;Call($ret);\n\nexit;\n\nsub decode_LPWSTR_array {\n    my ($ptr, $num) = @_;\n\n    return undef if !$ptr;\n\n    # $ptr is the memory location of the array of strings (i.e. more pointers)\n    # $num is how many we need to get\n    my @strings = ();\n\n    for (1 .. $num) {\n        # convert $ptr to a long, using that location read 4 bytes - this is the pointer to the next string\n        my $string_location = unpack('P4', pack('L', $ptr));        \n        # make it human readable\n        my $readable_string_location = unpack('L', $string_location);       \n        # decode the string and save it for later\n        push(@strings, decode_LPCWSTR($readable_string_location));\n\n        # our pointers are 32-bit\n        $ptr += 4;      \n    }\n    return @strings;\n}\n\n# Copied from http://stackoverflow.com/questions/5529928/perl-win32api-and-pointers\nsub decode_LPCWSTR {\n   my ($ptr) = @_;\n\n   return undef if !$ptr;\n\n   my $sW = '';\n   for (;;) {\n      my $chW = unpack('P2', pack('L', $ptr));\n      last if $chW eq \"\\0\\0\";\n      $sW .= $chW;\n      $ptr += 2;\n   }\n\n   return decode('UTF-16le', $sW);   \n}\n</code></pre>\n"}], "owner": {"reputation": 695, "user_id": 2060441, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e093d389dd8919b616a4835e4adcf22f?s=128&d=identicon&r=PG", "display_name": "Nick P", "link": "https://stackoverflow.com/users/2060441/nick-p"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 786, "favorite_count": 0, "accepted_answer_id": 29270267, "answer_count": 2, "score": 3, "last_activity_date": 1427431273, "creation_date": 1427324473, "last_edit_date": 1427408191, "question_id": 29268118, "link": "https://stackoverflow.com/questions/29268118/parsing-string-into-argv-equivalent-windows-and-perl", "title": "Parsing string into ARGV equivalent (Windows and Perl)", "body": "<p><strong>Edit - Answer posted below</strong></p>\n\n<p>I have a script that usually uses <code>@ARGV</code> arguments but in some cases it is invoked by another script (which I cannot modify) that instead only passes a config filename which among other things has the command line options that should have been passed directly.</p>\n\n<p>Example:</p>\n\n<pre><code>Args=--test --pdf \"C:\\testing\\my pdf files\\test.pdf\"\n</code></pre>\n\n<p>If possible I'd like a way to parse this string into an array that would be identical to <code>@ARGV</code>.</p>\n\n<p>I have a workaround where I setup an external perl script that just echos <code>@ARGV</code>, and I invoke this script like below (standard boilerplate removed).</p>\n\n<p><strong>echo-args.pl</strong></p>\n\n<pre><code>print join (\"\\n\", @ARGV);\n</code></pre>\n\n<p><strong>test-echo-args.pl</strong></p>\n\n<pre><code>$my_args = '--test --pdf \"C:\\testing\\my pdf files\\test.pdf\"';\n@args = map { chomp ; $_ } `perl echo-args.pl $my_args`;\n</code></pre>\n\n<p>This seems inelegant but it works. Is there a better way without invoking a new process? I did try splitting and processing but there are some oddities on the command line e.g. <code>-a\"b c\"</code> becomes <code>'-ab c'</code> and <code>-a\"b\"\"</code> becomes <code>-ab\"</code> and I'd rather not worry about edge cases but I know that'll bite me one day if I don't.</p>\n"}, {"tags": ["perl", "unix", "command", "backticks"], "comments": [{"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 1, "creation_date": 1427319940, "post_id": 29267050, "comment_id": 46735893, "body": "Put the <code>-n 5</code> before the file name argument.  Options should precede file names \u2014 in all classic Unix systems.  The GNU toolset blurs that rule, but in case of doubt, options before file names will usually work."}, {"owner": {"reputation": 1033, "user_id": 1535666, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/82b3874f463469e9c48455b3bcf9c903?s=128&d=identicon&r=PG", "display_name": "sSmacKk", "link": "https://stackoverflow.com/users/1535666/ssmackk"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1427320161, "post_id": 29267050, "comment_id": 46735985, "body": "yeah I just realized that&#39;s the issue. I found an article that said put the option after the file name."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1427321315, "post_id": 29267050, "comment_id": 46736480, "body": "Remember to ignore that article from here onwards."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1427321325, "post_id": 29267050, "comment_id": 46736487, "body": "@Jonathan Leffler, Putting <code>$log</code> at the end does fix the problem, but not for the reason you think it does. See my answer."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1427321417, "post_id": 29267050, "comment_id": 46736519, "body": "@ikegami: Ah;  &#39;command not found&#39; vs &#39;file not found&#39;."}], "answers": [{"tags": [], "owner": {"reputation": 1033, "user_id": 1535666, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/82b3874f463469e9c48455b3bcf9c903?s=128&d=identicon&r=PG", "display_name": "sSmacKk", "link": "https://stackoverflow.com/users/1535666/ssmackk"}, "is_accepted": false, "score": 0, "last_activity_date": 1427320190, "creation_date": 1427320190, "answer_id": 29267210, "question_id": 29267050, "link": "https://stackoverflow.com/questions/29267050/tail-command-used-in-perl-backticks/29267210#29267210", "title": "Tail command used in perl backticks", "body": "<p>The answer to this question is to place the option -n 5 before the target file</p>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 6, "last_activity_date": 1427321437, "last_edit_date": 1427321437, "creation_date": 1427321004, "answer_id": 29267413, "question_id": 29267050, "link": "https://stackoverflow.com/questions/29267050/tail-command-used-in-perl-backticks/29267413#29267413", "title": "Tail command used in perl backticks", "body": "<p><code>$log</code> has an extraneous trailing newline, so you are executing</p>\n\n<pre><code>tail file.log\n -n 5            # Tries to execute a program named \"-n\"\n</code></pre>\n\n<p>Fix:</p>\n\n<pre><code>chomp($log);\n</code></pre>\n\n<p>Note that you will run into problems if log <code>$log</code> contains shell meta characters (such as spaces). Fix:</p>\n\n<pre><code>use String::ShellQuote qw( shell_quote );\n\nmy $tail_cmd = shell_quote('tail', '-n', '5', '--', $log);\n$nexusTime += nexusUploadTime(`$tail_cmd`);\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1427321958, "post_id": 29267540, "comment_id": 46736730, "body": "If he had properly escaped <code>$log</code>, he would have gotten <code>tail: cannot open `foo\\n&#39; for reading: No such file or directory</code>. (That&#39;s actually <code>\\ </code> followed by <code>n</code>, not a newline.) Just because you shell out doesn&#39;t mean you can&#39;t get good error messages."}], "tags": [], "owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "is_accepted": false, "score": 3, "last_activity_date": 1427321494, "last_edit_date": 1495535206, "creation_date": 1427321494, "answer_id": 29267540, "question_id": 29267050, "link": "https://stackoverflow.com/questions/29267050/tail-command-used-in-perl-backticks/29267540#29267540", "title": "Tail command used in perl backticks", "body": "<p><a href=\"https://stackoverflow.com/a/29267413/176646\">ikegami pointed out</a> your error, but I would recommend avoiding external commands whenever possible. They aren't portable and debugging them can be a pain, among other things. You can simulate <code>tail</code> with pure Perl code like this:</p>\n\n<pre><code>use strict;\nuse warnings;\n\nuse File::ReadBackwards;\n\nsub tail {\n    my ($file, $num_lines) = @_;\n\n    my $bw = File::ReadBackwards-&gt;new($file) or die \"Can't read '$file': $!\";\n\n    my ($lines, $count);\n    while (defined(my $line = $bw-&gt;readline) &amp;&amp; $num_lines &gt; $count++) {\n        $lines .= $line;\n    }\n\n    $bw-&gt;close;\n\n    return $lines;\n}\n\nprint tail('/usr/share/dict/words', 5);\n</code></pre>\n\n<h3>Output</h3>\n\n<pre class=\"lang-none prettyprint-override\"><code>ZZZ\nzZt\nZz\nZZ\nzyzzyvas\n</code></pre>\n\n<p>Note that if you pass a file name containing a newline, this will fail with</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>Can't read 'foo\n': No such file or directory at tail.pl line 10.\n</code></pre>\n\n<p>instead of the more cryptic</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>sh: line 1: -n: command not found\n</code></pre>\n\n<p>that you got from running the <code>tail</code> utility in backticks.</p>\n"}], "owner": {"reputation": 1033, "user_id": 1535666, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/82b3874f463469e9c48455b3bcf9c903?s=128&d=identicon&r=PG", "display_name": "sSmacKk", "link": "https://stackoverflow.com/users/1535666/ssmackk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1495, "favorite_count": 0, "accepted_answer_id": 29267413, "answer_count": 3, "score": 2, "last_activity_date": 1427321494, "creation_date": 1427319561, "question_id": 29267050, "link": "https://stackoverflow.com/questions/29267050/tail-command-used-in-perl-backticks", "title": "Tail command used in perl backticks", "body": "<p>I'm trying to run a tail command from within a perl script using the usual backticks.</p>\n\n<p>The section in my perl script is as follows:</p>\n\n<pre><code>$nexusTime += nexusUploadTime(`tail $log -n 5`);\n</code></pre>\n\n<p>So I'm trying to get the last 5 lines of this file but I'm getting the following error when the perl script finishes:</p>\n\n<pre><code>sh: line 1: -n: command not found\n</code></pre>\n\n<p>Even though when I run the command on the command line it is indeed successful and I can see the 5 lines from that particular.</p>\n\n<p>Not sure what is going on here. Why it works from command line but through perl it won't recognize the -n option.</p>\n\n<p>Anybody have any suggestions?</p>\n"}, {"tags": ["perl", "floating-point", "floating-accuracy"], "comments": [{"owner": {"reputation": 4191, "user_id": 1466640, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c0630f2d5ac5fb844675c58d3d2dfa57?s=128&d=identicon&r=PG&f=1", "display_name": "AKHolland", "link": "https://stackoverflow.com/users/1466640/akholland"}, "edited": false, "score": 4, "creation_date": 1427314768, "post_id": 29265669, "comment_id": 46733150, "body": "See: <a href=\"http://stackoverflow.com/questions/588004/is-floating-point-math-broken\" title=\"is floating point math broken\">stackoverflow.com/questions/588004/&hellip;</a>"}, {"owner": {"reputation": 64, "user_id": 3076013, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2601d7e81b9227cf4783bf5d83090f5f?s=128&d=identicon&r=PG&f=1", "display_name": "mrfish", "link": "https://stackoverflow.com/users/3076013/mrfish"}, "edited": false, "score": 0, "creation_date": 1427314983, "post_id": 29265669, "comment_id": 46733288, "body": "Thanks for the input. Is there a good perl workaround?"}, {"owner": {"reputation": 6468, "user_id": 293652, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/820308d5db420d7f0e1d0ba97e09f520?s=128&d=identicon&r=PG", "display_name": "Grant McLean", "link": "https://stackoverflow.com/users/293652/grant-mclean"}, "edited": false, "score": 1, "creation_date": 1427315165, "post_id": 29265669, "comment_id": 46733387, "body": "You could format your output to the required number of decimal places using <a href=\"http://perldoc.perl.org/functions/sprintf.html\" rel=\"nofollow noreferrer\">sprintf</a> / <a href=\"http://perldoc.perl.org/functions/printf.html\" rel=\"nofollow noreferrer\">printf</a>"}, {"owner": {"reputation": 81037, "user_id": 8454, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/2NlHs.png?s=128&g=1", "display_name": "Andy Lester", "link": "https://stackoverflow.com/users/8454/andy-lester"}, "edited": false, "score": 4, "creation_date": 1427315594, "post_id": 29265669, "comment_id": 46733653, "body": "This is why you don&#39;t deal with money as floating point numbers.  Represent $14.99 as integer value 1499."}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "reply_to_user": {"reputation": 81037, "user_id": 8454, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/2NlHs.png?s=128&g=1", "display_name": "Andy Lester", "link": "https://stackoverflow.com/users/8454/andy-lester"}, "edited": false, "score": 1, "creation_date": 1427315973, "post_id": 29265669, "comment_id": 46733846, "body": "@AndyLester Although I think the &quot;why&quot; in this question is a dup, the &quot;how can I fix it?&quot; part isn&#39;t addressed in the post I linked. Considering the potential repercussions of using floats in financial applications, your comment would make a great answer."}], "answers": [{"comments": [{"owner": {"reputation": 64, "user_id": 3076013, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2601d7e81b9227cf4783bf5d83090f5f?s=128&d=identicon&r=PG&f=1", "display_name": "mrfish", "link": "https://stackoverflow.com/users/3076013/mrfish"}, "edited": false, "score": 0, "creation_date": 1427317954, "post_id": 29266481, "comment_id": 46734918, "body": "Yeah, I have been pondering this. My program has to interface with several outside sources, all using the traditional currency format. I have to decide whether it is worth it to translate all these numbers as they come in."}, {"owner": {"reputation": 81037, "user_id": 8454, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/2NlHs.png?s=128&g=1", "display_name": "Andy Lester", "link": "https://stackoverflow.com/users/8454/andy-lester"}, "reply_to_user": {"reputation": 64, "user_id": 3076013, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2601d7e81b9227cf4783bf5d83090f5f?s=128&d=identicon&r=PG&f=1", "display_name": "mrfish", "link": "https://stackoverflow.com/users/3076013/mrfish"}, "edited": false, "score": 2, "creation_date": 1427318124, "post_id": 29266481, "comment_id": 46735016, "body": "You can used fixed decimal if your database allows it.  For instance, you can declare a column to be <code>DECIMAL(10,2)</code> and it will have exactly two decimal places. <a href=\"https://dev.mysql.com/doc/refman/5.0/en/fixed-point-types.html\" rel=\"nofollow noreferrer\">dev.mysql.com/doc/refman/5.0/en/fixed-point-types.html</a>"}], "tags": [], "owner": {"reputation": 81037, "user_id": 8454, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/2NlHs.png?s=128&g=1", "display_name": "Andy Lester", "link": "https://stackoverflow.com/users/8454/andy-lester"}, "is_accepted": false, "score": 2, "last_activity_date": 1427317478, "creation_date": 1427317478, "answer_id": 29266481, "question_id": 29265669, "link": "https://stackoverflow.com/questions/29265669/perl-addition-tacking-on-mystery-decimals/29266481#29266481", "title": "Perl addition tacking on mystery decimals", "body": "<p>This is why you don't deal with money as floating point numbers. Represent $14.99 as integer value 1499.  Divide by 100 only at the time when you want to display, as in:</p>\n\n<pre><code>my $price = 1499;\nprintf( \"You pay only %.2f\", $price/100 );\n</code></pre>\n"}], "owner": {"reputation": 64, "user_id": 3076013, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2601d7e81b9227cf4783bf5d83090f5f?s=128&d=identicon&r=PG&f=1", "display_name": "mrfish", "link": "https://stackoverflow.com/users/3076013/mrfish"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 71, "favorite_count": 0, "closed_date": 1427324275, "answer_count": 1, "score": -1, "last_activity_date": 1427317478, "creation_date": 1427314547, "last_edit_date": 1427314936, "question_id": 29265669, "link": "https://stackoverflow.com/questions/29265669/perl-addition-tacking-on-mystery-decimals", "closed_reason": "Duplicate", "title": "Perl addition tacking on mystery decimals", "body": "<p>I am running a perl script and basic addition operators seem to be not working. For my code</p>\n\n<pre><code>print $total_charges,\" 1 \\n\";\nprint $payments,\" payments\\n\";\n$total_charges+=$payments;\nprint $total_charges,\" 2 \\n\";\n</code></pre>\n\n<p>For this code, the output is the following</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>10192.19 1\n-401.99 payments\n9790.20000000005 2\n</code></pre>\n\n<p>If you do the math, this number would be correct except for the extra decimal places. What is going on?</p>\n\n<p>I need these numbers to be accurate. Any suggestions on fixing this, or do I just truncate to 2 decimals each time?</p>\n"}, {"tags": ["perl", "excel-2007"], "comments": [{"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 3, "creation_date": 1427314962, "post_id": 29265662, "comment_id": 46733275, "body": "<code>While</code> -&gt; <code>while</code> (all lowercase; Perl is case sensitive)"}, {"owner": {"reputation": 573, "user_id": 3273247, "user_type": "registered", "accept_rate": 53, "profile_image": "https://graph.facebook.com/100000049632169/picture?type=large", "display_name": "nulltron", "link": "https://stackoverflow.com/users/3273247/nulltron"}, "reply_to_user": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1427315364, "post_id": 29265662, "comment_id": 46733503, "body": "I&#39;m having to use notepad, I couldn&#39;t even tell thank you for the help!"}], "answers": [{"tags": [], "owner": {"reputation": 573, "user_id": 3273247, "user_type": "registered", "accept_rate": 53, "profile_image": "https://graph.facebook.com/100000049632169/picture?type=large", "display_name": "nulltron", "link": "https://stackoverflow.com/users/3273247/nulltron"}, "is_accepted": false, "score": 0, "last_activity_date": 1427375871, "creation_date": 1427375871, "answer_id": 29279481, "question_id": 29265662, "link": "https://stackoverflow.com/questions/29265662/perl-compilation-error-writing-to-xlsx-file/29279481#29279481", "title": "Perl Compilation error writing to .xlsx file", "body": "<p>As @ThisSuitIsBlackNot pointed out the <code>while</code> in my while loop was capatilized and needed to be lower-case. Thanks for the quick reply!</p>\n"}], "owner": {"reputation": 573, "user_id": 3273247, "user_type": "registered", "accept_rate": 53, "profile_image": "https://graph.facebook.com/100000049632169/picture?type=large", "display_name": "nulltron", "link": "https://stackoverflow.com/users/3273247/nulltron"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 129, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1427375871, "creation_date": 1427314526, "question_id": 29265662, "link": "https://stackoverflow.com/questions/29265662/perl-compilation-error-writing-to-xlsx-file", "title": "Perl Compilation error writing to .xlsx file", "body": "<pre><code> #!C:\\Perl\\bin\n #excel::writer attempt\n #allows IR-Serial-Parts tracking\n\n use strict;\n use warnings;\n use POSIX qw(strftime);\n use Excel::Writer::XLSX;\n use Spreadsheet::WriteExcel;\n\n\nmy $ref = strftime '%Y-%m-%d', localtime();     #create the datestamp\nmy $workbook;\nmy $worksheet;\nmy $i = 1;\nmy $ir = \"IR Number: \";\nmy $sr = \"UUT Serial: \";\nmy $pur = \"How many parts used: \";\nmy $part = \"Scan Part: \";\nmy @parts = \"\";\n\n\n    if(-e 'tracking.xlsx'){\n        my $workbook = Spreadsheet::WriteExcel-&gt;open('tracking.xlsx');  #open existing excel file\n\n    }\n    else{\n        my $workbook = Excel::Writer::XLSX-&gt;new('tracking.xlsx');   #open new Excel if the date on comp has changed\n\n    }\n        $worksheet = $workbook-&gt;add_worksheet($ref);\n        print $ir;  #ask user for IR #\n        my $irs = &lt;&gt;;   #get user IR \n        print $sr;  #ask user for serial\n        my $isr = &lt;&gt;;   #get serial from user\n        print $pur; #get the number of parts used that way we can run the while loop below\n        my $count = &lt;&gt;;\n\n    While ($i &lt; $count){\n\n        print $part;\n        my $scan = &lt;&gt;;\n            push @parts, $scan;\n            $i++;\n        }\n\n\n\n\n            $worksheet-&gt;write( 'A1', '$irs');\n            $worksheet-&gt;write( 'A2', '$isr');\n            $worksheet-&gt;write( 'A3', '@parts');\n</code></pre>\n\n<p>This script is in the first stages of dev. and I'm not a perl god in fact I'm brand-new but it's so awesome!!!\nWhen I ran for the first time I had some errors simple enough to work out from the error messages but I can't seem to make sense of this and I feel it should have been easier to fix than my previous errors any help explaining why this is happening would be awesome!</p>\n\n<pre><code> syntax error at writexcel.pl line 39, near \"){\"\n syntax error at writexcel.pl line 45, near \"}\"\n Execution of writexcel.pl aborted due to compilation errors.\n Press any key to continue . . .\n</code></pre>\n"}, {"tags": ["perl", "zip"], "comments": [{"owner": {"reputation": 68627, "user_id": 258523, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/102329bab02333104708ac179f35fd8d?s=128&d=identicon&r=PG&f=1", "display_name": "Etan Reisner", "link": "https://stackoverflow.com/users/258523/etan-reisner"}, "edited": false, "score": 0, "creation_date": 1427312940, "post_id": 29265152, "comment_id": 46732153, "body": "Doesn&#39;t matter what you use if <code>zip</code> won&#39;t let you rename as part of the zipping process (and I don&#39;t know that it does). This is a <code>zip</code> tool question. Does it let you map one path to another or do you need to make the actual directory (or symlink) that has the name you want first."}, {"owner": {"reputation": 68627, "user_id": 258523, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/102329bab02333104708ac179f35fd8d?s=128&d=identicon&r=PG&f=1", "display_name": "Etan Reisner", "link": "https://stackoverflow.com/users/258523/etan-reisner"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1427313234, "post_id": 29265152, "comment_id": 46732316, "body": "@ikegami That&#39;s still a &quot;tooling&quot; question though. The tool may be a direct perl zip module though. Either zip lets you do it and the tooling is the question or it doesn&#39;t. The tooling question is secondary though. And I did mention it."}, {"owner": {"reputation": 68627, "user_id": 258523, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/102329bab02333104708ac179f35fd8d?s=128&d=identicon&r=PG&f=1", "display_name": "Etan Reisner", "link": "https://stackoverflow.com/users/258523/etan-reisner"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1427313687, "post_id": 29265152, "comment_id": 46732530, "body": "@ikegami When I said &quot;a <code>zip</code> tool question&quot; I didn&#39;t mean the <code>zip</code> binary. I meant &quot;whatever you use to create the archive&quot; (I shouldn&#39;t have used backticks there). So my point was that the question is two parts. First, does zip (the library/etc.) let you manually specify the name. Second, (and only if the answer to the first part is &quot;yes&quot;) does any available zipping tool/binding/library allow you to do that. In either case, ultimately, the question of what you use doesn&#39;t matter (beyond whether it exposes the right knobs)."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1427313827, "post_id": 29265152, "comment_id": 46732618, "body": "It looks like I&#39;m alone not understanding what you mean by the text beneath <i>&quot;I have a file as such&quot;</i>. Are you saying you have a file <code>mydir\\bbb\\ccc\\myfile.txt</code>?"}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1427313942, "post_id": 29265152, "comment_id": 46732672, "body": "possible duplicate of <a href=\"http://stackoverflow.com/questions/16710341/linux-zip-command-add-a-file-with-different-name\">Linux zip command: add a file with different name</a>"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 68627, "user_id": 258523, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/102329bab02333104708ac179f35fd8d?s=128&d=identicon&r=PG&f=1", "display_name": "Etan Reisner", "link": "https://stackoverflow.com/users/258523/etan-reisner"}, "edited": false, "score": 1, "creation_date": 1427314781, "post_id": 29265152, "comment_id": 46733161, "body": "@Etan Reisner, Those two questions are the same thing. If the library can do it, then there is a tool that can do it given that you consider the library to be a tool."}], "answers": [{"comments": [{"owner": {"reputation": 68627, "user_id": 258523, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/102329bab02333104708ac179f35fd8d?s=128&d=identicon&r=PG&f=1", "display_name": "Etan Reisner", "link": "https://stackoverflow.com/users/258523/etan-reisner"}, "edited": false, "score": 0, "creation_date": 1427320515, "post_id": 29265637, "comment_id": 46736177, "body": "Might make sense to add this to the ticket being marked as duplicate so that they are in the same place."}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 1, "last_activity_date": 1427315297, "last_edit_date": 1427315297, "creation_date": 1427314444, "answer_id": 29265637, "question_id": 29265152, "link": "https://stackoverflow.com/questions/29265152/zipping-a-file-with-a-new-path/29265637#29265637", "title": "Zipping a file with a new path", "body": "<p>If I understand you correctly then it looks like the <a href=\"https://metacpan.org/module/Archive::Zip\" rel=\"nofollow\"><code>Archive::Zip</code></a> module will do what you need.</p>\n\n<p>Once you have created an archive, you can use <code>addFile</code> to add an archive member whose path is different from the source. Like this</p>\n\n<pre><code>$zip-&gt;addFile( {\n  filename =&gt; 'mydir\\bbb\\ccc\\myfile.txt',\n  zipName  =&gt; 'ddd\\myfile.txt',\n} );\n</code></pre>\n\n<p>For instance, this program creates a zip archive and adds the contents of the current script (defined by <code>$0</code>) as a member called <code>ddd\\current.pl</code>. The archive is then written to a file called <code>current.zip</code>. If you open that file using <a href=\"http://www.7-zip.org/\" rel=\"nofollow\">7-Zip</a> or similar then you will see <code>ddd\\current.pl</code>.</p>\n\n<pre><code>use strict;\nuse warnings;\n\nuse Archive::Zip;\n\nmy $zip = Archive::Zip-&gt;new;\n\n$zip-&gt;addFile( {\n  filename =&gt; $0,\n  zipName  =&gt; 'ddd\\current.pl',\n} );\n\n$zip-&gt;writeToFileNamed('current.zip');\n</code></pre>\n"}], "owner": {"reputation": 578, "user_id": 1141084, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/6dace9dfb1d050e3ea3916e7f8c1f853?s=128&d=identicon&r=PG", "display_name": "Paul", "link": "https://stackoverflow.com/users/1141084/paul"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 72, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1427316948, "creation_date": 1427312887, "last_edit_date": 1427316948, "question_id": 29265152, "link": "https://stackoverflow.com/questions/29265152/zipping-a-file-with-a-new-path", "title": "Zipping a file with a new path", "body": "<p>I have the following directory tree:</p>\n\n<pre><code>mydir/\nmydir/bbb/\nmydir/bbb/ccc/\nmydir/bbb/ccc/myfile.txt\n</code></pre>\n\n<p>The file zips as follows:</p>\n\n<pre><code>bbb\\ccc\\myfile.txt\n</code></pre>\n\n<p>I want it to appear as</p>\n\n<pre><code>\\ddd\\myfile.txt\n</code></pre>\n\n<p>The command-line <code>zip</code> utility does not seem to have option. Is there another way, perhaps using Perl. I'm using a unix system.</p>\n"}, {"tags": ["perl", "methods", "package"], "answers": [{"comments": [{"owner": {"reputation": 179, "user_id": 1237081, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/8720d73dbe05f384345414f94d3a56cd?s=128&d=identicon&r=PG", "display_name": "David Levner", "link": "https://stackoverflow.com/users/1237081/david-levner"}, "edited": false, "score": 2, "creation_date": 1427462174, "post_id": 29265010, "comment_id": 46797733, "body": "First, I would like to thank all the responders. All suggestions had merit. I decided to package-qualify my sub declarations because that is the simplest solution requiring the fewest coding changes. Autoload is definitely a good feature, but I think it is more complex. Moose also has many benefits, but I can&#39;t rewrite thousands of lines of code at this point. I would be better off learning Moose on a new project."}], "tags": [], "owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "is_accepted": true, "score": 2, "last_activity_date": 1427312438, "creation_date": 1427312438, "answer_id": 29265010, "question_id": 29264837, "link": "https://stackoverflow.com/questions/29264837/in-perl-how-can-i-write-methods-in-multiple-packages/29265010#29265010", "title": "In perl, how can I write methods in multiple packages?", "body": "<p>You can use a package qualifier on a <code>sub</code> declaration</p>\n\n<pre><code>package Student::Enroll;\n...\nsub foo { ... }   # Student::Enroll::foo\nsub Student::enroll { ... }  # Student::enroll, not Student::Enroll::enroll\n...\n</code></pre>\n\n<p>Of course if the only definition of <code>Student::enroll</code> in <code>Student/Enroll.pm</code>, and some program needs the <code>Student::enroll</code> function, that program will have to load <code>Student/Enroll.pm</code> and all of the <code>Student::Enroll</code> package.</p>\n"}, {"tags": [], "owner": {"reputation": 2614, "user_id": 1803586, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/3eVpM.png?s=128&g=1", "display_name": "edem", "link": "https://stackoverflow.com/users/1803586/edem"}, "is_accepted": false, "score": 1, "last_activity_date": 1427654631, "last_edit_date": 1427654631, "creation_date": 1427327377, "answer_id": 29268688, "question_id": 29264837, "link": "https://stackoverflow.com/questions/29264837/in-perl-how-can-i-write-methods-in-multiple-packages/29268688#29268688", "title": "In perl, how can I write methods in multiple packages?", "body": "<p>It easily can be done with help of AUTOLOAD method.</p>\n\n<pre><code>package Student::Enroll;\nuse strict;\nuse warnings;\nuse v5.14;\n\nsub enroll { say \"Good luck $_[1]\";  }\n\n1;\n</code></pre>\n\n<p>and </p>\n\n<p><strong>NEW VERSION:</strong></p>\n\n<pre><code>package Student;\nuse strict;\nuse warnings;\nuse v5.14;\nuse Carp qw/croak/;\n\n{\n    my $_additional_methods = {\n        enroll =&gt; undef\n    };\n\n    sub _can_access { \n        exists $_additional_methods-&gt;{$_[0]} \n    }\n}\n\nsub new { bless {}, shift }\n\n# Subroutine AUTOLOAD will be called always \n# when someone calls a method (a subroutine) which \n# isn't present in this module.\n# In our case \"enroll\" will be called from AUTOLOAD\n# only one and next time of calling it will be called\n# directly as a normal method of the class since\n# we create a typeglob ref for it.\nsub AUTOLOAD {\n    no strict 'refs';\n\n    our $AUTOLOAD; # in this global variables are kept\n                   # the full name of a called method\n\n    my $package_method = $AUTOLOAD;                   \n\n    # making up the full method name\n    $AUTOLOAD =~ s/(.*)::(\\w+)$/Student::Enroll::$2/;\n\n    my $package = $1;\n    my $method  = $2;\n\n    if ( _can_access($method) ) { \n\n        eval 'use Student::Enroll;'; # loading of the necessary class\n\n        &amp;$AUTOLOAD(@_); # calling the method from Student::Enroll class\n\n        no warnings 'redefine';                    \n        *{$package_method} = \\&amp;AUTOLOAD;\n    } else {\n        croak \"Can't locate object method '$method' via package '$package'\";\n    }\n}\n\npackage main;\nuse strict;\nuse warnings;\n\nmy $student = Student-&gt;new;\n$student-&gt;enroll('David');\n$student-&gt;enroll('David');\n$student-&gt;enoll('David');\n</code></pre>\n\n<p><strong>OLD VERSION:</strong></p>\n\n<pre><code>package Student;\nuse strict;\nuse warnings;\nuse v5.14;\n\nsub new { bless {}, shift }\n\n# Subroutine AUTOLOAD will be called always \n# when someone calls a method (a subroutine) which \n# isn't present in this module (enroll in our case)\nsub AUTOLOAD {\n    no strict 'refs';\n\n    our $AUTOLOAD; # in this global variables are kept\n                   # the full name of a called method\n\n    eval 'use Student::Enroll;'; # loading of the necessary class\n\n    # making up the full method name\n    $AUTOLOAD =~ s/.*::(\\w+)$/Student::Enroll::$1/;\n    &amp;$AUTOLOAD; # calling the method from Student::Enroll class\n                # Note: array @_ of args is passed automatically\n}\n\npackage main;\nuse strict;\nuse warnings;\n\nmy $student = Student-&gt;new;\n$student-&gt;enroll('David');\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 946, "user_id": 1765406, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/Koqta.jpg?s=128&g=1", "display_name": "vanHoesel", "link": "https://stackoverflow.com/users/1765406/vanhoesel"}, "is_accepted": false, "score": 1, "last_activity_date": 1427385405, "creation_date": 1427385405, "answer_id": 29283193, "question_id": 29264837, "link": "https://stackoverflow.com/questions/29264837/in-perl-how-can-i-write-methods-in-multiple-packages/29283193#29283193", "title": "In perl, how can I write methods in multiple packages?", "body": "<p>First of all, I would suggest to start programming in the 'Modern Perl' way and move away from old fashioned Perl5 blessed hashes for object... </p>\n\n<pre><code>use Moose;\n</code></pre>\n\n<p>Which is a proper OO system for Perl, borrowed from Perl6.</p>\n\n<p>The moment your classes are becoming 'big', it's time to reconsider what actually went into the class and what is not supposed to be there. Some attributes and methods might actually be very general and could be inherited from a super class. But Moose (and Moo) also have 'Roles', behaviour that can be added on top of another class.</p>\n\n<p>Let me show how my 'Student' class looks like:</p>\n\n<pre><code>package College::Student;\n\nuse Moose;\n\nextends 'Person';\n\nhas 'student_registration_number' =&gt; (\n    is       =&gt; 'ro',\n    isa      =&gt; 'Int',\n    required =&gt; 1,\n);\n\nwith 'College::Enrolment';\n\n1;\n</code></pre>\n\n<p>What is happening:</p>\n\n<p>line 01: declare the name of the package, <code>College::Student</code>, a separate namespace for College related stuff.</p>\n\n<p>line 03: <code>use Moose;</code> Naturally!</p>\n\n<p>line 05: We are using another class, <code>Person</code> and use that as a base class. Now, in this case I did create a <code>College::Student</code> class, a more specific class then a general purpose <code>Person</code> class (not in the <code>College</code> namespace either).</p>\n\n<p>line 07: specific for this <code>College::Student</code> class, only here we use a <code>student_registration_number</code>, which is a read-only attribute of an integer type and is required.</p>\n\n<p>line 12: with the role <code>College::Enrolment</code> we want a student to have additional behaviour - so that it probably can enroll to a course and what ever methods and attributes are needed in order to do that, which are of no importance here, all we want to take care of here, is that it can do that.</p>\n\n<p>Now have a brief look inside that 'College::Enrolment' class:</p>\n\n<pre><code>package College::Enrolment;\n\nuse Moose::Role;\n\nsub enroll {\n    my $self = shift; # a person\n    my $args = {@_};\n    print \n        $self-&gt;name,\n        \" is being enrolled into: \",\n        $args-&gt;{'course'}-&gt;course_title,\n        \"\\n\",\n    ;   \n};\n\nsub un_enroll {\n};\n\n1;\n</code></pre>\n\n<p>line 01: a nice namespace, again something to do with Colleges.</p>\n\n<p>line 03: this is a Moose::Role that can be applied to other objects... you can't instantiate these!</p>\n\n<p>line 05: Ah... obviously, there is an <code>enroll</code> instance method,</p>\n\n<p>line 16: and an un_enroll instance method as well.</p>\n\n<p>For completeness, the base class <code>Person</code> which looks very basic and no specific things for students.</p>\n\n<pre><code>package Person;\n\nuse Moose;\n\nhas name =&gt; (\n    is       =&gt; 'ro',\n    isa      =&gt; 'Str',\n    required =&gt; 1,\n);\n\nhas date_of_birth =&gt; (\n    is       =&gt; 'ro',\n    isa      =&gt; 'DateTime',\n    required =&gt; 1,\n);\n\n1;\n</code></pre>\n\n<p>One could extend this class also for a <code>College::Professor</code> like:</p>\n\n<pre><code>package College::Professor;\n\nuse Moose;\n\nextends 'Person';\n\nhas 'employee_number' =&gt; (\n    is       =&gt; 'ro',\n    isa      =&gt; 'Int',\n    required =&gt; 1,\n);\n\nwith 'College::Enrolment'\n\n1;\n</code></pre>\n\n<p>Now, a <code>College::Professor</code> is a <code>Person</code> however, it does not have the <code>College::Enrolment</code> role.</p>\n\n<p>If you would like,it's also very easy to have a class for <code>College::GuestStudent</code> which might not have a registration number, but do need to be able to enroll --- with that same role.</p>\n\n<p>Here kicks in the power of Moose Roles...</p>\n\n<p>instead of creating huge classes, try to split of as many roles you can think of that are logical combinations of methods and their attributes. This makes it way more maintainable - and testable. And soon you'll see that roles are a way more logical way to build classes, instead of trying to do inheritance - or even worse, multiple inheritance.</p>\n\n<p>Oh.. something missing:</p>\n\n<pre><code>use strict;\nuse warnings;\n\nuse College::Student;\nuse College::Course;\n\nuse DateTime::Format::ISO8601;\n\nmy $study = College::Course-&gt;new(\n    course_title  =&gt; \"French for beginners\"\n);\n\nmy $pupil = College::Student-&gt;new(\n    name          =&gt; \"John Doe\",\n    date_of_birth =&gt; DateTime::Format::ISO8601-&gt;parse_datetime(\"2001-07-10\"),\n    student_registration_number\n                  =&gt; '123456',\n\n);\n\n$pupil-&gt;enroll( course =&gt; $study );\n\n\n__END__\n</code></pre>\n\n<p>and don't forget to read up on Moose at</p>\n\n<p><a href=\"http://modernperlbooks.com/books/modern_perl_2014/07-object-oriented-perl.html\" rel=\"nofollow\">http://modernperlbooks.com/books/modern_perl_2014/07-object-oriented-perl.html</a></p>\n\n<p><a href=\"http://www.theperlreview.com/articles/moose.html\" rel=\"nofollow\">http://www.theperlreview.com/articles/moose.html</a></p>\n"}], "owner": {"reputation": 179, "user_id": 1237081, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/8720d73dbe05f384345414f94d3a56cd?s=128&d=identicon&r=PG", "display_name": "David Levner", "link": "https://stackoverflow.com/users/1237081/david-levner"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 88, "favorite_count": 0, "accepted_answer_id": 29265010, "answer_count": 3, "score": 1, "last_activity_date": 1427654631, "creation_date": 1427311839, "question_id": 29264837, "link": "https://stackoverflow.com/questions/29264837/in-perl-how-can-i-write-methods-in-multiple-packages", "title": "In perl, how can I write methods in multiple packages?", "body": "<p>I am writing a perl class, which for the purpose of this question I will call Student. The Student class will have a lot of methods, and for the sake of tidiness and efficiency, I don't want to put them all in one source file.</p>\n\n<p>Let's say that Student.pm is <code>package Student</code> and contains <code>sub new</code>, the constructor, and that Student/Enroll.pm is <code>package Student::Enroll</code> and contains <code>sub enroll</code>, a method. I am writing <code>sub enroll</code> like this:</p>\n\n<pre><code>sub enroll\n{\n    my ($student) = @_;\n\n    # do something;\n    return;\n}\n\n*Student::enroll = \\&amp;enroll;\n</code></pre>\n\n<p>In my main program, I can write <code>my $student = new Student()</code> and <code>$student-&gt;enroll()</code>. This works but it's opaque. Does it have any disadvantages that I am overlooking?</p>\n\n<p>I haven't tried exporting <code>enroll</code> from the package Student::Enroll into the package Student. It's not what I want because then I would need to write <code>use Student::Enroll</code> in package Student, and I don't want to do that. There will be programs that need the Student package but don't need Student::Enroll.</p>\n\n<p>Is there a better, cleaner way to write <code>sub enroll</code> in Student/Enroll.pm so that it becomes a Student method?</p>\n"}, {"tags": ["mysql", "perl", "centos", "iptables"], "comments": [{"owner": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "edited": false, "score": 1, "creation_date": 1427309252, "post_id": 29263943, "comment_id": 46729976, "body": "Think about network performance in the case where each tcp packet invokes separate process."}, {"owner": {"reputation": 4116, "user_id": 4402825, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-3ESJ4SrCVfE/AAAAAAAAAAI/AAAAAAAAFO8/yBWcRYAN94s/photo.jpg?sz=128", "display_name": "Ben Grimm", "link": "https://stackoverflow.com/users/4402825/ben-grimm"}, "edited": false, "score": 3, "creation_date": 1427309759, "post_id": 29263943, "comment_id": 46730312, "body": "Use the right tool for the job. In this case it&#39;s <a href=\"http://ipset.netfilter.org/\" rel=\"nofollow noreferrer\"><code>ipset</code></a>. Your Perl script can pull all of the IP ranges from your MySQL database and use them in calls to <code>ipset</code>. Then block the entire set using <code>iptables</code>."}], "answers": [{"comments": [{"owner": {"reputation": 200, "user_id": 1749141, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/e9abfc59ea655035c803a8377efdab6f?s=128&d=identicon&r=PG", "display_name": "Y.K.", "link": "https://stackoverflow.com/users/1749141/y-k"}, "edited": false, "score": 0, "creation_date": 1427572434, "post_id": 29264714, "comment_id": 46834919, "body": "Thanks for the info. Do you kniw if it is possible though? Having a rule point to a script which returns a target? (ACCPET/DROP)"}, {"owner": {"reputation": 4116, "user_id": 4402825, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-3ESJ4SrCVfE/AAAAAAAAAAI/AAAAAAAAFO8/yBWcRYAN94s/photo.jpg?sz=128", "display_name": "Ben Grimm", "link": "https://stackoverflow.com/users/4402825/ben-grimm"}, "reply_to_user": {"reputation": 200, "user_id": 1749141, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/e9abfc59ea655035c803a8377efdab6f?s=128&d=identicon&r=PG", "display_name": "Y.K.", "link": "https://stackoverflow.com/users/1749141/y-k"}, "edited": false, "score": 0, "creation_date": 1427576250, "post_id": 29264714, "comment_id": 46836065, "body": "Nope, not possible as far as I know. But, you could write a <code>netfilter</code> kernel module if you were so inclined."}], "tags": [], "owner": {"reputation": 4116, "user_id": 4402825, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-3ESJ4SrCVfE/AAAAAAAAAAI/AAAAAAAAFO8/yBWcRYAN94s/photo.jpg?sz=128", "display_name": "Ben Grimm", "link": "https://stackoverflow.com/users/4402825/ben-grimm"}, "is_accepted": false, "score": 3, "last_activity_date": 1427312479, "last_edit_date": 1427312479, "creation_date": 1427311379, "answer_id": 29264714, "question_id": 29263943, "link": "https://stackoverflow.com/questions/29263943/how-can-i-invoke-a-shell-or-perl-script-from-iptables/29264714#29264714", "title": "How can I invoke a shell or Perl script from iptables?", "body": "<p>It would be far too slow to launch <code>perl</code> for every matching packet. The right tool for this sort of thing is <a href=\"http://ipset.netfilter.org/\" rel=\"nofollow\"><code>ipset</code></a>, and there is much more information and documentation available on the <code>ipset</code> <a href=\"http://ipset.netfilter.org/ipset.man.html\" rel=\"nofollow\">man page</a>. </p>\n\n<p>In CentOS you can install it with <code>yum</code>. Naturally, all of these commands and the script need to run as root:</p>\n\n<pre><code># yum install ipset\n</code></pre>\n\n<p>Next install the kernel modules (you'll want this to happen at boot as well): </p>\n\n<pre><code># modprobe -v ipset ip_set_hash_netport\n</code></pre>\n\n<p>And then use a script like the following to populate an <code>ipset</code> and block IP's from its ranges using <code>iptables</code>: </p>\n\n<pre><code>#!/usr/bin/env perl\nuse strict;\nuse warnings; \nuse DBI; \n\nmy $dbh = DBI-&gt;connect('... your DSN ...',...);\n# I have no knowledge of your schema, but if you can pull the \n# address range in the form: AA.BB.CC.DD/NN\nmy $ranges = $dbh-&gt;selectcol_arrayref(\n   q{SELECT cidr FROM your_table WHERE country_code IN ('CN',...)});\n\n`ipset create geoblock hash:netport`;\nfor (@$ranges) { \n    # to match on port 80:\n    `ipset add geoblock $_,80`; \n}\n`iptables -I INPUT -m set --set geoblock src -j DROP`;\n</code></pre>\n\n<p>If you would like to block all ports rather than just 80, use the <code>ip_set_hash_net</code> module instead of <code>ip_set_hash_netport</code>, change <code>hash:netport</code> to <code>hash:net</code>, and remove <code>,80</code> from the ipset command. </p>\n"}], "owner": {"reputation": 200, "user_id": 1749141, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/e9abfc59ea655035c803a8377efdab6f?s=128&d=identicon&r=PG", "display_name": "Y.K.", "link": "https://stackoverflow.com/users/1749141/y-k"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 335, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1427573684, "creation_date": 1427308991, "last_edit_date": 1427573684, "question_id": 29263943, "link": "https://stackoverflow.com/questions/29263943/how-can-i-invoke-a-shell-or-perl-script-from-iptables", "title": "How can I invoke a shell or Perl script from iptables?", "body": "<p>We're using CentOS and would like to ban several Asian countries from accessing the entire server. Almost every IP we check which has tried to hack into our server is allocated to an Asian country (Russia, China, Pakistan, etc.)</p>\n\n<p>We have an IP to country MySQL database we can efficiently query and would like to try something like: </p>\n\n<pre><code>-A INPUT -p tcp -m tcp --dport 80 -j /path/to/perlscript.pl\n</code></pre>\n\n<p>The script would need the IP passed in as an argument, then it would return either an ACCEPT or DROP target?</p>\n\n<p>Thanks for the answers, here's my follow up. </p>\n\n<p>Do you know if it is possible though? Having a rule point to a script which returns a target? (ACCPET/DROP) </p>\n\n<p>Not entirely sure how ipset works, will have to experiment I guess, but it looks like it creates a single rule. How would it handle Russia for example, which has over 6000 ranges assigned to it? And we want to add probably 20 - 40 countries in total, so we could end up needing to add in excess of 100,000 ranges. Wouldn't the overhead of a single MySQL query be less taxing? </p>\n\n<pre><code>SELECT country FROM ip_countries WHERE $VAR{ip} &gt;= range1 &amp;&amp; $VAR{ip} &lt;= range2\n</code></pre>\n\n<p>The database we use is freely available here : <a href=\"http://software77.net/geo-ip/\" rel=\"nofollow\">http://software77.net/geo-ip/</a></p>\n\n<p>It represents IPs in the database by converting the IP to a number using this formula : </p>\n\n<pre><code>$VAR{numberedIP} = $octs[3] + ($octs[2] * 256) + ($octs[1] * 256 * 256) + ($octs[0] * 256 * 256 * 256); \n</code></pre>\n\n<p>It will store the start of the range in the \"range1\" column, and the end of the range in the \"range2\" column.</p>\n\n<p>So you can see how we'd look up an IP using the above query. Literally takes less than a hundredth of a second to get a result and it's quite accurate. We have one website on a dedicated server, quite low traffic. But as with all servers I have ever checked, this one is hit daily by hackers' robots, checking email accounts, FTP accounts etc. And just about every web server I've ever worked on is compromised sooner or later. In our case, 99.99% of traffic from Asian countries has criminal intent attached to it. </p>\n\n<p>We'd like this to run via iptables so that all ports are covered, not just HTTP for example by using directives in say .htaccess. </p>\n\n<p>Do you think ipset would still be faster and more efficient?</p>\n"}, {"tags": ["regex", "bash", "perl"], "comments": [{"owner": {"reputation": 8288, "user_id": 254252, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3d86d93abcc56d7b5843cc1ce58bbfd6?s=128&d=identicon&r=PG", "display_name": "Christopher Creutzig", "link": "https://stackoverflow.com/users/254252/christopher-creutzig"}, "edited": false, "score": 2, "creation_date": 1427308710, "post_id": 29263747, "comment_id": 46729610, "body": "Welcome to SO. With questions like this, we more or less expect you to show what you got working, and where exactly you are stuck. Also, it would really help if you could trim down your examples, making them easier to read. One last thing: Why does it have to be regex? They&#39;re really good for lots of things, but severly limited when it comes to actual parsing."}, {"owner": {"reputation": 41, "user_id": 4084083, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a2ff2da72457efbd13ad68d4ca2214af?s=128&d=identicon&r=PG&f=1", "display_name": "Bobby B.", "link": "https://stackoverflow.com/users/4084083/bobby-b"}, "reply_to_user": {"reputation": 8288, "user_id": 254252, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3d86d93abcc56d7b5843cc1ce58bbfd6?s=128&d=identicon&r=PG", "display_name": "Christopher Creutzig", "link": "https://stackoverflow.com/users/254252/christopher-creutzig"}, "edited": false, "score": 0, "creation_date": 1427309842, "post_id": 29263747, "comment_id": 46730363, "body": "@ChristopherCreutzig Thanks for the guidance.  As you pointed out, I&#39;m obviously a newb to this forum, but I&#39;m an even bigger newb at Perl. I thought regex was the best way to proceed, since I&#39;m familiar with it, and the structure of the data can change from line to line.  I.e. a field which contains quote-wrapping could simply be - on the next line. The regex I would typically use from a library languate would be pretty simple.  Something like &#39;\\&quot;[^\\&quot;]*\\&quot;|\\S+&#39; would do it.  I was hopeful there is something similar in Perl.  My apologies for whatever I&#39;ve done to offend you."}, {"owner": {"reputation": 8288, "user_id": 254252, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3d86d93abcc56d7b5843cc1ce58bbfd6?s=128&d=identicon&r=PG", "display_name": "Christopher Creutzig", "link": "https://stackoverflow.com/users/254252/christopher-creutzig"}, "edited": false, "score": 0, "creation_date": 1427310067, "post_id": 29263747, "comment_id": 46730492, "body": "That&#39;s fine. We&#39;re all n00bs at a lot of things. But if you don&#39;t show what you got, we literally cannot help. And if we feel like you&#39;re not doing the basics of reducing the problem to something that we can read quickly, we may want to spend our precious time helping those who do, so you are really doing yourself a favor by trimming everything down to show exactly the place where you are stuck right now. Ask a new question for the next problem after that."}, {"owner": {"reputation": 8288, "user_id": 254252, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3d86d93abcc56d7b5843cc1ce58bbfd6?s=128&d=identicon&r=PG", "display_name": "Christopher Creutzig", "link": "https://stackoverflow.com/users/254252/christopher-creutzig"}, "edited": false, "score": 1, "creation_date": 1427310198, "post_id": 29263747, "comment_id": 46730558, "body": "I don&#39;t feel offended, sorry if anything I wrote made it look like that. <code>(\\&quot;[^&quot;]*\\&quot;|[^&quot;]\\S*)</code> should work just fine inside a perl re, but I have no idea if you know how to use them in perl without seeing any of your code."}], "answers": [{"tags": [], "owner": {"reputation": 179, "user_id": 1237081, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/8720d73dbe05f384345414f94d3a56cd?s=128&d=identicon&r=PG", "display_name": "David Levner", "link": "https://stackoverflow.com/users/1237081/david-levner"}, "is_accepted": true, "score": 0, "last_activity_date": 1427310589, "creation_date": 1427310589, "answer_id": 29264453, "question_id": 29263747, "link": "https://stackoverflow.com/questions/29263747/perl-structured-regex/29264453#29264453", "title": "PERL structured regex", "body": "<p>Here is a Perl script that does what you want. I used your first line of data for testing.</p>\n\n<pre><code>use English;\nuse strict;\n\nmy $line = '\"[31/01/2015:00:00:00GMT]\" \"device\" 255.255.255.1 2015-01-31 00:00:00 1231231234 - xxxxxxx SUB\\xxxxxxx \"Mozilla/5.0 (compatible; MSIE 9.0; Windows NT 6.1; WOW54; Trident/5.0)\" 1.255.255.255 text/htm;%20charset=utf-8 hxxp://www.google.com/path?query&amp;somevar=1&amp;anothervar=\"DOUBLEQUOTESHERE\"&amp;thirdvar=jlk;asdfhlkjahgjkdfgerw 200 OBSERVED \"Category1;Category 2\" \"none\" \"none\" TCP_MSG - 0 99 512 512 www.google.com \"GET hxxp://www.google.com/somestring.php?href=http%3A%2F%2Fsomesite.banana.com%2Fquery%2Fv=1&amp;somevar=1&amp;fin=0 HTTP/1.1\"';\n\nmy @fields;\nwhile ($line ne \"\")\n    {\n    if  (($line =~ /^\"(?&lt;field&gt;[^\"]*)\"(\\s+|$)/p) or ($line =~ /^(?&lt;field&gt;\\S+)(\\s+|$)/p))\n        {\n        push @fields, $+{field};\n        $line = ${^POSTMATCH};\n        } # if\n        else {die \"Parse error when line is '$line'\\n\";}\n    } # while\n\nmy $last_field = pop @fields;\npush @fields, split /\\s+/, $last_field;\nprint join(\"\\n\", @fields) . \"\\n\";\nexit 0;\n</code></pre>\n\n<p>Things to note:</p>\n\n<ol>\n<li>'use strict;' is very important for catching typos and other silly errors.</li>\n<li>In the two regular expressions within the while loop, I used named capturing because I think it's more readable to refer to $+{field} than $1.</li>\n<li>I ended these two regular expressions with /p so I could refer to ${^POSTMATCH} instead of $POSTMATCH. ${^POSTMATCH} is more efficient.</li>\n<li>If the first regular expression matches $line, the second expression will not be evaluated.</li>\n</ol>\n\n<p>I wrote the code above quickly and it is not industrial strength. For example, the code will fail if the input data begins with a space.</p>\n"}, {"comments": [{"owner": {"reputation": 41, "user_id": 4084083, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a2ff2da72457efbd13ad68d4ca2214af?s=128&d=identicon&r=PG&f=1", "display_name": "Bobby B.", "link": "https://stackoverflow.com/users/4084083/bobby-b"}, "edited": false, "score": 1, "creation_date": 1427312315, "post_id": 29264534, "comment_id": 46731816, "body": "This is very elegant, and it&#39;s probably what Chris meant when he suggested RE might not be the best solution.  I wish I could accept two right answers.  Thank you for your time!"}], "tags": [], "owner": {"reputation": 25491, "user_id": 49197, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/15ebf24a33a29b9efbf9924f530dd736?s=128&d=identicon&r=PG", "display_name": "Hynek -Pichi- Vychodil", "link": "https://stackoverflow.com/users/49197/hynek-pichi-vychodil"}, "is_accepted": false, "score": 0, "last_activity_date": 1427311629, "last_edit_date": 1427311629, "creation_date": 1427310855, "answer_id": 29264534, "question_id": 29263747, "link": "https://stackoverflow.com/questions/29263747/perl-structured-regex/29264534#29264534", "title": "PERL structured regex", "body": "<p>With this kind of question, you can get even this kind of answer</p>\n\n<pre class=\"lang-sh prettyprint-override\"><code>perl -nlE'my@a;push@a,$+while/\\s*(?:\"(.*?)\"|(\\S*))/g;splice@a,-1,1,split/ /,$a[-1];$,=$\\;say@a,\"\"' your_log.txt\n</code></pre>\n\n<p>and result</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>[31/01/2015:00:00:00GMT]\ndevice\n255.255.255.1\n2015-01-31\n00:00:00\n1231231234\n-\nxxxxxxx\nSUB\\xxxxxxx\nMozilla/5.0 (compatible; MSIE 9.0; Windows NT 6.1; WOW54; Trident/5.0)\n1.255.255.255\ntext/htm;%20charset=utf-8\nhxxp://www.google.com/path?query&amp;somevar=1&amp;anothervar=\"DOUBLEQUOTESHERE\"&amp;thirdvar=jlk;asdfhlkjahgjkdfgerw\n200\nOBSERVED\nCategory1;Category 2\nnone\nnone\nTCP_MSG\n-\n0\n99\n512\n512\nwww.google.com\nGET\nhxxp://www.google.com/somestring.php?href=http%3A%2F%2Fsomesite.banana.com%2Fquery%2Fv=1&amp;somevar=1&amp;fin=0\nHTTP/1.1\n\n\n[31/01/2015:00:00:00GMT]\ndevice\n255.255.255.1\n2015-01-31\n00:00:00\n1231231234\n-\n-\n-\nagent\n1.255.255.123\n-\n-\n200\nOBSERVED\nnone\nnone\nnone\nTCP_MSG\n-\n-\n99\n256\n128\nwww.google.com\nCONNECT\nhxxp://www.google.com:443\nHTTP/1.0\n</code></pre>\n"}], "owner": {"reputation": 41, "user_id": 4084083, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a2ff2da72457efbd13ad68d4ca2214af?s=128&d=identicon&r=PG&f=1", "display_name": "Bobby B.", "link": "https://stackoverflow.com/users/4084083/bobby-b"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 71, "favorite_count": 0, "accepted_answer_id": 29264453, "answer_count": 2, "score": 1, "last_activity_date": 1427311629, "creation_date": 1427308401, "last_edit_date": 1427309660, "question_id": 29263747, "link": "https://stackoverflow.com/questions/29263747/perl-structured-regex", "title": "PERL structured regex", "body": "<p>I'm familiar with higher level languages with libraries like scala and java, and have few problems understanding regex at a high level, but I've been tasked with trying to parse some logs using perl and regex.</p>\n\n<p>Perl seems straightforward enough, but its not native to me).  The data has some fields which may or may not be wrapped in quotes, and others are space delimited.  Additionally, there is one quote wrapped field which needs to be broken into sub-fields.</p>\n\n<p>Sample Data:</p>\n\n\n\n<pre class=\"lang-none prettyprint-override\"><code>\"[31/01/2015:00:00:00GMT]\" \"device\" 255.255.255.1 2015-01-31 00:00:00 1231231234 - xxxxxxx SUB\\xxxxxxx \"Mozilla/5.0 (compatible; MSIE 9.0; Windows NT 6.1; WOW54; Trident/5.0)\" 1.255.255.255 text/htm;%20charset=utf-8 hxxp://www.google.com/path?query&amp;somevar=1&amp;anothervar=\"DOUBLEQUOTESHERE\"&amp;thirdvar=jlk;asdfhlkjahgjkdfgerw 200 OBSERVED \"Category1;Category 2\" \"none\" \"none\" TCP_MSG - 0 99 512 512 www.google.com \"GET hxxp://www.google.com/somestring.php?href=http%3A%2F%2Fsomesite.banana.com%2Fquery%2Fv=1&amp;somevar=1&amp;fin=0 HTTP/1.1\"\n\"[31/01/2015:00:00:00GMT]\" \"device\" 255.255.255.1 2015-01-31 00:00:00 1231231234 - - - \"agent\" 1.255.255.123 - - 200 OBSERVED \"none\" \"none\" \"none\" TCP_MSG - - 99 256 128 www.google.com \"CONNECT hxxp://www.google.com:443 HTTP/1.0\"\n</code></pre>\n\n<p>My desired fields would contain as follows for the first line:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>[31/01/2015:00:00:00 GMT]\ndevice\n255.255.255.1\n2015-01-31\n00:00:00\n1231231234\n-\nxxxxxxx\nSUB\\xxxxxxx\nMozilla/5.0 (compatible; MSIE 9.0; Windows NT 6.1; WOW54; Trident/5.0)\n1.255.255.255\ntext/htm;%20charset=utf-8\nhxxp://www.google.com/path?query&amp;somevar=1&amp;anothervar=\"DOUBLEQUOTESHERE\"&amp;thirdvar=jlk;asdfhlkjahgjkdfgerw\n200\nOBSERVED\nCategory1;Category 2\nnone\nnone\nTCP_MSG\n-\n0\n99\n512\n512\nwww.google.com\nGET hxxp://www.google.com/somestring.php?href=http%3A%2F%2Fsomesite.banana.com%2Fquery%2Fv=1&amp;somevar=1&amp;fin=0 HTTP/1.1\n</code></pre>\n\n<p>Ideally, I'd like to break the last field down to:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>GET\nhxxp://www.google.com/somestring.php?href=http%3A%2F%2Fsomesite.banana.com%2Fquery%2Fv=1&amp;somevar=1&amp;fin=0\nHTTP/1.1\n</code></pre>\n\n<p>Second line:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>[31/01/2015:00:00:00GMT]\ndevice\n255.255.255.1\n2015-01-31\n00:00:00\n1231231234\n-\n-\n-\nagent\n1.255.255.123\n-\n-\n200\nOBSERVED\nnone\nnone\nnone\nTCP_MSG\n-\n-\n99\n256\n128\nwww.google.com\nCONNECT hxxp://www.google.com:443 HTTP/1.0\n</code></pre>\n\n<p>And again, I'd like to break the last field down to:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>CONNECT\nhxxp://www.google.com:443\nHTTP/1.0\n</code></pre>\n\n<p>Thanks for any and all help!</p>\n"}, {"tags": ["perl", "parallel-processing", "ipc", "shared-memory"], "comments": [{"owner": {"reputation": 44559, "user_id": 411022, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9905bf9a7b8d5a587c1bdff07ef2e801?s=128&d=identicon&r=PG", "display_name": "Ilmari Karonen", "link": "https://stackoverflow.com/users/411022/ilmari-karonen"}, "edited": false, "score": 2, "creation_date": 1427307326, "post_id": 29263218, "comment_id": 46728761, "body": "Could you perhaps post a <a href=\"http://stackoverflow.com/help/mcve\">minimal example demonstrating the problem</a>? That might help others reproduce and diagnose it."}, {"owner": {"reputation": 51, "user_id": 4712987, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c666666c614a4e5b6872ea14d2c81353?s=128&d=identicon&r=PG&f=1", "display_name": "bajmopws", "link": "https://stackoverflow.com/users/4712987/bajmopws"}, "reply_to_user": {"reputation": 44559, "user_id": 411022, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9905bf9a7b8d5a587c1bdff07ef2e801?s=128&d=identicon&r=PG", "display_name": "Ilmari Karonen", "link": "https://stackoverflow.com/users/411022/ilmari-karonen"}, "edited": false, "score": 0, "creation_date": 1427308707, "post_id": 29263218, "comment_id": 46729608, "body": "I have edited my post."}, {"owner": {"reputation": 44559, "user_id": 411022, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9905bf9a7b8d5a587c1bdff07ef2e801?s=128&d=identicon&r=PG", "display_name": "Ilmari Karonen", "link": "https://stackoverflow.com/users/411022/ilmari-karonen"}, "edited": false, "score": 0, "creation_date": 1427309075, "post_id": 29263218, "comment_id": 46729861, "body": "And that code runs and demonstrates the problem, if you comment out the &quot;.....&quot; part?"}], "owner": {"reputation": 51, "user_id": 4712987, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c666666c614a4e5b6872ea14d2c81353?s=128&d=identicon&r=PG&f=1", "display_name": "bajmopws", "link": "https://stackoverflow.com/users/4712987/bajmopws"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 691, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1490389455, "creation_date": 1427306797, "last_edit_date": 1490389455, "question_id": 29263218, "link": "https://stackoverflow.com/questions/29263218/could-not-create-semaphore-set-no-space-left-on-device-perl", "title": "Could not create semaphore set: No space left on device Perl", "body": "<p>I am trying to use shared memory in Perl. It seems to work well, but I have noticed that I am getting the following error after some program starts: </p>\n\n<pre><code>Could not create semaphore set: No space left on device\n</code></pre>\n\n<p>Here is my declaration of shared variables: </p>\n\n<pre><code>my $handle_buffer = tie $buffer, 'IPC::Shareable', undef, { destroy =&gt; 1 };\nmy $clients_shr = tie @clients, 'IPC::Shareable', undef, { destroy =&gt; 1 };\n</code></pre>\n\n<p>I have tried to clear all variables using the following subroutine:</p>\n\n<pre><code> IPC::Shareable-&gt;clean_up_all;\n ..... killing child process\n</code></pre>\n\n<p>But it doesn't work. It seems to hang, because after that not all processes are killed and continue reading from shared memory and getting: </p>\n\n<pre><code>Use of uninitialized value $shared_variable in string eq at shared.pl line 208, &lt;GEN1&gt; line 14.**\n</code></pre>\n\n<p>Please help to release memory. Thanks everyone in advance.</p>\n\n<p><strong>EDIT</strong>    </p>\n\n<p>Here is simple example </p>\n\n<pre><code>use IPC::Shareable;\nmy $buffer;\nmy $handle_buffer = tie $buffer, 'IPC::Shareable', undef, { destroy =&gt; 1 };\n$buffer = \"Initial value\\n\";\nsetpgrp(0,0);\n$SIG{INT} = \\&amp;kill_all;\nsub kill_all() {\n     print \"Going to kill child processes \\n\";\n     print \"Clearing shared memory \\n\";\n     IPC::Shareable-&gt;clean_up_all;\n     kill -$$;\n}\nif( fork() == 0 ){\n$SIG{INT} = 'DEFAULT';   \n    $buffer = \"Some value from child\";\n}\n.....\n.....\nif(fork() == 0) {\n$SIG{INT} = 'DEFAULT';   \n   if($buffer==$some_value) {\n\n}\n}\n</code></pre>\n"}, {"tags": ["linux", "perl", "cron", "crontab"], "comments": [{"owner": {"reputation": 1354, "user_id": 1653270, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c57d3d99827c5e6cdf0880292769472?s=128&d=identicon&r=PG", "display_name": "michael501", "link": "https://stackoverflow.com/users/1653270/michael501"}, "edited": false, "score": 1, "creation_date": 1427305111, "post_id": 29262605, "comment_id": 46727264, "body": "what is the error ? what is in crontab ?"}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 3, "creation_date": 1427307287, "post_id": 29262605, "comment_id": 46728735, "body": "The first thing to do whenever a cronjob &quot;isn&#39;t working&quot; is to check the cron logs. On my system, the log is in <code>&#47;var&#47;log&#47;cron</code>, but it could be different for you. That will tell you if the job is actually being run, and if so, any errors it might be generating."}], "answers": [{"comments": [{"owner": {"reputation": 137100, "user_id": 874188, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/ZcY77.png?s=128&g=1", "display_name": "tripleee", "link": "https://stackoverflow.com/users/874188/tripleee"}, "edited": false, "score": 1, "creation_date": 1427315445, "post_id": 29262834, "comment_id": 46733555, "body": "The <a href=\"http://stackoverflow.com/tags/crontab/info\"><code>crontab</code> tag wiki</a> has a longer laundry list of debugging tips."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 3, "last_activity_date": 1427317217, "last_edit_date": 1495539807, "creation_date": 1427305501, "answer_id": 29262834, "question_id": 29262605, "link": "https://stackoverflow.com/questions/29262605/perl-script-in-linux-environment-is-not-working-via-cron/29262834#29262834", "title": "Perl script in linux environment is not working via cron", "body": "<p>Most likely suspects:</p>\n\n<ul>\n<li>Current work directory isn't as expected.</li>\n<li>Permission issues<sup>[1]</sup>.</li>\n<li>Environment variables aren't setup as expected.</li>\n<li>Requirement of a terminal can't be met.</li>\n</ul>\n\n<p>See the <a href=\"https://stackoverflow.com/tags/crontab/info\"><code>crontab</code> tag wiki</a> for more pitfalls and some debugging tips.</p>\n\n<p>The first thing you should do is to read the error message.</p>\n\n<hr>\n\n<ol>\n<li>This isn't likely to be an issue for you own <code>cron</code> job, but I've included it since it's quite a common problem for scripts run from other services.</li>\n</ol>\n"}, {"tags": [], "owner": {"reputation": 77, "user_id": 3062368, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/kz1L6.jpg?s=128&g=1", "display_name": "Ravi  K M", "link": "https://stackoverflow.com/users/3062368/ravi-k-m"}, "is_accepted": false, "score": 0, "last_activity_date": 1427720352, "last_edit_date": 1427720352, "creation_date": 1427715341, "answer_id": 29345176, "question_id": 29262605, "link": "https://stackoverflow.com/questions/29262605/perl-script-in-linux-environment-is-not-working-via-cron/29345176#29345176", "title": "Perl script in linux environment is not working via cron", "body": "<p>Most probable cause is current working directory.</p>\n\n<p>Before perl command execution, write a command to change directory.</p>\n\n<p>Something like :  </p>\n\n<pre><code>cd  perl_path;\n\nperl Perl_script.pl\n</code></pre>\n"}], "owner": {"reputation": 63, "user_id": 3562203, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f5decb59e95b163f46ac4e6e1dd8ed6?s=128&d=identicon&r=PG&f=1", "display_name": "Sravan Palaki", "link": "https://stackoverflow.com/users/3562203/sravan-palaki"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 81, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1427720352, "creation_date": 1427304844, "last_edit_date": 1427311647, "question_id": 29262605, "link": "https://stackoverflow.com/questions/29262605/perl-script-in-linux-environment-is-not-working-via-cron", "title": "Perl script in linux environment is not working via cron", "body": "<p>When I try to run a Perl script which is called via Linux script manually it works fine but not executable via CRON.</p>\n\n<p>Linux_scrip.sh conatains Perl_script and the command is,</p>\n\n<pre><code>perl_path/perl Perl_script.pl\n</code></pre>\n\n<p>I got perl_path using <code>which perl</code> command.</p>\n\n<p>Can anyone suggest why is it not executable via <code>CRON</code> entry.</p>\n"}, {"tags": ["perl", "parallel-processing", "fork", "kill", "child-process"], "comments": [{"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 2, "creation_date": 1427301948, "post_id": 29260859, "comment_id": 46725207, "body": "Side note: you really shouldn&#39;t be using <code>kill -9</code> unless you absolutely have to. It&#39;s like ripping the power cord out of the wall instead of running <code>shutdown</code>. Give your child processes a chance to clean up after themselves and exit gracefully."}], "answers": [{"comments": [{"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 1, "creation_date": 1427302698, "post_id": 29261645, "comment_id": 46725723, "body": "&quot;fork returns a pid. You can explicitly kill that pid.&quot; There&#39;s a dangerous race condition here. If the child exits before you try to kill it and another process gets the same PID, you end up killing the other process."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1427302719, "post_id": 29261645, "comment_id": 46725738, "body": "<code>ps -o pid,ppid,pgrp,sid,stat,cmd</code> would also show process group, so you can verify if the process you want to kill actually belongs to the process group you signaled."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 4, "creation_date": 1427302771, "post_id": 29261645, "comment_id": 46725777, "body": "@ThisSuitIsBlackNot, That&#39;s not true. The PID won&#39;t be released until the process is reaped using <code>wait</code>/<code>waitpid</code>. (Keep in mind that <code>$SIG{CHLD}=&#39;IGNORE&#39;;</code> auto-reaps.)"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1427302920, "post_id": 29261645, "comment_id": 46725882, "body": "Which is a good point - if you turn that on, then you potentially introduce the race condition."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1427303337, "post_id": 29261645, "comment_id": 46726109, "body": "One of the advantageous features of a zombie. It&#39;s a good way to be sure that your process has actually exited (or not). In addition to being a placeholder for retrieving a return code."}, {"owner": {"reputation": 51, "user_id": 4712987, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c666666c614a4e5b6872ea14d2c81353?s=128&d=identicon&r=PG&f=1", "display_name": "bajmopws", "link": "https://stackoverflow.com/users/4712987/bajmopws"}, "edited": false, "score": 0, "creation_date": 1427303338, "post_id": 29261645, "comment_id": 46726110, "body": "It seems to work perfectly I am getting message from all childs . $SIG{&#39;CHLD&#39;} = &quot;IGNORE&quot;; has been already set. Thank you."}, {"owner": {"reputation": 51, "user_id": 4712987, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c666666c614a4e5b6872ea14d2c81353?s=128&d=identicon&r=PG&f=1", "display_name": "bajmopws", "link": "https://stackoverflow.com/users/4712987/bajmopws"}, "edited": false, "score": 0, "creation_date": 1427303802, "post_id": 29261645, "comment_id": 46726410, "body": "Sorry , but if to do as you suggested , it will left processes in background ...  What can be wrong, or I should manually collect pids into array and than iterate through it and kill all processes."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1427303877, "post_id": 29261645, "comment_id": 46726443, "body": "What state are your processes in? You&#39;ve <i>sent</i> them all the signal. They&#39;re just not acting on it. Check the state flags, and you&#39;ll see (probably) why."}, {"owner": {"reputation": 51, "user_id": 4712987, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c666666c614a4e5b6872ea14d2c81353?s=128&d=identicon&r=PG&f=1", "display_name": "bajmopws", "link": "https://stackoverflow.com/users/4712987/bajmopws"}, "edited": false, "score": 0, "creation_date": 1427304056, "post_id": 29261645, "comment_id": 46726553, "body": "If I am not mistaken , forked(new) process  uses parent signal handlers  , so I have simply set $SIG{INT} = &#39;DEFAULT&#39;;  in all forks in my program and it seems to work."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1427304343, "post_id": 29261645, "comment_id": 46726734, "body": "Ah yes. <code>fork</code> means processes inherit <i>everything</i> including signal handlers etc. But that shouldn&#39;t apply to the <code>KILL</code> signal you were originally sending."}, {"owner": {"reputation": 51, "user_id": 4712987, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c666666c614a4e5b6872ea14d2c81353?s=128&d=identicon&r=PG&f=1", "display_name": "bajmopws", "link": "https://stackoverflow.com/users/4712987/bajmopws"}, "edited": false, "score": 0, "creation_date": 1427304589, "post_id": 29261645, "comment_id": 46726908, "body": "Thank you for the help !"}], "tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": true, "score": 5, "last_activity_date": 1427304650, "last_edit_date": 1427304650, "creation_date": 1427302080, "answer_id": 29261645, "question_id": 29260859, "link": "https://stackoverflow.com/questions/29260859/best-way-to-kill-process-itself-and-all-child-processesg/29261645#29261645", "title": "Best way to kill process itself and all child processesg", "body": "<p>First off - don't <code>kill -9</code>. That's bad practice unless you absolutely have to. <code>SIGTERM</code> or <code>-15</code> is much nicer.</p>\n\n<p>To send things to your process group, the easiest approach is (from <code>perlipc</code>: <a href=\"http://perldoc.perl.org/perlipc.html#Signals\" rel=\"nofollow\">http://perldoc.perl.org/perlipc.html#Signals</a>)</p>\n\n<p><code>kill -$$</code></p>\n\n<blockquote>\n  <p>Sending a signal to a negative process ID means that you send the signal to the entire Unix process group. </p>\n</blockquote>\n\n<p>Alternatively - <code>fork</code> returns a pid. You can explicitly kill that pid. </p>\n\n<p>If you're having problems with children not exiting in response to kill signals though, then the most common problem is that they've entered an uninterruptible state. </p>\n\n<p>This might be something like IO on an NFS mount (or other IO to device that's unavailable). Unfortunately this is an OS specific problem, which isn't solvable via perl. You can check this by running <code>ps -e v</code> and check for the 'state' flag. </p>\n\n<pre><code>state    The state is given by a sequence of characters, for example, \"RWNA\". The      first character indicates the run state of the process:\nD    Marks a process in disk (or other short term, uninterruptible) wait.\nI    Marks a process that is idle (sleeping for longer than about 20 seconds).  \nL    Marks a process that is waiting to acquire a lock.\nR    Marks a runnable process.\nS    Marks a process that is sleeping for less than about 20 seconds.\nT    Marks a stopped process.\nW    Marks an idle interrupt thread.\nZ    Marks a dead process (a \"zombie\").\n</code></pre>\n\n<p>Either that or they've become zombie processes, and are waiting to be reaped. You can avoid this by setting <code>$SIG{'CHLD'} = \"IGNORE\";</code> \nBut as noted in the comments - you shouldn't do this <em>as well</em> as killing by fork-pid, because of the race condition it creates. </p>\n\n<p>You should also note - if you configure a signal handler, and <em>then</em> <code>fork</code>, then the forked child also has that handler. You may need to remove it again in the child process. </p>\n"}], "owner": {"reputation": 51, "user_id": 4712987, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c666666c614a4e5b6872ea14d2c81353?s=128&d=identicon&r=PG&f=1", "display_name": "bajmopws", "link": "https://stackoverflow.com/users/4712987/bajmopws"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1639, "favorite_count": 0, "accepted_answer_id": 29261645, "answer_count": 1, "score": 2, "last_activity_date": 1427304650, "creation_date": 1427299879, "question_id": 29260859, "link": "https://stackoverflow.com/questions/29260859/best-way-to-kill-process-itself-and-all-child-processesg", "title": "Best way to kill process itself and all child processesg", "body": "<p>I am newbie. My program creates some amount of child processes during lifetime using system call <code>fork()</code>. I need to handle interrupt signal for parent and in it's handler kill all child processes that have been created during program runtime.<br>\nI have tried following code ...   </p>\n\n<pre><code>setpgrp(0,0);\n$SIG{INT} = \\&amp;kill_all;\nsub kill_all() {\n     print \"Going to kill child processes \\n\";\n     kill -9, getpgrp();\n}\n....\nfork()..\n....\nfork()...\n....\nfork()\n.....\n</code></pre>\n\n<p>But it seems that not all processes are killed , please suggest the right way to do this.</p>\n"}, {"tags": ["perl", "batch-file", "svn", "visualsvn-server", "post-commit-hook"], "comments": [{"owner": {"reputation": 52334, "user_id": 702638, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/892f65bc0a8a0949ab88598de7d83cab?s=128&d=identicon&r=PG", "display_name": "Hunter McMillen", "link": "https://stackoverflow.com/users/702638/hunter-mcmillen"}, "edited": false, "score": 0, "creation_date": 1427300014, "post_id": 29260376, "comment_id": 46723896, "body": "I&#39;m confused why do you need to pass <i>changes</i> if you are already performing the <i>svnlook</i> command inside of your Perl script? It seems like all you need to pass to your script is the revision# and the repository path."}, {"owner": {"reputation": 52334, "user_id": 702638, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/892f65bc0a8a0949ab88598de7d83cab?s=128&d=identicon&r=PG", "display_name": "Hunter McMillen", "link": "https://stackoverflow.com/users/702638/hunter-mcmillen"}, "edited": false, "score": 1, "creation_date": 1427300085, "post_id": 29260376, "comment_id": 46723937, "body": "You should also note that there are two forms of svnlook, one that accepts a transaction number and one that accepts a revision number. You seem to be using both here for some reason."}, {"owner": {"reputation": 995, "user_id": 1341008, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/3c7c817e70d04ad9cbded8f4e15d99e7?s=128&d=identicon&r=PG&f=1", "display_name": "Darko Rodic", "link": "https://stackoverflow.com/users/1341008/darko-rodic"}, "reply_to_user": {"reputation": 52334, "user_id": 702638, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/892f65bc0a8a0949ab88598de7d83cab?s=128&d=identicon&r=PG", "display_name": "Hunter McMillen", "link": "https://stackoverflow.com/users/702638/hunter-mcmillen"}, "edited": false, "score": 0, "creation_date": 1427300319, "post_id": 29260376, "comment_id": 46724062, "body": "there is a line in middle of question post, first part is where I am trying to execute command in perl script and it is not being executed in second part I was trying to execute command in batch and then pass result to my script and neither is working"}, {"owner": {"reputation": 995, "user_id": 1341008, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/3c7c817e70d04ad9cbded8f4e15d99e7?s=128&d=identicon&r=PG&f=1", "display_name": "Darko Rodic", "link": "https://stackoverflow.com/users/1341008/darko-rodic"}, "reply_to_user": {"reputation": 52334, "user_id": 702638, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/892f65bc0a8a0949ab88598de7d83cab?s=128&d=identicon&r=PG", "display_name": "Hunter McMillen", "link": "https://stackoverflow.com/users/702638/hunter-mcmillen"}, "edited": false, "score": 0, "creation_date": 1427300415, "post_id": 29260376, "comment_id": 46724137, "body": "where am I using different svnlooks?"}, {"owner": {"reputation": 52334, "user_id": 702638, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/892f65bc0a8a0949ab88598de7d83cab?s=128&d=identicon&r=PG", "display_name": "Hunter McMillen", "link": "https://stackoverflow.com/users/702638/hunter-mcmillen"}, "edited": false, "score": 1, "creation_date": 1427300574, "post_id": 29260376, "comment_id": 46724242, "body": "well your first example is probably just a mistake then, you are passing a revision number using <code>-t</code> flag which accepts a transaction number. The command should be <code>`$svnlook changed -r &quot;$rev&quot; &quot;$repos&quot;`</code>; You also never explained what you mean by doesn&#39;t work? Do you get output you don&#39;t expect? Do you get no output? Do you get an error message?"}, {"owner": {"reputation": 995, "user_id": 1341008, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/3c7c817e70d04ad9cbded8f4e15d99e7?s=128&d=identicon&r=PG&f=1", "display_name": "Darko Rodic", "link": "https://stackoverflow.com/users/1341008/darko-rodic"}, "reply_to_user": {"reputation": 52334, "user_id": 702638, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/892f65bc0a8a0949ab88598de7d83cab?s=128&d=identicon&r=PG", "display_name": "Hunter McMillen", "link": "https://stackoverflow.com/users/702638/hunter-mcmillen"}, "edited": false, "score": 0, "creation_date": 1427300726, "post_id": 29260376, "comment_id": 46724346, "body": "oh yes, its a stupid typo, because I was doing some copy paste. thats it man if you want, write a post and I will mark it as correct :)"}], "answers": [{"comments": [{"owner": {"reputation": 995, "user_id": 1341008, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/3c7c817e70d04ad9cbded8f4e15d99e7?s=128&d=identicon&r=PG&f=1", "display_name": "Darko Rodic", "link": "https://stackoverflow.com/users/1341008/darko-rodic"}, "edited": false, "score": 0, "creation_date": 1427302140, "post_id": 29261239, "comment_id": 46725332, "body": "is there some fast way to turn this output from array to json, I am not very familliar with perl?"}, {"owner": {"reputation": 52334, "user_id": 702638, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/892f65bc0a8a0949ab88598de7d83cab?s=128&d=identicon&r=PG", "display_name": "Hunter McMillen", "link": "https://stackoverflow.com/users/702638/hunter-mcmillen"}, "reply_to_user": {"reputation": 995, "user_id": 1341008, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/3c7c817e70d04ad9cbded8f4e15d99e7?s=128&d=identicon&r=PG&f=1", "display_name": "Darko Rodic", "link": "https://stackoverflow.com/users/1341008/darko-rodic"}, "edited": false, "score": 0, "creation_date": 1427306569, "post_id": 29261239, "comment_id": 46728247, "body": "what would you expect the key to be for the json? The name of the file that was altered? If so you could create a hash reference using <code>{ filename =&gt; \\@changes }</code> and pass that to <a href=\"https://metacpan.org/pod/JSON#PERL---JSON\" rel=\"nofollow noreferrer\"><code>JSON</code></a> module&#39;s <a href=\"https://metacpan.org/pod/JSON#to_json\" rel=\"nofollow noreferrer\"><code>to_json</code></a> function."}], "tags": [], "owner": {"reputation": 52334, "user_id": 702638, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/892f65bc0a8a0949ab88598de7d83cab?s=128&d=identicon&r=PG", "display_name": "Hunter McMillen", "link": "https://stackoverflow.com/users/702638/hunter-mcmillen"}, "is_accepted": true, "score": 1, "last_activity_date": 1427300967, "creation_date": 1427300967, "answer_id": 29261239, "question_id": 29260376, "link": "https://stackoverflow.com/questions/29260376/svnlook-changed-t-rev-repos-not-getting-executed/29261239#29261239", "title": "svnlook changed -t &quot;$rev&quot; &quot;$repos&quot; not getting executed", "body": "<p>running svnlook changed help display the list of valid options to <code>svnlook changed</code> and their expected format: </p>\n\n<pre><code>$ svnlook help changed\nchanged: usage: svnlook changed REPOS_PATH\n\nPrint the paths that were changed.\n\nValid options:\n  -r [--revision] ARG      : specify revision number ARG\n  -t [--transaction] ARG   : specify transaction name ARG\n  --copy-info              : show details for copies\n</code></pre>\n\n<p>Normally you would specify either a transaction number with <code>-t</code> or a revision number with <code>-r</code>. You appear to be passing a revision number with <code>-t</code> which will lead to unexpected results: either no results or results that are unrelated to the revision you wish to example. </p>\n\n<p>I believe the correct usage in your case would be: </p>\n\n<pre><code>my $msg = `$svnlook changed -r \"$rev\" \"$repos\"`;\n</code></pre>\n\n<p>The above command is going to give you one long string that is delimited by newlines. You can get this is a more manageable array format by using the same command in list context: </p>\n\n<pre><code>my @changes = `$svnlook changed -r \"$rev\" \"$repos\"`;\n</code></pre>\n\n<p>additionally these lines will all have trailing newlines, you can eliminate them using the <a href=\"http://perldoc.perl.org/functions/chomp.html\" rel=\"nofollow\"><code>chomp()</code></a> built-in:</p>\n\n<pre><code>my @changes; \nchomp(@changes = `$svnlook changed -r \"$rev\" \"$repos\"`);\n</code></pre>\n\n<p>Alternatively, you could look at <a href=\"https://metacpan.org/pod/SVN::SVNLook\" rel=\"nofollow\"><code>SVN::SVNLook</code></a> which a Perl wrapper around the <code>svnlook</code> command.</p>\n"}], "owner": {"reputation": 995, "user_id": 1341008, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/3c7c817e70d04ad9cbded8f4e15d99e7?s=128&d=identicon&r=PG&f=1", "display_name": "Darko Rodic", "link": "https://stackoverflow.com/users/1341008/darko-rodic"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 734, "favorite_count": 0, "accepted_answer_id": 29261239, "answer_count": 1, "score": 0, "last_activity_date": 1452257639, "creation_date": 1427298533, "last_edit_date": 1452257639, "question_id": 29260376, "link": "https://stackoverflow.com/questions/29260376/svnlook-changed-t-rev-repos-not-getting-executed", "title": "svnlook changed -t &quot;$rev&quot; &quot;$repos&quot; not getting executed", "body": "<p>As in title I am calling from my post-commit hook script written in perl which has command</p>\n\n<pre><code>$msg = `$svnlook changed -t \"$rev\" \"$repos\"`;\n</code></pre>\n\n<p>which should execute and than I should send <code>$msg</code> to my service. But when I run</p>\n\n<pre><code>if ( length($msg) == 0 )\n{\n    print STDERR \"msg length is 0\";\n    exit(1);\n}\n</code></pre>\n\n<p>I get this error message on console, so why is this <code>svnlook</code> command not being executed?</p>\n\n<p>I am using windows 7 and VisualSVN server.</p>\n\n<p>On other note, I had other theory to run this command in hook itself like</p>\n\n<pre><code>@echo off\nset repos=%1\nset rev=%2\nset changes=svnlook changed %repos% -r %rev% \nC:\\Perl64\\bin\\perl C:\\repositories\\myproject\\hooks\\myhook.pl %1 %2 changes\n</code></pre>\n\n<p>but I don't know how to pass this <code>changes</code> parameter, so if this could work, it could answer as well.</p>\n\n<p>How to pass parameter from batch to perl script?</p>\n"}, {"tags": ["windows", "perl", "registry", "scheduled-tasks"], "comments": [{"owner": {"reputation": 129, "user_id": 3186538, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/CH83L.jpg?s=128&g=1", "display_name": "iceman94", "link": "https://stackoverflow.com/users/3186538/iceman94"}, "edited": false, "score": 0, "creation_date": 1427295986, "post_id": 29259181, "comment_id": 46720957, "body": "I tested editing the <code>HKEY_CURRENT_USER&#47;Control Panel&#47;Desktop&#47;&#47;Wallpaper</code> directly through a scheduled task in <code>Run whether the user is logged on or not</code> mode and it worked. So I guess the issue is w/ finding which registry key to edit for setting a wallpaper..."}, {"owner": {"reputation": 129, "user_id": 3186538, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/CH83L.jpg?s=128&g=1", "display_name": "iceman94", "link": "https://stackoverflow.com/users/3186538/iceman94"}, "edited": false, "score": 0, "creation_date": 1427297047, "post_id": 29259181, "comment_id": 46721772, "body": "I narrowed down the issue to triggering a registry refresh after editing it. For information, I used some code based on the following link : <a href=\"http://www.perlmonks.org/?node_id=181191\" rel=\"nofollow noreferrer\">perlmonks.org/?node_id=181191</a>"}, {"owner": {"reputation": 129, "user_id": 3186538, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/CH83L.jpg?s=128&g=1", "display_name": "iceman94", "link": "https://stackoverflow.com/users/3186538/iceman94"}, "edited": false, "score": 0, "creation_date": 1427454401, "post_id": 29259181, "comment_id": 46793272, "body": "All my attempts to trigger a registry refresh from the Win32 API from a scheduled task in <code>Run whether the user is logged on or not</code> mode proved either fruitless or non-reliable. I circumvented the issue by running the Perl code in a batch file w/ the following syntax :  <code>start &#47;min &lt;path&#47;to&#47;batch&#47;file&gt;</code>  It stills pops up a <code>taskeng.exe</code> DOS prompt but it is better than nothing."}, {"owner": {"reputation": 129, "user_id": 3186538, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/CH83L.jpg?s=128&g=1", "display_name": "iceman94", "link": "https://stackoverflow.com/users/3186538/iceman94"}, "edited": false, "score": 0, "creation_date": 1427454561, "post_id": 29259181, "comment_id": 46793366, "body": "I found a code snippet from Strawberry Perl used to trigger a refresh but it does not work on Windows 7 x64 w/ Strawberry Perl x86 v5.16.3001.  Source : <a href=\"https://github.com/StrawberryPerl/Perl-Dist-Strawberry/blob/master/share/extra-files/update_env.pl.bat#L119\" rel=\"nofollow noreferrer\">github.com/StrawberryPerl/Perl-Dist-Strawberry/blob/master/&hellip;</a>"}], "owner": {"reputation": 129, "user_id": 3186538, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/CH83L.jpg?s=128&g=1", "display_name": "iceman94", "link": "https://stackoverflow.com/users/3186538/iceman94"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 2318, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1549903842, "creation_date": 1427295455, "last_edit_date": 1549903842, "question_id": 29259181, "link": "https://stackoverflow.com/questions/29259181/edit-registry-for-current-user-through-scheduled-task", "title": "Edit registry for current user through scheduled task", "body": "<p>I've written a Perl script that allows the modification of the current user's wallpaper on Windows 7 using Strawberry Perl. It works in 3 steps:</p>\n\n<ol>\n<li>use of Perl <code>Image::Magick</code> module to generate a composite picture;</li>\n<li>activation of the composite picture as current wallpaper using Perl <code>Win32::API</code> module;</li>\n<li>edition of 2 registry keys (<code>HKEY_CURRENT_USER/Control Panel/Desktop//TileWallpaper</code> and <code>HKEY_CURRENT_USER/Control Panel/Desktop//WallpaperStyle</code>) using Perl <code>Win32::TieRegistry</code> module to adapt to multi-monitors setup.</li>\n</ol>\n\n<p>The given script works:</p>\n\n<ul>\n<li>when run from CLI;</li>\n<li>when set as a scheduled task, option <code>Run only if a user is logged on</code> (the syntax being <code>perl</code> w/ arguments <code>-I&lt;path/to/lib&gt; &lt;outfile&gt;</code>).</li>\n</ul>\n\n<p>But the script does not work when run as a scheduled task, option <code>Run whether the user is logged on or not</code> (AFAICS, only the step #1 works).</p>\n\n<p>I thought that the issue was coming from the fact that the scheduled task in run by a different user than the one set up (I think it is named <code>system</code>) and therefore, the registry key is no longer <code>HKEY_CURRENT_USER</code>.</p>\n\n<p>So I tried editing the registry keys in <code>HKEY_USER/&lt;SID&gt;/Control Panel/Desktop</code> but the values are not the same as the one in <code>HKEY_CURRENT_USER/Control Panel/Desktop</code>.</p>\n\n<p>I also tried wrapping the Perl executable and its arguments in a batch file and call it directly in a scheduled task but AFAICS only the first step works.</p>\n\n<p>I tried logging the output of the script but there is no useful output (apart from the expected STDOUT).</p>\n\n<p>Do you see any reason why the registry edits are not working from a scheduled task in <code>Run whether the user is logged on or not</code> mode?</p>\n"}, {"tags": ["perl", "export-to-excel", "perl-module"], "comments": [{"owner": {"reputation": 5923, "user_id": 2105156, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/oRMc0.jpg?s=128&g=1", "display_name": "fugu", "link": "https://stackoverflow.com/users/2105156/fugu"}, "edited": false, "score": 2, "creation_date": 1427290910, "post_id": 29257345, "comment_id": 46717251, "body": "Have you tried declaring <code>$workbook</code> outside of the if/else loops?"}, {"owner": {"reputation": 573, "user_id": 3273247, "user_type": "registered", "accept_rate": 53, "profile_image": "https://graph.facebook.com/100000049632169/picture?type=large", "display_name": "nulltron", "link": "https://stackoverflow.com/users/3273247/nulltron"}, "reply_to_user": {"reputation": 5923, "user_id": 2105156, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/oRMc0.jpg?s=128&g=1", "display_name": "fugu", "link": "https://stackoverflow.com/users/2105156/fugu"}, "edited": false, "score": 0, "creation_date": 1427291314, "post_id": 29257345, "comment_id": 46717537, "body": "That actually fixed my error, thanks for pointing out that obvious flaw I can&#39;t believe I didn&#39;t see it. Now however I&#39;m getting an issue with my localtime()."}, {"owner": {"reputation": 25491, "user_id": 49197, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/15ebf24a33a29b9efbf9924f530dd736?s=128&d=identicon&r=PG", "display_name": "Hynek -Pichi- Vychodil", "link": "https://stackoverflow.com/users/49197/hynek-pichi-vychodil"}, "edited": false, "score": 2, "creation_date": 1427291572, "post_id": 29257345, "comment_id": 46717741, "body": "It is <code>localtime</code>. There is <code>l</code> missing."}, {"owner": {"reputation": 573, "user_id": 3273247, "user_type": "registered", "accept_rate": 53, "profile_image": "https://graph.facebook.com/100000049632169/picture?type=large", "display_name": "nulltron", "link": "https://stackoverflow.com/users/3273247/nulltron"}, "reply_to_user": {"reputation": 25491, "user_id": 49197, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/15ebf24a33a29b9efbf9924f530dd736?s=128&d=identicon&r=PG", "display_name": "Hynek -Pichi- Vychodil", "link": "https://stackoverflow.com/users/49197/hynek-pichi-vychodil"}, "edited": false, "score": 0, "creation_date": 1427291704, "post_id": 29257345, "comment_id": 46717844, "body": "@Hynek -Pichi- Vychodil thanks! I feel utterly scatter brained today"}], "answers": [{"comments": [{"owner": {"reputation": 573, "user_id": 3273247, "user_type": "registered", "accept_rate": 53, "profile_image": "https://graph.facebook.com/100000049632169/picture?type=large", "display_name": "nulltron", "link": "https://stackoverflow.com/users/3273247/nulltron"}, "edited": false, "score": 0, "creation_date": 1427293446, "post_id": 29257482, "comment_id": 46719102, "body": "although if i don&#39;t declare <code>my $worksheet = $workbook-&gt;add_worksheet(&#39;Tracking&#39;);</code> within my loop it causes <code>add_worksheet()</code> to be undef. I assume this is because the <code>$workbook</code> value doesn&#39;t exist outside the loop"}, {"owner": {"reputation": 25491, "user_id": 49197, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/15ebf24a33a29b9efbf9924f530dd736?s=128&d=identicon&r=PG", "display_name": "Hynek -Pichi- Vychodil", "link": "https://stackoverflow.com/users/49197/hynek-pichi-vychodil"}, "edited": false, "score": 1, "creation_date": 1427293730, "post_id": 29257482, "comment_id": 46719302, "body": "You can do it easier by <code>my $method = -e $file ? &#39;open&#39; : &#39;new&#39;; my $workbook = Excel::Writer::XLSX-&gt;$method($file);</code> but unfortunatelly I didn&#39;t found <code>open</code> method in <code>Excel::Writer::XLSX</code> documentation."}], "tags": [], "owner": {"reputation": 5923, "user_id": 2105156, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/oRMc0.jpg?s=128&g=1", "display_name": "fugu", "link": "https://stackoverflow.com/users/2105156/fugu"}, "is_accepted": true, "score": 3, "last_activity_date": 1427292957, "last_edit_date": 1427292957, "creation_date": 1427291097, "answer_id": 29257482, "question_id": 29257345, "link": "https://stackoverflow.com/questions/29257345/writing-to-excel-file-with-perl/29257482#29257482", "title": "Writing to Excel File with Perl", "body": "<p>Try declaring the <code>$workbook</code> variable outside of your loops. \nAlso, as you're using <code>strict</code> you need to declare <code>$worksheet</code> using <code>my</code>:</p>\n\n<pre><code>use strict;\nuse warninigs;\n\nmy $workbook;\n\nif(-e $file){\n        $workbook = Excel::Writer::XLSX-&gt;open($file);  \n}\nelse{\n        $workbook = Excel::Writer::XLSX-&gt;new($file); \n}\n\nmy $worksheet = $workbook-&gt;add_worksheet('Tracking');\n$worksheet-&gt;write( 'A1', 'Hi Excel!');\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 573, "user_id": 3273247, "user_type": "registered", "accept_rate": 53, "profile_image": "https://graph.facebook.com/100000049632169/picture?type=large", "display_name": "nulltron", "link": "https://stackoverflow.com/users/3273247/nulltron"}, "edited": false, "score": 0, "creation_date": 1427293336, "post_id": 29257850, "comment_id": 46719012, "body": "Thank you, I discovered this as well. Do you know of any way to name the file as the days date? Or do you think I could have just one .xlsx file and add worksheets with the localtime() as the name of the worksheet?"}, {"owner": {"reputation": 5923, "user_id": 2105156, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/oRMc0.jpg?s=128&g=1", "display_name": "fugu", "link": "https://stackoverflow.com/users/2105156/fugu"}, "reply_to_user": {"reputation": 573, "user_id": 3273247, "user_type": "registered", "accept_rate": 53, "profile_image": "https://graph.facebook.com/100000049632169/picture?type=large", "display_name": "nulltron", "link": "https://stackoverflow.com/users/3273247/nulltron"}, "edited": false, "score": 0, "creation_date": 1427293578, "post_id": 29257850, "comment_id": 46719204, "body": "@HeadyGains - It&#39;s best to ask a new question if you have other problems unrelated to your original problem. If nothing else, it allows others with similar problems to easily find solutions"}, {"owner": {"reputation": 573, "user_id": 3273247, "user_type": "registered", "accept_rate": 53, "profile_image": "https://graph.facebook.com/100000049632169/picture?type=large", "display_name": "nulltron", "link": "https://stackoverflow.com/users/3273247/nulltron"}, "reply_to_user": {"reputation": 5923, "user_id": 2105156, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/oRMc0.jpg?s=128&g=1", "display_name": "fugu", "link": "https://stackoverflow.com/users/2105156/fugu"}, "edited": false, "score": 0, "creation_date": 1427293618, "post_id": 29257850, "comment_id": 46719234, "body": "@fugu my apologies will do."}], "tags": [], "owner": {"reputation": 25491, "user_id": 49197, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/15ebf24a33a29b9efbf9924f530dd736?s=128&d=identicon&r=PG", "display_name": "Hynek -Pichi- Vychodil", "link": "https://stackoverflow.com/users/49197/hynek-pichi-vychodil"}, "is_accepted": false, "score": 4, "last_activity_date": 1427292049, "creation_date": 1427292049, "answer_id": 29257850, "question_id": 29257345, "link": "https://stackoverflow.com/questions/29257345/writing-to-excel-file-with-perl/29257850#29257850", "title": "Writing to Excel File with Perl", "body": "<pre><code>my $workbook = Excel::Writer::XLSX-&gt;new('$file');\n</code></pre>\n\n<p>This line will not make a file with the name stored in <code>$file</code> variable but file with exact name <code>$file</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 6175763, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c3e22a4aa37aaf1170e4e8a3b81853c6?s=128&d=identicon&r=PG&f=1", "display_name": "user6175763", "link": "https://stackoverflow.com/users/6175763/user6175763"}, "is_accepted": false, "score": 0, "last_activity_date": 1495118882, "creation_date": 1495118882, "answer_id": 44051033, "question_id": 29257345, "link": "https://stackoverflow.com/questions/29257345/writing-to-excel-file-with-perl/44051033#44051033", "title": "Writing to Excel File with Perl", "body": "<p>Declare $workbook and $worksheet with \"my\" outside the loop </p>\n\n<p>Refer <a href=\"https://github.com/AarthiRT/Excel_Writer_XLSX\" rel=\"nofollow noreferrer\">https://github.com/AarthiRT/Excel_Writer_XLSX</a> </p>\n"}], "owner": {"reputation": 573, "user_id": 3273247, "user_type": "registered", "accept_rate": 53, "profile_image": "https://graph.facebook.com/100000049632169/picture?type=large", "display_name": "nulltron", "link": "https://stackoverflow.com/users/3273247/nulltron"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2439, "favorite_count": 1, "accepted_answer_id": 29257482, "answer_count": 3, "score": 2, "last_activity_date": 1495118882, "creation_date": 1427290766, "last_edit_date": 1427291503, "question_id": 29257345, "link": "https://stackoverflow.com/questions/29257345/writing-to-excel-file-with-perl", "title": "Writing to Excel File with Perl", "body": "<p>This is my first attempt and I'm trying to get the basics down of using\nExcel::Writer::XLSX. I can't seem to get my script to even compile.</p>\n\n<pre><code>#!C:\\Perl\\bin\n#excel::writer attempt\n#allows IR-Serial-Parts tracking\n\nuse strict;\nuse warnings;\nuse POSIX qw(strftime);\nuse Excel::Writer::XLSX;\n\n\nmy $ref = strftime '%Y-%m-%d', locatime();      #create the datestamp\nmy $file = \"$ref.xlsx\";\nmy $workbook = Excel::Writer::XLSX-&gt;new('$file');   #declare it outside of if loop preventing original issue.\n#if(-e $file){\n#       my $workbook = Excel::Writer::XLSX-&gt;open('$file');  #open existing  excel file\n#}\n#else{\n#       my $workbook = Excel::Writer::XLSX-&gt;new('$file');   #open new Excel   if the date on comp has changed\n#}\n\n$worksheet = $workbook-&gt;add_worksheet(\"Tracking\");\n$worksheet-&gt;write( 'A1', 'Hi Excel!');\n</code></pre>\n\n<p>I haven't even had to do anything yet I simply just wanted to test writing to a cell in an spreadsheet, and I can't even manage to do that. I feel like I'm making this to hard right now. Here's what the shell returns.</p>\n\n<pre><code>Global symbol \"$worksheet\" requires explicit package name at writexcel.pl         line 20.\nGlobal symbol \"$workbook\" requires explicit package name at writexcel.pl line   20\n.\nGlobal symbol \"$worksheet\" requires explicit package name at writexcel.pl      line 21.\nExecution of writexcel.pl aborted due to compilation errors.\nPress any key to continue . . .\n</code></pre>\n\n<p>Now that the original question is answered.</p>\n\n<pre><code>Undefined subroutine &amp;main::locatime called at writexcel.pl line 11.\nPress any key to continue . . .\n</code></pre>\n\n<p>my new error. I think it may have something to do with strftime but I'm not quite sure.</p>\n"}, {"tags": ["perl", "lwp"], "comments": [{"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 0, "creation_date": 1427291701, "post_id": 29256762, "comment_id": 46717843, "body": "&quot;to the directory containing the Perl script&quot; is incorrect; it downloads it to the current directory."}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 2039885, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/21d715e3a68f718e215d2a56fb03983a?s=128&d=identicon&r=PG", "display_name": "user2039885", "link": "https://stackoverflow.com/users/2039885/user2039885"}, "edited": false, "score": 0, "creation_date": 1427294280, "post_id": 29258014, "comment_id": 46719695, "body": "Thanks.  I&#39;ve tried using relative and full paths but the only way I can get it to download is by not specifying a path at all.  The first thing you suggested worked fine for me too.  The second one produced no output until I removed the condition on the last line and then I got &quot;200 OK at script.pl line 123, &lt;&gt; line 5.&quot;  Still no file though (even after a full HD search).  It&#39;s from a site I had to log in to first using WWW::Mechanize, but as I say it downloads fine if I just don&#39;t specify a directory."}, {"owner": {"reputation": 13, "user_id": 2039885, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/21d715e3a68f718e215d2a56fb03983a?s=128&d=identicon&r=PG", "display_name": "user2039885", "link": "https://stackoverflow.com/users/2039885/user2039885"}, "edited": false, "score": 0, "creation_date": 1427294941, "post_id": 29258014, "comment_id": 46720201, "body": "FIXED.  You&#39;ve cracked it.  It was indeed an unchomped new line character.  I didn&#39;t spot it and I&#39;m blaming Windows&#39;s stupid tiny Command Prompt terminal screen! ;)  Thanks a lot!"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 13, "user_id": 2039885, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/21d715e3a68f718e215d2a56fb03983a?s=128&d=identicon&r=PG", "display_name": "user2039885", "link": "https://stackoverflow.com/users/2039885/user2039885"}, "edited": false, "score": 0, "creation_date": 1427294986, "post_id": 29258014, "comment_id": 46720233, "body": "You can make the terminal larger"}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 1, "last_activity_date": 1427292458, "creation_date": 1427292458, "answer_id": 29258014, "question_id": 29256762, "link": "https://stackoverflow.com/questions/29256762/perl-lwp-getstore-will-only-save-a-file-if-i-dont-specify-a-directory/29258014#29258014", "title": "Perl &amp; LWP: getstore() will only save a file if I don&#39;t specify a directory", "body": "<p>The file is opened using <code>open(my $fh, \"&gt;\", $arg)</code>, where <code>$arg</code> contains the value you pass. As such, it will most definitely accept relative paths.</p>\n\n<pre><code>&gt;dir /b newdir\n\n&gt;perl -MLWP::Simple=getstore -e\"getstore('http://stackoverflow.com/', 'newdir\\\\so.html')\"\n\n&gt;dir /b newdir\nso.html\n</code></pre>\n\n<p>Maybe <code>$filename</code> isn't valid (e.g. ends with a newline). Maybe the current directory isn't what you think it is (it can be a directory other than the one containing the script). Maybe the user as which the script is executing doesn't have access to the directory. You should be able to get more information using:</p>\n\n<pre><code>use LWP::UserAgent qw( );\nmy $ua = LWP::UserAgent-&gt;new();\nmy $request = HTTP::Request-&gt;new(GET =&gt; $url);\nmy $response = $ua-&gt;request($request, \"newdir\\\\$filename\");\ndie($response-&gt;status_line)\n   if !$response-&gt;is_success;\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 2039885, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/21d715e3a68f718e215d2a56fb03983a?s=128&d=identicon&r=PG", "display_name": "user2039885", "link": "https://stackoverflow.com/users/2039885/user2039885"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1140, "favorite_count": 0, "accepted_answer_id": 29258014, "answer_count": 1, "score": 0, "last_activity_date": 1427292458, "creation_date": 1427289348, "question_id": 29256762, "link": "https://stackoverflow.com/questions/29256762/perl-lwp-getstore-will-only-save-a-file-if-i-dont-specify-a-directory", "title": "Perl &amp; LWP: getstore() will only save a file if I don&#39;t specify a directory", "body": "<p>I'm probably missing something simple but I have got getstore() running perfectly to save a \".png\" file to my Windows PC as follows:</p>\n\n<pre><code>getstore(\"$url\",\"$filename\");\n</code></pre>\n\n<p>That works a treat and downloads the file perfectly to the directory containing the Perl script.  However if I try saving it to a subfolder of \"newdir\" nothing downloads:</p>\n\n<pre><code>getstore(\"$url\",\"newdir\\\\$filename\");\n</code></pre>\n\n<p>Any idea where I'm going wrong here or how I could debug?  I tried printing the directory and it looks good:</p>\n\n<pre><code>print \"newdir\\\\$filename\";\n</code></pre>\n\n<p>However there's nothing in \"newdir\" once the script runs.  Thanks in advance.</p>\n"}, {"tags": ["python", "excel", "perl"], "comments": [{"owner": {"reputation": 5923, "user_id": 2105156, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/oRMc0.jpg?s=128&g=1", "display_name": "fugu", "link": "https://stackoverflow.com/users/2105156/fugu"}, "edited": false, "score": 1, "creation_date": 1427290050, "post_id": 29256370, "comment_id": 46716595, "body": "Easy enough to do, although you&#39;re probably not going to find someone willing to write you a program unless you provide some code of your own. Can you please provide real input as well"}, {"owner": {"reputation": 25491, "user_id": 49197, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/15ebf24a33a29b9efbf9924f530dd736?s=128&d=identicon&r=PG", "display_name": "Hynek -Pichi- Vychodil", "link": "https://stackoverflow.com/users/49197/hynek-pichi-vychodil"}, "edited": false, "score": 1, "creation_date": 1427290054, "post_id": 29256370, "comment_id": 46716597, "body": "If <i>The columns in the files are tab delimited</i> Why is there images instead of the text? Do you expect us to rewrite the text from the picture to test it? Show the input and expected output. Make input data to a minimal subset which shows all (known) edge cases."}, {"owner": {"reputation": 31, "user_id": 4311883, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8f0075c5fb4a7afe73c99a6450309f75?s=128&d=identicon&r=PG&f=1", "display_name": "user4311883", "link": "https://stackoverflow.com/users/4311883/user4311883"}, "edited": false, "score": 0, "creation_date": 1427291074, "post_id": 29256370, "comment_id": 46717358, "body": "Didn&#39;t think about that, sorry and thanks for letting me know. Hope this is better!"}], "answers": [{"tags": [], "owner": {"reputation": 25491, "user_id": 49197, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/15ebf24a33a29b9efbf9924f530dd736?s=128&d=identicon&r=PG", "display_name": "Hynek -Pichi- Vychodil", "link": "https://stackoverflow.com/users/49197/hynek-pichi-vychodil"}, "is_accepted": true, "score": 0, "last_activity_date": 1427305042, "last_edit_date": 1427305042, "creation_date": 1427304508, "answer_id": 29262472, "question_id": 29256370, "link": "https://stackoverflow.com/questions/29256370/how-to-connect-two-variables-by-an-overlapping-name-in-excel-or-linux/29262472#29262472", "title": "How to connect two variables by an overlapping name in excel or linux", "body": "<p>Let's assume your original data are in files <code>sheet1</code> and <code>sheet2</code>. So one way is to read <code>sheet2</code> first and collect all <code>GO</code> functions for <code>AT</code>s. Then read <code>sheet1</code> and make a new version of <code>sheet1</code> with <code>GO</code>s.</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>use strict;\nuse warnings;\nuse autodie;\n\nuse constant FN_GENES     =&gt; 'sheet1';\nuse constant FN_FUNCTIONS =&gt; 'sheet2';\n\n# Make lookup of GOs for ATs\nmy %functions;    # translation lookup for accumulating functions\n{\n    open my $fh, '&lt;', FN_FUNCTIONS;\n    while (&lt;$fh&gt;) {\n        chomp;    # chomp out newline\n        my ( $at, @gos ) = split;  # split line by whitespace (including '\\t')\n\n        # treat $functions{$at} as hash and set keys by hash splice to undef\n        # its more efficient way to write\n        # $functions{$at}{$_} = undef for @gos;\n        @{ $functions{$at} }{@gos} = ();\n    }\n}\n\n# test print of %functions content (it's lookup)\n# print \"$_: @{[sort keys %{$functions{$_}}]}\\n\" for sort keys %functions;\n\n# sort GOs (change hash keys to sorted array)\nfor my $gos ( values %functions ) {\n    $gos = [ sort keys %$gos ];\n}\n\n# read genes and look up for GOs\n{\n    open my $fh, '&lt;', FN_GENES;\n    while (&lt;$fh&gt;) {\n        chomp;\n        my ( $bol, $at ) = split;\n\n        # GOs for current Bol\n        # Use empty array if missing (array ref is always true)\n        my $gos = $functions{$at} || [];\n\n        # output tab delimited row\n        print join( \"\\t\", $bol, $at, @$gos ), \"\\n\";\n    }\n}\n</code></pre>\n\n<p>Example output:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>Bol040727       AT1G01010       GO:0003700      GO:0005575      GO:0007275      GO:0045449\nBol040726       AT1G01020       GO:0003674      GO:0005783      GO:0006665      GO:0016020      GO:0016125\nBol040729       AT1G01020       GO:0003674      GO:0005783      GO:0006665      GO:0016020      GO:0016125\nBol040725       AT1G01030       GO:0003700      GO:0005575      GO:0009908      GO:0045449      GO:0048366\nBol040724       AT1G01040       GO:0003725      GO:0004525      GO:0005515      GO:0005634      GO:0006396      GO:0008026\nBol040723       AT1G01050       GO:0004427      GO:0005634      GO:0005737      GO:0006796      GO:0008152      GO:0016020\nBol018442       AT1G01050       GO:0004427      GO:0005634      GO:0005737      GO:0006796      GO:0008152      GO:0016020\nBol040721       AT1G01070       GO:0016020\nBol018443       AT1G01070       GO:0016020\nBol040718       AT1G01090       GO:0006096      GO:0008152      GO:0009507      GO:0009536      GO:0009941      GO:0055114\nBol018445       AT1G01090       GO:0006096      GO:0008152      GO:0009507      GO:0009536      GO:0009941      GO:0055114\nBol040717       AT1G01100       GO:0003735      GO:0005634      GO:0005829      GO:0005886      GO:0006414      GO:0022626\nBol018446       AT1G01100       GO:0003735      GO:0005634      GO:0005829      GO:0005886      GO:0006414      GO:0022626\nBol040716       AT1G01110       GO:0003674      GO:0005739\nBol040715       AT1G01120       GO:0005783      GO:0008415      GO:0009409      GO:0009416      GO:0016020      GO:0022626\nBol018447       AT1G01120       GO:0005783      GO:0008415      GO:0009409      GO:0009416      GO:0016020      GO:0022626\nBol000520       AT1G01120       GO:0005783      GO:0008415      GO:0009409      GO:0009416      GO:0016020      GO:0022626\nBol000521       AT1G01120       GO:0005783      GO:0008415      GO:0009409      GO:0009416      GO:0016020      GO:0022626\nBol040714       AT1G01140\nBol040713       AT1G01160\nBol018449       AT1G01160\nBol040712       AT1G01170\nBol040711       AT1G01180\nBol040710       AT1G01190\nBol018450       AT1G01190\nBol040709       AT1G01200\nBol018452       AT1G01210\nBol018453       AT1G01220\nBol018454       AT1G01225\nBol040708       AT1G01230\nBol018455       AT1G01230\nBol040707       AT1G01240\nBol018456       AT1G01240\nBol040706       AT1G01250\nBol018457       AT1G01250\n</code></pre>\n"}], "owner": {"reputation": 31, "user_id": 4311883, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8f0075c5fb4a7afe73c99a6450309f75?s=128&d=identicon&r=PG&f=1", "display_name": "user4311883", "link": "https://stackoverflow.com/users/4311883/user4311883"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 97, "favorite_count": 0, "closed_date": 1427321322, "accepted_answer_id": 29262472, "answer_count": 1, "score": 0, "last_activity_date": 1427305042, "creation_date": 1427288316, "last_edit_date": 1427302958, "question_id": 29256370, "link": "https://stackoverflow.com/questions/29256370/how-to-connect-two-variables-by-an-overlapping-name-in-excel-or-linux", "closed_reason": "Needs details or clarity", "title": "How to connect two variables by an overlapping name in excel or linux", "body": "<p>I first tried to solve it myself with excel and later in Linux, but I cannot seem to solve it. So hope someone can help me with solving this! And not really good in explaining things, so if anything is unclear, please let me know.</p>\n\n<p>I have a list of around 30,000 genes starting with <code>Bol</code> and their orthologous genes starting with <code>At</code>, meaning the <code>Bol</code> genes are of the same function as <code>At</code>. I know the <code>GO</code> terms (function terms of genes) for the <code>At</code> genes, but not for the Bol genes. But as I also have a list connecting the <code>At</code> genes to the <code>Bol</code>, I can connect the <code>GO</code> terms to the <code>Bol</code> genes with the help of the overlapping <code>At</code> genes. Once that list is finished I want to count how many of each <code>GO</code> term I have in the total <code>Bol</code> gene set. </p>\n\n<p>The files I have look like these:</p>\n\n<p>Small example of sheet 1</p>\n\n\n\n<pre class=\"lang-none prettyprint-override\"><code>Bol040727   AT1G01010\nBol040726   AT1G01020\nBol040729   AT1G01020\nBol040725   AT1G01030\nBol040724   AT1G01040\nBol040723   AT1G01050\nBol018442   AT1G01050\nBol040721   AT1G01070\nBol018443   AT1G01070\nBol040718   AT1G01090\nBol018445   AT1G01090\nBol040717   AT1G01100\nBol018446   AT1G01100\nBol040716   AT1G01110\nBol040715   AT1G01120\nBol018447   AT1G01120\nBol000520   AT1G01120\nBol000521   AT1G01120\nBol040714   AT1G01140\nBol040713   AT1G01160\nBol018449   AT1G01160\nBol040712   AT1G01170\nBol040711   AT1G01180\nBol040710   AT1G01190\nBol018450   AT1G01190\nBol040709   AT1G01200\nBol018452   AT1G01210\nBol018453   AT1G01220\nBol018454   AT1G01225\nBol040708   AT1G01230\nBol018455   AT1G01230\nBol040707   AT1G01240\nBol018456   AT1G01240\nBol040706   AT1G01250\nBol018457   AT1G01250\n</code></pre>\n\n<p>Small example of sheet 2<br/></p>\n\n<pre class=\"lang-none prettyprint-override\"><code>AT1G01010   GO:0045449  GO:0005575  GO:0003700  GO:0007275          \nAT1G01020   GO:0005783  GO:0016020  GO:0003674  GO:0006665  GO:0016125      \nAT1G01030   GO:0005575  GO:0003700  GO:0009908  GO:0045449  GO:0048366      \nAT1G01040   GO:0005634  GO:0008026  GO:0003725  GO:0005515  GO:0004525  GO:0006396\nAT1G01046   GO:0005575  GO:0003674  GO:0008150              \nAT1G01050   GO:0006796  GO:0005737  GO:0016020  GO:0005634  GO:0004427  GO:0008152  \nAT1G01060   GO:0003677  GO:0003700  GO:0009651  GO:0009737  GO:0009733  GO:0009723\nAT1G01070   GO:0016020                      \nAT1G01073   GO:0012505                      \nAT1G01073   GO:0003674  GO:0008150                  \nAT1G01080   GO:0009507  GO:0009570  GO:0005634  GO:0003676  GO:0000166  GO:0009941\nAT1G01090   GO:0009507  GO:0006096  GO:0008152  GO:0009941  GO:0055114  GO:0009536\nAT1G01100   GO:0005886  GO:0003735  GO:0006414  GO:0022626  GO:0005829  GO:0005634\nAT1G01110   GO:0005739  GO:0003674                  \nAT1G01115   GO:0012505                      \nAT1G01115   GO:0003674  GO:0008150                  \nAT1G01120   GO:0022626  GO:0005783  GO:0016020  GO:0008415  GO:0009409  GO:0009416\nAT1G01130   GO:0005575  GO:0003674  GO:0008150\n</code></pre>\n\n<p>So <code>AT1G01073</code> and <code>AT1G01115</code> are in duplicate, It should be:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>AT1G01073 GO:0012505 GO:0003674 GO:0008150\nAT1G01115 GO:0012505 GO:0003674 GO:0008150 \n</code></pre>\n\n<p>And as output I would like for instance to get this</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>Bol040727 AT1G01010 GO:0045449  GO:0005575  GO:0003700  GO:0007275\nBol040726 AT1G01020 GO:0005783  GO:0016020  GO:0003674  GO:0006665  GO:0016125\n</code></pre>\n\n<p>etc.</p>\n\n<p>I tried to connect sheet 1 with sheet 2 with <code>VLOOKUP</code> in excel, but it seems that some genes in sheet 2 are in duplicate but with different <code>GO</code> terms. So I thought about finding the duplicated genes and paste the <code>GO</code> terms together to create a list of only unique At genes with <code>GO</code> terms. Finding the duplicated At genes is no problem, but how to paste the <code>GO</code> terms together in an easy and quick way (there are a lot of duplicated At genes). And counting the <code>GO</code> terms I can easily do if everything is in one column, but here it is not.</p>\n\n<p>So is there anyone who knows how to solve this or who knows another maybe easier solution? C++ code in Linux or a simple perl/ python script is also fine by me. The columns in the files are tab delimited.</p>\n\n<p>Thanks a lot!</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 12427, "user_id": 498634, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/580e34a7c6e156d847e8ee768388daa4?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel B&#246;hmer", "link": "https://stackoverflow.com/users/498634/daniel-b%c3%b6hmer"}, "edited": false, "score": 3, "creation_date": 1427288504, "post_id": 29256015, "comment_id": 46715465, "body": "In fact, this is perfectly possible. <a href=\"https://stackoverflow.com/a/2976234/498634\">stackoverflow.com/a/2976234/498634</a>"}], "answers": [{"comments": [{"owner": {"reputation": 946, "user_id": 1765406, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/Koqta.jpg?s=128&g=1", "display_name": "vanHoesel", "link": "https://stackoverflow.com/users/1765406/vanhoesel"}, "reply_to_user": {"reputation": 30739, "user_id": 1804599, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/v91P3.jpg?s=128&g=1", "display_name": "rightfold", "link": "https://stackoverflow.com/users/1804599/rightfold"}, "edited": false, "score": 1, "creation_date": 1427290855, "post_id": 29256880, "comment_id": 46717219, "body": "I Won&#39;t feel happy if someone would give me an answer to satisfies my bad needs, I rather have someone stopping me getting accustomed to bad habits. And luckily, I have plenty people around me that I allow to scream at me when I do stupid things."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 2, "creation_date": 1427303174, "post_id": 29256880, "comment_id": 46726010, "body": "I&#39;d suggest that whilst a &quot;don&#39;t do this&quot; answer is valid, it&#39;s made considerably more constructive by either suggesting an alternative, or expanding in detail as to why it shouldn&#39;t be done. The originating poster will normally have been given a task to &#39;make it so&#39; so giving some ammunition for &quot;why not?&quot; is helpful too."}], "tags": [], "owner": {"reputation": 946, "user_id": 1765406, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/Koqta.jpg?s=128&g=1", "display_name": "vanHoesel", "link": "https://stackoverflow.com/users/1765406/vanhoesel"}, "is_accepted": false, "score": 2, "last_activity_date": 1427290518, "last_edit_date": 1427290518, "creation_date": 1427289670, "answer_id": 29256880, "question_id": 29256015, "link": "https://stackoverflow.com/questions/29256015/perl-is-there-a-way-to-import-a-class-and-all-of-its-child-classes/29256880#29256880", "title": "Perl - Is there a way to import a class and all of its child classes?", "body": "<p>In general, I think it is a bad idea to load a whole 'tree' of modules (or subclasses so to speak).</p>\n\n<p>There is definitely something wrong in your design if you need to know all and everything about sub classes/modules. You break the rules of encapsulation and you should not need to know how a class handles its responsibilities.</p>\n"}, {"tags": [], "owner": {"reputation": 3227, "user_id": 249199, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/0878f26eba467efc1d90fc6959b9b531?s=128&d=identicon&r=PG", "display_name": "Zac B", "link": "https://stackoverflow.com/users/249199/zac-b"}, "is_accepted": true, "score": 5, "last_activity_date": 1429974821, "last_edit_date": 1495541182, "creation_date": 1427290608, "answer_id": 29257266, "question_id": 29256015, "link": "https://stackoverflow.com/questions/29256015/perl-is-there-a-way-to-import-a-class-and-all-of-its-child-classes/29257266#29257266", "title": "Perl - Is there a way to import a class and all of its child classes?", "body": "<p>No, there is not a way to easily do what you are after.</p>\n\n<p>You could walk the relevant paths in your PERL library's filesystem and <code>use</code> every <code>.pm</code> file you came across (that's what <code>Module::Find</code>, as suggested by @Daniel B\u00f6hmer, does), but that can miss a few things:</p>\n\n<ul>\n<li>Packages that are declared in funny ways/at runtime. </li>\n<li>Multiple packages per module file.</li>\n<li>Other cases I haven't thought of.</li>\n</ul>\n\n<p>This is also a bad idea, for a few reasons:</p>\n\n<ul>\n<li>You mentioned \"classes\" in your question, rather than just packages. Perl packages and subpackages do not necessarily represent classes/instantiable object-oriented code. If you were to programmatically generate a list of all packages in a hierarchy and then call <code>$packagename-&gt;new()</code> on each of them, you might have a syntax error, if one of the packages was just a library of functions.</li>\n<li>Packages and subpackages often <em>are not</em> directly related, developed by the same people, or used for similar things. Just because a package starts with <code>Net::</code> doesn't mean that it will obey standard conventions that other <code>Net::</code>-prefixed packages expect. For example, <code>File::Find</code> and <code>File::Tail</code> share a prefix, but have very little to do with each other; the prefix is in common because both utilities work with files as their goal.</li>\n<li>Lots of packages do things at <code>BEGIN</code>/<code>INIT</code>/etc time when they're compiled. Some of them (sadly) do different things depending on the <em>order in which they're <code>use</code>d relative to other modules</em>. The solution to this problem for module developers is \"don't do that\", but for module users, it's \"<code>use</code> sparingly, and only when needed\".</li>\n<li>It clutters your local namespace with lots of potentially-exported symbols you don't necessarily need (to conditionally import symbols, you'll have to use <code>import</code> arguments like you're doing in your example; there's no programmatic way to define \"symbols I'm interested in\", since Perl doesn't have that kind static analysis at compile time . . . not for lots of call styles, at least).</li>\n<li>It slows down your program's startup time by compiling things you might not necessarily need. This might not seem important at the early phase of a project, but for larger projects it is <em>very easy</em> to end up in situations where you're pulling in over a thousand CPAN modules when you start Apache (or launch your main script, or whatever), and your app takes more than a minute just to start.</li>\n</ul>\n\n<p>I have a hunch that you're trying to reduce boilerplate (as in: all of your modules have a big block of <code>use</code> statements at the top, and that's duplicated everywhere). There are a few ways to do this, starting with:</p>\n\n<ul>\n<li>Don't: import things in each module as you need them, and use <code>strict</code>/<code>warnings</code> and lots of tests to be told early on if you're calling functionality that you haven't imported yet.</li>\n<li>You could also make your own <a href=\"http://perldoc.perl.org/Exporter.html\" rel=\"nofollow noreferrer\"><code>Exporter</code></a> subclass that <code>use</code>s all of your standard modules and adds the functions that you frequently use from them to its <code>@EXPORTS</code> (or splices their <code>@EXPORTS</code> onto its own, or uses <code>Exporter</code> sub-sub-classing, or something). </li>\n<li>Factor your code so that the parts that depend on multiple imported modules live in a single utility module, and import that.</li>\n<li>Factor your code so that the parts that depend on the imported modules live in a parent class, and address its methods via instances of subclasses (or <code>SUPER</code>), so your subclasses don't have to explicitly contain the imports, e.g. <code>$instance-&gt;method_that_calls_an_imported_function_in_the_parent();</code></li>\n</ul>\n\n<p>Also, as an aside, using <code>package.*</code> imports in Java is <a href=\"https://stackoverflow.com/questions/147454/why-is-using-a-wild-card-with-a-java-import-statement-bad\">debatable</a>, and has many of the same drawbacks of doing it in Perl.</p>\n"}, {"tags": [], "owner": {"reputation": 98433, "user_id": 368630, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/107085826cfbb2700f535417a12c89cb?s=128&d=identicon&r=PG", "display_name": "David W.", "link": "https://stackoverflow.com/users/368630/david-w"}, "is_accepted": false, "score": 5, "last_activity_date": 1427291530, "creation_date": 1427291530, "answer_id": 29257658, "question_id": 29256015, "link": "https://stackoverflow.com/questions/29256015/perl-is-there-a-way-to-import-a-class-and-all-of-its-child-classes/29257658#29257658", "title": "Perl - Is there a way to import a class and all of its child classes?", "body": "<p>In Perl, the <em>class</em> <code>Foo::Bar::Foo</code> may not be a <em>subclass</em> of <code>Foo::Bar</code>.  Nor, is there any guarantee that a subclass module even has the same class prefix. <code>IO::File</code> is a subclass of <code>IO::Handle</code> and not of <code>IO</code> which isn't even a module.</p>\n\n<p>There also isn't even an easy way to tell of a Perl module is a sub-class of another Perl module. There are (at least) three ways to declare a subclass' relationship to a class:</p>\n\n<ul>\n<li><code>use parent</code></li>\n<li><code>use base</code></li>\n<li>The <code>@ISA</code> package variable</li>\n</ul>\n\n<p>It is possible to use <code>@INC</code> to find all modules, then look at the source and look at <code>use parent</code>, <code>use base</code>, and <code>@ISA</code> declarations and build a Perl class matrix, then go through that matrix to load the classes you do need. That will probably be slow and cumbersome, and doesn't even cover Moose based classes.</p>\n\n<p>You're asking the wrong question. You're asking <em>\"Find all of the subclasses of a particular class.</em>\". This will include classes that you're probably not even interested in. I know (for example <code>LWP</code>) that there can be dozens of various classes and subclasses that include stuff you're not even interested in.</p>\n\n<p>What you should be asking is \"<em>What do I need to do?</em>\", and then find the classes that fulfill your needs. If these classes happen to be child classes of a particular parent class, these subclasses will load the required class.</p>\n\n<p>We do Java programming here, and one of the standards is not to use asterisks in our <code>import</code> statements. This is considered sloppy programming. If you need a particular class, you should declare it rather than simply declaring a superclass. Many of our reporting tools have problems with asterisk declarations in <code>import</code> statements.</p>\n\n<p>There is a <code>Module::Find</code> module, but I am not sure exactly how it works. I believe it simply assumes that subclasses are in the same module hierarchy as the superclass, but that's far from true in Perl.</p>\n"}], "owner": {"reputation": 881, "user_id": 595855, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/37888a26f20e7467ff1f239c1b15b194?s=128&d=identicon&r=PG", "display_name": "snakespan", "link": "https://stackoverflow.com/users/595855/snakespan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 329, "favorite_count": 0, "accepted_answer_id": 29257266, "answer_count": 3, "score": 3, "last_activity_date": 1429974821, "creation_date": 1427287374, "question_id": 29256015, "link": "https://stackoverflow.com/questions/29256015/perl-is-there-a-way-to-import-a-class-and-all-of-its-child-classes", "title": "Perl - Is there a way to import a class and all of its child classes?", "body": "<p>In java, there is a way to import a class and all of its children in one line:</p>\n\n<pre><code>import java.utils.* \n</code></pre>\n\n<p>In Perl, I've found I can only import specific classes:</p>\n\n<pre><code>use Perl::Utils::Folder;\nuse Perl::Utils::Classes qw(new run_class);\n</code></pre>\n\n<p>Is there similar way like java to import everything that falls under a tree structure, only in Perl?</p>\n"}, {"tags": ["xml", "perl"], "comments": [{"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1427289365, "post_id": 29255614, "comment_id": 46716094, "body": "You will get better responses if you can show what you&#39;ve tried so far, and explain what problems you&#39;re having. Otherwise this looks a bit like a homework question, so may well attract less constructive responses."}, {"owner": {"reputation": 213, "user_id": 4711937, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/35ae8720d1676c12292012d312dd541c?s=128&d=identicon&r=PG&f=1", "display_name": "tester", "link": "https://stackoverflow.com/users/4711937/tester"}, "reply_to_user": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1427289637, "post_id": 29255614, "comment_id": 46716281, "body": "can we achieve this using xml simple.. i am new to scripting. Please help"}, {"owner": {"reputation": 213, "user_id": 4711937, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/35ae8720d1676c12292012d312dd541c?s=128&d=identicon&r=PG&f=1", "display_name": "tester", "link": "https://stackoverflow.com/users/4711937/tester"}, "reply_to_user": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1427289832, "post_id": 29255614, "comment_id": 46716429, "body": "$file=&quot;text.xml&quot; $xml = new XML::Simple (KeyAttr=&gt;[]); $data = $xml-&gt;XMLin(&quot;$file&quot;); my $booklist = XMLin(&#39;$file&#39;);       foreach my $var (@{$booklist-&gt;{User text}}) { if($var-&gt;{User text} eq &quot;HHd5&quot;){                 $var-&gt;{valat};                 $var-&gt;{valon}; }"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1427289921, "post_id": 29255614, "comment_id": 46716489, "body": "Look at the doc for <code>XML::Simple</code> : <a href=\"http://search.cpan.org/~grantm/XML-Simple-2.20/lib/XML/Simple.pm#STATUS_OF_THIS_MODULE\" rel=\"nofollow noreferrer\">search.cpan.org/~grantm/XML-Simple-2.20/lib/XML/&hellip;</a> Specifically: &quot;The use of this module in new code is discouraged. Other modules are available which provide more straightforward and consistent interfaces. &quot;"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1427290026, "post_id": 29255614, "comment_id": 46716573, "body": "Can I suggest reformatting that code and editing your post. As it stands, it doesn&#39;t work. I don&#39;t want to amend it because that might change the context of the question."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1427290529, "post_id": 29255614, "comment_id": 46716962, "body": "Also - your XML appears incomplete. I assume you&#39;ve just cut out the piece you&#39;re interested in - a bit more context would make it easier to assemble a solution."}, {"owner": {"reputation": 213, "user_id": 4711937, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/35ae8720d1676c12292012d312dd541c?s=128&d=identicon&r=PG&f=1", "display_name": "tester", "link": "https://stackoverflow.com/users/4711937/tester"}, "reply_to_user": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1427291976, "post_id": 29255614, "comment_id": 46718027, "body": "i tried this.   it is giving me proper value. But please improvize my code"}, {"owner": {"reputation": 213, "user_id": 4711937, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/35ae8720d1676c12292012d312dd541c?s=128&d=identicon&r=PG&f=1", "display_name": "tester", "link": "https://stackoverflow.com/users/4711937/tester"}, "reply_to_user": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1427291985, "post_id": 29255614, "comment_id": 46718038, "body": "#! /usr/bin/perl open(fp,&quot;&lt;&quot;,&quot;testing.xml&quot;);  $s=&quot;BSC01_site&quot;; while(&lt;fp&gt;){  $a=$_;         if($a =~ /$s/){                 while(&lt;fp&gt;){                         $f=$_;                         if( $f =~ /valon string=&quot;(\\d+)/){                                 print &quot;valon $1 \\n&quot;;                         } \t\t\t\t\t\tif( $f =~ /valat string=&quot;(\\d+)/){                                 print &quot;valat $1 \\n&quot;;                         }                 }         } }"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1427292100, "post_id": 29255614, "comment_id": 46718133, "body": "Editing your question rather than commenting is the way forward. That code snippet looks like you&#39;re nesting <code>while</code> loops, which would be unwise."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1427292792, "post_id": 29255614, "comment_id": 46718599, "body": "And you&#39;re not closing your quotes. Which is also not going to work."}], "answers": [{"tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": false, "score": 4, "last_activity_date": 1427286840, "creation_date": 1427286840, "answer_id": 29255808, "question_id": 29255614, "link": "https://stackoverflow.com/questions/29255614/extracting-xml-values-using-perl/29255808#29255808", "title": "Extracting xml values using perl", "body": "<p>Using <a href=\"http://p3rl.org/XML::XSH2\" rel=\"nofollow\">XML::XSH2</a>, a wrapper around <a href=\"http://p3rl.org/XML::LibXML\" rel=\"nofollow\">XML::LibXML</a>:</p>\n\n<pre><code>open file.xml ;\nfor //User[@text='HHd5']\n    echo valat/@string valon/@string ;\n</code></pre>\n\n<p>Or, a more verbose solution using <a href=\"http://p3rl.org/XML::LibXML\" rel=\"nofollow\">XML::LibXML</a> only:</p>\n\n<pre><code>#! /usr/bin/perl\nuse warnings;\nuse strict;\n\nuse XML::LibXML;\n\nmy $xml = 'XML::LibXML'-&gt;load_xml( location =&gt; 'file.xml' );\nfor my $user ($xml-&gt;documentElement-&gt;findnodes('//User[@text=\"HHd5\"]')) {\n    print $_-&gt;{string},\"\\n\" for $user-&gt;findnodes('valat | valon');\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 1, "creation_date": 1427288081, "post_id": 29256238, "comment_id": 46715161, "body": "I&#39;m afraid I disagree on both points - <code>XML::Simple</code> is nasty. And so is parsing XML with regular expressions."}, {"owner": {"reputation": 1228, "user_id": 4709524, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/wGrTV.jpg?s=128&g=1", "display_name": "beasy", "link": "https://stackoverflow.com/users/4709524/beasy"}, "reply_to_user": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1427288841, "post_id": 29256238, "comment_id": 46715722, "body": "i&#39;ve implied both of those things in my answer, but remember that by all appearances, OP is a beginner. for beginners, sometimes what is the easy way to us is the hard way for them."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 1, "creation_date": 1427289396, "post_id": 29256238, "comment_id": 46716116, "body": "That&#39;s the problem though - XML parsing via regex <i>isn&#39;t</i> the easy way. It may look like it, but it&#39;s &quot;easy&quot; in exactly the same way of turning off <code>strict</code> and <code>warnings</code> makes errors go away. It may well work, but it&#39;s also extremely prone to creating brittle code and exploding messily later. I wouldn&#39;t suggest to <i>anyone</i> that they do either of these things, but especially a beginner - an expert may well know better."}, {"owner": {"reputation": 1228, "user_id": 4709524, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/wGrTV.jpg?s=128&g=1", "display_name": "beasy", "link": "https://stackoverflow.com/users/4709524/beasy"}, "reply_to_user": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1427290065, "post_id": 29256238, "comment_id": 46716606, "body": "fair enough. one could abstract OP&#39;s question out to &quot;what&#39;s the best way to parse xml?&quot;. then again maybe it&#39;s just &quot;what&#39;s the easiest way to extract 3 strings from some text?&quot; :)"}], "tags": [], "owner": {"reputation": 1228, "user_id": 4709524, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/wGrTV.jpg?s=128&g=1", "display_name": "beasy", "link": "https://stackoverflow.com/users/4709524/beasy"}, "is_accepted": false, "score": -1, "last_activity_date": 1427287971, "creation_date": 1427287971, "answer_id": 29256238, "question_id": 29255614, "link": "https://stackoverflow.com/questions/29255614/extracting-xml-values-using-perl/29256238#29256238", "title": "Extracting xml values using perl", "body": "<p>to deal with parsing XML, the best way is to download a module from CPAN like XML::Simple. it will be worth your time to get this module, or one like it, and learn how to use it, if you are going to work with XML. these modules basically convert XML into a complex Perl variable (hash reference). manually parsing XML is not advised on a large scale.</p>\n\n<p>however, in the case of a quick ad-hoc situation, you could parse it with regex.</p>\n\n<pre><code>open(my $xml,\"&lt;\",\"file.xml\");\n\nmy ($user, $valat, $valon);\nwhile (my $line = &lt;$xml&gt;) {\n    # regexes to capture your variables\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": false, "score": 2, "last_activity_date": 1427290585, "last_edit_date": 1427290585, "creation_date": 1427287980, "answer_id": 29256242, "question_id": 29255614, "link": "https://stackoverflow.com/questions/29255614/extracting-xml-values-using-perl/29256242#29256242", "title": "Extracting xml values using perl", "body": "<p>Let me start with a personal peeve. XML is a strict language spec, and it has formal definitions as to what is - and isn't - allowed. Therefore it's actually very easy to parse with a parser, and gets horribly messy if you try and use a hand rolled solution like a regular expression. </p>\n\n<p>Not least because XML can have linefeeds and be reformatted and still be valid. </p>\n\n<p>I would also suggest - don't use <code>XML::Simple</code>. In it's module page:</p>\n\n<blockquote>\n  <p>The use of this module in new code is discouraged. Other modules are available which provide more straightforward and consistent interfaces. </p>\n</blockquote>\n\n<p>Also - it's really important that you start a script with <code>use strict;</code> and <code>use warnings;</code>. These are really good ways to help diagnose problems and will also get much better responses if you're posting code on Stack Overflow. </p>\n\n<p>With that in mind, I'd suggest picking up <code>XML::Twig</code> which has the ability to set <code>twig_handlers</code> - subroutines that are triggered to process a specific chunk of XML. In the example below - I specify <code>twig_roots</code> which indicates to the parser that I don't really care about anything else. </p>\n\n<p><code>process_user</code> is called with each <code>User</code> element. We test the <code>User</code> element for it having the appropriate attribute - and if it does, we extract the string attributes from the two subelements you're interested in. </p>\n\n<p>Something like this:</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\n\nuse XML::Twig;\n\nsub process_user {\n    my ( $twig, $user ) = @_;\n    if ( $user-&gt;att('text') eq \"HHd5\" ) {\n        print $user-&gt;first_child('valat')-&gt;att('string'), \":\",\n            $user-&gt;first_child('valon')-&gt;att('string');\n    }\n}\n\nmy $parser = XML::Twig-&gt;new( twig_roots =&gt; { 'User' =&gt; \\&amp;process_user, } );\n$parser-&gt;parse( \\*DATA );\n\n__DATA__\n&lt;User text=\"HHd5\"&gt;\n         &lt;max string=\"0\"/&gt;\n         &lt;min string=\"pick up\"/&gt;\n         &lt;valat string=\"0\"/&gt;\n         &lt;valon string=\"0\"/&gt;\n         &lt;time string=\"GMT\"/&gt;     \n &lt;/User&gt;\n</code></pre>\n\n<p>But simplifying a bit perhaps, to make it similar to your existing code:</p>\n\n<pre><code>use strict;\nuse warnings;\n\nuse XML::Twig;\n\nmy $xml_twig = XML::Twig-&gt;new();\n$xml_twig-&gt;parsefile(\"test.xml\");\n\nforeach my $user ( $xml_twig-&gt;root-&gt;children('User') ) {\n    if ( $user-&gt;att('text') eq \"HHd5\" ) {\n        print $user -&gt;first_child('valat')-&gt;att('string');\n        print \":\";\n        print $user -&gt;first_child('valon')-&gt;att('string');\n    }\n}\n</code></pre>\n\n<p>(NB: The example above doesn't quite work with your XML snippet, but that's because I'm assuming that <code>User</code> isn't your root node in your XML. It couldn't be really. )</p>\n"}], "owner": {"reputation": 213, "user_id": 4711937, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/35ae8720d1676c12292012d312dd541c?s=128&d=identicon&r=PG&f=1", "display_name": "tester", "link": "https://stackoverflow.com/users/4711937/tester"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2637, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1427348796, "creation_date": 1427286306, "last_edit_date": 1427348796, "question_id": 29255614, "link": "https://stackoverflow.com/questions/29255614/extracting-xml-values-using-perl", "title": "Extracting xml values using perl", "body": "<p>I have my xml file which has below data</p>\n\n<pre><code>&lt;User text=\"HHd5\"&gt;\n         &lt;max string=\"0\"/&gt;\n         &lt;min string=\"pick up\"/&gt;\n         &lt;valat string=\"0\"/&gt;\n         &lt;valon string=\"0\"/&gt;\n         &lt;time string=\"GMT\"/&gt;     \n &lt;/User&gt;\n</code></pre>\n\n<p>through my script, i need to check for User text ie. HHd5. If found, i must extract valat and valon values. Please help</p>\n\n<p>My code:</p>\n\n<pre><code>$file = \"text.xml\" \n$xml = new XML::Simple( KeyAttr =&gt; [] );\n$data = $xml-&gt;XMLin(\"$file\");\nmy $booklist = XMLin('$file');\nforeach my $var ( @{ $booklist-&gt;{ User text } } ) {\n    if ( $var-&gt;{ User text } eq \"HHd5\" ) { $var-&gt;{valat}; $var-&gt;{valon}; }\n</code></pre>\n\n<p>And:</p>\n\n<pre><code>#!/usr/bin/perl \nopen( fp, \"&lt;\", \"testing.xml\" );\n$s = \"HHd5\";\nwhile (&lt;fp&gt;) {\n    $a = $_;\n    if ( $a =~ /$s/ ) {\n        while (&lt;fp&gt;) {\n            $f = $_;\n            if ( $f =~ /valon string=\"(\\d+)/ ) { print \"valon $1 \\n\"; }\n            if ( $f =~ /valat string=\"(\\d+)/ ) { print \"valat $1 \\n\"; }\n        }\n    }\n}\n</code></pre>\n"}, {"tags": ["perl"], "answers": [{"tags": [], "owner": {"reputation": 25491, "user_id": 49197, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/15ebf24a33a29b9efbf9924f530dd736?s=128&d=identicon&r=PG", "display_name": "Hynek -Pichi- Vychodil", "link": "https://stackoverflow.com/users/49197/hynek-pichi-vychodil"}, "is_accepted": false, "score": 0, "last_activity_date": 1427291419, "last_edit_date": 1427291419, "creation_date": 1427291021, "answer_id": 29257439, "question_id": 29255600, "link": "https://stackoverflow.com/questions/29255600/perl-error-use-of-uninitialized-value-in-concatenation-or-string/29257439#29257439", "title": "perl error: Use of uninitialized value $_ in concatenation (.) or string", "body": "<p>You have <code>EOF</code> after the line with <code>foreach</code>. It contains <code>$_</code> which is interpolated here but <code>$_</code> is not initialized yet because it is not in <code>foreach</code> loop. It is not code but just text. Move EOF before <code>foreach</code>.</p>\n\n<p>But probably you would like</p>\n\n<pre><code>sub MailNewFiles {\n    $mail= \"sendmail\";\n\n    open ($mail, \"| /usr/lib/sendmail -oi -t\" ) ||die \"errors with sendmail $!\"; # open handler and pipe it to sendmail\n    local $\"=\"\\n\"; # \" make syntax highlight happy\n    print $mail &lt;&lt;\"EOF\";    #print till the end of fiEOF\nFrom: \"user\";\nTo: \"root\";\nSubject: \"New Files Found\";\n\nNew files found:\n@_\nEOF\n    close($mail);\n}\n</code></pre>\n\n<p>See <a href=\"http://perldoc.perl.org/perlvar.html#%24LIST_SEPARATOR\" rel=\"nofollow\">perlvar</a> for more informations about <code>$\"</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 11224, "user_id": 1620937, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/689410968ffb0f422e790bd6a48b3d9e?s=128&d=identicon&r=PG", "display_name": "Orab&#238;g", "link": "https://stackoverflow.com/users/1620937/orab%c3%aeg"}, "is_accepted": false, "score": 0, "last_activity_date": 1427291888, "creation_date": 1427291888, "answer_id": 29257797, "question_id": 29255600, "link": "https://stackoverflow.com/questions/29255600/perl-error-use-of-uninitialized-value-in-concatenation-or-string/29257797#29257797", "title": "perl error: Use of uninitialized value $_ in concatenation (.) or string", "body": "<p>The message</p>\n\n<pre><code>Use of uninitialized value $xxx in ...\n</code></pre>\n\n<p>is very straightforward. When you encounter it, it means that you are using a variable ($xxx) in any way, but that the variable has not ever been initialized.</p>\n\n<p>Sometimes, adding an initialization command at the start of you code is enough :</p>\n\n<pre><code>my $str = '';\nmy $num = 0;\n</code></pre>\n\n<p>Sometimes, your algorithm is wrong, or you just mistyped your variable, like in :</p>\n\n<pre><code>my $foo = 'foo';\nmy $bar = $ffo . 'bar'; # &lt;&lt; There is a warning on this line\n                        # &lt;&lt; because you made a mistake on $foo ($ffo)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 98433, "user_id": 368630, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/107085826cfbb2700f535417a12c89cb?s=128&d=identicon&r=PG", "display_name": "David W.", "link": "https://stackoverflow.com/users/368630/david-w"}, "is_accepted": false, "score": 5, "last_activity_date": 1427292859, "creation_date": 1427292859, "answer_id": 29258160, "question_id": 29255600, "link": "https://stackoverflow.com/questions/29255600/perl-error-use-of-uninitialized-value-in-concatenation-or-string/29258160#29258160", "title": "perl error: Use of uninitialized value $_ in concatenation (.) or string", "body": "<p>A few suggestions:</p>\n\n<ul>\n<li>Perl isn't C. Your main program loop shouldn't be a declared subroutine which you then execute. Eliminate the <code>AscertainStatus</code> subroutine.</li>\n<li>Always, always <code>use strict;</code> and <code>use warnings;</code>.</li>\n<li>Indent correctly. It makes it much easier for people to read your code and help analyze what you did wrong.</li>\n<li>Use a more modern Perl coding style. Perl is an old language, and over the years new coding style and techniques have been developed to help you eliminate basic errors and help others read your code.</li>\n<li>Don't use system commands when there are Perl modules that can do this for you in a more standard way, and probably do better error checking. Perl comes with the <a href=\"http://perldoc.perl.org/Net/SMTP.html\" rel=\"noreferrer\">Net::SMTP</a> that handles mail communication for you. Use that.</li>\n</ul>\n\n<p>The error <code>Use of uninitialized value $_ in concatenation (.) or string</code> is exactly what it says. You are attempting to use a value of a variable that hasn't been set. In this case, the variable is the <code>@_</code> variable in your <code>foreach</code> statement. Your <code>foreach</code> isn't a true <code>foreach</code>, but part of your <code>print</code> statement since your <code>EOF</code> is <strong><em>after</em></strong> your <code>for</code> statement. This looks like an error.</p>\n\n<p>Also, what is the value of <code>@_</code>? This variable contains a list of values that have been passed to your subroutine. If none are passed, it will be undefined. Even if <code>@_</code> is undefined, <code>foreach (undef)</code> will simply skip the loop. However, since <code>foreach (@_) {</code> is a string to print, your Perl program will crash without <code>@_</code> being defined.</p>\n\n<p>If you remove the <code>-w</code> from <code>#!/usr/bin/perl</code>, your program will actually \"<em>work</em>\" (Note the quotes), and you'll see that your <code>foreach</code> will literally print.</p>\n\n<p>I do not recommend you not to use warnings which is what <code>-w</code> does. In fact, I recommend you <code>use warnings;</code> rather than <code>-w</code>. However, in this case, it might help you see your error.</p>\n"}], "owner": {"reputation": 29, "user_id": 3162226, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EYAsd.jpg?s=128&g=1", "display_name": "mimo", "link": "https://stackoverflow.com/users/3162226/mimo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 7218, "favorite_count": 0, "answer_count": 3, "score": -2, "last_activity_date": 1427292859, "creation_date": 1427286279, "last_edit_date": 1427289686, "question_id": 29255600, "link": "https://stackoverflow.com/questions/29255600/perl-error-use-of-uninitialized-value-in-concatenation-or-string", "title": "perl error: Use of uninitialized value $_ in concatenation (.) or string", "body": "<p>I get the following error:</p>\n\n<pre><code>Use of uninitialized value $_ in concatenation (.) or string at checkfornewfiles.pl line 34.\n</code></pre>\n\n<p>when attempting to run the following code :</p>\n\n<pre><code>#!/usr/bin/perl -w\n#Author: mimo\n#Date 3/2015\n#Purpose: monitor directory for new files...\n\nAscertainStatus();\n        ######### start of subroutine ########\nsub AscertainStatus {\n    my $DIR= \"test2\";\n\n    ####### open handler #############\n    opendir (HAN1, \"$DIR\") || die \"Problem: $!\";\n\n    ########## assign theoutput of HAN1 to array1 ##########\n    my @array1= readdir(HAN1);\n\n    ######## adding some logic #########\n\n    if (\"$#array1\" &gt; 1) {   #### if files exists (more than 1) in the directory #######\n            for (my $i=0; $i&lt;2; $i++) {shift @array1;}      ####### for i in position 0 (which is the . position) loop twice and add one (the position ..) get rid of them #######\n            MailNewFiles(@array1);\n    }       else { print \"No New Files\\n\";}\n\n}\n\nsub MailNewFiles {\n    $mail= \"sendmail\";\n\n    open ($mail, \"| /usr/lib/sendmail -oi -t\" ) ||die \"errors with sendmail $!\"; # open handler and pipe it to sendmail\n    print $mail &lt;&lt;\"EOF\";    #print till the end of fiEOF\n    From: \"user\";\n    To: \"root\";\n    Subject: \"New Files Found\";\n\n    foreach (@_) {print $mail \"new file found:\\n $_\\n\";}\nEOF\n    close($mail);\n}\n\n#End\n</code></pre>\n\n<p>I am new to perl and I don't know what's going wrong. Can anyone help me ?</p>\n"}, {"tags": ["perl", "file", "io", "multiprocessing", "tail"], "comments": [{"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1427283567, "post_id": 29254524, "comment_id": 46712170, "body": "Why have you decided against locking? <code>flock</code> allows for shared (read) locks, and exclusive (write) locks. If you don&#39;t want to read whilst one process is writing, that sound exactly the tool for the job."}, {"owner": {"reputation": 3, "user_id": 4709541, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2111882274912b06a259c3f66c12d214?s=128&d=identicon&r=PG&f=1", "display_name": "ddynsdqw", "link": "https://stackoverflow.com/users/4709541/ddynsdqw"}, "reply_to_user": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1427285816, "post_id": 29254524, "comment_id": 46713615, "body": "Please give an example reading last N lines of file using any module, I don&#39;t want to call shell function tail for this ,it is too expensive and heavy"}, {"owner": {"reputation": 25491, "user_id": 49197, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/15ebf24a33a29b9efbf9924f530dd736?s=128&d=identicon&r=PG", "display_name": "Hynek -Pichi- Vychodil", "link": "https://stackoverflow.com/users/49197/hynek-pichi-vychodil"}, "reply_to_user": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1427292773, "post_id": 29254524, "comment_id": 46718589, "body": "@Sobrique: Did you tried do anything serious with <code>flock</code>? There are two file-locking mechanisms in Linux, both accessible from Perl and <code>flock</code> is one of them. But they are incompatible and works only with programs which use same locking mechanism. Hell no."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1427292890, "post_id": 29254524, "comment_id": 46718676, "body": "Depends what you mean by &#39;serious&#39; - I have written scripts that do what the OP is trying to, and it&#39;s worked fine. Wouldn&#39;t suggest it for over NFS mounts or similar though."}], "answers": [{"tags": [], "owner": {"reputation": 4514, "user_id": 4248931, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HijcJ.png?s=128&g=1", "display_name": "serenesat", "link": "https://stackoverflow.com/users/4248931/serenesat"}, "is_accepted": true, "score": 0, "last_activity_date": 1427286937, "creation_date": 1427286937, "answer_id": 29255850, "question_id": 29254524, "link": "https://stackoverflow.com/questions/29254524/tailing-already-opened-file-in-perl/29255850#29255850", "title": "Tailing already opened file in Perl", "body": "<p>To read the last <code>N</code> lines of a files you can use the CPAN module <code>File::ReadBackwards</code>.</p>\n\n<pre><code>use File::ReadBackwards;\n\nmy $lastlines = File::ReadBackwards-&gt;new(\"file.txt\");\nprint reverse map { $lastlines-&gt;readline() } (1 .. 2);\n</code></pre>\n\n<p>This will print last 2 lines of a file. Replace 2 with any number what you want.</p>\n"}], "owner": {"reputation": 3, "user_id": 4709541, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2111882274912b06a259c3f66c12d214?s=128&d=identicon&r=PG&f=1", "display_name": "ddynsdqw", "link": "https://stackoverflow.com/users/4709541/ddynsdqw"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 45, "favorite_count": 0, "accepted_answer_id": 29255850, "answer_count": 1, "score": 0, "last_activity_date": 1427287104, "creation_date": 1427283274, "last_edit_date": 1427287104, "question_id": 29254524, "link": "https://stackoverflow.com/questions/29254524/tailing-already-opened-file-in-perl", "title": "Tailing already opened file in Perl", "body": "<p>I have one child process that writes into file some information dynamically. Sometimes I need to get <code>N</code> number of last lines of this file. But when parent process is reading file child will continue to write to it.<br>\nI have read that there is no sense to lock it and unlock, but I am not sure. I will not write anything from parent process, so I need to open it only for reading.<br>\nI have found module <code>File::Tail</code> , but didn't understand how to use it to get <code>N</code> number of last lines, please provide some simple example.</p>\n\n<p>Also I need advice is it necessary to use locking in this case?</p>\n"}, {"tags": ["perl", "cpan", "strawberry-perl"], "comments": [{"owner": {"reputation": 7570, "user_id": 17945, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/e8cbc0b9ed29b027a127d8df309af5a6?s=128&d=identicon&r=PG", "display_name": "reinierpost", "link": "https://stackoverflow.com/users/17945/reinierpost"}, "edited": false, "score": 0, "creation_date": 1427281182, "post_id": 29253179, "comment_id": 46710763, "body": "This is clearly a bug; can it be triggered by something weird in your configuration file?"}, {"owner": {"reputation": 21, "user_id": 2299893, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/52c840d503d44c07c276eb758993b7db?s=128&d=identicon&r=PG", "display_name": "Zoya Khalid", "link": "https://stackoverflow.com/users/2299893/zoya-khalid"}, "reply_to_user": {"reputation": 7570, "user_id": 17945, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/e8cbc0b9ed29b027a127d8df309af5a6?s=128&d=identicon&r=PG", "display_name": "reinierpost", "link": "https://stackoverflow.com/users/17945/reinierpost"}, "edited": false, "score": 0, "creation_date": 1427284398, "post_id": 29253179, "comment_id": 46712692, "body": "Can you explain further what should I do with my config.pm file ?  I am very new to this stuff"}], "owner": {"reputation": 21, "user_id": 2299893, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/52c840d503d44c07c276eb758993b7db?s=128&d=identicon&r=PG", "display_name": "Zoya Khalid", "link": "https://stackoverflow.com/users/2299893/zoya-khalid"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 261, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1427283722, "creation_date": 1427279506, "last_edit_date": 1495540609, "question_id": 29253179, "link": "https://stackoverflow.com/questions/29253179/cpan-yaml-process-error", "title": "CPAN-Yaml process error", "body": "<p>I followed the answers mentioned in this <a href=\"https://stackoverflow.com/questions/20207079/cpan-yaml-process-error\">question</a>, but still my problem is not solved.  I tried:</p>\n\n<pre><code>o conf yaml_module YAML::XS\n</code></pre>\n\n<p>I then tried changing this to:</p>\n\n<pre><code>YAML::Sync YAML YAML::Tiny\n</code></pre>\n\n<p>but no luck. Whenever I tried to install cpan modules the following error comes on the screen:</p>\n\n<pre><code>CPAN:Exception YAML_process_error= HASH (0x817abcd)\n\nApp::CPAN::process_options\n</code></pre>\n\n<p>One thing more I wanted to mention. If I try installing <code>YAML</code> lib by this command:</p>\n\n<pre><code>cpan install YAML::LibYAML\n</code></pre>\n\n<p>again no luck. The screen again shows a cpan yaml exception error. Can anyone please help me out here?</p>\n\n<p>Note : I am using windows, <code>Strawberry</code> perl version 5.20</p>\n"}, {"tags": ["perl", "awk"], "comments": [{"owner": {"reputation": 39446, "user_id": 4301306, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a1461d0104809c90e2a252a2d4b0ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Wintermute", "link": "https://stackoverflow.com/users/4301306/wintermute"}, "edited": false, "score": 1, "creation_date": 1427278815, "post_id": 29252834, "comment_id": 46709335, "body": "Is <code>file2</code> guaranteed to be a subset of <code>file1</code>? If not, what is the expected output for lines that appear in <code>file2</code> but not in <code>file1</code>?"}, {"owner": {"reputation": 23, "user_id": 4711476, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46ca5e15fb079641ec0e7be95d240c1f?s=128&d=identicon&r=PG&f=1", "display_name": "Ram", "link": "https://stackoverflow.com/users/4711476/ram"}, "reply_to_user": {"reputation": 39446, "user_id": 4301306, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a1461d0104809c90e2a252a2d4b0ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Wintermute", "link": "https://stackoverflow.com/users/4301306/wintermute"}, "edited": false, "score": 0, "creation_date": 1427279102, "post_id": 29252834, "comment_id": 46709535, "body": "yes, file2 is guaranteed to be a subset of file1"}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1427279273, "post_id": 29252834, "comment_id": 46709636, "body": "Why don&#39;t you use <code>diff</code>?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user4453924"}, "edited": false, "score": 0, "creation_date": 1427279734, "post_id": 29252834, "comment_id": 46709931, "body": "This question has been asked numerous times."}], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 4711476, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46ca5e15fb079641ec0e7be95d240c1f?s=128&d=identicon&r=PG&f=1", "display_name": "Ram", "link": "https://stackoverflow.com/users/4711476/ram"}, "edited": false, "score": 0, "creation_date": 1427280853, "post_id": 29253039, "comment_id": 46710575, "body": "Getting output like this:(it is almost close it seems, first char appending after each yes/no) noa  yes  noc  nod"}, {"owner": {"reputation": 39446, "user_id": 4301306, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a1461d0104809c90e2a252a2d4b0ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Wintermute", "link": "https://stackoverflow.com/users/4301306/wintermute"}, "reply_to_user": {"reputation": 23, "user_id": 4711476, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46ca5e15fb079641ec0e7be95d240c1f?s=128&d=identicon&r=PG&f=1", "display_name": "Ram", "link": "https://stackoverflow.com/users/4711476/ram"}, "edited": false, "score": 0, "creation_date": 1427281314, "post_id": 29253039, "comment_id": 46710832, "body": "I can&#39;t really see what your actual output is from the comment. Can you post it again with <code>\\n</code> instead of newlines, so I can see where lines begin and end?"}, {"owner": {"reputation": 23, "user_id": 4711476, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46ca5e15fb079641ec0e7be95d240c1f?s=128&d=identicon&r=PG&f=1", "display_name": "Ram", "link": "https://stackoverflow.com/users/4711476/ram"}, "edited": false, "score": 0, "creation_date": 1427281367, "post_id": 29253039, "comment_id": 46710858, "body": "noa\\n  yes\\n  noc\\n  nod\\n"}, {"owner": {"reputation": 39446, "user_id": 4301306, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a1461d0104809c90e2a252a2d4b0ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Wintermute", "link": "https://stackoverflow.com/users/4301306/wintermute"}, "reply_to_user": {"reputation": 23, "user_id": 4711476, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46ca5e15fb079641ec0e7be95d240c1f?s=128&d=identicon&r=PG&f=1", "display_name": "Ram", "link": "https://stackoverflow.com/users/4711476/ram"}, "edited": false, "score": 0, "creation_date": 1427281481, "post_id": 29253039, "comment_id": 46710928, "body": "Odd. If you replace <code>$(NF + 1) = ($0 in a ? &quot;yes&quot; : &quot;no&quot;)</code> with <code>$0 = $0 OFS ($0 in a ? &quot;yes&quot; : &quot;no&quot;)</code>, does that change things? By the way, what version of awk are you using?"}, {"owner": {"reputation": 39446, "user_id": 4301306, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a1461d0104809c90e2a252a2d4b0ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Wintermute", "link": "https://stackoverflow.com/users/4301306/wintermute"}, "reply_to_user": {"reputation": 23, "user_id": 4711476, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46ca5e15fb079641ec0e7be95d240c1f?s=128&d=identicon&r=PG&f=1", "display_name": "Ram", "link": "https://stackoverflow.com/users/4711476/ram"}, "edited": false, "score": 0, "creation_date": 1427282060, "post_id": 29253039, "comment_id": 46711270, "body": "I cannot reproduce your output with the original code and gawk or mawk, but I have hunches where other awks might be picky. Can you try the edited code?"}, {"owner": {"reputation": 23, "user_id": 4711476, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46ca5e15fb079641ec0e7be95d240c1f?s=128&d=identicon&r=PG&f=1", "display_name": "Ram", "link": "https://stackoverflow.com/users/4711476/ram"}, "edited": false, "score": 0, "creation_date": 1427457163, "post_id": 29253039, "comment_id": 46794840, "body": "this is perfect. actually the problem was with me only, I was trying with windows file. Sorry for bothering you. Thanks a lot for the help!"}], "tags": [], "owner": {"reputation": 39446, "user_id": 4301306, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a1461d0104809c90e2a252a2d4b0ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Wintermute", "link": "https://stackoverflow.com/users/4301306/wintermute"}, "is_accepted": true, "score": 0, "last_activity_date": 1427281859, "last_edit_date": 1427281859, "creation_date": 1427279116, "answer_id": 29253039, "question_id": 29252834, "link": "https://stackoverflow.com/questions/29252834/using-a-perl-script-to-compare-two-files/29253039#29253039", "title": "Using a Perl script to compare two files", "body": "<p>With awk:</p>\n\n<pre><code>awk 'NR == FNR { a[$0]; next } { print $0, ($0 in a ? \"yes\" : \"no\") }' file2 file1\n</code></pre>\n\n<p>That is:</p>\n\n<pre><code>NR == FNR {                             # while processing the first file\n  a[$0]                                 # (i.e., file2) just remember what you\n  next                                  # saw, and don't do anything else\n}\n{                                       # afterwards:\n  print $0, ($0 in a ? \"yes\" : \"no\")    # print the line followed by \"yes\" or\n                                        # \"no\" depending on whether the line\n                                        # was seen before in file2\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 4514, "user_id": 4248931, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HijcJ.png?s=128&g=1", "display_name": "serenesat", "link": "https://stackoverflow.com/users/4248931/serenesat"}, "edited": false, "score": 1, "creation_date": 1427285779, "post_id": 29254708, "comment_id": 46713582, "body": "Did you test this ? I am getting output <code>no no</code>."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "reply_to_user": {"reputation": 4514, "user_id": 4248931, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HijcJ.png?s=128&g=1", "display_name": "serenesat", "link": "https://stackoverflow.com/users/4248931/serenesat"}, "edited": false, "score": 0, "creation_date": 1427286871, "post_id": 29254708, "comment_id": 46714355, "body": "Minor typo. Amended."}], "tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": false, "score": 2, "last_activity_date": 1427287517, "last_edit_date": 1427287517, "creation_date": 1427283801, "answer_id": 29254708, "question_id": 29252834, "link": "https://stackoverflow.com/questions/29252834/using-a-perl-script-to-compare-two-files/29254708#29254708", "title": "Using a Perl script to compare two files", "body": "<p>In perl</p>\n\n<pre><code>use strict;\nuse warnings;\n\nopen ( my $file_2,\"&lt;\", \"file2.txt\" ) or die $!;\nmy %seen;\nwhile ( my $line = &lt;$file_2&gt; ) {\n   chomp ( $line ) ;\n   $seen{$line}++;\n}\n\nclose ( $file_2 );\n\nopen ( my $file_1, \"&lt;\", \"file1.txt\" ) or die $!; \nwhile ( my $line1 = &lt;$file_1&gt; ) {\n   chomp $line1;\n   print $line1, \" \", $seen{$line1} ? \"yes\" : \"no\", \"\\n\";\n}\nclose ( $file_1 );\n</code></pre>\n\n<p>Prints:</p>\n\n<pre><code>    aaaa no\n    bbbb yes\n    cccc yes\n    dddd no\n</code></pre>\n\n<p>You may want to apply a regex to clear up whitespace, such as <code>$line =~ s/^\\s+//g;</code> but I wasn't sure if the whitespace at start of line was formatting, padding or actually important, so I didn't touch it.</p>\n"}], "owner": {"reputation": 23, "user_id": 4711476, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46ca5e15fb079641ec0e7be95d240c1f?s=128&d=identicon&r=PG&f=1", "display_name": "Ram", "link": "https://stackoverflow.com/users/4711476/ram"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 299, "favorite_count": 0, "closed_date": 1427545849, "accepted_answer_id": 29253039, "answer_count": 2, "score": 2, "last_activity_date": 1440964239, "creation_date": 1427278479, "last_edit_date": 1440964239, "question_id": 29252834, "link": "https://stackoverflow.com/questions/29252834/using-a-perl-script-to-compare-two-files", "closed_reason": "Duplicate", "title": "Using a Perl script to compare two files", "body": "<p>I am trying to write a Perl/AWK script to compare two files' output in this format shown below:</p>\n\n<p>(As of now I can <code>diff</code> the two files using\n<code>grep -Fxvf file1 file2 &gt; file3</code> which is not sufficient.)</p>\n\n<p>Note: file1 is a superset of file2.</p>\n\n<p>file1:</p>\n\n<pre><code>aaaa\nbbbb\ncccc\ndddd\n</code></pre>\n\n<p>file2:</p>\n\n<pre><code>bbbb\ncccc\n</code></pre>\n\n<p>Expected output file:</p>\n\n<pre><code>aaaa  No\nbbbb  yes\ncccc  yes\ndddd  No\n</code></pre>\n"}, {"tags": ["xml", "perl", "xpath", "xml-libxml"], "comments": [{"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1427276199, "post_id": 29251641, "comment_id": 46707656, "body": "Is xml_split an option: <a href=\"http://search.cpan.org/dist/XML-Twig/tools/xml_split/xml_split\" rel=\"nofollow noreferrer\">search.cpan.org/dist/XML-Twig/tools/xml_split/xml_split</a>"}, {"owner": {"reputation": 7570, "user_id": 17945, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/e8cbc0b9ed29b027a127d8df309af5a6?s=128&d=identicon&r=PG", "display_name": "reinierpost", "link": "https://stackoverflow.com/users/17945/reinierpost"}, "edited": false, "score": 1, "creation_date": 1427282467, "post_id": 29251641, "comment_id": 46711498, "body": "You assign to <code>$bhap</code> etc. then read from <code>$bhap</code>. Using <code>use warnings; use strict;</code> catches this sort of thing."}, {"owner": {"reputation": 28131, "user_id": 1956010, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/bfdcb4596e9da98cccbf9a0069fdff6c?s=128&d=identicon&r=PG", "display_name": "nwellnhof", "link": "https://stackoverflow.com/users/1956010/nwellnhof"}, "edited": false, "score": 1, "creation_date": 1427284560, "post_id": 29251641, "comment_id": 46712803, "body": "<code>my $nodes1 = $bhap-&gt;findnodes(&#39;&#47;&#47;rect&#39;);</code> You&#39;re calling <code>findnodes</code> on a string here."}, {"owner": {"reputation": 972, "user_id": 432375, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6635e9a9e4cc30b351dda42b9d07a7e6?s=128&d=identicon&r=PG", "display_name": "fortboise", "link": "https://stackoverflow.com/users/432375/fortboise"}, "edited": false, "score": 0, "creation_date": 1520608725, "post_id": 29251641, "comment_id": 85398524, "body": "I had a script that was working for more than a year, and just started throwing this. Something changed in the machine&#39;s perl or package installation? Irksome."}], "answers": [{"comments": [{"owner": {"reputation": 972, "user_id": 432375, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6635e9a9e4cc30b351dda42b9d07a7e6?s=128&d=identicon&r=PG", "display_name": "fortboise", "link": "https://stackoverflow.com/users/432375/fortboise"}, "edited": false, "score": 0, "creation_date": 1520608553, "post_id": 29252559, "comment_id": 85398406, "body": "I&#39;m sure that&#39;s all good advice, but the stated problem is the error &quot;Can&#39;t call method &quot;findnodes&quot; without a package or object reference&quot; and you&#39;ve said nothing at all about that."}], "tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": false, "score": 2, "last_activity_date": 1427284452, "last_edit_date": 1427284452, "creation_date": 1427277694, "answer_id": 29252559, "question_id": 29251641, "link": "https://stackoverflow.com/questions/29251641/error-when-trying-to-split-xml-file-using-xmllibxml-module/29252559#29252559", "title": "Error when trying to split XML file using XML::LibXML module", "body": "<p>OK, so you start out well, but then ... fall in to the 'regular expression' trap. XML is not a good thing to parse with regular expressions, because it's just too complicated - do do it well you need to handle/validate tag nestings, and line feeds and all sorts of things that basically just make your regular expression a brittle piece of code. So please don. </p>\n\n<p>But most importantly of all - ALWAYS use <code>strict</code> and <code>warnings</code> prior to posting queries. These are your first port of call for troubleshooting.</p>\n\n<p>If you did you would see things like:</p>\n\n<pre><code>print \"file\" $var2;\n</code></pre>\n\n<p>That's not going to work - at all. There's a bunch of others that aren't going to work properly in 'your code' so really - that would be the starting point. </p>\n\n<p>Also - your XML isn't valid - your 'S4' I think is missing a quote mark. </p>\n\n<p>Anyway, assuming that's just a typo, I'd start with <a href=\"http://search.cpan.org/~mirod/XML-Twig-3.48/Twig.pm\" rel=\"nofollow\"><code>XML::Twig</code></a> (because I understand it better than LibXML rather than any specific reason) and do something like this:</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\nuse XML::Twig;\n\nmy %children_of;\n\n#as we process, extract all the 'rect' elements - along with a reference to their context.\nsub process_rect {\n    my ( $twig, $rect ) = @_;\n    push( @{ $children_of{ $rect-&gt;parent } }, $rect-&gt;cut );\n}\n\n\nmy $twig = XML::Twig-&gt;new(\n    'pretty_print'  =&gt; 'indented',\n    'twig_handlers' =&gt; { 'rect' =&gt; \\&amp;process_rect },\n\n);\n\n$twig-&gt;parse( \\*DATA );\n\n#run through all the 'bhap' elements. \nforeach my $bhap ( $twig-&gt;root-&gt;children('bhap') ) {\n    #find the rect elements under this bhap. \n    foreach my $rect ( @{ $children_of{$bhap} } ) {\n        #create a new XML document - copy the 'root' name from your original document. \n        my $xml    = XML::Twig::Elt-&gt;new( $twig -&gt; root -&gt; name );\n        #duplicate this 'bhap' element by copying it, rather than cutting it,\n        #so we can paste it more than once (e.g. per 'rect')\n        my $subset = $bhap-&gt;copy;\n        #insert the 'bhap' into our new xml. \n        $subset-&gt;paste( last_child =&gt; $xml );\n        #insert our cut rect beneath this bhap. \n        $rect-&gt;paste( last_child =&gt; $subset );\n\n        #print the resulting XML. \n        print \"--\\n\";\n        $xml-&gt;print;\n    }\n}\n\n__DATA__\n&lt;xml&gt;\n\n&lt;bhap id=\"1\"&gt;\n                &lt;label&gt;cylind - I&lt;/label&gt;\n                &lt;title&gt;premier&lt;/title&gt;\n                &lt;rect id=\"S1\"&gt;\n                    &lt;title&gt;Short&lt;/title&gt;\n                    &lt;label&gt;1.&lt;/label&gt;\n                    &lt;p&gt;&lt;text&gt;welcome&lt;/text&gt;&lt;/p&gt;\n                &lt;/rect&gt;\n                &lt;rect id=\"S2\"&gt;\n                    &lt;title&gt;Definite&lt;/title&gt;\n                    &lt;label&gt;2.&lt;/label&gt;\n                    &lt;p&gt;&lt;text&gt;welcome1&lt;/text&gt;&lt;/p&gt;\n                &lt;/rect&gt;\n        &lt;/bhap&gt;\n            &lt;bhap id=\"2\"&gt;\n                &lt;label&gt;cylind - II&lt;/label&gt;\n                &lt;title&gt;AUTHORITIES AND ITS EMPLOYEES&lt;/title&gt;\n\n                &lt;rect id=\"S3\"&gt;\n                    &lt;title&gt;nauty.&amp;#x2014;&lt;/title&gt;\n                    &lt;label&gt;3.&lt;/label&gt;\n                    &lt;p&gt;&lt;text&gt;welcome3&lt;/text&gt;&lt;/p&gt;\n                &lt;/rect&gt;\n\n                &lt;rect id=\"S4\"&gt;\n                    &lt;title&gt;Term&lt;/title&gt;\n                    &lt;label&gt;4.&lt;/label&gt;\n                    &lt;p&gt;&lt;text&gt;welcome4&lt;/text&gt;&lt;/p&gt;\n                &lt;/rect&gt;&lt;/bhap&gt;\n\n&lt;/xml&gt;\n</code></pre>\n\n<p>We preprocess the XML, and 'snip out' the <code>rect</code> nodes. Then we cycle through each of the <code>bhap</code> nodes - copying them, and inserting the relevant <code>rect</code> beneath them. </p>\n\n<p>This gives output of:</p>\n\n<pre><code>--\n&lt;xml&gt;\n  &lt;bhap id=\"1\"&gt;\n    &lt;label&gt;cylind - I&lt;/label&gt;\n    &lt;title&gt;premier&lt;/title&gt;\n    &lt;rect id=\"S1\"&gt;\n      &lt;title&gt;Short&lt;/title&gt;\n      &lt;label&gt;1.&lt;/label&gt;\n      &lt;p&gt;\n        &lt;text&gt;welcome&lt;/text&gt;\n      &lt;/p&gt;\n    &lt;/rect&gt;\n  &lt;/bhap&gt;\n&lt;/xml&gt;\n--\n&lt;xml&gt;\n  &lt;bhap id=\"1\"&gt;\n    &lt;label&gt;cylind - I&lt;/label&gt;\n    &lt;title&gt;premier&lt;/title&gt;\n    &lt;rect id=\"S2\"&gt;\n      &lt;title&gt;Definite&lt;/title&gt;\n      &lt;label&gt;2.&lt;/label&gt;\n      &lt;p&gt;\n        &lt;text&gt;welcome1&lt;/text&gt;\n      &lt;/p&gt;\n    &lt;/rect&gt;\n  &lt;/bhap&gt;\n&lt;/xml&gt;\n--\n&lt;xml&gt;\n  &lt;bhap id=\"2\"&gt;\n    &lt;label&gt;cylind - II&lt;/label&gt;\n    &lt;title&gt;AUTHORITIES AND ITS EMPLOYEES&lt;/title&gt;\n    &lt;rect id=\"S3\"&gt;\n      &lt;title&gt;nauty.\u00e2\u20ac\u201d&lt;/title&gt;\n      &lt;label&gt;3.&lt;/label&gt;\n      &lt;p&gt;\n        &lt;text&gt;welcome3&lt;/text&gt;\n      &lt;/p&gt;\n    &lt;/rect&gt;\n  &lt;/bhap&gt;\n&lt;/xml&gt;\n--\n&lt;xml&gt;\n  &lt;bhap id=\"2\"&gt;\n    &lt;label&gt;cylind - II&lt;/label&gt;\n    &lt;title&gt;AUTHORITIES AND ITS EMPLOYEES&lt;/title&gt;\n    &lt;rect id=\"S4\"&gt;\n      &lt;title&gt;Term&lt;/title&gt;\n      &lt;label&gt;4.&lt;/label&gt;\n      &lt;p&gt;\n        &lt;text&gt;welcome4&lt;/text&gt;\n      &lt;/p&gt;\n    &lt;/rect&gt;\n  &lt;/bhap&gt;\n&lt;/xml&gt;\n</code></pre>\n\n<p>Which looks at least <em>fairly</em> close to what you're trying to produce. I've skipped over reading in files and printing out the content, because reconstructing the XML is the harder part. </p>\n\n<p>I would also suggest looking at <a href=\"http://search.cpan.org/dist/XML-Twig/tools/xml_split/xml_split\" rel=\"nofollow\"><code>xml_split</code></a> which is available with <code>XML::Twig</code> as that might do exactly what you want anyway. </p>\n"}], "owner": {"reputation": 83, "user_id": 1548204, "user_type": "registered", "accept_rate": 18, "profile_image": "https://www.gravatar.com/avatar/03deae7e7f2ca61e6fcb8e35155ee7b3?s=128&d=identicon&r=PG", "display_name": "maddy", "link": "https://stackoverflow.com/users/1548204/maddy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 316, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1427286576, "creation_date": 1427275114, "last_edit_date": 1427286576, "question_id": 29251641, "link": "https://stackoverflow.com/questions/29251641/error-when-trying-to-split-xml-file-using-xmllibxml-module", "title": "Error when trying to split XML file using XML::LibXML module", "body": "<p>I have been trying to split XML data using the <a href=\"https://metacpan.org/module/XML::LibXML\" rel=\"nofollow\"><code>XML::LibXML</code></a> module, but it throws an error like this</p>\n\n<pre><code>Can't call method \"findnodes\" without a package or object reference\n</code></pre>\n\n<p>My input</p>\n\n<pre><code>&lt;xml&gt;\n  &lt;bhap id=\"1\"&gt;\n    &lt;label&gt;cylind - I&lt;/label&gt;\n    &lt;title&gt;premier&lt;/title&gt;\n    &lt;rect id=\"S1\"&gt;\n      &lt;title&gt;Short&lt;/title&gt;\n      &lt;label&gt;1.&lt;/label&gt;\n      &lt;p&gt;&lt;text&gt;welcome&lt;/text&gt;&lt;/p&gt;\n    &lt;/rect&gt;\n    &lt;rect id=\"S2\"&gt;\n      &lt;title&gt;Definite&lt;/title&gt;\n      &lt;label&gt;2.&lt;/label&gt;\n      &lt;p&gt;&lt;text&gt;welcome1&lt;/text&gt;&lt;/p&gt;\n    &lt;/rect&gt;\n  &lt;/bhap&gt;\n  &lt;bhap id=\"2\"&gt;\n    &lt;label&gt;cylind \u2013 II&lt;/label&gt;\n    &lt;title&gt;AUTHORITIES AND ITS EMPLOYEES&lt;/title&gt;\n    &lt;rect id=\"S3\"&gt;\n      &lt;title&gt;nauty.&amp;#x2014;&lt;/title&gt;\n      &lt;label&gt;3.&lt;/label&gt;\n      &lt;p&gt;&lt;text&gt;welcome3&lt;/text&gt;&lt;/p&gt;\n    &lt;/rect&gt;\n    &lt;rect id=S4\"&gt;\n      &lt;title&gt;Term&lt;/title&gt;\n      &lt;label&gt;4.&lt;/label&gt;\n      &lt;p&gt;&lt;text&gt;welcome4&lt;/text&gt;&lt;/p&gt;\n    &lt;/rect&gt;\n  &lt;/bhap&gt;\n&lt;/xml&gt;\n</code></pre>\n\n<p>output needed</p>\n\n<p>file 1</p>\n\n<pre><code>&lt;xml&gt;\n  &lt;bhap id=\"1\"&gt;\n    &lt;label&gt;cylind - I&lt;/label&gt;\n    &lt;title&gt;premier&lt;/title&gt;\n    &lt;rect id=\"S1\"&gt;\n      &lt;title&gt;Short&lt;/title&gt;\n      &lt;label&gt;1.&lt;/label&gt;\n      &lt;p&gt;&lt;text&gt;welcome&lt;/text&gt;&lt;/p&gt;\n    &lt;/rect&gt;\n  &lt;/bhap&gt;\n&lt;/xml&gt;\n</code></pre>\n\n<p>file 2</p>\n\n<pre><code>&lt;xml&gt;   \n  &lt;bhap id=\"1\"&gt;\n    &lt;label&gt;cylind - I&lt;/label&gt;\n    &lt;title&gt;premier&lt;/title&gt;\n    &lt;rect id=\"S2\"&gt;\n      &lt;title&gt;Definite&lt;/title&gt;\n      &lt;label&gt;2.&lt;/label&gt;\n      &lt;p&gt;&lt;text&gt;welcome1&lt;/text&gt;&lt;/p&gt;\n    &lt;/rect&gt;\n  &lt;/bhap&gt;\n&lt;/xml&gt;\n</code></pre>\n\n<p>file 3          </p>\n\n<pre><code>&lt;xml&gt;\n  &lt;bhap id=\"2\"&gt;\n    &lt;label&gt;cylind \u2013 II&lt;/label&gt;\n    &lt;title&gt;AUTHORITIES AND ITS EMPLOYEES&lt;/title&gt;\n    &lt;rect id=\"S3\"&gt;\n      &lt;title&gt;nauty.&amp;#x2014;&lt;/title&gt;\n      &lt;label&gt;3.&lt;/label&gt;\n      &lt;p&gt;&lt;text&gt;welcome3&lt;/text&gt;&lt;/p&gt;\n    &lt;/rect&gt;\n  &lt;/bhap&gt;\n&lt;/xml&gt;\n</code></pre>\n\n<p>file 4  </p>\n\n<pre><code>&lt;xml&gt;       \n  &lt;bhap id=\"2\"&gt;\n    &lt;label&gt;cylind \u2013 II&lt;/label&gt;\n    &lt;title&gt;AUTHORITIES AND ITS EMPLOYEES&lt;/title&gt;\n    &lt;rect id=S4\"&gt;\n      &lt;title&gt;Term&lt;/title&gt;\n      &lt;label&gt;4.&lt;/label&gt;\n      &lt;p&gt;&lt;text&gt;welcome4&lt;/text&gt;&lt;/p&gt;\n    &lt;/rect&gt;\n  &lt;/bhap&gt;\n&lt;/xml&gt;\n</code></pre>\n\n<p>my code</p>\n\n<pre><code>use XML::LibXML;\n\nmy $file   = shift || die \"usage $0 &lt;xmlfile&gt;\";\nmy $parser = XML::LibXML-&gt;new();\nmy $doc    = $parser-&gt;parse_file($file);\n\nmy @nodes = $doc-&gt;findnodes('//bhap');\nforeach my $node1 (@nodes) {\n\n    my $bhap = $node1-&gt;toString(), \"\\n\";\n\n    if ( $bhap =~ m/(&lt;bhap.+?&gt;.+?&lt;\\/title&gt;)(.+?)(&lt;\\/bhap&gt;)/is ) {\n\n        my $bhap1 = $1;\n        my $bhap2 = $2;\n        my $bhap3 = $3;\n\n        my $nodes1 = $bhap-&gt;findnodes('//rect');\n        foreach my $node (@$nodes1) {\n\n            my $rect = $node-&gt;toString();\n\n            if ( $rect =~ m/(&lt;rect\\s*id=\"(.+?)\"&gt;.+?&lt;\\/rect&gt;)/is ) {\n\n                my $var1 = $1;\n                my $var2 = $2;\n\n                print \"file\" $var2;\n                print \"&lt;xml&gt;\" print $bhap1;\n                print $var1;\n                print $bhap3;\n                print \"&lt;/xml&gt;\";\n            }\n        }\n    }\n}\n</code></pre>\n"}, {"tags": ["perl", "logging", "log4j", "log4perl", "graylog2"], "comments": [{"owner": {"reputation": 60461, "user_id": 3636601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/69a1b4f750ece89db0e49c94519f1a7d?s=128&d=identicon&r=PG&f=1", "display_name": "Jens", "link": "https://stackoverflow.com/users/3636601/jens"}, "edited": false, "score": 2, "creation_date": 1427270860, "post_id": 29250337, "comment_id": 46704835, "body": "Have you tried it? Any errors?"}, {"owner": {"reputation": 217, "user_id": 2515724, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/xrC4O.jpg?s=128&g=1", "display_name": "Abhijeet", "link": "https://stackoverflow.com/users/2515724/abhijeet"}, "reply_to_user": {"reputation": 60461, "user_id": 3636601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/69a1b4f750ece89db0e49c94519f1a7d?s=128&d=identicon&r=PG&f=1", "display_name": "Jens", "link": "https://stackoverflow.com/users/3636601/jens"}, "edited": false, "score": 0, "creation_date": 1427270898, "post_id": 29250337, "comment_id": 46704854, "body": "I cannot try it right now."}], "owner": {"reputation": 217, "user_id": 2515724, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/xrC4O.jpg?s=128&g=1", "display_name": "Abhijeet", "link": "https://stackoverflow.com/users/2515724/abhijeet"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 85, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1427270792, "creation_date": 1427270792, "question_id": 29250337, "link": "https://stackoverflow.com/questions/29250337/convert-log4j-config-to-log4perl-config", "title": "Convert log4j config to log4perl config", "body": "<p>How do I convert following log4j config to log4perl config</p>\n\n<pre><code>log4j.appender.graylog2                     = org.graylog2.log.GelfAppender\nlog4j.appender.graylog2.graylogHost         = somehostname\nlog4j.appender.graylog2.graylogPort         = XXXX # somePort\nlog4j.appender.graylog2.facility            = ${catalina.base}\nlog4j.appender.graylog2.layout              = org.apache.log4j.PatternLayout\nlog4j.appender.graylog2.extractStacktrace   = true\nlog4j.appender.graylog2.additionalFields    = {'customer': '${machine.customer}', 'stability': '${machine.stability}', 'appname': '${machine.appname}'}\n</code></pre>\n\n<p>I converted it as </p>\n\n<pre><code>log4perl.appender.graylog2                  = Log::Log4perl::Appender::Socket\nlog4perl.appender.graylog2.PeerAddr         = somehostname\nlog4perl.appender.graylog2.PeerPort         = XXXX # somePort\nlog4perl.appender.graylog2.facility         = sub { $ENV{catalina.base } }\nlog4perl.appender.graylog2.layout           = Log::Log4perl::Layout::GELF\nlog4perl.appender.graylog2.extractStacktrace= true\nlog4perl.appender.graylog2.additionalFields = {'customer': 'sub { $ENV{machine.customer} }', 'stability': 'sub { $ENV{machine.stability} }', 'appname': 'sub { $ENV{ {machine.appname} }'}\n</code></pre>\n\n<p>Is this right?</p>\n"}, {"tags": ["perl", "pdf", "sed"], "comments": [{"owner": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "edited": false, "score": 3, "creation_date": 1427273884, "post_id": 29250177, "comment_id": 46706340, "body": "In Perl, read entire uncompressed PDF as binary into memory, do as many changes as you want, write new version."}, {"owner": {"reputation": 1651, "user_id": 1548052, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/8b9a9309ea3ed901b3118852bfe57cbc?s=128&d=identicon&r=PG", "display_name": "Denis Rouzaud", "link": "https://stackoverflow.com/users/1548052/denis-rouzaud"}, "reply_to_user": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "edited": false, "score": 0, "creation_date": 1427279336, "post_id": 29250177, "comment_id": 46709675, "body": "nice idea. Although how do you find and replace text in a binary file?"}, {"owner": {"reputation": 7570, "user_id": 17945, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/e8cbc0b9ed29b027a127d8df309af5a6?s=128&d=identicon&r=PG", "display_name": "reinierpost", "link": "https://stackoverflow.com/users/17945/reinierpost"}, "edited": false, "score": 0, "creation_date": 1427281391, "post_id": 29250177, "comment_id": 46710875, "body": "Denis Rouzaud: you do it with a library dedicated to manipulating PDF documents."}, {"owner": {"reputation": 1651, "user_id": 1548052, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/8b9a9309ea3ed901b3118852bfe57cbc?s=128&d=identicon&r=PG", "display_name": "Denis Rouzaud", "link": "https://stackoverflow.com/users/1548052/denis-rouzaud"}, "edited": false, "score": 0, "creation_date": 1427307794, "post_id": 29250177, "comment_id": 46729040, "body": "reinerpost: can you name me one (under linux)? thanks!"}], "answers": [{"comments": [{"owner": {"reputation": 7570, "user_id": 17945, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/e8cbc0b9ed29b027a127d8df309af5a6?s=128&d=identicon&r=PG", "display_name": "reinierpost", "link": "https://stackoverflow.com/users/17945/reinierpost"}, "edited": false, "score": 0, "creation_date": 1427281439, "post_id": 29251355, "comment_id": 46710902, "body": "Why would you want to split the document into smaller documents?"}, {"owner": {"reputation": 522, "user_id": 1434413, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/311a01b76513d576084f90f1df8d5fed?s=128&d=identicon&r=PG", "display_name": "gn1", "link": "https://stackoverflow.com/users/1434413/gn1"}, "edited": false, "score": 0, "creation_date": 1427340170, "post_id": 29251355, "comment_id": 46741903, "body": "Denis: The PDF has a single page and the doc size is 160 MB. This probably means that the PDF contains one big image and the text is in the image rather as text. Please check whether you are able to select the text in a PDF viewer such as Evince."}, {"owner": {"reputation": 522, "user_id": 1434413, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/311a01b76513d576084f90f1df8d5fed?s=128&d=identicon&r=PG", "display_name": "gn1", "link": "https://stackoverflow.com/users/1434413/gn1"}, "edited": false, "score": 0, "creation_date": 1427340280, "post_id": 29251355, "comment_id": 46741921, "body": "Reiner: I thought memory limits were being hit as the doc had lots of page. Documents with smaller pages would have been more manageable."}], "tags": [], "owner": {"reputation": 522, "user_id": 1434413, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/311a01b76513d576084f90f1df8d5fed?s=128&d=identicon&r=PG", "display_name": "gn1", "link": "https://stackoverflow.com/users/1434413/gn1"}, "is_accepted": false, "score": 0, "last_activity_date": 1427274833, "last_edit_date": 1495541678, "creation_date": 1427274199, "answer_id": 29251355, "question_id": 29250177, "link": "https://stackoverflow.com/questions/29250177/en-masse-inline-editing-in-an-uncompressed-pdf/29251355#29251355", "title": "en masse inline editing in an uncompressed PDF", "body": "<p>You can follow the pdftk steps as described in\n<a href=\"https://stackoverflow.com/questions/9871585/how-to-find-and-replace-text-in-a-existing-pdf-file-with-pdftk-or-other-command\">How to find and replace text in a existing PDF file with PDFTK (or other command line application)</a></p>\n\n<p>You can first split the PDF into smaller documents with a few pages each, replace the text and again merge them together - all using pdftk.</p>\n\n<p>There is also the PDFEdit software (<a href=\"http://pdfedit.cz/en/index.html\" rel=\"nofollow noreferrer\">http://pdfedit.cz/en/index.html</a>). It is a GUI app with a scripting interface. You can process individual pages and then do a find replace using scripting commands. See if it loads your PDF. </p>\n"}, {"comments": [{"owner": {"reputation": 1651, "user_id": 1548052, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/8b9a9309ea3ed901b3118852bfe57cbc?s=128&d=identicon&r=PG", "display_name": "Denis Rouzaud", "link": "https://stackoverflow.com/users/1548052/denis-rouzaud"}, "edited": false, "score": 0, "creation_date": 1427284400, "post_id": 29253697, "comment_id": 46712694, "body": "well, not exactly the same. In 2, I have to run 1000 times the sed command. With 3, I read only once the file, and if I find a pattern to replace, I replace it. This is why 2 takes 6-7 hours while 3 need &lt; 1min."}, {"owner": {"reputation": 1651, "user_id": 1548052, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/8b9a9309ea3ed901b3118852bfe57cbc?s=128&d=identicon&r=PG", "display_name": "Denis Rouzaud", "link": "https://stackoverflow.com/users/1548052/denis-rouzaud"}, "edited": false, "score": 0, "creation_date": 1427284483, "post_id": 29253697, "comment_id": 46712753, "body": "in 3, the thing is that I read the file as ASCII and write the content in a new file as ASCII, so I believe there is a problem with some binary stream left when uncompressing the file."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1427284590, "post_id": 29253697, "comment_id": 46712831, "body": "<i>\u201cBut remember, PDF format is not intended for modification\u201d</i> What do you mean? Adobe Acrobat does exactly that."}, {"owner": {"reputation": 25491, "user_id": 49197, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/15ebf24a33a29b9efbf9924f530dd736?s=128&d=identicon&r=PG", "display_name": "Hynek -Pichi- Vychodil", "link": "https://stackoverflow.com/users/49197/hynek-pichi-vychodil"}, "reply_to_user": {"reputation": 1651, "user_id": 1548052, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/8b9a9309ea3ed901b3118852bfe57cbc?s=128&d=identicon&r=PG", "display_name": "Denis Rouzaud", "link": "https://stackoverflow.com/users/1548052/denis-rouzaud"}, "edited": false, "score": 0, "creation_date": 1427288098, "post_id": 29253697, "comment_id": 46715174, "body": "@DenisRouzaud You can run sed only once as well. You can pass more <code>-e</code> parameters or write multiple of them in one separated by <code>;</code>."}, {"owner": {"reputation": 25491, "user_id": 49197, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/15ebf24a33a29b9efbf9924f530dd736?s=128&d=identicon&r=PG", "display_name": "Hynek -Pichi- Vychodil", "link": "https://stackoverflow.com/users/49197/hynek-pichi-vychodil"}, "reply_to_user": {"reputation": 1651, "user_id": 1548052, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/8b9a9309ea3ed901b3118852bfe57cbc?s=128&d=identicon&r=PG", "display_name": "Denis Rouzaud", "link": "https://stackoverflow.com/users/1548052/denis-rouzaud"}, "edited": false, "score": 0, "creation_date": 1427288842, "post_id": 29253697, "comment_id": 46715723, "body": "@DenisRouzaud What you mean by ASCII file? What do you think it means? ASCII is way how to encode characters in binary. They are EBCDIC computers out there, mostly in museums. Are you working in Windows? You may be should use <code>-C0</code> switch or use <code>binmode()</code> or <code>:raw</code> io layer. Perl doesn&#39;t treat ASCII differently by default."}, {"owner": {"reputation": 25491, "user_id": 49197, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/15ebf24a33a29b9efbf9924f530dd736?s=128&d=identicon&r=PG", "display_name": "Hynek -Pichi- Vychodil", "link": "https://stackoverflow.com/users/49197/hynek-pichi-vychodil"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1427289079, "post_id": 29253697, "comment_id": 46715875, "body": "@Borodin: PDF contains information how content should <i>exactly</i> appear at output device. It means, If you change text in PDF it will not rearrange <i>magically</i> itself. Compare it with (La)TeX, HTML, ODT, RTF, ... Yep, Adobe Acrobat does exactly that. Sorry, ability to modify PDF is very limited. You can modify machine code of compiled program as well."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1427291776, "post_id": 29253697, "comment_id": 46717900, "body": "@Hynek-Pichi-Vychodil: Sure, PDF doesn&#39;t re-flow the text automatically, but that doesn&#39;t mean you can&#39;t edit it. The same applies to an image file, but no one would suggest that the JPEG format wasn&#39;t meant for editing."}, {"owner": {"reputation": 25491, "user_id": 49197, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/15ebf24a33a29b9efbf9924f530dd736?s=128&d=identicon&r=PG", "display_name": "Hynek -Pichi- Vychodil", "link": "https://stackoverflow.com/users/49197/hynek-pichi-vychodil"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1427292180, "post_id": 29253697, "comment_id": 46718201, "body": "@Borodin: No, JPEG is not meant for editing because it has already lost image information and each step will make more and more JPEG compression artefacts. But the point is, that doesn&#39;t means when you <i>can</i> do it, it was <i>intended</i> to. You <i>can</i> edit it but it was not <i>intended</i> you <b>should</b> do it. You can edit each binary file."}, {"owner": {"reputation": 25491, "user_id": 49197, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/15ebf24a33a29b9efbf9924f530dd736?s=128&d=identicon&r=PG", "display_name": "Hynek -Pichi- Vychodil", "link": "https://stackoverflow.com/users/49197/hynek-pichi-vychodil"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1427294501, "post_id": 29253697, "comment_id": 46719865, "body": "@Borodin: From Camelot project (PDF origin): <i>Our vision for Camelot is to provide a collection of utilities, applications, and system software so that a corporation can effectively capture documents from any application, send electronic versions of these documents anywhere, and view and print these documents on any machines.</i> See, there is not any modification mentioned."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1427295047, "post_id": 29253697, "comment_id": 46720295, "body": "@Hynek-Pichi-Vychodil: I&#39;m not convinced. Sorry."}, {"owner": {"reputation": 25491, "user_id": 49197, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/15ebf24a33a29b9efbf9924f530dd736?s=128&d=identicon&r=PG", "display_name": "Hynek -Pichi- Vychodil", "link": "https://stackoverflow.com/users/49197/hynek-pichi-vychodil"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1427295318, "post_id": 29253697, "comment_id": 46720464, "body": "@Borodin: It&#39;s not about convincing you. This is just simple fact. PDF is was not designed and created with the intent of a modification of existing file in mind. You can disagree with it, you can protest against it but it is all what you can do about it. It&#39;s fact."}, {"owner": {"reputation": 1651, "user_id": 1548052, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/8b9a9309ea3ed901b3118852bfe57cbc?s=128&d=identicon&r=PG", "display_name": "Denis Rouzaud", "link": "https://stackoverflow.com/users/1548052/denis-rouzaud"}, "edited": false, "score": 0, "creation_date": 1427295380, "post_id": 29253697, "comment_id": 46720507, "body": "I am on linux. Here is the code <a href=\"https://github.com/qgep/QGEP/blob/master/datamodel/diagram/translate_diagram.pl\" rel=\"nofollow noreferrer\">github.com/qgep/QGEP/blob/master/datamodel/diagram/&hellip;</a> I added the binmode but did not tested it yet."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1427295609, "post_id": 29253697, "comment_id": 46720664, "body": "@Hynek-Pichi-Vychodil: Then put it like this: I believe you are wrong."}, {"owner": {"reputation": 8537, "user_id": 14783, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/7f7ebc731345d37a667c3242cf928703?s=128&d=identicon&r=PG", "display_name": "Chris Dolan", "link": "https://stackoverflow.com/users/14783/chris-dolan"}, "edited": false, "score": 0, "creation_date": 1438371130, "post_id": 29253697, "comment_id": 51441281, "body": "@Hynek-Pichi-Vychodil: thanks for the CAM::PDF plug. I&#39;m the author of that module."}], "tags": [], "owner": {"reputation": 25491, "user_id": 49197, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/15ebf24a33a29b9efbf9924f530dd736?s=128&d=identicon&r=PG", "display_name": "Hynek -Pichi- Vychodil", "link": "https://stackoverflow.com/users/49197/hynek-pichi-vychodil"}, "is_accepted": true, "score": 3, "last_activity_date": 1427282107, "last_edit_date": 1495535196, "creation_date": 1427280981, "answer_id": 29253697, "question_id": 29250177, "link": "https://stackoverflow.com/questions/29250177/en-masse-inline-editing-in-an-uncompressed-pdf/29253697#29253697", "title": "en masse inline editing in an uncompressed PDF", "body": "<p>There is no difference between 2. and 3. Sed reads the input file line by line and writes changed lines into the output file. If you fed <code>-i</code> switch to it, <code>sed</code> just opens the input file and then unlinks (it's what <code>rm</code> do) then opens the output file with the same name and writes into. That's it. No magic involved. So if you damaged content by Perl, but not by <code>sed</code> you do something different than by <code>sed</code>. The main difference is, you can make Perl script way faster for replacing many strings. See <a href=\"https://stackoverflow.com/questions/29071270/using-sed-on-text-files-with-a-csv/29075406#29075406\">Using sed on text files with a csv</a></p>\n\n<p>The main trick is you can compile regexp for search nad replace which works in linear time.</p>\n\n<pre><code>my %replace = ( foo =&gt; 'bar' );\nmy $re = join '|', map quotemeta, keys %replace;\n$re = qr/($re)/;\n\nwhile (&lt;&gt;) {\n    s/$re/$replace{$1}/g;\n}\n</code></pre>\n\n<p>You can use it with your original approach, but I would recommend to make it in Perl script which allows you to keep the regexp and replace hash between pdf files. You can also try it to combine with <a href=\"https://metacpan.org/pod/CAM::PDF\" rel=\"nofollow noreferrer\"><code>CAM::PDF</code></a>. There is the example script <a href=\"https://metacpan.org/source/CDOLAN/CAM-PDF-1.60/bin/changepagestring.pl\" rel=\"nofollow noreferrer\"><code>changepagestring.pl</code></a> in it. You can also look at <a href=\"https://metacpan.org/pod/PDF::API2\" rel=\"nofollow noreferrer\"><code>PDF::API2</code></a> which would require more work but may provide better result. But remember, PDF format is not intended for modification.</p>\n"}], "owner": {"reputation": 1651, "user_id": 1548052, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/8b9a9309ea3ed901b3118852bfe57cbc?s=128&d=identicon&r=PG", "display_name": "Denis Rouzaud", "link": "https://stackoverflow.com/users/1548052/denis-rouzaud"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 224, "favorite_count": 0, "accepted_answer_id": 29253697, "answer_count": 2, "score": 3, "last_activity_date": 1427386211, "creation_date": 1427270171, "last_edit_date": 1427386211, "question_id": 29250177, "link": "https://stackoverflow.com/questions/29250177/en-masse-inline-editing-in-an-uncompressed-pdf", "title": "en masse inline editing in an uncompressed PDF", "body": "<p>I have a large PDF (~20mb, 160 mb. uncompressed).\nI need to do a find and replace in the text in it, about 1000 times.\nHere is what I tried.</p>\n\n<ol>\n<li><p><strong>Via SVG</strong></p>\n\n<ul>\n<li>Tranform to SVG (inkscape)</li>\n<li>Read SVG line by line and do the replace in the file</li>\n<li>Transform back to PDF</li>\n</ul></li>\n</ol>\n\n<blockquote>\n  <p>=> bad output, probably due to some geometric transform matrix in the SVG, the text is not well rendered</p>\n</blockquote>\n\n<ol start=\"2\">\n<li><p><strong>Creating ~1000 sed command</strong></p>\n\n<ul>\n<li>Uncompress PDF</li>\n<li>Perform each replace with a sed command</li>\n<li>Recompress PDF </li>\n</ul></li>\n</ol>\n\n<blockquote>\n  <p>=> way too long. each sed command takes about 20 sec, leading to several hours of process</p>\n</blockquote>\n\n<ol start=\"3\">\n<li><p><strong>Read line-by-line and replace</strong></p>\n\n<ul>\n<li>Uncompress PDF</li>\n<li>Read line by line the PDF\n<ul>\n<li>find text to be replaced </li>\n<li>replace using perl</li>\n<li>write line to a new file</li>\n</ul></li>\n<li>Compress the new file</li>\n</ul></li>\n</ol>\n\n<blockquote>\n  <p>=> due to left data-stream in the uncompressed PDF, the new file is apparently damaged (writing binary as lines of text)</p>\n</blockquote>\n\n<p>I wonder if it would be possible to read line-by-line the uncompressed PDF, but do the editing directly in it. How could I do this?</p>\n\n<p>I have searched for perl inline editing, but it performs the changes in the whole file at once, while I'd like to edit a single line.</p>\n\n<p>Other ideas are more than welcome ;)</p>\n\n<p><strong>Following advise, I used CAM::PDF, this was the most efficient and simple solution</strong></p>\n"}, {"tags": ["json", "perl"], "comments": [{"owner": {"reputation": 125, "user_id": 4658360, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/15db3cf407a8031ad1d357672abff405?s=128&d=identicon&r=PG&f=1", "display_name": "Flo Win", "link": "https://stackoverflow.com/users/4658360/flo-win"}, "edited": false, "score": 0, "creation_date": 1427268946, "post_id": 29249827, "comment_id": 46704016, "body": "can you post the dumper output, maybe we find a workaround."}], "answers": [{"comments": [{"owner": {"reputation": 692, "user_id": 2208750, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/764b5270808cc2b041cecf9bc296a3f1?s=128&d=identicon&r=PG", "display_name": "Mehdi", "link": "https://stackoverflow.com/users/2208750/mehdi"}, "edited": false, "score": 1, "creation_date": 1427305521, "post_id": 29249984, "comment_id": 46727546, "body": "thanks it works, I&#39;ve never used perl and trying to take over some code that was written by another developer. All the @$% signs in perl are new to me. I&#39;m guessing @$ dereferences a pointer to an array?"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 692, "user_id": 2208750, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/764b5270808cc2b041cecf9bc296a3f1?s=128&d=identicon&r=PG", "display_name": "Mehdi", "link": "https://stackoverflow.com/users/2208750/mehdi"}, "edited": false, "score": 0, "creation_date": 1427312930, "post_id": 29249984, "comment_id": 46732144, "body": "@MehdiAbderezai: Perl was designed by a linguist so each identifier has a singular form <code>$scalar</code> (read <i>this scalar</i>), an unrelated plural form <code>@array</code> (read <i>these array items</i>) and a dictionary form <code>%hash</code>. It&#39;s built-in <a href=\"http://en.wikipedia.org/wiki/Hungarian_notation\" rel=\"nofollow noreferrer\">Hungarian notation</a>. So to acccess one element (singular) of an array (plural) you write <code>$array[0]</code> etc. And yes, <code>@$</code> dereferences an array reference, but it&#39;s best to read <code>@$objects</code> as <i>the items in <code>$object</code></i>, just as <code>@array</code> is <i>the items in <code>array</code></i>"}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": true, "score": 3, "last_activity_date": 1427269397, "creation_date": 1427269397, "answer_id": 29249984, "question_id": 29249827, "link": "https://stackoverflow.com/questions/29249827/perl-json-array/29249984#29249984", "title": "Perl Json Array", "body": "<p>It sounds like your file contains a single JSON array. In that case your call to <code>decode</code> will return a reference to a Perl array, so if you write</p>\n\n<pre><code>my $objects = JSON-&gt;new-&gt;utf8-&gt;decode($json_text)\n</code></pre>\n\n<p>you can access each object as <code>$objects-&gt;[0]</code>, <code>$objects-&gt;[1]</code> etc. Or you can iterate over them with</p>\n\n<pre><code>for my $object ( @$objects ) {\n\n    # Do stuff with $object\n}\n</code></pre>\n"}], "owner": {"reputation": 692, "user_id": 2208750, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/764b5270808cc2b041cecf9bc296a3f1?s=128&d=identicon&r=PG", "display_name": "Mehdi", "link": "https://stackoverflow.com/users/2208750/mehdi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 844, "favorite_count": 0, "accepted_answer_id": 29249984, "answer_count": 1, "score": 1, "last_activity_date": 1427269397, "creation_date": 1427268655, "question_id": 29249827, "link": "https://stackoverflow.com/questions/29249827/perl-json-array", "title": "Perl Json Array", "body": "<p>I have an array of json objects in json format and in a file.\nI'm trying to load the file into perl, cycle through each item of the array (each json object) ...</p>\n\n<p>I've used the code bellow, but it seams that no matter what I do, perl is treating it not as an array of objects, rather as a big object. Any help would be greatly appreciated. </p>\n\n<pre><code>my $json_text = do {\n   open(my $json_fh, \"&lt;:encoding(UTF-8)\", $filename)\n      or die(\"Can't open \\$filename\\\": $!\\n\");\n   local $/;\n   &lt;$json_fh&gt;\n};\n\n@objects = JSON-&gt;new-&gt;utf8-&gt;decode($json_text);\nprint  Dumper(@objects);\n</code></pre>\n"}, {"tags": ["perl", "utf-8", "character-encoding"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1427270012, "post_id": 29249570, "comment_id": 46704441, "body": "Your program is printing UTF-8 encoded output. <code>&#195;</code> and <code>&#169;</code> are at codepoints C3 and A9, and C3 A9 is the UTF-8 encoding for E9, which is <code>&#233;</code>. You need to set the output encoding according to what your output device expects. Are you printing to a file, or to the terminal? What encoding do programs normally use for output? It would also help to know what computer system you&#39;re using."}, {"owner": {"reputation": 31, "user_id": 1414958, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/78aaaa36194f7e4f0a19381ff235cbbb?s=128&d=identicon&r=PG", "display_name": "Sownder", "link": "https://stackoverflow.com/users/1414958/sownder"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1427270361, "post_id": 29249570, "comment_id": 46704615, "body": "Am printing in text file with UTF-8 format."}], "answers": [{"comments": [{"owner": {"reputation": 31, "user_id": 1414958, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/78aaaa36194f7e4f0a19381ff235cbbb?s=128&d=identicon&r=PG", "display_name": "Sownder", "link": "https://stackoverflow.com/users/1414958/sownder"}, "edited": false, "score": 0, "creation_date": 1427396753, "post_id": 29250663, "comment_id": 46770964, "body": "I need you help for this.  I have values like this:  &quot;R&#233;mun&#233;ration De 9.61 &#224; 10.45 \u20ac Secteur Contrat Int&#195;&#169;rim Niveau d&#39;&#39;&#195;&#169;tudes BAC+2/3 Exp&#195;&#169;rience requise 3 ann&#195;&#169;es Votre agence NANCY Le Carr&#195;&#169; Rive Gauche -  entr&#195;&#169;e 3&quot;  I need to insert the recored into mysql table like this; My table column is in utf8_general_ci and default character set is UTF-8 please help me from this. &quot;R&#233;mun&#233;ration De 9.61 &#224; 10.45 \u20ac Secteur Contrat Int&#233;rim Niveau d&#39;&#39;&#233;tudes BAC+2/3 Exp&#233;rience requise 3 ann&#233;es Votre agence NANCY Le Carr&#233; Rive Gauche -  entr&#233;e 3&quot;"}, {"owner": {"reputation": 44559, "user_id": 411022, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9905bf9a7b8d5a587c1bdff07ef2e801?s=128&d=identicon&r=PG", "display_name": "Ilmari Karonen", "link": "https://stackoverflow.com/users/411022/ilmari-karonen"}, "reply_to_user": {"reputation": 31, "user_id": 1414958, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/78aaaa36194f7e4f0a19381ff235cbbb?s=128&d=identicon&r=PG", "display_name": "Sownder", "link": "https://stackoverflow.com/users/1414958/sownder"}, "edited": false, "score": 0, "creation_date": 1427397506, "post_id": 29250663, "comment_id": 46771347, "body": "You might want to ask that as a separate question."}, {"owner": {"reputation": 31, "user_id": 1414958, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/78aaaa36194f7e4f0a19381ff235cbbb?s=128&d=identicon&r=PG", "display_name": "Sownder", "link": "https://stackoverflow.com/users/1414958/sownder"}, "edited": false, "score": 0, "creation_date": 1427397945, "post_id": 29250663, "comment_id": 46771595, "body": "Sure I posted it as separate question"}], "tags": [], "owner": {"reputation": 44559, "user_id": 411022, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9905bf9a7b8d5a587c1bdff07ef2e801?s=128&d=identicon&r=PG", "display_name": "Ilmari Karonen", "link": "https://stackoverflow.com/users/411022/ilmari-karonen"}, "is_accepted": true, "score": 8, "last_activity_date": 1427271918, "creation_date": 1427271918, "answer_id": 29250663, "question_id": 29249570, "link": "https://stackoverflow.com/questions/29249570/why-does-decoding-euro-to-%e2%82%ac-also-turn-%c3%a9-into-%c3%83-in-output/29250663#29250663", "title": "Why does decoding &quot;&amp;euro;&quot; to &quot;\u20ac&quot; also turn &quot;&#233;&quot; into &quot;&#195;&#169;&quot; in output?", "body": "<p>If you run this version of your code (with the typo in <code>decode_entities</code> fixed, <a href=\"http://perldoc.perl.org/strict.html\">strict</a> mode and <a href=\"http://perldoc.perl.org/warnings.html\">warnings</a> enabled, and an extra <code>print</code> added) at a terminal:</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>use strict;\nuse warnings;    \nuse HTML::Entities;\nmy $string='R\u00e9mun\u00e9ration   &amp;euro;';\nprint \"$string\\n\";\n$string=decode_entities($string);\nprint \"$string\\n\";\n</code></pre>\n\n<p>you should see the following output:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>R\u00e9mun\u00e9ration   &amp;euro;\nWide character in print at test.pl line 7.\nR\u00c3\u00a9mun\u00c3\u00a9ration   \u20ac\n</code></pre>\n\n<p>What happens is the following chain of events:</p>\n\n<ol>\n<li><p>Your code is written in UTF-8, but don't have <a href=\"http://perldoc.perl.org/utf8.html\"><code>use utf8;</code></a> in it, so Perl is parsing your source code (and, in particular, any string literals in it) byte by byte.  Thus, the string literal <code>'\u00e9'</code> is parsed as a <em>two-character</em> string, because the UTF-8 encoding of <code>\u00e9</code> takes up two bytes.</p></li>\n<li><p>Normally, this doesn't matter (much), because your <code>STDOUT</code> is also not in UTF-8 mode, and so it just takes any byte string you give it and spits it out byte by byte, and your terminal then interprets the resulting output as UTF-8 (or tries to).</p>\n\n<p>So, when you do <code>print '\u00e9';</code> Perl thinks you're printing a two-character string in byte mode, and writes out two bytes, which just happen to make up the UTF-8 encoding of the single character <code>\u00e9</code>.</p></li>\n<li><p>However, when you run your string through <code>decode_entities()</code>, it decodes the <code>&amp;euro;</code> into an actual Unicode <code>\u20ac</code> character, which does not fit inside a single byte.</p></li>\n<li><p>When you try to print the resulting string, Perl notices the \"wide\" <code>\u20ac</code> character.  It can't print it as a single byte, so instead, it falls back to encoding <em>the whole string</em> as UTF-8 (and emitting a warning, if you have those enabled, as you should).  But that causes the <code>\u00e9</code>s (which were already encoded, since Perl never decoded them while parsing your code) to get double-UTF8-encoded, producing the <a href=\"//en.wikipedia.org/wiki/Mojibake\">mojibake</a> output you see.</p></li>\n</ol>\n\n<p>A simple fix is to add <code>use utf8;</code> to your code, and also <a href=\"http://perldoc.perl.org/open.html\">set all your filehandles</a> (including <code>STDIN</code> / <code>STDOUT</code> / <code>STDERR</code>) to UTF-8 mode by default, e.g. like this:</p>\n\n<pre><code>use utf8;\nuse open qw(:std :utf8);\n</code></pre>\n\n<p>With those lines prepended to the test script above, the output you get should be:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>R\u00e9mun\u00e9ration   &amp;euro;\nR\u00e9mun\u00e9ration   \u20ac\n</code></pre>\n"}], "owner": {"reputation": 31, "user_id": 1414958, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/78aaaa36194f7e4f0a19381ff235cbbb?s=128&d=identicon&r=PG", "display_name": "Sownder", "link": "https://stackoverflow.com/users/1414958/sownder"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 331, "favorite_count": 0, "accepted_answer_id": 29250663, "answer_count": 1, "score": 1, "last_activity_date": 1427272253, "creation_date": 1427267589, "last_edit_date": 1427272253, "question_id": 29249570, "link": "https://stackoverflow.com/questions/29249570/why-does-decoding-euro-to-%e2%82%ac-also-turn-%c3%a9-into-%c3%83-in-output", "title": "Why does decoding &quot;&amp;euro;&quot; to &quot;\u20ac&quot; also turn &quot;&#233;&quot; into &quot;&#195;&#169;&quot; in output?", "body": "<p>I'm new to Perl scripting, and I'm facing some issues in decoding a string:</p>\n\n<pre><code>use HTML::Entities;\nmy $string='R\u00e9mun\u00e9ration   &amp;euro;';\n$string=decode_entitie($string);\nprint \"$string\";\n</code></pre>\n\n<p>The output I get looks like <code>R\u00c3\u00a9mun\u00c3\u00a9ration \u20ac</code>, when it should look like <code>R\u00e9mun\u00e9ration \u20ac</code>.</p>\n\n<p>Can anyone please help me with this?</p>\n"}, {"tags": ["perl", "command"], "comments": [{"owner": {"reputation": 137100, "user_id": 874188, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/ZcY77.png?s=128&g=1", "display_name": "tripleee", "link": "https://stackoverflow.com/users/874188/tripleee"}, "edited": false, "score": 0, "creation_date": 1427263447, "post_id": 29248202, "comment_id": 46701616, "body": "You mean like <code>system(&quot;ls&quot;);</code>?"}, {"owner": {"reputation": 51, "user_id": 2431939, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/4eb0e3ec89cc3a87b0054bdcb77f9987?s=128&d=identicon&r=PG", "display_name": "Aditya Acharya", "link": "https://stackoverflow.com/users/2431939/aditya-acharya"}, "reply_to_user": {"reputation": 137100, "user_id": 874188, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/ZcY77.png?s=128&g=1", "display_name": "tripleee", "link": "https://stackoverflow.com/users/874188/tripleee"}, "edited": false, "score": 0, "creation_date": 1427264855, "post_id": 29248202, "comment_id": 46702136, "body": "i wish to convert xlsx file to csv format using xls2csv command, but i want to execute this command inside my perl script . can  you help me to fix this out !????"}, {"owner": {"reputation": 137100, "user_id": 874188, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/ZcY77.png?s=128&g=1", "display_name": "tripleee", "link": "https://stackoverflow.com/users/874188/tripleee"}, "edited": false, "score": 0, "creation_date": 1427265918, "post_id": 29248202, "comment_id": 46702597, "body": "Any basic tutorial will show how to <code>open(H, &quot;xls2csv $file |&quot;)</code> but you may be better off with a <a href=\"http://perltricks.com/article/108/2014/8/5/Parse-Excel-with-ease-using-Perl\" rel=\"nofollow noreferrer\">native Perl library</a>.  Anyway, please update your question to explain what you actually want, what you already tried, and how it failed."}], "answers": [{"tags": [], "owner": {"reputation": 4514, "user_id": 4248931, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HijcJ.png?s=128&g=1", "display_name": "serenesat", "link": "https://stackoverflow.com/users/4248931/serenesat"}, "is_accepted": true, "score": 1, "last_activity_date": 1427266606, "last_edit_date": 1495541603, "creation_date": 1427266606, "answer_id": 29249303, "question_id": 29248202, "link": "https://stackoverflow.com/questions/29248202/is-it-possible-to-include-oneline-command-of-ubuntu-in-our-own-perl-script/29249303#29249303", "title": "Is it possible to include oneline command of ubuntu in our own perl script", "body": "<p>To execute a <code>shell</code> command in perl script use <code>system</code> like this :</p>\n\n<pre><code>system(\"xls2csv\");\n</code></pre>\n\n<p>To store the output of the command, use <code>backticks</code> :</p>\n\n<pre><code>my $output = `xls2csv`;\n</code></pre>\n\n<p>See the difference between <code>system</code> and <code>backticks</code> here</p>\n\n<p><a href=\"https://stackoverflow.com/questions/799968/whats-the-difference-between-perls-backticks-system-and-exec\">Difference between system, backtics and exec</a></p>\n\n<p><a href=\"https://stackoverflow.com/questions/797127/whats-the-differences-between-system-and-backticks-and-pipes-in-perl\">Differences between system, backticks and pipes in Perl</a></p>\n"}], "owner": {"reputation": 51, "user_id": 2431939, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/4eb0e3ec89cc3a87b0054bdcb77f9987?s=128&d=identicon&r=PG", "display_name": "Aditya Acharya", "link": "https://stackoverflow.com/users/2431939/aditya-acharya"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 38, "favorite_count": 0, "accepted_answer_id": 29249303, "answer_count": 1, "score": 0, "last_activity_date": 1427267126, "creation_date": 1427261793, "last_edit_date": 1427267126, "question_id": 29248202, "link": "https://stackoverflow.com/questions/29248202/is-it-possible-to-include-oneline-command-of-ubuntu-in-our-own-perl-script", "title": "Is it possible to include oneline command of ubuntu in our own perl script", "body": "<p>Is it possible to include one line commands of ubuntu to perl script, which has able to execute inside the script and it should give output as desired. is it possible to do so?</p>\n\n<p>I wish to convert <code>xlsx</code> file to <code>csv</code> format using <code>xls2csv</code> <em>command</em>, but I want to execute this command inside my perl script . </p>\n\n<p>Can anyone help me to fix this out ?</p>\n"}, {"tags": ["perl", "input", "readfile"], "answers": [{"comments": [{"owner": {"reputation": 2548, "user_id": 1745291, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a1cb774f2559ce8b8a6f4a5d2e33c4f6?s=128&d=identicon&r=PG", "display_name": "hl037_", "link": "https://stackoverflow.com/users/1745291/hl037"}, "edited": false, "score": 0, "creation_date": 1427244164, "post_id": 29245574, "comment_id": 46696692, "body": "I know, my question is why the first doesn&#39;t output anything ?"}, {"owner": {"reputation": 2548, "user_id": 1745291, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a1cb774f2559ce8b8a6f4a5d2e33c4f6?s=128&d=identicon&r=PG", "display_name": "hl037_", "link": "https://stackoverflow.com/users/1745291/hl037"}, "edited": false, "score": 0, "creation_date": 1427244651, "post_id": 29245574, "comment_id": 46696830, "body": "ok, thx :) for the curiosity, is there a way of doing <code>$_ = &lt;&gt;; print;</code> without doing the assignment manually ?"}, {"owner": {"reputation": 61610, "user_id": 725418, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/82ac2dc3e1ad4b7187f245c416528df9?s=128&d=identicon&r=PG", "display_name": "TLP", "link": "https://stackoverflow.com/users/725418/tlp"}, "reply_to_user": {"reputation": 2548, "user_id": 1745291, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a1cb774f2559ce8b8a6f4a5d2e33c4f6?s=128&d=identicon&r=PG", "display_name": "hl037_", "link": "https://stackoverflow.com/users/1745291/hl037"}, "edited": false, "score": 2, "creation_date": 1427244859, "post_id": 29245574, "comment_id": 46696898, "body": "@hl037_ Well... <code>print &lt;&gt;</code> will print all lines. You can also do a postfix loop: <code>print for &lt;&gt;</code>. If you want to just print one line, <code>print scalar &lt;&gt;</code> (or any other method for putting the file handle in scalar context, e.g. <code>print &quot;&quot; . &lt;&gt;</code>). TIMTOWTDI is the Perl way."}, {"owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 2, "creation_date": 1427258145, "post_id": 29245574, "comment_id": 46700077, "body": "&lt;pedantic&gt;<code>while(&lt;&gt;)</code> is shorthand for <code>while(defined($_=&lt;&gt;))</code>&lt;/pedantic&gt;"}, {"owner": {"reputation": 61610, "user_id": 725418, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/82ac2dc3e1ad4b7187f245c416528df9?s=128&d=identicon&r=PG", "display_name": "TLP", "link": "https://stackoverflow.com/users/725418/tlp"}, "reply_to_user": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 0, "creation_date": 1427291679, "post_id": 29245574, "comment_id": 46717823, "body": "@mob Yes, in the original answer I had included that part, but I removed it, since I felt it would distract from the main point."}], "tags": [], "owner": {"reputation": 61610, "user_id": 725418, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/82ac2dc3e1ad4b7187f245c416528df9?s=128&d=identicon&r=PG", "display_name": "TLP", "link": "https://stackoverflow.com/users/725418/tlp"}, "is_accepted": true, "score": 6, "last_activity_date": 1427244607, "last_edit_date": 1427244607, "creation_date": 1427244084, "answer_id": 29245574, "question_id": 29245445, "link": "https://stackoverflow.com/questions/29245445/perl-how-to-read-from-stdin-outside-a-loop/29245574#29245574", "title": "Perl, how to read from stdin outside a loop?", "body": "<p>Because </p>\n\n<pre><code>while(&lt;&gt;) \n</code></pre>\n\n<p>Is shorthand for</p>\n\n<pre><code>while($_ = &lt;&gt;) \n</code></pre>\n\n<p>Which means the line is assigned to the default variable <code>$_</code>. Which is also used by <code>print</code>.</p>\n\n<p>What you wrote:</p>\n\n<pre><code>&lt;&gt;;\n</code></pre>\n\n<p>Does not assign anything to <code>$_</code>. It is just a readline in void context, which means the value is discarded and not stored anywhere. Hence <code>$_</code> is empty. If you <code>use warnings</code>, Perl will tell you what is going on.</p>\n\n<pre><code>Use of uninitialized value $_ in print\n</code></pre>\n\n<p>If you do the assignment manually it will work:</p>\n\n<pre><code>$_ = &lt;&gt;;\n</code></pre>\n\n<p>Note also that you do not have to redirect the file content, you can just supply the file name as an argument:</p>\n\n<pre><code>perl foo.pl in\n</code></pre>\n"}], "owner": {"reputation": 2548, "user_id": 1745291, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a1cb774f2559ce8b8a6f4a5d2e33c4f6?s=128&d=identicon&r=PG", "display_name": "hl037_", "link": "https://stackoverflow.com/users/1745291/hl037"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 202, "favorite_count": 0, "accepted_answer_id": 29245574, "answer_count": 1, "score": 2, "last_activity_date": 1427279015, "creation_date": 1427243304, "last_edit_date": 1427279015, "question_id": 29245445, "link": "https://stackoverflow.com/questions/29245445/perl-how-to-read-from-stdin-outside-a-loop", "title": "Perl, how to read from stdin outside a loop?", "body": "<p>There is something I don't understand :</p>\n\n<p>say <code>in</code> is a file containing : </p>\n\n<pre><code>1\n2\n3\n</code></pre>\n\n<p>and <code>foo.pl</code> :</p>\n\n<pre><code>use strict;\n&lt;&gt;;\nprint;\n&lt;&gt;;\nprint;\n&lt;&gt;;\nprint;\n</code></pre>\n\n<p>and then run :</p>\n\n<pre><code>perl foo.pl &lt; in\n</code></pre>\n\n<p><strong>Why this programm doesn't output anything ?</strong></p>\n\n<p>...While this one :</p>\n\n<pre><code>use strinct;\nwhile(&lt;&gt;) {\n    print;\n}\n</code></pre>\n\n<p>output the whole file</p>\n"}, {"tags": ["python", "perl", "multiprocessing"], "comments": [{"owner": {"reputation": 4705, "user_id": 658663, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/0c9bdae669cc7fb5c01a3277344f589f?s=128&d=identicon&r=PG", "display_name": "beresfordt", "link": "https://stackoverflow.com/users/658663/beresfordt"}, "edited": false, "score": 0, "creation_date": 1427240381, "post_id": 29244848, "comment_id": 46695553, "body": "Have a look at <a href=\"https://metacpan.org/pod/Thread::Pool\" rel=\"nofollow noreferrer\">Thread::Pool</a>"}], "answers": [{"tags": [], "owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "is_accepted": true, "score": 5, "last_activity_date": 1427243549, "creation_date": 1427243549, "answer_id": 29245493, "question_id": 29244848, "link": "https://stackoverflow.com/questions/29244848/perl-equivalent-of-a-pool-of-workers-in-python/29245493#29245493", "title": "Perl equivalent of a pool of workers in Python", "body": "<pre><code>use Parallel::ForkManager;\n\nmy $pm = Parallel::ForkManager-&gt;new($MAX_PROCESSES);\n\nforeach my $item (@list) {\n    $pm-&gt;start and next;\n    my_function($item);\n    $pm-&gt;finish;\n}\n$pm-&gt;wait_all_children;\n</code></pre>\n"}], "owner": {"reputation": 613, "user_id": 4569096, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/6395ed53ff64900635bdd7c3d50bd256?s=128&d=identicon&r=PG&f=1", "display_name": "jksnw", "link": "https://stackoverflow.com/users/4569096/jksnw"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 328, "favorite_count": 1, "accepted_answer_id": 29245493, "answer_count": 1, "score": 2, "last_activity_date": 1427322610, "creation_date": 1427240008, "last_edit_date": 1427322610, "question_id": 29244848, "link": "https://stackoverflow.com/questions/29244848/perl-equivalent-of-a-pool-of-workers-in-python", "title": "Perl equivalent of a pool of workers in Python", "body": "<p>I have some Python code that does exactly what I want however I also have the need for something similar in Perl.</p>\n\n<p>Here is the Python code I have:</p>\n\n<pre><code>pool = multiprocessing.Pool()\nfor item in list:\n    pool.apply_async(myFunction, args=(item,))\npool.close()\npool.join()\n</code></pre>\n\n<p>This code runs each function in it's own process rather than a thread. The maximum amount of processes that run at the same time is equal to the number of logical cores.</p>\n"}, {"tags": ["regex", "xml", "perl", "notepad++"], "comments": [{"owner": {"reputation": 11399, "user_id": 74585, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/o1jYf.jpg?s=128&g=1", "display_name": "Matthew Lock", "link": "https://stackoverflow.com/users/74585/matthew-lock"}, "edited": false, "score": 0, "creation_date": 1587116791, "post_id": 29243989, "comment_id": 108387553, "body": "Make sure you do this first <a href=\"https://stackoverflow.com/a/35347020/74585\">stackoverflow.com/a/35347020/74585</a>"}], "answers": [{"tags": [], "owner": {"reputation": 481636, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "is_accepted": true, "score": 3, "last_activity_date": 1427236726, "creation_date": 1427236726, "answer_id": 29244206, "question_id": 29243989, "link": "https://stackoverflow.com/questions/29243989/configuring-notepad-function-list-for-perl/29244206#29244206", "title": "Configuring Notepad++ &quot;Function List&quot; for Perl", "body": "<p>Most probably, you should use <code>funcNameExpr</code> instead of <code>nameExpr</code>:</p>\n\n<p>Example:</p>\n\n<pre><code>&lt;functionName&gt;\n    &lt;funcNameExpr expr=\"(sub[\\s]+)?\\K[\\w]+\"/&gt;\n&lt;/functionName&gt;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 580, "user_id": 2146843, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/09e66341e72968f38138ad726a752fa1?s=128&d=identicon&r=PG", "display_name": "flyingfinger", "link": "https://stackoverflow.com/users/2146843/flyingfinger"}, "edited": false, "score": 0, "creation_date": 1533837232, "post_id": 32194056, "comment_id": 90505121, "body": "This solution worked for me on Notepad++ v7.5.7. Thank you!"}], "tags": [], "owner": {"reputation": 81, "user_id": 5211529, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/2884269021985fa19447e146ce629f08?s=128&d=identicon&r=PG", "display_name": "VinsWorldcom", "link": "https://stackoverflow.com/users/5211529/vinsworldcom"}, "is_accepted": false, "score": 5, "last_activity_date": 1440465072, "creation_date": 1440465072, "answer_id": 32194056, "question_id": 29243989, "link": "https://stackoverflow.com/questions/29243989/configuring-notepad-function-list-for-perl/32194056#32194056", "title": "Configuring Notepad++ &quot;Function List&quot; for Perl", "body": "<p>I tried your XML in Notepad++ 6.8.1 and while it does work for Perl with 'packages', my plain scripts without packages fail to produce subs now.  I uncommented the lines you commented out and it fixes that problem, but does exhibit the behavior you mentioned - doubled up subs within the 'packages'.</p>\n\n<p>I found the following works nicely and even ignores subs in POD (which may be there as example usage) so they aren't added to the list:</p>\n\n<pre><code>        &lt;parser id=\"perl_function\" displayName=\"Perl\" commentExpr=\"(#.*?$|(__END__.*\\Z))\"&gt;\n            &lt;classRange mainExpr=\"(?&amp;lt;=^package).*?(?=\\npackage|\\Z)\"&gt;\n                &lt;className&gt;\n                    &lt;nameExpr expr=\"\\s\\K[^;]+\"/&gt;\n                &lt;/className&gt;\n                &lt;function mainExpr=\"^[\\s]*(?&amp;lt;!#)[\\s]*sub[\\s]+[\\w]+[\\s]*\\(?[^\\)\\(]*?\\)?[\\n\\s]*\\{\"&gt;\n                    &lt;functionName&gt;\n                        &lt;funcNameExpr expr=\"(sub[\\s]+)?\\K[\\w]+\"/&gt;\n                    &lt;/functionName&gt;\n                &lt;/function&gt;\n            &lt;/classRange&gt;\n            &lt;function mainExpr=\"^[\\s]*(?&amp;lt;!#)[\\s]*sub[\\s]+[\\w]+[\\s]*\\(?[^\\)\\(]*?\\)?[\\n\\s]*\\{\"&gt;\n                &lt;functionName&gt;\n                    &lt;nameExpr expr=\"(?:sub[\\s]+)?\\K[\\w]+\"/&gt;\n                &lt;/functionName&gt;\n            &lt;/function&gt;\n        &lt;/parser&gt;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 109, "user_id": 4255834, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/31da357b5bc58c73b14b5580f6fd9d22?s=128&d=identicon&r=PG", "display_name": "uldics", "link": "https://stackoverflow.com/users/4255834/uldics"}, "is_accepted": false, "score": 0, "last_activity_date": 1537887585, "creation_date": 1537887585, "answer_id": 52501234, "question_id": 29243989, "link": "https://stackoverflow.com/questions/29243989/configuring-notepad-function-list-for-perl/52501234#52501234", "title": "Configuring Notepad++ &quot;Function List&quot; for Perl", "body": "<p>funcNameExpr or uncomment did not work for me. What worked - commenting out the three regex lines with parentheses:</p>\n\n<pre><code>#\\(\n#[^()]*\n#\\)\n</code></pre>\n\n<p>As Perl does not consider parentheses after function name correct, I do not have such. Parentheses can be at each call of the function, but not where the function is.</p>\n"}], "owner": {"reputation": 1228, "user_id": 4709524, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/wGrTV.jpg?s=128&g=1", "display_name": "beasy", "link": "https://stackoverflow.com/users/4709524/beasy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1676, "favorite_count": 1, "accepted_answer_id": 29244206, "answer_count": 3, "score": 7, "last_activity_date": 1579615775, "creation_date": 1427235707, "last_edit_date": 1427241388, "question_id": 29243989, "link": "https://stackoverflow.com/questions/29243989/configuring-notepad-function-list-for-perl", "title": "Configuring Notepad++ &quot;Function List&quot; for Perl", "body": "<p>I'm trying to get the \"Fucntion List\" feature on notepad++ (v 6.7.5) working for Perl with classes (or packages, in perl parlance). Only regular subroutines outside of packages are supported by default.</p>\n\n<p>Below is the XML snippet in question from the Function List config file (located on my windows machine at C:\\Users\\user\\AppData\\Roaming\\Notepad++\\functionList.xml ). I added the \"classRange\" node myself on top of the default \"function\" node.</p>\n\n<p>EDIT: below is the corrected XML, thanks to user stribizhev</p>\n\n<p>UPDATE: I've commented out the \"normal\" function section, because it was causing all my methods to appear twice in the function list.</p>\n\n<pre><code>&lt;parser id=\"perl_function\" displayName=\"Perl\"&gt;\n    &lt;classRange mainExpr=\"^package.*?(?=\\npackage|\\Z)\"&gt;\n        &lt;className&gt;\n            &lt;nameExpr expr=\"\\s\\K[^;]+\"/&gt;\n        &lt;/className&gt;\n        &lt;function mainExpr=\"^[\\s]*(?&amp;lt;!#)[\\s]*sub[\\s]+[\\w]+[\\s]*\\(?[^\\)\\(]*?\\)?[\\n\\s]*\\{\" displayMode=\"$className-&gt;$functionName\"&gt;\n            &lt;functionName&gt;\n                &lt;funcNameExpr expr=\"(sub[\\s]+)?\\K[\\w]+\"/&gt;\n            &lt;/functionName&gt;\n        &lt;/function&gt;\n    &lt;/classRange&gt;\n    &lt;!--\n    &lt;function mainExpr=\"^[\\s]*(?&amp;lt;!#)[\\s]*sub[\\s]+[\\w]+[\\s]*\\(?[^\\)\\(]*?\\)?[\\n\\s]*\\{\" displayMode=\"$className-&gt;$functionName\"&gt;\n        &lt;functionName&gt;\n            &lt;nameExpr expr=\"(sub[\\s]+)?\\K[\\w]+\"/&gt;\n        &lt;/functionName&gt;\n    &lt;/function&gt;\n    --&gt;\n&lt;/parser&gt;\n</code></pre>\n\n<p>The documentation for this is <a href=\"http://notepad-plus-plus.org/features/function-list.html\" rel=\"noreferrer\">here</a>. </p>\n"}, {"tags": ["xml", "perl", "filter", "merge", "libxml2"], "comments": [{"owner": {"reputation": 7570, "user_id": 17945, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/e8cbc0b9ed29b027a127d8df309af5a6?s=128&d=identicon&r=PG", "display_name": "reinierpost", "link": "https://stackoverflow.com/users/17945/reinierpost"}, "edited": false, "score": 1, "creation_date": 1427282184, "post_id": 29243501, "comment_id": 46711345, "body": "I&#39;d probably write an XSLT file that converts your filter file into an XSLT file that performs the filtering."}, {"owner": {"reputation": 737, "user_id": 1263343, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HYgqv.jpg?s=128&g=1", "display_name": "codenaugh", "link": "https://stackoverflow.com/users/1263343/codenaugh"}, "reply_to_user": {"reputation": 7570, "user_id": 17945, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/e8cbc0b9ed29b027a127d8df309af5a6?s=128&d=identicon&r=PG", "display_name": "reinierpost", "link": "https://stackoverflow.com/users/17945/reinierpost"}, "edited": false, "score": 0, "creation_date": 1427294285, "post_id": 29243501, "comment_id": 46719701, "body": "@reinierpost yes, I kind of wish I had gone that route, but was already heavy into LibXML and didn&#39;t want to start to learn something else. It seemed best to stick with what I was getting used to."}, {"owner": {"reputation": 737, "user_id": 1263343, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HYgqv.jpg?s=128&g=1", "display_name": "codenaugh", "link": "https://stackoverflow.com/users/1263343/codenaugh"}, "reply_to_user": {"reputation": 7570, "user_id": 17945, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/e8cbc0b9ed29b027a127d8df309af5a6?s=128&d=identicon&r=PG", "display_name": "reinierpost", "link": "https://stackoverflow.com/users/17945/reinierpost"}, "edited": false, "score": 0, "creation_date": 1427294490, "post_id": 29243501, "comment_id": 46719855, "body": "@reinierpost also, isn&#39;t that adding an extra step? Converting the filter.xml to XSLT and then performing the filter? I think the solution I came to may not be best for large log.xml files (haven&#39;t tried any yet), but I think I can speed it up with some more flags to break the loops when a node has been marked as kept for sure."}, {"owner": {"reputation": 7570, "user_id": 17945, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/e8cbc0b9ed29b027a127d8df309af5a6?s=128&d=identicon&r=PG", "display_name": "reinierpost", "link": "https://stackoverflow.com/users/17945/reinierpost"}, "edited": false, "score": 0, "creation_date": 1427986934, "post_id": 29243501, "comment_id": 47004520, "body": "The advantage is that it is all in XSLT, which is (even) more portable than a Perl solution, and it was also designed to be fast, but I have never personally put that to a test."}, {"owner": {"reputation": 7570, "user_id": 17945, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/e8cbc0b9ed29b027a127d8df309af5a6?s=128&d=identicon&r=PG", "display_name": "reinierpost", "link": "https://stackoverflow.com/users/17945/reinierpost"}, "edited": false, "score": 0, "creation_date": 1427987026, "post_id": 29243501, "comment_id": 47004575, "body": "When using Perl I&#39;d use the solution you&#39;ve chosen (XML::LibXML)."}], "answers": [{"tags": [], "owner": {"reputation": 737, "user_id": 1263343, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HYgqv.jpg?s=128&g=1", "display_name": "codenaugh", "link": "https://stackoverflow.com/users/1263343/codenaugh"}, "is_accepted": true, "score": 1, "last_activity_date": 1427242053, "creation_date": 1427242053, "answer_id": 29245241, "question_id": 29243501, "link": "https://stackoverflow.com/questions/29243501/parsing-xml-file-more-than-once-and-merging-the-results-together/29245241#29245241", "title": "Parsing XML file more than once and merging the results together", "body": "<p>I think I probably titled this question poorly, but hopefully this quention and answer will help someone else some day. Anyway I've accomplished my goal with some brute force... I ended up doing a pass for each filter, and added the nodes that I want to keep to a list (I needed a flag because some filters have more than one single criteria). After all filters have been processed on all messages, I then loop through the log.xml and look for each node saved in my list. If the node from the log.xml doesn't match any in the list, I remove it from the tree.</p>\n\n<pre><code>sub include {\n  my $filterParser = XML::LibXML-&gt;new-&gt;parse_file($filterXML);\n  my $logParser = XML::LibXML-&gt;new-&gt;parse_file($xml);\n\n  my $remove = true;\n  my @nodes;\n\n  foreach my $msg ( $logParser-&gt;findnodes('/TdsMainLog/message') ) {\n    foreach my $filter ( $filterParser-&gt;findnodes('/filters/filter') ) {\n        foreach my $msgNode ($msg-&gt;childNodes) {\n            foreach my $filterNode ($filter-&gt;childNodes) {  \n                if ($msgNode-&gt;localName eq $filterNode-&gt;localName) {\n                    my $m = $msgNode-&gt;textContent;\n                    my $f = $filterNode-&gt;textContent;\n                    if ( index($m, $f) != -1 ) {\n                        #mark for keeping\n                        $remove = false;\n                    } \n                    else { $remove = true; } #else unmark\n                }\n            }\n        }\n        if ($remove eq false) { push (@nodes, $msg); }\n        $remove = true;\n    }\n  }\n\n  foreach my $msg ( $logParser-&gt;findnodes('/TdsMainLog/message') ) {\n    $remove = true;\n    foreach my $node (@nodes) {\n        if ($msg-&gt;isSameNode($node)) {\n            $remove = false;\n        }\n    }\n    if ($remove eq true) { $msg-&gt;parentNode-&gt;removeChild($msg); }\n  }\n    $logParser-&gt;toFile($xml);\n  }\n</code></pre>\n"}], "owner": {"reputation": 737, "user_id": 1263343, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HYgqv.jpg?s=128&g=1", "display_name": "codenaugh", "link": "https://stackoverflow.com/users/1263343/codenaugh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 116, "favorite_count": 0, "accepted_answer_id": 29245241, "answer_count": 1, "score": 1, "last_activity_date": 1427291453, "creation_date": 1427233604, "question_id": 29243501, "link": "https://stackoverflow.com/questions/29243501/parsing-xml-file-more-than-once-and-merging-the-results-together", "title": "Parsing XML file more than once and merging the results together", "body": "<p>I have a subroutine that parses 2 XMLs, one is the original log data, the other is a filter. I want to remove everything from the log.xml that is not found in one of the filters. </p>\n\n<p>Here is an example of my log file:</p>\n\n<pre><code>&lt;log&gt;\n  &lt;message&gt;\n    &lt;type&gt;warning&lt;/type&gt;\n    &lt;from&gt;cody&lt;/from&gt;\n    &lt;content&gt;cant use XML::Merge&lt;/content&gt;\n  &lt;/message&gt;\n  &lt;message&gt;\n    &lt;type&gt;error&lt;/type&gt;\n    &lt;from&gt;cody&lt;/from&gt;\n    &lt;content&gt;some text here&lt;/content&gt;\n  &lt;/message&gt;\n  &lt;message&gt;\n    &lt;type&gt;warning&lt;/type&gt;\n    &lt;from&gt;charlie&lt;/from&gt;\n    &lt;content&gt;ruff&lt;/content&gt;\n  &lt;/message&gt;\n  &lt;message&gt;\n    &lt;type&gt;error&lt;/type&gt;\n    &lt;from&gt;cody&lt;/from&gt;\n    &lt;content&gt;an error&lt;/content&gt;\n  &lt;/message&gt;\n&lt;/log&gt;\n</code></pre>\n\n<p>with a filter.xml that looks like:</p>\n\n<pre><code>&lt;filters&gt;\n  &lt;filter&gt;\n    &lt;type&gt;warning&lt;/type&gt;\n    &lt;content&gt;XML::Merge&lt;/content&gt;\n  &lt;/filter&gt;\n  &lt;filter&gt;\n    &lt;type&gt;error&lt;/type&gt;\n  &lt;/filter&gt;\n&lt;/filters&gt;\n</code></pre>\n\n<p>This should result in all warnings containing the content \"XML::Merge\" to be retained and ALL errors as well. My attempt has been to make a first pass with the first filter, which results in all other message nodes being chopped, so I get no errors in the resulting XML file. The next filter then chops off the ones that were supposed to remain from the first filter. Here is my code, which works well if only one filter is in the filter.xml. </p>\n\n<pre><code>sub include {\n  my $filterParser = XML::LibXML-&gt;new-&gt;parse_file($filterXML);\n  my $logParser = XML::LibXML-&gt;new-&gt;parse_file($xml);\n\n  foreach my $filter ( $filterParser-&gt;findnodes('/filters/filter') ) {\n    foreach my $msg ( $logParser-&gt;findnodes('/log/message') ) {\n        foreach my $msgNode ($msg-&gt;childNodes) {\n            foreach my $filterNode ($filter-&gt;childNodes) {\n                if ($msgNode-&gt;localName eq $filterNode-&gt;localName) {\n                    my $m = $msgNode-&gt;textContent;\n                    my $f = $filterNode-&gt;textContent;\n                    if (index($m, $f) == -1) {\n                        $msg-&gt;parentNode-&gt;removeChild($msg);\n                    }\n                }   \n            }\n        }\n    }\n  } \n  $logParser-&gt;toFile($xml);\n}\n</code></pre>\n\n<p>I understand why it outputs a blank doc with more than one filter, but need help on getting the first pass saved somewhere, then use the original XML to make a pass with the second filter, and so on, until no filters are left and then merge everything into one XML, without duplicate messages.</p>\n"}, {"tags": ["python", "perl"], "comments": [{"owner": {"reputation": 26167, "user_id": 736937, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/b3ccac435e2fd4eb9be62da7830d887c?s=128&d=identicon&r=PG", "display_name": "jedwards", "link": "https://stackoverflow.com/users/736937/jedwards"}, "edited": false, "score": 5, "creation_date": 1427230944, "post_id": 29242769, "comment_id": 46691596, "body": "Why not just open the eventList (or whatever you&#39;re reading and looping over) <i>inside</i> your python script, instead of repeatedly calling python from a perl script?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 2, "creation_date": 1427231707, "post_id": 29242769, "comment_id": 46692005, "body": "Perl doesn&#39;t &quot;close&quot; Python. The Python program exits all on its own. You&#39;re first going to have to change your Python script first."}], "owner": {"reputation": 473, "user_id": 4367994, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/add879bb03f3b2b6b0a856814cf73e98?s=128&d=identicon&r=PG&f=1", "display_name": "geeb.24", "link": "https://stackoverflow.com/users/4367994/geeb-24"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 53, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1427230757, "creation_date": 1427230757, "question_id": 29242769, "link": "https://stackoverflow.com/questions/29242769/perl-script-closes-python-after-each-run-how-to-keep-python-open", "title": "Perl Script Closes Python after each run: How to keep Python Open", "body": "<p>I am running a perl script, which loops through each directory, where I run a Python GUI, and once I finish my work in that directory, I close the GUI, and I move on to the next event.  However, Python closes every time I complete a run in a directory.  I was wondering how to keep python open, to decrease the processing time with opening python.  The Code is below:</p>\n\n<pre><code>#!/usr/bin/perl -w\n#\n#\n#\n# This scirpt will open AIMBAT automatically so that I don't have\n# to change directories every time I open AIMBAT.\n\n\n# Read in the List of Event Files\nopen(TABLEA, \"eventList\");\n@tablea = &lt;TABLEA&gt;;\n# Change the Home directory to whatever directory events are located.\n$homeD = \"/Users/grbrenn/antarctica/TAMSEIS/response_removed/\";\n# Takes each line in the array, tablea/eventList, and runs the script\nfor ($i = 0; $i &lt; @tablea; $i++) {\n    chomp ($tablea[$i]);\n    ($event) = (@tablea[$i])[0];\n    chdir $event;\n    system(\"ttpick.py *BHZ\");\n    chdir $homeD;\n    print\n}\n</code></pre>\n"}, {"tags": ["perl", "cpan"], "answers": [{"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 3, "last_activity_date": 1427230406, "last_edit_date": 1427230406, "creation_date": 1427229039, "answer_id": 29242305, "question_id": 29241820, "link": "https://stackoverflow.com/questions/29241820/cpan-install-then-cpan-force-install-produces-two-copies/29242305#29242305", "title": "cpan install then cpan force install produces two copies", "body": "<p>The <code>cpan\\build</code> is just <code>cpan</code>'s temporary workspace. Its contents can be safely deleted.</p>\n\n<p><code>cpan</code>'s setting <code>build_cache</code> limits the size of this directory. Setting it to zero clears that directory every time <code>cpan</code> is started and/or every time you start installing a module.</p>\n\n<hr>\n\n<p>The first thing <code>cpan</code> after obtaining the distribution tarball is to unzip it into a new unique subdirectory of <code>cpan\\build</code><sup>[1]</sup>.</p>\n\n<p>After doing a bit a prep work, the installation process will install the distribution into a temporary subdirectory named <code>blib</code><sup>[2]</sup>. The tests will be run using the modules installed in <code>blib</code>. If the tests pass, the files in <code>blib</code> are copied to their final location.</p>\n\n<hr>\n\n<ol>\n<li><p>Existing build directories can be reused if <code>cpan</code>'s <code>build_dir_reuse</code> setting is true. (I recommend against that; it causes problem, without any upside.) Even then, deleting the build directories isn't a problem.</p></li>\n<li><p>This is the what installed based on ExtUtils::MakeMaker or Module::Build installers do. Other installers may behave differently.</p></li>\n</ol>\n"}], "owner": {"reputation": 101, "user_id": 4615531, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eb90408cb01a3baf9169a41abfbfae27?s=128&d=identicon&r=PG&f=1", "display_name": "J. L. Tympanum", "link": "https://stackoverflow.com/users/4615531/j-l-tympanum"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 162, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1427230406, "creation_date": 1427227350, "question_id": 29241820, "link": "https://stackoverflow.com/questions/29241820/cpan-install-then-cpan-force-install-produces-two-copies", "title": "cpan install then cpan force install produces two copies", "body": "<p>Context: Windows 7.  Perl: Strawberry version 5.20</p>\n\n<p>Prologue: I installed Mail::Sender using the install command from the cpan shell.  It asked me if I wanted to enter default values.  I said Yes but then I just put in blank for all the values.  What I really wanted was to have said No.  When the installation was done, I started all over.  But in order to make anything happen, I had to use force install.  This time I answered No to the default values question.  The resulting installation functions satisfactorily.  But, looking in the folder \\Strawberry\\cpan\\build\\Mail-Sender\\blib\\lib I find two subdirectories for the Mail module, apparently corresponding to my two installation attempts.</p>\n\n<p>Question: can I safely delete the older of these two Mail module directories?</p>\n"}, {"tags": ["perl", "loops", "sequence", "bioinformatics", "fasta"], "comments": [{"owner": {"reputation": 1716, "user_id": 695867, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/45d624c0405e2368e571c51fccc69704?s=128&d=identicon&r=PG", "display_name": "Sam Choukri", "link": "https://stackoverflow.com/users/695867/sam-choukri"}, "edited": false, "score": 0, "creation_date": 1427223970, "post_id": 29240422, "comment_id": 46687780, "body": "Can you post some sample data? I assumed there was one fasta record per line."}], "answers": [{"comments": [{"owner": {"reputation": 29146, "user_id": 2616073, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8b0b2c38a8f7657b6504f67f714cc2f7?s=128&d=identicon&r=PG", "display_name": "dkatzel", "link": "https://stackoverflow.com/users/2616073/dkatzel"}, "edited": false, "score": 0, "creation_date": 1427223756, "post_id": 29240755, "comment_id": 46687679, "body": "Fasta records span multiple lines (although you wouldn&#39;t know that if you only read the OP question)"}, {"owner": {"reputation": 29146, "user_id": 2616073, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8b0b2c38a8f7657b6504f67f714cc2f7?s=128&d=identicon&r=PG", "display_name": "dkatzel", "link": "https://stackoverflow.com/users/2616073/dkatzel"}, "edited": false, "score": 0, "creation_date": 1427224769, "post_id": 29240755, "comment_id": 46688165, "body": "agree with use of BioPerl"}], "tags": [], "owner": {"reputation": 1716, "user_id": 695867, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/45d624c0405e2368e571c51fccc69704?s=128&d=identicon&r=PG", "display_name": "Sam Choukri", "link": "https://stackoverflow.com/users/695867/sam-choukri"}, "is_accepted": false, "score": 4, "last_activity_date": 1427227536, "last_edit_date": 1427227536, "creation_date": 1427223604, "answer_id": 29240755, "question_id": 29240422, "link": "https://stackoverflow.com/questions/29240422/extract-first-sequence-only-from-a-fasta-file/29240755#29240755", "title": "extract first sequence only from a fasta file", "body": "<p>If you want just the first line of an input file, then you don't need a <code>while</code> loop.</p>\n\n<pre><code>my $line = &lt;$in_fh&gt;;\nprint $out_fh $line;\n</code></pre>\n\n<p>EDIT:</p>\n\n<p>After researching the <a href=\"http://en.wikipedia.org/wiki/FASTA_format\" rel=\"nofollow\">FASTA format</a>, I think it is sufficiently complicated enough that you shouldn't parse it manually. Instead, you should use <a href=\"https://metacpan.org/release/BioPerl\" rel=\"nofollow\">BioPerl</a>.</p>\n\n<p>EDIT 2:</p>\n\n<p>Here is a working example, using BioPerl:</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\n\nuse Bio::Seq;\nuse Bio::SeqIO;\n\nmy $fasta_file = shift @ARGV or die \"Usage: $0 FASTA_FILE\\n\";\n\nmy $seqin = Bio::SeqIO-&gt;new( -format =&gt; 'Fasta', -file =&gt; $fasta_file )\n  or die \"can't load fasta file: $fasta_file\\n\";\n\nmy $seqobj = $seqin-&gt;next_seq();\n\nmy $sequence = $seqobj-&gt;seq();\n\nprint $sequence;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 29146, "user_id": 2616073, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8b0b2c38a8f7657b6504f67f714cc2f7?s=128&d=identicon&r=PG", "display_name": "dkatzel", "link": "https://stackoverflow.com/users/2616073/dkatzel"}, "is_accepted": true, "score": 3, "last_activity_date": 1427224587, "creation_date": 1427224587, "answer_id": 29241027, "question_id": 29240422, "link": "https://stackoverflow.com/questions/29240422/extract-first-sequence-only-from-a-fasta-file/29241027#29241027", "title": "extract first sequence only from a fasta file", "body": "<p>Since each fasta record header starts with <code>&gt;</code> and the sequence shouldn't ever have that character in it.  It should be safe to keep reading lines until you see the 2nd line that starts with <code>&gt;</code>.</p>\n\n<pre><code>my $line = &lt;$in_fh&gt;;\n#print first line no matter what\nprint $line;\n\nwhile($line = &lt;$in_fh&gt;){\n  #line must start with \"&gt;\"\n  unless( $line =~/^&gt;.+/){\n     print $line;\n  }else{\n    last;  #skip to the end\n }\n</code></pre>\n\n<p>}</p>\n"}, {"comments": [{"owner": {"reputation": 4324, "user_id": 109483, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b1605dbda0d18f0df226b6c1b379f9a4?s=128&d=identicon&r=PG", "display_name": "Ashley", "link": "https://stackoverflow.com/users/109483/ashley"}, "edited": false, "score": 1, "creation_date": 1427259568, "post_id": 29241940, "comment_id": 46700465, "body": "Not much. :P <code>perl -00 -ne &#39;&#47;(&gt;[^&gt;]+)&#47; &amp;&amp; print $1&#39; in.fa</code>"}], "tags": [], "owner": {"reputation": 31593, "user_id": 58082, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/61200477cf8983809ec152f484750204?s=128&d=identicon&r=PG", "display_name": "Pierre", "link": "https://stackoverflow.com/users/58082/pierre"}, "is_accepted": false, "score": 1, "last_activity_date": 1427227783, "creation_date": 1427227783, "answer_id": 29241940, "question_id": 29240422, "link": "https://stackoverflow.com/questions/29240422/extract-first-sequence-only-from-a-fasta-file/29241940#29241940", "title": "extract first sequence only from a fasta file", "body": "<p>I now you want perl, but the awk solution is shorter:</p>\n\n<pre><code>awk '/^&gt;/{if(N)exit;++N;} {print;}' in.fa\n</code></pre>\n"}], "owner": {"reputation": 141, "user_id": 3767953, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d63deb1aec93f67b9add5fa30a235bc4?s=128&d=identicon&r=PG&f=1", "display_name": "user3767953", "link": "https://stackoverflow.com/users/3767953/user3767953"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1311, "favorite_count": 0, "accepted_answer_id": 29241027, "answer_count": 3, "score": 2, "last_activity_date": 1427227783, "creation_date": 1427222427, "last_edit_date": 1427224737, "question_id": 29240422, "link": "https://stackoverflow.com/questions/29240422/extract-first-sequence-only-from-a-fasta-file", "title": "extract first sequence only from a fasta file", "body": "<p>I want to extract the first sequence only from a fasta file of multiple sequences.\nI have this code below but i cant get the loops just right to work with one another.</p>\n\n<pre><code>while (my $line = &lt;$in_fh&gt;) {\n    chomp $line;\n    for (my $i = 1; $i &lt;= 1; $i++) {\n        print $out_fh $line;\n    }\n}\n\nclose $out_fh;\n</code></pre>\n\n<p>I think its getting mixed up in the while loop but no matter what i try its not correct. I tried moving the for loop outside for example but it didnt work. Is it the type of loop?\nThanks very much for all pointers.</p>\n"}, {"tags": ["perl", "ssl", "openssl", "x509"], "answers": [{"tags": [], "owner": {"reputation": 61, "user_id": 3384171, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ccd0005cf6435d68b01e37caceb6b187?s=128&d=identicon&r=PG", "display_name": "Matthew Horsfall", "link": "https://stackoverflow.com/users/3384171/matthew-horsfall"}, "is_accepted": false, "score": 0, "last_activity_date": 1427223781, "last_edit_date": 1427223781, "creation_date": 1427223439, "answer_id": 29240705, "question_id": 29240299, "link": "https://stackoverflow.com/questions/29240299/cannot-get-any-results-with-netssleay-for-openssl/29240705#29240705", "title": "Cannot get any results with Net::SSLeay for openssl", "body": "<p>This example may be able to get you started:</p>\n\n<p><a href=\"https://metacpan.org/source/MIKEM/Net-SSLeay-1.68/examples/x509_cert_details.pl\" rel=\"nofollow\">https://metacpan.org/source/MIKEM/Net-SSLeay-1.68/examples/x509_cert_details.pl</a> </p>\n\n<p>I've snipped the relevant bits from it to just get the issuer:</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\n\nuse Net::SSLeay qw/XN_FLAG_RFC2253 ASN1_STRFLGS_ESC_MSB/;\n\nNet::SSLeay::randomize();\nNet::SSLeay::load_error_strings();\nNet::SSLeay::ERR_load_crypto_strings();\nNet::SSLeay::SSLeay_add_ssl_algorithms();\n\nmy $file = shift;\nchomp($file);\n\nmy $bio = Net::SSLeay::BIO_new_file($file, 'rb') or die \"ERROR: BIO_new_file failed\";\nmy $x509 = Net::SSLeay::PEM_read_bio_X509($bio) or die \"ERROR: PEM_read_bio_X509 failed\";\n\nmy $issuer_name = Net::SSLeay::X509_get_issuer_name($x509);\nprint Net::SSLeay::X509_NAME_print_ex($issuer_name) . \"\\n\";\n</code></pre>\n\n<p>So then:</p>\n\n<pre><code>$ perl ssl.pl /usr/share/ca-certificates/mozilla/XRamp_Global_CA_Root.crt\nCN=XRamp Global Certification Authority,O=XRamp Security Services Inc,OU=www.xrampsecurity.com,C=US\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 23, "user_id": 4708824, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-guodSamIKh4/AAAAAAAAAAI/AAAAAAAAABM/ydnh4S36T1w/photo.jpg?sz=128", "display_name": "Jeffrey", "link": "https://stackoverflow.com/users/4708824/jeffrey"}, "edited": false, "score": 0, "creation_date": 1427290256, "post_id": 29240760, "comment_id": 46716756, "body": "Thanks a ton! That worked perfectly, they really need to explain their documentation better."}, {"owner": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "reply_to_user": {"reputation": 23, "user_id": 4708824, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-guodSamIKh4/AAAAAAAAAAI/AAAAAAAAABM/ydnh4S36T1w/photo.jpg?sz=128", "display_name": "Jeffrey", "link": "https://stackoverflow.com/users/4708824/jeffrey"}, "edited": false, "score": 0, "creation_date": 1427301210, "post_id": 29240760, "comment_id": 46724684, "body": "@Jeffrey: <code>Net::SSLeay</code> is free software and the maintainers are in my experience very open for changes which improve the software. So feel free to provide the patches which make the documentation better."}, {"owner": {"reputation": 23, "user_id": 4708824, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-guodSamIKh4/AAAAAAAAAAI/AAAAAAAAABM/ydnh4S36T1w/photo.jpg?sz=128", "display_name": "Jeffrey", "link": "https://stackoverflow.com/users/4708824/jeffrey"}, "edited": false, "score": 0, "creation_date": 1427306648, "post_id": 29240760, "comment_id": 46728301, "body": "Is it possible to decode the base64 version of the certifcate or key entirely and print the data? It seems that you can only print the subject, issuer, and very few other things. I am trying to compare the modulus on the key and cert to make sure they match"}, {"owner": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "reply_to_user": {"reputation": 23, "user_id": 4708824, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-guodSamIKh4/AAAAAAAAAAI/AAAAAAAAABM/ydnh4S36T1w/photo.jpg?sz=128", "display_name": "Jeffrey", "link": "https://stackoverflow.com/users/4708824/jeffrey"}, "edited": false, "score": 0, "creation_date": 1427308008, "post_id": 29240760, "comment_id": 46729187, "body": "Looking at the source code of OpenSSL apps/x509.c  I would say that the modulus is only available by accessing internal structures and not with an API function. So you probably will not get it with a Net::SSLeay function."}], "tags": [], "owner": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "is_accepted": true, "score": 1, "last_activity_date": 1427223620, "creation_date": 1427223620, "answer_id": 29240760, "question_id": 29240299, "link": "https://stackoverflow.com/questions/29240299/cannot-get-any-results-with-netssleay-for-openssl/29240760#29240760", "title": "Cannot get any results with Net::SSLeay for openssl", "body": "<p>You don't need all this context etc. After you've initialized the SSL library you can simply do:</p>\n\n<pre><code>my $bio = Net::SSLeay::BIO_new_file($file,'r') or die $!;\nmy $cert = Net::SSLeay::PEM_read_bio_X509($bio);\nNet::SSLeay::BIO_free($bio);\n$cert or die \"cannot parse $file as PEM X509 cert: \".\n    Net::SSLeay::ERR_error_string(Net::SSLeay::ERR_get_error());\nmy $issuer = Net::SSLeay::X509_NAME_oneline(\n    Net::SSLeay::X509_get_issuer_name($cert));\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 4708824, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-guodSamIKh4/AAAAAAAAAAI/AAAAAAAAABM/ydnh4S36T1w/photo.jpg?sz=128", "display_name": "Jeffrey", "link": "https://stackoverflow.com/users/4708824/jeffrey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 703, "favorite_count": 0, "accepted_answer_id": 29240760, "answer_count": 2, "score": 2, "last_activity_date": 1427223781, "creation_date": 1427222113, "question_id": 29240299, "link": "https://stackoverflow.com/questions/29240299/cannot-get-any-results-with-netssleay-for-openssl", "title": "Cannot get any results with Net::SSLeay for openssl", "body": "<p>I am trying to create a script that looks at the data for my certs in my ~/ssl/certs folder and displays the issuer information to me.</p>\n\n<p>It's written in perl and it would be easy to just say:</p>\n\n<pre><code>$data = `/usr/bin/openssl x509 -in $file -noout -issuer`\n</code></pre>\n\n<p>However that is not very portable. I am trying to use Net::SSLeay instead to get the same output, however all I can seem to manage are checksum numbers, what am I missing? Here is what I got</p>\n\n<pre><code>#!/usr/bin/perl\nuse 5.10.1;\nuse strict;\nuse warnings;\nuse Net::SSLeay qw(die_now die_if_ssl_error);\nNet::SSLeay::load_error_strings();\nNet::SSLeay::SSLeay_add_ssl_algorithms();    # Important!\nNet::SSLeay::ENGINE_load_builtin_engines();  # If you want built-in engines\nNet::SSLeay::ENGINE_register_all_complete(); # If you want built-in engines\nNet::SSLeay::randomize();\nNet::SSLeay::library_init();\nNet::SSLeay::OpenSSL_add_all_algorithms();\nmy $file = '~/ssl/certs/certificate.crt';\n\nmy $x509 = Net::SSLeay::X509_new(); \nNet::SSLeay::X509_free($x509);\nmy $type = Net::SSLeay::X509_certificate_type($x509);\nmy $ctx = Net::SSLeay::CTX_new_with_method(Net::SSLeay::TLSv1_method());\nmy $test = Net::SSLeay::X509_load_cert_file( $ctx, $file, $type );\nmy $info = Net::SSLeay::X509_issuer_name_hash($x509);\n\nsay \"\\nInfo = $info \\nX509 = $x509\\nTest= $test\\nType = $type\\nCTX = $ctx\";\n\n\n\nThis is my output:\nInfo = 4003674586 \nX509 = 16119648\nTest= 0\nType = 0\nCTX = 16137888\n</code></pre>\n\n<p>I've read through all the source code and the documentation, none of it makes any sense.</p>\n"}, {"tags": ["linux", "excel", "perl"], "comments": [{"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 1, "creation_date": 1427221381, "post_id": 29240047, "comment_id": 46686347, "body": "Obligatory FYI...the <code>MIME::Lite</code> <a href=\"https://metacpan.org/pod/MIME::Lite#WAIT\" rel=\"nofollow noreferrer\">docs</a> say: &quot;<b>WAIT!</b> MIME::Lite is not recommended by its current maintainer. There are a number of alternatives, like Email::MIME or MIME::Entity and Email::Sender, which you should probably use instead. MIME::Lite continues to accrue weird bug reports, and it is not receiving a large amount of refactoring due to the availability of better alternatives. Please consider using something else.&quot;"}, {"owner": {"reputation": 143, "user_id": 2321518, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ea3116876a3b944c013e6cf2cf6fc516?s=128&d=identicon&r=PG", "display_name": "MI.Sarwar", "link": "https://stackoverflow.com/users/2321518/mi-sarwar"}, "reply_to_user": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1427222377, "post_id": 29240047, "comment_id": 46686898, "body": "Sorry, I get a similar result from MIME::Entity . I tried that."}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1427222464, "post_id": 29240047, "comment_id": 46686942, "body": "I&#39;m not saying it&#39;s the source of your problem, just that you probably shouldn&#39;t use it."}, {"owner": {"reputation": 28131, "user_id": 1956010, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/bfdcb4596e9da98cccbf9a0069fdff6c?s=128&d=identicon&r=PG", "display_name": "nwellnhof", "link": "https://stackoverflow.com/users/1956010/nwellnhof"}, "edited": false, "score": 0, "creation_date": 1427285129, "post_id": 29240047, "comment_id": 46713136, "body": "How do you create <code>$sNoticeFile</code>? What&#39;s its content?"}], "answers": [{"tags": [], "owner": {"reputation": 143, "user_id": 2321518, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ea3116876a3b944c013e6cf2cf6fc516?s=128&d=identicon&r=PG", "display_name": "MI.Sarwar", "link": "https://stackoverflow.com/users/2321518/mi-sarwar"}, "is_accepted": true, "score": 0, "last_activity_date": 1427294277, "creation_date": 1427294277, "answer_id": 29258717, "question_id": 29240047, "link": "https://stackoverflow.com/questions/29240047/perl-mimelite-sending-empty-excel-file/29258717#29258717", "title": "Perl MIME::Lite sending empty Excel file", "body": "<p>I figured out the problem. My row counter was not incrementing at the right place. It was always writing new data from the database to row number 2.</p>\n\n<p>Thank everyone. </p>\n"}], "owner": {"reputation": 143, "user_id": 2321518, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ea3116876a3b944c013e6cf2cf6fc516?s=128&d=identicon&r=PG", "display_name": "MI.Sarwar", "link": "https://stackoverflow.com/users/2321518/mi-sarwar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 396, "favorite_count": 0, "accepted_answer_id": 29258717, "answer_count": 1, "score": 1, "last_activity_date": 1427294277, "creation_date": 1427221215, "last_edit_date": 1427230320, "question_id": 29240047, "link": "https://stackoverflow.com/questions/29240047/perl-mimelite-sending-empty-excel-file", "title": "Perl MIME::Lite sending empty Excel file", "body": "<p>I am creating an excel file in perl using Spreadsheet::WriteExcel. My code starts like this</p>\n\n<pre><code>my $workbook = Spreadsheet::WriteExcel-&gt;new('map.xls');\nmy $worksheet = $workbook-&gt;add_worksheet('map');\n</code></pre>\n\n<p>adds some data to workSheet</p>\n\n<p>and then</p>\n\n<pre><code>$workbook-&gt;close() or die \"Error closing file: $!\";\n</code></pre>\n\n<p>but the excel file I get contains just one row with an error message</p>\n\n<p><img src=\"https://i.stack.imgur.com/v2shc.jpg\" alt=\"enter image description here\">\nMy MIME attachment code is like this</p>\n\n<pre><code>$msg-&gt;attach(\nType        =&gt; 'application/vnd.ms-excel',\nPath        =&gt; $sNoticeFile,\nDisposition =&gt; \"attachment\",\n);\n</code></pre>\n\n<p>can someone please tell me what is missing/wrong in the code? Thank you</p>\n"}, {"tags": ["perl"], "answers": [{"tags": [], "owner": {"reputation": 2614, "user_id": 1803586, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/3eVpM.png?s=128&g=1", "display_name": "edem", "link": "https://stackoverflow.com/users/1803586/edem"}, "is_accepted": false, "score": 2, "last_activity_date": 1427228391, "creation_date": 1427228391, "answer_id": 29242111, "question_id": 29239770, "link": "https://stackoverflow.com/questions/29239770/how-to-read-excel-sheet-using-perl-script-with-simple-check-condition/29242111#29242111", "title": "How to read excel sheet using perl script with simple check condition", "body": "<pre><code>#!/usr/bin/perl \n\nuse strict;\nuse warnings;\nuse v5.14;\n\nuse Spreadsheet::ParseExcel;\nuse Data::Dumper;\n\nmy $ws = Spreadsheet::ParseExcel\n                -&gt;new()\n                -&gt;parse('yourfile.xls')\n                -&gt;worksheet(0);\n\nmy ($i, $r_max) = $ws-&gt;row_range;\n\nmy ($cell_B, $cell_C);\n\nwhile ($i &lt;= $r_max) {\n    $cell_B = $ws-&gt;get_cell($i,1);\n    $cell_C = $ws-&gt;get_cell($i,2);\n\n    say $cell_C-&gt;value \n        if $cell_B \n            and $cell_C \n            and $cell_B-&gt;value eq 'Always null';\n} continue { $i++ }\n</code></pre>\n"}], "owner": {"reputation": 444, "user_id": 2575155, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/05aff69421d88ba7accab8cb4c062fc6?s=128&d=identicon&r=PG", "display_name": "marjun", "link": "https://stackoverflow.com/users/2575155/marjun"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 141, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1427228391, "creation_date": 1427220129, "question_id": 29239770, "link": "https://stackoverflow.com/questions/29239770/how-to-read-excel-sheet-using-perl-script-with-simple-check-condition", "title": "How to read excel sheet using perl script with simple check condition", "body": "<p>Im new bee to perl trying to read excel sheet with simple condition..</p>\n\n<p>problem is reading all records and checking whether b columns has \"Always null\" string if yes then display output from Column \"C\" </p>\n\n<p>Example : For Always Null condtion</p>\n\n<p>Expected output : a,b,c,f,g</p>\n\n<p><img src=\"https://i.stack.imgur.com/BRwCt.png\" alt=\"enter image description here\"></p>\n"}, {"tags": ["perl", "pgm"], "comments": [{"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 1, "creation_date": 1427220282, "post_id": 29239537, "comment_id": 46685740, "body": "<code>&#47;path&#47;to&#47;script &gt; &#47;path&#47;to&#47;output&#47;file.txt</code>"}, {"owner": {"reputation": 441, "user_id": 3431407, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/SCHRD.jpg?s=128&g=1", "display_name": "Funkeh-Monkeh", "link": "https://stackoverflow.com/users/3431407/funkeh-monkeh"}, "reply_to_user": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1427259057, "post_id": 29239537, "comment_id": 46700321, "body": "Thanks @ThisSuitIsBlackNot"}], "answers": [{"tags": [], "owner": {"reputation": 80, "user_id": 4025655, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b708f7d61edb8730a8d2c5bf22afb1ed?s=128&d=identicon&r=PG&f=1", "display_name": "lamchob", "link": "https://stackoverflow.com/users/4025655/lamchob"}, "is_accepted": false, "score": 1, "last_activity_date": 1432024003, "creation_date": 1432024003, "answer_id": 30320384, "question_id": 29239537, "link": "https://stackoverflow.com/questions/29239537/writing-pixel-values-from-pgm-file-to-text-file-with-latitude-longitude-and-dep/30320384#30320384", "title": "Writing pixel values from pgm file to text file with latitude, longitude and depth in Perl", "body": "<p>You can either direct the the output of the script into a file\nwith the '>>' operator.\nUse it like this: <code>perl /your/script.pl &gt; /your/text/file.txt</code>\nIf you want to create a new file on the fly, use '>>'.\n<code>perl /your/script.pl &gt;&gt; /your/text/file.txt</code></p>\n\n<p>Your second Option is to open a Filehandle in Perl like this:\n<code>open my $fh, \"&gt;&gt;\", \"/yout/text/file.txt\" or die \"Failed to open file: $!\";</code>.\nAdd this line below the first <code>open</code> statement.</p>\n\n<p>This creates the file you want to write in.\nTo print content into the file, add the filehandle (<code>$fh</code>)\nto the <code>print</code> statement like this:\n<code>printf $fh \"%6.2f\\n\",$depth;  # depth in meters</code></p>\n\n<p>To manipulate the delimeter of the your data, replace the <code>\\n</code> (which is \na linebreak) with the one you want (<code>\\t</code> is for tab).</p>\n\n<p>Full Perl example:</p>\n\n<pre><code>my $depth_file = 'SeaWiFS_median_depth.35N.35S.180W.180E.pgm';\n\nopen F,$depth_file or die \"Could not open $depth_file ($!)\";\nopen my $fh, \"&gt;&gt;\", \"/yout/text/file.txt\" or die \"Failed to open file: $!\";\n\n\n&lt;F&gt;;    # skip header line\n\nmy($wid,$hgt) = split ' ',scalar &lt;F&gt;;\n\n&lt;F&gt;;    # skip another header line\n\n$wid == 36000 or die \"Unexpected width in depth file\\n\";\n$hgt ==  7000 or die \"Unexpected height in depth file\\n\";\n\nmy $inc = 360/$wid;\n\nmy $log500 = log(100/0.2);\n\nfor($lat = 35 - $inc/2; $lat &gt; -35; $lat -= $inc){\n  for($lon = -180 + $inc/2; $lon &lt; 180; $lon += $inc){\n\n    read(F,$pixel,1) == 1 or die \"Error reading $depth_file ($!)\";\n    $pixel = unpack \"C\",$pixel;\n\n    printf \"%7.3f %8.3f \",$lat,$lon;\n\n    if($pixel == 0){\n      print \"no data\\t\";\n    }\n    elsif($pixel == 1){\n      print \"land\\t\";\n    }\n    elsif($pixel == 255){\n      print \"cloud or other masking condition\\t\";\n    }\n    else{\n      $depth = 0.2*exp($log500*($pixel - 2)/252);\n      printf $fh \"%6.2f\\t\",$depth;  # depth in meters\n    }\n  }\n  print $fh, \"\\n\"; # new line after each line of the image\n}\n</code></pre>\n"}], "owner": {"reputation": 441, "user_id": 3431407, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/SCHRD.jpg?s=128&g=1", "display_name": "Funkeh-Monkeh", "link": "https://stackoverflow.com/users/3431407/funkeh-monkeh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 189, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1432024003, "creation_date": 1427219324, "question_id": 29239537, "link": "https://stackoverflow.com/questions/29239537/writing-pixel-values-from-pgm-file-to-text-file-with-latitude-longitude-and-dep", "title": "Writing pixel values from pgm file to text file with latitude, longitude and depth in Perl", "body": "<p>I am very new to Perl and have not much idea about how to go about doing this.</p>\n\n<p>I have come across some code that reads a .pgm file named <code>SeaWiFS_median_depth.35N.35S.180W.180E.pgm</code> and rescales some of the pixel values in the file into latitudes, longitudes and depths and prints them on screen when I run the script.</p>\n\n<pre><code>my $depth_file = 'SeaWiFS_median_depth.35N.35S.180W.180E.pgm';\n\nopen F,$depth_file or die \"Could not open $depth_file ($!)\";\n\n&lt;F&gt;;    # skip header line\nmy($wid,$hgt) = split ' ',scalar &lt;F&gt;;\n&lt;F&gt;;    # skip another header line\n\n$wid == 36000 or die \"Unexpected width in depth file\\n\";\n$hgt ==  7000 or die \"Unexpected height in depth file\\n\";\n\nmy $inc = 360/$wid;\n\nmy $log500 = log(100/0.2);\n\nfor($lat = 35 - $inc/2; $lat &gt; -35; $lat -= $inc){\n  for($lon = -180 + $inc/2; $lon &lt; 180; $lon += $inc){\n\n    read(F,$pixel,1) == 1 or die \"Error reading $depth_file ($!)\";\n    $pixel = unpack \"C\",$pixel;\n\n    printf \"%7.3f %8.3f \",$lat,$lon;\n\n    if($pixel == 0){\n      print \"no data\\n\";\n    }\n    elsif($pixel == 1){\n      print \"land\\n\";\n    }\n    elsif($pixel == 255){\n      print \"cloud or other masking condition\\n\";\n    }\n    else{\n      $depth = 0.2*exp($log500*($pixel - 2)/252);\n      printf \"%6.2f\\n\",$depth;  # depth in meters\n    }\n  }\n}\n</code></pre>\n\n<p>However, what i am want to do is to write the values printed on screen - latitude, longitude and depth to a text (tab delimited) or csv file so I can use it in another program like R or a GIS software package to do further analysis.</p>\n\n<p>Can someone please help me out here please?</p>\n"}, {"tags": ["perl", "deployment", "dependency-management"], "comments": [{"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1427219745, "post_id": 29238997, "comment_id": 46685419, "body": "&quot;I wouldn&#39;t be opposed to some other method of bundling installed modules with the application&quot; Like <a href=\"https://metacpan.org/pod/pp\" rel=\"nofollow noreferrer\"><code>pp</code></a>?"}, {"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "reply_to_user": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1427220277, "post_id": 29238997, "comment_id": 46685738, "body": "We do use <code>PAR::Packer</code> for some standalone scripts, but the application in question is actually a <i>web</i> (intranet) application, with hundreds of individual <code>.pl</code> files. I&#39;ll edit the original question to make that more clear."}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 4, "creation_date": 1427220771, "post_id": 29238997, "comment_id": 46686007, "body": "What about creating a distribution for your source and getting the dependencies from a <a href=\"https://metacpan.org/pod/distribution/CPAN-Mini/bin/minicpan\" rel=\"nofollow noreferrer\">local CPAN mirror</a>?"}, {"owner": {"reputation": 4324, "user_id": 109483, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b1605dbda0d18f0df226b6c1b379f9a4?s=128&d=identicon&r=PG", "display_name": "Ashley", "link": "https://stackoverflow.com/users/109483/ashley"}, "edited": false, "score": 0, "creation_date": 1427258930, "post_id": 29238997, "comment_id": 46700290, "body": "I don\u2019t think Carton is overkill FWIW. Sounds like a good solution and a nice way to ensure versioning during deployment while allowing devs to easily test changes in development environments."}, {"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "reply_to_user": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1427307402, "post_id": 29238997, "comment_id": 46728802, "body": "@ThisSuitIsBlackNot When you say &#39;distribution&#39;, do you mean a CPAN-like package, or something else?"}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1427308161, "post_id": 29238997, "comment_id": 46729276, "body": "@MattJacob A distribution like you find on CPAN, yes. In other words, a tarball containing your source files and a <code>Makefile.PL</code>, <code>Build.PL</code>, or similar. Distributions intended for upload to CPAN usually include various and sundry other files (e.g. <code>LICENSE</code>), but you probably don&#39;t need them in this case. Tools like <a href=\"https://metacpan.org/pod/Dist::Zilla\" rel=\"nofollow noreferrer\"><code>Dist::Zilla</code></a> can help you create a distribution. Once you have a distribution, copy it over to the target host, untar it, and run something like <code>perl Makefile.PL</code>, which will install your source along with any dependencies."}, {"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 0, "creation_date": 1427308371, "post_id": 29238997, "comment_id": 46729406, "body": "What about <a href=\"https://metacpan.org/pod/local::lib\" rel=\"nofollow noreferrer\">local::lib</a>? Same downsides as Carton (have to add <code>use lib</code> to everything), with an additional downside of its own (have to put a bunch of installed modules under version control). But---it&#39;s simple and it&#39;s predictable."}, {"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "reply_to_user": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1427308534, "post_id": 29238997, "comment_id": 46729503, "body": "@ThisSuitIsBlackNot In that scenario, I&#39;d also have to ship a minicpan with the release, right? (Isolated network w/no internet connection on target machines.)"}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1427308862, "post_id": 29238997, "comment_id": 46729704, "body": "@MattJacob You should be able to set up a single local mirror somewhere on your network and configure <code>cpan</code> on all your target hosts to point to it (assuming they&#39;re on a network at all)."}], "answers": [{"tags": [], "owner": {"reputation": 738, "user_id": 2056988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7ea2d50bbcc6f8812c34dab65a1923a?s=128&d=identicon&r=PG", "display_name": "FtLie", "link": "https://stackoverflow.com/users/2056988/ftlie"}, "is_accepted": false, "score": 2, "last_activity_date": 1428420728, "creation_date": 1428420728, "answer_id": 29495373, "question_id": 29238997, "link": "https://stackoverflow.com/questions/29238997/whats-a-bulletproof-way-to-deploy-an-internal-perl-application-with-cpan-depend/29495373#29495373", "title": "What&#39;s a bulletproof way to deploy an internal Perl application with CPAN dependencies?", "body": "<p>I have a totally automated installation of IIS, Strawberry Perl, CPAN modules + application. This is the cpan part of it.</p>\n\n<p>It writes all cpan commands to a text file, then calls cpan with this as parameter.</p>\n\n<p>Run it in two modes, either train the master installation with latest downloads (or version-ed downloads), or force a local (no-network) installation using a copy of the master.</p>\n\n<p>Hopefully it may be of some help</p>\n\n<pre><code>set cpan_notest=\n@IF '%skip_cpan_test%' NEQ '' GOTO SKIPPED_SKIP_CPAN_TEST\n    set cpan_notest=\n:SKIPPED_SKIP_CPAN_TEST\n\n@IF '%skip_cpan%' NEQ '' GOTO SKIPPED_CPAN\n    @echo EasyRisk install: CPAN starting\n\n    @REM some modules do ask questions about things (XML::Twig)\n    @set PERL_MM_USE_DEFAULT=1\n\n    @REM for CPAN to work, Perl must be in the path\n    @REM but local environment (for this .cmd) is not updated when perl is installed\n    @REM Need to fetch from registry and set it from a CALL'ed .cmd-file \n    @REM (looks like only way to do it, sorry)\n    @echo.\n    @echo Updating local path with ref to perl bin\n    @echo Local path was:  %PATH%\n    @\"%local-perl-path-bin%\\Perl.exe\" Utils\\update_path.pl &gt; Utils\\update_path.cmd\n    @REM cpan is a batch-file, so use CALL. Otherwise it will end this script as well\n    @call Utils\\update_path.cmd &gt; NUL\n    @del Utils\\update_path.cmd\n    @echo.\n    @echo Local path now:  %PATH%\n    @echo.\n\n\n    @set cpan-prefix=\n    @set cpan-postfix=\n\n    @REM some issues with testing  formbuilder on Perl 5.17+(modules works fine)\n    @REM do not print errors, as the tests are wrong, but module considered ok. \n    @REM (the 2&gt;&amp;1 means send std error to std out, which is already grounded to NUL)\n    @REM -f not strong enough, need to use 'force' from command-line (piped)\n\n    @echo.\n    @REM @echo Installing Perl Modules (CPAN), result is stored in log\\cpan_result.txt\n\n    @REM Clear the install file, then fill it with list of needed modules\n    @REM make sure we install only from local modules\n    @echo.  &gt;  cpan_cmd.txt\n    @REM Set that we only want to use local cpan, and not get stuff from internet\n    @echo o conf commit &gt;&gt;  cpan_cmd.txt\n\n    @REM if we are not training the local cpan-directory, then force to use the local copy\n    @REM If any modules added, then the minicpan must also be updated (trained)\n    @REM after training, copy C:\\strawberry\\cpan\\sources to &lt;installkit&gt;\\Utils\\minicpan\n    @IF '%train_cpan%' NEQ '' GOTO SKIPPED_CPAN_TRAIN_1\n\n    @echo Transfering local copy of cpan perl modules (minicpan)\n        @xcopy  /s /q /y /i Utils\\minicpan \"%local-perl-path%\\minicpan\"\n\n        @echo o conf auto_commit 0 &gt;&gt;  cpan_cmd.txt\n\n        @echo o conf connect_to_internet_ok '' &gt;&gt;  cpan_cmd.txt\n        @REM dont init, just use local @echo o conf init urllist &gt;&gt;  cpan_cmd.txt\n        @REM Remove default cpan repositories\n        @echo o conf urllist shift &gt;&gt;  cpan_cmd.txt\n        @echo o conf urllist shift &gt;&gt;  cpan_cmd.txt\n        @echo o conf urllist shift &gt;&gt;  cpan_cmd.txt\n\n        @REM add our local first, and only\n        @echo o conf urllist %local-minicpan-file% &gt;&gt;  cpan_cmd.txt\n        @rem view it in the log (good for debug)\n        @echo o conf urllist &gt;&gt;  cpan_cmd.txt\n\n\n    :SKIPPED_CPAN_TRAIN_1\n\n    @echo Building Cpan-install list\n\n    @REM Version specific (example only)\n    @REM echo install SAMV/Set-Object-1.28.tar.gz\n    @REM version independent\n    @REM echo install Set::Object\n\n\n    @echo %cpan_notest%  install Test::More Devel::CheckOS Pod::Coverage Class::ISA   Test::Simple Devel::Symdump Test::Pod::Coverage Pod::Coverage Test::Pod  Test::Compile YAML Data::Inherited Data::Comparable Data::Compare Devel::CheckOS Text::Template HTML::Template CGI::FastTemplate FreezeThaw   %cpan-postfix% &gt;&gt;  cpan_cmd.txt\n\n    @REM Error in tests, (module works fine), but tests fails in 5.18, so use the force\n    @echo force install CGI::Session CGI::Session::Driver::odbc CGI::FormBuilder %cpan-postfix% &gt;&gt;  cpan_cmd.txt\n\n\n\n\n    @REM reset the config (as we did modify the list of urls)\n    @echo o conf defaults &gt;&gt;  cpan_cmd.txt\n    @echo exit &gt;&gt;  cpan_cmd.txt\n\n    @REM now run the file with cpan, and remove it afterwards \n    @REM 2&gt;&amp;1 means redirect std err to std out (which goes to log\\cpan_result.log)\n\n    @echo Installing CPAN modules (from minicpan), this may take a while\n    @echo See progress in \"%setup_dir%\\log\\cpan_result.log\"\n    @REM temporary cd to the Perl-bin folder to be sure \n    @REM cpan and Perl are run from same Perl version \n    @cd /D \"%local-perl-path-bin%\"\n    @set cpan-start=%TIME%\n    @type \"%setup_dir%\\cpan_cmd.txt\" | cpan &gt; \"%setup_dir%\\log\\cpan_result.log\" 2&gt;&amp;1\n    @set cpan-end=%TIME%\n    @cd /D %setup_dir%\n\n    @REM @del cpan_cmd.txt\n    @echo 'EasyRisk install: Cpan done'\n    @IF '%do_pause%' NEQ '' pause \n:SKIPPED_CPAN\n</code></pre>\n"}], "owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 292, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1428420728, "creation_date": 1427217579, "last_edit_date": 1427220473, "question_id": 29238997, "link": "https://stackoverflow.com/questions/29238997/whats-a-bulletproof-way-to-deploy-an-internal-perl-application-with-cpan-depend", "title": "What&#39;s a bulletproof way to deploy an internal Perl application with CPAN dependencies?", "body": "<p>First, the background information:</p>\n\n<ul>\n<li>All servers are under our control</li>\n<li>All Perls are exactly the same (latest Strawberry Perl)</li>\n<li>All target machines have similar OS configurations (Windows Server 20XX)</li>\n<li>None of the target machines are connected to the internet</li>\n<li>Legacy CGI web application running under IIS</li>\n<li>Small team of developers developing on their own machines</li>\n<li>Continuous integration environment</li>\n</ul>\n\n<p>My initial thought was to use <a href=\"https://metacpan.org/pod/Carton\" rel=\"nofollow\">Carton</a>, but given that we have full control over the entire process, this might be overkill. We could run a <code>carton bundle</code> on the CI server and then a <code>carton install --cached --deployment</code> on each of the target servers. It seems like that would work, but then we'd have to modify every single file to <code>use lib</code> (or set a <code>PERL5LIB</code> environment variable, but that kind of defeats the purpose of using Carton in the first place).</p>\n\n<p>I'm not opposed to modifying the system Perl, because, like I said, these are our servers, and we have full control over them. I wouldn't be opposed to some other method of bundling installed modules with the application, either. Even the XS modules wouldn't cause problems because the architectures and Perls are all the same. I just want to be able to use modules from CPAN and have it all work at deploy time, every single time.</p>\n\n<p>What am I missing?</p>\n"}, {"tags": ["perl", "timezone", "timezone-offset"], "comments": [{"owner": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "edited": false, "score": 1, "creation_date": 1427213230, "post_id": 29237324, "comment_id": 46681042, "body": "What time zones do you think EST and AST are?  Many time zone abbreviations are ambiguous."}], "answers": [{"tags": [], "owner": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "is_accepted": false, "score": 6, "last_activity_date": 1427213992, "last_edit_date": 1427213992, "creation_date": 1427213422, "answer_id": 29237587, "question_id": 29237324, "link": "https://stackoverflow.com/questions/29237324/perl-convert-timezone-gives-erroneous-output/29237587#29237587", "title": "Perl convert timezone gives erroneous output", "body": "<p>There are <a href=\"https://en.wikipedia.org/wiki/List_of_time_zone_abbreviations\">two ESTs and two ASTs and two PSTs</a> and like five CSTs.</p>\n\n<pre><code>AST     Arabia Standard Time                    UTC+03\nAST     Atlantic Standard Time                  UTC\u221204\n\nEST     Eastern Standard Time (North America)   UTC\u221205\nEST     Eastern Standard Time (Australia)       UTC+10\n\nPST     Pacific Standard Time (North America)   UTC\u221208\nPST     Philippine Standard Time                UTC+08\n</code></pre>\n\n<p>In general, avoid using time zone abbreviations because they are ambiguous.  Use offsets instead.</p>\n\n<p>I get your expected result when I run your code without DateTime::Format::DateManip (which I can't get to pass tests).</p>\n\n<pre><code>use v5.10;\nuse Date::Manip::DM6;\n\nsay UnixDate(\n    Date_ConvTZ(\"2015-03-24 06:00:00\", \"EST\", \"PST\"),\n    \"%Y-%m-%d %T\"\n);\n# 2015-03-24 03:00:00\n</code></pre>\n\n<p>But don't gamble on the date library happening to pick the same meaning for a time zone abbreviation as you, just don't use them.</p>\n"}, {"tags": [], "owner": {"reputation": 6526, "user_id": 120050, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/0be7e82463532256777530ccaba04d29?s=128&d=identicon&r=PG", "display_name": "Oesor", "link": "https://stackoverflow.com/users/120050/oesor"}, "is_accepted": false, "score": 1, "last_activity_date": 1427222247, "creation_date": 1427222247, "answer_id": 29240355, "question_id": 29237324, "link": "https://stackoverflow.com/questions/29237324/perl-convert-timezone-gives-erroneous-output/29240355#29240355", "title": "Perl convert timezone gives erroneous output", "body": "<p>Why aren't you using DateTime's <a href=\"http://search.cpan.org/~drolsky/DateTime-1.18/lib/DateTime.pm#$dt-%3Eset_time_zone(_$tz_)\" rel=\"nofollow\">builtin</a> to change the time zone of your DateTime object? It uses <a href=\"http://en.wikipedia.org/wiki/List_of_tz_database_time_zones\" rel=\"nofollow\">Olson DB</a> time zone names.</p>\n"}, {"tags": [], "owner": {"reputation": 195413, "user_id": 634824, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/889cf720c96957e615463b5c903a5e18?s=128&d=identicon&r=PG", "display_name": "Matt Johnson-Pint", "link": "https://stackoverflow.com/users/634824/matt-johnson-pint"}, "is_accepted": false, "score": 1, "last_activity_date": 1427302443, "creation_date": 1427302443, "answer_id": 29261783, "question_id": 29237324, "link": "https://stackoverflow.com/questions/29237324/perl-convert-timezone-gives-erroneous-output/29261783#29261783", "title": "Perl convert timezone gives erroneous output", "body": "<p>You should refer to the <a href=\"http://search.cpan.org/~sbeck/Date-Manip-6.49/lib/Date/Manip/Date.pod#VALID_TIME_ZONE_FORMATS\" rel=\"nofollow\">documentation for Date-Manip's valid time zone formats</a>.  It will accept either a time zone offset (such as <code>-0500</code>), a time zone abbreviation (such as <code>EST</code>), or an Olson time zone identifier (such as <code>America/New_York</code>).  It will also accept a combination of values such as <code>-0500 (EST)</code>.</p>\n\n<p>I haven't tried, but I would also think that it would accept a combined Olson identifier with offset.  If so, then that would be the most unambiguous representation.</p>\n\n<p>Keep in mind that an offset is only part of the time zone representation.  Many time zones switch offset for daylight saving time.  If you always use a fixed offset, or an abbreviation, you might be passing EST when actually the Eastern time zone would be following Eastern <em>Daylight</em> Time (EDT).</p>\n"}], "owner": {"reputation": 284, "user_id": 847151, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/453ef88115497db388326e9b9a1aa208?s=128&d=identicon&r=PG", "display_name": "Siva", "link": "https://stackoverflow.com/users/847151/siva"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 175, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1427302443, "creation_date": 1427212666, "last_edit_date": 1495541577, "question_id": 29237324, "link": "https://stackoverflow.com/questions/29237324/perl-convert-timezone-gives-erroneous-output", "title": "Perl convert timezone gives erroneous output", "body": "<p>Trying to convert a given time from one timezone to another based on <a href=\"https://stackoverflow.com/questions/5178248/perls-datemanip-how-to-convert-a-given-date-into-another-timezone\">this</a>.\nBut the output is erroneous. tried different values but no luck.\nany help on whats missing?</p>\n\n<pre><code>use Date::Manip::DM6;\nuse DateTime::Format::DateManip;\n\nmy $date2 = '2015-03-24 06:00:00';\n$date1 = DateTime::Format::DateManip-&gt;parse_datetime( $date2);\n\nmy $newdate= UnixDate(Date_ConvTZ($date1 , 'EST', 'PST' ),\"%Y-%m-%d %T\");\nprint \"date is $date1 and newdate is $newdate\";\n</code></pre>\n\n<blockquote>\n  <p>E:>perl test.pl</p>\n  \n  <p>date is 2015-03-24T06:00:00 and newdate is 2015-03-23 12:00:00</p>\n</blockquote>\n\n<p>Expected result is newdate=> 2015-03-24 03:00:00</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1427214949, "post_id": 29237127, "comment_id": 46682327, "body": "Can&#39;t. You could build a list of the full paths, then build the structure from that, but it might be easier to just implement the directory traversal yourself."}, {"owner": {"reputation": 121105, "user_id": 2766176, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/edd8638efe875601bfe394a8aea5b16d?s=128&d=identicon&r=PG", "display_name": "brian d foy", "link": "https://stackoverflow.com/users/2766176/brian-d-foy"}, "edited": false, "score": 1, "creation_date": 1427216162, "post_id": 29237127, "comment_id": 46683173, "body": "We have full examples in <a href=\"http://www.intermediateperl.com\" rel=\"nofollow noreferrer\">Intermediate Perl</a> that do this. :)"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1427216422, "post_id": 29237127, "comment_id": 46683330, "body": "I knew I&#39;d seen something similar somewhere..."}], "answers": [{"tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": false, "score": 3, "last_activity_date": 1427216159, "last_edit_date": 1427216159, "creation_date": 1427215208, "answer_id": 29238214, "question_id": 29237127, "link": "https://stackoverflow.com/questions/29237127/how-can-i-use-filefind-to-create-a-recursive-data-structure/29238214#29238214", "title": "How can I use File::Find to create a recursive data structure?", "body": "<p>How similar to your source structure do you need? Reason I ask is - something like this might work:</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\nuse File::Find;\nuse Data::Dumper;\nuse File::Spec::Functions qw(splitdir);\n\nmy %tree;\n\nsub insert_into_tree {\n    my $cursor = \\%tree;\n    print \"$File::Find::dir = $File::Find::name\\n\";\n    foreach my $subdir ( splitdir($File::Find::dir) ) {\n        $cursor-&gt;{type} = 'directory';\n        $cursor = $cursor-&gt;{subdirs}-&gt;{$subdir} ||= {};\n        $cursor-&gt;{name} = $subdir;\n    }\n    if ( -f $File::Find::name ) {\n        push( @{ $cursor-&gt;{files} }, $_ );\n    }\n    else { \n       $cursor -&gt; {type} = 'directory';\n    }\n}\n\nfind( \\&amp;insert_into_tree, 'c:\\\\temp' );\nprint Dumper \\%tree;\n</code></pre>\n\n<p>It doesn't do quite what you want, but hopefully serves to illustrate the general concept? You make a 'cursor' that's a reference to a tree position, based on the current file path. You thus build the directory tree as you go, and then insert into a 'files' array... all your files. </p>\n\n<p>The thing you're brushing up against with <code>File::Find</code> though, is that <em>does</em> a recursive traversal for you (which is good, because there's gotchas) but the <code>wanted</code> function isn't inherently recursive - it's a callback, and it's fired off once per entry found, and handed 3 variables to work with.</p>\n\n<p>So effectively - you still have to 'build' your tree yourself. Which is what that <code>$cursor</code> thing is doing above - it's making a pointer to your data structure based on the directory structure handed into <code>File::Find</code>. </p>\n"}, {"comments": [{"owner": {"reputation": 2487, "user_id": 1324356, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/EqyV4.png?s=128&g=1", "display_name": "Jaap Joris Vens", "link": "https://stackoverflow.com/users/1324356/jaap-joris-vens"}, "edited": false, "score": 0, "creation_date": 1427228341, "post_id": 29240084, "comment_id": 46690204, "body": "Thank you for this ingenious solution. It works flawlessly and answers my question exactly! However, your solution has also made me realize that File::Find is completely unsuitable for generating nested datastructures..."}], "tags": [], "owner": {"reputation": 1716, "user_id": 695867, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/45d624c0405e2368e571c51fccc69704?s=128&d=identicon&r=PG", "display_name": "Sam Choukri", "link": "https://stackoverflow.com/users/695867/sam-choukri"}, "is_accepted": true, "score": 3, "last_activity_date": 1427221354, "creation_date": 1427221354, "answer_id": 29240084, "question_id": 29237127, "link": "https://stackoverflow.com/questions/29237127/how-can-i-use-filefind-to-create-a-recursive-data-structure/29240084#29240084", "title": "How can I use File::Find to create a recursive data structure?", "body": "<p>This will output the file contents in the tree structure you asked for. I used a hash <code>%parent_nodes</code> to populate references to directory nodes as they were encountered, indexed by the directory path. That made it possible to reference the appropriate parent directory node to insert new file nodes.</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\nuse File::Find;\nuse File::Basename qw(basename);\nuse Data::Dumper;\n\nmy $root_dir = shift @ARGV || die \"Usage: $0 DIR_PATH\\n\";\n\nmy %parent_nodes;\nmy $structure = [];\nfind(\\&amp;wanted, $root_dir);\n\n\nsub wanted {\n  my $file_name = $_;\n  my $file_path = $File::Find::name;\n  my $dir_path  = $File::Find::dir;\n\n  if (-f) {\n    my $node = {\n      type =&gt; 'file',\n      name =&gt; $file_name,\n    };\n\n    my $parent_node = $parent_nodes{$dir_path}\n      || die \"can't find parent node for $dir_path\\n\";\n\n    push @{$parent_node-&gt;{items}}, $node;\n  }\n  elsif (-d) {\n\n    my $dir_name  = basename($file_path);\n\n    my $node = {\n      type =&gt; 'directory',\n      name =&gt; $dir_name,\n      items =&gt; [],\n    };\n\n    if (my $parent_node = $parent_nodes{$dir_path}) {\n      push @{$parent_node-&gt;{items}}, $node;\n    }\n    else {\n      # this must be the root node\n      push @$structure, $node;\n    }\n\n    $parent_nodes{$file_path} = $node;\n  }\n}\n\nprint Dumper($structure);\n</code></pre>\n"}], "owner": {"reputation": 2487, "user_id": 1324356, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/EqyV4.png?s=128&g=1", "display_name": "Jaap Joris Vens", "link": "https://stackoverflow.com/users/1324356/jaap-joris-vens"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 90, "favorite_count": 0, "accepted_answer_id": 29240084, "answer_count": 2, "score": 0, "last_activity_date": 1427221354, "creation_date": 1427212177, "question_id": 29237127, "link": "https://stackoverflow.com/questions/29237127/how-can-i-use-filefind-to-create-a-recursive-data-structure", "title": "How can I use File::Find to create a recursive data structure?", "body": "<p>I'm trying to create a recursive data structure that represents a directory tree. It will be created by parsing an actual directory tree. The result should look like this simplified example:</p>\n\n<pre><code>$structure = [\n    {\n        type =&gt; 'directory',\n        name =&gt; 'my_root_directory',\n        items =&gt; [\n            {\n                type =&gt; 'file',\n                name =&gt; 'image1.jpg'\n            },\n            {\n                type =&gt; 'file',\n                name =&gt; 'image2.jpg'\n            },\n            {\n                type =&gt; 'directory',\n                name =&gt; 'a_subdirectory',\n                items =&gt; [\n                    {\n                        type =&gt; 'image',\n                        name =&gt; 'image2.jpg'\n                    }\n                ]\n            }\n        ]\n    }\n]\n</code></pre>\n\n<p>In the pastI have created many maintenance headaches by writing recursive functions, so this time I decided to just use <a href=\"http://perldoc.perl.org/File/Find.html\" rel=\"nofollow\"><code>File::Find</code></a> to handle the directory walking for me. Here's what I tried:</p>\n\n<pre><code>use strict;\nuse warnings;\nuse File::Find;\n\nmy $structure = [];\nfind(\\&amp;wanted, 'my_root_directory');\n\nsub wanted {\n    my $node = {};\n    if (-f) {\n        $node-&gt;{type} = 'file';\n        $node-&gt;{name} = $_;\n    }            \n    if (-d) {\n        $node-&gt;{type} = 'directory',\n        $node-&gt;{name} = $_;\n        $node-&gt;{items} = # HELP NEEDED!\n    }\n    push @{$structure}, $node;\n}\n</code></pre>\n\n<p>This doesn't work for two reasons:</p>\n\n<ol>\n<li>I cannot assign the <code>$node-&gt;{items}</code> without duplicating the work that <code>File::Find</code> does already.</li>\n<li>Even if I would populate the node's items (i.e., by calling <code>readdir</code>), the final <code>push</code> statement would simply append the node to the end <code>@{$structure}</code> array. All hierarchy would be lost.</li>\n</ol>\n\n<p>How can I use <code>File::Find</code> to create a recursive data structure?</p>\n"}, {"tags": ["git", "perl", "show"], "answers": [{"tags": [], "owner": {"reputation": 1208, "user_id": 626804, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/8742b28745bb31ae21b06fcc54c4475e?s=128&d=identicon&r=PG", "display_name": "Ed Avis", "link": "https://stackoverflow.com/users/626804/ed-avis"}, "is_accepted": true, "score": 1, "last_activity_date": 1434799179, "creation_date": 1434799179, "answer_id": 30953377, "question_id": 29236729, "link": "https://stackoverflow.com/questions/29236729/faster-way-to-git-show-without-running-a-process-each-time/30953377#30953377", "title": "Faster way to &#39;git show&#39; without running a process each time", "body": "<p>I asked on the git mailing list, and <a href=\"http://article.gmane.org/gmane.comp.version-control.git/267952\" rel=\"nofollow\"><code>git cat-file --batch</code></a> is what you need.  It takes the <code>REV:FILE</code> pairs on standard input and outputs the file contents on standard output, in the same order.  Each file is prefixed with a header line giving its length in bytes.</p>\n"}], "owner": {"reputation": 1208, "user_id": 626804, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/8742b28745bb31ae21b06fcc54c4475e?s=128&d=identicon&r=PG", "display_name": "Ed Avis", "link": "https://stackoverflow.com/users/626804/ed-avis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 100, "favorite_count": 1, "accepted_answer_id": 30953377, "answer_count": 1, "score": 1, "last_activity_date": 1434799179, "creation_date": 1427211133, "question_id": 29236729, "link": "https://stackoverflow.com/questions/29236729/faster-way-to-git-show-without-running-a-process-each-time", "title": "Faster way to &#39;git show&#39; without running a process each time", "body": "<p>I have a local repository and I would like to view all versions of a file.  I can do this crudely by first finding all the commit ids:</p>\n\n<pre><code>% git log FILE | perl -nE '/\\Acommit ([0-9a-f]+)\\s*\\z/ &amp;&amp; say $1' log &gt;commits\n</code></pre>\n\n<p>and then getting FILE's text for each id:</p>\n\n<pre><code>% for i in `cat commits`; do git show $i:FILE; done\n</code></pre>\n\n<p>That runs one 'git' process for each revision, which is slower than it needs to be.  (Git is fast, but not so fast that I want to fork a subprocess for each revision of the file.  A quick benchmark shows that running a separate 'git show' process for each revision churns through about 50 commits per second, and I have over 5000 commits to this file.)</p>\n\n<p>Luckily 'git show' allows you to view more than one revision at a time, e.g.</p>\n\n<pre><code>% git show REV1:FILE REV2:FILE\n</code></pre>\n\n<p>That runs only a single subprocess for all the revisions.  But it concatenates them together with no marker so it would be hard for a program to determine where one ends and the next begins.  Although there is a <code>--format</code> option, it doesn't apply to dumping out plain contents and seems to have no effect.</p>\n\n<p>Is there some way I can get all the versions of the file without forking a subprocess for each revision?  I know about Perl's <code>Git</code> module but although that has a <code>cat_blob</code> method, I so far only have the id of the commits themselves, not an id which would correspond to one file within the commit (if such a thing even exists).</p>\n\n<p>So, there appear to be three alternative ways forward:</p>\n\n<ul>\n<li>Some option for 'git show' that would let me separate out the different revisions in its output, or write them to separate files, etc.</li>\n<li>Some way to use <code>Git</code> or other Perl libraries to directly access the contents of a file in various revisions (without forking a new subprocess for each separate revision)</li>\n<li>Some other tool or library that does what I want more directly or easily.  My end application is to have an enhanced 'blame' tool that shows every line in every version of the file with the revisions where they were introduced and removed.</li>\n</ul>\n\n<p>Any suggestions?</p>\n"}, {"tags": ["perl", "svn", "visualsvn-server", "post-commit-hook"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1427211694, "post_id": 29236308, "comment_id": 46679886, "body": "Re &quot;I also tried to write it in txt file but with no success&quot;, Was the file created? What I mean is, was your code run at all?"}, {"owner": {"reputation": 10414, "user_id": 1251354, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/650becb7843763fb2a7e8f7135d9ef5e?s=128&d=identicon&r=PG", "display_name": "rutter", "link": "https://stackoverflow.com/users/1251354/rutter"}, "edited": false, "score": 0, "creation_date": 1427212677, "post_id": 29236308, "comment_id": 46680663, "body": "If your exit code is non-zero, the commit is rejected and whatever you printed to STDERR is sent to the client. Not a good idea to run on a production server, but could be handy if you&#39;re just practicing/testing."}, {"owner": {"reputation": 995, "user_id": 1341008, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/3c7c817e70d04ad9cbded8f4e15d99e7?s=128&d=identicon&r=PG&f=1", "display_name": "Darko Rodic", "link": "https://stackoverflow.com/users/1341008/darko-rodic"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1427213065, "post_id": 29236308, "comment_id": 46680929, "body": "@ikegami I have edited my post"}], "answers": [{"comments": [{"owner": {"reputation": 995, "user_id": 1341008, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/3c7c817e70d04ad9cbded8f4e15d99e7?s=128&d=identicon&r=PG&f=1", "display_name": "Darko Rodic", "link": "https://stackoverflow.com/users/1341008/darko-rodic"}, "edited": false, "score": 0, "creation_date": 1427277305, "post_id": 29242043, "comment_id": 46708418, "body": "I have tried with exit(1) and I get an error that commit failed because of hook. what difference there is between hooks for pre-commit and post-commit except the name of argument?"}, {"owner": {"reputation": 4057, "user_id": 89432, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cab853284719020f2c0a1961a51a81ea?s=128&d=identicon&r=PG", "display_name": "Ivan Zhakov", "link": "https://stackoverflow.com/users/89432/ivan-zhakov"}, "reply_to_user": {"reputation": 995, "user_id": 1341008, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/3c7c817e70d04ad9cbded8f4e15d99e7?s=128&d=identicon&r=PG&f=1", "display_name": "Darko Rodic", "link": "https://stackoverflow.com/users/1341008/darko-rodic"}, "edited": false, "score": 0, "creation_date": 1427281051, "post_id": 29242043, "comment_id": 46710697, "body": "<code>pre-commit</code> hook is executed <b>before</b> transaction is committed and usually used for validating content. The <code>post-commit</code> hook executed <b>after</b> transaction committed and usually used for commit notification, updating website etc. More information about Subversion hooks:   <a href=\"http://svnbook.red-bean.com/en/1.8/svn.ref.reposhooks.html\" rel=\"nofollow noreferrer\">svnbook.red-bean.com/en/1.8/svn.ref.reposhooks.html</a>"}, {"owner": {"reputation": 995, "user_id": 1341008, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/3c7c817e70d04ad9cbded8f4e15d99e7?s=128&d=identicon&r=PG&f=1", "display_name": "Darko Rodic", "link": "https://stackoverflow.com/users/1341008/darko-rodic"}, "edited": false, "score": 0, "creation_date": 1427282079, "post_id": 29242043, "comment_id": 46711281, "body": "yes, I do understand that, but I am still unable to print actual arguments on console, or print the output of my commands etc. nor I&#39;m able to send them over http or write them in txt file ... could it be some windows issue, should I try to make it on unix based os?"}, {"owner": {"reputation": 4057, "user_id": 89432, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cab853284719020f2c0a1961a51a81ea?s=128&d=identicon&r=PG", "display_name": "Ivan Zhakov", "link": "https://stackoverflow.com/users/89432/ivan-zhakov"}, "reply_to_user": {"reputation": 995, "user_id": 1341008, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/3c7c817e70d04ad9cbded8f4e15d99e7?s=128&d=identicon&r=PG&f=1", "display_name": "Darko Rodic", "link": "https://stackoverflow.com/users/1341008/darko-rodic"}, "edited": false, "score": 0, "creation_date": 1427285567, "post_id": 29242043, "comment_id": 46713417, "body": "@DarkoRodic Which hook do you test: pre-commit or post-commit? Stderr output of post-commit hook marshalled to client only if it returns non-zero error code."}, {"owner": {"reputation": 995, "user_id": 1341008, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/3c7c817e70d04ad9cbded8f4e15d99e7?s=128&d=identicon&r=PG&f=1", "display_name": "Darko Rodic", "link": "https://stackoverflow.com/users/1341008/darko-rodic"}, "edited": false, "score": 0, "creation_date": 1427292149, "post_id": 29242043, "comment_id": 46718173, "body": "I have added new edit in my question. oh yes, thank you for trying man, I am really confused with this"}, {"owner": {"reputation": 4057, "user_id": 89432, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cab853284719020f2c0a1961a51a81ea?s=128&d=identicon&r=PG", "display_name": "Ivan Zhakov", "link": "https://stackoverflow.com/users/89432/ivan-zhakov"}, "reply_to_user": {"reputation": 995, "user_id": 1341008, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/3c7c817e70d04ad9cbded8f4e15d99e7?s=128&d=identicon&r=PG&f=1", "display_name": "Darko Rodic", "link": "https://stackoverflow.com/users/1341008/darko-rodic"}, "edited": false, "score": 2, "creation_date": 1427305333, "post_id": 29242043, "comment_id": 46727410, "body": "@DarkoRodic Just replace <code>-t</code> option with <code>-r</code> when invoking svnlook."}], "tags": [], "owner": {"reputation": 4057, "user_id": 89432, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cab853284719020f2c0a1961a51a81ea?s=128&d=identicon&r=PG", "display_name": "Ivan Zhakov", "link": "https://stackoverflow.com/users/89432/ivan-zhakov"}, "is_accepted": false, "score": 1, "last_activity_date": 1427228175, "creation_date": 1427228175, "answer_id": 29242043, "question_id": 29236308, "link": "https://stackoverflow.com/questions/29236308/how-to-print-arguments-in-svn-hook/29242043#29242043", "title": "How to print arguments in SVN hook", "body": "<p>Subversion displays to user hook output only if post-commit hook returns non-zero result.</p>\n\n<p>Try to replace <code>exit(0);</code> with <code>exit(1);</code></p>\n\n<p>Also <code>post-commit</code> hook accepts <code>revision number</code> not <code>transaction name</code> since transaction is already committed at this point. Are you sure that you setting <code>post-commit</code> hook and not <code>pre-commit</code>?</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 4626948, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/48fe9190c857668ec782b2b12a3381d6?s=128&d=identicon&r=PG&f=1", "display_name": "morten bjoernsvik", "link": "https://stackoverflow.com/users/4626948/morten-bjoernsvik"}, "is_accepted": false, "score": 0, "last_activity_date": 1434118101, "creation_date": 1434118101, "answer_id": 30805101, "question_id": 29236308, "link": "https://stackoverflow.com/questions/29236308/how-to-print-arguments-in-svn-hook/30805101#30805101", "title": "How to print arguments in SVN hook", "body": "<p>If you use STDERR instead of STDOUT it outputs:</p>\n\n<pre><code>$ svn commit tull -m \"testdir\"\nAdding         tull\nsvn: E165001: Commit failed (details follow):\nsvn: E165001: Commit blocked by pre-commit hook (exit code 1) with output:\nDebug: repos:'C:\\Repositories\\BuyPass-LRA' transaction:'7173-5jh'\n</code></pre>\n"}], "owner": {"reputation": 995, "user_id": 1341008, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/3c7c817e70d04ad9cbded8f4e15d99e7?s=128&d=identicon&r=PG&f=1", "display_name": "Darko Rodic", "link": "https://stackoverflow.com/users/1341008/darko-rodic"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1220, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1434118101, "creation_date": 1427210135, "last_edit_date": 1427292085, "question_id": 29236308, "link": "https://stackoverflow.com/questions/29236308/how-to-print-arguments-in-svn-hook", "title": "How to print arguments in SVN hook", "body": "<p>I am using windows7 and VisualSVN Server.\nI have wrote simple SVN post-commit hook which looks like</p>\n\n<pre><code>C:\\Perl64\\bin\\perl C:\\repositories\\secret-project\\hooks\\myhook.pl %1 %2\n</code></pre>\n\n<p>and myhook.pl script looks like</p>\n\n<pre><code>$svnlook = '\"C:\\Program Files\\VisualSVN Server\\bin\\svnlook.exe\"';\n\n$repos = $ARGV[0];\n$txn = $ARGV[1];\n\n$msg = `$svnlook changed -t \"$txn\" \"$repos\"`;\nchomp($msg);\n\nprint STDOUT $repos . \" \" . $txn;\nprint STDOUT $msg;\n\nexit(0);\n</code></pre>\n\n<p>so basically I just want for now to print changed files. \nCommit goes through with no errors, but I am not seeing anything printed when I go through TortoiseSVN or when I commit through cmd. \nSo is it printed at all and if so where is it? \nI also tried to write it in txt file but with no success, what am I missing here? :(</p>\n\n<p>EDIT:</p>\n\n<p>per ikegami's comment, yes the code is running.</p>\n\n<p>I also wrote other sample of script, where I am trying to write something in txt file and send data to small test service I created.</p>\n\n<pre><code>$svnlook = '\"C:\\Program Files\\VisualSVN Server\\bin\\svnlook.exe\"';\n\n$repos = $ARGV[0];\n$txn = $ARGV[1];\n\n#--------------------------------------------\nuse LWP::UserAgent;\nmy $ua = LWP::UserAgent-&gt;new;\nmy $server_endpoint = \"http://localhost:1337/test\";\n\n$msg = `$svnlook changed -t \"$txn\" \"$repos\"`;\nchomp($msg);\nopen(my $fh, '&gt;', 'report.txt');\nprint $fh $msg;\nclose $fh;\nprint STDOUT \"done\\n\";\n\n# set custom HTTP request header fields\nmy $req = HTTP::Request-&gt;new(POST =&gt; $server_endpoint);\n$req-&gt;header('content-type' =&gt; 'application/json');\n\n# add POST data to HTTP request body\nmy $post_data = '{\"$txn\":\"' . $txn .'\"}';\nprint STDOUT $post_data;\n$req-&gt;content($post_data);\n\nmy $resp = $ua-&gt;request($req);\nif ($resp-&gt;is_success) {\n    my $message = $resp-&gt;decoded_content;\n    print STDOUT \"Received reply: $message\\n\";\n}\nelse {\n    print STDERR \"HTTP POST error code: \", $resp-&gt;code, \"\\n\";\n    print STDERR \"HTTP POST error message: \", $resp-&gt;message, \"\\n\";\n}\n\nexit(0);\n</code></pre>\n\n<p>Now I am sending <code>$txn</code> to service I made and I can print it, but when I try to send <code>$repos</code> I get error on my service, <code>Syntax error: unexpected token R</code></p>\n\n<p>How does <code>$repos</code> look like? Maybe I need to parse it somehow before printing or sending to my service?</p>\n\n<p>EDIT 2:</p>\n\n<pre><code>$svnlook = '\"C:\\Program Files\\VisualSVN Server\\bin\\svnlook.exe\"';\n\n$repos = $ARGV[0];\n$txn = $ARGV[1];\n\nprint STDOUT \"repos:\" . $repos . \"rev:\" . $txn;\n\n#--------------------------------------------\nuse LWP::UserAgent;\nmy $ua = LWP::UserAgent-&gt;new;\nmy $server_endpoint = \"http://localhost:1337/test\";\n\n$msg = `$svnlook changed -t \"$txn\" \"$repos\"`;\nchomp($msg);\nchomp($reply);\n\nif (length($repos) == 0)\n{\nprint STDERR \"my error, repos = 0\";\nexit(1);\n}\n\nif ( length($msg) == 0 )\n{\nprint STDERR \"my error, msg = 0\";\nexit(1);\n}\n\nopen(my $fh, '&gt;', 'report.txt');\nprint $fh $msg;\nclose $fh;\nprint STDOUT \"done\\n\";\n\n# set custom HTTP request header fields\nmy $req = HTTP::Request-&gt;new(POST =&gt; $server_endpoint);\n$req-&gt;header('content-type' =&gt; 'application/json');\n\n# add POST data to HTTP request body\nmy $post_data = '{\"$txn\":\"' . $txn .'\"}';\nprint $post_data;\n$req-&gt;content($post_data);\n\nmy $resp = $ua-&gt;request($req);\nif ($resp-&gt;is_success) {\n    my $message = $resp-&gt;decoded_content;\n    print \"Received reply: $message\\n\";\n}\nelse {\n    print ST \"HTTP POST error code: \", $resp-&gt;code, \"\\n\";\n    print \"HTTP POST error message: \", $resp-&gt;message, \"\\n\";\n}\n\nexit(0);\n</code></pre>\n\n<p>So I added printing of arguments at the begining, checking if length of <code>$repos</code> equals 0 and if <code>$msg</code> equals 0</p>\n\n<p>and in console I only get</p>\n\n<pre><code>svnlook: E160007: No such transaction '85'\nmy error, msg = 0\n</code></pre>\n\n<p>It is an post-commit hook</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 141, "user_id": 4097244, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f178b6040f6d39295fefaf21edf0c448?s=128&d=identicon&r=PG&f=1", "display_name": "BrianB", "link": "https://stackoverflow.com/users/4097244/brianb"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1427222168, "post_id": 29235722, "comment_id": 46686786, "body": "I will update the syntax with the table creation"}, {"owner": {"reputation": 141, "user_id": 4097244, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f178b6040f6d39295fefaf21edf0c448?s=128&d=identicon&r=PG&f=1", "display_name": "BrianB", "link": "https://stackoverflow.com/users/4097244/brianb"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1427234328, "post_id": 29235722, "comment_id": 46693263, "body": "I did ask request but I&#39;ve been downgraded to -3"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1427252849, "post_id": 29235722, "comment_id": 46698770, "body": "Don&#39;t replace questions with new questions, and don&#39;t be surprises when arbitrarily removing quotes, adding slashes and moving parens breaks your code. Reverted the edit to restore your question."}], "answers": [{"comments": [{"owner": {"reputation": 141, "user_id": 4097244, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f178b6040f6d39295fefaf21edf0c448?s=128&d=identicon&r=PG&f=1", "display_name": "BrianB", "link": "https://stackoverflow.com/users/4097244/brianb"}, "edited": false, "score": 0, "creation_date": 1427236702, "post_id": 29243859, "comment_id": 46694230, "body": "Thanks your help is much appreciated.  I will apply the syntax and report back."}, {"owner": {"reputation": 141, "user_id": 4097244, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f178b6040f6d39295fefaf21edf0c448?s=128&d=identicon&r=PG&f=1", "display_name": "BrianB", "link": "https://stackoverflow.com/users/4097244/brianb"}, "edited": false, "score": 0, "creation_date": 1427250324, "post_id": 29243859, "comment_id": 46698142, "body": "DBD::mysql::db do failed: ~~ near &#39;\\@sumadd5 = ( SELECT <code>i24</code> FROM humid WHERE temp = &#39;30&#39;)     SEE UPDATED SYNTAX IN QUESTION"}, {"owner": {"reputation": 141, "user_id": 4097244, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f178b6040f6d39295fefaf21edf0c448?s=128&d=identicon&r=PG&f=1", "display_name": "BrianB", "link": "https://stackoverflow.com/users/4097244/brianb"}, "edited": false, "score": 0, "creation_date": 1427250788, "post_id": 29243859, "comment_id": 46698258, "body": "I  no longer need &quot;\\&quot; as a Mysql variable...  I will remove it"}, {"owner": {"reputation": 141, "user_id": 4097244, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f178b6040f6d39295fefaf21edf0c448?s=128&d=identicon&r=PG&f=1", "display_name": "BrianB", "link": "https://stackoverflow.com/users/4097244/brianb"}, "edited": false, "score": 0, "creation_date": 1427251652, "post_id": 29243859, "comment_id": 46698454, "body": "THE ABOVE SYNTAX PRODUCES THE FOLLOWING ERROR     ***DBD::mysql::db do failed: ~~ WHERE time= &#39;03:00:00&#39;&#39; AND  Use of uninitialized value $sumadd in concatenation (.) or string  ***  I AM GOING TO TRY THE &#39;...&#39;"}, {"owner": {"reputation": 141, "user_id": 4097244, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f178b6040f6d39295fefaf21edf0c448?s=128&d=identicon&r=PG&f=1", "display_name": "BrianB", "link": "https://stackoverflow.com/users/4097244/brianb"}, "edited": false, "score": 0, "creation_date": 1427251903, "post_id": 29243859, "comment_id": 46698510, "body": "I only added the &quot;\\&quot; but I removed it."}, {"owner": {"reputation": 141, "user_id": 4097244, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f178b6040f6d39295fefaf21edf0c448?s=128&d=identicon&r=PG&f=1", "display_name": "BrianB", "link": "https://stackoverflow.com/users/4097244/brianb"}, "edited": false, "score": 0, "creation_date": 1427253331, "post_id": 29243859, "comment_id": 46698902, "body": "OK IT WORKS!!!!   I had /@sumadd5 when it should have been \\@sumadd5  change it to \\ fixed the issue."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 0, "last_activity_date": 1427293009, "last_edit_date": 1427293009, "creation_date": 1427235137, "answer_id": 29243859, "question_id": 29235722, "link": "https://stackoverflow.com/questions/29235722/how-to-perl-placeholder-variable-for-a-dbd-mysql/29243859#29243859", "title": "How to Perl Placeholder Variable for a DBD Mysql", "body": "<h2>Problem #1</h2>\n\n<p>You never execute the statement you prepare. Use</p>\n\n<pre><code>my $sth = $dbh-&gt;prepare(q{...});\n$sth-&gt;bind_param(1, $inter1); \n$sth-&gt;execute();               &lt;---\n$sth-&gt;finish();\n</code></pre>\n\n<p>Shortcut #1:</p>\n\n<pre><code>my $sth = $dbh-&gt;prepare(q{...});\n$sth-&gt;execute($inter1);\n$sth-&gt;finish();\n</code></pre>\n\n<p>Shortcut #2:</p>\n\n<pre><code>$dbh-&gt;do(\n   q{...},\n   undef,\n   $inter1,\n);\n</code></pre>\n\n<h2>Problem #2</h2>\n\n<pre><code>SELECT ? ...\n</code></pre>\n\n<p>behaves as if you had done</p>\n\n<pre><code>SELECT \"i24\" ...     // As opposed to: SELECT i24 ...\n</code></pre>\n\n<p>just like</p>\n\n<pre><code>SELECT time ...\n</code></pre>\n\n<p>behaves as if you had done</p>\n\n<pre><code>SELECT '03:00:00' ...`\n</code></pre>\n\n<p>You can't build the SQL statement you are executing. You need to build it before you execute it. Use</p>\n\n<pre><code>$dbh-&gt;do(q{\n   SET @sumadd5 = (\n      SELECT }.( $dbh-&gt;quote_identifier($inter1) ).q{\n        FROM humid\n       WHERE temp = '30'\n   )\n});\n</code></pre>\n"}], "owner": {"reputation": 141, "user_id": 4097244, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f178b6040f6d39295fefaf21edf0c448?s=128&d=identicon&r=PG&f=1", "display_name": "BrianB", "link": "https://stackoverflow.com/users/4097244/brianb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 414, "favorite_count": 0, "accepted_answer_id": 29243859, "answer_count": 1, "score": -2, "last_activity_date": 1598211381, "creation_date": 1427208617, "last_edit_date": 1598211381, "question_id": 29235722, "link": "https://stackoverflow.com/questions/29235722/how-to-perl-placeholder-variable-for-a-dbd-mysql", "title": "How to Perl Placeholder Variable for a DBD Mysql", "body": "<p>I recently had some help with dbi and using placeholders in Perl for Mysql queries. However I am having an issue when using multiple statements for the previously declared or prepared variable in the dbi script.</p>\n<p>Code:</p>\n<pre><code>use strict;\nuse warnings;\nuse DBI qw(:sql_types);\n\nmy $dbh = DBI-&gt;connect(&quot;DBI:mysql:...&quot;, ...);\n\n## TABLE CREATION\n$dbh-&gt;do(&quot;USE test;&quot;)\n$dbh-&gt;do(&quot;CREATE TEMPORARY TABLE day5 (id INT, temp VARCHAR(4), time TIME, sumadd INT(11))&quot;);\n$dbh-&gt;do(&quot;CREATE TEMPORARY TABLE humid (temp VARCHAR(4), i24 INT (10))&quot;);   \n$dbh-&gt;do(&quot;INSERT INTO day5 (id,temp,time) VALUES(1,'30','03:00:00') &quot;);\n$dbh-&gt;do(&quot;INSERT INTO humid (temp,i24) VALUES('30',8321) &quot;);\n\n## FAILING CODE\nmy $inter1 = 'i24';  # Generated value\nmy $sth = $dbh-&gt;prepare(&quot;SET \\@sumadd5 = (SELECT ? FROM humid WHERE temp ='30') &quot;);\n$sth-&gt;bind_param( 1, $inter1 ); \n$sth-&gt;finish();\n$dbh-&gt;do(&quot;UPDATE day5 SET sumadd= (SELECT \\@sumadd5) WHERE time= '03:00:00' &quot;);\n\nmy $sumadd = $dbh-&gt;selectrow_array(&quot;SELECT sumadd FROM day5&quot;);\nprint &quot;$sumadd\\n&quot;;\n\n$dbh-&gt;disconnect();\n</code></pre>\n<p><code>$sumadd</code> is undefined, but I expect <code>8321</code>.</p>\n<p>My question is how can I make it so the @sumadd5 variable can be inserted into the above query [UPDATE day5 SET sumadd=]?  I have added some remarks in the syntax in the spirit of clarity.</p>\n<p>IF I RUN MANUALLY BY APPLYING THE SYNTAX INTO MYSQL REMOVING PERL SPECIFICS MY TABLE UPDATE.  IF I RUN THE SCRIPT NOTHING HAPPENS TO THE TABLE AND NO ERRORS ARE DISPLAYED.</p>\n<p>I suspect that the break is with the UPDATE, however I can't confirm the $inter1 is being passed to the placeholder.</p>\n"}, {"tags": ["xml", "json", "perl"], "answers": [{"comments": [{"owner": {"reputation": 905, "user_id": 1188611, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/67b60365e971b8b9cf5f0b901868bfd7?s=128&d=identicon&r=PG", "display_name": "user1188611", "link": "https://stackoverflow.com/users/1188611/user1188611"}, "edited": false, "score": 0, "creation_date": 1427209142, "post_id": 29235844, "comment_id": 46677925, "body": "can you please explain what this code is doing, few comments in code should be helpful."}, {"owner": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "reply_to_user": {"reputation": 905, "user_id": 1188611, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/67b60365e971b8b9cf5f0b901868bfd7?s=128&d=identicon&r=PG", "display_name": "user1188611", "link": "https://stackoverflow.com/users/1188611/user1188611"}, "edited": false, "score": 0, "creation_date": 1427210224, "post_id": 29235844, "comment_id": 46678758, "body": "@user1188611 read it out loud. This code does not need any comments."}, {"owner": {"reputation": 905, "user_id": 1188611, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/67b60365e971b8b9cf5f0b901868bfd7?s=128&d=identicon&r=PG", "display_name": "user1188611", "link": "https://stackoverflow.com/users/1188611/user1188611"}, "edited": false, "score": 0, "creation_date": 1427210566, "post_id": 29235844, "comment_id": 46679036, "body": "yes sorry it was obvious code, by comment i meant to say how i can integrate it in  my use case. I am a sophomore in coding ( not much coding background ) so asked this, let me try to integrate it. Thanks"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1427212029, "post_id": 29235844, "comment_id": 46680138, "body": "Change <code>lc</code> to <code>lcfirst</code>."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1427226632, "post_id": 29235844, "comment_id": 46689225, "body": "Fixed a bug in my answer."}, {"owner": {"reputation": 905, "user_id": 1188611, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/67b60365e971b8b9cf5f0b901868bfd7?s=128&d=identicon&r=PG", "display_name": "user1188611", "link": "https://stackoverflow.com/users/1188611/user1188611"}, "edited": false, "score": 0, "creation_date": 1427226998, "post_id": 29235844, "comment_id": 46689436, "body": "@ikegami: one quick question how will you handle the condition when i want few specific element to be lower case and few to be camel case... i tried creating two hash one for list of lower case tags and for list of camel case tags and based on match do corresponding operation... That seemed to be not working, any pointers... Updated the question to have an example"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1427230011, "post_id": 29235844, "comment_id": 46691110, "body": "Re &quot;i am not asking to give me solution directed integrated&quot;, I already did anyway. Just add <code>fix($data);</code> before <code>encode_json($data)</code>."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1427230190, "post_id": 29235844, "comment_id": 46691207, "body": "<code>@$</code> makes no sense. <code>@$arg{@new_keys}</code> is a hash slice. It&#39;s the slice (values) of the hash referenced by <code>$arg</code> with the keys <code>@new_keys</code>. It&#39;s the same as <code>($arg-&gt;{$new_keys[0]}, $arg-&gt;{$new_keys[1]}, ...)</code>. As you noticed that part of the code never changed in any of your tweaks. The mapping of old keys to new keys is performed by <code>pairmap</code>/<code>map</code>&#39;s <code>BLOCK</code>."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 1, "last_activity_date": 1427228125, "last_edit_date": 1427228125, "creation_date": 1427208945, "answer_id": 29235844, "question_id": 29235469, "link": "https://stackoverflow.com/questions/29235469/converting-the-tag-names-in-json-to-follow-camelcase-notation/29235844#29235844", "title": "converting the tag names in JSON to follow CamelCase notation", "body": "<pre><code>use List::Util 1.29 qw( pairmap );\n\nmy %override = map { fc($_) =&gt; $_ } qw( maxSize fileName );\n\nsub fix {\n   my ($arg) = @_;\n\n   defined($arg)\n      or return;\n\n   my $reftype = ref($arg)\n      or return;\n\n   if ($reftype eq 'ARRAY') {\n      fix($_) for @$arg;\n   }\n   elsif ($reftype eq 'HASH') {\n      %$arg = pairmap { $override{fc($a)} // lc($a), $b } %$arg;\n\n      fix($_) for values(%$arg);\n   }\n}\n\nmy $data = { Person =&gt; { ... } };\nfix($data);\n</code></pre>\n\n<hr>\n\n<p>For backwards compatibility, you can replace</p>\n\n<pre><code>use List::Util 1.29 qw( pairmap );\n\nmy %override = map { fc($_) =&gt; $_ } qw( maxSize fileName );\n\n%$arg = pairmap { $override{fc($a)} // lc($a), $b } %$arg;\n</code></pre>\n\n<p>with</p>\n\n<pre><code>my %override = map { lc($_) =&gt; $_ } qw( maxSize fileName );\n\nmy @old_keys = keys(%$arg);\nmy @new_keys = map { $override{lc($_)} || lc($_) } @old_keys;\n@$arg{@new_keys} = delete( @$arg{@old_keys} );\n</code></pre>\n"}], "owner": {"reputation": 905, "user_id": 1188611, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/67b60365e971b8b9cf5f0b901868bfd7?s=128&d=identicon&r=PG", "display_name": "user1188611", "link": "https://stackoverflow.com/users/1188611/user1188611"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 303, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1427228125, "creation_date": 1427207991, "last_edit_date": 1427227777, "question_id": 29235469, "link": "https://stackoverflow.com/questions/29235469/converting-the-tag-names-in-json-to-follow-camelcase-notation", "title": "converting the tag names in JSON to follow CamelCase notation", "body": "<p>I am having a JSON like following :</p>\n\n<pre><code>{\n    \"Person\": {\n       \"IDCountry\": \"0\", \n       \"Home\": {\n          \"ID\": \"ABC-XYZ\", \n           \"Laptop\": {\n             \"FileName\": \"/usr/temp/RPM_020515_.tar.gz\",\n             \"Key\": \"123456789\"\n           }, \n\n          \"Location\": {\n              \"Number\": \"62\", \n              \"MaxSize\": \"0\"\n           }, \n        }\n    }\n }\n</code></pre>\n\n<p>This JSON is getting generated from some separate method from an XML file in perl using following code:</p>\n\n<pre><code>    #!/usr/bin/perl\n    use strict;\n    use warnings;\n    use JSON;\n    use XML::Simple;\n    use XML::LibXML;\n    # Create the object of XML Simple\n    my $xmlSimple = new XML::Simple(KeepRoot   =&gt; 1);\n\n    # Load the xml file in object\n    my $dataXML = eval { $xmlSimple-&gt;XMLin($xmlFileName)};\n\n    # use encode json function to convert xml object in json.\n    my $jsonString = eval { encode_json($dataXML) };\n\n    print $jsonString;\n</code></pre>\n\n<p>Everything is working fine here. But i want to get the output JSON tag names as all lower case. That is i want my output like this.</p>\n\n<pre><code> {\n    \"person\": {\n       \"idCountry\": \"0\", \n       \"home\": {\n          \"id\": \"ABC-XYZ\", \n           \"laptop\": {\n             \"fileName\": \"/usr/temp/RPM_020515_.tar.gz\",\n             \"key\": \"123456789\"\n           }, \n\n          \"location\": {\n              \"number\": \"62\", \n              \"maxSize\": \"0\"\n           }, \n        }\n    }\n }\n</code></pre>\n\n<p>My current output JSON tags has same name as the name of elements in the xml file from which it is being generated. </p>\n\n<p>How can i make change in my current perl script to have the tags in json all following  camel case notations.</p>\n\n<p>Thanks.</p>\n\n<p>JSON for case when we want to handle condition that specific element gets lower case and specific element gets camel case.</p>\n\n<pre><code> {\n    \"person\": {\n       \"idcountry\": \"0\", \n       \"home\": {\n          \"id\": \"ABC-XYZ\", \n           \"laptop\": {\n             \"fileName\": \"/usr/temp/RPM_020515_.tar.gz\",\n             \"key\": \"123456789\"\n           }, \n\n          \"location\": {\n              \"number\": \"62\", \n              \"maxSize\": \"0\"\n           }, \n        }\n    }\n }\n</code></pre>\n\n<p>If you will see maxSize and fileName are following camelCase convention but all other tags got lower case. </p>\n\n<p>That is we have two list :</p>\n\n<p>{ FileName, MaxSize } these gets converted following came case whereas \n{ Person, IDCountry, Home, ID, Laptop, Key, Location, Number } all gets converted into lower case.</p>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 61610, "user_id": 725418, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/82ac2dc3e1ad4b7187f245c416528df9?s=128&d=identicon&r=PG", "display_name": "TLP", "link": "https://stackoverflow.com/users/725418/tlp"}, "edited": false, "score": 0, "creation_date": 1427207211, "post_id": 29234874, "comment_id": 46676403, "body": "You might be better off using the <code>index</code> function if you are not going to apply any regex meta characters."}], "answers": [{"tags": [], "owner": {"reputation": 658023, "user_id": 548225, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/dab08478b226280d4a30894c9a7ed719?s=128&d=identicon&r=PG", "display_name": "anubhava", "link": "https://stackoverflow.com/users/548225/anubhava"}, "is_accepted": true, "score": 2, "last_activity_date": 1427207108, "last_edit_date": 1427207108, "creation_date": 1427206828, "answer_id": 29235050, "question_id": 29234874, "link": "https://stackoverflow.com/questions/29234874/perl-regular-expression-to-match-special-characters/29235050#29235050", "title": "Perl Regular Expression to match special characters", "body": "<p>Use <code>quotemeta($text)</code> or <code>\\Q$text\\E</code> (inside double quotes or a regex literal) to create a pattern that matches the value of <code>$text</code>. In other words, use</p>\n\n<pre><code>if ($location =~ /^\\Q$_\\E/)\n</code></pre>\n\n<p>instead of:</p>\n\n<pre><code>if ($location =~ /^$_/)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 61610, "user_id": 725418, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/82ac2dc3e1ad4b7187f245c416528df9?s=128&d=identicon&r=PG", "display_name": "TLP", "link": "https://stackoverflow.com/users/725418/tlp"}, "edited": false, "score": 2, "creation_date": 1427207101, "post_id": 29235113, "comment_id": 46676325, "body": "You don&#39;t need to use <code>scalar</code> there, as the expression is already in scalar context. Nor do you need to use the ternary operator."}, {"owner": {"reputation": 30275, "user_id": 4272464, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4fa45261dec56004145c653832504920?s=128&d=identicon&r=PG&f=1", "display_name": "bgoldst", "link": "https://stackoverflow.com/users/4272464/bgoldst"}, "reply_to_user": {"reputation": 61610, "user_id": 725418, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/82ac2dc3e1ad4b7187f245c416528df9?s=128&d=identicon&r=PG", "display_name": "TLP", "link": "https://stackoverflow.com/users/725418/tlp"}, "edited": false, "score": 0, "creation_date": 1427207326, "post_id": 29235113, "comment_id": 46676485, "body": "@TLP, that&#39;s true, but two things: (1) I usually like to be explicit about scalar vs. array context. The Perl context distinction causes a lot of confusion for many people, and I&#39;d even argue it&#39;s a detrimental feature of the language for that reason, and (2) I used the ternary operator because the OP stored 0 and 1 in <code>$badpath</code>, so I wanted to do the same (again, explicitly)."}, {"owner": {"reputation": 30275, "user_id": 4272464, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4fa45261dec56004145c653832504920?s=128&d=identicon&r=PG&f=1", "display_name": "bgoldst", "link": "https://stackoverflow.com/users/4272464/bgoldst"}, "reply_to_user": {"reputation": 61610, "user_id": 725418, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/82ac2dc3e1ad4b7187f245c416528df9?s=128&d=identicon&r=PG", "display_name": "TLP", "link": "https://stackoverflow.com/users/725418/tlp"}, "edited": false, "score": 0, "creation_date": 1427208820, "post_id": 29235113, "comment_id": 46677694, "body": "There, I modified the code to be even <i>more</i> explicit, by specifying the <code>&gt;= 1</code> test that clarifies what happens on the LHS of the ternary operator. A lot of Perl programmers seem to be anti-explicit and pro-crytic, so they&#39;ll hate that, but screw that, it&#39;s better to be clearer than not."}, {"owner": {"reputation": 61610, "user_id": 725418, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/82ac2dc3e1ad4b7187f245c416528df9?s=128&d=identicon&r=PG", "display_name": "TLP", "link": "https://stackoverflow.com/users/725418/tlp"}, "edited": false, "score": 1, "creation_date": 1427209626, "post_id": 29235113, "comment_id": 46678305, "body": "I don&#39;t think it is actually any more clear when stated &quot;explicitly&quot;, like you say. If someone does not know about scalar context, they will not understand the use of <code>scalar</code> either. It is not a transparent way to get a count. And you are also stacking expressions on one line. I would use an array, e.g. <code>my @count = grep ...; my $badpath = 0 # default; $badpath = 1 if @count &gt;=1;</code>"}, {"owner": {"reputation": 30275, "user_id": 4272464, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4fa45261dec56004145c653832504920?s=128&d=identicon&r=PG&f=1", "display_name": "bgoldst", "link": "https://stackoverflow.com/users/4272464/bgoldst"}, "reply_to_user": {"reputation": 61610, "user_id": 725418, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/82ac2dc3e1ad4b7187f245c416528df9?s=128&d=identicon&r=PG", "display_name": "TLP", "link": "https://stackoverflow.com/users/725418/tlp"}, "edited": false, "score": 0, "creation_date": 1427209939, "post_id": 29235113, "comment_id": 46678556, "body": "Good! We agree that the use of <code>scalar()</code> to get an array&#39;s length is cryptic. But we don&#39;t really have a choice; scalar context is the way to get an array&#39;s length in Perl."}, {"owner": {"reputation": 61610, "user_id": 725418, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/82ac2dc3e1ad4b7187f245c416528df9?s=128&d=identicon&r=PG", "display_name": "TLP", "link": "https://stackoverflow.com/users/725418/tlp"}, "edited": false, "score": 0, "creation_date": 1427210020, "post_id": 29235113, "comment_id": 46678614, "body": "As for context, like everything else, it is easy once you know about it. And very useful for quickly writing code, e.g. <code>if (@count &gt;= 1)</code> would not be possible to write without context dependence. I am very fond of it myself, as it allows freedom and variation when writing code. When I dabble in php, I often find myself very constricted."}, {"owner": {"reputation": 61610, "user_id": 725418, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/82ac2dc3e1ad4b7187f245c416528df9?s=128&d=identicon&r=PG", "display_name": "TLP", "link": "https://stackoverflow.com/users/725418/tlp"}, "edited": false, "score": 0, "creation_date": 1427210186, "post_id": 29235113, "comment_id": 46678731, "body": "Yes, unless you know how to get an array&#39;s length in Perl, it does not make sense. But once you know that an array in scalar context returns its length, it is quite easy. So one can write it in a more legible way like that. You could even do something like <code>my $array_length = @count</code> and provide self-documenting names."}, {"owner": {"reputation": 61610, "user_id": 725418, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/82ac2dc3e1ad4b7187f245c416528df9?s=128&d=identicon&r=PG", "display_name": "TLP", "link": "https://stackoverflow.com/users/725418/tlp"}, "edited": false, "score": 0, "creation_date": 1427210346, "post_id": 29235113, "comment_id": 46678849, "body": "Well, we do have choices, that&#39;s why TIMTOWTDI :) You can loop: <code>for (@array) { $length++ }</code>, or use the max index variable: <code>$length = $#array + 1</code>."}], "tags": [], "owner": {"reputation": 30275, "user_id": 4272464, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4fa45261dec56004145c653832504920?s=128&d=identicon&r=PG&f=1", "display_name": "bgoldst", "link": "https://stackoverflow.com/users/4272464/bgoldst"}, "is_accepted": false, "score": 0, "last_activity_date": 1427208469, "last_edit_date": 1427208469, "creation_date": 1427207007, "answer_id": 29235113, "question_id": 29234874, "link": "https://stackoverflow.com/questions/29234874/perl-regular-expression-to-match-special-characters/29235113#29235113", "title": "Perl Regular Expression to match special characters", "body": "<ul>\n<li><p>It looks like you intend to define your exclusions by regex, but you have not escaped regex metachars properly in those regexes. For your failing case, the metachar causing it to fail is the plus (<code>+</code>), which is a one-or-more multiplier in most regex flavors (including Perl), but you need to match it literally.</p></li>\n<li><p>Also, I'd recommend moving the <code>^</code> anchor from the loop to each individual regex, which would make the code more flexible, in that you could choose not to anchor some of the exclusion regexes if you wanted.</p></li>\n<li><p>Also, you should use the <a href=\"http://perldoc.perl.org/functions/qr.html\" rel=\"nofollow\"><code>qr()</code></a> construct, which allows you to precompile regexes, saving on CPU.</p></li>\n<li><p>Also, this requirement is a good candidate for using <a href=\"http://perldoc.perl.org/functions/grep.html\" rel=\"nofollow\"><code>grep()</code></a>.</p></li>\n</ul>\n\n<hr>\n\n<pre><code>use strict;\nuse warnings;\n\nmy @excluded = (\n    qr(^xyz/efg/headers/),\n    qr(^abc/def/libraries/jni-mr\\.h),\n    qr(^abc/def/libraries/linux_3\\.2\\.60-1\\+deb7u3\\.dsc),\n);\n\nmy $location = 'abc/def/libraries/linux_3.2.60-1+deb7u3.dsc';\n\n# -- Check if location is contained in excluded array\nmy $badpath = scalar(grep($location =~ $_, @excluded )) &gt;= 1 ? 1 : 0;\nif ($badpath) {\n    print \"location is excluded : $location \\n\";\n} else {\n    print \"location is not excluded : $location \\n\";\n}\n</code></pre>\n"}], "owner": {"reputation": 1535, "user_id": 2175642, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/438be96ab62abdf3194b7b1b0f85507b?s=128&d=identicon&r=PG", "display_name": "Jill448", "link": "https://stackoverflow.com/users/2175642/jill448"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 805, "favorite_count": 0, "accepted_answer_id": 29235050, "answer_count": 2, "score": 2, "last_activity_date": 1427208469, "creation_date": 1427206326, "question_id": 29234874, "link": "https://stackoverflow.com/questions/29234874/perl-regular-expression-to-match-special-characters", "title": "Perl Regular Expression to match special characters", "body": "<p>I have the below code in which I am checking for a specific variable location in an array excluded.It works fine with all the array elements except one (abc/def/libraries/linux_3.2.60-1+deb7u3.dsc). When I provide this element as my location its printing \"location not excluded\" , even though its excluded.</p>\n\n<p>How can I made my code to get this element as well as excluded?</p>\n\n<pre><code>use strict;\nuse warnings;\n\nmy @excluded = (\n \"xyz/efg/headers/\",\n \"abc/def/libraries/jni-mr.h\",\n \"abc/def/libraries/linux_3.2.60-1+deb7u3.dsc\", \n);\n\nmy $location = \"abc/def/libraries/linux_3.2.60-1+deb7u3.dsc\";\nmy $badpath = 0;\n\nforeach (@excluded) {\n    # -- Check if location is contained in excluded array\n    if ($location =~ /^$_/) {\n       $badpath = 1;\n       print \"location is excluded : $location \\n\";\n     }\n   }\n\n   if (! $badpath) {\n      print \"location is not excluded : $location \\n\";  \n     }\n</code></pre>\n\n<p>Desired Output:</p>\n\n<pre><code>location is excluded : abc/def/libraries/linux_3.2.60-1+deb7u3.dsc\n</code></pre>\n\n<p>Current Output:</p>\n\n<pre><code>location is not excluded : abc/def/libraries/linux_3.2.60-1+deb7u3.dsc\n</code></pre>\n"}, {"tags": ["apache", "perl", "cgi"], "comments": [{"owner": {"reputation": 32630, "user_id": 1011527, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/950d56c466691980bba71859798bfe65?s=128&d=identicon&r=PG", "display_name": "Jay Blanchard", "link": "https://stackoverflow.com/users/1011527/jay-blanchard"}, "edited": false, "score": 0, "creation_date": 1427201886, "post_id": 29233193, "comment_id": 46672515, "body": "No PHP is required here and using PERL for web development has been covered in hundreds of online tutorials and dozens upon dozens of books."}, {"owner": {"reputation": 11, "user_id": 4622104, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/2501ff0ebb7051ac7fd44d37cf7f3545?s=128&d=identicon&r=PG&f=1", "display_name": "Bionerd", "link": "https://stackoverflow.com/users/4622104/bionerd"}, "reply_to_user": {"reputation": 32630, "user_id": 1011527, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/950d56c466691980bba71859798bfe65?s=128&d=identicon&r=PG", "display_name": "Jay Blanchard", "link": "https://stackoverflow.com/users/1011527/jay-blanchard"}, "edited": false, "score": 0, "creation_date": 1427202192, "post_id": 29233193, "comment_id": 46672744, "body": "Isn&#39;t it possible to run my perl code in a CGI perl script?"}, {"owner": {"reputation": 32630, "user_id": 1011527, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/950d56c466691980bba71859798bfe65?s=128&d=identicon&r=PG", "display_name": "Jay Blanchard", "link": "https://stackoverflow.com/users/1011527/jay-blanchard"}, "edited": false, "score": 0, "creation_date": 1427202270, "post_id": 29233193, "comment_id": 46672798, "body": "Of course it is. You just need to do a little reading to see how all of the pieces fit together."}, {"owner": {"reputation": 11, "user_id": 4622104, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/2501ff0ebb7051ac7fd44d37cf7f3545?s=128&d=identicon&r=PG&f=1", "display_name": "Bionerd", "link": "https://stackoverflow.com/users/4622104/bionerd"}, "reply_to_user": {"reputation": 32630, "user_id": 1011527, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/950d56c466691980bba71859798bfe65?s=128&d=identicon&r=PG", "display_name": "Jay Blanchard", "link": "https://stackoverflow.com/users/1011527/jay-blanchard"}, "edited": false, "score": 0, "creation_date": 1427202449, "post_id": 29233193, "comment_id": 46672932, "body": "I have goggled for this..but I found many of those..Can you please provide me an address where I can easily understand, as I came from biology I am wondering which one to choose that best serves me"}, {"owner": {"reputation": 32630, "user_id": 1011527, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/950d56c466691980bba71859798bfe65?s=128&d=identicon&r=PG", "display_name": "Jay Blanchard", "link": "https://stackoverflow.com/users/1011527/jay-blanchard"}, "edited": false, "score": 0, "creation_date": 1427202591, "post_id": 29233193, "comment_id": 46673021, "body": "I cannot tell you which will suit you best, just give you a <a href=\"http://www.perlmonks.org/?node_id=920554\" rel=\"nofollow noreferrer\">starting point</a>"}, {"owner": {"reputation": 2494, "user_id": 1921546, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/fe4ac75c43b846d9665f422cdac5cb03?s=128&d=identicon&r=PG", "display_name": "pii_ke", "link": "https://stackoverflow.com/users/1921546/pii-ke"}, "edited": false, "score": 1, "creation_date": 1427216395, "post_id": 29233193, "comment_id": 46683314, "body": "You have to read about HTML forms, Apache CGI configuration and generating HTML pages with perl (perhaps use CGI.pm). You need one HTML page that has a <code>&lt;form action=&quot;contacts.pl&quot;&gt;</code> element, you collect user input here. When user clicks submit, the web browser sends input data to web server. A CGI enabled server, runs the script specified in form&#39;s <code>action</code> attribute and passes this data to it. The script does what you want with the inputs, and generates a HTTP response that is sent to the browser as response to form submission. These are steps involved in dynamic content generation using CGI."}, {"owner": {"reputation": 11, "user_id": 4622104, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/2501ff0ebb7051ac7fd44d37cf7f3545?s=128&d=identicon&r=PG&f=1", "display_name": "Bionerd", "link": "https://stackoverflow.com/users/4622104/bionerd"}, "reply_to_user": {"reputation": 2494, "user_id": 1921546, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/fe4ac75c43b846d9665f422cdac5cb03?s=128&d=identicon&r=PG", "display_name": "pii_ke", "link": "https://stackoverflow.com/users/1921546/pii-ke"}, "edited": false, "score": 0, "creation_date": 1427310050, "post_id": 29233193, "comment_id": 46730479, "body": "@pii_ke thank you.. [<a href=\"http://stackoverflow.com/questions/11817809/steps-in-order-to-pass-data-from-html-form-to-perl-script]\" title=\"steps in order to pass data from html form to perl script%5d\">stackoverflow.com/questions/11817809/&hellip;</a> and some other gave me an idea. But when I run the uploading the file, the browser is directly showing the perl script as a text instead of the result of the file uploaded. I think passing the uploaded file to the perl script went wrong. Can you give me a hint to pass the file to cgi script as an array."}, {"owner": {"reputation": 2494, "user_id": 1921546, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/fe4ac75c43b846d9665f422cdac5cb03?s=128&d=identicon&r=PG", "display_name": "pii_ke", "link": "https://stackoverflow.com/users/1921546/pii-ke"}, "edited": false, "score": 0, "creation_date": 1427329143, "post_id": 29233193, "comment_id": 46739191, "body": "Perhaps you have not properly configured Apache to process your CGI program (<a href=\"http://httpd.apache.org/docs/2.2/howto/cgi.html#configuring\" rel=\"nofollow noreferrer\">httpd.apache.org/docs/2.2/howto/cgi.html#configuring</a>), or your CGI script is not marked executable (<code>chmod +x scriptfile.pl</code> )."}], "answers": [{"tags": [], "owner": {"reputation": 4514, "user_id": 4248931, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HijcJ.png?s=128&g=1", "display_name": "serenesat", "link": "https://stackoverflow.com/users/4248931/serenesat"}, "is_accepted": false, "score": 1, "last_activity_date": 1427204369, "creation_date": 1427204369, "answer_id": 29234170, "question_id": 29233193, "link": "https://stackoverflow.com/questions/29233193/run-perl-script-inside-cgi-script/29234170#29234170", "title": "Run perl script inside CGI script", "body": "<p>For a start you can get basic ideas from below links :</p>\n\n<p><a href=\"http://perlmaven.com/perl-cgi-script-with-apache2\" rel=\"nofollow\">Perl/CGI script with Apache2</a></p>\n\n<p><a href=\"http://www.perlmonks.org/?node_id=1030495\" rel=\"nofollow\">CGI script calling a perl script</a></p>\n\n<p><a href=\"http://www.lies.com/begperl/hello_cgi.html\" rel=\"nofollow\">First Perl CGI script</a></p>\n"}, {"tags": [], "owner": {"reputation": 31, "user_id": 397311, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/80f047d16ecdfe21769f1231a02b4339?s=128&d=identicon&r=PG", "display_name": "nfg", "link": "https://stackoverflow.com/users/397311/nfg"}, "is_accepted": false, "score": 2, "last_activity_date": 1427206404, "creation_date": 1427206404, "answer_id": 29234904, "question_id": 29233193, "link": "https://stackoverflow.com/questions/29233193/run-perl-script-inside-cgi-script/29234904#29234904", "title": "Run perl script inside CGI script", "body": "<p>I don't think I'd run everything through CGI. If I were you, I'd look at using a perl web framework to handle generating the webpages and (presumably) uploading files, and then call your existing code to parse the pdb files and get whatever you're interested in.</p>\n\n<p>Some popular frameworks:</p>\n\n<ul>\n<li>Mojolicious: <a href=\"http://mojolicio.us/\" rel=\"nofollow\">http://mojolicio.us/</a></li>\n<li>Dancer: <a href=\"http://perldancer.org/\" rel=\"nofollow\">http://perldancer.org/</a></li>\n</ul>\n\n<p>As for running the webserver, they should have deployment guides with instructions for apache. Or use another webserver like starman that can run perl webapps easily.</p>\n"}], "owner": {"reputation": 11, "user_id": 4622104, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/2501ff0ebb7051ac7fd44d37cf7f3545?s=128&d=identicon&r=PG&f=1", "display_name": "Bionerd", "link": "https://stackoverflow.com/users/4622104/bionerd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1248, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1427206404, "creation_date": 1427201640, "last_edit_date": 1427204844, "question_id": 29233193, "link": "https://stackoverflow.com/questions/29233193/run-perl-script-inside-cgi-script", "title": "Run perl script inside CGI script", "body": "<p>I am a newbie in Bioinformatics but I know perl scripting. I've written few scripts for parsing pdb files(protein crystal structure files). Now I want to run these in a web server. I have apache2 installed in my ubuntu. I have read something about the CGI and is in <code>/usr/lib/cgi-bin/</code> in local web server. I need to have all my perl scripts in that directory. These scripts takes input from command line <code>ex: perl contacts.pl pdbFile.pdb</code>.</p>\n\n<p>Now how can I run these scripts inside a perl CGI script so that the CGI script throws html page on the fly and asks for user input (this includes PHP I guess). At the end I should have a html page able to run my perl script (<code>contacts.pl</code>) upon user input. </p>\n\n<p>If its not possible to run my perl script in <code>html</code> web page, what is the other alternative?</p>\n\n<p>Any help will be greatly appreciated.</p>\n"}, {"tags": ["perl", "dependencies", "rt"], "comments": [{"owner": {"reputation": 7570, "user_id": 17945, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/e8cbc0b9ed29b027a127d8df309af5a6?s=128&d=identicon&r=PG", "display_name": "reinierpost", "link": "https://stackoverflow.com/users/17945/reinierpost"}, "edited": false, "score": 0, "creation_date": 1427196161, "post_id": 29229974, "comment_id": 46668848, "body": "There are many ways to install Perl and Perl modules; which way are you using here?"}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 2, "creation_date": 1427232756, "post_id": 29229974, "comment_id": 46692538, "body": "Did you try adding the <code>--install</code> flag? <code>&#47;usr&#47;bin&#47;perl .&#47;sbin&#47;rt-test-dependencies --verbose --with-mysql --with-fastcgi --install</code>"}], "answers": [{"tags": [], "owner": {"reputation": 110, "user_id": 4649367, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/655436934561267/picture?type=large", "display_name": "Srikanth Power", "link": "https://stackoverflow.com/users/4649367/srikanth-power"}, "is_accepted": false, "score": 0, "last_activity_date": 1427264761, "creation_date": 1427264761, "answer_id": 29248842, "question_id": 29229974, "link": "https://stackoverflow.com/questions/29229974/perl-missing-dependencies-for-request-tracker-installation/29248842#29248842", "title": "perl missing dependencies for request tracker installation", "body": "<p>first install the cpan and upgrade it.\ncpan> upgrade\nthen </p>\n\n<blockquote>\n  <p>cpan\n  install <code>required dependency</code></p>\n</blockquote>\n\n<p>It may not work for some dependencies.Then install manually like this</p>\n\n<blockquote>\n  <p>apt-get install lib<code>required dependencies- requireddependencies</code>-perl</p>\n</blockquote>\n\n<p>you can get dependencies here<a href=\"http://www.livejournal.com/doc/server/lj.install.perl_setup.modules.html\" rel=\"nofollow\">names &amp; details of perl modules</a></p>\n"}], "owner": {"reputation": 110, "user_id": 4649367, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/655436934561267/picture?type=large", "display_name": "Srikanth Power", "link": "https://stackoverflow.com/users/4649367/srikanth-power"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 6543, "favorite_count": 1, "answer_count": 1, "score": 4, "last_activity_date": 1618138820, "creation_date": 1427192390, "last_edit_date": 1427201103, "question_id": 29229974, "link": "https://stackoverflow.com/questions/29229974/perl-missing-dependencies-for-request-tracker-installation", "title": "perl missing dependencies for request tracker installation", "body": "<pre class=\"lang-none prettyprint-override\"><code>/usr/bin/perl ./sbin/rt-test-dependencies --verbose --with-mysql --with-fastcgi\nperl:\n        &gt;=5.10.1(5.18.2) ...found\nusers:\n        rt group (www-data) ...found\n        bin owner (root) ...found\n        libs owner (root) ...found\n        libs group (bin) ...found\n        web owner (www-data) ...found\n        web group (www-data) ...found\nCLI dependencies:\n        Term::ReadLine ...found\n        HTTP::Request::Common ...found\n        Term::ReadKey ...found\n        Getopt::Long &gt;= 2.24 ...found\n        Text::ParseWords ...found\n        LWP ...found\nCORE dependencies:\n        Plack::Handler::Starlet ...MISSING\n        Errno ...found\n        Devel::GlobalDestruction ...found\n        Date::Extract ...MISSING\n                Can't locate Clone.pm in @INC (you may need to install the Clone module) (@INC\ncontains: /etc/perl /usr/local/lib/perl/5.18.2 /usr/local/share/perl/5.18.2\n/usr/lib/perl5 /usr/share/perl5 /usr/lib/perl/5.18 /usr/share/perl/5.18\n/usr/local/lib/site_perl .) at\n/usr/local/share/perl/5.18.2/DateTime/Format/Natural/Expand.pm line 7.\n        Crypt::Eksblowfish ...MISSING\n        Text::Password::Pronounceable ...found\n        Regexp::IPv6 ...found\n        Digest::base ...found\n        Data::GUID ...MISSING\n        DateTime &gt;= 0.44 ...found\n        File::Glob ...found\n        HTTP::Message &gt;= 6.0 ...found\n        HTML::Quoted ...found\n        Regexp::Common ...found\n        DateTime::Format::Natural ...MISSING\n                Attempt to reload DateTime/Format/Natural.pm aborted.\n        Tree::Simple &gt;= 1.04 ...found\n        Sys::Syslog &gt;= 0.16 ...found\n        Class::Accessor &gt;= 0.34 ...found\n        File::ShareDir ...found\n        CGI::Cookie &gt;= 1.20 ...found\n        CGI::Emulate::PSGI ...found\n        Log::Dispatch &gt;= 2.30 ...found\n        UNIVERSAL::require ...found\n        Storable &gt;= 2.08 ...found\n        HTML::FormatText::WithLinks &gt;= 0.14 ...found\n        Mail::Mailer &gt;= 1.57 ...found\n        Encode &gt;= 2.64 ...MISSING\n        Email::Address &gt;= 1.897 ...found\n        Scalar::Util ...found\n        Apache::Session &gt;= 1.53 ...found\n        Digest::SHA ...found\n        HTML::FormatText::WithLinks::AndTables ...found\n        Locale::Maketext::Lexicon &gt;= 0.32 ...found\n        Time::ParseDate ...found\n        Plack &gt;= 1.0002 ...found\n        Digest::MD5 &gt;= 2.27 ...found\n        Email::Address::List &gt;= 0.02 ...found\n        DBI &gt;= 1.37 ...found\n        Locale::Maketext &gt;= 1.06 ...found\n        HTML::RewriteAttributes &gt;= 0.05 ...found\n        List::MoreUtils ...found\n        Time::HiRes ...found\n        DBIx::SearchBuilder &gt;= 1.65 ...MISSING\n        File::Temp &gt;= 0.19 ...found\n        Symbol::Global::Name &gt;= 0.04 ...found\n        HTML::Mason::PSGIHandler &gt;= 0.52 ...MISSING\n        CGI &gt;= 3.38 ...found\n        JSON ...found\n        Text::Wrapper ...found\n        HTML::Scrubber &gt;= 0.08 ...found\n        HTML::Entities ...found\n        Module::Refresh &gt;= 0.03 ...found\n        Devel::StackTra\nDASHBOARDS dependencies:\n        URI &gt;= 1.59 ...found\n        URI::QueryParam ...found\n        MIME::Types ...found\nFASTCGI dependencies:\n        FCGI::ProcManager ...found\n        FCGI &gt;= 0.74 ...MISSING\nGPG dependencies:\n        File::Which ...found\n        PerlIO::eol ...MISSING\n        GnuPG::Interface ...found\nICAL dependencies:\n        Data::ICal ...found\nMAILGATE dependencies:\n        Getopt::Long ...found\n        LWP::Protocol::https ...found\n        LWP::UserAgent &gt;= 6.0 ...found\n        Crypt::SSLeay ...MISSING\n        Mozilla::CA ...found\n        Pod::Usage ...found\n        Net::SSL ...MISSING\nMYSQL dependencies:\n        DBD::mysql &gt;= 2.1018 ...found\nSMIME dependencies:\n        String::ShellQuote ...found\n        File::Which ...found\n        Crypt::X509 ...found\nUSERLOGO dependencies:\n        Convert::Color ...found\n\nSOME DEPENDENCIES WERE MISSING.\nMAILGATE missing dependencies:\n        Crypt::SSLeay ...MISSING\n        Net::SSL ...MISSING\nGPG missing dependencies:\n        PerlIO::eol ...MISSING\nFASTCGI missing dependencies:\n        FCGI &gt;= 0.74 ...MISSING\nCORE missing dependencies:\n        DBIx::SearchBuilder &gt;= 1.65 ...MISSING\n        Data::GUID ...MISSING\n        Date::Extract ...MISSING\n                Can't locate Clone.pm in @INC (you may need to install the Clone module) (@INC\ncontains: /etc/perl /usr/local/lib/perl/5.18.2 /usr/local/share/perl/5.18.2\n/usr/lib/perl5 /usr/share/perl5 /usr/lib/perl/5.18 /usr/share/perl/5.18\n/usr/local/lib/site_perl .) at\n/usr/local/share/perl/5.18.2/DateTime/Format/Natural/Expand.pm line 7.\n        HTML::Mason::PSGIHandler &gt;= 0.52 ...MISSING\n        Crypt::Eksblowfish ...MISSING\n        Plack::Handler::Starlet ...MISSING\n        HTML::Mason &gt;= 1.43 ...MISSING\n        Encode &gt;= 2.64 ...MISSING\n        DateTime::Format::Natural ...MISSING\n                Attempt to reload DateTime/Format/Natural.pm aborted.\n        XML::RSS &gt;= 1.05 ...MISSING\n\nPerl library path for /usr/bin/perl:\n    /etc/perl\n    /usr/local/lib/perl/5.18.2\n    /usr/local/share/perl/5.18.2\n    /usr/lib/perl5\n    /usr/share/perl5\n    /usr/lib/perl/5.18\n    /usr/share/perl/5.18\n    /usr/local/lib/site_perl\n    .\n</code></pre>\n\n<p>I am installing request tracker in my ubuntu LAMP server. I am getting error missing dependencies. I tried many ways to resolve it but not working. while installing modules make error coming and showing impossible.\nthese are the missing dependencies.</p>\n"}, {"tags": ["regex", "perl"], "answers": [{"comments": [{"owner": {"reputation": 51, "user_id": 3912701, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1a30f988f708e63e6df3dd739495314b?s=128&d=identicon&r=PG&f=1", "display_name": "irwan", "link": "https://stackoverflow.com/users/3912701/irwan"}, "edited": false, "score": 0, "creation_date": 1427194106, "post_id": 29229934, "comment_id": 46667587, "body": "Thanks for the reply. I&#39;m not sure what do you mean by read &#39;the whole lot in go&#39;. I&#39;m read the file by chuck as the file is very big. I realise that your code only able to extract &quot;ATGC&quot;. How about &quot;atgc&quot;? I&#39;m sorry forgot to include lower case as well."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "reply_to_user": {"reputation": 51, "user_id": 3912701, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1a30f988f708e63e6df3dd739495314b?s=128&d=identicon&r=PG&f=1", "display_name": "irwan", "link": "https://stackoverflow.com/users/3912701/irwan"}, "edited": false, "score": 1, "creation_date": 1427195169, "post_id": 29229934, "comment_id": 46668227, "body": "Yes, but you&#39;re doing it via sysread of a number of bytes, which doesn&#39;t seem relevant to your needs. I do uppercase because your sample was all uppercase. If you want lower as well, then use <code>s&#47;^[ATCG]&#47;&#47;ig</code> (and use <code>uc</code> again)"}, {"owner": {"reputation": 51, "user_id": 3912701, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1a30f988f708e63e6df3dd739495314b?s=128&d=identicon&r=PG&f=1", "display_name": "irwan", "link": "https://stackoverflow.com/users/3912701/irwan"}, "edited": false, "score": 0, "creation_date": 1427195644, "post_id": 29229934, "comment_id": 46668546, "body": "The <code>s&#47;^[ATCG]&#47;&#47;ig</code> able to extract all the lower cases but it also extract &#39;c&#39; in &#39;&gt;chr1&#39;. How can I remove &#39;&gt;chr1&#39; ?"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "reply_to_user": {"reputation": 51, "user_id": 3912701, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1a30f988f708e63e6df3dd739495314b?s=128&d=identicon&r=PG&f=1", "display_name": "irwan", "link": "https://stackoverflow.com/users/3912701/irwan"}, "edited": false, "score": 0, "creation_date": 1427198835, "post_id": 29229934, "comment_id": 46670524, "body": "Something like: <code>s&#47;&gt;chr\\d+&#47;&#47;g</code>"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1427206648, "post_id": 29229934, "comment_id": 46675994, "body": "I agree that this is the best way. A simple <code>next if &#47;^&gt;&#47;</code> will get rid of the <code>chr99</code> labels. Also, there is no need for the <code>chomp</code> as the substitute will remove it. It may be better to write that as <code>tr&#47;ATCGatcg&#47;&#47;cd</code>"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 1, "creation_date": 1427207268, "post_id": 29229934, "comment_id": 46676446, "body": "See, I knew I did line oriented for a reason. And &#39;skipping&#39; lines with <code>next</code> was it."}], "tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": true, "score": 2, "last_activity_date": 1427207314, "last_edit_date": 1427207314, "creation_date": 1427192290, "answer_id": 29229934, "question_id": 29229836, "link": "https://stackoverflow.com/questions/29229836/remove-multiple-character-in-big-file-using-perl/29229934#29229934", "title": "remove multiple character in big file using perl", "body": "<p>You're stripping characters but you're not touching line feeds. I assume that's what you were trying with:</p>\n\n<pre><code>s/n+//g; \n</code></pre>\n\n<p>That needs to be <code>\\n</code>. <code>chomp</code> won't do the trick - that only removes the linefeed at the end of line. </p>\n\n<pre><code>s/chr+//g;\n</code></pre>\n\n<p>is also not going to be doing what you wanted - that's literally <code>ch</code> then <code>one or more instances of \"r\"</code>. </p>\n\n<p>Given your file has linefeeds in it, is there any particular reason why you need to read the whole lot in one go? I'd be suggesting:</p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\n\nopen ( my $input, \"&lt;\", \"input_file_name\" ) or die $!;\nopen ( my $output, \"&gt;\", \"output_file_name\" ) or die $!;\nwhile ( my $line = &lt;$input&gt; ) {\n    next if $line =~ m/^&gt;/; \n    $line =~ s/[^ATCG]//gi; \n    print {$output} $line;   #NB - no linefeeds at all. \n}\n\nclose ( $input );\nclose ( $output ); \n</code></pre>\n\n<p>Gives:</p>\n\n<pre><code>ATGGGGAAGCGTAGGCGACGATGCGTAGCGCATGCATGCGATGCTAGCTAG\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 25491, "user_id": 49197, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/15ebf24a33a29b9efbf9924f530dd736?s=128&d=identicon&r=PG", "display_name": "Hynek -Pichi- Vychodil", "link": "https://stackoverflow.com/users/49197/hynek-pichi-vychodil"}, "is_accepted": false, "score": 0, "last_activity_date": 1427194307, "last_edit_date": 1427194307, "creation_date": 1427193538, "answer_id": 29230392, "question_id": 29229836, "link": "https://stackoverflow.com/questions/29229836/remove-multiple-character-in-big-file-using-perl/29230392#29230392", "title": "remove multiple character in big file using perl", "body": "<p>The simplest way to do it is</p>\n\n<pre><code>tr -cd ATCG &lt; input &gt; output\n</code></pre>\n\n<p>See <a href=\"http://linux.die.net/man/1/tr\" rel=\"nofollow\">tr</a>. Or in perl</p>\n\n<pre><code>perl -pe'y/ATCG//cd' input &gt; output\n</code></pre>\n\n<p>See <a href=\"http://perldoc.perl.org/perlrun.html#*-p*\" rel=\"nofollow\"><code>perlrun</code></a> documentation for <code>-pe</code> meaning and <a href=\"http://perldoc.perl.org/perlop.html#tr%2fSEARCHLIST%2fREPLACEMENTLIST%2fcdsr\" rel=\"nofollow\"><code>perlop</code></a> for <code>y//</code> and <code>cd</code> modificators.</p>\n"}], "owner": {"reputation": 51, "user_id": 3912701, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1a30f988f708e63e6df3dd739495314b?s=128&d=identicon&r=PG&f=1", "display_name": "irwan", "link": "https://stackoverflow.com/users/3912701/irwan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 517, "favorite_count": 0, "accepted_answer_id": 29229934, "answer_count": 2, "score": 1, "last_activity_date": 1427207314, "creation_date": 1427191983, "last_edit_date": 1427194179, "question_id": 29229836, "link": "https://stackoverflow.com/questions/29229836/remove-multiple-character-in-big-file-using-perl", "title": "remove multiple character in big file using perl", "body": "<p>I'm trying to remove multiple character from big text file (around 1GB). The file contains roughly like this:</p>\n\n<pre><code>&gt;chr1\nNNNNNNNNNNNNN\nNNNNNNATGGGGA\nNNNNNNNNNNNNN\nAGCGTAGGCGACG\n\n&gt;chr2\nNNNNNNNNNNNNN\nATGCGTAGCGCAT\nNNNNNNNNGCATG\nCGATGCTAGctag\ncgatcgagcgatg\n</code></pre>\n\n<p>I want to get only the 'ATCG' character and want to concatenate all the string so it should look like this:</p>\n\n<pre><code>ATGGGGAAGCGTAGGCGACGATGCGTAGCGCATGCATGCGATGCTAGCTAGCGATCGAGCGATG\n</code></pre>\n\n<p>Unfortunately, all the unwanted characters were changed into whitespace just like this:</p>\n\n<pre><code>ATGGGGA\n\n\nAGCGTAGGCGACG\n\n\nATGCGTAGCGCAT\n</code></pre>\n\n<p>Am I missing something? This is my code:</p>\n\n<pre><code>open FH, \"&lt;\", 'filename' or die \"Can't open\\n\"; #read the file\n\nwhile (my $load = sysread (FH, $temp, 1e+8)) {\n    warn \"Read $load bytes\\n\";\n\n    $temp =~ s/&gt;chr+//gi;\n    $temp =~ s/\\d+//g;\n    $temp =~ s/n+//gi;\n\n    chomp($temp);\n    $process .= uc($temp);\n    $temp = '';\n}\n\nopen (FH, \"&gt;\", 'newfile') or die \"Can't create\\n\"; #processed string in new file\n\nprint FH $process;\nclose FH;\n</code></pre>\n\n<p>Thanks in advance.</p>\n"}, {"tags": ["regex", "perl", "tcl", "regex-greedy"], "answers": [{"comments": [{"owner": {"reputation": 119001, "user_id": 301832, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/965220a70d38e6a29466f44cdb4f804e?s=128&d=identicon&r=PG", "display_name": "Donal Fellows", "link": "https://stackoverflow.com/users/301832/donal-fellows"}, "edited": false, "score": 0, "creation_date": 1427188137, "post_id": 29228611, "comment_id": 46663908, "body": "You could also get the effect by rebuilding Tcl to use PCRE rather than its own RE engine, but that&#39;s a lot more work and will change many other things subtly besides."}], "tags": [], "owner": {"reputation": 119001, "user_id": 301832, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/965220a70d38e6a29466f44cdb4f804e?s=128&d=identicon&r=PG", "display_name": "Donal Fellows", "link": "https://stackoverflow.com/users/301832/donal-fellows"}, "is_accepted": false, "score": 3, "last_activity_date": 1427188074, "creation_date": 1427188074, "answer_id": 29228611, "question_id": 29228393, "link": "https://stackoverflow.com/questions/29228393/greedy-operator-in-regular-expression-is-not-working-in-tcl-8-5/29228611#29228611", "title": "greedy operator in regular expression is not working in Tcl 8.5", "body": "<p>The Tcl regular expression engine is an automata-theoretic one instead of a stack-based one, so it has a <em>very</em> different approach to matching mixed greediness REs. In particular, for the sort of RE you're talking about, that will be interpreted as entirely non-greedy.</p>\n\n<p>The simplest method of fixing this is to use a different RE. Remembering that <code>\\S</code> is just a shorthand for <code>[^\\s]</code>, we can do this (excluding <code>=</code> from the first part):</p>\n\n<pre><code>puts [ regexp -inline {^--[^\\s=]+=\\S+} \"--tox=9.0\" ]\n</code></pre>\n\n<p>(I also changed <code>\\-</code> to <code>-</code> as it's not a special character in Tcl's REs.)</p>\n"}, {"tags": [], "owner": {"reputation": 481636, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "is_accepted": false, "score": 2, "last_activity_date": 1427188164, "creation_date": 1427188164, "answer_id": 29228638, "question_id": 29228393, "link": "https://stackoverflow.com/questions/29228393/greedy-operator-in-regular-expression-is-not-working-in-tcl-8-5/29228638#29228638", "title": "greedy operator in regular expression is not working in Tcl 8.5", "body": "<p>The answer can be found <a href=\"https://groups.google.com/forum/#!msg/comp.lang.tcl/FddeFPbTFw8/asoMuv7dWqIJ\" rel=\"nofollow\">here</a>:</p>\n\n<blockquote>\n  <p>Unfortunately, the answer is that to get the same answer Perl gives,\n  you have to use Perl's exact regexp implementation.</p>\n</blockquote>\n\n<p>In your case, I'd use both anchors, <code>^</code> and <code>$</code>:</p>\n\n<pre><code>  puts [ regexp -inline {^\\-\\-\\S+?=\\S+$} \"--tox=9.0\" ]\n</code></pre>\n\n<p>The result is: <code>--tox=9.0</code></p>\n"}, {"tags": [], "owner": {"reputation": 67016, "user_id": 1578604, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a6f4afcfb542030d9f7918a873b7b404?s=128&d=identicon&r=PG", "display_name": "Jerry", "link": "https://stackoverflow.com/users/1578604/jerry"}, "is_accepted": true, "score": 5, "last_activity_date": 1427188575, "creation_date": 1427188575, "answer_id": 29228750, "question_id": 29228393, "link": "https://stackoverflow.com/questions/29228393/greedy-operator-in-regular-expression-is-not-working-in-tcl-8-5/29228750#29228750", "title": "greedy operator in regular expression is not working in Tcl 8.5", "body": "<p>This is an inherent 'feature' of Tcl's regexp implementation. For instance, the <a href=\"https://groups.google.com/forum/#!msg/comp.lang.tcl/FddeFPbTFw8/asoMuv7dWqIJ\" rel=\"noreferrer\">below</a> is from Henry Spencer (the one who did most if not all of Tcl's regexp work I believe)</p>\n\n<blockquote>\n  <p>It is very difficult to come up with an entirely satisfactory\n  definition of the behavior of mixed-greediness regular expressions. \n  Perl doesn't try:  the Perl \"specification\" is a description of the\n  implementation, an inherently low-performance approach involving\n  trying one match at a time. This is unsatisfactory for a number of\n  reasons, not least being that it takes several pages of text merely to\n  describe it.  (That implementation and its description are distant,\n  mutated descendants of one of my earlier regexp packages, so I share\n  some of the blame for this.)</p>\n  \n  <p>When all quantifiers are greedy, the Tcl 8.2 regexp matches the\n  longest possible match (as specified in the POSIX standard's\n  regular-expression definition).  When all are non-greedy, it matches\n  the shortest possible match.  Neither of these desirable statements is\n  true of Perl.</p>\n  \n  <p>The trouble is that it is very, very hard to write a generalization of\n  those statements which covers mixed-greediness regular expressions --\n  a proper, implementation-independent definition of what\n  mixed-greediness regular expressions <em>should</em> match -- and makes them\n  do \"what people expect\".  I've tried.  I'm still trying.  No luck so\n  far.</p>\n  \n  <p>The rules in the Tcl 8.2 regexp, which basically give the whole regexp\n  a long/short preference based on its subexpressions, are the best I've\n  come up with so far.  The code implements them accurately.  I agree\n  that they fall short of what's really wanted.  It's trickier than it\n  looks.</p>\n</blockquote>\n\n<p>Basically, expressions with mixed greedy and non-greedy quantifiers impacts both the simplicity of the implementation and the performance. So, the implementation makes it so that the first 'type' of quantifier is passed on to all other quantifiers.</p>\n\n<p>In other words, if the first quantifier is greedy, all the others will be greedy. If the first is non-greedy, all the others will be non-greedy. And therefore, you cannot force a Tcl regexp to work like a Perl regexp (or maybe you can through <code>exec</code> and using the bash command version of perl, but I'm not familiar with this).</p>\n\n<p>I would advise using negated classes and/or anchors instead of non-greedy.</p>\n\n<p>Since I don't know the exact context of your question, I won't provide an alternative regexp, because that will depend on whether this is really the whole string you are trying to make a match on.</p>\n"}], "owner": {"reputation": 2689, "user_id": 1134991, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/e102cb584a0fba3cd07b0a4d79350ba2?s=128&d=identicon&r=PG", "display_name": "user1134991", "link": "https://stackoverflow.com/users/1134991/user1134991"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 372, "favorite_count": 1, "accepted_answer_id": 29228750, "answer_count": 3, "score": 2, "last_activity_date": 1427207915, "creation_date": 1427187397, "last_edit_date": 1427207915, "question_id": 29228393, "link": "https://stackoverflow.com/questions/29228393/greedy-operator-in-regular-expression-is-not-working-in-tcl-8-5", "title": "greedy operator in regular expression is not working in Tcl 8.5", "body": "<p>See this simple regexp code:</p>\n\n<pre><code>puts [ regexp -inline {^\\-\\-\\S+?=\\S+} \"--tox=9.0\" ]\n</code></pre>\n\n<p>The output is:</p>\n\n<pre><code> &gt;--tox=9\n</code></pre>\n\n<p>It would seem that the second \\S+ is being non-greedy! Only 1 character is being matched<br>\nIn PERL, one can can see that the result is as I expected, see 1 line output:</p>\n\n<pre><code>perl -e '\"--tox=9.0\" =~/(^\\-\\-\\S+?=\\S+)/ ; print \"${1}\\n\"'\n--tox=9.0\n</code></pre>\n\n<p>How can I get the Perl behaviour in Tcl?</p>\n"}, {"tags": ["perl", "oop", "inheritance"], "comments": [{"owner": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "edited": false, "score": 0, "creation_date": 1427186664, "post_id": 29228145, "comment_id": 46663140, "body": "<a href=\"http://perldoc.perl.org/parent.html\" rel=\"nofollow noreferrer\">perldoc.perl.org/parent.html</a>"}], "answers": [{"comments": [{"owner": {"reputation": 2077, "user_id": 145013, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/ff915463c2e480813cd2cf83e172ba21?s=128&d=identicon&r=PG", "display_name": "Manuel Faux", "link": "https://stackoverflow.com/users/145013/manuel-faux"}, "edited": false, "score": 0, "creation_date": 1427186690, "post_id": 29228177, "comment_id": 46663157, "body": "That means that I cannot instantiate an anonymous class which inherits from another (non-anonymous) class?"}, {"owner": {"reputation": 30739, "user_id": 1804599, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/v91P3.jpg?s=128&g=1", "display_name": "rightfold", "link": "https://stackoverflow.com/users/1804599/rightfold"}, "reply_to_user": {"reputation": 2077, "user_id": 145013, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/ff915463c2e480813cd2cf83e172ba21?s=128&d=identicon&r=PG", "display_name": "Manuel Faux", "link": "https://stackoverflow.com/users/145013/manuel-faux"}, "edited": false, "score": 1, "creation_date": 1427186764, "post_id": 29228177, "comment_id": 46663199, "body": "@ManuelFaux See <a href=\"http://search.cpan.org/~pdcawley/Class-Inner-0.1/Inner.pm\" rel=\"nofollow noreferrer\"><code>Class::Inner</code></a>."}], "tags": [], "owner": {"reputation": 30739, "user_id": 1804599, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/v91P3.jpg?s=128&g=1", "display_name": "rightfold", "link": "https://stackoverflow.com/users/1804599/rightfold"}, "is_accepted": false, "score": 3, "last_activity_date": 1427186986, "last_edit_date": 1427186986, "creation_date": 1427186648, "answer_id": 29228177, "question_id": 29228145, "link": "https://stackoverflow.com/questions/29228145/create-an-object-with-inheritance-using-bless/29228177#29228177", "title": "Create an object with inheritance using `bless`", "body": "<p>Use <a href=\"http://perldoc.perl.org/parent.html\" rel=\"nofollow\"><code>parent</code></a> to set the base classes for your class. <code>bless</code> has nothing to do with inheritance:</p>\n\n<pre><code>package Derived;\nuse warnings;\nuse strict;\nuse parent qw(Base);\n\nsub new {\n    my $class = shift;\n    return bless {}, $class;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 25491, "user_id": 49197, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/15ebf24a33a29b9efbf9924f530dd736?s=128&d=identicon&r=PG", "display_name": "Hynek -Pichi- Vychodil", "link": "https://stackoverflow.com/users/49197/hynek-pichi-vychodil"}, "is_accepted": true, "score": 2, "last_activity_date": 1427188493, "creation_date": 1427188493, "answer_id": 29228731, "question_id": 29228145, "link": "https://stackoverflow.com/questions/29228145/create-an-object-with-inheritance-using-bless/29228731#29228731", "title": "Create an object with inheritance using `bless`", "body": "<p>If you are playing with those things you can sometimes violate <code>strict</code>. Pragma <code>strict</code> is there to protect you from mistakes. If you are sure what you are doing it is absolutely OK to switch off <code>strict</code> in some limited scope and preferably limited to the specific thing as you have in your OP. So this code is fine when you know what you do</p>\n\n<pre><code>{\n    no strict 'refs';\n    @{\"$anon_class\\::ISA\"} = ($parent);\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 0, "last_activity_date": 1427207842, "creation_date": 1427207842, "answer_id": 29235412, "question_id": 29228145, "link": "https://stackoverflow.com/questions/29228145/create-an-object-with-inheritance-using-bless/29235412#29235412", "title": "Create an object with inheritance using `bless`", "body": "<blockquote>\n  <p><em>Is there a way to accomplish that still using strict refs?</em></p>\n</blockquote>\n\n<p>Why? This is exactly the thing strict is designed to catch. Sure, you can fool strict, but it's far better to be clear about the fact that you are doing something strict normally forbids.</p>\n\n<p>In my opinion, </p>\n\n<pre><code>{ no strict 'refs'; @{ $anon_class . '::ISA' } = $parent; }\n</code></pre>\n\n<p>is far better than using <code>eval</code> or <code>%::</code> (even if it they weren't longer).</p>\n"}], "owner": {"reputation": 2077, "user_id": 145013, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/ff915463c2e480813cd2cf83e172ba21?s=128&d=identicon&r=PG", "display_name": "Manuel Faux", "link": "https://stackoverflow.com/users/145013/manuel-faux"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 56, "favorite_count": 0, "accepted_answer_id": 29228731, "answer_count": 3, "score": 2, "last_activity_date": 1427207842, "creation_date": 1427186565, "last_edit_date": 1427187239, "question_id": 29228145, "link": "https://stackoverflow.com/questions/29228145/create-an-object-with-inheritance-using-bless", "title": "Create an object with inheritance using `bless`", "body": "<p>How can I create an object of an anonymous class with inheritance using <code>bless</code>?</p>\n\n<p>I guess I need to set <code>@ISA</code>, but how do I accomplish that using <code>strict</code>?</p>\n\n<hr>\n\n<p>After a hint of \u0440\u0430\u0439\u0442\u0444\u043e\u043b\u0434 I took a look at <a href=\"http://search.cpan.org/~pdcawley/Class-Inner-0.1/Inner.pm\" rel=\"nofollow\"><code>Class::Inner</code></a>. They solve the inheritance by</p>\n\n<pre><code>no strict 'refs';\n@{\"$anon_class\\::ISA\"} = $parent;\n</code></pre>\n\n<p>Is there a way to accomplish that still using strict refs?</p>\n"}, {"tags": ["php", "regex", "perl"], "comments": [{"owner": {"reputation": 159902, "user_id": 3297613, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/KHhzd.jpg?s=128&g=1", "display_name": "Avinash Raj", "link": "https://stackoverflow.com/users/3297613/avinash-raj"}, "edited": false, "score": 2, "creation_date": 1427186784, "post_id": 29228142, "comment_id": 46663209, "body": "what&#39;s your expected output?"}, {"owner": {"reputation": 12342, "user_id": 1300892, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f2f3a5c87c28be1e3d1d31281c613deb?s=128&d=identicon&r=PG", "display_name": "Sverri M. Olsen", "link": "https://stackoverflow.com/users/1300892/sverri-m-olsen"}, "edited": false, "score": 2, "creation_date": 1427188012, "post_id": 29228142, "comment_id": 46663828, "body": "And please show us more sample inputs, as well. If they vary then a solution to the example in your question would most likely not apply to other inputs."}, {"owner": {"reputation": 59, "user_id": 3782701, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73451de7bd7764b15f485245f7377c52?s=128&d=identicon&r=PG&f=1", "display_name": "wiZZmnma", "link": "https://stackoverflow.com/users/3782701/wizzmnma"}, "reply_to_user": {"reputation": 159902, "user_id": 3297613, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/KHhzd.jpg?s=128&g=1", "display_name": "Avinash Raj", "link": "https://stackoverflow.com/users/3297613/avinash-raj"}, "edited": false, "score": 0, "creation_date": 1427188139, "post_id": 29228142, "comment_id": 46663909, "body": "@AvinashRaj my expected output would be an address and &quot;key&quot; pair e.g.      1DEYKqtPtAEt5hDfiAlz7SdFEGUSPguxGu   uembzzQdgFHq9k0UJfEi4Dnkvc7n3N5tWVNRQmKfZpeJPnyzKVzKSVVsvLGL&zwnj;&#8203;6bY  preferrably in an array (php)"}, {"owner": {"reputation": 59, "user_id": 3782701, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73451de7bd7764b15f485245f7377c52?s=128&d=identicon&r=PG&f=1", "display_name": "wiZZmnma", "link": "https://stackoverflow.com/users/3782701/wizzmnma"}, "reply_to_user": {"reputation": 12342, "user_id": 1300892, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f2f3a5c87c28be1e3d1d31281c613deb?s=128&d=identicon&r=PG", "display_name": "Sverri M. Olsen", "link": "https://stackoverflow.com/users/1300892/sverri-m-olsen"}, "edited": false, "score": 0, "creation_date": 1427188420, "post_id": 29228142, "comment_id": 46664061, "body": "@SverriM.Olsen  well, the wording doesn&#39;t vary, only the length of lines vary. e.g. the above line repeated 5 times on the same line,  but each time with different &quot;btc&quot; address and a &quot;key&quot;."}], "answers": [{"comments": [{"owner": {"reputation": 59, "user_id": 3782701, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73451de7bd7764b15f485245f7377c52?s=128&d=identicon&r=PG&f=1", "display_name": "wiZZmnma", "link": "https://stackoverflow.com/users/3782701/wizzmnma"}, "edited": false, "score": 0, "creation_date": 1427189698, "post_id": 29228781, "comment_id": 46664799, "body": "works! thanks! That was fast!!  Question: If the address and key had a fixed length, would that make it easier to parse them? I mean, some keys are invalid (too short or too long) but that is not an issue. 2 out of 100 invalid matches, I can live with that. Thanks, you are a life saver bro!"}, {"owner": {"reputation": 159902, "user_id": 3297613, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/KHhzd.jpg?s=128&g=1", "display_name": "Avinash Raj", "link": "https://stackoverflow.com/users/3297613/avinash-raj"}, "reply_to_user": {"reputation": 59, "user_id": 3782701, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73451de7bd7764b15f485245f7377c52?s=128&d=identicon&r=PG&f=1", "display_name": "wiZZmnma", "link": "https://stackoverflow.com/users/3782701/wizzmnma"}, "edited": false, "score": 0, "creation_date": 1427190010, "post_id": 29228781, "comment_id": 46665016, "body": "<a href=\"http://stackoverflow.com/help/accepted-answer\">Give some credit to the life-saver.</a>"}, {"owner": {"reputation": 59, "user_id": 3782701, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73451de7bd7764b15f485245f7377c52?s=128&d=identicon&r=PG&f=1", "display_name": "wiZZmnma", "link": "https://stackoverflow.com/users/3782701/wizzmnma"}, "edited": false, "score": 0, "creation_date": 1427191272, "post_id": 29228781, "comment_id": 46665748, "body": "marked as answered. Vote Up requires 15 reputation and I don&#39;t have that much"}], "tags": [], "owner": {"reputation": 159902, "user_id": 3297613, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/KHhzd.jpg?s=128&g=1", "display_name": "Avinash Raj", "link": "https://stackoverflow.com/users/3297613/avinash-raj"}, "is_accepted": true, "score": 0, "last_activity_date": 1427188662, "creation_date": 1427188662, "answer_id": 29228781, "question_id": 29228142, "link": "https://stackoverflow.com/questions/29228142/quick-regex-grep-perl-php/29228781#29228781", "title": "Quick regex grep/perl/php", "body": "<p>You need to use capturing group based regex in preg_match_all function.</p>\n\n<pre><code>$str = \"2015-03-11 10:15 - anonymous logged in to [127.0.0.1] on account 1DEYKqtPtAEt5hDfiAlz7SdFEGUSPguxGu using key uembzzQdgFHq9k0UJfEi4Dnkvc7n3N5tWVNRQmKfZpeJPnyzKVzKSVVsvLGL6bY 0.2379845 BTC were transferred to address 1cRa5v0Nxu9ABkkzlTv4dzsyRf0hOkg27N using key 1zM9nBd1PNu1FF7qKr1t9Y4m0TawPa3ZQJ1LrlvtViCiB2aFjgn8BIHWG2VHjJvV\";\npreg_match_all('~(?:account|address)\\s+(\\S+)\\s+using\\s+key\\s+(\\S+)~m', $str, $match);\nprint_r($match[1]);\nprint_r($match[2]);\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>Array\n(\n    [0] =&gt; 1DEYKqtPtAEt5hDfiAlz7SdFEGUSPguxGu\n    [1] =&gt; 1cRa5v0Nxu9ABkkzlTv4dzsyRf0hOkg27N\n)\nArray\n(\n    [0] =&gt; uembzzQdgFHq9k0UJfEi4Dnkvc7n3N5tWVNRQmKfZpeJPnyzKVzKSVVsvLGL6bY\n    [1] =&gt; 1zM9nBd1PNu1FF7qKr1t9Y4m0TawPa3ZQJ1LrlvtViCiB2aFjgn8BIHWG2VHjJvV\n)\n</code></pre>\n"}], "owner": {"reputation": 59, "user_id": 3782701, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73451de7bd7764b15f485245f7377c52?s=128&d=identicon&r=PG&f=1", "display_name": "wiZZmnma", "link": "https://stackoverflow.com/users/3782701/wizzmnma"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 249, "favorite_count": 0, "accepted_answer_id": 29228781, "answer_count": 1, "score": 0, "last_activity_date": 1427188662, "creation_date": 1427186551, "question_id": 29228142, "link": "https://stackoverflow.com/questions/29228142/quick-regex-grep-perl-php", "title": "Quick regex grep/perl/php", "body": "<p>I have this text:</p>\n\n<pre><code>2015-03-11 10:15 - anonymous logged in to [127.0.0.1] on account 1DEYKqtPtAEt5hDfiAlz7SdFEGUSPguxGu using key uembzzQdgFHq9k0UJfEi4Dnkvc7n3N5tWVNRQmKfZpeJPnyzKVzKSVVsvLGL6bY 0.2379845 BTC were transferred to address 1cRa5v0Nxu9ABkkzlTv4dzsyRf0hOkg27N using key 1zM9nBd1PNu1FF7qKr1t9Y4m0TawPa3ZQJ1LrlvtViCiB2aFjgn8BIHWG2VHjJvV\n</code></pre>\n\n<p>and I'm trying to extract the pseudo BTC account and the matching key. The text is not regular like the apache logs, so you could have a really long line with 5 or 10 addresses or a single line with the same info. Now how do I match the pseudo BTC account and it's matching key, from the \"logged in\" and \"transferred\" part, even if there are a many occurrences in one line? </p>\n\n<p>I have tried this:</p>\n\n<pre><code>function get_string_between($string, $start, $end){\n$string = \" \".$string;\n$ini = strpos($string,$start);\nif ($ini == 0) return \"\";\n$ini += strlen($start);\n$len = strpos($string,$end,$ini) - $ini;\nreturn substr($string,$ini,$len);\n}\n$parsed = get_string_between($fullstring, \"account\", \"using\");\n</code></pre>\n\n<p>which gets me the address but not the matching key. I would like to parse the text either using grep, perl or php. whatever works easier. I have been trying with php since I'm at least familiar with the language. </p>\n\n<p>any ideas? I appreciate all your help</p>\n"}, {"tags": ["apache", "perl", "http", "authentication", "logging"], "answers": [{"tags": [], "owner": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "is_accepted": true, "score": 1, "last_activity_date": 1427181346, "creation_date": 1427181346, "answer_id": 29226867, "question_id": 29226096, "link": "https://stackoverflow.com/questions/29226096/put-username-in-apache-access-log-with-perl-and-without-http-auth/29226867#29226867", "title": "Put username in apache access_log with Perl and without HTTP auth", "body": "<p>There is a similar mechanism to the way PHP does this in <code>mod_perl</code>: <a href=\"https://perl.apache.org/docs/2.0/api/Apache2/RequestRec.html#C_notes_\" rel=\"nofollow\">https://perl.apache.org/docs/2.0/api/Apache2/RequestRec.html#C_notes_</a> .</p>\n\n<p>Of course you need to run <code>mod_perl</code> in this case and not a simple CGI script. But this is also valid for the PHP solution which would work with <code>mod_php</code> but not when running using PHP as a CGI script. The reason is that CGI scripts are a separate process and don't have access to the internal state of the request inside Apache and can not manipulate it.</p>\n\n<p>With a CGI script you might instead write the information into a response header and log this as described <a href=\"http://archive.ianwinter.co.uk/2010/11/18/log-response-headers-in-apache/\" rel=\"nofollow\">here</a>. But remember that this header is also sent to the browser, so don't put confidential information in it.</p>\n"}], "owner": {"reputation": 275, "user_id": 1844133, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/c13faf5d793b7d30b2f2e12ff2751de7?s=128&d=identicon&r=PG&f=1", "display_name": "Manoj Agarwal", "link": "https://stackoverflow.com/users/1844133/manoj-agarwal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 124, "favorite_count": 0, "accepted_answer_id": 29226867, "answer_count": 1, "score": 0, "last_activity_date": 1427181346, "creation_date": 1427177535, "last_edit_date": 1495539822, "question_id": 29226096, "link": "https://stackoverflow.com/questions/29226096/put-username-in-apache-access-log-with-perl-and-without-http-auth", "title": "Put username in apache access_log with Perl and without HTTP auth", "body": "<p>How do we put username is <code>apache access_log</code> with Perl without <code>HTTP</code> auth? For PHP, the solution is in this <a href=\"https://stackoverflow.com/questions/3389169/put-username-in-apache-access-log-with-php-and-without-http-auth\">link</a>. </p>\n\n<p>I need to achieve the similar result using Perl.</p>\n"}, {"tags": ["perl"], "answers": [{"tags": [], "owner": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "is_accepted": false, "score": 0, "last_activity_date": 1427176310, "creation_date": 1427176310, "answer_id": 29225883, "question_id": 29225783, "link": "https://stackoverflow.com/questions/29225783/compilation-error-wile-using-pod2usage-in-perl/29225883#29225883", "title": "Compilation error wile using pod2usage in perl", "body": "<p>You turned on <a href=\"https://metacpan.org/pod/strict\" rel=\"nofollow\">strict</a> but failed to declare your variables.  You usually do this with <a href=\"http://perldoc.perl.org/functions/my.html\" rel=\"nofollow\">my</a>.  Here's <a href=\"http://perldoc.perl.org/perlfaq7.html#What%27s-the-difference-between-dynamic-and-lexical-%28static%29-scoping?-Between-local%28%29-and-my%28%29?\" rel=\"nofollow\">some more about my and lexical scoping of variables</a>.</p>\n\n<p>I'd recommend picking up a copy of <a href=\"http://www.onyxneon.com/books/modern_perl/index.html\" rel=\"nofollow\">Modern Perl</a> or <a href=\"https://www.perl.org/books/beginning-perl/\" rel=\"nofollow\">Beginning Perl</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 4514, "user_id": 4248931, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HijcJ.png?s=128&g=1", "display_name": "serenesat", "link": "https://stackoverflow.com/users/4248931/serenesat"}, "is_accepted": false, "score": 0, "last_activity_date": 1427180757, "creation_date": 1427180757, "answer_id": 29226755, "question_id": 29225783, "link": "https://stackoverflow.com/questions/29225783/compilation-error-wile-using-pod2usage-in-perl/29226755#29226755", "title": "Compilation error wile using pod2usage in perl", "body": "<p>You are getting errors because you are using <code>use strict</code> in your code but you didn't declare any varibale.</p>\n\n<p>To understand variable declaration read this tutorial <a href=\"http://perlmaven.com/variable-declaration-in-perl\" rel=\"nofollow\">Variable declaration in Perl</a>.</p>\n"}], "owner": {"reputation": 287, "user_id": 3616128, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/9b4fb2c549d63d985d5616231f73e784?s=128&d=identicon&r=PG&f=1", "display_name": "user3616128", "link": "https://stackoverflow.com/users/3616128/user3616128"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 97, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1427180757, "creation_date": 1427175824, "question_id": 29225783, "link": "https://stackoverflow.com/questions/29225783/compilation-error-wile-using-pod2usage-in-perl", "title": "Compilation error wile using pod2usage in perl", "body": "<p>I have a file which accepts a file as an argument and does some operation on it.</p>\n\n<pre><code>#!/usr/bin/perl    \nuse strict;\nuse warnings;\nuse Date::Format;\nuse Pod::Usage;\n\n###################\n#USAGE\n###################\n\n=head1 SYNOPSIS\n\nperl my-file.pl &lt;log file name&gt;\n\n     Options:\n       -help            Prints usage synopsis of this program.\n       -man         Man page for this program.\n\nUse option \"-man\" for extended usage help.\n\n=head1 ARGUMENTS \n\n=over 1\n\n=item 1 Log File Name\n\nEnter name of the log file. This is a required argument.\n\n=cut\n\nprint \"\\n\\n\";\nGetOptions('help|?' =&gt; \\$help, man =&gt; \\$man) or pod2usage(2);\npod2usage(1) if $help;\npod2usage(-verbose =&gt; 2) if $man;\npod2usage(\"$0: Insufficient arguments given. Please see the usage below...\")  if (@ARGV == 0);  \n\nmy $logfile = $ARGV[0];    \nmy $cmd;\nmy $n;\n$cmd = q(awk '!/Jobs still running./' $logfile &gt; temp.txt &amp;&amp; mv temp.txt $logfile);\n$n = system($cmd)\n</code></pre>\n\n<p>;</p>\n\n<p>While running this file I am getting the below compilation error. Not sure what is the reason for this error as another file with similar format work fine.</p>\n\n<pre><code>Global symbol \"$help\" requires explicit package name at mv-workitem-LogWatcher.pl line 33.\nGlobal symbol \"$man\" requires explicit package name at mv-workitem-LogWatcher.pl line 33.\nGlobal symbol \"$help\" requires explicit package name at mv-workitem-LogWatcher.pl line 34.\nGlobal symbol \"$man\" requires explicit package name at mv-workitem-LogWatcher.pl line 35.\nmy-file.pl had compilation errors\n</code></pre>\n\n<p>.</p>\n"}, {"tags": ["perl", "variables", "initialization", "perl-module", "subroutine"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 4, "creation_date": 1427175563, "post_id": 29225343, "comment_id": 46659136, "body": "Probably catching another module named <code>test.pm</code>"}, {"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 0, "creation_date": 1427175675, "post_id": 29225343, "comment_id": 46659169, "body": "or the standard Test.pm.  after the <code>use test;</code> put <code>BEGIN { print $INC{&quot;test.pm&quot;} } </code> and you will see which test.pm it is finding."}, {"owner": {"reputation": 105, "user_id": 4612801, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153183693657193/picture?type=large", "display_name": "Jarett Lloyd", "link": "https://stackoverflow.com/users/4612801/jarett-lloyd"}, "edited": false, "score": 0, "creation_date": 1427176069, "post_id": 29225343, "comment_id": 46659278, "body": "ok, i changed test.pm to testy.pm and package test to package testy."}, {"owner": {"reputation": 105, "user_id": 4612801, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153183693657193/picture?type=large", "display_name": "Jarett Lloyd", "link": "https://stackoverflow.com/users/4612801/jarett-lloyd"}, "edited": false, "score": 0, "creation_date": 1427176236, "post_id": 29225343, "comment_id": 46659321, "body": "it works just fine now.  but that&#39;s weird.  because, I have another file - cookies.pm.  is there another cookies.pm i&#39;m not aware of, then?  cuz the same issue is happening with that file....it&#39;s why i posted this in the first place - i just really simplified it..."}, {"owner": {"reputation": 105, "user_id": 4612801, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153183693657193/picture?type=large", "display_name": "Jarett Lloyd", "link": "https://stackoverflow.com/users/4612801/jarett-lloyd"}, "edited": false, "score": 0, "creation_date": 1427176865, "post_id": 29225343, "comment_id": 46659492, "body": "seems there is a &quot;cookies.pm&quot; file.  drat.  now i gotta rename that.  tyvm for the help.  VERY useful."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1427200012, "post_id": 29225343, "comment_id": 46671231, "body": "I&#39;ve been tripped up on <code>config</code> as well I think :)"}, {"owner": {"reputation": 105, "user_id": 4612801, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153183693657193/picture?type=large", "display_name": "Jarett Lloyd", "link": "https://stackoverflow.com/users/4612801/jarett-lloyd"}, "edited": false, "score": 0, "creation_date": 1437970079, "post_id": 29225343, "comment_id": 51236005, "body": "oh ya?  fabulous.  i renamed cookies.pm to chef.pm"}], "owner": {"reputation": 105, "user_id": 4612801, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153183693657193/picture?type=large", "display_name": "Jarett Lloyd", "link": "https://stackoverflow.com/users/4612801/jarett-lloyd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 52, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1427182558, "creation_date": 1427173383, "last_edit_date": 1427182558, "question_id": 29225343, "link": "https://stackoverflow.com/questions/29225343/why-does-constants-pm-work-but-test-pm-does-not", "title": "why does &quot;constants.pm&quot; work, but &quot;test.pm&quot; does not?", "body": "<p>Why does <code>constants.pm</code> work where <code>test.pm</code> does not?</p>\n\n<p>constants.pm</p>\n\n<pre><code>package constants;\n\nuse strict;\nuse Exporter;\nuse vars qw($VERSION @ISA @EXPORT);\n\n$VERSION     = 1.00;\n@ISA         = qw(Exporter);\n@EXPORT      = qw(\n                  $TESTVAR\n                  $ABOUT_PAGE\n                  $ADMIN_PAGE\n                  $HELP_PAGE\n                  $HOME_PAGE\n                  $NEWPROWLER_PAGE\n                  $PICS_PAGE\n                  $PREY_PAGE\n                  $PROFILE_PAGE\n                  $SEARCH_PAGE\n                  $SEXT_PAGE\n                  $STATS_PAGE\n                  $SUBSCRIPTION_PAGE\n                  $TERMS_PAGE\n\n                  $ADMIN_BAN_USER_PAGE\n                  $ADMIN_CONFIG_PAGE\n                  $ADMIN_EDIT_ABOUT_PAGE\n                  $ADMIN_EDIT_HELP_PAGE\n                  $ADMIN_EDIT_HOME_PAGE\n                  $ADMIN_EDIT_THEMES_PAGE\n                  $ADMIN_EDIT_USERS_PAGE\n\n                  $STATS_BIO_PAGE\n                  $STATS_DESC_PAGE\n                  $STATS_LOC_PAGE\n                  $STATS_PASS_PAGE\n                  $STATS_SUB_PAGE\n                  $STATS_THEME_PAGE\n                  $STATS_VITALS_PAGE\n\n                  $SEXT_INBOX_PAGE\n                  $SEXT_NEWMSG_PAGE\n                  $SEXT_SENT_PAGE\n                  $SEXT_SHOWMSG_PAGE\n                  $SEXT_TRASH_PAGE\n\n                  $PICS_STD\n                  $PICS_UPLOAD_PAGE\n\n                  $END_OF_TIME\n                 );\n\n#############\n# MAIN PAGES\n#############\nour $ABOUT_PAGE = \"a\"; # was about\nour $ADMIN_PAGE = \"A\"; # was admin\nour $HELP_PAGE = \"h\"; # was help\nour $HOME_PAGE = \"H\"; # was \"\"\nour $NEWPROWLER_PAGE = \"N\"; # was never anything, this is an \"oops, forgot this one lol\".\nour $PICS_PAGE = \"i\"; # was photos\nour $PREY_PAGE = \"p\"; # was friends\nour $PROFILE_PAGE = \"P\"; # was profile\nour $SEARCH_PAGE = \"s\"; # was search\nour $SEXT_PAGE = \"m\"; # was msgs\nour $STATS_PAGE = \"S\"; # was stats\nour $SUBSCRIPTION_PAGE = \"M\"; # M for Membership, and because \"s\" and \"S\" are taken (was sub)\nour $TERMS_PAGE  = \"t\"; # was never anything, another oh i forgot that one, too grr\n\n#############\n# ADMIN PAGES\n#############\nour $ADMIN_BAN_USER_PAGE = \"b\"; # was bu\nour $ADMIN_CONFIG_PAGE = \"c\"; # was cfg\nour $ADMIN_EDIT_ABOUT_PAGE = \"a\"; # was ab\nour $ADMIN_EDIT_HELP_PAGE = \"h\"; # was ehe\nour $ADMIN_EDIT_HOME_PAGE = \"H\"; # was eho\nour $ADMIN_EDIT_THEMES_PAGE = \"t\"; # was eth\nour $ADMIN_EDIT_USERS_PAGE = \"u\"; # was eu\n\n#############\n# USER SETTINGS PAGES\n#############\nour $STATS_BIO_PAGE = \"b\";\nour $STATS_DESC_PAGE = \"d\";\nour $STATS_LOC_PAGE = \"L\";\nour $STATS_PASS_PAGE = \"p\";\nour $STATS_SUB_PAGE = \"s\";\nour $STATS_THEME_PAGE = \"t\";\nour $STATS_VITALS_PAGE = \"v\";\n\n#############\n# SEXTING PAGES\n#############\nour $SEXT_INBOX_PAGE = \"i\";\nour $SEXT_NEWMSG_PAGE = \"c\";\nour $SEXT_SENT_PAGE = \"s\";\nour $SEXT_SHOWMSG_PAGE = \"S\";\nour $SEXT_TRASH_PAGE = \"t\";\n\n#############\n# PIC PAGES\n#############\nour $PICS_STD = \"s\";\nour $PICS_UPLOAD_PAGE = \"u\";\n\n#############\n# MISC CONSTANTS\n#############\nour $END_OF_TIME = \"Thu, 31-Dec-2037 11:59:59\";\n\nour $TESTVAR = init_test();\n\nsub init_test {\n  return \"bugger!\";\n}\n\n1;\n</code></pre>\n\n<p>test.pm</p>\n\n<pre><code>package test;\n\nuse strict;\nuse Exporter;\nuse vars qw($VERSION @ISA @EXPORT);\n\n$VERSION     = 1.00;\n@ISA         = qw(Exporter);\n@EXPORT      = qw(\n                  $TESTVAR\n                 );\n\nour $TESTVAR = \"a\";\n\n1;\n</code></pre>\n\n<p>and now test.pl</p>\n\n<pre><code>#!/usr/bin/perl.exe\n\nuse strict;\nuse CGI::Carp qw(fatalsToBrowser);\n\nuse constants;\n\nprint \"content-type: text/plain\\n\\n\";\nprint $TESTVAR;\n\nexit 1;\n</code></pre>\n\n<p>change <code>use constants;</code> to <code>use test;</code> and you will see what I mean.  <code>constants.pm</code> works just fine.  <code>test.pm</code> says I must be explicit when trying to <code>print $TESTVAR</code>.  I just don't get it.</p>\n"}, {"tags": ["perl", "cpan", "strawberry-perl", "www-mechanize-firefox", "pp-perl-par-packager"], "answers": [{"tags": [], "owner": {"reputation": 22505, "user_id": 1411457, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/XqssD.png?s=128&g=1", "display_name": "harmic", "link": "https://stackoverflow.com/users/1411457/harmic"}, "is_accepted": true, "score": 2, "last_activity_date": 1427191060, "creation_date": 1427191060, "answer_id": 29229541, "question_id": 29224183, "link": "https://stackoverflow.com/questions/29224183/perl-parpacker-cant-find-module-issue/29229541#29229541", "title": "Perl Par::Packer Can&#39;t find module issue", "body": "<p>PAR::Packer sometimes has a hard time identifying which modules need to be included in a PAR package in order to fulfill all of the requirements of the program you are trying to package.</p>\n\n<p>It copes OK if the dependancies are loaded via plain 'use', or 'require' statements where the module to be loaded is a literal string, but it won't have much chance if the module is being loaded dynamically with something like:</p>\n\n<pre><code>require $myModuleToLoad;\n</code></pre>\n\n<p>Browsing the source code of MozRepl and related modules shows that they make heavy use of plugins loaded dynamically. I suspect that some of these are not being packaged.</p>\n\n<p>You can manually specify module(s) to be included in the PAR package by adding <code>-M Module::Name</code> to the pp command line for each of the modules to be added (replacing Module::Name with the actual module name of course).</p>\n\n<p>The hard part might be identifying which modules to include. One way to do this is to temporarily add something like this to the end of your script:</p>\n\n<pre><code>END { print \"$_ -&gt; $INC{$_}\\n\" foreach sort keys %INC; }\n</code></pre>\n\n<p>then run your script normally, not through PAR. It should list all the modules that were loaded. You can compare that with the actual modules present in the PAR package and add the missing ones using the <code>-M</code> option to pp.</p>\n\n<p>You can see the modules inside your PAR file by opening it with an unzipping tool, such as 7zip. Or in Linux:</p>\n\n<pre><code>unzip -l {parfile}\n</code></pre>\n"}], "owner": {"reputation": 159, "user_id": 4671229, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/93aa060c52816f0165dc5d43306c0b21?s=128&d=identicon&r=PG&f=1", "display_name": "Spenser Truex", "link": "https://stackoverflow.com/users/4671229/spenser-truex"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 948, "favorite_count": 0, "accepted_answer_id": 29229541, "answer_count": 1, "score": 1, "last_activity_date": 1427191060, "creation_date": 1427165330, "last_edit_date": 1427184832, "question_id": 29224183, "link": "https://stackoverflow.com/questions/29224183/perl-parpacker-cant-find-module-issue", "title": "Perl Par::Packer Can&#39;t find module issue", "body": "<p>I have a perl program that uses <code>WWW::Mechanize::Firefox</code> on windows 7 32bit with strawberry perl.</p>\n\n<p>It works fine with the command <code>C:\\&gt;perl testcase.pl</code>. When I compile it with <code>C:\\&gt;pp -o testcase.exe testcase.pl</code> it compiles with no errors. </p>\n\n<p>When I run the <code>testcase.exe</code> it gives me the error:</p>\n\n<pre><code>Failed to connect to , Can't locate object method \"setup\" via package \"MozRepl::Client\" at MozRepl.pm line 224\n</code></pre>\n\n<p>The code I am using for <code>testcase.pl</code> is:</p>\n\n<pre><code>#!perl\nuse MozRepl;\nuse WWW::Mechanize::Firefox;\nuse warnings;\nsystem('start firefox');\nsleep(5);\n$mech = WWW::Mechanize::Firefox-&gt;new;\n</code></pre>\n\n<p>Also note that a program without <code>WWW::Mechanize::Firefox</code> and <code>MozRepl</code> does work fine.\nThe problem has obviously been narrowed down to <code>PAR::Packer</code> not liking <code>MozRepl</code>, any idea what it might be?</p>\n"}, {"tags": ["xml", "algorithm", "perl", "filter", "libxml2"], "answers": [{"comments": [{"owner": {"reputation": 737, "user_id": 1263343, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HYgqv.jpg?s=128&g=1", "display_name": "codenaugh", "link": "https://stackoverflow.com/users/1263343/codenaugh"}, "edited": false, "score": 0, "creation_date": 1427232488, "post_id": 29224246, "comment_id": 46692401, "body": "Thank you for your answer. I was able to solve with just using for loops. Your way may be much better than my way, but it seemed quite complicated at first, so I opted to keep trying with for loops until I was successful."}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 0, "last_activity_date": 1427166125, "last_edit_date": 1427166125, "creation_date": 1427165760, "answer_id": 29224246, "question_id": 29223026, "link": "https://stackoverflow.com/questions/29223026/using-libxml-to-filter-one-xml-based-on-another-xml-in-perl/29224246#29224246", "title": "Using LibXML to filter one XML based on another XML in Perl", "body": "<p>I suggest that you build a hash of arrays from your filter XML that has the type as keys and an array of all the contents for that type as values. Like this</p>\n\n<pre><code>my %filters = (\n  warning =&gt; [\n    'hurts really bad',\n    'content 2',\n    'content 3',\n    ...\n  ],\n);\n</code></pre>\n\n<p>Then you're done with the <code>filter.xml</code> data file.</p>\n\n<p>Now, as you encounter each <code>&lt;message&gt;</code> element in the <code>log.xml</code> file, you should</p>\n\n<ul>\n<li><p>Check whether there is an element of <code>%filters</code> for the message's type</p></li>\n<li><p>If not then the test fails, i.e. the message isn't filtered</p></li>\n<li><p>If so then check each string in the array referenced by the element's value to see if it's a substring of the current message's content</p></li>\n<li><p>If no such string is found then the test fails, i.e. the message isn't filtered</p></li>\n<li><p>Otherwise the test is successful, and the message is filtered out</p></li>\n</ul>\n\n<p>Assuming you're using a regex to check whether the filters match the content, don't forget to escape (with <code>quotemeta</code>) any regex met a characters in the <em>content</em> strings. Also, you may want to convert each hash value into a compiled regex to make the check simpler. That is, change it from the above structure to</p>\n\n<pre><code>my %filters = (\n  warning =&gt; qr/hurts really bad|content 2|content 3|.../,\n)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 737, "user_id": 1263343, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HYgqv.jpg?s=128&g=1", "display_name": "codenaugh", "link": "https://stackoverflow.com/users/1263343/codenaugh"}, "is_accepted": true, "score": 0, "last_activity_date": 1427235843, "last_edit_date": 1427235843, "creation_date": 1427232349, "answer_id": 29243204, "question_id": 29223026, "link": "https://stackoverflow.com/questions/29223026/using-libxml-to-filter-one-xml-based-on-another-xml-in-perl/29243204#29243204", "title": "Using LibXML to filter one XML based on another XML in Perl", "body": "<p>Looks like I finally solved it. This sub will remove any items found in the filter.xml</p>\n\n<pre><code>sub exclude {\n  my $filterParser = XML::LibXML-&gt;new-&gt;parse_file($filterXML);\n  my $logParser = XML::LibXML-&gt;new-&gt;parse_file($xml);\n\n  my $remove = false;   \n\n  foreach my $filter ( $filterParser-&gt;findnodes('/filters/filter') ) {\n    foreach my $msg ( $logParser-&gt;findnodes('/log/message') ) {\n        foreach my $msgNode ($msg-&gt;childNodes) {\n            foreach my $filterNode ($filter-&gt;childNodes) {\n                if ($msgNode-&gt;localName eq $filterNode-&gt;localName) {\n                    my $m = $msgNode-&gt;textContent;\n                    my $f = $filterNode-&gt;textContent;\n                    if (index($m, $f) != -1) {\n                        $remove = true;\n                    }\n                    else { $remove = false; }\n                }\n            }\n        }\n        if ($remove eq true) {\n            $msg-&gt;parentNode-&gt;removeChild($msg);\n            $remove = false;\n        }\n    }\n  }\n  $logParser-&gt;toFile($xml);\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 0, "last_activity_date": 1427295371, "creation_date": 1427295371, "answer_id": 29259136, "question_id": 29223026, "link": "https://stackoverflow.com/questions/29223026/using-libxml-to-filter-one-xml-based-on-another-xml-in-perl/29259136#29259136", "title": "Using LibXML to filter one XML based on another XML in Perl", "body": "<p>It's a lot more straighforward if you read the filter data into memory as I suggested. Then all you have to do is to look at each <code>&lt;message&gt;</code> element in the log and remove it if it matches any of the criteria.</p>\n\n<p>Here's how it looks</p>\n\n<pre><code>use strict;\nuse warnings;\n\nuse XML::LibXML;\nuse List::Util 'any';\n\nmy $parser = XML::LibXML-&gt;new(no_blanks =&gt; 1);\n\nmy $filters = $parser-&gt;load_xml(location =&gt; 'filter.xml');\n\nmy %filters;\n\nfor my $filter ( $filters -&gt;findnodes('/filters/filter') ) {\n  my $type = $filter-&gt;findvalue('type');\n  my $content = $filter-&gt;findvalue('content');\n  push @{ $filters{$type} }, $content;\n}\n\nmy $log = $parser-&gt;load_xml(location =&gt; 'log.xml');\n\nfor my $message ( $log-&gt;findnodes('/log/message') ) {\n  my $type = $message-&gt;findvalue('type');\n  my $content = $message-&gt;findvalue('content');\n  unless ( any { $content =~ /\\Q$_/i } @{ $filters{$type} } ) {\n    $message-&gt;parentNode-&gt;removeChild($message);\n  }\n}\n\nprint $log-&gt;toString(1);\n</code></pre>\n\n<p><strong>output</strong></p>\n\n<pre><code>&lt;?xml version=\"1.0\"?&gt;\n&lt;log&gt;\n  &lt;message&gt;\n    &lt;type&gt;warning&lt;/type&gt;\n    &lt;from&gt;cody&lt;/from&gt;\n    &lt;content&gt;my head hurts really bad right now&lt;/content&gt;\n  &lt;/message&gt;\n&lt;/log&gt;\n</code></pre>\n"}], "owner": {"reputation": 737, "user_id": 1263343, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HYgqv.jpg?s=128&g=1", "display_name": "codenaugh", "link": "https://stackoverflow.com/users/1263343/codenaugh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 104, "favorite_count": 0, "accepted_answer_id": 29243204, "answer_count": 3, "score": 0, "last_activity_date": 1427295371, "creation_date": 1427157780, "question_id": 29223026, "link": "https://stackoverflow.com/questions/29223026/using-libxml-to-filter-one-xml-based-on-another-xml-in-perl", "title": "Using LibXML to filter one XML based on another XML in Perl", "body": "<p>I'm having some difficulty coming up with an algorithm that will read in my filter.xml and then remove all message nodes from my log.xml. I've tried to start with a small case of one filter instead of shooting for multiple filters at once, but the idea is that a message must match all the elements in the filter to be removed. </p>\n\n<p>Here is an example of a filter.xml that would remove all warning messages that contain the string \"hurts really bad\":</p>\n\n<pre><code>&lt;filter&gt;\n  &lt;type&gt;warning&lt;/type&gt;\n  &lt;content&gt;hurts really bad&lt;/content&gt;\n&lt;/filter&gt;\n</code></pre>\n\n<p>And here is an example of the log.xml with 2 different warning messages:</p>\n\n<pre><code>&lt;log&gt;\n  &lt;message&gt;\n    &lt;type&gt;warning&lt;/type&gt;\n    &lt;from&gt;cody&lt;/from&gt;\n    &lt;content&gt;my head hurts really bad right now&lt;/content&gt;\n  &lt;/message&gt;\n  &lt;message&gt;\n    &lt;type&gt;error&lt;/type&gt;\n    &lt;from&gt;cody&lt;/from&gt;\n    &lt;content&gt;i've got too many nested for loops&lt;/content&gt;\n  &lt;/message&gt;\n  &lt;message&gt;\n    &lt;type&gt;warning&lt;/type&gt;\n    &lt;from&gt;charlie&lt;/from&gt;\n    &lt;content&gt;ruff&lt;/content&gt;\n  &lt;/message&gt;\n&lt;/log&gt;\n</code></pre>\n\n<p>I have no trouble loading the files in with LibXML, but when I try to come up with the algorithm to begin comparing the filters to the messages, I just end up with for loops within for loops until I realize what I am trying will not work, usually due to removing all warnings before checking for the content string. Anyone have any pseudocode ideas on how to accomplish this? I want the output to have the first warning message removed from the original log.xml due to it matching BOTH the type and containing the content string from the filter.xml. That means only the error and the second warning message will be the only 2 items in the new log.xml. I know how to overwrite the xml as well as compare the strings using index. Just need to get this algorithm knocked out.</p>\n"}, {"tags": ["regex", "linux", "perl"], "answers": [{"comments": [{"owner": {"reputation": 5139, "user_id": 3293148, "user_type": "registered", "accept_rate": 99, "profile_image": "https://www.gravatar.com/avatar/a5b0a16cfd67f7e3944d886fd1bebde5?s=128&d=identicon&r=PG", "display_name": "Jasmine Lognnes", "link": "https://stackoverflow.com/users/3293148/jasmine-lognnes"}, "edited": false, "score": 0, "creation_date": 1427155211, "post_id": 29222594, "comment_id": 46654002, "body": "Very nice! What does <code>?=</code> mean?"}, {"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "reply_to_user": {"reputation": 5139, "user_id": 3293148, "user_type": "registered", "accept_rate": 99, "profile_image": "https://www.gravatar.com/avatar/a5b0a16cfd67f7e3944d886fd1bebde5?s=128&d=identicon&r=PG", "display_name": "Jasmine Lognnes", "link": "https://stackoverflow.com/users/3293148/jasmine-lognnes"}, "edited": false, "score": 1, "creation_date": 1427155887, "post_id": 29222594, "comment_id": 46654210, "body": "it&#39;s a positive look ahead; it means match the stuff up through the ) but don&#39;t consume any of the string (so the next /g iteration will start looking earlier in the string)"}], "tags": [], "owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "is_accepted": true, "score": 4, "last_activity_date": 1427154789, "creation_date": 1427154789, "answer_id": 29222594, "question_id": 29222519, "link": "https://stackoverflow.com/questions/29222519/safe-to-use-in-variables-in-regex/29222594#29222594", "title": "Safe to use # ! $ in variables in regex?", "body": "<p>You can auto-escape any necessary characters by doing:</p>\n\n<pre><code>push @a, $doc =~ /(\\Q$r\\E.{3000})/sg;\n</code></pre>\n\n<p>But your regex may not be working as you intend; it will only find your strings in the first part of the file, not if they extend into the last 3000 characters.  It also will only find one of two occurrences if they don't have 3000 other characters between them.  Both problems would be fixed by doing:</p>\n\n<pre><code>push @a, $doc =~ /(?=(\\Q$r\\E.{0,3000}))/sg;\n</code></pre>\n"}], "owner": {"reputation": 5139, "user_id": 3293148, "user_type": "registered", "accept_rate": 99, "profile_image": "https://www.gravatar.com/avatar/a5b0a16cfd67f7e3944d886fd1bebde5?s=128&d=identicon&r=PG", "display_name": "Jasmine Lognnes", "link": "https://stackoverflow.com/users/3293148/jasmine-lognnes"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 50, "favorite_count": 0, "accepted_answer_id": 29222594, "answer_count": 1, "score": 1, "last_activity_date": 1427156132, "creation_date": 1427154427, "last_edit_date": 1427156132, "question_id": 29222519, "link": "https://stackoverflow.com/questions/29222519/safe-to-use-in-variables-in-regex", "title": "Safe to use # ! $ in variables in regex?", "body": "<p>Can someone tell me, if it is safe to have all these special characters in <code>@rx</code>? It is <code>#</code> <code>!</code> and <code>$</code> I am concerned about.</p>\n\n<p>If it is not safe, how do I make sure the regex won't interpret the elements in <code>@rx</code>?</p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\n\nmy $doc = do { local $/; &lt;STDIN&gt; };\n\nmy @rx = (\n    'mariadb:\\n  build: ',\n    '#!/bin/bash\\n\\n/usr/bin/mysqld_safe',\n    'FROM centos:7',\n    '#!/bin/sh\\n# This is /usr/libexec/mariadb-',\n    '#!/bin/bash\\nVOLUME_HOME=\"/var/lib/mysql\"',\n    '#!/bin/bash\\nMYSQL=\"/usr/bin/mysql -u$DB_ENV_DBUSER'\n);\n\nmy @a = ();\n\nforeach my $r (@rx) {\n    push @a, $doc =~ /($r.{3000})/sg;\n}\n\nmy $n = int(rand(999999999999999));\nfor my $i (0 ..$#a) {\n    system(\"echo '$a[$i]' &gt; ext$n$i\");\n}\n</code></pre>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 83048, "user_id": 2255089, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZNAsT.jpg?s=128&g=1", "display_name": "Casimir et Hippolyte", "link": "https://stackoverflow.com/users/2255089/casimir-et-hippolyte"}, "edited": false, "score": 1, "creation_date": 1427151805, "post_id": 29221916, "comment_id": 46652936, "body": "a lookahead looks forward <i>(means &quot;followed by&quot;)</i>, since the next token in your pattern is the <code>\\z</code> anchors <i>(the end of the string)</i>, <code>(?!\\\\)\\z</code> is an always true pattern! (at the end of the string, there is no slash since this is the end of the string). To check the last character before the end of the string try a lookbehind <code>(?&lt;!\\\\)\\z</code> <i>(preceded by)</i> or use a negated character class: <code>[^\\\\]\\z</code> if you are not particulary interested by the last characters of the line. As an aside, the modifiers x, m and s are useless here."}], "answers": [{"comments": [{"owner": {"reputation": 73, "user_id": 4293785, "user_type": "registered", "accept_rate": 25, "profile_image": "https://lh5.googleusercontent.com/-2EZVmydodK8/AAAAAAAAAAI/AAAAAAAAACU/MTgIkAEQ0v8/photo.jpg?sz=128", "display_name": "piecia", "link": "https://stackoverflow.com/users/4293785/piecia"}, "edited": false, "score": 0, "creation_date": 1427228333, "post_id": 29222100, "comment_id": 46690199, "body": "I thought that I understand regex but I was wrong. Both patterns work even without <code>?</code>"}], "tags": [], "owner": {"reputation": 7282, "user_id": 2716792, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/l0Oth.jpg?s=128&g=1", "display_name": "alpha bravo", "link": "https://stackoverflow.com/users/2716792/alpha-bravo"}, "is_accepted": false, "score": 1, "last_activity_date": 1427152054, "creation_date": 1427152054, "answer_id": 29222100, "question_id": 29221916, "link": "https://stackoverflow.com/questions/29221916/search-for-lines-that-do-not-end-with-a-given-character/29222100#29222100", "title": "Search for lines that do not end with a given character", "body": "<p>you could use this pattern if your engine supports negative look-behind  </p>\n\n<pre><code>\\A\\s+(.*)(?&lt;!\\\\)\\z\n</code></pre>\n\n<p>or this pattern if it does not  </p>\n\n<pre><code>\\A\\s+(.*[^\\\\])\\z\n</code></pre>\n\n<p>the reason why your first pattern didn't work is because <code>(.+?)</code> has already consumed the last back slash and the last back slash does not see a <code>\\</code> ahead of it</p>\n"}, {"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 0, "last_activity_date": 1427153277, "creation_date": 1427153277, "answer_id": 29222326, "question_id": 29221916, "link": "https://stackoverflow.com/questions/29221916/search-for-lines-that-do-not-end-with-a-given-character/29222326#29222326", "title": "Search for lines that do not end with a given character", "body": "<p>It seems most straightforward to write exactly what you described. You asked for <em>\"lines that not ending on backslash, but they must beginning on some text\"</em>.</p>\n\n<p>This looks for the end of the string <code>\\z</code> not preceded by a backslash <code>(?&lt;!\\\\)</code> (the backslash has to be duplicated). And a second regex checks to see that there is a non-space character somewhere in the string.</p>\n\n<pre><code>for ( 'abcdef\\\\', 'abcdef',  '\\\\', '' ) {\n  printf \"'%s' -- %s\\n\", $_, /(?&lt;!\\\\)\\z/ &amp;&amp; /\\S/ ? 'match' : 'no match';\n}\n</code></pre>\n\n<p><strong>output</strong></p>\n\n<pre><code>'abcdef\\' -- no match\n'abcdef' -- match\n'\\' -- no match\n'' -- no match\n</code></pre>\n\n<p>Beware that checking for things at the end of a line can be questionable because of the trailing newline, so you should <code>chomp</code> each line before you test it. It is up to you what to do about lines that end with, say, a backslash followed by spaces.</p>\n"}], "owner": {"reputation": 73, "user_id": 4293785, "user_type": "registered", "accept_rate": 25, "profile_image": "https://lh5.googleusercontent.com/-2EZVmydodK8/AAAAAAAAAAI/AAAAAAAAACU/MTgIkAEQ0v8/photo.jpg?sz=128", "display_name": "piecia", "link": "https://stackoverflow.com/users/4293785/piecia"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 51, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1427163213, "creation_date": 1427151109, "last_edit_date": 1427163213, "question_id": 29221916, "link": "https://stackoverflow.com/questions/29221916/search-for-lines-that-do-not-end-with-a-given-character", "title": "Search for lines that do not end with a given character", "body": "<p>I'm searching in a file for lines that do not end with a backslash (<code>\\</code>), but they must begin with some text, so I've written:</p>\n\n<pre><code>if ( $cur_line =~ m{\\A\\s+(.+?)(?!\\\\)\\z/xms ){\n ... # parentheses are only for testing\n}\n</code></pre>\n\n<p>But with the above <code>$1</code> always contains the whole line (without leading spaces) including the backslash at the end. Only the first occurrence of a line without a backslash at the end matches correctly. After this all the lines with trailing backslashes match. Why? What am I doing wrong?</p>\n\n<p>When I use:</p>\n\n<pre><code>if ( $cur_line =~ m{\\A\\s+[^\\\\]+(?!\\\\)\\z/xms ){\n ...\n}\n</code></pre>\n\n<p>it works almost correctly however<code>$cur_line</code> then can contain a backslash.</p>\n\n<p>I've checked the following code:</p>\n\n<pre><code>if ( $cur_line !~ m{\\\\\\z}xms ) {\n</code></pre>\n\n<p>amd it works perfectly. But I'm curious what is wrong with my negative lookahead.</p>\n"}, {"tags": ["perl"], "answers": [{"tags": [], "owner": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "is_accepted": false, "score": 1, "last_activity_date": 1427147022, "creation_date": 1427147022, "answer_id": 29220984, "question_id": 29220817, "link": "https://stackoverflow.com/questions/29220817/perl-remove-digits-from-a-binary-number/29220984#29220984", "title": "Perl remove digits from a binary number", "body": "<pre><code>my $bin18 = reverse join '', (reverse ($bin24 =~ /([01])/g))[0 .. 5, 8 .. 13, 16 ..21];\n</code></pre>\n\n<p>and other variations on the theme.</p>\n"}, {"comments": [{"owner": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "edited": false, "score": 0, "creation_date": 1427150427, "post_id": 29221073, "comment_id": 46652440, "body": "Ah, someone with better pattern recognition +1."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1427150831, "post_id": 29221073, "comment_id": 46652586, "body": "A little narrative would be nice"}], "tags": [], "owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "is_accepted": true, "score": 7, "last_activity_date": 1427150866, "last_edit_date": 1427150866, "creation_date": 1427147329, "answer_id": 29221073, "question_id": 29220817, "link": "https://stackoverflow.com/questions/29220817/perl-remove-digits-from-a-binary-number/29221073#29221073", "title": "Perl remove digits from a binary number", "body": "<pre><code>$bin18 = join '', unpack('x2 a6 x2 a6 x2 a6', $bin24);\n</code></pre>\n"}], "owner": {"reputation": 15, "user_id": 4682176, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/98bd0c0c72e4ae78dd233751b44c0382?s=128&d=identicon&r=PG&f=1", "display_name": "Samss77", "link": "https://stackoverflow.com/users/4682176/samss77"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 71, "favorite_count": 0, "accepted_answer_id": 29221073, "answer_count": 2, "score": 1, "last_activity_date": 1427184980, "creation_date": 1427146294, "last_edit_date": 1427184980, "question_id": 29220817, "link": "https://stackoverflow.com/questions/29220817/perl-remove-digits-from-a-binary-number", "title": "Perl remove digits from a binary number", "body": "<p>I want to remove few digits from a <code>24-bit binary</code> number and convert it to <code>18-bit binary</code> number. </p>\n\n<p>For example:</p>\n\n<p>if Binary number</p>\n\n<pre><code>bin24=111100111011111000100111\n</code></pre>\n\n<p>I want to remove bits <code>23:22</code>, <code>15:14</code> and <code>7:6</code> and the output should be</p>\n\n<pre><code>bin18=110011111110100111\n</code></pre>\n\n<p>I know I can do this using <code>substr()</code> and concatenate. Just wanted to know if I can do this in one line?.</p>\n"}, {"tags": ["python", "html", "perl", "web-crawler"], "comments": [{"owner": {"reputation": 6526, "user_id": 120050, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/0be7e82463532256777530ccaba04d29?s=128&d=identicon&r=PG", "display_name": "Oesor", "link": "https://stackoverflow.com/users/120050/oesor"}, "edited": false, "score": 4, "creation_date": 1427145472, "post_id": 29220506, "comment_id": 46650089, "body": "Can we assume you have permission to do this? <a href=\"https://www.redfin.com/about/terms-of-use\" rel=\"nofollow noreferrer\">redfin.com/about/terms-of-use</a> - F. Webscraping of Listing &amp; Property Data Is Not Allowed Crawling the Redfin.com and network sites is allowed for inclusion in web search engine results only. Webscraping, downloading or webcrawling of any property or other data for inclusion in another real estate search site, content aggregator, or any other purpose is strictly forbidden without prior written consent from Redfin."}, {"owner": {"reputation": 19, "user_id": 3874824, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bed0a883caede3a2537efc288f23596c?s=128&d=identicon&r=PG&f=1", "display_name": "Mithun", "link": "https://stackoverflow.com/users/3874824/mithun"}, "reply_to_user": {"reputation": 6526, "user_id": 120050, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/0be7e82463532256777530ccaba04d29?s=128&d=identicon&r=PG", "display_name": "Oesor", "link": "https://stackoverflow.com/users/120050/oesor"}, "edited": false, "score": 0, "creation_date": 1427146086, "post_id": 29220506, "comment_id": 46650403, "body": "@Oesor It&#39;s for my personal use though"}, {"owner": {"reputation": 159764, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "edited": false, "score": 0, "creation_date": 1427146237, "post_id": 29220506, "comment_id": 46650483, "body": "works fine using python"}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 1, "creation_date": 1427146370, "post_id": 29220506, "comment_id": 46650558, "body": "Re. &quot;It&#39;s for my personal use&quot; I think the key phrase is &quot;or any other purpose.&quot;"}, {"owner": {"reputation": 19, "user_id": 3874824, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bed0a883caede3a2537efc288f23596c?s=128&d=identicon&r=PG&f=1", "display_name": "Mithun", "link": "https://stackoverflow.com/users/3874824/mithun"}, "reply_to_user": {"reputation": 159764, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "edited": false, "score": 0, "creation_date": 1427147326, "post_id": 29220506, "comment_id": 46651068, "body": "I agree, to be more clear, the API scores are off, and I want an easy way to get the school to name which is served in that area and it can look up in an excel sheet which has a correct API. Now, using python as @PadraicCunningham shows the same result in the requests module of python as does Perl."}], "answers": [{"comments": [{"owner": {"reputation": 19, "user_id": 3874824, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bed0a883caede3a2537efc288f23596c?s=128&d=identicon&r=PG&f=1", "display_name": "Mithun", "link": "https://stackoverflow.com/users/3874824/mithun"}, "edited": false, "score": 0, "creation_date": 1427238899, "post_id": 29223182, "comment_id": 46695053, "body": "Thank you ! Much appreciated."}], "tags": [], "owner": {"reputation": 4612, "user_id": 2277510, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/fcffe01e34fc11c789b0a9098e356195?s=128&d=identicon&r=PG&f=1", "display_name": "coder hacker", "link": "https://stackoverflow.com/users/2277510/coder-hacker"}, "is_accepted": true, "score": 1, "last_activity_date": 1427158714, "creation_date": 1427158714, "answer_id": 29223182, "question_id": 29220506, "link": "https://stackoverflow.com/questions/29220506/perl-cannot-get-content-from-html-page-while-the-page-has-all-the-necessary-tag/29223182#29223182", "title": "Perl cannot get content from html page, while the page has all the necessary tags", "body": "<p>You are not getting the result for school is because there is no result of school. The content of the page is populated using javascript, whereas your <code>get</code> method gives <code>HTML</code> without processing with javascript. You need to use something like <code>WWW::Mechanize::Firefox</code> to get your example to work. However note that it will be much slower that <code>LWP</code>.</p>\n\n<p>Here is a sample code</p>\n\n<pre><code>#use LWP::Simple;\nuse WWW::Mechanize::Firefox;\nmy $mech = WWW::Mechanize::Firefox-&gt;new();\n$mech-&gt;get(\"https://www.redfin.com/CA/San-Jose/947-Hummingbird-Dr-95125/home/1309375#schools\");\n#print $mech-&gt;content;\n\nif($mech-&gt;content=~/Willow Glen Middle School/){\n        print \"ya\\n\";\n}\n</code></pre>\n"}], "owner": {"reputation": 19, "user_id": 3874824, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bed0a883caede3a2537efc288f23596c?s=128&d=identicon&r=PG&f=1", "display_name": "Mithun", "link": "https://stackoverflow.com/users/3874824/mithun"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 85, "favorite_count": 0, "accepted_answer_id": 29223182, "answer_count": 1, "score": -1, "last_activity_date": 1427158714, "creation_date": 1427145176, "question_id": 29220506, "link": "https://stackoverflow.com/questions/29220506/perl-cannot-get-content-from-html-page-while-the-page-has-all-the-necessary-tag", "title": "Perl cannot get content from html page, while the page has all the necessary tags", "body": "<p>I'm trying to build a Redfin api, where I'm trying to get the content using LWP::Simple, for this link </p>\n\n<p><a href=\"http://www.redfin.com/CA/San-Jose/947-Hummingbird-Dr-95125/home/1309375#schools\" rel=\"nofollow\">Redfin Link</a></p>\n\n<p>The content I get in a result, doesnot have the deails of the school. What I want is a \"Willow Glen Middle School\" and I have another API, that would take the input of this text and return with an exact API score.</p>\n\n<p>I tried the same thing using Python, still the same result, below I'm dumping a code in perl. Whichever works, I'll take it.</p>\n\n<p>It just has a simple code now : </p>\n\n<pre><code>use LWP::Simple;\n\n$content = get(\"https://www.redfin.com/CA/San-Jose/947-Hummingbird-Dr-95125/home/1309375#schools\");\n\nprint \"Call API\" if($content =~ /Willow Glen Middle School/);\n</code></pre>\n"}, {"tags": ["perl", "hash"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1427145283, "post_id": 29219673, "comment_id": 46649976, "body": "Is this a homework problem? I don&#39;t remember ever seeing a question that the author says is for homework, but Stack Overflow is fine with homework questions so I don&#39;t understand the reticence. Take a look at <a href=\"http://meta.stackexchange.com/q/10811\">this post on the topic</a> from which I take away <i>&quot;Providing an answer that doesn&#39;t help a student learn is not in the student&#39;s own best interest&quot;</i>. So, no, we won&#39;t do everything for you; but assistance is fine"}], "answers": [{"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": true, "score": 5, "last_activity_date": 1427150735, "last_edit_date": 1427150735, "creation_date": 1427142721, "answer_id": 29219799, "question_id": 29219673, "link": "https://stackoverflow.com/questions/29219673/how-to-show-top-values-from-hash-in-perl/29219799#29219799", "title": "How to show top values from hash in perl?", "body": "<p>This will do as you ask. It uses <code>sort</code> with a comparison block that compares each key's corresponding hash value in reverse order. Then each of the first three sorted keys is printed along with its value from the hash.</p>\n\n<p>Note that, if there are multiple hash elements with the same highest value, then this code will print an arbitrary three elements out of those that share the same value</p>\n\n<pre><code>use strict;\nuse warnings;\n\nmy %data = qw/\n  kiwi     15\n  oranges  25\n  cherries 30\n  apples    2\n  pears     1\n/;\n\nmy @sorted_keys = sort { $data{$b} &lt;=&gt; $data{$a}  } keys %data;\n\nfor my $key ( @sorted_keys[0..2] ) {\n  print \"$key $data{$key}\\n\";\n}\n</code></pre>\n\n<p><strong>output</strong></p>\n\n<pre><code>cherries 30\noranges 25\nkiwi 15\n</code></pre>\n\n<hr>\n\n<p><strong>Update</strong></p>\n\n<p>For a more general solution, the (non-core) <a href=\"https://metacpan.org/module/List::UtilsBy\" rel=\"nofollow\"><code>List::UtilsBy</code></a> module offers a number of utility functions that offer sorts, maxima and minima as a function of the object list. It lets me write the above as</p>\n\n<pre><code>use List::UtilsBy qw/ nsort_by /;\n\nmy @sorted_keys = nsort_by { $data{$_} } keys %data;\n\nfor my $key ( (reverse @sorted_keys)[0..2] ) {\n  print \"$key $data{$key}\\n\";\n}\n</code></pre>\n\n<p>or, if you prefer the <em>reverse</em> in a different place</p>\n\n<pre><code>use List::UtilsBy qw/ rev_nsort_by /;\n\nmy @sorted_keys = rev_nsort_by { $data{$_} } keys %data;\n\nfor my $key ( @sorted_keys[0..2] ) {\n  print \"$key $data{$key}\\n\";\n}\n</code></pre>\n\n<p>Observe that the difference between the module's <code>sort_by</code> and <code>nsort_by</code> is equivalent to the difference between the <code>cmp</code> and <code>&lt;=&gt;</code> comparison operators, respectively.</p>\n\n<p>Both of these alternatives generate identical output to the original above</p>\n"}], "owner": {"reputation": 383, "user_id": 4154643, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/HA347.png?s=128&g=1", "display_name": "Kabachok", "link": "https://stackoverflow.com/users/4154643/kabachok"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 56, "favorite_count": 0, "accepted_answer_id": 29219799, "answer_count": 1, "score": 0, "last_activity_date": 1427185524, "creation_date": 1427142296, "last_edit_date": 1427185524, "question_id": 29219673, "link": "https://stackoverflow.com/questions/29219673/how-to-show-top-values-from-hash-in-perl", "title": "How to show top values from hash in perl?", "body": "<p>Let's say I have the following info stored in hash:</p>\n\n<pre><code>kiwi  15\noranges 25\ncherries 30\napples 2\npears 1\n</code></pre>\n\n<p>I want to write code that would display in the descending (by amount) top 3 entries.\nSo the output should be</p>\n\n<pre><code>cherries 30\noranges 25\nkiwi 15\n</code></pre>\n\n<p>I can't seem to find the clear answer on that.</p>\n"}, {"tags": ["perl", "cookies", "mojolicious"], "comments": [{"owner": {"reputation": 14762, "user_id": 282475, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/OZWIJ.jpg?s=128&g=1", "display_name": "shaneburgess", "link": "https://stackoverflow.com/users/282475/shaneburgess"}, "edited": false, "score": 0, "creation_date": 1428517061, "post_id": 29219485, "comment_id": 47199227, "body": "The problem here was that I was running a base64 function to populate my value. This did not return a true string so I just had to set a new var to the return of the base64 function and then use that as the value."}], "answers": [{"tags": [], "owner": {"reputation": 9075, "user_id": 115555, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/591bc2871a751bcdb6916c90f8b041de?s=128&d=identicon&r=PG", "display_name": "John Slavick", "link": "https://stackoverflow.com/users/115555/john-slavick"}, "is_accepted": false, "score": 0, "last_activity_date": 1427199362, "creation_date": 1427199362, "answer_id": 29232437, "question_id": 29219485, "link": "https://stackoverflow.com/questions/29219485/mojolicious-not-setting-cookie-domain/29232437#29232437", "title": "Mojolicious Not Setting Cookie Domain", "body": "<p>Have you tried using <code>Mojo::UserAgent::CookieJar</code>?</p>\n\n<pre><code>my $ua = Mojo::UserAgent-&gt;new;\nmy $jar = Mojo::UserAgent::CookieJar-&gt;new;\n$jar-&gt;add(\n    Mojo::Cookie::Response-&gt;new(\n        name =&gt; \"cookie\",\n        value =&gt; \"1\",\n        domain =&gt; \".mydomain.edu\",\n        path =&gt; \"/\",\n    )\n);\n$ua = $ua-&gt;cookie_jar($jar);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 14762, "user_id": 282475, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/OZWIJ.jpg?s=128&g=1", "display_name": "shaneburgess", "link": "https://stackoverflow.com/users/282475/shaneburgess"}, "is_accepted": true, "score": 0, "last_activity_date": 1428517226, "creation_date": 1428517226, "answer_id": 29522397, "question_id": 29219485, "link": "https://stackoverflow.com/questions/29219485/mojolicious-not-setting-cookie-domain/29522397#29522397", "title": "Mojolicious Not Setting Cookie Domain", "body": "<p>Changed:     </p>\n\n<pre><code>$c-&gt;cookie(\n                goto =&gt; encode_base64('data'),\n                { domain =&gt; \".mydomain.edu\", path =&gt; '/' }\n            );\n</code></pre>\n\n<p>TO:</p>\n\n<pre><code> $goto = encode_base64('data');\n $c-&gt;cookie(\n                    goto =&gt; $goto,\n                    { domain =&gt; \".mydomain.edu\", path =&gt; '/' }\n                );\n</code></pre>\n"}], "owner": {"reputation": 14762, "user_id": 282475, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/OZWIJ.jpg?s=128&g=1", "display_name": "shaneburgess", "link": "https://stackoverflow.com/users/282475/shaneburgess"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 263, "favorite_count": 0, "accepted_answer_id": 29522397, "answer_count": 2, "score": 3, "last_activity_date": 1428517226, "creation_date": 1427141639, "question_id": 29219485, "link": "https://stackoverflow.com/questions/29219485/mojolicious-not-setting-cookie-domain", "title": "Mojolicious Not Setting Cookie Domain", "body": "<p>I have been trying to set a cookie for my domain in this certain Mojolicious application and it will not do it. It keeps setting it to the local machine's domain.</p>\n\n<pre><code> $c-&gt;cookie(\n            goto =&gt; \"DATA\",\n            { domain =&gt; \".mydomain.edu\", path =&gt; '/' }\n        );\n</code></pre>\n\n<p>I have been looking at this for hours and just can't seem to see where it is going wrong. </p>\n\n<p>Any ideas?</p>\n"}, {"tags": ["regex", "perl", "match"], "answers": [{"comments": [{"owner": {"reputation": 52334, "user_id": 702638, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/892f65bc0a8a0949ab88598de7d83cab?s=128&d=identicon&r=PG", "display_name": "Hunter McMillen", "link": "https://stackoverflow.com/users/702638/hunter-mcmillen"}, "edited": false, "score": 1, "creation_date": 1427140788, "post_id": 29219199, "comment_id": 46647437, "body": "Wouldn&#39;t <code>(&#39;6kjkj&#39; =~ &#47;(\\d)&#47;)[0] &gt; 5</code> also work? Seems a little easier to digest."}, {"owner": {"reputation": 1716, "user_id": 695867, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/45d624c0405e2368e571c51fccc69704?s=128&d=identicon&r=PG", "display_name": "Sam Choukri", "link": "https://stackoverflow.com/users/695867/sam-choukri"}, "reply_to_user": {"reputation": 52334, "user_id": 702638, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/892f65bc0a8a0949ab88598de7d83cab?s=128&d=identicon&r=PG", "display_name": "Hunter McMillen", "link": "https://stackoverflow.com/users/702638/hunter-mcmillen"}, "edited": false, "score": 1, "creation_date": 1427147709, "post_id": 29219199, "comment_id": 46651250, "body": "@HunterMcMillen: That would result in <code>uninitialized value</code> warning if the match doesn&#39;t find any digits.  Here is another alternative that avoids this problem and is still simple: <code>if (&#39;6kjkj&#39; =~ &#47;(\\d)&#47; &amp;&amp; $1 &gt; 5) {...</code>"}], "tags": [], "owner": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "is_accepted": true, "score": 2, "last_activity_date": 1427150665, "last_edit_date": 1427150665, "creation_date": 1427140646, "answer_id": 29219199, "question_id": 29219128, "link": "https://stackoverflow.com/questions/29219128/using-results-of-regular-expression-in-a-comparison/29219199#29219199", "title": "Using results of regular expression in a comparison", "body": "<p>List versus scalar context:</p>\n\n<pre><code>if (('6kjkjd' =~ /(\\d)/)[0] &gt; 5) {\n    print \"Why isn't this printing? 6 is greater than 5.\";\n}\n</code></pre>\n\n<p>Basically, within the confines of an <code>if</code>-condition, you are in scalar context.</p>\n\n<p>When you write:</p>\n\n<pre><code>my $start;\nif ((($start) = '6kjkj' =~ /(\\d)/) &gt; 5)\n</code></pre>\n\n<p>The assignment to <code>$start</code> happens, but the list <code>($start)</code> has just one element.</p>\n\n<p>If you insist on writing a complicated expression instead of breaking things into pieces, you can take advantage of the comma operator:</p>\n\n<pre><code>if ((($start) = '6kjkj' =~ /(\\d)/), $start &gt; 5) {\n  print \"Why isn't this printing? 6 is greater than 5.\";\n}\n</code></pre>\n\n<p>As Sam Choukri points out in the comments,</p>\n\n<pre><code>if (('6kjkj' =~ /(\\d)/) and ($1 &gt; 5)) {\n</code></pre>\n\n<p>is safer, and simpler, than both alternatives that first came to my mind.</p>\n"}, {"tags": [], "owner": {"reputation": 2836, "user_id": 1115187, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/05364753a2a421091c20c9da538b464b?s=128&d=identicon&r=PG", "display_name": "maxkoryukov", "link": "https://stackoverflow.com/users/1115187/maxkoryukov"}, "is_accepted": false, "score": 2, "last_activity_date": 1427185419, "last_edit_date": 1427185419, "creation_date": 1427140792, "answer_id": 29219262, "question_id": 29219128, "link": "https://stackoverflow.com/questions/29219128/using-results-of-regular-expression-in-a-comparison/29219262#29219262", "title": "Using results of regular expression in a comparison", "body": "<p>That's because operator <code>=~</code> in scalar context returns success of an operation.</p>\n\n<p>Lets make <code>list-context</code> (by adding <code>[0]</code>):</p>\n\n<pre><code>if ((('6kjkjd' =~ /(\\d)/)[0]) &gt; 5)\n{\n  print \"Why isn't this printing? 6 is greater than 5.\";\n}\n</code></pre>\n"}], "owner": {"reputation": 2287, "user_id": 1641112, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/00bee18fb974a0057fb61a56faf66052?s=128&d=identicon&r=PG", "display_name": "StevieD", "link": "https://stackoverflow.com/users/1641112/stevied"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 54, "favorite_count": 0, "accepted_answer_id": 29219199, "answer_count": 2, "score": 0, "last_activity_date": 1427185419, "creation_date": 1427140333, "question_id": 29219128, "link": "https://stackoverflow.com/questions/29219128/using-results-of-regular-expression-in-a-comparison", "title": "Using results of regular expression in a comparison", "body": "<p>I'm trying to use the result of pattern match in a comparison operation. Can't seem to get it to work.</p>\n\n<p>The if statement returns false here:</p>\n\n<pre><code>if (('6kjkjd' =~ /(\\d)/) &gt; 5) {\n  print \"Why isn't this printing? 6 is greater than 5.\";\n}\n</code></pre>\n\n<p>As well as here:</p>\n\n<pre><code>my $start;\nif ((($start) = '6kjkj' =~ /(\\d)/) &gt; 5) {\n  print \"Why isn't this printing? 6 is greater than 5.\";\n}\n</code></pre>\n\n<p>I've tried removing the parens from the left side of comparison operation but that always results in a true value:</p>\n\n<pre><code>my $start;\nif (($start) = '6kjkj' =~ /(\\d)/ &gt; 7) {\n  print \"This gets printed even though 6 is not greater than 7.\";\n}\n</code></pre>\n\n<p>I realize I could break this into two lines like so:</p>\n\n<pre><code>my ($start) = '6kjkj' =~ /(\\d)/;\nif ($start &gt; 5) {\n  print \"This works as expected.\";\n}\n</code></pre>\n\n<p>Still, I'm curious to know why the first three code examples don't work as you might expect.</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1427138625, "post_id": 29217917, "comment_id": 46646247, "body": "Is this a homework question? It&#39;s okay, we will answer homework questions. But hopefully, if we know, the answer will be geared more towards helping you to learn rather than getting you out of a hole"}], "answers": [{"comments": [{"owner": {"reputation": 9, "user_id": 4703183, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5933f2688612568d6252f8ccd6c4492?s=128&d=identicon&r=PG&f=1", "display_name": "markenr1", "link": "https://stackoverflow.com/users/4703183/markenr1"}, "edited": false, "score": 0, "creation_date": 1427136642, "post_id": 29218029, "comment_id": 46645064, "body": "That&#39;s good. But I don&#39;t want to split strings that has 4 characters or less. They are to be treated as words, so &quot;IS&quot; &quot;A&quot; &quot;TO&quot; &quot;BE&quot; never changes, and in &quot;SHUFFLED&quot; S &amp; D don&#39;t changes places."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 9, "user_id": 4703183, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5933f2688612568d6252f8ccd6c4492?s=128&d=identicon&r=PG&f=1", "display_name": "markenr1", "link": "https://stackoverflow.com/users/4703183/markenr1"}, "edited": false, "score": 0, "creation_date": 1427138444, "post_id": 29218029, "comment_id": 46646135, "body": "Okay, so what do you mean by <i>&quot;<code>$string[0]</code> and <code>[-1]</code> remains untouched, other elements in between is supposed to be shuffled randomly&quot;</i>. Do you want to shuffle all words in the sentence that are longer that four characters, while keeping the first and last letters of each word in place?"}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 0, "last_activity_date": 1427138547, "last_edit_date": 1427138547, "creation_date": 1427136384, "answer_id": 29218029, "question_id": 29217917, "link": "https://stackoverflow.com/questions/29217917/perl-shuffle-letters/29218029#29218029", "title": "Perl shuffle letters", "body": "<p>This is what you're looking for. I can't think what commentary I should provide, so please ask questions if you need to</p>\n\n<pre><code>use strict;\nuse warnings;\n\nuse List::Util qw(shuffle);\n\nmy $string= \"I have constructed a string that needs to be shuffled\";\nmy @ch = split //, $string;\nmy $shuffled = join '', $ch[0], shuffle(@ch[1..$#ch-1]), $ch[-1];\n\nprint $shuffled, \"\\n\";\n</code></pre>\n\n<p><strong>example output</strong></p>\n\n<pre><code>Isedr  hricfes  enandts afltashnou t gothetucte evb d\n</code></pre>\n\n<hr>\n\n<p><strong>Update</strong></p>\n\n<p>I think I understand you better, although you haven't confirmed. This may do what you ask. But is this a homework question?</p>\n\n<pre><code>use strict;\nuse warnings;\n\nuse List::Util qw/ shuffle /;\n\nmy $string= \"I have constructed a string that needs to be shuffled\";\n\nmy @string = map {\n  /\\S/ &amp;&amp; length($_) &gt; 4 ? shuffle_word($_) : $_\n} split /(\\s+)/, $string;\n\nprint join('', @string), \"\\n\";\n\n\nsub shuffle_word {\n  my ($word) = @_;\n  my @word = split //, $word;\n  join '', $word[0], shuffle(@word[1..$#word-1]), $word[-1];\n}\n</code></pre>\n\n<p><strong>example output</strong></p>\n\n<pre><code>I have csrtuoetcnd a snrtig that ndees to be shlfeufd\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 9, "user_id": 4703183, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5933f2688612568d6252f8ccd6c4492?s=128&d=identicon&r=PG&f=1", "display_name": "markenr1", "link": "https://stackoverflow.com/users/4703183/markenr1"}, "edited": false, "score": 0, "creation_date": 1427136753, "post_id": 29218070, "comment_id": 46645122, "body": "Again thank you, but. The first and last letter in each word should not change, and if the words are less than 4 characters, they are to be ignored. Hope I make myself clear. Cheers tho!"}, {"owner": {"reputation": 6526, "user_id": 120050, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/0be7e82463532256777530ccaba04d29?s=128&d=identicon&r=PG", "display_name": "Oesor", "link": "https://stackoverflow.com/users/120050/oesor"}, "reply_to_user": {"reputation": 9, "user_id": 4703183, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5933f2688612568d6252f8ccd6c4492?s=128&d=identicon&r=PG&f=1", "display_name": "markenr1", "link": "https://stackoverflow.com/users/4703183/markenr1"}, "edited": false, "score": 0, "creation_date": 1427136824, "post_id": 29218070, "comment_id": 46645166, "body": "Then split the words apart with a split on whitespace then shuffle each using the above."}, {"owner": {"reputation": 9, "user_id": 4703183, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5933f2688612568d6252f8ccd6c4492?s=128&d=identicon&r=PG&f=1", "display_name": "markenr1", "link": "https://stackoverflow.com/users/4703183/markenr1"}, "edited": false, "score": 0, "creation_date": 1427137247, "post_id": 29218070, "comment_id": 46645419, "body": "I&#39;m having difficulties understandig you, I&#39;m eager to learn, perhaps its just a noob vs pro, or a language barrier. How would I split each?"}, {"owner": {"reputation": 6526, "user_id": 120050, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/0be7e82463532256777530ccaba04d29?s=128&d=identicon&r=PG", "display_name": "Oesor", "link": "https://stackoverflow.com/users/120050/oesor"}, "reply_to_user": {"reputation": 9, "user_id": 4703183, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5933f2688612568d6252f8ccd6c4492?s=128&d=identicon&r=PG&f=1", "display_name": "markenr1", "link": "https://stackoverflow.com/users/4703183/markenr1"}, "edited": false, "score": 0, "creation_date": 1427137406, "post_id": 29218070, "comment_id": 46645525, "body": "Split on <code>&#47;\\s+&#47;</code> which will give a list of word strings then sort each word."}], "tags": [], "owner": {"reputation": 6526, "user_id": 120050, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/0be7e82463532256777530ccaba04d29?s=128&d=identicon&r=PG", "display_name": "Oesor", "link": "https://stackoverflow.com/users/120050/oesor"}, "is_accepted": false, "score": 1, "last_activity_date": 1427136541, "creation_date": 1427136541, "answer_id": 29218070, "question_id": 29217917, "link": "https://stackoverflow.com/questions/29217917/perl-shuffle-letters/29218070#29218070", "title": "Perl shuffle letters", "body": "<p>You're on the right track.</p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\nuse List::Util qw(shuffle);\n\nmy $string= \"I have constructed a string that needs to be shuffled\";\n\nmy @characters = split(//,$string);\n\nforeach (@characters) {\n    print($_, \"\\n\");\n}\n\nmy @shuffled;\n\n# assign the first and last elements to the shuffled array\n$shuffled[0] = $characters[0];\n$shuffled[$#characters] = $characters[$#characters];\n\n@shuffled[1 .. $#characters - 1]  = shuffle(@characters[1 .. $#characters - 1]);\n\nforeach (@shuffled) {\n    print($_, \"\\n\");\n}\n</code></pre>\n\n<p>Issues:</p>\n\n<ol>\n<li>Use strict, use warnings. Your code refers to a @character array you didn't define: <code>$character[1]</code></li>\n<li>$#array gives the last index (not the length!) of @array. You use the array in scalar context ($array) which gives the length where you wanted the last index.</li>\n<li>Corrected your list slice syntax</li>\n</ol>\n"}, {"comments": [{"owner": {"reputation": 25491, "user_id": 49197, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/15ebf24a33a29b9efbf9924f530dd736?s=128&d=identicon&r=PG", "display_name": "Hynek -Pichi- Vychodil", "link": "https://stackoverflow.com/users/49197/hynek-pichi-vychodil"}, "edited": false, "score": 0, "creation_date": 1427137163, "post_id": 29218146, "comment_id": 46645364, "body": "Well, downvoting troll strikes again. BTW it works and do what described in question."}, {"owner": {"reputation": 9, "user_id": 4703183, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5933f2688612568d6252f8ccd6c4492?s=128&d=identicon&r=PG&f=1", "display_name": "markenr1", "link": "https://stackoverflow.com/users/4703183/markenr1"}, "edited": false, "score": 0, "creation_date": 1427137265, "post_id": 29218146, "comment_id": 46645434, "body": "That&#39;s nice, but I really can&#39;t understand it :)"}, {"owner": {"reputation": 9, "user_id": 4703183, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5933f2688612568d6252f8ccd6c4492?s=128&d=identicon&r=PG&f=1", "display_name": "markenr1", "link": "https://stackoverflow.com/users/4703183/markenr1"}, "edited": false, "score": 0, "creation_date": 1427137287, "post_id": 29218146, "comment_id": 46645453, "body": "Care to elobarate exactly what it does?"}, {"owner": {"reputation": 9, "user_id": 4703183, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5933f2688612568d6252f8ccd6c4492?s=128&d=identicon&r=PG&f=1", "display_name": "markenr1", "link": "https://stackoverflow.com/users/4703183/markenr1"}, "edited": false, "score": 0, "creation_date": 1427137344, "post_id": 29218146, "comment_id": 46645484, "body": "I understand the regex, and that it replaces the $1 from the subroutine. but the my @ch = split //, shift; # /     join &#39;&#39;, $ch[0], shuffle( @ch[ 1 .. $#ch - 1 ] ), $ch[-1]; part is unclear to me"}, {"owner": {"reputation": 25491, "user_id": 49197, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/15ebf24a33a29b9efbf9924f530dd736?s=128&d=identicon&r=PG", "display_name": "Hynek -Pichi- Vychodil", "link": "https://stackoverflow.com/users/49197/hynek-pichi-vychodil"}, "reply_to_user": {"reputation": 9, "user_id": 4703183, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5933f2688612568d6252f8ccd6c4492?s=128&d=identicon&r=PG&f=1", "display_name": "markenr1", "link": "https://stackoverflow.com/users/4703183/markenr1"}, "edited": false, "score": 0, "creation_date": 1427137621, "post_id": 29218146, "comment_id": 46645656, "body": "<code>my @ch = split &#47;&#47;, shift;</code> splits argument of function taken by <code>shift</code> (it is shorthand for <code>shift(@_)</code>) by each char. <code># &#47;</code> is there just to fix wrong syntax highliting. <code>join &#39;&#39;, $ch[0], shuffle( @ch[ 1 .. $#ch - 1 ] ), $ch[-1];</code> suffles and joins string back together."}, {"owner": {"reputation": 52334, "user_id": 702638, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/892f65bc0a8a0949ab88598de7d83cab?s=128&d=identicon&r=PG", "display_name": "Hunter McMillen", "link": "https://stackoverflow.com/users/702638/hunter-mcmillen"}, "edited": false, "score": 1, "creation_date": 1427138561, "post_id": 29218146, "comment_id": 46646216, "body": "It might be easier to explain in the body of the answer, comments with code in them aren&#39;t the easiest thing to read."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1427139108, "post_id": 29218146, "comment_id": 46646531, "body": "@Hynek-Pichi-Vychodil: You really aren&#39;t such a threat that people will downvote you out of jealousy. Please understand that it is simply because your Perl code is poor, and because your answers don&#39;t explain the solution. I anticipate another question about what is wrong with your code,  so I will say that it it the use of <code># &#47;</code> and the substitute modifiers <code>&#47;e</code> and <code>&#47;r</code> without explanation or comment. My own answer is nearly as bad, and that is because I think I am writing someone&#39;s homework, so I wanted to leave evidence that the OP hadn&#39;t done it himself."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1427140815, "post_id": 29218146, "comment_id": 46647449, "body": "I should also say that the manner of your posts is boastful rather than humbly helpful, and your code is complex and concise rather than clear and explicit. Even your belief that people are ganging up to vote against you is pompous"}], "tags": [], "owner": {"reputation": 25491, "user_id": 49197, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/15ebf24a33a29b9efbf9924f530dd736?s=128&d=identicon&r=PG", "display_name": "Hynek -Pichi- Vychodil", "link": "https://stackoverflow.com/users/49197/hynek-pichi-vychodil"}, "is_accepted": false, "score": -1, "last_activity_date": 1427140622, "last_edit_date": 1427140622, "creation_date": 1427136818, "answer_id": 29218146, "question_id": 29217917, "link": "https://stackoverflow.com/questions/29217917/perl-shuffle-letters/29218146#29218146", "title": "Perl shuffle letters", "body": "<p>If you want shuffle each word with four or more characters you can do it in this way.</p>\n\n<ul>\n<li><p><code>my @ch = split //, shift</code> splits the argument of function taken by <code>shift</code> (it is shorthand for <code>shift(@_)</code>) by each char.</p></li>\n<li><p><code># /</code> is there just to fix wrong syntax highlighting.</p></li>\n<li><p><code>join '', $ch[0], shuffle( @ch[ 1 .. $#ch - 1 ] ), $ch[-1]</code> shuffles and joins the string back together.</p></li>\n</ul>\n\n<p>&nbsp;</p>\n\n<pre><code>use strict;\nuse warnings;\nuse List::Util qw(shuffle);\n\nmy $string = \"I have constructed a string that needs to be shuffled\";\n\nsub shuffle_str {\n    my @ch = split //, shift; # /\n    join '', $ch[0], shuffle( @ch[ 1 .. $#ch - 1 ] ), $ch[-1];\n}\n\nmy $shuffled = $string =~ s/(\\w{4,})/shuffle_str($1)/ger;\n\nprint $shuffled, \"\\n\";\n</code></pre>\n\n<p>And sample output</p>\n\n<pre><code>I have cutscntroed a sritng taht nedes to be sufehfld\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 98433, "user_id": 368630, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/107085826cfbb2700f535417a12c89cb?s=128&d=identicon&r=PG", "display_name": "David W.", "link": "https://stackoverflow.com/users/368630/david-w"}, "is_accepted": false, "score": 1, "last_activity_date": 1427142236, "creation_date": 1427142236, "answer_id": 29219660, "question_id": 29217917, "link": "https://stackoverflow.com/questions/29217917/perl-shuffle-letters/29219660#29219660", "title": "Perl shuffle letters", "body": "<p>If I understand what you want, you have a string like this:</p>\n\n<pre><code> I have constructed a string that needs to be shuffled\n</code></pre>\n\n<p>and you want to shuffle all of the words. However, if a word is a small word, you want to combine it with a longer word. For example, you want to divide the string like this:</p>\n\n<pre><code> I | have | constructed | a string | that | needs | to be | shuffled\n</code></pre>\n\n<p>You want the first and last word to remain in place:</p>\n\n<pre><code> I ??? shuffled\n</code></pre>\n\n<p>And you want all the others shuffled:</p>\n\n<pre><code> I constructed have needs that a string to be | shuffled\n</code></pre>\n\n<p>I like to take things one at a time:</p>\n\n<ol>\n<li>Divide the string into separate words.</li>\n<li>Create an array of all the words you want to shuffle.</li>\n<li>Go through that array of words, and if a word is less than the minimum amount, append the following word.</li>\n<li>Shuffle that array you created in Step #3</li>\n<li>Print your sentence</li>\n</ol>\n\n<p>Here's the program:</p>\n\n<pre><code>#! /usr/bin/env perl\n\nuse strict;\nuse warnings;\nuse feature qw(say);\n\nuse List::Util qw(shuffle);\n\nuse constant {\n    MIN_WORD_LENGTH =&gt; 4,\n    SENTENCE        =&gt; \"I have constructed a string that needs to be shuffled\",\n};\n\n\n#\n# Split the sentence into words\n#\nmy @sentence = split /\\s+/, SENTENCE;\n\n#\n# @words are the words to be shuffled\n#\nmy @words = @sentence[1..$#sentence - 1];\n\nmy @combined_words;     #Same as @words but smaller words are combined\nmy $word_to_push;\nfor my $word (@words) {\n    #\n    # Combine short words with the next one\n    #\n    if ( not defined $word_to_push ) {\n        $word_to_push = $word;\n    }\n    else {\n        $word_to_push .= \" \" . $word;\n    }\n    #\n    # If the word_to_push is long enough, push it\n    #\n    if ( length $word_to_push &gt;= MIN_WORD_LENGTH ) {\n        push @combined_words, $word_to_push;\n        undef $word_to_push;\n    }\n}\n\n#\n# Now shuffle the words\nmy @shuffle_words  = shuffle @combined_words;\nsay \"$sentence[0] @shuffle_words $sentence[-1]\";\n</code></pre>\n\n<p>And the results are (running three times):</p>\n\n<pre><code>I that a string have constructed needs to be shuffled\nI to be that a string needs constructed have shuffled\nI that to be a string constructed have needs shuffled\n</code></pre>\n"}], "owner": {"reputation": 9, "user_id": 4703183, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5933f2688612568d6252f8ccd6c4492?s=128&d=identicon&r=PG&f=1", "display_name": "markenr1", "link": "https://stackoverflow.com/users/4703183/markenr1"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1064, "favorite_count": 1, "answer_count": 4, "score": -2, "last_activity_date": 1427142236, "creation_date": 1427135981, "last_edit_date": 1427136362, "question_id": 29217917, "link": "https://stackoverflow.com/questions/29217917/perl-shuffle-letters", "title": "Perl shuffle letters", "body": "<p>Done below I have string, that it being split by each character. I want to split each words that has 4 or more letters. Basically $string[0] and [-1] remains untouched, other elements in between is supposed to be shuffled randomly.\nAnd then joined with element 0 and -1. This is incredibly difficult for me.\nAny ideas?</p>\n\n<p>My desired output would be something like this (different each time obviosuly):\nI hvae cnotrucetd a srtnig taht ndees to be suffelhd</p>\n\n<pre><code> #!/usr/bin/perl\n        use List::Util qw(shuffle);\n\n        my $string= \"I have constructed a string that needs to be shuffled\";\n\n        my @characters = split(//,$string);\n        foreach (@characters) {\n        print($_, \"\\n\");\n        }\n\n@characters = shuffle($character[1](@characters[1..$characters-1]));\n</code></pre>\n"}, {"tags": ["python", "linux", "bash", "perl", "split"], "comments": [{"owner": {"reputation": 36141, "user_id": 4354477, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/SuxtS.gif?s=128&g=1", "display_name": "ForceBru", "link": "https://stackoverflow.com/users/4354477/forcebru"}, "edited": false, "score": 0, "creation_date": 1427134230, "post_id": 29217372, "comment_id": 46643710, "body": "Do you want python, perl or bash code?"}, {"owner": {"reputation": 5139, "user_id": 3293148, "user_type": "registered", "accept_rate": 99, "profile_image": "https://www.gravatar.com/avatar/a5b0a16cfd67f7e3944d886fd1bebde5?s=128&d=identicon&r=PG", "display_name": "Jasmine Lognnes", "link": "https://stackoverflow.com/users/3293148/jasmine-lognnes"}, "reply_to_user": {"reputation": 36141, "user_id": 4354477, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/SuxtS.gif?s=128&g=1", "display_name": "ForceBru", "link": "https://stackoverflow.com/users/4354477/forcebru"}, "edited": false, "score": 0, "creation_date": 1427134458, "post_id": 29217372, "comment_id": 46643819, "body": "I am open to all of them =) The one that can solve the problem easiest =)"}, {"owner": {"reputation": 9289, "user_id": 2572431, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/2ad85f81981e5365a21d94114f3926b2?s=128&d=identicon&r=PG", "display_name": "augurar", "link": "https://stackoverflow.com/users/2572431/augurar"}, "edited": false, "score": 0, "creation_date": 1427134827, "post_id": 29217372, "comment_id": 46644018, "body": "In what way does <code>csplit</code> not work?"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 2, "creation_date": 1427135133, "post_id": 29217372, "comment_id": 46644192, "body": "There isn&#39;t anything special about <i>binary</i> files other than that they often contain bytes that wouldn&#39;t appear in a text file, and they don&#39;t look nice when you print them. They&#39;re still a sequence of octets that must be comprehended, and most decent languages let you do just that."}, {"owner": {"reputation": 9289, "user_id": 2572431, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/2ad85f81981e5365a21d94114f3926b2?s=128&d=identicon&r=PG", "display_name": "augurar", "link": "https://stackoverflow.com/users/2572431/augurar"}, "edited": false, "score": 0, "creation_date": 1427135186, "post_id": 29217372, "comment_id": 46644229, "body": "Possibly related: <a href=\"https://unix.stackexchange.com/questions/81276/splitting-a-large-binary-file-into-sections-determined-by-context-patterns\" title=\"splitting a large binary file into sections determined by context patterns\">unix.stackexchange.com/questions/81276/&hellip;</a>"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 2, "creation_date": 1427135248, "post_id": 29217372, "comment_id": 46644262, "body": "<code>csplit</code> works on a line basis."}], "answers": [{"comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1427135912, "post_id": 29217670, "comment_id": 46644649, "body": "This won&#39;t work on Windows because the Perl IO layer <code>:crlf</code> has removed carriage returns characters <code>&quot;\\x0D&quot;</code> before your program sees the data. It also won&#39;t work on old-style Mac boxes, but that&#39;s less likely."}, {"owner": {"reputation": 1716, "user_id": 695867, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/45d624c0405e2368e571c51fccc69704?s=128&d=identicon&r=PG", "display_name": "Sam Choukri", "link": "https://stackoverflow.com/users/695867/sam-choukri"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1427136178, "post_id": 29217670, "comment_id": 46644804, "body": "Thanks @Borodin. That&#39;s good to know. In this case, the OP is looking for a solution for Linux, but it is better to strive for cross-platform compatibility."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1427136891, "post_id": 29217670, "comment_id": 46645213, "body": "That&#39;s why it&#39;s a <i>comment</i> :)  What many people don&#39;t get is that Stack Overflow isn&#39;t a forum, where one individual&#39;s problem can be discussed to find them a solution, but more of a Wikipedia of solutions to programming problems. The OP should be very low on your list of people to satisfy because, if it is a good question, there will be another thousand that follow them searching for a solution to a similar problem. If those others come across your solution that <i>looks</i> like it should do what they want then you have let them down."}, {"owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 0, "creation_date": 1427138422, "post_id": 29217670, "comment_id": 46646125, "body": "It is trivial to turn off the <code>:crlf</code> layer on Windows. or to turn it on for other platforms."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 0, "creation_date": 1427142418, "post_id": 29217670, "comment_id": 46648368, "body": "@mob: Yes, it is trivial to do. But knowing that is necessary is more of a game of chance"}], "tags": [], "owner": {"reputation": 1716, "user_id": 695867, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/45d624c0405e2368e571c51fccc69704?s=128&d=identicon&r=PG", "display_name": "Sam Choukri", "link": "https://stackoverflow.com/users/695867/sam-choukri"}, "is_accepted": false, "score": 1, "last_activity_date": 1427135214, "creation_date": 1427135214, "answer_id": 29217670, "question_id": 29217372, "link": "https://stackoverflow.com/questions/29217372/split-binary-file-based-on-string/29217670#29217670", "title": "Split binary file based on string", "body": "<p>You could change the input record separator <code>$/</code> to be the specific search string you want to split on (by default, it is a newline). Then as you read the input file, print each record to a new unique file:</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\n\n# change the input record separator to whatever string you want\n$/ = \"SOME STRING\";\n\nmy $file_num = 0;\nwhile (my $data = &lt;&gt;) {\n  chomp $data; # remove input record separator\n  my $file = \"file.\" . ++$file_num;\n  open my $fh, '&gt;', $file or die \"can't open file: $file: $!\\n\";\n  print $fh $data;\n  close $fh;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": true, "score": 2, "last_activity_date": 1427137030, "last_edit_date": 1427137030, "creation_date": 1427135486, "answer_id": 29217753, "question_id": 29217372, "link": "https://stackoverflow.com/questions/29217372/split-binary-file-based-on-string/29217753#29217753", "title": "Split binary file based on string", "body": "<p>There isn't anything special about binary files other than that they often contain data that wouldn't appear in a text file, and they don't look nice when you print them. They're still a sequence of octets that must be comprehended, and most decent languages let you do just that.</p>\n\n<p>An example may help.</p>\n\n<p>You don't describe the string that you want to use as a separator, and you don't say what you want to do with each chunk once it has been read, so here is a Perl program that reads the 1GB original file in chunks that end with <code>specific ASCII string</code> and writes them out one at a time to a new file. So it rather clumsily copies the file.</p>\n\n<pre><code>use strict;\nuse warnings;\n\nopen my $fh, '&lt;:raw', '1GBfile' or die $!;\nlocal $/ = 'specific ASCII string';\n\nopen my $out_fh, '&gt;:raw', 'new1GBfile' or die $!;\nselect $out_fh;\n\nprint while &lt;$fh&gt;;\n\nclose $out_fh or die $!;\n</code></pre>\n\n<p>Depending on what you're doing with the data from the file, you may find <a href=\"https://metacpan.org/pod/File::Map\" rel=\"nofollow\"><code>File::Map</code></a> useful</p>\n"}], "owner": {"reputation": 5139, "user_id": 3293148, "user_type": "registered", "accept_rate": 99, "profile_image": "https://www.gravatar.com/avatar/a5b0a16cfd67f7e3944d886fd1bebde5?s=128&d=identicon&r=PG", "display_name": "Jasmine Lognnes", "link": "https://stackoverflow.com/users/3293148/jasmine-lognnes"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1008, "favorite_count": 0, "accepted_answer_id": 29217753, "answer_count": 2, "score": -1, "last_activity_date": 1427137030, "creation_date": 1427134161, "question_id": 29217372, "link": "https://stackoverflow.com/questions/29217372/split-binary-file-based-on-string", "title": "Split binary file based on string", "body": "<p>I have 170 1GB binary files, where I would like to split them everytime I find specific ASCII strings. Some of these strings also have newlines.</p>\n\n<p><code>csplit</code> seams like the perfect tool for this task, but it seams it doesn't work on binary files.</p>\n\n<p><strong>Question</strong></p>\n\n<p>If I convert the search strings to hex/binary, does that make the problem easier to solve, so it is binary search in binary data?</p>\n\n<p>If not, how do I split binary files based in ASCII strings where some of them have newlines?</p>\n"}, {"tags": ["regex", "performance", "perl"], "comments": [{"owner": {"reputation": 52445, "user_id": 1253222, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d3a62746fb04e19c1656cd1df560911f?s=128&d=identicon&r=PG", "display_name": "twalberg", "link": "https://stackoverflow.com/users/1253222/twalberg"}, "edited": false, "score": 0, "creation_date": 1427137953, "post_id": 29217346, "comment_id": 46645853, "body": "Another possible factor (i.e. may not be the entire picture) is the regex data structures becoming large enough that they no longer fit in your L1/L2/L3 cache..."}, {"owner": {"reputation": 18466, "user_id": 477563, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/07a89fb7b2fd8ece1e9e39e95e004a36?s=128&d=identicon&r=PG", "display_name": "Mr. Llama", "link": "https://stackoverflow.com/users/477563/mr-llama"}, "edited": false, "score": 2, "creation_date": 1427140011, "post_id": 29217346, "comment_id": 46647033, "body": "While I feel that this question very well deserves an answer, I also feel that for practical purposes you should be using a map lookup instead of a 16k item regular expression."}, {"owner": {"reputation": 44559, "user_id": 411022, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9905bf9a7b8d5a587c1bdff07ef2e801?s=128&d=identicon&r=PG", "display_name": "Ilmari Karonen", "link": "https://stackoverflow.com/users/411022/ilmari-karonen"}, "reply_to_user": {"reputation": 18466, "user_id": 477563, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/07a89fb7b2fd8ece1e9e39e95e004a36?s=128&d=identicon&r=PG", "display_name": "Mr. Llama", "link": "https://stackoverflow.com/users/477563/mr-llama"}, "edited": false, "score": 0, "creation_date": 1427140143, "post_id": 29217346, "comment_id": 46647094, "body": "@Mr.Llama: Certainly. The original script was for about 500 alternatives, for which the regex solution works fine. I was just curious about how it would scale."}], "answers": [{"tags": [], "owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "is_accepted": true, "score": 17, "last_activity_date": 1427164475, "last_edit_date": 1427164475, "creation_date": 1427138369, "answer_id": 29218624, "question_id": 29217346, "link": "https://stackoverflow.com/questions/29217346/why-does-adding-one-more-alternative-make-my-regex-over-600-times-slower/29218624#29218624", "title": "Why does adding one more alternative make my regex over 600 times slower?", "body": "<p>For a long time, perl's TRIE optimization has not been applied where the initial compilation of the regex produces longjmp instead of jmp (I think) instructions (which depends on the number of alternations and the total lengths of the strings involved and what else is (earlier?) in the regex).</p>\n\n<p>See the difference between:</p>\n\n<pre><code>perl -we'use re \"debug\"; qr/@{[join\"|\",\"a\"..\"afhd\"]}/'\n</code></pre>\n\n<p>and</p>\n\n<pre><code>perl -we'use re \"debug\"; qr/@{[join\"|\",\"a\"..\"afhe\"]}/'\n</code></pre>\n\n<p>You can break your alternation down into smaller chunks and precompile them separately and do e.g. <code>(??{$rxa})|(??{$rxb})|(??{$rxc})</code>.</p>\n"}], "owner": {"reputation": 44559, "user_id": 411022, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9905bf9a7b8d5a587c1bdff07ef2e801?s=128&d=identicon&r=PG", "display_name": "Ilmari Karonen", "link": "https://stackoverflow.com/users/411022/ilmari-karonen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 417, "favorite_count": 4, "accepted_answer_id": 29218624, "answer_count": 1, "score": 22, "last_activity_date": 1427164475, "creation_date": 1427134066, "last_edit_date": 1492086167, "question_id": 29217346, "link": "https://stackoverflow.com/questions/29217346/why-does-adding-one-more-alternative-make-my-regex-over-600-times-slower", "title": "Why does adding one more alternative make my regex over 600 times slower?", "body": "<p>I noticed <a href=\"https://askubuntu.com/questions/599840/delete-files-that-arent-in-a-list-of-patterns/599980#comment837413_599980\">something weird</a> while testing a simple Perl script that's supposed to filter out filenames beginning with certain prefixes.</p>\n\n<p>Basically, I'm constructing a regex like this:</p>\n\n\n\n<pre class=\"lang-perl prettyprint-override\"><code>my $regex = join \"|\", map quotemeta, @prefixes;\n$regex = qr/^($regex)/;   # anchor the regex and precompile it\n</code></pre>\n\n<p>Here, in the scenario I originally tested, <code>@prefixes</code> consists of 32-character hexadecimal strings.  What I found is that everything ran nice and smoothly up to 6,552 prefixes &mdash; but as soon as I tried 6,553, the execution time of <a href=\"https://askubuntu.com/questions/599840/delete-files-that-arent-in-a-list-of-patterns/599980\">the script</a> jumped by a factor of over 25 (from 1.8 seconds to 51 seconds)!</p>\n\n<p>I played around with it, and constructed the following benchmark.  I originally used 32-character hex strings, like in my original program, but found that if I cut the length of the strings down to just 8 characters, the threshold value moved higher &mdash; to 16,383, in fact &mdash; while the slowdown factor got dramatically higher yet: the regexp with 16,383 alternatives is almost 650 times slower than the one with only 16,382!</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\nuse Benchmark qw(timethese cmpthese);\n\nmy $count = shift || 10;\n\nour @items = map unpack(\"H8\", pack \"V\", $_), 0..99999;\n\nour $nA = 16382; our $reA = join \"|\", @items[1 .. $nA];\nour $nB = 16383; our $reB = join \"|\", @items[1 .. $nB];\n\n$_ = qr/^($_)/ for $reA, $reB;  # anchor and compile regex\n\nmy $results = timethese( $count, {\n    $nA =&gt; q{ our (@items, $nA, $reA); $nA == grep /$reA/, @items or die; },\n    $nB =&gt; q{ our (@items, $nB, $reB); $nB == grep /$reB/, @items or die; },\n} );\ncmpthese( $results );\n</code></pre>\n\n<p>Here are the results of running this benchmark on my laptop, using Perl (v5.18.2):</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>Benchmark: timing 10 iterations of 16382, 16383...\n     16382:  2 wallclock secs ( 1.79 usr +  0.00 sys =  1.79 CPU) @  5.59/s (n=10)\n     16383: 1163 wallclock secs (1157.28 usr +  2.70 sys = 1159.98 CPU) @  0.01/s (n=10)\n      s/iter  16383  16382\n16383    116     --  -100%\n16382  0.179 64703%     --\n</code></pre>\n\n<p>Note the 64,703% speed difference.</p>\n\n<p>My original hunch, based on the numerical coincidence that 6553 &approx; 2<sup>16</sup> / 10, was that this might've been some kind of an arbitrary limit within the Perl regex engine, or maybe that there there might be some kind of an array of 10-byte structs that was limited to 64 kB, or something.  But the fact that the threshold number of alternatives depends on their length makes things more confusing.</p>\n\n<p>(On the other hand, it's clearly not just about the length of the regex, either; the original regex with 6,553 32-byte alternatives was 2 + 6,553&times;33 = 216,251 bytes long, while the one with 16,383 8-byte alternatives is only 2 + 16,383&times;9 = 147,450 bytes long.)</p>\n\n<p><strong>What is causing this weird jump in regex matching time, and why does it happen at that specific point?</strong></p>\n"}, {"tags": ["regex", "perl", "parsing", "parameters"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1427133583, "post_id": 29216933, "comment_id": 46643385, "body": "First: <code>&#47;c&#47;</code>. Last <code>&#47;^.*c&#47;s</code>"}], "answers": [{"tags": [], "owner": {"reputation": 46944, "user_id": 3764814, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d02a4923abd2ca6d7593f031e4222c2?s=128&d=identicon&r=PG", "display_name": "Lucas Trzesniewski", "link": "https://stackoverflow.com/users/3764814/lucas-trzesniewski"}, "is_accepted": true, "score": 2, "last_activity_date": 1427133608, "last_edit_date": 1427133608, "creation_date": 1427133231, "answer_id": 29217073, "question_id": 29216933, "link": "https://stackoverflow.com/questions/29216933/regex-parameter-parsing/29217073#29217073", "title": "Regex parameter parsing", "body": "<p>You'll need a recursive regex to do it properly. Like this one (with the <code>x</code> flag):</p>\n\n<pre><code>(?(DEFINE)\n  (?&lt;fn&gt;                 # a function is:\n    \\w+ \\s*              # a name\n    \\( (?&amp;paramList) \\)  # and a parameter list\n  )\n\n  (?&lt;paramList&gt;\n    (?:\n      \\s* (?&amp;param)\n      (?: , \\s* (?&amp;param) )* \\s*\n    )* \n  )\n\n  (?&lt;param&gt;   # a parameter is:\n    (?&amp;fn)    # a function call\n    | \\w+     # or a simple value\n  )\n)\n\n\\w+ \\s* \\( (?&lt;extractedParameters&gt;(?&amp;paramList)) \\)\n</code></pre>\n\n<p><a href=\"https://regex101.com/r/qE6bY1/2\" rel=\"nofollow\">Demo</a>.</p>\n\n<p>This is required to match the opening and closing parentheses. Just expand the syntax as needed.</p>\n\n<p>The pattern at the bottom is equivalent to <code>(?&amp;fn)</code> except it encloses the parameter list in a capture group.</p>\n"}, {"tags": [], "owner": {"reputation": 26, "user_id": 4418505, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/17bc0b9fd58f6b42ebc30b0cabf4d1be?s=128&d=identicon&r=PG&f=1", "display_name": "thisoldman", "link": "https://stackoverflow.com/users/4418505/thisoldman"}, "is_accepted": false, "score": 0, "last_activity_date": 1427153185, "creation_date": 1427153185, "answer_id": 29222305, "question_id": 29216933, "link": "https://stackoverflow.com/questions/29216933/regex-parameter-parsing/29222305#29222305", "title": "Regex parameter parsing", "body": "<p>You almost have it. You do want everything between the first and the last parentheses on each line, right? Unless the lines to parse are more complex than your example, this small change in code might be all you need.</p>\n\n<pre><code>$line =~ /\\((.*)\\)/;\nmy $parameters = $1;\n</code></pre>\n\n<p>Your <code>\\w+</code> will stop matching at the first non-word character in the string. In your example, that is the first right-hand parenthesis.</p>\n"}], "owner": {"reputation": 3, "user_id": 4478726, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ad080e42f278e0a2cc1038dd1c207230?s=128&d=identicon&r=PG&f=1", "display_name": "Kendrick Lau", "link": "https://stackoverflow.com/users/4478726/kendrick-lau"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 43, "favorite_count": 0, "accepted_answer_id": 29217073, "answer_count": 2, "score": 0, "last_activity_date": 1427153185, "creation_date": 1427132853, "question_id": 29216933, "link": "https://stackoverflow.com/questions/29216933/regex-parameter-parsing", "title": "Regex parameter parsing", "body": "<p>I need to parse a file that includes function calls. For example:</p>\n\n<pre><code>function(otherFunction1(parameters1), otherFunction2(parameters2))\n</code></pre>\n\n<p>I need the output to be:</p>\n\n<pre><code>otherFunction1(parameters1), otherFunction2(parameters2)\n</code></pre>\n\n<p>My attempt is this:</p>\n\n<pre><code>open(my $DATA, '&lt;', 'txt') or die \"...\";\nwhile(my $line = &lt;$DATA&gt;){\n    $line =~ /\\((\\w+)\\)/;\n    my $parameters  = $1;\n\n    print \"$parameters\\n\";\n}\n</code></pre>\n\n<p>I am just getting </p>\n\n<pre><code>parameters1\n</code></pre>\n\n<p>Is there a way to use regexp to perhaps find the first and last occurrence of the specified character? </p>\n\n<p>Thanks!</p>\n"}, {"tags": ["perl", "cygwin"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1427133838, "post_id": 29216614, "comment_id": 46643514, "body": "Inside of <code>~&#47;.cpan&#47;build</code>, they&#39;ll be directories whose name starts with <code>Encode-Local</code>. Go into one of them, and type <code>perl -Mblib t&#47;env.t</code>"}, {"owner": {"reputation": 686, "user_id": 245896, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/034febab1e64e8564cf6947ab433ecca?s=128&d=identicon&r=PG", "display_name": "Agrajag9", "link": "https://stackoverflow.com/users/245896/agrajag9"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1427136379, "post_id": 29216614, "comment_id": 46644911, "body": "<code>$ perl -Mblib t&#47;env.t 1..13 ok 1 - env read ok 2 - env write retval old value ok 3 - env write worked ok 4 - env affected %ENV ok 5 - env write retval old value ok 6 - env write worked ok 7 - env write undef deletes from %ENV ok 8 - env write retval encoded ok 9 - env write worked ok 10 - env affected %ENV</code>  No different from above."}], "answers": [{"comments": [{"owner": {"reputation": 11917, "user_id": 516433, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/c292b959ecf29c86e4c0d093a6f24e19?s=128&d=identicon&r=PG", "display_name": "Lucas", "link": "https://stackoverflow.com/users/516433/lucas"}, "edited": false, "score": 0, "creation_date": 1427476262, "post_id": 29220269, "comment_id": 46807012, "body": "Wish i could vote this up twice.  It is always good to understand <i>why</i> we are <code>force</code>ing something."}], "tags": [], "owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "is_accepted": false, "score": 2, "last_activity_date": 1427144385, "creation_date": 1427144385, "answer_id": 29220269, "question_id": 29216614, "link": "https://stackoverflow.com/questions/29216614/encodelocale-fails-3-13-tests-of-env-t-in-cygwin/29220269#29220269", "title": "Encode::Locale fails 3/13 tests of env.t in Cygwin", "body": "<p>Setting an Cygwin environment variable with a name outside 7-bit ASCII causes a segmentation fault on every version of perl I use, and is also disallowed in python.</p>\n\n<pre><code>import os;\nos.environ[chr(126)]=\"126\"\nprint os.environ[chr(126)]\nos.environ[chr(130)]=\"130\"\nprint os.environ[chr(130)]\n\n$ python env.py\n126\nTraceback (most recent call last):\n  File \"env.py\", line 4, in &lt;module&gt;\n    os.environ[chr(130)]=\"130\"\n  File \"/usr/lib/python2.7/os.py\", line 473, in __setitem__\n    putenv(key, item)\nOSError: [Errno 14] Bad address\n</code></pre>\n\n<p>Force install (<code>cpan -f Encode::Locale</code>) and don't sweat it. If you're not doing any dark magic, you don't need those fancy environment variable names.</p>\n\n<p>(You can still set the environment variable <em>values</em> to just about anything, though.)</p>\n"}], "owner": {"reputation": 686, "user_id": 245896, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/034febab1e64e8564cf6947ab433ecca?s=128&d=identicon&r=PG", "display_name": "Agrajag9", "link": "https://stackoverflow.com/users/245896/agrajag9"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 174, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1427144385, "creation_date": 1427131800, "question_id": 29216614, "link": "https://stackoverflow.com/questions/29216614/encodelocale-fails-3-13-tests-of-env-t-in-cygwin", "title": "Encode::Locale fails 3/13 tests of env.t in Cygwin", "body": "<p>I'm having trouble installing <code>Encode::Locale</code> in Cygwin (v1.7.35, 64-bit version) and getting errors about it failing tests in <code>t/env.t</code>.</p>\n\n<pre><code>$ cpan install Encode::Locale\nGoing to read '/home/agrajag9/.cpan/Metadata'\n  Database was generated on Mon, 23 Mar 2015 12:17:02 GMT\nRunning install for module 'Encode::Locale'\nRunning make for G/GA/GAAS/Encode-Locale-1.04.tar.gz\nChecksum for /home/agrajag9/.cpan/sources/authors/id/G/GA/GAAS/Encode-Locale-1.04.tar.gz ok\n\n  CPAN.pm: Going to build G/GA/GAAS/Encode-Locale-1.04.tar.gz\n\nChecking if your kit is complete...\nLooks good\nGenerating a Unix-style Makefile\nWriting Makefile for Encode::Locale\nWriting MYMETA.yml and MYMETA.json\ncp lib/Encode/Locale.pm blib/lib/Encode/Locale.pm\nManifying 1 pod document\n  GAAS/Encode-Locale-1.04.tar.gz\n  make -- OK\nRunning make test\nPERL_DL_NONLAZY=1 \"/usr/bin/perl.exe\" \"-MExtUtils::Command::MM\" \"-MTest::Harness\" \"-e\" \"undef *Test::Harness::Switches; test_harness(0, 'blib/lib', 'blib/arch')\" t/*.t\nt/alias.t ...... ok\nt/arg.t ........ # ENCODING_LOCALE is UTF-8\nt/arg.t ........ ok\nt/env.t ........ Failed 3/13 subtests\nt/tain.t ....... ok\nt/warn_once.t .. ok\n\nTest Summary Report\n-------------------\nt/arg.t      (Wstat: 0 Tests: 4 Failed: 0)\n  TODO passed:   1-4\nt/env.t      (Wstat: 0 Tests: 10 Failed: 0)\n  Parse errors: Bad plan.  You planned 13 tests but ran 10.\nFiles=5, Tests=25,  2 wallclock secs ( 0.05 usr  0.19 sys +  0.29 cusr  0.68 csys =  1.21 CPU)\nResult: FAIL\nFailed 1/5 test programs. 0/25 subtests failed.\nMakefile:856: recipe for target 'test_dynamic' failed\nmake: *** [test_dynamic] Error 255\n  GAAS/Encode-Locale-1.04.tar.gz\n  make test -- NOT OK\n//hint// to see the cpan-testers results for installing this module, try:\n  reports GAAS/Encode-Locale-1.04.tar.gz\nRunning make install\n  make test had returned bad status, won't install without force\n</code></pre>\n\n<p>Manually copying the compiled version of <code>Encode/Locale.pm</code> to <code>/lib/perl5/5.14/</code> and running <code>env.t</code>:</p>\n\n<pre><code>$ perl t/env.t\n1..13\nok 1 - env read\nok 2 - env write retval old value\nok 3 - env write worked\nok 4 - env affected %ENV\nok 5 - env write retval old value\nok 6 - env write worked\nok 7 - env write undef deletes from %ENV\nok 8 - env write retval encoded\nok 9 - env write worked\nok 10 - env affected %ENV\n</code></pre>\n\n<p>It appears that the following tests are failing:</p>\n\n<pre><code>is env(\"\\x{20AC}\", 1), undef, 'env write retval old value';\nis env(\"\\x{20AC}\"), 1, 'env write worked';\nis $ENV{\"\\x80\"}, 1, 'env affected %ENV';\n</code></pre>\n\n<p>Output of <code>perl -v</code></p>\n\n<pre><code>This is perl 5, version 14, subversion 4 (v5.14.4) built for cygwin-thread-multi\n(with 14 registered patches, see perl -V for more detail)\n\nCopyright 1987-2013, Larry Wall\n\nPerl may be copied only under the terms of either the Artistic License or the\nGNU General Public License, which may be found in the Perl 5 source kit.\n\nComplete documentation for Perl, including FAQ lists, should be found on\nthis system using \"man perl\" or \"perldoc perl\".  If you have access to the\nInternet, point your browser at http://www.perl.org/, the Perl Home Page.\n</code></pre>\n"}, {"tags": ["python", "perl", "itertools"], "comments": [{"owner": {"reputation": 159764, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "edited": false, "score": 2, "creation_date": 1427127761, "post_id": 29215233, "comment_id": 46639867, "body": "<a href=\"https://metacpan.org/pod/List::Gen\" rel=\"nofollow noreferrer\">metacpan.org/pod/List::Gen</a>"}], "answers": [{"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1427175280, "post_id": 29215817, "comment_id": 46659059, "body": "The advantage of this solution is its flexibility."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 2, "last_activity_date": 1427129479, "creation_date": 1427129479, "answer_id": 29215817, "question_id": 29215233, "link": "https://stackoverflow.com/questions/29215233/python-itertools-product-equivalent-in-perl/29215817#29215817", "title": "Python itertools.product() equivalent in Perl", "body": "<p>I'd use <a href=\"http://search.cpan.org/perldoc?Algorithm::Loops\" rel=\"nofollow\">Algorithm::Loops</a>'s <code>NestedLoops</code>.</p>\n\n<pre><code>use Algorithm::Loops qw( NestedLoops );\n\nmy $iter = NestedLoops([[\"A\",\"B\"], [\"C\",\"D\",\"E\"], [\"F\",\"G\"]]);\nwhile (my @items = $iter-&gt;()) {\n    ...\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1427134833, "post_id": 29215986, "comment_id": 46644024, "body": "There are some nice suggestions here. I&#39;m sure there should be a better meta-CPAN than <a href=\"https://metacpan.org/\" rel=\"nofollow noreferrer\">metcapan.org</a>. I&#39;m tempted to make one myself, but better people than me have tried and failed."}], "tags": [], "owner": {"reputation": 613, "user_id": 4569096, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/6395ed53ff64900635bdd7c3d50bd256?s=128&d=identicon&r=PG&f=1", "display_name": "jksnw", "link": "https://stackoverflow.com/users/4569096/jksnw"}, "is_accepted": false, "score": 3, "last_activity_date": 1427129986, "creation_date": 1427129986, "answer_id": 29215986, "question_id": 29215233, "link": "https://stackoverflow.com/questions/29215233/python-itertools-product-equivalent-in-perl/29215986#29215986", "title": "Python itertools.product() equivalent in Perl", "body": "<p>I ended up using:</p>\n\n<pre><code>use Math::Cartesian::Product;\ncartesian {print \"@_\\n\"} [\"A\",\"B\"], [\"C\", \"D\", \"E\"], [\"F\", \"G\"];\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "is_accepted": false, "score": 1, "last_activity_date": 1427131844, "creation_date": 1427131844, "answer_id": 29216626, "question_id": 29215233, "link": "https://stackoverflow.com/questions/29215233/python-itertools-product-equivalent-in-perl/29216626#29216626", "title": "Python itertools.product() equivalent in Perl", "body": "<p>I like <a href=\"https://metacpan.org/pod/Set::CrossProduct\" rel=\"nofollow\">Set::CrossProduct</a>:</p>\n\n<pre><code>#!/usr/bin/env perl\n\nuse strict;\nuse warnings;\n\nuse Set::CrossProduct;\n\nmy $it = Set::CrossProduct-&gt;new([\n     [\"A\",\"B\"],\n     [\"C\",\"D\",\"E\"],\n     [\"F\",\"G\"]\n]);\n\nwhile (my $v = $it-&gt;get) {\n    print \"@$v\\n\";\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1716, "user_id": 695867, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/45d624c0405e2368e571c51fccc69704?s=128&d=identicon&r=PG", "display_name": "Sam Choukri", "link": "https://stackoverflow.com/users/695867/sam-choukri"}, "is_accepted": false, "score": 0, "last_activity_date": 1427134103, "creation_date": 1427134103, "answer_id": 29217353, "question_id": 29215233, "link": "https://stackoverflow.com/questions/29215233/python-itertools-product-equivalent-in-perl/29217353#29217353", "title": "Python itertools.product() equivalent in Perl", "body": "<p>You should use one of the CPAN modules referenced in the other answers. But as a fun exercise I wrote my own function to return the cartesian product for any number of input array references.</p>\n\n<pre><code>my $combinations = get_combinations([\"A\",\"B\"], [\"C\",\"D\",\"E\"], [\"F\",\"G\"]);\n\nforeach my $combo (@$combinations) {\n  print \"@$combo\\n\";\n}\n\nsub get_combinations {\n  my @arrays = @_;\n\n  # pre-determine to the total number of combinations\n  my $total = 1;\n  foreach my $aref (@arrays) {\n    # if our array is empty, add 1 undef item\n    push(@$aref, undef) unless scalar @$aref;\n    $total *= scalar @$aref;\n  }\n\n  my $matrix = [];\n  my $block_size = $total;\n  for (my $col = 0; $col &lt;= $#arrays; $col++) {\n    # determine the number of consecutive times to print each item in the column\n    $block_size = $block_size / scalar @{$arrays[$col]};\n\n    # fill-in our 2-D array (matrix), one column (input array) at a time\n    for (my $row = 0; $row &lt; $total; $row++) {\n      my $item_index = int($row / $block_size) % scalar @{$arrays[$col]};\n      $matrix-&gt;[$row]-&gt;[$col] = $arrays[$col]-&gt;[$item_index];\n    }\n\n  }\n\n  return wantarray ? @$matrix : $matrix;\n}\n</code></pre>\n"}], "owner": {"reputation": 613, "user_id": 4569096, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/6395ed53ff64900635bdd7c3d50bd256?s=128&d=identicon&r=PG&f=1", "display_name": "jksnw", "link": "https://stackoverflow.com/users/4569096/jksnw"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 176, "favorite_count": 0, "answer_count": 4, "score": 1, "last_activity_date": 1427134103, "creation_date": 1427127645, "last_edit_date": 1427131952, "question_id": 29215233, "link": "https://stackoverflow.com/questions/29215233/python-itertools-product-equivalent-in-perl", "title": "Python itertools.product() equivalent in Perl", "body": "<p>In Python I can use <code>itertools.product()</code> which the documentation says is the \"cartesian product, equivalent to a nested for-loop\".</p>\n\n<p>What is it's equivalent in Perl?</p>\n\n<p>An example in Python:</p>\n\n<pre><code>import itertools\nopts_list = [[\"A\",\"B\"], [\"C\",\"D\",\"E\"], [\"F\",\"G\"]]\nprint list(itertools.product(*opts_list))\n</code></pre>\n\n<p>Gives:</p>\n\n<blockquote>\n  <p>[('A', 'C', 'F'), ('A', 'C', 'G'), ('A', 'D', 'F'), ('A', 'D', 'G'), ('A', 'E', 'F'), ('A', 'E', 'G'), ('B', 'C', 'F'), ('B', 'C', 'G'), ('B', 'D', 'F'), ('B', 'D', 'G'), ('B', 'E', 'F'), ('B', 'E', 'G')]</p>\n</blockquote>\n"}, {"tags": ["linux", "bash", "perl", "shell", "module"], "answers": [{"tags": [], "owner": {"reputation": 68627, "user_id": 258523, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/102329bab02333104708ac179f35fd8d?s=128&d=identicon&r=PG&f=1", "display_name": "Etan Reisner", "link": "https://stackoverflow.com/users/258523/etan-reisner"}, "is_accepted": true, "score": 2, "last_activity_date": 1427128311, "creation_date": 1427128311, "answer_id": 29215460, "question_id": 29215080, "link": "https://stackoverflow.com/questions/29215080/adding-non-standard-library-to-inc-in-perl-in-tcsh/29215460#29215460", "title": "adding non standard library to @inc in PERL in tcsh", "body": "<p>I think the equivalent <code>tcsh</code> expression is</p>\n\n<pre><code>setenv PERL5LIB PERL5LIB:/location/of/personal/modules\n</code></pre>\n\n<p>Though I expect that line was supposed to be</p>\n\n<pre><code>export PERL5LIB=$PERL5LIB:/location/of/personal/modules\n</code></pre>\n\n<p>which would mean you want</p>\n\n<pre><code>setenv PERL5LIB $PERL5LIB:/location/of/personal/modules\n</code></pre>\n\n<p>But if you don't have anything in the <code>PERL5LIB</code> variable already then you can just use</p>\n\n<pre><code>setenv PERL5LIB /location/of/personal/modules\n</code></pre>\n"}], "owner": {"reputation": 701, "user_id": 2141709, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/cd3243c310cf623006eea727d17dcad6?s=128&d=identicon&r=PG", "display_name": "Sid5427", "link": "https://stackoverflow.com/users/2141709/sid5427"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 645, "favorite_count": 0, "accepted_answer_id": 29215460, "answer_count": 1, "score": 1, "last_activity_date": 1427128311, "creation_date": 1427127191, "last_edit_date": 1495534204, "question_id": 29215080, "link": "https://stackoverflow.com/questions/29215080/adding-non-standard-library-to-inc-in-perl-in-tcsh", "title": "adding non standard library to @inc in PERL in tcsh", "body": "<p>I am trying to use a few perl modules which are located in my own directory. \nI read that I need to add the \"export\" command in this form - </p>\n\n<pre><code>export PERL5LIB=PERL5LIB:/location/of/personal/modules\n</code></pre>\n\n<p>However I was doing this in bash, and once I tried to source bash after the modification I started to get the \"if: Expression Syntax\" error. </p>\n\n<p><a href=\"https://stackoverflow.com/questions/14440105/bashrc-if-expression-syntax-error\">This</a> tells me that it means my shell is not bash. I queried by echo $SHELL, which gives me tcsh ( I guess its the C shell)</p>\n\n<p>I opened tcsh with the intention of adding the \"export\" command as written above, however its completely blank and I am now confused as to how to add the non standard directory to @INC. </p>\n\n<p>Any help is greatly appreciated</p>\n"}, {"tags": ["multithreading", "perl", "libwww-perl"], "comments": [{"owner": {"reputation": 4191, "user_id": 1466640, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c0630f2d5ac5fb844675c58d3d2dfa57?s=128&d=identicon&r=PG&f=1", "display_name": "AKHolland", "link": "https://stackoverflow.com/users/1466640/akholland"}, "edited": false, "score": 3, "creation_date": 1427123080, "post_id": 29213484, "comment_id": 46636641, "body": "Well pretty simply, <code>query_form</code> isn&#39;t a method in <code>LWP::UserAgent</code>. It does exist in the <code>URI</code> module. Without seeing the code where you call <code>write_conv_thread</code>, it&#39;s not really possible to help you change that."}, {"owner": {"reputation": 98433, "user_id": 368630, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/107085826cfbb2700f535417a12c89cb?s=128&d=identicon&r=PG", "display_name": "David W.", "link": "https://stackoverflow.com/users/368630/david-w"}, "edited": false, "score": 1, "creation_date": 1427123401, "post_id": 29213484, "comment_id": 46636834, "body": "I&#39;m confused by the <code>$$url</code>. If <code>$url</code> is an object, it should already be a scalar reference. In this case, it looks like you&#39;re code takes a reference of a reference. Is that correct? Unfortunately, there&#39;s not much here. I don&#39;t know how you constructed <code>$$url</code>, so I can&#39;t see what type of class it is."}, {"owner": {"reputation": 1050, "user_id": 4534275, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/671721deaa074d660cc7a13bfbd6b397?s=128&d=identicon&r=PG", "display_name": "nefas", "link": "https://stackoverflow.com/users/4534275/nefas"}, "edited": false, "score": 0, "creation_date": 1427124607, "post_id": 29213484, "comment_id": 46637660, "body": "I&#39;ve edited my question to add the code that call write_conv_thread. $url is a reference."}, {"owner": {"reputation": 3414, "user_id": 40285, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/1574e7851a08a81faca7e0f87575510e?s=128&d=identicon&r=PG", "display_name": "Len Jaffe", "link": "https://stackoverflow.com/users/40285/len-jaffe"}, "edited": false, "score": 1, "creation_date": 1427125666, "post_id": 29213484, "comment_id": 46638414, "body": "We need the code where call query_form()... Approximately line 43 of get_xml.pm ..."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1427125740, "post_id": 29213484, "comment_id": 46638477, "body": "Some off-topic comments about your code: 1) Your GUI library probably doesn&#39;t support being run in one thread and updated from another. You&#39;ll need to send the data to display to the display thread and have it update the windows. 2) You shouldn&#39;t be sharing objects between threads, and there&#39;s no need to share URL objects or UA objects here. Create them in your thread. 3) What&#39;s with the references?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 3414, "user_id": 40285, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/1574e7851a08a81faca7e0f87575510e?s=128&d=identicon&r=PG", "display_name": "Len Jaffe", "link": "https://stackoverflow.com/users/40285/len-jaffe"}, "edited": false, "score": 0, "creation_date": 1427125785, "post_id": 29213484, "comment_id": 46638502, "body": "@Len Jaffe, He did provide <i>that</i>. Fourth line of <code>write_conv_thread</code>."}, {"owner": {"reputation": 3414, "user_id": 40285, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/1574e7851a08a81faca7e0f87575510e?s=128&d=identicon&r=PG", "display_name": "Len Jaffe", "link": "https://stackoverflow.com/users/40285/len-jaffe"}, "edited": false, "score": 0, "creation_date": 1427127778, "post_id": 29213484, "comment_id": 46639881, "body": "I swear it wasn&#39;t there a minute ago :-)"}, {"owner": {"reputation": 1050, "user_id": 4534275, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/671721deaa074d660cc7a13bfbd6b397?s=128&d=identicon&r=PG", "display_name": "nefas", "link": "https://stackoverflow.com/users/4534275/nefas"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1427138980, "post_id": 29213484, "comment_id": 46646457, "body": "@ikegami : 1)I just found that curse doesn&#39;t support to created in one thread and update in an other. The problem is that I need to update regularly. I&#39;ll try to notify the GUI to do the update with signal (when the thread that get the XML has retrieved the data, it will notify the GUI). Is it a viable option ? 2)OK, I will do that."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1427139158, "post_id": 29213484, "comment_id": 46646560, "body": "hum, is it possible to send a signal to a thread? Or maybe you mean signaling a condition variable (<code>cond_signal</code>). That&#39;s actually good."}, {"owner": {"reputation": 1050, "user_id": 4534275, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/671721deaa074d660cc7a13bfbd6b397?s=128&d=identicon&r=PG", "display_name": "nefas", "link": "https://stackoverflow.com/users/4534275/nefas"}, "edited": false, "score": 0, "creation_date": 1427139654, "post_id": 29213484, "comment_id": 46646848, "body": "I was talking of send signal (I don&#39;t have found an other option :) ). From what I found it&#39;s possible. My problem is that on one side, I need to wait user input, on the other side, I need to check regularly (like every few seconde) result from a request and don&#39;t know how to do without signals (or updating window in an other thread but that&#39;s not possible)."}], "answers": [{"comments": [{"owner": {"reputation": 3414, "user_id": 40285, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/1574e7851a08a81faca7e0f87575510e?s=128&d=identicon&r=PG", "display_name": "Len Jaffe", "link": "https://stackoverflow.com/users/40285/len-jaffe"}, "edited": false, "score": 0, "creation_date": 1427128170, "post_id": 29214452, "comment_id": 46640133, "body": "If you can log fro your thread, dump the values of @_ and you should be able to see is something is missing from your invocation."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 3414, "user_id": 40285, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/1574e7851a08a81faca7e0f87575510e?s=128&d=identicon&r=PG", "display_name": "Len Jaffe", "link": "https://stackoverflow.com/users/40285/len-jaffe"}, "edited": false, "score": 0, "creation_date": 1427129699, "post_id": 29214452, "comment_id": 46641127, "body": "<code>warn(&quot;$_: &quot;.( defined($_[$_]) ? &quot;&lt;&lt;$_[$_]&gt;&gt;&quot; : &quot;[undef]&quot; )) for 0..$#_;</code>, though probably easier just to look at the code."}, {"owner": {"reputation": 1050, "user_id": 4534275, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/671721deaa074d660cc7a13bfbd6b397?s=128&d=identicon&r=PG", "display_name": "nefas", "link": "https://stackoverflow.com/users/4534275/nefas"}, "edited": false, "score": 0, "creation_date": 1427138604, "post_id": 29214452, "comment_id": 46646234, "body": "the error was due to a missing argument. @ikegami : your line of code makes me remember why it is said that perl is hard to read (and that I have a <b>lot</b> to learn :) )."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 2, "last_activity_date": 1427125930, "last_edit_date": 1427125930, "creation_date": 1427125453, "answer_id": 29214452, "question_id": 29213484, "link": "https://stackoverflow.com/questions/29213484/perl-cant-locate-object-method-query-form-via-package-lwpuseragent/29214452#29214452", "title": "perl Can&#39;t locate object method query_form via package LWP::UserAgent", "body": "<p>The (reference to the) UA got assigned to <code>$url</code> instead of <code>$ua</code>.</p>\n\n<p>My best guess as to the cause (since you didn't provide the actual code that gives the error): <code>$window</code>, <code>$rows</code> or <code>$username</code> wasn't provided, causing the (reference to the) UA to be the fourth argument.</p>\n"}], "owner": {"reputation": 1050, "user_id": 4534275, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/671721deaa074d660cc7a13bfbd6b397?s=128&d=identicon&r=PG", "display_name": "nefas", "link": "https://stackoverflow.com/users/4534275/nefas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 772, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1427125930, "creation_date": 1427122739, "last_edit_date": 1427125195, "question_id": 29213484, "link": "https://stackoverflow.com/questions/29213484/perl-cant-locate-object-method-query-form-via-package-lwpuseragent", "title": "perl Can&#39;t locate object method query_form via package LWP::UserAgent", "body": "<p>I'm creating a script with thread so I had to rebuild perl (perl5.20) with threads support.\nSince I have rebuild perl, I have an error :</p>\n\n<p><code>Can't locate object method \"query_form\" via package \"LWP::UserAgent\"</code></p>\n\n<p>I've tried to re-install LWP::UserAgent, LWP::Simple, URI, but they are up-to-date(according to cpan).</p>\n\n<p>The faulty code : </p>\n\n<pre><code>#!/usr/bin/env perl\n\npackage get_xml;\n\nuse strict;\nuse warnings;\nuse Curses;\nuse LWP::Simple;\nuse LWP::UserAgent;\nuse MIME::Base64;\nuse URI;\nuse URI::http;\nuse HTTP::Request::Common;\nuse parse_xml;\n\n# ...\n\nsub write_conv_thread{\n    my ($window, $rows, $username, $url, $ua) = @_;\n    while(1){\n        $$url-&gt;query_form(  # line 43\n            \"heartbeat\" =&gt; '0',\n            \"conv\"      =&gt; 0,\n            \"username\"  =&gt; \"$username\",\n            \"active\"    =&gt; 0\n        );\n        my $xml = $$ua-&gt;get($url);\n        my @conv = get_conv($xml);\n        print_all_lines($window, $rows, @conv);\n        $$window-&gt;refresh();\n        sleep(5);\n    }\n}\n\n1;\n</code></pre>\n\n<p>And the exact error message : <code>Thread 1 terminated abnormally: Can't locate object method \"query_form\" via package \"LWP::UserAgent\" at get_xml.pm line 43.</code></p>\n\n<p>Code that call the function :</p>\n\n<pre><code>#!/usr/bin/env perl\n\nuse strict;\nuse warnings;\nuse Curses;\nuse LWP::Simple;\nuse LWP::UserAgent;\nuse MIME::Base64;\nuse URI;\nuse threads;\nuse get_xml;\nuse post_xml;\n\n# ... initialization of Curses windows ...\n# $chat_win is a curse, $row is a number\n\nmy $server_endpoint = \"...\";\nmy $ua = LWP::UserAgent-&gt;new;\nmy $url = URI-&gt;new( \"$server_endpoint/index.php\" );\nmy $thread = threads-&gt;new(\\&amp;get_xml::write_conv_thread, \\$chat_win, $row-4,\"...\", \\$url, \\$ua);\n$thread-&gt;detach();\n</code></pre>\n\n<p>What can I do to make perl find the object method ?</p>\n\n<p>Thank you for your answer.</p>\n"}, {"tags": ["bash", "perl", "awk"], "comments": [{"owner": {"reputation": 658023, "user_id": 548225, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/dab08478b226280d4a30894c9a7ed719?s=128&d=identicon&r=PG", "display_name": "anubhava", "link": "https://stackoverflow.com/users/548225/anubhava"}, "edited": false, "score": 0, "creation_date": 1427118193, "post_id": 29211473, "comment_id": 46633095, "body": "In order to keep formatting your awk should not be operating on field basis. See my answer below."}], "answers": [{"comments": [{"owner": {"reputation": 20787, "user_id": 1251660, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/UaQAA.jpg?s=128&g=1", "display_name": "slayedbylucifer", "link": "https://stackoverflow.com/users/1251660/slayedbylucifer"}, "edited": false, "score": 0, "creation_date": 1427118050, "post_id": 29211574, "comment_id": 46632987, "body": "Thanks. If you could provide <code>awk</code> solution then that will be great. +1 nonetheless."}], "tags": [], "owner": {"reputation": 159902, "user_id": 3297613, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/KHhzd.jpg?s=128&g=1", "display_name": "Avinash Raj", "link": "https://stackoverflow.com/users/3297613/avinash-raj"}, "is_accepted": false, "score": 2, "last_activity_date": 1427118692, "last_edit_date": 1427118692, "creation_date": 1427117530, "answer_id": 29211574, "question_id": 29211473, "link": "https://stackoverflow.com/questions/29211473/awk-maintain-field-spacing-like-input-file/29211574#29211574", "title": "AWK: Maintain field spacing like input file", "body": "<p>You could use sed.</p>\n\n<pre><code>$ bucket='bucket_name'\n$ sed \"s~^\\(\\([^[:blank:]]\\+[[:blank:]]\\+\\)\\{3\\}\\)~\\1$bucket/~\" file\n2014-01-10 18:23:25          0 bucket_name/Andy/ADPTER/\n2014-01-10 18:23:36        503 bucket_name/Sandy/ADPTER/ACCOUNTTYPE MAP.csv\n2014-01-10 18:23:38        516 bucket_name/John/ADPTER/CITY MAP.csv\n2014-01-10 18:23:38        398 bucket_name/Wendy/ADPTER/COUNTRY MAP.csv\n2014-01-10 18:23:38      11117 bucket_name/Andy/ADPTER/CURRENCY MAP.csv\n2014-01-10 18:23:38        260 bucket_name/Sandy/ADPTER/GENDER MAP.csv\n2014-01-10 18:23:39        466 bucket_name/John/ADPTER/STATE MAP.csv\n2014-01-10 18:23:40        373 bucket_name/Jim/ADPTER/UNITS MAP.csv\n</code></pre>\n\n<p><code>[[:blank:]]\\+</code> posix character class which matches any type of horizontal white-space character, one or more times. <code>[^[:blank:]]\\+</code> POSIX negated character class which matches any character but not of an whitespace one or more times. </p>\n"}, {"comments": [{"owner": {"reputation": 20787, "user_id": 1251660, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/UaQAA.jpg?s=128&g=1", "display_name": "slayedbylucifer", "link": "https://stackoverflow.com/users/1251660/slayedbylucifer"}, "edited": false, "score": 0, "creation_date": 1427118329, "post_id": 29211646, "comment_id": 46633181, "body": "This is printing the exact same input file without any prefix to 4th field. Could you modify it please to make it work."}, {"owner": {"reputation": 20787, "user_id": 1251660, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/UaQAA.jpg?s=128&g=1", "display_name": "slayedbylucifer", "link": "https://stackoverflow.com/users/1251660/slayedbylucifer"}, "edited": false, "score": 0, "creation_date": 1427118635, "post_id": 29211646, "comment_id": 46633369, "body": "on my <code>awk</code>, it prints exact same input file when I run <code>awk -v b=&#39;bucket_name&#39; &#39;{sub(&#47;([^[:blank:]]+[[:blank:]]+){3}&#47;, &quot;&amp;&quot; b &quot;&#47;&quot;)} 1&#39; file</code>. THis is my awk version: <code>GNU Awk 3.1.8</code>"}, {"owner": {"user_type": "does_not_exist", "display_name": "user4453924"}, "edited": false, "score": 0, "creation_date": 1427118771, "post_id": 29211646, "comment_id": 46633471, "body": "Doesn&#39;t work for me either,i get the same as OP, may have an older version of gawk(3.2) like me(doesn&#39;t properly support <code>{3}</code> notation."}, {"owner": {"reputation": 658023, "user_id": 548225, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/dab08478b226280d4a30894c9a7ed719?s=128&d=identicon&r=PG", "display_name": "anubhava", "link": "https://stackoverflow.com/users/548225/anubhava"}, "edited": false, "score": 0, "creation_date": 1427118844, "post_id": 29211646, "comment_id": 46633521, "body": "<a href=\"http://ideone.com/DNdrcp\" rel=\"nofollow noreferrer\">Here is working demo of above code</a> It worked on gnu-awk as well on BSD awk for me. There is nothing awk version specific here."}, {"owner": {"user_type": "does_not_exist", "display_name": "user4453924"}, "edited": false, "score": 0, "creation_date": 1427119343, "post_id": 29211646, "comment_id": 46633905, "body": "<code>{3}</code> definitely is awk version specific."}, {"owner": {"reputation": 39446, "user_id": 4301306, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a1461d0104809c90e2a252a2d4b0ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Wintermute", "link": "https://stackoverflow.com/users/4301306/wintermute"}, "edited": false, "score": 0, "creation_date": 1427119534, "post_id": 29211646, "comment_id": 46634027, "body": "Some commonly shipped versions of mawk don&#39;t understand POSIX character classes (i.e., <code>[[:blank:]]</code>); I suspect that&#39;s another part of the problem."}, {"owner": {"reputation": 658023, "user_id": 548225, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/dab08478b226280d4a30894c9a7ed719?s=128&d=identicon&r=PG", "display_name": "anubhava", "link": "https://stackoverflow.com/users/548225/anubhava"}, "edited": false, "score": 0, "creation_date": 1427119534, "post_id": 29211646, "comment_id": 46634028, "body": "@JID: It has worked on 3 different awk for me. gnu awk and BSD awk on my system and then on online awk"}, {"owner": {"reputation": 39446, "user_id": 4301306, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a1461d0104809c90e2a252a2d4b0ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Wintermute", "link": "https://stackoverflow.com/users/4301306/wintermute"}, "edited": false, "score": 0, "creation_date": 1427119608, "post_id": 29211646, "comment_id": 46634097, "body": "I can confirm that it fails with mawk 1.3.3."}, {"owner": {"reputation": 39446, "user_id": 4301306, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a1461d0104809c90e2a252a2d4b0ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Wintermute", "link": "https://stackoverflow.com/users/4301306/wintermute"}, "edited": false, "score": 0, "creation_date": 1427119697, "post_id": 29211646, "comment_id": 46634166, "body": "Also fails. It&#39;s the <code>{3}</code> -- it works with <code>{sub(&#47;([^ \\t]+[ \\t]+)([^ \\t]+[ \\t]+)([^ \\t]+[ \\t]+)&#47;, &quot;&amp;&quot; b &quot;&#47;&quot;)} 1</code>."}, {"owner": {"reputation": 658023, "user_id": 548225, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/dab08478b226280d4a30894c9a7ed719?s=128&d=identicon&r=PG", "display_name": "anubhava", "link": "https://stackoverflow.com/users/548225/anubhava"}, "edited": false, "score": 0, "creation_date": 1427119833, "post_id": 29211646, "comment_id": 46634274, "body": "ok so may be <code>mawk</code> doesn&#39;t like <code>{3}</code> but OP has gawk where this should not be a problem. May be <code>mawk</code> needs <code>\\{3\\}</code> but I can&#39;t test with mawk as I don&#39;t have it on my OSX or Linux"}, {"owner": {"reputation": 658023, "user_id": 548225, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/dab08478b226280d4a30894c9a7ed719?s=128&d=identicon&r=PG", "display_name": "anubhava", "link": "https://stackoverflow.com/users/548225/anubhava"}, "reply_to_user": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "edited": false, "score": 1, "creation_date": 1427122098, "post_id": 29211646, "comment_id": 46635872, "body": "Thanks so much @EdMorton, yes indeed that will work with any value of bucket like <code>&amp;</code> or <code>\\\\1</code> etc. Edited answer."}, {"owner": {"reputation": 20787, "user_id": 1251660, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/UaQAA.jpg?s=128&g=1", "display_name": "slayedbylucifer", "link": "https://stackoverflow.com/users/1251660/slayedbylucifer"}, "edited": false, "score": 1, "creation_date": 1427122509, "post_id": 29211646, "comment_id": 46636192, "body": "@anubhava, the newer version with <code>--re-interval</code> works for me now. Thanks. +1. Besides, could you briefly explain this oneliner. Thanks."}, {"owner": {"reputation": 658023, "user_id": 548225, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/dab08478b226280d4a30894c9a7ed719?s=128&d=identicon&r=PG", "display_name": "anubhava", "link": "https://stackoverflow.com/users/548225/anubhava"}, "edited": false, "score": 0, "creation_date": 1427122539, "post_id": 29211646, "comment_id": 46636216, "body": "Yes sure adding explanation in answer."}], "tags": [], "owner": {"reputation": 658023, "user_id": 548225, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/dab08478b226280d4a30894c9a7ed719?s=128&d=identicon&r=PG", "display_name": "anubhava", "link": "https://stackoverflow.com/users/548225/anubhava"}, "is_accepted": true, "score": 2, "last_activity_date": 1427122841, "last_edit_date": 1427122841, "creation_date": 1427117752, "answer_id": 29211646, "question_id": 29211473, "link": "https://stackoverflow.com/questions/29211473/awk-maintain-field-spacing-like-input-file/29211646#29211646", "title": "AWK: Maintain field spacing like input file", "body": "<p>You can use this <code>awk</code>:</p>\n\n<pre><code>bucket=\"bucket_name\"\nawk --re-interval -v b=\"$bucket\" '{sub(/([^[:blank:]]+[[:blank:]]+){3}/, \n     \"&amp;\" b \"/\")} 1' file\n2014-01-10 18:23:25          0 bucket_name/Andy/ADPTER/\n2014-01-10 18:23:36        503 bucket_name/Sandy/ADPTER/ACCOUNTTYPE MAP.csv\n2014-01-10 18:23:38        516 bucket_name/John/ADPTER/CITY MAP.csv\n2014-01-10 18:23:38        398 bucket_name/Wendy/ADPTER/COUNTRY MAP.csv\n2014-01-10 18:23:38      11117 bucket_name/Andy/ADPTER/CURRENCY MAP.csv\n2014-01-10 18:23:38        260 bucket_name/Sandy/ADPTER/GENDER MAP.csv\n2014-01-10 18:23:39        466 bucket_name/John/ADPTER/STATE MAP.csv\n2014-01-10 18:23:40        373 bucket_name/Jim/ADPTER/UNITS MAP.csv\n</code></pre>\n\n<p><a href=\"http://ideone.com/DNdrcp\" rel=\"nofollow\">Online Working Demo</a></p>\n\n<pre><code>-v b=\"$bucket\"                 # pass a value to awk in variable b\n--re-interval                  # Enable the use of interval\n                               # expressions in regular expression matching\nsub                            # match input using regex and substitute with\n                               # the given string\n([^[:blank:]]+[[:blank:]]+){3} # match first 3 fields of the line separated by space/tab\n \"&amp;\" b \"/\"                     # replace by matched string + var b + /\n</code></pre>\n\n<hr>\n\n<p><strong>EDIT:</strong> (Thanks to @EdMorton) To make it work with any value in argument (e.g. try both solutions if <code>bucket=\"&amp;\"</code>) use:</p>\n\n<pre><code>awk --re-interval -v b=\"$bucket\" 'match($0, /([^[:blank:]]+[[:blank:]]+){3}/) {\n    $0 = substr($0, 1, RLENGTH) b \"/\" substr($0, RLENGTH+1) } 1' file\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 20787, "user_id": 1251660, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/UaQAA.jpg?s=128&g=1", "display_name": "slayedbylucifer", "link": "https://stackoverflow.com/users/1251660/slayedbylucifer"}, "edited": false, "score": 0, "creation_date": 1427118085, "post_id": 29211655, "comment_id": 46633014, "body": "Thanks. If you could provide <code>awk</code> solution then that will be great. +1 nonetheless. Besides, some explanation of the <code>perl</code> one-liner would be really helpful."}, {"owner": {"reputation": 25491, "user_id": 49197, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/15ebf24a33a29b9efbf9924f530dd736?s=128&d=identicon&r=PG", "display_name": "Hynek -Pichi- Vychodil", "link": "https://stackoverflow.com/users/49197/hynek-pichi-vychodil"}, "reply_to_user": {"reputation": 20787, "user_id": 1251660, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/UaQAA.jpg?s=128&g=1", "display_name": "slayedbylucifer", "link": "https://stackoverflow.com/users/1251660/slayedbylucifer"}, "edited": false, "score": 0, "creation_date": 1427118370, "post_id": 29211655, "comment_id": 46633208, "body": "It is technically same solution as the <code>sed</code> one but with the help of power of Perl regexp. And it has also some additional safety because I like to avoid escaping issues."}, {"owner": {"reputation": 25491, "user_id": 49197, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/15ebf24a33a29b9efbf9924f530dd736?s=128&d=identicon&r=PG", "display_name": "Hynek -Pichi- Vychodil", "link": "https://stackoverflow.com/users/49197/hynek-pichi-vychodil"}, "reply_to_user": {"reputation": 20787, "user_id": 1251660, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/UaQAA.jpg?s=128&g=1", "display_name": "slayedbylucifer", "link": "https://stackoverflow.com/users/1251660/slayedbylucifer"}, "edited": false, "score": 0, "creation_date": 1427118804, "post_id": 29211655, "comment_id": 46633492, "body": "BTW It is pretty idiomatic Perl so if you have any specific question you can ask."}], "tags": [], "owner": {"reputation": 25491, "user_id": 49197, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/15ebf24a33a29b9efbf9924f530dd736?s=128&d=identicon&r=PG", "display_name": "Hynek -Pichi- Vychodil", "link": "https://stackoverflow.com/users/49197/hynek-pichi-vychodil"}, "is_accepted": false, "score": 3, "last_activity_date": 1427118526, "last_edit_date": 1495541043, "creation_date": 1427117761, "answer_id": 29211655, "question_id": 29211473, "link": "https://stackoverflow.com/questions/29211473/awk-maintain-field-spacing-like-input-file/29211655#29211655", "title": "AWK: Maintain field spacing like input file", "body": "<p>You have tagged Perl in OP so there is a Perl solution:</p>\n\n<pre><code>perl -pe'BEGIN{$var=shift}s,(?:.*?\\s+){3}\\K,$var/,' \"$bucket\" out\n</code></pre>\n\n<p>It is technically same solution as the <a href=\"https://stackoverflow.com/a/29211574/49197\">solution</a> using <code>sed</code> but with the benefit it avoids escaping problems. Shell variable <code>$bucket</code> can contain anything.</p>\n"}, {"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user4453924"}, "edited": false, "score": 0, "creation_date": 1427118730, "post_id": 29211887, "comment_id": 46633442, "body": "This needs 4.0+ version of gawk"}, {"owner": {"reputation": 20787, "user_id": 1251660, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/UaQAA.jpg?s=128&g=1", "display_name": "slayedbylucifer", "link": "https://stackoverflow.com/users/1251660/slayedbylucifer"}, "edited": false, "score": 0, "creation_date": 1427123114, "post_id": 29211887, "comment_id": 46636657, "body": "This fails with this error: <code>gawk: fatal: 4 is invalid as number of arguments for split</code>. BTW, this is the awk that I am Running: <code>GNU Awk 3.1.8</code>. However <code>sed</code> solution works for this Sample data. +1 nonetheless for your time."}, {"owner": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "edited": false, "score": 0, "creation_date": 1427125936, "post_id": 29211887, "comment_id": 46638608, "body": "We only got the 4th arg to split added (after much debate!) in gawk 4.0 as @JID already told you."}], "tags": [], "owner": {"reputation": 39446, "user_id": 4301306, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a1461d0104809c90e2a252a2d4b0ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Wintermute", "link": "https://stackoverflow.com/users/4301306/wintermute"}, "is_accepted": false, "score": 1, "last_activity_date": 1427120429, "last_edit_date": 1427120429, "creation_date": 1427118406, "answer_id": 29211887, "question_id": 29211473, "link": "https://stackoverflow.com/questions/29211473/awk-maintain-field-spacing-like-input-file/29211887#29211887", "title": "AWK: Maintain field spacing like input file", "body": "<p>This is a bit tricky to do in awk, but there is a relevant GNU extension: In gawk, the <code>split</code> function takes an optional fourth parameter to save the actual field delimiters for later use. Using that:</p>\n\n<pre><code>gawk -v bucket=\"$bucket\" '{ split($0, f, FS, d); d[NF] = ORS; f[4] = bucket \"/\" f[4]; for(i = 1; i &lt;= NF; ++i) printf(\"%s%s\", f[i], d[i]); }' filename\n</code></pre>\n\n<p>That is:</p>\n\n<pre><code>{\n  split($0, f, FS, d)             # split line into fields, saving fields in\n                                  # the f and delimiters in the d array\n  d[NF] = ORS                     # for the newline at the end\n  f[4] = bucket \"/\" f[4]          # fix fourth field\n  for(i = 1; i &lt;= NF; ++i) {      # then print the fields separated by the\n    printf(\"%s%s\", f[i], d[i]);   # saved delimiters\n  }\n}\n</code></pre>\n\n<p><strong>Addendum:</strong> I cannot really recommend doing this with sed unless the variable comes from a trustworthy source and is guaranteed to not contain metacharacters (otherwise you <em>will</em> have code injection problems). That said: a simple way with sed is</p>\n\n<pre><code>sed \"s|[[:space:]]\\+|&amp;${bucket}/|3\" filename\n</code></pre>\n\n<p>...which appends <code>${bucket}</code> to the third occurrence of <code>[[:space:]]\\+</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 658023, "user_id": 548225, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/dab08478b226280d4a30894c9a7ed719?s=128&d=identicon&r=PG", "display_name": "anubhava", "link": "https://stackoverflow.com/users/548225/anubhava"}, "reply_to_user": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "edited": false, "score": 1, "creation_date": 1427125601, "post_id": 29212608, "comment_id": 46638359, "body": "@EdMorton: There is a field after <code>$4</code> and that is being skipped here. And don&#39;t know how can an answer assume that 3rd field is width=10"}, {"owner": {"reputation": 20787, "user_id": 1251660, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/UaQAA.jpg?s=128&g=1", "display_name": "slayedbylucifer", "link": "https://stackoverflow.com/users/1251660/slayedbylucifer"}, "reply_to_user": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "edited": false, "score": 0, "creation_date": 1427128053, "post_id": 29212608, "comment_id": 46640058, "body": "@EdMorton, Well.. what you said should be contributed to the fact that English isn&#39;t my primary language. So, yes, I could have phrased question with better words... but the current situation isn&#39;t terrible either."}, {"owner": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "reply_to_user": {"reputation": 20787, "user_id": 1251660, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/UaQAA.jpg?s=128&g=1", "display_name": "slayedbylucifer", "link": "https://stackoverflow.com/users/1251660/slayedbylucifer"}, "edited": false, "score": 1, "creation_date": 1427128850, "post_id": 29212608, "comment_id": 46640590, "body": "@slayedbylucifer your English is excellent, the issue was asking for the input formatting to be preserved when you apparently don&#39;t need it to be."}], "tags": [], "owner": {"reputation": 172529, "user_id": 140750, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/4c7af12cad08c95bc206a9636d164224?s=128&d=identicon&r=PG", "display_name": "William Pursell", "link": "https://stackoverflow.com/users/140750/william-pursell"}, "is_accepted": false, "score": 1, "last_activity_date": 1427120329, "creation_date": 1427120329, "answer_id": 29212608, "question_id": 29211473, "link": "https://stackoverflow.com/questions/29211473/awk-maintain-field-spacing-like-input-file/29212608#29212608", "title": "AWK: Maintain field spacing like input file", "body": "<p>If you're going to insist on awk, it might be simplest to explicitly give a format string:</p>\n\n<pre><code>awk '{printf \"%s %s %10s %s/%s\\n\", $1, $2, $3, b, $4}' b=\"$bucket\" out\n</code></pre>\n"}], "owner": {"reputation": 20787, "user_id": 1251660, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/UaQAA.jpg?s=128&g=1", "display_name": "slayedbylucifer", "link": "https://stackoverflow.com/users/1251660/slayedbylucifer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 144, "favorite_count": 0, "accepted_answer_id": 29211646, "answer_count": 5, "score": 3, "last_activity_date": 1427125186, "creation_date": 1427117258, "last_edit_date": 1427119951, "question_id": 29211473, "link": "https://stackoverflow.com/questions/29211473/awk-maintain-field-spacing-like-input-file", "title": "AWK: Maintain field spacing like input file", "body": "<p>I am emulating my issue in below test file:</p>\n\n<pre><code># cat out \n2014-01-10 18:23:25          0 Andy/ADPTER/\n2014-01-10 18:23:36        503 Sandy/ADPTER/ACCOUNTTYPE MAP.csv\n2014-01-10 18:23:38        516 John/ADPTER/CITY MAP.csv\n2014-01-10 18:23:38        398 Wendy/ADPTER/COUNTRY MAP.csv\n2014-01-10 18:23:38      11117 Andy/ADPTER/CURRENCY MAP.csv\n2014-01-10 18:23:38        260 Sandy/ADPTER/GENDER MAP.csv\n2014-01-10 18:23:39        466 John/ADPTER/STATE MAP.csv\n2014-01-10 18:23:40        373 Jim/ADPTER/UNITS MAP.csv\n</code></pre>\n\n<p>This is my Bash variable:</p>\n\n<pre><code># echo $bucket\nbucket_name\n</code></pre>\n\n<p>So, in above file, I want the Bash variable value be prefixed to the 4th Field. </p>\n\n<p>This is my desired output:</p>\n\n<pre><code>2014-01-10 18:23:25          0 bucket_name/Andy/ADPTER/\n2014-01-10 18:23:36        503 bucket_name/Sandy/ADPTER/ACCOUNTTYPE MAP.csv\n2014-01-10 18:23:38        516 bucket_name/John/ADPTER/CITY MAP.csv\n2014-01-10 18:23:38        398 bucket_name/Wendy/ADPTER/COUNTRY MAP.csv\n2014-01-10 18:23:38      11117 bucket_name/Andy/ADPTER/CURRENCY MAP.csv\n2014-01-10 18:23:38        260 bucket_name/Sandy/ADPTER/GENDER MAP.csv\n2014-01-10 18:23:39        466 bucket_name/John/ADPTER/STATE MAP.csv\n2014-01-10 18:23:40        373 bucket_name/Jim/ADPTER/UNITS MAP.csv\n</code></pre>\n\n<p>This is what I have tried:</p>\n\n<pre><code># awk -v var=$bucket '{$4=var\"/\"$4; print}' out \n2014-01-10 18:23:25 0 bucket_name/Andy/ADPTER/\n2014-01-10 18:23:36 503 bucket_name/Sandy/ADPTER/ACCOUNTTYPE MAP.csv\n2014-01-10 18:23:38 516 bucket_name/John/ADPTER/CITY MAP.csv\n2014-01-10 18:23:38 398 bucket_name/Wendy/ADPTER/COUNTRY MAP.csv\n2014-01-10 18:23:38 11117 bucket_name/Andy/ADPTER/CURRENCY MAP.csv\n2014-01-10 18:23:38 260 bucket_name/Sandy/ADPTER/GENDER MAP.csv\n2014-01-10 18:23:39 466 bucket_name/John/ADPTER/STATE MAP.csv\n2014-01-10 18:23:40 373 bucket_name/Jim/ADPTER/UNITS MAP.csv\n</code></pre>\n\n<p><strong>Question:</strong></p>\n\n<p>My <code>awk</code> command does what I need, however, it messes up the outfield spacing (separator ??). My Intention is to <strong>just</strong> prefix <code>bucket_name/</code> to 4th field and maintain whatever spacing scheme (including right/left justified fields) the input file has. </p>\n\n<p>This is my another attempt:</p>\n\n<pre><code># awk -v var=$bucket 'BEGIN{OFS=\"\\t\"}{$4=var\"/\"$4; print}' out \n2014-01-10  18:23:25    0   bucket_name/Andy/ADPTER/\n2014-01-10  18:23:36    503 bucket_name/Sandy/ADPTER/ACCOUNTTYPE    MAP.csv\n2014-01-10  18:23:38    516 bucket_name/John/ADPTER/CITY    MAP.csv\n2014-01-10  18:23:38    398 bucket_name/Wendy/ADPTER/COUNTRY    MAP.csv\n2014-01-10  18:23:38    11117   bucket_name/Andy/ADPTER/CURRENCY    MAP.csv\n2014-01-10  18:23:38    260 bucket_name/Sandy/ADPTER/GENDER MAP.csv\n2014-01-10  18:23:39    466 bucket_name/John/ADPTER/STATE   MAP.csv\n2014-01-10  18:23:40    373 bucket_name/Jim/ADPTER/UNITS    MAP.csv\n</code></pre>\n\n<p>But it's not helping either. </p>\n\n<p>Thanks.</p>\n"}, {"tags": ["perl", "duplicates", "match"], "comments": [{"owner": {"reputation": 25491, "user_id": 49197, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/15ebf24a33a29b9efbf9924f530dd736?s=128&d=identicon&r=PG", "display_name": "Hynek -Pichi- Vychodil", "link": "https://stackoverflow.com/users/49197/hynek-pichi-vychodil"}, "edited": false, "score": 0, "creation_date": 1427113707, "post_id": 29210119, "comment_id": 46630185, "body": "What do you mean by duplicates? Because you mention similar rows then."}, {"owner": {"reputation": 3, "user_id": 4602171, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/d5076e27abea7b06355f7475fae9d133?s=128&d=identicon&r=PG&f=1", "display_name": "Tanumoy", "link": "https://stackoverflow.com/users/4602171/tanumoy"}, "reply_to_user": {"reputation": 25491, "user_id": 49197, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/15ebf24a33a29b9efbf9924f530dd736?s=128&d=identicon&r=PG", "display_name": "Hynek -Pichi- Vychodil", "link": "https://stackoverflow.com/users/49197/hynek-pichi-vychodil"}, "edited": false, "score": 0, "creation_date": 1427113917, "post_id": 29210119, "comment_id": 46630299, "body": "What i am trying to state is, the data is about certain entity. while collecting information somebody might have used the exact data that was used earlier, which would make it duplicate. In another case information collector might have used short forms or maybe missed information here and there which would make the data similar rather than duplicate."}, {"owner": {"reputation": 25491, "user_id": 49197, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/15ebf24a33a29b9efbf9924f530dd736?s=128&d=identicon&r=PG", "display_name": "Hynek -Pichi- Vychodil", "link": "https://stackoverflow.com/users/49197/hynek-pichi-vychodil"}, "edited": false, "score": 0, "creation_date": 1427116383, "post_id": 29210119, "comment_id": 46631887, "body": "It&#39;s very vague definition for computer programm."}], "answers": [{"comments": [{"owner": {"reputation": 25491, "user_id": 49197, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/15ebf24a33a29b9efbf9924f530dd736?s=128&d=identicon&r=PG", "display_name": "Hynek -Pichi- Vychodil", "link": "https://stackoverflow.com/users/49197/hynek-pichi-vychodil"}, "edited": false, "score": 0, "creation_date": 1427131922, "post_id": 29212627, "comment_id": 46642456, "body": "Are you sure you can run this select on table which <i>has more than million rows in it</i> and expect a result in less then 3 days?"}, {"owner": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "reply_to_user": {"reputation": 25491, "user_id": 49197, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/15ebf24a33a29b9efbf9924f530dd736?s=128&d=identicon&r=PG", "display_name": "Hynek -Pichi- Vychodil", "link": "https://stackoverflow.com/users/49197/hynek-pichi-vychodil"}, "edited": false, "score": 0, "creation_date": 1427140115, "post_id": 29212627, "comment_id": 46647078, "body": "@Hynek-Pichi-Vychodil Yes, a million rows isn&#39;t much for a modern computer. Might have to throw some indexes on the columns you&#39;re checking for duplicates.  It&#39;s not the most performant thing, but fortunately the OP only needs to do it once."}, {"owner": {"reputation": 25491, "user_id": 49197, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/15ebf24a33a29b9efbf9924f530dd736?s=128&d=identicon&r=PG", "display_name": "Hynek -Pichi- Vychodil", "link": "https://stackoverflow.com/users/49197/hynek-pichi-vychodil"}, "edited": false, "score": 0, "creation_date": 1427140565, "post_id": 29212627, "comment_id": 46647328, "body": "But in your case you will do <code>0.5*n*(n-1)</code> comparisons. Still no problem?"}, {"owner": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "reply_to_user": {"reputation": 25491, "user_id": 49197, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/15ebf24a33a29b9efbf9924f530dd736?s=128&d=identicon&r=PG", "display_name": "Hynek -Pichi- Vychodil", "link": "https://stackoverflow.com/users/49197/hynek-pichi-vychodil"}, "edited": false, "score": 1, "creation_date": 1427140629, "post_id": 29212627, "comment_id": 46647365, "body": "@Hynek-Pichi-Vychodil The indexed version returns in 2 seconds for 500,000 rows.  Once you go off indexes the trouble starts.  Got a better algorithm?  Let&#39;s hear your answer."}, {"owner": {"reputation": 25491, "user_id": 49197, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/15ebf24a33a29b9efbf9924f530dd736?s=128&d=identicon&r=PG", "display_name": "Hynek -Pichi- Vychodil", "link": "https://stackoverflow.com/users/49197/hynek-pichi-vychodil"}, "edited": false, "score": 0, "creation_date": 1427140801, "post_id": 29212627, "comment_id": 46647445, "body": "If I would know the answer I would write it. But your answer is no answer. Everybody can make the wrong answer. It is why I ask the question in comments below the OP."}, {"owner": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "reply_to_user": {"reputation": 25491, "user_id": 49197, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/15ebf24a33a29b9efbf9924f530dd736?s=128&d=identicon&r=PG", "display_name": "Hynek -Pichi- Vychodil", "link": "https://stackoverflow.com/users/49197/hynek-pichi-vychodil"}, "edited": false, "score": 0, "creation_date": 1427140904, "post_id": 29212627, "comment_id": 46647508, "body": "@Hynek-Pichi-Vychodil The OP can run the slow queries while they&#39;re waiting around for someone to post a better algorithm.  It&#39;s not always about raw performance; with a one-shot task like this it&#39;s about just getting it done."}, {"owner": {"reputation": 2954, "user_id": 2905, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f0eb53c993d09b1135375938f9727c28?s=128&d=identicon&r=PG", "display_name": "asjo", "link": "https://stackoverflow.com/users/2905/asjo"}, "edited": false, "score": 2, "creation_date": 1427141237, "post_id": 29212627, "comment_id": 46647686, "body": "For fuzzy matching the trigram contrib module pg_trgm might be of use: <a href=\"http://www.postgresql.org/docs/9.4/static/pgtrgm.html\" rel=\"nofollow noreferrer\">postgresql.org/docs/9.4/static/pgtrgm.html</a>"}, {"owner": {"reputation": 25491, "user_id": 49197, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/15ebf24a33a29b9efbf9924f530dd736?s=128&d=identicon&r=PG", "display_name": "Hynek -Pichi- Vychodil", "link": "https://stackoverflow.com/users/49197/hynek-pichi-vychodil"}, "edited": false, "score": 0, "creation_date": 1427141285, "post_id": 29212627, "comment_id": 46647721, "body": "There is clearly stated <i>The real data has more than million rows in it</i> in the OP. And also <i>So I am wondering is it possible to match content based on &quot;LIKELINESS / SIMILARITY&quot;</i>. I&#39;m DWH expert with 12 years of experience. I even write special DB engines for special purposes and I can tell you, It is nearly impossible task without any further information. Especially if someone suggest <code>O(N^2)</code> algorithm for one million task, then the one doesn&#39;t know what is talking about."}, {"owner": {"reputation": 2954, "user_id": 2905, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f0eb53c993d09b1135375938f9727c28?s=128&d=identicon&r=PG", "display_name": "asjo", "link": "https://stackoverflow.com/users/2905/asjo"}, "edited": false, "score": 2, "creation_date": 1427141519, "post_id": 29212627, "comment_id": 46647858, "body": "Note that you can make indexes on functions in Postgres, so you don&#39;t have to create a column with LOWER(name) in it, you can just make an index of LOWER(name)."}, {"owner": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "reply_to_user": {"reputation": 2954, "user_id": 2905, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f0eb53c993d09b1135375938f9727c28?s=128&d=identicon&r=PG", "display_name": "asjo", "link": "https://stackoverflow.com/users/2905/asjo"}, "edited": false, "score": 0, "creation_date": 1427142313, "post_id": 29212627, "comment_id": 46648303, "body": "@asjo Thanks, I&#39;ve incorporated them into my answer.  I&#39;ve never used pg_trgm, could you post an answer featuring that module?"}, {"owner": {"reputation": 2954, "user_id": 2905, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f0eb53c993d09b1135375938f9727c28?s=128&d=identicon&r=PG", "display_name": "asjo", "link": "https://stackoverflow.com/users/2905/asjo"}, "reply_to_user": {"reputation": 25491, "user_id": 49197, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/15ebf24a33a29b9efbf9924f530dd736?s=128&d=identicon&r=PG", "display_name": "Hynek -Pichi- Vychodil", "link": "https://stackoverflow.com/users/49197/hynek-pichi-vychodil"}, "edited": false, "score": 0, "creation_date": 1427143406, "post_id": 29212627, "comment_id": 46648940, "body": "@Hynek-Pichi-Vychodil How do you get to the conclusion that this will be O(n&#178;)? The database uses indexes to find matches - it doesn&#39;t have to compare with each and every other record."}, {"owner": {"reputation": 25491, "user_id": 49197, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/15ebf24a33a29b9efbf9924f530dd736?s=128&d=identicon&r=PG", "display_name": "Hynek -Pichi- Vychodil", "link": "https://stackoverflow.com/users/49197/hynek-pichi-vychodil"}, "reply_to_user": {"reputation": 2954, "user_id": 2905, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f0eb53c993d09b1135375938f9727c28?s=128&d=identicon&r=PG", "display_name": "asjo", "link": "https://stackoverflow.com/users/2905/asjo"}, "edited": false, "score": 0, "creation_date": 1427143624, "post_id": 29212627, "comment_id": 46649043, "body": "@asjo: Original answer didn&#39;t contain index. See edits."}, {"owner": {"reputation": 2954, "user_id": 2905, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f0eb53c993d09b1135375938f9727c28?s=128&d=identicon&r=PG", "display_name": "asjo", "link": "https://stackoverflow.com/users/2905/asjo"}, "reply_to_user": {"reputation": 25491, "user_id": 49197, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/15ebf24a33a29b9efbf9924f530dd736?s=128&d=identicon&r=PG", "display_name": "Hynek -Pichi- Vychodil", "link": "https://stackoverflow.com/users/49197/hynek-pichi-vychodil"}, "edited": false, "score": 1, "creation_date": 1427143810, "post_id": 29212627, "comment_id": 46649132, "body": "@Hynek-Pichi-Vychodil As a database expert with many years of experience, you certainly know that indexes are commonly used?"}, {"owner": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "reply_to_user": {"reputation": 25491, "user_id": 49197, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/15ebf24a33a29b9efbf9924f530dd736?s=128&d=identicon&r=PG", "display_name": "Hynek -Pichi- Vychodil", "link": "https://stackoverflow.com/users/49197/hynek-pichi-vychodil"}, "edited": false, "score": 0, "creation_date": 1427143955, "post_id": 29212627, "comment_id": 46649205, "body": "@Hynek-Pichi-Vychodil By taking a shot at an answer, and improving it with user feedback, we came to a better answer. How about that? Next time, relax and work the problem a bit before declaring it impossible.  I suggest we clean up this comment thread.  I&#39;ll delete my half of the conversation once yours is gone."}, {"owner": {"reputation": 25491, "user_id": 49197, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/15ebf24a33a29b9efbf9924f530dd736?s=128&d=identicon&r=PG", "display_name": "Hynek -Pichi- Vychodil", "link": "https://stackoverflow.com/users/49197/hynek-pichi-vychodil"}, "edited": false, "score": 0, "creation_date": 1427144525, "post_id": 29212627, "comment_id": 46649527, "body": "@Schwern: You are making excuses. Without knowing what similarity means you can&#39;t answer this question. If the similarity is edit distance (Levenshtein, Damerau-Levenshtein, Wagner-Fischer and so on) your solution still doesn&#39;t work, because you can&#39;t use an index anyway. So I see a very little improvement. You now know, without index you can&#39;t solve task and for some tasks there is not proper index."}, {"owner": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "reply_to_user": {"reputation": 25491, "user_id": 49197, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/15ebf24a33a29b9efbf9924f530dd736?s=128&d=identicon&r=PG", "display_name": "Hynek -Pichi- Vychodil", "link": "https://stackoverflow.com/users/49197/hynek-pichi-vychodil"}, "edited": false, "score": 0, "creation_date": 1427144747, "post_id": 29212627, "comment_id": 46649669, "body": "@Hynek-Pichi-Vychodil That&#39;s exactly what the <a href=\"http://www.postgresql.org/docs/9.4/static/pgtrgm.html\" rel=\"nofollow noreferrer\">pg_trgm indexes</a> do, index similarity by distance. Your objections are valid, but you keep telling us it&#39;s impossible and to stop trying; we keep working the problem and get a better answer. This isn&#39;t a competition. Try not talking and listening instead, I&#39;ve learned a lot in this answer."}, {"owner": {"reputation": 25491, "user_id": 49197, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/15ebf24a33a29b9efbf9924f530dd736?s=128&d=identicon&r=PG", "display_name": "Hynek -Pichi- Vychodil", "link": "https://stackoverflow.com/users/49197/hynek-pichi-vychodil"}, "edited": false, "score": 0, "creation_date": 1427145090, "post_id": 29212627, "comment_id": 46649863, "body": "@Schwern You should read more carefully. pg_trgm index uses trigram similarity. If you look in mine comment I was writing about different similarities and even enumerate some of them. I see you learned a lot. Add an index for example. I would like to be your customer and you will learn on me doing even basic stuff."}, {"owner": {"reputation": 2954, "user_id": 2905, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f0eb53c993d09b1135375938f9727c28?s=128&d=identicon&r=PG", "display_name": "asjo", "link": "https://stackoverflow.com/users/2905/asjo"}, "reply_to_user": {"reputation": 25491, "user_id": 49197, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/15ebf24a33a29b9efbf9924f530dd736?s=128&d=identicon&r=PG", "display_name": "Hynek -Pichi- Vychodil", "link": "https://stackoverflow.com/users/49197/hynek-pichi-vychodil"}, "edited": false, "score": 1, "creation_date": 1427145187, "post_id": 29212627, "comment_id": 46649913, "body": "@Hynek-Pichi-Vychodil You are not being constructive. When a question is unclear, providing a workable answer for a subset of the question, or a clearly defined variation of the question, is valuable."}, {"owner": {"reputation": 25491, "user_id": 49197, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/15ebf24a33a29b9efbf9924f530dd736?s=128&d=identicon&r=PG", "display_name": "Hynek -Pichi- Vychodil", "link": "https://stackoverflow.com/users/49197/hynek-pichi-vychodil"}, "reply_to_user": {"reputation": 2954, "user_id": 2905, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f0eb53c993d09b1135375938f9727c28?s=128&d=identicon&r=PG", "display_name": "asjo", "link": "https://stackoverflow.com/users/2905/asjo"}, "edited": false, "score": 0, "creation_date": 1427145519, "post_id": 29212627, "comment_id": 46650120, "body": "@asjo Look, I have seen so called professionals going around server with the price tag hundred of thousand bucks and able run query again and again day by day waiting once timeout set to 15 hours will not kill. Sorry, may be overreacting."}, {"owner": {"reputation": 25491, "user_id": 49197, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/15ebf24a33a29b9efbf9924f530dd736?s=128&d=identicon&r=PG", "display_name": "Hynek -Pichi- Vychodil", "link": "https://stackoverflow.com/users/49197/hynek-pichi-vychodil"}, "edited": false, "score": 0, "creation_date": 1427150830, "post_id": 29212627, "comment_id": 46652584, "body": "BTW In OP used example <code>google</code> and <code>gugl</code> has 0.083 similarity which is considered as almost zero by any meaning. So even using pg_trgm is not solving task described in OP."}, {"owner": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "reply_to_user": {"reputation": 25491, "user_id": 49197, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/15ebf24a33a29b9efbf9924f530dd736?s=128&d=identicon&r=PG", "display_name": "Hynek -Pichi- Vychodil", "link": "https://stackoverflow.com/users/49197/hynek-pichi-vychodil"}, "edited": false, "score": 0, "creation_date": 1427151532, "post_id": 29212627, "comment_id": 46652838, "body": "@Hynek-Pichi-Vychodil <code>google</code> and <code>gugl</code> have the same <a href=\"https://en.wikipedia.org/wiki/Metaphone\" rel=\"nofollow noreferrer\">metaphone codes</a>, <code>KKL</code>, which is one of the <a href=\"http://www.postgresql.org/docs/9.4/static/fuzzystrmatch.html\" rel=\"nofollow noreferrer\">fuzzy comparison algorithms</a> mentioned in my answer.  If you don&#39;t like the parameters of the question, ask the OP to clarify them.  I&#39;m dealing with the uncertainty by offering the OP options."}], "tags": [], "owner": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "is_accepted": false, "score": 3, "last_activity_date": 1427142284, "last_edit_date": 1427142284, "creation_date": 1427120395, "answer_id": 29212627, "question_id": 29210119, "link": "https://stackoverflow.com/questions/29210119/perl-tracking-duplicates/29212627#29212627", "title": "Perl : Tracking duplicates", "body": "<p>You could write a Perl program to do this, but it will be easier and faster to put it into a SQL database and use that.</p>\n\n<p>Most SQL databases have a way to import CSV.  <a href=\"http://www.postgresql.org/docs/current/static/sql-copy.html\" rel=\"nofollow\">For this answer, I suggest PostgreSQL</a> because it has very powerful string functions which you will need to find your fuzzy duplicates.  Create your table with an auto incremented ID column if your CSV data doesn't already have unique IDs.</p>\n\n<p>Once the import is done, add indexes on the columns you want to check for duplicates.</p>\n\n<pre><code>CREATE INDEX name ON whatever (name);\n</code></pre>\n\n<p>You can do a <a href=\"https://stackoverflow.com/questions/2458519/explanation-of-self-joins\">self-join</a> to look for duplicates in whatever way you like.  Here's an example that finds duplicate names.</p>\n\n<pre><code>SELECT id\nFROM   whatever t1\nJOIN   whatever t2 ON t1.id &lt; t2.id\nWHERE  t1.name = t2.name\n</code></pre>\n\n<p>PostgreSQL has <a href=\"http://www.postgresql.org/docs/current/static/functions-string.html\" rel=\"nofollow\">powerful string functions including regexes</a> to do the comparisons.</p>\n\n<p>Indexes will have a hard time working on things like <code>lower(t1.name)</code>.  Depending on the sorts of duplicates you want to work with, you can add indexes for these transforms (this is a feature of PostgreSQL).  For example, if you wanted to search case insensitively you can add an index on the lower-case name.  (Thanks @asjo for pointing that out)</p>\n\n<pre><code>CREATE INDEX ON whatever ((lower(name)));\n\n// This will be muuuuuch faster\nSELECT id\nFROM   whatever t1\nJOIN   whatever t2 ON t1.id &lt; t2.id\nWHERE  lower(t1.name) = lower(t2.name)\n</code></pre>\n\n<p>A \"likeness\" match can be achieved in several ways, a simple one would be to use the <a href=\"http://www.postgresql.org/docs/9.4/static/fuzzystrmatch.html\" rel=\"nofollow\">fuzzystrmatch</a> functions like <code>metaphone()</code>.  Same trick as before, add a column with the transformed row and index it.</p>\n\n<p>Other simple things like data normalization are better done on the data itself before adding indexes and looking for duplicates.  For example, trim out and squish extra whitespace.</p>\n\n<pre><code>UPDATE whatever SET name = trim(both from name);\nUPDATE whatever SET name = regexp_replace(name, '[[:space:]]+', ' ');\n</code></pre>\n\n<p>Finally, you can use the <a href=\"http://www.postgresql.org/docs/9.4/static/pgtrgm.html\" rel=\"nofollow\">Postgres Trigram module</a> to add fuzzy indexing to your table (thanks again to @asjo).</p>\n"}], "owner": {"reputation": 3, "user_id": 4602171, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/d5076e27abea7b06355f7475fae9d133?s=128&d=identicon&r=PG&f=1", "display_name": "Tanumoy", "link": "https://stackoverflow.com/users/4602171/tanumoy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 78, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1427142284, "creation_date": 1427113346, "last_edit_date": 1427118903, "question_id": 29210119, "link": "https://stackoverflow.com/questions/29210119/perl-tracking-duplicates", "title": "Perl : Tracking duplicates", "body": "<p>I am trying to figure out what would be the best way to go ahead and locate duplicates in a 5 column csv data. The real data has more than million rows in it.</p>\n\n<p>Following is the content of mentioned 6 columns.</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>Name, address, city, post-code, phone number, machine number\n</code></pre>\n\n<p>Data does not have fixed length, data might in certain columns might be missing in certain instances.</p>\n\n<p>I am thinking of using perl to first normalize all the short forms used in names, city and address. Fellow perl enthusiasts from stackoverflow have helped me a lot.<br>\nBut there would still be a lot of data which would be difficult to match.\nSo I am wondering is it possible to match content based on \"LIKELINESS / SIMILARITY\" (eg. google similar to gugl) the likeliness would be required to overcome errors that creeped in while collecting data.</p>\n\n<p>I have 2 tasks in hand w.r.t. the data.</p>\n\n<ol>\n<li>Flag duplicate rows with certain identifier</li>\n<li>Mention the percentage match between similar rows.</li>\n</ol>\n\n<p>I would really appreciate if I could get suggestions as to what all possible methods could be employed and which would propbably be best because of their certain merits.</p>\n"}, {"tags": ["php", "regex", "perl", "serialization"], "comments": [{"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 2, "creation_date": 1427109126, "post_id": 29208639, "comment_id": 46627538, "body": "How is your data serialised initially? It looks like it&#39;s trying to be something like JSON, but it isn&#39;t quite?"}, {"owner": {"reputation": 7570, "user_id": 17945, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/e8cbc0b9ed29b027a127d8df309af5a6?s=128&d=identicon&r=PG", "display_name": "reinierpost", "link": "https://stackoverflow.com/users/17945/reinierpost"}, "edited": false, "score": 2, "creation_date": 1427109309, "post_id": 29208639, "comment_id": 46627620, "body": "If you have any influence over how the data is serialized, make sure it&#39;s a known format with a Perl library to deserialize it, such as JSON. Regexes aren&#39;t a good fit her because of the recursion (the arbitrarily nestable brackets); Perl regexes can deal with that in principle but I don&#39;t find them easy enough to understand."}, {"owner": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "edited": false, "score": 2, "creation_date": 1427109515, "post_id": 29208639, "comment_id": 46627734, "body": "That doesn&#39;t look like valid JSON."}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 2, "creation_date": 1427109738, "post_id": 29208639, "comment_id": 46627839, "body": "Can you please provide the serialization corresponding to the input? You just showed two independent strings in different formats."}, {"owner": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "edited": false, "score": 1, "creation_date": 1427110550, "post_id": 29208639, "comment_id": 46628284, "body": "<a href=\"http://search.cpan.org/~bobtfish/PHP-Serialization-0.34/lib/PHP/Serialization.pm\" rel=\"nofollow noreferrer\">search.cpan.org/~bobtfish/PHP-Serialization-0.34/lib/PHP/&hellip;</a>"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1427119291, "post_id": 29208639, "comment_id": 46633859, "body": "PHP::Serialization&#39;s <code>unserialize</code> doesn&#39;t work. It croaks on the line feeds and the backslashes."}, {"owner": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1427119642, "post_id": 29208639, "comment_id": 46634127, "body": "@ikegami so does php <a href=\"https://eval.in/303419\" rel=\"nofollow noreferrer\">eval.in/303419</a>"}, {"owner": {"reputation": 351, "user_id": 2598494, "user_type": "registered", "accept_rate": 13, "profile_image": "https://www.gravatar.com/avatar/02d66fa0fdbd3eb34745afa352ff99e2?s=128&d=identicon&r=PG", "display_name": "Laeeq", "link": "https://stackoverflow.com/users/2598494/laeeq"}, "edited": false, "score": 1, "creation_date": 1427188320, "post_id": 29208639, "comment_id": 46664004, "body": "Thanks for ans. I have get it work by using PHP::Serialization&#39; module."}], "answers": [{"comments": [{"owner": {"reputation": 351, "user_id": 2598494, "user_type": "registered", "accept_rate": 13, "profile_image": "https://www.gravatar.com/avatar/02d66fa0fdbd3eb34745afa352ff99e2?s=128&d=identicon&r=PG", "display_name": "Laeeq", "link": "https://stackoverflow.com/users/2598494/laeeq"}, "edited": false, "score": 0, "creation_date": 1427188258, "post_id": 29212467, "comment_id": 46663967, "body": "I have loaded this module and get it serialized as per requirement. Thanks!"}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 2, "last_activity_date": 1427119942, "creation_date": 1427119942, "answer_id": 29212467, "question_id": 29208639, "link": "https://stackoverflow.com/questions/29208639/perl-regex-to-unserialize-data/29212467#29212467", "title": "Perl regex to unserialize data?", "body": "<p>If this was the output of PHP's <code>serialize</code>, you could use the following to get a data structure:</p>\n\n<pre><code>use PHP::Serialization qw( unserialize );\nmy $data = unserialize($serialized);\n</code></pre>\n\n<p>However, the seralized string was mangled by the addition of line feeds, spaces and backslashes. As such, you will need to write a custom parser for this unique format.</p>\n"}], "owner": {"reputation": 351, "user_id": 2598494, "user_type": "registered", "accept_rate": 13, "profile_image": "https://www.gravatar.com/avatar/02d66fa0fdbd3eb34745afa352ff99e2?s=128&d=identicon&r=PG", "display_name": "Laeeq", "link": "https://stackoverflow.com/users/2598494/laeeq"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 415, "favorite_count": 0, "answer_count": 1, "score": -4, "last_activity_date": 1427120100, "creation_date": 1427108659, "last_edit_date": 1427120100, "question_id": 29208639, "link": "https://stackoverflow.com/questions/29208639/perl-regex-to-unserialize-data", "title": "Perl regex to unserialize data?", "body": "<p>I am facing issue related to serialized data. I have serialized data like below:</p>\n\n<pre><code>a:1:{i:1;a:3:{s:8:\\\"question\\\";s:18:\\\"What do you think?\\\";s:6:\\\"choice\\\";a:2:{i:1;s:3:\\\"Yes\\\";i:2;s:2:\\\"No\\\";}s:5:\\\"votes\\\";a:2:{i:1;i:1;i:2;i:0;}}}\n</code></pre>\n\n<p>Now I want to unserialize this data using perl regex to an array like below:</p>\n\n<pre><code>Array ( [question] =&gt; Who is going to be the Wild Cards in the AFC? [multi] =&gt; 1 [choice] =&gt; Array ( [1] =&gt; Cincinnati [2] =&gt; Jacksonville [3] =&gt; New York Jets [4] =&gt; Kansas City [5] =&gt; Denver [6] =&gt; Other ) [votes] =&gt; Array ( [1] =&gt; 0 [2] =&gt; 0 [3] =&gt; 1 [4] =&gt; 1 [5] =&gt; 0 [6] =&gt; 0 ) )\n</code></pre>\n"}, {"tags": ["perl", "ubuntu"], "comments": [{"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 1, "creation_date": 1427109822, "post_id": 29208422, "comment_id": 46627878, "body": "Why do you need an old version of perl? There should be precompiled packages available. And if not - what are you doing to build your new perl? Looks like you&#39;re trying to compile with <code>cc</code> - do you have <code>gcc</code> installed?"}, {"owner": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "edited": false, "score": 1, "creation_date": 1427109880, "post_id": 29208422, "comment_id": 46627912, "body": "<a href=\"https://github.com/tokuhirom/plenv\" rel=\"nofollow noreferrer\">github.com/tokuhirom/plenv</a>"}, {"owner": {"reputation": 985, "user_id": 2195499, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/0d3180333388fe82acbed9a395ba9ee5?s=128&d=identicon&r=PG", "display_name": "Yashwanth Aluru", "link": "https://stackoverflow.com/users/2195499/yashwanth-aluru"}, "reply_to_user": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1427110362, "post_id": 29208422, "comment_id": 46628180, "body": "@Sobrique Yes I do have some precompiled packages. To execute them I need the older version of Perl... The C compilation is a part of the installation"}, {"owner": {"reputation": 71860, "user_id": 366377, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/863018588657c38d29f22e72dc81325e?s=128&d=identicon&r=PG", "display_name": "Jens Gustedt", "link": "https://stackoverflow.com/users/366377/jens-gustedt"}, "edited": false, "score": 0, "creation_date": 1427112228, "post_id": 29208422, "comment_id": 46629245, "body": "The error messages are from the linker, not from the compiler. You should get away by placing a <code>-lm</code> at the <i>end</i> of all compilation lines."}, {"owner": {"reputation": 71860, "user_id": 366377, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/863018588657c38d29f22e72dc81325e?s=128&d=identicon&r=PG", "display_name": "Jens Gustedt", "link": "https://stackoverflow.com/users/366377/jens-gustedt"}, "edited": false, "score": 2, "creation_date": 1427112335, "post_id": 29208422, "comment_id": 46629310, "body": "Also: installation questions are not something that I&#39;d expect on SO and you are not supposed to ask more than one question in one."}, {"owner": {"reputation": 985, "user_id": 2195499, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/0d3180333388fe82acbed9a395ba9ee5?s=128&d=identicon&r=PG", "display_name": "Yashwanth Aluru", "link": "https://stackoverflow.com/users/2195499/yashwanth-aluru"}, "edited": false, "score": 0, "creation_date": 1427112372, "post_id": 29208422, "comment_id": 46629341, "body": "How can I do that in between installation of Perl? I run commands to install Perl. In the middle there exists this file which is throwing these errors"}, {"owner": {"reputation": 172529, "user_id": 140750, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/4c7af12cad08c95bc206a9636d164224?s=128&d=identicon&r=PG", "display_name": "William Pursell", "link": "https://stackoverflow.com/users/140750/william-pursell"}, "edited": false, "score": 0, "creation_date": 1427115716, "post_id": 29208422, "comment_id": 46631427, "body": "<code>math.h</code> is not a library, it is a header.  <code>#include</code>-ing the header does not help the linker find the library."}, {"owner": {"reputation": 382, "user_id": 334931, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1f34fd19efd04f944b9db5d053afab57?s=128&d=identicon&r=PG", "display_name": "polettix", "link": "https://stackoverflow.com/users/334931/polettix"}, "reply_to_user": {"reputation": 71860, "user_id": 366377, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/863018588657c38d29f22e72dc81325e?s=128&d=identicon&r=PG", "display_name": "Jens Gustedt", "link": "https://stackoverflow.com/users/366377/jens-gustedt"}, "edited": false, "score": 0, "creation_date": 1459349393, "post_id": 29208422, "comment_id": 60248025, "body": "Landed here searching through Google. I eventually solved thanks to the suggestion by @JensGustedt: I opened the Makefile, located a line &quot;libs = &quot; and  added -lm at it, turning it into &quot;libs = -lm&quot;. The same can be obtained passing &quot;-A append:libs=-lm&quot; to Configure --Thanks!"}], "answers": [{"comments": [{"owner": {"reputation": 137100, "user_id": 874188, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/ZcY77.png?s=128&g=1", "display_name": "tripleee", "link": "https://stackoverflow.com/users/874188/tripleee"}, "edited": false, "score": 0, "creation_date": 1459415379, "post_id": 29210601, "comment_id": 60280126, "body": "Equivalently, you could probably add a sufficiently old Ubuntu (or, gasp, Debian) package source to Apt, and install the once-standard precompiled binary. Old source can be tricky to build because the toolchain has also changed. (Putting <code>-lm</code> last used to be optional, for example.)"}, {"owner": {"reputation": 5119, "user_id": 3980197, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/40b4b2a37dca408b616a6f5d6548f8c6?s=128&d=identicon&r=PG&f=1", "display_name": "CoderGuy123", "link": "https://stackoverflow.com/users/3980197/coderguy123"}, "edited": false, "score": 0, "creation_date": 1608109820, "post_id": 29210601, "comment_id": 115479516, "body": "Perlbrew also fails to make perl 5.10.1 on newer Ubuntus (18.04)."}], "tags": [], "owner": {"reputation": 383, "user_id": 1345182, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cafcf5c951b6c600bb45b0ea690e24e?s=128&d=identicon&r=PG", "display_name": "user49740", "link": "https://stackoverflow.com/users/1345182/user49740"}, "is_accepted": false, "score": 4, "last_activity_date": 1427114810, "creation_date": 1427114810, "answer_id": 29210601, "question_id": 29208422, "link": "https://stackoverflow.com/questions/29208422/how-to-install-perl-5-10-1-on-ubuntu-14-04/29210601#29210601", "title": "How to Install Perl 5.10.1 on Ubuntu 14.04?", "body": "<p>You could use <a href=\"http://perlbrew.pl/\" rel=\"nofollow\">perlbrew</a>, a program that manages Perl installations.</p>\n\n<ol>\n<li>Install it using <code>apt-get install perlbrew</code> as root</li>\n<li>Initialize it by running <code>perlbrew init</code></li>\n<li>Add <code>source ~/perl5/perlbrew/etc/bashrc</code> to your <code>.bashrc</code> and start a new shell.</li>\n<li>Install perl 5.10 using <code>perlbrew install perl-5.10.1</code></li>\n<li>You can now use <code>perlbrew use</code> to change the Perl for the current shell, or <code>perlbrew switch</code> to change the Perl globally.</li>\n</ol>\n\n<p>If you only need one Perl and want to avoid the complexity of <code>perlbrew</code>, you can try <a href=\"https://metacpan.org/pod/perl-build\" rel=\"nofollow\">perl-build</a>.</p>\n"}, {"comments": [{"owner": {"reputation": 5119, "user_id": 3980197, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/40b4b2a37dca408b616a6f5d6548f8c6?s=128&d=identicon&r=PG&f=1", "display_name": "CoderGuy123", "link": "https://stackoverflow.com/users/3980197/coderguy123"}, "edited": false, "score": 0, "creation_date": 1608110206, "post_id": 43878868, "comment_id": 115479667, "body": "Does not work on Ubuntu 18.04."}], "tags": [], "owner": {"reputation": 2831, "user_id": 453486, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/44d59c6c5a7e3435409ebe94c9aa9db5?s=128&d=identicon&r=PG", "display_name": "Srikanth Jeeva", "link": "https://stackoverflow.com/users/453486/srikanth-jeeva"}, "is_accepted": false, "score": 2, "last_activity_date": 1495038077, "last_edit_date": 1495038077, "creation_date": 1494360012, "answer_id": 43878868, "question_id": 29208422, "link": "https://stackoverflow.com/questions/29208422/how-to-install-perl-5-10-1-on-ubuntu-14-04/43878868#43878868", "title": "How to Install Perl 5.10.1 on Ubuntu 14.04?", "body": "<p>Tried many things and this worked for me finally :) </p>\n\n<p>Step 1: find your lib path which has all <code>libm*</code> files</p>\n\n<p>In most systems it was under <code>/usr/lib64</code>. Search for the same in your machine</p>\n\n<pre><code>system:/usr/lib64$ ls libm*\nlibm.a         libmcheck.a     libmenuw.so.5    libmpc.so.3.0.0    libmpfr.so.4  libmpx.so.0.0.0      libm.so         libmvec.a\nlibmagic.so.1      libmenu.so.5    libmenuw.so.5.9  libmpdec.so.2      libmpfr.so.4.1.4  libmpxwrappers.so.0      libmspack.so.0      libmvec_nonshared.a\nlibmagic.so.1.0.0  libmenu.so.5.9  libmpc.so.3      libmpdec.so.2.4.2  libmpx.so.0   libmpxwrappers.so.0.0.0  libmspack.so.0.1.0  libmvec.so\n</code></pre>\n\n<p>Step 2: Use the path with <code>glibpth</code> option while doing configure</p>\n\n<pre><code>./Configure -des -Dglibpth='/lib/lib64 /usr/lib64'\n</code></pre>\n\n<p>or I see some forums suggested <code>plibpth</code></p>\n\n<pre><code>./Configure -des -Dplibpth='/lib/lib64 /usr/lib64' -Dglibpth='/lib/lib64 /usr/lib64' -Dlibpth='/lib/lib64 /usr/lib64'\n</code></pre>\n"}], "owner": {"reputation": 985, "user_id": 2195499, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/0d3180333388fe82acbed9a395ba9ee5?s=128&d=identicon&r=PG", "display_name": "Yashwanth Aluru", "link": "https://stackoverflow.com/users/2195499/yashwanth-aluru"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 23211, "favorite_count": 2, "answer_count": 2, "score": 2, "last_activity_date": 1495038077, "creation_date": 1427107993, "last_edit_date": 1459405726, "question_id": 29208422, "link": "https://stackoverflow.com/questions/29208422/how-to-install-perl-5-10-1-on-ubuntu-14-04", "title": "How to Install Perl 5.10.1 on Ubuntu 14.04?", "body": "<p>I've to install Perl 5.10.1 on Ubuntu 14.04 as per my requirement. When I download and install the package I get the following errors,</p>\n\n<pre><code>cc -fstack-protector -L/usr/local/lib -o miniperl \\\n          gv.o toke.o perly.o pad.o regcomp.o dump.o util.o mg.o reentr.o mro.o hv.o av.o run.o pp_hot.o sv.o pp.o scope.o pp_ctl.o pp_sys.o doop.o doio.o regexec.o utf8.o taint.o deb.o universal.o xsutils.o globals.o perlio.o perlapi.o numeric.o mathoms.o locale.o pp_pack.o pp_sort.o  \\\n        miniperlmain.o opmini.o perlmini.o \npp.o: In function `Perl_pp_pow':\npp.c:(.text+0x2daf): undefined reference to `pow'\npp.o: In function `Perl_pp_modulo':\npp.c:(.text+0x39ee): undefined reference to `floor'\npp.c:(.text+0x3a21): undefined reference to `floor'\npp.c:(.text+0x3d94): undefined reference to `fmod'\npp.o: In function `Perl_pp_atan2':\npp.c:(.text+0x8a05): undefined reference to `atan2'\npp.o: In function `Perl_pp_sin':\npp.c:(.text+0x8ba2): undefined reference to `sin'\npp.o: In function `Perl_pp_int':\npp.c:(.text+0x9061): undefined reference to `floor'\npp.c:(.text+0x90d1): undefined reference to `ceil'\npp.o:(.rodata+0x120): undefined reference to `cos'\npp.o:(.rodata+0x128): undefined reference to `sin'\npp.o:(.rodata+0x130): undefined reference to `sin'\npp.o:(.rodata+0x138): undefined reference to `exp'\npp.o:(.rodata+0x140): undefined reference to `log'\npp.o:(.rodata+0x148): undefined reference to `sqrt'\npp_pack.o: In function `S_pack_rec':\npp_pack.c:(.text+0x72b3): undefined reference to `floor'\npp_pack.c:(.text+0x72d6): undefined reference to `floor'\npp_pack.c:(.text+0x7303): undefined reference to `floor'\ncollect2: error: ld returned 1 exit status\nmake: *** [miniperl] Error 1\n</code></pre>\n\n<p>I tried including math library <code>&lt;math.h&gt;</code> in the file <strong>pp.c</strong> but of no use. Is there anything more I need to do?</p>\n\n<p>Also please tell me whether there is a tool that converts Perl 5.10.1 Script compatible with Perl 5.18.2 as I get backward compatibility warnings when I compile with 5.18.2.</p>\n"}, {"tags": ["regex", "perl"], "answers": [{"comments": [{"owner": {"reputation": 50117, "user_id": 243943, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/1c2c4840dd73dbea59932f83d4640c56?s=128&d=identicon&r=PG", "display_name": "npinti", "link": "https://stackoverflow.com/users/243943/npinti"}, "reply_to_user": {"reputation": 19, "user_id": 4702563, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-rvTv7iuzxBU/AAAAAAAAAAI/AAAAAAAAABI/cV1xEzaPRUY/photo.jpg?sz=128", "display_name": "fahim fana", "link": "https://stackoverflow.com/users/4702563/fahim-fana"}, "edited": false, "score": 0, "creation_date": 1427106032, "post_id": 29207522, "comment_id": 46625790, "body": "@fahimfana: I am not a perl person, but did you try it like so: <code>scalar(split(&#47;\\ba\\b&#47;, $_));</code> for instance?"}, {"owner": {"reputation": 19, "user_id": 4702563, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-rvTv7iuzxBU/AAAAAAAAAAI/AAAAAAAAABI/cV1xEzaPRUY/photo.jpg?sz=128", "display_name": "fahim fana", "link": "https://stackoverflow.com/users/4702563/fahim-fana"}, "edited": false, "score": 0, "creation_date": 1427106050, "post_id": 29207522, "comment_id": 46625793, "body": "$a += scalar(split(/\\ba\\b/gi, $_));"}, {"owner": {"reputation": 50117, "user_id": 243943, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/1c2c4840dd73dbea59932f83d4640c56?s=128&d=identicon&r=PG", "display_name": "npinti", "link": "https://stackoverflow.com/users/243943/npinti"}, "reply_to_user": {"reputation": 19, "user_id": 4702563, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-rvTv7iuzxBU/AAAAAAAAAAI/AAAAAAAAABI/cV1xEzaPRUY/photo.jpg?sz=128", "display_name": "fahim fana", "link": "https://stackoverflow.com/users/4702563/fahim-fana"}, "edited": false, "score": 0, "creation_date": 1427106156, "post_id": 29207522, "comment_id": 46625839, "body": "@fahimfana: Maybe you need to enable the multi-line option? Please expand <code>getting some wrong</code>."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1427106373, "post_id": 29207522, "comment_id": 46625969, "body": "@npinti: Enabling multi-line applies only to <code>^</code> and <code>$</code>"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1427106612, "post_id": 29207522, "comment_id": 46626106, "body": "The <code>split</code> solution isn&#39;t very nice as it counts the number of strings <i>between</i> the words, and so is one more than the count required unless the word appears at the end of the string."}, {"owner": {"reputation": 50117, "user_id": 243943, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/1c2c4840dd73dbea59932f83d4640c56?s=128&d=identicon&r=PG", "display_name": "npinti", "link": "https://stackoverflow.com/users/243943/npinti"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1427107071, "post_id": 29207522, "comment_id": 46626372, "body": "@Borodin: I agree, if the word is in between other strings, then the result would be <code>count - 1</code>, otherwise, if it is at either edge of the string, this will work."}], "tags": [], "owner": {"reputation": 50117, "user_id": 243943, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/1c2c4840dd73dbea59932f83d4640c56?s=128&d=identicon&r=PG", "display_name": "npinti", "link": "https://stackoverflow.com/users/243943/npinti"}, "is_accepted": false, "score": 1, "last_activity_date": 1427105312, "creation_date": 1427105312, "answer_id": 29207522, "question_id": 29207437, "link": "https://stackoverflow.com/questions/29207437/count-the-articles-in-a-paragraph/29207522#29207522", "title": "Count the articles in a Paragraph", "body": "<p>Try using something like this: <code>\\b(a|an|the)\\b</code> (example <a href=\"https://regex101.com/r/bP0kK4/1\" rel=\"nofollow\">here</a>). This can be broken down as:</p>\n\n<ul>\n<li><code>\\ba\\b</code>   # look for the a article.</li>\n<li><code>\\ban\\b</code>  # look for the an article.</li>\n<li><code>\\bthe\\b</code> # look for the the article.</li>\n</ul>\n\n<p>The problem with your regex is that with the exception of the <code>an</code> regex, you do not check to see if the article is a word within itself. </p>\n\n<p>This first regex should match any <code>a</code> followed by any character, while the third will look for <code>the</code>, regardless of their location. </p>\n\n<p>The <code>\\b</code> will ensure that whatever you match, is either at the beginning of a string or else surrounded by white spaces.</p>\n"}, {"comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1427106296, "post_id": 29207578, "comment_id": 46625922, "body": "Perhaps <code>(?&lt;!\\S)(?:a|an|the)(?!\\S)</code>"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1427110570, "post_id": 29207578, "comment_id": 46628300, "body": "No, <code>\\S</code> matches <i>non-whitespace</i> and <code>b</code> and <code>a</code> aren&#39;t whitespace. However, it won&#39;t match <code>(a</code> or <code>an,</code> or <code>the)</code>, but neither does yours!"}, {"owner": {"reputation": 62965, "user_id": 3679490, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/70f98fb23b16862298ea208aedfd18ae?s=128&d=identicon&r=PG&f=1", "display_name": "vks", "link": "https://stackoverflow.com/users/3679490/vks"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1427110857, "post_id": 29207578, "comment_id": 46628467, "body": "@Borodin aah didnt see the <code>negative</code> assertions.Yeah similar it is"}], "tags": [], "owner": {"reputation": 62965, "user_id": 3679490, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/70f98fb23b16862298ea208aedfd18ae?s=128&d=identicon&r=PG&f=1", "display_name": "vks", "link": "https://stackoverflow.com/users/3679490/vks"}, "is_accepted": false, "score": 0, "last_activity_date": 1427105460, "creation_date": 1427105460, "answer_id": 29207578, "question_id": 29207437, "link": "https://stackoverflow.com/questions/29207437/count-the-articles-in-a-paragraph/29207578#29207578", "title": "Count the articles in a Paragraph", "body": "<pre><code>(?:^|(?&lt;=\\s))(?:a|an|the)(?=\\s|$)\n</code></pre>\n\n<p>You can use this to count the articles.</p>\n"}, {"comments": [{"owner": {"reputation": 50117, "user_id": 243943, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/1c2c4840dd73dbea59932f83d4640c56?s=128&d=identicon&r=PG", "display_name": "npinti", "link": "https://stackoverflow.com/users/243943/npinti"}, "edited": false, "score": 0, "creation_date": 1427107161, "post_id": 29208095, "comment_id": 46626432, "body": "From what I am getting, this <i>actually</i> counts the instances rather than just splitting."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 50117, "user_id": 243943, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/1c2c4840dd73dbea59932f83d4640c56?s=128&d=identicon&r=PG", "display_name": "npinti", "link": "https://stackoverflow.com/users/243943/npinti"}, "edited": false, "score": 0, "creation_date": 1427109389, "post_id": 29208095, "comment_id": 46627661, "body": "Yes, it counts the number of instances of that regex pattern."}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": true, "score": 2, "last_activity_date": 1427106960, "creation_date": 1427106960, "answer_id": 29208095, "question_id": 29207437, "link": "https://stackoverflow.com/questions/29207437/count-the-articles-in-a-paragraph/29208095#29208095", "title": "Count the articles in a Paragraph", "body": "<p>The regex that <code>@npinti</code> suggested will work for you, but you need to use a global pattern match in list context and convert that to a scalar.</p>\n\n<p>Like this</p>\n\n<pre><code>use strict;\nuse warnings;\n\nmy $s = 'I need to count the articles (a , an, the) in a paragraph using perl.';\n\nmy @matches = $s =~ /\\b(a|an|the)\\b/g;\nprint scalar @matches, \"\\n\";\n</code></pre>\n\n<p><strong>output</strong></p>\n\n<pre><code>5\n</code></pre>\n"}], "owner": {"reputation": 19, "user_id": 4702563, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-rvTv7iuzxBU/AAAAAAAAAAI/AAAAAAAAABI/cV1xEzaPRUY/photo.jpg?sz=128", "display_name": "fahim fana", "link": "https://stackoverflow.com/users/4702563/fahim-fana"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 51, "favorite_count": 0, "accepted_answer_id": 29208095, "answer_count": 3, "score": 1, "last_activity_date": 1427106960, "creation_date": 1427105041, "question_id": 29207437, "link": "https://stackoverflow.com/questions/29207437/count-the-articles-in-a-paragraph", "title": "Count the articles in a Paragraph", "body": "<p>I need to count the articles (a , an, the) in a paragraph using perl. I try but it fails</p>\n\n<pre><code>$a += scalar(split(/a./, $_));\n$an += scalar(split(/\\san\\s/, $_));\n$the += scalar(split(/the/, $_));\n</code></pre>\n"}, {"tags": ["perl", "windows-8.1", "strawberry-perl", "activeperl"], "answers": [{"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 2, "last_activity_date": 1427103361, "creation_date": 1427103361, "answer_id": 29206938, "question_id": 29206183, "link": "https://stackoverflow.com/questions/29206183/cannot-run-any-perl-scripts-on-windows-8-1/29206938#29206938", "title": "Cannot run any Perl scripts on Windows 8.1", "body": "<p>That is the error message you get from using an invalid value for the <code>-C</code> command-line option. At a guess I'd say you have the <code>PERL_UNICODE</code> environment variable set to a string that contains a colon <code>:</code>.</p>\n\n<p>Take a look at <a href=\"http://perldoc.perl.org/perlrun.html#Command-Switches\" rel=\"nofollow\"><em>Command Switches</em></a> in <code>perldoc perlrun</code> for more detail on this.</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 4734053, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-qU6ZZ3lvbAU/AAAAAAAAAAI/AAAAAAAAAVM/ScoSUwzMXyE/photo.jpg?sz=128", "display_name": "Liveon Biolabs", "link": "https://stackoverflow.com/users/4734053/liveon-biolabs"}, "is_accepted": false, "score": 0, "last_activity_date": 1427807412, "creation_date": 1427807412, "answer_id": 29369493, "question_id": 29206183, "link": "https://stackoverflow.com/questions/29206183/cannot-run-any-perl-scripts-on-windows-8-1/29369493#29369493", "title": "Cannot run any Perl scripts on Windows 8.1", "body": "<p>I too had this problem on windows 8.1 . The problem is that, once on installation, .pl files are not automatically recognized by Perl engine. So please select a .pl file and right click and say open with and set the default program to C\\perl\\bin\\ inside it click perl.exe and recognize it. Once this is done your perl works flawlessly.</p>\n"}], "owner": {"reputation": 1, "user_id": 4702249, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/39331687cdd678bbb9de5bd11cd0a0c1?s=128&d=identicon&r=PG&f=1", "display_name": "Kevin", "link": "https://stackoverflow.com/users/4702249/kevin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 494, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1427807412, "creation_date": 1427100578, "last_edit_date": 1427101244, "question_id": 29206183, "link": "https://stackoverflow.com/questions/29206183/cannot-run-any-perl-scripts-on-windows-8-1", "title": "Cannot run any Perl scripts on Windows 8.1", "body": "<p>I installed Active Perl 5.20\nand also Strawberry Perl 5.20 after uninstalling Active Perl.</p>\n\n<p>In both cases, when I open cmd and type 'perl' I get:</p>\n\n<blockquote>\n  <p>Unknown Unicode option letter ':'.</p>\n</blockquote>\n\n<p>This error also prevents all scripts from running on my Windows 8.1 installation. </p>\n\n<p>I uninstalled Perl and did a fresh install and it still doesn't work.</p>\n\n<p>Are there dependencies that I need to install? \nI googled the error but the results pertain to Linux installations where the script specified something wrong. But I get this error when I even try to use any perl command line or script. So my problem is not a faulty script. </p>\n"}, {"tags": ["html", "perl", "cgi"], "comments": [{"owner": {"reputation": 73, "user_id": 2941758, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/117a2e50467965716b25e2b5b716fdf2?s=128&d=identicon&r=PG&f=1", "display_name": "Maina Mailu", "link": "https://stackoverflow.com/users/2941758/maina-mailu"}, "edited": false, "score": 0, "creation_date": 1427101209, "post_id": 29206107, "comment_id": 46623328, "body": "In the above case i want the html output toshow the label for the username"}], "answers": [{"comments": [{"owner": {"reputation": 73, "user_id": 2941758, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/117a2e50467965716b25e2b5b716fdf2?s=128&d=identicon&r=PG&f=1", "display_name": "Maina Mailu", "link": "https://stackoverflow.com/users/2941758/maina-mailu"}, "edited": false, "score": 0, "creation_date": 1427103559, "post_id": 29206776, "comment_id": 46624449, "body": "Thankyou for the solution. Thank you also for the headsup on CGI"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 73, "user_id": 2941758, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/117a2e50467965716b25e2b5b716fdf2?s=128&d=identicon&r=PG&f=1", "display_name": "Maina Mailu", "link": "https://stackoverflow.com/users/2941758/maina-mailu"}, "edited": false, "score": 1, "creation_date": 1427104072, "post_id": 29206776, "comment_id": 46624706, "body": "I&#39;m pleased to help. I think it&#39;s important that you avoid CGI if you possibly can, especially as you have only just started learning it. <a href=\"https://metacpan.org/release/Dancer2\" rel=\"nofollow noreferrer\"><code>Dancer2</code></a> with <a href=\"https://metacpan.org/module/Template::Toolkit\" rel=\"nofollow noreferrer\"><code>Template::Toolkit</code></a> is much simpler to write (although it may not seem so because of the vast range of possibilities). You should look at <a href=\"https://metacpan.org/module/CGI::Alternatives\" rel=\"nofollow noreferrer\"><code>CGI::Alternatives</code></a> to get a better idea of what is available."}, {"owner": {"reputation": 73, "user_id": 2941758, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/117a2e50467965716b25e2b5b716fdf2?s=128&d=identicon&r=PG&f=1", "display_name": "Maina Mailu", "link": "https://stackoverflow.com/users/2941758/maina-mailu"}, "edited": false, "score": 0, "creation_date": 1427105478, "post_id": 29206776, "comment_id": 46625506, "body": "The alternatives look quite complicated i must admit"}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": true, "score": 2, "last_activity_date": 1427102799, "creation_date": 1427102799, "answer_id": 29206776, "question_id": 29206107, "link": "https://stackoverflow.com/questions/29206107/why-is-cgi-not-showing-labels-for-input-fields/29206776#29206776", "title": "Why is CGI not showing labels for input fields", "body": "<p>The <a href=\"https://metacpan.org/module/CGI\" rel=\"nofollow\"><code>CGI</code></a> module doesn't support a <code>-label</code> attribute for <code>textfield</code> elements. Instead you have to enclose it in a separate <code>&lt;label&gt;</code> element, like this</p>\n\n<pre><code>print $cgi-&gt;label(\n  'Username :',\n  $cgi-&gt;textfield({\n    -type =&gt; 'text',\n    -size=&gt;30,})\n);\n</code></pre>\n\n<p>But please also note the warning <strong><em>HTML Generation functions should no longer be used</em></strong> in <a href=\"https://metacpan.org/pod/CGI#HTML-Generation-functions-should-no-longer-be-used\" rel=\"nofollow\">the module's own documentation</a>.</p>\n\n<blockquote>\n  <p>All HTML generation functions within CGI.pm are no longer being maintained. Any issues, bugs, or patches will be rejected unless they relate to fundamentally broken page rendering.</p>\n  \n  <p>The rationale for this is that the HTML generation functions of CGI.pm are an obfuscation at best and a maintenance nightmare at worst. You should be using a template engine for better separation of concerns. See <a href=\"https://metacpan.org/module/CGI::Alternatives\" rel=\"nofollow\">CGI::Alternatives</a> for an example of using CGI.pm with the <a href=\"https://metacpan.org/module/Template::Toolkit\" rel=\"nofollow\">Template::Toolkit</a> module.</p>\n</blockquote>\n"}], "owner": {"reputation": 73, "user_id": 2941758, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/117a2e50467965716b25e2b5b716fdf2?s=128&d=identicon&r=PG&f=1", "display_name": "Maina Mailu", "link": "https://stackoverflow.com/users/2941758/maina-mailu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 298, "favorite_count": 0, "accepted_answer_id": 29206776, "answer_count": 1, "score": 0, "last_activity_date": 1427114859, "creation_date": 1427100257, "last_edit_date": 1427114859, "question_id": 29206107, "link": "https://stackoverflow.com/questions/29206107/why-is-cgi-not-showing-labels-for-input-fields", "title": "Why is CGI not showing labels for input fields", "body": "<p>I'm a greenhorn in perl CGI and want to create a CGI form for user input. The problem is that the code is not outputting the field names. </p>\n\n<p>Here is the code :</p>\n\n<pre><code>#!/usr/bin/perl -T\n\nuse strict;\nuse warnings;\nuse diagnostics;\nuse CGI;\nmy $cgi = CGI-&gt;new;\nprint $cgi-&gt;header(),\n$cgi-&gt;start_html(\n    -title =&gt; \"my form\",\n),\n$cgi-&gt;p(scalar localtime),\n\n$cgi-&gt;p(\"welcome to myform\"),\n$cgi-&gt;start_form({\n    -action =&gt;\"\",\n    -method =&gt;\"\",\n});\nprint $cgi-&gt;textfield({\n    -label =&gt; \"Username :\",\n    -type =&gt; 'text',\n    -size=&gt;30,});\n\n$cgi-&gt;end_form(),\n\n$cgi-&gt;end_html();\n</code></pre>\n\n<p>In the above case I want the html output to show the label for the username.</p>\n"}, {"tags": ["perl", "template-toolkit"], "answers": [{"comments": [{"owner": {"reputation": 8942, "user_id": 14750, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/1259cb9901b6d9caf5aeda812927d111?s=128&d=identicon&r=PG", "display_name": "RET", "link": "https://stackoverflow.com/users/14750/ret"}, "edited": false, "score": 0, "creation_date": 1427178819, "post_id": 29204155, "comment_id": 46660113, "body": "And although it is not remotely related to chomping, I like to use [%- -%] because it aligns very nicely with 4-space tab expansion :-)"}], "tags": [], "owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "is_accepted": true, "score": 10, "last_activity_date": 1427109744, "last_edit_date": 1427109744, "creation_date": 1427090926, "answer_id": 29204155, "question_id": 29204088, "link": "https://stackoverflow.com/questions/29204088/what-is-the-difference-between-and-in-template-toolkit/29204155#29204155", "title": "What is the difference between [% %] and [%- -%] in Template Toolkit?", "body": "<p>The <code>-</code> automatically removes some whitespace from before/after the directive tag.</p>\n\n<p>See <a href=\"https://metacpan.org/pod/Template::Manual::Syntax#Chomping-Whitespace\" rel=\"noreferrer\">Template::Manual::Syntax</a>:</p>\n\n<blockquote>\n  <p>You can add <code>-</code> or <code>+</code> to the immediate start or end of a directive tag to control the whitespace chomping options. See the <code>PRE_CHOMP</code> and <code>POST_CHOMP</code> options for further details.</p>\n</blockquote>\n\n<p>See <a href=\"https://metacpan.org/pod/Template::Manual::Config#PRE_CHOMP-POST_CHOMP\" rel=\"noreferrer\">Template::Manual::Config</a> for good examples of the effects with and without pre and post chomping.</p>\n"}], "owner": {"reputation": 83, "user_id": 4666562, "user_type": "registered", "accept_rate": 38, "profile_image": "https://graph.facebook.com/886727228046333/picture?type=large", "display_name": "Gaurav Rathi", "link": "https://stackoverflow.com/users/4666562/gaurav-rathi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 801, "favorite_count": 1, "accepted_answer_id": 29204155, "answer_count": 1, "score": 5, "last_activity_date": 1427109744, "creation_date": 1427090548, "last_edit_date": 1427091733, "question_id": 29204088, "link": "https://stackoverflow.com/questions/29204088/what-is-the-difference-between-and-in-template-toolkit", "title": "What is the difference between [% %] and [%- -%] in Template Toolkit?", "body": "<p>What is the difference between <code>[% %]</code> and <code>[%- -%]</code> in Template Toolkit?</p>\n"}, {"tags": ["perl"], "answers": [{"tags": [], "owner": {"reputation": 23, "user_id": 4506410, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8xJkO.jpg?s=128&g=1", "display_name": "ShaoE", "link": "https://stackoverflow.com/users/4506410/shaoe"}, "is_accepted": false, "score": 0, "last_activity_date": 1427104055, "last_edit_date": 1495541186, "creation_date": 1427104055, "answer_id": 29207137, "question_id": 29203840, "link": "https://stackoverflow.com/questions/29203840/perl-script-to-parse-log-files-from-different-test-locations-which-takes-dynamic/29207137#29207137", "title": "perl script to parse log files from different test locations.which takes dynamic path of testcases", "body": "<p>My suggestion would be:</p>\n\n<pre><code>my $path = \"results/testcases\";\nopendir(TEMPDIR,$path) or die \"err1\";\n\nmy @dir = grep -d, readdir TEMPDIR; \n\nforeach(@dir)\n{\n    if( $_ !~ /\\./ )\n    {\n    open( my $fileHandle , \"results/testcases/\".$_.\"/test.log\" ) or die \"err2\";\n    # parsing log file\n    close $fileHandle or die \"err2-2\";\n    }\n}\n\nclose TEMPDIR or die \"err1-2\";\n</code></pre>\n\n<p>First, you need to read the folder \"results/testcases\" for current correct folder names. Second, you need to open the files one by one, stead of putting @array in the middle of the path. Third, you should read basic perl, otherwise you won't be able to parse in a proper manner. Fourth, you really should read through <a href=\"https://stackoverflow.com/questions/ask/advice?\">HOW TO ASK</a>, you should put in your code so that we could be more helpful and your questions shall help others, as well.</p>\n"}, {"tags": [], "owner": {"reputation": 7450, "user_id": 657700, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cb044bd9a9f6548b9a9bae44617c97c7?s=128&d=identicon&r=PG", "display_name": "fjardon", "link": "https://stackoverflow.com/users/657700/fjardon"}, "is_accepted": false, "score": 0, "last_activity_date": 1427105345, "creation_date": 1427105345, "answer_id": 29207543, "question_id": 29203840, "link": "https://stackoverflow.com/questions/29203840/perl-script-to-parse-log-files-from-different-test-locations-which-takes-dynamic/29207543#29207543", "title": "perl script to parse log files from different test locations.which takes dynamic path of testcases", "body": "<p>If your test folders relative paths are stored in <code>@array</code>. You can do the following:</p>\n\n<pre><code>my @testlogs = grep { -e $_ } map { \"results/testcases/\".$_.\"/test.log\" } @array;\n</code></pre>\n\n<p>The new array <code>@testlogs</code> now contains the list of paths to existing 'test.log' files.</p>\n\n<p>Then, you can parse each file like this:</p>\n\n<pre><code>map { ... parsing call ... } @testlogs;\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 4701670, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/88b61ecf2c9097123300251b112f1034?s=128&d=identicon&r=PG&f=1", "display_name": "gouse", "link": "https://stackoverflow.com/users/4701670/gouse"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 44, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1427108310, "creation_date": 1427088841, "last_edit_date": 1427108310, "question_id": 29203840, "link": "https://stackoverflow.com/questions/29203840/perl-script-to-parse-log-files-from-different-test-locations-which-takes-dynamic", "title": "perl script to parse log files from different test locations.which takes dynamic path of testcases", "body": "<p>I want a perl script that will go in to every test folder and parse the log file in it. </p>\n\n<p>Eg:</p>\n\n<pre><code>results/testcases/ **?** /test.log\n</code></pre>\n\n<p>The above path must be dynamically changing with different test folder names in the place of <code>**?**</code> mark. </p>\n\n<p>I am using this <code>results/testcases/@array/test.log</code></p>\n\n<p><code>@array</code> has test names            </p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 61610, "user_id": 725418, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/82ac2dc3e1ad4b7187f245c416528df9?s=128&d=identicon&r=PG", "display_name": "TLP", "link": "https://stackoverflow.com/users/725418/tlp"}, "edited": false, "score": 0, "creation_date": 1427082621, "post_id": 29202402, "comment_id": 46617662, "body": "Perhaps you forgot semi-colon after <code>my $sth;</code>?"}, {"owner": {"reputation": 61610, "user_id": 725418, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/82ac2dc3e1ad4b7187f245c416528df9?s=128&d=identicon&r=PG", "display_name": "TLP", "link": "https://stackoverflow.com/users/725418/tlp"}, "edited": false, "score": 2, "creation_date": 1427082708, "post_id": 29202402, "comment_id": 46617678, "body": "To be clear, the solution to your problem is to declare <code>my $sth</code>. Since it did not help, you did something wrong. You are not showing the code that went wrong, so we cannot help you."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1427083587, "post_id": 29202402, "comment_id": 46617852, "body": "The code you posted does not produce the error you claim it does."}, {"owner": {"reputation": 141, "user_id": 4097244, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f178b6040f6d39295fefaf21edf0c448?s=128&d=identicon&r=PG&f=1", "display_name": "BrianB", "link": "https://stackoverflow.com/users/4097244/brianb"}, "edited": false, "score": 0, "creation_date": 1427084198, "post_id": 29202402, "comment_id": 46617970, "body": "Sorry when I was removing comment I accidentally removed one line of syntax.  I updated the code above.  NOTE: the variable inter1 is actually generated by a calculation which produces the value &quot;24&quot; with &quot;i&quot; joined to it."}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 2, "creation_date": 1427089990, "post_id": 29202402, "comment_id": 46619294, "body": "Leaving aside the syntax error, some issues with your code: 1) You create a statement handle but never execute it, so your second SQL statement is never actually run. 2) You try to set a MySQL session variable <code>@sumadd5</code>, but don&#39;t do anything with it. Since it&#39;s a session variable, it will cease to exist as soon as you call <code>$dbh-&gt;disconnect();</code>. 3) You call <code>$sth-&gt;finish();</code> explicitly. You should almost never call <code>finish</code> directly, and it serves no purpose here. What are you trying to do by calling it?"}], "answers": [{"comments": [{"owner": {"reputation": 28131, "user_id": 1956010, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/bfdcb4596e9da98cccbf9a0069fdff6c?s=128&d=identicon&r=PG", "display_name": "nwellnhof", "link": "https://stackoverflow.com/users/1956010/nwellnhof"}, "edited": false, "score": 0, "creation_date": 1427113494, "post_id": 29203938, "comment_id": 46630061, "body": "I didn&#39;t downvote but the reason was probably that you only fixed syntax errors without any explanation."}, {"owner": {"reputation": 28131, "user_id": 1956010, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/bfdcb4596e9da98cccbf9a0069fdff6c?s=128&d=identicon&r=PG", "display_name": "nwellnhof", "link": "https://stackoverflow.com/users/1956010/nwellnhof"}, "edited": false, "score": 0, "creation_date": 1427113742, "post_id": 29203938, "comment_id": 46630208, "body": "In a good answer, you should also explain why there were syntax errors, what lines you changed and how the fixes work."}, {"owner": {"reputation": 141, "user_id": 4097244, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f178b6040f6d39295fefaf21edf0c448?s=128&d=identicon&r=PG&f=1", "display_name": "BrianB", "link": "https://stackoverflow.com/users/4097244/brianb"}, "edited": false, "score": 0, "creation_date": 1427134661, "post_id": 29203938, "comment_id": 46643928, "body": "Thanks serenesat.  I have a question. I have a query that uses the result of the @sumadd5 variable [  dbh-&gt;do(&quot;UPDATE day5 SET sumadd= (SELECT \\@sumadd5) WHERE time= &#39;03:00:&#39;) &quot;);  ] , do I have to include it int the $sth routine in order for it to pick up the variable result?"}, {"owner": {"reputation": 4514, "user_id": 4248931, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HijcJ.png?s=128&g=1", "display_name": "serenesat", "link": "https://stackoverflow.com/users/4248931/serenesat"}, "reply_to_user": {"reputation": 141, "user_id": 4097244, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f178b6040f6d39295fefaf21edf0c448?s=128&d=identicon&r=PG&f=1", "display_name": "BrianB", "link": "https://stackoverflow.com/users/4097244/brianb"}, "edited": false, "score": 0, "creation_date": 1427178487, "post_id": 29203938, "comment_id": 46659998, "body": "@BrianB : if it helped you. accept this as an answer so it can be closed as solved. And for any other/further problem you can post a new question."}], "tags": [], "owner": {"reputation": 4514, "user_id": 4248931, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HijcJ.png?s=128&g=1", "display_name": "serenesat", "link": "https://stackoverflow.com/users/4248931/serenesat"}, "is_accepted": false, "score": -2, "last_activity_date": 1427114176, "last_edit_date": 1427114176, "creation_date": 1427089494, "answer_id": 29203938, "question_id": 29202402, "link": "https://stackoverflow.com/questions/29202402/how-do-i-use-placeholders-in-perl-to-inject-a-variable-into-mysql/29203938#29203938", "title": "How do I use Placeholders in Perl to Inject a Variable into Mysql", "body": "<p>You didn't quoted the vaule of <code>$inter1</code>. Change <code>$inter1 = i24;</code> to <code>$inter1 = 'i24';</code>. Just edited in your code, this will not give you syntax error.</p>\n\n<pre><code>use warnings;\nuse strict;\n\nuse DBI;\nmy $driver = \"mysql\";\nmy $database = \"database\";\nmy $user = \"exxxxxx\";\nmy $password = \"xxxxx\";\nmy $dsn = \"DBI:mysql:$database;mysql_local_infile=ON\";\n\nmy $dbh = DBI-&gt;connect($dsn,$user,$password);\n\n$dbh-&gt;do(\"SET \\@tempc5 = (SELECT temp FROM day5 WHERE time = '00:00') \");\n\nmy $inter1 = 'i24';\n\nmy $sth = $dbh-&gt;prepare( \"SET \\@sumadd5 = (SELECT ? FROM humid WHERE temp=\\@tempc5) \" );\n$sth-&gt;bind_param( 1, $inter1 );\n$sth-&gt;finish();\n$dbh-&gt;disconnect();\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 25491, "user_id": 49197, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/15ebf24a33a29b9efbf9924f530dd736?s=128&d=identicon&r=PG", "display_name": "Hynek -Pichi- Vychodil", "link": "https://stackoverflow.com/users/49197/hynek-pichi-vychodil"}, "is_accepted": false, "score": 1, "last_activity_date": 1427122533, "last_edit_date": 1427122533, "creation_date": 1427122155, "answer_id": 29213272, "question_id": 29202402, "link": "https://stackoverflow.com/questions/29202402/how-do-i-use-placeholders-in-perl-to-inject-a-variable-into-mysql/29213272#29213272", "title": "How do I use Placeholders in Perl to Inject a Variable into Mysql", "body": "<p>The placeholders are not allowed for column names according to MySQL Manual for <a href=\"http://dev.mysql.com/doc/refman/5.7/en/mysql-stmt-prepare.html\" rel=\"nofollow\"><code>mysql_stmt_prepare()</code></a> which is the function behind <code>prepare</code>.</p>\n\n<blockquote>\n  <p>The markers are legal only in certain places in SQL statements. For\n  example, they are permitted in the VALUES() list of an INSERT\n  statement (to specify column values for a row), or in a comparison\n  with a column in a WHERE clause to specify a comparison value.\n  However, they are not permitted for identifiers (such as table or\n  column names), or to specify both operands of a binary operator such\n  as the = equal sign. The latter restriction is necessary because it\n  would be impossible to determine the parameter type. In general,\n  parameters are legal only in Data Manipulation Language (DML)\n  statements, and not in Data Definition Language (DDL) statements.</p>\n</blockquote>\n\n<p>If you think about it, it would not make sense to prepare a statement where you can change a column. Preparation of statement includes execution plan, but you can't plan execution of a statement where you don't know if given column has or doesn't have an index on it.</p>\n"}, {"tags": [], "owner": {"reputation": 42833, "user_id": 18914, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7a20a39ae2ef47ae042a3eddd5b5bd19?s=128&d=identicon&r=PG", "display_name": "Dave Sherohman", "link": "https://stackoverflow.com/users/18914/dave-sherohman"}, "is_accepted": false, "score": 1, "last_activity_date": 1427123434, "last_edit_date": 1427123434, "creation_date": 1427122327, "answer_id": 29213333, "question_id": 29202402, "link": "https://stackoverflow.com/questions/29202402/how-do-i-use-placeholders-in-perl-to-inject-a-variable-into-mysql/29213333#29213333", "title": "How do I use Placeholders in Perl to Inject a Variable into Mysql", "body": "<p>You can't use a placeholder there.</p>\n\n<p>When you call <code>prepare</code>, all structural information about your tables is baked into the query, waiting for you to pass in data values to replace placeholders when you <code>execute</code> the query.</p>\n\n<p>But you're trying to use a placeholder for a column name, which is part of the table's structure.</p>\n\n<p>If you fix the Perl syntax to be:</p>\n\n<pre><code>my $inter1 = 'i24';\nmy $sth = $dbh-&gt;prepare( \"SET \\@sumadd5 = (SELECT ? FROM humid WHERE temp=\\@tempc5) \" );\n$sth-&gt;execute($inter1);\n</code></pre>\n\n<p>it should run, but the <code>?</code> will be treated as a <em>data value</em> rather than a column name (structural information).  So you'll get the results of the SQL query</p>\n\n<pre><code>SET @sumadd5 = (SELECT 'i24' FROM humid WHERE temp=@tempc5)\n</code></pre>\n\n<p>instead of</p>\n\n<pre><code>SET @sumadd5 = (SELECT i24 FROM humid WHERE temp=@tempc5)\n</code></pre>\n\n<p>The subquery will return the literal value \"i24\" for each matching row rather than the value found in column <code>i24</code>.</p>\n"}], "owner": {"reputation": 141, "user_id": 4097244, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f178b6040f6d39295fefaf21edf0c448?s=128&d=identicon&r=PG&f=1", "display_name": "BrianB", "link": "https://stackoverflow.com/users/4097244/brianb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 367, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1427123434, "creation_date": 1427077414, "last_edit_date": 1427114849, "question_id": 29202402, "link": "https://stackoverflow.com/questions/29202402/how-do-i-use-placeholders-in-perl-to-inject-a-variable-into-mysql", "title": "How do I use Placeholders in Perl to Inject a Variable into Mysql", "body": "<p>I keep getting errors when attempting to use placeholders in my perl script for a Mysql routine.</p>\n\n<p>Code :</p>\n\n<pre><code>use DBI;\nmy $driver = \"mysql\";\nmy $database = \"database\";\nmy $user = \"exxxxxx\";\nmy $password = \"xxxxx\";\nmy $dsn = \"DBI:mysql:$database;mysql_local_infile=ON\";\n\nmy $dbh = DBI-&gt;connect($dsn,$user,$password);\n\n$dbh-&gt;do(\"SET \\@tempc5 = (SELECT temp FROM day5 WHERE time = '00:00') \");\n\nmy $inter1 = i24;\n\n$sth = $dbh-&gt;prepare( \"SET \\@sumadd5 = (SELECT ? FROM humid WHERE temp=\\@tempc5) \" );\n$sth-&gt;bind_param( 1, $inter1 );\n$sth-&gt;finish();\n$dbh-&gt;disconnect();\n</code></pre>\n\n<p>This produces the following error:</p>\n\n<pre><code>Global symbol \"$sth\" requires explicit...\n</code></pre>\n\n<p>If I add a <code>my $sth</code> I get the following error:</p>\n\n<pre><code>Scalar found where operator expected...\n</code></pre>\n\n<p>Note that I am have no objection in trying this with <code>$dbh-&gt;do(\"SET\"</code>\nif possible.</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 61610, "user_id": 725418, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/82ac2dc3e1ad4b7187f245c416528df9?s=128&d=identicon&r=PG", "display_name": "TLP", "link": "https://stackoverflow.com/users/725418/tlp"}, "edited": false, "score": 2, "creation_date": 1427076327, "post_id": 29201995, "comment_id": 46616401, "body": "Is there any reason you need to have all the files open at the same time?"}], "answers": [{"comments": [{"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1427105752, "post_id": 29202311, "comment_id": 46625649, "body": "Why are you using an array of file handles here, when a hash is a much more appropriate data structure?"}], "tags": [], "owner": {"reputation": 1632, "user_id": 1072222, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/e25a242e4a1ca113d0fad40e1ba611d6?s=128&d=identicon&r=PG", "display_name": "cur4so", "link": "https://stackoverflow.com/users/1072222/cur4so"}, "is_accepted": false, "score": 0, "last_activity_date": 1427077573, "last_edit_date": 1427077573, "creation_date": 1427076743, "answer_id": 29202311, "question_id": 29201995, "link": "https://stackoverflow.com/questions/29201995/perl-declare-a-scalar-variable-using-a-text-string-from-another-scalar-variable/29202311#29202311", "title": "Perl: Declare a scalar variable using a text string from another scalar variable", "body": "<pre><code>my @files=();\nmy @fhs=();\nmy $i=0;\nforeach my $year (@year_range)\n{\n    local *FH;\n    $files[$i] = \"assets/\".$year.\"/file.csv\";\n    open FH, \"&lt;\", $files[$i] or die \"$files[$i]: $!\";\n    push(@fhs, *FH);\n    $i++; \n}\n</code></pre>\n\n<p>Eventually you need just one list (fh), if you don't use names of the files.  </p>\n"}, {"comments": [{"owner": {"reputation": 528, "user_id": 4633594, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c0434c35da2426a4db31dc57566f2698?s=128&d=identicon&r=PG", "display_name": "jkwill87", "link": "https://stackoverflow.com/users/4633594/jkwill87"}, "edited": false, "score": 1, "creation_date": 1474894567, "post_id": 29202318, "comment_id": 66705002, "body": "Looking back, no, probably not. When I posted this I had just started out programming and approached the problem naively. Thank you for your answer though!"}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": true, "score": 4, "last_activity_date": 1427076821, "creation_date": 1427076821, "answer_id": 29202318, "question_id": 29201995, "link": "https://stackoverflow.com/questions/29201995/perl-declare-a-scalar-variable-using-a-text-string-from-another-scalar-variable/29202318#29202318", "title": "Perl: Declare a scalar variable using a text string from another scalar variable", "body": "<p>You can use a hash to hold your file handles, like this</p>\n\n<pre><code>my %fh;\n\nfor my $year ( @year_range ) {\n    my $dir = \"assets/$year\";\n    mkdir $dir\n    open $fh{$year}, '&gt;', \"$dir/file.csv\" or die $!;\n}\n</code></pre>\n\n<p>But, as TLP says, is there a reason why you need all of the files open simultaneously?</p>\n"}, {"tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": false, "score": 1, "last_activity_date": 1427115292, "last_edit_date": 1427115292, "creation_date": 1427106112, "answer_id": 29207792, "question_id": 29201995, "link": "https://stackoverflow.com/questions/29201995/perl-declare-a-scalar-variable-using-a-text-string-from-another-scalar-variable/29207792#29207792", "title": "Perl: Declare a scalar variable using a text string from another scalar variable", "body": "<p>I will take a bit of a tangent as you already have some answers. What you are trying to do here is called a symbolic reference. </p>\n\n<p>It won't work if you turn on <code>strict</code> for a simple reason - it's a bad idea and it's unnecessary. </p>\n\n<p>You see, by allowing dynamic variable names like that, you introduce the possibility of tampering with key variables elsewhere in your program accidentally. This is a great way of making bugs which are amazingly difficult to troubleshoot and track down. </p>\n\n<p>More importantly - it's not necessary, because you can use hashes - as Borodin points out in his solution. A hash is a portable namespace - it allows you to do 'key-value' type relationships in a way that <em>isn't</em> going to trash somewhere else in your program. </p>\n\n<p>At a simplistic level:</p>\n\n<pre><code>my %filehandles;\n\nopen ( $filehandles{$year}, \"&lt;\", \"file_to_read ) or die;\n</code></pre>\n\n<p>And you can access the 'years' in the hash with:</p>\n\n<pre><code>keys %filehandles;\n</code></pre>\n\n<p>Or the handles with:</p>\n\n<pre><code>values %filehandles; \n</code></pre>\n\n<p>For a little more context, take a look here:\n<a href=\"http://perl.plover.com/varvarname.html\" rel=\"nofollow\">http://perl.plover.com/varvarname.html</a></p>\n"}], "owner": {"reputation": 528, "user_id": 4633594, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c0434c35da2426a4db31dc57566f2698?s=128&d=identicon&r=PG", "display_name": "jkwill87", "link": "https://stackoverflow.com/users/4633594/jkwill87"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 393, "favorite_count": 0, "accepted_answer_id": 29202318, "answer_count": 3, "score": 0, "last_activity_date": 1427158110, "creation_date": 1427074026, "last_edit_date": 1427158110, "question_id": 29201995, "link": "https://stackoverflow.com/questions/29201995/perl-declare-a-scalar-variable-using-a-text-string-from-another-scalar-variable", "title": "Perl: Declare a scalar variable using a text string from another scalar variable", "body": "<p>I'm really new to Perl and I'm having a hard time figuring out how to declare a scalar variable using a text string from another scalar variable.</p>\n\n<p>I have an array which has contains a range of years, based on input provided by the user. I need to open files contained in directories which correspond to those years. So for instance, if the user entered the year range 1990-1999, I will need to open and assign a file handle for the years 1990, 1991, ..., 1998.</p>\n\n<p>I imagined using something like the following, replacing <code>[year]</code> with <code>$_</code>:</p>\n\n<pre><code>foreach (@year_range)\n{\n    my $[year]_file = \"assets/[year]/file.csv\";\n    open my $[year]_handle, \"&lt;\", $[year]_file or die \"$[year]_file: $!\";\n}\n\n[do stuff]\n[close files using the reverse of above]\n</code></pre>\n\n<p>Unfortunately, thats not working out too well. Is there anyway that I could make the above work, or is there some other way to open files and assign file handles when their name's are unknown before runtime?</p>\n\n<p>Thanks!</p>\n\n<hr>\n\n<p><strong>Update:</strong></p>\n\n<p>Thank you everyone for your feedback, I would give you upvotes if my rep was high enough.</p>\n\n<p>I had a feeling that opening so many files at a time was probably not the best idea so what I ended up doing was opening the files in a loop, pulling what I the information that I needed, closing the files, and repeating as necessary, reusing the same handle.</p>\n\n<p>After only really programming in C, it took me a while to get my head around Perl's scalars and arrays-- I didn't even know that hashes where a thing, but I'm finding them pretty useful, thanks for the tip Sobrique.</p>\n"}, {"tags": ["python", "perl", "parallel-processing"], "comments": [{"owner": {"reputation": 7570, "user_id": 17945, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/e8cbc0b9ed29b027a127d8df309af5a6?s=128&d=identicon&r=PG", "display_name": "reinierpost", "link": "https://stackoverflow.com/users/17945/reinierpost"}, "edited": false, "score": 0, "creation_date": 1427105885, "post_id": 29201991, "comment_id": 46625704, "body": "Why not do this in Python? That way you can save the <code>fork()</code>ing of the Python processes."}, {"owner": {"reputation": 613, "user_id": 4569096, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/6395ed53ff64900635bdd7c3d50bd256?s=128&d=identicon&r=PG&f=1", "display_name": "jksnw", "link": "https://stackoverflow.com/users/4569096/jksnw"}, "reply_to_user": {"reputation": 7570, "user_id": 17945, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/e8cbc0b9ed29b027a127d8df309af5a6?s=128&d=identicon&r=PG", "display_name": "reinierpost", "link": "https://stackoverflow.com/users/17945/reinierpost"}, "edited": false, "score": 0, "creation_date": 1427116698, "post_id": 29201991, "comment_id": 46632098, "body": "I&#39;d rather it be in perl, My code actually has more to it, this is a simplified example, after running the python code a few times a few perl scripts are ran in the same way."}], "answers": [{"tags": [], "owner": {"reputation": 23, "user_id": 4506410, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8xJkO.jpg?s=128&g=1", "display_name": "ShaoE", "link": "https://stackoverflow.com/users/4506410/shaoe"}, "is_accepted": false, "score": 0, "last_activity_date": 1427104883, "creation_date": 1427104883, "answer_id": 29207390, "question_id": 29201991, "link": "https://stackoverflow.com/questions/29201991/how-do-i-run-numerous-python-programs-with-perl-in-parallel/29207390#29207390", "title": "How do I run numerous Python programs with Perl in parallel?", "body": "<p>python itself have multithread management. Perl invoking python code would be unnecessary, although perl have multithread modules as well. You can refer to <a href=\"https://docs.python.org/2/library/multiprocessing.html\" rel=\"nofollow\">multiprocessing</a> for more details. </p>\n"}], "owner": {"reputation": 613, "user_id": 4569096, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/6395ed53ff64900635bdd7c3d50bd256?s=128&d=identicon&r=PG&f=1", "display_name": "jksnw", "link": "https://stackoverflow.com/users/4569096/jksnw"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 82, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1427105186, "creation_date": 1427073993, "last_edit_date": 1427105186, "question_id": 29201991, "link": "https://stackoverflow.com/questions/29201991/how-do-i-run-numerous-python-programs-with-perl-in-parallel", "title": "How do I run numerous Python programs with Perl in parallel?", "body": "<p>At the moment I have a Perl script that runs a python program a number of times, it takes a while as each program is run sequentially, is there a way to run the python programs simultaneously?</p>\n\n<p>Here is the code</p>\n\n<pre><code>use Cwd;\n$curdir=getcwd;\nchdir(\"../python\");\n\nfor (my $i = 0; $i &lt; 1000; $i++) {\n    $cmd=\"python myCode.py\";\n    system($cmd);\n}\n\nchdir($curdir);\n</code></pre>\n\n<p>The python code takes about 10 seconds to run, and this way the programs run one after the other, it takes a while and I'd like to run them in parallel.</p>\n\n<p>Is this possible and how? </p>\n\n<p>Separately, if it is possible, would it also be possible to limit how many can run at once? I was thinking up to 4 since I have 2 cores with hyper-threading however the python code usually takes about 19% of a CPU so maybe up to 20 at once. </p>\n"}, {"tags": ["javascript", "xml", "perl", "upload", "xmlhttprequest"], "answers": [{"tags": [], "owner": {"reputation": 28131, "user_id": 1956010, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/bfdcb4596e9da98cccbf9a0069fdff6c?s=128&d=identicon&r=PG", "display_name": "nwellnhof", "link": "https://stackoverflow.com/users/1956010/nwellnhof"}, "is_accepted": false, "score": 2, "last_activity_date": 1427114633, "creation_date": 1427114633, "answer_id": 29210543, "question_id": 29198368, "link": "https://stackoverflow.com/questions/29198368/how-to-upload-an-xml-object-and-save-it-with-perl-on-the-server/29210543#29210543", "title": "How to upload an XML object and save it with Perl on the server?", "body": "<p><code>contentToWrite</code> seems to contain an <code>XMLDocument</code> object. The <a href=\"https://developer.mozilla.org/en-US/docs/Web/API/Blob/Blob\" rel=\"nofollow\"><code>Blob</code> constructor</a> accepts an <code>Array</code> of <code>ArrayBuffer</code>, <code>ArrayBufferView</code>, <code>Blob</code>, <code>DOMString</code> objects. So you must <a href=\"https://developer.mozilla.org/en-US/docs/Web/Guide/Parsing_and_serializing_XML#Part_2.3A_how_to_serialize_the_content_of_a_given_XML_document\" rel=\"nofollow\">serialize the XML document</a> first:</p>\n\n<pre><code>var serializer = new XMLSerializer();\nvar xmlString  = serializer.serializeToString(contentToWrite);\nvar blob       = new Blob([ xmlString ], { type: \"text/xml\"});\n</code></pre>\n"}], "owner": {"reputation": 549, "user_id": 4550791, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/4e38547e36828fd52700c376681af252?s=128&d=identicon&r=PG&f=1", "display_name": "John", "link": "https://stackoverflow.com/users/4550791/john"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 237, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1427114633, "creation_date": 1427049956, "last_edit_date": 1427051296, "question_id": 29198368, "link": "https://stackoverflow.com/questions/29198368/how-to-upload-an-xml-object-and-save-it-with-perl-on-the-server", "title": "How to upload an XML object and save it with Perl on the server?", "body": "<p>I have tried various versions now, but I simply seem to miss something.\nFunnily I haven't found an example for this so far.\nOnly thing seems to be uploaded by my Javascript is <code>[object XMLDocument]</code>.\n(I try to save the XML-Document in the receiving perl-script, and that's the string that the perl script writes to the outputfile.)</p>\n\n<p>For the JavaScript part I looked at <a href=\"https://developer.mozilla.org/en-US/docs/Web/Guide/Using_FormData_Objects\" rel=\"nofollow\">Mozilla's <em>Using FormData Objects</em></a>.</p>\n\n<p>And then came up with:</p>\n\n<pre><code>function httpPerlUploadBigData(fuPerlTarget, contentToWrite, fuCallMeOnLoad) {\n\n  var formData = new FormData();\n  var blob = new Blob([contentToWrite], { type: \"text/xml\"});\n\n  formData.append('file', blob, \"filename.txt\");\n  formData.append('bigcontent', contentToWrite);\n  formData.append('saveOnServerAs', 'temp.xml');\n\n  var MyThis = this;\n  this.perlTarget = fuPerlTarget;\n  this.callMeOnLoad = fuCallMeOnLoad;\n\n  var oReq = new XMLHttpRequest();\n  oReq.open(\"POST\", MyThis.perlTarget, true);\n  oReq.onload = function(e) {\n    MyThis.callMeOnLoad( e.target.response );\n  };\n\n  oReq.send(formData);\n}\n</code></pre>\n\n<p>I send <code>contentToWrite</code> twice because I would like to upload it in a way that the script sees as an uploaded file. The other code I tried before uploaded it as plain text, but because this is XML I guess an upload as sort of file would be better.</p>\n"}, {"tags": ["mysql", "perl", "database-migration", "dbix-class"], "comments": [{"owner": {"reputation": 1537, "user_id": 1248009, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/911aa8c8d83d7f53d1650fa7c585dd92?s=128&d=identicon&r=PG", "display_name": "a7omiton", "link": "https://stackoverflow.com/users/1248009/a7omiton"}, "edited": false, "score": 0, "creation_date": 1427050020, "post_id": 29197968, "comment_id": 46609246, "body": "I also wanted to ask; is using the <code>dbic-migration</code> command the same as using <code>DBIx::Class::DeploymentHandler</code> within a script that will upgrade/downgrade/install/populate the database?"}], "answers": [{"comments": [{"owner": {"reputation": 1537, "user_id": 1248009, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/911aa8c8d83d7f53d1650fa7c585dd92?s=128&d=identicon&r=PG", "display_name": "a7omiton", "link": "https://stackoverflow.com/users/1248009/a7omiton"}, "edited": false, "score": 0, "creation_date": 1427052772, "post_id": 29198856, "comment_id": 46610186, "body": "Thanks for the reply, i&#39;ve tried <code>dbic-migration -I lib&#47; -I local&#47;lib&#47;perl5&#47; --S Database::Main --target_dir share&#47; install --database MySQL</code> but that still seems to be looking for the SQLite directory. Do you think it would be a good idea to instead make scripts to upgrade/downgrade/install the database?"}, {"owner": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "reply_to_user": {"reputation": 1537, "user_id": 1248009, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/911aa8c8d83d7f53d1650fa7c585dd92?s=128&d=identicon&r=PG", "display_name": "a7omiton", "link": "https://stackoverflow.com/users/1248009/a7omiton"}, "edited": false, "score": 0, "creation_date": 1427054347, "post_id": 29198856, "comment_id": 46610684, "body": "@a7omiton I would try putting everything but the -I options after the command.  <code>dbic-migration -I lib&#47; -I local&#47;lib&#47;perl5&#47; prepare ...all the options...</code> and <code>dbic-migration  -I lib&#47; -I local&#47;lib&#47;perl5&#47; install ..all the options..</code>."}, {"owner": {"reputation": 1537, "user_id": 1248009, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/911aa8c8d83d7f53d1650fa7c585dd92?s=128&d=identicon&r=PG", "display_name": "a7omiton", "link": "https://stackoverflow.com/users/1248009/a7omiton"}, "edited": false, "score": 0, "creation_date": 1427055927, "post_id": 29198856, "comment_id": 46611220, "body": "I&#39;m getting ahead with using scripts to install and upgrade schema, just a matter of how to make sure i don&#39;t mess with the data already existing i.e. not delete everything! ;)"}], "tags": [], "owner": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "is_accepted": false, "score": 0, "last_activity_date": 1427052488, "creation_date": 1427052488, "answer_id": 29198856, "question_id": 29197968, "link": "https://stackoverflow.com/questions/29197968/dbix-migration-not-recognising-mysql/29198856#29198856", "title": "DBIx Migration not recognising MySQL", "body": "<p><a href=\"https://metacpan.org/pod/distribution/DBIx-Class-Migration/lib/DBIx/Class/Migration/Script/Help/prepare.pod\" rel=\"nofollow\">Reading the docs</a>, my suspicion is dbic-migration is using this pattern...</p>\n\n<pre><code>dbic-migration &lt;generic options&gt; &lt;command&gt; &lt;options for that command&gt;\n</code></pre>\n\n<p><a href=\"https://metacpan.org/pod/DBIx::Class::Migration::Tutorial::FirstMigration#Using-the-dbic-migration-commandline-tool\" rel=\"nofollow\">The docs back this up</a>...</p>\n\n<blockquote>\n  <p>dbic-migration is your main gateway to managing your migrations. When using the tool you will give it one command (such as version above) and any number of option flags (starting with -- or -).</p>\n</blockquote>\n\n<p>If you say...</p>\n\n<pre><code>dbic-migration --database MySQL prepare\n</code></pre>\n\n<p><code>--database MySQL</code> will be ignored because it's not a known general option for dbic-migration.</p>\n\n<p>You must say...</p>\n\n<pre><code>dbic-migration prepare --database MySQL\n</code></pre>\n\n<p>In which <code>--database MySQL</code> is understood to be an option of the prepare command.</p>\n\n<p>It is unfortunate that it does not warn you about options it does not understand.</p>\n"}], "owner": {"reputation": 1537, "user_id": 1248009, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/911aa8c8d83d7f53d1650fa7c585dd92?s=128&d=identicon&r=PG", "display_name": "a7omiton", "link": "https://stackoverflow.com/users/1248009/a7omiton"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 150, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1431494354, "creation_date": 1427047720, "last_edit_date": 1431494354, "question_id": 29197968, "link": "https://stackoverflow.com/questions/29197968/dbix-migration-not-recognising-mysql", "title": "DBIx Migration not recognising MySQL", "body": "<p>I'm trying to follow along this tutorial using MySQL:\n<a href=\"https://metacpan.org/pod/DBIx::Class::Migration::Tutorial::FirstMigration\" rel=\"nofollow\">https://metacpan.org/pod/DBIx::Class::Migration::Tutorial::FirstMigration</a></p>\n\n<p>I'm running the commands it states with the additional option <code>--database MySQL</code>.</p>\n\n<p>Example:</p>\n\n<p><code>dbic-migration -I lib/ -I local/lib/perl5/ --S Database::Main --target_dir share/ --database MySQL prepare</code></p>\n\n<p><code>dbic-migration -I lib/ -I local/lib/perl5/ --S Database::Main --target_dir share/ --database MySQL install</code></p>\n\n<p>However when doing the install command, it gives me the following output:</p>\n\n<pre><code>$ dbic-migration -I lib/ -I local/lib/perl5/ --S Database::Main --target_dir share/ --database MySQL install\n\nSince this database is not versioned, we will assume version 1\nReading configurations from share/fixtures/1/conf\nCan't opendir($fh, 'share/migrations/SQLite/deploy/1'): No such file or directory at local/lib/perl5/DBIx/Class/DeploymentHandler/DeployMethod/SQL/Translator.pm line 109\nDBIx::Class::Storage::TxnScopeGuard::DESTROY(): A DBIx::Class::Storage::TxnScopeGuard went out of scope without explicit commit or error. Rolling back. at local/lib/perl5/DBIx/Class/DeploymentHandler/DeployMethod/SQL/Translator.pm line 116\n</code></pre>\n\n<p>My <code>share</code> directory looks as follows:</p>\n\n<pre><code>\u2514\u2500\u2500 share\n    \u251c\u2500\u2500 database-main.db\n    \u251c\u2500\u2500 fixtures\n    \u2502\u00a0\u00a0 \u2514\u2500\u2500 1\n    \u2502\u00a0\u00a0     \u2514\u2500\u2500 conf\n    \u2502\u00a0\u00a0         \u2514\u2500\u2500 all_tables.json\n    \u2514\u2500\u2500 migrations\n        \u251c\u2500\u2500 MySQL\n        \u2502\u00a0\u00a0 \u2514\u2500\u2500 deploy\n        \u2502\u00a0\u00a0     \u2514\u2500\u2500 1\n        \u2502\u00a0\u00a0         \u251c\u2500\u2500 001-auto-__VERSION.sql\n        \u2502\u00a0\u00a0         \u2514\u2500\u2500 001-auto.sql\n        \u251c\u2500\u2500 _common\n        \u2502\u00a0\u00a0 \u2514\u2500\u2500 deploy\n        \u2502\u00a0\u00a0     \u2514\u2500\u2500 1\n        \u2502\u00a0\u00a0         \u2514\u2500\u2500 002-demo.pl\n        \u2514\u2500\u2500 _source\n            \u2514\u2500\u2500 deploy\n                \u2514\u2500\u2500 1\n                    \u251c\u2500\u2500 001-auto-__VERSION.yml\n                    \u2514\u2500\u2500 001-auto.yml\n</code></pre>\n\n<p>Is anyone aware of why it is continuing to look for the SQLite directory when I have specified MySQL?</p>\n"}, {"tags": ["python", "linux", "perl"], "answers": [{"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 2, "last_activity_date": 1427037897, "creation_date": 1427037897, "answer_id": 29196145, "question_id": 29195886, "link": "https://stackoverflow.com/questions/29195886/remove-everything-between-second-and-second-last-occurance-of-match/29196145#29196145", "title": "Remove everything between second and second last occurance of match", "body": "<p>With such a simple selection of fields, you can use <a href=\"http://perldoc.perl.org/functions/split.html\" rel=\"nofollow\"><code>split</code></a> to separate the string into fields, pick out the fields you want, and put them back together with <a href=\"http://perldoc.perl.org/functions/join.html\" rel=\"nofollow\"><code>join</code></a>.</p>\n\n<p>Note that you must provide a negative number for the third parameter to <code>split</code> to prevent it from discarding trailing empty fields.</p>\n\n<p>It looks like this</p>\n\n<pre><code>use strict;\nuse warnings;\n\nmy $s = 'cellular organisms;Eukaryota;Opisthokonta;Metazoa;Eumetazoa;Bilateria;Protostomia;Ecdysozoa;Panarthropoda;Arthropoda;Mandibulata;Pancrustacea;Hexapoda;Insecta;Dicondylia;Pterygota;Neoptera;Endopterygota;Coleoptera;Polyphaga;Cucujiformia;Tenebrionoidea;Tenebrionidae;Tenebrionidae incertae sedis;Tribolium;Tribolium castaneum;';\n\nmy $ss = join ';', (split /;/, $s, -1)[0,1,-2,-1];\n\nprint $ss, \"\\n\";\n</code></pre>\n\n<p><strong>output</strong></p>\n\n<pre><code>cellular organisms;Eukaryota;Tribolium castaneum;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 25491, "user_id": 49197, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/15ebf24a33a29b9efbf9924f530dd736?s=128&d=identicon&r=PG", "display_name": "Hynek -Pichi- Vychodil", "link": "https://stackoverflow.com/users/49197/hynek-pichi-vychodil"}, "is_accepted": true, "score": 1, "last_activity_date": 1427038606, "creation_date": 1427038606, "answer_id": 29196263, "question_id": 29195886, "link": "https://stackoverflow.com/questions/29195886/remove-everything-between-second-and-second-last-occurance-of-match/29196263#29196263", "title": "Remove everything between second and second last occurance of match", "body": "<p>You can use this regexp in Perl</p>\n\n<pre class=\"lang-sh prettyprint-override\"><code>perl -pE's/;.*?\\K;.*(?=;.*;)//' &lt;&lt;&lt;'cellular organisms;Eukaryota;Opisthokonta;...;Tribolium;Tribolium castaneum;'\n</code></pre>\n"}], "owner": {"reputation": 51, "user_id": 4700037, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/f6a1e9c028eb578e3a9cabaf77ca48fe?s=128&d=identicon&r=PG&f=1", "display_name": "alan pter", "link": "https://stackoverflow.com/users/4700037/alan-pter"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 61, "favorite_count": 0, "accepted_answer_id": 29196263, "answer_count": 2, "score": 0, "last_activity_date": 1427038606, "creation_date": 1427036540, "last_edit_date": 1427037696, "question_id": 29195886, "link": "https://stackoverflow.com/questions/29195886/remove-everything-between-second-and-second-last-occurance-of-match", "title": "Remove everything between second and second last occurance of match", "body": "<p>I have string which I would like to format. I would like to remove everything between second ; and second last ;.</p>\n\n\n\n<p>Input    </p>\n\n<pre class=\"lang-none prettyprint-override\"><code>cellular organisms;Eukaryota;Opisthokonta;Metazoa;Eumetazoa;Bilateria;Protostomia;Ecdysozoa;Panarthropoda;Arthropoda;Mandibulata;Pancrustacea;Hexapoda;Insecta;Dicondylia;Pterygota;Neoptera;Endopterygota;Coleoptera;Polyphaga;Cucujiformia;Tenebrionoidea;Tenebrionidae;Tenebrionidae incertae sedis;Tribolium;Tribolium castaneum;\n</code></pre>\n\n<p>Output</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>cellular organisms;Eukaryota;Tribolium castaneum;\n</code></pre>\n\n<p>I have tried usind sed.</p>\n\n<pre class=\"lang-sh prettyprint-override\"><code>$ sed 's/;[^;]*//' &lt;&lt;&lt;\"cellular organisms;Eukaryota;Opisthokonta;Metazoa;Eumetazoa;Bilateria;Protostomia;Ecdysozoa;Panarthropoda;Arthropoda;Mandibulata;Pancrustacea;Hexapoda;Insecta;Dicondylia;Pterygota;Neoptera;Endopterygota;Coleoptera;Polyphaga;Cucujiformia;Tenebrionoidea;Tenebrionidae;Tenebrionidae incertae sedis;Tribolium;Tribolium castaneum;\"    \n</code></pre>\n\n<p>produce    </p>\n\n<pre class=\"lang-none prettyprint-override\"><code>cellular organisms;Opisthokonta;Metazoa;Eumetazoa;Bilateria;Protostomia;Ecdysozoa;Panarthropoda;Arthropoda;Mandibulata;Pancrustacea;Hexapoda;Insecta;Dicondylia;Pterygota;Neoptera;Endopterygota;Coleoptera;Polyphaga;Cucujiformia;Tenebrionoidea;Tenebrionidae;Tenebrionidae incertae sedis;Tribolium;Tribolium castaneum;    \n</code></pre>\n\n<p>Many thanks.</p>\n"}, {"tags": ["regex", "perl", "sed", "large-files"], "comments": [{"owner": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "edited": false, "score": 0, "creation_date": 1427031936, "post_id": 29194242, "comment_id": 46603144, "body": "Manually cobbling together JSON maybe hazardous to your process."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1427033380, "post_id": 29194242, "comment_id": 46603579, "body": "<a href=\"http://www.textpad.com/products/textpad/summary.html\" rel=\"nofollow noreferrer\">TextPad</a> is a nice text editor for Windows that supports huge files and includes a one-month trial period. Before I paid for my copy it was just issuing warnings every so often and never actually stopped you using it."}, {"owner": {"reputation": 1129, "user_id": 499995, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/AWo27.jpg?s=128&g=1", "display_name": "punstress", "link": "https://stackoverflow.com/users/499995/punstress"}, "edited": false, "score": 0, "creation_date": 1427047626, "post_id": 29194242, "comment_id": 46608369, "body": "How could it be hazardous, Sinan Unur? I am just adding brackets."}], "answers": [{"comments": [{"owner": {"reputation": 1129, "user_id": 499995, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/AWo27.jpg?s=128&g=1", "display_name": "punstress", "link": "https://stackoverflow.com/users/499995/punstress"}, "edited": false, "score": 0, "creation_date": 1427027539, "post_id": 29194308, "comment_id": 46601915, "body": "If I understand correctly, you make a new file with just an open bracket, you concatenate that file to the front of my big file, then does that last line add the bracket to the end of the new file. I wonder, would it be easier for me to make two new files, one with my start line and one with my end line, and can I then cat them with my big file?"}, {"owner": {"reputation": 52821, "user_id": 632407, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/AfGWW.jpg?s=128&g=1", "display_name": "jm666", "link": "https://stackoverflow.com/users/632407/jm666"}, "reply_to_user": {"reputation": 1129, "user_id": 499995, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/AWo27.jpg?s=128&g=1", "display_name": "punstress", "link": "https://stackoverflow.com/users/499995/punstress"}, "edited": false, "score": 1, "creation_date": 1427030926, "post_id": 29194308, "comment_id": 46602876, "body": "@punstress, no - the solution <b>1.)</b> the <code>echo</code> <b>create</b>  the <code>corrected-file.txt</code> with a content <code>[</code>. <b>2.)</b> the <code>cat</code> <b>appends</b> the <code>original-file.txt</code> to the <code>corrected-file.txt</code>, and <b>3.)</b> the final echo again <b>appends</b> the final <code>]</code>. Nice, easy solution without any voodoo.. ;)"}], "tags": [], "owner": {"reputation": 7450, "user_id": 657700, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cb044bd9a9f6548b9a9bae44617c97c7?s=128&d=identicon&r=PG", "display_name": "fjardon", "link": "https://stackoverflow.com/users/657700/fjardon"}, "is_accepted": false, "score": 3, "last_activity_date": 1427026982, "creation_date": 1427026982, "answer_id": 29194308, "question_id": 29194242, "link": "https://stackoverflow.com/questions/29194242/alternate-ways-to-add-2-lines-to-a-file-too-large-for-me-to-open/29194308#29194308", "title": "Alternate ways to add 2 lines to a file too large for me to open", "body": "<p>If you have enough space on your disk to stand two files of the same size, you can use a simple bash script:</p>\n\n<pre><code>echo \"[\" &gt; corrected-file.txt\ncat original-file.txt &gt;&gt; corrected-file.txt\necho \"]\" &gt;&gt; corrected-file.txt\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": false, "score": 2, "last_activity_date": 1427027604, "creation_date": 1427027604, "answer_id": 29194392, "question_id": 29194242, "link": "https://stackoverflow.com/questions/29194242/alternate-ways-to-add-2-lines-to-a-file-too-large-for-me-to-open/29194392#29194392", "title": "Alternate ways to add 2 lines to a file too large for me to open", "body": "<p><code>$.=0 if eof</code></p>\n\n<p>This resets the line counter <code>$.</code> if several files are processed at once.</p>\n\n<p><code>print \"first line\\nsecond line\\n\" if $. == 1</code></p>\n\n<p>If the counter is set to 1, i.e. the script is reading the first line, output the two lines you want to prepend.</p>\n\n<p>So, adjusting it to prepend <code>[</code> and append <code>]</code> would be</p>\n\n<pre><code>perl -i~ -pe '$. = 0, $_ .= /\\n/ ? \"]\\n\" : \"\\n]\\n\" if eof; print \"[\\n\" if 1 == $.;' *.txt\n</code></pre>\n\n<p>Explanation:</p>\n\n<p><code>$_ .= /\\n/ ? \"]\\n\" : \"\\n]\\n\" if eof</code></p>\n\n<p>At the end of the file, we want to add <code>]</code>. But, the file could have ended with a newline, or without it. If there was the newline, we just add the <code>]\\n</code>, if there wasn't, we need to add it, too.</p>\n"}, {"tags": [], "owner": {"reputation": 39446, "user_id": 4301306, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a1461d0104809c90e2a252a2d4b0ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Wintermute", "link": "https://stackoverflow.com/users/4301306/wintermute"}, "is_accepted": true, "score": 2, "last_activity_date": 1427027616, "creation_date": 1427027616, "answer_id": 29194394, "question_id": 29194242, "link": "https://stackoverflow.com/questions/29194242/alternate-ways-to-add-2-lines-to-a-file-too-large-for-me-to-open/29194394#29194394", "title": "Alternate ways to add 2 lines to a file too large for me to open", "body": "<p>With sed:</p>\n\n<pre><code>sed -i -e '1i[' -e '$a]' filename\n</code></pre>\n\n<p>That is</p>\n\n<pre><code>1 i [   # before the first line, insert a line \"[\"\n$ a ]   # after the last line, append a line \"]\"\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1129, "user_id": 499995, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/AWo27.jpg?s=128&g=1", "display_name": "punstress", "link": "https://stackoverflow.com/users/499995/punstress"}, "edited": false, "score": 0, "creation_date": 1427028954, "post_id": 29194419, "comment_id": 46602296, "body": "I just looked at emeditor; apparently the free version doesn&#39;t include large files. Maybe it would during the trial period but, alas, it won&#39;t install on Win XP. Oh well."}], "tags": [], "owner": {"reputation": 31, "user_id": 4699720, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/3907506b2a46c461d5c5e91cd02b5291?s=128&d=identicon&r=PG", "display_name": "joe", "link": "https://stackoverflow.com/users/4699720/joe"}, "is_accepted": false, "score": 3, "last_activity_date": 1427028653, "last_edit_date": 1427028653, "creation_date": 1427027785, "answer_id": 29194419, "question_id": 29194242, "link": "https://stackoverflow.com/questions/29194242/alternate-ways-to-add-2-lines-to-a-file-too-large-for-me-to-open/29194419#29194419", "title": "Alternate ways to add 2 lines to a file too large for me to open", "body": "<p>Create two files in notepad, one with only <code>[</code> in it, name it <code>beginning</code> , another with <code>]</code> in it, name it <code>end</code>. Then use <code>cat</code>.</p>\n\n<pre><code>cat beginning yourawfullybigfile end &gt; yournewfilewithbothbracketsinit\n</code></pre>\n\n<p>you may as well use free emeditor, and edit your big file as you would in notepad++ if it was small enough</p>\n"}, {"comments": [{"owner": {"reputation": 1129, "user_id": 499995, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/AWo27.jpg?s=128&g=1", "display_name": "punstress", "link": "https://stackoverflow.com/users/499995/punstress"}, "edited": false, "score": 0, "creation_date": 1427047742, "post_id": 29195111, "comment_id": 46608403, "body": "I&#39;ve been using bash, not Windows command line. So I can use cat and echo."}], "tags": [], "owner": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "is_accepted": false, "score": 0, "last_activity_date": 1427031897, "last_edit_date": 1495540250, "creation_date": 1427031897, "answer_id": 29195111, "question_id": 29194242, "link": "https://stackoverflow.com/questions/29194242/alternate-ways-to-add-2-lines-to-a-file-too-large-for-me-to-open/29195111#29195111", "title": "Alternate ways to add 2 lines to a file too large for me to open", "body": "<p>You are on Windows. Follow <a href=\"https://stackoverflow.com/a/29194419/100754\">joe's advice</a>, and create two files. Then use <code>copy</code></p>\n\n<pre>C:\\> copy /b beginning + yourfile + end newfile</pre>\n"}], "owner": {"reputation": 1129, "user_id": 499995, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/AWo27.jpg?s=128&g=1", "display_name": "punstress", "link": "https://stackoverflow.com/users/499995/punstress"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 105, "favorite_count": 1, "accepted_answer_id": 29194394, "answer_count": 5, "score": 1, "last_activity_date": 1427031897, "creation_date": 1427026578, "last_edit_date": 1427031758, "question_id": 29194242, "link": "https://stackoverflow.com/questions/29194242/alternate-ways-to-add-2-lines-to-a-file-too-large-for-me-to-open", "title": "Alternate ways to add 2 lines to a file too large for me to open", "body": "<p>I have a JSON file that is too large for Notepad++ to open. I was told WordPad would open it, but it just hung. </p>\n\n<p>The file needs to have an open bracket <code>[</code> on a new line at the beginning of the file, and a close bracket <code>]</code> on a new line at the end of the file. </p>\n\n<p>I already used <code>sed</code> to put commas at the end of each line in this file, using a command I found here. But, I don't know enough about <code>sed</code> and regex to write my own for the brackets, and I don't want to mess it up.</p>\n\n<p>I also found this Perl command for adding two lines at the beginning of a file:</p>\n\n<pre>perl -pi -e '$.=0 if eof;print \"first line\\nsecond line\\n\" if ($.==1)' *.txt</pre>\n\n<p>I don't understand what it is saying. Could it be adjusted for 1 at the beginning and 1 at the end? If you can explain it, I'd really appreciate it.</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 13167, "user_id": 546205, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/5d7dd187ae1f4400664cbc0e66c8a2ce?s=128&d=identicon&r=PG", "display_name": "Miguel Prz", "link": "https://stackoverflow.com/users/546205/miguel-prz"}, "edited": false, "score": 0, "creation_date": 1427021148, "post_id": 29193376, "comment_id": 46600235, "body": "try to comment the line beginning with $_ =~ ... , and if you don&#39;t have syntax errors , that&#39;s the line you have to fix"}, {"owner": {"reputation": 61610, "user_id": 725418, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/82ac2dc3e1ad4b7187f245c416528df9?s=128&d=identicon&r=PG", "display_name": "TLP", "link": "https://stackoverflow.com/users/725418/tlp"}, "edited": false, "score": 0, "creation_date": 1427024576, "post_id": 29193376, "comment_id": 46601074, "body": "You are trying to read from your output file handle <code>$out_pointer</code>. You are also trying to put code into the replacement part of the substitution without using an eval modifier <code>&#47;e</code>. Moreover, your <code>grep</code> statement is incorrect, you are assigning a new value to <code>$_</code> (which is discarded anyway) -- but more importantly, if you are only expecting one match, you can just do <code>$defines_2{$match[$i]}</code>."}, {"owner": {"reputation": 61610, "user_id": 725418, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/82ac2dc3e1ad4b7187f245c416528df9?s=128&d=identicon&r=PG", "display_name": "TLP", "link": "https://stackoverflow.com/users/725418/tlp"}, "edited": false, "score": 1, "creation_date": 1427024924, "post_id": 29193376, "comment_id": 46601170, "body": "Also, I suspect your whole approach is incorrect, as you seem to be crossreferencing your <code>@match</code> array with itself. <code>$match[$i] =~ $match[$j]</code> is probably not the right way to compare, as it will perform a regex match between the strings. My first thought was that you wanted <code>$i == $j</code> or <code>$match[$i] eq $match[$j]</code>."}, {"owner": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "edited": false, "score": 0, "creation_date": 1427032030, "post_id": 29193376, "comment_id": 46603173, "body": "Just imagine ... At some point some IoT device cobbled together by this process may land in your security monitoring system."}], "answers": [{"comments": [{"owner": {"reputation": 149, "user_id": 4659538, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/08fa960fe310d1044d9a175f4961bd39?s=128&d=identicon&r=PG&f=1", "display_name": "Grace90", "link": "https://stackoverflow.com/users/4659538/grace90"}, "edited": false, "score": 0, "creation_date": 1427022298, "post_id": 29193458, "comment_id": 46600520, "body": "thanx It was giving two errors but  now its still giving 1 syntax error in the same line where I&#39;v used #  as you suggested ! It is saying syntax error near = but i am  not able to figure out where !"}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "reply_to_user": {"reputation": 149, "user_id": 4659538, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/08fa960fe310d1044d9a175f4961bd39?s=128&d=identicon&r=PG&f=1", "display_name": "Grace90", "link": "https://stackoverflow.com/users/4659538/grace90"}, "edited": false, "score": 0, "creation_date": 1427022501, "post_id": 29193458, "comment_id": 46600569, "body": "@Grace90: Weird. I&#39;m getting no errors. Did you copy&amp;paste or edit?"}, {"owner": {"reputation": 149, "user_id": 4659538, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/08fa960fe310d1044d9a175f4961bd39?s=128&d=identicon&r=PG&f=1", "display_name": "Grace90", "link": "https://stackoverflow.com/users/4659538/grace90"}, "edited": false, "score": 0, "creation_date": 1427023304, "post_id": 29193458, "comment_id": 46600754, "body": "I copied and pasted the line suggested by you and then it removed one error and now its saying &quot;syntax error near =&quot; . Sometimes it gives error in the wrong line . Probably its = in this line &quot;my @lin = &lt;$out_pointer&gt;;&quot; but i cant figure out what error!"}, {"owner": {"reputation": 149, "user_id": 4659538, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/08fa960fe310d1044d9a175f4961bd39?s=128&d=identicon&r=PG&f=1", "display_name": "Grace90", "link": "https://stackoverflow.com/users/4659538/grace90"}, "edited": false, "score": 0, "creation_date": 1427023919, "post_id": 29193458, "comment_id": 46600906, "body": "okay got it i had not put &quot;$_ =~&quot;  before the line  you suggested ..my bad ..thankyou so much!..now its giving no errors though i yet have to figure out if it works :)"}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "reply_to_user": {"reputation": 149, "user_id": 4659538, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/08fa960fe310d1044d9a175f4961bd39?s=128&d=identicon&r=PG&f=1", "display_name": "Grace90", "link": "https://stackoverflow.com/users/4659538/grace90"}, "edited": false, "score": 0, "creation_date": 1427024193, "post_id": 29193458, "comment_id": 46600967, "body": "@Grace90: <code>$_ =~</code> is optional. If there is no variable to bind a match/substitution against, <code>$_</code> is the default."}, {"owner": {"reputation": 149, "user_id": 4659538, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/08fa960fe310d1044d9a175f4961bd39?s=128&d=identicon&r=PG&f=1", "display_name": "Grace90", "link": "https://stackoverflow.com/users/4659538/grace90"}, "edited": false, "score": 0, "creation_date": 1427024845, "post_id": 29193458, "comment_id": 46601146, "body": "yes thats what i also was wondering but i just made two changes in my code ,first  put &quot;$_ =~&quot; and second below this code i had a code chunk that i had put between &quot;=pod&quot; and &quot;=cut&quot; i removed that and it started running fine"}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "reply_to_user": {"reputation": 149, "user_id": 4659538, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/08fa960fe310d1044d9a175f4961bd39?s=128&d=identicon&r=PG&f=1", "display_name": "Grace90", "link": "https://stackoverflow.com/users/4659538/grace90"}, "edited": false, "score": 0, "creation_date": 1427025926, "post_id": 29193458, "comment_id": 46601450, "body": "@Grace90: All POD directives must be surrounded by empty lines."}, {"owner": {"reputation": 149, "user_id": 4659538, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/08fa960fe310d1044d9a175f4961bd39?s=128&d=identicon&r=PG&f=1", "display_name": "Grace90", "link": "https://stackoverflow.com/users/4659538/grace90"}, "edited": false, "score": 0, "creation_date": 1427034799, "post_id": 29193458, "comment_id": 46604053, "body": "ohh ok i just read it at &quot;<a href=\"http://perldoc.perl.org/perlpod.html#Command-Paragraph\" rel=\"nofollow noreferrer\">perldoc.perl.org/perlpod.html#Command-Paragraph</a>&quot; after seeing your comment ...got it thanks :)"}], "tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": true, "score": 2, "last_activity_date": 1427021499, "creation_date": 1427021499, "answer_id": 29193458, "question_id": 29193376, "link": "https://stackoverflow.com/questions/29193376/how-to-get-rid-of-the-syntax-error-in-this-code/29193458#29193458", "title": "How to get rid of the syntax error in this code?", "body": "<p>You cannot use <code>/</code> unquoted inside a <code>s///</code> construct. Instead of backslashes, you can use different delimiters:</p>\n\n<pre><code>s#UART90_BASE_ADDRESS#$defines_2{ $_ = grep{/$match[$i]/} (keys %defines_2)}#;\n</code></pre>\n\n<p>It fixes the syntax error, but I fear it still won't do what you want. Without data, it's hard to test, though.</p>\n"}, {"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 1, "last_activity_date": 1427036241, "creation_date": 1427036241, "answer_id": 29195850, "question_id": 29193376, "link": "https://stackoverflow.com/questions/29193376/how-to-get-rid-of-the-syntax-error-in-this-code/29195850#29195850", "title": "How to get rid of the syntax error in this code?", "body": "<p>What I think you're doing is editing a number of text files whose names look like <code>file_no_1.txt</code> etc. You're doing that by copying the current file to <code>t_code.txt</code> and then reading that file line by line, editing as required, as writing the lines back to the original text file.</p>\n\n<p>The problem with that approach is that the file will be copied and rewritten many times, and it would be better to read the whole file into an array, make all the edits, and then write them back in one operation. That would be fine unless the file is enormous \u2014 say, several GB.</p>\n\n<p>Here's some code that implements that approach. You see that <code>$file_name</code> is defined and <code>@lines</code> is filled <em>outside</em> the inner loop. The innermost loop modifies the elements of <code>@lines</code> and, outside that loop again, <code>@lines</code> is written back to the original text file.</p>\n\n<p>I couldn't fathom a couple of things about your code.</p>\n\n<ul>\n<li><p>I'm not sure if you should be using <code>=~</code> or if you intended a simple <code>eq</code>. The former does a <em>contains</em> test, and you had a problem in the past where you meant to check that the first string had the second <em>at the end</em></p></li>\n<li><p>The <code>grep</code> call</p>\n\n<pre><code>grep{/$match[$i]/} (keys %defines_2)\n</code></pre>\n\n<p>worries me, as it can potentially return more than one key of the <code>%defines_2</code> hash, in which case your own code will insert what is pretty much a random selection from the hash elements</p></li>\n</ul>\n\n<p>If your code is working then that's fine, but if not then I hope this helps you fix it. If you need more help on this chunk of code then you should include a small sample of the data so that we can better understand what is going on.</p>\n\n<pre><code>for my $i (0 .. $#match) {\n\n  my $file_name = \"file_no_$i.txt\";\n\n  my @lines = do {\n    open my $in_fh, '&lt;', 't_code.txt' or die $!;\n    &lt;$in_fh&gt;;\n  };\n\n  for my $j (0 .. $#match) {\n\n    next if $match[$i] =~ $match[$j];\n\n    for ( @lines ) {\n      my ($match) = grep { /$match[$i]/ } keys %defines_2;\n      s/UART90_BASE_ADDRESS/$defines_2{$match}/;\n    }\n  }\n\n  open my $out_fh, '&gt;', $file_name or die qq{Can't open \"$file_name\" for output: $!};\n  print $out_fh $_ for @lines;\n  close $out_fh or die qq{Failed to close output file \"$file_name\": $!};\n}\n</code></pre>\n"}], "owner": {"reputation": 149, "user_id": 4659538, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/08fa960fe310d1044d9a175f4961bd39?s=128&d=identicon&r=PG&f=1", "display_name": "Grace90", "link": "https://stackoverflow.com/users/4659538/grace90"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 142, "favorite_count": 0, "accepted_answer_id": 29193458, "answer_count": 2, "score": -1, "last_activity_date": 1427036241, "creation_date": 1427020929, "last_edit_date": 1427031968, "question_id": 29193376, "link": "https://stackoverflow.com/questions/29193376/how-to-get-rid-of-the-syntax-error-in-this-code", "title": "How to get rid of the syntax error in this code?", "body": "<p>Below I'v proided just a chunk of a huge perl script I am trying to write. I am getting syntax errors in else statement but in the console window its only saying syntax error at perl script and not clearly telling the error. I am trying to create a variable file <code>file_no_$i.txt</code> and copy contents of <code>t_code.txt</code> in it and then find and replace string in the variable file with some selected keys of hash <code>%defines_2</code> </p>\n\n<pre><code>open ( my $pointer, \"&lt;\", \"t_code.txt\" ) or die $!;\nmy $out_pointer;    \n\n for (my $i=0 ; $i &lt;=$#match  ; $i++) {\n    for (my $j=0; $j &lt;= $#match ; $j++) {          \n       if ($match[$i]=~$match[$j]) {\n              next;\n            } \n\n     else {            \n       my $file_name = \"file_no_$i.txt\";                                             \n       open $out_pointer, \"&gt;\" , $file_name  or die \"Can't open the output file!\";\n       copy(\"$file_name\",\"t_code.txt\") or die \"Copy failed: $!\";\n       my @lin = &lt;$out_pointer&gt;;\n         foreach $_(@lin) {\n      $_ =~ s/UART90_BASE_ADDRESS/$defines_2{ $_ = grep{/$match[$i]/} (keys %defines_2)};                              \n                   }            \n            }        \n      }\n}\n</code></pre>\n"}, {"tags": ["perl", "terminal", "ascii", "tty"], "comments": [{"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1427020423, "post_id": 29192662, "comment_id": 46600059, "body": "What OS? On *nix, <code>stty</code> can give you the information."}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 2, "creation_date": 1427028060, "post_id": 29192662, "comment_id": 46602056, "body": "You haven&#39;t explained exactly <i>why</i> you can&#39;t use modules, but just in case you weren&#39;t aware, <a href=\"http://stackoverflow.com/questions/3735836/how-can-i-install-perl-modules-without-root-privileges\">you don&#39;t need admin rights to install modules</a>."}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user4598738"}, "edited": false, "score": 0, "creation_date": 1427032385, "post_id": 29194918, "comment_id": 46603271, "body": "This is something awesome thank you !!!!"}], "tags": [], "owner": {"reputation": 4116, "user_id": 4402825, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-3ESJ4SrCVfE/AAAAAAAAAAI/AAAAAAAAFO8/yBWcRYAN94s/photo.jpg?sz=128", "display_name": "Ben Grimm", "link": "https://stackoverflow.com/users/4402825/ben-grimm"}, "is_accepted": true, "score": 0, "last_activity_date": 1427030726, "creation_date": 1427030726, "answer_id": 29194918, "question_id": 29192662, "link": "https://stackoverflow.com/questions/29192662/best-way-to-print-graph-without-using-modules-perl/29194918#29194918", "title": "Best way to print graph without using modules Perl", "body": "<p>This is one way to do it without using any modules outside of core Perl.</p>\n\n<pre><code>use v5.10;\nuse Term::Cap ();\nuse Time::HiRes qw( sleep );\n\n## See: perldoc -q \"screen size\" \nrequire 'sys/ioctl.ph';\ndie \"no TIOCGWINSZ \" unless defined &amp;TIOCGWINSZ;\nopen(my $tty_fh, \"+&lt;/dev/tty\")\n        or die \"No tty: $!\";\nsub GetWinSize {\n    unless (ioctl($tty_fh, &amp;TIOCGWINSZ, $winsize='')) {\n            die sprintf \"$0: ioctl TIOCGWINSZ (%08x: $!)\\n\", &amp;TIOCGWINSZ;\n    }\n    return unpack('S4', $winsize);\n}\n## \n\nmy $terminal = Term::Cap-&gt;Tgetent;\n\nmy $max = 100;\nmy @vals;\nwhile (1) {\n    $terminal-&gt;Tgoto('cm', 0, 0);\n\n    push @vals, int(rand($max)); # get your vaue here\n\n    my ($height, $width) = GetWinSize();\n    $width -= 2;\n    my $slicewidth = $#vals &lt;= $width ? $#vals : $width;\n    my $scale = $height / $max;\n\n    my $fmt = \"%s\" x $slicewidth;\n    for (my $i=0; $i &lt; $height; $i++) {\n        printf \"$fmt\\n\", \n            map { $_ * $scale &lt; ($height - $i) ? ' ' : '*' }\n               @vals[-$slicewidth..-1]; \n    }\n    sleep .5;\n}\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user4598738"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 250, "favorite_count": 0, "closed_date": 1427070496, "accepted_answer_id": 29194918, "answer_count": 1, "score": 1, "last_activity_date": 1427032110, "creation_date": 1427015439, "last_edit_date": 1427032110, "question_id": 29192662, "link": "https://stackoverflow.com/questions/29192662/best-way-to-print-graph-without-using-modules-perl", "closed_reason": "Duplicate", "title": "Best way to print graph without using modules Perl", "body": "<p>I need to draw graph in real time in the terminal from Perl program. But I have no ability to use third party modules.</p>\n\n<p>I need to draw graph using only ASCII characters.</p>\n\n<p>I have some problems with this.    </p>\n\n<p>My idea is just to print vertically sequence of characters according to data each period of time. Add new value to array and than just shift it to right or left. (Maybe there is better way to do this, please let me know).<br>\nSo problems are :    </p>\n\n<ol>\n<li><p>How to get current terminal window height, than to use it while printing values. And when terminal window size has changed it should use new height to make it scalable.   </p></li>\n<li><p>How to get current width and calculate it according to the character width to get iteration count.</p></li>\n</ol>\n"}, {"tags": ["regex", "perl", "unicode", "regex-negation", "emoticons"], "answers": [{"comments": [{"owner": {"reputation": 5611, "user_id": 170339, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/FE7kE.jpg?s=128&g=1", "display_name": "Pale Blue Dot", "link": "https://stackoverflow.com/users/170339/pale-blue-dot"}, "edited": false, "score": 0, "creation_date": 1427009144, "post_id": 29191947, "comment_id": 46597759, "body": "Can we not include it as a range? Including every character&#39;s code is a tedious way. In the emoticons&#39; case there are 80 unicodes. Definitely not comfortable."}, {"owner": {"reputation": 3009, "user_id": 4282342, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-5DSxqi1gqfs/AAAAAAAAAAI/AAAAAAAAHrM/aBPmmmTeDVI/photo.jpg?sz=128", "display_name": "Peter Bowers", "link": "https://stackoverflow.com/users/4282342/peter-bowers"}, "reply_to_user": {"reputation": 5611, "user_id": 170339, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/FE7kE.jpg?s=128&g=1", "display_name": "Pale Blue Dot", "link": "https://stackoverflow.com/users/170339/pale-blue-dot"}, "edited": false, "score": 0, "creation_date": 1427009293, "post_id": 29191947, "comment_id": 46597784, "body": "I included everything in the emoticons block in a single \\p{...}. You could avoid specifying the u+263A by replacing it with a range and save a single character."}, {"owner": {"reputation": 5611, "user_id": 170339, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/FE7kE.jpg?s=128&g=1", "display_name": "Pale Blue Dot", "link": "https://stackoverflow.com/users/170339/pale-blue-dot"}, "edited": false, "score": 0, "creation_date": 1427010048, "post_id": 29191947, "comment_id": 46597904, "body": "I am not really sure how do I do that. Not much familiar with scripting. Also I was referring to the second table in the link I mentioned which has 80 emoticons. Can you please modify the command? Sorry for trouble."}, {"owner": {"reputation": 3009, "user_id": 4282342, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-5DSxqi1gqfs/AAAAAAAAAAI/AAAAAAAAHrM/aBPmmmTeDVI/photo.jpg?sz=128", "display_name": "Peter Bowers", "link": "https://stackoverflow.com/users/4282342/peter-bowers"}, "reply_to_user": {"reputation": 5611, "user_id": 170339, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/FE7kE.jpg?s=128&g=1", "display_name": "Pale Blue Dot", "link": "https://stackoverflow.com/users/170339/pale-blue-dot"}, "edited": false, "score": 0, "creation_date": 1427010176, "post_id": 29191947, "comment_id": 46597919, "body": "Erm... Did you try my code? Or are you just assuming it doesn&#39;t work?"}, {"owner": {"reputation": 658023, "user_id": 548225, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/dab08478b226280d4a30894c9a7ed719?s=128&d=identicon&r=PG", "display_name": "anubhava", "link": "https://stackoverflow.com/users/548225/anubhava"}, "edited": false, "score": 0, "creation_date": 1427016171, "post_id": 29191947, "comment_id": 46599136, "body": "First this answer doesn&#39;t deserve -1 so my +1, but I&#39;m not sure why <code>\\N{U+2639}\\N{U+263A}\\N{U+263B}</code> are needed here as <code>s&#47;[^[:ascii:]\\p{block:Emoticons}]+&#47;&#47;g</code> should have been enough."}, {"owner": {"reputation": 3009, "user_id": 4282342, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-5DSxqi1gqfs/AAAAAAAAAAI/AAAAAAAAHrM/aBPmmmTeDVI/photo.jpg?sz=128", "display_name": "Peter Bowers", "link": "https://stackoverflow.com/users/4282342/peter-bowers"}, "edited": false, "score": 0, "creation_date": 1427016458, "post_id": 29191947, "comment_id": 46599188, "body": "I wasn&#39;t asking for the upvote, but thanks. In op question he has a link that differentiates btwn the emoticon block &amp; these other 3. I don&#39;t know much about Unicode so I just took it at face value and dealt with what appeared to be 2 separate ranges."}, {"owner": {"reputation": 3009, "user_id": 4282342, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-5DSxqi1gqfs/AAAAAAAAAAI/AAAAAAAAHrM/aBPmmmTeDVI/photo.jpg?sz=128", "display_name": "Peter Bowers", "link": "https://stackoverflow.com/users/4282342/peter-bowers"}, "edited": false, "score": 0, "creation_date": 1427042543, "post_id": 29191947, "comment_id": 46606694, "body": "Made a final (?) edit which gives the <code>-CS</code> switch allowing these particular perl unicode options to be used."}], "tags": [], "owner": {"reputation": 3009, "user_id": 4282342, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-5DSxqi1gqfs/AAAAAAAAAAI/AAAAAAAAHrM/aBPmmmTeDVI/photo.jpg?sz=128", "display_name": "Peter Bowers", "link": "https://stackoverflow.com/users/4282342/peter-bowers"}, "is_accepted": false, "score": 0, "last_activity_date": 1427042496, "last_edit_date": 1427042496, "creation_date": 1427008776, "answer_id": 29191947, "question_id": 29191885, "link": "https://stackoverflow.com/questions/29191885/perl-remove-all-non-ascii-characters-except-specific-ones/29191947#29191947", "title": "Perl: Remove all non-ascii characters except specific ones", "body": "<p>Just extend the characters you want to exclude to include the emoticons:</p>\n\n<pre><code>perl -i.bak -pe 's/[^[:ascii:]\\p{block:Emoticons}\\N{U+2639}\\N{U+263A}\\N{U+263B}]//g'\n</code></pre>\n\n<hr>\n\n<h2>Edit</h2>\n\n<p>After a lot of messing around and trying different switches I found a combination that works with the \\p{block...} and \\N{U+xxxx} type of regexes.</p>\n\n<pre><code> perl -CS -pe 's/[^[:ascii:]\\p{block:emoticons}\\N{U+2639}-\\N{U+263B}]//g'\n</code></pre>\n\n<p>Do note that your text has to be in utf-8 for this to work (at least on my cygwin setup).</p>\n"}, {"comments": [{"owner": {"reputation": 658023, "user_id": 548225, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/dab08478b226280d4a30894c9a7ed719?s=128&d=identicon&r=PG", "display_name": "anubhava", "link": "https://stackoverflow.com/users/548225/anubhava"}, "reply_to_user": {"reputation": 5611, "user_id": 170339, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/FE7kE.jpg?s=128&g=1", "display_name": "Pale Blue Dot", "link": "https://stackoverflow.com/users/170339/pale-blue-dot"}, "edited": false, "score": 0, "creation_date": 1427012549, "post_id": 29192297, "comment_id": 46598423, "body": "You&#39;re welcome, glad it worked. I had actually made this regex working in PHP long back but couldn&#39;t make it work in Perl (due to my limited Perl knowledge). Finally found this <code>-C</code> flag to make it work in Perl also :)"}, {"owner": {"reputation": 3009, "user_id": 4282342, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-5DSxqi1gqfs/AAAAAAAAAAI/AAAAAAAAHrM/aBPmmmTeDVI/photo.jpg?sz=128", "display_name": "Peter Bowers", "link": "https://stackoverflow.com/users/4282342/peter-bowers"}, "edited": false, "score": 1, "creation_date": 1427015634, "post_id": 29192297, "comment_id": 46599008, "body": "@anubhava, I&#39;d be interested in your feedback on the \\p{...} and \\N{...} solution below. I just pulled it from manual reading as I didn&#39;t have any unicode test data to test against, but you seem to have a good handle on using unicode in regex - can you comment on it?"}], "tags": [], "owner": {"reputation": 658023, "user_id": 548225, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/dab08478b226280d4a30894c9a7ed719?s=128&d=identicon&r=PG", "display_name": "anubhava", "link": "https://stackoverflow.com/users/548225/anubhava"}, "is_accepted": true, "score": 3, "last_activity_date": 1427012122, "creation_date": 1427012122, "answer_id": 29192297, "question_id": 29191885, "link": "https://stackoverflow.com/questions/29191885/perl-remove-all-non-ascii-characters-except-specific-ones/29192297#29192297", "title": "Perl: Remove all non-ascii characters except specific ones", "body": "<p>You can specify range in Perl like this:</p>\n\n<pre><code>s='Good morning! #Happy #StPatricksDay \u2663\u2665\ud83d\ude0a'\n\necho \"$s\" | perl -C -pe 's/[^[:ascii:]\\x{1F600}-\\x{1F64F}]+//g'\nGood morning! #Happy #StPatricksDay \ud83d\ude0a\n</code></pre>\n\n<p><a href=\"http://www.fileformat.info/info/unicode/block/emoticons/index.htm\" rel=\"nofollow\">Reference: Unicode block for emoticons</a></p>\n"}], "owner": {"reputation": 5611, "user_id": 170339, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/FE7kE.jpg?s=128&g=1", "display_name": "Pale Blue Dot", "link": "https://stackoverflow.com/users/170339/pale-blue-dot"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1861, "favorite_count": 0, "accepted_answer_id": 29192297, "answer_count": 2, "score": 2, "last_activity_date": 1427042496, "creation_date": 1427008153, "last_edit_date": 1427016859, "question_id": 29191885, "link": "https://stackoverflow.com/questions/29191885/perl-remove-all-non-ascii-characters-except-specific-ones", "title": "Perl: Remove all non-ascii characters except specific ones", "body": "<p>I want to remove all non-ASCII characters except the <a href=\"http://en.wikipedia.org/wiki/List_of_emoticons#ref_U1F600_as_of_Unicode_version\" rel=\"nofollow\">Unicode emoticons</a> from a text file. I am using following command which will remove all non-ASCII characters. </p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>perl -i.bak -pe 's/[^[:ascii:]]//g'\n</code></pre>\n\n<p>Can this command be modified which will exclude emoticon characters?</p>\n\n<p><strong>EDIT:</strong> </p>\n\n<p>Sample input: <code>Good morning! #Happy #StPatricksDay \u2663\u2665\ud83d\ude0a</code></p>\n\n<p>Sample output: <code>Good morning! #Happy #StPatricksDay \ud83d\ude0a</code></p>\n"}, {"tags": ["perl"], "answers": [{"tags": [], "owner": {"reputation": 1324, "user_id": 2884483, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o2j2D.jpg?s=128&g=1", "display_name": "Slade", "link": "https://stackoverflow.com/users/2884483/slade"}, "is_accepted": true, "score": 9, "last_activity_date": 1426997504, "creation_date": 1426997504, "answer_id": 29190903, "question_id": 29190848, "link": "https://stackoverflow.com/questions/29190848/push-onto-a-dereferenced-array-gives-warning/29190903#29190903", "title": "Push onto a dereferenced array gives warning", "body": "<p><code>@$args{\"ARRAY\"}</code> is equivalent to <code>@{$args}{\"ARRAY\"}</code>, not <code>@{$args{\"ARRAY\"}}</code>. From <a href=\"http://perldoc.perl.org/perlref.html#Using-References\" rel=\"noreferrer\"><code>perlref</code>, section \"Using References\"</a>:</p>\n\n<blockquote>\n  <p>Because of being able to omit the curlies for the simple case of <code>$$x</code>,\n      people often make the mistake of viewing the dereferencing symbols as\n      proper operators, and wonder about their precedence. If they were,\n      though, you could use parentheses instead of braces. That's not the\n      case. Consider the difference below; case 0 is a short-hand version of\n      case 1, not case 2:</p>\n\n<pre><code>   $$hashref{\"KEY\"}   = \"VALUE\";       # CASE 0\n   ${$hashref}{\"KEY\"} = \"VALUE\";       # CASE 1\n   ${$hashref{\"KEY\"}} = \"VALUE\";       # CASE 2\n   ${$hashref-&gt;{\"KEY\"}} = \"VALUE\";     # CASE 3\n</code></pre>\n</blockquote>\n"}], "owner": {"reputation": 13757, "user_id": 1270003, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/d5ed9123b92a6e4dffa75f9f6dd9e382?s=128&d=identicon&r=PG&f=1", "display_name": "texasbruce", "link": "https://stackoverflow.com/users/1270003/texasbruce"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3149, "favorite_count": 0, "accepted_answer_id": 29190903, "answer_count": 1, "score": 5, "last_activity_date": 1426997504, "creation_date": 1426996990, "question_id": 29190848, "link": "https://stackoverflow.com/questions/29190848/push-onto-a-dereferenced-array-gives-warning", "title": "Push onto a dereferenced array gives warning", "body": "<p>I have the code:</p>\n\n<pre><code>push @$args{\"ARRAY\"}, \"value\";\n</code></pre>\n\n<p>This gives warning saying:</p>\n\n<pre><code>push on reference is experimental at ...\n</code></pre>\n\n<p>If I just use block around the array:</p>\n\n<pre><code>push @{args{\"ARRAY\"}}, \"value\";\n</code></pre>\n\n<p>Then the warning disappears. Why is this happening?</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1427003625, "post_id": 29190667, "comment_id": 46596825, "body": "Just out of curiosity, what exactly are you trying to achieve? Is this related to your earlier question about using either <code>@ARGV</code> or <code>STDIN</code>? A more concrete example would be nice. In general, I would only use the conditional operator for very simple cases, since it is a little harder to mentally parse than a simple <code>if</code>/<code>else</code>."}, {"owner": {"reputation": 13757, "user_id": 1270003, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/d5ed9123b92a6e4dffa75f9f6dd9e382?s=128&d=identicon&r=PG&f=1", "display_name": "texasbruce", "link": "https://stackoverflow.com/users/1270003/texasbruce"}, "reply_to_user": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1427005133, "post_id": 29190667, "comment_id": 46597067, "body": "@thissuitisblacknot well they are not quite related but they are the problems I had in one project. if else is always a universal solution of course but I just wanna know some dirty hacks of perl"}], "answers": [{"comments": [{"owner": {"reputation": 13757, "user_id": 1270003, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/d5ed9123b92a6e4dffa75f9f6dd9e382?s=128&d=identicon&r=PG&f=1", "display_name": "texasbruce", "link": "https://stackoverflow.com/users/1270003/texasbruce"}, "edited": false, "score": 0, "creation_date": 1427004360, "post_id": 29191022, "comment_id": 46596946, "body": "Parentheses do not create list context? What do they do?"}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "reply_to_user": {"reputation": 13757, "user_id": 1270003, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/d5ed9123b92a6e4dffa75f9f6dd9e382?s=128&d=identicon&r=PG&f=1", "display_name": "texasbruce", "link": "https://stackoverflow.com/users/1270003/texasbruce"}, "edited": false, "score": 0, "creation_date": 1427006091, "post_id": 29191022, "comment_id": 46597217, "body": "@texasbruce In this case, the parentheses are simply used for grouping; they simply affect precedence. Also, don&#39;t confuse list <i>values</i> with list <i>context</i>. See <a href=\"http://perldoc.perl.org/perldata.html#List-value-constructors\" rel=\"nofollow noreferrer\">List value constructors</a> in <code>perldoc perldata</code>."}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "reply_to_user": {"reputation": 13757, "user_id": 1270003, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/d5ed9123b92a6e4dffa75f9f6dd9e382?s=128&d=identicon&r=PG&f=1", "display_name": "texasbruce", "link": "https://stackoverflow.com/users/1270003/texasbruce"}, "edited": false, "score": 1, "creation_date": 1427031498, "post_id": 29191022, "comment_id": 46603015, "body": "@texasbruce Also see <a href=\"http://stackoverflow.com/a/6970812/176646\">ikegami&#39;s answer to &quot;Can the empty list be in scalar context?&quot;</a> and the <a href=\"http://www.perlmonks.org/?node_id=790129\" rel=\"nofollow noreferrer\">Scalar vs List Assignment Operator</a> tutorial on PerlMonks. It&#39;s a common misconception that parentheses create a list; they don&#39;t. The posts I linked explain two frequent sources of confusion: <code>my $foo = ();</code> (the <code>()</code> is not actually a list, although it is sometimes called the null list or empty list); and <code>my ($foo) = ...</code>"}], "tags": [], "owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "is_accepted": false, "score": 2, "last_activity_date": 1427003278, "last_edit_date": 1427003278, "creation_date": 1426998725, "answer_id": 29191022, "question_id": 29190667, "link": "https://stackoverflow.com/questions/29190667/overriding-operator-precedence/29191022#29191022", "title": "Overriding Operator Precedence", "body": "<p>From the section on context in <a href=\"http://perldoc.perl.org/perldata.html#Context\" rel=\"nofollow\"><code>perldoc perldata</code></a>:</p>\n\n<blockquote>\n  <p>Assignment is a little bit special in that it uses its left argument to determine the context for the right argument. <em>Assignment to a scalar evaluates the right-hand side in scalar context</em>, while assignment to an array or hash evaluates the righthand side in list context. Assignment to a list (or slice, which is just a list anyway) also evaluates the right-hand side in list context.</p>\n</blockquote>\n\n<p>(emphasis added)</p>\n\n<p>And from <a href=\"http://perldoc.perl.org/perlop.html#Conditional-Operator\" rel=\"nofollow\"><code>perldoc perlop</code></a>:</p>\n\n<blockquote>\n  <p><strong>Conditional Operator</strong></p>\n  \n  <p>[...]</p>\n  \n  <p>Scalar or list context propagates downward into the 2nd or 3rd argument, whichever is selected.</p>\n\n<pre><code>$a = $ok ? $b : $c;  # get a scalar\n@a = $ok ? @b : @c;  # get an array\n$a = $ok ? @b : @c;  # oops, that's just a count!\n</code></pre>\n</blockquote>\n\n<p>As for precedence, <code>||</code> has a higher precedence than the conditional operator, so</p>\n\n<pre><code>my $result = $foo || $bar ? 0 : 1;\n</code></pre>\n\n<p>is equivalent to</p>\n\n<pre><code>my $result = ($foo || $bar) ? 0 : 1;\n</code></pre>\n\n<p>Note that the parentheses do not create list context, which is a common misconception. They aren't necessary in this case, but they do improve readability, so I would recommend using them.</p>\n\n<p>Again, in</p>\n\n<pre><code>my $result = $foo || ($bar ? 0 : 1);\n</code></pre>\n\n<p>parentheses do not create list context. With <a href=\"http://perldoc.perl.org/perlop.html#C-style-Logical-Or\" rel=\"nofollow\"><code>||</code></a></p>\n\n<blockquote>\n  <p>Scalar or list context propagates down to the right operand if it is evaluated.</p>\n</blockquote>\n\n<p>so <code>($bar ? 0 : 1)</code> is evaluated in scalar context (assuming <code>$foo</code> is a true value; if not, <code>||</code> short-circuits and the RHS isn't evaluated at all).</p>\n"}], "owner": {"reputation": 13757, "user_id": 1270003, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/d5ed9123b92a6e4dffa75f9f6dd9e382?s=128&d=identicon&r=PG&f=1", "display_name": "texasbruce", "link": "https://stackoverflow.com/users/1270003/texasbruce"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 97, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1427003278, "creation_date": 1426995222, "question_id": 29190667, "link": "https://stackoverflow.com/questions/29190667/overriding-operator-precedence", "title": "Overriding Operator Precedence", "body": "<p>I am confused with operator precedence in Perl. I have expression like:</p>\n\n<pre><code>$a || $b ? join \",\", @$b : \"\"\n</code></pre>\n\n<p>I thought Perl would create a list context:</p>\n\n<pre><code>my $result = $a || ($b ? join \",\", @$b : \"\"); \n# I thought (...) would create a list context and make result = 1,\n# but $result is correctly set to the join of @$b\n# Why does it not create list context?\n</code></pre>\n"}, {"tags": ["perl"], "answers": [{"tags": [], "owner": {"reputation": 7958, "user_id": 1069726, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/2cbbae354bb4f5f320b93ab3ad4b0fa1?s=128&d=identicon&r=PG", "display_name": "LeoNerd", "link": "https://stackoverflow.com/users/1069726/leonerd"}, "is_accepted": true, "score": 5, "last_activity_date": 1426984658, "creation_date": 1426984658, "answer_id": 29189704, "question_id": 29189487, "link": "https://stackoverflow.com/questions/29189487/how-to-force-list-context-for-logical-or-operator/29189704#29189704", "title": "How to force list context for logical or operator", "body": "<p>The <code>||</code> operator needs its LHS in scalar context. The same expression can't be both list and scalar at the same time.</p>\n\n<p>The neatest way to do that would be to use the <code>? :</code> ternary operator:</p>\n\n<pre><code>my @expr = @ARGV ? @ARGV : &lt;STDIN&gt;;\n</code></pre>\n\n<p>This way, the first occurence of <code>@ARGV</code> is scalar and thus tests for non-empty, but the second is in list context so yields its actual items.</p>\n"}], "owner": {"reputation": 13757, "user_id": 1270003, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/d5ed9123b92a6e4dffa75f9f6dd9e382?s=128&d=identicon&r=PG&f=1", "display_name": "texasbruce", "link": "https://stackoverflow.com/users/1270003/texasbruce"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 126, "favorite_count": 1, "accepted_answer_id": 29189704, "answer_count": 1, "score": 3, "last_activity_date": 1426984658, "creation_date": 1426982751, "question_id": 29189487, "link": "https://stackoverflow.com/questions/29189487/how-to-force-list-context-for-logical-or-operator", "title": "How to force list context for logical or operator", "body": "<p>I have a script that allows user to enter through either command line argument or stdin so I did:</p>\n\n<pre><code>my @expr = @ARGV || &lt;STDIN&gt;;\n</code></pre>\n\n<p>This did not work as expected. I only got some numbers like 1. I had to use the version below:</p>\n\n<pre><code>my @expr = @ARGV;\nif (!@expr) {\n  @expr = &lt;STDIN&gt;;\n}\n</code></pre>\n\n<p>Why is this happening? How to make the first version to work (if possible)?</p>\n"}, {"tags": ["python", "perl", "command-line", "automation"], "comments": [{"owner": {"reputation": 1581, "user_id": 1529586, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/bdf452acf46deca60edd0ae363e92322?s=128&d=identicon&r=PG", "display_name": "KevinOrr", "link": "https://stackoverflow.com/users/1529586/kevinorr"}, "edited": false, "score": 0, "creation_date": 1426979211, "post_id": 29189059, "comment_id": 46592786, "body": "Are you unit testing? If so, <a href=\"http://stackoverflow.com/questions/32899/how-to-generate-dynamic-parametrized-unit-tests-in-python\">this question</a> may help. Or do you really just want to know how to get that specific pattern of command line flags?"}], "answers": [{"comments": [{"owner": {"reputation": 613, "user_id": 4569096, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/6395ed53ff64900635bdd7c3d50bd256?s=128&d=identicon&r=PG&f=1", "display_name": "jksnw", "link": "https://stackoverflow.com/users/4569096/jksnw"}, "edited": false, "score": 0, "creation_date": 1426981377, "post_id": 29189104, "comment_id": 46593205, "body": "The link has a good answer, it uses python and doesn&#39;t use a load of for loops like my example would do if there were more options. It could also be used if there were arguments in the options."}], "tags": [], "owner": {"reputation": 2165, "user_id": 1368860, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/3d9700582f2d853e0009856a15c425e8?s=128&d=identicon&r=PG", "display_name": "Sigfried", "link": "https://stackoverflow.com/users/1368860/sigfried"}, "is_accepted": false, "score": -1, "last_activity_date": 1426979285, "last_edit_date": 1495542498, "creation_date": 1426979285, "answer_id": 29189104, "question_id": 29189059, "link": "https://stackoverflow.com/questions/29189059/how-to-automate-running-python-code-with-every-combination-of-command-line-optio/29189104#29189104", "title": "How to automate running python code with every combination of command line options", "body": "<p>This <a href=\"https://stackoverflow.com/questions/533905/get-the-cartesian-product-of-a-series-of-lists-in-python\">answer</a> about cartesian products should solve the problem for you in Python.</p>\n"}, {"comments": [{"owner": {"reputation": 613, "user_id": 4569096, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/6395ed53ff64900635bdd7c3d50bd256?s=128&d=identicon&r=PG&f=1", "display_name": "jksnw", "link": "https://stackoverflow.com/users/4569096/jksnw"}, "edited": false, "score": 0, "creation_date": 1426979743, "post_id": 29189106, "comment_id": 46592883, "body": "This is a great answer, but what about if the options are not just true/false but also take an input, like the commented out lines in the example?"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 613, "user_id": 4569096, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/6395ed53ff64900635bdd7c3d50bd256?s=128&d=identicon&r=PG&f=1", "display_name": "jksnw", "link": "https://stackoverflow.com/users/4569096/jksnw"}, "edited": false, "score": 0, "creation_date": 1426979972, "post_id": 29189106, "comment_id": 46592930, "body": "@jksnw: You haven&#39;t said what you want to do in that case, so we can&#39;t really help you. If you add an example of such an option to your question and show the sort of result you require, then we will be able to suggest something."}, {"owner": {"reputation": 26167, "user_id": 736937, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/b3ccac435e2fd4eb9be62da7830d887c?s=128&d=identicon&r=PG", "display_name": "jedwards", "link": "https://stackoverflow.com/users/736937/jedwards"}, "reply_to_user": {"reputation": 613, "user_id": 4569096, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/6395ed53ff64900635bdd7c3d50bd256?s=128&d=identicon&r=PG&f=1", "display_name": "jksnw", "link": "https://stackoverflow.com/users/4569096/jksnw"}, "edited": false, "score": 0, "creation_date": 1426980120, "post_id": 29189106, "comment_id": 46592961, "body": "@jksnw well, you could wrap the option and value in quotes, e.g. <code>mycode.py &quot;-a arg1&quot; &quot;-b arg2&quot; &quot;-c arg3&quot;</code>, then they&#39;d be preserved as strings through to your function -- after that, it would depend on how you were handling command line arguments in the first place (in your code currently)"}, {"owner": {"reputation": 613, "user_id": 4569096, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/6395ed53ff64900635bdd7c3d50bd256?s=128&d=identicon&r=PG&f=1", "display_name": "jksnw", "link": "https://stackoverflow.com/users/4569096/jksnw"}, "edited": false, "score": 0, "creation_date": 1426982445, "post_id": 29189106, "comment_id": 46593427, "body": "Some arguments have an input but there are a finite number of inputs, the code has some if statements such as <code>if opts[&#39;-w&#39;] == &#39;binary&#39;: run some code</code>."}, {"owner": {"reputation": 26167, "user_id": 736937, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/b3ccac435e2fd4eb9be62da7830d887c?s=128&d=identicon&r=PG", "display_name": "jedwards", "link": "https://stackoverflow.com/users/736937/jedwards"}, "reply_to_user": {"reputation": 613, "user_id": 4569096, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/6395ed53ff64900635bdd7c3d50bd256?s=128&d=identicon&r=PG&f=1", "display_name": "jksnw", "link": "https://stackoverflow.com/users/4569096/jksnw"}, "edited": false, "score": 0, "creation_date": 1426987589, "post_id": 29189106, "comment_id": 46594360, "body": "@jksnw what method are you using to go from <code>sys.argv</code> to your <code>opts</code> dictionary?"}, {"owner": {"reputation": 613, "user_id": 4569096, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/6395ed53ff64900635bdd7c3d50bd256?s=128&d=identicon&r=PG&f=1", "display_name": "jksnw", "link": "https://stackoverflow.com/users/4569096/jksnw"}, "edited": false, "score": 0, "creation_date": 1427027888, "post_id": 29189106, "comment_id": 46602010, "body": "<code>opts, args = getopt.getopt(sys.argv[1:], &#39;hrsw:ctpm:l:&#39;)</code> <code>opts = dict(opts)</code>"}, {"owner": {"reputation": 26167, "user_id": 736937, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/b3ccac435e2fd4eb9be62da7830d887c?s=128&d=identicon&r=PG", "display_name": "jedwards", "link": "https://stackoverflow.com/users/736937/jedwards"}, "reply_to_user": {"reputation": 613, "user_id": 4569096, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/6395ed53ff64900635bdd7c3d50bd256?s=128&d=identicon&r=PG&f=1", "display_name": "jksnw", "link": "https://stackoverflow.com/users/4569096/jksnw"}, "edited": false, "score": 0, "creation_date": 1427116867, "post_id": 29189106, "comment_id": 46632229, "body": "@jksnw do any of your options include spaces and require you to wrap them in double quotes?  If not, there is an easy solution, e.g. something like <code>sys.argv = [sys.argv[0]] + &quot; &quot;.join(c).split()</code> -- then your <code>getopt</code> stuff can remain unchanged."}], "tags": [], "owner": {"reputation": 26167, "user_id": 736937, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/b3ccac435e2fd4eb9be62da7830d887c?s=128&d=identicon&r=PG", "display_name": "jedwards", "link": "https://stackoverflow.com/users/736937/jedwards"}, "is_accepted": false, "score": 0, "last_activity_date": 1426980470, "last_edit_date": 1426980470, "creation_date": 1426979310, "answer_id": 29189106, "question_id": 29189059, "link": "https://stackoverflow.com/questions/29189059/how-to-automate-running-python-code-with-every-combination-of-command-line-optio/29189106#29189106", "title": "How to automate running python code with every combination of command line options", "body": "<p>You could do this inside your python file.  Wrap everything in a function, then handle the combinations of command line arguments like:</p>\n\n<pre><code>import sys\nimport itertools\n\nargs = sys.argv[1:]\n\nfor i in range(len(args)+1):\n    for c in itertools.combinations(args, i):\n        print c  # You'd put your function call here\n</code></pre>\n\n<p>With <code>mycode.py -a -b -c</code>, the iterations of <code>c</code> are:</p>\n\n<pre>\n()\n('-a',)\n('-b',)\n('-c',)\n('-a', '-b')\n('-a', '-c')\n('-b', '-c')\n('-a', '-b', '-c')\n</pre>\n\n<p>And with <code>mycode.py -a -b -c -d</code>, the iterations of <code>c</code> are:</p>\n\n<pre>\n()\n('-a',)\n('-b',)\n('-c',)\n('-d',)\n('-a', '-b')\n('-a', '-c')\n('-a', '-d')\n('-b', '-c')\n('-b', '-d')\n('-c', '-d')\n('-a', '-b', '-c')\n('-a', '-b', '-d')\n('-a', '-c', '-d')\n('-b', '-c', '-d')\n('-a', '-b', '-c', '-d')\n</pre>\n\n<p>So your code might then look like:</p>\n\n<pre><code>import sys\nimport itertools\n\ndef your_function(args):\n    print(\"your_function called with args=%s\" % str(args))\n    '''\n    SOME LONG FUNCTION HERE\n    '''\n\n\n# Call your_function on all r-length combinations of command line arguments\n#   where 0 &lt;= r &lt;= len(args)\nif __name__ == \"__main__\":\n    args = sys.argv[1:]\n\n    for i in range(len(args)+1):\n        for c in itertools.combinations(args, i):\n            your_function(c)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 0, "last_activity_date": 1426979608, "creation_date": 1426979608, "answer_id": 29189136, "question_id": 29189059, "link": "https://stackoverflow.com/questions/29189059/how-to-automate-running-python-code-with-every-combination-of-command-line-optio/29189136#29189136", "title": "How to automate running python code with every combination of command line options", "body": "<p>I suggest that you use the <code>combinations</code> function from the Perl <a href=\"https://metacpan.org/module/Algorithm::Combinatorics\" rel=\"nofollow\"><code>Algorithm::Combinatorics</code></a> module on CPAN. It isn't a core module and so will probably need to be installed.</p>\n\n<pre><code>use strict;\nuse warnings;\n\nuse Algorithm::Combinatorics qw/ combinations /;\n\nmy @switches = qw/ -a -b -c /;\n\nfor my $n ( 0 .. @switches ) {\n  for my $combination ( combinations(\\@switches, $n) ) {\n    print join(' ', qw/ python myCode.py /, @$combination), \"\\n\";\n  }\n}\n</code></pre>\n\n<p><strong>output</strong></p>\n\n<pre><code>python myCode.py\npython myCode.py -a\npython myCode.py -b\npython myCode.py -c\npython myCode.py -a -b\npython myCode.py -a -c\npython myCode.py -b -c\npython myCode.py -a -b -c\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 613, "user_id": 4569096, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/6395ed53ff64900635bdd7c3d50bd256?s=128&d=identicon&r=PG&f=1", "display_name": "jksnw", "link": "https://stackoverflow.com/users/4569096/jksnw"}, "is_accepted": false, "score": 0, "last_activity_date": 1427130429, "last_edit_date": 1427130429, "creation_date": 1427128253, "answer_id": 29215441, "question_id": 29189059, "link": "https://stackoverflow.com/questions/29189059/how-to-automate-running-python-code-with-every-combination-of-command-line-optio/29215441#29215441", "title": "How to automate running python code with every combination of command line options", "body": "<p>This is what I ended up doing:</p>\n\n<pre><code>use Math::Cartesian::Product;\ncartesian {system(\"python myCode.py @_\")} [\"\",\"-s\"], [\"-w \\'tf\\'\", \"-w \\'binary\\'\", \"-w \\'tfidf\\'\"];\n</code></pre>\n\n<p>In python itertools.product does what I was looking for:</p>\n\n<pre><code>import itertools\n\nopts_list = [[\"\",\"s\"], [\"tf\",\"binary\",\"tfidf\"]]\n\nprint list(itertools.product(*opts_list))\n</code></pre>\n\n<p>Prints:</p>\n\n<pre><code>[('', 'tf'), ('', 'binary'), ('', 'tfidf'), ('s', 'tf'), ('s', 'binary'), ('s', 'tfidf')]\n</code></pre>\n\n<p>I changed my code slightly to use this method but I suppose each element in the tuple could be concatenated into a string in order to run the options in command line.</p>\n"}], "owner": {"reputation": 613, "user_id": 4569096, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/6395ed53ff64900635bdd7c3d50bd256?s=128&d=identicon&r=PG&f=1", "display_name": "jksnw", "link": "https://stackoverflow.com/users/4569096/jksnw"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 345, "favorite_count": 0, "answer_count": 4, "score": 1, "last_activity_date": 1427130429, "creation_date": 1426978891, "last_edit_date": 1426982228, "question_id": 29189059, "link": "https://stackoverflow.com/questions/29189059/how-to-automate-running-python-code-with-every-combination-of-command-line-optio", "title": "How to automate running python code with every combination of command line options", "body": "<p>I have written some python code that takes command line options. I'd like to automate running every combination, instead of having to manually type all combinations.</p>\n\n<p>At the moment I have a perl script that looks something like this (although with more options an therefore more nested foreach loops):</p>\n\n<pre><code>use Cwd;\n$curdir=getcwd;\n@opt1 = (\"\", \"-s\");\n@opt2 = (\"\",\"-w \\'binary\\'\", \"-w \\'tf\\'\", \"-w \\'tfidf\\'\") #There are arguments but there is a finite amount of them.\n\nforeach $s (@opt1) {\n    foreach $t (@opt2) {\n        $cmd=\"python myCode.py $s $t\";\n        system($cmd);\n    }\n}\n</code></pre>\n\n<p>This results in the following being run <code>python myCode.py -t 'binary'</code>,<code>python myCode.py -t 'tf'</code>,<code>python myCode.py -t 'tfidf'</code>,<code>python myCode.py -s -t 'binary'</code>,<code>python myCode.py -s -t 'tf'</code>,<code>python myCode.py -s -t 'tfidf'</code>.</p>\n\n<p>This seems like a horrible way to do it (considering I actually have many more options), is there a proper or better way?\nI'm open to using python to automate this, I have used perl initially as I have a perl script goes onto to call other programs.</p>\n"}, {"tags": ["sql", "perl", "unix", "awk"], "comments": [{"owner": {"reputation": 10152, "user_id": 2229272, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oisED.png?s=128&g=1", "display_name": "jas", "link": "https://stackoverflow.com/users/2229272/jas"}, "edited": false, "score": 1, "creation_date": 1426977008, "post_id": 29188683, "comment_id": 46592260, "body": "I can&#39;t verify this so I won&#39;t put it as a answer, but I would try closing the previous file before writing to the new one. Maybe it&#39;s an issue of having too many files open. <code>awk &#39;BEGIN{RS=&quot;;&quot;}{ close(&quot;export&quot; i &quot;.sql&quot;); ...</code>"}, {"owner": {"reputation": 3437, "user_id": 471291, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/oIGKn.jpg?s=128&g=1", "display_name": "jbrahy", "link": "https://stackoverflow.com/users/471291/jbrahy"}, "edited": false, "score": 0, "creation_date": 1426977481, "post_id": 29188683, "comment_id": 46592369, "body": "Put it in a answer and I&#39;ll accept it. That was the solution. Thanks!"}, {"owner": {"reputation": 10152, "user_id": 2229272, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oisED.png?s=128&g=1", "display_name": "jas", "link": "https://stackoverflow.com/users/2229272/jas"}, "edited": false, "score": 0, "creation_date": 1426977844, "post_id": 29188683, "comment_id": 46592449, "body": "Awesome. Camel book can stay on the shelf for now."}], "answers": [{"tags": [], "owner": {"reputation": 10152, "user_id": 2229272, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oisED.png?s=128&g=1", "display_name": "jas", "link": "https://stackoverflow.com/users/2229272/jas"}, "is_accepted": true, "score": 1, "last_activity_date": 1426977632, "creation_date": 1426977632, "answer_id": 29188879, "question_id": 29188683, "link": "https://stackoverflow.com/questions/29188683/split-mydumper-sql-file-into-separate-sql-files/29188879#29188879", "title": "split mydumper sql file into separate sql files", "body": "<p>It's likely a problem of having too many files open. Try closing the previous file before writing to the next one. </p>\n\n<pre><code>/bin/awk 'BEGIN{RS=\";\"}{close(\"export\" i \".sql\"); x=\"export.\"++i;} {print $0\";\"&gt; x\".sql\";}' \n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 52821, "user_id": 632407, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/AfGWW.jpg?s=128&g=1", "display_name": "jm666", "link": "https://stackoverflow.com/users/632407/jm666"}, "is_accepted": false, "score": 1, "last_activity_date": 1426980318, "creation_date": 1426980318, "answer_id": 29189214, "question_id": 29188683, "link": "https://stackoverflow.com/questions/29188683/split-mydumper-sql-file-into-separate-sql-files/29189214#29189214", "title": "split mydumper sql file into separate sql files", "body": "<p>TIMTOWTDI. One could be:</p>\n\n<pre><code>perl -0x3b -MPath::Tiny -nE 'path(\"export.@{[++$n]}.sql\")-&gt;spew($_)' \n</code></pre>\n"}], "owner": {"reputation": 3437, "user_id": 471291, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/oIGKn.jpg?s=128&g=1", "display_name": "jbrahy", "link": "https://stackoverflow.com/users/471291/jbrahy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 195, "favorite_count": 0, "accepted_answer_id": 29188879, "answer_count": 2, "score": 0, "last_activity_date": 1426980318, "creation_date": 1426976137, "last_edit_date": 1426977340, "question_id": 29188683, "link": "https://stackoverflow.com/questions/29188683/split-mydumper-sql-file-into-separate-sql-files", "title": "split mydumper sql file into separate sql files", "body": "<p>I am trying to split a file created by mydumper into a single for each SQL statement. The ending delimiter is ; but it is multiline. </p>\n\n<p>I thought I had it with this command line:</p>\n\n<pre><code>/bin/awk 'BEGIN{RS=\";\"}{x=\"export.\"++i;}{print $0\";\"&gt; x\".sql\";}' \n</code></pre>\n\n<p>but the resulting files are not terminated properly. My samples that were much fewer lines worked fine. So my question is, how do I split the SQL file with complete lines? </p>\n\n<p>In my sample files I had this sql repeated and everything worked fine. </p>\n\n<pre><code>insert into table (field) values\n    ('asdf'),\n    ('asdf'),\n    ('asdf'),\n    ('asdf'),\n    ('asdf'),\n    ('asdf'),\n    ('asdf'),\n    ('asdf'),\n    ('asdf'),\n    ('asdf'),\n    ('asdf'),\n    ('asdf'),\n    ('asdf'),\n    ('end');\n</code></pre>\n\n<p>Does awk have some sort of record length limit? </p>\n\n<pre><code>[root@db294 TEST]# wc -l *.sql\n10364 export.66.sql\n10304 export.67.sql\n10209 export.68.sql\n10208 export.69.sql\n10582 export.6.sql\n10207 export.70.sql\n10207 export.71.sql\n 9979 export.72.sql\n 9918 export.73.sql\n 9918 export.74.sql\n 9926 export.75.sql\n 9931 export.76.sql\n10061 export.77.sql\n10225 export.78.sql\n10209 export.79.sql\n10585 export.7.sql\n</code></pre>\n\n<p>Maybe it's time to reopen my Camel book and try Perl vs Awk </p>\n\n<p>Someone please create the tag for mydumper as I don't have 1500 points to create a tag.</p>\n"}, {"tags": ["perl", "session", "session-cookies", "middleware", "plack"], "answers": [{"comments": [{"owner": {"reputation": 5666, "user_id": 734304, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/7c64a3cafb1fd129cd2b98951d624f15?s=128&d=identicon&r=PG", "display_name": "kobame", "link": "https://stackoverflow.com/users/734304/kobame"}, "edited": false, "score": 1, "creation_date": 1427046462, "post_id": 29193510, "comment_id": 46608006, "body": "Although I expected some method calls, it <b>works</b>. My question is, where is this documented? Because in the Plack::Middleware::Session <a href=\"https://metacpan.org/pod/Plack::Middleware::Session#PLACK-REQUEST-OPTIONS\" rel=\"nofollow noreferrer\">are documented some subkeys</a> for the <code>psgix.session.options</code> but the <code>expires</code> is missing. (Here only the <code>expire</code> /without the plural (s)/what is for invalidating the session). So really wondering from where do you know this. By digging in the module sources? Anyway <b>thank you</b> very much."}, {"owner": {"reputation": 28131, "user_id": 1956010, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/bfdcb4596e9da98cccbf9a0069fdff6c?s=128&d=identicon&r=PG", "display_name": "nwellnhof", "link": "https://stackoverflow.com/users/1956010/nwellnhof"}, "reply_to_user": {"reputation": 5666, "user_id": 734304, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/7c64a3cafb1fd129cd2b98951d624f15?s=128&d=identicon&r=PG", "display_name": "kobame", "link": "https://stackoverflow.com/users/734304/kobame"}, "edited": false, "score": 2, "creation_date": 1427049167, "post_id": 29193510, "comment_id": 46608941, "body": "@kobame Yeah, I know this from looking at the source code. I opened a <a href=\"https://github.com/plack/Plack-Middleware-Session/issues/33\" rel=\"nofollow noreferrer\">GitHub issue</a> regarding the missing documentation."}, {"owner": {"reputation": 93, "user_id": 482417, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ee834408bc19156d0d8359ef5406bd1?s=128&d=identicon&r=PG", "display_name": "saberworks", "link": "https://stackoverflow.com/users/482417/saberworks"}, "edited": false, "score": 0, "creation_date": 1478145036, "post_id": 29193510, "comment_id": 68038297, "body": "I wanted to say thanks for the reply; going to give this a try in my app.  The github issue hasn&#39;t had any activity and the framework I&#39;ve been using (Kelp) doesn&#39;t seem to have any options around this."}], "tags": [], "owner": {"reputation": 28131, "user_id": 1956010, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/bfdcb4596e9da98cccbf9a0069fdff6c?s=128&d=identicon&r=PG", "display_name": "nwellnhof", "link": "https://stackoverflow.com/users/1956010/nwellnhof"}, "is_accepted": true, "score": 6, "last_activity_date": 1427194713, "last_edit_date": 1427194713, "creation_date": 1427021855, "answer_id": 29193510, "question_id": 29187503, "link": "https://stackoverflow.com/questions/29187503/how-to-set-the-expiration-time-for-a-cookie-managed-by-plackmiddlewaresessio/29193510#29193510", "title": "How to set the expiration time for a cookie managed by Plack::Middleware::Session?", "body": "<p>You can't change the expiration date directly, but you can force the session middleware to create a new session with a new expiration date like this:</p>\n\n<pre><code>$env-&gt;{'psgix.session.options'}{change_id} = 1;\n$env-&gt;{'psgix.session.options'}{expires}   = $my_expires;\n</code></pre>\n\n<p>If a user logs in, you should change the ID anyway to <a href=\"https://metacpan.org/pod/Plack::Middleware::Session#change_id\" rel=\"nofollow\">prevent session fixation attacks</a>. See <a href=\"https://metacpan.org/pod/Cookie::Baker#expires\" rel=\"nofollow\"><code>Cookie::Baker</code></a> for supported expiration date formats.</p>\n\n<p><strong>EDIT:</strong> If you want to set the default expiration timeout globally, you can build the state object manually and pass the <code>expires</code> parameter to the constructor:</p>\n\n<pre><code>builder {\n    enable 'Session',\n        state =&gt; Plack::Session::State-&gt;new(\n            expires =&gt; $timeout_in_seconds,\n        );\n    $app;\n};\n</code></pre>\n"}], "owner": {"reputation": 5666, "user_id": 734304, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/7c64a3cafb1fd129cd2b98951d624f15?s=128&d=identicon&r=PG", "display_name": "kobame", "link": "https://stackoverflow.com/users/734304/kobame"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 886, "favorite_count": 1, "accepted_answer_id": 29193510, "answer_count": 1, "score": 8, "last_activity_date": 1427194713, "creation_date": 1426968595, "last_edit_date": 1427194203, "question_id": 29187503, "link": "https://stackoverflow.com/questions/29187503/how-to-set-the-expiration-time-for-a-cookie-managed-by-plackmiddlewaresessio", "title": "How to set the expiration time for a cookie managed by Plack::Middleware::Session?", "body": "<p>Now my <code>app.psgi</code> contains (simplified):</p>\n\n<pre><code>builder {\n      enable 'Session', store =&gt; 'File'; #default uses Plack::Session::State::Cookie\n      $app;\n};\n</code></pre>\n\n<p>Later, in the <code>$app</code> I'm using:</p>\n\n<pre><code>my $req = Plack::Request-&gt;new($env);\nmy $session = $req-&gt;session(); #returns env-&gt;{'psgix.session'}\n$session-&gt;{user} = \"name\";\n</code></pre>\n\n<p>It works <strong>ok</strong>, e.g.:</p>\n\n<ul>\n<li>when the user logged in, I store his name in the server-side stored session-file, and the <a href=\"https://metacpan.org/pod/Plack::Middleware::Session\" rel=\"noreferrer\">Plack::Middleware::Session</a> sets an simple session-state-cookie,</li>\n<li>and when the user closing the browser, the cookie is automatically cleared (because the <a href=\"https://metacpan.org/pod/Plack::Session::State::Cookie\" rel=\"noreferrer\">Plack::Session::State::Cookie</a> by default didn't set any expiration for the cookie).</li>\n</ul>\n\n<p>Now, I want implement the \"Remember me\" feature in my login-panel. In this case, the sesion-state-cookie should-not be removed automatically from the browser. This can be done, by using the <code>expires</code> method from the <a href=\"https://metacpan.org/pod/Plack::Session::State::Cookie\" rel=\"noreferrer\">Plack::Session::State::Cookie</a>.</p>\n\n<p><strong>The question:</strong></p>\n\n<p>How I can change the cookie expiration (managed by the <a href=\"https://metacpan.org/pod/Plack::Middleware::Session\" rel=\"noreferrer\">Session</a> middleware) from my <code>$app</code>. With other words, how to call the expire method somewhat here:</p>\n\n<pre><code>my $req = Plack::Request-&gt;new($env);\nmy $session = $req-&gt;session(); #returns env-&gt;{'psgix.session'}\n$session-&gt;{user} = \"name\";\nmy $cookie_state = WHAT_TO_DO_HERE_TO_GET; #the current Plack::Session::State::Cookie object\n$cookie_state-&gt;expire(86400*14); #expire in two weeks\n</code></pre>\n\n<p>If someone needs, here is an working example.</p>\n\n<pre><code>use strict;\nuse warnings;\nuse Plack::Request;\nuse Plack::Response;\nuse Plack::Builder;\nuse Data::Dumper;\n\nmy $app = sub {\n    my $env = shift;\n    my $req = Plack::Request-&gt;new($env);\n    my $session = $req-&gt;session;\n    my $res = Plack::Response-&gt;new(200);\n    $res-&gt;content_type('text/html');\n    my $link = $session-&gt;{user}\n            ? q{ &lt;a href=\"/logout\"&gt;logout&lt;/a&gt;}\n            : q{ &lt;a href=\"/login\"&gt;login&lt;/a&gt;}\n            ;\n    $res-&gt;body([\"Session user:\", $session-&gt;{user}, \"&lt;br&gt;$link\"]);\n    return $res-&gt;finalize;\n};\n\nmy $login = sub {\n    my $env = shift;\n    my $req = Plack::Request-&gt;new($env);\n    my $session = $req-&gt;session;\n\n    $session-&gt;{user} = \"some\";\n    #how to set here the session-state-cookie expiration?\n\n    my $res = Plack::Response-&gt;new();\n    $res-&gt;redirect(\"/\", 302);\n    return $res-&gt;finalize;\n};\n\nmy $logout = sub {\n    my $env = shift;\n    my $req = Plack::Request-&gt;new($env);\n    my $session = $req-&gt;session;\n    delete $session-&gt;{user};\n    my $res = Plack::Response-&gt;new();\n    $res-&gt;redirect(\"/\", 302);\n    return $res-&gt;finalize;\n};\n\nbuilder {\n    enable 'Session', store =&gt; 'File';\n    mount \"/login\" =&gt; $login; \n    mount \"/logout\" =&gt; $logout; \n    mount \"/favicon.ico\" =&gt; sub { return [ 404, ['Content-Type' =&gt; 'text/html'], [ '404 Not Found' ] ] };\n    mount \"/\" =&gt; $app; \n};\n</code></pre>\n"}, {"tags": ["perl", "data-structures", "tree"], "answers": [{"tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": false, "score": 1, "last_activity_date": 1426963286, "creation_date": 1426963286, "answer_id": 29186574, "question_id": 29186486, "link": "https://stackoverflow.com/questions/29186486/implementing-tree-in-perl-children-cut-off/29186574#29186574", "title": "Implementing Tree in Perl - Children cut off", "body": "<p><code>shift</code> only removes one element from an array. Populate <code>@array</code> without it:</p>\n\n<pre><code> my @array = @_;\n</code></pre>\n\n<p>But, you can't store an array in a hash directly, you have to use a reference:</p>\n\n<pre><code>return bless { content =&gt; $content,\n               array   =&gt; \\@array,\n             }, $class;\n</code></pre>\n\n<p>which you then have to dereference:</p>\n\n<pre><code>my @array = @{ $self-&gt;{array} };\nreturn scalar @array\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": true, "score": 5, "last_activity_date": 1426963964, "last_edit_date": 1426963964, "creation_date": 1426963663, "answer_id": 29186647, "question_id": 29186486, "link": "https://stackoverflow.com/questions/29186486/implementing-tree-in-perl-children-cut-off/29186647#29186647", "title": "Implementing Tree in Perl - Children cut off", "body": "<p>The main problem is that you can't pass arrays as a single value\u2014you have to pass a reference instead.</p>\n\n<p>Also, you should <em>never</em> comment out <code>use strict</code> and <code>use warnings</code>. They are valuable debugging tools, and if you are getting error messages with them enabled you should fix the errors that they are flagging instead.</p>\n\n<p>Here's a working <code>Tree.pm</code></p>\n\n<pre><code>use strict;\nuse warnings;\n\npackage Tree;\n\nsub new {\n    my $class = shift;\n    my ($content, $array) = @_;\n    return bless { content =&gt; $content, array =&gt; $array }, $class;\n}\n\nsub num_children {\n    my $self = shift;\n    my $array = $self-&gt;{array};\n    return scalar @$array;\n}\n\n1;\n</code></pre>\n\n<p>and the calling program <code>tree_test.pl</code>. Note that you should <code>use</code> rather than <code>require</code> a module.</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\n\nuse Tree;\n\nmy @list = map { Tree-&gt;new($_) } ('#', '*', '-', '.');\n\nmy $ttt = Tree-&gt;new('+', \\@list);\n\nprint $ttt-&gt;num_children, \"\\n\";\n</code></pre>\n\n<p><strong>output</strong></p>\n\n<pre><code>4\n</code></pre>\n"}], "owner": {"reputation": 2790, "user_id": 998232, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/b6fa9d9ed37dac0c07ecdadbec4e4228?s=128&d=identicon&r=PG", "display_name": "Joachim", "link": "https://stackoverflow.com/users/998232/joachim"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 73, "favorite_count": 0, "accepted_answer_id": 29186647, "answer_count": 2, "score": 0, "last_activity_date": 1426963964, "creation_date": 1426962837, "question_id": 29186486, "link": "https://stackoverflow.com/questions/29186486/implementing-tree-in-perl-children-cut-off", "title": "Implementing Tree in Perl - Children cut off", "body": "<p>I'm to learn Perl for a job interview over weekend. In order to get a deeper understanding I'm trying to implement a tree class.</p>\n\n<pre><code>#use strict;\n#use warnings;\n\npackage Tree;\n\nsub new {\n    my $class   = shift @_;\n    my $content = shift @_;\n    my @array   = shift @_;\n    return bless { \"content\" =&gt; $content, \"array\" =&gt; @array }, $class;\n}\n\nsub num_children {\n    my $self = shift @_;\n    my @array = $self-&gt;{\"array\"};\n    return scalar @array;\n}\n\nreturn 1;\n</code></pre>\n\n<p>To test the (faulty) tree class I have implemented the following test script.</p>\n\n<pre><code>#!/usr/bin/perl\n\nrequire Tree;\n\nmy $t = Tree-&gt;new(\"#\", undef);\nmy $tt = Tree-&gt;new(\"*\", undef);\nmy $tttt = Tree-&gt;new(\"-\", undef);\nmy $ttttt = Tree-&gt;new(\".\", undef);\n\nmy @list = ();\npush @list, $tt;\npush @list, $t;\npush @list, $tttt;\npush @list, $ttttt;\n\n\nmy $ttt = Tree-&gt;new(\"+\", @list);\n\nprint $ttt-&gt;num_children();\n</code></pre>\n\n<p>Unfortunately the output is <code>1</code> instead of my expection of <code>4</code>. I assume the array is somehow cut off or unvoluntarily converted to a scalar. Any Ideas? </p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1426958646, "post_id": 29184377, "comment_id": 46586769, "body": "Please clarify. For the first row, you want to subtract 7.853 from 1003.08 giving 995.227. Rounding that and prefixing <code>i</code> gives you <code>i995</code>. Is that correct? Do I understand correctly that you want to create a variable <code>$i995</code> from that? If so then you should be using a hash instead."}, {"owner": {"reputation": 141, "user_id": 4097244, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f178b6040f6d39295fefaf21edf0c448?s=128&d=identicon&r=PG&f=1", "display_name": "BrianB", "link": "https://stackoverflow.com/users/4097244/brianb"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1426959872, "post_id": 29184377, "comment_id": 46587126, "body": "My mistake  it is 89 - 4.86 (col 3 - col 6).  I tried the script shown below:         use strict; use warnings; my $in_file = &#39;tortest.csv&#39;;  while ( $in_file ) {   my @fields = split /,/;   printf &quot;i%.0f\\n&quot;, @fields[3] - @fields[6]; }   and get got the following error Use of uninitialized value in subtraction (-) at intend_parce.pl &quot;"}], "answers": [{"comments": [{"owner": {"reputation": 141, "user_id": 4097244, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f178b6040f6d39295fefaf21edf0c448?s=128&d=identicon&r=PG&f=1", "display_name": "BrianB", "link": "https://stackoverflow.com/users/4097244/brianb"}, "edited": false, "score": 0, "creation_date": 1426960232, "post_id": 29185747, "comment_id": 46587215, "body": "My mistake  it is 89 - 4.86 (col 3 - col 6).  I tried the script shown below:            use strict; use warnings; my $in_file = &#39;tortest.csv&#39;;  while ( $in_file ) {   my @fields = split /,/;   printf &quot;i%.0f\\n&quot;, @fields[3] - @fields[6]; }   and get got the following error Use of uninitialized value in subtraction (-) at intend_parce.pl &quot;"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 141, "user_id": 4097244, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f178b6040f6d39295fefaf21edf0c448?s=128&d=identicon&r=PG&f=1", "display_name": "BrianB", "link": "https://stackoverflow.com/users/4097244/brianb"}, "edited": false, "score": 0, "creation_date": 1426960631, "post_id": 29185747, "comment_id": 46587332, "body": "Okay I&#39;ve altered my solution. The second line gives <code>89 - 4.86 = 84.14</code>, so the string is <code>i84</code>. Is that right? Your own solution is wrong because you have to <i>open</i> the input file and read each line from the file handle that you get."}, {"owner": {"reputation": 141, "user_id": 4097244, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f178b6040f6d39295fefaf21edf0c448?s=128&d=identicon&r=PG&f=1", "display_name": "BrianB", "link": "https://stackoverflow.com/users/4097244/brianb"}, "edited": false, "score": 0, "creation_date": 1426964159, "post_id": 29185747, "comment_id": 46588489, "body": "That works great THANKS.  But how would I only get the value for the line of 03:00:00 or a different time?"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 141, "user_id": 4097244, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f178b6040f6d39295fefaf21edf0c448?s=128&d=identicon&r=PG&f=1", "display_name": "BrianB", "link": "https://stackoverflow.com/users/4097244/brianb"}, "edited": false, "score": 0, "creation_date": 1426964325, "post_id": 29185747, "comment_id": 46588556, "body": "It&#39;s hard to help without better understanding of your application, but in general terms you would qualify the <code>print</code> line. Something like <code>printf &quot;i%.0f\\n&quot;, $fields[2] - $fields[5] if $fields[1] eq &#39;03:00:00&#39;</code>"}, {"owner": {"reputation": 141, "user_id": 4097244, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f178b6040f6d39295fefaf21edf0c448?s=128&d=identicon&r=PG&f=1", "display_name": "BrianB", "link": "https://stackoverflow.com/users/4097244/brianb"}, "edited": false, "score": 0, "creation_date": 1426968392, "post_id": 29185747, "comment_id": 46589814, "body": "That does work. What I a doing is using perl to run a number of Mysql routines. Initially I was trying do the subtraction for the above columns and direct the output to a variable. The &quot;i&quot; value represents the column of another table but YOU CANT use a variable to represent a column in sql. You can for data and for table names.  So i was going to move it out to the perl script and introduce the dynamic variable there, which should work."}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "reply_to_user": {"reputation": 141, "user_id": 4097244, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f178b6040f6d39295fefaf21edf0c448?s=128&d=identicon&r=PG&f=1", "display_name": "BrianB", "link": "https://stackoverflow.com/users/4097244/brianb"}, "edited": false, "score": 1, "creation_date": 1426975586, "post_id": 29185747, "comment_id": 46591892, "body": "@BrianB You mean you have columns in your database named <code>i60</code>, <code>i84</code>, <code>i92</code>, etc? That sounds like a poor schema design. What does <code>i84</code> actually <i>represent</i>? Anyway, this sounds like an <a href=\"http://meta.stackexchange.com/questions/66377/what-is-the-xy-problem\">XY problem</a>. That&#39;s okay, they&#39;re hard to avoid sometimes, but you&#39;ll probably get better answers if you take a step back and explain the problem you&#39;re actually trying to solve instead of how you&#39;re trying to solve it."}, {"owner": {"reputation": 141, "user_id": 4097244, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f178b6040f6d39295fefaf21edf0c448?s=128&d=identicon&r=PG&f=1", "display_name": "BrianB", "link": "https://stackoverflow.com/users/4097244/brianb"}, "edited": false, "score": 1, "creation_date": 1426996933, "post_id": 29185747, "comment_id": 46595801, "body": "Its not the design this is an imported index that is necessary (a x/y calculator - so yes).  So the x matched with y provides a fixed value essential to the overall calculation. The subtraction was actually being done within Mysql between two columns and I was using concat to create i24. This value would be then be declared as the @variable representing a i24 column. My hope is to conduct this process in perl - the variable will be conducted outside of sql.  THANKS FOR YOUR HELP!"}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 1, "last_activity_date": 1426962040, "last_edit_date": 1426962040, "creation_date": 1426958873, "answer_id": 29185747, "question_id": 29184377, "link": "https://stackoverflow.com/questions/29184377/use-perl-to-create-variable-names-from-the-difference-between-two-csv-columns/29185747#29185747", "title": "use Perl to create variable names from the difference between two CSV columns", "body": "<p>Here's what I think you mean, <strike>however I don't see how you get <code>i84</code> from your data</strike>.</p>\n\n<p>As for <em>\"The resulting value I need to turn into a variable\"</em> I think you mean to create a variable like <strike><code>$i995</code></strike> <code>i84</code>, but you don't say what you want to do with it and you would be better off using that string as a hash key.</p>\n\n<pre><code>use strict;\nuse warnings;\n\nmy $in_file = 'tortest.csv';\nopen my $fh, '&lt;', $in_file or die qq{Unable to open \"$in_file\" for input: $!};\n\nwhile ( &lt;$fh&gt; ) {\n  chomp;\n  my @fields = split /,/;\n  printf \"i%.0f\\n\", $fields[2] - $fields[5];\n}\n</code></pre>\n\n<p><strong>output</strong></p>\n\n<pre><code>i60\ni84\ni92\ni92\ni93\ni86\ni75\ni72\n</code></pre>\n\n<hr>\n\n<p><strong>Update</strong></p>\n\n<p>If you prefer to use <code>map</code> then it can be done like this.</p>\n\n<pre><code>use strict;\nuse warnings;\n\nmy $in_file = 'tortest.csv';\nopen my $fh, '&lt;', $in_file or die qq{Unable to open \"$in_file\" for input: $!};\n\nmy @values = map {\n  chomp;\n  my @fields = split /,/;\n  sprintf \"i%.0f\", $fields[2] - $fields[5];\n} &lt;$fh&gt;;\n\nprint \"$_\\n\" for @values;\n</code></pre>\n\n<p>The output is identical to that of the program above.</p>\n"}], "owner": {"reputation": 141, "user_id": 4097244, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f178b6040f6d39295fefaf21edf0c448?s=128&d=identicon&r=PG&f=1", "display_name": "BrianB", "link": "https://stackoverflow.com/users/4097244/brianb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 81, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1426962846, "creation_date": 1426951177, "last_edit_date": 1426962846, "question_id": 29184377, "link": "https://stackoverflow.com/questions/29184377/use-perl-to-create-variable-names-from-the-difference-between-two-csv-columns", "title": "use Perl to create variable names from the difference between two CSV columns", "body": "<p>I am trying to select the value from time <code>03:00:00</code> and subtract column 6 (4.86) from column 3 (89). (This is based on the second column, time.) The resulting value I need to turn into a variable name by appending letter <code>i</code> as a prefix:</p>\n\n<pre><code>2015-03-17,00:00:00,68,1003.08,7.85,7.853,\n2015-03-17,03:00:00,89,1003.1,4.857,4.86,\n2015-03-17,06:00:00,96,1000.74,3.78,3.782,\n2015-03-17,09:00:00,95,999.48,3.2,3.2,\n2015-03-17,12:00:00,95,1001.42,2.02,2.024,\n2015-03-17,15:00:00,86,1005.77,0.49700000000001,0.5,\n2015-03-17,18:00:00,75,1008.88,-0.13,-0.12899999999996,\n2015-03-17,21:00:00,72,1010.85,-0.12199999999996,-0.12,\n</code></pre>\n\n<p>e.g. From the line with <code>03:00:00</code> in the second column, calculate <code>ROUNDED(col3 - col6)</code> (84) and then <code>CONCAT('i', value)</code> (if this was MySQL)</p>\n\n<p><code>@subvalue</code> would be <code>i84</code></p>\n\n<p>What I have:</p>\n\n<pre><code>use strict;\nuse warnings;\n\nuse Text::CSV;\n\nmy $csv = Text::CSV_XS-&gt;new ({ binary =&gt; 1, auto_diag =&gt; 1 });\nmy $in_file = 'file.csv';      \nopen my $fh, '&lt;', $in_file or die \"could not open $in_file: $!\\n\";\n\nmy @column = map { $_-&gt;[2] } @{ $csv-&gt;getline_all($fh) };\nprint @column;\n\n}\n</code></pre>\n\n<p>This obviously is extracting only a single column. For the appending I was looking at using join or even system ( \"paste -d, since its in Linux)</p>\n"}]