[{"tags": ["bash", "perl", "awk", "sed"], "comments": [{"owner": {"reputation": 589595, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 3, "creation_date": 1510182543, "post_id": 47190954, "comment_id": 81331931, "body": "StackOverflow expects you to <a href=\"http://meta.stackoverflow.com/questions/261592\">try to solve your own problem first</a>, and we also <a href=\"https://softwareengineering.meta.stackexchange.com/questions/6166\">don&#39;t answer homework questions</a>. Please update your question to show what you have already tried in a <a href=\"http://stackoverflow.com/help/mcve\">minimal, complete, and verifiable example</a>. For further information, please see <a href=\"http://stackoverflow.com/help/how-to-ask\">how to ask good questions</a>, and take the <a href=\"http://stackoverflow.com/tour\">tour of the site</a> :)"}, {"owner": {"reputation": 589595, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 2, "creation_date": 1510182587, "post_id": 47190954, "comment_id": 81331947, "body": "Looks like you also need to remove the indentation at the beginning of each line. Or was that a copying error?"}], "answers": [{"tags": [], "owner": {"reputation": 2784, "user_id": 8413636, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d8c46d1ea221e93d32a1b3d2ee354cae?s=128&d=identicon&r=PG&f=1", "display_name": "zzxyz", "link": "https://stackoverflow.com/users/8413636/zzxyz"}, "is_accepted": false, "score": -3, "last_activity_date": 1510182575, "creation_date": 1510182575, "answer_id": 47191271, "question_id": 47190954, "link": "https://stackoverflow.com/questions/47190954/how-can-i-remove-unnecessary-new-lines/47191271#47191271", "title": "How can I remove unnecessary new lines?", "body": "<p>This is a grotesque answer, but it's an answer:</p>\n\n<pre><code>perl -pi -e 's/\\n//g' input_file\n</code></pre>\n\n<p>will get rid of all your newlines</p>\n\n<pre><code>perl -pi -e 's/((.*?\\^){8})/$1\\n/g' input_file\n</code></pre>\n\n<p>Will add a newline for every 8th ^.</p>\n\n<p>I suspect an awk solution is going to be <em>way</em> cleaner, and even my perl solution is ridiculous, but this is something.</p>\n"}, {"comments": [{"owner": {"reputation": 2784, "user_id": 8413636, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d8c46d1ea221e93d32a1b3d2ee354cae?s=128&d=identicon&r=PG&f=1", "display_name": "zzxyz", "link": "https://stackoverflow.com/users/8413636/zzxyz"}, "edited": false, "score": 0, "creation_date": 1510183584, "post_id": 47191368, "comment_id": 81332305, "body": "Yeah, this makes me want to claw my eyes out a lot less than my solution.  I need to learn awk."}], "tags": [], "owner": {"reputation": 205702, "user_id": 7552, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b60298053f87465641c1b1192338c8cd?s=128&d=identicon&r=PG", "display_name": "glenn jackman", "link": "https://stackoverflow.com/users/7552/glenn-jackman"}, "is_accepted": true, "score": 0, "last_activity_date": 1510183110, "creation_date": 1510183110, "answer_id": 47191368, "question_id": 47190954, "link": "https://stackoverflow.com/questions/47190954/how-can-i-remove-unnecessary-new-lines/47191368#47191368", "title": "How can I remove unnecessary new lines?", "body": "<p>I'm not accounting for possible incorrect leading whitespace in the sample input. If there are 8 <code>^</code>, there should be 9 fields per record.</p>\n\n<pre><code>awk -F'^' '{\n    # keep concatenating lines while there are fewer than 9 fields\n    while (NF &lt; 9) {getline next_line; $0 = $0 next_line}\n    print\n}' file\n</code></pre>\n\n\n\n<pre><code>    TEST1^2017-11-16^D^N^23:50^123^^^\n    TEST1^2017-11-17^D^N^23:50^^123^ALL^\n    TEST1^2017-11-18^D^N^23:50^^^12345    ,123456    ,12    ,1234    ,12345678    ,1    ,123    ,12345    ,12345    ,12345    ,123    ,1234567890    ,1234    ,1234    ,1234567    ,1234567^\n    TEST2^2017-11-16^D^N^23:50^^^^\n    TEST2^2017-11-17^D^N^23:50^^^^\n    TEST2^2017-11-18^D^N^23:50^^^^\n    TEST3^2017-11-23^D^N^23:50^^^^\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 2784, "user_id": 8413636, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d8c46d1ea221e93d32a1b3d2ee354cae?s=128&d=identicon&r=PG&f=1", "display_name": "zzxyz", "link": "https://stackoverflow.com/users/8413636/zzxyz"}, "edited": false, "score": 0, "creation_date": 1510183729, "post_id": 47191442, "comment_id": 81332346, "body": "How does this know to wait for the 8th ^ ?"}, {"owner": {"reputation": 62252, "user_id": 1435869, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TrEd9.jpg?s=128&g=1", "display_name": "karakfa", "link": "https://stackoverflow.com/users/1435869/karakfa"}, "reply_to_user": {"reputation": 2784, "user_id": 8413636, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d8c46d1ea221e93d32a1b3d2ee354cae?s=128&d=identicon&r=PG&f=1", "display_name": "zzxyz", "link": "https://stackoverflow.com/users/8413636/zzxyz"}, "edited": false, "score": 0, "creation_date": 1510183842, "post_id": 47191442, "comment_id": 81332375, "body": "it doesn&#39;t.  Based on your structure the incorrect line-breaks happen within a field."}, {"owner": {"reputation": 2784, "user_id": 8413636, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d8c46d1ea221e93d32a1b3d2ee354cae?s=128&d=identicon&r=PG&f=1", "display_name": "zzxyz", "link": "https://stackoverflow.com/users/8413636/zzxyz"}, "edited": false, "score": 0, "creation_date": 1510183985, "post_id": 47191442, "comment_id": 81332410, "body": "ah, got it.  not mine, btw.  I&#39;m the perl answer :)"}], "tags": [], "owner": {"reputation": 62252, "user_id": 1435869, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TrEd9.jpg?s=128&g=1", "display_name": "karakfa", "link": "https://stackoverflow.com/users/1435869/karakfa"}, "is_accepted": false, "score": 0, "last_activity_date": 1510184080, "last_edit_date": 1510184080, "creation_date": 1510183548, "answer_id": 47191442, "question_id": 47190954, "link": "https://stackoverflow.com/questions/47190954/how-can-i-remove-unnecessary-new-lines/47191442#47191442", "title": "How can I remove unnecessary new lines?", "body": "<p><code>awk</code> to the rescue!</p>\n\n<p>I think you just need this</p>\n\n<pre><code>$ awk -v RS= '{print gensub(\"([^^])\\n\",\"\\1\",\"g\")}' file\n\nTEST1^2017-11-16^D^N^23:50^123^^^\nTEST1^2017-11-17^D^N^23:50^^123^ALL^\nTEST1^2017-11-18^D^N^23:50^^^1234,12345,1,123,1234567,,12,1234,1234,1234,12,123456789,123,123,123456,1234567^\nTEST2^2017-11-16^D^N^23:50^^^^\nTEST2^2017-11-17^D^N^23:50^^^^\nTEST2^2017-11-18^D^N^23:50^^^^\nTEST3^2017-11-23^D^N^23:50^^^^\n</code></pre>\n\n<p>if my assumption is not correct and line breaks can happen anywhere, this is probably the simplest solution</p>\n\n<pre><code>$ &lt;file tr -d '\\n' | sed -E 's/([^^]*\\^){8}/&amp;\\n/g'\n</code></pre>\n"}], "owner": {"reputation": 41, "user_id": 5757911, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/11cf0489c16f67f39e52ee0be87d9a71?s=128&d=identicon&r=PG&f=1", "display_name": "MartinusP", "link": "https://stackoverflow.com/users/5757911/martinusp"}, "delete_vote_count": 1, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 133, "favorite_count": 1, "closed_date": 1510183773, "accepted_answer_id": 47191368, "answer_count": 3, "score": -3, "last_activity_date": 1510184080, "creation_date": 1510180929, "question_id": 47190954, "link": "https://stackoverflow.com/questions/47190954/how-can-i-remove-unnecessary-new-lines", "closed_reason": "Needs more focus", "title": "How can I remove unnecessary new lines?", "body": "<p>I have a file on AIX.\nI would like to remove the unnecessary new lines, but at the same time give a new line after the eighth character ^ </p>\n\n<pre><code>cat file\n\n    TEST1^2017-11-16^D^N^23:50^123^^^\n    TEST1^2017-11-17^D^N^23:50^^123^ALL^\n    TEST1^2017-11-18^D^N^23:50^^^12345\n    ,123456\n    ,12\n    ,1234\n    ,12345678\n    ,1\n    ,123\n    ,12345\n    ,12345\n    ,12345\n    ,123\n    ,1234567890\n    ,1234\n    ,1234\n    ,1234567\n    ,1234567^\n    TEST2^2017-11-16^D^N^23:50^^^^\n    TEST2^2017-11-17^D^N^23:50^^^^\n    TEST2^2017-11-18^D^N^23:50^^^^\n    TEST3^2017-11-23^D^N^23:50^^^^\n</code></pre>\n\n<p>And I need this:</p>\n\n<pre><code>TEST1^2017-11-16^D^N^23:50^123^^^\nTEST1^2017-11-17^D^N^23:50^^123^ALL^\nTEST1^2017-11-18^D^N^23:50^^^12345,123456,12,1234,12345678,1,123,12345,12345,12345,123,1234567890,1234,1234,1234567,1234567^\nTEST2^2017-11-16^D^N^23:50^^^^\nTEST2^2017-11-17^D^N^23:50^^^^\nTEST2^2017-11-18^D^N^23:50^^^^\nTEST3^2017-11-23^D^N^23:50^^^^\n</code></pre>\n\n<p>please help</p>\n"}, {"tags": ["perl", "awk", "sed", "extract"], "answers": [{"tags": [], "owner": {"reputation": 32379, "user_id": 802365, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/2fe665d956e0376411350d79379848c9?s=128&d=identicon&r=PG", "display_name": "&#201;douard Lopez", "link": "https://stackoverflow.com/users/802365/%c3%89douard-lopez"}, "is_accepted": false, "score": -2, "last_activity_date": 1510169131, "creation_date": 1510169131, "answer_id": 47188051, "question_id": 47186517, "link": "https://stackoverflow.com/questions/47186517/how-to-move-comment-to-new-file-with-awk-sed-perl-etc/47188051#47188051", "title": "How to move comment to new file with awk/sed/perl/etc.?", "body": "<p>I implement a solution myself</p>\n\n<pre><code>#!/usr/bin/env bash\n# USAGE\n#   ## Development\n#\n#      # single file\n#      bash ./scripts/extract-md.bash src/base/_typography.scss\n#\n#      # all files\n#      bash ./scripts/extract-md.bash src/base/_typography.scss\n#\n#   ## production (override files)\n#\n#      export PRODUCTION=true\n#      bash ./scripts/extract-md.bash\n\nshopt -s globstar\n\nstart() {\n  for legacy in $legacies; do\n    directory=\"${legacy%/*}\"\n    filename=\"${legacy##*/}\"\n\n    new_filename=\"${filename//.scss/.md}\"\n    documentation=\"${directory}/${new_filename}\"\n    extract_comment \"$legacy\" \"$documentation\"\n\n    stylesheet=\"${1//.scss/.new.scss}\"\n    extract_code \"$legacy\" \"$stylesheet\"\n    [[ $PRODUCTION ]] &amp;&amp; mv \"$stylesheet\" \"$legacy\"\n  done\n}\n\nextract_comment() {\n  local legacy=\"$1\"\n  local documentation=\"$2\"\n  awk '/^\\/\\*/{flag=1} flag; /^\\s?\\*\\//{print;flag=0}' \"$legacy\" \\\n  | perl -p -e 's/\\/[\\*]+//g' \\\n  | perl -p -e 's/^\\s*[\\*]?[ \\/]?//g' \\\n  &gt; \"$documentation\"\n}\n\nextract_code() {\n  local legacy=\"$1\"\n  local stylesheet=\"$2\"\n  awk 'BEGIN{flag=1}/^\\/\\*/{flag=0}; /^\\s?\\*\\//{flag=1; next}flag' \"$legacy\" \\\n  &gt; \"$stylesheet\"\n}\n\nlegacies=${1:-src/**/*.scss}\nstart $legacies\n</code></pre>\n"}], "owner": {"reputation": 32379, "user_id": 802365, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/2fe665d956e0376411350d79379848c9?s=128&d=identicon&r=PG", "display_name": "&#201;douard Lopez", "link": "https://stackoverflow.com/users/802365/%c3%89douard-lopez"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 61, "favorite_count": 0, "answer_count": 1, "score": -6, "last_activity_date": 1510169131, "creation_date": 1510163669, "question_id": 47186517, "link": "https://stackoverflow.com/questions/47186517/how-to-move-comment-to-new-file-with-awk-sed-perl-etc", "title": "How to move comment to new file with awk/sed/perl/etc.?", "body": "<p>I want to extract comment from SCSS file put them on a new markdown file and remove the comments from original file.</p>\n\n<h2>file.scss</h2>\n\n<pre><code>/***\n * # Typography\n\n * We use\n * [Roboto](https://fonts.google.com/specimen/Roboto)\n */\n\n/**\n * Body typography:\n * `p`\n *\n *     @example\n *     p This is a paragraph with #[strong bold ]&amp;nbsp;and#[em italic ]&amp;nbsp;styles.&lt;/p&gt;\n*/\nbody {\n  color: $base-font-color;\n}\n\n/**\n * Heading 1:\n * `h1` `.h1`\n */\nh1,\n.h1 {\n  @include h1;\n}\n</code></pre>\n\n<h2>Expected result</h2>\n\n<p>At the end of the process I would like to have:</p>\n\n<h3>Comments.md</h3>\n\n<pre><code># Typography\n\n* We use\n[Roboto](https://fonts.google.com/specimen/Roboto)\n\n Body typography:\n `p`\n\n     @example\n     p This is a paragraph with #[strong bold ]&amp;nbsp;and#[em italic ]&amp;nbsp;styles.&lt;/p&gt;\n\n  Heading 1:\n `h1` `.h1`\n</code></pre>\n\n<h3>file.scss</h3>\n\n<pre><code>body {\n  color: $base-font-color;\n}\n\nh1,\n.h1 {\n  @include h1;\n}\n</code></pre>\n\n<h3>Question</h3>\n\n<p>How can I do that with <code>awk</code>, <code>perl</code>, <code>sed</code> or other tools?</p>\n"}, {"tags": ["perl", "hash", "counting"], "comments": [{"owner": {"reputation": 862, "user_id": 1560126, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/8cebd478b6291f992ce5b2547b9c36f3?s=128&d=identicon&r=PG", "display_name": "ale10ander", "link": "https://stackoverflow.com/users/1560126/ale10ander"}, "edited": false, "score": 1, "creation_date": 1510163907, "post_id": 47186153, "comment_id": 81322201, "body": "You&#39;ll have to show an attempt. Stackoverflow will help you with coding problems, it will not write code for you. Add your placeholder code and you&#39;ll get better help."}], "answers": [{"comments": [{"owner": {"reputation": 47, "user_id": 8908532, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/36055d44d0fc35a955aeaa075ccd166c?s=128&d=identicon&r=PG&f=1", "display_name": "Mikster", "link": "https://stackoverflow.com/users/8908532/mikster"}, "edited": false, "score": 0, "creation_date": 1510167262, "post_id": 47186294, "comment_id": 81324173, "body": "Thanks, ikegami! This is exactly what I needed."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 2, "last_activity_date": 1510163379, "last_edit_date": 1510163379, "creation_date": 1510162894, "answer_id": 47186294, "question_id": 47186153, "link": "https://stackoverflow.com/questions/47186153/counting-sequences-in-string/47186294#47186294", "title": "Counting sequences in string", "body": "<pre><code>for my $i (0..length($s)-$word_length) {\n   my $word = substr($s, $i, $word_length);\n   ++$counts{$word};\n}\n</code></pre>\n\n<p>(The hash contains multiple counts, so I renamed it to <code>%counts</code>.)</p>\n"}, {"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 1, "last_activity_date": 1510168705, "creation_date": 1510168705, "answer_id": 47187911, "question_id": 47186153, "link": "https://stackoverflow.com/questions/47186153/counting-sequences-in-string/47187911#47187911", "title": "Counting sequences in string", "body": "<p>This is most concise using a global regex match.</p>\n\n<p>The following code finds all positions in the string <code>$s</code> that are followed by two \"word\" characters (alphanumeric or underscore, which should be sufficient if your data is well-behaved) captures those characters in <code>$1</code> and increments the corresponding field of the <code>%counts</code> hash. The number of characters to be captured is represented by <code>$n</code> which is interpolated into the regex pattern</p>\n\n<p>Note that there are three occurrences of <code>GG</code>, not two, because the subsequence <code>GGG</code> contains two occurrences</p>\n\n<pre><code>use strict;\nuse warnings 'all';\n\nuse Data::Dumper;\n\nmy $s = 'AGGAACAAAAGGG';\n\nmy $n = 2;\n\nmy %counts;\n++$counts{$1} while $s =~ /(?=(\\w{$n}))/g;\n\nprint Dumper \\%counts;\n</code></pre>\n\n<h3>output</h3>\n\n<pre><code>$VAR1 = {\n          'GA' =&gt; 1,\n          'AA' =&gt; 4,\n          'CA' =&gt; 1,\n          'AC' =&gt; 1,\n          'GG' =&gt; 3,\n          'AG' =&gt; 2\n        };\n</code></pre>\n"}], "owner": {"reputation": 47, "user_id": 8908532, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/36055d44d0fc35a955aeaa075ccd166c?s=128&d=identicon&r=PG&f=1", "display_name": "Mikster", "link": "https://stackoverflow.com/users/8908532/mikster"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 60, "favorite_count": 0, "accepted_answer_id": 47186294, "answer_count": 2, "score": -1, "last_activity_date": 1510181513, "creation_date": 1510162499, "last_edit_date": 1510181513, "question_id": 47186153, "link": "https://stackoverflow.com/questions/47186153/counting-sequences-in-string", "title": "Counting sequences in string", "body": "<p>I'm working on a program which looks at a line of DNA and counts how many matches if it finds of a word of X length. </p>\n\n<p>Say you read a line like this</p>\n\n<pre><code>AGGAACAAAAGGG\n</code></pre>\n\n<p>And with a word length being 2, it should store the values in a hash like this</p>\n\n<pre><code>my $word_length = 2;\nmy %count;\n\n##Counting code##\n\n%count = (\n    AG =&gt; 2,\n    GG =&gt; 2,\n    GA =&gt; 1,\n    AC =&gt; 1,\n    CA =&gt; 1,\n    AA =&gt; 4,\n);\n</code></pre>\n\n<p>(This was counting manually, so it might be wrong).\nThis \"counting code\", that I don't have, accounts for overlaps. Which is what I'm struggling with. I have a placeholder code at the moment, but that can't detect overlaps. \nBasically, </p>\n\n<p>\"AAAA\", should return 3 AA's, not 2.</p>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 83048, "user_id": 2255089, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZNAsT.jpg?s=128&g=1", "display_name": "Casimir et Hippolyte", "link": "https://stackoverflow.com/users/2255089/casimir-et-hippolyte"}, "edited": false, "score": 0, "creation_date": 1510174280, "post_id": 47185265, "comment_id": 81328190, "body": "In short, whatever the pattern or the string, the regex engine tries to succeed and doesn&#39;t stop until the end of the string is reached."}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 8908201, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cb284f515cf0a7c63a7b6750c6170b60?s=128&d=identicon&r=PG&f=1", "display_name": "maxam", "link": "https://stackoverflow.com/users/8908201/maxam"}, "edited": false, "score": 0, "creation_date": 1510175315, "post_id": 47185411, "comment_id": 81328780, "body": "Ty for the quick answer"}], "tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": true, "score": 5, "last_activity_date": 1510160124, "creation_date": 1510160124, "answer_id": 47185411, "question_id": 47185265, "link": "https://stackoverflow.com/questions/47185265/perl-regex-matching-why-is-it-not-finding-all-matches-why-is-the-order-importa/47185411#47185411", "title": "perl regex matching, why is it not finding all matches, why is the order important?", "body": "<p>Because if you match a regex in a scalar context like that, and you set the <code>g</code> flag (for global matching) it's iterative - that's to allow you to do things like <code>while ( m/somepattern/g ) {</code> and have it trigger multiple times. </p>\n\n<p>That's because <code>g</code> means:</p>\n\n<blockquote>\n  <p>g  - globally match the pattern repeatedly in the string</p>\n</blockquote>\n\n<p>It'd not be particularly useful if it reset each time you tried it. But you can also use it slightly differently in an array context:</p>\n\n<pre><code>my @matches = $str =~ m/(some_capture)/g; \n</code></pre>\n\n<p>And that'll select them all into a list. </p>\n\n<p>But with your code and regex debugging: </p>\n\n<pre><code>#!/usr/bin/env perl\n\nuse strict;\nuse warnings;\n\nuse re 'debug';\n\n$_ = 'GXY';\nif   ( $_ =~ m/X/gi ) { print \"Matches X\\n\"; }\nif   ( $_ =~ m/Y/gi ) { print \"Matches Y\\n\"; }\nif   ( $_ =~ m/G/gi ) { print \"Matches G\\n\"; }\nelse                  { print \"No match on G\\n\"; }\n</code></pre>\n\n<p>You'll get (snipped for brevity):</p>\n\n<pre><code>Matching REx \"X\" against \"GXY\" \nMatching REx \"Y\" against \"Y\"\nMatching REx \"G\" against \"\"\n</code></pre>\n\n<p>The first match 'eats' \"GX\" to find \"X\", leaving \"Y\" for the next match, but nothing at all for the \"G\" match.  </p>\n\n<p>The simple workaround is omit the <code>g</code> flag, because then you're saying explicitly 'match once' and you'll get:</p>\n\n<pre><code>Matches X\nMatches Y\nMatches G\n</code></pre>\n\n<p>Alternatively, you can use the global match with a character class:</p>\n\n<pre><code>$_ = 'GXY';\n\nmy @matches = m/([GYX])/g; #implicitly operates on $_\nprint \"Match on $_\\n\" for @matches;\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 8908201, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cb284f515cf0a7c63a7b6750c6170b60?s=128&d=identicon&r=PG&f=1", "display_name": "maxam", "link": "https://stackoverflow.com/users/8908201/maxam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 56, "favorite_count": 1, "accepted_answer_id": 47185411, "answer_count": 1, "score": 0, "last_activity_date": 1510160124, "creation_date": 1510159680, "last_edit_date": 1510159786, "question_id": 47185265, "link": "https://stackoverflow.com/questions/47185265/perl-regex-matching-why-is-it-not-finding-all-matches-why-is-the-order-importa", "title": "perl regex matching, why is it not finding all matches, why is the order important?", "body": "<p>I ran into a problem with perl's regex matching. I destilled it down to a small example on the command line. Why is the order in which the matches are attempted important here ?</p>\n\n<p>1.</p>\n\n<pre><code>$ echo \"XYG\" | perl -ne 'if ($_ =~ m/X/gi) { print \"Matches X\\n\"; } ; if ($_ =~ m/Y/gi) { print \"Matches Y\\n\"; } ; if ($_ =~ m/G/gi) { print \"Matches G\\n\"; } '\nMatches X\nMatches Y\nMatches G\n</code></pre>\n\n<p>2.</p>\n\n<pre><code>$ echo \"GXY\" | perl -ne 'if ($_ =~ m/X/gi) { print \"Matches X\\n\"; } ; if ($_ =~ m/Y/gi) { print \"Matches Y\\n\"; } ; if ($_ =~ m/G/gi) { print \"Matches G\\n\"; } else { print \"No match on G\\n\"; } '\nMatches X\nMatches Y\nNo match on G\n</code></pre>\n\n<p>The 1. examples matches all three letters as expected, but the second example does not match the letter G, why ?</p>\n\n<p>However if I create an intermediate variable, here named $aa:</p>\n\n<pre><code>$ echo \"GXY\" | perl -ne 'if ($_ =~ m/X/gi) { print \"Matches X\\n\"; } ; if ($_ =~ m/Y/gi) { print \"Matches Y\\n\"; } ; $aa = $_; if ($aa =~ m/G/gi) { print \"Matches G\\n\"; } '\nMatches X\nMatches Y\nMatches G\n</code></pre>\n\n<p>Then the match works again ?</p>\n\n<p>My perl version is:</p>\n\n<pre><code>$ perl -e 'print \"$]\\n\";'\n5.022001\n</code></pre>\n\n<p>On a LM 18.2 machine</p>\n\n<pre><code>$ lsb_release -d\n\nDescription:    Linux Mint 18.2 Sonya\n</code></pre>\n\n<p>Ty+BR\nMax.</p>\n"}, {"tags": ["perl", "pdf", "character-encoding"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1510159117, "post_id": 47185053, "comment_id": 81319138, "body": "Where did the text in <code>$pdfLine</code> come from? Is it in your source code or do you read it from somewhere?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1510161563, "post_id": 47185053, "comment_id": 81320803, "body": "Please provide the result of <code>sprintf(&quot;%vX&quot;, $pdfLine)</code>"}, {"owner": {"reputation": 289, "user_id": 1720192, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/15dd25fa24296d10d84afe844b2c37bb?s=128&d=identicon&r=PG", "display_name": "Brian G", "link": "https://stackoverflow.com/users/1720192/brian-g"}, "edited": false, "score": 0, "creation_date": 1510162607, "post_id": 47185053, "comment_id": 81321404, "body": "Human readable text line: <code>A6        V&#201;RIFIER D&#201;CLARATION DE DROITS-FORMALIT&#201;S                         0           0           0           0           1</code>  sprint formatted line: <code>41.36.20.20.20.20.20.20.20.20.56.C9.52.49.46.49.45.52.20.44.&zwnj;&#8203;C9.43.4C.41.52.41.54&zwnj;&#8203;.49.4F.4E.20.44.45.2&zwnj;&#8203;0.44.52.4F.49.54.53.&zwnj;&#8203;2D.46.4F.52.4D.41.4C&zwnj;&#8203;.49.54.C9.53.20.20.2&zwnj;&#8203;0.20.20.20.20.20.20.&zwnj;&#8203;20.20.20.20.20.20.20&zwnj;&#8203;.20.20.20.20.20.20.2&zwnj;&#8203;0.20.20.30.20.20.20.&zwnj;&#8203;20.20.20.20.20.20.20&zwnj;&#8203;.20.30.20.20.20.20.2&zwnj;&#8203;0.20.20.20.20.20.20.&zwnj;&#8203;30.20.20.20.20.20.20&zwnj;&#8203;.20.20.20.20.20.30.2&zwnj;&#8203;0.20.20.20.20.20.20.&zwnj;&#8203;20.20.20.20.31.A</code>"}], "answers": [{"comments": [{"owner": {"reputation": 289, "user_id": 1720192, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/15dd25fa24296d10d84afe844b2c37bb?s=128&d=identicon&r=PG", "display_name": "Brian G", "link": "https://stackoverflow.com/users/1720192/brian-g"}, "edited": false, "score": 0, "creation_date": 1510163141, "post_id": 47185231, "comment_id": 81321723, "body": "Without success I tried your first suggestion.  The PDF text now looks like: <code>V&#239;&#191;&#189;RIFIER D&#239;&#191;&#189;CLARATION DE DROITS-FORMALIT&#239;&#191;&#189;S</code>"}], "tags": [], "owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "is_accepted": false, "score": 0, "last_activity_date": 1510159560, "creation_date": 1510159560, "answer_id": 47185231, "question_id": 47185053, "link": "https://stackoverflow.com/questions/47185053/pdfcreate-incorrectly-converts-french-accented-characters/47185231#47185231", "title": "PDF::Create incorrectly converts french accented characters", "body": "<p>My guess is that <code>$pdfLine</code> is UTF-8 encoded. You would want to decode it into unicode code points before writing it to the PDF.</p>\n\n<pre><code>use Encode 'decode';\n$page-&gt;string($font1, $fontSize, $leftMarg, $yCoord, decode(\"UTF-8\",$pdfLine));\n</code></pre>\n\n<p>You could also handle decoding at the input filehandle with an encoding layer:</p>\n\n<pre><code>open my $fh, '&lt;:encoding(UTF-8)', \"file/that/contains/the/plain.txt\";\n...\n$pdfLine = &lt;$fh&gt;;\n...\n$page-&gt;string($font1, $fontSize, $leftMarg, $yCoord, $pdfLine);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 289, "user_id": 1720192, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/15dd25fa24296d10d84afe844b2c37bb?s=128&d=identicon&r=PG", "display_name": "Brian G", "link": "https://stackoverflow.com/users/1720192/brian-g"}, "is_accepted": false, "score": 0, "last_activity_date": 1510844798, "last_edit_date": 1510844798, "creation_date": 1510843035, "answer_id": 47332394, "question_id": 47185053, "link": "https://stackoverflow.com/questions/47185053/pdfcreate-incorrectly-converts-french-accented-characters/47332394#47332394", "title": "PDF::Create incorrectly converts french accented characters", "body": "<p>I fixed the problem by installing an old version of PDF::Create.  I was running version 1.42 and I installed version 1.31.  French accented characters display fine using version 1.31.  So, somewhere between 1.31 and 1.42 the conversion of accented characters was broken.</p>\n"}], "owner": {"reputation": 289, "user_id": 1720192, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/15dd25fa24296d10d84afe844b2c37bb?s=128&d=identicon&r=PG", "display_name": "Brian G", "link": "https://stackoverflow.com/users/1720192/brian-g"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 237, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1510844798, "creation_date": 1510159041, "last_edit_date": 1510253799, "question_id": 47185053, "link": "https://stackoverflow.com/questions/47185053/pdfcreate-incorrectly-converts-french-accented-characters", "title": "PDF::Create incorrectly converts french accented characters", "body": "<p>My Perl program can successfully convert english text to pdf using the PDF::Create module.  However, french accented characters do not display correctly in the PDF file.</p>\n\n<p>Here is a line from the plain text file containing french characters:</p>\n\n<blockquote>\n  <p>V\u00c9RIFIER D\u00c9CLARATION DE DROITS-FORMALIT\u00c9S</p>\n</blockquote>\n\n<p>Here is what the same line looks like in the PDF file:</p>\n\n<blockquote>\n  <p>V\u00c3\u2030RIFIER D\u00c3\u2030CLARATION DE DROITS-FORMALIT\u00c3\u2030S</p>\n</blockquote>\n\n<p>Here is the relevant code:</p>\n\n<pre><code>$page = $pdf-&gt;new_page('MediaBox' =&gt; [0,0,$pdfWidth,$pdfHeight]);\n$font1 = $pdf-&gt;font('Subtype'=&gt;'Type1',Encoding'=&gt;'WinAnsiEncoding','BaseFont'=&gt;'Courier');\n$page-&gt;string($font1, $fontSize, $leftMarg, $yCoord, $pdfLine);\n</code></pre>\n\n<p>where $pdfLine contains the plain text.</p>\n\n<p>The program reads in a file with this content:</p>\n\n<blockquote>\n  <p>azAZ\u00e0\u00e2\u00e4\u00e7\u00e8\u00e9\u00ea</p>\n  \n  <p>\u00c9TAT DES DEMANDES INACTIVES - OP\u00c9RATION DES BREVETS</p>\n  \n  <p>T\u00c2CHE</p>\n  \n  <p>V\u00c9RIFIER D\u00c9CLARATION DE DROITS-FORMALIT\u00c9S</p>\n  \n  <p>V\u00c9RIFIER LISTAGE DES S\u00c9QUENCE-FORMALIT\u00c9S</p>\n</blockquote>\n"}, {"tags": ["perl", "ssl", "www-mechanize"], "answers": [{"tags": [], "owner": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "is_accepted": false, "score": 3, "last_activity_date": 1510429920, "creation_date": 1510429920, "answer_id": 47242157, "question_id": 47183328, "link": "https://stackoverflow.com/questions/47183328/wwwmechanize-ignore-ssl/47242157#47242157", "title": "WWW::Mechanize ignore SSL", "body": "<blockquote>\n  <p>I want to ignore the SSL handshake.</p>\n</blockquote>\n\n<p>The SSL handshake can not be ignored with https since it is an integral part of a TLS connection (and thus https). At most you could try to skip validation of the certificate (bad idea) which is what you are trying. But, this does not make handshake failures vanish.</p>\n\n<p>Such handshake errors are instead caused for example by non overlapping cipher suites between client and server, unsupported protocol versions or missing but required TLS extensions.</p>\n\n<p>It is unclear what exactly is the problem in your case. But given that the server requires SNI according to <a href=\"https://www.ssllabs.com/ssltest/analyze.html?d=www.1031exchangeinc.com&amp;s=104.31.83.79\" rel=\"nofollow noreferrer\">the SSLLabs report</a> and that it requires modern ciphers (ECDHE and/or GCM or ChaCha20) my guess is that you are using a too old version of OpenSSL. This is typically the case on MacOS X which ships with a very old version of OpenSSL, i.e. version 0.9.8. </p>\n\n<p>You can check the version you use with </p>\n\n<pre><code>perl -MNet::SSLeay -e 'warn Net::SSLeay::SSLeay_version(0)'\n</code></pre>\n\n<p>If this reports anything like 0.9.8 then you've found the reason on why it is failing and you need to upgrade to a newer version of OpenSSL and recompile Net::SSLeay against this. <br>\nIf you instead have at least OpenSSL 1.0.1 then it is a different problem and you should add the versions of Net::SSLeay and IO::Socket::SSL to your question and also the output when running with <code>perl -MIO::Socket::SSL=debug4 your-program.pl</code>. </p>\n"}], "owner": {"reputation": 23, "user_id": 7650617, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/09f6f33204c3a1eea5e01d679d97737a?s=128&d=identicon&r=PG&f=1", "display_name": "DaveA", "link": "https://stackoverflow.com/users/7650617/davea"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 792, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1510431348, "creation_date": 1510154258, "last_edit_date": 1510431348, "question_id": 47183328, "link": "https://stackoverflow.com/questions/47183328/wwwmechanize-ignore-ssl", "title": "WWW::Mechanize ignore SSL", "body": "<p>I'm using the following code, with the following snippet:</p>\n\n<p><em>my $mech = WWW::Mechanize->new( 'ssl_opts' => { 'verify_hostname' => 0 } );</em></p>\n\n<p>the following error is still being thrown:</p>\n\n<p><strong><em>Error GETing <a href=\"https://www.1031exchangeinc.com/\" rel=\"nofollow noreferrer\">https://www.1031exchangeinc.com/</a>: Can't connect to www.1031exchangeinc.com:443 (SSL connect attempt failed error:14077410:SSL routines:SSL23_GET_SERVER_HELLO:sslv3 alert handshake failure) at crawl.pl line 29.</em></strong></p>\n\n<p>I want to ignore the SSL handshake.</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse Modern::Perl;\nuse WWW::Mechanize;\nuse IO::Socket::SSL;\n\nmy $root = 'https://www.1031exchangeinc.com/';\nmy $domain = 'https://www.1031exchangeinc.com';\n#my $mech = WWW::Mechanize-&gt;new;\nmy $mech = WWW::Mechanize-&gt;new( 'ssl_opts' =&gt; { 'verify_hostname' =&gt; 0 } );\n\nsub visit {\n   my $url = shift;\n   my $indent = shift || 0;\n   my $visited = shift || {};\n   my $tab = ' ' x $indent;\n\n# Already seen that.\nreturn if $visited-&gt;{$url}++;\n\n# Leaves domain.\nif ($url !~ /^$domain/) {\n    say $tab, \"-&gt; $url\";\n    return;\n}\n\n# Not seen yet.\nsay $tab, \"- $url \";\n$mech-&gt;get($url);\nvisit($_, $indent+2, $visited) for\n    map {$_-&gt;url_abs} $mech-&gt;links;\n}\n\nvisit($root);\n</code></pre>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 2, "creation_date": 1510148419, "post_id": 47181077, "comment_id": 81311231, "body": "First of, that tutorial is fairly up to date, but not very beginner-friendly. Consider using a book instead. <i>Learning Perl</i> is great, or if you already are familiar with programming, <i>Beginning Perl</i> by Curtis Poe."}, {"owner": {"reputation": 671, "user_id": 3345557, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/nNKLR.jpg?s=128&g=1", "display_name": "Rijumone", "link": "https://stackoverflow.com/users/3345557/rijumone"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1510148732, "post_id": 47181077, "comment_id": 81311464, "body": "@simbabque: thanks! but i need to write a script by tomorrow, so can&#39;t really give time to a studying from a book. :)"}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 2, "creation_date": 1510148750, "post_id": 47181077, "comment_id": 81311476, "body": "What&#39;s unclear about the documentation?"}, {"owner": {"reputation": 671, "user_id": 3345557, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/nNKLR.jpg?s=128&g=1", "display_name": "Rijumone", "link": "https://stackoverflow.com/users/3345557/rijumone"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1510148894, "post_id": 47181077, "comment_id": 81311569, "body": "@melpomene: What are subroutines? What are XSUBs? More importantly, what are $a and $b?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user3458"}, "edited": false, "score": 1, "creation_date": 1510148923, "post_id": 47181077, "comment_id": 81311593, "body": "Sorts the keys of <code>%created</code> according to the order of each key&#39;s value."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1510148987, "post_id": 47181077, "comment_id": 81311625, "body": "A subroutine is ... a unit of executable code. It is usually given a name so you can call it from multiple places. An XSUB is a subroutine implemented in XS (basically, it&#39;s written in C instead of Perl). <code>$a</code> and <code>$b</code> are variables."}, {"owner": {"reputation": 10008, "user_id": 462006, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/37peF.jpg?s=128&g=1", "display_name": "scrappedcola", "link": "https://stackoverflow.com/users/462006/scrappedcola"}, "edited": false, "score": 0, "creation_date": 1510149199, "post_id": 47181077, "comment_id": 81311789, "body": "Subroutines are also known as functions. $a, $b are keys in the %created hash. You should look for other tutorials that explain things better: <a href=\"https://alvinalexander.com/perl/edu/qanda/plqa00016\" rel=\"nofollow noreferrer\">alvinalexander.com/perl/edu/qanda/plqa00016</a> just relying on one source is just going to lead into frustration."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 6, "creation_date": 1510149211, "post_id": 47181077, "comment_id": 81311798, "body": "I think <a href=\"https://perlmaven.com/sorting-arrays-in-perl\" rel=\"nofollow noreferrer\">perlmaven.com/sorting-arrays-in-perl</a> and <a href=\"https://perlmaven.com/how-to-sort-a-hash-in-perl\" rel=\"nofollow noreferrer\">perlmaven.com/how-to-sort-a-hash-in-perl</a> and maybe <a href=\"https://perlmaven.com/how-to-sort-a-hash-of-hashes-by-value\" rel=\"nofollow noreferrer\">perlmaven.com/how-to-sort-a-hash-of-hashes-by-value</a> are relevant, and probably better written than your tutorial."}], "answers": [{"tags": [], "owner": {"reputation": 793701, "user_id": 19068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d2d3229ed1961d2bd81853242493247?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/19068/quentin"}, "is_accepted": false, "score": 4, "last_activity_date": 1510148950, "creation_date": 1510148950, "answer_id": 47181414, "question_id": 47181077, "link": "https://stackoverflow.com/questions/47181077/confusing-sort-syntax-in-perl/47181414#47181414", "title": "Confusing &quot;sort&quot; syntax in perl", "body": "<p>Just break it down.</p>\n\n<p>This is the sort bit:</p>\n\n<pre><code>sort({$created{$b} &lt;=&gt; $created{$a}} keys %created)\n</code></pre>\n\n<p>The parenthesis aren't relevant here.</p>\n\n<pre><code>sort { $created{$b} &lt;=&gt; $created{$a} } keys %created\n</code></pre>\n\n<p>So this is a very standard sort.</p>\n\n<p><code>sort</code> is <a href=\"https://perldoc.perl.org/functions/sort.html\" rel=\"nofollow noreferrer\">sort</a>.</p>\n\n<p>The first argument is a block\u2026</p>\n\n<blockquote>\n  <p>If SUBNAME is specified, it gives the name of a subroutine that returns an integer less than, equal to, or greater than 0 , depending on how the elements of the list are to be ordered. (The &lt;=> and cmp operators are extremely useful in such routines.) SUBNAME may be a scalar variable name (unsubscripted), in which case the value provides the name of (or a reference to) the actual subroutine to use. In place of a SUBNAME, you can provide a BLOCK as an anonymous, in-line sort subroutine.</p>\n</blockquote>\n\n<p>The second argument is the thing being sorted (<code>keys %created</code>). i.e. a list of the <a href=\"https://perldoc.perl.org/functions/keys.html\" rel=\"nofollow noreferrer\">keys</a> in the hash.</p>\n\n<p>In the sub, <code>$a</code> and <code>$b</code> are the elements being sorted. So <code>$created{$b} &lt;=&gt; $created{$a}</code> takes the keys and compares the values associated with them in the hash.</p>\n\n<p>So the sort outputs a list of keys in the hash, sorted by the values associated with them.</p>\n\n<p>That then gets passed to a postfix <code>for</code>, so for each of the keys it does something (in the order of the values).</p>\n\n<p>The something is <code>print \" $_: $created{$_}\"</code>: So it prints the key, then a colon, then the value.</p>\n"}, {"comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 2, "creation_date": 1510169240, "post_id": 47181466, "comment_id": 81325391, "body": "Note that the official syntax is <code>sort SUBNAME LIST</code>, and passing a subroutine reference isn&#39;t a documented option."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1510170016, "post_id": 47181466, "comment_id": 81325877, "body": "@Borodin Indeed it is. Huh. It actually takes the <code>sub {}</code> as part of the list. I think it needs some trickery to reimplement it to work this way."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1510172517, "post_id": 47181466, "comment_id": 81327247, "body": "I think it works if you just leave out the comma, because the <code>&amp;</code> prototype converts a block into an anonymous sub, and it just doesn&#39;t get upset if you do the work for it :) I can&#39;t test right now."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1510180174, "post_id": 47181466, "comment_id": 81331025, "body": "A couple of nitpicks: (1) perhaps comment that the topicalizer gets <i>aliased</i> to elements (and not that an element &quot;ends up in <code>$_</code>&quot;)? It&#39;s a good occasion to inform people so they don&#39;t get surprised later (2) I think I see what you mean by the name <code>bubbly_sort()</code> but the algorithm is mergesort (and it had used to be quicksort); it could be misleading?  Like I said, nitpicks (details)."}], "tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": false, "score": 6, "last_activity_date": 1510170074, "last_edit_date": 1510170074, "creation_date": 1510149105, "answer_id": 47181466, "question_id": 47181077, "link": "https://stackoverflow.com/questions/47181077/confusing-sort-syntax-in-perl/47181466#47181466", "title": "Confusing &quot;sort&quot; syntax in perl", "body": "<pre><code>print \" $_: $created{$_}\" \n    for ( sort { created{$b} &lt;=&gt; $created{$a} } keys %created );\n</code></pre>\n\n<p>This uses the post-fix form of <code>for</code>. In Perl, <code>for</code> and <code>foreach</code> are the same. Both can be used with the C-style <code>for</code> syntax as well as the shorter <code>foreach</code> style syntax.</p>\n\n<p>We can rewrite this loop to the following more verbose version.</p>\n\n<pre><code>foreach ( sort { created{$b} &lt;=&gt; $created{$a} } keys %created ) {\n    print \" $_: $created{$_}\";\n}\n</code></pre>\n\n<p>Next, let's look at <code>$_</code>. It's called the <em>topic</em> and is used as the default input for a lot of things in Perl if no other variable is given. In a <code>foreach</code> loop, if no iteration variable is used, every element of the list in the parenthesis ends up in <code>$_</code>. Again, this could be rewritten for clarity.</p>\n\n<pre><code>foreach my $elem ( sort { created{$b} &lt;=&gt; $created{$a} } keys %created ) {\n    print \" $elem: $created{$elem}\";\n}\n</code></pre>\n\n<p>Now let's look at the <code>sort</code>. The two variables <code>$a</code> and <code>$b</code> are global variables that are always there in Perl. They are reserved for the block that follows the <code>sort</code> statement.</p>\n\n<pre><code>sort { BLOCK } LIST\n</code></pre>\n\n<p><code>$a</code> and <code>$b</code> contain two values from the list, that are being compared in the block. The block behaves like an anonymous function (called <em>lambda</em> in other languages), and there is no comma after it. Alternatively, you can put the name of a named sub there as a bareword without quotes. Again, there is no comma.</p>\n\n<pre><code>sub bubbly_sort { $a &lt;=&gt; $b }\nsort bubbly_sort 3, 2, 1;\n</code></pre>\n\n<p>The <code>&lt;=&gt;</code> operator does numerical comparison. It compares both values and returns <code>-1</code>, <code>0</code>, or <code>1</code>.</p>\n\n<pre><code>sort { $b &lt;=&gt; $a } LIST\n</code></pre>\n\n<p>This will sort the values in the LIST numerically descending, so the highest value comes first. <code>$a &lt;=&gt; $b</code> would be ascending.</p>\n\n<pre><code>sort { created{$b} &lt;=&gt; $created{$a} } keys %created\n</code></pre>\n\n<p>The <code>keys</code> keyword gives you an unordered list of the keys inside the hash <code>%created</code>. The block in your <code>sort</code> compares the values behind those keys in the <code>%created</code> hash and sorts the keys descending. So you get out a list of sorted keys.</p>\n\n<p>The rest of the code just prints out a key/value list of that sorted list of keys.</p>\n\n<p>It's notable that the output is all on one line, because there is no newline after the <code>print</code>.</p>\n\n<hr>\n\n<p>The condensed version you posted can be more readable than the long version I showed in this answer. But it stands and falls with proper indentation and use of parentheses.</p>\n\n<pre><code>print \" $_: $created{$_}\" \n    for sort { created{$b} &lt;=&gt; $created{$a} } keys %created;\n</code></pre>\n\n<p>versus</p>\n\n<pre><code>print \" $_: $created{$_}\" for(sort({$created{$b} &lt;=&gt; $created{$a}} keys %created));\n</code></pre>\n\n<p>versus </p>\n\n<pre><code>foreach ( sort { created{$b} &lt;=&gt; $created{$a} } keys %created ) {\n    print \" $_: $created{$_}\";\n}\n</code></pre>\n\n<p>In my opinion, the first version reads the most like an English sentence, which is good. Clean, readable code should always be the first priority of a good developer.</p>\n"}, {"tags": [], "owner": {"reputation": 2177, "user_id": 3124587, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/adc0af022f8a3b35bcde0a4405e4c673?s=128&d=identicon&r=PG&f=1", "display_name": "Joshua", "link": "https://stackoverflow.com/users/3124587/joshua"}, "is_accepted": false, "score": 9, "last_activity_date": 1510186048, "last_edit_date": 1510186048, "creation_date": 1510150021, "answer_id": 47181800, "question_id": 47181077, "link": "https://stackoverflow.com/questions/47181077/confusing-sort-syntax-in-perl/47181800#47181800", "title": "Confusing &quot;sort&quot; syntax in perl", "body": "<p>There's a few things going on here. First I'll address the postfix loop;</p>\n\n<pre><code>say $_ for ('foo', 'bar', 'baz');\n</code></pre>\n\n<p>Which is semantically the same as doing this</p>\n\n<pre><code>for ('foo', 'bar', 'baz') { say $_ }\n</code></pre>\n\n<p>Now on to the sort. By default, Perl's <code>sort</code> sorts alphabetically</p>\n\n<pre><code>sort (20, 3, 100);  # RESULT: (100, 20, 3)\n</code></pre>\n\n<p>Perl provides a way to explicitly compare alphabetically (<code>cmp</code>) or numerically (<code>&lt;=&gt;</code>).</p>\n\n<pre><code>20 cmp 3;  # RESULT: -1 (means: Less)\n20 &lt;=&gt; 3;  # RESULT:  1 (means: More)\n20 &lt;=&gt; 20; # RESULT:  0 (means: Same)\n</code></pre>\n\n<p>So you can use these operators inside a <code>sort</code> block, but what do you put either side of the operators? This is where the special <code>$a</code> and <code>$b</code> variables come in.</p>\n\n<pre><code>sort { $a &lt;=&gt; $b } (20, 3, 100);  # RESULT: (3, 20, 100)\n</code></pre>\n\n<p>This is also why you should never manually assign values to <code>$a</code> or <code>$b</code> because if you do, <code>sort</code> will not function correctly!</p>\n\n<p>So put it all together, and your sort is sorting a Hash's <em>keys</em> by their corresponding <em>values</em> numerically</p>\n\n<pre><code>my %hash = ( twenty =&gt; 20, three =&gt; 3, onehundred =&gt; 100 ); \n\nfor ( sort { $hash{$a} &lt;=&gt; $hash{$b} } keys %hash ) {\n    say \"$_: %hash{$_}\"\n}\n</code></pre>\n\n<p>Outputs</p>\n\n<pre><code>three: 3\ntwenty: 20\nonehundred: 100\n</code></pre>\n\n<p>You can also do <code>{ $b &lt;=&gt; $a }</code> to sort in reverse.</p>\n\n<p>If this all looks arcane and confusing, it kinda is. I'd recommend using a module like <a href=\"https://metacpan.org/pod/Sort::Key\" rel=\"nofollow noreferrer\"><code>Sort::Key</code></a> for most of your sorting needs... or maybe <a href=\"https://metacpan.org/pod/Sort::Naturally\" rel=\"nofollow noreferrer\"><code>Sort::Naturally</code></a> if that's more what you're after.</p>\n"}], "owner": {"reputation": 671, "user_id": 3345557, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/nNKLR.jpg?s=128&g=1", "display_name": "Rijumone", "link": "https://stackoverflow.com/users/3345557/rijumone"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 199, "favorite_count": 0, "answer_count": 3, "score": 1, "last_activity_date": 1510186048, "creation_date": 1510147958, "last_edit_date": 1510148755, "question_id": 47181077, "link": "https://stackoverflow.com/questions/47181077/confusing-sort-syntax-in-perl", "title": "Confusing &quot;sort&quot; syntax in perl", "body": "<p>I started learning Perl today and found <a href=\"http://learnperl.scratchcomputing.com/tutorials/csss/\" rel=\"nofollow noreferrer\">this</a> very interesting tutorial.\nHowever, for the life of me I could not wrap my head around this code snippet. </p>\n\n<pre><code>print \" $_: $created{$_}\" for(sort({$created{$b} &lt;=&gt; $created{$a}} keys %created));\n</code></pre>\n\n<p>What kind of sort is this? More specifically, what are the variables <code>$a</code> and <code>$b</code>? \nI tried going through the <a href=\"https://perldoc.perl.org/functions/sort.html\" rel=\"nofollow noreferrer\">documentation</a>, but can't say that it helped. Any support would be greatly appreciated. </p>\n"}, {"tags": ["perl", "logging", "perl-module", "cpan", "log4perl"], "comments": [{"owner": {"reputation": 17619, "user_id": 7818749, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec4a72453e116debb802d55e88c2572e?s=128&d=identicon&r=PG&f=1", "display_name": "Gerhard", "link": "https://stackoverflow.com/users/7818749/gerhard"}, "edited": false, "score": 0, "creation_date": 1510141839, "post_id": 47176048, "comment_id": 81306840, "body": "follow the standard <a href=\"http://log4perl.sourceforge.net/releases/Log-Log4perl/docs/html/Log/Log4perl/FAQ.html#c7fa8\" rel=\"nofollow noreferrer\">here</a>"}], "owner": {"reputation": 366, "user_id": 4488775, "user_type": "registered", "accept_rate": 64, "profile_image": "https://lh6.googleusercontent.com/-c7dUxZESZzs/AAAAAAAAAAI/AAAAAAAAAGI/OxEft3Nihy4/photo.jpg?sz=128", "display_name": "Bala Krishnan", "link": "https://stackoverflow.com/users/4488775/bala-krishnan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 148, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1510134109, "creation_date": 1510133537, "last_edit_date": 1510134109, "question_id": 47176048, "link": "https://stackoverflow.com/questions/47176048/how-to-log-to-diferent-files-with-log4perl", "title": "How to log to diferent files with Log4perl", "body": "<p>In perl, is there a way to log to two different files in different path?</p>\n\n<p>For example, I have to log detailed server queries and responses in a file and flow of the script in other file (the second file will have just the abstract information). How do I achieve this in Log4Perl.</p>\n\n<pre><code>sub getLogger\n{\n    my ( $paramA, $paramB, $type ) = @_;\n        my $conf = (\"\n            log4perl.rootLogger =INFO, LOGFILE\n            log4perl.rootLogger1 =ALL, REPFILE\n\n            log4perl.appender.LOGFILE=Log::Log4perl::Appender::File\n            log4perl.appender.LOGFILE.filename = sub { getLogFileName(\\\"$paramA\\\", \\\"$paramB\\\", \\\"$type\\\"); };\n            log4perl.appender.LOGFILE.mode=append\n            log4perl.appender.LOGFILE.autoflush = 1\n            log4perl.appender.LOGFILE.size      = 1M\n            log4perl.appender.LOGFILE.layout=PatternLayout\n            log4perl.appender.LOGFILE.layout.ConversionPattern=[%c] %d %H - %m%n\n\n            log4perl.appender.REPFILE=Log::Log4perl::Appender::File\n            log4perl.appender.REPFILE.filename = sub { getLogFileName(\\\"$paramA\\\", \\\"$paramB\\\", \\\"$type\\\"); };\n            log4perl.appender.REPFILE.mode=append\n            log4perl.appender.REPFILE.autoflush = 1\n            log4perl.appender.REPFILE.size      = 1M\n            log4perl.appender.REPFILE.layout=PatternLayout\n            log4perl.appender.REPFILE.layout.ConversionPattern=[%c] %d %H - %m%n\n        \");\n        Log::Log4perl::init(\\$conf);\n        my $logger1 = Log::Log4perl-&gt;get_logger('rootLogger');\n        my $logger2 = Log::Log4perl-&gt;get_logger('rootLogger1');\n        if($type == 1)\n        {\n            return $logger1;\n        }\n        else\n        {\n            return $logger2;\n        }\n}\n</code></pre>\n\n<p>When I try to get logger1 and logger2 at different places of the script, the last obtained instance copies to both loggers. For example,</p>\n\n<pre><code>my $logger1 = getLogger($paramA, $paramB, $type);\n$logger1-&gt;info(\"This is log 1\"); #printed in file 1 correctly\nmy $logger2 = getLogger($paramA, $paramB, $type);\n$logger2-&gt;info(\"This is log 2\"); #printed in file 2 correctly\n$logger1-&gt;info(\"Again trying to print in file1\"); #printed in file2 - expected to print in file1.\n$logger2-&gt;info(\"Again trying to print in file2\"); #printed in file2 - expected to print in file2.\n</code></pre>\n\n<p>I am stuck here. What is going wrong?!</p>\n"}, {"tags": ["excel", "perl", "xlsx"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 3, "creation_date": 1510169896, "post_id": 47175316, "comment_id": 81325808, "body": "Can&#39;t you just use <code>0.0%</code> or <code>0,0%</code> depending on the locale?"}, {"owner": {"reputation": 97, "user_id": 1886827, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/160c6e7f7eda2a0d5d7f2854e48959ea?s=128&d=identicon&r=PG", "display_name": "Gergely M&#225;t&#233;", "link": "https://stackoverflow.com/users/1886827/gergely-m%c3%a1t%c3%a9"}, "edited": false, "score": 0, "creation_date": 1512140822, "post_id": 47175316, "comment_id": 82149980, "body": "As it turned out I can&#39;t. Even when I generate the XLSX for a given language I still don&#39;t know the locale settings of the Excel instances it will be opened on.  For example I generate XLSX for Vietnamese and use the decimal separator for that locale, but some users in Vietnam will have English Excels and my formatting will not work on their machines.  I could not find any way to set the language or the locale on the generated XLSX."}], "owner": {"reputation": 97, "user_id": 1886827, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/160c6e7f7eda2a0d5d7f2854e48959ea?s=128&d=identicon&r=PG", "display_name": "Gergely M&#225;t&#233;", "link": "https://stackoverflow.com/users/1886827/gergely-m%c3%a1t%c3%a9"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 476, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1510131414, "creation_date": 1510131414, "question_id": 47175316, "link": "https://stackoverflow.com/questions/47175316/how-to-set-cell-format-to-show-1-decimal-in-percent-formatting-with-excelwrite", "title": "How to set cell format to show 1 decimal in percent formatting with Excel::Writer::XLSX in more than one locale?", "body": "<p>I'm generating XLSX documents with Perl and Excel::Writer::XLSX.\nThe generated documents will be opened in multiple countries with multiple different locales.\nI would like to format a cell so a percentage number shown inside has one digit after the decimal point.</p>\n\n<p>When I use <code>num_format=&gt;9</code> it shows zero digits, when I use <code>num_format=&gt;10</code> it shows 2 digits. When I use a format string like <code>0.0%</code> it works fine in one locale, but does not work in another, as the other locale uses <code>\",\"</code> instead of <code>\".\"</code> as decimal separator.</p>\n\n<p>How can I format cells showing numbers in a locale-independent way?</p>\n"}, {"tags": ["macos", "perl", "homebrew", "cpan"], "owner": {"reputation": 10217, "user_id": 399759, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/d4e491e1274e4df07ef243abd6f57113?s=128&d=identicon&r=PG", "display_name": "Hanxue", "link": "https://stackoverflow.com/users/399759/hanxue"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 196, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1510111330, "creation_date": 1510111330, "question_id": 47171069, "link": "https://stackoverflow.com/questions/47171069/perl-installing-aliensvn-fails-with-base-class-package-modulebuild-is-emp", "title": "Perl: installing Alien::SVN fails with Base class package &quot;Module::Build&quot; is empty", "body": "<p>Running the command <code>cpan Alien::SVN</code> fails with the following output</p>\n\n<pre><code>Base class package \"Module::Build\" is empty.\n    (Perhaps you need to 'use' the module which defines that package first,\n    or make that module available in @INC (@INC contains: inc /usr/local/Cellar/perl/5.24.1//lib/perl5/5.24.1/darwin-thread-multi-2level /usr/local/Cellar/perl/5.24.1/lib/perl5/site_perl/5.24.1/darwin-thread-multi-2level /usr/local/Cellar/perl/5.24.1/lib/perl5/site_perl/5.24.1 /usr/local/Cellar/perl/5.24.1/lib/perl5/5.24.1/darwin-thread-multi-2level /usr/local/Cellar/perl/5.24.1/lib/perl5/5.24.1 /usr/local/lib/perl5/site_perl/5.24.1/darwin-thread-multi-2level /usr/local/lib/perl5/site_perl/5.24.1 .).\n at inc/My/SVN/Builder.pm line 5.\nBEGIN failed--compilation aborted at inc/My/SVN/Builder.pm line 5.\nCompilation failed in require at Build.PL line 6.\nBEGIN failed--compilation aborted at Build.PL line 6.\nWarning: No success on command[/usr/local/Cellar/perl/5.24.1/bin/perl Build.PL]\n  MSCHWERN/Alien-SVN-v1.8.11.0.tar.gz\n  /usr/local/Cellar/perl/5.24.1/bin/perl Build.PL -- NOT OK\n</code></pre>\n\n<p>Full output at <a href=\"https://gist.github.com/e072fc0785310f47c3ac1f201eb45d7b\" rel=\"nofollow noreferrer\">https://gist.github.com/e072fc0785310f47c3ac1f201eb45d7b</a></p>\n\n<h2>Environment</h2>\n\n<p>OS: MacOS 10.10.5\nPerl: 5.24.1\nCpan: 1.6.1</p>\n\n<p>Perl is installed via <a href=\"https://brew.sh\" rel=\"nofollow noreferrer\">homebrew</a>. </p>\n\n<p>I have also tried setting the following environment variables</p>\n\n<pre><code>export PERL5LIB=${PERL5LIB}:/usr/local/Cellar/perl/5.24.1//lib/perl5/5.24.1/darwin-thread-multi-2level\nexport PERL_MM_OPT=\"INSTALL_BASE=$HOME/perl5\"\n</code></pre>\n"}, {"tags": ["perl", "cpan"], "comments": [{"owner": {"reputation": 2370, "user_id": 786691, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/6hxSw.jpg?s=128&g=1", "display_name": "Himanshu", "link": "https://stackoverflow.com/users/786691/himanshu"}, "edited": false, "score": 1, "creation_date": 1510108637, "post_id": 47170658, "comment_id": 81290926, "body": "Looks like File::Find::Rule is another package to be installed separately. It doesn&#39;t come bundled with File::Find. See <a href=\"http://search.cpan.org/~rclamp/File-Find-Rule-0.34/lib/File/Find/Rule.pm\" rel=\"nofollow noreferrer\">search.cpan.org/~rclamp/File-Find-Rule-0.34/lib/File/Find/&hellip;</a>"}, {"owner": {"reputation": 3, "user_id": 1383070, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/810b1527f0e9fd0ecdb3d13fea78ffa8?s=128&d=identicon&r=PG", "display_name": "technog", "link": "https://stackoverflow.com/users/1383070/technog"}, "reply_to_user": {"reputation": 2370, "user_id": 786691, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/6hxSw.jpg?s=128&g=1", "display_name": "Himanshu", "link": "https://stackoverflow.com/users/786691/himanshu"}, "edited": false, "score": 0, "creation_date": 1510110175, "post_id": 47170658, "comment_id": 81291376, "body": "Correct. I downloaded that manually and built and installed to my local dir. There are further dependency issues with that."}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 1383070, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/810b1527f0e9fd0ecdb3d13fea78ffa8?s=128&d=identicon&r=PG", "display_name": "technog", "link": "https://stackoverflow.com/users/1383070/technog"}, "edited": false, "score": 0, "creation_date": 1510119281, "post_id": 47171434, "comment_id": 81293912, "body": "I&#39;d like to use File::Find&#39;s routines. File::Find::Rule&#39;s interface looks interesting and wanted to give Rule a shot as well. I guess i&#39;m missing something here, but why is File::Find perl itself ?? isnt File::Find just another perl lib/module ?? When i clicked on &quot;download&quot;, i expected to download just the File::Find module"}, {"owner": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "reply_to_user": {"reputation": 3, "user_id": 1383070, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/810b1527f0e9fd0ecdb3d13fea78ffa8?s=128&d=identicon&r=PG", "display_name": "technog", "link": "https://stackoverflow.com/users/1383070/technog"}, "edited": false, "score": 2, "creation_date": 1510121883, "post_id": 47171434, "comment_id": 81294888, "body": "@technog: File::Find is a CORE module which comes bundled together with perl. That&#39;s why it also reports as already installed. To cite your own question: <i>&quot;...it says its up to date !!!&quot;</i>"}, {"owner": {"reputation": 3, "user_id": 1383070, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/810b1527f0e9fd0ecdb3d13fea78ffa8?s=128&d=identicon&r=PG", "display_name": "technog", "link": "https://stackoverflow.com/users/1383070/technog"}, "edited": false, "score": 0, "creation_date": 1510145266, "post_id": 47171434, "comment_id": 81309082, "body": "Got it. Thanks! However a followup. Havent used cpan shell before. Does it do dependency checks? I downloaded Rule and got the an error: Can&#39;t locate Number/Compare.pm&quot;. Will download any further missing modules manually"}, {"owner": {"reputation": 3432, "user_id": 604642, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/48daad611ba387f8473b0c1e5792aa3f?s=128&d=identicon&r=PG", "display_name": "shawnhcorey", "link": "https://stackoverflow.com/users/604642/shawnhcorey"}, "edited": false, "score": 0, "creation_date": 1510145841, "post_id": 47171434, "comment_id": 81309440, "body": "What is <code>Find:::Rule</code>? That looks like a bug to me."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 3432, "user_id": 604642, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/48daad611ba387f8473b0c1e5792aa3f?s=128&d=identicon&r=PG", "display_name": "shawnhcorey", "link": "https://stackoverflow.com/users/604642/shawnhcorey"}, "edited": false, "score": 1, "creation_date": 1510154324, "post_id": 47171434, "comment_id": 81315629, "body": "@shawnhcorey, Fixed"}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 5, "last_activity_date": 1510158581, "last_edit_date": 1510158581, "creation_date": 1510114184, "answer_id": 47171434, "question_id": 47170658, "link": "https://stackoverflow.com/questions/47170658/trying-to-install-filefind-from-cpan/47171434#47171434", "title": "Trying to install File::Find from CPAN", "body": "<p>If you want to use <a href=\"http://search.cpan.org/perldoc?File::Find::Rule\" rel=\"nofollow noreferrer\">File::Find::Rule</a>, you'll need to install File::Find::Rule (<code>cpan File::Find::Rule</code>), not File::Find.</p>\n\n<p>If you want to download File::Find::Rule's distribution, you'll need to download <a href=\"http://search.cpan.org/dist/File-Find-Rule/\" rel=\"nofollow noreferrer\">File-Find-Rule</a>. It makes no sense to download File::Find's distribution if you want File::Find::Rule, especially considering File::Find is distributed as part of <a href=\"http://search.cpan.org/dist/perl\" rel=\"nofollow noreferrer\">perl</a>.</p>\n\n<p>If you want to use <a href=\"http://search.cpan.org/perldoc?File::Find\" rel=\"nofollow noreferrer\">File::Find</a>, don't tell <code>perl</code> to load File::Find::Rule.</p>\n"}], "owner": {"reputation": 3, "user_id": 1383070, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/810b1527f0e9fd0ecdb3d13fea78ffa8?s=128&d=identicon&r=PG", "display_name": "technog", "link": "https://stackoverflow.com/users/1383070/technog"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 723, "favorite_count": 0, "answer_count": 1, "score": -8, "last_activity_date": 1510166315, "creation_date": 1510108438, "last_edit_date": 1510166315, "question_id": 47170658, "link": "https://stackoverflow.com/questions/47170658/trying-to-install-filefind-from-cpan", "title": "Trying to install File::Find from CPAN", "body": "<p>Sorry about my original post.\nMy misunderstanding on a couple of fronts, so i'll clarify what I\nwanted and where I stand corrected.</p>\n\n<p>Was trying to get File::Find::Rule.</p>\n\n<p>Went the Files::Find page on CPAN and hit download</p>\n\n<p>1) Thinking that any package under Find::File would be\ndownloaded. I.e. File::Find::*, including Rule.</p>\n\n<p>I now know that the Rule package resides in the File::Find namespace?\n(if that word applies here), but has to be gotten individually.</p>\n\n<p>2) Clicking on download, I got was perl.5.26 which was confusing to me.\nSo now I know that File::Find is packaged with Perl, hence I got the\nentire Perl package. I.e. a core package.</p>\n\n<p>I know better now</p>\n"}, {"tags": ["html", "twitter-bootstrap", "perl", "datatable", "template-toolkit"], "comments": [{"owner": {"reputation": 12075, "user_id": 1137055, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/59d7b43b9eb7d01bd8f7e51febe6053c?s=128&d=identicon&r=PG", "display_name": "dgw", "link": "https://stackoverflow.com/users/1137055/dgw"}, "edited": false, "score": 0, "creation_date": 1510128821, "post_id": 47169273, "comment_id": 81298344, "body": "What Javascript do you use to setup <code>Datatables</code>? Have you defined a source for your data?"}], "answers": [{"tags": [], "owner": {"reputation": 17619, "user_id": 7818749, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec4a72453e116debb802d55e88c2572e?s=128&d=identicon&r=PG&f=1", "display_name": "Gerhard", "link": "https://stackoverflow.com/users/7818749/gerhard"}, "is_accepted": true, "score": 2, "last_activity_date": 1510120202, "creation_date": 1510120202, "answer_id": 47172432, "question_id": 47169273, "link": "https://stackoverflow.com/questions/47169273/receiving-error-i-dont-understand-using-smartadmin-bootstrap-datatables/47172432#47172432", "title": "Receiving error I don&#39;t understand using Smartadmin Bootstrap Datatables", "body": "<p>The documentation provided in the error, explains it very well.<a href=\"https://datatables.net/manual/tech-notes/4\" rel=\"nofollow noreferrer\">https://datatables.net/manual/tech-notes/4</a></p>\n\n<p>Each cell in DataTables requests data, and when DataTables tries to obtain data for a cell and is unable to do so, it will trigger a warning, <strong>telling you that data is not available where it was expected to be</strong></p>\n\n<blockquote>\n  <p>DataTables warning: table id={id} - Requested unknown parameter '{parameter}' for row {row-index}, column{column-index}`</p>\n</blockquote>\n\n<p>where:\n<code>{id}</code> is replaced with the DOM id of the table that has triggered the error</p>\n\n<p><code>{parameter}</code> is the name of the data parameter DataTables is requesting</p>\n\n<p><code>{row-index}</code> is the DataTables internal row index (row().index()API) for the row that has triggered the error.</p>\n\n<p><code>{column-index}</code> is the column data index (column().index()API) for the column that has triggered the error. The column index information was added in DataTables 1.10.10.</p>\n\n<p>So to break it down, DataTables has requested data for a given row, of the <code>{parameter}</code> provided and there is no data there, or it is null or undefined (DataTables doesn't know, by default how to display these parameters - see below if your data does contain these values).</p>\n\n<p><code>id</code> in your case being <code>datatable_tabletools</code></p>\n\n<p><code>parameter</code> in your case being <code>1</code></p>\n\n<p><code>row-index</code> in your case being <code>row 1</code></p>\n\n<p>Finally, to give you a short answer, <code>column 1</code> <code>row 1</code> in <code>datatable_tabletools</code> does not contain the data it is expecting, it is either null or empty or incorrect format.</p>\n\n<p>So have a look at what the code is requesting and see what is not in the table.</p>\n"}], "owner": {"reputation": 147, "user_id": 8469861, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/qMnAc.jpg?s=128&g=1", "display_name": "bailey.bailey", "link": "https://stackoverflow.com/users/8469861/bailey-bailey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 115, "favorite_count": 0, "accepted_answer_id": 47172432, "answer_count": 1, "score": 1, "last_activity_date": 1510143036, "creation_date": 1510098371, "last_edit_date": 1510143036, "question_id": 47169273, "link": "https://stackoverflow.com/questions/47169273/receiving-error-i-dont-understand-using-smartadmin-bootstrap-datatables", "title": "Receiving error I don&#39;t understand using Smartadmin Bootstrap Datatables", "body": "<p>Hi I'm trying to implement a Datatable to a webpage that is rendered using Perl and Template Toolkit.\nI'm receiving a pop-up error from the data table when it is rendered</p>\n\n<p>This is the error:</p>\n\n<pre><code>DataTables warning: table id=datatable_tabletools - Requested unknown                             \nparameter '1' for row 1. For more information about this error, please see             \nhttp://datatables.net/tn/4\n</code></pre>\n\n<p>I've read the documentation on this error but I'm still unsure as to why I'm receiving it</p>\n\n<p>Here is the code I believe it is related to.</p>\n\n<pre><code>              &lt;table iq-datatable id=\"datatable_tabletools\" class=\"table table-striped table-bordered table-hover render_me_as_datatable\" width=\"100%\"&gt;\n\n                &lt;thead&gt;\n                  &lt;tr role=\"row\"&gt;\n                    &lt;th class=\"sorting_asc\"&gt;ID&lt;/th&gt;\n                    &lt;th class=\"sorting\"&gt;thing&lt;/th&gt;\n                    &lt;th class=\"sorting\"&gt;otherthing&lt;/th&gt;\n                    &lt;th class=\"sorting\"&gt;anotherthing&lt;/th&gt;\n                    &lt;th class=\"sorting\"&gt;morething&lt;/th&gt;\n                    &lt;th class=\"sorting\"&gt;something&lt;/th&gt;\n                    &lt;th class=\"sorting\"&gt;&lt;/th&gt;\n                  &lt;/tr&gt;\n                &lt;/thead&gt;\n                &lt;tbody&gt;\n                  [% FOREACH item IN list%]\n                  &lt;tr role=\"row\" class=\"odd [% item.var%]\"\n                   [% IF item.var== \"CLOSED\" %]\n                      style=\"background-color: lightgreen;\"\n                    [% ELSE %]\n                      style=\"background-color: lightyellow;\"\n                   [% END %]&gt;\n                    &lt;td class=\"sorting_1\"&gt;[% item.var%]&lt;/td&gt;\n                    &lt;td&gt;[% item.var1%]&lt;/td&gt;\n                    &lt;td&gt;[% item.var2%]&lt;/td&gt;\n                    &lt;td&gt;[% item.var3 FILTER currency %]&lt;/td&gt;\n                    &lt;td&gt;[% item.var4%]&lt;/td&gt;\n                    &lt;td&gt;[% item.var5%]&lt;/td&gt;\n                    &lt;td&gt; &lt;a href=\"#\" onclick=\"edit([% item.var6%]);return false;\"&gt; &lt;i class=\"fa fa-edit\"&gt;&lt;/i&gt; View &lt;/a&gt; &lt;/td&gt;\n                  &lt;/tr&gt;\n</code></pre>\n"}, {"tags": ["regex", "perl", "chomp"], "comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1510074699, "post_id": 47163439, "comment_id": 81276987, "body": "I normally use <a href=\"http://search.cpan.org/~kentnl/HTML-Tree-5.07/lib/HTML/TreeBuilder.pm\" rel=\"nofollow noreferrer\">HTML::TreeBuilder</a> (for HTML)"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 2, "creation_date": 1510079543, "post_id": 47163439, "comment_id": 81279755, "body": "If you&#39;re processing HTML or XML then you should use a library specifically for that purpose, rather than trying to create your own using regex patterns."}], "answers": [{"tags": [], "owner": {"reputation": 7565, "user_id": 1021515, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/Z9QcP.jpg?s=128&g=1", "display_name": "mwp", "link": "https://stackoverflow.com/users/1021515/mwp"}, "is_accepted": false, "score": 8, "last_activity_date": 1510074796, "last_edit_date": 1510074796, "creation_date": 1510074007, "answer_id": 47163491, "question_id": 47163439, "link": "https://stackoverflow.com/questions/47163439/grab-values-between-delimiters-in-perl-from-chomped-line/47163491#47163491", "title": "Grab values between delimiters in Perl from chomped line", "body": "<p>You need to modify the regex to grab multiple matches:</p>\n\n<pre><code>my @tags = $line =~ m/&lt;tag&gt;(.*?)&lt;\\/tag&gt;/g;\n</code></pre>\n\n<p>You may be better off using an HTML parser to perform this operation. Parsing HTML with regular expressions is <a href=\"https://stackoverflow.com/a/1732454/1021515\">fraught with peril</a>. For example, take a look at <a href=\"http://search.cpan.org/~kawasaki/HTML-TagParser-0.20/lib/HTML/TagParser.pm\" rel=\"noreferrer\">HTML::TagParser</a>:</p>\n\n<pre><code>my $html = HTML::TagParser-&gt;new(&lt;&lt;'EOF');\nThis is &lt;tag&gt; an &lt;/tag&gt; example\nof the &lt;tag&gt; file &lt;/tag&gt; that I\nam &lt;tag&gt; trying &lt;/tag&gt; to &lt;tag&gt; parse &lt;/tag&gt;\nEOF\n\nmy @tags = $html-&gt;getElementsByTagName('tag');\nmy @tagarray = map { $_-&gt;innerText() } @tags;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 793701, "user_id": 19068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d2d3229ed1961d2bd81853242493247?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/19068/quentin"}, "is_accepted": true, "score": 7, "last_activity_date": 1510074060, "creation_date": 1510074060, "answer_id": 47163498, "question_id": 47163439, "link": "https://stackoverflow.com/questions/47163439/grab-values-between-delimiters-in-perl-from-chomped-line/47163498#47163498", "title": "Grab values between delimiters in Perl from chomped line", "body": "<blockquote>\n  <p>I suspect this has something to do with chomp</p>\n</blockquote>\n\n<p>No. It is because you are capturing only one value and assigning it to a scalar.</p>\n\n<p>Make the regex global (<code>/g</code>) and store the results in an array.</p>\n\n<pre><code>#!/usr/bin/env perl\n\nuse strict;\nuse warnings;\nuse v5.10;\n\nmy $line = \"am &lt;tag&gt; trying &lt;/tag&gt; to &lt;tag&gt; parse &lt;/tag&gt;\";\nmy @tags;\n(@tags) = $line =~ m/&lt;tag&gt;(.*?)&lt;\\/tag&gt;/g;\nsay join \",\", @tags;\n</code></pre>\n"}], "owner": {"reputation": 316, "user_id": 7700994, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e3626595e39a5ebc93ac141b0501ffe6?s=128&d=identicon&r=PG&f=1", "display_name": "Natalie", "link": "https://stackoverflow.com/users/7700994/natalie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 133, "favorite_count": 0, "accepted_answer_id": 47163498, "answer_count": 2, "score": 2, "last_activity_date": 1510074796, "creation_date": 1510073838, "question_id": 47163439, "link": "https://stackoverflow.com/questions/47163439/grab-values-between-delimiters-in-perl-from-chomped-line", "title": "Grab values between delimiters in Perl from chomped line", "body": "<p>I am trying to grab the values between two delimiters in Perl using regex. I am opening a file and using chomp to go through the file line by line. Example of how the file looks:</p>\n\n<pre><code>\"This is &lt;tag&gt; an &lt;/tag&gt; example\nof the &lt;tag&gt; file &lt;/tag&gt; that I\nam &lt;tag&gt; trying &lt;/tag&gt; to &lt;tag&gt; parse &lt;/tag&gt;\"\n</code></pre>\n\n<p>I am able to get the first couple of words: \"an\", \"file\", but on the third line I can only get \"trying\" and not \"parse\". This is the code I am trying to use:</p>\n\n<pre><code>while (chomp($line = &lt;$filename&gt;)){\n   ($tag) = $line =~ m/&lt;tag&gt;(.*?)&lt;\\/tag&gt;/;\n   push(@tagarray, $tag);\n}\n</code></pre>\n\n<p>I suspect this has something to do with <code>chomp</code> but don't see how to parse the file differently.</p>\n"}, {"tags": ["perl", "apache2.4", "mod-perl2"], "comments": [{"owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "edited": false, "score": 1, "creation_date": 1510069121, "post_id": 47161096, "comment_id": 81273180, "body": "Correlate the errors with requests and see if they are from legitimate users? From my own experience they seem to come from bots that send a request, but close the connection before getting a response."}, {"owner": {"reputation": 4155, "user_id": 2006878, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/VepQx.jpg?s=128&g=1", "display_name": "Andrew Newby", "link": "https://stackoverflow.com/users/2006878/andrew-newby"}, "reply_to_user": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "edited": false, "score": 0, "creation_date": 1510069929, "post_id": 47161096, "comment_id": 81273828, "body": "@ChrisTurner thanks will look into that. Bit tricky to do, as the error log doesn&#39;t have an IP in. Maybe I can tweak the error log format so it includes it for the future occurences"}, {"owner": {"reputation": 4155, "user_id": 2006878, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/VepQx.jpg?s=128&g=1", "display_name": "Andrew Newby", "link": "https://stackoverflow.com/users/2006878/andrew-newby"}, "reply_to_user": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "edited": false, "score": 0, "creation_date": 1510132472, "post_id": 47161096, "comment_id": 81300338, "body": "@ChrisTurner - I&#39;ve updated my <code>ErrorLogFormat</code> in Apache, to try and find the IPs... but for some reason, on that error it doesn&#39;t work? (please see my updated question). Any ideas?"}], "answers": [{"tags": [], "owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "is_accepted": false, "score": 4, "last_activity_date": 1510086323, "last_edit_date": 1510086323, "creation_date": 1510085037, "answer_id": 47166532, "question_id": 47161096, "link": "https://stackoverflow.com/questions/47161096/io-write-32-broken-pipe-in-apache-2-4/47166532#47166532", "title": "IO write: (32) Broken pipe in Apache 2.4", "body": "<p>This error occurs when the client has gone away before all the output is sent.  On earlier versions of apache/mod_perl (apache 2.0?) it just failed silently (and I think it was a connection aborted error on 2.2).</p>\n\n<p>I see these from legitimate requests with very large output or, occasionally, mobile users and just ignore them, as long as there aren't enough to indicate some larger problem.</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 1548518, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2e485609f51b7fb0ddcab65f4dd1e1ae?s=128&d=identicon&r=PG", "display_name": "IainK", "link": "https://stackoverflow.com/users/1548518/iaink"}, "is_accepted": false, "score": 0, "last_activity_date": 1588782953, "creation_date": 1588782953, "answer_id": 61640405, "question_id": 47161096, "link": "https://stackoverflow.com/questions/47161096/io-write-32-broken-pipe-in-apache-2-4/61640405#61640405", "title": "IO write: (32) Broken pipe in Apache 2.4", "body": "<p>Since migrating to apache2.4, we've seen these errors regularly too:</p>\n\n<pre><code>IO write: (32) Broken pipe\n</code></pre>\n\n<p>They are triggered by a client terminating the connection incorrectly, something that was ignored in previous versions of apache, or reported under a different error.</p>\n\n<p>We also (on 2.4) see the similar error</p>\n\n<pre><code>Apache2 IO write: (104) Connection reset by peer\n</code></pre>\n\n<p>Up to apache2.2, we saw this error:</p>\n\n<pre><code>IO write: (103) Software caused connection abort\n</code></pre>\n\n<p>The vast majority (but not all) of these errors are triggered by bots and also use HTTP 1.0 protocol rather than 1.1, but I'm sure that bona-fide network and client errors will trigger them too.</p>\n"}], "owner": {"reputation": 4155, "user_id": 2006878, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/VepQx.jpg?s=128&g=1", "display_name": "Andrew Newby", "link": "https://stackoverflow.com/users/2006878/andrew-newby"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2251, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1588782953, "creation_date": 1510067082, "last_edit_date": 1510132425, "question_id": 47161096, "link": "https://stackoverflow.com/questions/47161096/io-write-32-broken-pipe-in-apache-2-4", "title": "IO write: (32) Broken pipe in Apache 2.4", "body": "<p>We have just moved our site to a new server, and keep seeing this error message:</p>\n\n<pre><code>[Tue Nov 07 14:57:08.796821 2017] [:error] [pid 1777] :Apache2 IO write: (32) Broken pipe at /home/example/web/example.org/public_html/cgi-bin/links/admin/Booking/Calendar.pm line 228\n</code></pre>\n\n<p>Line 228 is:</p>\n\n<pre><code>print Links::SiteHTML::display('calendar_view_room', { month_loop =&gt; \\@dates, owner_id_fk =&gt; $room_owner_useridfk, room_name =&gt; $room-&gt;{room_name_show}, target =&gt; $target, room_id =&gt; $room_id });\n</code></pre>\n\n<p>The server setup is <strong>nginx</strong> front end, and then a proxy pass for the Perl stuff over to <strong>Apache 2.4</strong>. We are also using <strong>mod_perl</strong> on the Apache end. </p>\n\n<p>Is there anything I could look at, to try and figure out why this error comes up? The only thing I could find on Google goes back to 2009, and wasn't that much help.</p>\n\n<p><strong>UPDATE:</strong> To try and work out the IP's causing this issue (so I can see if they are genuine, or bots), I've updated my Apache error log conf to:</p>\n\n<pre><code>ErrorLogFormat \"[%t] [%l] [pid %P] %F: %E: [client %a] %M\"\n</code></pre>\n\n<p>I get the new format fine for some:</p>\n\n<blockquote>\n  <p>[Wed Nov 08 08:54:41 2017] [error] [pid 12574] util_script.c(591):\n  [client 122.119.97.15:42982] malformed header from script\n  'community.cgi': Bad header:</p>\n</blockquote>\n\n<p>...but for the errors relating to the IO, I don't get anything for the client?</p>\n\n<blockquote>\n  <p>[Wed Nov 08 08:59:53 2017] [error] [pid 12576] Apache2__Log.h(331):\n  [client :Apache2 IO write: (32) Broken pipe at\n  /home/example.org/public_html/cgi-bin/links/admin/Booking/Calendar.pm\n  line 228</p>\n</blockquote>\n"}, {"tags": ["perl", "powershell"], "comments": [{"owner": {"reputation": 18730, "user_id": 2102693, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sD3s8.jpg?s=128&g=1", "display_name": "Bill_Stewart", "link": "https://stackoverflow.com/users/2102693/bill-stewart"}, "edited": false, "score": 0, "creation_date": 1510066931, "post_id": 47160712, "comment_id": 81271597, "body": "As an aside: <a href=\"http://www.itprotoday.com/management-mobility/running-executables-powershell\" rel=\"nofollow noreferrer\">This article</a> provides <code>showargs.exe</code>, which can be helpful in troubleshooting PowerShell command-line parsing."}], "answers": [{"comments": [{"owner": {"reputation": 14946, "user_id": 8188846, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/85a7614508b329eb4a495c59ccf64ac7?s=128&d=identicon&r=PG", "display_name": "Maximilian Burszley", "link": "https://stackoverflow.com/users/8188846/maximilian-burszley"}, "edited": false, "score": 1, "creation_date": 1510066438, "post_id": 47160788, "comment_id": 81271245, "body": "You could just use <code>perl --% -i.bak script.pl *.txt</code> if you&#39;re on <code>v3</code>+.  This shuts off the parser"}], "tags": [], "owner": {"reputation": 4442, "user_id": 5632412, "user_type": "registered", "accept_rate": 2, "profile_image": "https://www.gravatar.com/avatar/7922497d2bfc3a8fe33d4a22b15d995a?s=128&d=identicon&r=PG&f=1", "display_name": "Bimo", "link": "https://stackoverflow.com/users/5632412/bimo"}, "is_accepted": false, "score": 0, "last_activity_date": 1510066209, "creation_date": 1510066209, "answer_id": 47160788, "question_id": 47160712, "link": "https://stackoverflow.com/questions/47160712/perl-i-bak-script-pl-txt-from-powershell-prompt-using-activestate-perl-and/47160788#47160788", "title": "&quot;perl -i.bak script.pl *.txt&quot; from powershell prompt using activestate perl and windows 10", "body": "<p>Found the answer:</p>\n\n<pre><code>PS&gt; perl \"-i.bak\" script.pl (dir *.txt | %{$_.FullName})\n</code></pre>\n\n<p>The key is the quotes around the -i flag including its parameter value.</p>\n"}], "owner": {"reputation": 4442, "user_id": 5632412, "user_type": "registered", "accept_rate": 2, "profile_image": "https://www.gravatar.com/avatar/7922497d2bfc3a8fe33d4a22b15d995a?s=128&d=identicon&r=PG&f=1", "display_name": "Bimo", "link": "https://stackoverflow.com/users/5632412/bimo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 35, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1510066209, "creation_date": 1510065951, "question_id": 47160712, "link": "https://stackoverflow.com/questions/47160712/perl-i-bak-script-pl-txt-from-powershell-prompt-using-activestate-perl-and", "title": "&quot;perl -i.bak script.pl *.txt&quot; from powershell prompt using activestate perl and windows 10", "body": "<p>How to invoke this command from powershell prompt using activestate perl?</p>\n\n<pre><code>PS&gt; perl -i.bak script.pl *.txt \n</code></pre>\n\n<p>always gives me an error on the -i flag, then refuses to expand the *.txt</p>\n\n<p>I can get around the *.txt problem.</p>\n\n<pre><code>PS&gt; perl -i.bak script.pl (dir *.txt | %{$_.FullName})\n</code></pre>\n\n<p>But, the escaping of '.' for -i flag has me baffled.</p>\n\n<p>This works however:</p>\n\n<pre><code>PS&gt; perl -ibak script.pl (dir *.txt | %{$_.FullName})\n</code></pre>\n\n<p>Its just that its kind of annoying to not have the dot in the backup file extension.  So I'm back to wondering how to escape the '.' in powershell.</p>\n"}, {"tags": ["perl", "file", "awk", "sed", "replace"], "comments": [{"owner": {"reputation": 29, "user_id": 8377119, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/95acd6a3835f93efe38822ade65abda2?s=128&d=identicon&r=PG&f=1", "display_name": "Cris", "link": "https://stackoverflow.com/users/8377119/cris"}, "reply_to_user": {"reputation": 132964, "user_id": 171318, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ePRKy.jpg?s=128&g=1", "display_name": "hek2mgl", "link": "https://stackoverflow.com/users/171318/hek2mgl"}, "edited": false, "score": 0, "creation_date": 1510064116, "post_id": 47160043, "comment_id": 81269698, "body": "sed -i &#39;s/./0./g&#39;  but it doesn&#39;t work! I am pretty new working with sed and awk!"}, {"owner": {"reputation": 205702, "user_id": 7552, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b60298053f87465641c1b1192338c8cd?s=128&d=identicon&r=PG", "display_name": "glenn jackman", "link": "https://stackoverflow.com/users/7552/glenn-jackman"}, "edited": false, "score": 1, "creation_date": 1510068356, "post_id": 47160043, "comment_id": 81272619, "body": "Does your data have any numbers greater than one? We don&#39;t want to transform <code>1.0</code> into <code>10.0</code>"}], "answers": [{"comments": [{"owner": {"reputation": 132964, "user_id": 171318, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ePRKy.jpg?s=128&g=1", "display_name": "hek2mgl", "link": "https://stackoverflow.com/users/171318/hek2mgl"}, "edited": false, "score": 1, "creation_date": 1510067621, "post_id": 47160258, "comment_id": 81272077, "body": "The <code>sub() + 1</code>  logic is very nice!"}], "tags": [], "owner": {"reputation": 14904, "user_id": 3161993, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/56e8M.png?s=128&g=1", "display_name": "Akshay", "link": "https://stackoverflow.com/users/3161993/akshay"}, "is_accepted": false, "score": 1, "last_activity_date": 1510105232, "last_edit_date": 1510105232, "creation_date": 1510064619, "answer_id": 47160258, "question_id": 47160043, "link": "https://stackoverflow.com/questions/47160043/replace-for-0-in-a-txt-file-with-a-huge-number-of-lines-only-in-a-certain-num/47160258#47160258", "title": "Replace . for 0. in a txt file with a huge number of lines only in a certain number", "body": "<blockquote>\n  <p>I would like to replace the . in the second column with a 0. </p>\n</blockquote>\n\n<pre><code>awk '{sub(/\\./, 0, $2) }1' infile\n</code></pre>\n\n<ul>\n<li><code>sub(/\\./, 0, $2)</code>  substitute, dot (<code>.</code>) with <code>0</code> in second field. </li>\n<li><code>1</code> at the end does default operation that is print current/record/row, print $0. To know how awk works try, awk '1' infile, which will print all records/lines, whereas awk '0' infile prints nothing. Any number other than zero is true, which triggers the default behavior.</li>\n</ul>\n\n<p>Below one may be used, if dot(<code>.</code>) to be replaced with zero and dot (<code>0.</code>)</p>\n\n<pre><code>awk '{sub(/\\./, \"0&amp;\", $2) }1' infile\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "edited": false, "score": 0, "creation_date": 1510064692, "post_id": 47160264, "comment_id": 81270059, "body": "That&#39;s not entirely correct as that&#39;ll replace any fullstops in any column, not just the second one"}, {"owner": {"reputation": 132964, "user_id": 171318, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ePRKy.jpg?s=128&g=1", "display_name": "hek2mgl", "link": "https://stackoverflow.com/users/171318/hek2mgl"}, "reply_to_user": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "edited": false, "score": 1, "creation_date": 1510064757, "post_id": 47160264, "comment_id": 81270103, "body": "Well, that&#39;s fine with the example data because it contains only a single dot."}, {"owner": {"reputation": 29, "user_id": 8377119, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/95acd6a3835f93efe38822ade65abda2?s=128&d=identicon&r=PG&f=1", "display_name": "Cris", "link": "https://stackoverflow.com/users/8377119/cris"}, "edited": false, "score": 1, "creation_date": 1510065020, "post_id": 47160264, "comment_id": 81270259, "body": "Thank  you very much it works perfectly! I was trying myself with another one:"}, {"owner": {"reputation": 29, "user_id": 8377119, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/95acd6a3835f93efe38822ade65abda2?s=128&d=identicon&r=PG&f=1", "display_name": "Cris", "link": "https://stackoverflow.com/users/8377119/cris"}, "edited": false, "score": 1, "creation_date": 1510065078, "post_id": 47160264, "comment_id": 81270293, "body": "sed &#39;s/\\./.0/g&#39;  also works! Thank you for your help!"}], "tags": [], "owner": {"reputation": 132964, "user_id": 171318, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ePRKy.jpg?s=128&g=1", "display_name": "hek2mgl", "link": "https://stackoverflow.com/users/171318/hek2mgl"}, "is_accepted": false, "score": 5, "last_activity_date": 1510068262, "last_edit_date": 1510068262, "creation_date": 1510064633, "answer_id": 47160264, "question_id": 47160043, "link": "https://stackoverflow.com/questions/47160043/replace-for-0-in-a-txt-file-with-a-huge-number-of-lines-only-in-a-certain-num/47160264#47160264", "title": "Replace . for 0. in a txt file with a huge number of lines only in a certain number", "body": "<p>The <code>.</code> has a special meaning in regular expression language used by sed. It means <em>an arbitrary character</em> which will effectively replace <em>any</em> character by <code>.0</code>.</p>\n\n<p>Correct is to escape the dot in the search part, like this:</p>\n\n<pre><code>sed 's/\\./0./'\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1510069990, "post_id": 47160755, "comment_id": 81273878, "body": "If we&#39;re doing <code>perl</code> I&#39;d probably build in a split in there, because then you can correctly select the column."}], "tags": [], "owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "is_accepted": false, "score": 0, "last_activity_date": 1510066105, "creation_date": 1510066105, "answer_id": 47160755, "question_id": 47160043, "link": "https://stackoverflow.com/questions/47160043/replace-for-0-in-a-txt-file-with-a-huge-number-of-lines-only-in-a-certain-num/47160755#47160755", "title": "Replace . for 0. in a txt file with a huge number of lines only in a certain number", "body": "<p>Seeing as how this is tagged <code>perl</code>, the equivalent Perl solution is:</p>\n\n<pre><code>perl -pi -e 's/\\./0./' YOURFILE\n</code></pre>\n\n<p>As with sed, <code>.</code> in a regex matches any character (except newline), so it needs to be escaped with a <code>\\</code> if you want to match it literally.</p>\n"}, {"comments": [{"owner": {"reputation": 132964, "user_id": 171318, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ePRKy.jpg?s=128&g=1", "display_name": "hek2mgl", "link": "https://stackoverflow.com/users/171318/hek2mgl"}, "edited": false, "score": 2, "creation_date": 1510068961, "post_id": 47161624, "comment_id": 81273052, "body": "It depends on the precision used. Check this: <code>awk &#39;{$1+=0}1&#39; &lt;&lt;&lt; &#39;.1234567&#39;</code> --&gt; output: <code>0.123457</code>"}], "tags": [], "owner": {"reputation": 205702, "user_id": 7552, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b60298053f87465641c1b1192338c8cd?s=128&d=identicon&r=PG", "display_name": "glenn jackman", "link": "https://stackoverflow.com/users/7552/glenn-jackman"}, "is_accepted": false, "score": 0, "last_activity_date": 1510068577, "creation_date": 1510068577, "answer_id": 47161624, "question_id": 47160043, "link": "https://stackoverflow.com/questions/47160043/replace-for-0-in-a-txt-file-with-a-huge-number-of-lines-only-in-a-certain-num/47161624#47161624", "title": "Replace . for 0. in a txt file with a huge number of lines only in a certain number", "body": "<p>This appears to work with GNU awk, just add zero to the 2nd field:</p>\n\n<pre><code>awk '{print $1, $2 + 0}' file\n</code></pre>\n\n<p>Pipe the output into <code>column -t</code> to make it prettier.</p>\n\n<p>If someone has time to benchmark, I'd be curious how much more slow this one runs.</p>\n"}], "owner": {"reputation": 29, "user_id": 8377119, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/95acd6a3835f93efe38822ade65abda2?s=128&d=identicon&r=PG&f=1", "display_name": "Cris", "link": "https://stackoverflow.com/users/8377119/cris"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 67, "favorite_count": 0, "answer_count": 4, "score": 1, "last_activity_date": 1510105232, "creation_date": 1510063846, "last_edit_date": 1510066114, "question_id": 47160043, "link": "https://stackoverflow.com/questions/47160043/replace-for-0-in-a-txt-file-with-a-huge-number-of-lines-only-in-a-certain-num", "title": "Replace . for 0. in a txt file with a huge number of lines only in a certain number", "body": "<p>I would like to replace the . in the second column with a 0. in the second column, in order to run a program. The original file has two columns and around 6 millions of lines and I don't have any idea how to do this. </p>\n\n<pre><code>rs4951859         .4251\nrs142557973       .3874\nrs141242758       .2732\nrs79010578        .7447\n</code></pre>\n\n<hr>\n\n<p>I've tried</p>\n\n<pre><code>sed -i 's/./0./g'\n</code></pre>\n\n<p>but that doesn't work.</p>\n"}, {"tags": ["perl"], "answers": [{"comments": [{"owner": {"reputation": 27, "user_id": 7581932, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh4.googleusercontent.com/-dAok1fX2tmw/AAAAAAAAAAI/AAAAAAAAAIE/2L0PJm41GVs/photo.jpg?sz=128", "display_name": "Jesvin Joy", "link": "https://stackoverflow.com/users/7581932/jesvin-joy"}, "edited": false, "score": 0, "creation_date": 1510073506, "post_id": 47163045, "comment_id": 81276214, "body": "I did arrive at a solution similar to your approach but my solution works partially. It prints only lines with the word &quot;gene&quot;. Your solution works well. Thanks."}], "tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": true, "score": 1, "last_activity_date": 1510072618, "creation_date": 1510072618, "answer_id": 47163045, "question_id": 47158204, "link": "https://stackoverflow.com/questions/47158204/how-to-remove-overlapping-regions-in-gff3-file-using-perl/47163045#47163045", "title": "How to remove overlapping regions in gff3 file using perl?", "body": "<p>This turns out to be an interesting problem. You want to de-dup the rows, but (I think) that if you find a larger range later in the file, you want to output this large range in the position where the original, smaller, range was found.</p>\n\n<p>To be honest, I didn't look at your solution but started from scratch.</p>\n\n<p>I used two data structures. <code>%line_data</code> contains details of the lines we have processed. It is a multi-level hash and is keyed on seqid, strand and region. If a new record doesn't match a value in the hash then we are a combination of seqid, strand and region for the first time. If a new record does match, then we've seen this combination before and we work out which of the two has the largest range and overwrite if necessary.</p>\n\n<p>Then there's <code>@lines</code> which contains the data we are going to output. It contains references to the hashes in <code>%line_data</code>. There's a bit of house-keeping needed to keep that up to date when larger ranges are found.</p>\n\n<p>So this is what I ended up with. It gives the correct output for your input, but I don't know if it will break on more varied input.</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\nuse feature 'say';\n\nmy @lines;\nmy %line_data;\n\n# Column names (for use as hash keys)    \nmy @cols = qw[seqid source region start end score strand frame attribute];\n\n# Store the input data in DATA for easier testing\nwhile (&lt;DATA&gt;) {\n  my %record;\n  # Split a record into a hash\n  @record{@cols} = split;\n\n  # If this key combination exists...\n  if (exists $line_data{$record{seqid}}{$record{strand}}{$record{region}}) {\n    # Get the previous record with these keys...\n    my $prev = $line_data{$record{seqid}}{$record{strand}}{$record{region}};\n    # See if the new range is larger...\n    if ($record{start} &gt; $prev-&gt;{start} and $record{end} &gt; $prev-&gt;{end}) {\n      # If so, overwrite it.\n      $line_data{$record{seqid}}{$record{strand}}{$record{region}} = \\%record;\n      $lines[$prev-&gt;{pos}] = \\%record;\n      $record{post} = $prev-&gt;{pos};\n    }\n  } else {\n    # We haven't seen this key combination before.\n    # So just store it.\n    $line_data{$record{seqid}}{$record{strand}}{$record{region}} = \\%record;\n    push @lines, \\%record;\n    $record{pos} = $#lines;\n  }\n}\n\n# Having processed the data, we walk the @lines array,\n# de-referencing the hash and joining the values with a space.\nforeach (@lines) {\n  say join ' ', @$_{@cols};\n}\n\n__DATA__\nscaffold591 Source gene 3322458 3376057 0.41 - . ID=g24007\nscaffold591 Source transcript 3322458 3376057 0.41 - . ID=g24007.t1;Parent=g24007\nscaffold591 Source transcription_end_site 3322458 3322458 . - . Parent=g24007.t1\nscaffold591 Source gene 3322500 3346055 0.41 - . ID=g24007\nscaffold591 Source transcript 3322500 3346055 0.41 - . ID=g24007.t1;Parent=g24007\nscaffold591 Source transcription_end_site 3322500 3322500 . - . Parent=g24007.t1\nscaffold591 Source gene 3377307 3513095 0.46 + . ID=g24008\nscaffold591 Source transcript 3377307 3513095 0.41 + . ID=g24008.t1;Parent=g24008\nscaffold591 Source transcription_end_site 3377307 3377307 . + . Parent=g24008.t1\n</code></pre>\n"}], "owner": {"reputation": 27, "user_id": 7581932, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh4.googleusercontent.com/-dAok1fX2tmw/AAAAAAAAAAI/AAAAAAAAAIE/2L0PJm41GVs/photo.jpg?sz=128", "display_name": "Jesvin Joy", "link": "https://stackoverflow.com/users/7581932/jesvin-joy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 101, "favorite_count": 0, "accepted_answer_id": 47163045, "answer_count": 1, "score": 2, "last_activity_date": 1510072618, "creation_date": 1510058230, "question_id": 47158204, "link": "https://stackoverflow.com/questions/47158204/how-to-remove-overlapping-regions-in-gff3-file-using-perl", "title": "How to remove overlapping regions in gff3 file using perl?", "body": "<p>I am trying to remove overlapping regions from a 9 column gff3 file.</p>\n\n<pre><code>**Input file:**\nscaffold591 Source gene 3322458 3376057 0.41 - . ID=g24007\nscaffold591 Source transcript 3322458 3376057 0.41 - . ID=g24007.t1;Parent=g24007\nscaffold591 Source transcription_end_site 3322458 3322458 . - . Parent=g24007.t1\nscaffold591 Source gene 3322500 3346055 0.41 - . ID=g24007\nscaffold591 Source transcript 3322500 3346055 0.41 - . ID=g24007.t1;Parent=g24007\nscaffold591 Source transcription_end_site 3322500 3322500 . - . Parent=g24007.t1\nscaffold591 Source gene 3377307 3513095 0.46 + . ID=g24008\nscaffold591 Source transcript 3377307 3513095 0.41 + . ID=g24008.t1;Parent=g24008\nscaffold591 Source transcription_end_site 3377307 3377307 . + . Parent=g24008.t1\n</code></pre>\n\n<p>Here I am trying to compare only the rows having \"gene\" of the same strand i.e \"-\" or \"+\" (7th column).</p>\n\n<p>For example row 1 and row 4.</p>\n\n<pre><code>scaffold591 Source gene 3322458 3376057 0.41 - . ID=g24007\nscaffold591 Source gene 3322500 3346055 0.41 - . ID=g24007\n</code></pre>\n\n<p>They are \"gene\" from the same scaffold and same \"-\" strand (7th column). The row4 coordinates (column 4 and 5) lies within the range of row 1 coordinates. In such cases, my code should remove the overlapping row 4 and retain the row1 having the larger range.</p>\n\n<pre><code>**My expected output:**\nscaffold591 Source gene 3322458 3376057 0.41 - . ID=g24007\nscaffold591 Source transcript 3322458 3376057 0.41 - . ID=g24007.t1;Parent=g24007\nscaffold591 Source transcription_end_site 3322458 3322458 . - . Parent=g24007.t1\nscaffold591 Source gene 3377307 3513095 0.46 + . ID=g24008\nscaffold591 Source transcript 3377307 3513095 0.41 + . ID=g24007.t1;Parent=g24008\nscaffold591 Source transcription_end_site 3377307 3377307 . + . Parent=g24008.t1\n</code></pre>\n\n<p>My code prints row1 and its following lines twice</p>\n\n<pre><code>My code:\n#!/usr/bin/perl\nuse warnings;\nuse strict;\nuse List::Util qw{ max };\n\nopen (IN, \"&lt;scaffold_sample.txt\");\n\nmy $previous_seqid =\"\";\nmy $previous_strand;\nmy $previous_start;\nmy $previous_end;\nmy @gff;\nmy @tmp;\nwhile (&lt;IN&gt;)\n {\n    chomp;\n    my ($seqid,$source, $region, $start, $end, $score, $strand, $frame, $attribute) = split (\"\\t\",$_);  \n    @gff = ($seqid,$source, $region, $start, $end, $score, $strand, $frame, $attribute);\n\n    if ($seqid eq $previous_seqid &amp;&amp; $strand eq $previous_strand &amp;&amp; $region eq 'gene')\n    {\n        if($start &lt; $previous_end &amp;&amp; $end &lt; $previous_end)\n        {\n            @gff = @tmp;\n            $previous_seqid = $gff[0];\n            $previous_strand = $gff[6];\n            $previous_start = $gff[3];\n            $previous_end = $gff[4];\n            print join \"\\t\",@gff;\n            print \"\\n\";\n        }\n        else\n        {\n            @tmp = @gff;\n        }\n\n    }\n    else\n    {\n        @tmp = ($seqid,$source, $region, $start, $end, $score, $strand, $frame, $attribute);\n        $previous_seqid = $seqid;\n        $previous_strand = $strand;\n        $previous_start = $start;\n        $previous_end = $end;\n        print join \"\\t\",@tmp;\n        print \"\\n\";\n    }\n\n}\n</code></pre>\n\n<p>Please help.</p>\n"}, {"tags": ["wordpress", "perl", "cgi"], "comments": [{"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1510044168, "post_id": 47152778, "comment_id": 81256214, "body": "Sounds like Wordpress isn&#39;t important here. Step 1: Get CGI programs working on your server. Step 2: Use the working CGI URLs from Wordpress. Do your CGI URLs work outside of Wordpress? Please tell us (a lot!) more about what you have tried."}, {"owner": {"reputation": 173, "user_id": 5478114, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/41edd9b1f1237bf1216b24ad5e1f6178?s=128&d=identicon&r=PG&f=1", "display_name": "Melchester", "link": "https://stackoverflow.com/users/5478114/melchester"}, "reply_to_user": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1510045260, "post_id": 47152778, "comment_id": 81256901, "body": "I have 30 websites on this server, they all use cgi without a problem. This is the only word press site. It is a wordpress error page I get."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1510045395, "post_id": 47152778, "comment_id": 81256990, "body": "Unless you update your question to include a lot more information about a) what you are trying to achieve b) what you have done and c) what problems you are having, I expect this question will be closed within a couple of hours."}, {"owner": {"reputation": 173, "user_id": 5478114, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/41edd9b1f1237bf1216b24ad5e1f6178?s=128&d=identicon&r=PG&f=1", "display_name": "Melchester", "link": "https://stackoverflow.com/users/5478114/melchester"}, "reply_to_user": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 1, "creation_date": 1510045471, "post_id": 47152778, "comment_id": 81257045, "body": "a) I am trying to run a perl program. b) I put the &quot;hello world&quot; perl program in the cgi folder and changed the permissions. Then I tried to run it with a link.  c) I am getting a wordpress error page saying the page cannot be found."}], "answers": [{"comments": [{"owner": {"reputation": 130, "user_id": 7083585, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/im60o.png?s=128&g=1", "display_name": "\u90ed\u6625\u6797", "link": "https://stackoverflow.com/users/7083585/%e9%83%ad%e6%98%a5%e6%9e%97"}, "edited": false, "score": 0, "creation_date": 1516529378, "post_id": 47281247, "comment_id": 83717977, "body": "I also have the same issue. I&#39;m trying to figure out."}], "tags": [], "owner": {"reputation": 173, "user_id": 5478114, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/41edd9b1f1237bf1216b24ad5e1f6178?s=128&d=identicon&r=PG&f=1", "display_name": "Melchester", "link": "https://stackoverflow.com/users/5478114/melchester"}, "is_accepted": false, "score": 1, "last_activity_date": 1510649294, "creation_date": 1510649294, "answer_id": 47281247, "question_id": 47152778, "link": "https://stackoverflow.com/questions/47152778/how-to-run-a-perl-or-any-cgi-script-with-a-wordpress-installation/47281247#47281247", "title": "How to run a Perl (or any CGI script) with a Wordpress installation", "body": "<p>Okay, as suggested by the scarcity of responses, this is not a wordpress issue. In fact the cgi-bin folder had the wrong permissions, which triggered the wordpress page not found response.</p>\n"}], "owner": {"reputation": 173, "user_id": 5478114, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/41edd9b1f1237bf1216b24ad5e1f6178?s=128&d=identicon&r=PG&f=1", "display_name": "Melchester", "link": "https://stackoverflow.com/users/5478114/melchester"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1476, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1510649294, "creation_date": 1510041936, "last_edit_date": 1510045858, "question_id": 47152778, "link": "https://stackoverflow.com/questions/47152778/how-to-run-a-perl-or-any-cgi-script-with-a-wordpress-installation", "title": "How to run a Perl (or any CGI script) with a Wordpress installation", "body": "<p>I have a simple wordpress website. I would like to run some perl programs from the cgi-bin folder. But the wordpress install gives a page not found when I put the link into my browser.</p>\n\n<p>I put a simple \"hello world\" program in the cgi-bin folder, changed the permissions, then tried to execute it with a link.</p>\n\n<p>It seems that wordpress is overriding any links to the cgi folder and presenting a wordpress 404 page. I have no problem running cgi programs on any other website on the same server.</p>\n"}, {"tags": ["perl", "sas", "file-conversion", "perlscript"], "comments": [{"owner": {"reputation": 17619, "user_id": 7818749, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec4a72453e116debb802d55e88c2572e?s=128&d=identicon&r=PG&f=1", "display_name": "Gerhard", "link": "https://stackoverflow.com/users/7818749/gerhard"}, "edited": false, "score": 1, "creation_date": 1510035860, "post_id": 47150953, "comment_id": 81252061, "body": "Show what you have tried, where you failed with errors etc."}, {"owner": {"reputation": 1038, "user_id": 6389268, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/c3399b553cf9af21c66283a775c50c12?s=128&d=identicon&r=PG&f=1", "display_name": "pinegulf", "link": "https://stackoverflow.com/users/6389268/pinegulf"}, "edited": false, "score": 1, "creation_date": 1510036566, "post_id": 47150953, "comment_id": 81252365, "body": "Umm, Gerhard is right. What are you trying to do? From the description It&#39;s either that you want to Perl your SAS or other way around."}, {"owner": {"reputation": 197, "user_id": 8597009, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/85cc74416abf136bfa50eac9aaa65478?s=128&d=identicon&r=PG&f=1", "display_name": "Saumya Pandey", "link": "https://stackoverflow.com/users/8597009/saumya-pandey"}, "reply_to_user": {"reputation": 17619, "user_id": 7818749, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec4a72453e116debb802d55e88c2572e?s=128&d=identicon&r=PG&f=1", "display_name": "Gerhard", "link": "https://stackoverflow.com/users/7818749/gerhard"}, "edited": false, "score": 0, "creation_date": 1510050060, "post_id": 47150953, "comment_id": 81260179, "body": "@GerhardBarnard I have been trying to figure out the module required for conversion from xpt to Excel.I have 20 zipped xpt format files which I want to showcase in a BI Tool therefore I needed to convert those files to xls. Currently I have been started learning Perl and as the solution to the first step of my problem is not clear therefore I haven&#39;t been able to write the Script.I have tried using SAS Parser module for Perl but I guess that is only for .sas files.Kindly guide which module to use"}], "answers": [{"tags": [], "owner": {"reputation": 301, "user_id": 6278000, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oahCg.jpg?s=128&g=1", "display_name": "Thogerar", "link": "https://stackoverflow.com/users/6278000/thogerar"}, "is_accepted": true, "score": 0, "last_activity_date": 1510062072, "creation_date": 1510062072, "answer_id": 47159440, "question_id": 47150953, "link": "https://stackoverflow.com/questions/47150953/convert-file-with-xpt-extension-to-excel-using-perl/47159440#47159440", "title": "Convert file with XPT extension to Excel using Perl", "body": "<p>You can pass from xlsx to xpt with SAS easily following this example :</p>\n\n<p>From XLSX to the XPT format :</p>\n\n<pre><code>options VALIDVARNAME=V6;\nlibname in xlsx \"H:\\desktop\\XLSX\\d.xlsx\";\nlibname out xport \"H:\\desktop\\test.xpt\";\nproc copy inlib=in outlib=out;\nrun;\nlibname in clear;\nlibname out clear;\n</code></pre>\n\n<p>From XPT to the XLSX format :</p>\n\n<pre><code>options VALIDVARNAME=V6;\nlibname out xlsx \"H:\\desktop\\XLSX\\d2.xlsx\";\nlibname in xport \"H:\\desktop\\test.xpt\";\nproc copy inlib=in outlib=out;\nrun;\nlibname in clear;\nlibname out clear;\n</code></pre>\n\n<p>It worked on my computer.\nBe careful because it truncate the column (due to the option VALIDVARNAME=V6).</p>\n"}], "owner": {"reputation": 197, "user_id": 8597009, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/85cc74416abf136bfa50eac9aaa65478?s=128&d=identicon&r=PG&f=1", "display_name": "Saumya Pandey", "link": "https://stackoverflow.com/users/8597009/saumya-pandey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 691, "favorite_count": 0, "accepted_answer_id": 47159440, "answer_count": 1, "score": -2, "last_activity_date": 1510062072, "creation_date": 1510034458, "question_id": 47150953, "link": "https://stackoverflow.com/questions/47150953/convert-file-with-xpt-extension-to-excel-using-perl", "title": "Convert file with XPT extension to Excel using Perl", "body": "<p>I am currently new to Perl Scripting a detailed explanation would be helpful.\nI tried using the SAS Parser module but i guess it is for .sas files only.\nPlease suggest which library to use for this task.</p>\n"}, {"tags": ["c++", "perl", "g++", "xs"], "comments": [{"owner": {"reputation": 54872, "user_id": 1521179, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/MH7pk.png?s=128&g=1", "display_name": "amon", "link": "https://stackoverflow.com/users/1521179/amon"}, "edited": false, "score": 3, "creation_date": 1510003109, "post_id": 47145795, "comment_id": 81242187, "body": "These kind of compiler warnings get <i>significantly</i> better (i.e. often disappear on their own) when you use a newer perl. Compatibility with C++ improves as well. If by any means possible, consider installing a recent release, e.g. via <code>perlbrew</code>. Perl 5.10.1 is over 8 years old."}, {"owner": {"reputation": 7704, "user_id": 3964397, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/640272a326ae5f3cd89364b78f2108c9?s=128&d=identicon&r=PG", "display_name": "tjwrona1992", "link": "https://stackoverflow.com/users/3964397/tjwrona1992"}, "reply_to_user": {"reputation": 54872, "user_id": 1521179, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/MH7pk.png?s=128&g=1", "display_name": "amon", "link": "https://stackoverflow.com/users/1521179/amon"}, "edited": false, "score": 0, "creation_date": 1510003281, "post_id": 47145795, "comment_id": 81242266, "body": "Unfortunately I only have what is available for Perl out of the box on redhat 6 :("}, {"owner": {"reputation": 17619, "user_id": 7818749, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec4a72453e116debb802d55e88c2572e?s=128&d=identicon&r=PG&f=1", "display_name": "Gerhard", "link": "https://stackoverflow.com/users/7818749/gerhard"}, "edited": false, "score": 0, "creation_date": 1510036094, "post_id": 47145795, "comment_id": 81252172, "body": "Can you not install a later version of perl? Surely you should have access to the internet or some local yum repository?"}, {"owner": {"reputation": 2799, "user_id": 1485311, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/sNWZV.jpg?s=128&g=1", "display_name": "ChatterOne", "link": "https://stackoverflow.com/users/1485311/chatterone"}, "reply_to_user": {"reputation": 17619, "user_id": 7818749, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec4a72453e116debb802d55e88c2572e?s=128&d=identicon&r=PG&f=1", "display_name": "Gerhard", "link": "https://stackoverflow.com/users/7818749/gerhard"}, "edited": false, "score": 0, "creation_date": 1510054623, "post_id": 47145795, "comment_id": 81263108, "body": "@GerhardBarnard You&#39;re assuming admin privileges or anyway that the perl interpreter can be replaced (or used in a local installation) without any side effects"}, {"owner": {"reputation": 17619, "user_id": 7818749, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec4a72453e116debb802d55e88c2572e?s=128&d=identicon&r=PG&f=1", "display_name": "Gerhard", "link": "https://stackoverflow.com/users/7818749/gerhard"}, "reply_to_user": {"reputation": 2799, "user_id": 1485311, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/sNWZV.jpg?s=128&g=1", "display_name": "ChatterOne", "link": "https://stackoverflow.com/users/1485311/chatterone"}, "edited": false, "score": 0, "creation_date": 1510054726, "post_id": 47145795, "comment_id": 81263176, "body": "@ChatterOne I am not assuming anything, but any environment has root privileges or a team that has root privileges that can assist. Perl interpreters does not have to be replaced, I run numerous versions on a single redhat instance for different purposes."}, {"owner": {"reputation": 7704, "user_id": 3964397, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/640272a326ae5f3cd89364b78f2108c9?s=128&d=identicon&r=PG", "display_name": "tjwrona1992", "link": "https://stackoverflow.com/users/3964397/tjwrona1992"}, "reply_to_user": {"reputation": 17619, "user_id": 7818749, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec4a72453e116debb802d55e88c2572e?s=128&d=identicon&r=PG&f=1", "display_name": "Gerhard", "link": "https://stackoverflow.com/users/7818749/gerhard"}, "edited": false, "score": 0, "creation_date": 1510061935, "post_id": 47145795, "comment_id": 81268194, "body": "@GerhardBarnard, replacing the current version of Perl is out of the question. Installing a new version in addition to what we have may be a possibility, but I&#39;m not sure all of the implications it may have and there would definitely be concerns that it could impact other things. Would any XS Perl modules I write and compile with the new version even be usable by the older version of Perl?"}, {"owner": {"reputation": 54872, "user_id": 1521179, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/MH7pk.png?s=128&g=1", "display_name": "amon", "link": "https://stackoverflow.com/users/1521179/amon"}, "edited": false, "score": 1, "creation_date": 1510136463, "post_id": 47145795, "comment_id": 81303166, "body": "@tjwrona1992 No, XS modules can only be used with the Perl version they were compiled with. The Perl API gets new additions with each version. While the ppport.h can provide some backcompat, it is not usually enough that you could develop on a new perl but run on an older perl. Perlbrew makes it very easy to install multiple Perl versions side by side without admin privileges. The suggestion is that you find a way to install current perls both in your production and development environments."}, {"owner": {"reputation": 7704, "user_id": 3964397, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/640272a326ae5f3cd89364b78f2108c9?s=128&d=identicon&r=PG", "display_name": "tjwrona1992", "link": "https://stackoverflow.com/users/3964397/tjwrona1992"}, "reply_to_user": {"reputation": 17619, "user_id": 7818749, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec4a72453e116debb802d55e88c2572e?s=128&d=identicon&r=PG&f=1", "display_name": "Gerhard", "link": "https://stackoverflow.com/users/7818749/gerhard"}, "edited": false, "score": 0, "creation_date": 1510173001, "post_id": 47145795, "comment_id": 81327476, "body": "@GerhardBarnard, All access to the internet to install any software on the server is also restricted to admin only so I don&#39;t have the ability to install perlbrew even if I wanted to. And even if I had it, none of the commands to install anything would work since I can&#39;t reach out to the internet to get any updates. :("}], "answers": [{"tags": [], "owner": {"reputation": 7704, "user_id": 3964397, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/640272a326ae5f3cd89364b78f2108c9?s=128&d=identicon&r=PG", "display_name": "tjwrona1992", "link": "https://stackoverflow.com/users/3964397/tjwrona1992"}, "is_accepted": true, "score": 1, "last_activity_date": 1516803458, "creation_date": 1516803458, "answer_id": 48424624, "question_id": 47145795, "link": "https://stackoverflow.com/questions/47145795/perl-xs-unused-variable-perl-notused-warnings/48424624#48424624", "title": "Perl XS unused variable &#39;Perl___notused&#39; warnings", "body": "<p>The solution is to use a newer version of Perl. v5.10.1 is very outdated and these problems don't occur in later versions.</p>\n\n<p>I am posting an answer to my own question because it was answered in the comments, but an official answer was never posted.</p>\n"}], "owner": {"reputation": 7704, "user_id": 3964397, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/640272a326ae5f3cd89364b78f2108c9?s=128&d=identicon&r=PG", "display_name": "tjwrona1992", "link": "https://stackoverflow.com/users/3964397/tjwrona1992"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 167, "favorite_count": 0, "accepted_answer_id": 48424624, "answer_count": 1, "score": 8, "last_activity_date": 1516803458, "creation_date": 1510002383, "question_id": 47145795, "link": "https://stackoverflow.com/questions/47145795/perl-xs-unused-variable-perl-notused-warnings", "title": "Perl XS unused variable &#39;Perl___notused&#39; warnings", "body": "<p>I am learning how to call C++ code from Perl and to start I am trying to create a basic C++ object from a Perl script.</p>\n\n<p>To do this, I started by executing the <code>h2xs</code> command:</p>\n\n<p><code>h2xs -A -nMyClass</code></p>\n\n<p>Then I added the following two arguments to the generated <code>Makefile.PL</code> to use the <code>g++</code> compiler.</p>\n\n<pre><code>CC =&gt; 'g++',\nLD =&gt; 'g++',\n</code></pre>\n\n<p>I created my simple class in the <code>.xs</code> file and wrote the XS code to map it with Perl</p>\n\n<p><strong>MyClass.xs</strong></p>\n\n<pre><code>#ifdef __cplusplus\nextern \"C\" {\n#endif\n#include \"EXTERN.h\"\n#include \"perl.h\"\n#include \"XSUB.h\"\n#include \"ppport.h\"\n#ifdef __cplusplus\n}\n#endif\n\nclass MyClass {\npublic:\n    MyClass(int value) {\n        value_ = value;\n    }\n    ~MyClass() {}\n\n    int value() { return value_; }\n\n    void set_value(int value) {\n        value_ = value;\n    }\nprivate:\n    int value_;\n};\n\nMODULE = MyClass                PACKAGE = MyClass\n\nMyClass *\nMyClass::new(int value)\n\nvoid\nMyClass::DESTROY()\n\nint\nMyClass::value()\n\nvoid\nMyClass::set_value(int value)\n</code></pre>\n\n<p>Then I created the typemap file to map the new type to Perl.</p>\n\n<p><strong>typemap</strong></p>\n\n<pre><code>TYPEMAP\n\nMyClass *       O_OBJECT\n\n######################################################################\nOUTPUT\n\n# The Perl object is blessed into 'CLASS', which should be a\n# char* having the name of the package for the blessing.\nO_OBJECT\n        sv_setref_pv( $arg, CLASS, (void*)$var );\n\n######################################################################\nINPUT\n\nO_OBJECT\n        if( sv_isobject($arg) &amp;&amp; (SvTYPE(SvRV($arg)) == SVt_PVMG) )\n                $var = ($type)SvIV((SV*)SvRV( $arg ));\n        else{\n                warn( \\\"${Package}::$func_name() -- $var is not a blessed SV reference\\\" );\n                XSRETURN_UNDEF;\n        }\n</code></pre>\n\n<p>Finally I created a simple test.</p>\n\n<p><strong>t/MyClass.t</strong></p>\n\n<pre><code>use Test::More tests =&gt; 2;\nBEGIN { use_ok('MyClass') };\n\nmy $obj = MyClass-&gt;new(1);\nok($obj-&gt;isa('MyClass'), 'MyClass object constructed');\n</code></pre>\n\n<p>I then successfully built the code and ran the tests.</p>\n\n<pre><code>perl Makefile.PL\nmake\nmake test\n</code></pre>\n\n<hr>\n\n<p>Although everything works fine, I get some warnings with the build:</p>\n\n<pre><code>MyClass.c: In function 'void XS_MyClass_new(PerlInterpreter*, CV*)':\nMyClass.c:95: warning: unused variable 'Perl___notused'\nMyClass.c: In function 'void XS_MyClass_DESTROY(PerlInterpreter*, CV*)':\nMyClass.c:119: warning: unused variable 'Perl___notused'\nMyClass.c: In function 'void XS_MyClass_value(PerlInterpreter*, CV*)':\nMyClass.c:145: warning: unused variable 'Perl___notused'\nMyClass.c: In function 'void XS_MyClass_set_value(PerlInterpreter*, CV*)':\nMyClass.c:174: warning: unused variable 'Perl___notused'\nMyClass.c: In function 'void boot_MyClass(PerlInterpreter*, CV*)':\nMyClass.c:203: warning: unused variable 'Perl___notused'\n</code></pre>\n\n<p>I searched all over trying to find the cause for these warnings, and can't figure out what is going on.  All of the warnings seem come from the same repeated section in the code that occurs at the beginning of every function definition.</p>\n\n<p><strong>inside MyClass.c</strong></p>\n\n<pre><code>XS(XS_MyClass_new); /* prototype to pass -Wmissing-prototypes */\nXS(XS_MyClass_new)\n{\n#ifdef dVAR\n    dVAR; dXSARGS; // &lt;-- warning occurs here\n#else\n    dXSARGS;\n#endif\n    // function body continues...\n</code></pre>\n\n<p>Can someone please tell me the root cause of these warnings?</p>\n\n<p><em>I am using Perl v5.10.1 and g++ version 4.4.7</em></p>\n"}, {"tags": ["perl", "stdin", "filehandle"], "comments": [{"owner": {"reputation": 172529, "user_id": 140750, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/4c7af12cad08c95bc206a9636d164224?s=128&d=identicon&r=PG", "display_name": "William Pursell", "link": "https://stackoverflow.com/users/140750/william-pursell"}, "edited": false, "score": 2, "creation_date": 1509974502, "post_id": 47137347, "comment_id": 81225024, "body": "In the second case, you print to $fh, but in the first you don&#39;t."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 1, "creation_date": 1509974590, "post_id": 47137347, "comment_id": 81225078, "body": "Please take the time to ensure that the code in your question is well-formatted. Someone else has fixed it for you this time, but it&#39;s rude to expect someone else to do it for you."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 2, "creation_date": 1509983538, "post_id": 47137347, "comment_id": 81231347, "body": "It&#39;s unfair to treat this site as a source of free private programming tutorials. We subscribe primarily to help our peers with seemingly intractable problems, and writing to a file isn&#39;t difficult. <a href=\"https://stackoverflow.com/tags/perl/info\">The <i>information</i> page for the <b>Perl</b> tag</a> has many excellent resources, and it is best if you find them and learn for yourself. You will need to study your subject anyway, and turning over an answer that you were given here will not help you to learn. Please rethink your approach to your course."}], "answers": [{"comments": [{"owner": {"reputation": 87, "user_id": 6295322, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/FHUF2.jpg?s=128&g=1", "display_name": "Ansh007", "link": "https://stackoverflow.com/users/6295322/ansh007"}, "edited": false, "score": 0, "creation_date": 1510032139, "post_id": 47138092, "comment_id": 81250601, "body": "Thank you so much."}], "tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": true, "score": 4, "last_activity_date": 1509981398, "last_edit_date": 1509981398, "creation_date": 1509974799, "answer_id": 47138092, "question_id": 47137347, "link": "https://stackoverflow.com/questions/47137347/writing-stdin-to-a-file-using-filehandle-in-perl/47138092#47138092", "title": "Writing STDIN to a file using filehandle in perl", "body": "<p>You have opened the filehandle <code>$fh</code> for writing to your file. Your second example prints data to this filehandle, so it works:</p>\n\n<pre><code>print $fh \"$line\\n\";\n</code></pre>\n\n<p>But your first example doesn't print to <code>$fh</code>, so the output goes to <code>STDOUT</code>.</p>\n\n<pre><code>print \"FH: $fh \\n\";\nprint \"dollar: $_ \\n\";\n</code></pre>\n\n<p>In order for your first example to work, you need to print to the correct filehandle.</p>\n\n<pre><code>print $fh \"FH: $fh \\n\";\nprint $fh \"dollar: $_ \\n\";\n</code></pre>\n"}], "owner": {"reputation": 87, "user_id": 6295322, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/FHUF2.jpg?s=128&g=1", "display_name": "Ansh007", "link": "https://stackoverflow.com/users/6295322/ansh007"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 694, "favorite_count": 0, "accepted_answer_id": 47138092, "answer_count": 1, "score": 0, "last_activity_date": 1509981398, "creation_date": 1509972291, "last_edit_date": 1509974533, "question_id": 47137347, "link": "https://stackoverflow.com/questions/47137347/writing-stdin-to-a-file-using-filehandle-in-perl", "title": "Writing STDIN to a file using filehandle in perl", "body": "<p>I have just started learning perl and I was going through filehandle.</p>\n\n<ol>\n<li>I want to write my STDIN to a file. How do I do it using filehandle ?</li>\n<li>Also is it possible to do the same, without using FH ?</li>\n</ol>\n\n<p>I tried the below, but never worked:</p>\n\n<pre><code>#!/usr/bin/perl\n\n$file = 'File.txt';\n\nopen ($fh, '&gt;', $file) or die \"Error :$!\";\n\nprint \"Enter blank line to end\\n\";\n\nwhile (&lt;STDIN&gt;) {\n\n    last if /^$/;\n    print \"FH: $fh \\n\";\n    print \"dollar: $_ \\n\";\n}\n\nclose $fh;* \n</code></pre>\n\n<p>The below works, but I don't understand why.</p>\n\n<pre><code>#!/usr/bin/perl\n\nopen(my $fh, '&gt;', 'report.txt');\n\nforeach my $line ( &lt;STDIN&gt; ) {\n\n    chomp( $line );\n\n    print $fh \"$line\\n\";\n}\n\nclose $fh;\n\n\nprint \"done\\n\"; \n</code></pre>\n"}, {"tags": ["linux", "perl"], "comments": [{"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1509971612, "post_id": 47136974, "comment_id": 81223349, "body": "&quot;<i>This way the script does stop when triggering CTRL + C</i>&quot; - No, this way the script is gone by the time your program starts. <code>exec</code> only returns if it fails."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 7, "creation_date": 1509971661, "post_id": 47136974, "comment_id": 81223379, "body": "Why are you writing perl4-style code? It&#39;s not 1993 anymore; please <code>use strict;</code> and <code>use warnings;</code> and don&#39;t call subs with <code>&amp;</code>."}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 2, "creation_date": 1509976628, "post_id": 47136974, "comment_id": 81226440, "body": "See also <a href=\"https://stackoverflow.com/q/34457955/2173773\">Perl forward SIGINT to parent process from <code>system</code> command</a> and <a href=\"https://stackoverflow.com/q/34795478/2173773\">Propagation of signal to parent when using system</a>"}, {"owner": {"reputation": 6855, "user_id": 1334062, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/52fbc94ef21aeb260ec0ff47b07ab64d?s=128&d=identicon&r=PG", "display_name": "Tudor Timi", "link": "https://stackoverflow.com/users/1334062/tudor-timi"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1509988332, "post_id": 47136974, "comment_id": 81234478, "body": "@melpomene It&#39;s a snippet of some legacy Perl script I have that I stripped down."}], "answers": [{"comments": [{"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 4, "creation_date": 1509975509, "post_id": 47138000, "comment_id": 81225708, "body": "If you don&#39;t want to hardcode <code>2</code>, you can <code>use POSIX qw(SIGINT);</code> to import a <code>SIGINT</code> constant."}, {"owner": {"reputation": 9262, "user_id": 124951, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/c46d5911a8fb4ffd5fb8523d56a60de0?s=128&d=identicon&r=PG", "display_name": "salva", "link": "https://stackoverflow.com/users/124951/salva"}, "edited": false, "score": 2, "creation_date": 1509976134, "post_id": 47138000, "comment_id": 81226124, "body": "Another option is to use <code>fork</code> and <code>exec</code> to launch the child process instead of <code>system</code>."}, {"owner": {"reputation": 6855, "user_id": 1334062, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/52fbc94ef21aeb260ec0ff47b07ab64d?s=128&d=identicon&r=PG", "display_name": "Tudor Timi", "link": "https://stackoverflow.com/users/1334062/tudor-timi"}, "reply_to_user": {"reputation": 9262, "user_id": 124951, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/c46d5911a8fb4ffd5fb8523d56a60de0?s=128&d=identicon&r=PG", "display_name": "salva", "link": "https://stackoverflow.com/users/124951/salva"}, "edited": false, "score": 0, "creation_date": 1509981275, "post_id": 47138000, "comment_id": 81229689, "body": "@salva I read in the description of <code>system()</code> that it&#39;s equivalent to a <code>fork()</code>, <code>exec()</code> and <code>wait()</code> call."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2404501"}, "reply_to_user": {"reputation": 6855, "user_id": 1334062, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/52fbc94ef21aeb260ec0ff47b07ab64d?s=128&d=identicon&r=PG", "display_name": "Tudor Timi", "link": "https://stackoverflow.com/users/1334062/tudor-timi"}, "edited": false, "score": 5, "creation_date": 1509982889, "post_id": 47138000, "comment_id": 81230884, "body": "@TudorTimi that&#39;s a broad outline of what <code>system()</code> does. It&#39;s good enough to understand the relationship between the processes. It omits details like signal manipulation. The point of salva&#39;s comment is if you implement a <code>system()</code>-like function yourself, you can change the details."}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user2404501"}, "is_accepted": true, "score": 7, "last_activity_date": 1509974563, "creation_date": 1509974563, "answer_id": 47138000, "question_id": 47136974, "link": "https://stackoverflow.com/questions/47136974/ctrlc-and-perls-system-function-script-not-getting-interrupted/47138000#47138000", "title": "CTRL+C and Perl&#39;s system() function - script not getting interrupted", "body": "<p>It's good that you've investigated and understood the process groups. Explaining those is usually the hard part of a question like this. So you know that the interrupt signal <code>SIGINT</code> is supposed to be sent to all processes in the process group, including your <code>perl</code> process.</p>\n\n<p>But <code>SIGINT</code> isn't always fatal. It can be caught or ignored. The <code>system()</code> function ignores <code>SIGINT</code> while the child process is running. This feature makes it possible for you to interrupt a child process that has gone bad, without killing the parent too.</p>\n\n<p>In perlfunc, the description of <code>system()</code> says:</p>\n\n<blockquote>\n  <p>Since \"SIGINT\" and \"SIGQUIT\" are ignored during the execution of\n  \"system\", if you expect your program to terminate on receipt of\n  these signals you will need to arrange to do so yourself based on\n  the return value.</p>\n\n<pre><code>@args = (\"command\", \"arg1\", \"arg2\");\nsystem(@args) == 0\n    or die \"system @args failed: $?\"\n</code></pre>\n</blockquote>\n\n<p>This is what you need to do. Check the return value of <code>system()</code>, and take whatever action you think is appropriate when a child process fails. If you want to distinguish <code>SIGINT</code> from other kinds of failures, the next paragraph in perlfunc will help:</p>\n\n<blockquote>\n  <p>If you'd like to manually inspect \"system\"'s failure, you can check\n  all possible failure modes by inspecting $? like this:</p>\n\n<pre><code>if ($? == -1) {\n    print \"failed to execute: $!\\n\";\n}\nelsif ($? &amp; 127) {\n    printf \"child died with signal %d, %s coredump\\n\",\n        ($? &amp; 127),  ($? &amp; 128) ? 'with' : 'without';\n}\nelse {\n    printf \"child exited with value %d\\n\", $? &gt;&gt; 8;\n}\n</code></pre>\n</blockquote>\n\n<p>For example you could do this in <code>run_the_test</code>:</p>\n\n<pre><code>my $r = system(\"program.bash $name\");\ndie \"Test interrupted, giving up\" if ($? &amp; 127) == 2;\nreturn $r;\n</code></pre>\n"}], "owner": {"reputation": 6855, "user_id": 1334062, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/52fbc94ef21aeb260ec0ff47b07ab64d?s=128&d=identicon&r=PG", "display_name": "Tudor Timi", "link": "https://stackoverflow.com/users/1334062/tudor-timi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1260, "favorite_count": 1, "accepted_answer_id": 47138000, "answer_count": 1, "score": 3, "last_activity_date": 1509974563, "creation_date": 1509970983, "question_id": 47136974, "link": "https://stackoverflow.com/questions/47136974/ctrlc-and-perls-system-function-script-not-getting-interrupted", "title": "CTRL+C and Perl&#39;s system() function - script not getting interrupted", "body": "<p>I have a Perl script that starts some programs using the <code>system()</code> function, in sequential order. While the script is running and a program run is ongoing, I type CTRL + C. I expect the program to terminate (which happens), but I would also expect the script to terminate (which doesn't happen).</p>\n\n<p>I've built a minimum working example. Here's the Perl script:</p>\n\n<pre><code>#!/bin/env perl\n\n\nsub run_the_test {\n  local($name, $_) = @_;\n\n  print \"Starting $name\\n\";\n  return system(\"program.bash $name\");\n}\n\n\n&amp;run_the_test(\"test1\");\n&amp;run_the_test(\"test2\");\n&amp;run_the_test(\"test3\");\n</code></pre>\n\n<p>and here's the external \"program\":</p>\n\n<pre><code>#!/bin/env bash\n\necho \"Started $1\"\nsleep 3\necho \"Finished $1\"\n</code></pre>\n\n<p>I started the script and issued a CTRL + Z. I then did a <code>ps -o pid,pgrp,cmd</code> to list the process info. I can see that the script, the bash shell it invokes and the sleep command all belong to the same process group. While the <code>sleep</code> is executing I would also expect that to be the foreground process group. I've read up a bit on Linux, signals and the terminal and found that CTRL + C should send an interrupt to the entire foreground process group, thus terminating the script as well.</p>\n\n<p>I've also tried using <code>exec()</code> instead of <code>system()</code>. This way the script does stop when triggering CTRL + C, but it doesn't run past <em>test1</em>.</p>\n\n<p>Can anyone shed some light on what's going on here?</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 3604, "user_id": 436450, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0afd75178763cf41af43a103b95277ae?s=128&d=identicon&r=PG", "display_name": "jira", "link": "https://stackoverflow.com/users/436450/jira"}, "edited": false, "score": 0, "creation_date": 1509971170, "post_id": 47136823, "comment_id": 81223085, "body": "Use mail(1). Might be mailx(1) on your system."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1510044542, "post_id": 47136823, "comment_id": 81256445, "body": "Tell us a lot more about this server migration. What were the old and new operating systems. What versions? Are the two servers in the same location? Are they on the same network? Can you send email manually from the new server using <code>mailx</code> or something like that? Think like a programmer. Debug the problem."}, {"owner": {"reputation": 374, "user_id": 5938534, "user_type": "registered", "profile_image": "https://graph.facebook.com/782148868582968/picture?type=large", "display_name": "Prasanna Venkatesh", "link": "https://stackoverflow.com/users/5938534/prasanna-venkatesh"}, "edited": false, "score": 0, "creation_date": 1510044894, "post_id": 47136823, "comment_id": 81256655, "body": "actually i am a php guy and i am new to perl. The project is using both php and perl ,i am able to send mail from php but not from perl"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 1, "creation_date": 1510045110, "post_id": 47136823, "comment_id": 81256804, "body": "Ok. So how do you send mail from PHP? What is the difference between what you do in PHP and what you do in Perl? <b>Please update your question to add more details.</b>"}, {"owner": {"reputation": 374, "user_id": 5938534, "user_type": "registered", "profile_image": "https://graph.facebook.com/782148868582968/picture?type=large", "display_name": "Prasanna Venkatesh", "link": "https://stackoverflow.com/users/5938534/prasanna-venkatesh"}, "edited": false, "score": 0, "creation_date": 1510045228, "post_id": 47136823, "comment_id": 81256875, "body": "i used default php mail function and it is working well. Actually when I see the phpinfo sendmail path is &#39;/usr/sbin/sendmail -t -i&#39;. Does it matter? Even i tried with this path too still it is not working"}], "answers": [{"tags": [], "owner": {"reputation": 3604, "user_id": 436450, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0afd75178763cf41af43a103b95277ae?s=128&d=identicon&r=PG", "display_name": "jira", "link": "https://stackoverflow.com/users/436450/jira"}, "is_accepted": false, "score": 1, "last_activity_date": 1509971562, "creation_date": 1509971562, "answer_id": 47137139, "question_id": 47136823, "link": "https://stackoverflow.com/questions/47136823/how-to-send-mail-in-perl-without-using-modules/47137139#47137139", "title": "How to send mail in perl without using modules?", "body": "<p>Try something like this:</p>\n\n<pre><code>open MAIL, \"| mailx -s '$subject' -r $from $to\";\nprint MAIL $mail_message;\nclose MAIL;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "is_accepted": false, "score": 0, "last_activity_date": 1509974027, "creation_date": 1509974027, "answer_id": 47137840, "question_id": 47136823, "link": "https://stackoverflow.com/questions/47136823/how-to-send-mail-in-perl-without-using-modules/47137840#47137840", "title": "How to send mail in perl without using modules?", "body": "<p>This line is opening a file called \"/usr/sbin/sendmail -t\" for reading.</p>\n\n<pre><code>open(MAIL, \"/usr/sbin/sendmail -t\");\n</code></pre>\n\n<p>If you'd checked what <code>open</code> returned, you'd find it returned an error because that file doesn't exist. Instead, you want to pipe your output to sendmail. Here is how your code should look using the more modern way of calling <code>open</code></p>\n\n<pre><code>if(open(my $mail, \"|-\", \"/usr/sbin/sendmail -t\"))\n    {\n    ## Mail Header\n    print $mail \"To: $to\\n\";\n    print $mail \"From: $from\\n\";\n    print $mail \"Subject: $subject\\n\\n\";\n    ## Mail Body\n    print $mail \"This is a test message from Cyberciti.biz! You can write your\nmail body text here\\n\";\n\n    close($mail);\n    }\nelse\n    {\n    print \"open failed: $!\\n\";\n    }\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 374, "user_id": 5938534, "user_type": "registered", "profile_image": "https://graph.facebook.com/782148868582968/picture?type=large", "display_name": "Prasanna Venkatesh", "link": "https://stackoverflow.com/users/5938534/prasanna-venkatesh"}, "edited": false, "score": 0, "creation_date": 1510025759, "post_id": 47137933, "comment_id": 81248937, "body": "i have tried this open MAIL, &#39;|/usr/sbin/sendmail -t&#39; or die $!; And it looks fine,sendmail path is correct. But I didn&#39;t receive any mail. Is there a way to check error log in server. I am unable to install any modules for now. I need a quick solution for this"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 374, "user_id": 5938534, "user_type": "registered", "profile_image": "https://graph.facebook.com/782148868582968/picture?type=large", "display_name": "Prasanna Venkatesh", "link": "https://stackoverflow.com/users/5938534/prasanna-venkatesh"}, "edited": false, "score": 0, "creation_date": 1510033537, "post_id": 47137933, "comment_id": 81251084, "body": "Yes. You can check the mail log. But you would need to ask your local sysadmin where it is. Why do you think you can&#39;t install modules? That is rarely true."}, {"owner": {"reputation": 374, "user_id": 5938534, "user_type": "registered", "profile_image": "https://graph.facebook.com/782148868582968/picture?type=large", "display_name": "Prasanna Venkatesh", "link": "https://stackoverflow.com/users/5938534/prasanna-venkatesh"}, "edited": false, "score": 0, "creation_date": 1510034872, "post_id": 47137933, "comment_id": 81251630, "body": "As the project is done about 8 to 10 years back i am just trying to make it work fine"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 374, "user_id": 5938534, "user_type": "registered", "profile_image": "https://graph.facebook.com/782148868582968/picture?type=large", "display_name": "Prasanna Venkatesh", "link": "https://stackoverflow.com/users/5938534/prasanna-venkatesh"}, "edited": false, "score": 0, "creation_date": 1510043993, "post_id": 47137933, "comment_id": 81256111, "body": "@PrasannaVenkatesh: Are you adding the email as a new feature? Or are you fixing an existing feature that has stopped working?"}, {"owner": {"reputation": 374, "user_id": 5938534, "user_type": "registered", "profile_image": "https://graph.facebook.com/782148868582968/picture?type=large", "display_name": "Prasanna Venkatesh", "link": "https://stackoverflow.com/users/5938534/prasanna-venkatesh"}, "edited": false, "score": 0, "creation_date": 1510044169, "post_id": 47137933, "comment_id": 81256219, "body": "i am fixing the existing one"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 374, "user_id": 5938534, "user_type": "registered", "profile_image": "https://graph.facebook.com/782148868582968/picture?type=large", "display_name": "Prasanna Venkatesh", "link": "https://stackoverflow.com/users/5938534/prasanna-venkatesh"}, "edited": false, "score": 0, "creation_date": 1510044229, "post_id": 47137933, "comment_id": 81256257, "body": "@PrasannaVenkatesh: Ok. So this used to work. When did it stop working? What changed on the server at the time it stopped working? Please update your question to add more details."}, {"owner": {"reputation": 374, "user_id": 5938534, "user_type": "registered", "profile_image": "https://graph.facebook.com/782148868582968/picture?type=large", "display_name": "Prasanna Venkatesh", "link": "https://stackoverflow.com/users/5938534/prasanna-venkatesh"}, "edited": false, "score": 0, "creation_date": 1510044263, "post_id": 47137933, "comment_id": 81256279, "body": "after migration to another server"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 374, "user_id": 5938534, "user_type": "registered", "profile_image": "https://graph.facebook.com/782148868582968/picture?type=large", "display_name": "Prasanna Venkatesh", "link": "https://stackoverflow.com/users/5938534/prasanna-venkatesh"}, "edited": false, "score": 0, "creation_date": 1510044370, "post_id": 47137933, "comment_id": 81256339, "body": "@PrasannaVenkatesh: So tell us about the differences between the two servers. New operating system? New version of the same operating system? <b>Please update your question to add more details.</b>"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 1, "creation_date": 1510070558, "post_id": 47137933, "comment_id": 81274274, "body": "If you&#39;re opening a lexical FH, I&#39;d suggest going the whole hog and using 3 arg open. <code>open ( my $mailer, &#39;|-&#39;, &#39;&#47;usr&#47;sbin&#47;sendmail -t&#39; ) or die $!;</code>"}], "tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 3, "last_activity_date": 1509974349, "creation_date": 1509974349, "answer_id": 47137933, "question_id": 47136823, "link": "https://stackoverflow.com/questions/47136823/how-to-send-mail-in-perl-without-using-modules/47137933#47137933", "title": "How to send mail in perl without using modules?", "body": "<p>You should always check the return value from <code>open()</code> and take appropriate action if it fails.</p>\n\n<pre><code>open MAIL, '/usr/sbin/sendmail -t' or die $!;\n</code></pre>\n\n<p>In this case, you'll get an error message like:</p>\n\n<blockquote>\n  <p>No such file or directory</p>\n</blockquote>\n\n<p>I'm not sure where you're copying your code from, but I'm guessing you're making a transcription error. You're trying to open a file called <code>/usr/sbin/sendmail -t</code> and it's very likely that your system doesn't have a file called that (particularly not with the <code>-t</code> on the end).</p>\n\n<p>What you actually want to do is to open a pipe to the command. You've just omitted a single character:</p>\n\n<pre><code>open MAIL, '|/usr/sbin/sendmail -t' or die $!;\n</code></pre>\n\n<p>Note the <code>|</code> at the start of the filename.</p>\n\n<p>I'd also recommend using a lexical filehandle instead of a bareword.</p>\n\n<pre><code>open my $mail_fh, '|/usr/sbin/sendmail -t' or die $!;\n</code></pre>\n\n<p>But, most importantly, why are you trying to do this without using modules? Perl modules are a large part of the power of Perl. If you can't use modules (and install new modules from CPAN) then you are missing out on much of the ease of Perl programming. Why waste time rewriting code when there are tried and tested versions available for your use?</p>\n\n<p>Whatever the bottlenecks are that are preventing you from using Perl modules, I urge you to spend time working to remove them. Your Perl programming career will be much more enjoyable.</p>\n\n<p>The <a href=\"http://perldoc.perl.org/perlfaq9.html#How-do-I-send-email%3F\" rel=\"nofollow noreferrer\">Perl FAQ</a> recommends <a href=\"https://metacpan.org/pod/Email::MIME\" rel=\"nofollow noreferrer\">Email::MIME</a> and <a href=\"https://metacpan.org/pod/Email::Sender::Simple\" rel=\"nofollow noreferrer\">Email::Sender::Simple</a>. Personally, I'd go with <a href=\"https://metacpan.org/pod/Email::Stuffer\" rel=\"nofollow noreferrer\">Email::Stuffer</a> in most cases. The Email::* namespace is where the good stuff is.</p>\n"}, {"comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1510075129, "post_id": 47158417, "comment_id": 81277248, "body": "Perhaps add a short example of your favorite one?"}, {"owner": {"reputation": 374, "user_id": 5938534, "user_type": "registered", "profile_image": "https://graph.facebook.com/782148868582968/picture?type=large", "display_name": "Prasanna Venkatesh", "link": "https://stackoverflow.com/users/5938534/prasanna-venkatesh"}, "edited": false, "score": 0, "creation_date": 1510110609, "post_id": 47158417, "comment_id": 81291510, "body": "@shawnhcorey i have already told that It was a working code and I am trying to fix it."}, {"owner": {"reputation": 3432, "user_id": 604642, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/48daad611ba387f8473b0c1e5792aa3f?s=128&d=identicon&r=PG", "display_name": "shawnhcorey", "link": "https://stackoverflow.com/users/604642/shawnhcorey"}, "edited": false, "score": 0, "creation_date": 1510141925, "post_id": 47158417, "comment_id": 81306891, "body": "And the best way to fix it is to use proven software."}], "tags": [], "owner": {"reputation": 3432, "user_id": 604642, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/48daad611ba387f8473b0c1e5792aa3f?s=128&d=identicon&r=PG", "display_name": "shawnhcorey", "link": "https://stackoverflow.com/users/604642/shawnhcorey"}, "is_accepted": false, "score": 2, "last_activity_date": 1510058827, "creation_date": 1510058827, "answer_id": 47158417, "question_id": 47136823, "link": "https://stackoverflow.com/questions/47136823/how-to-send-mail-in-perl-without-using-modules/47158417#47158417", "title": "How to send mail in perl without using modules?", "body": "<p>How to send mail in Perl without using modules?</p>\n\n<p>Don't.</p>\n\n<p>The modules in CPAN are well tested and secure. And they take care of problems you don't even realize you have. There is no excuse for a professional to avoid them.</p>\n"}, {"tags": [], "owner": {"reputation": 374, "user_id": 5938534, "user_type": "registered", "profile_image": "https://graph.facebook.com/782148868582968/picture?type=large", "display_name": "Prasanna Venkatesh", "link": "https://stackoverflow.com/users/5938534/prasanna-venkatesh"}, "is_accepted": true, "score": 0, "last_activity_date": 1510379461, "creation_date": 1510379461, "answer_id": 47234840, "question_id": 47136823, "link": "https://stackoverflow.com/questions/47136823/how-to-send-mail-in-perl-without-using-modules/47234840#47234840", "title": "How to send mail in perl without using modules?", "body": "<p>I finally did it by running php commands in perl script.</p>\n\n<p>I wrote a mail function in php and passed params to that file from perl.</p>\n\n<pre><code>#!/usr/bin/perl\n\nprint \"Content-type: text/html\\n\\n\";\n\nuse CGI::Carp 'fatalsToBrowser';\nmy $mail = 'example@gmail.com';\n$mail =~  s/@/%40/g;\nmy $sub = 'Subject';\n$sub =~ s/\\s/+/g;\nmy $msg = 'Message';\n$msg =~ s/\\s/+/g;\nmy $output = `php path-to-php-file 'to=$mail&amp;message=$msg&amp;sub=$sub'`;\n</code></pre>\n\n<p>This <a href=\"https://stackoverflow.com/questions/5655284/how-to-pass-parameters-from-command-line-to-post-in-php-script#answer-17724485\">link</a> helped me.</p>\n\n<p>But I really felt bad for doing this way. This shouldn't be appreciated.</p>\n\n<p>I thank everyone.</p>\n"}], "owner": {"reputation": 374, "user_id": 5938534, "user_type": "registered", "profile_image": "https://graph.facebook.com/782148868582968/picture?type=large", "display_name": "Prasanna Venkatesh", "link": "https://stackoverflow.com/users/5938534/prasanna-venkatesh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1327, "favorite_count": 0, "accepted_answer_id": 47234840, "answer_count": 5, "score": -1, "last_activity_date": 1510379461, "creation_date": 1509970460, "last_edit_date": 1510110867, "question_id": 47136823, "link": "https://stackoverflow.com/questions/47136823/how-to-send-mail-in-perl-without-using-modules", "title": "How to send mail in perl without using modules?", "body": "<p>This is the code I am using for sending mail in perl . But I didn't receive mail .</p>\n\n<pre><code>#!/usr/bin/perl\nprint \"Content-type: text/html\\n\\n\";\n$to = 'to@gmail.com';\n$title='Perl Mail demo';\n$from= 'from@gmail.com';\n$subject='YOUR SUBJECT';\n\nopen(MAIL, \"/usr/sbin/sendmail -t\");\n\n## Mail Header\nprint MAIL \"To: $to\\n\";\nprint MAIL \"From: $from\\n\";\nprint MAIL \"Subject: $subject\\n\\n\";\n## Mail Body\nprint MAIL \"This is a test message from Cyberciti.biz! You can write your\nmail body text here\\n\";\n\nclose(MAIL);\n</code></pre>\n\n<p>I am not getting any errors but unable to find the reason why mail is not sending. </p>\n\n<p>Please help me I have tried several examples and forums but nothing works. </p>\n\n<p><strong>This is happening after server migration</strong> </p>\n\n<p>I know this question has been asked several times and none of them helped me.</p>\n"}, {"tags": ["xml", "perl"], "comments": [{"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 0, "creation_date": 1510005910, "post_id": 47134464, "comment_id": 81243522, "body": "And you didn&#39;t think it was worthwhile to mention that you&#39;re receiving an error message when you try this? <b>Can&#39;t call method &quot;getElementsByTagName&quot; without a package or object reference</b>"}], "answers": [{"tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": true, "score": 8, "last_activity_date": 1509965070, "creation_date": 1509965070, "answer_id": 47135078, "question_id": 47134464, "link": "https://stackoverflow.com/questions/47134464/perl-parse-xml-stored-as-string-in-a-variable/47135078#47135078", "title": "Perl - parse xml stored as string in a variable", "body": "<p>You seem to misunderstand how objects and XML parsing work. You can't just use a module and suddenly expect it to have an effect on all variables in your program.</p>\n\n<p>If you read the documentation for <a href=\"https://metacpan.org/pod/distribution/XML-LibXML/lib/XML/LibXML/Parser.pod\" rel=\"noreferrer\">XML::LibXML::Parser</a> it will show you how to parse your XML string into a document object which you can then query using various methods.</p>\n\n<p>You will want code like this:</p>\n\n<pre><code>use strict;\nuse warnings;\nuse XML::LibXML;\n\nmy $xml = '&lt;family&gt; ... &lt;/family&gt;';\n\nmy $xml_parser = XML::LibXML-&gt;new;\n\nmy $doc = $xml_parser-&gt;parse_string($xml);\n</code></pre>\n\n<p>You now have a XML document variable (in <code>$doc</code>) that you can call the XML::LibXML methods on.</p>\n"}, {"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 3, "last_activity_date": 1509972562, "creation_date": 1509972562, "answer_id": 47137427, "question_id": 47134464, "link": "https://stackoverflow.com/questions/47134464/perl-parse-xml-stored-as-string-in-a-variable/47137427#47137427", "title": "Perl - parse xml stored as string in a variable", "body": "<p>You code will work with the fix describe by <strong>Dave Cross</strong>, but it can be made much more concise</p>\n\n<p>I recommend something like this. Note that, when called in list context, <code>getChildrenByTagName</code> returns a list of <code>XML::LibXML::Node</code> objects instead of one <code>XML::LibXML::NodeList</code> object. The same applies to any method that returns a list of nodes.</p>\n\n<pre><code>use strict;\nuse warnings;\nuse feature 'say';\n\nuse XML::LibXML;\n\nmy $xml = &lt;&lt;__END_XML__;\n&lt;family&gt;\n    &lt;id&gt;25502&lt;/id&gt; \n    &lt;father&gt;\n        &lt;id&gt;1&lt;/id&gt;\n    &lt;/father&gt;\n    &lt;mother&gt;\n        &lt;id&gt;2&lt;/id&gt;\n    &lt;/mother&gt;\n    &lt;son&gt;\n        &lt;id&gt;2&lt;/id&gt;\n    &lt;/son&gt;\n&lt;/family&gt;\n__END_XML__\n\nmy $doc = XML::LibXML-&gt;load_xml( string =&gt; $xml );\n\nmy ($family_id) = $doc-&gt;documentElement-&gt;getChildrenByTagName('id');\n\nsay $family_id-&gt;textContent;\n</code></pre>\n\n<h3>output</h3>\n\n<pre><code>25502\n</code></pre>\n\n<p>And if you are expecting to do much work with XML then you should familiarise yourself with XPath. With its help the above assignment could be written as</p>\n\n<pre><code>my ($family_id) = $doc-&gt;findnodes('/family/id');\n</code></pre>\n"}], "owner": {"reputation": 366, "user_id": 4488775, "user_type": "registered", "accept_rate": 64, "profile_image": "https://lh6.googleusercontent.com/-c7dUxZESZzs/AAAAAAAAAAI/AAAAAAAAAGI/OxEft3Nihy4/photo.jpg?sz=128", "display_name": "Bala Krishnan", "link": "https://stackoverflow.com/users/4488775/bala-krishnan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2156, "favorite_count": 1, "accepted_answer_id": 47135078, "answer_count": 2, "score": 0, "last_activity_date": 1509972562, "creation_date": 1509963211, "last_edit_date": 1509968758, "question_id": 47134464, "link": "https://stackoverflow.com/questions/47134464/perl-parse-xml-stored-as-string-in-a-variable", "title": "Perl - parse xml stored as string in a variable", "body": "<p>I have done a lot of searches on google, but is there a way to parse and get values similar to extracting values from a file, if the XML is contained in the string.</p>\n\n<p>Following is a sample script:</p>\n\n<pre><code>use strict;\nuse warnings;\nuse XML::LibXML;\n\nmy $xml  = \"&lt;family&gt;&lt;id&gt;25502&lt;/id&gt;&lt;father&gt;&lt;id&gt;1&lt;/id&gt;&lt;/father&gt;&lt;mother&gt;&lt;id&gt;2&lt;/id&gt;&lt;/mother&gt;&lt;son&gt;&lt;id&gt;2&lt;/id&gt;&lt;/son&gt;&lt;/family&gt;\";\n\nmy $id = $xml-&gt;getElementsByTagName(\"id\")-&gt;item(0)-&gt;getFirstChild-&gt;getData;\n\nprint $id;\n</code></pre>\n\n<p>In this example, I could not print the ID. Please help. Thanks.</p>\n"}, {"tags": ["perl", "perl-module"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 360, "user_id": 404368, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/31a897d60caedf5932405ad21691344c?s=128&d=identicon&r=PG", "display_name": "sborsky", "link": "https://stackoverflow.com/users/404368/sborsky"}, "edited": false, "score": 0, "creation_date": 1509979611, "post_id": 47130430, "comment_id": 81228518, "body": "@sborsky, It does it you presume <code>use strict; use warnings qw( all );</code>, which are often omitted on SO even if present in the script (as they should always be present)."}, {"owner": {"reputation": 360, "user_id": 404368, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/31a897d60caedf5932405ad21691344c?s=128&d=identicon&r=PG", "display_name": "sborsky", "link": "https://stackoverflow.com/users/404368/sborsky"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1510026475, "post_id": 47130430, "comment_id": 81249114, "body": "Thanks @ikegami, the title should have been hint enough, taking my former comment back."}], "answers": [{"comments": [{"owner": {"reputation": 77, "user_id": 7568434, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/097e26962f64b93b5a09a51423616979?s=128&d=identicon&r=PG&f=1", "display_name": "keeru", "link": "https://stackoverflow.com/users/7568434/keeru"}, "edited": false, "score": 0, "creation_date": 1509953798, "post_id": 47130589, "comment_id": 81213226, "body": "i actually include strict and warnings. And i got error only with $res. That is because of $a and $b are exempt Global variable.                                                    use strict;use warnings;                                                                                                    sub Multiply {my ($first, $second) = @_;my $res;$res = $first* $second;return ($res, ); } main: { \tmy $first =3;my $second =4;my $res; \t($res) = Multiply($first, $second); \tprint (&quot;Input1 = $first\\nInput2 = $second\\nResult = $res&quot;); } The modified correct code!"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 77, "user_id": 7568434, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/097e26962f64b93b5a09a51423616979?s=128&d=identicon&r=PG&f=1", "display_name": "keeru", "link": "https://stackoverflow.com/users/7568434/keeru"}, "edited": false, "score": 0, "creation_date": 1509953936, "post_id": 47130589, "comment_id": 81213293, "body": "@keeru  Yes, that is the correct way to do it, as I state in the answer.  But I don&#39;t understand &quot;<i>i actually include strict and warnings. And i got error only with <code>$res</code>.</i>&quot; -- that is clear, the program doesn&#39;t compile because a variable is undeclared while <code>strict</code> is in effect.  I thought you were asking about the output of the posted code?"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 77, "user_id": 7568434, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/097e26962f64b93b5a09a51423616979?s=128&d=identicon&r=PG&f=1", "display_name": "keeru", "link": "https://stackoverflow.com/users/7568434/keeru"}, "edited": false, "score": 0, "creation_date": 1509992466, "post_id": 47130589, "comment_id": 81236559, "body": "@keeru  Thinking about your comment some more, I added an &quot;Update&quot;"}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": false, "score": 6, "last_activity_date": 1571892789, "last_edit_date": 1571892789, "creation_date": 1509947719, "answer_id": 47130589, "question_id": 47130430, "link": "https://stackoverflow.com/questions/47130430/global-symbol-requires-explicit-package-name-error/47130589#47130589", "title": "global symbol requires explicit package name.Error", "body": "<p>The most important wrong thing is that you don't declare variables and don't have</p>\n\n<pre><code>use warnings;\nuse strict;\n</code></pre>\n\n<p>Also, using <code>$a</code> and <code>$b</code> is perilous since they are globals meant for <code>sort</code>.</p>\n\n<p>The <code>my</code> variables <code>$a</code>, <code>$b</code>, <code>$res</code> are lexical but the ones in the sub are yet other, global variables; this is because the sub is defined before the lexicals are declared. They are never initialized, so their <code>undef</code>s overwrite lexicals on return. With <code>use warnings;</code> added</p>\n\n<pre>\nUse of uninitialized value $b in multiplication (*) at ..           [in sub]\nUse of uninitialized value $a in multiplication (*) at ..           [in sub]\nUse of uninitialized value $a in concatenation (.) or string at ..  [in print]\nUse of uninitialized value $b in concatenation (.) or string at ..  [in print]\n</pre>\n\n<p>The global <code>$res</code> in the sub gets initialized to <code>0</code> and its return overwrites the lexical one. </p>\n\n<p>If you were to put the code for the sub at the end it would \"work,\" since  lexicals get declared before the sub gets compiled so the sub sees them and uses them.  But then again, if lexicals are in a \"dynamic\" scope that wouldn't work either; see <a href=\"https://stackoverflow.com/a/46398651/4653379\">this post</a>.   And altogether, using globals in a sub is not good.</p>\n\n<p>Just declare variables in the subroutine and pass to it what it needs.</p>\n\n<p>Then they exist only in the sub, also masking possible such names from outside scope. The sub has a well defined interface, returns values (scalars) which you assign as needed, and all is clear.</p>\n\n<p>See <a href=\"http://perldoc.perl.org/perlsub.html#Private-Variables-via-my%28%29\" rel=\"nofollow noreferrer\">Private Variables via my() in perlsub</a></p>\n\n<hr>\n\n<p><strong>Update</strong></p>\n\n<p>The title hints at <code>use strict;</code> being in place, and a comment states that.  Then the question would be about declaration of variables. </p>\n\n<p>The <a href=\"http://perldoc.perl.org/strict.html\" rel=\"nofollow noreferrer\">strict pragma</a> requires, among a few other things, that all variables be declared or fully qualified.</p>\n\n<p>The <code>$res</code> in the sub isn't declared, thus the compilation fails; the <code>$a</code> and <code>$b</code> exist as globals (but for use with <code>sort</code> &ndash; don't use them for convenience). A declared variable is seen in included scopes but with functions this isn't quite so simple and you want to declare all variables inside a function.</p>\n\n<p>Global-like variables declared with <a href=\"https://perldoc.perl.org/functions/our.html\" rel=\"nofollow noreferrer\">our</a> are OK but their use brings about other issues. While globals do get used occasionally they are very rarely needed and are best avoided, since their use can ruin clean scoping which is one of critical principles in programming.</p>\n\n<p>A useful reference is <a href=\"https://perldoc.perl.org/perldiag.html\" rel=\"nofollow noreferrer\">perldiag</a>, which explains error messages. Or, use <a href=\"http://perldoc.perl.org/diagnostics.html\" rel=\"nofollow noreferrer\">diagnostics</a> in debugging runs, or better yet use <a href=\"https://perldoc.perl.org/splain.html\" rel=\"nofollow noreferrer\">splain</a> or run the code with <code>perl -Mdiagnostics ...</code></p>\n"}], "owner": {"reputation": 77, "user_id": 7568434, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/097e26962f64b93b5a09a51423616979?s=128&d=identicon&r=PG&f=1", "display_name": "keeru", "link": "https://stackoverflow.com/users/7568434/keeru"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 602, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1571892789, "creation_date": 1509946915, "question_id": 47130430, "link": "https://stackoverflow.com/questions/47130430/global-symbol-requires-explicit-package-name-error", "title": "global symbol requires explicit package name.Error", "body": "<p>If i give the variables as global it works fine. What is wrong with this code?</p>\n\n<pre><code>sub Multiply {\n    $res = $a* $b;\n    return ( $a, $b, $res);\n}\n\nmain: \nmy $a =3;\nmy $b =4;\nmy $res;\n( $a, $b, $res) = Multiply();\nprint (\"Input1 = $a\\nInput2 = $b\\nResult = $res\");\n</code></pre>\n"}, {"tags": ["regex", "perl", "stdin", "argv"], "comments": [{"owner": {"reputation": 1395, "user_id": 6256451, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5271ddbb0e7b464e61ea8a0ae2eaa68e?s=128&d=identicon&r=PG&f=1", "display_name": "Marcel", "link": "https://stackoverflow.com/users/6256451/marcel"}, "edited": false, "score": 0, "creation_date": 1509920380, "post_id": 47127215, "comment_id": 81204666, "body": "#1 How do you invoke the script? Probably the error is not related to the Perl code.  #2 Most likely you do not want to terminate the program after the first line processed. So remove the <code>exit(0);</code>."}, {"owner": {"reputation": 10661, "user_id": 135351, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/8281b1bd2eaad90adfda7f9aefac1d24?s=128&d=identicon&r=PG", "display_name": "dave", "link": "https://stackoverflow.com/users/135351/dave"}, "edited": false, "score": 1, "creation_date": 1509920446, "post_id": 47127215, "comment_id": 81204683, "body": "Is <code>filter.pl</code> executable and in your <code>PATH</code>? (Also, move the <code>exit(0);</code> outside and after your while loop.)"}, {"owner": {"reputation": 31, "user_id": 8652155, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3925bd3b95bdf5e028ae675903cefc3?s=128&d=identicon&r=PG&f=1", "display_name": "Sharrison", "link": "https://stackoverflow.com/users/8652155/sharrison"}, "edited": false, "score": 0, "creation_date": 1509921424, "post_id": 47127215, "comment_id": 81204931, "body": "Oh I didn&#39;t realize my exit(0) was inside my while statement. Moved it out and now it works fine. THANKS!!!"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1509925094, "post_id": 47127215, "comment_id": 81205762, "body": "Also: <code>$#ary</code> is the index of the last element in <code>@ary</code>.  So your condition on <code>$#ARGV</code> demands that the last element of <code>@ARGV</code> has index 2 so that <code>@ARGV</code> has indices <code>0, 1, 2</code>; <i>three</i> elements. What you want is <code>@ARGV != 2</code>."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1509936561, "post_id": 47127215, "comment_id": 81208096, "body": "&quot;Command not found&quot; is probably from not making <code>filter.pl</code> executable."}], "answers": [{"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1509936534, "post_id": 47127378, "comment_id": 81208091, "body": "A better solution would be shift off the first two elements of <code>@ARGV</code>: <code>die(&quot;Usage: ...\\n&quot;) if @ARGV &lt; 2; my ($pat, $repl) = splice(@ARGV, 0, 2); while (&lt;&gt;) { ...; s&#47;$pat&#47;$repl&#47;gi; ... }</code>"}], "tags": [], "owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "is_accepted": false, "score": 2, "last_activity_date": 1509921267, "creation_date": 1509921267, "answer_id": 47127378, "question_id": 47127215, "link": "https://stackoverflow.com/questions/47127215/perl-filter-using-cmd-and-piped-arguments/47127378#47127378", "title": "Perl Filter using cmd and piped arguments", "body": "<p><code>&lt;&gt;</code> is shorthand for <code>&lt;ARGV&gt;</code>, where <code>ARGV</code> is the special filehandle that can either refer to standard input, or to an input stream of all files names in <code>@ARGV</code>.</p>\n\n<p>Since your script makes use of <code>@ARGV</code> for purposes other than specifying input files, you can't use <code>ARGV</code> to read from standard input. You should use <code>&lt;STDIN&gt;</code> explicitly to read from standard input instead of <code>&lt;&gt;</code>.</p>\n\n<pre><code>while (&lt;STDIN&gt;)\n{\n    s/$ARGV[0]/$ARGV[1]/gi;\n    print $_;\n    exit(0);       # &lt;---- this probably belongs outside the loop\n}\n</code></pre>\n"}], "owner": {"reputation": 31, "user_id": 8652155, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3925bd3b95bdf5e028ae675903cefc3?s=128&d=identicon&r=PG&f=1", "display_name": "Sharrison", "link": "https://stackoverflow.com/users/8652155/sharrison"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 501, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1509921267, "creation_date": 1509920105, "question_id": 47127215, "link": "https://stackoverflow.com/questions/47127215/perl-filter-using-cmd-and-piped-arguments", "title": "Perl Filter using cmd and piped arguments", "body": "<p>I am writing a Perl script (filter.pl) that filters data presented on STDIN, changing all occurrences of one string to another and outputting all input lines, changed and unchanged to STDOUT. My usage is as follows: </p>\n\n<pre><code>USAGE: ./filter.pl 'FROMSTRING' 'TOSTRING'\n</code></pre>\n\n<p>For example, here is how I run my script:</p>\n\n<pre><code>echo \"this is a test\" | filter.pl 'a' '@'\n#output: \"this is @ test\"\n</code></pre>\n\n<p>Here is my code so far: </p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\n\n#Verify two cmd arguments are present.     \nif ($#ARGV !=2)\n    {\n    print \"Usage: ./filter.pl FROMSTRING TOSTRING\";\n    exit(1);\n    }\n\n#read from STDIN, replace FROMSTRING with TOSTRING, then print output\nwhile (&lt;&gt;)\n    {\n    s/$ARGV[0]/$ARGV[1]/gi;\n    print $_;\n    exit(0);\n    }\n</code></pre>\n\n<p>Basically this script uses \"(STDIN)\" to read each line of input, Uses $_ to access each line read, uses \"s/// to change all occurrences of FROMSTRING to TOSTRING on each line, and prints them out. </p>\n\n<p>When I run this from the command line I get an error: command not found. I suspect this is because I don't know the difference between piped-in and invocation arguments in Perl? Also wondering if I am on the right track with this. </p>\n\n<p>thanks.</p>\n"}, {"tags": ["perl"], "answers": [{"comments": [{"owner": {"reputation": 3432, "user_id": 604642, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/48daad611ba387f8473b0c1e5792aa3f?s=128&d=identicon&r=PG", "display_name": "shawnhcorey", "link": "https://stackoverflow.com/users/604642/shawnhcorey"}, "edited": false, "score": 0, "creation_date": 1510058933, "post_id": 47124809, "comment_id": 81266025, "body": "Name the iterator variable in for loops."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 3432, "user_id": 604642, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/48daad611ba387f8473b0c1e5792aa3f?s=128&d=identicon&r=PG", "display_name": "shawnhcorey", "link": "https://stackoverflow.com/users/604642/shawnhcorey"}, "edited": false, "score": 1, "creation_date": 1510068483, "post_id": 47124809, "comment_id": 81272708, "body": "Replacing one meaningless name with another doesn&#39;t help."}, {"owner": {"reputation": 3432, "user_id": 604642, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/48daad611ba387f8473b0c1e5792aa3f?s=128&d=identicon&r=PG", "display_name": "shawnhcorey", "link": "https://stackoverflow.com/users/604642/shawnhcorey"}, "edited": false, "score": 0, "creation_date": 1510081965, "post_id": 47124809, "comment_id": 81281207, "body": "That&#39;s why you should choose meaningful names for your variables and functions."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 3, "last_activity_date": 1509908277, "last_edit_date": 1509908277, "creation_date": 1509904909, "answer_id": 47124809, "question_id": 47124699, "link": "https://stackoverflow.com/questions/47124699/perl-how-to-i-count-multiple-values-in-hash-into-a-new-hash/47124809#47124809", "title": "perl: How to I count multiple values in hash into a new hash?", "body": "<pre><code>my %counts;\nfor (values(%hash)) {  # Iterate over the values of the hash, the references to the arrays.\n   for (@$_) {         # Iterate over the values of the referenced array.\n      ++$counts{$_};\n   }\n}\n</code></pre>\n\n<p>or</p>\n\n<pre><code>my %counts;\n++$counts{$_} for map @$_, values %hash;\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 8890311, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56584a74fcff97dc15d177b57fdb4aa8?s=128&d=identicon&r=PG&f=1", "display_name": "James", "link": "https://stackoverflow.com/users/8890311/james"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 84, "favorite_count": 0, "accepted_answer_id": 47124809, "answer_count": 1, "score": -8, "last_activity_date": 1509908277, "creation_date": 1509904254, "last_edit_date": 1509904793, "question_id": 47124699, "link": "https://stackoverflow.com/questions/47124699/perl-how-to-i-count-multiple-values-in-hash-into-a-new-hash", "title": "perl: How to I count multiple values in hash into a new hash?", "body": "<p>My current hash:</p>\n\n<pre><code>%hash = (\n  \"foo\",\n   [\n     \"apple\",\n     \"orange\",\n     \"apple\",\n     \"apple\"\n  ],\n  \"bob\",\n  [\n    \"apple\",\n    \"orange\",\n  ],\n);\n</code></pre>\n\n<p>How do I obtain this output?</p>\n\n<pre><code>%hash2 = (\n  apple  =&gt; 4,\n  orange =&gt; 2,\n);\n</code></pre>\n"}, {"tags": ["windows", "perl", "psexec"], "comments": [{"owner": {"reputation": 4629, "user_id": 3474146, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/rb7ih.jpg?s=128&g=1", "display_name": "alex", "link": "https://stackoverflow.com/users/3474146/alex"}, "edited": false, "score": 0, "creation_date": 1509902843, "post_id": 47124403, "comment_id": 81199035, "body": "Maybe a string interpolation issue?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 2, "creation_date": 1509903554, "post_id": 47124403, "comment_id": 81199290, "body": "Always use <code>use strict; use warnings qw( all );</code>!!! It would have identified your error."}], "answers": [{"comments": [{"owner": {"reputation": 89, "user_id": 2708601, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/5e295d1aaf101788673ab244bca76ec1?s=128&d=identicon&r=PG&f=1", "display_name": "Geoffrey H.", "link": "https://stackoverflow.com/users/2708601/geoffrey-h"}, "edited": false, "score": 0, "creation_date": 1509903636, "post_id": 47124465, "comment_id": 81199319, "body": "Thank you, this was indeed the problem. This, and apparently it had to be <code>\\&quot;HKLM...\\&quot;</code>"}], "tags": [], "owner": {"reputation": 8687, "user_id": 325117, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2f0766debb859466aed4b305cc915d8e?s=128&d=identicon&r=PG", "display_name": "Martin Broadhurst", "link": "https://stackoverflow.com/users/325117/martin-broadhurst"}, "is_accepted": true, "score": 3, "last_activity_date": 1550583730, "last_edit_date": 1550583730, "creation_date": 1509903061, "answer_id": 47124465, "question_id": 47124403, "link": "https://stackoverflow.com/questions/47124403/perl-windows-command-fails/47124465#47124465", "title": "Perl Windows command fails", "body": "<p>You need to double up all of the backslashes:</p>\n\n<pre><code>system(\"psexec \\\\\\\\$comp_name reg query 'HKLM\\\\SOFTWARE\\\\Microsoft\\\\Windows NT\\\\CurrentVersion' /v ReleaseId\")\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 17619, "user_id": 7818749, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec4a72453e116debb802d55e88c2572e?s=128&d=identicon&r=PG&f=1", "display_name": "Gerhard", "link": "https://stackoverflow.com/users/7818749/gerhard"}, "is_accepted": false, "score": 0, "last_activity_date": 1550583802, "last_edit_date": 1550583802, "creation_date": 1510061679, "answer_id": 47159317, "question_id": 47124403, "link": "https://stackoverflow.com/questions/47124403/perl-windows-command-fails/47159317#47159317", "title": "Perl Windows command fails", "body": "<p>Doubling all the backslashes will fix the issue yes, <strong>however</strong> when using single external quotes and internal double quotes eliminate the need to add double backslashes and is easier to read.</p>\n\n<pre><code>system('psexec \\\\$comp_name reg query \"HKLM\\SOFTWARE\\Microsoft\\Windows NT\\CurrentVersion\" /v ReleaseId');\n</code></pre>\n"}], "owner": {"reputation": 89, "user_id": 2708601, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/5e295d1aaf101788673ab244bca76ec1?s=128&d=identicon&r=PG&f=1", "display_name": "Geoffrey H.", "link": "https://stackoverflow.com/users/2708601/geoffrey-h"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 99, "favorite_count": 0, "accepted_answer_id": 47124465, "answer_count": 2, "score": -2, "last_activity_date": 1550583802, "creation_date": 1509902673, "last_edit_date": 1509938639, "question_id": 47124403, "link": "https://stackoverflow.com/questions/47124403/perl-windows-command-fails", "title": "Perl Windows command fails", "body": "<p>I'm trying to run a simple query on network computers to get their Windows' version. This command runs, and returns expected results, when used from the command line:</p>\n\n<pre><code>psexec \\\\comp_name reg query \"HKLM\\SOFTWARE\\Microsoft\\Windows NT\\CurrentVersion\" /v ReleaseId\n</code></pre>\n\n<p>but when run from Perl using: </p>\n\n<pre><code>system(\"psexec \\\\\\\\$comp_name reg query 'HKLM\\SOFTWARE\\Microsoft\\Windows NT\\CurrentVersion' /v ReleaseId\")\n</code></pre>\n\n<p>I get the error from REG <code>ERROR: Invalid key name.</code> Considering that both commands are the same, I cannot figure out why I am getting an error when running it from Perl. My only assumption is the way it's resolving the quotes. Note that this problem persists regardless of whether I use system, exec, or  <code>``</code>. Any suggestions?</p>\n"}, {"tags": ["regex", "perl"], "answers": [{"comments": [{"owner": {"reputation": 1973, "user_id": 1716999, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/06a58106c9a1013f1ca791c46579d664?s=128&d=identicon&r=PG", "display_name": "rubystallion", "link": "https://stackoverflow.com/users/1716999/rubystallion"}, "edited": false, "score": 0, "creation_date": 1509881669, "post_id": 47120869, "comment_id": 81191757, "body": "Cool, writing it like this makes it easier. Why do you pass the string parameter as a reference in parse_tuple?"}, {"owner": {"reputation": 54872, "user_id": 1521179, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/MH7pk.png?s=128&g=1", "display_name": "amon", "link": "https://stackoverflow.com/users/1521179/amon"}, "reply_to_user": {"reputation": 1973, "user_id": 1716999, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/06a58106c9a1013f1ca791c46579d664?s=128&d=identicon&r=PG", "display_name": "rubystallion", "link": "https://stackoverflow.com/users/1716999/rubystallion"}, "edited": false, "score": 2, "creation_date": 1509881822, "post_id": 47120869, "comment_id": 81191798, "body": "@rubystallion Because the current <code>pos</code> where the <code>\\G</code> anchors is part of the string value, we must not make a copy (or we&#39;d have to assign <code>pos</code> again in each sub). Note that <code>parse_element()</code> can continue the match where <code>parse_tuple()</code> ended because the <code>$$ref</code> has the correct pos. Copies also get inefficient for larger documents."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1509899016, "post_id": 47120869, "comment_id": 81197597, "body": "I think this is one of those places where it would make sense to use <code>$_</code> instead of a parameter."}, {"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 1, "creation_date": 1509908396, "post_id": 47120869, "comment_id": 81200824, "body": "I thought there was a subtle difference between <code>pos $foo = 0</code> and <code>pos $foo = undef</code>, but I&#39;m coming up with whatever it is; maybe I&#39;m just misremembering"}, {"owner": {"reputation": 54872, "user_id": 1521179, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/MH7pk.png?s=128&g=1", "display_name": "amon", "link": "https://stackoverflow.com/users/1521179/amon"}, "reply_to_user": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 1, "creation_date": 1509909724, "post_id": 47120869, "comment_id": 81201261, "body": "@ysth According to <a href=\"http://perldoc.perl.org/functions/pos.html\" rel=\"nofollow noreferrer\"><code>perldoc  -f pos</code></a>, an undef pos indicates match failure (avoided here due to <code>&#47;gc</code> regex flags) or that so far no regex was executed on the string. I set pos to zero in order to make this important step more explicit, in order to reset the pos if parse() takes a ref rather than making a copy, and more importantly: so that error() can run without warnings even when the first match fails and pos would otherwise still be undef."}], "tags": [], "owner": {"reputation": 54872, "user_id": 1521179, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/MH7pk.png?s=128&g=1", "display_name": "amon", "link": "https://stackoverflow.com/users/1521179/amon"}, "is_accepted": true, "score": 6, "last_activity_date": 1509880165, "creation_date": 1509880165, "answer_id": 47120869, "question_id": 47120547, "link": "https://stackoverflow.com/questions/47120547/parsing-nested-tuples-using-perl-regexp-with-r/47120869#47120869", "title": "Parsing nested tuples using perl regexp with $^R", "body": "<p>Trying to figure out how to use <code>(?{ ... })</code> constructs is almost always not worth the effort. In particular, this can have unexpected behaviour together with backtracking. It is also very difficult to debug such regexes since the control flow tends to be non-obvious.</p>\n\n<p>Instead, it tends to be easier to do write an ad-hoc recursive descent parser with <code>m//gc</code>-style lexing: Each Perl string stores its last match offset. When applying a regex with <code>m/\\G ... /gc</code> in scalar context, it can anchor at the last offset and advances the offset iff the match succeeds.</p>\n\n<p>Here:</p>\n\n<pre><code>use strict;\nuse warnings;\nuse Test::More;\n\nsub parse {\n  my ($str) = @_;\n  pos($str) = 0;  # set match position to beginning\n  return parse_tuple(\\$str);\n}\n\nsub parse_tuple {\n  my ($ref) = @_;\n  $$ref =~ /\\G T \\s/gcx or die error($ref, \"expected tuple start T\");\n  my $car = parse_element($ref);\n  $$ref =~ /\\G \\s /gcx or die error($ref, \"expected space between tuple elements\");\n  my $cdr = parse_element($ref);\n  return [$car, $cdr];\n}\n\nsub parse_element {\n  my ($ref) = @_;\n  return 'a' if $$ref =~ /\\G a /gcx;\n\n  $$ref =~ /\\G \\( /gcx or die error($ref, \"expected opening paren for nested tuple\");\n  my $tuple = parse_tuple($ref);\n  $$ref =~ /\\G \\) /gcx or die error($ref, \"expected closing paren after nested tuple\");\n  return $tuple;\n}\n\nsub error {\n  my ($ref, $msg) = @_;\n  my $snippet = substr $$ref, pos($$ref), 20;\n  return \"$msg just before '$snippet...'\";\n}\n\nis_deeply parse('T a a'), ['a','a'];\nis_deeply parse('T (T a a) a'), [['a','a'],'a'];\nis_deeply parse('T a (T a a)'), ['a',['a','a']];\nis_deeply parse('T (T a a) (T a a)'), [['a','a'],['a','a']];\nis_deeply parse('T (T (T a a) a) (T a (T a a))'), [[['a','a'],'a'],['a',['a','a']]];\ndone_testing;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1973, "user_id": 1716999, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/06a58106c9a1013f1ca791c46579d664?s=128&d=identicon&r=PG", "display_name": "rubystallion", "link": "https://stackoverflow.com/users/1716999/rubystallion"}, "is_accepted": false, "score": 0, "last_activity_date": 1517968060, "creation_date": 1517968060, "answer_id": 48654748, "question_id": 47120547, "link": "https://stackoverflow.com/questions/47120547/parsing-nested-tuples-using-perl-regexp-with-r/48654748#48654748", "title": "Parsing nested tuples using perl regexp with $^R", "body": "<p>I fixed the code in my question. Turns out I accidentally wrote <code>$^R[1]</code> instead of <code>$^R-&gt;[1]</code>. So now I understand why amon said that these constructs are hard to debug ;-)</p>\n\n<pre><code>use v5.10;\nuse Data::Dumper;\n\nwhile (&lt;DATA&gt;) {\n    chomp;\n    /(?&amp;TUPLE)(?{$a = $^R-&gt;[1]})\n    (?(DEFINE)\n        (?&lt;TUPLE&gt;\n            T \\s (?&amp;ELEM) \\s (?&amp;ELEM)\n            (?{ [$^R-&gt;[0][0],[$^R-&gt;[0][1],$^R-&gt;[1]]] })\n        )\n        (?&lt;ELEM&gt;\n            (?: (a) (?{ [$^R,$^N] }) | \\( (?&amp;TUPLE) \\) )\n        )\n    )/x;\n    say Dumper $a;\n}\n\n__DATA__\nT a a\nT (T a a) a\nT a (T a a)\nT (T a a) (T a a)\nT (T (T a a) a) (T a (T a a))\n</code></pre>\n"}], "owner": {"reputation": 1973, "user_id": 1716999, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/06a58106c9a1013f1ca791c46579d664?s=128&d=identicon&r=PG", "display_name": "rubystallion", "link": "https://stackoverflow.com/users/1716999/rubystallion"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 162, "favorite_count": 0, "accepted_answer_id": 47120869, "answer_count": 2, "score": 6, "last_activity_date": 1517968060, "creation_date": 1509878080, "question_id": 47120547, "link": "https://stackoverflow.com/questions/47120547/parsing-nested-tuples-using-perl-regexp-with-r", "title": "Parsing nested tuples using perl regexp with $^R", "body": "<p>I want to learn how to create an abstract syntax tree for nested tuples using a Perl regexp with embedded code execution. I can easily program that using a Perl 6 grammar and I'm aware that using parsing modules would simplify the task in Perl 5, but I think for such simple tasks I should be able to do it without modules by learning how to mechanically translate from grammar definitions. I couldn't find a way to dereference $^R, so I try to undo the involuntary nesting at the end of the TUPLE rule definition, but the output is incorrect, e.g. some substrings appear twice. </p>\n\n<pre><code>use v5.10;\nuse Data::Dumper;\n\nwhile (&lt;DATA&gt;) {\n    chomp;\n    /(?&amp;TUPLE)(?{$a = $^R})\n    (?(DEFINE)\n        (?&lt;TUPLE&gt;\n            T \\s (?&amp;ELEM) \\s (?&amp;ELEM)\n            (?{ [$^R-&gt;[0][0],[$^R-&gt;[0][1],$^R[1]]] })\n        )\n        (?&lt;ELEM&gt;\n            (?: (a) (?{ [$^R,$^N] }) | \\( (?&amp;TUPLE) \\) )\n        )\n    )/x;\n    say Dumper $a;\n}\n\n__DATA__\nT a a\nT (T a a) a\nT a (T a a)\nT (T a a) (T a a)\nT (T (T a a) a) (T a (T a a))\n</code></pre>\n\n<p>Expected output data structure is a nested list:</p>\n\n<pre><code>['a','a'];\n['a',['a','a']];\n[['a','a'],'a'];\n[['a','a'],['a','a']];\n[[['a','a'],'a'],['a',['a','a']]]\n</code></pre>\n\n<p>For reference I'll also share my working Perl 6 code:</p>\n\n<pre><code>grammar Tuple {\n  token TOP { 'T ' &lt;elem&gt; ' ' &lt;elem&gt; }\n  token elem { 'a' | '(' &lt;TOP&gt; ')'}\n}\nclass Actions {\n  method TOP($/) {make ($&lt;elem&gt;[0].made, $&lt;elem&gt;[1].made)}\n  method elem($/) {make $&lt;TOP&gt; ?? $&lt;TOP&gt;.made !! 'a'}\n}\n</code></pre>\n"}, {"tags": ["perl", "sorting"], "comments": [{"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 1, "creation_date": 1509860719, "post_id": 47118524, "comment_id": 81186973, "body": "Hashes are inherently unordered, but see <a href=\"https://metacpan.org/pod/Hash::Ordered\" rel=\"nofollow noreferrer\">Hash::Ordered</a>"}], "answers": [{"tags": [], "owner": {"reputation": 1672, "user_id": 4355253, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ee8cbfecfb7686f370b07eea52273c5?s=128&d=identicon&r=PG&f=1", "display_name": "Javier Elices", "link": "https://stackoverflow.com/users/4355253/javier-elices"}, "is_accepted": true, "score": 1, "last_activity_date": 1509895197, "creation_date": 1509895197, "answer_id": 47123195, "question_id": 47118524, "link": "https://stackoverflow.com/questions/47118524/perl-sort-a-hash-by-value-in-descending-order-and-then-key-in-ascending-order/47123195#47123195", "title": "Perl Sort a hash by value in descending order and then key in ascending order", "body": "<p>A hash in Perl is not ordered nor it can be ordered. This is because the <em>hash</em> algorithm will spread the keys at random. A hash is defined like this:</p>\n\n<pre><code>my %hash = (\n  key1 =&gt; value1,\n  key2 =&gt; value2,\n);\n</code></pre>\n\n<p>That is, it is defined with a list of value pairs <code>key =&gt; value</code>. If you want a collection of ordered items, you need to use a list. It is defined like:</p>\n\n<pre><code>my @list = ( 1, 2, 3 );\n</code></pre>\n\n<p>You may define a list of hash refs (closer to what you want) like this:</p>\n\n<pre><code>my @list = (\n  { key1 =&gt; value1 },\n  { key2 =&gt; value2 },\n);\n</code></pre>\n\n<p>A hash ref is a reference to a hash, and it is defined with <code>{</code> and <code>}</code>.</p>\n\n<p>So solving your problem, we have:</p>\n\n<pre><code>use Data::Dumper;\n\nmy %hash = (\n  husky =&gt; 2,\n  alaska =&gt; 2,\n  akita =&gt; 3,\n  brand =&gt;1,\n);\n\nmy @list = map { { $_ =&gt; $hash{$_} } } \n           sort { $hash{$b} &lt;=&gt; $hash{$a} or $a cmp $b }\n           keys %hash;\n\nprint Dumper(@list);\n</code></pre>\n\n<p><code>keys %hash</code> will give you a list of the keys in the hash. <code>sort</code> will sort elements in a list. As we want a special ordering, we provide the <em>body</em> of the sorting bit using the operators <code>&lt;=&gt;</code> to compare strings and <code>cmp</code> to compare numbers. Each returns <code>-1</code> if the left side is less than the right side; <code>0</code> if they are the same and <code>1</code> if the left side is more than the right side. The <code>or</code> will enter the second comparison if the first is <code>0</code>.</p>\n\n<p>Finally, <code>map</code> will transform the list of keys (ordered) into a list of hash refs.</p>\n\n<p><code>Dumper</code> is a function that creates a human readable text representation of any Perl data structure.</p>\n\n<p>The final output is:</p>\n\n<pre><code>$VAR1 = {\n          'akita' =&gt; 3\n        };\n$VAR2 = {\n          'alaska' =&gt; 2\n        };\n$VAR3 = {\n          'husky' =&gt; 2\n        };\n$VAR4 = {\n          'brand' =&gt; 1\n        };\n</code></pre>\n"}], "owner": {"reputation": 9, "user_id": 8512329, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-1ZmWPXYGeFs/AAAAAAAAAAI/AAAAAAAAABI/pYEcfqsR0EU/photo.jpg?sz=128", "display_name": "Ferriad Wang", "link": "https://stackoverflow.com/users/8512329/ferriad-wang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 826, "favorite_count": 0, "accepted_answer_id": 47123195, "answer_count": 1, "score": -1, "last_activity_date": 1509895197, "creation_date": 1509860084, "question_id": 47118524, "link": "https://stackoverflow.com/questions/47118524/perl-sort-a-hash-by-value-in-descending-order-and-then-key-in-ascending-order", "title": "Perl Sort a hash by value in descending order and then key in ascending order", "body": "<p>Suppose I have a hash like</p>\n\n<pre><code>%hash = \n{\n    husky =&gt; 2\n    alaska =&gt; 2\n    akita =&gt; 3\n    brand =&gt;1\n}\n</code></pre>\n\n<p>How can I sort it by descending value(number), and ascending key(alphabet)? The desired result should be:</p>\n\n<pre><code>{\n    akita =&gt;3\n    alaska =&gt;2\n    husky =&gt;2\n    brand=&gt;1\n}\n</code></pre>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 1672, "user_id": 4355253, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ee8cbfecfb7686f370b07eea52273c5?s=128&d=identicon&r=PG&f=1", "display_name": "Javier Elices", "link": "https://stackoverflow.com/users/4355253/javier-elices"}, "edited": false, "score": 3, "creation_date": 1509834548, "post_id": 47116181, "comment_id": 81182409, "body": "Could you edit your question to add some input data and expected output?"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1509879498, "post_id": 47116181, "comment_id": 81191134, "body": "I&#39;ve attempted to fix the indentation in your sample code. You&#39;re welcome, but please do it yourself in the future. Clear indentation is an important tool for understanding the structure of code and if you&#39;re asking a group of strangers to read and understand your code it&#39;s only polite to make that as easy for them as possible. It seems that your <code># end while</code> comment is incorrect as it actually marks the end of your <code>for</code> loop. You might want to check that."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1509879798, "post_id": 47116181, "comment_id": 81191216, "body": "And now I&#39;ve largely undone my fixes as I see your code was correct in the original version. If you&#39;re going to write one-line for loops, it might be clearer to use the postfix version - <code>tr&#47;%%&#47;&#47;d for @line_values</code>. But you may well be misunderstanding <code>tr&#47;...&#47;...&#47;</code> as that second <code>%</code> isn&#39;t doing anything useful."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1509880550, "post_id": 47116181, "comment_id": 81191428, "body": "Oh, and you have a spurious, closing, <code>}</code>. Not sure where that came from."}], "answers": [{"tags": [], "owner": {"reputation": 2496, "user_id": 2469275, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/b7EZh.png?s=128&g=1", "display_name": "janh", "link": "https://stackoverflow.com/users/2469275/janh"}, "is_accepted": false, "score": 0, "last_activity_date": 1509835627, "creation_date": 1509835627, "answer_id": 47116385, "question_id": 47116181, "link": "https://stackoverflow.com/questions/47116181/reading-input-file-and-creating-new-hash/47116385#47116385", "title": "Reading input file and creating new hash", "body": "<p>This line is the culprit:</p>\n\n<pre><code>%report_data = ({$state_id} =&gt; {\\@$var1})\n</code></pre>\n\n<p>{ } creates a hashref. You are doing two weird things in this line: use a hashref with a single key ($state_id) as the key in %report_data and a hashref with a single key (<code>\\@$var1</code>, which tries to derefence the scalar $var1 and use it in array context (<code>@$var1</code>) and then tries to turn that into a reference again (I'm confused, no wonder the interpreter is as well) ).\nThat'd make more sense as </p>\n\n<pre><code>%report_data = ($state_id =&gt; $var1);\n</code></pre>\n\n<p>But that would reset the hash %report_data for every line you read.\nWhat you want is to just set the key of that hash, so first, define the variable before the loop:</p>\n\n<pre><code>my %report_data = ();\n</code></pre>\n\n<p>and in your while loop, just set a key to a value:</p>\n\n<pre><code>$report_data{ $state_id } = $var1; # or $var2\n</code></pre>\n\n<p>Finally, you are trying to print a reference to the hash, which makes little sense. I'd suggest a simple loop:</p>\n\n<pre><code>for my $key (keys %report_data) {\n    print $key . \" = \" . $report_data{ $key } . \"\\n\";\n}\n</code></pre>\n\n<p>This iterates over all the keys in the hash and then prints them with their values, and looks easy to read and understand, I hope.</p>\n\n<p>In general: don't try to use references unless you know how they work. They are not a magic bullet that you fire at your code and all the problems go poof; quite the opposite, they can become that painful bullet that ends up in your own foot. It's good to learn about references, though, because you will need them when you advance and work more with Perl. <a href=\"https://perldoc.perl.org/perlreftut.html\" rel=\"nofollow noreferrer\">perlreftut</a> is a good place to start.</p>\n"}, {"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": true, "score": 1, "last_activity_date": 1509880649, "last_edit_date": 1509880649, "creation_date": 1509835859, "answer_id": 47116408, "question_id": 47116181, "link": "https://stackoverflow.com/questions/47116181/reading-input-file-and-creating-new-hash/47116408#47116408", "title": "Reading input file and creating new hash", "body": "<p>It's hard to be sure without any indication of what the input and expected output should be, but at a guess your <code>if</code> blocks should look like this</p>\n\n<pre><code>if ( $var1 &gt; $var2 ) {\n    $report_data{$state_id} = $var1;\n}\nelse {\n    $report_data{$state_id} = $var2;\n}\n</code></pre>\n\n<p>or, more simply</p>\n\n<pre><code>$report_data{$state_id} = $var1 &gt; $var2 ? $var1 : $var2;\n</code></pre>\n"}], "owner": {"reputation": 25, "user_id": 8887201, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b167c3226f13430259f6838f6c7808b1?s=128&d=identicon&r=PG&f=1", "display_name": "lalala53__", "link": "https://stackoverflow.com/users/8887201/lalala53"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 222, "favorite_count": 0, "accepted_answer_id": 47116408, "answer_count": 2, "score": 0, "last_activity_date": 1509882463, "creation_date": 1509834040, "last_edit_date": 1509882463, "question_id": 47116181, "link": "https://stackoverflow.com/questions/47116181/reading-input-file-and-creating-new-hash", "title": "Reading input file and creating new hash", "body": "<p>My input files have percentage exposures and I read in only the highest value.</p>\n\n<p>I keep getting errors</p>\n\n<blockquote>\n  <p>odd number of elements in anonymous hash</p>\n</blockquote>\n\n<p>and</p>\n\n<blockquote>\n  <p>Can't use string as an ARRAY ref while \"strict refs\" in use</p>\n</blockquote>\n\n<p>I tried forcing the numbers to be read in as integers but fell flat. Any advice? I'd like to create a hash with key and highest value.</p>\n\n<pre><code>    while ( &lt;$DATA_FILE&gt; ) {\n\n        chomp;\n        my @line_values = split( /,/, $_ );\n        my $state_id    = $line_values[0];\n\n        # skip header row\n        next if ( $state_id eq $HEADER_VALUE );\n\n        for ( @line_values ) {\n            tr/%%//d\n        };\n\n        # assign data used as hash keys to variables\n        my $var1 = int( $line_values[1] );\n        my $var2 = int( $line_values[2] );\n\n        if ( $var1 &gt; $var2 ) {\n            %report_data = ( { $state_id } =&gt; { \\@$var1 } )\n        }\n        else {\n            %report_data = ( { $state_id } =&gt; { \\@$var2 } )\n        }\n\n    } # end while\n\n    print \\%report_data;\n\n    # close file\n    close( $DATA_FILE ) || printf( STDERR \"Failed to close $file_path\\n\" );\n}\n</code></pre>\n"}, {"tags": ["perl", "mojolicious", "mojolicious-lite"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1509812925, "post_id": 47112622, "comment_id": 81175555, "body": "What do you mean by <i>&quot;to no result&quot;</i> are you clear that <code>$app-&gt;sessions-&gt;secure(0)</code> will <i>disable</i> security so that cookies may be sent over HTTP? What behaviour are you getting?"}, {"owner": {"reputation": 3574, "user_id": 676192, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/fcef8c55deae46cc0bfe986b2c189f70?s=128&d=identicon&r=PG", "display_name": "simone", "link": "https://stackoverflow.com/users/676192/simone"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1509817749, "post_id": 47112622, "comment_id": 81177209, "body": "@borodin - 2 things show that nothing has happened: the cookie is not accessible to JavaScript and it\u2019s still showing as \u201csecure\u201d in the browser debugger window. And yes, I\u2019m aware - that\u2019s only in the development environment."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 3, "creation_date": 1509818571, "post_id": 47112622, "comment_id": 81177509, "body": "I think you need to create an <a href=\"https://stackoverflow.com/help/mcve\"><i>MCVE</i></a> that allows us to experiment with your code. Otherwise we will be making far too many guesses and assumptions to be able to recreate your situation properly. You may well find your own solution in the process of creating it."}], "owner": {"reputation": 3574, "user_id": 676192, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/fcef8c55deae46cc0bfe986b2c189f70?s=128&d=identicon&r=PG", "display_name": "simone", "link": "https://stackoverflow.com/users/676192/simone"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 186, "favorite_count": 0, "answer_count": 0, "score": 3, "last_activity_date": 1509811305, "creation_date": 1509811305, "question_id": 47112622, "link": "https://stackoverflow.com/questions/47112622/set-secure-flag-on-mojolicious-session", "title": "Set &quot;secure&quot; flag on Mojolicious session", "body": "<p>How does one set the secure flag on a Mojolicious session cookie? I'd like to be able to access it locally also on my test environment which does not run on https.</p>\n\n<p>I've read the <a href=\"http://mojolicious.org/perldoc/Mojolicious/Sessions\" rel=\"nofollow noreferrer\">Sessions</a> docs and the <a href=\"http://mojolicious.org/perldoc/Mojolicious#sessions\" rel=\"nofollow noreferrer\">app->session</a> one, and tried (in a <code>Mojolicious::Lite</code> app)</p>\n\n<pre><code>app-&gt;sessions-&gt;secure(0)\n</code></pre>\n\n<p>but to no result.</p>\n\n<p>What am I doing wrong?</p>\n"}, {"tags": ["perl", "abstract-class", "moose"], "comments": [{"owner": {"reputation": 4191, "user_id": 1466640, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c0630f2d5ac5fb844675c58d3d2dfa57?s=128&d=identicon&r=PG&f=1", "display_name": "AKHolland", "link": "https://stackoverflow.com/users/1466640/akholland"}, "edited": false, "score": 4, "creation_date": 1509740428, "post_id": 47103787, "comment_id": 81158121, "body": "Roles are the way to solve this."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 2, "creation_date": 1509741441, "post_id": 47103787, "comment_id": 81158566, "body": "I don&#39;t see how it can be &quot;too late&quot; for <code>Moose::Role</code>."}, {"owner": {"reputation": 381, "user_id": 3380064, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PrmsH.jpg?s=128&g=1", "display_name": "interduo", "link": "https://stackoverflow.com/users/3380064/interduo"}, "edited": false, "score": 0, "creation_date": 1509741858, "post_id": 47103787, "comment_id": 81158754, "body": "You <i>might</i> be able to use the <a href=\"https://metacpan.org/pod/distribution/Moose/lib/Moose/Manual/Attributes.pod#Weak-references\" rel=\"nofollow noreferrer\">weak_ref option</a>, but I agree with AKHolland and Borodin that you need to make time for Roles."}, {"owner": {"reputation": 13, "user_id": 4142054, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/37855bec96398ae46f7e0af42a5c05c7?s=128&d=identicon&r=PG&f=1", "display_name": "f_v", "link": "https://stackoverflow.com/users/4142054/f-v"}, "edited": false, "score": 0, "creation_date": 1509810731, "post_id": 47103787, "comment_id": 81174888, "body": "AKHolland, Borodin, interduoThanks. Moose::Role is the correct approach. But here is the real life situation. Adding <code>die if $_[1] eq  __PACKAGE__ ;</code> is one line modification in one package. Replacing <code>extends PackageName</code> with  <code>with PackageName</code> and  adding <code>requires method_name</code> to a number of packages, testing, debugging... Refactoring takes time."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1509839635, "post_id": 47103787, "comment_id": 81183651, "body": "The testing part should be calling <code>prove</code>, if you wrote proper tests. :-)"}], "answers": [{"tags": [], "owner": {"reputation": 1437, "user_id": 2518556, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/7mTHZ.jpg?s=128&g=1", "display_name": "yahermann", "link": "https://stackoverflow.com/users/2518556/yahermann"}, "is_accepted": false, "score": 1, "last_activity_date": 1510160196, "creation_date": 1510160196, "answer_id": 47185438, "question_id": 47103787, "link": "https://stackoverflow.com/questions/47103787/prevent-instantiation-of-a-moose-abstract-class/47185438#47185438", "title": "Prevent instantiation of a Moose abstract class", "body": "<p>How is it too late to use Roles?  Just replace:</p>\n\n<pre><code>use Moose;\n</code></pre>\n\n<p>with</p>\n\n<pre><code>use Moose::Role;\n</code></pre>\n\n<p>And in Foo::Concrete, replace</p>\n\n<pre><code>extends 'Foo::Abstract';\n</code></pre>\n\n<p>with</p>\n\n<pre><code>with 'Foo::Abstract';\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 4383, "user_id": 2264756, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/72ca0434d6998fb97198f278926c6abf?s=128&d=identicon&r=PG", "display_name": "perigrin", "link": "https://stackoverflow.com/users/2264756/perigrin"}, "is_accepted": true, "score": 1, "last_activity_date": 1510170281, "creation_date": 1510170281, "answer_id": 47188388, "question_id": 47103787, "link": "https://stackoverflow.com/questions/47103787/prevent-instantiation-of-a-moose-abstract-class/47188388#47188388", "title": "Prevent instantiation of a Moose abstract class", "body": "<p>As several people have pointed out in comments you probably <em>should</em> be using a Role and making the change in every \"subclass\" to do composition. However you make a compelling argument for laziness (one change in one place during a refactor). </p>\n\n<p>My suggestion would be \"do both\". Refactor the existing class you want to be abstract out into a role:</p>\n\n<pre><code>mv lib/Foo/Abstract.pm lib/Foo/Role/Interface.pm; \nperl -pie's/\\bFoo::Abstract\\b/Foo::Role::Interface/g' !$\n</code></pre>\n\n<p>Then in a new <code>Foo::Abstract</code> simply do:</p>\n\n<pre><code>package Foo::Abstract;\nuse Moose;\nwith qw(Foo::Role::Interface);\naround BUILDARGS =&gt; sub { \n    $_[1] ne __PACKAGE__ ? shift-&gt;(@_) : die __PACKAGE__ . 'is ABSTRACT';\n}\n1;\n</code></pre>\n\n<p>This way you can slowly replace the <code>extends qw(Foo::Abstract)</code> over time with the more appropriate <code>with qw(Foo::Role::Interface)</code> but don't have to bite that cost all up front. You can even document that this is the plan in <code>Foo::Abstract</code> so that other developers who come along help with the conversion.</p>\n"}], "owner": {"reputation": 13, "user_id": 4142054, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/37855bec96398ae46f7e0af42a5c05c7?s=128&d=identicon&r=PG&f=1", "display_name": "f_v", "link": "https://stackoverflow.com/users/4142054/f-v"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 229, "favorite_count": 0, "accepted_answer_id": 47188388, "answer_count": 2, "score": 1, "last_activity_date": 1510170281, "creation_date": 1509739988, "last_edit_date": 1509741399, "question_id": 47103787, "link": "https://stackoverflow.com/questions/47103787/prevent-instantiation-of-a-moose-abstract-class", "title": "Prevent instantiation of a Moose abstract class", "body": "<p>I am using Perl with Moose, and have to prevent instantiation of an abstract class.</p>\n\n<p>The project is in a quite advanced stage - too late for <code>Moose::Role</code> or <code>MooseX::*</code>.</p>\n\n<p>I am thinking about checking a package name against a class name in <code>BUILDARGS</code>, \nand calling <code>die</code> if there's a match.</p>\n\n<p>Is there any problems with this approach?</p>\n\n<pre><code>package Foo::Abstract {\n\n    use Moose;\n\n    has 'test' =&gt; ( isa =&gt; 'Int', is =&gt; 'rw', default =&gt; '0' );\n\n    around BUILDARGS =&gt; sub {\n        die if $_[1] eq __PACKAGE__;\n        $orig  = shift;\n        $class = shift;\n        $class-&gt;$orig( @_ );\n    };\n\n    no Moose;\n}\n\npackage Foo::Concrete {\n\n    use Moose;\n\n    extends 'Foo::Abstract';\n\n    no Moose;\n}\n\nuse Test::More;\nuse Test::Exception;\n\ndies_ok { Foo::Abstract-&gt;new() } \"cannot instantiate. OK\";\n\nmy $c;\nlives_ok { $c = Foo::Concrete-&gt;new() } \"instantiated Foo::Concrete. OK\";\n\nok( 0 == $c-&gt;test );\n\ndone_testing();\n</code></pre>\n"}, {"tags": ["perl", "autovivification"], "answers": [{"tags": [], "owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "is_accepted": true, "score": 5, "last_activity_date": 1520612223, "last_edit_date": 1520612223, "creation_date": 1509727824, "answer_id": 47100777, "question_id": 47100257, "link": "https://stackoverflow.com/questions/47100257/why-perl-autovivification-does-not-work-for-but-0-does/47100777#47100777", "title": "Why perl autovivification does not work for -&gt;@* but -&gt;@[0] does?", "body": "<p>A slice gets you lvalues (writable scalars) for each index specified; a list context array dereference doesn't make any lvalues.  And the general rule is that <strong>autovivification only applies with lvalues</strong>.</p>\n\n<p>For example <code>-&gt;@*</code> will autovivify in this case:</p>\n\n<pre><code>push $hash-&gt;{ key }-&gt;@*, 1;\n</code></pre>\n"}], "owner": {"reputation": 15304, "user_id": 4632019, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/8937eb40752cf51c7da61bd4a322a4ef?s=128&d=identicon&r=PG&f=1", "display_name": "Eugen Konkov", "link": "https://stackoverflow.com/users/4632019/eugen-konkov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 99, "favorite_count": 0, "accepted_answer_id": 47100777, "answer_count": 1, "score": 2, "last_activity_date": 1520612223, "creation_date": 1509726123, "last_edit_date": 1509733021, "question_id": 47100257, "link": "https://stackoverflow.com/questions/47100257/why-perl-autovivification-does-not-work-for-but-0-does", "title": "Why perl autovivification does not work for -&gt;@* but -&gt;@[0] does?", "body": "<p>I may get values by slicing:</p>\n\n<pre><code>($x, $y, $z) =  $hash-&gt;{ key }-&gt;@[0,1,2]\n</code></pre>\n\n<p>Why I can not to write?</p>\n\n<pre><code>($x, $y, $z) =  $hash-&gt;{ key }-&gt;@*\n</code></pre>\n\n<p>For second expression in cases when <code>key</code> is not defined in hash I get error:</p>\n\n<blockquote>\n  <p>Can't use an undefined value as an ARRAY reference at ...</p>\n</blockquote>\n"}, {"tags": ["database", "perl", "hash", "operator-overloading"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1509721314, "post_id": 47097695, "comment_id": 81147221, "body": "Your design doesn&#39;t account for the way regular SQL databases are organized. A single database can have many <i>tables</i>, each of which may  have multiple <i>columns</i> and multiple <i>rows</i>. You haven&#39;t provided a way to select a table, or to return multiple rows of a given column."}, {"owner": {"reputation": 7704, "user_id": 3964397, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/640272a326ae5f3cd89364b78f2108c9?s=128&d=identicon&r=PG", "display_name": "tjwrona1992", "link": "https://stackoverflow.com/users/3964397/tjwrona1992"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1509721659, "post_id": 47097695, "comment_id": 81147465, "body": "This isn&#39;t an SQL database. All of the info needed to grab a value from the database is the field name and a subscript. I left the subscript part off for this question though to simplify things. The end goal is to have syntax that looks like this <code>$val = $db{&#39;field_name&#39;}[1]</code> where <code>1</code> is the subscript of the desired record."}], "answers": [{"tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": true, "score": 5, "last_activity_date": 1509720908, "last_edit_date": 1509720908, "creation_date": 1509719794, "answer_id": 47098279, "question_id": 47097695, "link": "https://stackoverflow.com/questions/47097695/overloading-hash-access-to-read-write-to-a-database/47098279#47098279", "title": "Overloading hash access to read/write to a database", "body": "<p>You don't want to look at overloading, you want to look at tied variables. With a tied variable you can change the behaviour of a standard Perl variable so that accessing the variable can do things that the standard variables can't.</p>\n\n<p>It's a bit hard to explain in an answer, but the <a href=\"https://perldoc.perl.org/perltie.html\" rel=\"nofollow noreferrer\">perltie</a> documentation is pretty clear.</p>\n\n<p>Basically, you define your own package (which you might call Tie::Hash::Database). You then need to define a <code>TIEHASH()</code> method (which is the equivalent of a constructor) and methods (called things like <code>FETCH()</code>) for any of the operations you want to change. In pseudo-code (because I don't know how your database works) it might look a bit like this:</p>\n\n<pre><code>package Tie::Hash::Database;\n\nuse strict;\nuse warnings;\n\nuse Database;\n\nsub TIEHASH {\n  my $class = shift;\n  my ($db_name) = @_;\n\n  my $self = {\n    db =&gt; Database-&gt;new($db_name);\n  };\n\n  return bless $self, $class;\n}\n\n# Store value in the hash\nsub STORE {\n  my $self = shift;\n  my ($key, $val) = @_;\n\n  # code to store the key/value pair in the database;\n  $self-&gt;{db}-&gt;store($key, $value);\n}\n\n# Get value from hash\nsub FETCH {\n  my $self = shift;\n  my ($key) = @_;\n\n  # code to get value from the database\n  return $self-&gt;{db}-&gt;get($key);\n}\n\n# ... etc ...\n</code></pre>\n\n<p>And you'd use it like this:</p>\n\n<pre><code>use Tie::Hash::Database;\n\nmy %db_hash;\ntie %db_hash, 'Tie::Hash::Database', 'name_of_database';\n\n$db_hash{some_key} = 'some value';\n\nprint $db_hash{some_key};\n</code></pre>\n\n<p>Many years ago I wrote an <a href=\"https://perlhacks.com/articles/perl-com/changing-hash-behaviour-with-tie/\" rel=\"nofollow noreferrer\">article that explains all of this</a> in more detail. You might find it useful.</p>\n\n<p><strong>Update:</strong> It's also worth pointing out that the standard Perl distribution comes with <a href=\"https://metacpan.org/pod/AnyDBM_File\" rel=\"nofollow noreferrer\">tied hash support for various DBM files</a> (which are, effectively, binary files for the storage of persistent hashes).</p>\n"}], "owner": {"reputation": 7704, "user_id": 3964397, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/640272a326ae5f3cd89364b78f2108c9?s=128&d=identicon&r=PG", "display_name": "tjwrona1992", "link": "https://stackoverflow.com/users/3964397/tjwrona1992"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 85, "favorite_count": 0, "accepted_answer_id": 47098279, "answer_count": 1, "score": 1, "last_activity_date": 1509720908, "creation_date": 1509717939, "last_edit_date": 1509718481, "question_id": 47097695, "link": "https://stackoverflow.com/questions/47097695/overloading-hash-access-to-read-write-to-a-database", "title": "Overloading hash access to read/write to a database", "body": "<p>I am trying to implement a very simple syntax to read and write to a database using Perl.  Basically the end goal is to be able to access fields in the database as if they were a simple Perl hash.</p>\n\n<blockquote>\n  <p><em>Unfortunately the type of database I am trying to access and its API are proprietary so I can't get into to much detail on how to actually read and write the data, just assume that the database name is enough information to connect. What needs to be done in Perl to make this work is pretty generic so API information should not be relevant.</em></p>\n</blockquote>\n\n<p>To start I am creating a simple database object:</p>\n\n<pre><code>my $database = Database-&gt;new('NAME');\n</code></pre>\n\n<p>Then I want to read from the database given a field name that I want to read:</p>\n\n<pre><code># Read from the database\nmy $value = $database{'field_name'};\n\n# Write to the database\n$database{'field_name'} = $value;\n</code></pre>\n\n<hr>\n\n<p>Every time data is read from the hash I want it to call a function to query the database and get the value.</p>\n\n<p>Every time data is written to the hash I want it to call a function to write the data to the database.</p>\n\n<hr>\n\n<p>This is what I have so far:</p>\n\n<p><strong>Database.pm</strong></p>\n\n<pre><code>package Database;\n\nuse overload '%{}' =&gt; \\&amp;access_data;\n\nsub new {\n    my $class = shift;\n    my $name  = shift;\n\n    my $self = bless {\n        name =&gt; $name\n    }, $class;\n\n    return $self;\n}\n\nsub access_data {\n    my $self  = shift;\n    my $field = shift;\n    my $data  = shift;\n\n    if (defined $data) {\n        # Write data to the database using the database API\n    }\n    else {\n        # Read data from the database using the database API\n    }\n\n    # Not sure what to return to make this work\n}\n</code></pre>\n\n<p><strong>test.pl</strong></p>\n\n<pre><code>use Database;\n\nmy $database = Database-&gt;new('TESTDB');\n\n# Overloaded to read the actual value from the database\nprint $database{'field_name'};\n</code></pre>\n\n<p>I have been searching through the documentation for <a href=\"https://perldoc.perl.org/overload.html#Two-face-References\" rel=\"nofollow noreferrer\">overloading hash access</a> but I am struggling to understand exactly how it works. </p>\n\n<p>How can I get this kind of overloading to work the way that I want?</p>\n"}, {"tags": ["perl", "packages"], "comments": [{"owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "edited": false, "score": 2, "creation_date": 1509715293, "post_id": 47096734, "comment_id": 81143075, "body": "When you copied the module, did you remove the <code>My::</code> from the <code>package My::Foo</code> line?"}, {"owner": {"reputation": 2039, "user_id": 297797, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/f7fcaff250a59d98130d234846e60ae6?s=128&d=identicon&r=PG", "display_name": "Matthew Leingang", "link": "https://stackoverflow.com/users/297797/matthew-leingang"}, "reply_to_user": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "edited": false, "score": 0, "creation_date": 1509715406, "post_id": 47096734, "comment_id": 81143162, "body": "@stevieb: No, just a straight copy."}, {"owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "edited": false, "score": 2, "creation_date": 1509715474, "post_id": 47096734, "comment_id": 81143209, "body": "perl loads things based on directory location, so <code>lib&#47;Foo.pm</code> requires the package name to be <code>Foo</code>. Likewise, <code>My::Foo</code> would be <code>lib&#47;My&#47;Foo.pm</code>. <code>Foo</code> can&#39;t be found. Try removing the incorrect portion of the package name (<code>My::</code>)."}, {"owner": {"reputation": 2039, "user_id": 297797, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/f7fcaff250a59d98130d234846e60ae6?s=128&d=identicon&r=PG", "display_name": "Matthew Leingang", "link": "https://stackoverflow.com/users/297797/matthew-leingang"}, "reply_to_user": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "edited": false, "score": 0, "creation_date": 1509715775, "post_id": 47096734, "comment_id": 81143410, "body": "@stevieb Really?  Because if I try <code>PERL5LIB=.&#47;lib perl -MFoo -e &#39;print &quot;ok &quot;; My::Foo-&gt;import()&#39;</code> on the command line I get <code>ok importing</code>"}, {"owner": {"reputation": 2039, "user_id": 297797, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/f7fcaff250a59d98130d234846e60ae6?s=128&d=identicon&r=PG", "display_name": "Matthew Leingang", "link": "https://stackoverflow.com/users/297797/matthew-leingang"}, "reply_to_user": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "edited": false, "score": 0, "creation_date": 1509715815, "post_id": 47096734, "comment_id": 81143439, "body": "Maybe I didn&#39;t make my question clear.  I <i>don&#39;t</i> want <code>import</code> to be called implicitly."}, {"owner": {"reputation": 2039, "user_id": 297797, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/f7fcaff250a59d98130d234846e60ae6?s=128&d=identicon&r=PG", "display_name": "Matthew Leingang", "link": "https://stackoverflow.com/users/297797/matthew-leingang"}, "reply_to_user": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "edited": false, "score": 0, "creation_date": 1509730959, "post_id": 47096734, "comment_id": 81153226, "body": "@Sinan&#220;n&#252;r Indeed, and I don&#39;t mean to sound impetuous by wanting it.  My question was basically, &quot;It seems like I can&#39;t use <code>import</code> as a subroutine.  Is that right?&quot;  And the answer is &quot;Yes, you can&#39;t use <code>import</code> as a subroutine.&quot;"}, {"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 0, "creation_date": 1509859052, "post_id": 47096734, "comment_id": 81186716, "body": "you can use import as a subroutine if you are aware of its special nature (the caller can prevent the implicit call; see my answer), but you probably shouldn&#39;t."}, {"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "reply_to_user": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "edited": false, "score": 1, "creation_date": 1509859265, "post_id": 47096734, "comment_id": 81186757, "body": "@Sinan&#220;n&#252;r the doc uses &quot;exactly&quot; inexactly"}], "answers": [{"comments": [{"owner": {"reputation": 2039, "user_id": 297797, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/f7fcaff250a59d98130d234846e60ae6?s=128&d=identicon&r=PG", "display_name": "Matthew Leingang", "link": "https://stackoverflow.com/users/297797/matthew-leingang"}, "edited": false, "score": 0, "creation_date": 1509716122, "post_id": 47097045, "comment_id": 81143640, "body": "Thank you for confirming that.  I had found that page before, but was confused by the line &quot;There is no builtin import function.&quot;  I should have read onward to &quot;The <code>use</code> function calls the import method for the package used.&quot;"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 5, "creation_date": 1509716159, "post_id": 47097045, "comment_id": 81143662, "body": "Pedantically, <code>import</code> isn&#39;t a reserved keyword, it&#39;s just the name of a subroutine. But a subroutine that is treated specially by Perl."}], "tags": [], "owner": {"reputation": 2496, "user_id": 2469275, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/b7EZh.png?s=128&g=1", "display_name": "janh", "link": "https://stackoverflow.com/users/2469275/janh"}, "is_accepted": false, "score": 3, "last_activity_date": 1550583663, "last_edit_date": 1550583663, "creation_date": 1509716039, "answer_id": 47097045, "question_id": 47096734, "link": "https://stackoverflow.com/questions/47096734/what-is-special-about-the-perl-import-subroutine/47097045#47097045", "title": "What is special about the perl import subroutine?", "body": "<p><code>import</code> is a reserved keyword. When you <code>use</code> a module, its <code>import</code> method will be called, see <a href=\"http://perldoc.perl.org/functions/import.html\" rel=\"nofollow noreferrer\">the documentation</a>.</p>\n\n<p>I'm afraid you can't change that. Rename your method to something else that isn't a special keyword.</p>\n"}, {"comments": [{"owner": {"reputation": 2039, "user_id": 297797, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/f7fcaff250a59d98130d234846e60ae6?s=128&d=identicon&r=PG", "display_name": "Matthew Leingang", "link": "https://stackoverflow.com/users/297797/matthew-leingang"}, "edited": false, "score": 0, "creation_date": 1509716237, "post_id": 47097061, "comment_id": 81143715, "body": "Thanks also for the explanation and the reference.  My &quot;workaround&quot; is <i>not</i> changing the module location.  It was changing the method from <code>import</code> to something else like <code>do_import</code> (based on these answers, I see now this is really the only way to do it).  I only figured out that <code>import</code> was somehow special by moving the module to a nonstandard location.  That part was just poking around to see what changed."}, {"owner": {"reputation": 2496, "user_id": 2469275, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/b7EZh.png?s=128&g=1", "display_name": "janh", "link": "https://stackoverflow.com/users/2469275/janh"}, "edited": false, "score": 0, "creation_date": 1509716951, "post_id": 47097061, "comment_id": 81144234, "body": "For completeness&#39; sake, you could also <code>require</code> the module instead of <code>use</code>ing it, in which case the <code>import</code> method will not be executed if I recall correctly. But simply using another name for your method is definitely the best way to go."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 2496, "user_id": 2469275, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/b7EZh.png?s=128&g=1", "display_name": "janh", "link": "https://stackoverflow.com/users/2469275/janh"}, "edited": false, "score": 1, "creation_date": 1509717212, "post_id": 47097061, "comment_id": 81144393, "body": "@janh: That sounds dangerous. You&#39;re relying on people using your module in the way you ask them too :-)"}, {"owner": {"reputation": 2496, "user_id": 2469275, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/b7EZh.png?s=128&g=1", "display_name": "janh", "link": "https://stackoverflow.com/users/2469275/janh"}, "edited": false, "score": 1, "creation_date": 1509717438, "post_id": 47097061, "comment_id": 81144542, "body": "Absolutely, and I&#39;d strongly advise against it, but it IS an option, albeit a dangerous one. I&#39;m pretty sure I&#39;d have forgotten that and would change it back to <code>use</code> after a few weeks to let the fun begin anew."}, {"owner": {"reputation": 2039, "user_id": 297797, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/f7fcaff250a59d98130d234846e60ae6?s=128&d=identicon&r=PG", "display_name": "Matthew Leingang", "link": "https://stackoverflow.com/users/297797/matthew-leingang"}, "edited": false, "score": 0, "creation_date": 1509735191, "post_id": 47097061, "comment_id": 81155467, "body": "Thank you again.  Since <code>perldoc -f import</code> is three sentences long, I went ahead and embedded it."}], "tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": true, "score": 7, "last_activity_date": 1509746120, "last_edit_date": 1509746120, "creation_date": 1509716095, "answer_id": 47097061, "question_id": 47096734, "link": "https://stackoverflow.com/questions/47096734/what-is-special-about-the-perl-import-subroutine/47097061#47097061", "title": "What is special about the perl import subroutine?", "body": "<p><code>import()</code> is special method name in Perl. Whenever you <code>use</code> a module, Perl will look for a subroutine called <code>import()</code> inside that module and, if it finds it, it will be run.</p>\n\n<p>This is most often used for <a href=\"https://metacpan.org/pod/Exporter\" rel=\"nofollow noreferrer\">Exporter</a> cleverness. It means that having a method called <code>import()</code> in your module that you don't want to be called as the module is loaded is a <strong>very bad idea</strong>. It will leave you fighting against Perl at every turn.</p>\n\n<p>See <a href=\"http://perldoc.perl.org/functions/import.html\" rel=\"nofollow noreferrer\">perldoc -f import</a> for pointers to more information:</p>\n\n<blockquote>\n  <p><strong>import LIST</strong></p>\n  \n  <p>There is no builtin <code>import</code> function. It is just an ordinary method (subroutine) <em>defined (or inherited) by modules that wish to export names</em> to another module. <em>The <code>use</code> function calls the <code>import</code> method for the package used</em>. See also <a href=\"http://perldoc.perl.org/functions/import.html#use-Module-VERSION-LIST\" rel=\"nofollow noreferrer\">use</a>, <a href=\"http://perldoc.perl.org/perlmod.html\" rel=\"nofollow noreferrer\">perlmod</a>, and <a href=\"http://perldoc.perl.org/Exporter.html\" rel=\"nofollow noreferrer\">Exporter</a>.</p>\n</blockquote>\n\n<p>The \"workaround\" you have found is also not a very good idea. You are effectively loading a module called My:Foo from a file called Foo.pm and Perl will get very confused if the filename and package name don't match.</p>\n"}, {"comments": [{"owner": {"reputation": 2039, "user_id": 297797, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/f7fcaff250a59d98130d234846e60ae6?s=128&d=identicon&r=PG", "display_name": "Matthew Leingang", "link": "https://stackoverflow.com/users/297797/matthew-leingang"}, "edited": false, "score": 0, "creation_date": 1509730823, "post_id": 47099339, "comment_id": 81153157, "body": "You&#39;re right; I didn&#39;t know that use = require + import.  Thanks for spelling that out so clearly.  I will definitely use a different method."}], "tags": [], "owner": {"reputation": 42833, "user_id": 18914, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7a20a39ae2ef47ae042a3eddd5b5bd19?s=128&d=identicon&r=PG", "display_name": "Dave Sherohman", "link": "https://stackoverflow.com/users/18914/dave-sherohman"}, "is_accepted": false, "score": 6, "last_activity_date": 1509723033, "creation_date": 1509723033, "answer_id": 47099339, "question_id": 47096734, "link": "https://stackoverflow.com/questions/47096734/what-is-special-about-the-perl-import-subroutine/47099339#47099339", "title": "What is special about the perl import subroutine?", "body": "<p>Seems to me that you're looking at the wrong end of this camel.  Your problem isn't caused by <code>import</code> being \"special\", but rather by not knowing what exactly <code>use</code> actually does.  Per <a href=\"http://perldoc.perl.org/functions/use.html\" rel=\"noreferrer\">perldoc use</a>, <code>use Module</code> is \"exactly equivalent\" to</p>\n\n<pre><code>BEGIN { require Module; Module-&gt;import( LIST ); }\n</code></pre>\n\n<p>When you use <code>use</code>, <em>you are telling Perl to call the Module's <code>import</code> method.</em>  Simple as that.</p>\n\n<p>Of course, Perl being Perl, there probably is some way for your <code>import</code> method to figure out whether it's being called as part of a <code>use</code> and immediately return if that's the case, but that would just add needless complexity.  Renaming the method to something more descriptive (e.g., <code>import_file</code>, <code>import_record</code>, etc., depending on what it is that you're actually importing) would be a much better solution.</p>\n"}, {"tags": [], "owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "is_accepted": false, "score": 3, "last_activity_date": 1510018235, "last_edit_date": 1510018235, "creation_date": 1509858910, "answer_id": 47118407, "question_id": 47096734, "link": "https://stackoverflow.com/questions/47096734/what-is-special-about-the-perl-import-subroutine/47118407#47118407", "title": "What is special about the perl import subroutine?", "body": "<p><code>import</code> is special in two ways:</p>\n\n<p>Unless <code>use</code> is explicitly given an empty import list (e.g. <code>use Foo ();</code>), <code>import</code> will be called at compile time as a class method and passed any import list arguments <code>use</code> was given.</p>\n\n<p>If <code>import</code> is called as a instance or class method (whether implicitly by <code>use</code> or explicitly) and no such method exists, an empty list will be returned instead of a <code>Can't locate object method</code> error being thrown or AUTOLOAD being called.</p>\n\n<p>If it were implemented today, it would probably be called <code>IMPORT</code> instead.</p>\n\n<p>All of the above also applies to <code>unimport</code> (but with <code>no</code> instead of <code>use</code>).</p>\n\n<p>Update: some have linked to the docs where it says what <code>use</code> is \"exactly equivalent\" to and then lies.</p>\n\n<p>It is exactly equivalent to <code>BEGIN { require Module; Module::-&gt;VERSION(...); Module::-&gt;import(...) }</code> except the VERSION call is omitted if no version is specified and the import call is omitted if an explict empty list is given (as the docs later clarify). </p>\n\n<p>(Also note the subtle distinction between Module->import (which calls a Module() function if it exists and then calls the import method on whatever that returns) and Module::->import or 'Module'->import which is a straightforward class method call on the Module class.)</p>\n"}], "owner": {"reputation": 2039, "user_id": 297797, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/f7fcaff250a59d98130d234846e60ae6?s=128&d=identicon&r=PG", "display_name": "Matthew Leingang", "link": "https://stackoverflow.com/users/297797/matthew-leingang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 329, "favorite_count": 0, "accepted_answer_id": 47097061, "answer_count": 4, "score": 2, "last_activity_date": 1550583663, "creation_date": 1509715197, "last_edit_date": 1509716036, "question_id": 47096734, "link": "https://stackoverflow.com/questions/47096734/what-is-special-about-the-perl-import-subroutine", "title": "What is special about the perl import subroutine?", "body": "<p>It took me two hours to track down this error.  I can work around it, but I don't understand it.</p>\n\n<p>If I have a perl module <code>./lib/My/Foo.pm</code> that looks like this:</p>\n\n<pre><code>package My::Foo;\n\nsub import {print \"importing\\n\"}\n\n1;\n</code></pre>\n\n<p>Then using it calls the <code>import</code> subroutine implicitly:</p>\n\n<pre><code>$ PERL5LIB=./lib perl -MMy::Foo -e 'print \"ok\\n\"'\nimporting\nok\n</code></pre>\n\n<p>But if I copy the same module and use it without the colons, the <code>import</code> subroutine is <strong>not</strong> called.</p>\n\n<pre><code>$ cp lib/My/Foo.pm lib/Foo.pm\n$ PERL5LIB=./lib perl -MFoo -e 'print \"ok\\n\"'\nok\n</code></pre>\n\n<p>If I change <code>import</code> to something else like <code>do_import</code>, the subroutine isn't called.  So I can avoid this behavior.  But in my real use case, I have an <code>Import</code> class and with an abstract method <code>import</code>, then implement that method in subclasses.  So I <em>don't</em> want this <code>import</code> method called automatically when <code>use</code>ing the parent class.</p>\n\n<p>I looked in <code>perlootut</code> and <code>perlobj</code> and didn't see any mention of this.</p>\n"}, {"tags": ["javascript", "perl", "openwrt", "www-mechanize"], "answers": [{"comments": [{"owner": {"reputation": 2496, "user_id": 2469275, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/b7EZh.png?s=128&g=1", "display_name": "janh", "link": "https://stackoverflow.com/users/2469275/janh"}, "reply_to_user": {"reputation": 77, "user_id": 7530957, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/2ba7bac385787e44d3348a5d8eda50c0?s=128&d=identicon&r=PG&f=1", "display_name": "Squalo", "link": "https://stackoverflow.com/users/7530957/squalo"}, "edited": false, "score": 0, "creation_date": 1509714670, "post_id": 47096357, "comment_id": 81142638, "body": "Oh, right, sorry, forgot about the OpenWRT. Mechanize should still work without it. If you run into JS, you can just fake it and make Mechanize send the correct request by itself, without interpreting JS (look at what your browser sends and replay that, basically)."}, {"owner": {"reputation": 77, "user_id": 7530957, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/2ba7bac385787e44d3348a5d8eda50c0?s=128&d=identicon&r=PG&f=1", "display_name": "Squalo", "link": "https://stackoverflow.com/users/7530957/squalo"}, "edited": false, "score": 0, "creation_date": 1509714732, "post_id": 47096357, "comment_id": 81142678, "body": "i can&#39;t use selenium on openwrt/LEDE because they haven&#39;t real browser! Mechanzine shouldn&#39;t interpret javascript but just submit a form (do you read a code that i posted?) Instead WWW::Scripter::Plugin::JavaScript can interpret javascript. What do you suggest me to do? You must to think that i need to use on openwrt/LEDE and not on other OS"}, {"owner": {"reputation": 77, "user_id": 7530957, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/2ba7bac385787e44d3348a5d8eda50c0?s=128&d=identicon&r=PG&f=1", "display_name": "Squalo", "link": "https://stackoverflow.com/users/7530957/squalo"}, "edited": false, "score": 0, "creation_date": 1509714831, "post_id": 47096357, "comment_id": 81142755, "body": "I read Http header but i don&#39;t know how to reply it! i think there is md5 encryption and i don&#39;t know how to do...if you can we can use teamviewer! On line 92 i have <code>return $HTTP::URI_CLASS-&gt;new_abs($base, $req-&gt;uri);</code>"}, {"owner": {"reputation": 2496, "user_id": 2469275, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/b7EZh.png?s=128&g=1", "display_name": "janh", "link": "https://stackoverflow.com/users/2469275/janh"}, "reply_to_user": {"reputation": 77, "user_id": 7530957, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/2ba7bac385787e44d3348a5d8eda50c0?s=128&d=identicon&r=PG&f=1", "display_name": "Squalo", "link": "https://stackoverflow.com/users/7530957/squalo"}, "edited": false, "score": 0, "creation_date": 1509715432, "post_id": 47096357, "comment_id": 81143183, "body": "Sorry, I can&#39;t help you via Teamviewer. If it manipulates the password before transmitting it, you&#39;ll have to find out how it does so and do the same in perl. If you&#39;re working on AVM&#39;s fritz box login by any chance (they only use a password for their routers and do, or did, some md5-things in JS), use your favorite search engine, that problem has been solved before."}, {"owner": {"reputation": 77, "user_id": 7530957, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/2ba7bac385787e44d3348a5d8eda50c0?s=128&d=identicon&r=PG&f=1", "display_name": "Squalo", "link": "https://stackoverflow.com/users/7530957/squalo"}, "edited": false, "score": 0, "creation_date": 1509716155, "post_id": 47096357, "comment_id": 81143656, "body": "I don&#39;t understand what do you mean! WWW:Scripter isn&#39;t a good way?"}, {"owner": {"reputation": 2496, "user_id": 2469275, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/b7EZh.png?s=128&g=1", "display_name": "janh", "link": "https://stackoverflow.com/users/2469275/janh"}, "reply_to_user": {"reputation": 77, "user_id": 7530957, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/2ba7bac385787e44d3348a5d8eda50c0?s=128&d=identicon&r=PG&f=1", "display_name": "Squalo", "link": "https://stackoverflow.com/users/7530957/squalo"}, "edited": false, "score": 0, "creation_date": 1509716305, "post_id": 47096357, "comment_id": 81143760, "body": "If it works, it&#39;s as good a way as any other, but I doubt that it will."}, {"owner": {"reputation": 77, "user_id": 7530957, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/2ba7bac385787e44d3348a5d8eda50c0?s=128&d=identicon&r=PG&f=1", "display_name": "Squalo", "link": "https://stackoverflow.com/users/7530957/squalo"}, "edited": false, "score": 0, "creation_date": 1509716876, "post_id": 47096357, "comment_id": 81144183, "body": "This is the first time I use perl so I asked for information! If you read the first example in that page! I think it can work...I&#39;m wrong?<a href=\"http://search.cpan.org/~sprout/WWW-Scripter-Plugin-JavaScript-0.009/lib/WWW/Scripter/Plugin/JavaScript.pm\" rel=\"nofollow noreferrer\">search.cpan.org/~sprout/WWW-Scripter-Plugin-JavaScript&zwnj;&#8203;-0.009/&hellip;</a>"}, {"owner": {"reputation": 2496, "user_id": 2469275, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/b7EZh.png?s=128&g=1", "display_name": "janh", "link": "https://stackoverflow.com/users/2469275/janh"}, "reply_to_user": {"reputation": 77, "user_id": 7530957, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/2ba7bac385787e44d3348a5d8eda50c0?s=128&d=identicon&r=PG&f=1", "display_name": "Squalo", "link": "https://stackoverflow.com/users/7530957/squalo"}, "edited": false, "score": 0, "creation_date": 1509717145, "post_id": 47096357, "comment_id": 81144361, "body": "It can interpret basic JavaScript, but it cannot (yet?) simulate a complete browser with a DOM and whatever else a browser brings to the table. It can&#39;t, for example, work with sites that require jQuery, see also <a href=\"https://www.perlmonks.org/?node_id=957977\" rel=\"nofollow noreferrer\">this discussion at perlmonks.org</a>."}, {"owner": {"reputation": 77, "user_id": 7530957, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/2ba7bac385787e44d3348a5d8eda50c0?s=128&d=identicon&r=PG&f=1", "display_name": "Squalo", "link": "https://stackoverflow.com/users/7530957/squalo"}, "edited": false, "score": 0, "creation_date": 1509717377, "post_id": 47096357, "comment_id": 81144497, "body": "But i need only to do the 2 operation that i posted before! I can&#39;t?"}, {"owner": {"reputation": 2496, "user_id": 2469275, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/b7EZh.png?s=128&g=1", "display_name": "janh", "link": "https://stackoverflow.com/users/2469275/janh"}, "reply_to_user": {"reputation": 77, "user_id": 7530957, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/2ba7bac385787e44d3348a5d8eda50c0?s=128&d=identicon&r=PG&f=1", "display_name": "Squalo", "link": "https://stackoverflow.com/users/7530957/squalo"}, "edited": false, "score": 0, "creation_date": 1509717484, "post_id": 47096357, "comment_id": 81144583, "body": "Try it, that&#39;s the only way to find out if you can! I can&#39;t tell you what else is happening on that page."}, {"owner": {"reputation": 77, "user_id": 7530957, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/2ba7bac385787e44d3348a5d8eda50c0?s=128&d=identicon&r=PG&f=1", "display_name": "Squalo", "link": "https://stackoverflow.com/users/7530957/squalo"}, "edited": false, "score": 0, "creation_date": 1509718089, "post_id": 47096357, "comment_id": 81145003, "body": "After i will try but the problem remain...when i exectue it on windows it return Can&#39;t locate WWW/Scripter.pm in @INC (you may need to install the WWW::Scripter module) (@INC contains: D:/Program Files/Perl/site/lib D:/Program Files/Perl/lib) at a2.pl line 1. BEGIN failed--compilation aborted at a2.pl line 1."}, {"owner": {"reputation": 2496, "user_id": 2469275, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/b7EZh.png?s=128&g=1", "display_name": "janh", "link": "https://stackoverflow.com/users/2469275/janh"}, "reply_to_user": {"reputation": 77, "user_id": 7530957, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/2ba7bac385787e44d3348a5d8eda50c0?s=128&d=identicon&r=PG&f=1", "display_name": "Squalo", "link": "https://stackoverflow.com/users/7530957/squalo"}, "edited": false, "score": 0, "creation_date": 1509719416, "post_id": 47096357, "comment_id": 81145966, "body": "mingw is needed to install it, it&#39;s not a perl module. There are plenty of guides how to install modules on windows without ppm. Try those."}], "tags": [], "owner": {"reputation": 2496, "user_id": 2469275, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/b7EZh.png?s=128&g=1", "display_name": "janh", "link": "https://stackoverflow.com/users/2469275/janh"}, "is_accepted": false, "score": 0, "last_activity_date": 1509713805, "creation_date": 1509713805, "answer_id": 47096357, "question_id": 47095810, "link": "https://stackoverflow.com/questions/47095810/how-submit-that-form-through-perl-for-openwrt-lede/47096357#47096357", "title": "How submit that form through perl for Openwrt/LEDE", "body": "<p>I'd work with WWW::Mechanize, interpreting JS that relies on the DOM without a real browser engine is close to impossible.</p>\n\n<p><code>$mech-&gt;content()</code> will get you the raw HTML from WWW::Mechanize's last fetched page.</p>\n\n<p>If you do have JavaScript-heavy pages that you need to automate and you want to use perl, look into using Selenium's WebDriver to control a \"real\" browser (even if it's headless like phantomjs).</p>\n\n<p>As for the Error you are getting: make sure that your steps work correctly, and look at what's happening in <code>D:/Program Files/Perl/lib/HTTP/Response.pm</code> line 92, and what it does expect.</p>\n"}], "owner": {"reputation": 77, "user_id": 7530957, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/2ba7bac385787e44d3348a5d8eda50c0?s=128&d=identicon&r=PG&f=1", "display_name": "Squalo", "link": "https://stackoverflow.com/users/7530957/squalo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 339, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1509714875, "creation_date": 1509711997, "last_edit_date": 1509714875, "question_id": 47095810, "link": "https://stackoverflow.com/questions/47095810/how-submit-that-form-through-perl-for-openwrt-lede", "title": "How submit that form through perl for Openwrt/LEDE", "body": "<p>I have that form</p>\n\n<pre><code>&lt;form method=\"post\" action=\"index.lp\" name=\"authform\" id=\"authform\"&gt;\n&lt;input type=\"password\" name=\"password\" id=\"password\" onkeypress=\"return enter_submit(event);\" /&gt;\n&lt;input name=\"enter\" class=\"btn btn-primary\" type=\"button\" value=\"log in\" onclick='auth()' /&gt;\n</code></pre>\n\n<p>I can submit it thanks javascript in that way</p>\n\n<pre><code>javascript:document.getElementById(\"password\").value = \"password\";auth();\n</code></pre>\n\n<p>Now i need to write perl script to do it automatically and when it log in execute an other javascript function in page.\nI'm testing it on computer and have some problem:</p>\n\n<p>1) Perl need a c compiler...after i can install it on openwrt?</p>\n\n<p>2) I can try 2 different ways:</p>\n\n<p><strong>The first</strong> and more rapid is to use WWW::Scripter::Plugin::JavaScript but i cannot install the module because i cannot install mingw (i did, in ppm-shell, install mingw and it return \"ppm install failed: Can't find any package that provides mingw\"). Furthermore i don't see WWW::Scripter in <a href=\"https://lede-project.org/packages/index/languages---perl\" rel=\"nofollow noreferrer\">Perl package</a>.\nI wrote that script (can it work?):</p>\n\n<pre><code>  use WWW::Scripter;\n  $w = new WWW::Scripter;\n\n  $w-&gt;use_plugin('JavaScript');\n  $w-&gt;get('http://url');\n  $w-&gt;get('javascript:document.getElementById(\"password\").value = \"password\";auth();');\n  sleep (1);\n  $w-&gt;get('http://url');\n  $w-&gt;get('javascript: function();');\n</code></pre>\n\n<p><strong>The second</strong> is to use WWW:Mechanize. How i can see output page? And how i can send command to the second page? Now with that script i get this error: \"Missing base argument at D:/Program Files/Perl/lib/HTTP/Response.pm line 92.\".\n(can it work?)</p>\n\n<pre><code>use WWW::Mechanize;\nmy $mech = WWW::Mechanize-&gt;new();\n\n$mech-&gt;get( $url );\n\n$mech-&gt;follow_link( url =&gt; 'http://url' );\n\n$mech-&gt;submit_form(\n    form_name =&gt; 'authform',\n    fields    =&gt; { password  =&gt; 'password', },\n    button    =&gt; 'log in'\n);\n</code></pre>\n"}, {"tags": ["multithreading", "perl", "ssh", "libssh2", "ietf-netconf"], "comments": [{"owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 0, "creation_date": 1509703770, "post_id": 47092975, "comment_id": 81135687, "body": "Didn&#39;t <a href=\"https://stackoverflow.com/a/47074653/5830574\">Sobrique&#39;s answer</a> to your other question help? He wrote about <code>require</code> and <code>import</code> there. No offence, I&#39;m just asking."}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 1, "creation_date": 1509703881, "post_id": 47092975, "comment_id": 81135769, "body": "If the library isn&#39;t thread safe, loading it in the thread with <code>require</code> might help, but some libraries (e.g. <a href=\"http://p3rl.org/Tk\" rel=\"nofollow noreferrer\">Tk</a>) can&#39;t run in a thread at all."}, {"owner": {"reputation": 366, "user_id": 4488775, "user_type": "registered", "accept_rate": 64, "profile_image": "https://lh6.googleusercontent.com/-c7dUxZESZzs/AAAAAAAAAAI/AAAAAAAAAGI/OxEft3Nihy4/photo.jpg?sz=128", "display_name": "Bala Krishnan", "link": "https://stackoverflow.com/users/4488775/bala-krishnan"}, "edited": false, "score": 0, "creation_date": 1509703922, "post_id": 47092975, "comment_id": 81135796, "body": "It did not solve my problem. I wasn&#39;t able to successfully isolate this library with the way he mentioned. I tried and I did asked him in comment, but there was no response. Do you know how to isolate this library specific to threads?"}, {"owner": {"reputation": 366, "user_id": 4488775, "user_type": "registered", "accept_rate": 64, "profile_image": "https://lh6.googleusercontent.com/-c7dUxZESZzs/AAAAAAAAAAI/AAAAAAAAAGI/OxEft3Nihy4/photo.jpg?sz=128", "display_name": "Bala Krishnan", "link": "https://stackoverflow.com/users/4488775/bala-krishnan"}, "reply_to_user": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1509704060, "post_id": 47092975, "comment_id": 81135906, "body": "@choroba sorry what do you mean by loading it in the thread? To load the library in the subroutine that the thread calls? with <code>require packagename</code>? What would be its scope? will it be specific to that subroutine or to the entire thread? Meaning - all the subroutines that are called in the thread will have access to this library?"}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1509704112, "post_id": 47092975, "comment_id": 81135947, "body": "@BalaKrishnan: Exactly. You might need to call <code>import</code> as well."}, {"owner": {"reputation": 366, "user_id": 4488775, "user_type": "registered", "accept_rate": 64, "profile_image": "https://lh6.googleusercontent.com/-c7dUxZESZzs/AAAAAAAAAAI/AAAAAAAAAGI/OxEft3Nihy4/photo.jpg?sz=128", "display_name": "Bala Krishnan", "link": "https://stackoverflow.com/users/4488775/bala-krishnan"}, "reply_to_user": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1509704593, "post_id": 47092975, "comment_id": 81136261, "body": "@choroba Same problem persists when I use require and import in the thread. I am having 4 threads. First two threads calls a sub - A, and the second two calls a sub - B. I have loaded this lib in both the subroutines. No help. Same error."}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 4, "creation_date": 1509713681, "post_id": 47092975, "comment_id": 81142000, "body": "Try switching to forking instead of threads."}, {"owner": {"reputation": 366, "user_id": 4488775, "user_type": "registered", "accept_rate": 64, "profile_image": "https://lh6.googleusercontent.com/-c7dUxZESZzs/AAAAAAAAAAI/AAAAAAAAAGI/OxEft3Nihy4/photo.jpg?sz=128", "display_name": "Bala Krishnan", "link": "https://stackoverflow.com/users/4488775/bala-krishnan"}, "edited": false, "score": 0, "creation_date": 1509874853, "post_id": 47092975, "comment_id": 81189951, "body": "Finally, I used semaphores and synchronized the particular block which was causing the issue. Its kind of a workaround and does affect thread functionality a bit, but I do not want to move from threads. So. Maybe this issue will be fixed soon."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1509979461, "post_id": 47092975, "comment_id": 81228407, "body": "I can give a more complete answer with some sample code. But my suggestion remains - stop using <code>use</code> and instead <code>require</code> and <code>import</code> within the thread. This will <i>generally</i> be safe."}], "answers": [{"comments": [{"owner": {"reputation": 366, "user_id": 4488775, "user_type": "registered", "accept_rate": 64, "profile_image": "https://lh6.googleusercontent.com/-c7dUxZESZzs/AAAAAAAAAAI/AAAAAAAAAGI/OxEft3Nihy4/photo.jpg?sz=128", "display_name": "Bala Krishnan", "link": "https://stackoverflow.com/users/4488775/bala-krishnan"}, "edited": false, "score": 0, "creation_date": 1509874746, "post_id": 47119568, "comment_id": 81189926, "body": "sure. I&#39;m glad to fix it myself. How could we get in touch? This is my email - balakrishnaneaswaran@gmail.com"}, {"owner": {"reputation": 9262, "user_id": 124951, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/c46d5911a8fb4ffd5fb8523d56a60de0?s=128&d=identicon&r=PG", "display_name": "salva", "link": "https://stackoverflow.com/users/124951/salva"}, "reply_to_user": {"reputation": 366, "user_id": 4488775, "user_type": "registered", "accept_rate": 64, "profile_image": "https://lh6.googleusercontent.com/-c7dUxZESZzs/AAAAAAAAAAI/AAAAAAAAAGI/OxEft3Nihy4/photo.jpg?sz=128", "display_name": "Bala Krishnan", "link": "https://stackoverflow.com/users/4488775/bala-krishnan"}, "edited": false, "score": 1, "creation_date": 1509957918, "post_id": 47119568, "comment_id": 81215297, "body": "@BalaKrishnan: I have created a new ticked on GitHub in order to keep the discussion in the open: <a href=\"https://github.com/rkitover/net-ssh2/issues/40\" rel=\"nofollow noreferrer\">Object lifetime in multi-threading applications</a>."}], "tags": [], "owner": {"reputation": 9262, "user_id": 124951, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/c46d5911a8fb4ffd5fb8523d56a60de0?s=128&d=identicon&r=PG", "display_name": "salva", "link": "https://stackoverflow.com/users/124951/salva"}, "is_accepted": true, "score": 3, "last_activity_date": 1509871451, "last_edit_date": 1509871451, "creation_date": 1509870051, "answer_id": 47119568, "question_id": 47092975, "link": "https://stackoverflow.com/questions/47092975/perl-how-to-make-a-library-specific-to-individual-threads/47119568#47119568", "title": "Perl - How to make a library specific to individual threads", "body": "<p>I am the current maintainer for <code>Net::SSH2</code>.</p>\n\n<p>I have never went after thread safeness for that module but a shallow inspection of its code, shows that probably, that double free error is caused by the Perl side of the <code>Net::SSH2</code> objects being cloned on thread creation while the C side is not. That results in <code>libssh2</code> objects being destroyed and released twice which results in the program crashing.</p>\n\n<p>So, if you want to use <code>Net::SSH2</code> in a multithread application you should ensure that threads are never created from threads where objects of this module exist.</p>\n\n<p>Even then there may be other bugs lurking on the module.</p>\n\n<p>Obviously the right thing to do would be to fix the module. If you want to do it yourself, I would try to help you. Just get in touch with me so that we could discuss the details first... Otherwise, now that you have brought that issue to my attention, well, probably at some point I will fix it myself... but this is not going to happen overnight.</p>\n"}, {"tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": false, "score": 3, "last_activity_date": 1509980355, "creation_date": 1509980355, "answer_id": 47139784, "question_id": 47092975, "link": "https://stackoverflow.com/questions/47092975/perl-how-to-make-a-library-specific-to-individual-threads/47139784#47139784", "title": "Perl - How to make a library specific to individual threads", "body": "<p>The general workaround to 'thread safety' problems is 'require' and 'import'. These must be called <em>after</em> any sort of thread instantiation takes place, and no threads may be created after (from wherever loaded the modules - it's ok within 'main').</p>\n\n<p>So - because you haven't given us any code, I've used samples out of the module. You'll need to amend accordingly. </p>\n\n<pre><code>#!/usr/bin/env perl\n\nuse strict;\nuse warnings;\nuse threads;\nuse Thread::Queue;\n\nmy $num_workers = 10;\n\nmy %generalargs = (\n   'access'              =&gt; 'ssh',\n   'server'              =&gt; 'netconf',\n   'command'             =&gt; 'junoscript netconf',\n   'debug_level'         =&gt; 1,\n   'client_capabilities' =&gt; [\n      'urn:ietf:params:xml:ns:netconf:base:1.0',\n      'urn:ietf:params:xml:ns:netconf:capability:candidate:1.0',\n      'urn:ietf:params:xml:ns:netconf:capability:confirmed-commit:1.0',\n      'urn:ietf:params:xml:ns:netconf:capability:validate:1.0',\n      'urn:ietf:params:xml:ns:netconf:capability:url:1.0?protocol=http,ftp,file',\n      'http://xml.juniper.net/netconf/junos/1.0',\n   ]\n);\n\nmy @host_list = (\n   {  'hostname' =&gt; 'routername',\n      'login'    =&gt; 'loginname',\n      'password' =&gt; 'secret',\n   },\n   {  'hostname' =&gt; 'routername2',\n      'login'    =&gt; 'differentname',\n      'password' =&gt; 'anotherpassword',\n   },\n);\n\nmy $work_q = Thread::Queue-&gt;new;\n\n\nsub some_helper_sub_that_isnt_a_thread {\n   my ( $input, $process ) = @_;\n   return \"$input\";\n}\n\nsub do_netconf_stuff {\n   require 'Net::NetConf::Manager';\n   Net::NetConf::Manager-&gt;import;\n\n   while ( my $item = work_q-&gt;dequeue ) {\n      my $device = Net::NetConf::Manager-&gt;new( %{$item} );\n      print 'Could not create Netconf device' unless $device;\n      some_helper_sub($device);\n   }\n}\n\nthreads-&gt;create( \\&amp;do_netconf_stuff ) for 1 .. $num_workers;\n\nforeach my $host (@host_list) {\n   $work_q-&gt;enqueue( { %$host, %generalargs } );\n}\n$work_q-&gt;end;\n\n$_-&gt;join for threads-&gt;list;\n</code></pre>\n\n<p>What happens here is that each thread independently - and at runtime - imports the <code>Net::NetConf::Manager</code> and that means they're each separately instantiated. You can then call other subs from within the thread, and they'll work fine - you've loaded into the global namespace <em>for that thread</em>. </p>\n\n<p>The thing you must not do is then start additional threads that will 'inherit' that imported environment. </p>\n\n<p>Note - this isn't 100% sure to work - there's other reasons that threads might clash (like trying to listen on the same port number, lock the same files etc.). But you will avoid problems within modules due to sharing of file handles etc. </p>\n"}], "owner": {"reputation": 366, "user_id": 4488775, "user_type": "registered", "accept_rate": 64, "profile_image": "https://lh6.googleusercontent.com/-c7dUxZESZzs/AAAAAAAAAAI/AAAAAAAAAGI/OxEft3Nihy4/photo.jpg?sz=128", "display_name": "Bala Krishnan", "link": "https://stackoverflow.com/users/4488775/bala-krishnan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 206, "favorite_count": 1, "accepted_answer_id": 47119568, "answer_count": 2, "score": 2, "last_activity_date": 1509980355, "creation_date": 1509703294, "last_edit_date": 1509704769, "question_id": 47092975, "link": "https://stackoverflow.com/questions/47092975/perl-how-to-make-a-library-specific-to-individual-threads", "title": "Perl - How to make a library specific to individual threads", "body": "<p>I am writing a multi threaded script in perl. In which I am using a library <code>Net::Netconf::Manager</code> which inturn uses <code>Net::SSH2</code>. This Net::SSH2(libssh2) doesn't seem to be thread safe when 'shared handles' simulataneously.</p>\n\n<p>I quote as in <a href=\"https://www.libssh2.org/\" rel=\"nofollow noreferrer\">libssh2 website</a></p>\n\n<p><strong>Thread-safe: just don't share handles simultaneously</strong> </p>\n\n<ol>\n<li>I am not sure what this \"sharing handles\" mean. Also I would like to know how to 'not share handles'.</li>\n</ol>\n\n<p>When I run my script, occasionally i see error trace with backtrace and memory map denoting <code>*** glibc detected *** perl: double free or corruption (out): 0x00007f0320012d70 ***</code> error. This error is because of the thread safeness of the Net::SSh2 library.</p>\n\n<ol start=\"2\">\n<li>How to make this Net::Netconf::Manager available to every thread instead of having it declared globally with '<code>use</code>' . I want all the threads to have their own access to this library independent of other threads. </li>\n</ol>\n\n<p>Please let me know your views.</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 1, "creation_date": 1509711083, "post_id": 47092772, "comment_id": 81140234, "body": "I have fixed the indentation in your code example. You&#39;re welcome, but please consider doing it yourself in the future. Proper indentation is an essential tool for understanding code. If you&#39;re asking a large number of strangers to read and understand your code, then it is a bit rude not to put effort in to make that as easy as possible."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 1, "creation_date": 1509711154, "post_id": 47092772, "comment_id": 81140276, "body": "<i>Surviving off google searches and guesses</i> You would be far better advised to get <a href=\"http://shop.oreilly.com/product/0636920049517.do\" rel=\"nofollow noreferrer\">a good book</a>."}, {"owner": {"reputation": 25, "user_id": 6924261, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46bf7c0dd88cc886eb18295d918b9dde?s=128&d=identicon&r=PG&f=1", "display_name": "Ryannnnnmmm", "link": "https://stackoverflow.com/users/6924261/ryannnnnmmm"}, "reply_to_user": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1509830022, "post_id": 47092772, "comment_id": 81181221, "body": "@DaveCross or use the greatest access to information, the internet."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1509833060, "post_id": 47092772, "comment_id": 81182026, "body": "Well, you&#39;ve already demonstrated that&#39;s not working particularly well for you :-)"}, {"owner": {"reputation": 25, "user_id": 6924261, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46bf7c0dd88cc886eb18295d918b9dde?s=128&d=identicon&r=PG&f=1", "display_name": "Ryannnnnmmm", "link": "https://stackoverflow.com/users/6924261/ryannnnnmmm"}, "reply_to_user": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1509943873, "post_id": 47092772, "comment_id": 81209699, "body": "@DaveCross considering my question was solved within 12hrs, think its working pretty well."}], "answers": [{"comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1509736048, "post_id": 47093210, "comment_id": 81155954, "body": "Setting <code>$| = 1</code> will have no effect on <code>$fh</code>. It operates on the currently-selected output file handle, which is initially <code>STDOUT</code>, so you would have to write <code>{ my $old = select $fh; $| = 1; select $old; }</code>. A much better way is to use the <code>autoflush</code> method, as in <code>$fh-&gt;autoflush</code>, which is much more expressive and doesn&#39;t require the use of <code>select</code>. Even better, if perl finds an undefined method call on a file handle then it loads <code>IO::File</code> and tries again, so there is no need even to add <code>use IO::File</code> to your code."}], "tags": [], "owner": {"reputation": 2496, "user_id": 2469275, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/b7EZh.png?s=128&g=1", "display_name": "janh", "link": "https://stackoverflow.com/users/2469275/janh"}, "is_accepted": true, "score": 1, "last_activity_date": 1509704001, "creation_date": 1509704001, "answer_id": 47093210, "question_id": 47092772, "link": "https://stackoverflow.com/questions/47092772/check-internet-connectivity-output-into-txt-file-perl/47093210#47093210", "title": "Check Internet Connectivity &amp; Output into txt file [PERL]", "body": "<p>You are opening the file once, but close the filehandle in the while loop, so it won't be updated.\nMove <code>close($fh);</code> behind the closing curly bracket of the while loop.</p>\n\n<p>Also, I believe the output will be buffered before being written to the file, so you won't see it immediately.\nAdd <code>$| = 1;</code> in the beginning of your script to turn off output buffering.</p>\n"}, {"comments": [{"owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 1, "creation_date": 1509711799, "post_id": 47095210, "comment_id": 81140671, "body": "If you re-open the file in each iteration I&#39;d suggest <i>appending</i> to the file (<code>&gt;&gt;</code>) instead of overwriting (<code>&gt;</code>) . Also the flushing isn&#39;t necessary when you close the file after printing."}, {"owner": {"reputation": 532, "user_id": 716119, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/64d3d8eb46cc0ed153c42b25a76c131f?s=128&d=identicon&r=PG", "display_name": "SparkeyG", "link": "https://stackoverflow.com/users/716119/sparkeyg"}, "reply_to_user": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 0, "creation_date": 1509725023, "post_id": 47095210, "comment_id": 81149787, "body": "I got the impression that the OP just needed the last result as some sort of semaphore file. as the for the flushing, your right and I&#39;ve edited to reflect that."}, {"owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 0, "creation_date": 1509725564, "post_id": 47095210, "comment_id": 81150104, "body": "Ahh, I must confess I have overlooked that. Of course you are right then, the last line is sufficient."}], "tags": [], "owner": {"reputation": 532, "user_id": 716119, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/64d3d8eb46cc0ed153c42b25a76c131f?s=128&d=identicon&r=PG", "display_name": "SparkeyG", "link": "https://stackoverflow.com/users/716119/sparkeyg"}, "is_accepted": false, "score": 2, "last_activity_date": 1509725054, "last_edit_date": 1509725054, "creation_date": 1509710159, "answer_id": 47095210, "question_id": 47092772, "link": "https://stackoverflow.com/questions/47092772/check-internet-connectivity-output-into-txt-file-perl/47095210#47095210", "title": "Check Internet Connectivity &amp; Output into txt file [PERL]", "body": "<pre><code>use strict;\nuse warnings;\nuse Net::Ping;\nmy $filename = 'internetConnectivityStorage.txt';\n\nwhile() {\n    open(my $fh, '&gt;:encoding(UTF-8)', $filename);\n    my $x = Net::Ping-&gt;new(\"icmp\");\n    print {$fh} ($x-&gt;ping(\"8.8.8.8\", 1)) ? 1 : 0;\n    close($fh);\n    sleep(3)\n}\n</code></pre>\n\n<p>A few changes. I moved the open to the while loop, I think you want to update the contents of the file on each iteration of the while loop. </p>\n"}], "owner": {"reputation": 25, "user_id": 6924261, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46bf7c0dd88cc886eb18295d918b9dde?s=128&d=identicon&r=PG&f=1", "display_name": "Ryannnnnmmm", "link": "https://stackoverflow.com/users/6924261/ryannnnnmmm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 83, "favorite_count": 0, "accepted_answer_id": 47093210, "answer_count": 2, "score": 0, "last_activity_date": 1509725054, "creation_date": 1509702690, "last_edit_date": 1509710969, "question_id": 47092772, "link": "https://stackoverflow.com/questions/47092772/check-internet-connectivity-output-into-txt-file-perl", "title": "Check Internet Connectivity &amp; Output into txt file [PERL]", "body": "<p>I am trying to get some code which allows me to check \"internetconnectivity\" and store a boolean value (0, 1) into a text file. I am having issues with the code updating changes to internet connectivity, it works on initial execution but when I change the internet environment the text file fails to be updated. I have tried to use an infinite while loop to allow continuous checking in conjunction with sleep() to prevent my computer from frying itself.</p>\n\n<p>Any help is much appreciated.</p>\n\n<pre><code>use strict;\n\nuse Net::Ping;\n\nmy $filename = 'internetConnectivityStorage.txt';\nopen(my $fh, '&gt;:encoding(UTF-8)', $filename);\n\nwhile() {\n    my $x = Net::Ping-&gt;new(\"icmp\");\n    if ($x-&gt;ping(\"8.8.8.8\", 1)) {\n        print $fh \"1\";\n    } else {\n        print $fh \"0\";\n    }\n    close($fh);\n    sleep(3)\n}\n</code></pre>\n\n<p>PS. Am noob and new to perl. Surviving off google searches and guesses ;)</p>\n"}, {"tags": ["javascript", "angularjs", "perl", "web-scraping", "www-mechanize"], "comments": [{"owner": {"reputation": 38072, "user_id": 46395, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5ce828f20abb195ef5d971205ee36c27?s=128&d=identicon&r=PG", "display_name": "daxim", "link": "https://stackoverflow.com/users/46395/daxim"}, "edited": false, "score": 1, "creation_date": 1509700118, "post_id": 47091466, "comment_id": 81133226, "body": "<a href=\"http://p3rl.org/WWW::Mechanize::FAQ#Which-modules-work-like-Mechanize-and-have-JavaScript-support%3f\" rel=\"nofollow noreferrer\">Which modules work like Mechanize and have JavaScript support?</a>"}, {"owner": {"reputation": 5513, "user_id": 25544, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3e9f7000eaa6414cbe7f5cc800e7aba2?s=128&d=identicon&r=PG", "display_name": "Osama Al-Maadeed", "link": "https://stackoverflow.com/users/25544/osama-al-maadeed"}, "reply_to_user": {"reputation": 38072, "user_id": 46395, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5ce828f20abb195ef5d971205ee36c27?s=128&d=identicon&r=PG", "display_name": "daxim", "link": "https://stackoverflow.com/users/46395/daxim"}, "edited": false, "score": 0, "creation_date": 1509701082, "post_id": 47091466, "comment_id": 81133866, "body": "If you post this with more explanation as an answer, I would be happy to accept it."}, {"owner": {"reputation": 5513, "user_id": 25544, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3e9f7000eaa6414cbe7f5cc800e7aba2?s=128&d=identicon&r=PG", "display_name": "Osama Al-Maadeed", "link": "https://stackoverflow.com/users/25544/osama-al-maadeed"}, "reply_to_user": {"reputation": 38072, "user_id": 46395, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5ce828f20abb195ef5d971205ee36c27?s=128&d=identicon&r=PG", "display_name": "daxim", "link": "https://stackoverflow.com/users/46395/daxim"}, "edited": false, "score": 0, "creation_date": 1509701891, "post_id": 47091466, "comment_id": 81134410, "body": "I won&#39;t accept similar answers from someone else, I will wait 48 hours before answering it myself"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1509701915, "post_id": 47091466, "comment_id": 81134427, "body": "The point daxim is making is that WWW::Mechanize cannot do that. You&#39;re essentially asking for recommendations, which as you probably know is off topic. You need selenium, or WWW::Mechanize::Firefox or ::Chrome and it needs to be run in a windowed environment. The one for Firefox is probably going to stop working at some point. The author&#39;s talk about that and the new Chrome one from The Perl Conference in Amsterdam should already be on YouTube. I can&#39;t look for it right now. The author is Max Maischain (corion)."}, {"owner": {"reputation": 611, "user_id": 3714435, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e62c30ed03cdbecf6cc187f6a0948a89?s=128&d=identicon&r=PG&f=1", "display_name": "a1111exe", "link": "https://stackoverflow.com/users/3714435/a1111exe"}, "edited": false, "score": 0, "creation_date": 1509715264, "post_id": 47091466, "comment_id": 81143050, "body": "Recently I used Selenium Webdriver with Perl binding and Chrome, and had a very positive experience. Maybe you should try this instead of WWW::Mechanize."}, {"owner": {"reputation": 5513, "user_id": 25544, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3e9f7000eaa6414cbe7f5cc800e7aba2?s=128&d=identicon&r=PG", "display_name": "Osama Al-Maadeed", "link": "https://stackoverflow.com/users/25544/osama-al-maadeed"}, "edited": false, "score": 0, "creation_date": 1509724535, "post_id": 47091466, "comment_id": 81149479, "body": "Edited the question to ask if mechanize can do it or propose alternatives"}], "answers": [{"tags": [], "owner": {"reputation": 51, "user_id": 1453914, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/d5d90ca4050b8c2c973b7701b60afc65?s=128&d=identicon&r=PG", "display_name": "Kamil Hajduk", "link": "https://stackoverflow.com/users/1453914/kamil-hajduk"}, "is_accepted": false, "score": 0, "last_activity_date": 1518949782, "creation_date": 1518949782, "answer_id": 48850645, "question_id": 47091466, "link": "https://stackoverflow.com/questions/47091466/can-i-automate-angularjs-login-form-in-perl-using-wwwmechanize/48850645#48850645", "title": "Can I automate AngularJS login form in Perl using WWW::Mechanize", "body": "<p>Here it is. Change login and password and paste what you got. You should get tokenId from API, then use this token to authorization.</p>\n\n<pre><code>use LWP::UserAgent;\nmy $ua = LWP::UserAgent-&gt;new();\n\nmy $login = 'lucky';\nmy $password = 'secretpassword';\n\n$ua-&gt;default_header('Accept' =&gt; 'application/json, text/plain, */*');\n$ua-&gt;default_header('Content-Type' =&gt; 'application/json;charset=UTF-8');\n$ua-&gt;default_header('Accept-Encoding' =&gt; 'gzip, deflate, br');\n$ua-&gt;default_header('Accept-Language' =&gt; 'pl-PL,pl;q=0.9,en-US;q=0.8,en;q=0.7');\n$ua-&gt;default_header('Connection' =&gt; 'keep-alive');\n$ua-&gt;default_header('Orgin' =&gt; 'https://www.ooredoo.qa');\n$ua-&gt;default_header('Referer' =&gt; 'https://www.ooredoo.qa/selfcare/');\n$ua-&gt;default_header('Content-Type' =&gt; 'application/json;charset=UTF-8');\n$ua-&gt;default_header('User-Agent' =&gt; 'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/41.0.2227.0 Safari/537.36');\nmy $content = '{\"operation\":\"Login\",\"language\":\"ENGLISH\",\"parameters\":[\"'.$login.'\",\"'.$password.'\"]}';\nmy $res = $ua-&gt;post('https://www.ooredoo.qa/webgate/login', Content =&gt; $content );\nprint $res-&gt;decoded_content;\n</code></pre>\n"}], "owner": {"reputation": 5513, "user_id": 25544, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3e9f7000eaa6414cbe7f5cc800e7aba2?s=128&d=identicon&r=PG", "display_name": "Osama Al-Maadeed", "link": "https://stackoverflow.com/users/25544/osama-al-maadeed"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 187, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1518949782, "creation_date": 1509698242, "last_edit_date": 1509724427, "question_id": 47091466, "link": "https://stackoverflow.com/questions/47091466/can-i-automate-angularjs-login-form-in-perl-using-wwwmechanize", "title": "Can I automate AngularJS login form in Perl using WWW::Mechanize", "body": "<p>I have a <a href=\"https://www.ooredoo.qa/selfcare/#/login/en\" rel=\"nofollow noreferrer\">webpage</a> that uses AngularJS to show a form with a username field, then a password field and the HTML doesn't have any  or  elements. The next page is a simple HTML form that can be easily automated, two set of  fields and a download button.</p>\n\n<p>I know how to use WWW::Mechanize to automate forms but I'm stuck at the login. I saw some python ways to do this, but I'm not a pythonist, and prefer Perl.</p>\n\n<p>Can WWW:Mechanize do this? any other CPAN modules?</p>\n"}, {"tags": ["arrays", "perl"], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 8879316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b35eadc66626eee38d831ba8c0e2c205?s=128&d=identicon&r=PG&f=1", "display_name": "wwkeen", "link": "https://stackoverflow.com/users/8879316/wwkeen"}, "edited": false, "score": 0, "creation_date": 1509700363, "post_id": 47091668, "comment_id": 81133392, "body": "thank for the prompt respones, Choroba. In case source data from array display horizontally as given example, can i use the same method as above?"}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "reply_to_user": {"reputation": 3, "user_id": 8879316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b35eadc66626eee38d831ba8c0e2c205?s=128&d=identicon&r=PG&f=1", "display_name": "wwkeen", "link": "https://stackoverflow.com/users/8879316/wwkeen"}, "edited": false, "score": 0, "creation_date": 1509700666, "post_id": 47091668, "comment_id": 81133588, "body": "@wwkeen: I don&#39;t understand. Arrays don&#39;t display, but you can display them in any way you like."}, {"owner": {"reputation": 3, "user_id": 8879316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b35eadc66626eee38d831ba8c0e2c205?s=128&d=identicon&r=PG&f=1", "display_name": "wwkeen", "link": "https://stackoverflow.com/users/8879316/wwkeen"}, "edited": false, "score": 0, "creation_date": 1509701686, "post_id": 47091668, "comment_id": 81134279, "body": "Sorry my bad, i mess up with other bug problem with this one. Ignore me.Your code did help me a lot."}, {"owner": {"reputation": 3, "user_id": 8879316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b35eadc66626eee38d831ba8c0e2c205?s=128&d=identicon&r=PG&f=1", "display_name": "wwkeen", "link": "https://stackoverflow.com/users/8879316/wwkeen"}, "edited": false, "score": 0, "creation_date": 1509960906, "post_id": 47091668, "comment_id": 81217098, "body": "In case i have array that don&#39;t have equivalent of same variables, anything that need to add-in for above code. Example: my @arr = qw(John Eva Felix Exit a b c d e f Exit 1 2 3 4);  But need to arrange in each column separate by name, character &amp; number."}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "reply_to_user": {"reputation": 3, "user_id": 8879316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b35eadc66626eee38d831ba8c0e2c205?s=128&d=identicon&r=PG&f=1", "display_name": "wwkeen", "link": "https://stackoverflow.com/users/8879316/wwkeen"}, "edited": false, "score": 0, "creation_date": 1509961996, "post_id": 47091668, "comment_id": 81217822, "body": "@wwkeen: I don&#39;t understand what output you expect."}, {"owner": {"reputation": 3, "user_id": 8879316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b35eadc66626eee38d831ba8c0e2c205?s=128&d=identicon&r=PG&f=1", "display_name": "wwkeen", "link": "https://stackoverflow.com/users/8879316/wwkeen"}, "edited": false, "score": 0, "creation_date": 1510016622, "post_id": 47091668, "comment_id": 81246807, "body": "output something look like:  John\ta\t1 Eva\t\tb\t2 Felix\tc\t3 \t\td\t4 \t\te"}, {"owner": {"reputation": 3, "user_id": 8879316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b35eadc66626eee38d831ba8c0e2c205?s=128&d=identicon&r=PG&f=1", "display_name": "wwkeen", "link": "https://stackoverflow.com/users/8879316/wwkeen"}, "edited": false, "score": 0, "creation_date": 1510017154, "post_id": 47091668, "comment_id": 81246936, "body": "I can&#39;t actually put down my expected output inside this comment box,  had some limitation in term of spacing &amp; tab.  In high level, it will be arrange name ( John Eva &amp; Felix) in first column; characters ( a b c d e f) in 2nd column, while number (1 2 3 4) in 3rd column horizontally."}], "tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": true, "score": 1, "last_activity_date": 1510041694, "last_edit_date": 1510041694, "creation_date": 1509699120, "answer_id": 47091668, "question_id": 47091396, "link": "https://stackoverflow.com/questions/47091396/perl-separate-array-value-by-certain-variable-string/47091668#47091668", "title": "Perl: Separate array value by certain variable string", "body": "<p>Iterate over the elements, store them into an array of arrays, resetting the index of the outer array on each <code>Exit</code>:</p>\n\n<pre><code>#!/usr/bin/perl\nuse warnings;\nuse strict;\nuse feature qw{ say };\n\nmy @arr = qw(John Eva Felix Exit a b c Exit 1 2 3);\n\nmy @out;\nmy $index = 0;\n\nfor (@arr) {\n    if ('Exit' eq $_) {\n        $index = 0;\n\n    } else {\n        push @{ $out[$index++] }, $_;\n    }\n}\n\nsay join ' ', @$_ for @out;\n</code></pre>\n\n<p>If the input lines aren't of the same length, you can assign to the particular element in the array:</p>\n\n<pre><code>#!/usr/bin/perl\nuse warnings;\nuse strict;\nuse feature qw{ say };\n\nmy @arr = qw(John Eva Felix Exit a b c d e f Exit 1 2 3 4);\n\nmy @out;\nmy $outer = 0;\nmy $inner = 0;\n\nfor (@arr) {\n    if ('Exit' eq $_) {\n        $outer = 0;\n        ++$inner;\n\n    } else {\n        $out[$outer++][$inner] = $_;\n    }\n}\n\nsay join \"\\t\", map $_ // q(), @$_ for @out;\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 8879316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b35eadc66626eee38d831ba8c0e2c205?s=128&d=identicon&r=PG&f=1", "display_name": "wwkeen", "link": "https://stackoverflow.com/users/8879316/wwkeen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 62, "favorite_count": 0, "accepted_answer_id": 47091668, "answer_count": 1, "score": -4, "last_activity_date": 1510041694, "creation_date": 1509697896, "question_id": 47091396, "link": "https://stackoverflow.com/questions/47091396/perl-separate-array-value-by-certain-variable-string", "title": "Perl: Separate array value by certain variable string", "body": "<p>Need advice on how to separate array data into different column base on certain string.  Like example below base on \"EXIT\" to split data &amp; print into different column. Thank.</p>\n\n<p>Example:</p>\n\n<h1>Input</h1>\n\n<p><br>John\n<br>Eva\n<br>Felix\n<br>Exit\n<br>a\n<br>b\n<br>c\n<br>Exit\n<br>1\n<br>2\n<br>3</p>\n\n<h1>output</h1>\n\n<p><br>John&nbsp;&nbsp;      a  &nbsp;&nbsp;         1\n<br>Eve&nbsp;&nbsp;       b  &nbsp;&nbsp;         2\n<br>Felix&nbsp;&nbsp;    c &nbsp;&nbsp;          3</p>\n"}, {"tags": ["perl", "oop", "strawberry-perl"], "comments": [{"owner": {"reputation": 611, "user_id": 3714435, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e62c30ed03cdbecf6cc187f6a0948a89?s=128&d=identicon&r=PG&f=1", "display_name": "a1111exe", "link": "https://stackoverflow.com/users/3714435/a1111exe"}, "edited": false, "score": 0, "creation_date": 1509714777, "post_id": 47091217, "comment_id": 81142711, "body": "You may put your classes anywhere, you just need to tell Perl where to look. Let&#39;s say your class is &#39;/home/user/project/src/My/Class.pm&#39; dir. Then before <code>use My::Class;</code> you can do <code>use lib &#39;&#47;home&#47;user&#47;project&#47;src&#39;;</code>"}, {"owner": {"reputation": 611, "user_id": 3714435, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e62c30ed03cdbecf6cc187f6a0948a89?s=128&d=identicon&r=PG&f=1", "display_name": "a1111exe", "link": "https://stackoverflow.com/users/3714435/a1111exe"}, "edited": false, "score": 0, "creation_date": 1509714815, "post_id": 47091217, "comment_id": 81142739, "body": "Hope you can adapt this to Windows-way paths."}], "owner": {"reputation": 678, "user_id": 3165035, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/z40HR.jpg?s=128&g=1", "display_name": "Muhamad Iqbal", "link": "https://stackoverflow.com/users/3165035/muhamad-iqbal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 24, "favorite_count": 0, "closed_date": 1509697443, "answer_count": 0, "score": 0, "last_activity_date": 1509697326, "creation_date": 1509697107, "last_edit_date": 1509697326, "question_id": 47091217, "link": "https://stackoverflow.com/questions/47091217/unable-to-create-class-in-strawberry-perl", "closed_reason": "Duplicate", "title": "Unable to create class in Strawberry Perl", "body": "<p>I'm learning Perl to write code for an assignment about text mining.</p>\n\n<p>Currently, I'm trying to implement OOP in Perl using the sample code from here: <a href=\"https://www.tutorialspoint.com/perl/perl_object_oriented.htm\" rel=\"nofollow noreferrer\">https://www.tutorialspoint.com/perl/perl_object_oriented.htm</a></p>\n\n<p>The problem is, I am unable to run the code even though the class code is already in the same directory. I got this error message :</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>Can't locate Person.pm in @INC (you may need to install the Person module \n(@INC contains: C:/Strawberry/perl/site/lib C:/Strawberry/perl/vendor/lib \nC:/Strawberry/perl/lib) at employee.pl line 3.\nBEGIN failed--compilation aborted at employee.pl line 3.\n</code></pre>\n\n<p>When I switched to ActiveState Perl, I have no problem in running the code.</p>\n\n<p>Does anyone know what caused the problem? I've tried searching solution for this but most of them are more related to @INC configuration</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 3327, "user_id": 1604311, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/0frKT.jpg?s=128&g=1", "display_name": "Arunesh Singh", "link": "https://stackoverflow.com/users/1604311/arunesh-singh"}, "edited": false, "score": 1, "creation_date": 1509695037, "post_id": 47090634, "comment_id": 81130594, "body": "Please tell us, how you are running the script?"}, {"owner": {"reputation": 5, "user_id": 8641125, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/321e32cba60ee45fd4cc38670dbe368c?s=128&d=identicon&r=PG&f=1", "display_name": "krishna", "link": "https://stackoverflow.com/users/8641125/krishna"}, "reply_to_user": {"reputation": 3327, "user_id": 1604311, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/0frKT.jpg?s=128&g=1", "display_name": "Arunesh Singh", "link": "https://stackoverflow.com/users/1604311/arunesh-singh"}, "edited": false, "score": 0, "creation_date": 1509695110, "post_id": 47090634, "comment_id": 81130626, "body": "I am runnign the script in batch command line . perl scripts\\perl\\test.pl  &quot;MobileApp&quot;,  %ver%"}, {"owner": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "edited": false, "score": 1, "creation_date": 1509695205, "post_id": 47090634, "comment_id": 81130684, "body": "How many parameters are you passing to the script, and how many are you expecting in the script?"}, {"owner": {"reputation": 5, "user_id": 8641125, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/321e32cba60ee45fd4cc38670dbe368c?s=128&d=identicon&r=PG&f=1", "display_name": "krishna", "link": "https://stackoverflow.com/users/8641125/krishna"}, "reply_to_user": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "edited": false, "score": 0, "creation_date": 1509695313, "post_id": 47090634, "comment_id": 81130728, "body": "@\u0421\u0443\u0445\u043e\u043927,I am passing 2 arguments. from the above code,$appname, $ver. i am callign the script like this with command line arguments. perl scripts\\perl\\test.pl &quot;MobileApp&quot;, %ver%.  $appname is Mobileapp and $ver is %ver%(1.0.1.23);"}, {"owner": {"reputation": 2415, "user_id": 4251338, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UNbCO.png?s=128&g=1", "display_name": "ssr1012", "link": "https://stackoverflow.com/users/4251338/ssr1012"}, "edited": false, "score": 1, "creation_date": 1509695342, "post_id": 47090634, "comment_id": 81130736, "body": "third parameter is null <code>$ver</code>"}, {"owner": {"reputation": 5, "user_id": 8641125, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/321e32cba60ee45fd4cc38670dbe368c?s=128&d=identicon&r=PG&f=1", "display_name": "krishna", "link": "https://stackoverflow.com/users/8641125/krishna"}, "reply_to_user": {"reputation": 2415, "user_id": 4251338, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UNbCO.png?s=128&g=1", "display_name": "ssr1012", "link": "https://stackoverflow.com/users/4251338/ssr1012"}, "edited": false, "score": 0, "creation_date": 1509695539, "post_id": 47090634, "comment_id": 81130817, "body": "@ssr1012, Are you asking a question, if yes $ver is not null it has the value."}, {"owner": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "edited": false, "score": 5, "creation_date": 1509695661, "post_id": 47090634, "comment_id": 81130868, "body": "Passing 2 and expecting 3, leaves <code>$ver</code> undefined.."}, {"owner": {"reputation": 5, "user_id": 8641125, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/321e32cba60ee45fd4cc38670dbe368c?s=128&d=identicon&r=PG&f=1", "display_name": "krishna", "link": "https://stackoverflow.com/users/8641125/krishna"}, "reply_to_user": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "edited": false, "score": 0, "creation_date": 1509695849, "post_id": 47090634, "comment_id": 81130959, "body": "@\u0421\u0443\u0445\u043e\u043927, I am not getting can you please explain with example?"}, {"owner": {"reputation": 2415, "user_id": 4251338, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UNbCO.png?s=128&g=1", "display_name": "ssr1012", "link": "https://stackoverflow.com/users/4251338/ssr1012"}, "edited": false, "score": 0, "creation_date": 1509695924, "post_id": 47090634, "comment_id": 81130997, "body": "you are running the script as <code>batch</code> file"}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 1, "creation_date": 1509695928, "post_id": 47090634, "comment_id": 81130999, "body": "<code>my ($buildno, $appname, $ver)</code> - how many variables do you see here?"}, {"owner": {"reputation": 3604, "user_id": 436450, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0afd75178763cf41af43a103b95277ae?s=128&d=identicon&r=PG", "display_name": "jira", "link": "https://stackoverflow.com/users/436450/jira"}, "edited": false, "score": 1, "creation_date": 1509696010, "post_id": 47090634, "comment_id": 81131042, "body": "Moreover you should separate command line arguments by space only, not comma."}, {"owner": {"reputation": 5, "user_id": 8641125, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/321e32cba60ee45fd4cc38670dbe368c?s=128&d=identicon&r=PG&f=1", "display_name": "krishna", "link": "https://stackoverflow.com/users/8641125/krishna"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1509696037, "post_id": 47090634, "comment_id": 81131052, "body": "@melpomene,3 variables and i am passing 2 and 3 variables. I don&#39;t want pass 1st variable."}, {"owner": {"reputation": 5, "user_id": 8641125, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/321e32cba60ee45fd4cc38670dbe368c?s=128&d=identicon&r=PG&f=1", "display_name": "krishna", "link": "https://stackoverflow.com/users/8641125/krishna"}, "reply_to_user": {"reputation": 3604, "user_id": 436450, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0afd75178763cf41af43a103b95277ae?s=128&d=identicon&r=PG", "display_name": "jira", "link": "https://stackoverflow.com/users/436450/jira"}, "edited": false, "score": 0, "creation_date": 1509696795, "post_id": 47090634, "comment_id": 81131445, "body": "@jira,I removed comma and rerun it and now the output is like flora-1.0.1.23-. it is taking 3 rd argument not displaying 2nd argument. any advise."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 4, "creation_date": 1509696868, "post_id": 47090634, "comment_id": 81131487, "body": "... do you not understand that 2 and 3 are not the same number?"}, {"owner": {"reputation": 5, "user_id": 8641125, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/321e32cba60ee45fd4cc38670dbe368c?s=128&d=identicon&r=PG&f=1", "display_name": "krishna", "link": "https://stackoverflow.com/users/8641125/krishna"}, "edited": false, "score": 0, "creation_date": 1509697005, "post_id": 47090634, "comment_id": 81131543, "body": "yes, those are not the same. If you know the how to pass please give any example."}, {"owner": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "edited": false, "score": 1, "creation_date": 1509697127, "post_id": 47090634, "comment_id": 81131610, "body": "<code>perl scripts\\perl\\test.pl not_interested_in_first &quot;MobileApp&quot;  %ver%</code>"}, {"owner": {"reputation": 5, "user_id": 8641125, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/321e32cba60ee45fd4cc38670dbe368c?s=128&d=identicon&r=PG&f=1", "display_name": "krishna", "link": "https://stackoverflow.com/users/8641125/krishna"}, "reply_to_user": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "edited": false, "score": 0, "creation_date": 1509700701, "post_id": 47090634, "comment_id": 81133608, "body": "@\u0421\u0443\u0445\u043e\u043927 , perfect it is working now as expected. Thanks"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1509713526, "post_id": 47090634, "comment_id": 81141914, "body": "I&#39;ve removed the <code>perl-module</code> tag. There&#39;s nothing about Perl module&#39;s in this question."}, {"owner": {"reputation": 381, "user_id": 3380064, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PrmsH.jpg?s=128&g=1", "display_name": "interduo", "link": "https://stackoverflow.com/users/3380064/interduo"}, "edited": false, "score": 1, "creation_date": 1509740843, "post_id": 47090634, "comment_id": 81158300, "body": "I think it&#39;s worth noting that perl doesn&#39;t pass the script name to <code>@ARGV</code>. It get&#39;s passed to the special variable <code>$0</code> instead and <code>@ARGV</code> is populated with the remaining parameters in the command. The perlvar page has more info about it: <a href=\"https://perldoc.perl.org/perlvar.html\" rel=\"nofollow noreferrer\">perldoc.perl.org/perlvar.html</a>. I know there are a number of windows utilities where the script name does get passed in as an argument so that may be where the 3 vs 2 variable confusion is coming from."}], "answers": [{"comments": [{"owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 1, "creation_date": 1509703416, "post_id": 47092709, "comment_id": 81135493, "body": "Given that the OP has <i>&quot;written the Perl code&quot;</i> I think the apparent solution would be to assign only two arguments to the variables as in <code>my ($appname, $ver) = @ARGV;</code> and leave <code>$buildno</code> alone or assign whatever else to it."}], "tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 3, "last_activity_date": 1509706057, "last_edit_date": 1509706057, "creation_date": 1509702502, "answer_id": 47092709, "question_id": 47090634, "link": "https://stackoverflow.com/questions/47090634/pass-arguments-from-command-line-in-perl/47092709#47092709", "title": "Pass arguments from command line in Perl", "body": "<p>So you run the program like this:</p>\n\n<pre><code>perl scripts\\perl\\test.pl  \"MobileApp\",  %ver%\n</code></pre>\n\n<p>And then, within the program you are accessing the command line arguments like this:</p>\n\n<pre><code>my ($buildno, $appname, $ver) = @ARGV;\n</code></pre>\n\n<p>There's an obvious mismatch here. You are passing in two arguments, but expecting three. You will end up with \"MobileApp\" in <code>$buildno</code> and the contents of <code>%ver%</code> in <code>$appname</code>. Your last variable, <code>$ver</code>, will remain undefined.</p>\n\n<p>If you want three variables to be set, then you need to pass three arguments.</p>\n\n<p>And, if you wanted to investigate this, then surely it would have been simple to print out the values of your three variables?</p>\n\n<p>The \"fix\" is to pass another value as the first command line option so that the parameters line up with the variables.</p>\n\n<pre><code>perl scripts\\perl\\test.pl something_else \"MobileApp\"  %ver%\n</code></pre>\n\n<p>But I'm fascinated to hear what level of confusion makes this problem hard to debug.</p>\n\n<p><strong>Update:</strong> Another option (as PerlDuck has reminded me in a comment) would be to fix the code to only expect two arguments.</p>\n\n<pre><code>my ($appname, $ver) = @ARGV;\n</code></pre>\n"}], "owner": {"reputation": 5, "user_id": 8641125, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/321e32cba60ee45fd4cc38670dbe368c?s=128&d=identicon&r=PG&f=1", "display_name": "krishna", "link": "https://stackoverflow.com/users/8641125/krishna"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2817, "favorite_count": 0, "answer_count": 1, "score": -3, "last_activity_date": 1509713503, "creation_date": 1509694502, "last_edit_date": 1509713503, "question_id": 47090634, "link": "https://stackoverflow.com/questions/47090634/pass-arguments-from-command-line-in-perl", "title": "Pass arguments from command line in Perl", "body": "<p>I have written the Perl code and trying to pass the command line arguments and not getting expected output.</p>\n\n<p>Here is my code:</p>\n\n<pre><code>my ($buildno, $appname, $ver) = @ARGV;\n\nprint values \\@ARGV;\n\n$Artifact_name = \"flora-$appname-$ver\";\n\nmkdir \"$target_dir/$Artifact_name\";'\n</code></pre>\n\n<p>When I run the Perl script <code>perl scripts\\perl\\test.pl  \"MobileApp\",  %ver%</code>, I am getting the following output: <code>flora-MobileApp-</code></p>\n\n<p>And the log message is showing </p>\n\n<blockquote>\n  <p>'Use of uninitialized value $ver in concatenation (.) or string at\n  Jscripts\\perl\\test.pl line 31 (#3)'.</p>\n</blockquote>\n\n<p><code>%ver%</code> is the environment variable and its value is <code>1.0.1.23</code>.</p>\n\n<p>I am expecting the output <code>flora-MobileApp-1.0.1.23</code>.</p>\n"}, {"tags": ["python", "perl", "ns2", "throughput"], "comments": [{"owner": {"reputation": 17619, "user_id": 7818749, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec4a72453e116debb802d55e88c2572e?s=128&d=identicon&r=PG&f=1", "display_name": "Gerhard", "link": "https://stackoverflow.com/users/7818749/gerhard"}, "edited": false, "score": 0, "creation_date": 1509690724, "post_id": 47088186, "comment_id": 81128676, "body": "<code>$granularity</code> Would be a variable name, which you input from cmdline when you run the script using switches and it will then be coming from <code>$ARGV[4];</code> Here I would say that the granularity will be in seconds."}], "answers": [{"tags": [], "owner": {"reputation": 4790, "user_id": 4491743, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aXCqO.jpg?s=128&g=1", "display_name": "Knud Larsen", "link": "https://stackoverflow.com/users/4491743/knud-larsen"}, "is_accepted": false, "score": 0, "last_activity_date": 1509717958, "creation_date": 1509717958, "answer_id": 47097702, "question_id": 47088186, "link": "https://stackoverflow.com/questions/47088186/difference-between-my-python-script-and-the-perl-script-to-calculate-throughput/47097702#47097702", "title": "Difference between my python script and the perl script to calculate throughput and what does granularity mean?", "body": "<p>Google, what is granularity\n<a href=\"https://www.google.com/webhp?hl=all&amp;gws_rd=ssl#hl=en&amp;q=ns2+what+is+granularity\" rel=\"nofollow noreferrer\">https://www.google.com/webhp?hl=all&amp;gws_rd=ssl#hl=en&amp;q=ns2+what+is+granularity</a></p>\n\n<p>. <a href=\"https://books.google.dk/books?id=CXENDgAAQBAJ&amp;pg=PA16&amp;lpg=PA16&amp;dq=ns2%20what%20is%20granularity&amp;source=bl&amp;ots=zyXxTUjbPt&amp;sig=4b5VBvfWFRh7bmHAz5xA-4BDhdM&amp;hl=en&amp;sa=X&amp;ved=%200ahUKEwjgsv2VuqLXAhWElxoKHZlmBtQQ6AEIQDAE#v=onepage&amp;q=ns2%20what%20is%20granularity&amp;f=false\" rel=\"nofollow noreferrer\">Example</a> \u2192  \" .. granularity (i.e. <strong>different level of abstraction</strong>) .. \"</p>\n\n<p>. <a href=\"https://www.researchgate.net/post/Bandwidth_Estimation_in_ns212\" rel=\"nofollow noreferrer\">https://www.researchgate.net/post/Bandwidth_Estimation_in_ns212</a>\n\u2192  \" .. with fine granularity timestamp (milli if not microseconds).\"</p>\n\n<p>All ns2 awk, perl scripts <a href=\"https://drive.google.com/file/d/0B7S255p3kFXNdkdRalVpWk56MmM/view?usp=sharing\" rel=\"nofollow noreferrer\">https://drive.google.com/file/d/0B7S255p3kFXNdkdRalVpWk56MmM/view?usp=sharing</a></p>\n\n<p>Analyzing tool (awk, python): APP-Tool <a href=\"https://github.com/WiNG-NITK/APP-Tool\" rel=\"nofollow noreferrer\">https://github.com/WiNG-NITK/APP-Tool</a></p>\n\n<p>Example, APP-Tool \u2192 throughput \u2192 image</p>\n\n<p><a href=\"https://i.stack.imgur.com/c6Pv3.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/c6Pv3.jpg\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 1, "user_id": 6868980, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Fky12.jpg?s=128&g=1", "display_name": "Batman", "link": "https://stackoverflow.com/users/6868980/batman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 174, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1509717958, "creation_date": 1509680957, "question_id": 47088186, "link": "https://stackoverflow.com/questions/47088186/difference-between-my-python-script-and-the-perl-script-to-calculate-throughput", "title": "Difference between my python script and the perl script to calculate throughput and what does granularity mean?", "body": "<p>So i recently wrote a python script which parses an ns2 trace file and calculates throughput. I also have a perl script that I downloaded from the internet that does the same thing but a little differently. I am having a hard time understanding what granularity(used in the perl script) means. Can someone please help me? Thanks. The codes are provided below.</p>\n\n<pre><code>trace = open('window_size_23.tr' , 'r')\ns = 0\nprev = 0.0\nstart = 0.0\nend = 0.0\nfor line in trace:\n    words = line.split(' ')\n    if line.startswith('r') and 'tcp' in line and words[3] == '1' and \nwords[8] == '0.0' and words[9] == '1.0':\n\n        s = s + int(words[5])\n        if prev == 0.0:\n            start = float(words[1])\n        prev = float(words[1])\nend = prev\nthroughput = (s*8.0)/((end - start)*1000000)\nprint throughput, start, end\n</code></pre>\n\n<p>Here's the perl script</p>\n\n<pre><code>$infile=$ARGV[0];\n    $destnode=$ARGV[1];\n    $fromport=$ARGV[2];\n    $toport=$ARGV[3];\n    $granularity=$ARGV[4];\n\n    $sum=0;\n    $grantsum=0;\n    $clock=0;\n\n    open (DATA,\"&lt;$infile\") || die \"Can't open $infile $!\";  \n    while (&lt;DATA&gt;) \n    {\n        @x = split(' ');\n        if ($x[1]-$clock &lt;= $granularity)\n        {\n            if ($x[0] eq 'r') \n            { \n                if ($x[3] eq $destnode &amp;&amp; $x[8] eq $fromport &amp;&amp; $x[9] \n                eq $toport) \n                { \n                    if ($x[4] eq 'tcp') \n                    {\n                        $sum=$sum+$x[5];\n                        $grantsum=$grantsum+$x[5];\n                    }\n                }\n            }\n       }\n       else\n       {   \n           $throughput=0.000008*$sum/$granularity;\n           print STDOUT \"$clock $throughput\\n\";\n\n           $clock=$clock+$granularity;\n\n           if ($x[0] eq 'r' &amp;&amp; $x[3] eq $destnode &amp;&amp; $x[8] eq \n           $fromport &amp;&amp; $x[9] eq $toport &amp;&amp; $x[4] eq 'tcp')\n           {\n                $sum=$x[5];\n                $grantsum=$grantsum+$x[5];\n           }\n           else\n           {\n               $sum=0;\n           }\n\n           while ($x[1]-$clock &gt; $granularity)\n           {\n               print STDOUT \"$clock 0.0\\n\";\n               $clock=$clock+$granularity;\n           }\n      }   \n }\n\n$throughput=0.000008*$sum/$granularity;\nprint STDOUT \"$clock $throughput\\n\";\n$clock=$clock+$granularity;\n\nprint STDERR \"Avg throughput $fromport - $toport = \",\n         0.000008*$grantsum/$clock,\"MBytes/sec \\n\";\n\nclose DATA;\n\nexit(0);\n</code></pre>\n"}, {"tags": ["perl"], "answers": [{"tags": [], "owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "is_accepted": true, "score": 8, "last_activity_date": 1509666420, "creation_date": 1509666420, "answer_id": 47086363, "question_id": 47085824, "link": "https://stackoverflow.com/questions/47085824/bug-with-use-if-regex-cond/47086363#47086363", "title": "Bug with use if REGEX_COND", "body": "<p>This is a bug in your code.</p>\n\n<p>The argument list after <code>use MODULE</code> is in, well, list context.</p>\n\n<p><code>m//</code> in list context returns a list of captured strings if successful (or <code>1</code> if the regex contains no capturing groups), or the empty list on failure.</p>\n\n<p>Thus:</p>\n\n<pre><code>use if \"test.pl\" =~ /\\.t\\z/, 'List::Util', ('pairmap');\n</code></pre>\n\n<p>is equivalent to</p>\n\n<pre><code>use if (), 'List::Util', ('pairmap');\n</code></pre>\n\n<p>(The match failed, so an empty list is returned.)</p>\n\n<p><code>,</code> in list context is the list concatenation operator, so this gives:</p>\n\n<pre><code>use if 'List::Util', 'pairmap';\n</code></pre>\n\n<p><code>'List::Util'</code> is a true value, so this ultimately ends up loading <code>pairmap.pm</code>:</p>\n\n<pre><code>use pairmap;\n</code></pre>\n\n<p>The fix is to give the match scalar context:</p>\n\n<pre><code>use if scalar($0 =~ /\\.t\\z/), 'List::Util', 'pairmap';\n</code></pre>\n\n<p>(<code>!</code> also supplies scalar context to its operand, so <code>!!</code> has the same effect.)</p>\n"}], "owner": {"reputation": 34304, "user_id": 1733163, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/gmGvj.jpg?s=128&g=1", "display_name": "Miller", "link": "https://stackoverflow.com/users/1733163/miller"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 59, "favorite_count": 0, "accepted_answer_id": 47086363, "answer_count": 1, "score": 6, "last_activity_date": 1509666420, "creation_date": 1509662926, "question_id": 47085824, "link": "https://stackoverflow.com/questions/47085824/bug-with-use-if-regex-cond", "title": "Bug with use if REGEX_COND", "body": "<p>I would like to conditional load a package if the program name is a test script ending in .t.</p>\n\n<p>However, I'm running into a bug where <a href=\"https://perldoc.perl.org/if.html\" rel=\"noreferrer\">use if</a> fails when the condition is a regex.  I've tested this in Perl 5.10 and 5.16.</p>\n\n<p>The following is my test script ending in .t:</p>\n\n<pre><code>#!/usr/bin/env perl\n\nuse v5.10;\n\nBEGIN { say \"\\$0 is '$0'\" }\n\nuse if $0 =~ /\\.t\\z/, 'List::Util', ('pairmap');\n\nsay \"List::Util is \" . ( $INC{\"List/Util.pm\"} ? '' : 'NOT ' ) . 'included';\n</code></pre>\n\n<p>Outputs:</p>\n\n<pre><code>$ ./test.t\n$0 is './test.t'\nList::Util is included\n</code></pre>\n\n<p>However, the same file with a .pl extension fails:</p>\n\n<pre><code>$ ./test.pl\n$0 is './test.pl'\nCan't locate pairmap.pm in @INC (@INC contains: /usr/lib64/perl5/5.10.0 /usr/lib64/perl5 /usr/local/share/perl5/x86_64-linux-thread-multi /usr/local/share/perl5 /usr/local/lib64/perl5 /usr/share/perl5 /usr/local/lib64/perl5 /usr/local/share/perl5 /usr/lib64/perl5/vendor_perl /usr/share/perl5/vendor_perl /usr/lib64/perl5 /usr/share/perl5 .) at /usr/share/perl5/if.pm line 13.\nBEGIN failed--compilation aborted at ./test.pl line 7.\n</code></pre>\n\n<p>I can coerce the code into working if I double bang the regex or change it to a substr comparison:</p>\n\n<pre><code>use if !!( $0 =~ /\\.t\\z/ ), 'List::Util', ('pairmap');\nuse if substr( $0, -2 ) eq '.t', 'List::Util', ('pairmap');\n</code></pre>\n\n<p>Outputs:</p>\n\n<pre><code>$ ./test.pl\n$0 is './test.pl'\nList::Util is NOT included\n</code></pre>\n\n<p>Is this a known bug?  If so, in what version was it fixed?</p>\n"}, {"tags": ["perl", "email", "base64", "procmail", "string-decoding"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1509663774, "post_id": 47085819, "comment_id": 81121498, "body": "Why did you tag this as Perl? Can you run Perl code in those filters, or is Procmail written in Perl, or is the regex of the PCRE flavor? Only the first option is relevant to the Perl tag."}, {"owner": {"reputation": 137100, "user_id": 874188, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/ZcY77.png?s=128&g=1", "display_name": "tripleee", "link": "https://stackoverflow.com/users/874188/tripleee"}, "edited": false, "score": 0, "creation_date": 1509684561, "post_id": 47085819, "comment_id": 81126756, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/11726354/sendmail-procmail-get-mail-sender-and-mail-subject-utf8-encoding-issues\">Sendmail/procmail - get mail sender and mail subject, utf8 encoding issues</a>"}, {"owner": {"reputation": 11, "user_id": 3865795, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cb9fd1bc42dcc3742959c5349500646b?s=128&d=identicon&r=PG&f=1", "display_name": "Monty", "link": "https://stackoverflow.com/users/3865795/monty"}, "edited": false, "score": 0, "creation_date": 1509739322, "post_id": 47085819, "comment_id": 81157605, "body": "Yes, you can run Perl code in Procmail. Maybe there&#39;s a solution that uses a Perl script."}, {"owner": {"reputation": 11, "user_id": 3865795, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cb9fd1bc42dcc3742959c5349500646b?s=128&d=identicon&r=PG&f=1", "display_name": "Monty", "link": "https://stackoverflow.com/users/3865795/monty"}, "edited": false, "score": 0, "creation_date": 1509739775, "post_id": 47085819, "comment_id": 81157849, "body": "It&#39;s not a duplicate of Sendmail/procmail - get mail sender and mail subject, utf8 encoding issues. There are some similarities, but this question is not answered."}, {"owner": {"reputation": 137100, "user_id": 874188, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/ZcY77.png?s=128&g=1", "display_name": "tripleee", "link": "https://stackoverflow.com/users/874188/tripleee"}, "edited": false, "score": 0, "creation_date": 1527846789, "post_id": 47085819, "comment_id": 88291521, "body": "<i>How</i> is this different? The accepted answer on that question shows you exactly how to decode your example."}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 3865795, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cb9fd1bc42dcc3742959c5349500646b?s=128&d=identicon&r=PG&f=1", "display_name": "Monty", "link": "https://stackoverflow.com/users/3865795/monty"}, "edited": false, "score": 0, "creation_date": 1509740141, "post_id": 47090827, "comment_id": 81158016, "body": "Thank you. Could you elaborate it a little bit more?  1. What do you mean with &quot;provided the subject line matches $PATTERN&quot;? 2. &quot;Better yet, use something besides procmail&quot; \u2013 Unfortunately I can&#39;t change it on this system to e.g. Sieve \u2013 but Procmail works really great."}, {"owner": {"reputation": 137100, "user_id": 874188, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/ZcY77.png?s=128&g=1", "display_name": "tripleee", "link": "https://stackoverflow.com/users/874188/tripleee"}, "edited": false, "score": 0, "creation_date": 1527846619, "post_id": 47090827, "comment_id": 88291418, "body": "An additional complication is that <a href=\"https://datatracker.ietf.org/doc/rfc2047/\" rel=\"nofollow noreferrer\">RFC2047</a> provides for much more than a single base64 token in a single encoding. In today&#39;s world, you should probably normalize everything to UTF-8 in a <a href=\"https://en.wikipedia.org/wiki/Unicode_equivalence\" rel=\"nofollow noreferrer\">canonicalized representation</a> (I guess NFD though this also depends on your specific application; NFKC might actually be the simplest and most robust if your needs are pedestrian)"}], "tags": [], "owner": {"reputation": 31, "user_id": 6716357, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/df954b0e1782cdb375cd9b62f4980ac5?s=128&d=identicon&r=PG&f=1", "display_name": "G McIntire", "link": "https://stackoverflow.com/users/6716357/g-mcintire"}, "is_accepted": false, "score": 2, "last_activity_date": 1509752915, "last_edit_date": 1509752915, "creation_date": 1509695304, "answer_id": 47090827, "question_id": 47085819, "link": "https://stackoverflow.com/questions/47085819/how-to-decode-a-base64-encoded-email-subject-string-using-a-procmail-recipe/47090827#47090827", "title": "How to decode a base64-encoded email subject string using a Procmail recipe?", "body": "<p>There's often a \"base64\" program installed on Linux and MacOS machines. To do the same thing in Perl specifically, a command line invocation like this would work:</p>\n\n<pre><code>$ perl -MMIME::Base64 -e  'print decode_base64(\"QWxhZGRpbjpvcGVuIHNlc2FtZQ==\");'\n</code></pre>\n\n<p>Where QWxhZGRpbjpvcGVuIHNlc2FtZQ== is your base64 string.</p>\n\n<p>In my .procmailrc, I have done things like this: </p>\n\n<pre><code>SUBJECT=`formail -x Subject:`\n\n:0\n{\n# You would use 'fbw' to scan the body\n:0 fw \n# presumably any base64 message will have this content header\n* ^Content-Transfer-Encoding: base64\n| some-external-app\n}\n</code></pre>\n\n<p>where \"some-external-app\" could be the base64 program, or a suitable perl invocation:</p>\n\n<pre><code>formail -i \"Subject: `perl -MMIME::Base64 -e 'print decode_base64($SUBJECT)' `\"\n</code></pre>\n\n<p>or whatnot. </p>\n\n<p>On my machine (netBSD 7.1 on AMD) base64 works like like so: </p>\n\n<pre><code>base64 -d\n</code></pre>\n\n<p>but YMMV from platform to platform.</p>\n\n<p>Also, the reality is that emails are often malformed in the wild and you may have to tweak the above recipe to match reality. But hopefully you get the idea.   </p>\n\n<p>It's a good idea to set the LOGFILE variable in your .procmailrc so you can keep track of unintended consequences. Better yet, use something besides procmail ;-)</p>\n"}], "owner": {"reputation": 11, "user_id": 3865795, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cb9fd1bc42dcc3742959c5349500646b?s=128&d=identicon&r=PG&f=1", "display_name": "Monty", "link": "https://stackoverflow.com/users/3865795/monty"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1416, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1509752915, "creation_date": 1509662899, "last_edit_date": 1509746423, "question_id": 47085819, "link": "https://stackoverflow.com/questions/47085819/how-to-decode-a-base64-encoded-email-subject-string-using-a-procmail-recipe", "title": "How to decode a base64-encoded email subject string using a Procmail recipe?", "body": "<p>This is a simple Procmail recipe to filter emails depending on subject:</p>\n\n<pre><code>:0\n* ^Subject: .*Content to filter\n$HOME/Maildir/.INBOX.My_filtered_folder/\n</code></pre>\n\n<p>The above very simple Procmail recipe works without problems. But some emails have Base64 encoded Subject content like this example:</p>\n\n<pre><code>Subject: =?UTF-8?B?VmlldGFsaXMgUG9sZXBl?=\n =?UTF-8?B?bGwaY29tbWVudPVkIG9u?=\n =?UTF-8?B?IGAgbGlubyBCYWPrcGFj?=\n =?UTF-8?B?a2Vw4oDZcyBGZWxpY3l0eSA=?=\n =?UTF-8?B?c3hjckVkLg==?=\n</code></pre>\n\n<p>So it's needed to decode this encoded Subject content first to be able to filter the emails like in the above recipe.</p>\n\n<p>How is it possible to decode such base64-encoded email subject strings within a Procmail recipe prior to filter for Subject content (on Debian 7)?</p>\n\n<p>This question is NOT a duplicate to a question about \"Sendmail/procmail - get mail sender and mail subject, utf8 encoding issues [closed]\" \u2013 it's quite a completely different question.</p>\n"}, {"tags": ["arrays", "perl"], "comments": [{"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 2, "creation_date": 1509662784, "post_id": 47085697, "comment_id": 81121153, "body": "<code>push(@animals, shift(@animals))</code>"}, {"owner": {"reputation": 3432, "user_id": 604642, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/48daad611ba387f8473b0c1e5792aa3f?s=128&d=identicon&r=PG", "display_name": "shawnhcorey", "link": "https://stackoverflow.com/users/604642/shawnhcorey"}, "edited": false, "score": 0, "creation_date": 1509714823, "post_id": 47085697, "comment_id": 81142748, "body": "A blog post on using arrays as linked lists. <a href=\"http://blogs.perl.org/users/shawnhcorey/2012/05/a-look-at-arrays.html\" rel=\"nofollow noreferrer\">blogs.perl.org/users/shawnhcorey/2012/05/a-look-at-arrays.ht&zwnj;&#8203;ml</a>"}, {"owner": {"reputation": 69, "user_id": 3496003, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/702073a882994df937af9e0541bee7f1?s=128&d=identicon&r=PG", "display_name": "jshakil", "link": "https://stackoverflow.com/users/3496003/jshakil"}, "edited": false, "score": 0, "creation_date": 1509758415, "post_id": 47085697, "comment_id": 81163424, "body": "@shawnhcoreyMuch appreciated, thank you."}], "answers": [{"comments": [{"owner": {"reputation": 69, "user_id": 3496003, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/702073a882994df937af9e0541bee7f1?s=128&d=identicon&r=PG", "display_name": "jshakil", "link": "https://stackoverflow.com/users/3496003/jshakil"}, "edited": false, "score": 0, "creation_date": 1509663098, "post_id": 47085802, "comment_id": 81121276, "body": "I understand the concepts now, thank you for your thorough answer."}], "tags": [], "owner": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "is_accepted": true, "score": 3, "last_activity_date": 1509662823, "creation_date": 1509662823, "answer_id": 47085802, "question_id": 47085697, "link": "https://stackoverflow.com/questions/47085697/how-to-move-elements-in-an-array-in-perl/47085802#47085802", "title": "How to move elements in an array in Perl", "body": "<ul>\n<li><a href=\"http://perldoc.perl.org/functions/shift.html\" rel=\"nofollow noreferrer\"><code>shift</code></a> removes the first element.</li>\n<li><a href=\"http://perldoc.perl.org/functions/unshift.html\" rel=\"nofollow noreferrer\"><code>unshift</code></a> adds an element to the front.</li>\n<li><a href=\"http://perldoc.perl.org/functions/pop.html\" rel=\"nofollow noreferrer\"><code>pop</code></a> removes the last element.</li>\n<li><a href=\"http://perldoc.perl.org/functions/push.html\" rel=\"nofollow noreferrer\"><code>push</code></a> adds an element to the end.</li>\n<li><a href=\"http://perldoc.perl.org/functions/splice.html\" rel=\"nofollow noreferrer\"><code>splice</code></a> can add and remove any number of elements from anywhere in the list.</li>\n</ul>\n\n<p><code>shift</code>/<code>unshift</code> work at the front, <code>pop/push</code> work at the end.</p>\n\n<p>In your case, you want <code>push(@animals, shift(@animals))</code>. Remove the first element and put it on the end.</p>\n"}], "owner": {"reputation": 69, "user_id": 3496003, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/702073a882994df937af9e0541bee7f1?s=128&d=identicon&r=PG", "display_name": "jshakil", "link": "https://stackoverflow.com/users/3496003/jshakil"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 529, "favorite_count": 0, "accepted_answer_id": 47085802, "answer_count": 1, "score": 0, "last_activity_date": 1509662935, "creation_date": 1509662212, "last_edit_date": 1509662935, "question_id": 47085697, "link": "https://stackoverflow.com/questions/47085697/how-to-move-elements-in-an-array-in-perl", "title": "How to move elements in an array in Perl", "body": "<p>say I have an array containing the following words:</p>\n\n<pre><code>@animals = (\"cat\", \"dog\", \"mouse\", \"elephant\", \"giraffe\");\n</code></pre>\n\n<p>How would I move element 0 to the end of the array? So now it will become:</p>\n\n<pre><code>@animals = (\"dog\", \"mouse\", \"elephant\", \"giraffe\", \"cat\");\n</code></pre>\n\n<p>Is there a simple way using <code>shift</code>, <code>unshift</code>, <code>pop</code>, or <code>push</code>?</p>\n"}, {"tags": ["xml", "perl"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1509661416, "post_id": 47085076, "comment_id": 81120632, "body": "Are you using <code>XML::LibXML</code>?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1509738423, "post_id": 47085076, "comment_id": 81157144, "body": "<code>&#47;&#47;section[&#47;@name]</code> means &quot;<code>section</code> elements in the null namespace which have a root element with an attribute named <code>name</code> in the null namespace.&quot; On the other hand, <code>&#47;&#47;section[@name]</code> means &quot;<code>section</code> elements in the null namespace which have an attribute named <code>name</code> in the null namespace.&quot;"}], "answers": [{"comments": [{"owner": {"reputation": 137436, "user_id": 415448, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/P2vVZ.png?s=128&g=1", "display_name": "Michael Kay", "link": "https://stackoverflow.com/users/415448/michael-kay"}, "edited": false, "score": 0, "creation_date": 1509701713, "post_id": 47085986, "comment_id": 81134299, "body": "Actually the expression is syntactically valid, but will always return an empty sequence."}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 2, "last_activity_date": 1509720768, "last_edit_date": 1509720768, "creation_date": 1509664058, "answer_id": 47085986, "question_id": 47085076, "link": "https://stackoverflow.com/questions/47085076/get-the-value-of-an-elements-attribute/47085986#47085986", "title": "Get the value of an element&#39;s attribute", "body": "<p>I'm assuming that you're using\n<a href=\"https://metacpan.org/pod/XML::LibXML\" rel=\"nofollow noreferrer\"><code>XML::LibXML</code></a>?</p>\n\n<p>It's very important to explain what tools (library, language, operating system) you are using, as well as the errant behaviour you are seeing.</p>\n\n<p>Your <em>\"Please note that the variable <code>$fileLocation</code> here opens the file location for the XML I am working with\"</em> is troubling. It doesn't make much sense (it's a variable and cannot open anything) and the identifier you have chosen implies that it is a path to the XML file. \nBut to be able to call <code>findnodes</code> on it, it must be a DOM object, more specifically an instance of <code>XML::LibXML::Node</code> or a subclass.</p>\n\n<p>Your code should look more like this</p>\n\n<pre><code>use XML::LibXML;\n\nmy $xml_file = '/path/to/file.xml';\n\nmy $dom = XML::LibXML-&gt;load_xml(\n    location =&gt; $xml_file\n);\n\nmy @sections = $dom-&gt;findnodes('//section');\n\nfor my $section ( @sections ) {\n    next unless $section-&gt;hasAttribute('name');\n    say $section-&gt;getAttribute('name');\n}\n</code></pre>\n\n<p>The result of the <code>findnodes</code> method in scalar context is not a single\n<a href=\"https://metacpan.org/pod/XML::LibXML::Node\" rel=\"nofollow noreferrer\"><code>XML::LibXML::Node</code></a>\nobject, but instead an\n<a href=\"https://metacpan.org/pod/XML::LibXML::NodeList\" rel=\"nofollow noreferrer\"><code>XML::LibXML::NodeList</code></a>,\nwhich is overloaded so that it bahaves similarly to a reference to an array</p>\n\n<p>You don't say what errors you are getting, but from your <em>\"Can someone please explain what is wrong with this syntax?\"</em> I imagine that the module is rejecting your XPath expression?</p>\n\n<p>In this statement</p>\n\n<pre><code>my $some_att = $fileLocation-&gt;findnodes(\"//section[/@name]\")\n</code></pre>\n\n<p>the problem is with the <em>predicate</em> <code>[/@name]</code> which, if it were correct, would filter the <code>section</code> elements to include only those that have a <code>name</code> attribute. Because it is a predicate it doesn't need a <em>child</em> axis, and so should be written as <code>//section[@name]</code></p>\n\n<p>But that will only find all <code>section</code> elements that have a <code>name</code> attribute. To select the attributes themselves you need to write <code>//section/@name</code>, something like this</p>\n\n<pre><code> my $section_names = $fileLocation-&gt;findnodes('//section/@name')\n</code></pre>\n\n<p>Then you will have an <code>XML::LibXML::NodeList</code> of\n <a href=\"https://metacpan.org/pod/XML::LibXML::Attr\" rel=\"nofollow noreferrer\"><code>XML::LibXML::Attr</code></a>\nobjects, and you can extract the list of their values using something similar to</p>\n\n<pre><code>my @section_names = map { $_-&gt;value } $section_names-&gt;get_nodelist\n</code></pre>\n\n<p>You may instead prefer to start with a list of all <code>section</code> elements using the XPath expression <code>//section</code>. That would give you a collection of\n <a href=\"https://metacpan.org/pod/XML::LibXML::Element\" rel=\"nofollow noreferrer\"><code>XML::LibXML::Element</code></a>\nobjects, from which you can extract the <code>name</code> element using <code>$elem-&gt;getAttribute('name')</code></p>\n\n<p>Remember that you may work with arrays instead of \n<code>XML::LibXML::NodeList</code> objects if you prefer, by choosing list context instead of scalar context in the call to <code>findnodes</code> as described in\n<strong>mob's</strong> answer</p>\n"}, {"comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1509719152, "post_id": 47092398, "comment_id": 81145800, "body": "<code>XML::LibXML</code>  is just a Perl wrapper for <code>libxml2</code>, which has <a href=\"http://xmlsoft.org/python.html\" rel=\"nofollow noreferrer\">any number of language bindings and wrappers</a>. If you know the library in any language (and it&#39;s hard to get away from if you work with XML data) then the Perl ideas and classes should mirror what you already know pretty well."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1509719574, "post_id": 47092398, "comment_id": 81146080, "body": "Thanks Michael. Of course you&#39;re right. Developing an XSLT engine does wonders for one&#39;s knowledge of XPath syntax! The author&#39;s <i>&quot;Can someone please explain what is wrong with this syntax?&quot;</i> led me to assume that they were seeing a syntax error reported, and I&#39;m not confident enough with my knowledge of XPath to reject that. (By the way, I graduated in Reading, working with Algol 68 on punched cards on an ICL 1904S!)"}], "tags": [], "owner": {"reputation": 137436, "user_id": 415448, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/P2vVZ.png?s=128&g=1", "display_name": "Michael Kay", "link": "https://stackoverflow.com/users/415448/michael-kay"}, "is_accepted": false, "score": 1, "last_activity_date": 1509701576, "creation_date": 1509701576, "answer_id": 47092398, "question_id": 47085076, "link": "https://stackoverflow.com/questions/47085076/get-the-value-of-an-elements-attribute/47092398#47092398", "title": "Get the value of an element&#39;s attribute", "body": "<p>I don't know Perl but I assume that findnodes() is designed to evaluate an XPath expression. Your expression</p>\n\n<pre><code>\"//section[/@name]\"\n</code></pre>\n\n<p>is syntactically correct, but semantically, it's nonsense. (As an aside, I wonder how people come up with such things? I can only imagine you're cutting and pasting from examples that you don't understand, without ever going back to the spec to see what it actually means).</p>\n\n<p>Two main errors here. </p>\n\n<ul>\n<li>Firstly, square brackets represent a predicate or filter: you're\nselecting the sections that satisfy some condition, but your prose\nrequirement (a) says you want to retrieve names (not sections), and\n(b) says nothing about filtering the list.</li>\n<li>Secondly, <code>/@name</code> is void. A '/' at the start of an expression selects the root (document) node, while @name selects an attribute. Document nodes don't have attributes, so this selects nothing.</li>\n</ul>\n\n<p>The expression you want is <code>//section/@name</code>. (What you do with the names once you get them into Perl-space is outside my knowledge.)</p>\n"}], "owner": {"reputation": 23, "user_id": 4187353, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c0eb1c4fca4fc7c33d572d6fc3ac030a?s=128&d=identicon&r=PG&f=1", "display_name": "V15720002000", "link": "https://stackoverflow.com/users/4187353/v15720002000"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 46, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1509720768, "creation_date": 1509658848, "last_edit_date": 1509661363, "question_id": 47085076, "link": "https://stackoverflow.com/questions/47085076/get-the-value-of-an-elements-attribute", "title": "Get the value of an element&#39;s attribute", "body": "<p>I am trying to get the value of the <code>name</code> attribute of any <code>section</code> elements in some XML data.</p>\n\n<pre><code>my $some_att = $fileLocation-&gt;findnodes(\"//section[/@name]\");\n</code></pre>\n\n<p>Can someone please explain what is wrong with this syntax?</p>\n\n<p>Please note that the variable <code>$fileLocation</code> here opens the file location for the XML I am working with.</p>\n"}, {"tags": ["regex", "perl", "regexp-grammars"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1509652525, "post_id": 47083376, "comment_id": 81116425, "body": "I doubt that&#39;s possible, but if you ask Damian directly I am sure we are in for a nice talk at the next Perl Conference. :)"}, {"owner": {"reputation": 117, "user_id": 3144227, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b8bc0dede8c6116ed5b904a2da98abd5?s=128&d=identicon&r=PG&f=1", "display_name": "Stefan_E", "link": "https://stackoverflow.com/users/3144227/stefan-e"}, "edited": false, "score": 0, "creation_date": 1514985600, "post_id": 47083376, "comment_id": 83130239, "body": "Would Autoactions or Parse-time data processing help? Something along the lines where the method called by target would manage the required replacement? Challenge is how to get the un-affected part of the input string to the output without too much clutter."}], "owner": {"reputation": 1602, "user_id": 195663, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/p2mgO.jpg?s=128&g=1", "display_name": "Jonathan Neufeld", "link": "https://stackoverflow.com/users/195663/jonathan-neufeld"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 82, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1509651628, "creation_date": 1509651628, "question_id": 47083376, "link": "https://stackoverflow.com/questions/47083376/how-to-replace-matches-using-regexpgrammars", "title": "How to replace matches using Regexp::Grammars?", "body": "<p>I am using <code>Regexp::Grammars</code> to search and extract information from a complex textual source, but ultimately I want to also make replacements on that source.  Is there a way to accomplish this either directly or indirectly using <code>Regexp::Grammars</code>?</p>\n\n<p>For example, suppose I have the following definition:</p>\n\n<pre><code>use Regexp::Grammars;\nqr {\n    &lt;[element]&gt;*\n\n    &lt;rule: element&gt; \n        &lt;target&gt; | &lt;word&gt; | &lt;bracket&gt;\n\n    &lt;rule: target&gt; \n        &lt;define&gt; \\( (&lt;word&gt;)* \\)\n\n    &lt;token: define&gt;\n        define\n\n    &lt;token: word&gt;\n        \\w+\n\n    &lt;token: bracket&gt;\n        [()]\n}xm\n</code></pre>\n\n<p>How would I replace all <code>&lt;target&gt;</code>s with some replacement that is say a function of the <code>&lt;word&gt;</code> between the brackets?</p>\n"}, {"tags": ["perl", "unicode", "string-literals"], "comments": [{"owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 2, "creation_date": 1509651117, "post_id": 47082999, "comment_id": 81115714, "body": "<code>$x = eval qq{&quot;$x&quot;}</code> ?"}, {"owner": {"reputation": 117, "user_id": 5774863, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/486d6286fe28dd5cf45e10328284e4a4?s=128&d=identicon&r=PG&f=1", "display_name": "Shang Zhang", "link": "https://stackoverflow.com/users/5774863/shang-zhang"}, "reply_to_user": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 0, "creation_date": 1509653331, "post_id": 47082999, "comment_id": 81116844, "body": "This works indeed.  Thx!"}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1509739705, "post_id": 47082999, "comment_id": 81157812, "body": "See also <a href=\"https://stackoverflow.com/q/39992351/2173773\">\\x not working inside the substitution</a>"}], "answers": [{"comments": [{"owner": {"reputation": 117, "user_id": 5774863, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/486d6286fe28dd5cf45e10328284e4a4?s=128&d=identicon&r=PG&f=1", "display_name": "Shang Zhang", "link": "https://stackoverflow.com/users/5774863/shang-zhang"}, "edited": false, "score": 0, "creation_date": 1509653375, "post_id": 47083330, "comment_id": 81116863, "body": "This also works.  Didn&#39;t know about /e flag before.  Thanks."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1509738979, "post_id": 47083330, "comment_id": 81157434, "body": "Probably needs to handle <code>\\\\ </code> too, at the very least."}, {"owner": {"reputation": 170445, "user_id": 149341, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/omfTQ.png?s=128&g=1", "display_name": "duskwuff -inactive-", "link": "https://stackoverflow.com/users/149341/duskwuff-inactive"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1509742297, "post_id": 47083330, "comment_id": 81158940, "body": "@ikegami I mean, depends on what the input actually is. The question only mentioned the <code>\\x{1234}</code> syntax, so\u2026"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1509839629, "post_id": 47083330, "comment_id": 81183649, "body": "Exactly. The question is probably (or even surely) missing something, and therefore so is the answer, so care should be taken."}], "tags": [], "owner": {"reputation": 170445, "user_id": 149341, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/omfTQ.png?s=128&g=1", "display_name": "duskwuff -inactive-", "link": "https://stackoverflow.com/users/149341/duskwuff-inactive"}, "is_accepted": false, "score": 4, "last_activity_date": 1509651451, "creation_date": 1509651451, "answer_id": 47083330, "question_id": 47082999, "link": "https://stackoverflow.com/questions/47082999/how-to-convert-a-literal-string-to-its-represented-unicode-in-perl/47083330#47083330", "title": "How to convert a literal string to its represented unicode in Perl?", "body": "<p>If the only escape format you need to handle is <code>\\x{1234}</code>, then one way of handling this might be to match the escape sequence with a regular expression, then use <code>chr(hex($1))</code> to convert a hexadecimal string to a character:</p>\n\n<pre><code>my $x = 'JPMorgan Chase \\x{0026} Co';\n$x =~ s/\\\\x\\{([0-9a-f]+)\\}/chr(hex($1))/e;\nsay $x; # -&gt; \"JPMorgan Chase &amp; Co\"\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3984, "user_id": 1801086, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ef4c0400ffff14d5e1c16ca3856c09ba?s=128&d=identicon&r=PG", "display_name": "tjd", "link": "https://stackoverflow.com/users/1801086/tjd"}, "is_accepted": false, "score": 2, "last_activity_date": 1509738662, "last_edit_date": 1509738662, "creation_date": 1509652808, "answer_id": 47083678, "question_id": 47082999, "link": "https://stackoverflow.com/questions/47082999/how-to-convert-a-literal-string-to-its-represented-unicode-in-perl/47083678#47083678", "title": "How to convert a literal string to its represented unicode in Perl?", "body": "<p>While duskwuff &amp; mob do a fine job answering your direct question.  (FWIW: mob's <code>$x = eval qq{\"$x\"}</code> has an undeniable elegance to it.)  The real question is why you have Perl character escapes someplace other than in an interpolating string?  If you are getting this string from someplace <em>other</em> than your source code (IO), and a raw unicode encoding is inappropreate, consider a more common encoding for which Perl has readily available modules:</p>\n\n<ul>\n<li>URI encoding: <code>%26</code></li>\n<li>XML encoding: <code>&amp;#x26</code></li>\n<li>JSON encoding: <code>\\u0026</code></li>\n</ul>\n\n<p>...and many others.  Such encodings will make your IPC and data files far more inter-operable with other systems.</p>\n\n<p>... and or course, if these things <em>are</em> in your Perl source, just put 'em in double quotes and let the compiler phase interpolate them.</p>\n"}], "owner": {"reputation": 117, "user_id": 5774863, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/486d6286fe28dd5cf45e10328284e4a4?s=128&d=identicon&r=PG&f=1", "display_name": "Shang Zhang", "link": "https://stackoverflow.com/users/5774863/shang-zhang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 355, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1509738662, "creation_date": 1509650075, "question_id": 47082999, "link": "https://stackoverflow.com/questions/47082999/how-to-convert-a-literal-string-to-its-represented-unicode-in-perl", "title": "How to convert a literal string to its represented unicode in Perl?", "body": "<p>If I have a literal string like</p>\n\n<pre><code>my $x = 'JPMorgan Chase \\x{0026} Co';\n</code></pre>\n\n<p>I would like to convert it to </p>\n\n<pre><code>\"JPMorgan Chase \\x{0026} Co\" \n</code></pre>\n\n<p>which contains a unicode in it.  (Please note the difference between the double and single quotes.)</p>\n\n<p>What is the easiest way to do this?  This is a simplified example.  The actual problem has many such instances. </p>\n"}, {"tags": ["perl", "foreach", "subroutine", "ref"], "comments": [{"owner": {"reputation": 2920, "user_id": 3360140, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/OThx0.jpg?s=128&g=1", "display_name": "Kamrul Khan", "link": "https://stackoverflow.com/users/3360140/kamrul-khan"}, "edited": false, "score": 1, "creation_date": 1509642538, "post_id": 47080912, "comment_id": 81110960, "body": "what does it fail with?"}, {"owner": {"reputation": 3432, "user_id": 604642, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/48daad611ba387f8473b0c1e5792aa3f?s=128&d=identicon&r=PG", "display_name": "shawnhcorey", "link": "https://stackoverflow.com/users/604642/shawnhcorey"}, "edited": false, "score": 0, "creation_date": 1509715097, "post_id": 47080912, "comment_id": 81142924, "body": "It fails because keys are unique. <code>%word_list</code> will count only 1 for each key."}], "answers": [{"comments": [{"owner": {"reputation": 131, "user_id": 7795111, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f6e4a7dd1373e2a9a2e4301661b85497?s=128&d=identicon&r=PG&f=1", "display_name": "chd", "link": "https://stackoverflow.com/users/7795111/chd"}, "edited": false, "score": 0, "creation_date": 1509643143, "post_id": 47081024, "comment_id": 81111344, "body": "Thanks but can&#39;t modify hash_a_file. Dave Cross solution works fine anyway."}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": false, "score": 1, "last_activity_date": 1509642782, "creation_date": 1509642782, "answer_id": 47081024, "question_id": 47080912, "link": "https://stackoverflow.com/questions/47080912/perl-using-subroutine-as-argument-of-a-foreach/47081024#47081024", "title": "perl using subroutine as argument of a foreach", "body": "<p>Return a hashref, so that you can form a valid argument for <code>keys</code> (instead of a list)</p>\n\n<pre><code>sub hash_a_file { return { a =&gt; 1, b =&gt; 2 } }\n\nforeach my $key ( keys %{ hash_a_file() } ) {\n    say $key\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 2, "creation_date": 1509643670, "post_id": 47081036, "comment_id": 81111681, "body": "This answers the question in probably the best way possible, but I think the OP&#39;s original code is much clearer, and no more wasteful. I would guess that <code>hash_a_file</code> builds a hash and then does <code>return %hash</code> which converts it into a list. It is inefficient to do this and then convert it back into another hash, and it would be far better to <code>return \\%hash</code> as in <b>zdim&#39;s</b> answer, which avoids this double conversion."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1509649442, "post_id": 47081036, "comment_id": 81114874, "body": "A better solution (if changing <code>hash_a_file</code> is out of the question) than needlessly creating a hash is to use <code>pairkeys</code> from List::Util."}], "tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": true, "score": 4, "last_activity_date": 1509643718, "last_edit_date": 1509643718, "creation_date": 1509642821, "answer_id": 47081036, "question_id": 47080912, "link": "https://stackoverflow.com/questions/47080912/perl-using-subroutine-as-argument-of-a-foreach/47081036#47081036", "title": "perl using subroutine as argument of a foreach", "body": "<p>The thing is, a subroutine doesn't return a hash. It returns a list. In your original code, it only becomes a hash when you store it in a hash variable.</p>\n\n<p>But there are other ways to create a hash from a list. You can create an anonymous hash and then de-reference it. It's ugly, but it works.</p>\n\n<pre><code># Inner braces create an anonymous hash.\n# Outer braces de-reference that into a \"real\" hash\nforeach my $key ( keys %{ { hash_a_file($_) } } ) {\n    ++$word_list{$key};\n}\n</code></pre>\n\n<p><strong>Update:</strong> To back up Borodin's comment, I should add that if this code was presented to me in a code review, I'd suggest rewriting it to use an explicit hash variable as your original code does.</p>\n"}], "owner": {"reputation": 131, "user_id": 7795111, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f6e4a7dd1373e2a9a2e4301661b85497?s=128&d=identicon&r=PG&f=1", "display_name": "chd", "link": "https://stackoverflow.com/users/7795111/chd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 86, "favorite_count": 0, "accepted_answer_id": 47081036, "answer_count": 2, "score": 1, "last_activity_date": 1509643718, "creation_date": 1509642433, "last_edit_date": 1509642480, "question_id": 47080912, "link": "https://stackoverflow.com/questions/47080912/perl-using-subroutine-as-argument-of-a-foreach", "title": "perl using subroutine as argument of a foreach", "body": "<pre><code>my %number_words = hash_a_file($_);\nforeach my $key ( keys %number_words ) {\n    ++$word_list{$key};\n}\n</code></pre>\n\n<p>This is working but I would like to avoid using the intermediate variable\nlike this</p>\n\n<pre><code>foreach my $key ( keys hash_a_file($_) ) {\n    ++$word_list{$key};\n}\n</code></pre>\n\n<p>I tried to use refs but still failed. Any way to do this ? Thanks !</p>\n"}, {"tags": ["bash", "perl", "awk", "sed"], "answers": [{"tags": [], "owner": {"reputation": 658023, "user_id": 548225, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/dab08478b226280d4a30894c9a7ed719?s=128&d=identicon&r=PG", "display_name": "anubhava", "link": "https://stackoverflow.com/users/548225/anubhava"}, "is_accepted": true, "score": 4, "last_activity_date": 1509641161, "creation_date": 1509641161, "answer_id": 47080514, "question_id": 47080458, "link": "https://stackoverflow.com/questions/47080458/rearrange-values-from-different-columns-using-bash-awk-perl-sed/47080514#47080514", "title": "Rearrange values from different columns using bash / awk / perl / sed", "body": "<p>You can use <code>awk</code> like this:</p>\n\n<pre><code>awk -v OFS='\\t' '$2 &lt; $1{n=$2; $2=$1; $1=n} 1' file\n\n54      56        A\n66      66        B\n4       23        C\n23      37        D\n55      100       E\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 95936, "user_id": 5866580, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/1de2cd722d865edac1575102a48ecc0a?s=128&d=identicon&r=PG&f=1", "display_name": "RavinderSingh13", "link": "https://stackoverflow.com/users/5866580/ravindersingh13"}, "edited": false, "score": 1, "creation_date": 1509682499, "post_id": 47080599, "comment_id": 81126282, "body": "I hardly get an explanation from a down voter for down vote, which really discourages me :("}], "tags": [], "owner": {"reputation": 95936, "user_id": 5866580, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/1de2cd722d865edac1575102a48ecc0a?s=128&d=identicon&r=PG&f=1", "display_name": "RavinderSingh13", "link": "https://stackoverflow.com/users/5866580/ravindersingh13"}, "is_accepted": false, "score": 1, "last_activity_date": 1509641386, "creation_date": 1509641386, "answer_id": 47080599, "question_id": 47080458, "link": "https://stackoverflow.com/questions/47080458/rearrange-values-from-different-columns-using-bash-awk-perl-sed/47080599#47080599", "title": "Rearrange values from different columns using bash / awk / perl / sed", "body": "<p>Following <code>awk</code> may help you.</p>\n\n<pre><code>awk '{printf(\"%s\\t%s\\n\",$1&gt;$2?$2 \"\\t\" $1:$1 \"\\t\" $2,$3)}'   Input_file\n</code></pre>\n\n<p><strong><em>Explanation:</em></strong> Simply using <code>printf</code> to print <code>awk</code>'s in-built command. Then inside it using <code>%s</code> 2 times with a TAB in them then <code>\\n</code> new line at last to print next line on a new line. Now, while printing their respective values, I am using conditional operators <code>?</code> and <code>:</code> so checking condition here if first field is greater than 2nd field then print second field TAB and first field, if NOT then print vice versa of same.</p>\n\n<p>Output will be as follows.</p>\n\n<pre><code>54      56      A\n66      66      B\n4       23      C\n23      37      D\n55      100     E\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 3, "last_activity_date": 1509642063, "creation_date": 1509642063, "answer_id": 47080807, "question_id": 47080458, "link": "https://stackoverflow.com/questions/47080458/rearrange-values-from-different-columns-using-bash-awk-perl-sed/47080807#47080807", "title": "Rearrange values from different columns using bash / awk / perl / sed", "body": "<p>As a Perl command-line program:</p>\n\n<pre><code>perl -a -n -E'say join \"\\t\", sort({ $a &lt;=&gt; $b } @F[0, 1]), $F[2]' file\n</code></pre>\n"}], "owner": {"reputation": 303, "user_id": 8656442, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/af5e32a9e31a7854551204852d084013?s=128&d=identicon&r=PG&f=1", "display_name": "Corend", "link": "https://stackoverflow.com/users/8656442/corend"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 116, "favorite_count": 0, "accepted_answer_id": 47080514, "answer_count": 3, "score": 1, "last_activity_date": 1509642063, "creation_date": 1509640996, "question_id": 47080458, "link": "https://stackoverflow.com/questions/47080458/rearrange-values-from-different-columns-using-bash-awk-perl-sed", "title": "Rearrange values from different columns using bash / awk / perl / sed", "body": "<p>I have a file :</p>\n\n<pre><code>54      56        A\n66      66        B\n23       4        C\n23      37        D\n100     55        E\n</code></pre>\n\n<p>I would like to rearrange it so that colum 1 in always smaller or equal than column 2 :</p>\n\n<pre><code>54      56        A\n66      66        B\n4       23        C\n23      37        D\n55     100        E\n</code></pre>\n\n<p>I am interested in any short solution using <code>bash</code> / <code>perl</code> / <code>sed</code> / <code>awk</code>.</p>\n\n<p>I made something in python with a <code>for</code> loop, checking for each line if col1 > col2, then writing a new file, but I have no clue how to do it more simply.</p>\n"}, {"tags": ["perl", "optimization", "match"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1509638813, "post_id": 47079729, "comment_id": 81108467, "body": "You have not asked a question. What do you need help with? Is something not working?"}, {"owner": {"reputation": 21, "user_id": 2888306, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/53cdea66980d94485b25f22d16f954eb?s=128&d=identicon&r=PG&f=1", "display_name": "user2888306", "link": "https://stackoverflow.com/users/2888306/user2888306"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1509639070, "post_id": 47079729, "comment_id": 81108641, "body": "sorry, made edits"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 2, "creation_date": 1509639262, "post_id": 47079729, "comment_id": 81108771, "body": "Not related to the problem: There is a <code>goto</code> in your code. Please don&#39;t do that. Ever. You want <code>last</code> to break out of the loop. For several loops, put a label before the outer loop: <code>OUTER: for () { for () { last OUTER } }</code>."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 2, "creation_date": 1509639349, "post_id": 47079729, "comment_id": 81108828, "body": "How many lines do the files each have? How much memory does your computer have? It might be better to process the SNP file line by line."}, {"owner": {"reputation": 21, "user_id": 2888306, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/53cdea66980d94485b25f22d16f954eb?s=128&d=identicon&r=PG&f=1", "display_name": "user2888306", "link": "https://stackoverflow.com/users/2888306/user2888306"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1509639497, "post_id": 47079729, "comment_id": 81108921, "body": "The SNP file had ~50000 lines and the gene coordinate file has about ~66000. Memory is not an issue"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1509639736, "post_id": 47079729, "comment_id": 81109080, "body": "You want to find a single match? Nothing else?"}, {"owner": {"reputation": 21, "user_id": 2888306, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/53cdea66980d94485b25f22d16f954eb?s=128&d=identicon&r=PG&f=1", "display_name": "user2888306", "link": "https://stackoverflow.com/users/2888306/user2888306"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1509643153, "post_id": 47079729, "comment_id": 81111356, "body": "Ya just the match. Possible that one gene can have multiple SNPs. I found the bug in the script earlier. Sorry for all the trouble. But if you have a better option, happy to take a look. Thanks!"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1509644364, "post_id": 47079729, "comment_id": 81112064, "body": "@user2888306: <code>while ( &lt;I1&gt; ) { push @snp, $_; }</code> is usually written <code>@snp = &lt;I1&gt;</code>"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1509644491, "post_id": 47079729, "comment_id": 81112144, "body": "@user2888306: <code>for ( my $i = 0; $i &lt;= $#snp; $i++ ) { ... }</code> is usually written <code>for my $i ( 0 .. $#snp ) { ... }</code>"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1509645603, "post_id": 47079729, "comment_id": 81112766, "body": "@user2888306: You should avoid using HTML markup (such as <code>&lt;br&gt;</code>) in your posts. Stack Overflow uses <a href=\"https://daringfireball.net/projects/markdown/syntax\" rel=\"nofollow noreferrer\"><i>John Gruber&#39;s</i> <b><i>Markdown</i></b> system</a> which is very much easier to use."}], "answers": [{"tags": [], "owner": {"reputation": 21, "user_id": 2888306, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/53cdea66980d94485b25f22d16f954eb?s=128&d=identicon&r=PG&f=1", "display_name": "user2888306", "link": "https://stackoverflow.com/users/2888306/user2888306"}, "is_accepted": false, "score": -1, "last_activity_date": 1509642938, "creation_date": 1509642938, "answer_id": 47081072, "question_id": 47079729, "link": "https://stackoverflow.com/questions/47079729/mapping-snp-coordinates-to-gene-coordinates-is-too-slow/47081072#47081072", "title": "Mapping SNP coordinates to gene coordinates is too slow", "body": "<p>Here is a working script, the one posted above had bugs</p>\n\n<pre><code>use strict;\n\nmy $i1=$ARGV[0];            # SNP \nmy $i2=$ARGV[1];            # gene coordinate\n\nopen(I1,$i1);\nopen(I2,$i2);\n\nmy @snp=();\nmy @coor=();\n\nwhile(&lt;I1&gt;)\n{\npush(@snp,$_);  \n}\nwhile(&lt;I2&gt;)\n{\npush(@coor,$_); \n}\n\nfor(my $i=0;$i&lt;=$#snp;$i++)\n{\nmy @snp_line = split \"\\t\",$snp[$i];\n\nfor(my $j=0;$j&lt;=$#coor;$j++)\n{\n    my @coor_line = split \"\\t\",$coor[$j];\n\n    if ($snp_line[0] eq $coor_line[0])\n    {   \n        if ($snp_line[1] &gt;= $coor_line[1] &amp;&amp; $snp_line[1] &lt;= $coor_line[2])\n        {\n            print \"$snp_line[0]\\t$snp_line[1]\\t$coor_line[3]\\n\";                \n        }\n\n    }   \n\n}\n\n}\n</code></pre>\n\n<p>This one does the job.</p>\n"}, {"comments": [{"owner": {"reputation": 21, "user_id": 2888306, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/53cdea66980d94485b25f22d16f954eb?s=128&d=identicon&r=PG&f=1", "display_name": "user2888306", "link": "https://stackoverflow.com/users/2888306/user2888306"}, "edited": false, "score": 0, "creation_date": 1509647525, "post_id": 47081329, "comment_id": 81113855, "body": "Much faster. Thank you"}], "tags": [], "owner": {"reputation": 91305, "user_id": 19410, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/175f1d55c73ce5cb1d071dc4d0f1a333?s=128&d=identicon&r=PG", "display_name": "Alex Reynolds", "link": "https://stackoverflow.com/users/19410/alex-reynolds"}, "is_accepted": true, "score": -1, "last_activity_date": 1509659007, "last_edit_date": 1509659007, "creation_date": 1509643865, "answer_id": 47081329, "question_id": 47079729, "link": "https://stackoverflow.com/questions/47079729/mapping-snp-coordinates-to-gene-coordinates-is-too-slow/47081329#47081329", "title": "Mapping SNP coordinates to gene coordinates is too slow", "body": "<p>You could work with these files when reformatted as UCSC BED format, using a toolkit like <a href=\"https://github.com/bedops/bedops\" rel=\"nofollow noreferrer\">BEDOPS</a> that does efficient set operations on sorted BED files.</p>\n\n<p>Convert your first file of SNPs to a sorted BED file:</p>\n\n<pre><code>$ awk -v OFS=\"\\t\" '{ print $1, $2, ($2+1); }' snps.txt | sort-bed - &gt; snps.bed\n</code></pre>\n\n<p>Sort the genes (\"file 2\"):</p>\n\n<pre><code>$ sort-bed genes.unsorted.txt &gt; genes.bed\n</code></pre>\n\n<p>Map SNPs to genes:</p>\n\n<pre><code>$ bedmap --echo --echo-map-id-uniq --delim '\\t' snps.bed genes.bed &gt; answer.bed\n</code></pre>\n\n<p>If you need to, you can strip the end position of the SNP from the answer:</p>\n\n<pre><code>$ cut -f1,2,4 answer.bed &gt; answer.txt\n</code></pre>\n\n<p>These tools will run very fast, usually within a few moments. </p>\n\n<p>I would not use Perl or Python to do these kinds of set operations, unless I was doing some kind of academic exercise. </p>\n"}], "owner": {"reputation": 21, "user_id": 2888306, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/53cdea66980d94485b25f22d16f954eb?s=128&d=identicon&r=PG&f=1", "display_name": "user2888306", "link": "https://stackoverflow.com/users/2888306/user2888306"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 81, "favorite_count": 0, "accepted_answer_id": 47081329, "answer_count": 2, "score": 0, "last_activity_date": 1509659007, "creation_date": 1509638622, "last_edit_date": 1509645234, "question_id": 47079729, "link": "https://stackoverflow.com/questions/47079729/mapping-snp-coordinates-to-gene-coordinates-is-too-slow", "title": "Mapping SNP coordinates to gene coordinates is too slow", "body": "<p>I have two tab-delimited files like these</p>\n\n<p><strong>File 1</strong> (these are <em>Single Nucleotide Polymorphism</em> (SNP) positions)</p>\n\n<pre><code>Chr1 26690\nChr1 33667\nChr1 75049\n.\n.\n\nChr2 12342\nChr2 32642\nChr2 424421\n.\n.\n</code></pre>\n\n<p><strong>File 2</strong> (these are gene start and end coordinates)</p>\n\n<pre><code>Chr1    2903    10817   LOC_Os01g01010\nChr1    2984    10562   LOC_Os01g01010\nChr1    11218   12435   LOC_Os01g01019\nChr1    12648   15915   LOC_Os01g01030\nChr1    16292   18304   LOC_Os01g01040\nChr1    16292   20323   LOC_Os01g01040\nChr1    16321   20323   LOC_Os01g01040\nChr1    16321   20323   LOC_Os01g01040\nChr1    22841   26971   LOC_Os01g01050\nChr1    22841   26971   LOC_Os01g01050\n.\n.\n</code></pre>\n\n<p>What I want is to match SNPs in file 1 to genes in file 2. The script should match the string in the first column of the files, and if they match it should then find which gene in the file 2 contains the corresponding SNP and return the locus ID from the fourth column of File 2.</p>\n\n<p>Here's the script I have written</p>\n\n<pre><code>use strict;\n\nmy $i1 = $ARGV[0];            # SNP \nmy $i2 = $ARGV[1];            # gene coordinate\n\nopen(I1, $i1);\nopen(I2, $i2);\n\nmy @snp  = ();\nmy @coor = ();\n\nwhile( &lt;I1&gt; ) {\n  push(@snp, $_);    \n}\n\nwhile ( &lt;I2&gt; ) {\n  push(@coor, $_);   \n}\n\nfor ( my $i = 0; $i &lt;= $#snp; $i++ ) {\n\n    my @snp_line = split \"\\t\", $snp[$i];\n\n    for ( my $j = 0; $j &lt;= $#coor; $j++ ) {\n\n        my @coor_line = split \"\\t\", $coor[$i];   \n\n        if ( $snp_line[0] eq $coor_line[0] ) {\n\n            if ( $snp_line[1] &gt;= $coor_line[1] &amp;&amp; $snp_line[1] &lt;= $coor_line[2] ) {\n              print \"$snp_line[0]\\t$snp_line[1]\\t$coor_line[3]\\n\";\n              goto a;\n            }\n        }   \n    }\na: \n}\n</code></pre>\n\n<p>The problem is that obviously this is not the best way to do it as it iterates over all the ~60,000 lines in file 2 for each SNP in line 1. Also, it ran overnight and did not go past <code>Chr1</code>; we have upto <code>Chr12</code>.</p>\n"}, {"tags": ["perl", "methods"], "comments": [{"owner": {"reputation": 13167, "user_id": 546205, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/5d7dd187ae1f4400664cbc0e66c8a2ce?s=128&d=identicon&r=PG", "display_name": "Miguel Prz", "link": "https://stackoverflow.com/users/546205/miguel-prz"}, "edited": false, "score": 2, "creation_date": 1509634326, "post_id": 47077879, "comment_id": 81105055, "body": "just wrap it around sub: <code>sub { $queue-&gt;enqueue; }</code>"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1509635205, "post_id": 47077879, "comment_id": 81105721, "body": "There&#39;s also the <code>curry</code> module on CPAN."}], "answers": [{"comments": [{"owner": {"reputation": 43, "user_id": 3220003, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/abf227f269df55f80284b40b918ee443?s=128&d=identicon&r=PG&f=1", "display_name": "schleprock", "link": "https://stackoverflow.com/users/3220003/schleprock"}, "edited": false, "score": 0, "creation_date": 1509645204, "post_id": 47078614, "comment_id": 81112549, "body": "just to add clarity, i did the following in the MyModules package: MyModules::populateQueue(sub {$queue-&gt;enqueue(@_)}); which works."}], "tags": [], "owner": {"reputation": 54872, "user_id": 1521179, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/MH7pk.png?s=128&g=1", "display_name": "amon", "link": "https://stackoverflow.com/users/1521179/amon"}, "is_accepted": true, "score": 6, "last_activity_date": 1509635432, "creation_date": 1509635432, "answer_id": 47078614, "question_id": 47077879, "link": "https://stackoverflow.com/questions/47077879/perl-pass-object-method-reference-as-parameter-to-function/47078614#47078614", "title": "perl pass object method reference as parameter to function", "body": "<p>Perl doesn't have a concept of a bound method reference. <code>my $enqueue = $object-&gt;can('method')</code> will return a code ref to a method if it exists, but the code ref isn't bound to that particular object \u2013 you still need to pass it as the first argument (<code>$queue-&gt;$enqueue($item)</code> or <code>$enqueue-&gt;($queue, $item)</code>).</p>\n\n<p>To pass a bound method, the correct solution is to use an anonymous sub that wraps the method call:</p>\n\n<pre><code>populate_queue(sub { $queue-&gt;enqueue(@_) });\n</code></pre>\n"}], "owner": {"reputation": 43, "user_id": 3220003, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/abf227f269df55f80284b40b918ee443?s=128&d=identicon&r=PG&f=1", "display_name": "schleprock", "link": "https://stackoverflow.com/users/3220003/schleprock"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 451, "favorite_count": 0, "accepted_answer_id": 47078614, "answer_count": 1, "score": 2, "last_activity_date": 1509635432, "creation_date": 1509633303, "question_id": 47077879, "link": "https://stackoverflow.com/questions/47077879/perl-pass-object-method-reference-as-parameter-to-function", "title": "perl pass object method reference as parameter to function", "body": "<p>i'm trying to do something like this:</p>\n\n<p>-- source file 1</p>\n\n<pre><code>my $queue = Thread::Queue-&gt;new();\nMyModules::populateQueue(&lt;pass $queue-&gt;enqueue method reference);\n...\n</code></pre>\n\n<p>-- package file</p>\n\n<pre><code>package MyModules\n\nsub populateQueue {\n  my $enqueue = $_[0];\n  my $item = &lt;find item to add to queue&gt;;\n  $enqueue-&gt;($item);\n</code></pre>\n\n<p>...</p>\n\n<p>first, i'm not able to add \"bless\" to Thread::Queue</p>\n\n<p>i've tried a couple of suggestions i found in stackoverflow:</p>\n\n<pre><code>my $enqueueRef = $queue-&gt;can('enqueue');\nMyModules::populateQueue(\\&amp;enqueueRef); &lt;--- fails in the package at line \n</code></pre>\n\n<p>$enqueue->($item) with undefined subroutine</p>\n\n<pre><code>MyModules::populateQueue(\\&amp;queue-&gt;enqueue) &lt;-- same failure as above\n</code></pre>\n\n<p>any idea how to pass a method of an object as a parameter to a function that can then be used in the function?</p>\n"}, {"tags": ["json", "perl", "introspection", "moose"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1509632564, "post_id": 47077339, "comment_id": 81103665, "body": "The JSON module represents <i>true</i> and <i>false</i> as scalar references <code>\\1</code> and <code>\\0</code>. But it doesn&#39;t know if a <code>1</code> or a <code>2</code> is a boolean."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1509632661, "post_id": 47077339, "comment_id": 81103742, "body": "You need to call <code>$json_encoder-&gt;encode</code>. It&#39;s an object."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1509632812, "post_id": 47077339, "comment_id": 81103851, "body": "Also, that&#39;s not what the <i>isa</i> in Moose does. It does not really care about the <i>type</i> as such, as there are no types in Perl (or Moose). The thing you put in <i>isa</i> is only used for runtime-checking things you put into an attribute."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1509632898, "post_id": 47077339, "comment_id": 81103922, "body": "And you should not meddle with the internals of the underlying <code>$self</code> directly. In fact, your <code>for</code> loop will only iterate once, as <code>$self</code> is a hash reference. So you have a list of one element. That element is <code>$self</code>. It will be assigned to <code>$member</code>, and then you&#39;re done. But there&#39;s also the syntax error, because <code>for</code> blocks cannot have an <code>else</code> block. I think you need to rethink what you are trying to accomplish."}, {"owner": {"reputation": 115, "user_id": 2678389, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4b07ba9d827cc3783106c5b0829c03bb?s=128&d=identicon&r=PG", "display_name": "ricoflow", "link": "https://stackoverflow.com/users/2678389/ricoflow"}, "edited": false, "score": 0, "creation_date": 1509633254, "post_id": 47077339, "comment_id": 81104199, "body": "Thanks simbabque .  I have made corrections to syntax errors you mentioned that I overlooked."}], "answers": [{"tags": [], "owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "is_accepted": true, "score": 5, "last_activity_date": 1509633272, "creation_date": 1509633272, "answer_id": 47077862, "question_id": 47077339, "link": "https://stackoverflow.com/questions/47077339/determine-the-moose-type-for-providing-conversion-to-json/47077862#47077862", "title": "Determine the Moose Type for providing conversion to JSON", "body": "<p>Here's one way to do it:</p>\n\n<pre><code>package MyClass;\nuse Moose;\n\nhas 'IntegerMember' =&gt; (\n    is =&gt; 'rw',\n    isa =&gt; 'Int'\n);\n\nhas 'BooleanMember' =&gt; (\n    is =&gt; 'rw',\n    isa =&gt; 'Bool'\n);\n\nsub TO_JSON {\n    my $self = shift;\n    my $meta = $self-&gt;meta;\n    my $result = {};\n    for my $attr ($meta-&gt;get_all_attributes) {\n        my $name = $attr-&gt;name;\n        my $value = $attr-&gt;get_value($self);\n        my $type = $attr-&gt;type_constraint;\n        if ($type &amp;&amp; $type-&gt;equals('Bool')) {\n            $value = $value ? \\1 : \\ 0;\n        }\n        $result-&gt;{$name} = $value;\n    }\n    return $result;\n}\n\n1\n</code></pre>\n\n<p>We use the <a href=\"https://metacpan.org/pod/Moose::Meta::Class\" rel=\"noreferrer\">metaclass object</a> (accessible via <code>-&gt;meta</code>) to introspect the class and get a list of all attributes (in the form of <a href=\"https://metacpan.org/pod/Moose::Meta::Attribute\" rel=\"noreferrer\">meta-attribute objects</a>).</p>\n\n<p>For each attribute, we get the name, current value, and <a href=\"https://metacpan.org/pod/Moose::Meta::TypeConstraint\" rel=\"noreferrer\">type constraint</a> (if any). If the type is <code>Bool</code>, we convert the value to either <code>\\1</code> or <code>\\0</code>. The JSON module understands these values and converts them to <code>true</code> or <code>false</code>.</p>\n\n<p>And a test program:</p>\n\n<pre><code>use strict;\nuse warnings;\nuse JSON::MaybeXS;\nuse MyClass;\n\nmy $object_to_encode = MyClass-&gt;new ( \n    IntegerMember =&gt; 10,\n    BooleanMember =&gt; 1\n);\nmy $json_encoder = JSON-&gt;new-&gt;convert_blessed;\nmy $json_data = $json_encoder-&gt;encode( $object_to_encode );\n\nprint \"Result: $json_data\\n\";\n</code></pre>\n\n<p>Output:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>Result: {\"IntegerMember\":10,\"BooleanMember\":true}\n</code></pre>\n"}], "owner": {"reputation": 115, "user_id": 2678389, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4b07ba9d827cc3783106c5b0829c03bb?s=128&d=identicon&r=PG", "display_name": "ricoflow", "link": "https://stackoverflow.com/users/2678389/ricoflow"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 190, "favorite_count": 0, "accepted_answer_id": 47077862, "answer_count": 1, "score": 2, "last_activity_date": 1509634057, "creation_date": 1509631771, "last_edit_date": 1509634057, "question_id": 47077339, "link": "https://stackoverflow.com/questions/47077339/determine-the-moose-type-for-providing-conversion-to-json", "title": "Determine the Moose Type for providing conversion to JSON", "body": "<p>I have a class, MyClass:</p>\n\n<pre><code>package MyClass;\nuse Moose;\n\nhas 'IntegerMember' =&gt; (\n    is =&gt; 'rw',\n    isa =&gt; 'Int'\n);\n\nhas 'BooleanMember' =&gt; (\n    is =&gt; 'rw',\n    isa =&gt; 'Bool'\n);\n\nsub TO_JSON {\n    my $self = shift;\n    return { % { $self } };\n}\n</code></pre>\n\n<p>Currently when I instantiate MyClass and pass the new object to the json_encoder I get a JSON string returned as expected.  I was hoping that the perl booleans ( 1,0 ) would be converted to ( true, false ) but that is not how the JSON module is designed:  </p>\n\n<pre><code>use JSON;\nuse MyClass;\n\nmy $object_to_encode = MyClass-&gt;new ( \n    IntegerMember =&gt; 10,\n    BooleanMember =&gt; 1\n);\nmy $json_encoder = JSON-&gt;new-&gt;convert_blessed;\nmy $json_data = $json_encoder-&gt;encode( $object_to_encode );\n</code></pre>\n\n<p>In MyClass, I want to improve my TO_JSON subroutine to provide a conversion of any Moose 'Bool' member from ( 1 or 0 ) to ( true or false ):</p>\n\n<pre><code>sub TO_JSON {\n    my $self = shift;\n    for my $member ( %$self ) {\n        if {\n            # Convert '1' to 'true' if Moose Type is 'Bool'\n        } else {\n            # Keep the member as is\n        }\n    }\n}\n</code></pre>\n\n<p><strong>How can I determine the Moose Type</strong> as I iterate through MyClass' members so I can provide a mechanism for the conversion?</p>\n"}, {"tags": ["html", "perl", "email"], "comments": [{"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1509639759, "post_id": 47076359, "comment_id": 81109094, "body": "I&#39;ve tidied the indentation in your code. You&#39;re very welcome, but please do it yourself in future. Clear indentation is an important tool to help people (including yourself!) to understand your code. If you&#39;re asking a group of strangers to read your code, it&#39;s only polite to make it as easier to understand as possible."}], "answers": [{"tags": [], "owner": {"reputation": 793701, "user_id": 19068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d2d3229ed1961d2bd81853242493247?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/19068/quentin"}, "is_accepted": true, "score": 3, "last_activity_date": 1509630145, "last_edit_date": 1509630145, "creation_date": 1509629034, "answer_id": 47076449, "question_id": 47076359, "link": "https://stackoverflow.com/questions/47076359/formatting-mail-body-sent-from-perl-script-to-include-lines-and-spaces/47076449#47076449", "title": "Formatting mail body sent from Perl script to include lines and spaces", "body": "<p>You've said:</p>\n\n<blockquote>\n<pre><code>\"content-type\" =&gt; \"text/html\"\n</code></pre>\n</blockquote>\n\n<p>This means you are writing HTML (or at least telling the email client that you are).</p>\n\n<p>If you want to send plain text and format it using literal whitespace, then don't claim to send HTML!</p>\n\n<pre><code> \"content-type\" =&gt; \"text/plain\"\n</code></pre>\n\n<p>If you want to send HTML, then write HTML which has the formatting you want (e.g. use <code>&lt;p&gt;...&lt;/p&gt;</code> to indicate paragraphs, and <code>style=\"text-indent: 1em;\"</code> to indent the first line of a block).</p>\n"}, {"tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 0, "last_activity_date": 1509640335, "last_edit_date": 1509640335, "creation_date": 1509639901, "answer_id": 47080125, "question_id": 47076359, "link": "https://stackoverflow.com/questions/47076359/formatting-mail-body-sent-from-perl-script-to-include-lines-and-spaces/47080125#47080125", "title": "Formatting mail body sent from Perl script to include lines and spaces", "body": "<p>If you want to send HTML (as your <code>content-type</code> implies) then you need to use HTML tags (<code>&lt;br&gt;</code>, <code>&lt;p&gt;...&lt;/p&gt;</code>, etc) to format your text.</p>\n\n<p>If you want to use newlines to format your text, then you need to change your <code>content-type</code> to <code>text/plain</code>.</p>\n\n<p>A few other suggestions:</p>\n\n<ul>\n<li>I wouldn't recommend MIME::Lite. These days, you should use something from the Email::* namespace - perhaps <a href=\"https://metacpan.org/pod/Email::Sender\" rel=\"nofollow noreferrer\">Email::Sender</a> or <a href=\"https://metacpan.org/pod/Email::Stuffer\" rel=\"nofollow noreferrer\">Email::Stuffer</a> (I think I mentioned this yesterday).</li>\n<li>You should <code>chomp()</code> <code>$recipients</code> before splitting it into <code>@recipients</code>.</li>\n<li>You use <code>@recipients</code> inside <code>sendmail()</code>, but you don't pass the array to the subroutine. It's bad practice to use global variables within a subroutine - it renders your subroutine less portable and harder to maintain.</li>\n<li>MIME::Lite expects multiple recipients in a comma-separated string. So splitting <code>$recipients</code> into <code>@recipients</code> is pointless.</li>\n</ul>\n"}], "owner": {"reputation": 85, "user_id": 7854056, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d75dfefc367145352edc4341c08a4025?s=128&d=identicon&r=PG&f=1", "display_name": "emma", "link": "https://stackoverflow.com/users/7854056/emma"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 800, "favorite_count": 1, "accepted_answer_id": 47076449, "answer_count": 2, "score": 0, "last_activity_date": 1509640335, "creation_date": 1509628744, "last_edit_date": 1509639657, "question_id": 47076359, "link": "https://stackoverflow.com/questions/47076359/formatting-mail-body-sent-from-perl-script-to-include-lines-and-spaces", "title": "Formatting mail body sent from Perl script to include lines and spaces", "body": "<p>I need to send an mail through my perl script:</p>\n\n<pre><code>use MIME::Lite;\n\nGetOptions(\n    'mail|m:s' =&gt;\\$recipients\n)\nmy @recipients = split(/,/, $recipients);\n\nsub sendmail {\n    chomp @recipients;\n    $to = \"@recipients\";\n    $from = 'xyz@gmail.com';\n    $subject = 'Output';\n\n    $msg = MIME::Lite-&gt;new(\n        From     =&gt; $from,\n        To       =&gt; $to,\n        Subject  =&gt; $subject,\n        Data     =&gt; $mailbody\n    );\n\n    $msg-&gt;attr(\"content-type\" =&gt; \"text/html\");\n    $msg-&gt;send;\n    print \"Email Sent Successfully\\n\";\n}\n</code></pre>\n\n<p>Here, I am appending output to mailbody like:</p>\n\n<pre><code>mailbody.=qq(Welcome\\n); \n</code></pre>\n\n<p>which are statements containing output which has to be emailed.</p>\n\n<p>How can I format this output to include additional lines and/or spaces? I think <code>\\n</code> or even lots of spaces are also not accepted by <strong>mailbody.=qq(Welcome\\n);</strong>, which results in a single line of content.</p>\n"}, {"tags": ["multithreading", "perl", "memory-management", "scripting", "threadpool"], "comments": [{"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1509623546, "post_id": 47074511, "comment_id": 81097373, "body": "We at least need to know what other libraries (with versions and perl version) you&#39;re using. But without a reproducible piece of code, we can&#39;t reliably answer."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 2, "creation_date": 1509629219, "post_id": 47074511, "comment_id": 81101261, "body": "Your screenshot mentions <code>Net::SSH2</code>: <a href=\"http://www.perlmonks.org/?node_id=936201\" rel=\"nofollow noreferrer\">About Net::SSH2 thread safety</a>"}], "answers": [{"comments": [{"owner": {"reputation": 366, "user_id": 4488775, "user_type": "registered", "accept_rate": 64, "profile_image": "https://lh6.googleusercontent.com/-c7dUxZESZzs/AAAAAAAAAAI/AAAAAAAAAGI/OxEft3Nihy4/photo.jpg?sz=128", "display_name": "Bala Krishnan", "link": "https://stackoverflow.com/users/4488775/bala-krishnan"}, "edited": false, "score": 0, "creation_date": 1509624686, "post_id": 47074653, "comment_id": 81098134, "body": "Thank you. I have added all the packages and their version info that I am using to my question. I haven&#39;t used any of the packages that you have mentioned in your answer. And you are right that this error will explode very occasionally. I&#39;m really worried that what causes the issue!"}, {"owner": {"reputation": 366, "user_id": 4488775, "user_type": "registered", "accept_rate": 64, "profile_image": "https://lh6.googleusercontent.com/-c7dUxZESZzs/AAAAAAAAAAI/AAAAAAAAAGI/OxEft3Nihy4/photo.jpg?sz=128", "display_name": "Bala Krishnan", "link": "https://stackoverflow.com/users/4488775/bala-krishnan"}, "edited": false, "score": 0, "creation_date": 1509625659, "post_id": 47074653, "comment_id": 81098837, "body": "Were you able to conclude anything?"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "reply_to_user": {"reputation": 366, "user_id": 4488775, "user_type": "registered", "accept_rate": 64, "profile_image": "https://lh6.googleusercontent.com/-c7dUxZESZzs/AAAAAAAAAAI/AAAAAAAAAGI/OxEft3Nihy4/photo.jpg?sz=128", "display_name": "Bala Krishnan", "link": "https://stackoverflow.com/users/4488775/bala-krishnan"}, "edited": false, "score": 1, "creation_date": 1509629892, "post_id": 47074653, "comment_id": 81101744, "body": "From the module list, less than the screenshot of the error that indicates it&#39;s <code>libssh</code> that you&#39;re having problems with. And that <code>Net::Netconf::Manager</code> pulls in <code>Net::SSH2</code> as part of <code>Net::Netconf::Access::ssh</code>, which as documented caveats regarding thread safety. (Any module that has <i>no</i> mention of thread safety, is unwise to assume is thread safe - <code>Net::Netconf::Manager</code> falls into this category. )"}, {"owner": {"reputation": 366, "user_id": 4488775, "user_type": "registered", "accept_rate": 64, "profile_image": "https://lh6.googleusercontent.com/-c7dUxZESZzs/AAAAAAAAAAI/AAAAAAAAAGI/OxEft3Nihy4/photo.jpg?sz=128", "display_name": "Bala Krishnan", "link": "https://stackoverflow.com/users/4488775/bala-krishnan"}, "edited": false, "score": 0, "creation_date": 1509639548, "post_id": 47074653, "comment_id": 81108956, "body": "Thank you very much! I&#39;m testing the isolation of the Net::Netconf::Manager module, but I&#39;m not getting it right :(. My thread calls a subroutine with parameters. I am trying to put the lines you posted above just below the parameter assignment in the subroutine, but its not working as expected. Can you please help?"}, {"owner": {"reputation": 366, "user_id": 4488775, "user_type": "registered", "accept_rate": 64, "profile_image": "https://lh6.googleusercontent.com/-c7dUxZESZzs/AAAAAAAAAAI/AAAAAAAAAGI/OxEft3Nihy4/photo.jpg?sz=128", "display_name": "Bala Krishnan", "link": "https://stackoverflow.com/users/4488775/bala-krishnan"}, "edited": false, "score": 0, "creation_date": 1509704725, "post_id": 47074653, "comment_id": 81136332, "body": "Are you available to answer? Thanks."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "reply_to_user": {"reputation": 366, "user_id": 4488775, "user_type": "registered", "accept_rate": 64, "profile_image": "https://lh6.googleusercontent.com/-c7dUxZESZzs/AAAAAAAAAAI/AAAAAAAAAGI/OxEft3Nihy4/photo.jpg?sz=128", "display_name": "Bala Krishnan", "link": "https://stackoverflow.com/users/4488775/bala-krishnan"}, "edited": false, "score": 0, "creation_date": 1509722320, "post_id": 47074653, "comment_id": 81147911, "body": "Ask a new question. Code will probably be needed."}, {"owner": {"reputation": 366, "user_id": 4488775, "user_type": "registered", "accept_rate": 64, "profile_image": "https://lh6.googleusercontent.com/-c7dUxZESZzs/AAAAAAAAAAI/AAAAAAAAAGI/OxEft3Nihy4/photo.jpg?sz=128", "display_name": "Bala Krishnan", "link": "https://stackoverflow.com/users/4488775/bala-krishnan"}, "edited": false, "score": 0, "creation_date": 1509874956, "post_id": 47074653, "comment_id": 81189971, "body": "<a href=\"https://stackoverflow.com/questions/47092975/perl-how-to-make-a-library-specific-to-individual-threads/47119568#47119568\" title=\"perl how to make a library specific to individual threads\">stackoverflow.com/questions/47092975/&hellip;</a>"}], "tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": true, "score": 5, "last_activity_date": 1509629809, "last_edit_date": 1509629809, "creation_date": 1509623666, "answer_id": 47074653, "question_id": 47074511, "link": "https://stackoverflow.com/questions/47074511/perl-multithreading-script-prints-memory-map-and-backtrace/47074653#47074653", "title": "Perl - Multithreading script prints memory map and backtrace", "body": "<p>To give you a firm answer, we need something we can run and troubleshoot. Otherwise the error is not reproducible.</p>\n\n<p>Having said that - this looks like something similar to what I have encountered before with certain modules not being thread safe - they'll often run fine, and then very occasionally explode in your face. </p>\n\n<p>E.g. <a href=\"https://rt.cpan.org/Public/Bug/Display.html?id=41007\" rel=\"nofollow noreferrer\">Crypt::SSLeay</a> back in 2008. <a href=\"http://search.cpan.org/~mikem/Net-SSLeay-1.82/lib/Net/SSLeay.pod#Using_Net::SSLeay_in_multi-threaded_applications\" rel=\"nofollow noreferrer\">Net::SSLeay</a> prior to 1.4.2</p>\n\n<p>The general workaround is to <em>stop</em> loading the culprits at compile time with <code>use</code> - because then the same state is inherited by all threads - and instead <em>within</em> the thread, load them at runtime with <code>require</code> and <code>import</code>. By doing this, you're isolating them - your threads will take <em>slightly</em> longer to start, but you shouldn't be spamming threads anyway in perl. </p>\n\n<p>Or use a different module that is thread safe. </p>\n\n<p>With your update and screenshot - <code>Net::SSH2</code> is mentioned - and that implies one of your other modules is pulling that in. </p>\n\n<p>However <a href=\"http://www.perlmonks.org/?node_id=936201\" rel=\"nofollow noreferrer\">Net::SSH thread safey</a> indicates that <a href=\"https://www.libssh2.org/\" rel=\"nofollow noreferrer\">libssh</a> might have some constraints on thread safety:</p>\n\n<blockquote>\n  <p>Thread-safe: just don't share handles simultaneously</p>\n</blockquote>\n\n<p>You don't explicitly mention using it, but it looks like it's being pulled in by another module. At a guess, that'll be <code>Net::Netconf::Manager</code>. </p>\n\n<p>And as a second further guess - it might well be doing the 'share handles' because it doesn't realise it's being run in a thread. </p>\n\n<p>So this module is the one I'd suggest isolating within the threads:</p>\n\n<pre><code>require 'Net::NetConf::Manager';\nNet::NetConf::Manager -&gt; import; \n</code></pre>\n\n<p>And do the instantiation within-thread. </p>\n\n<p>As you're using a worker-threads model, this should be minimal overhead, and will mean that you're not hitting this problem.</p>\n\n<p>But more generally - it's unwise to assume modules are thread safe unless they explicitly say they are. The major 'tripping' points are usually whenever any sort of resource sharing can be assumed/implied by the module, such as network sockets, file handles, database connections etc. Often a socket is created at instantiation (e.g. the point where you pass username/password) and having two threads trying to drive a socket concurrently is a potential race condition. </p>\n"}], "owner": {"reputation": 366, "user_id": 4488775, "user_type": "registered", "accept_rate": 64, "profile_image": "https://lh6.googleusercontent.com/-c7dUxZESZzs/AAAAAAAAAAI/AAAAAAAAAGI/OxEft3Nihy4/photo.jpg?sz=128", "display_name": "Bala Krishnan", "link": "https://stackoverflow.com/users/4488775/bala-krishnan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 143, "favorite_count": 0, "accepted_answer_id": 47074653, "answer_count": 1, "score": 1, "last_activity_date": 1509629809, "creation_date": 1509623197, "last_edit_date": 1509626515, "question_id": 47074511, "link": "https://stackoverflow.com/questions/47074511/perl-multithreading-script-prints-memory-map-and-backtrace", "title": "Perl - Multithreading script prints memory map and backtrace", "body": "<p><a href=\"https://i.stack.imgur.com/SK9Sl.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/SK9Sl.png\" alt=\"enter image description here\"></a>When I invoke my multithreaded perl script, on a few occassions, it throws some exception similar to the following. I am sorry that I could not share code. But if really needed I can try to build a snippet (if really really required). Because I guess this should have some theoretical answer.</p>\n\n<pre><code>*** glibc detected *** perl: double free or corruption (!prev): 0x00007f775401e9a0 ***\n======= Backtrace: =========\n/lib64/libc.so.6[0x3d74c75e66]\n/lib64/libc.so.6[0x3d74c789b3]\n/lib64/libc.so.6[0x3d74c7b880]\n/lib64/libc.so.6(realloc+0xe5)[0x3d74c7baf5]\n/usr/lib/../lib64/libcrypto.so.10(CRYPTO_realloc+0x5f)[0x7f775907bd8f]\n/usr/lib/../lib64/libcrypto.so.10(lh_insert+0xee)[0x7f77590f763e]\n/usr/lib/../lib64/libcrypto.so.10(OBJ_NAME_add+0x6b)[0x7f775907f12b]\n/usr/lib/../lib64/libcrypto.so.10(EVP_add_cipher+0x27)[0x7f7759102387]\n/usr/lib/../lib64/libcrypto.so.10(OpenSSL_add_all_ciphers+0x4b7)[0x7f7759106a07]\n/usr/lib/../lib64/libcrypto.so.10(OPENSSL_add_all_algorithms_noconf+0xe)[0x7f775910653e]\n/usr/local/lib/libssh2.so.1(libssh2_init+0x39)[0x7f77596800b9]\n</code></pre>\n\n<p>Why am I getting such errors?</p>\n\n<p>I am using use Thread::Queue; use threads::shared; Please let me know your views.</p>\n\n<p>Below are the thread libraries version info.</p>\n\n<pre><code>use threads; - installed v2.15 (latest - 2.16)\nuse Thread::Queue; - installed v3.12 (up to date)\nuse threads::shared; - installed v1.56 (latest - 1.57)\nperl - installed v5.26.1\n</code></pre>\n\n<p>Other libraries are:: </p>\n\n<pre><code>use YAML::XS 'LoadFile';  - 0.66 up to date\nuse Net::Netconf::Manager; - 1.02 up to date\nuse Config::Properties; - 1.80 up to date\nuse Sys::Syslog; - 0.35 up to date\nuse DateTime::Format::Strptime; - 1.74 up to date\nuse DateTime; - 1.44 up to date\nuse XML::LibXML; - 2.0129 (latest 2.0139)\nuse Regexp::Common qw/net/; - 2017060201 up to date\nuse Getopt::Long; - 2.5 up to date\n</code></pre>\n"}, {"tags": ["perl", "oop", "object", "hashmap"], "comments": [{"owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "edited": false, "score": 0, "creation_date": 1509614352, "post_id": 47070626, "comment_id": 81091106, "body": "Just to clarify your question, you want to know how to return a hash rather than a hashref from your <code>new</code> method?"}, {"owner": {"reputation": 366, "user_id": 4488775, "user_type": "registered", "accept_rate": 64, "profile_image": "https://lh6.googleusercontent.com/-c7dUxZESZzs/AAAAAAAAAAI/AAAAAAAAAGI/OxEft3Nihy4/photo.jpg?sz=128", "display_name": "Bala Krishnan", "link": "https://stackoverflow.com/users/4488775/bala-krishnan"}, "reply_to_user": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "edited": false, "score": 0, "creation_date": 1509615544, "post_id": 47070626, "comment_id": 81091907, "body": "No, I implicitly mean hashref to a hash of objects instead of hashref to a hash. Clear now?"}, {"owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "edited": false, "score": 0, "creation_date": 1509618053, "post_id": 47070626, "comment_id": 81093614, "body": "Not really that clear...what is wrong with the last snippet of code? That is building a hash containing objects."}], "answers": [{"tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": false, "score": 2, "last_activity_date": 1509613060, "creation_date": 1509613060, "answer_id": 47071140, "question_id": 47070626, "link": "https://stackoverflow.com/questions/47070626/perl-return-hash-of-objects-as-single-object-from-a-class/47071140#47071140", "title": "Perl - Return hash of objects as single object from a class", "body": "<p>Just store the structures into a hash keyed by their <code>mykey</code>. I used <a href=\"http://p3rl.org/map\" rel=\"nofollow noreferrer\">map</a>, but a for-loop is also possible:</p>\n\n<pre><code>#!/usr/bin/perl\nuse warnings;\nuse strict;\nuse feature qw{ say };\n\n{\n    package YAMLHash;\n    use YAML qw{ LoadFile };\n    sub new {\n        my ($class, $file) = @_;\n        my %hash = map { $_-&gt;{mykey} =&gt; $_ } LoadFile($file);\n        bless \\%hash, $class\n    }\n}\n\n\nmy $obj = 'YAMLHash'-&gt;new('1.yaml');\n\nsay keys %$obj;\nsay values %$obj;\n\nmy $third_object_name = $obj-&gt;{3}{myname};\nprint $third_object_name;    #this prints 'Chris'\n</code></pre>\n\n<p>Note that <code>$obj-&gt;{3}</code> is not the third object. It's the object whose <code>mykey</code> is 3.</p>\n"}, {"tags": [], "owner": {"reputation": 2000, "user_id": 1275160, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/0e59227edde0173c28ade664aac101ec?s=128&d=identicon&r=PG", "display_name": "Diab Jerius", "link": "https://stackoverflow.com/users/1275160/diab-jerius"}, "is_accepted": false, "score": 0, "last_activity_date": 1509650058, "creation_date": 1509650058, "answer_id": 47082996, "question_id": 47070626, "link": "https://stackoverflow.com/questions/47070626/perl-return-hash-of-objects-as-single-object-from-a-class/47082996#47082996", "title": "Perl - Return hash of objects as single object from a class", "body": "<p>There are a number of modules on <a href=\"http://metacpan.org/\" rel=\"nofollow noreferrer\">CPAN</a> which will happily create an object out of a hash (heck, I even wrote one: <a href=\"https://metacpan.org/pod/Hash::Wrap/%22Hash::Wrap%22\" rel=\"nofollow noreferrer\">Hash::Wrap</a>).  If you want to recursively apply the object paradigm to the nested parts of the YAML documents, my favorite is <a href=\"https://metacpan.org/pod/Hash::AsObject/\" rel=\"nofollow noreferrer\">Hash::AsObject</a>.  See <a href=\"https://metacpan.org/pod/Hash::Wrap/%22Hash::Wrap%22\" rel=\"nofollow noreferrer\">Hash::Wrap</a> for a more comprehensive list of similar modules.</p>\n\n<p>Here's some code. It returns a <em>list</em> of objects, rather than a <em>hash</em> of objects, but fixing that is pretty straightforward.</p>\n\n<pre><code>use 5.010;\n\nuse strict;\nuse warnings;\n\nuse Hash::AsObject;\nuse YAML 'Load';\n\n\nmy $yaml = do { local $/ = undef;\n                &lt;DATA&gt;\n            };\n\nmy @objs = map { Hash::AsObject-&gt;new( $_ ) } Load( $yaml );\n\nsay \" Name: \", $objs[0]-&gt;myname;\n$objs[0]-&gt;myname( \"Frank\" );\nsay \" Name: \", $objs[0]-&gt;myname;\n\n__DATA__\n\n---\nmykey: 1\nmyname: John\n---\nmykey: 2\nmyname: Doe\n---\nmykey: 3\nmyname: Chris\n</code></pre>\n\n<p>And the output:</p>\n\n<pre><code> Name: John\n Name::Frank\n</code></pre>\n"}], "owner": {"reputation": 366, "user_id": 4488775, "user_type": "registered", "accept_rate": 64, "profile_image": "https://lh6.googleusercontent.com/-c7dUxZESZzs/AAAAAAAAAAI/AAAAAAAAAGI/OxEft3Nihy4/photo.jpg?sz=128", "display_name": "Bala Krishnan", "link": "https://stackoverflow.com/users/4488775/bala-krishnan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 237, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1509650058, "creation_date": 1509611148, "last_edit_date": 1509622264, "question_id": 47070626, "link": "https://stackoverflow.com/questions/47070626/perl-return-hash-of-objects-as-single-object-from-a-class", "title": "Perl - Return hash of objects as single object from a class", "body": "<p>In general, perl objects are data structure such as hash, array, scalar, file handles etc.</p>\n\n<p>I am thinking of a scenario when a perl module can return hash of objects (each object being as hash) as a single object. Please consider the following scenario.</p>\n\n<p>I have a YAML file with multiple documents. (or an XML with multiple set of identical configuration nodes). I need a perl module for which I could pass this YAML file as input, and receive hash of objects (each object corresponds to a document in the YAML file).</p>\n\n<p><strong>YAML</strong></p>\n\n<pre><code>---\nmykey: 1\nmyname: John\n---\nmykey: 2\nmyname: Doe\n----\nmykey: 3\nmyname: Chris\n...\n</code></pre>\n\n<p>The above YAML file has 3 documents in it. Let us consider this is going to be the input file.</p>\n\n<p>I would like to write something like below and access the hash of objects.</p>\n\n<p><strong>SimpleParser.pl</strong></p>\n\n<pre><code>use strict;\nuse warnings;\nuse YAMLParser;\nmy %objHashRef = YAMLParser-&gt;new('input.yml');\n\nprint keys %objHashRef;    #print keys for each objects\nprint values %objHashRef;  #print hash reference of each object\n\nmy $thirdObjectName = $objHashRef{3}-&gt;get_name();\nprint $thirdObjectName;    #this prints 'Chris'\n</code></pre>\n\n<p>To achieve this behavior, what are all the modifications required in the perl module file which is similar to something below?</p>\n\n<p><strong>YAMLParser.pm</strong></p>\n\n<pre><code>use strict;\nuse warnings;\nsub new {\n    my ($class) = shift;\n    my $self = {\n         inputFile =&gt; shift,\n         name =&gt; shift\n    };\n    bless $self, $class;\n    return $self;\n}\n\nsub set_name {\n    $self-&gt;{name} = $name;\n}\n\nsub get_name {\n    my ($self) = @_;\n    return $self-&gt;{name};\n} \n1;\n</code></pre>\n\n<p>Below is a sample YAML parsing snippet that could help if required.</p>\n\n<pre><code>my @list;\nmy $myname;\nmy $i = 0;\nmy @conf = LoadFile('input.yml');   #returns array of reference to each document in the YAML file\nmy $config = \\@conf;      #Returns reference to an array\n\nforeach ( @conf ) {\n    $list[$i] = $config-&gt;[$i]-&gt;{mykey};\n    $objHash{$list[$i]} = YAMLParser-&gt;new();\n    $myname = $config-&gt;[$i]-&gt;{myname};\n    $objHash{$list[$i]}-&gt;setMyname($myname);\n    my $host = $objHash{$list[$i]}-&gt;getMyname();\n    $i++;\n}\n</code></pre>\n\n<p>Please let me know your thoughts.</p>\n"}, {"tags": ["perl", "file"], "comments": [{"owner": {"reputation": 144799, "user_id": 2836621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/suHg4.jpg?s=128&g=1", "display_name": "Mark Setchell", "link": "https://stackoverflow.com/users/2836621/mark-setchell"}, "edited": false, "score": 0, "creation_date": 1509607615, "post_id": 47069655, "comment_id": 81087347, "body": "Try closing the output file to flush it before reopening it."}], "answers": [{"comments": [{"owner": {"reputation": 25, "user_id": 8872848, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/50ca575b543445e7e9ae08b88973319e?s=128&d=identicon&r=PG&f=1", "display_name": "rick", "link": "https://stackoverflow.com/users/8872848/rick"}, "edited": false, "score": 0, "creation_date": 1509639118, "post_id": 47070145, "comment_id": 81108675, "body": "The reason for the files was mostly me messing around with files. The close file was the issue, but why was that? What was while(file) reading that it didn&#39;t want to count a line?"}, {"owner": {"reputation": 17619, "user_id": 7818749, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec4a72453e116debb802d55e88c2572e?s=128&d=identicon&r=PG&f=1", "display_name": "Gerhard", "link": "https://stackoverflow.com/users/7818749/gerhard"}, "reply_to_user": {"reputation": 25, "user_id": 8872848, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/50ca575b543445e7e9ae08b88973319e?s=128&d=identicon&r=PG&f=1", "display_name": "rick", "link": "https://stackoverflow.com/users/8872848/rick"}, "edited": false, "score": 0, "creation_date": 1509687557, "post_id": 47070145, "comment_id": 81127588, "body": "@drake If your file is still open for writing, it will be written to, but it does not completely cache the content in file until you close it, alsmost like saving it.. It is sort of the same as you editing a file in notepad and saving it occasionally, but if you do not do the final save, it will not save the final content."}], "tags": [], "owner": {"reputation": 17619, "user_id": 7818749, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec4a72453e116debb802d55e88c2572e?s=128&d=identicon&r=PG&f=1", "display_name": "Gerhard", "link": "https://stackoverflow.com/users/7818749/gerhard"}, "is_accepted": false, "score": 0, "last_activity_date": 1509687630, "last_edit_date": 1509687630, "creation_date": 1509609070, "answer_id": 47070145, "question_id": 47069655, "link": "https://stackoverflow.com/questions/47069655/perl-after-merging-text-files-into-1-file-wont-read-the-whole-file/47070145#47070145", "title": "Perl: After merging text files into 1 file won&#39;t read the whole file", "body": "<p>The issue is that you are opening <code>merged.txt</code> for writing</p>\n\n<pre><code>open my $out_file, \"&gt;merged.txt\" or die \"Can't Open out_file $!\";\n</code></pre>\n\n<p>then you want to open it again for reading</p>\n\n<pre><code>open my $file, '&lt;', 'merged.txt' or die \"Could not open file 'merged.txt' $0\";\n</code></pre>\n\n<p>Yet you never close the file, so close the file at this point</p>\n\n<pre><code>    ...\n}\nclose $out_file or die \"Unable to close $file: $!\"; # here we close it!\nwhile ($output ne '');\nmy $numlines =0;\nopen my $file, '&lt;', 'merged.txt' or die \"Could not open file 'merged.txt' $!\";\n</code></pre>\n\n<p>Then do the same close after you read from file.</p>\n\n<p>All that being said, what is the reason you writing to file and then reading from it again when you are already storing all values locally? or is it just another post check? It is a little bit of an overkill, but nothing serious.</p>\n\n<p>Lastly, this is a better method to open a file, see <a href=\"https://perldoc.perl.org/functions/open.html\" rel=\"nofollow noreferrer\">perldoc</a>.</p>\n\n<pre><code>open(my $fh, \"&lt;\", \"merged.txt\") or die \"Unable to open &lt; merged.txt: $!\";\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1509646938, "post_id": 47070292, "comment_id": 81113515, "body": "@drake I added a comment on reading from a file that&#39;s being written to (still open)."}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": true, "score": 1, "last_activity_date": 1509656962, "last_edit_date": 1509656962, "creation_date": 1509609641, "answer_id": 47070292, "question_id": 47069655, "link": "https://stackoverflow.com/questions/47069655/perl-after-merging-text-files-into-1-file-wont-read-the-whole-file/47070292#47070292", "title": "Perl: After merging text files into 1 file won&#39;t read the whole file", "body": "<p>You got the answer, to close the file you wrote before opening it for reading.<sup>&dagger;</sup> Another way to have that happen is to use the same filehandle, which does get closed as it's being opened again. So</p>\n\n<pre><code>my $file = 'merged.txt';\nopen my $out_file, '&gt;', $file or die ...\n...\nopen $out_file, '&lt;', $file or die \"Can't open $file: $!\";\n</code></pre>\n\n<p>if you <em>are</em> done writing by then. \nNote that you want the <a href=\"https://perldoc.perl.org/perlvar.html#Error-Variables\" rel=\"nofollow noreferrer\">variable $!</a> (not <code>$0</code>, the name of the script).</p>\n\n<p>I'd like to also mention that if your filenames are in <code>@ARGV</code> you can use the <a href=\"https://perldoc.perl.org/perlop.html#I/O-Operators\" rel=\"nofollow noreferrer\">special <code>&lt;&gt;</code></a></p>\n\n<pre><code>my $output;    \n$output .= $_ while &lt;&gt;;\n</code></pre>\n\n<p>or, if you don't need all merged content in a variable</p>\n\n<pre><code>open my $fh_out, '&gt;', $file or die \"Can't open $file: $!\";\nprint $fh_out $_ while &lt;&gt;;\nclose $fh_out;\n</code></pre>\n\n<p>The <code>&lt;&gt;</code> is a synonym for the magical <code>&lt;ARGV&gt;</code>. It reads all lines from all files in <code>@ARGV</code>, but please see more in the linked documentation.</p>\n\n<hr>\n\n<p><sup>&dagger;</sup> &nbsp; Working with a file which is opened elsewhere can badly confuse things unless one is very careful. One way to keep it straight is by using <a href=\"http://perldoc.perl.org/functions/seek.html\" rel=\"nofollow noreferrer\">seek</a></p>\n\n<blockquote>\n  <p>Due to the rules and rigors of ANSI C, on some systems you have to do a <code>seek</code> whenever you switch between reading and writing. </p>\n</blockquote>\n\n<p>so</p>\n\n<pre><code>open my $out_file, '&gt;', $file or die ...\n...\nseek $out_file, 0, 0;\n</code></pre>\n\n<p>and after this the reads should work correctly (you should get the correct line count). </p>\n\n<p>While this is a little more efficient it is error prone and tricky. Unless there is a demonstrated need for <code>seek</code>-ing around a file I'd recommend just to re-open the file for reading after writing is done.</p>\n"}], "owner": {"reputation": 25, "user_id": 8872848, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/50ca575b543445e7e9ae08b88973319e?s=128&d=identicon&r=PG&f=1", "display_name": "rick", "link": "https://stackoverflow.com/users/8872848/rick"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 56, "favorite_count": 0, "accepted_answer_id": 47070292, "answer_count": 2, "score": 1, "last_activity_date": 1509687630, "creation_date": 1509607131, "last_edit_date": 1509618803, "question_id": 47069655, "link": "https://stackoverflow.com/questions/47069655/perl-after-merging-text-files-into-1-file-wont-read-the-whole-file", "title": "Perl: After merging text files into 1 file won&#39;t read the whole file", "body": "<p>The code below puts text files given from the command line and puts them in a merged.txt file. This part makes a perfect copy with the correct amount of lines. My problem is that when trying to use the file for example with while(file) it doesn't go through every line. For example merged.txt will have 735 lines as counted by vim but numlines will only have 732. </p>\n\n<pre><code>my @file = map { open my $f, $_ or die \"Can't Open $_:$!\"; $f } @ARGV;\nopen my $out_file, \"&gt;merged.txt\" or die \"Can't Open out_file $!\";\nmy $output;\ndo {\n    $output ='';\n    foreach(@file) {\n        my $line = &lt;$_&gt;;\n        if(defined $line) {\n            if($line !~/\\n$/) {\n                $line .= \"\\n\";\n            }\n            $output .= $line;\n         }\n    }\n    print {$out_file} $output;\n}\nwhile ($output ne '');\nmy $numlines =0;\nopen my $file, '&lt;', 'merged.txt' or die \"Could not open file 'merged.txt' $0\";\nwhile(&lt;$file&gt;) {\n    $numlines++;\n}\n</code></pre>\n"}, {"tags": ["perl"], "answers": [{"comments": [{"owner": {"reputation": 15906, "user_id": 3527940, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/k1R45.jpg?s=128&g=1", "display_name": "jcaron", "link": "https://stackoverflow.com/users/3527940/jcaron"}, "edited": false, "score": 0, "creation_date": 1509606324, "post_id": 47069103, "comment_id": 81086660, "body": "Note that this will keep the newline at the end of each line. A <code>chop</code> or <code>chomp</code> is often useful."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1509615373, "post_id": 47069103, "comment_id": 81091778, "body": "If you know that lexical filehandles and the three-arg version of <code>open()</code> is &quot;the better method to open a file&quot;, then why don&#39;t you use it for all of your example code?"}], "tags": [], "owner": {"reputation": 17619, "user_id": 7818749, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec4a72453e116debb802d55e88c2572e?s=128&d=identicon&r=PG&f=1", "display_name": "Gerhard", "link": "https://stackoverflow.com/users/7818749/gerhard"}, "is_accepted": false, "score": 2, "last_activity_date": 1509619517, "last_edit_date": 1509619517, "creation_date": 1509604861, "answer_id": 47069103, "question_id": 47069035, "link": "https://stackoverflow.com/questions/47069035/read-a-text-file-and-store-each-line-in-a-variable-using-perl/47069103#47069103", "title": "Read a text file and store each line in a variable using perl", "body": "<p>It is easy. We open the file, push each line in the file to an array after you <code>chomped</code> <code>\\n</code> (newline characters) and to test it, we print the array.\nHere <code>$_</code> is each of the lines read from file where <code>@lines</code> will store each of <code>$_</code> in an array.</p>\n\n<pre><code>use strict;\nuse warnings\n\nmy $file = \"sample.txt\";\nopen(my $fh, \"&lt;\", \"sample.txt\") or die \"Unable to open &lt; sample.txt: $!\";\nmy @lines;\nwhile (&lt;$fh&gt;) {\nchomp $_;\npush (@lines, $_);\n}\nclose $fh or die \"Unable to open $file: $!\";\nprint @lines;\n</code></pre>\n\n<p>an even easier method  is to just store the content to array.</p>\n\n<pre><code>use strict;\nuse warnings\n\nmy $file = \"sample.txt\";\nopen(my $fh, \"&lt;\", \"sample.txt\") or die \"Unable to open &lt; sample.txt: $!\";\nmy @lines = &lt;$fh&gt;;\nchomp(@lines);\nprint @lines;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 0, "last_activity_date": 1509615489, "creation_date": 1509615489, "answer_id": 47071940, "question_id": 47069035, "link": "https://stackoverflow.com/questions/47069035/read-a-text-file-and-store-each-line-in-a-variable-using-perl/47071940#47071940", "title": "Read a text file and store each line in a variable using perl", "body": "<pre><code># open the file\nopen my $fh, '&lt;', 'sample.txt'\n  or die \"Could not open sample.txt: $!\";\n\n# Read the file into an array\nmy @lines = &lt;$fh&gt;;\n\n# Optionally, remove newlines from all lines in the array\nchomp(@lines);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 66, "user_id": 8487363, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a94a542ecd275fa20b9c60056e103037?s=128&d=identicon&r=PG&f=1", "display_name": "kart1657", "link": "https://stackoverflow.com/users/8487363/kart1657"}, "is_accepted": false, "score": 0, "last_activity_date": 1509639601, "creation_date": 1509639601, "answer_id": 47080030, "question_id": 47069035, "link": "https://stackoverflow.com/questions/47069035/read-a-text-file-and-store-each-line-in-a-variable-using-perl/47080030#47080030", "title": "Read a text file and store each line in a variable using perl", "body": "<p>If you are able to use CPAN modules, then <code>Tie::File</code> is there for your help.\nUsing this module you can modify, add or delete the contents in the file.</p>\n\n<p>below is the script.</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\nuse Tie::File;\n\nmy @contents=();\n\ntie @contents, 'Tie::File','sample.txt' or die \"Not able to Tie sample.txt\\n\";\n\nmy $count=1;\nforeach (@contents)\n{\n    print \"line $count:$_\\n\";\n    $count++;\n}\n\nuntie @contents;\n</code></pre>\n\n<p>output:</p>\n\n<pre><code>line 1: ab1234\nline 2: str:abcd\nline 3: pq4567\n</code></pre>\n"}], "owner": {"reputation": 2132, "user_id": 7620805, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/3f2d11bb6c725bca5c844805789f68c1?s=128&d=identicon&r=PG&f=1", "display_name": "Yash", "link": "https://stackoverflow.com/users/7620805/yash"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3694, "favorite_count": 0, "answer_count": 3, "score": -3, "last_activity_date": 1509639601, "creation_date": 1509604606, "question_id": 47069035, "link": "https://stackoverflow.com/questions/47069035/read-a-text-file-and-store-each-line-in-a-variable-using-perl", "title": "Read a text file and store each line in a variable using perl", "body": "<p>I have a text file (sample.txt) with some data. I want to read the text file and store each line in an array or a variable.</p>\n\n<p>sample.txt</p>\n\n<pre><code>ab1234\nstr:abcd\npq4567\n</code></pre>\n\n<p>How can i store each of these lines in an array or a variable using perl script.</p>\n"}, {"tags": ["javascript", "perl", "grep", "cgi", "web-hosting"], "comments": [{"owner": {"reputation": 3857, "user_id": 6395388, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/1211707342181814/picture?type=large", "display_name": "Derek Brown", "link": "https://stackoverflow.com/users/6395388/derek-brown"}, "edited": false, "score": 0, "creation_date": 1509596143, "post_id": 47067500, "comment_id": 81082978, "body": "I would look into Bluehost- their shared hosting plans do enable you to use grep."}, {"owner": {"reputation": 3857, "user_id": 6395388, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/1211707342181814/picture?type=large", "display_name": "Derek Brown", "link": "https://stackoverflow.com/users/6395388/derek-brown"}, "edited": false, "score": 0, "creation_date": 1509596194, "post_id": 47067500, "comment_id": 81082991, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/15041608/searching-all-files-in-folder-for-strings\">Searching all files in folder for strings</a>"}, {"owner": {"reputation": 23, "user_id": 8848307, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b9184cc7e67434323e94bf4a457f9c2?s=128&d=identicon&r=PG&f=1", "display_name": "Rahim Rajwani", "link": "https://stackoverflow.com/users/8848307/rahim-rajwani"}, "reply_to_user": {"reputation": 3857, "user_id": 6395388, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/1211707342181814/picture?type=large", "display_name": "Derek Brown", "link": "https://stackoverflow.com/users/6395388/derek-brown"}, "edited": false, "score": 0, "creation_date": 1509696985, "post_id": 47067500, "comment_id": 81131536, "body": "Thanks alot! For now going for Bluehost was the easiest."}], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 8848307, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b9184cc7e67434323e94bf4a457f9c2?s=128&d=identicon&r=PG&f=1", "display_name": "Rahim Rajwani", "link": "https://stackoverflow.com/users/8848307/rahim-rajwani"}, "edited": false, "score": 0, "creation_date": 1509697096, "post_id": 47071510, "comment_id": 81131588, "body": "Thank you for your help. For now, I chose Bluehost and they allow grep function."}], "tags": [], "owner": {"reputation": 3604, "user_id": 436450, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0afd75178763cf41af43a103b95277ae?s=128&d=identicon&r=PG", "display_name": "jira", "link": "https://stackoverflow.com/users/436450/jira"}, "is_accepted": false, "score": 0, "last_activity_date": 1509614198, "creation_date": 1509614198, "answer_id": 47071510, "question_id": 47067500, "link": "https://stackoverflow.com/questions/47067500/alternative-to-executing-grep-while-on-a-shared-web-hosting-plan/47071510#47071510", "title": "Alternative to executing grep while on a shared web-hosting plan", "body": "<p>Possible solutions depend on what your hosting provider offers and your budget.\nWill you have a RDBMS available? You could then use full texts search which many offers. If not you could use SQLite, which has full texts search support.</p>\n\n<p>If you have to stick to low tech solutions, than the PHP solution linked on the right might work for you.</p>\n\n<p>Perl has a <a href=\"http://search.cpan.org/~shay/perl-5.26.1/ext/File-Find/lib/File/Find.pm\" rel=\"nofollow noreferrer\">File::Find</a> module, which you could use.</p>\n"}], "owner": {"reputation": 23, "user_id": 8848307, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b9184cc7e67434323e94bf4a457f9c2?s=128&d=identicon&r=PG&f=1", "display_name": "Rahim Rajwani", "link": "https://stackoverflow.com/users/8848307/rahim-rajwani"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 62, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1509614198, "creation_date": 1509595977, "question_id": 47067500, "link": "https://stackoverflow.com/questions/47067500/alternative-to-executing-grep-while-on-a-shared-web-hosting-plan", "title": "Alternative to executing grep while on a shared web-hosting plan", "body": "<p><strong>Application:</strong>\nI wish to publish a web-application that takes input strings, searches for the string in about 5,000 plain-text files and returns the name of the files with matches. Each text file is about 4MB (uncompressed).</p>\n\n<p><strong>Problem:</strong>\nIn PHP, I could use <code>exec(grep -l pattern dir/* )</code> and get the job done. However, for cost reasons, I would go for a <em>shared web-hosting plan which normally do not allow for executing programs</em>. </p>\n\n<p><strong>Could you please suggest any alternative to grep for web environment?</strong></p>\n\n<p>I have understood following so far:</p>\n\n<ol>\n<li><p>A binary program file for any grep-alternative (e.g sift) could work. However, the problem of executing on a shared server would remain.</p></li>\n<li><p>PHP function <code>preg_match</code> is inappropriate considering a large number of files and their size.</p></li>\n</ol>\n\n<p>I am open to implementations of grep-like function in other languages (e.g perl or javascript). However, I am not sure if the performance would be comparable to grep and whether the problem of execution would still remain.</p>\n\n<p>I have tried looking for different web-hosting providers and understood that a <strong>virtual-private server (VPS)</strong> might be the solution. However, the price for a VPS plan by all hosting providers I have come across is unaffordable.</p>\n\n<p>Any solutions or guidance for this problem?</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 1427, "user_id": 4381423, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/W5qHX.jpg?s=128&g=1", "display_name": "Mark Mucha", "link": "https://stackoverflow.com/users/4381423/mark-mucha"}, "edited": false, "score": 0, "creation_date": 1509591941, "post_id": 47066609, "comment_id": 81081933, "body": "According to this doc: <a href=\"https://perldoc.perl.org/functions/fork.html\" rel=\"nofollow noreferrer\">perldoc.perl.org/functions/fork.html</a>, you may end up with zombies if you don&#39;t wait for the children. So the parent zombie will wait :)."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 1427, "user_id": 4381423, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/W5qHX.jpg?s=128&g=1", "display_name": "Mark Mucha", "link": "https://stackoverflow.com/users/4381423/mark-mucha"}, "edited": false, "score": 1, "creation_date": 1509733520, "post_id": 47066609, "comment_id": 81154571, "body": "@MarkMucha  Not if the parent exits first, since then <code>init</code> re-parents the child."}], "answers": [{"comments": [{"owner": {"reputation": 5937, "user_id": 783314, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/b3d5692064779f501f7c2a639dc0076c?s=128&d=identicon&r=PG", "display_name": "Stephen", "link": "https://stackoverflow.com/users/783314/stephen"}, "edited": false, "score": 0, "creation_date": 1509643010, "post_id": 47066662, "comment_id": 81111258, "body": "So just to confirm one detail, when I am using \u2018&amp;\u2019, Perl would still call wait but the wait would be immediately satisfied by the first shell returning? And in this case, is the creation of the first shell done <i>instead</i> of fork? Or is it something like fork-&gt;exec shell?"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 5937, "user_id": 783314, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/b3d5692064779f501f7c2a639dc0076c?s=128&d=identicon&r=PG", "display_name": "Stephen", "link": "https://stackoverflow.com/users/783314/stephen"}, "edited": false, "score": 0, "creation_date": 1509643410, "post_id": 47066662, "comment_id": 81111526, "body": "@Stephen  Correct, <code>system</code> always <code>wait</code>s but the shell that it created returns right after forking off a subshell so the <code>system</code> is all done right away (milliseconds?). When the <code>system</code> call <code>fork</code>s, the new process (child) <code>exec</code>s the external program to be run -- or it <code>exec</code>s a shell (which will then run that program) -- it turns into it.  In this case it&#39;s a shell so the first shell replaces the child that <code>system</code> forked."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 5937, "user_id": 783314, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/b3d5692064779f501f7c2a639dc0076c?s=128&d=identicon&r=PG", "display_name": "Stephen", "link": "https://stackoverflow.com/users/783314/stephen"}, "edited": false, "score": 0, "creation_date": 1509648175, "post_id": 47066662, "comment_id": 81114211, "body": "@Stephen A <i>very</i> crude sketch: <code>system($cmd)</code> ==&gt; <code>my $pid = fork &#47;&#47; die $!; if ($pid==0) { exec $cmd }; wait;</code>, except that here it is the shell that is <code>exec</code>-ed. A shell is used to run a command whenever there are shell metacharacters in it; in your case it&#39;s both <code>&gt;</code> and <code>&amp;</code>.  Those are shell things so Perl will start a shell and pass the command to it.  If you use a list, <code>system(@cmd)</code>, then it won&#39;t -- it will directly run that program (using <code>execvp</code>).  But then you can&#39;t have <code>&gt;</code> and alike in it."}, {"owner": {"reputation": 5937, "user_id": 783314, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/b3d5692064779f501f7c2a639dc0076c?s=128&d=identicon&r=PG", "display_name": "Stephen", "link": "https://stackoverflow.com/users/783314/stephen"}, "edited": false, "score": 0, "creation_date": 1509657829, "post_id": 47066662, "comment_id": 81119071, "body": "So I guess there must be two forks and two execs in total, right? Clearly we&#39;d need two forks if there is a child and then a grandchild. And then the two execs would be for replacing the forked program with the new program in each case?"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 5937, "user_id": 783314, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/b3d5692064779f501f7c2a639dc0076c?s=128&d=identicon&r=PG", "display_name": "Stephen", "link": "https://stackoverflow.com/users/783314/stephen"}, "edited": false, "score": 0, "creation_date": 1509658078, "post_id": 47066662, "comment_id": 81119171, "body": "@Stephen I&#39;d imagine that, yes -- except that I&#39;m not sure what exactly the shell does, and that depends on the system as well.  But conceptually (and perhaps literally), yes.  I edited the answer, hopefully it&#39;s better."}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": true, "score": 3, "last_activity_date": 1509735220, "last_edit_date": 1509735220, "creation_date": 1509589986, "answer_id": 47066662, "question_id": 47066609, "link": "https://stackoverflow.com/questions/47066609/does-a-background-process-complete-if-its-parent-finishes-first/47066662#47066662", "title": "Does a background process complete if its parent finishes first?", "body": "<p>Yes, your backgrounded process should complete even if the script exits first.</p>\n\n<p>The <a href=\"https://perldoc.perl.org/functions/system.html\" rel=\"nofollow noreferrer\">system</a> call <a href=\"http://perldoc.perl.org/functions/fork.html\" rel=\"nofollow noreferrer\">fork</a>s, what means that at that point a new, independent, process is created as a near clone of the parent.  That process is then replaced by the command to run, or by a shell that will run the command.<sup>&dagger;</sup> The <code>system</code> then <code>wait</code>s for the child process to complete.</p>\n\n<p>The <code>&amp;</code> in the command makes sure that it is a shell that is run by the <code>system</code>, which then executes the command. The shell itself <code>fork</code>s a process (subshell), in which the command is executed, and doesn't wait for it but returns right away. </p>\n\n<p>At that point <code>system</code>'s job is done and it returns control to the script. </p>\n\n<p>The fate of the process forked by the shell has nothing more to do with the shell, or with your script, and the process will run to its completion.\nThe parent may well exit right away.  See this with</p>\n\n<pre><code>use warnings;\nuse strict;\nuse feature 'say';\n\nsystem(\"(sleep 5; echo hi) &amp;\");\n\nsay \"Parent exiting.\";\n</code></pre>\n\n<p>or, from a terminal</p>\n\n<pre><code>perl -wE'system(\"(sleep 3; echo me)&amp;\"); say \"done\"'\n</code></pre>\n\n<p>Once in the shell, the <code>()</code> starts a sub-shell, used here to put multiple commands in the background for this example (and representing your command). Keep that in mind when tracking process IDs via <a href=\"https://www.gnu.org/software/bash/manual/html_node/Bash-Variables.html#Bash-Variables\" rel=\"nofollow noreferrer\"><code>bash</code> internal variables</a> <code>$BASHPID</code>, <code>$$</code>, <code>$PPID</code> (here <a href=\"http://tldp.org/LDP/abs/html/internalvariables.html\" rel=\"nofollow noreferrer\"><code>$$</code> differs from <code>$BASHPID</code></a>)</p>\n\n<pre><code>perl -wE'say $$; system(\"\n    ( sleep 30; echo \\$BASHPID; echo \\$PPID; echo \\$\\$ ) &amp;\n\"); say \"done\"'\n</code></pre>\n\n<p>Then view processes while this sleeps (by <code>ps aux</code> on my system, with <code>| tail -n 10</code>). </p>\n\n<p>Most of the time the PID of a <code>system</code>-run command will be by two greater than that of the script, as there is a shell between them (for a backgrounded process as well, on my system). In the example above it should be greater by 3, because of an additional <code>()</code> subshell with mulitple commands.</p>\n\n<p>This assumes that the <code>/bin/sh</code> which <code>system</code> uses does get relegated to <code>bash</code>.</p>\n\n<p>Note: when the parent exits first the child is re-parented by <code>init</code> and all is well (no zombies).</p>\n\n<hr>\n\n<p><sup>&dagger;</sup>  &nbsp; From <a href=\"https://perldoc.perl.org/functions/system.html\" rel=\"nofollow noreferrer\">system</a></p>\n\n<blockquote>\n  <p>Does exactly the same thing as <code>exec</code>, except that a fork is done first and the parent process waits for the child process to exit. Note that argument processing varies depending on the number of arguments. If there is more than one argument in LIST, or if LIST is an array with more than one value, starts the program given by the first element of the list with arguments given by the rest of the list. If there is only one scalar argument, the argument is checked for shell metacharacters, and if there are any, the entire argument is passed to the system's command shell for parsing (this is <code>/bin/sh -c</code> on Unix platforms, but varies on other platforms). If there are no shell metacharacters in the argument, it is split into words and passed directly to <code>execvp</code>, which is more efficient.  ...</p>\n</blockquote>\n\n<p>The \"<em>... starts the program given by the first element ...</em>\" also means by <code>execvp</code>, see <a href=\"https://perldoc.perl.org/functions/exec.html\" rel=\"nofollow noreferrer\">exec</a>.</p>\n"}], "owner": {"reputation": 5937, "user_id": 783314, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/b3d5692064779f501f7c2a639dc0076c?s=128&d=identicon&r=PG", "display_name": "Stephen", "link": "https://stackoverflow.com/users/783314/stephen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 808, "favorite_count": 0, "accepted_answer_id": 47066662, "answer_count": 1, "score": 2, "last_activity_date": 1509735220, "creation_date": 1509589600, "question_id": 47066609, "link": "https://stackoverflow.com/questions/47066609/does-a-background-process-complete-if-its-parent-finishes-first", "title": "Does a background process complete if its parent finishes first?", "body": "<p>I am not sure if this question is specific to Perl, but it is the language I am using. Say I launch a background process to save a web page to a local file like this:</p>\n\n<p><code>system(\"curl http://google.com &gt; output_file.html &amp;\");</code></p>\n\n<p>I know this will launch a background process, though I'm not totally sure of the details (for example does it get its own PID?). But what's particularly important to me is, what happens if the process that launched it terminates before curl finishes downloading? Will curl be allowed to continue, or will it terminate too?</p>\n\n<p>Is there any reason the solution wouldn't be to prepend the above command with <code>nohup</code> (<code>nohup curl ...</code>)? See <a href=\"http://linux.101hacks.com/unix/nohup-command/\" rel=\"nofollow noreferrer\">http://linux.101hacks.com/unix/nohup-command/</a></p>\n"}]