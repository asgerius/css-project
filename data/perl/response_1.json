[{"tags": ["perl", "unzip"], "comments": [{"owner": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "edited": false, "score": 0, "creation_date": 1421289911, "post_id": 27954060, "comment_id": 44306792, "body": "Do you specifically need to use IO::Uncompress::Unzip?  Archive::Zip and Archive::Extract have much more pleasant interfaces."}, {"owner": {"reputation": 98433, "user_id": 368630, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/107085826cfbb2700f535417a12c89cb?s=128&d=identicon&r=PG", "display_name": "David W.", "link": "https://stackoverflow.com/users/368630/david-w"}, "reply_to_user": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "edited": false, "score": 0, "creation_date": 1421332404, "post_id": 27954060, "comment_id": 44324167, "body": "That may be true, but <code>IO::Uncompress::Unzip</code> comes with Perl while the others are optional modules that must be installed with CPAN. I&#39;d rather use standard modules when available since I know they&#39;ll be there no matter which computer I&#39;m on."}, {"owner": {"reputation": 1323, "user_id": 2030808, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iRrvi.png?s=128&g=1", "display_name": "pmqs", "link": "https://stackoverflow.com/users/2030808/pmqs"}, "edited": false, "score": 0, "creation_date": 1421333260, "post_id": 27954060, "comment_id": 44324767, "body": "Just tried the equivalent of what you are doing on a random jar file. Worked fine. What version of IO::Uncompress::Unzip are you running?"}, {"owner": {"reputation": 98433, "user_id": 368630, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/107085826cfbb2700f535417a12c89cb?s=128&d=identicon&r=PG", "display_name": "David W.", "link": "https://stackoverflow.com/users/368630/david-w"}, "reply_to_user": {"reputation": 1323, "user_id": 2030808, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iRrvi.png?s=128&g=1", "display_name": "pmqs", "link": "https://stackoverflow.com/users/2030808/pmqs"}, "edited": false, "score": 0, "creation_date": 1421341611, "post_id": 27954060, "comment_id": 44330589, "body": "@pmqs I found the issue. My program has no problems with jars or zips. It is failing because I am downloading the JAR file and the matching POM. It&#39;s failing when I am trying to go through the POM as a ZIP archive. <code>IO::Uncompress::Unzip</code> returns a valid GLOB reference by default when opening a non-zip file."}], "answers": [{"tags": [], "owner": {"reputation": 98433, "user_id": 368630, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/107085826cfbb2700f535417a12c89cb?s=128&d=identicon&r=PG", "display_name": "David W.", "link": "https://stackoverflow.com/users/368630/david-w"}, "is_accepted": false, "score": 0, "last_activity_date": 1421341506, "creation_date": 1421341506, "answer_id": 27968923, "question_id": 27954060, "link": "https://stackoverflow.com/questions/27954060/perl-iouncompressunzip/27968923#27968923", "title": "Perl IO::Uncompress::Unzip", "body": "<p>I found the issue. </p>\n\n<p>Each directory has two files in it: One is the POM, and one is the jar (zip) file. My outer <code>$dir_fh-&gt;read</code> loop goes though the directory, it first picks up the jar, then the POM.</p>\n\n<p>First time through, the inner loop first gets the jar file, opens it with <code>IO::Uncompress::Unzip</code>. The inner loop has no problems and exits as expected.</p>\n\n<p>The outer loop now gets the POM file, and passes that to <code>IO::Uncompress::Unzip</code> to open. <code>IO::Uncompress::Unzip-&gt;new</code> returns a zero status -- even though this isn't a zip file. However, the <code>$archive_fh-&gt;nextStream</code> is croaking because there is no next stream to fetch. </p>\n\n<p>Since I don't have any indication that a new file had been open, I never detected that the POM was being opened and using <code>nextStream</code> on that was causing my program to croak.</p>\n\n<p>So, <code>IO::Uncompress:Unzip-&gt;new</code> opens uncompressed files as if they're zip files, and returns a valid file handle.</p>\n\n<p>Reading through the Perldoc, I found this under constructor options:</p>\n\n<blockquote>\n  <ul>\n  <li>Transparent => 0|1<br>\n  &nbsp;<br>\n  If this option is set and the input file/buffer is not compressed data, the module will allow reading of it anyway.\n  In addition, if the input file/buffer does contain compressed data and there is non-compressed data immediately following it, setting this option will make this module treat the whole file/buffer as a single data stream.<br>\n  &nbsp;<br>\n  This option defaults to 1.</li>\n  </ul>\n</blockquote>\n\n<p>Okay, by default, <code>IO::Uncompress::Unzip</code> opens non-zip files for reading. If I want to end this behavior, I need to do this:</p>\n\n<pre><code>my $archive_fh = IO::Uncompress::Unzip-&gt;new( \n    $full_file_name, \n    Transparent =&gt; 0,\n) or die qq(ERROR: Cannot open file \"$full_file_name\" for reading.);\n</code></pre>\n\n<p>This won't open my POM as a ZIP, and the program works.</p>\n"}], "owner": {"reputation": 98433, "user_id": 368630, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/107085826cfbb2700f535417a12c89cb?s=128&d=identicon&r=PG", "display_name": "David W.", "link": "https://stackoverflow.com/users/368630/david-w"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1124, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1421341506, "creation_date": 1421276443, "question_id": 27954060, "link": "https://stackoverflow.com/questions/27954060/perl-iouncompressunzip", "title": "Perl IO::Uncompress::Unzip", "body": "<p>I'm trying to understand how to use IO::Uncompress::Unzip in order to uncompress Jar files. I've got the names of the files in the jar printing, but I am getting the error:</p>\n\n<pre><code>Can't call method \"reset\" on an undefined value at ../IO/Uncompress/Base.pm line 986.\n</code></pre>\n\n<p>after I read the last entry. Here's my module:</p>\n\n<pre><code>sub modify_artifact {\n    my %parameters = @_;\n\n    my @required_parameters = qw( version directory );\n\n    for my $parameter ( @required_parameters ) {\n        if ( not exists $parameters{$parameter} ) {\n            die qq(ERROR: Missing required parameter \"$parameter\");\n        }\n    }\n    my $directory = $parameters{directory};\n\n    my $dir_fh = IO::Dir-&gt;new( $parameters{directory} ) or\n        die qq(ERROR: Cannot open directory \"$parameters{directory} for reading.);\n\n    while ( my $file_name  = $dir_fh-&gt;read ) {\n        next if $file_name =~ /^\\./;             #Hidden and \".\" and \"..\"\n        my $full_file_name = File::Spec-&gt;join( $directory, $file_name );\n        my $archive_fh = IO::Uncompress::Unzip-&gt;new( $full_file_name ) or\n            die qq(ERROR: Cannot open file \"$full_file_name\" for reading.);\n        while ( my $status = $archive_fh-&gt;nextStream ) {\n            last unless $status &gt; 0;\n            say $archive_fh-&gt;getHeaderInfo-&gt;{Name};   # Print out file or directory\n        }\n    }\n\n}\n</code></pre>\n\n<p>The <code>say</code> line is working for each and every entry in the archive, but then I get a failure when attempting to read in the next stream:</p>\n\n<pre><code>META-INF/MANIFEST.MF\nMETA-INF/maven/\nMETA-INF/maven/com.vegicorp/\nMETA-INF/maven/com.vegicorp/services/\nMETA-INF/maven/com.vegicorp/services/pom.properties\nMETA-INF/maven/com.vegicorp/services/pom.xml\ncom/\ncom/vegicorp/\ncom/vegicorp/services/\ncom/vegicorp/services/filter/\ncom/vegicorp/services/filter/impl/\ncom/vegicorp/services/generators/\ncom/vegicorp/services/filter/impl/DescInfoFilter.class\ncom/vegicorp/services/filter/impl/RequestFilterAals.class\ncom/vegicorp/services/generators/OutputGenerator$1.class\ncom/vegicorp/services/generators/OutputGenerator.class  &lt;- Last entry in archive\nCan't call method \"reset\" on an undefined value at ../IO/Uncompress/Base.pm line 986.\n</code></pre>\n\n<p>I've tried the <code>for</code> loop shown in the examples too:</p>\n\n<pre><code>sub modify_artifact {\n    my %parameters = @_;\n\n    my @required_parameters = qw( version directory );\n\n    for my $parameter ( @required_parameters ) {\n        if ( not exists $parameters{$parameter} ) {\n            die qq(ERROR: Missing required parameter \"$parameter\");\n        }\n    }\n    my $directory = $parameters{directory};\n\n    my $dir_fh = IO::Dir-&gt;new( $parameters{directory} ) or\n        die qq(ERROR: Cannot open directory \"$parameters{directory} for reading.);\n\n    while ( my $file_name  = $dir_fh-&gt;read ) {\n        next if $file_name =~ /^\\./;             #Hidden and \".\" and \"..\"\n        my $full_file_name = File::Spec-&gt;join( $directory, $file_name );\n        my $archive_fh = IO::Uncompress::Unzip-&gt;new( $full_file_name ) or\n            die qq(ERROR: Cannot open file \"$full_file_name\" for reading.);\n        my $status;\n        for ($status = 1; $status &gt; 0; $status = $archive_fh-&gt;nextStream()) {\n            say $archive_fh-&gt;getHeaderInfo-&gt;{Name};\n            last if $status &lt; 0;\n        }\n    }\n\n}\n</code></pre>\n\n<p>But I get the same issue. It appears that the <code>nextStream</code> method is causing the error. Is there something I'm missing here? Is there a way to see if there is a next stream before I fetch it?</p>\n"}, {"tags": ["multithreading", "perl"], "comments": [{"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 2, "creation_date": 1421275971, "post_id": 27953865, "comment_id": 44302962, "body": "<i>&quot;That seems like an awful way to process this data.&quot;</i> Yep. <i>&quot;Is there a faster way to do this?&quot;</i> Use a database instead of flat text files."}, {"owner": {"reputation": 47, "user_id": 3999193, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/edfd9a9323ac272ba6104ab09f5cee0e?s=128&d=identicon&r=PG&f=1", "display_name": "Hans", "link": "https://stackoverflow.com/users/3999193/hans"}, "reply_to_user": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1421276163, "post_id": 27953865, "comment_id": 44303034, "body": "The raw data is available as txt files only and the requirement is to use perl only."}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 1, "creation_date": 1421277213, "post_id": 27953865, "comment_id": 44303445, "body": "Take a look at <a href=\"https://metacpan.org/pod/DBD::SQLite\" rel=\"nofollow noreferrer\"><code>DBD::SQLite</code></a>. It is self-contained (you don&#39;t have to install a separate database server) and will probably be much faster than anything you hack together yourself. Of course, you would have to load the initial set of data into your database first...do these text files change often?"}, {"owner": {"reputation": 7570, "user_id": 17945, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/e8cbc0b9ed29b027a127d8df309af5a6?s=128&d=identicon&r=PG", "display_name": "reinierpost", "link": "https://stackoverflow.com/users/17945/reinierpost"}, "edited": false, "score": 0, "creation_date": 1421282545, "post_id": 27953865, "comment_id": 44305115, "body": "If your files are in CSV format, you can use DBD::CSV. Otherwise, do the same thing and import the files into SQLite tables, or at the very least, CSV files, prior to processing, as others have suggested."}, {"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 1, "creation_date": 1421287870, "post_id": 27953865, "comment_id": 44306354, "body": "show some sample lines from the various files; it&#39;s not perfectly clear what you are asking.  also, you talk about reading the files; what do you want <i>done</i> with the information?  if output to a file, show a sample of that too"}, {"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 0, "creation_date": 1421287992, "post_id": 27953865, "comment_id": 44306390, "body": "there&#39;s nothing in what you <i>do</i> say that makes me think running in parallel would do much good for this."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1421289426, "post_id": 27953865, "comment_id": 44306703, "body": "I agree with @ThisSuitIsBlackNot: I think it is best to use SQLite to create a temporary database out of your <code>name_of_country.txt</code> files, and simply query it as you read through your main file. If the dataset is sufficiently small then the database can be created in memory for an extra boost of speed. But also, as <code>@ysth</code> says, it would be nice to see a real example what sort of data is contained in each of the files, and what sort of relationship exists between them. It may be possible to achieve a similar effect by reading the country files into a Perl data structure instead of a database."}, {"owner": {"reputation": 47, "user_id": 3999193, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/edfd9a9323ac272ba6104ab09f5cee0e?s=128&d=identicon&r=PG&f=1", "display_name": "Hans", "link": "https://stackoverflow.com/users/3999193/hans"}, "edited": false, "score": 0, "creation_date": 1421363432, "post_id": 27953865, "comment_id": 44342014, "body": "I concur. Using the database is the best way to do it. For now I will just the old fashioned way."}], "answers": [{"comments": [{"owner": {"reputation": 47, "user_id": 3999193, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/edfd9a9323ac272ba6104ab09f5cee0e?s=128&d=identicon&r=PG&f=1", "display_name": "Hans", "link": "https://stackoverflow.com/users/3999193/hans"}, "edited": false, "score": 0, "creation_date": 1421280841, "post_id": 27954728, "comment_id": 44304661, "body": "Thanks for the suggestion. This will probably work best if you have only two files and they have the same number of lines. The problem is that the file student_with_country has a different format from the student file and also has additional garbage that I dont need."}, {"owner": {"reputation": 7570, "user_id": 17945, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/e8cbc0b9ed29b027a127d8df309af5a6?s=128&d=identicon&r=PG", "display_name": "reinierpost", "link": "https://stackoverflow.com/users/17945/reinierpost"}, "edited": false, "score": 1, "creation_date": 1421282569, "post_id": 27954728, "comment_id": 44305119, "body": "<code>join</code> assumes sorted files."}], "tags": [], "owner": {"reputation": 2654, "user_id": 1646996, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/e1927a513875cef7a1c2877fdb6b45ae?s=128&d=identicon&r=PG", "display_name": "qqibrow", "link": "https://stackoverflow.com/users/1646996/qqibrow"}, "is_accepted": false, "score": 0, "last_activity_date": 1421280211, "creation_date": 1421280211, "answer_id": 27954728, "question_id": 27953865, "link": "https://stackoverflow.com/questions/27953865/perl-reading-and-processing-multiple-files-in-parallel/27954728#27954728", "title": "Perl : Reading and processing multiple files in parallel", "body": "<p>I will treat your question as: How to efficient perform a \"join\" operation of two files and here is the answer.</p>\n\n<p>Actually there is a <code>join</code> command in Unix.\n<a href=\"http://linux.die.net/man/1/join\" rel=\"nofollow\">http://linux.die.net/man/1/join</a></p>\n\n<p>Suppose you have two files, student and student_with_country:</p>\n\n<pre><code>student: [name] [age] [...]\nstudent_with_country: [name] [country] [...]\n</code></pre>\n\n<p>you can do:</p>\n\n<pre><code>join student student_with_country (by default, it will join based on the first field)\n</code></pre>\n\n<p>Then the question is how to make it faster by using multiple cores?</p>\n\n<p>Answer is <a href=\"http://www.gnu.org/software/parallel/\" rel=\"nofollow\">parallel</a> command. Basically, you can run a simple map-reduce program using it. For example, in this case</p>\n\n<pre><code>cat student_with_country | parallel --block 10M --pipe join student - \n</code></pre>\n\n<p>It will divide the student_with_country file into 10M blocks and run the join command in parallel. In this way, you can utilize power of multiple cores.</p>\n"}, {"tags": [], "owner": {"reputation": 22505, "user_id": 1411457, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/XqssD.png?s=128&g=1", "display_name": "harmic", "link": "https://stackoverflow.com/users/1411457/harmic"}, "is_accepted": true, "score": 1, "last_activity_date": 1421290193, "creation_date": 1421290193, "answer_id": 27956051, "question_id": 27953865, "link": "https://stackoverflow.com/questions/27953865/perl-reading-and-processing-multiple-files-in-parallel/27956051#27956051", "title": "Perl : Reading and processing multiple files in parallel", "body": "<p>What you are trying to do here is similar to what a database engine has to do when joining data from two tables together. A database engine will typically have a number of different join plans to choose from, and it will attempt to choose the best one based on what it knows about the data in each table. </p>\n\n<p>The same applies to you. There are several ways to join the data and the best way will depend on factors such as the size of each of the input files, whether they are pre-sorted, etc.</p>\n\n<p>Some possible approaches:</p>\n\n<ol>\n<li><p>A 'Nested Loop', where you read each line of the enrolled_students.txt file and for each of those iterate through the other file(s) to find a match. Not likely to be very fast, you would probably only choose this if the files were too large to make any other solution practical.</p></li>\n<li><p>A 'Hash Join', where you would read one half of the data to be joined (in your example, probably the name_of_country.txt) into a data structure indexed by a hash. Then for each row of the other file, you can look up the corresponding row in the hash. This can be quite high performance, as long as there is enough memory to store at least one of the two sets of data at once.</p></li>\n<li><p>If both files are in some sorted order, sorted according to the same key, you might be able to use a 'Merge Join'. This is where you read rows from both files at once, matching the records together like teeth in a zipper.</p></li>\n</ol>\n\n<p>The above assumes a simple case with two data files that have to be joined. Your question talks about 100 different name_of_country.txt files, which might complicate matters.</p>\n\n<p>In regard to your second question - can you use parallel processing - that would probably only be useful if the processing was CPU-bound. The complexity of producing a forked or threaded solution is probably not warranted unless you find that it is actually CPU bound.</p>\n\n<p>Finally - if you are doing multiple analysis runs of the same data, it might be advisable to import the data into a real database and use that run queries. That would save you a lot of coding work.</p>\n"}], "owner": {"reputation": 47, "user_id": 3999193, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/edfd9a9323ac272ba6104ab09f5cee0e?s=128&d=identicon&r=PG&f=1", "display_name": "Hans", "link": "https://stackoverflow.com/users/3999193/hans"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 853, "favorite_count": 0, "accepted_answer_id": 27956051, "answer_count": 2, "score": 0, "last_activity_date": 1421290193, "creation_date": 1421275629, "question_id": 27953865, "link": "https://stackoverflow.com/questions/27953865/perl-reading-and-processing-multiple-files-in-parallel", "title": "Perl : Reading and processing multiple files in parallel", "body": "<p>I have one file (lets call it enrolled_students.txt) that I need to read in Perl. This file will have data per line such that it requires to refer other files for getting some more information. </p>\n\n<p>For example, the main database will have names and addresses. But depending on the nationality of each person, I have to refer other files (sorted by country) to find the matching name, the nationality and home address.</p>\n\n<p>Lets say I have 100 name_of_country.txt files and there are 10,000 lines in my enrolled_students.txt. My questions are:</p>\n\n<ul>\n<li>Do I read each line in enrolled_students.txt and parse the other 100 files one by to find a match? That seems like an awful way to process this data. Is there a faster way to do this?</li>\n<li>Can I execute this process in parallel mode (multithread)?</li>\n</ul>\n\n<p>Thanks,\nHans</p>\n"}, {"tags": ["perl", "indexing"], "answers": [{"tags": [], "owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "is_accepted": true, "score": 2, "last_activity_date": 1421292733, "last_edit_date": 1421292733, "creation_date": 1421277741, "answer_id": 27954315, "question_id": 27953864, "link": "https://stackoverflow.com/questions/27953864/modification-of-non-creatable-array-value-attempted-subscript-4/27954315#27954315", "title": "Modification of non-creatable array value attempted, subscript -4", "body": "<p>Yes, because subroutine parameters are aliases to the actual value, the value has to exist, and while it will create positive indexes if they don't exist, it doesn't lengthen the array to create negative indexes, because that would change the meaning of other indexes that do exist.</p>\n\n<p>You can see this simply with:</p>\n\n<pre><code>perl -wle'@x = 1..3; sub{}-&gt;(@x[-4..-1])'\nModification of non-creatable array value attempted, subscript -4 at -e line 1.\n</code></pre>\n\n<p>So you should figure out why there are less than four week_start_dates.</p>\n\n<p>Or if having less than four week_start_dates is acceptable, you could use the following:</p>\n\n<pre><code>@week_start_dates &gt; 4 ? @week_start_dates[-4..-1] : @week_start_dates\n</code></pre>\n"}], "owner": {"reputation": 177, "user_id": 3853877, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/8b6e700bad5f36f5129e523551d8eb2e?s=128&d=identicon&r=PG&f=1", "display_name": "javalearner", "link": "https://stackoverflow.com/users/3853877/javalearner"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 764, "favorite_count": 0, "accepted_answer_id": 27954315, "answer_count": 1, "score": 0, "last_activity_date": 1421292733, "creation_date": 1421275626, "question_id": 27953864, "link": "https://stackoverflow.com/questions/27953864/modification-of-non-creatable-array-value-attempted-subscript-4", "title": "Modification of non-creatable array value attempted, subscript -4", "body": "<p>I am newbie to perl. My script was running for months together and now it is causing a problem and it wont send an email. The script actually sends 2 different graphs (line and bar) of the total number cases per week and its average.\nThis is the line that is throwing error.</p>\n\n<p>$graph->set_legend(@week_start_dates[-4..-1]);\nError message-Modification of non-creatable array value attempted, subscript -4</p>\n\n<p>Is it something to do with perl where you cannot increase the index on left.(-4,-5) etc.\nAny thoughts much appreciated.Thanks</p>\n"}, {"tags": ["multithreading", "perl", "ssh"], "comments": [{"owner": {"reputation": 9262, "user_id": 124951, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/c46d5911a8fb4ffd5fb8523d56a60de0?s=128&d=identicon&r=PG", "display_name": "salva", "link": "https://stackoverflow.com/users/124951/salva"}, "edited": false, "score": 0, "creation_date": 1421306449, "post_id": 27953651, "comment_id": 44310916, "body": "That is probably caused by some bug in Net::SSH2 or in libssh2. The only solution is to find and fix it."}, {"owner": {"reputation": 2920, "user_id": 3360140, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/OThx0.jpg?s=128&g=1", "display_name": "Kamrul Khan", "link": "https://stackoverflow.com/users/3360140/kamrul-khan"}, "reply_to_user": {"reputation": 9262, "user_id": 124951, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/c46d5911a8fb4ffd5fb8523d56a60de0?s=128&d=identicon&r=PG", "display_name": "salva", "link": "https://stackoverflow.com/users/124951/salva"}, "edited": false, "score": 0, "creation_date": 1421423214, "post_id": 27953651, "comment_id": 44366180, "body": "hmm.. I replaced threads by forks .. that solved my issue."}, {"owner": {"reputation": 9262, "user_id": 124951, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/c46d5911a8fb4ffd5fb8523d56a60de0?s=128&d=identicon&r=PG", "display_name": "salva", "link": "https://stackoverflow.com/users/124951/salva"}, "edited": false, "score": 0, "creation_date": 1421423541, "post_id": 27953651, "comment_id": 44366383, "body": "If you are going to run your script in a Linux/Unix box, you may like to use <a href=\"https://metacpan.org/pod/Net::OpenSSH\" rel=\"nofollow noreferrer\">Net::OpenSSH</a><a href=\"https://metacpan.org/pod/Net::OpenSSH::Parallel\" rel=\"nofollow noreferrer\">::Parallel</a> instead!"}, {"owner": {"reputation": 4153, "user_id": 919434, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/426aadae869c9a312275e8a7f5e01774?s=128&d=identicon&r=PG", "display_name": "Sim", "link": "https://stackoverflow.com/users/919434/sim"}, "edited": false, "score": 0, "creation_date": 1467974189, "post_id": 27953651, "comment_id": 63948662, "body": "had the same problem with common-lisp,sbcl and libssh2. Using mutexes solved the problem."}], "answers": [{"tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": true, "score": 2, "last_activity_date": 1423327613, "creation_date": 1423327613, "answer_id": 28384720, "question_id": 27953651, "link": "https://stackoverflow.com/questions/27953651/perl-netssh2-with-thread-crashing/28384720#28384720", "title": "Perl Net::SSH2 with thread crashing", "body": "<p>It's not really a <code>perl</code> error there - that's a bit of C code within the <code>Net::SSH</code> library. </p>\n\n<p>There are some indications that you aren't the only one to hit this problem:</p>\n\n<p><a href=\"http://www.perlmonks.org/?node_id=936201\" rel=\"nofollow\">http://www.perlmonks.org/?node_id=936201</a></p>\n\n<p><a href=\"http://lists.gnupg.org/pipermail/gcrypt-devel/2006-January/000910.html\" rel=\"nofollow\">http://lists.gnupg.org/pipermail/gcrypt-devel/2006-January/000910.html</a></p>\n\n<p>It would appear there may be a bug in GnuTLS, which makes it not thread safe. \nWorkarounds would be:</p>\n\n<ul>\n<li>single thread the 'TLS' bit. </li>\n<li>use <code>fork</code> instead of threading. (<code>Parallel::ForkManager</code> is pretty good for this). </li>\n<li><code>Net::OpenSSH::Parallel</code> might also do the trick. </li>\n</ul>\n"}], "owner": {"reputation": 2920, "user_id": 3360140, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/OThx0.jpg?s=128&g=1", "display_name": "Kamrul Khan", "link": "https://stackoverflow.com/users/3360140/kamrul-khan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 267, "favorite_count": 0, "accepted_answer_id": 28384720, "answer_count": 1, "score": 2, "last_activity_date": 1423327613, "creation_date": 1421274636, "question_id": 27953651, "link": "https://stackoverflow.com/questions/27953651/perl-netssh2-with-thread-crashing", "title": "Perl Net::SSH2 with thread crashing", "body": "<p>I have a code like below. My problem is it is crashing in random basis with the following error:</p>\n\n<pre><code>perl: ath.c:193: _gcry_ath_mutex_lock: Assertion `*lock == ((ath_mutex_t) 0)' failed.\n</code></pre>\n\n<p>Like if I run the code 10 time it crashes 2-3 times. How to fix it?</p>\n\n<pre><code>use warnings;\nuse strict;\nuse Net::SSH2;\nuse threads;\n\nsub gsmExec {\n    $host = $_[0];\n    $port = $_[1];\n    $user = $_[2];\n    $pass = $_[3];\n    my $modem = Net::SSH2-&gt;new();\n    print \"Trying to connect host $host : $port \\n\";\n    if($modem-&gt;connect($host,$port)) {\n        print \"connected to host ..\\n\";\n\n        if ($modem-&gt;auth_password($user,$password) {\n            print \"Authorized!!\";\n        }\n    }\n}\n\nfor(my $j = 1; $j &lt;= $modemCount; $j++){\n        $thrList[$j] = threads-&gt;create(\\&amp;gsmExec,'host',22,'user','pass');\n}\n</code></pre>\n"}, {"tags": ["arrays", "regex", "perl"], "comments": [{"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 3, "creation_date": 1421273441, "post_id": 27953318, "comment_id": 44301821, "body": "This seems like an <a href=\"http://meta.stackexchange.com/questions/66377/what-is-the-xy-problem\">XY problem</a>. Can you please explain exactly what you&#39;re trying to do instead of how you&#39;re trying to do it? There may be a better approach than using nested loops."}, {"owner": {"reputation": 589595, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1421273626, "post_id": 27953318, "comment_id": 44301908, "body": "Put the matches in a list instead of printing them. Then after the loop, print the first and last list elements."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1421288616, "post_id": 27953318, "comment_id": 44306530, "body": "You are using a substitution that <i>removg</i> any matches found, and I wonder if you realise that this can affect what strings match later on. For instance, if <code>@array</code> contains <code>(&#39;abc&#39;, &#39;def&#39;)</code>, and one element of <code>@array2</code> is <code>dabcef</code> then the first pass will say that <code>abc</code> has been found <i>but change the element from <code>dabcef</code> to <code>def</code></i>. So the next pass will say that <code>def</code> also matches, which wasn&#39;t true before the modification. Is that intentional?"}], "answers": [{"comments": [{"owner": {"reputation": 12075, "user_id": 1137055, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/59d7b43b9eb7d01bd8f7e51febe6053c?s=128&d=identicon&r=PG", "display_name": "dgw", "link": "https://stackoverflow.com/users/1137055/dgw"}, "edited": false, "score": 0, "creation_date": 1421273969, "post_id": 27953469, "comment_id": 44302063, "body": "If there is only one match, this would print it twice."}], "tags": [], "owner": {"reputation": 1230, "user_id": 3166498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/fbc18f10b502469dfdec70ffeb98c6d4?s=128&d=identicon&r=PG&f=1", "display_name": "sam", "link": "https://stackoverflow.com/users/3166498/sam"}, "is_accepted": false, "score": 1, "last_activity_date": 1421274519, "last_edit_date": 1421274519, "creation_date": 1421273767, "answer_id": 27953469, "question_id": 27953318, "link": "https://stackoverflow.com/questions/27953318/first-and-last-regex-match/27953469#27953469", "title": "First and last regex match", "body": "<pre><code>foreach my $elm2 (@array2) {\n     my $state = 'start';\n     my $first, $last;\n\n     foreach my $elm1(@array1) {\n           if (($state eq 'start') &amp;&amp; ($elm1 =~ m/$elm2/i)) {\n               $first =  \"$elm1\";\n               $state = 'last';\n           }\n           elsif (($state eq 'last') &amp;&amp; ($elm1 =~ m/$elm2/i)) {\n               $last = $elm1;\n           }\n     }\n     print \"$elm2,$first,$last\\n\";\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 409, "user_id": 3423572, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/c398adddc87117f58ec14059922f8e9b?s=128&d=identicon&r=PG&f=1", "display_name": "user3423572", "link": "https://stackoverflow.com/users/3423572/user3423572"}, "edited": false, "score": 0, "creation_date": 1421275236, "post_id": 27953628, "comment_id": 44302642, "body": "You missed a parenthesis on the &quot;if (!length($first){&quot; line - close bracket. Apart from that your idea worked like a charm! Thanks"}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user557597"}, "is_accepted": true, "score": 0, "last_activity_date": 1421275342, "last_edit_date": 1421275342, "creation_date": 1421274511, "answer_id": 27953628, "question_id": 27953318, "link": "https://stackoverflow.com/questions/27953318/first-and-last-regex-match/27953628#27953628", "title": "First and last regex match", "body": "<p>Could maybe do this  </p>\n\n<pre><code>foreach (@array)\n{\n    $first = \"\";\n    $last = \"\";\n    $element = $_;\n    foreach(@array2)\n    {\n        if($_ =~ s/($element)//ig)\n        {\n            if (!length($first)){\n                $first = $_;\n            }\n            else {\n                $last = $_;\n            }\n        }\n    }\n    if (length($first) &amp;&amp; length($last)) {\n        print \"\\n----------\\nfirst = '$first'\\nlast = '$last'\";\n    }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1230, "user_id": 3166498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/fbc18f10b502469dfdec70ffeb98c6d4?s=128&d=identicon&r=PG&f=1", "display_name": "sam", "link": "https://stackoverflow.com/users/3166498/sam"}, "is_accepted": false, "score": 0, "last_activity_date": 1421275453, "creation_date": 1421275453, "answer_id": 27953832, "question_id": 27953318, "link": "https://stackoverflow.com/questions/27953318/first-and-last-regex-match/27953832#27953832", "title": "First and last regex match", "body": "<p>Totally forgot about grep.</p>\n\n<pre><code>foreach my $elm2 (@array2) {\n      my @matches = grep(/$elm2/i, @array1);\n      if (@matches &amp;&amp; (scalar (@matches &gt; 1))) {\n         print \"$elm2,$matches[0], $matches[-1]\\n\";\n      }\n      elsif (@matches) {\n         print \"$elm2,$matches[0]\\n\";\n      }\n      else {print \"no matches\\n\";};\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 795, "user_id": 2651994, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/d9c186dfe9e6d9dba2747de09636779e?s=128&d=identicon&r=PG", "display_name": "lightbringer", "link": "https://stackoverflow.com/users/2651994/lightbringer"}, "edited": false, "score": 0, "creation_date": 1421275787, "post_id": 27953888, "comment_id": 44302875, "body": "of course if there is only 1 match, the pattern will be printed twice"}], "tags": [], "owner": {"reputation": 795, "user_id": 2651994, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/d9c186dfe9e6d9dba2747de09636779e?s=128&d=identicon&r=PG", "display_name": "lightbringer", "link": "https://stackoverflow.com/users/2651994/lightbringer"}, "is_accepted": false, "score": 0, "last_activity_date": 1421275690, "creation_date": 1421275690, "answer_id": 27953888, "question_id": 27953318, "link": "https://stackoverflow.com/questions/27953318/first-and-last-regex-match/27953888#27953888", "title": "First and last regex match", "body": "<p>a bit late but this is what I think you could use</p>\n\n<p>Find first match</p>\n\n<pre><code>if ($_ =~ m/($element)/) { print $1; }\n</code></pre>\n\n<p>Find last match</p>\n\n<pre><code>if ($_ =~ m/.*($element)/) { print $1; }\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 0, "last_activity_date": 1421288910, "creation_date": 1421288910, "answer_id": 27955885, "question_id": 27953318, "link": "https://stackoverflow.com/questions/27953318/first-and-last-regex-match/27955885#27955885", "title": "First and last regex match", "body": "<p>Assuming you want to check which elements of <code>@array2</code> match any of the patterns in <code>@array</code> and print the first and last of those,  it is simplest to build an alternation regex from the contents of <code>@array</code> and filter <code>@array2</code> using that.</p>\n\n<p>Like this</p>\n\n<pre><code>my $re = join '|', @array; # Build a regex\n$re = qr/$re/;             # Compile it\n\nmy @matches = grep /$re/, @array2;\nprint \"$_\\n\" for @matches[0,-1];\n</code></pre>\n"}], "owner": {"reputation": 409, "user_id": 3423572, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/c398adddc87117f58ec14059922f8e9b?s=128&d=identicon&r=PG&f=1", "display_name": "user3423572", "link": "https://stackoverflow.com/users/3423572/user3423572"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 167, "favorite_count": 0, "accepted_answer_id": 27953628, "answer_count": 5, "score": 0, "last_activity_date": 1421288910, "creation_date": 1421273119, "question_id": 27953318, "link": "https://stackoverflow.com/questions/27953318/first-and-last-regex-match", "title": "First and last regex match", "body": "<p>Hi I have a problem with my program, I have wrote the code below and it returns the expected result. However I only am intrested in the first and last occurance of the matches. How would I go about doing this?</p>\n\n<pre><code>foreach (@array)\n{\n    $element = $_;\n    foreach(@array2)\n    {\n        if($_ =~ s/($element)//ig)\n        {\n            print \"$_ \\n\";\n        }\n    }\n}\n</code></pre>\n\n<p>Currently the loop goes through every element in the array finds it in the second array and prints the whole line. It returns the expected result, however I want the first match and last match.</p>\n"}, {"tags": ["perl", "ip", "trim"], "comments": [{"owner": {"reputation": 3406, "user_id": 2145522, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/500c382ba3b794884fe1f78f9f1efd2d?s=128&d=identicon&r=PG", "display_name": "R&#233;mi", "link": "https://stackoverflow.com/users/2145522/r%c3%a9mi"}, "edited": false, "score": 0, "creation_date": 1421270677, "post_id": 27952603, "comment_id": 44300496, "body": "Show us what you have tryed so far. As this question stand it pretty mutch ask &quot;please give me code&quot;. As it stand now it will probably be closed. Try to work the process in your language and than translate that to code. Split ip on the dot, pad with leading 0 if each part are less than 3 caracters, add the dot, etc."}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 4455210, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8fca2a57ad3bf9ef37c937669c0ada5d?s=128&d=identicon&r=PG&f=1", "display_name": "chadb", "link": "https://stackoverflow.com/users/4455210/chadb"}, "edited": false, "score": 0, "creation_date": 1421816078, "post_id": 27953988, "comment_id": 44501048, "body": "thanks for writing this, i agree, i think it will be better with JS."}], "tags": [], "owner": {"reputation": 2078, "user_id": 2616428, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2ieQ7.jpg?s=128&g=1", "display_name": "pajaja", "link": "https://stackoverflow.com/users/2616428/pajaja"}, "is_accepted": true, "score": 0, "last_activity_date": 1421276107, "creation_date": 1421276107, "answer_id": 27953988, "question_id": 27952603, "link": "https://stackoverflow.com/questions/27952603/ip-address-to-nsap-id/27953988#27953988", "title": "ip address to NSAP ID", "body": "<p>NSAP ID or a End System ID is a 6 byte field usually represented in dot-decimal notation as <code>xxxx.xxxx.xxxx</code>. The two zeros you add at the end are NSAP Selector (NSEL) which identifies a network service user which in your case is network entity title (NET) or a network layer of a system itself. So what you are making technically is not NSAP ID but a last part of a NSAP address.</p>\n\n<p>Below is a perl script that takes IP address (<code>$ip</code>) and does the stuff you explained in your question and prints it.</p>\n\n<pre><code>my $tmp = \"\";\nforeach my $part (split('\\.', $ip)){\n  $tmp = $tmp . sprintf(\"%03s\", $part);\n}\n$tmp =~ s/(.{4})/$1./g;\nprint $tmp . \"00\";\n</code></pre>\n\n<p>If you are going to use this on a website in a form maybe it's easier to write it in javascript so you can display it immediately to the user.</p>\n"}], "owner": {"reputation": 3, "user_id": 4455210, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8fca2a57ad3bf9ef37c937669c0ada5d?s=128&d=identicon&r=PG&f=1", "display_name": "chadb", "link": "https://stackoverflow.com/users/4455210/chadb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 365, "favorite_count": 0, "accepted_answer_id": 27953988, "answer_count": 1, "score": -2, "last_activity_date": 1421276107, "creation_date": 1421270189, "question_id": 27952603, "link": "https://stackoverflow.com/questions/27952603/ip-address-to-nsap-id", "title": "ip address to NSAP ID", "body": "<p>can anyone help me come up with a perl script or javascript that would translate an IP address to an NSAP ID? i have a form for users to fill out and with the ip address and would like to auto populate the NSAP portion.</p>\n\n<p>These are some requirements</p>\n\n<p>Example: \n192.168.1.1</p>\n\n<p>pad  each octet to 3 characters\n192.168.001.001</p>\n\n<p>change to groups of 4\n1921.6800.1001</p>\n\n<p>add .00 to the end\n1921.6800.1001.00</p>\n\n<p>Thanks</p>\n"}, {"tags": ["python", "perl", "batch-file", "scripting"], "comments": [{"owner": {"reputation": 59189, "user_id": 778560, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/52ebdc4690fff7b07d3644c4cb7b255a?s=128&d=identicon&r=PG", "display_name": "Aacini", "link": "https://stackoverflow.com/users/778560/aacini"}, "edited": false, "score": 1, "creation_date": 1421523705, "post_id": 27950092, "comment_id": 44395699, "body": "@Community: Why the downvotes on this question? If you downvote it, at least explain your reasons in a comment... :("}, {"owner": {"reputation": 441, "user_id": 943571, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/vmckI.jpg?s=128&g=1", "display_name": "Jiraheta", "link": "https://stackoverflow.com/users/943571/jiraheta"}, "reply_to_user": {"reputation": 59189, "user_id": 778560, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/52ebdc4690fff7b07d3644c4cb7b255a?s=128&d=identicon&r=PG", "display_name": "Aacini", "link": "https://stackoverflow.com/users/778560/aacini"}, "edited": false, "score": 0, "creation_date": 1422640901, "post_id": 27950092, "comment_id": 44844659, "body": "I was thinking the same thing..."}], "answers": [{"tags": [], "owner": {"reputation": 538, "user_id": 2665510, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/206d5329545626249295c231282fe994?s=128&d=identicon&r=PG", "display_name": "wilkesybear", "link": "https://stackoverflow.com/users/2665510/wilkesybear"}, "is_accepted": false, "score": 2, "last_activity_date": 1421262001, "creation_date": 1421262001, "answer_id": 27950474, "question_id": 27950092, "link": "https://stackoverflow.com/questions/27950092/how-to-extract-multiple-text-on-a-text-file-with-a-scripting-language/27950474#27950474", "title": "How to extract multiple text on a text file with a scripting language", "body": "<p>I would use <a href=\"https://docs.python.org/2/library/re.html\" rel=\"nofollow\">regular expressions</a> to do this:</p>\n\n<pre><code>#!/usr/bin/env python\n\nimport re\n\nwith open('batch01.txt') as infile, open('result.txt', 'w') as outfile:\n    for line in infile:\n        m = re.search('(EDID description|- Current video timing): (.*)', line)\n        if m is not None:\n            outfile.write(m.group(2) + '\\n') \n</code></pre>\n\n<p>This will print out</p>\n\n<pre><code>1280x720p 60Hz\nE01A0A8A.xml\n1280x720p 60Hz\nE01A0C88.xml\n1280x720p 60Hz\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 4692, "user_id": 4289293, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/79d437940933d37d70f44e4091659c39?s=128&d=identicon&r=PG&f=1", "display_name": "rchang", "link": "https://stackoverflow.com/users/4289293/rchang"}, "is_accepted": false, "score": 1, "last_activity_date": 1421262353, "last_edit_date": 1421262353, "creation_date": 1421262043, "answer_id": 27950491, "question_id": 27950092, "link": "https://stackoverflow.com/questions/27950092/how-to-extract-multiple-text-on-a-text-file-with-a-scripting-language/27950491#27950491", "title": "How to extract multiple text on a text file with a scripting language", "body": "<p>It seems you actually need to be checking whether a given line starts with certain substrings, rather than a full exact comparison (which is what the <code>==</code> operator gives you).  Instead, your <code>for</code> loop should use the <code>startswith</code> method to look at the beginning of the line and look closer to this:</p>\n\n<pre><code>for line in infile:\n    if line.strip().startswith(\"EDID description:\"):\n        copy = True\n    elif line.strip().startswith(\"Report complete.on:\"):  # Based on your data, it seems like you need to check for these as well - maybe not?\n        copy = True\n    elif line.strip().startswith(\"- Current video timing\"):\n        copy = True\n    else:\n        copy = False\n    if copy:\n        outfile.write(line)\n</code></pre>\n\n<p>But the loop can be streamlined significantly:</p>\n\n<pre><code>prefixes = [\n \"EDID description:\", \"Report complete.on:\", \"- Current video timing\"\n]\nfor line in infile:\n    for prefix in prefixes:\n        if line.strip().startswith(prefix):\n            outfile.write(line)\n            break\n</code></pre>\n\n<p>This eliminates the multi-branched <code>if</code>/<code>elif</code> structure as well as the boolean <code>copy</code> flag.</p>\n\n<p>With your sample input data, I got this in the result file:</p>\n\n<pre><code>Report complete.on: E01A040E.xml\n- Current video timing: 1280x720p 60Hz\nEDID description: E01A0A8A.xml\n- Current video timing: 1280x720p 60Hz\nEDID description: E01A0C88.xml\n- Current video timing: 1280x720p 60Hz\n</code></pre>\n\n<p>Again, I'm not sure whether you wanted that \"Report complete.on\" line or not, but it looked to me like you do.</p>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 3587345, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5bdd44f6c8b873368634ab238f312e8b?s=128&d=identicon&r=PG&f=1", "display_name": "user3587345", "link": "https://stackoverflow.com/users/3587345/user3587345"}, "is_accepted": false, "score": 1, "last_activity_date": 1421262174, "creation_date": 1421262174, "answer_id": 27950529, "question_id": 27950092, "link": "https://stackoverflow.com/questions/27950092/how-to-extract-multiple-text-on-a-text-file-with-a-scripting-language/27950529#27950529", "title": "How to extract multiple text on a text file with a scripting language", "body": "<p>Without actually running this I see three issues that you need to resolve.</p>\n\n<ol>\n<li>Your equality conditions in the if/elif control structure will never be true.</li>\n<li>Assume for a moment that what I described in number 1 is true; the final elif will not actually be reached because once either of the preceeding expressions evaluates as true, the rest of the if/elif short-circuits and doesn't check for additional conditions.</li>\n<li>You need to \"reset\" copy = False before the next iteration of your for loop otherwise copy will remain true for everything after the first time copy = True is set.</li>\n</ol>\n\n<p>Suggested fixes:</p>\n\n<ol>\n<li>Use something like 'line.strip().find('EDID description:')' to determine if the line <strong>contains</strong> the string you are looking for.  Again,  you need to determine if the substring is <strong>in</strong> the line, <strong>not equal to the line.</strong></li>\n<li>You need to move your copy operation outside of the if/elif structure.  That is, instead of making it part of the same if/elif structure, create a separate 'if copy:' structure after the current one to output the line if the line was found.</li>\n<li>After you output the line, set copy=False so that the next iteration of the for loop is initialized properly.  Otherwise you'll have every line after the first match print.</li>\n</ol>\n\n<p>Something like this:  (I have not actually tested this...)</p>\n\n<pre><code>#!/usr/bin/env python\n\ninFile = open(\"batch01.txt\")\noutFile = open(\"result.txt\", \"w\")\n\nwith open('batch01.txt') as infile, open('result.txt', 'w') as outfile:\n    copy = False\n    for line in infile:\n        # use the find to see if the line CONTAINS the string you are looking for\n        if line.strip().find(\"EDID description:\"):\n            copy = True\n        elif line.strip().find(\"- Current video timing\"):\n            copy = True\n\n        # make this a separate if\n        if copy:\n            outfile.write(line)\n\n        # reset this to False to it can be evaluated and set properly in the next iteration\n        copy = False\n\ninFile.close()\noutFile.close()\n</code></pre>\n\n<p>Hope this helps.</p>\n"}, {"comments": [{"owner": {"reputation": 441, "user_id": 943571, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/vmckI.jpg?s=128&g=1", "display_name": "Jiraheta", "link": "https://stackoverflow.com/users/943571/jiraheta"}, "edited": false, "score": 0, "creation_date": 1421350540, "post_id": 27951424, "comment_id": 44335744, "body": "this was exactly what I was looking to do. But didn&#39;t know if it would be possible to be done in a batch file. Would you mind explaining why of the &quot;tokens=3,5,6&quot; I am assuming that %%a %%b %%c correspond to the each tokens, is that correct? thank you so much."}, {"owner": {"reputation": 441, "user_id": 943571, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/vmckI.jpg?s=128&g=1", "display_name": "Jiraheta", "link": "https://stackoverflow.com/users/943571/jiraheta"}, "edited": false, "score": 0, "creation_date": 1421352428, "post_id": 27951424, "comment_id": 44336739, "body": "quick question, let say that there is no Current video timing and instead for it to be blank. I would like for it to say No VSYNC detected. I played around with your code but haven&#39;t been able to achieve it at this point."}, {"owner": {"reputation": 59189, "user_id": 778560, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/52ebdc4690fff7b07d3644c4cb7b255a?s=128&d=identicon&r=PG", "display_name": "Aacini", "link": "https://stackoverflow.com/users/778560/aacini"}, "reply_to_user": {"reputation": 441, "user_id": 943571, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/vmckI.jpg?s=128&g=1", "display_name": "Jiraheta", "link": "https://stackoverflow.com/users/943571/jiraheta"}, "edited": false, "score": 0, "creation_date": 1421523374, "post_id": 27951424, "comment_id": 44395603, "body": "Exactly. Each letter correspond to the next token defined in <code>&quot;tokens=...</code> part. By default, the tokens in the input line are separated by spaces or tabs. See the edit in my answer and compare how I used the tokens now vs. the previous version."}], "tags": [], "owner": {"reputation": 59189, "user_id": 778560, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/52ebdc4690fff7b07d3644c4cb7b255a?s=128&d=identicon&r=PG", "display_name": "Aacini", "link": "https://stackoverflow.com/users/778560/aacini"}, "is_accepted": true, "score": 1, "last_activity_date": 1421523087, "last_edit_date": 1421523087, "creation_date": 1421265712, "answer_id": 27951424, "question_id": 27950092, "link": "https://stackoverflow.com/questions/27950092/how-to-extract-multiple-text-on-a-text-file-with-a-scripting-language/27951424#27951424", "title": "How to extract multiple text on a text file with a scripting language", "body": "<p>Below there is a Batch-file .bat solution, that I think is simpler...</p>\n\n<p><strong>EDIT</strong>: <em>Program modifed as requested in comment</em></p>\n\n<pre><code>@echo off\n(for /F \"tokens=3-6\" %%a in ('findstr /L \".xml Current\" batch01.txt') do (\n   if \"%%b\" equ \"\" (\n      set /P \"=%%a - \" &lt; NUL\n   ) else (\n      if \"%%c\" equ \"\" (\n         echo No VSYNC detected\n      ) else (\n         echo Current video timing: %%c %%d\n      )\n   )\n)) &gt; result.txt\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>E01A040E.xml - Current video timing: 1280x720p 60Hz\nE01A0A8A.xml - Current video timing: 1280x720p 60Hz\nE01A0C88.xml - Current video timing: 1280x720p 60Hz\n</code></pre>\n"}], "owner": {"reputation": 441, "user_id": 943571, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/vmckI.jpg?s=128&g=1", "display_name": "Jiraheta", "link": "https://stackoverflow.com/users/943571/jiraheta"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 170, "favorite_count": 0, "accepted_answer_id": 27951424, "answer_count": 4, "score": -3, "last_activity_date": 1421523087, "creation_date": 1421260640, "question_id": 27950092, "link": "https://stackoverflow.com/questions/27950092/how-to-extract-multiple-text-on-a-text-file-with-a-scripting-language", "title": "How to extract multiple text on a text file with a scripting language", "body": "<p>Most likely this has been asked but I haven't been able to get a good sense of codes out there to achieve what I am after.</p>\n\n<p>I have a text file with 1000 entries like the following 3 consecutive entries. out of that text file I want to extract</p>\n\n<p><strong>number.xml</strong> and its corresponding <strong>Current video timing: 1280x720p 60Hz</strong>\nand spit it on a text file one by one. </p>\n\n<pre><code>Report complete.on: E01A040E.xml\nEDID raw data:\n---  00 01 02 03 04 05 06 07 08 09 0A 0B 0C 0D 0E 0F\n000  00 FF FF FF FF FF FF 00 4C 2D FC 08 00 00 00 00 \n010  29 15 01 03 80 10 09 78 0A EE 91 A3 54 4C 99 26 \n020  0F 50 54 BD EE 00 81 C0 01 01 01 01 01 01 01 01 \n030  01 01 01 01 01 01 66 21 56 AA 51 00 1E 30 46 8F \n040  33 00 A0 5A 00 00 00 1E 01 1D 00 72 51 D0 1E 20 \n050  6E 28 55 00 A0 5A 00 00 00 1E 00 00 00 FD 00 18 \n060  4B 0F 44 17 00 0A 20 20 20 20 20 20 00 00 00 FC \n070  00 53 41 4D 53 55 4E 47 0A 20 20 20 20 20 01 6D \n080  02 03 1F F1 47 84 05 03 10 20 22 07 23 09 07 07 \n090  83 01 00 00 E2 00 0F 67 03 0C 00 10 00 B8 2D 01 \n0A0  1D 80 18 71 1C 16 20 58 2C 25 00 A0 5A 00 00 00 \n0B0  9E 8C 0A D0 8A 20 E0 2D 10 10 3E 96 00 A0 5A 00 \n0C0  00 00 18 02 3A 80 18 71 38 2D 40 58 2C 45 00 A0 \n0D0  5A 00 00 00 1E 00 00 00 00 00 00 00 00 00 00 00 \n0E0  00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 \n0F0  00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 FD \n+5V: OK\nVideo information:\n- Current video timing: 1280x720p 60Hz\n- Incoming video matches CEA-861 VIC 4 and 69 exactly\n- HDMI video detected\n- Received AVI VIC 4\n- Color space: YCbCr 4:4:4 8 bpc\n# \nEDID description: E01A0A8A.xml\nEDID raw data:\n---  00 01 02 03 04 05 06 07 08 09 0A 0B 0C 0D 0E 0F\n000  00 FF FF FF FF FF FF 00 4C 2D FC 08 00 00 00 00 \n010  29 15 01 03 80 10 09 78 0A EE 91 A3 54 4C 99 26 \n020  0F 50 54 BD EE 00 81 C0 01 01 01 01 01 01 01 01 \n030  01 01 01 01 01 01 66 21 56 AA 51 00 1E 30 46 8F \n040  33 00 A0 5A 00 00 00 1E 01 1D 00 72 51 D0 1E 20 \n050  6E 28 55 00 A0 5A 00 00 00 1E 00 00 00 FD 00 18 \n060  4B 0F 44 17 00 0A 20 20 20 20 20 20 00 00 00 FC \n070  00 53 41 4D 53 55 4E 47 0A 20 20 20 20 20 01 6D \n080  02 03 1F F1 47 84 05 03 10 20 22 07 23 09 07 07 \n090  83 01 00 00 E2 00 0F 67 03 0C 00 10 00 B8 2D 01 \n0A0  1D 80 18 71 1C 16 20 58 2C 25 00 A0 5A 00 00 00 \n0B0  9E 8C 0A D0 8A 20 E0 2D 10 10 3E 96 00 A0 5A 00 \n0C0  00 00 18 02 3A 80 18 71 38 2D 40 58 2C 45 00 A0 \n0D0  5A 00 00 00 1E 00 00 00 00 00 00 00 00 00 00 00 \n0E0  00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 \n0F0  00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 FD \n+5V: OK\nVideo information:\n- Current video timing: 1280x720p 60Hz\n- Incoming video matches CEA-861 VIC 4 and 69 exactly\n- HDMI video detected\n- Received AVI VIC 4\n- Color space: YCbCr 4:4:4 8 bpc\n# \nEDID description: E01A0C88.xml\nEDID raw data:\n---  00 01 02 03 04 05 06 07 08 09 0A 0B 0C 0D 0E 0F\n000  00 FF FF FF FF FF FF 00 08 59 42 00 01 00 00 00 \n010  01 16 01 03 80 45 27 78 0A D0 DD A9 53 49 9D 23 \n020  11 47 4A A3 08 00 81 C0 81 00 81 0F 81 40 81 80 \n030  95 00 B3 00 01 01 52 35 80 80 70 38 1F 40 20 20 \n040  13 00 C4 8E 21 00 00 1E 46 20 00 A4 51 00 2A 30 \n050  50 80 37 00 20 46 21 00 00 1A 00 00 00 FC 00 4E \n060  53 2D 33 32 4C 32 34 30 41 31 33 0A 00 00 00 FD \n070  00 37 4C 1E 50 11 00 0A 20 20 20 20 20 20 01 23 \n080  02 03 20 73 48 05 04 03 02 01 06 07 90 26 09 07 \n090  07 15 07 50 83 01 00 00 67 03 0C 00 10 00 B8 2D \n0A0  01 1D 00 72 51 D0 1E 20 6E 28 55 00 C4 8E 21 00 \n0B0  00 1E 8C 0A D0 8A 20 E0 2D 10 10 3E 96 00 13 8E \n0C0  21 00 00 18 01 1D 80 18 71 1C 16 20 58 2C 25 00 \n0D0  C4 8E 21 00 00 9E 00 00 00 00 00 00 00 00 00 00 \n0E0  00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 \n0F0  00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 53 \n+5V: OK\nVideo information:\n- Current video timing: 1280x720p 60Hz\n- Incoming video matches CEA-861 VIC 4 and 69 exactly\n- HDMI video detected\n- Received AVI VIC 4\n- Color space: YCbCr 4:4:4 8 bpc\n</code></pre>\n\n<p>this is the code I have so far but hasnt worked for me. This is done in python, but if it can be done any other scripting language. Just that I am not to used to doing scripting. Thanks a million to those that give a helping hand.</p>\n\n<pre><code>#!/usr/bin/env python\n\ninFile = open(\"batch01.txt\")\noutFile = open(\"result.txt\", \"w\")\n\nwith open('batch01.txt') as infile, open('result.txt', 'w') as outfile:\n    copy = False\n    for line in infile:\n        if line.strip() == \"EDID description:\":\n            copy = True\n        elif line.strip() == \"- Current video timing\":\n            copy = True\n        elif copy:\n            outfile.write(line)\n\ninFile.close()\noutFile.close()\n</code></pre>\n"}, {"tags": ["perl", "ssh"], "comments": [{"owner": {"reputation": 9262, "user_id": 124951, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/c46d5911a8fb4ffd5fb8523d56a60de0?s=128&d=identicon&r=PG", "display_name": "salva", "link": "https://stackoverflow.com/users/124951/salva"}, "edited": false, "score": 0, "creation_date": 1421265691, "post_id": 27949159, "comment_id": 44297955, "body": "It is quite hard to use Net::SSH2 properly if possible at all. Go for Net::OpenSSH instead!"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1421273899, "post_id": 27949159, "comment_id": 44302023, "body": "Sounds like you&#39;re looking for the equivalent of <code>ssh</code>&#39;s <code>-t</code> option"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1421273972, "post_id": 27949159, "comment_id": 44302065, "body": "Net::SSH::Perl has <code>use_pty</code>"}, {"owner": {"reputation": 9262, "user_id": 124951, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/c46d5911a8fb4ffd5fb8523d56a60de0?s=128&d=identicon&r=PG", "display_name": "salva", "link": "https://stackoverflow.com/users/124951/salva"}, "edited": false, "score": 0, "creation_date": 1421306641, "post_id": 27949159, "comment_id": 44310988, "body": "Net::SSH2::Channel also has a pty <code>method</code>."}], "answers": [{"comments": [{"owner": {"reputation": 211, "user_id": 1700494, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/339c988180dae5f19e45f7e3a6e15eda?s=128&d=identicon&r=PG", "display_name": "user1700494", "link": "https://stackoverflow.com/users/1700494/user1700494"}, "edited": false, "score": 0, "creation_date": 1421259378, "post_id": 27949397, "comment_id": 44294480, "body": "Actually i need to execute several commands on remote host, and i&#39;d like to avoid to create ssh connection per each command"}, {"owner": {"reputation": 374, "user_id": 4437426, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VADa5.jpg?s=128&g=1", "display_name": "Michael T&#233;treault", "link": "https://stackoverflow.com/users/4437426/michael-t%c3%a9treault"}, "reply_to_user": {"reputation": 211, "user_id": 1700494, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/339c988180dae5f19e45f7e3a6e15eda?s=128&d=identicon&r=PG", "display_name": "user1700494", "link": "https://stackoverflow.com/users/1700494/user1700494"}, "edited": false, "score": 0, "creation_date": 1421969258, "post_id": 27949397, "comment_id": 44576644, "body": "you can actually separate your commands with some ; and then exit."}], "tags": [], "owner": {"reputation": 374, "user_id": 4437426, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VADa5.jpg?s=128&g=1", "display_name": "Michael T&#233;treault", "link": "https://stackoverflow.com/users/4437426/michael-t%c3%a9treault"}, "is_accepted": false, "score": -1, "last_activity_date": 1421258187, "creation_date": 1421258187, "answer_id": 27949397, "question_id": 27949159, "link": "https://stackoverflow.com/questions/27949159/perl-netssh2-and-buffering/27949397#27949397", "title": "Perl Net::SSH2 and buffering", "body": "<p>If this script is used on a linux system, why not using perl back-tilt to use linux commands instead of using a module?</p>\n\n<p>Example:</p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\n\n# Command\nmy $cmd = \"ssh login:password@host; sudo /root/remote.pl; exit\";\n\n# Execute the command\n`$cmd`\n</code></pre>\n\n<p>PS: if the remote.pl script has some print, you should see them.</p>\n"}], "owner": {"reputation": 211, "user_id": 1700494, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/339c988180dae5f19e45f7e3a6e15eda?s=128&d=identicon&r=PG", "display_name": "user1700494", "link": "https://stackoverflow.com/users/1700494/user1700494"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 545, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1429720247, "creation_date": 1421257366, "last_edit_date": 1429720247, "question_id": 27949159, "link": "https://stackoverflow.com/questions/27949159/perl-netssh2-and-buffering", "title": "Perl Net::SSH2 and buffering", "body": "<p>There is a small perl script using Net:SSH2 module</p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\nuse Net::SSH2;\n\nmy $ssh2 = Net::SSH2-&gt;new();\n$ssh2-&gt;connect('testhost') or die $!;\nif ($ssh2-&gt;auth_publickey('admin', 'id_rsa.pub', 'id_rsa')) {\nprint \"Connected\\n\";\n} else {\nprint \"failed\";\n}\nmy $sess = $ssh2-&gt;channel() or die \"Unable to create chan\\n\";\n$sess-&gt;blocking(1);\n$sess-&gt;shell();\nprint $sess \"sudo /root/remote.pl\\n\";\nprint \"$_\\n\" while &lt;$sess&gt;;\n$sess-&gt;send_eof;\n$sess-&gt;close;\n</code></pre>\n\n<p>After executing this, sometimes I see output of <code>/root/remote.pl</code> and sometimes I don't. I believe that the problem is in output buffering, but I don't how to solve this.</p>\n"}, {"tags": ["perl", "memoization"], "answers": [{"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1421261258, "post_id": 27948412, "comment_id": 44295518, "body": "Simply returning from a sub makes a shallow copy unless it&#39;s an <code>:lvalue</code> sub."}, {"owner": {"reputation": 2025, "user_id": 422567, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/06bb842dfa9b53b5ac3a8d7e001f469c?s=128&d=identicon&r=PG", "display_name": "MUY Belgium", "link": "https://stackoverflow.com/users/422567/muy-belgium"}, "edited": false, "score": 0, "creation_date": 1421317950, "post_id": 27948412, "comment_id": 44316298, "body": "I have the same result.  The function <code>foo</code> is reexecuted each time it is called without deferencing it : <code>foo() ; #reexecution; foo()-&gt;{...} ; # no reexecution</code>"}], "tags": [], "owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "is_accepted": true, "score": 4, "last_activity_date": 1421254826, "creation_date": 1421254826, "answer_id": 27948412, "question_id": 27948277, "link": "https://stackoverflow.com/questions/27948277/does-memoize-do-a-deep-copy-of-perl-objects/27948412#27948412", "title": "Does memoize do a deep copy of perl objects?", "body": "<p>Try it and see?</p>\n\n<pre><code>use Memoize;\nsub foo { {bar=&gt;[1..4]} }\nmemoize('foo');\nfoo()-&gt;{'bar'}[3] = 5;\nprint foo()-&gt;{'bar'}[3];\n</code></pre>\n\n<p>prints 5, so it doesn't make a deep copy.  I leave seeing if it makes even a shallow copy as an excercise.</p>\n"}], "owner": {"reputation": 2025, "user_id": 422567, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/06bb842dfa9b53b5ac3a8d7e001f469c?s=128&d=identicon&r=PG", "display_name": "MUY Belgium", "link": "https://stackoverflow.com/users/422567/muy-belgium"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 121, "favorite_count": 0, "accepted_answer_id": 27948412, "answer_count": 1, "score": 3, "last_activity_date": 1421255737, "creation_date": 1421254345, "question_id": 27948277, "link": "https://stackoverflow.com/questions/27948277/does-memoize-do-a-deep-copy-of-perl-objects", "title": "Does memoize do a deep copy of perl objects?", "body": "<p>I designed a function that return a table of objects.  The content of those object is not defined yet, but I would like to make a deep copy between each calls (as in Java).</p>\n\n<p>How does memoize restitute the return value?  Does it makes a deep copy of it?  Nothing say how answers are copied before being returned in the  <code>Memoize</code> module help.</p>\n\n<pre><code># How i solved the problem at first....\nuse Storable qw(dclone); \nmy $saved_value ; # undef\nsub get_all {\n    return dclone($saved_value) if (defined $saved_value) ;\n    ....\n    $saved_value = dclone( $ans ) ;\n    return $ans\n}\n</code></pre>\n"}, {"tags": ["arrays", "regex", "perl"], "comments": [{"owner": {"reputation": 2750, "user_id": 801553, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/74c6e34ee0ad953bb3079f5bb5cd9497?s=128&d=identicon&r=PG", "display_name": "Patrick J. S.", "link": "https://stackoverflow.com/users/801553/patrick-j-s"}, "edited": false, "score": 2, "creation_date": 1421252962, "post_id": 27947589, "comment_id": 44290468, "body": "\u201cBackreferencing\u201d in regexes describes a term where you reference a matching group <i>within</i> the regex. Take a look at <a href=\"http://perldoc.perl.org/perlreref.html\" rel=\"nofollow noreferrer\">perlreref</a>. That&#39;s a way more complicated topic than your problem. It&#39;s even in the Tag description of backreferences. An example: <code>&#47;(\\d+) \\1&#47;</code> matches a digit that occurs twice."}], "answers": [{"comments": [{"owner": {"reputation": 14050, "user_id": 1858225, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/8afcf8a38024eb5b17c0b0b58ff96d79?s=128&d=identicon&r=PG", "display_name": "Kyle Strand", "link": "https://stackoverflow.com/users/1858225/kyle-strand"}, "edited": false, "score": 1, "creation_date": 1421256257, "post_id": 27947607, "comment_id": 44292561, "body": "Upvoted, but I don&#39;t know about &quot;by default&quot;--my &quot;default&quot; is &quot;short patterns without too many groups.&quot; But yeah, once a pattern gets nontrivial, it&#39;s a pretty good idea not to capture groups you don&#39;t want. (At which point the groups you <i>do</i> want should probably be <i>named</i>...)"}, {"owner": {"reputation": 46944, "user_id": 3764814, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d02a4923abd2ca6d7593f031e4222c2?s=128&d=identicon&r=PG", "display_name": "Lucas Trzesniewski", "link": "https://stackoverflow.com/users/3764814/lucas-trzesniewski"}, "reply_to_user": {"reputation": 14050, "user_id": 1858225, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/8afcf8a38024eb5b17c0b0b58ff96d79?s=128&d=identicon&r=PG", "display_name": "Kyle Strand", "link": "https://stackoverflow.com/users/1858225/kyle-strand"}, "edited": false, "score": 3, "creation_date": 1421259725, "post_id": 27947607, "comment_id": 44294682, "body": "@Kyle I mean I prefer using non-capturing groups over capturing ones when I only need to group constructs but don&#39;t actually need to extract the value, since the regex engine should be faster in this case (it has less work to do). Of course, once the regex gets nontrivial, using named patterns and the <code>x</code> modifier are good practices."}], "tags": [], "owner": {"reputation": 46944, "user_id": 3764814, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d02a4923abd2ca6d7593f031e4222c2?s=128&d=identicon&r=PG", "display_name": "Lucas Trzesniewski", "link": "https://stackoverflow.com/users/3764814/lucas-trzesniewski"}, "is_accepted": true, "score": 10, "last_activity_date": 1421252390, "creation_date": 1421252390, "answer_id": 27947607, "question_id": 27947589, "link": "https://stackoverflow.com/questions/27947589/can-a-perl-regex-use-parens-but-skip-backreferencing-on-them/27947607#27947607", "title": "Can a perl regex use parens but skip backreferencing on them?", "body": "<p>Yes, there is. Use the non-capturing group construct: <code>(?:</code> ... <code>)</code>.</p>\n\n<p>You even should use this <em>by default</em>, unless you need backreferences or capturing.</p>\n"}], "owner": {"reputation": 578, "user_id": 4166299, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh6.googleusercontent.com/-LvoclXgPMzs/AAAAAAAAAAI/AAAAAAAAADA/WUiVl__aW5s/photo.jpg?sz=128", "display_name": "Derek Chadwell", "link": "https://stackoverflow.com/users/4166299/derek-chadwell"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 70, "favorite_count": 0, "accepted_answer_id": 27947607, "answer_count": 1, "score": 1, "last_activity_date": 1421256046, "creation_date": 1421252324, "last_edit_date": 1421256046, "question_id": 27947589, "link": "https://stackoverflow.com/questions/27947589/can-a-perl-regex-use-parens-but-skip-backreferencing-on-them", "title": "Can a perl regex use parens but skip backreferencing on them?", "body": "<p>I have this regex:</p>\n\n<pre><code>@disks = $sysconfig =~ /(\\d+)\\.\\d+:(\\s+[\\w.\\/]+){5}\\s+\\((\\w+)\\)/ig\n</code></pre>\n\n<p>If there were only one line that matched, I'd get something like</p>\n\n<pre><code>1835 x @array\n1836  35\n1837  ' 520B/sect'\n1838  'KXG813JF'\n</code></pre>\n\n<p>It matches: </p>\n\n<ol>\n<li><p>the first digits in the string</p></li>\n<li><p>the fifth copy of the \"spaces then alphanumeric-periods-and-slashes\" and</p></li>\n<li><p>the alphanumeric string at the end</p></li>\n</ol>\n\n<p>I don't want to backreference #2 above and clutter my array with it, but I also don't want to write out that repeating pattern when what I've got is a more concise regex (to look at).</p>\n\n<p>Is there a way to say \"don't backreference this piece\" or should I just deal with it when I parse the array out into something more usable by my program?</p>\n"}, {"tags": ["perl", "template-toolkit"], "comments": [{"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 3, "creation_date": 1421250108, "post_id": 27946713, "comment_id": 44288521, "body": "Do you mean something like <code>[% FOREACH foo IN [1..10] %]</code>? This syntax is explained in the <a href=\"http://www.template-toolkit.org/docs/manual/Variables.html#section_List_References\" rel=\"nofollow noreferrer\">List References</a> section of the documentation."}], "answers": [{"tags": [], "owner": {"reputation": 12075, "user_id": 1137055, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/59d7b43b9eb7d01bd8f7e51febe6053c?s=128&d=identicon&r=PG", "display_name": "dgw", "link": "https://stackoverflow.com/users/1137055/dgw"}, "is_accepted": true, "score": 7, "last_activity_date": 1421250271, "creation_date": 1421250271, "answer_id": 27946885, "question_id": 27946713, "link": "https://stackoverflow.com/questions/27946713/iterate-numbers-template-toolkit/27946885#27946885", "title": "Iterate numbers Template Toolkit", "body": "<p>It should be possible to build something like this:</p>\n\n<pre><code>[% FOREACH i IN [ 1 .. 10 ] %]\n  [% i %]\n[% END %]\n</code></pre>\n\n<p>See also <a href=\"http://template-toolkit.org/docs/manual/Variables.html#section_List_References\" rel=\"noreferrer\">Template Toolkit Documentation on Variables</a></p>\n"}], "owner": {"reputation": 2764, "user_id": 1995281, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/698d2867566864946d7b6304ae753a99?s=128&d=identicon&r=PG", "display_name": "J33nn", "link": "https://stackoverflow.com/users/1995281/j33nn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 693, "favorite_count": 0, "accepted_answer_id": 27946885, "answer_count": 1, "score": 1, "last_activity_date": 1421250271, "creation_date": 1421249852, "question_id": 27946713, "link": "https://stackoverflow.com/questions/27946713/iterate-numbers-template-toolkit", "title": "Iterate numbers Template Toolkit", "body": "<p>How to iterate simple numbers in Template Toolkit instead of iterating over hash with FOREACH?</p>\n\n<p>All I could find in Documentation of TT was FOREACH.</p>\n"}, {"tags": ["regex", "perl"], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 4453876, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0dea305f16c723915d2588a82528d177?s=128&d=identicon&r=PG&f=1", "display_name": "AlexandreC", "link": "https://stackoverflow.com/users/4453876/alexandrec"}, "edited": false, "score": 0, "creation_date": 1421248354, "post_id": 27946010, "comment_id": 44287418, "body": "Thank you it did the trick! Will accept the answer in 7min (my account is brand new)."}], "tags": [], "owner": {"reputation": 159902, "user_id": 3297613, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/KHhzd.jpg?s=128&g=1", "display_name": "Avinash Raj", "link": "https://stackoverflow.com/users/3297613/avinash-raj"}, "is_accepted": true, "score": 3, "last_activity_date": 1421247939, "creation_date": 1421247939, "answer_id": 27946010, "question_id": 27945973, "link": "https://stackoverflow.com/questions/27945973/extracting-matches-with-perl-regex/27946010#27946010", "title": "Extracting matches with Perl regex", "body": "<p>Use a negated character class and remove the end of the line anchor <code>$</code></p>\n\n<pre><code>m/RL2\\.[^\\s&lt;\\]]*/g\n</code></pre>\n\n<p><a href=\"https://regex101.com/r/tD4yN3/3\" rel=\"nofollow\">DEMO</a></p>\n\n<p><code>[^\\s&lt;\\]]*</code> Negated character class which matches any character but not of space or <code>&lt;</code> or <code>]</code> zero or more times.</p>\n"}], "owner": {"reputation": 13, "user_id": 4453876, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0dea305f16c723915d2588a82528d177?s=128&d=identicon&r=PG&f=1", "display_name": "AlexandreC", "link": "https://stackoverflow.com/users/4453876/alexandrec"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 78, "favorite_count": 0, "accepted_answer_id": 27946010, "answer_count": 1, "score": 1, "last_activity_date": 1421248134, "creation_date": 1421247842, "question_id": 27945973, "link": "https://stackoverflow.com/questions/27945973/extracting-matches-with-perl-regex", "title": "Extracting matches with Perl regex", "body": "<p>I am trying to extract the following string <code>RL2.OPT.TEST.01</code>\u00ad from this one <code>\u00ada lot of text...[RL2.OPT.TEST.01]&lt;some more text</code>\u00ad. Basically there can be anything before the <code>\u00adRL2.</code>\u00ad but it always begins with <code>\u00adRL2.</code>\u00ad, and always finish by either <code>\u00ad]</code>\u00ad, <code>\u00ad&lt;</code>\u00ad, or a space.</p>\n\n<p>I tried with the following regex: <code>m/RL2\\..*[\\s&lt;\\]]+?$/g</code>\nbut even if it finds a match for the string <code>\u00ad-- [RL2.OPT.TEST.01]</code>\u00ad, it does not work for <code>\u00ad-- [RL2.OPT.TEST.01] some more text</code>\u00ad.</p>\n\n<p>I need an array of all the resultings matches in the large string I have. I think I should also mention that this string has a lot of newline characters, but never in the middle of the strings I am trying to extract.</p>\n\n<p>Any clue about what is wrong with my regex?</p>\n"}, {"tags": ["python", "ruby", "json", "perl", "yaml"], "comments": [{"owner": {"reputation": 332, "user_id": 331401, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/6ae61d008bef52dfff16b29df05f23f9?s=128&d=identicon&r=PG", "display_name": "recursive9", "link": "https://stackoverflow.com/users/331401/recursive9"}, "edited": false, "score": 0, "creation_date": 1421245042, "post_id": 27944794, "comment_id": 44285221, "body": "UGH, thanks, changed, works as expected."}, {"owner": {"reputation": 30832, "user_id": 459745, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/08a2c6f16c0d4dad20d169d9d76848ac?s=128&d=identicon&r=PG", "display_name": "Hai Vu", "link": "https://stackoverflow.com/users/459745/hai-vu"}, "edited": false, "score": 0, "creation_date": 1421245150, "post_id": 27944794, "comment_id": 44285291, "body": "Do not use <code>json</code> for variable name, it shadows (override) the <code>json</code> module."}], "answers": [{"tags": [], "owner": {"reputation": 98400, "user_id": 3001761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feZwC.jpg?s=128&g=1", "display_name": "jonrsharpe", "link": "https://stackoverflow.com/users/3001761/jonrsharpe"}, "is_accepted": true, "score": 2, "last_activity_date": 1421245406, "last_edit_date": 1421245406, "creation_date": 1421244809, "answer_id": 27944988, "question_id": 27944794, "link": "https://stackoverflow.com/questions/27944794/yaml-json-converter-something-flawed/27944988#27944988", "title": "YAML-JSON converter; something flawed?", "body": "<p><code>yaml.load_all</code>, per the error message, is a <a href=\"https://docs.python.org/2/tutorial/classes.html#generators\" rel=\"nofollow\"><em>generator</em></a>. See the following example from <a href=\"http://pyyaml.org/wiki/PyYAMLDocumentation\" rel=\"nofollow\">the documentation</a>:</p>\n\n<pre><code>&gt;&gt;&gt; for data in yaml.load_all(documents):\n...     print data\n\n{'description': 'A set of handgear with sparks that crackle across its knuckleguards.\\n',\n'name': \"The Set of Gauntlets 'Pauraegen'\"}\n{'description': 'A set of gauntlets that gives off a foul, acrid odour yet remains untarnished.\\n',\n'name': \"The Set of Gauntlets 'Paurnen'\"}\n{'description': 'A set of handgear, freezing with unnatural cold.\\n',\n'name': \"The Set of Gauntlets 'Paurnimmen'\"}\n</code></pre>\n\n<p>Note that this code <em>iterates over</em> the generator to access its contents.</p>\n\n<p>Instead, you should <code>load</code> the data (or, to reduce security risks, <code>safe_load</code>). I think your Python version should therefore look like:</p>\n\n<pre><code>import json\n\nimport yaml\n\nwith open(\"testinput.yaml\") as stream:\n    yaml_data = yaml.safe_load(stream)\njson_data = json.dumps(yaml_data)\n\nprint(json_data)\n</code></pre>\n\n<p>Note the following:</p>\n\n<ul>\n<li><code>import</code> laid out per <a href=\"https://www.python.org/dev/peps/pep-0008/\" rel=\"nofollow\">the style guide</a>;</li>\n<li>Use of <code>with</code> context manager to handle the file; and</li>\n<li>Use of the name <code>json_data</code> to avoid shadowing the <code>json</code> library.</li>\n</ul>\n\n<p>If you <em>will</em> have multiple documents in the file, you could try e.g. <code>yaml_data = list(yaml.load_all(stream))</code>.</p>\n"}], "owner": {"reputation": 332, "user_id": 331401, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/6ae61d008bef52dfff16b29df05f23f9?s=128&d=identicon&r=PG", "display_name": "recursive9", "link": "https://stackoverflow.com/users/331401/recursive9"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 947, "favorite_count": 0, "accepted_answer_id": 27944988, "answer_count": 1, "score": -1, "last_activity_date": 1421245406, "creation_date": 1421244235, "last_edit_date": 1421245038, "question_id": 27944794, "link": "https://stackoverflow.com/questions/27944794/yaml-json-converter-something-flawed", "title": "YAML-JSON converter; something flawed?", "body": "<p>I'm trying to get a simple YAML to JSON converter going in Python, but it doesn't seem correct at all. I am a native Perl/Ruby programmer so I have three scripts, and one input file:</p>\n\n<p><strong>testinput.yaml</strong></p>\n\n<pre><code>---\ndefault:\n  default:\n    line_one: '[I]&lt;description&gt;[/I]'\n    line_three: '&lt;creator&gt;'\n    line_two: '&lt;title&gt; [&lt;type&gt;]'\n    link_to: '&lt;citation&gt;'\n</code></pre>\n\n<p>and one Python/Perl/Ruby script each that do in my mind the exact same thing:</p>\n\n<p><strong>y2j.rb</strong></p>\n\n<pre><code>require 'rubygems'\nrequire 'json'\nrequire 'yaml'\nyml = YAML.load_file('testinput.yaml')\njson = JSON.dump(yml)\n\nputs json\n</code></pre>\n\n<p><strong>y2j.pl</strong></p>\n\n<pre><code>use JSON;\nuse YAML;\nmy $filename = \"testinput.yaml\";\nmy $yaml  = YAML::LoadFile($filename);\nprint encode_json($yaml);\n</code></pre>\n\n<p><strong>y2j.py</strong></p>\n\n<pre><code>import yaml\nimport json\n\n\nstream = open(\"testinput.yaml\", 'r')\ndata = yaml.load_all(stream)\njson = json.dumps(data)\n\nprint(json)\nenter code here\n</code></pre>\n\n<p>then the output:</p>\n\n<p><strong>ruby y2j.rb</strong> </p>\n\n<pre><code>{\"default\":{\"default\":{\"link_to\":\"&lt;citation&gt;\",\"line_two\":\"&lt;title&gt; [&lt;type&gt;]\",\"line_three\":\"&lt;creator&gt;\",\"line_one\":\"[I]&lt;description&gt;[/I]\"}}}\n</code></pre>\n\n<p><strong>perl y2j.pl</strong></p>\n\n<pre><code>{\"default\":{\"default\":{\"line_three\":\"&lt;creator&gt;\",\"line_two\":\"&lt;title&gt; [&lt;type&gt;]\",\"link_to\":\"&lt;citation&gt;\",\"line_one\":\"[I]&lt;description&gt;[/I]\"}}}\n</code></pre>\n\n<p><em>(so far, so good)</em></p>\n\n<p><strong>python y2j.py</strong></p>\n\n<pre><code>Traceback (most recent call last):\n  File \"y2j.py\", line 7, in &lt;module&gt;\n    json = json.dumps(data)\n  File \"/usr/lib64/python2.6/json/__init__.py\", line 230, in dumps\n    return _default_encoder.encode(obj)\n  File \"/usr/lib64/python2.6/json/encoder.py\", line 367, in encode\n    chunks = list(self.iterencode(o))\n  File \"/usr/lib64/python2.6/json/encoder.py\", line 317, in _iterencode\n    for chunk in self._iterencode_default(o, markers):\n  File \"/usr/lib64/python2.6/json/encoder.py\", line 323, in _    iterencode_default\n    newobj = self.default(o)\n  File \"/usr/lib64/python2.6/json/encoder.py\", line 344, in default\n    raise TypeError(repr(o) + \" is not JSON serializable\")\nTypeError: &lt;generator object load_all at 0x15a81e0&gt; is not JSON serializable\n</code></pre>\n\n<p>Is there something completely obvious that I am missing here?</p>\n"}, {"tags": ["perl", "function", "return", "goto", "callstack"], "answers": [{"comments": [{"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1421238600, "post_id": 27942557, "comment_id": 44281383, "body": "@ikegami: On my machine, it seems a tiny bit faster. For a higher number of iterations, I see constant differences (0.1s for 100_000), which is still insignificant."}], "tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": true, "score": 1, "last_activity_date": 1421238753, "last_edit_date": 1421238753, "creation_date": 1421237102, "answer_id": 27942557, "question_id": 27942419, "link": "https://stackoverflow.com/questions/27942419/perl-gotoname-vs-return/27942557#27942557", "title": "perl goto&amp;Name vs return", "body": "<p>You can save some time and memory by skipping the stack handling. You can use <a href=\"http://p3rl.org/Benchmark\" rel=\"nofollow\">Benchmark</a> to test if the difference is significant in your case.</p>\n\n<p>Reading about \"Tail Call\" might also give some information. For example, see this old thread at <a href=\"http://www.perlmonks.org/?node_id=161611\" rel=\"nofollow\">PerlMonks</a>.</p>\n\n<h2>Update</h2>\n\n<p>I tested with the following script:</p>\n\n<pre><code>sub rec {\n    $_[0]++;\n\n    sleep 5, return if $_[0] &gt; 1000;\n\n    return rec(@_); # Comment this line.\n    goto &amp;rec\n}\n\nrec(1 .. 200);\n</code></pre>\n\n<p>The time difference isn't measurable, the memory consumption is quite different: the <code>return</code> case takes almost twice as more bytes than the <code>goto</code> one. With higher number of iterations, the memory consumption stays the same for <code>goto</code>, but grows with <code>return</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 3676, "user_id": 414279, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5fd8e859d8cf73f2d49eb640964605bb?s=128&d=identicon&r=PG", "display_name": "rurban", "link": "https://stackoverflow.com/users/414279/rurban"}, "is_accepted": false, "score": 1, "last_activity_date": 1496873788, "creation_date": 1496873788, "answer_id": 44423653, "question_id": 27942419, "link": "https://stackoverflow.com/questions/27942419/perl-gotoname-vs-return/44423653#44423653", "title": "perl goto&amp;Name vs return", "body": "<p>Unfortunately the tail call myth is only a myth. A goto still creates a new stack frame and is not faster than recursion. I experimented with eliminating this cost with cperl, doing real tail recursion, overwriting the stack values, but I don't think I've properly solved it yet. The whole ABI is highly deoptimized. And it would only work with cperl signatures as only those use the stack ABI as XS. With pure perl5 you are in the same mess as python.</p>\n"}], "owner": {"reputation": 4830, "user_id": 1160106, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/forvP.jpg?s=128&g=1", "display_name": "Samiron", "link": "https://stackoverflow.com/users/1160106/samiron"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 129, "favorite_count": 0, "accepted_answer_id": 27942557, "answer_count": 2, "score": 2, "last_activity_date": 1496873788, "creation_date": 1421236676, "question_id": 27942419, "link": "https://stackoverflow.com/questions/27942419/perl-gotoname-vs-return", "title": "perl goto&amp;Name vs return", "body": "<p>I came accross a piece of perl code recently. The code looks like below</p>\n\n<pre><code>package CODE;\n\nsub _doJob\n{\n    $result = JOB-&gt;new(@_)-&gt;doIt();\n    return $result;\n}\n\nsub _doFirstJob\n{\n    unshift @_, '1';\n    goto &amp;_doJob;\n}\n\nsub _doSecondJob\n{\n    unshift @_, '2';\n    goto &amp;_doJob;\n}\n\nsub _doThirdJob\n{\n    unshift @_, '3';\n    goto &amp;_doJob;\n}\n</code></pre>\n\n<p>and then calling the functions like</p>\n\n<pre><code>$result = CODE::_doFirstJob($a);\n$result = CODE::_doSecondJob($a);\n$result = CODE::_doThirdJob($a);\n</code></pre>\n\n<p>Question is what is the significance of <code>goto</code> here? If I write similar function calls with <code>return</code>, like below, what would be the problem?</p>\n\n<pre><code>package CODE;\n\nsub _doJob\n{\n    $result = JOB-&gt;new(@_)-&gt;doIt();\n    return $result;\n}\n\nsub _doFirstJob\n{\n    unshift @_, '1';\n    return &amp;_doJob(@_);\n}\n\nsub _doSecondJob\n{\n    unshift @_, '2';\n    return &amp;_doJob(@_)\n}\n\nsub _doThirdJob\n{\n    unshift @_, '3';\n    return &amp;_doJob(@_)\n}\n</code></pre>\n\n<p>I could still call these functions in same way</p>\n\n<pre><code>$result = CODE::_doFirstJob($a);\n$result = CODE::_doSecondJob($a);\n$result = CODE::_doThirdJob($a);\n</code></pre>\n\n<p>I know that <code>goto &amp;NAME</code> actually makes perl to exit from current function and replace it with the new function in call stack. But how am I being benefited by this here?</p>\n"}, {"tags": ["bash", "perl", "shell"], "answers": [{"comments": [{"owner": {"reputation": 147, "user_id": 3310681, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/394e73235ec5ee0c3a868e45766c2f2e?s=128&d=identicon&r=PG&f=1", "display_name": "KianStar", "link": "https://stackoverflow.com/users/3310681/kianstar"}, "edited": false, "score": 0, "creation_date": 1421237702, "post_id": 27942616, "comment_id": 44280920, "body": "Thank you for respond \u0421\u0443\u0445\u043e\u043927, I tried your solution, but I receive again the same error."}], "tags": [], "owner": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "is_accepted": true, "score": 6, "last_activity_date": 1421240134, "last_edit_date": 1421240134, "creation_date": 1421237289, "answer_id": 27942616, "question_id": 27942337, "link": "https://stackoverflow.com/questions/27942337/how-to-fix-argument-list-too-long-error/27942616#27942616", "title": "How to fix &#39; Argument list too long&#39; error?", "body": "<p>Leave globing to perl instead of bash which has limitations,</p>\n\n<pre><code>perl -pi -e 'BEGIN{ @ARGV = glob(pop) } s/#//g' \"/Users/Kian/Desktop/Acsegment/espslabs/train/*\"\n</code></pre>\n\n<p>or when are spaces in globed directory,</p>\n\n<pre><code>perl -MFile::Glob=bsd_glob -pi -e 'BEGIN{ @ARGV = bsd_glob(pop) } s/#//g' \"/Users/Kian/Desktop/Acsegment/espslabs/train/*\"\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 7, "last_activity_date": 1421239228, "last_edit_date": 1421239228, "creation_date": 1421238873, "answer_id": 27943086, "question_id": 27942337, "link": "https://stackoverflow.com/questions/27942337/how-to-fix-argument-list-too-long-error/27943086#27943086", "title": "How to fix &#39; Argument list too long&#39; error?", "body": "<p>That's what <code>xargs</code> is all about.</p>\n\n<pre><code>ls /Users/Kian/Desktop/Acsegment/espslabs/train |\n   xargs perl -i -pe's/#//g'\n</code></pre>\n\n<p><code>find</code> can do it too, and it allows you to select which files to modify much more flexibly.</p>\n\n<pre><code>find /Users/Kian/Desktop/Acsegment/espslabs/train \\\n   -type f -maxdepth 1 \\\n   -exec perl -i -pe's/#//g' {} +\n</code></pre>\n\n<p>Of course, you could also generate the file list in Perl.</p>\n\n<pre><code>perl -i -pe'BEGIN { @ARGV = map glob, @ARGV } s/#//g' \\\n    '/Users/Kian/Desktop/Acsegment/espslabs/train/*'\n</code></pre>\n\n<p>But you have to escape spaces in the path unless you use <code>bsd_glob</code>.</p>\n\n<pre><code>perl -i -pe'\n   use File::Glob qw( bsd_glob );\n   BEGIN { @ARGV = map bsd_glob($_), @ARGV }\n   s/#//g\n' '/Users/Kian/Desktop/Acsegment/espslabs/train/*'\n</code></pre>\n"}], "owner": {"reputation": 147, "user_id": 3310681, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/394e73235ec5ee0c3a868e45766c2f2e?s=128&d=identicon&r=PG&f=1", "display_name": "KianStar", "link": "https://stackoverflow.com/users/3310681/kianstar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 869, "favorite_count": 0, "accepted_answer_id": 27942616, "answer_count": 2, "score": 4, "last_activity_date": 1421240134, "creation_date": 1421236361, "last_edit_date": 1421237173, "question_id": 27942337, "link": "https://stackoverflow.com/questions/27942337/how-to-fix-argument-list-too-long-error", "title": "How to fix &#39; Argument list too long&#39; error?", "body": "<p>ive executed this command to delete all occurrences of \"#\" from a huge amount of files (about 3000)in folder train,</p>\n\n<pre><code>perl -pi -e \"s/#//g\" /Users/Kian/Desktop/Acsegment/espslabs/train/*\n</code></pre>\n\n<p>but I got this error: <code>/bin/bash: /usr/bin/perl: Argument list too long</code></p>\n\n<p>Can anyone suggest a way to avoid this error?</p>\n"}, {"tags": ["perl", "file", "while-loop", "initialization"], "comments": [{"owner": {"reputation": 82895, "user_id": 372239, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/2twLb.jpg?s=128&g=1", "display_name": "Toto", "link": "https://stackoverflow.com/users/372239/toto"}, "edited": false, "score": 0, "creation_date": 1421239897, "post_id": 27942249, "comment_id": 44282110, "body": "Show an extract of the two files that produce the error."}, {"owner": {"reputation": 125, "user_id": 3669662, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IkcZd.jpg?s=128&g=1", "display_name": "tiit_helimut", "link": "https://stackoverflow.com/users/3669662/tiit-helimut"}, "reply_to_user": {"reputation": 82895, "user_id": 372239, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/2twLb.jpg?s=128&g=1", "display_name": "Toto", "link": "https://stackoverflow.com/users/372239/toto"}, "edited": false, "score": 0, "creation_date": 1421246098, "post_id": 27942249, "comment_id": 44285868, "body": "@JESUISCHARLIE After you suggested looking at the files (along with Sebastian), I found three of 2886 lines of <code>&lt;IN_PVAL&gt;</code> that had multiple spaces separating fields rather than tabs - replacing these seems to have fixed the issue! Thank you :)"}], "answers": [{"comments": [{"owner": {"reputation": 82895, "user_id": 372239, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/2twLb.jpg?s=128&g=1", "display_name": "Toto", "link": "https://stackoverflow.com/users/372239/toto"}, "edited": false, "score": 1, "creation_date": 1421239989, "post_id": 27943117, "comment_id": 44282168, "body": "This should be a comment."}, {"owner": {"reputation": 125, "user_id": 3669662, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IkcZd.jpg?s=128&g=1", "display_name": "tiit_helimut", "link": "https://stackoverflow.com/users/3669662/tiit-helimut"}, "edited": false, "score": 0, "creation_date": 1421315981, "post_id": 27943117, "comment_id": 44315258, "body": "Thanks Sebastian - I had seen Data::Dumper before but after trying out your suggestion, I have a better idea of why it is useful and how to use it. I was unaware that <code>$chr</code> is reserved - I will look into this. I would upvote your answer, as it has been useful, but I don&#39;t have enough reputation yet! Regardless, thanks for your time!"}], "tags": [], "owner": {"reputation": 2298, "user_id": 1147230, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/fe33f45c5990a98cfcb1388581de07af?s=128&d=identicon&r=PG", "display_name": "Sebastian", "link": "https://stackoverflow.com/users/1147230/sebastian"}, "is_accepted": false, "score": 1, "last_activity_date": 1421238997, "creation_date": 1421238997, "answer_id": 27943117, "question_id": 27942249, "link": "https://stackoverflow.com/questions/27942249/perl-use-of-uninitialized-value-error-when-value-should-be-set/27943117#27943117", "title": "Perl - &quot;Use of uninitialized value&quot; error when value should be set?", "body": "<p>\"chr\" is a reserved keyword. You shouldn't use that for a variable name, no matter thats working.</p>\n\n<p>You should add a line <code>print Dumper($gene_chr,$chr,$line_pval);</code> after your split and <code>use Data::Dumper;</code> at the top. It will tell you much about your data. I suppose the problem might be in your data files.</p>\n\n<p>Maybe also add <code>exit if $. &gt; 10</code> somewhere to exit after 10 lines read from the file and make debugging more easy.</p>\n"}, {"comments": [{"owner": {"reputation": 61610, "user_id": 725418, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/82ac2dc3e1ad4b7187f245c416528df9?s=128&d=identicon&r=PG", "display_name": "TLP", "link": "https://stackoverflow.com/users/725418/tlp"}, "edited": false, "score": 1, "creation_date": 1421246408, "post_id": 27945363, "comment_id": 44286065, "body": "I would not say it would &quot;dramatically&quot; improve performance. Perl is pretty good at reading text files. It would probably improve performance, but unless the file was huge, it would not make a huge difference. Kind of a catch 22."}, {"owner": {"reputation": 125, "user_id": 3669662, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IkcZd.jpg?s=128&g=1", "display_name": "tiit_helimut", "link": "https://stackoverflow.com/users/3669662/tiit-helimut"}, "edited": false, "score": 0, "creation_date": 1421246893, "post_id": 27945363, "comment_id": 44286394, "body": "Thanks Dave - you were right. The first two lines of the file indeed had multiple spaces instead of tabs, which explains why I didn&#39;t pick them up visually. I guess a quick check using &quot;cut&quot; would have picked this up - d&#39;oh! As I&#39;m fairly new to perl, I wasn&#39;t aware of the fact that the line count doesn&#39;t reset when you use seek (though it makes complete sense)! The alternative hash version would be useful but as I simplified the code, it wouldn&#39;t be possible to use a hash in this case as <code>$gene_chr == $chr</code> is not unique in the <code>&lt;IN_PVAL&gt;</code> file! Thank you for the help though!"}], "tags": [], "owner": {"reputation": 42833, "user_id": 18914, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7a20a39ae2ef47ae042a3eddd5b5bd19?s=128&d=identicon&r=PG", "display_name": "Dave Sherohman", "link": "https://stackoverflow.com/users/18914/dave-sherohman"}, "is_accepted": true, "score": 1, "last_activity_date": 1421245994, "creation_date": 1421245994, "answer_id": 27945363, "question_id": 27942249, "link": "https://stackoverflow.com/questions/27942249/perl-use-of-uninitialized-value-error-when-value-should-be-set/27945363#27945363", "title": "Perl - &quot;Use of uninitialized value&quot; error when value should be set?", "body": "<p>If <code>$gene_chr</code> is undefined, then this means that, for one or more line(s) of <code>somefile_gene</code>,</p>\n\n<pre><code>($gene_name,$gene_chr,$gene_pos) = split(/\\t/,$line_gene);\n</code></pre>\n\n<p>is returning <code>undef</code> as its second value (or returning fewer than two values, which is really the same thing).</p>\n\n<p>I can think of two ways this could happen:</p>\n\n<p>1) The line(s) contain no tabs, causing the entire unsplit line to be put into <code>$gene_name</code>.  This could result from a line which erroneously uses spaces instead of tabs to separate the fields.</p>\n\n<p>2) After the first value, the line(s) contain two consecutive tabs.  This could result from someone trying to make fields line up more \"nicely\" for visual presentation if <code>$gene_name</code> varies significantly in length.</p>\n\n<blockquote>\n  <p>What's also interesting is that for every line of the input file\n  , it prints the above \"Use of uninitialized value\" warning\n  from line 1 to line 5772 (see above warning), except that this file\n  only has 2886 lines, exactly half of 5772.</p>\n</blockquote>\n\n<p>The line number it shows is simply a counter of how many lines have been read from the file.  Since you <code>seek</code> back to the start of the file on each pass instead of closing and reopening it, the counter never gets reset.</p>\n\n<p>The line numbers going from 1 to (2 * the number of lines in the pval file) suggests that your errors in the pval file are on the first two lines, which would count 1..2886 and 2887..5772, respectively.  If the errors were later in the file, the counter would be higher.</p>\n\n<p>Also, as a general tip, unless the lines in the pval file are extremely long, I would take a serious look at whether it might be possible to read its contents once into a hash keyed on <code>$pval_chr</code> and then replacing the entire inner loop with</p>\n\n<pre><code>if (exists $pval_hash{$gene_chr}) { ... do stuff ... }\n</code></pre>\n\n<p>If you have more than a handful of lines in the gene file, this would dramatically improve performance, since it wouldn't need to re-read the pval file for every line in the gene file.</p>\n"}, {"comments": [{"owner": {"reputation": 125, "user_id": 3669662, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IkcZd.jpg?s=128&g=1", "display_name": "tiit_helimut", "link": "https://stackoverflow.com/users/3669662/tiit-helimut"}, "edited": false, "score": 0, "creation_date": 1421246698, "post_id": 27945367, "comment_id": 44286278, "body": "Thanks TLP - you were right and I found the issue - three lines (two at start and one at the end) had multiple spaces instead of tabs and so <code>$gene_chr</code> was undefined for these lines! This also explains why I didn&#39;t find them through visual inspection, as they still looked like they were tab separated! I would upvote your answer but I don&#39;t have enough rep. Thank you all the same :)"}], "tags": [], "owner": {"reputation": 61610, "user_id": 725418, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/82ac2dc3e1ad4b7187f245c416528df9?s=128&d=identicon&r=PG", "display_name": "TLP", "link": "https://stackoverflow.com/users/725418/tlp"}, "is_accepted": false, "score": 1, "last_activity_date": 1421246689, "last_edit_date": 1421246689, "creation_date": 1421246003, "answer_id": 27945367, "question_id": 27942249, "link": "https://stackoverflow.com/questions/27942249/perl-use-of-uninitialized-value-error-when-value-should-be-set/27945367#27945367", "title": "Perl - &quot;Use of uninitialized value&quot; error when value should be set?", "body": "<p>Since I do not have much to go on, this is mostly educated guesswork. However, with some feedback, I think we can get somewhere. I added this as an answer, since I felt it was too much information for a comment.</p>\n\n<h2>Analysis</h2>\n\n<p>Apparently at some point, there is not enough fields from the split to assign a value to <code>$gene_chr</code>. That is why it becomes uninitialized. It is this line:</p>\n\n<pre><code>($gene_name,$gene_chr,$gene_pos) = split(/\\t/,$line_gene);\n</code></pre>\n\n<p>This would happen if there are no tabs at all in the line, as otherwise you would get an empty string, and your error would be about <code>\"\"</code> not being numeric in <code>==</code>. I.e.:</p>\n\n<pre><code>Argument \"\" isn't numeric in numeric eq (==)\n</code></pre>\n\n<p>Since your error reports lines that are twice the max number of lines in the inner loop file, I would theorize that your <code>IN_GENE</code> file has only two lines of data. Furthermore, I would guess that it has a trailing <em>blank</em> line, which you have not noticed, and this is what is causing the errors. It does not completely add up, but it's worth a shot to see if it solves your problem.</p>\n\n<h2>Solution</h2>\n\n<p>Try adding a check to see if you have blank lines. Something like:</p>\n\n<pre><code>...\nwhile ($line_gene = &lt;IN_GENE&gt;) {\n   chomp $line_gene;\n   unless ($line_gene =~ /\\S/) {   # unless the line contains non-whitespace\n       warn \"Warning: Blank line in gene file\";\n       next;\n   }\n</code></pre>\n\n<p>This will warn you about blank lines, and skip them. The warning (and also other errors) go to STDERR, which means you can separate them from your standard output in STDOUT.</p>\n"}], "owner": {"reputation": 125, "user_id": 3669662, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IkcZd.jpg?s=128&g=1", "display_name": "tiit_helimut", "link": "https://stackoverflow.com/users/3669662/tiit-helimut"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2259, "favorite_count": 0, "accepted_answer_id": 27945363, "answer_count": 3, "score": 1, "last_activity_date": 1421246689, "creation_date": 1421236056, "last_edit_date": 1421243557, "question_id": 27942249, "link": "https://stackoverflow.com/questions/27942249/perl-use-of-uninitialized-value-error-when-value-should-be-set", "title": "Perl - &quot;Use of uninitialized value&quot; error when value should be set?", "body": "<p>I'm coming across a \"Use of uninitialized value\" error when reading in files in nested \"while\" loops. I've cut down my code to the bare minimum and removed filenames/directories for privacy:</p>\n\n<pre><code>#/usr/bin/perl -w\nuse strict;\nuse warnings;\nuse diagnostics;\n\nmy $line_gene = undef;\nmy $gene_name = undef;\nmy $gene_chr  = undef;\nmy $gene_pos  = undef;\nmy $line_pval = undef;\nmy $chr       = undef;\nmy $pos_start = undef;\nmy $pos_end   = undef;\nmy $pos_mid   = undef;\nmy $pval      = undef;\n\nopen(IN_GENE,\"somefile_gene\") || die \"Failed, gene\\n\";\nopen(IN_PVAL,\"somefile_pval\") || die \"Failed, pval\\n\";\n\nwhile ($line_gene = &lt;IN_GENE&gt;) {\n   chomp $line_gene;\n   ($gene_name,$gene_chr,$gene_pos) = split(/\\t/,$line_gene);\n   while ($line_pval = &lt;IN_PVAL&gt;) {\n      chomp $line_pval;\n      ($chr,$pos_start,$pos_end,undef,undef,$pval) = split(/\\t/,$line_pval);\n      $pos_mid = ($pos_start + $pos_end)/2;\n      if ($gene_chr == $chr) {\n         print $gene_chr.\"\\t\".$chr.\"\\n\";\n      }\n\n   }\n   seek IN_PVAL, 0, 0;\n}\nexit;\n</code></pre>\n\n<p>When I run this code, I get the following error message:</p>\n\n<pre><code>Use of uninitialized value $gene_chr in numeric eq (==) at Xtest.pl line 36,\n&lt;IN_PVAL&gt; line 5772 (#1)\n</code></pre>\n\n<p>and then following these <code>\"Use of uninitialized value\"</code> warnings are the correct lines printed out to standard input:</p>\n\n<pre><code>6       6\n1       1\n20      20\n...     ...\n</code></pre>\n\n<p>Unless I'm clearly doing something wrong, I can't see why it thinks that <code>$gene_chr</code> is uninitialized. What's also interesting is that for every line of the input file <code>&lt;IN_PVAL&gt;</code>, it prints the above <code>\"Use of uninitialized value\"</code> warning from line 1 to line 5772 (see above warning), except that this file only has 2886 lines, exactly half of 5772.</p>\n\n<p>Neither input file (<code>&lt;IN_GENE&gt;</code> and <code>&lt;IN_PVAL&gt;</code>) has blank lines, either in the middle or at the end and both are formatted as expected with the correct number of fields, none of which are empty.</p>\n\n<p>Any advice would be appreciated. Thanks!</p>\n"}, {"tags": ["regex", "string", "perl", "matrix"], "answers": [{"comments": [{"owner": {"reputation": 11722, "user_id": 1981275, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/f3e2752d5fbb3693863943132ffa39f6?s=128&d=identicon&r=PG", "display_name": "user1981275", "link": "https://stackoverflow.com/users/1981275/user1981275"}, "edited": false, "score": 0, "creation_date": 1421233558, "post_id": 27941296, "comment_id": 44278667, "body": "But this assumes that I know that it&#39;s the fourth column I want to remove. The above was just an example. I want to find all columns that only contain either <code>X</code> or <code>Y</code> and remove these columns."}, {"owner": {"reputation": 11722, "user_id": 1981275, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/f3e2752d5fbb3693863943132ffa39f6?s=128&d=identicon&r=PG", "display_name": "user1981275", "link": "https://stackoverflow.com/users/1981275/user1981275"}, "edited": false, "score": 0, "creation_date": 1421234730, "post_id": 27941296, "comment_id": 44279289, "body": "added another example @\u0421\u0443\u0445\u043e\u043927"}, {"owner": {"reputation": 11722, "user_id": 1981275, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/f3e2752d5fbb3693863943132ffa39f6?s=128&d=identicon&r=PG", "display_name": "user1981275", "link": "https://stackoverflow.com/users/1981275/user1981275"}, "edited": false, "score": 0, "creation_date": 1421240896, "post_id": 27941296, "comment_id": 44282674, "body": "This does not work for me,  @\u0421\u0443\u0445\u043e\u043927: I am getting a <code>Use of uninitialized value in subtraction (-)</code>..."}, {"owner": {"reputation": 11722, "user_id": 1981275, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/f3e2752d5fbb3693863943132ffa39f6?s=128&d=identicon&r=PG", "display_name": "user1981275", "link": "https://stackoverflow.com/users/1981275/user1981275"}, "edited": false, "score": 0, "creation_date": 1421241850, "post_id": 27941296, "comment_id": 44283246, "body": "It is <code>my %hash = (&#39;1&#39;=&gt;&#39;Xsome_strX&#39;, &#39;2&#39;=&gt;&#39;YsomeXstrY&#39;);</code>"}], "tags": [], "owner": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "is_accepted": true, "score": 1, "last_activity_date": 1421242496, "last_edit_date": 1421242496, "creation_date": 1421233177, "answer_id": 27941296, "question_id": 27941259, "link": "https://stackoverflow.com/questions/27941259/perl-remove-characters-from-string-matrix-according-to-pattern/27941296#27941296", "title": "Perl remove characters from string matrix according to pattern", "body": "<pre><code>my $total = values %hash;\nmy %ind;\nfor my $v (values %hash) {\n\n  $ind{ pos($v) -1 }++ while $v =~ /[XY]/g;\n}\nmy @to_remove = sort {$b &lt;=&gt; $a} grep { $ind{$_} == $total } keys %ind;\n\nfor my $v (values %hash) {\n\n  substr($v, $_, 1, \"\") for @to_remove;\n}\n</code></pre>\n"}], "owner": {"reputation": 11722, "user_id": 1981275, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/f3e2752d5fbb3693863943132ffa39f6?s=128&d=identicon&r=PG", "display_name": "user1981275", "link": "https://stackoverflow.com/users/1981275/user1981275"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 137, "favorite_count": 0, "accepted_answer_id": 27941296, "answer_count": 1, "score": 0, "last_activity_date": 1421242496, "creation_date": 1421233029, "last_edit_date": 1421234437, "question_id": 27941259, "link": "https://stackoverflow.com/questions/27941259/perl-remove-characters-from-string-matrix-according-to-pattern", "title": "Perl remove characters from string matrix according to pattern", "body": "<p>I have multiple strings with the same length stored in a hash data structure. <strong>Example:</strong></p>\n\n<pre><code>$VAR1 = {\n          'first' =&gt; 'abcXY',\n          'second' =&gt; 'XYXYa',\n          'third' =&gt; '*abXZ'\n        };\n</code></pre>\n\n<p>From this 'matrix' of characters, I would like to remove the 'columns' which exclusively contain the characters <code>X</code> or <code>Y</code>. In the above example, this would be the fourth character of each string (4th 'column'). \nThe desired result would be:</p>\n\n<pre><code>$VAR1 = {\n          'first' =&gt; 'abcY',\n          'second' =&gt; 'XYXa',\n          'third' =&gt; '*abZ'\n        };\n</code></pre>\n\n<p>Following code does this by creating a transpose of the values of my hash structure and then determines which indices to keep:</p>\n\n<pre><code># data structure\nmy %h = ('first'=&gt;'abcXY', 'second'=&gt;'XYXYa', 'third'=&gt;'*abXZ' );\n\n# get length of all values in hash\nmy $nchar = length $h{(keys(%h))[0]};\n\n# transpose values of hash\nmy @transposed = map { my $idx=$_; [map {substr ($_, $idx, 1) } values(%h)]  } 0..$nchar-1; \n\n# determine indices which I want to keep\nmy @indices;\nfor my $i (0..$#transposed){\n        my @a = @{$transposed[$i]};\n\n        # do not keep index if column consists of X and Y\n        if ( scalar(grep {/X|Y/} @a) &lt; scalar(@a) ) {\n                push @indices, $i;\n        }   \n}\n\n# only keep letters with indices\nfor my $k (keys %h){\n        my $str = $h{$k};\n        my $reduced = join \"\", map{ substr ($str, $_, 1) } @indices;\n        $h{$k} = $reduced;\n}\n</code></pre>\n\n<p>This is a terrible amount of code for such a simple operation. How could I do this more elegantly (preferably not with some matrix library, but with standard perl)?</p>\n\n<p><strong>Edit</strong></p>\n\n<p>Here another example: From the following strings, the first and last characters should be removed, because in both strings, the first and last position is either <code>X</code> or <code>Y</code>:</p>\n\n<pre><code>$VAR1 = {\n          '1' =&gt; 'Xsome_strX',\n          '2' =&gt; 'YsomeXstrY'\n        };\n</code></pre>\n\n<p>Desired result:</p>\n\n<pre><code>$VAR1 = {\n          '1' =&gt; 'some_str',\n          '2' =&gt; 'someXstr'\n        };\n</code></pre>\n"}, {"tags": ["perl", "sqlanywhere"], "answers": [{"tags": [], "owner": {"reputation": 1062, "user_id": 504300, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/48b0cca259436762a35cdd2c587ceb1b?s=128&d=identicon&r=PG", "display_name": "TedOnTheNet", "link": "https://stackoverflow.com/users/504300/tedonthenet"}, "is_accepted": false, "score": 0, "last_activity_date": 1449190231, "creation_date": 1449190231, "answer_id": 34079069, "question_id": 27939708, "link": "https://stackoverflow.com/questions/27939708/perl-dbdsqlanywhere-hangs-when-running-stored-procedure/34079069#34079069", "title": "Perl DBD::SQLAnywhere hangs when running stored procedure", "body": "<p>You probably need to commit your changes. I guess it's a transaction problem.</p>\n"}], "owner": {"reputation": 31, "user_id": 599703, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdd79b1f7b0c84006508d2d9a8fc1273?s=128&d=identicon&r=PG", "display_name": "user599703", "link": "https://stackoverflow.com/users/599703/user599703"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 137, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1449190231, "creation_date": 1421228096, "last_edit_date": 1421237782, "question_id": 27939708, "link": "https://stackoverflow.com/questions/27939708/perl-dbdsqlanywhere-hangs-when-running-stored-procedure", "title": "Perl DBD::SQLAnywhere hangs when running stored procedure", "body": "<p>we have an old legacy application running on SQL Anywhere 11. When moving to new software we are first doing a data validation on the legacy system. \nI am using perl to automate this procedure.</p>\n\n<p>It is done by first adding a stored procedure to the database and then executing it and lastly selecting the results from a table.</p>\n\n<p>Now \nCreating the SP using the perl code - OK\nExecuting the SP using the perl code - NOK\nRunnoing the SP in a sql editor and then fetching the result using the perl code - OK</p>\n\n<p>When I try to execute the SP from the perl code the script simply hangs.</p>\n\n<p>Script:</p>\n\n<pre><code>#!/usr/bin/perl -w\nuse strict;\nuse DBI;\nuse File::Slurp;\nuse Data::Dumper;\n\nmy $dbh;\n\nsub createConnection{\n  my $uid = shift;\n  my $pwd = shift;\n\n  my $conn = DBI-&gt;connect(\"DBI:SQLAnywhere:ENG=ENG_NAME\",\n          \"UID=$uid;PWD=$pwd;DBN=dbn;LINKS=tcpip(host=IP;port=port)\") or die \"Cannot connect to database: $DBI::errstr\\n\";\n\n  return $conn;\n}\n\nsub createProcedure{\n    my $procedure = read_file('data_check.sql', binmode =&gt; ':utf8');\n\n    $dbh-&gt;do($procedure);\n}\n\nsub executeProcedure{\n    my $sth = $dbh-&gt;prepare('CALL prDataCheck(?,?,?);');\n    $sth-&gt;bind_param(1, '2014-01-14');\n    $sth-&gt;bind_param(2, 'FSK');\n    $sth-&gt;bind_param(3, 'Y');\n    $sth-&gt;execute();\n\n}\n\nsub getResult{\n     my $sth = $dbh-&gt;prepare('select * from result_table;');\n     $sth-&gt;execute();\n    my $response = $sth-&gt;fetchrow_hashref();\n    print Dumper $response . \"\\n\";\n\n}\n\n\n$dbh = createConnection(\"xxx\", \"yyy\");\n\ncreateProcedure();\nexecuteProcedure();\ngetResult();\n\n\n\n\n\nEND{\n  $dbh-&gt;disconnect;\n}\n  exit(0);\n</code></pre>\n\n<p>I have tried to execute the SP in various ways:</p>\n\n<p>First Attempt</p>\n\n<pre><code>$dbh-&gt;do(\"CALL prDataCheck('2014-01-14','FSK','Y');\")\n</code></pre>\n\n<p>Second attempt</p>\n\n<pre><code>my $sth = $dbh-&gt;prepare('CALL prDataCheck(?,?,?);');\n$sth-&gt;bind_param(1, '2014-01-14');\n$sth-&gt;bind_param(2, 'FSK');\n$sth-&gt;bind_param(3, 'Y');\n$sth-&gt;execute();\n</code></pre>\n\n<p>I have tried setting DBI->trace(3) when executing the script:\nBut not getting much</p>\n\n<pre><code>Executing Procedure ..\nGo ..\n    -&gt; prepare for DBD::SQLAnywhere::db (DBI::db=HASH(0x28042c8)~0x2804208 'call prDataCheck(?,?,?);') thr#2342010\nscanned 3 distinct placeholders\n    &lt;- prepare= ( DBI::st=HASH(0x2804550) ) [1 items] at dataCheck.pl line 29 via  at dataCheck.pl line 59\nexecuting\n    -&gt; execute for DBD::SQLAnywhere::st (DBI::st=HASH(0x2804550)~0x2804268 '2014-01-13' 'FSK' 'Y') thr#2342010\n         bind :p1 &lt;== '2014-01-14' (type 0)\nBinding input hostvar ':p1' to ordinal 1\n         bind :p2 &lt;== 'FSK' (type 0)\nBinding input hostvar ':p2' to ordinal 2\n         bind :p3 &lt;== 'Y' (type 0)\nBinding input hostvar ':p3' to ordinal 3\n</code></pre>\n\n<p>The behavior is the same whichever method I use for executing.</p>\n\n<p>I have also tried using strace when running the scripts but the output just doesn't say much. \nIt just seems to be waiting..</p>\n\n<pre><code>semop(4816896, {{0, -1, SEM_UNDO}}, 1)  = 0\n</code></pre>\n\n<p>Could someone please shed some light on this for me?\nI am kinda stuck ..\nI have tried compiling DBD::SQLAnywhere against the SDK found in both sqlanywhere11 and sqlanywhere16.</p>\n\n<p>Kr\nMarcus</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 299, "user_id": 1583935, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/323593bf3942eeb4bb6616d634a0a93d?s=128&d=identicon&r=PG", "display_name": "Andy Thompson", "link": "https://stackoverflow.com/users/1583935/andy-thompson"}, "edited": false, "score": 1, "creation_date": 1421227201, "post_id": 27939360, "comment_id": 44275075, "body": "Please provide an explanation"}, {"owner": {"reputation": 12075, "user_id": 1137055, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/59d7b43b9eb7d01bd8f7e51febe6053c?s=128&d=identicon&r=PG", "display_name": "dgw", "link": "https://stackoverflow.com/users/1137055/dgw"}, "edited": false, "score": 3, "creation_date": 1421227342, "post_id": 27939360, "comment_id": 44275152, "body": "<a href=\"http://whathaveyoutried.com/\" rel=\"nofollow noreferrer\">What have you tried?</a> SO is not a write-some-code-for-me site. You&#39;ll have to try for yourself and when you&#39;re stuck somewhere then state your problem here and you&#39;ll get help."}, {"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "reply_to_user": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "edited": false, "score": 0, "creation_date": 1421227924, "post_id": 27939360, "comment_id": 44275463, "body": "@\u0421\u0443\u0445\u043e\u043927 it&#39;s way more complicated than that"}, {"owner": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "reply_to_user": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 0, "creation_date": 1421228451, "post_id": 27939360, "comment_id": 44275764, "body": "@ysth perhaps there are too few test cases."}, {"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "reply_to_user": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "edited": false, "score": 0, "creation_date": 1421228980, "post_id": 27939360, "comment_id": 44276096, "body": "@\u0421\u0443\u0445\u043e\u043927 here are some more: 123-24 should become 123-4.  1-1 and 123-234 should stay unchanged."}, {"owner": {"reputation": 2415, "user_id": 4251338, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UNbCO.png?s=128&g=1", "display_name": "ssr1012", "link": "https://stackoverflow.com/users/4251338/ssr1012"}, "reply_to_user": {"reputation": 12075, "user_id": 1137055, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/59d7b43b9eb7d01bd8f7e51febe6053c?s=128&d=identicon&r=PG", "display_name": "dgw", "link": "https://stackoverflow.com/users/1137055/dgw"}, "edited": false, "score": 0, "creation_date": 1421229170, "post_id": 27939360, "comment_id": 44276209, "body": "@dgw: Thanks for your comment. This is my first question about in asks this site. Try to compromise for my way of question posted in this site. Will do best in furture."}, {"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "reply_to_user": {"reputation": 12075, "user_id": 1137055, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/59d7b43b9eb7d01bd8f7e51febe6053c?s=128&d=identicon&r=PG", "display_name": "dgw", "link": "https://stackoverflow.com/users/1137055/dgw"}, "edited": false, "score": 1, "creation_date": 1421229526, "post_id": 27939360, "comment_id": 44276435, "body": "@dgw: I normally try not to answer questions like this, but it&#39;s actually a great excuse to show off some modern perl regex features"}], "answers": [{"comments": [{"owner": {"reputation": 2415, "user_id": 4251338, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UNbCO.png?s=128&g=1", "display_name": "ssr1012", "link": "https://stackoverflow.com/users/4251338/ssr1012"}, "edited": false, "score": 0, "creation_date": 1421229085, "post_id": 27939781, "comment_id": 44276162, "body": "@dgw: Thanks for your comment. This is my first question about in asks this site. Try to compromise for my way of question posted in this site. Will do best in furture."}, {"owner": {"reputation": 2415, "user_id": 4251338, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UNbCO.png?s=128&g=1", "display_name": "ssr1012", "link": "https://stackoverflow.com/users/4251338/ssr1012"}, "edited": false, "score": 0, "creation_date": 1421229148, "post_id": 27939781, "comment_id": 44276199, "body": "Thanks its working..."}], "tags": [], "owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "is_accepted": true, "score": 3, "last_activity_date": 1421229392, "last_edit_date": 1421229392, "creation_date": 1421228350, "answer_id": 27939781, "question_id": 27939360, "link": "https://stackoverflow.com/questions/27939360/how-to-shrink-the-index-page-numbers-in-digits-wise-using-perl/27939781#27939781", "title": "How to shrink the index page numbers in digits wise using perl", "body": "<pre><code>s/(?=(\\d(?:-|(?1))\\d)(?![\\d-]))(\\d+)\\d+-\\K\\2//ga\n</code></pre>\n\n<p>We start off finding a <code>digits-digits</code> string where the length of both sets of digits is the same, but without consuming any of it.  This involves a lookahead looking for a balanced sets of digits (see <a href=\"http://perldoc.perl.org/perlfaq6.html#Can-I-use-Perl-regular-expressions-to-match-balanced-text?\" rel=\"nofollow\">http://perldoc.perl.org/perlfaq6.html#Can-I-use-Perl-regular-expressions-to-match-balanced-text?</a> for a good explanation) and a negative lookahead to make sure no more digits follow (so we don't simplify <code>120-1234</code> into <code>120-34</code>) and also that it isn't something like 11-12-3 which we don't want to try to handle.  Note that it is ok for there to be extra digits before the balanced digits; this allows us to further simplify partially simplified ranges like <code>123-24</code>.</p>\n\n<p>Once we've done that, we try to find as many digits from the first group as possible where there are at least some digits remaining and the digits in the second group start off the same (using the backreference <code>\\2</code>).  <code>\\K</code> is used to adjust where the substitution starts so that the replacement can remain empty.  <code>/a</code> is used to make <code>\\d</code> just mean 0-9, not any other kinds of digits.</p>\n"}], "owner": {"reputation": 2415, "user_id": 4251338, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UNbCO.png?s=128&g=1", "display_name": "ssr1012", "link": "https://stackoverflow.com/users/4251338/ssr1012"}, "delete_vote_count": 1, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 127, "favorite_count": 1, "closed_date": 1421241624, "accepted_answer_id": 27939781, "answer_count": 1, "score": -9, "last_activity_date": 1464429586, "creation_date": 1421227139, "last_edit_date": 1464429586, "question_id": 27939360, "link": "https://stackoverflow.com/questions/27939360/how-to-shrink-the-index-page-numbers-in-digits-wise-using-perl", "closed_reason": "Not suitable for this site", "title": "How to shrink the index page numbers in digits wise using perl", "body": "<p>In the Index file, we have primary, secondary and tertiary lines. In these lines we have page numbers with the ranges like:</p>\n\n<pre><code>nutrients in, 223-234\nreproductive phase of, 115-116,\n</code></pre>\n\n<p>It should be </p>\n\n<pre><code>nutrients in, 223-34\nreproductive phase of, 115-16,\n</code></pre>\n\n<p>It may be three digits or above... Could you please any one help me on this one.</p>\n"}, {"tags": ["sql", "oracle", "perl", "unix"], "answers": [{"tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 3, "last_activity_date": 1421230626, "creation_date": 1421230626, "answer_id": 27940524, "question_id": 27939086, "link": "https://stackoverflow.com/questions/27939086/how-to-invoke-sql-inside-perl-script/27940524#27940524", "title": "how to invoke SQL inside perl script", "body": "<p>Reading the <a href=\"https://metacpan.org/pod/DBI\" rel=\"nofollow\">documentation for the DBI module</a> would be a good start.</p>\n\n<p>Your problem seems to be this line.</p>\n\n<pre><code>$sth = dbi-&gt;prepare($sqlStatement)\n</code></pre>\n\n<p>You're trying to call the <code>prepare</code> method on the class \"dbi\". But you don't have a class called \"dbi\" in your program (or, at least, I can't see one in the code you've shown us).</p>\n\n<p>To use a database from Perl you need to do these things:</p>\n\n<p>1/ Load the DBI module (note, \"DBI\", not \"dbi\" - Perl is case sensitive).</p>\n\n<pre><code>use DBI;\n</code></pre>\n\n<p>2/ Connect to the database and get a database handle (Read the <a href=\"https://metacpan.org/pod/DBD::Oracle\" rel=\"nofollow\">DBD::Oracle documentation</a> for more details on the arguments to the <code>connect()</code> method).</p>\n\n<pre><code>my $dbh = DBI-&gt;connect('dbi:Oracle:dbname', $user, $password);\n</code></pre>\n\n<p>3/ You can then use this database handle to prepare SQL statements.</p>\n\n<pre><code>my $sth = $dbh-&gt;prepare($sqlStatement);\n</code></pre>\n"}], "owner": {"reputation": 45, "user_id": 4428432, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/00511f4eedaf9957ffa8faf748f099e9?s=128&d=identicon&r=PG&f=1", "display_name": "Amit", "link": "https://stackoverflow.com/users/4428432/amit"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 161, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1421230626, "creation_date": 1421226165, "last_edit_date": 1421228537, "question_id": 27939086, "link": "https://stackoverflow.com/questions/27939086/how-to-invoke-sql-inside-perl-script", "title": "how to invoke SQL inside perl script", "body": "<p>I am trying to connect with database and perform some SQL queries by using this code, but every time it hangs.</p>\n\n<pre><code>my $connect_str = `/osp/local/etc/.oralgn $srv_name PSMF`;\nmy $sqlFile = \"/osp/local/home/linus/amit/mytest.sql\";\nmy ($abc, $cde)= split (/\\@/ , $connect_str );\nprint \"$abc\";\n\n$ORACLE_SID=SDDG00;\n`export $ORACLE_SID`;\n\n#chomp($abc);\n\n#$abc=~ s/\\s+$//;\n`sqlplus $abc`;\n\nopen (SQL, \"$sqlFile\");\n\n\nwhile (my $sqlStatement = &lt;SQL&gt;) {\n   $sth = dbi-&gt;prepare($sqlStatement)\n         or die (qq(Can't prepare $sqlStatement));\n\n            $sth-&gt;execute()\n                  or die qq(Can't execute $sqlStatement);\n                  }\n</code></pre>\n\n<p>How do I invoke a SQL command inside <code>Perl</code>?</p>\n"}, {"tags": ["python", "perl", "file"], "comments": [{"owner": {"reputation": 4516, "user_id": 4213630, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JlAuz.jpg?s=128&g=1", "display_name": "aberna", "link": "https://stackoverflow.com/users/4213630/aberna"}, "edited": false, "score": 1, "creation_date": 1421223628, "post_id": 27938478, "comment_id": 44273356, "body": "StackOverflow is a site where you post questions about a problem you are having, not a list of requirements expecting others to do your work. So have you tried to solve this yourself and ran into a problem? What error did you get? Can you show some code?"}, {"owner": {"reputation": 96704, "user_id": 198633, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/5b9c04999233026354268c2ee4237e04?s=128&d=identicon&r=PG", "display_name": "inspectorG4dget", "link": "https://stackoverflow.com/users/198633/inspectorg4dget"}, "edited": false, "score": 2, "creation_date": 1421224348, "post_id": 27938478, "comment_id": 44273691, "body": "Yes, that is what you want to do, and that is how it should look"}], "answers": [{"tags": [], "owner": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "is_accepted": true, "score": 2, "last_activity_date": 1421223842, "creation_date": 1421223842, "answer_id": 27938532, "question_id": 27938478, "link": "https://stackoverflow.com/questions/27938478/how-to-remove-repetitive-entries-in-files/27938532#27938532", "title": "How to remove repetitive entries in files", "body": "<p>Perl from command line,</p>\n\n<pre><code>perl -lane 'my %s;print join \" \", grep /^(\\d+)_/ &amp;&amp; !$s{$1}++, @F' file\n</code></pre>\n\n<p>output</p>\n\n<pre><code>1_306500682 2_315577060 3_315161284 22_315577259\n\n2_315578866 3_315163106 1_306500983\n\n2_315579517 3_315162181 1_306502338\n\n1_306500655 2_315579567 3_315161256\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 96704, "user_id": 198633, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/5b9c04999233026354268c2ee4237e04?s=128&d=identicon&r=PG", "display_name": "inspectorG4dget", "link": "https://stackoverflow.com/users/198633/inspectorg4dget"}, "is_accepted": false, "score": 0, "last_activity_date": 1421224237, "creation_date": 1421224237, "answer_id": 27938621, "question_id": 27938478, "link": "https://stackoverflow.com/questions/27938478/how-to-remove-repetitive-entries-in-files/27938621#27938621", "title": "How to remove repetitive entries in files", "body": "<pre><code>with open('path/to/input') as infile, open('path/to/output', 'w') as outfile:\n    for line in infile:\n        seen = set()\n        nums = line.split()\n        for num in nums:\n            header = num.split(\"_\")[0]\n            if header not in seen:\n                outfile.write(num)\n                outfile.write(\" \")\n            seen.add(header)\n        outfile.write('\\n')\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "is_accepted": false, "score": 0, "last_activity_date": 1421234704, "creation_date": 1421234704, "answer_id": 27941783, "question_id": 27938478, "link": "https://stackoverflow.com/questions/27938478/how-to-remove-repetitive-entries-in-files/27941783#27941783", "title": "How to remove repetitive entries in files", "body": "<p>You could use a separate <code>set</code> to keep track of the word prefixes encountered so far and gather the non-repetitive ones from each line into a <code>list</code>. After processing each line that way, a replacement line of text can easily be constructed containing only the non-repetitive entries that were found. Note: This is just a slightly more efficient version of inspectorG4dget's current answer.</p>\n\n<pre><code>with open('input.txt', 'rt') as infile, \\\n     open('non_repetitive_input.txt', 'wt') as outfile:\n    for line in infile:\n        values, prefixes = [], set()\n        for word, prefix in ((entry, entry.partition('_')[0])\n                                for entry in line.split()):\n            if prefix not in prefixes:\n                values.append(word)\n                prefixes.add(prefix)\n        outfile.write(' '.join(values) + '\\n')\n</code></pre>\n\n<p>Output file's contents:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>1_306500682 2_315577060 3_315161284 22_315577259\n2_315578866 3_315163106 1_306500983\n2_315579517 3_315162181 1_306502338\n1_306500655 2_315579567 3_315161256\n</code></pre>\n"}], "owner": {"reputation": 51, "user_id": 2300042, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/b36f40f6b9d80702dccc5d1fd797204c?s=128&d=identicon&r=PG", "display_name": "user2300042", "link": "https://stackoverflow.com/users/2300042/user2300042"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 70, "favorite_count": 0, "accepted_answer_id": 27938532, "answer_count": 3, "score": -5, "last_activity_date": 1421234704, "creation_date": 1421223588, "question_id": 27938478, "link": "https://stackoverflow.com/questions/27938478/how-to-remove-repetitive-entries-in-files", "title": "How to remove repetitive entries in files", "body": "<p>I have a file (input.txt )with lines such as :</p>\n\n<pre><code>1_306500682 2_315577060 3_315161284 22_315577259 22_315576763 \n\n2_315578866 2_315579020 3_315163106 1_306500983 \n\n2_315579517 3_315162181 1_306502338 2_315578919 \n\n1_306500655 2_315579567 3_315161256 3_315161708 \n</code></pre>\n\n<p>From this, I only want to keep first entries in each line having repetitive values before _. For the above example, the output.txt should contain:</p>\n\n<pre><code>1_306500682 2_315577060 3_315161284 22_315577259 \n\n2_315578866 3_315163106 1_306500983 \n\n2_315579517 3_315162181 1_306502338 \n\n1_306500655 2_315579567 3_315161256 \n</code></pre>\n\n<p>plz help..</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 142005, "user_id": 465183, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/3b518a0ea4c992cfe9965671d0139ba4?s=128&d=identicon&r=PG", "display_name": "Gilles Quenot", "link": "https://stackoverflow.com/users/465183/gilles-quenot"}, "edited": false, "score": 0, "creation_date": 1421215237, "post_id": 27936390, "comment_id": 44270224, "body": "Is there any chance you will provide <code>submit.cgi</code> code or we have to figure out what it is ?"}, {"owner": {"reputation": 1102, "user_id": 999595, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/5bd09d642ab7c8f500491bd6850621e3?s=128&d=identicon&r=PG", "display_name": "jason dancks", "link": "https://stackoverflow.com/users/999595/jason-dancks"}, "reply_to_user": {"reputation": 142005, "user_id": 465183, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/3b518a0ea4c992cfe9965671d0139ba4?s=128&d=identicon&r=PG", "display_name": "Gilles Quenot", "link": "https://stackoverflow.com/users/465183/gilles-quenot"}, "edited": false, "score": 0, "creation_date": 1421215488, "post_id": 27936390, "comment_id": 44270293, "body": "Its pretty long. I&#39;ll see if I can just put the relevant snippets."}, {"owner": {"reputation": 61610, "user_id": 725418, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/82ac2dc3e1ad4b7187f245c416528df9?s=128&d=identicon&r=PG", "display_name": "TLP", "link": "https://stackoverflow.com/users/725418/tlp"}, "edited": false, "score": 1, "creation_date": 1421216481, "post_id": 27936390, "comment_id": 44270623, "body": "Does the <code>pwd</code> generated string contain a newline? You may need to <code>chomp</code> it. Also, instead of using <code>LAST:</code> label and the somewhat cryptic <code>return $found == 1</code>, you could just replace <code>$found = 1; last LAST;</code> with <code>return 1</code>. And then replace <code>return $found == 1</code> with <code>return 0</code>."}, {"owner": {"reputation": 60461, "user_id": 3636601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/69a1b4f750ece89db0e49c94519f1a7d?s=128&d=identicon&r=PG&f=1", "display_name": "Jens", "link": "https://stackoverflow.com/users/3636601/jens"}, "edited": false, "score": 0, "creation_date": 1421216500, "post_id": 27936390, "comment_id": 44270630, "body": "@jasondancks maybe the apache user has no permissions to read on of the directories?"}, {"owner": {"reputation": 61610, "user_id": 725418, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/82ac2dc3e1ad4b7187f245c416528df9?s=128&d=identicon&r=PG", "display_name": "TLP", "link": "https://stackoverflow.com/users/725418/tlp"}, "reply_to_user": {"reputation": 60461, "user_id": 3636601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/69a1b4f750ece89db0e49c94519f1a7d?s=128&d=identicon&r=PG&f=1", "display_name": "Jens", "link": "https://stackoverflow.com/users/3636601/jens"}, "edited": false, "score": 0, "creation_date": 1421216566, "post_id": 27936390, "comment_id": 44270652, "body": "@Jens Wouldn&#39;t the error be <code>Permission denied</code> in that case?"}, {"owner": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "edited": false, "score": 0, "creation_date": 1421216597, "post_id": 27936390, "comment_id": 44270665, "body": "&gt;&gt; <code>pwd</code> =&gt; <a href=\"http://perldoc.perl.org/Cwd.html\" rel=\"nofollow noreferrer\">perldoc.perl.org/Cwd.html</a> &lt;&lt;"}, {"owner": {"reputation": 61610, "user_id": 725418, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/82ac2dc3e1ad4b7187f245c416528df9?s=128&d=identicon&r=PG", "display_name": "TLP", "link": "https://stackoverflow.com/users/725418/tlp"}, "edited": false, "score": 0, "creation_date": 1421216713, "post_id": 27936390, "comment_id": 44270703, "body": "Technically, you do not need to get the current directory with <code>pwd</code>, you can just use relative paths, or no path if you want the current dir."}, {"owner": {"reputation": 60461, "user_id": 3636601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/69a1b4f750ece89db0e49c94519f1a7d?s=128&d=identicon&r=PG&f=1", "display_name": "Jens", "link": "https://stackoverflow.com/users/3636601/jens"}, "reply_to_user": {"reputation": 61610, "user_id": 725418, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/82ac2dc3e1ad4b7187f245c416528df9?s=128&d=identicon&r=PG", "display_name": "TLP", "link": "https://stackoverflow.com/users/725418/tlp"}, "edited": false, "score": 0, "creation_date": 1421216737, "post_id": 27936390, "comment_id": 44270712, "body": "@TLP I am not sure if the user has no read permissions it also can be a <code>file not found</code>"}, {"owner": {"reputation": 1102, "user_id": 999595, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/5bd09d642ab7c8f500491bd6850621e3?s=128&d=identicon&r=PG", "display_name": "jason dancks", "link": "https://stackoverflow.com/users/999595/jason-dancks"}, "reply_to_user": {"reputation": 61610, "user_id": 725418, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/82ac2dc3e1ad4b7187f245c416528df9?s=128&d=identicon&r=PG", "display_name": "TLP", "link": "https://stackoverflow.com/users/725418/tlp"}, "edited": false, "score": 0, "creation_date": 1421216967, "post_id": 27936390, "comment_id": 44270801, "body": "@TLP: I forgot to append <code>$path =~ s&#47;\\s&#47;&#47;g;</code>. I had that problem earlier. Even with the correct path I still have this problem."}, {"owner": {"reputation": 61610, "user_id": 725418, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/82ac2dc3e1ad4b7187f245c416528df9?s=128&d=identicon&r=PG", "display_name": "TLP", "link": "https://stackoverflow.com/users/725418/tlp"}, "edited": false, "score": 0, "creation_date": 1421217070, "post_id": 27936390, "comment_id": 44270840, "body": "@jasondancks Try this: <code>use Data::Dumper; $Data::Dumper::Useqq=1; print Dumper $path</code> See if you have any strange characters in your string."}], "answers": [{"tags": [], "owner": {"reputation": 137100, "user_id": 874188, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/ZcY77.png?s=128&g=1", "display_name": "tripleee", "link": "https://stackoverflow.com/users/874188/tripleee"}, "is_accepted": false, "score": 1, "last_activity_date": 1421217849, "creation_date": 1421217849, "answer_id": 27937165, "question_id": 27936390, "link": "https://stackoverflow.com/questions/27936390/perl-what-would-cause-perl-to-not-find-a-file-that-exists/27937165#27937165", "title": "perl: What would cause perl to not find a file that exists?", "body": "<p>If Apache is configured to run in a <code>chroot</code> it does not see <code>/home</code> on the host system at all.</p>\n"}, {"comments": [{"owner": {"reputation": 1102, "user_id": 999595, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/5bd09d642ab7c8f500491bd6850621e3?s=128&d=identicon&r=PG", "display_name": "jason dancks", "link": "https://stackoverflow.com/users/999595/jason-dancks"}, "edited": false, "score": 0, "creation_date": 1421354389, "post_id": 27938463, "comment_id": 44337777, "body": "It didn&#39;t help thats not the issue"}, {"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "reply_to_user": {"reputation": 1102, "user_id": 999595, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/5bd09d642ab7c8f500491bd6850621e3?s=128&d=identicon&r=PG", "display_name": "jason dancks", "link": "https://stackoverflow.com/users/999595/jason-dancks"}, "edited": false, "score": 0, "creation_date": 1421355924, "post_id": 27938463, "comment_id": 44338589, "body": "in your script, if you try to explicitly open the hardcoded filename &#39;/home/jddancks/Documents/perl/homeworks/hw13/grades4.txt&#39;, what error do you get?  (e.g. <code>print &quot;got error $! (&quot;.($!+0).&quot;)\\n&quot;;</code>)"}, {"owner": {"reputation": 1102, "user_id": 999595, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/5bd09d642ab7c8f500491bd6850621e3?s=128&d=identicon&r=PG", "display_name": "jason dancks", "link": "https://stackoverflow.com/users/999595/jason-dancks"}, "edited": false, "score": 0, "creation_date": 1421453994, "post_id": 27938463, "comment_id": 44380047, "body": "I got:  got error No such file or directory (2). I even recently tried setting up suExec on my machine (debian). Didn&#39;t help. I know for a fact the file exists. Could some weird corruption possibly be the cause?"}, {"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "reply_to_user": {"reputation": 1102, "user_id": 999595, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/5bd09d642ab7c8f500491bd6850621e3?s=128&d=identicon&r=PG", "display_name": "jason dancks", "link": "https://stackoverflow.com/users/999595/jason-dancks"}, "edited": false, "score": 0, "creation_date": 1421715348, "post_id": 27938463, "comment_id": 44456839, "body": "seems like either the cgi script is running on a different server than you expect or is chroot&#39;d to not have the whole filesystem exposed.  in the script, try printing <code>join(&quot;,&quot;,glob(&quot;&#47;*&quot;),glob(&quot;&#47;home&#47;*&quot;))</code> to see what&#39;s there"}, {"owner": {"reputation": 1102, "user_id": 999595, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/5bd09d642ab7c8f500491bd6850621e3?s=128&d=identicon&r=PG", "display_name": "jason dancks", "link": "https://stackoverflow.com/users/999595/jason-dancks"}, "edited": false, "score": 0, "creation_date": 1421715539, "post_id": 27938463, "comment_id": 44456892, "body": "heh. I uhh... had the append symbol pointed the wrong way: <code>&lt;&lt;</code> and tried to write to it."}], "tags": [], "owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "is_accepted": true, "score": 4, "last_activity_date": 1421225877, "last_edit_date": 1421225877, "creation_date": 1421223537, "answer_id": 27938463, "question_id": 27936390, "link": "https://stackoverflow.com/questions/27936390/perl-what-would-cause-perl-to-not-find-a-file-that-exists/27938463#27938463", "title": "perl: What would cause perl to not find a file that exists?", "body": "<p>As your hexdump shows, <code>pwd</code> returns the working directory followed by a newline, and that is what is you are assigning to $path.  Then you try to open <code>\"/home/jddancks/Documents/perl/homeworks/hw13\\n/grades4.txt\"</code> which indeed has a directory that does not exist.</p>\n\n<p>Try doing:</p>\n\n<pre><code>chomp( my $path = `pwd` );\n</code></pre>\n"}], "owner": {"reputation": 1102, "user_id": 999595, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/5bd09d642ab7c8f500491bd6850621e3?s=128&d=identicon&r=PG", "display_name": "jason dancks", "link": "https://stackoverflow.com/users/999595/jason-dancks"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 76, "favorite_count": 0, "accepted_answer_id": 27938463, "answer_count": 2, "score": 0, "last_activity_date": 1421225877, "creation_date": 1421213369, "last_edit_date": 1421217592, "question_id": 27936390, "link": "https://stackoverflow.com/questions/27936390/perl-what-would-cause-perl-to-not-find-a-file-that-exists", "title": "perl: What would cause perl to not find a file that exists?", "body": "<p>Running a perl cgi script I got the error it couldn't find the file it was trying to open. I check apache error log /var/log/apache2/error.log:</p>\n\n<pre><code>[Tue Jan 13 20:59:17 2015] [error] [client ::1] [Tue Jan 13 20:59:17 2015] submit.cgi: [Tue Jan 13 20:59:17 2015] submit.cgi: \n/home/jddancks/Documents/perl/homeworks/hw13/grades4.txt: No such file or directory at /var/www/homeworks/hw13/CreateExam.pm line 48., referer: http://localhost/homeworks/hw13/test.cgi\n</code></pre>\n\n<p>double check:</p>\n\n<pre><code>root@debian-macbook:/var/log/apache2# ls -l /home/jddancks/Documents/perl/homeworks/hw13/grades4.txt\n-rwxrwxrwx 1 jddancks jddancks 2095 Jan  7 12:25 /home/jddancks/Documents/perl/homeworks/hw13/grades4.txt\n</code></pre>\n\n<p>Why would this happen? This is a debian machine running apache 2.2 IDK if that helps. </p>\n\n<p>There are 2 files: submit.cgi and CreateExam.pm.\nsubmit.cgi:</p>\n\n<pre><code>use CreateExam;\n...\nmy $path = `pwd`;\n...\nmy $check = CreateExam-&gt;new(\"${path}/exam4.txt\",\"${path}/answers4.txt\",\"${path}/grades4.txt\",$pathroot);\n$check-&gt;entergrades($cookie_value,$cgi-&gt;Vars());\n</code></pre>\n\n<p>CreateExam.pm:</p>\n\n<pre><code>package CreateExam;\n\nsub new {\n    my ($class,$file,$answers,$grades,$script) = @_;\n    #print \"&lt;p&gt;in new: file: $file, grades: $grades&lt;/p&gt;\\n\";\n    return bless {'file'=&gt;$file,'answers'=&gt;$answers,'gradefile'=&gt;$grades,'script'=&gt;$script},$class;\n}\n\nsub tooktest {\n    my ($self,$person) = @_;\n    #print \"&lt;p&gt;in tooktest: person: $person&lt;/p&gt;\\n\";\n    my $grades = $self-&gt;{'gradefile'};\n    open(ANS,\"&lt; $grades\") or die \"$grades: $!\";\n    my $found = 0;\n    LAST: while(my $line = &lt;ANS&gt;) {\n        if($line =~ /\\&lt;test taker=$person/) { $found = 1; last LAST;}\n    }\n    return $found==1;\n}\n</code></pre>\n\n<hr>\n\n<p>Data::Dumper:</p>\n\n<pre><code>$VAR1 = \"/home/jddancks/Documents/perl/homeworks/hw13\"; (in browser)\n</code></pre>\n\n<p>hexdump:</p>\n\n<pre><code>jddancks@debian-macbook:~/Documents/perl/homeworks/hw13$ perl -e 'print qx(pwd)' | hexdump -C\n00000000  2f 68 6f 6d 65 2f 6a 64  64 61 6e 63 6b 73 2f 44  |/home/jddancks/D|\n00000010  6f 63 75 6d 65 6e 74 73  2f 70 65 72 6c 2f 68 6f  |ocuments/perl/ho|\n00000020  6d 65 77 6f 72 6b 73 2f  68 77 31 33 0a           |meworks/hw13.|\n0000002d\n</code></pre>\n"}, {"tags": ["perl", "sorting", "hash"], "comments": [{"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 3, "creation_date": 1421209813, "post_id": 27935868, "comment_id": 44268836, "body": "Ouch! My eyes!  A 25-line chunk of executable code in the replacement part of a substitute command is brutally horrid!  I don&#39;t even want to look at it; it is too horrid to be true.  If you must execute the code, put it into a function and invoke the function from the substitute command."}, {"owner": {"reputation": 385, "user_id": 3774994, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/ab06f00248afe2eefaa2a280761088c4?s=128&d=identicon&r=PG&f=1", "display_name": "depsai", "link": "https://stackoverflow.com/users/3774994/depsai"}, "edited": false, "score": 0, "creation_date": 1421211746, "post_id": 27935868, "comment_id": 44269266, "body": "Here they using substitution, want to store text in hash key. The problem is if the text is already exists at end of the text add integer number for repeated values, and then finally sort the keys."}, {"owner": {"reputation": 2750, "user_id": 801553, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/74c6e34ee0ad953bb3079f5bb5cd9497?s=128&d=identicon&r=PG", "display_name": "Patrick J. S.", "link": "https://stackoverflow.com/users/801553/patrick-j-s"}, "edited": false, "score": 1, "creation_date": 1421211984, "post_id": 27935868, "comment_id": 44269324, "body": "Don&#39;t use regular expressions to parse xml. ever. Take a look at <code>die</code>. It is the proper replacement for your <code>print_exit</code>. For preformance reasons, you should avoid <code>$&amp;</code> (which you can, if you introduce a matching group and use <code>$1</code>). A plain hash is probably the wrong datastructure. You could use a hash of arrays."}, {"owner": {"reputation": 61610, "user_id": 725418, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/82ac2dc3e1ad4b7187f245c416528df9?s=128&d=identicon&r=PG", "display_name": "TLP", "link": "https://stackoverflow.com/users/725418/tlp"}, "edited": false, "score": 0, "creation_date": 1421212674, "post_id": 27935868, "comment_id": 44269494, "body": "Holy moly, that regex is such a bad idea, I think it&#39;s one of the worst I&#39;ve seen this year. And possibly the previous."}, {"owner": {"reputation": 34726, "user_id": 133939, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/pN9C5.png?s=128&g=1", "display_name": "Zaid", "link": "https://stackoverflow.com/users/133939/zaid"}, "edited": false, "score": 0, "creation_date": 1421220320, "post_id": 27935868, "comment_id": 44272047, "body": "I don&#39;t think I&#39;ve ever seen <code>s&#47;&#47;&#47;</code> inside a <code>s&#47;&#47;&#47;</code> before."}], "answers": [{"tags": [], "owner": {"reputation": 42833, "user_id": 18914, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7a20a39ae2ef47ae042a3eddd5b5bd19?s=128&d=identicon&r=PG", "display_name": "Dave Sherohman", "link": "https://stackoverflow.com/users/18914/dave-sherohman"}, "is_accepted": true, "score": 2, "last_activity_date": 1421227269, "creation_date": 1421227269, "answer_id": 27939405, "question_id": 27935868, "link": "https://stackoverflow.com/questions/27935868/hash-key-sorting-using-perl/27939405#27939405", "title": "Hash key sorting using perl?", "body": "<p>From a very brief look at your code, it appears that you want to store refcounts as the values in your hash, with the ability to have multiple counts for a single key.  This is easily doable by using a hash of arrays (commonly abbreviated to HoA).  Each key must, by definition, be unique, but the associated value can be a reference, allowing you to store multiple items under that key, or to build even more complex data structures.</p>\n\n<pre><code>#!/usr/bin/env perl    \n\nuse strict;\nuse warnings;\nuse 5.010;\n\nmy %hash;\n\nwhile (my $line = &lt;DATA&gt;) {\n  chomp $line;\n  my ($key, $count) = split ',', $line;\n  push @{$hash{$key}}, $count;\n}\n\nfor my $key (sort keys %hash) {\n  my $values = $hash{$key};\n  for (@$values) {\n    say \"$key ($_)\";\n  }\n} \n\n__DATA__\nthieooieroh,1\napple,2\napple,3\nhighefhfe,4\nbufghifeh,5\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>apple (2)\napple (3)\nbufghifeh (5)\nhighefhfe (4)\nthieooieroh (1)\n</code></pre>\n\n<p>If you're not actually concerned with storing multiple data items with each key, but only with the number of times each key appears, it's even simpler.  Change the two loops in the above code to:</p>\n\n<pre><code>while (my $line = &lt;DATA&gt;) {\n  chomp $line;\n  $hash{$line}++;\n}\n\nfor my $key (sort keys %hash) {\n  say $key for 1 .. $hash{$key};\n}\n</code></pre>\n\n<p>and you get the output</p>\n\n<pre><code>apple\napple\nbufghifeh\nhighefhfe\nthieooieroh\n</code></pre>\n\n<p>As for the rest of your posted code, don't try to parse XML with regexes.  Arbitrary XML <em>cannot</em> be parsed beyond a very crude first approximation by <em>regular</em> expressions because XML is not structurally \"regular\".  There are many fine XML-parsing modules on CPAN which will parse your XML correctly for you, while also requiring far less effort from you than trying to write your own parser.  Use one of them.  Not regexes.</p>\n"}], "owner": {"reputation": 694, "user_id": 3916803, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/orEp7.jpg?s=128&g=1", "display_name": "parthi", "link": "https://stackoverflow.com/users/3916803/parthi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 139, "favorite_count": 0, "accepted_answer_id": 27939405, "answer_count": 1, "score": 2, "last_activity_date": 1421227269, "creation_date": 1421209561, "question_id": 27935868, "link": "https://stackoverflow.com/questions/27935868/hash-key-sorting-using-perl", "title": "Hash key sorting using perl?", "body": "<p>I need to sort hash key using perl also i need to allow duplicate in key. So that i planned to check <code>exists</code> method in perl<br> if it is exists then i increment a last digit then i will store into hash. \nI tried the following code:</p>\n\n<pre><code>use strict;\nuse warnings;\nuse iPerl::Basic qw(_save_file _open_file);\nmy $xml = $ARGV[0];\nmy ($xmlcnt,$backcnt,$refcnt,$name,$year) = \"\";\nmy %sort = ();\nif(($#ARGV != 0) or(not -f \"$xml\") or($xml!~ m{\\.xml$}i)){ \n    print_exit(\"\\t\\tSYSTAX ERROR: &lt;EXE&gt; &lt;xml File&gt;\\n\\n\")\n};\n$xmlcnt=_open_file($xml);\n$xmlcnt =~ s{&lt;back(?: [^&gt;]+)?&gt;(?:(?!&lt;/?back[ &gt;]).)*&lt;/back&gt;}{\n    $backcnt = $&amp;;\n\n    while($backcnt =~ m{&lt;ref(?: [^&gt;]+)?&gt;(?:(?!&lt;ref[ &gt;]).)*&lt;/ref&gt;}igs){\n        $refcnt = $&amp;;\n        $name = $1 if($refcnt =~ m{&lt;person-group(?: [^&gt;]+)?&gt;((?:(?!&lt;/?person-group[ &gt;]).)*)&lt;/person-group&gt;}is);\n        $year = $1 if($refcnt =~ m{&lt;year&gt;((?:(?!&lt;/?year[ &gt;]).)*)&lt;/year&gt;}is);\n        $name =~ s{&lt;/?(?:string-name|surname|given-names)&gt;}{}ig;\n        my $count = 1;\n        my $keys=\"$name $year\\E$count\";\n\n        if(exists ($sort{$keys})){\n\n            $keys =~ s{(\\d)$}{my $icr=$1;$icr++;qq($icr)}e;\n\n            #print\"$keys\\n\";\n            $sort{$keys}=\"$refcnt\";\n\n        }\n        else\n        {\n            $sort{$keys}=\"$refcnt\";\n        }\n\n\nprint join(\"\\n\",keys %sort);\n    }\nqq($backcnt)\n}igse;\n\n    my @keys = sort {\n $sort{$a} &lt;=&gt;  $sort{$b}\n# or\n# \"\\L$a\" cmp \"\\L$b\"\n} keys %sort;\n# print join(\"\\n\",@keys);\nsub print_exit {\n    my $msg = shift;\n    #print \"\\n$msg\";\n    exit;\n}\n</code></pre>\n\n<p>Please can anyone tell me what went wrong here?<br>\ninput:</p>\n\n<pre><code>thieooieroh\napple\napple\nhighefhfe\nbufghifeh\n</code></pre>\n\n<p>output:</p>\n\n<pre><code> apple\n apple\n bufghifeh\n highefhfe\n thieooieroh\n</code></pre>\n\n<p>Thanks in advance.</p>\n"}, {"tags": ["perl", "perl-data-structures", "collectd"], "answers": [{"tags": [], "owner": {"reputation": 16, "user_id": 4475370, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6iPJs.jpg?s=128&g=1", "display_name": "Justin C", "link": "https://stackoverflow.com/users/4475370/justin-c"}, "is_accepted": false, "score": 0, "last_activity_date": 1421799854, "creation_date": 1421799854, "answer_id": 28057616, "question_id": 27935258, "link": "https://stackoverflow.com/questions/27935258/how-to-pass-arguments-to-read-function-of-a-collectd-perl-plugin/28057616#28057616", "title": "How to pass arguments to read-function of a collectd perl-plugin?", "body": "<p>Square backets [ ] create an array ref, not an array.</p>\n\n<pre><code>my @data = ($m_instance, $connection);\n</code></pre>\n\n<p>or</p>\n\n<pre><code>my $data = [$m_instance, $connection];\nplugin_register(TYPE_READ, \"foo\", sub { return mongo_read($data); });\n</code></pre>\n\n<p>And then deal with a reference to an array in your mongo_read() sub.</p>\n"}], "owner": {"reputation": 2357, "user_id": 1747834, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/cea2583950ba41bcbbac8c8705ec1965?s=128&d=identicon&r=PG", "display_name": "Mikhail T.", "link": "https://stackoverflow.com/users/1747834/mikhail-t"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 205, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1421799854, "creation_date": 1421205051, "question_id": 27935258, "link": "https://stackoverflow.com/questions/27935258/how-to-pass-arguments-to-read-function-of-a-collectd-perl-plugin", "title": "How to pass arguments to read-function of a collectd perl-plugin?", "body": "<p>I'm trying to implement a collectd-plugin, which is supposed to report data for multiple instances of a server-process on the same machine.</p>\n\n<p>My TYPE_CONFIG-function is fine -- it gets each configuration-item and parses it.</p>\n\n<p>What I'm struggling with is the TYPE_READ-function -- I'd like each invocation of the reader to report only on <em>one</em> of the server-instances so that, should an invocation fail for one instance, the rate, with which collectd invokes the method for <em>other</em> instances, is not affected.</p>\n\n<p>So I tried to register multiple TYPE_READ methods from inside the TYPE_CONFIG-method.</p>\n\n<p>Unfortunately, collectd does not pass any arguments to the read-method... One alternative is to build a list of instances in config, register only one reader, and then loop through the list inside it -- this works but has the drawback mentioned above: should one instance fail to report its stats, the daemon will lower the inquiry rate for all instances.</p>\n\n<p>The other alternative <em>may</em> be to use Perl's anonymous functions -- but I'm not sure, how. The below does not work:</p>\n\n<pre><code>    my @data = [$m_instance, $connection];\n    plugin_register(TYPE_READ, \"foo\", sub { return mongo_read(@data); });\n</code></pre>\n\n<p>Collectd rejects such a call with: <code>Collectd::plugin_register: Invalid data</code>.</p>\n\n<p>Is there, perhaps, some easy way to create such a function in a way acceptable to plugin_register?</p>\n"}, {"tags": ["perl", "printf", "precision", "long-double"], "comments": [{"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 5, "creation_date": 1421193076, "post_id": 27933410, "comment_id": 44264889, "body": "uselongdouble will tell whether your perl was compiled using long doubles or not; if it wasn&#39;t, you need to recompile perl.  but Math::BigFloat could be useful instead."}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 0, "creation_date": 1421194265, "post_id": 27933410, "comment_id": 44265281, "body": "Related: <a href=\"http://stackoverflow.com/q/3722679/827263\">stackoverflow.com/q/3722679/827263</a>"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 0, "creation_date": 1421196888, "post_id": 27933410, "comment_id": 44265968, "body": "@ysth: By which I assume you mean <code>$Config{uselongdouble}</code> which requires <code>use Config</code>"}, {"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 5, "creation_date": 1421197522, "post_id": 27933410, "comment_id": 44266134, "body": "correct.  re the Dump() output, there&#39;s only one native perl floating point type, the NV.  it is normally a double, but $Config{uselongdouble} indicates perl was compiled to have it be a long double.  note that even a long double will have barely enough precision to store your 1234567890.123456789, so you may need to look at Math::BigFloat anyway"}, {"owner": {"reputation": 107, "user_id": 4372886, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/1029733046/picture?type=large", "display_name": "dnvrdave", "link": "https://stackoverflow.com/users/4372886/dnvrdave"}, "edited": false, "score": 0, "creation_date": 1421280568, "post_id": 27933410, "comment_id": 44304551, "body": "I added BigFloat and it works. Thanks! I also added $f which seems to indicate that I&#39;m only using double. How can I force long double?"}, {"owner": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "edited": false, "score": 1, "creation_date": 1421281626, "post_id": 27933410, "comment_id": 44304889, "body": "You probably want to update that Perl. You can get a slightly less antiquated version as an <a href=\"http://www.opencsw.org/packages/perl/\" rel=\"nofollow noreferrer\">OpenSolaris package</a>, or you can compile one up easily with <a href=\"http://perlbrew.pl/\" rel=\"nofollow noreferrer\">perlbrew</a>.  There have been <a href=\"https://metacpan.org/changes/distribution/Math-BigInt\" rel=\"nofollow noreferrer\">a lot of upgrades to Math::BigFloat</a> since 1.44 which shipped with 5.8.4"}, {"owner": {"reputation": 107, "user_id": 4372886, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/1029733046/picture?type=large", "display_name": "dnvrdave", "link": "https://stackoverflow.com/users/4372886/dnvrdave"}, "edited": false, "score": 0, "creation_date": 1421452951, "post_id": 27933410, "comment_id": 44379803, "body": "This explains why printf didn&#39;t work.  <a href=\"http://stackoverflow.com/questions/5426791/how-can-i-printf-a-perl-bignum-without-losing-precision\" title=\"how can i printf a perl bignum without losing precision\">stackoverflow.com/questions/5426791/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 107, "user_id": 4372886, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/1029733046/picture?type=large", "display_name": "dnvrdave", "link": "https://stackoverflow.com/users/4372886/dnvrdave"}, "edited": false, "score": 0, "creation_date": 1421453420, "post_id": 27954927, "comment_id": 44379918, "body": "&#39;use bignum;&#39; worked great! I found that Math::BigFloat didn&#39;t work with it, but I don&#39;t need it now. Thanks!"}, {"owner": {"reputation": 1489, "user_id": 1233840, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/a610f8ff037b91215b8140a51d279ad6?s=128&d=identicon&r=PG", "display_name": "cnd", "link": "https://stackoverflow.com/users/1233840/cnd"}, "edited": false, "score": 0, "creation_date": 1532742835, "post_id": 27954927, "comment_id": 90101279, "body": "Beware that bignum is as much as 100 <i>times</i> slower than native perl."}], "tags": [], "owner": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "is_accepted": true, "score": 1, "last_activity_date": 1421282430, "last_edit_date": 1421282430, "creation_date": 1421281452, "answer_id": 27954927, "question_id": 27933410, "link": "https://stackoverflow.com/questions/27933410/how-to-force-long-double-in-perl/27954927#27954927", "title": "How to force long double in Perl", "body": "<p><a href=\"http://metacpan.org/pod/bignum\" rel=\"nofollow\">bignum</a> will overload all operators in the current scope to use arbitrary precision integers and floating point operations.</p>\n\n<pre><code>use bignum;\n\nmy $f = 123456789.123456789;\nprint \"$f\\n\";         # 123456789.123456789\nprint $f + $f, \"\\n\";  # 246913578.246913578\n</code></pre>\n\n<p>Behind the scenes, bignum turns all numeric constants into Math::BigInt and Math::BigNum objects as appropriate.</p>\n\n<p>It's important to note that bignum is lexically scoped and does <em>not</em> effect the whole program.  For example...</p>\n\n<pre><code>{\n    use bignum;\n    $f = 123456789.123456789;  # $f is a Math::BigNum object\n}\n\n$g = 123456789.123456789;      # $g is a regular NV\n\nprint \"$f\\n\";     # 123456789.123456789\nprint \"$g\\n\";     # 123456789.123457\n\n# This will use Math::BigNum's addition method, but $g has already lost precision.\nprint $f + $g, \"\\n\";  # 246913578.246913789\n</code></pre>\n\n<p>You can get a bit better performance out of this by using the <a href=\"https://metacpan.org/pod/Math::BigInt::GMP\" rel=\"nofollow\">Math::BigInt::GMP</a> plugin to use the <a href=\"https://en.wikipedia.org/wiki/GNU_Multiple_Precision_Arithmetic_Library\" rel=\"nofollow\">GNU Multiple Precision Arithmetic Library</a> for some operations.  You have to install that module first using the normal CPAN install process (you don't need GMP).  Then tell bignum to use GMP.</p>\n\n<pre><code>use bignum lib =&gt; \"GMP\";\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 3, "last_activity_date": 1421294209, "creation_date": 1421294209, "answer_id": 27956579, "question_id": 27933410, "link": "https://stackoverflow.com/questions/27933410/how-to-force-long-double-in-perl/27956579#27956579", "title": "How to force long double in Perl", "body": "<p>Perl has one size of float, and it's called <code>NV</code>. The size of an <code>NV</code> is decided when Perl is built.</p>\n\n<pre><code>$ perl -V:nvsize\nnvsize='8';\n</code></pre>\n\n<p>This information is also accessible within a Perl program via the Config module.</p>\n\n<pre><code>$ perl -MConfig -E'say $Config{nvsize}'\n8\n</code></pre>\n\n<p>The size of <code>NV</code> cannot be changed after Perl is built.</p>\n\n<p>You can force Perl to be built to use <code>long double</code> floats as follows when when building Perl:</p>\n\n<pre><code>sh Configure -Duselongdouble ...\n  -or-\nperlbrew install -Duselongdouble ...\n  -or-\nperlbrew install --ld ...\n</code></pre>\n\n<p>If you don't want to rebuild your <code>perl</code> or make a new one, you will need to use a module. I recommend <a href=\"http://search.cpan.org/perldoc?Math::LongDouble\" rel=\"nofollow\">Math::LongDouble</a> as it provides access to native <code>long double</code> floats, and it does so as transparently as possible.</p>\n\n<p>Another option is to use an arbitrary-precision library such as <a href=\"http://search.cpan.org/perldoc?Math::BigFloat\" rel=\"nofollow\">Math::BigFloat</a>, but that will be slower that necessary if all you need is a <code>long double</code>.</p>\n"}], "owner": {"reputation": 107, "user_id": 4372886, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/1029733046/picture?type=large", "display_name": "dnvrdave", "link": "https://stackoverflow.com/users/4372886/dnvrdave"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1437, "favorite_count": 0, "accepted_answer_id": 27954927, "answer_count": 2, "score": 3, "last_activity_date": 1421294209, "creation_date": 1421191736, "last_edit_date": 1421280324, "question_id": 27933410, "link": "https://stackoverflow.com/questions/27933410/how-to-force-long-double-in-perl", "title": "How to force long double in Perl", "body": "<p>I lose precision when doing arithmetic or trying to print (debug) numbers this big:\n1234567890.123456789</p>\n\n<p>I think my problems are with $d (result of arithmetic) and the formatted print of $e.\nHow can I force long doubles? My Perl version (5.8.4 on SUN) says it's possible.\nsprintf has a size option for long doubles (q or L or ll), but I haven't figured out how to use it, and don't know if it would work with printf.</p>\n\n<p><strong>Edit:</strong> I added BigFloat, which works! But I'd still like to force long doubles.</p>\n\n<p>Try to add 1234567890 + 0.123456789\nand subtract 1234567890 - 0.123456789.</p>\n\n<pre><code>use Config;\nuse Math::BigFloat;\n$a = 1234567890;\n$b = 123456789;\n$c = $b/1e9;                   # 0.123456789\n$d = $a + $c;                  # not enough precision (32-bit or double?)\n$e = sprintf(\"%d.%.9d\",$a,$b); # combine as strings\n$f = 1234567890.123456789;     # for reference (not enough precision)\n\n# Use BigFloat to bypass lack of longdbl\n$aBig = Math::BigFloat-&gt;new(\"$a\");\n$dSum = $aBig-&gt;fadd(\"$c\");         # $dSum = $a + $c\n$aBig = Math::BigFloat-&gt;new(\"$a\"); # &lt;-- Need a new one for every operation?\n$dDif = $aBig-&gt;fsub(abs(\"$c\"));    # $dDif = $a - $c\n\nprint \"a $a\\n\";             # 1234567890  \nprint \"c $c\\n\";             # 0.123456789\nprint \"d=a+c $d\\n\";         # 1234567890.12346  &lt;-- **Problem**\nprint \"dSum=a+c $dSum\\n\";   # 1234567890.123456789  &lt;-- Solution\nprint \"dDif=a-c $dDif\\n\";   # 1234567890.876543211  &lt;-- Solution\nprint \"e $e\\n\";             # 1234567890.123456789\nprint \"f $f\\n\";             # 1234567890.12346  &lt;-- double, 52-bit, not longdbl? \nprintf (\"printf    e 20.9f %20.9f\\n\",$e);    # 1234567890.123456717 &lt;-- **Problem**\nprintf (\"printf dSum 20.9f %20.9f\\n\",$dSum); # 1234567890.123456717 &lt;-- **Problem**\nprintf (\"printf dSum 20s %20s\\n\",$dSum);     # 1234567890.123456789 \nprintf (\"printf dDif 20.9f %20.9f\\n\",$dDif); # 1234567890.876543283 &lt;-- **Problem**\nprintf (\"printf dDif 20s %20s\\n\",$dDif);     # 1234567890.876543211 \n\nprint \"uselongdouble $Config{uselongdouble}\\n\"; # empty. No long doubles by default\nprint \"d_longdbl $Config{d_longdbl}\\n\";         # \"define\". Supports long doubles\nprint \"size double longdbl $Config{doublesize} $Config{longdblsize}\\n\"; # Ans 8 16\n</code></pre>\n\n<p>I also used this code to try to understand the types, but it didn't help much. Has anyone used it to explain problems like this?</p>\n\n<pre><code>use Devel::Peek 'Dump';\n\nDump ($dSum); # Wow, it's complicated\nDump ($f);\n</code></pre>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 589595, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1421188644, "post_id": 27932754, "comment_id": 44263218, "body": "Quantifiers are greedy by default. If you don&#39;t understand what that means, go back to the regex tutorials."}], "answers": [{"tags": [], "owner": {"reputation": 981, "user_id": 3939198, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feHEO.jpg?s=128&g=1", "display_name": "Marc Anton Dahmen", "link": "https://stackoverflow.com/users/3939198/marc-anton-dahmen"}, "is_accepted": false, "score": 0, "last_activity_date": 1421216478, "last_edit_date": 1421216478, "creation_date": 1421188748, "answer_id": 27932804, "question_id": 27932754, "link": "https://stackoverflow.com/questions/27932754/perl-regex-partial-word-match/27932804#27932804", "title": "perl regex partial word match", "body": "<p>Try this as the regex:</p>\n\n<pre><code>\\b[\\w]*(vssx|vddx)[\\w]*\\b\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "is_accepted": false, "score": 0, "last_activity_date": 1421190360, "last_edit_date": 1421190360, "creation_date": 1421189202, "answer_id": 27932902, "question_id": 27932754, "link": "https://stackoverflow.com/questions/27932754/perl-regex-partial-word-match/27932902#27932902", "title": "perl regex partial word match", "body": "<blockquote>\n  <p>I am trying to remove all words that [...]</p>\n</blockquote>\n\n<p>This type of problem lends itself well to <code>grep</code>, which can be used to find the elements in a list that match a condition. You can use <code>split</code> to convert your string to a list of words and then filter it like this:</p>\n\n<pre><code>use strict;\nuse warnings;\nuse 5.010;\n\nmy $string = 'garble variable10 variable1 vssx vddx xi_21_vssx vddx_garble_21 xi_blahvssx_grbl_2';\n\nmy @words = split ' ', $string;\n\nmy @filtered = grep { $_ !~ /(?:vssx|vddx)/ } @words;\n\nsay \"@filtered\";\n</code></pre>\n\n<h3>Output:</h3>\n\n<pre><code>garble variable10 variable1\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 169, "user_id": 4447265, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/pWYgw.jpg?s=128&g=1", "display_name": "jbord39", "link": "https://stackoverflow.com/users/4447265/jbord39"}, "edited": false, "score": 0, "creation_date": 1421189504, "post_id": 27932928, "comment_id": 44263591, "body": "If you wanted to preserve the spaces could you not just set the replace portion of the s/match/replace/ to be a space, then do something like $var =~ s/ +/ /g to remove any duplicate spaces"}, {"owner": {"reputation": 795, "user_id": 2651994, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/d9c186dfe9e6d9dba2747de09636779e?s=128&d=identicon&r=PG", "display_name": "lightbringer", "link": "https://stackoverflow.com/users/2651994/lightbringer"}, "edited": false, "score": 0, "creation_date": 1421189520, "post_id": 27932928, "comment_id": 44263595, "body": "well if you replace the whole regex with a space, a vssx b will become a b"}, {"owner": {"reputation": 30485, "user_id": 1222951, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/s64JD.png?s=128&g=1", "display_name": "Aran-Fey", "link": "https://stackoverflow.com/users/1222951/aran-fey"}, "edited": false, "score": 0, "creation_date": 1421189641, "post_id": 27932928, "comment_id": 44263642, "body": "In that case <code>a vssx vssx b</code> would have two spaces between <code>a  b</code>."}, {"owner": {"reputation": 795, "user_id": 2651994, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/d9c186dfe9e6d9dba2747de09636779e?s=128&d=identicon&r=PG", "display_name": "lightbringer", "link": "https://stackoverflow.com/users/2651994/lightbringer"}, "edited": false, "score": 0, "creation_date": 1421189940, "post_id": 27932928, "comment_id": 44263765, "body": "that&#39;s true. However, we can fix that with another regex to remove unwanted spaces. s/\\s+/ /g will do I think"}], "tags": [], "owner": {"reputation": 30485, "user_id": 1222951, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/s64JD.png?s=128&g=1", "display_name": "Aran-Fey", "link": "https://stackoverflow.com/users/1222951/aran-fey"}, "is_accepted": false, "score": 0, "last_activity_date": 1421189284, "creation_date": 1421189284, "answer_id": 27932928, "question_id": 27932754, "link": "https://stackoverflow.com/questions/27932754/perl-regex-partial-word-match/27932928#27932928", "title": "perl regex partial word match", "body": "<p>You can use</p>\n\n<pre><code>\\s*\\S*(?:vssx|vddx)\\S*\\s*\n</code></pre>\n\n<p>The problem with your regex were:</p>\n\n<ul>\n<li>The <code>.*</code> should have been non-greedy.</li>\n<li>The <code>.*</code> in front of <code>(vssx|vddx)</code> mustn't match whitespace characters, so you have to use <code>\\S*</code>.</li>\n</ul>\n\n<p>Note that there's no way to properly preserve the space between words - i.e. <code>a vssx b</code> will become <code>ab</code>.</p>\n\n<p><a href=\"https://regex101.com/r/yP7dI9/2\" rel=\"nofollow\">regex101 demo.</a></p>\n"}, {"comments": [{"owner": {"reputation": 169, "user_id": 4447265, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/pWYgw.jpg?s=128&g=1", "display_name": "jbord39", "link": "https://stackoverflow.com/users/4447265/jbord39"}, "edited": false, "score": 0, "creation_date": 1421190119, "post_id": 27932949, "comment_id": 44263837, "body": "Worked great and makes sense, thanks for the succinct answer."}], "tags": [], "owner": {"reputation": 795, "user_id": 2651994, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/d9c186dfe9e6d9dba2747de09636779e?s=128&d=identicon&r=PG", "display_name": "lightbringer", "link": "https://stackoverflow.com/users/2651994/lightbringer"}, "is_accepted": true, "score": 1, "last_activity_date": 1421189399, "creation_date": 1421189399, "answer_id": 27932949, "question_id": 27932754, "link": "https://stackoverflow.com/questions/27932754/perl-regex-partial-word-match/27932949#27932949", "title": "perl regex partial word match", "body": "<p>I think the regex will just be</p>\n\n<pre><code>$var =~ s/\\S*(vssx|vddx)\\S*/ /g;\n</code></pre>\n"}], "owner": {"reputation": 169, "user_id": 4447265, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/pWYgw.jpg?s=128&g=1", "display_name": "jbord39", "link": "https://stackoverflow.com/users/4447265/jbord39"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 682, "favorite_count": 0, "accepted_answer_id": 27932949, "answer_count": 4, "score": 1, "last_activity_date": 1421216478, "creation_date": 1421188500, "question_id": 27932754, "link": "https://stackoverflow.com/questions/27932754/perl-regex-partial-word-match", "title": "perl regex partial word match", "body": "<p>I am trying to remove all words that contain two keys (in Perl).</p>\n\n<p>For example, the string</p>\n\n<pre><code>garble variable10 variable1 vssx vddx xi_21_vssx vddx_garble_21 xi_blahvssx_grbl_2\n</code></pre>\n\n<p>Should become</p>\n\n<pre><code>garble variable10 variable1\n</code></pre>\n\n<p>To just remove the normal, unappended/prepended keys is easy:</p>\n\n<pre><code>$var =~ s/(vssx|vddx)/ /g;\n</code></pre>\n\n<p>However I cannot figure out how to get it to remove the entire xi_21_vssx part.  I tried:</p>\n\n<pre><code>$var =~ s/\\s.*(vssx|vddx).*\\s/ /g\n</code></pre>\n\n<p>Which does not work correctly.  I do not understand why... it seems like \\s should match the space, then .* matches anything up to one of the patterns, then the pattern, then .* matches anything preceding the pattern until the next space.</p>\n\n<p>I also tried replacing \\s (whitespace) with \\b (word boundary) but it also did it work.  Another attempt:</p>\n\n<pre><code>$var =~ s/ .*(vssx|vddx).* / /g\n$var =~ s/(\\s.*vssx.*\\s|\\s.*vddx.*\\s)/ /g\n</code></pre>\n\n<p>As well as a few other mungings.</p>\n\n<p>Any pointers/help would be greatly appreciated.</p>\n\n<p>-John</p>\n"}, {"tags": ["perl", "cgi"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 2, "creation_date": 1421186098, "post_id": 27931989, "comment_id": 44261997, "body": "Please show your calling code. And your package name (and the name of the file) should be <code>DebugCGI</code> as lower-case package names are reserved for core Perl pragmas. Also, please don&#39;t call your variables <code>$tmp</code> -- they are all temporary."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1421186610, "post_id": 27931989, "comment_id": 44262267, "body": "Most likely problem: You can&#39;t write to the file since you failed to open it since the current work directory isn&#39;t what you think it is or due to permission issues. (Use <code>open(...) or die $!;</code>) You&#39;ll also have problems if you create two instances of the class since you use <code>&gt;</code> instead of <code>&gt;&gt;</code> and since you use a global var for the file handle. (Use <code>open(my $lls, ...)</code> and <code>glob=&gt;$lls</code>)"}, {"owner": {"reputation": 41846, "user_id": 926143, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/3396173c3d22988be1a0732d184902aa?s=128&d=identicon&r=PG", "display_name": "7stud", "link": "https://stackoverflow.com/users/926143/7stud"}, "edited": false, "score": 1, "creation_date": 1421187291, "post_id": 27931989, "comment_id": 44262631, "body": "The thing I really like is the clever sub name that makes the header sub look like an infinitely recursing function call.  Well done.  Are you planning on entering your code in a code obfuscation contest?  <b>I&#39;m trying to debug a cgi script that reports no errors but the browser displays the generated text as opposed to rendering the page.</b> That&#39;s because the response has a Content-Type header that is text/plain instead of text/html."}, {"owner": {"reputation": 1102, "user_id": 999595, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/5bd09d642ab7c8f500491bd6850621e3?s=128&d=identicon&r=PG", "display_name": "jason dancks", "link": "https://stackoverflow.com/users/999595/jason-dancks"}, "edited": false, "score": 0, "creation_date": 1421188508, "post_id": 27931989, "comment_id": 44263170, "body": "In my own defense the entire point was to change the bad script as little as possible by simply making this wrapper object around cgi to see what gets called and when. I thought the best way to do that was to mimic cgi to change as little code as possible, otherwise what would be the purpose. I&#39;m just a noob."}], "answers": [{"comments": [{"owner": {"reputation": 41846, "user_id": 926143, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/3396173c3d22988be1a0732d184902aa?s=128&d=identicon&r=PG", "display_name": "7stud", "link": "https://stackoverflow.com/users/926143/7stud"}, "edited": false, "score": 0, "creation_date": 1421215458, "post_id": 27933095, "comment_id": 44270282, "body": "@jason dancks, I posted a full example if you are interested."}], "tags": [], "owner": {"reputation": 41846, "user_id": 926143, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/3396173c3d22988be1a0732d184902aa?s=128&d=identicon&r=PG", "display_name": "7stud", "link": "https://stackoverflow.com/users/926143/7stud"}, "is_accepted": true, "score": 1, "last_activity_date": 1421489951, "last_edit_date": 1421489951, "creation_date": 1421190102, "answer_id": 27933095, "question_id": 27931989, "link": "https://stackoverflow.com/questions/27931989/perl-cant-print-to-filehandle-in-object/27933095#27933095", "title": "perl: Can&#39;t print to filehandle in object?", "body": "<p>You have a problem here:</p>\n\n<pre><code>sub header {\n    my $self = shift;\n    my $tmp = shift-&gt;{'cgi'}-&gt;header(@_);\n    ...\n</code></pre>\n\n<p>$self is your hash, which contains the cgi object.  So, you need to do this:</p>\n\n<pre><code>sub header {\n    my $self = shift;\n    my $cgi = $self-&gt;{'cgi'};\n    my $header_str = $cgi-&gt;header(@_);\n</code></pre>\n\n<p><strong>shift</strong><br>\nShifts the first value of the array off and returns it, shortening the array by 1 and moving everything down.</p>\n\n<p><a href=\"http://perldoc.perl.org/functions/shift.html\" rel=\"nofollow\">http://perldoc.perl.org/functions/shift.html</a></p>\n\n<p>This is more like what modern perl code looks like:</p>\n\n<p>DebugCGI.pm:</p>\n\n<pre><code>package DebugCGI;\n\nuse strict;\nuse warnings;\nuse 5.016;\nuse Data::Dumper;\n\nuse CGI; \nuse CGI::Carp qw(warningsToBrowser fatalsToBrowser);\n\n\nsub new {\n    my ($class, $PARAMFILE) = @_;\n\n    my $fname = 'process-cgi.txt';\n\n    open my $OUTFILE, '&gt;', $fname\n        or die \"Couldn't read from $fname: $!\";\n\n    my $obj_attributes = {\n        'cgi_obj' =&gt; CGI-&gt;new($PARAMFILE),\n        'outfile' =&gt; $OUTFILE,\n        'header_count' =&gt; 0,\n    };\n\n    return bless $obj_attributes, $class;\n\n}\n\nsub header {\n    my ($self, @headers) = @_;\n\n    my $cgi = $self-&gt;{'cgi_obj'};\n    my $header_str = $cgi-&gt;header(@headers);\n    print {$self-&gt;{outfile}} $header_str;\n\n    $self-&gt;{'header_count'}++;\n\n    return;\n}\n\nsub close {\n    my ($self) = @_;\n\n    my $count = $self-&gt;{'header_count'};\n    my $OUTFILE = $self-&gt;{'outfile'};\n\n    say {$OUTFILE} \"number of headers: $count\";\n    close $OUTFILE;\n\n    return;\n}\n\n1;\n</code></pre>\n\n<p>Test it out:</p>\n\n<pre><code>use strict;\nuse warnings;\nuse 5.016;\nuse Data::Dumper;\n\nuse DebugCGI;\n\n\nmy $fname = 'params.txt';\n\nopen my $PARAMFILE, '&lt;', $fname\n    or die \"Couldn't open $fname: $!\";\n\nmy $debug_cgi = DebugCGI-&gt;new($PARAMFILE);\n\nclose $PARAMFILE;\n\n$debug_cgi-&gt;header(\n    '-type' =&gt; 'text/html; charset=UTF-8',\n);\n\n$debug_cgi-&gt;header(\n    '-type' =&gt; 'text/plain: charset=UTF-8',\n);\n\n$debug_cgi-&gt;close;\n</code></pre>\n\n<p>params.txt:</p>\n\n<pre><code>x=3\ny=4\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>$ cat process-cgi.txt\nContent-Type: text/html; charset=UTF-8\n\nContent-Type: text/plain: charset=UTF-8\n\nnumber of headers: 2\n</code></pre>\n\n<p>Note the double newline that <code>$cgi-&gt;header()</code> adds after its output.  A double newline is a signal to the browser, that the headers have ended, and that any subsequent text is to be considered the body of the response.  Therefore, you can't <code>print $cgi-&gt;header()</code> twice because the second time the text won't be considered a header.  If for some reason you want to <code>print $cgi-&gt;header()</code> twice, then you can strip off the trailing newlines with <code>s/\\s+\\z//xms</code>.</p>\n"}], "owner": {"reputation": 1102, "user_id": 999595, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/5bd09d642ab7c8f500491bd6850621e3?s=128&d=identicon&r=PG", "display_name": "jason dancks", "link": "https://stackoverflow.com/users/999595/jason-dancks"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 127, "favorite_count": 0, "accepted_answer_id": 27933095, "answer_count": 1, "score": 0, "last_activity_date": 1421489951, "creation_date": 1421185136, "last_edit_date": 1421186927, "question_id": 27931989, "link": "https://stackoverflow.com/questions/27931989/perl-cant-print-to-filehandle-in-object", "title": "perl: Can&#39;t print to filehandle in object?", "body": "<p>I'm trying to debug a cgi script that reports no errors but the browser displays the generated text as opposed to rendering the page. I called cgi from a container object (of sorts) to see if I'm sending the header twice.</p>\n\n<pre><code>package debugcgi;\n\nuse CGI qw(:standard);\nuse CGI qw(:standard Vars);\nuse CGI::Carp qw(warningsToBrowser fatalsToBrowser);\n\nsub new {\n    my ($class,$glob) = @_;\n    open(lls,\"&gt;process-cgi.txt\");\n    return bless{'cgi'=&gt;CGI-&gt;new($glob),'glob'=&gt;\\*lls,'headers'=&gt;0},$class;\n}\n\nsub header {\n    my $self = shift;\n    my $tmp = shift-&gt;{'cgi'}-&gt;header(@_);\n    print $tmp;\n    my $t = $self-&gt;{'glob'};\n    print $t $tmp;\n    $self-&gt;{'headers'}++;\n}\n...\n\nsub myclose {\n    my $self = shift;\n    my $t = $self-&gt;{'glob'};\n    my $tmp = $self-&gt;{'headers'};\n    print $t \"\\nnumber of headers: \";\n    print $t $tmp;\n    close $t;\n}\n\n1;\n</code></pre>\n\n<p>used as a simple replacement for the real cgi in the bad script:</p>\n\n<pre><code>use debugcgi;\n...\n#my $cgi = CGI-&gt;new(\\*STDIN);\nmy $cgi = debugcgi-&gt;new(\\*STDIN);\n... \nprint $cgi-&gt;header(Referer =&gt; $cgi-&gt;url());\n</code></pre>\n\n<p>oh.</p>\n\n<p>but nothing gets printed to the file except \"number of headers: 0\" and I still get a full HTML document to show up. What did I do wrong, how can I improve on this?</p>\n"}, {"tags": ["mysql", "perl"], "comments": [{"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 4, "creation_date": 1421185089, "post_id": 27931868, "comment_id": 44261479, "body": "Yuck. <a href=\"https://metacpan.org/pod/release/CAPTTOFU/DBD-mysql-3.0008/lib/Mysql.pm#OBSOLETE-SOFTWARE\" rel=\"nofollow noreferrer\"><code>Mysql.pm</code> has been obsolete since 1998.</a> You should read the <a href=\"https://metacpan.org/pod/DBI\" rel=\"nofollow noreferrer\"><code>DBI</code> documentation</a> thoroughly, since its interface is different from <code>Mysql.pm</code> and your code will need to be updated accordingly (i.e. you can&#39;t just replace <code>use Mysql;</code> with <code>use DBI;</code> and expect it to work). I would start by reading the <a href=\"https://metacpan.org/pod/DBI#Outline-Usage\" rel=\"nofollow noreferrer\">outline usage</a> section."}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 1, "creation_date": 1421185790, "post_id": 27931868, "comment_id": 44261820, "body": "Having said that, if this is one of those horrible million-line monstrosities also known as &quot;legacy code&quot; <i>(shudder)</i>, and updating it is not an option, simply change your <code>use</code> statement to <code>use Mysql;</code> with a capital <code>M</code>. Perl is case sensitive."}, {"owner": {"reputation": 1, "user_id": 3617208, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/17ab2cda899aecaa32f4a58c3614ced1?s=128&d=identicon&r=PG&f=1", "display_name": "user3617208", "link": "https://stackoverflow.com/users/3617208/user3617208"}, "reply_to_user": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1421186089, "post_id": 27931868, "comment_id": 44261993, "body": "Yes the &quot;use mysql&quot; was originally &quot;use Mysql&quot; but it gave me the error: Can&#39;t locate Mysql.pm in @INC (@INC contains: /usr/lib/perl5/DBD /usr/lib/perl5/DBD/mysql /usr/lib/perl5/DBI /etc/perl /usr/local/lib/perl/5.14.2 /usr/local/share/perl/5.14.2 /usr/lib/perl5 /usr/share/perl5 /usr/lib/perl/5.14 /usr/share/perl/5.14 /usr/local/lib/site_perl .) at ./NERVE line 339. BEGIN failed--compilation aborted at ./NERVE line 339."}, {"owner": {"reputation": 1, "user_id": 3617208, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/17ab2cda899aecaa32f4a58c3614ced1?s=128&d=identicon&r=PG&f=1", "display_name": "user3617208", "link": "https://stackoverflow.com/users/3617208/user3617208"}, "reply_to_user": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1421186228, "post_id": 27931868, "comment_id": 44262063, "body": "Is there a package I can download for Mysql to work instead of mysql? I&#39;m running Debian 7 right now. Sorry for all the questions, I&#39;m new to all this programming and Linux stuff."}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1421186649, "post_id": 27931868, "comment_id": 44262286, "body": "<code>Can&#39;t locate Foo.pm in @INC</code> usually means that the module isn&#39;t installed. See <a href=\"http://stackoverflow.com/questions/65865/whats-the-easiest-way-to-install-a-missing-perl-module\">What&#39;s the easiest way to install a missing Perl module?</a> for instructions on installing. However, since <code>Mysql.pm</code> is obsolete, I would highly recommend switching to <code>DBI</code>, but you&#39;ll need to read the documentation I linked above and change your code accordingly."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1421186810, "post_id": 27931868, "comment_id": 44262380, "body": "@user3617208, Your <code>@INC</code> is messed up. <code>&#47;usr&#47;lib&#47;perl5&#47;DBD</code>, <code>&#47;usr&#47;lib&#47;perl5&#47;DBD&#47;mysql</code> and <code>&#47;usr&#47;lib&#47;perl5&#47;DBI</code> shouldn&#39;t be in there. DBI and DBD::mysql will be found if <code>&#47;usr&#47;lib&#47;perl5</code> is present."}, {"owner": {"reputation": 1, "user_id": 3617208, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/17ab2cda899aecaa32f4a58c3614ced1?s=128&d=identicon&r=PG&f=1", "display_name": "user3617208", "link": "https://stackoverflow.com/users/3617208/user3617208"}, "edited": false, "score": 0, "creation_date": 1421187181, "post_id": 27931868, "comment_id": 44262580, "body": "Does Foo.pm equate Mysql.pm? Just curious because I&#39;ve got DBD and DBI installed so I see a mysql.pm file. Which was why I thought I had everything installed. To install Mysql.pm do I just download the Belgian::Chocolate package?"}, {"owner": {"reputation": 12075, "user_id": 1137055, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/59d7b43b9eb7d01bd8f7e51febe6053c?s=128&d=identicon&r=PG", "display_name": "dgw", "link": "https://stackoverflow.com/users/1137055/dgw"}, "edited": false, "score": 1, "creation_date": 1421187197, "post_id": 27931868, "comment_id": 44262590, "body": "The nerve software was originally published in 2006. If you really want to use it now, ask the original authors about a modern version. Just my 2 cents."}, {"owner": {"reputation": 1, "user_id": 3617208, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/17ab2cda899aecaa32f4a58c3614ced1?s=128&d=identicon&r=PG&f=1", "display_name": "user3617208", "link": "https://stackoverflow.com/users/3617208/user3617208"}, "edited": false, "score": 0, "creation_date": 1421187243, "post_id": 27931868, "comment_id": 44262613, "body": "And the @INC has /usr/lib/per5/DBD and all the other ones were oon it because I had to grab mysql.pm before and that was located in those folders."}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1421187468, "post_id": 27931868, "comment_id": 44262691, "body": "@user3617208 <code>mysql.pm</code> is <a href=\"https://metacpan.org/pod/DBD::mysql\" rel=\"nofollow noreferrer\"><code>DBD::mysql</code></a>, which is completely different from <code>Mysql.pm</code>. If you already have <code>DBI</code> and <code>DBD::mysql</code> installed, your <code>use</code> statement should be <code>use DBI;</code> (not <code>use mysql;</code> and not <code>use DBD::mysql;</code>). Read the <code>DBI</code> documentation for more details on how to use it properly."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1421187661, "post_id": 27931868, "comment_id": 44262784, "body": "@user3617208, Yes, I know why you did it, and it was wrong."}], "answers": [{"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1421188503, "post_id": 27932542, "comment_id": 44263165, "body": "Forgot you weren&#39;t debugging your own code. Updated the answer."}, {"owner": {"reputation": 59411, "user_id": 8355, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/8d0099a2574719d7a67eab012851bf9b?s=128&d=identicon&r=PG", "display_name": "cjm", "link": "https://stackoverflow.com/users/8355/cjm"}, "edited": false, "score": 1, "creation_date": 1421202713, "post_id": 27932542, "comment_id": 44267297, "body": "Actually, since the <code>Mysql.pm</code> in 3.0008 is just a compatibility layer using DBI under the hood, you should be able to install Mysql.pm &amp; Mysql/Statement.pm from that old dist along with a current DBD-mysql."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 59411, "user_id": 8355, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/8d0099a2574719d7a67eab012851bf9b?s=128&d=identicon&r=PG", "display_name": "cjm", "link": "https://stackoverflow.com/users/8355/cjm"}, "edited": false, "score": 0, "creation_date": 1421205930, "post_id": 27932542, "comment_id": 44267947, "body": "Incorporated @cjm&#39;s comment with a few extra details into my answer."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 2, "last_activity_date": 1421205907, "last_edit_date": 1421205907, "creation_date": 1421187552, "answer_id": 27932542, "question_id": 27931868, "link": "https://stackoverflow.com/questions/27931868/perl-issues-regarding-mysqlcant-locate-object-method-connect-and-cant-use-s/27932542#27932542", "title": "Perl issues regarding mysql:Can&#39;t locate object method &quot;connect&quot; and Can&#39;t use string (&quot;&quot;) as a HASH", "body": "<p>The error message is correct. You are attempting to use a module named , but you never loaded it. Change</p>\n\n<pre><code>use mysql;\n</code></pre>\n\n<p>to</p>\n\n<pre><code>use Mysql;\n</code></pre>\n\n<p>to use that module. In the comments, you mention that results in </p>\n\n<pre><code>Can't locate Mysql.pm in @INC \n</code></pre>\n\n<p>Unless you have reason to believe the module is installed, that indicates it needs to be installed<sup>[1]</sup></p>\n\n<p>That module used to be part of the DBD-mysql distribution, but it's obsolete. It's so ancient it was removed from DBD some years ago. To obtain it, you will need to <em>downgrade</em> your DBD-mysql distribution to version <a href=\"http://search.cpan.org/~capttofu/DBD-mysql-3.0008/\" rel=\"nofollow\">3.0008</a>.</p>\n\n<p>That's pretty awful thing to do. The script should have DBI instead.</p>\n\n<hr>\n\n<p>cjm points</p>\n\n<blockquote>\n  <p>since the Mysql.pm in 3.0008 is just a compatibility layer using DBI under the hood, you should be able to install Mysql.pm &amp; Mysql/Statement.pm from that old dist along with a current DBD-mysql.</p>\n</blockquote>\n\n<p>So if you extract <code>Mysql.pm</code> from the distro I linked above as <code>/usr/lib/perl5/Mysql.pm</code> and <code>Mysql/Statement.pm</code> as <code>/usr/lib/perl5/Mysql/Statement.pm</code>, you should have an easy pain-free solution.</p>\n\n<hr>\n\n<ol>\n<li><p>In newer versions of Perl, the error message has been improved. It now reads as follows:</p>\n\n<pre><code>Can't locate Mysql.pm in @INC (you may need to install the Mysql module)\n</code></pre></li>\n</ol>\n"}], "owner": {"reputation": 1, "user_id": 3617208, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/17ab2cda899aecaa32f4a58c3614ced1?s=128&d=identicon&r=PG&f=1", "display_name": "user3617208", "link": "https://stackoverflow.com/users/3617208/user3617208"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1265, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1421205907, "creation_date": 1421184608, "question_id": 27931868, "link": "https://stackoverflow.com/questions/27931868/perl-issues-regarding-mysqlcant-locate-object-method-connect-and-cant-use-s", "title": "Perl issues regarding mysql:Can&#39;t locate object method &quot;connect&quot; and Can&#39;t use string (&quot;&quot;) as a HASH", "body": "<p>I'm currently trying to run NERVE a vaccine development program that is made up of Perl scripts and have trouble getting it to run properly. I've downloaded and installed all prerequisites but every time I reach the mysql step of the code, it crashes, and an error message says: Can't locate object method \"connect\" via package \"Mysql\" (perhaps you forgot to load \"Mysql\"?) at ./NERVE line 340,  line 5. I took a look at the code and changed \"use mysql\" to \"use DBI\" and \"use DBD:mysql\" but then I get the error: Can't use string (\"\") as a HASH ref while \"strict refs\" in use at /usr/local/lib/perl/5.14.2/DBI.pm line 604,  line 5.</p>\n\n<p>I would appreciate if anyone could look the code over for the mysql section and give me advice on how to fix it so I can run the program properly. I tried emailing the developers but no response so I'm hoping you guys can help me.</p>\n\n<p>Below is the perl code for NERVE for the mysql section.</p>\n\n<pre><code>    use mysql;\n$db=Mysql-&gt;connect(\"$host\",\"$database\",\"$user\",\"$password\");\nif(!$db || (!$host || !$database || !$user || !$password)){\n    print \"\\nAttention: mysql connection parameters are missing or not correct!\\n\";\n    print \"I need you to specify: host, database, user, password;\\n\";\n    print \"You can do it now typing them right in that order and separeted only by comma;\\n\";\n    print \"For example:localhost,Pathogens,sandro,xvzhs\\n\";\n    print \"So, your Mysql connection settings are (type q to quit):\";\n    while (!($db &amp;&amp; $mysql =~ /,/) &amp; $mysql ne \"q\"){\n        chomp($mysql = &lt;STDIN&gt;);\n        die \"Ok,let's quit this work! Call me when your mind is clearer about Mysql parameters! Bye :-)\\n\" if $mysql eq \"q\";\n        ($host,$database,$user,$password) = split (',',$mysql);\n        $db=Mysql-&gt;connect(\"$host\",\"$database\",\"$user\",\"$password\");\n        last if($db &amp;&amp; $mysql =~ /,/);\n        print \"\\nMysql connection settings still not correct!\\n\";\n        print \"Remember: host, database, user, password, separeted only by comma.\\n\";\n        print \"For example:localhost,Pathogens,sandro,xvzhs\\n\";\n        print \"Please, try again:\";\n    }\n    print \"Ok, Mysql connection to \\\"$database\\\" database was successful!\\n\";\n}\n</code></pre>\n"}, {"tags": ["perl"], "answers": [{"tags": [], "owner": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "is_accepted": false, "score": 1, "last_activity_date": 1421180805, "creation_date": 1421180805, "answer_id": 27930882, "question_id": 27930707, "link": "https://stackoverflow.com/questions/27930707/perl-send-internal-array-as-argument-to-subroutine/27930882#27930882", "title": "perl send internal array as argument to subroutine", "body": "<p>You can send array reference,</p>\n\n<pre><code>sub mysub {\n  my ($aref) = @_;\n\n  # work with @$aref ..\n}\n\nmysub($map[1]);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2595, "user_id": 3897316, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/6cf468fea626f3aec65a199e2f67b309?s=128&d=identicon&r=PG&f=1", "display_name": "Degustaf", "link": "https://stackoverflow.com/users/3897316/degustaf"}, "is_accepted": false, "score": 1, "last_activity_date": 1421181231, "last_edit_date": 1421181231, "creation_date": 1421180911, "answer_id": 27930903, "question_id": 27930707, "link": "https://stackoverflow.com/questions/27930707/perl-send-internal-array-as-argument-to-subroutine/27930903#27930903", "title": "perl send internal array as argument to subroutine", "body": "<p>Simply pass the scalar <code>$map[1]</code>.</p>\n\n<pre><code>fn($map[1]);\n\nsub fn\n{\n    my @loc_map_1 = @{ $_[0] };\n</code></pre>\n\n<p>Remember that perl doesn't have \"real\" 2 dimensional arrays.  In your case <code>map</code> is an array that contains 2 references to arrays.  </p>\n"}, {"tags": [], "owner": {"reputation": 98433, "user_id": 368630, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/107085826cfbb2700f535417a12c89cb?s=128&d=identicon&r=PG", "display_name": "David W.", "link": "https://stackoverflow.com/users/368630/david-w"}, "is_accepted": true, "score": 4, "last_activity_date": 1421181293, "creation_date": 1421181293, "answer_id": 27931022, "question_id": 27930707, "link": "https://stackoverflow.com/questions/27930707/perl-send-internal-array-as-argument-to-subroutine/27931022#27931022", "title": "perl send internal array as argument to subroutine", "body": "<p>Perl doesn't have multiple dimension arrays.</p>\n\n<p>What you have is an array and each element of that array is a <em>reference</em> to another array. You might want to read up about <a href=\"http://perldoc.perl.org/perlreftut.html\" rel=\"nofollow\">Perl References</a> since this is the way Perl allows you to build some very complex data structures.</p>\n\n<p>Many people think of it as a multidimensional array, and you could treat it as such <strong><em>under certain circumstances</em></strong>. However, I prefer the <code>-&gt;</code> syntax which reminds me that this is merely a reference to a reference.</p>\n\n<pre><code>$map[0]-&gt;[0] = 'a';\n$map[0]-&gt;[1] = 'b';\n$map[1]-&gt;[0] = 'c';\n$map[1]-&gt;[1] = 'd';\n</code></pre>\n\n<p>Now, I can take the data structure apart:</p>\n\n<ul>\n<li><code>@map</code>: This is an array with two items in it, <code>$map[0]</code> and <code>$map[1]</code>.</li>\n<li><code>$map[0]-&gt;[]</code>: This is a <em>reference</em> to another array. That array also has to items in it.</li>\n<li><code>$map[1]-&gt;[]</code>: This is another <em>reference</em> to yet another array. That array has two items in it.</li>\n</ul>\n\n<p>Note that <code>$map[1]-&gt;[]</code> means that <code>$map[1]</code> contains an array reference. Thqt means you can pass <code>$map[1]</code> as your reference to that inner array.</p>\n\n<pre><code>mysub ($map[1]);\n</code></pre>\n\n<p>Here's a simple program:</p>\n\n<pre><code>#! /usr/bin/env perl\n#\nuse strict;\nuse warnings;\nuse feature qw(say);\n\nmy @map;\n$map[0]-&gt;[0] = 'a';\n$map[0]-&gt;[1] = 'b';\n$map[1]-&gt;[0] = 'c';\n$map[1]-&gt;[1] = 'd';\n\nmysub( $map[1] );\n\nsub mysub {\n    my $array_ref = shift;\n\n    my @array = @{ $array_ref };  # Dereference your reference\n\n    for my $index ( 0..$#array ) {\n        say \"\\$map[1]-&gt;[$index] = $array[$index]\";\n    }\n}\n</code></pre>\n\n<p>This prints:</p>\n\n<pre><code>$map[1]-&gt;[0] = c\n$map[1]-&gt;[1] = d\n</code></pre>\n\n<p>Now, you see why I like that <code>-&gt;</code> syntax although it's really completely unnecessary. It helps remind me what I am dealing with.</p>\n"}], "owner": {"reputation": 2920, "user_id": 3360140, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/OThx0.jpg?s=128&g=1", "display_name": "Kamrul Khan", "link": "https://stackoverflow.com/users/3360140/kamrul-khan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 73, "favorite_count": 0, "accepted_answer_id": 27931022, "answer_count": 3, "score": 0, "last_activity_date": 1421181293, "creation_date": 1421180088, "question_id": 27930707, "link": "https://stackoverflow.com/questions/27930707/perl-send-internal-array-as-argument-to-subroutine", "title": "perl send internal array as argument to subroutine", "body": "<p>I have a 2 dimensional array like this:</p>\n\n<pre><code>$map[0][0] = 'a';\n$map[0][1] = 'b';\n$map[1][0] = 'c';\n$map[1][1] = 'd';\n</code></pre>\n\n<p>I want to pass only everything under $map[1] (by reference) to a subroutine. How to do that ?</p>\n"}, {"tags": ["string", "perl", "parsing", "http"], "comments": [{"owner": {"reputation": 35370, "user_id": 180275, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/4GALY.jpg?s=128&g=1", "display_name": "Ren&#233; Nyffenegger", "link": "https://stackoverflow.com/users/180275/ren%c3%a9-nyffenegger"}, "edited": false, "score": 0, "creation_date": 1421175096, "post_id": 27929087, "comment_id": 44255765, "body": "Which variables are you printing and what are you seeing? Use <code>Data::Dumper</code> to display the content of your variables."}, {"owner": {"reputation": 61610, "user_id": 725418, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/82ac2dc3e1ad4b7187f245c416528df9?s=128&d=identicon&r=PG", "display_name": "TLP", "link": "https://stackoverflow.com/users/725418/tlp"}, "edited": false, "score": 0, "creation_date": 1421179189, "post_id": 27929087, "comment_id": 44258147, "body": "How are you getting the html? Which module does <code>get</code> come from."}], "answers": [{"comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1421184300, "post_id": 27929392, "comment_id": 44261057, "body": "I don&#39;t see any point in involving <code>HTML::TreeBuilder</code> at all -- certainly not just for the purpose of formatting the HTML. It would also be wise to use <code>decoded_content</code> instead of <code>content</code>, as you don&#39;t know whether the HTTP content is compressed."}], "tags": [], "owner": {"reputation": 142005, "user_id": 465183, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/3b518a0ea4c992cfe9965671d0139ba4?s=128&d=identicon&r=PG", "display_name": "Gilles Quenot", "link": "https://stackoverflow.com/users/465183/gilles-quenot"}, "is_accepted": true, "score": 6, "last_activity_date": 1421184926, "last_edit_date": 1495535123, "creation_date": 1421175162, "answer_id": 27929392, "question_id": 27929087, "link": "https://stackoverflow.com/questions/27929087/string-parsing-in-perl/27929392#27929392", "title": "string parsing in perl", "body": "<p>A complete solution, avoiding parsing HTML with REGEX (ref: <a href=\"https://stackoverflow.com/questions/1732348/regex-match-open-tags-except-xhtml-self-contained-tags\">RegEx match open tags except XHTML self-contained tags</a>\n) :</p>\n\n<pre><code>use strict; use warnings;\n\n# base perl module to fetch HTML\nuse LWP::UserAgent;\n# base perl module to parse HTML\nuse HTML::TreeBuilder;\n\n# fetching part\nmy $ua = LWP::UserAgent-&gt;new;\nmy $req = HTTP::Request-&gt;new(GET =&gt; \"http://192.168.25.9\");\nmy $res = $ua-&gt;request($req);\ndie $res-&gt;status_line, \"\\n\" unless $res-&gt;is_success;\n\n# parsing part\nmy $tree = HTML::TreeBuilder-&gt;new();\n# get text from HTML\nmy $out = $tree-&gt;parse($res-&gt;decoded_content)-&gt;format;\n# extract the expected string from the text output\nif ($out =~ /^\\s*T:(\\d{2}\\.\\d{2});H:(\\d{2}\\.\\d{2}).*/) {\n    print join \"\\n\", $1, $2;\n}\n</code></pre>\n\n<h3>OUTPUT:</h3>\n\n<pre><code>17.10\n32.10\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1421184974, "post_id": 27930468, "comment_id": 44261424, "body": "This solution seems fine to me, and I don&#39;t understand the downvote. The other solutions go into a lot of unnecessary work to format or strip the HTML, which is entirely unnecessary unless you wanted to ensure that the required text is the sole content of the <code>&lt;body&gt;</code> element, which none of them do. Your regex is a little naive though, as I think there is a good chance that the numeric values may look like <code>123.4</code> or <code>2.8896</code>, or even <code>42</code>, and your pattern will match none of these."}, {"owner": {"reputation": 4173, "user_id": 4450651, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/l6IMB.jpg?s=128&g=1", "display_name": "red0ct", "link": "https://stackoverflow.com/users/4450651/red0ct"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1421186866, "post_id": 27930468, "comment_id": 44262413, "body": "Thanks for the support, Borodin. Agree with your comments. Fixed regexp. Perhaps now it&#39;s more flexible."}], "tags": [], "owner": {"reputation": 4173, "user_id": 4450651, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/l6IMB.jpg?s=128&g=1", "display_name": "red0ct", "link": "https://stackoverflow.com/users/4450651/red0ct"}, "is_accepted": false, "score": 2, "last_activity_date": 1421186846, "last_edit_date": 1421186846, "creation_date": 1421179061, "answer_id": 27930468, "question_id": 27929087, "link": "https://stackoverflow.com/questions/27929087/string-parsing-in-perl/27930468#27930468", "title": "string parsing in perl", "body": "<p>Specifically for such requests you can do so:</p>\n\n<pre><code>my ($t, $h) = map { (/T:(\\d+|\\d+.\\d+);H:(\\d+|\\d+.\\d+)/)?($1, $2):() } @req;\nprint \"$t, $h\\n\", $t * $h;\n</code></pre>\n\n<p><strong>Output:</strong></p>\n\n<pre><code>17.10, 32.10\n548.91\n</code></pre>\n\n<p>where <code>@req</code> is an array with chomped strings of the received request</p>\n"}, {"comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1421184619, "post_id": 27931220, "comment_id": 44261225, "body": "I don&#39;t see any need to remove the HTML markup. The data is either there or it is not, although I guess there is an infinitesimal chance that a false match could be found in the value of one of the attributes."}, {"owner": {"reputation": 4116, "user_id": 4402825, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-3ESJ4SrCVfE/AAAAAAAAAAI/AAAAAAAAFO8/yBWcRYAN94s/photo.jpg?sz=128", "display_name": "Ben Grimm", "link": "https://stackoverflow.com/users/4402825/ben-grimm"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1421192030, "post_id": 27931220, "comment_id": 44264561, "body": "That&#39;s true, he&#39;s not really parsing html here. The answer just comes down to the one line: <code>my ($tem, $hum) = $content =~ &#47;T:(\\d{2}.\\d{2});H:(\\d{2}.\\d{2})&#47;;</code>"}], "tags": [], "owner": {"reputation": 4116, "user_id": 4402825, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-3ESJ4SrCVfE/AAAAAAAAAAI/AAAAAAAAFO8/yBWcRYAN94s/photo.jpg?sz=128", "display_name": "Ben Grimm", "link": "https://stackoverflow.com/users/4402825/ben-grimm"}, "is_accepted": false, "score": 1, "last_activity_date": 1421272121, "last_edit_date": 1421272121, "creation_date": 1421182115, "answer_id": 27931220, "question_id": 27929087, "link": "https://stackoverflow.com/questions/27929087/string-parsing-in-perl/27931220#27931220", "title": "string parsing in perl", "body": "<p>For your purpose, this is all you need: </p>\n\n<pre><code>my ($tem, $hum) = $content =~ /T:(\\d{2}\\.\\d{2});H:(\\d{2}\\.\\d{2})/;\n</code></pre>\n\n<p>If you need more general parse (e.g. to support a temperature or humidity >= 100, single digit values, etc...):</p>\n\n<pre><code>my ($tem, $hum) = $content =~ /T:(\\d+(?:\\.\\d+)?);H:(\\d+(?:\\.\\d+)?)/;\n</code></pre>\n"}], "owner": {"reputation": 47, "user_id": 3186030, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d13f862285fd8520a9b6b144b510c75f?s=128&d=identicon&r=PG&f=1", "display_name": "Fabio", "link": "https://stackoverflow.com/users/3186030/fabio"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 879, "favorite_count": 0, "accepted_answer_id": 27929392, "answer_count": 3, "score": 0, "last_activity_date": 1421272121, "creation_date": 1421174047, "question_id": 27929087, "link": "https://stackoverflow.com/questions/27929087/string-parsing-in-perl", "title": "string parsing in perl", "body": "<p>I need some help on string parsing in perl.\nI've an http server that respond with something like this:</p>\n\n<pre><code>&lt;html&gt;\n&lt;head&gt;&lt;title&gt;&lt;/title&gt;&lt;/head&gt;&lt;body&gt;\nT:17.10;H:32.10\n&lt;/body&gt;&lt;/html&gt;\n</code></pre>\n\n<p>I need to catch the two numbers (in the example 17.10 and 32.10) and put them in two variables that I will use for do some if...then...else cycle.</p>\n\n<p>I'm not so expert in string manipulation and regex, at the moment I'm tring to do this:</p>\n\n<pre><code>my $url = 'http://192.168.25.9';\nmy $content = get $url;\ndie \"Couldn't get $url\" unless defined $content;\nmy @lines = split /\\n/, $content;\n$content2 = $lines[2];\n$content2 =~ tr/T://d;\n$content2 =~ tr/H://d;\nmy @lines2 = split /;/, $content2;\n$tem = $lines2[0];\n$hum = $lines2[1];\n\n$tem =~ m{(\\d+\\.\\d+)};\n$hum =~ m{(\\d+\\.\\d+)};\n</code></pre>\n\n<p>but when I print out the line I see something strange: characters missing, space in the line, etc.\nIt seems that I've some strange invisible characters that create confusion.</p>\n\n<p>Could you suggest me a better way for have the two number in two numeric variables?</p>\n\n<p>Thanks\nFabio</p>\n"}, {"tags": ["perl", "utf-8", "perl-pod"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1421172535, "post_id": 27927612, "comment_id": 44254298, "body": "&quot;Native&quot; refers to ASCII vs EBCDIC. <code>unicode_to_native</code> is not suppose to encode, so it&#39;s returning what it should. The problem is elsewhere"}, {"owner": {"reputation": 2354, "user_id": 2203144, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/75c7fa1dd3aa4baa131c45c7e6cbd82d?s=128&d=identicon&r=PG", "display_name": "mareoraft", "link": "https://stackoverflow.com/users/2203144/mareoraft"}, "edited": false, "score": 0, "creation_date": 1421210640, "post_id": 27927612, "comment_id": 44269009, "body": "If you are sure this is incorrect behavior, then I highly recommend you report it to the Perl community.  You would be doing EVERYONE a great favor by getting this fixed in the next version of Perl :)"}, {"owner": {"reputation": 98433, "user_id": 368630, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/107085826cfbb2700f535417a12c89cb?s=128&d=identicon&r=PG", "display_name": "David W.", "link": "https://stackoverflow.com/users/368630/david-w"}, "edited": false, "score": 0, "creation_date": 1421236185, "post_id": 27927612, "comment_id": 44280105, "body": "I was hoping it was something I was <i>doing wrong</i>. For example, I have my environment set incorrectly, or the issue is with my <code>groff</code> or <code>troff</code> on my Mac and this isn&#39;t a Perl issue, but a Mac issue. Playing around with this more, I realize this happens with all the characters encoded from <code>0x80</code> to <code>0xFF</code>, but works fine for anything encoded above <code>0xFF</code>."}], "owner": {"reputation": 98433, "user_id": 368630, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/107085826cfbb2700f535417a12c89cb?s=128&d=identicon&r=PG", "display_name": "David W.", "link": "https://stackoverflow.com/users/368630/david-w"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 235, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1421170754, "creation_date": 1421168851, "last_edit_date": 1421170754, "question_id": 27927612, "link": "https://stackoverflow.com/questions/27927612/perldoc-using-wrong-encoding-for-copyright-symbol", "title": "Perldoc using wrong encoding for copyright symbol", "body": "<p>I've noticed that <a href=\"http://perldoc.perl.org/Pod/Usage.html\" rel=\"nofollow\">Pod::Usage</a> <code>pod2man</code>, and even <code>pod2markdown</code> are doing the wrong encoding in their output for certain characters. These programs are encoding the copyright symbol as a single byte <code>0xA9</code> which is its Unicode Code Point as well as its iso-8859-1 and cp1252 encodings, not its utf-8 encoding  which should be the multibyte <code>0xCA:0xA9</code>.</p>\n\n<p>The issue has to do with <code>Pod::Escapes</code> which I've updated to version 1.07 (the latest version) and <code>utf8::unicode_to_native</code> (which I can't find).</p>\n\n<p>Looking at <code>Pod::Escape</code>,  the <code>%Name2character_number</code> hash sets the key <code>copy</code> to the unicode character point <code>0xA9</code> (<code>169</code>) which is correct.</p>\n\n<p>However, the <code>%Name2character</code> hash is getting the wrong representation from the <code>utf8::unicode_to_native</code> subroutine. In fact, all of the Unicode character codes <code>0x80</code> to <code>0xFF</code> are being set as their single byte representation and not as the utf-8 encoding. All characters above <code>0xFF</code> are being set correctly.</p>\n\n<p>Is there a way to fix this issue? I am running Perl 5.18.2 on Mac OS X 10.10 (Yosemite) which is natively utf-8.</p>\n"}, {"tags": ["mysql", "perl", "escaping", "dbi", "dbd"], "comments": [{"owner": {"reputation": 99308, "user_id": 107744, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7d6a34fb9a78937e1500b7ae0b5aee37?s=128&d=identicon&r=PG&f=1", "display_name": "spencer7593", "link": "https://stackoverflow.com/users/107744/spencer7593"}, "edited": false, "score": 1, "creation_date": 1421167886, "post_id": 27926565, "comment_id": 44251644, "body": "This is not an &quot;escaping&quot; issue; it&#39;s an issue with characterset translation. By default, Perl uses ASCII for STDIN, STDOUT and STDERR; and yes, you can override that behavior. Also, your database connection may be specifying a characterset that doesn&#39;t support the code points. And yes, that can be overridden as well. A couple of articles you should have under your belt: <a href=\"http://www.joelonsoftware.com/articles/Unicode.html\" rel=\"nofollow noreferrer\"><b>The Absolute Minimum Every Software Developer Absolutely, Positively Must Know About Unicode and Character Sets (No Excuses!)</b></a>"}, {"owner": {"reputation": 99308, "user_id": 107744, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7d6a34fb9a78937e1500b7ae0b5aee37?s=128&d=identicon&r=PG&f=1", "display_name": "spencer7593", "link": "https://stackoverflow.com/users/107744/spencer7593"}, "edited": false, "score": 1, "creation_date": 1421167908, "post_id": 27926565, "comment_id": 44251665, "body": "And the other article: <a href=\"http://kunststube.net/encoding/\" rel=\"nofollow noreferrer\"><b>What Every Programmer Absolutely, Positively Needs To Know About Encodings And Character Sets To Work With Text</b></a>"}], "answers": [{"comments": [{"owner": {"reputation": 193, "user_id": 4429747, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a182fa342cf95f33870032e2c49f3db3?s=128&d=identicon&r=PG&f=1", "display_name": "Channel Islander", "link": "https://stackoverflow.com/users/4429747/channel-islander"}, "edited": false, "score": 0, "creation_date": 1421254524, "post_id": 27926800, "comment_id": 44291491, "body": "Thanks, I added that DBI param but it made no difference."}], "tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 3, "last_activity_date": 1421166391, "creation_date": 1421166391, "answer_id": 27926800, "question_id": 27926565, "link": "https://stackoverflow.com/questions/27926565/why-is-perl-dbi-escaping-values-retrieved-from-mysql/27926800#27926800", "title": "Why is Perl DBI escaping values retrieved from MySQL?", "body": "<p>You probably need to tell DBI to use UTF8 when talking to the database.</p>\n\n<pre><code>$dbh=DBI-&gt;connect(\n   'DBI:mysql:database=my_db', $user, $pass,\n   { mysql_enable_utf8 =&gt; 1 }\n);\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 193, "user_id": 4429747, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a182fa342cf95f33870032e2c49f3db3?s=128&d=identicon&r=PG&f=1", "display_name": "Channel Islander", "link": "https://stackoverflow.com/users/4429747/channel-islander"}, "edited": false, "score": 0, "creation_date": 1421254463, "post_id": 27926833, "comment_id": 44291454, "body": "Thanks, didn&#39;t know about encoding the output."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 6, "last_activity_date": 1421166485, "creation_date": 1421166485, "answer_id": 27926833, "question_id": 27926565, "link": "https://stackoverflow.com/questions/27926565/why-is-perl-dbi-escaping-values-retrieved-from-mysql/27926833#27926833", "title": "Why is Perl DBI escaping values retrieved from MySQL?", "body": "<ol>\n<li><p>Tell Perl how to encode the output.</p>\n\n<pre><code>use open ':std', ':encoding(UTF-8)';\n</code></pre></li>\n<li><p>Get the data from the database as text by using</p>\n\n<pre><code>DBI-&gt;connect(\"DBI:mysql:database=my_db\", $user, $pass, {\n   mysql_enable_utf8 =&gt; 1,\n})\n</code></pre></li>\n</ol>\n"}, {"tags": [], "owner": {"reputation": 99308, "user_id": 107744, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7d6a34fb9a78937e1500b7ae0b5aee37?s=128&d=identicon&r=PG&f=1", "display_name": "spencer7593", "link": "https://stackoverflow.com/users/107744/spencer7593"}, "is_accepted": false, "score": 2, "last_activity_date": 1421169394, "creation_date": 1421169394, "answer_id": 27927773, "question_id": 27926565, "link": "https://stackoverflow.com/questions/27926565/why-is-perl-dbi-escaping-values-retrieved-from-mysql/27927773#27927773", "title": "Why is Perl DBI escaping values retrieved from MySQL?", "body": "<p><strong>Q:</strong> Why is Perl doing this? Can I override it?</p>\n\n<p>It's not being escaped. That's a symptom of a characterset translation issue. The question mark character is a default character used when a code point doesn't map to any other character in the target characterset.</p>\n\n<hr>\n\n<p>The short answer, as to why Perl is doing this may be: by default, Perl outputs to STDOUT using ascii characterset. Since ASCII only supports code points up to U+00EF, all other code points (for example, characters 128 thru 255) get translated to a question mark character.</p>\n\n<p>The short answer as to how to override this behavior may be: specify that STDIN, STDOUT and STDERR use utf8 encoding rather than ascii by including a line like this in your perl program:</p>\n\n<pre><code>use open qw(:std :utf8);\n</code></pre>\n\n<hr>\n\n<p>Another potential issue is the setting of the MySQL session <code>character_set_client</code> variable; the database connection may be using a <code>latin1</code> characterset, but the database/server/column characterset may be <code>utf8</code>, so a characterset translation may also be occurring there.</p>\n\n<p>And it's possible to specify the characterset to be used in the database connection, to avoid an unwanted characterset translation.</p>\n\n<hr>\n\n<p>As a starting point of understanding charactersets, here's two references you should have under your belt:</p>\n\n<p><a href=\"http://www.joelonsoftware.com/articles/Unicode.html\" rel=\"nofollow\"><strong>The Absolute Minimum Every Software Developer Absolutely, Positively Must Know About Unicode and Character Sets (No Excuses!)</strong></a> </p>\n\n<p><a href=\"http://kunststube.net/encoding/\" rel=\"nofollow\"><strong>What Every Programmer Absolutely, Positively Needs To Know About Encodings And Character Sets To Work With Text</strong></a></p>\n"}], "owner": {"reputation": 193, "user_id": 4429747, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a182fa342cf95f33870032e2c49f3db3?s=128&d=identicon&r=PG&f=1", "display_name": "Channel Islander", "link": "https://stackoverflow.com/users/4429747/channel-islander"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 171, "favorite_count": 0, "accepted_answer_id": 27926833, "answer_count": 3, "score": 4, "last_activity_date": 1421169394, "creation_date": 1421165716, "last_edit_date": 1421166400, "question_id": 27926565, "link": "https://stackoverflow.com/questions/27926565/why-is-perl-dbi-escaping-values-retrieved-from-mysql", "title": "Why is Perl DBI escaping values retrieved from MySQL?", "body": "<p>I have a value in MySQL that contains an apostrophe (<code>\u2019</code>) and an ellipsis (<code>...</code>):</p>\n\n<pre><code>$ /bin/echo \"select alias from url_alias where source = 'node/12024'\" | \\\n  mysql --skip-column-names -D cat36ia_d7prod\n</code></pre>\n\n<p><strong>Output:</strong></p>\n\n<pre><code>forum/technical-discussion/nagging-questions-i\u2019ve-been-too-embarrassed-ask\u2026\n</code></pre>\n\n<p>When I retrieve the value with Perl <code>DBI</code> and <code>DBD::mysql</code>, the value has been changed:</p>\n\n<pre><code>$ perl -MDBI -MDBD::mysql -e\n      '$dbh=DBI-&gt;connect( \"DBI:mysql:database=my_db\",nick );\n       $v=$dbh-&gt;selectrow_array(qq|select alias from url_alias where source = \"'node/12024'\"|);\n       print \"$v\\n\";'\n</code></pre>\n\n<p><strong>Output:</strong></p>\n\n<pre><code>forum/technical-discussion/nagging-questions-i?ve-been-too-embarrassed-ask?\n</code></pre>\n\n<p>Why is Perl doing this? Can I override it?</p>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 24713, "user_id": 3150943, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/06074c6f020f2509f0b51a2c0ad3a9a8?s=128&d=identicon&r=PG", "display_name": "nu11p01n73R", "link": "https://stackoverflow.com/users/3150943/nu11p01n73r"}, "edited": false, "score": 3, "creation_date": 1421163700, "post_id": 27925818, "comment_id": 44248696, "body": "The character class can contain only character <code>[crawl|bot|spider|yahoo|bing|google]</code> wont be interpretted as you think it would be. Rather as <code>c</code> or <code>r</code> or <code>a</code> etc Provide some sample inputs for better clarity."}, {"owner": {"reputation": 24713, "user_id": 3150943, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/06074c6f020f2509f0b51a2c0ad3a9a8?s=128&d=identicon&r=PG", "display_name": "nu11p01n73R", "link": "https://stackoverflow.com/users/3150943/nu11p01n73r"}, "edited": false, "score": 0, "creation_date": 1421163853, "post_id": 27925818, "comment_id": 44248818, "body": "<code>\\s(.*)\\s.*</code>Here the <code>\\s</code> are useless as the <code>.*</code> being greedy will consume all the <code>\\s</code> if any."}, {"owner": {"reputation": 24713, "user_id": 3150943, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/06074c6f020f2509f0b51a2c0ad3a9a8?s=128&d=identicon&r=PG", "display_name": "nu11p01n73R", "link": "https://stackoverflow.com/users/3150943/nu11p01n73r"}, "edited": false, "score": 0, "creation_date": 1421163929, "post_id": 27925818, "comment_id": 44248864, "body": "<code>\\d{1,3}.\\d{1,3}.\\d{1,3}.\\d{1,3}</code> can be simplified as <code>\\d{1,3}(.\\d{1,3}){3}</code>"}, {"owner": {"reputation": 19585, "user_id": 3115685, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/206073fe8f46ef1f9261d75c80c19c6f?s=128&d=identicon&r=PG&f=1", "display_name": "arco444", "link": "https://stackoverflow.com/users/3115685/arco444"}, "edited": false, "score": 5, "creation_date": 1421164260, "post_id": 27925818, "comment_id": 44249105, "body": "<code>it doesn&#39;t return the value I&#39;m expecting</code> - You should share that value with us. A sample of the log would be useful."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 4, "creation_date": 1421164940, "post_id": 27925818, "comment_id": 44249583, "body": "Your comments &quot;Remove any unseen whitespace&quot; and &quot;clear white space again&quot; are both incorrect. <code>chomp()</code> removes the current value of <code>$&#47;</code> (usually a newline) from the given string. It has no effect on any other whitespace characters."}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 2939531, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/045baeb8ac9c961a3b633eb0bb678e1d?s=128&d=identicon&r=PG&f=1", "display_name": "JPeck89", "link": "https://stackoverflow.com/users/2939531/jpeck89"}, "edited": false, "score": 0, "creation_date": 1421172974, "post_id": 27926965, "comment_id": 44254548, "body": "Thank you for your help so far, using the modified code you provided so far, I pulled the bollowing information: <code>188.165.15.208 - - [13&#47;Jan&#47;2015:09:20:49 -0500] &quot;GET &#47;?page_id=2 HTTP&#47;1.1&quot; 200 10574 &quot;-&quot; &quot;Mozilla&#47;5.0 (compatible; AhrefsBot&#47;5.0; +http:&#47;&#47;ahrefs.com&#47;robot&#47;)&quot; 188.165.15.208 bot</code> I&#39;m trying to pull this information: <code>188.165.15.208 - - [13&#47;Jan&#47;2015:09:20:49 -0500] &quot;GET &#47;?page_id=2 HTTP&#47;1.1&quot; 200 10574 &quot;-&quot; &quot;Mozilla&#47;5.0 (compatible; AhrefsBot&#47;5.0; +http:&#47;&#47;ahrefs.com&#47;robot&#47;)&quot; 188.165.15.208 AhrefsBot&#47;5.0;</code> so maybe the regex is not quite accurate here."}, {"owner": {"reputation": 2750, "user_id": 801553, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/74c6e34ee0ad953bb3079f5bb5cd9497?s=128&d=identicon&r=PG", "display_name": "Patrick J. S.", "link": "https://stackoverflow.com/users/801553/patrick-j-s"}, "reply_to_user": {"reputation": 3, "user_id": 2939531, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/045baeb8ac9c961a3b633eb0bb678e1d?s=128&d=identicon&r=PG&f=1", "display_name": "JPeck89", "link": "https://stackoverflow.com/users/2939531/jpeck89"}, "edited": false, "score": 0, "creation_date": 1421174551, "post_id": 27926965, "comment_id": 44255467, "body": "You still failed to tell what your expected output is, so there won&#39;t be anyone able to tell what the right solution is."}, {"owner": {"reputation": 2750, "user_id": 801553, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/74c6e34ee0ad953bb3079f5bb5cd9497?s=128&d=identicon&r=PG", "display_name": "Patrick J. S.", "link": "https://stackoverflow.com/users/801553/patrick-j-s"}, "reply_to_user": {"reputation": 3, "user_id": 2939531, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/045baeb8ac9c961a3b633eb0bb678e1d?s=128&d=identicon&r=PG&f=1", "display_name": "JPeck89", "link": "https://stackoverflow.com/users/2939531/jpeck89"}, "edited": false, "score": 0, "creation_date": 1421175037, "post_id": 27926965, "comment_id": 44255729, "body": "@JPeck89: If you want the bot name (just a guess, again) you can match with <code>&#47;\\((?:.*?;)*([^;]*(?:b(?:ot|ing)|crawl|yahoo|google|spider)[&zwnj;&#8203;^;]*);&#47;</code>. The name will be in <code>$1</code>. It uses excluding matching groups <code>[^;]</code> to match anything but <code>;</code>."}], "tags": [], "owner": {"reputation": 2750, "user_id": 801553, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/74c6e34ee0ad953bb3079f5bb5cd9497?s=128&d=identicon&r=PG", "display_name": "Patrick J. S.", "link": "https://stackoverflow.com/users/801553/patrick-j-s"}, "is_accepted": true, "score": 1, "last_activity_date": 1435615269, "last_edit_date": 1435615269, "creation_date": 1421166833, "answer_id": 27926965, "question_id": 27925818, "link": "https://stackoverflow.com/questions/27925818/pulling-a-specific-useragent-out-of-apache-domlogs-with-perl/27926965#27926965", "title": "Pulling a Specific Useragent out of Apache Domlogs with Perl", "body": "<p>Without an example expected output I'm only open to guesses what you may want to achieve. But here are some things to point out about your script:</p>\n\n<pre><code>push (@domain, $2) if $_ =~ m/(\\/usr\\/local\\/apache\\/domlogs\\/.*\\/)(.*)/;\n</code></pre>\n\n<p>You're already using the <code>m</code> operator, with it you can change the delimiting character. Furthermore, there is the <code>(?:\u2026)</code> non-matching group but in this case, you don't even need that. Regular expressions in bare always match on <code>$_</code> if they aren't used with <code>=~</code> so you can get rid of that. In list-context, they're returning the contents of the matching groups. Here now all combined:</p>\n\n<pre><code>push @domain, m~/usr/local/apache/domlogs/.*/(.*)~;\n</code></pre>\n\n<p>Now on to your other expression. If things get complicated, you should use the <code>/x</code> flag, it raises readability in a great manner. </p>\n\n<p><code>.</code> is a special character in regexes, it matches anything, so you might want to escape that. Also, for the ip-address matching you can make use of <code>(?:\u2026)</code>: </p>\n\n<pre><code>(\\d{1,3}(?:\\.\\d{1,3}){3})\n</code></pre>\n\n<p><code>[\u2026]</code> matches <strong>characters within the brakets</strong> so your </p>\n\n<pre><code>[crawl|bot|spider|yahoo|bing|google]`\n</code></pre>\n\n<p>can be reduced to </p>\n\n<pre><code>[abcdeghilnoprstwy|]\n</code></pre>\n\n<p>and would do the same thing, which is clearly not what you want, but stresses, where you went wrong. What you probably wanted is a non-matching group. If you make it optional, it'll likely not match (so get rid of the <code>?</code> after the group). </p>\n\n<p><code>(?:crawl|bot|spider|yahoo|bing|google)</code></p>\n\n<p>So here is what this devil may look combined: </p>\n\n<pre><code>if (/^(\\d{1,3}(?:\\.\\d{1,3}){3})                  # $1 - ip address\n     \\s(.*)\\s*                                   # $2 - within spaces\n     (\\w*(?:crawl|bot|spider|yahoo|bing|google)) # $3 - some bot string\n    /xi){                                        # end of regex\n  print (\"$1\\n$2\\n$3\\n\");\n}\n</code></pre>\n\n<p>Probably still not what you want but I don't know what that is. You might want to make the group for <code>$2</code> non-greedy <code>(.*?)</code>. Also maybe escape some of the parentheses if you want to have a match inside of them.</p>\n\n<p>And lastly, take a look at <a href=\"https://metacpan.org/pod/distribution/ApacheLog-Parser/bin/loghack\" rel=\"nofollow\">loghack</a> since somebody might already have done the work for you.</p>\n\n<p>Here are the relevant pieces of documentation (these are <code>perldoc</code> pages, so if you have <code>perldoc</code> installed on your system, you also can do <code>perldoc perlretut</code>):</p>\n\n<ul>\n<li><a href=\"http://perldoc.perl.org/perlretut.html\" rel=\"nofollow\">perlretut</a> a tutorial for regexes.</li>\n<li><a href=\"http://perldoc.perl.org/perlre.html\" rel=\"nofollow\">perlre</a> the documentation for regexes.</li>\n<li><a href=\"http://perldoc.perl.org/perlreref.html\" rel=\"nofollow\">perlreref</a> if you've at least gone through <code>perlretut</code> this reference comes in handy.</li>\n</ul>\n"}], "owner": {"reputation": 3, "user_id": 2939531, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/045baeb8ac9c961a3b633eb0bb678e1d?s=128&d=identicon&r=PG&f=1", "display_name": "JPeck89", "link": "https://stackoverflow.com/users/2939531/jpeck89"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 172, "favorite_count": 0, "accepted_answer_id": 27926965, "answer_count": 1, "score": -2, "last_activity_date": 1435615269, "creation_date": 1421163541, "last_edit_date": 1421165044, "question_id": 27925818, "link": "https://stackoverflow.com/questions/27925818/pulling-a-specific-useragent-out-of-apache-domlogs-with-perl", "title": "Pulling a Specific Useragent out of Apache Domlogs with Perl", "body": "<p>I'm currently working on building a Regular Expression which will be able to pull the name of the useragent of a bot visiting a site. So far I've been able to get the Expression to match but it doesn't return the value I'm expecting. Please check the example below:</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict; use warnings;\n\nwhile (&lt;&gt;)\n{\n#Remove any unseen whitespace\nchomp($_);\n\nmy $i = 0;\n\n\n#Open every file in turn\nopen(my $domlog, \"&lt;\", \"$_\") or die \"cannot open file: $!\";\n\n#these were used for testing the open/closing of files\n#print \"Opened $_\";\n#print \"Closed $_\";\n\n#for now confirm the file I'm searching through\nprint \"Opened $_\\n\";\n\n#Adding the name of the domain to the @domaind array for data processing later\npush (@domain, $2) if $_ =~ m/(\\/usr\\/local\\/apache\\/domlogs\\/.*\\/)(.*)/;\n\n#search through the currently opened domlog line by line\nwhile (&lt;$domlog&gt;) {\n\n#clear white space again\nchomp $_;\n\n#Print the the record in full, then print the IP address of the visitor and what should be the useragent name \nprint \"$_\\n\";\nprint \"$1\\n $2\\n\\n\" if $_ =~ m/^(\\d{1,3}.\\d{1,3}.\\d{1,3}.\\d{1,3})\\s(.*)\\s.*(\\w+[crawl|bot|spider|yahoo|bing|google])?/i;\n\n}\n\nclose $domlog;\n\n}\n</code></pre>\n\n<p>I'm not sure if my regex is too greedy or if I'm using the wildcard incorrectly. Any advice would be appreciated. Thank you.</p>\n\n<hr>\n\n<p>I completely forgot the input as I was worrying about the code here, I ran the script over some domlogs on my server, here are a few of the outputs as well as what I'm getting out of it.</p>\n\n<p><strong>Input</strong><br>\n188.165.15.208 - - [13/Jan/2015:09:20:49 -0500] \"GET /?page_id=2 HTTP/1.1\" 200 10574 \"-\" \"Mozilla/5.0 (compatible; AhrefsBot/5.0; +<a href=\"http://ahrefs.com/robot/\" rel=\"nofollow\">http://ahrefs.com/robot/</a>)\"</p>\n\n<p><strong>output</strong><br>\n188.165.15.208<br>\n - - [13/Jan/2015:09:20:49 -0500] \"GET /?page_id=2 HTTP/1.1\" 200 10574 \"-\" \"Mozilla/5.0 (compatible; AhrefsBot/5.0;</p>\n\n<p><strong>Input</strong><br>\n180.76.4.26 - - [13/Jan/2015:10:16:24 -0500] \"GET / HTTP/1.1\" 200 8744 \"-\" \"Mozilla/4.0 (compatible; MSIE 7.0; Windows NT 6.0)\"</p>\n\n<p><strong>output</strong><br>\n180.76.4.26<br>\n - - [13/Jan/2015:10:16:24 -0500] \"GET / HTTP/1.1\" 200 8744 \"-\" \"Mozilla/4.0 (compatible; MSIE 7.0; Windows NT</p>\n"}, {"tags": ["perl", "junit", "jenkins", "tap-harness"], "comments": [{"owner": {"reputation": 4481, "user_id": 2534803, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/c7ec08249e708f748e2b9f7f9210b7aa?s=128&d=identicon&r=PG&f=1", "display_name": "hmatt1", "link": "https://stackoverflow.com/users/2534803/hmatt1"}, "edited": false, "score": 0, "creation_date": 1421185523, "post_id": 27923958, "comment_id": 44261687, "body": "Try moving the sleep down a few lines, right before you call <code>is_eq</code>"}, {"owner": {"reputation": 266, "user_id": 151733, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/42519cbe8a38688f1b1d90fc136da944?s=128&d=identicon&r=PG", "display_name": "peroumal1", "link": "https://stackoverflow.com/users/151733/peroumal1"}, "reply_to_user": {"reputation": 4481, "user_id": 2534803, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/c7ec08249e708f748e2b9f7f9210b7aa?s=128&d=identicon&r=PG&f=1", "display_name": "hmatt1", "link": "https://stackoverflow.com/users/2534803/hmatt1"}, "edited": false, "score": 0, "creation_date": 1421230042, "post_id": 27923958, "comment_id": 44276706, "body": "Tried already, this won&#39;t change anything. As a side note, the &#39;sleep&#39; instruction is just here to indicate &quot;ok I did some big test that takes time&quot;."}], "answers": [{"comments": [{"owner": {"reputation": 266, "user_id": 151733, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/42519cbe8a38688f1b1d90fc136da944?s=128&d=identicon&r=PG", "display_name": "peroumal1", "link": "https://stackoverflow.com/users/151733/peroumal1"}, "edited": false, "score": 0, "creation_date": 1421483721, "post_id": 27995614, "comment_id": 44385073, "body": "Having a separate file for the tests is really not an option in my case. Of course if it was this would work..."}, {"owner": {"reputation": 4481, "user_id": 2534803, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/c7ec08249e708f748e2b9f7f9210b7aa?s=128&d=identicon&r=PG&f=1", "display_name": "hmatt1", "link": "https://stackoverflow.com/users/2534803/hmatt1"}, "reply_to_user": {"reputation": 266, "user_id": 151733, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/42519cbe8a38688f1b1d90fc136da944?s=128&d=identicon&r=PG", "display_name": "peroumal1", "link": "https://stackoverflow.com/users/151733/peroumal1"}, "edited": false, "score": 0, "creation_date": 1421509216, "post_id": 27995614, "comment_id": 44391273, "body": "@peroumal1 you would only need one test file for all the tests (2 files total). I&#39;ll keep looking into this when I have time since I think I want to do this for one my projects."}, {"owner": {"reputation": 266, "user_id": 151733, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/42519cbe8a38688f1b1d90fc136da944?s=128&d=identicon&r=PG", "display_name": "peroumal1", "link": "https://stackoverflow.com/users/151733/peroumal1"}, "edited": false, "score": 0, "creation_date": 1422883076, "post_id": 27995614, "comment_id": 44911274, "body": "I have made some progress on this, but nothing really helpful. What I have been able to determine is that the test is not correctly timed because the timing occurs on the aggregation phase on the total output : if the output was not put as a whole but every time a test passes (or fail), it would fix the issue.  But then, I have no clue on how I would do this."}, {"owner": {"reputation": 16381, "user_id": 1176601, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/YCkL9.jpg?s=128&g=1", "display_name": "Aprillion", "link": "https://stackoverflow.com/users/1176601/aprillion"}, "edited": false, "score": 0, "creation_date": 1433933834, "post_id": 27995614, "comment_id": 49562096, "body": "I also have a use case where splitting to more *.t files is not possible - looks like I have to do the timings manually"}], "tags": [], "owner": {"reputation": 4481, "user_id": 2534803, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/c7ec08249e708f748e2b9f7f9210b7aa?s=128&d=identicon&r=PG&f=1", "display_name": "hmatt1", "link": "https://stackoverflow.com/users/2534803/hmatt1"}, "is_accepted": false, "score": 0, "last_activity_date": 1421462167, "creation_date": 1421462167, "answer_id": 27995614, "question_id": 27923958, "link": "https://stackoverflow.com/questions/27923958/tapharness-timing-issue-with-tapformatterjunit/27995614#27995614", "title": "TAP::Harness timing issue with TAP::Formatter::JUnit", "body": "<p>I'm interested in getting this to work, but here's what I've had success with so far. It seems to work better when split out into a separate test (<code>.t</code>) file.</p>\n\n<p>The test runner looks like this:</p>\n\n<pre><code>#!/usr/bin/env perl                                                                                                                            \nuse strict;                                                                                                                                    \nuse warnings;                                                                                                                                  \nuse Test::More;                                                                                                                                \nuse TAP::Harness;                                                                                                                              \nuse Test::Builder;   \n\nmy $harness = TAP::Harness-&gt;new({\n    formatter_class =&gt; 'TAP::Formatter::JUnit',\n    merge           =&gt; 1,\n    verbosity       =&gt; 1,\n    normalize       =&gt; 1,\n    color           =&gt; 1,\n    timer           =&gt; 1,\n});\n\n$harness-&gt;runtests('simple.t');\n</code></pre>\n\n<p>and the test file looks like this:</p>\n\n<pre><code>#!/usr/bin/env perl\nuse Test::More;\n\nok(sleep(2), \"Sleep test\");\n\ndone_testing;\n</code></pre>\n\n<p>Here is the output:</p>\n\n<pre><code>&lt;testsuites&gt;\n  &lt;testsuite failures=\"0\"\n             errors=\"0\"\n             time=\"2.05175995826721\"\n             tests=\"1\"\n             name=\"simple_t\"&gt;\n    &lt;testcase time=\"2.04811692237854\" name=\"1 - Sleep test\"&gt;&lt;/testcase&gt;\n    &lt;testcase time=\"0.00308394432067871\" name=\"(teardown)\" /&gt;\n    &lt;system-out&gt;&lt;![CDATA[ok 1 - Sleep test\n1..1\n]]&gt;&lt;/system-out&gt;\n    &lt;system-err&gt;&lt;/system-err&gt;\n  &lt;/testsuite&gt;\n&lt;/testsuites&gt;\n</code></pre>\n"}], "owner": {"reputation": 266, "user_id": 151733, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/42519cbe8a38688f1b1d90fc136da944?s=128&d=identicon&r=PG", "display_name": "peroumal1", "link": "https://stackoverflow.com/users/151733/peroumal1"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 581, "favorite_count": 0, "answer_count": 1, "score": 4, "last_activity_date": 1421463790, "creation_date": 1421157861, "last_edit_date": 1421463790, "question_id": 27923958, "link": "https://stackoverflow.com/questions/27923958/tapharness-timing-issue-with-tapformatterjunit", "title": "TAP::Harness timing issue with TAP::Formatter::JUnit", "body": "<p>I have a set of scripts that produces a JUnit output for Jenkins. </p>\n\n<p>The code I execute looks like this (this is just a snippet so you get the idea) : </p>\n\n<pre><code>#!/usr/bin/env perl                                                                                                                            \n\nuse strict;                                                                                                                                    \nuse warnings;                                                                                                                                  \n\nuse Test::More;                                                                                                                                \nuse TAP::Harness;                                                                                                                              \nuse Test::Builder;                                                                                                                             \n\nmy $runner = sub {                                                                                                                             \n    my ($harness,$test) = @_;                                                                                                                  \n    sleep(2);                                                                                                                                 \n    my $builder = Test::Builder-&gt;new;                                                                                                          \n    $builder-&gt;reset;                                                                                                                           \n    $builder-&gt;output( \\my ($out) );                                                                                                            \n    $builder-&gt;failure_output( \\$out );                                                                                                         \n    $builder-&gt;todo_output( \\$out );                                                                                                            \n    $builder-&gt;is_eq($test,'test', 'Test is test');                                                                                             \n    done_testing();                                                                                                                            \n    return $out;                                                                                                                               \n};                                                                                                                                             \n\nmy $h = TAP::Harness-&gt;new( {                                                                                                                   \n    formatter_class =&gt; 'TAP::Formatter::JUnit',                                                                                                \n    merge =&gt; 1,                                                                                                                                \n    exec =&gt; $runner,                                                                                                                           \n    verbosity =&gt; 1,                                                                                                                            \n    timer =&gt; 1,                                                                                                                                \n});                                                                                                                                            \n\n$h-&gt;runtests( ['test']); \n</code></pre>\n\n<p>When I run this with the interpreter, I get the following output : </p>\n\n<pre><code>&lt;testsuites&gt;\n  &lt;testsuite failures=\"0\"\n             errors=\"0\"\n             time=\"0.000340938568115234\"\n             tests=\"1\"\n             name=\"test\"&gt;\n    &lt;testcase time=\"9.79900360107422e-05\" name=\"1 - Test is test\"&gt;&lt;/testcase&gt;\n    &lt;testcase time=\"8.29696655273438e-05\" name=\"(teardown)\" /&gt;\n    &lt;system-out&gt;&lt;![CDATA[ok 1 - Test is test\n1..1\n]]&gt;&lt;/system-out&gt;\n    &lt;system-err&gt;&lt;/system-err&gt;\n  &lt;/testsuite&gt;\n&lt;/testsuites&gt;\n</code></pre>\n\n<p>The main issue here is that the JUnit output seems to get the timing wrong. As per the sleep(2) instruction, it should have reported 2s. </p>\n\n<p>Is there a way to get the timing in the JUnit file right ? </p>\n"}, {"tags": ["perl", "workflow", "validation"], "comments": [{"owner": {"reputation": 99, "user_id": 4448695, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/683020fb1c7ce809bb90ed8234dc368e?s=128&d=identicon&r=PG", "display_name": "Vedran", "link": "https://stackoverflow.com/users/4448695/vedran"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1421161106, "post_id": 27921691, "comment_id": 44246941, "body": "hm...i can sum it up to be clearer and minimal as this:  Validator is not applied before action is executed.  Simple as that. I also included the code and a github repo so i really don&#39;t know how to be more precise."}, {"owner": {"reputation": 99, "user_id": 4448695, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/683020fb1c7ce809bb90ed8234dc368e?s=128&d=identicon&r=PG", "display_name": "Vedran", "link": "https://stackoverflow.com/users/4448695/vedran"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1421164194, "post_id": 27921691, "comment_id": 44249059, "body": "The code is simple as it can be because i&#39;m just hoping to understand how this module works. You can see what it should do, under &quot;Running the program&quot;. It&#39;s bolded. Let me give you a notice that i&#39;m using perl module here which i didn&#39;t wrote myself. There is a link on the top to the cpan where you can see the module i&#39;m talking about. That is why i&#39;m asking if somebody knows how to use it and what did i do wrong in config files or classes?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1421165023, "post_id": 27921691, "comment_id": 44249635, "body": "Sorry, missed the addition of the Birmingham example. The question is indeed complete now, thanks."}, {"owner": {"reputation": 99, "user_id": 4448695, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/683020fb1c7ce809bb90ed8234dc368e?s=128&d=identicon&r=PG", "display_name": "Vedran", "link": "https://stackoverflow.com/users/4448695/vedran"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1421316657, "post_id": 27921691, "comment_id": 44315629, "body": "I just printed out a few dumps from the Workflow.pm itself.  I put the dump in the &quot;execute_action&quot; method right before &quot;$action-&gt;validate($self);&quot; and i tried to dump &quot;$action-&gt;get_validators()&quot;. The result was empty! So this is why validator never gets executed. Problem is that he is in the workflow object as you can see in my question but it is not applied to the action. Did i miss something in the configuration or this is a bug in the Workflow module?"}, {"owner": {"reputation": 143, "user_id": 473093, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b7e55a646043b5f04e82dfcb1985edc9?s=128&d=identicon&r=PG", "display_name": "jonasbn", "link": "https://stackoverflow.com/users/473093/jonasbn"}, "edited": false, "score": 0, "creation_date": 1511720415, "post_id": 27921691, "comment_id": 81954219, "body": "You example is not complete, you refer to persister.xml, which is not included, could you add that?  jonasbn"}], "answers": [{"tags": [], "owner": {"reputation": 99, "user_id": 4448695, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/683020fb1c7ce809bb90ed8234dc368e?s=128&d=identicon&r=PG", "display_name": "Vedran", "link": "https://stackoverflow.com/users/4448695/vedran"}, "is_accepted": false, "score": 0, "last_activity_date": 1421919110, "creation_date": 1421919110, "answer_id": 28085241, "question_id": 27921691, "link": "https://stackoverflow.com/questions/27921691/perl-workflow-module-with-validator/28085241#28085241", "title": "Perl Workflow module with validator", "body": "<p>Looks like we will have to wait for this a bit or we can participate in a project to get this functionaity done.</p>\n\n<p>Scroll to the \"get_validators\" heading and you will se a \"#TODO\" mark.\nI'm not sure whether this means the documentation needs to be done or code but i did look at the code a bit and it looks like the code needs to be done for this functionality.\n<a href=\"http://search.cpan.org/~jonasbn/Workflow-1.41/lib/Workflow/Factory.pm\" rel=\"nofollow\">http://search.cpan.org/~jonasbn/Workflow-1.41/lib/Workflow/Factory.pm</a></p>\n\n<p>Correct me if i'm wrong.</p>\n"}, {"comments": [{"owner": {"reputation": 4682, "user_id": 894194, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/58a6f7a9b62cb94a07e081a086c7b9bc?s=128&d=identicon&r=PG", "display_name": "Guillaume Darmont", "link": "https://stackoverflow.com/users/894194/guillaume-darmont"}, "edited": false, "score": 0, "creation_date": 1511718665, "post_id": 47498915, "comment_id": 81953601, "body": "This does not provide an answer to the question. To critique or request clarification from an author, leave a comment below their post. - <a href=\"/review/low-quality-posts/18067782\">From Review</a>"}, {"owner": {"reputation": 143, "user_id": 473093, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b7e55a646043b5f04e82dfcb1985edc9?s=128&d=identicon&r=PG", "display_name": "jonasbn", "link": "https://stackoverflow.com/users/473093/jonasbn"}, "reply_to_user": {"reputation": 4682, "user_id": 894194, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/58a6f7a9b62cb94a07e081a086c7b9bc?s=128&d=identicon&r=PG", "display_name": "Guillaume Darmont", "link": "https://stackoverflow.com/users/894194/guillaume-darmont"}, "edited": false, "score": 0, "creation_date": 1512025123, "post_id": 47498915, "comment_id": 82092597, "body": "I have created <a href=\"https://github.com/vmcooper/perl_workflow_test/pull/1\" rel=\"nofollow noreferrer\">a PR</a> for your Github repository with all the files, I am sorry I overlooked this before creating my own and the files that was missing in your question was of course available in the repository. My own response lacks the changes made to the validator, I will updated it."}, {"owner": {"reputation": 143, "user_id": 473093, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b7e55a646043b5f04e82dfcb1985edc9?s=128&d=identicon&r=PG", "display_name": "jonasbn", "link": "https://stackoverflow.com/users/473093/jonasbn"}, "reply_to_user": {"reputation": 4682, "user_id": 894194, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/58a6f7a9b62cb94a07e081a086c7b9bc?s=128&d=identicon&r=PG", "display_name": "Guillaume Darmont", "link": "https://stackoverflow.com/users/894194/guillaume-darmont"}, "edited": false, "score": 0, "creation_date": 1512025367, "post_id": 47498915, "comment_id": 82092712, "body": "@guillaume-darmont would it be possible for you to review my answer again, I have updated it - and I would like to get the -1 addressed, if the answer of course justifies this - thanks"}, {"owner": {"reputation": 4682, "user_id": 894194, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/58a6f7a9b62cb94a07e081a086c7b9bc?s=128&d=identicon&r=PG", "display_name": "Guillaume Darmont", "link": "https://stackoverflow.com/users/894194/guillaume-darmont"}, "edited": false, "score": 1, "creation_date": 1512050458, "post_id": 47498915, "comment_id": 82107295, "body": "I cannot do anything about the -1, since I was only asked by SO to do some review on your original post (<a href=\"https://stackoverflow.com/revisions/47498915/1\">stackoverflow.com/revisions/47498915/1</a>). The downvote is not mine."}], "tags": [], "owner": {"reputation": 143, "user_id": 473093, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b7e55a646043b5f04e82dfcb1985edc9?s=128&d=identicon&r=PG", "display_name": "jonasbn", "link": "https://stackoverflow.com/users/473093/jonasbn"}, "is_accepted": false, "score": -1, "last_activity_date": 1512025238, "last_edit_date": 1512025238, "creation_date": 1511716953, "answer_id": 47498915, "question_id": 27921691, "link": "https://stackoverflow.com/questions/27921691/perl-workflow-module-with-validator/47498915#47498915", "title": "Perl Workflow module with validator", "body": "<p>I located several issues in your example.</p>\n\n<p>Action1.pm has a constructor, this interferes with the inheritance, So this should be deleted leaving your action class as follows</p>\n\n<pre><code>package App::Action::Action1;\n\nuse strict;\nuse base qw( Workflow::Action );\nuse Workflow::Exception qw( validation_error configuration_error );\nuse Data::Dumper;\n\nsub execute {\n    my $self = shift;\n    my $wf = shift;\n    print \"App::Action::Action1::Execute\\n\";\n    print \"Validators: \".Dumper($self-&gt;get_validators()).\"\\n\";\n}\n\n1;\n</code></pre>\n\n<p>The main issue that your application receives the input from the user, but you never feed it to the workflow. This has be done using context, like so:</p>\n\n<pre><code>$context-&gt;param( answer =&gt; $city );\n</code></pre>\n\n<p>The validator should looks as follows:</p>\n\n<pre><code>package App::Validator::Validator1;\n\nuse strict;\nuse base qw( Workflow::Validator );\nuse Workflow::Exception qw( validation_error configuration_error );\nuse Data::Dumper;\nuse Carp qw(carp);\n\nsub _init {\n    my ( $self, $params ) = @_;\n     unless ( $params-&gt;{answer} ) {\n         configuration_error\n             \"You must define a value for 'answer' in \",\n             \"declaration of validator \", $self-&gt;name;\n     }\n     if ( ref $params-&gt;{answer} ) {\n         configuration_error\n             \"The value for 'answer' must be a simple scalar in \",\n             \"declaration of validator \", $self-&gt;name;\n     }\n     print \"Answer: \".$params-&gt;{answer}.\"\\n\";\n     $self-&gt;{answer} = $params-&gt;{answer};\n}\n\nsub validate {\n    my ( $self, $wf ) = @_;\n\n    my $city = $wf-&gt;context-&gt;param('answer');\n\n    print \"Your answer is being validated!\\n\";\n    print \"Your answer is - \".$city.\"\\n\";\n\n    my $check;\n\n    if ( $city eq $self-&gt;{answer} ){\n        $check = 1;\n    } else {\n        $check = 0;\n    }\n    unless ( $check ) {\n        validation_error \"Validation error!\";\n    }\n}\n\n1;\n</code></pre>\n\n<p>And your main application should resemble the following:</p>\n\n<pre><code>use strict;\nuse Log::Log4perl     qw( get_logger );\nuse Workflow::Factory qw( FACTORY );\nuse lib qw(lib);\n\nLog::Log4perl::init( 'log4perl.conf' );\nsystem('clear');\n\n# Stock the factory with the configurations; we can add more later if we want\nFACTORY-&gt;add_config_from_file(\n    workflow   =&gt; 'workflow.xml',\n    action     =&gt; 'action.xml',\n    persister  =&gt; 'persister.xml',\n    validator  =&gt; 'validator.xml'\n    );\n\nmy $workflow = FACTORY-&gt;create_workflow( \"Workflow1\" );\nmy $context = $workflow-&gt;context;\n\nwhile ( $workflow-&gt;state eq \"INITIAL\" ) {\n    print \"If you answer right the action should change state to 'finished'. Try answering wrong first.\\n\";\n    my $city = get_response( \"Capital city of England: \" );\n    print \"You answered - $city\\n\";\n    $context-&gt;param( answer =&gt; $city );\n    $workflow-&gt;execute_action( 'action1' );\n\n    if( $workflow-&gt;state eq \"INITIAL\" ) {\n        print \"Your answer is wrong! try again!\\n\\n\";\n    }\n}\n\nprint \"\\nCorrect! Current state of workflow is - \".$workflow-&gt;state.\"\\n\\n\";\n\n\n# Generic routine to read a response from the command-line (defaults,\n# etc.) Note that return value has whitespace at the end/beginning of\n# the routine trimmed.\n\nsub get_response {\n    my ( $msg ) = @_;\n    print $msg;\n    my $response = &lt;STDIN&gt;;\n    chomp $response;\n    $response =~ s/^\\s+//;\n    $response =~ s/\\s+$//;\n    return $response;\n}\n</code></pre>\n\n<p>I understand your confusion, since the documentation does not properly reflect this fact and it cannot be read from the example application in the distribution. I will update the documentation accordingly.</p>\n"}], "owner": {"reputation": 99, "user_id": 4448695, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/683020fb1c7ce809bb90ed8234dc368e?s=128&d=identicon&r=PG", "display_name": "Vedran", "link": "https://stackoverflow.com/users/4448695/vedran"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 397, "favorite_count": 1, "answer_count": 2, "score": 6, "last_activity_date": 1512025238, "creation_date": 1421150537, "last_edit_date": 1421312738, "question_id": 27921691, "link": "https://stackoverflow.com/questions/27921691/perl-workflow-module-with-validator", "title": "Perl Workflow module with validator", "body": "<p>i'm trying to get things work with perl Workflow module - <a href=\"http://search.cpan.org/~jonasbn/Workflow/\" rel=\"nofollow\">http://search.cpan.org/~jonasbn/Workflow/</a></p>\n\n<p>I managed to figure out how it works with workflows, actions, conditions and all but i can't get it to apply validator class to the action.</p>\n\n<p>My _init method from validator loads and prints out the line that i put there for testing but validate method is not triggered ever. Also, when dumping $self->get_validators() from action class i get empty list.</p>\n\n<p>I created a short example so please try it and help out if you see the problem. Tnx!</p>\n\n<p>link to code - <a href=\"https://github.com/vmcooper/perl_workflow_test\" rel=\"nofollow\">https://github.com/vmcooper/perl_workflow_test</a></p>\n\n<p><strong>Running the program</strong></p>\n\n<p>Program starts with</p>\n\n<pre><code>Answer: London\nIf you answer right the action should change state to 'finished'. Try answering wrong first.\nCapital city of England:\n</code></pre>\n\n<p>if you answer \"Birmingham\" it should write</p>\n\n<pre><code>Your answer is being validated!\n</code></pre>\n\n<p>and ask the question again.</p>\n\n<p>When you answer \"London\" it should</p>\n\n<pre><code>Correct! Current state of workflow is - finished\n</code></pre>\n\n<p><strong>edit</strong> Now it writes out \"Correct! Current state of workflow is - finished\" whatever your answer is.</p>\n\n<p>workflow_test.pl</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>use strict;\nuse Log::Log4perl     qw( get_logger );\nuse Workflow::Factory qw( FACTORY );\n\nLog::Log4perl::init( 'log4perl.conf' );\nsystem('clear');\n\n# Stock the factory with the configurations; we can add more later if we want\nFACTORY-&gt;add_config_from_file(\n    workflow   =&gt; 'workflow.xml',\n    action     =&gt; 'action.xml',\n    persister  =&gt; 'persister.xml',\n    validator  =&gt; 'validator.xml'\n    );\n\nmy $workflow = FACTORY-&gt;create_workflow( \"Workflow1\" );\nmy $context = $workflow-&gt;context;\n\nwhile ( $workflow-&gt;state eq \"INITIAL\" ) {\n    print \"If you answer right the action should change state to 'finished'. Try answering wrong first.\\n\";\n    my $city = get_response( \"Capital city of England: \" );\n    print \"You answered - $city\\n\";\n    $workflow-&gt;execute_action( 'action1' );\n\n    if( $workflow-&gt;state eq \"INITIAL\" ) {\n        print \"Your answer is wrong! try again!\\n\\n\";\n    }\n}\n\nprint \"\\nCorrect! Current state of workflow is - \".$workflow-&gt;state.\"\\n\\n\";\n\n\n# Generic routine to read a response from the command-line (defaults,\n# etc.) Note that return value has whitespace at the end/beginning of\n# the routine trimmed.\n\nsub get_response {\n    my ( $msg ) = @_;\n    print $msg;\n    my $response = &lt;STDIN&gt;;\n    chomp $response;\n    $response =~ s/^\\s+//;\n    $response =~ s/\\s+$//;\n    return $response;\n}\n</code></pre>\n\n<p>workflow.xml</p>\n\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;workflow&gt;\n     &lt;type&gt;Workflow1&lt;/type&gt;\n     &lt;time_zone&gt;local&lt;/time_zone&gt;\n     &lt;description&gt;This is my workflow.&lt;/description&gt;\n     &lt;persister&gt;Persister1&lt;/persister&gt;\n\n     &lt;state name=\"INITIAL\"&gt;\n        &lt;action name=\"action1\" resulting_state=\"finished\"/&gt;\n     &lt;/state&gt;\n\n    &lt;state name=\"finished\" /&gt;\n &lt;/workflow&gt;\n</code></pre>\n\n<p>action.xml</p>\n\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;actions&gt;\n    &lt;action name=\"action1\" class=\"App::Action::Action1\" &gt;\n        &lt;validator name=\"validator1\"&gt;\n            &lt;arg&gt;$city&lt;/arg&gt;\n        &lt;/validator&gt;\n    &lt;/action&gt;\n&lt;/actions&gt;\n</code></pre>\n\n<p>validator.xml</p>\n\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;validators&gt;\n    &lt;validator name=\"validator1\" class=\"App::Validator::Validator1\"&gt;\n        &lt;param name=\"answer\" value=\"London\" /&gt;\n    &lt;/validator&gt;\n&lt;/validators&gt;\n</code></pre>\n\n<p>App::Action::Action1.pm</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>package App::Action::Action1;\n\nuse strict;\nuse base qw( Workflow::Action );\nuse Workflow::Exception qw( validation_error configuration_error );\nuse Data::Dumper;\n\nsub new {\n    my $class = shift;\n\n    my $self = {};\n    bless ($self, $class);\n\n    return $self;\n}\n\nsub execute {\n    my $self = shift;\n    my $wf = shift;\n    print \"App::Action::Action1::Execute\\n\";\n    print \"Validators: \".Dumper($self-&gt;get_validators()).\"\\n\";\n}\n\n1;\n</code></pre>\n\n<p>App::Validator::Validator1.pm</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>package App::Validator::Validator1;\n\nuse strict;\nuse base qw( Workflow::Validator );\nuse Workflow::Exception qw( validation_error configuration_error );\nuse Data::Dumper;\nuse Carp qw(carp);\n\nsub _init {\n    my ( $self, $params ) = @_;\n     unless ( $params-&gt;{answer} ) {\n         configuration_error\n             \"You must define a value for 'answer' in \",\n             \"declaration of validator \", $self-&gt;name;\n     }\n     if ( ref $params-&gt;{answer} ) {\n         configuration_error\n             \"The value for 'answer' must be a simple scalar in \",\n             \"declaration of validator \", $self-&gt;name;\n     }\n     print \"Answer: \".$params-&gt;{answer}.\"\\n\";\n     $self-&gt;{ answer =&gt; $params-&gt;{answer} };\n}\n\nsub validate {\n    my ( $self, $wf, $city ) = @_;\n\n    print \"Your answer is being validated!\\n\";\n    print \"Your answer is - \".$city.\"\\n\";\n\n    my $check;\n\n    if ( $city eq $self-&gt;{answer} ){\n        $check = 1;\n    } else {\n        $check = 0;\n    }\n    unless ( $check ) {\n        validation_error \"Validation error!\";\n    }\n}\n\n1;\n</code></pre>\n\n<p>Edit:\nIf i dump workflow object right after creation and before any action is executed i get this:</p>\n\n<pre class=\"lang-json prettyprint-override\"><code>Workflow: $VAR1 = bless( {\n    '_states' =&gt; {\n        'INITIAL' =&gt; bless( {\n            ...,\n            '_actions' =&gt; {\n                'action1' =&gt; {\n                    'resulting_state' =&gt; 'finished',\n                    'name' =&gt; 'action1'\n                }\n            },\n            '_factory' =&gt; bless( {\n                ...,\n                '_action_config' =&gt; {\n                    'default' =&gt; {\n                        'action1' =&gt; {\n                            'name' =&gt; 'action1',\n                            'class' =&gt; 'App::Action::Action1',\n                            'validator' =&gt; [\n                                {\n                                    'arg' =&gt; [\n                                         '$city'\n                                       ],\n                                    'name' =&gt; 'validator1'\n                                }\n                            ]\n                        }\n                    }\n                },\n                '_validators' =&gt; {\n                    'validator1' =&gt; bless( {\n                        'name' =&gt; 'validator1',\n                        'class' =&gt; 'App::Validator::Validator1',\n                        'PARAMS' =&gt; {}\n                    }, 'App::Validator::Validator1' )\n                },\n                '_validator_config' =&gt; {\n                    'validator1' =&gt; {\n                        'answer' =&gt; 'London',\n                        'name' =&gt; 'validator1',\n                        'class' =&gt; 'App::Validator::Validator1'\n                    }\n                },\n                ...\n            }, 'Workflow::Factory' ),\n            'type' =&gt; 'Workflow1',\n            'PARAMS' =&gt; {}\n        }, 'Workflow::State' ),\n        'finished' =&gt; $VAR1-&gt;{'_states'}{'INITIAL'}{'_factory'}{'_workflow_state'}{'Workflow1'}[1]\n    },\n    ...\n}, 'Workflow' );\n</code></pre>\n\n<p>As you can see, validator is here and everything is set up and looks like it's ok but the validator is not applied.</p>\n"}, {"tags": ["perl", "awk", "printf"], "comments": [{"owner": {"reputation": 98433, "user_id": 368630, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/107085826cfbb2700f535417a12c89cb?s=128&d=identicon&r=PG", "display_name": "David W.", "link": "https://stackoverflow.com/users/368630/david-w"}, "edited": false, "score": 0, "creation_date": 1421152065, "post_id": 27921474, "comment_id": 44241307, "body": "What version of GNU <code>awk</code> are you using. I tried this on mine, and it seem fine. I have GNU Awk 3.1.5. Type <code>awk --version</code> to find the version."}, {"owner": {"reputation": 11, "user_id": 4449033, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2103011ceb837ff88f3c6dcf6d58031e?s=128&d=identicon&r=PG&f=1", "display_name": "user237494", "link": "https://stackoverflow.com/users/4449033/user237494"}, "reply_to_user": {"reputation": 98433, "user_id": 368630, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/107085826cfbb2700f535417a12c89cb?s=128&d=identicon&r=PG", "display_name": "David W.", "link": "https://stackoverflow.com/users/368630/david-w"}, "edited": false, "score": 0, "creation_date": 1421258634, "post_id": 27921474, "comment_id": 44294053, "body": "my awk is GNU Awk 4.0.1  .  I like ikegami&#39;s 2nd solution. It is short and seems to be a bit faster if run on many MAC addresses, although I must admit that the pattern repetition is a bit awkward to read. Unfortunately I cannot give any points as my account does not have enough credits yet.  As the &#39;echo&#39; command has an LF at the end I think the \\n in the printf can be omitted."}, {"owner": {"reputation": 98433, "user_id": 368630, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/107085826cfbb2700f535417a12c89cb?s=128&d=identicon&r=PG", "display_name": "David W.", "link": "https://stackoverflow.com/users/368630/david-w"}, "edited": false, "score": 0, "creation_date": 1421275322, "post_id": 27921474, "comment_id": 44302679, "body": "I&#39;m going to see if I can find a difference. Unfortunately, all of the Linux systems at my company are still using 3.1.5. I&#39;m going to see if I can diff between 3.1.5 and 4.0.1 and find out what broke in between."}], "answers": [{"comments": [{"owner": {"reputation": 226874, "user_id": 1983854, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/eKpAk.png?s=128&g=1", "display_name": "fedorqui &#39;SO stop harming&#39;", "link": "https://stackoverflow.com/users/1983854/fedorqui-so-stop-harming"}, "edited": false, "score": 0, "creation_date": 1421151186, "post_id": 27921569, "comment_id": 44240799, "body": "@Jidder now it is handled broader. Also, no need to downvote."}, {"owner": {"user_type": "does_not_exist", "display_name": "user3442743"}, "edited": false, "score": 0, "creation_date": 1421152647, "post_id": 27921569, "comment_id": 44241641, "body": "@fedorqui i haven&#39;t and i can&#39;t downvote twice anyway ?"}, {"owner": {"reputation": 226874, "user_id": 1983854, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/eKpAk.png?s=128&g=1", "display_name": "fedorqui &#39;SO stop harming&#39;", "link": "https://stackoverflow.com/users/1983854/fedorqui-so-stop-harming"}, "edited": false, "score": 0, "creation_date": 1421153304, "post_id": 27921569, "comment_id": 44242036, "body": "@Jidder ok thanks. Well, apparently in the [Perl] tag people downvotes quite fastly (and don&#39;t come back to check if the problems were solved) and so did they."}], "tags": [], "owner": {"reputation": 226874, "user_id": 1983854, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/eKpAk.png?s=128&g=1", "display_name": "fedorqui &#39;SO stop harming&#39;", "link": "https://stackoverflow.com/users/1983854/fedorqui-so-stop-harming"}, "is_accepted": false, "score": 0, "last_activity_date": 1421167704, "last_edit_date": 1421167704, "creation_date": 1421150123, "answer_id": 27921569, "question_id": 27921474, "link": "https://stackoverflow.com/questions/27921474/printf-zero-padded-string/27921569#27921569", "title": "printf zero padded string", "body": "<p>If you were dealing with a number rather than hex, you could use <code>%.Xd</code> to indicate you want at least <code>X</code> digits.</p>\n\n<pre><code>$ awk -F: '{printf( \"%.2d%.2d\\n\", $1, $2)}' &lt;&lt;&lt; \"0:23\"\n0023\n^^\ntwo digits\n</code></pre>\n\n<p>From The <a href=\"http://www.gnu.org/software/gawk/manual/gawk.html#Format-Modifiers\" rel=\"nofollow\">GNU Awk User\u2019s Guide #5.5.3 Modifiers for printf Formats</a>:</p>\n\n<blockquote>\n  <p>.prec</p>\n  \n  <p>A period followed by an integer constant specifies the precision to\n  use when printing. The meaning of the precision varies by control\n  letter:</p>\n  \n  <p>%d, %i, %o, %u, %x, %X</p>\n  \n  <p>Minimum number of digits to print.</p>\n</blockquote>\n\n<p>In this case, you need a more general approach to deal with each one of the blocks of the MAC address. You can loop through the elements and add a <code>0</code> in case their length is just <code>1</code>:</p>\n\n<pre><code>awk -F: '{for (i=1;i&lt;=NF;i++)        #loop through the elements\n            {\n                if (length($i)==1)   #if length is 1\n                    printf(\"0\")      #add a 0\n                printf (\"%s\", $i)    #print the rest\n            }\n            print \"\"                 #print a new line at the end\n        }' &lt;&lt;&lt; \"0:0:c:7:ac:1e\"\n</code></pre>\n\n<p>This returns:</p>\n\n<pre><code>00000c07ac1e\n^^  ^^  ^^\n  ^^  ^^  ^^\n</code></pre>\n\n<p>Note <code>awk '...' &lt;&lt;&lt; \"$MAC\"</code> is the same as <code>echo \"$MAC\" | awk '...'</code>.</p>\n"}, {"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user3442743"}, "is_accepted": false, "score": 0, "last_activity_date": 1421150701, "last_edit_date": 1592644375, "creation_date": 1421150701, "answer_id": 27921757, "question_id": 27921474, "link": "https://stackoverflow.com/questions/27921474/printf-zero-padded-string/27921757#27921757", "title": "printf zero padded string", "body": "<p>Bit long but should be pretty robust</p>\n<pre><code> awk -F: '{for(i=1;i&lt;=NF;i++){while(length($i)&lt;2)$i=0$i;printf &quot;%s&quot;,$i;}print &quot;&quot;}'\n</code></pre>\n<hr />\n<h3>How it works</h3>\n<p>1.Loop through fields<br />\n2.Whilst the field is less than 2 characters long add zeros to the front<br />\n3.print the field<br />\n4.print newline character at end.</p>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 2, "last_activity_date": 1421160477, "last_edit_date": 1421160477, "creation_date": 1421150720, "answer_id": 27921764, "question_id": 27921474, "link": "https://stackoverflow.com/questions/27921474/printf-zero-padded-string/27921764#27921764", "title": "printf zero padded string", "body": "<p>Your Perl snippet will not break in future releases. This is basic functionality. Changing it will break many, many programs. (Plus, Perl has a mechanism for introducing backwards incompatible changes without breaking existing program.)</p>\n\n<p>Cleaned up:</p>\n\n<pre><code>echo \"$MAC\" | perl -ne'@F=split(/:/); printf(\"%02s%02s%02s%02s%02s%02s\\n\", @F)'\n</code></pre>\n\n<p>Shorter:</p>\n\n<pre><code>echo \"$MAC\" | perl -ne'printf \"%02s%02s%02s%02s%02s%02s\\n\", split /:/'\n</code></pre>\n\n<p>Without the repetition:</p>\n\n<pre><code>echo \"$MAC\" | perl -ple'$_ = join \":\", map sprintf(\"%02s\", $_), split /:/'\n</code></pre>\n\n<p>There's <code>-a</code> if you want something more <code>awk</code>ish:</p>\n\n<pre><code>echo \"$MAC\" | perl -F: -aple'$_ = join \":\", map sprintf(\"%02s\", $_), @F'\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 4449033, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2103011ceb837ff88f3c6dcf6d58031e?s=128&d=identicon&r=PG&f=1", "display_name": "user237494", "link": "https://stackoverflow.com/users/4449033/user237494"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 831, "favorite_count": 0, "answer_count": 3, "score": 1, "last_activity_date": 1421167704, "creation_date": 1421149786, "last_edit_date": 1421149845, "question_id": 27921474, "link": "https://stackoverflow.com/questions/27921474/printf-zero-padded-string", "title": "printf zero padded string", "body": "<p>The format of MAC addresses varies with the platform.<br>\nE.g. on HPUX I could get something like:</p>\n\n<pre><code>0:0:c:7:ac:1e\n</code></pre>\n\n<p>While Linux gives me</p>\n\n<pre><code>00:00:0c:07:ac:1e  \n</code></pre>\n\n<p>I used to use awk in a kornshell script on CentOS5 to format this to <code>00000c07ac1e</code> like shown below.</p>\n\n<pre><code>MAC=\"0:0:c:7:ac:1e\"  \necho $MAC | awk -F: '{printf( \"%02s%02s%02s%02s%02s%02s\\n\", $1,$2,$3,$4,$5,$6)}'\n</code></pre>\n\n<p>Unfortunately our admin server now is Ubuntu 14LTS with a newer version of awk which doesn't support the zero padding in the <code>%s</code> format anymore and I get an undesired <code>0 0 c 7ac1e</code></p>\n\n<p>So I now switched to perl and do:  </p>\n\n<pre><code>echo $MAC | perl -ne '{@A=split(\":\"); printf( \"%02s%02s%02s%02s%02s%02s\", @A)}'\n</code></pre>\n\n<p>As this may break too in upcoming releases I am looking for a more robust but still compact way to format the string.</p>\n"}, {"tags": ["sql", "bash", "perl", "quotes"], "comments": [{"owner": {"reputation": 64845, "user_id": 2088135, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/YB10Q.jpg?s=128&g=1", "display_name": "Tom Fenech", "link": "https://stackoverflow.com/users/2088135/tom-fenech"}, "edited": false, "score": 0, "creation_date": 1421145284, "post_id": 27919954, "comment_id": 44237594, "body": "For a start, you should put double quotes around each of your variables in your bash script to prevent problems associated with word splitting and glob expansion."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 1, "creation_date": 1421146471, "post_id": 27919954, "comment_id": 44238266, "body": "Rewrite the Perl program to use <a href=\"https://metacpan.org/pod/DBI\" rel=\"nofollow noreferrer\">DBI</a> or, better, <a href=\"https://metacpan.org/pod/DBIx::Class\" rel=\"nofollow noreferrer\">DBIx::Class</a>. It will make your life much better."}], "answers": [{"comments": [{"owner": {"reputation": 353, "user_id": 2564494, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/ab5c3a782caccb4d8887108491249866?s=128&d=identicon&r=PG", "display_name": "Gui O", "link": "https://stackoverflow.com/users/2564494/gui-o"}, "edited": false, "score": 0, "creation_date": 1421145675, "post_id": 27920081, "comment_id": 44237805, "body": "I cannot execute my request in the perl script, it have to be in the bash one."}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "reply_to_user": {"reputation": 353, "user_id": 2564494, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/ab5c3a782caccb4d8887108491249866?s=128&d=identicon&r=PG", "display_name": "Gui O", "link": "https://stackoverflow.com/users/2564494/gui-o"}, "edited": false, "score": 1, "creation_date": 1421153919, "post_id": 27920081, "comment_id": 44242390, "body": "@GuiO Is there a particular reason why you have to do it that way?"}, {"owner": {"reputation": 353, "user_id": 2564494, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/ab5c3a782caccb4d8887108491249866?s=128&d=identicon&r=PG", "display_name": "Gui O", "link": "https://stackoverflow.com/users/2564494/gui-o"}, "edited": false, "score": 0, "creation_date": 1421156461, "post_id": 27920081, "comment_id": 44243850, "body": "The bash program is the main program. It calls some others functions such as &quot;ping&quot; or &quot;get snmp&quot; or &quot;send ssh request&quot;. So, all my SQL variables are set in it. Defining SQL vars, or declaring another SQL process in another script is not very clean."}, {"owner": {"reputation": 353, "user_id": 2564494, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/ab5c3a782caccb4d8887108491249866?s=128&d=identicon&r=PG", "display_name": "Gui O", "link": "https://stackoverflow.com/users/2564494/gui-o"}, "edited": false, "score": 0, "creation_date": 1421157053, "post_id": 27920081, "comment_id": 44244199, "body": "I&#39;ll do as @choroba said, but what about the &quot;on duplicate key&quot; clause ? should I place it after values(?, ?, ?) like &quot;on duplicate key update column1=?,column2=?,column3=? and add the values in the execute ?"}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "reply_to_user": {"reputation": 353, "user_id": 2564494, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/ab5c3a782caccb4d8887108491249866?s=128&d=identicon&r=PG", "display_name": "Gui O", "link": "https://stackoverflow.com/users/2564494/gui-o"}, "edited": false, "score": 0, "creation_date": 1421157094, "post_id": 27920081, "comment_id": 44244227, "body": "@GuiO: Read the documentation of DBI."}, {"owner": {"reputation": 353, "user_id": 2564494, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/ab5c3a782caccb4d8887108491249866?s=128&d=identicon&r=PG", "display_name": "Gui O", "link": "https://stackoverflow.com/users/2564494/gui-o"}, "edited": false, "score": 0, "creation_date": 1421157485, "post_id": 27920081, "comment_id": 44244463, "body": "Basically, your response is : &quot;Use DBI, and read the doc&quot; I&#39;m here for an explanation and a way to solve my issue. DBI&#39;s documentation do not mention anything about &quot;on duplicate key&quot;."}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "reply_to_user": {"reputation": 353, "user_id": 2564494, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/ab5c3a782caccb4d8887108491249866?s=128&d=identicon&r=PG", "display_name": "Gui O", "link": "https://stackoverflow.com/users/2564494/gui-o"}, "edited": false, "score": 0, "creation_date": 1421161265, "post_id": 27920081, "comment_id": 44247039, "body": "@GuiO: See the update. Complicated stuff is complicated."}, {"owner": {"reputation": 4191, "user_id": 1466640, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c0630f2d5ac5fb844675c58d3d2dfa57?s=128&d=identicon&r=PG&f=1", "display_name": "AKHolland", "link": "https://stackoverflow.com/users/1466640/akholland"}, "edited": false, "score": 1, "creation_date": 1421168522, "post_id": 27920081, "comment_id": 44252061, "body": "In MySQL you can use <code>ON DUPLICATE KEY UPDATE contact_ce_num = VALUES(contact_ce_nom), ...</code> rather than passing repeated parameters to the query."}], "tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": true, "score": 4, "last_activity_date": 1421161248, "last_edit_date": 1421161248, "creation_date": 1421145328, "answer_id": 27920081, "question_id": 27919954, "link": "https://stackoverflow.com/questions/27919954/sql-request-variable-quoting/27920081#27920081", "title": "SQL request variable quoting", "body": "<p>Instead of quoting the variables yourself, use the <a href=\"http://p3rl.org/DBI\" rel=\"nofollow\">DBI</a> module and placeholders:</p>\n\n<pre><code>$db = 'DBI'-&gt;connect(...);\nmy $insert = $db-&gt;prepare('insert into etablissement values(?, ?, ?)');\n$insert-&gt;execute($key, $caisse{$key}[0], $caisse{$key}[1]);\n</code></pre>\n\n<p>For repeated values, numbered placeholders are usually used:</p>\n\n<pre><code>my $insert = $db-&gt;prepare(&lt;&lt;'__SQL__');\nINSERT INTO etablissement\n       (code_etablissement, nom, contact_ce_nom, contact_ce_tel, contact_ce_mail)\n       VALUES (:1, :2, :3, :4, :5)\n       ON DUPLICATE KEY UPDATE contact_ce_nom  = :3,\n                               contact_ce_tel  = :4,\n                               contact_ce_mail = :5'\n__SQL__\n\n$insert-&gt;execute($key, @{ $caisse{$key} }[0 .. 3]);\n</code></pre>\n\n<p>If your driver doesn't support them (I don't see them mentioned in <a href=\"http://p3rl.org/DBD::mysql\" rel=\"nofollow\">DBD::mysql</a>), you can workaround it e.g.</p>\n\n<pre><code>my $insert = $db-&gt;prepare(&lt;&lt;'__SQL__');\nINSERT INTO etablissement\n       (code_etablissement, nom, contact_ce_nom, contact_ce_tel, contact_ce_mail)\n       VALUES (?, ?, ?, ?, ?)\n       ON DUPLICATE KEY UPDATE contact_ce_nom  = ?,\n                               contact_ce_tel  = ?,\n                               contact_ce_mail = ?\n__SQL__\n\n$insert-&gt;execute($key, @{ $caisse{$key} }[0 .. 3], @{ $caisse{$key} }[1 .. 3]);\n</code></pre>\n\n<p>or you can play with <code>quote</code> and omit placeholders totally.</p>\n"}, {"tags": [], "owner": {"reputation": 353, "user_id": 2564494, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/ab5c3a782caccb4d8887108491249866?s=128&d=identicon&r=PG", "display_name": "Gui O", "link": "https://stackoverflow.com/users/2564494/gui-o"}, "is_accepted": false, "score": 0, "last_activity_date": 1421159387, "creation_date": 1421159387, "answer_id": 27924440, "question_id": 27919954, "link": "https://stackoverflow.com/questions/27919954/sql-request-variable-quoting/27924440#27924440", "title": "SQL request variable quoting", "body": "<p>Using partial answer from choroba :</p>\n\n<p>The final question is <strong>\"how to use on duplicate key syntax with perl DBI ?\"</strong></p>\n\n<p>Like this </p>\n\n<pre><code>my $insert = $sql_connection-&gt;prepare('insert into etablissement values(?, ?, ?, ?, ?, ?) on duplicate key update contact_ce_nom=?,contact_ce_tel=?,contact_ce_mail=?');\n    $insert-&gt;execute($key, $caisse{$key}[0], $caisse{$key}[1], $caisse{$key}[2], $caisse{$key}[3],'',$caisse{$key}[1],$caisse{$key}[2],$caisse{$key}[3]);\n</code></pre>\n\n<p>The last 3 ARGS are used by the \"on udplicate key\" syntax...</p>\n"}], "owner": {"reputation": 353, "user_id": 2564494, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/ab5c3a782caccb4d8887108491249866?s=128&d=identicon&r=PG", "display_name": "Gui O", "link": "https://stackoverflow.com/users/2564494/gui-o"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 133, "favorite_count": 0, "accepted_answer_id": 27920081, "answer_count": 2, "score": 0, "last_activity_date": 1421161248, "creation_date": 1421144926, "last_edit_date": 1421158502, "question_id": 27919954, "link": "https://stackoverflow.com/questions/27919954/sql-request-variable-quoting", "title": "SQL request variable quoting", "body": "<p>My MySQL query won't work because of quotes, or missing quotes, but I don't understand how to use it properly. I need some explanations about this:</p>\n\n<p>Perl script writing to .csv file:</p>\n\n<pre><code>open(ECRIRE,\"&gt;$ARGV[1]\") || die (\"Impossible de creer le fichier de sortie\");\n\nforeach my $key (sort keys %caisse)\n{\n    print ECRIRE \"insert into etablissement(code_etablissement,nom, contact_ce_nom, contact_ce_tel, contact_ce_mail) values ($key,$caisse{$key}[0];$caisse{$key}[1];$caisse{$key}[2];$caisse{$key}[3]) on duplicate key update contact_ce_nom=$caisse{$key}[1],contact_ce_tel=$caisse{$key}[2],contact_ce_mail=$caisse{$key}[3];\\n\";\n}\n\nclose(ECRIRE);\n</code></pre>\n\n<p>Bash script executing the SQL request:</p>\n\n<pre><code>$mysql -f -h $db_address -P $db_port -u $db_user -p$db_passwd $db_name &lt; $vtiger_temporary_file_etablissement_clean\n</code></pre>\n\n<p>Mysql is crying over almost every informations like this one </p>\n\n<pre><code>You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'migrationrh2cepal@mail.com) on duplicate key update contact_ce_no' at line 1\n</code></pre>\n\n<p>I even tried quoting every variable with single quotes, with the same results...</p>\n\n<p><strong>EDIT : Using DBI for perl</strong></p>\n\n<p>The code now looks like : </p>\n\n<pre><code>foreach my $key (sort keys %caisse)\n{\n    my $insert = $sql_connection-&gt;prepare('insert into etablissement values(?, ?, ?, ?, ?, ?) on duplicate key update');\n    $insert-&gt;execute($key, $caisse{$key}[0], $caisse{$key}[1], $caisse{$key}[2], $caisse{$key}[3],'');\n}\n</code></pre>\n\n<p>I now have the \"on duplicate key\" issue. How can I add the \"on duplicate key\" statement in here ?\nI tried adding it at the end, just like this : </p>\n\n<pre><code>my $insert = $sql_connection-&gt;prepare('insert into etablissement values(?, ?, ?, ?, ?, ?) on duplicate key update');\n</code></pre>\n\n<p>But it's not working</p>\n"}, {"tags": ["sql-server", "perl", "redhat"], "comments": [{"owner": {"reputation": 1264, "user_id": 1883592, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/ae10449a16c3f2afb4d5837079c7917a?s=128&d=identicon&r=PG", "display_name": "alex", "link": "https://stackoverflow.com/users/1883592/alex"}, "edited": false, "score": 0, "creation_date": 1429567708, "post_id": 27917486, "comment_id": 47650851, "body": "You can find more debugging information using export DBI_TRACE=1 environment variable. There is several levels of debugging info, from 1 to 15."}], "owner": {"reputation": 110, "user_id": 4448176, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/754c6cd85ae2727de1efe34ef868fc07?s=128&d=identicon&r=PG&f=1", "display_name": "candymanuu", "link": "https://stackoverflow.com/users/4448176/candymanuu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 407, "favorite_count": 1, "answer_count": 0, "score": 2, "last_activity_date": 1421136989, "creation_date": 1421136525, "last_edit_date": 1421136989, "question_id": 27917486, "link": "https://stackoverflow.com/questions/27917486/connecting-from-red-hat-6-4-to-mssql-2012", "title": "connecting from red hat 6.4 to MSSQL 2012", "body": "<p>I am trying to connect from my red hat 6.4 to a MSSQL 2012 server to monitor some parameters.</p>\n\n<p>Long story short:\nI have Icinga 1.9.4 configured on that Red Hat and I am monitoring lots of hosts/services. \nAlso successfully monitoring MSSQL 2000, 2005, 2008, 2008 R2 with check_mssql_health (and freetds) from labs.consol.de</p>\n\n<p>The problem appears when trying to monitor MSSQL 2012, plugin cannot connect to it.\nAsked my MSSQL admin to double check that everything is configured OK, he confirmed that, he also successfully connected to MSSQL 2012 from another working MSSQL 2008.\nSo, I thought, I should at least make a connection from anything (perl, isql, tsql)  to see if actually is working and that I can get some data from that server but nothing can connect. </p>\n\n<p>Perl/isql/tsql cannot connect also to working MSSQL servers (the ones that I am successfully monitoring with Icinga / check_mssql_health) so I am guessing the problem is my linux setup.</p>\n\n<p>I could (desperately) use your help in finding out what the problem is.</p>\n\n<p>I do not know if check_mssql_health is compatible with MSSQL 2012 server, but, if I could make a successful connection from Perl to that MSSQL 2012, I should be able to get what I need with the help of Perl.</p>\n\n<p>Some details of my setup:</p>\n\n<pre><code>perl -MDBI -e 'DBI-&gt;installed_versions;'\n  Perl            : 5.010001    (x86_64-linux-thread-multi)\n  OS              : linux       (2.6.18-398.el5)\n  DBI             : 1.633\n  DBD::mysql      : 4.013\n  DBD::Sybase     : 1.15\n  DBD::Sponge     : 12.010003\n  DBD::Proxy      : 0.2004\n  DBD::Oracle     : 1.74\n  DBD::ODBC       : 1.50\n  DBD::Gofer      : 0.015327\n  DBD::File       : 0.44\n  DBD::ExampleP   : 12.014311\n  DBD::DBM        : 0.08\n\n\n\n cat /etc/odbc.ini\n[SASSQL26DEV]\nDriver = FreeTDS\nDescription = MSSQL database pt serverul meu\nTrace = Yes\nTraceFile = /usr/local/src/traceFile.log\n# Servername corresponds to the section in freetds.conf\nServername = SASSQL26DEV\nDatabase = tempdb\n#port = 1433\n\n\n\ncat /etc/odbcinst.ini\n[PostgreSQL]\nDescription             = ODBC for PostgreSQL\nDriver          = /usr/lib/psqlodbc.so\nSetup           = /usr/lib/libodbcpsqlS.so\nDriver64                = /usr/lib64/psqlodbc.so\nSetup64         = /usr/lib64/libodbcpsqlS.so\nFileUsage               = 1\n\n[MySQL]\nDescription             = ODBC for MySQL\nDriver          = /usr/lib/libmyodbc5.so\nSetup           = /usr/lib/libodbcmyS.so\nDriver64                = /usr/lib64/libmyodbc5.so\nSetup64         = /usr/lib64/libodbcmyS.so\nFileUsage               = 1\n\n[FreeTDS]\nDescription = FreeTDS unixODBC Driver\nDriver = /usr/lib64/libtdsodbc.so\n\n\n\ncat /usr/local/freetds/etc/freetds.conf\n\n[SASSQL26DEV]\n        host = 10.101.1.39\n        #port = 1433\n        tds version = 8.0\n        instance = CRMDEV\n</code></pre>\n\n<p>The following Nagios user is a domain user</p>\n\n<pre><code>isql -v SASSQL26DEV DOMAIN\\nagios 'password'\n[S1000][unixODBC][FreeTDS][SQL Server]Unable to connect to data source\n[ISQL]ERROR: Could not SQLConnect\n</code></pre>\n\n<p>The following testnagios user, is a MSSQL user</p>\n\n<pre><code>isql -v SASSQL26DEV testnagios 'ZAQ!2wsx'\n[S1000][unixODBC][FreeTDS][SQL Server]Unable to connect to data source\n[ISQL]ERROR: Could not SQLConnect\n\n\ncat 11sql2012_test.pl\n#!/usr/bin/perl\n\nuse DBI;\n\nmy $user   = \"nagios\";\nmy $passwd = \"password\";\nmy $server = \"SASSQL26DEV\";\n\nmy $dbh = DBI-&gt;connect(\"DBI:Sybase:server=$server\", $user, $passwd, {PrintError =&gt; 0});\nmy $sth;\n\nunless ($dbh) {\n    die \"ERROR: Failed to connect to server ($server).\\nERROR MESSAGE: $DBI::errstr\";\n} else {\n    print \"\\n\";\n    print \"Successful Connection.\";\n    print \"\\n\\n\";\n}\n\n\n./11sql2012_test.pl\nERROR: Failed to connect to server (SASSQL26DEV).\nERROR MESSAGE:  at ./11sql2012_test.pl line 13.\n</code></pre>\n\n<p>Thanks</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "edited": false, "score": 1, "creation_date": 1421130566, "post_id": 27916005, "comment_id": 44230804, "body": "Method <code>new</code> gets classname and other <i>list</i> parameters flattened into <code>@_</code> array. There is no hash nor hashref in above code."}, {"owner": {"reputation": 1102, "user_id": 999595, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/5bd09d642ab7c8f500491bd6850621e3?s=128&d=identicon&r=PG", "display_name": "jason dancks", "link": "https://stackoverflow.com/users/999595/jason-dancks"}, "reply_to_user": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "edited": false, "score": 0, "creation_date": 1421130680, "post_id": 27916005, "comment_id": 44230853, "body": "then whats going on exactly with <code>=&gt;</code> If I wrote a module and wanted to pass parameters with this syntax how would I access it?"}, {"owner": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "edited": false, "score": 1, "creation_date": 1421130790, "post_id": 27916005, "comment_id": 44230894, "body": "<code>=&gt;</code> in perl is fancy comma; <a href=\"http://stackoverflow.com/a/4093914/223226\">stackoverflow.com/a/4093914/223226</a> <code>sub new { my $class = shift; my %arg = @_; return bless \\%arg, $class; }</code>"}], "answers": [{"tags": [], "owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "is_accepted": true, "score": 5, "last_activity_date": 1421157270, "last_edit_date": 1421157270, "creation_date": 1421131361, "answer_id": 27916290, "question_id": 27916005, "link": "https://stackoverflow.com/questions/27916005/perl-autoivivifcation-of-hash-as-parameter-of-object-new/27916290#27916290", "title": "perl: autoivivifcation of hash as parameter of object-&gt;new()?", "body": "<p>No autovivification involved. You may be confused by the use of the <a href=\"http://perldoc.perl.org/perlop.html#Comma-Operator\" rel=\"nofollow\"><code>=&gt;</code> operator</a>:</p>\n\n<blockquote>\n  <p>The <code>=&gt;</code> operator is a synonym for the comma except that it causes a word on its left to be interpreted as a string if it begins with a letter or underscore and is composed only of letters, digits and underscores.</p>\n</blockquote>\n\n<p>Although <code>=&gt;</code> is often used when declaring hashes, it doesn't create a hash by itself.</p>\n\n<p>The code you posted is equivalent to</p>\n\n<pre><code>my $cage = File::MP3-&gt;new(\n    'path',          'mp3s/My-Body-Is-a-Cage.mp3',\n    'content',       $mp3_data,\n    'last_mod_time', 1304974868,\n    'title',         'My Body Is a Cage',\n);\n</code></pre>\n\n<p>This simply passes a list of eight items to the <code>new</code> method.</p>\n"}, {"tags": [], "owner": {"reputation": 41846, "user_id": 926143, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/3396173c3d22988be1a0732d184902aa?s=128&d=identicon&r=PG", "display_name": "7stud", "link": "https://stackoverflow.com/users/926143/7stud"}, "is_accepted": false, "score": 1, "last_activity_date": 1421141623, "last_edit_date": 1421141623, "creation_date": 1421140137, "answer_id": 27918416, "question_id": 27916005, "link": "https://stackoverflow.com/questions/27916005/perl-autoivivifcation-of-hash-as-parameter-of-object-new/27918416#27918416", "title": "perl: autoivivifcation of hash as parameter of object-&gt;new()?", "body": "<p>=> is also known as a <em>fat comma</em>, and it acts just like a comma--except when:</p>\n\n<ol>\n<li>the thing on the left is a <em>bareword</em>, and</li>\n<li>the <em>bareword</em> would qualify as a variable name(i.e. no strange characters)</li>\n</ol>\n\n<p>In that case, the fat comma will quote the bareword on the left. </p>\n\n<p>The fat comma is used because: </p>\n\n<ol>\n<li><p>Some people find it easier to type the fat comma than typing quote marks around the bareword on the left</p></li>\n<li><p>The fat comma indicates a relationship between the lhs and the rhs. However, the relationship is only visual--it's up to the function to determine what the relationship should be.</p></li>\n</ol>\n\n<blockquote>\n  <p>Although => is often used when declaring hashes, it doesn't create a\n  hash by itself.</p>\n</blockquote>\n\n<p>To wit:</p>\n\n<pre><code>use strict;\nuse warnings;\nuse 5.016;\nuse Data::Dumper;\n\nmy %href = (\n    'a', 10,\n    'b', 20,\n    'c', 30,\n);\n\nsay $href{'a'};\n\nsay Dumper(\\%href);\n\n\n--output:--\n10\n$VAR1 = {\n          'c' =&gt; 30,\n          'a' =&gt; 10,\n          'b' =&gt; 20\n        };\n</code></pre>\n\n<p>perl ain't ruby.</p>\n"}], "owner": {"reputation": 1102, "user_id": 999595, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/5bd09d642ab7c8f500491bd6850621e3?s=128&d=identicon&r=PG", "display_name": "jason dancks", "link": "https://stackoverflow.com/users/999595/jason-dancks"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 70, "favorite_count": 0, "accepted_answer_id": 27916290, "answer_count": 2, "score": 0, "last_activity_date": 1421157270, "creation_date": 1421129917, "question_id": 27916005, "link": "https://stackoverflow.com/questions/27916005/perl-autoivivifcation-of-hash-as-parameter-of-object-new", "title": "perl: autoivivifcation of hash as parameter of object-&gt;new()?", "body": "<p>from perlootut:</p>\n\n<pre><code>  my $cage = File::MP3-&gt;new(\n      path          =&gt; 'mp3s/My-Body-Is-a-Cage.mp3',\n      content       =&gt; $mp3_data,\n      last_mod_time =&gt; 1304974868,\n      title         =&gt; 'My Body Is a Cage',\n  );\n</code></pre>\n\n<p>I don't understand what is going on here. It looks auto vivification, if so then new is being passed both the class name and a reference to the new hash?</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 0, "creation_date": 1421119507, "post_id": 27914219, "comment_id": 44228059, "body": "what is the &quot;something&quot;?  to do this reliably, you need to be able to parse everything, not just the things you want."}, {"owner": {"reputation": 115, "user_id": 4327058, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/0d35ffe3f90026347a10f97f65696a49?s=128&d=identicon&r=PG&f=1", "display_name": "double_espresso", "link": "https://stackoverflow.com/users/4327058/double-espresso"}, "reply_to_user": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 0, "creation_date": 1421121810, "post_id": 27914219, "comment_id": 44228541, "body": "They are just declaration of defines like <code>define CONSTANT 3</code>. However, the contents of if blocks are not important as i only need to extract out the conditions. Sorry about that."}, {"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 0, "creation_date": 1421130509, "post_id": 27914219, "comment_id": 44230781, "body": "is the indentation always absolutely consistent then?  and always spaces, not tabs?"}, {"owner": {"reputation": 115, "user_id": 4327058, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/0d35ffe3f90026347a10f97f65696a49?s=128&d=identicon&r=PG&f=1", "display_name": "double_espresso", "link": "https://stackoverflow.com/users/4327058/double-espresso"}, "reply_to_user": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 0, "creation_date": 1421131553, "post_id": 27914219, "comment_id": 44231178, "body": "The indentation are not always consistent, depends on each person&#39;s coding style. the perl script is suppose to work with any nested if blocks. Sorry i didnt get your question just now. (Edited: Consistent indentation)"}, {"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 0, "creation_date": 1421132443, "post_id": 27914219, "comment_id": 44231506, "body": "if it can&#39;t be parsed solely on indentation, then it is important to know what other things can appear in the grammar, like comments or quoted strings, that may make things that look like if/else/elseifs not actually be them or make things match up differently"}, {"owner": {"reputation": 115, "user_id": 4327058, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/0d35ffe3f90026347a10f97f65696a49?s=128&d=identicon&r=PG&f=1", "display_name": "double_espresso", "link": "https://stackoverflow.com/users/4327058/double-espresso"}, "reply_to_user": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 0, "creation_date": 1421132811, "post_id": 27914219, "comment_id": 44231656, "body": "I see what you are concerned about. Quoted strings and comments were taken care. And for my case, the file i&#39;m working on only exists if/elsif/else/endif. The example I created above is just to show the idea behind what I&#39;m doing, as I need help for the logic of this script. And I will try to understand and learn from the answers."}], "answers": [{"comments": [{"owner": {"reputation": 145, "user_id": 3849291, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/xnvBk.jpg?s=128&g=1", "display_name": "TheJester1977", "link": "https://stackoverflow.com/users/3849291/thejester1977"}, "edited": false, "score": 0, "creation_date": 1421194369, "post_id": 27919959, "comment_id": 44265311, "body": "Why the down vote?  Am I that far off?  At least leave some feedback if you feel the need to down vote my answer..."}, {"owner": {"reputation": 115, "user_id": 4327058, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/0d35ffe3f90026347a10f97f65696a49?s=128&d=identicon&r=PG&f=1", "display_name": "double_espresso", "link": "https://stackoverflow.com/users/4327058/double-espresso"}, "edited": false, "score": 0, "creation_date": 1421220437, "post_id": 27919959, "comment_id": 44272080, "body": "Sorry, it is truly not me that downvoted you. I have upvoted it. Thanks for your answer anyway, I took some ideas as reference =)"}, {"owner": {"reputation": 145, "user_id": 3849291, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/xnvBk.jpg?s=128&g=1", "display_name": "TheJester1977", "link": "https://stackoverflow.com/users/3849291/thejester1977"}, "reply_to_user": {"reputation": 115, "user_id": 4327058, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/0d35ffe3f90026347a10f97f65696a49?s=128&d=identicon&r=PG&f=1", "display_name": "double_espresso", "link": "https://stackoverflow.com/users/4327058/double-espresso"}, "edited": false, "score": 0, "creation_date": 1421223625, "post_id": 27919959, "comment_id": 44273354, "body": "Thank you, coff_ee, I appreciate it.  I hope it at least helped somewhat!  :)"}], "tags": [], "owner": {"reputation": 145, "user_id": 3849291, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/xnvBk.jpg?s=128&g=1", "display_name": "TheJester1977", "link": "https://stackoverflow.com/users/3849291/thejester1977"}, "is_accepted": false, "score": 0, "last_activity_date": 1421144941, "creation_date": 1421144941, "answer_id": 27919959, "question_id": 27914219, "link": "https://stackoverflow.com/questions/27914219/extract-if-elsif-conditions-according-to-their-levels/27919959#27919959", "title": "Extract if-elsif conditions according to their levels", "body": "<p>This is thoroughly untested code, but a would be my spin on the situation using your \"if-elsif-endif\" sample construct.  I think conceptually it's right, but would need some dev and debug time:</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse warnings;\nuse strict;\n\nmy $in = \"if-elsif-endif_feed\";\nmy $out = \"if-elsif-endif_parsed\";\n\nmy $level;\nmy $condition;\nmy @levels;\nmy @conditions;\n\nopen IN, \"&lt;\", $in or die \"IN: $!\\n\";\nopen OUT, \"&gt;\", $out or die \"OUT: $!\\n\";\n\nwhile (&lt;IN&gt;) {\n    if ( $_ =~ m/^[elsif].*$/i ) {\n        if ( $_ =~ m/endif/i ) {\n            next;\n        } else {\n            $level = 1;\n            ($condition) = $_ =~ m/[elsif].*\\((.*)\\).*$/;\n            push @levels, $level;\n            push @conditions, $condition;\n        }\n    } elsif ( $_ =~ m/^\\s+[elsif].*$/i ) {\n        if ( $_ =~ m/endif/i ) {\n            next;\n        } else {\n            $level++;\n            ($condition) = m/\\s+[elsif].*\\((.*)\\).*$/;\n            push @levels, $level;\n            push @conditions, $condition;\n        }\n    } elsif ( $_ =~ m/\\s+\\}.*$/ ) {\n        $condition = \"end\";\n        push @levels, $level;\n        push @conditions, $condition;\n        $level--;\n    } elsif ( $_ =~ m/\\}.*$/ ) {\n        $condition = \"end\";\n        $level = 1;\n        push @levels, $level;\n        push @conditions, $condition;\n    } else {\n        next;\n    }\n}\n\nmy $numlevels = @levels;\nmy $i;\nmy $curlevel;\nmy $curcond;\nmy $string;\nmy $stringc;\n\nfor ($i = 0; $i &lt;= $numlevels; $i++) {\n    $curlevel = $levels[$i];\n    $curcond = $conditions[$i];\n\n\n    if ( $curlevel == 1 ) {\n        if ( $curcond ne \"end\" ) {\n            $string = \"$curcond\";\n            print \"$string\\n\";\n            print OUT \"$string\\n\";\n        } else {\n            $string = undef;\n        }\n    } elsif ($curlevel &gt; 1 ) {\n        if ( $curcond ne \"end\" ) {\n            $stringc = $string;\n            if (( $levels[++$i] == $curlevel ) &amp;&amp; ( $conditions[++$i] eq \"end\" )) {\n                $string .= \"\\/\\/$curcond\";\n                print \"$string\\n\";\n            } elsif (( $levels[++$i] == $curlevel ) &amp;&amp; ( $conditions[++$i] ne \"end\" )) {\n                $string = $stringc;\n            }\n        } elsif ( $curcond eq \"end\" ) {\n            print \"$string\\n\";\n            print OUT \"$string\\n\";\n        }\n    }\n}\n</code></pre>\n\n<p>So in the first part, you're basically looping through the file and capturing the level and condition info into arrays, with level being independent of the # of spaces.  Them, you're parsing the arrays into the appropriate strings and printing them in the proper place.</p>\n\n<p>Hope that helps!!</p>\n"}], "owner": {"reputation": 115, "user_id": 4327058, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/0d35ffe3f90026347a10f97f65696a49?s=128&d=identicon&r=PG&f=1", "display_name": "double_espresso", "link": "https://stackoverflow.com/users/4327058/double-espresso"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 83, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1421220128, "creation_date": 1421117498, "last_edit_date": 1421220128, "question_id": 27914219, "link": "https://stackoverflow.com/questions/27914219/extract-if-elsif-conditions-according-to-their-levels", "title": "Extract if-elsif conditions according to their levels", "body": "<pre><code>if (CONDITION_1) {\n    if (CONDITION_A) {\n        a = 1;\n    }\n}\nelsif (CONDITION_2) {\n    if (CONDITION_B) {\n        if (CONDITION_i) {\n            a = 2;\n        }\n        elsif (CONDITION_ii) {\n            a = 3;\n        }\n        endif\n    }\n    endif\n}\nendif\n</code></pre>\n\n<p>I want to extract the conditions out as strings, and print them out according to their levels like:</p>\n\n<pre><code>CONDITION_1\nCONDITION_1//CONDITION_A\nCONDITION_2\nCONDITION_2//CONDITION_B\nCONDITION_2//CONDITION_B//CONDITION_i\nCONDITION_2//CONDITION_B//CONDITION_ii\n</code></pre>\n\n<p>How should I code it recursively in Perl, as the real file might have more than 3 levels of if-else block? I cant manage to get the logic correct. Many thanks.</p>\n\n<p>----------EDIT----------</p>\n\n<p>I have figured out the logic behind it, here's my working code:</p>\n\n<pre><code>my (%cond, $lvl);\nopen my $fh, '&lt;', $file or die;\nwhile (&lt;$fh&gt;) {\n    if (/if\\s\\((\\w+)\\)/) {\n        $lvl++;\n        push @{ $cond{$lvl} }, $1;\n        for my $i (1 .. $lvl) {\n            print \"${ $cond{$i} }[-1]\";\n            print \"//\" if $i != $lvl;\n        }\n        print \"\\n\";\n    }\n    elsif (/elsif\\s\\((\\w+)\\)/) {\n        push @{ $cond{$lvl} }, $1;\n        for my $i (1 .. $lvl) {\n            print \"${ $cond{$i} }[-1]\";\n            print \"//\" if $i != $lvl;\n        }\n        print \"\\n\";\n    }\n    elsif (/else/) {\n        push @{ $cond{$lvl} }, 'else';\n        for my $i (1 .. $lvl) {\n            print \"${ $cond{$i} }[-1]\";\n            print \"//\" if $i != $lvl;\n        }\n        print \"\\n\";\n    }\n    elsif (/endif/) {\n        $lvl--;\n    }\n}\nclose $fh;\n</code></pre>\n"}, {"tags": ["linux", "perl", "io", "legacy-code"], "comments": [{"owner": {"reputation": 14973, "user_id": 348312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c5afc074aa3078afdbd1cd7485ac726e?s=128&d=identicon&r=PG&f=1", "display_name": "jim mcnamara", "link": "https://stackoverflow.com/users/348312/jim-mcnamara"}, "edited": false, "score": 1, "creation_date": 1421118137, "post_id": 27914107, "comment_id": 44227781, "body": "/proc/fd has the file descriptors  try: lsof -a -p &lt;pid&gt;"}], "answers": [{"tags": [], "owner": {"reputation": 14973, "user_id": 348312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c5afc074aa3078afdbd1cd7485ac726e?s=128&d=identicon&r=PG&f=1", "display_name": "jim mcnamara", "link": "https://stackoverflow.com/users/348312/jim-mcnamara"}, "is_accepted": true, "score": 4, "last_activity_date": 1421123335, "last_edit_date": 1421123335, "creation_date": 1421118259, "answer_id": 27914293, "question_id": 27914107, "link": "https://stackoverflow.com/questions/27914107/get-file-descriptor-from-filename-in-perl/27914293#27914293", "title": "Get file descriptor from filename in Perl", "body": "<p><code>/proc/&lt;pid&gt;/fd</code> has the file descriptors.</p>\n\n<pre><code>$ ls -l /proc/$$/fd\ntotal 0\nlrwx------ 1 ikegami pg1404028 64 Jan 12 20:26 0 -&gt; /dev/pts/3\nlrwx------ 1 ikegami pg1404028 64 Jan 12 20:26 1 -&gt; /dev/pts/3\nlrwx------ 1 ikegami pg1404028 64 Jan 12 20:26 2 -&gt; /dev/pts/3\nlrwx------ 1 ikegami pg1404028 64 Jan 12 20:26 255 -&gt; /dev/pts/3\n</code></pre>\n\n<p>You can also try <code>lsof -a -p &lt;pid&gt;</code>.</p>\n\n<pre><code>$ lsof -a -p $$\nlsof: WARNING: can't stat() debugfs file system /sys/kernel/debug\n      Output information may be incomplete.\nCOMMAND   PID    USER   FD   TYPE DEVICE SIZE/OFF        NODE NAME\nbash    13841 ikegami  cwd    DIR   8,17     4096 12884902307 /home/ikegami\nbash    13841 ikegami  rtd    DIR    8,1     4096           2 /\nbash    13841 ikegami  txt    REG    8,1   959120      130675 /bin/bash\nbash    13841 ikegami  mem    REG    8,1    52120      914147 /lib/x86_64-linux-gnu/libnss_files-2.15.so\nbash    13841 ikegami  mem    REG    8,1    47680      914446 /lib/x86_64-linux-gnu/libnss_nis-2.15.so\nbash    13841 ikegami  mem    REG    8,1    97248      914458 /lib/x86_64-linux-gnu/libnsl-2.15.so\nbash    13841 ikegami  mem    REG    8,1    35680      914035 /lib/x86_64-linux-gnu/libnss_compat-2.15.so\nbash    13841 ikegami  mem    REG    8,1  1811128      914019 /lib/x86_64-linux-gnu/libc-2.15.so\nbash    13841 ikegami  mem    REG    8,1    14768      914453 /lib/x86_64-linux-gnu/libdl-2.15.so\nbash    13841 ikegami  mem    REG    8,1   159200      914028 /lib/x86_64-linux-gnu/libtinfo.so.5.9\nbash    13841 ikegami  mem    REG    8,1   149280      914450 /lib/x86_64-linux-gnu/ld-2.15.so\nbash    13841 ikegami    0u   CHR  136,3      0t0           6 /dev/pts/3\nbash    13841 ikegami    1u   CHR  136,3      0t0           6 /dev/pts/3\nbash    13841 ikegami    2u   CHR  136,3      0t0           6 /dev/pts/3\nbash    13841 ikegami  255u   CHR  136,3      0t0           6 /dev/pts/3\n</code></pre>\n"}], "owner": {"reputation": 4651, "user_id": 860522, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/vkbK1.jpg?s=128&g=1", "display_name": "OneSolitaryNoob", "link": "https://stackoverflow.com/users/860522/onesolitarynoob"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 183, "favorite_count": 0, "accepted_answer_id": 27914293, "answer_count": 1, "score": 0, "last_activity_date": 1421123335, "creation_date": 1421116519, "question_id": 27914107, "link": "https://stackoverflow.com/questions/27914107/get-file-descriptor-from-filename-in-perl", "title": "Get file descriptor from filename in Perl", "body": "<p>I am using a legacy lib in Perl which is leaking file descriptors (I don't have access to the C source)</p>\n\n<p>I know the name of the file the code is opening,  but I don't know the file descriptor.     Is there any way I can determine the file descriptor so I can close it? </p>\n"}, {"tags": ["perl", "subroutine", "lexical", "perl5.18"], "answers": [{"comments": [{"owner": {"reputation": 121105, "user_id": 2766176, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/edd8638efe875601bfe394a8aea5b16d?s=128&d=identicon&r=PG", "display_name": "brian d foy", "link": "https://stackoverflow.com/users/2766176/brian-d-foy"}, "edited": false, "score": 0, "creation_date": 1421116427, "post_id": 27914082, "comment_id": 44227396, "body": "Ah hell. I knew I should have tried the latest bleed but I was lazy. How does it pass the tests in earlier perls though?"}, {"owner": {"reputation": 1302, "user_id": 10478, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7200bb35f7b419db707cd1c4d194c9a1?s=128&d=identicon&r=PG", "display_name": "rjbs", "link": "https://stackoverflow.com/users/10478/rjbs"}, "reply_to_user": {"reputation": 121105, "user_id": 2766176, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/edd8638efe875601bfe394a8aea5b16d?s=128&d=identicon&r=PG", "display_name": "brian d foy", "link": "https://stackoverflow.com/users/2766176/brian-d-foy"}, "edited": false, "score": 0, "creation_date": 1421117090, "post_id": 27914082, "comment_id": 44227560, "body": "Sorry, I&#39;m not sure which tests you mean.  lexsub.t didn&#39;t have sort tests in v5.20.0, for example: <a href=\"https://github.com/Perl/perl5/blob/v5.20.0/t/op/lexsub.t\" rel=\"nofollow noreferrer\">github.com/Perl/perl5/blob/v5.20.0/t/op/lexsub.t</a>"}, {"owner": {"reputation": 121105, "user_id": 2766176, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/edd8638efe875601bfe394a8aea5b16d?s=128&d=identicon&r=PG", "display_name": "brian d foy", "link": "https://stackoverflow.com/users/2766176/brian-d-foy"}, "edited": false, "score": 0, "creation_date": 1421120878, "post_id": 27914082, "comment_id": 44228343, "body": "Ah, I was looking at the current source. Okay, that explains that. Will these fixes be backported to the current officially supported versions of Perl?"}, {"owner": {"reputation": 1302, "user_id": 10478, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7200bb35f7b419db707cd1c4d194c9a1?s=128&d=identicon&r=PG", "display_name": "rjbs", "link": "https://stackoverflow.com/users/10478/rjbs"}, "reply_to_user": {"reputation": 121105, "user_id": 2766176, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/edd8638efe875601bfe394a8aea5b16d?s=128&d=identicon&r=PG", "display_name": "brian d foy", "link": "https://stackoverflow.com/users/2766176/brian-d-foy"}, "edited": false, "score": 0, "creation_date": 1421159322, "post_id": 27914082, "comment_id": 44245656, "body": "I don&#39;t think so.  In theory, we backport bugfixes in experimental features when they &quot;can&#39;t&quot; break code not using those features, but I&#39;m guessing this would be borderline.  I&#39;ll ask Steve Hay, the v5.20 manager, his opinion."}, {"owner": {"reputation": 121105, "user_id": 2766176, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/edd8638efe875601bfe394a8aea5b16d?s=128&d=identicon&r=PG", "display_name": "brian d foy", "link": "https://stackoverflow.com/users/2766176/brian-d-foy"}, "edited": false, "score": 0, "creation_date": 1421189536, "post_id": 27914082, "comment_id": 44263603, "body": "If you decide not to fix it (and in 5.18 too), how about a doc patch for the next release noting it&#39;s failure to work?"}, {"owner": {"reputation": 1302, "user_id": 10478, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7200bb35f7b419db707cd1c4d194c9a1?s=128&d=identicon&r=PG", "display_name": "rjbs", "link": "https://stackoverflow.com/users/10478/rjbs"}, "reply_to_user": {"reputation": 121105, "user_id": 2766176, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/edd8638efe875601bfe394a8aea5b16d?s=128&d=identicon&r=PG", "display_name": "brian d foy", "link": "https://stackoverflow.com/users/2766176/brian-d-foy"}, "edited": false, "score": 0, "creation_date": 1424984280, "post_id": 27914082, "comment_id": 45787156, "body": "This &quot;known bug&quot; report was added in 78dc438 and is in the docs for v5.20.2.  I&#39;ve just cherry picked it to maint-5.18, and it will be in the next 5.18 release, if any."}], "tags": [], "owner": {"reputation": 1302, "user_id": 10478, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7200bb35f7b419db707cd1c4d194c9a1?s=128&d=identicon&r=PG", "display_name": "rjbs", "link": "https://stackoverflow.com/users/10478/rjbs"}, "is_accepted": true, "score": 13, "last_activity_date": 1421116361, "creation_date": 1421116361, "answer_id": 27914082, "question_id": 27913932, "link": "https://stackoverflow.com/questions/27913932/does-perl-v5-18s-sort-understand-lexical-subroutines/27914082#27914082", "title": "Does Perl v5.18&#39;s sort understand lexical subroutines?", "body": "<p>I'd like to say that this was working in v5.17.x and then got broken, but it looks like everyone missed it, and I missed even verifying that it worked.  So\u2026 it doesn't.  Or, much more happily, it <em>didn't.</em>  This was fixed in:</p>\n\n<pre><code>commit 2872f91877d2b05fa39d7cd030f43cd2ebc6b046\nAuthor: Father Chrysostomos &lt;sprout@cpan.org&gt;\nDate:   Tue Sep 16 13:10:38 2014 -0700\n\n    Make sort bareword respect lexical subs\n\n\u2014something I completely missed when implementing them.\n</code></pre>\n\n<p>\u2026and since v5.21.4, this has worked as expected and promised.</p>\n"}], "owner": {"reputation": 121105, "user_id": 2766176, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/edd8638efe875601bfe394a8aea5b16d?s=128&d=identicon&r=PG", "display_name": "brian d foy", "link": "https://stackoverflow.com/users/2766176/brian-d-foy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 323, "favorite_count": 0, "accepted_answer_id": 27914082, "answer_count": 1, "score": 9, "last_activity_date": 1437262524, "creation_date": 1421115059, "last_edit_date": 1495542588, "question_id": 27913932, "link": "https://stackoverflow.com/questions/27913932/does-perl-v5-18s-sort-understand-lexical-subroutines", "title": "Does Perl v5.18&#39;s sort understand lexical subroutines?", "body": "<p>This is fixed in Perl v5.22.</p>\n\n<hr>\n\n<p>Does Perl v5.18's lexical subroutines with <a href=\"http://perldoc.perl.org/functions/sort.html\" rel=\"nofollow noreferrer\">sort</a>? I finally had a use for them today where I had a complicated sorting routine that depends on the current position in the data structure to look at deeper parts.</p>\n\n<p>Here's a small program:</p>\n\n<pre><code>use v5.18;\nuse feature qw(lexical_subs);\nno warnings qw(experimental::lexical_subs);\n\nmy sub by_numbers { $a &lt;=&gt; $b }\n\nmy @sorted = sort by_numbers qw( 4 8 2 3 0 5 7 6 1 9 );\n\nsay \"sorted: @sorted\";\n</code></pre>\n\n<p>Apparently sort knows nothing about this because it is still looking in <code>%main::</code> for the named subroutine:</p>\n\n<pre><code>% perl5.18.2 test.pl\nUndefined sort subroutine \"main::by_numbers\" called at test.pl line 7.\n\n% perl5.20.1 test.pl\nUndefined sort subroutine \"main::by_numbers\" called at test.pl line 7.\n</code></pre>\n\n<p>I'm a bit disappointed because this is the first use case that <a href=\"https://stackoverflow.com/users/10478/rjbs\">rjbs</a> uses in <a href=\"http://rjbs.manxome.org/rubric/entry/2016\" rel=\"nofollow noreferrer\">lexical subroutines in perl 5</a>.</p>\n\n<hr />\n\n<p><em>This part doesn't matter because I looked at the current version of the test instead of the v5.18 version.</em></p>\n\n<p>I look it <em>t/op/lexsub.t</em> <a href=\"https://github.com/Perl/perl5/blob/blead/t/op/lexsub.t\" rel=\"nofollow noreferrer\">in the perl source</a>, I find three tests that involve <a href=\"http://perldoc.perl.org/functions/sort.html\" rel=\"nofollow noreferrer\">sort</a>. They fail when run in isolation, and differ in a major way: there's a defined subroutine of the same name in the symbol table (as rjbs notes, these tests come from the current source and were not present in the affected stable releases.):</p>\n\n<pre><code>use v5.18;\nuse feature qw(lexical_subs);\nno warnings qw(experimental::lexical_subs);\n\nuse Test::More;\n\nsub _cmp { $a cmp $b }\nsub bar::_cmp { $b cmp $a }\n{\n  package bar;\n  our sub _cmp;\n  package main;\n  is join(\" \", sort _cmp split //, 'oursub'), 'u u s r o b', 'sort our_sub'\n}\n\n\n{\n  state sub _cmp { $b cmp $a }\n  is join(\" \", sort _cmp split //, 'lexsub'), 'x u s l e b',\n    'sort state_sub LIST'\n}\n\n{\n  my sub _cmp { $b cmp $a }\n  is join(\" \", sort _cmp split //, 'lexsub'), 'x u s l e b',\n    'sort my_sub LIST'\n}\n</code></pre>\n\n<p><a href=\"http://perldoc.perl.org/functions/sort.html\" rel=\"nofollow noreferrer\">sort</a> completely ignores the lexical subroutines in all cases (for perls v5.18 and v5.20):</p>\n\n<pre><code>not ok 1 - sort our_sub\n#   Failed test 'sort our_sub'\n#   at test.pl line 29.\n#          got: 'b o r s u u'\n#     expected: 'u u s r o b'\nnot ok 2 - sort state_sub LIST\n#   Failed test 'sort state_sub LIST'\n#   at test.pl line 35.\n#          got: 'b e l s u x'\n#     expected: 'x u s l e b'\nnot ok 3 - sort my_sub LIST\n#   Failed test 'sort my_sub LIST'\n#   at test.pl line 41.\n#          got: 'b e l s u x'\n#     expected: 'x u s l e b'\n# Tests were run but no plan was declared and done_testing() was not seen.\n</code></pre>\n\n<p>Besides this testing being problematic since it fails to isolate the environment, it's also tough to tell what the tester is doing and how much of the previous, far away setup each test demands. The tests themselves are lightly documented, if at all.</p>\n\n<hr/>\n\n<p><em>back to stuff mattering</em></p>\n\n<p>Am I missing something here? It seems this never worked. The trick then, is what in the test file allows it to pass?</p>\n\n<p>Please don't suggest workarounds. That's not why I'm asking.</p>\n"}, {"tags": ["regex", "perl", "shell", "awk", "sed"], "comments": [{"owner": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "edited": false, "score": 0, "creation_date": 1421107587, "post_id": 27912791, "comment_id": 44225179, "body": "Not exactly, the problem is you are using regexp constructs when what you want to operate on are strings. You cannot do that with sed as it ONLY operates on regexps, I expect perl does have some constructs to handle strings but those would not be the constructs you are using."}], "answers": [{"comments": [{"owner": {"reputation": 169, "user_id": 4447265, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/pWYgw.jpg?s=128&g=1", "display_name": "jbord39", "link": "https://stackoverflow.com/users/4447265/jbord39"}, "edited": false, "score": 1, "creation_date": 1421107722, "post_id": 27912900, "comment_id": 44225225, "body": "Awesome thanks for the solution.  Any chance you could explain the syntax used or point me to a reference?"}, {"owner": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "reply_to_user": {"reputation": 169, "user_id": 4447265, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/pWYgw.jpg?s=128&g=1", "display_name": "jbord39", "link": "https://stackoverflow.com/users/4447265/jbord39"}, "edited": false, "score": 0, "creation_date": 1421108028, "post_id": 27912900, "comment_id": 44225320, "body": "man awk and look for the index() and substr() functions. Also I highly recommend the book Effective Awk Programming by Arnold Robbins."}, {"owner": {"reputation": 9362, "user_id": 2885763, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/l4VVG.jpg?s=128&g=1", "display_name": "NeronLeVelu", "link": "https://stackoverflow.com/users/2885763/neronlevelu"}, "edited": false, "score": 0, "creation_date": 1421133705, "post_id": 27912900, "comment_id": 44231992, "body": "@Ed Morton: I just try with special char <code>find=&#39;$1&#39;;replace=&#39;$2&#39;</code> and no replacement of<code>$1</code> in <code>$2</code> on my AIX (KSH). Do you think it is due to my shell behaviour or limitation of the awk like in sed ?"}, {"owner": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "edited": false, "score": 0, "creation_date": 1421152929, "post_id": 27912900, "comment_id": 44241801, "body": "It is not a limitation of awk, nor would any shell I know of have any issue. There is simply nothing special about those characters in strings. Are you setting awk variables or shell variables with those statements? Did you literally want <code>find</code> to have the value <code>$1</code> (i.e. a dollar sign and then the digit <code>1</code>) or did you want it to contain the value of the first positional parameter of the shell (in which case you&#39;d have to use <code>find=&quot;$1&quot;</code> with double quotes, not single, to allow the shell to expand <code>$1</code>) or something else?"}, {"owner": {"reputation": 9362, "user_id": 2885763, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/l4VVG.jpg?s=128&g=1", "display_name": "NeronLeVelu", "link": "https://stackoverflow.com/users/2885763/neronlevelu"}, "edited": false, "score": 0, "creation_date": 1421157075, "post_id": 27912900, "comment_id": 44244216, "body": "I put the litteral <code>$1</code> (and also a <code>$2</code> for test) in a line of the texte file and try with the value of find as show (looking litteral <code>$1</code> and not content of a first eventual argument). Intersted because this is hard to handle all this kind of special char in sed and need preparation of value before use in sed itself."}, {"owner": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "edited": false, "score": 0, "creation_date": 1421159272, "post_id": 27912900, "comment_id": 44245619, "body": "There should be no problem with that. Look: <code>$ echo &#39;a$1b&#39; | awk -v o=&#39;$1&#39; -v n=&#39;$2&#39; &#39;s=index($0,o){$0=substr($0,1,s-1) n substr($0,s+length(o))}1&#39;</code> outputs <code>a$2b</code>. If what you are doing isn&#39;t behaving as you&#39;d expect, you&#39;re doing something wrong so post a question so we can see what it is and fix it."}, {"owner": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "reply_to_user": {"reputation": 169, "user_id": 4447265, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/pWYgw.jpg?s=128&g=1", "display_name": "jbord39", "link": "https://stackoverflow.com/users/4447265/jbord39"}, "edited": false, "score": 0, "creation_date": 1421168942, "post_id": 27912900, "comment_id": 44252278, "body": "@jbord39 I see from your new question <a href=\"http://stackoverflow.com/q/27927343/1745001\">stackoverflow.com/q/27927343/1745001</a> that you are using this solution. Please click on the check mark next to it if this is your accepted solution."}], "tags": [], "owner": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "is_accepted": true, "score": 2, "last_activity_date": 1421107310, "creation_date": 1421107310, "answer_id": 27912900, "question_id": 27912791, "link": "https://stackoverflow.com/questions/27912791/search-and-replace-shell-variable-with-multiline-shell-variable/27912900#27912900", "title": "Search and replace shell variable with multiline shell variable", "body": "<p>This will work for any values of find or replace:</p>\n\n<pre><code>$ cat file\nfoo\ntype result input1 another_input random_input&lt;10&gt; / name\nbar\n\n$ awk -v find=\"$find\" -v replace=\"$replace\" 's=index($0,find){$0=substr($0,1,s-1) replace substr($0,s+length(find))}1' file\nfoo\n.TAG name\nresult input1 random_input / name1\nrandom_input&lt;10&gt; input1 another_input / name2\n.NTAG\nbar\n</code></pre>\n\n<p>if <code>find</code> is always one whole line it can be simplified, e.g. this might be all you need:</p>\n\n<pre><code>$ awk -v find=\"$find\" -v replace=\"$replace\" '$0==find{$0=replace}1' file\nfoo\n.TAG name\nresult input1 random_input / name1\nrandom_input&lt;10&gt; input1 another_input / name2\n.NTAG\nbar\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "edited": false, "score": 0, "creation_date": 1421120154, "post_id": 27914028, "comment_id": 44228200, "body": "There&#39;s a couple dozen ways in which that can fail depending on the contents of <code>find</code> and/or <code>replace</code>. You cannot do this robustly with sed."}], "tags": [], "owner": {"reputation": 7503, "user_id": 3874768, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/nmQTg.jpg?s=128&g=1", "display_name": "repzero", "link": "https://stackoverflow.com/users/3874768/repzero"}, "is_accepted": false, "score": 0, "last_activity_date": 1421116630, "last_edit_date": 1421116630, "creation_date": 1421115910, "answer_id": 27914028, "question_id": 27912791, "link": "https://stackoverflow.com/questions/27912791/search-and-replace-shell-variable-with-multiline-shell-variable/27914028#27914028", "title": "Search and replace shell variable with multiline shell variable", "body": "<p>restructure your variable to read</p>\n\n<pre><code>replace=\".TAG name\\nresult input1 random_input / name1\\nrandom_input&lt;10&gt; input1 another_input / name2\\n.NTAG\"\n</code></pre>\n\n<p>or restructure it like this</p>\n\n<pre><code>replace='.TAG name\\\n    result input1 random_input / name1\\\n    random_input&lt;10&gt; input1 another_input / name2\\\n    .NTAG'\n</code></pre>\n\n<p>Also your delimiter is causing conflict with your variable <code>replace</code> characters since there are <code>/</code> in your variable </p>\n\n<p>you can try <code>#</code> as your delimiter or any other char that is not in your variable</p>\n\n<pre><code> sed \"s#$find#$replace#g\" text_file\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "edited": false, "score": 1, "creation_date": 1421154898, "post_id": 27916694, "comment_id": 44242905, "body": "There&#39;s many values of <code>find</code> and/or <code>replace</code> that&#39;d cause that script to fail by either not replacing <code>find</code> when it should, or by replacing it with the wrong thing, or by producing a syntax error. I&#39;m not sure that just saying it&#39;s not bullet proof captures how fragile it really is and unfortunately it might produce the expected output for some sample input set the OP tests it against so (s)he might think it&#39;s a robust solution and then go execute it on their real data and completely mess it up."}, {"owner": {"reputation": 9362, "user_id": 2885763, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/l4VVG.jpg?s=128&g=1", "display_name": "NeronLeVelu", "link": "https://stackoverflow.com/users/2885763/neronlevelu"}, "reply_to_user": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "edited": false, "score": 1, "creation_date": 1421157357, "post_id": 27916694, "comment_id": 44244388, "body": "Totaly agree, there is no securisation except direct special char. Securization will depend of several parameter (OS/Sell, source of value) but it will work without lot of problem with data like the provided sample."}], "tags": [], "owner": {"reputation": 9362, "user_id": 2885763, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/l4VVG.jpg?s=128&g=1", "display_name": "NeronLeVelu", "link": "https://stackoverflow.com/users/2885763/neronlevelu"}, "is_accepted": false, "score": 0, "last_activity_date": 1421133156, "creation_date": 1421133156, "answer_id": 27916694, "question_id": 27912791, "link": "https://stackoverflow.com/questions/27912791/search-and-replace-shell-variable-with-multiline-shell-variable/27916694#27916694", "title": "Search and replace shell variable with multiline shell variable", "body": "<p>one way with sed, quick and dirty so not bullet proof like the awk of @Ed Morton</p>\n\n<pre><code>find_sed=\"$( printf \"%s\" \"${find}\" | sed 's/[^0-9(){}]/\\\\&amp;/g' )\"\nreplace_sed=\"$( printf \"%s\" \"${replace}\" | sed \"s/[&amp;\\\\]/\\\\/g;s/\\n/\\\\&amp;/g' )\"\n\nsed \"s/${find_sed}/${replace_sed}/g\" YourFile\n</code></pre>\n\n<ul>\n<li>Could be a one line with internal substitution instead of variable, but more explicit like this</li>\n<li>posix version ( <code>--posix</code> with GNU sed), if not posix, adapt <code>[^0-9(){}]</code> depending your special character that use a escape char for special meaning like <code>\\+\\n\\d\\</code></li>\n</ul>\n"}], "owner": {"reputation": 169, "user_id": 4447265, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/pWYgw.jpg?s=128&g=1", "display_name": "jbord39", "link": "https://stackoverflow.com/users/4447265/jbord39"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1085, "favorite_count": 1, "accepted_answer_id": 27912900, "answer_count": 3, "score": 1, "last_activity_date": 1421133156, "creation_date": 1421106726, "question_id": 27912791, "link": "https://stackoverflow.com/questions/27912791/search-and-replace-shell-variable-with-multiline-shell-variable", "title": "Search and replace shell variable with multiline shell variable", "body": "<p>I know there are lots of similar questions but, I guess because of the formatting of the search/replace variables they are not working for my situation.</p>\n\n<p>The overall script I am working on will read a text file (using combinations of grep and awk) to create two shell variables, $find and $replace.  $find is a single line string containing all manner of characters.  $replace is a multiline string containing all manner of characters.</p>\n\n<p>example:</p>\n\n<pre><code>echo \"$find\"\n</code></pre>\n\n<p>returns</p>\n\n<pre><code>type result input1 another_input random_input&lt;10&gt; / name\n</code></pre>\n\n<p>and</p>\n\n<pre><code>echo \"$replace\"\n</code></pre>\n\n<p>returns</p>\n\n<pre><code>.TAG name\nresult input1 random_input / name1\nrandom_input&lt;10&gt; input1 another_input / name2\n.NTAG\n</code></pre>\n\n<p>Now I just need to substitute $find with $replace.  I have tried sed and perl but it fails.</p>\n\n<p>Tried (among a lot of other stuff)</p>\n\n<pre><code>perl -e -i.bak \"s/$find/$replace/g\" text.file\nperl -e -i.bak 's,\"'$find'\",\"'$replace'\",g' text.file\nperl -e -i.bak \"s|$find|$replace|g\" text.file\n</code></pre>\n\n<p>and</p>\n\n<pre><code>sed -i \"s/$find/$replace/g\" text.file\n</code></pre>\n\n<p>My guess is the problems are caused by some character in the string being interpreted as special characters.</p>\n\n<p>Any help is appreciated!</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1421102863, "post_id": 27912027, "comment_id": 44223664, "body": "Are you absolutely sure that exists? Does a <code>-e</code> test work?"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1421160334, "post_id": 27912027, "comment_id": 44246403, "body": "It would be a better test if your hard-coded file name was <code>BE_Read01_f2-1-CV.TextGrid</code>. See if that works with your <code>while</code> loop removed. By the way, you are adding a second <code>-CV</code> to your file name when you define <code>$gridfile</code>. Your substitution removes <code>.TextGrid</code> from the end, and you put back <code>-CV.TextGrid</code>."}], "answers": [{"comments": [{"owner": {"reputation": 61610, "user_id": 725418, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/82ac2dc3e1ad4b7187f245c416528df9?s=128&d=identicon&r=PG", "display_name": "TLP", "link": "https://stackoverflow.com/users/725418/tlp"}, "edited": false, "score": 1, "creation_date": 1421105267, "post_id": 27912407, "comment_id": 44224498, "body": "He does not need to add <code>die</code> statements, he is using <code>autodie</code>."}, {"owner": {"reputation": 1, "user_id": 4447123, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bbd627fd3bb02fc4d1a7ccb1a8ed9ae1?s=128&d=identicon&r=PG&f=1", "display_name": "Sasha", "link": "https://stackoverflow.com/users/4447123/sasha"}, "edited": false, "score": 0, "creation_date": 1421183325, "post_id": 27912407, "comment_id": 44260484, "body": "Hi - thanks very much for your quick response. I realised after reading your suggestions that I had the &quot;-CV&quot; part of the file extension in the wrong place... it&#39;s working now! Thank you also for the other suggestions about how to run it without specifying the directory."}], "tags": [], "owner": {"reputation": 41846, "user_id": 926143, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/3396173c3d22988be1a0732d184902aa?s=128&d=identicon&r=PG", "display_name": "7stud", "link": "https://stackoverflow.com/users/926143/7stud"}, "is_accepted": false, "score": 0, "last_activity_date": 1421109042, "last_edit_date": 1421109042, "creation_date": 1421104533, "answer_id": 27912407, "question_id": 27912027, "link": "https://stackoverflow.com/questions/27912027/perl-cant-find-file/27912407#27912407", "title": "Perl can&#39;t find file", "body": "<p>From your error message, it is apparent that the line causing the error is this line:</p>\n\n<pre><code>open(my $syl, \"&lt;\", \"$dir/${file}.par\");\n</code></pre>\n\n<blockquote>\n  <p>it keeps saying there is no such file or directory - even though I'm sure there is.</p>\n</blockquote>\n\n<p>You can prove to yourself that no such file exists by copying the path in the error message: </p>\n\n<blockquote>\n  <p>Can't open\n  '<strong>/Users/sashacalhoun/Documents/supervision/tariq/Syllables/BE_Read01_f2-1-CV.par</strong>'\n  for reading: 'No such file or directory' at ./get_syl.pl line 36</p>\n</blockquote>\n\n<p>and doing this:</p>\n\n<pre><code>$ ls /Users/sashacalhoun/Documents/supervision/tariq/Syllables/BE_Read01_f2-1-CV.par \n</code></pre>\n\n<p>And, instead of constructing paths yourself, you should consider using File::Spec, etc.:</p>\n\n<pre><code>use File::Spec::Functions;\n\nmy $path = catfile $dirname, $fname;\n</code></pre>\n\n<p>And, you should probably check whether the filename is a file or directory before constructing your path:</p>\n\n<pre><code>if (-f $path -r $path) { #then it's a file that is readable...\n   #Here you might want to skip files whose names start with a '.', i.e. hidden files\n\n}\n</code></pre>\n\n<p>And, your debugging print statement should be this:</p>\n\n<pre><code>my $path = \"$dir/$file.par\";\nprint \"$path\\n\";\n\nopen(my $syl, \"&lt;\", \"$path.par\");\n</code></pre>\n\n<p>By the way, if you don't like typing \\n after every print statement, you can use say():</p>\n\n<pre><code>say \"After printing this text, perl automatically adds a '\\n' to the end of the output\";\n</code></pre>\n\n<p>You do have to employ a use statement for say() to work, e.g.</p>\n\n<pre><code>use 5.010;\n</code></pre>\n\n<p><strike>And, you should add a die() clause to your opendir()/open() statements:</p>\n\n<p>opendir(my $DIR, $dir) \n    or die \"Couldn't open $dir: $!\";</strike></p>\n"}], "owner": {"reputation": 1, "user_id": 4447123, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bbd627fd3bb02fc4d1a7ccb1a8ed9ae1?s=128&d=identicon&r=PG&f=1", "display_name": "Sasha", "link": "https://stackoverflow.com/users/4447123/sasha"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1235, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1421109042, "creation_date": 1421102683, "last_edit_date": 1421103013, "question_id": 27912027, "link": "https://stackoverflow.com/questions/27912027/perl-cant-find-file", "title": "Perl can&#39;t find file", "body": "<p>I am a relatively infrequent user of Perl. I have written a script that takes two input files with the same name but different extensions, processes them and outputs a third file. It works when I specify the  name of the file, but I want it to search for all relevant files in a directory and process all of them. However, when I do this it keeps saying there is no such file or directory - even though I'm sure there is. I've looked at all the relevant pages on this site and tried the suggestions there, but it still doesn't work. I'm stumped.</p>\n\n<p>Here is the code, missing the processing of the files themselves, as that is long and not relevant.</p>\n\n<pre><code>use strict;\nuse warnings;\nuse autodie;\n\n#specify single file - works when this is not commented and the loops below are\n#my $file = \"BE_Read01_f2-2\";\n#on a Mac\nmy $dir = \"/Users/sashacalhoun/Documents/supervision/tariq/Syllables\";\nopendir(my $dh, $dir);\nwhile (my $file = readdir($dh)) {\n    if($file=~s/(.+-CV)\\.TextGrid/$1/) {\n        print \"$file\\n\";\n        open(my $syl, \"&lt;\", \"$dir/${file}.par\");\n        while(my $line=&lt;$syl&gt;) {\n            #processes this file - not included\n        }\n        close($syl);\n\n        my $gridfile = \"$file-CV.TextGrid\";\n        my $outfile =  \"$file-syl.TextGrid\";\n\n        open(my $grid, \"&lt;\", $gridfile);\n        open(my $out, \"&gt;\", $outfile);\n\n        while(my $line=&lt;$grid&gt;) {\n            print $out $line;\n            # other processing of this file\n        }\n\n        close($grid);\n        close($out);\n    }\n}\n</code></pre>\n\n<p>It says: <code>Can't open '/Users/sashacalhoun/Documents/supervision/tariq/Syllables/BE_Read01_f2-1-CV.par' for reading: 'No such file or directory' at ./get_syl.pl line 36</code></p>\n\n<p>Thanks very much for your help. </p>\n"}, {"tags": ["perl", "gnu", "perl-module", "cpan"], "comments": [{"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 4, "creation_date": 1421091082, "post_id": 27909309, "comment_id": 44218030, "body": "Finally, someone who didn&#39;t give up on CPAN just because they don&#39;t have root access. Kudos to you, sir!"}, {"owner": {"reputation": 297, "user_id": 2767160, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2c5824b8b7d379040321de0fb4739cf?s=128&d=identicon&r=PG", "display_name": "rusty", "link": "https://stackoverflow.com/users/2767160/rusty"}, "reply_to_user": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1421091119, "post_id": 27909309, "comment_id": 44218054, "body": "Haha, thank you. A difficult task at the time but worth it."}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 0, "creation_date": 1421092802, "post_id": 27909309, "comment_id": 44218943, "body": "I think it would make more sense for someone with root access to install the required libraries on the system(s) where your script needs to run. That&#39;s going to be a lot simpler and more reliable than copy-and-pasting the modules&#39; code into your script. (Convincing your manager might be an obstacle, though.)"}, {"owner": {"reputation": 297, "user_id": 2767160, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2c5824b8b7d379040321de0fb4739cf?s=128&d=identicon&r=PG", "display_name": "rusty", "link": "https://stackoverflow.com/users/2767160/rusty"}, "edited": false, "score": 0, "creation_date": 1421093439, "post_id": 27909309, "comment_id": 44219274, "body": "Yeah I agree, Keith. My manager could be convinced by sysadm may not be obliged to do so. I&#39;d rather explore my options first before going up the ladder for such a small PM."}, {"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 0, "creation_date": 1421093682, "post_id": 27909309, "comment_id": 44219411, "body": "can you say what the modules in question are?"}, {"owner": {"reputation": 297, "user_id": 2767160, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2c5824b8b7d379040321de0fb4739cf?s=128&d=identicon&r=PG", "display_name": "rusty", "link": "https://stackoverflow.com/users/2767160/rusty"}, "edited": false, "score": 0, "creation_date": 1421093754, "post_id": 27909309, "comment_id": 44219453, "body": "Just edited the post, forgot to mention them. Thanks!"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 2, "creation_date": 1421144531, "post_id": 27909309, "comment_id": 44237163, "body": "I think it&#39;s important to try to educate you manager and sysadm about the right approach to take here. Most of the power of Modern Perl is in CPAN modules. If you can&#39;t use CPAN modules easily then half of Perl&#39;s power to solve problems easily will be unavailable to you."}, {"owner": {"reputation": 297, "user_id": 2767160, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2c5824b8b7d379040321de0fb4739cf?s=128&d=identicon&r=PG", "display_name": "rusty", "link": "https://stackoverflow.com/users/2767160/rusty"}, "edited": false, "score": 0, "creation_date": 1421162780, "post_id": 27909309, "comment_id": 44248032, "body": "Yeah I know. Perl isn&#39;t widely used at my company but since my previous sysadm job used it so much I tend to write my scripts here in Perl as well. Worst case I can ask them and I am sure they could get it installed for me since my managers really want my scripts to work."}], "answers": [{"comments": [{"owner": {"reputation": 297, "user_id": 2767160, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2c5824b8b7d379040321de0fb4739cf?s=128&d=identicon&r=PG", "display_name": "rusty", "link": "https://stackoverflow.com/users/2767160/rusty"}, "edited": false, "score": 0, "creation_date": 1421091561, "post_id": 27909381, "comment_id": 44218292, "body": "I can do that but explicitly they want the script to run on it&#39;s own, independent my &#39;libs&#39; folder. Stripping the code down would help with size but not their goal. The only module I use (it has 2 dependencies that I include) is Text::Table, unsure if that info helps."}], "tags": [], "owner": {"reputation": 740, "user_id": 3622250, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SkFyQ.png?s=128&g=1", "display_name": "terary", "link": "https://stackoverflow.com/users/3622250/terary"}, "is_accepted": false, "score": 0, "last_activity_date": 1421091184, "creation_date": 1421091184, "answer_id": 27909381, "question_id": 27909309, "link": "https://stackoverflow.com/questions/27909309/giving-credit-for-perl-module/27909381#27909381", "title": "Giving Credit for Perl Module", "body": "<p>Can you reduce the unnecessary code (to satisfy your manager's concerns).  Leave in tact the needed code in the file it came in - and give the author's credit within that module/package.</p>\n\n<p>Eg: This was inspired (stolen) from Joe E Perl.</p>\n"}, {"comments": [{"owner": {"reputation": 297, "user_id": 2767160, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2c5824b8b7d379040321de0fb4739cf?s=128&d=identicon&r=PG", "display_name": "rusty", "link": "https://stackoverflow.com/users/2767160/rusty"}, "edited": false, "score": 0, "creation_date": 1421093199, "post_id": 27909610, "comment_id": 44219153, "body": "I tried installing it but I am getting error 255 during make. I even tried installing it on my home server... same error. Really confusing and unfortunate. Maybe I will keep playing with it."}, {"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 1, "creation_date": 1421093580, "post_id": 27909610, "comment_id": 44219352, "body": "error 255 from make just says there was an earlier error; you&#39;d need to look at the first error message to see what went wrong"}, {"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 2, "creation_date": 1421093652, "post_id": 27909610, "comment_id": 44219398, "body": "this is really the best solution for your situation; if you do pull stuff out of modules into your script, you risk breakage and give up on ever getting newer bug fixes for the code in question"}, {"owner": {"reputation": 297, "user_id": 2767160, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2c5824b8b7d379040321de0fb4739cf?s=128&d=identicon&r=PG", "display_name": "rusty", "link": "https://stackoverflow.com/users/2767160/rusty"}, "edited": false, "score": 0, "creation_date": 1421093789, "post_id": 27909610, "comment_id": 44219474, "body": "Yeah, makes sense. Just need to get it installed! Still working on it."}], "tags": [], "owner": {"reputation": 8202, "user_id": 58074, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/297b31165c5ef426c8fa89c3375b0d2a?s=128&d=identicon&r=PG", "display_name": "dsolimano", "link": "https://stackoverflow.com/users/58074/dsolimano"}, "is_accepted": false, "score": 2, "last_activity_date": 1421092042, "creation_date": 1421092042, "answer_id": 27909610, "question_id": 27909309, "link": "https://stackoverflow.com/questions/27909309/giving-credit-for-perl-module/27909610#27909610", "title": "Giving Credit for Perl Module", "body": "<p>Is using <a href=\"https://metacpan.org/pod/pp\" rel=\"nofollow\">PAR Packager</a> an option for you?  That would generate a standalone executable.</p>\n"}, {"comments": [{"owner": {"reputation": 3984, "user_id": 1801086, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ef4c0400ffff14d5e1c16ca3856c09ba?s=128&d=identicon&r=PG", "display_name": "tjd", "link": "https://stackoverflow.com/users/1801086/tjd"}, "edited": false, "score": 0, "creation_date": 1421161979, "post_id": 27920868, "comment_id": 44247504, "body": "Not being covered by a license does not <i>add</i> to your rights!  Any rights you have to somebody else&#39;s work are specified in the licenses or possibly by fair use, and commercial use is not a good start for claiming fair use rights."}, {"owner": {"reputation": 297, "user_id": 2767160, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2c5824b8b7d379040321de0fb4739cf?s=128&d=identicon&r=PG", "display_name": "rusty", "link": "https://stackoverflow.com/users/2767160/rusty"}, "edited": false, "score": 0, "creation_date": 1421222014, "post_id": 27920868, "comment_id": 44272701, "body": "Thanks Edward! Unfortunately I didn&#39;t have time to try using <code>Staticperl</code> but I do intend to in the future. I appreciate the help!"}], "tags": [], "owner": {"reputation": 439, "user_id": 2866527, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b5c4440345ec519dd606fc2375c5f426?s=128&d=identicon&r=PG&f=1", "display_name": "Edward", "link": "https://stackoverflow.com/users/2866527/edward"}, "is_accepted": false, "score": 1, "last_activity_date": 1421147749, "creation_date": 1421147749, "answer_id": 27920868, "question_id": 27909309, "link": "https://stackoverflow.com/questions/27909309/giving-credit-for-perl-module/27920868#27920868", "title": "Giving Credit for Perl Module", "body": "<p>Interesting question &amp; perspective. I don't understand what is against using libraries or modules, but I'll let your manager do the thinking ;-)</p>\n\n<p>Regarding copyright, you're best to consult a lawyer if you want to be sure, but as far as I understand it, you can combine the work of others provided you retain the copyright notices. The combined work <a href=\"http://www.gnu.org/licenses/license-list.html#PerlLicense\" rel=\"nofollow\">may not be covered by copyleft</a>, so you may be able to use it commercially (i.e., distribute it without disclosing the source). But do check with a lawyer.</p>\n\n<p>But, since you said you wanted to explore other ideas, <a href=\"https://metacpan.org/pod/distribution/App-Staticperl/bin/staticperl\" rel=\"nofollow\">App::Staticperl</a> may be a solution? I do not have experience with it, but I tried it with a simple example and got a working executable.</p>\n\n<p>App::Staticperl builds a stand-alone executable from the Perl interpreter with embedded CPAN modules. The steps I followed were roughly (you'll need to adapt, because obviously I couldn't test with your script):</p>\n\n<ol>\n<li>latest version of App::Staticperl is 1.43: <a href=\"https://cpan.metacpan.org/authors/id/M/ML/MLEHMANN/App-Staticperl-1.43.tar.gz\" rel=\"nofollow\">https://cpan.metacpan.org/authors/id/M/ML/MLEHMANN/App-Staticperl-1.43.tar.gz</a></li>\n<li>either install the module via CPAN, or simply extract bin/staticperl from the tar - it's a standalone script</li>\n<li>edit staticperl to change <code>EMAIL</code> and <code>CPAN</code> (optional, but you may want to change the CPAN mirror)</li>\n<li><code>./staticperl install</code> downloads and builds Perl; it ended with an error message on my box, but did produce a working Perl</li>\n<li><code>./staticperl cpan</code> enters an interactive CPAN prompt; <code>install Text::Table</code>, <code>install Term::ANSIColor</code>, and whatever else you need</li>\n<li><code>./staticperl mkapp my_app --boot path/to/your/script -MText::Table -MText::Aligner -MTerm::ANSIColor</code></li>\n<li>try the app: <code>./my_app</code> - it will most likely fail with an error message about missing modules; repeat the previous step and include the missing modules in the <code>-M</code> flags</li>\n</ol>\n\n<p>Good luck!</p>\n"}, {"comments": [{"owner": {"reputation": 297, "user_id": 2767160, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2c5824b8b7d379040321de0fb4739cf?s=128&d=identicon&r=PG", "display_name": "rusty", "link": "https://stackoverflow.com/users/2767160/rusty"}, "edited": false, "score": 0, "creation_date": 1421221978, "post_id": 27922475, "comment_id": 44272685, "body": "I selected this as the answers because appending it solved my issue. I would prefer using a package manager as suggested by others, but I could not install PAR:Packer due to compiler issues on multiple machines (which still perplexes me). I did not try using <code>Staticperl</code> as suggested by @Edward but I intend to explore it."}, {"owner": {"reputation": 1853, "user_id": 1005136, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9fa4e79e60474302c8225172649cbd35?s=128&d=identicon&r=PG", "display_name": "Alexander Hartmaier", "link": "https://stackoverflow.com/users/1005136/alexander-hartmaier"}, "edited": false, "score": 0, "creation_date": 1421654903, "post_id": 27922475, "comment_id": 44426815, "body": "Note that this is called &#39;fat packing&#39;. There are apps for this on CPAN which analyze your code for dependencies and build one large Perl programm which only needs a Perl interpreter. The one thing that doesn&#39;t work are XS modules that are compiled C code and therefore platform dependent."}], "tags": [], "owner": {"reputation": 98433, "user_id": 368630, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/107085826cfbb2700f535417a12c89cb?s=128&d=identicon&r=PG", "display_name": "David W.", "link": "https://stackoverflow.com/users/368630/david-w"}, "is_accepted": true, "score": 1, "last_activity_date": 1421152984, "creation_date": 1421152984, "answer_id": 27922475, "question_id": 27909309, "link": "https://stackoverflow.com/questions/27909309/giving-credit-for-perl-module/27922475#27922475", "title": "Giving Credit for Perl Module", "body": "<p>If the modules are pure Perl modules, you may be able to simply append the code (including those <code>package</code> statements) into your program. I'd also include the POD which would include the copyright statements and the names of the authors too. That should satisfy the Artistic License Requirement (but may not satisfy GNU licensing requirements).</p>\n\n<p>Another possibility is to use <a href=\"http://perlbrew.pl\" rel=\"nofollow\">Perlbrew</a> which will allow you to install a user version of Perl on the system. This way, you can install CPAN modules without needing Administrative permission, and you can tell other users to use Perlbrew too.</p>\n\n<p>I use it because I can install and switch between various versions of Perl which allows me to test my Perl scripts in various versions of Perl. I've also used it on our servers where I need a newer version of Perl or modules that weren't included in the standard release.</p>\n\n<p>You need to get your IT approval before installing Perlbrew, but a lot of times they're relieved that they no longer have to be bothered with maintaining and installing CPAN modules for your use.</p>\n"}], "owner": {"reputation": 297, "user_id": 2767160, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2c5824b8b7d379040321de0fb4739cf?s=128&d=identicon&r=PG", "display_name": "rusty", "link": "https://stackoverflow.com/users/2767160/rusty"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 210, "favorite_count": 0, "accepted_answer_id": 27922475, "answer_count": 4, "score": 10, "last_activity_date": 1421152984, "creation_date": 1421090878, "last_edit_date": 1421093744, "question_id": 27909309, "link": "https://stackoverflow.com/questions/27909309/giving-credit-for-perl-module", "title": "Giving Credit for Perl Module", "body": "<p>I wrote a script for my company and I am using some libraries I obtained from CPAN. My manager wanted me to consolidate and remove the extra libraries - which is a little funny because I include them for the script to work.</p>\n\n<p>A few notes:</p>\n\n<ul>\n<li>I do not have root access on this server nor can I request access</li>\n<li>To use CPAN modules w/o root I have them installed to my user directory</li>\n<li>To allow other users to run my scripts I usually include a folder called 'libs' and inside of my script's directory and in the script I have: <code>use 'libs';</code> at the top before I <code>use</code> my CPAN modules.</li>\n</ul>\n\n<p>The only solution I have right now is to literally put the contents of the perl modules inside of my perl script. However I want to give credit where it is due and also not get in trouble for including opensource code w/o proper credit to its authors and organizations.</p>\n\n<p>Therefore, how should I go about this? I am not trying to get away with anything.. I honestly want to go about doing this the right way.</p>\n\n<p>All three modules say \"licensed under the same terms as Perl itself\" but I feel like it shouldn't be this easy.</p>\n\n<p>I would also like to explore any other ideas too!</p>\n\n<p>The modules are:</p>\n\n<ul>\n<li>Text::Table</li>\n<li>Text::Aligner</li>\n<li>Term::ANSIColor</li>\n</ul>\n"}, {"tags": ["perl", "cpan"], "comments": [{"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 2, "creation_date": 1421089435, "post_id": 27908926, "comment_id": 44217136, "body": "possible duplicate of <a href=\"http://stackoverflow.com/questions/77695/how-do-i-set-up-a-local-cpan-mirror\">How do I set up a local CPAN mirror?</a>"}], "answers": [{"tags": [], "owner": {"reputation": 5099, "user_id": 406224, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9bc79fa6fa58e2a4f5e6c2f803cabc48?s=128&d=identicon&r=PG", "display_name": "oalders", "link": "https://stackoverflow.com/users/406224/oalders"}, "is_accepted": true, "score": 1, "last_activity_date": 1421249191, "last_edit_date": 1421249191, "creation_date": 1421248816, "answer_id": 27946336, "question_id": 27908926, "link": "https://stackoverflow.com/questions/27908926/install-cpan-modules-from-a-local-mirror-without-cpanmini/27946336#27946336", "title": "Install CPAN modules from a local mirror without CPAN::Mini", "body": "<p>If you just want a partial mirror of CPAN, you can do this easily with <a href=\"https://metacpan.org/pod/distribution/OrePAN2/script/orepan2-inject\" rel=\"nofollow\">OrePAN2</a>.</p>\n\n<pre><code>orepan2-inject --simple Module::Name /path/to/darkpan/\n</code></pre>\n\n<p>This will also generate on 02packages file for you, which CPAN clients can read.</p>\n\n<pre><code>orepan2-inject --simple Carton darkpan\nWrote 1 from Carton\n[INFO] Could not find useful meta from 'darkpan/authors/id/D/DU/DUMMY/Carton-    v1.0.12.tar.gz'\n[INFO] Scanning for provided modules...\n/tmp/foo \u2219 tree darkpan/\ndarkpan/\n\u251c\u2500\u2500 authors\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 id\n\u2502\u00a0\u00a0     \u2514\u2500\u2500 D\n\u2502\u00a0\u00a0         \u2514\u2500\u2500 DU\n\u2502\u00a0\u00a0             \u2514\u2500\u2500 DUMMY\n\u2502\u00a0\u00a0                 \u2514\u2500\u2500 Carton-v1.0.12.tar.gz\n\u251c\u2500\u2500 modules\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 02packages.details.txt.gz\n\u2514\u2500\u2500 orepan2-cache.json\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 121105, "user_id": 2766176, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/edd8638efe875601bfe394a8aea5b16d?s=128&d=identicon&r=PG", "display_name": "brian d foy", "link": "https://stackoverflow.com/users/2766176/brian-d-foy"}, "is_accepted": false, "score": 1, "last_activity_date": 1422190781, "last_edit_date": 1495540168, "creation_date": 1422190781, "answer_id": 28136670, "question_id": 27908926, "link": "https://stackoverflow.com/questions/27908926/install-cpan-modules-from-a-local-mirror-without-cpanmini/28136670#28136670", "title": "Install CPAN modules from a local mirror without CPAN::Mini", "body": "<p>CPAN::Mini uses LWP to fetch files. The meat of the problem is this simple line:</p>\n\n<pre><code>my $res = $self-&gt;{__lwp}-&gt;mirror($remote_uri, $local_file);\n</code></pre>\n\n<p>That's just the <code>mirror</code> from <a href=\"http://www.metacpan.org/module/LWP::UserAgent\" rel=\"nofollow noreferrer\">LWP::UserAgent</a>. Come up with a replacement method that uses IE instead, perhaps using <a href=\"http://www.metacpan.org/module/Win32::OLE\" rel=\"nofollow noreferrer\">Win32::OLE</a> to drive IE and there you are. <a href=\"http://www.metacpan.org/module/CPAN::Mini\" rel=\"nofollow noreferrer\">CPAN::Mini</a> could use a bit of dependency injection for the thing that fetches files.  </p>\n\n<p>There used to be a tool named Win32::Mechanize::IE, but it <a href=\"http://www.perlmonks.org/?node_id=1061372\" rel=\"nofollow noreferrer\">stopped working with the new IE8 security module</a>.</p>\n\n<p>Alternately, I would explore ways to make the internal LWP object look like it's IE. I don't know the details of your proxy or network, but I bet there are some magic headers or settings that you could fake from LWP. See, for instance, <a href=\"https://stackoverflow.com/q/12116244/2766176\">HTTPS Proxy and LWP::UserAgent</a>. I have to believe that more than IE gets to access the internet.</p>\n\n<p>As a last ditch effort, take some beer to the Windows admin with all the power. Make a friend and save some coding. :)</p>\n\n<hr>\n\n<p>I might have done the dependency injection work had I not discovered that the source has been perverted with Dist::Zilla nonsense. I've never particularly cared what tools people use as long as they don't force me to use the same ones and that the literal source code doesn't depend on requirements of an external tool.</p>\n\n<p>It's getting to the point that people are throwing away participation for a seat at the cool kids table by making the barrier to collaboration so high. I only make a stink of that because I don't think people realize the trade off. No one tells you when they decide to not help. They simply don't help and you don't realize you gave up all the hours they could have contributed.</p>\n"}], "owner": {"reputation": 18883, "user_id": 2612235, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/dpsjq.jpg?s=128&g=1", "display_name": "nowox", "link": "https://stackoverflow.com/users/2612235/nowox"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 418, "favorite_count": 0, "accepted_answer_id": 27946336, "answer_count": 2, "score": 0, "last_activity_date": 1422190781, "creation_date": 1421089282, "last_edit_date": 1422150032, "question_id": 27908926, "link": "https://stackoverflow.com/questions/27908926/install-cpan-modules-from-a-local-mirror-without-cpanmini", "title": "Install CPAN modules from a local mirror without CPAN::Mini", "body": "<p>In some computers in my company, only IE have access to Internet. So I would like to know if I can have a local copy of some CPAN modules in a local mirror. I heard of the <code>CPAN::Mini</code> module that can synchronize the local mirror with a public one. </p>\n\n<p>How can I manually download the modules I want in my mirror with IE and configure <code>cpan</code> to look locally for the modules?</p>\n\n<p><strong>EDIT</strong></p>\n\n<p>I cannot use CPAN::Mini or other similar tools because only IE has access to internet. I need to replicate my mirror through IE first. </p>\n"}, {"tags": ["perl", "user-interface", "button", "tcl", "tkx"], "answers": [{"comments": [{"owner": {"reputation": 7704, "user_id": 3964397, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/640272a326ae5f3cd89364b78f2108c9?s=128&d=identicon&r=PG", "display_name": "tjwrona1992", "link": "https://stackoverflow.com/users/3964397/tjwrona1992"}, "edited": false, "score": 0, "creation_date": 1421094171, "post_id": 27909758, "comment_id": 44219646, "body": "Okay that&#39;s exactly what I was wondering, but is there a way to center the text on a <code>ttk button</code>? When I use multiple lines of text and it aligns it all left it looks ugly."}, {"owner": {"reputation": 3984, "user_id": 1801086, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ef4c0400ffff14d5e1c16ca3856c09ba?s=128&d=identicon&r=PG", "display_name": "tjd", "link": "https://stackoverflow.com/users/1801086/tjd"}, "reply_to_user": {"reputation": 7704, "user_id": 3964397, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/640272a326ae5f3cd89364b78f2108c9?s=128&d=identicon&r=PG", "display_name": "tjwrona1992", "link": "https://stackoverflow.com/users/3964397/tjwrona1992"}, "edited": false, "score": 0, "creation_date": 1421094525, "post_id": 27909758, "comment_id": 44219821, "body": "Personally, I&#39;d reevaluate the design that places multi-line text in a button.  Finer control of <code>ttk</code> widgets can be exerted via the <code>-style</code> attribute."}, {"owner": {"reputation": 7704, "user_id": 3964397, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/640272a326ae5f3cd89364b78f2108c9?s=128&d=identicon&r=PG", "display_name": "tjwrona1992", "link": "https://stackoverflow.com/users/3964397/tjwrona1992"}, "edited": false, "score": 0, "creation_date": 1421094818, "post_id": 27909758, "comment_id": 44219965, "body": "Well I have a button that needs to fit in a relatively small space.  Even if it had its own way to wordwrap the text that would be useful.  Right now if I don&#39;t use &quot;\\n&quot; to make it cross multiple lines it will put it all in one line and stretch the display to fit it which does not look very good either."}, {"owner": {"reputation": 3984, "user_id": 1801086, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ef4c0400ffff14d5e1c16ca3856c09ba?s=128&d=identicon&r=PG", "display_name": "tjd", "link": "https://stackoverflow.com/users/1801086/tjd"}, "reply_to_user": {"reputation": 7704, "user_id": 3964397, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/640272a326ae5f3cd89364b78f2108c9?s=128&d=identicon&r=PG", "display_name": "tjwrona1992", "link": "https://stackoverflow.com/users/3964397/tjwrona1992"}, "edited": false, "score": 0, "creation_date": 1421095075, "post_id": 27909758, "comment_id": 44220087, "body": "You&#39;re sure you don&#39;t have room for a frame containing a button with minimal text and an accompanying label?"}, {"owner": {"reputation": 7704, "user_id": 3964397, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/640272a326ae5f3cd89364b78f2108c9?s=128&d=identicon&r=PG", "display_name": "tjwrona1992", "link": "https://stackoverflow.com/users/3964397/tjwrona1992"}, "edited": false, "score": 0, "creation_date": 1421095495, "post_id": 27909758, "comment_id": 44220302, "body": "The button has a few words on it that when aligned with everything else look better if they go across 2 lines.  Ultimately I would like the <code>ttk__button</code> function to center the text exactly like the <code>button</code> function does.  I&#39;m sure there is some other way I could make it look nice without doing this, but at this point i&#39;m just curious whether it can be done."}, {"owner": {"reputation": 7704, "user_id": 3964397, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/640272a326ae5f3cd89364b78f2108c9?s=128&d=identicon&r=PG", "display_name": "tjwrona1992", "link": "https://stackoverflow.com/users/3964397/tjwrona1992"}, "edited": false, "score": 3, "creation_date": 1421096706, "post_id": 27909758, "comment_id": 44220874, "body": "Thanks for the tip on using <code>style</code>! after playing around with it a bit I got it to work. <code>Tkx::ttk__style_configure(&#39;TButton&#39;, -justify =&gt; &#39;center&#39;);</code>"}], "tags": [], "owner": {"reputation": 3984, "user_id": 1801086, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ef4c0400ffff14d5e1c16ca3856c09ba?s=128&d=identicon&r=PG", "display_name": "tjd", "link": "https://stackoverflow.com/users/1801086/tjd"}, "is_accepted": true, "score": 5, "last_activity_date": 1421854133, "last_edit_date": 1421854133, "creation_date": 1421092649, "answer_id": 27909758, "question_id": 27907864, "link": "https://stackoverflow.com/questions/27907864/perl-tkx-what-is-the-difference-between-button-and-ttk-button/27909758#27909758", "title": "Perl Tkx, What is the Difference Between &quot;button&quot; and &quot;ttk__button&quot;?", "body": "<p><code>Button</code> is one of the, let's say, 'traditional' widgets.  The <code>ttk</code> family of widgets are more modern and are designed to pay attention to the display configuration of the Host OS.  If you want your app to blend in with your user's chosen 'theme' then use the <code>ttk</code> widgets.  On the other hand, if you like to do lots of work to fit in, or would like your application to stick out like a sore thumb, then by all means use the 'traditional' widgets.</p>\n\n<p>Finer control of <code>ttk</code> widgets can be exerted via the <code>-style</code> option.  You may want to look at the tutorial page @ <a href=\"http://www.tkdocs.com/tutorial/styles.html\" rel=\"nofollow\">http://www.tkdocs.com/tutorial/styles.html</a> .</p>\n\n<p>For what it's worth, buttons do not frequently contain multi-line text.  There are other widgets that are designed with text layout in mind.</p>\n\n<p>EDIT:</p>\n\n<p>From tjwrona1992's comment:\n<code>Tkx::ttk__style_configure('TButton', -justify =&gt; 'center');</code></p>\n"}, {"tags": [], "owner": {"reputation": 29951, "user_id": 8233, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/5ed2571484765d12fcb3230f235a8ecc?s=128&d=identicon&r=PG", "display_name": "Michael Carman", "link": "https://stackoverflow.com/users/8233/michael-carman"}, "is_accepted": false, "score": 2, "last_activity_date": 1421439367, "creation_date": 1421439367, "answer_id": 27992112, "question_id": 27907864, "link": "https://stackoverflow.com/questions/27907864/perl-tkx-what-is-the-difference-between-button-and-ttk-button/27992112#27992112", "title": "Perl Tkx, What is the Difference Between &quot;button&quot; and &quot;ttk__button&quot;?", "body": "<p>Tk has two classes of widgets: traditional and <a href=\"http://tktable.sourceforge.net/tile/\" rel=\"nofollow noreferrer\">tiled</a>. Traditional widgets are those that have been around since Tk's inception. Tiled widgets are relatively new. They emulate native widgets via support for themes. Many (but not all) widgets are available in both forms. Tile started as a separate library before being integrated into Tk 8.5 as <a href=\"http://www.tcl.tk/about/ttk.html\" rel=\"nofollow noreferrer\">Ttk</a>.</p>\n\n<p>Unfortunately, switching from traditional to tiled Tk widgets isn't as simple as adding a \"use ttk\" statement because traditional and tiled widgets don't necessarily have the same set of configuration options.</p>\n\n<p>In Tkx, The <code>ttk</code> prefix is used to specify the tiled version of a widget. The Tcl Tk wiki has a <a href=\"http://wiki.tcl.tk/11075\" rel=\"nofollow noreferrer\">comparison</a> of ttk widgets using various themes. (The \"classic\" theme matches the look &amp; feel of traditional Tk.) Here's how <code>button</code> and <code>ttk__button</code> render on my system (Win7):</p>\n\n<p><img src=\"https://i.stack.imgur.com/6RFjE.png\" alt=\"button vs ttk button\"></p>\n\n<p>Traditional widgets are more flexible. You can configure more attributes and do so on a per-widget basis. Tiled widgets look better (i.e. native) and make it easier to change the overall look &amp; feel of your application.</p>\n\n<p>Personally, I always use the ttk widgets when available.</p>\n"}], "owner": {"reputation": 7704, "user_id": 3964397, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/640272a326ae5f3cd89364b78f2108c9?s=128&d=identicon&r=PG", "display_name": "tjwrona1992", "link": "https://stackoverflow.com/users/3964397/tjwrona1992"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 981, "favorite_count": 0, "accepted_answer_id": 27909758, "answer_count": 2, "score": 5, "last_activity_date": 1421854133, "creation_date": 1421084844, "last_edit_date": 1421154177, "question_id": 27907864, "link": "https://stackoverflow.com/questions/27907864/perl-tkx-what-is-the-difference-between-button-and-ttk-button", "title": "Perl Tkx, What is the Difference Between &quot;button&quot; and &quot;ttk__button&quot;?", "body": "<p>I have been working on a GUI using Perl Tkx, and discovered that there are two separate functions you can use to create buttons. (<code>button</code> and <code>ttk__button</code>).</p>\n\n<p>So far the only difference I found is that the <code>button</code> function appears to center justify the text while the <code>ttk__button</code> function appears to left justify the text.</p>\n\n<hr>\n\n<p>Example using <code>button</code>:</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\n\nuse Tkx;\n\nmy $text = \"Hello\\nworld!\\n\\nThis is some text...\";\nmy $mw = Tkx::widget-&gt;new(\".\");\n\nmy $b = $mw-&gt;new_button(\n    -text =&gt; $text,\n    -command =&gt; sub { exit; },\n);\n$b-&gt;g_grid;\n\nTkx::MainLoop()\n</code></pre>\n\n<p>This script will center the text:</p>\n\n<p><img src=\"https://i.stack.imgur.com/O7jlE.png\" alt=\"Centered text\"></p>\n\n<hr>\n\n<p>Example using <code>ttk__button</code>:</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\n\nuse Tkx;\n\nmy $text = \"Hello\\nworld!\\n\\nThis is some text...\";\nmy $mw = Tkx::widget-&gt;new(\".\");\n\nmy $b = $mw-&gt;new_ttk__button(\n    -text =&gt; $text,\n    -command =&gt; sub { exit; },\n);\n$b-&gt;g_grid;\n\nTkx::MainLoop()\n</code></pre>\n\n<p>This script will left justify the text:</p>\n\n<p><img src=\"https://i.stack.imgur.com/u32Kl.png\" alt=\"Left justified text\"></p>\n\n<hr>\n\n<p>I was wondering what other differences there are between these two functions and whether there is any particular reason there are two separate functions that create buttons.  Is one of these typically better to use than the other?</p>\n\n<p>Also is there any way to center justify the text using the <code>ttk__button</code> function?</p>\n\n<p><strong>EDIT:</strong></p>\n\n<p>I added the \"Tcl\" tag to this since Perl Tkx is essentially built off of Tcl.  I'm pretty good with Perl but I am somewhat of a novice when it comes to Tcl.</p>\n\n<p>Although it may not seem like it at first glance, this is actually more of a Tcl question than a Perl question so I would love to hear an answer from someone who is experienced with Tcl.</p>\n\n<hr>\n\n<p><strong>NOTE:</strong></p>\n\n<p>To center text in a <code>ttk__button</code> add the following line to your code:</p>\n\n<p><code>Tkx::ttk__style_configure('TButton', -justify =&gt; 'center');</code></p>\n"}, {"tags": ["xml", "perl", "xml-simple"], "comments": [{"owner": {"reputation": 3724, "user_id": 3142963, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cb984a54fc82c443b2c9e34271d8787d?s=128&d=identicon&r=PG&f=1", "display_name": "nwk", "link": "https://stackoverflow.com/users/3142963/nwk"}, "edited": false, "score": 0, "creation_date": 1421082709, "post_id": 27907209, "comment_id": 44213750, "body": "Post an example of your XML as well."}, {"owner": {"reputation": 1959, "user_id": 297024, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/e226de73136907720bac240869006028?s=128&d=identicon&r=PG", "display_name": "dbonneville", "link": "https://stackoverflow.com/users/297024/dbonneville"}, "reply_to_user": {"reputation": 3724, "user_id": 3142963, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cb984a54fc82c443b2c9e34271d8787d?s=128&d=identicon&r=PG&f=1", "display_name": "nwk", "link": "https://stackoverflow.com/users/3142963/nwk"}, "edited": false, "score": 0, "creation_date": 1421082944, "post_id": 27907209, "comment_id": 44213885, "body": "@ nwk, I edited the post to include sample XML. Thanks."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1421083770, "post_id": 27907209, "comment_id": 44214379, "body": "If you weren&#39;t aware, please note that <a href=\"https://metacpan.org/module/XML::Simple\" rel=\"nofollow noreferrer\">the documentation for <code>XML::Simple</code></a> says, <i>&quot;The use of this module in new code is discouraged. Other modules are available which provide more straightforward and consistent interfaces. In particular, XML::LibXML is highly recommended. The major problems with this module are the large number of options and the arbitrary ways in which these options interact - often with unexpected results.&quot;</i> It misrepresents the XML structure in several ways, and an <code>XMLin</code> followed by <code>XMLout</code> will rarely reproduce the original."}, {"owner": {"reputation": 1959, "user_id": 297024, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/e226de73136907720bac240869006028?s=128&d=identicon&r=PG", "display_name": "dbonneville", "link": "https://stackoverflow.com/users/297024/dbonneville"}, "edited": false, "score": 0, "creation_date": 1421084367, "post_id": 27907209, "comment_id": 44214689, "body": "I know XML::Simple is not recommended. I was required to use it. I also found this thread which seems to be the issue and offer a solution: <a href=\"http://stackoverflow.com/questions/14841464/not-an-array-reference-when-using-perls-xmlsimple\" title=\"not an array reference when using perls xmlsimple\">stackoverflow.com/questions/14841464/&hellip;</a>"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1421084413, "post_id": 27907209, "comment_id": 44214706, "body": "Unrelated to your problem, <code>$xmltemp</code> is a particularly poor identifier for a variable. All variables are more or less temporary, and involving <code>temp</code> in their names just creates noise."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1421084608, "post_id": 27907209, "comment_id": 44214803, "body": "@dbonneville: Okay, a procedural requirement is hard to argue with. But if you are in a position to register your disapproval then I suggest you do so. The choice has already cost your time and ours because of the often arcane behaviour of the module. There is no doubt that it will cost very much more in the future."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1421084836, "post_id": 27907209, "comment_id": 44214918, "body": "If you can argue the toss, point out that <code>XML::Twig</code> is way nicer and generally produces better code."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 1, "creation_date": 1421085236, "post_id": 27907209, "comment_id": 44215111, "body": "@Sobrique: There are several very good Perl XML modules. <code>XML::Simple</code> has gained traction mainly through its namespace, although a better title could be <code>XML::Naive</code>. Personally, I alternate between <a href=\"https://metacpan.org/module/XML::LibXML\" rel=\"nofollow noreferrer\"><code>XML::LibXML</code></a> and <a href=\"https://metacpan.org/module/XML::Twig\" rel=\"nofollow noreferrer\"><code>XML::Twig</code></a> with a preference for the former. <a href=\"https://metacpan.org/module/XML::Smart\" rel=\"nofollow noreferrer\"><code>XML::Smart</code></a> is also pretty good, and there are many more."}], "answers": [{"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": true, "score": 1, "last_activity_date": 1421084314, "creation_date": 1421084314, "answer_id": 27907716, "question_id": 27907209, "link": "https://stackoverflow.com/questions/27907209/trouble-with-a-one-node-xml-file-in-perl/27907716#27907716", "title": "Trouble with a one-node XML file in Perl", "body": "<p>This is just one of the nasties that you may find when using <code>XML::Simple</code>.</p>\n\n<p>In this case there is a solution: You need to enable <a href=\"https://metacpan.org/pod/XML::Simple#ForceArray-1-in---important\" rel=\"nofollow\">the <code>ForceArray</code> option</a> in the constructor call, like so</p>\n\n<pre><code>my $xmltemp = XML::Simple-&gt;new(\n    SuppressEmpty =&gt; 1,\n    ForceArray    =&gt; 1,\n);\n</code></pre>\n\n<p>The documentation has this to say about it</p>\n\n<blockquote>\n  <p>This option should be set to '1' to force nested elements to be\n  represented as arrays even when there is only one.</p>\n</blockquote>\n"}], "owner": {"reputation": 1959, "user_id": 297024, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/e226de73136907720bac240869006028?s=128&d=identicon&r=PG", "display_name": "dbonneville", "link": "https://stackoverflow.com/users/297024/dbonneville"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 36, "favorite_count": 0, "accepted_answer_id": 27907716, "answer_count": 1, "score": 0, "last_activity_date": 1421084314, "creation_date": 1421082471, "last_edit_date": 1421084005, "question_id": 27907209, "link": "https://stackoverflow.com/questions/27907209/trouble-with-a-one-node-xml-file-in-perl", "title": "Trouble with a one-node XML file in Perl", "body": "<p>I have many multi-node XML files that I'm parsing with <a href=\"https://metacpan.org/module/XML::Simple\" rel=\"nofollow\"><code>XML::Simple</code></a>. So far it works great. One of the first things I do is get the length of the XML file (node count) using this:</p>\n\n<pre><code>my $xmltemp = XML::Simple-&gt;new(\n    SuppressEmpty =&gt; 1\n);\n\nmy $product = $xmltemp-&gt;XMLin('xml/' . $basename . '.xml');\n\nmy $qfr = @{ $product-&gt;{$basename}};\nprint \"$qfr = qfr\\n\";\n</code></pre>\n\n<p>The variable <code>$basename</code> is provided by looping through an array of file names. The nodename and filename are the same.</p>\n\n<p>This works in all the files, except for files that only have one node. The program tanks at the attempt to create the <code>$qfr</code> variable. </p>\n\n<p>If I edit one of the single-node XML files and create another node (dupe the existing one) and rerun, this works fine.</p>\n\n<p>What is wrong that causes a one node XML to not respond to a simple scalar variable assignment? </p>\n\n<p>The <code>print</code> line won't even execute.</p>\n\n<p>NOTE: I cut and pasted the important bits of code from a .pl and and .pm to make it easy to grasp.</p>\n\n<p>EDIT: Here is a single node XML sample:</p>\n\n<pre><code>&lt;?xml version='1.0' encoding='UTF-8' standalone='yes'?&gt;\n&lt;FUNDDATA&gt;\n  &lt;FUND_DATA&gt;\n    &lt;ADVISOR_FUND_CUSIP&gt;316146703&lt;/ADVISOR_FUND_CUSIP&gt;\n    &lt;ADVISOR_FUND_ID&gt;01118&lt;/ADVISOR_FUND_ID&gt;\n    &lt;ADVISOR_FUND_NAME&gt;Pizza Fund - Class A&lt;/ADVISOR_FUND_NAME&gt;\n    &lt;ADVISOR_FUND_SASID&gt;01118&lt;/ADVISOR_FUND_SASID&gt;\n    &lt;ALL_ADVISOR_CLASSES&gt;01118,01123,01124,01125,01126&lt;/ALL_ADVISOR_CLASSES&gt;\n    &lt;ALL_ADVISOR_CLASSES_CUSIPS&gt;316146703,316146885,316146877,316146802,316146869&lt;/ALL_ADVISOR_CLASSES_CUSIPS&gt;\n    &lt;ALL_ADVISOR_CLASSES_SASIDS&gt;01118,01123,01124,01125,01126&lt;/ALL_ADVISOR_CLASSES_SASIDS&gt;\n    &lt;ALL_ADVISOR_CLASSES_TYPES&gt;A,B,C,T,I&lt;/ALL_ADVISOR_CLASSES_TYPES&gt;\n    &lt;ALL_RETAIL_CLASSES&gt;00026&lt;/ALL_RETAIL_CLASSES&gt;\n    &lt;ALL_RETAIL_CLASSES_CUSIPS&gt;316146109&lt;/ALL_RETAIL_CLASSES_CUSIPS&gt;\n    &lt;ALL_RETAIL_CLASSES_SASIDS&gt;00026&lt;/ALL_RETAIL_CLASSES_SASIDS&gt;\n    &lt;ALL_RETAIL_CLASSES_TYPES&gt;N&lt;/ALL_RETAIL_CLASSES_TYPES&gt;\n    &lt;BUSINESS_UNIT&gt;CCC&lt;/BUSINESS_UNIT&gt;\n    &lt;DATE_ID&gt;September 2000&lt;/DATE_ID&gt;\n    &lt;PRIMARY_FUND_ID&gt;000044&lt;/PRIMARY_FUND_ID&gt;\n    &lt;RETAIL_FUND_CUSIP&gt;44444&lt;/RETAIL_FUND_CUSIP&gt;\n    &lt;RETAIL_FUND_ID&gt;00026&lt;/RETAIL_FUND_ID&gt;\n    &lt;RETAIL_FUND_NAME&gt;Pizza Fund&lt;/RETAIL_FUND_NAME&gt;\n    &lt;RETAIL_FUND_SASID&gt;00026&lt;/RETAIL_FUND_SASID&gt;\n    &lt;TRADE_SYMBOL&gt;CCHCC&lt;/TRADE_SYMBOL&gt;\n  &lt;/FUND_DATA&gt;\n&lt;/FUNDDATA&gt;\n</code></pre>\n"}, {"tags": ["perl", "file", "scripting"], "comments": [{"owner": {"reputation": 7187, "user_id": 2243104, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/47daacd71b7294e97d5ef36ba029a95c?s=128&d=identicon&r=PG&f=1", "display_name": "Reti43", "link": "https://stackoverflow.com/users/2243104/reti43"}, "edited": false, "score": 0, "creation_date": 1421080296, "post_id": 27906417, "comment_id": 44212339, "body": "If the code works as intended, but you want to improve its performance, isn&#39;t <a href=\"http://codereview.stackexchange.com/\">Code Review</a> the appropriate place to ask this question?"}, {"owner": {"reputation": 2750, "user_id": 801553, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/74c6e34ee0ad953bb3079f5bb5cd9497?s=128&d=identicon&r=PG", "display_name": "Patrick J. S.", "link": "https://stackoverflow.com/users/801553/patrick-j-s"}, "edited": false, "score": 1, "creation_date": 1421080351, "post_id": 27906417, "comment_id": 44212371, "body": "Have you seen <code>unpack</code>?"}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 2, "creation_date": 1421080368, "post_id": 27906417, "comment_id": 44212386, "body": "<a href=\"http://p3rl.org/pack\" rel=\"nofollow noreferrer\">pack</a> and <a href=\"http://p3rl.org/unpack\" rel=\"nofollow noreferrer\">unpack</a> are usually used to read binary formats, check the <code>&#47;</code> template char."}, {"owner": {"reputation": 21, "user_id": 4445749, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b281c231cb1e90dbcd547eec1f1acfdd?s=128&d=identicon&r=PG&f=1", "display_name": "ashish", "link": "https://stackoverflow.com/users/4445749/ashish"}, "edited": false, "score": 0, "creation_date": 1421080663, "post_id": 27906417, "comment_id": 44212567, "body": "i have created functiion to unpack binary strings....the performnace issue is with the reading of file"}], "answers": [{"tags": [], "owner": {"reputation": 4116, "user_id": 4402825, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-3ESJ4SrCVfE/AAAAAAAAAAI/AAAAAAAAFO8/yBWcRYAN94s/photo.jpg?sz=128", "display_name": "Ben Grimm", "link": "https://stackoverflow.com/users/4402825/ben-grimm"}, "is_accepted": false, "score": 0, "last_activity_date": 1421082185, "last_edit_date": 1421082185, "creation_date": 1421081864, "answer_id": 27907043, "question_id": 27906417, "link": "https://stackoverflow.com/questions/27906417/performance-of-perl-script/27907043#27907043", "title": "performance of perl script", "body": "<p><code>while (&lt;FILE&gt;)</code> reads your file into <code>$_</code> until it finds the value of the input record separator (<code>$/</code> which usually defaults to <code>\\n</code>) or EOF. But then rather than working with the data in <code>$_</code> you seek back to <code>$re</code> and read it again. Finally the block ends and the loop is tested again with <code>&lt;FILE&gt;</code> which reads from the current position of the file handle, on until it finds the input record separator or EOF.</p>\n\n<p>You can avoid all of these repeated reads if you reform the loop like this:</p>\n\n<pre><code>do {\n   seek(FILE,$re,0);\n   read(FILE,$rep_factor,2);\n   my $rep_fact = undefined2defined(convert2ascii_decimal($rep_factor,0));\n   $size = ($rep_fact * 301) + 2652;\n   seek(FILE,$rec,0);\n   read FILE,$string,$size;\n\n   filewrite ($ARGV[1], recordparse($string));\n   $rec = $size + $rec;\n   $re = $size + 2396;\n} until eof(FILE);\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 4445749, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b281c231cb1e90dbcd547eec1f1acfdd?s=128&d=identicon&r=PG&f=1", "display_name": "ashish", "link": "https://stackoverflow.com/users/4445749/ashish"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 72, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1421082185, "creation_date": 1421079779, "last_edit_date": 1421079940, "question_id": 27906417, "link": "https://stackoverflow.com/questions/27906417/performance-of-perl-script", "title": "performance of perl script", "body": "<p>I am trying to read a dynamic record length binary file. which has data like below :</p>\n\n<pre><code>field1field2field3field4vector1vector2\n</code></pre>\n\n<p>now field3 defines the occurence of vectors </p>\n\n<p>for ex field3 is 2, then vector1&amp;2 would be present and if value is 3 then vector1,2&amp;3 would be present.</p>\n\n<p>I have written the below code which is working fine but giving very bad performace.</p>\n\n<p>let say field1-4 is fixed and length is 2652 and each vector length is 301.\nfield3 is 3 bytes from position 2396.</p>\n\n<pre><code>my $string;\nmy $rep_factor;\nmy $size;\n\nopen (FILE, $ARGV[0]) or die $!;\nmy $re = 2396;\nmy $rec = 0;\nwhile (&lt;FILE&gt;) {\n   seek(FILE,$re,0);\n   read(FILE,$rep_factor,2);\n   my $rep_fact = undefined2defined(convert2ascii_decimal($rep_factor,0));\n   $size = ($rep_fact * 301) + 2652;\n   seek(FILE,$rec,0);\n   read FILE,$string,$size;\n\n   filewrite ($ARGV[1], recordparse($string));\n   $rec = $size + $rec;\n   $re = $size + 2396;\n}\n</code></pre>\n\n<p>Please help me with the code as i am new to perl, and couldn't think of anything here.</p>\n\n<p>Thanks,\nAshish</p>\n"}, {"tags": ["sql", "perl", "macros", "stringtemplate", "variable-expansion"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 2, "creation_date": 1421070253, "post_id": 27903071, "comment_id": 44205929, "body": "You have a challenge on your hands here. It sounds like you want to support multiple dialects simultaneously, rather than simply converting one to another? I think it&#39;s important that you start by writing a comprehensive set of tests, as your goal is a little imprecise at present. I also suggest that you restrict your baseline SQL dialect to functions rather than operators (i.e. <code>MOD(x, y)</code> rather than <code>x % y</code>) including basic operations like addition. That will make the job of parsing the input very much simpler."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1421070433, "post_id": 27903071, "comment_id": 44206031, "body": "You will no doubt find a parsing module like <a href=\"https://metacpan.org/module/Parse::RecDescent\" rel=\"nofollow noreferrer\"><code>Parse::RecDescent</code></a> useful, as the task involves two steps: reducing the input to a parse tree and expanding that parse tree to an SQL dialect. You will have one front-end and two (or more?) back-ends."}, {"owner": {"reputation": 69229, "user_id": 53341, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/98geJ.png?s=128&g=1", "display_name": "MatBailie", "link": "https://stackoverflow.com/users/53341/matbailie"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1421073299, "post_id": 27903071, "comment_id": 44207856, "body": "@Borodin - We already have a test system in place that will be able to verify this; building the DDL from our ORM, deploying to a new database, processing test data sets through ETL, querying views for expected results.  I do agree with the &quot;dialect-less / macro&quot; SQL having functions <i>(such as my last examples using <code>#DIV(x, y)#</code> and <code>#MOD(x, y)#</code>)</i>.  Our front-end will need to &quot;translate&quot; its SQL in the same fashion.  <i>(One &quot;generic&quot; front-end, one &quot;generic&quot; back-end.  Many instances/installations, with the dialect being &quot;applied&quot; to the SQL at install time.)</i>"}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1421076378, "post_id": 27903071, "comment_id": 44209896, "body": "Isn&#39;t this one of the main things ORMs like <a href=\"https://metacpan.org/pod/DBIx::Class\" rel=\"nofollow noreferrer\"><code>DBIx::Class</code></a> do? They create an abstraction layer so you don&#39;t have to worry about writing vendor-specific queries. Of course, if you&#39;re pressed for time and your existing code base already uses raw SQL, switching to an ORM is probably not a viable option for you, but maybe something to think about in the future."}, {"owner": {"reputation": 69229, "user_id": 53341, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/98geJ.png?s=128&g=1", "display_name": "MatBailie", "link": "https://stackoverflow.com/users/53341/matbailie"}, "reply_to_user": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1421079439, "post_id": 27903071, "comment_id": 44211814, "body": "@ThisSuitIsBlackNot - That&#39;s true for the tables, unfortunately the VIEWs are complex are defined with in-line SQL statements."}], "answers": [{"comments": [{"owner": {"reputation": 69229, "user_id": 53341, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/98geJ.png?s=128&g=1", "display_name": "MatBailie", "link": "https://stackoverflow.com/users/53341/matbailie"}, "edited": false, "score": 0, "creation_date": 1421073506, "post_id": 27903540, "comment_id": 44207993, "body": "We already use DBI, so the DDL for tables is straight forward enough.  It&#39;s the VIEWs and any in-line SQL embedded in the product that require translation at deploy-time.  Thanks for the pointer to SQL::Translator, do you find it reliable in being able to parse human generated SQL, potentially including positional parameter tokens?"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 69229, "user_id": 53341, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/98geJ.png?s=128&g=1", "display_name": "MatBailie", "link": "https://stackoverflow.com/users/53341/matbailie"}, "edited": false, "score": 0, "creation_date": 1421073601, "post_id": 27903540, "comment_id": 44208053, "body": "I&#39;ve never used it on particularly complex SQL, so I can&#39;t really comment, I&#39;m afraid."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1421075616, "post_id": 27903540, "comment_id": 44209348, "body": "I would jump at a chance to use something called <code>SQLFairy</code>!"}], "tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 3, "last_activity_date": 1421070774, "creation_date": 1421070774, "answer_id": 27903540, "question_id": 27903071, "link": "https://stackoverflow.com/questions/27903071/sql-dialect-translation-using-perl/27903540#27903540", "title": "SQL Dialect Translation Using PERL", "body": "<p>You might find the <a href=\"https://metacpan.org/release/SQL-Translator\" rel=\"nofollow\">SQL::Translator</a> module to be useful for this.</p>\n\n<blockquote>\n  <p>SQL::Translator is a group of Perl modules that converts\n  vendor-specific SQL table definitions into other formats, such as\n  other vendor-specific SQL, ER diagrams, documentation (POD and HTML),\n  XML, and Class::DBI classes.</p>\n</blockquote>\n"}], "owner": {"reputation": 69229, "user_id": 53341, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/98geJ.png?s=128&g=1", "display_name": "MatBailie", "link": "https://stackoverflow.com/users/53341/matbailie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 245, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1421070774, "creation_date": 1421069244, "question_id": 27903071, "link": "https://stackoverflow.com/questions/27903071/sql-dialect-translation-using-perl", "title": "SQL Dialect Translation Using PERL", "body": "<p>I have a rush job to take an SQL product that works on PostGre and Amazon's RedShift, and port it to work on Oracle.  (Note that \"work\" does not currently imply \"optimally\" but rather \"correctly\".)</p>\n\n<p>All of our TABLEs are defined using an ORM (DBI), but all of our VIEWs are currently stored as in-line SQL.</p>\n\n<p>My hope is that there is a relatively simple way to run encapsulate the SQL in a kind of generic sense and use some existing tools to translate it in to Dialect Specific SQL.</p>\n\n<p><br></p>\n\n<p>Trivial Example:  </p>\n\n<ul>\n<li><code>SELECT CAST(x AS DECIMAL(16,4)) AS foo FROM bah</code><br>\n=>  </li>\n<li><code>SELECT CAST(x AS NUMBER(16,4)) AS foo FROM bah</code>  </li>\n</ul>\n\n<p>That was simple.  We have a \"find and replace stage\" when we deploy.  The SQL is stored as <code>CAST(x AS #DECIMAL#(16,4))</code> and then we replace <code>#DECIMAL#</code> with a new string depending on what dialect we are deploying to.</p>\n\n<p><br></p>\n\n<p>Frustrating Example:</p>\n\n<ul>\n<li><code>SELECT x % y AS modulo FROM foo</code><br>\n=>  </li>\n<li><code>SELECT MOD(x, y) AS modulo FROM foo</code>  </li>\n</ul>\n\n<p>And...</p>\n\n<ul>\n<li><code>SELECT x / y AS int_div FROM foo</code><br>\n=>  </li>\n<li><code>SELECT trunc(x / y) AS int_div FROM foo</code>  </li>\n</ul>\n\n<p><br></p>\n\n<p>I'm no PERL expert, so I'm looking for pointers on how to do some kind of macro expansion.<br>\n- The SQL would be stored with some kind of macro expression in the string<br>\n- A \"processor\" would be called with parameters including \"dialect\" and \"sql\"<br>\n- The \"dialect\" parameter would dictate the output of the macro expansion  </p>\n\n<p>Dialectless-SQL: <code>SELECT #DIV(x,y)# AS z FROM foo</code></p>\n\n<p>Dialect: <code>RedShift</code><br>\nOutput : <code>SELECT x / y AS z FROM foo</code>  </p>\n\n<p>Dialect: <code>Oracle11g</code><br>\nOutput : <code>SELECT floor(x / y) AS z FROM foo</code>  </p>\n\n<p><br></p>\n\n<p>It would need to cope with sub-queries, etc:</p>\n\n<p>Dialectless-SQL: <code>SELECT #MOD(x, (SELECT MAX(y) FROM bah))# AS z FROM foo</code></p>\n\n<p>Dialect: <code>RedShift</code><br>\nOutput : <code>SELECT x % (SELECT MAX(y) FROM bah) AS z FROM foo</code>  </p>\n\n<p>Dialect: <code>Oracle11g</code><br>\nOutput : <code>SELECT mod(x, (SELECT MAX(y) FROM bah)) AS z FROM foo</code>  </p>\n\n<p><br></p>\n\n<p>Or any reliable method for storing \"generic\" SQL, and being able to translate it to \"dialect specific\" SQL.</p>\n"}, {"tags": ["mysql", "perl"], "comments": [{"owner": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "edited": false, "score": 5, "creation_date": 1421062569, "post_id": 27900986, "comment_id": 44201643, "body": "I cannot find any C++ code in this question."}, {"owner": {"reputation": 13, "user_id": 4444922, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eae56a403c687b7feb28fadd5e9f13ed?s=128&d=identicon&r=PG", "display_name": "Daniel Carlson", "link": "https://stackoverflow.com/users/4444922/daniel-carlson"}, "reply_to_user": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "edited": false, "score": 0, "creation_date": 1421065598, "post_id": 27900986, "comment_id": 44203310, "body": "I only run this script in the C++ code. The error is from the script"}, {"owner": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "edited": false, "score": 2, "creation_date": 1421065828, "post_id": 27900986, "comment_id": 44203438, "body": "If the problem is not in the C++ code and the C++ code is not needed to show us the problem, I see no reason for the C++ tag. Please remove it if I am not mistaken."}, {"owner": {"reputation": 3724, "user_id": 3142963, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cb984a54fc82c443b2c9e34271d8787d?s=128&d=identicon&r=PG&f=1", "display_name": "nwk", "link": "https://stackoverflow.com/users/3142963/nwk"}, "edited": false, "score": 0, "creation_date": 1421065857, "post_id": 27900986, "comment_id": 44203453, "body": "Does your table have the column <code>subject</code>? Are you inserting data in the right table?"}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 4444922, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eae56a403c687b7feb28fadd5e9f13ed?s=128&d=identicon&r=PG", "display_name": "Daniel Carlson", "link": "https://stackoverflow.com/users/4444922/daniel-carlson"}, "edited": false, "score": 0, "creation_date": 1421186867, "post_id": 27902933, "comment_id": 44262414, "body": "Realised the error was in the table. Can anyone please help me with a way to get a &#39;create table&#39; statement from an unknown xml file.Any help will be appreciated"}], "tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 2, "last_activity_date": 1421073811, "last_edit_date": 1421073811, "creation_date": 1421068809, "answer_id": 27902933, "question_id": 27900986, "link": "https://stackoverflow.com/questions/27900986/inserting-data-into-a-mysql-database-using-perl/27902933#27902933", "title": "Inserting data into a mysql database using perl", "body": "<p>The error seems pretty clear to me. You are generating an SQL INSERT statement which tries to insert data into a column called 'subject'. But the table you are inserting data into doesn't have a column called 'subject'.</p>\n\n<p>Given that you're generating your SQL from an XML document, the solution will be one of these two options:</p>\n\n<ol>\n<li>Add a 'subject' column to the table</li>\n<li>Skip processing the XML element that adds this data to the SQL</li>\n</ol>\n\n<p>Which of them you choose depends entirely on how your program is supposed to work. We can't be any help there.</p>\n"}], "owner": {"reputation": 13, "user_id": 4444922, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eae56a403c687b7feb28fadd5e9f13ed?s=128&d=identicon&r=PG", "display_name": "Daniel Carlson", "link": "https://stackoverflow.com/users/4444922/daniel-carlson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 500, "favorite_count": 0, "closed_date": 1421076661, "answer_count": 1, "score": -2, "last_activity_date": 1421073811, "creation_date": 1421062269, "last_edit_date": 1421069946, "question_id": 27900986, "link": "https://stackoverflow.com/questions/27900986/inserting-data-into-a-mysql-database-using-perl", "closed_reason": "Not suitable for this site", "title": "Inserting data into a mysql database using perl", "body": "<p>I don't code in mysql or perl and I am writing a program which parses and xml file and inserts the data into a mysql database in C++. I found a script to do this that I call from my C++ code but get this error:</p>\n\n<blockquote>\n  <p>Unknown column 'subject' in 'field list' at ./xml_to_mysql.pl line 107</p>\n</blockquote>\n\n<p>And here is the code for the script which does the inserting:</p>\n\n<pre><code>#@_IMPORT_DOCUMENT_\n# Open file for reading\n\nmy $xp = XML::XPath-&gt;new (filename =&gt; $file_name);\nmy $row_list = $xp-&gt;find (\"//row\");\n\nprint \"Number of records: \" . $row_list-&gt;size () . \"\\n\";\nforeach my $row ($row_list-&gt;get_nodelist ())\n{\n     my @name; #array of column names\n     my @val; #array of column names\n     my $col_list = $row-&gt;find (\"*\");\n     foreach my $col ($col_list-&gt;get_nodelist ())\n     {\n         push (@name, $col-&gt;getName ());\n         push (@val, $col-&gt;string_value ());\n     }\n     #construct INSERT statement, then execute it \n     my $stmt = \"INSERT INTO $tbl_name (\"\n                . join (\",\", @name)\n                . \") VALUES (\"\n                . join (\",\", (\"?\") x scalar (@val))\n                . \")\";\n     $dbh-&gt;do ($stmt, undef, @val);\n}\n</code></pre>\n\n<p><strong>Line 107 is the line which contains the line:</strong></p>\n\n<pre><code>$dbh-&gt;do ($stmt, undef, @val);\n</code></pre>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 5455, "user_id": 3961170, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/PtFol.jpg?s=128&g=1", "display_name": "mkHun", "link": "https://stackoverflow.com/users/3961170/mkhun"}, "edited": false, "score": 1, "creation_date": 1421064300, "post_id": 27900924, "comment_id": 44202522, "body": "@votedowner add comment"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1421071225, "post_id": 27900924, "comment_id": 44206478, "body": "Using <code>&#47;g</code> there makes no sense and can cause hard to debug errors."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1421071761, "post_id": 27900924, "comment_id": 44206800, "body": "Please avoid using <code>$&amp;</code>. It slows down every single match operation without captures in your program."}, {"owner": {"reputation": 46944, "user_id": 3764814, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d02a4923abd2ca6d7593f031e4222c2?s=128&d=identicon&r=PG", "display_name": "Lucas Trzesniewski", "link": "https://stackoverflow.com/users/3764814/lucas-trzesniewski"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1421081404, "post_id": 27900924, "comment_id": 44212974, "body": "@ikegami this is <a href=\"http://perldoc.perl.org/perlvar.html#Performance-issues\" rel=\"nofollow noreferrer\">not true anymore</a> as of Perl 5.20.0"}], "answers": [{"comments": [{"owner": {"reputation": 5455, "user_id": 3961170, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/PtFol.jpg?s=128&g=1", "display_name": "mkHun", "link": "https://stackoverflow.com/users/3961170/mkhun"}, "edited": false, "score": 0, "creation_date": 1421239033, "post_id": 27902681, "comment_id": 44281596, "body": "Thank you. Very nice answer :)"}], "tags": [], "owner": {"reputation": 46944, "user_id": 3764814, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d02a4923abd2ca6d7593f031e4222c2?s=128&d=identicon&r=PG", "display_name": "Lucas Trzesniewski", "link": "https://stackoverflow.com/users/3764814/lucas-trzesniewski"}, "is_accepted": true, "score": 8, "last_activity_date": 1421070051, "last_edit_date": 1421070051, "creation_date": 1421067940, "answer_id": 27902681, "question_id": 27900924, "link": "https://stackoverflow.com/questions/27900924/greedy-operator-result-is-differ-in-positive-and-negative-lookahead/27902681#27902681", "title": "Greedy operator result is differ in positive and negative lookahead?", "body": "<p>Let's consider the first example:</p>\n\n<pre><code>AAA 1121 BBB\n\\_/\\_______/^\n |     |    |\n |     |    +--- this (the empty string right there) satisfies (?!BBB)\n |     |\n |     +-------- matched by .+\n |     \n +-------------- matched by AAA\n</code></pre>\n\n<p>This is because the greedy <code>.+</code> consumes <code>1121 BBB</code> <strong>including</strong> the <code>BBB</code>. After it has consumed the rest of the line, <code>(?!BBB)</code> is checked against the remaining empty string. And this empty string satisfies <code>(?!BBB)</code> since it's not followed by <code>BBB</code>?</p>\n\n<hr>\n\n<h2>Negative lookahead</h2>\n\n<p>The algorithm executes like the following. <code>^</code> is the <em>current position</em> (there's a current position in the string and a current position in the pattern <sub><em>(kind of)</em></sub>).</p>\n\n<ol>\n<li><p>Initial state:</p>\n\n<pre><code>AAA 1121 BBB          AAA.+(?!BBB)\n^                     ^\n</code></pre></li>\n<li><p>Match <code>AAA</code></p>\n\n<pre><code>AAA 1121 BBB          AAA.+(?!BBB)\n   ^                     ^\n</code></pre></li>\n<li><p>Match <code>.+</code></p>\n\n<pre><code>AAA 1121 BBB          AAA.+(?!BBB)\n            ^              ^\n</code></pre></li>\n<li><p>Check <code>(?!BBB)</code></p>\n\n<pre><code>AAA 1121 BBB          AAA.+(?!BBB)\n            ^                     ^\n</code></pre></li>\n<li><p>No <code>BBB</code> match at this position => Success!</p>\n\n<pre><code>AAA 1121 BBB\n\\__________/\n</code></pre></li>\n</ol>\n\n<hr>\n\n<h2>Positive lookahead</h2>\n\n<p>Now, let's see why <em>exactly</em> <code>AAA.+(?=BBB)</code> yields a match:</p>\n\n<ol>\n<li><p>Initial state:</p>\n\n<pre><code>AAA 1121 BBB          AAA.+(?=BBB)\n^                     ^\n</code></pre></li>\n<li><p>Match <code>AAA</code></p>\n\n<pre><code>AAA 1121 BBB          AAA.+(?=BBB)\n   ^                     ^\n</code></pre></li>\n<li><p>Match <code>.+</code></p>\n\n<pre><code>AAA 1121 BBB          AAA.+(?=BBB)\n            ^              ^\n</code></pre></li>\n<li><p>Check <code>(?=BBB)</code></p>\n\n<pre><code>AAA 1121 BBB          AAA.+(?=BBB)\n            ^              ^\n</code></pre>\n\n<p>No <code>BBB</code> match at this position => Backtrack (consume one less char by <code>.+</code>)</p></li>\n<li><p>Check <code>(?=BBB)</code></p>\n\n<pre><code>AAA 1121 BBB          AAA.+(?=BBB)\n           ^               ^\n</code></pre>\n\n<p>No <code>BBB</code> match at this position => Backtrack (consume one less char by <code>.+</code>)</p></li>\n<li><p>Check <code>(?=BBB)</code></p>\n\n<pre><code>AAA 1121 BBB          AAA.+(?=BBB)\n          ^                ^\n</code></pre>\n\n<p>No <code>BBB</code> match at this position => Backtrack (consume one less char by <code>.+</code>)</p></li>\n<li><p>Check <code>(?=BBB)</code></p>\n\n<pre><code>AAA 1121 BBB          AAA.+(?=BBB)\n         ^                        ^\n</code></pre></li>\n<li><p>We do have a <code>BBB</code> match at this position => Success!</p>\n\n<pre><code>AAA 1121 BBB\n\\_______/\n</code></pre></li>\n</ol>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 2, "last_activity_date": 1421071576, "creation_date": 1421071576, "answer_id": 27903823, "question_id": 27900924, "link": "https://stackoverflow.com/questions/27900924/greedy-operator-result-is-differ-in-positive-and-negative-lookahead/27903823#27903823", "title": "Greedy operator result is differ in positive and negative lookahead?", "body": "<p>There is no difference in how it works in your two cases, and <code>.+</code> is greedy in both of your cases.</p>\n\n<p>When matching <code>AAA.+(?=BBB)</code> against <code>AAA 1121 BBB</code>, the most <code>.+</code> can match starting after <code>AAA</code> is <code>&lt;spc&gt;1121&lt;spc&gt;</code>. Anything longer will cause <code>(?=BBB)</code> to fail.</p>\n\n<p>When matching <code>AAA.+(?!BBB)</code> against <code>AAA 1121 BBB</code>, the most <code>.+</code> can match starting after <code>AAA</code> is <code>&lt;spc&gt;1121&lt;spc&gt;BBB</code>. Being the rest of the string, it can't possibly match anything longer. </p>\n\n<p>Note that the end of the string isn't followed by <code>BBB</code>, so <code>(?!BBB)</code> matches at the end of the string.</p>\n\n<hr>\n\n<p><code>(?:(?!STRING).)*</code> is to <code>STRING</code> as <code>[^CHAR]*</code> is to <code>CHAR</code>.</p>\n\n<p>I'd go with</p>\n\n<pre><code>say $1 if /^(AAA\\s+\\S+)\\s+(?:(?!BBB)\\s)*\\z/;\n</code></pre>\n\n<p>On second thought, I'd go with</p>\n\n<pre><code>my @F = split;\nsay \"$F[0] $F[1]\" if $F[0] eq 'AAA' &amp;&amp; $F[2] ne 'BBB';\n</code></pre>\n"}], "owner": {"reputation": 5455, "user_id": 3961170, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/PtFol.jpg?s=128&g=1", "display_name": "mkHun", "link": "https://stackoverflow.com/users/3961170/mkhun"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 143, "favorite_count": 0, "accepted_answer_id": 27902681, "answer_count": 2, "score": 3, "last_activity_date": 1421152579, "creation_date": 1421062025, "last_edit_date": 1421152579, "question_id": 27900924, "link": "https://stackoverflow.com/questions/27900924/greedy-operator-result-is-differ-in-positive-and-negative-lookahead", "title": "Greedy operator result is differ in positive and negative lookahead?", "body": "<p>I'm confused about the greedy operator on positive and negative look ahead.</p>\n\n<p>script for <strong>positive lookahead</strong></p>\n\n<pre><code>foreach (&lt;DATA&gt;){\n$_ = m/AAA.+(?=BBB)/g;\nprint \"$&amp;\\n\";\n} \n__DATA__\nAAA 1121 BBB\nAAA 443  CCC\nAAA 4431 BBB\nABC 321  EACA\nAAA 321  BBB\nACD 431 MAKN\nAAA 751  ABC\n</code></pre>\n\n<p>It's output</p>\n\n<pre><code>AAA 1121 \n\nAAA 4431 \n\nAAA 321  \n</code></pre>\n\n<p><strong>Negative Lookahead</strong></p>\n\n<pre><code>foreach (&lt;DATA&gt;){\n$_ = m/AAA.+(?!BBB)/g; \nprint \"$&amp;\\n\";\n} \n</code></pre>\n\n<p>It's output</p>\n\n<pre><code>AAA 1121 BBB\nAAA 443  CCC\nAAA 4431 BBB\n\nAAA 321  BBB\n\nAAA 751  ABC\n</code></pre>\n\n<p>In the execution of the <code>negative lookahed</code> do not consider the <code>(?!BBB)</code>. Because I'm using the greedy operator preceding the <code>(?!BBB)</code>. In that case, postive look ahead greed operator considers the <code>(?=BBB)</code>. Which is why gives the different result?</p>\n\n<p>I can easily achieve the OP by the code <code>$_ = m/AAA\\s\\d+(?!.+BBB)/g;</code>. </p>\n\n<p>But i don't know what is the execution of my code?</p>\n"}, {"tags": ["perl", "zip"], "comments": [{"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1421060683, "post_id": 27900080, "comment_id": 44200579, "body": "What&#39;s <code>$directoryPath</code> - my guess would be that it&#39;s somehow not valid, and so you&#39;re not adding any files to the zip in the first place."}, {"owner": {"reputation": 315, "user_id": 3361044, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/3f7e7638e094d5cad1bd06aae9be9285?s=128&d=identicon&r=PG&f=1", "display_name": "derBasti", "link": "https://stackoverflow.com/users/3361044/derbasti"}, "reply_to_user": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1421061057, "post_id": 27900080, "comment_id": 44200798, "body": "$directoryPath is the folder of the files. It&#39;s an valid path as downloading the file directly with $directoryPath works."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1421061366, "post_id": 27900080, "comment_id": 44200996, "body": "OK. It&#39;s just I&#39;ve been caught out in the past with relative paths/permissions. My guess would have been that <code>$directoryPath</code> doesn&#39;t contain a trailing slash."}], "answers": [{"comments": [{"owner": {"reputation": 315, "user_id": 3361044, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/3f7e7638e094d5cad1bd06aae9be9285?s=128&d=identicon&r=PG&f=1", "display_name": "derBasti", "link": "https://stackoverflow.com/users/3361044/derbasti"}, "edited": false, "score": 0, "creation_date": 1421061331, "post_id": 27900678, "comment_id": 44200975, "body": "Thanks for your reply. It solves half the problem: The archive is no longer invalid, but still no files are shown when I open it, while the size seems to be right (&gt;100kb)."}], "tags": [], "owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "is_accepted": true, "score": 2, "last_activity_date": 1421061173, "creation_date": 1421061173, "answer_id": 27900678, "question_id": 27900080, "link": "https://stackoverflow.com/questions/27900080/zipping-a-file-with-perl-results-in-an-invalid-archive/27900678#27900678", "title": "Zipping a file with perl results in an invalid archive", "body": "<p>You are corrupting it here:</p>\n\n<pre><code>open (DLFILE, \"&lt;$zipFilePath\");\n@fileholder = &lt;DLFILE&gt;;\nclose (DLFILE);\n</code></pre>\n\n<p>by opening it such that it translates \"\\r\\n\" to just \"\\n\".</p>\n\n<p>Try this:</p>\n\n<p>open( DLFILE, '&lt;:raw', $zipFilePath );</p>\n"}], "owner": {"reputation": 315, "user_id": 3361044, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/3f7e7638e094d5cad1bd06aae9be9285?s=128&d=identicon&r=PG&f=1", "display_name": "derBasti", "link": "https://stackoverflow.com/users/3361044/derbasti"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 138, "favorite_count": 0, "accepted_answer_id": 27900678, "answer_count": 1, "score": 0, "last_activity_date": 1421061419, "creation_date": 1421059203, "last_edit_date": 1421061419, "question_id": 27900080, "link": "https://stackoverflow.com/questions/27900080/zipping-a-file-with-perl-results-in-an-invalid-archive", "title": "Zipping a file with perl results in an invalid archive", "body": "<p>I am currently trying to zip some files with perl. The resulting file is printed, so a user who calls the page which executes the script can download or open the zip file.</p>\n\n<p>Looking at the size of the zip file it seems everything worked ok, but if I try to open the file on the server no contents are shown. If I open the file after downloading it, the archive is invalid.</p>\n\n<p>Here's the code:</p>\n\n<pre><code>my $zip = Archive::Zip-&gt;new();  \n\nmy $i;\nforeach $i(@files)\n{\n    my $fh = $zip-&gt;addFile(\"$directoryPath$i\") if (-e \"$directoryPath$i\");\n}\n\nmy $zipFilePath = \"Test.zip\";\n\ndie 'Cannot create $zip_file_name: $!\\n' if $zip-&gt;writeToFileNamed(\"$zipFilePath\") != AZ_OK;\n\nopen (DLFILE, \"&lt;$zipFilePath\");\n@fileholder = &lt;DLFILE&gt;;\nclose (DLFILE);\n\nprint \"Content-Type:application/x-download\\n\";   \nprint \"Content-Disposition:attachment;filename=$zipFilePath\\n\\n\";  \nprint @fileholder;\n</code></pre>\n\n<p>Can you please tell me where the error is?</p>\n\n<p>I am running the code using xampp on my local windows machine.</p>\n\n<p>Edit: The same happens when I use </p>\n\n<pre><code>use strict;\nuse warnings;\nuse autodie;\n</code></pre>\n\n<p>Edit: The first problem is solved by ysth, thanks for that. Now the archive is not invalid after downloading, but still no files are shown if I open it, while the zip-file's size seems to be correct.</p>\n"}, {"tags": ["perl", "nlp", "charniak-parser"], "comments": [{"owner": {"reputation": 2309, "user_id": 1118542, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c28cff26d7fda5d7ab55b9824f8e5dff?s=128&d=identicon&r=PG", "display_name": "dmcc", "link": "https://stackoverflow.com/users/1118542/dmcc"}, "edited": false, "score": 0, "creation_date": 1422051446, "post_id": 27897447, "comment_id": 44613524, "body": "Can you expand on &quot;it does not work&quot;? What error message(s) are you getting?"}, {"owner": {"reputation": 1, "user_id": 3024055, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d81a62b29c4d733ebb654aa55f51bb11?s=128&d=identicon&r=PG&f=1", "display_name": "Khaing", "link": "https://stackoverflow.com/users/3024055/khaing"}, "reply_to_user": {"reputation": 2309, "user_id": 1118542, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c28cff26d7fda5d7ab55b9824f8e5dff?s=128&d=identicon&r=PG", "display_name": "dmcc", "link": "https://stackoverflow.com/users/1118542/dmcc"}, "edited": false, "score": 0, "creation_date": 1422245146, "post_id": 27897447, "comment_id": 44661086, "body": "In spite of changing the path according to his instructions, it (spade.pl) does not work. I run the program with &quot; Run Command&quot; by giving parameters &quot;spade.pl [-seg-only] one-sent-per-line-file&quot;. The output from command line is &quot; Press Any Key to Continue&quot; and nothing comes out. Please...."}, {"owner": {"reputation": 1, "user_id": 3024055, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d81a62b29c4d733ebb654aa55f51bb11?s=128&d=identicon&r=PG&f=1", "display_name": "Khaing", "link": "https://stackoverflow.com/users/3024055/khaing"}, "reply_to_user": {"reputation": 2309, "user_id": 1118542, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c28cff26d7fda5d7ab55b9824f8e5dff?s=128&d=identicon&r=PG", "display_name": "dmcc", "link": "https://stackoverflow.com/users/1118542/dmcc"}, "edited": false, "score": 0, "creation_date": 1422369433, "post_id": 27897447, "comment_id": 44715087, "body": "@dmcc , now i put SPADE and parser together under the same folder. It is ok to run the file. But i have these errors &quot; C:/parser/parseIt&#39; is not recognized as an internal or external command, operable program or batch file. system C:/parser/parseIt C:/parser/DATA/ C:/SPADE/example/wsj_0616 &gt; C:/SPADE/ex ample/wsj_0616.chp failed: 256 at spade.pl line 38.&quot;"}, {"owner": {"reputation": 2309, "user_id": 1118542, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c28cff26d7fda5d7ab55b9824f8e5dff?s=128&d=identicon&r=PG", "display_name": "dmcc", "link": "https://stackoverflow.com/users/1118542/dmcc"}, "edited": false, "score": 0, "creation_date": 1422370684, "post_id": 27897447, "comment_id": 44715907, "body": "Maybe a silly question, but are you running cygwin? The parser doesn&#39;t run by default on Windows, though there is a version that runs on Windows natively: <a href=\"http://blogs.microsoft.co.il/dorony/2013/03/02/charniak-parser-on-windows/\" rel=\"nofollow noreferrer\">blogs.microsoft.co.il/dorony/2013/03/02/&hellip;</a>"}, {"owner": {"reputation": 1, "user_id": 3024055, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d81a62b29c4d733ebb654aa55f51bb11?s=128&d=identicon&r=PG&f=1", "display_name": "Khaing", "link": "https://stackoverflow.com/users/3024055/khaing"}, "reply_to_user": {"reputation": 2309, "user_id": 1118542, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c28cff26d7fda5d7ab55b9824f8e5dff?s=128&d=identicon&r=PG", "display_name": "dmcc", "link": "https://stackoverflow.com/users/1118542/dmcc"}, "edited": false, "score": 0, "creation_date": 1422373630, "post_id": 27897447, "comment_id": 44717901, "body": "@dmcc. Yes. I got it. Thank you very much. I will check it out."}], "owner": {"reputation": 1, "user_id": 3024055, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d81a62b29c4d733ebb654aa55f51bb11?s=128&d=identicon&r=PG&f=1", "display_name": "Khaing", "link": "https://stackoverflow.com/users/3024055/khaing"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 152, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1422383750, "creation_date": 1421049154, "last_edit_date": 1422383750, "question_id": 27897447, "link": "https://stackoverflow.com/questions/27897447/how-to-set-up-spade-package-for-discourse-relation", "title": "How to set up SPADE package for discourse relation", "body": "<p>I would like to test sentence level parsing for discourse relation. I already downloaded <a href=\"http://www.isi.edu/licensed-sw/spade/\" rel=\"nofollow\">SPADE</a> from isi.edu. I set up the package according to the instructions. But it does not work. I used Padre, the Perl IDE to run the package. According to the instructions, I changed the <code>$CHP</code> variable to the path of parser like that.</p>\n\n<pre><code>$CHP = \"D:/SIITcourse/Special Study/RhetoricalToolKit/parser/\"; \n</code></pre>\n\n<p>I downloaded Charniak's syntactic parser from the link at isi.edu. May I know if I need something else for parser. Thanks in advance. </p>\n"}, {"tags": ["perl"], "answers": [{"tags": [], "owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "is_accepted": true, "score": 1, "last_activity_date": 1421049964, "creation_date": 1421049964, "answer_id": 27897605, "question_id": 27897032, "link": "https://stackoverflow.com/questions/27897032/how-to-display-accented-characters-properly-with-perl/27897605#27897605", "title": "How to display accented characters properly with Perl", "body": "<p>The web browser will set its encoding to whatever you tell it. You do this by including the <code>charset=UTF-8</code> response in the HTTP header. (Asusming that you do use UTF-8 and not ISO-8859-1)</p>\n"}], "owner": {"reputation": 9, "user_id": 4444173, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/8770f106e3a92a4f6b4edade7bc23728?s=128&d=identicon&r=PG&f=1", "display_name": "user4444173", "link": "https://stackoverflow.com/users/4444173/user4444173"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 66, "favorite_count": 0, "accepted_answer_id": 27897605, "answer_count": 1, "score": 0, "last_activity_date": 1421049964, "creation_date": 1421046954, "question_id": 27897032, "link": "https://stackoverflow.com/questions/27897032/how-to-display-accented-characters-properly-with-perl", "title": "How to display accented characters properly with Perl", "body": "<p>I have a CGI script in Perl. It calls C code to generate anagrams and prints them on the web page:</p>\n\n<pre><code>http://wordsmith.org/anagram/anagram.cgi?anagram=for%C3%AAt%C3%8Ele&amp;language=french&amp;t=5\nFol\ufffdtr\ufffde\nFol\ufffdtre\nE Fol\ufffdtr\ufffd\nF\ufffde Tol\ufffdr\ufffd\nF\ufffde L\ufffdrot\n</code></pre>\n\n<p>How do I make sure the resulting web page shows accented characters correctly, irrespective of the web browser encoding?</p>\n\n<p>BTW, the C code shows accented characters correctly when executed on command line on a terminal:</p>\n\n<pre><code>Fol\u00e2tr\u00e9e\nFol\u00e2tre\nE Fol\u00e2tr\u00e9\nF\u00e9e Tol\u00e9r\u00e9\nF\u00e9e L\u00e9rot\n</code></pre>\n\n<p>Thanks for your help!</p>\n"}, {"tags": ["regex", "perl"], "answers": [{"tags": [], "owner": {"reputation": 4598, "user_id": 145364, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7fdd3f07ac5b720b510dc17843ab9d37?s=128&d=identicon&r=PG", "display_name": "Jim Davis", "link": "https://stackoverflow.com/users/145364/jim-davis"}, "is_accepted": false, "score": 0, "last_activity_date": 1421041680, "creation_date": 1421041680, "answer_id": 27896013, "question_id": 27895864, "link": "https://stackoverflow.com/questions/27895864/perl-string-regular-expression-need-explanation/27896013#27896013", "title": "Perl String Regular Expression - Need Explanation", "body": "<p>It's a logical <code>and</code> with short-circuiting.  If the left side evaluates to true -- say, if that regular expression matches -- it'll evaluate the right side, the <code>print</code>.</p>\n\n<p>If the expression on the left is false, it doesn't need to evaluate the right hand side, because the net result would still be false, so it skips it.</p>\n\n<p>See also: <a href=\"http://perldoc.perl.org/perlop.html#Logical-And\" rel=\"nofollow\">perldoc perlop</a></p>\n"}, {"comments": [{"owner": {"reputation": 41846, "user_id": 926143, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/3396173c3d22988be1a0732d184902aa?s=128&d=identicon&r=PG", "display_name": "7stud", "link": "https://stackoverflow.com/users/926143/7stud"}, "edited": false, "score": 0, "creation_date": 1421058207, "post_id": 27896182, "comment_id": 44199218, "body": "<i>The pattern tests whether that item begins with (&lt;)</i>--more editing needed.  The group should be non-capturing as well."}], "tags": [], "owner": {"reputation": 1573, "user_id": 4330484, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OP6ki.png?s=128&g=1", "display_name": "ganbustein", "link": "https://stackoverflow.com/users/4330484/ganbustein"}, "is_accepted": true, "score": 4, "last_activity_date": 1421045433, "last_edit_date": 1421045433, "creation_date": 1421042596, "answer_id": 27896182, "question_id": 27895864, "link": "https://stackoverflow.com/questions/27895864/perl-string-regular-expression-need-explanation/27896182#27896182", "title": "Perl String Regular Expression - Need Explanation", "body": "<p>ARGHHH... The question was edited while I was typing the answer. OK, throwing out the part of my answer that's no longer relevant, and focusing on the specific questions:</p>\n\n<p>The outer loop iterates over all the messages in the mailbox.<br>\nThe inner loop doesn't specify a loop variable, so the special variable <code>$_</code> is used.<br>\nIn each iteration through the inner loop, <code>$_</code> is one header line from message number <code>$i</code>.</p>\n\n<pre><code>/^(From|Subject):\\s+/i and print $_, \"\\n\";\n</code></pre>\n\n<p>The first part of this line, up to the <code>and</code> is a pattern. We didn't specify what to do with the pattern, so it's implicitly matched against <code>$_</code>. (That's one of the things that makes <code>$_</code> special.) This gives us a yes/no test: does the pattern match the header line or not?</p>\n\n<p>The pattern tests whether that item begins with (<code>&lt;</code>) either of the words \"From\" or \"Subject\", followed immediately by a colon and one or more whitespace characters. (This not the correct pattern to match an RFC 822 header. Whitespace is <em>optional</em> on <em>both</em> sides of the colon. The pattern should more properly be <code>/^(From|Subject)\\s*:\\s*/i</code>. But that's a separate issue.) the <code>i</code> at the end of the pattern says to ignore case, so <code>from</code> or <code>SUBJECT</code> would be OK.</p>\n\n<p>The <code>and</code> says to continue evaluating (i.e., executing) the expression if there is a match. If there's no match, whatever follows <code>and</code> is ignored.</p>\n\n<p>The rest of the expression prints the header line (<code>$_</code>) and a newline (<code>\"\\n\"</code>).</p>\n\n<p>In perl, <code>and</code> and <code>or</code> are boolean operators. They're synonyms for <code>&amp;&amp;</code> and <code>||</code>, except that they have much lower precedence, making it easier to write short-ciruit expressions without clutter from lots of parentheses.</p>\n\n<p>The smallest change that captures the From line into a separate variable would be to add the following line to the inner loop:</p>\n\n<pre><code>/^From\\s*:\\s*(.*)$/i and $fromline = $1;\n</code></pre>\n\n<p>You should probably also put </p>\n\n<pre><code>$fromline = undef\n</code></pre>\n\n<p>before the loop so you can test, after the loop, whether there was a From: line.</p>\n\n<p>There are other ways to do it. In fact, that's one of the mantras of perl: \"There's more than one way to do it.\" I've stripped out the \"From: \" from the beginning of the line before storing the balance in <code>$fromline</code>, but I don't know your needs.</p>\n"}], "owner": {"reputation": 33, "user_id": 4443963, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04273b6e8d7062716923ecf0c4cb2bbb?s=128&d=identicon&r=PG&f=1", "display_name": "Duncan", "link": "https://stackoverflow.com/users/4443963/duncan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 79, "favorite_count": 0, "accepted_answer_id": 27896182, "answer_count": 2, "score": 2, "last_activity_date": 1421045433, "creation_date": 1421040760, "last_edit_date": 1421041045, "question_id": 27895864, "link": "https://stackoverflow.com/questions/27895864/perl-string-regular-expression-need-explanation", "title": "Perl String Regular Expression - Need Explanation", "body": "<p>I am pretty new to Perl. I have the following code fragment that works just fine, but I don't fully understand it:</p>\n\n<pre><code>for ($i = 1; $i &lt;= $pop-&gt;Count(); $i++) {\n    foreach ( $pop-&gt;Head( $i ) ) {\n      /^(From|Subject):\\s+/i and print $_, \"\\n\";\n    }\n}\n</code></pre>\n\n<p>$pop->Head is a string or an array of strings returned by the function Mail::POP3Client, and it is the headers of a bunch of emails. Line 3 is some kind of regular expression that extracts the FROM and the SUBJECT from the header. </p>\n\n<p>My question is how does the print function only print the From and the Subject without all the other stuff in the header? What does \"and\" mean - this surely can't be a boolean and can it? Most important, I want to put the From string into its own variable (my $fromline). How do I do this?</p>\n\n<p>I am hoping that this will be easy for some Perl professional, it has got me baffled!</p>\n\n<p>Thanks in advance.</p>\n"}, {"tags": ["perl", "character-encoding", "windows-8.1", "markdown"], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 4422430, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s9qFV.jpg?s=128&g=1", "display_name": "Da Rossa", "link": "https://stackoverflow.com/users/4422430/da-rossa"}, "edited": false, "score": 0, "creation_date": 1421725980, "post_id": 27896308, "comment_id": 44459277, "body": "Thanks for your reply Chankey, sorry for the long time without a response. So, I tried you suggestion and appended your line before <i>each</i> Print statement. You said statementS! No luck. What did I miss?"}], "tags": [], "owner": {"reputation": 19192, "user_id": 257635, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/El2tc.jpg?s=128&g=1", "display_name": "Chankey Pathak", "link": "https://stackoverflow.com/users/257635/chankey-pathak"}, "is_accepted": false, "score": 0, "last_activity_date": 1421043331, "last_edit_date": 1495535121, "creation_date": 1421043331, "answer_id": 27896308, "question_id": 27895234, "link": "https://stackoverflow.com/questions/27895234/markdown-perl-and-character-encoding-rendering-non-ascii-characters/27896308#27896308", "title": "Markdown, Perl and character encoding: rendering non-ASCII characters", "body": "<p>Add the below line <code>before the print</code> statements in your Perl program.</p>\n\n<pre><code>binmode(STDOUT, \":utf8\");\n</code></pre>\n\n<p>Also see: <a href=\"https://stackoverflow.com/questions/627661/how-can-i-output-utf-8-from-perl\">How can I output UTF-8 from Perl?</a></p>\n"}, {"comments": [{"owner": {"reputation": 11, "user_id": 4422430, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s9qFV.jpg?s=128&g=1", "display_name": "Da Rossa", "link": "https://stackoverflow.com/users/4422430/da-rossa"}, "edited": false, "score": 0, "creation_date": 1421726078, "post_id": 27900617, "comment_id": 44459304, "body": "Karol, thanks for your tip and sorry for the long time for my reply. I&#39;ll take a careful look at Pandoc."}], "tags": [], "owner": {"reputation": 8313, "user_id": 1648987, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/dcc829df7369ce51e760cbf9f7b7b29b?s=128&d=identicon&r=PG", "display_name": "Karol S", "link": "https://stackoverflow.com/users/1648987/karol-s"}, "is_accepted": false, "score": 0, "last_activity_date": 1421060957, "creation_date": 1421060957, "answer_id": 27900617, "question_id": 27895234, "link": "https://stackoverflow.com/questions/27895234/markdown-perl-and-character-encoding-rendering-non-ascii-characters/27900617#27900617", "title": "Markdown, Perl and character encoding: rendering non-ASCII characters", "body": "<p>I suggest you switch to a more mature Markdown implementation, like for example <a href=\"http://johnmacfarlane.net/pandoc/\" rel=\"nofollow\">Pandoc</a>.</p>\n\n<p>Pandoc supports UTF-8 and UTF-8 only.</p>\n\n<pre><code>pandoc -s -o output.html input.txt\n</code></pre>\n\n<p><a href=\"https://github.com/jgm/pandoc/wiki/Pandoc-vs-Markdown.pl\" rel=\"nofollow\">A comparison between the two.</a></p>\n"}], "owner": {"reputation": 11, "user_id": 4422430, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s9qFV.jpg?s=128&g=1", "display_name": "Da Rossa", "link": "https://stackoverflow.com/users/4422430/da-rossa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 439, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1421060957, "creation_date": 1421036272, "last_edit_date": 1495540664, "question_id": 27895234, "link": "https://stackoverflow.com/questions/27895234/markdown-perl-and-character-encoding-rendering-non-ascii-characters", "title": "Markdown, Perl and character encoding: rendering non-ASCII characters", "body": "<p>I'm new to Markdown and I instantly liked the idea of a readable plain text document with the ability to (rather) easily convert to html. Writing on plain-text editors is way better than in word processors! The thing is, I'm not familiar with the Perl language.</p>\n\n<p>So I read basically all the documentation, starting with the point of origin (daringfireball by John Gruber) and then I installed Perl in my Windows 8 operating system so I could convert my <strong><code>.md files to html</code></strong>.<br> \nI used the <code>ActivePerl-5.20.1.2000-MSWin32-x64-298557.msi version</code>. To make the conversion, I used the following command in the console:</p>\n\n<pre><code>perl Markdown.pl input.txt &gt; output.html\n</code></pre>\n\n<p>Problem is, I'm not a native English speaker, and my texts do have a lot of <strong><code>accented characters, like \u00e1, \u00e3, \u00e7, \u00f4 and so on</code></strong>.<br> So my output is a very ugly (and unreadable) text like: </p>\n\n<pre><code>Agora, um c\u00c3\u0192\u00c2\u00b3digo com mais de um par\u00c3\u0192\u00c2\u00a1grafo\n</code></pre>\n\n<p>I've searched, but the closest I could find here was:\n<a href=\"https://stackoverflow.com/questions/22565421/rendering-unicode-characters-in-markdown-from-emacs\">Rendering unicode characters in Markdown from Emacs</a></p>\n\n<p>How to make those non-ASCII characters show correctly? </p>\n\n<p>Thanks! </p>\n"}, {"tags": ["regex", "xml", "perl", "notepad++", "pcre"], "answers": [{"comments": [{"owner": {"reputation": 47, "user_id": 4443646, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4ff1a28a1231e652ce833e466c246005?s=128&d=identicon&r=PG&f=1", "display_name": "kumar", "link": "https://stackoverflow.com/users/4443646/kumar"}, "edited": false, "score": 1, "creation_date": 1421026346, "post_id": 27894147, "comment_id": 44189463, "body": "Hi sputnick, thanks for the quick reply. Actually i need to get the value 1.1111 between <code>&quot;&lt;value&quot;</code> and &quot;/&quot; by using PERL supported RegEX pattern in an application. how to do this?"}, {"owner": {"reputation": 47, "user_id": 4443646, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4ff1a28a1231e652ce833e466c246005?s=128&d=identicon&r=PG&f=1", "display_name": "kumar", "link": "https://stackoverflow.com/users/4443646/kumar"}, "edited": false, "score": 1, "creation_date": 1421026803, "post_id": 27894147, "comment_id": 44189562, "body": "Actually i am using a monitoring tool which supports PERL RegEX, i am not directly trying this on any *nix platforms. I am just trying to accomplish this on the Notepad++ which supports perl RegEX.."}], "tags": [], "owner": {"reputation": 142005, "user_id": 465183, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/3b518a0ea4c992cfe9965671d0139ba4?s=128&d=identicon&r=PG", "display_name": "Gilles Quenot", "link": "https://stackoverflow.com/users/465183/gilles-quenot"}, "is_accepted": false, "score": 1, "last_activity_date": 1421065430, "last_edit_date": 1421065430, "creation_date": 1421026259, "answer_id": 27894147, "question_id": 27894133, "link": "https://stackoverflow.com/questions/27894133/extracting-the-first-decimal-value-between-xml-tags/27894147#27894147", "title": "Extracting the first decimal value between XML tags", "body": "<p>Using <a href=\"/questions/tagged/xpath\" class=\"post-tag\" title=\"show questions tagged 'xpath'\" rel=\"tag\">xpath</a> and <a href=\"/questions/tagged/xmllint\" class=\"post-tag\" title=\"show questions tagged 'xmllint'\" rel=\"tag\">xmllint</a> :</p>\n\n<pre><code>//value/text()\n</code></pre>\n\n<p>Demo in a shell :</p>\n\n<pre><code>$ echo '&lt;value&gt;1.1111/1.22222&lt;/value&gt;'| xmllint --xpath '//value/text()' - |\n    cut -d '/' -f1\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 47, "user_id": 4443646, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4ff1a28a1231e652ce833e466c246005?s=128&d=identicon&r=PG&f=1", "display_name": "kumar", "link": "https://stackoverflow.com/users/4443646/kumar"}, "edited": false, "score": 1, "creation_date": 1421027648, "post_id": 27894282, "comment_id": 44189742, "body": "Actually it gives <code>&lt;value&gt;1.1111&#47;</code> but i am only interested in 1.1111 :("}, {"owner": {"reputation": 8267, "user_id": 1810429, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/68c4911127e973b1fc529ee79cc73cfb?s=128&d=identicon&r=PG", "display_name": "J0e3gan", "link": "https://stackoverflow.com/users/1810429/j0e3gan"}, "reply_to_user": {"reputation": 47, "user_id": 4443646, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4ff1a28a1231e652ce833e466c246005?s=128&d=identicon&r=PG&f=1", "display_name": "kumar", "link": "https://stackoverflow.com/users/4443646/kumar"}, "edited": false, "score": 0, "creation_date": 1421027884, "post_id": 27894282, "comment_id": 44189780, "body": "@kumar: Yes and no. It matches <code>1.1111</code> in the capture group (i.e. between <code>(</code> and <code>)</code>. I think I see your dilema now, though (i.e. that you cannot use a capture group&#39;s value since you are not doing this programmatically but through a tool). I will chew on that a bit and edit with an update."}, {"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 1, "creation_date": 1421031359, "post_id": 27894282, "comment_id": 44190416, "body": "err, surely you want a positive lookbehind?"}, {"owner": {"reputation": 8267, "user_id": 1810429, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/68c4911127e973b1fc529ee79cc73cfb?s=128&d=identicon&r=PG", "display_name": "J0e3gan", "link": "https://stackoverflow.com/users/1810429/j0e3gan"}, "reply_to_user": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 0, "creation_date": 1421032245, "post_id": 27894282, "comment_id": 44190579, "body": "@ysth: Der, der, der. Yes, there was a disconnect between the pattern I presented at the outset of my answer and in the screenshot (which used a positive lookbehind)...and what I explained under &quot;Key points&quot; (wherein I indicated a negative lookbehind). Thanks for catching that. I edited my answer accordingly."}, {"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 1, "creation_date": 1421034025, "post_id": 27894282, "comment_id": 44190923, "body": "a perl positive lookbehind starts <code>(?&lt;=</code>"}, {"owner": {"reputation": 8267, "user_id": 1810429, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/68c4911127e973b1fc529ee79cc73cfb?s=128&d=identicon&r=PG", "display_name": "J0e3gan", "link": "https://stackoverflow.com/users/1810429/j0e3gan"}, "edited": false, "score": 0, "creation_date": 1421034440, "post_id": 27894282, "comment_id": 44191016, "body": "Yes, I noticed that syntax flub and tracked it down to Notepad++...not really even paying attention to the lookbehind \u2013 hence, not catching that syntax flub (and not being a very good way to test this): I already updated my answer accordingly."}, {"owner": {"reputation": 47, "user_id": 4443646, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4ff1a28a1231e652ce833e466c246005?s=128&d=identicon&r=PG&f=1", "display_name": "kumar", "link": "https://stackoverflow.com/users/4443646/kumar"}, "edited": false, "score": 1, "creation_date": 1421038385, "post_id": 27894282, "comment_id": 44191860, "body": "Thx a lot guys, the issue is resolved with J0e3gan&#39;s suggestion."}], "tags": [], "owner": {"reputation": 8267, "user_id": 1810429, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/68c4911127e973b1fc529ee79cc73cfb?s=128&d=identicon&r=PG", "display_name": "J0e3gan", "link": "https://stackoverflow.com/users/1810429/j0e3gan"}, "is_accepted": true, "score": -1, "last_activity_date": 1421034372, "last_edit_date": 1421034372, "creation_date": 1421027451, "answer_id": 27894282, "question_id": 27894133, "link": "https://stackoverflow.com/questions/27894133/extracting-the-first-decimal-value-between-xml-tags/27894282#27894282", "title": "Extracting the first decimal value between XML tags", "body": "<p>Try the following PCRE regex:</p>\n\n<pre><code>(?&lt;=&lt;value&gt;)(\\d+\\.\\d+)(?=\\/)\n</code></pre>\n\n<p><img src=\"https://www.debuggex.com/i/GUrJKWfu0OAph5xK.png\" alt=\"Regular expression visualization\"></p>\n\n<p><a href=\"https://www.debuggex.com/r/GUrJKWfu0OAph5xK\" rel=\"nofollow noreferrer\">Debuggex Demo</a> (with the sample input string in the question)</p>\n\n<p>Key points:</p>\n\n<ul>\n<li><code>(?&lt;=\\&lt;value\\&gt;)</code> \u2013 a positive look<em>behind</em> (<code>(?&lt;=</code>...<code>)</code>) for <code>&lt;value&gt;</code> \u2013 i.e. that <code>&lt;value&gt;</code> precedes the next portion of the input string to match</li>\n<li><code>(\\d+\\.\\d+)</code> \u2013 a decimal number in the form of one or more (<code>+</code>) digits (<code>\\d</code>), a period (<code>\\.</code>), and one or more digits again</li>\n<li><code>(?=\\/)</code> \u2013 a positive look<em>ahead</em> (<code>(?=</code>...<code>)</code>) for <code>/</code> \u2013 i.e. <em>that</em> <code>/</code> follows</li>\n</ul>\n\n<p>I confirmed that it works in Notepad++ (per the comment on sputnick's answer)...</p>\n\n<p><img src=\"https://i.stack.imgur.com/bwe7S.png\" alt=\"Confirmation in Notepad++\"></p>\n\n<p>..., but experimentation revealed that <em><a href=\"http://benmearns.blogspot.com/2011/08/lookbehindlookahead-assertion-with-npp.html\" rel=\"nofollow noreferrer\">the lookbehind appears to be worthless in Notepad++</a></em> (i.e. does not make a difference, the match being performed by the rest of the pattern): basically, <em>your mileage may vary testing this with Notepad++</em>.</p>\n"}, {"tags": [], "owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "is_accepted": false, "score": 0, "last_activity_date": 1421031659, "creation_date": 1421031659, "answer_id": 27894714, "question_id": 27894133, "link": "https://stackoverflow.com/questions/27894133/extracting-the-first-decimal-value-between-xml-tags/27894714#27894714", "title": "Extracting the first decimal value between XML tags", "body": "<p>As a perl regex:</p>\n\n<pre><code>/&lt;value&gt;\\K(?a:\\d+\\.\\d+)(?=\\/)/\n</code></pre>\n\n<p>but if your actual case doesn't support all those features of perl, you may need:</p>\n\n<pre><code>/(?&lt;=&lt;value&gt;)([0-9]+\\.[0-9]+)(?=\\/)/\n</code></pre>\n"}], "owner": {"reputation": 47, "user_id": 4443646, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4ff1a28a1231e652ce833e466c246005?s=128&d=identicon&r=PG&f=1", "display_name": "kumar", "link": "https://stackoverflow.com/users/4443646/kumar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 220, "favorite_count": 0, "accepted_answer_id": 27894282, "answer_count": 3, "score": 0, "last_activity_date": 1421065430, "creation_date": 1421026134, "last_edit_date": 1421031902, "question_id": 27894133, "link": "https://stackoverflow.com/questions/27894133/extracting-the-first-decimal-value-between-xml-tags", "title": "Extracting the first decimal value between XML tags", "body": "<p><code>&lt;value&gt;1.1111/1.22222&lt;/value&gt;</code></p>\n\n<p>Here I need to extract <em>only</em> the first value <code>1.1111</code> that is between <code>&lt;value&gt;</code> and the <code>/</code> in <code>1.1111/1.22222</code>.</p>\n\n<p>Can anyone suggest how to solve this issue?</p>\n\n<p>Note that I am trying to make this work in a monitoring tool that uses Perl regex syntax, and I am testing in Notepad++.</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 2750, "user_id": 801553, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/74c6e34ee0ad953bb3079f5bb5cd9497?s=128&d=identicon&r=PG", "display_name": "Patrick J. S.", "link": "https://stackoverflow.com/users/801553/patrick-j-s"}, "edited": false, "score": 0, "creation_date": 1421023230, "post_id": 27893671, "comment_id": 44188825, "body": "Have you also looked at <code>my</code>, <code>our</code>, <code>local</code> and <code>state</code>. I think its related to scoping mechanisms of perl since your problem seems to be rooted there."}, {"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 0, "creation_date": 1421025797, "post_id": 27893671, "comment_id": 44189347, "body": "just using <code>$main::ARR{...}</code> / <code>%main::ARR</code> will get the right variable (as would declaring <code>our %ARR;</code> as @mob suggests), but only you would be able to tell if the subs in XYZ:: end up getting called before C() is called and the variable is set as you expect."}, {"owner": {"reputation": 61610, "user_id": 725418, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/82ac2dc3e1ad4b7187f245c416528df9?s=128&d=identicon&r=PG", "display_name": "TLP", "link": "https://stackoverflow.com/users/725418/tlp"}, "edited": false, "score": 0, "creation_date": 1421032637, "post_id": 27893671, "comment_id": 44190651, "body": "It is recommended (in the documentation) that you do not use <code>use vars</code> above Perl version 5.6. Use <code>our</code>, or preferably <code>my</code> instead."}, {"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 0, "creation_date": 1421034600, "post_id": 27893671, "comment_id": 44191058, "body": "you say <code>&amp;main::C()</code> is failing?  how?"}, {"owner": {"reputation": 10939, "user_id": 891636, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6dbdad904867cda6f67f452860d212a4?s=128&d=identicon&r=PG", "display_name": "Dayo", "link": "https://stackoverflow.com/users/891636/dayo"}, "reply_to_user": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 0, "creation_date": 1421047870, "post_id": 27893671, "comment_id": 44194637, "body": "@ysth I get a 500 Internal Server Error with a <code>Undefined subroutine &amp;main::C called at &#47;path&#47;to&#47;file.pl line 123</code> error message in my log."}, {"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 0, "creation_date": 1421052967, "post_id": 27893671, "comment_id": 44196611, "body": "well, yes, BEGIN interrupts the compilation and runs the code in it before resuming; when the BEGIN block is running, <code>sub C ...</code> hasn&#39;t even been compiled yet."}, {"owner": {"reputation": 10939, "user_id": 891636, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6dbdad904867cda6f67f452860d212a4?s=128&d=identicon&r=PG", "display_name": "Dayo", "link": "https://stackoverflow.com/users/891636/dayo"}, "edited": false, "score": 0, "creation_date": 1421072594, "post_id": 27893671, "comment_id": 44207359, "body": "So moving the BEGIN to the end of the file should help but still getting the &quot;undefined&quot; error. Perhaps I am missing something although the skeleton I gave appears correct. I will recheck )over 20k lines of code!). I think I will just try to replicate Sub C in Package XYZ although that is really a last resort and still hoping for a better integrated solution."}], "answers": [{"comments": [{"owner": {"reputation": 10939, "user_id": 891636, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6dbdad904867cda6f67f452860d212a4?s=128&d=identicon&r=PG", "display_name": "Dayo", "link": "https://stackoverflow.com/users/891636/dayo"}, "edited": false, "score": 0, "creation_date": 1421096896, "post_id": 27893864, "comment_id": 44220953, "body": "This resolved the issue. The 502 errors I was getting were due to other issues. Thanks!"}], "tags": [], "owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "is_accepted": true, "score": 1, "last_activity_date": 1421023867, "creation_date": 1421023867, "answer_id": 27893864, "question_id": 27893671, "link": "https://stackoverflow.com/questions/27893671/access-external-perl-array-from-begin-block-package/27893864#27893864", "title": "Access &quot;external&quot; Perl Array from &quot;BEGIN&quot; Block/Package", "body": "<p><code>%main:ARR</code> or <code>$main::ARR{index}</code> are correct for the code skeleton you have provided (well, anything is correct because you haven't said <code>use strict</code>, but anyway ...). Is it possible that <code>main</code> is not the correct namespace (i.e., is there some <code>pacakge</code> statement that precedes <code>use vars ...</code>) ?</p>\n\n<p>In any case, you can workaround this issue with the <code>our</code> keyword. If you declare it at the top level, it will have scope throughout the rest of the file:</p>\n\n<pre><code>package ABC;\nour %ARR;      # %ABC::ARR\n\nsub foo {\n   $ARR{\"key\"} = \"value\";  # %ABC::ARR\n}\n\n{   # \"BEGIN\" optional\n    package XYZ;\n    our %Hash;    # %XYZ::Hash\n    sub bar {\n        my $key1 = $Hash{\"key1\"};  # %XYZ::Hash\n        my $val1 = $ARR{$key1};    # %ABC::ARR\n        $ARR{$val1} = $key1;\n    }\n}\n\n...\n</code></pre>\n"}], "owner": {"reputation": 10939, "user_id": 891636, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6dbdad904867cda6f67f452860d212a4?s=128&d=identicon&r=PG", "display_name": "Dayo", "link": "https://stackoverflow.com/users/891636/dayo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 89, "favorite_count": 0, "accepted_answer_id": 27893864, "answer_count": 1, "score": 1, "last_activity_date": 1421050165, "creation_date": 1421021919, "last_edit_date": 1495535197, "question_id": 27893671, "link": "https://stackoverflow.com/questions/27893671/access-external-perl-array-from-begin-block-package", "title": "Access &quot;external&quot; Perl Array from &quot;BEGIN&quot; Block/Package", "body": "<p>Below is a simplified version of a perl script I am trying to modify:</p>\n\n<pre><code>use MODULE_1 ;\nuse MODULE_2 ;\nuse vars qw(%ARR  $VarZZ) ;\n\nsub A {\n    # Somestuff\n\n    # Call to Sub B\n    B() ;\n    # Call to Sub C\n    C() ;\n}\n\nBEGIN {\n    package XYZ ;\n    use vars qw($VarYY  $VarXX) ;\n    # MISC SUBS HERE\n    # end of package XYZ\n}\n\nsub B {\n    # Somestuff\n}\n\nsub C {\n    # Somestuff to set %ARR\n}\n\n# Call to Sub A\nA() ;\n</code></pre>\n\n<p>My issue is that I will like to access %ARR within the package XYZ BEGIN block but keep getting error messages saying I need to define %ARR (\"requires explicit package name\")</p>\n\n<p>I have tried, trying to copy a similar example within the block, <code>$main::ARR{index}</code> but failed so far.</p>\n\n<p>I assume it may be because %ARR isn't set when that block is begin evaluated and that I need to call \"sub C\" perhaps but <code>&amp;main::C();</code> seems to be failing as well.</p>\n\n<p>How can I access this array there?</p>\n\n<p>I have looked at: <a href=\"https://stackoverflow.com/questions/17988642/perls-main-package-block-syntax-pragmas-and-begin-end-blocks\">Perl&#39;s main package - block syntax - pragmas and BEGIN/END blocks</a> which seems to be addressing similar themes but struggling to properly understand the answers</p>\n\n<h1>** EDIT **</h1>\n\n<p>Expanded skeleton script showing some attempts at moving forward:</p>\n\n<pre><code>use MODULE_1 ;\nuse MODULE_2 ;\nuse vars qw(%ARR  $VarZZ) ;\n\nsub A {\n    # Somestuff\n\n    # Call to Sub B\n    B() ;\n    # Call to Sub C\n    C() ;\n    # Call to Sub E\n    E() ;\n}\n\nsub E {\n    # Call to Package XYZ subs\n}\n\nBEGIN {\n    package XYZ ;\n    use vars qw($VarYY  $VarXX %ARR) ;\n\n    # I tried to Call to Sub C and load a local version of %ARR\n    #\n    # This fails with \"Undefined subroutine &amp;main::C\" error\n    &amp;main::C() ;\n    #\n    # We never get here so not sure if correct\n    %ARR = &amp;main::ARR ;\n\n\n    # MISC SUBS HERE\n        sub X {\n            # Call to Sub D\n            &amp;main::D() ;\n        }\n    # end of package XYZ\n}\n\nsub B {\n    # Somestuff\n}\n\nsub C {\n    # Somestuff to set %ARR\n}\nsub D {\n    # Somestuff\n}\n\n# Call to Sub A\nA() ;\n</code></pre>\n\n<p>Note the the call to <code>&amp;main::E()</code> works when called within the Subs in Package XYZ but both this and <code>&amp;main::C()</code> fail when running free standing. Perhaps the free standing call is done at complile time before the subs are defined.</p>\n\n<p>BTW, I tried the <code>our</code> definition but getting a 502 error: <a href=\"http://pastebin.com/qt2GT7ZP\" rel=\"nofollow noreferrer\">Nginx Debug Log</a></p>\n\n<p>Perhaps this is because the array is not available?</p>\n"}, {"tags": ["perl", "ssh", "versioning", "perl-module"], "comments": [{"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1421015277, "post_id": 27892688, "comment_id": 44186773, "body": "If you run: <code>perl -MCPAN -e shell</code> and then <code>o conf</code> you&#39;ll see a <code>prerequisites policy</code> or similar. What does that say? If you set it to <code>follow</code> it&#39;ll download anything needed to install the package."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1421015316, "post_id": 27892688, "comment_id": 44186784, "body": "Presumably you&#39;re on RHEL5, which has 5.8.8 by default? It is a rather old version though, so upgrading wouldn&#39;t go amiss."}, {"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 1, "creation_date": 1421015839, "post_id": 27892688, "comment_id": 44186951, "body": "try upgrading cpanm (App::cpanminus) first"}, {"owner": {"reputation": 649, "user_id": 2355364, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/76fa2e7ac8c45ed7b23ba36175d96d81?s=128&d=identicon&r=PG&f=1", "display_name": "Iluvatar14", "link": "https://stackoverflow.com/users/2355364/iluvatar14"}, "reply_to_user": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1421015947, "post_id": 27892688, "comment_id": 44186978, "body": "@Sobrique I ran <code>o conf</code> and <code>prerequisites policy</code> is set to <code>follow</code>. That was expected, I suppose, since I have installed maybe over 30 modules in the past, but this is the first one that&#39;s given me dependency trouble. And yes, we are using Red Hat/CentOS...I&#39;d love to upgrade from 5.8.8 but it&#39;s not possible at this time for business reasons."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1421016087, "post_id": 27892688, "comment_id": 44187011, "body": "Yeah, I know that problem - I&#39;ve hit it plenty of times. You <i>can</i> parallel install a new version of perl in <code>&#47;usr&#47;local</code>.  (That&#39;s the default path). Failing that though, I&#39;d suggest look at <code>yum list</code> and see if there&#39;s a suitable package to install. Some of them - like SSL based stuff - comes pre-compiled."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1421016606, "post_id": 27892688, "comment_id": 44187153, "body": "Try upgrading <code>version.pm</code>"}, {"owner": {"reputation": 649, "user_id": 2355364, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/76fa2e7ac8c45ed7b23ba36175d96d81?s=128&d=identicon&r=PG&f=1", "display_name": "Iluvatar14", "link": "https://stackoverflow.com/users/2355364/iluvatar14"}, "reply_to_user": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 2, "creation_date": 1421016644, "post_id": 27892688, "comment_id": 44187163, "body": "@ysth upgrading cpanm did the trick, thank you!"}], "answers": [{"tags": [], "owner": {"reputation": 649, "user_id": 2355364, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/76fa2e7ac8c45ed7b23ba36175d96d81?s=128&d=identicon&r=PG&f=1", "display_name": "Iluvatar14", "link": "https://stackoverflow.com/users/2355364/iluvatar14"}, "is_accepted": true, "score": 2, "last_activity_date": 1421016697, "creation_date": 1421016697, "answer_id": 27893019, "question_id": 27892688, "link": "https://stackoverflow.com/questions/27892688/trying-to-install-netopenssh-but-getting-back-invalid-version-for-dependencies/27893019#27893019", "title": "Trying to install Net::OpenSSH but getting back invalid version for dependencies", "body": "<p>Upgrading cpanm and then installing the module resolved the issue.  </p>\n"}], "owner": {"reputation": 649, "user_id": 2355364, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/76fa2e7ac8c45ed7b23ba36175d96d81?s=128&d=identicon&r=PG&f=1", "display_name": "Iluvatar14", "link": "https://stackoverflow.com/users/2355364/iluvatar14"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 526, "favorite_count": 1, "accepted_answer_id": 27893019, "answer_count": 1, "score": 4, "last_activity_date": 1421523729, "creation_date": 1421014529, "last_edit_date": 1421523729, "question_id": 27892688, "link": "https://stackoverflow.com/questions/27892688/trying-to-install-netopenssh-but-getting-back-invalid-version-for-dependencies", "title": "Trying to install Net::OpenSSH but getting back invalid version for dependencies", "body": "<p>I'm working with some perl 5.8.8 legacy code and I usually check my installed packages with    <code>perl -MNet::OpenSSH -e 'print \"worked \\n\"'</code></p>\n\n<p>If it's absent it states:</p>\n\n<pre><code>Can't locate Net/OpenSSH.pm in @INC (@INC contains: /usr/lib/perl5/site_perl/5.8.8/i386-linux-thread-multi /usr/lib/perl5/site_perl/5.8.8 /usr/lib/perl5/site_perl /usr/lib/perl5/vendor_perl/5.8.8/i386-linux-thread-multi /usr/lib/perl5/vendor_perl/5.8.8 /usr/lib/perl5/vendor_perl /usr/lib/perl5/5.8.8/i386-linux-thread-multi /usr/lib/perl5/5.8.8 .).\n        BEGIN failed--compilation aborted.\n</code></pre>\n\n<p>Which is normal. Then I run cpanm  and it installs. However, with this OpenSSH module I am getting back that some dependencies are not a valid version.</p>\n\n<pre><code>kristen:/web# cpanm Net::OpenSSH\ninstall is up to date. (0.01)\n--&gt; Working on Net::OpenSSH\nFetching http://www.cpan.org/authors/id/S/SA/SALVA/Net-OpenSSH-0.62.tar.gz ... OK\nConfiguring Net-OpenSSH-0.62 ... OK\nFailed to clean-up 2 metadata. Errors:\n'version=HASH(0x8eb66f4)' for 'Test::More' is not a valid version. (prereqs -&gt; runtime -&gt; requires -&gt; Test::More) [Validation: 2]\n'version=HASH(0x8eb6700)' for 'ExtUtils::MakeMaker' is not a valid version. (prereqs -&gt; configure -&gt; requires -&gt; ExtUtils::MakeMaker) [Validation: 2]\n'version=HASH(0x8eb69f4)' for 'ExtUtils::MakeMaker' is not a valid version. (prereqs -&gt; build -&gt; requires -&gt; ExtUtils::MakeMaker) [Validation: 2]\n</code></pre>\n\n<p>I used <code>cpanm upgrade Test::More</code> which didn't resolved the problem for that module so I think I need a lower version number. So how do I check what versions I need to use Net::OpenSSH?</p>\n"}, {"tags": ["arrays", "perl", "compare"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1421008827, "post_id": 27891829, "comment_id": 44184714, "body": "What does <i>&quot;not working&quot;</i> mean? The code you have posted won&#39;t even compile. You must post your <i>real code</i> and not type an example in from memory."}, {"owner": {"reputation": 33, "user_id": 4229008, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/00fdb810776c40c685cd227fbea5e4ff?s=128&d=identicon&r=PG&f=1", "display_name": "Rhys Howells", "link": "https://stackoverflow.com/users/4229008/rhys-howells"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1421009081, "post_id": 27891829, "comment_id": 44184816, "body": "The compare function isn&#39;t working, it&#39;s just outputing"}], "answers": [{"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 2, "last_activity_date": 1421009186, "creation_date": 1421009186, "answer_id": 27891894, "question_id": 27891829, "link": "https://stackoverflow.com/questions/27891829/perl-compare-array-elements-to-single-character/27891894#27891894", "title": "perl compare array elements to single character", "body": "<p>As I said, the Perl that you have posted is a long way from even compiling, but it looks like you may want something like this</p>\n\n<pre><code>use strict;\nuse warnings;\n\nmy @selectword = (); # Initialise with real data\n\nchomp (my $letter = &lt;&gt;);\n\nfor my $i (0 .. $#selectword) {\n    if ($selectword[$i] eq $letter) {\n        print(\"Match\\n\");\n    }\n    else {\n      print(\"No Match\\n\");\n    }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 4429913, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6654d7a6c0d637e998fb68cd28272a0b?s=128&d=identicon&r=PG&f=1", "display_name": "Sirivsk", "link": "https://stackoverflow.com/users/4429913/sirivsk"}, "is_accepted": false, "score": 0, "last_activity_date": 1421066567, "creation_date": 1421066567, "answer_id": 27902305, "question_id": 27891829, "link": "https://stackoverflow.com/questions/27891829/perl-compare-array-elements-to-single-character/27902305#27902305", "title": "perl compare array elements to single character", "body": "<p>I think you have not pasted your whole program.\nbut looking at the part of the code, you should be probably using string equality operator for comparing letters \"eq\" in line if(@selectword[$i]==$letter) instead of \"==\" which is for numeric comparison.</p>\n"}], "owner": {"reputation": 33, "user_id": 4229008, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/00fdb810776c40c685cd227fbea5e4ff?s=128&d=identicon&r=PG&f=1", "display_name": "Rhys Howells", "link": "https://stackoverflow.com/users/4229008/rhys-howells"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 39, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1520934999, "creation_date": 1421008714, "last_edit_date": 1520934999, "question_id": 27891829, "link": "https://stackoverflow.com/questions/27891829/perl-compare-array-elements-to-single-character", "title": "perl compare array elements to single character", "body": "<p>, Working on comparing all elements of an array to a single character.</p>\n\n<pre><code>chomp($letter=&lt;STDIN&gt;);\n\n $i=0;\n\n for($i=0;$i&lt;$length:$i++){\n    if(@selectword[$i]==$letter)\n           {\n            print(\"Match\\n\");\n            }\n           else\n            {\n            print(\"No Match\\n\");\n            }\n        }\n }\n</code></pre>\n\n<p>currently not working with array set as test\noutput is</p>\n\n<pre><code>match\nmatch\nmatch\nmatch\n</code></pre>\n\n<p>regardless of any letter entered.</p>\n"}, {"tags": ["html", "bash", "perl", "ssh"], "comments": [{"owner": {"reputation": 60461, "user_id": 3636601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/69a1b4f750ece89db0e49c94519f1a7d?s=128&d=identicon&r=PG&f=1", "display_name": "Jens", "link": "https://stackoverflow.com/users/3636601/jens"}, "edited": false, "score": 1, "creation_date": 1420999093, "post_id": 27890239, "comment_id": 44181421, "body": "Why you do not use <a href=\"http://search.cpan.org/dist/Net-SSH/SSH.pm\" rel=\"nofollow noreferrer\">Net::SSH</a>?"}, {"owner": {"reputation": 45, "user_id": 4389977, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/48920c48b52b66eb0cb84b44e8cfa082?s=128&d=identicon&r=PG&f=1", "display_name": "matthewthegreat", "link": "https://stackoverflow.com/users/4389977/matthewthegreat"}, "reply_to_user": {"reputation": 60461, "user_id": 3636601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/69a1b4f750ece89db0e49c94519f1a7d?s=128&d=identicon&r=PG&f=1", "display_name": "Jens", "link": "https://stackoverflow.com/users/3636601/jens"}, "edited": false, "score": 0, "creation_date": 1421000646, "post_id": 27890239, "comment_id": 44181873, "body": "Thanks I will look into it"}, {"owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 0, "creation_date": 1421024003, "post_id": 27890239, "comment_id": 44188964, "body": "Because you assign a value to <code>$name</code> but then try to use the value from <code>$servername</code>?"}], "answers": [{"comments": [{"owner": {"reputation": 45, "user_id": 4389977, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/48920c48b52b66eb0cb84b44e8cfa082?s=128&d=identicon&r=PG&f=1", "display_name": "matthewthegreat", "link": "https://stackoverflow.com/users/4389977/matthewthegreat"}, "edited": false, "score": 0, "creation_date": 1421000854, "post_id": 27890345, "comment_id": 44181940, "body": "Thx As I mentioned I&#39;m new to PERL. So I&#39;m not understanding ur example. I&#39;m trying to relate ur example to what I have to do. So I  Have to go line by line and figure ur example. It may take me a while. Thank you for yoru reply"}, {"owner": {"reputation": 19192, "user_id": 257635, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/El2tc.jpg?s=128&g=1", "display_name": "Chankey Pathak", "link": "https://stackoverflow.com/users/257635/chankey-pathak"}, "reply_to_user": {"reputation": 45, "user_id": 4389977, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/48920c48b52b66eb0cb84b44e8cfa082?s=128&d=identicon&r=PG&f=1", "display_name": "matthewthegreat", "link": "https://stackoverflow.com/users/4389977/matthewthegreat"}, "edited": false, "score": 0, "creation_date": 1421039505, "post_id": 27890345, "comment_id": 44192157, "body": "I&#39;ve added comments in code so that you can understand what&#39;s going on."}], "tags": [], "owner": {"reputation": 19192, "user_id": 257635, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/El2tc.jpg?s=128&g=1", "display_name": "Chankey Pathak", "link": "https://stackoverflow.com/users/257635/chankey-pathak"}, "is_accepted": false, "score": 1, "last_activity_date": 1421039484, "last_edit_date": 1421039484, "creation_date": 1420999565, "answer_id": 27890345, "question_id": 27890239, "link": "https://stackoverflow.com/questions/27890239/running-bash-command-using-ssh-in-perl/27890345#27890345", "title": "running bash command using SSH in PERL", "body": "<p>As Jens suggested you should use <a href=\"https://metacpan.org/pod/Net::SSH\" rel=\"nofollow\">Net::SSH</a>, that'll make your task easy and reliable.</p>\n\n<p>Sample:</p>\n\n<pre><code>#always use the below in your Perl script\nuse strict;\nuse warnings;\n#load the Net::SSH module and import sshopen2 from it\nuse Net::SSH qw(sshopen2); \n#type credentitals and the command you want to execute (this would be your bash script)\nmy $user = \"username\";\nmy $host = \"hostname\";\nmy $cmd = \"command\";\n#use sshopen2 to run your command \nsshopen2(\"$user\\@$host\", *READER, *WRITER, \"$cmd\") || die \"ssh: $!\";\n#read the result \nwhile (&lt;READER&gt;) { #loop through line by line of result\n    chomp(); #delete \\n (new line) from each line\n    print \"$_\\n\"; #print the line from result\n}     \n#close the handles\nclose(READER);\nclose(WRITER);\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 61610, "user_id": 725418, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/82ac2dc3e1ad4b7187f245c416528df9?s=128&d=identicon&r=PG", "display_name": "TLP", "link": "https://stackoverflow.com/users/725418/tlp"}, "edited": false, "score": 0, "creation_date": 1421005787, "post_id": 27890356, "comment_id": 44183630, "body": "No reason to downvote a correct answer, with correct feedback regarding the danger of using user input without sanitizing it."}, {"owner": {"reputation": 946, "user_id": 1765406, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/Koqta.jpg?s=128&g=1", "display_name": "vanHoesel", "link": "https://stackoverflow.com/users/1765406/vanhoesel"}, "edited": false, "score": 1, "creation_date": 1421051449, "post_id": 27890356, "comment_id": 44195926, "body": "it&#39;s not a very nice way to answer a question from someone who obviously just started Perl, who asks to be very patient... and then start yelling at him... as if he just committed the greatest crime in programming. It&#39;s fine to word your answer like that with your peer programmers, but not towards a beginner."}, {"owner": {"reputation": 27697, "user_id": 4433386, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/hbHEL.png?s=128&g=1", "display_name": "Marcus M&#252;ller", "link": "https://stackoverflow.com/users/4433386/marcus-m%c3%bcller"}, "reply_to_user": {"reputation": 946, "user_id": 1765406, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/Koqta.jpg?s=128&g=1", "display_name": "vanHoesel", "link": "https://stackoverflow.com/users/1765406/vanhoesel"}, "edited": false, "score": 1, "creation_date": 1421051706, "post_id": 27890356, "comment_id": 44196028, "body": "@vanHoesel well, you&#39;ve got a point; I&#39;ll change the wording, but in my humble eyes, he did commit one of the gravest crimes in programming, which is not sanitizing user input in a CGI; that really is the first thing every book on CGI, Perl, every tutor and every friend helping you to write an application should have told you."}], "tags": [], "owner": {"reputation": 27697, "user_id": 4433386, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/hbHEL.png?s=128&g=1", "display_name": "Marcus M&#252;ller", "link": "https://stackoverflow.com/users/4433386/marcus-m%c3%bcller"}, "is_accepted": false, "score": 3, "last_activity_date": 1421051885, "last_edit_date": 1421051885, "creation_date": 1420999629, "answer_id": 27890356, "question_id": 27890239, "link": "https://stackoverflow.com/questions/27890239/running-bash-command-using-ssh-in-perl/27890356#27890356", "title": "running bash command using SSH in PERL", "body": "<p>Please: Never, never, never use user input in a call to system, without at least trying to sanitize them! It is a terrible mistake to assume that the user won't break your system by entering strings that can somehow escape what you're trying to do and do something else. In this case, something like <code>192.168.0.1 rm -rf /</code> would be sufficient to delete all files from your ssh server. Please heed the standard way of doing things, which is never using user input in a executed command.</p>\n\n<p>There's plenty of modules, and even a standard one, <a href=\"https://metacpan.org/pod/Net::SSH\" rel=\"nofollow\"><code>Net::SSH</code></a>, which can do SSH for you.</p>\n"}], "owner": {"reputation": 45, "user_id": 4389977, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/48920c48b52b66eb0cb84b44e8cfa082?s=128&d=identicon&r=PG&f=1", "display_name": "matthewthegreat", "link": "https://stackoverflow.com/users/4389977/matthewthegreat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 871, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1421051885, "creation_date": 1420998980, "question_id": 27890239, "link": "https://stackoverflow.com/questions/27890239/running-bash-command-using-ssh-in-perl", "title": "running bash command using SSH in PERL", "body": "<p>Please be patient. I'm very new to perl. I'm passing a HTML variable from html form to a PERL/CGI script.  Pls see the following</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict; use warnings;\nuse CGI::Carp; # send errors to the browser, not to the logfile\nuse CGI;\nmy $cgi = CGI-&gt;new(); # create new CGI object\nmy $name = $cgi-&gt;param('servername');\nprint $cgi-&gt;header('text/html');\nprint \"Server name is /n, $servername\";\n#system(\"/var/www/cgi-bin/localbashscript $servername\");\n#system(\"ssh $servername \"remotebashscript\" &gt; localfile or display back to html );\n</code></pre>\n\n<p>Basically from the HTML form,  I need to pass the server name.\nI tried using the system command to pass on the servername to \"localbashscript\" that runs my ssh command. But, I cannot get it to work. It was suggested that I do the SSH in PERL, but I have no idea how to do it.  </p>\n\n<p>In short, I have to call a bash script (remotebashscript) on the remote server ( $servername) and display the content back to the html or at least pipe it to  a local file. The first thing I need to do before running the remotebashscript is to set my environment variables. This is how I would do it in bash. I set my env variable by sourcing the .profile and then I execute the remotebashscript  and redirect it to a local file. </p>\n\n<pre><code>  ssh $servername \". ~/.profile;remotebashscript\" &gt; localfile\n</code></pre>\n\n<p>I have no idea how to achieve the same thing using perl  and seek your help. I tried below and did not work</p>\n\n<pre><code> system(\"ssh $servername \". ~/.profile; remotebashscript\" \");\n</code></pre>\n\n<p>Thanking you in advance </p>\n"}, {"tags": ["perl"], "answers": [{"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1421000768, "post_id": 27890113, "comment_id": 44181909, "body": "Seems to me an AoA would make far more sense than an HoA here."}], "tags": [], "owner": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "is_accepted": false, "score": 1, "last_activity_date": 1420998136, "creation_date": 1420998136, "answer_id": 27890113, "question_id": 27890071, "link": "https://stackoverflow.com/questions/27890071/perl-concatenate-name-of-an-array-with-an-existing-value/27890113#27890113", "title": "Perl concatenate name of an array with an existing value", "body": "<p>You want to use hash,</p>\n\n<pre><code>use strict;\nuse warnings;\n\nmy %hash;\nfor my $i (1 .. 5) {\n\n  $hash{ \"array$i\" } = [];\n}\n</code></pre>\n\n<p>Long story short: <a href=\"http://perl.plover.com/varvarname.html\" rel=\"nofollow\"><code>Why it's stupid to use a variable as a variable name</code></a></p>\n"}, {"tags": [], "owner": {"reputation": 155387, "user_id": 978917, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/92d059913eace78a868a3e87f98e0a57?s=128&d=identicon&r=PG", "display_name": "ruakh", "link": "https://stackoverflow.com/users/978917/ruakh"}, "is_accepted": true, "score": 4, "last_activity_date": 1420998158, "creation_date": 1420998158, "answer_id": 27890115, "question_id": 27890071, "link": "https://stackoverflow.com/questions/27890071/perl-concatenate-name-of-an-array-with-an-existing-value/27890115#27890115", "title": "Perl concatenate name of an array with an existing value", "body": "<p>Yes, you <em>can</em> do this, but no, you <em>should not</em> do this.</p>\n\n<p>What you should do instead is use an array of references to <em>anonymous arrays</em>:</p>\n\n<pre><code>@arrayrefs = ();\n$i = 0;\nwhile ($i &lt;= 5) {\n    $arrayrefs[$i] = [];\n    $i++;\n}\n</code></pre>\n\n<p>or, more tersely:</p>\n\n<pre><code>@arrayrefs = ([], [], [], [], [], []);\n</code></pre>\n\n<hr>\n\n<p>But for completeness' sake . . . you <em>can</em> do this, by using \"symbolic references\":</p>\n\n<pre><code>$i = 0;\nwhile ($i &lt;= 5) {\n    my $name = \"array$i\";\n    @$name = ();\n    $i++;\n}\n</code></pre>\n\n<p>(of course, arrays default to the empty array anyway, so this isn't really needed . . .).</p>\n\n<hr>\n\n<p>By the way, note that it's actually customary to use a <em>for loop</em> rather than a while loop for such simple cases. Either this:</p>\n\n<pre><code>for ($i = 0; $i &lt;= 5; $i++) {\n    ...\n}\n</code></pre>\n\n<p>or this:</p>\n\n<pre><code>for $i (0 .. 5) {\n    ...\n}\n</code></pre>\n"}], "owner": {"reputation": 509, "user_id": 3845409, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/987b0660e003f6179229673548b543e2?s=128&d=identicon&r=PG&f=1", "display_name": "dres", "link": "https://stackoverflow.com/users/3845409/dres"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 101, "favorite_count": 0, "accepted_answer_id": 27890115, "answer_count": 2, "score": 1, "last_activity_date": 1420998158, "creation_date": 1420997864, "question_id": 27890071, "link": "https://stackoverflow.com/questions/27890071/perl-concatenate-name-of-an-array-with-an-existing-value", "title": "Perl concatenate name of an array with an existing value", "body": "<p>The question is like this:\nI have a loop. And while I iterate this loop I want to create a number of arrays with the following names: <code>array1</code> <code>array2</code> <code>array3</code>...</p>\n\n<p>I am wondering if there is a way to concatenate these names in perl\nI tried something like this but I get an error</p>\n\n<pre><code>$i = 0;\nwhile ($i &lt;= 5) {\n    @array . $i = ();\n    $i++;\n}\n</code></pre>\n"}, {"tags": ["perl", "anyevent"], "answers": [{"tags": [], "owner": {"reputation": 248, "user_id": 3716001, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c99d770e9a06e9087aa1a955f1ea6b9?s=128&d=identicon&r=PG", "display_name": "Paul Grove", "link": "https://stackoverflow.com/users/3716001/paul-grove"}, "is_accepted": false, "score": 1, "last_activity_date": 1430314631, "creation_date": 1430314631, "answer_id": 29945451, "question_id": 27888919, "link": "https://stackoverflow.com/questions/27888919/anyeventsocket-and-abstract-unix-socket/29945451#29945451", "title": "AnyEvent::Socket and abstract UNIX socket", "body": "<p>Hi I dug into this one a bit, the short answer is that AnyEvent::Socket doesnt support abstract sockets.</p>\n\n<p>The Longer answer is that it really should, and as far as I can see its a small oversight preventing it from working.</p>\n\n<p>The sub <code>resolve_sockaddr</code> is the culprit, line 718 in my version:</p>\n\n<pre><code>   if ($node eq \"unix/\") {\n      return $cb-&gt;() if $family || $service !~ /^\\//; # no can do\n\n      return $cb-&gt;([AF_UNIX, defined $type ? $type : SOCK_STREAM, 0, Socket::pack_sockaddr_un $service]);\n   }\n</code></pre>\n\n<p>The part of the line which reads <code>$service !~ /^\\//; # no can do</code> is what is preventing it from working.</p>\n\n<p>In my case I just commented out that line, and it worked, but really the regex should be modified to allow for <code>\\0</code> at the front to denote the abstract socket path.</p>\n\n<p>You have a few options:</p>\n\n<ul>\n<li>Modify your local copy of the library</li>\n<li>Push the change upstream to Marc Lehmann and hope he accepts a patch</li>\n<li>Monkey patch the function</li>\n<li>Implement your own module which supports abstract domain sockets</li>\n</ul>\n\n<p>Good luck.</p>\n"}], "owner": {"reputation": 2230, "user_id": 1347147, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a115b89872ed6ce5a99c2ff22a1c2be6?s=128&d=identicon&r=PG", "display_name": "askovpen", "link": "https://stackoverflow.com/users/1347147/askovpen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 256, "favorite_count": 1, "answer_count": 1, "score": 2, "last_activity_date": 1430314631, "creation_date": 1420991094, "question_id": 27888919, "link": "https://stackoverflow.com/questions/27888919/anyeventsocket-and-abstract-unix-socket", "title": "AnyEvent::Socket and abstract UNIX socket", "body": "<p>With Socket i can use:</p>\n\n<pre><code>socket(my $socket, AF_UNIX, SOCK_STREAM, 0)\n    or die \"socket: $!\";\nmy $sock_addr = sockaddr_un(chr(0).'/abstract/socket');\nconnect($socket, $sock_addr)  or die \"connect: $!\";\n</code></pre>\n\n<p>all ok. i connect and can transmit/receive;</p>\n\n<p>With AnyEvent::Socket:</p>\n\n<pre><code>tcp_connect \"unix/\",chr(0).'/abstract/socket' , sub {\n    my ($fh) = @_\n        or die \"unable to connect: $!\";\n    ...\n}\n</code></pre>\n\n<p>and get error: <code>unable to connect: No such device or address at file.pl line X.</code></p>\n\n<p>How to use abstract UNIX sockets with Anyevent::Socket?</p>\n"}, {"tags": ["perl", "cookies", "lwp", "netscape"], "comments": [{"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1420980209, "post_id": 27886991, "comment_id": 44175279, "body": "Can you give us an example of the file formats? I&#39;ve actually had some success with &#39;just&#39; loading a <code>cookies.txt</code> straight into LWP."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1420980335, "post_id": 27886991, "comment_id": 44175326, "body": "Also: Might be useful to reformat the cookies at export: <a href=\"https://addons.mozilla.org/en-us/firefox/addon/export-cookies/\" rel=\"nofollow noreferrer\">addons.mozilla.org/en-us/firefox/addon/export-cookies</a>"}, {"owner": {"reputation": 3273, "user_id": 705297, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/511b1c44cd293cbf9f5ed1dd1214f41a?s=128&d=identicon&r=PG", "display_name": "POMATu", "link": "https://stackoverflow.com/users/705297/pomatu"}, "reply_to_user": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1420982640, "post_id": 27886991, "comment_id": 44176060, "body": "Thanks, with this extention everything worked ok"}], "answers": [{"tags": [], "owner": {"reputation": 3273, "user_id": 705297, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/511b1c44cd293cbf9f5ed1dd1214f41a?s=128&d=identicon&r=PG", "display_name": "POMATu", "link": "https://stackoverflow.com/users/705297/pomatu"}, "is_accepted": false, "score": 0, "last_activity_date": 1420982727, "creation_date": 1420982727, "answer_id": 27887584, "question_id": 27886991, "link": "https://stackoverflow.com/questions/27886991/convert-netscape-cookies-to-lwp-perl/27887584#27887584", "title": "convert netscape cookies to LWP perl", "body": "<p>With this extension I have exported cookies and everything got converted correctly:</p>\n\n<p><a href=\"https://addons.mozilla.org/en-us/firefox/addon/export-cookies/\" rel=\"nofollow\">https://addons.mozilla.org/en-us/firefox/addon/export-cookies/</a></p>\n"}], "owner": {"reputation": 3273, "user_id": 705297, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/511b1c44cd293cbf9f5ed1dd1214f41a?s=128&d=identicon&r=PG", "display_name": "POMATu", "link": "https://stackoverflow.com/users/705297/pomatu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 706, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1420982727, "creation_date": 1420979039, "question_id": 27886991, "link": "https://stackoverflow.com/questions/27886991/convert-netscape-cookies-to-lwp-perl", "title": "convert netscape cookies to LWP perl", "body": "<p>I am trying to convert cookies in Netscape format that were exported from firefox to LWP format to use them in another library that wants cookies only in LWP format. I am using this script</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse LWP;\nuse HTTP::Cookies;\nuse Data::Dumper;\n\nmy $in =  'cookies.txt';\nmy $out = 'cookies.lwp';\nmy $c = HTTP::Cookies::Netscape-&gt;new;\n$c-&gt;load($in);\nprint Dumper($c);\n$c-&gt;HTTP::Cookies::save($out);\n\nexit;\n</code></pre>\n\n<p>But I am getting empty LWP cookie file, and Dumper prints</p>\n\n<pre><code>$VAR1 = bless( {\n                 '' =&gt; 'cookies.txt',\n                 'COOKIES' =&gt; {}\n               }, 'HTTP::Cookies::Netscape' );\n</code></pre>\n\n<p>Why HTTP:Cookies cant read my cookies file in Netscape format?</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 3698, "user_id": 1848585, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/9JLaK.png?s=128&g=1", "display_name": "Brian Tiffin", "link": "https://stackoverflow.com/users/1848585/brian-tiffin"}, "edited": false, "score": 0, "creation_date": 1420967410, "post_id": 27885473, "comment_id": 44172244, "body": "Take a look at MCE, the many core engine.  A CPAN module."}], "answers": [{"tags": [], "owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "is_accepted": false, "score": 4, "last_activity_date": 1420967727, "creation_date": 1420967727, "answer_id": 27885553, "question_id": 27885473, "link": "https://stackoverflow.com/questions/27885473/how-to-run-two-or-more-perl-programs-in-parallel-i-e-with-two-or-more-pl-fi/27885553#27885553", "title": "How to run two or more Perl programs in parallel -- i.e. with two or more .pl files", "body": "<p>You aren't seeing parallelism because your pro_1 and pro_2 programs take almost no time.</p>\n\n<p>Place a <code>sleep 1;</code> into their loops and you will see that their output is interleaved.\nYou will also see that you may want to do <code>$pm-&gt;wait_all_children</code> after your <code>foreach my $pro</code> loop so your main program continues until all the children are done.</p>\n"}], "owner": {"reputation": 31, "user_id": 4441823, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/12a9bcb84953d8a28dc776315dd63fc7?s=128&d=identicon&r=PG&f=1", "display_name": "Rashmi Dibyajyoti", "link": "https://stackoverflow.com/users/4441823/rashmi-dibyajyoti"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 93, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1420988276, "creation_date": 1420966877, "last_edit_date": 1420988276, "question_id": 27885473, "link": "https://stackoverflow.com/questions/27885473/how-to-run-two-or-more-perl-programs-in-parallel-i-e-with-two-or-more-pl-fi", "title": "How to run two or more Perl programs in parallel -- i.e. with two or more .pl files", "body": "<p>I checked with two approaches but non seems to have succeeded.</p>\n\n<p>Two Perl files to be used in the below cases,</p>\n\n<p><strong>pro_1.pl</strong></p>\n\n<pre><code>use strict;\n\nfor (1..10) {\n    print \"finite for one\\n\";\n}\n</code></pre>\n\n<p><strong>pro_2.pl</strong></p>\n\n<pre><code>use strict;\n\nfor (1..10){\n    print \"finite for two\\n\";\n}\n</code></pre>\n\n<p><strong>Case 1</strong> using <a href=\"https://metacpan.org/module/Parallel::ForkManager\" rel=\"nofollow\"><code>Parallel::ForkManager</code></a></p>\n\n<pre><code>use strict;\nuse warnings;\n\nuse Parallel::ForkManager;\n\nmy $pm = new Parallel::ForkManager(2);\nmy @all_pro = (\"pro_1.pl\", \"pro_2.pl\");\n\nforeach my $pro (@all_pro) {\n    # Forks and returns the pid for the child:\n    my $pid = $pm-&gt;start and next; \n    system (\"perl $pro\");\n\n    $pm-&gt;finish; # Terminates the child process\n  }\n</code></pre>\n\n<p><strong>Output:</strong></p>\n\n<pre><code>$ finite for one\nfinite for one\nfinite for one\nfinite for one\nfinite for one\nfinite for one\nfinite for one\nfinite for one\nfinite for one\nfinite for one\nfinite for two\nfinite for two\nfinite for two\nfinite for two\nfinite for two\nfinite for two\nfinite for two\nfinite for two\nfinite for two\nfinite for two\n</code></pre>\n\n<p>There is no interleave between the print statements from two different programs.</p>\n\n<p><strong>Case 2</strong> using Perl threads</p>\n\n<pre><code>use threads;\n\nmy $child_thread = threads-&gt;new(\\&amp;my_function1, \"pro_1.pl\");\nmy $child_thread2 = threads-&gt;new(\\&amp;my_function2, \"pro_2.pl\");\n# ...\n\nmy $this_thread = threads-&gt;self;\nprint \"Main thread: $this_thread\\n\";\nmy $tid = $this_thread-&gt;tid;\nprint \"TID of current thread: $tid\\n\";\n\nmy @threads = threads-&gt;list;\nprint \"All threads: @threads\\n\";\n\nforeach my $thr (@threads) {\n    my $thr_pid = $thr-&gt;tid;\n    print \"Child Thread PID: $thr_pid\\n\";\n    $thr-&gt;join;\n}\n\nsub my_function1 {\n    system (\"perl @_\");\n}\n\nsub my_function2 {\n    system (\"perl @_\");\n}\n</code></pre>\n\n<p><strong>Output:</strong></p>\n\n<pre><code>$ finite for one\nfinite for one\nfinite for one\nfinite for one\nfinite for one\nfinite for one\nfinite for one\nfinite for one\nfinite for one\nfinite for one\nfinite for two\nfinite for two\nfinite for two\nfinite for two\nfinite for two\nfinite for two\nfinite for two\nfinite for two\nfinite for two\nfinite for two\n</code></pre>\n\n<p>Output for both cases were same. With these cases, in actual when the 1st program finishes the second is run. No real parallelism. If I run them in subroutine, then parallelism is achieved i.e. you would be able to see \"finite for two\" and \"finite for one\" statements are interleaved.</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 882, "user_id": 3965075, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/FLP7B.jpg?s=128&g=1", "display_name": "Praveen", "link": "https://stackoverflow.com/users/3965075/praveen"}, "edited": false, "score": 0, "creation_date": 1420966759, "post_id": 27884986, "comment_id": 44172129, "body": "You can slurp the whole document into a variable and then try to get the value between the pattern . This should help you"}], "answers": [{"comments": [{"owner": {"reputation": 882, "user_id": 3965075, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/FLP7B.jpg?s=128&g=1", "display_name": "Praveen", "link": "https://stackoverflow.com/users/3965075/praveen"}, "edited": false, "score": 0, "creation_date": 1420990322, "post_id": 27885842, "comment_id": 44178427, "body": "The question was not clear and as per his code , i have modified . Can i know why my answer was given negative ?"}, {"owner": {"reputation": 882, "user_id": 3965075, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/FLP7B.jpg?s=128&g=1", "display_name": "Praveen", "link": "https://stackoverflow.com/users/3965075/praveen"}, "reply_to_user": {"reputation": 3, "user_id": 4441744, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-r0NYNzYHq2s/AAAAAAAAAAI/AAAAAAAAABc/6BRyVtc_wtU/photo.jpg?sz=128", "display_name": "clement", "link": "https://stackoverflow.com/users/4441744/clement"}, "edited": false, "score": 0, "creation_date": 1421070384, "post_id": 27885842, "comment_id": 44206002, "body": "Edit the question and post your expected output for the input that you have given."}, {"owner": {"reputation": 3, "user_id": 4441744, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-r0NYNzYHq2s/AAAAAAAAAAI/AAAAAAAAABc/6BRyVtc_wtU/photo.jpg?sz=128", "display_name": "clement", "link": "https://stackoverflow.com/users/4441744/clement"}, "edited": false, "score": 0, "creation_date": 1421743621, "post_id": 27885842, "comment_id": 44465538, "body": "Hi Praveen... i have editing my question.. Are you able to have a look... Thanks in advance."}], "tags": [], "owner": {"reputation": 882, "user_id": 3965075, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/FLP7B.jpg?s=128&g=1", "display_name": "Praveen", "link": "https://stackoverflow.com/users/3965075/praveen"}, "is_accepted": false, "score": 0, "last_activity_date": 1421753355, "last_edit_date": 1421753355, "creation_date": 1420970624, "answer_id": 27885842, "question_id": 27884986, "link": "https://stackoverflow.com/questions/27884986/extracting-a-paragraph-between-two-key-words-in-perl/27885842#27885842", "title": "Extracting a paragraph between two key words in Perl", "body": "<p>@clement: You can try below perl code :</p>\n\n<p><strong>Without Slurping:</strong></p>\n\n<pre><code>use strict;\nuse warnings;\n\nmy $filename = $ARGV[0];\nmy ($file,$ext)=$filename =~ /(.*?)(\\..*?)/;\nmy $outfile = \"$file\" . \"\\.out\";\nopen my $fh,'&lt;',$filename or die \"File $filename cannot be opened: $!\";\nopen my $oh,'&gt;',$outfile or die \"File $outfile cannot be opened : $!\";\nmy $start=0;\nwhile(&lt;$fh&gt;)\n{\n     if($_ =~ /ooaijp01\\.intlb\\.net\\-pool/is)\n      { \n         $start = $.;\n     print $_ . \"\\n\";\n      }\n\n     elsif($start&gt;0 &amp;&amp; $_ !~ /pool/)\n      {\n          print $_ . \"\\n\";\n        }\n\n}\n</code></pre>\n\n<p><strong>Using Slurping :</strong></p>\n\n<pre><code>use strict;\nuse warnings;\n\nmy $filename = $ARGV[0];\nmy ($file,$ext)=$filename =~ /(.*?)(\\..*?)/;\nmy $outfile = \"$file\" . \"\\.out\";\nopen my $fh,'&lt;',$filename or die \"File $filename cannot be opened: $!\";\nopen my $oh,'&gt;',$outfile or die \"File $outfile cannot be opened : $!\";\n\nmy $document = do {\n         local $/ = undef;\n         open my $fh,'&lt;',$filename or die \"Couldn't open the file $filename:$!\";\n       &lt;$fh&gt;;\n      };\n\n\nsub Processing\n{\n    my $result = $_[0];\n     if($result =~ /ooaijp01\\.intlb\\.net\\-pool/isg)\n       {\n          print $oh $result . \"\\n\";\n        }\n     }          \n\n$document =~ s/(pool\\s*\\{.*?\\s*\\}\\s*pool)/Processing($1)/eisg;    #Between the keywords pool\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 82895, "user_id": 372239, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/2twLb.jpg?s=128&g=1", "display_name": "Toto", "link": "https://stackoverflow.com/users/372239/toto"}, "is_accepted": false, "score": 0, "last_activity_date": 1420976053, "creation_date": 1420976053, "answer_id": 27886562, "question_id": 27884986, "link": "https://stackoverflow.com/questions/27884986/extracting-a-paragraph-between-two-key-words-in-perl/27886562#27886562", "title": "Extracting a paragraph between two key words in Perl", "body": "<p>Here is a way to do the job:</p>\n\n<pre><code>#!/usr/bin/perl\nuse Modern::Perl;\n\nmy $toprint;\nmy @out;\nwhile(&lt;DATA&gt;) {\n   chomp;\n   if (/^\\s*pool\\b/) { # ^\\s* is mandatory to not catch net-pool\n      if ($toprint) {\n         say $_ for @out;\n      }\n      $toprint = 0;\n      @out = ($_);\n   } elsif ($_ =~ /\\booaijp01\\.intlb\\.net-pool\\b/) {\n      $toprint = 1;\n      push @out, $_;\n   } else {\n      push @out, $_;\n   }\n}\n\nif ($toprint) {\n   say $_ for @out;\n}\n\n__DATA__\npool {\n   name           \"ooaijp01.intlb.net-pool\"\n   ttl            *\n   preferred      ***\n   member         *******\n}\n\npool {\n   name           \"ooaijp01.intlb.net-pool\"\n   ttl            *\n   preferred      ***\n   member         *******\n}\n\npool {\n   name           \"ooaijp01.xxxx\"\n   ttl            *\n   preferred      ***\n   member         *******\n}\n\npool {\n   name           \"ooaijp01.intlb.net-pool\"\n   ttl            *\n   preferred      *\n   member         *\n}\n</code></pre>\n\n<p><strong>Output:</strong></p>\n\n<pre><code>pool {\n   name           \"ooaijp01.intlb.net-pool\"\n   ttl            *\n   preferred      ***\n   member         *******\n}\n\npool {\n   name           \"ooaijp01.intlb.net-pool\"\n   ttl            *\n   preferred      ***\n   member         *******\n}\n\npool {\n   name           \"ooaijp01.intlb.net-pool\"\n   ttl            *\n   preferred      *\n   member         *\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": true, "score": 0, "last_activity_date": 1421754450, "creation_date": 1421754450, "answer_id": 28044590, "question_id": 27884986, "link": "https://stackoverflow.com/questions/27884986/extracting-a-paragraph-between-two-key-words-in-perl/28044590#28044590", "title": "Extracting a paragraph between two key words in Perl", "body": "<p>Has no one mentioned the 'range operator' yet?</p>\n\n<p>Something like this:</p>\n\n<pre><code>print \"pool {\\n\";\nwhile ( &lt;DATA&gt; ) {\n    print if /ooaijp01.intlb.net-pool/ .. /\\}/;\n}\n</code></pre>\n\n<p>Will print any lines between the start and end patterns. </p>\n"}], "owner": {"reputation": 3, "user_id": 4441744, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-r0NYNzYHq2s/AAAAAAAAAAI/AAAAAAAAABc/6BRyVtc_wtU/photo.jpg?sz=128", "display_name": "clement", "link": "https://stackoverflow.com/users/4441744/clement"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 206, "favorite_count": 0, "accepted_answer_id": 28044590, "answer_count": 3, "score": 0, "last_activity_date": 1421754450, "creation_date": 1420961817, "last_edit_date": 1421743576, "question_id": 27884986, "link": "https://stackoverflow.com/questions/27884986/extracting-a-paragraph-between-two-key-words-in-perl", "title": "Extracting a paragraph between two key words in Perl", "body": "<p>I'm a beginner in Perl, and am trying to print a paragraph between two key words after searching for a key word.</p>\n\n<p>So this should search for <code>ooaijp01.intlb.net-pool</code> and if it matches it should print a paragraph between a key word</p>\n\n<p>Below is the input file. Could you please help me to achieve this.\nand it should ignore the case sensitivity </p>\n\n<p>and the file name would be gslb_data</p>\n\n<pre><code>pool {\n   name           \"ooaijp01.intlb.net-pool\"\n   ttl            *\n   preferred      ***\n   alternatkke      **\n   fallback       *****\n   fallback_ipv4  ****\n   partition \"Common\"\n\n   member         *****\n   member         *******\n}\n\npool\n\n\npool {\n   name           \"ooaijj01.intlb.net-pool\"\n   ttl            *\n   preferred      ***\n   alternatkke      **\n   fallback       *****\n   fallback_ipv4  ****\n   partition \"Common\"\n\n   member         *****\n   member         *******\n}\n\npool\n\n\npool {\n   name           \"ooaijk01.intlb.net-pool\"\n   ttl            *\n   preferred      ***\n   alternatkke      **\n   fallback       *****\n   fallback_ipv4  ****\n   partition \"Common\"\n\n   member         *****\n   member         *******\n}\n\npool\n</code></pre>\n\n<p>I have tried with this code but it's not working.</p>\n\n<pre><code>#!/usr/bin/perl\n\nopen my $fh, '&lt;', 'file_to_check'\n    or die \"Cannot open: $!\";    # file_to_check is my file name\nmy @file = &lt;$fh&gt;;\nclose $fh;\n\nfor (0 .. $#file) {\n\n  if ($file[$_] =~ /\"ooaijp01.intlb.net-pool\"/) { # is my key word ooaijp01.intlb.net-pool\n\n    my $start = $_;\n\n    while ($start &gt;= 0 &amp;&amp; $file[$start] !~ /pool/) {\n      $start--;\n    }\n\n    my $end = $_;\n\n    while ($end &lt;= $#file &amp;&amp; $file[$end] !~ /pool/) {\n      $end++;\n    }\n\n    print \"\\n@file[$start+1..$end-1]\";\n  }\n}\n</code></pre>\n\n<p>my expected output should be </p>\n\n<pre><code>pool {\n   name           \"ooaijp01.intlb.net-pool\"\n   ttl            *\n   preferred      ***\n   alternatkke      **\n   fallback       *****\n   fallback_ipv4  ****\n   partition \"Common\"\n\n   member         *****\n   member         *******\n}\n\npool\n</code></pre>\n\n<p>and i wanted to save in a separate output file </p>\n"}, {"tags": ["perl", "tie"], "comments": [{"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 4, "creation_date": 1420960154, "post_id": 27884541, "comment_id": 44171062, "body": "your code has an unrelated bug: <code>||</code> should be <code>or</code>.  <code>||</code> is high-precedence, so instead of dying when tie fails, it is dying when 0664 is false (which is never)"}, {"owner": {"reputation": 1670, "user_id": 590225, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/6975b22f062227b591c74c86d7404f27?s=128&d=identicon&r=PG", "display_name": "tahoar", "link": "https://stackoverflow.com/users/590225/tahoar"}, "reply_to_user": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 0, "creation_date": 1421048526, "post_id": 27884541, "comment_id": 44194889, "body": "@ysth - this might not be &quot;unrelated&quot;. Maybe this error is masking the real problem and the &quot;which is never&quot; dying part is taking over. I&#39;m not familiar with Perl and don&#39;t understand the syntax of your correction. Can you please put the complete correction in an answer so I can try it?"}], "answers": [{"comments": [{"owner": {"reputation": 1670, "user_id": 590225, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/6975b22f062227b591c74c86d7404f27?s=128&d=identicon&r=PG", "display_name": "tahoar", "link": "https://stackoverflow.com/users/590225/tahoar"}, "edited": false, "score": 0, "creation_date": 1421048410, "post_id": 27884705, "comment_id": 44194847, "body": "It&#39;s impossible to be a corrupted DB file because the output folder is created specifically for this output. The Perl code then creates the DB file in the empty output folder. However, I agree it&#39;s not the underscore. The lock-up problem finally occurred with a filename without the underscore."}], "tags": [], "owner": {"reputation": 21654, "user_id": 107331, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/cf6d0868b2b4c69bac3e6f265a32b6a7?s=128&d=identicon&r=PG", "display_name": "Daniel Martin", "link": "https://stackoverflow.com/users/107331/daniel-martin"}, "is_accepted": false, "score": 1, "last_activity_date": 1420959012, "creation_date": 1420959012, "answer_id": 27884705, "question_id": 27884541, "link": "https://stackoverflow.com/questions/27884541/why-does-underscore-in-path-name-make-perl-script-hang/27884705#27884705", "title": "Why does underscore in path name make Perl script hang?", "body": "<p>There is almost certainly something wrong with that specific DB file, and not the file name.</p>\n\n<p>Either the DB file has gotten corrupted in some fashion, or an existing process on the server has the file open and has locked it.</p>\n\n<p>See if any other process has the file open (using <code>lsof</code>), and check for files named similarly to the database but beginning with \".\" in the same directory.  (i.e. do <code>ls -a ~ | grep -i en_us</code>)</p>\n"}, {"comments": [{"owner": {"reputation": 1670, "user_id": 590225, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/6975b22f062227b591c74c86d7404f27?s=128&d=identicon&r=PG", "display_name": "tahoar", "link": "https://stackoverflow.com/users/590225/tahoar"}, "edited": false, "score": 0, "creation_date": 1421202167, "post_id": 27898339, "comment_id": 44267151, "body": "Thanks, ysth. I&#39;ve updated the code, but it didn&#39;t solve the hang or reveal an underlying error. I did, however find the problem and wrote my own answer."}], "tags": [], "owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "is_accepted": false, "score": 1, "last_activity_date": 1421053261, "creation_date": 1421053261, "answer_id": 27898339, "question_id": 27884541, "link": "https://stackoverflow.com/questions/27884541/why-does-underscore-in-path-name-make-perl-script-hang/27898339#27898339", "title": "Why does underscore in path name make Perl script hang?", "body": "<pre><code>tie %eng_morph, \"DB_File\", $eng_morph, O_CREAT|O_RDWR, 0664|| die \"Cannot open dbmfile $eng_morph\";\n</code></pre>\n\n<p>needs to be:</p>\n\n<pre><code>tie %eng_morph, \"DB_File\", $eng_morph, O_CREAT|O_RDWR, 0664 or die \"Cannot open dbmfile $eng_morph\";\n</code></pre>\n\n<p>or</p>\n\n<pre><code>tie( %eng_morph, \"DB_File\", $eng_morph, O_CREAT|O_RDWR, 0664 ) || die \"Cannot open dbmfile $eng_morph\";\n</code></pre>\n\n<p>because <code>||</code> is a high precedence operator.  Otherwise it is interpreted as:</p>\n\n<pre><code>tie %eng_morph, \"DB_File\", $eng_morph, O_CREAT|O_RDWR, ( 0664 || die \"Cannot open dbmfile $eng_morph\" );\n</code></pre>\n\n<p><code>||</code> is designed to naturally be used in an expression that returns a result; <code>or</code> is designed to be used for flow control between what are essentially different expressions (though the two differ only in precedence).</p>\n\n<p>Because of this error, when the tie fails, you don't die and the code continues running, but leaving %eng_morph as a normal, untied hash.</p>\n"}, {"tags": [], "owner": {"reputation": 1670, "user_id": 590225, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/6975b22f062227b591c74c86d7404f27?s=128&d=identicon&r=PG", "display_name": "tahoar", "link": "https://stackoverflow.com/users/590225/tahoar"}, "is_accepted": true, "score": 0, "last_activity_date": 1421203078, "creation_date": 1421203078, "answer_id": 27934978, "question_id": 27884541, "link": "https://stackoverflow.com/questions/27884541/why-does-underscore-in-path-name-make-perl-script-hang/27934978#27934978", "title": "Why does underscore in path name make Perl script hang?", "body": "<p>This problem was intermittent. It turned out to be a threading problem -- as many intermittent problems are. The clue was the presence of an odd file in the output folder: <code>\"~/_db_datafile.en.db\"</code> ... or any defined output file name prefixed with <code>\"~/_db_\"</code>. This output file ranged from 0 to 14K bytes when the desired output file should have been 2 or 3 megabytes. It looked like the Perl tie() function was interrupted while creating the DB file.</p>\n\n<p>The code in question was being called from a Python script that used non-blocking threads with subprocess.Popen() piping. The Python script spawned the Perl script and continued its flow. While the Perl script was still creating the DB file, Python's non-blocked thread started piping data. This stopped the Perl script's file creation and caused a lockup. </p>\n\n<p>The underscore in the file name was only the first intermittent instance of this error, and ultimately irrelevant to the problem.</p>\n\n<p>Resolution was to simply create a <code>while not os.path.exists(eng_morph):</code> loop in the Python code to pause until the proper DB file exists.</p>\n"}], "owner": {"reputation": 1670, "user_id": 590225, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/6975b22f062227b591c74c86d7404f27?s=128&d=identicon&r=PG", "display_name": "tahoar", "link": "https://stackoverflow.com/users/590225/tahoar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 251, "favorite_count": 0, "accepted_answer_id": 27934978, "answer_count": 3, "score": 0, "last_activity_date": 1421203078, "creation_date": 1420957089, "question_id": 27884541, "link": "https://stackoverflow.com/questions/27884541/why-does-underscore-in-path-name-make-perl-script-hang", "title": "Why does underscore in path name make Perl script hang?", "body": "<p>I'm troubleshooting a Perl script that unexpectedly hanging when it never hung before. I don't know Perl. I finally traced the problem to a file path string. This code works:</p>\n\n<pre><code>$eng_morph = \"~/datafile.en.db\";\ntie %eng_morph, \"DB_File\", $eng_morph, O_CREAT|O_RDWR, 0664|| die \"Cannot open dbmfile $eng_morph\";\n</code></pre>\n\n<p>When I change the file name to include an underscore, the second line hangs forever:</p>\n\n<pre><code>$eng_morph = \"~/datafile.en_us.db\";\ntie %eng_morph, \"DB_File\", $eng_morph, O_CREAT|O_RDWR, 0664|| die \"Cannot open dbmfile $eng_morph\";\n</code></pre>\n\n<p>Is there something wrong with the syntax? Is there any way to allow the underscores?</p>\n\n<p>I'm using Ubuntu 14.04. Here's the uname output:</p>\n\n<blockquote>\n  <p>Linux asus-notebook 3.13.0-43-generic #72-Ubuntu SMP Mon Dec 8\n  19:35:06 UTC 2014 x86_64 x86_64 x86_64 GNU/Linux</p>\n</blockquote>\n\n<p>Also, I'm also using the default Perl in the distro. Its version output is:</p>\n\n<blockquote>\n  <p>This is perl 5, version 18, subversion 2 (v5.18.2) built for\n  x86_64-linux-gnu-thread-multi (with 41 registered patches, see perl -V\n  for more detail)</p>\n</blockquote>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 882, "user_id": 3965075, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/FLP7B.jpg?s=128&g=1", "display_name": "Praveen", "link": "https://stackoverflow.com/users/3965075/praveen"}, "edited": false, "score": 0, "creation_date": 1420955172, "post_id": 27884088, "comment_id": 44170313, "body": "Can you provide with the input and expected output which will try to simplify your problem and also get the best possible solutions. You can edit in your question by providing block of input and expected o/p"}, {"owner": {"reputation": 882, "user_id": 3965075, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/FLP7B.jpg?s=128&g=1", "display_name": "Praveen", "link": "https://stackoverflow.com/users/3965075/praveen"}, "edited": false, "score": 0, "creation_date": 1420958099, "post_id": 27884088, "comment_id": 44170749, "body": "So the filename that you are passing as first parameter $ARGV[0] to the program is log.txt . So log.txt itself have Exceptions and also patterns that you sent as second parameter $ARGV[1] to the program ?"}, {"owner": {"reputation": 17, "user_id": 4429820, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/77ab5e65811f7314e062b302cec786aa?s=128&d=identicon&r=PG&f=1", "display_name": "hari_cheerful", "link": "https://stackoverflow.com/users/4429820/hari-cheerful"}, "reply_to_user": {"reputation": 882, "user_id": 3965075, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/FLP7B.jpg?s=128&g=1", "display_name": "Praveen", "link": "https://stackoverflow.com/users/3965075/praveen"}, "edited": false, "score": 0, "creation_date": 1420958238, "post_id": 27884088, "comment_id": 44170775, "body": "@Praveen Yes, note that the text file is not corrupted insted the logs written inside got some exception error"}, {"owner": {"reputation": 882, "user_id": 3965075, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/FLP7B.jpg?s=128&g=1", "display_name": "Praveen", "link": "https://stackoverflow.com/users/3965075/praveen"}, "edited": false, "score": 0, "creation_date": 1420958516, "post_id": 27884088, "comment_id": 44170822, "body": "@Does the output for Exceptions and Pattern should go into $Filename.res or into two different output files ?"}, {"owner": {"reputation": 17, "user_id": 4429820, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/77ab5e65811f7314e062b302cec786aa?s=128&d=identicon&r=PG&f=1", "display_name": "hari_cheerful", "link": "https://stackoverflow.com/users/4429820/hari-cheerful"}, "reply_to_user": {"reputation": 882, "user_id": 3965075, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/FLP7B.jpg?s=128&g=1", "display_name": "Praveen", "link": "https://stackoverflow.com/users/3965075/praveen"}, "edited": false, "score": 0, "creation_date": 1420958610, "post_id": 27884088, "comment_id": 44170840, "body": "No output should go through single file res.txt"}], "answers": [{"comments": [{"owner": {"reputation": 17, "user_id": 4429820, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/77ab5e65811f7314e062b302cec786aa?s=128&d=identicon&r=PG&f=1", "display_name": "hari_cheerful", "link": "https://stackoverflow.com/users/4429820/hari-cheerful"}, "edited": false, "score": 0, "creation_date": 1420964139, "post_id": 27885167, "comment_id": 44171699, "body": "Your code is working but i am unable to pass parameter"}, {"owner": {"reputation": 882, "user_id": 3965075, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/FLP7B.jpg?s=128&g=1", "display_name": "Praveen", "link": "https://stackoverflow.com/users/3965075/praveen"}, "reply_to_user": {"reputation": 17, "user_id": 4429820, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/77ab5e65811f7314e062b302cec786aa?s=128&d=identicon&r=PG&f=1", "display_name": "hari_cheerful", "link": "https://stackoverflow.com/users/4429820/hari-cheerful"}, "edited": false, "score": 0, "creation_date": 1420964220, "post_id": 27885167, "comment_id": 44171709, "body": "Usage: perl filename.pl log.txt &quot;Hello&quot; . Did u try the same ?"}, {"owner": {"reputation": 17, "user_id": 4429820, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/77ab5e65811f7314e062b302cec786aa?s=128&d=identicon&r=PG&f=1", "display_name": "hari_cheerful", "link": "https://stackoverflow.com/users/4429820/hari-cheerful"}, "edited": false, "score": 0, "creation_date": 1420964493, "post_id": 27885167, "comment_id": 44171736, "body": "print &quot;Please Pass two parameters\\n&quot;. &quot;Usage: &lt;perl Search_Pattern1.pl&gt;&lt;Hello&gt;\\n&quot;; Please check"}, {"owner": {"reputation": 882, "user_id": 3965075, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/FLP7B.jpg?s=128&g=1", "display_name": "Praveen", "link": "https://stackoverflow.com/users/3965075/praveen"}, "reply_to_user": {"reputation": 17, "user_id": 4429820, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/77ab5e65811f7314e062b302cec786aa?s=128&d=identicon&r=PG&f=1", "display_name": "hari_cheerful", "link": "https://stackoverflow.com/users/4429820/hari-cheerful"}, "edited": false, "score": 0, "creation_date": 1420964591, "post_id": 27885167, "comment_id": 44171750, "body": "How do you run the program  ? Whether u run on command prompt or unix shell ?"}, {"owner": {"reputation": 882, "user_id": 3965075, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/FLP7B.jpg?s=128&g=1", "display_name": "Praveen", "link": "https://stackoverflow.com/users/3965075/praveen"}, "reply_to_user": {"reputation": 17, "user_id": 4429820, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/77ab5e65811f7314e062b302cec786aa?s=128&d=identicon&r=PG&f=1", "display_name": "hari_cheerful", "link": "https://stackoverflow.com/users/4429820/hari-cheerful"}, "edited": false, "score": 0, "creation_date": 1420964889, "post_id": 27885167, "comment_id": 44171791, "body": "perl followed by filename.pl followed by log.txt(First parameter) followed by Pattern(ex:&quot;Hello&quot;) . So it will be in this format :  perl filename.pl log.txt &quot;Hello&quot;"}, {"owner": {"reputation": 17, "user_id": 4429820, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/77ab5e65811f7314e062b302cec786aa?s=128&d=identicon&r=PG&f=1", "display_name": "hari_cheerful", "link": "https://stackoverflow.com/users/4429820/hari-cheerful"}, "edited": false, "score": 0, "creation_date": 1420965910, "post_id": 27885167, "comment_id": 44171974, "body": "The code works fine but it cut all the file from one text file and paste it in another text file. But i don&#39;t want the original file to be altered instead i need only copy say for ex 2015-1-11 11:21:00 [Exception or Error] System.IO exception that should only be copied and paste in result text file"}, {"owner": {"reputation": 882, "user_id": 3965075, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/FLP7B.jpg?s=128&g=1", "display_name": "Praveen", "link": "https://stackoverflow.com/users/3965075/praveen"}, "reply_to_user": {"reputation": 17, "user_id": 4429820, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/77ab5e65811f7314e062b302cec786aa?s=128&d=identicon&r=PG&f=1", "display_name": "hari_cheerful", "link": "https://stackoverflow.com/users/4429820/hari-cheerful"}, "edited": false, "score": 0, "creation_date": 1420967762, "post_id": 27885167, "comment_id": 44172308, "body": "No it will not cut or modify the original file . If the input is log.txt then the output is log.res which contains Exceptions and Pattern values but log.txt remains the same. Can you let me know the detail explanation of output that you got from running the program ? Edit the question and place o/p in it"}], "tags": [], "owner": {"reputation": 882, "user_id": 3965075, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/FLP7B.jpg?s=128&g=1", "display_name": "Praveen", "link": "https://stackoverflow.com/users/3965075/praveen"}, "is_accepted": true, "score": 0, "last_activity_date": 1420963762, "creation_date": 1420963762, "answer_id": 27885167, "question_id": 27884088, "link": "https://stackoverflow.com/questions/27884088/search-pattern-using-windows-perl/27885167#27885167", "title": "Search Pattern Using Windows PERL", "body": "<p>@hari_cheerful: You can try the below perl code:</p>\n\n<pre><code>use strict;\nuse warnings;\n\nchomp(@ARGV);\n\nif(@ARGV!=2)\n{\n    print \"Please Pass two parameters\\n\". \"Usage: &lt;Filename&gt;&lt;pattern&gt;\\n\";\n    exit;\n}\n\nmy $Filename     = $ARGV[0];\nmy ($file,$ext) = $Filename =~ /(.*)(\\..*?)/;\nmy $res_File_name = \"$file\" . \"\\.res\";\nmy $Pattern       = $ARGV[1];\n\nopen(my $ip,'&lt;', $Filename)      or die(\"File $Filename could not be opened \");\nopen(my $op,'&gt;', $res_File_name) or die(\"File $res_File_name could not be opened \");\n\nwhile(&lt;$ip&gt;) {\n    if($_ =~ /$Pattern/is)\n      {\n         print $op $Pattern . \"\\n\";\n        }\n     elsif($_ =~ /\\d{4}\\-\\d{1,2}\\-\\d{1,2}\\s*\\d{2}:\\d{2}:\\d{2}\\s*\\[Exception\\s*.*?/is)\n      {\n         print $op $_ . \"\\n\";\n        }   \n\n}\nclose($ip);\nclose($op);\n</code></pre>\n"}], "owner": {"reputation": 17, "user_id": 4429820, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/77ab5e65811f7314e062b302cec786aa?s=128&d=identicon&r=PG&f=1", "display_name": "hari_cheerful", "link": "https://stackoverflow.com/users/4429820/hari-cheerful"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 67, "favorite_count": 0, "accepted_answer_id": 27885167, "answer_count": 1, "score": 0, "last_activity_date": 1422952523, "creation_date": 1420952171, "last_edit_date": 1422952523, "question_id": 27884088, "link": "https://stackoverflow.com/questions/27884088/search-pattern-using-windows-perl", "title": "Search Pattern Using Windows PERL", "body": "<p>My AIM is to search for a particular word or full statement and paste those words in another text file. For example you can take a log file and i need to find an exception for the particular date time and paste those in another text file example result.txt. Below are the following script. Please help me in this regard</p>\n\n<pre><code>chomp(@ARGV)\n\nif(@ARGV!=2) {\n    print \"Please Pass two parameters\";\n    print \"Usage: $ &lt;File_name&gt;&lt;pattern\\n&gt;\";\n}\n\n$File_name     = $ARGV[0];\n$res_File_name = $Filename . \"\\.res\";\n$Pattern       = $ARGV[1];\n\nopen(FD,\"&lt;File_name&gt;\")      or die(\"File $File_name could not be opened \");\nopen(WFD,\"&lt;res_File_name&gt;\") or die(\"File $res_File_name could not be opened \");\n\nwhile(&lt;FD&gt;) {\n    print WFD $-if(/$Pattern);\n}\n\nclose(FD);\nclose(WFD);\n</code></pre>\n\n<p>This is a log text file</p>\n\n<pre><code>log.txt\n\n2015-1-11 11:21:00 [Exception or Error] System.IO exception. I need to find those exceptions and paste that in result.txt. Not that only  i have a document say i have some paragraph ex: Hello World, i need to find that hello world and paste that in text file. \n</code></pre>\n\n<p>For this  i have passed two parameters here <code>if (@ARGV != 2)</code>, i need to print a message.</p>\n\n<p>Second I need to pass those two parameters</p>\n\n<p><code>ARGV[0]</code>,<code>ARGV[1]</code>\n<code>File_name</code> and <code>res_file_name</code> , i am getting scalar values from my original file and passing it to next res file.</p>\n\n<p>O/p: <code>2015-01-10 or any other argument you pass that will be displayed</code></p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 710, "user_id": 1099103, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/5e60172669e9d630a88b03eabdc5b8a9?s=128&d=identicon&r=PG", "display_name": "senorsmile", "link": "https://stackoverflow.com/users/1099103/senorsmile"}, "edited": false, "score": 1, "creation_date": 1420956412, "post_id": 27883854, "comment_id": 44170494, "body": "It looks like there is a problem with Date::Calc right now:  Failed 3/51 test programs. 60/3381 subtests failed. Makefile:890: recipe for target &#39;test_dynamic&#39; failed make: *** [test_dynamic] Error 255"}, {"owner": {"reputation": 710, "user_id": 1099103, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/5e60172669e9d630a88b03eabdc5b8a9?s=128&d=identicon&r=PG", "display_name": "senorsmile", "link": "https://stackoverflow.com/users/1099103/senorsmile"}, "edited": false, "score": 2, "creation_date": 1420956467, "post_id": 27883854, "comment_id": 44170505, "body": "It also looks like there are open bugs: <a href=\"https://rt.cpan.org/Public/Dist/Display.html?Name=Date-Calc\" rel=\"nofollow noreferrer\">rt.cpan.org/Public/Dist/Display.html?Name=Date-Calc</a>"}, {"owner": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "edited": false, "score": 1, "creation_date": 1421008093, "post_id": 27883854, "comment_id": 44184462, "body": "If you don&#39;t specifically need Date::Calc, I would recommend <a href=\"https://metacpan.org/pod/DateTime\" rel=\"nofollow noreferrer\">DateTime</a> instead. It has better functionality, interface and is far better maintained."}, {"owner": {"reputation": 4831, "user_id": 1101341, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/vxOUs.jpg?s=128&g=1", "display_name": "mseifert", "link": "https://stackoverflow.com/users/1101341/mseifert"}, "reply_to_user": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "edited": false, "score": 0, "creation_date": 1421014012, "post_id": 27883854, "comment_id": 44186422, "body": "@Schwern - Thanks, Date::Calc is a dependency for Finance::Quote in gnuCash and is used for online price retrieval (stock quotes). Thanks also for pointing out the patch at the end of the bug reports."}], "answers": [{"comments": [{"owner": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "edited": false, "score": 2, "creation_date": 1421007991, "post_id": 27891153, "comment_id": 44184433, "body": "At the end of that bug report there is a patch to fix the failing tests.  <a href=\"https://rt.cpan.org/Public/Bug/Display.html?id=101232#txn-1450438\" rel=\"nofollow noreferrer\">rt.cpan.org/Public/Bug/Display.html?id=101232#txn-1450438</a>"}, {"owner": {"reputation": 4831, "user_id": 1101341, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/vxOUs.jpg?s=128&g=1", "display_name": "mseifert", "link": "https://stackoverflow.com/users/1101341/mseifert"}, "edited": false, "score": 1, "creation_date": 1421013765, "post_id": 27891153, "comment_id": 44186355, "body": "Great answer. I solved it differently, but you method is preferable. In my case, Date::Calc was a dependency for Finance::Quote, so I couldn&#39;t use another module (to my knowledge). I was able to verify the bug reports were the source of the failing tests and weren&#39;t likely to be an issue for me. It was my wife with the gun to my head after too many hours of trying to get it installed..."}, {"owner": {"reputation": 4831, "user_id": 1101341, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/vxOUs.jpg?s=128&g=1", "display_name": "mseifert", "link": "https://stackoverflow.com/users/1101341/mseifert"}, "edited": false, "score": 1, "creation_date": 1421016016, "post_id": 27891153, "comment_id": 44186993, "body": "Interestingly enough the mentioned patch only patches the 3 test files. Doesn&#39;t change the code at all."}, {"owner": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "reply_to_user": {"reputation": 4831, "user_id": 1101341, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/vxOUs.jpg?s=128&g=1", "display_name": "mseifert", "link": "https://stackoverflow.com/users/1101341/mseifert"}, "edited": false, "score": 1, "creation_date": 1421028162, "post_id": 27891153, "comment_id": 44189839, "body": "@mseifert Yes, it was a bug in the test code. An assumption about the current date which is no longer true."}, {"owner": {"reputation": 98433, "user_id": 368630, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/107085826cfbb2700f535417a12c89cb?s=128&d=identicon&r=PG", "display_name": "David W.", "link": "https://stackoverflow.com/users/368630/david-w"}, "edited": false, "score": 0, "creation_date": 1421073940, "post_id": 27891153, "comment_id": 44208269, "body": "Fun, fun, fun! The <i>error</i> is actually in the GNU C <i>time</i> functions. The assumption of the GNU time functions is that if the two digit years are assumed to be within a fifty year time period of the current year. In 2014, <code>01&#47;15&#47;64</code> was assumed to be Jan, 15, 1964 since 1964 is fifty years ago. However, in 2015, the new assumption is that <code>01&#47;15&#47;64</code> is actually 2064 since 1964 is more than fifty years ago. In POSIX, the cutoff is <b><i>always</i></b> 1969."}, {"owner": {"reputation": 98433, "user_id": 368630, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/107085826cfbb2700f535417a12c89cb?s=128&d=identicon&r=PG", "display_name": "David W.", "link": "https://stackoverflow.com/users/368630/david-w"}, "edited": false, "score": 0, "creation_date": 1421074949, "post_id": 27891153, "comment_id": 44208912, "body": "I&#39;m not fond of the patch. The tests found an edge condition which should actually be tested. Two digit years more than 50 years ago are interpreted in the future. Two digits years less than 50 years ago are interpreted in the past. The test should also test the OS and make sure the OS agrees with this division. I haven&#39;t tested, but I believe on Macs, the division will always be 1969."}, {"owner": {"reputation": 8202, "user_id": 58074, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/297b31165c5ef426c8fa89c3375b0d2a?s=128&d=identicon&r=PG", "display_name": "dsolimano", "link": "https://stackoverflow.com/users/58074/dsolimano"}, "edited": false, "score": 0, "creation_date": 1433358140, "post_id": 27891153, "comment_id": 49322864, "body": "@DavidW., I&#39;ve seen a few questions of the format &quot;Module X fails on WIndows, what do I do&quot;, and I think this is one of the best answers.  Any objections if I write up a community wiki Q/A using this answer as the base?"}, {"owner": {"reputation": 8202, "user_id": 58074, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/297b31165c5ef426c8fa89c3375b0d2a?s=128&d=identicon&r=PG", "display_name": "dsolimano", "link": "https://stackoverflow.com/users/58074/dsolimano"}, "edited": false, "score": 0, "creation_date": 1433869752, "post_id": 27891153, "comment_id": 49533090, "body": "Just posted that and linked to here so the internet can give you some internet points - <a href=\"http://stackoverflow.com/questions/30738541/my-perl-module-from-cpan-wont-install-and-has-tests-failing-what-do-i-do\" title=\"my perl module from cpan wont install and has tests failing what do i do\">stackoverflow.com/questions/30738541/&hellip;</a>.  Any improvements you could suggest would be appreciated."}], "tags": [], "owner": {"reputation": 98433, "user_id": 368630, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/107085826cfbb2700f535417a12c89cb?s=128&d=identicon&r=PG", "display_name": "David W.", "link": "https://stackoverflow.com/users/368630/david-w"}, "is_accepted": true, "score": 6, "last_activity_date": 1421004504, "creation_date": 1421004504, "answer_id": 27891153, "question_id": 27883854, "link": "https://stackoverflow.com/questions/27883854/install-fails-with-perl-module-datecalc/27891153#27891153", "title": "Install fails with Perl module Date::Calc", "body": "<p>Do not replace bad tests with good ones. </p>\n\n<p>The purpose of these tests is to <em>test</em>. If there's a problem, you need to know about it, and not sweep it under the rug. Resolve the issue one way or another. Is there a problem with something on your system, or is this a problem with the test itself. If this is a problem with the test, does it still affect you? If this is a system problem, is this something you might run into? For example, let's say there's a test that checks for connectivity between your system and a Windows system. If you don't connect to Windows systems, maybe that particular test doesn't apply to you.</p>\n\n<p>If you have a test failure, go to the <a href=\"http://metacpan.org\" rel=\"noreferrer\">MetaCPAN</a> webpage for that module, and check the left hand side for <a href=\"https://rt.cpan.org/Public/Dist/Display.html?Name=Date-Calc\" rel=\"noreferrer\">issues</a> to see if someone else is getting the same errors. (<a href=\"https://rt.cpan.org/Public/Bug/Display.html?id=101232\" rel=\"noreferrer\">Bug #101232 for Date-Calc: Test suite started to fail since 2015-01-01</a> - Happy New Year!). </p>\n\n<p>There's also a QA testers CPAN webpage, but it's down right now. The QA testers webpage will show you the various Perl versions, module versions, platforms, and show you which tests are failing on particular platforms on which versions. You might need to install an alternative version of the module.</p>\n\n<p>Only once you've determined that the failed test doesn't necessarily apply to you, do a <em>force</em> install:</p>\n\n<pre><code>cpan&gt; force install Date::Calc\n</code></pre>\n\n<p>This will run through the entire install, except that it will skip all testing. (Or maybe it still tests, but doesn't fail if a test fails.). The module will still fail on compiler errors, or if something can't get written to your system. It merely ignores tests.</p>\n\n<p>This should be the last desperate attempt to get something installed. You've should have already resolved that the failed tests are bugs or not meaningful for you. Or, someone is standing beside you with a gun to your head saying, <em>\"Install that module, or I'll pull the trigger!\"</em>.</p>\n\n<hr>\n\n<p>Or, you can decide to heck with it, and simply use another module -- especially a module that's already included in the standard Perl distribution like <a href=\"http://perldoc.perl.org/Time/Piece.html\" rel=\"noreferrer\">Time::Piece</a>. If this is a new Perl program, you might as well use <code>Time::Piece</code> since it's the <em>official</em> time calculation module for Perl. </p>\n\n<p>Okay, it's hard to say whether something is <em>official</em> or not, but <code>Time::Piece</code> is included in all Perl installations since 5.10, and <code>Date::Calc</code>, although more popular, isn't. However, now that <code>Time::Piece</code> now part of the official install, it's more likely to be included on a system where you're running your Perl program. It also means that more people are testing it, and that more users are using it, and that bugs discovered are more likely to be fixed.</p>\n\n<p>If this is a new Perl program you're writing, consider using <code>Time::Piece</code> instead of <code>Date::Calc</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 47, "user_id": 4140860, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-WnwtHmoJE34/AAAAAAAAAAI/AAAAAAAAAJE/AU9UQPxrYzY/photo.jpg?sz=128", "display_name": "Angelo Naselli", "link": "https://stackoverflow.com/users/4140860/angelo-naselli"}, "edited": false, "score": 0, "creation_date": 1424423952, "post_id": 28625123, "comment_id": 45551685, "body": "working patch indeed is <a href=\"https://rt.cpan.org/Ticket/Attachment/1460822/777390/century-tests.patch\" rel=\"nofollow noreferrer\">here</a>"}], "tags": [], "owner": {"reputation": 47, "user_id": 4140860, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-WnwtHmoJE34/AAAAAAAAAAI/AAAAAAAAAJE/AU9UQPxrYzY/photo.jpg?sz=128", "display_name": "Angelo Naselli", "link": "https://stackoverflow.com/users/4140860/angelo-naselli"}, "is_accepted": false, "score": 0, "last_activity_date": 1424423107, "creation_date": 1424423107, "answer_id": 28625123, "question_id": 27883854, "link": "https://stackoverflow.com/questions/27883854/install-fails-with-perl-module-datecalc/28625123#28625123", "title": "Install fails with Perl module Date::Calc", "body": "<p>Date::Calc manual says:\nIf the year is given as one or two digits only (i.e., if the year is less than 100), it is mapped to a \"window\" of +/- 50 years around the current year, as described by the \"Moving_Window()\" function (see further below).\nSo i had to say the patch <a href=\"https://rt.cpan.org/Public/Bug/Display.html?id=101232#txn-1450438\" rel=\"nofollow\">proposed patch</a> is correct, at least for the next 50 years</p>\n"}], "owner": {"reputation": 4831, "user_id": 1101341, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/vxOUs.jpg?s=128&g=1", "display_name": "mseifert", "link": "https://stackoverflow.com/users/1101341/mseifert"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4890, "favorite_count": 2, "accepted_answer_id": 27891153, "answer_count": 2, "score": 5, "last_activity_date": 1455404205, "creation_date": 1420949161, "question_id": 27883854, "link": "https://stackoverflow.com/questions/27883854/install-fails-with-perl-module-datecalc", "title": "Install fails with Perl module Date::Calc", "body": "<p>I am trying to install the perl module Date::Calc version 6. It is part of gnuCalc and failed when installed with it. I chose to manually download Date::Calc and install it but it gave exactly the same errors which are shown below. Since Date::Calc is not limited to gnuCalc, I was hoping someone could point me in a direction to solve this. </p>\n\n<p>I am on Windows 7 64bit. Perl is strawberry Perl ver 5.18.2002</p>\n\n<p>Thanks in advance.</p>\n\n<pre><code>E:\\Downloads\\Date-Calc-6.3&gt;perl Makefile.PL\n\n*************************************************************\n****** BEWARE: Use \"make install UNINST=1\" to install! ******\n*************************************************************\n\nChecking if your kit is complete...\nLooks good\nGenerating a dmake-style Makefile\nWriting Makefile for Date::Calc\nWriting MYMETA.yml and MYMETA.json\n\nE:\\Downloads\\Date-Calc-6.3&gt;C:\\strawberry\\c\\bin\\dmake.exe\ncp lib/Date/Calc/Object.pod blib\\lib\\Date\\Calc\\Object.pod\ncp lib/Date/Calc.pm blib\\lib\\Date\\Calc.pm\ncp lib/Date/Calendar/Profiles.pod blib\\lib\\Date\\Calendar\\Profiles.pod\ncp lib/Date/Calendar.pm blib\\lib\\Date\\Calendar.pm\ncp lib/Date/Calendar.pod blib\\lib\\Date\\Calendar.pod\ncp lib/Date/Calc/Object.pm blib\\lib\\Date\\Calc\\Object.pm\ncp lib/Date/Calc/PP.pm blib\\lib\\Date\\Calc\\PP.pm\ncp lib/Date/Calendar/Profiles.pm blib\\lib\\Date\\Calendar\\Profiles.pm\ncp lib/Date/Calc/PP.pod blib\\lib\\Date\\Calc\\PP.pod\ncp lib/Date/Calendar/Year.pod blib\\lib\\Date\\Calendar\\Year.pod\ncp lib/Date/Calendar/Year.pm blib\\lib\\Date\\Calendar\\Year.pm\ncp lib/Date/Calc.pod blib\\lib\\Date\\Calc.pod\n\nE:\\Downloads\\Date-Calc-6.3&gt;C:\\strawberry\\c\\bin\\dmake.exe test\nC:\\strawberry\\perl\\bin\\perl.exe \"-MExtUtils::Command::MM\" \"-MTest::Harness\" \"-e\"\n \"undef *Test::Harness::Switches; test_harness(0, 'blib\\lib', 'blib\\arch')\" t/*.\nt\nt/f000.t .. ok\nt/f001.t .. ok\nt/f002.t .. ok\nt/f003.t .. ok\nt/f004.t .. ok\nt/f005.t .. ok\nt/f006.t .. ok\nt/f007.t .. ok\nt/f008.t .. ok\nt/f009.t .. ok\nt/f010.t .. ok\nt/f011.t .. ok\nt/f012.t .. ok\nt/f013.t .. ok\nt/f014.t .. ok\nt/f015.t .. ok\nt/f016.t .. Failed 16/25 subtests\nt/f017.t .. ok\nt/f018.t .. ok\nt/f019.t .. ok\nt/f020.t .. ok\nt/f021.t .. ok\nt/f022.t .. ok\nt/f023.t .. ok\nt/f024.t .. ok\nt/f025.t .. ok\nt/f026.t .. ok\nt/f027.t .. Failed 22/46 subtests\nt/f028.t .. Failed 22/46 subtests\nt/f029.t .. ok\nt/f030.t .. ok\nt/f031.t .. ok\nt/f032.t .. ok\nt/f033.t .. ok\nt/f034.t .. ok\nt/f035.t .. ok\nt/f036.t .. ok\nt/f037.t .. ok\nt/m001.t .. ok\nt/m002.t .. ok\nt/m003.t .. ok\nt/m004.t .. ok\nt/m005.t .. ok\nt/m006.t .. ok\nt/m007.t .. ok\nt/m008.t .. ok\nt/m009.t .. ok\nt/m010.t .. ok\nt/m011.t .. ok\nt/m012.t .. ok\nt/m013.t .. ok\n\nTest Summary Report\n-------------------\nt/f016.t (Wstat: 0 Tests: 25 Failed: 16)\n  Failed tests:  1-4, 6-7, 9-12, 15-17, 21-23\nt/f027.t (Wstat: 0 Tests: 46 Failed: 22)\n  Failed tests:  7-15, 22, 24-27, 30-35, 44-45\nt/f028.t (Wstat: 0 Tests: 46 Failed: 22)\n  Failed tests:  7-15, 22, 24-27, 30, 32, 34-37, 44-45\nFiles=51, Tests=3381,  3 wallclock secs ( 0.20 usr +  0.01 sys =  0.22 CPU)\nResult: FAIL\nFailed 3/51 test programs. 60/3381 subtests failed.\ndmake.exe:  Error code 255, while making 'test_dynamic'\n</code></pre>\n"}, {"tags": ["perl"], "answers": [{"tags": [], "owner": {"reputation": 768, "user_id": 562312, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/1d1da85c3a18ee4fff7e60352ecbae99?s=128&d=identicon&r=PG", "display_name": "TheBetterJORT", "link": "https://stackoverflow.com/users/562312/thebetterjort"}, "is_accepted": false, "score": -1, "last_activity_date": 1420949008, "last_edit_date": 1420949008, "creation_date": 1420944609, "answer_id": 27883496, "question_id": 27883492, "link": "https://stackoverflow.com/questions/27883492/whats-the-proper-syntax-to-insert-a-multi-line-substitution-string-and-apply-it/27883496#27883496", "title": "what&#39;s the proper syntax to insert a multi-line substitution string and apply it toward a single array value?", "body": "<pre><code>my %citysub = ( \"DEQUEEN\" =&gt; \"DE QUEEN\", \"ELDORADO\" =&gt; \"EL DORADO\" );\nfor my $find ( keys %citysub ) {\n    my $replace = $citysub{ $find };\n    $field[8] =~ s/$find/$replace/g;\n}\n</code></pre>\n\n<p>Explanation: Create a hash of \"thing to match\" => \"thing to replace with\". then loop over that hash and run s/// with the thing to match and the thing to replace with.</p>\n"}], "owner": {"reputation": 768, "user_id": 562312, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/1d1da85c3a18ee4fff7e60352ecbae99?s=128&d=identicon&r=PG", "display_name": "TheBetterJORT", "link": "https://stackoverflow.com/users/562312/thebetterjort"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 38, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1420949008, "creation_date": 1420944526, "question_id": 27883492, "link": "https://stackoverflow.com/questions/27883492/whats-the-proper-syntax-to-insert-a-multi-line-substitution-string-and-apply-it", "title": "what&#39;s the proper syntax to insert a multi-line substitution string and apply it toward a single array value?", "body": "<p>Here's the scenario -- One step of the process involves fixing city names when the data is obviously misspelled, along with some basic conversions like \"MTN\" to \"Mountain\" and so forth.  I've built a variable containing several substitution strings, and I'm trying to apply that set of subs on one of the input fields later down the line.  </p>\n\n<pre><code>my $citysub = &lt;&lt;'EOF'; \ns/DEQUEEN/DE QUEEN/; \ns/ELDORADO/EL DORADO/; \n...                # there are about 100 such substitution strings \nEOF \n... \nwhile ($line &lt;INFILE&gt;) \n{ \n... \n@field = split(/\",\"/,$line);                # it's a comma-delimited file with quoted strings; this is spltting exactly like I intend; at the end, I'll piece it back together properly \n... \n# the 9th field and 12th field are city names, i.e., $field[8] and $field[12] \n$field[8] =~ $citysub;        # this is what I'm wanting to do, but it doesn't work! \n# since that doesn't work, I'm using the following, but it's much slower, obviiously \n$field[8] = `echo $field[8]|sed -e \"$citysub\"`;        # external calls to system commands \n</code></pre>\n\n<p>So, what's the proper syntax to insert a multi-line substitution string and apply it toward a single array value? </p>\n"}, {"tags": ["perl", "user-interface"], "owner": {"reputation": 101, "user_id": 4259445, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/QT8w9.jpg?s=128&g=1", "display_name": "Muskovitz", "link": "https://stackoverflow.com/users/4259445/muskovitz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 159, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1420941586, "creation_date": 1420940536, "last_edit_date": 1420941586, "question_id": 27883136, "link": "https://stackoverflow.com/questions/27883136/how-to-get-a-text-inside-the-perl-gtk2-textview", "title": "How to get a text inside the Perl/Gtk2 TextView", "body": "<p>I found a tutorial on how to insert a text inside the textview but i don't know how to get a text inside the textview i read the documentations of<code>Gtk2::TextBuffer Gtk2::TextView Gtk2::TextIter</code> but i can't get it so here's my sample code</p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\nuse Gtk2 '-init';\nuse Glib qw/TRUE FALSE/;\n\nmy $window=Gtk2::Window-&gt;new;\n$window-&gt;signal_connect('delete_event',sub{Gtk2::main_quit;});\nmy $vbox=Gtk2::VBox-&gt;new();\nmy $textview=Gtk2::TextView-&gt;new();\nmy $textbuffer=$textview-&gt;get_buffer;\nmy $textiter1=$textbuffer-&gt;get_end_iter;\nmy $textiter=$textbuffer-&gt;get_start_iter;\n$textbuffer-&gt;insert($textiter, \"Hello\");\n$textview-&gt;set_buffer($textbuffer);\nmy $button=Gtk2::Button-&gt;new(\"Submit\");\n$button-&gt;signal_connect(clicked=&gt;sub{\n    my $rt=$textbuffer-&gt;get_text($textiter,$textiter1, 1);\n    print \"$rt\\n\";\n    });\n$vbox-&gt;add($textview);\n$vbox-&gt;add($button);\n$window-&gt;add($vbox);\n$window-&gt;show_all;\nGtk2-&gt;main;`\n</code></pre>\n\n<p>thanks in advance.</p>\n"}, {"tags": ["html", "linux", "bash", "perl"], "comments": [{"owner": {"reputation": 30603, "user_id": 1762224, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/20969bd926bb6a29ee19a07a25f7fea8?s=128&d=identicon&r=PG", "display_name": "Mr. Polywhirl", "link": "https://stackoverflow.com/users/1762224/mr-polywhirl"}, "edited": false, "score": 0, "creation_date": 1420927096, "post_id": 27881630, "comment_id": 44164891, "body": "Did you just stutter online?"}, {"owner": {"reputation": 589595, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 1, "creation_date": 1420927295, "post_id": 27881630, "comment_id": 44164950, "body": "Are you running the PHP script from the webserver? It won&#39;t use your SSH username or private key."}, {"owner": {"reputation": 5296, "user_id": 418066, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/38yuw.png?s=128&g=1", "display_name": "Biffen", "link": "https://stackoverflow.com/users/418066/biffen"}, "edited": false, "score": 0, "creation_date": 1420927353, "post_id": 27881630, "comment_id": 44164963, "body": "@matthewthegreat You might want to quote your variables (although it probably won&#39;t solve the problem it should add <i>some</i> protection)."}, {"owner": {"reputation": 45, "user_id": 4389977, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/48920c48b52b66eb0cb84b44e8cfa082?s=128&d=identicon&r=PG&f=1", "display_name": "matthewthegreat", "link": "https://stackoverflow.com/users/4389977/matthewthegreat"}, "edited": false, "score": 0, "creation_date": 1420927521, "post_id": 27881630, "comment_id": 44165005, "body": "Barmer - I&#39;m running the bash script  from the webserver. The bash as I mentioned works fine from command line.   Biffen, I tried the quote. I tried various options. Just not sure why ssh is failing withing the script."}, {"owner": {"reputation": 45, "user_id": 4389977, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/48920c48b52b66eb0cb84b44e8cfa082?s=128&d=identicon&r=PG&f=1", "display_name": "matthewthegreat", "link": "https://stackoverflow.com/users/4389977/matthewthegreat"}, "edited": false, "score": 0, "creation_date": 1420999167, "post_id": 27881630, "comment_id": 44181449, "body": "thank you all appreciated. I&#39;m trying to find how I can do the ssh directly from perl without passing the param to another bash file. <a href=\"http://stackoverflow.com/questions/27890239/running-bash-command-using-ssh-in-perl\" title=\"running bash command using ssh in perl\">stackoverflow.com/questions/27890239/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 45, "user_id": 4389977, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/48920c48b52b66eb0cb84b44e8cfa082?s=128&d=identicon&r=PG&f=1", "display_name": "matthewthegreat", "link": "https://stackoverflow.com/users/4389977/matthewthegreat"}, "edited": false, "score": 0, "creation_date": 1420999085, "post_id": 27882334, "comment_id": 44181420, "body": "Hi Thanks. I re-stated my question following yoru advice. Hopefully someone will reply <a href=\"http://stackoverflow.com/questions/27890239/running-bash-command-using-ssh-in-perl\" title=\"running bash command using ssh in perl\">stackoverflow.com/questions/27890239/&hellip;</a>"}], "tags": [], "owner": {"reputation": 160, "user_id": 2023415, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ee14b7dbf5c7b086cf8a126b1e8b9557?s=128&d=identicon&r=PG", "display_name": "perl_advocate", "link": "https://stackoverflow.com/users/2023415/perl-advocate"}, "is_accepted": false, "score": 0, "last_activity_date": 1420933008, "creation_date": 1420933008, "answer_id": 27882334, "question_id": 27881630, "link": "https://stackoverflow.com/questions/27881630/html-calling-perl-perl-calling-script-script-ssh-not-working/27882334#27882334", "title": "HTML calling Perl Perl Calling Script Script SSH not working", "body": "<p>Ideally you should do things within Perl script there should be no need for aaa script, There might be many reasons why ssh is not working, it could be simply because you closed STDIN , STDOUT at the higher level or have redirection enabled ?  That might simply explain why it works from command line but not from another wrapper..  Have you tried to run ssh inside the perl script and see if that works?  Is it possible to share some parts of code snippet?</p>\n"}], "owner": {"reputation": 45, "user_id": 4389977, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/48920c48b52b66eb0cb84b44e8cfa082?s=128&d=identicon&r=PG&f=1", "display_name": "matthewthegreat", "link": "https://stackoverflow.com/users/4389977/matthewthegreat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 114, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1420933008, "creation_date": 1420927027, "question_id": 27881630, "link": "https://stackoverflow.com/questions/27881630/html-calling-perl-perl-calling-script-script-ssh-not-working", "title": "HTML calling Perl Perl Calling Script Script SSH not working", "body": "<p>I'm able to pass a variable from HTML form to a simple perl script.  This is the main line from perl script.</p>\n\n<pre><code> system(\"/var/www/cgi-bin/aaa $name\")\n</code></pre>\n\n<p>The perl script calls a bash  script called aaa.\nAs you see I pass the $name which is the  entry from my html form  to aaa bash script.\nIn my bash script  I can echo the $name as $1 or assign $1 to $name. \nSo so far so good. That's the way I want it. However in my aaa bash script \nI have a ssh command in aaa script that is not working. No matter how many different way \nI tried it it just not working. If I run the aaa script command from command line and pass a parameter , the script works fine, but when I try it via the perl it fails.</p>\n\n<p>my ssh command right now is very simple. So my aaa bash file contains a simple line </p>\n\n<pre><code> echo $1      \n ssh $1 \"ls -altr\" &gt; /var/www/cgi-bin/output\n</code></pre>\n\n<p>If I call this script from command line ( aaa serverx )  It works fine.\nNow I do it through the html form and the only thing that works is the echo $1 command.\nAnother word I can see that I'm passing the right servername  ( example serverx) and when I do echo $1 I can see the serverx. However, the ssh line fails. Noyt sure what to do ? Can anyone help ?</p>\n\n<p>Regards</p>\n"}, {"tags": ["regex", "perl"], "answers": [{"comments": [{"owner": {"reputation": 1650, "user_id": 1984756, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3a80da873a5a5eed96f9f9df4f8a24a3?s=128&d=identicon&r=PG", "display_name": "PYPL", "link": "https://stackoverflow.com/users/1984756/pypl"}, "edited": false, "score": 1, "creation_date": 1420924188, "post_id": 27881231, "comment_id": 44164073, "body": "also a solution <code>dn=([^&amp;]+)</code>"}], "tags": [], "owner": {"reputation": 65435, "user_id": 2206004, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HCB1e.png?s=128&g=1", "display_name": "hwnd", "link": "https://stackoverflow.com/users/2206004/hwnd"}, "is_accepted": true, "score": 2, "last_activity_date": 1420924100, "creation_date": 1420924100, "answer_id": 27881231, "question_id": 27881200, "link": "https://stackoverflow.com/questions/27881200/regex-match-for-url-parameter/27881231#27881231", "title": "REgex match for URL parameter", "body": "<p><code>*</code> is a <a href=\"http://www.rexegg.com/regex-quantifiers.html#greedytrap\" rel=\"nofollow\"><strong>greedy</strong></a> operator meaning it will match as much as it can and still allow the remainder of the regular expression to match. Use <code>*?</code> for a non-greedy match meaning \"zero or more \u2014 preferably as few as possible\". </p>\n\n<pre><code>dn=(.*?)&amp;\n</code></pre>\n"}], "owner": {"reputation": 57, "user_id": 4440881, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9565050a270445a95737ae5f9a48d946?s=128&d=identicon&r=PG&f=1", "display_name": "nando", "link": "https://stackoverflow.com/users/4440881/nando"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 218, "favorite_count": 0, "accepted_answer_id": 27881231, "answer_count": 1, "score": 1, "last_activity_date": 1420924100, "creation_date": 1420923857, "question_id": 27881200, "link": "https://stackoverflow.com/questions/27881200/regex-match-for-url-parameter", "title": "REgex match for URL parameter", "body": "<p>I am trying to extract the name of the magnet link.  Here is my code:</p>\n\n<pre><code>use strict;\nuse warnings;\nuse v5.18.0;\n\nmy $link = 'magnet:?xt=urn:btih:CD46E14A7D62A85607D0F38F0CEE6EE7FEA34209&amp;dn=inherent+vice+2014+dvdscr&amp;tr=udp%3A%2F%2Fexplodie.org%3A6969%2Fannounce&amp;tr=udp%3A%2F%2Fopen.demonii.com%3A1337';\n\n$link =~ m/dn=(.*)&amp;/;\nmy $link_text = $1;\nsay $link_text;\n</code></pre>\n\n<p>The resulting $link_text includes characters after the capture group:\n    inherent+vice+2014+dvdscr+xvid+ac3+evo&amp;tr=udp%3A%2F%2Finferno.demonoid.ph%3A3389%2Fannounce</p>\n\n<p>I can strip off the trailing parameters with a subsequent substitution:</p>\n\n<pre><code>$link_text =~ s/&amp;.*//;\nsay $link_text;\n</code></pre>\n\n<p>Which returns what I'm looking for:\n    inherent+vice+2014+dvdscr</p>\n\n<p>What am I doing wrong in the first regex?</p>\n"}, {"tags": ["perl", "perl-data-structures"], "answers": [{"tags": [], "owner": {"reputation": 61610, "user_id": 725418, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/82ac2dc3e1ad4b7187f245c416528df9?s=128&d=identicon&r=PG", "display_name": "TLP", "link": "https://stackoverflow.com/users/725418/tlp"}, "is_accepted": true, "score": 6, "last_activity_date": 1420912159, "creation_date": 1420912159, "answer_id": 27879258, "question_id": 27879197, "link": "https://stackoverflow.com/questions/27879197/unable-to-understand-the-behaviour-of-perl-hash-ordering/27879258#27879258", "title": "Unable to understand the behaviour of Perl hash ordering", "body": "<p>Hashes are not ordered. If you want a specific order, you need to use an array.</p>\n\n<p>For example:</p>\n\n<pre><code>my @desc = qw(stinky yummy surprise);\nmy @type = (\"limburger\", \"brie\", \"soap slices\");\nmy %snacks;\n@snacks{@desc} = @type;\n</code></pre>\n\n<p>Now you have the types in <code>@type</code>.</p>\n\n<p>You can of course also use <a href=\"http://perldoc.perl.org/functions/sort.html\"><code>sort</code></a>:</p>\n\n<pre><code>my @type = sort keys %snacks;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 45481, "user_id": 197758, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/628da6ba2a6c70e35c009b7e3c3a430a?s=128&d=identicon&r=PG", "display_name": "toolic", "link": "https://stackoverflow.com/users/197758/toolic"}, "is_accepted": false, "score": 6, "last_activity_date": 1420912217, "creation_date": 1420912217, "answer_id": 27879272, "question_id": 27879197, "link": "https://stackoverflow.com/questions/27879197/unable-to-understand-the-behaviour-of-perl-hash-ordering/27879272#27879272", "title": "Unable to understand the behaviour of Perl hash ordering", "body": "<p><a href=\"http://perldoc.perl.org/perldata.html\" rel=\"noreferrer\">perldoc perldata</a>:</p>\n\n<blockquote>\n  <p>Hashes are unordered collections of scalar values indexed by their\n  associated string key.</p>\n</blockquote>\n\n<p>You can <a href=\"http://perldoc.perl.org/functions/sort.html\" rel=\"noreferrer\">sort</a> keys or values as needed.</p>\n"}, {"tags": [], "owner": {"reputation": 2477, "user_id": 3362993, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/c21264f32615c8d355688bb5786f73d7?s=128&d=identicon&r=PG&f=1", "display_name": "jsta", "link": "https://stackoverflow.com/users/3362993/jsta"}, "is_accepted": false, "score": 1, "last_activity_date": 1420915021, "creation_date": 1420915021, "answer_id": 27879781, "question_id": 27879197, "link": "https://stackoverflow.com/questions/27879197/unable-to-understand-the-behaviour-of-perl-hash-ordering/27879781#27879781", "title": "Unable to understand the behaviour of Perl hash ordering", "body": "<p>I think the key is:</p>\n\n<pre><code>my @cheese_tray = values %snacks\n</code></pre>\n\n<p>From  [1]: <a href=\"http://perldoc.perl.org/functions/values.html\" rel=\"nofollow\">http://perldoc.perl.org/functions/values.html</a>\n\"Hash entries are returned in an apparently random order. The actual random order is specific to a given hash; the exact same series of operations on two hashes may result in a different order for each hash.\"</p>\n"}], "owner": {"reputation": 355, "user_id": 662749, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/tFEf3.jpg?s=128&g=1", "display_name": "Chinmoy", "link": "https://stackoverflow.com/users/662749/chinmoy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 87, "favorite_count": 0, "accepted_answer_id": 27879258, "answer_count": 3, "score": 1, "last_activity_date": 1420915021, "creation_date": 1420911870, "last_edit_date": 1420913800, "question_id": 27879197, "link": "https://stackoverflow.com/questions/27879197/unable-to-understand-the-behaviour-of-perl-hash-ordering", "title": "Unable to understand the behaviour of Perl hash ordering", "body": "<p>I am a beginner in Perl and I am trying to run this sample example from \"Beginning Perl:Curtis Poe\"</p>\n\n<pre><code>#!/perl/bin/perl\n\nuse strict;\nuse warnings;\nuse diagnostics;\n\nmy $hero = 'Ovid';\nmy $fool = $hero;\nprint \"$hero isn't that much of a hero. $fool is a fool.\\n\";\n\n$hero = 'anybody else';\nprint \"$hero is probably more of a hero than $fool.\\n\";\n\nmy %snacks = (\n    stinky   =&gt; 'limburger',\n    yummy    =&gt; 'brie',\n    surprise =&gt; 'soap slices',\n);\nmy @cheese_tray = values %snacks;\nprint \"Our cheese tray will have: \";\nfor my $cheese (@cheese_tray) {\n    print \"'$cheese' \";\n}\nprint \"\\n\";\n</code></pre>\n\n<p>Output of the above code, when I tried on my windows7 system with ActivePerl and in codepad.org</p>\n\n<pre><code>Ovid isn't that much of a hero. Ovid is a fool. \nanybody else is probably more of a hero than Ovid.\nOur cheese tray will have: 'limburger''soap slices''brie'\n</code></pre>\n\n<p>I am not clear with third line which prints 'limburger''soap slices''brie' but hash order is having 'limburger''brie''soap slices'.</p>\n\n<p>Please help me to understand.</p>\n"}, {"tags": ["perl", "ssl", "lwp-useragent"], "comments": [{"owner": {"reputation": 4191, "user_id": 1466640, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c0630f2d5ac5fb844675c58d3d2dfa57?s=128&d=identicon&r=PG&f=1", "display_name": "AKHolland", "link": "https://stackoverflow.com/users/1466640/akholland"}, "edited": false, "score": 0, "creation_date": 1420914314, "post_id": 27878977, "comment_id": 44160863, "body": "See <a href=\"http://stackoverflow.com/questions/19397346/error-500-cant-connect-to-example-com443-certificate-verify-failed\" title=\"error 500 cant connect to example com443 certificate verify failed\">stackoverflow.com/questions/19397346/&hellip;</a>"}, {"owner": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "edited": false, "score": 0, "creation_date": 1421079120, "post_id": 27878977, "comment_id": 44211607, "body": "That&#39;s probably due to different versions of IO::Socket::SSL used. Please check with <code>perl -MIO::Socket::SSL -e &#39;warn IO::Socket::SSL-&gt;VERSION&#39;</code>"}, {"owner": {"reputation": 13, "user_id": 4075717, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0e0d8ff35e38d0ceb1a9d8329f95f29e?s=128&d=identicon&r=PG&f=1", "display_name": "RichardM", "link": "https://stackoverflow.com/users/4075717/richardm"}, "reply_to_user": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "edited": false, "score": 0, "creation_date": 1421161662, "post_id": 27878977, "comment_id": 44247293, "body": "@SteffenUllrich - Thanks, I thought that was going to be it! Ubuntu had IO::Socket::SSL 1.965, CentOS had 1.94. But no. I upgraded both, and I still have the same issue (both are now 2.09)"}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 4075717, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0e0d8ff35e38d0ceb1a9d8329f95f29e?s=128&d=identicon&r=PG&f=1", "display_name": "RichardM", "link": "https://stackoverflow.com/users/4075717/richardm"}, "edited": false, "score": 0, "creation_date": 1421581122, "post_id": 27997386, "comment_id": 44406325, "body": "Excellent. Thanks @SteffenUllrich. On CentOS 7 I had IO::Socket::IP 0.21. Upgrading to 0.36 did the trick."}], "tags": [], "owner": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "is_accepted": true, "score": 1, "last_activity_date": 1421480770, "creation_date": 1421480770, "answer_id": 27997386, "question_id": 27878977, "link": "https://stackoverflow.com/questions/27878977/perl-lwpuseragent-ssl-tls-inconsistent-certificate-error-message-issue/27997386#27997386", "title": "Perl LWP::UserAgent SSL/TLS Inconsistent Certificate Error Message Issue", "body": "<p>It seems related to the version of IO::Socket::IP (which is automatically used by IO::Socket::SSL). Without IO::Socket::IP or with version 0.31 (and probably later) it works as intended while with version 0.25 (Ubuntu 14.04) it does not. This is probably related to changes in the handling of <code>connect</code> in version 0.30,0.31.</p>\n"}], "owner": {"reputation": 13, "user_id": 4075717, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0e0d8ff35e38d0ceb1a9d8329f95f29e?s=128&d=identicon&r=PG&f=1", "display_name": "RichardM", "link": "https://stackoverflow.com/users/4075717/richardm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 420, "favorite_count": 0, "accepted_answer_id": 27997386, "answer_count": 1, "score": 1, "last_activity_date": 1421480770, "creation_date": 1420910534, "question_id": 27878977, "link": "https://stackoverflow.com/questions/27878977/perl-lwpuseragent-ssl-tls-inconsistent-certificate-error-message-issue", "title": "Perl LWP::UserAgent SSL/TLS Inconsistent Certificate Error Message Issue", "body": "<p>I seem to have an odd difference in LWP::UserAgent on Ubuntu and CentOS.</p>\n\n<p>On Ubuntu (14.04.1 with LWP::UserAgent 6.05), if I try to connect to a domain with a self-signed certificate, I get this error message with a 500 error code:</p>\n\n<p>\"Can't connect to my.test-domain.com:443 (certificate verify failed)\"</p>\n\n<p>That's good. I can see exactly what's wrong - a certificate issue. But on CentOS 7 (also with LWP::UserAgent 6.05) I just get this:</p>\n\n<p>\"Can't connect to my.test-domain.com:443\".</p>\n\n<p>That's less informative, and as such gives me a problem! Does anyone know how I can kick LWP on CentOS to get the \"certificate verify failed\" message? Here is the script I test with:</p>\n\n<pre><code>#!/usr/bin/perl -w\nuse strict;\nuse LWP::UserAgent;\nmy $url='https://my.test-domain.com/';\nmy $browser= LWP::UserAgent-&gt;new();\nmy $tryHEAD=$browser-&gt;head($url);\nmy $responseCode=$tryHEAD-&gt;code();\nif($tryHEAD-&gt;code()==200  ) {    print \"OK\\n\"; }\nelse {    print $tryHEAD-&gt;code().' '.$tryHEAD-&gt;message().\"\\n\"; }\n</code></pre>\n"}, {"tags": ["r", "excel", "perl", "xlsx"], "comments": [{"owner": {"reputation": 2287, "user_id": 2156916, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/fbb2d785caa014c08ff930896a60c4f1?s=128&d=identicon&r=PG", "display_name": "ckluss", "link": "https://stackoverflow.com/users/2156916/ckluss"}, "edited": false, "score": 0, "creation_date": 1420901817, "post_id": 27877512, "comment_id": 44156537, "body": "&quot;AssignmentData.xlsx&quot; is not found... see <code>list.files()</code> if it do not show &quot;AssignmentData.xlsx&quot; you have set the wrongt path, see <code>getwd()</code> and use ?setwd to set it correct"}, {"owner": {"reputation": 31, "user_id": 4296967, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ce58d08592c622ae1bbd0eb4e7592f9?s=128&d=identicon&r=PG&f=1", "display_name": "userC22", "link": "https://stackoverflow.com/users/4296967/userc22"}, "reply_to_user": {"reputation": 2287, "user_id": 2156916, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/fbb2d785caa014c08ff930896a60c4f1?s=128&d=identicon&r=PG", "display_name": "ckluss", "link": "https://stackoverflow.com/users/2156916/ckluss"}, "edited": false, "score": 0, "creation_date": 1420901943, "post_id": 27877512, "comment_id": 44156571, "body": "How do I set it to correct path? @ckluss"}, {"owner": {"reputation": 48227, "user_id": 1327739, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b4d8209bc0fd155f340561cbf5bb9158?s=128&d=identicon&r=PG", "display_name": "lukeA", "link": "https://stackoverflow.com/users/1327739/lukea"}, "edited": false, "score": 0, "creation_date": 1420903191, "post_id": 27877512, "comment_id": 44156952, "body": "Well, e.g. try replacing <code>AssignmentData.xlsx</code> by the full path to <code>AssignmentData.xlsx</code>, e.g. <code>c:&#47;Users&#47;userC22&#47;AssignmentData.xlsx</code> or <code>~&#47;AssignmentData.xlsx</code> - whatever it is on your computer."}, {"owner": {"reputation": 13147, "user_id": 4303162, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Rpit9.png?s=128&g=1", "display_name": "Stibu", "link": "https://stackoverflow.com/users/4303162/stibu"}, "edited": false, "score": 0, "creation_date": 1420905478, "post_id": 27877512, "comment_id": 44157721, "body": "Alternatively, you could run the command <code>setwd(&quot;directory, where the file is situated&quot;)</code> before running your code. Then, R will search for files in that directory. You can easily check that you have set the correct directory using <code>list.files()</code> as was already mentioned by ckluss."}, {"owner": {"reputation": 31, "user_id": 4296967, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ce58d08592c622ae1bbd0eb4e7592f9?s=128&d=identicon&r=PG&f=1", "display_name": "userC22", "link": "https://stackoverflow.com/users/4296967/userc22"}, "reply_to_user": {"reputation": 13147, "user_id": 4303162, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Rpit9.png?s=128&g=1", "display_name": "Stibu", "link": "https://stackoverflow.com/users/4303162/stibu"}, "edited": false, "score": 0, "creation_date": 1421365272, "post_id": 27877512, "comment_id": 44342678, "body": "Yes @Stibu that was the solution, thanks"}], "answers": [{"tags": [], "owner": {"reputation": 31, "user_id": 4296967, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ce58d08592c622ae1bbd0eb4e7592f9?s=128&d=identicon&r=PG&f=1", "display_name": "userC22", "link": "https://stackoverflow.com/users/4296967/userc22"}, "is_accepted": true, "score": 1, "last_activity_date": 1422021744, "creation_date": 1422021744, "answer_id": 28111617, "question_id": 27877512, "link": "https://stackoverflow.com/questions/27877512/cannot-read-data-from-an-xlsx-file-in-rstudio/28111617#28111617", "title": "Cannot read data from an xlsx file in RStudio", "body": "<p>Thanks to @Stibu I realised I had to set my work directory. This is the command you use to run in Rstudio; setwd(\"C/Documents...\"). The file path is where the excel file is located.</p>\n"}, {"comments": [{"owner": {"reputation": 2159, "user_id": 1534211, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c6078c51b3f837da961b2682dbaf3bd2?s=128&d=identicon&r=PG", "display_name": "mate00", "link": "https://stackoverflow.com/users/1534211/mate00"}, "edited": false, "score": 0, "creation_date": 1580297743, "post_id": 59965776, "comment_id": 106049283, "body": "This doesn&#39;t seem like an answer to this question."}], "tags": [], "owner": {"reputation": 35, "user_id": 5929490, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b1b3eba0305b0d305791901e972c81eb?s=128&d=identicon&r=PG&f=1", "display_name": "Stefano Cacciatore", "link": "https://stackoverflow.com/users/5929490/stefano-cacciatore"}, "is_accepted": false, "score": 0, "last_activity_date": 1580296191, "creation_date": 1580296191, "answer_id": 59965776, "question_id": 27877512, "link": "https://stackoverflow.com/questions/27877512/cannot-read-data-from-an-xlsx-file-in-rstudio/59965776#59965776", "title": "Cannot read data from an xlsx file in RStudio", "body": "<p>I had the issue but I solved it differently. \nMy problem was because my file was saved as Excel (extension .xls) but it was a txt file.\nI corrected the file and I did not meet any other error with the R function.</p>\n"}], "owner": {"reputation": 31, "user_id": 4296967, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ce58d08592c622ae1bbd0eb4e7592f9?s=128&d=identicon&r=PG&f=1", "display_name": "userC22", "link": "https://stackoverflow.com/users/4296967/userc22"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5468, "favorite_count": 0, "accepted_answer_id": 28111617, "answer_count": 2, "score": -2, "last_activity_date": 1580296191, "creation_date": 1420901598, "last_edit_date": 1429471608, "question_id": 27877512, "link": "https://stackoverflow.com/questions/27877512/cannot-read-data-from-an-xlsx-file-in-rstudio", "title": "Cannot read data from an xlsx file in RStudio", "body": "<p>I have installed the required packages - <code>gdata</code> and <code>ggplot2</code> and I have installed <code>perl</code>.</p>\n\n<pre><code>library(gdata)\nlibrary(ggplot2)\n\n# Read the data from the excel spreadsheet\ndf = data.frame(read.xls (\"AssignmentData.xlsx\", sheet = \"Data\", header = TRUE, perl = \"C:\\\\Strawberry\\\\perl\\\\bin\\\\perl.exe\"))\n</code></pre>\n\n<p>However when I run this I get the following error:</p>\n\n<pre><code>Error in xls2sep(xls, sheet, verbose = verbose, ..., method = method,  : \n  Intermediate file 'C:\\Users\\CLAIRE~1\\AppData\\Local\\Temp\\RtmpE3UYWA\\file8983d8e1efc.csv' missing!\nIn addition: Warning message:\nrunning command '\"C:\\STRAWB~1\\perl\\bin\\perl.exe\" \"C:/Users/Claire1992/Documents/R/win-library/3.1/gdata/perl/xls2csv.pl\"  \"AssignmentData.xlsx\" \"C:\\Users\\CLAIRE~1\\AppData\\Local\\Temp\\RtmpE3UYWA\\file8983d8e1efc.csv\" \"Data\"' had status 2 \nError in file.exists(tfn) : invalid 'file' argument\n</code></pre>\n"}, {"tags": ["windows", "perl", "gzip"], "comments": [{"owner": {"reputation": 197, "user_id": 2110851, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/665a18ece424923d5674d09479d31d2e?s=128&d=identicon&r=PG", "display_name": "Akash K", "link": "https://stackoverflow.com/users/2110851/akash-k"}, "reply_to_user": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "edited": false, "score": 0, "creation_date": 1420900654, "post_id": 27877310, "comment_id": 44156136, "body": "Thanks, but this is a windows system, I don&#39;t think gzip is natively built into this, right? I want to see if there are better opportunities since having extra utilities installed into by server could be pain"}, {"owner": {"reputation": 78338, "user_id": 1180620, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/FXaAg.jpg?s=128&g=1", "display_name": "Mark Adler", "link": "https://stackoverflow.com/users/1180620/mark-adler"}, "edited": false, "score": 0, "creation_date": 1420924243, "post_id": 27877310, "comment_id": 44164080, "body": "You should try to figure out why you have corrupt gzip files in the first place."}], "answers": [{"comments": [{"owner": {"reputation": 197, "user_id": 2110851, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/665a18ece424923d5674d09479d31d2e?s=128&d=identicon&r=PG", "display_name": "Akash K", "link": "https://stackoverflow.com/users/2110851/akash-k"}, "edited": false, "score": 0, "creation_date": 1421177054, "post_id": 27878291, "comment_id": 44256902, "body": "Archive Zip does not handle gzip files is what I saw in FAQ section"}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 0, "last_activity_date": 1420913874, "last_edit_date": 1420913874, "creation_date": 1420906499, "answer_id": 27878291, "question_id": 27877310, "link": "https://stackoverflow.com/questions/27877310/testing-the-validity-of-many-gzipped-files-on-a-windows-system-using-perl/27878291#27878291", "title": "Testing the validity of many gzipped files on a Windows system using Perl", "body": "<p>The <a href=\"http://search.cpan.org/dist/Archive-Zip/lib/Archive/Zip/FAQ.pod#How_to_test_file_integrity?\" rel=\"nofollow\"><em><code>Archive::Zip</code> FAQ</em></a> gives some very good guidance on this.</p>\n\n<p>It looks like the best option for you is to check the CRC of each member of the archives, and a sample program that does this -- <a href=\"http://cpansearch.perl.org/src/PHRED/Archive-Zip-1.41/examples/ziptest.pl\" rel=\"nofollow\"><code>ziptest.pl</code></a> -- comes with the <a href=\"https://metacpan.org/module/Archive::Zip\" rel=\"nofollow\"><code>Archive::Zip</code></a> module installation.</p>\n"}, {"comments": [{"owner": {"reputation": 197, "user_id": 2110851, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/665a18ece424923d5674d09479d31d2e?s=128&d=identicon&r=PG", "display_name": "Akash K", "link": "https://stackoverflow.com/users/2110851/akash-k"}, "edited": false, "score": 0, "creation_date": 1421177084, "post_id": 27878783, "comment_id": 44256920, "body": "I had to resort to gzip -t, using GNUWin32, and using a system command within perl"}], "tags": [], "owner": {"reputation": 78338, "user_id": 1180620, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/FXaAg.jpg?s=128&g=1", "display_name": "Mark Adler", "link": "https://stackoverflow.com/users/1180620/mark-adler"}, "is_accepted": true, "score": 1, "last_activity_date": 1420909451, "creation_date": 1420909451, "answer_id": 27878783, "question_id": 27877310, "link": "https://stackoverflow.com/questions/27877310/testing-the-validity-of-many-gzipped-files-on-a-windows-system-using-perl/27878783#27878783", "title": "Testing the validity of many gzipped files on a Windows system using Perl", "body": "<p>In short, the only way to check a gzip file is to decompress it until you get an error, or get to the end successfully.  You do not however need to store the result of the decompression.</p>\n\n<p>The CRC stored at the end of a gzip file is the CRC of the uncompressed data, not the compressed data.  To use it for verification, you have to decompress all of the data.  This is what <code>gzip -t</code> does, decompressing the data and checking the CRC, but not storing the uncompressed data.</p>\n\n<p>Often a corruption in the compressed data will be detected before getting to the end.  But if not, then the CRC, as well as a check against an uncompressed length also stored at the end, will with a probability very close to one detect a corrupted file.</p>\n"}, {"comments": [{"owner": {"reputation": 197, "user_id": 2110851, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/665a18ece424923d5674d09479d31d2e?s=128&d=identicon&r=PG", "display_name": "Akash K", "link": "https://stackoverflow.com/users/2110851/akash-k"}, "edited": false, "score": 0, "creation_date": 1421177207, "post_id": 27882383, "comment_id": 44256983, "body": "Thanks! This is what I used"}], "tags": [], "owner": {"reputation": 160, "user_id": 2023415, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ee14b7dbf5c7b086cf8a126b1e8b9557?s=128&d=identicon&r=PG", "display_name": "perl_advocate", "link": "https://stackoverflow.com/users/2023415/perl-advocate"}, "is_accepted": false, "score": -1, "last_activity_date": 1420933393, "creation_date": 1420933393, "answer_id": 27882383, "question_id": 27877310, "link": "https://stackoverflow.com/questions/27877310/testing-the-validity-of-many-gzipped-files-on-a-windows-system-using-perl/27882383#27882383", "title": "Testing the validity of many gzipped files on a Windows system using Perl", "body": "<p>It should be easy to test the file is not corrupt by just using \"gunzip -t\" command, gunzip is available for windows as well and should come with gzip package.</p>\n"}], "owner": {"reputation": 197, "user_id": 2110851, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/665a18ece424923d5674d09479d31d2e?s=128&d=identicon&r=PG", "display_name": "Akash K", "link": "https://stackoverflow.com/users/2110851/akash-k"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 95, "favorite_count": 0, "accepted_answer_id": 27878783, "answer_count": 3, "score": 0, "last_activity_date": 1420933393, "creation_date": 1420900384, "last_edit_date": 1420906912, "question_id": 27877310, "link": "https://stackoverflow.com/questions/27877310/testing-the-validity-of-many-gzipped-files-on-a-windows-system-using-perl", "title": "Testing the validity of many gzipped files on a Windows system using Perl", "body": "<p>I have thousands (or more) of gzipped files in a directory (on a Windows system) and one of my tools consumes those gzipped files. If it encounters a corrupt gzip file, it conveniently ignores them instead of raising an alarm.</p>\n\n<p>I have been trying to write a Perl program that loops through each file and makes a list of files which are corrupt.</p>\n\n<p>I am using the <a href=\"https://metacpan.org/module/Compress::Zlib\" rel=\"nofollow\"><code>Compress::Zlib</code></a> module, and have tried reading the first 1KB of each file, but that did not work since some of the files are corrupted towards the end (verified during the manual extract, alarm raised only towards the end) and reading first 1KB doesn't show a problem. I am wondering if a CRC check of these files will be of any help.</p>\n\n<p>Questions:</p>\n\n<ol>\n<li><p>Will CRC validation work in this case? If yes, how does it work? Will the true CRC be part of the gzip header, and we are to compare it with the calculated CRC from the file we have? How do I accomplish this in Perl?</p></li>\n<li><p>Are there any other simpler ways to do this?</p></li>\n</ol>\n"}, {"tags": ["mysql", "perl", "encoding", "utf-8", "dbi"], "comments": [{"owner": {"reputation": 22892, "user_id": 1745672, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/NYFQg.jpg?s=128&g=1", "display_name": "Mihai", "link": "https://stackoverflow.com/users/1745672/mihai"}, "edited": false, "score": 1, "creation_date": 1420883610, "post_id": 27874840, "comment_id": 44151465, "body": "Run <code>SET NAMES UTF8</code>  before inserting"}, {"owner": {"reputation": 1722, "user_id": 1471077, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/041d43b6133854fe857ed86ca053ca19?s=128&d=identicon&r=PG", "display_name": "Trent Lloyd", "link": "https://stackoverflow.com/users/1471077/trent-lloyd"}, "edited": false, "score": 2, "creation_date": 1420889301, "post_id": 27874840, "comment_id": 44152870, "body": "According to the documentation this should be done by mysql_enable_utf8, but I am no expert in DBI."}], "answers": [{"tags": [], "owner": {"reputation": 4191, "user_id": 1466640, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c0630f2d5ac5fb844675c58d3d2dfa57?s=128&d=identicon&r=PG&f=1", "display_name": "AKHolland", "link": "https://stackoverflow.com/users/1466640/akholland"}, "is_accepted": true, "score": 1, "last_activity_date": 1420895632, "creation_date": 1420895632, "answer_id": 27876605, "question_id": 27874840, "link": "https://stackoverflow.com/questions/27874840/utf8-character-encoding-in-perl-dbi-mysql-with-%c5%91-and-%c5%b1-characters/27876605#27876605", "title": "UTF8 character encoding in Perl DBI, MySQL with \u0151 and \u0171 characters", "body": "<p>Remove the <code>mysql_enable_utf8</code> line, and your script works for me. Also remember to always use <code>strict</code> and <code>warnings</code>.</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\nuse utf8;\nuse DBI;\n\nmy $dbh = DBI-&gt;connect(\n    \"dbi:mysql:dbname=$dbname;host=$host;port=$port;\",\n    $username,\n    $pw,\n);\n$dbh-&gt;do(\"INSERT INTO mytable (name) VALUES ('\u0151\u0171\u0150\u0170')\");\nmy $sth = $dbh-&gt;prepare(\"SELECT name FROM mytable\");\n$sth-&gt;execute;\nwhile(my ($name) = $sth-&gt;fetchrow_array) {\n    print \"$name\\n\"; # \u0151\u0171\u0150\u0170\n}\nexit;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 4, "last_activity_date": 1421069371, "last_edit_date": 1421069371, "creation_date": 1420908965, "answer_id": 27878684, "question_id": 27874840, "link": "https://stackoverflow.com/questions/27874840/utf8-character-encoding-in-perl-dbi-mysql-with-%c5%91-and-%c5%b1-characters/27878684#27878684", "title": "UTF8 character encoding in Perl DBI, MySQL with \u0151 and \u0171 characters", "body": "<p>The first thing you should do is identify what is failing. You are printing characters you retrieved from the database after storing them in the database after reading them from the Perl sources. That's four possible steps that could have failed.</p>\n\n<ol>\n<li><p>Does <code>sprintf \"U+%v04x\", $sql</code> include <code>U+0151.0171.0150.0170</code>? If so, the query is what you think it is.</p></li>\n<li><p>When you insert them using your script, does the data appear correctly when viewed using phpMyAdmin? If so, the characters were inserted properly.</p></li>\n<li><p>Does <code>sprintf \"U+%v04x\", $this[0]</code> give <code>U+0151.0171.0150.0170</code>? If so, the characters were retrieved properly.</p></li>\n<li><p>Then there's just the issue of outputting them correctly. You didn't tell Perl how to encode the string for output.</p>\n\n<pre><code>use open ':std', ':encoding(UTF8)';    # Most unix boxes\nuse open ':std', ':encoding(cp1252)';  # Most Windows boxes\n</code></pre></li>\n</ol>\n"}], "owner": {"reputation": 3782, "user_id": 972828, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/8OSD1.jpg?s=128&g=1", "display_name": "netdjw", "link": "https://stackoverflow.com/users/972828/netdjw"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1931, "favorite_count": 0, "accepted_answer_id": 27876605, "answer_count": 2, "score": 2, "last_activity_date": 1541929346, "creation_date": 1420883204, "last_edit_date": 1541929346, "question_id": 27874840, "link": "https://stackoverflow.com/questions/27874840/utf8-character-encoding-in-perl-dbi-mysql-with-%c5%91-and-%c5%b1-characters", "title": "UTF8 character encoding in Perl DBI, MySQL with \u0151 and \u0171 characters", "body": "<p>I'm using hungarian language with nice \u0151 and \u0171 characters in my <code>perl</code> script with <code>DBI</code> and <code>MySQL</code>.  All the database encoding is UTF8, and I use utf8 everywhere. The table is in utf8_general_ci encoding and the rows are too utf8_general_ci.</p>\n\n<p>I was tried to change the table and rows encoding to utf8_hungarian_ci and utf8_unicode_ci. This is not help.</p>\n\n<p>When I was insert the rows using PHPMyAdmin, and it seems everything is okay, and when I check in console there is good too. Only if I try to use in Perl DBI connect, only this case I see '?' characters instead of '\u0151', '\u0150', '\u0171' and '\u0170' characters.</p>\n\n<p>Here is my perl script:</p>\n\n<pre><code>use uft8;\nuse DBI\n\nmy $db = DBI-&gt;connect(\"dbi:mysql:dbname=...\", \"user\", \"passwd\",\n                      {mysql_enable_utf8 =&gt; 1}) || die $DBI::error;\n\n$db-&gt;do(\"INSERT INTO mytable (name) VALUES ('\u0151\u0171\u0150\u0170')\");\nmy $dbh = $db-&gt;prepare(\"SELECT name FROM mytable;\");\n$dbh-&gt;execute;\nwhile (my @this = $dbh-&gt;fetchrow_array) {\n    print $this[0].\"\\n\";\n}\n</code></pre>\n\n<p>What is wrong? Is there a special parameter or setting for DBI? Or </p>\n"}, {"tags": ["perl", "filenames"], "comments": [{"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1420890533, "post_id": 27874445, "comment_id": 44153203, "body": "The <code>glob</code> function returns an array of files.. You assign only first file to <code>$file</code>.."}], "answers": [{"comments": [{"owner": {"reputation": 2750, "user_id": 801553, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/74c6e34ee0ad953bb3079f5bb5cd9497?s=128&d=identicon&r=PG", "display_name": "Patrick J. S.", "link": "https://stackoverflow.com/users/801553/patrick-j-s"}, "edited": false, "score": 0, "creation_date": 1420892609, "post_id": 27875976, "comment_id": 44153760, "body": "I&#39;d rather say <code>glob</code> is an iterator function. It has a defined behaviour in scalar context where it doesn&#39;t return a list (and doesn&#39;t use the standard conversion from list to array). Also, in perl nothing returns arrays. Return values are either lists or references to arrays."}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "reply_to_user": {"reputation": 2750, "user_id": 801553, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/74c6e34ee0ad953bb3079f5bb5cd9497?s=128&d=identicon&r=PG", "display_name": "Patrick J. S.", "link": "https://stackoverflow.com/users/801553/patrick-j-s"}, "edited": false, "score": 1, "creation_date": 1420893381, "post_id": 27875976, "comment_id": 44153976, "body": "@PatrickJ.S. Thanks!.. updated answer with more accurate description."}, {"owner": {"reputation": 11, "user_id": 4337495, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1dc132b05de8dff4311669ce2616dd8f?s=128&d=identicon&r=PG&f=1", "display_name": "perlstudent", "link": "https://stackoverflow.com/users/4337495/perlstudent"}, "edited": false, "score": 0, "creation_date": 1420924412, "post_id": 27875976, "comment_id": 44164125, "body": "That is so awesome :) I was trying to do something originally without using glob, but couldn&#39;t get it right. This is perfect!"}], "tags": [], "owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "is_accepted": false, "score": 1, "last_activity_date": 1420896778, "last_edit_date": 1420896778, "creation_date": 1420891068, "answer_id": 27875976, "question_id": 27874445, "link": "https://stackoverflow.com/questions/27874445/list-filename-of-match-when-file-matches-string-modifying-this-code/27875976#27875976", "title": "List filename of match when file matches string (modifying this code)", "body": "<p>From the documentation of the <code>glob</code> function <a href=\"http://perldoc.perl.org/functions/glob.html\" rel=\"nofollow\">perldoc.perl.org/functions/glob.html</a> :</p>\n\n<blockquote>\n  <p>glob EXPR</p>\n  \n  <p>In list context, returns a (possibly empty) list of filename\n  expansions on the value of EXPR such as the standard Unix shell\n  /bin/csh would do. In scalar context, glob iterates through such\n  filename expansions, returning undef when the list is exhausted. This\n  is the internal function implementing the &lt;*.c> operator, but you can\n  use it directly.</p>\n</blockquote>\n\n<p>So you could try:</p>\n\n<pre><code>use strict;\nuse warnings;\n\nuse Text::Extract::Word;\n\nbinmode STDOUT, ':encoding(UTF-8)';\n\nfor my $file (&lt;*.doc&gt;) {\n    my $extractor = Text::Extract::Word-&gt;new($file);\n    my $string = $extractor-&gt;get_text;\n    my $count = () = $string =~ /Hello/g; \n    print \"there are $count matches in file '$file'\\n\";\n}\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 4337495, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1dc132b05de8dff4311669ce2616dd8f?s=128&d=identicon&r=PG&f=1", "display_name": "perlstudent", "link": "https://stackoverflow.com/users/4337495/perlstudent"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 52, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1420896778, "creation_date": 1420879952, "last_edit_date": 1420894719, "question_id": 27874445, "link": "https://stackoverflow.com/questions/27874445/list-filename-of-match-when-file-matches-string-modifying-this-code", "title": "List filename of match when file matches string (modifying this code)", "body": "<p>I created a script for scanning all word documents in a directory. The problem that I ran into was that I can match with regular expression, but I have no idea which files the matches are coming from. I can print the entirety of the file that the matches are coming from by using <code>$file</code> inside of <code>foreach my $file( $string)</code>, but want to only get the filename from that file. Entering <code>__file__</code> give the filename of the script itself and not the file. This is probably an easy answer, but I am currently stuck.</p>\n\n<pre><code> #!/usr/bin/env perl\n\n use strict qw/refs/;\n use warnings FATAL =&gt; 'all';\n use Text::Extract::Word;\n\n binmode STDOUT, ':encoding(UTF-8)';\n\n my $file = glob('*.doc');\n my $extractor = Text::Extract::Word-&gt;new($file);\n my $string = $extractor-&gt;get_text;\n\n my $count = () = $string =~ /the/g; \n\n print \"there are \".$count.\" matches\".\"\\n\";\n\n foreach my $file( $string)\n {\n     print \"Matches correspond to the following file(s): \".\"\".\"\\n\";\n }\n\n close STDOUT;\n</code></pre>\n"}, {"tags": ["python", "perl", "shell", "url"], "comments": [{"owner": {"reputation": 7999, "user_id": 3121703, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/800b7f57322266f268458c067912a932?s=128&d=identicon&r=PG&f=1", "display_name": "Nachiket Kate", "link": "https://stackoverflow.com/users/3121703/nachiket-kate"}, "edited": false, "score": 0, "creation_date": 1420910918, "post_id": 27874279, "comment_id": 44159644, "body": "try echo &quot;http:// news.yahoo.com/test&quot; | cut -f2- -d &quot;.&quot; | cut -f1 -d &quot;/&quot;"}], "answers": [{"tags": [], "owner": {"reputation": 4191, "user_id": 1466640, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c0630f2d5ac5fb844675c58d3d2dfa57?s=128&d=identicon&r=PG&f=1", "display_name": "AKHolland", "link": "https://stackoverflow.com/users/1466640/akholland"}, "is_accepted": false, "score": 1, "last_activity_date": 1420907439, "creation_date": 1420907439, "answer_id": 27878444, "question_id": 27874279, "link": "https://stackoverflow.com/questions/27874279/extract-main-domain-from-url-using-shell-python-perl/27878444#27878444", "title": "Extract main domain from URL using Shell/Python/Perl", "body": "<p>You can use the <a href=\"https://metacpan.org/pod/URI\" rel=\"nofollow\" title=\"metaCPAN URI\"><code>URI</code></a> module on cpan to parse those strings and extract hostnames:</p>\n\n<pre><code>use URI;\nwhile(&lt;&gt;) {\n    my $uri = URI-&gt;new($_);\n    my $host = $uri-&gt;host;\n}\n</code></pre>\n\n<p>And if you need to get rid of the first subdomain, just use string splitting. Something like:</p>\n\n<pre><code>my @parts = split /\\./, $host;\nunshift @parts if @parts &gt; 2;\nmy $newHost = join \".\", @parts;\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 2537826, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/98aab09c13977e713a80762ab27cd63c?s=128&d=identicon&r=PG", "display_name": "user2537826", "link": "https://stackoverflow.com/users/2537826/user2537826"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 66, "favorite_count": 0, "answer_count": 1, "score": -6, "last_activity_date": 1420907439, "creation_date": 1420878272, "question_id": 27874279, "link": "https://stackoverflow.com/questions/27874279/extract-main-domain-from-url-using-shell-python-perl", "title": "Extract main domain from URL using Shell/Python/Perl", "body": "<p>I know it seems this question has been asked and answered, but there are more complicated situation to consider.</p>\n\n<p>I list some situations here:</p>\n\n<p>http:// news.yahoo.com/test -> yahoo.com</p>\n\n<p>http:// www.yahoo.com/test -> yahoo.com</p>\n\n<p>http:// sports.sina.com.cn/test -> sina.com.cn</p>\n\n<p>http:// news.yahoo.co.jp/test -> yahoo.co.jp</p>\n\n<p>http:// subdomain.evisu.jp/test -> evisu.jp</p>\n\n<p>http:// cs.stanford.edu/test -> stanford.edu</p>\n\n<p>http:// eecs.tsinghua.edu.cn/test -> tsinghua.edu.cn</p>\n\n<p>http:// math.u-tokyo.ac.jp/test -> u-tokyo.ac.jp</p>\n\n<p>Actually there are more complicated situation, but let's not discuss the situation below.</p>\n\n<p>http:// www.jx.cn/test -> jx.cn</p>\n\n<p>http:// www.ecjtu.jx.cn/test -> ecjtu.jx.cn</p>\n"}, {"tags": ["regex", "bash", "perl", "sed"], "comments": [{"owner": {"reputation": 563, "user_id": 574621, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e726f39f8cc4da742d8c9b5a690c0a05?s=128&d=identicon&r=PG", "display_name": "MERM", "link": "https://stackoverflow.com/users/574621/merm"}, "edited": false, "score": 0, "creation_date": 1420853204, "post_id": 27871857, "comment_id": 44146233, "body": "Since you are not anchoring your regex (using ^ for the beginging of the string to match, or $ for the end) if floats and can match mid string."}, {"owner": {"reputation": 2750, "user_id": 801553, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/74c6e34ee0ad953bb3079f5bb5cd9497?s=128&d=identicon&r=PG", "display_name": "Patrick J. S.", "link": "https://stackoverflow.com/users/801553/patrick-j-s"}, "edited": false, "score": 0, "creation_date": 1420853307, "post_id": 27871857, "comment_id": 44146254, "body": "You may want to use the <code>*</code> quantifier instead of the <code>+</code> in the second regex. <a href=\"http://perldoc.perl.org/perlretut.html\" rel=\"nofollow noreferrer\">Here</a> is a tutorial to regexes. Or just use <code>split</code>."}, {"owner": {"reputation": 4421, "user_id": 3789676, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/aUh8k.jpg?s=128&g=1", "display_name": "midori", "link": "https://stackoverflow.com/users/3789676/midori"}, "edited": false, "score": 0, "creation_date": 1420861199, "post_id": 27871857, "comment_id": 44147529, "body": "may any other columns have more than 6 symbols?"}], "answers": [{"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": true, "score": 1, "last_activity_date": 1420905654, "last_edit_date": 1420905654, "creation_date": 1420853270, "answer_id": 27871891, "question_id": 27871857, "link": "https://stackoverflow.com/questions/27871857/regex-that-filters-out-7characters-in-11th-column-of-csv-file/27871891#27871891", "title": "Regex that filters out 7characters in 11th column of csv file", "body": "<p>As long as there are never any commas in the data itself, you can use</p>\n\n<pre><code> perl -ne 'print if length((split /,/)[10]) &gt; 6' /come/and/play/with/us/casper.csv\n</code></pre>\n\n<p>Of course this prints the lines in error. You can replace the <code>if</code> with an <code>unless</code> to print the valid lines.</p>\n\n<hr>\n\n<p><strong>Update</strong></p>\n\n<p>Or, using Perl's command line options to the full</p>\n\n<pre><code>perl -F, -e'print if length $F[10] &gt; 6' /come/and/play/with/us/casper.csv\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 39446, "user_id": 4301306, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a1461d0104809c90e2a252a2d4b0ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Wintermute", "link": "https://stackoverflow.com/users/4301306/wintermute"}, "is_accepted": false, "score": 2, "last_activity_date": 1420861592, "last_edit_date": 1420861592, "creation_date": 1420855004, "answer_id": 27872080, "question_id": 27871857, "link": "https://stackoverflow.com/questions/27871857/regex-that-filters-out-7characters-in-11th-column-of-csv-file/27872080#27872080", "title": "Regex that filters out 7characters in 11th column of csv file", "body": "<p>Oh, wow. That is a dirty hack if I ever saw one. The <code>,,,,(.{7}),</code> regex does not match the 11th column, it matches anything where four commas are followed by seven arbitrary characters followed by a comma. This means that a line</p>\n\n<pre><code>D,,,WOW,,,M,,,,DANNNYYY,-213.00,-213,69036R400\n           ^^^^1234567^ &lt;-- last one not a comma\n</code></pre>\n\n<p>(with 8 characters in column 11) will not be caught, and a line</p>\n\n<pre><code>D,,,,WOWWOWW,,M,,,,DANNNY,-213.00,-213,69036R400\n ^^^^1234567^ &lt;-- match\n</code></pre>\n\n<p>with four commas followed by 7 characters followed by a comma in a different place will. Indeed, since there is nothing in the 7 characters that prevents it from matching other commas,</p>\n\n<pre><code>D,,,,WOW,,M,,,,DANNNYYY,-213.00,-213,69036R400\n ^^^^1234567^ &lt;-- match\n</code></pre>\n\n<p>will also be considered broken.</p>\n\n<p>If it were me, I'd use awk to filter out broken lines.</p>\n\n<pre><code>awk -F, 'length($11) &lt; 7' /come/and/play/with/us/casper.csv\n</code></pre>\n\n<p>will print all lines in casper.csv in which the 11th field is less than 7 characters long. If you have a recent GNU awk (4.1.0 or later), you can use</p>\n\n<pre><code>awk -i inplace -F, 'length($11) &lt; 7' /come/and/play/with/us/casper.csv\n</code></pre>\n\n<p>to change the file in place, although personally I'd like to have the original around just in case.</p>\n"}, {"tags": [], "owner": {"reputation": 46858, "user_id": 967492, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/526ea226101e199d029049dda22a4e58?s=128&d=identicon&r=PG", "display_name": "potong", "link": "https://stackoverflow.com/users/967492/potong"}, "is_accepted": false, "score": 1, "last_activity_date": 1420869333, "creation_date": 1420869333, "answer_id": 27873333, "question_id": 27871857, "link": "https://stackoverflow.com/questions/27871857/regex-that-filters-out-7characters-in-11th-column-of-csv-file/27873333#27873333", "title": "Regex that filters out 7characters in 11th column of csv file", "body": "<p>This might work for you (GNU sed):</p>\n\n<pre><code>sed '/^\\([^,]*,\\){\\10\\}[^,]\\{7\\}/d' file\n</code></pre>\n\n<p>This will delete lines with 7 or more characters in the 11th field of a pure CSV file assuming <code>,</code> is the only delimiter. It looks for ten fields which contain zero or more non-comma characters followed by a comma ,starting from the beginning of the line and finally tries to match seven non-comma characters in the 11th field. </p>\n"}], "owner": {"reputation": 2167, "user_id": 824282, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/8f0cb967adb644f6408e5ff3df8c8a0f?s=128&d=identicon&r=PG", "display_name": "capser", "link": "https://stackoverflow.com/users/824282/capser"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 174, "favorite_count": 0, "accepted_answer_id": 27871891, "answer_count": 3, "score": 0, "last_activity_date": 1420905654, "creation_date": 1420852945, "question_id": 27871857, "link": "https://stackoverflow.com/questions/27871857/regex-that-filters-out-7characters-in-11th-column-of-csv-file", "title": "Regex that filters out 7characters in 11th column of csv file", "body": "<p>So I have this csv file casper.csv. It has one line that breaks this database process that runs offshore . So i just\nadded this to the script that processes the file and it sed's\nit out in the script. viola - no phone calls.</p>\n\n<pre><code>cd /come/and/play/with/us\n    sed -i '/D,642,0642,WOW,MOM,,M,,S,S,DANNNYY,213,213,/d' /come/and/play/with/us/casper.csv\n</code></pre>\n\n<p>Anyhow - I started getting calls at 3am saying that the offshore database process is dying again. There is a different bad line that my sed hack could not catch.\nWe later discovered that if the 11th column has more than 6 characters it will break the\ndatabase process.</p>\n\n<p>The offshore guy used this to find the bad lines:</p>\n\n<pre><code>/come/and/play/with/us/casper.csv | perl -nle 'print if /,,,,(.{7}),/'\nD,,,WOW,,,M,,,,DANNNYY,-213.00,-213,69036R400\nD,,,WOW,,,M,,,,QSP-U=C,-4.00,-4,76090H103\n</code></pre>\n\n<p>So now I use the offshore guy's perl one liner to find out the line that will break the offshore database process, and manually delete it in the file with vi. However I  do not understand how the perl one liner works.\nBecause it only has 4 commas before the {7} where as is should have 10. and there is not \\w or \\d before the 7?</p>\n\n<pre><code> perl  -nle 'print if /,,,,(.{7}),/'\n</code></pre>\n\n<p>Most of the regexs that I would build look like this</p>\n\n<p>,\\w,\\w+,\\w+,\\w+,\\w+,\\w+,\\w+,\\w+,\\w+,\\w{7},\\w+,\\w+,</p>\n\n<p>but even this does not work all the time because sometimes there is nothing between the commas  - ie 'D,,,WOW'</p>\n\n<p>The problem is that big boss caught me doing this manually and wants it automated.\nI need to add something to the upstream bash script that will kick out any line in the csv file where the 11th column consists of more than 6 characters - these six characters could be anything and sometimes their is nothing (no space) between the commas ... ie 'D,,,WOW'</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1420855310, "post_id": 27871406, "comment_id": 44146552, "body": "&quot;Class subroutines&quot; are called methods"}], "answers": [{"tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": true, "score": 5, "last_activity_date": 1420849489, "creation_date": 1420849489, "answer_id": 27871456, "question_id": 27871406, "link": "https://stackoverflow.com/questions/27871406/passing-argument-to-a-perl-class-subroutin/27871456#27871456", "title": "Passing argument to a Perl class subroutin", "body": "<p>The first argument to a method is the invocant, i.e. the object. Use <code>$_[1]</code> for the real first argument. Or, more readable:</p>\n\n<pre><code>sub getModemHost {\n    my ($self, $modem_number) = @_;\n    print \"Modem-$modem_number.Host\";\n}\n</code></pre>\n\n<p>See <a href=\"http://p3rl.org/perlobj\">perlobj</a> for details.</p>\n"}, {"tags": [], "owner": {"reputation": 946, "user_id": 1765406, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/Koqta.jpg?s=128&g=1", "display_name": "vanHoesel", "link": "https://stackoverflow.com/users/1765406/vanhoesel"}, "is_accepted": false, "score": 0, "last_activity_date": 1420921878, "creation_date": 1420921878, "answer_id": 27880920, "question_id": 27871406, "link": "https://stackoverflow.com/questions/27871406/passing-argument-to-a-perl-class-subroutin/27880920#27880920", "title": "Passing argument to a Perl class subroutin", "body": "<p>Or something very common:</p>\n\n<pre><code>sub myObjectMethod {\n    my $self = shift;\n\n    ...\n\n    # do here what you like to do with $_[0]\n    # for we have removed the first parameter\n\n    ...\n\n};\n</code></pre>\n"}], "owner": {"reputation": 2920, "user_id": 3360140, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/OThx0.jpg?s=128&g=1", "display_name": "Kamrul Khan", "link": "https://stackoverflow.com/users/3360140/kamrul-khan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 49, "favorite_count": 0, "accepted_answer_id": 27871456, "answer_count": 2, "score": 0, "last_activity_date": 1420921878, "creation_date": 1420849202, "question_id": 27871406, "link": "https://stackoverflow.com/questions/27871406/passing-argument-to-a-perl-class-subroutin", "title": "Passing argument to a Perl class subroutin", "body": "<p>My code is pretty simple. I have a subroutin getModemHost under a package named smconfig. </p>\n\n<pre><code>sub getModemHost {\n   print 'Modem-'.$_[0].'.Host';\n}\n</code></pre>\n\n<p>when Im calling this subroutin with an argument, I see strange values rather than what I passed. The below line prints Modem-smconfig=HASH(0x9433968).Host. I am expecting Modem-1.Host</p>\n\n<pre><code>$smconfig-&gt;getModemHost(1)\n</code></pre>\n"}, {"tags": ["git", "perl", "shell", "svn"], "comments": [{"owner": {"reputation": 2439, "user_id": 3398351, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/73ce0c654576c489f851734a9a77462e?s=128&d=identicon&r=PG&f=1", "display_name": "Dave", "link": "https://stackoverflow.com/users/3398351/dave"}, "edited": false, "score": 0, "creation_date": 1420847931, "post_id": 27871200, "comment_id": 44144903, "body": "Can you provide some details about what you are doing?  Are you calling &quot;system(git clone..)&quot; or are you using the perl GIT::* modules? which one? provide examples of what doesn&#39;t work please."}, {"owner": {"reputation": 37, "user_id": 3816820, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/108d8ddfa518430581e3585b066e4921?s=128&d=identicon&r=PG&f=1", "display_name": "user3816820", "link": "https://stackoverflow.com/users/3816820/user3816820"}, "reply_to_user": {"reputation": 2439, "user_id": 3398351, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/73ce0c654576c489f851734a9a77462e?s=128&d=identicon&r=PG&f=1", "display_name": "Dave", "link": "https://stackoverflow.com/users/3398351/dave"}, "edited": false, "score": 0, "creation_date": 1420848539, "post_id": 27871200, "comment_id": 44145077, "body": "I&#39;m using <code>git svn clone https:&#47;&#47;SVNRepo&#47;SvnPath</code> within the &quot;`&quot; in Perl program. I&#39;m not using the perl GIT::* module."}, {"owner": {"reputation": 2439, "user_id": 3398351, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/73ce0c654576c489f851734a9a77462e?s=128&d=identicon&r=PG&f=1", "display_name": "Dave", "link": "https://stackoverflow.com/users/3398351/dave"}, "edited": false, "score": 0, "creation_date": 1420850874, "post_id": 27871200, "comment_id": 44145739, "body": "In my limited testing, I found system(&quot;/usr/bin/git ....&quot;) did what I wanted.  It failed when I didn&#39;t use the full path to git, which doesn&#39;t quite make sense.  The error was from git, which means it was able to launch git, which then couldn&#39;t find the SVN module. I suspect the environment inside the perl system() call (or backticks) is different than what you expect.  Consider checking for proxy settings which might be in your environment and are affecting the https:// request."}], "answers": [{"tags": [], "owner": {"reputation": 4061, "user_id": 1775715, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vzyZN.png?s=128&g=1", "display_name": "ShellFish", "link": "https://stackoverflow.com/users/1775715/shellfish"}, "is_accepted": false, "score": 0, "last_activity_date": 1420914589, "creation_date": 1420914589, "answer_id": 27879711, "question_id": 27871200, "link": "https://stackoverflow.com/questions/27871200/can-anyone-help-me-in-using-git-svn-clone-https-svnrepo-svnpath-in-perl-scri/27879711#27879711", "title": "can anyone help me in using &quot;git svn clone https://svnrepo/svnpath&quot; in Perl script?", "body": "<p>Try to embed following in your code <code>system('git svn clone \"https://svnrepo/svnpath\"');</code>. If this is what you already have, you'll have to provide more details.`</p>\n"}, {"tags": [], "owner": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "is_accepted": false, "score": 0, "last_activity_date": 1420924318, "creation_date": 1420924318, "answer_id": 27881269, "question_id": 27871200, "link": "https://stackoverflow.com/questions/27871200/can-anyone-help-me-in-using-git-svn-clone-https-svnrepo-svnpath-in-perl-scri/27881269#27881269", "title": "can anyone help me in using &quot;git svn clone https://svnrepo/svnpath&quot; in Perl script?", "body": "<p>Here's what I'd try to narrow down the problems...</p>\n\n<p>You say <code>git svn clone</code> works from the terminal but not from the program.  Are you running the program from that terminal?  Or is it running from a web server?  The web server would have a completely different environment and permissions.</p>\n\n<p>I'd make sure the URL I'm passing into <code>git svn clone $url</code> is what I think it is.  Try hard coding it, or printing <code>$url</code> to confirm.</p>\n\n<p>Then I'd try accessing the URL via some other means.  <code>curl $url</code> or <code>wget $url</code> or using <a href=\"https://metacpan.org/pod/LWP::Simple\" rel=\"nofollow\">LWP::Simple</a>.  If that doesn't work then it's a general networking problem, maybe proxies.</p>\n\n<p>I'd make sure <code>$ENV{PATH}</code> is the same in the program as <code>$PATH</code> is in my shell.  I'd make sure <code>which git</code> reports the same in the program and out.  I'd try hard coding it just in case.</p>\n\n<p>I'd run <code>git svn help</code> in the program to make sure it has SVN capabilities.</p>\n"}], "owner": {"reputation": 37, "user_id": 3816820, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/108d8ddfa518430581e3585b066e4921?s=128&d=identicon&r=PG&f=1", "display_name": "user3816820", "link": "https://stackoverflow.com/users/3816820/user3816820"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 89, "favorite_count": 0, "answer_count": 2, "score": -3, "last_activity_date": 1598195765, "creation_date": 1420847668, "last_edit_date": 1598195765, "question_id": 27871200, "link": "https://stackoverflow.com/questions/27871200/can-anyone-help-me-in-using-git-svn-clone-https-svnrepo-svnpath-in-perl-scri", "title": "can anyone help me in using &quot;git svn clone https://svnrepo/svnpath&quot; in Perl script?", "body": "<p>If I include the command as <code>git svn clone https://svnrepo/svnpath</code> in my script, the error I get is:</p>\n<p>W: Ignoring error from SVN, path probably does not exist: (160013): Filesystem has no item: /svnpath path not found</p>\n<p>While the command works fine when run on a terminal, but doesn't execute when called from the perl script.</p>\n"}, {"tags": ["perl"], "answers": [{"comments": [{"owner": {"reputation": 7936, "user_id": 759991, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/LFxFQ.jpg?s=128&g=1", "display_name": "Red Cricket", "link": "https://stackoverflow.com/users/759991/red-cricket"}, "edited": false, "score": 0, "creation_date": 1420844371, "post_id": 27870611, "comment_id": 44143677, "body": "Thanks! I always get <code>$o-&gt;thing</code>, <code>$o{&#39;thing&#39;}</code> and <code>$o-&gt;{&#39;thing&#39;}</code> mixed up."}], "tags": [], "owner": {"reputation": 59411, "user_id": 8355, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/8d0099a2574719d7a67eab012851bf9b?s=128&d=identicon&r=PG", "display_name": "cjm", "link": "https://stackoverflow.com/users/8355/cjm"}, "is_accepted": true, "score": 4, "last_activity_date": 1420844165, "creation_date": 1420844165, "answer_id": 27870611, "question_id": 27870579, "link": "https://stackoverflow.com/questions/27870579/how-do-i-dereference-datadumper-output/27870611#27870611", "title": "How do I dereference Data::Dumper output?", "body": "<p>You should have used <code>$obj-&gt;{'classname'}</code>.  Without the arrow, <code>$obj{'classname'}</code> accesses the <code>%obj</code> hash instead of the hashref in <code>$obj</code>.</p>\n\n<p>This is the sort of error that gets caught by <code>use strict;</code> so your real error is not doing that.</p>\n"}], "owner": {"reputation": 7936, "user_id": 759991, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/LFxFQ.jpg?s=128&g=1", "display_name": "Red Cricket", "link": "https://stackoverflow.com/users/759991/red-cricket"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 176, "favorite_count": 0, "accepted_answer_id": 27870611, "answer_count": 1, "score": 0, "last_activity_date": 1420844165, "creation_date": 1420843978, "question_id": 27870579, "link": "https://stackoverflow.com/questions/27870579/how-do-i-dereference-datadumper-output", "title": "How do I dereference Data::Dumper output?", "body": "<p>I always forget how to do this.<br>\nI have this Perl code:</p>\n\n<p>print Dumper($obj);</p>\n\n<p>Here is my Data::Dumper output:</p>\n\n<pre><code>$VAR1 = {\n          'classname' =&gt; 'Template',\n          'oid' =&gt; 2,\n          'pid' =&gt; '50'\n        };\n</code></pre>\n\n<p>But when I do something like ...</p>\n\n<pre><code>print LOGGER \"classname is [\\n\". $obj{'classname'} . \"]\\n\";\n</code></pre>\n\n<p>... I get this error ...</p>\n\n<pre><code>Use of uninitialized value in concatenation (.) or string at\n</code></pre>\n\n<p>what am I doing wrong here?</p>\n"}, {"tags": ["linux", "perl", "udev"], "comments": [{"owner": {"reputation": 79, "user_id": 4421535, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b6b091bd6c5bf149ce57d3fb227dfcc9?s=128&d=identicon&r=PG&f=1", "display_name": "bomberblue", "link": "https://stackoverflow.com/users/4421535/bomberblue"}, "reply_to_user": {"reputation": 2414, "user_id": 7404, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6cb00ae3cf0974be05165f2e1703225a?s=128&d=identicon&r=PG&f=1", "display_name": "belwood", "link": "https://stackoverflow.com/users/7404/belwood"}, "edited": false, "score": 0, "creation_date": 1420844244, "post_id": 27870409, "comment_id": 44143633, "body": "After some playing around (setting <code>$kernel = &quot;sdb&quot;</code> and changing the rule so if <code>RESULT==&quot;ok&quot;</code> then the drive is hidden) I figured out the real problem is that the output of my script doesn&#39;t seem to be captured by RESULT for some reason.  I invoke the script via command line simply with <code>.&#47;diskSizeCheck.pl sdb</code>"}], "answers": [{"comments": [{"owner": {"reputation": 79, "user_id": 4421535, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b6b091bd6c5bf149ce57d3fb227dfcc9?s=128&d=identicon&r=PG&f=1", "display_name": "bomberblue", "link": "https://stackoverflow.com/users/4421535/bomberblue"}, "edited": false, "score": 0, "creation_date": 1421175236, "post_id": 27871830, "comment_id": 44255840, "body": "Thanks! That output let me know the real problem: in my version of udev, it needed the full path of blockdev (<code>&#47;sbin&#47;blockdev</code>) to work properly!"}], "tags": [], "owner": {"reputation": 2414, "user_id": 7404, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6cb00ae3cf0974be05165f2e1703225a?s=128&d=identicon&r=PG&f=1", "display_name": "belwood", "link": "https://stackoverflow.com/users/7404/belwood"}, "is_accepted": true, "score": 2, "last_activity_date": 1420855287, "last_edit_date": 1420855287, "creation_date": 1420852687, "answer_id": 27871830, "question_id": 27870409, "link": "https://stackoverflow.com/questions/27870409/parameter-from-udev-rule-not-passing-into-perl-script/27871830#27871830", "title": "Parameter from udev rule not passing into perl script", "body": "<p>using </p>\n\n<pre><code>KERNEL==\"sdc\", SUBSYSTEMS==\"block\", ACTION==\"add\", PROGRAM=\"/usr/local/diskSizeCheck.pl %k\", RESULT!=\"ok\", ENV{UDISKS_PRESENTATION_HIDE}=\"1\"\n</code></pre>\n\n<p>With diskSizeCheck.pl:</p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\nopen FH,\"&gt;/tmp/diskSizeCheck\";\nprint FH \"Disk Size Check\\n\"; \n\nmy $MINIMUM_DISK_SIZE = 64000000000;\nmy $kernel = $ARGV[0];\nmy $diskSize = `sudo blockdev --getsize64 /dev/$kernel`;\nchomp($diskSize);\n\nprint FH \"kernel = $kernel, $diskSize\\n\";\n\nif ($diskSize &gt; $MINIMUM_DISK_SIZE) {\n    print FH \"ok\\n\";\n} else {\n   print FH \"no\\n\";\n}\n</code></pre>\n\n<p>On inserting a USB stick I got /tmp/diskSpaceSize:</p>\n\n<pre><code>Disk Size Check\nsdc, 2005925888\nno\n</code></pre>\n"}], "owner": {"reputation": 79, "user_id": 4421535, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b6b091bd6c5bf149ce57d3fb227dfcc9?s=128&d=identicon&r=PG&f=1", "display_name": "bomberblue", "link": "https://stackoverflow.com/users/4421535/bomberblue"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 505, "favorite_count": 0, "accepted_answer_id": 27871830, "answer_count": 1, "score": 3, "last_activity_date": 1420855287, "creation_date": 1420843093, "last_edit_date": 1420844301, "question_id": 27870409, "link": "https://stackoverflow.com/questions/27870409/parameter-from-udev-rule-not-passing-into-perl-script", "title": "Parameter from udev rule not passing into perl script", "body": "<p>I'm trying to create a udev rule that hides block devices (i.e usb drives) with a size less than 64 GB</p>\n\n<p>The rule looks like this:</p>\n\n<pre><code>BUS==\"usb\", SUBSYSTEM==\"block\", ACTION==\"add\", PROGRAM=\"/data/diskSizeCheck.pl %k\", RESULT!=\"ok\", ENV{UDISKS_PRESENTATION_HIDE}=\"1\", GOTO=\"usb_mount_end\"\n</code></pre>\n\n<p>Where <code>usb_mount_end</code> is just a label at the end of my rules file. <code>%k</code> is supposed to be the device kernel (i.e sdb). But even when I hardcode 'sdb' as a parameter, that parameter never makes it to my perl script, and the disk always fails the size check even if it's large enough. When I pass sdb in via the command line, though, it works.</p>\n\n<p>Here is the perl script I'm using:</p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nmy $MINIMUM_DISK_SIZE = 64000000000;\nmy $kernel = $ARGV[0];\nmy $diskSize = `blockdev --getsize64 /dev/$kernel`;\nchomp($diskSize);\n\nif ($diskSize &gt; $MINIMUM_DISK_SIZE) {\n    print \"ok\";\n} else {\n    print \"no\";\n}\n</code></pre>\n\n<p>The script is marked as executable and everything, but when I wrote <code>$kernel</code> to a text file, the text file came up blank, leading me to believe the variable is never passed in.</p>\n\n<p>How do I pass in <code>%k</code> to my perl script?</p>\n\n<p>Edit to add: I'm running everything as root.</p>\n\n<p>Edit to further add: I think the real problem is that RESULT isn't properly capturing the output of my script for some reason.</p>\n"}, {"tags": ["regex", "perl", "split"], "answers": [{"tags": [], "owner": {"reputation": 45481, "user_id": 197758, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/628da6ba2a6c70e35c009b7e3c3a430a?s=128&d=identicon&r=PG", "display_name": "toolic", "link": "https://stackoverflow.com/users/197758/toolic"}, "is_accepted": false, "score": 4, "last_activity_date": 1420839624, "last_edit_date": 1420839624, "creation_date": 1420839025, "answer_id": 27869565, "question_id": 27869354, "link": "https://stackoverflow.com/questions/27869354/perl-split-one-column-into-two/27869565#27869565", "title": "perl: split one column into two", "body": "<p><a href=\"http://perldoc.perl.org/functions/split.html\" rel=\"nofollow\">split</a> with LIMIT=2:</p>\n\n<pre><code>use warnings;\nuse strict;\n\nwhile (my $line = &lt;DATA&gt;) {\n    chomp $line;\n    my ($id, $annot) = split /\\s+/, $line, 2;\n    print \"id    = $id\\n\";\n    print \"annot = $annot\\n\";\n}\n\n__DATA__\n529120 30S ribosomal protein S3\n</code></pre>\n\n<p>Outputs:</p>\n\n<pre><code>id    = 529120\nannot = 30S ribosomal protein S3\n</code></pre>\n"}], "owner": {"reputation": 181, "user_id": 2925852, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/a8bffdebda00fde2b34d87e9d7b4c415?s=128&d=identicon&r=PG&f=1", "display_name": "Bex", "link": "https://stackoverflow.com/users/2925852/bex"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 252, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1420839624, "creation_date": 1420838100, "last_edit_date": 1420839094, "question_id": 27869354, "link": "https://stackoverflow.com/questions/27869354/perl-split-one-column-into-two", "title": "perl: split one column into two", "body": "<p>I have a column in a spreadsheet that contains both a numerical ID and then an annotation. For example:</p>\n\n<pre><code>529120  30S ribosomal protein S3\n</code></pre>\n\n<p>I'd like to split that column into two where the first column contains the numerical ID (529120) and the second column contains the annotation (30S ribosomal protein S3).</p>\n\n<p>The code I have so far only prints out the numerical ID for the first column and then terminates. </p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\n\nmy $annotationsFile = \"/Users/mycomputer/Desktop/AnnotationsSplit.tsv\";\n\n    open( ANNOTATIONS, \"&lt;\", $annotationsFile )\n      or die \"Cannot open file $!\";\n\n      while ( my $line = &lt;ANNOTATIONS&gt; ) {\n        chomp $line;\n        my @column     = split( /\\t/, $line );\n        my $annotationFull = $column[3];\n        my ($annotationNumber) = $annotationFull =~ (/^(\\d+)/);\n        print $annotationNumber, \"\\n\";\n}\n</code></pre>\n"}, {"tags": ["perl", "multiple-columns", "bioinformatics"], "comments": [{"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 1, "creation_date": 1420827914, "post_id": 27866718, "comment_id": 44136086, "body": "Side note: unless you <code>use autodie;</code> at the top of your script, you should always check that calls to <code>open</code> succeed, e.g. <code>open my $fh, &#39;&lt;&#39;, $file or die &quot;Failed to open &#39;$file&#39;: $!&quot;;</code>"}, {"owner": {"reputation": 7704, "user_id": 3964397, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/640272a326ae5f3cd89364b78f2108c9?s=128&d=identicon&r=PG", "display_name": "tjwrona1992", "link": "https://stackoverflow.com/users/3964397/tjwrona1992"}, "edited": false, "score": 0, "creation_date": 1420830543, "post_id": 27866718, "comment_id": 44137459, "body": "You are splitting on &quot;\\t&quot; but your columns are separate by spaces or &quot;\\s&quot;.  Although... I suspect that is only part of the problem because when I use the same file format as you I get different output."}], "answers": [{"tags": [], "owner": {"reputation": 98433, "user_id": 368630, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/107085826cfbb2700f535417a12c89cb?s=128&d=identicon&r=PG", "display_name": "David W.", "link": "https://stackoverflow.com/users/368630/david-w"}, "is_accepted": false, "score": 0, "last_activity_date": 1420833683, "last_edit_date": 1420833683, "creation_date": 1420830096, "answer_id": 27867395, "question_id": 27866718, "link": "https://stackoverflow.com/questions/27866718/perl-isolating-specific-columns-from-file-but-doesnt-work-when-there-is-special/27867395#27867395", "title": "Perl isolating specific columns from file but doesnt work when there is special characters in one column", "body": "<p>I took your program, and changed it to this for testing:</p>\n\n<pre><code>#! /usr/bin/env perl\n#\nuse strict;\nuse warnings;\n\nmy ($file1, $file2) = @ARGV;\n\nwhile (&lt;DATA&gt;) {\n    my @columns = split /\\t/, $_;\n\n    print \"$columns[0]\\t$columns[1]\\t$columns[2]\\t+\\n\";\n} \n\n__DATA__\n1   2   3   4   /sb/home/\n1   3   4   5   /sb/home/\n</code></pre>\n\n<p>I get:</p>\n\n<pre><code>1   2   3   +\n1   3   4   +\n</code></pre>\n\n<hr>\n\n<p>I suspect the issue is your input file. Perl reads to a NL, and if the file ends before a NL, you may not get that last line read. Check your file. Make sure the last line ends with a NL and see if that helps.</p>\n\n<p>A few suggestions:</p>\n\n<ul>\n<li>Use <code>use autodie;</code> or check when you open a file. It's not that important to do so when you close a file.</li>\n<li>When you split, it's better to use <code>split /\\s+/, $string;</code> because <code>/\\s+/</code> means any number of spaces or tabs. If for some reason someone put two tabs in a row, or used spaces, it'll still work.</li>\n</ul>\n"}, {"comments": [{"owner": {"reputation": 347, "user_id": 4167263, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-Xx_T-75SMk8/AAAAAAAAAAI/AAAAAAAAAi0/ps8-16h7aNc/photo.jpg?sz=128", "display_name": "Rudy", "link": "https://stackoverflow.com/users/4167263/rudy"}, "edited": false, "score": 0, "creation_date": 1420843605, "post_id": 27867447, "comment_id": 44143401, "body": "thanks for the tip i will try it out on the files that didnt work!"}], "tags": [], "owner": {"reputation": 7704, "user_id": 3964397, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/640272a326ae5f3cd89364b78f2108c9?s=128&d=identicon&r=PG", "display_name": "tjwrona1992", "link": "https://stackoverflow.com/users/3964397/tjwrona1992"}, "is_accepted": true, "score": 0, "last_activity_date": 1420830950, "last_edit_date": 1420830950, "creation_date": 1420830289, "answer_id": 27867447, "question_id": 27866718, "link": "https://stackoverflow.com/questions/27866718/perl-isolating-specific-columns-from-file-but-doesnt-work-when-there-is-special/27867447#27867447", "title": "Perl isolating specific columns from file but doesnt work when there is special characters in one column", "body": "<p>You are splitting on \"\\t\" but your columns are separate by spaces or \"\\s\"</p>\n\n<p>Change</p>\n\n<pre><code>my @columns = split /\\t/, $_;\n</code></pre>\n\n<p>to </p>\n\n<pre><code>my @columns = split /\\s/, $_;\n</code></pre>\n\n<p>Also, Like David said check your line endings and make sure each line ends with a \"new line\" otherwise Perl may not process it correctly.</p>\n"}], "owner": {"reputation": 347, "user_id": 4167263, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-Xx_T-75SMk8/AAAAAAAAAAI/AAAAAAAAAi0/ps8-16h7aNc/photo.jpg?sz=128", "display_name": "Rudy", "link": "https://stackoverflow.com/users/4167263/rudy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 64, "favorite_count": 0, "accepted_answer_id": 27867447, "answer_count": 2, "score": 0, "last_activity_date": 1420833683, "creation_date": 1420827436, "question_id": 27866718, "link": "https://stackoverflow.com/questions/27866718/perl-isolating-specific-columns-from-file-but-doesnt-work-when-there-is-special", "title": "Perl isolating specific columns from file but doesnt work when there is special characters in one column", "body": "<p>I wrote a script to isolate specific columns from 1 file to a new file. It works as intended in most cases, however, when there is a / in one of the column from my data file, the following script will not work and only returns 1 line.</p>\n\n<pre><code>For example,\nA B C D E\n1 2 3 4 /sb/home/\n1 3 4 5 /sb/home/\n\nThe script will only return \n1 2 3 +\n\nWithout the E column, it returns everything as intended.\n1 2 3 +\n1 3 4 +\n\nuse strict;\nuse warnings;\n\nmy ($file1, $file2) = @ARGV;\n\nopen my $fh1, '&lt;', $file1;\n\nopen my $fh2, '&gt;', $file2;\n\nwhile (&lt;$fh1&gt;) {\n    my @columns = split /\\t/, $_;\n\n    print {$fh2} \"$columns[0]\\t$columns[1]\\t$columns[2]\\t+\\n\";\n}\n\nclose $fh1;\nclose $fh2 or die $!;\n</code></pre>\n\n<p>Any ideas as to why this is happening and ways to fix it?</p>\n"}, {"tags": ["regex", "perl", "expression", "conditional-statements"], "comments": [{"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 2, "creation_date": 1420826569, "post_id": 27866430, "comment_id": 44135453, "body": "Whenever you&#39;re working with delimited data, I would recommend using <code>split</code> (or <a href=\"https://metacpan.org/pod/Text::CSV\" rel=\"nofollow noreferrer\"><code>Text::CSV</code></a> if fields can contain the delimiter) and assigning meaningful variable names to the columns. Maintaining code with enormous regexes and variables <code>$1</code> through <code>$11</code> is very difficult and error prone."}, {"owner": {"reputation": 61610, "user_id": 725418, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/82ac2dc3e1ad4b7187f245c416528df9?s=128&d=identicon&r=PG", "display_name": "TLP", "link": "https://stackoverflow.com/users/725418/tlp"}, "edited": false, "score": 0, "creation_date": 1420905647, "post_id": 27866430, "comment_id": 44157793, "body": "There is only one column (col 2) in your csv data that contains <code>Opt|Fab</code>, therefore the regex can never match any of the lines, since field 9 should also be <code>Opt|Fab</code>."}], "answers": [{"tags": [], "owner": {"reputation": 52749, "user_id": 1400768, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tM0N8.png?s=128&g=1", "display_name": "nhahtdh", "link": "https://stackoverflow.com/users/1400768/nhahtdh"}, "is_accepted": true, "score": 1, "last_activity_date": 1420827351, "last_edit_date": 1420827351, "creation_date": 1420826568, "answer_id": 27866501, "question_id": 27866430, "link": "https://stackoverflow.com/questions/27866430/regex-conditions-in-captured-variables/27866501#27866501", "title": "Regex : conditions in captured variables", "body": "<p>Since you want to check line 1 &amp; 2, then 2 &amp; 3, you need to prevent the regex engine from consuming the 2nd line by placing the regex to match the second line in a look-ahead:</p>\n\n<pre><code>while ( $data =~ m/(\\d+);(Opt|Fab);(.+);(\\d{2});(.+);(.+);(.+)\\n(?=(\\d+);(Opt|Fab);.+;\\d{2};.+;(.+);(.+)\\n)/g ) {\n</code></pre>\n\n<p>I didn't think too much when I first answer, but as @ThisSuitIsBlackNot suggested in the comment, using regular expression to parse CSV results in low maintainability code. Using CSV library to parse the data and process them is a better idea here.</p>\n"}], "owner": {"reputation": 1033, "user_id": 2056878, "user_type": "registered", "accept_rate": 47, "profile_image": "https://i.stack.imgur.com/IZFw8.jpg?s=128&g=1", "display_name": "devio", "link": "https://stackoverflow.com/users/2056878/devio"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 66, "favorite_count": 0, "accepted_answer_id": 27866501, "answer_count": 1, "score": 0, "last_activity_date": 1420827351, "creation_date": 1420826344, "question_id": 27866430, "link": "https://stackoverflow.com/questions/27866430/regex-conditions-in-captured-variables", "title": "Regex : conditions in captured variables", "body": "<p>This is my data (in a file):</p>\n\n<pre><code>5807035;Fab;2015/01/05;04;668100;18:06:01,488;18:06:02,892\n5807028;Opt;2015/01/05;04;836100;17:12:45,223;17:12:47,407\n5807028;Fab;2015/01/05;04;836100;17:12:47,470;17:12:48,172\n5807027;Opt;2015/01/05;04;926100;17:12:31,807;17:12:34,365\n5807027;Fab;2015/01/05;04;926100;17:12:34,443;17:12:37,095\n5807026;Opt;2015/01/05;04;682100;17:12:11,698;17:12:19,062\n5807026;Fab;2015/01/05;04;682100;17:12:19,124;17:12:21,667\n5807025;Opt;2015/01/05;04;217100;17:12:00,669;17:12:02,635\n</code></pre>\n\n<p>This is my <code>Perl</code> code :</p>\n\n<pre><code>while ( $data =~ m/(\\d+);(Opt|Fab);(.+);(\\d{2});(.+);(.+);(.+)\\n(\\d+);(Opt|Fab);.+;\\d{2};.+;(.+);(.+)\\n/g ) { \n\n    if ( \"$1\" eq \"$8\" &amp;&amp; \"$2\" ne \"$9\" ) {\n        print OUTFILE \"$1;$3;$4;$5;$6;$7;$10;$11\\n\";\n    }\n}\n</code></pre>\n\n<p>The lines 1 and 2 match the regex, but do not satisfy the condition of the <code>if</code> statement. That's fine.</p>\n\n<p>On the other hand, the lines 2 and 3 satisfy the regex, AND the condition of the <code>if</code> statement. However, it these lines are not retrieved.</p>\n\n<p>I suppose it's because the regex read two lines, then the next two lines, etc. I think I should include the condition of the <code>if</code> statement in the regex (if I'm not mistaken).</p>\n\n<p>What do you guys think ?</p>\n\n<p>The variable <code>$data</code> holds the content of my CSV file.</p>\n"}, {"tags": ["regex", "bash", "perl"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 2, "creation_date": 1420828006, "post_id": 27866240, "comment_id": 44136130, "body": "Re &quot;please also advise on how non-capturing groups work&quot;, Example 1) <code>&#47;ab{2}&#47;</code> matchs strings containing <code>abb</code>, while <code>&#47;(?:ab){2}&#47;</code> matches strings containing <code>abab</code>. Example 2) <code>&#47;ab|c&#47;</code> matches strings containing <code>ab</code> and strings containing <code>c</code>, while <code>&#47;a(?:b|c)&#47;</code> matches strings containing <code>ab</code> and strings containing <code>ac</code>"}], "answers": [{"comments": [{"owner": {"reputation": 3262, "user_id": 1964707, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/at9Qr.jpg?s=128&g=1", "display_name": "Mindaugas Bernatavi\u010dius", "link": "https://stackoverflow.com/users/1964707/mindaugas-bernatavi%c4%8dius"}, "edited": false, "score": 0, "creation_date": 1420825853, "post_id": 27866284, "comment_id": 44135091, "body": "&quot;Non capturing group doesn&#39;t mean that input text won&#39;t be consumed.&quot; please also advise on how they work - would appreciate it"}, {"owner": {"reputation": 658023, "user_id": 548225, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/dab08478b226280d4a30894c9a7ed719?s=128&d=identicon&r=PG", "display_name": "anubhava", "link": "https://stackoverflow.com/users/548225/anubhava"}, "reply_to_user": {"reputation": 3262, "user_id": 1964707, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/at9Qr.jpg?s=128&g=1", "display_name": "Mindaugas Bernatavi\u010dius", "link": "https://stackoverflow.com/users/1964707/mindaugas-bernatavi%c4%8dius"}, "edited": false, "score": 1, "creation_date": 1420825989, "post_id": 27866284, "comment_id": 44135154, "body": "Added more explanation. You can also check: <a href=\"http://www.regular-expressions.info/brackets.html\" rel=\"nofollow noreferrer\">regular-expressions.info/brackets.html</a>"}, {"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 2, "creation_date": 1420826112, "post_id": 27866284, "comment_id": 44135222, "body": "or <code>s|:&#47;&#47;\\K.+?(?=&#47;)|b|</code> - <code>\\K</code> (not available in really old perls) sets where the consumption starts"}, {"owner": {"reputation": 3262, "user_id": 1964707, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/at9Qr.jpg?s=128&g=1", "display_name": "Mindaugas Bernatavi\u010dius", "link": "https://stackoverflow.com/users/1964707/mindaugas-bernatavi%c4%8dius"}, "edited": false, "score": 0, "creation_date": 1420826458, "post_id": 27866284, "comment_id": 44135397, "body": "Don&#39;t want to add another question for non-capturing group explanation, but I still don&#39;t get it. Let me illustrate by example:"}, {"owner": {"reputation": 3262, "user_id": 1964707, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/at9Qr.jpg?s=128&g=1", "display_name": "Mindaugas Bernatavi\u010dius", "link": "https://stackoverflow.com/users/1964707/mindaugas-bernatavi%c4%8dius"}, "edited": false, "score": 0, "creation_date": 1420827140, "post_id": 27866284, "comment_id": 44135729, "body": "Still don&#39;t quite get it. How do they differ from a capturing group then, for example: (ab){2} &quot;ab matches the characters ab literally (case sensitive)&quot; and (?:ab){2} &quot;ab matches the characters ab literally (case sensitive)&quot; - both match twice, because of the quantifier (tried on: <a href=\"https://regex101.com\" rel=\"nofollow noreferrer\">regex101.com</a>). Can you explain the difference?"}, {"owner": {"reputation": 658023, "user_id": 548225, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/dab08478b226280d4a30894c9a7ed719?s=128&d=identicon&r=PG", "display_name": "anubhava", "link": "https://stackoverflow.com/users/548225/anubhava"}, "edited": false, "score": 2, "creation_date": 1420827406, "post_id": 27866284, "comment_id": 44135855, "body": "Difference is that in <code>(ab){2}</code> regex you have captured group back-reference available as <code>$1</code> but in <code>(ab){2}</code> you cannot use <code>$1</code>"}, {"owner": {"reputation": 3262, "user_id": 1964707, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/at9Qr.jpg?s=128&g=1", "display_name": "Mindaugas Bernatavi\u010dius", "link": "https://stackoverflow.com/users/1964707/mindaugas-bernatavi%c4%8dius"}, "edited": false, "score": 0, "creation_date": 1420861100, "post_id": 27866284, "comment_id": 44147505, "body": "You wrote (ab){2} twice in the comment just above. [... ] One additional question: I have read this: <a href=\"http://stackoverflow.com/questions/21200514/regular-expression-matching-vs-capturing\" title=\"regular expression matching vs capturing\">stackoverflow.com/questions/21200514/&hellip;</a> ---&gt; but this is precissely why I thought that non-capturing group works like a look-around - I thought it matches the contents in (?: * ) but disregards them when returning. .. So, returns are available as variables and they are returned by captures, however the non-captures are still matches, just not available as variables because they are not returned?"}, {"owner": {"reputation": 658023, "user_id": 548225, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/dab08478b226280d4a30894c9a7ed719?s=128&d=identicon&r=PG", "display_name": "anubhava", "link": "https://stackoverflow.com/users/548225/anubhava"}, "edited": false, "score": 1, "creation_date": 1420861376, "post_id": 27866284, "comment_id": 44147551, "body": "Sorry I meant <code>(?:ab){2}</code> 2nd time in above comment. To answer your question no non-capturing group  doesn&#39;t discard the matches. It just doesn&#39;t keep it available in back-reference <code>$1</code>, <code>$2</code>, <code>$3</code> etc."}], "tags": [], "owner": {"reputation": 658023, "user_id": 548225, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/dab08478b226280d4a30894c9a7ed719?s=128&d=identicon&r=PG", "display_name": "anubhava", "link": "https://stackoverflow.com/users/548225/anubhava"}, "is_accepted": true, "score": 5, "last_activity_date": 1420825754, "creation_date": 1420825754, "answer_id": 27866284, "question_id": 27866240, "link": "https://stackoverflow.com/questions/27866240/perl-regex-non-capturing-group-seems-not-to-be-working/27866284#27866284", "title": "Perl REGEX: non-capturing group seems not to be working", "body": "<p>You should use:</p>\n\n<pre><code>perl -pe 's|(//).+?(/)|$1b$2|'\n</code></pre>\n\n<p>Non capturing group doesn't mean that input text won't be consumed. Non-capturing parentheses group the regex so you can apply regex operators, but do not capture anything.</p>\n\n<p>Or use <strong>lookarounds</strong> and avoid capturing groups:</p>\n\n<pre><code>echo \"$1\" | perl -pe 's|(?&lt;=://).+?(?=/)|b|'\nhttp://b/Testing/JS/displayName.js\n</code></pre>\n"}], "owner": {"reputation": 3262, "user_id": 1964707, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/at9Qr.jpg?s=128&g=1", "display_name": "Mindaugas Bernatavi\u010dius", "link": "https://stackoverflow.com/users/1964707/mindaugas-bernatavi%c4%8dius"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 930, "favorite_count": 0, "accepted_answer_id": 27866284, "answer_count": 1, "score": 2, "last_activity_date": 1420825832, "creation_date": 1420825580, "question_id": 27866240, "link": "https://stackoverflow.com/questions/27866240/perl-regex-non-capturing-group-seems-not-to-be-working", "title": "Perl REGEX: non-capturing group seems not to be working", "body": "<p>I have this bash statement with perl regex:</p>\n\n<pre><code>echo $1 | perl -pe 's|(?:://).+?(?:/)|b|'\n</code></pre>\n\n<p>prints this:</p>\n\n<pre><code>httpbTesting/JS/displayName.js\n</code></pre>\n\n<p>from this:</p>\n\n<pre><code>http://php2-mindaugasb.c9.io/Testing/JS/displayName.js\n</code></pre>\n\n<p>I was expecting:</p>\n\n<pre><code>http://b/Testing/JS/displayName.js\n</code></pre>\n\n<p>Maybe I don't understand something about the non-capturing groups? I thought they are supposed to match, but not capture (like a positive lookahead and look behind combined). Am I mistaken?</p>\n"}, {"tags": ["regex", "perl", "variables", "split", "delimiter"], "comments": [{"owner": {"reputation": 65435, "user_id": 2206004, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HCB1e.png?s=128&g=1", "display_name": "hwnd", "link": "https://stackoverflow.com/users/2206004/hwnd"}, "edited": false, "score": 2, "creation_date": 1420819285, "post_id": 27864393, "comment_id": 44131214, "body": "Works fine ... <a href=\"https://eval.in/240865\" rel=\"nofollow noreferrer\">eval.in/240865</a>"}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 4, "creation_date": 1420819497, "post_id": 27864393, "comment_id": 44131379, "body": "Any time you have a question about one of Perl&#39;s built-in functions, I highly recommend you check <code>perldoc</code>. If it&#39;s installed on your system, you can run <code>perldoc -f &lt;function&gt;</code>, or in this case, <a href=\"http://perldoc.perl.org/functions/split.html\" rel=\"nofollow noreferrer\"><code>perldoc -f split</code></a> (I linked to the online version for convenience). The documentation is excellent. Your uncertainty about <code>split</code> using regex vs. string is explained in detail, including the special case of <code>split &#39; &#39;</code>."}, {"owner": {"reputation": 81037, "user_id": 8454, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/2NlHs.png?s=128&g=1", "display_name": "Andy Lester", "link": "https://stackoverflow.com/users/8454/andy-lester"}, "edited": false, "score": 0, "creation_date": 1420819713, "post_id": 27864393, "comment_id": 44131530, "body": "<b>What does &quot;doesn&#39;t work&quot; mean?</b> &quot;Doesn&#39;t work&quot; is an inadequate description for us to understand the problem.  What happened when you tried it?  Did you get an error message?  Did you get incorrect results?  Did you get <i>no</i> results?  If the results were incorrect, what made them incorrect?  What were you expecting instead?  Did you get <i>any</i> correct results?  If so, what were they?  Don&#39;t make us guess."}, {"owner": {"reputation": 61610, "user_id": 725418, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/82ac2dc3e1ad4b7187f245c416528df9?s=128&d=identicon&r=PG", "display_name": "TLP", "link": "https://stackoverflow.com/users/725418/tlp"}, "edited": false, "score": 3, "creation_date": 1420819763, "post_id": 27864393, "comment_id": 44131578, "body": "Because <code>split &#39; &#39;</code> will use a literal space as delimiter, invoking the special case described in the perldoc. <code>$var = &#39; &#39;; split $var</code> will be equivalent of <code>split &#47; &#47;</code>, which is a regex split, not the same thing."}], "answers": [{"comments": [{"owner": {"reputation": 208, "user_id": 4437463, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-CzrHuWDZClU/AAAAAAAAAAI/AAAAAAAABIc/3mZxoA2AzHk/photo.jpg?sz=128", "display_name": "Ryan Foley", "link": "https://stackoverflow.com/users/4437463/ryan-foley"}, "edited": false, "score": 1, "creation_date": 1420823783, "post_id": 27864656, "comment_id": 44133983, "body": "Thank you! And way to understand my issue exactly :)"}], "tags": [], "owner": {"reputation": 61610, "user_id": 725418, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/82ac2dc3e1ad4b7187f245c416528df9?s=128&d=identicon&r=PG", "display_name": "TLP", "link": "https://stackoverflow.com/users/725418/tlp"}, "is_accepted": true, "score": 7, "last_activity_date": 1420820209, "last_edit_date": 1420820209, "creation_date": 1420819855, "answer_id": 27864656, "question_id": 27864393, "link": "https://stackoverflow.com/questions/27864393/perl-split-a-string-using-a-string-based-delimiter/27864656#27864656", "title": "Perl split a string using a string based delimiter", "body": "<h2>Explanation</h2>\n\n<p>When you split on a literal space</p>\n\n<pre><code>split ' '\n</code></pre>\n\n<p>You invoke the special case, described in <a href=\"http://perldoc.perl.org/functions/split.html\" rel=\"noreferrer\">the documentation</a>. When you use a variable</p>\n\n<pre><code>my $var = ' ';\nsplit $var;\n</code></pre>\n\n<p>It is the same as putting that variable inside a regex:</p>\n\n<pre><code>split /$var/;\n</code></pre>\n\n<p>This will split on single whitespace, not the same thing. If for example you have this code:</p>\n\n<pre><code>my $string = \"foo bar   baz\";\nmy @literal = split ' ', $string;\nmy @space = split / /, $string;\n</code></pre>\n\n<p>Then <code>@literal</code> will contain <code>\"foo\", \"bar\", \"baz\"</code>, and <code>@space</code> will contain <code>\"foo\", \"bar\", \"\", \"\", \"baz\"</code> -- empty fields where it has split on the single spaces.</p>\n\n<hr>\n\n<h2>Documentation</h2>\n\n<p>This is how the documentation describes it:</p>\n\n<blockquote>\n  <p>As another special case, split emulates the default behavior of the command line tool awk when the PATTERN is either omitted or a literal string composed of a single space character (such as ' ' or \"\\x20\" , but not e.g. / / ). In this case, any leading whitespace in EXPR is removed before splitting occurs, and the PATTERN is instead treated as if it were /\\s+/ ; in particular, this means that any contiguous whitespace (not just a single space character) is used as a separator. However, this special treatment can be avoided by specifying the pattern / / instead of the string \" \" , thereby allowing only a single space character to be a separator. In earlier Perls this special case was restricted to the use of a plain \" \" as the pattern argument to split, in Perl 5.18.0 and later this special case is triggered by any expression which evaluates as the simple string \" \" .</p>\n</blockquote>\n\n<h2>Workaround</h2>\n\n<p>Note that if you are looking for a way to dynamically emulate the <code>' '</code> splitting by using a variable, you might use <code>/\\s+/</code> instead. It is not quite the same, in that it will not strip leading whitespace, but otherwise should work as expected.</p>\n"}, {"tags": [], "owner": {"reputation": 111, "user_id": 2372935, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e993ed2b8a435b48aeca7fc223bcab8?s=128&d=identicon&r=PG", "display_name": "Walter A. Aprile", "link": "https://stackoverflow.com/users/2372935/walter-a-aprile"}, "is_accepted": false, "score": 0, "last_activity_date": 1421078100, "creation_date": 1421078100, "answer_id": 27905908, "question_id": 27864393, "link": "https://stackoverflow.com/questions/27864393/perl-split-a-string-using-a-string-based-delimiter/27905908#27905908", "title": "Perl split a string using a string based delimiter", "body": "<p>your code works fine, I think</p>\n\n<pre><code>my $text = \"botolo\";\nmy $separator = \"o\";\nprint +(split($separator, $text))[0];  \n#uglyness with + necessary because Perl\n</code></pre>\n\n<p>Although, at the cost of one extra line, I would rather write that last line as:</p>\n\n<pre><code>my @parts = split($separator, $text);\nprint $parts[0];\n</code></pre>\n"}], "owner": {"reputation": 208, "user_id": 4437463, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-CzrHuWDZClU/AAAAAAAAAAI/AAAAAAAABIc/3mZxoA2AzHk/photo.jpg?sz=128", "display_name": "Ryan Foley", "link": "https://stackoverflow.com/users/4437463/ryan-foley"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 7717, "favorite_count": 0, "accepted_answer_id": 27864656, "answer_count": 2, "score": 0, "last_activity_date": 1421078100, "creation_date": 1420819022, "last_edit_date": 1420823892, "question_id": 27864393, "link": "https://stackoverflow.com/questions/27864393/perl-split-a-string-using-a-string-based-delimiter", "title": "Perl split a string using a string based delimiter", "body": "<p>I'm brand new to Perl, but based on the documentation that I have read, it looks like the split function in Perl asks for a regex pattern rather than a string delimiter as the first parameter, but I found that using something like <code>print +(split(' ', $string))[0]</code> will still split the string correctly.</p>\n\n<p>Based on that, I was trying to use a variable delimiter (ex. <code>print +(split($var, $string))[0]</code> where <code>$var = ' '</code>) and found that it did not work. What am I doing wrong?</p>\n\n<p>Thanks!</p>\n\n<p>EDIT:\nSorry for the terrible question. I was running this against a string with leading spaces and found that the split function didn't like the leading spaces. For example:</p>\n\n<p><code>my $var = ' ';\nprint +(split($var, '    abc ddddd'))[0]</code>\ngives a blank output. Is $var being interpreted as <code>/$var/</code> inside the split function?</p>\n\n<p>versus</p>\n\n<p><code>print +(split(' ', '    abc ddddd'))[0]</code>\nwhich gives an output of <code>abc</code></p>\n\n<p>So when I read the docs I was assuming my variable would be considered a literal string, when in reality it was not, and therefore the leading whitespace was not stripped.</p>\n"}, {"tags": ["perl", "hash", "scalar"], "answers": [{"comments": [{"owner": {"reputation": 179, "user_id": 3189985, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/ab41adec68de3485636a7cf1e857654a?s=128&d=identicon&r=PG&f=1", "display_name": "user3189985", "link": "https://stackoverflow.com/users/3189985/user3189985"}, "edited": false, "score": 0, "creation_date": 1420819169, "post_id": 27864383, "comment_id": 44131139, "body": "why? it&#39;s declared with my. It&#39;s supposed to be local. no?"}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 4, "creation_date": 1420819175, "post_id": 27864383, "comment_id": 44131148, "body": "Might help to explain that <code>my $hash = $_[0];</code> and <code>print &quot;$hash{&#39;red&#39;}\\n&quot;;</code> are not referring to the same variable."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1420819360, "post_id": 27864383, "comment_id": 44131277, "body": "<code>my $x = &#39;...&#39;; if (...) { print $x }</code> works, therefore so does <code>my $x = &#39;...&#39;; sub foo { print $x }</code>."}, {"owner": {"reputation": 478, "user_id": 3261294, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e04c85709847a658e1699565b21a363?s=128&d=identicon&r=PG&f=1", "display_name": "BarneySchmale", "link": "https://stackoverflow.com/users/3261294/barneyschmale"}, "edited": false, "score": 0, "creation_date": 1420891320, "post_id": 27864383, "comment_id": 44153402, "body": "Yes my %hash;   is local. But in this case local means the line where %hash is declared until the end of the file."}], "tags": [], "owner": {"reputation": 36918, "user_id": 327563, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/c2e0619983f017acfd1832bb903a343f?s=128&d=identicon&r=PG", "display_name": "Konerak", "link": "https://stackoverflow.com/users/327563/konerak"}, "is_accepted": false, "score": 2, "last_activity_date": 1420818973, "creation_date": 1420818973, "answer_id": 27864383, "question_id": 27864350, "link": "https://stackoverflow.com/questions/27864350/perl-how-is-it-possible-that-this-code-is-working/27864383#27864383", "title": "Perl: How is it possible that this code is working?", "body": "<p>Because the scope of your <code>%hash</code> is the entire program.</p>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 12, "last_activity_date": 1420819230, "creation_date": 1420819230, "answer_id": 27864468, "question_id": 27864350, "link": "https://stackoverflow.com/questions/27864350/perl-how-is-it-possible-that-this-code-is-working/27864468#27864468", "title": "Perl: How is it possible that this code is working?", "body": "<pre><code>func(%hash);\n</code></pre>\n\n<p>is equivalent to</p>\n\n<pre><code>func('red', 'John', 'blue', 'Smith'); \n   -or-\nfunc('blue', 'Smith', 'red', 'John'); \n</code></pre>\n\n<p>so</p>\n\n<pre><code>my $hash = $_[0];\n</code></pre>\n\n<p>is equivalent to</p>\n\n<pre><code>my $hash = 'red';\n   -or-\nmy $hash = 'blue';\n</code></pre>\n\n<p>Totally useless. Good thing you never use <code>$hash</code> ever again.</p>\n\n<hr>\n\n<p>Instead, you use the <code>%hash</code> declared outside the sub. You can see this by reordering your code or by limiting the scope (visibility) of <code>%hash</code>.</p>\n\n<pre><code>use strict;\nuse warnings;\n\n{\n    my %hash = ('red' =&gt; \"John\", 'blue' =&gt; \"Smith\"); \n    func(%hash);  \n}\n\nsub func {\n    my $hash = $_[0];\n    print \"$hash{'red'}\\n\";\n    print \"$hash{'blue'}\\n\";\n}\n</code></pre>\n\n<p>&#x20;</p>\n\n<pre><code>$ perl a.pl\nGlobal symbol \"%hash\" requires explicit package name at a.pl line 11.\nGlobal symbol \"%hash\" requires explicit package name at a.pl line 12.\nExecution of a.pl aborted due to compilation errors.\n</code></pre>\n\n<hr>\n\n<p>The solution is to pass a reference.</p>\n\n<pre><code>use strict;\nuse warnings;\n\n{\n    my %hash = ('red' =&gt; \"John\", 'blue' =&gt; \"Smith\"); \n    func(\\%hash);\n}\n\nsub func {\n    my $hash = $_[0];\n    print \"$hash-&gt;{'red'}\\n\";\n    print \"$hash-&gt;{'blue'}\\n\";\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 41846, "user_id": 926143, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/3396173c3d22988be1a0732d184902aa?s=128&d=identicon&r=PG", "display_name": "7stud", "link": "https://stackoverflow.com/users/926143/7stud"}, "is_accepted": false, "score": 0, "last_activity_date": 1420888569, "last_edit_date": 1420888569, "creation_date": 1420887132, "answer_id": 27875378, "question_id": 27864350, "link": "https://stackoverflow.com/questions/27864350/perl-how-is-it-possible-that-this-code-is-working/27875378#27875378", "title": "Perl: How is it possible that this code is working?", "body": "<blockquote>\n  <p>%hash is supposed to be local. no?</p>\n</blockquote>\n\n<p>It's local to the enclosing scope. Scopes are delimited by braces. But there are no braces anywhere surrounding your declaration:</p>\n\n<pre><code>my %hash;\n</code></pre>\n\n<p>As a result, <code>%hash</code> is visible inside every nested scope in the file. Here is an example:</p>\n\n<pre><code>use strict;\nuse warnings;\nuse 5.016;\n\nmy $str = \"hello\";\n\nif (1) { #new scope starts here\n    say \"if: $str\";\n} #scope ends here\n\n{ #new scope starts here\n\n    my $planet = \"world\";\n    say \"block: $str\";\n\n    for (1..2) { #new scope starts here\n        say \"for: $str $planet\";\n    } #scope ends here\n\n} #scope ends here\n\n#say $planet;  #The $planet that was previously declared isn't visible here, so this looks\n               #like  you are trying to print a global variable, which results in a\n               #compile error, because global variables are illegal with: use strict;\n\n\n--output:--\nif: hello\nblock: hello\nfor: hello world\nfor: hello world\n</code></pre>\n"}], "owner": {"reputation": 179, "user_id": 3189985, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/ab41adec68de3485636a7cf1e857654a?s=128&d=identicon&r=PG&f=1", "display_name": "user3189985", "link": "https://stackoverflow.com/users/3189985/user3189985"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 94, "favorite_count": 0, "accepted_answer_id": 27864468, "answer_count": 3, "score": 3, "last_activity_date": 1420888569, "creation_date": 1420818850, "question_id": 27864350, "link": "https://stackoverflow.com/questions/27864350/perl-how-is-it-possible-that-this-code-is-working", "title": "Perl: How is it possible that this code is working?", "body": "<pre><code>my %hash = ('red' =&gt; \"John\", 'blue' =&gt; \"Smith\"); \nfunc (%hash);  \n\nsub func {\n    my $hash = $_[0];\n    print \"$hash{'red'}\\n\";\n    print \"$hash{'blue'}\\n\";\n}\n</code></pre>\n\n<p>I send a hash to a subroutine, and this hash is treated as scalar. If so, how is it possible that I can turn to a value in the hash by calling its key? </p>\n"}, {"tags": ["regex", "string", "perl", "single-quotes"], "comments": [{"owner": {"reputation": 658023, "user_id": 548225, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/dab08478b226280d4a30894c9a7ed719?s=128&d=identicon&r=PG", "display_name": "anubhava", "link": "https://stackoverflow.com/users/548225/anubhava"}, "edited": false, "score": 0, "creation_date": 1420813855, "post_id": 27862770, "comment_id": 44127578, "body": "What about this string: <code>&quot;abc &#39;foo bar&#39; another&#39; baz&quot;</code>"}, {"owner": {"reputation": 11722, "user_id": 1981275, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/f3e2752d5fbb3693863943132ffa39f6?s=128&d=identicon&r=PG", "display_name": "user1981275", "link": "https://stackoverflow.com/users/1981275/user1981275"}, "reply_to_user": {"reputation": 658023, "user_id": 548225, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/dab08478b226280d4a30894c9a7ed719?s=128&d=identicon&r=PG", "display_name": "anubhava", "link": "https://stackoverflow.com/users/548225/anubhava"}, "edited": false, "score": 0, "creation_date": 1420813917, "post_id": 27862770, "comment_id": 44127628, "body": "No quote should be removed from that."}, {"owner": {"reputation": 658023, "user_id": 548225, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/dab08478b226280d4a30894c9a7ed719?s=128&d=identicon&r=PG", "display_name": "anubhava", "link": "https://stackoverflow.com/users/548225/anubhava"}, "edited": false, "score": 0, "creation_date": 1420814188, "post_id": 27862770, "comment_id": 44127798, "body": "But there are 3 single quotes in that string"}, {"owner": {"reputation": 61610, "user_id": 725418, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/82ac2dc3e1ad4b7187f245c416528df9?s=128&d=identicon&r=PG", "display_name": "TLP", "link": "https://stackoverflow.com/users/725418/tlp"}, "edited": false, "score": 3, "creation_date": 1420814256, "post_id": 27862770, "comment_id": 44127838, "body": "I think you should add more test cases to account for edge cases."}, {"owner": {"reputation": 4551, "user_id": 3790360, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/ef9805061faba2c8d3d95a1929702294?s=128&d=identicon&r=PG&f=1", "display_name": "Andie2302", "link": "https://stackoverflow.com/users/3790360/andie2302"}, "edited": false, "score": 0, "creation_date": 1420815314, "post_id": 27862770, "comment_id": 44128577, "body": "What about: ($result = $text) =~ s/[&#39;]//mg;"}, {"owner": {"reputation": 15560, "user_id": 709439, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/19b5c7e6c2772d88adcbd928daddc170?s=128&d=identicon&r=PG", "display_name": "MarcoS", "link": "https://stackoverflow.com/users/709439/marcos"}, "edited": false, "score": 0, "creation_date": 1420815513, "post_id": 27862770, "comment_id": 44128710, "body": "How this text should be treated: &quot;&#39;text is single quoted with a &#39; quote in the middle&#39;&quot; ?"}], "answers": [{"tags": [], "owner": {"reputation": 159902, "user_id": 3297613, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/KHhzd.jpg?s=128&g=1", "display_name": "Avinash Raj", "link": "https://stackoverflow.com/users/3297613/avinash-raj"}, "is_accepted": true, "score": 4, "last_activity_date": 1420814626, "last_edit_date": 1420814626, "creation_date": 1420814003, "answer_id": 27862857, "question_id": 27862770, "link": "https://stackoverflow.com/questions/27862770/perl-regex-remove-quotes-from-string/27862857#27862857", "title": "perl regex remove quotes from string", "body": "<p>You could use <a href=\"http://www.regular-expressions.info/refcapture.html\" rel=\"nofollow\">capturing group</a>.</p>\n\n<pre><code>s/^'(.*)'$/$1/\n</code></pre>\n\n<p><code>^</code> asserts that we are at the start and <code>$</code> asserts that we are at the end of a line. <code>.*</code> greedily matches any character zero or more times.</p>\n\n<p>Code:</p>\n\n<pre><code>use strict;\nuse warnings;\n\nmy @names = (\"'text is single quoted'\", \"text is 'partly single quoted'\");\ns/^'(.*)'$/$1/ for @names;\n\nprint $names[0], \"\\n\", $names[1], \"\\n\";\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>text is single quoted\ntext is 'partly single quoted'\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 15560, "user_id": 709439, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/19b5c7e6c2772d88adcbd928daddc170?s=128&d=identicon&r=PG", "display_name": "MarcoS", "link": "https://stackoverflow.com/users/709439/marcos"}, "reply_to_user": {"reputation": 82895, "user_id": 372239, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/2twLb.jpg?s=128&g=1", "display_name": "Toto", "link": "https://stackoverflow.com/users/372239/toto"}, "edited": false, "score": 0, "creation_date": 1420814299, "post_id": 27862862, "comment_id": 44127879, "body": "It&#39;s exaclty what was asked for by OP... :-)"}, {"owner": {"reputation": 82895, "user_id": 372239, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/2twLb.jpg?s=128&g=1", "display_name": "Toto", "link": "https://stackoverflow.com/users/372239/toto"}, "edited": false, "score": 0, "creation_date": 1420814393, "post_id": 27862862, "comment_id": 44127948, "body": "Where have you seen that?"}, {"owner": {"reputation": 15560, "user_id": 709439, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/19b5c7e6c2772d88adcbd928daddc170?s=128&d=identicon&r=PG", "display_name": "MarcoS", "link": "https://stackoverflow.com/users/709439/marcos"}, "reply_to_user": {"reputation": 82895, "user_id": 372239, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/2twLb.jpg?s=128&g=1", "display_name": "Toto", "link": "https://stackoverflow.com/users/372239/toto"}, "edited": false, "score": 2, "creation_date": 1420815601, "post_id": 27862862, "comment_id": 44128782, "body": "@JE SUIS CHARLIE: yes, you could be right, OP does not specify behaviour for quoted text with a quoute in the middle, too... :-("}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1420817315, "post_id": 27862862, "comment_id": 44129895, "body": "The whole question is very badly posed. This is just as valid as the accepted answer with the given information."}], "tags": [], "owner": {"reputation": 15560, "user_id": 709439, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/19b5c7e6c2772d88adcbd928daddc170?s=128&d=identicon&r=PG", "display_name": "MarcoS", "link": "https://stackoverflow.com/users/709439/marcos"}, "is_accepted": false, "score": 1, "last_activity_date": 1420815194, "last_edit_date": 1420815194, "creation_date": 1420814016, "answer_id": 27862862, "question_id": 27862770, "link": "https://stackoverflow.com/questions/27862770/perl-regex-remove-quotes-from-string/27862862#27862862", "title": "perl regex remove quotes from string", "body": "<p>Did you try this regexp?</p>\n\n<pre><code>/^'([^']*)'$/$1/\n</code></pre>\n\n<p>The rationale is: \"substitute a any string starting and ending with a single quote, and that does not contain a single quote, with the string itself (starting and ending quotes excluded)\"...</p>\n\n<p>You can test it here: <a href=\"https://regex101.com/r/uL2rT8/1\" rel=\"nofollow\">regex101.com</a></p>\n\n<p>Full code should be:</p>\n\n<pre><code>my @names = (\"'text is single quoted'\", \"text is 'partly single quoted'\");\ns/^'([^']*)'$/$1/ for @names;\n\nprint join \"\\n\", @names;\n</code></pre>\n\n<p>Which outputs:</p>\n\n<pre><code>$ perl test.pl\ntext is single quoted\ntext is 'partly single quoted'\n</code></pre>\n"}], "owner": {"reputation": 11722, "user_id": 1981275, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/f3e2752d5fbb3693863943132ffa39f6?s=128&d=identicon&r=PG", "display_name": "user1981275", "link": "https://stackoverflow.com/users/1981275/user1981275"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4026, "favorite_count": 0, "accepted_answer_id": 27862857, "answer_count": 2, "score": 0, "last_activity_date": 1420815194, "creation_date": 1420813768, "last_edit_date": 1420814812, "question_id": 27862770, "link": "https://stackoverflow.com/questions/27862770/perl-regex-remove-quotes-from-string", "title": "perl regex remove quotes from string", "body": "<p>I would like to remove trailing and leading single quotes from a string, but not if a quote starts in the middle of the string.</p>\n\n<p>Example: I would like to remove the quotes from <code>'text is single quoted'</code> but not from <code>text is 'partly single quoted'</code>.\nExample 2: In <code>abc 'foo bar' another' baz</code>, no quote should be removed because the one on the beginning of the string is missing.</p>\n\n<p>Here my code:</p>\n\n<pre><code>use strict;\nuse warnings;\n\nmy @names = (\"'text is single quoted'\", \"text is 'partly single quoted'\");\nmap {$_=~ s/^'|'$//g} @names;\nprint $names[0] . \"\\n\" . $names[1] . \"\\n\";\n</code></pre>\n\n<p>The or (<code>|</code>) in the regex <code>^'|'$</code> obviously also removes the second quote from the second string, which is not desired. \nI thought <code>^''$</code> would mean that it only matches if the first <strong>and</strong> the last character is a single quote, but this won't remove any single quote rom neither string.  </p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 2304, "user_id": 1306503, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/70b51811841e652627e6bae333d72d97?s=128&d=identicon&r=PG", "display_name": "Nemesis", "link": "https://stackoverflow.com/users/1306503/nemesis"}, "edited": false, "score": 1, "creation_date": 1420812847, "post_id": 27862371, "comment_id": 44126959, "body": "You are using <code>&gt;&gt;</code> for opening <code>file2</code>. Thus, you will append your output to <b>the end</b> of <code>file2</code>. Therefore, one way would be: open <code>file3</code>. Copy everything from <code>file2</code> until <code>yyy...</code>. Then use your <code>while</code> statement and then copy the rest of <code>file2</code> to <code>file3</code>."}, {"owner": {"reputation": 61610, "user_id": 725418, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/82ac2dc3e1ad4b7187f245c416528df9?s=128&d=identicon&r=PG", "display_name": "TLP", "link": "https://stackoverflow.com/users/725418/tlp"}, "edited": false, "score": 1, "creation_date": 1420813798, "post_id": 27862371, "comment_id": 44127551, "body": "The use of <code>use vars</code> is discouraged. You should use <code>my</code> to declare variables here, and not use global, but declare the variables in the smallest scope possible, preferably right where they are used. E.g. <code>while (my $filecontent = &lt;FILE1&gt;)</code>."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1420817371, "post_id": 27862371, "comment_id": 44129940, "body": "How big are your files?"}], "answers": [{"comments": [{"owner": {"reputation": 61610, "user_id": 725418, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/82ac2dc3e1ad4b7187f245c416528df9?s=128&d=identicon&r=PG", "display_name": "TLP", "link": "https://stackoverflow.com/users/725418/tlp"}, "edited": false, "score": 1, "creation_date": 1420814115, "post_id": 27862570, "comment_id": 44127740, "body": "Simple and robust +1. You might want to include file name and error in the <code>die</code> messages, e.g. <code>die &quot;couldn&#39;t open $file1: $!&quot;</code>. Using lexical file handles is also recommended, e.g. <code>my $file1</code> instead of <code>FILE1</code>. Also, <code>File::Copy::move()</code> is sometimes recommended over the built-in <code>rename</code>."}, {"owner": {"reputation": 35069, "user_id": 1324, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/883238a436c061eaf848af87b8fda561?s=128&d=identicon&r=PG", "display_name": "Paul Roub", "link": "https://stackoverflow.com/users/1324/paul-roub"}, "reply_to_user": {"reputation": 61610, "user_id": 725418, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/82ac2dc3e1ad4b7187f245c416528df9?s=128&d=identicon&r=PG", "display_name": "TLP", "link": "https://stackoverflow.com/users/725418/tlp"}, "edited": false, "score": 1, "creation_date": 1420814274, "post_id": 27862570, "comment_id": 44127857, "body": "All good points - just didn&#39;t want to deviate farther from the original code than necessary, to give the OP fewer changes to digest. While <code>File::Copy::move()</code> is more flexible, in this simple case we need <i>exactly</i> the one thing that <code>rename()</code> does, with no additional package imports required."}, {"owner": {"reputation": 61610, "user_id": 725418, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/82ac2dc3e1ad4b7187f245c416528df9?s=128&d=identicon&r=PG", "display_name": "TLP", "link": "https://stackoverflow.com/users/725418/tlp"}, "edited": false, "score": 0, "creation_date": 1420814419, "post_id": 27862570, "comment_id": 44127970, "body": "I think using correct code is essential, since this is a learning environment. Lead by example, and all that."}, {"owner": {"reputation": 1100, "user_id": 1970427, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/18f92f7a3437a93370c95724e63ffa34?s=128&d=identicon&r=PG", "display_name": "Emman", "link": "https://stackoverflow.com/users/1970427/emman"}, "reply_to_user": {"reputation": 61610, "user_id": 725418, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/82ac2dc3e1ad4b7187f245c416528df9?s=128&d=identicon&r=PG", "display_name": "TLP", "link": "https://stackoverflow.com/users/725418/tlp"}, "edited": false, "score": 0, "creation_date": 1420814761, "post_id": 27862570, "comment_id": 44128183, "body": "@TLP good catch about $file1 during die message, when I try File::Copy::move() resulted in use of uninitialized value in..perl-5.8.3/lib/5.8.3/File/Copy.pm line 184. That&#39;s were moved to a more simple method."}, {"owner": {"reputation": 61610, "user_id": 725418, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/82ac2dc3e1ad4b7187f245c416528df9?s=128&d=identicon&r=PG", "display_name": "TLP", "link": "https://stackoverflow.com/users/725418/tlp"}, "reply_to_user": {"reputation": 1100, "user_id": 1970427, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/18f92f7a3437a93370c95724e63ffa34?s=128&d=identicon&r=PG", "display_name": "Emman", "link": "https://stackoverflow.com/users/1970427/emman"}, "edited": false, "score": 0, "creation_date": 1420815179, "post_id": 27862570, "comment_id": 44128469, "body": "@vjemmaN You cut out the crucial part of the error message. Line 184 in <code>File&#47;Copy.pm</code> is <code>close($to_h) || goto fail_open2 if $closeto;</code> and the only thing there that can get the uninitialized warning is <code>close</code>, and it is unlikely that it is that."}, {"owner": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "reply_to_user": {"reputation": 61610, "user_id": 725418, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/82ac2dc3e1ad4b7187f245c416528df9?s=128&d=identicon&r=PG", "display_name": "TLP", "link": "https://stackoverflow.com/users/725418/tlp"}, "edited": false, "score": 0, "creation_date": 1420820680, "post_id": 27862570, "comment_id": 44132182, "body": "@TLP is there a reason to avoid rename() when operating inside same directory?"}, {"owner": {"reputation": 61610, "user_id": 725418, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/82ac2dc3e1ad4b7187f245c416528df9?s=128&d=identicon&r=PG", "display_name": "TLP", "link": "https://stackoverflow.com/users/725418/tlp"}, "reply_to_user": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "edited": false, "score": 0, "creation_date": 1420829113, "post_id": 27862570, "comment_id": 44136729, "body": "@\u0421\u0443\u0445\u043e\u043927 In perldoc -f rename is the information I have."}], "tags": [], "owner": {"reputation": 35069, "user_id": 1324, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/883238a436c061eaf848af87b8fda561?s=128&d=identicon&r=PG", "display_name": "Paul Roub", "link": "https://stackoverflow.com/users/1324/paul-roub"}, "is_accepted": true, "score": 5, "last_activity_date": 1420813917, "last_edit_date": 1420813917, "creation_date": 1420813134, "answer_id": 27862570, "question_id": 27862371, "link": "https://stackoverflow.com/questions/27862371/copy-selected-lines-from-one-file-and-insert-those-lines-in-another-file-after-s/27862570#27862570", "title": "Copy selected lines from one file and insert those lines in another file after selected line", "body": "<p>I'd use a temp file. </p>\n\n<ol>\n<li>Read and print all lines (to temp) from FILE2 until you hit \"yyy\"</li>\n<li>Read and print all \"def\" lines (to temp) from FILE1</li>\n<li>Read and print (to temp) the rest of FILE2</li>\n<li>Rename the temp file to FILE2</li>\n</ol>\n\n<pre class=\"lang-perl prettyprint-override\"><code>use strict; \nuse warnings;\n\nmy $file1 = \"file1.txt\";\nmy $file2 = \"file2.txt\";\nmy $file3 = \"file3.txt\";\n\nopen(FILE1, '&lt;', $file1) or die \"couldn't open the file!\";\nopen(FILE2, '&lt;', $file2) or die \"couldn't open the file!\";\nopen(FILE3, '&gt;', $file3) or die \"couldn't open temp file\";\n\nwhile (&lt;FILE2&gt;) {\n  print FILE3;\n  if (/^yyy/) {\n    last;\n  }\n}\n\nwhile (&lt;FILE1&gt;) {\n  if (/^def/) {\n    print FILE3;\n  }\n}\n\nwhile (&lt;FILE2&gt;) {\n  print FILE3;\n}\n\nclose (FILE1); \nclose (FILE2);\nclose (FILE3);\n\nrename($file3, $file2) or die \"unable to rename temp file\";\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 2, "last_activity_date": 1420818518, "creation_date": 1420818518, "answer_id": 27864250, "question_id": 27862371, "link": "https://stackoverflow.com/questions/27862371/copy-selected-lines-from-one-file-and-insert-those-lines-in-another-file-after-s/27864250#27864250", "title": "Copy selected lines from one file and insert those lines in another file after selected line", "body": "<p>The simplest way to do this is with the <a href=\"https://metacpan.org/module/Tie::File\" rel=\"nofollow\"><code>Tie::File</code></a> module, that lets you access a file as a simple array of strings.</p>\n\n<p>I have also used <code>first_index</code> from <a href=\"https://metacpan.org/module/List::MoreUtils\" rel=\"nofollow\"><code>List::MoreUtils</code></a> to find where to insert the records.</p>\n\n<pre><code>use strict;\nuse warnings;\n\nuse Tie::File;\nuse List::MoreUtils qw/ first_index /;\n\ntie my @file1, 'Tie::File', 'file1.txt' or die $!;\ntie my @file2, 'Tie::File', 'file2.txt' or die $!;\n\nmy $insert = first_index { /^yyy/ } @file2;\n\nfor (@file1) {\n  if ( /^def/ ) {\n    splice @file2, ++$insert, 0, $_;\n  }\n}\n</code></pre>\n\n<p><strong>output</strong> (file2.txt)</p>\n\n<pre><code>xxx..\nyyy..\ndef.. \ndef..\nzzz..\n</code></pre>\n\n<p>Your test data doesn't cover it, but the records from <code>file1.txt</code> are inserted into <code>file2.txt</code> in the order that they appear.</p>\n"}, {"tags": [], "owner": {"reputation": 2007, "user_id": 721703, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8c6fa8064d5f47dacc1a4be0786bfaff?s=128&d=identicon&r=PG&f=1", "display_name": "ingydotnet", "link": "https://stackoverflow.com/users/721703/ingydotnet"}, "is_accepted": false, "score": 2, "last_activity_date": 1420859677, "last_edit_date": 1420859677, "creation_date": 1420828066, "answer_id": 27866886, "question_id": 27862371, "link": "https://stackoverflow.com/questions/27862371/copy-selected-lines-from-one-file-and-insert-those-lines-in-another-file-after-s/27866886#27866886", "title": "Copy selected lines from one file and insert those lines in another file after selected line", "body": "<p>You might want to try the <a href=\"https://metacpan.org/pod/IO::All\" rel=\"nofollow\"><code>IO::All</code></a> module:</p>\n\n<pre><code>use IO::All;\nmy ($f1, $f2, $i) = (io('file1.txt'), io('file2.txt'), 1);\nfor (@$f2) {\n    splice(@$f2, $i, 0, grep /^def/, @$f1), last\n        if /^yyy/;\n    $i++;\n}\n</code></pre>\n"}], "owner": {"reputation": 1100, "user_id": 1970427, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/18f92f7a3437a93370c95724e63ffa34?s=128&d=identicon&r=PG", "display_name": "Emman", "link": "https://stackoverflow.com/users/1970427/emman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 7403, "favorite_count": 2, "accepted_answer_id": 27862570, "answer_count": 3, "score": 3, "last_activity_date": 1420859677, "creation_date": 1420812493, "last_edit_date": 1420812716, "question_id": 27862371, "link": "https://stackoverflow.com/questions/27862371/copy-selected-lines-from-one-file-and-insert-those-lines-in-another-file-after-s", "title": "Copy selected lines from one file and insert those lines in another file after selected line", "body": "<p>Here is my question let's say I have a file\n<code>file1.txt</code> with contents:</p>\n\n<pre><code>abc.. \ndef.. \nghi.. \ndef..\n</code></pre>\n\n<p>and second file <code>file2.txt</code> with contents:</p>\n\n<pre><code>xxx..\nyyy..\nzzz..\n</code></pre>\n\n<p>Now I want to copy all the line starting with \"def\" in <code>file1.txt</code> to <code>file2.txt</code> and append after \"yyy...\" line in <code>file2.txt</code></p>\n\n<h3>Expected Output:</h3>\n\n<pre><code>xxx...\nyyy...\ndef...\ndef...\nzzz...\n</code></pre>\n\n<p>I am pretty much new to perl, I've tried writing simple code for this but end up with output only appending at the end of file</p>\n\n<pre><code>#!/usr/local/bin/perl -w \nuse strict; \nuse warnings;\nuse vars qw($filecontent $total);\nmy $file1 = \"file1.txt\";\nopen(FILE1, $file1) || die \"couldn't open the file!\";\nopen(FILE2, '&gt;&gt;file2.txt') || die \"couldn't open the file!\";\n  while($filecontent = &lt;FILE1&gt;){\n    if ( $filecontent =~ /def/ ) {\n      chomp($filecontent);\n       print FILE2 $filecontent .\"\\n\";\n      #print FILE2 $filecontent .\"\\n\" if $filecontent =~/yyy/;\n    }  \n  } \n close (FILE1); \n close (FILE2);\n</code></pre>\n\n<p>output of the perl program is</p>\n\n<pre><code>xxx...\nyyy...\nzzz...\ndef...\ndef...\n</code></pre>\n"}, {"tags": ["sql-server", "perl", "race-condition"], "comments": [{"owner": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "edited": false, "score": 0, "creation_date": 1420813748, "post_id": 27862315, "comment_id": 44127517, "body": "<a href=\"http://stackoverflow.com/a/27434074/223226\">stackoverflow.com/a/27434074/223226</a>"}, {"owner": {"reputation": 3156, "user_id": 475861, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/Kxwvd.jpg?s=128&g=1", "display_name": "yosh", "link": "https://stackoverflow.com/users/475861/yosh"}, "reply_to_user": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "edited": false, "score": 0, "creation_date": 1420815073, "post_id": 27862315, "comment_id": 44128400, "body": "@\u0421\u0443\u0445\u043e\u043927 That&#39;s actually pretty easy solution. I was aiming for something that wouldn&#39;t prevent 2nd instance from starting if the 1st instance takes longer than 60 seconds, but this might be enough. Thanks."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 2, "creation_date": 1420816009, "post_id": 27862315, "comment_id": 44129028, "body": "Can always <code>flock</code> a lockfile, and compare mtimes."}, {"owner": {"reputation": 51391, "user_id": 132382, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/20fc7ee8f405aa42e36eb73e841e5a36?s=128&d=identicon&r=PG", "display_name": "pilcrow", "link": "https://stackoverflow.com/users/132382/pilcrow"}, "edited": false, "score": 0, "creation_date": 1420905199, "post_id": 27862315, "comment_id": 44157629, "body": "possible duplicate of <a href=\"http://stackoverflow.com/questions/27433252/how-to-prevent-a-perl-script-from-running-more-than-once-in-parallel\">How to prevent a Perl script from running more than once in parallel</a>"}], "answers": [{"tags": [], "owner": {"reputation": 99, "user_id": 4903019, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153314053313428/picture?type=large", "display_name": "Tim Cutts", "link": "https://stackoverflow.com/users/4903019/tim-cutts"}, "is_accepted": false, "score": 0, "last_activity_date": 1431682272, "creation_date": 1431682272, "answer_id": 30256043, "question_id": 27862315, "link": "https://stackoverflow.com/questions/27862315/perl-sql-and-file-create-race-condition/30256043#30256043", "title": "Perl SQL and file create race condition", "body": "<p>You need to make the code which returns the next available filename from the database atomic in the database, so that the database can't return the same filename twice.  This is really a database problem rather than a perl problem, per se.</p>\n\n<p>You don't say which database you're using, but there are several ways to do it.\nA naive and brutish way to do it in MySQL is for the perl script to perform a LOCK TABLE table WRITE on the table with the filenames while it calculates a new one and does its work.  Once the table is updated with the new filename, you can release the lock.  TABLE LOCKS don't play nicely with transactions though.</p>\n\n<p>Or you could do something rather more elegant, like implement a stored procedure with appropriate locking within the database itself to return the new filename.</p>\n\n<p>Or use an AUTOINCREMENT column, so that each time you add something to the table you get a new number (and hence a new filename).</p>\n\n<p>This can all get quite complicated though; if you have multiple transactions simultaneously, how the database resolves those is usually a configurable thing, so I can't tell you what will happen.</p>\n\n<p>Given that it sounds as though your code is principally reorganising data on disk, there's not much advantage to having multiple jobs running at the same time; this code is probably I/O bound anyway.  In which case it's much simpler just to make the code changes others have suggested to run only one copy at once.</p>\n"}], "owner": {"reputation": 3156, "user_id": 475861, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/Kxwvd.jpg?s=128&g=1", "display_name": "yosh", "link": "https://stackoverflow.com/users/475861/yosh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 132, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1431682272, "creation_date": 1420812321, "last_edit_date": 1421058235, "question_id": 27862315, "link": "https://stackoverflow.com/questions/27862315/perl-sql-and-file-create-race-condition", "title": "Perl SQL and file create race condition", "body": "<p>How do I handle \"race condition\" between instances of script that is scheduled to run every minute, performing following tasks for every file in directory:</p>\n\n<ol>\n<li>Connect to SQL database and check last element (filename) in table</li>\n<li>Create several files (multiple folders) with the next available filename</li>\n<li>Insert to SQL new record with the filename and created files' information</li>\n</ol>\n\n<p>Because process runs every 1 minute, it's possible that 2 instances overlap and work on same files. I can prevent that by file locking and skipping already opened file, however the issue persists with:</p>\n\n<ul>\n<li>Checking next available filename in database (2 processes want to use the same filename)</li>\n<li>Creating files with this filename</li>\n</ul>\n\n<p>Process A takes inputA.jpg and finds next available as filename image_01.</p>\n\n<p>Process B takes inputB.jpg and finds next available as filename image_01.</p>\n\n<p>And so the chaos begins...</p>\n\n<p>Unfortunately, I can't insert any placeholder record in SQL table to show that the next filename is being processed.</p>\n\n<p><strong>Pseudo-code of the loop:</strong></p>\n\n<pre><code>foreach ($file)\n{\n   $name = findFileNameInSql($file)\n   $path1 = createFile($name, $settings1);\n   $path2 = createFile($name, $settings2);\n   $path3 = createFile($name, $settings3);\n   addToSql($file, $name, $path1, $path2, $path3)\n}\n</code></pre>\n\n<p>The actual code is a bit more complicated, including file modifications and transactional insert to 2 SQL tables. In case of <code>createFile()</code> failure the application is rolling back all previously created files. It obviously creates issue when one instance of app is creating file \"abc\" and second instance has error that file \"abc\" already exists.</p>\n\n<p><strong>EDIT :</strong></p>\n\n<p>Sure, limiting script to have only one instance could be solution, but I was hoping to find a way to run them in parallel. If there's no way to do it, we can close this as duplicate.</p>\n"}, {"tags": ["perl", "dbix-class"], "comments": [{"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 2, "creation_date": 1420814316, "post_id": 27862051, "comment_id": 44127893, "body": "If you&#39;re getting a compilation error, it would be helpful to show us exactly what the error message is."}], "answers": [{"comments": [{"owner": {"reputation": 351, "user_id": 1970203, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/712f02e58fd460dc9fa64cd156fe0082?s=128&d=identicon&r=PG", "display_name": "bvnbhati", "link": "https://stackoverflow.com/users/1970203/bvnbhati"}, "edited": false, "score": 0, "creation_date": 1420865816, "post_id": 27862552, "comment_id": 44148287, "body": "how do I use DBIx::Class::Helper::Row::SubClass to create multiple subclasses for single result class, each having a different table name. It allows me to create a subclass only when it has exactly same name as the base class."}, {"owner": {"reputation": 1853, "user_id": 1005136, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9fa4e79e60474302c8225172649cbd35?s=128&d=identicon&r=PG", "display_name": "Alexander Hartmaier", "link": "https://stackoverflow.com/users/1005136/alexander-hartmaier"}, "reply_to_user": {"reputation": 351, "user_id": 1970203, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/712f02e58fd460dc9fa64cd156fe0082?s=128&d=identicon&r=PG", "display_name": "bvnbhati", "link": "https://stackoverflow.com/users/1970203/bvnbhati"}, "edited": false, "score": 0, "creation_date": 1420972882, "post_id": 27862552, "comment_id": 44173372, "body": "Looking at the source shows two options: override set_table or simply call table after subclass (preferred)."}, {"owner": {"reputation": 351, "user_id": 1970203, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/712f02e58fd460dc9fa64cd156fe0082?s=128&d=identicon&r=PG", "display_name": "bvnbhati", "link": "https://stackoverflow.com/users/1970203/bvnbhati"}, "edited": false, "score": 0, "creation_date": 1420990091, "post_id": 27862552, "comment_id": 44178327, "body": "thank you for your consistent support. I can solve the same problem without any sub-classing provided I can somehow use a runtime variable for result class table name and relationships."}, {"owner": {"reputation": 351, "user_id": 1970203, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/712f02e58fd460dc9fa64cd156fe0082?s=128&d=identicon&r=PG", "display_name": "bvnbhati", "link": "https://stackoverflow.com/users/1970203/bvnbhati"}, "edited": false, "score": 0, "creation_date": 1421123034, "post_id": 27862552, "comment_id": 44228788, "body": "I resolved this problem using DBIx::Class::Helper::Row::SubClass but after creating a modified subclass method to be able to create multiple subclasses out of one result class from parent schema."}, {"owner": {"reputation": 1853, "user_id": 1005136, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9fa4e79e60474302c8225172649cbd35?s=128&d=identicon&r=PG", "display_name": "Alexander Hartmaier", "link": "https://stackoverflow.com/users/1005136/alexander-hartmaier"}, "reply_to_user": {"reputation": 351, "user_id": 1970203, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/712f02e58fd460dc9fa64cd156fe0082?s=128&d=identicon&r=PG", "display_name": "bvnbhati", "link": "https://stackoverflow.com/users/1970203/bvnbhati"}, "edited": false, "score": 0, "creation_date": 1421227172, "post_id": 27862552, "comment_id": 44275064, "body": "Please submit a failing test case for DBIC::Helpers and if possible a patch that fixes the issue."}], "tags": [], "owner": {"reputation": 1853, "user_id": 1005136, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9fa4e79e60474302c8225172649cbd35?s=128&d=identicon&r=PG", "display_name": "Alexander Hartmaier", "link": "https://stackoverflow.com/users/1005136/alexander-hartmaier"}, "is_accepted": true, "score": 2, "last_activity_date": 1420813070, "creation_date": 1420813070, "answer_id": 27862552, "question_id": 27862051, "link": "https://stackoverflow.com/questions/27862051/dbixclass-subclassing-result-class/27862552#27862552", "title": "DBIX::Class subclassing result class", "body": "<p>That should work, maybe because your base class is missing the true return value (1;) at the end?</p>\n\n<p>You can also use <a href=\"https://metacpan.org/pod/DBIx::Class::Helper::Row::SubClass\" rel=\"nofollow\">DBIx::Class::Helper::Row::SubClass</a> if you prefer a neater solution that also fixes relationships that your base class might have defined.</p>\n"}, {"tags": [], "owner": {"reputation": 351, "user_id": 1970203, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/712f02e58fd460dc9fa64cd156fe0082?s=128&d=identicon&r=PG", "display_name": "bvnbhati", "link": "https://stackoverflow.com/users/1970203/bvnbhati"}, "is_accepted": false, "score": 0, "last_activity_date": 1421308180, "creation_date": 1421308180, "answer_id": 27958799, "question_id": 27862051, "link": "https://stackoverflow.com/questions/27862051/dbixclass-subclassing-result-class/27958799#27958799", "title": "DBIX::Class subclassing result class", "body": "<p>Here are the changes I made to methods \"subclass\" and \"generate_relationships\", to preserve various relationships among global and client specific tables. Also I had to drop reverse relationships form global to many client specific tables.</p>\n\n<pre><code>sub subclass {\n   my $self = shift;\n   my $client_id = shift;\n   $self-&gt;set_table($client_id);\n   $self-&gt;generate_relationships($client_id);\n}\n\nsub generate_relationships {\n  my $self = shift;\n  my $client_id = shift;\n  my ($namespace) = get_namespace_parts($self);\n  foreach my $rel ($self-&gt;relationships) {\n    my $rel_info = $self-&gt;relationship_info($rel);\n    my $class = $rel_info-&gt;{class};\n\n    assert_similar_namespaces($self, $class);\n    my (undef, $result) = get_namespace_parts($class);\n\n    eval \"require $class\";\n    # relation of self with global table e.g. person to zipcode or guarantor2 to person\n    # Copy relation as is \n    if($class-&gt;is_global == 1){\n      $self-&gt;add_relationship(\n       $rel,\n       \"${namespace}::$result\",\n       $rel_info-&gt;{cond},\n       $rel_info-&gt;{attrs}\n      );\n    }else{\n    # relation with client specific table e.g. patient2 has many guarantor2, person has many guarantor2\n    # skip if self is global (   person has many guarantor2/3/4 etc)\n      if($client_id ne ''){        \n    # need client id mention in result class with which self is related\n        $self-&gt;add_relationship(\n          $rel,\n          \"${namespace}::$result\".\"$client_id\",\n          $rel_info-&gt;{cond},\n          $rel_info-&gt;{attrs}\n        );\n      }\n    }        \n  };\n}\n</code></pre>\n\n<p>For each subclass I am passing client_id as argument, which is blank for global tables.</p>\n"}], "owner": {"reputation": 351, "user_id": 1970203, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/712f02e58fd460dc9fa64cd156fe0082?s=128&d=identicon&r=PG", "display_name": "bvnbhati", "link": "https://stackoverflow.com/users/1970203/bvnbhati"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 357, "favorite_count": 0, "accepted_answer_id": 27862552, "answer_count": 2, "score": 0, "last_activity_date": 1421308180, "creation_date": 1420811429, "last_edit_date": 1420819898, "question_id": 27862051, "link": "https://stackoverflow.com/questions/27862051/dbixclass-subclassing-result-class", "title": "DBIX::Class subclassing result class", "body": "<p>I am trying to use a common base class for multiple result classes in DBIX::Class. Reason is - I have few tables with same structure but different names.</p>\n\n<p>Here is my base class </p>\n\n<pre><code>use utf8;\npackage myapp::Schema::tablebase;\n\nuse strict;\nuse warnings;\n\nuse base 'DBIx::Class::Core';\n\n__PACKAGE__-&gt;table(\"unknown\");\n\n__PACKAGE__-&gt;add_columns(\n  \"id\",\n  { data_type =&gt; \"smallint\", is_nullable =&gt; 0 }\n\n  #, ... and lot more\n);\n</code></pre>\n\n<p>Here is actual result class</p>\n\n<pre><code>package myapp::Schema::Result::ActualTable;\nuse base 'myapp::Schema::tablebase';\n # Correct table name\n__PACKAGE__-&gt;table('patient2');\n1;\n</code></pre>\n\n<p>I am getting compilation error for this effort. Please help me on this.</p>\n\n<p><strong>Update:</strong></p>\n\n<p>The error I am getting is -</p>\n\n<p>DBIx::Class::Schema::catch {...} (): Attempt to load_namespaces() class myapp::Schema::Result::ActualTable failed - are you sure this is a real Result Class?: Can't locate object method \"result_source_instance\" via package \"myapp::Schema::Result::ActualTable\" at C:/Strawberry/perl/site/lib/DBIx/Class/Schema.pm line 195. at C:/Strawberry/perl/site/lib/myapp/Schema.pm </p>\n"}, {"tags": ["perl", "diff"], "comments": [{"owner": {"reputation": 61610, "user_id": 725418, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/82ac2dc3e1ad4b7187f245c416528df9?s=128&d=identicon&r=PG", "display_name": "TLP", "link": "https://stackoverflow.com/users/725418/tlp"}, "edited": false, "score": 7, "creation_date": 1420809670, "post_id": 27861370, "comment_id": 44125244, "body": "I am going to guess that when you say you &quot;copied&quot; the file, you didn&#39;t actually copy it, but you did something else. I am also going to guess that this is about line endings, and that either of the files is from Windows."}, {"owner": {"reputation": 1964, "user_id": 2123706, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/7f9f8aacaafd903d700846efd805bd55?s=128&d=identicon&r=PG", "display_name": "alex", "link": "https://stackoverflow.com/users/2123706/alex"}, "reply_to_user": {"reputation": 61610, "user_id": 725418, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/82ac2dc3e1ad4b7187f245c416528df9?s=128&d=identicon&r=PG", "display_name": "TLP", "link": "https://stackoverflow.com/users/725418/tlp"}, "edited": false, "score": 0, "creation_date": 1420810936, "post_id": 27861370, "comment_id": 44125948, "body": "@TLP When I copied, I highlighted and pasted into the winningStreak.txt document. I do not know why carriage returns would alter anything"}, {"owner": {"reputation": 1964, "user_id": 2123706, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/7f9f8aacaafd903d700846efd805bd55?s=128&d=identicon&r=PG", "display_name": "alex", "link": "https://stackoverflow.com/users/2123706/alex"}, "reply_to_user": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "edited": false, "score": 0, "creation_date": 1420810997, "post_id": 27861370, "comment_id": 44125972, "body": "@\u0421\u0443\u0445\u043e\u043927 alexhuhn@Ubuntu-MacPro:~/Desktop/Analysis$ hexdump -C a.txt winningStreak.txt 00000000  77 0d 0a 77 0d 0a 6c 0d  0a 6c 0d 0a 0d 0a 77 0a  |w..w..l..l....w.| 00000010  77 0a 6c 0a 6c 0a 0a                              |w.l.l..| 00000017"}, {"owner": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "edited": false, "score": 1, "creation_date": 1420811021, "post_id": 27861370, "comment_id": 44125987, "body": "<code>perl -i -pe &#39;y|\\r||d&#39; a.txt winningStreak.txt</code> will remove CR from files."}, {"owner": {"reputation": 1964, "user_id": 2123706, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/7f9f8aacaafd903d700846efd805bd55?s=128&d=identicon&r=PG", "display_name": "alex", "link": "https://stackoverflow.com/users/2123706/alex"}, "reply_to_user": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "edited": false, "score": 0, "creation_date": 1420811032, "post_id": 27861370, "comment_id": 44125998, "body": "@\u0421\u0443\u0445\u043e\u043927 sorry, do not know how to format that better, but this also says something is different"}, {"owner": {"reputation": 61610, "user_id": 725418, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/82ac2dc3e1ad4b7187f245c416528df9?s=128&d=identicon&r=PG", "display_name": "TLP", "link": "https://stackoverflow.com/users/725418/tlp"}, "edited": false, "score": 2, "creation_date": 1420812070, "post_id": 27861370, "comment_id": 44126557, "body": "@alex Note the character <code>0d</code> in your hexdump. This is <code>\\r</code>, a non-printable whitespace character."}, {"owner": {"reputation": 3036, "user_id": 3466415, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/610a8a95f861678ab9f72ee483d1c1a7?s=128&d=identicon&r=PG&f=1", "display_name": "David K", "link": "https://stackoverflow.com/users/3466415/david-k"}, "edited": false, "score": 0, "creation_date": 1420812306, "post_id": 27861370, "comment_id": 44126672, "body": "@alex also notice how for every <code>0a</code> in the dump of winningStreak.txt there is <code>0d 0a</code> in the dump of a.txt. This might be easier to see if you dump the files separately: <code>hexdump -C a.txt</code>, then <code>hexdump -C winningStreak.txt</code>. Now an interesting question is, why does your Perl script require the <code>0d</code> in order to work correctly?"}, {"owner": {"reputation": 1964, "user_id": 2123706, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/7f9f8aacaafd903d700846efd805bd55?s=128&d=identicon&r=PG", "display_name": "alex", "link": "https://stackoverflow.com/users/2123706/alex"}, "edited": false, "score": 0, "creation_date": 1421064796, "post_id": 27861370, "comment_id": 44202809, "body": "Thank you for all comments. I ran     perl -i -pe &#39;y|\\r||d&#39; a.txt     and removed all the CR, now my perl script does not work at all. I will work with that and sort it out, but it appears it is the CR that are different."}], "answers": [{"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 4, "last_activity_date": 1421068980, "last_edit_date": 1421068980, "creation_date": 1420810499, "answer_id": 27861792, "question_id": 27861370, "link": "https://stackoverflow.com/questions/27861370/diff-function-says-files-are-different-when-they-are-copies/27861792#27861792", "title": "diff function says files are different when they are copies", "body": "<p>Obviously, there must a difference in non-printable characters. One has Windows line endings (CRLF), and the other has unix line endings (LF).</p>\n\n<p>Use <code>dos2unix</code> or some other tool to convert it, or use <code>s/\\s+\\z//</code> instead of <code>chomp</code> to remove the line endings.</p>\n"}, {"tags": [], "owner": {"reputation": 1964, "user_id": 2123706, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/7f9f8aacaafd903d700846efd805bd55?s=128&d=identicon&r=PG", "display_name": "alex", "link": "https://stackoverflow.com/users/2123706/alex"}, "is_accepted": false, "score": 0, "last_activity_date": 1421068798, "creation_date": 1421068798, "answer_id": 27902929, "question_id": 27861370, "link": "https://stackoverflow.com/questions/27861370/diff-function-says-files-are-different-when-they-are-copies/27902929#27902929", "title": "diff function says files are different when they are copies", "body": "<p>the solution was dos2unix, as @ikegami said. I used a modified perl script to alter the CRs, as @\u0421\u0443\u0445\u043e\u043927 said.</p>\n\n<p>I ran </p>\n\n<pre><code>alexhuhn@Ubuntu-MacPro:~/Desktop/Analysis$ perl -i -p -e 's/\\n/\\r\\n/' winningStreak.txt\n</code></pre>\n\n<p>and it altered the endings so that my perl script worked.</p>\n\n<p>Thanks for all the help!</p>\n"}], "owner": {"reputation": 1964, "user_id": 2123706, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/7f9f8aacaafd903d700846efd805bd55?s=128&d=identicon&r=PG", "display_name": "alex", "link": "https://stackoverflow.com/users/2123706/alex"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 75, "favorite_count": 0, "accepted_answer_id": 27861792, "answer_count": 2, "score": 0, "last_activity_date": 1421068980, "creation_date": 1420809166, "last_edit_date": 1420811998, "question_id": 27861370, "link": "https://stackoverflow.com/questions/27861370/diff-function-says-files-are-different-when-they-are-copies", "title": "diff function says files are different when they are copies", "body": "<p>I have a perl script that counts doublets in a text file, and summarizes the results. This works fine on my mock set of data (a.txt). This file is a short list of letters. My real data (winningStreak.txt) is much longer and the perl script fails to read the file. </p>\n\n<pre><code>alexhuhn@Ubuntu-MacPro:~/Desktop/Analysis$ perl doublet.pl a.txt\nName a file to save the results in\nb.txt\nalexhuhn@Ubuntu-MacPro:~/Desktop/Analysis$ perl doublet.pl winningStreak.txt\nName a file to save the results in\nb.txt\n</code></pre>\n\n<p>I thought there was something wrong with my script, so I copied and pasted a.txt into winningStreak.txt. My perl script again did not read the file information.</p>\n\n<p>I ran </p>\n\n<pre><code>alexhuhn@Ubuntu-MacPro:~/Desktop/Analysis$ diff a.txt winningStreak.txt \n1,5c1,5\n&lt; w\n&lt; w\n&lt; l\n&lt; l\n&lt; \n---\n&gt; w\n&gt; w\n&gt; l\n&gt; l\n&gt; \n</code></pre>\n\n<p>and everything is considered different, even though it was just copied and pasted. Does anyone know how I can circumnavigate this issue, as my real data (streak.txt) is much longer than my mock set (a.txt). </p>\n\n<pre><code>alexhuhn@Ubuntu-MacPro:~/Desktop/Analysis$ hexdump -C a.txt winningStreak.txt \n00000000 77 0d 0a 77 0d 0a 6c 0d 0a 6c 0d 0a 0d 0a 77 0a |w..w..l..l....w.| \n00000010 77 0a 6c 0a 6c 0a 0a |w.l.l..| \n00000017\n</code></pre>\n"}, {"tags": ["string", "perl", "unicode", "pattern-matching"], "answers": [{"comments": [{"owner": {"reputation": 101, "user_id": 1826452, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/29b4f7086e623cdeaf1b0b7ca9b62a6c?s=128&d=identicon&r=PG", "display_name": "Sebastian Sulger", "link": "https://stackoverflow.com/users/1826452/sebastian-sulger"}, "edited": false, "score": 0, "creation_date": 1420810256, "post_id": 27861090, "comment_id": 44125591, "body": "Thanks - incredibly simple solution. The <code>elsif</code> statement is the one I was missing. This basically remembers <code>$word</code> from the hash call in the <code>if</code> statement - correct? I was fumbling around with <code>$nextline = &lt;&gt;</code> and so forth to proceed to the next line, but I now realize that&#39;s not even necessary. One more question though: The first line of the output file does not contain any leading white space, but all other lines do contain a single leading white space. How come?"}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "reply_to_user": {"reputation": 101, "user_id": 1826452, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/29b4f7086e623cdeaf1b0b7ca9b62a6c?s=128&d=identicon&r=PG", "display_name": "Sebastian Sulger", "link": "https://stackoverflow.com/users/1826452/sebastian-sulger"}, "edited": false, "score": 0, "creation_date": 1420816847, "post_id": 27861090, "comment_id": 44129542, "body": "@SebastianSulger: Yes, correct. The whitespace might come from the input files - my output is identical to the one you gave."}], "tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": true, "score": 1, "last_activity_date": 1420808211, "creation_date": 1420808211, "answer_id": 27861090, "question_id": 27860716, "link": "https://stackoverflow.com/questions/27860716/perl-append-numbers-from-one-file-to-strings-of-second-file/27861090#27861090", "title": "Perl: append numbers from one file to strings of second file", "body": "<p>Your description of the solution is correct. Now just translate it to code:</p>\n\n<pre><code>#!/usr/bin/perl\nuse warnings;\nuse strict;\n\nmy %hash;\n\nopen my $F1, '&lt;:encoding(UTF-8)', 'file.1' or die $!;\nwhile (&lt;$F1&gt;) {\n    chomp;\n    my ($word, $num) = split /, /;\n    $hash{$word} = $num;\n}\n\nopen my $F2, '&lt;:encoding(UTF-8)', 'file.2' or die $!;\nmy $word;\nwhile (&lt;$F2&gt;) {\n    chomp;\n    if (exists $hash{$_}) {\n        $word = $_;\n    } elsif ($_) {\n        print \"$_, $hash{$word}\\n\";\n    } else {\n        print \"\\n\";\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 101, "user_id": 1826452, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/29b4f7086e623cdeaf1b0b7ca9b62a6c?s=128&d=identicon&r=PG", "display_name": "Sebastian Sulger", "link": "https://stackoverflow.com/users/1826452/sebastian-sulger"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 42, "favorite_count": 0, "accepted_answer_id": 27861090, "answer_count": 1, "score": 0, "last_activity_date": 1420808211, "creation_date": 1420806947, "question_id": 27860716, "link": "https://stackoverflow.com/questions/27860716/perl-append-numbers-from-one-file-to-strings-of-second-file", "title": "Perl: append numbers from one file to strings of second file", "body": "<p>I would like to append numbers attached to (Unicode) strings in one file, to matched strings in a second file. Somehow I can't wrap my head around how to do this. Here is what my two files look like.</p>\n\n<p>File 1:</p>\n\n<pre><code>\u0926\u094c\u0930\u093e, 2\n\u092a\u094d\u0930\u094b\u0924\u094d\u0938\u093e\u0939\u0928, 1\n\u092a\u094d\u0930\u0917\u0924\u093f, 4\n</code></pre>\n\n<p>File 2:</p>\n\n<pre><code>\u0926\u094c\u0930\u093e\ndorA\n\n\u092a\u094d\u0930\u094b\u0924\u094d\u0938\u093e\u0939\u0928\nprua2ts3Ahan\nprua2ts2Ahan\nprua2tsAhan\nprua2t2s3Ahan\nprua2t2s2Ahan\nprua2t2sAhan\nprOts3Ahan\nprOts2Ahan\nprOtsAhan\nprOt2s3Ahan\nprOt2s2Ahan\nprOt2sAhan\n\n\u092a\u094d\u0930\u0917\u0924\u093f\npraGat2I\npraGatI\npragat2I\npragatI\n</code></pre>\n\n<p>The desired result would look like this:</p>\n\n<p>Output:</p>\n\n<pre><code>dorA, 2\n\nprua2ts3Ahan, 1\nprua2ts2Ahan, 1\nprua2tsAhan, 1\nprua2t2s3Ahan, 1\nprua2t2s2Ahan, 1\nprua2t2sAhan, 1\nprOts3Ahan, 1\nprOts2Ahan, 1\nprOtsAhan, 1\nprOt2s3Ahan, 1\nprOt2s2Ahan, 1\nprOt2sAhan, 1\n\npraGat2I, 4\npraGatI, 4\npragat2I, 4\npragatI, 4\n</code></pre>\n\n<p>I have a hash created from File 1 that has the strings as keys, and the numbers as values. Now its a matter of matching these keys in File 2, collecting all following lines after the match, and appending the values to those following lines. Can someone point me in the right direction?</p>\n"}, {"tags": ["regex", "string", "perl"], "comments": [{"owner": {"reputation": 61610, "user_id": 725418, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/82ac2dc3e1ad4b7187f245c416528df9?s=128&d=identicon&r=PG", "display_name": "TLP", "link": "https://stackoverflow.com/users/725418/tlp"}, "edited": false, "score": 1, "creation_date": 1420809203, "post_id": 27860294, "comment_id": 44124988, "body": "What is difficult about that? A different solution would be to use a hash to check the words, but then you have to consider case."}], "answers": [{"comments": [{"owner": {"reputation": 61610, "user_id": 725418, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/82ac2dc3e1ad4b7187f245c416528df9?s=128&d=identicon&r=PG", "display_name": "TLP", "link": "https://stackoverflow.com/users/725418/tlp"}, "edited": false, "score": 0, "creation_date": 1420809079, "post_id": 27860360, "comment_id": 44124927, "body": "This will allow partial matches, e.g. <code>these</code> or <code>motion</code>."}, {"owner": {"reputation": 61610, "user_id": 725418, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/82ac2dc3e1ad4b7187f245c416528df9?s=128&d=identicon&r=PG", "display_name": "TLP", "link": "https://stackoverflow.com/users/725418/tlp"}, "edited": false, "score": 0, "creation_date": 1420809349, "post_id": 27860360, "comment_id": 44125058, "body": "Also, it does not really add anything to what the OP already has. You have only expanded his <code>$small_re</code> variable, added look-ahead assertions (quite redundant here) and anchors (also quite redundant)."}, {"owner": {"reputation": 83, "user_id": 2215112, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a062f468944d2c7feb7f0a1428d75b3e?s=128&d=identicon&r=PG", "display_name": "user17241", "link": "https://stackoverflow.com/users/2215112/user17241"}, "edited": false, "score": 0, "creation_date": 1420809850, "post_id": 27860360, "comment_id": 44125359, "body": "@vks, thank you for your help.. As im a beginner in a perl, can you help me please how to add this expression in a perl script? thanks"}, {"owner": {"reputation": 61610, "user_id": 725418, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/82ac2dc3e1ad4b7187f245c416528df9?s=128&d=identicon&r=PG", "display_name": "TLP", "link": "https://stackoverflow.com/users/725418/tlp"}, "reply_to_user": {"reputation": 83, "user_id": 2215112, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a062f468944d2c7feb7f0a1428d75b3e?s=128&d=identicon&r=PG", "display_name": "user17241", "link": "https://stackoverflow.com/users/2215112/user17241"}, "edited": false, "score": 1, "creation_date": 1420810309, "post_id": 27860360, "comment_id": 44125619, "body": "@user17241 Did you accept the answer before you had tried it? It will do nothing different than the regex you already have."}, {"owner": {"reputation": 62965, "user_id": 3679490, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/70f98fb23b16862298ea208aedfd18ae?s=128&d=identicon&r=PG&f=1", "display_name": "vks", "link": "https://stackoverflow.com/users/3679490/vks"}, "reply_to_user": {"reputation": 83, "user_id": 2215112, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a062f468944d2c7feb7f0a1428d75b3e?s=128&d=identicon&r=PG", "display_name": "user17241", "link": "https://stackoverflow.com/users/2215112/user17241"}, "edited": false, "score": 0, "creation_date": 1420811942, "post_id": 27860360, "comment_id": 44126494, "body": "@user17241 use <code>\\b</code> in each token to make it absolute and use perl replace."}, {"owner": {"reputation": 5886, "user_id": 2019415, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/645958eb08719fa5119052d7d1d079ff?s=128&d=identicon&r=PG", "display_name": "G. Cito", "link": "https://stackoverflow.com/users/2019415/g-cito"}, "edited": false, "score": 0, "creation_date": 1420832699, "post_id": 27860360, "comment_id": 44138464, "body": "This off site tool is useful but I think answers with links to regex101.com need more explanation <b>in the text</b> or they risk being &quot;link only&quot; answers like any other."}], "tags": [], "owner": {"reputation": 62965, "user_id": 3679490, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/70f98fb23b16862298ea208aedfd18ae?s=128&d=identicon&r=PG&f=1", "display_name": "vks", "link": "https://stackoverflow.com/users/3679490/vks"}, "is_accepted": true, "score": 0, "last_activity_date": 1420805713, "creation_date": 1420805713, "answer_id": 27860360, "question_id": 27860294, "link": "https://stackoverflow.com/questions/27860294/remove-string-perl-with-first-or-last-word-is-in-a-list/27860360#27860360", "title": "remove string perl with first or last word is in a list", "body": "<pre><code>^(?=the|i|in|there|this|with|on|we|that|of).*$|^(?=.*(?:the|i|in|there|this|with|on|we|that|of)$).*$\n</code></pre>\n\n<p>Try this.Replace by <code>empty string</code>.See demo.</p>\n\n<p><a href=\"https://regex101.com/r/sH8aR8/42\" rel=\"nofollow\">https://regex101.com/r/sH8aR8/42</a></p>\n"}], "owner": {"reputation": 83, "user_id": 2215112, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a062f468944d2c7feb7f0a1428d75b3e?s=128&d=identicon&r=PG", "display_name": "user17241", "link": "https://stackoverflow.com/users/2215112/user17241"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 306, "favorite_count": 0, "accepted_answer_id": 27860360, "answer_count": 1, "score": 0, "last_activity_date": 1420805802, "creation_date": 1420805463, "last_edit_date": 1420805802, "question_id": 27860294, "link": "https://stackoverflow.com/questions/27860294/remove-string-perl-with-first-or-last-word-is-in-a-list", "title": "remove string perl with first or last word is in a list", "body": "<p>I try to delete all strings if their first or last word is one of this list of words : \"the\ni\nin\nthere\nthis\nwith\non\nwe\nthat\nof\"</p>\n\n<p>For example if i have this string in an input file \"with me\" this  string will be removed, </p>\n\n<p>Example:\n<strong><em>input</em></strong></p>\n\n<pre><code>\"the european union\"\n\n\n\"would like to\"\n\n\"would like\"\n\n\"of the european\"\n\n\"the european parliament\"\n\n\"the member states\"\n</code></pre>\n\n<p><strong><em>output</em></strong> </p>\n\n<pre><code>\"would like to\"\n\n\"would like\"\n</code></pre>\n\n<p>I've got this idea which seems to me a little bit difficult : </p>\n\n<pre><code>my @small = qw(the i in there this with on we that of);\nmy $small_re = join \"|\", @small;\n$small_re = qr(^(?:$small_re)|(?:$small_re)$);\nif ($sequence !~ /$small_re/) {\n#...\n}\n</code></pre>\n\n<p>Any other idea please?</p>\n\n<p>Thank you</p>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1420807485, "post_id": 27860242, "comment_id": 44123972, "body": "This is a very difficult thing to do in general. For instance, how about <code>c+++++a+b+++a</code> meaning <code>c++ + ++a + b + ++a</code>?"}, {"owner": {"reputation": 18883, "user_id": 2612235, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/dpsjq.jpg?s=128&g=1", "display_name": "nowox", "link": "https://stackoverflow.com/users/2612235/nowox"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1420807690, "post_id": 27860242, "comment_id": 44124083, "body": "@Borodin I slowly realize the complexity of my question :("}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1420817077, "post_id": 27860242, "comment_id": 44129721, "body": "@coin, for the record, Perl parses <code>c+++++a+b+++a</code> as <code>( ((c++)++ + a) + b++) + a</code>"}], "answers": [{"comments": [{"owner": {"reputation": 18883, "user_id": 2612235, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/dpsjq.jpg?s=128&g=1", "display_name": "nowox", "link": "https://stackoverflow.com/users/2612235/nowox"}, "edited": false, "score": 0, "creation_date": 1420805819, "post_id": 27860356, "comment_id": 44123045, "body": "Right but in this case I cannot deal with the special cases like <code>ted+++2+3+--i</code> -&gt; <code>ted++ + 2 + 3 + --i</code>"}, {"owner": {"reputation": 2207, "user_id": 3586288, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000635431764/picture?type=large", "display_name": "Tim Hallyburton", "link": "https://stackoverflow.com/users/3586288/tim-hallyburton"}, "reply_to_user": {"reputation": 18883, "user_id": 2612235, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/dpsjq.jpg?s=128&g=1", "display_name": "nowox", "link": "https://stackoverflow.com/users/2612235/nowox"}, "edited": false, "score": 1, "creation_date": 1420806153, "post_id": 27860356, "comment_id": 44123245, "body": "Indeed. Your example above is a bit confusing tbh. How does &#39;ted-8&#39; become &#39;ted++ - 8&#39; ? Same with &#39;foo+bar&#39; =&gt; &#39;foo + --bar&#39;?"}], "tags": [], "owner": {"reputation": 2207, "user_id": 3586288, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000635431764/picture?type=large", "display_name": "Tim Hallyburton", "link": "https://stackoverflow.com/users/3586288/tim-hallyburton"}, "is_accepted": false, "score": -1, "last_activity_date": 1420824088, "last_edit_date": 1420824088, "creation_date": 1420805705, "answer_id": 27860356, "question_id": 27860242, "link": "https://stackoverflow.com/questions/27860242/regex-add-spaces-in-a-math-expression-cab-123-cab-1-2-3/27860356#27860356", "title": "Regex add spaces in a math expression (cab+++=1+2+3 -&gt; cab++ += 1 + 2 + 3)", "body": "<p>I wrote a sub for you, since those regular expressions kept growing and growing...</p>\n\n<pre><code>sub format{\n        my $text = shift;\n        #substitute '+'\n        $text =~ s/(?&lt;!\\+)\\+(?!\\+|=)/ \\+ /g;\n        #substitute '-'        \n        $text =~ s/(?&lt;!-)-(?!-|=|&gt;)/ - /g;\n        #substitute '= , +=, -= (...)'\n        $text =~ s/([\\+,-,\\*,\\/]?=)/ $1 /g;\n\n        #get rid of additional spaces:\n        $text =~ s/  / /g;\n        return $text;\n}\n</code></pre>\n\n<p>Here are some results:</p>\n\n<pre><code>converting: foo+--bar++-3 += 3-x--+bar = ++c-*const-&gt;char++ +2\nto:         foo + --bar++ - 3 += 3 - x-- + bar = ++c - *const-&gt;char++ + 2\n\nconverting: ++x-&gt;(a+b+--c) *= c++-++b/=9;\nto:         ++x-&gt;(a + b + --c) *= c++ - ++b /= 9;\n\nconverting: b+c+a+d-=++*char-&gt;(--c+d);\nto:         b + c + a + d- = ++*char-&gt;(--c + d);\n</code></pre>\n"}], "owner": {"reputation": 18883, "user_id": 2612235, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/dpsjq.jpg?s=128&g=1", "display_name": "nowox", "link": "https://stackoverflow.com/users/2612235/nowox"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 106, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1420824088, "creation_date": 1420805311, "last_edit_date": 1420807440, "question_id": 27860242, "link": "https://stackoverflow.com/questions/27860242/regex-add-spaces-in-a-math-expression-cab-123-cab-1-2-3", "title": "Regex add spaces in a math expression (cab+++=1+2+3 -&gt; cab++ += 1 + 2 + 3)", "body": "<p>I have this regex (which almost work):</p>\n\n<pre><code> s/(?&lt;!\\+|-| )(\\+|-)(?!=|\\+|-| )/ $1 /g;\n</code></pre>\n\n<p><a href=\"https://regex101.com/r/oQ8qU8/2\" rel=\"nofollow\">https://regex101.com/r/oQ8qU8/2</a></p>\n\n<p>And I want to add a space before and after each <code>+</code> and <code>-</code> char. Here's the test string:</p>\n\n<pre><code> cab+=1+2+3+deb++-5+-5;\n</code></pre>\n\n<p>The output should be:</p>\n\n<pre><code> cab += 1 + 2 + 3 + deb++ - 5 + -5;\n</code></pre>\n\n<p>I would like to treat all the C/C++ special cases such as a negative number <code>A=-C</code>-><code>A = -C</code>, an pre/post incremented variable <code>A++=3</code> -> <code>A++ = 3</code>...</p>\n\n<p>Is there a good solution to use a regexp here?</p>\n"}]