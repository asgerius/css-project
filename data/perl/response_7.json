[{"tags": ["perl", "perl-module"], "comments": [{"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1425032687, "post_id": 28731864, "comment_id": 45804781, "body": "POSIX isn&#39;t a CPAN module. It&#39;s a standard module. It&#39;s been included as part of the Perl distribution forever (ok, for about twenty years)."}], "answers": [{"tags": [], "owner": {"reputation": 4598, "user_id": 145364, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7fdd3f07ac5b720b510dc17843ab9d37?s=128&d=identicon&r=PG", "display_name": "Jim Davis", "link": "https://stackoverflow.com/users/145364/jim-davis"}, "is_accepted": false, "score": 1, "last_activity_date": 1424907721, "creation_date": 1424907721, "answer_id": 28731912, "question_id": 28731864, "link": "https://stackoverflow.com/questions/28731864/program-to-calculate-the-time/28731912#28731912", "title": "program to calculate the time", "body": "<p>You can use <a href=\"http://perldoc.perl.org/functions/localtime.html\" rel=\"nofollow\"><code>localtime</code></a>:</p>\n\n<pre><code>print scalar localtime($current_time);\n</code></pre>\n\n<p>Or you can run <code>localtime</code>'s return values through <a href=\"https://metacpan.org/pod/POSIX#strftime\" rel=\"nofollow\"><code>POSIX::strftime</code></a> (which is distributed with Perl as a core module):</p>\n\n<pre><code>use POSIX qw(strftime);\n\nprint strftime('%Y-%m-%d %H:%M:%S', localtime $current_time);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 870, "user_id": 604464, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c71612818ca9b86bc9906d47afd0e2f?s=128&d=identicon&r=PG", "display_name": "ratsbane", "link": "https://stackoverflow.com/users/604464/ratsbane"}, "is_accepted": true, "score": 0, "last_activity_date": 1424907876, "creation_date": 1424907876, "answer_id": 28731952, "question_id": 28731864, "link": "https://stackoverflow.com/questions/28731864/program-to-calculate-the-time/28731952#28731952", "title": "program to calculate the time", "body": "<p>That's easy to do with <a href=\"http://perldoc.perl.org/functions/localtime.html\" rel=\"nofollow\">localtime</a>.  Hours, minutes, and seconds are the 2nd, 1st, and 0th values returned.  For example:</p>\n\n<pre><code>my ($sec, $min, $hours) = localtime(time()+120); # add 120 seconds\n\nprintf \"%02d:%02d:%02d\\n\", $hours, $min, $sec;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 0, "last_activity_date": 1425033101, "creation_date": 1425033101, "answer_id": 28762918, "question_id": 28731864, "link": "https://stackoverflow.com/questions/28731864/program-to-calculate-the-time/28762918#28762918", "title": "program to calculate the time", "body": "<p><a href=\"https://metacpan.org/pod/Time::Piece\" rel=\"nofollow\">Time::Piece</a> and <a href=\"https://metacpan.org/pod/Time::Seconds\" rel=\"nofollow\">Time::Seconds</a> have been included with all Perl installations since 2007.</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\nuse 5.010;\n\nuse Time::Piece;\nuse Time::Seconds;\n\nmy $time = localtime;\n$time += 2 * ONE_MINUTE;\n\nsay $time-&gt;strftime('%H:%M');\n</code></pre>\n"}], "owner": {"reputation": 173, "user_id": 3587025, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/dceb16be8b88ea27250fed2644f9e370?s=128&d=identicon&r=PG&f=1", "display_name": "user3587025", "link": "https://stackoverflow.com/users/3587025/user3587025"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 52, "favorite_count": 0, "accepted_answer_id": 28731952, "answer_count": 3, "score": 1, "last_activity_date": 1425033101, "creation_date": 1424907487, "question_id": 28731864, "link": "https://stackoverflow.com/questions/28731864/program-to-calculate-the-time", "title": "program to calculate the time", "body": "<p>I would like to calculate the the current time and add 2 minutes to it and print the output in the following format. HH:MM . I searched online and came to know that  there are lot of CPAN modules that can be used to implement this. But I'd like to do it without cpan modules.</p>\n\n<pre><code>  $current_time = time();\n\n  $new_time  = $current_time + (2*60); // adding  two minutes \n\n  print( ' the time is ' .  $ new_time  ) ;\n\n Output : the time is 1424906904\n</code></pre>\n\n<p>I searched online and came to know that we need to use POSIX perl interface to print the time in the appropriate format.  However i'd like to know if there is a way to do this without using any cpan modules.</p>\n"}, {"tags": ["perl", "email"], "comments": [{"owner": {"reputation": 72378, "user_id": 183172, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Vhpvg.jpg?s=128&g=1", "display_name": "martin clayton", "link": "https://stackoverflow.com/users/183172/martin-clayton"}, "edited": false, "score": 1, "creation_date": 1424905364, "post_id": 28731281, "comment_id": 45748873, "body": "Maybe I&#39;m missing something, but I don&#39;t see where you check the outcome of the sendmail() calls.  Have you seen <a href=\"http://search.cpan.org/~rjbs/Email-Sender-1.300016/lib/Email/Sender/Manual/QuickStart.pm#in_case_of_error\" rel=\"nofollow noreferrer\">search.cpan.org/~rjbs/Email-Sender-1.300016/lib/Email/Sender&zwnj;&#8203;/&hellip;</a> ?"}, {"owner": {"reputation": 957, "user_id": 986818, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/8baf2119a59c2c8c47c9fcc5c962ec23?s=128&d=identicon&r=PG", "display_name": "rajeev", "link": "https://stackoverflow.com/users/986818/rajeev"}, "reply_to_user": {"reputation": 72378, "user_id": 183172, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Vhpvg.jpg?s=128&g=1", "display_name": "martin clayton", "link": "https://stackoverflow.com/users/183172/martin-clayton"}, "edited": false, "score": 0, "creation_date": 1424908654, "post_id": 28731281, "comment_id": 45750086, "body": "thx. with modified code. i get: $ test.pl               result=Email::Sender::Success=HASH(0x1b655e0)"}], "answers": [{"tags": [], "owner": {"reputation": 957, "user_id": 986818, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/8baf2119a59c2c8c47c9fcc5c962ec23?s=128&d=identicon&r=PG", "display_name": "rajeev", "link": "https://stackoverflow.com/users/986818/rajeev"}, "is_accepted": false, "score": 0, "last_activity_date": 1424911103, "creation_date": 1424911103, "answer_id": 28732479, "question_id": 28731281, "link": "https://stackoverflow.com/questions/28731281/perl-emailmime-not-working-intermittent/28732479#28732479", "title": "perl Email::MIME not working intermittent", "body": "<pre><code># service postfix start\n</code></pre>\n\n<p>solved the problem.</p>\n"}], "owner": {"reputation": 957, "user_id": 986818, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/8baf2119a59c2c8c47c9fcc5c962ec23?s=128&d=identicon&r=PG", "display_name": "rajeev", "link": "https://stackoverflow.com/users/986818/rajeev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 61, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1424911103, "creation_date": 1424905020, "last_edit_date": 1424910545, "question_id": 28731281, "link": "https://stackoverflow.com/questions/28731281/perl-emailmime-not-working-intermittent", "title": "perl Email::MIME not working intermittent", "body": "<p>the following code sometimes work, and sometimes do not. It is runnign on linux, where postfix is installed, i disabled it and stopped the service. does this need postfix to run?</p>\n\n<p>when i run this test code in terminal i get no error and <em>no</em> email.</p>\n\n<pre><code>    #!/usr/bin/perl\n    use warnings;\n    use strict;\n    use Data::Dumper;\n    use Email::MIME;\n    use Email::Sender::Simple qw(sendmail);\n\n        my $sub='test';\n        my $exitCode=0;\n        my $emailTo='raxxxx@xxxx.com';\n        my $bcc='';\n\n        if ($exitCode == 0){$exitCode = '';}\n\n        my @mesgBody = (\"test\\n\",\"email\\n\");\n        my $message = Email::MIME-&gt;create(\n              header_str =&gt; [\n                From    =&gt; '\"Rajeev\" &lt;'.$emailTo.'&gt;',\n                To      =&gt; $emailTo,\n                Subject =&gt; $sub,\n              ],\n              attributes =&gt; {\n                'X-Priority' =&gt; 1,\n                'X-MSMail-Priority' =&gt; 'High',\n                encoding =&gt; 'quoted-printable',\n                charset  =&gt; 'ISO-8859-1',\n              },\n              body_str =&gt; \"@mesgBody\".\"\\n\".$exitCode,   #old   body_str =&gt; $sub.\"\\n\".$mesg.\"\\n\".$exitCode,\n            );\n\n        #sendmail($message);\n        if ($bcc eq ''){\n            my $result=sendmail(\n                $message,\n                {\n                    from =&gt; '\"Rajeev\" &lt;'.$emailTo.'&gt;',\n                    to   =&gt; [$emailTo],\n                }\n            );\nprint \"result=\".Dumper($result).\"\\n\";\n        } else {\n            sendmail(\n                $message,\n                {\n                    from =&gt; '\"Rajeev\" &lt;'.$emailTo.'&gt;',\n                    to   =&gt; [$emailTo, $bcc],\n                }\n            );\n        }\n</code></pre>\n\n<p>output:->\nresult=$VAR1 = bless( {}, 'Email::Sender::Success' );</p>\n\n<p>so if this is success, why am i not getting any email?</p>\n\n<p>I also see <em>nothing</em> in system logs.</p>\n\n<p>thank you.</p>\n"}, {"tags": ["perl", "autoload", "universal"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1424901678, "post_id": 28729542, "comment_id": 45747193, "body": "Why not just import the mixins when you call <code>with</code>?"}, {"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 0, "creation_date": 1424905790, "post_id": 28729542, "comment_id": 45749046, "body": "what happens when you want to use UNIVERSAL::AUTOLOAD for this and someone else wants to use it for something else?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 0, "creation_date": 1424907517, "post_id": 28729542, "comment_id": 45749735, "body": "@ysth, AUTOLOAD is namespaces other than UNIVERSAL should chain, and AUTOLOAD is UNIVERSAL should wrap. Unfortunately, I suspect very few do."}], "answers": [{"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 4, "creation_date": 1424901612, "post_id": 28729560, "comment_id": 45747165, "body": "When you create an <code>AUTOLOAD</code>, you also create a <code>can</code>. This is a bug in the OP&#39;s implementation, not a limitation."}], "tags": [], "owner": {"reputation": 61508, "user_id": 78259, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/844c572938eaad1e44eb084fb39416f9?s=128&d=identicon&r=PG", "display_name": "Chas. Owens", "link": "https://stackoverflow.com/users/78259/chas-owens"}, "is_accepted": false, "score": 0, "last_activity_date": 1424898343, "creation_date": 1424898343, "answer_id": 28729560, "question_id": 28729542, "link": "https://stackoverflow.com/questions/28729542/why-shouldnt-i-create-an-autoload-subroutine-in-the-universal-package/28729560#28729560", "title": "Why shouldn&#39;t I create an AUTOLOAD subroutine in the UNIVERSAL package?", "body": "<p>The only thing I can come up with is that UNIVERSAL::can won't work properly until the method is called for the first time.</p>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 3, "last_activity_date": 1424908447, "creation_date": 1424908447, "answer_id": 28732045, "question_id": 28729542, "link": "https://stackoverflow.com/questions/28729542/why-shouldnt-i-create-an-autoload-subroutine-in-the-universal-package/28732045#28732045", "title": "Why shouldn&#39;t I create an AUTOLOAD subroutine in the UNIVERSAL package?", "body": "<p>Problems:</p>\n\n<ul>\n<li>When you install an <code>AUTOLOAD</code>, you should create a corresponding <code>can</code>.</li>\n<li>Breaks any existing <code>UNIVERSAL::AUTOLOAD</code>.</li>\n<li>Adds a <code>with</code> to all classes.</li>\n<li>Broken by most other <code>AUTOLOAD</code>.</li>\n</ul>\n\n<p>Some are fixable, some are not. But it shows how complex and fragile this is. And it's completely needless. <code>with</code> could import the methods, or it could simply adds the classes to <code>@ISA</code>.</p>\n"}], "owner": {"reputation": 61508, "user_id": 78259, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/844c572938eaad1e44eb084fb39416f9?s=128&d=identicon&r=PG", "display_name": "Chas. Owens", "link": "https://stackoverflow.com/users/78259/chas-owens"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 124, "favorite_count": 1, "answer_count": 2, "score": 3, "last_activity_date": 1424908447, "creation_date": 1424898272, "question_id": 28729542, "link": "https://stackoverflow.com/questions/28729542/why-shouldnt-i-create-an-autoload-subroutine-in-the-universal-package", "title": "Why shouldn&#39;t I create an AUTOLOAD subroutine in the UNIVERSAL package?", "body": "<p>My gut says this is a really bad idea, but I can't pin down a specific problem with it.  What follows is a very primitive implementation of mixins/traits using an AUTOLOAD subroutine in the UNIVERSAL package.  In terms of <a href=\"http://xyproblem.info/\" rel=\"nofollow\">XY problem</a> answers, the right answer is to use <a href=\"http://search.cpan.org/dist/Moo/lib/Moo.pm\" rel=\"nofollow\">Moo</a>, but the person I am talking to doesn't want to use non-Core modules for some pointless reason and I want to convince them that this approach, while technically possible, is a bad idea, so I need technical reasons why this approach is a bad idea besides a queasy feeling.</p>\n\n<pre><code>#!/usr/bin/env perl\n\nuse strict;\nuse warnings;\nuse 5.010;\n\n{\n    package UNIVERSAL;\n\n    sub with {\n        my ($class, @mixins) = @_;\n\n        our %mixin_map;\n\n        push @{ $mixin_map{$class} }, @mixins;\n    }\n\n    sub AUTOLOAD {\n        our $AUTOLOAD;\n\n        # Never propagate DESTROY methods\n        return if ($AUTOLOAD =~ /::DESTROY$/);\n\n        my ($class, $method) = $AUTOLOAD =~ /(.*)::(.*)/;\n\n        my @mixins = do {\n            our %mixin_map;\n            @{ $mixin_map{$class} };\n        };\n        for my $mixin (@mixins) {\n            # find the mixin/trait that supports this method\n            if (my $sub = $mixin-&gt;can($method)) {\n                { #install the mixin's method in the class\n                    no strict \"refs\";\n                    *{ \"$class::$method\" } = $sub;\n                }\n                # call this class's method with the original arguments\n                return $class-&gt;can($method)-&gt;(@_);\n            }\n        }\n\n        use Carp;\n\n        Carp::croak(\"could not find a method $method for class $class\\nlooked in:\", join \", \", @mixins);\n\n    }\n}\n\n{\n    package T;\n\n\n    T-&gt;with(qw( Init Misc ));\n}\n\n{\n    package A;\n\n    A-&gt;with( qw/Init Helper/ );\n}\n\n{\n    package Init;\n\n    sub new {\n        my ($class, $hParams) = @_;\n\n        return bless {}, $class;\n    }\n}\n\n{\n    package Helper;\n\n    sub foo {\n        my ($self) = @_;\n        print \"foo here\\n\";\n    }\n}\n\n{\n    package Misc;\n\n    sub something {\n        my ($self) = @_;\n        print \"and more...\\n\";\n    }\n}\n\n{\n    package main;\n\n    my $t = T-&gt;new;\n\n    my $a = A-&gt;new;\n\n    $a-&gt;foo;\n    $t-&gt;something;\n\n    eval {\n        $t-&gt;foo;\n        1;\n    } or do {\n        print \"yay! calling foo on t failed\\n\";\n    };\n\n    eval {\n        $a-&gt;something;\n        1;\n    } or do {\n        print \"yay! calling somehting on a failed\\n\";\n    };\n}\n</code></pre>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 4191, "user_id": 1466640, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c0630f2d5ac5fb844675c58d3d2dfa57?s=128&d=identicon&r=PG&f=1", "display_name": "AKHolland", "link": "https://stackoverflow.com/users/1466640/akholland"}, "edited": false, "score": 1, "creation_date": 1424896283, "post_id": 28728559, "comment_id": 45744217, "body": "Can you post the code you&#39;re using? This works for me as root (prints &quot;bin&quot; then &quot;root&quot;): <code>perl -e &#39;$&gt; = 1; print qx(whoami); $&gt; = $&lt;; print qx(whoami)&#39;</code>"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 1, "creation_date": 1424900277, "post_id": 28728559, "comment_id": 45746485, "body": "You can&#39;t drop privileges and re-escalate them - that would be a security breach."}], "answers": [{"tags": [], "owner": {"reputation": 1090, "user_id": 905927, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/290786897f51fbd76a589169d2170607?s=128&d=identicon&r=PG", "display_name": "rouzier", "link": "https://stackoverflow.com/users/905927/rouzier"}, "is_accepted": false, "score": 2, "last_activity_date": 1424897104, "creation_date": 1424897104, "answer_id": 28729218, "question_id": 28728559, "link": "https://stackoverflow.com/questions/28728559/reset-effective-uid-to-root-fails/28729218#28729218", "title": "reset effective uid to root fails", "body": "<p>I would fork the process. change the user in the child process.</p>\n\n<pre><code>my $pid = fork;\ndie \"error with fork\" unless defined $pid;\nif ($pid) {\n    waitpid($pid);\n} else {\n    $&gt;=2;\n    eval {\n        print qx(whoami),\"\\n\";\n    };\n    exit();\n}\n</code></pre>\n"}], "owner": {"reputation": 985, "user_id": 3779941, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/45eb0270df1ce970602cd3636fa87d81?s=128&d=identicon&r=PG&f=1", "display_name": "AixNPanes", "link": "https://stackoverflow.com/users/3779941/aixnpanes"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 81, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1424897104, "creation_date": 1424894660, "question_id": 28728559, "link": "https://stackoverflow.com/questions/28728559/reset-effective-uid-to-root-fails", "title": "reset effective uid to root fails", "body": "<p>I have a linux perl program that runs as root. It runs some DBD::Pg code which cannot run as root but runs as another user with ident authentication. I can't use password authentication or anything similar.</p>\n\n<p>I switch to this other user using $>. The problem is that I need to return to root to continue processing. $>=$&lt; then fails when I try to return to an effective uid of root. I assume this is simply because the non-root user doesn't have the authority to switch to root.</p>\n\n<p>Can anyone suggest a reasonable alternative?</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1424893175, "post_id": 28726458, "comment_id": 45742456, "body": "<code>CGI</code> is deprecated, but not <i>that</i> big a disaster. The alternatives are less than user friendly for a &#39;quicky&#39; I find."}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1424896249, "post_id": 28726458, "comment_id": 45744192, "body": "Unless you configure it otherwise, your webserver treats <code>&#47;var&#47;log&#47;vista&#47;stcr2tsvr&#47;</code> as a path <i>relative to the webserver&#39;s document root.</i> If the document root is <code>&#47;var&#47;www&#47;html</code> (the default for Apache on *nix, for example), the webserver will look for a file in <code>&#47;var&#47;www&#47;html&#47;var&#47;log&#47;vista&#47;stcr2tsvr&#47;</code>."}, {"owner": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "reply_to_user": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1424898256, "post_id": 28726458, "comment_id": 45745321, "body": "@Sobrique You misunderstood my question. Why is CGI needed for <b>this</b> specific situation?"}, {"owner": {"reputation": 1, "user_id": 4606970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Fivlg.gif?s=128&g=1", "display_name": "vhaphisasset", "link": "https://stackoverflow.com/users/4606970/vhaphisasset"}, "reply_to_user": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "edited": false, "score": 0, "creation_date": 1424963219, "post_id": 28726458, "comment_id": 45774138, "body": "@Sinan &#220;n&#252;r. This is for intranet not internet.   !ThisSuitIsBlackNot THANKS!"}], "answers": [{"comments": [{"owner": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "edited": false, "score": 0, "creation_date": 1424965324, "post_id": 28745537, "comment_id": 45775531, "body": "There is a fundamental disconnect here: Why are you writing a CGI script to display the contents of a directory which you just made world browsable?! Also, keep in mind that <code>$</code> in a regex pattern also matches newlines."}, {"owner": {"reputation": 1, "user_id": 4606970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Fivlg.gif?s=128&g=1", "display_name": "vhaphisasset", "link": "https://stackoverflow.com/users/4606970/vhaphisasset"}, "reply_to_user": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "edited": false, "score": 0, "creation_date": 1424965574, "post_id": 28745537, "comment_id": 45775731, "body": "This is Intranet not internet. It is for a sysadmon portal I am putting together for work. I have 20 other scripts which set up a clean web interface which I also have hooks for monitors and alerts. This will never go to the WWW."}, {"owner": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "edited": false, "score": 0, "creation_date": 1424976936, "post_id": 28745537, "comment_id": 45782937, "body": "You keep saying that as if it is relevant. Given that you have made the directory browsable by anyone able to connect to the web server, why are you writing a CGI script to list its contents?! But, I give up."}, {"owner": {"reputation": 1, "user_id": 4606970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Fivlg.gif?s=128&g=1", "display_name": "vhaphisasset", "link": "https://stackoverflow.com/users/4606970/vhaphisasset"}, "reply_to_user": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "edited": false, "score": 0, "creation_date": 1424980775, "post_id": 28745537, "comment_id": 45785190, "body": "Admins need to view their backup logs via an easy web interface. That&#39;s why. Display the contents of the file and onclick view the file.(Might be ME not explaining properly). We are using CGI,perl and bash scripts. It is relevant that this can only be accessed by internal staff only. Our environment is closely monitored and we all have high security clearance so no one is hacking their own servers. You can not get to these servers from the outside as they are not networked that way(NO OUTSIDE CONTACT). If that does not answer your question then I give up..."}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 2, "creation_date": 1424981359, "post_id": 28745537, "comment_id": 45785548, "body": "You could also drop the CGI script and just use Apache&#39;s built-in <a href=\"http://httpd.apache.org/docs/current/mod/mod_dir.html\" rel=\"nofollow noreferrer\">directory indexing</a> directly. That would be simpler and less error-prone, but wouldn&#39;t allow you to filter out non <code>.log</code> files, for example. I think that&#39;s at least part of what Sinan &#220;n&#252;r is hinting at."}, {"owner": {"reputation": 1, "user_id": 4606970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Fivlg.gif?s=128&g=1", "display_name": "vhaphisasset", "link": "https://stackoverflow.com/users/4606970/vhaphisasset"}, "reply_to_user": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1425498149, "post_id": 28745537, "comment_id": 45991988, "body": "Thanks @ThisSuitIsBlackNot. looking into that now."}], "tags": [], "owner": {"reputation": 1, "user_id": 4606970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Fivlg.gif?s=128&g=1", "display_name": "vhaphisasset", "link": "https://stackoverflow.com/users/4606970/vhaphisasset"}, "is_accepted": false, "score": -1, "last_activity_date": 1424962391, "creation_date": 1424962391, "answer_id": 28745537, "question_id": 28726458, "link": "https://stackoverflow.com/questions/28726458/perl-display-files-in-dir-link-and-display-in-browser/28745537#28745537", "title": "Perl Display files in DIR, Link and display in browser", "body": "<p>Good to Go! I added the following to the httpd.conf:</p>\n\n<pre><code>Alias /logs/ \"/var/log/vista/stcr2tsvr/\"\n\n&lt;Directory \"/var/log/vista/stcr2tsvr/\"&gt;\nOptions Indexes MultiViews FollowSymLinks\nAllowOverride None\nOrder allow,deny\nAllow from all\n&lt;/Directory&gt;\n</code></pre>\n\n<p>and changed the code to reflect the alias</p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse CGI;\n\nmy $list = new CGI;\nmy $fileDir = \"/var/log/vista/stcr2tsvr/\";\nmy $alias = \"/logs/\";\nmy @files;\n\nprint $fileDir;\n\nopendir DIR, \"$fileDir\";\n\n@files = grep(/\\.log$/,readdir(DIR)); ## Example file to read 2015\n+0210-dubr3psvr-backup.log\n\nclosedir DIR;\n\nprint $list-&gt;header(\"text/html\"),\n  $list-&gt;start_html(\"Files in $fileDir\"),\n  $list-&gt;p(\"These are the files in $fileDir\");\n\nforeach my $file (@files) {\nprint $list-&gt;p(\n        $list-&gt;a({-href=&gt;$alias.$file},\n        $file)\n        );\n}\n\nprint $list-&gt;end_html;\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 4606970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Fivlg.gif?s=128&g=1", "display_name": "vhaphisasset", "link": "https://stackoverflow.com/users/4606970/vhaphisasset"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 284, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1424962391, "creation_date": 1424887686, "question_id": 28726458, "link": "https://stackoverflow.com/questions/28726458/perl-display-files-in-dir-link-and-display-in-browser", "title": "Perl Display files in DIR, Link and display in browser", "body": "<p>I have been searching the web and trying different variations of code so that the end user via a web interface can see all of the server backup logs and select anyone of them to read the log in a browser. I am working on a test system which is RHEL 6. There is the dir \"/var/log/vista/stcr2tsvr/\" where the backup logs are stored and it has files in it. I have even chmod 755 all of the dirs. and files (Just for testing)When I call the script from a browser I get the files I want displayed as hyperlinks. There was an issue where I would click on the link but perl was looking in the cgi-bin DIR so I forced it to look in \"/var/log/vista/stcr2tsvr/\" </p>\n\n<pre><code>    $list-&gt;a({-href=&gt;\"/var/log/vista/stcr2tsvr/$file\"}),\n</code></pre>\n\n<p>which is cleaner by doing:</p>\n\n<pre><code>    $list-&gt;a({-href=&gt;$fileDir.$file}),    \n</code></pre>\n\n<p>where this used to be like this </p>\n\n<pre><code>    $list-&gt;a({-href=&gt;$file}), \n</code></pre>\n\n<p>but as I stated would look in cgi-bin and not the log DIR.</p>\n\n<p>So now the hyperlink is referencing the correct DIR and file but when click I still get file not found even though the file is there. Any help would be great! Out of ideas :(</p>\n\n<pre><code>    #!/usr/bin/perl\n\n    use strict;\n    use CGI;\n    use warnings;\n\n    my $list = new CGI;\n    my $fileDir = '/var/log/vista/stcr2tsvr/';\n    my @files;\n\n    print $fileDir;\n\n\n    opendir DIR, \"$fileDir\";\n    @files = grep(/\\.log$/,readdir(DIR)); \n\n\n    closedir DIR;\n\n    print $list-&gt;header(\"text/html\"),\n    $list-&gt;start_html(\"Files in $fileDir\"),\n    $list-&gt;p(\"These are the files in $fileDir\");\n\n    foreach my $file (@files) {\n    print $list-&gt;p(\n    $list-&gt;a({-href=&gt;$fileDir.$file}),\n    $file)\n\n    }\n\n    print $list-&gt;end_html;\n</code></pre>\n"}, {"tags": ["html", "image", "perl", "url", "embperl"], "comments": [{"owner": {"reputation": 649, "user_id": 2355364, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/76fa2e7ac8c45ed7b23ba36175d96d81?s=128&d=identicon&r=PG&f=1", "display_name": "Iluvatar14", "link": "https://stackoverflow.com/users/2355364/iluvatar14"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1424887629, "post_id": 28725617, "comment_id": 45739324, "body": "I added some code, but I didn&#39;t think that would help here."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 1, "creation_date": 1424892873, "post_id": 28725617, "comment_id": 45742251, "body": "There&#39;s a bit of an art to asking a good question. You need to supply sufficient information that someone else can figure out what you mean, look at places where it might be going wrong and suggest solutions. The less information you give, the more reliant you are on someone hitting <i>exactly the same</i> problem, and knowing what they did to fix it. That&#39;s why is <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a> is there - to give guidance on how to get the best response. People on SO <i>like</i> questions they can answer - they wouldn&#39;t be here otherwise."}], "answers": [{"comments": [{"owner": {"reputation": 4111, "user_id": 23033, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a6b6c69cae4d2061cafe851676f8d262?s=128&d=identicon&r=PG", "display_name": "Dre", "link": "https://stackoverflow.com/users/23033/dre"}, "edited": false, "score": 0, "creation_date": 1424900373, "post_id": 28727603, "comment_id": 45746537, "body": "Not criticizing your answer, but is there no better way to do that?  That looks subpar and messy. Of course, I would not be surprised to believe that is the &quot;Embperl authorized&quot; way."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 4111, "user_id": 23033, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a6b6c69cae4d2061cafe851676f8d262?s=128&d=identicon&r=PG", "display_name": "Dre", "link": "https://stackoverflow.com/users/23033/dre"}, "edited": false, "score": 1, "creation_date": 1424901033, "post_id": 28727603, "comment_id": 45746860, "body": "I intentionally picked the more complex solution just in case you asked me to simplify it!"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 4111, "user_id": 23033, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a6b6c69cae4d2061cafe851676f8d262?s=128&d=identicon&r=PG", "display_name": "Dre", "link": "https://stackoverflow.com/users/23033/dre"}, "edited": false, "score": 1, "creation_date": 1424901087, "post_id": 28727603, "comment_id": 45746894, "body": "If you don&#39;t build any urls like <code>&lt;img src=&quot;https:&#47;&#47;foo.com&#47;useravatar?size=small&amp;amp;id=[+ $avatar_id +]&quot;&gt;</code>, you can set it globally instead of locally (e.g. <code>[- $escmode = 1 -]</code>."}, {"owner": {"reputation": 4111, "user_id": 23033, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a6b6c69cae4d2061cafe851676f8d262?s=128&d=identicon&r=PG", "display_name": "Dre", "link": "https://stackoverflow.com/users/23033/dre"}, "edited": false, "score": 0, "creation_date": 1424901737, "post_id": 28727603, "comment_id": 45747222, "body": "Am not the original question asker, just saw this as a driveby."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 4, "last_activity_date": 1424891738, "last_edit_date": 1424891738, "creation_date": 1424891421, "answer_id": 28727603, "question_id": 28725617, "link": "https://stackoverflow.com/questions/28725617/img-source-is-a-variable-the-url-gets-encoded/28727603#28727603", "title": "Img source is a variable, the URL gets encoded", "body": "<p>The escaping you noticed is designed to handle</p>\n\n<pre><code>&lt;img src=\"https://foo.com/useravatar?size=small&amp;amp;id=[+ $avatar_id +]\"&gt;\n</code></pre>\n\n<p>You can change the escaping mode. Use</p>\n\n<pre><code>&lt;img src=\"[+ do { local $escmode = 1; $issue-&gt;{avatar}{url} } +]\"&gt;\n</code></pre>\n\n<p>to produce</p>\n\n<pre><code>&lt;img src=\"https://foo.com/useravatar?size=small&amp;amp;id=11111\"&gt;\n</code></pre>\n\n<p>to fetch the image at URL</p>\n\n<pre><code>https://foo.com/useravatar?size=small&amp;id=11111\n</code></pre>\n\n<p>Test:</p>\n\n<pre><code>use strict;\nuse warnings;\n\nuse Embperl qw( );\n\nour $issue = {\n   avatar =&gt; {\n      url =&gt; 'https://foo.com/useravatar?size=small&amp;id=11111',\n   },\n};\n\nmy $template = &lt;&lt;'__EOI__';\n&lt;img src=\"[+ $issue-&gt;{avatar}{url} +]\"&gt;\n&lt;img src=\"[+ do { local $escmode = 1; $issue-&gt;{avatar}{url} } +]\"&gt;\n__EOI__\n\nEmbperl::Execute({\n   input   =&gt; \\$template,\n   package =&gt; __PACKAGE__,\n});\n</code></pre>\n"}], "owner": {"reputation": 649, "user_id": 2355364, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/76fa2e7ac8c45ed7b23ba36175d96d81?s=128&d=identicon&r=PG&f=1", "display_name": "Iluvatar14", "link": "https://stackoverflow.com/users/2355364/iluvatar14"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 59, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1424891738, "creation_date": 1424885175, "last_edit_date": 1424891671, "question_id": 28725617, "link": "https://stackoverflow.com/questions/28725617/img-source-is-a-variable-the-url-gets-encoded", "title": "Img source is a variable, the URL gets encoded", "body": "<p>I have a multi-level hash in which I have a user's avatar's URL.</p>\n\n<p>I am trying to make a cell with \"Jane Doe <em>image</em>\" but when the code runs the URL is getting changed. When I interpolate it into an Embperl template,</p>\n\n<pre><code>https://foo.com/useravatar?size=small&amp;id=11111\n</code></pre>\n\n<p>turns into</p>\n\n<pre><code>https://foo.com/useravatar%3Fsize%3Dsmall%26id%3D11111\n</code></pre>\n\n<p>As you can see, the special characters become encoded and so the image is not found. How do you get around this? </p>\n\n<pre><code>use strict;\nuse warnings;\n\nuse Embperl qw( );\n\nour $issue = {\n   avatar =&gt; {\n      url =&gt; 'https://foo.com/useravatar?size=small&amp;id=11111',\n   },\n};\n\nmy $template = &lt;&lt;'__EOI__';\n[+ $issue-&gt;{avatar}{url} +]\n&lt;img src=\"[+ $issue-&gt;{avatar}{url} +]\"&gt;\n__EOI__\n\nEmbperl::Execute({\n   input   =&gt; \\$template,\n   package =&gt; __PACKAGE__,\n});\n</code></pre>\n\n<p>This produces:</p>\n\n<pre><code>https://foo.com/useravatar?size=small&amp;amp;id=11111\n&lt;img src=\"https://foo.com/useravatar%3Fsize%3Dsmall%26id%3D11111\"&gt;\n</code></pre>\n\n<p>When the URL is inserted outside of the <code>src</code> attribute, it's correctly escaped. But when it's inserted inside of the <code>src</code> attribute, it gets mangled.</p>\n"}, {"tags": ["regex", "perl", "awk", "sed", "grep"], "comments": [{"owner": {"reputation": 9060, "user_id": 1669475, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e32c9e417e96b6371c06d97133bd77f7?s=128&d=identicon&r=PG", "display_name": "gandaliter", "link": "https://stackoverflow.com/users/1669475/gandaliter"}, "edited": false, "score": 4, "creation_date": 1424883248, "post_id": 28724808, "comment_id": 45736345, "body": "This can be done with regex-based tools, but it might be better to parse it as XML and extract information that way"}], "answers": [{"comments": [{"owner": {"reputation": 91, "user_id": 2845124, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/737e49099fcce77affc9008b6dac3fad?s=128&d=identicon&r=PG&f=1", "display_name": "srinath", "link": "https://stackoverflow.com/users/2845124/srinath"}, "edited": false, "score": 0, "creation_date": 1425057552, "post_id": 28724954, "comment_id": 45819914, "body": "Hi Wintermute, i tried xmlstarlet and xmllint...its not working. It is saying failed to load external entity"}, {"owner": {"reputation": 39446, "user_id": 4301306, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a1461d0104809c90e2a252a2d4b0ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Wintermute", "link": "https://stackoverflow.com/users/4301306/wintermute"}, "reply_to_user": {"reputation": 91, "user_id": 2845124, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/737e49099fcce77affc9008b6dac3fad?s=128&d=identicon&r=PG&f=1", "display_name": "srinath", "link": "https://stackoverflow.com/users/2845124/srinath"}, "edited": false, "score": 0, "creation_date": 1425058050, "post_id": 28724954, "comment_id": 45820223, "body": "Worked for me. Is your XML valid?"}], "tags": [], "owner": {"reputation": 39446, "user_id": 4301306, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a1461d0104809c90e2a252a2d4b0ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Wintermute", "link": "https://stackoverflow.com/users/4301306/wintermute"}, "is_accepted": false, "score": 0, "last_activity_date": 1424883799, "last_edit_date": 1424883799, "creation_date": 1424883408, "answer_id": 28724954, "question_id": 28724808, "link": "https://stackoverflow.com/questions/28724808/grep-text-between-two-tags-using-perl-sed-awk/28724954#28724954", "title": "grep text between two tags using perl/sed/awk", "body": "<p>Use a proper XML-parsing tool like <code>xmlstarlet</code> for this:</p>\n\n<pre><code>xmlstarlet sel -t -c '//TableName[@modified=\"1\" and @type=\"string\"]' -v . filename.xml\n</code></pre>\n\n<p>Or <code>xmllint</code>:</p>\n\n<pre><code>xmllint --nocdata --xpath '//TableName[@modified=\"1\" and @type=\"string\"]/node()' filename.xml\n</code></pre>\n\n<p>Using a line-based tool like sed for this would result in something that would break when the format of the XML changes in benign ways (such as inserting newlines or shuffling/adding new attributes), which nobody expects.</p>\n"}], "owner": {"reputation": 91, "user_id": 2845124, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/737e49099fcce77affc9008b6dac3fad?s=128&d=identicon&r=PG&f=1", "display_name": "srinath", "link": "https://stackoverflow.com/users/2845124/srinath"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 189, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1424883799, "creation_date": 1424883054, "last_edit_date": 1424883238, "question_id": 28724808, "link": "https://stackoverflow.com/questions/28724808/grep-text-between-two-tags-using-perl-sed-awk", "title": "grep text between two tags using perl/sed/awk", "body": "<p>Could you please tell me how to get the text between two tags in a file. In my file there are so many tags. Below line is extracted in a file. i need to get ACTIONSUM as output. a text between <code>&lt;TableName modified='1' type='string'&gt; and &lt;/TableName&gt; tags</code>. </p>\n\n<p>Input:</p>\n\n<p><code>&lt;/WriteMode&gt;&lt;TableName modified='1' type='string'&gt;&lt;![CDATA[ACTIONSUM]]&gt;&lt;/TableName&gt;&lt;EnableCaseSensitiveIDs type='bol'&gt;</code></p>\n\n<p>Ouput:</p>\n\n<p><code>ACTIONSUM</code></p>\n\n<p>Please suggest the command or script to grep it. </p>\n\n<p>Thanks in advance.</p>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 52334, "user_id": 702638, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/892f65bc0a8a0949ab88598de7d83cab?s=128&d=identicon&r=PG", "display_name": "Hunter McMillen", "link": "https://stackoverflow.com/users/702638/hunter-mcmillen"}, "edited": false, "score": 1, "creation_date": 1424880619, "post_id": 28723875, "comment_id": 45734466, "body": "Seeing your regex would be useful."}], "answers": [{"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 2, "creation_date": 1424881867, "post_id": 28724113, "comment_id": 45735407, "body": "(Net::Telnet should have accepted a regex pattern rather than a match operator!)"}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 5, "last_activity_date": 1424904157, "last_edit_date": 1424904157, "creation_date": 1424881185, "answer_id": 28724113, "question_id": 28723875, "link": "https://stackoverflow.com/questions/28723875/why-do-i-get-the-error-unmatched-in-regex-when-trying-to-match-something-wit/28724113#28724113", "title": "Why do I get the error &quot;Unmatched ( in regex&quot; when trying to match something with Net::Telnet?", "body": "<p>You are providing the following regex match operator:</p>\n\n<pre><code>/^s+ Save settings:([Y]/   (followed by junk)\n</code></pre>\n\n<hr>\n\n<p>If you want to match the following string:</p>\n\n<pre><code>Save settings:([Y]/[N]):\n</code></pre>\n\n<p>You want the following regex pattern:</p>\n\n<pre><code>^\\s*Save settings:\\(\\[Y\\]/\\[N\\]\\):\n</code></pre>\n\n<p>But <code>waitfor</code> wants a string containing a match operator. The following is the desired match operator:</p>\n\n<pre><code>/^\\s*Save settings:\\(\\[Y\\]\\/\\[N\\]\\):/\n</code></pre>\n\n<p>And the following is a string literal to that creates that string:</p>\n\n<pre><code>\"/^\\\\s*Save settings:\\\\(\\\\[Y\\\\]\\\\/\\\\[N\\\\]\\\\):/\"\n</code></pre>\n\n<p>So:</p>\n\n<pre><code>waitfor(\"/^\\\\s*Save settings:\\\\(\\\\[Y\\\\]\\\\/\\\\[N\\\\]\\\\):/\")\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user4546748"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 486, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1424904157, "creation_date": 1424880583, "last_edit_date": 1424881780, "question_id": 28723875, "link": "https://stackoverflow.com/questions/28723875/why-do-i-get-the-error-unmatched-in-regex-when-trying-to-match-something-wit", "title": "Why do I get the error &quot;Unmatched ( in regex&quot; when trying to match something with Net::Telnet?", "body": "<p>I'm attempting to match the string</p>\n\n<pre><code>Save settings:([Y]/[N]):\n</code></pre>\n\n<p>that the telnet client returns after issuing</p>\n\n<pre><code>print(\"exit\")\n</code></pre>\n\n<p>(I'm using <code>Net::Telnet</code>.)</p>\n\n<p>I have tried several regexes, including this one:</p>\n\n<pre><code>waitfor(\u201c/^\\s+ Save settings:([Y]/[N]):\\s$/\u201d\n</code></pre>\n\n<p>but I continue to receive the error:</p>\n\n<pre><code>bad match operator: Unmatched ( in regex; marked by &lt;-- HERE in m/\\s+Save settings?( &lt;-- HERE [Y]/ &lt;$data&gt; line 1. at printer_config_test.pl line 36\n</code></pre>\n\n<p>How can I fix this?</p>\n"}, {"tags": ["perl", "email", "smtp"], "comments": [{"owner": {"reputation": 5296, "user_id": 418066, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/38yuw.png?s=128&g=1", "display_name": "Biffen", "link": "https://stackoverflow.com/users/418066/biffen"}, "edited": false, "score": 5, "creation_date": 1424877776, "post_id": 28722675, "comment_id": 45732190, "body": "<i>Always</i> <code>use strict; use warnings;</code>!"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 1, "creation_date": 1424879081, "post_id": 28722675, "comment_id": 45733218, "body": "Also: 3 arg lexical opens are much safer."}, {"owner": {"reputation": 4191, "user_id": 1466640, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c0630f2d5ac5fb844675c58d3d2dfa57?s=128&d=identicon&r=PG&f=1", "display_name": "AKHolland", "link": "https://stackoverflow.com/users/1466640/akholland"}, "edited": false, "score": 3, "creation_date": 1424879814, "post_id": 28722675, "comment_id": 45733836, "body": "This is a really old way to send email. Have you looked at <a href=\"http://search.cpan.org/dist/Email-Sender/lib/Email/Sender/Manual/QuickStart.pm\" rel=\"nofollow noreferrer\">Email::Sender</a>?"}, {"owner": {"reputation": 95, "user_id": 3053127, "user_type": "registered", "accept_rate": 83, "profile_image": "https://graph.facebook.com/197900325/picture?type=large", "display_name": "markusmayhem", "link": "https://stackoverflow.com/users/3053127/markusmayhem"}, "edited": false, "score": 0, "creation_date": 1424880014, "post_id": 28722675, "comment_id": 45734020, "body": "I appreciate the recommendations. Unfortunately, this script was provided by the folks at Snap Surveys. It is supposed to be as simple as changing the variable info, uploading to the host, and referencing it. My main issue is the refused connection to the SMTP server. I have contacted them but they do not offer any support other than pointing me to here: <a href=\"http://www.snapsurveys.com/help/#19519\" rel=\"nofollow noreferrer\">http://www.snapsurveys.com/help/#19519</a>"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 3, "creation_date": 1424883876, "post_id": 28722675, "comment_id": 45736758, "body": "If someone gave me that Perl code to install and run, that would be a huge red flag for me. How much do you want to deal with these people? I&#39;d be looking for alternative providers."}, {"owner": {"reputation": 1671, "user_id": 4600983, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/37d236a59e7d7e6871716bc25752dae6?s=128&d=identicon&r=PG&f=1", "display_name": "svsd", "link": "https://stackoverflow.com/users/4600983/svsd"}, "edited": false, "score": 0, "creation_date": 1424885185, "post_id": 28722675, "comment_id": 45737610, "body": "Have you verified that your SMTP server is accessible from the host? It is possible that outgoing connections to port 25 have been disallowed. You verify it by trying this on the host: nc -vvv YOUR_SMTP_SERVER 25"}, {"owner": {"reputation": 95, "user_id": 3053127, "user_type": "registered", "accept_rate": 83, "profile_image": "https://graph.facebook.com/197900325/picture?type=large", "display_name": "markusmayhem", "link": "https://stackoverflow.com/users/3053127/markusmayhem"}, "edited": false, "score": 0, "creation_date": 1424899703, "post_id": 28722675, "comment_id": 45746103, "body": "It turns out that GoDaddy disallows the use of Sockets: <a href=\"https://support.godaddy.com/help/article/20/does-your-cgi-service-support-socket-connections-or-socket-modules\" rel=\"nofollow noreferrer\">https://support.godaddy.com/help/article/20/does-your-cgi-se&zwnj;&#8203;rvice-support-socket&zwnj;&#8203;-connections-or-sock&zwnj;&#8203;et-modules</a>. I had to modify the script to use the newer Email::Sender instead. I&#39;m waiting on a reply from GoDaddy in regards to the Simple.pm Perl module because for some reason my script is unable to locate it on their end."}], "owner": {"reputation": 95, "user_id": 3053127, "user_type": "registered", "accept_rate": 83, "profile_image": "https://graph.facebook.com/197900325/picture?type=large", "display_name": "markusmayhem", "link": "https://stackoverflow.com/users/3053127/markusmayhem"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 201, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1424877505, "creation_date": 1424877505, "question_id": 28722675, "link": "https://stackoverflow.com/questions/28722675/perl-script-connect-issues-snap-surveys", "title": "Perl script connect issues (Snap Surveys)", "body": "<p>I am currently running this script on my host and attempting to connect to my own SMTP server to send the results of the survey after it is submitted.</p>\n\n<p>However, I am receiving a 500 Internal Server Error when running this Perl script. The script is located on GoDaddy servers and attempting to connect to my mail server.</p>\n\n<p>Here is the code:</p>\n\n<pre><code>#!/usr/bin/perl\n\n#First released with snap 10\n\n$port = 25; #SMTP PORT NUMBER\n$smtpServer = 'SMTP_SERVER';\n$domain = 'DOMAIN';\n$sWebMaster='WEBMASTER';\n$sReturnURL='http://alliancesurveys.org';\n$sReturnText='Back to surveys';\n\nuse Socket;\nuse URI::Escape;\n\n$SIG{'INT'} = 'dokill';\nsub dokill {\n    kill 9,$child if $child;\n}\n\n($name,$aliases,$proto) = getprotobyname('tcp');\n($name,$aliases,$port) = getservbyname($port,'tcp')\n    unless $port =~ /^\\d+$/;;\n($name,$aliases,$type,$len,$thataddr) = gethostbyname($smtpServer); #get host records from server\n\nmy $iaddr = inet_aton($smtpServer);  \n$that = sockaddr_in($port, $iaddr);\n\nread(STDIN , $buffer , $ENV{'CONTENT_LENGTH'}); \n@pairs = split(/&amp;/ , $buffer); \nforeach $pair (@pairs)\n{\n    ($name,  $value) = split(/=/, $pair);\n    $value =~ tr/+/ /;              #Translate + to &lt;space&gt;\n    $value =~ s/%0D/ /g;\n    $value =~ s/%0A/ /g;\n    $value =~ s/%([a-fA-F0-9][a-fA-F0-9])/pack(\"C\", hex($1))/eg;    #Convert Hex values\n    $value =~ s/~!/ ~!/g;\n    $name =~ s/%([a-fA-F0-9][a-fA-F0-9])/pack(\"C\", hex($1))/eg; #Do the same for the names\n    $name =~ s/~!/ ~!/g;\n    $FORM{$name} .= ';' if (defined($FORM{$name})); #Seperate multi values with ;\n    $FORM{$name} .= $value;             #Add the value to the control name key\n}\n\nif($FORM{':COOKIE:'})\n{\n    if($ENV{'HTTP_COOKIE'} =~ /\\QSURVEY=$FORM{':SURVEY:'}/)   {\n        print \"Content-type:text/html\\n\\n\";\n            print \"\\n\\n\";\n        print \"&lt;HTML&gt;\\n\";\n        print \"&lt;HEAD&gt;&lt;TITLE&gt;Data Received&lt;/TITLE&gt;&lt;/HEAD&gt;\\n\";\n            print \"&lt;BODY BGCOLOR=\\\"#FFFFFF\\\"&gt;\\n\";\n        print \"&lt;FONT FACE=ARIAL&gt;\\n\";\n            print \"&lt;CENTER&gt;&lt;H2&gt;Repeat Submission&lt;/H2&gt;\\n\";\n            print \"&lt;P&gt;You have already submitted data to this survey.Only one submission is allowed.\\n\";\n        print \"&lt;P&gt;&lt;a href=\\\"$sReturnURL\\\"&gt;$sReturnText&lt;/a&gt;\\n\";\n        print \"&lt;/CENTER&gt;\\n\";\n        print \"&lt;/FONT&gt;&lt;/BODY&gt;&lt;/HTML&gt;\\n\";\n            exit;\n    }\n}\n$recipient = $FORM{':EMAIL:'};              #Get address from hidden Email control\n#Check for malicous use of recipient\nif ($recipient =~ /&gt;|&lt;|;|\\\\|\\// ) {\n#Change this message to change the page returned when the email address cannot be used\n    print \"Content-type:text/html\\n\\n\";\n    print \"\\n\\n\";\n        print \"&lt;HEAD&gt;&lt;TITLE&gt;Invalid Email Address&lt;/TITLE&gt;&lt;/HEAD&gt;\\n\";\n        print \"&lt;BODY BGCOLOR=\\\"#FFFFFF\\\"&gt;\\n\";\n        print \"&lt;CENTER&gt;&lt;H2&gt;The system is unable to process the&lt;/H2&gt;&lt;BR&gt;&lt;BR&gt;\\n\";\n    print \"&lt;CENTER&gt;&lt;H2&gt;email address in this form.&lt;/H2&gt;&lt;BR&gt;&lt;BR&gt;\\n\";\n        print \"Please report this error to $sWebMaster.&lt;/center&gt;\\n\";\n        print \"&lt;/BODY&gt;\\n\";\n        exit;\n}\n\nif($FORM{':RECEIPT:'})\n{\n    $theQ = $FORM{':RECEIPT:'};\n    $sender = $FORM{$theQ};             #Get address from hidden Email control\n    #Check for malicous use of sender email\n    if(length($sender)==0)\n    {\n        print \"\\n\\n\";\n            #print \"Content-type:text/html\\n\\n\";\n            print \"&lt;HEAD&gt;&lt;TITLE&gt;No Email Address&lt;/TITLE&gt;&lt;/HEAD&gt;\\n\";\n            print \"&lt;BODY BGCOLOR=\\\"#FFFFFF\\\" TEXT=\\\"#000000\\\" LINK=\\\"#0000ff\\\" VLINK=\\\"0000ff\\\"&gt;\\n\";\n        if($FORM{':RECEIPTLBL:'})\n        {\n            print \"&lt;CENTER&gt;&lt;H2&gt;You have not given a contact email in $FORM{':RECEIPTLBL:'}.&lt;/H2&gt;&lt;BR&gt;&lt;BR&gt;\\n\";\n        }\n        else\n        {\n                print \"&lt;CENTER&gt;&lt;H2&gt;You have not given a contact email.&lt;/H2&gt;&lt;BR&gt;&lt;BR&gt;\\n\";\n        }\n        print \"&lt;CENTER&gt;&lt;H2&gt;The address must be given so a receipt can be sent&lt;/H2&gt;&lt;BR&gt;&lt;BR&gt;\\n\";\n            print \"Please use the back button on your browser to return to the questionnaire and enter an address.&lt;/center&gt;\\n\";\n            print \"&lt;/BODY&gt;\\n\";\n            exit;\n    }\n}\n\nif (!socket(S, PF_INET, SOCK_STREAM, $proto)) {\n    die $!;\n}\n\nif (!connect(S,$that)) {\n    die $!;\n}\n\nselect (S);\n$|=1;               # flush\nselect (STDOUT);\n$|=1;               # flush\n\n#set up ESMTP session here\n$stat = &lt;S&gt;;\ndie(\"500 fatal: bad message on connect: $stat\") if ($stat !~ /^2/);\nprint S \"HELO $domain\\r\\n\";\n$stat = &lt;S&gt;;\ndie(\"500 fatal: bad message on HELO: $stat\") if ($stat !~ /^2/);\nprint S \"MAIL FROM:&lt;surveyScript\\@$domain&gt;\\r\\n\";\n$stat = &lt;S&gt;;\ndie(\"500 fatal: bad message on MAIL FROM: $stat\") if ($stat !~ /^2/);\nprint S \"RCPT TO:&lt;$FORM{':EMAIL:'}&gt;\";\nprint S \"\\r\\n\";\n$stat = &lt;S&gt;;\ndie(\"500 fatal: bad message on RCPT TO: $stat\") if ($stat !~ /^2/);\nprint S \"DATA\\r\\n\";\n$stat= &lt;S&gt;;\nprint S \"To: $FORM{':EMAIL:'} \\n\";\n\nprint S\"Subject: Internet submission of $FORM{':SURVEY:'} data\\n\\n\";\n\nprint S \"***START SURVEY DATA***\\n\";\nmy $doEscape = $FORM{':MSGENCODE:'} ? 1 : 0;\nif ($doEscape)\n{\n    $FORM{':MSGENCODE:'} = \"2\";\n}\nforeach $key (keys(%FORM))\n{\n    if ($key !~ /^:OKPAGE:$/)\n    {\n        my $val = $FORM{$key};\n        if ($doEscape)\n        {\n            $val = uri_escape($val, \"^A-Za-z0-9\\-_.!~*'()\\x20@\");\n        }\n        print S \"$key=$val\\n\";\n    }\n}\nprint S \"***END SURVEY DATA***\\n\";\nprint S \"\\r\\n.\\r\\n\";\n$stat= &lt;S&gt;;\ndie(\"500 fatal: bad message on DATA END: $stat\") if ($stat !~ /^2/);\nprint S \"QUIT\\r\\n\";\n#close socket here\nclose(S);\n\nif($FORM{':COOKIE:'})\n{\n    print \"Set-Cookie: SURVEY=$FORM{':SURVEY:'} ; expires=$FORM{':COOKIE:'}\\n\";\n}\nif($FORM{':OKPAGE:'})\n{\n    print \"Location: $FORM{':OKPAGE:'}\\n\\n\";\n}else{\n    print \"Content-type:text/html\\n\\n\";\n    print \"&lt;HEAD&gt;&lt;TITLE&gt;Thank-you&lt;/TITLE&gt;&lt;/HEAD&gt;\\n\";\n    print \"&lt;BODY BGCOLOR=\\\"#FFFFFF\\\"&gt;\\n\";\n    print \"&lt;center&gt;\\n\";\n    print \"&lt;h2&gt;Thank You&lt;/h2&gt;\\n\";\n    print \"Thank you for taking the time to answer this survey.&lt;p&gt;\\n\";\n    print \"Your response has been submitted succesfully to $FORM{':EMAIL:'}.&lt;p&gt;\\n\";\n    print \"&lt;a href=\\\"$sReturnURL\\\"&gt;$sReturnText&lt;/a&gt;&lt;/center&gt;\\n\";\n    print \"&lt;/body&gt;\\n\";\n}\n</code></pre>\n\n<p>The error log shows \"AH01215: Connection refused at Subques.pl\" and refers to this line:</p>\n\n<pre><code>if (!connect(S,$that)) {\n    die $!;\n}\n</code></pre>\n\n<p>As far as I can tell, my SMTP server and port are accessible, it just refuses the connection. What might be the problem? Do I somehow need to authenticate while making the connection? I'm assuming (and could be wrong) that it could be an issue with my server. Any help/suggestions would be greatly appreciated!</p>\n"}, {"tags": ["perl", "xampp", "cgi"], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 4291114, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c92218c2571923a72c644f6f93ad712?s=128&d=identicon&r=PG&f=1", "display_name": "Callum Curry", "link": "https://stackoverflow.com/users/4291114/callum-curry"}, "edited": false, "score": 0, "creation_date": 1424874740, "post_id": 28721618, "comment_id": 45729927, "body": "Thankyou, very much, I know i tried something like that, not sure what i was missing"}, {"owner": {"reputation": 12075, "user_id": 1137055, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/59d7b43b9eb7d01bd8f7e51febe6053c?s=128&d=identicon&r=PG", "display_name": "dgw", "link": "https://stackoverflow.com/users/1137055/dgw"}, "edited": false, "score": 3, "creation_date": 1424875071, "post_id": 28721618, "comment_id": 45730171, "body": "Don&#39;t quote strings for db statements yourself. Better use prepared statements and provide the variables to the statement handlers."}, {"owner": {"reputation": 61610, "user_id": 725418, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/82ac2dc3e1ad4b7187f245c416528df9?s=128&d=identicon&r=PG", "display_name": "TLP", "link": "https://stackoverflow.com/users/725418/tlp"}, "edited": false, "score": 3, "creation_date": 1424875109, "post_id": 28721618, "comment_id": 45730201, "body": "This is horrible on so many levels. Why not use <code>prepare</code> and <code>execute</code> over <code>do</code>? It allows you to use placeholders and avoid interpolation, preventing sql-injection attacks. Also, you don&#39;t have to break up the string and use the concatenation operator <code>.</code> to interpolate scalar variables, you just put them in: <code>VALUES (&#39;$enter&#39;, ...</code> (but dont do that here, like I said)."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 61610, "user_id": 725418, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/82ac2dc3e1ad4b7187f245c416528df9?s=128&d=identicon&r=PG", "display_name": "TLP", "link": "https://stackoverflow.com/users/725418/tlp"}, "edited": false, "score": 1, "creation_date": 1424880072, "post_id": 28721618, "comment_id": 45734066, "body": "@TLP, Re &quot;Why not use <code>prepare</code> and <code>execute</code> over <code>do</code>?&quot;, Needlessly wordy. Re &quot; It allows you to use placeholders&quot;, Same with <code>do</code>."}], "tags": [], "owner": {"reputation": 475, "user_id": 3964482, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c10105dd27ad296ccf48668fa195b085?s=128&d=identicon&r=PG", "display_name": "Jatinder Kumar", "link": "https://stackoverflow.com/users/3964482/jatinder-kumar"}, "is_accepted": true, "score": 0, "last_activity_date": 1424874622, "creation_date": 1424874622, "answer_id": 28721618, "question_id": 28721519, "link": "https://stackoverflow.com/questions/28721519/how-can-i-combine-these-two-statements/28721618#28721618", "title": "How can I combine these two statements?", "body": "<p>You should read database manual.</p>\n\n<p>The query should be:</p>\n\n<pre><code>$dbh-&gt;do(\"INSERT INTO $table(name,nametwo) VALUES ('\".$enter.\"', '\".$enter2.\"')\");\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 4111, "user_id": 23033, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a6b6c69cae4d2061cafe851676f8d262?s=128&d=identicon&r=PG", "display_name": "Dre", "link": "https://stackoverflow.com/users/23033/dre"}, "edited": false, "score": 2, "creation_date": 1424876562, "post_id": 28722114, "comment_id": 45731286, "body": "or <code>$dbh-&gt;do(&quot;INSERT INTO $table(name,nametwo) values (?,?)&quot;,undef,$enter,$enter2)</code> if we are only doing this once."}, {"owner": {"reputation": 4111, "user_id": 23033, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a6b6c69cae4d2061cafe851676f8d262?s=128&d=identicon&r=PG", "display_name": "Dre", "link": "https://stackoverflow.com/users/23033/dre"}, "edited": false, "score": 0, "creation_date": 1424876636, "post_id": 28722114, "comment_id": 45731346, "body": "Also note that this code will not work as is. You  need to do <code>my $sth = $dbh-&gt;prepare(...)</code> and <code>$sth-&gt;execute</code>"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 2, "creation_date": 1424879975, "post_id": 28722114, "comment_id": 45733984, "body": "Except you still interpolate <code>$table</code> instead of using <code>$dbh-&gt;quote_identifier($table)</code>"}], "tags": [], "owner": {"reputation": 532, "user_id": 716119, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/64d3d8eb46cc0ed153c42b25a76c131f?s=128&d=identicon&r=PG", "display_name": "SparkeyG", "link": "https://stackoverflow.com/users/716119/sparkeyg"}, "is_accepted": false, "score": 5, "last_activity_date": 1424878450, "last_edit_date": 1424878450, "creation_date": 1424875906, "answer_id": 28722114, "question_id": 28721519, "link": "https://stackoverflow.com/questions/28721519/how-can-i-combine-these-two-statements/28722114#28722114", "title": "How can I combine these two statements?", "body": "<p>To paraphrase what others have said:</p>\n\n<pre><code>   my $sth = $dbh-&gt;prepare(\"INSERT INTO $table(name,nametwo) values (?,?)\");\n   $sth-&gt;execute($enter, $enter2);\n</code></pre>\n\n<p>So you don't have to worry about quoting.</p>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 0, "last_activity_date": 1424882203, "creation_date": 1424882203, "answer_id": 28724521, "question_id": 28721519, "link": "https://stackoverflow.com/questions/28721519/how-can-i-combine-these-two-statements/28724521#28724521", "title": "How can I combine these two statements?", "body": "<p>The SQL syntax is</p>\n\n<pre><code>INSERT INTO MyTable (\n           name_one,\n           name_two\n       ) VALUES (\n           \"value_one\",\n           \"value_two\"\n       )\n</code></pre>\n\n<hr>\n\n<p>Your way of generating SQL statements is very fragile. For example, it will fail if the table name is <code>Values</code> or the value is <code>Jester's</code>.</p>\n\n<p>Solution 1:</p>\n\n<pre><code>$dbh-&gt;do(\"\n   INSERT INTO \".$dbh-&gt;quote_identifier($table_name).\"\n              name_one,\n              name_two\n          ) VALUES (\n              \".$dbh-&gt;quote($value_one).\",\n              \".$dbh-&gt;quote($value_two).\"\n          )\n\");\n</code></pre>\n\n<p>Solution 2: Placeholders</p>\n\n<pre><code>$dbh-&gt;do(\n   \"   INSERT INTO \".$dbh-&gt;quote_identifier($table_name).\"\n                  name_one,\n                  name_two\n              ) VALUES (\n                  ?, ?\n              )\n    \",\n    undef,\n    $value_one,\n    $value_two,\n);\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 4291114, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c92218c2571923a72c644f6f93ad712?s=128&d=identicon&r=PG&f=1", "display_name": "Callum Curry", "link": "https://stackoverflow.com/users/4291114/callum-curry"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 81, "favorite_count": 0, "accepted_answer_id": 28721618, "answer_count": 3, "score": -1, "last_activity_date": 1424882203, "creation_date": 1424874365, "question_id": 28721519, "link": "https://stackoverflow.com/questions/28721519/how-can-i-combine-these-two-statements", "title": "How can I combine these two statements?", "body": "<p>I'm currently trying to insert data into a database from a text boxes, $enter / $enter2 being where the text is being written. </p>\n\n<p>The database consists of three columns ID, name and nametwo</p>\n\n<p>ID is auto incrementing and works fine</p>\n\n<p>Both statements work fine on their own, but because they are being issued separately the first leaves nametwo blank and the second leaves name blank. </p>\n\n<p>I've tried combining both but haven't had much luck, hope someone can help. </p>\n\n<pre><code>$dbh-&gt;do(\"INSERT INTO $table(name) VALUES ('\".$enter.\"')\");\n$dbh-&gt;do(\"INSERT INTO $table(nametwo) VALUES ('\".$enter2.\"')\");\n</code></pre>\n"}, {"tags": ["arrays", "perl", "raku"], "comments": [{"owner": {"reputation": 148928, "user_id": 48015, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/0b722a5f7d2d809629ee40c63cc8576b?s=128&d=identicon&r=PG", "display_name": "Christoph", "link": "https://stackoverflow.com/users/48015/christoph"}, "edited": false, "score": 0, "creation_date": 1424891837, "post_id": 28719943, "comment_id": 45741710, "body": "Any particular reason why you went with Parrot instead of MoarVM?"}, {"owner": {"reputation": 1390, "user_id": 1900954, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/rRoSO.jpg?s=128&g=1", "display_name": "Uri Granta", "link": "https://stackoverflow.com/users/1900954/uri-granta"}, "reply_to_user": {"reputation": 148928, "user_id": 48015, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/0b722a5f7d2d809629ee40c63cc8576b?s=128&d=identicon&r=PG", "display_name": "Christoph", "link": "https://stackoverflow.com/users/48015/christoph"}, "edited": false, "score": 0, "creation_date": 1424894206, "post_id": 28719943, "comment_id": 45743092, "body": "Not really. This was my first install, just to get a flavor of the language. Reading more on <a href=\"http://rakudo.org/\" rel=\"nofollow noreferrer\">rakudo.org</a> I understand that the MoarVM backend is the one to use."}, {"owner": {"reputation": 30739, "user_id": 1804599, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/v91P3.jpg?s=128&g=1", "display_name": "rightfold", "link": "https://stackoverflow.com/users/1804599/rightfold"}, "edited": false, "score": 0, "creation_date": 1426429860, "post_id": 28719943, "comment_id": 46359765, "body": "<code>&lt;1 2&gt;</code> is not an array."}, {"owner": {"reputation": 1390, "user_id": 1900954, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/rRoSO.jpg?s=128&g=1", "display_name": "Uri Granta", "link": "https://stackoverflow.com/users/1900954/uri-granta"}, "reply_to_user": {"reputation": 30739, "user_id": 1804599, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/v91P3.jpg?s=128&g=1", "display_name": "rightfold", "link": "https://stackoverflow.com/users/1804599/rightfold"}, "edited": false, "score": 0, "creation_date": 1426431016, "post_id": 28719943, "comment_id": 46360116, "body": "@\u0440\u0430\u0439\u0442\u0444\u043e\u043b\u0434: you&#39;re right, it&#39;s a word list (though <a href=\"http://learnxinyminutes.com/docs/perl6/\" rel=\"nofollow noreferrer\">learnxinyminutes.com/docs/perl6</a> actually calls it an array; e.g. search for &lt;key1 value1 key2 value2&gt;). I forget that Perl doesn&#39;t have a word for an arbitrary thing in list context."}, {"owner": {"reputation": 18643, "user_id": 1737909, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/058573b71875bc70b5a4e30140c94040?s=128&d=identicon&r=PG", "display_name": "Ven", "link": "https://stackoverflow.com/users/1737909/ven"}, "edited": false, "score": 1, "creation_date": 1426679177, "post_id": 28719943, "comment_id": 46468903, "body": "@UriZarfaty Whooops, I&#39;ll fix it :-). nice cath"}], "answers": [{"comments": [{"owner": {"reputation": 25859, "user_id": 1077672, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f00f8b55b0ade2c4748e94fb73a40662?s=128&d=identicon&r=PG", "display_name": "raiph", "link": "https://stackoverflow.com/users/1077672/raiph"}, "edited": false, "score": 0, "creation_date": 1424907172, "post_id": 28727556, "comment_id": 45749599, "body": "Along the same lines: <code>([1,2] xx 2).map: { @^a X~ @^b }</code>"}, {"owner": {"reputation": 148928, "user_id": 48015, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/0b722a5f7d2d809629ee40c63cc8576b?s=128&d=identicon&r=PG", "display_name": "Christoph", "link": "https://stackoverflow.com/users/48015/christoph"}, "reply_to_user": {"reputation": 25859, "user_id": 1077672, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f00f8b55b0ade2c4748e94fb73a40662?s=128&d=identicon&r=PG", "display_name": "raiph", "link": "https://stackoverflow.com/users/1077672/raiph"}, "edited": false, "score": 1, "creation_date": 1424907793, "post_id": 28727556, "comment_id": 45749805, "body": "@raiph: <code>.map</code> will fails once you generalize from the <code>xx 2</code> example to <code>xx 3</code> or higher"}, {"owner": {"reputation": 25859, "user_id": 1077672, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f00f8b55b0ade2c4748e94fb73a40662?s=128&d=identicon&r=PG", "display_name": "raiph", "link": "https://stackoverflow.com/users/1077672/raiph"}, "edited": false, "score": 1, "creation_date": 1424908993, "post_id": 28727556, "comment_id": 45750181, "body": "D&#39;oh. Should be <code>say ([1,2] xx 3).reduce: { @^a X~ @^b}</code>"}], "tags": [], "owner": {"reputation": 148928, "user_id": 48015, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/0b722a5f7d2d809629ee40c63cc8576b?s=128&d=identicon&r=PG", "display_name": "Christoph", "link": "https://stackoverflow.com/users/48015/christoph"}, "is_accepted": true, "score": 4, "last_activity_date": 1424891746, "last_edit_date": 1424891746, "creation_date": 1424891256, "answer_id": 28727556, "question_id": 28719943, "link": "https://stackoverflow.com/questions/28719943/how-do-i-pass-an-unflattened-array-repetition-to-a-reduce-in-perl-6/28727556#28727556", "title": "How do I pass an unflattened array repetition to a reduce in Perl 6?", "body": "<p>Assuming you also want your code to work with arrays repeated more than twice, the workaround I came up with reads</p>\n\n<pre><code>(&lt;1 2&gt; xx 2).tree.reduce({ @^a X~ @^b })\n</code></pre>\n\n<p>Note that flattening behaviour and the List/Parcel distinction<sup>1</sup> are known pain points.</p>\n\n<p>A plan to improve the situation has been around for a while (cf <a href=\"http://pmthium.com/2014/10/apw2014/\" rel=\"nofollow\">Great List Refactor</a>) and is supposed to land before the 6.0 release at the end of the year.</p>\n\n<p><sup>1</sup> All three expressions you looked at have different types:</p>\n\n<pre><code>(&lt;1 2&gt;, &lt;1 2&gt;).WHAT    # (Parcel)\n(&lt;1 2&gt; xx 2).WHAT      # (List)\n(&lt;1 2&gt; xx 2).tree.WHAT # (LoL)\n</code></pre>\n\n<p>The last one is a List-of-Lists.</p>\n"}], "owner": {"reputation": 1390, "user_id": 1900954, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/rRoSO.jpg?s=128&g=1", "display_name": "Uri Granta", "link": "https://stackoverflow.com/users/1900954/uri-granta"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 130, "favorite_count": 0, "accepted_answer_id": 28727556, "answer_count": 1, "score": 4, "last_activity_date": 1575127550, "creation_date": 1424870017, "last_edit_date": 1575127550, "question_id": 28719943, "link": "https://stackoverflow.com/questions/28719943/how-do-i-pass-an-unflattened-array-repetition-to-a-reduce-in-perl-6", "title": "How do I pass an unflattened array repetition to a reduce in Perl 6?", "body": "<p>I'm trying to pass an xx repeated array to an [X~] reduce function but finding that the array gets flattened. I've searched the online docs and stack overflow, but couldn't find anything. Unfortunately, my Perl 6 knowledge is quite rudimentary (though I do know Perl 5 quite well).</p>\n\n<pre><code>[X~](&lt;1 2&gt;, &lt;1 2&gt;)    # 11 12 21 22 (WHAT I WANT)\n[X~](&lt;1 2&gt; xx 2)      # 1 2 1 2 (NOT WHAT I WANT)\n[X~](&lt;1 2&gt; xx 2).tree # 1 2 1 2\n[X~](&lt;1 2&gt;.tree xx 2) # 1 2 1 2\n</code></pre>\n\n<p>Looking at the .perl dumps doesn't enlighten me much:</p>\n\n<pre><code>(&lt;1 2&gt;, &lt;1 2&gt;).perl    # ((\"1\", \"2\"), (\"1\", \"2\"))\n(&lt;1 2&gt; xx 2).perl      # ((\"1\", \"2\"), (\"1\", \"2\")).list\n(&lt;1 2&gt; xx 2).tree.perl # (\"1\", \"2\"; \"1\", \"2\").item\n</code></pre>\n\n<p>I'm using rakudo-star-2014.12.1-parrot.msi.</p>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 188064, "user_id": 635608, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oIJia.png?s=128&g=1", "display_name": "Mat", "link": "https://stackoverflow.com/users/635608/mat"}, "edited": false, "score": 5, "creation_date": 1424869571, "post_id": 28719764, "comment_id": 45726347, "body": "That replaces only the first match. Please show an example that reproduces your problem."}, {"owner": {"reputation": 65435, "user_id": 2206004, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HCB1e.png?s=128&g=1", "display_name": "hwnd", "link": "https://stackoverflow.com/users/2206004/hwnd"}, "edited": false, "score": 3, "creation_date": 1424869881, "post_id": 28719764, "comment_id": 45726557, "body": "Your statement is incorrect. If you <b>use</b> with the <code>g</code> flag it <b>will</b> replace all. Otherwise, only first match."}, {"owner": {"reputation": 4514, "user_id": 4248931, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HijcJ.png?s=128&g=1", "display_name": "serenesat", "link": "https://stackoverflow.com/users/4248931/serenesat"}, "edited": false, "score": 1, "creation_date": 1424870249, "post_id": 28719764, "comment_id": 45726798, "body": "<code>s&#47;search&#47;replace&#47;</code> only replace the first match. For more you can show us your code what are you trying."}], "answers": [{"tags": [], "owner": {"reputation": 5923, "user_id": 2105156, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/oRMc0.jpg?s=128&g=1", "display_name": "fugu", "link": "https://stackoverflow.com/users/2105156/fugu"}, "is_accepted": false, "score": 2, "last_activity_date": 1424871516, "last_edit_date": 1424871516, "creation_date": 1424871170, "answer_id": 28720349, "question_id": 28719764, "link": "https://stackoverflow.com/questions/28719764/find-and-replace-only-first-match-in-perl/28720349#28720349", "title": "find and replace only first match in perl", "body": "<pre><code>use strict;\nuse warnings;\n\nmy $string = 'foo bar baz foo foo bar';\nmy $replace = 'bar';\n\n$string =~ s/$replace/REPLACEMENT/;\n\nprint \"$string\\n\";\n</code></pre>\n\n<p>Or use <code>\\Q</code> to automatically escape non word characters:</p>\n\n<pre><code>$string =~ s/\\Q$replace/REPLACEMENT/;\n</code></pre>\n"}], "owner": {"reputation": 889, "user_id": 1505752, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/f115c18fc65d4914c7ae1dac7997308c?s=128&d=identicon&r=PG", "display_name": "VSr", "link": "https://stackoverflow.com/users/1505752/vsr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3885, "favorite_count": 1, "closed_date": 1424880366, "answer_count": 1, "score": 0, "last_activity_date": 1424871516, "creation_date": 1424869459, "question_id": 28719764, "link": "https://stackoverflow.com/questions/28719764/find-and-replace-only-first-match-in-perl", "closed_reason": "Not suitable for this site", "title": "find and replace only first match in perl", "body": "<p>Anyone know how to replace only the first match instead of all in perl. If I use without /g it replacing all.</p>\n\n<pre><code>$string =~ s/regex/replacement/;\n</code></pre>\n"}, {"tags": ["performance", "perl"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 2, "creation_date": 1424870486, "post_id": 28719571, "comment_id": 45726951, "body": "Take a look at Devel::NYCProf and use it to benchmark your program."}, {"owner": {"reputation": 4173, "user_id": 3479860, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/07d70ea6b00797e7e17daaa30b1dc363?s=128&d=identicon&r=PG&f=1", "display_name": "Valeriy Solovyov", "link": "https://stackoverflow.com/users/3479860/valeriy-solovyov"}, "edited": false, "score": 0, "creation_date": 1424870516, "post_id": 28719571, "comment_id": 45726966, "body": "&gt;Is there a way to accomplish this task more efficiently? <a href=\"http://www.polymake.org/doku.php/reference/clients\" rel=\"nofollow noreferrer\">polymake.org/doku.php/reference/clients</a>"}, {"owner": {"reputation": 42833, "user_id": 18914, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7a20a39ae2ef47ae042a3eddd5b5bd19?s=128&d=identicon&r=PG", "display_name": "Dave Sherohman", "link": "https://stackoverflow.com/users/18914/dave-sherohman"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 2, "creation_date": 1424871494, "post_id": 28719571, "comment_id": 45727681, "body": "@simbabque Correction - It&#39;s Devel::NYTProf <a href=\"https://metacpan.org/pod/Devel::NYTProf\" rel=\"nofollow noreferrer\">metacpan.org/pod/Devel::NYTProf</a>"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 42833, "user_id": 18914, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7a20a39ae2ef47ae042a3eddd5b5bd19?s=128&d=identicon&r=PG", "display_name": "Dave Sherohman", "link": "https://stackoverflow.com/users/18914/dave-sherohman"}, "edited": false, "score": 1, "creation_date": 1424871807, "post_id": 28719571, "comment_id": 45727905, "body": "@dave ouch. Typo :-( thanks for correcting me"}, {"owner": {"reputation": 985, "user_id": 1028276, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/e6162fc9b0b93763c9b03531b32ab519?s=128&d=identicon&r=PG", "display_name": "eeijlar", "link": "https://stackoverflow.com/users/1028276/eeijlar"}, "edited": false, "score": 0, "creation_date": 1424937557, "post_id": 28719571, "comment_id": 45758324, "body": "Could it be because you are creating a new Vector object in every loop of your while loop.. ?"}, {"owner": {"reputation": 2799, "user_id": 1485311, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/sNWZV.jpg?s=128&g=1", "display_name": "ChatterOne", "link": "https://stackoverflow.com/users/1485311/chatterone"}, "edited": false, "score": 0, "creation_date": 1424967611, "post_id": 28719571, "comment_id": 45777116, "body": "There could be several reasons why your script is slow, but it&#39;s difficult to tell. You could start considering a few things like:   * Not using &quot;new&quot; at every iteration. That takes time, try using one variable and just clearing it.   * If you have two cycles nested, normally you&#39;d have an O(n^2) running time. In this case though, I&#39;m not so sure, since having an nxn matrix and adding everything to another nxn matrix may mean having an O((nxn)x(nxn)) = O(n^4) running time."}, {"owner": {"reputation": 3414, "user_id": 40285, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/1574e7851a08a81faca7e0f87575510e?s=128&d=identicon&r=PG", "display_name": "Len Jaffe", "link": "https://stackoverflow.com/users/40285/len-jaffe"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 2, "creation_date": 1424970784, "post_id": 28719571, "comment_id": 45779183, "body": "I&#39;m with @simbabque, fire up nytprof, let it dump to HTML and then browse the report with a web browser, and you can drill down a little.  You might consider moving the inner loop to its own subroutine, so that the profile can give you a better picture of how much time is spent running the inner loop vs. the outer loop."}, {"owner": {"reputation": 3414, "user_id": 40285, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/1574e7851a08a81faca7e0f87575510e?s=128&d=identicon&r=PG", "display_name": "Len Jaffe", "link": "https://stackoverflow.com/users/40285/len-jaffe"}, "edited": false, "score": 0, "creation_date": 1424971087, "post_id": 28719571, "comment_id": 45779387, "body": "As to not creating a new Vector in each iterations, you could use creat one vector outside the loop, and then use Storable::dclone() to make a copy inside the loop."}, {"owner": {"reputation": 3414, "user_id": 40285, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/1574e7851a08a81faca7e0f87575510e?s=128&d=identicon&r=PG", "display_name": "Len Jaffe", "link": "https://stackoverflow.com/users/40285/len-jaffe"}, "edited": false, "score": 0, "creation_date": 1424971290, "post_id": 28719571, "comment_id": 45779518, "body": "In the interest of pedantry, you should use Benchmark.pm to benchmark bits of your program (e.g. to see if one version is faster than the other - cloning vs new Vector). You should use a profiler to get the timings of function calls. Using a profile will make your program run longer, as it gathers, collates and records all its info. The profiler will identify hot spots in the code, and as such is an amazing tool to have in situations like this."}], "owner": {"reputation": 2141, "user_id": 2684663, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/65da7e1cd1be50614a392a92a0cfb658?s=128&d=identicon&r=PG&f=1", "display_name": "Brian Fitzpatrick", "link": "https://stackoverflow.com/users/2684663/brian-fitzpatrick"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 609, "favorite_count": 0, "answer_count": 0, "score": 3, "last_activity_date": 1424868828, "creation_date": 1424868828, "question_id": 28719571, "link": "https://stackoverflow.com/questions/28719571/why-is-this-perl-script-so-slow", "title": "Why is this perl script so slow?", "body": "<p>I have written a <code>perl</code> script to implement in the <code>polymake</code> framework.</p>\n\n<p>The script accomplishes the following task. It's input is a matrix <code>$M</code> from <code>polymake</code>. Issuing </p>\n\n<pre><code>print ref($M);\n</code></pre>\n\n<p>returns</p>\n\n<pre><code>Polymake::common::Matrix_A_Rational_I_NonSymmetric_Z\n</code></pre>\n\n<p>The output of the script is a matrix whose rows are the rows obtained from <code>M</code> by taking all the sums of all subsets of rows of <code>M</code>. For example, the input of</p>\n\n<pre><code>1 0 0\n1 3 0\n1 0 3\n</code></pre>\n\n<p>returns</p>\n\n<pre><code>0 0 0\n3 3 3\n2 3 3\n2 0 3\n1 0 3\n2 3 0\n1 3 0\n1 0 0\n</code></pre>\n\n<p>The code for my script is</p>\n\n<pre><code>use application 'polytope';\nuse Data::PowerSet 'powerset';\n\nsub newVertices {\n    my ($orig) = @_;\n    my $n = $orig -&gt; rows;\n    my $vert = zero_vector($n);\n    my $d = Data::PowerSet-&gt;new( {min =&gt; 1}, map {\"$_\"} (0..$n-1) );\n    while (my $r = $d -&gt; next) {\n        my $v = new Vector($n);\n        foreach (@$r) {\n            $v += @$orig[$_];\n        }\n        $vert = $vert / $v;\n    }\n    return $vert;\n}\n</code></pre>\n\n<p>The script works fine. My issue is that the script runs a lot slower than I think it should. The example I mention above takes about half a minute to run. My questions are</p>\n\n<ol>\n<li><p>Am I correct to expect that such a task should be able to be accomplished quickly for matrices with relatively few rows?</p></li>\n<li><p>Why is this script so slow?</p></li>\n<li><p>Is there a way to accomplish this task more efficiently?</p></li>\n</ol>\n\n<p>I suspect the problem might be the matrix object type I am dealing with it and maybe writing a script that does this purely with arrays might be more efficient. My problem is I cannot figure out how to transition from an array back to a matrix so I haven't made an attempt to do something along these lines.</p>\n"}, {"tags": ["python", "html", "perl", "webpage", "webautomation"], "answers": [{"comments": [{"owner": {"reputation": 441, "user_id": 3754136, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/3ed8ff4798008f5292bf8aba54a4efa2?s=128&d=identicon&r=PG&f=1", "display_name": "user3754136", "link": "https://stackoverflow.com/users/3754136/user3754136"}, "edited": false, "score": 0, "creation_date": 1424934807, "post_id": 28719901, "comment_id": 45757217, "body": "I tried with the above as suggested but getting error as below."}, {"owner": {"reputation": 49793, "user_id": 4014959, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GdqQJ.jpg?s=128&g=1", "display_name": "PM 2Ring", "link": "https://stackoverflow.com/users/4014959/pm-2ring"}, "reply_to_user": {"reputation": 441, "user_id": 3754136, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/3ed8ff4798008f5292bf8aba54a4efa2?s=128&d=identicon&r=PG&f=1", "display_name": "user3754136", "link": "https://stackoverflow.com/users/3754136/user3754136"}, "edited": false, "score": 0, "creation_date": 1424937861, "post_id": 28719901, "comment_id": 45758476, "body": "@user3754136: Please don&#39;t post error messages as answers; you can edit them into your question (in a quote block or code block). Obviously, I can&#39;t test the code without a proper ID and password. But I can&#39;t open the <code>http:&#47;&#47;server.intranet.com:7180&#47;cmf&#47;allHealthIssues</code> URL, or <code>http:&#47;&#47;server.intranet.com:7180</code>, either in a browser or from a script."}, {"owner": {"reputation": 441, "user_id": 3754136, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/3ed8ff4798008f5292bf8aba54a4efa2?s=128&d=identicon&r=PG&f=1", "display_name": "user3754136", "link": "https://stackoverflow.com/users/3754136/user3754136"}, "edited": false, "score": 0, "creation_date": 1424940666, "post_id": 28719901, "comment_id": 45759805, "body": "That is some dummy link, sorry i work for a bank and the server has production data so cant really share link or login details. But would appreciate any help as to understand the error."}, {"owner": {"reputation": 49793, "user_id": 4014959, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GdqQJ.jpg?s=128&g=1", "display_name": "PM 2Ring", "link": "https://stackoverflow.com/users/4014959/pm-2ring"}, "reply_to_user": {"reputation": 441, "user_id": 3754136, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/3ed8ff4798008f5292bf8aba54a4efa2?s=128&d=identicon&r=PG&f=1", "display_name": "user3754136", "link": "https://stackoverflow.com/users/3754136/user3754136"}, "edited": false, "score": 0, "creation_date": 1424941354, "post_id": 28719901, "comment_id": 45760162, "body": "The code I posted was derived from a script I used to use regularly to login to a forum. It ought to work if you pass <b>all</b> the input fields present in the page&#39;s login form in the data1 <code>dict</code>. That includes hidden fields. And it may even include mouse coordinates on the Submit button. You can discover the required fields by logging in with a browser while using the browser&#39;s Live HTTP Headers facilities (you may need to install a browser extension to enable those facilities)."}, {"owner": {"reputation": 441, "user_id": 3754136, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/3ed8ff4798008f5292bf8aba54a4efa2?s=128&d=identicon&r=PG&f=1", "display_name": "user3754136", "link": "https://stackoverflow.com/users/3754136/user3754136"}, "edited": false, "score": 0, "creation_date": 1424945049, "post_id": 28719901, "comment_id": 45762452, "body": "Can i get thoese fields if i view teh page source of teh login page. I can see something related to Jasascrpt etc.."}, {"owner": {"reputation": 49793, "user_id": 4014959, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GdqQJ.jpg?s=128&g=1", "display_name": "PM 2Ring", "link": "https://stackoverflow.com/users/4014959/pm-2ring"}, "reply_to_user": {"reputation": 441, "user_id": 3754136, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/3ed8ff4798008f5292bf8aba54a4efa2?s=128&d=identicon&r=PG&f=1", "display_name": "user3754136", "link": "https://stackoverflow.com/users/3754136/user3754136"}, "edited": false, "score": 0, "creation_date": 1424946520, "post_id": 28719901, "comment_id": 45763430, "body": "@user3754136: Probably, but as I said above it may involve tricky stuff like mouse coordinates on the Submit button, so it&#39;s simpler to look at the HTTP Headers. But since this page belongs to the bank you work for, why not just ask someone in the relevant department for the required fields? PS. <b>Please</b> delete your answer!"}, {"owner": {"reputation": 441, "user_id": 3754136, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/3ed8ff4798008f5292bf8aba54a4efa2?s=128&d=identicon&r=PG&f=1", "display_name": "user3754136", "link": "https://stackoverflow.com/users/3754136/user3754136"}, "edited": false, "score": 0, "creation_date": 1425057338, "post_id": 28719901, "comment_id": 45819779, "body": "i need some help on as how does the page gets submitted, as in www-mechanize module the code: mech-&gt; click (&#39;submit&#39;), did the trick of clicking on the login button, but how can we achive this in the above code. Usually in a web page with javascript what should i do so that i can achive the goal of login button click. any help or example how to do that."}], "tags": [], "owner": {"reputation": 49793, "user_id": 4014959, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GdqQJ.jpg?s=128&g=1", "display_name": "PM 2Ring", "link": "https://stackoverflow.com/users/4014959/pm-2ring"}, "is_accepted": false, "score": 0, "last_activity_date": 1424870429, "last_edit_date": 1424870429, "creation_date": 1424869889, "answer_id": 28719901, "question_id": 28719498, "link": "https://stackoverflow.com/questions/28719498/automated-login-webpage-with-credentials-and-browse-to-different-subpage-and-dow/28719901#28719901", "title": "automated login webpage with credentials and browse to different subpage and download that subpage perl or python", "body": "<p>Although you are importing cookielib you aren't actually using it, so you can't get past the authentication page of the website. The Python docs for <a href=\"https://docs.python.org/2/library/cookielib.html#examples\" rel=\"nofollow\">cookielib</a> have some simple examples of how to use it. Eg,</p>\n\n<pre><code>import cookielib, urllib2\ncj = cookielib.CookieJar()\nopener = urllib2.build_opener(urllib2.HTTPCookieProcessor(cj))\nr = opener.open(\"http://example.com/\")\n</code></pre>\n\n<p>Obviously, your code will need to be a little more complicated, as you need to send the password. </p>\n\n<p>So you'll need to do something like this (untested):</p>\n\n<pre><code>cj = cookielib.CookieJar()\nopener = urllib2.build_opener(urllib2.HTTPCookieProcessor(cj))\nurllib2.install_opener(opener)\n\ndata1={'j_username':'id', 'j_password':'pass'}\ndata = urllib.urlencode(data1)  \nheaders = {'User-agent' : 'Mozilla/5.0 (X11; Linux i586; rv:31.0) Gecko/20100101 Firefox/31.0'}\n\nreq = urllib2.Request(url, data, headers)\nhandle = urllib2.urlopen(req)\n</code></pre>\n\n<p>It's a shame you can't install Requests, as it makes things <em>so</em> much simpler than using the native Python modules.</p>\n"}], "owner": {"reputation": 441, "user_id": 3754136, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/3ed8ff4798008f5292bf8aba54a4efa2?s=128&d=identicon&r=PG&f=1", "display_name": "user3754136", "link": "https://stackoverflow.com/users/3754136/user3754136"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 209, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1425056558, "creation_date": 1424868628, "last_edit_date": 1424941490, "question_id": 28719498, "link": "https://stackoverflow.com/questions/28719498/automated-login-webpage-with-credentials-and-browse-to-different-subpage-and-dow", "title": "automated login webpage with credentials and browse to different subpage and download that subpage perl or python", "body": "<p>I need help with to Login to webpage using id and password and goto a link within the website and download the complete page code or response that we can see in page source as response for the link. I tried using perl or python but no luck.\nI need help with to login to www.server.com:7180 and save cookies and then redirect to ww.server.com:7180/healthissues page or directly download whatever we get response in browser in text file.</p>\n\n<pre><code>import urllib\nimport urllib2\nimport webbrowser\nimport cookielib\ndata1={\n'j_username':'id', 'j_password':'pass'\n}\n\ndata = urllib.urlencode(data1)\nurl = 'http://server.intranet.com:7180/cmf/allHealthIssues'\nfull_url = url + '?' + data\nresponse = urllib2.urlopen(full_url)\nwith open(\"results.html\", \"w\") as f:\nf.write(response.read())\n\nwebbrowser.open(\"results.html\")\n</code></pre>\n\n<p>The above code downloads the webpage but i always end up with authentication page in the download. I found lot of packages but unfortunately i donot have access to install packages or libraries. Any help is appreciated.</p>\n\n<hr>\n\n<p>I tried with the code suggested by PM 2Ring but I'm getting the error below. I have python 2.6.6 and I'm not sure if that method will work. Please let me know any workaround or way to resolve the error. </p>\n\n<pre><code>Traceback (most recent call last):\n  File \"a.py\", line 15, in &lt;module&gt;\n    handle = urllib2.urlopen(req)\n  File \"/usr/lib64/python2.6/urllib2.py\", line 126, in urlopen\n    return _opener.open(url, data, timeout)\n  File \"/usr/lib64/python2.6/urllib2.py\", line 397, in open\n    response = meth(req, response)\n  File \"/usr/lib64/python2.6/urllib2.py\", line 510, in http_response\n    'http', request, response, code, msg, hdrs)\n  File \"/usr/lib64/python2.6/urllib2.py\", line 435, in error\n    return self._call_chain(*args)\n  File \"/usr/lib64/python2.6/urllib2.py\", line 369, in _call_chain\n    result = func(*args)\n  File \"/usr/lib64/python2.6/urllib2.py\", line 518, in http_error_default\n    raise HTTPError(req.get_full_url(), code, msg, hdrs, fp)\nurllib2.HTTPError: HTTP Error 403: Invalid request\n</code></pre>\n"}, {"tags": ["perl", "sockets", "tcp", "tcpserver", "tcpsocket"], "answers": [{"comments": [{"owner": {"reputation": 55, "user_id": 4337822, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/48b0bab1affca0883b61af7c55f345ff?s=128&d=identicon&r=PG&f=1", "display_name": "vaspant", "link": "https://stackoverflow.com/users/4337822/vaspant"}, "edited": false, "score": 0, "creation_date": 1424877383, "post_id": 28722451, "comment_id": 45731891, "body": "Yes, nothing happens. I think that i have to set a timeout in my recv function in order to avoid waiting forever to receive the current cycle&#39;s data. Any suggestions are welcome."}], "tags": [], "owner": {"reputation": 1604, "user_id": 2987926, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/720e7d8b7925f94e34d0291fa5bfdce9?s=128&d=identicon&r=PG&f=1", "display_name": "codnodder", "link": "https://stackoverflow.com/users/2987926/codnodder"}, "is_accepted": true, "score": 2, "last_activity_date": 1609185517, "last_edit_date": 1609185517, "creation_date": 1424876814, "answer_id": 28722451, "question_id": 28719064, "link": "https://stackoverflow.com/questions/28719064/how-to-set-in-perl-recv-timeout-in-my-code/28722451#28722451", "title": "How to set in PERL recv timeout in my code?", "body": "<p><s>Perhaps I am misunderstanding the question, but have you tried setting a timeout in the socket with &quot;Timeout&quot;?</s></p>\n<p><s>See <a href=\"http://search.cpan.org/%7Egbarr/IO-1.25/lib/IO/Socket/INET.pm\" rel=\"nofollow noreferrer\">IO::Socket::INET</a>.</s></p>\n<p>EDIT: I did not catch the 'recv' bit. You have to use setsockopt, which is not wholly portable, so the final answer is somewhat dependent on your platform. Here are some posts that may help:</p>\n<p><a href=\"https://stackoverflow.com/questions/8284243/how-do-i-set-so-rcvtimeo-on-a-socket-in-perl\">How do I set `SO_RCVTIMEO` on a socket in Perl?</a></p>\n<p><a href=\"http://www.perlmonks.org/?node_id=761935\" rel=\"nofollow noreferrer\">http://www.perlmonks.org/?node_id=761935</a></p>\n<p>E.g.,</p>\n<pre><code>$socket-&gt;setsockopt(SOL_SOCKET, SO_RCVTIMEO, pack('l!l!', 30, 0))\n    or die &quot;setsockopt: $!&quot;;\n</code></pre>\n"}], "owner": {"reputation": 55, "user_id": 4337822, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/48b0bab1affca0883b61af7c55f345ff?s=128&d=identicon&r=PG&f=1", "display_name": "vaspant", "link": "https://stackoverflow.com/users/4337822/vaspant"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3340, "favorite_count": 0, "accepted_answer_id": 28722451, "answer_count": 1, "score": 1, "last_activity_date": 1609185517, "creation_date": 1424867319, "question_id": 28719064, "link": "https://stackoverflow.com/questions/28719064/how-to-set-in-perl-recv-timeout-in-my-code", "title": "How to set in PERL recv timeout in my code?", "body": "<p>I want to set timeout in my recv function in this specific code below, because sometimes my script stuck forever. I am new in socket programming so i would really appreciate any help. Thanks in advance.</p>\n\n<pre><code>use IO::Socket::INET;\nuse IO::Select;\nuse LWP::UserAgent;\nuse JSON::XS 'decode_json';\nuse Data::Dumper;\nuse DBI();\nsub dbconn {\n    my $db_conf = shift;\n\n    my $dbh = DBI-&gt;connect(\"DBI:Pg:dbname=somedatabase;host=somehost\", \"postgres\", \"\",\n                                        {pg_server_prepare =&gt; \n                                        0,AutoCommit =&gt; 1,RaiseError=&gt;1});\n    $dbh-&gt;do(\"SET CLIENT_ENCODING TO 'UTF-8';\");\n    return $dbh;\n}\n\n\n\n# auto-flush on socket\n$| = 1;\n\n# creating a listening socket\nmy $socket = new IO::Socket::INET (\n    LocalHost =&gt; '0.0.0.0',\n    LocalPort =&gt; '5000',\n    Proto =&gt; 'tcp',\n    Listen =&gt; 5,\n    Reuse =&gt; 1\n);\ndie \"cannot create socket $!\\n\" unless $socket;\n\n$sel = IO::Select-&gt;new( $socket );\n\nprint \"Server waiting for client connection on port 5000...\\n\";\n\nmy $command = 1;\nmy $watchTracker = \"*HQ,\";\nmy $tl206 = \",LAT:\";\nmy $watchConnectedCheck = \",A,\";\nmy $gpsType;\nmy $circleString = \",LINK,\";\nmy $dataToSend;\nmy $new;\nmy $dbh = dbconn();\nwhile(@ready = $sel-&gt;can_read) {\n\n        foreach $fh (@ready) {\n            if($fh == $socket) {\n                # Create a new socket\n                $new = $socket-&gt;accept;\n\n\n\n                $new-&gt;recv($dataReceived, 1024);\n                $new-&gt;recv($dataReceived, 1024);\n\n\n\n\n                # get information about a newly connected client\n                my $client_address = $new-&gt;peerhost();\n                my $client_port = $new-&gt;peerport();\n                print \"===============================================\\n\";\n                print \"===============================================\\n\\n\";\n                print \"Connection from $client_address:$client_port\\n\";\n\n                print \"General data received: $dataReceived\\n\\n\";\n\n#MORE LINES...\n\n}\n            else {\n                # Process socket\n                # Maybe we have finished with the socket\n                $sel-&gt;remove($fh);\n                $fh-&gt;close;\n            }\n        }\n    }\n    $dbh-&gt;disconnect();\n</code></pre>\n"}, {"tags": ["perl", "encryption", "perl-module", "crypt"], "answers": [{"tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": true, "score": 3, "last_activity_date": 1424867161, "creation_date": 1424867161, "answer_id": 28719011, "question_id": 28718897, "link": "https://stackoverflow.com/questions/28718897/encrypted-perl-scripts-by-filtercrypto-crypt-file-usage-on-other-machines/28719011#28719011", "title": "Encrypted perl scripts by Filter::Crypto (crypt_file) usage on other machines", "body": "<p>You're talking about digital rights management, although you may not know it. </p>\n\n<p>Encrypting something so it's really hard to read is relatively easy. Doing so at the same time as allowing someone to read it, but only when you say so is really difficult. (as in, basically impossible without control over the target infrastructure, at which point it's largely academic anyway)</p>\n\n<p>That goes double when you're trying to use an interpreted language like perl, because obfuscation tricks have to be de-obfuscated before you can run them. </p>\n\n<p>The module explains some of this, and has some mechanisms to make it <em>slightly</em> harder, but at a pretty fundamental level - it's impossible to do exhaustively. </p>\n"}], "owner": {"reputation": 279, "user_id": 1991825, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/5762e7ea0a2318778e75ace344687ab0?s=128&d=identicon&r=PG", "display_name": "user1991825", "link": "https://stackoverflow.com/users/1991825/user1991825"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 836, "favorite_count": 0, "accepted_answer_id": 28719011, "answer_count": 1, "score": 0, "last_activity_date": 1424867161, "creation_date": 1424866804, "question_id": 28718897, "link": "https://stackoverflow.com/questions/28718897/encrypted-perl-scripts-by-filtercrypto-crypt-file-usage-on-other-machines", "title": "Encrypted perl scripts by Filter::Crypto (crypt_file) usage on other machines", "body": "<p>I'm trying to use <a href=\"http://search.cpan.org/~shay/Filter-Crypto-2.06/lib/Filter/Crypto.pm\" rel=\"nofollow\">Filter::Crypto</a> module, but I'm little bit struggling with it. I would like to encrypt a script</p>\n\n<pre><code>crypt_file script.pl &gt; encrypted_script.pl\n</code></pre>\n\n<p>and then use that encrypted script on another machine.</p>\n\n<p>When I use</p>\n\n<pre><code>pp -f Crypto -M Filter::Crypto::Decrypt -o encrypted_script encrypted_script.pl\n</code></pre>\n\n<p>created binary works fine - it contains key for decryption. But I want to use just the encrypted_script.pl file. I would like to provide fully functional encrypted perl script, which nobody would be able to decrypt (easily). Is it even possible?</p>\n"}, {"tags": ["regex", "perl"], "answers": [{"comments": [{"owner": {"reputation": 62965, "user_id": 3679490, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/70f98fb23b16862298ea208aedfd18ae?s=128&d=identicon&r=PG&f=1", "display_name": "vks", "link": "https://stackoverflow.com/users/3679490/vks"}, "reply_to_user": {"reputation": 47, "user_id": 4579401, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/b41c7d92113fc7a4b4a9411c747b2f79?s=128&d=identicon&r=PG&f=1", "display_name": "idiot on perl", "link": "https://stackoverflow.com/users/4579401/idiot-on-perl"}, "edited": false, "score": 0, "creation_date": 1424863999, "post_id": 28717506, "comment_id": 45722884, "body": "@idiotonperl it is working.You can check d demo.What error you get"}], "tags": [], "owner": {"reputation": 62965, "user_id": 3679490, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/70f98fb23b16862298ea208aedfd18ae?s=128&d=identicon&r=PG&f=1", "display_name": "vks", "link": "https://stackoverflow.com/users/3679490/vks"}, "is_accepted": false, "score": 1, "last_activity_date": 1424862705, "creation_date": 1424862705, "answer_id": 28717506, "question_id": 28717394, "link": "https://stackoverflow.com/questions/28717394/how-to-select-the-sentence-only-between-the-symbols-in-perl/28717506#28717506", "title": "how to select the sentence only between the symbols in perl", "body": "<pre><code>(?&lt;=&lt;&lt;&lt;)([\\w ]+)(?=&gt;&gt;&gt;)|([\\w ]+)\n</code></pre>\n\n<p>Try this.Group 1 will be your first set and group 2 the second.See demo.</p>\n\n<p><a href=\"https://regex101.com/r/wU7sQ0/8\" rel=\"nofollow\">https://regex101.com/r/wU7sQ0/8</a></p>\n"}], "owner": {"reputation": 47, "user_id": 4579401, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/b41c7d92113fc7a4b4a9411c747b2f79?s=128&d=identicon&r=PG&f=1", "display_name": "idiot on perl", "link": "https://stackoverflow.com/users/4579401/idiot-on-perl"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 38, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1424862705, "creation_date": 1424862417, "question_id": 28717394, "link": "https://stackoverflow.com/questions/28717394/how-to-select-the-sentence-only-between-the-symbols-in-perl", "title": "how to select the sentence only between the symbols in perl", "body": "<p>I need to grep the word between the symbols as shown below in an array.</p>\n\n<p><code>my $string = \"&lt;hi how r u&gt;&lt;&lt;&lt;what is your name&gt;&gt;&gt;&lt;what is your age&gt;&lt;&lt;&lt;hi how r u&gt;&gt;&gt;&lt;this is idiot&gt;&lt;&lt;&lt;iam fine&gt;&gt;&gt;\";</code></p>\n\n<p>i need to grep as </p>\n\n<pre><code>@str = (\"what is yourname\",\"hi how r u\",\"iam fine\");\n@str1 = (\"hi how r u\",\"what is your age\",\"this is idiot\")\n</code></pre>\n"}, {"tags": ["perl", "packaging"], "answers": [{"comments": [{"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 1, "creation_date": 1424879013, "post_id": 28718304, "comment_id": 45733168, "body": "Bonus question - will that work if I&#39;m looking at Mojolicious being part of the bundle?"}, {"owner": {"reputation": 1786, "user_id": 1820650, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/ce47757627908a1013e0951158f4c2e6?s=128&d=identicon&r=PG", "display_name": "Dr.Avalanche", "link": "https://stackoverflow.com/users/1820650/dr-avalanche"}, "reply_to_user": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 2, "creation_date": 1424882603, "post_id": 28718304, "comment_id": 45735934, "body": "@Sobrique I took an example from the pod and packaged it without issue. By extracting the self executing executable you can see all of the files included in the package."}], "tags": [], "owner": {"reputation": 1786, "user_id": 1820650, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/ce47757627908a1013e0951158f4c2e6?s=128&d=identicon&r=PG", "display_name": "Dr.Avalanche", "link": "https://stackoverflow.com/users/1820650/dr-avalanche"}, "is_accepted": true, "score": 4, "last_activity_date": 1424865008, "creation_date": 1424865008, "answer_id": 28718304, "question_id": 28716807, "link": "https://stackoverflow.com/questions/28716807/bundling-up-a-perl-script-with-its-dependencies/28718304#28718304", "title": "Bundling up a perl script with its dependencies?", "body": "<p>Use <a href=\"https://metacpan.org/pod/pp\" rel=\"nofollow\">pp</a> to package your script and all dependant modules and libraries into a stand alone executable.</p>\n\n<pre><code>pp -x yourscript.pl -o outputfilename\n</code></pre>\n\n<p>See the documentation for examples of how to link to external shared objects (etc) if required. With pp you don't need perl on the target system where <code>outputfilename</code> will run.</p>\n"}, {"comments": [{"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 1, "creation_date": 1424877616, "post_id": 28722380, "comment_id": 45732066, "body": "Don&#39;t get me wrong, I love perlbrew, but I&#39;m pretty sure it requires internet access. The OP said that &quot;this other system is &#39;standalone&#39; and has no network connection,&quot; so I don&#39;t think perlbrew alone would solve their problem."}, {"owner": {"reputation": 98433, "user_id": 368630, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/107085826cfbb2700f535417a12c89cb?s=128&d=identicon&r=PG", "display_name": "David W.", "link": "https://stackoverflow.com/users/368630/david-w"}, "reply_to_user": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1424878377, "post_id": 28722380, "comment_id": 45732669, "body": "Yes, Perlbrew does require Internet access for installing new Perls and for installing cpan modules much like any system would require the ability to download cpan modules and a new Perl system."}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 1, "creation_date": 1424878960, "post_id": 28722380, "comment_id": 45733138, "body": "&quot;...much like any system would require the ability to download cpan modules and a new Perl system&quot; There are ways to package the dependencies on another system (like <code>pp</code> as Dr.Avalanche pointed out) that don&#39;t require network access on the target system."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1424878969, "post_id": 28722380, "comment_id": 45733148, "body": "The root of my problem is an isolated system that&#39;s got no internet connectivity. (Not even on a temporary basis). If I could perlbrew and fetch a cache, then that&#39;d do the trick."}, {"owner": {"reputation": 98433, "user_id": 368630, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/107085826cfbb2700f535417a12c89cb?s=128&d=identicon&r=PG", "display_name": "David W.", "link": "https://stackoverflow.com/users/368630/david-w"}, "edited": false, "score": 2, "creation_date": 1424881649, "post_id": 28722380, "comment_id": 45735245, "body": "I was looking into Perlbrew fetching from a cache, but then it&#39;s pretty much like manually installing Perl as a private user: Downloading and compiling the source, but changing the Perl directories to the one you select. Perlbrew merely automates the process for you. There&#39;s no real advantage of using Perlbrew in that case. You can also (if you have your own Perl) install cpan modules manually too. I too would have mentioned <code>Par::Packer</code>, but Dr. Avalanche beat me to it, so I thought I&#39;d mention an alternative."}], "tags": [], "owner": {"reputation": 98433, "user_id": 368630, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/107085826cfbb2700f535417a12c89cb?s=128&d=identicon&r=PG", "display_name": "David W.", "link": "https://stackoverflow.com/users/368630/david-w"}, "is_accepted": false, "score": 0, "last_activity_date": 1424876639, "creation_date": 1424876639, "answer_id": 28722380, "question_id": 28716807, "link": "https://stackoverflow.com/questions/28716807/bundling-up-a-perl-script-with-its-dependencies/28722380#28722380", "title": "Bundling up a perl script with its dependencies?", "body": "<p>When you have a system where you can't control the Perl installation (and the install is a really, really old version of Perl like 5.8.8 which is missing many nice improvements like <code>state</code> variables, <code>autodie</code>, <code>say</code>, and <code>switch</code>), you should look into <a href=\"http://perlbrew.pl\" rel=\"nofollow\">Perlbrew</a>.</p>\n\n<p>Perlbrew allows you to install a user version of Perl. (In fact, it allows you to install multiple versions of Perl), and allows you to switch between the Perlbrew install and the officially installed version. It makes doing everything in Perl much, much easier.</p>\n\n<p>You will have freer access to install new Perl modules, and you can do that task yourself rather than wait for your IT department to do it for you.</p>\n\n<p>I ended up using it on one of our systems where the primitive version of Perl just wasn't doing what my version of Perl did. I originally asked our IT to upgrade, but they really messed up the upgrade. After going back and forth, I simply asked if I could install Perlbrew.</p>\n\n<p>Which is an important point. Always ask permission. A lot of time, the IT department is more than happy to oblige. They're not Perl people, and CPAN is a world they don't want to deal with. Being able to get out of having to answer your beck and call about installing this or that Perl module is a great relief.</p>\n"}, {"tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": false, "score": 1, "last_activity_date": 1463997909, "creation_date": 1463997909, "answer_id": 37388069, "question_id": 28716807, "link": "https://stackoverflow.com/questions/28716807/bundling-up-a-perl-script-with-its-dependencies/37388069#37388069", "title": "Bundling up a perl script with its dependencies?", "body": "<p>Revisiting this, as the need hasn't really gone away. I have moved towards using <a href=\"https://www.docker.com/\" rel=\"nofollow\"><code>docker</code></a> - this is an 'image' and 'container' system for app deployment, which amongst other things, allows you to 'package' an application.</p>\n\n<p>You create a <code>Dockerfile</code> - which is analagous to a <code>Makefile</code> - that runs through the steps to install <code>perl</code> + dependencies (either via a package manager, or from CPAN).</p>\n\n<p>Once it has, you have a self contained, runnable 'image' that you can clone and create an instance of (a \"container\" in docker parlance). </p>\n\n<p>It's also quite useful - even if you don't then deploy via container - to figure out what the dependencies of this application/packages were. The version in the container has everything locally installed that it needed, because it was a clean build. </p>\n"}], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 934, "favorite_count": 2, "accepted_answer_id": 28718304, "answer_count": 3, "score": 2, "last_activity_date": 1463997909, "creation_date": 1424860740, "question_id": 28716807, "link": "https://stackoverflow.com/questions/28716807/bundling-up-a-perl-script-with-its-dependencies", "title": "Bundling up a perl script with its dependencies?", "body": "<p>I have a perl script that I've put together to do some monitoring and graphing.</p>\n\n<p>It works nicely on my dev system, where I have carte-blanch to install my own modules from CPAN.</p>\n\n<p>What I'm looking at doing is bundling it up to deploy onto another system. But here's the catch - this other system is 'standalone' and has no network connection. (And I have change control paperwork to fill in, indicating what I'm installing). </p>\n\n<p>As a result, I'd really like a nice easy way to figure out:\n - What modules my scripts are making use of. (Including dependencies)\n - how to easily grab them (<code>cpan get</code> probably)\n - Is there an easy way to tell what <em>external</em> binaries I'm using? (I'm using for sure <code>ssh</code> and <code>rrdtool</code> - the former is definitely installed, the latter probably not). </p>\n\n<p>I have a few thoughts on how to do this, but it strikes me as something that should be smoother.</p>\n\n<p>I may also need to deploy a new perl, so I'm pondering whether I'm better off 'installing' the modules with system perl (probably 5.8.8 on RHEL5), or just 'packaging' the whole thing in a directory of it's own with a standalone perl instance. </p>\n"}, {"tags": ["python", "html", "perl", "text-processing"], "comments": [{"owner": {"reputation": 159902, "user_id": 3297613, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/KHhzd.jpg?s=128&g=1", "display_name": "Avinash Raj", "link": "https://stackoverflow.com/users/3297613/avinash-raj"}, "edited": false, "score": 0, "creation_date": 1424859315, "post_id": 28716267, "comment_id": 45720177, "body": "What&#39;s your expected output?"}, {"owner": {"reputation": 4438, "user_id": 2572645, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/cTpKQ.jpg?s=128&g=1", "display_name": "Andy K", "link": "https://stackoverflow.com/users/2572645/andy-k"}, "reply_to_user": {"reputation": 159902, "user_id": 3297613, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/KHhzd.jpg?s=128&g=1", "display_name": "Avinash Raj", "link": "https://stackoverflow.com/users/3297613/avinash-raj"}, "edited": false, "score": 0, "creation_date": 1424859489, "post_id": 28716267, "comment_id": 45720283, "body": "@AvinashRaj see the updated question"}], "answers": [{"comments": [{"owner": {"reputation": 4438, "user_id": 2572645, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/cTpKQ.jpg?s=128&g=1", "display_name": "Andy K", "link": "https://stackoverflow.com/users/2572645/andy-k"}, "edited": false, "score": 0, "creation_date": 1424860658, "post_id": 28716519, "comment_id": 45720966, "body": "just wow. Can you explain a bit please , especially the <code>\\K.*?(?=&lt;a\\b)</code> ? What does this mean?"}, {"owner": {"reputation": 4438, "user_id": 2572645, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/cTpKQ.jpg?s=128&g=1", "display_name": "Andy K", "link": "https://stackoverflow.com/users/2572645/andy-k"}, "edited": false, "score": 0, "creation_date": 1424861800, "post_id": 28716519, "comment_id": 45721605, "body": "I&#39;ve got even more questions:   How does the script know , it should only encompass the message <b>below</b> and stop when it sees this part <code>&lt;a style=&quot;color:#8C8C8C;&quot; target=&quot;_blank&quot; href=&quot;#&quot;&gt;&lt;u&gt;cette page&lt;&#47;u&gt;&lt;&#47;a&gt;.&lt;&#47;td&gt;</code>  <b>The message</b>   <code>Assurez-vous de bien recevoir tous nos messages en ajoutant reteuteu@cab05.net a votre carnet d&#39;adresses.&lt;br &#47;&gt; Si vous avez des difficult&amp;eacute;s pour visualiser ce message, rendez-vous sur</code>"}, {"owner": {"reputation": 4438, "user_id": 2572645, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/cTpKQ.jpg?s=128&g=1", "display_name": "Andy K", "link": "https://stackoverflow.com/users/2572645/andy-k"}, "edited": false, "score": 0, "creation_date": 1424861910, "post_id": 28716519, "comment_id": 45721675, "body": "I feel like dumb ... -_-"}, {"owner": {"reputation": 159902, "user_id": 3297613, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/KHhzd.jpg?s=128&g=1", "display_name": "Avinash Raj", "link": "https://stackoverflow.com/users/3297613/avinash-raj"}, "reply_to_user": {"reputation": 4438, "user_id": 2572645, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/cTpKQ.jpg?s=128&g=1", "display_name": "Andy K", "link": "https://stackoverflow.com/users/2572645/andy-k"}, "edited": false, "score": 0, "creation_date": 1424861929, "post_id": 28716519, "comment_id": 45721689, "body": "did you want to do the same for all the td tags which was followed by an anchor tag?"}, {"owner": {"reputation": 4438, "user_id": 2572645, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/cTpKQ.jpg?s=128&g=1", "display_name": "Andy K", "link": "https://stackoverflow.com/users/2572645/andy-k"}, "edited": false, "score": 0, "creation_date": 1424862024, "post_id": 28716519, "comment_id": 45721732, "body": "I only wanted to remove the message <code>Assurez-vous de bien recevoir tous nos messages en ajoutant reteuteu@cab05.net a votre carnet d&#39;adresses.&lt;br &#47;&gt; Si vous avez des difficult&amp;eacute;s pour visualiser ce message, rendez-vous sur</code> . So you did fine. I&#39;m just confused on how you did it."}, {"owner": {"reputation": 4438, "user_id": 2572645, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/cTpKQ.jpg?s=128&g=1", "display_name": "Andy K", "link": "https://stackoverflow.com/users/2572645/andy-k"}, "edited": false, "score": 0, "creation_date": 1424862893, "post_id": 28716519, "comment_id": 45722243, "body": "Because the message is unique but the rest of html code can be more common. Does it make sense?"}, {"owner": {"reputation": 159902, "user_id": 3297613, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/KHhzd.jpg?s=128&g=1", "display_name": "Avinash Raj", "link": "https://stackoverflow.com/users/3297613/avinash-raj"}, "reply_to_user": {"reputation": 4438, "user_id": 2572645, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/cTpKQ.jpg?s=128&g=1", "display_name": "Andy K", "link": "https://stackoverflow.com/users/2572645/andy-k"}, "edited": false, "score": 0, "creation_date": 1424862925, "post_id": 28716519, "comment_id": 45722272, "body": "like i said before, <code>&lt;td style=\\&quot;color:#8C8C8C;font-size:10px;font-family:Arial,&#39;Helv&zwnj;&#8203;etica&#39;;text-align:ce&zwnj;&#8203;nter; padding:0 15px 0 15px;\\&quot;&gt;</code> part in my regex matches exactly the same part in your file then the upcommimg <code>\\K</code> discards this match and now the regex pointer is exists next to the discarded boundary. ie, the marker is next to <code>15px;\\&quot;&gt;</code> string. Now <code>.*?</code> matches all the remaining characters upto the <code>a</code> tag. Finally the perl replaces all the matched characters with <code>[{test}]</code>"}, {"owner": {"reputation": 4438, "user_id": 2572645, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/cTpKQ.jpg?s=128&g=1", "display_name": "Andy K", "link": "https://stackoverflow.com/users/2572645/andy-k"}, "edited": false, "score": 0, "creation_date": 1424863281, "post_id": 28716519, "comment_id": 45722461, "body": "Done sir. Thanks again. I need to check about Perl. This is definitely what I need to use most of the time in order to deal with strings replacement."}, {"owner": {"reputation": 4438, "user_id": 2572645, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/cTpKQ.jpg?s=128&g=1", "display_name": "Andy K", "link": "https://stackoverflow.com/users/2572645/andy-k"}, "edited": false, "score": 0, "creation_date": 1424865010, "post_id": 28716519, "comment_id": 45723475, "body": "one question because i&#39;m curious. Would it be easy to do that with python?"}], "tags": [], "owner": {"reputation": 159902, "user_id": 3297613, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/KHhzd.jpg?s=128&g=1", "display_name": "Avinash Raj", "link": "https://stackoverflow.com/users/3297613/avinash-raj"}, "is_accepted": true, "score": 1, "last_activity_date": 1424861379, "last_edit_date": 1424861379, "creation_date": 1424859871, "answer_id": 28716519, "question_id": 28716267, "link": "https://stackoverflow.com/questions/28716267/how-to-change-several-piece-of-html-code/28716519#28716519", "title": "how to change several piece of html code", "body": "<p>Through Perl.</p>\n\n<pre><code>$ perl -0777pe \"s/&lt;td style=\\\"color:#8C8C8C;font-size:10px;font-family:Arial,'Helvetica';text-align:center; padding:0 15px 0 15px;\\\"&gt;\\K.*?(?=&lt;a\\b)/[{test}] /sg\" file\n    &lt;td style=\"color:#8C8C8C;font-size:10px;font-family:Arial,'Helvetica';text-align:center; padding:0 15px 0 15px;\"&gt;[{test}] &lt;a style=\"color:#8C8C8C;\" target=\"_blank\" href=\"#\"&gt;&lt;u&gt;cette page&lt;/u&gt;&lt;/a&gt;.&lt;/td&gt;\n</code></pre>\n\n<p><a href=\"http://www.regular-expressions.info/keep.html\" rel=\"nofollow\"><code>\\K</code></a> discards the previously matched characters from printing at the final. <code>\\K</code> keeps the text matched so far out of the overall regex match. So the previously matched <code>&lt;td&gt;</code> tag is discarded. Then this <code>.*?</code> matches all the characters upto the beginning of <code>a</code> tag . Here <code>.</code> matches also the line breaks because we used DOTALL modifier <code>s</code>. <code>(?=&lt;a\\b)</code> positive lookahead which asserts that the match must be followed by <code>&lt;a</code> and a <code>\\b</code> boundary.</p>\n\n<p><code>-0777</code> turns the Record Separator value to null, thus allowing the regex to match the line breaks.</p>\n"}], "owner": {"reputation": 4438, "user_id": 2572645, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/cTpKQ.jpg?s=128&g=1", "display_name": "Andy K", "link": "https://stackoverflow.com/users/2572645/andy-k"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 53, "favorite_count": 0, "accepted_answer_id": 28716519, "answer_count": 1, "score": 0, "last_activity_date": 1424861379, "creation_date": 1424859176, "question_id": 28716267, "link": "https://stackoverflow.com/questions/28716267/how-to-change-several-piece-of-html-code", "title": "how to change several piece of html code", "body": "<p>I have the following lines in html pages</p>\n\n<pre><code>    &lt;td style=\"color:#8C8C8C;font-size:10px;font-family:Arial,'Helvetica';text-align:center; padding:0 15px 0 15px;\"&gt;Assurez-vous de bien recevoir tous nos messages en ajoutant reteuteu@cab05.net a votre carnet d'adresses.&lt;br /&gt;\nSi vous avez des difficult&amp;eacute;s pour visualiser ce message, rendez-vous sur &lt;a style=\"color:#8C8C8C;\" target=\"_blank\" href=\"#\"&gt;&lt;u&gt;cette page&lt;/u&gt;&lt;/a&gt;.&lt;/td&gt;\n</code></pre>\n\n<p>I need to replace the above with only</p>\n\n<pre><code>[{test}]\n</code></pre>\n\n<p>or like this one </p>\n\n<pre><code>href=\"#\"&gt;reteuteu.fr\n</code></pre>\n\n<p>And replace it with:</p>\n\n<pre><code>href=\"http://mm.eulerian.net/dynclick/reteuteu/?eml-publisher=reteuteu&amp;eml-name=deme_faible&amp;eemail={email}&amp;eurl=https://www.reteuteu.fr/?utm_source=ANIM&amp;utm_medium=Targeting&amp;utm_campaign=deme_faible&amp;utm_term=CCCC_seg_men&amp;utm_content=website\"&gt;reteuteu.fr\n</code></pre>\n\n<p>I've tried to keep it simple by using simple bash tools like this : <code>sed -e 's~SEARCH_STRING~REPLACE_STRING~g' &lt;string_to_be_searched&gt;</code></p>\n\n<p>Issue is sed works well for string that has one line but it bugs when I have line feed or metacharacters like <code>&amp;</code>.</p>\n\n<p>I heard python or perl can do the trick but I have no idea how to do it.</p>\n\n<p>Ultimately I want to be run it in this way</p>\n\n<pre><code>python script.py STRING_TO_SEARCH_WITH_LINE_FEED_OR_META_CHARACTERS STRING_TO_BE_REPLACE \n</code></pre>\n\n<p>or</p>\n\n<pre><code>perl script.pl STRING_TO_SEARCH_WITH_LINE_FEED_OR_META_CHARACTERS STRING_TO_BE_REPLACE \n</code></pre>\n\n<p>I read about HTQL or HTML parser but I need hints on how to do it.</p>\n\n<p>Many thanks for any clues you can give me.</p>\n\n<p><em>Expected output would be like this for the first example</em> </p>\n\n<pre><code>&lt;td style=\"color:#8C8C8C;font-size:10px;font-family:Arial,'Helvetica';text-align:center; padding:0 15px 0 15px;\"&gt;[{test}] &lt;a style=\"color:#8C8C8C;\" target=\"_blank\" href=\"#\"&gt;&lt;u&gt;cette page&lt;/u&gt;&lt;/a&gt;.&lt;/td&gt;\n</code></pre>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 39446, "user_id": 4301306, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a1461d0104809c90e2a252a2d4b0ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Wintermute", "link": "https://stackoverflow.com/users/4301306/wintermute"}, "edited": false, "score": 2, "creation_date": 1424856381, "post_id": 28715264, "comment_id": 45718256, "body": "This might be an XY problem. Does <a href=\"http://search.cpan.org/~oalders/HTTP-BrowserDetect-1.75/lib/HTTP/BrowserDetect.pm\" rel=\"nofollow noreferrer\">HTTP::BrowserDetect</a> help you?"}, {"owner": {"reputation": 334, "user_id": 1770135, "user_type": "registered", "accept_rate": 14, "profile_image": "https://i.stack.imgur.com/lYVze.jpg?s=128&g=1", "display_name": "pavan", "link": "https://stackoverflow.com/users/1770135/pavan"}, "reply_to_user": {"reputation": 39446, "user_id": 4301306, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a1461d0104809c90e2a252a2d4b0ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Wintermute", "link": "https://stackoverflow.com/users/4301306/wintermute"}, "edited": false, "score": 0, "creation_date": 1424856461, "post_id": 28715264, "comment_id": 45718311, "body": "actualy its a log file."}, {"owner": {"reputation": 39446, "user_id": 4301306, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a1461d0104809c90e2a252a2d4b0ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Wintermute", "link": "https://stackoverflow.com/users/4301306/wintermute"}, "edited": false, "score": 2, "creation_date": 1424856578, "post_id": 28715264, "comment_id": 45718386, "body": "HTTP::BrowserDetect works with strings, so that wouldn&#39;t be a problem."}], "answers": [{"comments": [{"owner": {"reputation": 334, "user_id": 1770135, "user_type": "registered", "accept_rate": 14, "profile_image": "https://i.stack.imgur.com/lYVze.jpg?s=128&g=1", "display_name": "pavan", "link": "https://stackoverflow.com/users/1770135/pavan"}, "edited": false, "score": 0, "creation_date": 1424871727, "post_id": 28717348, "comment_id": 45727854, "body": "Instead printing the matched one how can we st&#246;re in the variable,when iam storing its storing boolean value 1or 0"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "reply_to_user": {"reputation": 334, "user_id": 1770135, "user_type": "registered", "accept_rate": 14, "profile_image": "https://i.stack.imgur.com/lYVze.jpg?s=128&g=1", "display_name": "pavan", "link": "https://stackoverflow.com/users/1770135/pavan"}, "edited": false, "score": 0, "creation_date": 1424872215, "post_id": 28717348, "comment_id": 45728180, "body": "Trivially. See edit. That hash can be manipulated in various ways to produce precisely what you&#39;re after. (For example - replacing &#39;empty&#39; with <code>&quot;&quot;</code>) (bear in mind you may need to sort though, if you want a particular order. Or you could just print as you go)"}, {"owner": {"reputation": 334, "user_id": 1770135, "user_type": "registered", "accept_rate": 14, "profile_image": "https://i.stack.imgur.com/lYVze.jpg?s=128&g=1", "display_name": "pavan", "link": "https://stackoverflow.com/users/1770135/pavan"}, "edited": false, "score": 0, "creation_date": 1424876081, "post_id": 28717348, "comment_id": 45730906, "body": "criteria=InFormCriteria(cc=&#39;MZ&#39;,tend=123,cd=&#39;parts&#39;)  i need to extract key as &#39;criteria&#39; only but the above code produces &#39;tend&#39; and &#39;cd&#39; also . actually there are so many scenarios of these kind. previously regex entirely stucked here."}], "tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": false, "score": 1, "last_activity_date": 1424872178, "last_edit_date": 1424872178, "creation_date": 1424862252, "answer_id": 28717348, "question_id": 28715264, "link": "https://stackoverflow.com/questions/28715264/how-can-i-extract-the-values-from-this-key-value-pair/28717348#28717348", "title": "How can I extract the values from this key-value pair?", "body": "<p>It's more annoying than it sounds, since your string uses inconsistent delimiters. It'll be difficult to parse with an RE as a result, and will always be unreliable. </p>\n\n<p>Modules exist to do this - as mentioned by Wintermute, <a href=\"http://search.cpan.org/~oalders/HTTP-BrowserDetect-1.75/lib/HTTP/BrowserDetect.pm\" rel=\"nofollow\"><code>HTTP::BrowserDetect</code></a> is built for parsing this particular sort of string.</p>\n\n<p>If you're really set on doing it the hard way - the 'simple' split_on_delimiter approach won't work, thanks to having nested elements in brackets. So I'd suggest - pick out the keys with a regex (because they're always a word, followed by <code>=</code>). </p>\n\n<p>Then, create a bunch of 'sub' regexes, to parse that. </p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\nuse Data::Dumper;\n\nmy $string =\n    q{Category=, userAgent=Mozilla/5.0 (Windows NT 6.3; WOW64; Trident/7.0; rv:11.0) like Gecko, referringURL=https://www.localhost.com/account/pay?link=credit_card, criteria=InFormCriteria(cc='MZ',tend=123,cd='parts')};\n\nmy @keys = ( $string =~ m/(?:^|\\s)(\\w+)=/g );\nmy %parsed_thing;\n\nfor my $index ( 0 .. $#keys ) {\n    my $regex =\n          $keys[$index]\n        . '=(.*?)[, ]*'\n        . ( defined $keys[ $index + 1 ] ? $keys[ $index + 1 ] : '$' );\n    print \"Using a RE of: \", $regex, \"\\n\";\n\n    my ($value) = ( $string =~ m/$regex/ );\n    print \"\\tGot: $keys[$index] =&gt; $value\\n\";\n    $parsed_thing{ $keys[$index] } = $value;\n}\n\nprint join( '@@', values %parsed_thing ),\"\\n\";\n#or\nprint join( '@@', @parsed_thing{@keys} ),\"\\n\";\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2404, "user_id": 1259917, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/577edfc3837692b632394130b82b095a?s=128&d=identicon&r=PG", "display_name": "n0741337", "link": "https://stackoverflow.com/users/1259917/n0741337"}, "is_accepted": false, "score": 1, "last_activity_date": 1424883696, "creation_date": 1424883696, "answer_id": 28725054, "question_id": 28715264, "link": "https://stackoverflow.com/questions/28715264/how-can-i-extract-the-values-from-this-key-value-pair/28725054#28725054", "title": "How can I extract the values from this key-value pair?", "body": "<p>Your actual delimiter looks more like <code>,</code> ( comma followed by a space ) to me.  Provided that the values of the key=value pairs don't contain the same delimiter, using gawk you could:</p>\n\n<pre><code>gawk '{sub(/^\\w+=/, \"\"); gsub( /, \\w+=/, \"@@\"); print}'\n</code></pre>\n\n<p>which drops the key= part in the first field, then converts the others into <code>@@</code>.  Your sample data outputs like this for me:</p>\n\n<pre><code>@@Mozilla/5.0 (Windows NT 6.3; WOW64; Trident/7.0; rv:11.0) like Gecko@@https://www.localhost.com/account/pay?link=credit_card@@InFormCriteria(cc='MZ'@@123@@'parts')\n</code></pre>\n\n<p>If you really need to have empty values denoted as <code>\"\"</code>, you could use regular gawk/awk in a script like:</p>\n\n<pre><code>#!/usr/bin/awk -f\n\nBEGIN {FS=\", \"; OFS=\"@@\"}\n\n{\n    for(i=1; i&lt;=NF; i++) {\n        val = substr( $i, index( $i, \"=\" )+1 )\n        if( val==\"\" ) val=\"\\\"\\\"\"\n        printf \"%s%s\", val, (i&lt;NF?OFS:\"\\n\")\n    }\n}\n</code></pre>\n\n<p>Alternatively, you could just sub or gsub those fields to <code>\"\"</code> as well.  That script outputs the following for me:</p>\n\n<pre><code>\"\"@@Mozilla/5.0 (Windows NT 6.3; WOW64; Trident/7.0; rv:11.0) like Gecko@@https://www.localhost.com/account/pay?link=credit_card@@InFormCriteria(cc='MZ',tend=123,cd='parts')\n</code></pre>\n\n<p>These solutions both assume that each field in the form of key=value and that no values contain the <code>,</code> ( comma followed by a space ).  If the latter isn't true, then you might want to change the logging delimiter (if you can) to something that's more distinct.  Or, if you can determine distinct cases where <code>,</code> is in a value ( say between balance parens ), then you could alter those before parsing for primary key=value pairs.</p>\n"}], "owner": {"reputation": 334, "user_id": 1770135, "user_type": "registered", "accept_rate": 14, "profile_image": "https://i.stack.imgur.com/lYVze.jpg?s=128&g=1", "display_name": "pavan", "link": "https://stackoverflow.com/users/1770135/pavan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 107, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1424928635, "creation_date": 1424856136, "last_edit_date": 1424928635, "question_id": 28715264, "link": "https://stackoverflow.com/questions/28715264/how-can-i-extract-the-values-from-this-key-value-pair", "title": "How can I extract the values from this key-value pair?", "body": "<p>I have a key-value pair separated by ',', as shown below. I need to extract the values only, whether it exists or not.</p>\n\n<p><code>Category=, userAgent=Mozilla/5.0 (Windows NT 6.3; WOW64; Trident/7.0; rv:11.0) like Gecko, referringURL=https://www.localhost.com/account/pay?link=credit_card, criteria=InFormCriteria(cc='MZ',tend=123,cd='parts')</code></p>\n\n<p>I have used the following code,</p>\n\n<pre><code>while(&lt;FH&gt;){\n    while($_=~m/([^=]+)=([^\\s]+,?)/g){\n        print $1.\" \";\n    }\n    print \"\\n\";\n}\n</code></pre>\n\n<p>and I get the following output:</p>\n\n<p><code>, Mozilla/5.0 https://www.localhost.com/account/pay?link=credit_card, InFormCriteria(cc='MZ',tend=123,cd='parts')</code></p>\n\n<p>However, I need to get:</p>\n\n<p><code>\"\"@@Mozilla/5.0 (Windows NT 6.3; WOW64; Trident/7.0; rv:11.0) like Gecko@@https://www.localhost.com/account/pay?link=credit_card@@InFormCriteria(cc='MZ',tend=123,cd='parts')</code></p>\n\n<p>What am I doing wrong?</p>\n"}, {"tags": ["perl"], "answers": [{"comments": [{"owner": {"reputation": 2373, "user_id": 2218718, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/12e3ba20337c7021f2e115688a681652?s=128&d=identicon&r=PG", "display_name": "cuonglm", "link": "https://stackoverflow.com/users/2218718/cuonglm"}, "edited": false, "score": 1, "creation_date": 1424857178, "post_id": 28715431, "comment_id": 45718782, "body": "That&#39;s also my first thinking, just want a confirmation from community. Thanks for making it more clearly."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1424857750, "post_id": 28715431, "comment_id": 45719178, "body": "Beat me to it. I also thought the <code>stat</code> redundant, but have been caught out before on obscure usages of perl functions."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1424857783, "post_id": 28715431, "comment_id": 45719204, "body": "Might be useful to include how to deparse the script and &#39;clarify&#39; what it&#39;s doing."}, {"owner": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "reply_to_user": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 1, "creation_date": 1424858319, "post_id": 28715431, "comment_id": 45719547, "body": "@Sobrique Done.  And yeah, usually these things are taking advantage of some bizarre side effect, but I can&#39;t find one."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1424880504, "post_id": 28715431, "comment_id": 45734388, "body": "Re &quot;This would be incorrect because <code>(stat)[9]</code> can return 0 even if the file exists&quot;, though it&#39;s not likely to return 0 for a file you can remove."}, {"owner": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1424888816, "post_id": 28715431, "comment_id": 45740021, "body": "@ikegami How does that work?  There&#39;s lots of reasons (mostly mistakes) the mtime of a regular file might be set to 0."}], "tags": [], "owner": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "is_accepted": true, "score": 3, "last_activity_date": 1424858252, "last_edit_date": 1424858252, "creation_date": 1424856685, "answer_id": 28715431, "question_id": 28715226, "link": "https://stackoverflow.com/questions/28715226/perl-one-liner-to-empty-directory-explanation/28715431#28715431", "title": "Perl one-liner to empty directory explanation", "body": "<p>The stat is useless, it's probably a cargo cult attempt at performance optimization.</p>\n\n<p>You can run it through <a href=\"http://metacpan.org/pod/B::Deparse\" rel=\"nofollow\">B::Deparse</a> to see it's not doing anything funny.</p>\n\n<pre><code>$ perl -MO=Deparse -e 'for(&lt;*&gt;){((stat)[9]&lt;(unlink))}'\nuse File::Glob ();\nforeach $_ (&lt;*&gt;) {\n    (stat $_)[9] &lt; unlink($_);\n}\n-e syntax OK\n</code></pre>\n\n<p><code>(stat)[9]</code> is the file modification time in seconds since 1970, usually a large number.  <code>unlink</code> returns the number of files deleted, in this case its always going to be 0 or 1.  Nothing is checking that comparison anyway (add a -w and Perl will warn you about that).</p>\n\n<p>This will do the same thing and faster.</p>\n\n<pre><code>perl -e 'unlink for &lt;*&gt;'\n</code></pre>\n\n<p>I have two guesses.  First is the author meant to write <code>(stat)[9] &amp;&amp; unlink</code> which would check whether the file exists before unlinking it.  <a href=\"http://unix.derkeiler.com/Newsgroups/comp.unix.solaris/2008-03/msg01035.html\" rel=\"nofollow\">Apparently there's some voodoo about this sometimes being faster</a>.  This would be incorrect because <code>(stat)[9]</code> can return 0 even if the file exists.  Instead you'd want <code>-e &amp;&amp; unlink</code>.  It's silly since you've just read the list of files in the directory.  It's also non-atomic.  It's also likely slower no matter how the kernel or filesystem behaves because the -e represents dozens of extra lines of C code.</p>\n\n<p>My other guess is also optimization voodoo.  <a href=\"http://blog.liw.fi/posts/rm-is-too-slow/#comment-9dc55dd2ade91f204d97e555d177c1d0\" rel=\"nofollow\">I found this comment</a> about doing a stat in a child process so the inode is already in the filesystem cache.  That's not what the Perl code is doing, but it might be some cargo culting.</p>\n"}], "owner": {"reputation": 2373, "user_id": 2218718, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/12e3ba20337c7021f2e115688a681652?s=128&d=identicon&r=PG", "display_name": "cuonglm", "link": "https://stackoverflow.com/users/2218718/cuonglm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 593, "favorite_count": 0, "accepted_answer_id": 28715431, "answer_count": 1, "score": 2, "last_activity_date": 1424858252, "creation_date": 1424856004, "question_id": 28715226, "link": "https://stackoverflow.com/questions/28715226/perl-one-liner-to-empty-directory-explanation", "title": "Perl one-liner to empty directory explanation", "body": "<p><a href=\"http://www.slashroot.in/which-is-the-fastest-method-to-delete-files-in-linux\" rel=\"nofollow\">This article</a> pointed out one way to empty an directory with huge files with <code>perl</code>:</p>\n\n<pre><code>perl -e 'for(&lt;*&gt;){((stat)[9]&lt;(unlink))}'\n</code></pre>\n\n<p>It made me confusing since when it called <code>stat</code> and compare with return value of <code>unlink</code> for every files.</p>\n\n<p>I made a test without calling <code>stat</code> and the one-liner was faster. What's the purpose of calling <code>stat</code> here?</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 715, "user_id": 3324299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3fcf7437d3bd54d6b3eb443209330a31?s=128&d=identicon&r=PG&f=1", "display_name": "tinker", "link": "https://stackoverflow.com/users/3324299/tinker"}, "edited": false, "score": 0, "creation_date": 1424854293, "post_id": 28714502, "comment_id": 45717065, "body": "seems like what you need is <code>include</code> like in php . <a href=\"http://www.perlmonks.org/?node_id=393426\" rel=\"nofollow noreferrer\">perlmonks.org/?node_id=393426</a>"}, {"owner": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "edited": false, "score": 3, "creation_date": 1424854967, "post_id": 28714502, "comment_id": 45717424, "body": "<code>system</code> forks a sub-process, so <code>system(&#39;source &#47;directory&#47;.cshrc&amp;&#39;);</code> won&#39;t import environment variables if that&#39;s what you&#39;re expecting."}], "answers": [{"comments": [{"owner": {"reputation": 142, "user_id": 2155231, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/NpIdz.png?s=128&g=1", "display_name": "Demonic_Dog", "link": "https://stackoverflow.com/users/2155231/demonic-dog"}, "edited": false, "score": 0, "creation_date": 1424865804, "post_id": 28714904, "comment_id": 45723963, "body": "Thanks alot for you broad explanation and additional hits you have. I will be trying this today. :)"}], "tags": [], "owner": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "is_accepted": true, "score": 9, "last_activity_date": 1424854872, "creation_date": 1424854872, "answer_id": 28714904, "question_id": 28714502, "link": "https://stackoverflow.com/questions/28714502/how-to-load-a-bunch-of-perl-modules-into-a-perl-script/28714904#28714904", "title": "How to load a bunch of perl modules into a perl script", "body": "<p>Creating one module that loads other \"standard\" modules is the motivation for things like <a href=\"http://metacpan.org/pod/perl5i\">perl5i</a> and <a href=\"http://metacpan.org/pod/Modern::Perl\">Modern::Perl</a>.</p>\n\n<p>Pragma modules with lexical effect such as strict, warnings and autodie simply need to be loaded in your module's import routine.  Modules which export functions need to be told to export their modules elsewhere, which can be done with <a href=\"http://metacpan.org/pod/Import::Into\">Import::Into</a>.  Finally, classes simply need to be loaded.</p>\n\n<p>Since <a href=\"http://perldoc.perl.org/functions/use.html\"><code>use</code></a> happens at compile time, you need to do the equivalent at runtime which is <code>require</code>ing the module and calling its <code>import</code> method.</p>\n\n<p>Here's an example of turning on strict and warnings, loading Time::Local and loading Time::Piece, and activating the say and switch features.</p>\n\n<pre><code>package My::Perl;\n\nuse strict;\nuse warnings;\nuse Import::Into;\n\nsub import {\n    # import is called as a class method\n    my $class = shift;\n\n    # The class which 'use'd this module\n    my $caller = caller;\n\n    # same as \"use strict\" but happens when import() is called.\n    require strict;\n    \"strict\"-&gt;import;\n\n    # use warnings;\n    require warnings;\n    \"warnings\"-&gt;import;\n\n    # use Time::Local;\n    # use Time::Piece;\n    Time::Local-&gt;import::into($caller);\n    Time::Piece-&gt;import::into($caller);\n\n    # use feature qw(say switch);\n    require feature;\n    feature-&gt;import(qw(say switch));\n}\n\n1;\n</code></pre>\n\n<p>Now you just have to load that one module.</p>\n\n<pre><code>use My::Perl;\n\nsay localtime-&gt;year;\n</code></pre>\n\n<p>Don't go too crazy, you want these to be generically useful.  It's silly to load DBI and Tk if you're not going to use them.  If you want to load a bunch of Tk modules, make a separate My::Tk module to do that.  And I wouldn't have the modules execute any code for the same reason.</p>\n"}], "owner": {"reputation": 142, "user_id": 2155231, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/NpIdz.png?s=128&g=1", "display_name": "Demonic_Dog", "link": "https://stackoverflow.com/users/2155231/demonic-dog"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 154, "favorite_count": 4, "accepted_answer_id": 28714904, "answer_count": 1, "score": 3, "last_activity_date": 1424855736, "creation_date": 1424853496, "last_edit_date": 1424855736, "question_id": 28714502, "link": "https://stackoverflow.com/questions/28714502/how-to-load-a-bunch-of-perl-modules-into-a-perl-script", "title": "How to load a bunch of perl modules into a perl script", "body": "<p>This is what I wish to do:</p>\n\n<p>In every script I make/develop I always call perl libraries and sub routines like:</p>\n\n<hr>\n\n<pre><code>#! /directory/bin/perl\nsystem('source /directory/.cshrc&amp;');\n\nuse Net::Domain qw(hostname hostfqdn hostdomain);\nuse Time::Local;\nuse Time::Piece;\nuse Switch;\nuse Exporter;\n#use strict;\n\nuse Data::Dumper qw(Dumper);\n\nuse Time::Local;                                        \nuse Time::Piece; \nuse Time::Seconds();                                       \n\nuse Tk;\nuse Tk::BrowseEntry; \nuse Tk::Balloon;                                   \nuse Tk::widgets qw(Checkbutton BrowseEntry);            \nuse Tk::NoteBook;                                       \nuse Tk::Pane;                                           \n\nuse DBI;\nuse DBD::Oracle;\n$ORACLE_HOME = \"/lolDirectory/10.2.0/elinux\";    \n$ENV{ORACLE_HOME}=$ORACLE_HOME; \n\n###############\n# SUBROUTINES #\n###############\n\n&amp;ownerChecker;\n&amp;processChecker;    \n</code></pre>\n\n<hr>\n\n<p>I wish i can put all those to a file and load it to a perl script, in the same time running it as if it is part of the perl script itself like:</p>\n\n<hr>\n\n<pre><code>#! /directory/bin/perl\n\n# load the content of the file and run it as a part of the script\n</code></pre>\n\n<hr>\n\n<p>Is this possible? If it is possible? If it is possible, from calling libs to calling checker scripts could be very generic and standard. </p>\n"}, {"tags": ["perl", "ebcdic"], "answers": [{"comments": [{"owner": {"reputation": 77, "user_id": 3864357, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/7310a4bfc818a46f3ab21875e07b5adf?s=128&d=identicon&r=PG&f=1", "display_name": "lazy", "link": "https://stackoverflow.com/users/3864357/lazy"}, "edited": false, "score": 0, "creation_date": 1424870262, "post_id": 28714881, "comment_id": 45726805, "body": "my data file would be from mainframe system... will be having copy book based on that will update the <code>$template</code> . if i use some other value like <code>i &#47; I or p&#47; P</code> it would allow but the values which got converted is not correct."}, {"owner": {"reputation": 77, "user_id": 3864357, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/7310a4bfc818a46f3ab21875e07b5adf?s=128&d=identicon&r=PG&f=1", "display_name": "lazy", "link": "https://stackoverflow.com/users/3864357/lazy"}, "edited": false, "score": 0, "creation_date": 1424870549, "post_id": 28714881, "comment_id": 45726990, "body": "i have tried the same data with <a href=\"https://metacpan.org/pod/distribution/Convert-EBCDIC/lib/Convert/EBCDIC.pm\" rel=\"nofollow noreferrer\"><code>Convert::EBCDIC</code></a> the file got converted but other values which are not ebcdic are still present in convertedfile"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1424879562, "post_id": 28714881, "comment_id": 45733621, "body": "@Borodin, Some machines have byte orderings that are neither little- nor big-endian. For example, I believe there&#39;s one that stores 32-bit numbers as 3412"}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 0, "last_activity_date": 1424854806, "creation_date": 1424854806, "answer_id": 28714881, "question_id": 28713839, "link": "https://stackoverflow.com/questions/28713839/how-to-unpack-little-or-big-endian-in-convertibm390/28714881#28714881", "title": "how to unpack little or big endian in Convert::IBM390", "body": "<p>Do you realise that <em>all</em> multi-byte binary numbers must be either little- or big-endian?</p>\n\n<p>I assume it's an <code>i</code>/<code>I</code> or <code>s</code>/<code>S</code> field that you want to reverse the endianness of? It doesn't appear that <code>Convert::IBM390</code> will let you do that, but I'm not surprised as IBM System/360, System/370 and ESA/390 are all big-endian and you should never get any data that is little-endian. Where did your data come from?</p>\n\n<p>My best suggestion is that you write a simple conversion routine that takes a 32-bit value and returns the same value with its endianness reversed. Here's a program that implements <code>swap_endianness_32</code> and demonstrates its functionality.</p>\n\n<pre><code>use strict;\nuse warnings;\n\nprintf \"%08X\\n\", swap_endianness_32(0x12345678);\n\nsub swap_endianness_32 {\n    unpack 'N', pack 'V', shift;\n}\n</code></pre>\n\n<p><strong>output</strong></p>\n\n<pre><code>78563412\n</code></pre>\n"}], "owner": {"reputation": 77, "user_id": 3864357, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/7310a4bfc818a46f3ab21875e07b5adf?s=128&d=identicon&r=PG&f=1", "display_name": "lazy", "link": "https://stackoverflow.com/users/3864357/lazy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 859, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1424879515, "creation_date": 1424850756, "last_edit_date": 1424879515, "question_id": 28713839, "link": "https://stackoverflow.com/questions/28713839/how-to-unpack-little-or-big-endian-in-convertibm390", "title": "how to unpack little or big endian in Convert::IBM390", "body": "<p>I'm using <a href=\"https://metacpan.org/pod/distribution/Convert-IBM390/lib/Convert/IBM390.pm\" rel=\"nofollow\"><code>Convert::IBM390</code></a> to convert EBCDIC files to ASCII files.</p>\n\n<pre><code>#!/usr/bin/perl -w\n\nuse warnings;\nuse Convert::IBM390 qw(:all);\n\nopen EBCDIC, \"&lt;D:/EBCDIC.txt\" or die \"error -&gt; opening $!\";\nopen ASCII, \"&gt;D:/ASCII.txt\" or die \"error -&gt; opening $!\";\n\nmy $text;\nmy $template = 'e15.0 e15 z4 I2 I2 i2 N16.0 p11.0';\nbinmode EBCDIC;\nwhile (read (EBCDIC, $buffer, 67))\n{\n   @fields = unpackeb($template, $buffer);\n   $text= join(\",\",@fields);\n   print ASCII $text.\"\\n\";\n}\n\nclose EBCDIC;\nclose ASCII;\n</code></pre>\n\n<p>I got this script in this <a href=\"http://www.evanadowney.com/?cat=7\" rel=\"nofollow\">link</a></p>\n\n<p>I have problems when the EBCDIC data contain <strong><em>Little or Big Endian</em></strong> integers.</p>\n\n<p>I had searched for unpacking those character and used <a href=\"http://perldoc.perl.org/functions/pack.html\" rel=\"nofollow\"><strong><em>N/n V/v</em></strong></a> but those things are not accepted in this module.\ngot error as</p>\n\n<pre><code>Invalid type in unpackeb: 'N'\n</code></pre>\n\n<p>The EBCDIC FILE from the mainframe consists of following columns:</p>\n\n<pre><code>EBCDIC Decimal(15,0)\nEBCDIC String(15)\nZoned Decimal(4)\nunsigned little endian integer(2)\nunsigned big endian integer(2)\nsigned big endian integer(2)\nbig endian decimal(16,0)\npacked decimal(11,0)\n</code></pre>\n\n<p>Any suggestions ? </p>\n"}, {"tags": ["regex", "perl", "function", "postgresql-9.1"], "comments": [{"owner": {"reputation": 177, "user_id": 2774210, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/4b3218c62632ab958be9dccd529f7d7f?s=128&d=identicon&r=PG&f=1", "display_name": "samuraiexe", "link": "https://stackoverflow.com/users/2774210/samuraiexe"}, "reply_to_user": {"reputation": 159902, "user_id": 3297613, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/KHhzd.jpg?s=128&g=1", "display_name": "Avinash Raj", "link": "https://stackoverflow.com/users/3297613/avinash-raj"}, "edited": false, "score": 0, "creation_date": 1424850958, "post_id": 28713491, "comment_id": 45715505, "body": "I Tried if ($my_text =~ qr/^\\w+-\\w+|^\\w+(\\s+)?(!|,|\\&amp;|&#39;&#39;)?(\\s+)?\\w+/) { ------ But I get a blank result"}, {"owner": {"reputation": 15376, "user_id": 588916, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b9737fb0439f70903f8948ad3963d9cc?s=128&d=identicon&r=PG", "display_name": "collapsar", "link": "https://stackoverflow.com/users/588916/collapsar"}, "edited": false, "score": 0, "creation_date": 1424855434, "post_id": 28713491, "comment_id": 45717672, "body": "Only guessing,but you haven&#39;t declared <code>$pattern</code>."}], "answers": [{"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 0, "last_activity_date": 1424853263, "last_edit_date": 1424853263, "creation_date": 1424852323, "answer_id": 28714223, "question_id": 28713491, "link": "https://stackoverflow.com/questions/28713491/extracting-first-two-words-in-perl-using-regex/28714223#28714223", "title": "Extracting first two words in perl using regex", "body": "<p>The parentheses are mismatched in our regex pattern. It has three opening parentheses and four closing ones.</p>\n\n<p>Also, you have two single quotes in the middle of a singly-quoted string, so</p>\n\n<pre><code>'^\\w+-\\w+|^\\w+(\\s+)?(!|,|\\&amp;|'')?(\\s+)?\\w+)'\n</code></pre>\n\n<p>is parsed as two separate strings</p>\n\n<pre><code>'^\\w+-\\w+|^\\w+(\\s+)?(!|,|\\&amp;|'')?(\\s+)?\\w+)'\n</code></pre>\n\n<p>and</p>\n\n<pre><code>'^\\w+-\\w+|^\\w+(\\s+)?(!|,|\\&amp;|'\n')?(\\s+)?\\w+)'\n</code></pre>\n\n<p>But I can't suggest how to fix it as I don't understand your intention.</p>\n\n<p>Did you mean a double quote perhaps? In which case <code>(!|,|\\&amp;|\")?</code> can be written as <code>[!,&amp;\"]?</code></p>\n\n<hr>\n\n<p><strong>Update</strong></p>\n\n<p>At a rough guess I think you want this</p>\n\n<pre><code>my $regex = qr{ ^ \\w++ \\s* [-!,&amp;\"]* \\s* \\w+ }x;\n$temp = $1 if $my_text=~ /($regex)/;\n</code></pre>\n\n<p>but I can't be sure. If you describe what you're looking for in English then I can help you better. For instance, it's unclear why you don't have question marks, full stops, and semicolons in the list of intervening punctuation.</p>\n"}, {"tags": [], "owner": {"reputation": 3509, "user_id": 4243840, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aaeabd769bae1bf82fd4b8882fed6653?s=128&d=identicon&r=PG", "display_name": "JGNI", "link": "https://stackoverflow.com/users/4243840/jgni"}, "is_accepted": false, "score": 1, "last_activity_date": 1526896051, "last_edit_date": 1526896051, "creation_date": 1424978220, "answer_id": 28750913, "question_id": 28713491, "link": "https://stackoverflow.com/questions/28713491/extracting-first-two-words-in-perl-using-regex/28750913#28750913", "title": "Extracting first two words in perl using regex", "body": "<p>Extracting words is none trivial even in English. Take the following contrived example using <a href=\"https://metacpan.org/pod/Locale::CLDR\" rel=\"nofollow noreferrer\">Locale::CLDR</a></p>\n\n<pre><code>use 'Locale::CLDR';\nmy $locale = Locale::CLDR-&gt;new('en');\nmy @words = $locale-&gt;split_words('adf543. 123.25');\n</code></pre>\n\n<p><code>@words</code> now contains</p>\n\n<ul>\n<li>adf543</li>\n<li>.</li>\n<li>123.25</li>\n</ul>\n\n<p>Note that the full stop after <code>adf543</code> is split into a separate word but the one between <code>123</code> and <code>25</code> is kept as part of the number <code>123.25</code> even though the '.' is the same character</p>\n\n<p>If gets worse when you look at non English languages and much worse when you use non Latin scripts.</p>\n\n<p>You need to precisely define what you think a word is otherwise the following French gets split incorrectly.</p>\n\n<blockquote>\n  <p>Je avais dit \u00abElle a dit \u00abIl a dit \u00abNi\u00bb il ya trois secondes\u00bb\u00bb</p>\n</blockquote>\n"}], "owner": {"reputation": 177, "user_id": 2774210, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/4b3218c62632ab958be9dccd529f7d7f?s=128&d=identicon&r=PG&f=1", "display_name": "samuraiexe", "link": "https://stackoverflow.com/users/2774210/samuraiexe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 312, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1526896051, "creation_date": 1424849419, "last_edit_date": 1424855517, "question_id": 28713491, "link": "https://stackoverflow.com/questions/28713491/extracting-first-two-words-in-perl-using-regex", "title": "Extracting first two words in perl using regex", "body": "<p>I want to create extract the first two words from a sentence using a Perl function in PostgreSQL. In PostgreSQL, I can do this with:   </p>\n\n<pre><code>text = \"I am trying to make this work\";\n\nSelect substring(text from '(^\\w+-\\w+|^\\w+(\\s+)?(!|,|\\&amp;|'')?(\\s+)?\\w+)');\n</code></pre>\n\n<p>It would return \"I Am\" </p>\n\n<p>I tried to build a Perl function in Postgresql that does the same thing. </p>\n\n<pre><code>CREATE OR REPLACE FUNCTION extract_first_two (text)\n    RETURNS text AS \n    $$\n    my $my_text = $_[0];\n    my $temp;\n\n    $pattern = '^\\w+-\\w+|^\\w+(\\s+)?(!|,|\\&amp;|'')?(\\s+)?\\w+)';\n    my $regex = qr/$pattern/;\n    if ($my_text=~ $regex) {\n    $temp = $1;\n    }\n\n    return $temp;\n    $$ LANGUAGE plperl;\n</code></pre>\n\n<p>But I receive a syntax error near the regular expression. I am not sure what I am doing wrong.</p>\n"}, {"tags": ["linux", "perl"], "comments": [{"owner": {"reputation": 142, "user_id": 2155231, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/NpIdz.png?s=128&g=1", "display_name": "Demonic_Dog", "link": "https://stackoverflow.com/users/2155231/demonic-dog"}, "edited": false, "score": 0, "creation_date": 1424843896, "post_id": 28712199, "comment_id": 45712415, "body": "Additional: I dont want the directory to be included."}], "answers": [{"comments": [{"owner": {"reputation": 142, "user_id": 2155231, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/NpIdz.png?s=128&g=1", "display_name": "Demonic_Dog", "link": "https://stackoverflow.com/users/2155231/demonic-dog"}, "edited": false, "score": 0, "creation_date": 1424847649, "post_id": 28712224, "comment_id": 45713946, "body": "Thanks a lot for your answer. It helps a lot."}], "tags": [], "owner": {"reputation": 1087, "user_id": 4493368, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/14606ea8342583f94b4c66bcf392cadc?s=128&d=identicon&r=PG&f=1", "display_name": "Cui Heng", "link": "https://stackoverflow.com/users/4493368/cui-heng"}, "is_accepted": false, "score": 2, "last_activity_date": 1424843977, "creation_date": 1424843977, "answer_id": 28712224, "question_id": 28712199, "link": "https://stackoverflow.com/questions/28712199/linux-perl-a-script-printing-its-script-name/28712224#28712224", "title": "Linux Perl - A Script printing its script name?", "body": "<p>You can use File::Basename like this:</p>\n\n<pre><code>use File::Basename;\nprint basename(__FILE__), \"\\n\";\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 142, "user_id": 2155231, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/NpIdz.png?s=128&g=1", "display_name": "Demonic_Dog", "link": "https://stackoverflow.com/users/2155231/demonic-dog"}, "edited": false, "score": 0, "creation_date": 1424847682, "post_id": 28712527, "comment_id": 45713962, "body": "Thanks a lot for the added information. It really helped."}], "tags": [], "owner": {"reputation": 882, "user_id": 3965075, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/FLP7B.jpg?s=128&g=1", "display_name": "Praveen", "link": "https://stackoverflow.com/users/3965075/praveen"}, "is_accepted": true, "score": 2, "last_activity_date": 1424845828, "last_edit_date": 1424845828, "creation_date": 1424845374, "answer_id": 28712527, "question_id": 28712199, "link": "https://stackoverflow.com/questions/28712199/linux-perl-a-script-printing-its-script-name/28712527#28712527", "title": "Linux Perl - A Script printing its script name?", "body": "<p>You can get the name of running program in <code>$0</code> variable and to avoid the directory name we use the module File::Basename to get only the basename.</p>\n\n<pre><code>    use File::Basename;\n    my $name = basename($0);\n    print $name;\n</code></pre>\n\n<p><a href=\"http://perldoc.perl.org/perlvar.html\" rel=\"nofollow\">man perlvar</a> for other special variables</p>\n"}, {"comments": [{"owner": {"reputation": 142, "user_id": 2155231, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/NpIdz.png?s=128&g=1", "display_name": "Demonic_Dog", "link": "https://stackoverflow.com/users/2155231/demonic-dog"}, "edited": false, "score": 0, "creation_date": 1424853935, "post_id": 28713117, "comment_id": 45716881, "body": "Thanks a lot, additional useful information. I might use this in the future.. :)"}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 0, "last_activity_date": 1424848295, "last_edit_date": 1424848295, "creation_date": 1424847949, "answer_id": 28713117, "question_id": 28712199, "link": "https://stackoverflow.com/questions/28712199/linux-perl-a-script-printing-its-script-name/28713117#28713117", "title": "Linux Perl - A Script printing its script name?", "body": "<p>You can print both the name of the Perl script file and the process ID by writing this</p>\n\n<pre><code>printf(\"%s %d\\n\", $0 =~ m|([^\\\\/]+)$|, $$);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 29, "user_id": 3944111, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/C6i4D.gif?s=128&g=1", "display_name": "FiesoDuck", "link": "https://stackoverflow.com/users/3944111/fiesoduck"}, "is_accepted": false, "score": 0, "last_activity_date": 1424848351, "creation_date": 1424848351, "answer_id": 28713217, "question_id": 28712199, "link": "https://stackoverflow.com/questions/28712199/linux-perl-a-script-printing-its-script-name/28713217#28713217", "title": "Linux Perl - A Script printing its script name?", "body": "<pre><code>#!/usr/bin/perl\nprint $0;\n</code></pre>\n\n<p><code>$0</code> stores the name of the script</p>\n"}], "owner": {"reputation": 142, "user_id": 2155231, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/NpIdz.png?s=128&g=1", "display_name": "Demonic_Dog", "link": "https://stackoverflow.com/users/2155231/demonic-dog"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 130, "favorite_count": 2, "accepted_answer_id": 28712527, "answer_count": 4, "score": 2, "last_activity_date": 1424865402, "creation_date": 1424843846, "last_edit_date": 1495541189, "question_id": 28712199, "link": "https://stackoverflow.com/questions/28712199/linux-perl-a-script-printing-its-script-name", "title": "Linux Perl - A Script printing its script name?", "body": "<p>I am running a script named <strong>statusCron.pl</strong>.</p>\n\n<p>I want when I run that script, that script can detect/print its name which is <strong>statusCron.pl</strong>. By that I can detect its process ID so that if it found itself already running on the background it will kill itself.</p>\n\n<p>By this I can eliminate hardcoding and re-apply it to all of my scripts.</p>\n\n<p><a href=\"https://stackoverflow.com/questions/28712199/linux-perl-a-script-printing-its-script-name#comment-45712415\">Additional</a>: I dont want the directory to be included. </p>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 62965, "user_id": 3679490, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/70f98fb23b16862298ea208aedfd18ae?s=128&d=identicon&r=PG&f=1", "display_name": "vks", "link": "https://stackoverflow.com/users/3679490/vks"}, "edited": false, "score": 1, "creation_date": 1424843034, "post_id": 28711997, "comment_id": 45712133, "body": "<code>^\\$.*$</code> should do it for you"}, {"owner": {"reputation": 159902, "user_id": 3297613, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/KHhzd.jpg?s=128&g=1", "display_name": "Avinash Raj", "link": "https://stackoverflow.com/users/3297613/avinash-raj"}, "edited": false, "score": 0, "creation_date": 1424843072, "post_id": 28711997, "comment_id": 45712145, "body": "is that the <code>$t</code> appears only on the start?"}, {"owner": {"reputation": 159902, "user_id": 3297613, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/KHhzd.jpg?s=128&g=1", "display_name": "Avinash Raj", "link": "https://stackoverflow.com/users/3297613/avinash-raj"}, "edited": false, "score": 2, "creation_date": 1424843149, "post_id": 28711997, "comment_id": 45712166, "body": "it would be like <code>if($line =~ m&#47;\\$&#47;) {</code>"}, {"owner": {"reputation": 3058, "user_id": 1345768, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/V5Vru.png?s=128&g=1", "display_name": "Tim.Tang", "link": "https://stackoverflow.com/users/1345768/tim-tang"}, "edited": false, "score": 0, "creation_date": 1424844014, "post_id": 28711997, "comment_id": 45712456, "body": "you should escape <code>$</code> first as it is the keyword for regex"}, {"owner": {"reputation": 553, "user_id": 4428999, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/fde626b34e61a1cedac6b89017182997?s=128&d=identicon&r=PG&f=1", "display_name": "LearningToCode", "link": "https://stackoverflow.com/users/4428999/learningtocode"}, "reply_to_user": {"reputation": 159902, "user_id": 3297613, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/KHhzd.jpg?s=128&g=1", "display_name": "Avinash Raj", "link": "https://stackoverflow.com/users/3297613/avinash-raj"}, "edited": false, "score": 0, "creation_date": 1424844616, "post_id": 28711997, "comment_id": 45712688, "body": "@Avinash $t appears at the start after some spaces Thanks Avinash... It worked...!!!"}], "answers": [{"comments": [{"owner": {"reputation": 65435, "user_id": 2206004, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HCB1e.png?s=128&g=1", "display_name": "hwnd", "link": "https://stackoverflow.com/users/2206004/hwnd"}, "edited": false, "score": 1, "creation_date": 1424845308, "post_id": 28712380, "comment_id": 45712954, "body": "No I did not downvote. I was stating you could write it like this."}], "tags": [], "owner": {"reputation": 159902, "user_id": 3297613, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/KHhzd.jpg?s=128&g=1", "display_name": "Avinash Raj", "link": "https://stackoverflow.com/users/3297613/avinash-raj"}, "is_accepted": true, "score": 2, "last_activity_date": 1424844768, "creation_date": 1424844768, "answer_id": 28712380, "question_id": 28711997, "link": "https://stackoverflow.com/questions/28711997/compare-a-string-with-in-perl/28712380#28712380", "title": "Compare a string with &quot;$&quot; in Perl", "body": "<p>You could use this,</p>\n\n<pre><code>if($line =~ m/^\\h*\\$/m) {\nnext; #Go to next line of the file and do not process further\n}\n</code></pre>\n\n<p><code>^</code> asserts that we are at the start and <code>\\h*</code> matches zero or more horizontal space characters.</p>\n"}], "owner": {"reputation": 553, "user_id": 4428999, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/fde626b34e61a1cedac6b89017182997?s=128&d=identicon&r=PG&f=1", "display_name": "LearningToCode", "link": "https://stackoverflow.com/users/4428999/learningtocode"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 50, "favorite_count": 0, "accepted_answer_id": 28712380, "answer_count": 1, "score": 0, "last_activity_date": 1424844768, "creation_date": 1424842966, "question_id": 28711997, "link": "https://stackoverflow.com/questions/28711997/compare-a-string-with-in-perl", "title": "Compare a string with &quot;$&quot; in Perl", "body": "<p>I have a strings like this in the middle of a file that I am parsing.</p>\n\n<pre><code>$t\n$a\n</code></pre>\n\n<p>My aim is to eliminate such lines. So I want something like this...</p>\n\n<pre><code>if($line matches \"$\") {\nnext; #Go to next line of the file and do not process further\n}   \n</code></pre>\n\n<p>How can I accomplish this?</p>\n"}, {"tags": ["perl", "catalyst"], "answers": [{"tags": [], "owner": {"reputation": 597, "user_id": 1270448, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gEtlc.png?s=128&g=1", "display_name": "SimeonJM", "link": "https://stackoverflow.com/users/1270448/simeonjm"}, "is_accepted": false, "score": 0, "last_activity_date": 1424903954, "last_edit_date": 1424903954, "creation_date": 1424844748, "answer_id": 28712375, "question_id": 28711905, "link": "https://stackoverflow.com/questions/28711905/when-the-response-time-is-too-long-i-receive-a-proxy-error/28712375#28712375", "title": "When the response time is too long, I receive a proxy error", "body": "<p>From your description, a timeout could be occurring either:</p>\n\n<ol>\n<li>between your application server and the remote SMS gateway, or</li>\n<li>between your browser and the application server.</li>\n</ol>\n\n<h2>If the error is between your application server and the remote messaging gateway</h2>\n\n<ul>\n<li>If you are connecting to the SMS sending server through a proxy you control, try increasing the connection timeout for the proxy</li>\n<li>If you have maximum execution time set on your server, that might kill a page render after a certain amount of time.</li>\n<li>Try sending in smaller batches to reduce the duration of the request to the messaging server.</li>\n</ul>\n\n<p>Reducing the request duration (e.g. by sending messages in smaller batches) will reduce the risk of a timeout at either the remote server or an intermediate. It also has the advantage that you can update your progress as each batch sends. \nIt will make it easier to diagnose if a particular recipient phone number is causing an error on the remote server by narrowing down the list of possible problem numbers.</p>\n\n<h2>If the error is between your browser and your application</h2>\n\n<p>You might be running the message sending from the same process that generates the response to your browser. This will preventing a page from being constructed and returned to you quickly, and so either your remote server or an intermediate server may cause a time-out while you wait for the message sending to finish.</p>\n\n<p>Rather than waiting until a long-running operations has finished to return a page to your browser, it can be helpful to start using a message or job queuing system (e.g. <a href=\"https://metacpan.org/release/Gearman\" rel=\"nofollow\">Gearman</a>, <a href=\"http://www.rabbitmq.com/\" rel=\"nofollow\">RabbitMQ</a>). These systems allow you to put long-running tasks into a queue, so that a page can quickly generated and returned. By having the long-running tasks include progress updates (e.g. writing progress to the database), you can have a page that will show you the progress of the task as it runs.</p>\n"}, {"tags": [], "owner": {"reputation": 94, "user_id": 4165768, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zNwvo.jpg?s=128&g=1", "display_name": "Asad Ali Kanwal", "link": "https://stackoverflow.com/users/4165768/asad-ali-kanwal"}, "is_accepted": false, "score": 0, "last_activity_date": 1424847057, "creation_date": 1424847057, "answer_id": 28712914, "question_id": 28711905, "link": "https://stackoverflow.com/questions/28711905/when-the-response-time-is-too-long-i-receive-a-proxy-error/28712914#28712914", "title": "When the response time is too long, I receive a proxy error", "body": "<p>Its very simple you have to just pass with your proxy Keepalive=On parameter</p>\n\n<p>Eg:</p>\n\n<pre><code>http://localhost:5000/ Keepalive=On\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 597, "user_id": 1270448, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gEtlc.png?s=128&g=1", "display_name": "SimeonJM", "link": "https://stackoverflow.com/users/1270448/simeonjm"}, "edited": false, "score": 0, "creation_date": 1424904215, "post_id": 28717792, "comment_id": 45748360, "body": "You might want to mark your own answer as &#39;accepted&#39;, just so the question appears as &#39;answered&#39;."}], "tags": [], "owner": {"reputation": 82, "user_id": 4165675, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-xHxajcqxyLg/AAAAAAAAAAI/AAAAAAAACfg/T9K4elYKyNs/photo.jpg?sz=128", "display_name": "Sangeetha Pelluri", "link": "https://stackoverflow.com/users/4165675/sangeetha-pelluri"}, "is_accepted": true, "score": 0, "last_activity_date": 1424863507, "last_edit_date": 1492085615, "creation_date": 1424863507, "answer_id": 28717792, "question_id": 28711905, "link": "https://stackoverflow.com/questions/28711905/when-the-response-time-is-too-long-i-receive-a-proxy-error/28717792#28717792", "title": "When the response time is too long, I receive a proxy error", "body": "<p>I found a solution to the problem. I had to change my apache configuration for this. I was using ProxyPass and had to put a timeout for 10 minutes and keepalive on to my proxypass.</p>\n\n<p>Found my solution here:</p>\n\n<p><a href=\"https://serverfault.com/questions/185894/proxy-error-502-reason-error-reading-from-remote-server-with-apache-2-2-3-de\">https://serverfault.com/questions/185894/proxy-error-502-reason-error-reading-from-remote-server-with-apache-2-2-3-de</a></p>\n"}], "owner": {"reputation": 82, "user_id": 4165675, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-xHxajcqxyLg/AAAAAAAAAAI/AAAAAAAACfg/T9K4elYKyNs/photo.jpg?sz=128", "display_name": "Sangeetha Pelluri", "link": "https://stackoverflow.com/users/4165675/sangeetha-pelluri"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 751, "favorite_count": 0, "accepted_answer_id": 28717792, "answer_count": 3, "score": 0, "last_activity_date": 1424903954, "creation_date": 1424842516, "question_id": 28711905, "link": "https://stackoverflow.com/questions/28711905/when-the-response-time-is-too-long-i-receive-a-proxy-error", "title": "When the response time is too long, I receive a proxy error", "body": "<p>I have a process in the model that send SMS to more than 1000 users and updates the Database accordingly based on the response. This process take a while to complete. By the time the response comes back. I see a 502 proxy error in the browser.Reason : Error reading from remote server\nHow do I resolve this?</p>\n"}, {"tags": ["regex", "perl"], "answers": [{"tags": [], "owner": {"reputation": 2632, "user_id": 3156046, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5jWHS.jpg?s=128&g=1", "display_name": "HeadCode", "link": "https://stackoverflow.com/users/3156046/headcode"}, "is_accepted": false, "score": 1, "last_activity_date": 1424843638, "last_edit_date": 1424843638, "creation_date": 1424842089, "answer_id": 28711829, "question_id": 28711741, "link": "https://stackoverflow.com/questions/28711741/how-to-grep-the-word-between-symbols-using-perl/28711829#28711829", "title": "how to grep the word between symbols using perl", "body": "<p>Or, in Perl:</p>\n\n<pre><code>$string =~ /\\?(.+)\\?/;\n$result = $1;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 159902, "user_id": 3297613, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/KHhzd.jpg?s=128&g=1", "display_name": "Avinash Raj", "link": "https://stackoverflow.com/users/3297613/avinash-raj"}, "is_accepted": true, "score": 1, "last_activity_date": 1424842481, "creation_date": 1424842481, "answer_id": 28711895, "question_id": 28711741, "link": "https://stackoverflow.com/questions/28711741/how-to-grep-the-word-between-symbols-using-perl/28711895#28711895", "title": "how to grep the word between symbols using perl", "body": "<p>You could use capturing groups like below.</p>\n\n<pre><code>use strict;\nuse warnings;\nmy $line = \"hi how r u?what is your name?what is your age\";\nmy @str = $line =~ m/\\?([^?]*)\\?/g;\nprint \"@str\\n\";\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>what is your name\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 65435, "user_id": 2206004, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HCB1e.png?s=128&g=1", "display_name": "hwnd", "link": "https://stackoverflow.com/users/2206004/hwnd"}, "is_accepted": false, "score": 1, "last_activity_date": 1424844390, "last_edit_date": 1424844390, "creation_date": 1424843012, "answer_id": 28712007, "question_id": 28711741, "link": "https://stackoverflow.com/questions/28711741/how-to-grep-the-word-between-symbols-using-perl/28712007#28712007", "title": "how to grep the word between symbols using perl", "body": "<p>You can split your string on this metacharacter.</p>\n\n<pre><code>my @results = split /\\?/, $string;\nprint $results[1];\n</code></pre>\n"}], "owner": {"reputation": 47, "user_id": 4579401, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/b41c7d92113fc7a4b4a9411c747b2f79?s=128&d=identicon&r=PG&f=1", "display_name": "idiot on perl", "link": "https://stackoverflow.com/users/4579401/idiot-on-perl"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 104, "favorite_count": 0, "accepted_answer_id": 28711895, "answer_count": 3, "score": 1, "last_activity_date": 1424862226, "creation_date": 1424841634, "last_edit_date": 1424862226, "question_id": 28711741, "link": "https://stackoverflow.com/questions/28711741/how-to-grep-the-word-between-symbols-using-perl", "title": "how to grep the word between symbols using perl", "body": "<p>I need to grep the word between the symbols as shown below in an array.</p>\n\n<p><code>my $string = \"hi how r u&lt;what is your name&gt;what is your age\";</code></p>\n\n<p>i need to grep as </p>\n\n<pre><code>$str = what is yourname;\n</code></pre>\n"}, {"tags": ["perl", "session", "cookies", "cgi"], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 4988361, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e8550e98eef958bcab34634fe3561d02?s=128&d=identicon&r=PG&f=1", "display_name": "Codex", "link": "https://stackoverflow.com/users/4988361/codex"}, "is_accepted": false, "score": 0, "last_activity_date": 1433811383, "creation_date": 1433811383, "answer_id": 30721390, "question_id": 28711464, "link": "https://stackoverflow.com/questions/28711464/deleting-cookie-session-on-the-server-and-on-the-client-side-perl-cgi/30721390#30721390", "title": "Deleting Cookie / Session on the Server and on the Client Side Perl CGI", "body": "<p>I am not fully sure what you are having a problem with here.  It looks like this would work fine for a logout script.  Are you worried about the cookie not deleting?  After you delete the session object, the cookie would not make the session valid, so the cookie shouldn't matter.  I wrote the code that I use on my web page for the most part like this, and it works fine for a logout script.  The only major difference is that I used a database instead of a file for storing the session object(s).  It doesn't delete the cookie, but it does make that cookie no longer valid.</p>\n"}], "owner": {"reputation": 23, "user_id": 4245051, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/093abe01ed4db45c54d352eedd8eac9e?s=128&d=identicon&r=PG&f=1", "display_name": "Hello", "link": "https://stackoverflow.com/users/4245051/hello"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 954, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1433811383, "creation_date": 1424840366, "question_id": 28711464, "link": "https://stackoverflow.com/questions/28711464/deleting-cookie-session-on-the-server-and-on-the-client-side-perl-cgi", "title": "Deleting Cookie / Session on the Server and on the Client Side Perl CGI", "body": "<p>I'm running into a problem where my logout page is not removing the cookie. Can anyone tell me what's wrong? I'm trying to remove it on the server and on the client side. Down below I provided a sample of my code.</p>\n\n<pre><code>#!/usr/bin/perl\nuse CGI;\nuse CGI::Session;\nuse CGI::Carp qw (fatalsToBrowser);\n\nmy $q = new CGI;\nmy $sid = $q-&gt;cookie(\"Cool-123\") || undef;\n$session = new CGI::Session(undef, $sid, {Directory =&gt; '/tmp'});\n$session-&gt;delete();\nmy $cookie = $q-&gt;cookie(Cool-123 =&gt; '');\nprint $q-&gt;header( -cookie=&gt;$cookie ); \n\nprint &lt;&lt;END;    \n\n&lt;!doctype html&gt;\n&lt;html&gt;\n\n&lt;head&gt;\n&lt;meta charset=\"UTF-8\"&gt;\n&lt;meta http-equiv=\"Cache-Control\" content=\"no-cache, no-store, must-revalidate\" /&gt;\n&lt;meta http-equiv=\"Pragma\" content=\"no-cache\" /&gt;\n&lt;meta http-equiv=\"Expires\" content=\"0\" /&gt;\n\n&lt;!-- Javascript/Jquery\n=============================================================== --&gt;\n&lt;script src=\"/~js/redirect.js\"&gt;&lt;/script&gt;\n</code></pre>\n"}, {"tags": ["perl", "encoding", "utf-8", "encode", "ikiwiki"], "answers": [{"tags": [], "owner": {"reputation": 6468, "user_id": 293652, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/820308d5db420d7f0e1d0ba97e09f520?s=128&d=identicon&r=PG", "display_name": "Grant McLean", "link": "https://stackoverflow.com/users/293652/grant-mclean"}, "is_accepted": true, "score": 1, "last_activity_date": 1424836035, "creation_date": 1424836035, "answer_id": 28710771, "question_id": 28709936, "link": "https://stackoverflow.com/questions/28709936/perl-error-related-to-encode-pm/28710771#28710771", "title": "Perl error related to Encode.pm", "body": "<p>That error occurs when you try to decode something that's already decoded.</p>\n\n<p>To expand a little, in Perl you can have byte strings and character strings.  On input your data can be converted from bytes to a character string (e.g. using decode, or an IO layer).  On output the character string must be converted to bytes (e.g. using encode or an IO layer).</p>\n\n<p>It seems like in your case the <code>$octets</code> variable contains a string that has already been converted from bytes to characters.  You could workaround this by adding an early return:</p>\n\n<pre><code>return $octets if Encode::is_utf8($octets);\n</code></pre>\n"}], "owner": {"reputation": 21270, "user_id": 1150778, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/6b2790c74560690d1a476d9ee079a50b?s=128&d=identicon&r=PG&f=1", "display_name": "qazwsx", "link": "https://stackoverflow.com/users/1150778/qazwsx"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 949, "favorite_count": 0, "accepted_answer_id": 28710771, "answer_count": 1, "score": 0, "last_activity_date": 1424836035, "creation_date": 1424830184, "question_id": 28709936, "link": "https://stackoverflow.com/questions/28709936/perl-error-related-to-encode-pm", "title": "Perl error related to Encode.pm", "body": "<p>I have the following software:</p>\n\n<p>Ubuntu Linux 14.04 LTS</p>\n\n<pre><code>$ uname -a\nLinux XXX 3.13.0-45-generic #74-Ubuntu SMP Tue Jan 13 19:36:28 UTC 2015 x86_64 x86_64 x86_64 GNU/Linux\n</code></pre>\n\n<p>Perl 5.18:</p>\n\n<pre><code>$ perl -version\n\nThis is perl 5, version 18, subversion 2 (v5.18.2) built for x86_64-linux-gnu-thread-multi\n(with 41 registered patches, see perl -V for more detail)\n</code></pre>\n\n<p>and Encode.pm 2.49:</p>\n\n<pre><code>$ head -n 10 /usr/lib/perl/5.18/Encode.pm\n#\n# $Id: Encode.pm,v 2.49 2013/03/05 03:13:47 dankogai Exp dankogai $\n</code></pre>\n\n<p>When I use <a href=\"https://packages.debian.org/experimental/ikiwiki\" rel=\"nofollow\">ikiwiki</a>, which is a package using Encode.pm, I got the following error:</p>\n\n<pre><code>$ ikiwiki --setup ~/wiki.setup\nCannot decode string with wide characters at /usr/lib/perl/5.18/Encode.pm line 176.\n</code></pre>\n\n<p>Lines 166 - 180 of Encode.pm reads:</p>\n\n<pre><code>sub decode($$;$) {\n    my ( $name, $octets, $check ) = @_;\n    return undef unless defined $octets;\n    $octets .= '';\n    $check ||= 0;\n    my $enc = find_encoding($name);\n    unless ( defined $enc ) {\n        require Carp;\n        Carp::croak(\"Unknown encoding '$name'\");\n    }\n    my $string = $enc-&gt;decode( $octets, $check );\n    $_[1] = $octets if $check and !ref $check and !( $check &amp; LEAVE_SRC() );\n    return $string;\n}\n</code></pre>\n\n<p>Does any kind soul have idea how to fix this issue?</p>\n"}, {"tags": ["perl", "email", "ssl"], "comments": [{"owner": {"reputation": 1010, "user_id": 55276, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/454038f12793de98a5cb28f9c00ef728?s=128&d=identicon&r=PG", "display_name": "Fayland Lam", "link": "https://stackoverflow.com/users/55276/fayland-lam"}, "edited": false, "score": 0, "creation_date": 1424833936, "post_id": 28709237, "comment_id": 45709727, "body": "you need cpan install it first. <a href=\"http://www.cpan.org/modules/INSTALL.html\" rel=\"nofollow noreferrer\">cpan.org/modules/INSTALL.html</a>"}, {"owner": {"reputation": 870, "user_id": 604464, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c71612818ca9b86bc9906d47afd0e2f?s=128&d=identicon&r=PG", "display_name": "ratsbane", "link": "https://stackoverflow.com/users/604464/ratsbane"}, "edited": false, "score": 0, "creation_date": 1424835516, "post_id": 28709237, "comment_id": 45710112, "body": "Do I understand correctly that both of these scripts, the working and non-working ones are on the same Mac?  If so, then Net::SMTP::SSL clearly IS installed on that machine, so that&#39;s probably not it.  Why are you using the -I flag with lib?  That just adds &quot;lib&quot; to the start of the module search path that @INC contains, which probably isn&#39;t what you want.  Why do you need &quot;lib&quot; in the module search path?"}, {"owner": {"reputation": 51, "user_id": 4560454, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a23e6117d9b6b06b76d7423fb83448f6?s=128&d=identicon&r=PG&f=1", "display_name": "sam", "link": "https://stackoverflow.com/users/4560454/sam"}, "edited": false, "score": 0, "creation_date": 1424926487, "post_id": 28709237, "comment_id": 45754541, "body": "I installed with CPAN and like ratsbane said one of the scripts work.  I&#39;m not quite sure why the -Ilib is there.  I inherited this script as is and am just trying to add SMTP funtionality to it. there is a &quot;lib&quot; folder with some .pm&#39;s in it so I assume it is accessing those files and that is why that -Ilib flag is there."}], "answers": [{"comments": [{"owner": {"reputation": 51, "user_id": 4560454, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a23e6117d9b6b06b76d7423fb83448f6?s=128&d=identicon&r=PG&f=1", "display_name": "sam", "link": "https://stackoverflow.com/users/4560454/sam"}, "edited": false, "score": 0, "creation_date": 1424926745, "post_id": 28718891, "comment_id": 45754598, "body": "Thanks Sinan, I will try that.  Admittedly, i am following a tutorial a decade old: <a href=\"http://robertmaldon.blogspot.com/2006/10/sending-email-through-google-smtp-from.html\" rel=\"nofollow noreferrer\">robertmaldon.blogspot.com/2006/10/&hellip;</a>  but it seems to work for one script for some odd reason.  You are saying to nix the Net::SMTP::SSL in favor of the Net::SMTP module, is that right?"}, {"owner": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "reply_to_user": {"reputation": 51, "user_id": 4560454, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a23e6117d9b6b06b76d7423fb83448f6?s=128&d=identicon&r=PG&f=1", "display_name": "sam", "link": "https://stackoverflow.com/users/4560454/sam"}, "edited": false, "score": 0, "creation_date": 1424965085, "post_id": 28718891, "comment_id": 45775353, "body": "Yes, use a recent version of <code>Net::SMTP</code> which is actively being developed instead of <code>Net::SMTP::SSL</code> which served fine for a long time, but its latest version is now a decade old. HTH."}], "tags": [], "owner": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "is_accepted": true, "score": 1, "last_activity_date": 1424866777, "creation_date": 1424866777, "answer_id": 28718891, "question_id": 28709237, "link": "https://stackoverflow.com/questions/28709237/installing-netsmtpssl/28718891#28718891", "title": "Installing Net::SMTP::SSL", "body": "<p>I recently realized how old <a href=\"https://metacpan.org/pod/Net::SMTP::SSL\" rel=\"nofollow\">Net::SMTP::SSL</a> is when I tried to investigate a failing script. Loading the module fails due to</p>\n\n<pre><code>no strict 'refs';\nforeach ( keys %Net::SMTP:: ) {\n    next unless defined *{$Net::SMTP::{$_}}{CODE};\n    *{$_} = \\&amp;{\"Net::SMTP::$_\"};\n}\n</code></pre>\n\n<p>in <code>Net/SMTP/SSL.pm</code>:</p>\n\n<pre>[~/tmp/Net-SMTP-SSL-1.01]> prove -vb t/test.t\nt/test.t ..\n1..1\nnot ok 1 - use Net::SMTP::SSL;\n\n#   Failed test 'use Net::SMTP::SSL;'\n#   at t/test.t line 2.\n#     Tried to use 'Net::SMTP::SSL'.\n#     Error:  Not a GLOB reference at /Users/.../tmp/Net-SMTP-SSL-1.01/blib/lib/Net/SMTP/SSL.pm line 16.\n# Compilation failed in require at t/test.t line 2.\n# BEGIN failed--compilation aborted at t/test.t line 2.\n# Looks like you failed 1 test of 1.\nDubious, test returned 1 (wstat 256, 0x100)\nFailed 1/1 subtests\n...\nResult: FAIL</pre>\n\n<p>It turns out in the intervening decade, <a href=\"http://metacpan.org/pod/Net::SMTP\" rel=\"nofollow\">Net::SMTP</a> now incorporates the required functionality. So, just use that.</p>\n\n<pre>$ perl -MNet::SMTP -E 'say Net::SMTP->can_ssl'\nIO::Socket::SSL</pre>\n"}], "owner": {"reputation": 51, "user_id": 4560454, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a23e6117d9b6b06b76d7423fb83448f6?s=128&d=identicon&r=PG&f=1", "display_name": "sam", "link": "https://stackoverflow.com/users/4560454/sam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4315, "favorite_count": 0, "accepted_answer_id": 28718891, "answer_count": 1, "score": 0, "last_activity_date": 1424866777, "creation_date": 1424825509, "question_id": 28709237, "link": "https://stackoverflow.com/questions/28709237/installing-netsmtpssl", "title": "Installing Net::SMTP::SSL", "body": "<p>Hello I have run across a problem when I try to use Net::SMTP::SSL on my Mac (running OS X 10.10).  I have a perl script that runs fine using Net::SMTP::SSL, it looks like this:</p>\n\n<pre><code>use Net::SMTP::SSL;\n\nuse strict;\nuse Carp;\nuse Pod::Usage;\n\nsub send_mail {\nmy $to = 'phone@server.com';\nmy $subject = $_[1];\nmy $body = $_[2];\n\nmy $from = 'mail@server.com';\nmy $password = 'password';\n\nmy $smtp;\n\nif (not $smtp = Net::SMTP::SSL-&gt;new('smtp.gmail.com',\n    Port =&gt; 465,\n    Debug =&gt; 1)) {\n        die \"Could not connect to server\\n\";\n    }\n\n$smtp-&gt;auth($from, $password)\n|| die \"Authentication failed!\\n\";\n\n$smtp-&gt;mail($from . \"\\n\");\nmy @recepients = split(/,/, $to);\nforeach my $recp (@recepients) {\n    $smtp-&gt;to($recp . \"\\n\");\n}\n$smtp-&gt;data();\n$smtp-&gt;datasend(\"From: \" . $from . \"\\n\");\n$smtp-&gt;datasend(\"To: \" . $to . \"\\n\");\n$smtp-&gt;datasend(\"Subject: \" . $subject . \"\\n\");\n$smtp-&gt;datasend(\"\\n\");\n$smtp-&gt;datasend($body . \"\\n\");\n$smtp-&gt;dataend();\n$smtp-&gt;quit;\n}\n\n# Send away!\n&amp;send_mail('mail@server.com', 'Server just blew up', 'Some more detail');\n</code></pre>\n\n<p>I also have another script (in a separate folder) that starts off as:</p>\n\n<pre><code>#!/usr/bin/env perl -Ilib\nuse Net::SMTP::SSL;\n</code></pre>\n\n<p>my problem is that the second script doesn't work.  I get a command line error reporting it can't find Net/SMTP/SSL.pm in @INC</p>\n\n<p>I have the problem narrowed down to the shebang part #!/usr/bin/env perl -Ilib but I haven't a clue how to fix it. Any suggestions?</p>\n"}, {"tags": ["mysql", "perl"], "comments": [{"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1424860090, "post_id": 28708206, "comment_id": 45720616, "body": "And now you know why every table should have a primary key :-)"}], "answers": [{"tags": [], "owner": {"reputation": 605, "user_id": 995697, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/8795d62e6b116bc5ab9a4169b86ce847?s=128&d=identicon&r=PG", "display_name": "Lars", "link": "https://stackoverflow.com/users/995697/lars"}, "is_accepted": false, "score": 0, "last_activity_date": 1424820171, "creation_date": 1424820171, "answer_id": 28708355, "question_id": 28708206, "link": "https://stackoverflow.com/questions/28708206/perl-and-mysql-user-input-to-select-a-row/28708355#28708355", "title": "Perl and MySQL user input to select a row?", "body": "<p>Option 1 - You would have put a id field in the DB if you want to find by integer 3 because row 3 will not always be penguin from an SQL query.</p>\n\n<p>Option 2 - Dump the data into and array or hash and use the index of that to find the item from with in the variable and not the DB when 3 is captured from STIN.</p>\n"}, {"tags": [], "owner": {"reputation": 16278, "user_id": 4421474, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b931f645dc56015b93aeaa5e20d0b5f7?s=128&d=identicon&r=PG&f=1", "display_name": "Alex", "link": "https://stackoverflow.com/users/4421474/alex"}, "is_accepted": false, "score": 0, "last_activity_date": 1424820941, "creation_date": 1424820941, "answer_id": 28708488, "question_id": 28708206, "link": "https://stackoverflow.com/questions/28708206/perl-and-mysql-user-input-to-select-a-row/28708488#28708488", "title": "Perl and MySQL user input to select a row?", "body": "<p>Just use query:</p>\n\n<pre><code>my $select = $dbh-&gt;prepare('\nSET @id:=0; \nSELECT name, \n       @id = @id+1 \nFROM table\n');\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 7, "user_id": 4539255, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ea7e7328d01cdd9d669f5040a273c0b?s=128&d=identicon&r=PG&f=1", "display_name": "Resident Reporter", "link": "https://stackoverflow.com/users/4539255/resident-reporter"}, "edited": false, "score": 0, "creation_date": 1424874325, "post_id": 28708580, "comment_id": 45729625, "body": "Thanks, this is what I was looking for.  Don&#39;t have enough reputation to upvote you though, sorry."}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": true, "score": 1, "last_activity_date": 1424824108, "last_edit_date": 1424824108, "creation_date": 1424821554, "answer_id": 28708580, "question_id": 28708206, "link": "https://stackoverflow.com/questions/28708206/perl-and-mysql-user-input-to-select-a-row/28708580#28708580", "title": "Perl and MySQL user input to select a row?", "body": "<p>I misunderstood you at first but I've caught on. But it doesn't make much sense, as when you're entering a number into a Perl program you won't be working with the MySQL command-line tool, and won't be able to see what numbers to enter..</p>\n\n<p>What you need to do is to write your Perl program so that it prints all the <code>name</code> fields from the table together with a line number. Then your program can translate from an input animal number to its name because it knows what it printed.</p>\n\n<p>Something like this would work. Of course you will have to set the name, IP address and credentials correctly so that <code>DBI</code> can connect to the database.</p>\n\n<pre><code>use strict;\nuse warnings;\n\nuse DBI;\n\nmy $dbh = DBI-&gt;connect(\n    'DBI:mysql:database=animal_test',\n    'username',\n    'password',\n    { RaiseError =&gt; 1 },\n);\n\nmy $names = map @$_, $dbh-&gt;selectall_arrayref('SELECT name FROM animals');\nfor my $i ( 0 .. $#$names ) {\n  printf \"%3d: %s\\n\", $i+1, $names-&gt;[$i];\n}\nprint \"\\n\";\n\nprint \"Enter animal number: \";\nmy $animal = &lt;&gt;;\nchomp $animal;\n\nmy $name = $names-&gt;[$animal-1];\n\nprintf \"Animal chosen is %s\\n\", $name;\n</code></pre>\n"}], "owner": {"reputation": 7, "user_id": 4539255, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ea7e7328d01cdd9d669f5040a273c0b?s=128&d=identicon&r=PG&f=1", "display_name": "Resident Reporter", "link": "https://stackoverflow.com/users/4539255/resident-reporter"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 105, "favorite_count": 0, "accepted_answer_id": 28708580, "answer_count": 3, "score": 0, "last_activity_date": 1424824108, "creation_date": 1424819529, "last_edit_date": 1424820642, "question_id": 28708206, "link": "https://stackoverflow.com/questions/28708206/perl-and-mysql-user-input-to-select-a-row", "title": "Perl and MySQL user input to select a row?", "body": "<p>Suppose I have a simple database table that doesn't have an ID_KEY but has a name column. I want to display the output like this</p>\n\n<pre><code>+----+---------+\n|    | name    |\n+----+---------+\n|  1 | dog     |\n|  2 | cat     |\n|  3 | penguin |\n|  4 | lax     |\n|  5 | whale   |\n|  6 | ostrich |\n+----+---------+\n</code></pre>\n\n<p>Then have a <code>&lt;STDIN&gt;</code> for like, say, 3 to select penguin. 3 is just the line number that appears when you do the select call.</p>\n\n<p>Is there any way to do this, or is it only possible with an id key associated and then a subsequent select statement matching that id key?</p>\n"}, {"tags": ["regex", "perl", "logfile"], "answers": [{"comments": [{"owner": {"reputation": 596, "user_id": 4603195, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/0tvwN.png?s=128&g=1", "display_name": "Leslie", "link": "https://stackoverflow.com/users/4603195/leslie"}, "edited": false, "score": 0, "creation_date": 1424988703, "post_id": 28707965, "comment_id": 45789257, "body": "In Perl-style regex, a dot matches everything except a newline."}, {"owner": {"reputation": 481636, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "reply_to_user": {"reputation": 596, "user_id": 4603195, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/0tvwN.png?s=128&g=1", "display_name": "Leslie", "link": "https://stackoverflow.com/users/4603195/leslie"}, "edited": false, "score": 0, "creation_date": 1424989048, "post_id": 28707965, "comment_id": 45789415, "body": "See <a href=\"http://docstore.mik.ua/orelly/perl/cookbook/ch06_07.htm\" rel=\"nofollow noreferrer\">docstore.mik.ua/orelly/perl/cookbook/ch06_07.htm</a>, it says &quot;/s lets . match newline (normally it doesn&#39;t)&quot;. See <a href=\"https://regex101.com/r/qY4yB1/1\" rel=\"nofollow noreferrer\">regex101.com/r/qY4yB1/1</a>, PCRE (Perl compatible regular expressions) mode works with the input."}, {"owner": {"reputation": 596, "user_id": 4603195, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/0tvwN.png?s=128&g=1", "display_name": "Leslie", "link": "https://stackoverflow.com/users/4603195/leslie"}, "edited": false, "score": 0, "creation_date": 1425317281, "post_id": 28707965, "comment_id": 45903442, "body": "I stand corrected; my &quot;Programming Perl&quot; book is obviously out of date.  Still, after several days with your suggested regex in my ignore.conf file, I am still seeing the lines that should have been deleted.  if you will forgive an off-the-top-of-my-head guess, perhaps logwatch is not interpreting the regex to the current standard?  Is it possible to write a regex that does not assume dot captures new line characters, so this could be tested?  Again, thanks for your help."}, {"owner": {"reputation": 481636, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "reply_to_user": {"reputation": 596, "user_id": 4603195, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/0tvwN.png?s=128&g=1", "display_name": "Leslie", "link": "https://stackoverflow.com/users/4603195/leslie"}, "edited": false, "score": 0, "creation_date": 1425331736, "post_id": 28707965, "comment_id": 45911331, "body": "@Leslie, maybe you did not specify the singleline regex option? I guess there is no possibility to pass it as an explicit option, but inline switch should work. Try this: <code>(?s)From\\s+123\\.123\\.123\\.10.+(?=\\s+From)</code>. Also, I guess the regex flavor you need is Python (acc. to this page: <a href=\"https://mathias-kettner.de/checkmk_logfiles.html\" rel=\"nofollow noreferrer\">mathias-kettner.de/checkmk_logfiles.html</a>)"}, {"owner": {"reputation": 596, "user_id": 4603195, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/0tvwN.png?s=128&g=1", "display_name": "Leslie", "link": "https://stackoverflow.com/users/4603195/leslie"}, "edited": false, "score": 0, "creation_date": 1426101366, "post_id": 28707965, "comment_id": 46238980, "body": "I&#39;ve been using the new regex you suggested for the last few days, and I&#39;m still seeing the lines that should have been removed.  Do you have any other ideas I can try?"}, {"owner": {"reputation": 481636, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "reply_to_user": {"reputation": 596, "user_id": 4603195, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/0tvwN.png?s=128&g=1", "display_name": "Leslie", "link": "https://stackoverflow.com/users/4603195/leslie"}, "edited": false, "score": 0, "creation_date": 1426110112, "post_id": 28707965, "comment_id": 46243942, "body": "It seems Perl has nothing to do with Logwatch. <a href=\"http://www.softpanorama.info/Logs/Log_analysers/Logwatch/customarization.shtml\" rel=\"nofollow noreferrer\">softpanorama.info/Logs/Log_analysers/Logwatch/&hellip;</a>: &quot;ignore.conf: This file specifies regular expressions that, when matched by the output of logwatch, will suppress the matching line, regardless of which service is being executed&quot;. So, it operates on a single <b>line</b>. There is a workaround: you can use a macro inside your mail client to remove unnecessary data. I could help with VBA if you use MS Office."}, {"owner": {"reputation": 481636, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "reply_to_user": {"reputation": 596, "user_id": 4603195, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/0tvwN.png?s=128&g=1", "display_name": "Leslie", "link": "https://stackoverflow.com/users/4603195/leslie"}, "edited": false, "score": 0, "creation_date": 1426110214, "post_id": 28707965, "comment_id": 46243988, "body": "There is another post saying that &quot;it seems that Regex is NOT accepted in the ignore.conf file. Adding the line &#39;adjusting local clock by&#39; by itself to the file then makes the script ignore those lines.&quot; <a href=\"https://bbs.archlinux.org/viewtopic.php?id=47534\" rel=\"nofollow noreferrer\">bbs.archlinux.org/viewtopic.php?id=47534</a>"}, {"owner": {"reputation": 596, "user_id": 4603195, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/0tvwN.png?s=128&g=1", "display_name": "Leslie", "link": "https://stackoverflow.com/users/4603195/leslie"}, "edited": false, "score": 0, "creation_date": 1426256362, "post_id": 28707965, "comment_id": 46309953, "body": "When I said that Logwatch used Perl-style regex expressions, I was going by the comments in this thread: <a href=\"http://serverfault.com/questions/9904/using-ignore-conf-with-logwatch\">http://serverfault.com/questions/9904/using-ignore-conf-with&zwnj;&#8203;-logwatch</a>.  That&#39;s what I get for believing everything I read online. :(  I&#39;m running Logwatch on a RedHat Linux server, so VBA isn&#39;t an option, unfortunately.  At any rate, I do appreciate all your help; thank you very much."}], "tags": [], "owner": {"reputation": 481636, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "is_accepted": true, "score": 1, "last_activity_date": 1424818406, "creation_date": 1424818406, "answer_id": 28707965, "question_id": 28707211, "link": "https://stackoverflow.com/questions/28707211/multi-line-regex-for-logwatch-ignore-conf/28707965#28707965", "title": "multi-line regex for Logwatch ignore.conf", "body": "<p>If dot also captures new line characters, then this regex pattern should suffice:</p>\n\n<p><code>From\\s+123\\.123\\.123\\.10.+(?=\\s+From)</code></p>\n"}], "owner": {"reputation": 596, "user_id": 4603195, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/0tvwN.png?s=128&g=1", "display_name": "Leslie", "link": "https://stackoverflow.com/users/4603195/leslie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 963, "favorite_count": 0, "accepted_answer_id": 28707965, "answer_count": 1, "score": 3, "last_activity_date": 1424818406, "creation_date": 1424815313, "question_id": 28707211, "link": "https://stackoverflow.com/questions/28707211/multi-line-regex-for-logwatch-ignore-conf", "title": "multi-line regex for Logwatch ignore.conf", "body": "<p>I'm using Logwatch on a machine running a firewall.  Every day I get an email full of entries like the following:</p>\n\n<pre><code>From 123.123.123.10 - 28087 packets\n   To 123.123.123.1 - 2 packets\n      Service: http (tcp/80) (Firewall Allow) - 2 packets\n   To 123.123.123.2 - 1 packet\n      Service: http (tcp/80) (Firewall Allow) - 1 packet\n   To 123.123.123.3 - 7 packets\n      Service: https (tcp/443) (Firewall Allow) - 7 packets\nFrom 123.123.123.11 - 28087 packets\n   To 123.123.123.1 - 2 packets\n      Service: http (tcp/80) (Firewall Allow) - 2 packets\n   To 123.123.123.2 - 1 packet\n      Service: http (tcp/80) (Firewall Allow) - 1 packet\n   To 123.123.123.3 - 7 packets\n      Service: https (tcp/443) (Firewall Allow) - 7 packets\n</code></pre>\n\n<p>I would like to put an entry in my ignore.conf file that skips all the information for a specific system or subnet.  Since the ignore.conf entries are just Perl-style regular expressions, if I put</p>\n\n<pre><code>^    From 123\\.123\\.123\\.10\n</code></pre>\n\n<p>in the file, the matching \"From\" line is deleted, but all the other lines remain.  My question is, can I construct a single regex that will match not only the \"From\" line, but all the lines that follow it, until the next line beginning with \"^    From\" occurs?  I know you can do this with sed, but I'm not sure if it's possible with just a regex in ignore.conf.  Thanks in advance to all who respond.</p>\n"}, {"tags": ["mysql", "regex", "performance", "perl"], "comments": [{"owner": {"reputation": 7565, "user_id": 1021515, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/Z9QcP.jpg?s=128&g=1", "display_name": "mwp", "link": "https://stackoverflow.com/users/1021515/mwp"}, "edited": false, "score": 0, "creation_date": 1424812564, "post_id": 28705639, "comment_id": 45702322, "body": "I think you&#39;re on the right track. What is your end goal for this &quot;precomputed index?&quot; How often do the Books and Keywords tables change?"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1424817976, "post_id": 28705639, "comment_id": 45705023, "body": "Are you saying that your <code>books</code> table has just <code>title</code> and <code>book</code> as columns, and your <code>keywords</code> table has <code>id</code> and <code>keyword</code>? That sounds like someone has done only half of the database design. The <code>books</code> table rally needs an <code>id</code> column as well, to save indexing it by the title string, and you need a junction table <code>keywords_by_book</code> that has <code>book_title</code>and <code>keyword_id</code> as foreign keys, and defines what keywords appear in each book. That table will take a while to produce, but once it is in place the lookups will be much faster than anything you could write in pure Perl."}, {"owner": {"reputation": 5, "user_id": 4602803, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8e99d6d6d5dd998d85e025e1d8787200?s=128&d=identicon&r=PG&f=1", "display_name": "Tim Geig", "link": "https://stackoverflow.com/users/4602803/tim-geig"}, "edited": false, "score": 0, "creation_date": 1424963329, "post_id": 28705639, "comment_id": 45774201, "body": "No, of course there is a &#39;books.id&#39; and a couple more columns but this would have just complicated my problem"}], "answers": [{"comments": [{"owner": {"reputation": 5, "user_id": 4602803, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8e99d6d6d5dd998d85e025e1d8787200?s=128&d=identicon&r=PG&f=1", "display_name": "Tim Geig", "link": "https://stackoverflow.com/users/4602803/tim-geig"}, "edited": false, "score": 0, "creation_date": 1424816211, "post_id": 28706524, "comment_id": 45704220, "body": "Algorithmically there is now way around, that&#39;s unfortunately true.Would you do that outside the database, as well. (Like e.g. perl scripting) or might a stored MySQL procedure be quicker?"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "reply_to_user": {"reputation": 5, "user_id": 4602803, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8e99d6d6d5dd998d85e025e1d8787200?s=128&d=identicon&r=PG&f=1", "display_name": "Tim Geig", "link": "https://stackoverflow.com/users/4602803/tim-geig"}, "edited": false, "score": 0, "creation_date": 1424817590, "post_id": 28706524, "comment_id": 45704850, "body": "Hard to say. Probably will be more efficient &quot;at source&quot; simply due to having to fetch stuff before processing. But might be a tradeoff if you can move the processor cost off the DB server. Especially as this is a nice parallel problem."}], "tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": true, "score": 0, "last_activity_date": 1424817914, "last_edit_date": 1495539813, "creation_date": 1424812820, "answer_id": 28706524, "question_id": 28705639, "link": "https://stackoverflow.com/questions/28705639/how-can-i-match-relating-values-in-two-database-tables/28706524#28706524", "title": "How can I match relating values in two database tables?", "body": "<p>Algorithmically, I can't see any shortcuts - you've got to check each title for each keyword, and so the two loops you've got are about the only way to do that. </p>\n\n<p>What I'd offer as a way to speed the process is that you can compile regular expressions - and it's worth doing the the scenario you've got. </p>\n\n<p>Perl normally compiles a static regex, but if it contains a variable, it can't. You can, however, use:</p>\n\n<p><a href=\"https://stackoverflow.com/questions/952998/is-there-a-way-to-precompile-a-regex-in-perl\">Is there a way to precompile a regex in Perl?</a></p>\n\n<p>which'll improve things somewhat. You <em>might</em> find something like:</p>\n\n<pre><code>my $regex = join ( \"|\", keys %keywords );\n$regex = qr/$regex/; \n</code></pre>\n\n<p>It <em>may</em> be more efficient to make a 30,000 word compiled RE, than to test each individually. You'd need to test it yourself to check though. (<a href=\"http://search.cpan.org/~timb/Devel-NYTProf-5.07/lib/Devel/NYTProf.pm\" rel=\"nofollow noreferrer\"><code>Devel::NYTProf</code></a> might help)</p>\n\n<p>I would also suggest - it looks like the way your code is, the complete contents of a book is loaded into <code>$content</code>.  You want to avoid doing that with more than one at a time - which it looks like you are. But I'd suggest you need to be cautious about bulk fetching all your books from your DB - fetch one at a time, and then check it, assuming <code>$content</code> is fairly large. </p>\n\n<p>I would add - this problem will scale well, as you don't have data dependencies. You could probably use threading or forking in Perl to parallelise. But be cautious, as DBI isn't thread safe. (or at least, not necessarily)</p>\n"}, {"tags": [], "owner": {"reputation": 15668, "user_id": 149076, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/ZHnYp.jpg?s=128&g=1", "display_name": "Jim Dennis", "link": "https://stackoverflow.com/users/149076/jim-dennis"}, "is_accepted": false, "score": 2, "last_activity_date": 1424815239, "last_edit_date": 1424815239, "creation_date": 1424814178, "answer_id": 28706915, "question_id": 28705639, "link": "https://stackoverflow.com/questions/28705639/how-can-i-match-relating-values-in-two-database-tables/28706915#28706915", "title": "How can I match relating values in two database tables?", "body": "<p>At first blush this sounds like you want to create a <a href=\"http://en.wikipedia.org/wiki/Junction_table\" rel=\"nofollow\">junction table</a> relating books to key_words.  In fact you might want to create two junction tables --- one relating <em>titles</em> to key_words and the other relating <em>contents</em> to key_words.</p>\n\n<p>A junction table simple consists of pairs of columns, each of which \"REFERENCES FOREIGN KEY\"... one for the \"book\" ID and the other for the \"key_word\" ID.</p>\n\n<p>You'd still need to perform the nest loops to create these junction key references and that table could be huge (a row for every combination of key_word and title/contents).  But queries could be quite fast.</p>\n\n<p>You'd have roughly three types of <em>simple</em> queries through either of these junction tables.  One finds all books containing a given key_word, another finds all key_words associated with a given book and the last tells you if a given key_word/book combination exists.</p>\n\n<p>(Other, more complex queries could find things like intersections and set differences of books and key_words --- all books that contain references to \"dolphin(s)\" and to \"pet(s).\"  Further considerations would also apply to word-stemming and you might want to use a library to normalized words into their stems).</p>\n\n<p>Junction tables normally have a composite key on both of their columns (and normally don't have a surrogate key of their own).  This implicitly creates an index while also imposing the UNIQUE constraint on that composite.  The \"REFERENCES FOREIGN KEY\" clause also ensure referential integrity of the associations --- and implies that you have to create the book/title and key_word entries <em>before</em> you can create any associations.  (Further any deletions of these entities would necessitate either removing all junction entries or using a CASCADE option on the DDL).</p>\n"}], "owner": {"reputation": 5, "user_id": 4602803, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8e99d6d6d5dd998d85e025e1d8787200?s=128&d=identicon&r=PG&f=1", "display_name": "Tim Geig", "link": "https://stackoverflow.com/users/4602803/tim-geig"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 68, "favorite_count": 1, "accepted_answer_id": 28706524, "answer_count": 2, "score": 0, "last_activity_date": 1424818153, "creation_date": 1424809696, "last_edit_date": 1424818153, "question_id": 28705639, "link": "https://stackoverflow.com/questions/28705639/how-can-i-match-relating-values-in-two-database-tables", "title": "How can I match relating values in two database tables?", "body": "<p>To simplify my problem, lets say I have a table with a lot of books and their respective content. On the other hand I have a keyword table. I would like to find the matching pairs. Please see the simple Perl script below which illustrates the problem nicely.</p>\n\n<pre><code>#title =&gt; content\n%books = (\n    \"Foodworld\" =&gt; \"Cheesburgers and Hamburgers are the best you can ...\",\n    \"Marvelous Salad\" =&gt; \"Russian dressing is superb when ...\",\n    \"Delicious Steaks\" =&gt; \"Only BBQ RipEye\"\n);\n\n#id =&gt; keyword\n%keywords = (\n    \"1234\" =&gt; \"Cheeseburgers\",\n    \"2345\" =&gt; \"dressing\",\n    \"9789\" =&gt; \"Hamburgers\"\n);\n\nwhile ( my ($title,$content) = each %books ) {\n  while ( my ($keywordID, $keyword) = each %keywords ) {\n    if ( $content =~ /$keyword/ ) {\n      print \"$title \\t $keywordID \\n\";\n    }\n  }\n}\n</code></pre>\n\n<p>The output will be:</p>\n\n<pre><code>Marvelous Salad  2345\nFoodworld        1234\nFoodworld        9789\n</code></pre>\n\n<p>My problem is, that the collection of books contains ~70,000 titles and the list of keywords ~30,000 words. Both are in separate tables on a MySQL server. Any suggestions? How would you solve this task? Could you just point me in a good direction?</p>\n"}, {"tags": ["arrays", "regex", "perl", "hash"], "comments": [{"owner": {"reputation": 65435, "user_id": 2206004, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HCB1e.png?s=128&g=1", "display_name": "hwnd", "link": "https://stackoverflow.com/users/2206004/hwnd"}, "edited": false, "score": 0, "creation_date": 1424807640, "post_id": 28704672, "comment_id": 45699585, "body": "Just a note: You don&#39;t need to use anchors in every alternation. You can use a non-capturing group to group your expressions. e.g <code>qr&#47;^(?:Acct ID|Account(?: No)?)$&#47;i</code>"}], "answers": [{"comments": [{"owner": {"reputation": 387, "user_id": 3842777, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/bFxen.jpg?s=128&g=1", "display_name": "JDE876", "link": "https://stackoverflow.com/users/3842777/jde876"}, "edited": false, "score": 0, "creation_date": 1424809586, "post_id": 28705144, "comment_id": 45700705, "body": "I am getting warnings, &quot;Use of uninitialized value $Account_Name_ in array element at ......&quot; @collapsar"}, {"owner": {"reputation": 15376, "user_id": 588916, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b9737fb0439f70903f8948ad3963d9cc?s=128&d=identicon&r=PG", "display_name": "collapsar", "link": "https://stackoverflow.com/users/588916/collapsar"}, "reply_to_user": {"reputation": 387, "user_id": 3842777, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/bFxen.jpg?s=128&g=1", "display_name": "JDE876", "link": "https://stackoverflow.com/users/3842777/jde876"}, "edited": false, "score": 0, "creation_date": 1424809690, "post_id": 28705144, "comment_id": 45700763, "body": "What does your data look like? do you have additional code in your perl script? I didn&#39;t receive the warnings using your code + the 2 line list_2.txt file."}, {"owner": {"reputation": 387, "user_id": 3842777, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/bFxen.jpg?s=128&g=1", "display_name": "JDE876", "link": "https://stackoverflow.com/users/3842777/jde876"}, "edited": false, "score": 0, "creation_date": 1424810210, "post_id": 28705144, "comment_id": 45701026, "body": "I&#39;m guessing you didnt get warnings etc. because I left out use strict; use warnings; in my script.  But I am getting warnings and the output is only producing Account number,Account number dj870-1234,dj870-1234.  Otherwise is close. @collapsar"}, {"owner": {"reputation": 387, "user_id": 3842777, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/bFxen.jpg?s=128&g=1", "display_name": "JDE876", "link": "https://stackoverflow.com/users/3842777/jde876"}, "edited": false, "score": 0, "creation_date": 1424810276, "post_id": 28705144, "comment_id": 45701069, "body": "oh of course!! my ($Account_Name_, $CLIENT_);  Thanks for the tips!!  @collapsar"}], "tags": [], "owner": {"reputation": 15376, "user_id": 588916, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b9737fb0439f70903f8948ad3963d9cc?s=128&d=identicon&r=PG", "display_name": "collapsar", "link": "https://stackoverflow.com/users/588916/collapsar"}, "is_accepted": true, "score": 0, "last_activity_date": 1424810178, "last_edit_date": 1424810178, "creation_date": 1424807992, "answer_id": 28705144, "question_id": 28704672, "link": "https://stackoverflow.com/questions/28704672/perl-retrieve-index-of-array-on-regex-match-and-print/28705144#28705144", "title": "Perl retrieve index of array on regex match and print", "body": "<p>You need to move your print statement to output your data lines - these do not match, so in the original code the print statement is never reached !</p>\n\n<pre><code>use warnings;\n\nopen(FILE, \"list_2.txt\") or die \"Cannot open file: $!\";\nmy $Account_Name = qr/^Acct ID$|^Account No$|^Account$|^ACCOUNT NUMBER$|Account Number|Account.*?Number|^Account$|^Account #$|^Account_ID$|^Account ID$/i;\nmy $CLIENT = qr/^CLIENT_NAME$|^Account Long Name$|^ACCOUNT NAME$|^Account Name$|^Name$|portfolio.*?description|^Account Description$/i;\n\nmy ($Account_Name_, $CLIENT_);\nwhile (my $line = &lt;FILE&gt;) {\n    chomp $line;\n    my @array = split(/,/, $line);\n    if (my ($matched) = grep $array[$_] =~  /$Account_Name/, 0..$#array) {\n        $Account_Name_ = $matched;\n        if (my ($matched) = grep $array[$_] =~  /$CLIENT/, 0..$#array) {\n            $CLIENT_ = $matched;\n        }\n    }\n    print $array[$Account_Name_],\",\",$array[$CLIENT_],\"\\n\";\n}\n\nclose(FILE);\n</code></pre>\n"}], "owner": {"reputation": 387, "user_id": 3842777, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/bFxen.jpg?s=128&g=1", "display_name": "JDE876", "link": "https://stackoverflow.com/users/3842777/jde876"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 115, "favorite_count": 0, "accepted_answer_id": 28705144, "answer_count": 1, "score": 0, "last_activity_date": 1424811163, "creation_date": 1424806497, "last_edit_date": 1424811163, "question_id": 28704672, "link": "https://stackoverflow.com/questions/28704672/perl-retrieve-index-of-array-on-regex-match-and-print", "title": "Perl retrieve index of array on regex match and print", "body": "<p>I am looking to extract columns based off of header names in a comma (or tab) delimited file.  I have a scalar variable that matches many header possibilities I named '$Acct_Name', among ones.  I want to read the file(column headers), match it to what I have in '$Acct_Name' and print the matched column along with its data etc.</p>\n\n<p><strong>Here is my code:</strong></p>\n\n<pre><code>open(FILE, \"list_2.txt\") or die \"Cannot open file: $!\";\nmy $Account_Name = qr/^Acct ID$|^Account No$|^Account$|^ACCOUNT NUMBER$|Account Number|Account.*?Number|^Account$|^Account #$|^Account_ID$|^Account ID$/i;\nmy $CLIENT = qr/^CLIENT_NAME$|^Account Long Name$|^ACCOUNT NAME$|^Account Name$|^Name$|portfolio.*?description|^Account Description$/i;\n\nwhile (my $line = &lt;FILE&gt;) {\n    chomp $line;\n    my @array = split(/,/, $line);\n    my %index;\n    @index{@array} = (0..$#array);\n    my $Account_Name_ = $index{$Account_Name};\n    if (my ($matched) = grep $array[$_] =~  /$Account_Name/, 0..$#array) {\n        $Account_Name_ = $matched;\n        my $CLIENT_ = $index{$CLIENT};\n        if (my ($matched) = grep $array[$_] =~  /$CLIENT/, 0..$#array) {\n            $CLIENT_ = $matched;\n            print $array[$Account_Name_],\",\",$array[$CLIENT_],\"\\n\";\n        }\n    }\n}\n\nclose(FILE);\n</code></pre>\n\n<p><strong>Data, list_2.txt</strong></p>\n\n<p>Account number,order_num,Name<br>\ndj870-1234,12334566,josh trust 1992  </p>\n\n<p><strong>My Results</strong></p>\n\n<p>Account number,Name</p>\n\n<p><strong>Desried Out</strong></p>\n\n<p>Account number,Name<br>\ndj870-1234,josh  </p>\n\n<p>For some reason I am only able to print the column names based on the match.  How can I grab the data as well?</p>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 6526, "user_id": 120050, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/0be7e82463532256777530ccaba04d29?s=128&d=identicon&r=PG", "display_name": "Oesor", "link": "https://stackoverflow.com/users/120050/oesor"}, "edited": false, "score": 1, "creation_date": 1424804739, "post_id": 28704012, "comment_id": 45697984, "body": "You could indeed use a regular expression for that. What have you tried? If you&#39;re looking for a generic how-to, you may want to try reading the regular expression portion of the intro documentation at <a href=\"http://perldoc.perl.org/perlintro.html#Regular-expressions\" rel=\"nofollow noreferrer\">perldoc.perl.org/perlintro.html#Regular-expressions</a>"}, {"owner": {"reputation": 52821, "user_id": 632407, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/AfGWW.jpg?s=128&g=1", "display_name": "jm666", "link": "https://stackoverflow.com/users/632407/jm666"}, "edited": false, "score": 4, "creation_date": 1424805445, "post_id": 28704012, "comment_id": 45698321, "body": "something like? <code>exit unless $input =~ &#47;^xxxxx-xxxx-xxxx$&#47;;</code>"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1424805819, "post_id": 28704012, "comment_id": 45698525, "body": "Depending what you&#39;re doing with your input, sometimes &#39;trying to use it&#39; is also quite a good form of validation. E.g. see if a file exists and is readable. etc."}, {"owner": {"reputation": 736, "user_id": 2783903, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/ecd8d52090a933ee3362bd05b95e8e6c?s=128&d=identicon&r=PG&f=1", "display_name": "JonB", "link": "https://stackoverflow.com/users/2783903/jonb"}, "edited": false, "score": 0, "creation_date": 1424806318, "post_id": 28704012, "comment_id": 45698822, "body": "What have you tried?  And please also show us an actual example of your input."}, {"owner": {"reputation": 4329, "user_id": 3917091, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/04c742a0661e8f6dd68e8a1ce4345fa0?s=128&d=identicon&r=PG&f=1", "display_name": "Regular Jo", "link": "https://stackoverflow.com/users/3917091/regular-jo"}, "edited": false, "score": 1, "creation_date": 1424807061, "post_id": 28704012, "comment_id": 45699244, "body": "Right, what are x&#39;s supposed to be? Numbers? Letters? Either? Anything? Is the pattern actually strictly <code>5characters-4characters-4characters</code>? These things really matter for how strict the validation can be."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1424807402, "post_id": 28704012, "comment_id": 45699453, "body": "<code>my $input; do { chomp( $input = &lt;&gt; ) } while $input ne &#39;xxxxx-xxxx-xxxx&#39;</code>"}], "answers": [{"comments": [{"owner": {"reputation": 15014, "user_id": 3821981, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/QKE9Z.jpg?s=128&g=1", "display_name": "Saifur", "link": "https://stackoverflow.com/users/3821981/saifur"}, "edited": false, "score": 0, "creation_date": 1424817489, "post_id": 28705725, "comment_id": 45704807, "body": "Please add explanation to the answer"}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 1, "last_activity_date": 1424818669, "last_edit_date": 1424818669, "creation_date": 1424810065, "answer_id": 28705725, "question_id": 28704012, "link": "https://stackoverflow.com/questions/28704012/how-to-check-the-format-of-keyboard-input-for-a-perl-script/28705725#28705725", "title": "How to check the format of keyboard input for a Perl script?", "body": "<pre><code>$foo =~ /^.{5}-.{4}-.{4}\\z/s\n</code></pre>\n\n<p>For example, this will repeatedly ask for the value until it gets a valid one.</p>\n\n<pre><code>my $foo;\nwhile (1) {\n   print(\"Please provide foo (xxxxx-xxxx-xxxx): \");\n   my $foo = &lt;STDIN&gt;;\n   die(\"EOF\\n\") if !defined($foo);\n   chomp($foo);\n   last if $foo =~ /^.{5}-.{4}-.{4}\\z/s;\n   print(\"Invalid input\\n\");\n}\n</code></pre>\n"}], "owner": {"reputation": 65, "user_id": 4096236, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/dcd2938e9ca516fb8a144d6690803e98?s=128&d=identicon&r=PG&f=1", "display_name": "cedrajin21", "link": "https://stackoverflow.com/users/4096236/cedrajin21"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 146, "favorite_count": 0, "closed_date": 1424870866, "answer_count": 1, "score": -2, "last_activity_date": 1424818669, "creation_date": 1424804337, "last_edit_date": 1424807763, "question_id": 28704012, "link": "https://stackoverflow.com/questions/28704012/how-to-check-the-format-of-keyboard-input-for-a-perl-script", "closed_reason": "Not suitable for this site", "title": "How to check the format of keyboard input for a Perl script?", "body": "<p>My Perl script just takes whatever you give as an input, and I want make it more robust by checking the pattern of the input string. My input string has to be in the format <code>xxxxx-xxxx-xxxx</code>. How can I check that?</p>\n"}, {"tags": ["perl", "terminal", "tput"], "answers": [{"tags": [], "owner": {"reputation": 3984, "user_id": 1801086, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ef4c0400ffff14d5e1c16ca3856c09ba?s=128&d=identicon&r=PG", "display_name": "tjd", "link": "https://stackoverflow.com/users/1801086/tjd"}, "is_accepted": true, "score": 3, "last_activity_date": 1424899445, "last_edit_date": 1424899445, "creation_date": 1424804851, "answer_id": 28704151, "question_id": 28703767, "link": "https://stackoverflow.com/questions/28703767/refresh-multi-line-output-in-perl/28704151#28704151", "title": "Refresh Multi-Line Output in Perl", "body": "<p>Generally programs that do this kind of thing either use a fixed location on the screen, or remember how many lines they've output and jump back the appropriate ammount.</p>\n\n<p>It may also be helpful to note that most terminal emulation windows respond to a Clear Screen command by simply scrolling down enough for the window to appear blank.  This means that any information previously on screen is still available \"up above\".  Just don't clear the screen with every pass through the <code>while</code> loop.  Starting with a clear/store combo may be just what you need.</p>\n\n<p>Instead of shelling out for your cursor control, you might try to <a href=\"https://metacpan.org/pod/Curses\" rel=\"nofollow\"><code>use Curses</code></a> or <a href=\"https://metacpan.org/pod/Term::ANSIScreen\" rel=\"nofollow\"><code>use Term::ANSIScreen</code></a> for finer control of your terminal without all those extra processes.</p>\n\n<p>Extra Credit:  If you <em>insist</em> on shelling out for cursor control strings, don't spawn <code>tput</code> commands with every iteration of the loop.  Record it's output, and just print it anew for each pass.</p>\n\n<p>Changing your print line to something like <code>print @ANSI_control_strings, @lines;</code> could have the added advantage that <code>scalar @lines</code> will be an accurate account of how many lines you may want to jump back if you change from backticks to a piped open.</p>\n"}], "owner": {"reputation": 8522, "user_id": 303148, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/SiwuY.png?s=128&g=1", "display_name": "hennes", "link": "https://stackoverflow.com/users/303148/hennes"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1318, "favorite_count": 0, "accepted_answer_id": 28704151, "answer_count": 1, "score": 0, "last_activity_date": 1424899445, "creation_date": 1424803506, "question_id": 28703767, "link": "https://stackoverflow.com/questions/28703767/refresh-multi-line-output-in-perl", "title": "Refresh Multi-Line Output in Perl", "body": "<p>I'm working on a script that is meant to check a certain status, output the result, sleep for a short time and then start everything over again. The output consists of multiple lines and I want the script to update the output that means to print on the same lines again. It's supposed to work on Mac and Linux. This is what I have so far:</p>\n\n<pre><code>#! /usr/bin/perl\n\nuse strict;\n\nprint `tput sc`; # Store cursor position\n\nmy @lines;\n\nwhile (1) {\n    @lines = ();\n\n    push(@lines, `tput rc`); # Restore cursor position\n    push(@lines, `tput ed`); # Clear from cursor to end of screen\n    push(@lines, `dd if=/dev/urandom bs=1 count=1`); # This is just an example\n\n    print @lines;\n\n    sleep 1;\n}\n</code></pre>\n\n<p>It works fine as long as I'm not calling the script with my cursor at the end of the terminal window. In the latter case the cursor stays at the end of the window after printing so restoring it's original position does effectively nothing and the next output just goes to a new line.</p>\n\n<p>How can I avoid that?</p>\n\n<p>I don't want to call <code>tput clear</code> or <code>tput init</code> since that might loose any previous commands and output. I was thinking about scrolling the window so that the prompt is at the top line before I start outputting but that would require the current cursor row and I can't see how to get that with <code>tput</code>.</p>\n\n<p>Alternatively, I could remember the number of lines that were printed and then move the cursor back using <code>tput rin</code>. However, that doesn't work when the output is too long and gets broken across two or more terminal lines.</p>\n"}, {"tags": ["perl", "datetime"], "comments": [{"owner": {"reputation": 1253964, "user_id": 22656, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/6d8ebb117e8d83d74ea95fbdd0f87e13?s=128&d=identicon&r=PG", "display_name": "Jon Skeet", "link": "https://stackoverflow.com/users/22656/jon-skeet"}, "edited": false, "score": 0, "creation_date": 1424800641, "post_id": 28702872, "comment_id": 45695661, "body": "Just subtract 24 hours from now (just like you do in Testing123), and then compare that with the value. You don&#39;t need to compute the difference between the values and now - you just need to work out a single point in time which is your cutoff."}, {"owner": {"reputation": 89, "user_id": 1559885, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ar7iC.jpg?s=128&g=1", "display_name": "OldDogLearningNewPerlTricks", "link": "https://stackoverflow.com/users/1559885/olddoglearningnewperltricks"}, "reply_to_user": {"reputation": 1253964, "user_id": 22656, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/6d8ebb117e8d83d74ea95fbdd0f87e13?s=128&d=identicon&r=PG", "display_name": "Jon Skeet", "link": "https://stackoverflow.com/users/22656/jon-skeet"}, "edited": false, "score": 0, "creation_date": 1424801315, "post_id": 28702872, "comment_id": 45696047, "body": "Tried that. I don&#39;t know how to compare them. That is why I am here, out of complete frustration after 11 hours of attempts."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1424801495, "post_id": 28702872, "comment_id": 45696147, "body": "You really need to <code>use warnings</code> at the top of your Perl programs, as well as indenting them properly so that you, as well as others who read your code, can understand how it is structured."}, {"owner": {"reputation": 1253964, "user_id": 22656, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/6d8ebb117e8d83d74ea95fbdd0f87e13?s=128&d=identicon&r=PG", "display_name": "Jon Skeet", "link": "https://stackoverflow.com/users/22656/jon-skeet"}, "edited": false, "score": 0, "creation_date": 1424802687, "post_id": 28702872, "comment_id": 45696826, "body": "@OldDogLearningNewPerlTricks: I can&#39;t believe it&#39;s really that hard to compare values. I&#39;d expect just <code>&gt;</code> to work. Perhaps you should try just a <i>very</i> simple example which just takes <code>DateTime-&gt;now</code> and <code>DateTime-&gt;now-&gt;add( days =&gt; -1 )</code> and compares them."}], "answers": [{"comments": [{"owner": {"reputation": 89, "user_id": 1559885, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ar7iC.jpg?s=128&g=1", "display_name": "OldDogLearningNewPerlTricks", "link": "https://stackoverflow.com/users/1559885/olddoglearningnewperltricks"}, "edited": false, "score": 0, "creation_date": 1424801426, "post_id": 28703113, "comment_id": 45696116, "body": "Trying this now.  I was really confused with clone."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 89, "user_id": 1559885, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ar7iC.jpg?s=128&g=1", "display_name": "OldDogLearningNewPerlTricks", "link": "https://stackoverflow.com/users/1559885/olddoglearningnewperltricks"}, "edited": false, "score": 0, "creation_date": 1424801452, "post_id": 28703113, "comment_id": 45696127, "body": "<code>clone</code> prevents <code>$dt1</code> from being changed by <code>add</code>."}, {"owner": {"reputation": 89, "user_id": 1559885, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ar7iC.jpg?s=128&g=1", "display_name": "OldDogLearningNewPerlTricks", "link": "https://stackoverflow.com/users/1559885/olddoglearningnewperltricks"}, "edited": false, "score": 0, "creation_date": 1424801814, "post_id": 28703113, "comment_id": 45696335, "body": "Can&#39;t call method &quot;time_zone&quot; without a package or object reference"}, {"owner": {"reputation": 89, "user_id": 1559885, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ar7iC.jpg?s=128&g=1", "display_name": "OldDogLearningNewPerlTricks", "link": "https://stackoverflow.com/users/1559885/olddoglearningnewperltricks"}, "edited": false, "score": 0, "creation_date": 1424802134, "post_id": 28703113, "comment_id": 45696511, "body": "Yes use strict and warnings. I assigned $yesterday in both occurrences of $dt."}, {"owner": {"reputation": 89, "user_id": 1559885, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ar7iC.jpg?s=128&g=1", "display_name": "OldDogLearningNewPerlTricks", "link": "https://stackoverflow.com/users/1559885/olddoglearningnewperltricks"}, "edited": false, "score": 0, "creation_date": 1424802521, "post_id": 28703113, "comment_id": 45696741, "body": "Makes no sense to me. I changed $yesterday back to $dt in both occurrences and made no difference. I even set $dt=&#39;2015-02-23T16:59:25&#39;; to no avail. (instead of shifting)"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 89, "user_id": 1559885, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ar7iC.jpg?s=128&g=1", "display_name": "OldDogLearningNewPerlTricks", "link": "https://stackoverflow.com/users/1559885/olddoglearningnewperltricks"}, "edited": false, "score": 0, "creation_date": 1424802948, "post_id": 28703113, "comment_id": 45696985, "body": "<code>&#39;2015-02-23T16:59:25&#39;</code> creates a string, not a DateTime object. See updated answer."}, {"owner": {"reputation": 89, "user_id": 1559885, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ar7iC.jpg?s=128&g=1", "display_name": "OldDogLearningNewPerlTricks", "link": "https://stackoverflow.com/users/1559885/olddoglearningnewperltricks"}, "edited": false, "score": 0, "creation_date": 1424803750, "post_id": 28703113, "comment_id": 45697460, "body": "Thanks, I am waiting for DateTime/Format/Strptime.pm to be installed on server. Only DateTime was installed."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 89, "user_id": 1559885, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ar7iC.jpg?s=128&g=1", "display_name": "OldDogLearningNewPerlTricks", "link": "https://stackoverflow.com/users/1559885/olddoglearningnewperltricks"}, "edited": false, "score": 0, "creation_date": 1424803945, "post_id": 28703113, "comment_id": 45697577, "body": "You can create the DateTime object without that module, but it&#39;s shorter using that module."}, {"owner": {"reputation": 89, "user_id": 1559885, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ar7iC.jpg?s=128&g=1", "display_name": "OldDogLearningNewPerlTricks", "link": "https://stackoverflow.com/users/1559885/olddoglearningnewperltricks"}, "edited": false, "score": 0, "creation_date": 1424804405, "post_id": 28703113, "comment_id": 45697828, "body": "Yeah, I am not smart enough to do that (create the DateTime object without that module) however, an example would help. That said, YOU ARE A GENIUS. The module is now installed and is working. Let me run some tests before I mark as answered. I am sure all will be fine."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 4, "last_activity_date": 1424803193, "last_edit_date": 1424803193, "creation_date": 1424801326, "answer_id": 28703113, "question_id": 28702872, "link": "https://stackoverflow.com/questions/28702872/perl-datetime-module-how-to-compare-two-datetimes-for-a-24-hour-time-lapse/28703113#28703113", "title": "Perl - DateTime module - How to compare two DateTime&#39;s for a 24 hour time lapse", "body": "<p>You can construct a DateTime object from your string as follows:</p>\n\n<pre><code>use DateTime::Format::Strptime qw( );\n\nmy $dt_format = DateTiFormat::Strptime-&gt;new(\n   pattern   =&gt; '%Y-%m-%dT%H:%M:%S',\n   time_zone =&gt; 'local',\n   on_error  =&gt; 'croak',\n);\n\nmy $dt = $dt_format-&gt;parse_datetime('2015-02-23T16:59:25');\n</code></pre>\n\n<p>Then you can check if it's 24 hours old like this:</p>\n\n<pre><code>my $now = DateTime-&gt;now( time_zone =&gt; $dt-&gt;time_zone );\nif  ($dt-&gt;clone-&gt;add( hours =&gt; 24 ) &gt;= $now) {\n   # It's been more than 24 hours.\n   ...\n}\n</code></pre>\n\n<hr>\n\n<p>Now, the above does a lot of work every time you check if 24 hours have passed. If you do this repeatedly, you can use reduce the workload as follows:</p>\n\n<pre><code>use DateTime::Format::Strptime qw( );\n\nmy $dt_format = DateTime::Format::Strptime-&gt;new(\n   pattern   =&gt; '%Y-%m-%dT%H:%M:%S',\n   time_zone =&gt; 'local',\n   on_error  =&gt; 'croak',\n);\n\nmy $dt = $dt_format-&gt;parse_datetime('2015-02-23T16:59:25');\n$dt-&gt;add( hours =&gt; 24 );\nmy $target_time = $dt-&gt;epoch;\n</code></pre>\n\n<p>Then check then simplifies to</p>\n\n<pre><code>if  ($target_time &gt;= time)\n   # It's been more than 24 hours.\n   ...\n}\n</code></pre>\n\n<hr>\n\n<p>You probably want <code>-&gt;add( days =&gt; 1 )</code> (same time on the next calendar day) instead of <code>-&gt;add( hours =&gt; 24 )</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1424801630, "post_id": 28703133, "comment_id": 45696235, "body": "@ikegami With <code>Time::Seconds</code>, one day is (perhaps naively) always 24 hours: &quot;The methods make the assumption that there are 24 hours in a day, 7 days in a week, 365.24225 days in a year and 12 months in a year.&quot;"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1424801754, "post_id": 28703133, "comment_id": 45696300, "body": "@OldDogLearningNewPerlTricks: I have assumed that what you want is an elapsed time of a day. If it is indeed 24 hours as you have requested (there is a difference on days where daylight saving time starts or stops) then you can change it by writing <code>use Time::Seconds &#39;ONE_HOUR&#39;</code> and <code>$diff &gt;= ONE_HOUR * 24</code> instead."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1424801937, "post_id": 28703133, "comment_id": 45696409, "body": "@ThisSuitIsBlackNot: I believe that <code>ONE_YEAR</code> should in fact be <code>31556952</code> (365.2425 days)"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1424802615, "post_id": 28703133, "comment_id": 45696791, "body": "@ikegami: It&#39;s a solar year."}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1424802691, "post_id": 28703133, "comment_id": 45696830, "body": "@ikegami Looks like the developers used a <a href=\"http://www.tondering.dk/claus/cal/gregorian.php#fourthousand\" rel=\"nofollow noreferrer\">recommendation for leap years</a> that has never actually been adopted: &quot;It has been suggested (by the astronomer John Herschel (1792-1871) among others) that a better approximation to the length of the tropical year would be 365 969/4000 days = 365.24225 days. This would dictate 969 leap years every 4000 years, rather than the 970 leap years mandated by the Gregorian calendar. This could be achieved by dropping one leap year from the Gregorian calendar every 4000 years...&quot;"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1424807305, "post_id": 28703133, "comment_id": 45699386, "body": "@ikegami: So you&#39;re saying that the solar year is never useful? I know many that would disagree!"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1424809447, "post_id": 28703133, "comment_id": 45700614, "body": "I don&#39;t think your astrophysicist will use Time::Seconds to get the length of a solar year, so yeah, I&#39;m saying noone will ever use <code>Time::Seconds::ONE_YEAR</code> in a way that makes sense."}, {"owner": {"reputation": 2317, "user_id": 711515, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8b5b6edf26acc698b27a585417bb9bb6?s=128&d=identicon&r=PG", "display_name": "chansen", "link": "https://stackoverflow.com/users/711515/chansen"}, "edited": false, "score": 0, "creation_date": 1424816941, "post_id": 28703133, "comment_id": 45704566, "body": "<code>Time::Piece-&gt;strptime</code> parses the date/time in the GMT/UTC zone unless it contains a %z or %Z format specifier and thus the above is incorrect if it&#39;s crossing DST."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1424817100, "post_id": 28703133, "comment_id": 45704647, "body": "@ikegami: I use it all the time to convert annual/monthly quantities into their mean daily/weekly equivalent. In particular I use <code>$per_week = $per_year &#47; 12 * 0.23</code>, which is pretty much the same."}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 1, "last_activity_date": 1424801375, "creation_date": 1424801375, "answer_id": 28703133, "question_id": 28702872, "link": "https://stackoverflow.com/questions/28702872/perl-datetime-module-how-to-compare-two-datetimes-for-a-24-hour-time-lapse/28703133#28703133", "title": "Perl - DateTime module - How to compare two DateTime&#39;s for a 24 hour time lapse", "body": "<p>The <a href=\"https://metacpan.org/module/DateTime\" rel=\"nofollow\"><code>DateTime</code></a> module is enormous and slow, and is a complete toolbox for anything date-time related. <a href=\"https://metacpan.org/module/Time::Piece\" rel=\"nofollow\"><code>Time::Piece</code></a> is a much lighter weight core module (so it shouldn't need to be installed) and is quite up to this task.</p>\n\n<p>Here's a demonstration of a solution using <code>Time::Piece</code></p>\n\n<pre><code>use strict;\nuse warnings;\nuse 5.010;\n\nuse Time::Piece ();\nuse Time::Seconds 'ONE_DAY';\n\nmy ($t1, $t2) = qw/\n  2015-02-23T16:59:25\n  2015-02-24T16:59:25\n/;\n\nmy $diff = delta_time($t1, $t2);\n\nsay $diff &gt;= ONE_DAY ? 'over one day' : 'less than one day';\n\nsub delta_time {\n  my ($t1, $t2) = map Time::Piece-&gt;strptime($_, '%Y-%m-%dT%H:%M:%S'), @_;\n  return $t2 &gt; $t1 ? $t2 - $t1 : $t1 - $t2;\n}\n</code></pre>\n\n<p><strong>output</strong></p>\n\n<pre><code>over one day    \n</code></pre>\n"}], "owner": {"reputation": 89, "user_id": 1559885, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ar7iC.jpg?s=128&g=1", "display_name": "OldDogLearningNewPerlTricks", "link": "https://stackoverflow.com/users/1559885/olddoglearningnewperltricks"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1193, "favorite_count": 0, "accepted_answer_id": 28703113, "answer_count": 2, "score": 0, "last_activity_date": 1424805551, "creation_date": 1424800518, "question_id": 28702872, "link": "https://stackoverflow.com/questions/28702872/perl-datetime-module-how-to-compare-two-datetimes-for-a-24-hour-time-lapse", "title": "Perl - DateTime module - How to compare two DateTime&#39;s for a 24 hour time lapse", "body": "<p>I saved a DateTime stamp to my database:</p>\n\n<pre><code>2015-02-23T16:59:25\n</code></pre>\n\n<p>I have a new DateTime Stamp which represents current time.</p>\n\n<pre><code>2015-02-24T16:59:25\n</code></pre>\n\n<p>I need to compare the two with DateTime to check if 24 hours has passed.</p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse DateTime;\n\nmy $longenough;\n\nTesting123();\nexit;\nsub Testing123{\nmy $yesterday = DateTime-&gt;now;\n$yesterday-&gt;add( days =&gt; -1 ); \n\n #This $yesterday time gets saved to my database.\n #For question purposes, I'll just pass it along instead of from db. \n\nCheckLapse($yesterday);\n\nif ($longenough eq 'y'){ print qq~24 hours have passed&lt;br /&gt;~; }\nelse{print qq~24 hours have not passed&lt;br /&gt;~;}\n}\n\nsub CheckLapse{\n$yesterday = shift;\nmy $now = DateTime-&gt;now;\n\n# leftovers from many many hours of different attempts from my old bramaged drain\n\n# my $elapse = $now - $yesterday;\n# $now-&gt;subtract_duration( $yesterday ) ;\n# $TimeLapse = $elapse-&gt;in_units('seconds'); #Left over from another try\n# print \"Elapsed time : \".$elapse-&gt;in_units('seconds').\"m\\n\";\n\n##  I need to compare the two times and pass $longenough y/n back:\n\nif ($TimeLapse &gt;= [24 hours whatever seconds minutes to do calc]){\n$longenough = 'y';\n}\nelse {$longenough = 'n';}\nreturn $longenough;\n}\nexit;\n</code></pre>\n\n<p>I have read and read the cpan DateTime docs and tried everything except for obviously, the correct solution. \nI just keep getting errors like \"Can't call method \"yada yada\" without a package or object reference\".</p>\n\n<p>Could someone educate me here?</p>\n"}, {"tags": ["string", "perl", "raku", "filehandle"], "comments": [{"owner": {"reputation": 25859, "user_id": 1077672, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f00f8b55b0ade2c4748e94fb73a40662?s=128&d=identicon&r=PG", "display_name": "raiph", "link": "https://stackoverflow.com/users/1077672/raiph"}, "edited": false, "score": 1, "creation_date": 1424818321, "post_id": 28702850, "comment_id": 45705192, "body": "Btw. the <code>while (my $line ...) { ... }</code> code doesn&#39;t lexically scope <code>$line</code> the way you think it does. The <code>$line</code> ends up lexically scoped to the surrounding context, the main body of the script. It is not scoped to inside the following braces. Instead, lexical variable declarations using <code>my</code> are scoped to their enclosing braces. Parameters in contrast <i>are</i> scoped to the following braces because those are the code block that acts on the parameters. The <code>$line</code> in the <code>-&gt; $line</code> code in the first (only) answer below is a parameter."}, {"owner": {"reputation": 25859, "user_id": 1077672, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f00f8b55b0ade2c4748e94fb73a40662?s=128&d=identicon&r=PG", "display_name": "raiph", "link": "https://stackoverflow.com/users/1077672/raiph"}, "edited": false, "score": 0, "creation_date": 1424825373, "post_id": 28702850, "comment_id": 45707518, "body": "In P5, <code>$line</code> is an undeclared variable outside the <code>while</code> statement (<code>use strict; use warnings;</code> will reveal this) whereas in P6 it would be known."}, {"owner": {"reputation": 10190, "user_id": 215487, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/e3e947cd5a0515d1eece902a29891750?s=128&d=identicon&r=PG", "display_name": "Christopher Bottoms", "link": "https://stackoverflow.com/users/215487/christopher-bottoms"}, "reply_to_user": {"reputation": 25859, "user_id": 1077672, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f00f8b55b0ade2c4748e94fb73a40662?s=128&d=identicon&r=PG", "display_name": "raiph", "link": "https://stackoverflow.com/users/1077672/raiph"}, "edited": false, "score": 0, "creation_date": 1424885247, "post_id": 28702850, "comment_id": 45737645, "body": "@raiph Oh, okay. Now I see that your first comment is entirely referring to Perl 6. I just tried a <code>while (my $line = ...</code> loop in Perl 6 and you are right that <code>$line</code> is scoped outside the loop. However, it doesn&#39;t have a value outside the loop. After the loop, <code>$line.say</code> prints <code>(Any)</code>, meaning that it is in scope, but is basically undefined."}, {"owner": {"reputation": 25859, "user_id": 1077672, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f00f8b55b0ade2c4748e94fb73a40662?s=128&d=identicon&r=PG", "display_name": "raiph", "link": "https://stackoverflow.com/users/1077672/raiph"}, "edited": false, "score": 0, "creation_date": 1441321515, "post_id": 28702850, "comment_id": 52643967, "body": "If <code>$line.say</code> prints <code>(Any)</code> then that&#39;s the last &quot;value&quot; assigned to <code>$line</code> either in the <code>while</code> statement&#39;s conditional expression <code>my $line = ...</code> (note that the parens around the conditional are unnecessary) or in the subsequent <code>while</code> statement&#39;s block."}], "answers": [{"comments": [{"owner": {"reputation": 25859, "user_id": 1077672, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f00f8b55b0ade2c4748e94fb73a40662?s=128&d=identicon&r=PG", "display_name": "raiph", "link": "https://stackoverflow.com/users/1077672/raiph"}, "edited": false, "score": 0, "creation_date": 1424817709, "post_id": 28705995, "comment_id": 45704900, "body": "I like the pedagogical value of using the explicit <code>-&gt; $foo</code> bit, but in practice the <code>for ...</code> statement will often be the more succinct <code>for $text.lines { .foo }</code> where the <code>.foo</code> method is called on &quot;it&quot;. (&quot;It&quot; is the variable <code>$_</code> which is automatically assigned anyway when one writes &quot;topicalizers&quot; like <code>for</code>.)"}, {"owner": {"reputation": 10190, "user_id": 215487, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/e3e947cd5a0515d1eece902a29891750?s=128&d=identicon&r=PG", "display_name": "Christopher Bottoms", "link": "https://stackoverflow.com/users/215487/christopher-bottoms"}, "reply_to_user": {"reputation": 25859, "user_id": 1077672, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f00f8b55b0ade2c4748e94fb73a40662?s=128&d=identicon&r=PG", "display_name": "raiph", "link": "https://stackoverflow.com/users/1077672/raiph"}, "edited": false, "score": 1, "creation_date": 1424878453, "post_id": 28705995, "comment_id": 45732736, "body": "@raiph It&#39;s a matter of preference. I used to use <code>$_</code> in Perl 5 a lot, but now prefer more explicit variables. It may be slightly more verbose, but I&#39;m going for maintainability over succinctness. I&#39;m glad Perl 6 is also TIMTOWTDI."}], "tags": [], "owner": {"reputation": 148928, "user_id": 48015, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/0b722a5f7d2d809629ee40c63cc8576b?s=128&d=identicon&r=PG", "display_name": "Christoph", "link": "https://stackoverflow.com/users/48015/christoph"}, "is_accepted": true, "score": 11, "last_activity_date": 1479940397, "last_edit_date": 1479940397, "creation_date": 1424811084, "answer_id": 28705995, "question_id": 28702850, "link": "https://stackoverflow.com/questions/28702850/i-can-create-filehandles-to-strings-in-perl-5-how-do-i-do-it-in-perl-6/28705995#28705995", "title": "I can create filehandles to strings in Perl 5, how do I do it in Perl 6?", "body": "<h1>Reading</h1>\n\n<p>The idiomatic way to read line-by-line is the <a href=\"http://doc.perl6.org/routine/lines\" rel=\"nofollow noreferrer\"><code>.lines</code> method</a>, which is available on both <code>Str</code> and <code>IO::Handle</code>.</p>\n\n<p>It returns a lazy list which you can pass on to <code>for</code>, as in</p>\n\n<pre><code>my $text = \"A\\nB\\nC\\n\";\n\nfor $text.lines -&gt; $line {\n     # do something with $line\n}\n</code></pre>\n\n<h1>Writing</h1>\n\n<pre><code>my $scalar;\nmy $fh = IO::Handle.new but\n         role {\n             method print (*@stuff) { $scalar ~= @stuff };\n             method print-nl        { $scalar ~= \"\\n\" }\n         };\n\n$fh.say(\"OH HAI\");\n$fh.say(\"bai bai\");\n\nsay $scalar\n# OH HAI\n# bai bai\n</code></pre>\n\n<p>(Adapted from <a href=\"http://irclog.perlgeek.de/perl6/2015-05-14#i_10604679\" rel=\"nofollow noreferrer\">#perl6</a>, thanks to Carl M\u00e4sak.)</p>\n\n<h1>More advanced cases</h1>\n\n<p>If you need a more sophisticated mechanism to fake file handles, there's <a href=\"https://github.com/sergot/IO-Capture-Simple/\" rel=\"nofollow noreferrer\">IO::Capture::Simple</a> and <a href=\"https://github.com/hoelzro/p6-io-string/\" rel=\"nofollow noreferrer\">IO::String</a> in the <a href=\"http://modules.perl6.org/\" rel=\"nofollow noreferrer\">ecosystem</a>.</p>\n\n<p>For example:</p>\n\n<pre><code>use IO::Capture::Simple;\nmy $result;\ncapture_stdout_on($result);\nsay \"Howdy there!\";\nsay \"Hai!\";\ncapture_stdout_off();\nsay \"Captured string:\\n\" ~$result;\n</code></pre>\n"}], "owner": {"reputation": 10190, "user_id": 215487, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/e3e947cd5a0515d1eece902a29891750?s=128&d=identicon&r=PG", "display_name": "Christopher Bottoms", "link": "https://stackoverflow.com/users/215487/christopher-bottoms"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 609, "favorite_count": 2, "accepted_answer_id": 28705995, "answer_count": 1, "score": 14, "last_activity_date": 1541439077, "creation_date": 1424800444, "last_edit_date": 1541439077, "question_id": 28702850, "link": "https://stackoverflow.com/questions/28702850/i-can-create-filehandles-to-strings-in-perl-5-how-do-i-do-it-in-perl-6", "title": "I can create filehandles to strings in Perl 5, how do I do it in Perl 6?", "body": "<p>In Perl 5, I can create a filehandle to a string and read or write from the string as if it were a file. This is great for working with tests or templates.</p>\n\n<p>For example:</p>\n\n<pre><code>use v5.10; use strict; use warnings;\n\nmy $text = \"A\\nB\\nC\\n\";\n\nopen(my $fh, '&lt;', \\$text);\n\nwhile(my $line = readline($fh)){\n    print $line;\n}\n</code></pre>\n\n<p>How can I do that in Perl 6? The following <strong><em>doesn't</em></strong> work for Perl 6 (at least not for my instance of Perl6 running on <a href=\"http://www.moarvm.com\" rel=\"nofollow noreferrer\">MoarVM 2015.01</a> from the <a href=\"http://rakudo.org/downloads/star/\" rel=\"nofollow noreferrer\">January 2015 release of Rakudo Star</a> on 64-bit CentOS 6.5):</p>\n\n<pre><code># Warning: This code does not work\nuse v6;\n\nmy $text = \"A\\nB\\nC\\n\";\n\nmy $fh = $text;\n\nwhile (my $line = $fh.get ) {\n    $line.say;\n}\n# Warning: Example of nonfunctional code\n</code></pre>\n\n<p>I get the error message:</p>\n\n<pre><code>No such method 'get' for invocant of type 'Str'\n   in block &lt;unit&gt; at string_fh.p6:8\n</code></pre>\n\n<p>It's not very surprising that Perl5's <code>open(my $fh, '&lt;', \\$text)</code> is not the same as Perl6's <code>my $fh = $text;</code>. So the question is: How does one create a virtual file handle from a string in Perl 6 like <code>open(my $fh, '&lt;', \\$str)</code> in Perl 5? Or is that something that has yet to be implemented?</p>\n\n<p>UPDATE (writing to a filehandle in Perl 5)</p>\n\n<p>Likewise, you can write to string filehandles in Perl 5:</p>\n\n<pre><code>use v5.10; use strict; use warnings;\n\n my $text = \"\";\n open(my $fh, '&gt;', \\$text);\n\n print $fh \"A\";\n print $fh \"B\";\n print $fh \"C\";\n\n print \"My string is '$text'\\n\";\n</code></pre>\n\n<p>Outputs:</p>\n\n<pre><code> My string is 'ABC'\n</code></pre>\n\n<p>I haven't seen anything remotely similar in Perl 6, yet.</p>\n"}, {"tags": ["bash", "perl", "awk", "sed"], "comments": [{"owner": {"reputation": 79972, "user_id": 298607, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/DVW9g.jpg?s=128&g=1", "display_name": "dawg", "link": "https://stackoverflow.com/users/298607/dawg"}, "edited": false, "score": 0, "creation_date": 1424798575, "post_id": 28702020, "comment_id": 45694446, "body": "Integers are always +-1? What if the array is <code>1 5 10 20</code>?"}, {"owner": {"reputation": 39446, "user_id": 4301306, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a1461d0104809c90e2a252a2d4b0ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Wintermute", "link": "https://stackoverflow.com/users/4301306/wintermute"}, "edited": false, "score": 0, "creation_date": 1424798620, "post_id": 28702020, "comment_id": 45694470, "body": "I&#39;ll just put in the bash tag there."}, {"owner": {"reputation": 4599, "user_id": 4193263, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/06fe8178aa5f5a653dbadd89554c5b11?s=128&d=identicon&r=PG", "display_name": "ByteHamster", "link": "https://stackoverflow.com/users/4193263/bytehamster"}, "edited": false, "score": 3, "creation_date": 1424798943, "post_id": 28702020, "comment_id": 45694638, "body": "The site is meant for programming problems, not for expecting others to do your work. Please tell us what you have tried and what you are stuck with."}], "answers": [{"tags": [], "owner": {"reputation": 39446, "user_id": 4301306, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a1461d0104809c90e2a252a2d4b0ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Wintermute", "link": "https://stackoverflow.com/users/4301306/wintermute"}, "is_accepted": false, "score": 5, "last_activity_date": 1424798503, "last_edit_date": 1424798503, "creation_date": 1424798075, "answer_id": 28702075, "question_id": 28702020, "link": "https://stackoverflow.com/questions/28702020/find-smallest-missing-integer-in-an-array/28702075#28702075", "title": "Find smallest missing integer in an array", "body": "<p>Using sed for this would be silly. With GNU awk you could do</p>\n\n<pre><code>array=(1 2 4 5 6)\necho \"${array[@]}\" | awk -v RS='\\\\s+' '{ a[$1] } END { for(i = 1; i in a; ++i); print i }'\n</code></pre>\n\n<p>...which remembers all numbers, then counts from 1 until it finds one that it doesn't remember and prints that. You can then remember this number in bash with</p>\n\n<pre><code>array=(1 2 4 5 6)\nnumber=$(echo \"${array[@]}\" | awk -v RS='\\\\s+' '{ a[$1] } END { for(i = 1; i in a; ++i); print i }')\n</code></pre>\n\n<p>However, if you're already using bash, you could just do the same thing in pure bash:</p>\n\n<pre><code>#!/bin/bash\n\narray=(1 2 4 5 6)\n\ndeclare -a seen\nfor i in ${array[@]}; do\n    seen[$i]=1\ndone\n\nfor((number = 1; seen[number] == 1; ++number)); do true; done\n\necho $number\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "is_accepted": false, "score": 2, "last_activity_date": 1424798357, "creation_date": 1424798357, "answer_id": 28702176, "question_id": 28702020, "link": "https://stackoverflow.com/questions/28702020/find-smallest-missing-integer-in-an-array/28702176#28702176", "title": "Find smallest missing integer in an array", "body": "<p>You can iterate from minimal to maximal number and take first non existing element,</p>\n\n<pre><code>use List::Util qw( first );\n\nmy @arr = sort {$a &lt;=&gt; $b} qw(1 2 4 5 6);\nmy $min = $arr[0];\nmy $max = $arr[-1];\n\nmy %seen;\n@seen{@arr} = ();\nmy $first = first { !exists $seen{$_} } $min .. $max;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 6355, "user_id": 3755692, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/F7x32.png?s=128&g=1", "display_name": "msrd0", "link": "https://stackoverflow.com/users/3755692/msrd0"}, "edited": false, "score": 0, "creation_date": 1424807018, "post_id": 28702771, "comment_id": 45699213, "body": "While this code snippet may solve the question, <a href=\"http://meta.stackexchange.com/questions/114762/explaining-entirely-code-based-answers\">including an explanation</a> really helps to improve the quality of your post. Remember that you are answering the question for readers in the future, and those people might not know the reasons for your code suggestion."}, {"owner": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "reply_to_user": {"reputation": 6355, "user_id": 3755692, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/F7x32.png?s=128&g=1", "display_name": "msrd0", "link": "https://stackoverflow.com/users/3755692/msrd0"}, "edited": false, "score": 0, "creation_date": 1424807370, "post_id": 28702771, "comment_id": 45699432, "body": "@msrd0 I disagree. Current and future readers should try to figure out what it does by reading available documentation and ask questions if they have any. They&#39;ll get a lot more out of that than my spoon-feeding them. It&#39;d be different if the script was in any way complicated/lengthy/interesting."}, {"owner": {"reputation": 6355, "user_id": 3755692, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/F7x32.png?s=128&g=1", "display_name": "msrd0", "link": "https://stackoverflow.com/users/3755692/msrd0"}, "edited": false, "score": 0, "creation_date": 1424807521, "post_id": 28702771, "comment_id": 45699504, "body": "For some it&#39;ll be better, but if you read documentation for documentation and you don&#39;t get the code (no matter how difficult it is to understand, yours should probably be understandable) you get really frustrated and loose fun on the project you&#39;re working on"}], "tags": [], "owner": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "is_accepted": false, "score": 0, "last_activity_date": 1424800178, "creation_date": 1424800178, "answer_id": 28702771, "question_id": 28702020, "link": "https://stackoverflow.com/questions/28702020/find-smallest-missing-integer-in-an-array/28702771#28702771", "title": "Find smallest missing integer in an array", "body": "<pre><code>$ cat tst.awk\nBEGIN {\n    split(\"1 2 4 5 6\",a)\n    for (i=1;a[i+1]==a[i]+1;i++) ;\n    print a[i]+1\n}\n\n$ awk -f tst.awk\n3\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 1, "last_activity_date": 1424800250, "creation_date": 1424800250, "answer_id": 28702801, "question_id": 28702020, "link": "https://stackoverflow.com/questions/28702020/find-smallest-missing-integer-in-an-array/28702801#28702801", "title": "Find smallest missing integer in an array", "body": "<p>This code will do as you ask. It can easily be accelerated by using a binary search, but it is clearest stated in this way.</p>\n\n<p>The first element of the array can be any integer, and the subroutine returns the first value that isn't in the sequence. It returns <code>undef</code> if the complete array is contiguous.</p>\n\n<pre><code>use strict;\nuse warnings;\nuse 5.010;\n\nmy @data = qw/ 1 2 4 5 6 /;\nsay first_missing(@data);\n\n@data = ( 4 .. 99, 101 .. 122 );\nsay first_missing(@data);\n\nsub first_missing {\n\n  my $start = $_[0];\n\n  for my $i ( 1 .. $#_ ) {\n    my $expected = $start + $i;\n    return $expected unless $_[$i] == $expected;\n  }\n\n  return;\n}\n</code></pre>\n\n<p><strong>output</strong></p>\n\n<pre><code>3\n100\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "is_accepted": false, "score": 0, "last_activity_date": 1424833050, "last_edit_date": 1424833050, "creation_date": 1424800679, "answer_id": 28702920, "question_id": 28702020, "link": "https://stackoverflow.com/questions/28702020/find-smallest-missing-integer-in-an-array/28702920#28702920", "title": "Find smallest missing integer in an array", "body": "<p>Here's one <code>bash</code> solution (assuming the numbers are in a file, one per line):</p>\n\n<pre><code>sort -n numbers.txt | grep -n . |\ngrep -v -m1 '\\([0-9]\\+\\):\\1' | cut -f1 -d:\n</code></pre>\n\n<p>The first part sorts the numbers and then adds a sequence number to each one, and the second part finds the first sequence number which doesn't correspond to the number in the array.</p>\n\n<p>Same thing, using sort and awk (bog-standard, no extensions in either):</p>\n\n<pre><code>sort -n numbers.txt | awk '$1!=NR{print NR;exit}'\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "is_accepted": false, "score": 0, "last_activity_date": 1424807258, "last_edit_date": 1495540411, "creation_date": 1424807258, "answer_id": 28704903, "question_id": 28702020, "link": "https://stackoverflow.com/questions/28702020/find-smallest-missing-integer-in-an-array/28704903#28704903", "title": "Find smallest missing integer in an array", "body": "<p>Having fun with <a href=\"https://stackoverflow.com/a/28702801/100754\">@Borodin's excellent answer</a>:</p>\n\n<pre><code>#!/usr/bin/env perl\n\nuse 5.020; # why not?\nuse strict;\nuse warnings;\n\nsub increasing_stream {\n    my $start = int($_[0]);\n    return sub {\n        $start += 1 + (rand(1) &gt; 0.9);\n    };\n}\n\nmy $stream = increasing_stream(rand(1000));\n\nmy $first = $stream-&gt;();\nsay $first;\nwhile (1) {\n    my $next = $stream-&gt;();\n    say $next;\n    last unless $next == ++$first;\n    $first = $next;\n}\n\nsay \"Skipped: $first\";\n</code></pre>\n\n<p>Output:</p>\n\n<pre>$ ./tyu.pl\n381\n382\n383\n384\n385\n386\n387\n388\n389\n390\n391\n392\n393\n395\nSkipped: 394</pre>\n"}, {"tags": [], "owner": {"reputation": 79972, "user_id": 298607, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/DVW9g.jpg?s=128&g=1", "display_name": "dawg", "link": "https://stackoverflow.com/users/298607/dawg"}, "is_accepted": false, "score": 1, "last_activity_date": 1487950701, "last_edit_date": 1487950701, "creation_date": 1424810416, "answer_id": 28705808, "question_id": 28702020, "link": "https://stackoverflow.com/questions/28702020/find-smallest-missing-integer-in-an-array/28705808#28705808", "title": "Find smallest missing integer in an array", "body": "<p>Here is a Perl one liner:</p>\n\n<pre><code>$ echo '1 2 4 5 6' | perl  -lane '} \n           {@a=sort { $a &lt;=&gt; $b } @F; %h=map {$_=&gt;1} @a; \n            foreach ($a[0]..$a[-1]) { if (!exists($h{$_})) {print $_}} ;'\n</code></pre>\n\n<p>If you want to switch from a pipeline to a file input:</p>\n\n<pre><code>$ perl  -lane '}\n           {@a=sort { $a &lt;=&gt; $b } @F; %h=map {$_=&gt;1} @a; \n           foreach ($a[0]..$a[-1]) { if (!exists($h{$_})) {print $_}} ;' file\n</code></pre>\n\n<p>Since it is sorted in the process, input can be in arbitrary order. </p>\n"}, {"tags": [], "owner": {"reputation": 3969, "user_id": 856172, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/01aa855068a6805deac3f3371c5b00d1?s=128&d=identicon&r=PG", "display_name": "kbulgrien", "link": "https://stackoverflow.com/users/856172/kbulgrien"}, "is_accepted": false, "score": 0, "last_activity_date": 1592619013, "last_edit_date": 1592619013, "creation_date": 1592618599, "answer_id": 62480815, "question_id": 28702020, "link": "https://stackoverflow.com/questions/28702020/find-smallest-missing-integer-in-an-array/62480815#62480815", "title": "Find smallest missing integer in an array", "body": "<p>Here is a slight variation on the theme set by other answers.  Values coming in are not necessarily pre-sorted:</p>\n\n<pre><code>$ cat test\nsort -nu &lt;&lt;END-OF-LIST |\n1\n5\n2\n4\n6\nEND-OF-LIST\nawk 'BEGIN { M = 1 } M &gt; $1 { next } M == $1 { M++; next }\n       M &lt; $1 { exit } END { print M }'\n$ sh test\n3\n</code></pre>\n\n<p>Notes:</p>\n\n<ul>\n<li>If numbers are pre-sorted, do not bother with the sort.</li>\n<li>If there are no missing numbers, the next higher number is output.</li>\n<li>In this example, a here document supplies numbers, but one can use a file or pipe.</li>\n<li>M may start greater than the smallest to ignore missing numbers below a threshold. </li>\n<li>To auto-start the search at the lowest number, change <code>BEGIN { M = 1 }</code> to <code>NR == 1 { M = $1 }</code>.</li>\n</ul>\n"}], "owner": {"reputation": 51, "user_id": 4602250, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/553115530e0231892923b429f59a319e?s=128&d=identicon&r=PG&f=1", "display_name": "Michael Halsey", "link": "https://stackoverflow.com/users/4602250/michael-halsey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1129, "favorite_count": 1, "answer_count": 8, "score": 2, "last_activity_date": 1592619013, "creation_date": 1424797881, "last_edit_date": 1424799207, "question_id": 28702020, "link": "https://stackoverflow.com/questions/28702020/find-smallest-missing-integer-in-an-array", "title": "Find smallest missing integer in an array", "body": "<p>I'm writing a bash script which requires searching for the smallest available integer in an array and piping it into a variable.</p>\n\n<p>I know how to identify the smallest or the largest integer in an array but I can't figure out how to identify the 'missing' smallest integer.</p>\n\n<p>Example array:</p>\n\n<pre><code>1\n2\n4\n5\n6\n</code></pre>\n\n<p>In this example I would need 3 as a variable.</p>\n"}, {"tags": ["perl", "file", "winapi", "change-notification"], "comments": [{"owner": {"reputation": 71, "user_id": 1526136, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/VsoAQ.jpg?s=128&g=1", "display_name": "d-nnis", "link": "https://stackoverflow.com/users/1526136/d-nnis"}, "edited": false, "score": 0, "creation_date": 1424793151, "post_id": 28700273, "comment_id": 45690635, "body": "Hmm, maybe by checking if I can open the file with a filehandle...!?"}, {"owner": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "edited": false, "score": 1, "creation_date": 1424793271, "post_id": 28700273, "comment_id": 45690731, "body": "<code>sub writeable { open my $fh, &quot;&gt;&gt;&quot;, shift }</code> <code>:)</code>"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1424794617, "post_id": 28700273, "comment_id": 45691704, "body": "I don&#39;t know why you think <code>-w</code> should tell you noone&#39;s writing to a file. There might be OS-specific ways of checking if a file is in use, but I&#39;m not aware of them."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1424794649, "post_id": 28700273, "comment_id": 45691721, "body": "Files should be moved into <code>$watchdir</code> atomically using <code>rename</code>. If they are copied into <code>$watchdir</code>, your best option might be to keep checking the file size until it stops changing for a 15 seconds (or whatever)."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1424794707, "post_id": 28700273, "comment_id": 45691755, "body": "Assuming that <code>move</code> does a <code>rename</code> in your case, it works better on unix systems since unix systems allow a file name to be deleted/changed without affecting any handles to the referenced file."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1424799261, "post_id": 28700273, "comment_id": 45694831, "body": "Windows based file <code>open</code> plonks a mandatory lock on it, so move type operations will fail. Unix locks are advisory."}], "answers": [{"tags": [], "owner": {"reputation": 71, "user_id": 1526136, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/VsoAQ.jpg?s=128&g=1", "display_name": "d-nnis", "link": "https://stackoverflow.com/users/1526136/d-nnis"}, "is_accepted": true, "score": 1, "last_activity_date": 1424887322, "creation_date": 1424887322, "answer_id": 28726332, "question_id": 28700273, "link": "https://stackoverflow.com/questions/28700273/find-out-in-perl-and-windows-if-a-file-is-writeable-removable/28726332#28726332", "title": "Find out in Perl and Windows if a file is writeable/ removable", "body": "<p>Yes! I solved it (thanks to \u0421\u0443\u0445\u043e\u043927)!</p>\n\n<p>Inserting the following code right before moving the file:</p>\n\n<pre><code>while (1) {\n    last if writeable($path_in.$_);\n    print \"-\";\n    $| = 1;\n    sleep(1);\n}\n</code></pre>\n\n<p>...whereas <code>writeable</code> refers to this little sub-marine:</p>\n\n<pre><code>sub writeable {\n    return open(my $file, \"&gt;&gt;\", shift);\n}\n</code></pre>\n\n<p>Thanks, and have a nive day! :-)</p>\n"}], "owner": {"reputation": 71, "user_id": 1526136, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/VsoAQ.jpg?s=128&g=1", "display_name": "d-nnis", "link": "https://stackoverflow.com/users/1526136/d-nnis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 125, "favorite_count": 0, "accepted_answer_id": 28726332, "answer_count": 1, "score": -1, "last_activity_date": 1424887322, "creation_date": 1424793094, "last_edit_date": 1424795967, "question_id": 28700273, "link": "https://stackoverflow.com/questions/28700273/find-out-in-perl-and-windows-if-a-file-is-writeable-removable", "title": "Find out in Perl and Windows if a file is writeable/ removable", "body": "<p>I would like to build in Perl under Windows a <em>Watch-Dog</em> for a <em>Hot-Folder</em> (I might call it <em>Folder-Watch</em> or, hmm, probably much better: a <strong>Hot-Dog</strong>).\nSo far I succeeded in exactly doing that, with <a href=\"https://metacpan.org/module/Win32::ChangeNotify\" rel=\"nofollow\"><code>Win32::ChangeNotify</code></a> (see sample below).</p>\n\n<p>But as you might guess reading the source code I ran into a problem when the moving process wants to finish when the copying/creating process of the file in <code>$watchdir</code> has not finished (<em>No such file or directory</em>).</p>\n\n<pre><code>use Win32::ChangeNotifier;\nuse File::Copy qw(move);\n\nmy $notify = Win32::ChangeNotify-&gt;new($watchdir, 0, \"FILE_NAME\");\nwhile (1) {\n  if ($notify-&gt;wait(1_000)) {  # 1-second wait cycle\n    notify-&gt;reset;\n    @foundfiles = File::get_by_ext($watchdir, \"csv\");  # search and return files in $watchdir with extension \"csv\"\n    print \"Something has happened! (del/ren/create)\\n\";\n    foreach (@foundfiles) {\n      move($watchdir.$_, $someotherdir.$_) or die \"Fehler: $!\"; \n    }\n    @foundfiles = ();\n  }\n}\n</code></pre>\n\n<p>Is there a way to automatically find out if the file is ready to go, i.e. has been finally created/copied?</p>\n\n<p>I was thinking about something like</p>\n\n<pre><code>while (1) {\n  move $file if (-w $file)  # writeable\n  wait(1)\n}\n</code></pre>\n\n<p>but that does not seem to work under Windows. I need to solve this under Windows as well as Perl. Other than that I am open to suggestions.</p>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user554546"}, "edited": false, "score": 1, "creation_date": 1424797768, "post_id": 28699512, "comment_id": 45693955, "body": "Don&#39;t re-ask questions. Edit your previous question."}], "answers": [{"comments": [{"owner": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "edited": false, "score": 0, "creation_date": 1424791722, "post_id": 28699522, "comment_id": 45689532, "body": "You might be surprised but regexes are not always right tool for the job, and CSV parsing is contrary to popular belief <i>not</i> trivial. So there are choices, either to reinvent your own (broken?) wheel, or to use right tool for the job."}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 1, "creation_date": 1424792595, "post_id": 28699522, "comment_id": 45690198, "body": "I understand that you&#39;re trying to respond directly to the OP of a question that was already closed, but the &quot;dialog&quot; (e.g. &quot;On the other side, I understand you. You&#39;re probably not an programmer.&quot;) doesn&#39;t really make sense here. I&#39;ve cleaned it up so your answer will actually make sense to other users. Instead of posting a duplicate question, I think you should have edited the original so it&#39;s not too broad and then people could have voted to re-open if they thought the question had value for the site."}, {"owner": {"reputation": 5666, "user_id": 734304, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/7c64a3cafb1fd129cd2b98951d624f15?s=128&d=identicon&r=PG", "display_name": "kobame", "link": "https://stackoverflow.com/users/734304/kobame"}, "reply_to_user": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 1, "creation_date": 1424794515, "post_id": 28699522, "comment_id": 45691633, "body": "@ThisSuitIsBlackNot Yeah. I understand - and you&#39;re right - thank you for the edit. (Sorry, I only get a bit upset by some comments and need cooled down). Editing the original question and vote for reopen would be sure the best way."}, {"owner": {"reputation": 132964, "user_id": 171318, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ePRKy.jpg?s=128&g=1", "display_name": "hek2mgl", "link": "https://stackoverflow.com/users/171318/hek2mgl"}, "edited": false, "score": 0, "creation_date": 1424826213, "post_id": 28699522, "comment_id": 45707729, "body": "I appreciate your efforts on this topic and the fact that you suggested <code>Text::CSV</code> +1"}, {"owner": {"reputation": 5666, "user_id": 734304, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/7c64a3cafb1fd129cd2b98951d624f15?s=128&d=identicon&r=PG", "display_name": "kobame", "link": "https://stackoverflow.com/users/734304/kobame"}, "reply_to_user": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "edited": false, "score": 0, "creation_date": 1424943826, "post_id": 28699522, "comment_id": 45761660, "body": "@\u0421\u0443\u0445\u043e\u043927 I wouldn&#39;t be surprised - as you can see yourself, i&#39;m using Text::CSV - so, I don&#39;t understanding your comment - what is <i>reinvented</i> in my (as you said - my broken?) solution? Could you be please more specific?"}, {"owner": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "edited": false, "score": 0, "creation_date": 1424946735, "post_id": 28699522, "comment_id": 45763558, "body": "@kobame I was referring to regex only solution."}], "tags": [], "owner": {"reputation": 5666, "user_id": 734304, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/7c64a3cafb1fd129cd2b98951d624f15?s=128&d=identicon&r=PG", "display_name": "kobame", "link": "https://stackoverflow.com/users/734304/kobame"}, "is_accepted": false, "score": 1, "last_activity_date": 1424792444, "last_edit_date": 1592644375, "creation_date": 1424791117, "answer_id": 28699522, "question_id": 28699512, "link": "https://stackoverflow.com/questions/28699512/changing-csv-file-with-regexes/28699522#28699522", "title": "Changing CSV file with regexes", "body": "<p>You should generally avoid parsing CSVs with regex, as <a href=\"https://stackoverflow.com/users/15614/kent-fredric\">Kent Fredric</a> explains in answer to <a href=\"https://stackoverflow.com/a/633646/176646\">another similar question</a>:</p>\n<blockquote>\n<p><strong>Not using CPAN is really a recipe for disaster.</strong></p>\n<p>Please consider this before trying to write your own CSV implementation.\nText::CSV is over a hundred lines of code, including fixed bugs and edge cases,\nand re-writing this from scratch will just make you learn how awful CSV can be the hard way.</p>\n</blockquote>\n<p>It is <strong>really</strong> bad practice trying to parse CSVs with regexes, because for example, you need to handle:</p>\n<ul>\n<li>escaped quotes</li>\n<li>escaped separator characters</li>\n<li>fields containing the delimiter</li>\n</ul>\n<p>and so on, all of which Text::CSV will handle for you.</p>\n<p>Here's a solution that uses Text::CSV. I'm not a Perl expert, so the following code may be missing some things, but it is probably better than using regexes:</p>\n<pre><code>perl -MText::CSV_XS -E '$csv = Text::CSV_XS-&gt;new ({ eol =&gt; $/ }); $csv-&gt;print(*STDOUT, [join(q{|}, @$row[0..2]), @$row[3..4]]) while ($row = $csv-&gt;getline(*STDIN))' &lt; csv\n</code></pre>\n<p><strong>Input:</strong></p>\n<pre><code>&quot;c a&quot;,&quot;L G-3 (8) N (4th G P Q C- 4 R- 1 T H- 15.6 I- W 8.1) (B)&quot;,&quot;C &amp; P_L&quot;,1,0\n</code></pre>\n<p><strong>Output:</strong></p>\n<pre><code>&quot;c a|L G-3 (8) N (4th G P Q C- 4 R- 1 T H- 15.6 I- W 8.1) (B)|C &amp; P_L&quot;,1,0\n</code></pre>\n<p>Some potential problems: it doesn't handles escaping of the <code>|</code> character, if there are any in the input, no error handling, etc. For a better solution you need to write a full-featured Perl script and not a one-liner.</p>\n"}, {"tags": [], "owner": {"reputation": 1230, "user_id": 3166498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/fbc18f10b502469dfdec70ffeb98c6d4?s=128&d=identicon&r=PG&f=1", "display_name": "sam", "link": "https://stackoverflow.com/users/3166498/sam"}, "is_accepted": false, "score": 0, "last_activity_date": 1424797469, "creation_date": 1424797469, "answer_id": 28701872, "question_id": 28699512, "link": "https://stackoverflow.com/questions/28699512/changing-csv-file-with-regexes/28701872#28701872", "title": "Changing CSV file with regexes", "body": "<p>Assuming your data is exactly like what it is this should work</p>\n\n<pre><code>$line =~ s-\\\",\\\"-|-g;\n</code></pre>\n"}], "owner": {"reputation": 5666, "user_id": 734304, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/7c64a3cafb1fd129cd2b98951d624f15?s=128&d=identicon&r=PG", "display_name": "kobame", "link": "https://stackoverflow.com/users/734304/kobame"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 64, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1424797469, "creation_date": 1424791101, "last_edit_date": 1495540052, "question_id": 28699512, "link": "https://stackoverflow.com/questions/28699512/changing-csv-file-with-regexes", "title": "Changing CSV file with regexes", "body": "<p>Because meantime i wrote an answer to the <a href=\"https://stackoverflow.com/q/28693766/734304\">question, what got closed</a> - trying to reword and re-ask it.</p>\n\n<p>Having an CSV file with 180 milions records, with 5 columns as:</p>\n\n<pre><code>\"c a\",\"L G-3 (8) N (4th G P Q C- 4 R- 1 T H- 15.6 I- W 8.1) (B)\",\"C &amp; P_L\",1,0\n</code></pre>\n\n<p>How to change it to the 3 column structure as:</p>\n\n<pre><code>\"c a|L G-3 (8) N (4th G P Q C- 4 R- 1 T H- 15.6 I- W 8.1) (B)|C &amp; P_L\",1,0\n</code></pre>\n\n<p>e.g. need concatenate the colums 1,2,3 with <code>|</code> and print it as one column and leave other colums unchanged</p>\n\n<p>Tried it with regexes:</p>\n\n<pre><code>cat RelatedKW.csv | perl -pe 's/(\\|)/\\//g'| perl -pe 's/(\"\\s*\"|\"\\s*\"\\s*\\\\n$)//g'| perl -pe 's/^,\"|,,|\"\\s*,\\s*\\\"/|/g' | perl -pe 's/\\\"(\\d+),(\\d+)\\\"/ |$1|$2/g' &gt; newRKW4.csv`\n</code></pre>\n\n<p>Is here any better way?</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 1373, "user_id": 655027, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/4d94649cf365de22fa125f0a45f5ebb4?s=128&d=identicon&r=PG", "display_name": "rubikonx9", "link": "https://stackoverflow.com/users/655027/rubikonx9"}, "edited": false, "score": 0, "creation_date": 1424791639, "post_id": 28699475, "comment_id": 45689473, "body": "<a href=\"http://perldoc.perl.org/functions/close.html\" rel=\"nofollow noreferrer\">perldoc.perl.org/functions/close.html</a> states that <code>close</code> returns <code>false</code>. It doesn&#39;t have to be a <code>0</code>. A blank <i>is</i> <code>false</code> in perl, I guess."}, {"owner": {"reputation": 10213, "user_id": 1686628, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a03a6bd4b5f83b04ff39aec4b44e17ed?s=128&d=identicon&r=PG&f=1", "display_name": "ealeon", "link": "https://stackoverflow.com/users/1686628/ealeon"}, "reply_to_user": {"reputation": 1373, "user_id": 655027, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/4d94649cf365de22fa125f0a45f5ebb4?s=128&d=identicon&r=PG", "display_name": "rubikonx9", "link": "https://stackoverflow.com/users/655027/rubikonx9"}, "edited": false, "score": 0, "creation_date": 1424791734, "post_id": 28699475, "comment_id": 45689544, "body": "@g.tsh yeah i got that part. but i want to specifically capture &#39;2.&#39; not true or false. is that not doable with open/close combination?"}, {"owner": {"reputation": 1373, "user_id": 655027, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/4d94649cf365de22fa125f0a45f5ebb4?s=128&d=identicon&r=PG", "display_name": "rubikonx9", "link": "https://stackoverflow.com/users/655027/rubikonx9"}, "edited": false, "score": 0, "creation_date": 1424792110, "post_id": 28699475, "comment_id": 45689805, "body": "I&#39;ve used capture_exec: <a href=\"http://search.cpan.org/~dagolden/IO-CaptureOutput-1.1103/lib/IO/CaptureOutput.pm\" rel=\"nofollow noreferrer\">search.cpan.org/~dagolden/IO-CaptureOutput-1.1103/lib/IO/&hellip;</a> to get stdout and exit code. I don&#39;t know how to achieve this with plain <code>open</code>."}], "answers": [{"tags": [], "owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "is_accepted": false, "score": 5, "last_activity_date": 1424797296, "last_edit_date": 1424797296, "creation_date": 1424792394, "answer_id": 28699987, "question_id": 28699475, "link": "https://stackoverflow.com/questions/28699475/perl-open-close-capturing-return-code/28699987#28699987", "title": "Perl: open/close capturing return code", "body": "<p>As documented in <a href=\"http://perldoc.perl.org/functions/close.html\" rel=\"nofollow\">http://perldoc.perl.org/functions/close.html</a>, the exit value is available as part of <a href=\"http://perldoc.perl.org/perlvar.html#$?\" rel=\"nofollow\"><code>$?</code></a>.  But it can be more convenient to use a wrapper:</p>\n\n<pre><code>use IPC::System::Simple qw(capture $EXITVAL EXIT_ANY);\n\nmy @output = capture([0,2], \"$myexe 2&gt;&amp;1\");\nprint @output;\nprint \"Program exited with value $EXITVAL\\n\";\n</code></pre>\n\n<p>The <code>[0,2]</code> says that exit values 0 or 2 are expected, and anything else is a fatal error; you can use <code>EXIT_ANY</code> instead.</p>\n\n<p>This does get all the output at the end, rather than when it is produced, though.</p>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 4, "last_activity_date": 1424793831, "creation_date": 1424793831, "answer_id": 28700567, "question_id": 28699475, "link": "https://stackoverflow.com/questions/28699475/perl-open-close-capturing-return-code/28700567#28700567", "title": "Perl: open/close capturing return code", "body": "<p>When <code>open</code> creates a child, <code>close</code> functions as <code>waitpid</code> and sets <code>$?</code> accordingly.</p>\n\n<pre><code>$ perl -e'\n   open(my $fh, \"-|\", @ARGV)\n      or die $!;\n\n   print while &lt;$fh&gt;;\n\n   close($fh);\n   if    ($? == -1 ) { die $!; }\n   elsif ($? &amp; 0x7F) { die \"Killed by signal \".($? &amp; 0x7F).\"\\n\"; }\n   elsif ($? &gt;&gt; 8  ) { die \"Exited with error \".($? &gt;&gt; 8).\"\\n\"; }\n' perl -E'\n   $| = 1;\n   for (1..5) {\n      say;\n      sleep 1;\n   }\n   exit 2;\n'\n1\n2\n3\n4\n5\nExited with error 2\n</code></pre>\n"}], "owner": {"reputation": 10213, "user_id": 1686628, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a03a6bd4b5f83b04ff39aec4b44e17ed?s=128&d=identicon&r=PG&f=1", "display_name": "ealeon", "link": "https://stackoverflow.com/users/1686628/ealeon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 431, "favorite_count": 0, "accepted_answer_id": 28700567, "answer_count": 2, "score": 1, "last_activity_date": 1424797296, "creation_date": 1424791000, "last_edit_date": 1424791379, "question_id": 28699475, "link": "https://stackoverflow.com/questions/28699475/perl-open-close-capturing-return-code", "title": "Perl: open/close capturing return code", "body": "<p>myb.py</p>\n\n<pre><code>import time\nimport sys\n\n\nstime = time.time()\nrun_until = 600\n\ncnt = 0\nwhile True:\n    dur = time.time() - stime\n    if dur &gt; run_until:\n        break\n\n    cnt += 1\n    print cnt\n    time.sleep(1)\n\n    if cnt == 10:\n        sys.exit(2)            &lt;---- capture 2\n</code></pre>\n\n<p>mya.pl</p>\n\n<pre><code>use FileHandle;\n\nmy $myexe = 'myb.py';\nmy $FH = FileHandle-&gt;new;\nopen $FH, q{-|},\n    \"$myexe 2&gt;&amp;1\"\n    or print \"Cannot open\\n\";\nprocess_output($FH);\nclose $FH or warn $!;\n\nsub process_output {\n    my ($fh) = @_;\n\n    while (my $line = &lt;$fh&gt;) {\n        chomp $line;\n        print \"$line\\n\";\n    }\n\n}\n</code></pre>\n\n<p>OUTPUT:</p>\n\n<pre><code>1\n2\n3\n4\n5\n6\n7\n8\n9\n10\nWarning: something's wrong at ./mya.pl line 10.\n</code></pre>\n\n<p>if i change the line to: </p>\n\n<pre><code>my $err = close $FH;\n</code></pre>\n\n<p>it gives me a blank for $err.</p>\n\n<p>Question: How can I capture the return code 2 from myb.py in mya.pl?</p>\n"}, {"tags": ["perl", "module"], "comments": [{"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 4, "creation_date": 1424792988, "post_id": 28699289, "comment_id": 45690509, "body": "How did you install the module?"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1464898566, "post_id": 28699289, "comment_id": 62687457, "body": "<i>&quot; I had put the compiled Processors.so next to the .pm when it should be in the auto directory&quot;</i> You shouldn&#39;t &quot;put&quot; any files anywhere. You should <i>install</i> the module from the distribution package downloaded from CPAN"}], "answers": [{"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": true, "score": 14, "last_activity_date": 1467093642, "last_edit_date": 1467093642, "creation_date": 1424791751, "answer_id": 28699766, "question_id": 28699289, "link": "https://stackoverflow.com/questions/28699289/why-do-i-get-cant-locate-loadable-object-for-module-even-after-installing-the/28699766#28699766", "title": "Why do I get &quot;Can&#39;t locate loadable object for module&quot; even after installing the module?", "body": "<p>The <a href=\"https://metacpan.org/pod/Unix::Processors\" rel=\"noreferrer\"><code>Unix::Processors</code></a> module has an XS (C) component that has to be compiled and linked as part of the installation process. The error message <code>Can't locate loadable object</code> is referring to this component (a shared library) rather than the <code>.pm</code> module file itself</p>\n\n<p>This is a symptom of a wrongly-installed module, and most often happens when the <code>.pm</code> file has been simply copied into place instead of being installed properly as described in <a href=\"http://perldoc.perl.org/perlmodinstall.html\" rel=\"noreferrer\">perldoc perlmodinstall</a>. It can also happen if the installation has been <em>forced</em>, regardless of any errors in the build and test phases.</p>\n"}], "owner": {"reputation": 121, "user_id": 3242236, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/95afbd2541ffb003368d6da1117bfe78?s=128&d=identicon&r=PG&f=1", "display_name": "morais", "link": "https://stackoverflow.com/users/3242236/morais"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 14796, "favorite_count": 0, "accepted_answer_id": 28699766, "answer_count": 1, "score": 7, "last_activity_date": 1467093642, "creation_date": 1424790509, "last_edit_date": 1464898501, "question_id": 28699289, "link": "https://stackoverflow.com/questions/28699289/why-do-i-get-cant-locate-loadable-object-for-module-even-after-installing-the", "title": "Why do I get &quot;Can&#39;t locate loadable object for module&quot; even after installing the module?", "body": "<p></p>\n\n<p>Could anyone point me to possible causes of Perl not finding an installed module?</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>$ ll /usr/share/perl5/Unix/Processors.pm\n-rw-r--r-- 1 root root 3.2K Sep 11 12:39 /usr/share/perl5/Unix/Processors.pm\n</code></pre>\n\n<p>Ok,</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>$ perldoc -l Unix::Processors\n/usr/share/perl5/Unix/Processors.pm\n</code></pre>\n\n<p>Ok, but</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>$ perl -MUnix::Processors -e1\nCan't locate loadable object for module Unix::Processors in @INC (@INC contains: /usr/lib/cegma /usr/share/mocat/src /etc/perl /usr/local/lib/perl/5.14.2 /usr/local/share/perl/5.14.2 /usr/lib/perl5 /usr/share/perl5 /usr/lib/perl/5.14 /usr/share/perl/5.14 /usr/local/lib/site_perl .) at -e line 0\nCompilation failed in require.\nBEGIN failed--compilation aborted.\n</code></pre>\n\n<hr>\n\n<p>FIXED: I had put the compiled <code>Processors.so</code> next to the <code>.pm</code> when it should be in the <code>auto</code> directory.</p>\n"}, {"tags": ["perl", "vim"], "answers": [{"tags": [], "owner": {"reputation": 153428, "user_id": 813602, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e1844cebf36374d83a83c0e69003cd42?s=128&d=identicon&r=PG", "display_name": "Ingo Karkat", "link": "https://stackoverflow.com/users/813602/ingo-karkat"}, "is_accepted": true, "score": 3, "last_activity_date": 1424789282, "creation_date": 1424789282, "answer_id": 28698829, "question_id": 28698570, "link": "https://stackoverflow.com/questions/28698570/why-does-the-first-hash-mark-disappear-in-a-vim-fold/28698829#28698829", "title": "Why does the first hash mark disappear in a vim fold?", "body": "<p>What gets displayed instead of the folded lines is controlled by the <code>'foldtext'</code> option. By default, the internal <code>foldtext()</code> function is used. <code>:help foldtext()</code> explains:</p>\n\n<blockquote>\n<pre><code>  The returned string looks like this:\n      +-- 45 lines: abcdef\n  The number of dashes depends on the foldlevel.  The \"45\" is\n  the number of lines in the fold.  \"abcdef\" is the text in the\n  first non-blank line of the fold.  Leading white space, \"//\"\n  or \"/*\" and the text from the 'foldmarker' and 'commentstring'\n  options is removed.\n</code></pre>\n</blockquote>\n\n<p>As you see, this is a heuristic of Vim to reduce clutter. To turn that off:</p>\n\n<ol>\n<li>You can clear <code>'commentstring'</code>; it is only used to add manual fold markers (and some commenting plugins may rely on it as a fallback), by putting <code>:setlocal commentstring=</code> into <code>~/.vim/after/ftplugin/perl.vim</code>.</li>\n<li>You can write your own fold function (example and instructions at <code>:help fold-foldtext</code>), and install that, either globally or (like above alternative) only for the Perl filetype.</li>\n</ol>\n"}], "owner": {"reputation": 179, "user_id": 1237081, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/8720d73dbe05f384345414f94d3a56cd?s=128&d=identicon&r=PG", "display_name": "David Levner", "link": "https://stackoverflow.com/users/1237081/david-levner"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 101, "favorite_count": 0, "accepted_answer_id": 28698829, "answer_count": 1, "score": 1, "last_activity_date": 1424789282, "creation_date": 1424788635, "question_id": 28698570, "link": "https://stackoverflow.com/questions/28698570/why-does-the-first-hash-mark-disappear-in-a-vim-fold", "title": "Why does the first hash mark disappear in a vim fold?", "body": "<p>I am using manual folding to write perl programs. Here is a typical fold:</p>\n\n<pre><code>sub do_something # does something --{{{\n{\n    # perl code here\n} # --}}}\n</code></pre>\n\n<p>When folded, these four lines are displayed thus:</p>\n\n<pre><code>+-- 4 lines: sub do_something does something ----------------------------\n</code></pre>\n\n<p>In the folded version, the hash mark before the word \"does\" has disappeared. Why? If this is a feature, how can I disable it? As a workaround, I am writing 'sub do_something ## does something --{{{', but is there a clean way to get vim to just display what I have typed? (Maybe this has something to do with perl.vim?)</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 60461, "user_id": 3636601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/69a1b4f750ece89db0e49c94519f1a7d?s=128&d=identicon&r=PG&f=1", "display_name": "Jens", "link": "https://stackoverflow.com/users/3636601/jens"}, "edited": false, "score": 0, "creation_date": 1424788339, "post_id": 28698398, "comment_id": 45686885, "body": "Iterate over the array and use pattern matching to find if yourstring matches."}], "answers": [{"comments": [{"owner": {"reputation": 41, "user_id": 4402273, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/5c382c551bd4818ef5220206243053cf?s=128&d=identicon&r=PG&f=1", "display_name": "Newyork111", "link": "https://stackoverflow.com/users/4402273/newyork111"}, "edited": false, "score": 0, "creation_date": 1424788739, "post_id": 28698457, "comment_id": 45687175, "body": "Thank you, Mark! While when printing I get the correct value with this code, I can&#39;t store it. If I assign it to a variable I get 1 as a result, regardless of what the index is. Do you know what problem is at hand here?"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 1, "creation_date": 1424788901, "post_id": 28698457, "comment_id": 45687282, "body": "grep will be returning a list, so if you have multiple hits, you&#39;ll get multiple results. You can assign it with <code>my @indicies = grep ....</code>."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1424790691, "post_id": 28698457, "comment_id": 45688681, "body": "@MarkReed: <i>\u201cThe return value of grep is a list of matching elements ...\u201d</i> That&#39;s not really true. A <i>list</i> in scalar context evaluates to the last element of the list. It is <code>grep</code> itself that is contexts sensitive, and returns a count of matching elements in scalar context. That is different from a subroutine that always returns a list."}, {"owner": {"reputation": 21961, "user_id": 12195, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29cb106071d163d703484e63839d89cb?s=128&d=identicon&r=PG", "display_name": "draegtun", "link": "https://stackoverflow.com/users/12195/draegtun"}, "reply_to_user": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 3, "creation_date": 1425287634, "post_id": 28698457, "comment_id": 45885208, "body": "@Sobrique - Even better would be to use <a href=\"https://metacpan.org/pod/List::Util#first\" rel=\"nofollow noreferrer\"><code>first</code></a> from the core <code>List::Util</code> module because it short-circuits on finding item:  <code>my $first_match = first { ...</code>"}], "tags": [], "owner": {"reputation": 80721, "user_id": 797049, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5f4f7a23e3d0134123a66015bdc4edd1?s=128&d=identicon&r=PG", "display_name": "Mark Reed", "link": "https://stackoverflow.com/users/797049/mark-reed"}, "is_accepted": true, "score": 5, "last_activity_date": 1543476746, "last_edit_date": 1543476746, "creation_date": 1424788358, "answer_id": 28698457, "question_id": 28698398, "link": "https://stackoverflow.com/questions/28698398/index-of-an-element-in-an-array-in-perl/28698457#28698457", "title": "Index of an element in an array in Perl", "body": "<p>Quick search didn't find a dupe, but I'm sure there is one.  Meanwhile:</p>\n\n<p>To find elements of an array that meet a certain condition, you use <code>grep</code>.  If you want the indexes instead of the elements.. well, Perl 6 added a <code>grep-index</code> method to handle that case, but in Perl 5 the easiest way is to change the target of <code>grep</code>. That is, instead of running it on the original array, run it on a list of indexes - just with a condition that references the original array.  In your case, that might look like this:</p>\n\n<pre><code>my @array = ( 'Maria likes tomatoes', \n              'Sonia likes plums', \n              'Andrew likes oranges');\n\ngrep { $array[$_] =~ /plums/ } 0..$#array;    # 1\n</code></pre>\n\n<p>Relevant bits: </p>\n\n<ul>\n<li><code>$#array</code> returns the index of the last element of <code>@array</code>. </li>\n<li><em>m</em><code>..</code><em>n</em> generates a range of values between <em>m</em> and <em>n</em> (inclusive); in list context that becomes a list of those values. </li>\n<li><code>grep {</code> <em>code</em> <code>}</code> <em>list</em> returns the elements of <em>list</em> for which <em>code</em> produces a true value when the special variable <code>$_</code> is set to the element.</li>\n</ul>\n\n<p>These sorts of expressions read most easily from right to left. So, first we generate a list of all the indexes of the original array (<code>0..$#array</code>), then we use <code>grep</code> to test each index (represented by <code>$_</code>) to see if the corresponding element of <code>@array</code> (<code>$array[$_]</code>) matches (<code>~=</code>) the regular expression <code>/plums/</code>.  </p>\n\n<p>If it does, that index is included in the list returned by the <code>grep</code>; if not, it's left out. So the end result is a list of only those indexes for which the condition is true.  In this case, that list contains only the value 1.</p>\n\n<p><strong>Added to reply to your comment:</strong> It's important to note that the return value of <code>grep</code> is normally a <em>list</em> of matching elements, even if there is only one match.  If you assign the result to an array (e.g. with <code>my @indexes = grep</code>...), the array will contain all the matching values.  However, <code>grep</code> is context-sensitive, and if you call it in scalar context (e.g. by assigning its return value to a scalar variable with something like <code>my $count = grep</code>...), you'll instead only get a number telling you how many matches there were.  You might want to take a look at <a href=\"http://perlmaven.com/scalar-and-list-context-in-perl\" rel=\"nofollow noreferrer\">this tutorial</a> on context sensitivity in Perl.</p>\n"}, {"comments": [{"owner": {"reputation": 80721, "user_id": 797049, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5f4f7a23e3d0134123a66015bdc4edd1?s=128&d=identicon&r=PG", "display_name": "Mark Reed", "link": "https://stackoverflow.com/users/797049/mark-reed"}, "edited": false, "score": 1, "creation_date": 1424800663, "post_id": 28700186, "comment_id": 45695676, "body": "What if you want the indexes of all the matching elements, not just the first (or last, since <code>List::MoreUtils</code> also offers <code>lastidx</code>)?"}, {"owner": {"reputation": 21961, "user_id": 12195, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29cb106071d163d703484e63839d89cb?s=128&d=identicon&r=PG", "display_name": "draegtun", "link": "https://stackoverflow.com/users/12195/draegtun"}, "reply_to_user": {"reputation": 80721, "user_id": 797049, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5f4f7a23e3d0134123a66015bdc4edd1?s=128&d=identicon&r=PG", "display_name": "Mark Reed", "link": "https://stackoverflow.com/users/797049/mark-reed"}, "edited": false, "score": 3, "creation_date": 1424818559, "post_id": 28700186, "comment_id": 45705289, "body": "@MarkReed - see <code>indexes</code> in <code>List::MoreUtils</code> to get indexes of all matching elements - <a href=\"https://metacpan.org/pod/List::MoreUtils#indexes-BLOCK-LIST\" rel=\"nofollow noreferrer\">metacpan.org/pod/List::MoreUtils#indexes-BLOCK-LIST</a>"}], "tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 3, "last_activity_date": 1424865182, "last_edit_date": 1424865182, "creation_date": 1424792902, "answer_id": 28700186, "question_id": 28698398, "link": "https://stackoverflow.com/questions/28698398/index-of-an-element-in-an-array-in-perl/28700186#28700186", "title": "Index of an element in an array in Perl", "body": "<p>This is what <code>firstidx</code> from <a href=\"https://metacpan.org/pod/List::MoreUtils\" rel=\"nofollow\">List::MoreUtils</a> is for.</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\nuse 5.010;\n\nuse List::MoreUtils 'firstidx';\n\nmy @array = ('Maria likes tomatoes',\n             'Sonia likes plums',\n             'Andrew likes oranges');\n\nsay firstidx { /plums/ } @array;\n</code></pre>\n\n<p><strong>Update:</strong> I see that draegtun has answered your comment about getting multiple indexes. But I wonder why you couldn't just browse the List::MoreUtils documentation to see if there was a useful-looking function in there.</p>\n"}], "owner": {"reputation": 41, "user_id": 4402273, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/5c382c551bd4818ef5220206243053cf?s=128&d=identicon&r=PG&f=1", "display_name": "Newyork111", "link": "https://stackoverflow.com/users/4402273/newyork111"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4042, "favorite_count": 0, "accepted_answer_id": 28698457, "answer_count": 2, "score": 0, "last_activity_date": 1543476746, "creation_date": 1424788142, "question_id": 28698398, "link": "https://stackoverflow.com/questions/28698398/index-of-an-element-in-an-array-in-perl", "title": "Index of an element in an array in Perl", "body": "<p>I am trying to find a way to get an index of an element in an array that partially matches a certain patten.\nLet's say I have an array with values</p>\n\n<pre><code>Maria likes tomatoes,\nSonia likes plums,\nAndrew likes oranges\n</code></pre>\n\n<p>If my search term is plums, I will get 1 returned as index.\nThank you!</p>\n"}, {"tags": ["bash", "perl", "cygwin"], "comments": [{"owner": {"reputation": 61610, "user_id": 725418, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/82ac2dc3e1ad4b7187f245c416528df9?s=128&d=identicon&r=PG", "display_name": "TLP", "link": "https://stackoverflow.com/users/725418/tlp"}, "edited": false, "score": 1, "creation_date": 1424784959, "post_id": 28696122, "comment_id": 45684575, "body": "<code>perl -pi -e</code> does not create a <code>.bak</code> file, it alters the original file and deletes any temporary files. The <code>-i</code> switch actually takes an argument, and for you to get the backup you get you would need to enter <code>perl -pi.bak -e</code>. This could of course be some automagic feature of cygwin or your other software, but its not Perl. In Windows, you have to provide a backup extension to the <code>-i</code> switch, so perhaps Cygwin hacked one in there."}, {"owner": {"reputation": 3432, "user_id": 604642, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/48daad611ba387f8473b0c1e5792aa3f?s=128&d=identicon&r=PG", "display_name": "shawnhcorey", "link": "https://stackoverflow.com/users/604642/shawnhcorey"}, "edited": false, "score": 0, "creation_date": 1424785695, "post_id": 28696122, "comment_id": 45685056, "body": "The <code>-i</code> command-line switch will create a backup file. It has an optional argument. Without an argument, it will use the extension <code>.bak</code>. To not create a backup file, don&#39;t use the switch: <code>perl -p -e</code> See <code>perldoc perlrun</code> and search for <code>&#47;Command Switches&#47;</code> <a href=\"http://perldoc.perl.org/perlrun.html#Command-Switches\" rel=\"nofollow noreferrer\">perldoc.perl.org/perlrun.html#Command-Switches</a>"}, {"owner": {"reputation": 137100, "user_id": 874188, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/ZcY77.png?s=128&g=1", "display_name": "tripleee", "link": "https://stackoverflow.com/users/874188/tripleee"}, "reply_to_user": {"reputation": 3432, "user_id": 604642, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/48daad611ba387f8473b0c1e5792aa3f?s=128&d=identicon&r=PG", "display_name": "shawnhcorey", "link": "https://stackoverflow.com/users/604642/shawnhcorey"}, "edited": false, "score": 4, "creation_date": 1424786951, "post_id": 28696122, "comment_id": 45685970, "body": "@shawnhcorey The documentation you link to does not describe the behavior you outline, and my experimentation and experience certainly don&#39;t support your claims, either. (I don&#39;t have Windows or Cygwin, though.)"}, {"owner": {"reputation": 18883, "user_id": 2612235, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/dpsjq.jpg?s=128&g=1", "display_name": "nowox", "link": "https://stackoverflow.com/users/2612235/nowox"}, "reply_to_user": {"reputation": 61610, "user_id": 725418, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/82ac2dc3e1ad4b7187f245c416528df9?s=128&d=identicon&r=PG", "display_name": "TLP", "link": "https://stackoverflow.com/users/725418/tlp"}, "edited": false, "score": 0, "creation_date": 1424787523, "post_id": 28696122, "comment_id": 45686347, "body": "@TLP Yes on Cygwin you have the same behavior as in Windows because the base filesystem is the same. However I don&#39;t know why this limitation exists on Windows."}, {"owner": {"reputation": 18883, "user_id": 2612235, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/dpsjq.jpg?s=128&g=1", "display_name": "nowox", "link": "https://stackoverflow.com/users/2612235/nowox"}, "reply_to_user": {"reputation": 3432, "user_id": 604642, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/48daad611ba387f8473b0c1e5792aa3f?s=128&d=identicon&r=PG", "display_name": "shawnhcorey", "link": "https://stackoverflow.com/users/604642/shawnhcorey"}, "edited": false, "score": 0, "creation_date": 1424787641, "post_id": 28696122, "comment_id": 45686436, "body": "@shawnhcorey I thought <code>-i</code> specify that the files are processed by the <code>&lt;&gt;</code> and edited-in-place. I don&#39;t know how to edit-in-place without <code>-i</code>"}, {"owner": {"reputation": 61610, "user_id": 725418, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/82ac2dc3e1ad4b7187f245c416528df9?s=128&d=identicon&r=PG", "display_name": "TLP", "link": "https://stackoverflow.com/users/725418/tlp"}, "edited": false, "score": 0, "creation_date": 1424790279, "post_id": 28696122, "comment_id": 45688340, "body": "@coin Perhaps they just assume that Windows users need more hand-holding, or perhaps it just is some software limitation. You can however write a script to run in place, where you overtly open/alter/rename the file. You do not have to use the command line switches. For example: <code>... | xargs perl script.pl</code>. When they say &quot;in-place edit&quot;, that&#39;s just another way of saying &quot;open, read, print to new file, copy new file to old file&quot;, but it is done &quot;under the hood&quot;, with a predefined functionality. Which in this case does not fit your requirement."}, {"owner": {"reputation": 61610, "user_id": 725418, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/82ac2dc3e1ad4b7187f245c416528df9?s=128&d=identicon&r=PG", "display_name": "TLP", "link": "https://stackoverflow.com/users/725418/tlp"}, "edited": false, "score": 0, "creation_date": 1424790520, "post_id": 28696122, "comment_id": 45688534, "body": "@coin If you can use <code>find</code> for this, you can write a full program in Perl to handle it all, using for example the <code>File::Find</code> module. I don&#39;t know how to translate your <code>git</code> command into a <code>find</code> command, but if you know the file structure, it would be a lot easier that way."}, {"owner": {"reputation": 18883, "user_id": 2612235, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/dpsjq.jpg?s=128&g=1", "display_name": "nowox", "link": "https://stackoverflow.com/users/2612235/nowox"}, "reply_to_user": {"reputation": 61610, "user_id": 725418, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/82ac2dc3e1ad4b7187f245c416528df9?s=128&d=identicon&r=PG", "display_name": "TLP", "link": "https://stackoverflow.com/users/725418/tlp"}, "edited": false, "score": 0, "creation_date": 1424790798, "post_id": 28696122, "comment_id": 45688783, "body": "@TLP I initially wrote a script as you suggested, but I feel better to use native tools rather that multiplying the amount of required programs/scripts."}, {"owner": {"reputation": 61610, "user_id": 725418, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/82ac2dc3e1ad4b7187f245c416528df9?s=128&d=identicon&r=PG", "display_name": "TLP", "link": "https://stackoverflow.com/users/725418/tlp"}, "edited": false, "score": 1, "creation_date": 1424791576, "post_id": 28696122, "comment_id": 45689428, "body": "@coin Well, you would reduce the amount of required programs/scripts to just require Perl.... Not sure what you mean there. With my version below you don&#39;t even need Cygwin."}, {"owner": {"reputation": 18883, "user_id": 2612235, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/dpsjq.jpg?s=128&g=1", "display_name": "nowox", "link": "https://stackoverflow.com/users/2612235/nowox"}, "reply_to_user": {"reputation": 61610, "user_id": 725418, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/82ac2dc3e1ad4b7187f245c416528df9?s=128&d=identicon&r=PG", "display_name": "TLP", "link": "https://stackoverflow.com/users/725418/tlp"}, "edited": false, "score": 0, "creation_date": 1424791703, "post_id": 28696122, "comment_id": 45689522, "body": "@TLP Indeed, but in my case I need Cygwin anyway."}, {"owner": {"reputation": 61610, "user_id": 725418, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/82ac2dc3e1ad4b7187f245c416528df9?s=128&d=identicon&r=PG", "display_name": "TLP", "link": "https://stackoverflow.com/users/725418/tlp"}, "edited": false, "score": 0, "creation_date": 1424791787, "post_id": 28696122, "comment_id": 45689584, "body": "@coin Well, you can use Cygwin if you want to. I&#39;m just saying this solution has far fewer requirements, software-wise."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 61610, "user_id": 725418, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/82ac2dc3e1ad4b7187f245c416528df9?s=128&d=identicon&r=PG", "display_name": "TLP", "link": "https://stackoverflow.com/users/725418/tlp"}, "edited": false, "score": 1, "creation_date": 1424797065, "post_id": 28696122, "comment_id": 45693467, "body": "@TLP, Windows doesn&#39;t support anonymous files, which is why <code>-i</code> doesn&#39;t work on Windows. (<code>-i</code> opens the file, deletes it, creates a new file with the same name.) Cygwin is suppose to be a unix system, so <code>-i</code> is suppose to work, so it appears that <code>-i</code> was made equivalent to <code>-i.bak</code>."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1424797145, "post_id": 28696122, "comment_id": 45693528, "body": "@coin, Re &quot;I don&#39;t know how to edit-in-place without <code>-i</code>&quot;, You can do the same thing <code>-i.bak</code> does: Rename the file, open the renamed file, create a new file with the original name. Read from the renamed file. Write to the new file. Just do the extra step of deleting the file afterwards."}, {"owner": {"reputation": 18883, "user_id": 2612235, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/dpsjq.jpg?s=128&g=1", "display_name": "nowox", "link": "https://stackoverflow.com/users/2612235/nowox"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1424810000, "post_id": 28696122, "comment_id": 45700928, "body": "@ikegami, On Cygwin, <code>perl -pe &#39;s&#47;&#47;&#47; file&#39; cat file on </code>STDOUT<code>. It doesn&#39;t edit-in-place. Moreover </code>echo &quot;foo&quot; &gt; file &amp;&amp; perl -pe &#39;s/foo/bar/&#39; file &gt; file &amp;&amp; cat file` gives nothing. Foo is empty. However I can do <code>echo &quot;foo&quot; &gt; file &amp;&amp; perl -pe &#39;s&#47;foo&#47;bar&#47;&#39; file &gt; file.bak &amp;&amp; mv file.bak file &amp;&amp; cat file</code>. This time it works"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1424810398, "post_id": 28696122, "comment_id": 45701137, "body": "Re &quot;On Cygwin,  <code>perl -pe &#39;s&#47;&#47;&#47;&#39; file</code> outputs the file on STDOUT&quot;, Yeah, same with every other OS."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1424810441, "post_id": 28696122, "comment_id": 45701159, "body": "Re &quot;Moreover <code>echo &quot;foo&quot; &gt; file &amp;&amp; perl -pe &#39;s&#47;foo&#47;bar&#47;&#39; file &gt; file &amp;&amp; cat file</code> gives nothing&quot;, Because <code>&gt;file</code> empties the file, there&#39;s nothing left for <code>perl -pe &#39;s&#47;foo&#47;bar&#47;&#39; file</code> to read."}, {"owner": {"reputation": 18883, "user_id": 2612235, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/dpsjq.jpg?s=128&g=1", "display_name": "nowox", "link": "https://stackoverflow.com/users/2612235/nowox"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1424810563, "post_id": 28696122, "comment_id": 45701230, "body": "@ikegami Well, I didn&#39;t get your last point. It is not possible to edit-in-place without the <code>-i</code> or <code>-i.ext</code> option. I guess the best solution might be the \u0421\u0443\u0445\u043e\u043927&#39;s one."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1424810606, "post_id": 28696122, "comment_id": 45701256, "body": "Re &quot;It is not possible to edit in-place without the -i or -i.ext&quot;, Sure it is. Like you said, you got it to work. It&#39;s not truly in-place, but neither is <code>-i</code>."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1424810746, "post_id": 28696122, "comment_id": 45701334, "body": "As I mentioned, <code>-i.bak</code> does it this way: <code>mv file{,.bak} &amp;&amp; perl -pe &#39;s&#47;foo&#47;bar&#47;&#39; file.bak &gt;file</code>. All you need to add is <code>rm file.bak</code>. But your way is safer (though <code>file.new</code> would make more sense than <code>file.bak</code>)."}], "answers": [{"tags": [], "owner": {"reputation": 137100, "user_id": 874188, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/ZcY77.png?s=128&g=1", "display_name": "tripleee", "link": "https://stackoverflow.com/users/874188/tripleee"}, "is_accepted": false, "score": 4, "last_activity_date": 1424783260, "last_edit_date": 1424783260, "creation_date": 1424782767, "answer_id": 28696487, "question_id": 28696122, "link": "https://stackoverflow.com/questions/28696122/perl-pi-e-remove-bak-automatically-on-cygwin/28696487#28696487", "title": "perl -pi -e remove .bak automatically on cygwin", "body": "<p>You can run a Bash script in <code>xargs</code>.</p>\n\n<pre><code>git ls-files '*.asm' '*.[ch]' '*.inc' |\nxargs bash -c 'perl -pi -e \"s/foo/bar/\" \"$@\"; for f; do rm -f \"$f.bak\"; done' _\n</code></pre>\n\n<p>Note also how I refactored out the <code>egrep</code> into <code>git ls-files</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "is_accepted": true, "score": 3, "last_activity_date": 1424785464, "creation_date": 1424785464, "answer_id": 28697420, "question_id": 28696122, "link": "https://stackoverflow.com/questions/28696122/perl-pi-e-remove-bak-automatically-on-cygwin/28697420#28697420", "title": "perl -pi -e remove .bak automatically on cygwin", "body": "<p>You can use perl to delete <code>.bak</code> files,</p>\n\n<pre><code>.. | xargs perl -i.bak -pe 'BEGIN{ @d=@ARGV } s/foo/bar/; END{ unlink map \"$_$^I\", @d }'\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 18883, "user_id": 2612235, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/dpsjq.jpg?s=128&g=1", "display_name": "nowox", "link": "https://stackoverflow.com/users/2612235/nowox"}, "edited": false, "score": 0, "creation_date": 1424791618, "post_id": 28699602, "comment_id": 45689459, "body": "Do you really need to <code>close $tmp; close $fh</code>? You reuse the same fh at each iteration and your script is not doing anything else after that for loop"}, {"owner": {"reputation": 61610, "user_id": 725418, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/82ac2dc3e1ad4b7187f245c416528df9?s=128&d=identicon&r=PG", "display_name": "TLP", "link": "https://stackoverflow.com/users/725418/tlp"}, "reply_to_user": {"reputation": 18883, "user_id": 2612235, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/dpsjq.jpg?s=128&g=1", "display_name": "nowox", "link": "https://stackoverflow.com/users/2612235/nowox"}, "edited": false, "score": 2, "creation_date": 1424791696, "post_id": 28699602, "comment_id": 45689513, "body": "@coin Yes, I need to close both files in order to move them, otherwise the files will be busy and we get all sorts of nasty problems. Technically, there are ways around it, such as using a <code>continue</code> block, where the file handles would be auto-closed when they go out of scope. But why complicate things when this is so easy to do?"}, {"owner": {"reputation": 18883, "user_id": 2612235, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/dpsjq.jpg?s=128&g=1", "display_name": "nowox", "link": "https://stackoverflow.com/users/2612235/nowox"}, "edited": false, "score": 0, "creation_date": 1424810152, "post_id": 28699602, "comment_id": 45700991, "body": "in your example <code>while (&lt;&gt;)</code> is supposed to iterate on <code>$fh</code> right? I thought <code>&lt;&gt;</code> applies only on <code>STDIN</code> and <code>ARGV</code>"}], "tags": [], "owner": {"reputation": 61610, "user_id": 725418, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/82ac2dc3e1ad4b7187f245c416528df9?s=128&d=identicon&r=PG", "display_name": "TLP", "link": "https://stackoverflow.com/users/725418/tlp"}, "is_accepted": false, "score": 0, "last_activity_date": 1424812883, "last_edit_date": 1424812883, "creation_date": 1424791307, "answer_id": 28699602, "question_id": 28696122, "link": "https://stackoverflow.com/questions/28696122/perl-pi-e-remove-bak-automatically-on-cygwin/28699602#28699602", "title": "perl -pi -e remove .bak automatically on cygwin", "body": "<p>If you can use <code>find</code> to execute this command, you can use the Perl module <a href=\"https://metacpan.org/pod/File::Find\" rel=\"nofollow\"><code>File::Find</code></a> -- a core module in Perl 5 -- to replace the entire command with a Perl program.</p>\n\n<p>Example of how to use this in a program file instead of a one-liner:</p>\n\n<pre><code>use strict;\nuse warnings;\nuse File::Find;\nuse autodie;      # file operation failures are fatal\nuse File::Copy;   # for move()\n\nmy $dir = shift;  # starting dir\nmy @files;\nfind(\n    sub { \n        if (/\\.(?:asm|c|h|inc)$/) { \n            push @files, $File::Find::name; \n        }\n    }, $dir);\n\nfor my $file (@files) {\n    open my $fh, \"&lt;\", $file;\n    open my $tmp, \"&gt;\", \"$file.bak\";\n    while (&lt;$fh&gt;) {\n        s/foo/bar/;\n    } continue { print $tmp $_ }\n    close $tmp;\n    close $fh;\n    move \"$file.bak\", $file;\n}\n</code></pre>\n\n<p>You could possibly also pass the replacement as an argument instead of hard coding it, e.g. </p>\n\n<pre><code>my ($search, $replace, $dir) = @ARGV;  \n</code></pre>\n\n<p>And then inside the loop use the variables:</p>\n\n<pre><code>s/$search/$replace/;\n</code></pre>\n\n<p>You would call it instead of your other command with pipes, something like this:</p>\n\n<pre><code>perl program.pl foo bar /some/dir\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 1, "last_activity_date": 1424899754, "last_edit_date": 1424899754, "creation_date": 1424812411, "answer_id": 28706386, "question_id": 28696122, "link": "https://stackoverflow.com/questions/28696122/perl-pi-e-remove-bak-automatically-on-cygwin/28706386#28706386", "title": "perl -pi -e remove .bak automatically on cygwin", "body": "<p>On unix systems,</p>\n\n<pre><code>perl -i -pe'...' file\n</code></pre>\n\n<p>is basically the same as</p>\n\n<pre><code>exec 3&lt;file\nrm file\nperl -pe'...' &lt;&amp;3 &gt;file\n</code></pre>\n\n<p><code>rm file</code> deletes the file name, but the file sticks around anonymously since there's an open handle to it. Windows doesn't support that, so Windows doesn't support <code>-i</code>.</p>\n\n<p>It turns out that the code I posted <strong>does</strong> work on cygwin too!</p>\n\n<pre><code>$ echo foo &gt;file\n\n$ exec 3&lt;file &amp;&amp; rm file &amp;&amp; perl -pe's/foo/bar/' &lt;&amp;3 &gt;file\n\n$ cat file\nbar\n</code></pre>\n\n<p>For whatever reason, cygwin builds of Perl don't rely on that emulation of the unix feature and has <code>-i</code> behave as <code>-i.bak</code> (which does work on Windows).</p>\n\n<p>If you really wanted to avoid temporary files, you could use the following:</p>\n\n<pre><code>perl -e'\n   for $ARGV (@ARGV) {\n      open(my $fh, \"&lt;\", $ARGV)\n         or warn(\"open $ARGV: $!\"), next;\n\n      unlink($ARGV)\n         or warn(\"unlink $ARGV: $!\"), next;\n\n      open(STDOUT, \"&gt;\", $ARGV)\n         or warn(\"open $ARGV: $!\"), next;\n\n      while (&lt;$fh&gt;) {\n         s/foo/bar/;\n         print;\n      }\n   }\n'\n</code></pre>\n"}], "owner": {"reputation": 18883, "user_id": 2612235, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/dpsjq.jpg?s=128&g=1", "display_name": "nowox", "link": "https://stackoverflow.com/users/2612235/nowox"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 751, "favorite_count": 0, "accepted_answer_id": 28697420, "answer_count": 4, "score": 0, "last_activity_date": 1424899754, "creation_date": 1424781777, "question_id": 28696122, "link": "https://stackoverflow.com/questions/28696122/perl-pi-e-remove-bak-automatically-on-cygwin", "title": "perl -pi -e remove .bak automatically on cygwin", "body": "<p>Under Cygwin, <code>perl -pi -e</code> will always save <code>.bak</code> files. I don't exactly understand why, but I want to get rid of it. </p>\n\n<p>I usually use Perl pie like this: </p>\n\n<pre><code>git ls-files | egrep '[.](asm|c|h|inc)' | xargs perl -pi -e 's/foo/bar/'\n</code></pre>\n\n<p>Then I need to execute this:</p>\n\n<pre><code>git ls-files | egrep '[.](asm|c|h|inc)' | sed 's/$/.bak/' | rm -f \n</code></pre>\n\n<p>I tried to create a function but <code>xargs</code> doesn't like bash functions. Is there a way to easily combine my two commands together?</p>\n\n<p>Of course I can rather use <code>find</code> or <code>ls</code> to get my files.</p>\n\n<p>Actually the solution that might work the best for me is to declare an alias to <code>perl -pi -e</code> that automatically removes the unwanted <code>.bak</code> file. </p>\n\n<p>Any suggestions?</p>\n"}, {"tags": ["perl", "perl-module", "perl-data-structures"], "comments": [{"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1424806078, "post_id": 28696009, "comment_id": 45698687, "body": "Your code doesn&#39;t really have any link to the file you&#39;re reading. But your hashref might be accumulating lots of data."}], "answers": [{"tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": false, "score": 2, "last_activity_date": 1424782190, "creation_date": 1424782190, "answer_id": 28696259, "question_id": 28696009, "link": "https://stackoverflow.com/questions/28696009/memory-issue-occurs-randomly-for-few-jobs/28696259#28696259", "title": "memory issue occurs randomly for few jobs", "body": "<p>As it stands, your question is pretty broad, so it's hard to give a solid answer. But the biggest question would be - what are you <em>doing</em> with your huge data file. If you're loading it into memory, then that's where it's gone.</p>\n\n<p>The biggest gotcha is accessing the filehandle in a list context, such as <code>foreach</code> or assigning it as an array. </p>\n\n<p>e.g.:</p>\n\n<pre><code>foreach ( &lt;$filehandle&gt; ) {\n</code></pre>\n\n<p>or </p>\n\n<pre><code>my @stuff = &lt;$filehandle&gt;;\n</code></pre>\n\n<p>Because both these operations will cause the file to be read into memory for processing, where:</p>\n\n<pre><code>while ( &lt;$filehandle&gt; ) {\n</code></pre>\n\n<p>and </p>\n\n<pre><code>my $stuff_line = &lt;$filehandle&gt;; \n</code></pre>\n\n<p>won't. </p>\n\n<p>If you're using a hash, you can 'print' it in a scalar context, to reveal how big it is. </p>\n\n<pre><code>print scalar %hash;\n</code></pre>\n\n<p>Which will give you an indication of how big it is.</p>\n\n<p>Variable scoping can also be a factor - global scope variables 'hang around' if you're not careful, so perl can't tidy up. Perl itself will generally manage it's own memory usage, and recycle 'free' space internally, so a big number doesn't <em>necessarily</em> mean there's a problem. </p>\n\n<p>If you're wanting some more detail, you're probably wanting to look at <a href=\"http://search.cpan.org/~nwclark/Devel-Size-0.79/lib/Devel/Size.pm\" rel=\"nofollow\"><code>Devel::Size</code></a> or similar</p>\n"}], "owner": {"reputation": 1, "user_id": 4601165, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1de47a95e49c258ba5a55c17fe2e13ef?s=128&d=identicon&r=PG&f=1", "display_name": "Arun A", "link": "https://stackoverflow.com/users/4601165/arun-a"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 29, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1424870410, "creation_date": 1424781484, "last_edit_date": 1424870410, "question_id": 28696009, "link": "https://stackoverflow.com/questions/28696009/memory-issue-occurs-randomly-for-few-jobs", "title": "memory issue occurs randomly for few jobs", "body": "<p>I am receiving a out of memory issue when providing the huge file data as a argument. I have checked the memory size it has free space 2045 mb. Is that sufficient for the swap space to sort the records in hash ref value. please let me know what checks can be done.</p>\n\n<hr>\n\n<p>thanks for your explanation.</p>\n\n<p>I am using the hash module as below.</p>\n\n<pre><code> my ($href, @list);\n$href = $self-&gt;{set}{$ret}         if ($scope eq 'set');\n$href = $self-&gt;{done}{$ret}      if ($scope eq 'done');\n\nforeach (sort keys %$href) {\n  push @list, $href-&gt;{$_};\n  }\n\nreturn @list;\n\nIts is reading from the oracle table.\n</code></pre>\n"}, {"tags": ["python", "perl", "random", "irc", "hexchat"], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 4600748, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/67c94fc832a9365c2470a2ecc888d3af?s=128&d=identicon&r=PG&f=1", "display_name": "MiddayHobo", "link": "https://stackoverflow.com/users/4600748/middayhobo"}, "edited": false, "score": 0, "creation_date": 1424789665, "post_id": 28697142, "comment_id": 45687878, "body": "Thank you very much! I changed a few things in the code so it now loads properly in HexChat. Unfortunately, when I type /random command, an error occurs. I pasted it into my original post."}, {"owner": {"reputation": 6814, "user_id": 1663352, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d7aae8aa2d2bd58c23ed06da5d3c2cca?s=128&d=identicon&r=PG", "display_name": "Noelkd", "link": "https://stackoverflow.com/users/1663352/noelkd"}, "reply_to_user": {"reputation": 3, "user_id": 4600748, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/67c94fc832a9365c2470a2ecc888d3af?s=128&d=identicon&r=PG&f=1", "display_name": "MiddayHobo", "link": "https://stackoverflow.com/users/4600748/middayhobo"}, "edited": false, "score": 0, "creation_date": 1424789997, "post_id": 28697142, "comment_id": 45688126, "body": "You are getting a not getting a number  but a string, you need to turn it into an int for it to work. change <code>100 - percent_chance</code> to <code>100 - int(percent_chance)</code>. I&#39;m not even sure <code>word[1]</code> is the number, that&#39;s why i said you&#39;d have to do the leg work yourself."}, {"owner": {"reputation": 3, "user_id": 4600748, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/67c94fc832a9365c2470a2ecc888d3af?s=128&d=identicon&r=PG&f=1", "display_name": "MiddayHobo", "link": "https://stackoverflow.com/users/4600748/middayhobo"}, "edited": false, "score": 0, "creation_date": 1424792246, "post_id": 28697142, "comment_id": 45689911, "body": "Last thing: how to display the command I just used (for example &quot;/random 65&quot;) in a line before &quot;Success&quot; and &quot;Failure&quot;, so that other users would know that I actually used it and not just manually typed the outcome?"}, {"owner": {"reputation": 6814, "user_id": 1663352, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d7aae8aa2d2bd58c23ed06da5d3c2cca?s=128&d=identicon&r=PG", "display_name": "Noelkd", "link": "https://stackoverflow.com/users/1663352/noelkd"}, "reply_to_user": {"reputation": 3, "user_id": 4600748, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/67c94fc832a9365c2470a2ecc888d3af?s=128&d=identicon&r=PG&f=1", "display_name": "MiddayHobo", "link": "https://stackoverflow.com/users/4600748/middayhobo"}, "edited": false, "score": 0, "creation_date": 1424792460, "post_id": 28697142, "comment_id": 45690081, "body": "<a href=\"http://hexchat.readthedocs.org/en/latest/script_python.html#word-and-word-eol\" rel=\"nofollow noreferrer\">rtfm</a>"}], "tags": [], "owner": {"reputation": 6814, "user_id": 1663352, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d7aae8aa2d2bd58c23ed06da5d3c2cca?s=128&d=identicon&r=PG", "display_name": "Noelkd", "link": "https://stackoverflow.com/users/1663352/noelkd"}, "is_accepted": true, "score": 1, "last_activity_date": 1424799338, "last_edit_date": 1592644375, "creation_date": 1424784693, "answer_id": 28697142, "question_id": 28694061, "link": "https://stackoverflow.com/questions/28694061/randomizing-script-for-hexchat-irc-client-in-python-or-perl/28697142#28697142", "title": "Randomizing script for HexChat IRC Client, in Python or Perl", "body": "<p>First you may want to have a look at the <a href=\"http://hexchat.readthedocs.org/en/latest/script_python.html\" rel=\"nofollow noreferrer\">Python</a> or <a href=\"http://hexchat.readthedocs.org/en/latest/script_perl.html\" rel=\"nofollow noreferrer\">Perl</a> documentation for hexchat.</p>\n<p>If you want to proceed in python I've wrote a small script to get you started:</p>\n<pre><code>import random\nimport xchat\n\ndef callback(word, world_eol, userdata):\n    number = word[1]\n    if random_chance(number):\n        print &quot;Success&quot;\n    else:\n        print &quot;Failure&quot;\n\n\ndef random_chance(percent_chance):\n    return random.randrange(1, 101) &gt; (100 - int(percent_chance))\n       \n\nxchat.hook_command(&quot;random&quot;, callback, help=&quot;/random &lt;number&gt;&quot;)\n</code></pre>\n<p>You will have to get it to work in hexchat yourself. To load the script you will have to first save it some where then call the <code>load</code> <a href=\"http://hexchat.readthedocs.org/en/latest/script_python.html#cmdoption-py-arg-load\" rel=\"nofollow noreferrer\">command</a>:</p>\n<blockquote>\n<p><b>load</b> </p>\n<p>Load a script with given filename. /load will also work.</p>\n</blockquote>\n"}], "owner": {"reputation": 3, "user_id": 4600748, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/67c94fc832a9365c2470a2ecc888d3af?s=128&d=identicon&r=PG&f=1", "display_name": "MiddayHobo", "link": "https://stackoverflow.com/users/4600748/middayhobo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 935, "favorite_count": 0, "accepted_answer_id": 28697142, "answer_count": 1, "score": -1, "last_activity_date": 1424799338, "creation_date": 1424775738, "last_edit_date": 1424789743, "question_id": 28694061, "link": "https://stackoverflow.com/questions/28694061/randomizing-script-for-hexchat-irc-client-in-python-or-perl", "title": "Randomizing script for HexChat IRC Client, in Python or Perl", "body": "<p>I have a hunch that the answer to this is embarassingly easy, but nonetheless I can't figure it out (the fact that I don't know any of these languages at all might be the case). \nWhat I need is a script which would work this way:</p>\n\n<ol>\n<li>First, you type command like !random and a number from the range 1-100 (the number would mean the probability of success in %) [like this: !random 78]</li>\n<li>Then, it would - basing on given probability - choose whether you succeeded or not [for example, with !random 78, there is 78% probability that the outcome would be \"Success\"] </li>\n<li>Then, it would show on a channel a public message what the outcome is (\"Success\" or \"Failure\")</li>\n</ol>\n\n<p>I need this one for online text RPG sessions. Also sorry for my bad English.</p>\n\n<p>How the code looks now:</p>\n\n<pre><code>    __module_name__ = \"HexChat Randomiser\"\n    __module_version__ = \"0.1\"\n    __module_description__ = \"A randomiser for HexChat.\"\n    \u00a0\u00a0\n    import random\n    import xchat\n\ndef callback(word, world_eol, userdata):\n    number = word[1]\n    if random_chance(number):\n        print (\"Success\")\n    else:\n        print (\"Failure\")\n\n\n    def random_chance(percent_chance):\n        return random.randrange(1, 101) &gt; (100 - percent_chance)\n\n\n    xchat.hook_command(\"random\", callback, help=\"/random &lt;number&gt;\")\n</code></pre>\n\n<p>The error:</p>\n\n<pre><code>Traceback (most recent call last):\nFile \"&lt;string&gt;\", line 10, in callback\nFile \"&lt;string&gt;\", line 17, in random_chance\nTypeError: unsupported operand type(s) for -: 'int' and 'str'\n</code></pre>\n"}, {"tags": ["perl", "awk"], "comments": [{"owner": {"reputation": 226874, "user_id": 1983854, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/eKpAk.png?s=128&g=1", "display_name": "fedorqui &#39;SO stop harming&#39;", "link": "https://stackoverflow.com/users/1983854/fedorqui-so-stop-harming"}, "edited": false, "score": 1, "creation_date": 1424772979, "post_id": 28692966, "comment_id": 45677150, "body": "You probably need to escape the <code>$NF</code> --&gt; say <code>\\$NF</code>"}, {"owner": {"reputation": 31, "user_id": 4273869, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bcd19844869cababe08fd65bb4f19265?s=128&d=identicon&r=PG&f=1", "display_name": "Komal", "link": "https://stackoverflow.com/users/4273869/komal"}, "reply_to_user": {"reputation": 226874, "user_id": 1983854, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/eKpAk.png?s=128&g=1", "display_name": "fedorqui &#39;SO stop harming&#39;", "link": "https://stackoverflow.com/users/1983854/fedorqui-so-stop-harming"}, "edited": false, "score": 0, "creation_date": 1424773433, "post_id": 28692966, "comment_id": 45677423, "body": "Thanks @fedorqui even after backslash \\$NF . I am facing same error as above mentioned in the question"}, {"owner": {"reputation": 15030, "user_id": 3627607, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd5fd623c0fdd0c93a2535cf6293ec5d?s=128&d=identicon&r=PG", "display_name": "Tensibai", "link": "https://stackoverflow.com/users/3627607/tensibai"}, "edited": false, "score": 0, "creation_date": 1424774044, "post_id": 28692966, "comment_id": 45677777, "body": "Doing a research I found a reference to <code>%q</code> in <a href=\"http://stackoverflow.com/questions/6306386/how-can-i-escape-an-arbitrary-string-for-use-as-a-command-line-argument-in-bash\">this question</a>, I would go using <code>qx</code>according to <a href=\"http://www.cs.cmu.edu/afs/cs/usr/rgs/mosaic/pl-exp-str.html\" rel=\"nofollow noreferrer\">this doc</a> so this should work: <code>print qx&#47;awk -F, &#39;{print $NF}&#39; f1.txt &gt; f2.txt&#47;</code>"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 3, "creation_date": 1424775662, "post_id": 28692966, "comment_id": 45678792, "body": "I&#39;d suggest in this case - that given you&#39;re not doing much with <code>awk</code> it might be better to keep it in perl."}, {"owner": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "edited": false, "score": 2, "creation_date": 1424785192, "post_id": 28692966, "comment_id": 45684729, "body": "Why do we see so many questions asking how to run awk scripts from perl (and python)? I thought perl at least could do the same text manipulation operations that awk can do, is that wrong?"}, {"owner": {"reputation": 205702, "user_id": 7552, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b60298053f87465641c1b1192338c8cd?s=128&d=identicon&r=PG", "display_name": "glenn jackman", "link": "https://stackoverflow.com/users/7552/glenn-jackman"}, "reply_to_user": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "edited": false, "score": 1, "creation_date": 1424787350, "post_id": 28692966, "comment_id": 45686239, "body": "@EdMorton, you&#39;re quite right."}, {"owner": {"reputation": 205702, "user_id": 7552, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b60298053f87465641c1b1192338c8cd?s=128&d=identicon&r=PG", "display_name": "glenn jackman", "link": "https://stackoverflow.com/users/7552/glenn-jackman"}, "reply_to_user": {"reputation": 15030, "user_id": 3627607, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd5fd623c0fdd0c93a2535cf6293ec5d?s=128&d=identicon&r=PG", "display_name": "Tensibai", "link": "https://stackoverflow.com/users/3627607/tensibai"}, "edited": false, "score": 0, "creation_date": 1424787385, "post_id": 28692966, "comment_id": 45686261, "body": "@Tensibai, <code>qx()</code> will still interpolate the awk variable as a perl variable. It requires escaping."}, {"owner": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "reply_to_user": {"reputation": 205702, "user_id": 7552, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b60298053f87465641c1b1192338c8cd?s=128&d=identicon&r=PG", "display_name": "glenn jackman", "link": "https://stackoverflow.com/users/7552/glenn-jackman"}, "edited": false, "score": 0, "creation_date": 1424788083, "post_id": 28692966, "comment_id": 45686698, "body": "@glennjackman so any idea why we see all the questions asking how to call awk from perl (but, interestingly, never any asking how to call perl from awk AFAIK)? Is it usually people using perl like a shell or something else?"}, {"owner": {"reputation": 205702, "user_id": 7552, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b60298053f87465641c1b1192338c8cd?s=128&d=identicon&r=PG", "display_name": "glenn jackman", "link": "https://stackoverflow.com/users/7552/glenn-jackman"}, "edited": false, "score": 2, "creation_date": 1424788196, "post_id": 28692966, "comment_id": 45686783, "body": "I would say it&#39;s people who know shell and awk, and are starting to learn perl -- they stick with the idioms they know rather than jumping into the new language with both feet."}], "answers": [{"tags": [], "owner": {"reputation": 205702, "user_id": 7552, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b60298053f87465641c1b1192338c8cd?s=128&d=identicon&r=PG", "display_name": "glenn jackman", "link": "https://stackoverflow.com/users/7552/glenn-jackman"}, "is_accepted": false, "score": 1, "last_activity_date": 1424787701, "creation_date": 1424787701, "answer_id": 28698235, "question_id": 28692966, "link": "https://stackoverflow.com/questions/28692966/awk-not-working-inside-a-perl-scipt/28698235#28698235", "title": "Awk not working inside a perl scipt?", "body": "<p>Since you're redirecting the awk output, there's nothing for perl to print. You might as well use <code>system</code> and the <a href=\"http://perldoc.perl.org/perlop.html#Quote-Like-Operators\" rel=\"nofollow\">quoting operator <code>q()</code></a>:</p>\n\n<pre><code>system q(awk -F, '{print $NF}' f1.txt &gt; f2.txt)\n</code></pre>\n\n<p>Or, of course, do it in perl, which saves you from having to spawn a shell and then spawn awk:</p>\n\n<pre><code>open my $in, '&lt;', 'f1.txt';\nopen my $out, '&gt;', 'f1.txt';\nwhile (&lt;$in&gt;) {\n    print $out (split \" \")[-1], \"\\n\";\n}\nclose $in;\nclose $out;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 159, "user_id": 4588502, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6b5e4aac6482c73a9835d0422e7f5455?s=128&d=identicon&r=PG&f=1", "display_name": "Greg Morris", "link": "https://stackoverflow.com/users/4588502/greg-morris"}, "is_accepted": false, "score": 0, "last_activity_date": 1424787979, "creation_date": 1424787979, "answer_id": 28698335, "question_id": 28692966, "link": "https://stackoverflow.com/questions/28692966/awk-not-working-inside-a-perl-scipt/28698335#28698335", "title": "Awk not working inside a perl scipt?", "body": "<p>If there are more lines in the script, you need a semi-colon at the end of the print statement.</p>\n"}, {"tags": [], "owner": {"reputation": 98433, "user_id": 368630, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/107085826cfbb2700f535417a12c89cb?s=128&d=identicon&r=PG", "display_name": "David W.", "link": "https://stackoverflow.com/users/368630/david-w"}, "is_accepted": false, "score": 2, "last_activity_date": 1424792224, "creation_date": 1424792224, "answer_id": 28699921, "question_id": 28692966, "link": "https://stackoverflow.com/questions/28692966/awk-not-working-inside-a-perl-scipt/28699921#28699921", "title": "Awk not working inside a perl scipt?", "body": "<p>This is a Perl error and has nothing to do with your <code>awk</code> script itself. The error is usually seen when the <em>previous</em> statement doesn't have a semicolon at the end.</p>\n\n<p>Here's a very simple program (which should include <code>use strict;</code> and <code>use warnings;</code>, but I wanted to emulate what you have).</p>\n\n<pre><code>#! /usr/bin/env perl\n#\n\nprint \"Hello, World\\n\"  # Line 4\nprint \"Hello, Back\\n\";  # Line 5\n</code></pre>\n\n<p>And the error message is:</p>\n\n<pre><code>syntax error at test.pl line 5, near \"print\"\nExecution of test.pl aborted due to compilation errors.\n</code></pre>\n\n<p>Note the error is <em>near</em> the <code>print</code> in Line #5, but the error is actually at the end of Line #4 where I'm missing a semicolon.</p>\n\n<p>Running your exact program works on my system (although doesn't quite produce the results you want). I am assuming this isn't your exact program, but instead a simplification of your program. Is there a statement before that <code>print</code>?</p>\n\n<p>Several other things:</p>\n\n<ul>\n<li>You're redirecting your <code>awk</code> output, so there's nothing to <code>print</code>.</li>\n<li>Use <em>strict</em> and <em>warnings</em>.</li>\n<li>Better to use <code>qx(....)</code> than backticks (grave accent). It's more readable and allows you to do quoted executable in quoted executable.</li>\n<li>Watch for Perlisms in your code. The <code>$NF</code> is interpreted by Perl, and without the <code>use strict;</code>, doesn't give you an error. Instead, the <code>print</code> in your Awk statement is a null print which prints the entire line.</li>\n<li><p>Why do you use <code>print</code> if nothing is printing out? You're better off in this position to use <code>system</code> which allows you to put single quotes around your entire statement:</p>\n\n<p><code>system q(awk -F, '{print $NF}' f1.txt &gt; f2.txt);</code></p>\n\n<p>This way, <code>$NF</code> doesn't have to be quoted.</p></li>\n<li>Why are you doing <code>Awk</code> in a Perl program? Perl will do anything Awk will do and do it better:</li>\n</ul>\n\n<p>Here's a version of your program using plain ol' Perl:</p>\n\n<pre><code>#! /usr/bin/env perl\n\nuse strict;\nuse warnings;\nuse autodie;\n\nwhile ( my $line = &lt;&gt; ) {\n    my @array = split /\\s*,\\s*/, $line;\n    print $array[-1];\n}\n</code></pre>\n\n<p>To run this program:</p>\n\n<pre><code>$ test.pl f1.txt &gt; f2.txt\n</code></pre>\n\n<p>Yes, it's longer, but half of the program is taken up by <a href=\"http://en.wikipedia.org/wiki/Pragmatics\" rel=\"nofollow\">pragmas</a> that all Perl programs should use. </p>\n\n<p>I'm sure people smarter than me can turn this into a Perl one-liner.</p>\n"}], "owner": {"reputation": 31, "user_id": 4273869, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bcd19844869cababe08fd65bb4f19265?s=128&d=identicon&r=PG&f=1", "display_name": "Komal", "link": "https://stackoverflow.com/users/4273869/komal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 364, "favorite_count": 1, "answer_count": 3, "score": 0, "last_activity_date": 1424792224, "creation_date": 1424772638, "last_edit_date": 1424789183, "question_id": 28692966, "link": "https://stackoverflow.com/questions/28692966/awk-not-working-inside-a-perl-scipt", "title": "Awk not working inside a perl scipt?", "body": "<p>I am trying to execute below awk command inside a perl script, but it is failing.</p>\n\n<pre><code>#!/usr/bin/perl\n\nprint `awk -F, '{print $NF}' f1.txt &gt; f2.txt`\n</code></pre>\n\n<p>This is the error:</p>\n\n<pre><code>syntax error at ./MO.pl line 3, near \"print\"\nExecution of ./MO.pl aborted due to compilation errors.\n</code></pre>\n\n<p>Can anyone please help what I am doing wrong here?</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 4514, "user_id": 4248931, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HijcJ.png?s=128&g=1", "display_name": "serenesat", "link": "https://stackoverflow.com/users/4248931/serenesat"}, "edited": false, "score": 0, "creation_date": 1424763833, "post_id": 28689795, "comment_id": 45672478, "body": "<a href=\"http://stackoverflow.com/questions/28579719/how-to-merge-two-doc-files-into-new-doc-file\">same question</a> you have already asked."}, {"owner": {"reputation": 47, "user_id": 3722133, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/82477ee67e2a1889eebe4bafe8422fff?s=128&d=identicon&r=PG&f=1", "display_name": "Paddy", "link": "https://stackoverflow.com/users/3722133/paddy"}, "reply_to_user": {"reputation": 4514, "user_id": 4248931, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HijcJ.png?s=128&g=1", "display_name": "serenesat", "link": "https://stackoverflow.com/users/4248931/serenesat"}, "edited": false, "score": 0, "creation_date": 1424769214, "post_id": 28689795, "comment_id": 45674914, "body": "@serenesat yes but previous problem doesn&#39;t explain problem thats why I add another question Please guide me"}], "answers": [{"comments": [{"owner": {"reputation": 47, "user_id": 3722133, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/82477ee67e2a1889eebe4bafe8422fff?s=128&d=identicon&r=PG&f=1", "display_name": "Paddy", "link": "https://stackoverflow.com/users/3722133/paddy"}, "edited": false, "score": 0, "creation_date": 1424772097, "post_id": 28692192, "comment_id": 45676631, "body": "I made changes but still not get the correct output. Changing in $word makes it error free but it not merge two document it just saveas the 1st document...plz guide"}, {"owner": {"reputation": 2799, "user_id": 1485311, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/sNWZV.jpg?s=128&g=1", "display_name": "ChatterOne", "link": "https://stackoverflow.com/users/1485311/chatterone"}, "reply_to_user": {"reputation": 47, "user_id": 3722133, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/82477ee67e2a1889eebe4bafe8422fff?s=128&d=identicon&r=PG&f=1", "display_name": "Paddy", "link": "https://stackoverflow.com/users/3722133/paddy"}, "edited": false, "score": 0, "creation_date": 1424786937, "post_id": 28692192, "comment_id": 45685956, "body": "If the solution solved your error, you should mark it as an answer. As to the fact that nothing is copied to the output file, try using SelectAll instead of Select."}], "tags": [], "owner": {"reputation": 2799, "user_id": 1485311, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/sNWZV.jpg?s=128&g=1", "display_name": "ChatterOne", "link": "https://stackoverflow.com/users/1485311/chatterone"}, "is_accepted": true, "score": 0, "last_activity_date": 1424770361, "creation_date": 1424770361, "answer_id": 28692192, "question_id": 28689795, "link": "https://stackoverflow.com/questions/28689795/perl-win32ole-word-merging-two-doc-files/28692192#28692192", "title": "Perl Win32::OLE word merging two doc files", "body": "<p>You're probably trying to use the current document as part of the Documents collection, while it's actually part of the Word application object.\nI don't have the means to test the code here, but try changing</p>\n\n<pre><code>$doc-&gt;ActiveDocument\n</code></pre>\n\n<p>to </p>\n\n<pre><code>$word-&gt;ActiveDocument\n</code></pre>\n"}], "owner": {"reputation": 47, "user_id": 3722133, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/82477ee67e2a1889eebe4bafe8422fff?s=128&d=identicon&r=PG&f=1", "display_name": "Paddy", "link": "https://stackoverflow.com/users/3722133/paddy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 506, "favorite_count": 0, "accepted_answer_id": 28692192, "answer_count": 1, "score": 0, "last_activity_date": 1424772797, "creation_date": 1424760880, "last_edit_date": 1424772797, "question_id": 28689795, "link": "https://stackoverflow.com/questions/28689795/perl-win32ole-word-merging-two-doc-files", "title": "Perl Win32::OLE word merging two doc files", "body": "<p>I'm trying to merge two document into new doc file but I'm getting error in following code.</p>\n\n<pre><code>    use strict;\n    use Win32::OLE;\n    use Win32::OLE::Const 'Microsoft Word';\n\n    $meta_file_path = \"D:\\\\copyfrom.doc\";\n    $main_file_path = \"D:\\\\copyto.doc\";\n\n    my $x = Win32::OLE-&gt;GetActiveObject('Word.Application') ;\n    my $word = Win32::OLE-&gt;new('Word.Application', sub { $_[0]-&gt;Quit; } );\n    my $doc = $word-&gt;Documents-&gt;open($meta_file_path) or die $!;\n\n        my $doc = $word-&gt;Documents-&gt;Open($meta_file_path) or die $!;\n$word-&gt;ActiveDocument-&gt;Content;\n$word-&gt;ActiveDocument-&gt;Select();\n$word-&gt;Selection-&gt;Copy();\n$doc-&gt;Close;\nmy $doc2 = $word-&gt;Documents-&gt;Open($main_file_path) or die $!;       \n$word-&gt;ActiveDocument-&gt;Content-&gt;Paste();\n$word-&gt;ActiveDocument-&gt;SaveAs('D:\\\\outdoc.doc');\n$doc2-&gt;Close;       \nexit;\n</code></pre>\n\n<p>Error is :</p>\n\n<pre><code>Win32::OLE(0.1709) error 0x80020011: \"Does not support a collection\"\n    in METHOD/PROPERTYGET \"\" at D:/merge.pl line 12.\nCan't call method \"Content\" on an undefined value at D:/merge.pl line 12.\n</code></pre>\n\n<p>I got a code from <a href=\"http://www.perlmonks.org/?node_id=213797\" rel=\"nofollow\">perlmonks</a> which give me desire output but their is one problem in format, copyfrom.doc has tables and text with different alignment and font family from copyto.doc.</p>\n"}, {"tags": ["bash", "perl", "sockets", "unix-socket", "socat"], "comments": [{"owner": {"reputation": 7570, "user_id": 17945, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/e8cbc0b9ed29b027a127d8df309af5a6?s=128&d=identicon&r=PG", "display_name": "reinierpost", "link": "https://stackoverflow.com/users/17945/reinierpost"}, "edited": false, "score": 0, "creation_date": 1424768481, "post_id": 28689677, "comment_id": 45674518, "body": "You&#39;re defining a subroutine, but where do you call it?"}], "answers": [{"comments": [{"owner": {"reputation": 2269, "user_id": 3016716, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/wCaTR.jpg?s=128&g=1", "display_name": "shivams", "link": "https://stackoverflow.com/users/3016716/shivams"}, "edited": false, "score": 0, "creation_date": 1424773908, "post_id": 28692346, "comment_id": 45677703, "body": "Yes i know it that this error comes when i try to run socat before the program. In my bash script you can see that if perl program is not running it try to run it and then go for socat. So ideally this error should not be coming but this is still coming and i have no clue why it is coming."}, {"owner": {"reputation": 2269, "user_id": 3016716, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/wCaTR.jpg?s=128&g=1", "display_name": "shivams", "link": "https://stackoverflow.com/users/3016716/shivams"}, "edited": false, "score": 0, "creation_date": 1424777308, "post_id": 28692346, "comment_id": 45679901, "body": "thanks man. It work for me. I was banging my head on it for some time and it was this sleep issue. Thanks a lot :)"}], "tags": [], "owner": {"reputation": 41846, "user_id": 926143, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/3396173c3d22988be1a0732d184902aa?s=128&d=identicon&r=PG", "display_name": "7stud", "link": "https://stackoverflow.com/users/926143/7stud"}, "is_accepted": true, "score": 1, "last_activity_date": 1424776485, "last_edit_date": 1424776485, "creation_date": 1424770794, "answer_id": 28692346, "question_id": 28689677, "link": "https://stackoverflow.com/questions/28689677/not-able-to-connect-to-socket-using-socat/28692346#28692346", "title": "Not able to connect to socket using socat", "body": "<p>I can duplicate your error if I don't run your perl program before trying to use socat.  Here is what works for me:</p>\n\n<p>1) my_prog.pl:</p>\n\n<pre><code>use strict; \nuse warnings; \nuse 5.016;\nuse Data::Dumper;\nuse IO::Socket::UNIX;\n\nmy $socket_path = '/tmp/sock';\nunlink $socket_path; \n\nmy $socket = IO::Socket::UNIX-&gt;new(\n    Local  =&gt; $socket_path,\n    Type   =&gt; SOCK_STREAM,\n    Listen =&gt; SOMAXCONN,\n) or die \"Couldn't create socket: $!\";\n\nsay \"Connected to $socket_path...\";\nmy $CONN = $socket-&gt;accept()\n    or die \"Whoops! Failed to open a connection: $!\";\n\n{\n    local $/ = undef;   #local -&gt; restore previous value when the enclosing scope, delimited by the braces, is exited.\n                        #Setting $/ to undef puts file reads in 'slurp mode' =&gt; whole file is considered one line.\n    my $file = &lt;$CONN&gt;; #Read one line.\n    print $file;\n}`\n</code></pre>\n\n<p>2) <code>$ perl my_prog.pl</code></p>\n\n<p>3) <code>socat -u -v GOPEN:./data.txt UNIX-CONNECT:/tmp/sock</code></p>\n\n<p>The -u and -v options aren't necessary:</p>\n\n<pre><code>-u            Uses  unidirectional  mode.  The  first address is only used for\n              reading, and the second address is only used for writing  (exam-\n              ple).\n\n\n-v            Writes the transferred data not only to  their  target  streams,\n              but  also to stderr. The output format is text with some conver-\n              sions for readability, and prefixed with \"&gt; \" or \"&lt; \" indicating\n              flow directions.\n</code></pre>\n\n<p>4) You can also do it like this:</p>\n\n<pre><code>cat data.txt | socat STDIN UNIX-CONNECT:/tmp/sock\n</code></pre>\n\n<p>Pipe stdout of <code>cat</code> command to socat, then list STDIN as one of socat's files.</p>\n\n<p><strong>Response to comment:</strong></p>\n\n<p>This bash script works for me:</p>\n\n<pre><code>#!/usr/bin/env bash\n\necho 'bash script'\n\n../pperl_programs/my_prog.pl &amp;\nsleep 1s\n\nsocat GOPEN:./data.txt UNIX-CONNECT:/tmp/sock\n</code></pre>\n\n<p>It looks like the perl script doesn't have enough time to setup the socket before socat tries to transfer data.</p>\n"}], "owner": {"reputation": 2269, "user_id": 3016716, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/wCaTR.jpg?s=128&g=1", "display_name": "shivams", "link": "https://stackoverflow.com/users/3016716/shivams"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5029, "favorite_count": 0, "accepted_answer_id": 28692346, "answer_count": 1, "score": 0, "last_activity_date": 1424776889, "creation_date": 1424760275, "last_edit_date": 1424776889, "question_id": 28689677, "link": "https://stackoverflow.com/questions/28689677/not-able-to-connect-to-socket-using-socat", "title": "Not able to connect to socket using socat", "body": "<p>I am trying to parse rsyslog logs. For this i am sending all my logs to socat which is then sending them to Unix Domain Socket. That socket is created via perl script which is listening on that socket to parse logs.</p>\n\n<p>My bash script to which rsyslog is sending all log is </p>\n\n<pre><code>if [ ! `pidof -x log_parser.pl` ] \n  then\n./log_parser.pl &amp; 1&gt;&amp;1\nfi\n\nif [ -S /tmp/sock ] \nthen\n/usr/bin/socat -t0 -T0   - UNIX-CONNECT:/tmp/sock 2&gt;&gt; /var/log/socat.log\nfi\n</code></pre>\n\n<p><code>/tmp/sock</code> is created using perl script <code>log_parser.pl</code> which is </p>\n\n<pre><code>use IO::Socket::UNIX;\n\nsub socket_create {\n    $socket_path = '/tmp/sock';\n    unlink($socket_path);\n\n    $listner = IO::Socket::UNIX-&gt;new(\n       Type   =&gt; SOCK_STREAM,\n       Local  =&gt; $socket_path,\n       Listen =&gt; SOMAXCONN,\n       Blocking =&gt; 0,\n    )\n       or die(\"Can't create server socket: $!\\n\");\n\n   $socket = $listner-&gt;accept()\n      or die(\"Can't accept connection: $!\\n\");\n   }\n\n   socket_create();\n   while(1) {\n\n   chomp($line=&lt;$socket&gt;);\n   print \"$line\\n\";\n   }\n</code></pre>\n\n<p>There is this error i am getting from socat which is </p>\n\n<pre><code>2015/02/24 11:58:01 socat[4608] E connect(3, AF=1 \"/tmp/sock\", 11): Connection refused\n</code></pre>\n\n<p>I am no champion in sockets so i am not able to understand what is this. Please help. Thanks in advance.</p>\n\n<p>The main issue is that when i kill my perl script then bash script is suppose to call it again and start it. \nWhat actually happening is that sript is started but socat is not started instead it give this error and never start.</p>\n"}, {"tags": ["perl", "file", "hash"], "answers": [{"tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": true, "score": 1, "last_activity_date": 1424770204, "creation_date": 1424770204, "answer_id": 28692143, "question_id": 28688548, "link": "https://stackoverflow.com/questions/28688548/perl-how-to-read-hash-data-and-use-as-hash-data/28692143#28692143", "title": "Perl - How to read hash data and use as hash data", "body": "<p>That is what the <a href=\"http://perldoc.perl.org/functions/eval.html\" rel=\"nofollow\"><code>eval</code> command</a> is for. If you have that whole thing in a string, let's say <code>$foo</code>, you can do the following:</p>\n\n<pre><code>my %forum_thread_data;\neval $foo;\n</code></pre>\n\n<p>First you need to declare the hash. After that, you <code>eval</code> the string. </p>\n\n<p><strong>Be aware that <code>eval</code> is dangerous</strong>. You never know what could be in the file. If it is some bad code, you will run it.</p>\n\n<hr>\n\n<p>If the data is in a text file with nothing else, an alternative would be to <code>require</code> or <code>do</code> the file.</p>\n\n<p>With <code>require</code>, you can only load it once. Probably it's better to just use <code>do</code>, which will read and execute the file like it was code. Again, you need to declare the variable if you do not have that inside of the file.</p>\n\n<pre><code>my $forum_thread_data;\ndo 'foo.dump';\n</code></pre>\n\n<p>The same warning applies. If this is output of Data::Dumper, Data::Dump or similar from your own code, it should be save to do this. Also note that there are faster serialization formats than dumped out Perl data structures.</p>\n"}], "owner": {"reputation": 351, "user_id": 2598494, "user_type": "registered", "accept_rate": 13, "profile_image": "https://www.gravatar.com/avatar/02d66fa0fdbd3eb34745afa352ff99e2?s=128&d=identicon&r=PG", "display_name": "Laeeq", "link": "https://stackoverflow.com/users/2598494/laeeq"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 384, "favorite_count": 0, "accepted_answer_id": 28692143, "answer_count": 1, "score": 0, "last_activity_date": 1424770204, "creation_date": 1424754547, "question_id": 28688548, "link": "https://stackoverflow.com/questions/28688548/perl-how-to-read-hash-data-and-use-as-hash-data", "title": "Perl - How to read hash data and use as hash data", "body": "<p>I have flat data file with hash data as content. Now I want file data to be read and  can use as Perl hash with my code. The file content is like below:</p>\n\n<p>I have read file content as string but I am not able to use $forum_thread_data var by reading from file content. </p>\n\n<p>Please me to use it as hash data.</p>\n\n<pre><code>$forum_thread_data{\"9\"}-&gt;{\"0000\"} = {\n    '01' =&gt; [q~A~, q~~, q~rrdude~, q~How To Sell More To USF's Prospect/Customer Base.~, \n        q~1~, q~1~, q~02-09-2012~, q~05:00 PM~, \n        q~2455967.1700~, q~Jerry @ ASI Home Office~, q~00000595~, q~rrdude~, \n        q~02-24-2012~, q~04:28 PM~, q~2455982.1628~, q~Jerry @ ASI Home Office~, \n        q~00000595~, q~1~, ],\n    '02' =&gt; [q~A~, q~~, q~rrdude~, q~Dealers MUST BE PROACTIVE and REACH OUT~, \n        q~1~, q~0~, q~03-02-2012~, q~12:28 PM~, \n        q~2455989.1228~, q~Jerry @ ASI Home Office~, q~00000595~, q~rrdude~, \n        q~03-02-2012~, q~12:28 PM~, q~2455989.1228~, q~Jerry @ ASI Home Office~, \n        q~00000595~, q~1~, ],\n    '03' =&gt; [q~A~, q~~, q~rrdude~, q~Don't Forget To Line-Item The USF Discount!~, \n        q~1~, q~0~, q~03-09-2012~, q~05:20 PM~, \n        q~2455996.1720~, q~Jerry @ ASI Home Office~, q~00000595~, q~rrdude~, \n        q~03-09-2012~, q~05:20 PM~, q~2455996.1720~, q~Jerry @ ASI Home Office~, \n        q~00000595~, q~1~, ],\n    '04' =&gt; [q~A~, q~~, q~rrdude~, q~Fast &amp;amp; Furious From USFoods!~, \n        q~1~, q~0~, q~03-15-2012~, q~12:12 PM~, \n        q~2456002.1212~, q~Jerry @ ASI Home Office~, q~00000595~, q~rrdude~, \n        q~03-15-2012~, q~12:12 PM~, q~2456002.1212~, q~Jerry @ ASI Home Office~, \n        q~00000595~, q~1~, ],\n    '05' =&gt; [q~A~, q~~, q~rrdude~, q~RM Dealer Invited to FOUR USF Events!~, \n        q~1~, q~0~, q~03-15-2012~, q~02:12 PM~, \n        q~2456002.1412~, q~Jerry @ ASI Home Office~, q~00000595~, q~rrdude~, \n        q~03-15-2012~, q~02:12 PM~, q~2456002.1412~, q~Jerry @ ASI Home Office~, \n        q~00000595~, q~1~, ],   \n};\n1;\n</code></pre>\n"}, {"tags": ["perl", "email", "mime"], "comments": [{"owner": {"reputation": 4514, "user_id": 4248931, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HijcJ.png?s=128&g=1", "display_name": "serenesat", "link": "https://stackoverflow.com/users/4248931/serenesat"}, "edited": false, "score": 1, "creation_date": 1424758996, "post_id": 28688487, "comment_id": 45670537, "body": "Show us your code what have you tried."}, {"owner": {"reputation": 84, "user_id": 4123975, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh5.googleusercontent.com/--_X4qOBFc7s/AAAAAAAAAAI/AAAAAAAABP8/TRJUNKES_U8/photo.jpg?sz=128", "display_name": "quorious", "link": "https://stackoverflow.com/users/4123975/quorious"}, "reply_to_user": {"reputation": 4514, "user_id": 4248931, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HijcJ.png?s=128&g=1", "display_name": "serenesat", "link": "https://stackoverflow.com/users/4248931/serenesat"}, "edited": false, "score": 0, "creation_date": 1424840270, "post_id": 28688487, "comment_id": 45711279, "body": "@serenesat Added the code."}], "answers": [{"comments": [{"owner": {"reputation": 59411, "user_id": 8355, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/8d0099a2574719d7a67eab012851bf9b?s=128&d=identicon&r=PG", "display_name": "cjm", "link": "https://stackoverflow.com/users/8355/cjm"}, "reply_to_user": {"reputation": 84, "user_id": 4123975, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh5.googleusercontent.com/--_X4qOBFc7s/AAAAAAAAAAI/AAAAAAAABP8/TRJUNKES_U8/photo.jpg?sz=128", "display_name": "quorious", "link": "https://stackoverflow.com/users/4123975/quorious"}, "edited": false, "score": 0, "creation_date": 1424794801, "post_id": 28689046, "comment_id": 45691820, "body": "@quorious, that should be the complete MIME message including the attachments."}, {"owner": {"reputation": 84, "user_id": 4123975, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh5.googleusercontent.com/--_X4qOBFc7s/AAAAAAAAAAI/AAAAAAAABP8/TRJUNKES_U8/photo.jpg?sz=128", "display_name": "quorious", "link": "https://stackoverflow.com/users/4123975/quorious"}, "edited": false, "score": 0, "creation_date": 1424839251, "post_id": 28689046, "comment_id": 45710991, "body": "Yes right. I am also attaching a template and passing the values from script. Is is possible to save the populated template?"}, {"owner": {"reputation": 59411, "user_id": 8355, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/8d0099a2574719d7a67eab012851bf9b?s=128&d=identicon&r=PG", "display_name": "cjm", "link": "https://stackoverflow.com/users/8355/cjm"}, "reply_to_user": {"reputation": 84, "user_id": 4123975, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh5.googleusercontent.com/--_X4qOBFc7s/AAAAAAAAAAI/AAAAAAAABP8/TRJUNKES_U8/photo.jpg?sz=128", "display_name": "quorious", "link": "https://stackoverflow.com/users/4123975/quorious"}, "edited": false, "score": 0, "creation_date": 1424841073, "post_id": 28689046, "comment_id": 45711540, "body": "As I thought I had explained, the template processing happens during <code>MIME::Lite::TT-&gt;new</code>.  The object you get back from <code>new</code> is a normal <code>MIME::Lite</code> email with the template already populated."}, {"owner": {"reputation": 84, "user_id": 4123975, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh5.googleusercontent.com/--_X4qOBFc7s/AAAAAAAAAAI/AAAAAAAABP8/TRJUNKES_U8/photo.jpg?sz=128", "display_name": "quorious", "link": "https://stackoverflow.com/users/4123975/quorious"}, "edited": false, "score": 0, "creation_date": 1424841588, "post_id": 28689046, "comment_id": 45711702, "body": "Is it possible to save only template not whole mail?"}, {"owner": {"reputation": 84, "user_id": 4123975, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh5.googleusercontent.com/--_X4qOBFc7s/AAAAAAAAAAI/AAAAAAAABP8/TRJUNKES_U8/photo.jpg?sz=128", "display_name": "quorious", "link": "https://stackoverflow.com/users/4123975/quorious"}, "edited": false, "score": 0, "creation_date": 1424842848, "post_id": 28689046, "comment_id": 45712089, "body": "Thanks @cjm for all the help. After some digging I found the solution. We can get the populated template by  &quot;$$email{data}&quot; ."}], "tags": [], "owner": {"reputation": 59411, "user_id": 8355, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/8d0099a2574719d7a67eab012851bf9b?s=128&d=identicon&r=PG", "display_name": "cjm", "link": "https://stackoverflow.com/users/8355/cjm"}, "is_accepted": true, "score": 1, "last_activity_date": 1424757308, "creation_date": 1424757308, "answer_id": 28689046, "question_id": 28688487, "link": "https://stackoverflow.com/questions/28688487/i-am-using-mimelitett-to-send-mail-with-perl-how-to-save-the-mail-locally-b/28689046#28689046", "title": "I am using MIME::Lite::TT to send mail with perl. How to save the mail locally before sending", "body": "<p><a href=\"https://metacpan.org/pod/MIME::Lite::TT\" rel=\"nofollow\">MIME::Lite::TT</a> is just a preprocessor; calling <code>MIME::Lite::TT-&gt;new</code> returns a normal <code>MIME::Lite</code> object.  Just save that object in whatever way you like.</p>\n\n<p>For example, you can <a href=\"https://metacpan.org/pod/MIME::Lite#Print-a-message-to-a-filehandle\" rel=\"nofollow\">print it to a filehandle</a>:</p>\n\n<pre><code>my $email = MIME::Lite::TT-&gt;new(...);\n$email-&gt;print(\\*STDOUT);\n$email-&gt;send;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 59411, "user_id": 8355, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/8d0099a2574719d7a67eab012851bf9b?s=128&d=identicon&r=PG", "display_name": "cjm", "link": "https://stackoverflow.com/users/8355/cjm"}, "edited": false, "score": 0, "creation_date": 1424849734, "post_id": 28712185, "comment_id": 45714954, "body": "This is breaking encapsulation.  <code>$email</code> is a reference to a MIME::Lite object, which happens to be implemented as a hash.  I think you&#39;re looking for <code>$email-&gt;data</code>."}, {"owner": {"reputation": 84, "user_id": 4123975, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh5.googleusercontent.com/--_X4qOBFc7s/AAAAAAAAAAI/AAAAAAAABP8/TRJUNKES_U8/photo.jpg?sz=128", "display_name": "quorious", "link": "https://stackoverflow.com/users/4123975/quorious"}, "reply_to_user": {"reputation": 59411, "user_id": 8355, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/8d0099a2574719d7a67eab012851bf9b?s=128&d=identicon&r=PG", "display_name": "cjm", "link": "https://stackoverflow.com/users/8355/cjm"}, "edited": false, "score": 0, "creation_date": 1424930821, "post_id": 28712185, "comment_id": 45755842, "body": "Yes @cjm and above statement serves that."}], "tags": [], "owner": {"reputation": 84, "user_id": 4123975, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh5.googleusercontent.com/--_X4qOBFc7s/AAAAAAAAAAI/AAAAAAAABP8/TRJUNKES_U8/photo.jpg?sz=128", "display_name": "quorious", "link": "https://stackoverflow.com/users/4123975/quorious"}, "is_accepted": false, "score": 0, "last_activity_date": 1424843782, "creation_date": 1424843782, "answer_id": 28712185, "question_id": 28688487, "link": "https://stackoverflow.com/questions/28688487/i-am-using-mimelitett-to-send-mail-with-perl-how-to-save-the-mail-locally-b/28712185#28712185", "title": "I am using MIME::Lite::TT to send mail with perl. How to save the mail locally before sending", "body": "<p>To print the populated template we can use </p>\n\n<pre><code>$$email{data}\n</code></pre>\n\n<p>As $email is a reference to a hash and data is a key to the contents of body of email.\nTo print the whole mail use the above solution.</p>\n"}], "owner": {"reputation": 84, "user_id": 4123975, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh5.googleusercontent.com/--_X4qOBFc7s/AAAAAAAAAAI/AAAAAAAABP8/TRJUNKES_U8/photo.jpg?sz=128", "display_name": "quorious", "link": "https://stackoverflow.com/users/4123975/quorious"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 336, "favorite_count": 0, "accepted_answer_id": 28689046, "answer_count": 2, "score": -1, "last_activity_date": 1424843782, "creation_date": 1424754209, "last_edit_date": 1424840029, "question_id": 28688487, "link": "https://stackoverflow.com/questions/28688487/i-am-using-mimelitett-to-send-mail-with-perl-how-to-save-the-mail-locally-b", "title": "I am using MIME::Lite::TT to send mail with perl. How to save the mail locally before sending", "body": "<p>Template </p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code> &lt;html&gt;\r\n &lt;body&gt;\r\n\r\n &lt;strong&gt;Hi [% first_name %]&lt;/strong&gt;,\r\n\r\n &lt;p&gt;\r\n This is to confirm your purchase of $ [% amt_due %].\r\n &lt;/p&gt;\r\n\r\n &lt;p&gt;\r\n Thank you!\r\n &lt;/p&gt;\r\n &lt;/body&gt;\r\n &lt;/html&gt;\r\n\r\n   `$params{first_name} = 'Frank';\r\n    $params{last_name}  = 'Wiles';\r\n    $params{amt_due}    = '24.99';\r\n    my $msg = MIME::Lite::TT::HTML-&gt;new(\r\n        From        =&gt;  'admin@example.com',\r\n        To          =&gt;  'frank@example.com',\r\n        Subject     =&gt;  'Your recent purchase',\r\n        Template    =&gt;  {\r\n                            text    =&gt;  'test.txt.tt',\r\n                            html    =&gt;  'test.html.tt',\r\n                            },\r\n        TmplOptions =&gt;  \\%options,\r\n        TmplParams  =&gt;  \\%params,\r\n );</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>How to save the mail locally before sending. It is having template as html which is populated with params and a pdf attachment.\nIs it possible to save the Template with populated values.</p>\n"}, {"tags": ["xml", "perl", "cdata", "xml-simple"], "comments": [{"owner": {"reputation": 1748, "user_id": 4532614, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f230595feac883e1643f5ba43084e895?s=128&d=identicon&r=PG&f=1", "display_name": "TobyLL", "link": "https://stackoverflow.com/users/4532614/tobyll"}, "edited": false, "score": 3, "creation_date": 1424769601, "post_id": 28687876, "comment_id": 45675124, "body": "XML::LibXML and XML::Twig are popular choices, and both give you far more control than XML::Simple"}, {"owner": {"reputation": 15323, "user_id": 11095, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c911d40f47f422f820d8a524658bd5a?s=128&d=identicon&r=PG", "display_name": "mirod", "link": "https://stackoverflow.com/users/11095/mirod"}, "edited": false, "score": 4, "creation_date": 1424770326, "post_id": 28687876, "comment_id": 45675537, "body": "Are you sure you need to output the CDATA sections? For any (sane) XML processor, whether the content is in a CDATA section or is encoded using entities should make no difference at all."}, {"owner": {"reputation": 3222, "user_id": 1946636, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/cZEPK.jpg?s=128&g=1", "display_name": "Dan Goodspeed", "link": "https://stackoverflow.com/users/1946636/dan-goodspeed"}, "reply_to_user": {"reputation": 15323, "user_id": 11095, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c911d40f47f422f820d8a524658bd5a?s=128&d=identicon&r=PG", "display_name": "mirod", "link": "https://stackoverflow.com/users/11095/mirod"}, "edited": false, "score": 0, "creation_date": 1424772816, "post_id": 28687876, "comment_id": 45677053, "body": "@mirod - I asked the company that will be doing the reading of the outputted XML file about some of the nodes having HTML content in it and they said &quot;just make sure the contents of the &lt;text&gt; node are wrapped in CDATA. That way we can import them as-is&quot;... so that&#39;s where I am.  Maybe they can handle it encoded.  I should ask.  Thanks."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1424793247, "post_id": 28687876, "comment_id": 45690709, "body": "<i>\u201cI really don&#39;t want to jump through the necessary hoops to install a new module\u201d</i> I suspect that you simply haven&#39;t installed a module before. It should be as simple as <code>cpan install XML::Twig</code> on the command line."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1424796084, "post_id": 28687876, "comment_id": 45692721, "body": "XML::Simple is aweful for reading XML. XML::Simple is completely useless at writing XML (to be read by anything other than XML::Simple)."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1424797460, "post_id": 28687876, "comment_id": 45693732, "body": "Actually, it&#39;s as simple as <code>cpan XML::Twig</code>."}, {"owner": {"reputation": 3222, "user_id": 1946636, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/cZEPK.jpg?s=128&g=1", "display_name": "Dan Goodspeed", "link": "https://stackoverflow.com/users/1946636/dan-goodspeed"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1424801515, "post_id": 28687876, "comment_id": 45696162, "body": "@Borodin - I tried the cpan install and it ran for about 10 minutes but finished with the line &quot;make test had returned bad status, won&#39;t install without force&quot;."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1424802061, "post_id": 28687876, "comment_id": 45696473, "body": "@DanGoodspeed: We can&#39;t tell what went wrong without seeing the full build log. Can you put it up on <a href=\"http://pastebin.com/\" rel=\"nofollow noreferrer\"><code>pastebin</code></a> and post a link to it?"}, {"owner": {"reputation": 3222, "user_id": 1946636, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/cZEPK.jpg?s=128&g=1", "display_name": "Dan Goodspeed", "link": "https://stackoverflow.com/users/1946636/dan-goodspeed"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1424804313, "post_id": 28687876, "comment_id": 45697789, "body": "@Borodin - <a href=\"http://pastebin.com/2hR8NU9r\" rel=\"nofollow noreferrer\">Done</a>."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1424805232, "post_id": 28687876, "comment_id": 45698225, "body": "You might find there&#39;s a prebuilt package for your OS. Your version of perl is quite an old one though. Looks like it might not be fetching prereqs?"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1424806233, "post_id": 28687876, "comment_id": 45698776, "body": "Okay that&#39;s not a problem. Only two tests failed out of 107. The first is to do with handling the HTML entity <code>&amp;Amp;</code> (which should be <code>&amp;amp</code>) and the second is about round-trip processing of XML data with a <code>DOCTYPE</code> instruction. You should be okay installing with those problems, as long as you keep them in mind. Just <code>cpan -f XML::Twig</code> will <i>force</i> the installation and you&#39;ll be up and running."}, {"owner": {"reputation": 3222, "user_id": 1946636, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/cZEPK.jpg?s=128&g=1", "display_name": "Dan Goodspeed", "link": "https://stackoverflow.com/users/1946636/dan-goodspeed"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1425021889, "post_id": 28687876, "comment_id": 45799287, "body": "@Borodin So I just did <code>cpan -f XML::Twig</code> like you said to force the install, and at the end of the process it still said &quot;make test had returned bad status, won&#39;t install without force&quot;, and didn&#39;t install.  Is there a different way to force-install it?"}], "answers": [{"tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": false, "score": 1, "last_activity_date": 1424772017, "creation_date": 1424772017, "answer_id": 28692765, "question_id": 28687876, "link": "https://stackoverflow.com/questions/28687876/is-there-any-way-to-have-xmlsimple-output-cdata/28692765#28692765", "title": "Is there any way to have XML::Simple output CDATA?", "body": "<p>This will be a little incomplete. Because it would rely on your input/output specifics. </p>\n\n<p>I like <a href=\"http://search.cpan.org/~mirod/XML-Twig-3.48/Twig.pm\" rel=\"nofollow\"><code>XML::Twig</code></a> as an alternative to <code>XML::Simple</code>. Within the docs for <code>XML::Simple</code> you have:</p>\n\n<blockquote>\n  <p>The use of this module in new code is discouraged. Other modules are available which provide more straightforward and consistent interfaces.</p>\n</blockquote>\n\n<p>Within the documentation for <code>XML::Twig</code> you have (read above link for more, this is reproduced for convenience): </p>\n\n<blockquote>\n  <p>To create an element foo containing a CDATA section:</p>\n</blockquote>\n\n<pre><code>my $foo= XML::Twig::Elt-&gt;new( '#CDATA' =&gt; \"content of the CDATA section\")\n                              -&gt;wrap_in( 'foo');\n</code></pre>\n\n<blockquote>\n  <p>An attribute of '#CDATA', will create the content of the element as CDATA:</p>\n</blockquote>\n\n<pre><code>my $elt= XML::Twig::Elt-&gt;new( 'p' =&gt; { '#CDATA' =&gt; 1}, 'foo &lt; bar');\n</code></pre>\n\n<blockquote>\n  <p>creates an element</p>\n</blockquote>\n\n<pre><code>&lt;p&gt;&lt;![CDATA[foo &lt; bar]]&gt;&lt;/&gt;\n</code></pre>\n\n<p>This I think should encompass your needs? </p>\n"}], "owner": {"reputation": 3222, "user_id": 1946636, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/cZEPK.jpg?s=128&g=1", "display_name": "Dan Goodspeed", "link": "https://stackoverflow.com/users/1946636/dan-goodspeed"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 778, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1424772017, "creation_date": 1424750040, "question_id": 28687876, "link": "https://stackoverflow.com/questions/28687876/is-there-any-way-to-have-xmlsimple-output-cdata", "title": "Is there any way to have XML::Simple output CDATA?", "body": "<p>If I'm on a system with just XML::Simple installed, and I'm reading a database to output an XML representation of some of it, and some of that data has HTML code which needs to be surrounded by the CDATA tag... is that possible?</p>\n\n<p>I really don't want to jump through the necessary hoops to install a new module, but if it's impossible with XML::Simple, which module would you recommend?</p>\n"}, {"tags": ["perl", "cgi"], "answers": [{"tags": [], "owner": {"reputation": 2354, "user_id": 2203144, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/75c7fa1dd3aa4baa131c45c7e6cbd82d?s=128&d=identicon&r=PG", "display_name": "mareoraft", "link": "https://stackoverflow.com/users/2203144/mareoraft"}, "is_accepted": false, "score": 0, "last_activity_date": 1424754264, "creation_date": 1424754264, "answer_id": 28688496, "question_id": 28687797, "link": "https://stackoverflow.com/questions/28687797/calling-other-cgi-perl-files-within-a-file/28688496#28688496", "title": "Calling other CGI perl files within a file", "body": "<p>Are you able to use the standard method for importing modules in Perl?</p>\n\n<p>Like this:</p>\n\n<pre><code>use mymodule;\n</code></pre>\n\n<p>at the beginning of your perl file.  Then you will have another perl file named <code>mymodule.pm</code> in the same directory as your main program, and that perl file must begin with:</p>\n\n<pre><code>package mymodule;\n</code></pre>\n\n<p>in order to declare it as the <code>mymodule</code> module, and it must end with:</p>\n\n<pre><code>1;\n</code></pre>\n\n<p>in order to return success when your main program finished reading it.</p>\n"}, {"tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 0, "last_activity_date": 1424778714, "creation_date": 1424778714, "answer_id": 28695091, "question_id": 28687797, "link": "https://stackoverflow.com/questions/28687797/calling-other-cgi-perl-files-within-a-file/28695091#28695091", "title": "Calling other CGI perl files within a file", "body": "<p>You probably don't really want to call other CGI programs. I bet what you really want to do is to package up some common functionality into modules which you can then use in all of your CGI programs.</p>\n"}], "owner": {"reputation": 23, "user_id": 4245051, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/093abe01ed4db45c54d352eedd8eac9e?s=128&d=identicon&r=PG&f=1", "display_name": "Hello", "link": "https://stackoverflow.com/users/4245051/hello"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 24, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1424778714, "creation_date": 1424749537, "question_id": 28687797, "link": "https://stackoverflow.com/questions/28687797/calling-other-cgi-perl-files-within-a-file", "title": "Calling other CGI perl files within a file", "body": "<p>Is there a way to call/access other cgi files within the same file. For example: in PHP, a require or include can call other php files. Something similar to that. I'm trying to avoid writing out a large file and trying to separate the codes in different files. </p>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 65435, "user_id": 2206004, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HCB1e.png?s=128&g=1", "display_name": "hwnd", "link": "https://stackoverflow.com/users/2206004/hwnd"}, "edited": false, "score": 1, "creation_date": 1424745886, "post_id": 28687316, "comment_id": 45667029, "body": "Change the <code>\\s</code>s between the words to hyphens and it works. You also don&#39;t need any of those modifiers."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 2, "creation_date": 1424747419, "post_id": 28687316, "comment_id": 45667406, "body": "Unless you need to check for the presence of <code>Host-profile-count</code> (which is probably better done separately anyway) I would go for just <code>my ($profiles) = $line =~ &#47;(\\d+)&#47;</code> which finds the first sequence of digits and assigns it to <code>$profiles</code>. And you shouldn&#39;t ritually add <code>&#47;msx</code> to every regex you write -- it wastes the time of puzzled readers of your code who try to fathom why they are there."}], "answers": [{"comments": [{"owner": {"reputation": 173, "user_id": 3587025, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/dceb16be8b88ea27250fed2644f9e370?s=128&d=identicon&r=PG&f=1", "display_name": "user3587025", "link": "https://stackoverflow.com/users/3587025/user3587025"}, "edited": false, "score": 0, "creation_date": 1424746112, "post_id": 28687330, "comment_id": 45667078, "body": "boundary \\b ? .can you please explain it to me why that is required?"}, {"owner": {"reputation": 159902, "user_id": 3297613, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/KHhzd.jpg?s=128&g=1", "display_name": "Avinash Raj", "link": "https://stackoverflow.com/users/3297613/avinash-raj"}, "reply_to_user": {"reputation": 173, "user_id": 3587025, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/dceb16be8b88ea27250fed2644f9e370?s=128&d=identicon&r=PG&f=1", "display_name": "user3587025", "link": "https://stackoverflow.com/users/3587025/user3587025"}, "edited": false, "score": 0, "creation_date": 1424746230, "post_id": 28687330, "comment_id": 45667102, "body": "without <code>\\b</code> , the above regex would find a match also in <code>foobarHost-profile-count   User       114 </code> . <code>\\bHost-profile-count\\s+\\S*\\s+(\\S*)</code> won&#39;t do like the above."}, {"owner": {"reputation": 159902, "user_id": 3297613, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/KHhzd.jpg?s=128&g=1", "display_name": "Avinash Raj", "link": "https://stackoverflow.com/users/3297613/avinash-raj"}, "reply_to_user": {"reputation": 173, "user_id": 3587025, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/dceb16be8b88ea27250fed2644f9e370?s=128&d=identicon&r=PG&f=1", "display_name": "user3587025", "link": "https://stackoverflow.com/users/3587025/user3587025"}, "edited": false, "score": 0, "creation_date": 1424747555, "post_id": 28687330, "comment_id": 45667430, "body": "since you&#39;re new to StackOverflow, i suggest you to read <a href=\"http://stackoverflow.com/help/accepted-answer\">this</a>"}], "tags": [], "owner": {"reputation": 159902, "user_id": 3297613, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/KHhzd.jpg?s=128&g=1", "display_name": "Avinash Raj", "link": "https://stackoverflow.com/users/3297613/avinash-raj"}, "is_accepted": true, "score": 0, "last_activity_date": 1424745873, "creation_date": 1424745873, "answer_id": 28687330, "question_id": 28687316, "link": "https://stackoverflow.com/questions/28687316/regular-expression-to-parse-the-command-output/28687330#28687330", "title": "Regular expression to parse the command output", "body": "<p>Yep, you wronly placed <code>\\s</code> (<em>which matches any space character</em>) instead of hyphen..</p>\n\n<pre><code>m/Host-profile-count\\s+\\S*\\s+(\\S*)/msx\n</code></pre>\n\n<p><a href=\"https://regex101.com/r/lY7kK0/1\" rel=\"nofollow\">DEMO</a></p>\n\n<p>Add a word boundary <code>\\b</code> (<em>which matches between a word character and a non-word character</em>) before <code>Host</code> if necessary.</p>\n"}], "owner": {"reputation": 173, "user_id": 3587025, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/dceb16be8b88ea27250fed2644f9e370?s=128&d=identicon&r=PG&f=1", "display_name": "user3587025", "link": "https://stackoverflow.com/users/3587025/user3587025"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 277, "favorite_count": 0, "accepted_answer_id": 28687330, "answer_count": 1, "score": 0, "last_activity_date": 1424745873, "creation_date": 1424745769, "question_id": 28687316, "link": "https://stackoverflow.com/questions/28687316/regular-expression-to-parse-the-command-output", "title": "Regular expression to parse the command output", "body": "<p>I have created a function to parse the output of a command.</p>\n\n<p>The output of the command will be the following :</p>\n\n<pre><code> Host-profile-count   User       114 \n</code></pre>\n\n<p>( Note: the  number 114  is not constant.it could be any positive number >= 0 )</p>\n\n<p>Now i just need the number ( in this case 114)  to be returned.\nI guess the regex in my script is wrong. When i run the script i get the output as 0. It should be 114.\nCan somebody help me out with the regex please ?</p>\n\n<pre><code>sub _count {\n\n   my ($self) = @_;\n   my  $cmd   = 'command goes here ';\n   my  $profiles = 0;\n\n   $self-&gt;execute($cmd);\n\n  foreach my $line ( @{ $self-&gt;get_stdout() } ) {\n       if ( $line =~ m/Host\\sprofile\\scount\\s+\\S*\\s+(\\S*)/msx ) {\n            $profiles = $1;\n        }\n    }\n\n    $profiles =~ s/^\\s+|\\s+$//msxg;\n    return $profiles;\n}\n</code></pre>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 767708, "user_id": 14860, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vXG1F.png?s=128&g=1", "display_name": "paxdiablo", "link": "https://stackoverflow.com/users/14860/paxdiablo"}, "edited": false, "score": 0, "creation_date": 1424738261, "post_id": 28686297, "comment_id": 45665132, "body": "A 2g string is not so much long as it is ridiculous :-)"}, {"owner": {"reputation": 27241, "user_id": 363028, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/cP1F2.jpg?s=128&g=1", "display_name": "Ole Tange", "link": "https://stackoverflow.com/users/363028/ole-tange"}, "reply_to_user": {"reputation": 821764, "user_id": 893, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/747ffa5da3538e66840ebc0548b8fd58?s=128&d=identicon&r=PG", "display_name": "Greg Hewgill", "link": "https://stackoverflow.com/users/893/greg-hewgill"}, "edited": false, "score": 0, "creation_date": 1424738795, "post_id": 28686297, "comment_id": 45665247, "body": "@GregHewgill Added -V"}, {"owner": {"reputation": 27241, "user_id": 363028, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/cP1F2.jpg?s=128&g=1", "display_name": "Ole Tange", "link": "https://stackoverflow.com/users/363028/ole-tange"}, "reply_to_user": {"reputation": 767708, "user_id": 14860, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vXG1F.png?s=128&g=1", "display_name": "paxdiablo", "link": "https://stackoverflow.com/users/14860/paxdiablo"}, "edited": false, "score": 1, "creation_date": 1424738822, "post_id": 28686297, "comment_id": 45665256, "body": "@paxdiablo where as a 2g-1 is just fine ?:-)"}], "answers": [{"comments": [{"owner": {"reputation": 27241, "user_id": 363028, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/cP1F2.jpg?s=128&g=1", "display_name": "Ole Tange", "link": "https://stackoverflow.com/users/363028/ole-tange"}, "edited": false, "score": 0, "creation_date": 1424745006, "post_id": 28686632, "comment_id": 45666834, "body": "Does that deal correctly with a $match spanning the border of two blocks? What does big_rindex look like?"}, {"owner": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "reply_to_user": {"reputation": 27241, "user_id": 363028, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/cP1F2.jpg?s=128&g=1", "display_name": "Ole Tange", "link": "https://stackoverflow.com/users/363028/ole-tange"}, "edited": false, "score": 0, "creation_date": 1424747195, "post_id": 28686632, "comment_id": 45667354, "body": "@OleTange Dang, it doesn&#39;t.  You&#39;d have to move in blocks which overlap at least the length of <code>$match</code>.  I fixed it.  rindex would work much the same, but <code>$offset</code> would start at <code>$strlen - $block_size</code> and <code>-=</code> the block window."}], "tags": [], "owner": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "is_accepted": false, "score": 9, "last_activity_date": 1424747403, "last_edit_date": 1424747403, "creation_date": 1424740316, "answer_id": 28686632, "question_id": 28686297, "link": "https://stackoverflow.com/questions/28686297/perl-index-rindex-after-2gb/28686632#28686632", "title": "Perl: index/rindex after 2GB?", "body": "<p><a href=\"http://perl5.git.perl.org/perl.git/commit/b464e2b7c8addfdd9b22b9a5949a89db7c73e43c\" rel=\"nofollow noreferrer\">This bug was fixed</a> and will be in 5.22.0 which should be out in May.  It didn't make it into the 5.20.x series.  That patch is simple and you should be able to apply it to the 5.20.2 or 5.18.2 code base and recompile.</p>\n\n<p>Regexes have the same problem, and it's also been fixed in 5.21.</p>\n\n<p>The work around is to not have 2 gig strings in memory, that's good practice in general.  If it's read from a file, perhaps <code>read</code> it in blocks and use index on each block.</p>\n\n<p>If you must have a 2 gig string, use substr() to check it in blocks.  Unfortunately this means you have to copy the string in pieces.  The code below deliberately initializes <code>$substr</code> outside the loop so Perl doesn't reallocate the memory multiple times.</p>\n\n<pre><code>use v5.18;\nuse strict;\nuse warnings;\n\nsub big_index {\n    my $ref = shift;\n    my $match = shift;\n\n    state $block_size = 2**29;\n\n    my $strlen   = length($$ref);\n    my $matchlen = length($match);\n\n    # No point in doing extra work if we don't need to.\n    return index($$ref, $match) if $strlen &lt; $block_size;\n\n    my $substr = '';\n    my $offset = 0;\n    for(\n        my $offset = 0;\n        $offset &lt; $strlen;\n        $offset += ($block_size - $matchlen - 1)\n    ) {\n        $substr = substr($$ref, $offset, $block_size);\n        my $ret = index $substr, $match;\n        return $ret + $offset if $ret != -1;\n    }\n\n    return -1;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 27241, "user_id": 363028, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/cP1F2.jpg?s=128&g=1", "display_name": "Ole Tange", "link": "https://stackoverflow.com/users/363028/ole-tange"}, "is_accepted": true, "score": 0, "last_activity_date": 1424878212, "creation_date": 1424878212, "answer_id": 28722955, "question_id": 28686297, "link": "https://stackoverflow.com/questions/28686297/perl-index-rindex-after-2gb/28722955#28722955", "title": "Perl: index/rindex after 2GB?", "body": "<p>Thanks to @Schwern for the basic code. This version avoids copying in the 2 GB string by using <code>substr</code> directly. It supports the additional <code>$position</code> parameter like <code>index</code>. I also did the <code>rindex</code> version.</p>\n\n<p>Call like <code>index</code>/<code>rindex</code> except call with a reference to to source string:</p>\n\n<pre><code>index64(\\$string, $match);\nindex64(\\$string, $match, $position);\nrindex64(\\$string, $match);\nrindex64(\\$string, $match, $position);\n\n\nsub index64 {\n    # Do index on strings &gt; 2GB.\n    # index in Perl &lt; v5.22 does not work for &gt; 2GB\n    # Input:\n    #   as index\n    # Output:\n    #   as index\n    my $ref = shift;\n    my $match = shift;\n    my $pos = shift || 0;\n    my $block_size = 2**31-1;\n    my $strlen   = length($$ref);\n    # No point in doing extra work if we don't need to.\n    if($strlen &lt; $block_size) {\n        return index($$ref, $match, $pos);\n    }\n\n    my $matchlen = length($match);\n    my $ret;\n    my $offset = $pos;\n    while($offset &lt; $strlen) {\n        $ret = index(\n            substr($$ref, $offset, $block_size),\n            $match, $pos-$offset);\n        if($ret != -1) {\n            return $ret + $offset;\n        }\n        $offset += ($block_size - $matchlen - 1);\n    }\n    return -1;\n}\n\nsub rindex64 {\n    # Do rindex on strings &gt; 2GB.\n    # rindex in Perl &lt; v5.22 does not work for &gt; 2GB\n    # Input:\n    #   as rindex\n    # Output:\n    #   as rindex\n    my $ref = shift;\n    my $match = shift;\n    my $pos = shift;\n    my $block_size = 2**31-1;\n    my $strlen = length($$ref);\n    # Default: search from end\n    $pos = defined $pos ? $pos : $strlen;\n    # No point in doing extra work if we don't need to.\n    if($strlen &lt; $block_size) {\n        return rindex($$ref, $match, $pos);\n    }\n\n    my $matchlen = length($match);\n    my $ret;\n    my $offset = $pos - $block_size + $matchlen;\n    if($offset &lt; 0) {\n        # The offset is less than a $block_size\n        # Set the $offset to 0 and\n        # Adjust block_size accordingly\n        $block_size = $block_size + $offset;\n        $offset = 0;\n    }\n    while($offset &gt;= 0) {\n        $ret = rindex(\n            substr($$ref, $offset, $block_size),\n            $match);\n        if($ret != -1) {\n            return $ret + $offset;\n        }\n        $offset -= ($block_size - $matchlen - 1);\n    }\n    return -1;\n}\n</code></pre>\n"}], "owner": {"reputation": 27241, "user_id": 363028, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/cP1F2.jpg?s=128&g=1", "display_name": "Ole Tange", "link": "https://stackoverflow.com/users/363028/ole-tange"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 114, "favorite_count": 1, "accepted_answer_id": 28722955, "answer_count": 2, "score": 4, "last_activity_date": 1424880092, "creation_date": 1424738117, "last_edit_date": 1424880092, "question_id": 28686297, "link": "https://stackoverflow.com/questions/28686297/perl-index-rindex-after-2gb", "title": "Perl: index/rindex after 2GB?", "body": "<p>index and rindex work great on short strings:</p>\n\n<pre><code>$ perl -e '$a=(\"x\"x((2&lt;&lt;30)-2)).\"b\";print index($a,\"b\")'\n2147483646\n$ perl -e '$a=(\"x\"x((2&lt;&lt;30)-2)).\"b\";print rindex($a,\"b\")'\n2147483646\n</code></pre>\n\n<p>However, on long strings they behave quite differently:</p>\n\n<pre><code>$ perl -e '$a=(\"x\"x((2&lt;&lt;30)-1)).\"b\";print index($a,\"b\")'\nSegmentation fault (core dumped)\n$ perl -e '$a=(\"x\"x((2&lt;&lt;30)-1)).\"b\";print rindex($a,\"b\")'\n-1\n</code></pre>\n\n<p>Is this expected? Is there a nice workaround?</p>\n\n<pre><code>$ perl -V\nSummary of my perl5 (revision 5 version 18 subversion 2) configuration:\n\n  Platform:\n    osname=linux, osvers=3.2.0-58-generic, archname=x86_64-linux-gnu-thread-multi\n    uname='linux brownie 3.2.0-58-generic #88-ubuntu smp tue dec 3 17:37:58 utc 2013 x86_64 x86_64 x86_64 gnulinux '\n    config_args='-Dusethreads -Duselargefiles -Dccflags=-DDEBIAN -D_FORTIFY_SOURCE=2 -g -O2 -fstack-protector --param=ssp-buffer-size=4 -Wformat -Werror=format-security -Dldflags= -Wl,-Bsymbolic-functions -Wl,-z,relro -Dlddlflags=-shared -Wl,-Bsymbolic-functions -Wl,-z,relro -Dcccdlflags=-fPIC -Darchname=x86_64-linux-gnu -Dprefix=/usr -Dprivlib=/usr/share/perl/5.18 -Darchlib=/usr/lib/perl/5.18 -Dvendorprefix=/usr -Dvendorlib=/usr/share/perl5 -Dvendorarch=/usr/lib/perl5 -Dsiteprefix=/usr/local -Dsitelib=/usr/local/share/perl/5.18.2 -Dsitearch=/usr/local/lib/perl/5.18.2 -Dman1dir=/usr/share/man/man1 -Dman3dir=/usr/share/man/man3 -Dsiteman1dir=/usr/local/man/man1 -Dsiteman3dir=/usr/local/man/man3 -Duse64bitint -Dman1ext=1 -Dman3ext=3perl -Dpager=/usr/bin/sensible-pager -Uafs -Ud_csh -Ud_ualarm -Uusesfio -Uusenm -Ui_libutil -Uversiononly -DDEBUGGING=-g -Doptimize=-O2 -Duseshrplib -Dlibperl=libperl.so.5.18.2 -des'\n    hint=recommended, useposix=true, d_sigaction=define\n    useithreads=define, usemultiplicity=define\n    useperlio=define, d_sfio=undef, uselargefiles=define, usesocks=undef\n    use64bitint=define, use64bitall=define, uselongdouble=undef\n    usemymalloc=n, bincompat5005=undef\n  Compiler:\n    cc='cc', ccflags ='-D_REENTRANT -D_GNU_SOURCE -DDEBIAN -fstack-protector -fno-strict-aliasing -pipe -I/usr/local/include -D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64',\n    optimize='-O2 -g',\n    cppflags='-D_REENTRANT -D_GNU_SOURCE -DDEBIAN -fstack-protector -fno-strict-aliasing -pipe -I/usr/local/include'\n    ccversion='', gccversion='4.8.2', gccosandvers=''\n    intsize=4, longsize=8, ptrsize=8, doublesize=8, byteorder=12345678\n    d_longlong=define, longlongsize=8, d_longdbl=define, longdblsize=16\n    ivtype='long', ivsize=8, nvtype='double', nvsize=8, Off_t='off_t', lseeksize=8\n    alignbytes=8, prototype=define\n  Linker and Libraries:\n    ld='cc', ldflags =' -fstack-protector -L/usr/local/lib'\n    libpth=/usr/local/lib /lib/x86_64-linux-gnu /lib/../lib /usr/lib/x86_64-linux-gnu /usr/lib/../lib /lib /usr/lib\n    libs=-lgdbm -lgdbm_compat -ldb -ldl -lm -lpthread -lc -lcrypt\n    perllibs=-ldl -lm -lpthread -lc -lcrypt\n    libc=, so=so, useshrplib=true, libperl=libperl.so.5.18.2\n    gnulibc_version='2.19'\n  Dynamic Linking:\n    dlsrc=dl_dlopen.xs, dlext=so, d_dlsymun=undef, ccdlflags='-Wl,-E'\n    cccdlflags='-fPIC', lddlflags='-shared -L/usr/local/lib -fstack-protector'\n\n\nCharacteristics of this binary (from libperl): \n  Compile-time options: HAS_TIMES MULTIPLICITY PERLIO_LAYERS\n                        PERL_DONT_CREATE_GVSV\n                        PERL_HASH_FUNC_ONE_AT_A_TIME_HARD\n                        PERL_IMPLICIT_CONTEXT PERL_MALLOC_WRAP\n                        PERL_PRESERVE_IVUV PERL_SAWAMPERSAND USE_64_BIT_ALL\n                        USE_64_BIT_INT USE_ITHREADS USE_LARGE_FILES\n                        USE_LOCALE USE_LOCALE_COLLATE USE_LOCALE_CTYPE\n                        USE_LOCALE_NUMERIC USE_PERLIO USE_PERL_ATOF\n                        USE_REENTRANT_API\n  Locally applied patches:\n    DEBPKG:debian/cpan_definstalldirs - Provide a sensible INSTALLDIRS default for modules installed from CPAN.\n    DEBPKG:debian/db_file_ver - http://bugs.debian.org/340047 Remove overly restrictive DB_File version check.\n    DEBPKG:debian/doc_info - Replace generic man(1) instructions with Debian-specific information.\n    DEBPKG:debian/enc2xs_inc - http://bugs.debian.org/290336 Tweak enc2xs to follow symlinks and ignore missing @INC directories.\n    DEBPKG:debian/errno_ver - http://bugs.debian.org/343351 Remove Errno version check due to upgrade problems with long-running processes.\n    DEBPKG:debian/libperl_embed_doc - http://bugs.debian.org/186778 Note that libperl-dev package is required for embedded linking\n    DEBPKG:fixes/respect_umask - Respect umask during installation\n    DEBPKG:debian/writable_site_dirs - Set umask approproately for site install directories\n    DEBPKG:debian/extutils_set_libperl_path - EU:MM: Set location of libperl.a to /usr/lib\n    DEBPKG:debian/no_packlist_perllocal - Don't install .packlist or perllocal.pod for perl or vendor\n    DEBPKG:debian/prefix_changes - Fiddle with *PREFIX and variables written to the makefile\n    DEBPKG:debian/fakeroot - Postpone LD_LIBRARY_PATH evaluation to the binary targets.\n    DEBPKG:debian/instmodsh_doc - Debian policy doesn't install .packlist files for core or vendor.\n    DEBPKG:debian/ld_run_path - Remove standard libs from LD_RUN_PATH as per Debian policy.\n    DEBPKG:debian/libnet_config_path - Set location of libnet.cfg to /etc/perl/Net as /usr may not be writable.\n    DEBPKG:debian/mod_paths - Tweak @INC ordering for Debian\n    DEBPKG:debian/module_build_man_extensions - http://bugs.debian.org/479460 Adjust Module::Build manual page extensions for the Debian Perl policy\n    DEBPKG:debian/prune_libs - http://bugs.debian.org/128355 Prune the list of libraries wanted to what we actually need.\n    DEBPKG:fixes/net_smtp_docs - [rt.cpan.org #36038] http://bugs.debian.org/100195 Document the Net::SMTP 'Port' option\n    DEBPKG:debian/perlivp - http://bugs.debian.org/510895 Make perlivp skip include directories in /usr/local\n    DEBPKG:debian/cpanplus_definstalldirs - http://bugs.debian.org/533707 Configure CPANPLUS to use the site directories by default.\n    DEBPKG:debian/cpanplus_config_path - Save local versions of CPANPLUS::Config::System into /etc/perl.\n    DEBPKG:debian/deprecate-with-apt - http://bugs.debian.org/702096 Point users to Debian packages of deprecated core modules\n    DEBPKG:debian/squelch-locale-warnings - http://bugs.debian.org/508764 Squelch locale warnings in Debian package maintainer scripts\n    DEBPKG:debian/skip-upstream-git-tests - Skip tests specific to the upstream Git repository\n    DEBPKG:debian/patchlevel - http://bugs.debian.org/567489 List packaged patches for 5.18.2-2ubuntu1 in patchlevel.h\n    DEBPKG:debian/skip-kfreebsd-crash - http://bugs.debian.org/628493 [perl #96272] Skip a crashing test case in t/op/threads.t on GNU/kFreeBSD\n    DEBPKG:fixes/document_makemaker_ccflags - http://bugs.debian.org/628522 [rt.cpan.org #68613] Document that CCFLAGS should include $Config{ccflags}\n    DEBPKG:debian/find_html2text - http://bugs.debian.org/640479 Configure CPAN::Distribution with correct name of html2text\n    DEBPKG:debian/hurd_test_skip_stack - http://bugs.debian.org/650175 Disable failing GNU/Hurd tests dist/threads/t/stack.t\n    DEBPKG:fixes/manpage_name_Test-Harness - http://bugs.debian.org/650451 [rt.cpan.org #73399] cpan/Test-Harness: add NAME headings in modules with POD\n    DEBPKG:debian/makemaker-pasthru - http://bugs.debian.org/660195 [rt.cpan.org #28632] Make EU::MM pass LD through to recursive Makefile.PL invocations\n    DEBPKG:debian/perl5db-x-terminal-emulator.patch - http://bugs.debian.org/668490 Invoke x-terminal-emulator rather than xterm in perl5db.pl\n    DEBPKG:debian/cpan-missing-site-dirs - http://bugs.debian.org/688842 Fix CPAN::FirstTime defaults with nonexisting site dirs if a parent is writable\n    DEBPKG:fixes/memoize_storable_nstore - [rt.cpan.org #77790] http://bugs.debian.org/587650 Memoize::Storable: respect 'nstore' option not respected\n    DEBPKG:fixes/net_ftp_failed_command - [rt.cpan.org #37700] http://bugs.debian.org/491062 Net::FTP: cope gracefully with a failed command\n    DEBPKG:fixes/perlbug-patchlist - [3541c11] http://bugs.debian.org/710842 [perl #118433] Make perlbug look up the list of local patches at run time\n    DEBPKG:fixes/module_metadata_security_doc - [68cdd4b] CVE-2013-1437 documentation fix\n    DEBPKG:fixes/module_metadata_taint_fix - [bff978f] http://bugs.debian.org/722210 [rt.cpan.org #88576] untaint version, if needed, in Module::Metadata\n    DEBPKG:fixes/IPC-SysV-spelling - http://bugs.debian.org/730558 [rt.cpan.org #86736] Fix spelling of IPC_CREAT in IPC-SysV documentation\n    DEBPKG:fixes/fix-undef-source -\n  Built under linux\n  Compiled at Mar 27 2014 18:30:28\n  %ENV:\n    PERL_MB_OPT=\"--install_base \"/home/tange/perl5\"\"\n    PERL_MM_OPT=\"INSTALL_BASE=/home/tange/perl5\"\n  @INC:\n    /etc/perl\n    /usr/local/lib/perl/5.18.2\n    /usr/local/share/perl/5.18.2\n    /usr/lib/perl5\n    /usr/share/perl5\n    /usr/lib/perl/5.18\n    /usr/share/perl/5.18\n    /usr/local/lib/site_perl\n    .\n</code></pre>\n"}, {"tags": ["regex", "perl", "path", "split"], "comments": [{"owner": {"reputation": 538, "user_id": 2665510, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/206d5329545626249295c231282fe994?s=128&d=identicon&r=PG", "display_name": "wilkesybear", "link": "https://stackoverflow.com/users/2665510/wilkesybear"}, "edited": false, "score": 0, "creation_date": 1424735700, "post_id": 28685826, "comment_id": 45664326, "body": "I&#39;m guessing that <code>FileHandle</code> isn&#39;t able to accept wildcards. This makes sense because a File Handle is a handle to a single file. Try assigning a path to a single file into <code>$log_file</code> and see if that alleviates your problems."}, {"owner": {"reputation": 85, "user_id": 4480711, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/8162e424e87f54d3ae391ce44b808404?s=128&d=identicon&r=PG&f=1", "display_name": "chmod", "link": "https://stackoverflow.com/users/4480711/chmod"}, "reply_to_user": {"reputation": 538, "user_id": 2665510, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/206d5329545626249295c231282fe994?s=128&d=identicon&r=PG", "display_name": "wilkesybear", "link": "https://stackoverflow.com/users/2665510/wilkesybear"}, "edited": false, "score": 0, "creation_date": 1424735969, "post_id": 28685826, "comment_id": 45664395, "body": "I get your point..but under the directory &#39;/logs&#39;, there are several files and I perform different operation on each file depending on its name. $log_file is reading the whole path (&#39;/nfs/fm/disks/fm_mydiskhere_00000/users/me/repotest/myrepo&zwnj;&#8203;/tools/toolsdir/logs&zwnj;&#8203;/*&#39;;) , I&#39;m not sure how to get it to read files from the last &#39;/logs&#39; directory."}, {"owner": {"reputation": 538, "user_id": 2665510, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/206d5329545626249295c231282fe994?s=128&d=identicon&r=PG", "display_name": "wilkesybear", "link": "https://stackoverflow.com/users/2665510/wilkesybear"}, "edited": false, "score": 0, "creation_date": 1424736962, "post_id": 28685826, "comment_id": 45664697, "body": "How about using <a href=\"http://perldoc.perl.org/functions/readdir.html\" rel=\"nofollow noreferrer\">readdir</a> to first iterate over each filename, then putting all your logic within that loop? Here&#39;s another stack overflow question/answer that may help <a href=\"http://stackoverflow.com/questions/6442889/perl-iterate-through-directories/6443023#6443023\" title=\"perl iterate through directories\">stackoverflow.com/questions/6442889/&hellip;</a>"}, {"owner": {"reputation": 85, "user_id": 4480711, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/8162e424e87f54d3ae391ce44b808404?s=128&d=identicon&r=PG&f=1", "display_name": "chmod", "link": "https://stackoverflow.com/users/4480711/chmod"}, "reply_to_user": {"reputation": 538, "user_id": 2665510, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/206d5329545626249295c231282fe994?s=128&d=identicon&r=PG", "display_name": "wilkesybear", "link": "https://stackoverflow.com/users/2665510/wilkesybear"}, "edited": false, "score": 0, "creation_date": 1424737353, "post_id": 28685826, "comment_id": 45664847, "body": "Sure..Will try this and leave a comment as to what I see in the result."}], "answers": [{"comments": [{"owner": {"reputation": 85, "user_id": 4480711, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/8162e424e87f54d3ae391ce44b808404?s=128&d=identicon&r=PG&f=1", "display_name": "chmod", "link": "https://stackoverflow.com/users/4480711/chmod"}, "edited": false, "score": 0, "creation_date": 1424740512, "post_id": 28686275, "comment_id": 45665741, "body": "Tried to include the above snippet in my &#39;read_file&#39; subroutine.This is what I get: $VAR1 = [           &#39;/nfs/fm/disks/fm_infrach_00022/users/npothuku/repotest/ip-p&zwnj;&#8203;sf2/tools/dynamo/log&zwnj;&#8203;s/&#39;         ];"}, {"owner": {"reputation": 1748, "user_id": 4532614, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f230595feac883e1643f5ba43084e895?s=128&d=identicon&r=PG&f=1", "display_name": "TobyLL", "link": "https://stackoverflow.com/users/4532614/tobyll"}, "reply_to_user": {"reputation": 85, "user_id": 4480711, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/8162e424e87f54d3ae391ce44b808404?s=128&d=identicon&r=PG&f=1", "display_name": "chmod", "link": "https://stackoverflow.com/users/4480711/chmod"}, "edited": false, "score": 0, "creation_date": 1424740885, "post_id": 28686275, "comment_id": 45665832, "body": "Just try what I suggested - you don&#39;t need to split <code>$log_file</code> up at all.  The <code>glob</code> handles all that for you, and will list all the files under the location pointed to by <code>$log_file</code> i.e. <code>my @files = glob(&#39;&#47;nfs&#47;fm&#47;disks&#47;fm_mydiskhere_00000&#47;users&#47;me&#47;repotest&#47;my&zwnj;&#8203;repo&#47;tools&#47;toolsdir&#47;&zwnj;&#8203;logs&#47;*&#39;);</code> should give you the list of files you need."}, {"owner": {"reputation": 1748, "user_id": 4532614, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f230595feac883e1643f5ba43084e895?s=128&d=identicon&r=PG&f=1", "display_name": "TobyLL", "link": "https://stackoverflow.com/users/4532614/tobyll"}, "reply_to_user": {"reputation": 85, "user_id": 4480711, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/8162e424e87f54d3ae391ce44b808404?s=128&d=identicon&r=PG&f=1", "display_name": "chmod", "link": "https://stackoverflow.com/users/4480711/chmod"}, "edited": false, "score": 0, "creation_date": 1424741147, "post_id": 28686275, "comment_id": 45665896, "body": "The glob will return you the full filename, so rather than using <code>$log_file eq &quot;abc.txt&quot;</code> you can use <code>$log_file =~ &#47;\\&#47;abc.txt$&#47;</code> or use <code>File::Basename</code> to extract the filename without the path."}, {"owner": {"reputation": 85, "user_id": 4480711, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/8162e424e87f54d3ae391ce44b808404?s=128&d=identicon&r=PG&f=1", "display_name": "chmod", "link": "https://stackoverflow.com/users/4480711/chmod"}, "edited": false, "score": 0, "creation_date": 1424741657, "post_id": 28686275, "comment_id": 45666015, "body": "Since $log_file is fetching the path from a configuration file, I cannot hard code the path in my script. So I do this:  &lt;code&gt; my $log_file = $RC{path_from_config_file}; my @files = glob($log_file); use Data::Dumper; print Dumper(\\@files); &lt;/code&gt;"}, {"owner": {"reputation": 1748, "user_id": 4532614, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f230595feac883e1643f5ba43084e895?s=128&d=identicon&r=PG&f=1", "display_name": "TobyLL", "link": "https://stackoverflow.com/users/4532614/tobyll"}, "reply_to_user": {"reputation": 85, "user_id": 4480711, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/8162e424e87f54d3ae391ce44b808404?s=128&d=identicon&r=PG&f=1", "display_name": "chmod", "link": "https://stackoverflow.com/users/4480711/chmod"}, "edited": false, "score": 0, "creation_date": 1424741849, "post_id": 28686275, "comment_id": 45666063, "body": "The <code>glob()</code> call needs a wildcard on the end to do what you want - does it have that in the config file?  If not, you&#39;ll need to do <code>glob(&quot;$log_file&#47;*&quot;);</code>."}, {"owner": {"reputation": 85, "user_id": 4480711, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/8162e424e87f54d3ae391ce44b808404?s=128&d=identicon&r=PG&f=1", "display_name": "chmod", "link": "https://stackoverflow.com/users/4480711/chmod"}, "edited": false, "score": 0, "creation_date": 1424742232, "post_id": 28686275, "comment_id": 45666164, "body": "oh wait..It is listing all the files under &#39;/logs&#39; directory as expected. Now you suggest I use a pattern match instead of &#39;$log_file eq &quot;abc.txt&quot;&#39; to fetch the files I need? The array now looks like: $VAR1 = [ &#39;/nfs/fm/disks/fm_mydiskhere_00000/users/me/repotest/myrepo/&zwnj;&#8203;tools/toolsdir/\u200c\u200blog&zwnj;&#8203;s/abc.txt , ...(all files listed)]"}, {"owner": {"reputation": 1748, "user_id": 4532614, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f230595feac883e1643f5ba43084e895?s=128&d=identicon&r=PG&f=1", "display_name": "TobyLL", "link": "https://stackoverflow.com/users/4532614/tobyll"}, "reply_to_user": {"reputation": 85, "user_id": 4480711, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/8162e424e87f54d3ae391ce44b808404?s=128&d=identicon&r=PG&f=1", "display_name": "chmod", "link": "https://stackoverflow.com/users/4480711/chmod"}, "edited": false, "score": 0, "creation_date": 1424742412, "post_id": 28686275, "comment_id": 45666218, "body": "It depends what you want to do with the files - if you want to open them, just use the full filename. If you want an <code>if</code> statement on the filename, then either match the full filename, or see my earlier comment."}, {"owner": {"reputation": 85, "user_id": 4480711, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/8162e424e87f54d3ae391ce44b808404?s=128&d=identicon&r=PG&f=1", "display_name": "chmod", "link": "https://stackoverflow.com/users/4480711/chmod"}, "edited": false, "score": 0, "creation_date": 1424768106, "post_id": 28686275, "comment_id": 45674343, "body": "[ &#39;/nfs/fm/disks/fm_infrach_00022/users/npothuku/repotest/ip-p&zwnj;&#8203;sf2/tools/dynamo/log&zwnj;&#8203;s/soctbCollage.dnv.l&zwnj;&#8203;og&#39;,           &#39;/nfs/fm/disks/fm_infrach_00022/users/npothuku/repotest/ip-p&zwnj;&#8203;sf2/tools/dynamo/log&zwnj;&#8203;s/xregress_transcrip&zwnj;&#8203;t_csme.log&#39;] This is what I get as the elements of the &#39;@files&#39; array. If i want this one: &#39;xregress_transcript_csme.log&#39; how would i get this name from the last element of the array?"}, {"owner": {"reputation": 1748, "user_id": 4532614, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f230595feac883e1643f5ba43084e895?s=128&d=identicon&r=PG&f=1", "display_name": "TobyLL", "link": "https://stackoverflow.com/users/4532614/tobyll"}, "reply_to_user": {"reputation": 85, "user_id": 4480711, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/8162e424e87f54d3ae391ce44b808404?s=128&d=identicon&r=PG&f=1", "display_name": "chmod", "link": "https://stackoverflow.com/users/4480711/chmod"}, "edited": false, "score": 0, "creation_date": 1424770448, "post_id": 28686275, "comment_id": 45675605, "body": "As per my earlier comment, have a look at <code>basename()</code> in the <a href=\"https://metacpan.org/pod/File::Basename\" rel=\"nofollow noreferrer\">File::Basename</a> module."}, {"owner": {"reputation": 85, "user_id": 4480711, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/8162e424e87f54d3ae391ce44b808404?s=128&d=identicon&r=PG&f=1", "display_name": "chmod", "link": "https://stackoverflow.com/users/4480711/chmod"}, "edited": false, "score": 0, "creation_date": 1424818971, "post_id": 28686275, "comment_id": 45705481, "body": "Cool. Your suggestion on the earlier comment worked! I used basename for the @files array and now I have the file names fetched as required."}], "tags": [], "owner": {"reputation": 1748, "user_id": 4532614, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f230595feac883e1643f5ba43084e895?s=128&d=identicon&r=PG&f=1", "display_name": "TobyLL", "link": "https://stackoverflow.com/users/4532614/tobyll"}, "is_accepted": true, "score": 0, "last_activity_date": 1424737979, "creation_date": 1424737979, "answer_id": 28686275, "question_id": 28685826, "link": "https://stackoverflow.com/questions/28685826/perl-splitting-a-variable-containing-a-path-to-directory/28686275#28686275", "title": "Perl: Splitting a variable containing a path to directory", "body": "<p>Try:</p>\n\n<pre><code>my @files = glob($log_file);\nuse Data::Dumper;\nprint Dumper(\\@files);\n</code></pre>\n"}], "owner": {"reputation": 85, "user_id": 4480711, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/8162e424e87f54d3ae391ce44b808404?s=128&d=identicon&r=PG&f=1", "display_name": "chmod", "link": "https://stackoverflow.com/users/4480711/chmod"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 163, "favorite_count": 0, "accepted_answer_id": 28686275, "answer_count": 1, "score": 0, "last_activity_date": 1424737979, "creation_date": 1424735451, "question_id": 28685826, "link": "https://stackoverflow.com/questions/28685826/perl-splitting-a-variable-containing-a-path-to-directory", "title": "Perl: Splitting a variable containing a path to directory", "body": "<p>So I'm having a problem trying to split a variable that has the complete path to a directory. I want to fetch the files under 'logs' directory of this path:\n'/nfs/fm/disks/fm_mydiskhere_00000/users/me/repotest/myrepo/tools/toolsdir/logs/*';</p>\n\n<p>and in my Perl script, I have a variable that contains this path: '$log_file'. When I print '$log_file', it contains the entire path; I want to go to the last directory 'logs' and fetch the files under it. By the way, this complete path is in a separate configuration file that is being read by my Perl script this way:</p>\n\n<pre><code>sub read_file {\nmy ($log_file) = shift(@_);\n\ninfo (\"Using file : $log_file\");\nmy $fh = new FileHandle (\"$log_file\");\nprintError (\"Could not open this file : '$log_file' - $!\") unless defined $fh;\n\nmy $contents;\n{\n    local $/ = undef;\n    $contents = &lt;$fh&gt;;\n}\n$fh-&gt;close();\neval $contents;\nif ($@) {\n    chomp $@;\n    my $msg = \"BAD (perl) syntax in file:\\n\\n$@\\n\";\n    if ( $msg =~ /requires explicit package name/ ) {\n        $msg .= \"\\n  -&gt; A 'requires explicit package name' message means\".\n            \" a NON-VALID variable name was found\\n\";\n    }\n    die \"Error: $msg\\n\\n\";\n}\nreturn 1;\n</code></pre>\n\n<p>}</p>\n\n<p>And I'm using variable $log_file in another subroutine this way:</p>\n\n<pre><code>my $fh = read_file ($log_file);\nif ($log_file eq \"abc.txt\"){\nwhile (my $line = &lt;$fh&gt;) {\n#do something\n}\n}\n</code></pre>\n\n<p>Can anybody help me here, please? Am I missing something or using $log_file in the wrong way?</p>\n\n<p>Thanks in advance!</p>\n"}, {"tags": ["perl", "debugging"], "answers": [{"tags": [], "owner": {"reputation": 3241, "user_id": 781162, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/440977e8e1ca487a0979daf9c975ed3e?s=128&d=identicon&r=PG", "display_name": "Eugene K", "link": "https://stackoverflow.com/users/781162/eugene-k"}, "is_accepted": false, "score": 1, "last_activity_date": 1424732234, "creation_date": 1424732234, "answer_id": 28685203, "question_id": 28685028, "link": "https://stackoverflow.com/questions/28685028/perl-list-the-lines-being-run/28685203#28685203", "title": "Perl: list the lines being run", "body": "<p>You can use the Perl Debugger (<a href=\"http://perldoc.perl.org/perldebug.html\" rel=\"nofollow\">http://perldoc.perl.org/perldebug.html</a>).\nDecent beginner's write up: <a href=\"http://www.thegeekstuff.com/2010/05/perl-debugger/\" rel=\"nofollow\">http://www.thegeekstuff.com/2010/05/perl-debugger/</a></p>\n"}, {"comments": [{"owner": {"reputation": 27241, "user_id": 363028, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/cP1F2.jpg?s=128&g=1", "display_name": "Ole Tange", "link": "https://stackoverflow.com/users/363028/ole-tange"}, "edited": false, "score": 0, "creation_date": 1424857291, "post_id": 28708010, "comment_id": 45718860, "body": "Does <code>cover</code> have a way of generating the code where all the lines with 0 are commented out?"}], "tags": [], "owner": {"reputation": 519, "user_id": 463797, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ef506c0f33a46f69ea5132411b8b3765?s=128&d=identicon&r=PG", "display_name": "ashley", "link": "https://stackoverflow.com/users/463797/ashley"}, "is_accepted": false, "score": 0, "last_activity_date": 1424818645, "creation_date": 1424818645, "answer_id": 28708010, "question_id": 28685028, "link": "https://stackoverflow.com/questions/28685028/perl-list-the-lines-being-run/28708010#28708010", "title": "Perl: list the lines being run", "body": "<p>It sounds like you might want a coverage tool, like <a href=\"http://search.cpan.org/~pjcj/Devel-Cover-1.17/lib/Devel/Cover.pm\" rel=\"nofollow\">Devel::Cover</a>, which indicates the lines which are being executed during a run of the code.</p>\n\n<p>For example, where you currently execute your code as</p>\n\n<pre><code>perl yourprog args\n</code></pre>\n\n<p>instead you run</p>\n\n<pre><code>perl \u2212MDevel::Cover yourprog args\ncover\n</code></pre>\n\n<p>This will generate an HTML report showing the code which is actually executed.</p>\n"}], "owner": {"reputation": 27241, "user_id": 363028, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/cP1F2.jpg?s=128&g=1", "display_name": "Ole Tange", "link": "https://stackoverflow.com/users/363028/ole-tange"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 40, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1424818645, "creation_date": 1424731540, "question_id": 28685028, "link": "https://stackoverflow.com/questions/28685028/perl-list-the-lines-being-run", "title": "Perl: list the lines being run", "body": "<p>I am debugging big perl program. To minimize debugging I would like only to debug the lines actually run.</p>\n\n<p>Is there a tool which I can run my program under, that will give me a program only containing the lines actually being used (e.g. by commenting out the rest)?</p>\n"}, {"tags": ["regex", "perl", "hash"], "comments": [{"owner": {"reputation": 16381, "user_id": 1176601, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/YCkL9.jpg?s=128&g=1", "display_name": "Aprillion", "link": "https://stackoverflow.com/users/1176601/aprillion"}, "edited": false, "score": 1, "creation_date": 1424731298, "post_id": 28684403, "comment_id": 45662620, "body": "perhaps <code>=~</code> instead of <code>=</code>?"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1424734521, "post_id": 28684403, "comment_id": 45663934, "body": "What exactly <i>&quot;does not seem to work&quot;</i>? What do you expect your code to do? You probably want <code>my $regex = qr&#47;\\Q$value&#47;</code>. There is no point at all in the leading and trailing <code>.*?</code>."}], "answers": [{"tags": [], "owner": {"reputation": 46944, "user_id": 3764814, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d02a4923abd2ca6d7593f031e4222c2?s=128&d=identicon&r=PG", "display_name": "Lucas Trzesniewski", "link": "https://stackoverflow.com/users/3764814/lucas-trzesniewski"}, "is_accepted": false, "score": 0, "last_activity_date": 1424729769, "last_edit_date": 1424729769, "creation_date": 1424729412, "answer_id": 28684468, "question_id": 28684403, "link": "https://stackoverflow.com/questions/28684403/turn-perl-variable-into-regex/28684468#28684468", "title": "Turn Perl variable into regex", "body": "<p>Looks like you don't need regex for that... The <a href=\"http://perldoc.perl.org/functions/index.html\" rel=\"nofollow\"><code>index</code></a> function will let you check if a string contains a substring.</p>\n\n<pre><code>print $value if index($input, $value) &gt;= 0;\n</code></pre>\n\n<p>FYI, a regex solution would be:</p>\n\n<pre><code>print $value if $input =~ m/\\Q$value\\E/;\n</code></pre>\n\n<p>You can use it if you need modifiers (like <code>i</code> for a case insensitive match). <code>\\Q...\\E</code> is like <a href=\"http://perldoc.perl.org/functions/quotemeta.html\" rel=\"nofollow\"><code>quotemeta</code></a>.</p>\n"}, {"tags": [], "owner": {"reputation": 79972, "user_id": 298607, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/DVW9g.jpg?s=128&g=1", "display_name": "dawg", "link": "https://stackoverflow.com/users/298607/dawg"}, "is_accepted": false, "score": 0, "last_activity_date": 1424796702, "last_edit_date": 1424796702, "creation_date": 1424730572, "answer_id": 28684764, "question_id": 28684403, "link": "https://stackoverflow.com/questions/28684403/turn-perl-variable-into-regex/28684764#28684764", "title": "Turn Perl variable into regex", "body": "<p>On Perl 5.18.2, this works:</p>\n\n<pre><code>my %id_to_name = (\n    51803  =&gt;  'Jim bob and associates',\n            );\n\nwhile (my ($key, $value) = each %id_to_name) {\n    $regex = qr/^.*?$value.*?$/;\n    print \"$regex\\n\";\n    $test=\"a bunch of random text blah blah 'Jim bob and associates' blah blah.\";\n    print \"match\" if $test =~/$value/;\n}\n</code></pre>\n\n<p>Prints:</p>\n\n<pre><code>(?^:^.*?Jim bob and associates.*?$)\nmatch\n</code></pre>\n\n<p>As stated in comments, the leading and trailing <code>.*?</code> are pointless. </p>\n"}], "owner": {"reputation": 387, "user_id": 3842777, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/bFxen.jpg?s=128&g=1", "display_name": "JDE876", "link": "https://stackoverflow.com/users/3842777/jde876"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 46, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1424796702, "creation_date": 1424729161, "last_edit_date": 1424734460, "question_id": 28684403, "link": "https://stackoverflow.com/questions/28684403/turn-perl-variable-into-regex", "title": "Turn Perl variable into regex", "body": "<p>Here I have</p>\n\n<pre><code>my %id_to_name = (\n    51803 =&gt; 'Jim bob and associates',\n);\n\nwhile (my ($key, $value) = each %id_to_name) {\n    $regex = qr/^.*?$value.*?$/;\n    $value = $regex;\n</code></pre>\n\n<p>I basically want to match <code>$value</code> to:</p>\n\n<pre><code>a bunch of random text blah blah 'Jim bob and associates' blah blah.\n</code></pre>\n\n<p>I can't seem to get a match because of all the text before and after.</p>\n\n<p>I am trying <code>qr//</code> but it does not seem to work. Any suggestions?</p>\n"}, {"tags": ["perl", "module", "packaging", "makemaker"], "comments": [{"owner": {"reputation": 98433, "user_id": 368630, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/107085826cfbb2700f535417a12c89cb?s=128&d=identicon&r=PG", "display_name": "David W.", "link": "https://stackoverflow.com/users/368630/david-w"}, "edited": false, "score": 1, "creation_date": 1424726472, "post_id": 28683587, "comment_id": 45660112, "body": "Just curious: Why not let the user run <code>make install</code> if they want to? Otherwise, how would they use your modules you&#39;re producing?"}, {"owner": {"reputation": 519, "user_id": 4253357, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/a260d4d00483f67c0fe5d0b9e6d60e77?s=128&d=identicon&r=PG&f=1", "display_name": "Michal T", "link": "https://stackoverflow.com/users/4253357/michal-t"}, "reply_to_user": {"reputation": 98433, "user_id": 368630, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/107085826cfbb2700f535417a12c89cb?s=128&d=identicon&r=PG", "display_name": "David W.", "link": "https://stackoverflow.com/users/368630/david-w"}, "edited": false, "score": 0, "creation_date": 1424726987, "post_id": 28683587, "comment_id": 45660383, "body": "Because the application is dependent on several system administration choices like &quot;Which database backend am I going to use&quot;, etc. and just copying the modules to any directory on the system makes no real sense. I&#39;m just offering the Makefile.PL as a helper module for Linux distributions modules packagers."}], "answers": [{"comments": [{"owner": {"reputation": 519, "user_id": 4253357, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/a260d4d00483f67c0fe5d0b9e6d60e77?s=128&d=identicon&r=PG&f=1", "display_name": "Michal T", "link": "https://stackoverflow.com/users/4253357/michal-t"}, "edited": false, "score": 0, "creation_date": 1424727869, "post_id": 28683853, "comment_id": 45660878, "body": "A slightly updated version of your answer is exactly what I was looking for:  <code>sub MY::install {     &quot;install ::\\n\\t\\$(info You should run &#39;make dist&#39;, not &#39;make install&#39;)&quot; } </code>  Thanks"}, {"owner": {"reputation": 98433, "user_id": 368630, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/107085826cfbb2700f535417a12c89cb?s=128&d=identicon&r=PG", "display_name": "David W.", "link": "https://stackoverflow.com/users/368630/david-w"}, "edited": false, "score": 0, "creation_date": 1424728044, "post_id": 28683853, "comment_id": 45660972, "body": "I was just going to suggest putting <code>PREFIX =&gt; &#39;&#47;dev&#47;null,</code> in the <code>WriteMakefile</code> structure. You can run <code>make install</code>, but it won&#39;t work. Nice to know you can actually override the targets themselves."}], "tags": [], "owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "is_accepted": false, "score": 1, "last_activity_date": 1424727131, "creation_date": 1424727131, "answer_id": 28683853, "question_id": 28683587, "link": "https://stackoverflow.com/questions/28683587/how-do-i-disable-a-make-target-with-the-perl-makemaker-module/28683853#28683853", "title": "How do I disable a make target with the perl MakeMaker module?", "body": "<p>Define <code>MY::install</code> in your <code>Makefile.PL</code> file:</p>\n\n<pre><code>sub MY::install {\n    \"install ::\\n\\techo You should run \\\\'make dist\\\\', not \\\\'make install\\\\'\"\n}\n</code></pre>\n\n<p>The function should return the text you want to use to replace the <code>install</code> section of the Makefile.</p>\n\n<p>You could make <code>make install</code> a synonym for <code>make dist</code> with:</p>\n\n<pre><code>sub MY::install [ \"install :: dist\\n\" }\n</code></pre>\n\n<p>Doc: <a href=\"https://metacpan.org/pod/ExtUtils::MakeMaker#Overriding-MakeMaker-Methods\" rel=\"nofollow\">Overriding MakeMaker methods</a></p>\n"}], "owner": {"reputation": 519, "user_id": 4253357, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/a260d4d00483f67c0fe5d0b9e6d60e77?s=128&d=identicon&r=PG&f=1", "display_name": "Michal T", "link": "https://stackoverflow.com/users/4253357/michal-t"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 120, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1424727131, "creation_date": 1424726087, "question_id": 28683587, "link": "https://stackoverflow.com/questions/28683587/how-do-i-disable-a-make-target-with-the-perl-makemaker-module", "title": "How do I disable a make target with the perl MakeMaker module?", "body": "<p>I'm using ExtUtils::MakeMaker to package my perl module but I don't want the makefile to copy files anywhere on the system.\nI need to disable the \"install\" target and instead tell the user that this makefile only supports \"make dist\" when he types \"make install\".</p>\n"}, {"tags": ["perl", "encoding", "character-encoding"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1424722212, "post_id": 28681864, "comment_id": 45657883, "body": "(This is a common problem in Perl resulting from decoded text being emitted without encoding.)"}, {"owner": {"reputation": 2317, "user_id": 711515, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8b5b6edf26acc698b27a585417bb9bb6?s=128&d=identicon&r=PG", "display_name": "chansen", "link": "https://stackoverflow.com/users/711515/chansen"}, "edited": false, "score": 0, "creation_date": 1424820285, "post_id": 28681864, "comment_id": 45706012, "body": "I don&#39;t think it&#39;s specific to Perl, Ruby and PHP suffers from the same issues. Python 3 has distinct types for bytes vs characters."}], "answers": [{"comments": [{"owner": {"reputation": 2317, "user_id": 711515, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8b5b6edf26acc698b27a585417bb9bb6?s=128&d=identicon&r=PG", "display_name": "chansen", "link": "https://stackoverflow.com/users/711515/chansen"}, "edited": false, "score": 0, "creation_date": 1424723571, "post_id": 28681865, "comment_id": 45658537, "body": "Shouldn&#39;t the valid UTF-8 sequence &lt;D0 92&gt; be decoded as U+0412?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 2317, "user_id": 711515, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8b5b6edf26acc698b27a585417bb9bb6?s=128&d=identicon&r=PG", "display_name": "chansen", "link": "https://stackoverflow.com/users/711515/chansen"}, "edited": false, "score": 0, "creation_date": 1424723692, "post_id": 28681865, "comment_id": 45658603, "body": "@chansen, Not when you know the line is encoded using cp1252, it shouldn&#39;t."}, {"owner": {"reputation": 2415, "user_id": 4251338, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UNbCO.png?s=128&g=1", "display_name": "ssr1012", "link": "https://stackoverflow.com/users/4251338/ssr1012"}, "edited": false, "score": 0, "creation_date": 1607866980, "post_id": 28681865, "comment_id": 115401470, "body": "awesome champ.. +1"}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 13, "last_activity_date": 1424815926, "last_edit_date": 1424815926, "creation_date": 1424719982, "answer_id": 28681865, "question_id": 28681864, "link": "https://stackoverflow.com/questions/28681864/fixing-a-file-consisting-of-both-utf-8-and-windows-1252/28681865#28681865", "title": "Fixing a file consisting of both UTF-8 and Windows-1252", "body": "<p>Yes!</p>\n\n<p>Obviously, it's better to fix the program creating the file, but that's not always possible. What follows are two solutions.</p>\n\n<h2>A line can contain a mix of encodings</h2>\n\n<p><a href=\"http://search.cpan.org/perldoc?Encoding::FixLatin\" rel=\"noreferrer\">Encoding::FixLatin</a> provides a function named <code>fix_latin</code> which decodes text that consists of a mix of UTF-8, iso-8859-1, cp1252 and US-ASCII.</p>\n\n<pre><code>$ perl -e'\n   use Encoding::FixLatin qw( fix_latin );\n   $bytes = \"\\xD0 \\x92 \\xD0\\x92\\n\";\n   $text = fix_latin($bytes);\n   printf(\"U+%v04X\\n\", $text);\n'\nU+00D0.0020.2019.0020.0412.000A\n</code></pre>\n\n<p>Heuristics are employed, but they are fairly reliable. Only the following cases will fail:</p>\n\n<ul>\n<li><p>One of<br>&#91;&#xC0;&#xC1;&#xC2;&#xC3;&#xC4;&#xC5;&#xC6;&#xC7;&#xC8;&#xC9;&#xCA;&#xCB;&#xCC;&#xCD;&#xCE;&#xCF;&#xD0;&#xD1;&#xD2;&#xD3;&#xD4;&#xD5;&#xD6;&#xD7;&#xD8;&#xD9;&#xDA;&#xDB;&#xDC;&#xDD;&#xDE;&#xDF;]<br>encoded using iso-8859-1 or cp1252, followed by one of<br>&#91;&#x20AC;&#x201A;&#x0192;&#x201E;&#x2026;&#x2020;&#x2021;&#x02C6;&#x2030;&#x0160;&#x2039;&#x0152;&#x017D;&#x2018;&#x2019;&#x201C;&#x201D;&#x2022;&#x2013;&#x2014;&#x02DC;&#x2122;&#x0161;&#x203A;&#x0153;&#x017E;&#x0178;<code>&lt;NBSP></code>&#xA1;&#xA2;&#xA3;&#xA4;&#xA5;&#xA6;&#xA7;&#xA8;&#xA9;&#xAA;&#xAB;&#xAC;<code>&lt;SHY></code>&#xAE;&#xAF;&#xB0;&#xB1;&#xB2;&#xB3;&#xB4;&#xB5;&#xB6;&#xB7;&#xB8;&#xB9;&#xBA;&#xBB;&#xBC;&#xBD;&#xBE;&#xBF;]<br>encoded using iso-8859-1 or cp1252.</p></li>\n<li><p>One of<br>&#91;&#xE0;&#xE1;&#xE2;&#xE3;&#xE4;&#xE5;&#xE6;&#xE7;&#xE8;&#xE9;&#xEA;&#xEB;&#xEC;&#xED;&#xEE;&#xEF;]<br>encoded using iso-8859-1 or cp1252, followed by two of<br>&#91;&#x20AC;&#x201A;&#x0192;&#x201E;&#x2026;&#x2020;&#x2021;&#x02C6;&#x2030;&#x0160;&#x2039;&#x0152;&#x017D;&#x2018;&#x2019;&#x201C;&#x201D;&#x2022;&#x2013;&#x2014;&#x02DC;&#x2122;&#x0161;&#x203A;&#x0153;&#x017E;&#x0178;<code>&lt;NBSP></code>&#xA1;&#xA2;&#xA3;&#xA4;&#xA5;&#xA6;&#xA7;&#xA8;&#xA9;&#xAA;&#xAB;&#xAC;<code>&lt;SHY></code>&#xAE;&#xAF;&#xB0;&#xB1;&#xB2;&#xB3;&#xB4;&#xB5;&#xB6;&#xB7;&#xB8;&#xB9;&#xBA;&#xBB;&#xBC;&#xBD;&#xBE;&#xBF;]<br>encoded using iso-8859-1 or cp1252.</p></li>\n<li><p>One of<br>&#91;&#xF0;&#xF1;&#xF2;&#xF3;&#xF4;&#xF5;&#xF6;&#xF7;]<br>encoded using iso-8859-1 or cp1252, followed by two of<br>&#91;&#x20AC;&#x201A;&#x0192;&#x201E;&#x2026;&#x2020;&#x2021;&#x02C6;&#x2030;&#x0160;&#x2039;&#x0152;&#x017D;&#x2018;&#x2019;&#x201C;&#x201D;&#x2022;&#x2013;&#x2014;&#x02DC;&#x2122;&#x0161;&#x203A;&#x0153;&#x017E;&#x0178;<code>&lt;NBSP></code>&#xA1;&#xA2;&#xA3;&#xA4;&#xA5;&#xA6;&#xA7;&#xA8;&#xA9;&#xAA;&#xAB;&#xAC;<code>&lt;SHY></code>&#xAE;&#xAF;&#xB0;&#xB1;&#xB2;&#xB3;&#xB4;&#xB5;&#xB6;&#xB7;&#xB8;&#xB9;&#xBA;&#xBB;&#xBC;&#xBD;&#xBE;&#xBF;]<br>encoded using iso-8859-1 or cp1252.</p></li>\n</ul>\n\n<p>The same result can be produced using core module <a href=\"http://search.cpan.org/perldoc?Encode\" rel=\"noreferrer\">Encode</a>, though I imagine this is a fair bit slower than Encoding::FixLatin with Encoding::FixLatin::XS installed.</p>\n\n<pre><code>$ perl -e'\n   use Encode qw( decode_utf8 encode_utf8 decode );\n   $bytes = \"\\xD0 \\x92 \\xD0\\x92\\n\";\n   $text = decode_utf8($bytes, sub { encode_utf8(decode(\"cp1252\", chr($_[0]))) });\n   printf(\"U+%v04X\\n\", $text);\n'\nU+00D0.0020.2019.0020.0412.000A\n</code></pre>\n\n<h2>Each line only uses one encoding</h2>\n\n<p><code>fix_latin</code> works on a character level. If it's known that each line is entirely encoded using one of UTF-8, iso-8859-1, cp1252 or US-ASCII, you could make the process even more reliable by check if the line is valid UTF-8.</p>\n\n<pre><code>$ perl -e'\n   use Encode qw( decode );\n   for $bytes (\"\\xD0 \\x92 \\xD0\\x92\\n\", \"\\xD0\\x92\\n\") {\n      if (!eval {\n         $text = decode(\"UTF-8\", $bytes, Encode::FB_CROAK|Encode::LEAVE_SRC);\n         1  # No exception\n      }) {\n         $text = decode(\"cp1252\", $bytes);\n      }\n\n      printf(\"U+%v04X\\n\", $text);\n   }\n'\nU+00D0.0020.2019.0020.00D0.2019.000A\nU+0412.000A\n</code></pre>\n\n<p>Heuristics are employed, but they are very reliable. They will only fail if <strong>all</strong> of the following are true for a given line:</p>\n\n<ul>\n<li><p>The line is encoded using iso-8859-1 or cp1252,</p></li>\n<li><p>At least one of<br>&#91;&#x20AC;&#x201A;&#x0192;&#x201E;&#x2026;&#x2020;&#x2021;&#x02C6;&#x2030;&#x0160;&#x2039;&#x0152;&#x017D;&#x2018;&#x2019;&#x201C;&#x201D;&#x2022;&#x2013;&#x2014;&#x02DC;&#x2122;&#x0161;&#x203A;&#x0153;&#x017E;&#x0178;<code>&lt;NBSP></code>&#xA1;&#xA2;&#xA3;&#xA4;&#xA5;&#xA6;&#xA7;&#xA8;&#xA9;&#xAA;&#xAB;&#xAC;<code>&lt;SHY></code>&#xAE;&#xAF;&#xB0;&#xB1;&#xB2;&#xB3;&#xB4;&#xB5;&#xB6;&#xB7;&#xB8;&#xB9;&#xBA;&#xBB;&#xBC;&#xBD;&#xBE;&#xBF;&#xC0;&#xC1;&#xC2;&#xC3;&#xC4;&#xC5;&#xC6;&#xC7;&#xC8;&#xC9;&#xCA;&#xCB;&#xCC;&#xCD;&#xCE;&#xCF;&#xD0;&#xD1;&#xD2;&#xD3;&#xD4;&#xD5;&#xD6;&#xD7;&#xD8;&#xD9;&#xDA;&#xDB;&#xDC;&#xDD;&#xDE;&#xDF;&#xE0;&#xE1;&#xE2;&#xE3;&#xE4;&#xE5;&#xE6;&#xE7;&#xE8;&#xE9;&#xEA;&#xEB;&#xEC;&#xED;&#xEE;&#xEF;&#xF0;&#xF1;&#xF2;&#xF3;&#xF4;&#xF5;&#xF6;&#xF7;]<br>is present in the line,</p></li>\n<li><p>All instances of<br>&#91;&#xC0;&#xC1;&#xC2;&#xC3;&#xC4;&#xC5;&#xC6;&#xC7;&#xC8;&#xC9;&#xCA;&#xCB;&#xCC;&#xCD;&#xCE;&#xCF;&#xD0;&#xD1;&#xD2;&#xD3;&#xD4;&#xD5;&#xD6;&#xD7;&#xD8;&#xD9;&#xDA;&#xDB;&#xDC;&#xDD;&#xDE;&#xDF;]<br>are always followed by exactly one of<br>&#91;&#x20AC;&#x201A;&#x0192;&#x201E;&#x2026;&#x2020;&#x2021;&#x02C6;&#x2030;&#x0160;&#x2039;&#x0152;&#x017D;&#x2018;&#x2019;&#x201C;&#x201D;&#x2022;&#x2013;&#x2014;&#x02DC;&#x2122;&#x0161;&#x203A;&#x0153;&#x017E;&#x0178;<code>&lt;NBSP></code>&#xA1;&#xA2;&#xA3;&#xA4;&#xA5;&#xA6;&#xA7;&#xA8;&#xA9;&#xAA;&#xAB;&#xAC;<code>&lt;SHY></code>&#xAE;&#xAF;&#xB0;&#xB1;&#xB2;&#xB3;&#xB4;&#xB5;&#xB6;&#xB7;&#xB8;&#xB9;&#xBA;&#xBB;&#xBC;&#xBD;&#xBE;&#xBF;],</p></li>\n<li><p>All instances of<br>&#91;&#xE0;&#xE1;&#xE2;&#xE3;&#xE4;&#xE5;&#xE6;&#xE7;&#xE8;&#xE9;&#xEA;&#xEB;&#xEC;&#xED;&#xEE;&#xEF;]<br>are always followed by exactly two of<br>&#91;&#x20AC;&#x201A;&#x0192;&#x201E;&#x2026;&#x2020;&#x2021;&#x02C6;&#x2030;&#x0160;&#x2039;&#x0152;&#x017D;&#x2018;&#x2019;&#x201C;&#x201D;&#x2022;&#x2013;&#x2014;&#x02DC;&#x2122;&#x0161;&#x203A;&#x0153;&#x017E;&#x0178;<code>&lt;NBSP></code>&#xA1;&#xA2;&#xA3;&#xA4;&#xA5;&#xA6;&#xA7;&#xA8;&#xA9;&#xAA;&#xAB;&#xAC;<code>&lt;SHY></code>&#xAE;&#xAF;&#xB0;&#xB1;&#xB2;&#xB3;&#xB4;&#xB5;&#xB6;&#xB7;&#xB8;&#xB9;&#xBA;&#xBB;&#xBC;&#xBD;&#xBE;&#xBF;],</p></li>\n<li><p>All instances of<br>&#91;&#xF0;&#xF1;&#xF2;&#xF3;&#xF4;&#xF5;&#xF6;&#xF7;]<br>are always followed by exactly three of<br>&#91;&#x20AC;&#x201A;&#x0192;&#x201E;&#x2026;&#x2020;&#x2021;&#x02C6;&#x2030;&#x0160;&#x2039;&#x0152;&#x017D;&#x2018;&#x2019;&#x201C;&#x201D;&#x2022;&#x2013;&#x2014;&#x02DC;&#x2122;&#x0161;&#x203A;&#x0153;&#x017E;&#x0178;<code>&lt;NBSP></code>&#xA1;&#xA2;&#xA3;&#xA4;&#xA5;&#xA6;&#xA7;&#xA8;&#xA9;&#xAA;&#xAB;&#xAC;<code>&lt;SHY></code>&#xAE;&#xAF;&#xB0;&#xB1;&#xB2;&#xB3;&#xB4;&#xB5;&#xB6;&#xB7;&#xB8;&#xB9;&#xBA;&#xBB;&#xBC;&#xBD;&#xBE;&#xBF;],</p></li>\n<li><p>None of<br>&#91;&#xF8;&#xF9;&#xFA;&#xFB;&#xFC;&#xFD;&#xFE;&#xFF;]<br>are present in the line, and</p></li>\n<li><p>None of<br>&#91;&#x20AC;&#x201A;&#x0192;&#x201E;&#x2026;&#x2020;&#x2021;&#x02C6;&#x2030;&#x0160;&#x2039;&#x0152;&#x017D;&#x2018;&#x2019;&#x201C;&#x201D;&#x2022;&#x2013;&#x2014;&#x02DC;&#x2122;&#x0161;&#x203A;&#x0153;&#x017E;&#x0178;<code>&lt;NBSP></code>&#xA1;&#xA2;&#xA3;&#xA4;&#xA5;&#xA6;&#xA7;&#xA8;&#xA9;&#xAA;&#xAB;&#xAC;<code>&lt;SHY></code>&#xAE;&#xAF;&#xB0;&#xB1;&#xB2;&#xB3;&#xB4;&#xB5;&#xB6;&#xB7;&#xB8;&#xB9;&#xBA;&#xBB;&#xBC;&#xBD;&#xBE;&#xBF;]<br>are present in the line except where previously mentioned.</p></li>\n</ul>\n\n<hr>\n\n<p>Notes:</p>\n\n<ul>\n<li>Encoding::FixLatin installs command line tool <code>fix_latin</code> to convert files, and it would be trivial to write one using the second approach.</li>\n<li><code>fix_latin</code> (both the function and the file) can be sped up by installing <a href=\"http://search.cpan.org/perldoc?Encoding::FixLatin::XS\" rel=\"noreferrer\">Encoding::FixLatin::XS</a>.</li>\n<li>The same approach can be used for mixes of UTF-8 with other single-byte encodings. The reliability should be similar, but it can vary.</li>\n</ul>\n"}, {"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1424725094, "post_id": 28682679, "comment_id": 45659394, "body": "That might be a little faster than Encode::decode_utf8 (since Encode::decode_utf8&#39;s callback must produce UTF-8), but it still uses a callback. Encoding::FixLatin doesn&#39;t, so it&#39;s bound to be faster. (And if it isn&#39;t, it can be made to be faster.) It&#39;s also simpler (<code>fix_latin($bytes)</code> vs <code>decode_utf8($bytes, sub { decode(&#39;cp1252&#39;, $_[0]) })</code>)"}, {"owner": {"reputation": 2317, "user_id": 711515, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8b5b6edf26acc698b27a585417bb9bb6?s=128&d=identicon&r=PG", "display_name": "chansen", "link": "https://stackoverflow.com/users/711515/chansen"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1424725877, "post_id": 28682679, "comment_id": 45659840, "body": "@ikegami, Unicode::UTF8 totally outperforms Encode&#39;s implementation of UTF-8, <a href=\"https://gist.github.com/chansen/957956e08069f239bbab\" rel=\"nofollow noreferrer\">the becnhmark</a>."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1424815722, "post_id": 28682679, "comment_id": 45703968, "body": "Nothing I said was specific to cp1252. The same thing applies to latin-1. <code>fix_latin($bytes)</code> is simpler and faster (or can necessarily be made to be faster) than <code>decode_utf8($bytes, sub { $_[0] })</code> because of the lack of a callback. (The downside is that <code>fix_latin</code> can&#39;t be used to solve other problems that yours can.)"}], "tags": [], "owner": {"reputation": 2317, "user_id": 711515, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8b5b6edf26acc698b27a585417bb9bb6?s=128&d=identicon&r=PG", "display_name": "chansen", "link": "https://stackoverflow.com/users/711515/chansen"}, "is_accepted": false, "score": 5, "last_activity_date": 1424722838, "creation_date": 1424722838, "answer_id": 28682679, "question_id": 28681864, "link": "https://stackoverflow.com/questions/28681864/fixing-a-file-consisting-of-both-utf-8-and-windows-1252/28682679#28682679", "title": "Fixing a file consisting of both UTF-8 and Windows-1252", "body": "<p>This is one of the reasons I wrote <a href=\"https://metacpan.org/pod/Unicode::UTF8\" rel=\"noreferrer\">Unicode::UTF8</a>. With Unicode::UTF8 this is trivial using the fallback option in <a href=\"https://metacpan.org/pod/Unicode::UTF8#decode_utf8\" rel=\"noreferrer\">Unicode::UTF8::decode_utf8()</a>.</p>\n\n<pre><code>use Unicode::UTF8 qw[decode_utf8];\nuse Encode        qw[decode];\n\nprint \"UTF-8 mixed with Latin-1 (ISO-8859-1):\\n\";\nfor my $octets (\"\\xD0 \\x92 \\xD0\\x92\\n\", \"\\xD0\\x92\\n\") {\n    no warnings 'utf8';\n    printf \"U+%v04X\\n\", decode_utf8($octets, sub { $_[0] });\n}\n\nprint \"\\nUTF-8 mixed with CP-1252 (Windows-1252):\\n\";\nfor my $octets (\"\\xD0 \\x92 \\xD0\\x92\\n\", \"\\xD0\\x92\\n\") {\n    no warnings 'utf8';\n    printf \"U+%v04X\\n\", decode_utf8($octets, sub { decode('CP-1252', $_[0]) });\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>UTF-8 mixed with Latin-1 (ISO-8859-1):\nU+00D0.0020.0092.0020.0412.000A\nU+0412.000A\n\nUTF-8 mixed with CP-1252 (Windows-1252):\nU+00D0.0020.2019.0020.0412.000A\nU+0412.000A\n</code></pre>\n\n<p>Unicode::UTF8 is written in C/XS and only invokes the callback/fallback when encountering an Ill-formed UTF-8 sequence.</p>\n"}, {"comments": [{"owner": {"reputation": 5659, "user_id": 908621, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/f275c40d3a1fefc35699d94b20bb4acd?s=128&d=identicon&r=PG", "display_name": "fishinear", "link": "https://stackoverflow.com/users/908621/fishinear"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1512495042, "post_id": 47618528, "comment_id": 82277464, "body": "Never mind. I managed the rollback myself. The answer is applicable to the question, and handles more complicated encoding problems as well, so it is appropriate here."}, {"owner": {"reputation": 5659, "user_id": 908621, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/f275c40d3a1fefc35699d94b20bb4acd?s=128&d=identicon&r=PG", "display_name": "fishinear", "link": "https://stackoverflow.com/users/908621/fishinear"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1512497549, "post_id": 47618528, "comment_id": 82279004, "body": "The assumptions are similar to yours, except for the last one. A free-standing CP1252 80-7F will decode to Unicode fine. The only extra assumption is that there are no UTF-8 sequences that encode for any of the character sequences that you mention. That is unavoidable if you want to decode doubly-encoded UTF-8. It is still not a very restrictive assumption."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1512497616, "post_id": 47618528, "comment_id": 82279039, "body": "Maybe similar, but because the loop, there are far more. Your code fails for <code>encode_utf8(&quot;\\xF0\\xBF\\xBF\\xBF&quot;)</code>, for example. All but your solution correctly returns <code>&quot;\\xF0\\xBF\\xBF\\xBF&quot;</code>"}, {"owner": {"reputation": 5659, "user_id": 908621, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/f275c40d3a1fefc35699d94b20bb4acd?s=128&d=identicon&r=PG", "display_name": "fishinear", "link": "https://stackoverflow.com/users/908621/fishinear"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1512497904, "post_id": 47618528, "comment_id": 82279202, "body": "<code>encode_utf8(&quot;\\xF0\\xBF\\xBF\\xBF&quot;)</code> decodes fine to Unicode F0 BF BF BF. What did you expect that to decode to?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1512498256, "post_id": 47618528, "comment_id": 82279429, "body": "Exactly, but your code returns <code>&quot;\\x{3FFFF}&quot;</code> instead of <code>&quot;\\xF0\\xBF\\xBF\\xBF&quot;</code>."}, {"owner": {"reputation": 5659, "user_id": 908621, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/f275c40d3a1fefc35699d94b20bb4acd?s=128&d=identicon&r=PG", "display_name": "fishinear", "link": "https://stackoverflow.com/users/908621/fishinear"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1512499114, "post_id": 47618528, "comment_id": 82279944, "body": "Sorry, I was a bit confused, because I had a slightly different version at home than posted here. Yes, that case falls under &quot;The only extra assumption is that there are no UTF-8 sequences that encode for any of the character sequences that you mention&quot;. That is unavoidable if you want to be able to decode multiple-encode UTF-8 sequences."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1512499788, "post_id": 47618528, "comment_id": 82280273, "body": "Re &quot;<i>That is unavoidable if you want to be able to decode multiple-encode UTF-8 sequences.</i>&quot;, Yet, that&#39;s not what the OP asked for, so it is avoidable."}, {"owner": {"reputation": 5659, "user_id": 908621, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/f275c40d3a1fefc35699d94b20bb4acd?s=128&d=identicon&r=PG", "display_name": "fishinear", "link": "https://stackoverflow.com/users/908621/fishinear"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1512500099, "post_id": 47618528, "comment_id": 82280434, "body": "@ikegami It is a valid answer, just with an additional assumption, and applicable to a broader range of encoding problems. I really don&#39;t see the point in posting another, almost identical question, with my answer. I fail to see how that will help people solving their encoding problems in any better way, they will just have more questions to read through."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1512500657, "post_id": 47618528, "comment_id": 82280712, "body": "It&#39;s just a really bad answer because of the bugs you refuse to correct."}, {"owner": {"reputation": 5659, "user_id": 908621, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/f275c40d3a1fefc35699d94b20bb4acd?s=128&d=identicon&r=PG", "display_name": "fishinear", "link": "https://stackoverflow.com/users/908621/fishinear"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1512507732, "post_id": 47618528, "comment_id": 82284299, "body": "Sorry, which bugs? You mean the fact that it will also decode doubly-encoded utf-8? That is not a bug, it&#39;s a really useful feature. And if you only have single-encoding problems, then it is a limitation of the solution , similar to the limitations that your own solution has. Or did you mean real bugs that you have not mentioned before, I am not sure what you meant?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1512529014, "post_id": 47618528, "comment_id": 82291313, "body": "Re &quot;<i>Sorry, which bugs?</i>&quot;, It returns garbage instead of the correct value for certain sequences. Examples provided earlier."}], "tags": [], "owner": {"reputation": 5659, "user_id": 908621, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/f275c40d3a1fefc35699d94b20bb4acd?s=128&d=identicon&r=PG", "display_name": "fishinear", "link": "https://stackoverflow.com/users/908621/fishinear"}, "is_accepted": false, "score": -1, "last_activity_date": 1512557895, "last_edit_date": 1512557895, "creation_date": 1512305415, "answer_id": 47618528, "question_id": 28681864, "link": "https://stackoverflow.com/questions/28681864/fixing-a-file-consisting-of-both-utf-8-and-windows-1252/47618528#47618528", "title": "Fixing a file consisting of both UTF-8 and Windows-1252", "body": "<p>Recently I came across files with a severe mix of UTF-8, CP1252, and UTF-8 encoded, then interpreted as CP1252, then that encoded as UTF-8 again, that interpreted as CP1252 again, and so forth.</p>\n\n<p>I wrote the below code, which worked well for me. It looks for typical UTF-8 byte sequences, even if some of the bytes are not UTF-8, but the Unicode representation of the equivalent CP1252 byte. </p>\n\n<pre><code>my %cp1252Encoding = (\n# replacing the unicode code with the original CP1252 code\n# see e.g. http://www.i18nqa.com/debug/table-iso8859-1-vs-windows-1252.html\n\"\\x{20ac}\" =&gt; \"\\x80\",\n\"\\x{201a}\" =&gt; \"\\x82\",\n\"\\x{0192}\" =&gt; \"\\x83\",\n\"\\x{201e}\" =&gt; \"\\x84\",\n\"\\x{2026}\" =&gt; \"\\x85\",\n\"\\x{2020}\" =&gt; \"\\x86\",\n\"\\x{2021}\" =&gt; \"\\x87\",\n\"\\x{02c6}\" =&gt; \"\\x88\",\n\"\\x{2030}\" =&gt; \"\\x89\",\n\"\\x{0160}\" =&gt; \"\\x8a\",\n\"\\x{2039}\" =&gt; \"\\x8b\",\n\"\\x{0152}\" =&gt; \"\\x8c\",\n\"\\x{017d}\" =&gt; \"\\x8e\",\n\n\"\\x{2018}\" =&gt; \"\\x91\",\n\"\\x{2019}\" =&gt; \"\\x92\",\n\"\\x{201c}\" =&gt; \"\\x93\",\n\"\\x{201d}\" =&gt; \"\\x94\",\n\"\\x{2022}\" =&gt; \"\\x95\",\n\"\\x{2013}\" =&gt; \"\\x96\",\n\"\\x{2014}\" =&gt; \"\\x97\",\n\"\\x{02dc}\" =&gt; \"\\x98\",\n\"\\x{2122}\" =&gt; \"\\x99\",\n\"\\x{0161}\" =&gt; \"\\x9a\",\n\"\\x{203a}\" =&gt; \"\\x9b\",\n\"\\x{0153}\" =&gt; \"\\x9c\",\n\"\\x{017e}\" =&gt; \"\\x9e\",\n\"\\x{0178}\" =&gt; \"\\x9f\",\n);\nmy $re = join \"|\", keys %cp1252Encoding;\n$re = qr/$re/;\nmy %cp1252Decoding = reverse % cp1252Encoding;\nmy $cp1252Characters = join \"|\", keys %cp1252Decoding;\n\nsub decodeUtf8\n{\n    my ($str) = @_;\n\n    $str =~ s/$re/ $cp1252Encoding{$&amp;} /eg;\n    utf8::decode($str);\n    return $str;\n}\n\nsub fixString\n{\n    my ($str) = @_;\n\n    my $r = qr/[\\x80-\\xBF]|$re/;\n\n    my $current;\n    do {\n        $current = $str;\n\n        # If this matches, the string is likely double-encoded UTF-8. Try to decode\n        $str =~ s/[\\xF0-\\xF7]$r$r$r|[\\xE0-\\xEF]$r$r|[\\xC0-\\xDF]$r/ decodeUtf8($&amp;) /eg;\n\n    } while ($str ne $current);\n\n    # decodes any possible left-over cp1252 codes to Unicode\n    $str =~ s/$cp1252Characters/ $cp1252Decoding{$&amp;} /eg;\n    return $str;\n}\n</code></pre>\n\n<p>This has similar limitations as ikegami's answer, except that the same limitations are also applicable to UTF-8 encoded strings.</p>\n"}], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2991, "favorite_count": 3, "accepted_answer_id": 28681865, "answer_count": 3, "score": 12, "last_activity_date": 1512557895, "creation_date": 1424719982, "question_id": 28681864, "link": "https://stackoverflow.com/questions/28681864/fixing-a-file-consisting-of-both-utf-8-and-windows-1252", "title": "Fixing a file consisting of both UTF-8 and Windows-1252", "body": "<p>I have an application that produces a UTF-8 file, but some of the contents are incorrectly encoded. Some of the characters are encoded as iso-8859-1 aka iso-latin-1 or cp1252 aka Windows-1252. Is there a way of recovering the original text?</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "edited": false, "score": 1, "creation_date": 1424716551, "post_id": 28680682, "comment_id": 45654516, "body": "Check parentheses in regex."}, {"owner": {"reputation": 61610, "user_id": 725418, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/82ac2dc3e1ad4b7187f245c416528df9?s=128&d=identicon&r=PG", "display_name": "TLP", "link": "https://stackoverflow.com/users/725418/tlp"}, "edited": false, "score": 2, "creation_date": 1424717556, "post_id": 28680682, "comment_id": 45655069, "body": "The regex is doing exactly what you asked it to: It is matching digits <code>\\d+</code>, followed by <i>one</i> non-digit or star <code>[^\\d*]</code>, followed by digits <code>\\d+</code>. The only thing that matches that in your string is <code>204</code>."}], "answers": [{"tags": [], "owner": {"reputation": 2750, "user_id": 801553, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/74c6e34ee0ad953bb3079f5bb5cd9497?s=128&d=identicon&r=PG", "display_name": "Patrick J. S.", "link": "https://stackoverflow.com/users/801553/patrick-j-s"}, "is_accepted": false, "score": 0, "last_activity_date": 1424717545, "creation_date": 1424717545, "answer_id": 28681179, "question_id": 28680682, "link": "https://stackoverflow.com/questions/28680682/need-regular-expression-perl/28681179#28681179", "title": "Need Regular expression - perl", "body": "<p>I'd go with the second marker as indicator where you are in the string:</p>\n\n<pre><code>my ($num) = ($text =~ /(\\d+\\.\\d+)s/);\n</code></pre>\n\n<p>with explanations: </p>\n\n<pre><code>/(    # start of matching group\n \\d+  # first digits\n \\.   # a literal '.', take \\D if you want non-numbers\n \\d+  # second digits\n )/x  # close the matching group and the regex\n</code></pre>\n\n<p>You had the matching groups wrong. Also the <code>[^\\d]</code> is a bit excessive, generally you can negate some of the backspaced special classes (<code>\\d</code>,<code>\\h</code>, <code>\\s</code> and <code>\\w</code>) with their respective uppercase letter.</p>\n"}, {"comments": [{"owner": {"reputation": 61610, "user_id": 725418, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/82ac2dc3e1ad4b7187f245c416528df9?s=128&d=identicon&r=PG", "display_name": "TLP", "link": "https://stackoverflow.com/users/725418/tlp"}, "edited": false, "score": 0, "creation_date": 1424718245, "post_id": 28681313, "comment_id": 45655498, "body": "<code>[\\d]</code> better written as <code>\\D</code>. Also, this would match any series of digits followed by <code>s</code>."}], "tags": [], "owner": {"reputation": 109, "user_id": 4559065, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a01cb4f6fbf89c88c59fbf327c795c60?s=128&d=identicon&r=PG&f=1", "display_name": "Garry", "link": "https://stackoverflow.com/users/4559065/garry"}, "is_accepted": false, "score": 0, "last_activity_date": 1424717961, "creation_date": 1424717961, "answer_id": 28681313, "question_id": 28680682, "link": "https://stackoverflow.com/questions/28680682/need-regular-expression-perl/28681313#28681313", "title": "Need Regular expression - perl", "body": "<p>Try this regex:</p>\n\n<pre><code>$text =~ m/\\d+[^\\d]*(\\d+\\.?\\d*)s/;\n</code></pre>\n\n<p>That should match 1+ digits, a decimal point if there is one, 0 or more decimal places, and make sure it's followed by a \"s\".</p>\n"}, {"tags": [], "owner": {"reputation": 61610, "user_id": 725418, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/82ac2dc3e1ad4b7187f245c416528df9?s=128&d=identicon&r=PG", "display_name": "TLP", "link": "https://stackoverflow.com/users/725418/tlp"}, "is_accepted": true, "score": 4, "last_activity_date": 1424718129, "creation_date": 1424718129, "answer_id": 28681363, "question_id": 28680682, "link": "https://stackoverflow.com/questions/28680682/need-regular-expression-perl/28681363#28681363", "title": "Need Regular expression - perl", "body": "<p>The regex is doing exactly what you asked it to: It is matching digits <code>\\d+</code>, followed by <em>one</em> non-digit or star <code>[^\\d*]</code>, followed by digits <code>\\d+</code>. The only thing that matches that in your string is <code>204</code>. </p>\n\n<p>If you want a quick fix, you can just move the parentheses:</p>\n\n<pre><code>m/(\\d+[^\\d*]\\d+)/\n</code></pre>\n\n<p>This would (with the above input) match what you want. A more exact way to put it would be:</p>\n\n<pre><code>m/(\\d+\\.\\d+)/\n</code></pre>\n\n<p>Of course this will match any float precision number, so if you can have more of those, that's not a good idea. You can shore it up by using an anchor, like so:</p>\n\n<pre><code>m/(\\d+\\.\\d+)s\\)/\n</code></pre>\n\n<p>Where <code>s\\)</code> forces the match to occur at only that place. Further strictures:</p>\n\n<pre><code>m/\\(\\d+\\D+(\\d+\\.\\d+)s\\)/\n</code></pre>\n\n<p>You might also want to account for the possibility of your target number <em>not</em> being a float:</p>\n\n<pre><code>m/\\(\\d+\\D+(\\d+\\.?\\d*)s\\)/\n</code></pre>\n\n<p>By using <code>?</code> and <code>*</code> we allow for those parts not to match at all. This is not recommended to do unless you are using anchors. You can also replace everything in the capture group with <code>[\\d.]+</code>. </p>\n\n<p>If you are not fond of matching the parentheses, you can match the text:</p>\n\n<pre><code>m/bytes in ([\\d.]+)s/\n</code></pre>\n"}], "owner": {"reputation": 63, "user_id": 1362796, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/02bb7f5c866f43abb6e4b2fa62607521?s=128&d=identicon&r=PG", "display_name": "user1362796", "link": "https://stackoverflow.com/users/1362796/user1362796"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 55, "favorite_count": 0, "accepted_answer_id": 28681363, "answer_count": 3, "score": 0, "last_activity_date": 1424718129, "creation_date": 1424715836, "question_id": 28680682, "link": "https://stackoverflow.com/questions/28680682/need-regular-expression-perl", "title": "Need Regular expression - perl", "body": "<p>I am looking for a regx for below expression: </p>\n\n<pre><code>my $text = \"1170 KB/s (244475 bytes in 2.204s)\";  # I want to retrieve last \u20182.204\u2019 from this String.\n\n$text =~ m/\\d+[^\\d*](\\d+)/;   #Regexp\n\nmy $num = $1;\n\nprint \" $num \";\nOutput:\n204\n</code></pre>\n\n<p>But I need 2.204 as output, please correct me.\nCan any one help me out?</p>\n"}, {"tags": ["perl", "elasticsearch"], "answers": [{"comments": [{"owner": {"reputation": 59411, "user_id": 8355, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/8d0099a2574719d7a67eab012851bf9b?s=128&d=identicon&r=PG", "display_name": "cjm", "link": "https://stackoverflow.com/users/8355/cjm"}, "edited": false, "score": 0, "creation_date": 1424716454, "post_id": 28680128, "comment_id": 45654448, "body": "Thanks. I was going to ask if it&#39;s documented that you pass <code>handle_args</code> to <code>Search::Elasticsearch-&gt;new</code> and they get passed along to the <code>Cxn</code> object, but then I noticed that all the other configuration parameters defined in that role show an example of doing it that way.  I guess you&#39;re just supposed to assume that <code>handle_args</code> works the same way."}], "tags": [], "owner": {"reputation": 4116, "user_id": 4402825, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-3ESJ4SrCVfE/AAAAAAAAAAI/AAAAAAAAFO8/yBWcRYAN94s/photo.jpg?sz=128", "display_name": "Ben Grimm", "link": "https://stackoverflow.com/users/4402825/ben-grimm"}, "is_accepted": true, "score": 4, "last_activity_date": 1424714340, "last_edit_date": 1424714340, "creation_date": 1424713996, "answer_id": 28680128, "question_id": 28680001, "link": "https://stackoverflow.com/questions/28680001/how-do-i-set-the-http-user-agent-when-using-searchelasticsearch/28680128#28680128", "title": "How do I set the HTTP User-Agent when using Search::Elasticsearch?", "body": "<p>You can pass arguments to the <code>handle</code> constructor using <a href=\"https://metacpan.org/pod/Search::Elasticsearch::Role::Cxn#handle_args\" rel=\"nofollow\"><code>handle_args</code></a>. So for the default <a href=\"https://metacpan.org/pod/HTTP::Tiny\" rel=\"nofollow\"><code>HTTP::Tiny</code></a> you would use <code>agent</code>:</p>\n\n<pre><code>my $es = Search::Elasticsearch-&gt;new(\n  cxn_pool =&gt; 'Static::NoPing',\n  nodes    =&gt; 'api.metacpan.org:80',\n  handle_args =&gt; { agent =&gt; \"youragent/0.1\" },\n);\n</code></pre>\n"}], "owner": {"reputation": 59411, "user_id": 8355, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/8d0099a2574719d7a67eab012851bf9b?s=128&d=identicon&r=PG", "display_name": "cjm", "link": "https://stackoverflow.com/users/8355/cjm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 150, "favorite_count": 0, "accepted_answer_id": 28680128, "answer_count": 1, "score": 3, "last_activity_date": 1424714340, "creation_date": 1424713600, "question_id": 28680001, "link": "https://stackoverflow.com/questions/28680001/how-do-i-set-the-http-user-agent-when-using-searchelasticsearch", "title": "How do I set the HTTP User-Agent when using Search::Elasticsearch?", "body": "<p>I'm using <a href=\"https://metacpan.org/pod/Search::Elasticsearch\" rel=\"nofollow\">Search::Elasticsearch</a> to query <a href=\"https://github.com/CPAN-API/cpan-api/blob/master/docs/API-docs.md\" rel=\"nofollow\">MetaCPAN</a>.</p>\n\n<pre><code>my $es = Search::Elasticsearch-&gt;new(\n  cxn_pool =&gt; 'Static::NoPing',\n  nodes    =&gt; 'api.metacpan.org:80',\n);\n\nmy $scroller = $es-&gt;scroll_helper(\n  index       =&gt; 'v0',\n  type        =&gt; 'release',\n  search_type =&gt; 'scan',\n  scroll      =&gt; '2m',\n  size        =&gt; $size,\n  body        =&gt; {\n    fields =&gt; [qw(author archive date)],\n    query  =&gt; { range =&gt; { date =&gt; { gte =&gt; $date } } },\n  },\n);\n</code></pre>\n\n<p>This works ok, but I'd like to set the HTTP User-Agent header to a custom value so my requests can be identified if there's a problem.  How do I do that with Search::Elasticsearch?</p>\n"}, {"tags": ["perl", "hash", "matching", "fuzzy-search"], "answers": [{"comments": [{"owner": {"reputation": 387, "user_id": 3842777, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/bFxen.jpg?s=128&g=1", "display_name": "JDE876", "link": "https://stackoverflow.com/users/3842777/jde876"}, "edited": false, "score": 0, "creation_date": 1424729254, "post_id": 28679569, "comment_id": 45661664, "body": "this gave me a great idea to assign my values into a temp hash and modify that one while still returning the original. @rouzier"}, {"owner": {"reputation": 12075, "user_id": 1137055, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/59d7b43b9eb7d01bd8f7e51febe6053c?s=128&d=identicon&r=PG", "display_name": "dgw", "link": "https://stackoverflow.com/users/1137055/dgw"}, "edited": false, "score": 0, "creation_date": 1424730766, "post_id": 28679569, "comment_id": 45662381, "body": "Some general hints, please use <code>use strict;</code> and <code>use warnings;</code>. And use the three argument version of open with lexical filehandles and proper error handling <code>open my $filehandle , &#39;&lt;&#39; , $filename or die &quot;Cannot read &#39;$filename&#39;: $!&quot;;</code>"}, {"owner": {"reputation": 12075, "user_id": 1137055, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/59d7b43b9eb7d01bd8f7e51febe6053c?s=128&d=identicon&r=PG", "display_name": "dgw", "link": "https://stackoverflow.com/users/1137055/dgw"}, "edited": false, "score": 0, "creation_date": 1424730836, "post_id": 28679569, "comment_id": 45662406, "body": "Furthermore the <code>while</code> can be written more compact <code>while( my $line = &lt;$fh&gt;) {</code>."}, {"owner": {"reputation": 387, "user_id": 3842777, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/bFxen.jpg?s=128&g=1", "display_name": "JDE876", "link": "https://stackoverflow.com/users/3842777/jde876"}, "edited": false, "score": 0, "creation_date": 1426188078, "post_id": 28679569, "comment_id": 46280908, "body": "@rouzier what if this hash is opened from a file handle instead of in the code?"}, {"owner": {"reputation": 1090, "user_id": 905927, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/290786897f51fbd76a589169d2170607?s=128&d=identicon&r=PG", "display_name": "rouzier", "link": "https://stackoverflow.com/users/905927/rouzier"}, "reply_to_user": {"reputation": 387, "user_id": 3842777, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/bFxen.jpg?s=128&g=1", "display_name": "JDE876", "link": "https://stackoverflow.com/users/3842777/jde876"}, "edited": false, "score": 0, "creation_date": 1426263256, "post_id": 28679569, "comment_id": 46314767, "body": "@JDE876 Can you be more specific?  What is the format of this file?"}], "tags": [], "owner": {"reputation": 1090, "user_id": 905927, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/290786897f51fbd76a589169d2170607?s=128&d=identicon&r=PG", "display_name": "rouzier", "link": "https://stackoverflow.com/users/905927/rouzier"}, "is_accepted": true, "score": 1, "last_activity_date": 1424795418, "last_edit_date": 1424795418, "creation_date": 1424712217, "answer_id": 28679569, "question_id": 28678875, "link": "https://stackoverflow.com/questions/28678875/print-hash-keys-and-values-if-they-are-matched/28679569#28679569", "title": "print hash keys and values if they are matched", "body": "<p>A lot of time it is easier to prep your data ahead of time.\nTo make your code simpler later.</p>\n\n<p>Here is what I would do create a reverse hash of non-punctuation names to the id.</p>\n\n<p>When looping the file I just have to have to compare against my non-punctuation to id hash to find a match.</p>\n\n<p>Working example below</p>\n\n<pre><code>use strict;\nuse warnings;\nmy %id_to_name = (\n    12345  =&gt; 'JE Industries, Incorporated',\n    123355 =&gt; 'Josh Industries, Inc'\n);\n#Create a reverse map with out any punctuation\nmy %no_punc_name_to_id;\nwhile (my ($key, $value) = each %id_to_name) {\n    $value =~ s/[[:punct:]]//gi;\n    $no_punc_name_to_id{$value} = $key;\n}\nmy $filename = 'list.txt';\nopen my $fh , '&lt;' , $filename or die \"Cannot read '$filename': $!\";\n\nwhile(my $line = &lt;$fh&gt;)  {\n    chomp($line);\n    $line =~ s/[[:punct:]]//gi;\n    if(exists $no_punc_name_to_id{$line}) {\n        my $id = $no_punc_name_to_id{$line};\n        print $line,\",\",\"\\\"$id_to_name{$id}\\\"\",\",\",$id,\"\\n\";\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 387, "user_id": 3842777, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/bFxen.jpg?s=128&g=1", "display_name": "JDE876", "link": "https://stackoverflow.com/users/3842777/jde876"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 674, "favorite_count": 0, "accepted_answer_id": 28679569, "answer_count": 1, "score": 1, "last_activity_date": 1424795418, "creation_date": 1424710161, "question_id": 28678875, "link": "https://stackoverflow.com/questions/28678875/print-hash-keys-and-values-if-they-are-matched", "title": "print hash keys and values if they are matched", "body": "<p>I am trying to match a hash to file.  However, what I am searching for and the file are not an exact match due to punctuation and spaces.  For example, I might have \"JE Industries, Incorporated\" in my hash and \"JE Industries Incorporated\" in my file.  Those two will obviously not match because of the \",\", comma.</p>\n\n<p>So my solution is to have a hash, and a file and perform modifications on each one (replace punctuation in both file and hash values so 'JE Industries, Incorporated' will match 'JE Industries Incorporated', along with other sets of rules.)  As soon as the match is satisfied, go to the next item in the hash against the file.  If that that match is not satisfied, go to next rule \"elsif\", and try to match that, if it is satisfied, go to next item etc. I would also like to have an unmodified copy of the hash and line so that the original of each is not modified.  So basically only one rule is applied at a time.</p>\n\n<p>So I have been working on how to figure this out but my results are not what I want.</p>\n\n<p><strong>CODE</strong></p>\n\n<pre><code> open(my $fh, \"list.txt\");\n\n    while(&lt;$fh&gt;) {\n     my($line) = $_;\n     chomp($line);\n    my %hash = (\n        12345 =&gt; 'JE Industries, Incorporated',\n        123355 =&gt; 'Josh Industries, Inc'\n    );\n    while( my( $key, $value ) = each %hash ) {\n    if($value =~ s/[[:punct:]]//gi eq $line =~ s/[[:punct:]]//gi) {print $line,\",\",$key,\"\\n\";} #replace punctuation on both $line and $value to make them match##\n    elsif($value =~ s/[\\s]//gi eq $line =~ s/[\\s]//gi) {print $value,\",\",$key,\"\\n\";} ## if punctuation does not do it replace space##\n\n}\n}\n</code></pre>\n\n<p><strong>My file, list.txt</strong></p>\n\n<p>JE Industries Incorporated<br>\nJosh Industries Inc<br>\nJim bob &amp; co.  </p>\n\n<p><strong>My output</strong></p>\n\n<p>JE Industries Incorporated,123355<br>\nJosh Industries Inc,123355  </p>\n\n<p><strong>Desired output</strong></p>\n\n<p>JE Industries Incorporated,\"JE Industries, Incorporated\",12345<br>\nJosh Industries Inc,\"Josh Industries, Inc\",123355  </p>\n\n<p>original_Value_from_file,\"original_Value_from_hash\",corresponding keys to each  </p>\n\n<p>It is matching my items from hash to file, however, it is only assigning each value the last key from the hash.  Also, I am a little unsure how to print the original form of each line/hash along with the match results.  Also keep in mind, for the modifications, I want to modify them from the start for each rule.  In other words, where the second rule happens, \"$value =~ s/[\\s]//gi eq $line =~ s/[\\s]//gi\", I want to replace \\s in \"JE Industries, Incorporated\" not in \"JE Industries Incorporated.\"</p>\n\n<p>In the end I would like my result to be the original form of the match from the hash value, the original form of the $line value, and they corresponding hash key.  I will also be wanting to implement even more rules than just omitting punctuation and space to make a closer match.</p>\n"}, {"tags": ["perl", "encoding", "utf-8"], "comments": [{"owner": {"reputation": 1344, "user_id": 1117650, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/35f81dce5c694bee8aacb2a2d24b4757?s=128&d=identicon&r=PG", "display_name": "ynka", "link": "https://stackoverflow.com/users/1117650/ynka"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1424718384, "post_id": 28678390, "comment_id": 45655587, "body": "I guess I did not make myself clear. The original logs file is created by a black-box tool and I cannot help the characters being there. But then when my script is run (in a CI setting) IT (my script) contributes to build server logs being cluttered with my script&#39;s error message. So the error message is what I want to get rid of, I cannot influence the original log. Is this better? :)"}, {"owner": {"reputation": 1344, "user_id": 1117650, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/35f81dce5c694bee8aacb2a2d24b4757?s=128&d=identicon&r=PG", "display_name": "ynka", "link": "https://stackoverflow.com/users/1117650/ynka"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1424718963, "post_id": 28678390, "comment_id": 45655926, "body": "No. I am ok with one of two solutions (one already given below, I think): a) fix the character inside my script and process it correctly b) remove the error message (from my script&#39;s output = build server logs)."}], "answers": [{"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 3, "last_activity_date": 1424720119, "last_edit_date": 1495541189, "creation_date": 1424710855, "answer_id": 28679133, "question_id": 28678390, "link": "https://stackoverflow.com/questions/28678390/how-to-clear-non-utf-characters-while-reading-a-utf-8-file-in-perl/28679133#28679133", "title": "How to clear non-utf characters while reading a utf-8 file in Perl?", "body": "<p>You could do the decoding yourself instead of using the <code>:encoding</code> layer. By default, Encode's <code>decode</code> and <code>decode_utf8</code> simply exchange the bad character with U+FFFD rather than warning.</p>\n\n<pre><code>$ perl -e'\n   use Encode qw( decode_utf8 );\n   $bytes = \"\\xD0 \\x92 \\xD0\\x92\\n\";\n   $text = decode_utf8($bytes);\n   printf(\"U+%v04X\\n\", $text);\n'\nU+FFFD.0020.FFFD.0020.0412.000A\n</code></pre>\n\n<p>If the file is a mix of UTF-8, iso-8859-1 and cp1252, it may be possible to fix the file rather than simply silencing the errors, as detailed <a href=\"https://stackoverflow.com/q/28681864/589924\">here</a>.</p>\n"}], "owner": {"reputation": 1344, "user_id": 1117650, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/35f81dce5c694bee8aacb2a2d24b4757?s=128&d=identicon&r=PG", "display_name": "ynka", "link": "https://stackoverflow.com/users/1117650/ynka"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 962, "favorite_count": 0, "accepted_answer_id": 28679133, "answer_count": 1, "score": 1, "last_activity_date": 1424720119, "creation_date": 1424708788, "last_edit_date": 1424718519, "question_id": 28678390, "link": "https://stackoverflow.com/questions/28678390/how-to-clear-non-utf-characters-while-reading-a-utf-8-file-in-perl", "title": "How to clear non-utf characters while reading a utf-8 file in Perl?", "body": "<p>I am parsing a very large log file with Perl. \nThe code is:</p>\n\n<pre><code>open($input_handle, '&lt;:encoding(UTF-8)', $input_file);    \n\nwhile (&lt;$input_handle&gt;)  {                   \n...\n}\nclose($input_handle);    \n</code></pre>\n\n<p>However, sometimes the log file contains faulty characters, and I get the following message:</p>\n\n<pre><code>utf8 \"\\xD0\" does not map to Unicode at log_parser.pl line 32, &lt;$input_handle&gt; line 10920.\n</code></pre>\n\n<p>I am aware of the characters and I would just like to ignore them without the log message flooding my (Windows!) build server logs. I tried <code>no warnings 'utf8';</code> but it did not help. </p>\n\n<p>How can I suppress the message?</p>\n"}, {"tags": ["perl", "try-catch"], "comments": [{"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1424708881, "post_id": 28678373, "comment_id": 45649907, "body": "Do you need to <code>rsh</code> to use <code>wmic</code>? Can you not use <code>&#47;node:host</code> instead?"}, {"owner": {"reputation": 73, "user_id": 1535468, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/32f5c.jpg?s=128&g=1", "display_name": "broncofan7", "link": "https://stackoverflow.com/users/1535468/broncofan7"}, "reply_to_user": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1424709346, "post_id": 28678373, "comment_id": 45650246, "body": "I am not familiar with /node:host.  A quick google search didn&#39;t turn anything up.  Do you have a link with more details?"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1424709748, "post_id": 28678373, "comment_id": 45650484, "body": "Try <code>help wmic</code>: <code>&#47;NODE  Servers the alias will operate against.</code>. E.g. <code>wmic &#47;node:localhost partition get</code>"}, {"owner": {"reputation": 73, "user_id": 1535468, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/32f5c.jpg?s=128&g=1", "display_name": "broncofan7", "link": "https://stackoverflow.com/users/1535468/broncofan7"}, "reply_to_user": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1424710328, "post_id": 28678373, "comment_id": 45650868, "body": "Unfortunately the host running the script is a linux box, so running it this way is not an option.  I am trying to run a remote command from Linux to a Windows box."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 1, "creation_date": 1424711297, "post_id": 28678373, "comment_id": 45651528, "body": "I think the answer to your problem would therefore lie in &#39;how does your rsh do it&#39;? Because that&#39;s an imported function, not a built in. <code>Try::Tiny</code> doesn&#39;t seem necessary if your rsh isn&#39;t <code>die</code>ing."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1424721660, "post_id": 28678373, "comment_id": 45657538, "body": "Try::Tiny doesn&#39;t loop. It calls the block once and only once. I don&#39;t believe you are having the problem you claim to be having."}, {"owner": {"reputation": 73, "user_id": 1535468, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/32f5c.jpg?s=128&g=1", "display_name": "broncofan7", "link": "https://stackoverflow.com/users/1535468/broncofan7"}, "edited": false, "score": 0, "creation_date": 1462372869, "post_id": 28678373, "comment_id": 61612037, "body": "Turns out the rsh client is an in-house module and the default behavior is to retry indefinitely.  (poor design) After calling out a retry limit, the script will eventually fail after a couple retries."}], "answers": [{"comments": [{"owner": {"reputation": 73, "user_id": 1535468, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/32f5c.jpg?s=128&g=1", "display_name": "broncofan7", "link": "https://stackoverflow.com/users/1535468/broncofan7"}, "edited": false, "score": 0, "creation_date": 1424710293, "post_id": 28678781, "comment_id": 45650829, "body": "Unfortunately the host running the script is a linux box, so running it this way is not an option.  I am trying to run a remote command from Linux to a Windows box."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "reply_to_user": {"reputation": 73, "user_id": 1535468, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/32f5c.jpg?s=128&g=1", "display_name": "broncofan7", "link": "https://stackoverflow.com/users/1535468/broncofan7"}, "edited": false, "score": 0, "creation_date": 1424710324, "post_id": 28678781, "comment_id": 45650864, "body": "Are you running an <code>rshd</code> on your Windows host then? That&#39;s unusual."}, {"owner": {"reputation": 73, "user_id": 1535468, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/32f5c.jpg?s=128&g=1", "display_name": "broncofan7", "link": "https://stackoverflow.com/users/1535468/broncofan7"}, "edited": false, "score": 0, "creation_date": 1424710768, "post_id": 28678781, "comment_id": 45651174, "body": "Yes.  I am part of MegaCorp and this is how their automation is implemented with Windows boxes."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "reply_to_user": {"reputation": 73, "user_id": 1535468, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/32f5c.jpg?s=128&g=1", "display_name": "broncofan7", "link": "https://stackoverflow.com/users/1535468/broncofan7"}, "edited": false, "score": 1, "creation_date": 1424712125, "post_id": 28678781, "comment_id": 45652041, "body": "Related point then - why are you using <code>Try::Tiny</code> at all? Does your <code>rsh</code> function die when it fails? You don&#39;t seem to have a <code>catch</code> block either, which&#39;d be normal."}], "tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": false, "score": 0, "last_activity_date": 1424709926, "creation_date": 1424709926, "answer_id": 28678781, "question_id": 28678373, "link": "https://stackoverflow.com/questions/28678373/perl-trytiny-stuck-in-loop/28678781#28678781", "title": "Perl Try::Tiny stuck in Loop", "body": "<p>I think your best solution would be to not use <code>rsh</code> to run wmic, and instead use the built in remote access mechanism <code>/node</code></p>\n\n<pre><code>C:\\Users\\ME&gt;wmic /node:localhost memphysical get MaxCapacity\nMaxCapacity\n4194304\n\n\nC:\\Users\\ME&gt;wmic /node:narf memphysical get MaxCapacity\nNode - narf\nERROR:\nDescription = The RPC server is unavailable.\n</code></pre>\n\n<p>And then you won't need to do anything like running <code>rsh</code> or <code>try</code>. You can simply trap error levels in the 'usual way'. (<code>$?</code> in your perl client)</p>\n\n<pre><code>C:\\Users\\ME&gt;wmic /?\n\n[global switches] &lt;command&gt;\n\nThe following global switches are available:\n/NAMESPACE           Path for the namespace the alias operate against.\n/ROLE                Path for the role containing the alias definitions.\n/NODE                Servers the alias will operate against.\n</code></pre>\n"}], "owner": {"reputation": 73, "user_id": 1535468, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/32f5c.jpg?s=128&g=1", "display_name": "broncofan7", "link": "https://stackoverflow.com/users/1535468/broncofan7"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 101, "favorite_count": 1, "answer_count": 1, "score": -1, "last_activity_date": 1424709926, "creation_date": 1424708749, "last_edit_date": 1424708832, "question_id": 28678373, "link": "https://stackoverflow.com/questions/28678373/perl-trytiny-stuck-in-loop", "title": "Perl Try::Tiny stuck in Loop", "body": "<p>I am using a Try::Tiny statement to avoid failing if I can't rsh to a host.  But it seems that the rsh is getting retried indefinitely.  </p>\n\n<p>In this particular case, Host2 went down, and the code just repeatedly attempted to contact Host2 until I cancelled execution with CTRL+C.  What I am expecting is for Host2 rsh command to fail, and the script to move on to Host3.</p>\n\n<p>Any idea of why this doesn't work and how I could do it differently?</p>\n\n<pre><code>@Win_Clients = (\"Host1\",\"Host2\",\"Host2\");\n\nforeach $Win_Client (@Win_Clients){\n    try {\n        @mem= rsh ($Win_Client, \"wmic memphysical get MaxCapacity\");\n        print \"host=$Win_Client, mem=$mem\";\n    };\n}\n</code></pre>\n"}, {"tags": ["algorithm", "perl", "sorting", "hash", "integer"], "comments": [{"owner": {"reputation": 2093, "user_id": 2926103, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/dggRI.jpg?s=128&g=1", "display_name": "\u1e1e\u1e39&#225;\u1e3f&#237;\u1e45\u1e21 \u2c6b\u1ecf\u1e3f\u0180&#237;&#233;", "link": "https://stackoverflow.com/users/2926103/%e1%b8%9e%e1%b8%b9%c3%a1%e1%b8%bf%c3%ad%e1%b9%85%e1%b8%a1-%e2%b1%ab%e1%bb%8f%e1%b8%bf%c6%80%c3%ad%c3%a9"}, "edited": false, "score": 4, "creation_date": 1424706083, "post_id": 28677415, "comment_id": 45647993, "body": "What is the question?"}], "answers": [{"tags": [], "owner": {"reputation": 1748, "user_id": 4532614, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f230595feac883e1643f5ba43084e895?s=128&d=identicon&r=PG&f=1", "display_name": "TobyLL", "link": "https://stackoverflow.com/users/4532614/tobyll"}, "is_accepted": false, "score": 0, "last_activity_date": 1424706543, "creation_date": 1424706543, "answer_id": 28677634, "question_id": 28677415, "link": "https://stackoverflow.com/questions/28677415/perl-ranking-numbers-with-tie-draws/28677634#28677634", "title": "perl ranking numbers with tie / draws", "body": "<p>How about this:</p>\n\n<pre><code>use strict;\n\nmy @test = (100,200,200,200,300,400,500,500,1000,2000);\nmy @sorted = sort {$a &lt;=&gt; $b} @test;\nmy $rank = 1;\nmy @ranks;\nforeach my $count (0..$#sorted) {\n    $rank = $count + 1 if ($count &gt; 0 &amp;&amp; $sorted[$count] != $sorted[$count - 1]);\n    push @ranks, $rank;\n}\n\nprint join \",\", @ranks;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "is_accepted": true, "score": 1, "last_activity_date": 1424707783, "last_edit_date": 1424707783, "creation_date": 1424707374, "answer_id": 28677919, "question_id": 28677415, "link": "https://stackoverflow.com/questions/28677415/perl-ranking-numbers-with-tie-draws/28677919#28677919", "title": "perl ranking numbers with tie / draws", "body": "<p>You can use hash to remember positions for repeating values in <code>@integers</code> array,</p>\n\n<pre><code>use strict;\nuse warnings;\n\nmy @integers = sort {$a &lt;=&gt; $b} (100,200,200,200,300,400,500,500,1000,2000);\n\nmy %seen;\nmy @rank = map { $seen{$integers[$_]} //= $_+1 } 0 .. $#integers;\n\n# same as\n# my @rank = map { $seen{$integers[$_]} //= $_+1; $seen{$integers[$_]} } 0 .. $#integers;\n\nuse Data::Dumper; print Dumper \\@rank;\n</code></pre>\n\n<p>output</p>\n\n<pre><code>$VAR1 = [\n      1,\n      2,\n      2,\n      2,\n      5,\n      6,\n      7,\n      7,\n      9,\n      10\n    ];\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 2417072, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b0b29eedd3aa6912959817a73f80748f?s=128&d=identicon&r=PG", "display_name": "Zubinn Tan", "link": "https://stackoverflow.com/users/2417072/zubinn-tan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 426, "favorite_count": 0, "accepted_answer_id": 28677919, "answer_count": 2, "score": -3, "last_activity_date": 1424707783, "creation_date": 1424705861, "last_edit_date": 1424706167, "question_id": 28677415, "link": "https://stackoverflow.com/questions/28677415/perl-ranking-numbers-with-tie-draws", "title": "perl ranking numbers with tie / draws", "body": "<p>I have an array of integers,  but this is not the typical ranking of 1,2,3,4,5 etc.  If the integers have the same value, the rank is also the same value.  Example 1,2,2,4,5.  However we need to pad the ranks out accordingly. So skip rank 3 because there are two 2's.</p>\n\n<p>1,2,3,3,5 instead of 1,2,3,3,4</p>\n\n<p>The array of integers can be a few thousands,  so an efficient algorithm would be ideal.  Best if it can be written in perl as a function which can be given an input.</p>\n\n<p>array of integers = 1000,2000,3000,3000,3500</p>\n\n<p>would get the result = 1,2,3,3,5</p>\n\n<p>another example</p>\n\n<p>integers = 100,200,200,200,300,400,500,500,1000,2000 </p>\n\n<p>rank = 1,2,2,2,5,6,7,7,9,10</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 2, "creation_date": 1424692805, "post_id": 28672813, "comment_id": 45639968, "body": "What is the <code>append</code> function?"}], "answers": [{"comments": [{"owner": {"reputation": 63, "user_id": 3224025, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/31b42996f7e5b52406537772ec5da02d?s=128&d=identicon&r=PG&f=1", "display_name": "user3224025", "link": "https://stackoverflow.com/users/3224025/user3224025"}, "edited": false, "score": 0, "creation_date": 1424717353, "post_id": 28673276, "comment_id": 45654932, "body": "Thanks, split works in perl script, and for other script regex is good option,"}], "tags": [], "owner": {"reputation": 5923, "user_id": 2105156, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/oRMc0.jpg?s=128&g=1", "display_name": "fugu", "link": "https://stackoverflow.com/users/2105156/fugu"}, "is_accepted": false, "score": 1, "last_activity_date": 1424692660, "creation_date": 1424692660, "answer_id": 28673276, "question_id": 28672813, "link": "https://stackoverflow.com/questions/28672813/extract-all-occurrence-of-string-from-a-array-of-strings-before-in-perl-scri/28673276#28673276", "title": "Extract all occurrence of string from a array of strings before &quot;-&quot; in perl script", "body": "<p>I would use split to separate each element into an array, containing characters before the <code>-</code> in <code>$split[0]</code> and characters after in <code>$split[1]</code>. \nYou can then print these out. I've included an if statement after the print to only print the numbers if both <code>$split[0]</code> and <code>$split[1]</code> exist.     </p>\n\n<pre><code>#!/usr/bin/perl\nuse warnings;\nuse strict; \n\nmy @str = qw(100002098-2 0004184022-2 66680-2 1247764-2 843804-0 1234 -5678);  \nforeach (@str){\n    my @split = split(/-/);\n    print \"$split[0]\\n\" if $split[0] and $split[1];\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 0, "creation_date": 1424704565, "post_id": 28673384, "comment_id": 45647058, "body": "don&#39;t take away /s; if there is a newline after the -, it will certainly be wanted.  and your suggestion with /r works differently than your one without /r if - is the first character."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "reply_to_user": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 0, "creation_date": 1424704917, "post_id": 28673384, "comment_id": 45647251, "body": "Fair points. I was focussing on the source data provided, but some test cases for things of different formats would be relevant."}, {"owner": {"reputation": 63, "user_id": 3224025, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/31b42996f7e5b52406537772ec5da02d?s=128&d=identicon&r=PG&f=1", "display_name": "user3224025", "link": "https://stackoverflow.com/users/3224025/user3224025"}, "edited": false, "score": 0, "creation_date": 1424717424, "post_id": 28673384, "comment_id": 45654984, "body": "Thanks, this solution regex is good for any script, not only perl."}, {"owner": {"reputation": 63, "user_id": 3224025, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/31b42996f7e5b52406537772ec5da02d?s=128&d=identicon&r=PG&f=1", "display_name": "user3224025", "link": "https://stackoverflow.com/users/3224025/user3224025"}, "edited": false, "score": 0, "creation_date": 1424733657, "post_id": 28673384, "comment_id": 45663636, "body": "and for excecution of url on browser, i used as below:  $urluncomplete = &#39;<a href=\"http://www.example.com/\" rel=\"nofollow noreferrer\">example.com</a>&#39; ;   my $url = ($urluncomplete.$arr);   \t  open_browser($url);"}], "tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": false, "score": 7, "last_activity_date": 1424693269, "last_edit_date": 1424693269, "creation_date": 1424692947, "answer_id": 28673384, "question_id": 28672813, "link": "https://stackoverflow.com/questions/28672813/extract-all-occurrence-of-string-from-a-array-of-strings-before-in-perl-scri/28673384#28673384", "title": "Extract all occurrence of string from a array of strings before &quot;-&quot; in perl script", "body": "<p>You're close.</p>\n\n<p>You don't need <code>sr</code> as regex modifiers. I had to go look what <code>r</code> did: </p>\n\n<blockquote>\n  <p>r  - perform non-destructive substitution and return the new value </p>\n</blockquote>\n\n<p><a href=\"http://perldoc.perl.org/perlre.html#Modifiers\">http://perldoc.perl.org/perlre.html#Modifiers</a></p>\n\n<p>Which will - in this case - mean your 'if' statement is testing the result of the regular expression, but you're NOT actually changing your <code>$arr</code>.*</p>\n\n<p><code>s</code> looks irrelevant too, but isn't what's causing your problem:</p>\n\n<blockquote>\n  <p>s\n  Treat string as single line. That is, change \".\" to match any character whatsoever, even a newline, which normally it would not match.</p>\n</blockquote>\n\n<p>So this should work:</p>\n\n<pre><code>my @str = (\"100002098-2\",\"0004184022-2\",\"66680-2\",\"1247764-2\", \"843804-0\");  \nforeach my $arr(@str){  \n    if($arr =~ s/-.*//){  \n        print $arr. \"\\n\";  \n    }  \n}\n</code></pre>\n\n<p>Also - appending in perl is done with <code>.</code>.</p>\n\n<p>E.g. <code>print $url.$arr</code> or just stringifying: <code>print \"$url/$arr\\n\";</code></p>\n\n<p>* for the sake of interest, you can make this work with <code>r</code> modifier on your regex:</p>\n\n<pre><code>my @str = (\"100002098-2\",\"0004184022-2\",\"66680-2\",\"1247764-2\", \"843804-0\");  \nforeach my $arr(@str){  \n    if(my $new_arr = $arr =~ s/-.*//sr){  \n        print $new_arr. \"\\n\";  \n    }  \n}\n</code></pre>\n\n<p>But I'd suggest that's redundant, unless you particularly want to keep the old value of <code>$arr</code>. </p>\n"}, {"tags": [], "owner": {"reputation": 804, "user_id": 1210825, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/H0lE8.png?s=128&g=1", "display_name": "Sascha", "link": "https://stackoverflow.com/users/1210825/sascha"}, "is_accepted": false, "score": 0, "last_activity_date": 1424695382, "creation_date": 1424695382, "answer_id": 28674090, "question_id": 28672813, "link": "https://stackoverflow.com/questions/28672813/extract-all-occurrence-of-string-from-a-array-of-strings-before-in-perl-scri/28674090#28674090", "title": "Extract all occurrence of string from a array of strings before &quot;-&quot; in perl script", "body": "<p>Just because there is always more than one way to do it. If you don't want to change the $arr. This code ...</p>\n\n<pre><code>my @str = (\"100002098-2\",\"0004184022-2\",\"66680-2\",\"1247764-2\", \"843804-0\");  \nforeach my $arr(@str){  \n    if($arr =~ m/(.*)-.*/){  \n        print \"untouched: \". $arr. \"\\n\";  \n        print \"extracted: \" .$1. \"\\n\";  \n    }  \n}\n</code></pre>\n\n<p>... gives you ... </p>\n\n<pre><code>untouched: 100002098-2\nextracted: 100002098\nuntouched: 0004184022-2\nextracted: 0004184022\nuntouched: 66680-2\nextracted: 66680\nuntouched: 1247764-2\nextracted: 1247764\nuntouched: 843804-0\nextracted: 843804\n</code></pre>\n"}], "owner": {"reputation": 63, "user_id": 3224025, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/31b42996f7e5b52406537772ec5da02d?s=128&d=identicon&r=PG&f=1", "display_name": "user3224025", "link": "https://stackoverflow.com/users/3224025/user3224025"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 240, "favorite_count": 0, "answer_count": 3, "score": 3, "last_activity_date": 1424695382, "creation_date": 1424691177, "question_id": 28672813, "link": "https://stackoverflow.com/questions/28672813/extract-all-occurrence-of-string-from-a-array-of-strings-before-in-perl-scri", "title": "Extract all occurrence of string from a array of strings before &quot;-&quot; in perl script", "body": "<p>I need to extract all strings before -*,<br>\ne.g. 100002098 and 0004184022 and 66680 and 1247764 and 843804 and append into a url \"www.xyz.com/mystring\"</p>\n\n<p>for that i have written below perl code but i am missing something in regular expression, can anybody help me in this  </p>\n\n<pre><code>my @str = (\"100002098-2\",\"0004184022-2\",\"66680-2\",\"1247764-2\", \"843804-0\");  \nforeach my $arr(@str){  \n    if($arr =~ s/-.*//sr){  \n        #url = append(url+$arr);\n        print $arr. \"\\n\";  \n    }  \n}\n</code></pre>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1424679188, "post_id": 28669277, "comment_id": 45632724, "body": "If you have a problem with your Perl program then you should show it and describe what is going wrong. Your problem is unclear. Are you saying that <code>nameofdevice</code> should be <code>nameofdevice.CFG</code>? In which case, why can&#39;t the lines just be corrected instead of deleting them? I assume you want the entire block deleted up to the next blank line? It would help if you showed some valid data as well as the erroneous entries."}, {"owner": {"reputation": 159902, "user_id": 3297613, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/KHhzd.jpg?s=128&g=1", "display_name": "Avinash Raj", "link": "https://stackoverflow.com/users/3297613/avinash-raj"}, "edited": false, "score": 0, "creation_date": 1424679198, "post_id": 28669277, "comment_id": 45632727, "body": "you mean this <code>sed &#39;&#47;\\bnameofdevice\\b&#47;d&#39; file</code>"}, {"owner": {"reputation": 769, "user_id": 716031, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/eafc0eed89fca48c30c41364ff2f3eb9?s=128&d=identicon&r=PG&f=1", "display_name": "Kirs Kringle", "link": "https://stackoverflow.com/users/716031/kirs-kringle"}, "edited": false, "score": 0, "creation_date": 1424679439, "post_id": 28669277, "comment_id": 45632851, "body": "I need to delete those lines from every files.  They are exactly the same besides the device name"}], "answers": [{"comments": [{"owner": {"reputation": 769, "user_id": 716031, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/eafc0eed89fca48c30c41364ff2f3eb9?s=128&d=identicon&r=PG&f=1", "display_name": "Kirs Kringle", "link": "https://stackoverflow.com/users/716031/kirs-kringle"}, "edited": false, "score": 0, "creation_date": 1424679826, "post_id": 28669376, "comment_id": 45633025, "body": "But I need to remove the bad lines from every CFG not remove the name"}, {"owner": {"reputation": 769, "user_id": 716031, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/eafc0eed89fca48c30c41364ff2f3eb9?s=128&d=identicon&r=PG&f=1", "display_name": "Kirs Kringle", "link": "https://stackoverflow.com/users/716031/kirs-kringle"}, "edited": false, "score": 0, "creation_date": 1424679854, "post_id": 28669376, "comment_id": 45633036, "body": "That is the entire block above needs to be removed if it exists in the file"}, {"owner": {"reputation": 658023, "user_id": 548225, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/dab08478b226280d4a30894c9a7ed719?s=128&d=identicon&r=PG", "display_name": "anubhava", "link": "https://stackoverflow.com/users/548225/anubhava"}, "reply_to_user": {"reputation": 769, "user_id": 716031, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/eafc0eed89fca48c30c41364ff2f3eb9?s=128&d=identicon&r=PG&f=1", "display_name": "Kirs Kringle", "link": "https://stackoverflow.com/users/716031/kirs-kringle"}, "edited": false, "score": 1, "creation_date": 1424681302, "post_id": 28669376, "comment_id": 45633639, "body": "Did you check my <code>grep -v</code> command which prints all but matching lines on output"}], "tags": [], "owner": {"reputation": 658023, "user_id": 548225, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/dab08478b226280d4a30894c9a7ed719?s=128&d=identicon&r=PG", "display_name": "anubhava", "link": "https://stackoverflow.com/users/548225/anubhava"}, "is_accepted": false, "score": 1, "last_activity_date": 1424679668, "last_edit_date": 1424679668, "creation_date": 1424679272, "answer_id": 28669376, "question_id": 28669277, "link": "https://stackoverflow.com/questions/28669277/matching-some-lines-and-deleting-them-with-perl/28669376#28669376", "title": "Matching some lines and deleting them with Perl", "body": "<p>Using <code>grep -P</code> (PCRE):</p>\n\n<pre><code>grep -P 'nameofdevice(?!\\.CFG)' file\n</code></pre>\n\n<p>To skip these lines:</p>\n\n<pre><code>grep -v -P 'nameofdevice(?!\\.CFG)' file &gt; tmpFile\nmv tmpFIle file\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 769, "user_id": 716031, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/eafc0eed89fca48c30c41364ff2f3eb9?s=128&d=identicon&r=PG&f=1", "display_name": "Kirs Kringle", "link": "https://stackoverflow.com/users/716031/kirs-kringle"}, "edited": false, "score": 0, "creation_date": 1424680226, "post_id": 28669447, "comment_id": 45633177, "body": "I suppose I don&#39;t understand how this removes the entire block of text above?"}, {"owner": {"reputation": 46944, "user_id": 3764814, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d02a4923abd2ca6d7593f031e4222c2?s=128&d=identicon&r=PG", "display_name": "Lucas Trzesniewski", "link": "https://stackoverflow.com/users/3764814/lucas-trzesniewski"}, "reply_to_user": {"reputation": 769, "user_id": 716031, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/eafc0eed89fca48c30c41364ff2f3eb9?s=128&d=identicon&r=PG&f=1", "display_name": "Kirs Kringle", "link": "https://stackoverflow.com/users/716031/kirs-kringle"}, "edited": false, "score": 0, "creation_date": 1424680297, "post_id": 28669447, "comment_id": 45633206, "body": "I commented the Perl script - what&#39;s the part you don&#39;t understand?"}, {"owner": {"reputation": 769, "user_id": 716031, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/eafc0eed89fca48c30c41364ff2f3eb9?s=128&d=identicon&r=PG&f=1", "display_name": "Kirs Kringle", "link": "https://stackoverflow.com/users/716031/kirs-kringle"}, "edited": false, "score": 0, "creation_date": 1424680569, "post_id": 28669447, "comment_id": 45633327, "body": "Where is it seeing the above block or is the regex removing that?  I need to get rid of the entire block of text above but in every file the device name is there so it is changing."}, {"owner": {"reputation": 769, "user_id": 716031, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/eafc0eed89fca48c30c41364ff2f3eb9?s=128&d=identicon&r=PG&f=1", "display_name": "Kirs Kringle", "link": "https://stackoverflow.com/users/716031/kirs-kringle"}, "edited": false, "score": 0, "creation_date": 1424680617, "post_id": 28669447, "comment_id": 45633350, "body": "I just suck as asking questions."}, {"owner": {"reputation": 46944, "user_id": 3764814, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d02a4923abd2ca6d7593f031e4222c2?s=128&d=identicon&r=PG", "display_name": "Lucas Trzesniewski", "link": "https://stackoverflow.com/users/3764814/lucas-trzesniewski"}, "reply_to_user": {"reputation": 769, "user_id": 716031, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/eafc0eed89fca48c30c41364ff2f3eb9?s=128&d=identicon&r=PG&f=1", "display_name": "Kirs Kringle", "link": "https://stackoverflow.com/users/716031/kirs-kringle"}, "edited": false, "score": 0, "creation_date": 1424680751, "post_id": 28669447, "comment_id": 45633405, "body": "It removes all lines that contain the file name without the <code>.cfg</code>. Isn&#39;t that what you asked, or did I miss something? You didn&#39;t say anything about a <i>block</i> in your question."}, {"owner": {"reputation": 769, "user_id": 716031, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/eafc0eed89fca48c30c41364ff2f3eb9?s=128&d=identicon&r=PG&f=1", "display_name": "Kirs Kringle", "link": "https://stackoverflow.com/users/716031/kirs-kringle"}, "edited": false, "score": 0, "creation_date": 1424681593, "post_id": 28669447, "comment_id": 45633755, "body": "&quot;The bad lines&quot; I Need to remove from every CFG."}, {"owner": {"reputation": 46944, "user_id": 3764814, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d02a4923abd2ca6d7593f031e4222c2?s=128&d=identicon&r=PG", "display_name": "Lucas Trzesniewski", "link": "https://stackoverflow.com/users/3764814/lucas-trzesniewski"}, "reply_to_user": {"reputation": 769, "user_id": 716031, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/eafc0eed89fca48c30c41364ff2f3eb9?s=128&d=identicon&r=PG&f=1", "display_name": "Kirs Kringle", "link": "https://stackoverflow.com/users/716031/kirs-kringle"}, "edited": false, "score": 0, "creation_date": 1424682903, "post_id": 28669447, "comment_id": 45634406, "body": "Yes, that&#39;s exactly what the one-liner does :) (or I didn&#39;t understand the question). Did you try it?"}, {"owner": {"reputation": 769, "user_id": 716031, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/eafc0eed89fca48c30c41364ff2f3eb9?s=128&d=identicon&r=PG&f=1", "display_name": "Kirs Kringle", "link": "https://stackoverflow.com/users/716031/kirs-kringle"}, "edited": false, "score": 0, "creation_date": 1424683323, "post_id": 28669447, "comment_id": 45634648, "body": "Okay will this just execute in the directory I run it in. This is important."}, {"owner": {"reputation": 769, "user_id": 716031, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/eafc0eed89fca48c30c41364ff2f3eb9?s=128&d=identicon&r=PG&f=1", "display_name": "Kirs Kringle", "link": "https://stackoverflow.com/users/716031/kirs-kringle"}, "edited": false, "score": 0, "creation_date": 1424684240, "post_id": 28669447, "comment_id": 45635158, "body": "I&#39;m just nervous because the above lines exist in the CFGs, but are filled out with target lines and such"}, {"owner": {"reputation": 46944, "user_id": 3764814, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d02a4923abd2ca6d7593f031e4222c2?s=128&d=identicon&r=PG", "display_name": "Lucas Trzesniewski", "link": "https://stackoverflow.com/users/3764814/lucas-trzesniewski"}, "reply_to_user": {"reputation": 769, "user_id": 716031, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/eafc0eed89fca48c30c41364ff2f3eb9?s=128&d=identicon&r=PG&f=1", "display_name": "Kirs Kringle", "link": "https://stackoverflow.com/users/716031/kirs-kringle"}, "edited": false, "score": 1, "creation_date": 1424684601, "post_id": 28669447, "comment_id": 45635334, "body": "This will execute in the current directory <b>and</b> all subdirectories (add <code>-maxdepth 1</code> after <code>find</code> if you need only the current directory). And <b>always do a backup of your files before doing a mass update operation like this one</b>."}], "tags": [], "owner": {"reputation": 46944, "user_id": 3764814, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d02a4923abd2ca6d7593f031e4222c2?s=128&d=identicon&r=PG", "display_name": "Lucas Trzesniewski", "link": "https://stackoverflow.com/users/3764814/lucas-trzesniewski"}, "is_accepted": true, "score": 2, "last_activity_date": 1424680034, "last_edit_date": 1424680034, "creation_date": 1424679637, "answer_id": 28669447, "question_id": 28669277, "link": "https://stackoverflow.com/questions/28669277/matching-some-lines-and-deleting-them-with-perl/28669447#28669447", "title": "Matching some lines and deleting them with Perl", "body": "<p>This will do the trick (although I believe there's a more efficient way to do this):</p>\n\n<pre><code>find -iname '*.cfg' -execdir perl -i -ne '$f = $ARGV =~ s#\\./|\\.cfg##gr; print if !m/\\b\\Q$f\\E\\b/;' {} \\+\n</code></pre>\n\n<p>If you're on windows, you need to provide a backup file name for the <em>inplace</em> (<code>-i</code>) feature:</p>\n\n<pre><code>find -iname '*.cfg' -execdir perl -ibak -ne '$f = $ARGV =~ s#\\./|\\.cfg##gr; print if !m/\\b\\Q$f\\E\\b/;' {} \\+ &amp;&amp; find -iname '*.cfgbak' -delete\n</code></pre>\n\n<p><code>find -iname '*.cfg'</code> finds every <code>.cfg</code> file in the current directory and all subdirectories.</p>\n\n<p>The Perl script is:</p>\n\n<pre><code># there's an implied while(&lt;&gt;) because of the -n option\n# which executes this script for each line\n\n# $ARGV is the current file path, strip ./ and .cfg\n$f = $ARGV =~ s#\\./|\\.cfg##gr;\n\n# print the current line if it doesn't contain the current file name\n# as a whole word\nprint if !m/\\b\\Q$f\\E\\b/;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 769, "user_id": 716031, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/eafc0eed89fca48c30c41364ff2f3eb9?s=128&d=identicon&r=PG&f=1", "display_name": "Kirs Kringle", "link": "https://stackoverflow.com/users/716031/kirs-kringle"}, "edited": false, "score": 0, "creation_date": 1424682880, "post_id": 28670111, "comment_id": 45634395, "body": "I need to delete this block of text above &quot;The Bad Lines&quot; not remove the name."}, {"owner": {"reputation": 769, "user_id": 716031, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/eafc0eed89fca48c30c41364ff2f3eb9?s=128&d=identicon&r=PG&f=1", "display_name": "Kirs Kringle", "link": "https://stackoverflow.com/users/716031/kirs-kringle"}, "edited": false, "score": 0, "creation_date": 1424682904, "post_id": 28670111, "comment_id": 45634407, "body": "Basically I need to load the file and see if it contains the above bad lines and if it does delete them."}, {"owner": {"reputation": 769, "user_id": 716031, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/eafc0eed89fca48c30c41364ff2f3eb9?s=128&d=identicon&r=PG&f=1", "display_name": "Kirs Kringle", "link": "https://stackoverflow.com/users/716031/kirs-kringle"}, "edited": false, "score": 0, "creation_date": 1424682936, "post_id": 28670111, "comment_id": 45634424, "body": "Although in each file the bad lines contain the name of each file"}, {"owner": {"reputation": 3751, "user_id": 2991627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b1bf3f42fc00dd825eda62f1df4fa304?s=128&d=identicon&r=PG", "display_name": "JJoao", "link": "https://stackoverflow.com/users/2991627/jjoao"}, "reply_to_user": {"reputation": 769, "user_id": 716031, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/eafc0eed89fca48c30c41364ff2f3eb9?s=128&d=identicon&r=PG&f=1", "display_name": "Kirs Kringle", "link": "https://stackoverflow.com/users/716031/kirs-kringle"}, "edited": false, "score": 0, "creation_date": 1424684592, "post_id": 28670111, "comment_id": 45635329, "body": "That&#39;s exactly what the one-liner does :) (or I didn&#39;t understand the question).  Suggestion: try it with 2 or 3 files <code>perl ...... file1.cfg file2.cfg</code>, calculate the differences  <code>diff file1.cfg fil1.cfg.bak</code>"}], "tags": [], "owner": {"reputation": 3751, "user_id": 2991627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b1bf3f42fc00dd825eda62f1df4fa304?s=128&d=identicon&r=PG", "display_name": "JJoao", "link": "https://stackoverflow.com/users/2991627/jjoao"}, "is_accepted": false, "score": 1, "last_activity_date": 1424682389, "creation_date": 1424682389, "answer_id": 28670111, "question_id": 28669277, "link": "https://stackoverflow.com/questions/28669277/matching-some-lines-and-deleting-them-with-perl/28670111#28670111", "title": "Matching some lines and deleting them with Perl", "body": "<pre><code>perl -i.bak -ne '$n=$ARGV=~s/\\.cfg$//r; print unless /\\b$n\\b/' *.cfg\n</code></pre>\n\n<p>or even</p>\n\n<pre><code>... print unless /\\b\\Q$n\\E\\b/\n</code></pre>\n\n<p>It will create a backup (file.cfg.bak) </p>\n"}], "owner": {"reputation": 769, "user_id": 716031, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/eafc0eed89fca48c30c41364ff2f3eb9?s=128&d=identicon&r=PG&f=1", "display_name": "Kirs Kringle", "link": "https://stackoverflow.com/users/716031/kirs-kringle"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 81, "favorite_count": 0, "accepted_answer_id": 28669447, "answer_count": 3, "score": 2, "last_activity_date": 1424691444, "creation_date": 1424678833, "last_edit_date": 1424691444, "question_id": 28669277, "link": "https://stackoverflow.com/questions/28669277/matching-some-lines-and-deleting-them-with-perl", "title": "Matching some lines and deleting them with Perl", "body": "<p><strong>Problem</strong>:</p>\n\n<p>Many files name.CFG with some bad lines in them (roughly 2700 files).  I need to remove the bad lines if they exist.  </p>\n\n<p>The bad lines contain the name of the file minus the .CFG</p>\n\n<p><strong>The Bad Lines</strong>:</p>\n\n<pre><code>Title[nameofdevice:cpu]: nameofdevice CPU Usage Mhz\nTarget[nameofdevice:cpu]:\nMaxBytes[nameofdevice:cpu]: 100\nOptions[nameofdevice:cpu]: gauge\nWithPeak[nameofdevice:cpu]: wmy\nYLegend[nameofdevice:cpu]: Percent\nShortLegend[nameofdevice:cpu]: %\nLegend1[nameofdevice:cpu]: CPU % for 1\nLegend2[nameofdevice:cpu]: CPU Max for 2\nLegend3[nameofdevice:cpu]: Max CPU Mhz for 1\nLegend4[nameofdevice:cpu]: Max CPU Mhz for 2\n\nTitle[nameofdevice:mem]: nameofdevice mem\nTarget[nameofdevice:mem]:\nMaxBytes[nameofdevice:mem]: 100\nOptions[nameofdevice:mem]: gauge\nWithPeak[nameofdevice:mem]: wmy\nYLegend[nameofdevice:mem]: Percent\nShortLegend[nameofdevice:mem]: %\nLegend1[nameofdevice:mem]: % Used\nLegend2[nameofdevice:mem]: Max Used\nLegend3[nameofdevice:mem]: Max\n</code></pre>\n\n<p><code>nameofdevice</code> is the name of the file minus the .CFG </p>\n\n<p>I was looking for a linux way to do this, but it seems as though Perl would be more flexible. My real issue is matching the text exactly. I guess having the multiple lines and variable are what is perplexing to me, but a small string you could do a find and replace kind of thing. Or use <code>SED</code>. </p>\n\n<p>I need to remove the bad lines from all of the files.</p>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 5296, "user_id": 418066, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/38yuw.png?s=128&g=1", "display_name": "Biffen", "link": "https://stackoverflow.com/users/418066/biffen"}, "edited": false, "score": 1, "creation_date": 1424676937, "post_id": 28668814, "comment_id": 45631828, "body": "<a href=\"http://perldoc.perl.org/functions/split.html\" rel=\"nofollow noreferrer\"><code>perldoc split</code></a>"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1424679436, "post_id": 28668814, "comment_id": 45632850, "body": "<code>my @array = grep &#47;\\S&#47;, split &#47;\\?&#47;, $string</code>"}], "answers": [{"comments": [{"owner": {"reputation": 137100, "user_id": 874188, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/ZcY77.png?s=128&g=1", "display_name": "tripleee", "link": "https://stackoverflow.com/users/874188/tripleee"}, "edited": false, "score": 2, "creation_date": 1424677939, "post_id": 28668894, "comment_id": 45632205, "body": "Note also that there will be empty elements in the resulting array where <code>?</code> is adjacent to nothing, or if you have two next to each other."}], "tags": [], "owner": {"reputation": 240678, "user_id": 14955, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/5DblQ.png?s=128&g=1", "display_name": "Thilo", "link": "https://stackoverflow.com/users/14955/thilo"}, "is_accepted": true, "score": -1, "last_activity_date": 1424677065, "creation_date": 1424677065, "answer_id": 28668894, "question_id": 28668814, "link": "https://stackoverflow.com/questions/28668814/how-to-grep-the-word-between-two-symbols-in-perl/28668894#28668894", "title": "How to grep the word between two symbols in Perl?", "body": "<p>You can use the <a href=\"http://perldoc.perl.org/functions/split.html\" rel=\"nofollow\"><code>split</code></a> function, however you have to escape the <code>?</code> character, so that it won't get special treatment as part of a regular expression control character.</p>\n\n<pre><code> my @array = split '\\\\?', $string;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 658023, "user_id": 548225, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/dab08478b226280d4a30894c9a7ed719?s=128&d=identicon&r=PG", "display_name": "anubhava", "link": "https://stackoverflow.com/users/548225/anubhava"}, "is_accepted": false, "score": 1, "last_activity_date": 1424682263, "last_edit_date": 1424682263, "creation_date": 1424678485, "answer_id": 28669186, "question_id": 28668814, "link": "https://stackoverflow.com/questions/28668814/how-to-grep-the-word-between-two-symbols-in-perl/28669186#28669186", "title": "How to grep the word between two symbols in Perl?", "body": "<p>To ignore empty results you can match the input with regex and store matched results in an array:</p>\n\n<pre><code>use strict;\nuse warnings;\n\nmy $string = \"?hi how r u?what is your name?what is your age?\";\nmy @matches = ( $string =~ /(?&lt;=\\?)[^?]+/g );\n\nforeach my $i (@matches) {\n   print $i . \"\\n\";\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>hi how r u\nwhat is your name\nwhat is your age\n</code></pre>\n"}], "owner": {"reputation": 47, "user_id": 4579401, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/b41c7d92113fc7a4b4a9411c747b2f79?s=128&d=identicon&r=PG&f=1", "display_name": "idiot on perl", "link": "https://stackoverflow.com/users/4579401/idiot-on-perl"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 137, "favorite_count": 0, "accepted_answer_id": 28668894, "answer_count": 2, "score": 0, "last_activity_date": 1424682263, "creation_date": 1424676680, "last_edit_date": 1424676908, "question_id": 28668814, "link": "https://stackoverflow.com/questions/28668814/how-to-grep-the-word-between-two-symbols-in-perl", "title": "How to grep the word between two symbols in Perl?", "body": "<p>I need to grep the word between the symbols as shown below in an array.</p>\n\n<pre><code>my $string = \"?hi how r u?what is your name?what is your age?\";\n</code></pre>\n\n<p>It's to be converted to array where array should be like:</p>\n\n<pre><code>my $array[0]=\"hi how r u\";\nmy $array[1]=\"what is your name\";\nmy $array[2]=\"what is your age\";\n</code></pre>\n"}, {"tags": ["perl", "xml-twig"], "answers": [{"comments": [{"owner": {"reputation": 163, "user_id": 3024254, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/14432a1a96c460a868890105fa263eda?s=128&d=identicon&r=PG&f=1", "display_name": "karan arora", "link": "https://stackoverflow.com/users/3024254/karan-arora"}, "edited": false, "score": 0, "creation_date": 1424681148, "post_id": 28668663, "comment_id": 45633565, "body": "Global symbol &quot;%keep&quot; requires explicit package name..error it&#39;s throwing...Don&#39;t understand why.."}, {"owner": {"reputation": 163, "user_id": 3024254, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/14432a1a96c460a868890105fa263eda?s=128&d=identicon&r=PG&f=1", "display_name": "karan arora", "link": "https://stackoverflow.com/users/3024254/karan-arora"}, "edited": false, "score": 0, "creation_date": 1424685838, "post_id": 28668663, "comment_id": 45636031, "body": "Got it ...instead of my $keep= map { $_ =&gt; 1 } origins_to_keep, it should be my %keep= map { $_ =&gt; 1 } @origins_to_keep as it&#39;s hash...thanks..."}, {"owner": {"reputation": 15323, "user_id": 11095, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c911d40f47f422f820d8a524658bd5a?s=128&d=identicon&r=PG", "display_name": "mirod", "link": "https://stackoverflow.com/users/11095/mirod"}, "reply_to_user": {"reputation": 163, "user_id": 3024254, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/14432a1a96c460a868890105fa263eda?s=128&d=identicon&r=PG&f=1", "display_name": "karan arora", "link": "https://stackoverflow.com/users/3024254/karan-arora"}, "edited": false, "score": 1, "creation_date": 1424694904, "post_id": 28668663, "comment_id": 45641105, "body": "oops, fixed in the answer"}], "tags": [], "owner": {"reputation": 15323, "user_id": 11095, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c911d40f47f422f820d8a524658bd5a?s=128&d=identicon&r=PG", "display_name": "mirod", "link": "https://stackoverflow.com/users/11095/mirod"}, "is_accepted": true, "score": 2, "last_activity_date": 1424694920, "last_edit_date": 1424694920, "creation_date": 1424676018, "answer_id": 28668663, "question_id": 28668551, "link": "https://stackoverflow.com/questions/28668551/how-to-apply-an-in-clause-in-perl-by-passing-arguments-from-the-command-line/28668663#28668663", "title": "How to apply an IN clause in Perl by passing arguments from the command line", "body": "<p>One way to do this is to store the values that you want to keep in a hash.</p>\n\n<p>Create the hash at the top of the script:</p>\n\n<pre><code>my @origins_to_keep= split /,/, $ARGV[2];\nmy %keep= map { $_ =&gt; 1 } @origins_to_keep;\n</code></pre>\n\n<p>Use it in the handler:</p>\n\n<pre><code>$c-&gt;delete($STOCK) unless $keep{$c-&gt;att('origin')}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 163, "user_id": 3024254, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/14432a1a96c460a868890105fa263eda?s=128&d=identicon&r=PG&f=1", "display_name": "karan arora", "link": "https://stackoverflow.com/users/3024254/karan-arora"}, "edited": false, "score": 0, "creation_date": 1424682363, "post_id": 28669129, "comment_id": 45634121, "body": "&quot;any&quot; is not exported by the List::Util module....This is error I am facing...Any idea...Sir.."}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 3, "last_activity_date": 1424684333, "last_edit_date": 1424684333, "creation_date": 1424678204, "answer_id": 28669129, "question_id": 28668551, "link": "https://stackoverflow.com/questions/28668551/how-to-apply-an-in-clause-in-perl-by-passing-arguments-from-the-command-line/28669129#28669129", "title": "How to apply an IN clause in Perl by passing arguments from the command line", "body": "<p>The solution most obvious to me is to use the <code>any</code> function from the <a href=\"https://metacpan.org/module/List::Util\" rel=\"nofollow\"><code>List::Util</code></a> module.</p>\n\n<p>Here's a version of your own code that includes a few other modifications. Most significantly I've used the <code>catfile</code> function from the <a href=\"https://metacpan.org/module/File::Spec::Functions\" rel=\"nofollow\"><code>File::Spec::Functions</code></a> module to more safely combine the path and file name.</p>\n\n<pre><code>use strict;\nuse warnings;\nuse 5.014;    # For non-destructive substitution\n\nuse XML::Twig;\nuse File::Spec::Functions 'catfile';\nuse List::Util 'any';\n\nmy ($source_file, $file_location, $stock_origins) = @ARGV;\n\nmy $twig = XML::Twig-&gt;new(\n    twig_handlers =&gt; { 'STOCKEXT/STOCK' =&gt; \\&amp;stock_handler },\n    pretty_print  =&gt; 'indented',\n);\n\nmy $full_input    = catfile($file_location, $source_file);\nmy @stock_origins = split /,/, $stock_origins;\nmy $full_output   = $full_input =~ s/(?=\\.[^.]+\\z)/_out/r;\n\n$twig-&gt;parsefile($full_input);\n$twig-&gt;print_to_file($full_output);\n\nsub stock_handler {\n  my ( $twig, $stock ) = @_;\n  my $origin = $stock-&gt;att('origin');\n\n  $stock-&gt;delete unless any { $origin eq $_ } @stock_origins;\n}\n</code></pre>\n\n<p><strong>output</strong></p>\n\n<pre><code>&lt;STOCKEXT&gt;\n  &lt;STOCK origin=\"HIGH_TRADE\"/&gt;\n  &lt;STOCK origin=\"HIGH_TRADE\"/&gt;\n  &lt;STOCK origin=\"HIGH_TRADE\"/&gt;\n  &lt;STOCK origin=\"AVERAGE_TRADE\"/&gt;\n&lt;/STOCKEXT&gt;\n</code></pre>\n"}], "owner": {"reputation": 163, "user_id": 3024254, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/14432a1a96c460a868890105fa263eda?s=128&d=identicon&r=PG&f=1", "display_name": "karan arora", "link": "https://stackoverflow.com/users/3024254/karan-arora"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 54, "favorite_count": 0, "accepted_answer_id": 28668663, "answer_count": 2, "score": 1, "last_activity_date": 1424694920, "creation_date": 1424675493, "last_edit_date": 1424678558, "question_id": 28668551, "link": "https://stackoverflow.com/questions/28668551/how-to-apply-an-in-clause-in-perl-by-passing-arguments-from-the-command-line", "title": "How to apply an IN clause in Perl by passing arguments from the command line", "body": "<p>I am new to Perl, and am trying to apply a filter condition on XML files using the <a href=\"https://metacpan.org/module/XML::Twig\" rel=\"nofollow\"><code>XML::Twig</code></a> module.</p>\n\n<p>Following is my code:</p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\n\nuse XML::Twig;\n\nmy $SOURCEFILE     = $ARGV[0];\nmy $FILELOCATIONIN = $ARGV[1];\n\nmy $twig = new XML::Twig( twig_handlers =&gt; { 'STOCKEXT/STOCK' =&gt; \\&amp;STOCK } );\n\n$twig-&gt;parsefile($FILELOCATIONIN.'/'.$SOURCEFILE.'.xml');\n\n$twig-&gt;set_pretty_print('indented');\n\n$twig-&gt;print_to_file($FILELOCATIONIN.'/'.$SOURCEFILE.'out.xml');\n\nsub TRADE {\n    my ( $twig, $STOCK ) = @_;\n    foreach  my $c ($STOCK)\n        {\n         $c-&gt;delete($STOCK)\n         unless\n         $c-&gt;att('origin') eq \"HIGH_TRADE\"\n\n      ;\n    }\n}\n</code></pre>\n\n<p>Following is my XML : </p>\n\n<pre><code>&lt;STOCKEXT&gt;\n  &lt;STOCK origin = \"HIGH_TRADE\"/&gt;\n  &lt;STOCK origin = \"HIGH_TRADE\"/&gt;\n  &lt;STOCK origin = \"HIGH_TRADE\"/&gt;\n  &lt;STOCK origin = \"LOW_TRADE\"/&gt;\n  &lt;STOCK origin = \"LOW_TRADE\"/&gt;\n  &lt;STOCK origin = \"AVERAGE_TRADE\"/&gt;\n&lt;/STOCKEXT&gt;\n</code></pre>\n\n<p>Filtered Output XML:</p>\n\n<pre><code>&lt;STOCKEXT&gt;\n  &lt;STOCK origin = \"HIGH_TRADE\"/&gt;\n  &lt;STOCK origin = \"HIGH_TRADE\"/&gt;\n  &lt;STOCK origin = \"HIGH_TRADE\"/&gt;\n&lt;/STOCKEXT&gt;\n</code></pre>\n\n<p>Now I am stuck, as I want to pass comma-separated argument in the command line so that <code>HIGH_TRADE</code> as well as <code>AVERAGE_TRADE</code> become legitimate <code>STOCK</code>.</p>\n\n<p>As can be seen, in my current code, I pass two arguments. But I want to pass three arguments, third should be the filter condition in comma-separated format.</p>\n\n<p>Hence, I am expecting my code to be invoked as</p>\n\n<pre><code>perl stock_filter.pl file_name.xml /opt/XML HIGH_TRADE,AVERAGE_TRADE\n</code></pre>\n\n<p>The third argument will be split and checked against the <code>origin</code> attribute of each <code>STOCK</code> element to declare it as legitimate.</p>\n\n<p>This will help in future to change the filter conditions. Any addition or subtraction of filter condition will not change the code.</p>\n"}, {"tags": ["perl", "file", "concat", "sequences"], "answers": [{"tags": [], "owner": {"reputation": 155387, "user_id": 978917, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/92d059913eace78a868a3e87f98e0a57?s=128&d=identicon&r=PG", "display_name": "ruakh", "link": "https://stackoverflow.com/users/978917/ruakh"}, "is_accepted": false, "score": 0, "last_activity_date": 1424646722, "creation_date": 1424646722, "answer_id": 28664531, "question_id": 28664406, "link": "https://stackoverflow.com/questions/28664406/perl-concat-2-files-in-specific-move-order/28664531#28664531", "title": "Perl - Concat 2 Files in specific move order", "body": "<p>The problem is that</p>\n\n<pre><code>for my $j (0..$#FILE_A){\n</code></pre>\n\n<p>thinks that it's in charge of making <code>$j</code> take every value between <code>0</code> and <code>$#FILE_A</code>; but then you have lines like this:</p>\n\n<pre><code>$i++; $j++;\n</code></pre>\n\n<p>that modify <code>$j</code> without the <code>for</code>-loop managing it.</p>\n\n<p>Since you have such a simple pattern, and so few lines per group, I think it's simpler to write something like this:</p>\n\n<pre><code>my $i = 0;\nfor (my $i = 0, $j = 0; $j &lt; @FILE_A; $i += 5, $j += 3) {\n    # copy header:\n    $FILE_C[$i] = $FILE_A[$j];\n    # copy sequences from A:\n    $FILE_C[$i + 1] = $FILE_A[$j + 1];\n    $FILE_C[$i + 2] = $FILE_A[$j + 2];\n    # copy sequences from B:\n    $FILE_C[$i + 3] = $FILE_B[$j + 1];\n    $FILE_C[$i + 4] = $FILE_B[$j + 2];\n}\n</code></pre>\n"}], "owner": {"reputation": 132, "user_id": 3641906, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/184b83c0c5781406c5658a2f7e4fcba9?s=128&d=identicon&r=PG&f=1", "display_name": "Krismu", "link": "https://stackoverflow.com/users/3641906/krismu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 31, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1424648193, "creation_date": 1424646051, "last_edit_date": 1424648193, "question_id": 28664406, "link": "https://stackoverflow.com/questions/28664406/perl-concat-2-files-in-specific-move-order", "title": "Perl - Concat 2 Files in specific move order", "body": "<p>I have two textfiles with almost identical content, identical number of rows. Each has a header(row 1) followed by two sequences(seperated by \\n), header again(row 4), two sequences, header again(row7), ...\nWhat I am trying to do is write a new file C, which is getting the header and sequences from file A (rows 1..3) followed by two sequences from File B, next 3 lines from file A, next two sequences from file B. It would look something like this:</p>\n\n<pre><code>FILE C:\nA1\nA2\nA3\nB2\nB3\nA4\nA5\nA6\nB5\nB6\n...\n</code></pre>\n\n<p>My code looks like this:</p>\n\n<pre><code>my $i = 0;\nfor my $j (0 .. $#FILE_A) {\n    for (0 .. 2) {\n        $FILE_C[$i] = $FILE_A[$j];\n        $i++; $j++;\n    }\n    $i = $i + 2;\n}\n\n$i=3;\nmy $j=1;\n\nfor my $j (0 .. $#FILE_B) {\n    for(0 .. 1) {\n        $FILE_C[$i] = $FILE_B[$j];\n        $i++; $j++;\n    }\n    $i = $i + 3;\n    $j++;\n}\n</code></pre>\n\n<p>It doesn't produce the right output, hard to tell which lines he confuses.</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 28015, "user_id": 63550, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/RIZKi.png?s=128&g=1", "display_name": "Peter Mortensen", "link": "https://stackoverflow.com/users/63550/peter-mortensen"}, "edited": false, "score": 0, "creation_date": 1615405566, "post_id": 28663982, "comment_id": 117683528, "body": "For the Perl <b><i>source</i></b> file name itself, see e.g. <i><a href=\"https://stackoverflow.com/questions/4071447\">How do I get the filename and line number in Perl?</a></i>."}], "answers": [{"comments": [{"owner": {"reputation": 604, "user_id": 5087283, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d0b2d9685f5d796274901ceadf632d4?s=128&d=identicon&r=PG", "display_name": "Metamorphic", "link": "https://stackoverflow.com/users/5087283/metamorphic"}, "edited": false, "score": 3, "creation_date": 1532532517, "post_id": 28664040, "comment_id": 90014245, "body": "That&#39;s a confusing name for that variable."}, {"owner": {"reputation": 121105, "user_id": 2766176, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/edd8638efe875601bfe394a8aea5b16d?s=128&d=identicon&r=PG", "display_name": "brian d foy", "link": "https://stackoverflow.com/users/2766176/brian-d-foy"}, "edited": false, "score": 0, "creation_date": 1613451153, "post_id": 28664040, "comment_id": 117072191, "body": "The variable name is a hold-over from C, where people often use <code>argv</code> as the list of command line arguments: <code>int main( int argc, char *argv[] )</code>"}, {"owner": {"reputation": 28015, "user_id": 63550, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/RIZKi.png?s=128&g=1", "display_name": "Peter Mortensen", "link": "https://stackoverflow.com/users/63550/peter-mortensen"}, "reply_to_user": {"reputation": 121105, "user_id": 2766176, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/edd8638efe875601bfe394a8aea5b16d?s=128&d=identicon&r=PG", "display_name": "brian d foy", "link": "https://stackoverflow.com/users/2766176/brian-d-foy"}, "edited": false, "score": 0, "creation_date": 1615405808, "post_id": 28664040, "comment_id": 117683620, "body": "@brian d foy: Implicit the first one (index 0)?"}], "tags": [], "owner": {"reputation": 1090, "user_id": 905927, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/290786897f51fbd76a589169d2170607?s=128&d=identicon&r=PG", "display_name": "rouzier", "link": "https://stackoverflow.com/users/905927/rouzier"}, "is_accepted": true, "score": 21, "last_activity_date": 1548243640, "last_edit_date": 1548243640, "creation_date": 1424643951, "answer_id": 28664040, "question_id": 28663982, "link": "https://stackoverflow.com/questions/28663982/how-to-get-the-filename-of-the-current-file-in-a-perl-one-liner/28664040#28664040", "title": "How to get the filename of the current file in a Perl one-liner", "body": "<p>The name of the variable is <code>$ARGV</code>. You can find out about it in <a href=\"http://perldoc.perl.org/perlvar.html#%24ARGV\" rel=\"noreferrer\">perlvar: <code>$ARGV</code></a>.</p>\n"}], "owner": {"reputation": 373, "user_id": 1289047, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/c0b5175d5e707790e911e31ea64286ff?s=128&d=identicon&r=PG", "display_name": "Toni Hermoso Pulido", "link": "https://stackoverflow.com/users/1289047/toni-hermoso-pulido"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4325, "favorite_count": 1, "accepted_answer_id": 28664040, "answer_count": 1, "score": 17, "last_activity_date": 1616514512, "creation_date": 1424643478, "last_edit_date": 1613440289, "question_id": 28663982, "link": "https://stackoverflow.com/questions/28663982/how-to-get-the-filename-of-the-current-file-in-a-perl-one-liner", "title": "How to get the filename of the current file in a Perl one-liner", "body": "<p>Is it possible to get the current filename (from a list of files) in a Perl one-liner like this below?</p>\n<pre><code>perl -lane 'if ($_=~/my_value/) { print $_; }' *.txt\n</code></pre>\n"}, {"tags": ["xml", "perl", "csv"], "comments": [{"owner": {"reputation": 15323, "user_id": 11095, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c911d40f47f422f820d8a524658bd5a?s=128&d=identicon&r=PG", "display_name": "mirod", "link": "https://stackoverflow.com/users/11095/mirod"}, "edited": false, "score": 3, "creation_date": 1424624301, "post_id": 28659986, "comment_id": 45616546, "body": "would you mind giving us well-formed XML? I like helping. I don&#39;t like tracking down open elements in your XML so I can eventually parse it and help you. Thanks"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1424641776, "post_id": 28659986, "comment_id": 45622304, "body": "Also: <code>XML::Simple</code> is lying. It&#39;s not simple, it&#39;s <i>for</i> simple XML. It&#39;s not recommended for new code."}], "answers": [{"comments": [{"owner": {"reputation": 141, "user_id": 4097244, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f178b6040f6d39295fefaf21edf0c448?s=128&d=identicon&r=PG&f=1", "display_name": "BrianB", "link": "https://stackoverflow.com/users/4097244/brianb"}, "edited": false, "score": 0, "creation_date": 1424626853, "post_id": 28660319, "comment_id": 45617361, "body": "holy!  I did not expect such a quick and complete response. thanks greatly,  MMuller !!"}], "tags": [], "owner": {"reputation": 20027, "user_id": 1987598, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/s3j3n.jpg?s=128&g=1", "display_name": "Mathias M&#252;ller", "link": "https://stackoverflow.com/users/1987598/mathias-m%c3%bcller"}, "is_accepted": true, "score": 4, "last_activity_date": 1424623008, "creation_date": 1424623008, "answer_id": 28660319, "question_id": 28659986, "link": "https://stackoverflow.com/questions/28659986/i-need-to-extract-xml-node-elements-to-csv/28660319#28660319", "title": "I need to extract XML node elements to CSV", "body": "<p>Let me suggest something radically different. Since your input is an XML document, you could use XSLT to extract data from it.</p>\n\n<p>Your Perl code would then consist of executing this transformation, everything else would be handled in an XSLT stylesheet. You'd have to use a library that includes an XSLT processor, and in my opinion, using LibXML and LibXSLT would be the safest way (sample code taken from <a href=\"http://search.cpan.org/~shlomif/XML-LibXSLT-1.94/LibXSLT.pm\" rel=\"nofollow\">here</a>):</p>\n\n<pre><code>use XML::LibXSLT;\nuse XML::LibXML;\n\nmy $xslt = XML::LibXSLT-&gt;new();\n\nmy $source = XML::LibXML-&gt;load_xml(location =&gt; 'foo.xml');\nmy $style_doc = XML::LibXML-&gt;load_xml(location=&gt;'bar.xsl', no_cdata=&gt;1);\n\nmy $stylesheet = $xslt-&gt;parse_stylesheet($style_doc);\n\nmy $results = $stylesheet-&gt;transform($source);\n\nprint $stylesheet-&gt;output_as_bytes($results);\n</code></pre>\n\n<p>Assuming a <em>well-formed</em> input XML, use the following transformation.</p>\n\n<p><strong>XSLT Stylesheet</strong></p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\" ?&gt;\n&lt;xsl:transform xmlns:xsl=\"http://www.w3.org/1999/XSL/Transform\" version=\"1.0\"&gt;\n    &lt;xsl:output method=\"text\" encoding=\"UTF-8\" /&gt;\n\n    &lt;xsl:strip-space elements=\"*\"/&gt;\n\n    &lt;xsl:template match=\"/\"&gt;\n        &lt;xsl:text&gt;time|humidity|hPa|min|max|&amp;#xA;&lt;/xsl:text&gt;\n        &lt;xsl:apply-templates/&gt;\n    &lt;/xsl:template&gt;\n\n    &lt;xsl:template match=\"time\"&gt;\n        &lt;xsl:value-of select=\"concat(@from,'|',humidity/@value, '|', pressure/@value,'|', temperature/@min, '|', temperature/@max, '|')\"/&gt;\n        &lt;xsl:if test=\"following::time\"&gt;\n            &lt;xsl:text&gt;&amp;#xA;&lt;/xsl:text&gt;\n        &lt;/xsl:if&gt;\n    &lt;/xsl:template&gt;\n\n    &lt;xsl:template match=\"text()\"/&gt;\n\n&lt;/xsl:transform&gt;\n</code></pre>\n\n<p><strong>Text Output</strong></p>\n\n<pre><code>time|humidity|hPa|min|max|\n2015-02-17T15:00:00|100|1007.77|-13.293|-13.29|\n2015-02-17T18:00:00|100|1006.44|-10.16|-10.16|\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "edited": false, "score": 0, "creation_date": 1424643591, "post_id": 28663809, "comment_id": 45622893, "body": "But, for large files, IIRC, using <code>twig_roots</code> maybe better. ... On a side note, since when does SO forbid a simple <code>+1</code> in a comment?!"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "reply_to_user": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "edited": false, "score": 1, "creation_date": 1424643688, "post_id": 28663809, "comment_id": 45622916, "body": "Not sure about <code>twig_roots</code>  - but I have managed to have some success with large XML and simply <code>purge</code> within the handler."}, {"owner": {"reputation": 15323, "user_id": 11095, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c911d40f47f422f820d8a524658bd5a?s=128&d=identicon&r=PG", "display_name": "mirod", "link": "https://stackoverflow.com/users/11095/mirod"}, "edited": false, "score": 0, "creation_date": 1424667991, "post_id": 28663809, "comment_id": 45629012, "body": "<code>twig_handlers</code>/<code>purge</code> should be fine, unless there is a lot of (unused) XML between 2 time elements, in which case using <code>twig_roots</code> would avoid loading it in memory."}], "tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": false, "score": 2, "last_activity_date": 1424643755, "last_edit_date": 1424643755, "creation_date": 1424642479, "answer_id": 28663809, "question_id": 28659986, "link": "https://stackoverflow.com/questions/28659986/i-need-to-extract-xml-node-elements-to-csv/28663809#28663809", "title": "I need to extract XML node elements to CSV", "body": "<p>Whilst you have an answer, you've tagged it as Perl, so I'll contribute something perlish. First off though - don't use <a href=\"http://search.cpan.org/~grantm/XML-Simple-2.20/lib/XML/Simple.pm\" rel=\"nofollow\"><code>XML::Simple</code></a>. From it's docs:</p>\n\n<blockquote>\n  <p>The use of this module in new code is discouraged. Other modules are available which provide more straightforward and consistent interfaces.</p>\n</blockquote>\n\n<p>Personally, I like <a href=\"http://search.cpan.org/~mirod/XML-Twig-3.48/Twig.pm\" rel=\"nofollow\"><code>XML::Twig</code></a> when it comes to XML parsing. It goes something like this: (note - I've cut down your XML, because yours is incomplete and thus invalid. But that <em>shouldn't</em> matter, because this code is only inspecting the <code>&lt;time&gt;</code> elements)</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\n\nuse XML::Twig;\n\nsub time_handler {\n    my ( $twig, $time ) = @_;\n\n    print join( \"\\t\",\n        $time-&gt;att('from'),\n        $time-&gt;first_child('humidity')-&gt;att('value'),\n        $time-&gt;first_child('pressure')-&gt;att('value'),\n        $time-&gt;first_child('temperature')-&gt;att('min'),\n        $time-&gt;first_child('temperature')-&gt;att('max'),\n        \"\\n\" );\n\n    #will discard data as you go, saving memory footprint.  \n    $twig -&gt; purge;    \n}\n\nlocal $/;\nmy $parser = XML::Twig-&gt;new( twig_handlers =&gt; { 'time' =&gt; \\&amp;time_handler } )\n    -&gt;parse(&lt;DATA&gt;);\n\n__DATA__\n&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;weatherdata&gt;\n&lt;time from=\"2015-02-17T15:00:00\" to=\"2015-02-17T18:00:00\"&gt;\n  &lt;symbol number=\"803\" name=\"broken clouds\" var=\"04d\"/&gt;\n  &lt;precipitation/&gt;\n  &lt;windDirection deg=\"43.5048\" code=\"NE\" name=\"NorthEast\"/&gt;\n  &lt;windSpeed mps=\"1.82\" name=\"Light breeze\"/&gt;\n  &lt;temperature unit=\"celsius\" value=\"-13.29\" min=\"-13.293\" max=\"-13.29\"/&gt;\n  &lt;pressure unit=\"hPa\" value=\"1007.77\"/&gt;\n  &lt;humidity value=\"100\" unit=\"%\"/&gt;\n  &lt;clouds value=\"broken clouds\" all=\"64\" unit=\"%\"/&gt;\n&lt;/time&gt;\n&lt;time from=\"2015-02-17T18:00:00\" to=\"2015-02-17T21:00:00\"&gt;\n  &lt;symbol number=\"803\" name=\"broken clouds\" var=\"04d\"/&gt;\n  &lt;precipitation/&gt;\n  &lt;windDirection deg=\"255.501\" code=\"WSW\" name=\"West-southwest\"/&gt;\n  &lt;windSpeed mps=\"0.66\" name=\"Calm\"/&gt;\n  &lt;temperature unit=\"celsius\" value=\"-10.16\" min=\"-10.16\" max=\"-10.16\"/&gt;\n  &lt;pressure unit=\"hPa\" value=\"1006.44\"/&gt;\n  &lt;humidity value=\"100\" unit=\"%\"/&gt;\n  &lt;clouds value=\"broken clouds\" all=\"80\" unit=\"%\"/&gt;\n&lt;/time&gt;\n&lt;/weatherdata&gt;\n</code></pre>\n"}], "owner": {"reputation": 141, "user_id": 4097244, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f178b6040f6d39295fefaf21edf0c448?s=128&d=identicon&r=PG&f=1", "display_name": "BrianB", "link": "https://stackoverflow.com/users/4097244/brianb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 311, "favorite_count": 0, "accepted_answer_id": 28660319, "answer_count": 2, "score": 1, "last_activity_date": 1424643755, "creation_date": 1424621148, "last_edit_date": 1424626608, "question_id": 28659986, "link": "https://stackoverflow.com/questions/28659986/i-need-to-extract-xml-node-elements-to-csv", "title": "I need to extract XML node elements to CSV", "body": "<p>=XML FILE=</p>\n\n<pre><code>    &lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;weatherdata&gt;\n&lt;location&gt;\n&lt;name&gt;Toronto&lt;/name&gt;\n&lt;type/&gt;\n&lt;country&gt;CA&lt;/country&gt;\n&lt;timezone/&gt;\n&lt;location altitude=\"0\" latitude=\"43.700111\" longitude=\"-79.416298\" geobase=\"geonames\" geobaseid=\"0\"/&gt;&lt;/location&gt;\n&lt;credit/&gt;\n &lt;meta&gt;\n&lt;lastupdate/&gt;\n  &lt;calctime&gt;1.4906&lt;/calctime&gt;\n&lt;nextupdate/&gt;\n &lt;/meta&gt;\n &lt;sun rise=\"2015-02-17T12:12:32\" set=\"2015-02-17T22:50:42\"/&gt;\n&lt;forecast&gt;\n&lt;time from=\"2015-02-17T15:00:00\" to=\"2015-02-17T18:00:00\"&gt;\n  &lt;symbol number=\"803\" name=\"broken clouds\" var=\"04d\"/&gt;\n  &lt;precipitation/&gt;\n  &lt;windDirection deg=\"43.5048\" code=\"NE\" name=\"NorthEast\"/&gt;\n  &lt;windSpeed mps=\"1.82\" name=\"Light breeze\"/&gt;\n  &lt;temperature unit=\"celsius\" value=\"-13.29\" min=\"-13.293\" max=\"-13.29\"/&gt;\n  &lt;pressure unit=\"hPa\" value=\"1007.77\"/&gt;\n  &lt;humidity value=\"100\" unit=\"%\"/&gt;\n  &lt;clouds value=\"broken clouds\" all=\"64\" unit=\"%\"/&gt;\n&lt;/time&gt;\n&lt;time from=\"2015-02-17T18:00:00\" to=\"2015-02-17T21:00:00\"&gt;\n  &lt;symbol number=\"803\" name=\"broken clouds\" var=\"04d\"/&gt;\n  &lt;precipitation/&gt;\n  &lt;windDirection deg=\"255.501\" code=\"WSW\" name=\"West-southwest\"/&gt;\n  &lt;windSpeed mps=\"0.66\" name=\"Calm\"/&gt;\n  &lt;temperature unit=\"celsius\" value=\"-10.16\" min=\"-10.16\" max=\"-10.16\"/&gt;\n  &lt;pressure unit=\"hPa\" value=\"1006.44\"/&gt;\n  &lt;humidity value=\"100\" unit=\"%\"/&gt;\n  &lt;clouds value=\"broken clouds\" all=\"80\" unit=\"%\"/&gt;\n&lt;/time&gt;\n</code></pre>\n\n<p>= DUMPER EXTRACT =</p>\n\n<pre><code>  'att' =&gt; {\n                                                                                                                                                                                                                                                              'to' =&gt; '2015-02-22T00:00:00',\n                                                                                                                                                                                                                                              'from' =&gt; '2015-02-21T21:00:00'\n\n\n  'att' =&gt; {\n                                                                                                                                                                                                                                                                                                'value' =&gt; '100',\n                                                                                                                                                                                                                                                                                                'unit' =&gt; '%'\n\n\n    'next_sibling' =&gt; $VAR1-&gt;{'twig_root'}{'first_child'}{'next_sibling' }     {'next_sibling'}{'next_sibling'}{'next_sibling'}{'last_child'}{'prev_sibling'}  {'last_child'}{'prev_sibling'},\n                                                                                                                                                                                                                                                                                                                      'att' =&gt; {\n                                                                                                                                                                                                                                                                                                                            'unit' =&gt; 'hPa',\n                                                                                                                                                                                                                                                                                                                             'value' =&gt; '1020.87'\n\n\n  'prev_sibling' =&gt; bless( {\n                                                                                                                                                                                                                                                                                                                                             'att' =&gt; {\n                                                                                                                                                                                                                                                                                                                                                       'min' =&gt; '-8.313',\n                                                                                                                                                                                                                                                                                                                                                      'max' =&gt; '-8.313',\n                                                                                                                                                                                                                                                                                                                                                      'unit' =&gt; 'celsius',\n</code></pre>\n\n<p>I am looking to extract from the XML file:</p>\n\n<p>'from' (only the time)\n'humidity value' (the value)\n'temperature max' (the temp value)\n'temperature min' (the temp value)\n'pressure value' (the hpA value)</p>\n\n<p>The code below was my draft code to see if I was on the right track. The intention was to get it working with a few nodes; outputting it to a CSV file. I am not getting anywhere...</p>\n\n<p>= PERL CODE =</p>\n\n<pre><code>use strict;\n\nuse Data::Dumper;\nuse XML::Simple 'XMLin';\n\nmy $input_xml = '/var/egridmanage_pl/data/longrange.xml' ||die $!;\nmy $output_csv = '/var/egridmanage_pl/longrange.csv';\n\nmy $parse = XMLin('/var/egridmanage_pl/data/longrange.xml',forcearray =&gt; ['value']);\n\nforeach my $dataset (@{$parse-&gt;{weatherdata}}) {\nif ($dataset-&gt;{name} eq 'Toronto') {\n    open my $out, \"&gt;\", $output_csv or die \"Could not open $output_csv: $!\";\nprint {$out} $dataset-&gt;{att}-&gt; {from} . \"\\n\";\nprint {$out} $dataset-&gt;{att}-&gt;[0]-&gt;{value} . \"\\n\";\n}\n}\n</code></pre>\n\n<p>= INTENDED RESULTS WOULD BE THE FOLLOWING = (I NEED HELP!!)</p>\n\n<pre><code>time      | humidity |  hPa    | min    | max    |\n\n15:00:00  | 100      | 1007.77 | -13.29 | -13.29 | \n</code></pre>\n"}, {"tags": ["perl", "imagemagick", "node-imagemagick", "perlmagick"], "owner": {"reputation": 11, "user_id": 4593494, "user_type": "registered", "profile_image": "https://graph.facebook.com/801354073265070/picture?type=large", "display_name": "Mostafa Ameen", "link": "https://stackoverflow.com/users/4593494/mostafa-ameen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 98, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1425215372, "creation_date": 1424608513, "last_edit_date": 1425215372, "question_id": 28657868, "link": "https://stackoverflow.com/questions/28657868/imagemagick-big-stroke-width-adds-strange-effect-like-paint-fluid", "title": "imagemagick big stroke width adds strange effect like paint fluid", "body": "<p>I've an issue with a script named pixenate which works as a simple image editor using javascript, imagemagick and perl. After deep troubleshooting I found that the issue happens when I use a big stroke width (14+) when I draw something on an image which has some intersection, otherwise everything works fine. The issue looks like a paint fluid! as follows:</p>\n\n<p><img src=\"https://i.stack.imgur.com/q6msa.png\" alt=\"enter image description here\"></p>\n\n<p>I tried turning antialias on and off, interpolate options, and method properties to all possible values in <a href=\"http://www.imagemagick.org/script/perl-magick.php\" rel=\"nofollow noreferrer\">perl magick documentation</a>.</p>\n\n<p>Data sent as follows</p>\n\n<pre><code>[{\"operation\":\"fetch\",\"pxn8root\":\"\",\"random\":\"751b\",\"url\":\"http://localhost/test.jpg\"},{\"operation\":\"imagemagick\",\"script\":[[\"_\",\"Draw\",{\"fill\":\"#00000000\",\"points\":\"M 94.13443396226415 270.5660377358491 L 95.26179245283019 268.875 95.8254716981132 266.0566037735849 96.38915094339623 263.2382075471698 96.38915094339623 260.98349056603774 96.38915094339623 257.60141509433964 96.95283018867924 255.34669811320757 96.95283018867924 252.52830188679246 96.95283018867924 249.14622641509433 96.38915094339623 246.32783018867926 96.38915094339623 242.94575471698113 96.38915094339623 240.12735849056605 96.38915094339623 236.74528301886792 95.8254716981132 233.92688679245285 95.8254716981132 230.54481132075472 95.8254716981132 227.72641509433961 95.8254716981132 224.3443396226415 95.8254716981132 222.08962264150944 95.8254716981132 219.83490566037736 95.8254716981132 217.58018867924528 95.8254716981132 215.3254716981132 95.8254716981132 213.63443396226415 95.8254716981132 211.9433962264151 95.8254716981132 210.25235849056605 95.8254716981132 208.56132075471697 95.8254716981132 207.99764150943398 95.8254716981132 206.87028301886792 95.8254716981132 205.7429245283019 95.8254716981132 205.17924528301887 95.8254716981132 204.05188679245285 95.8254716981132 203.48820754716982 95.8254716981132 202.9245283018868 95.8254716981132 202.36084905660377 95.8254716981132 201.79716981132077 95.8254716981132 201.23349056603774 95.8254716981132 200.1061320754717 95.8254716981132 198.41509433962264 95.8254716981132 196.7240566037736 95.8254716981132 195.03301886792454 95.8254716981132 193.3419811320755 95.8254716981132 191.6509433962264 95.8254716981132 189.95990566037736 95.8254716981132 188.2688679245283 95.8254716981132 186.57783018867926 95.8254716981132 184.88679245283018 95.8254716981132 183.75943396226415 95.8254716981132 182.0683962264151 95.8254716981132 180.37735849056605 95.8254716981132 179.25 95.8254716981132 178.12264150943398 95.8254716981132 176.4316037735849 95.8254716981132 175.30424528301887 95.8254716981132 174.17688679245282 95.8254716981132 173.0495283018868 95.8254716981132 171.92216981132077 95.8254716981132 170.79481132075472 95.8254716981132 169.6674528301887 95.8254716981132 168.54009433962264 95.8254716981132 167.41273584905662 95.8254716981132 166.28537735849056 95.8254716981132 165.15801886792454 95.8254716981132 164.0306603773585 95.8254716981132 163.4669811320755 95.8254716981132 161.7759433962264 95.8254716981132 160.64858490566039 95.8254716981132 159.52122641509433 95.8254716981132 158.3938679245283 95.8254716981132 157.26650943396226 95.8254716981132 156.70283018867926 95.8254716981132 155.5754716981132 95.8254716981132 155.01179245283018 95.8254716981132 154.44811320754718 95.8254716981132 156.70283018867926 95.8254716981132 158.95754716981133 95.8254716981132 161.2122641509434 95.8254716981132 162.90330188679246 96.38915094339623 164.5943396226415 96.38915094339623 166.28537735849056 96.95283018867924 168.54009433962264 96.95283018867924 170.2311320754717 97.51650943396227 171.35849056603774 97.51650943396227 173.0495283018868 98.08018867924528 174.17688679245282 98.08018867924528 174.74056603773585 98.64386792452831 176.4316037735849 98.64386792452831 176.99528301886792 99.20754716981132 178.12264150943398 99.20754716981132 179.81367924528303 99.20754716981132 180.94103773584905 99.20754716981132 182.0683962264151 99.77122641509435 183.19575471698113 100.33490566037736 184.88679245283018 100.33490566037736 186.01415094339623 100.33490566037736 187.14150943396226 100.89858490566039 188.83254716981133 101.4622641509434 189.39622641509433 102.02594339622642 190.52358490566039 102.02594339622642 191.6509433962264 102.58962264150944 192.77830188679246 102.58962264150944 194.4693396226415 102.58962264150944 195.03301886792454 103.15330188679245 196.16037735849056 103.15330188679245 196.7240566037736 103.71698113207547 197.85141509433961 104.28066037735849 198.97877358490567 104.28066037735849 199.5424528301887 105.40801886792453 200.66981132075472 105.40801886792453 201.79716981132077 105.97169811320755 202.9245283018868 106.53537735849056 204.05188679245285 107.09905660377359 205.7429245283019 107.6627358490566 206.87028301886792 108.22641509433963 208.56132075471697 108.79009433962264 210.25235849056605 109.91745283018868 211.37971698113208 110.4811320754717 212.50707547169813 111.04481132075472 214.19811320754718 111.60849056603774 215.3254716981132 112.17216981132076 216.45283018867926 112.73584905660377 217.58018867924528 112.73584905660377 218.1438679245283 113.2995283018868 219.83490566037736 113.2995283018868 220.9622641509434 114.42688679245283 222.08962264150944 114.99056603773585 223.7806603773585 115.55424528301887 224.90801886792454 116.11792452830188 226.5990566037736 117.24528301886792 227.72641509433961 117.24528301886792 228.85377358490567 117.80896226415095 229.9811320754717 118.37264150943396 231.10849056603774 118.93632075471699 231.67216981132077 119.5 232.7995283018868 119.5 234.49056603773585 120.62735849056604 235.05424528301887 121.19103773584906 236.74528301886792 121.75471698113208 237.30896226415095 121.75471698113208 238.43632075471697 122.3183962264151 239 122.88207547169812 240.12735849056605 123.44575471698113 240.69103773584905 123.44575471698113 241.25471698113208 124.00943396226415 241.8183962264151 124.00943396226415 242.38207547169813 124.00943396226415 242.94575471698113 124.57311320754717 244.07311320754718 125.13679245283019 245.2004716981132 125.13679245283019 246.32783018867926 125.13679245283019 246.89150943396226 125.7004716981132 246.89150943396226 125.7004716981132 247.45518867924528 125.7004716981132 248.58254716981133 126.26415094339623 249.14622641509433 126.26415094339623 249.70990566037736 126.82783018867924 250.27358490566039 127.39150943396227 250.8372641509434 127.39150943396227 251.4009433962264 127.95518867924528 251.4009433962264 127.95518867924528 252.52830188679246 127.95518867924528 253.0919811320755 128.5188679245283 253.0919811320755 129.08254716981133 255.34669811320757 130.20990566037736 257.60141509433964 131.3372641509434 258.72877358490564 131.9009433962264 260.4198113207547 131.9009433962264 260.98349056603774 132.46462264150944 261.54716981132077 132.46462264150944 262.1108490566038\",\"primitive\":\"path\",\"stroke\":\"rgb(0, 0, 255)\",\"strokewidth\":\"14\"}],[\"_\",\"return\"]]}]\n</code></pre>\n\n<p>Version: ImageMagick 6.7.7-10 2014-03-06 Q16</p>\n"}, {"tags": ["apache", "perl"], "comments": [{"owner": {"reputation": 41846, "user_id": 926143, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/3396173c3d22988be1a0732d184902aa?s=128&d=identicon&r=PG", "display_name": "7stud", "link": "https://stackoverflow.com/users/926143/7stud"}, "edited": false, "score": 0, "creation_date": 1424600063, "post_id": 28656148, "comment_id": 45609660, "body": "I&#39;ve never used the builtin Apache (or any other builtin).  I installed my own Apache server, and I use that, and I don&#39;t have to restart the server while developing.  Good luck."}, {"owner": {"reputation": 42833, "user_id": 18914, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7a20a39ae2ef47ae042a3eddd5b5bd19?s=128&d=identicon&r=PG", "display_name": "Dave Sherohman", "link": "https://stackoverflow.com/users/18914/dave-sherohman"}, "edited": false, "score": 1, "creation_date": 1424605568, "post_id": 28656148, "comment_id": 45610917, "body": "If you&#39;re using classic CGI (not FastCGI/FCGI, mod_perl modules, etc.) and you need to restart apache whenever you change your CGI code, then You Have Done Something Wrong. Under classic CGI, the CGI code is started up when a request comes in, handles the request, and then exits. It doesn&#39;t interact with the apache process except via stdin/stdout/stderr, so it shouldn&#39;t be able to affect apache&#39;s internal state in any persistent fashion."}, {"owner": {"reputation": 2501, "user_id": 117278, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/eaf2025323bb63b0befc35491afa618e?s=128&d=identicon&r=PG", "display_name": "kristian nissen", "link": "https://stackoverflow.com/users/117278/kristian-nissen"}, "edited": false, "score": 0, "creation_date": 1424606051, "post_id": 28656148, "comment_id": 45611019, "body": "Ill recheck the setup"}, {"owner": {"reputation": 4191, "user_id": 1466640, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c0630f2d5ac5fb844675c58d3d2dfa57?s=128&d=identicon&r=PG&f=1", "display_name": "AKHolland", "link": "https://stackoverflow.com/users/1466640/akholland"}, "edited": false, "score": 0, "creation_date": 1424880714, "post_id": 28656148, "comment_id": 45734547, "body": "This might be useful for you <a href=\"http://perl.apache.org/docs/2.0/api/Apache2/Reload.html\" rel=\"nofollow noreferrer\">perl.apache.org/docs/2.0/api/Apache2/Reload.html</a>"}], "answers": [{"comments": [{"owner": {"reputation": 2501, "user_id": 117278, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/eaf2025323bb63b0befc35491afa618e?s=128&d=identicon&r=PG", "display_name": "kristian nissen", "link": "https://stackoverflow.com/users/117278/kristian-nissen"}, "edited": false, "score": 0, "creation_date": 1424769002, "post_id": 28673923, "comment_id": 45674790, "body": "I realized that I was using mod_perl, I have been struggling getting this running, Ill paste in my httpd.conf"}], "tags": [], "owner": {"reputation": 1489, "user_id": 1233840, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/a610f8ff037b91215b8140a51d279ad6?s=128&d=identicon&r=PG", "display_name": "cnd", "link": "https://stackoverflow.com/users/1233840/cnd"}, "is_accepted": false, "score": 0, "last_activity_date": 1424694797, "creation_date": 1424694797, "answer_id": 28673923, "question_id": 28656148, "link": "https://stackoverflow.com/questions/28656148/perl-development-server-on-os-x-that-is-not-apache/28673923#28673923", "title": "Perl development server on OS X that is not Apache", "body": "<p>You probably have mod_perl or some other caching system installed.</p>\n\n<p>Find your httpd.conf and other settings files, read through them, and disable things that cache code (or post them here so we can show you what to fix)</p>\n"}], "owner": {"reputation": 2501, "user_id": 117278, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/eaf2025323bb63b0befc35491afa618e?s=128&d=identicon&r=PG", "display_name": "kristian nissen", "link": "https://stackoverflow.com/users/117278/kristian-nissen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 56, "favorite_count": 0, "answer_count": 1, "score": -3, "last_activity_date": 1425111711, "creation_date": 1424595611, "last_edit_date": 1425111711, "question_id": 28656148, "link": "https://stackoverflow.com/questions/28656148/perl-development-server-on-os-x-that-is-not-apache", "title": "Perl development server on OS X that is not Apache", "body": "<p><strong>Update</strong> - I have moved to mod_cgi which is working</p>\n\n<p>I am working on a Perl based project and I use my built-in Apache server on my Mac with mod_perl, but damn it sucks! I have no idea what the problem is, but I experience that I have to restart the server nearly each time I change something in the Perl code making this pretty time consuming.</p>\n\n<p>Is there something like PHPs -S available to Perl? I don't want to install an entirely separate web server like nginx or similar in order to work.</p>\n\n<p>httpd.conf below</p>\n\n<pre><code>#\n# This is the main Apache HTTP server configuration file.  It contains the\n# configuration directives that give the server its instructions.\n# See &lt;URL:http://httpd.apache.org/docs/2.4/&gt; for detailed information.\n# In particular, see \n# &lt;URL:http://httpd.apache.org/docs/2.4/mod/directives.html&gt;\n# for a discussion of each configuration directive.\n#\n# Do NOT simply read the instructions in here without understanding\n# what they do.  They're here only as hints or reminders.  If you are unsure\n# consult the online docs. You have been warned.  \n#\n# Configuration and logfile names: If the filenames you specify for many\n# of the server's control files begin with \"/\" (or \"drive:/\" for Win32), the\n# server will use that explicit path.  If the filenames do *not* begin\n# with \"/\", the value of ServerRoot is prepended -- so \"logs/access_log\"\n# with ServerRoot set to \"/usr/local/apache2\" will be interpreted by the\n# server as \"/usr/local/apache2/logs/access_log\", whereas \"/logs/access_log\" \n# will be interpreted as '/logs/access_log'.\n\n#\n# ServerRoot: The top of the directory tree under which the server's\n# configuration, error, and log files are kept.\n#\n# Do not add a slash at the end of the directory path.  If you point\n# ServerRoot at a non-local disk, be sure to specify a local disk on the\n# Mutex directive, if file-based mutexes are used.  If you wish to share the\n# same ServerRoot for multiple httpd daemons, you will need to change at\n# least PidFile.\n#\nServerRoot \"/usr\"\n\n#\n# Mutex: Allows you to set the mutex mechanism and mutex file directory\n# for individual mutexes, or change the global defaults\n#\n# Uncomment and change the directory if mutexes are file-based and the default\n# mutex file directory is not on a local disk or is not appropriate for some\n# other reason.\n#\n# Mutex default:/private/var/run\n\n#\n# Listen: Allows you to bind Apache to specific IP addresses and/or\n# ports, instead of the default. See also the &lt;VirtualHost&gt;\n# directive.\n#\n# Change this to Listen on specific IP addresses as shown below to \n# prevent Apache from glomming onto all bound IP addresses.\n#\n#Listen 12.34.56.78:80\nListen 80\n\n#\n# Dynamic Shared Object (DSO) Support\n#\n# To be able to use the functionality of a module which was built as a DSO you\n# have to place corresponding `LoadModule' lines at this location so the\n# directives contained in it are actually available _before_ they are used.\n# Statically compiled modules (those listed by `httpd -l') do not need\n# to be loaded here.\n#\n# Example:\n# LoadModule foo_module modules/mod_foo.so\n#\nLoadModule authn_file_module libexec/apache2/mod_authn_file.so\n#LoadModule authn_dbm_module libexec/apache2/mod_authn_dbm.so\n#LoadModule authn_anon_module libexec/apache2/mod_authn_anon.so\n#LoadModule authn_dbd_module libexec/apache2/mod_authn_dbd.so\n#LoadModule authn_socache_module libexec/apache2/mod_authn_socache.so\nLoadModule authn_core_module libexec/apache2/mod_authn_core.so\nLoadModule authz_host_module libexec/apache2/mod_authz_host.so\nLoadModule authz_groupfile_module libexec/apache2/mod_authz_groupfile.so\nLoadModule authz_user_module libexec/apache2/mod_authz_user.so\n#LoadModule authz_dbm_module libexec/apache2/mod_authz_dbm.so\n#LoadModule authz_owner_module libexec/apache2/mod_authz_owner.so\n#LoadModule authz_dbd_module libexec/apache2/mod_authz_dbd.so\nLoadModule authz_core_module libexec/apache2/mod_authz_core.so\n#LoadModule authnz_ldap_module libexec/apache2/mod_authnz_ldap.so\nLoadModule access_compat_module libexec/apache2/mod_access_compat.so\nLoadModule auth_basic_module libexec/apache2/mod_auth_basic.so\n#LoadModule auth_form_module libexec/apache2/mod_auth_form.so\n#LoadModule auth_digest_module libexec/apache2/mod_auth_digest.so\n#LoadModule allowmethods_module libexec/apache2/mod_allowmethods.so\n#LoadModule file_cache_module libexec/apache2/mod_file_cache.so\n#LoadModule cache_module libexec/apache2/mod_cache.so\n#LoadModule cache_disk_module libexec/apache2/mod_cache_disk.so\n#LoadModule cache_socache_module libexec/apache2/mod_cache_socache.so\n#LoadModule socache_shmcb_module libexec/apache2/mod_socache_shmcb.so\n#LoadModule socache_dbm_module libexec/apache2/mod_socache_dbm.so\n#LoadModule socache_memcache_module libexec/apache2/mod_socache_memcache.so\n#LoadModule watchdog_module libexec/apache2/mod_watchdog.so\n#LoadModule macro_module libexec/apache2/mod_macro.so\n#LoadModule dbd_module libexec/apache2/mod_dbd.so\n#LoadModule dumpio_module libexec/apache2/mod_dumpio.so\n#LoadModule echo_module libexec/apache2/mod_echo.so\n#LoadModule buffer_module libexec/apache2/mod_buffer.so\n#LoadModule data_module libexec/apache2/mod_data.so\n#LoadModule ratelimit_module libexec/apache2/mod_ratelimit.so\nLoadModule reqtimeout_module libexec/apache2/mod_reqtimeout.so\n#LoadModule ext_filter_module libexec/apache2/mod_ext_filter.so\n#LoadModule request_module libexec/apache2/mod_request.so\n#LoadModule include_module libexec/apache2/mod_include.so\nLoadModule filter_module libexec/apache2/mod_filter.so\n#LoadModule reflector_module libexec/apache2/mod_reflector.so\n#LoadModule substitute_module libexec/apache2/mod_substitute.so\n#LoadModule sed_module libexec/apache2/mod_sed.so\n#LoadModule charset_lite_module libexec/apache2/mod_charset_lite.so\n#LoadModule deflate_module libexec/apache2/mod_deflate.so\n#LoadModule xml2enc_module libexec/apache2/mod_xml2enc.so\n#LoadModule proxy_html_module libexec/apache2/mod_proxy_html.so\nLoadModule mime_module libexec/apache2/mod_mime.so\n#LoadModule ldap_module libexec/apache2/mod_ldap.so\nLoadModule log_config_module libexec/apache2/mod_log_config.so\n#LoadModule log_debug_module libexec/apache2/mod_log_debug.so\n#LoadModule log_forensic_module libexec/apache2/mod_log_forensic.so\n#LoadModule logio_module libexec/apache2/mod_logio.so\nLoadModule env_module libexec/apache2/mod_env.so\n#LoadModule mime_magic_module libexec/apache2/mod_mime_magic.so\n#LoadModule expires_module libexec/apache2/mod_expires.so\nLoadModule headers_module libexec/apache2/mod_headers.so\n#LoadModule usertrack_module libexec/apache2/mod_usertrack.so\n##LoadModule unique_id_module libexec/apache2/mod_unique_id.so\nLoadModule setenvif_module libexec/apache2/mod_setenvif.so\nLoadModule version_module libexec/apache2/mod_version.so\n#LoadModule remoteip_module libexec/apache2/mod_remoteip.so\nLoadModule proxy_module libexec/apache2/mod_proxy.so\nLoadModule proxy_connect_module libexec/apache2/mod_proxy_connect.so\nLoadModule proxy_ftp_module libexec/apache2/mod_proxy_ftp.so\nLoadModule proxy_http_module libexec/apache2/mod_proxy_http.so\nLoadModule proxy_fcgi_module libexec/apache2/mod_proxy_fcgi.so\nLoadModule proxy_scgi_module libexec/apache2/mod_proxy_scgi.so\n#LoadModule proxy_fdpass_module libexec/apache2/mod_proxy_fdpass.so\nLoadModule proxy_wstunnel_module libexec/apache2/mod_proxy_wstunnel.so\nLoadModule proxy_ajp_module libexec/apache2/mod_proxy_ajp.so\nLoadModule proxy_balancer_module libexec/apache2/mod_proxy_balancer.so\nLoadModule proxy_express_module libexec/apache2/mod_proxy_express.so\n#LoadModule session_module libexec/apache2/mod_session.so\n#LoadModule session_cookie_module libexec/apache2/mod_session_cookie.so\n#LoadModule session_dbd_module libexec/apache2/mod_session_dbd.so\nLoadModule slotmem_shm_module libexec/apache2/mod_slotmem_shm.so\n#LoadModule slotmem_plain_module libexec/apache2/mod_slotmem_plain.so\n#LoadModule ssl_module libexec/apache2/mod_ssl.so\n#LoadModule dialup_module libexec/apache2/mod_dialup.so\nLoadModule lbmethod_byrequests_module libexec/apache2/mod_lbmethod_byrequests.so\nLoadModule lbmethod_bytraffic_module libexec/apache2/mod_lbmethod_bytraffic.so\nLoadModule lbmethod_bybusyness_module libexec/apache2/mod_lbmethod_bybusyness.so\n#LoadModule lbmethod_heartbeat_module libexec/apache2/mod_lbmethod_heartbeat.so\nLoadModule unixd_module libexec/apache2/mod_unixd.so\n#LoadModule heartbeat_module libexec/apache2/mod_heartbeat.so\n#LoadModule heartmonitor_module libexec/apache2/mod_heartmonitor.so\n#LoadModule dav_module libexec/apache2/mod_dav.so\nLoadModule status_module libexec/apache2/mod_status.so\nLoadModule autoindex_module libexec/apache2/mod_autoindex.so\n#LoadModule asis_module libexec/apache2/mod_asis.so\n#LoadModule info_module libexec/apache2/mod_info.so\nLoadModule cgi_module libexec/apache2/mod_cgi.so\n#LoadModule dav_fs_module libexec/apache2/mod_dav_fs.so\n#LoadModule dav_lock_module libexec/apache2/mod_dav_lock.so\nLoadModule vhost_alias_module libexec/apache2/mod_vhost_alias.so\nLoadModule negotiation_module libexec/apache2/mod_negotiation.so\nLoadModule dir_module libexec/apache2/mod_dir.so\n#LoadModule imagemap_module libexec/apache2/mod_imagemap.so\n#LoadModule actions_module libexec/apache2/mod_actions.so\n#LoadModule speling_module libexec/apache2/mod_speling.so\n#LoadModule userdir_module libexec/apache2/mod_userdir.so\nLoadModule alias_module libexec/apache2/mod_alias.so\nLoadModule rewrite_module libexec/apache2/mod_rewrite.so\nLoadModule php5_module libexec/apache2/libphp5.so\n# LoadModule hfs_apple_module libexec/apache2/mod_hfs_apple.so\n# LoadModule perl_module libexec/apache2/mod_perl.so\nLoadModule perl_module modules/mod_perl.so\n\n&lt;IfModule unixd_module&gt;\n#\n# If you wish httpd to run as a different user or group, you must run\n# httpd as root initially and it will switch.  \n#\n# User/Group: The name (or #number) of the user/group to run httpd as.\n# It is usually good practice to create a dedicated user and group for\n# running httpd, as with most system services.\n#\n# User _www\n# Group _www\nUser _www\nGroup _www\n\n&lt;/IfModule&gt;\n\n# 'Main' server configuration\n#\n# The directives in this section set up the values used by the 'main'\n# server, which responds to any requests that aren't handled by a\n# &lt;VirtualHost&gt; definition.  These values also provide defaults for\n# any &lt;VirtualHost&gt; containers you may define later in the file.\n#\n# All of these directives may appear inside &lt;VirtualHost&gt; containers,\n# in which case these default settings will be overridden for the\n# virtual host being defined.\n#\n\n#\n# ServerAdmin: Your address, where problems with the server should be\n# e-mailed.  This address appears on some server-generated pages, such\n# as error documents.  e.g. admin@your-domain.com\n#\nServerAdmin you@example.com\n\n#\n# ServerName gives the name and port that the server uses to identify itself.\n# This can often be determined automatically, but we recommend you specify\n# it explicitly to prevent problems during startup.\n#\n# If your host doesn't have a registered DNS name, enter its IP address here.\n#\n#ServerName www.example.com:80\n\n#\n# Deny access to the entirety of your server's filesystem. You must\n# explicitly permit access to web content directories in other \n# &lt;Directory&gt; blocks below.\n#\n&lt;Directory /&gt;\n    AllowOverride none\n    Require all denied\n&lt;/Directory&gt;\n\n#\n# Note that from this point forward you must specifically allow\n# particular features to be enabled - so if something's not working as\n# you might expect, make sure that you have specifically enabled it\n# below.\n#\n\n#\n# DocumentRoot: The directory out of which you will serve your\n# documents. By default, all requests are taken from this directory, but\n# symbolic links and aliases may be used to point to other locations.\n#\nDocumentRoot \"/Library/WebServer/Documents\"\n&lt;Directory \"/Library/WebServer/Documents\"&gt;\n    #\n    # Possible values for the Options directive are \"None\", \"All\",\n    # or any combination of:\n    #   Indexes Includes FollowSymLinks SymLinksifOwnerMatch ExecCGI MultiViews\n    #\n    # Note that \"MultiViews\" must be named *explicitly* --- \"Options All\"\n    # doesn't give it to you.\n    #\n    # The Options directive is both complicated and important.  Please see\n    # http://httpd.apache.org/docs/2.4/mod/core.html#options\n    # for more information.\n    #\n    Options FollowSymLinks Multiviews\n    MultiviewsMatch Any\n\n    #\n    # AllowOverride controls what directives may be placed in .htaccess files.\n    # It can be \"All\", \"None\", or any combination of the keywords:\n    #   AllowOverride FileInfo AuthConfig Limit\n    #\n    # AllowOverride None\n    AllowOverride All\n\n    #\n    # Controls who can get stuff from this server.\n    #\n    Require all granted\n&lt;/Directory&gt;\n\n#\n# DirectoryIndex: sets the file that Apache will serve if a directory\n# is requested.\n#\n&lt;IfModule dir_module&gt;\n    DirectoryIndex index.html\n&lt;/IfModule&gt;\n\n#\n# The following lines prevent .htaccess and .htpasswd files from being \n# viewed by Web clients. \n#\n&lt;FilesMatch \"^\\.([Hh][Tt]|[Dd][Ss]_[Ss])\"&gt;\n    Require all denied\n&lt;/FilesMatch&gt;\n\n#\n# Apple specific filesystem protection.\n#\n&lt;Files \"rsrc\"&gt;\n    Require all denied\n&lt;/Files&gt;\n&lt;DirectoryMatch \".*\\.\\.namedfork\"&gt;\n    Require all denied\n&lt;/DirectoryMatch&gt;\n\n#\n# ErrorLog: The location of the error log file.\n# If you do not specify an ErrorLog directive within a &lt;VirtualHost&gt;\n# container, error messages relating to that virtual host will be\n# logged here.  If you *do* define an error logfile for a &lt;VirtualHost&gt;\n# container, that host's errors will be logged there and not here.\n#\nErrorLog \"/private/var/log/apache2/error_log\"\n\n#\n# LogLevel: Control the number of messages logged to the error_log.\n# Possible values include: debug, info, notice, warn, error, crit,\n# alert, emerg.\n#\nLogLevel warn\n\n&lt;IfModule log_config_module&gt;\n    #\n    # The following directives define some format nicknames for use with\n    # a CustomLog directive (see below).\n    #\n    LogFormat \"%h %l %u %t \\\"%r\\\" %&gt;s %b \\\"%{Referer}i\\\" \\\"%{User-Agent}i\\\"\" combined\n    LogFormat \"%h %l %u %t \\\"%r\\\" %&gt;s %b\" common\n\n    &lt;IfModule logio_module&gt;\n      # You need to enable mod_logio.c to use %I and %O\n      LogFormat \"%h %l %u %t \\\"%r\\\" %&gt;s %b \\\"%{Referer}i\\\" \\\"%{User-Agent}i\\\" %I %O\" combinedio\n    &lt;/IfModule&gt;\n\n    #\n    # The location and format of the access logfile (Common Logfile Format).\n    # If you do not define any access logfiles within a &lt;VirtualHost&gt;\n    # container, they will be logged here.  Contrariwise, if you *do*\n    # define per-&lt;VirtualHost&gt; access logfiles, transactions will be\n    # logged therein and *not* in this file.\n    #\n    CustomLog \"/private/var/log/apache2/access_log\" common\n\n    #\n    # If you prefer a logfile with access, agent, and referer information\n    # (Combined Logfile Format) you can use the following directive.\n    #\n    #CustomLog \"/private/var/log/apache2/access_log\" combined\n&lt;/IfModule&gt;\n\n&lt;IfModule alias_module&gt;\n    #\n    # Redirect: Allows you to tell clients about documents that used to \n    # exist in your server's namespace, but do not anymore. The client \n    # will make a new request for the document at its new location.\n    # Example:\n    # Redirect permanent /foo http://www.example.com/bar\n\n    #\n    # Alias: Maps web paths into filesystem paths and is used to\n    # access content that does not live under the DocumentRoot.\n    # Example:\n    # Alias /webpath /full/filesystem/path\n    #\n    # If you include a trailing / on /webpath then the server will\n    # require it to be present in the URL.  You will also likely\n    # need to provide a &lt;Directory&gt; section to allow access to\n    # the filesystem path.\n\n    #\n    # ScriptAlias: This controls which directories contain server scripts. \n    # ScriptAliases are essentially the same as Aliases, except that\n    # documents in the target directory are treated as applications and\n    # run by the server when requested rather than as documents sent to the\n    # client.  The same rules about trailing \"/\" apply to ScriptAlias\n    # directives as to Alias.\n    #\n    ScriptAliasMatch ^/cgi-bin/((?!(?i:webobjects)).*$) \"/Library/WebServer/CGI-Executables/$1\"\n\n&lt;/IfModule&gt;\n\n&lt;IfModule cgid_module&gt;\n    #\n    # ScriptSock: On threaded servers, designate the path to the UNIX\n    # socket used to communicate with the CGI daemon of mod_cgid.\n    #\n    #Scriptsock cgisock\n&lt;/IfModule&gt;\n\n#\n# \"/Library/WebServer/CGI-Executables\" should be changed to whatever your ScriptAliased\n# CGI directory exists, if you have that configured.\n#\n&lt;Directory \"/Library/WebServer/CGI-Executables\"&gt;\n    AllowOverride None\n    Options None\n    Require all granted\n&lt;/Directory&gt;\n\n&lt;IfModule mime_module&gt;\n    #\n    # TypesConfig points to the file containing the list of mappings from\n    # filename extension to MIME-type.\n    #\n    TypesConfig /private/etc/apache2/mime.types\n\n    #\n    # AddType allows you to add to or override the MIME configuration\n    # file specified in TypesConfig for specific file types.\n    #\n    #AddType application/x-gzip .tgz\n    #\n    # AddEncoding allows you to have certain browsers uncompress\n    # information on the fly. Note: Not all browsers support this.\n    #\n    #AddEncoding x-compress .Z\n    #AddEncoding x-gzip .gz .tgz\n    #\n    # If the AddEncoding directives above are commented-out, then you\n    # probably should define those extensions to indicate media types:\n    #\n    AddType application/x-compress .Z\n    AddType application/x-gzip .gz .tgz\n\n    #\n    # AddHandler allows you to map certain file extensions to \"handlers\":\n    # actions unrelated to filetype. These can be either built into the server\n    # or added with the Action directive (see below)\n    #\n    # To use CGI scripts outside of ScriptAliased directories:\n    # (You will also need to add \"ExecCGI\" to the \"Options\" directive.)\n    #\n    AddHandler cgi-script .cgi .pl\n\n    # For type maps (negotiated resources):\n    #AddHandler type-map var\n\n    #\n    # Filters allow you to process content before it is sent to the client.\n    #\n    # To parse .shtml files for server-side includes (SSI):\n    # (You will also need to add \"Includes\" to the \"Options\" directive.)\n    #\n    #AddType text/html .shtml\n    #AddOutputFilter INCLUDES .shtml\n&lt;/IfModule&gt;\n\n#\n# The mod_mime_magic module allows the server to use various hints from the\n# contents of the file itself to determine its type.  The MIMEMagicFile\n# directive tells the module where the hint definitions are located.\n#\n#MIMEMagicFile /private/etc/apache2/magic\n\n#\n# Customizable error responses come in three flavors:\n# 1) plain text 2) local redirects 3) external redirects\n#\n# Some examples:\n#ErrorDocument 500 \"The server made a boo boo.\"\n#ErrorDocument 404 /missing.html\n#ErrorDocument 404 \"/cgi-bin/missing_handler.pl\"\n#ErrorDocument 402 http://www.example.com/subscription_info.html\n#\n\n#\n# MaxRanges: Maximum number of Ranges in a request before\n# returning the entire resource, or one of the special\n# values 'default', 'none' or 'unlimited'.\n# Default setting is to accept 200 Ranges.\n#MaxRanges unlimited\n\n#\n# EnableMMAP and EnableSendfile: On systems that support it, \n# memory-mapping or the sendfile syscall may be used to deliver\n# files.  This usually improves server performance, but must\n# be turned off when serving from networked-mounted \n# filesystems or if support for these functions is otherwise\n# broken on your system.\n# Defaults: EnableMMAP On, EnableSendfile Off\n#\n#EnableMMAP off\n#EnableSendfile on\n\nTraceEnable off\n\n# Supplemental configuration\n#\n# The configuration files in the /private/etc/apache2/extra/ directory can be \n# included to add extra features or to modify the default configuration of \n# the server, or you may simply copy their contents here and change as \n# necessary.\n\n# Server-pool management (MPM specific)\nInclude /private/etc/apache2/extra/httpd-mpm.conf\n\n# Multi-language error messages\n#Include /private/etc/apache2/extra/httpd-multilang-errordoc.conf\n\n# Fancy directory listings\nInclude /private/etc/apache2/extra/httpd-autoindex.conf\n\n# Language settings\n#Include /private/etc/apache2/extra/httpd-languages.conf\n\n# User home directories\n#Include /private/etc/apache2/extra/httpd-userdir.conf\n\n# Real-time info on requests and configuration\n#Include /private/etc/apache2/extra/httpd-info.conf\n\n# Virtual hosts\nInclude /private/etc/apache2/extra/httpd-vhosts.conf\n\n# Local access to the Apache HTTP Server Manual\n#Include /private/etc/apache2/extra/httpd-manual.conf\n\n# Distributed authoring and versioning (WebDAV)\n#Include /private/etc/apache2/extra/httpd-dav.conf\n\n# Various default settings\n#Include /private/etc/apache2/extra/httpd-default.conf\n\n# Configure mod_proxy_html to understand HTML4/XHTML1\n&lt;IfModule proxy_html_module&gt;\nInclude /private/etc/apache2/extra/proxy-html.conf\n&lt;/IfModule&gt;\n\n# Secure (SSL/TLS) connections\n#Include /private/etc/apache2/extra/httpd-ssl.conf\n#\n# Note: The following must must be present to support\n#       starting without SSL on platforms with no /dev/random equivalent\n#       but a statically compiled-in mod_ssl.\n#\n&lt;IfModule ssl_module&gt;\nSSLRandomSeed startup builtin\nSSLRandomSeed connect builtin\n&lt;/IfModule&gt;\n\nInclude /private/etc/apache2/other/*.conf\n\nInclude /private/etc/apache2/users/*.conf\n#\n# uncomment out the below to deal with user agents that deliberately\n# violate open standards by misusing DNT (DNT *must* be a specific\n# end-user choice)\n#\n#&lt;IfModule setenvif_module&gt;\n#BrowserMatch \"MSIE 10.0;\" bad_DNT\n#&lt;/IfModule&gt;\n#&lt;IfModule headers_module&gt;\n#RequestHeader unset DNT env=bad_DNT\n#&lt;/IfModule&gt;\n</code></pre>\n"}, {"tags": ["perl", "sha"], "comments": [{"owner": {"reputation": 1569, "user_id": 4304965, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/znFBC.jpg?s=128&g=1", "display_name": "Mike Curry", "link": "https://stackoverflow.com/users/4304965/mike-curry"}, "edited": false, "score": 1, "creation_date": 1424590576, "post_id": 28655553, "comment_id": 45607659, "body": "Could you clarify what you are trying to generate a similar hash to? I would be concerned that your intent here violates the intent of using an algorithm like Sha - but hard to understand what you really want here."}, {"owner": {"reputation": 267, "user_id": 2524169, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/a1304c798c6cfeef204c962d90f76f5a?s=128&d=identicon&r=PG", "display_name": "user2524169", "link": "https://stackoverflow.com/users/2524169/user2524169"}, "edited": false, "score": 0, "creation_date": 1424590621, "post_id": 28655553, "comment_id": 45607666, "body": "I want the generated hash to match the first one which as I mentioned <code>test123</code>. This is for a project of mine, it is to prevent brute forcing."}, {"owner": {"reputation": 24966, "user_id": 2001031, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/bd4f0d39f82be9c22f6f01c80d7ad800?s=128&d=identicon&r=PG", "display_name": "Neil Slater", "link": "https://stackoverflow.com/users/2001031/neil-slater"}, "edited": false, "score": 0, "creation_date": 1424590722, "post_id": 28655553, "comment_id": 45607685, "body": "I am not sure if I understand. Just to clarify, you expect the output of <code>generateHash( &quot;ecd71870d1963316a97e3ac3408c9835ad8cf0f3c1bc703527c30265534&zwnj;&#8203;f75ae&quot;, &quot;fx4;)@?%&quot; )</code> to be <code>&quot;test123&quot;</code>?"}, {"owner": {"reputation": 267, "user_id": 2524169, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/a1304c798c6cfeef204c962d90f76f5a?s=128&d=identicon&r=PG", "display_name": "user2524169", "link": "https://stackoverflow.com/users/2524169/user2524169"}, "edited": false, "score": 0, "creation_date": 1424591070, "post_id": 28655553, "comment_id": 45607751, "body": "No I expect it to be <code>ecd71870d1963316a97e3ac3408c9835ad8cf0f3c1bc703527c30265534f&zwnj;&#8203;75ae</code>"}, {"owner": {"reputation": 24966, "user_id": 2001031, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/bd4f0d39f82be9c22f6f01c80d7ad800?s=128&d=identicon&r=PG", "display_name": "Neil Slater", "link": "https://stackoverflow.com/users/2001031/neil-slater"}, "edited": false, "score": 2, "creation_date": 1424591154, "post_id": 28655553, "comment_id": 45607770, "body": "You could of course just return the first param. Which part of the manipulation in the <code>encryptPass</code> function do you think is reversing which hash? You may have a misunderstanding that secure hashes encrypt/decrypt data - they do not. The hash is one-way function, it is not possible to go backwards, other than by brute-force guessing."}], "answers": [{"comments": [{"owner": {"reputation": 24966, "user_id": 2001031, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/bd4f0d39f82be9c22f6f01c80d7ad800?s=128&d=identicon&r=PG", "display_name": "Neil Slater", "link": "https://stackoverflow.com/users/2001031/neil-slater"}, "edited": false, "score": 0, "creation_date": 1424591071, "post_id": 28655647, "comment_id": 45607752, "body": "In fact the OP has created a simple cryptographic PRNG."}, {"owner": {"reputation": 267, "user_id": 2524169, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/a1304c798c6cfeef204c962d90f76f5a?s=128&d=identicon&r=PG", "display_name": "user2524169", "link": "https://stackoverflow.com/users/2524169/user2524169"}, "edited": false, "score": 0, "creation_date": 1424591200, "post_id": 28655647, "comment_id": 45607780, "body": "Well that is true but if I dont get this fixed, I won&#39;t be able to login to my server, I would keep getting an incorrect password error. I don&#39;t want to go more into detail about that however."}, {"owner": {"reputation": 24966, "user_id": 2001031, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/bd4f0d39f82be9c22f6f01c80d7ad800?s=128&d=identicon&r=PG", "display_name": "Neil Slater", "link": "https://stackoverflow.com/users/2001031/neil-slater"}, "reply_to_user": {"reputation": 267, "user_id": 2524169, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/a1304c798c6cfeef204c962d90f76f5a?s=128&d=identicon&r=PG", "display_name": "user2524169", "link": "https://stackoverflow.com/users/2524169/user2524169"}, "edited": false, "score": 2, "creation_date": 1424591423, "post_id": 28655647, "comment_id": 45607832, "body": "@user2524169: Your misunderstanding about use and behaviour of secure hashes is going to make your login code insecure - the opposite of your intent. Look for something pre-packaged instead, such as <code>Authen::Passphrase</code> (use it with bcrypt algorithm, and you will have some good defense against brute forcing)"}, {"owner": {"reputation": 1569, "user_id": 4304965, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/znFBC.jpg?s=128&g=1", "display_name": "Mike Curry", "link": "https://stackoverflow.com/users/4304965/mike-curry"}, "edited": false, "score": 1, "creation_date": 1424591447, "post_id": 28655647, "comment_id": 45607838, "body": "Hashing is a &quot;one way&quot; process. They are not designed to be able to reverse engineer the original value that was hashed. And the easier this is to do, i.e. the easier it is to create a string that hashes to a particular hashed value, the worse the hashing algorithm."}, {"owner": {"reputation": 1569, "user_id": 4304965, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/znFBC.jpg?s=128&g=1", "display_name": "Mike Curry", "link": "https://stackoverflow.com/users/4304965/mike-curry"}, "reply_to_user": {"reputation": 24966, "user_id": 2001031, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/bd4f0d39f82be9c22f6f01c80d7ad800?s=128&d=identicon&r=PG", "display_name": "Neil Slater", "link": "https://stackoverflow.com/users/2001031/neil-slater"}, "edited": false, "score": 0, "creation_date": 1424592257, "post_id": 28655647, "comment_id": 45608013, "body": "@Neil Slater aah ok, will edit - still confused by the question."}, {"owner": {"reputation": 267, "user_id": 2524169, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/a1304c798c6cfeef204c962d90f76f5a?s=128&d=identicon&r=PG", "display_name": "user2524169", "link": "https://stackoverflow.com/users/2524169/user2524169"}, "edited": false, "score": 0, "creation_date": 1424592851, "post_id": 28655647, "comment_id": 45608107, "body": "The point of this is actually a tcp client/server. The client sends an encrypted hash, the server generates a similar hash by reverse engineering and check if both match. Now I could just fetch the already encrypted password from the database and authenticate the client but I don&#39;t want to because I don&#39;t want the client bruteforcing my server and if that&#39;s going to happen then my server is going to be messed with, thus if the clients hash doesn&#39;t match with the generated hash, then the client is removed from the server."}, {"owner": {"reputation": 1569, "user_id": 4304965, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/znFBC.jpg?s=128&g=1", "display_name": "Mike Curry", "link": "https://stackoverflow.com/users/4304965/mike-curry"}, "edited": false, "score": 1, "creation_date": 1424593018, "post_id": 28655647, "comment_id": 45608139, "body": "This is why people implement lock outs or time delays on multiple unsuccessful authentication attempts to avoid brute force. The correct, and standard way to compare passwords, is to compare the hashed value of the submitted password, with the hashed version on the database. Reverse engineering the hashed value is not really a good way to do it."}, {"owner": {"reputation": 1569, "user_id": 4304965, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/znFBC.jpg?s=128&g=1", "display_name": "Mike Curry", "link": "https://stackoverflow.com/users/4304965/mike-curry"}, "edited": false, "score": 2, "creation_date": 1424593124, "post_id": 28655647, "comment_id": 45608165, "body": "Also, the client would not generally send a hashed version of the password, they would send the plaintext (over an encrypted communication protocol), and the server side would hash it - this allows the server to also apply an appropriate salting strategy. Sending a hashed or encrypted version is possible - but there are considerations."}, {"owner": {"reputation": 24966, "user_id": 2001031, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/bd4f0d39f82be9c22f6f01c80d7ad800?s=128&d=identicon&r=PG", "display_name": "Neil Slater", "link": "https://stackoverflow.com/users/2001031/neil-slater"}, "reply_to_user": {"reputation": 267, "user_id": 2524169, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/a1304c798c6cfeef204c962d90f76f5a?s=128&d=identicon&r=PG", "display_name": "user2524169", "link": "https://stackoverflow.com/users/2524169/user2524169"}, "edited": false, "score": 1, "creation_date": 1424593625, "post_id": 28655647, "comment_id": 45608256, "body": "@user2524169: Are you writing code to <i>authenticate</i> the client for a series of requests, or writing session validation code that is supposed to run on <i>each</i> request from the client?"}, {"owner": {"reputation": 267, "user_id": 2524169, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/a1304c798c6cfeef204c962d90f76f5a?s=128&d=identicon&r=PG", "display_name": "user2524169", "link": "https://stackoverflow.com/users/2524169/user2524169"}, "reply_to_user": {"reputation": 24966, "user_id": 2001031, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/bd4f0d39f82be9c22f6f01c80d7ad800?s=128&d=identicon&r=PG", "display_name": "Neil Slater", "link": "https://stackoverflow.com/users/2001031/neil-slater"}, "edited": false, "score": 0, "creation_date": 1424604850, "post_id": 28655647, "comment_id": 45610745, "body": "@Neil Slater I&#39;m authenticating multiple clients with different passwords, so I want each encryption generated by the client to match the encryption generated by the server. Please help me fix the script, I&#39;ve done the same thing with md5 before using the same method and it worked. I also updated the script a bit, I made a small mistake."}, {"owner": {"reputation": 24966, "user_id": 2001031, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/bd4f0d39f82be9c22f6f01c80d7ad800?s=128&d=identicon&r=PG", "display_name": "Neil Slater", "link": "https://stackoverflow.com/users/2001031/neil-slater"}, "reply_to_user": {"reputation": 267, "user_id": 2524169, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/a1304c798c6cfeef204c962d90f76f5a?s=128&d=identicon&r=PG", "display_name": "user2524169", "link": "https://stackoverflow.com/users/2524169/user2524169"}, "edited": false, "score": 2, "creation_date": 1424607496, "post_id": 28655647, "comment_id": 45611355, "body": "@user2524169: Please show how your MD5 code worked, that would help clarify what you need. I doubt it was the same at all. Also please update your example output, it <i>still</i> does not match your code, making it very difficult to understand you. Your existing script is not fixable for any purpose that I can see."}], "tags": [], "owner": {"reputation": 1569, "user_id": 4304965, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/znFBC.jpg?s=128&g=1", "display_name": "Mike Curry", "link": "https://stackoverflow.com/users/4304965/mike-curry"}, "is_accepted": false, "score": 1, "last_activity_date": 1424593511, "last_edit_date": 1495535049, "creation_date": 1424591007, "answer_id": 28655647, "question_id": 28655553, "link": "https://stackoverflow.com/questions/28655553/get-matching-sha256-algorithm-perl/28655647#28655647", "title": "Get Matching SHA256 Algorithm - Perl", "body": "<p>SHA, as a hashing algorithm, is designed to prevent collisions. i.e. part of its power, and usefulness, is in limiting the strings which will hash to the same resultant value.</p>\n\n<p>It sounds like you want to find a second string which will hash to the same hashed value as test123 hashes to. This kind of goes the intent of using SHA in the first place.</p>\n\n<p>It is possible to brute force the values with SHA, i.e. given a hashed value, you can brute force the value that was hashed by computing hashes and comparing the hashed value to the target value. This will take some time. Other algorithms, such as bcrypt, are more difficult to brute force, but are more computationally expensive for you also.</p>\n\n<p>Here is another post related to brute forcing SHA-512, which is effectively equivalent in algorithm to SHA-256. The linked post is Java as opposed to Perl, but the concepts are language agnostic. <a href=\"https://stackoverflow.com/questions/6776050/how-long-to-brute-force-a-salted-sha-512-hash-salt-provided\">How long to brute force a salted SHA-512 hash? (salt provided)</a></p>\n"}, {"tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": false, "score": 1, "last_activity_date": 1424604999, "creation_date": 1424604999, "answer_id": 28657351, "question_id": 28655553, "link": "https://stackoverflow.com/questions/28655553/get-matching-sha256-algorithm-perl/28657351#28657351", "title": "Get Matching SHA256 Algorithm - Perl", "body": "<p>You're badly misunderstanding what a hash is for. It's a ONE WAY street by design. It's also designed to have a very low probability of 'collision' - two source values that hash to the same result. And by 'very low' I mean 'for practical purposes, it doesn't'. A constrained string - such as a password - simply won't do it. </p>\n\n<p>So what typically happens for passwords - my client takes my password, generates a hash, sends it to the server. </p>\n\n<p>The server compares that against it's list - if the hash matches, we assume that my password was correct. This means at no point is my password sent 'in the clear' nor is possible to work out what it was by grabbing the hash. </p>\n\n<p>To avoid duplicates showing up (e.g. two people with the same password) usually you'll hash some unique values. Simplistically - username + password, when hashed.</p>\n\n<p>The purpose of authenticating against hashes, is to ensure the cleartext password is never required to be held anywhere - and that is all. You still need to secure you communication channel (to avoid replay attacks) and you still need to protect against brute force guessing of password. </p>\n\n<p>But brute forcing hashes is <em>by design</em> an expensive thing to attempt. You will see places where 'rainbow tables' exist, where people have taken every valid password string, and hashed it, so they can rapidly crack retrieved hashes from the server. These are big, and took a long time to generate initially though, and are defeated at least partially by salting or embedding usernames into the hash. </p>\n\n<p>But I cannot re-iterate strongly enough - don't ever hand roll your own security unless you're REALLY sure what's going on. You'll build in weaknesses that you didn't even know existed, and your only 'security' is that no one's bothered to look yet. </p>\n"}, {"comments": [{"owner": {"reputation": 24966, "user_id": 2001031, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/bd4f0d39f82be9c22f6f01c80d7ad800?s=128&d=identicon&r=PG", "display_name": "Neil Slater", "link": "https://stackoverflow.com/users/2001031/neil-slater"}, "edited": false, "score": 0, "creation_date": 1424710035, "post_id": 28673617, "comment_id": 45650669, "body": "Given that the bcrypt algorithm is based on a hashing algorithm, I am not sure about your &quot;word of caution&quot;? Either way, although this is good advice for storing authentication data, it is not too clear whether it addresses the OP&#39;s question, and may have been better as a comment instead."}], "tags": [], "owner": {"reputation": 1489, "user_id": 1233840, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/a610f8ff037b91215b8140a51d279ad6?s=128&d=identicon&r=PG", "display_name": "cnd", "link": "https://stackoverflow.com/users/1233840/cnd"}, "is_accepted": false, "score": 0, "last_activity_date": 1424693758, "creation_date": 1424693758, "answer_id": 28673617, "question_id": 28655553, "link": "https://stackoverflow.com/questions/28655553/get-matching-sha256-algorithm-perl/28673617#28673617", "title": "Get Matching SHA256 Algorithm - Perl", "body": "<p>You should not do this.  It is insecure and vulnerable to dictionary attacks.</p>\n\n<p>The correct way to turn passwords into things you store, is to use a PBKDF like \"bcrypt\"  (password-based-key-derivation-function).</p>\n\n<p>Check out Digest::Bcrypt</p>\n\n<p>Word of caution: if anyone ever tells you (or helps you) to use a \"hash\" for storing passwords, they do not know anything about security or cryptography.  Smile at them, and ignore everything they say next.</p>\n"}], "owner": {"reputation": 267, "user_id": 2524169, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/a1304c798c6cfeef204c962d90f76f5a?s=128&d=identicon&r=PG", "display_name": "user2524169", "link": "https://stackoverflow.com/users/2524169/user2524169"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 387, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1424693758, "creation_date": 1424590076, "last_edit_date": 1424604822, "question_id": 28655553, "link": "https://stackoverflow.com/questions/28655553/get-matching-sha256-algorithm-perl", "title": "Get Matching SHA256 Algorithm - Perl", "body": "<p>Hi I'm trying to generate a similar sha256 hex, but I can't seem to get a matching one. I want to generate just about any password using a random key.</p>\n\n<p>In this case, I'm using <code>test123</code> : <code>ecd71870d1963316a97e3ac3408c9835ad8cf0f3c1bc703527c30265534f75ae</code></p>\n\n<p>Here is my code:</p>\n\n<pre><code> print \"Final Hash: \" . generateHash(\"ecd71870d1963316a97e3ac3408c9835ad8cf0f3c1bc703527c30265534f75ae\", \"fx4;)@?%\") . chr(10);\n\n sub generateHash {\n   my ($strPass, $strLoginKey) = @_;\n   my $strHash = encryptPass(uc($strPass), $strLoginKey);                            \n   return $strHash;\n }\n\nsub encryptPass {\n   my ($strPassword, $strKey) = @_;\n   my $strSalt = 'Y(02.&gt;\\'H}t\":E1';\n   my $strSwapped = swapSHA($strPassword);\n   print \"First Swap: \" . $strSwapped . chr(10);\n   my $strHash = sha256_hex($strSwapped . $strKey . $strSalt);\n   print \"Hashed Into: \" . $strHash . chr(10);\n   my $strSwappedHash = swapSHA($strHash) . chr(10);\n   print \"Last Swapped: \" . $strSwappedHash . chr(10);\n   return $strSwappedHash;\n}\n\nsub swapSHA {\n   my ($strHash) = @_;\n   my $strSwapped = substr($strHash, 32, 32);\n   $strSwapped .= substr($strHash, 0, 32);\n   return $strSwapped;\n}\n</code></pre>\n\n<p>Any help would be greatly appreciated! </p>\n\n<p>The output I get:</p>\n\n<p><code>Original Hash: ecd71870d1963316a97e3ac3408c9835ad8cf0f3c1bc703527c30265534f75ae\nHashed Into: 34b6bdd73b3943d7baebf7d0ff54934849a38ee09c387435727e2b88566b4b85\n     Last Swapped: 49a38ee09c387435727e2b88566b4b8534b6bdd73b3943d7baebf7d0ff549348 \n    Final Hash: 34b6bdd73b3943d7baebf7d0ff54934849a38ee09c387435727e2b88566b4b85</code></p>\n\n<p>I am trying to make the output have final value same as input</p>\n\n<pre><code>Final Hash: ecd71870d1963316a97e3ac3408c9835ad8cf0f3c1bc703527c30265534f75ae\n</code></pre>\n\n<p>and I want to do this by reversing the \"Hashed Into\" value.</p>\n"}, {"tags": ["perl", "python-3.x", "bioinformatics"], "comments": [{"owner": {"reputation": 4883, "user_id": 62138, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/65881e840f44a05c4f3b0aea257da42e?s=128&d=identicon&r=PG", "display_name": "salparadise", "link": "https://stackoverflow.com/users/62138/salparadise"}, "edited": false, "score": 1, "creation_date": 1424576613, "post_id": 28654247, "comment_id": 45605464, "body": "what is the script not doing when you run it?"}, {"owner": {"reputation": 11, "user_id": 4589414, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/03284f71c49ff9222003044b9b8962a2?s=128&d=identicon&r=PG&f=1", "display_name": "theendless219", "link": "https://stackoverflow.com/users/4589414/theendless219"}, "reply_to_user": {"reputation": 4883, "user_id": 62138, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/65881e840f44a05c4f3b0aea257da42e?s=128&d=identicon&r=PG", "display_name": "salparadise", "link": "https://stackoverflow.com/users/62138/salparadise"}, "edited": false, "score": 0, "creation_date": 1424576761, "post_id": 28654247, "comment_id": 45605489, "body": "I want it to remove the HETATMs from the PDB file. Instead it is just printing all HETATM lines in the text file."}], "answers": [{"comments": [{"owner": {"reputation": 12075, "user_id": 1137055, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/59d7b43b9eb7d01bd8f7e51febe6053c?s=128&d=identicon&r=PG", "display_name": "dgw", "link": "https://stackoverflow.com/users/1137055/dgw"}, "edited": false, "score": 2, "creation_date": 1424682336, "post_id": 28654905, "comment_id": 45634115, "body": "Some general hints, please format your code using proper indention to make it more readable. <code>use strict;</code> and <code>use warnings;</code> should also be applied. And use the three argument version of open with lexical filehandles and proper error handling <code>open my $filehandle , &#39;&lt;&#39; , $filename or die &quot;Cannot read &#39;$filename&#39;: $!&quot;;</code>."}, {"owner": {"reputation": 5455, "user_id": 3961170, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/PtFol.jpg?s=128&g=1", "display_name": "mkHun", "link": "https://stackoverflow.com/users/3961170/mkhun"}, "reply_to_user": {"reputation": 12075, "user_id": 1137055, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/59d7b43b9eb7d01bd8f7e51febe6053c?s=128&d=identicon&r=PG", "display_name": "dgw", "link": "https://stackoverflow.com/users/1137055/dgw"}, "edited": false, "score": 0, "creation_date": 1424770499, "post_id": 28654905, "comment_id": 45675628, "body": "@dgw Thank you for you comment. See my edit thats enough or not?"}], "tags": [], "owner": {"reputation": 5455, "user_id": 3961170, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/PtFol.jpg?s=128&g=1", "display_name": "mkHun", "link": "https://stackoverflow.com/users/3961170/mkhun"}, "is_accepted": false, "score": 0, "last_activity_date": 1424770440, "last_edit_date": 1424770440, "creation_date": 1424583340, "answer_id": 28654905, "question_id": 28654247, "link": "https://stackoverflow.com/questions/28654247/removing-hetatms-from-pdb-files/28654905#28654905", "title": "Removing HETATMs from PDB files", "body": "<p>In PERL Try this</p>\n\n<pre><code>use warnings;\nuse strict;\nmy $filename = \"4BI7.pdb\";\ndie \"Error opening file\" unless (open my $handler , '&lt;' , \"$filename\");\nopen my $newfile, '&gt;', \"filename.pdb\" or  die \"New file not create\";\nwhile($_ = &lt;$handler&gt;){\n    print $newfile \"$_\" unless /^HETATM.*/;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 121, "user_id": 3258321, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b8ef30d4036eb26a6904b3c4c6b63883?s=128&d=identicon&r=PG&f=1", "display_name": "thulsadoom", "link": "https://stackoverflow.com/users/3258321/thulsadoom"}, "is_accepted": false, "score": 1, "last_activity_date": 1425652155, "creation_date": 1425652155, "answer_id": 28900900, "question_id": 28654247, "link": "https://stackoverflow.com/questions/28654247/removing-hetatms-from-pdb-files/28900900#28900900", "title": "Removing HETATMs from PDB files", "body": "<p>In R you can use the <a href=\"http://thegrantlab.org/bio3d/\" rel=\"nofollow\">Bio3D package</a>:</p>\n\n<pre><code>library(bio3d)\n\n# read pdb\npdb &lt;- read.pdb(\"1hel\")\n\n# make a subset based on TYPE\nnew &lt;- trim.pdb(pdb, type=\"ATOM\")\n\n# write new pdb to disk\nwrite.pdb(new, file=\"1hel_ATOM.pdb\")\n</code></pre>\n\n<p>This can also be combined with various other selection criteria, e.g. chain id, residue number, residue name, etc etc:</p>\n\n<pre><code># select ATOM records for chain A\nn1 &lt;- trim.pdb(pdb, type=\"ATOM\", chain=\"A\")\n\n# select residue numbers 10 through 20\nn2 &lt;- trim.pdb(pdb, resno=10:20)\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 4589414, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/03284f71c49ff9222003044b9b8962a2?s=128&d=identicon&r=PG&f=1", "display_name": "theendless219", "link": "https://stackoverflow.com/users/4589414/theendless219"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 583, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1425652155, "creation_date": 1424576459, "question_id": 28654247, "link": "https://stackoverflow.com/questions/28654247/removing-hetatms-from-pdb-files", "title": "Removing HETATMs from PDB files", "body": "<p>I want to remove the heteroatoms (HETATM)s from PDB text files that I have locally. I found a perl script that apparently needs a quick tweak to make it do what I want but I'm unsure of what that tweak is. </p>\n\n<pre><code>!#/usr/bin/env perl\n\nopen(FILE,\"file.pdb\");\n@file=&lt;FILE&gt;;\nforeach (@file){\nif (/^HETATM/){\nprint $_,\"\\n\";\n}}\n</code></pre>\n\n<p>Also, if anyone has an existing perl or python script that they are OK with sharing, I would greatly appreciate it. </p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1424561676, "post_id": 28652593, "comment_id": 45602409, "body": "Interesting - yes, this seems to be the case. Looks like it returns the line number of the &#39;loop&#39;. The <code>__LINE__</code> macro may help troubleshoot."}], "answers": [{"tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": false, "score": 2, "last_activity_date": 1424562905, "last_edit_date": 1424562905, "creation_date": 1424562090, "answer_id": 28652747, "question_id": 28652593, "link": "https://stackoverflow.com/questions/28652593/perls-caller-function-returning-incorrect-line-number/28652747#28652747", "title": "Perl&#39;s caller() function returning incorrect line number", "body": "<p>I suspect this may be down to statement separators (semicolons). As you may have spotted - with the code you're running, the line number reported by <code>caller</code> is the same as the <code>foreach</code> loop. </p>\n\n<p>So I <em>think</em> what is happening, is because there's no semicolons. </p>\n\n<p>If you were to do a multi-line sub call, <code>caller</code> would report the first line:</p>\n\n<pre><code>print \"first call:\", __LINE__, \"\\n\";\nprint \"Start of statement\\n\",\n\"a bit more on line \", __LINE__, \"\\n\",\nprint_line(\n    1,\n\n    2,\n\n    3,\n\n    5,\n\n);\n</code></pre>\n\n<p>You get the line number of the start of the call, not the end. So I think that's what you're getting - the statement starts when the semicolon statement separator occurs - which is the <code>foreach</code> line in the first example. </p>\n\n<p>So as a workaround - I might suggest making use of <a href=\"http://perldoc.perl.org/functions/__LINE__.html\" rel=\"nofollow\"><code>__LINE__</code></a>. Although I'd also perhaps suggest not worrying about it <em>too</em> much, because it's still going to point you to the right place in the code. </p>\n\n<p>You get something similar if you use <code>croak</code>, for presumably the same reason. </p>\n"}, {"comments": [{"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1424563538, "post_id": 28652873, "comment_id": 45602867, "body": "Good spot. Interesting. What are you using to extract the optimisations of the code?"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1424603003, "post_id": 28652873, "comment_id": 45610378, "body": "Although I can&#39;t see it written up, it looks like this is a bug that has been fixed. Perl 5 version 20 doesn&#39;t display this behaviour."}, {"owner": {"reputation": 185733, "user_id": 152948, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/194ef8f807c34a9d7aab0e11a8674768?s=128&d=identicon&r=PG", "display_name": "hobbs", "link": "https://stackoverflow.com/users/152948/hobbs"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1424656055, "post_id": 28652873, "comment_id": 45626368, "body": "@Borodin funny, I suspected that so the first thing I did was test with 5.20 \u2014 and I still see it. I wonder what&#39;s different."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1424656211, "post_id": 28652873, "comment_id": 45626393, "body": "I ran mine one Windows, and you&#39;re probably on Linux? Although I can&#39;t imagine how that would make a difference."}], "tags": [], "owner": {"reputation": 185733, "user_id": 152948, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/194ef8f807c34a9d7aab0e11a8674768?s=128&d=identicon&r=PG", "display_name": "hobbs", "link": "https://stackoverflow.com/users/152948/hobbs"}, "is_accepted": false, "score": 7, "last_activity_date": 1424563244, "creation_date": 1424563244, "answer_id": 28652873, "question_id": 28652593, "link": "https://stackoverflow.com/questions/28652593/perls-caller-function-returning-incorrect-line-number/28652873#28652873", "title": "Perl&#39;s caller() function returning incorrect line number", "body": "<p>I think potentially it is a bug, because the same behavior doesn't occur if you replace</p>\n\n<pre><code>foreach (my $x = 0 ; $x &lt; 1 ; $x++) {\n</code></pre>\n\n<p>with</p>\n\n<pre><code>foreach my $x (0 .. 0) {\n</code></pre>\n\n<p>I don't understand <em>exactly</em> what's happening, but by comparing the optrees of the two different versions, I think that a <code>nextstate</code> op is getting improperly optimized out. My version has</p>\n\n<pre><code>&lt;;&gt; nextstate(main 4 lineno.pl:11) v:*,&amp;,x*,x&amp;,x$,$ -&gt;8\n</code></pre>\n\n<p>as the left sibling of the <code>entersub</code> op that calls <code>print_line</code>, while yours has</p>\n\n<pre><code>&lt;0&gt; ex-nextstate v -&gt;8\n</code></pre>\n\n<p>which has been taken out of the flow of execution.</p>\n\n<p>It wouldn't hurt to write this up as a <a href=\"http://p3rl.org/perlbug\">perlbug</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 5, "last_activity_date": 1424708696, "creation_date": 1424708696, "answer_id": 28678354, "question_id": 28652593, "link": "https://stackoverflow.com/questions/28652593/perls-caller-function-returning-incorrect-line-number/28678354#28678354", "title": "Perl&#39;s caller() function returning incorrect line number", "body": "<pre><code>$ perl -MO=Concise a.pl\nj  &lt;@&gt; leave[1 ref] vKP/REFC -&gt;(end)\n1     &lt;0&gt; enter -&gt;2\n2     &lt;;&gt; nextstate(main 6 a.pl:5) v:*,&amp;,{,x*,x&amp;,x$,$ -&gt;3\n5     &lt;2&gt; sassign vKS/2 -&gt;6\n3        &lt;$&gt; const[IV 0] s -&gt;4\n4        &lt;0&gt; padsv[$x:3,5] sRM*/LVINTRO -&gt;5\n6     &lt;0&gt; unstack v* -&gt;7\ni     &lt;2&gt; leaveloop vK/2 -&gt;j\n7        &lt;{&gt; enterloop(next-&gt;b last-&gt;i redo-&gt;8) v -&gt;e\n-        &lt;1&gt; null vK/1 -&gt;i\nh           &lt;|&gt; and(other-&gt;8) vK/1 -&gt;i\ng              &lt;2&gt; lt sK/2 -&gt;h\ne                 &lt;0&gt; padsv[$x:3,5] s -&gt;f\nf                 &lt;$&gt; const[IV 1] s -&gt;g\n-              &lt;@&gt; lineseq vK -&gt;-\n-                 &lt;@&gt; scope vK -&gt;b                       &lt;---\n-                    &lt;0&gt; ex-nextstate v -&gt;8              &lt;---\na                    &lt;1&gt; entersub[t5] vKS/TARG,2 -&gt;b\n-                       &lt;1&gt; ex-list K -&gt;a\n8                          &lt;0&gt; pushmark s -&gt;9\n-                          &lt;1&gt; ex-rv2cv sK/2 -&gt;-\n9                             &lt;#&gt; gv[*print_line] s/EARLYCV -&gt;a\nc                 &lt;1&gt; preinc[t2] vK/1 -&gt;d\nb                    &lt;0&gt; padsv[$x:3,5] sRM -&gt;c\nd                 &lt;0&gt; unstack v -&gt;e\na.pl syntax OK\n</code></pre>\n\n<p>There's some optimization going on. The <code>scope</code> was deemed unnecessary and optimized away. (Notice the \"<code>-</code>\" meaning it's never reached.)</p>\n\n<p>But at the same time, that removed the <code>nextstate</code> op, which is what sets the line number for warnings and for <code>caller</code>.</p>\n\n<p>So, it's a bug that results from an improper optimization.</p>\n"}, {"tags": [], "owner": {"reputation": 5822, "user_id": 546218, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/f6f59bf629073f1eb8cdd492d10386c4?s=128&d=identicon&r=PG", "display_name": "rocky", "link": "https://stackoverflow.com/users/546218/rocky"}, "is_accepted": false, "score": 1, "last_activity_date": 1531679261, "last_edit_date": 1531679261, "creation_date": 1531667846, "answer_id": 51349698, "question_id": 28652593, "link": "https://stackoverflow.com/questions/28652593/perls-caller-function-returning-incorrect-line-number/51349698#51349698", "title": "Perl&#39;s caller() function returning incorrect line number", "body": "<p>As has been pointed out this is really a bug in Perl going back at least to 5.10 or 11 years, but in reality I think longer. </p>\n\n<p>It has been reported as Perl bug <a href=\"https://rt.perl.org/Public/Bug/Display.html?id=133239\" rel=\"nofollow noreferrer\">perl #133239</a> and although it is alleged that it is not <em>that</em> hard to fix, it hasn't been. It may not also be that <em>easy</em> to fix, has performance ramifications since adding COP's slows things down, and possibly some administrative work would be needed to adjust tests. </p>\n\n<p>And even if this bug were fixed, it would be only fixed in versions Perl 5.29 and later, or so. This isn't going to help you with 5.10. </p>\n\n<p>So here is another tack that doesn't rely on a change to Perl's core, and therefore puts users more in control. However, I'll say up front it is a bit experimental and unless people are willing to spend coding effort on it, it's not likely to go back as far as 5.10. Right now the earliest Perl version I have working is 5.14, 7 years ago as if this writing.</p>\n\n<p>Using <a href=\"https://metacpan.org/pod/distribution/B-DeparseTree/lib/B/DeparseTree.pod\" rel=\"nofollow noreferrer\">B::DeparseTree</a> you can write a different, and I think better <em>caller()</em> which can show you the location of the caller with more detail. Here is your program modified to do that: </p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\nuse B::DeparseTree::Fragment;\nuse Devel::Callsite;\n\nsub dt_caller\n{\n    my $level = $_ ? $_ : 0;\n    # Pick up the right caller's OP address.\n    my $addr =  callsite($level+1);\n    # Hack alert 'main::main' should be replaced with the function name if not the top level. caller() is a little off-sync here.\n    my $op_info = deparse_offset('main::main', $addr);\n    # When Perl is in the middle of call, it has already advanced the PC,\n    # so we need to go back to the preceding op. \n    $op_info = get_prev_addr_info($op_info);\n    my $extract_texts = extract_node_info($op_info);\n    print join(\"\\n\", @$extract_texts), \"\\n\";\n}\n\nforeach( my $x =0 ; $x &lt; 1; $x++) {\n  print_line();\n}\n\nsub print_line {\n    dt_caller();\n}\n</code></pre>\n\n<p>When run it prints: </p>\n\n<pre><code>$ perl bug-caller.pl\nprint_line()\n------------\n</code></pre>\n\n<p><em>dt_caller()</em> could and should be wrapped up into a package like Carp so you don't see all of that ugliness. However I'll leave that for someone else. And I'll mention that just to get this working, there were some bug fixes I had to make, so this works only starting with version 3.4.0 of <em>B::DeparseTree</em>. </p>\n"}], "owner": {"reputation": 2287, "user_id": 1641112, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/00bee18fb974a0057fb61a56faf66052?s=128&d=identicon&r=PG", "display_name": "StevieD", "link": "https://stackoverflow.com/users/1641112/stevied"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1015, "favorite_count": 0, "accepted_answer_id": 28678354, "answer_count": 4, "score": 6, "last_activity_date": 1531679261, "creation_date": 1424560899, "last_edit_date": 1424708353, "question_id": 28652593, "link": "https://stackoverflow.com/questions/28652593/perls-caller-function-returning-incorrect-line-number", "title": "Perl&#39;s caller() function returning incorrect line number", "body": "<p>I've got the following script running on Perl 5.10.1:</p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\n\nforeach( my $x =0 ; $x &lt; 1; $x++) {   # Line 5\n  print_line();                       # Line 6\n} \n\nsub print_line {\n  print \"Function call from line: \" . [caller(0)]-&gt;[2] . \"\\n\";\n}\n</code></pre>\n\n<p>Despite the call to the subroutine coming from line 6, the script outputs the line number of the start of the C-style for statement:</p>\n\n<pre><code>Function call from line: 5\n</code></pre>\n\n<p>What's really weird is if I throw a random statement into one of the blank line in the C-style for loop, <code>caller</code> returns the correct line number:</p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\n\nforeach( my $x =0 ; $x &lt; 1; $x++) {\n  my $x = 3;\n  print_line();  # Line 7\n}\n\nsub print_line {\n  print \"Function call from line: \" . [caller(0)]-&gt;[2] . \"\\n\";\n}\n</code></pre>\n\n<p>The above script correctly outputs: </p>\n\n<pre><code>Function call from line: 7\n</code></pre>\n\n<p>Is this some kind of bug or is there something I can do to get <code>caller</code> to accurately report the line number?</p>\n"}, {"tags": ["json", "perl"], "comments": [{"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1424554028, "post_id": 28651316, "comment_id": 45600418, "body": "What do you currently get with your encoded JSON?"}, {"owner": {"reputation": 1748, "user_id": 4532614, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f230595feac883e1643f5ba43084e895?s=128&d=identicon&r=PG&f=1", "display_name": "TobyLL", "link": "https://stackoverflow.com/users/4532614/tobyll"}, "edited": false, "score": 2, "creation_date": 1424554669, "post_id": 28651316, "comment_id": 45600619, "body": "Do you have <code>use strict</code> on in your Perl script?  I think the scope for <code>%json_point2</code> and <code>%json_values</code> could cause you problems.  Make sure you use <code>use strict</code>, and you probably want to declare <code>my %json_point2</code> and <code>my $json_values</code> inside your while loop."}, {"owner": {"reputation": 81, "user_id": 2001479, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/401bffd7e08dd51020a9db4831a97f24?s=128&d=identicon&r=PG", "display_name": "Tom", "link": "https://stackoverflow.com/users/2001479/tom"}, "reply_to_user": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 1, "creation_date": 1424555819, "post_id": 28651316, "comment_id": 45600927, "body": "@Sobrique and TobyLL I have never thought about this. You are both so right. Thanks a lot for pointing me into the right direction."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1424559411, "post_id": 28651316, "comment_id": 45601876, "body": "Please, you <i>must always</i> <code>use strict</code> and <code>use warnings</code> at the top of every Perl source file you write. It is offensive of you to ask for free help with your code when you haven&#39;t made even this minimal step to try to solve the problem yourself."}, {"owner": {"reputation": 81, "user_id": 2001479, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/401bffd7e08dd51020a9db4831a97f24?s=128&d=identicon&r=PG", "display_name": "Tom", "link": "https://stackoverflow.com/users/2001479/tom"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1424596682, "post_id": 28651316, "comment_id": 45608863, "body": "@Borodin the script actually uses both strict and warnings right from the beginning. I just copied here the part of the script that causes problems. Even thou I used strict I misplaced the scope of the variables. Nevertheless thanks for pointing to its importance."}], "answers": [{"tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": true, "score": 7, "last_activity_date": 1425420414, "last_edit_date": 1425420414, "creation_date": 1424554717, "answer_id": 28651673, "question_id": 28651316, "link": "https://stackoverflow.com/questions/28651316/encode-complex-json-structure-using-perl/28651673#28651673", "title": "Encode complex JSON structure using Perl", "body": "<p>I'm pretty sure you problem will be because you're using a globally scoped hash for <code>%json_point</code> and <code>%json_point2</code>.\nYou see, the root of this is - you simply don't get a list of hashes. You get a list of hash <em>references</em>. </p>\n\n<p>So the problem here is - when you push a reference to your hash into <code>@all_values</code> - you're pushing the same reference each time. But then you're overwriting the contents of the hash that you're referencing. </p>\n\n<p>Try this:</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\nuse Data::Dumper;\n\nmy %hash_thing;\nmy @all_values; \n\nfor ( 1..3 ) {\n   %hash_thing = ( \"test\" =&gt; $_ );\n   push ( @all_values, \\%hash_thing ) ; \n}\n\nprint join ( \"\\n\", @all_values );\nprint Dumper \\@all_values;\n</code></pre>\n\n<p>And you'll see you have the same 'value' 3 times:</p>\n\n<pre><code>HASH(0x74478c)\nHASH(0x74478c)\nHASH(0x74478c)\n</code></pre>\n\n<p>And so if you dump it, then of course - you don't get the right array - and so your encoded JSON doesn't work either.</p>\n\n<pre><code>$VAR1 = [\n          {\n            'test' =&gt; 3\n          },\n          $VAR1-&gt;[0],\n          $VAR1-&gt;[0]\n        ];\n</code></pre>\n\n<p>The simplest fix is to use <code>my</code> to scope the hashes to the loop. (And turn on <code>use strict;</code> and <code>use warnings</code> if you haven't.)</p>\n\n<p>Alternatively, you can use a hash reference like this:</p>\n\n<pre><code>my @all_values; \nmy $hash_ref;\n\nfor ( 1..3 ) {\n   $hash_ref =  { \"test\" =&gt; $_ };\n   push ( @all_values, $hash_ref ) ; \n}\n\nprint @all_values;\nprint Dumper \\@all_values;\n</code></pre>\n\n<p>Because <code>$hash_ref</code> is a scalar, and it's a reference to an anonymous hash, it can be inserted into the array by value, rather than by reference. </p>\n"}], "owner": {"reputation": 81, "user_id": 2001479, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/401bffd7e08dd51020a9db4831a97f24?s=128&d=identicon&r=PG", "display_name": "Tom", "link": "https://stackoverflow.com/users/2001479/tom"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 987, "favorite_count": 0, "accepted_answer_id": 28651673, "answer_count": 1, "score": 3, "last_activity_date": 1425420414, "creation_date": 1424552783, "last_edit_date": 1424558960, "question_id": 28651316, "link": "https://stackoverflow.com/questions/28651316/encode-complex-json-structure-using-perl", "title": "Encode complex JSON structure using Perl", "body": "<p>I want to encode the result of a MySQL query into a JSON string using <a href=\"https://metacpan.org/pod/JSON::XS\" rel=\"nofollow\"><code>JSON::XS</code></a>. The JSON string needs to look like this</p>\n\n<pre><code>{\n    \"database\" : \"dbname\"\n    \"retentionPolicy\" : \"mytest\",\n    \"tags\" : {\n        \"type\" : \"generate\",\n        \"location\" : \"total\",\n        \"source\" : \"ehz\"\n    },\n    \"points\" : [{\n            \"precision\" : \"ms\",\n            \"timestamp\" : \"ts1\",\n            \"name\" : \"power\",\n            \"values\" : {\n                \"value\" : \"val1\"\n            }\n        }, {\n            \"precision\" : \"ms\",\n            \"timestamp\" : \"ts2\",\n            \"name\" : \"power\",\n            \"values\" : {\n                \"value\" : \"val2\"\n            }\n        }, {\n            \"precision\" : \"ms\",\n            \"timestamp\" : \"ts3\",\n            \"name\" : \"power\",\n            \"values\" : {\n                \"value\" : \"val3\"\n            }\n        }\n    ]\n}\n</code></pre>\n\n<p>The <code>points</code> array with each point's <code>values</code> element is giving me immense headaches. </p>\n\n<p>Here is the code block that generates the JSON</p>\n\n<pre><code>my %json_body = (\n                'database' =&gt; $db_name,\n                'retentionPolicy' =&gt; $retention,\n                'tags' =&gt; {\n                    'source' =&gt; $metric_source,\n                    'type' =&gt; $metric_type,\n                    'location' =&gt; $metric_location\n                }\n                );\n\n# loop through mysql result\nwhile ( ($timestamp, $value) = $query-&gt;fetchrow_array() ) {\n    my %json_point1 = (\n                        'name' =&gt; $series_name,\n                        'timestamp' =&gt; ($timestamp * 1),\n                        'precision' =&gt; \"ms\"\n                      );\n    %json_point2 = ('value' =&gt; $value); \n    %json_values = (%json_point1, 'values' =&gt; \\%json_point2); \n    push(@all_values, \\%json_values);       \n}\n$query-&gt;finish();\n\n# Encode json\nmy %json_data = (%json_body, \"points\" =&gt; \\@all_values);\n$influx_json = encode_json(\\%json_data);\n</code></pre>\n\n<p>I think the line <code>push(@all_values, \\%json_values)</code> is my problem. If I pass <code>%json_data</code> as a hash reference, only the last value from the <code>while</code> loop is retained. If I use <code>%json_values</code> directly, the encoded JSON is messed up because it loses the structure.</p>\n\n<p>Any hint would be appreciated. And please bear with me: this array and hash references are already making my head explode.</p>\n"}, {"tags": ["perl", "function", "syntax-error"], "comments": [{"owner": {"reputation": 7570, "user_id": 17945, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/e8cbc0b9ed29b027a127d8df309af5a6?s=128&d=identicon&r=PG", "display_name": "reinierpost", "link": "https://stackoverflow.com/users/17945/reinierpost"}, "edited": false, "score": 3, "creation_date": 1424550259, "post_id": 28648862, "comment_id": 45599163, "body": "You can&#39;t just make syntax up and expect it to work. Perl has an extensive manual in which you can find all the details; it can be a little hard to find things but the manual is well written and very thorough."}], "answers": [{"tags": [], "owner": {"reputation": 42737, "user_id": 4518274, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UPurS.png?s=128&g=1", "display_name": "Thomas Dickey", "link": "https://stackoverflow.com/users/4518274/thomas-dickey"}, "is_accepted": false, "score": 1, "last_activity_date": 1424542239, "last_edit_date": 1424542239, "creation_date": 1424541594, "answer_id": 28649243, "question_id": 28648862, "link": "https://stackoverflow.com/questions/28648862/perl-calling-function-getting-an-error/28649243#28649243", "title": "Perl calling function getting an error", "body": "<p>Perhaps you meant <code>sub</code> (the Perl keyword for subroutine/function).  The <a href=\"http://www.tutorialspoint.com/perl/perl_subroutines.htm\" rel=\"nofollow\">Perl subroutines</a> tutorial is a good place to begin.</p>\n"}, {"tags": [], "owner": {"reputation": 12427, "user_id": 498634, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/580e34a7c6e156d847e8ee768388daa4?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel B&#246;hmer", "link": "https://stackoverflow.com/users/498634/daniel-b%c3%b6hmer"}, "is_accepted": false, "score": 1, "last_activity_date": 1424542184, "last_edit_date": 1424542184, "creation_date": 1424541680, "answer_id": 28649259, "question_id": 28648862, "link": "https://stackoverflow.com/questions/28648862/perl-calling-function-getting-an-error/28649259#28649259", "title": "Perl calling function getting an error", "body": "<p>Your function definition is not valid Perl syntax.</p>\n\n<ol>\n<li>The necessary keyword in Perl is <code>sub</code> rather than <code>function</code>.</li>\n<li>There is no simicolon <code>;</code> after the function's name or the function block.</li>\n<li>Standard Perl 5 knows no function signatures (number, type and name of function arguments). Instead read your variables from <code>@_</code>.</li>\n</ol>\n\n<p>Also you first <code>return</code> from the function and then do some calculation. It doesn't seem to be useful to return the result of <code>print</code>--instead you can save the result, print it and return it. I've change it to</p>\n\n<ol>\n<li>do the calculation,</li>\n<li>print the result and then</li>\n<li>return the result.</li>\n</ol>\n\n<p>You've pasted only part of your code but this fixes your function definition. I've also improved your code formatting.</p>\n\n<pre><code>sub cal {\n   my ($sal) = @_; # could also write: my $sal = shift @_;\n\n   if ($attendance eq $good and $rating eq $good ^ $average) {\n       my $calsal = $sal + 0.2 * $sal;\n       print  \"salary = $calsal\\n\";\n       return $calsal;\n   }\n   else {\n       print \"employee is not worthy\\n\";\n       return; # return no value\n   }\n}\n</code></pre>\n\n<p>PS: You're using the <em>binary</em> operators <code>&amp;&amp;</code> and <code>^</code> in your <code>if</code> clause. I am sure you should <code>and</code> instead of <code>&amp;&amp;</code> because you're connecting to conditions. Beware that <code>and</code> and <code>&amp;&amp;</code> are not the same and behave differently. Rule of thumb: Unless you're doing binary calculations and probably know exactly what you're doing, you'll probably most often need <code>and</code> or <code>or</code>. I am not quite sure about the <code>^</code>--it is <em>binary</em> xor. Maybe better use <code>xor</code>?</p>\n"}], "owner": {"reputation": 1, "user_id": 4591378, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/23ef41e3eacd7bccfa9694f871f249bb?s=128&d=identicon&r=PG&f=1", "display_name": "D M A", "link": "https://stackoverflow.com/users/4591378/d-m-a"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 55, "favorite_count": 0, "closed_date": 1424589475, "answer_count": 2, "score": -3, "last_activity_date": 1424672115, "creation_date": 1424539973, "last_edit_date": 1424542370, "question_id": 28648862, "link": "https://stackoverflow.com/questions/28648862/perl-calling-function-getting-an-error", "closed_reason": "Needs details or clarity", "title": "Perl calling function getting an error", "body": "<pre><code>    function cal(sal); \n{\n\n  if ($attendance eq $good &amp;&amp; $rating eq $good ^ $average)\n\n{\n\n  return ( $calsal = $sal + 0.2 * $sal );\n\n  print  \"salary = $calsal\\n\";\n\n\n  }\n\n  else \n\n  {\n\n  return ( print \"employee is not worthy\\n\");\n\n};\n</code></pre>\n\n<p>Getting Error as below:</p>\n\n<pre><code>cant locate object method \"function\" via package \"cal\" &lt;perhaps you forgot to load \"cal\"&gt;? at txt.pl line 30, &lt;employee_cost&gt; line 2\n</code></pre>\n\n<p>Please can anyone suggest.</p>\n\n<p><code>employee_cost.txt</code> details:</p>\n\n<pre><code>name, department, attendence, rating, sal\nA, HR, bad, bad, 1000\nB, Sales, good, good, 3000\nC, Admin,bad, average, 1500\nD,Admin, bad,average, 2000\nE,Contract temp, good, average, 2000\nF, production, good, bad, 1500\n</code></pre>\n"}, {"tags": ["linux", "perl", "ubuntu", "locale"], "comments": [{"owner": {"reputation": 137100, "user_id": 874188, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/ZcY77.png?s=128&g=1", "display_name": "tripleee", "link": "https://stackoverflow.com/users/874188/tripleee"}, "edited": false, "score": 2, "creation_date": 1424539323, "post_id": 28648604, "comment_id": 45594990, "body": "Install the locales, as suggested by the error message."}], "answers": [{"comments": [{"owner": {"reputation": 42737, "user_id": 4518274, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UPurS.png?s=128&g=1", "display_name": "Thomas Dickey", "link": "https://stackoverflow.com/users/4518274/thomas-dickey"}, "edited": false, "score": 2, "creation_date": 1424551824, "post_id": 28648808, "comment_id": 45599730, "body": "Actually the error message referred to no_NO.UTF-8 rather than hu_HU  or hu_HU.UTF-8"}, {"owner": {"reputation": 4514, "user_id": 4248931, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HijcJ.png?s=128&g=1", "display_name": "serenesat", "link": "https://stackoverflow.com/users/4248931/serenesat"}, "reply_to_user": {"reputation": 42737, "user_id": 4518274, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UPurS.png?s=128&g=1", "display_name": "Thomas Dickey", "link": "https://stackoverflow.com/users/4518274/thomas-dickey"}, "edited": false, "score": 0, "creation_date": 1424590540, "post_id": 28648808, "comment_id": 45607652, "body": "Its just an example for understanding."}], "tags": [], "owner": {"reputation": 4514, "user_id": 4248931, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HijcJ.png?s=128&g=1", "display_name": "serenesat", "link": "https://stackoverflow.com/users/4248931/serenesat"}, "is_accepted": false, "score": 1, "last_activity_date": 1424539688, "creation_date": 1424539688, "answer_id": 28648808, "question_id": 28648604, "link": "https://stackoverflow.com/questions/28648604/how-to-remove-perl-locale-warning/28648808#28648808", "title": "How to remove Perl locale warning", "body": "<p>To get rid of the messages run this command:</p>\n\n<pre><code>locale-gen en_US en_US.UTF-8 hu_HU hu_HU.UTF-8\n</code></pre>\n\n<p>then</p>\n\n<pre><code>dpkg-reconfigure locales\n</code></pre>\n\n<p>Hope it will help you.</p>\n"}], "owner": {"reputation": 855, "user_id": 3270211, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/fdfd2d78e13d03a3448c4d28648bf13c?s=128&d=identicon&r=PG&f=1", "display_name": "user3270211", "link": "https://stackoverflow.com/users/3270211/user3270211"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1613, "favorite_count": 1, "answer_count": 1, "score": 2, "last_activity_date": 1424545591, "creation_date": 1424538602, "last_edit_date": 1424545591, "question_id": 28648604, "link": "https://stackoverflow.com/questions/28648604/how-to-remove-perl-locale-warning", "title": "How to remove Perl locale warning", "body": "<p>Is there any way to remove this when I run a perl script?\n I am running ubuntu.</p>\n\n<pre><code>perl: warning: Setting locale failed.\n    perl: warning: Please check that your locale settings:\n            LANGUAGE = (unset),\n            LC_ALL = (unset),\n            LC_PAPER = \"no_NO.UTF-8\",\n            LANG = \"en_US.UTF-8\"\n        are supported and installed on your system.\n    perl: warning: Falling back to the standard locale (\"C\").\n</code></pre>\n"}, {"tags": ["java", "perl", "dll"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1424544626, "post_id": 28648025, "comment_id": 45597062, "body": "Are you working on Windows? How are you unloading the DLL?"}, {"owner": {"reputation": 177, "user_id": 4208109, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-elafzevUcXs/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3re96KtnHPQP4tEefYowl_CEvIDqUw/photo.jpg?sz=128", "display_name": "Grigor Aleksanyan", "link": "https://stackoverflow.com/users/4208109/grigor-aleksanyan"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1424609932, "post_id": 28648025, "comment_id": 45611983, "body": "Hi Borodin, I work on Windows and Linux. library is written on c++ and is being loaded by the java code. Wrapper classes are generated by swig. I have written custom class loader to load necessary classes. Dll is being unloaded when all objects of classes loaded by the class loader are garbage collected. More precisely my task is to unload war file on the fly(with all underling jar-s dll/so-s etc.., to upgrade without restarting container). I need to check whether library is still loaded into the java.exe or not using perl standard features, after war file deletion from webapps dir."}], "owner": {"reputation": 177, "user_id": 4208109, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-elafzevUcXs/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3re96KtnHPQP4tEefYowl_CEvIDqUw/photo.jpg?sz=128", "display_name": "Grigor Aleksanyan", "link": "https://stackoverflow.com/users/4208109/grigor-aleksanyan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 262, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1424542720, "creation_date": 1424535694, "last_edit_date": 1424542720, "question_id": 28648025, "link": "https://stackoverflow.com/questions/28648025/is-there-a-way-to-check-if-library-is-still-loaded-into-the-process-using-perl", "title": "Is there a way to check If library is still loaded into the process, using perl", "body": "<p>I had a task to unload a DLL from a container. Now I need to write a test for my code using Perl. My question is:</p>\n\n<p>Is there a way to check if library (<code>.dll</code> or <code>.so</code>) has been loaded/unloaded into the process (<code>java.exe</code> in my case), using Perl standard functionality?</p>\n"}, {"tags": ["multithreading", "perl", "ncurses"], "answers": [{"comments": [{"owner": {"reputation": 10213, "user_id": 1686628, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a03a6bd4b5f83b04ff39aec4b44e17ed?s=128&d=identicon&r=PG&f=1", "display_name": "ealeon", "link": "https://stackoverflow.com/users/1686628/ealeon"}, "edited": false, "score": 0, "creation_date": 1424548687, "post_id": 28648393, "comment_id": 45598601, "body": "all the curse work is in the same thread. at least writing to the screen portion. its happening at process_output subroutine. $myexe provides just bunch of lines. it doesnt do any curse work. and the parent thread just read keyboard inputs"}, {"owner": {"reputation": 42737, "user_id": 4518274, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UPurS.png?s=128&g=1", "display_name": "Thomas Dickey", "link": "https://stackoverflow.com/users/4518274/thomas-dickey"}, "reply_to_user": {"reputation": 10213, "user_id": 1686628, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a03a6bd4b5f83b04ff39aec4b44e17ed?s=128&d=identicon&r=PG&f=1", "display_name": "ealeon", "link": "https://stackoverflow.com/users/1686628/ealeon"}, "edited": false, "score": 0, "creation_date": 1424551079, "post_id": 28648393, "comment_id": 45599456, "body": "My comment was mainly about Q2 (screen messed up).  If endwin is not called, curses will not even try to restore the terminal modes -- sounding like the symptom.  However the Q1 appears to say that this branch may not even have been called.  Reading the script, it seems some detail may have been omitted, so it&#39;s hard to analyze further."}], "tags": [], "owner": {"reputation": 42737, "user_id": 4518274, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UPurS.png?s=128&g=1", "display_name": "Thomas Dickey", "link": "https://stackoverflow.com/users/4518274/thomas-dickey"}, "is_accepted": false, "score": 1, "last_activity_date": 1424537658, "creation_date": 1424537658, "answer_id": 28648393, "question_id": 28647933, "link": "https://stackoverflow.com/questions/28647933/perl-and-curses-library-exit-from-a-child-thread/28648393#28648393", "title": "Perl and curses library - exit from a child thread", "body": "<p>The most obvious problem with the sample program is that it is using multiple threads for the curses library.  That won't work.  (curses is not thread-safe).  If you have to do this, keep all of the curses work in the same thread.</p>\n"}, {"comments": [{"owner": {"reputation": 10213, "user_id": 1686628, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a03a6bd4b5f83b04ff39aec4b44e17ed?s=128&d=identicon&r=PG&f=1", "display_name": "ealeon", "link": "https://stackoverflow.com/users/1686628/ealeon"}, "edited": false, "score": 0, "creation_date": 1424634710, "post_id": 28662460, "comment_id": 45620018, "body": "how can i force child thread to exit right away? it seemed like the child thread didnt get the SIGINT signal"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "reply_to_user": {"reputation": 10213, "user_id": 1686628, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a03a6bd4b5f83b04ff39aec4b44e17ed?s=128&d=identicon&r=PG&f=1", "display_name": "ealeon", "link": "https://stackoverflow.com/users/1686628/ealeon"}, "edited": false, "score": 0, "creation_date": 1424634788, "post_id": 28662460, "comment_id": 45620049, "body": "<code>threads -&gt; kill</code> should do it. But I&#39;d be tempted to suggest instead, create a shared variable and test that in your while loop."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "reply_to_user": {"reputation": 10213, "user_id": 1686628, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a03a6bd4b5f83b04ff39aec4b44e17ed?s=128&d=identicon&r=PG&f=1", "display_name": "ealeon", "link": "https://stackoverflow.com/users/1686628/ealeon"}, "edited": false, "score": 0, "creation_date": 1424635310, "post_id": 28662460, "comment_id": 45620232, "body": "Actually. Given opening an exec handle, you could use the returned pid from that as something to kill."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "reply_to_user": {"reputation": 10213, "user_id": 1686628, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a03a6bd4b5f83b04ff39aec4b44e17ed?s=128&d=identicon&r=PG&f=1", "display_name": "ealeon", "link": "https://stackoverflow.com/users/1686628/ealeon"}, "edited": false, "score": 0, "creation_date": 1424641702, "post_id": 28662460, "comment_id": 45622273, "body": "OK, I think I&#39;ve got something - basically - if you kill the results of your <code>open</code> from your <code>main</code> thread, your while loops <code>break</code>. See example in code."}], "tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": false, "score": 1, "last_activity_date": 1424641668, "last_edit_date": 1424641668, "creation_date": 1424634612, "answer_id": 28662460, "question_id": 28647933, "link": "https://stackoverflow.com/questions/28647933/perl-and-curses-library-exit-from-a-child-thread/28662460#28662460", "title": "Perl and curses library - exit from a child thread", "body": "<p>You call <code>exit</code> but don't <code>detach</code> or <code>join</code> the threads. </p>\n\n<p>Stick: </p>\n\n<pre><code>foreach my $thr ( threads -&gt; list() ) { \n    $thr -&gt; join;\n}\n</code></pre>\n\n<p>at the end, and your 'main' code will wait for your threads to (all) exit. </p>\n\n<p>However - <code>threads -&gt; exit()</code> is for exiting the <em>current</em> thread. See: \n<a href=\"http://perldoc.perl.org/threads.html#EXITING-A-THREAD\" rel=\"nofollow\">http://perldoc.perl.org/threads.html#EXITING-A-THREAD</a></p>\n\n<p>In order to terminate another thread, you need something like <code>threads -&gt; kill</code>. Either send a 'proper' kill signal, or use a signal handler for <code>SIGUSR1</code> or similar.</p>\n\n<p>I'd probably approach it a little differently though - define a shared variable:</p>\n\n<pre><code>my $done : shared; \n</code></pre>\n\n<p>And then test it within the while loop, so you've a normal execution flow rather than a mid flight <code>kill</code>. </p>\n\n<p>Your <code>kill ( INT, $$ )</code> is going to be killing your <em>main</em> process, and just drop the threads on the floor. That's not good style really. </p>\n\n<p>So - to backtrack a bit - the problem you're having - I think - is because 'signals' in perl aren't what you're expecting them to be. Perl uses safe signals, which makes a blocking call (such as a read from a filehandle) block the signal. </p>\n\n<p><a href=\"http://perldoc.perl.org/perlipc.html#Deferred-Signals-%28Safe-Signals%29\" rel=\"nofollow\">http://perldoc.perl.org/perlipc.html#Deferred-Signals-%28Safe-Signals%29</a></p>\n\n<p>So I wouldn't normally suggest using signals within threads are a good idea - they're a little erratic, which isn't good for program predictability. </p>\n\n<p>You can 'throw' and 'catch' signals, by defining a signal handler within the thread:</p>\n\n<pre><code> $SIG{'USR1'} = sub { print \"Caught USR1\"; die };\n</code></pre>\n\n<p>And then 'call' it using:</p>\n\n<pre><code> $worker -&gt; kill ( 'USR1' );\n</code></pre>\n\n<p>But in certain circumstances, that won't 'bail out' immediately in the way you expect. </p>\n\n<p>For example - this will work:</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\n\nuse threads;\n\nsub worker {\n\n   print Dumper \\%SIG;\n   my $tail_pid = open ( my $tail_proc, \"-|\", \"tail -f /var/log/messages\" );\n   $SIG{'USR1'} = sub { print \"Caught USR1\\nKilling $tail_pid\"; kill ( 'TERM', $tail_pid ); die; threads -&gt; exit() };\n\n   print \"Pre-loop\\n\";\n\n   while ( 1 ) {\n       print \"Thread processing\\n\";\n    sleep 1;\n   }\n    print \"Done\";\n   return;\n}\n\nmy $worker = threads -&gt; create ( \\&amp;worker );\n\nsleep 2;\nprint \"Sending kill\\n\";\n$worker -&gt; kill ( 'SIGUSR1' );\nsleep 2;\nprint \"waiting for join\\n\";\n\n$worker -&gt; join();\n</code></pre>\n\n<p>But if your while loop is reading from the file handle - it's a blocking call, so the 'kill' will be held until the block lifts. </p>\n\n<p>E.g. </p>\n\n<pre><code>while ( &lt;$tail_proc&gt; ) {\n</code></pre>\n\n<p>Will go into a block pending IO, and your thread won't 'get' the signal until IO occurs, and the thread continues processing. That <em>might</em> be sufficient for your needs though. Otherwise you're potentially looking at <code>select</code> or <code>IO::Select</code> to test if the handle is readable. </p>\n\n<p>So what you <em>may</em> want to do instead is just kill the process that's 'feeding' your while loop - because by doing so, it'll unblock and the <code>while</code> will become <code>undef</code> and exit. </p>\n\n<p>E.g.:</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\n\nuse threads;\nuse threads::shared;\n\nmy $kill_pid : shared;\n\nsub worker {\n   $kill_pid = open ( my $tail_proc, \"-|\", \"tail -f /var/log/messages\" );\n   print \"Pre-loop\\n\";\n   while ( &lt;$tail_proc&gt; ) {\n       print \"Thread processing\\n\";\n       print;\n    sleep 1;\n   }\n    print \"Done\";\n   return;\n}\n\nmy $worker = threads -&gt; create ( \\&amp;worker );\n\nsleep 2;\nprint \"Sending kill\\n\";\n\nif ( defined $kill_pid ) { print \"killing tail, $kill_pid\\n\"; kill ( 'TERM', $kill_pid ); };\nsleep 2;\nprint \"waiting for join\\n\";\n\n$worker -&gt; join();\n</code></pre>\n"}], "owner": {"reputation": 10213, "user_id": 1686628, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a03a6bd4b5f83b04ff39aec4b44e17ed?s=128&d=identicon&r=PG&f=1", "display_name": "ealeon", "link": "https://stackoverflow.com/users/1686628/ealeon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 186, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1424641668, "creation_date": 1424535229, "last_edit_date": 1424633707, "question_id": 28647933, "link": "https://stackoverflow.com/questions/28647933/perl-and-curses-library-exit-from-a-child-thread", "title": "Perl and curses library - exit from a child thread", "body": "<pre><code>sub worker {\n\n    # Curse stuff\n    initscr();\n    cbreak();\n    noecho();\n\n    my $fh = FileHandle-&gt;new;\n    open $fh, q{-|},\n        \"$myexe @pre_args make @after_args 2&gt;&amp;1\"\n        or croak 'Cannot open';\n    process_output($fh);\n    my $err = close $fh;\n\n    endwin();\n    return;\n} \nsub process_output {\n    my ($fh) = @_;\n\n    while (my $line = &lt;$fh&gt;) {\n        #do stuff\n    }\n}\nReadMode 3;\nthreads-&gt;create(\\&amp;worker);\nwhile (threads-&gt;list(threads::running)) {\n    my $char = ReadKey -1, *STDIN;\n    if ($char) {\n        if ($char eq 'q') {\n            endwin();\n            kill('INT', $$);\n            threads-&gt;exit();\n        }\n    }\n}\nReadMode 0;\n\nforeach my $thr (threads-&gt;list) {\n    $thr-&gt;join();\n</code></pre>\n\n<p>When I press 'q':</p>\n\n<pre><code>Perl exited with active threads:\n        1 running and unjoined\n        0 finished and unjoined\n        0 running and detached\n</code></pre>\n\n<p>and then I did <code>ps -fu myuserid</code></p>\n\n<p>I saw that <code>$myexe</code> was still running</p>\n\n<p>Q1) How can i force child process to exit? threads->exit() didnt seem to work  </p>\n"}, {"tags": ["perl", "graph", "gd"], "answers": [{"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 0, "last_activity_date": 1424498750, "creation_date": 1424498750, "answer_id": 28642717, "question_id": 28641154, "link": "https://stackoverflow.com/questions/28641154/gdgraphlines-how-to-plot-axis-as-whole-numbers-only/28642717#28642717", "title": "GD::Graph::lines: how to plot axis as whole numbers only?", "body": "<p>You need to adjust <code>y_tick_number</code>. But note that if you want the ticks for both <code>y1</code> and <code>y2</code> to be at integer values then you need to adjust everything so that the number of ticks evenly divides both ranges. You may also want to set <code>y_number_format =&gt; '%.0f'</code> to remove the <code>.0</code> on the integer numbers.</p>\n"}], "owner": {"reputation": 1, "user_id": 4590224, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99e2d556406e0aa2bc5c298713dab7e1?s=128&d=identicon&r=PG", "display_name": "bryan h", "link": "https://stackoverflow.com/users/4590224/bryan-h"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 954, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1424498750, "creation_date": 1424483597, "last_edit_date": 1424488646, "question_id": 28641154, "link": "https://stackoverflow.com/questions/28641154/gdgraphlines-how-to-plot-axis-as-whole-numbers-only", "title": "GD::Graph::lines: how to plot axis as whole numbers only?", "body": "<p>I'm making graphs with <a href=\"https://metacpan.org/pod/GD::Graph\" rel=\"nofollow noreferrer\">GD::Graph</a> and want the y-axis to display as whole numbers, not with decimals. The axis auto generates based on data (from a scale under a beehive). I'm stumped.</p>\n\n<p>Here's a sample plot:</p>\n\n<p><img src=\"https://i.stack.imgur.com/vg5lL.gif\" alt=\"enter image description here\"></p>\n\n<p>My graph parameters are:</p>\n\n<pre><code> $graph-&gt;set(                                           #set the graph parameters\n two_axes        =&gt; 2,\n zero_axis       =&gt; 0,\n title           =&gt; \"$hostname $location - $altitude feet elev.      Hive Weight and Temp $weight_filter       $date\",\n use_axis        =&gt; [1,2,2],\n line_width      =&gt; 3,\n x_label         =&gt; 'Time',\n x_ticks         =&gt; 1,\n x_long_ticks    =&gt; 1,\n y_long_ticks    =&gt; 1,\n x_tick_number   =&gt; $number_of_days+$number_of_days,\n x_number_format =&gt; sub { time2str( \"%D\", $_[0] ) },\n x_label_skip    =&gt;   2,\n y1_label        =&gt; 'Weight (Pounds)',\n y2_label        =&gt; 'Temperature (Fahrenheit)',\n y1_min_value    =&gt;  int $min_weight,\n y1_max_value    =&gt;  int ($max_weight+1),\n x_min_value     =&gt;  $first_date,\n x_max_value     =&gt;  $last_date,\n y2_min_value    =&gt;  int $min_y2,\n y2_max_value    =&gt;  int ($max_y2+1),\n transparent     =&gt; 0,\n boxclr          =&gt; 'lgray',\n</code></pre>\n"}, {"tags": ["perl", "subroutine", "factorial"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1424478707, "post_id": 28640170, "comment_id": 45580184, "body": "You have clearly started learning from somewhere, and that somewhere doesn&#39;t seem to be too reliable. You should always <code>use warnings</code> (right after <code>use strict</code>) in preference to <code>-w</code> on the shebang line. You <i>must</i> also learn to indent your code properly. Opinions vary, but everything inside a block should be indented by between two and four spaces relative to the code outside the block. A look at <a href=\"http://perldoc.perl.org/perlstyle.html\" rel=\"nofollow noreferrer\"><code>perldoc perlstyle</code></a> would help you a lot."}, {"owner": {"reputation": 11838, "user_id": 451518, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lxzbH.png?s=128&g=1", "display_name": "default locale", "link": "https://stackoverflow.com/users/451518/default-locale"}, "edited": false, "score": 1, "creation_date": 1424503393, "post_id": 28640170, "comment_id": 45584852, "body": "You should clarify your question to get meaningful answers. Your problem description and code doesn&#39;t have anything to do with factorials. I suggest you to narrow your question to a more specific problem (e.g. &quot;why doesn&#39;t this loop stop?&quot;"}], "answers": [{"comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1424483115, "post_id": 28640378, "comment_id": 45581163, "body": "<i>&quot;Both <code>$count_number</code> and <code>$input_number</code> never change within the loop body&quot;</i> except for <code>$count_number += $input_number</code>"}, {"owner": {"reputation": 8216, "user_id": 4569307, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/QZ5S5.jpg?s=128&g=1", "display_name": "BaseZen", "link": "https://stackoverflow.com/users/4569307/basezen"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1424483560, "post_id": 28640378, "comment_id": 45581235, "body": "Adding zero doesn&#39;t count as change :-) It&#39;s helpful to explain why the OP&#39;s <i>code as posted</i> loops indefinitely."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1424485371, "post_id": 28640378, "comment_id": 45581578, "body": "Okay, well if that was intentional then I think you&#39;re being too cryptic for a complete beginner. <code>$input_number</code> is never defined, so it&#39;s left set to <code>undef</code>, which evaluates as zero in an addition but also raises a warning."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1424485930, "post_id": 28640378, "comment_id": 45581675, "body": "I don&#39;t understand what you mean by 3. <code>$count_number</code> is a value that starts at zero and has <code>$input_number</code> added to it repeatedly. So it must always be a multiple of <code>$input_number</code>. What are the other logic problems that you found?"}, {"owner": {"reputation": 8216, "user_id": 4569307, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/QZ5S5.jpg?s=128&g=1", "display_name": "BaseZen", "link": "https://stackoverflow.com/users/4569307/basezen"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1424487618, "post_id": 28640378, "comment_id": 45581990, "body": "Re: logic, by the title of the question, this fails to calculate any sort of factorial. As far as not being a multiple, I think I was thrown off by the undefined variable and just what it was <i>supposed</i> to be tied to."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1424488209, "post_id": 28640378, "comment_id": 45582104, "body": "Not achieving its purpose isn&#39;t a <i>logic error</i>. And the parameter was clearly supposed to be <code>$input_number</code>. So we&#39;re left with 1. Indent properly and 2. Don&#39;t look at recursion yet. I would agree with those two."}], "tags": [], "owner": {"reputation": 8216, "user_id": 4569307, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/QZ5S5.jpg?s=128&g=1", "display_name": "BaseZen", "link": "https://stackoverflow.com/users/4569307/basezen"}, "is_accepted": false, "score": 1, "last_activity_date": 1424483194, "last_edit_date": 1424483194, "creation_date": 1424477463, "answer_id": 28640378, "question_id": 28640170, "link": "https://stackoverflow.com/questions/28640170/creating-a-factorial-subroutine-in-perl/28640378#28640378", "title": "Creating a factorial subroutine in Perl", "body": "<p>Top level answer: you're taking on too much. Learn to write a simple loop that counts from 1 to 10 and prints out the values; learn to write a simple subroutine that receives a parameter and uses it for something trivial; learn to write a simple program that takes the values from an array and adds them together.</p>\n\n<p>What does this have to do with factorial?!</p>\n\n<p>To get specific:</p>\n\n<ol>\n<li>Your indentation is off. Code is nearly impossible to read without correct indentation. I had to look at it six times to make any sense of it. </li>\n</ol>\n\n<p>\"No computation without indentation\"</p>\n\n<ol start=\"2\">\n<li><p>Your loop logic is missing a key ingredient: the \"progress\" or \"increment\" step. Both $count_number and $input_number never change within the loop body, so the condition at the top of the loop will never change truth value.</p></li>\n<li><p>There are other logic problems such as not actually distinguishing whether $count_number is actually a multiple of anything before adding it.</p></li>\n<li><p>You should name your parameters, e.g.:   </p>\n\n<pre><code>my $mult_value = shift;\n</code></pre></li>\n</ol>\n\n<p>at the top of the subroutine.</p>\n\n<ol start=\"6\">\n<li>Re: recursion: No. Of course it's possible. But pedagogically: Take. It. Slow.</li>\n</ol>\n\n<p>Good luck!</p>\n"}, {"comments": [{"owner": {"reputation": 3135, "user_id": 4372759, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/6zzjk.jpg?s=128&g=1", "display_name": "flybonzai", "link": "https://stackoverflow.com/users/4372759/flybonzai"}, "edited": false, "score": 0, "creation_date": 1424537558, "post_id": 28640904, "comment_id": 45594347, "body": "Thanks for the great reply!  The reason I&#39;m taking on so much is I was an MIS major in school but recently was hired on full-time to maintain and develop Perl code, so I&#39;m trying to catch up.  I noticed my mistake in not passing the value to my subroutine through &quot;shift&quot; last night, but I&#39;m still not sure how to fix my algorithm.  Any tips?  As is it loops through and does multiples of five correctly, but doesn&#39;t touch multiples of threes."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 3135, "user_id": 4372759, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/6zzjk.jpg?s=128&g=1", "display_name": "flybonzai", "link": "https://stackoverflow.com/users/4372759/flybonzai"}, "edited": false, "score": 0, "creation_date": 1424539777, "post_id": 28640904, "comment_id": 45595147, "body": "@flybonzai: Well your algorithm is so far from calculating a factorial that I wonder whether that is really what you intended to do. I&#39;m sure you could fix it yourself if I explain. What you&#39;re doing is calculating a <i>sum of multiples</i>, so <code>multiples(3)</code> returns <code>3 + 6 + 9 + 12 + ... + 999</code>, whereas a <i>factorial</i> is a product of a series, so <code>factorial(3)</code> is <code>1 &#215; 2 &#215; 3</code> and <code>factorial(5)</code> is <code>1 &#215; 2 &#215; 3 &#215; 4 &#215; 5</code>. Does that give you enough of a hint?"}, {"owner": {"reputation": 3135, "user_id": 4372759, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/6zzjk.jpg?s=128&g=1", "display_name": "flybonzai", "link": "https://stackoverflow.com/users/4372759/flybonzai"}, "edited": false, "score": 0, "creation_date": 1424707686, "post_id": 28640904, "comment_id": 45649095, "body": "you are exactly right, I&#39;m trying to create a sum of multiples as opposed to a factorial."}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 4, "last_activity_date": 1424483013, "last_edit_date": 1424483013, "creation_date": 1424481286, "answer_id": 28640904, "question_id": 28640170, "link": "https://stackoverflow.com/questions/28640170/creating-a-factorial-subroutine-in-perl/28640904#28640904", "title": "Creating a factorial subroutine in Perl", "body": "<p>Programming is about implementing an <a href=\"https://en.wikipedia.org/wiki/Algorithm\" rel=\"nofollow\"><em>algorithm</em></a> in a programming language. You should concentrate on the tools and facilities that the language offers you rather than the algorithm that you are trying to implement.</p>\n\n<p>You have made a fairly trivial mistake in your Perl code: the variable <code>$input_number</code> is never assigned a value. A Perl subroutine receives the parameters that are passed to it in the built-in array <code>@_</code>, and you can set <code>$input_number</code> to the first value passed in by writing</p>\n\n<pre><code>my $input_number = shift;\n</code></pre>\n\n<p>If you make just that change then you will see that your program now <em>does something</em>. But what it doesn't do is calculate a factorial, because your <em>algorithm</em> is wrong. After all, the factorial of 3 is 3 \u00d7 2 \u00d7 1 = 6, and there is nothing in there to do with the value 1000.</p>\n\n<p>I would help you to fix this, but you are aiming way too high for a first program. For now, here are some suggestions based on your code that will help you to see through the forest.</p>\n\n<ul>\n<li><p>It may seem helpful to use long, meaningful names for your variables. But in fact, if the names are too long then they hide the structure of the program. Keep your identifiers down to, say, under ten characters</p></li>\n<li><p>As well as being concise, variable names should be <em>meaningful</em>. Your <code>$count_number</code> and <code>@count_array</code> are nothing to do with counts: <code>$count_number</code> is a value calculated by adding successive multiples of <code>$input_number</code>, and <code>@count_array</code> is a list of those values</p></li>\n<li><p>Use <code>for</code> instead of <code>foreach</code> for the same reason. They are identical</p></li>\n<li><p>Write subroutines to perform intermediate operations based on their parameters. Leave it up to the caller to decide what to do with the results. In particular, a subroutine shouldn't usually have a <code>print</code> statement unless it is for debugging purposes</p></li>\n</ul>\n\n<p>Here's how I would write the code that you posted. It still doesn't work, but I hope you can see that it's more readable than the original. What it <em>actually</em> does is to calculate a bizarre fraction of 1000<sup>2</sup>, but to fix that you need to fix the <em>algorithm</em>.</p>\n\n<p>I hope you can see the value of indentation, and shorter, but still meaningful variable names?</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\n\nmy $sum_threes = multiples(3);\nprint \"Total sum of factorial for multiples of 3 is $sum_threes.\\n\";\n\nmy $sum_fives  = multiples(5);\nprint \"Total sum of factorial for multiples of 3 is $sum_fives.\\n\";\n\nmy $total_sum = $sum_threes + $sum_fives;\nprint $total_sum, \"\\n\";\n\nsub multiples {\n\n    my $number = shift;\n\n    my @values;\n\n    my $value = $number;\n    while ( $value &lt; 1000 ) {\n        push @values, $value;\n        $value += $number;\n    }\n\n    my $sum = 0;\n    $sum += $_ for @values;\n\n    return $sum;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 3135, "user_id": 4372759, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/6zzjk.jpg?s=128&g=1", "display_name": "flybonzai", "link": "https://stackoverflow.com/users/4372759/flybonzai"}, "edited": false, "score": 0, "creation_date": 1424707715, "post_id": 28651506, "comment_id": 45649118, "body": "I downloaded the PDF, that book looks like a great resource!"}], "tags": [], "owner": {"reputation": 5886, "user_id": 2019415, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/645958eb08719fa5119052d7d1d079ff?s=128&d=identicon&r=PG", "display_name": "G. Cito", "link": "https://stackoverflow.com/users/2019415/g-cito"}, "is_accepted": false, "score": 1, "last_activity_date": 1424553821, "creation_date": 1424553821, "answer_id": 28651506, "question_id": 28640170, "link": "https://stackoverflow.com/questions/28640170/creating-a-factorial-subroutine-in-perl/28651506#28651506", "title": "Creating a factorial subroutine in Perl", "body": "<p>This is not really an answer, but \"factorial\" made me think of Mark Jason Dominus's <a href=\"http://hop.perl.plover.com/\" rel=\"nofollow\">Higher Order Perl</a> which is an excellent book (recommended if you can still find it). It jumps right into writing simple and powerful functions start to blow your mind on page 2 and just keep right on going till page 500.  Here is his factorial subroutine from page 5:</p>\n\n<pre><code>sub factorial {\n  my ($n) = @_;\n  return 1 if $n == 0;\n  return factorial($n-1) * $n;\n}\n</code></pre>\n\n<p>HOP was a treasure trove of ideas when I wanted to stretch my mind beyond the \"procedural perl\" that becomes habit when you spend your time replacing shell scripts with perl versions thereof. Kudos to MJD.</p>\n"}], "owner": {"reputation": 3135, "user_id": 4372759, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/6zzjk.jpg?s=128&g=1", "display_name": "flybonzai", "link": "https://stackoverflow.com/users/4372759/flybonzai"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1717, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1424553821, "creation_date": 1424475976, "last_edit_date": 1424503441, "question_id": 28640170, "link": "https://stackoverflow.com/questions/28640170/creating-a-factorial-subroutine-in-perl", "title": "Creating a factorial subroutine in Perl", "body": "<p>I'm a first-time poster and a new programmer.</p>\n\n<p>I'm trying to create a program that will take all the multiples of 3 and 5 that are less than a thousand and then add them together for a final sum.</p>\n\n<p>I'm practicing subroutines and so I'm trying to use a single subroutine where I just feed it either 3 or 5.</p>\n\n<p>I feel like I'm close, but it keeps returning endless zeros, so I have to Ctrl-C out of the script.</p>\n\n<p>Another problem I'm having is that the array is receiving 1000 (in the case of 5's) and 1002 (in the case of 3's). How can I stop numbers 1000 or higher being put in the array?</p>\n\n<p>I want to start practicing recursion. Would recursion be a more appropriate solution to this problem?</p>\n\n<p>Here is my code:</p>\n\n<pre><code>#!/usr/bin/perl -w\n\nuse strict;\n\nsub multiples;\n\n\nmy $sum_threes = multiples(3);\nmy $sum_fives = multiples(5);\n\nmy $total_sum = $sum_threes + $sum_fives;\nprint $total_sum, \"\\n\";\n\n\nsub multiples {\n    my $input_number;\n    my $sum_number = 0;\n    my $count_number = 0;\n    my @count_array;\n\n    while ($count_number &lt; (1000 - $input_number)) {\n        $count_number += $input_number;\n        push(@count_array, $count_number);\n        print \"$_\\n\" for @count_array;\n    }\n    foreach (@count_array) {\n        $sum_number += $_;\n    }\n    print \"Total sum of factorial for multiples of $input_number is $sum_number.\\n\";\n    return $sum_number;\n}\n</code></pre>\n"}, {"tags": ["perl", "redis", "mojolicious"], "answers": [{"comments": [{"owner": {"reputation": 19796, "user_id": 468327, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/cc767569f5863a7c261991ee5b23f147?s=128&d=identicon&r=PG", "display_name": "Joel Berger", "link": "https://stackoverflow.com/users/468327/joel-berger"}, "edited": false, "score": 1, "creation_date": 1424536117, "post_id": 28646155, "comment_id": 45593802, "body": "subscribe returns the redis instance itself, so by storing it in your package variable (incorrectly named <code>$subscription</code>) you are holding a reference to the instance (as I mention in my answer)."}, {"owner": {"reputation": 1474, "user_id": 751910, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/4d4ee1e65bd8c86f66c43eecfe42a3e6?s=128&d=identicon&r=PG", "display_name": "alexk", "link": "https://stackoverflow.com/users/751910/alexk"}, "reply_to_user": {"reputation": 19796, "user_id": 468327, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/cc767569f5863a7c261991ee5b23f147?s=128&d=identicon&r=PG", "display_name": "Joel Berger", "link": "https://stackoverflow.com/users/468327/joel-berger"}, "edited": false, "score": 0, "creation_date": 1424557496, "post_id": 28646155, "comment_id": 45601402, "body": "You are correct. If I had only replaced <code>my $redis =</code> with <code>our $redis = </code>, this would have solved my problem, as well. The helper in your answer looks like an even cleaner solution."}], "tags": [], "owner": {"reputation": 1474, "user_id": 751910, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/4d4ee1e65bd8c86f66c43eecfe42a3e6?s=128&d=identicon&r=PG", "display_name": "alexk", "link": "https://stackoverflow.com/users/751910/alexk"}, "is_accepted": false, "score": 0, "last_activity_date": 1424524235, "creation_date": 1424524235, "answer_id": 28646155, "question_id": 28639178, "link": "https://stackoverflow.com/questions/28639178/cant-get-mojoredis2-to-subscribe/28646155#28646155", "title": "Can&#39;t get Mojo::Redis2 to subscribe", "body": "<p>I solved it, by making sure I retain the return value of <code>$redis-&gt;subscribe</code> in a permanent variable, like so:</p>\n\n<p>Instead of...</p>\n\n<pre><code>$redis-&gt;subscribe(['pubsub'] =&gt; sub {\n    say \"********* 1\";\n});\n</code></pre>\n\n<p>...I wrote...</p>\n\n<pre><code>our $subscription = $redis-&gt;subscribe(['pubsub'] =&gt; sub {\n    say \"********* 1\";\n});\n</code></pre>\n\n<p>That fixed the problem. I guess it's similar to <code>AnyEvent</code>, where the return value must stay alive.</p>\n"}, {"comments": [{"owner": {"reputation": 1474, "user_id": 751910, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/4d4ee1e65bd8c86f66c43eecfe42a3e6?s=128&d=identicon&r=PG", "display_name": "alexk", "link": "https://stackoverflow.com/users/751910/alexk"}, "edited": false, "score": 0, "creation_date": 1424558456, "post_id": 28648094, "comment_id": 45601661, "body": "But, why does <code>my $redis = ...</code> go out of scope? I thought the program execution stops at app-&gt;start, which <i>should</i> mean that <code>my $redis</code> is still alive."}, {"owner": {"reputation": 19796, "user_id": 468327, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/cc767569f5863a7c261991ee5b23f147?s=128&d=identicon&r=PG", "display_name": "Joel Berger", "link": "https://stackoverflow.com/users/468327/joel-berger"}, "reply_to_user": {"reputation": 1474, "user_id": 751910, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/4d4ee1e65bd8c86f66c43eecfe42a3e6?s=128&d=identicon&r=PG", "display_name": "alexk", "link": "https://stackoverflow.com/users/751910/alexk"}, "edited": false, "score": 2, "creation_date": 1424703757, "post_id": 28648094, "comment_id": 45646590, "body": "with event loops and reactors, I wouldn&#39;t bet on it :-)"}], "tags": [], "owner": {"reputation": 19796, "user_id": 468327, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/cc767569f5863a7c261991ee5b23f147?s=128&d=identicon&r=PG", "display_name": "Joel Berger", "link": "https://stackoverflow.com/users/468327/joel-berger"}, "is_accepted": true, "score": 2, "last_activity_date": 1424536040, "creation_date": 1424536040, "answer_id": 28648094, "question_id": 28639178, "link": "https://stackoverflow.com/questions/28639178/cant-get-mojoredis2-to-subscribe/28648094#28648094", "title": "Can&#39;t get Mojo::Redis2 to subscribe", "body": "<p>I don't have a redis instance installed currently, but I think this should work.</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse v5.18;\nuse warnings;\n\nuse Mojolicious::Lite;\nuse Mojo::Redis2;\n\nsay \"Welcome\";\n\nhelper redis =&gt; sub {state $redis = Mojo::Redis2-&gt;new()};\n\napp-&gt;redis-&gt;subscribe(['pubsub'] =&gt; sub {\n    say \"********* 1\";\n});\n\nget '/' =&gt; sub {\n    my $self = shift;\n\n    $self-&gt;render(json =&gt; {a =&gt; 1});\n};\n\napp-&gt;start;\n</code></pre>\n\n<p>I suspect that once the redis instance goes out of scope, you lose it and its connections.</p>\n"}], "owner": {"reputation": 1474, "user_id": 751910, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/4d4ee1e65bd8c86f66c43eecfe42a3e6?s=128&d=identicon&r=PG", "display_name": "alexk", "link": "https://stackoverflow.com/users/751910/alexk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 300, "favorite_count": 1, "accepted_answer_id": 28648094, "answer_count": 2, "score": 1, "last_activity_date": 1424536040, "creation_date": 1424470551, "question_id": 28639178, "link": "https://stackoverflow.com/questions/28639178/cant-get-mojoredis2-to-subscribe", "title": "Can&#39;t get Mojo::Redis2 to subscribe", "body": "<p>I wrote the following program (<code>redis.pl</code>), Redis is running locally with the default port settings, but when I run <code>redis.pl</code> with <code>morbo redis.pl</code> I never get <code>********* 1</code> on the screen. Why is that? It seems the subscription never happens. How can I fix this?</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse v5.18;\nuse warnings;\n\nuse Mojolicious::Lite;\nuse Mojo::Redis2;\n\nsay \"Welcome\";\n\nmy $redis = Mojo::Redis2-&gt;new();\n\n$redis-&gt;subscribe(['pubsub'] =&gt; sub {\n    say \"********* 1\";\n});\n\nget '/' =&gt; sub {\n    my $self = shift;\n\n    $self-&gt;render(json =&gt; {a =&gt; 1});\n};\n\napp-&gt;start;\n</code></pre>\n"}, {"tags": ["perl", "lwp-useragent"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1424464343, "post_id": 28637573, "comment_id": 45574959, "body": "You should have compared what you sent with your script with what you sent with your browser!"}], "answers": [{"comments": [{"owner": {"reputation": 2822, "user_id": 967901, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/84956601dfa0a5b6b73cf84c0ddf7810?s=128&d=identicon&r=PG", "display_name": "HydroPowerDeveloper", "link": "https://stackoverflow.com/users/967901/hydropowerdeveloper"}, "edited": false, "score": 0, "creation_date": 1424464691, "post_id": 28637671, "comment_id": 45575111, "body": "Thanks for the tips...this actually solved my problem! I guess I wasn&#39;t providing the property JSON string to the web service."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 3, "last_activity_date": 1424464846, "last_edit_date": 1424464846, "creation_date": 1424464308, "answer_id": 28637671, "question_id": 28637573, "link": "https://stackoverflow.com/questions/28637573/perl-lwp-post-with-empty-sequence-response/28637671#28637671", "title": "Perl LWP Post With Empty Sequence Response", "body": "<p>In an expression, <code>()</code> doesn't do anything except to affect precedence. For example, <code>4 * ( 5 + 6 )</code> is different than <code>4 * 5 + 6</code>. As such,</p>\n\n<pre><code>my @inputs = ( ( key =&gt; \"A\", Value =&gt; \"12\" ), ( key =&gt; \"B\", Value =&gt; \"12\" ) );\n</code></pre>\n\n<p>is just a weird way of writing</p>\n\n<pre><code>my @inputs = ( \"key\", \"A\", \"Value\", \"12\", \"key\", \"B\", \"Value\", \"12\" );\n</code></pre>\n\n<p>If you want to create a hash and return a reference to it, it's done using <code>{}</code>.</p>\n\n<pre><code>my @inputs  = ( { key =&gt; \"A\", Value =&gt; \"12\" }, { key =&gt; \"B\", Value =&gt; \"12\" } );\nmy @outputs = ( { key =&gt; \"A\", Value =&gt; \"12\" }, { key =&gt; \"B\", Value =&gt; \"12\" } );\n</code></pre>\n\n<p>That's basically short for</p>\n\n<pre><code>my %anon_i1 = ( key =&gt; \"A\", Value =&gt; \"12\" );\nmy %anon_i2 = ( key =&gt; \"B\", Value =&gt; \"12\" );\nmy @inputs = ( \\%anon_i1, \\%anon_i2 );\nmy %anon_o1 = ( key =&gt; \"A\", Value =&gt; \"12\" );\nmy %anon_o2 = ( key =&gt; \"B\", Value =&gt; \"12\" );\nmy @outputs = ( \\%anon_o1, \\%anon_o2 );\n</code></pre>\n"}], "owner": {"reputation": 2822, "user_id": 967901, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/84956601dfa0a5b6b73cf84c0ddf7810?s=128&d=identicon&r=PG", "display_name": "HydroPowerDeveloper", "link": "https://stackoverflow.com/users/967901/hydropowerdeveloper"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 257, "favorite_count": 0, "accepted_answer_id": 28637671, "answer_count": 1, "score": 1, "last_activity_date": 1424464846, "creation_date": 1424463874, "last_edit_date": 1424464303, "question_id": 28637573, "link": "https://stackoverflow.com/questions/28637573/perl-lwp-post-with-empty-sequence-response", "title": "Perl LWP Post With Empty Sequence Response", "body": "<p>I am trying to send a POST request to a REST web-service using the Perl LWP library. I am able to successfully complete the POST request with no errors; however, when I try to get the response content, it returns an empty sequence <code>[]</code>. I have sent POST requests to the web-service using the Postman application in Chrome, and it returns the expected response. It seems that this happens only for POST and PUT requests: GET requests return the expected content.</p>\n\n<p>Here is my Perl code:</p>\n\n<pre><code>use strict;\nuse warnings;\nuse LWP::UserAgent;\nuse HTTP::Request::Common;\nuse JSON;\nuse Data::Dumper;\n\nmy $url = \"http://localhost:53076/api/excel(07375ebd-e21f-4ce4-91d7-49dc2de7ceb1)\";\n\nmy $ua = LWP::UserAgent-&gt;new( keep_alive =&gt; 1 );\n\nmy $json = JSON-&gt;new-&gt;utf8-&gt;allow_nonref;\n\nmy @inputs = ( ( \"key\" =&gt; \"A\", \"Value\" =&gt; \"12\" ), ( \"key\" =&gt; \"B\", \"Value\" =&gt; \"12\" ) );\nmy @outputs = ( ( \"key\" =&gt; \"A\", \"Value\" =&gt; \"12\" ), ( \"key\" =&gt; \"B\", \"Value\" =&gt; \"12\" ) );\n\nmy %body;\n\n$body{\"Inputs\"} = \\@inputs;\n$body{\"Outputs\"} = \\@outputs;\n\nmy $jsonString = $json-&gt;encode(\\%body);\n\nmy $response = $ua-&gt;post($url, \"Content-Type\" =&gt; \"application/json; charset=utf-8\", \"Content\" =&gt; $jsonString);\n\nif ($response-&gt;is_success)\n{\n    print \"\\n========== REQUEST CONTENT ==========\\n\";\n\n    print $response-&gt;decoded_content(), \"\\n\";\n\n}\nelse\n{\n    print \"\\n========== ERROR ==========\\n\";\n    print \"Error: \", $response-&gt;status_line(), \"\\n\";\n    print $response-&gt;headers()-&gt;as_string(), \"\\n\";\n\n}\n</code></pre>\n\n<p>Am I doing something wrong?</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 81037, "user_id": 8454, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/2NlHs.png?s=128&g=1", "display_name": "Andy Lester", "link": "https://stackoverflow.com/users/8454/andy-lester"}, "edited": false, "score": 2, "creation_date": 1424462687, "post_id": 28636912, "comment_id": 45574150, "body": "A 302 is a redirection.  You need to follow the redirect.  <a href=\"https://en.wikipedia.org/wiki/HTTP_302\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/HTTP_302</a>   I don&#39;t know why LWP::UA isn&#39;t following the redirects for you automatically."}, {"owner": {"reputation": 81037, "user_id": 8454, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/2NlHs.png?s=128&g=1", "display_name": "Andy Lester", "link": "https://stackoverflow.com/users/8454/andy-lester"}, "edited": false, "score": 0, "creation_date": 1424463478, "post_id": 28636912, "comment_id": 45574546, "body": "You need to figure out if the 302 is because of the -&gt;get() or the -&gt;post()."}], "answers": [{"tags": [], "owner": {"reputation": 1786, "user_id": 1820650, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/ce47757627908a1013e0951158f4c2e6?s=128&d=identicon&r=PG", "display_name": "Dr.Avalanche", "link": "https://stackoverflow.com/users/1820650/dr-avalanche"}, "is_accepted": false, "score": 0, "last_activity_date": 1424522622, "creation_date": 1424522622, "answer_id": 28645936, "question_id": 28636912, "link": "https://stackoverflow.com/questions/28636912/drupal-log-in-perl/28645936#28645936", "title": "Drupal log in perl", "body": "<p>I would use <a href=\"https://metacpan.org/pod/WWW::Mechanize\" rel=\"nofollow\">WWW::Mechanize</a> to do this, it's a subclass of LWP::UserAgent, the example you post would be trivial to port. It will cater for redirect after valid login automatically. It's a more convenient browser like object to work with I find.</p>\n"}], "owner": {"reputation": 29, "user_id": 4048442, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/f412bf74c10abd67451224f41487757c?s=128&d=identicon&r=PG&f=1", "display_name": "imedox", "link": "https://stackoverflow.com/users/4048442/imedox"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 45, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1424522622, "creation_date": 1424461143, "question_id": 28636912, "link": "https://stackoverflow.com/questions/28636912/drupal-log-in-perl", "title": "Drupal log in perl", "body": "<pre><code>#!/usr/bin/perl\nuse LWP::UserAgent;\n$ua = new LWP::UserAgent;\n$regex = '&lt;input type=\"hidden\" name=\"form_build_id\" value=\"(.*?)\" /&gt;';\nmy $target = \"http://localhost/lab/dr/?q=user\";\n$search = $ua-&gt;get ($target)-&gt;content;\nif ($search =~/$regex/){\nmy $post = $ua-&gt;post($target,\n            {\n            \"name\" =&gt; \"M-A\",\n            \"pass\" =&gt; \"Mr_c0der\",\n            \"form_id\"=&gt;\"user_login\",\n            \"form_build_id\" =&gt; $1,\n            \"op\" =&gt; \"Log in\",\n            });\n\nprint $post-&gt;content;\n}\n</code></pre>\n\n<p>i don't know what's the problem no response-content and response->code = 302 </p>\n"}, {"tags": ["perl", "nginx", "fastcgi", "cgi-application"], "answers": [{"comments": [{"owner": {"reputation": 12916, "user_id": 829970, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/a438b9fd2889adabf56d0b71566a1702?s=128&d=identicon&r=PG", "display_name": "Moshe Katz", "link": "https://stackoverflow.com/users/829970/moshe-katz"}, "edited": false, "score": 1, "creation_date": 1424461820, "post_id": 28636679, "comment_id": 45573723, "body": "I can&#39;t believe I missed that! (I had this up on ServerFault for three weeks with 20 views and no activity, and I got an answer here in less than 15 minutes!)"}], "tags": [], "owner": {"reputation": 170445, "user_id": 149341, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/omfTQ.png?s=128&g=1", "display_name": "duskwuff -inactive-", "link": "https://stackoverflow.com/users/149341/duskwuff-inactive"}, "is_accepted": true, "score": 6, "last_activity_date": 1424460265, "creation_date": 1424460265, "answer_id": 28636679, "question_id": 28636497, "link": "https://stackoverflow.com/questions/28636497/perl-cgifast-closes-connections-without-sending-data/28636679#28636679", "title": "Perl CGI::Fast closes connections without sending data", "body": "<p>You are running a FastCGI server, but you are telling Nginx to connect to an HTTP server. These are not the same protocol.</p>\n\n<p>To connect to a FastCGI server from Nginx, use <a href=\"http://nginx.org/en/docs/http/ngx_http_fastcgi_module.html\" rel=\"noreferrer\"><code>ngx_http_fastcgi_module</code></a>, not <code>ngx_http_proxy_module</code>, e.g.:</p>\n\n<pre><code>fastcgi_pass 127.0.0.1:5001;\n</code></pre>\n\n<p>Note that the <code>proxy_set_header</code> module is not applicable here, as FastCGI uses CGI environment variables, not headers. If you need to set extra headers, you can do so using the <code>fastcgi_param</code> directive, e.g.</p>\n\n<pre><code>fastcgi_param ENVIRONMENT_VARIABLE $value;\n</code></pre>\n\n<p>Nginx ships with some standard <code>fastcgi_param</code> directives in a file which you'll probably want to just import wholesale:</p>\n\n<pre><code>include fastcgi_params;\n</code></pre>\n"}], "owner": {"reputation": 12916, "user_id": 829970, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/a438b9fd2889adabf56d0b71566a1702?s=128&d=identicon&r=PG", "display_name": "Moshe Katz", "link": "https://stackoverflow.com/users/829970/moshe-katz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 430, "favorite_count": 0, "accepted_answer_id": 28636679, "answer_count": 1, "score": 4, "last_activity_date": 1424460265, "creation_date": 1424459566, "question_id": 28636497, "link": "https://stackoverflow.com/questions/28636497/perl-cgifast-closes-connections-without-sending-data", "title": "Perl CGI::Fast closes connections without sending data", "body": "<p>I am trying to deploy up a Perl application that uses <a href=\"http://cgi-app.org/\" rel=\"nofollow\"><code>CGI::Application</code></a> through Nginx, using FastCGI to communicate between them.</p>\n\n<p>Nginx keeps returning \"502 Bad Gateway\", and the error log is filled with this:</p>\n\n<blockquote>\n  <p>2015/02/03 12:40:03 [error] 11209#0: *2 upstream prematurely closed connection while reading response header from upstream, client: 10.1.1.23, server: www.example.com, request: \"GET /test.fcgi HTTP/1.1\", upstream: \"<a href=\"http://127.0.0.1:5001/test.fcgi\" rel=\"nofollow\">http://127.0.0.1:5001/test.fcgi</a>\", host: \"www.example.com\"</p>\n</blockquote>\n\n<p>Here is the Nginx site configuration:</p>\n\n<pre><code>upstream @perl {\n#   I had been trying to use a socket, but I switched to TCP to try WireShark.\n#   server unix:/var/run/nginx/my-app.sock;\n    server 127.0.0.1:5001;\n}\n\nserver {\n    listen       80;\n    listen       443 ssl;\n\n    server_name www.example.com;\n    root /home/example/sites/www.example.com;\n\n    location ~* \\.fcgi(/|$) {\n\n        fastcgi_split_path_info ^(.+?\\.cgi)(/.*)$;\n        # (I know that the `if` is old-style, and that `try_files` is better, but that shouldn't affect whether it works or not.)\n        if (!-f $document_root$fastcgi_script_name) {\n                return 404;\n        }\n\n        proxy_set_header Host $http_host;\n        proxy_set_header X-Forwarded-Host $http_host;\n        proxy_set_header X-Real-IP $remote_addr;\n        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n        proxy_set_header X-Forwarded-Port 443;\n        proxy_pass http://@perl;\n    }\n}\n</code></pre>\n\n<p>To see if the problem is with the Perl application itself, I created a new fcgi application based on the test code found in the <a href=\"http://perldoc.perl.org/CGI/Fast.html\" rel=\"nofollow\"><code>CGI::Fast</code> documentation</a>:</p>\n\n<pre><code>#!/usr/bin/perl -wT\n\nuse CGI::Fast;\n\n# Added this to see if there are errors.    \n# See http://perldoc.perl.org/CGI/Carp.html\nBEGIN {\n    use CGI::Carp qw(carpout);\n    open(LOG, \"&gt;&gt;/home/example/sites/www.example.com/err.log\") or\n      die(\"Unable to open mycgi-log: $!\\n\");\n    carpout(LOG);\n}\n\nlocal $count = 0;\n\n$ENV{FCGI_SOCKET_PATH} = \"127.0.0.1:5001\";\n$ENV{FCGI_LISTEN_QUEUE} = 100;\n\nwhile ( my $q = new CGI::Fast ) {\n    $count++;\n    print $q-&gt;header( \"text/plain\" ),\n          \"You are request number $count. Have a good day!\\n\";\n}\n</code></pre>\n\n<p>When I run <code>./test.fcgi</code>, I can see in <code>netstat</code> that it has bound to port 5001.  When I go to the URL in the browser, I still get a 502 with this super-simple app.  There is nothing in the error log that <code>Carp</code> is writing to.</p>\n\n<p>I do not want to use plain CGI (<a href=\"http://wiki.nginx.org/Fcgiwrap\" rel=\"nofollow\">via a wrapper script</a>) because of the application's long startup time, and I can't convert the whole application to Plack/PSGI.</p>\n\n<p>How can I figure out why Nginx won't talk to Perl <code>CGI::Fast</code>, even to the plain example from the docs?</p>\n"}, {"tags": ["perl", "nonblocking"], "comments": [{"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 1, "creation_date": 1424458705, "post_id": 28636143, "comment_id": 45572218, "body": "Minor side-note: <code>sleep</code> only allows integer values, so <code>sleep 0.005</code> is actually sleeping for 0 seconds. You can use <code>usleep</code> or <code>nanosleep</code> from <a href=\"http://perldoc.perl.org/Time/HiRes.html\" rel=\"nofollow noreferrer\"><code>Time::HiRes</code></a> to sleep for a certain number of microseconds or nanoseconds, respectively."}, {"owner": {"reputation": 2722, "user_id": 1846979, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/7d247cd6a1e86c8e3f135743d0e51527?s=128&d=identicon&r=PG", "display_name": "Stanimirovv", "link": "https://stackoverflow.com/users/1846979/stanimirovv"}, "reply_to_user": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1424458808, "post_id": 28636143, "comment_id": 45572258, "body": "Thanks. I will update the example."}, {"owner": {"reputation": 41846, "user_id": 926143, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/3396173c3d22988be1a0732d184902aa?s=128&d=identicon&r=PG", "display_name": "7stud", "link": "https://stackoverflow.com/users/926143/7stud"}, "edited": false, "score": 0, "creation_date": 1424461400, "post_id": 28636143, "comment_id": 45573538, "body": "EAGAIN??  There is no filehandle named EAGAIN in your code.  In any case, <code>$!</code> is a string."}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "reply_to_user": {"reputation": 41846, "user_id": 926143, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/3396173c3d22988be1a0732d184902aa?s=128&d=identicon&r=PG", "display_name": "7stud", "link": "https://stackoverflow.com/users/926143/7stud"}, "edited": false, "score": 0, "creation_date": 1424461987, "post_id": 28636143, "comment_id": 45573804, "body": "@7stud <code>EAGAIN</code> is not a filehandle, it is a constant exported by <code>use POSIX qw(:errno_h);</code>. See <a href=\"http://stackoverflow.com/q/4058368/176646\">What does EAGAIN mean?</a> for details."}, {"owner": {"reputation": 41846, "user_id": 926143, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/3396173c3d22988be1a0732d184902aa?s=128&d=identicon&r=PG", "display_name": "7stud", "link": "https://stackoverflow.com/users/926143/7stud"}, "reply_to_user": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1424462128, "post_id": 28636143, "comment_id": 45573892, "body": "@ThisSuitIsBlackNot, Whoops...missed the use statement."}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "reply_to_user": {"reputation": 41846, "user_id": 926143, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/3396173c3d22988be1a0732d184902aa?s=128&d=identicon&r=PG", "display_name": "7stud", "link": "https://stackoverflow.com/users/926143/7stud"}, "edited": false, "score": 0, "creation_date": 1424462407, "post_id": 28636143, "comment_id": 45574028, "body": "@7stud As for <code>$!</code> being a string, see <a href=\"http://perldoc.perl.org/perlvar.html\" rel=\"nofollow noreferrer\"><code>perldoc perlvar</code></a>: <i>&quot;When referenced, <code>$!</code> retrieves the current value of the C errno integer variable...When referenced as a string, <code>$!</code> yields the system error string corresponding to errno .&quot;</i>"}, {"owner": {"reputation": 41846, "user_id": 926143, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/3396173c3d22988be1a0732d184902aa?s=128&d=identicon&r=PG", "display_name": "7stud", "link": "https://stackoverflow.com/users/926143/7stud"}, "reply_to_user": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1424463342, "post_id": 28636143, "comment_id": 45574471, "body": "@ThisSuitIsBlackNot, Yeah, I looked that up first, but there were 39 matches on the page.  I didn&#39;t get far enough.  Tricky perl."}], "answers": [{"comments": [{"owner": {"reputation": 2722, "user_id": 1846979, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/7d247cd6a1e86c8e3f135743d0e51527?s=128&d=identicon&r=PG", "display_name": "Stanimirovv", "link": "https://stackoverflow.com/users/1846979/stanimirovv"}, "edited": false, "score": 1, "creation_date": 1424459109, "post_id": 28636354, "comment_id": 45572398, "body": "First of all thank you for the answer. This is a pretty convenient approach. I am trying to do things in a single thread (for now). I will test with bigger files."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "reply_to_user": {"reputation": 2722, "user_id": 1846979, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/7d247cd6a1e86c8e3f135743d0e51527?s=128&d=identicon&r=PG", "display_name": "Stanimirovv", "link": "https://stackoverflow.com/users/1846979/stanimirovv"}, "edited": false, "score": 1, "creation_date": 1424459163, "post_id": 28636354, "comment_id": 45572430, "body": "There&#39;s no wrong answer, so whichever you prefer. Just bear in mind that filesystem writes will often go straight to cache, so the write operation will complete very quickly, until you start overrunning that cache. A 1s sleep after small number of bytes won&#39;t do that. You might find that <code>$buffer = &quot;a&quot; x 1048576;</code> is a useful construct :)"}, {"owner": {"reputation": 41846, "user_id": 926143, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/3396173c3d22988be1a0732d184902aa?s=128&d=identicon&r=PG", "display_name": "7stud", "link": "https://stackoverflow.com/users/926143/7stud"}, "edited": false, "score": 1, "creation_date": 1424460143, "post_id": 28636354, "comment_id": 45572919, "body": "Come now, perl is one language that got it right: it&#39;s <code>1_048_576</code>."}], "tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": false, "score": 2, "last_activity_date": 1424458978, "creation_date": 1424458978, "answer_id": 28636354, "question_id": 28636143, "link": "https://stackoverflow.com/questions/28636143/perl-check-if-nonblocking-file-read-write-has-finished/28636354#28636354", "title": "Perl check if nonblocking file read/ write has finished", "body": "<p>I'll go at a bit of a tangent - I'm not too familiar with doing nonblocking IO like that, because my approach tends to be to either <code>thread</code> or <code>fork</code> and do it that way. </p>\n\n<p>Nonblocking writes to a file though, aren't all that common - it's usually not relevant when doing so with small files, so your test case probably isn't going to work. I'd suggest you aim for several megabytes of writes, just to be able to see it happen.</p>\n\n<p>As for a threading approach - I tend to do it like this:</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\n\nuse threads;\nuse Thread::Queue;\n\nmy $output_q = Thread::Queue-&gt;new();\n\nsub writer {\n    open( my $output_fh, \"&gt;\", \"output_file.txt\" ) or die $!;\n    while ( my $line = $output_q-&gt;dequeue ) {\n        print {$output_fh} $line;\n    }\n    close($output_fh) or die $!;\n}\n\n## main bit.\n\nmy $writer = threads-&gt;create( \\&amp;writer );\n\nmy $done = 0;\n\nwhile ( not $done ) {\n    $output_q-&gt;enqueue( \"a\" x 1024 );\n\n    # do something else.\n    #repeat until $done\n\n}\n\n$output_q-&gt;end();\n$writer-&gt;join();\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 2722, "user_id": 1846979, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/7d247cd6a1e86c8e3f135743d0e51527?s=128&d=identicon&r=PG", "display_name": "Stanimirovv", "link": "https://stackoverflow.com/users/1846979/stanimirovv"}, "edited": false, "score": 1, "creation_date": 1424464227, "post_id": 28637409, "comment_id": 45574910, "body": "That is the best definition of the difference between non-blocking and asynchronous that I&#39;ve seen, ever."}], "tags": [], "owner": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "is_accepted": true, "score": 4, "last_activity_date": 1424463493, "last_edit_date": 1424463493, "creation_date": 1424463171, "answer_id": 28637409, "question_id": 28636143, "link": "https://stackoverflow.com/questions/28636143/perl-check-if-nonblocking-file-read-write-has-finished/28637409#28637409", "title": "Perl check if nonblocking file read/ write has finished", "body": "<p>First, non-blocking I/O works on sockets and pipes, but not on regular files. That is not a limit of Perl but of the underlying system. What you instead want for regular files would not be non-blocking but asynchronous I/O:</p>\n\n<ul>\n<li>non-blocking I/O: operation will not block when it can not be finished immediately but it will do as much as it can and then return.</li>\n<li>asynchronous I/O: the operation will be done in the background and the application will be notified once it is done. </li>\n</ul>\n\n<p>Unfortunately support for real asynchronous I/O is system specific and often not well supported so you would need to use threads here (again, that's not a problem of Perl but of the underlying system). You might want to take a look at <a href=\"https://metacpan.org/pod/IO::AIO\" rel=\"nofollow\">IO::AIO</a> which tries to give you the feeling of asynchronous I/O by using whatever the system supports. But note also that it is not very efficient and if you could use non-blocking sockets directly (i.e. with sockets but not with regular files) you should do it.</p>\n\n<p>To use non-blocking you have to mark the file descriptor as non-blocking and then you read, write, connect, accept etc on it like you do normally, except that it will never block but return <code>EAGAIN</code>/<code>EWOULDBLOCK</code> if the operation can not be executed immediately. To wait until a file descriptor becomes readable/writable again you can use <code>select</code>, <code>poll</code>, <code>kqueue</code> or similar mechanisms.</p>\n\n<p>That's for a short introduction. Some things you have to watch out for:</p>\n\n<ul>\n<li>Setting a file descriptor to non-blocking is different on UNIX and Windows. <code>IO::Socket-&gt;blocking</code> handles the major differences for you.</li>\n<li>On todays UNIX <code>EAGAIN</code> is the same as <code>EWOULDBLOCK</code> but on Windows this is different and you have usually to use <code>EWOULDBLOCK</code>. </li>\n<li>Again, non-blocking does not work on regular files. It might not throw an error but will simply block.</li>\n<li>You have to watch out if you want to use non-blocking with file descriptors which do not reside entirely in the kernel (like with SSL sockets). Look at the <a href=\"https://metacpan.org/pod/IO::Socket::SSL#Using-Non-Blocking-Sockets\" rel=\"nofollow\">documentation of IO::Socket::SSL</a> for more information.</li>\n</ul>\n"}], "owner": {"reputation": 2722, "user_id": 1846979, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/7d247cd6a1e86c8e3f135743d0e51527?s=128&d=identicon&r=PG", "display_name": "Stanimirovv", "link": "https://stackoverflow.com/users/1846979/stanimirovv"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1015, "favorite_count": 0, "accepted_answer_id": 28637409, "answer_count": 2, "score": 1, "last_activity_date": 1424463493, "creation_date": 1424458251, "last_edit_date": 1424458817, "question_id": 28636143, "link": "https://stackoverflow.com/questions/28636143/perl-check-if-nonblocking-file-read-write-has-finished", "title": "Perl check if nonblocking file read/ write has finished", "body": "<p>I am learning about non blocking io in perl. I have the following script, where I am trying to write to a file in a non blocking fashion.</p>\n\n<p>Is this the correct way to do it ? If not what is the correct way  ? I am having trouble simulating a write that doesn't happen in an instant, so I can't really test it if it works or not.</p>\n\n<pre><code>use strict;\nuse warnings;\n\nuse POSIX qw(:errno_h);\n\nopen(my $fh, \"&gt;&gt;\", \"b.txt\") or die \"$! \\n\";\n\nmy $buffer = \"aaaaaaaaaaaaaaaaaaaaaaa\\n\";\n\nmy $rv = syswrite($fh, $buffer, length $buffer);\n#start more non blocking operations\nwhile(1)\n{\n    if (!defined($rv) &amp;&amp; $! == EAGAIN) {\n        print \"Would block \\n\";\n    } elsif ($rv != length $buffer) {\n        print \"Incomplete write \\n\";\n    } else {\n    print \"Successfull write so we can do what we want with the read data\\n\";\n    }\n   #check the other operations\n\n   #sleep for a bit\n    sleep 1;\n}\n</code></pre>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 2, "creation_date": 1424458204, "post_id": 28634680, "comment_id": 45571969, "body": "<b><i>Always</i></b> <code>use strict</code> and <code>use warnings</code> at the start of <i>every</i> Perl program you write, no matter how trivial. There is very little point in using <code>my</code> without <code>strict</code> in place."}, {"owner": {"reputation": 51, "user_id": 1617332, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ba17896bee579b535a0a8c055ecbac8?s=128&d=identicon&r=PG", "display_name": "MeNoSeeGood", "link": "https://stackoverflow.com/users/1617332/menoseegood"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1424466004, "post_id": 28634680, "comment_id": 45575743, "body": "Trust me, I do.  I just didn&#39;t write them for this example because it wasn&#39;t part of the central core of the question."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1424466267, "post_id": 28634680, "comment_id": 45575877, "body": "Yet you included the shebang line, which is less relevant by far! Please always write your examples according to best practice: you will be chastised less often, and more people who read your questions will believe that it is a <i>good idea</i>."}, {"owner": {"reputation": 51, "user_id": 1617332, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ba17896bee579b535a0a8c055ecbac8?s=128&d=identicon&r=PG", "display_name": "MeNoSeeGood", "link": "https://stackoverflow.com/users/1617332/menoseegood"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1424466381, "post_id": 28634680, "comment_id": 45575943, "body": "touche.  It&#39;s my first post, so I didn&#39;t really know what to expect.  Edited code to reflect this."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 2, "creation_date": 1424466530, "post_id": 28634680, "comment_id": 45576022, "body": "Fair enough. Just remember that Stack Overflow isn&#39;t a forum, but rather a resource that aims to have solutions to most programming problems -- more like a Wikipedia triggered by individuals&#39; questions."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1424466584, "post_id": 28634680, "comment_id": 45576043, "body": "Your modules need to be decorated as well!"}], "answers": [{"tags": [], "owner": {"reputation": 3984, "user_id": 1801086, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ef4c0400ffff14d5e1c16ca3856c09ba?s=128&d=identicon&r=PG", "display_name": "tjd", "link": "https://stackoverflow.com/users/1801086/tjd"}, "is_accepted": false, "score": 2, "last_activity_date": 1424455777, "last_edit_date": 1424455777, "creation_date": 1424454022, "answer_id": 28635023, "question_id": 28634680, "link": "https://stackoverflow.com/questions/28634680/perl-module-class-method-vs-ordinary-subroutine/28635023#28635023", "title": "Perl module class method vs ordinary subroutine", "body": "<p>There's nothing inherently wrong with an ordinary subroutine.  They do what they're designed to do very well.</p>\n\n<p>Methods on the other hand, do all the same things <em>and</em> play nicely with any Class that inherits from yours.</p>\n\n<p>So ask yourself:</p>\n\n<ul>\n<li>Are you expecting/permitting/encouraging folks to write Classes that inherit from your module?</li>\n<li>Is your module defining a more complex data structure that works well as an object?</li>\n</ul>\n\n<p>or</p>\n\n<ul>\n<li>Is your module a library of utilities that operate on fundamental data types?</li>\n</ul>\n\n<p>There's plenty of room in this world for both, but if you find yourself, as you did in <code>Bar</code>, ignoring <code>$class</code> (or more commonly <code>$self</code>) throughout the module, then perhaps you've gone too far by designing them as methods.  More importantly, anyone who tries to inherit from your marginally OO \"Class\" will get a rude surprise when your methods can't tell the difference between the two classes...</p>\n"}, {"tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": false, "score": 1, "last_activity_date": 1424457496, "creation_date": 1424457496, "answer_id": 28635922, "question_id": 28634680, "link": "https://stackoverflow.com/questions/28634680/perl-module-class-method-vs-ordinary-subroutine/28635922#28635922", "title": "Perl module class method vs ordinary subroutine", "body": "<p>This is more a question of code paradigm. </p>\n\n<p>There is absolutely nothing wrong with a non object oriented approach to your code. It works, and it works well. </p>\n\n<p>However, object orientation provides a bunch of benefits that are worth considering - and if they're something you want, go an OO route. </p>\n\n<p>Specifically - objects provide encapsulation. It makes it a lot easier for me to write a module and you to just use it. Look at say, <code>LWP::UserAgent</code> for an example:</p>\n\n<pre><code> require LWP::UserAgent;\n\n my $ua = LWP::UserAgent-&gt;new;\n $ua-&gt;timeout(10);\n $ua-&gt;env_proxy;\n $ua-&gt;agent('Mozilla/5.0');\n\n my $response = $ua-&gt;get('http://search.cpan.org/');\n\n if ($response-&gt;is_success) {\n     print $response-&gt;decoded_content;  # or whatever\n }\n else {\n     die $response-&gt;status_line;\n }\n</code></pre>\n\n<p>Now, all of the above you <em>could</em> do via inherited subroutines. But if you wanted to do multiple fetches of multiple pages, you'd either have to:</p>\n\n<ul>\n<li>Build a sub that took all the parameters you needed - including returning somehow, a 'success/fail/result' - maybe in an array?</li>\n<li>Otherwise have 'state' hidden in your external module.</li>\n</ul>\n\n<p>OO is just a neater, more understandable method of doing that. (There are other benefits of doing OO, which I'm sure you could Google). </p>\n"}, {"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 4, "last_activity_date": 1424476572, "last_edit_date": 1424476572, "creation_date": 1424459235, "answer_id": 28636432, "question_id": 28634680, "link": "https://stackoverflow.com/questions/28634680/perl-module-class-method-vs-ordinary-subroutine/28636432#28636432", "title": "Perl module class method vs ordinary subroutine", "body": "<p>The decider is whether your <code>Module</code> is an object-oriented module or not.</p>\n\n<ul>\n<li><p>If <code>Module</code> is simply a container for a collection of subroutines, then I would expect it to use <code>Exporter</code> and offer the opportunity to import a subset of its subroutines into the calling name space. An example is <code>List::Util</code></p></li>\n<li><p>On the other hand, if there is a constructor <code>Module::new</code>, and the intention is to use it in an OO manner, then you shouldn't mix simple subroutines in with methods (except perhaps for private subroutines that the module uses internally). An example is <code>LWP::UserAgent</code></p></li>\n</ul>\n\n<p>So I would expect the sources to be written like one or the other of these, and not a mixture in between. Of course there are always circumstances where a rule of thumb should be ignored, but nothing comes to mind in this case.</p>\n\n<p><strong>Foo.pm</strong></p>\n\n<pre><code>use strict;\nuse warnings;\n\npackage Foo;\n\nuse Exporter 'import';\nour @EXPORT_OK = qw/ subroutine /;\n\nsub subroutine {\n    my ($arg)  = @_;\n    \"Ordinary subroutine arg is $arg\\n\";\n}\n\n1;\n</code></pre>\n\n<p><strong>Bar.pm</strong></p>\n\n<pre><code>use strict;\nuse warnings;\n\npackage Bar;\n\nsub new {\n  my $class = shift;\n  bless {}, $class;\n}\n\nsub subroutine {\n    my $class = shift;\n    my ($arg) = @_;\n    \"Class method arg is $arg\\n\";\n}\n\n1;\n</code></pre>\n\n<p><strong>main.pl</strong></p>\n\n<pre><code>#!/usr/local/bin/perl\n\nuse strict;\nuse warnings;\n\nuse Foo 'subroutine';\nuse Bar;\n\nmy $arg1 = \"blah\";\n\nprint subroutine($arg1);\nprint Bar-&gt;subroutine($arg1);\n</code></pre>\n\n<p><strong>output</strong></p>\n\n<pre><code>Ordinary subroutine arg is blah\nClass method arg is blah\n</code></pre>\n"}], "owner": {"reputation": 51, "user_id": 1617332, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ba17896bee579b535a0a8c055ecbac8?s=128&d=identicon&r=PG", "display_name": "MeNoSeeGood", "link": "https://stackoverflow.com/users/1617332/menoseegood"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1193, "favorite_count": 0, "answer_count": 3, "score": 5, "last_activity_date": 1424476572, "creation_date": 1424452934, "last_edit_date": 1424466353, "question_id": 28634680, "link": "https://stackoverflow.com/questions/28634680/perl-module-class-method-vs-ordinary-subroutine", "title": "Perl module class method vs ordinary subroutine", "body": "<p>So I was wondering if there is any difference in usage between a Perl class method and an ordinary subroutine from a standard module.  Is there a time you would use one over the other?  For this example, I'm assuming that no object methods are present in either module.</p>\n\n<p>Quick little main class here:</p>\n\n<pre><code>#!/usr/local/bin/perl\n\nuse strict;\nuse warnings;\n\nuse Foo;\nuse Bar;\n\nmy $arg1 = \"blah\";\nmy ($str1, $str2);\n\n$str1 = Foo::subroutine($arg1);\n$str2 = Bar-&gt;subroutine($arg1);\nexit(0);\n</code></pre>\n\n<p>Package Foo would hold my ordinary subroutine call </p>\n\n<pre><code>use strict;\nuse warnings;\n\npackage Foo;\n\nsub subroutine {\n    my $arg = shift;\n    my $string = \"Ordinary subroutine arg is $arg\\n\";\n    return $string;\n}\n1;\n</code></pre>\n\n<p>Package Bar would hold my class method call</p>\n\n<pre><code>use strict;\nuse warnings;\n\npackage Bar;\n\nsub subroutine {\n    my $class = shift;\n    my $arg = shift;\n    my $string = \"Class method arg is $arg\\n\";\n    return $string;\n}\n1;\n</code></pre>\n\n<p>Normally if I'm writing Perl code, I would just use the class method option (like with the Bar example), but I started pondering this question after reading some code from a former coworker that used the syntax like in the Foo example.  Both seem to do the same thing inherently, but there seems to be more than meets the eye.</p>\n"}, {"tags": ["perl", "grep"], "comments": [{"owner": {"reputation": 61610, "user_id": 725418, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/82ac2dc3e1ad4b7187f245c416528df9?s=128&d=identicon&r=PG", "display_name": "TLP", "link": "https://stackoverflow.com/users/725418/tlp"}, "edited": false, "score": 0, "creation_date": 1424457839, "post_id": 28633468, "comment_id": 45571810, "body": "<code>perl -ne&#39; if (&#47;unbound&#47;) { open my $out, &quot;&gt;&gt;&quot;, $ARGV . &quot;.txt&quot; or die $!; print $out $_; }&#39; *.log</code> perhaps?"}], "answers": [{"comments": [{"owner": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "edited": false, "score": 1, "creation_date": 1424453029, "post_id": 28633730, "comment_id": 45569278, "body": "Why <code>$filename =~ m,&#47;(\\w+).log$,</code> when there are umpteen ways to actually do it correctly?! See <a href=\"http://perlmaven.com/path-to-file-in-the-same-directory-as-script\" rel=\"nofollow noreferrer\">Construct the path to a file in the same directory as the current script</a>, and <a href=\"http://www.nu42.com/2014/12/int-main-in-c-and-hard-coded-directory.html\" rel=\"nofollow noreferrer\">int main in C and hard coded directory separators in Perl</a>, <a href=\"http://www.nu42.com/2014/11/more-adventures-in-test-failures.html\" rel=\"nofollow noreferrer\">More adventures in test failures</a>, and my other <a href=\"http://www.nu42.com/2014/11/tests-failing-due-to-path-separators.html\" rel=\"nofollow noreferrer\">assorted rants</a>."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "reply_to_user": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "edited": false, "score": 0, "creation_date": 1424456593, "post_id": 28633730, "comment_id": 45571161, "body": "Well, I could use all sorts of justifications, but in all honesty - because I&#39;ve not been caught out by doing it that way yet."}, {"owner": {"reputation": 577, "user_id": 4573353, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/843bcb9df7ef490fdba185dcb76ebea7?s=128&d=identicon&r=PG&f=1", "display_name": "EA00", "link": "https://stackoverflow.com/users/4573353/ea00"}, "edited": false, "score": 0, "creation_date": 1424457544, "post_id": 28633730, "comment_id": 45571661, "body": "@Sobrique I really appreciate all your comments! I am learning so much. Thanks for your help!!"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 3, "creation_date": 1424459625, "post_id": 28633730, "comment_id": 45572650, "body": "Updated to use <code>File::Basename</code> as a less bad example :)"}], "tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": true, "score": 6, "last_activity_date": 1424545452, "last_edit_date": 1424545452, "creation_date": 1424449865, "answer_id": 28633730, "question_id": 28633468, "link": "https://stackoverflow.com/questions/28633468/in-perl-how-can-filter-all-log-files-in-a-directory-and-extract-interesting-li/28633730#28633730", "title": "In Perl, how can filter all log files in a directory, and extract interesting lines?", "body": "<p>Few things I'd suggest to improve this code:</p>\n\n<ul>\n<li>declare your loop iterators within the loop. <code>foreach my $file ( @files ) {</code></li>\n<li>use 3 arg <code>open</code>: <code>open ( my $input_fh, \"&lt;\", $filename );</code></li>\n<li>use <code>glob</code> rather than <code>opendir</code> then <code>grep</code>. <code>foreach my $file ( &lt;$path/*.txt&gt; ) {</code></li>\n<li><code>grep</code> is good for extracting things into arrays. Your <code>grep</code> reads the whole file to print it, which isn't necessary. Doesn't matter much if the file is short though.</li>\n<li><code>perltidy</code> is great for reformatting code. </li>\n<li>you're opening 'OUT' to a directory path (I think?) which isn't going to work. </li>\n<li><code>$outpath</code> isn't, it's a file. You need to do something different to output to different files. <code>opendir</code> isn't really valid to an output. </li>\n<li>because you're using <code>opendir</code> that's actually giving you filenames - not full paths. So you might be in the wrong place to actually open the files. Prepending the path name, doing a <code>chdir</code> are possible solutions. But that's one of the reasons I like <code>glob</code> because it returns a path as well. </li>\n</ul>\n\n<p>So with that in mind - how about:</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\nuse File::Basename;\n\n#Extract paths\nmy $input_path  = $ARGV[0];\nmy $output_path = $ARGV[1];\n\n#Error if paths are invalid. \nunless (defined $input_path\n    and -d $input_path\n    and defined $output_path\n    and -d $output_path )\n{\n    die \"Usage: $0 &lt;input_path&gt; &lt;output_path&gt;\\n\";\n}\n\nforeach my $filename (&lt;$input_path/*.log&gt;) {\n\n   # extract the 'name' bit of the filename. \n   # be slightly careful with this - it's based \n   # on an assumption which isn't always true. \n   # File::Spec is a more powerful way of accomplishing this.\n   # but should grab 'number####' from /path/to/file/number####.log\n   my $output_file = basename ( $filename, '.log' );\n\n   #open input and output filehandles. \n   open( my $input_fh, \"&lt;\", $filename ) or die $!;\n   open( my $output_fh, \"&gt;\", \"$output_path/$output_file.txt\" ) or die $!;\n\n   print \"Processing $filename -&gt; $output_path/$output_file.txt\\n\";\n\n   #iterate input, extracting into $line\n   while ( my $line = &lt;$input_fh&gt; ) {\n        #check if $line matches your RE. \n        if ( $line =~ m/Unbound/ ) {\n            #write it to output. \n            print {$output_fh} $line;\n        }\n   }\n   #tidy up our filehandles. Although technically, they'll \n   #close automatically because they leave scope\n   close($output_fh);\n   close($input_fh);\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "is_accepted": false, "score": 2, "last_activity_date": 1424461213, "last_edit_date": 1424461213, "creation_date": 1424452780, "answer_id": 28634629, "question_id": 28633468, "link": "https://stackoverflow.com/questions/28633468/in-perl-how-can-filter-all-log-files-in-a-directory-and-extract-interesting-li/28634629#28634629", "title": "In Perl, how can filter all log files in a directory, and extract interesting lines?", "body": "<p>Here is a script that takes advantage of <a href=\"https://metacpan.org/pod/Path::Tiny\" rel=\"nofollow\">Path::Tiny</a>. Now, at this stage of your learning process, you are probably better off understanding <a href=\"/a/28633730/100754\">@Sobrique's solution</a>, but using modules such as <a href=\"https://metacpan.org/pod/Path::Tiny\" rel=\"nofollow\">Path::Tiny</a> or <a href=\"https://metacpan.org/pod/Path::Class\" rel=\"nofollow\">Path::Class</a> will make it easier to write these one off scripts more quickly, and correctly.</p>\n\n<p>Also, I didn't really test this script, so watch out for bugs.</p>\n\n<pre><code>#!/usr/bin/env perl\n\nuse strict;\nuse warnings;\n\nuse Path::Tiny;\n\nrun(\\@ARGV);\n\nsub run {\n    my $argv = shift;\n    unless (@$argv == 2) {\n        die \"Need source and destination paths\\n\";\n    }\n    my $it = path($argv-&gt;[0])-&gt;realpath-&gt;iterator({\n        recurse =&gt; 0,\n        follow_symlinks =&gt; 0,\n    });\n    my $outdir = path($argv-&gt;[1])-&gt;realpath;\n\n    while (my $path = $it-&gt;()) {\n        next unless -f $path;\n        next unless $path =~ /[.]log\\z/;\n\n        my $logfh = $path-&gt;openr;\n        my $outfile = $outdir-&gt;child($path-&gt;basename('.log') . '.txt');\n        my $outfh;\n\n        while (my $line = &lt;$logfh&gt;) {\n            next unless $line =~ /Unbound/;\n            unless ($outfh) {\n                $outfh = $outfile-&gt;openw;\n            }\n            print $outfh $line;\n        }\n        close $outfh\n            or die \"Cannot close output '$outfile': $!\";\n    }\n}\n</code></pre>\n\n<h3>Notes</h3>\n\n<ul>\n<li><p><a href=\"https://metacpan.org/pod/Path::Tiny#realpath\" rel=\"nofollow\">realpath</a> will croak if the path provided does not exist.</p></li>\n<li><p>Similarly for <a href=\"https://metacpan.org/pod/Path::Tiny#openr\" rel=\"nofollow\">openr</a> and <a href=\"https://metacpan.org/pod/Path::Tiny#openw\" rel=\"nofollow\">openw</a>.</p></li>\n<li><p>I am reading input files line-by-line to keep the memory footprint of the program independent of the sizes of input files.</p></li>\n<li><p>I do not open the output file until I know I have a match to print to.</p></li>\n<li><p>When matching a file extension using a regular expression pattern, keep in mind that <code>\\n</code> is a valid character in Unix file names, and the <code>$</code> anchor <em>will</em> match it.</p></li>\n</ul>\n"}], "owner": {"reputation": 577, "user_id": 4573353, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/843bcb9df7ef490fdba185dcb76ebea7?s=128&d=identicon&r=PG&f=1", "display_name": "EA00", "link": "https://stackoverflow.com/users/4573353/ea00"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1533, "favorite_count": 1, "accepted_answer_id": 28633730, "answer_count": 2, "score": 2, "last_activity_date": 1424545452, "creation_date": 1424448988, "last_edit_date": 1424454336, "question_id": 28633468, "link": "https://stackoverflow.com/questions/28633468/in-perl-how-can-filter-all-log-files-in-a-directory-and-extract-interesting-li", "title": "In Perl, how can filter all log files in a directory, and extract interesting lines?", "body": "<p>I'm trying to select only the .log files in my directory and then search in those files for the word \"unbound\" and print the entire line into a new output file with the same name as the log file (<code>number###.log</code>) but with a <code>.txt</code> extension. This is what I have so far:</p>\n\n<pre><code>#!/usr/bin/perl\n\n  use strict;\n  use warnings;\n\n  my $path = $ARGV[0];\n  my $outpath = $ARGV[1];\n  my @files;\n  my $files;\n\n  opendir(DIR,$path) or die \"$!\";\n  @files = grep { /\\.log$/} readdir(DIR);\n\n\n  my @out;\n  my $out;\n  opendir(OUT,$outpath) or die \"$!\";\n\n  my $line;\n  foreach $files (@files) {\n  open (FILE, \"$files\");\n  my @line = &lt;FILE&gt;;\n  my $regex = Unbound;\n  open (OUT, \"&gt;&gt;$out\");\n  print grep {$line =~ /$regex/ } &lt;&gt;;\n   } \n  close OUT;\n  close FILE;\n\n  closedir(DIR);\n  closedir (OUT);\n</code></pre>\n\n<p>I'm a beginner, and I don't really know how to create a new text file with the acquired output.</p>\n"}, {"tags": ["perl", "shell", "stdout"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1424450675, "post_id": 28632066, "comment_id": 45567892, "body": "<code>open(STDOUT, &quot;| perl -pe&#39;s&#47;...&#47;...&#47;&#39; | tee $log&quot;)</code>"}], "answers": [{"tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": false, "score": 2, "last_activity_date": 1424445319, "last_edit_date": 1424445319, "creation_date": 1424444867, "answer_id": 28632118, "question_id": 28632066, "link": "https://stackoverflow.com/questions/28632066/filtering-stdout-in-perl/28632118#28632118", "title": "Filtering STDOUT in Perl", "body": "<p>Not the way you're doing it, because what you're doing is sending <em>everything</em> to <code>tee</code> and <code>tee</code> is then printing what it's logging. </p>\n\n<p>You could perhaps create a pipe that has a <code>sed</code> built in. But an alternative might be to write your own 'log_line' sub, that prints to a log file and stdout explicitly. </p>\n\n<pre><code>sub print2 {\n    print {$output_fh} @_;\n    print @_; \n}\n</code></pre>\n\n<p>And you could build in your own transforms. </p>\n\n<p>You also have several modules to draw upon, such as <code>IO::Tee</code> and <code>log4perl</code>. If you're wanting to have different things going to <code>STDOUT</code> and your log, then it's probably worth looking at doing a more fully featured logging. </p>\n"}], "owner": {"reputation": 18319, "user_id": 472485, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/eaad078400b012b1e37fa6f11dd5c089?s=128&d=identicon&r=PG", "display_name": "Jean", "link": "https://stackoverflow.com/users/472485/jean"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 148, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1424449303, "creation_date": 1424444681, "last_edit_date": 1424449303, "question_id": 28632066, "link": "https://stackoverflow.com/questions/28632066/filtering-stdout-in-perl", "title": "Filtering STDOUT in Perl", "body": "<p>I do this so that every message send out to <code>STDOUT</code> in my script is logged.</p>\n\n<pre><code>open(STDOUT,\" | tee $log\") or die \"Unable to open $log\";\n</code></pre>\n\n<p>Is it easily possible to filter all the messages which are send out to the log ? Say substitution of a character ?</p>\n"}, {"tags": ["perl", "shell"], "answers": [{"comments": [{"owner": {"reputation": 672, "user_id": 1421248, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/023634de21a47ccbe4c0329059196d34?s=128&d=identicon&r=PG", "display_name": "falconspy", "link": "https://stackoverflow.com/users/1421248/falconspy"}, "edited": false, "score": 0, "creation_date": 1424450689, "post_id": 28632754, "comment_id": 45567901, "body": "Might I recommend not using the system() function?   There are much better and safer options to make an external call to another application"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 672, "user_id": 1421248, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/023634de21a47ccbe4c0329059196d34?s=128&d=identicon&r=PG", "display_name": "falconspy", "link": "https://stackoverflow.com/users/1421248/falconspy"}, "edited": false, "score": 0, "creation_date": 1424450726, "post_id": 28632754, "comment_id": 45567916, "body": "@falconspy, You might, but I don&#39;t know why you would do that. I also don&#39;t know why you think there&#39;s something safer."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 1, "last_activity_date": 1424446799, "creation_date": 1424446799, "answer_id": 28632754, "question_id": 28631957, "link": "https://stackoverflow.com/questions/28631957/how-to-add-special-character-in-perl-with-system-command/28632754#28632754", "title": "How to add special character in perl with system command?", "body": "<blockquote>\n  <p>I want to run this jboss cli shell command in perl script.</p>\n</blockquote>\n\n<p>Then you need to execute a jboss cli shell! Passing a jboss command (or Perl code or JavaScript code or ...) to <code>system</code> is just not going to work.</p>\n\n<p>A quick google search seems to indicate it's named <code>jboss-cli.sh</code> and it accepts the standard <code>-c COMMAND</code> argument, so</p>\n\n<pre><code>my $cmd = '/subsystem=logging/...';\nsystem('jboss-cli.sh', '-c', $cmd);\n</code></pre>\n"}], "owner": {"reputation": 611, "user_id": 2306593, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/1066c38b82761dc8827e550c5a72ea86?s=128&d=identicon&r=PG&f=1", "display_name": "Azhaguvel A", "link": "https://stackoverflow.com/users/2306593/azhaguvel-a"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 163, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1424446799, "creation_date": 1424444348, "last_edit_date": 1424444493, "question_id": 28631957, "link": "https://stackoverflow.com/questions/28631957/how-to-add-special-character-in-perl-with-system-command", "title": "How to add special character in perl with system command?", "body": "<p>I want to run this jboss cli shell command in perl script. it will work correctly If i run this command in shell terminal but it won't in inside perl script.</p>\n\n<p><strong><em>In Shell:</em></strong></p>\n\n<pre><code>/subsystem=logging/periodic-rotating-file-handler=SAMPLE:write-attribute(name=formatter,value=\"%d{HH:mm:ss,SSS} %-5p [%c] (%t) %s%E%n\")\n</code></pre>\n\n<p><strong><em>In Perl:</em></strong></p>\n\n<pre><code>system(\"/subsystem=logging/periodic-rotating-file-handler=SAMPLE:write-attribute(name=formatter,value=\\\"%d{HH:MM:ss,SSS} %-5p [%c] (%t) %s%E%n\\\")\");\n</code></pre>\n\n<p>The error seems to be special characters in below text.</p>\n\n<p>Input : <code>\"%d{HH:MM:ss,SSS} %-5p [%c] (%t) %s%E%n\"</code></p>\n\n<p>Output: <code>%d%-5p(%t)%s%E%n</code></p>\n\n<p>Input : <code>\"%d(HH:MM:ss,SSS) %-5p %c (%t) %s%E%n\"</code></p>\n\n<p>Output: <code>\"%d(HH:MM:ss,SSS)%-5p%c(%t)%s%E%n</code></p>\n\n<p>I have tried many ways to fix but i am still facing this issue. </p>\n\n<p>Why <code>{}</code> and <code>[]</code> are not able to print in perl.\nCould you please give me an idea to resolve this?</p>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 12075, "user_id": 1137055, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/59d7b43b9eb7d01bd8f7e51febe6053c?s=128&d=identicon&r=PG", "display_name": "dgw", "link": "https://stackoverflow.com/users/1137055/dgw"}, "edited": false, "score": 1, "creation_date": 1424443894, "post_id": 28631583, "comment_id": 45563492, "body": "Always <code>use strict;</code> ... you are trying to use the <code>$getty</code> Filehandle twice (one for reading and one for writing). The <code>use strict;</code> would have warned you."}, {"owner": {"reputation": 9, "user_id": 4588407, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/548589cf3aa4efa3b49456291d068108?s=128&d=identicon&r=PG&f=1", "display_name": "Hayest", "link": "https://stackoverflow.com/users/4588407/hayest"}, "reply_to_user": {"reputation": 12075, "user_id": 1137055, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/59d7b43b9eb7d01bd8f7e51febe6053c?s=128&d=identicon&r=PG", "display_name": "dgw", "link": "https://stackoverflow.com/users/1137055/dgw"}, "edited": false, "score": 0, "creation_date": 1424444083, "post_id": 28631583, "comment_id": 45563615, "body": "I will add <code>use strict;</code>. So I need to create a new Filehandle for my open output - (understood). How can I write everything from my input.txt to my output.txt with the switch from &#39;new&#39; to &#39;old&#39; made? Also, I want to assume output.txt does not exist at time the code executes."}], "answers": [{"comments": [{"owner": {"reputation": 8016, "user_id": 196241, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/9b0541fbc7bb5d5bd29aa59c96315c37?s=128&d=identicon&r=PG", "display_name": "w.k", "link": "https://stackoverflow.com/users/196241/w-k"}, "edited": false, "score": 0, "creation_date": 1424443695, "post_id": 28631646, "comment_id": 45563365, "body": "OP includes condition <code>needs to work regardless of case in the input file</code>. This may mean NEW -&gt; OLD  and nEw -&gt; oLd, new -&gt; old, etc. If replacement&#39;s case is not important, i-switch is enough."}, {"owner": {"reputation": 9, "user_id": 4588407, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/548589cf3aa4efa3b49456291d068108?s=128&d=identicon&r=PG&f=1", "display_name": "Hayest", "link": "https://stackoverflow.com/users/4588407/hayest"}, "edited": false, "score": 0, "creation_date": 1424443836, "post_id": 28631646, "comment_id": 45563452, "body": "How do I get this to write to output.txt, which at time of execution does not exist?"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 1, "creation_date": 1424444060, "post_id": 28631646, "comment_id": 45563594, "body": "open it. Print to it."}, {"owner": {"reputation": 159902, "user_id": 3297613, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/KHhzd.jpg?s=128&g=1", "display_name": "Avinash Raj", "link": "https://stackoverflow.com/users/3297613/avinash-raj"}, "reply_to_user": {"reputation": 8016, "user_id": 196241, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/9b0541fbc7bb5d5bd29aa59c96315c37?s=128&d=identicon&r=PG", "display_name": "w.k", "link": "https://stackoverflow.com/users/196241/w-k"}, "edited": false, "score": 0, "creation_date": 1424444268, "post_id": 28631646, "comment_id": 45563736, "body": "@w.k then add an <code>i</code> modifier."}], "tags": [], "owner": {"reputation": 159902, "user_id": 3297613, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/KHhzd.jpg?s=128&g=1", "display_name": "Avinash Raj", "link": "https://stackoverflow.com/users/3297613/avinash-raj"}, "is_accepted": false, "score": 0, "last_activity_date": 1424444250, "last_edit_date": 1424444250, "creation_date": 1424443435, "answer_id": 28631646, "question_id": 28631583, "link": "https://stackoverflow.com/questions/28631583/regex-and-creating-output-file-perl-beginner/28631646#28631646", "title": "Regex and creating output file (Perl beginner)", "body": "<p>You don't need to put an if condition.</p>\n\n<pre><code>while(my $line = &lt;$getty&gt;) {\n    $line =~ s/new/old/gi;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 3414, "user_id": 40285, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/1574e7851a08a81faca7e0f87575510e?s=128&d=identicon&r=PG", "display_name": "Len Jaffe", "link": "https://stackoverflow.com/users/40285/len-jaffe"}, "edited": false, "score": 1, "creation_date": 1424710190, "post_id": 28634656, "comment_id": 45650763, "body": "I think yo mean -pi.orig , to that the output will be written to the file."}, {"owner": {"reputation": 3414, "user_id": 40285, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/1574e7851a08a81faca7e0f87575510e?s=128&d=identicon&r=PG", "display_name": "Len Jaffe", "link": "https://stackoverflow.com/users/40285/len-jaffe"}, "edited": false, "score": 0, "creation_date": 1424795100, "post_id": 28634656, "comment_id": 45692031, "body": "Conceptually correct, my typing was unforgivable :-)"}], "tags": [], "owner": {"reputation": 259, "user_id": 368067, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/49ebd9dd47b4101526fd70347a21be1c?s=128&d=identicon&r=PG", "display_name": "dynax60", "link": "https://stackoverflow.com/users/368067/dynax60"}, "is_accepted": false, "score": 0, "last_activity_date": 1424757029, "last_edit_date": 1424757029, "creation_date": 1424452854, "answer_id": 28634656, "question_id": 28631583, "link": "https://stackoverflow.com/questions/28631583/regex-and-creating-output-file-perl-beginner/28634656#28634656", "title": "Regex and creating output file (Perl beginner)", "body": "<p>The good recipe is to change smth. from shell by Perl:</p>\n\n<pre><code>perl -pi.orig -e 's{old}{new}g' filename.txt\n</code></pre>\n\n<p>This produce replacement in file filename.txt wtih an original file filename.txt.orig</p>\n"}, {"tags": [], "owner": {"reputation": 923, "user_id": 7727546, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5fe3d80f5c8283fb372c4f3aec775df8?s=128&d=identicon&r=PG&f=1", "display_name": "Benjamin Krupp", "link": "https://stackoverflow.com/users/7727546/benjamin-krupp"}, "is_accepted": false, "score": 0, "last_activity_date": 1492089677, "creation_date": 1492089677, "answer_id": 43393484, "question_id": 28631583, "link": "https://stackoverflow.com/questions/28631583/regex-and-creating-output-file-perl-beginner/43393484#43393484", "title": "Regex and creating output file (Perl beginner)", "body": "<p>I guess your course is over, however here is a complete answer for anyone who might need it:\nThe <code>if</code> is unnecessary. You need to use <code>print</code> on the output filehandle to create the file. Here is the complete working code (there is no comma after the filehandle in the print statement):</p>\n\n<pre><code>use strict;\n\nopen(my $in_file, \"&lt;\", \"input.txt\")\n    or die \"Cannot open &lt; input.txt: $!\";\n\nopen(my $out_file, \"&gt;\", \"output.txt\")\n    or die \"Cannot open &lt; output.txt: $!\";\n\nwhile(my $line = &lt;$in_file&gt;) {\n    $line =~ s/new/old/i;\n    print $out_file $line;\n}\n</code></pre>\n\n<p>If the case of the input word should be the same in the output word, this is a solution:</p>\n\n<pre><code>use strict;\n\nopen(my $in_file, \"&lt;\", \"input.txt\")\n    or die \"Cannot open &lt; input.txt: $!\";\n\nopen(my $out_file, \"&gt;\", \"output.txt\")\n    or die \"Cannot open &lt; output.txt: $!\";\n\nwhile(my $line = &lt;$in_file&gt;) {\n    $line =~ s{(new)}\n    {\n        my @chars = split '', $1;\n        my @old = qw/o l d/;\n        my @out;\n        foreach my $char (@chars) {\n            if($char =~ /\\p{Uppercase}/) {\n                push @out, uc(shift @old);\n            }\n            else {\n                push @out, shift @old;\n            }\n        }\n        join('', @out);\n    }esi;\n    print $out_file $line;\n }\n</code></pre>\n\n<p>What happens here is that I use <code>s{pattern}{replacement}</code>. The <code>e</code> modifier makes the replacement part perl code and <code>s</code> makes it possible for me to use whitespace in the expression. In the replecement code I go trough every char of the \"new\" (captured with braces so I can check it in the variable <code>$1</code>). If the char is uppercase I use the <code>uc</code> function to make the output char uppercase aswell.</p>\n"}], "owner": {"reputation": 9, "user_id": 4588407, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/548589cf3aa4efa3b49456291d068108?s=128&d=identicon&r=PG&f=1", "display_name": "Hayest", "link": "https://stackoverflow.com/users/4588407/hayest"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 71, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1492089677, "creation_date": 1424443276, "question_id": 28631583, "link": "https://stackoverflow.com/questions/28631583/regex-and-creating-output-file-perl-beginner", "title": "Regex and creating output file (Perl beginner)", "body": "<p>I'm in an intro to Perl course and we are tasked with taking an input.txt file (of the Gettysburg Address - that has all instances of the word 'old' changed to 'new') and creating an output.txt file that switches 'new' back to having 'old'. I've got a general regex that switches all instances of 'new' to 'old', but it needs to work regardless of case in the input file. I'm wondering how I could add that in? Also, I'm looking to verify that I have my output.txt built in correctly? When I run what I have, I get no output.txt file created in my directory. Here is what I have so far:</p>\n\n<pre><code>open(my $getty, \"&lt;\", \"input.txt\")\n    or die \"Cannot open &lt; input.txt: $!\";\n\nopen(my $getty, \"&gt;\", \"output.txt\")\n    or die \"Cannot open &lt; output.txt: $!\";\n\nwhile(my $line = &lt;$getty&gt;) {\n    if ($line =~ 's/new/old/') {\n        $line =~ s/new/old/;\n    }\n}\n</code></pre>\n"}, {"tags": ["perl", "awk", "grep"], "answers": [{"comments": [{"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1424444117, "post_id": 28631551, "comment_id": 45563638, "body": "I&#39;m really unkeen on &#39;shelling out&#39; to grep, personally."}, {"owner": {"reputation": 64845, "user_id": 2088135, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/YB10Q.jpg?s=128&g=1", "display_name": "Tom Fenech", "link": "https://stackoverflow.com/users/2088135/tom-fenech"}, "reply_to_user": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1424444500, "post_id": 28631551, "comment_id": 45563920, "body": "@Sobrique I&#39;m inclined to agree with you in general, although I guess that the preferred option could vary depending on the size of the output of the command."}], "tags": [], "owner": {"reputation": 64845, "user_id": 2088135, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/YB10Q.jpg?s=128&g=1", "display_name": "Tom Fenech", "link": "https://stackoverflow.com/users/2088135/tom-fenech"}, "is_accepted": false, "score": 1, "last_activity_date": 1424444112, "last_edit_date": 1424444112, "creation_date": 1424443199, "answer_id": 28631551, "question_id": 28631384, "link": "https://stackoverflow.com/questions/28631384/perl-grep-for-a-value-in-column-1/28631551#28631551", "title": "Perl grep for a value in column 1", "body": "<p>You could do this in Perl itself:</p>\n\n<pre><code>my @temp = `/nas/bin/nas_fs -query:TypeNumeric==1:IsRoot==False -fields:RWServers,ROServers,Name,RWMountpoint, -format:%L:%L:%s:%s\\\\\\\\n`;\nmy @filesystems = grep { !/^:/ } @temp;\n</code></pre>\n\n<p>This filters out any entries which begin with a colon from the list.</p>\n\n<p>Alternatively, you could invoke another process:</p>\n\n<pre><code>my @filesystems = `/nas/bin/nas_fs &lt;args&gt; | grep -v '^:'`;\n</code></pre>\n\n<p><code>grep -v</code> returns only lines that don't match the pattern, so lines beginning with a colon are excluded.</p>\n"}, {"comments": [{"owner": {"reputation": 64845, "user_id": 2088135, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/YB10Q.jpg?s=128&g=1", "display_name": "Tom Fenech", "link": "https://stackoverflow.com/users/2088135/tom-fenech"}, "edited": false, "score": 0, "creation_date": 1424443360, "post_id": 28631592, "comment_id": 45563139, "body": "I may be wrong but I suspect that the blank lines were only there by accident."}], "tags": [], "owner": {"reputation": 1748, "user_id": 4532614, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f230595feac883e1643f5ba43084e895?s=128&d=identicon&r=PG&f=1", "display_name": "TobyLL", "link": "https://stackoverflow.com/users/4532614/tobyll"}, "is_accepted": true, "score": 1, "last_activity_date": 1424443309, "creation_date": 1424443309, "answer_id": 28631592, "question_id": 28631384, "link": "https://stackoverflow.com/questions/28631384/perl-grep-for-a-value-in-column-1/28631592#28631592", "title": "Perl grep for a value in column 1", "body": "<p>You can do this in your script after <code>@filesystems</code> is populated:</p>\n\n<pre><code># Removes blank lines and lines starting with :\n@filesystems = grep { !/(^:|^\\s*$/ } @filesystems;\n</code></pre>\n"}], "owner": {"reputation": 7, "user_id": 4117546, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/26e107cf3ea1381f75bab28c6f00175f?s=128&d=identicon&r=PG&f=1", "display_name": "Ty Young", "link": "https://stackoverflow.com/users/4117546/ty-young"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 133, "favorite_count": 0, "accepted_answer_id": 28631592, "answer_count": 2, "score": 0, "last_activity_date": 1424444112, "creation_date": 1424442727, "last_edit_date": 1424443740, "question_id": 28631384, "link": "https://stackoverflow.com/questions/28631384/perl-grep-for-a-value-in-column-1", "title": "Perl grep for a value in column 1", "body": "<p>A system call I'm making in Perl as follows:</p>\n\n<pre><code>@filesystems = `/nas/bin/nas_fs -query:TypeNumeric==1:IsRoot==False -fields:RWServers,ROServers,Name,RWMountpoint, -format:%L:%L:%s:%s\\\\\\\\n`;\n</code></pre>\n\n<p>works well. It gets me the desired info:</p>\n\n<pre><code>server_5::fs_pipeline_950155:/root_vdm_30/fs_pipeline_95015    \n:server_7:fs_nfs_esx_wks_vms:    \nserver_7::fs_ovid3:/fs_ovid3\n</code></pre>\n\n<p>If, however, I want to <em>really</em> only populate <code>@filesystems</code> with entries for which there's a value in column 1 (i.e. the first value ... lines 1 and 3 in the example above), I'm unsure how to achieve this. <code>awk -F</code> through a pipe doesn't seem to work.</p>\n"}, {"tags": ["arrays", "perl"], "comments": [{"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1424443841, "post_id": 28629009, "comment_id": 45563457, "body": "Out of interest - if you <code>perl -c</code> that module, does it work?"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1424444031, "post_id": 28629009, "comment_id": 45563575, "body": "Actually, never mind. You need <code>warnings</code> turned on too, for perl to warn you about the bad syntax on that line."}], "answers": [{"tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": true, "score": 4, "last_activity_date": 1424443960, "last_edit_date": 1424443960, "creation_date": 1424435314, "answer_id": 28629042, "question_id": 28629009, "link": "https://stackoverflow.com/questions/28629009/access-array-defined-in-external-file-from-perl/28629042#28629042", "title": "Access array defined in external file from perl", "body": "<p>Because</p>\n\n<pre><code>$VAR::phpmodules = (\"php5-curl\", \"php5-mcrypt\", \"php-abc\");\n</code></pre>\n\n<p>isn't doing what you think it is. It's assigning the last element in the list.</p>\n\n<pre><code>my $thing = ( \"one\", \"two\", \"three\" );\nprint $thing;\n\n#prints \"three\"; \n</code></pre>\n\n<p>However, this is a really good example why <code>use strict;</code> <em>and</em> <code>use warnings;</code> is a REALLY good idea - because warnings tells you:</p>\n\n<pre><code>Useless use of a constant (\"one\") in void context at line ...\nUseless use of a constant (\"two\") in void context at line ...\n</code></pre>\n\n<p>Try:</p>\n\n<pre><code>$VAR::phpmodules = [\"php5-curl\", \"php5-mcrypt\", \"php-abc\"];\n</code></pre>\n\n<p>Which will turn it into an array-ref. (You'll have to dereference it to print it though, with print <code>@$VAR::phpmodules</code> )</p>\n\n<pre><code>my $thing = [ \"one\", \"two\", \"three\" ];\nprint @$thing;\n#prints onetwothree because no delimiter between array elements. \n</code></pre>\n\n<p>Or</p>\n\n<pre><code>@VAR::phpmodules = (\"php5-curl\", \"php5-mcrypt\", \"php-abc\");\n</code></pre>\n\n<p>e.g.</p>\n\n<pre><code>my @thing = ( \"one\", \"two\", \"three\" );\nprint @thing;\n#prints \"onetwothree\"\n</code></pre>\n"}], "owner": {"reputation": 8581, "user_id": 1740715, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/phIae.jpg?s=128&g=1", "display_name": "Harikrishnan", "link": "https://stackoverflow.com/users/1740715/harikrishnan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 78, "favorite_count": 0, "accepted_answer_id": 28629042, "answer_count": 1, "score": 0, "last_activity_date": 1424443960, "creation_date": 1424435214, "question_id": 28629009, "link": "https://stackoverflow.com/questions/28629009/access-array-defined-in-external-file-from-perl", "title": "Access array defined in external file from perl", "body": "<p>I have a perl pre_installer.conf program for storing config.</p>\n\n<pre><code>use strict;\n\n$VAR::phpmodules = (\"php5-curl\", \"php5-mcrypt\", \"php-abc\");\n1;\n</code></pre>\n\n<p>I have included this file and accessed <code>$VAR::phpmodules</code></p>\n\n<pre><code>require 'pre_installer.conf';\nprint $VAR::phpmodules;\n</code></pre>\n\n<p>But it prints only 'php-abc'. That is the last item only? Why didn't it print the whole array?</p>\n"}]