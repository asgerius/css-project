[{"tags": ["linux", "bash", "apache", "perl"], "comments": [{"owner": {"reputation": 432, "user_id": 2000566, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LfvHU.png?s=128&g=1", "display_name": "jjabba", "link": "https://stackoverflow.com/users/2000566/jjabba"}, "edited": false, "score": 0, "creation_date": 1518046009, "post_id": 48674739, "comment_id": 84348536, "body": "What webserver are you running? apache? nginx? Are you hosting using VirtuaHost?"}], "answers": [{"comments": [{"owner": {"reputation": 37436, "user_id": 1215106, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/615ff12525dbd5868b7c78d9754aed72?s=128&d=identicon&r=PG", "display_name": "\u2126mega", "link": "https://stackoverflow.com/users/1215106/%e2%84%a6mega"}, "edited": false, "score": 0, "creation_date": 1518094826, "post_id": 48675041, "comment_id": 84369593, "body": "Your answer was first and most likely indirectly helped other user to post correct answer in Perl. I appreciate that, but since Perl solution is preferable, I had accepted the other answer. Thank you for your understanding."}], "tags": [], "owner": {"reputation": 432, "user_id": 2000566, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LfvHU.png?s=128&g=1", "display_name": "jjabba", "link": "https://stackoverflow.com/users/2000566/jjabba"}, "is_accepted": false, "score": 2, "last_activity_date": 1518046143, "creation_date": 1518046143, "answer_id": 48675041, "question_id": 48674739, "link": "https://stackoverflow.com/questions/48674739/determine-root-folder-of-the-web-server/48675041#48675041", "title": "Determine root folder of the web server", "body": "<p>In PHP you can use <code>$_SERVER[\"DOCUMENT_ROOT\"]</code></p>\n\n<blockquote>\n  <p><strong>DOCUMENT_ROOT</strong></p>\n  \n  <p>The document root directory under which the current\n  script is executing, as defined in the server's configuration file.</p>\n</blockquote>\n\n<p>You can find more useful $_SERVER[...] constants in the <a href=\"http://php.net/manual/en/reserved.variables.server.php\" rel=\"nofollow noreferrer\">official documentation</a>.   </p>\n"}, {"comments": [{"owner": {"reputation": 37436, "user_id": 1215106, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/615ff12525dbd5868b7c78d9754aed72?s=128&d=identicon&r=PG", "display_name": "\u2126mega", "link": "https://stackoverflow.com/users/1215106/%e2%84%a6mega"}, "edited": false, "score": 0, "creation_date": 1518094634, "post_id": 48678741, "comment_id": 84369472, "body": "Exactly what I needed. Thanks!"}], "tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": true, "score": 4, "last_activity_date": 1518070333, "creation_date": 1518070333, "answer_id": 48678741, "question_id": 48674739, "link": "https://stackoverflow.com/questions/48674739/determine-root-folder-of-the-web-server/48678741#48678741", "title": "Determine root folder of the web server", "body": "<p>The document root will be in the <code>DOCUMENT_ROOT</code> environment variable - which can be accessed as <code>$ENV{DOCUMENT_ROOT}</code> within a Perl program.</p>\n"}], "owner": {"reputation": 37436, "user_id": 1215106, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/615ff12525dbd5868b7c78d9754aed72?s=128&d=identicon&r=PG", "display_name": "\u2126mega", "link": "https://stackoverflow.com/users/1215106/%e2%84%a6mega"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 186, "favorite_count": 0, "closed_date": 1518080694, "accepted_answer_id": 48678741, "answer_count": 2, "score": 1, "last_activity_date": 1518097430, "creation_date": 1518044420, "last_edit_date": 1518097430, "question_id": 48674739, "link": "https://stackoverflow.com/questions/48674739/determine-root-folder-of-the-web-server", "closed_reason": "Needs details or clarity", "title": "Determine root folder of the web server", "body": "<p>My Linux server use Apache web server. In most cases, by default, <code>/var/www/html</code> is the root folder of the web server. However this may differ from case by case.</p>\n\n<p>I need to determine root folder by running some code, either externally calling some <code>bash</code> command, or (preferably) with <code>Perl</code> code.</p>\n"}, {"tags": ["perl", "sed", "replace", "yaml"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 5, "creation_date": 1518028620, "post_id": 48670992, "comment_id": 84339891, "body": "Use a YAML parser."}, {"owner": {"reputation": 665, "user_id": 1928660, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/rnpOq.png?s=128&g=1", "display_name": "ATN", "link": "https://stackoverflow.com/users/1928660/atn"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1518029917, "post_id": 48670992, "comment_id": 84340653, "body": "Using a parser, I guess I would lose all comments and formatting in the files."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 2, "creation_date": 1518030025, "post_id": 48670992, "comment_id": 84340715, "body": "Which formatting? YAML is a machine-readable format. The formatting doesn&#39;t matter. There should be a parser that understands comments I believe. Someone with more YAML knowledge will come along shortly I am sure. But doing this without a parser means you have to build your own parser."}, {"owner": {"reputation": 68617, "user_id": 3776858, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/juunm.png?s=128&g=1", "display_name": "Cyrus", "link": "https://stackoverflow.com/users/3776858/cyrus"}, "edited": false, "score": 0, "creation_date": 1518030180, "post_id": 48670992, "comment_id": 84340814, "body": "Why is the line moved down with <code>hobbies</code>?"}, {"owner": {"reputation": 665, "user_id": 1928660, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/rnpOq.png?s=128&g=1", "display_name": "ATN", "link": "https://stackoverflow.com/users/1928660/atn"}, "edited": false, "score": 0, "creation_date": 1518030227, "post_id": 48670992, "comment_id": 84340838, "body": "I don&#39;t agree, I don&#39;t need a parser, I just need to replace plain text. It&#39;s that simple: I have some multi-line input text with special characters, and I need to replace it with some other multi-line text with special characters. And I don&#39;t need regexp or a parser."}, {"owner": {"reputation": 2784, "user_id": 8413636, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d8c46d1ea221e93d32a1b3d2ee354cae?s=128&d=identicon&r=PG&f=1", "display_name": "zzxyz", "link": "https://stackoverflow.com/users/8413636/zzxyz"}, "edited": false, "score": 0, "creation_date": 1518030444, "post_id": 48670992, "comment_id": 84340946, "body": "<a href=\"https://stackoverflow.com/questions/361752/how-can-i-pass-command-line-arguments-to-a-perl-program\" title=\"how can i pass command line arguments to a perl program\">stackoverflow.com/questions/361752/&hellip;</a> &lt;--I think you need to be using this approach rather than trying to use bash variables directly in your regex..if I&#39;m understanding what you&#39;re doing."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 2, "creation_date": 1518059975, "post_id": 48670992, "comment_id": 84352170, "body": "@ATN, Re &quot;<i>I don&#39;t need a parser</i>&quot;, By definition, you need a parser. What you are trying to write is a parser. The problem is that the parser you are writing is horrible at it. Worse, you imply this is hand-written YAML, so the user could provide any legitimate YAML, and none of the provided answers come even close to doing that. Did you know that valid JSON is valid YAML?"}], "answers": [{"comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 41204, "user_id": 1072112, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa3fecc914da2b7a82696d52729fc237?s=128&d=identicon&r=PG", "display_name": "ghoti", "link": "https://stackoverflow.com/users/1072112/ghoti"}, "edited": false, "score": 0, "creation_date": 1518038832, "post_id": 48671657, "comment_id": 84345468, "body": "@ghoti: That is completely irrelevant to the question. Why would anyone want to read about your lunch?"}], "tags": [], "owner": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "is_accepted": false, "score": 4, "last_activity_date": 1518031397, "last_edit_date": 1518031397, "creation_date": 1518030990, "answer_id": 48671657, "question_id": 48670992, "link": "https://stackoverflow.com/questions/48670992/replace-multi-line-plain-text/48671657#48671657", "title": "Replace multi-line plain text", "body": "<pre><code>$ cat tst.awk\nNR==FNR {\n    sub(/:/,\"\",$1)\n    map[$1] = $2\n    next\n}\n$3 in map {\n    $0 = $0 \"\\n  description: \" map[$3]\n}\n{ print }\n</code></pre>\n\n<p>.</p>\n\n<pre><code>$ awk -f tst.awk list RS= ORS='\\n\\n' foo.yaml\n- name: alan\n  age: 8\n\n- name: britney # some comment about britney\n  hobbies: [\"painting\", \"CS\"]\n  age: 21\n  description: teamblue\n\n- name: charles # some comment about charles\n                # that spans over multiple lines\n  age: 42\n  description: foobar\n</code></pre>\n\n<p>The above used these input files:</p>\n\n<pre><code>$ cat list\nbritney: teamblue\ncharles: foobar\n</code></pre>\n\n<p>.</p>\n\n<pre><code>$ cat foo.yaml\n- name: alan\n  age: 8\n\n- name: britney # some comment about britney\n  hobbies: [\"painting\", \"CS\"]\n  age: 21\n\n- name: charles # some comment about charles\n                # that spans over multiple lines\n  age: 42\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 2784, "user_id": 8413636, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d8c46d1ea221e93d32a1b3d2ee354cae?s=128&d=identicon&r=PG&f=1", "display_name": "zzxyz", "link": "https://stackoverflow.com/users/8413636/zzxyz"}, "edited": false, "score": 0, "creation_date": 1518037141, "post_id": 48672152, "comment_id": 84344582, "body": "awk like this is the reason I can sleep at night."}, {"owner": {"reputation": 2776, "user_id": 8300271, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/g0ORw.jpg?s=128&g=1", "display_name": "Rahul Verma", "link": "https://stackoverflow.com/users/8300271/rahul-verma"}, "reply_to_user": {"reputation": 2784, "user_id": 8413636, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d8c46d1ea221e93d32a1b3d2ee354cae?s=128&d=identicon&r=PG&f=1", "display_name": "zzxyz", "link": "https://stackoverflow.com/users/8413636/zzxyz"}, "edited": false, "score": 0, "creation_date": 1518070484, "post_id": 48672152, "comment_id": 84354839, "body": "@zzxyz: Sorry I didn&#39;t get.  Is it a compliment or opposite ? :P"}, {"owner": {"reputation": 2784, "user_id": 8413636, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d8c46d1ea221e93d32a1b3d2ee354cae?s=128&d=identicon&r=PG&f=1", "display_name": "zzxyz", "link": "https://stackoverflow.com/users/8413636/zzxyz"}, "edited": false, "score": 0, "creation_date": 1518112879, "post_id": 48672152, "comment_id": 84382125, "body": "a compliment :)  This is really slick."}], "tags": [], "owner": {"reputation": 2776, "user_id": 8300271, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/g0ORw.jpg?s=128&g=1", "display_name": "Rahul Verma", "link": "https://stackoverflow.com/users/8300271/rahul-verma"}, "is_accepted": false, "score": 1, "last_activity_date": 1518033518, "last_edit_date": 1518033518, "creation_date": 1518033061, "answer_id": 48672152, "question_id": 48670992, "link": "https://stackoverflow.com/questions/48670992/replace-multi-line-plain-text/48672152#48672152", "title": "Replace multi-line plain text", "body": "<pre><code>$ awk 'FNR==NR{a[$1]=$2; next} ($3\":\" in a){sub(/$/,\"\\n  description: \"a[$3\":\"])}1' list RS= ORS=\"\\n\\n\" file.yaml\n</code></pre>\n\n<p><code>FNR==NR{a[$1]=$2; next}</code> : While reading file <code>list</code>, create an associative array <code>a</code> with keys as <code>$1</code> and values as <code>$2</code>. Eg. <code>a[britney:]=teamblue</code></p>\n\n<p><code>($3\":\" in a){sub(/$/,\"\\n  description: \"a[$3\":\"])}1</code> : While reading file <code>file.yaml</code>, if <code>$3\":\"</code> is a key in <code>a</code> then append <code>description</code> in the record before printing.</p>\n\n<p><strong>Output</strong></p>\n\n<pre><code>- name: alan\n  age: 8\n\n- name: britney # some comment about britney\n  hobbies: [\"painting\", \"CS\"]\n  age: 21\n  description: teamblue\n\n- name: charles # some comment about charles\n                # that spans over multiple lines\n  age: 42\n  description: foobar\n</code></pre>\n"}], "owner": {"reputation": 665, "user_id": 1928660, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/rnpOq.png?s=128&g=1", "display_name": "ATN", "link": "https://stackoverflow.com/users/1928660/atn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 227, "favorite_count": 0, "answer_count": 2, "score": 3, "last_activity_date": 1518033518, "creation_date": 1518028491, "last_edit_date": 1518030248, "question_id": 48670992, "link": "https://stackoverflow.com/questions/48670992/replace-multi-line-plain-text", "title": "Replace multi-line plain text", "body": "<p>Assuming you have plenty of yaml files (or anything similar) and you want to add a description to all objects with a given name, e.g. </p>\n\n<pre><code>- name: alan\n  age: 8\n\n- name: britney # some comment about britney\n  hobbies: [\"painting\", \"CS\"]\n  age: 21\n\n- name: charles # some comment about charles\n                # that spans over multiple lines\n  age: 42\n</code></pre>\n\n<p>And I have a list of objects with names that require a description, e.g. </p>\n\n<pre><code>britney: teamblue\ncharles: foobar\n</code></pre>\n\n<p>How can I add a line with a description to reach the following:</p>\n\n<pre><code>- name: alan\n  age: 8\n\n- name: britney # some comment about britney\n  hobbies: [\"painting\", \"CS\"]\n  age: 21\n  description: teamblue\n\n- name: charles # some comment about charles\n                # that spans over multiple lines\n  age: 42\n  description: foobar\n</code></pre>\n\n<p>So far I go pretty close but I keep failing at replacing a multiline plain text with another:</p>\n\n<pre><code>s=$(awk \"/${name}/\" RS= ./*.yml)\nr=$(awk \"/${name}/\" RS= ./*.yml &amp;&amp; echo \"  description: ${desc}\")\n</code></pre>\n\n<p>I need to somehow look for <code>$s</code> and replace it with <code>$r</code> and I cannot make it work. I tried multiple variations of the following two:</p>\n\n<pre><code>sed \"s/$s/$r/\" ./*.yml\nperl -i -0pe \"s/$s/$r/\" ./*.yml\n</code></pre>\n\n<p>But somehow the special characters (newlines, double quotes, ...) in the yaml break them and I either get an error message like <code>unterminated substitute pattern</code> or the output is the same and nothing was matched.</p>\n\n<p>Also maybe relevant for <code>sed</code>, I'm using macOS.</p>\n"}, {"tags": ["android", "perl", "makefile"], "answers": [{"comments": [{"owner": {"reputation": 43, "user_id": 8549616, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bf21ddbc6470625ab4a62dd2742ee513?s=128&d=identicon&r=PG&f=1", "display_name": "LazyTitan", "link": "https://stackoverflow.com/users/8549616/lazytitan"}, "edited": false, "score": 0, "creation_date": 1518026221, "post_id": 48669777, "comment_id": 84338537, "body": "Could you please give an example as to how this would work? Is it as simple as adding a line that states:  perl script.pl  Or is there something more that needs to be added?"}], "tags": [], "owner": {"reputation": 57412, "user_id": 236465, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IoAkG.jpg?s=128&g=1", "display_name": "Diego Torres Milano", "link": "https://stackoverflow.com/users/236465/diego-torres-milano"}, "is_accepted": false, "score": 0, "last_activity_date": 1518024118, "creation_date": 1518024118, "answer_id": 48669777, "question_id": 48669680, "link": "https://stackoverflow.com/questions/48669680/is-it-possible-to-run-perl-scripts-from-android-mk/48669777#48669777", "title": "Is it possible to run perl scripts from Android.mk", "body": "<p>You can run <em>any command</em> from <code>make</code>, <code>perl</code> is just another one.</p>\n"}, {"tags": [], "owner": {"reputation": 3767, "user_id": 8710344, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e2292c452c0d0c9824d2aa38bb74d9fc?s=128&d=identicon&r=PG&f=1", "display_name": "HardcoreHenry", "link": "https://stackoverflow.com/users/8710344/hardcorehenry"}, "is_accepted": true, "score": 2, "last_activity_date": 1518030098, "last_edit_date": 1518030098, "creation_date": 1518029769, "answer_id": 48671325, "question_id": 48669680, "link": "https://stackoverflow.com/questions/48669680/is-it-possible-to-run-perl-scripts-from-android-mk/48671325#48671325", "title": "Is it possible to run perl scripts from Android.mk", "body": "<p>Did you want to run the perl command while building a specific target, or did you want to run the perl command when make is first run?</p>\n\n<pre><code>#some makefile\n\n# the following will run when the makefile is being read\n# regardless of what target(s) you're building.  The output\n# is stored in some_var\n# Note: if the perl program has side effects (generates a file, etc), then\n# this is not recommended practice.\nsome_var := $(shell perl someparams 1)\n\n# the following would be run if you run \"make some_target\", or\n# just \"make\" as it's the first and therefore the default target\nsome_target:\n     @echo building $@\n     perl someparams 2\n</code></pre>\n\n<p>Either way, you should likely read a primer on makefiles.</p>\n"}], "owner": {"reputation": 43, "user_id": 8549616, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bf21ddbc6470625ab4a62dd2742ee513?s=128&d=identicon&r=PG&f=1", "display_name": "LazyTitan", "link": "https://stackoverflow.com/users/8549616/lazytitan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 271, "favorite_count": 0, "accepted_answer_id": 48671325, "answer_count": 2, "score": 0, "last_activity_date": 1518030098, "creation_date": 1518023849, "last_edit_date": 1518024261, "question_id": 48669680, "link": "https://stackoverflow.com/questions/48669680/is-it-possible-to-run-perl-scripts-from-android-mk", "title": "Is it possible to run perl scripts from Android.mk", "body": "<p>I am simply wondering if it is possible to run a perl script from a make file for android! I am not familiar with how they make files work and ideally would like to add just a few lines to a make file to make this possible. If it is possible could you please show me how? And give examples! </p>\n"}, {"tags": ["bash", "perl", "user-input"], "comments": [{"owner": {"reputation": 5895, "user_id": 2834978, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05b09a797fd0c59d1627b30fb4cdba01?s=128&d=identicon&r=PG&f=1", "display_name": "Luis Mu&#241;oz", "link": "https://stackoverflow.com/users/2834978/luis-mu%c3%b1oz"}, "edited": false, "score": 0, "creation_date": 1518026242, "post_id": 48669657, "comment_id": 84338552, "body": "what happens is perl script is executed on command line. Does it return the prompt immediately?"}, {"owner": {"reputation": 5895, "user_id": 2834978, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05b09a797fd0c59d1627b30fb4cdba01?s=128&d=identicon&r=PG&f=1", "display_name": "Luis Mu&#241;oz", "link": "https://stackoverflow.com/users/2834978/luis-mu%c3%b1oz"}, "edited": false, "score": 0, "creation_date": 1518027152, "post_id": 48669657, "comment_id": 84339058, "body": "Print the value of $datei to make sure is what you want."}, {"owner": {"reputation": 932, "user_id": 2516892, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/a78c2843e4352a71a47af54c43ecaae1?s=128&d=identicon&r=PG", "display_name": "Qohelet", "link": "https://stackoverflow.com/users/2516892/qohelet"}, "reply_to_user": {"reputation": 5895, "user_id": 2834978, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05b09a797fd0c59d1627b30fb4cdba01?s=128&d=identicon&r=PG&f=1", "display_name": "Luis Mu&#241;oz", "link": "https://stackoverflow.com/users/2834978/luis-mu%c3%b1oz"}, "edited": false, "score": 0, "creation_date": 1518027314, "post_id": 48669657, "comment_id": 84339167, "body": "@LuisMu&#241;oz - if the script is executed on the command line it works as it&#39;s supposed to be (after executing various Perl-Scripts several times with the same command I decided to do some automation). Actually, the Bash-Script works - it just <i>jumps over</i> the input I want to give."}], "answers": [{"comments": [{"owner": {"reputation": 932, "user_id": 2516892, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/a78c2843e4352a71a47af54c43ecaae1?s=128&d=identicon&r=PG", "display_name": "Qohelet", "link": "https://stackoverflow.com/users/2516892/qohelet"}, "edited": false, "score": 0, "creation_date": 1518027985, "post_id": 48670419, "comment_id": 84339553, "body": "I had to re-write it a little, but basically just change the one line to <code>perl $zeile &lt;&#47;dev&#47;tty</code> . I don&#39;t want it to wait for every single input (sometimes no input is required at all). I see your knowledge of bash is bigger than mine, would you mind explaining also why you use the <code>-e</code> Parameter and export the line before instead of just using it directly? (Upvoted and Marked as answer already, but some explanation would be nice, thank you)"}, {"owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "reply_to_user": {"reputation": 932, "user_id": 2516892, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/a78c2843e4352a71a47af54c43ecaae1?s=128&d=identicon&r=PG", "display_name": "Qohelet", "link": "https://stackoverflow.com/users/2516892/qohelet"}, "edited": false, "score": 1, "creation_date": 1518028144, "post_id": 48670419, "comment_id": 84339622, "body": "The <code>-e</code> and the <code>export</code> probably aren&#39;t relevant to your specific problem. <code>-e</code> instructs perl to treat the next command line argument as perl code to execute rather than a file containing Perl code. <code>export</code> makes the bash variable <code>$line</code> available in the Perl process so I could output it."}], "tags": [], "owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "is_accepted": true, "score": 3, "last_activity_date": 1518026225, "creation_date": 1518026225, "answer_id": 48670419, "question_id": 48669657, "link": "https://stackoverflow.com/questions/48669657/force-bash-script-to-wait-for-a-perl-script-that-awaits-input/48670419#48670419", "title": "Force Bash-Script to wait for a Perl-Script that awaits input", "body": "<p>Have the perl script redirect input from <code>/dev/tty</code>.</p>\n\n<p>Proof of concept:</p>\n\n<pre><code>while read line ; do\n    export line\n    perl -e 'print \"Enter $ENV{line}: \";$y=&lt;STDIN&gt;;print \"$ENV{line} is $y\\n\"' &lt;/dev/tty\ndone &lt;&lt;EOF\nfoo\nbar\nEOF\n</code></pre>\n\n<p>Program output (user input in <strong>bold</strong>):</p>\n\n<p><code>\nEnter foo: <strong>123</strong>\nfoo is 123<br/>\nEnter bar: <strong>456</strong>\nbar is 456\n</code></p>\n"}, {"comments": [{"owner": {"reputation": 932, "user_id": 2516892, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/a78c2843e4352a71a47af54c43ecaae1?s=128&d=identicon&r=PG", "display_name": "Qohelet", "link": "https://stackoverflow.com/users/2516892/qohelet"}, "edited": false, "score": 0, "creation_date": 1518028479, "post_id": 48670868, "comment_id": 84339809, "body": "You were just 8 seconds too late I&#39;m afraid but I find your answer interesting and your links helpful (upvote!), yet I can&#39;t make your solution work :/ <code>bash: [[: &#47;: syntax error: operand expected (error token is &quot;&#47;&quot;) bash: 3: Bad file descriptor</code>"}, {"owner": {"reputation": 7132, "user_id": 9164010, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f96e7617c52bd68daa62f54a560d9b88?s=128&d=identicon&r=PG&f=1", "display_name": "ErikMD", "link": "https://stackoverflow.com/users/9164010/erikmd"}, "reply_to_user": {"reputation": 932, "user_id": 2516892, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/a78c2843e4352a71a47af54c43ecaae1?s=128&d=identicon&r=PG", "display_name": "Qohelet", "link": "https://stackoverflow.com/users/2516892/qohelet"}, "edited": false, "score": 1, "creation_date": 1518028998, "post_id": 48670868, "comment_id": 84340091, "body": "@Qohelet I cannot reproduce your error. Did you copy the script.bash file as is, and run <code>chmod a+x script.bash &amp;&amp; .&#47;script.bash</code> ? If yes, can you give more hints about your config (such as the OS and the shell)? Do you have the same error if you run <code>exec 3&gt;&amp;0</code> in your terminal?"}, {"owner": {"reputation": 7132, "user_id": 9164010, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f96e7617c52bd68daa62f54a560d9b88?s=128&d=identicon&r=PG&f=1", "display_name": "ErikMD", "link": "https://stackoverflow.com/users/9164010/erikmd"}, "reply_to_user": {"reputation": 932, "user_id": 2516892, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/a78c2843e4352a71a47af54c43ecaae1?s=128&d=identicon&r=PG", "display_name": "Qohelet", "link": "https://stackoverflow.com/users/2516892/qohelet"}, "edited": false, "score": 0, "creation_date": 1518031127, "post_id": 48670868, "comment_id": 84341314, "body": "You may also want to run <code>ls -l &#47;dev&#47;fd&#47;</code> in a terminal to get the list of opened file descriptors"}, {"owner": {"reputation": 932, "user_id": 2516892, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/a78c2843e4352a71a47af54c43ecaae1?s=128&d=identicon&r=PG", "display_name": "Qohelet", "link": "https://stackoverflow.com/users/2516892/qohelet"}, "edited": false, "score": 0, "creation_date": 1518082409, "post_id": 48670868, "comment_id": 84361086, "body": "Overlooked your <code>exec 3&gt;&amp;0</code> and didn&#39;t put it in my code :/ - your idea works perfectly fine."}], "tags": [], "owner": {"reputation": 7132, "user_id": 9164010, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f96e7617c52bd68daa62f54a560d9b88?s=128&d=identicon&r=PG&f=1", "display_name": "ErikMD", "link": "https://stackoverflow.com/users/9164010/erikmd"}, "is_accepted": false, "score": 3, "last_activity_date": 1534112229, "last_edit_date": 1534112229, "creation_date": 1518028009, "answer_id": 48670868, "question_id": 48669657, "link": "https://stackoverflow.com/questions/48669657/force-bash-script-to-wait-for-a-perl-script-that-awaits-input/48670868#48670868", "title": "Force Bash-Script to wait for a Perl-Script that awaits input", "body": "<p>@mob's answer is interesting, but I'd like to propose an alternative solution for your use case that will <strong>also work if your overall bash script is run with a specific input redirection</strong> (i.e. not <code>/dev/tty</code>).</p>\n\n<p>Minimal working example:</p>\n\n<ul>\n<li><p>script.perl</p>\n\n<pre><code>#!/usr/bin/env perl\nuse strict;\nuse warnings;\n{\n    local( $| ) = ( 1 );\n    print \"Press ENTER to continue: \";\n    my $resp = &lt;STDIN&gt;;\n}\nprint \"OK\\n\";\n</code></pre></li>\n<li><p>script.bash</p>\n\n<pre><code>#!/bin/bash\n\nexec 3&gt;&amp;0 # backup STDIN to fd 3\n\nwhile read line; do\n    echo \"$line\"\n    perl \"script.perl\" &lt;&amp;3 # redirect fd 3 to perl's input\ndone &lt;&lt;EOF\nFirst\nSecond\nEOF\n\nexec 3&gt;&amp;- # close fd 3\n</code></pre></li>\n</ul>\n\n<p>So this will work with both: <code>./script.bash</code> in a terminal and <code>yes | ./script.bash</code> for example...</p>\n\n<p>For more info on redirections, see e.g. <a href=\"https://www.refining-linux.org/archives/30-23-File-descriptors.html\" rel=\"nofollow noreferrer\">this article</a> or <a href=\"http://www.catonmat.net/download/bash-redirections-cheat-sheet.pdf\" rel=\"nofollow noreferrer\">this cheat sheet</a>.</p>\n\n<p>Hoping this helps</p>\n"}], "owner": {"reputation": 932, "user_id": 2516892, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/a78c2843e4352a71a47af54c43ecaae1?s=128&d=identicon&r=PG", "display_name": "Qohelet", "link": "https://stackoverflow.com/users/2516892/qohelet"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 256, "favorite_count": 0, "accepted_answer_id": 48670419, "answer_count": 2, "score": 2, "last_activity_date": 1534112229, "creation_date": 1518023790, "question_id": 48669657, "link": "https://stackoverflow.com/questions/48669657/force-bash-script-to-wait-for-a-perl-script-that-awaits-input", "title": "Force Bash-Script to wait for a Perl-Script that awaits input", "body": "<p>I'm having a Bash-Script that sequentially runs some Perl-Scripts which are read from a file. These scripts require the press of Enter to continue.</p>\n\n<p>Strangely when I run the script it's never waiting for the input but just continues. I assume something in the Bash-Script is interpreted as an Enter or some other Key-Press and makes the Perl continue.</p>\n\n<p>I'm sure there is a solution out there but don't really know what to look for.</p>\n\n<p>My Bash has this while-Loop which iterates through the list of Perl-Scripts (which is listed in <code>seqfile</code>) </p>\n\n<pre><code>while read zeile; do\n    if [[ ${datei:0:1} -ne 'p' ]]; then\n        datei=${zeile:8}\n    else\n        datei=$zeile\n    fi\n    case ${zeile: -3} in\n    \".pl\")\n    perl  $datei  #Here it just goes on...\n    #echo \"Test 1\"\n    #echo \"Test 2\"\n    ;;\n    \".pm\")\n        echo $datei \"is a Perl Module\" \n    ;;\n    *)\n        echo \"Something elso\"\n    ;;\n    esac\ndone &lt;&lt;&lt; $seqfile;\n</code></pre>\n\n<p>You notice the two commented lines With <code>echo \"Test 1/2\"</code>. I wanted to know how they are displayed.\nActually they are written under each other like there was an Enter-Press:</p>\n\n<pre><code>Test 1\nTest 2\n</code></pre>\n\n<p>The output of the Perl-Scripts is correct I just have to figure out a way how to force the input to be read from the user and not from the script.</p>\n"}, {"tags": ["html", "css", "perl", "cgi.pm"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1518019664, "post_id": 48668263, "comment_id": 84334315, "body": "Check your web server&#39;s error log."}, {"owner": {"reputation": 793701, "user_id": 19068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d2d3229ed1961d2bd81853242493247?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/19068/quentin"}, "edited": false, "score": 2, "creation_date": 1518019810, "post_id": 48668263, "comment_id": 84334420, "body": "<b>Warning</b>: <a href=\"https://metacpan.org/pod/distribution/CGI/lib/CGI.pod#HTML-Generation-functions-should-no-longer-be-used\" rel=\"nofollow noreferrer\">Read the documentation for the CGI module</a>: * All HTML generation functions within CGI.pm are no longer being maintained. Any issues, bugs, or patches will be rejected unless they relate to fundamentally broken page rendering.* (Keep reading for further explanation and alternatives)."}, {"owner": {"reputation": 793701, "user_id": 19068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d2d3229ed1961d2bd81853242493247?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/19068/quentin"}, "edited": false, "score": 2, "creation_date": 1518019857, "post_id": 48668263, "comment_id": 84334445, "body": "<b>Warning</b>: <a href=\"https://metacpan.org/pod/distribution/CGI/lib/CGI.pod#CGI.pm-HAS-BEEN-REMOVED-FROM-THE-PERL-CORE\" rel=\"nofollow noreferrer\">Read other bits of the documentation for the CGI module</a>: <i>CGI.pm is no longer considered good practice for developing web applications, including quick prototyping and small web scripts. There are far better, cleaner, quicker, easier, safer, more scalable, more extensible, more modern alternatives available at this point in time. These will be documented with <a href=\"https://metacpan.org/pod/CGI::Alternatives\" rel=\"nofollow noreferrer\">CGI::Alternatives</a>.</i>"}, {"owner": {"reputation": 11, "user_id": 9310041, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-kPgGuzHdwbk/AAAAAAAAAAI/AAAAAAAADAY/aDzgyf2BjuU/photo.jpg?sz=128", "display_name": "Rishab Kamboj", "link": "https://stackoverflow.com/users/9310041/rishab-kamboj"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1518020927, "post_id": 48668263, "comment_id": 84335181, "body": "@simbabque Failed to load resource: the server responded with a status of 500 (Internal Server Error)"}, {"owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "edited": false, "score": 0, "creation_date": 1518022493, "post_id": 48668263, "comment_id": 84336260, "body": "Why do you have <code>use CGI...</code> twice?"}, {"owner": {"reputation": 11, "user_id": 9310041, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-kPgGuzHdwbk/AAAAAAAAAAI/AAAAAAAADAY/aDzgyf2BjuU/photo.jpg?sz=128", "display_name": "Rishab Kamboj", "link": "https://stackoverflow.com/users/9310041/rishab-kamboj"}, "reply_to_user": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "edited": false, "score": 0, "creation_date": 1518023028, "post_id": 48668263, "comment_id": 84336624, "body": "@ChrisTurner even if i use it once.. doesn&#39;t make any difference"}, {"owner": {"reputation": 41846, "user_id": 926143, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/3396173c3d22988be1a0732d184902aa?s=128&d=identicon&r=PG", "display_name": "7stud", "link": "https://stackoverflow.com/users/926143/7stud"}, "edited": false, "score": 0, "creation_date": 1518024223, "post_id": 48668263, "comment_id": 84337356, "body": "<i>it&#39;s showing internal server error</i> -- Did you give execute privileges to your perl script file?"}, {"owner": {"reputation": 11, "user_id": 9310041, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-kPgGuzHdwbk/AAAAAAAAAAI/AAAAAAAADAY/aDzgyf2BjuU/photo.jpg?sz=128", "display_name": "Rishab Kamboj", "link": "https://stackoverflow.com/users/9310041/rishab-kamboj"}, "reply_to_user": {"reputation": 41846, "user_id": 926143, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/3396173c3d22988be1a0732d184902aa?s=128&d=identicon&r=PG", "display_name": "7stud", "link": "https://stackoverflow.com/users/926143/7stud"}, "edited": false, "score": 0, "creation_date": 1518025945, "post_id": 48668263, "comment_id": 84338362, "body": "@7stud the file is running without the head part..."}, {"owner": {"reputation": 41846, "user_id": 926143, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/3396173c3d22988be1a0732d184902aa?s=128&d=identicon&r=PG", "display_name": "7stud", "link": "https://stackoverflow.com/users/926143/7stud"}, "edited": false, "score": 0, "creation_date": 1518031228, "post_id": 48668263, "comment_id": 84341371, "body": "@RishabKamboj, Yes, I figured that out."}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 9310041, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-kPgGuzHdwbk/AAAAAAAAAAI/AAAAAAAADAY/aDzgyf2BjuU/photo.jpg?sz=128", "display_name": "Rishab Kamboj", "link": "https://stackoverflow.com/users/9310041/rishab-kamboj"}, "edited": false, "score": 0, "creation_date": 1518020485, "post_id": 48668328, "comment_id": 84334878, "body": "my cgi file is in cgi-bin and i moved my css file outside and gave full correct path for css file.... still the same error is there."}], "tags": [], "owner": {"reputation": 793701, "user_id": 19068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d2d3229ed1961d2bd81853242493247?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/19068/quentin"}, "is_accepted": false, "score": 0, "last_activity_date": 1518019738, "creation_date": 1518019738, "answer_id": 48668328, "question_id": 48668263, "link": "https://stackoverflow.com/questions/48668263/add-css-for-cgi-pm-file/48668328#48668328", "title": "Add css for cgi.pm file", "body": "<p>CGI programs are typically placed in a <code>cgi-bin</code> directory which is configured so the web server treats <em>everything</em> in it as a CGI compliant executable. Your CSS file is not an executable CGI program!</p>\n\n<p>Move your static files <strong>outside</strong> <code>cgi-bin</code> and change the URLs you use to reference them to point to their new URLs.</p>\n"}, {"tags": [], "owner": {"reputation": 41846, "user_id": 926143, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/3396173c3d22988be1a0732d184902aa?s=128&d=identicon&r=PG", "display_name": "7stud", "link": "https://stackoverflow.com/users/926143/7stud"}, "is_accepted": false, "score": 1, "last_activity_date": 1518192460, "last_edit_date": 1518192460, "creation_date": 1518024296, "answer_id": 48669843, "question_id": 48668263, "link": "https://stackoverflow.com/questions/48668263/add-css-for-cgi-pm-file/48669843#48669843", "title": "Add css for cgi.pm file", "body": "<p>You should understand how <code>print</code> (or any other function works):  </p>\n\n<p>1) Here's an example:</p>\n\n<pre><code>use strict;\nuse warnings; \nuse 5.020;\nuse autodie;\nuse Data::Dumper;\nuse DBI;\n\nsub do_stuff {\n    print \"xxx\\n\";\n}\n\nprint \"goodbye\\n\", do_stuff, \"\\n\";\n</code></pre>\n\n<p>What do you think perl will output first?  The string \"goodbye\\n\" or the string \"xxx\"?  In other words, is that print statement equivalent to:</p>\n\n<pre><code>print \"goodbye\\n\";\nprint dostuff;\nprint \"\\n\";\n</code></pre>\n\n<p>???</p>\n\n<p>2) Here's another example:</p>\n\n<pre><code>print \"hello\", die(\"Too tired too print anything else...\");\n</code></pre>\n\n<p>What do you think the output will be? <code>die()</code> causes your program to terminate immediately and output the specified message before quitting.</p>\n\n<p><code>The rule</code> is: a function's arguments must be fully determined before the function itself will execute. Therefore, in your perl script when you wrote:</p>\n\n<pre><code>print $q-&gt;header,\n</code></pre>\n\n<p>...that was correct because you have to output the response header first.  But then there's that trailing comma. You continued your print statement with:</p>\n\n<pre><code>print $q-&gt;header, $q-&gt;start_html(), print $q-&gt;div() \n</code></pre>\n\n<p>That statement is equivalent to:</p>\n\n<pre><code>print(\n    $q-&gt;header,\n    $q-&gt;start_html(),\n    print($q-&gt;div)\n)\n</code></pre>\n\n<p>Okay, applying the rule: the outer <code>print()</code> won't execute until each of the three arguments are determined.  Therefore, perl executes <code>$q-&gt;header</code>, which returns a string.  And rule #2 is: all function calls in your code are replaced by the function's return value.  That gives you:</p>\n\n<pre><code>print(\n    \"some http response info,\n    $q-&gt;start_html()\n    print($q-&gt;div)\n)\n</code></pre>\n\n<p>Next, perl executes <code>$q-&gt;html</code>, which also returns a string, giving you:</p>\n\n<pre><code>print(\n    \"some http response info\",\n    \"&lt;html&gt; blah blah\",\n    print($q-&gt;div)\n)\n</code></pre>\n\n<p>Finally, the third argument is evaluated, <code>print($q-&gt;div)</code>. The third argument is equivalent to <code>print(\"&lt;div&gt;...\")</code>, giving you:</p>\n\n<pre><code>print(\n    \"some html response stuff\",\n    \"&lt;html&gt; blah blah\",\n    print(\"&lt;div...\")\n)\n</code></pre>\n\n<p>As my first two examples at the beginning of my answer demonstrate, the inner print() will execute before the outer print is able to print the first two arguments.  Therefore, you end up NOT outputting the header first, hence your error.  <code>print(\"&lt;div...\")</code> actually returns 1 after outputting the string, so you end up with:</p>\n\n<pre><code>print(\n    \"some html response stuff\",\n    \"&lt;html&gt; blah blah\",\n    1\n)\n</code></pre>\n\n<p>And now the outer print can finally execute.  </p>\n\n<p>I'm using Apache for my server, and your perl script is located here:</p>\n\n<pre><code>apache2/cgi-bin/perl2.pl \n</code></pre>\n\n<p>A url to retrieve the output of the script:</p>\n\n<pre><code>http://localhost:8080/cgi-bin/perl2.pl\n</code></pre>\n\n<p>I put a css file here:</p>\n\n<pre><code>apache2/cgi-bin/htdocs/css/my.css\n</code></pre>\n\n<p>Normally, I can retrieve html pages in htdocs without specifying the htdocs directory, so:</p>\n\n<pre><code>http://localhost:8080/page.html\n</code></pre>\n\n<p>As a result, the path from the cgi-bin directory to a file in the htdocs directory is simpy:</p>\n\n<pre><code>../css/my.css  (rather than ../htdocs/css/my.css)\n</code></pre>\n\n<p>Here's your code with all the changes needed to access the css file:</p>\n\n<pre><code>use strict;\nuse warnings;\nuse CGI qw(:all); \nuse CGI::Carp qw(fatalsToBrowser);\n\nmy $q = new CGI;\n\nprint(\n\n    $q-&gt;header,\n\n    $q-&gt;start_html(\n        -title =&gt; 'Input Request',\n        -style=&gt;{-src=&gt;\"../css/my.css\"}    #&lt;==THIS CREATES A LINK TAG           \n    ),\n\n    $q-&gt;div(\n        {-id=&gt;\"divtop\"},\n        $q-&gt;p(\"Here's a paragraph\")\n    ),\n\n    $q-&gt;start_form(\n        -method=&gt;'post'\n    ),\n\n    $q-&gt;div(\"OperatingSystem\"),\n    $q-&gt;div(\n        $q-&gt;radio_group(\n            -name=&gt;'ostype',\n            -values=&gt;['Windows','Linux']\n        )\n    ),\n\n    $q-&gt;end_form,\n    $q-&gt;end_html\n);\n</code></pre>\n\n<p>Here's the html that the perl script creates(spacing adjusted by me):</p>\n\n<pre><code>&lt;!DOCTYPE html\n    PUBLIC \"-//W3C//DTD XHTML 1.0 Transitional//EN\"\n     \"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd\"&gt;\n&lt;html xmlns=\"http://www.w3.org/1999/xhtml\" lang=\"en-US\" xml:lang=\"en-US\"&gt;\n\n&lt;head&gt;\n  &lt;title&gt;Input Request&lt;/title&gt;\n  &lt;link rel=\"stylesheet\" type=\"text/css\" href=\"../css/my.css\" /&gt;\n  &lt;meta http-equiv=\"Content-Type\" content=\"text/html; charset=iso-8859-1\" /&gt;\n&lt;/head&gt;\n\n&lt;body&gt;\n\n&lt;div id=\"divtop\"&gt;&lt;p&gt;Here's a paragraph&lt;/p&gt;&lt;/div&gt;\n\n&lt;form method=\"post\" action=\"/cgi-bin/perl2.pl\" enctype=\"multipart/form-data\"&gt;\n  &lt;div&gt;OperatingSystem&lt;/div&gt;\n  &lt;div&gt;\n    &lt;label&gt;&lt;input type=\"radio\" name=\"ostype\" value=\"Windows\" checked=\"checked\" /&gt;Windows&lt;/label&gt; \n    &lt;label&gt;&lt;input type=\"radio\" name=\"ostype\" value=\"Linux\" /&gt;Linux&lt;/label&gt;\n  &lt;/div&gt;\n\n&lt;div&gt;&lt;input type=\"hidden\" name=\".cgifields\" value=\"ostype\"  /&gt;&lt;/div&gt;\n&lt;/form&gt;\n\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n\n<p>Note that you get the head tag for free.  I assume that's because the title and link tags are supposed to be inside a head tag in well formatted html.</p>\n\n<p>And, here it is using <code>Link()</code>:</p>\n\n<pre><code>print(\n\n    $q-&gt;header,\n\n    $q-&gt;start_html(\n        -title =&gt; 'Input Request',\n        -head  =&gt; Link({\n                   -rel    =&gt; 'stylesheet',\n                   -type   =&gt; 'text/css',\n                   -href   =&gt; '../css/my.css'\n                  })    \n    ),\n\n    $q-&gt;div(\n        {-id=&gt;\"divtop\"},\n        $q-&gt;p(\"Here's a paragraph\")\n    ),\n\n    $q-&gt;start_form(\n        -method=&gt;'post'\n    ),\n\n    $q-&gt;div(\"OperatingSystem\"),\n    $q-&gt;div(\n        $q-&gt;radio_group(\n            -name=&gt;'ostype',\n            -values=&gt;['Windows','Linux']\n        )\n    ),\n\n    $q-&gt;end_form(),\n\n    $q-&gt;br(),\n    $q-&gt;end_html()\n\n);\n</code></pre>\n\n<p>If I add <code>media  =&gt; 'print</code> to the <code>Link()</code> hash, which adds the attribute <code>media=\"print\"</code> to the link tag, the css is disabled in my browser.  On the other hand, when I do a Print Preview of the page in my browser, I do see the css styling.  I think that's the expected behavior.  Here's the html:</p>\n\n<pre><code>&lt;!DOCTYPE html\n    PUBLIC \"-//W3C//DTD XHTML 1.0 Transitional//EN\"\n     \"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd\"&gt;\n&lt;html xmlns=\"http://www.w3.org/1999/xhtml\" lang=\"en-US\" xml:lang=\"en-US\"&gt;\n\n&lt;head&gt;\n&lt;title&gt;Input Request&lt;/title&gt;\n&lt;link type=\"text/css\" rel=\"stylesheet\" href=\"../css/my.css\" /&gt;\n&lt;meta http-equiv=\"Content-Type\" content=\"text/html; charset=iso-8859-1\" /&gt;\n&lt;/head&gt;\n\n&lt;body&gt;\n&lt;div id=\"divtop\"&gt;&lt;p&gt;Here's a paragraph&lt;/p&gt;&lt;/div&gt;&lt;form method=\"post\" action=\"/cgi-bin/perl2.pl\" enctype=\"multipart/form-data\"&gt;&lt;div&gt;OperatingSystem&lt;/div&gt;&lt;div&gt;&lt;label&gt;&lt;input type=\"radio\" name=\"ostype\" value=\"Windows\" checked=\"checked\" /&gt;Windows&lt;/label&gt; &lt;label&gt;&lt;input type=\"radio\" name=\"ostype\" value=\"Linux\" /&gt;Linux&lt;/label&gt;&lt;/div&gt;&lt;div&gt;&lt;input type=\"hidden\" name=\".cgifields\" value=\"ostype\"  /&gt;&lt;/div&gt;&lt;/form&gt;&lt;br /&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "is_accepted": false, "score": 3, "last_activity_date": 1518025849, "creation_date": 1518025849, "answer_id": 48670327, "question_id": 48668263, "link": "https://stackoverflow.com/questions/48668263/add-css-for-cgi-pm-file/48670327#48670327", "title": "Add css for cgi.pm file", "body": "<p>Having ran your code the problem is quite obvious. This is the first line it outputs...</p>\n\n<pre><code>&lt;div id=\"divtop\"&gt;&lt;p&gt;Here's a paragraph&lt;/p&gt;&lt;/div&gt;Content-Type: text/html; charset=ISO-8859-1\n</code></pre>\n\n<p>The \"Content-Type:\" header should be the <strong>absolutely</strong> first thing that comes out of your CGI script. Anything else and your webserver won't know what to do with the output.</p>\n\n<p>It looks like you've got confused between semicolons and commas in your code</p>\n\n<pre><code>print $q-&gt;header,\n\n$q-&gt;start_html\n({\n  -title=&gt;'Input Request',\n  -head=&gt;Link({-rel =&gt; 'stylesheet', \n                        -media  =&gt; 'print',\n                        -type   =&gt; 'text/css',\n                        -href   =&gt; 'style.css'}), \n\n}),\n\nprint $q-&gt;div(\n              {-id=&gt;\"divtop\"},\n              $q-&gt;p(\"Here's a paragraph\")\n             );\n</code></pre>\n\n<p>Linking those 3 statements with commas means that the code <code>print</code>ing the <code>&lt;div&gt;</code> happens and the return value is added to the list of things being printed by the first <code>print</code>.</p>\n\n<p>Tidying things up, your code should look like this. The header line comes first and is just a single statement by itself.</p>\n\n<pre><code>print $q-&gt;header;\n</code></pre>\n\n<p>I don't really have any idea what that mess of CGI HTML code is meant to look like, so I'm not going to attempt to try and fix it, although I think it should be just one long comma separated statement. You should really look at something better like the Template Toolkit. Even just printing out raw HTML would be easier to read IMO in comparison.</p>\n\n<p>Also, just to cover all the bases the first line of your script appears to have a space at the front - that will also cause problems if it actually exists and isn't just a copy'n'paste error.</p>\n\n<pre><code> #!\"c:\\xampp\\perl\\bin\\perl.exe\"\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 9310041, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-kPgGuzHdwbk/AAAAAAAAAAI/AAAAAAAADAY/aDzgyf2BjuU/photo.jpg?sz=128", "display_name": "Rishab Kamboj", "link": "https://stackoverflow.com/users/9310041/rishab-kamboj"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 659, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1518192460, "creation_date": 1518019544, "question_id": 48668263, "link": "https://stackoverflow.com/questions/48668263/add-css-for-cgi-pm-file", "title": "Add css for cgi.pm file", "body": "<p>I have written this code in cgi file for html but it's showing internal server error in xampp server. When I compiled it in command line it's just displaying 'no debug' as result. What is it that i am doing wrong? The code is working fine without css part being included but as soon as I add the link part it stops working.</p>\n\n<pre><code> #!\"c:\\xampp\\perl\\bin\\perl.exe\"\nuse strict;\nuse warnings;\nuse CGI qw(:all); \nuse CGI::Carp qw(fatalsToBrowser);\n#use CGI ('div');\nuse CGI qw/Link/;\n\nmy $q = new CGI;\n\nprint $q-&gt;header,\n\n$q-&gt;start_html\n({\n  -title=&gt;'Input Request',\n  -head=&gt;Link({-rel =&gt; 'stylesheet', \n                        -media  =&gt; 'print',\n                        -type   =&gt; 'text/css',\n                        -href   =&gt; 'style.css'}), \n\n}),\n\nprint $q-&gt;div(\n              {-id=&gt;\"divtop\"},\n              $q-&gt;p(\"Here's a paragraph\")\n             );\n$q-&gt;start_form\n(\n    -method=&gt;'post',\n    ), \"\\n\",\n\n    \"Operating System\",\n\n    $q-&gt;radio_group\n    (\n    -name=&gt;'ostype',\n    -values=&gt;['Windows','Linux'],\n    ),\n    $q-&gt;br, \"\\n\",\n$q-&gt;end_html;\n</code></pre>\n"}, {"tags": ["apache", "perl"], "answers": [{"tags": [], "owner": {"reputation": 3984, "user_id": 1801086, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ef4c0400ffff14d5e1c16ca3856c09ba?s=128&d=identicon&r=PG", "display_name": "tjd", "link": "https://stackoverflow.com/users/1801086/tjd"}, "is_accepted": false, "score": 2, "last_activity_date": 1518019120, "last_edit_date": 1518019120, "creation_date": 1518018432, "answer_id": 48667873, "question_id": 48665156, "link": "https://stackoverflow.com/questions/48665156/cannot-load-mod-perl-so-into-server-after-migrating-from-apache-2-2-to-2-4/48667873#48667873", "title": "Cannot load mod_perl.so into server after migrating from apache 2.2 to 2.4", "body": "<p>mod_perl needs binary compatibility with both the current versions of Apache <em>and</em> Perl.  If you have upgraded <em>either</em> then you need to upgrade / recompile mod_perl itself.</p>\n\n<hr>\n\n<p>Of course going forward, you may want to consider a less fragile FCGI configuration.  Writing to a PSGI / Plack standard may help smooth any future change in this direction.</p>\n\n<p>Extended discussion of the relative values of mod_perl / FCGI <a href=\"https://stackoverflow.com/questions/31009297/is-mod-perl-what-im-looking-for-fastcgi-psgi-plack/31010803#31010803\">here</a>.</p>\n"}], "owner": {"reputation": 25, "user_id": 8676958, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c12288cb764229e44155d2516b9f458?s=128&d=identicon&r=PG&f=1", "display_name": "user1443543", "link": "https://stackoverflow.com/users/8676958/user1443543"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 899, "favorite_count": 0, "answer_count": 1, "score": -3, "last_activity_date": 1518019120, "creation_date": 1518010351, "question_id": 48665156, "link": "https://stackoverflow.com/questions/48665156/cannot-load-mod-perl-so-into-server-after-migrating-from-apache-2-2-to-2-4", "title": "Cannot load mod_perl.so into server after migrating from apache 2.2 to 2.4", "body": "<p>After migrating from apache 2.2 to 2.4 can't load perl module </p>\n\n<pre><code>apache2: Syntax error on line 211 of /etc/apache2/apache2.conf: Syntax \nerror on line 1 of /etc/apache2/mods-enabled/perl.load: Cannot load \n/usr/lib/apache2/modules/mod_perl.so into server: \n/usr/lib/apache2/modules/mod_perl.so: undefined symbol: ap_log_rerror\n</code></pre>\n\n<p>Apache is compiled on ubuntu 12.04. libapache2-mod-perl2-2.0.5-5ubuntu1 is installled on the system. </p>\n"}, {"tags": ["perl", "datetime"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 4, "creation_date": 1517956901, "post_id": 48653036, "comment_id": 84304378, "body": "And what is your question?"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1517956992, "post_id": 48653036, "comment_id": 84304405, "body": "You will have to <i>parse</i> the string with a module that supports <i>date math</i>, then <i>add the interval</i> and <i>convert the date back to a string in the same format</i>. You should be able to find solutions for all of those steps with a little help of Google or the Stack Overflow search. :)"}, {"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 1, "creation_date": 1517976022, "post_id": 48653036, "comment_id": 84309418, "body": "what timezone do you want to add the hours in?"}, {"owner": {"reputation": 3432, "user_id": 604642, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/48daad611ba387f8473b0c1e5792aa3f?s=128&d=identicon&r=PG", "display_name": "shawnhcorey", "link": "https://stackoverflow.com/users/604642/shawnhcorey"}, "edited": false, "score": 0, "creation_date": 1518010499, "post_id": 48653036, "comment_id": 84327705, "body": "Do you want to add 48 hours or 2 days? Not every day has 24 hours in it."}], "answers": [{"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1518108692, "post_id": 48653180, "comment_id": 84379532, "body": "No, my comment was accurate. Your original code added 2 days. I have fixed your answer so that it adds 48 hours."}], "tags": [], "owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "is_accepted": true, "score": 3, "last_activity_date": 1517961951, "last_edit_date": 1517961951, "creation_date": 1517957016, "answer_id": 48653180, "question_id": 48653036, "link": "https://stackoverflow.com/questions/48653036/using-perl-to-add-48-hours-to-a-specific-date/48653180#48653180", "title": "Using perl to add 48 hours to a specific date", "body": "<pre><code>use strict;\nuse warnings;\n\nuse Time::Piece;\nuse Time::Seconds;\n\nmy $str = '2018-02-05 12:00:00';\nmy $format = '%Y-%m-%d %H:%M:%S';\nmy $tp = localtime-&gt;strptime($str, $format);\n$tp += ONE_HOUR * 48;\n\nprint $tp-&gt;strftime($format);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 3, "last_activity_date": 1517960317, "last_edit_date": 1517960317, "creation_date": 1517959350, "answer_id": 48653568, "question_id": 48653036, "link": "https://stackoverflow.com/questions/48653036/using-perl-to-add-48-hours-to-a-specific-date/48653568#48653568", "title": "Using perl to add 48 hours to a specific date", "body": "<p>To add 48 hours using DateTime,</p>\n\n<pre><code># In America/New_York,\n# 2018-02-05 12:00:00 \u21d2 2018-02-07 12:00:00\n# 2018-11-03 12:00:00 \u21d2 2018-11-05 11:00:00\n$dt-&gt;add( hours =&gt; 48 );\n</code></pre>\n\n<p>To add 2 days using DateTime,</p>\n\n<pre><code># In America/New_York,\n# 2018-02-05 12:00:00 \u21d2 2018-02-07 12:00:00\n# 2018-11-03 12:00:00 \u21d2 2018-11-05 12:00:00\n$dt-&gt;add( days =&gt; 2 );\n</code></pre>\n\n<hr>\n\n<p>How to parse and format:</p>\n\n<pre><code>use DateTime::Format::Strptime qw( );\n\nmy $format = DateTime::Format::Strptime-&gt;new(\n   pattern   =&gt; '%Y-%m-%d %H:%M:%S',\n   time_zone =&gt; 'local',\n   on_error  =&gt; 'croak',\n);\n\nmy $dt = $format-&gt;parse_datetime('2018-02-05 12:00:00');\n$dt-&gt;set_formatter($format);  # Automatically format correctly on stringification.\n\n...\n\nsay $dt;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": -1, "last_activity_date": 1518108544, "last_edit_date": 1518108544, "creation_date": 1517961445, "answer_id": 48653864, "question_id": 48653036, "link": "https://stackoverflow.com/questions/48653036/using-perl-to-add-48-hours-to-a-specific-date/48653864#48653864", "title": "Using perl to add 48 hours to a specific date", "body": "<p>To add 48 hours using Time::Piece,</p>\n\n<pre><code># In America/New_York,\n# 2018-02-05 12:00:00 \u21d2 2018-02-07 12:00:00\n# 2018-11-03 12:00:00 \u21d2 2018-11-05 11:00:00\n\nmy $tp = localtime-&gt;strptime($timestamp, $format);\n$tp += ONE_HOUR * 48;  # Or:  $tp += ONE_DAY * 2;\nsay $tp-&gt;strftime($format);\n</code></pre>\n\n<p>To add 2 days using Time::Piece,</p>\n\n<pre><code># In America/New_York,\n# 2018-02-05 12:00:00 \u21d2 2018-02-07 12:00:00\n# 2018-11-03 12:00:00 \u21d2 2018-11-05 12:00:00\n\nmy $tp = Time::Piece-&gt;strptime($timestamp, $format);  # Pretend the dt is UTC even if local!\n$tp += ONE_DAY * 2;  # Or:  $tp += ONE_HOUR * 48;\nsay $tp-&gt;strftime($format);\n</code></pre>\n\n<p><strong>Important</strong></p>\n\n<p>There is no difference between <code>ONE_DAY * 2</code> and <code>ONE_HOUR * 48</code>.</p>\n\n<pre><code>$ perl -MTime::Seconds -e'CORE::say( ONE_DAY * 2 )'\n172800\n\n$ perl -MTime::Seconds -e'CORE::say( ONE_HOUR * 48 )'\n172800\n</code></pre>\n\n<p>Yet, 2 days is not the same thing as 48 hours. That's why we have to pretend the date-time is a UTC date-time (even when it's not) when adding days. Dealing with mixed amounts (such as 1 day and 1 hour) is impossible.</p>\n\n<p>Personally, I avoid this very error-prone module.</p>\n\n<hr>\n\n<p>Common bits:</p>\n\n<pre><code>use feature qw( say );\n\nuse Time::Piece   qw( localtime );\nuse Time::Seconds qw( ONE_DAY ONE_HOUR );\n\nmy $format = '%Y-%m-%d %H:%M:%S';\n\n...\n</code></pre>\n"}], "owner": {"reputation": 789, "user_id": 3586305, "user_type": "registered", "accept_rate": 23, "profile_image": "https://www.gravatar.com/avatar/464ee72c175d2c8cbb8488ec020ef5b8?s=128&d=identicon&r=PG&f=1", "display_name": "jms1980", "link": "https://stackoverflow.com/users/3586305/jms1980"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1445, "favorite_count": 0, "accepted_answer_id": 48653180, "answer_count": 3, "score": 0, "last_activity_date": 1518108544, "creation_date": 1517956208, "question_id": 48653036, "link": "https://stackoverflow.com/questions/48653036/using-perl-to-add-48-hours-to-a-specific-date", "title": "Using perl to add 48 hours to a specific date", "body": "<p>I have a date in the format YYYY-MM-DD hh:mm:ss and I want to add 48 hours to this date.  For instance I have the date 2018-02-05 12:00:00 and I want to add 48 hours to this date to get the date 48 hours from 2018-02-05 12:00:00 in the same format YYYY-MM-DD hh:mm:ss?</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 847, "user_id": 7514026, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/baca10c436cbd0cbdd232619d163cf19?s=128&d=identicon&r=PG&f=1", "display_name": "daveg", "link": "https://stackoverflow.com/users/7514026/daveg"}, "edited": false, "score": 0, "creation_date": 1517954589, "post_id": 48652592, "comment_id": 84303457, "body": "Oh, forgot to say, default interpreter is c-shell"}, {"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 2, "creation_date": 1517955111, "post_id": 48652592, "comment_id": 84303674, "body": "I&#39;m not familiar with csh, but my guess would be that <code>set</code> only sets environment variables for the current shell, and not for sub-shells. You&#39;re obviously setting <code>BBB</code> in a different way than you&#39;ve shown here, or else your example wouldn&#39;t work."}, {"owner": {"reputation": 847, "user_id": 7514026, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/baca10c436cbd0cbdd232619d163cf19?s=128&d=identicon&r=PG&f=1", "display_name": "daveg", "link": "https://stackoverflow.com/users/7514026/daveg"}, "reply_to_user": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 0, "creation_date": 1517957238, "post_id": 48652592, "comment_id": 84304492, "body": "Yes, I &#39;setenv BBB&quot;.  edited/fixed.  Thanks. (I should have cut/paste)"}, {"owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 2, "creation_date": 1517957418, "post_id": 48652592, "comment_id": 84304557, "body": "Regular ole shell variables are not inherited by their child processes."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1517962984, "post_id": 48652592, "comment_id": 84306236, "body": "What do you expect from <code>perl -e&#39;$AAA=&quot;Avalue&quot;; $ENV{BBB}=&quot;Bvalue&quot;; system(&quot;script.pl&quot;);</code>? As you should be realizing now, your request makes no sense."}], "answers": [{"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 1, "last_activity_date": 1517969050, "creation_date": 1517969050, "answer_id": 48654855, "question_id": 48652592, "link": "https://stackoverflow.com/questions/48652592/cant-access-shell-variable-in-perl-script-unless-its-an-environment-variable/48654855#48654855", "title": "Can&#39;t access shell variable in perl script unless it&#39;s an environment variable", "body": "<p>A process doesn't have access to another process's memory, much less its variables. If you want your Perl script to have a value, you will need to pass the value to it somehow (e.g. via its environment).</p>\n"}, {"comments": [{"owner": {"reputation": 847, "user_id": 7514026, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/baca10c436cbd0cbdd232619d163cf19?s=128&d=identicon&r=PG&f=1", "display_name": "daveg", "link": "https://stackoverflow.com/users/7514026/daveg"}, "edited": false, "score": 0, "creation_date": 1518018699, "post_id": 48661640, "comment_id": 84333654, "body": "So it&#39;s a scoping thing. Fortunately, the perl script is being called by a sourced shell script, so I should be able to set the variables I need as environment variables, then run the perl. Thanks."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1518041641, "post_id": 48661640, "comment_id": 84346761, "body": "Re &quot;<i>So it&#39;s a scoping thing</i>&quot;, No, not really. They are different. It&#39;s like <code>my $x;</code> vs <code>$ENV{x}</code> in Perl."}], "tags": [], "owner": {"reputation": 285, "user_id": 2319672, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ff1340a932140322d41db199c6cf1a4?s=128&d=identicon&r=PG", "display_name": "Dev123", "link": "https://stackoverflow.com/users/2319672/dev123"}, "is_accepted": false, "score": 3, "last_activity_date": 1517999804, "creation_date": 1517999804, "answer_id": 48661640, "question_id": 48652592, "link": "https://stackoverflow.com/questions/48652592/cant-access-shell-variable-in-perl-script-unless-its-an-environment-variable/48661640#48661640", "title": "Can&#39;t access shell variable in perl script unless it&#39;s an environment variable", "body": "<p>You are not getting the value of AAA variable because AAA is local env variable where as BBB is exported variable.</p>\n\n<p>Exported variables are carried into the environment of processes started by the shell that exported them, while non-exported variables are local to the current process only.</p>\n\n<p>Example:</p>\n\n<pre><code>$ set AAA=123\n$ csh\n$ echo $AAA\nAAA: Undefined variable.\n$ exit\n\n$ setenv BBB 456\n$ csh\n$ echo $BBB\n456\n</code></pre>\n"}], "owner": {"reputation": 847, "user_id": 7514026, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/baca10c436cbd0cbdd232619d163cf19?s=128&d=identicon&r=PG&f=1", "display_name": "daveg", "link": "https://stackoverflow.com/users/7514026/daveg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 443, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1517999804, "creation_date": 1517953999, "last_edit_date": 1517957180, "question_id": 48652592, "link": "https://stackoverflow.com/questions/48652592/cant-access-shell-variable-in-perl-script-unless-its-an-environment-variable", "title": "Can&#39;t access shell variable in perl script unless it&#39;s an environment variable", "body": "<p>I need to access the value of a shell variable in a perl script.  I can get it if it's an environment variable but not a regular ole shell variable.  Consider</p>\n\n<pre><code>% set AAA=Avalue\n% setenv BBB=Bvalue\n% echo $AAA\nAvalue\n% echo $BBB\nBvalue\n</code></pre>\n\n<p>So far, so good.  Now, here's a perl script to read them...</p>\n\n<pre><code>#!/usr/bin/env perl\nuse strict;\n\nprint \"AAA: \".$ENV{AAA}.\"\\n\";\nprint \"BBB: \".$ENV{BBB}.\"\\n\";\n\nexit;\n</code></pre>\n\n<p>When I run it, I get...</p>\n\n<pre><code>AAA:\nBBB: Bvalue\n</code></pre>\n\n<p>How can I get the value of AAA from inside the perl script ?</p>\n\n<p>Thanks in Advance</p>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 9168, "user_id": 1921273, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LREX2.png?s=128&g=1", "display_name": "MrSmith42", "link": "https://stackoverflow.com/users/1921273/mrsmith42"}, "edited": false, "score": 4, "creation_date": 1517944458, "post_id": 48650237, "comment_id": 84298308, "body": "Adding an example input and desired output would make your question clearer."}, {"owner": {"reputation": 1672, "user_id": 4355253, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ee8cbfecfb7686f370b07eea52273c5?s=128&d=identicon&r=PG&f=1", "display_name": "Javier Elices", "link": "https://stackoverflow.com/users/4355253/javier-elices"}, "edited": false, "score": 1, "creation_date": 1517947267, "post_id": 48650237, "comment_id": 84299852, "body": "@hEr0, given the variety of answers, it is quite clear that you need to provide input and expected output. I edited your question thinking that I was getting what you wanted, but I am no longer sure about that..."}, {"owner": {"reputation": 377, "user_id": 6583638, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1zobe.jpg?s=128&g=1", "display_name": "Flying_whale", "link": "https://stackoverflow.com/users/6583638/flying-whale"}, "edited": false, "score": 1, "creation_date": 1517952097, "post_id": 48650237, "comment_id": 84302310, "body": "Wait wait wait, did you create another account after being told to modify your post? Because the same question has been asked like 2 hours before yours"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1517986579, "post_id": 48650237, "comment_id": 84312939, "body": "Is this also your question? <a href=\"https://stackoverflow.com/questions/48647834/using-split-function-in-perl-but-keeping-the-delimiters\">Using Split function in Perl but keeping the delimiters &#91;on hold&#93;</a> Please don&#39;t do that."}], "answers": [{"tags": [], "owner": {"reputation": 1672, "user_id": 4355253, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ee8cbfecfb7686f370b07eea52273c5?s=128&d=identicon&r=PG&f=1", "display_name": "Javier Elices", "link": "https://stackoverflow.com/users/4355253/javier-elices"}, "is_accepted": false, "score": 0, "last_activity_date": 1517944922, "last_edit_date": 1517944922, "creation_date": 1517944587, "answer_id": 48650361, "question_id": 48650237, "link": "https://stackoverflow.com/questions/48650237/using-perl-split-function-to-keep-capture-some-delimiters-and-discard-others/48650361#48650361", "title": "Using Perl split function to keep (capture) some delimiters and discard others", "body": "<p>I think that what you want is as simple as:</p>\n\n<pre><code>split /\\s*;\\s*/, $fooString;\n</code></pre>\n\n<p>That will separate around the <code>;</code> character that may or may not have any whitespace before or after.</p>\n\n<p>In your example:</p>\n\n<pre><code>&gt;This foo file has+ a bunch of; (random) things all over \"the\" place&lt;\n</code></pre>\n\n<p>It would split into:</p>\n\n<pre><code>&gt;This foo file has+ a bunch of&lt;\n</code></pre>\n\n<p>and:</p>\n\n<pre><code>&gt;(random) things all over \"the\" place&lt;\n</code></pre>\n\n<p>By the way, you need to put the result of <code>split</code> into an array; for instance:</p>\n\n<pre><code>my @parts = split /\\s*;\\s*/, $fooString;\n</code></pre>\n\n<p>Then <code>$parts[0]</code> and <code>$parts[1]</code> would have the two bits.</p>\n"}, {"comments": [{"owner": {"reputation": 9, "user_id": 9323840, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56efc6bc21b18adae7e9f9f17b1bcd79?s=128&d=identicon&r=PG&f=1", "display_name": "hEr0", "link": "https://stackoverflow.com/users/9323840/her0"}, "edited": false, "score": 0, "creation_date": 1517947142, "post_id": 48650691, "comment_id": 84299773, "body": "Thank you very much. you sir are a scholar and a gentleman. perfect."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 9, "user_id": 9323840, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56efc6bc21b18adae7e9f9f17b1bcd79?s=128&d=identicon&r=PG&f=1", "display_name": "hEr0", "link": "https://stackoverflow.com/users/9323840/her0"}, "edited": false, "score": 0, "creation_date": 1517957303, "post_id": 48650691, "comment_id": 84304512, "body": "FYI to the reader: In spite of my best effort I have no idea what the -1 is for."}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": false, "score": 5, "last_activity_date": 1521861976, "last_edit_date": 1521861976, "creation_date": 1517945965, "answer_id": 48650691, "question_id": 48650237, "link": "https://stackoverflow.com/questions/48650237/using-perl-split-function-to-keep-capture-some-delimiters-and-discard-others/48650691#48650691", "title": "Using Perl split function to keep (capture) some delimiters and discard others", "body": "<p>You seem to ask for something like</p>\n\n<pre><code>my @fields_and_delim = split /\\s+|(;)/, $string;  # not quite right\n</code></pre>\n\n<p>but this isn't quite what it may seem. It also returns empty elements (with warnings) since when <code>\\s+</code> matches then the <code>()</code> captures nothing but <code>$1</code> is still returned as asked, and it's <code>undef</code>. There are yet more spurious matches when your delimiters come together in the string. </p>\n\n<p>So filter</p>\n\n<pre><code>my @fields_and_delim = grep { defined and /\\S/ } split /(\\s+|;)/, $string;\n</code></pre>\n\n<p>in which case you can normally capture the delimiter.</p>\n\n<hr>\n\n<p>This can also be done with a regex</p>\n\n<pre><code>my @fields_and_delim = $string =~ /([^\\s;]+|;+)/g;\n</code></pre>\n\n<p>which in this case allows more control over what and how you pick from the string.</p>\n\n<p>If repeated <code>;</code> need be captured separately change <code>;+</code> to <code>;</code> </p>\n"}, {"tags": [], "owner": {"reputation": 2177, "user_id": 5324657, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/t1fGJ.png?s=128&g=1", "display_name": "Jeremy Jones", "link": "https://stackoverflow.com/users/5324657/jeremy-jones"}, "is_accepted": false, "score": 0, "last_activity_date": 1517947120, "creation_date": 1517947120, "answer_id": 48650974, "question_id": 48650237, "link": "https://stackoverflow.com/questions/48650237/using-perl-split-function-to-keep-capture-some-delimiters-and-discard-others/48650974#48650974", "title": "Using Perl split function to keep (capture) some delimiters and discard others", "body": "<p>I think <code>grep</code> is what you're looking for really, to filter the list for values that aren't all whitespace:</p>\n\n<pre><code>my @all_exc_ws = grep {!/^\\s+$/} split(/([\\s\\;])/, $fooString);\n</code></pre>\n\n<p>Also I removed the <code>+</code> from your regex since it was inside the <code>[]</code>, which changes its meaning.</p>\n"}], "owner": {"reputation": 9, "user_id": 9323840, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56efc6bc21b18adae7e9f9f17b1bcd79?s=128&d=identicon&r=PG&f=1", "display_name": "hEr0", "link": "https://stackoverflow.com/users/9323840/her0"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 104, "favorite_count": 1, "answer_count": 3, "score": -1, "last_activity_date": 1576036320, "creation_date": 1517944133, "last_edit_date": 1576036320, "question_id": 48650237, "link": "https://stackoverflow.com/questions/48650237/using-perl-split-function-to-keep-capture-some-delimiters-and-discard-others", "title": "Using Perl split function to keep (capture) some delimiters and discard others", "body": "<p>Let's say I am using Perl's split function to split up the contents of a file.</p>\n\n<p>For example:</p>\n\n<pre>\nThis foo file has+ a bunch of; (random) things all over \"the\" place\n</pre>\n\n<p>So let's say I want to use whitespace and the semicolons a delimiters. </p>\n\n<p>So I would use something like:</p>\n\n<pre><code>split(/([\\s+\\;])/, $fooString)\n</code></pre>\n\n<p>I'm having trouble figuring out a syntax (or even if it exists) to capture the semicolon and discard the whitespace.</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 3, "creation_date": 1517935499, "post_id": 48647834, "comment_id": 84293336, "body": "That&#39;s one ugly regex, and probably overkill. Bracketing the regex to tell it to capture <i>does</i> work, but without some sample data (and desired result) it&#39;s really hard to tell for sure."}], "answers": [{"tags": [], "owner": {"reputation": 25491, "user_id": 49197, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/15ebf24a33a29b9efbf9924f530dd736?s=128&d=identicon&r=PG", "display_name": "Hynek -Pichi- Vychodil", "link": "https://stackoverflow.com/users/49197/hynek-pichi-vychodil"}, "is_accepted": false, "score": 1, "last_activity_date": 1517936641, "creation_date": 1517936641, "answer_id": 48648259, "question_id": 48647834, "link": "https://stackoverflow.com/questions/48647834/using-split-function-in-perl-but-keeping-the-delimiters/48648259#48648259", "title": "Using Split function in Perl but keeping the delimiters", "body": "<p>You are right, brackets keep delimiter but your regexp is broken. State clearly what do you want to achieve and then you may be could get a solution.</p>\n\n<blockquote>\n  <p>If the PATTERN contains capturing groups, then for each separator,\n  an additional field is produced for each substring captured by a\n  group (in the order in which the groups are specified, as per\n  backreferences); if any group does not match, then it captures the\n  \"undef\" value instead of a substring. Also, note that any such\n  additional field is produced whenever there is a separator (that\n  is, whenever a split occurs), and such an additional field does\n  not count towards the LIMIT. Consider the following expressions\n  evaluated in list context (each returned list is provided in the\n  associated comment):</p>\n\n<pre><code>            split(/-|,/, \"1-10,20\", 3)\n            # ('1', '10', '20')\n\n            split(/(-|,)/, \"1-10,20\", 3)\n            # ('1', '-', '10', ',', '20')\n\n            split(/-|(,)/, \"1-10,20\", 3)\n            # ('1', undef, '10', ',', '20')\n\n            split(/(-)|,/, \"1-10,20\", 3)\n            # ('1', '-', '10', undef, '20')\n\n            split(/(-)|(,)/, \"1-10,20\", 3)\n            # ('1', '-', undef, '10', undef, ',', '20')\n</code></pre>\n</blockquote>\n\n<pre><code>$ perl \nmy @filearray = split(/[(' ') (\\n) ([-+*=])] ([/]) ([(]) ([)]) ([;])/, $filestring);\nInvalid [] range \"[-+\" in regex; marked by &lt;-- HERE in m/[(' ') (\\n) ([-+ &lt;-- HERE *=])] ([/ at - line 1.\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 121105, "user_id": 2766176, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/edd8638efe875601bfe394a8aea5b16d?s=128&d=identicon&r=PG", "display_name": "brian d foy", "link": "https://stackoverflow.com/users/2766176/brian-d-foy"}, "is_accepted": false, "score": 4, "last_activity_date": 1517938060, "creation_date": 1517938060, "answer_id": 48648671, "question_id": 48647834, "link": "https://stackoverflow.com/questions/48647834/using-split-function-in-perl-but-keeping-the-delimiters/48648671#48648671", "title": "Using Split function in Perl but keeping the delimiters", "body": "<p>I think the problem is your pattern. First, I think you've unintentionally created a character class. Stuff in <code>[ ]</code> make a list of possible characters to match: </p>\n\n<pre><code> [(' ') (\\n) ([-+*=])]\n</code></pre>\n\n<p>I don't know what you are trying to match so I don't know how to fix that for you.</p>\n\n<p>After that I think you are working two hard:</p>\n\n<pre><code>([/]) ([(]) ([)]) ([;])\n</code></pre>\n\n<p>I think you are trying to split on any of those characters but you make character classes for each character. You must escape the opening paren because it would otherwise start a subcapture. I think you want an alternation. A vertical bar, <code>|</code>, separates the possibilities:</p>\n\n<pre><code>/|\\(|)|;\n</code></pre>\n\n<p>To capture them you can surround the whole thing with parentheses. Anything captured in parentheses will be part of the output list of <code>split</code>:</p>\n\n<pre><code>(/|\\(|)|;)\n</code></pre>\n\n<p>This looks a bit ugly. You can use the <code>/x</code> modifier (<code>split /.../x, ...</code>) to make literal whitespace insignificant so you can spread out the pattern to make it easier to read:</p>\n\n<pre><code>( / | \\( | ) | ; )\n</code></pre>\n\n<p>Perhaps someone can be of more help if you show some sample data.</p>\n"}], "owner": {"reputation": 5, "user_id": 9323181, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5868a520d5717df21cbc83952de13275?s=128&d=identicon&r=PG&f=1", "display_name": "Tank", "link": "https://stackoverflow.com/users/9323181/tank"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 206, "favorite_count": 0, "closed_date": 1517946773, "answer_count": 2, "score": -3, "last_activity_date": 1517942567, "creation_date": 1517935154, "last_edit_date": 1517942567, "question_id": 48647834, "link": "https://stackoverflow.com/questions/48647834/using-split-function-in-perl-but-keeping-the-delimiters", "closed_reason": "Not suitable for this site", "title": "Using Split function in Perl but keeping the delimiters", "body": "<p>I have a file that I am reading into a string\nmy split function then reads the values into the array</p>\n\n<pre><code>my @filearray = split(/[(' ') (\\n) ([-+*=])] ([/]) ([(]) ([)]) ([;])/, $filestring);\n</code></pre>\n\n<p>however, the issue I am having is that the split is NOT keeping the delimiter. One site suggested putting the delimiters in () which would tell Perl to keep em\nThat doesn't work however.</p>\n\n<p>Edit: I want to split on new line and spaces.  I also want to split on -,+,*,/,(,),; as well.  My idea was that the above code would work but is actually removing all the delimiters entirely.\n~Thanks</p>\n"}, {"tags": ["perl", "dbi"], "comments": [{"owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "edited": false, "score": 1, "creation_date": 1517926485, "post_id": 48644813, "comment_id": 84286881, "body": "Best to say exactly what you&#39;re planning on doing because (for example), DBD::SQlite already comes with the ability to log statements, so there&#39;s no reason to intercept queries. IIRC it&#39;s something like <code>$dbh-&gt;sqlite_trace=1;</code>"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1517928208, "post_id": 48644813, "comment_id": 84288219, "body": "<code>DBI</code> does some strange things with packages. I would much prefer to see simple wrappers for the operations that you need to hook into, rather than attempting to override inherited methods."}, {"owner": {"reputation": 89, "user_id": 6181762, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/a27f4cae1760d8f3e582b7dbe6481134?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Dwojc", "link": "https://stackoverflow.com/users/6181762/andrew-dwojc"}, "reply_to_user": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "edited": false, "score": 0, "creation_date": 1517939502, "post_id": 48644813, "comment_id": 84295716, "body": "@ChrisTurner - I need to dump some data in a structured way (queries, execution times, some information about program state)."}], "answers": [{"comments": [{"owner": {"reputation": 89, "user_id": 6181762, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/a27f4cae1760d8f3e582b7dbe6481134?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Dwojc", "link": "https://stackoverflow.com/users/6181762/andrew-dwojc"}, "edited": false, "score": 0, "creation_date": 1517929625, "post_id": 48645309, "comment_id": 84289303, "body": "I know about <code>DBI_TRACE</code> but parsing the log is not really an option. I want to dump some structured data such as the query string, execution time, perl call stack, and some information about the program state."}], "tags": [], "owner": {"reputation": 5099, "user_id": 406224, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9bc79fa6fa58e2a4f5e6c2f803cabc48?s=128&d=identicon&r=PG", "display_name": "oalders", "link": "https://stackoverflow.com/users/406224/oalders"}, "is_accepted": false, "score": 2, "last_activity_date": 1517927241, "creation_date": 1517927241, "answer_id": 48645309, "question_id": 48644813, "link": "https://stackoverflow.com/questions/48644813/how-to-intercept-queries-in-a-subclassed-dbi/48645309#48645309", "title": "How to intercept queries in a subclassed DBI?", "body": "<p>If all you want to do is log queries, you don't need to intercept anything.  Try setting the <code>DBI_TRACE</code> environment variable.</p>\n\n<pre><code>DBI_TRACE=1=dbitrace.log\n</code></pre>\n\n<p>where the <code>1</code> is the log level and the second argument is a path to your log file.  See <a href=\"https://metacpan.org/pod/DBI#DBI_TRACE\" rel=\"nofollow noreferrer\">https://metacpan.org/pod/DBI#DBI_TRACE</a> and <a href=\"https://metacpan.org/pod/DBI#TRACING\" rel=\"nofollow noreferrer\">https://metacpan.org/pod/DBI#TRACING</a></p>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 3, "last_activity_date": 1518106583, "last_edit_date": 1518106583, "creation_date": 1517946189, "answer_id": 48650738, "question_id": 48644813, "link": "https://stackoverflow.com/questions/48644813/how-to-intercept-queries-in-a-subclassed-dbi/48650738#48650738", "title": "How to intercept queries in a subclassed DBI?", "body": "<p>While the documentation describes certain methods in terms of other methods, the documentation doesn't claim these method call those other methods.</p>\n\n<p>Each driver provides their own implementation of many of the DBI methods (e.g. <code>selectrow_array</code>) through the use of a template provided by DBI. Written in C, the implementation of the methods in the template frequently call the driver's functions directly rather than calling them indirectly through DBI method calls.</p>\n\n<p>This makes the calls faster, but as you've discovered, it makes it harder to extend DBI.</p>\n\n<p>You can find a Perl implementation of all the methods you listed inside of <code>DBI.pm</code>. Copy these. These implementations are all defined in terms of the following methods, limiting what you have to change:</p>\n\n<ul>\n<li><code>prepare</code></li>\n<li><code>execute</code></li>\n<li><code>fetch</code></li>\n<li><code>fetchrow_hashref</code></li>\n<li><code>fetchrow_arrayref</code></li>\n<li><code>bind_col</code></li>\n</ul>\n"}], "owner": {"reputation": 89, "user_id": 6181762, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/a27f4cae1760d8f3e582b7dbe6481134?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Dwojc", "link": "https://stackoverflow.com/users/6181762/andrew-dwojc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 72, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1518106583, "creation_date": 1517925575, "last_edit_date": 1517939370, "question_id": 48644813, "link": "https://stackoverflow.com/questions/48644813/how-to-intercept-queries-in-a-subclassed-dbi", "title": "How to intercept queries in a subclassed DBI?", "body": "<p>I need to intercept all queries (in order to, say, do some structered logging).\nThe app already uses a sub-classed DBI so I was hoping I could just inject the code I need in to the <code>execute</code> overload in <code>MyDB::st</code> class.</p>\n\n<p>Apparently, this is not sufficient.</p>\n\n<p>In the example below, <code>MyDB::st::execute</code> executes only in example 2). It does not execute in 1) where I call <code>do</code> nor in 3) where I call <code>selectrow_array</code> (even though the documentation says <code>selectrow_array</code> combines <code>prepare</code>, <code>execute</code>, and <code>fetchrow_hashref</code>).</p>\n\n<p>Do I need to overload statements in <code>MyDB::db</code> class as well? There is quite a few (<code>do</code>, <code>selectrow_array</code>, <code>selectrow_arrayref</code>, <code>selectrow_hashref</code>, <code>selectall_arrayref</code>, <code>selectall_array</code>, <code>selectall_hashref</code>, <code>selectcol_arrayref</code>, etc.) I was hoping I could avoid that.</p>\n\n<p>The example uses SQLite for simplicity but other drivers I checked worked the same.</p>\n\n<pre><code>#!/usr/bin/perl\n\npackage MyDB;\nuse strict;\nuse warnings;\nuse base 'DBI';\n\nsub connect {\n    return DBI::connect( 'MyDB', 'dbi:SQLite:dbname=so.sqlite', '', '',);\n}\n\n\npackage MyDB::db;\nuse strict;\nuse warnings;\nuse base 'DBI::db';\n\nsub prepare {\n    my $self = shift;\n    warn \"  DB: PREPARE\\n\";\n    return $self-&gt;SUPER::prepare( @_ );\n}\n\n\npackage MyDB::st;\nuse strict;\nuse warnings;\nuse base 'DBI::st';\n\nsub execute {\n    my $self = shift;\n    warn \"  ST: EXECUTE\\n\";\n    return $self-&gt;SUPER::execute( @_ );\n}\n\nsub fetchrow_hashref {\n    my $self = shift;\n    warn \"  ST: FETCHROW_HASHREF\\n\";\n    return $self-&gt;SUPER::fetchrow_hashref( @_ );\n}\n\n\n\n\npackage main;\nuse strict;\nuse warnings;\n\nmy $dbh = MyDB::connect();\n\nwarn \"1) --- DO ---\\n\";\n$dbh-&gt;do(\"CREATE TABLE IF NOT EXISTS ttt (a int)\");\n\nwarn \"2) --- PREPARE/EXECUTE/FETCHROW_HASHREF ---\\n\";\nmy $sth = $dbh-&gt;prepare( \"SELECT * FROM ttt\" );\n$sth-&gt;execute();\n$sth-&gt;fetchrow_hashref();\n\nwarn \"3) --- SELECTROW_ARRAY ---\\n\";\n$dbh-&gt;selectrow_array( \"SELECT * FROM ttt\" );\n</code></pre>\n"}, {"tags": ["perl", "csv", "parsing", "hash"], "answers": [{"comments": [{"owner": {"reputation": 145, "user_id": 7541194, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/3EjPX.jpg?s=128&g=1", "display_name": "StayCalm", "link": "https://stackoverflow.com/users/7541194/staycalm"}, "edited": false, "score": 0, "creation_date": 1517930348, "post_id": 48645798, "comment_id": 84289802, "body": "It takes now the values from <code>output2.csv</code> and makes update (no changes). I need ipaddress from <code>output1.csv</code> to be change in device with <code>Test2 name</code>. <b>output2.csv:</b> <code>1234,Test1, 10.56.7.13  1235,Test2, 10.56.4.14</code>"}], "tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": false, "score": 2, "last_activity_date": 1517929498, "last_edit_date": 1517929498, "creation_date": 1517928843, "answer_id": 48645798, "question_id": 48644085, "link": "https://stackoverflow.com/questions/48644085/http-put-request-with-separate-values-in-csv/48645798#48645798", "title": "HTTP PUT Request with separate values in csv", "body": "<pre><code>my $id, $first{$name}, $second{$name} = split /,/; \n</code></pre>\n\n<p>Will generate:</p>\n\n<pre><code>Useless use of hash element in void context ....\n</code></pre>\n\n<p>Did you actually read your error messages when running your code? </p>\n\n<p>Should be:</p>\n\n<pre><code>( my $id, $first{$name}, $second{$name} ) = split /,/;\n</code></pre>\n"}], "owner": {"reputation": 145, "user_id": 7541194, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/3EjPX.jpg?s=128&g=1", "display_name": "StayCalm", "link": "https://stackoverflow.com/users/7541194/staycalm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 114, "favorite_count": 0, "closed_date": 1517948188, "answer_count": 1, "score": -2, "last_activity_date": 1526556584, "creation_date": 1517923294, "last_edit_date": 1526556584, "question_id": 48644085, "link": "https://stackoverflow.com/questions/48644085/http-put-request-with-separate-values-in-csv", "closed_reason": "Duplicate", "title": "HTTP PUT Request with separate values in csv", "body": "<p>I want to compare values <strong>separate</strong> in csv. In this code example I <strong>compare hashes</strong>, <a href=\"https://stackoverflow.com/questions/48629281/compare-values-in-csv-files\">Compare values in csv files</a> but for my PUT and POST request <strong>I need separate values</strong>.  </p>\n\n<p><strong>output1.csv</strong> (name, ip) - Primary system</p>\n\n<pre><code>Test1, 10.56.7.13\nTest2, 10.56.4.14\nTest3, 10.56.5.15\n</code></pre>\n\n<p><strong>output2.csv</strong> (id,name,ip) - Secondary system</p>\n\n<pre><code>1234,Test1, 10.56.7.13\n1235,Test2, 10.56.4.10\n</code></pre>\n\n<p>My result should be: </p>\n\n<ul>\n<li>do nothing with Test1 (because it is already in System 2)</li>\n<li>update Test2 (because now I have a different ip address)  </li>\n<li><p>add Test3, because I do not have it in the secondary System.</p>\n\n<pre><code> say \"UPDATE need be done for $second{$name}\";\n      #Now I want to make PUT (Update) request for these devices in secondary systen. \n\n\nopen ( my $input_1, '&lt;', 'output1.csv' ) or die $!;\nwhile ( &lt;$input_1&gt; ) {\n chomp;\n     my ($name_1, $ip_1) = split /,/;\n        my $xml = XML::Twig -&gt; new -&gt; parsefile ( 'template.xml' );\n            $xml -&gt;set_pretty_print('indented_a');\n\nopen ( my $input_2, '&lt;', 'output2.csv' ) or die $!;\nwhile ( &lt;$input_2&gt; ) {\n   chomp;\n\n      my ($id, $name, $ip) = split /,/;\n          $xml -&gt; root -&gt; set_att('name', $name);\n             $xml -&gt; get_xpath('//ipaddress',0) -&gt; set_text($ip_1);\n                my $uri=\"https://hostname:9060/ers/config/networkdevice/$id\";\n                my $req = HTTP::Request-&gt;new('PUT', $uri,[Accept=&gt;'application/vnd.com.cisco.ise.network.networkdevice.1.1+xml',\n                 Content_Type=&gt;'application/vnd.com.cisco.ise.network.networkdevice.1.1+xml; charset=utf-8'], $xml-&gt;sprint);\n\n                   $req-&gt;content($xml-&gt;sprint);\n                   $req-&gt;authorization_basic(\"user\", \"user\");\n\n  #Pass request to the user agent and get a response back\n   my $res = $ua-&gt;request($req);\n  #Check the outcome of the response\n  if ($res-&gt;is_success) {\n      print $res-&gt;status_line, \"\\n\";\n      } else {\n      print $res-&gt;status_line, \"\\n\";\n              }\n     }\n }\n</code></pre>\n\n<p>}</p></li>\n</ul>\n\n<p><strong>This prints:</strong></p>\n\n<pre><code>Match found TEST_1, 10.66.12.5\nUPDATE need be done for 10.66.10.4\n200 OK\n400 Bad Request\n400 Bad Request\n200 OK\n200 OK\n400 Bad Request\nDevices should be added: TEST_3\n</code></pre>\n\n<p>Actually I was waiting for:</p>\n\n<pre><code>Match found TEST_1, 10.66.12.5\nUPDATE need be done for 10.66.10.4\n200 OK\nDevices should be added: TEST_3\n</code></pre>\n\n<p>Because to do a <code>PUT request</code> with <code>1235,Test2,10.56.4.10</code>, <code>ipaddress</code> should be changed from <code>10.56.4.10</code>  to <code>10.56.4.14</code>. </p>\n\n<p>But I think my problem is, that I separate my values wrong.</p>\n"}, {"tags": ["perl", "command-line-interface"], "comments": [{"owner": {"reputation": 3269, "user_id": 93745, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8F5Wc.jpg?s=128&g=1", "display_name": "tinita", "link": "https://stackoverflow.com/users/93745/tinita"}, "edited": false, "score": 2, "creation_date": 1517914259, "post_id": 48639427, "comment_id": 84278896, "body": "I&#39;m not aware of Getopt::Long having this functionality. Not even Getopt::Long::Descriptive seems to offer it. Please add the name of the module you are using to your question, not only the function name."}, {"owner": {"reputation": 4005, "user_id": 3719089, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/cf5a351c1e20c4ee67ab5627f09380c7?s=128&d=identicon&r=PG&f=1", "display_name": "ayushgp", "link": "https://stackoverflow.com/users/3719089/ayushgp"}, "reply_to_user": {"reputation": 3269, "user_id": 93745, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8F5Wc.jpg?s=128&g=1", "display_name": "tinita", "link": "https://stackoverflow.com/users/93745/tinita"}, "edited": false, "score": 0, "creation_date": 1517915402, "post_id": 48639427, "comment_id": 84279646, "body": "@tinita I&#39;m using the <code>Getopt::Long</code> module."}, {"owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "reply_to_user": {"reputation": 3269, "user_id": 93745, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8F5Wc.jpg?s=128&g=1", "display_name": "tinita", "link": "https://stackoverflow.com/users/93745/tinita"}, "edited": false, "score": 6, "creation_date": 1517917505, "post_id": 48639427, "comment_id": 84281029, "body": "@tinita, I think <a href=\"https://metacpan.org/pod/Getopt::Long::Descriptive\" rel=\"nofollow noreferrer\"><code>Getopt::Long::Descriptive</code></a>&#39;s <code>one_of</code> thingy is what the OP is after."}, {"owner": {"reputation": 3432, "user_id": 604642, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/48daad611ba387f8473b0c1e5792aa3f?s=128&d=identicon&r=PG", "display_name": "shawnhcorey", "link": "https://stackoverflow.com/users/604642/shawnhcorey"}, "edited": false, "score": 0, "creation_date": 1517920764, "post_id": 48639427, "comment_id": 84283048, "body": "It would be nice to see some code. If something must be present, then it&#39;s not an option and should be a command-line argument."}, {"owner": {"reputation": 4005, "user_id": 3719089, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/cf5a351c1e20c4ee67ab5627f09380c7?s=128&d=identicon&r=PG&f=1", "display_name": "ayushgp", "link": "https://stackoverflow.com/users/3719089/ayushgp"}, "reply_to_user": {"reputation": 3432, "user_id": 604642, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/48daad611ba387f8473b0c1e5792aa3f?s=128&d=identicon&r=PG", "display_name": "shawnhcorey", "link": "https://stackoverflow.com/users/604642/shawnhcorey"}, "edited": false, "score": 0, "creation_date": 1517921561, "post_id": 48639427, "comment_id": 84283559, "body": "@shawnhcorey I&#39;ve updated my question."}, {"owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "edited": false, "score": 0, "creation_date": 1517922277, "post_id": 48639427, "comment_id": 84283997, "body": "Maybe make them both optional and then in your code see which ones are set and act accordingly?"}, {"owner": {"reputation": 4005, "user_id": 3719089, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/cf5a351c1e20c4ee67ab5627f09380c7?s=128&d=identicon&r=PG&f=1", "display_name": "ayushgp", "link": "https://stackoverflow.com/users/3719089/ayushgp"}, "edited": false, "score": 0, "creation_date": 1517922446, "post_id": 48639427, "comment_id": 84284104, "body": "That&#39;s the last resort. I was thinking if something is already there so that I dont have to rewrite it. Seems like <code>one_of</code> is the one."}], "answers": [{"comments": [{"owner": {"reputation": 3269, "user_id": 93745, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8F5Wc.jpg?s=128&g=1", "display_name": "tinita", "link": "https://stackoverflow.com/users/93745/tinita"}, "edited": false, "score": 1, "creation_date": 1517913926, "post_id": 48640140, "comment_id": 84278685, "body": "The <code>GetOptions</code> they are mentioning is part of <code>Getopt::Long</code>, so I assume they are already using it. although it would have been nice to mention the module name."}, {"owner": {"reputation": 12075, "user_id": 1137055, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/59d7b43b9eb7d01bd8f7e51febe6053c?s=128&d=identicon&r=PG", "display_name": "dgw", "link": "https://stackoverflow.com/users/1137055/dgw"}, "edited": false, "score": 2, "creation_date": 1517914579, "post_id": 48640140, "comment_id": 84279080, "body": "How do you configure <code>Getopt::Long</code> directly to make the options <code>foo</code> and <code>bar</code> mandatory but exclusive?"}], "tags": [], "owner": {"reputation": 13167, "user_id": 546205, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/5d7dd187ae1f4400664cbc0e66c8a2ce?s=128&d=identicon&r=PG", "display_name": "Miguel Prz", "link": "https://stackoverflow.com/users/546205/miguel-prz"}, "is_accepted": false, "score": -3, "last_activity_date": 1517911011, "creation_date": 1517911011, "answer_id": 48640140, "question_id": 48639427, "link": "https://stackoverflow.com/questions/48639427/how-to-ask-for-one-argument-out-of-two-using-getoptions/48640140#48640140", "title": "How to ask for one argument out of two using GetOptions?", "body": "<p>The CPAN module <a href=\"https://metacpan.org/pod/Getopt::Long\" rel=\"nofollow noreferrer\">Getopt::Long</a> gives you that functionality. It's very simple to use and you can build very powerful CLI applications.</p>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 7, "last_activity_date": 1518106286, "last_edit_date": 1518106286, "creation_date": 1517938824, "answer_id": 48648889, "question_id": 48639427, "link": "https://stackoverflow.com/questions/48639427/how-to-ask-for-one-argument-out-of-two-using-getoptions/48648889#48648889", "title": "How to ask for one argument out of two using GetOptions?", "body": "<p>Just check afterwards.</p>\n\n<pre><code>GetOptions(\n   \"help|h|?\" =&gt; \\&amp;help,\n   \"foo=s\"    =&gt; \\$opt_foo,\n   \"bar=s\"    =&gt; \\$opt_bar,\n)\n   or usage();\n\ndefined($opt_foo) || defined($opt_bar) )\n   or usage(\"Must specify --foo or --bar\");\n\n!( defined($opt_foo) &amp;&amp; defined($opt_bar) )\n   or usage(\"Can't specify both --foo and --bar\");\n\n@ARGV == 0\n   or usage(\"Too many arguments\");\n</code></pre>\n\n<hr>\n\n<p>Sample <code>usage</code>:</p>\n\n<pre><code>sub usage {\n   if ( my ($msg) = @_ ) {\n      chomp($msg);\n      warn(\"$msg\\n\");\n   }\n\n   my $prog = basename($0);\n   warn(\"Try `$prog --help' for more information.\\n\");\n   exit(1);\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 124, "user_id": 7203861, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/195e424f743cc19a615e17d26a87e5dc?s=128&d=identicon&r=PG&f=1", "display_name": "HRitter", "link": "https://stackoverflow.com/users/7203861/hritter"}, "edited": false, "score": 1, "creation_date": 1586373468, "post_id": 48725826, "comment_id": 108108221, "body": "The <code>or</code> operator ist missing in the 4th line. Thus, the appropriate line should be:        ) or die &quot;Bad options&quot;;"}, {"owner": {"reputation": 184, "user_id": 1089775, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ecdf8ff947d0ca2e9c12d6cc1f5cfe07?s=128&d=identicon&r=PG", "display_name": "Curtis Poe", "link": "https://stackoverflow.com/users/1089775/curtis-poe"}, "reply_to_user": {"reputation": 124, "user_id": 7203861, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/195e424f743cc19a615e17d26a87e5dc?s=128&d=identicon&r=PG&f=1", "display_name": "HRitter", "link": "https://stackoverflow.com/users/7203861/hritter"}, "edited": false, "score": 0, "creation_date": 1586874703, "post_id": 48725826, "comment_id": 108285040, "body": "Thank you, HRitter. Oops :) (and fixed)"}], "tags": [], "owner": {"reputation": 184, "user_id": 1089775, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ecdf8ff947d0ca2e9c12d6cc1f5cfe07?s=128&d=identicon&r=PG", "display_name": "Curtis Poe", "link": "https://stackoverflow.com/users/1089775/curtis-poe"}, "is_accepted": true, "score": 4, "last_activity_date": 1586874675, "last_edit_date": 1586874675, "creation_date": 1518298688, "answer_id": 48725826, "question_id": 48639427, "link": "https://stackoverflow.com/questions/48639427/how-to-ask-for-one-argument-out-of-two-using-getoptions/48725826#48725826", "title": "How to ask for one argument out of two using GetOptions?", "body": "<p>I find that this is a perfect time to be aware of the little-used <code>xor</code> (exclusive or) operator.</p>\n\n<pre><code>GetOptions(\n   \"foo=s\" =&gt; \\my $foo,\n   \"bar=s\" =&gt; \\my $bar,\n) or die \"Bad options\";\n\nunless ( defined $foo xor defined $bar ) {\n    die \"You must specify either --foo or --bar, but not both\";\n}\n</code></pre>\n"}], "owner": {"reputation": 4005, "user_id": 3719089, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/cf5a351c1e20c4ee67ab5627f09380c7?s=128&d=identicon&r=PG&f=1", "display_name": "ayushgp", "link": "https://stackoverflow.com/users/3719089/ayushgp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 361, "favorite_count": 1, "accepted_answer_id": 48725826, "answer_count": 3, "score": 3, "last_activity_date": 1586874675, "creation_date": 1517908844, "last_edit_date": 1517921545, "question_id": 48639427, "link": "https://stackoverflow.com/questions/48639427/how-to-ask-for-one-argument-out-of-two-using-getoptions", "title": "How to ask for one argument out of two using GetOptions?", "body": "<p>I am trying to create a CLI script in perl that accepts multiple CLI args. I'm parsing these arguments using the <code>GetOptions</code> function. I have 2 options <code>--foo</code> and <code>--bar</code> one of which exactly one has to be present with the corresponding value passed to it. </p>\n\n<p>Is there a way to handle this directly in GetOptions? or do I have to manually write the check for this?</p>\n\n<p>I'm using the <code>Getopt::Long</code> module.</p>\n\n<p><strong>EDIT:</strong> When I said:</p>\n\n<blockquote>\n  <p>I have 2 options <code>--foo</code> and <code>--bar</code> one of which exactly one has to be present with the corresponding value passed to it. </p>\n</blockquote>\n\n<p>I meant to say that these should be CLI arguments to be used as either:</p>\n\n<pre><code>$ perl my-cli-script.pl --foo somevalue\n$ #Or\n$ perl my-cli-script.pl --bar someothervalue\n</code></pre>\n\n<p>but not</p>\n\n<pre><code>$ perl my-cli-script.pl --foo somevalue --bar someothervalue\n$ #or\n$ perl my-cli-script.pl\n</code></pre>\n"}, {"tags": ["perl", "hash"], "answers": [{"comments": [{"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 2, "creation_date": 1517890746, "post_id": 48634090, "comment_id": 84267521, "body": "<code>$; = &quot;\\t&quot;;  ... $data{$term1, $term2} += $freq;</code> (but don&#39;t do that)"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 2, "creation_date": 1517892860, "post_id": 48634090, "comment_id": 84268042, "body": "Really really really don&#39;t do that. Why did you mention that?!"}, {"owner": {"reputation": 17619, "user_id": 7818749, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec4a72453e116debb802d55e88c2572e?s=128&d=identicon&r=PG&f=1", "display_name": "Gerhard", "link": "https://stackoverflow.com/users/7818749/gerhard"}, "reply_to_user": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 1, "creation_date": 1517921457, "post_id": 48634090, "comment_id": 84283505, "body": "@ysth Teaching something really dangerous, then teaching to not use it :D"}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 1, "last_activity_date": 1517880281, "creation_date": 1517880281, "answer_id": 48634090, "question_id": 48633968, "link": "https://stackoverflow.com/questions/48633968/manipulating-multi-dimensional-hash/48634090#48634090", "title": "Manipulating multi dimensional hash?", "body": "<pre><code>my %data;\nwhile (&lt;&gt;) {\n   chomp;\n   my ($term1, $term2, $freq) = split /\\t/;\n   if ($term1 eq \"Unknown\" || $term2 eq \"Unknown\") {\n      say;\n      next;\n   }\n\n   ($term1, $term2) = sort ($term1, $term2);\n   $data{\"$term1\\t$term2\"} += $freq;\n}\n\nsay \"$_\\t$data{$_}\" for keys %data;\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 9319425, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-idswhCl7snk/AAAAAAAAAAI/AAAAAAAAADw/yvW46t29U-w/photo.jpg?sz=128", "display_name": "nx_rt", "link": "https://stackoverflow.com/users/9319425/nx-rt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 76, "favorite_count": 0, "accepted_answer_id": 48634090, "answer_count": 1, "score": 0, "last_activity_date": 1517929139, "creation_date": 1517879334, "last_edit_date": 1517929139, "question_id": 48633968, "link": "https://stackoverflow.com/questions/48633968/manipulating-multi-dimensional-hash", "title": "Manipulating multi dimensional hash?", "body": "<hr>\n\n\n\n<p>I have a script that takes in various data and gives me the mean of each functional relationship in the data.</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>while ( &lt;IN&gt; ) {\n    chomp $_;\n\n    if ($_ =~ m/Source/ ) {\n        next;\n    }\n    else{\n\n        @arr = split(/\\t/, $_);\n\n        $freq  = $arr[2];\n        $term1 = $arr[4];\n        $term2 = $arr[11];\n\n        push ( @{ $hash{$term1}{$term2} }, $freq);\n    }\n}\n\n## Gathers sum of all arrays for each function\nforeach my $val ( keys %hash ) {\n\n    foreach my $val2 ( keys %{ $hash{$val} } ) {\n\n        my $count = sum (@{ $hash{$val}{$val2} });\n        $total += $count;\n    }\n}\n\n## calculates mean for each function\nforeach my $val ( keys %hash ) {\n\n    foreach my $val2 ( keys %{ $hash{$val} } ) {\n\n        my $count = sum (@{ $hash{$val}{$val2} });\n        my $avg   = $count/$total;\n\n        print \"$val\\t$val2\\t$avg\\n\";\n    }\n }\n</code></pre>\n\n<h3>Example output</h3>\n\n<pre class=\"lang-none prettyprint-override\"><code>GIY-YIG catalytic domain        Unknown 0.24\nEndonucelase VII        TEST    0.16\nTEST    Endonucelase VII        0.16\nUnknown GIY-YIG catalytic domain        0.12\nUnknown Unknown 0.32\n</code></pre>\n\n<p>But I need to combine any inverse function that isn't <code>Unknown</code>.</p>\n\n<h3>Desired output</h3>\n\n<pre class=\"lang-none prettyprint-override\"><code>GIY-YIG catalytic domain        Unknown 0.24  &lt;-stays the same\nEndonucelase VII        TEST    0.32          &lt;-changes\nUnknown GIY-YIG catalytic domain        0.12  &lt;--stays the same\nUnknown Unknown 0.32\n</code></pre>\n\n<p>Is there any easy way to do this?</p>\n"}, {"tags": ["perl", "activestate", "perlapp"], "comments": [{"owner": {"reputation": 2445, "user_id": 1707353, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/212f7b84a07bc7aea4f574669fe2465f?s=128&d=identicon&r=PG&f=1", "display_name": "Jeff Holt", "link": "https://stackoverflow.com/users/1707353/jeff-holt"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1517893918, "post_id": 48633121, "comment_id": 84268299, "body": "@ikegami No, I&#39;m not going to install perl when my app is copied onto the user&#39;s desktop. I have intentionally made the app NOT have an installer. The build process will put the local build machine&#39;s perl into the distribution at build time. The assumption, which I believe is correct, is that (1) perlapp eliminates the need to install perl, (2) perlapp simply bundles modules and the perl rutime, and (3) copying perl-static plus using perlapp --dependent is the same thing as perlapp --freestanding."}, {"owner": {"reputation": 2445, "user_id": 1707353, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/212f7b84a07bc7aea4f574669fe2465f?s=128&d=identicon&r=PG&f=1", "display_name": "Jeff Holt", "link": "https://stackoverflow.com/users/1707353/jeff-holt"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1517896289, "post_id": 48633121, "comment_id": 84269140, "body": "@ikegami That depends upon your definition of the word &quot;install&quot;. The words you chose led me to believe that you think that I&#39;ll be installing perl like one would if they were to download the perl source code and execute &quot;make install&quot;. I intend to do nothing of the sort."}, {"owner": {"reputation": 2445, "user_id": 1707353, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/212f7b84a07bc7aea4f574669fe2465f?s=128&d=identicon&r=PG&f=1", "display_name": "Jeff Holt", "link": "https://stackoverflow.com/users/1707353/jeff-holt"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1517896387, "post_id": 48633121, "comment_id": 84269169, "body": "@ikegami Your last comment makes no sense because my question is about how to distribute, say, 10 perlapp-wrapped executables but save space by distributing only one perl. I don&#39;t want to &quot;install&quot; one perl per executable. It&#39;s a horrible waste. Besides, a perlapp wrapped executable doesn&#39;t really install anything. Yes, it writes some files to /tmp (or /var/tmp) but it doesn&#39;t install anything. That&#39;s why it&#39;s commonly referred to as freestanding."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1517897307, "post_id": 48633121, "comment_id": 84269497, "body": "But according to the docs, it&#39;s not freestanding with <code>--dependent</code>. It requires an external <code>perl</code>. Which <code>perl</code> were you planning on using? I thought you were going to try to &quot;install&quot; one heavy pkg and 9 light pkgs, and have the 9 light pkgs use the <code>perl</code> in the heavy pkg. That would be a bad idea. Maybe I misunderstood?"}, {"owner": {"reputation": 2445, "user_id": 1707353, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/212f7b84a07bc7aea4f574669fe2465f?s=128&d=identicon&r=PG&f=1", "display_name": "Jeff Holt", "link": "https://stackoverflow.com/users/1707353/jeff-holt"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1518042342, "post_id": 48633121, "comment_id": 84347078, "body": "@ikegami I currently have 10 heavy packages and want the equivalent of 10 light packages plus on perl used by each of the 10. So far, the only idea I have is to use --dependent and distribute the perl for which perlapp would have bundled had it been given the --freestanding directive. But I am still concerned that --dependent would cause perlapp to bundle fewer (via some bug perhaps) modules that my code uses."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1518043024, "post_id": 48633121, "comment_id": 84347387, "body": "Re &quot;<i>perlapp eliminates the need to install perl,</i>&quot;, Not at all. You will need to place Perl in a place that&#39;s accessible to all 10 packages. That&#39;s the very definition of installation."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1518043063, "post_id": 48633121, "comment_id": 84347411, "body": "Re <i>&quot;plus on perl used by each of the 10.</i>&quot;, Oh, so I was right. You plan on using a perlapp to install a perl used by your 10 other packages.  That&#39;s a horrible idea. That&#39;s exactly the kind of thing that will bite you in the ass."}, {"owner": {"reputation": 2445, "user_id": 1707353, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/212f7b84a07bc7aea4f574669fe2465f?s=128&d=identicon&r=PG&f=1", "display_name": "Jeff Holt", "link": "https://stackoverflow.com/users/1707353/jeff-holt"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1518078402, "post_id": 48633121, "comment_id": 84358552, "body": "@ikegami perlapp --freestanding eliminates the need to install perl. perlapp --dependent does not bundle the perl runtime with the output executable. If I distribute the same perl-static that is bundled by perllapp --freestanding then the only way the distributed app can fail is if the app is circumvented to the point where the PATH includes some problematic perl before the app&#39;s executables."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1518078720, "post_id": 48633121, "comment_id": 84358748, "body": "Repeating yourself is useless, as is repeating myself."}], "answers": [{"comments": [{"owner": {"reputation": 2445, "user_id": 1707353, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/212f7b84a07bc7aea4f574669fe2465f?s=128&d=identicon&r=PG&f=1", "display_name": "Jeff Holt", "link": "https://stackoverflow.com/users/1707353/jeff-holt"}, "edited": false, "score": 0, "creation_date": 1518042497, "post_id": 48667966, "comment_id": 84347135, "body": "I deeply appreciate the attempted answer. Buried deep in the conversation is a semi-declared requirement that there be no installers. This, to work around a possible lack of administrative privileges for poor Windows users. Not mentioned in the question (because I presumed it was not necessary) is the requirement to support Windows, Linux, macOS."}, {"owner": {"reputation": 9262, "user_id": 124951, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/c46d5911a8fb4ffd5fb8523d56a60de0?s=128&d=identicon&r=PG", "display_name": "salva", "link": "https://stackoverflow.com/users/124951/salva"}, "reply_to_user": {"reputation": 2445, "user_id": 1707353, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/212f7b84a07bc7aea4f574669fe2465f?s=128&d=identicon&r=PG&f=1", "display_name": "Jeff Holt", "link": "https://stackoverflow.com/users/1707353/jeff-holt"}, "edited": false, "score": 0, "creation_date": 1518081382, "post_id": 48667966, "comment_id": 84360419, "body": "@jeff6times7: Actually Win32::Packer can also generate <code>.zip</code> files that don&#39;t require any installation. You can just unpack the archive and execute the contained programs."}, {"owner": {"reputation": 2445, "user_id": 1707353, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/212f7b84a07bc7aea4f574669fe2465f?s=128&d=identicon&r=PG&f=1", "display_name": "Jeff Holt", "link": "https://stackoverflow.com/users/1707353/jeff-holt"}, "edited": false, "score": 0, "creation_date": 1518102024, "post_id": 48667966, "comment_id": 84374814, "body": "That&#39;s good to know. But my primary concern was an answer to my Q1 and my Q3. That&#39;s especially true given the fact (unrevealed until now) that the build ant script for each of the 3 platforms already bundles everything that&#39;s needed in the zip (MSWin32), tar.gz (linux), and app (darwin). Making the ant script copy one more executable is trivial. That is, assuming it&#39;s the best solution. Hence my original question."}], "tags": [], "owner": {"reputation": 9262, "user_id": 124951, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/c46d5911a8fb4ffd5fb8523d56a60de0?s=128&d=identicon&r=PG", "display_name": "salva", "link": "https://stackoverflow.com/users/124951/salva"}, "is_accepted": false, "score": 1, "last_activity_date": 1518018712, "creation_date": 1518018712, "answer_id": 48667966, "question_id": 48633121, "link": "https://stackoverflow.com/questions/48633121/how-can-i-distribute-an-application-with-many-perlapp-executables-but-distribute/48667966#48667966", "title": "How can I distribute an application with many perlapp executables but distribute only one perl", "body": "<p>Not exactly the solution you are looking for, but <a href=\"https://metacpan.org/pod/Win32::Packer\" rel=\"nofollow noreferrer\">Win32::Packer</a> supports that functionality. You tell it the set of scripts that form your application and it packs all of them as a single MSI installer containing all the dependencies and <code>.exe</code> wrappers for all the scripts.</p>\n\n<p>Currently it only supports <a href=\"http://strawberryperl.com/\" rel=\"nofollow noreferrer\">Strawberry Perl</a>, but it shouldn't be too difficult to add support for AS Perl too.</p>\n"}], "owner": {"reputation": 2445, "user_id": 1707353, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/212f7b84a07bc7aea4f574669fe2465f?s=128&d=identicon&r=PG&f=1", "display_name": "Jeff Holt", "link": "https://stackoverflow.com/users/1707353/jeff-holt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 501, "favorite_count": 2, "answer_count": 1, "score": 5, "last_activity_date": 1518018712, "creation_date": 1517873029, "last_edit_date": 1517895641, "question_id": 48633121, "link": "https://stackoverflow.com/questions/48633121/how-can-i-distribute-an-application-with-many-perlapp-executables-but-distribute", "title": "How can I distribute an application with many perlapp executables but distribute only one perl", "body": "<p>Summary Question</p>\n\n<p>Do I simply use perlapp --dependent for each perl script and then make sure I copy perl-static to the app's bin directory (calling it perl) during the build?</p>\n\n<p>Background</p>\n\n<p>I am currently distributing an application with many perlapp freestanding executables, meaning they each include a bundled copy of the perl runtime.</p>\n\n<p>I'd like to distribute only one copy of the perl runtime in my application and have each executable reference the one perl runtime that I would distribute.</p>\n\n<p>For example, let's assume I have 10 perl scripts that make up my application. When I execute perlapp for each of the two demo scripts, I see something like this:</p>\n\n<pre><code>+ ls -l\n-rw-r--r--  1 -----  staff   55 Feb  5 21:03 t1.pl\n-rw-r--r--  1 -----  staff   62 Feb  5 21:03 t2.pl\n+ perlapp --force t1.pl\nPerlApp 9.5.1 build 300018\nCopyright (C) 1998-2016 ActiveState Software Inc. All rights reserved.\nCommercial license for ..................................\n\nCreated 't1'\n+ perlapp --force t2.pl\nPerlApp 9.5.1 build 300018\nCopyright (C) 1998-2016 ActiveState Software Inc. All rights reserved.\nCommercial license for ..................................\n\nCreated 't2'\n+ ls -l\n-rwxr-xr-x  1 -----  staff  2266356 Feb  5 21:07 t1\n-rw-r--r--  1 -----  staff       55 Feb  5 21:03 t1.pl\n-rwxr-xr-x  1 -----  staff  2026992 Feb  5 21:07 t2\n-rw-r--r--  1 -----  staff       62 Feb  5 21:03 t2.pl\n\nls -l `which perl`\n-rwxr-xr-x  1 root  wheel  1978336 Mar 19  2015 /usr/local/ActivePerl-5.20/bin/perl-static\n</code></pre>\n\n<p>In the above output, you can see that each of the two (I have 10 so far) executables is about 2Mib, one corresponding to each perl script. In each of the bundled executables, there is a perl runtime. If I were to distribute all 10 of these, then the distribution would be over 22MiB.</p>\n\n<p>It seems sloppy and wasteful to force customers to effectively download the perl runtime 10 times when the app requires only one perl runtime. Obviously, the distribution is only one file but it's much larger than it needs to be. While the whole app being only one perlapp executable, the perl runtime can conveniently be bundled into the executable. But over time features (i.e., executables) are added and the wastefulness &amp; sloppiness increases.</p>\n\n<p>To do it right, I'm pretty sure I have to use the --dependent perlapp command line option. When I test the use of that option, I see a tremendous decrease in the size of the bundled executable. After removing the temp folders and executing the dependent executable it looks like it has bundled the same modules as before.</p>\n\n<p>Here are my \"how\" questions.</p>\n\n<p>Q1 (by far the most important)</p>\n\n<p>If I add the --dependent option to my perlapp commands, then should I <i>expect</i> perlapp to bundle all modules it was previously bundling? I think the answer here is \"yes\" but I'd like someone like Graham Stuart to respond.</p>\n\n<p>Q2</p>\n\n<p>Is it true that all I have to do is make sure the statically linked perl is in the PATH when those dependent executables are executed? </p>\n\n<p>Q3 (Q2 reworded for extra clarification)</p>\n\n<p>Does perlapp bundle the statically linked version of perl? I think it does but, again, I want to make sure I do something equivalent.</p>\n\n<p>PS</p>\n\n<p>I tried posting the topic on ActiveState's pdk forum but I don't think that interface is accepting my post because it shows my post as being unpublished with no clue as to how to publish.</p>\n\n<p>If I use the --dependent option, then I see this:</p>\n\n<pre><code>+ perlapp --force --dependent t1.pl\nPerlApp 9.5.1 build 300018\nCopyright (C) 1998-2016 ActiveState Software Inc. All rights reserved.\nCommercial license for ..................................\n\nCreated 't1'\n+ perlapp --force --dependent t2.pl\nPerlApp 9.5.1 build 300018\nCopyright (C) 1998-2016 ActiveState Software Inc. All rights reserved.\nCommercial license for ..................................\n\nCreated 't2'\n+ ls -l\n-rwxr-xr-x  1 -----  staff  108560 Feb  5 21:07 t1\n-rw-r--r--  1 -----  staff      55 Feb  5 21:03 t1.pl\n-rwxr-xr-x  1 -----  staff  108608 Feb  5 21:07 t2\n-rw-r--r--  1 -----  staff      62 Feb  5 21:03 t2.pl\n</code></pre>\n\n<p>In the above output, you can see the files are so small that they cannot possibly have the perl runtime bundled. If I distribute perl-static and 10 of the above executables, then the distribution will be about 3MiB, a savings of about 19MiB.</p>\n\n<p>When I unset PATH, then the executables raise an error because the perl executable isn't found. That is why I believe the distribution simply needs the perl runtime to be in the bin directory with the executables. Seems like a reasonable solution but since I didn't write perlapp, I can't really know the truth. I have to rely on someone else to tell me \"yes, you are about to do the right thing and you will not get bitten 6 months later when you do x\".</p>\n"}, {"tags": ["perl", "href", "filehandle"], "answers": [{"comments": [{"owner": {"reputation": 115, "user_id": 8747926, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d1615309c90305b6ccdb82771cf7860a?s=128&d=identicon&r=PG&f=1", "display_name": "Vic K", "link": "https://stackoverflow.com/users/8747926/vic-k"}, "edited": false, "score": 0, "creation_date": 1517956010, "post_id": 48632822, "comment_id": 84304049, "body": "I really wish I could give both of you a green check.  You&#39;ve both taught me something meaningful about PERL."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 115, "user_id": 8747926, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d1615309c90305b6ccdb82771cf7860a?s=128&d=identicon&r=PG&f=1", "display_name": "Vic K", "link": "https://stackoverflow.com/users/8747926/vic-k"}, "edited": false, "score": 0, "creation_date": 1517956613, "post_id": 48632822, "comment_id": 84304263, "body": "@Vic K, The name of the language is Perl, not PERL."}], "tags": [], "owner": {"reputation": 695, "user_id": 2060441, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e093d389dd8919b616a4835e4adcf22f?s=128&d=identicon&r=PG", "display_name": "Nick P", "link": "https://stackoverflow.com/users/2060441/nick-p"}, "is_accepted": false, "score": 5, "last_activity_date": 1517871274, "creation_date": 1517871274, "answer_id": 48632822, "question_id": 48632772, "link": "https://stackoverflow.com/questions/48632772/how-to-read-a-line-from-a-filehandle-in-a-hashref/48632822#48632822", "title": "How to read a line from a filehandle in a hashref", "body": "<p>Try using <code>readline</code>, as noted at <a href=\"http://www.perlmonks.org/?node_id=776168\" rel=\"noreferrer\">http://www.perlmonks.org/?node_id=776168</a> it still assigns to <code>$_</code> and checks it is defined.</p>\n\n<pre><code>$ perl -MO=Deparse -e'while (readline($fh)) {}'\nwhile (defined($_ = &lt;$fh&gt;)) {\n    ();\n}\n-e syntax OK\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 1, "last_activity_date": 1517900300, "creation_date": 1517900300, "answer_id": 48637147, "question_id": 48632772, "link": "https://stackoverflow.com/questions/48632772/how-to-read-a-line-from-a-filehandle-in-a-hashref/48637147#48637147", "title": "How to read a line from a filehandle in a hashref", "body": "<ul>\n<li><code>&lt;fh&gt;</code> is short for <code>readline(fh)</code></li>\n<li><code>&lt;$fh&gt;</code> is short for <code>readline($fh)</code></li>\n<li><code>&lt;...&gt;</code> is short for <code>glob(qq&lt;...&gt;)</code></li>\n</ul>\n\n<p>The shortcut is out of the question, so use the long form.</p>\n\n<pre><code>readline($self-&gt;{socket})\n</code></pre>\n"}], "owner": {"reputation": 115, "user_id": 8747926, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d1615309c90305b6ccdb82771cf7860a?s=128&d=identicon&r=PG&f=1", "display_name": "Vic K", "link": "https://stackoverflow.com/users/8747926/vic-k"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 76, "favorite_count": 0, "accepted_answer_id": 48637147, "answer_count": 2, "score": 2, "last_activity_date": 1517900300, "creation_date": 1517871002, "question_id": 48632772, "link": "https://stackoverflow.com/questions/48632772/how-to-read-a-line-from-a-filehandle-in-a-hashref", "title": "How to read a line from a filehandle in a hashref", "body": "<p>I have a handle to a socket in an hashref:  <code>$self-&gt;{socket}</code>.<br>\nI want to read from it using <code>$line = &lt;$self-&gt;{socket}&gt;</code>, but I get a syntax error.</p>\n\n<p>Now, I know that</p>\n\n<pre><code>print {$self-&gt;{socket}} \"Hello\";\n</code></pre>\n\n<p>Will take care of printing, but</p>\n\n<pre><code>$line = &lt; {$self-&gt;{socket}} &gt;;\n</code></pre>\n\n<p>Doesn't work.</p>\n\n<p>How do I do this without cluttering up my code like this:</p>\n\n<pre><code>$fh = $self-&gt;{socket};\n$line = &lt; $fh &gt;;\n</code></pre>\n\n<p>Thanks.</p>\n"}, {"tags": ["perl", "grep"], "comments": [{"owner": {"reputation": 15800, "user_id": 1274314, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/gSYsp.jpg?s=128&g=1", "display_name": "TypeIA", "link": "https://stackoverflow.com/users/1274314/typeia"}, "edited": false, "score": 0, "creation_date": 1517868414, "post_id": 48631681, "comment_id": 84261657, "body": "I would not use <code>grep</code> for this. It&#39;s well-suited for searching text for a pattern, but poorly suited for grouping and joining. Instead you&#39;ll either need to read the entire file into a data structure and manipulate that, or make an FSM that processes the file on the fly. Perl libraries to parse CSV are a dime a dozen."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1517870539, "post_id": 48631681, "comment_id": 84262518, "body": "Okay, so what is your question? Does your program work? Please don&#39;t decorate data like that: we need to see what the <i>exact</i> input is."}, {"owner": {"reputation": 2167, "user_id": 824282, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/8f0cb967adb644f6408e5ff3df8c8a0f?s=128&d=identicon&r=PG", "display_name": "capser", "link": "https://stackoverflow.com/users/824282/capser"}, "reply_to_user": {"reputation": 15800, "user_id": 1274314, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/gSYsp.jpg?s=128&g=1", "display_name": "TypeIA", "link": "https://stackoverflow.com/users/1274314/typeia"}, "edited": false, "score": 0, "creation_date": 1517896616, "post_id": 48631681, "comment_id": 84269248, "body": "@TypeIA - thanks - so if I put this through Text::CSV that is a finite state machine ?"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 1, "creation_date": 1517918834, "post_id": 48631681, "comment_id": 84281839, "body": "<code>Text::CSV</code> is for when there&#39;s quoting happening. Your data looks simple enough that <code>split &#47;,&#47;</code> will be sufficient."}, {"owner": {"reputation": 2167, "user_id": 824282, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/8f0cb967adb644f6408e5ff3df8c8a0f?s=128&d=identicon&r=PG", "display_name": "capser", "link": "https://stackoverflow.com/users/824282/capser"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1520607198, "post_id": 48631681, "comment_id": 85397558, "body": "@Borodin - I will not decorate the date like that in the future - thank you for your help."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1520615576, "post_id": 48631681, "comment_id": 85402637, "body": "@Sobrique: On the contrary, the fields like <code>&quot;&quot;&quot;WMCE792e35c0992e:171221&quot;&quot;&quot;</code> are strings enclosed in <i>significant quotes</i> corresponding to a data value of <code>&quot;WMCE792e35c0992e:171221&quot;</code>. It&#39;s best to use a module to make sense of stuff like this, otherwise when <i>would</i> you use one?"}, {"owner": {"reputation": 2167, "user_id": 824282, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/8f0cb967adb644f6408e5ff3df8c8a0f?s=128&d=identicon&r=PG", "display_name": "capser", "link": "https://stackoverflow.com/users/824282/capser"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1520620915, "post_id": 48631681, "comment_id": 85405428, "body": "@Borodin - I have these modules available at my place of employment Text-CSV_PP, Text-CSV_PP-Iterator, Text-CSV_XS and Text-CSV. Getting anything else installed is going to be difficult"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1520624908, "post_id": 48631681, "comment_id": 85407332, "body": "Any and all of those are fine. Start by using <code>Text::CSV</code> to replace your <code>split</code>."}], "answers": [{"comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1520615890, "post_id": 48643679, "comment_id": 85402817, "body": "There&#39;s no need to <code>chomp</code> all of the header fields"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1520615990, "post_id": 48643679, "comment_id": 85402878, "body": "As discussed above, it&#39;s ugly to leave the data escaped after you split it into fields. You have no way of knowing whether there may be an embedded comma in any of the data."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1520616169, "post_id": 48643679, "comment_id": 85402979, "body": "Assigning to <code>$msec</code> should be conditional on the preceding substitution succeeding."}], "tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": true, "score": 0, "last_activity_date": 1517922036, "creation_date": 1517922036, "answer_id": 48643679, "question_id": 48631681, "link": "https://stackoverflow.com/questions/48631681/grep-m1-function-in-perl/48643679#48643679", "title": "grep -m1 function in Perl,", "body": "<p>So, given what you've asked, something like this would appear to do the trick:</p>\n\n<pre><code>#!/usr/bin/env perl\nuse strict;\nuse warnings;\n\nuse Time::Piece;\nuse Data::Dumper;\n\nchomp( my @header = split /,/, &lt;DATA&gt; );\n\nmy %orders;\n\nwhile (&lt;DATA&gt;) {\n   chomp;\n   my ( $msgcat, $transtme, $rootid, $clntid, $aptype, $evntyp ) = split /,/;\n\n   $rootid =~ s/\\\"//g;\n   $orders{$rootid}{$aptype} //= $transtme;\n}\n\nprint Dumper \\%orders;\n\nforeach my $order ( keys %orders ) {\n\n   foreach my $apid ( keys %{ $orders{$order} } ) {\n      $orders{$order}{$apid} =~ s/\\.(\\d+)$//;\n      my $msec = $1;\n      print \"$msec\\n\";\n\n      my $time_convert =\n        Time::Piece-&gt;strptime( $orders{$order}{$apid}, \"%Y.%m.%dT%H:%M:%S\" );\n      $orders{$order}{$apid} = ( $time_convert-&gt;epoch * 1000 ) + $msec;\n   }\n\n   print \"Time delta  for $order is: \",\n     $orders{$order}{\"YIGYO US\"} - $orders{$order}{\"CASPER US\"}, \"ms\\n\";\n   ## in your case - look for a negative 'delta' as your test for comparison.\n}\n\n\n__DATA__\nmsgcategory,transacttime,rootordid,clordid,apptype,eventtype\nCASPER US_PARENT,2017.12.21T13:58:34.525,\"\"\"WMCE792e35c0992e:171221\"\"\",\"\"\"PUSA17122100ojwf\"\"\",CASPER US,AR\nCASPER US_PARENT,2017.12.21T16:05:31.300,\"\"\"WMCE792e35c0992e:171221\"\"\",\"\"\"PUSA17122100ojwf\"\"\",CASPER US,AR\nCASPER US_PARENT,2017.12.21T16:05:31.300,\"\"\"WMCE792e35c0992e:171221\"\"\",\"\"\"PUSA17122100ojwf\"\"\",CASPER US,AR\nCASPER US_PARENT,2017.12.21T16:05:34.928,\"\"\"WMCE792e35c0992e:171221\"\"\",\"\"\"PUSA17122100ojwf\"\"\",CASPER US,AR\nPARENT,2017.12.21T16:03:37.000,\"\"\"WMCE792e35c0992e:171221\"\"\",\"\"\"A0318DC7-0443-410C-86FD-16D2989590B9\"\"\",YIGYO US,AR\nPARENT,2017.12.21T16:03:37.806,\"\"\"WMCE792e35c0992e:171221\"\"\",\"\"\"FA0A130A-DB35-4C13-B70A-0DEFFBF420FE\"\"\",YIGYO US,AR\nCASPER US_PARENT,2017.12.21T13:58:34.552,\"\"\"WMCE14e8b1aab603:171221\"\"\",\"\"\"PUSA17122100ojuz\"\"\",CASPER US,AR\nCASPER US_PARENT,2017.12.21T16:05:31.303,\"\"\"WMCE14e8b1aab603:171221\"\"\",\"\"\"PUSA17122100ojuz\"\"\",CASPER US,AR\nCASPER US_PARENT,2017.12.21T16:05:31.303,\"\"\"WMCE14e8b1aab603:171221\"\"\",\"\"\"PUSA17122100ojuz\"\"\",CASPER US,AR\nCASPER US_PARENT,2017.12.21T16:05:34.936,\"\"\"WMCE14e8b1aab603:171221\"\"\",\"\"\"PUSA17122100ojuz\"\"\",CASPER US,AR\nPARENT,2017.12.21T16:03:35.369,\"\"\"WMCE14e8b1aab603:171221\"\"\",\"\"\"7D695BC4-E771-4427-873E-CBC60DA09AD9\"\"\",YIGYO US,AR\nPARENT,2017.12.21T16:03:35.793,\"\"\"WMCE14e8b1aab603:171221\"\"\",\"\"\"BB3543B9-1581-4613-9781-4022DFDABA82\"\"\",YIGYO US,AR\n</code></pre>\n\n<p>It parse the timestamps, converts them to epoch - there's an extra bit of handling for milliseconds - if that's unimportant, then you can simplify a bit. </p>\n\n<p>And it gives a result like:</p>\n\n<pre><code>Time delta for WMCE792e35c0992e:171221 is: 7502475ms\nTime delta for WMCE14e8b1aab603:171221 is: 7500817ms\n</code></pre>\n\n<p>You'd be able to check for that delta being negative as your test case. </p>\n"}], "owner": {"reputation": 2167, "user_id": 824282, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/8f0cb967adb644f6408e5ff3df8c8a0f?s=128&d=identicon&r=PG", "display_name": "capser", "link": "https://stackoverflow.com/users/824282/capser"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 85, "favorite_count": 0, "accepted_answer_id": 48643679, "answer_count": 1, "score": -1, "last_activity_date": 1517931136, "creation_date": 1517865663, "last_edit_date": 1592644375, "question_id": 48631681, "link": "https://stackoverflow.com/questions/48631681/grep-m1-function-in-perl", "title": "grep -m1 function in Perl,", "body": "<p>For a line that has <code>CASPER US_PARENT</code> I need to capture the time and the rootid, from the first line of the group and stop.</p>\n<p>I need to skip the rest of the lines that contain the same root order id as the first instance of <code>CASPER US_PARENT</code> and find the first line that contains\nthe same rootid but the different apptype <code>YIGYO</code>. Then I need to compare the <code>CAPSER US_PARENT</code> transaction time and the <code>YIGYO</code> transaction\ntime, and if the <code>CASPER US_PARENT</code> is earlier than <code>YIGYO, print the whole </code>CAPSER US_PARENT` line.</p>\n<h3>timecompareperl.pl.viewCASPER</h3>\n<pre><code>#!/usr/bin/perl\n\nuse strict ;\nuse warnings ;\n\nuse Time::Local ;\nuse List::Util ; \n\n#open (my $fh,'&lt;:encoding(UTF-8)',$ARGV[0]) ;\n#while (my $line = &lt;$fh&gt; ) {\nwhile (my $line = &lt;DATA&gt; ) {\n\n    my ( $msgcat, $transtme, $rootid, $clntid, $aptype, $evntyp ) = split(/,/, $line);\n\n    if ( &quot;$msgcat&quot; eq &quot;CASPER US_PARENT&quot; ) {\n        my $first_rootid = first { m{ $rootid }x } $line ;\n        print &quot;$first_rootid\\n&quot; \n        sleep 1 ;\n    }\n}\n\n#msgcategory,transacttime,rootordid,clordid,apptype,eventtype\n\n__DATA__\n\n\n\nCASPER US_PARENT,2017.12.21T13:58:34.525,&quot;&quot;&quot;WMCE792e35c0992e:171221&quot;&quot;&quot;,&quot;&quot;&quot;PUSA17122100ojwf&quot;&quot;&quot;,CASPER US,AR\nCASPER US_PARENT,2017.12.21T16:05:31.300,&quot;&quot;&quot;WMCE792e35c0992e:171221&quot;&quot;&quot;,&quot;&quot;&quot;PUSA17122100ojwf&quot;&quot;&quot;,CASPER US,AR\nCASPER US_PARENT,2017.12.21T16:05:31.300,&quot;&quot;&quot;WMCE792e35c0992e:171221&quot;&quot;&quot;,&quot;&quot;&quot;PUSA17122100ojwf&quot;&quot;&quot;,CASPER US,AR\nCASPER US_PARENT,2017.12.21T16:05:34.928,&quot;&quot;&quot;WMCE792e35c0992e:171221&quot;&quot;&quot;,&quot;&quot;&quot;PUSA17122100ojwf&quot;&quot;&quot;,CASPER US,AR\nPARENT,2017.12.21T16:03:37.000,&quot;&quot;&quot;WMCE792e35c0992e:171221&quot;&quot;&quot;,&quot;&quot;&quot;A0318DC7-0443-410C-86FD-16D2989590B9&quot;&quot;&quot;,YIGYO US,AR\nPARENT,2017.12.21T16:03:37.806,&quot;&quot;&quot;WMCE792e35c0992e:171221&quot;&quot;&quot;,&quot;&quot;&quot;FA0A130A-DB35-4C13-B70A-0DEFFBF420FE&quot;&quot;&quot;,YIGYO US,AR\nCASPER US_PARENT,2017.12.21T13:58:34.552,&quot;&quot;&quot;WMCE14e8b1aab603:171221&quot;&quot;&quot;,&quot;&quot;&quot;PUSA17122100ojuz&quot;&quot;&quot;,CASPER US,AR\nCASPER US_PARENT,2017.12.21T16:05:31.303,&quot;&quot;&quot;WMCE14e8b1aab603:171221&quot;&quot;&quot;,&quot;&quot;&quot;PUSA17122100ojuz&quot;&quot;&quot;,CASPER US,AR\nCASPER US_PARENT,2017.12.21T16:05:31.303,&quot;&quot;&quot;WMCE14e8b1aab603:171221&quot;&quot;&quot;,&quot;&quot;&quot;PUSA17122100ojuz&quot;&quot;&quot;,CASPER US,AR\nCASPER US_PARENT,2017.12.21T16:05:34.936,&quot;&quot;&quot;WMCE14e8b1aab603:171221&quot;&quot;&quot;,&quot;&quot;&quot;PUSA17122100ojuz&quot;&quot;&quot;,CASPER US,AR\nPARENT,2017.12.21T16:03:35.369,&quot;&quot;&quot;WMCE14e8b1aab603:171221&quot;&quot;&quot;,&quot;&quot;&quot;7D695BC4-E771-4427-873E-CBC60DA09AD9&quot;&quot;&quot;,YIGYO US,AR\nPARENT,2017.12.21T16:03:35.793,&quot;&quot;&quot;WMCE14e8b1aab603:171221&quot;&quot;&quot;,&quot;&quot;&quot;BB3543B9-1581-4613-9781-4022DFDABA82&quot;&quot;&quot;,YIGYO US,AR\n</code></pre>\n<p>Bash has a <code>grep -m/#/</code> where it will find a certain number of matches and then stop. I don't see one in the Perl <code>grep</code> function. I see something like the &quot;grep one and done&quot; behaviour in <code>List::Util</code>, but it is not working.</p>\n"}, {"tags": ["perl", "devel-nytprof"], "comments": [{"owner": {"reputation": 3269, "user_id": 93745, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8F5Wc.jpg?s=128&g=1", "display_name": "tinita", "link": "https://stackoverflow.com/users/93745/tinita"}, "edited": false, "score": 6, "creation_date": 1517857750, "post_id": 48629533, "comment_id": 84256416, "body": "See <code>DB - programmatic interface to the Perl debugging API</code> <a href=\"https://perldoc.perl.org/DB.html\" rel=\"nofollow noreferrer\">perldoc.perl.org/DB.html</a> - it&#39;s a core module that&#39;s probably used by NYTProf. It would be best to rename your module"}, {"owner": {"reputation": 19681, "user_id": 936986, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/075f0ea7418371ace9bba5b901409ab1?s=128&d=identicon&r=PG", "display_name": "Oleg V. Volkov", "link": "https://stackoverflow.com/users/936986/oleg-v-volkov"}, "reply_to_user": {"reputation": 3269, "user_id": 93745, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8F5Wc.jpg?s=128&g=1", "display_name": "tinita", "link": "https://stackoverflow.com/users/93745/tinita"}, "edited": false, "score": 0, "creation_date": 1517858351, "post_id": 48629533, "comment_id": 84256717, "body": "That&#39;s hardly an option with codebase nearing 10Mb and with pretty convoluted inheritance and dynamic loading. Anyway, the name is very generic and that&#39;s exactly why it is expected to be encountered in the wild, so if D::NYTP have it msihandling hardcoded - that&#39;d be really bad."}, {"owner": {"reputation": 54872, "user_id": 1521179, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/MH7pk.png?s=128&g=1", "display_name": "amon", "link": "https://stackoverflow.com/users/1521179/amon"}, "edited": false, "score": 5, "creation_date": 1517858750, "post_id": 48629533, "comment_id": 84256920, "body": "DB isn&#39;t just a random module, it&#39;s effectively part of the core language, like <code>strict</code> or <code>IO::Handle</code>. NYTProf is right to use that infrastructure. Yes, your module might generally work but this kind of naming clash has similar problems to creating subroutines called <code>print</code>, <code>select</code>, or <code>say</code>. Renaming your module is the most sensible choice, and should be manageable with a few regexes. I generally prevent these kinds of problems by namespacing internal modules under some unique identifier, e.g. like <code>AMON::DB</code>."}], "answers": [{"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 3, "last_activity_date": 1517928595, "last_edit_date": 1517928595, "creation_date": 1517868254, "answer_id": 48632253, "question_id": 48629533, "link": "https://stackoverflow.com/questions/48629533/nytprofhtml-seem-to-ignore-module-named-db/48632253#48632253", "title": "nytprofhtml seem to ignore module named DB", "body": "<blockquote>\n  <p>That's hardly an option</p>\n</blockquote>\n\n<p>You don't really have an option. The special <code>DB</code> package and the associated <code>Devel::</code> namespace are coded into the perl compiler / interpreter. Unless you want to do without any debugging facilities altogether and live in fear of any mysterious unquantifiable side effects then you must refactor your code to rename your proprietary <code>DB</code> library</p>\n\n<blockquote>\n  <p>Anyway, the name is very generic and that's exactly why it is expected to be encountered</p>\n</blockquote>\n\n<p>On the contrary, <code>Devel::NYTProf</code> is bound to use the existing core package <code>DB</code>. It's precisely because it is a very generic identifier that an engineer should reject it as a choice for production code, which could be required to work with pre-existing third-party code at any point</p>\n\n<blockquote>\n  <p>a module creatively named\u00a0<code>DB</code></p>\n</blockquote>\n\n<p>This belies your own support of the choice. <code>DB</code>has been a core module since v5.6 in 2000, and anything already in CPAN should have been off the cards from the start. I feel certain that the clash of namespaces must been discovered before now. Please don't be someone else who just sweeps the issue under the carpet</p>\n\n<p>Remember that, as it stands, any code you are now putting in the <code>DB</code> package is sharing space with everything that perl has already put there. It is astonishing that you are not experiencing strange and inexplicable symptoms already</p>\n\n<p>I don't see that it's too big a task to fix this as long as you have a proper test suite for your 10MB of Perl code. If you don't, then hopefully you will at least not make the same mistakes again</p>\n"}], "owner": {"reputation": 19681, "user_id": 936986, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/075f0ea7418371ace9bba5b901409ab1?s=128&d=identicon&r=PG", "display_name": "Oleg V. Volkov", "link": "https://stackoverflow.com/users/936986/oleg-v-volkov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 76, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1517928595, "creation_date": 1517856761, "last_edit_date": 1517857298, "question_id": 48629533, "link": "https://stackoverflow.com/questions/48629533/nytprofhtml-seem-to-ignore-module-named-db", "title": "nytprofhtml seem to ignore module named DB", "body": "<p>I'm trying to profile a big application that contains a module creatively named <code>DB</code>. After running it under <code>-d:NYTProf</code> and calling <code>nytprofhtml</code>,  both without any additional switches or related environment variables, I get usual <code>nytprof</code> directory with HTML output. However it seems that due to some internal logic any output related to my module <code>DB</code> is severely mangled. Just to make sure, <code>DB</code> is pure Perl.</p>\n\n<ol>\n<li>Top and all subroutines list: while other function links point to relevant <code>-pm-NN-line.html</code> file, links to subs from <code>DB</code> point to entry script instead.</li>\n<li>\"line\" link in \"Source Code Files\" section does point to <code>DB-pm-NN-line.html</code> and it does exists, but unlike all other files it doesn't have \"Statements\" table inside and \"Line\" table have absolutely no lines of code, only summary of calls.</li>\n</ol>\n\n<p>Actually, here's a small example:</p>\n\n<pre><code># main.pl\nuse lib '.';\nuse DB;\n\nfor (1..10) {\n    print DB::do_stuff();\n}\n\n# DB.pm\npackage DB;\n\nsub do_stuff {\n    my $a = 1;\n    my $b = 2;\n    my $c = $a + $b;\n\n   return $c;\n}\n\n1;\n</code></pre>\n\n<p>Try running <code>perl -d:NYTProf main.pl</code>, then <code>nytprofhtml</code> and then inspect <code>nytprof/DB-pm-8-line.html</code>.</p>\n\n<p>I don't know if it happens because NYTProf itself have internal module named <code>DB</code> or it handles modules starting with DB in some magical way - I've noticed output for functions from <code>DBI</code> looks somewhat different too.</p>\n\n<p>Is there a way to change/disable this behavior short of renaming my <code>DB</code> module?</p>\n"}, {"tags": ["perl", "csv", "parsing", "compare"], "comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1517900461, "post_id": 48629281, "comment_id": 84270720, "body": "You need to check all of file_1 for each line of file_2 (or prebuild whole hashes and compare them).  So I&#39;d suggest a hash <code>${name} =&gt; ip</code>, rather than separate keys with value 1.  This way when key <code>name</code> from file_2 <i>is</i> found in file_1 you can compare their id&#39;s (values)."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1517900491, "post_id": 48629281, "comment_id": 84270734, "body": "Please clean up what you post.  This has outright nasty errors (loose <code>else</code> for instance)."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1517937786, "post_id": 48629281, "comment_id": 84294726, "body": "I don&#39;t really understand the added question.  More importantly, it is not a good idea to morph a question like this; ask a new one.  I noticed that you did so I suggest to now remove this addition (&quot;<i>One question more ...</i>&quot;).  You can go to edit and see previous versions of the post.  Under each version there is &quot;rollback&quot; option. When you click on that the question will revert to that version.  So you click &quot;rollback&quot; under the previous version."}], "answers": [{"comments": [{"owner": {"reputation": 145, "user_id": 7541194, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/3EjPX.jpg?s=128&g=1", "display_name": "StayCalm", "link": "https://stackoverflow.com/users/7541194/staycalm"}, "edited": false, "score": 0, "creation_date": 1517908449, "post_id": 48630928, "comment_id": 84274878, "body": "Thank you for your comments! I take now time to understand your way of proceeding."}, {"owner": {"reputation": 145, "user_id": 7541194, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/3EjPX.jpg?s=128&g=1", "display_name": "StayCalm", "link": "https://stackoverflow.com/users/7541194/staycalm"}, "edited": false, "score": 0, "creation_date": 1517999465, "post_id": 48630928, "comment_id": 84320289, "body": "I&#39;ve posted it hier <a href=\"https://stackoverflow.com/questions/48644085/compare-comma-separated-values-in-csv\">new question</a>"}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": true, "score": 2, "last_activity_date": 1521861241, "last_edit_date": 1521861241, "creation_date": 1517862449, "answer_id": 48630928, "question_id": 48629281, "link": "https://stackoverflow.com/questions/48629281/compare-values-in-csv-files/48630928#48630928", "title": "Compare values in csv files", "body": "<p>For the described task you need to compare each line of the second file with all name-ip in the first file, thus with all its lines.  An efficient way of doing this is to first build hashes for each file.</p>\n\n<p><em>Please note that it is much better to use a module for CSV</em>, like <a href=\"http://search.cpan.org/~ishigaki/Text-CSV-1.95/lib/Text/CSV.pm\" rel=\"nofollow noreferrer\">Text::CSV</a>, than to do it by hand; there's much chance for trouble otherwise. See answers in <a href=\"https://stackoverflow.com/q/47544385/4653379\">this post</a>, for example.\nI keep your approach below merely so to focus on the actual processing.  </p>\n\n<pre><code>use strict;\nuse warnings;\nuse feature qw(say);\n\nmy ($file_1, $file_2) = ('output1.csv', 'output2.csv');\n\nopen my $fh, '&lt;', $file_1  or die \"Can't open $file_1: $!\";\nmy %first = map { chomp; split /\\s*,\\s*/ } &lt;$fh&gt;;            #/\n\nopen    $fh, '&lt;', $file_2  or die \"Can't open $file_2: $!\";\nmy %second = map { chomp; (split /\\s*,\\s*/)[1,2] } &lt;$fh&gt;;\nclose $fh;\n\nforeach my $name (sort keys %first) {\n    if (not exists $second{$name}) {\n        say \"Devices should be added: $name\";\n        next;\n    }\n\n    if ($first{$name} eq $second{$name}) {\n        say \"Match found $name, $first{$name}\";\n    }\n    else {\n        say \"UPDATE need be done for $second{$name}\"\n    }   \n}   \n</code></pre>\n\n<p>This prints</p>\n\n<pre>\nMatch found Test1, 10.56.7.13\nUPDATE need be done for 10.56.4.10\nDevices should be added: Test3\n</pre>\n\n<p>Comments</p>\n\n<ul>\n<li><p>I've changed file naming to lexical variables as I don't see a point in using <code>constant</code> for this</p></li>\n<li><p>I use one filehandle, which gets closed when reopened (for the second file)</p></li>\n<li><p>A hash is assigned directly by pairs returned when each line is <code>split</code>. If you need more processing (perhaps 'id' for the second file) or checking of input change to an explicit loop. Assigning a hash this way also assumes unique names (names appear on only one line).</p></li>\n<li><p>This assumes that files aren't huge as they are both read first</p></li>\n</ul>\n\n<p>The code in the question is completely broken, with basic syntax errors. Always clean up your code before concluding that it fails. If this is a matter of posting <em>please</em> do your best with what you post.</p>\n"}], "owner": {"reputation": 145, "user_id": 7541194, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/3EjPX.jpg?s=128&g=1", "display_name": "StayCalm", "link": "https://stackoverflow.com/users/7541194/staycalm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 101, "favorite_count": 0, "accepted_answer_id": 48630928, "answer_count": 1, "score": 1, "last_activity_date": 1521861241, "creation_date": 1517855799, "last_edit_date": 1517912237, "question_id": 48629281, "link": "https://stackoverflow.com/questions/48629281/compare-values-in-csv-files", "title": "Compare values in csv files", "body": "<p>I am comparing different values in two csv files. If I do not have a match, I want to add (or update) my devices in my Management System.</p>\n\n<p><strong>output1.csv (name, ip) - Primary system</strong></p>\n\n<hr>\n\n<pre><code> Test1, 10.56.7.13\n Test2, 10.56.4.14\n Test3, 10.56.5.15\n</code></pre>\n\n<p><strong>output2.csv (id,name,ip) - Secondary system</strong></p>\n\n<hr>\n\n<pre><code> 1234,Test1, 10.56.7.13\n 1235,Test2, 10.56.4.10\n</code></pre>\n\n<p>My result should be: I do nothing with <code>Test1</code> (because it is already in System 2), I should update <code>Test2</code> (because now I have a different ip address) and I should add <code>Test3</code>, because I do not have it in the secondary System.</p>\n\n<pre><code>use strict;\nuse warnings;\nuse feature qw(say);\nuse autodie;\n\nuse constant {\n    FILE_1  =&gt; \"output1.csv\",\n    FILE_2  =&gt; \"output2.csv\",\n};\n\nmy %first;\nmy $name_first;\nmy $ip_first;\nopen my $output_1, \"&lt;\", FILE_1;\n\nwhile ( &lt;$output_1&gt; ) { \n    chomp;\n    ($name_first, $ip_first) = split /,/;  #/\n    $first{$name_first}=1;\n    $first{$ip_first}=1;\n}\nclose $output_1;\n\nmy %second;\nopen my $output_2, \"&lt;\", FILE_2;\n\nwhile ( &lt;$output_2&gt; ) { \n    chomp;\n    my ($id_second,$name_second,$ip_second) = split /,/;\n    if ( $first{$name_first} &amp;&amp; $first{$ip_second} ) { \n        print \"Match found $name_second, $ip_second\\n\";\n        if ( $first{$name_first} eq $first{$name_second} &amp;&amp;  \n            $first{$ip_first} ne $first{$ip_second}) \n        {   \n            print \"It should be done UPDATE for $name_second\\n\";\n            else\n            print \"Devices should be added: $name_first\\n\"\n            $second{$name_second}++;\n        }   \n    }   \n}\nclose $output_2;\n</code></pre>\n\n<p>I am getting an error at this line <code>if ( $first{$name_first} e.g. $first{$name_second}</code>. I think my compare is wrong - is there a better way of doing it?</p>\n\n<p>One question more: for UPDATE (PUT Request) I need separate keys. Because i need my <code>id</code> in <code>URL</code>  and I need to put in <code>XML template</code> <code>name</code> and <code>ipaddress</code>, that should be added. May I do it this way? </p>\n\n<pre><code>else {\n    say \"UPDATE need be done for $second{$name}\";\n       my $xml = XML::Twig -&gt; new -&gt; parsefile ( 'template.xml' );\n      $xml -&gt;set_pretty_print('indented_a');\n   open ( my $input, '&lt;', 'output2.csv' ) or die $!;\n      while ( &lt;$input&gt; ) { \n      chomp; \n      my $id, my $name, $second{$name} = split /,/; \n      $xml -&gt; root -&gt; set_att('name', $name ); \n      $xml -&gt; get_xpath('//ipaddress',0) -&gt; set_text($second{$name}); \n      my $uri=\"https://hostname:9060/ers/config/networkdevice/$id\";\n</code></pre>\n"}, {"tags": ["shell", "perl"], "comments": [{"owner": {"reputation": 793701, "user_id": 19068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d2d3229ed1961d2bd81853242493247?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/19068/quentin"}, "edited": false, "score": 2, "creation_date": 1517845878, "post_id": 48626339, "comment_id": 84249517, "body": "Stackoverflow expects you to perform <a href=\"https://meta.stackoverflow.com/q/261592/19068\">a degree of research</a> <b>before</b> you ask a question (and to share the results of that research in the question)."}, {"owner": {"reputation": 793701, "user_id": 19068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d2d3229ed1961d2bd81853242493247?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/19068/quentin"}, "edited": false, "score": 1, "creation_date": 1517845897, "post_id": 48626339, "comment_id": 84249531, "body": "<a href=\"https://duckduckgo.com/?q=perl+read+file+line+by+line\" rel=\"nofollow noreferrer\">duckduckgo.com/?q=perl+read+file+line+by+line</a>"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1517846478, "post_id": 48626339, "comment_id": 84249923, "body": "It looks like you have answered your own question?"}], "answers": [{"tags": [], "owner": {"reputation": 799, "user_id": 3956017, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5814cfe5bfd09b7e3047088132a8eac7?s=128&d=identicon&r=PG&f=1", "display_name": "Garo", "link": "https://stackoverflow.com/users/3956017/garo"}, "is_accepted": false, "score": 1, "last_activity_date": 1517849336, "last_edit_date": 1517849336, "creation_date": 1517848429, "answer_id": 48627176, "question_id": 48626339, "link": "https://stackoverflow.com/questions/48626339/how-to-use-each-line-of-a-file-in-perl/48627176#48627176", "title": "How to use each line of a file in Perl", "body": "<p>Your question is a bit unclear...</p>\n\n<ul>\n<li><p>If we assume you want to run a specific command on every system :</p>\n\n<pre><code>perl -ne 's/^(.*)/ssh \\1 some_command/; system $_' &lt; hostnames.txt\n</code></pre></li>\n<li><p>Or in case you want to do some perl statements after you logged in and out on the remote machine</p>\n\n<pre><code>perl -ne 's/^(.*)/ssh \\1/; system $_; statement' &lt; hostnames.txt\n</code></pre></li>\n</ul>\n\n<p>Some explanation:</p>\n\n<ul>\n<li><code>perl -ne</code> runs the argument following it in a <code>while(&lt;STDIN&gt;) { the_argument; }</code>-loop. So it will read every line on the input, place it in <code>$_</code> and do this until there is no more input.</li>\n<li><code>&lt; hostnames.txt</code> redirects the contents of your file to the <code>STDIN</code> (standard input) of the perl process</li>\n<li><code>s/^(.*)/ssh \\1 some_command/</code> is a regexp that runs on <code>$_</code>. The first part  <code>^(.*)</code> means \"all characters from the beginning of the line and remember them\" and <code>ssh \\1</code> means \"ssh followed by the first thing we remembered\".</li>\n<li><code>some_command</code> runs on the remote machine after logging in and exits immediately after it's done.</li>\n<li><code>system $_</code> executes <code>$_</code> as if it contains a shell command (which it does now)</li>\n<li>The <code>;</code> let's you use multiple statements as a single arg to <code>perl -ne</code></li>\n</ul>\n"}], "owner": {"reputation": 710, "user_id": 9218410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c988d41e9d827d1c64078fa1a73bb4c8?s=128&d=identicon&r=PG&f=1", "display_name": "TTaJTa4", "link": "https://stackoverflow.com/users/9218410/ttajta4"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 41, "favorite_count": 0, "closed_date": 1517852057, "answer_count": 1, "score": -3, "last_activity_date": 1517849336, "creation_date": 1517845789, "last_edit_date": 1592644375, "question_id": 48626339, "link": "https://stackoverflow.com/questions/48626339/how-to-use-each-line-of-a-file-in-perl", "closed_reason": "Needs more focus", "title": "How to use each line of a file in Perl", "body": "<p>I am working with a remote shell.</p>\n<p>I have a file that contains a list of host names, with each host name on a separate line.</p>\n<p>For example:</p>\n<pre><code>FirstHostName\nSecondHostName\nThirdHostName\n...\n</code></pre>\n<p>I want to run through each line of the file and enter the host name by <code>ssh [hostname]</code>. Then I'll add some more commands in each loop (after it'll enter).</p>\n<p>How should I do this? Assume that I can switch to each hostname.</p>\n<h3>Update</h3>\n<p>I did some research, and I know it should be something like this:</p>\n<pre><code>open(FILE, &quot;hostnames.txt&quot;) or die(&quot;could not open file&quot;);\n\nforeach $line ( &lt;FILE&gt; ) {\n    ...\n}\n\nclose(FILE);\n</code></pre>\n"}, {"tags": ["perl", "moo"], "answers": [{"comments": [{"owner": {"reputation": 589, "user_id": 1071125, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/8724116c946ff0e5d48eff23b580a8bf?s=128&d=identicon&r=PG", "display_name": "gib", "link": "https://stackoverflow.com/users/1071125/gib"}, "edited": false, "score": 0, "creation_date": 1517844584, "post_id": 48624875, "comment_id": 84248665, "body": "In Moo I get: <code>Can&#39;t call method &quot;useTriggers&quot; on unblessed reference</code>"}, {"owner": {"reputation": 7704, "user_id": 3964397, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/640272a326ae5f3cd89364b78f2108c9?s=128&d=identicon&r=PG", "display_name": "tjwrona1992", "link": "https://stackoverflow.com/users/3964397/tjwrona1992"}, "reply_to_user": {"reputation": 589, "user_id": 1071125, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/8724116c946ff0e5d48eff23b580a8bf?s=128&d=identicon&r=PG", "display_name": "gib", "link": "https://stackoverflow.com/users/1071125/gib"}, "edited": false, "score": 1, "creation_date": 1517844802, "post_id": 48624875, "comment_id": 84248817, "body": "hmmm, maybe try using the BUILD subroutine instead? get rid of <code>BUILDARGS</code> and try adding <code>sub BUILD { my $self = shift; $self-&gt;useTriggers(1); }</code>. Again, I&#39;m not sure if this will act differently in <code>Moo</code> than it does in <code>Moose</code>."}, {"owner": {"reputation": 7704, "user_id": 3964397, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/640272a326ae5f3cd89364b78f2108c9?s=128&d=identicon&r=PG", "display_name": "tjwrona1992", "link": "https://stackoverflow.com/users/3964397/tjwrona1992"}, "reply_to_user": {"reputation": 589, "user_id": 1071125, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/8724116c946ff0e5d48eff23b580a8bf?s=128&d=identicon&r=PG", "display_name": "gib", "link": "https://stackoverflow.com/users/1071125/gib"}, "edited": false, "score": 1, "creation_date": 1517844966, "post_id": 48624875, "comment_id": 84248938, "body": "Try the new code in the edited answer and let me know if it works. :)"}], "tags": [], "owner": {"reputation": 7704, "user_id": 3964397, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/640272a326ae5f3cd89364b78f2108c9?s=128&d=identicon&r=PG", "display_name": "tjwrona1992", "link": "https://stackoverflow.com/users/3964397/tjwrona1992"}, "is_accepted": true, "score": 8, "last_activity_date": 1517844869, "last_edit_date": 1517844869, "creation_date": 1517841185, "answer_id": 48624875, "question_id": 48624708, "link": "https://stackoverflow.com/questions/48624708/how-to-not-execute-trigger-while-constructing-object/48624875#48624875", "title": "How to NOT execute trigger while constructing object", "body": "<p>I don't know much about <code>Moo</code>, but in <code>Moose</code> you can implement your own code after the constructor. If you can do something like this in <code>Moo</code> it would give you the desired effect.</p>\n\n<pre><code>sub BUILD {\n    my $self = shift;\n\n    # Sets \"useTriggers\" AFTER the object is already constructed.\n    $self-&gt;useTriggers(1);\n};\n</code></pre>\n\n<p>This would cause <code>useTriggers</code> to be set just after construction so the trigger would be active after the object is constructed, but not before it is constructed.</p>\n\n<p>So you should be able to write:</p>\n\n<pre><code>my $foo-&gt;new(attr =&gt; 1);\n$foo-&gt;attr(2);\n</code></pre>\n\n<p>And get the same output.</p>\n"}, {"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1517842404, "post_id": 48625025, "comment_id": 84247247, "body": "If you have many such attributes, you can write a sub to generate the public accessor (and maybe even the attribute)."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 7, "last_activity_date": 1517841742, "creation_date": 1517841742, "answer_id": 48625025, "question_id": 48624708, "link": "https://stackoverflow.com/questions/48624708/how-to-not-execute-trigger-while-constructing-object/48625025#48625025", "title": "How to NOT execute trigger while constructing object", "body": "<pre><code>package Foo;\nuse Moo;\n\nhas attr =&gt; ( accessor =&gt; '_attr' );\n\nsub attr { \n    my $self = shift;\n    my $rv = $self-&gt;_attr(@_);\n    print \"trigger! value: \", $rv if @_;\n    return $rv;\n}\n\n\npackage main;\nuse Foo;\n\nmy $foo = Foo-&gt;new( attr =&gt; 1 );\n$foo-&gt;attr( 2 );\n</code></pre>\n"}], "owner": {"reputation": 589, "user_id": 1071125, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/8724116c946ff0e5d48eff23b580a8bf?s=128&d=identicon&r=PG", "display_name": "gib", "link": "https://stackoverflow.com/users/1071125/gib"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 181, "favorite_count": 1, "accepted_answer_id": 48624875, "answer_count": 2, "score": 4, "last_activity_date": 1517844869, "creation_date": 1517840689, "question_id": 48624708, "link": "https://stackoverflow.com/questions/48624708/how-to-not-execute-trigger-while-constructing-object", "title": "How to NOT execute trigger while constructing object", "body": "<p>I have this code:</p>\n\n<pre><code>package Foo;\nuse Moo;\n\nhas attr =&gt; ( is =&gt; \"rw\", trigger =&gt; 1 );\n\nsub _trigger_attr \n    { print \"trigger! value:\". shift-&gt;attr .\"\\n\" }\n\n\npackage main;\nuse Foo;\n\nmy $foo = Foo-&gt;new( attr =&gt; 1 );\n$foo-&gt;attr( 2 );\n</code></pre>\n\n<p>It returns:</p>\n\n<pre><code>$ perl test.pl\ntrigger! value:1\ntrigger! value:2\n</code></pre>\n\n<p>This is default, documented behavior of Triggers in Moo.</p>\n\n<p>How can I disable trigger execution if the attribute is set via constructor?</p>\n\n<p>Of course I can do it like this:</p>\n\n<pre><code>package Foo;\nuse Moo;\n\nhas attr        =&gt; ( is =&gt; \"rw\", trigger =&gt; 1 );\nhas useTriggers =&gt; ( is =&gt; \"rw\", default =&gt; 0 );\n\nsub _trigger_attr \n{ \n    my $self = shift;\n    print \"trigger! value:\". $self-&gt;attr .\"\\n\" if $self-&gt;useTriggers \n}\n\npackage main;\nuse Foo;\n\nmy $foo = Foo-&gt;new( attr =&gt; 1 );\n$foo-&gt;useTriggers( 1 );\n$foo-&gt;attr( 2 );\n</code></pre>\n\n<p>And get:</p>\n\n<pre><code>$ perl testt.pl\ntrigger! value:2\n</code></pre>\n\n<p>So it works, but ... it feels wrong ;).</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 9961, "user_id": 2139766, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/b3qcA.png?s=128&g=1", "display_name": "AnFi", "link": "https://stackoverflow.com/users/2139766/anfi"}, "edited": false, "score": 0, "creation_date": 1517837305, "post_id": 48623622, "comment_id": 84243888, "body": "Do you prefer &quot;use module X&quot; solution or &quot;use raw perl&quot; solution?"}, {"owner": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "edited": false, "score": 0, "creation_date": 1517837884, "post_id": 48623622, "comment_id": 84244242, "body": "<a href=\"https://stackoverflow.com/questions/11974992/find-week-of-a-year-given-the-date-in-mm-dd-yyyy\" title=\"find week of a year given the date in mm dd yyyy\">stackoverflow.com/questions/11974992/&hellip;</a>"}, {"owner": {"reputation": 147, "user_id": 8267952, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/b2ef54d99c06b6bf90bfe866cd939f2b?s=128&d=identicon&r=PG&f=1", "display_name": "ran1n", "link": "https://stackoverflow.com/users/8267952/ran1n"}, "edited": false, "score": 0, "creation_date": 1517838013, "post_id": 48623622, "comment_id": 84244317, "body": "modules solution is fine. Thanks!"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1517839621, "post_id": 48623622, "comment_id": 84245385, "body": "Do you mean calendar week, and which day do you start the week on? Or do you mean &#39;within the last 7 days&#39;?"}, {"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 0, "creation_date": 1517846267, "post_id": 48623622, "comment_id": 84249801, "body": "What have you tried?  Are you having trouble with looping over the keys/dates, or testing a date?"}], "answers": [{"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1517840531, "post_id": 48623936, "comment_id": 84246004, "body": "Don&#39;t truncate unless you switch to floating, or it can <a href=\"https://stackoverflow.com/q/18489927/589924\">fail</a>. Fixed."}, {"owner": {"reputation": 2833, "user_id": 9300627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7a38cf029222bcf1d902e6b2759ffeb?s=128&d=identicon&r=PG", "display_name": "haukex", "link": "https://stackoverflow.com/users/9300627/haukex"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1517841121, "post_id": 48623936, "comment_id": 84246385, "body": "@ikegami - Thanks, though it&#39;s <code>floating</code> and not <code>float</code>, fixed. Update: Ah, seems we both caught that at almost exactly the same time :-)"}, {"owner": {"reputation": 2833, "user_id": 9300627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7a38cf029222bcf1d902e6b2759ffeb?s=128&d=identicon&r=PG", "display_name": "haukex", "link": "https://stackoverflow.com/users/9300627/haukex"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1517841419, "post_id": 48623936, "comment_id": 84246589, "body": "@ikegami - Hm, yes, using <code>local</code> time is probably better, edited, thanks."}], "tags": [], "owner": {"reputation": 2833, "user_id": 9300627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7a38cf029222bcf1d902e6b2759ffeb?s=128&d=identicon&r=PG", "display_name": "haukex", "link": "https://stackoverflow.com/users/9300627/haukex"}, "is_accepted": true, "score": 5, "last_activity_date": 1517841399, "last_edit_date": 1517841399, "creation_date": 1517838116, "answer_id": 48623936, "question_id": 48623622, "link": "https://stackoverflow.com/questions/48623622/check-if-timestamp-falls-in-current-week-in-perl/48623936#48623936", "title": "Check if timestamp falls in current week in perl", "body": "<p>Personally I like <a href=\"https://metacpan.org/pod/DateTime\" rel=\"nofollow noreferrer\">DateTime</a> for all my date/time needs because it is a pretty complete solution. In the following, I've assumed that your hash's values are consistently formatted (<code>YYYY-MM-DD</code> separated by commas, no whitespace). Also note that this uses Monday as the first day of the week, see the <a href=\"https://metacpan.org/pod/DateTime#$dt-%3Etruncate(-to-=%3E-...-)\" rel=\"nofollow noreferrer\">DateTime truncate method</a> for details.</p>\n\n<pre><code>use warnings;\nuse strict;\nuse DateTime;\nuse DateTime::Format::Strptime;\n\nmy %hash = (\n    'key1' =&gt; '2018-01-17',\n    'key2' =&gt; '2018-02-05,2018-01-08',\n    'key3' =&gt; '2018-01-26',\n    'key4' =&gt; '2018-01-04',\n    'key5' =&gt; '2018-01-27,2018-02-06,2018-01-28'\n);\n\nmy $strp = DateTime::Format::Strptime-&gt;new( on_error=&gt;'croak',\n    pattern =&gt; '%Y-%m-%d', time_zone=&gt;'floating' );\n\nmy $week_start = DateTime-&gt;now(time_zone=&gt;'local')\n    -&gt;set_time_zone('floating')-&gt;truncate(to=&gt;'week');\nmy $week_end   = $week_start-&gt;clone-&gt;add( days =&gt; 7 );\n\nfor my $key (sort keys %hash) {\n    for my $date (split /,/, $hash{$key}) {\n        my $dt = $strp-&gt;parse_datetime($date);\n        # DateTime objects overload comparison operators\n        if ( $week_start &lt;= $dt &amp;&amp; $dt &lt; $week_end ) {\n            print \"$key\\n\";\n        }\n    }\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1517840979, "post_id": 48624649, "comment_id": 84246287, "body": "You were comparing the week of a local date with the week of a UTC date. That could lead to weird (i.e. incorrect) results. Fixed."}, {"owner": {"reputation": 1672, "user_id": 4355253, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ee8cbfecfb7686f370b07eea52273c5?s=128&d=identicon&r=PG&f=1", "display_name": "Javier Elices", "link": "https://stackoverflow.com/users/4355253/javier-elices"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1517841239, "post_id": 48624649, "comment_id": 84246465, "body": "@ikegami, you have edited the code so it only remains to thank you!"}, {"owner": {"reputation": 147, "user_id": 8267952, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/b2ef54d99c06b6bf90bfe866cd939f2b?s=128&d=identicon&r=PG&f=1", "display_name": "ran1n", "link": "https://stackoverflow.com/users/8267952/ran1n"}, "edited": false, "score": 1, "creation_date": 1517908137, "post_id": 48624649, "comment_id": 84274678, "body": "Thankyou ikegami, Javier and haukex for the explanation and code sample. Working wonderfully!"}], "tags": [], "owner": {"reputation": 1672, "user_id": 4355253, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ee8cbfecfb7686f370b07eea52273c5?s=128&d=identicon&r=PG&f=1", "display_name": "Javier Elices", "link": "https://stackoverflow.com/users/4355253/javier-elices"}, "is_accepted": false, "score": 4, "last_activity_date": 1517840767, "last_edit_date": 1517840767, "creation_date": 1517840504, "answer_id": 48624649, "question_id": 48623622, "link": "https://stackoverflow.com/questions/48623622/check-if-timestamp-falls-in-current-week-in-perl/48624649#48624649", "title": "Check if timestamp falls in current week in perl", "body": "<p>There are lots of ways of doing what you want. With <a href=\"https://metacpan.org/pod/Time::Piece\" rel=\"nofollow noreferrer\">Time::Piece</a> which I believe is core as of Perl 5.9.5, you could do:</p>\n\n<pre><code>use Time::Piece;\n\nmy %hash = (\n  'key1' =&gt; '2018-01-17',\n  'key2' =&gt; '2018-02-05,2018-01-08',\n  'key3' =&gt; '2018-01-26' ,\n  'key4' =&gt; '2018-01-04',\n  'key5' =&gt; '2018-01-27,2018-02-06,2018-01-28'\n);\n\nmy $current = localtime-&gt;strftime('%Y-%V');\n\nforeach my $i (sort keys %hash) {\n  foreach my $j (split /\\s*,\\s*/, $hash{$i}) {\n    if( localtime-&gt;strptime($j, '%Y-%m-%d')-&gt;strftime('%Y-%V') eq $current ) {\n      print 'Key: ', $i, ', date: ', $j, \"\\n\";\n    }\n  }\n}\n</code></pre>\n\n<p>It uses the fact that <code>%V</code> is the ISO 8601 week number, which concatenated with the year gives something to compare against.</p>\n\n<p>The function <code>strptime</code> turns strings into date-objects and then <code>strftime</code> turns date-objects into strings.</p>\n\n<p>The output:</p>\n\n<pre><code>Key: key2, date: 2018-02-05\nKey: key5, date: 2018-02-06\n</code></pre>\n\n<p>The function <code>strftime</code> has other week definitions which you may use: <code>%U</code>, <code>%V</code> and <code>%W</code>; see for instance <a href=\"http://search.cpan.org/~dexter/POSIX-strftime-GNU-0.02/lib/POSIX/strftime/GNU.pm\" rel=\"nofollow noreferrer\">here</a>.</p>\n"}], "owner": {"reputation": 147, "user_id": 8267952, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/b2ef54d99c06b6bf90bfe866cd939f2b?s=128&d=identicon&r=PG&f=1", "display_name": "ran1n", "link": "https://stackoverflow.com/users/8267952/ran1n"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 189, "favorite_count": 0, "accepted_answer_id": 48623936, "answer_count": 2, "score": 1, "last_activity_date": 1517841399, "creation_date": 1517837126, "question_id": 48623622, "link": "https://stackoverflow.com/questions/48623622/check-if-timestamp-falls-in-current-week-in-perl", "title": "Check if timestamp falls in current week in perl", "body": "<p>I have a hash containing keys and timestamps as values as shown below. Is there a way to find which keys have current week's timestamp.</p>\n\n<pre><code>my %hash = (\n      'key1'  =&gt; '2018-01-17',\n      'key2'  =&gt; '2018-02-05,2018-01-08',\n      'key3'  =&gt; '2018-01-26' ,\n      'key4'  =&gt; '2018-01-04',\n      'key5'  =&gt; '2018-01-27,2018-02-06,2018-01-28'\n    );\n</code></pre>\n\n<p>Expected result is : 'key2' and 'key5' with values 2018-02-05 and 2018-02-06 falling in current week.</p>\n"}, {"tags": ["multithreading", "perl"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1517842072, "post_id": 48622314, "comment_id": 84247017, "body": "The only reason a glob would have been used as the basis as the object is if was a file handle (even if also an object), and ultimately unpassable even if you were ok with serializing!"}, {"owner": {"reputation": 8001, "user_id": 307297, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/e28FD.png?s=128&g=1", "display_name": "chris01", "link": "https://stackoverflow.com/users/307297/chris01"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1517845378, "post_id": 48622314, "comment_id": 84249200, "body": "Yes, I was not able to pass or serialize. Think I need to rebuild :-("}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1517845480, "post_id": 48622314, "comment_id": 84249266, "body": "Normally, you&#39;d accept the request in each thread."}, {"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 1, "creation_date": 1517846539, "post_id": 48622314, "comment_id": 84249961, "body": "Tell us what this object that represents an http server is?  Does it use cpan code (if so, what), or private stuff (if so, show at least some of it)?"}, {"owner": {"reputation": 8001, "user_id": 307297, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/e28FD.png?s=128&g=1", "display_name": "chris01", "link": "https://stackoverflow.com/users/307297/chris01"}, "edited": false, "score": 0, "creation_date": 1517849760, "post_id": 48622314, "comment_id": 84252049, "body": "I am using HTTP::Daemon. Even that is not shareable."}, {"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 0, "creation_date": 1517891058, "post_id": 48622314, "comment_id": 84267590, "body": "is this windows?  if not, why are you using threads?"}, {"owner": {"reputation": 8001, "user_id": 307297, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/e28FD.png?s=128&g=1", "display_name": "chris01", "link": "https://stackoverflow.com/users/307297/chris01"}, "edited": false, "score": 0, "creation_date": 1517902204, "post_id": 48622314, "comment_id": 84271490, "body": "It is linux. I am with threads because they are more lightweight than fork and sharing data is more easier  -  I thought ;-)"}, {"owner": {"reputation": 54872, "user_id": 1521179, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/MH7pk.png?s=128&g=1", "display_name": "amon", "link": "https://stackoverflow.com/users/1521179/amon"}, "edited": false, "score": 1, "creation_date": 1517918533, "post_id": 48622314, "comment_id": 84281640, "body": "@chris01 With Perl, threads are not more lightweight. Perl&#39;s threads more or less simulate a fork() in userspace, which means they can&#39;t share memory via copy-on-write like the real fork() does. Each thread runs its own full copy of the Perl interpreter. Historically, this thread implementation grew out of the fork()-simulation for Windows. The only advantage of Perl threads over fork is that it&#39;s typically simpler to share data between threads. You&#39;ve found a case where sharing is not simple."}, {"owner": {"reputation": 54872, "user_id": 1521179, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/MH7pk.png?s=128&g=1", "display_name": "amon", "link": "https://stackoverflow.com/users/1521179/amon"}, "edited": false, "score": 1, "creation_date": 1517918705, "post_id": 48622314, "comment_id": 84281756, "body": "From the <a href=\"http://perldoc.perl.org/threads.html\" rel=\"nofollow noreferrer\"><code>threads</code> docs</a>: \u201cThe &quot;interpreter-based threads&quot; provided by Perl are not the fast, lightweight system for multitasking that one might expect or hope for. Threads are implemented in a way that make them easy to misuse. Few people know how to use them correctly or will be able to provide help. The use of interpreter-based threads in perl is officially discouraged.\u201d"}], "answers": [{"comments": [{"owner": {"reputation": 8001, "user_id": 307297, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/e28FD.png?s=128&g=1", "display_name": "chris01", "link": "https://stackoverflow.com/users/307297/chris01"}, "edited": false, "score": 0, "creation_date": 1517833720, "post_id": 48622536, "comment_id": 84241566, "body": "Thread::Queue is not able to work with GLOB - same limitations than shared_clone. And a serialization seems to be not effizient if the worktask is pretty short."}], "tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": false, "score": 0, "last_activity_date": 1517833435, "creation_date": 1517833435, "answer_id": 48622536, "question_id": 48622314, "link": "https://stackoverflow.com/questions/48622314/perl-threads-share-glob-between-threads/48622536#48622536", "title": "Perl-Threads: share GLOB between threads", "body": "<p>Well, it's hard to be more specific without some example code. </p>\n\n<p>But the standard way of handing off stuff to workers, is to use <code>Thread::Queue</code>. </p>\n\n<p>If it's just a file descriptor, you can <code>enqueue</code> it. If it's a bit more complicated (e.g. object or hash), you can use <code>Storable</code> and <code>freeze</code>/<code>thaw</code>. You're probably looking at that because you seem to be talking about an object. </p>\n\n<p>But I wouldn't worry <em>too</em> much about your efficiency question - it may not be as big a deal as you think. Are you profiling your code to be sure? </p>\n"}], "owner": {"reputation": 8001, "user_id": 307297, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/e28FD.png?s=128&g=1", "display_name": "chris01", "link": "https://stackoverflow.com/users/307297/chris01"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 111, "favorite_count": 2, "answer_count": 1, "score": 3, "last_activity_date": 1517833435, "creation_date": 1517832726, "question_id": 48622314, "link": "https://stackoverflow.com/questions/48622314/perl-threads-share-glob-between-threads", "title": "Perl-Threads: share GLOB between threads", "body": "<p>I try to make a parallel-processing webserver in Perl.</p>\n\n<p>The listening is not a pure socket - so no filehandle, it is a object that implements a HTTP-server (a GLOB).</p>\n\n<p>After the accept I get a GLOB again for the client-connection.</p>\n\n<p>Because of GLOB I can not pass it to the worker-threads vis thead::shared.</p>\n\n<p>I could create the treads dynamically and give it to them via argument. But creating threads is not good for performance so I like to have a fixed pool of already waiting workers.</p>\n\n<p>So how can I pass a GLOB to a already running thread in an elegant way?\nSerializing into a DB, File, IPC, ... is not efficient.</p>\n\n<p>Sure I can do a big redesign (fork, IPC, socket, ...) but thats not the question.</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1517824053, "post_id": 48619524, "comment_id": 84235870, "body": "For calculating your distances, <a href=\"https://stackoverflow.com/questions/48186656/calculating-distances-between-protein-and-ligand/48193214#48193214\">This answer</a> looks kinda similar to what you&#39;re trying to do? E.g. <code>sqrt ( ( X-X1) ** 2 + (y-y1) **2 + ( z -z1 ) **2 )</code>"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1517824729, "post_id": 48619524, "comment_id": 84236309, "body": "Haven&#39;t you been told enough times how disrespectful it is to post such badly-formatted code? And why are you using two separate accounts at the same time?"}, {"owner": {"reputation": 209, "user_id": 9180236, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f564cb07c66bd0cb7d993bc4b921615f?s=128&d=identicon&r=PG&f=1", "display_name": "djordje", "link": "https://stackoverflow.com/users/9180236/djordje"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1517825650, "post_id": 48619524, "comment_id": 84236823, "body": "@Borodin I have no idea who milan is and I am not using two accounts. Many people are doing the same things..."}, {"owner": {"reputation": 209, "user_id": 9180236, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f564cb07c66bd0cb7d993bc4b921615f?s=128&d=identicon&r=PG&f=1", "display_name": "djordje", "link": "https://stackoverflow.com/users/9180236/djordje"}, "reply_to_user": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1517825793, "post_id": 48619524, "comment_id": 84236929, "body": "@Sobrique The question is not the same and this is not the answer to my question, I am doing something different, but the principe is the same. Formula is the same, everybody uses this formula, but the input with different number of files is different and conditions are different and way of extracting coordinates is different."}, {"owner": {"reputation": 377, "user_id": 6583638, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1zobe.jpg?s=128&g=1", "display_name": "Flying_whale", "link": "https://stackoverflow.com/users/6583638/flying-whale"}, "edited": false, "score": 0, "creation_date": 1517826294, "post_id": 48619524, "comment_id": 84237218, "body": "even if you&#39;re not Milan, you should indent properly your code. You shouldn&#39;t do it because it is respectful to us, but you should do it for you. It is much easier to read a well indented code that your current one."}, {"owner": {"reputation": 209, "user_id": 9180236, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f564cb07c66bd0cb7d993bc4b921615f?s=128&d=identicon&r=PG&f=1", "display_name": "djordje", "link": "https://stackoverflow.com/users/9180236/djordje"}, "edited": false, "score": 0, "creation_date": 1517826520, "post_id": 48619524, "comment_id": 84237348, "body": "Honestly, I don&#39;t know how to change it to look better. I have tried to organize it the best I could, each loop except last small one I devided so it can be easier to read, I also matched all brackets."}, {"owner": {"reputation": 377, "user_id": 6583638, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1zobe.jpg?s=128&g=1", "display_name": "Flying_whale", "link": "https://stackoverflow.com/users/6583638/flying-whale"}, "edited": false, "score": 0, "creation_date": 1517827047, "post_id": 48619524, "comment_id": 84237654, "body": "why don&#39;t you put your brackets right under <code>for, while, if</code> key words? why do you put a tab? Also you should not put your block content right under the brackets, here use tab. put some white lines between your serie of  <code>if</code>s ...  I don&#39;t know, some basic indentation rules. also, there&#39;re some random tabs everywhere. why?"}, {"owner": {"reputation": 209, "user_id": 9180236, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f564cb07c66bd0cb7d993bc4b921615f?s=128&d=identicon&r=PG&f=1", "display_name": "djordje", "link": "https://stackoverflow.com/users/9180236/djordje"}, "edited": false, "score": 0, "creation_date": 1517827375, "post_id": 48619524, "comment_id": 84237863, "body": "But have a look, my brackets are right under <code>for,while and if loop</code>, arent they? Because if I dont put a tab then all closing brackets will be in the same line at the end.."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1517828547, "post_id": 48619524, "comment_id": 84238568, "body": "<code>perltidy -pbp</code> is incredibly useful for formatting code. It applies a set of &#39;best practice&#39; formatting guidelines. (You can configure them to meet a house style, but precisely what style you&#39;re using doesn&#39;t really matter)."}, {"owner": {"reputation": 209, "user_id": 9180236, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f564cb07c66bd0cb7d993bc4b921615f?s=128&d=identicon&r=PG&f=1", "display_name": "djordje", "link": "https://stackoverflow.com/users/9180236/djordje"}, "reply_to_user": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1517829320, "post_id": 48619524, "comment_id": 84239024, "body": "@Sobrique I see, Thank you, I will make use of it!"}, {"owner": {"reputation": 377, "user_id": 6583638, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1zobe.jpg?s=128&g=1", "display_name": "Flying_whale", "link": "https://stackoverflow.com/users/6583638/flying-whale"}, "edited": false, "score": 0, "creation_date": 1517830633, "post_id": 48619524, "comment_id": 84239818, "body": "wait wait wait, you have to put brackets right under the <code>for while ...</code> I mean the bracket directly under the <code>f w ...</code> then you put a tab at the line right under the bracket. until the end of the block. Honnestly I don&#39;t see what&#39;s so complicated"}, {"owner": {"reputation": 377, "user_id": 6583638, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1zobe.jpg?s=128&g=1", "display_name": "Flying_whale", "link": "https://stackoverflow.com/users/6583638/flying-whale"}, "edited": false, "score": 0, "creation_date": 1517830914, "post_id": 48619524, "comment_id": 84239970, "body": "basicly put a tab at the start of each block, 2 tabs if you&#39;re in a sub-bluck, 3 tabs in a sub-sub block, ...  (i mean, number of tabs from the left side of the sheet)"}, {"owner": {"reputation": 209, "user_id": 9180236, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f564cb07c66bd0cb7d993bc4b921615f?s=128&d=identicon&r=PG&f=1", "display_name": "djordje", "link": "https://stackoverflow.com/users/9180236/djordje"}, "reply_to_user": {"reputation": 377, "user_id": 6583638, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1zobe.jpg?s=128&g=1", "display_name": "Flying_whale", "link": "https://stackoverflow.com/users/6583638/flying-whale"}, "edited": false, "score": 0, "creation_date": 1517831041, "post_id": 48619524, "comment_id": 84240044, "body": "@Flying_whale it is not complicated I just didn&#39;t know that that way it will look better and I have many loops.. I will do it next time.."}, {"owner": {"reputation": 377, "user_id": 6583638, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1zobe.jpg?s=128&g=1", "display_name": "Flying_whale", "link": "https://stackoverflow.com/users/6583638/flying-whale"}, "edited": false, "score": 0, "creation_date": 1517831249, "post_id": 48619524, "comment_id": 84240171, "body": "That&#39;s precisely because you have many loops that you have to indent properly, try to edit your code in your post to make it look better ;)"}, {"owner": {"reputation": 209, "user_id": 9180236, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f564cb07c66bd0cb7d993bc4b921615f?s=128&d=identicon&r=PG&f=1", "display_name": "djordje", "link": "https://stackoverflow.com/users/9180236/djordje"}, "reply_to_user": {"reputation": 377, "user_id": 6583638, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1zobe.jpg?s=128&g=1", "display_name": "Flying_whale", "link": "https://stackoverflow.com/users/6583638/flying-whale"}, "edited": false, "score": 0, "creation_date": 1517831860, "post_id": 48619524, "comment_id": 84240496, "body": "@Flying_whale Thanks man for this these useful info, I will edit it know :)"}, {"owner": {"reputation": 209, "user_id": 9180236, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f564cb07c66bd0cb7d993bc4b921615f?s=128&d=identicon&r=PG&f=1", "display_name": "djordje", "link": "https://stackoverflow.com/users/9180236/djordje"}, "reply_to_user": {"reputation": 377, "user_id": 6583638, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1zobe.jpg?s=128&g=1", "display_name": "Flying_whale", "link": "https://stackoverflow.com/users/6583638/flying-whale"}, "edited": false, "score": 0, "creation_date": 1517833158, "post_id": 48619524, "comment_id": 84241241, "body": "@Flying_whale I have changed it, hope it looks a bit better now :)"}, {"owner": {"reputation": 377, "user_id": 6583638, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1zobe.jpg?s=128&g=1", "display_name": "Flying_whale", "link": "https://stackoverflow.com/users/6583638/flying-whale"}, "edited": false, "score": 0, "creation_date": 1517833855, "post_id": 48619524, "comment_id": 84241638, "body": "@djordje that is much better indeed :)  you only forgot to indent your first <code>while</code> and your first <code>if</code>, so you will have to add other tabs on the rest of your lines ;)"}, {"owner": {"reputation": 377, "user_id": 6583638, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1zobe.jpg?s=128&g=1", "display_name": "Flying_whale", "link": "https://stackoverflow.com/users/6583638/flying-whale"}, "edited": false, "score": 0, "creation_date": 1517834032, "post_id": 48619524, "comment_id": 84241747, "body": "(your first <code>while</code> at the same level of <code>open ... </code>  your first <code>if</code> at the same level of the <code>chomp</code>) keep in mind that each line at the same nesting level must be at the same level of indentation"}, {"owner": {"reputation": 209, "user_id": 9180236, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f564cb07c66bd0cb7d993bc4b921615f?s=128&d=identicon&r=PG&f=1", "display_name": "djordje", "link": "https://stackoverflow.com/users/9180236/djordje"}, "reply_to_user": {"reputation": 377, "user_id": 6583638, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1zobe.jpg?s=128&g=1", "display_name": "Flying_whale", "link": "https://stackoverflow.com/users/6583638/flying-whale"}, "edited": false, "score": 0, "creation_date": 1517834622, "post_id": 48619524, "comment_id": 84242097, "body": "@Flying_whale Hope it looks even better now :) I didn&#39;t indent each <code>if loop</code> at the end because there are to much, so I just put whitespace to can be easier to read."}, {"owner": {"reputation": 377, "user_id": 6583638, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1zobe.jpg?s=128&g=1", "display_name": "Flying_whale", "link": "https://stackoverflow.com/users/6583638/flying-whale"}, "edited": false, "score": 0, "creation_date": 1517835102, "post_id": 48619524, "comment_id": 84242411, "body": "@djordje your indentation is fine now, don&#39;t you find your code easier to read? ;)"}, {"owner": {"reputation": 209, "user_id": 9180236, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f564cb07c66bd0cb7d993bc4b921615f?s=128&d=identicon&r=PG&f=1", "display_name": "djordje", "link": "https://stackoverflow.com/users/9180236/djordje"}, "reply_to_user": {"reputation": 377, "user_id": 6583638, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1zobe.jpg?s=128&g=1", "display_name": "Flying_whale", "link": "https://stackoverflow.com/users/6583638/flying-whale"}, "edited": false, "score": 0, "creation_date": 1517835381, "post_id": 48619524, "comment_id": 84242589, "body": "@Flying_whale Yes I do, it is much easier to read now. Thanks! :)"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1517839194, "post_id": 48619524, "comment_id": 84245107, "body": "@djordje: Really? Then it&#39;s astonishing that your opening sentence is almost identical, including the grammar mistakes."}], "owner": {"reputation": 209, "user_id": 9180236, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f564cb07c66bd0cb7d993bc4b921615f?s=128&d=identicon&r=PG&f=1", "display_name": "djordje", "link": "https://stackoverflow.com/users/9180236/djordje"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 42, "favorite_count": 0, "closed_date": 1517824619, "answer_count": 0, "score": 0, "last_activity_date": 1517834545, "creation_date": 1517823627, "last_edit_date": 1517834545, "question_id": 48619524, "link": "https://stackoverflow.com/questions/48619524/calculating-size-of-the-result-and-moving-files-into-another-folder-if-it-fulfil", "closed_reason": "Duplicate", "title": "calculating size of the result and moving files into another folder if it fulfills conditions", "body": "<p>I am trying to calculate distance between protein (<code>ATOM</code>) and ligand atoms (<code>HETATM</code>). Protein atoms I am obtaining from <code>pdb</code> file and ligand atoms I already have seperated in different number of <code>txt</code> files. I am using a <code>substring</code> to seperate coordinates into an array and I am giving each coordinate name (<code>x, y and z</code>). Files that have ligand coordinates look like this:</p>\n\n<p>file 1:</p>\n\n<pre><code>HETATM 2244  C1  QWE H 373      17.735 -17.178  22.612  1.00 26.29           C  \nHETATM 2245  C2  QWE H 373      18.543 -17.350  21.462  1.00 26.22           C  \nHETATM 2246  C3  QWE H 373      19.877 -17.046  21.558  1.00 26.06           C  \nHETATM 2247  C4  QWE H 373      20.401 -16.566  22.766  1.00 26.60           C  \nHETATM 2248  C4A QWE H 373      19.613 -16.358  23.893  1.00 27.46           C  \nHETATM 2249  C5  QWE H 373      20.084 -15.791  25.046  1.00 28.32           C  \nHETATM 2250  C6  QWE H 373      19.241 -15.568  26.114  1.00 27.47           C  \nHETATM 2251  C7  QWE H 373      17.893 -15.971  26.028  1.00 27.79           C  \nHETATM 2252  C8  QWE H 373      17.370 -16.510  24.879  1.00 26.51           C  \nHETATM 2253  C8A QWE H 373      18.205 -16.689  23.809  1.00 26.70           C  \n</code></pre>\n\n<p>file 2:</p>\n\n<pre><code>  HETATM 2225  N   TYS I 363      15.901   2.361  -4.748  1.00 44.75           N  \n    HETATM 2226  CA  TYS I 363      16.482   2.005  -3.448  1.00 44.52           C  \n    HETATM 2227  CB  TYS I 363      15.434   1.805  -2.340  1.00 42.26           C  \n    HETATM 2228  CG  TYS I 363      14.580   3.049  -2.234  1.00 39.78           C  \n    HETATM 2229  CD1 TYS I 363      15.156   4.304  -2.015  1.00 37.81           C  \n    HETATM 2230  CD2 TYS I 363      13.219   2.924  -2.545  1.00 40.71           C  \n    HETATM 2231  CE1 TYS I 363      14.343   5.432  -2.005  1.00 38.74           C\n</code></pre>\n\n<p>Protein cordinates (<code>ATOM</code>) that are beeing seperated from <code>pdb</code> file look like this:</p>\n\n<pre><code>ATOM   2190  O   GLU I 357       7.971  -5.002  -1.496  1.00 41.97           O  \nATOM   2191  CB  GLU I 357       4.752  -5.053  -1.745  1.00 42.96           C  \nATOM   2192  CG  GLU I 357       3.774  -4.690  -2.826  1.00 44.81           C  \nATOM   2193  CD  GLU I 357       3.513  -3.238  -3.102  1.00 46.56           C  \nATOM   2194  OE1 GLU I 357       3.364  -2.632  -2.025  1.00 45.88           O  \nATOM   2195  OE2 GLU I 357       3.416  -2.667  -4.193  1.00 47.58           O  \n</code></pre>\n\n<p>I have written a script that will calculate distances between these protein and ligand atoms and if result of fulfills specific condition it should move <code>ligand txt files</code> into another folder. </p>\n\n<p>This is how part of results look like:</p>\n\n<pre><code>QWE#I#363.txt\n16\n11.2\n2.40023269705252\n3.77980634424569\n4.84684722267991\n4.8225354327366\n4.96742287308016\n5.0893916139358\n5.44698035612393\n5.53698961530541\n5.69511940173338\n6.58882887924706\n8.17976515555306\n8.36770577876636\n8.60629182633264\n8.94395818415985\n4.50089380012459\n5.57823843161979\n</code></pre>\n\n<p>This is the script:</p>\n\n<pre><code>#!/usr/local/bin/perl\n\nuse strict;\nuse warnings;\nuse File::Glob;\n\nmkdir \"covalently_bound\";\nmkdir\"5&lt;dist&gt;2\";\nmkdir\"5&lt;dist&gt;4\";\nmkdir\"6&lt;dist&gt;5\"\n\nfor my $pdbs (glob '*pdb')\n{\n    printf \"%s\\n\", $pdbs;\n    open my $pdb, \"&lt;\" ,$pdbs;\n\n    while (my $pdb_lines = &lt;$pdb&gt;)\n    {\n        chomp($pdb_lines);\n\n        if($pdb_lines=~/^ATOM /)\n        {\n            my @prot_atoms= split '\\t', $pdb_lines;\n            #print \"@prot_atoms\\n\";\n            my @pdb_coord = (substr($pdb_lines, 30, 8),substr($pdb_lines,38,8),substr($pdb_lines,46,8));\n            #print \"@pdb_coord\\n\";\n            my $x = substr($pdb_lines, 30, 8);\n            my $y = substr($pdb_lines,38,8);\n            my $z = substr($pdb_lines,46,8);\n\n            foreach my $txt (glob '*txt')\n            {\n                printf \"%s\\n\", $txt;\n                open my $fh, \"&lt;\" ,$txt;\n                my @lines= &lt;$fh&gt;;\n                my $file_sz = scalar@lines;\n                print \"$file_sz\\n\";\n                #print \"@lines\\n\";\n                my $c;\n\n                for ($c=0; $c&lt;=$#lines; $c++)\n                {\n                    chomp ($lines[$c]);\n\n                    if ($lines[$c] =~ m/^HETATM/)\n                    {   \n                         my @lig_atoms= split '\\t', $lines [$c];\n                         #print \"@lig_atoms\\n\";\n                         my @lig_coord = (substr($lines [$c], 30, 8),substr($lines [$c],38,8),substr($lines [$c],46,8));\n                         #print \"@lig_coord\\n\";\n                         my $x1 = substr($lines [$c],30, 8);\n                         my $y1 = substr($lines [$c],38,8);\n                         my $z1 = substr($lines [$c],46,8);\n\n                         my $dist = sqrt( ($x-$x1)**2 + ($y-$y1)**2 + ($z-$z1)**2 );\n                         print \"$dist\\n\";\n                         #my $dist_sz = ?;     #Here I am not sure how to calculate the size of the result and to include it into if loop.\n\n                         if ($dist &lt; 2)\n                         {\n                             close ($fh);   \n                             system (\"mv $txt covalently_bound\");\n                             last;\n                         }\n\n                         if ($dist_sz &gt;= 70% and 4&lt;$dist&gt;2 )\n                         {\n                             system (\"mv $txt 4&lt;dist&gt;2\");\n                         }\n\n                         if ($dist_sz &gt;= 70% and 5&lt;$dist&gt;4)\n                         {\n                             system (\"mv $txt 5&lt;dist&gt;4\");\n                         }\n\n                         if ($dist_sz &gt;= 70% and 6&lt;$dist&gt;5)\n                         {\n                             system (\"mv $txt 6&lt;dist&gt;5\");\n                         } \n                    }   \n                }\n            }\n        }\n    }    \n}\n</code></pre>\n\n<p>Script is working, I don't get any error but I am encountering two problems that I don't know how to solve:</p>\n\n<p><code>1st:</code> </p>\n\n<p>I want to calculate the distance between each ligand atom (<code>HETATM</code>) and all protein atoms (<code>ATOM</code>). So, <code>HETATM1</code> with <code>ATOM1</code>; <code>HETATM2</code> with <code>ATOM1</code>; <code>HETATM3</code> with <code>ATOM1</code> and so on.</p>\n\n<p><code>2nd:</code></p>\n\n<p>The result of distances should be huge for each calculation (or for each ligand file). I want to check what is the size of each result and to set up a condition that if more then <code>70%</code> of the result gives values between different numbers then move it into another directory.</p>\n\n<p>I have no idea how should I do these two things, been struggling for a few days, if anybody can help or give some suggestion I would appreciate it!</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "edited": false, "score": 0, "creation_date": 1517823149, "post_id": 48619131, "comment_id": 84235304, "body": "You can check the <code>%INC</code> hash which has the full file path of each used module:  <code>perl -e &#39;use Data::Dumper; print Dumper(\\%INC);&#39;</code>"}, {"owner": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "edited": false, "score": 0, "creation_date": 1517823354, "post_id": 48619131, "comment_id": 84235427, "body": "Another example: <code>perl -e &#39;use WWW::Mechanize; print $INC{&quot;WWW&#47;Mechanize.pm&quot;} . &quot;\\n&quot;;&#39;</code>"}], "answers": [{"comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1517824100, "post_id": 48619611, "comment_id": 84235899, "body": "While you can find the module&#39;s name from the sub&#39;s name <a href=\"https://stackoverflow.com/a/3684995/4653379\">using <code>Devel::Peek</code></a>"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1517824111, "post_id": 48619611, "comment_id": 84235901, "body": "This doesn&#39;t tell you which source file contains the definition of a given method unless there is no inheritance."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1517824275, "post_id": 48619611, "comment_id": 84236005, "body": "And there is also <a href=\"http://search.cpan.org/~rgarcia/Sub-Identify-0.14/lib/Sub/Identify.pm\" rel=\"nofollow noreferrer\">Sub::Identify</a> and, better yet, <a href=\"http://search.cpan.org/~pevans/Scalar-List-Utils-1.49/lib/Sub/Util.pm\" rel=\"nofollow noreferrer\">Sub::Util</a>"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1517824671, "post_id": 48619611, "comment_id": 84236265, "body": "With <code>Sub::Identify</code> and <code>Sub::Util</code> it&#39;s one simple call,  <code>sub_name</code> or <code>subname</code>.  So they can query with the sub name, and then do the <code>%INC</code> bit. (<code>Devel::Peek</code> does involve more.)"}, {"owner": {"reputation": 1446, "user_id": 5411628, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/1b3eebf82dacd8e7d2498c286631ce3e?s=128&d=identicon&r=PG&f=1", "display_name": "nadavgam", "link": "https://stackoverflow.com/users/5411628/nadavgam"}, "edited": false, "score": 0, "creation_date": 1517825283, "post_id": 48619611, "comment_id": 84236606, "body": "Thank you very much ! and if the method is from another perl file (.pl) and not module , will these solutions also work ?"}], "tags": [], "owner": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "is_accepted": false, "score": 2, "last_activity_date": 1517825262, "last_edit_date": 1592644375, "creation_date": 1517823918, "answer_id": 48619611, "question_id": 48619131, "link": "https://stackoverflow.com/questions/48619131/getting-methods-source-file-location-from-inside-the-code/48619611#48619611", "title": "getting method&#39;s source file location from inside the code", "body": "<p>You can check inside the <code>%INC</code> hash as documented in <a href=\"https://perldoc.perl.org/perlvar.html\" rel=\"nofollow noreferrer\" title=\"perldoc perlvar\">perldoc perlvar</a>:</p>\n<blockquote>\n<p>%INC</p>\n<p>The hash %INC contains entries for each filename included via the do, require, or use operators. The key is the filename you specified (with module names converted to pathnames), and the value is the location of the file found. The require operator uses this hash to determine whether a particular file has already been included.</p>\n<p>If the file was loaded via a hook (e.g. a subroutine reference, see require for a description of these hooks), this hook is by default inserted into %INC in place of a filename. Note, however, that the hook may have set the %INC entry by itself to provide some more specific info.</p>\n</blockquote>\n<p>Here is a simple example:</p>\n<pre><code>perl -e 'use WWW::Mechanize; print $ENV{&quot;WWW/Mechanize.pm&quot;} . &quot;\\n&quot;;\n</code></pre>\n<p><strong>output</strong></p>\n<pre><code>/usr/local/share/perl5/WWW/Mechanize.pm\n</code></pre>\n<p>As suggested by @zdim, there is also the rather user-friendly <a href=\"http://search.cpan.org/%7Ergarcia/Sub-Identify-0.14/lib/Sub/Identify.pm\" rel=\"nofollow noreferrer\">Sub::Identify</a> which can be used:</p>\n<pre><code>use Sub::Identify qw( :all );\nuse WWW::Mechanize;\n\nmy ($file, $line) = get_code_location( \\&amp;WWW::Mechanize::get );\nprint &quot;File $file, Line $line\\n&quot;;'\n</code></pre>\n<p><strong>output</strong></p>\n<pre><code>File /usr/local/share/perl5/WWW/Mechanize.pm, Line 106\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 1, "last_activity_date": 1517848552, "creation_date": 1517848552, "answer_id": 48627217, "question_id": 48619131, "link": "https://stackoverflow.com/questions/48619131/getting-methods-source-file-location-from-inside-the-code/48627217#48627217", "title": "getting method&#39;s source file location from inside the code", "body": "<p>To find the package in which the method was found:</p>\n\n<pre><code>use mro          qw( );\nuse Scalar::Util qw( blessed );\n\nsub get_method_package {\n   my ($obj, $method_name) = @_;\n   defined( my $class = blessed($obj) )\n      or return undef;\n\n   for my $pkg_name (@{ mro::get_linear_isa($class) }) {\n      my $pkg = do {\n         no strict qw( refs );\n         *{ $pkg_name.'::'.$method_name }\n      };\n      return $pkg_name if *{$pkg}{CODE};\n   }\n\n   return undef;\n}\n</code></pre>\n\n<p>Note: Doesn't work if the method is autoloaded.</p>\n\n<hr>\n\n<p>To find the package in which the method was compiled:</p>\n\n<pre><code>use B qw( svref_2object );\n\nsub get_method_package {\n   my ($obj, $method_name) = @_;\n   my $method_ref = $obj-&gt;can($method_name)\n      or return undef;\n\n   return svref_2object($method_ref)-&gt;GV-&gt;STASH-&gt;NAME;\n}\n</code></pre>\n\n<p>Note: Only works for autoloaded methods if can is properly overridden.</p>\n\n<p>Note: Works for methods implemented in XS.</p>\n\n<hr>\n\n<p>To find the file in which the method was compiled:</p>\n\n<pre><code>use B qw( svref_2object );\n\nsub get_method_file {\n   my ($obj, $method_name) = @_;\n   my $method_ref = $obj-&gt;can($method_name)\n      or return undef;\n\n   return svref_2object($method_ref)-&gt;FILE;\n}\n</code></pre>\n\n<p>Note: Only works for autoloaded methods if can is properly overridden.</p>\n\n<p>Note: Only works well for Perl methods. For methods implemented in XS, it returns the name of the .c file with no path. For example, returns <code>XS.c</code> for <code>JSON::XS-&gt;encode</code>. (This may vary by system, and by XS loader.)</p>\n"}], "owner": {"reputation": 1446, "user_id": 5411628, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/1b3eebf82dacd8e7d2498c286631ce3e?s=128&d=identicon&r=PG&f=1", "display_name": "nadavgam", "link": "https://stackoverflow.com/users/5411628/nadavgam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 73, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1517848552, "creation_date": 1517822186, "last_edit_date": 1517822279, "question_id": 48619131, "link": "https://stackoverflow.com/questions/48619131/getting-methods-source-file-location-from-inside-the-code", "title": "getting method&#39;s source file location from inside the code", "body": "<p>Is there a way in <strong>perl</strong>, to get the <strong>source file location</strong> of a method ?\nFor example if method - \"myMathod\" from module \"methodModule\" is invoked from perl script - \"myScript\" . And lets say 'myModule' resides in path : /path/to/myModule,\nso is there a way to do something like this :\ngetSourceFileLocationOf(\"methodModule\") == \"/path/to/myModule\"</p>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 37822, "user_id": 1231450, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/b9c98b4ce12bf9fd925d8c35c8861bb2?s=128&d=identicon&r=PG", "display_name": "Jan", "link": "https://stackoverflow.com/users/1231450/jan"}, "edited": false, "score": 1, "creation_date": 1517820392, "post_id": 48618517, "comment_id": 84233740, "body": "Please refer to a tutorial, e.g. <a href=\"http://regexone.com\" rel=\"nofollow noreferrer\">regexone.com</a> as this is a really basic question."}], "answers": [{"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": true, "score": 2, "last_activity_date": 1517820377, "creation_date": 1517820377, "answer_id": 48618642, "question_id": 48618517, "link": "https://stackoverflow.com/questions/48618517/extract-a-word-from-a-sentence-in-perl/48618642#48618642", "title": "Extract a word from a sentence in perl", "body": "<p>Like this perhaps</p>\n\n<pre><code>use strict;\nuse warnings 'all';\nuse feature 'say';\n\nmy $s = 'My name is Sammy Tyrell';\n\nsay $1 if $s =~/(?:my name is|i am) (\\S+)/i;\n</code></pre>\n\n<h3>output</h3>\n\n<pre><code>Sammy\n</code></pre>\n\n<p><code>(?: ... )</code> groups text without capturing it</p>\n\n<p>The <code>/i</code> modifier enables case-independent matching, to avoid having to write <code>(M|m)y</code> etc.</p>\n\n<p>The <code>\\S</code> matches any non-space character, so <code>(\\S+)</code> matches and captures all of <code>Sammy</code></p>\n"}], "owner": {"reputation": 51, "user_id": 8612512, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/0c52f6f072dc0975e634e64eb34a8162?s=128&d=identicon&r=PG&f=1", "display_name": "somethingelse", "link": "https://stackoverflow.com/users/8612512/somethingelse"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 129, "favorite_count": 0, "accepted_answer_id": 48618642, "answer_count": 1, "score": -4, "last_activity_date": 1554146071, "creation_date": 1517819821, "last_edit_date": 1554146071, "question_id": 48618517, "link": "https://stackoverflow.com/questions/48618517/extract-a-word-from-a-sentence-in-perl", "title": "Extract a word from a sentence in perl", "body": "<p>I am trying to extract a certain word from a sentence and store it in a variable in Perl. I don't quite understand match groups and how it works. For example, I want to extract Sammy from <code>My name is Sammy Tyrell</code>.</p>\n\n<p>I have this:</p>\n\n<pre><code>^((M|m)y name is\\s)|((I|i) am\\s)?[(A-Za-z)]*\n</code></pre>\n\n<p>And this is matching <code>Sammy Tyrell</code>. But I don't know how to extract <code>Sammy</code> from it.</p>\n"}, {"tags": ["perl"], "answers": [{"tags": [], "owner": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "is_accepted": true, "score": 5, "last_activity_date": 1517788274, "creation_date": 1517788274, "answer_id": 48614180, "question_id": 48613931, "link": "https://stackoverflow.com/questions/48613931/how-to-perform-merging-of-keys-for-common-values-in-hash-of-hash-in-perl/48614180#48614180", "title": "how to perform merging of keys for common values in hash of hash in perl", "body": "<pre><code>my %h=(\n    '2018-01-26' =&gt; 'zzz00175002802;newData1',\n    '2018-01-20' =&gt; 'xxy00171329968;data1',\n    '2018-01-27' =&gt; 'xxy00171329968;data1',\n    '2018-01-28' =&gt; 'xxy00171329968;data1',\n    '2018-01-04' =&gt; 'www00171510082;ResponderData',\n    '2018-01-17' =&gt; 'rrr00175002256;try data',\n    '2018-01-05' =&gt; 'aaa00175033226;response try', \n    '2018-01-08' =&gt; 'aaa00175033226;response try'\n);\nmy %t;\npush @{ $t{ $h{$_} } }, $_ for keys %h;\n\nmy %result = map { join(\",\", @{$t{$_}}) =&gt; $_ } keys %t;\n\nuse Data::Dumper; print Dumper \\%result;\n</code></pre>\n\n<p>output</p>\n\n<pre><code>$VAR1 = {\n      '2018-01-17' =&gt; 'rrr00175002256;try data',\n      '2018-01-05,2018-01-08' =&gt; 'aaa00175033226;response try',\n      '2018-01-26' =&gt; 'zzz00175002802;newData1',\n      '2018-01-04' =&gt; 'www00171510082;ResponderData',\n      '2018-01-27,2018-01-20,2018-01-28' =&gt; 'xxy00171329968;data1'\n    };\n</code></pre>\n"}], "owner": {"reputation": 147, "user_id": 8267952, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/b2ef54d99c06b6bf90bfe866cd939f2b?s=128&d=identicon&r=PG&f=1", "display_name": "ran1n", "link": "https://stackoverflow.com/users/8267952/ran1n"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 68, "favorite_count": 0, "accepted_answer_id": 48614180, "answer_count": 1, "score": 0, "last_activity_date": 1517788274, "creation_date": 1517785907, "question_id": 48613931, "link": "https://stackoverflow.com/questions/48613931/how-to-perform-merging-of-keys-for-common-values-in-hash-of-hash-in-perl", "title": "how to perform merging of keys for common values in hash of hash in perl", "body": "<p>I am working on a below hash of hashes in perl, wherein i have some values in\ninner hash that are same for different key timestamps. Is there any way to merge the timestamp keys for similar values?</p>\n\n<pre><code>'Test Responder Data String' =&gt; { \n                        '2018-01-26' =&gt; 'zzz00175002802;newData1',\n                        '2018-01-20' =&gt; 'xxy00171329968;data1',\n                        '2018-01-27' =&gt; 'xxy00171329968;data1',\n                        '2018-01-28' =&gt; 'xxy00171329968;data1'\n                        '2018-01-04' =&gt; 'www00171510082;ResponderData',\n                        '2018-01-17' =&gt; 'rrr00175002256;try data',\n                        '2018-01-05' =&gt; 'aaa00175033226;response try', \n                        '2018-01-08' =&gt; 'aaa00175033226;response try'\n                       }\n</code></pre>\n\n<p>Expected Result:   </p>\n\n<pre><code>'Test Responder Data String' =&gt; { \n                        '2018-01-26'                       =&gt; 'zzz00175002802;newData1',\n                        '2018-01-20,2018-01-27,2018-01-28' =&gt; 'xxy00171329968;data1',\n                        '2018-01-04'                       =&gt; 'www00171510082;ResponderData',\n                        '2018-01-17'                       =&gt; 'rrr00175002256;try data',\n                        '2018-01-05,2018-01-08'            =&gt; 'aaa00175033226;response try'                                                                                 \n                       }\n</code></pre>\n"}, {"tags": ["sql", "perl", "awk", "sed", "jq"], "comments": [{"owner": {"reputation": 70791, "user_id": 997358, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f849cfde4e526e22e916fa69103ef7e7?s=128&d=identicon&r=PG", "display_name": "peak", "link": "https://stackoverflow.com/users/997358/peak"}, "edited": false, "score": 0, "creation_date": 1517776279, "post_id": 48612588, "comment_id": 84222068, "body": "You&#39;d probably be better off doing everything in jq.  Could you please post a sample of the input in accordance with <a href=\"http://stackoverflow.com/help/mcve\">stackoverflow.com/help/mcve</a>"}, {"owner": {"reputation": 35, "user_id": 9313775, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-VLAjBqVFnCE/AAAAAAAAAAI/AAAAAAAAAE8/Ro8YGwFlp_A/photo.jpg?sz=128", "display_name": "Argenis Ramirez", "link": "https://stackoverflow.com/users/9313775/argenis-ramirez"}, "reply_to_user": {"reputation": 70791, "user_id": 997358, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f849cfde4e526e22e916fa69103ef7e7?s=128&d=identicon&r=PG", "display_name": "peak", "link": "https://stackoverflow.com/users/997358/peak"}, "edited": false, "score": 0, "creation_date": 1517776589, "post_id": 48612588, "comment_id": 84222174, "body": "hi @peak, this is the sample: [link] <a href=\"https://api.binance.com/api/v1/klines?symbol=ETHBTC&amp;interval=5m\" rel=\"nofollow noreferrer\">api.binance.com/api/v1/klines?symbol=ETHBTC&amp;interval=5m</a>"}], "answers": [{"comments": [{"owner": {"reputation": 35, "user_id": 9313775, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-VLAjBqVFnCE/AAAAAAAAAAI/AAAAAAAAAE8/Ro8YGwFlp_A/photo.jpg?sz=128", "display_name": "Argenis Ramirez", "link": "https://stackoverflow.com/users/9313775/argenis-ramirez"}, "edited": false, "score": 0, "creation_date": 1517779070, "post_id": 48612927, "comment_id": 84222805, "body": "Thank you jas, its work, i solved with jq solution of @peak."}, {"owner": {"reputation": 10152, "user_id": 2229272, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oisED.png?s=128&g=1", "display_name": "jas", "link": "https://stackoverflow.com/users/2229272/jas"}, "reply_to_user": {"reputation": 35, "user_id": 9313775, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-VLAjBqVFnCE/AAAAAAAAAAI/AAAAAAAAAE8/Ro8YGwFlp_A/photo.jpg?sz=128", "display_name": "Argenis Ramirez", "link": "https://stackoverflow.com/users/9313775/argenis-ramirez"}, "edited": false, "score": 0, "creation_date": 1517823429, "post_id": 48612927, "comment_id": 84235468, "body": "Great. I agree that the jq solution is the better option in this case."}], "tags": [], "owner": {"reputation": 10152, "user_id": 2229272, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oisED.png?s=128&g=1", "display_name": "jas", "link": "https://stackoverflow.com/users/2229272/jas"}, "is_accepted": false, "score": 1, "last_activity_date": 1517777760, "creation_date": 1517777760, "answer_id": 48612927, "question_id": 48612588, "link": "https://stackoverflow.com/questions/48612588/awk-order-foreach-12-lines-to-insert-query/48612927#48612927", "title": "Awk, order foreach 12 lines to insert query", "body": "<pre><code>$ awk 'BEGIN {RS=\"\"; OFS=\",\"} {$1=$1; $0=\"(\"$0\")\"}1' file\n(1517773500000,0.10250100,0.10275700,0.10243500,0.10256600,257.26700000,1517773799999,26.38912220,1229,104.32200000,10.70579910,0)\n(1517773800000,0.10256600,0.10268000,0.10231600,0.10243400,310.64600000,1517774099999,31.83806883,1452,129.70500000,13.29758266,0)\n(1517774100000,0.10243400,0.10257500,0.10211800,0.10230000,359.06300000,1517774399999,36.73708621,1296,154.78500000,15.84041910,0)\n</code></pre>\n\n<p><strong>RS=\"\"</strong>:<br>\nTreat groups of lines separated one or more blank lines as a record</p>\n\n<p><strong>OFS=\",\"</strong><br>\nSet the output separator to be a \",\"</p>\n\n<p><strong>$1=$1</strong><br>\nReconstitute the line, replacing the input separators with the output separator</p>\n\n<p><strong>$0=\"(\"$0\")\"</strong><br>\nSurround the record with parens</p>\n\n<p><strong>1</strong><br>\nPrint the record</p>\n"}, {"tags": [], "owner": {"reputation": 70791, "user_id": 997358, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f849cfde4e526e22e916fa69103ef7e7?s=128&d=identicon&r=PG", "display_name": "peak", "link": "https://stackoverflow.com/users/997358/peak"}, "is_accepted": true, "score": 1, "last_activity_date": 1517825671, "last_edit_date": 1517825671, "creation_date": 1517777932, "answer_id": 48612952, "question_id": 48612588, "link": "https://stackoverflow.com/questions/48612588/awk-order-foreach-12-lines-to-insert-query/48612952#48612952", "title": "Awk, order foreach 12 lines to insert query", "body": "<p>Here's an all-jq solution:  </p>\n\n<pre><code>.[] | .[0:12] | @tsv | gsub(\"\\t\";\",\") | \"(\\(.))\"\n</code></pre>\n\n<p>In the sample, all the subarrays have length 12, so you might be able to drop the <code>.[0:12]</code> part of the pipeline. If using jq 1.5 or later, you could use <code>join(\u201c,\u201d)</code> instead of the @tsv|gsub portion of the pipeline. You might, for example, want to consider:</p>\n\n<pre><code>.[] | join(\u201c,\u201d) | \u201c(\\(.))\u201d.   # jq 1.5 or later\n</code></pre>\n\n<p>Invocation: use the -r command-line option</p>\n\n<p>Sample output:</p>\n\n<pre><code>(1517627400000,0.10452300,0.10499000,0.10418200,0.10449400,819.50400000,1517627699999,85.57150693,2340,452.63400000,47.27213035,0)\n(1517627700000,0.10435700,0.10449200,0.10366000,0.10370000,717.37000000,1517627999999,74.60582079,1996,321.25500000,33.42273846,0)\n(1517628000000,0.10376600,0.10390000,0.10366000,0.10370400,519.59400000,1517628299999,53.88836170,1258,239.89300000,24.88613854,0)\n</code></pre>\n"}], "owner": {"reputation": 35, "user_id": 9313775, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-VLAjBqVFnCE/AAAAAAAAAAI/AAAAAAAAAE8/Ro8YGwFlp_A/photo.jpg?sz=128", "display_name": "Argenis Ramirez", "link": "https://stackoverflow.com/users/9313775/argenis-ramirez"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 67, "favorite_count": 0, "accepted_answer_id": 48612952, "answer_count": 2, "score": 0, "last_activity_date": 1517825671, "creation_date": 1517775482, "last_edit_date": 1517824146, "question_id": 48612588, "link": "https://stackoverflow.com/questions/48612588/awk-order-foreach-12-lines-to-insert-query", "title": "Awk, order foreach 12 lines to insert query", "body": "<p>I have the following script:</p>\n\n<pre><code>curl -s 'https://someonepage=5m' | jq '.[]|.[0],.[1],.[2],.[3],.[4],.[5],.[6],.[7],.[8],.[9],.[10],.[11],.[12]' | perl -p -e 's/\\\"//g' |awk '/^[0-9]/{print; if (++onr%12 == 0) print \"\"; }'\n</code></pre>\n\n<p>This is part of result:</p>\n\n<pre><code>1517773500000\n0.10250100\n0.10275700\n0.10243500\n0.10256600\n257.26700000\n1517773799999\n26.38912220\n1229\n104.32200000\n10.70579910\n0\n\n1517773800000\n0.10256600\n0.10268000\n0.10231600\n0.10243400\n310.64600000\n1517774099999\n31.83806883\n1452\n129.70500000\n13.29758266\n0\n\n1517774100000\n0.10243400\n0.10257500\n0.10211800\n0.10230000\n359.06300000\n1517774399999\n36.73708621\n1296\n154.78500000\n15.84041910\n0\n</code></pre>\n\n<p>I want to insert this data in a MySQL database. I want for each line this result:</p>\n\n<pre><code>(1517773800000,0.10256600,0.10268000,0.10231600,0.10243400,310.64600000,1517774099999,31.83806883,1452,129.70500000,13.29758266,0)\n\n(1517774100000,0.10243400,0.10257500,0.10211800,0.10230000,359.06300000,151774399999,36.73708621,1296,154.78500000,15.84041910,0)\n</code></pre>\n\n<p>I need merge lines each 12 lines, any can help me for get this result.</p>\n"}, {"tags": ["php", "perl", "shell-exec"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user8011997"}, "edited": false, "score": 1, "creation_date": 1517725572, "post_id": 48605376, "comment_id": 84207206, "body": "why not run all that in php in the first place?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 2, "creation_date": 1517726189, "post_id": 48605376, "comment_id": 84207283, "body": "What do you mean by &quot;it ask to open perl file&quot;?"}, {"owner": {"reputation": 703, "user_id": 2184166, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eee779cfc4a9754b83c52725c5e7b345?s=128&d=identicon&r=PG", "display_name": "ob-ivan", "link": "https://stackoverflow.com/users/2184166/ob-ivan"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1517741836, "post_id": 48605376, "comment_id": 84210901, "body": "@ikegami I think it tries to download the file instead of executing it. @amit try running perl and pass the script as an argument: <code>shell_exec(&#39;perl app.pl&#39;)</code>"}, {"owner": {"reputation": 65, "user_id": 4387586, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh4.googleusercontent.com/-wW8uMURariM/AAAAAAAAAAI/AAAAAAAAAJw/OKRTw0K__5U/photo.jpg?sz=128", "display_name": "amit nindroda", "link": "https://stackoverflow.com/users/4387586/amit-nindroda"}, "reply_to_user": {"reputation": 703, "user_id": 2184166, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eee779cfc4a9754b83c52725c5e7b345?s=128&d=identicon&r=PG", "display_name": "ob-ivan", "link": "https://stackoverflow.com/users/2184166/ob-ivan"}, "edited": false, "score": 0, "creation_date": 1517811254, "post_id": 48605376, "comment_id": 84230298, "body": "@ob-ivan i tried but still not display anything"}, {"owner": {"reputation": 703, "user_id": 2184166, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eee779cfc4a9754b83c52725c5e7b345?s=128&d=identicon&r=PG", "display_name": "ob-ivan", "link": "https://stackoverflow.com/users/2184166/ob-ivan"}, "edited": false, "score": 0, "creation_date": 1517820348, "post_id": 48605376, "comment_id": 84233714, "body": "What is the result of <code>var_dump($result)</code>? Have you tried simplifying your perl script to just <code>print &quot;hi\\n&quot;</code>? Do the files reside in the same folder? Do you get any output if you enable error reporting: <a href=\"https://stackoverflow.com/questions/1053424/how-do-i-get-php-errors-to-display\" title=\"how do i get php errors to display\">stackoverflow.com/questions/1053424/&hellip;</a> ?"}, {"owner": {"reputation": 65, "user_id": 4387586, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh4.googleusercontent.com/-wW8uMURariM/AAAAAAAAAAI/AAAAAAAAAJw/OKRTw0K__5U/photo.jpg?sz=128", "display_name": "amit nindroda", "link": "https://stackoverflow.com/users/4387586/amit-nindroda"}, "reply_to_user": {"reputation": 703, "user_id": 2184166, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eee779cfc4a9754b83c52725c5e7b345?s=128&d=identicon&r=PG", "display_name": "ob-ivan", "link": "https://stackoverflow.com/users/2184166/ob-ivan"}, "edited": false, "score": 0, "creation_date": 1517825325, "post_id": 48605376, "comment_id": 84236640, "body": "@ob-ivan yes in the script file i just keep print &quot;hi\\n&quot;  and i display var_dump($result) it displays NULL as output."}], "owner": {"reputation": 65, "user_id": 4387586, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh4.googleusercontent.com/-wW8uMURariM/AAAAAAAAAAI/AAAAAAAAAJw/OKRTw0K__5U/photo.jpg?sz=128", "display_name": "amit nindroda", "link": "https://stackoverflow.com/users/4387586/amit-nindroda"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 112, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1518315469, "creation_date": 1517725344, "question_id": 48605376, "link": "https://stackoverflow.com/questions/48605376/php-perl-script-can-not-run-using-shell-exec", "title": "php perl script can not run using shell_exec", "body": "<p>i am trying to execute perl script using php shell_excel function. but instead of printing output it ask to open perl file when i execute php script. </p>\n\n<p>i tried below </p>\n\n<pre><code>$result = shell_exec('app.pl');\n</code></pre>\n\n<p>app.pl contains below script </p>\n\n<pre><code>#!/usr/local/bin/perl\n\n$count = 0;\nwhile (&lt;stdin&gt;) {\n    @w = split;\n    $count++;\n    for ($i=0; $i&lt;=$#w; $i++) {\n    $s[$i] += $w[$i];\n    }\n}\n\nfor ($i=0; $i&lt;=$#w; $i++) {\n    print $s[$i]/$count, \"\\t\";\n}\n\nprint \"\\n\";\n\nprint \"hi\";\n</code></pre>\n\n<p>any suggestion ?</p>\n"}, {"tags": ["regex", "bash", "perl", "awk", "sed"], "comments": [{"owner": {"reputation": 5895, "user_id": 2834978, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05b09a797fd0c59d1627b30fb4cdba01?s=128&d=identicon&r=PG&f=1", "display_name": "Luis Mu&#241;oz", "link": "https://stackoverflow.com/users/2834978/luis-mu%c3%b1oz"}, "edited": false, "score": 0, "creation_date": 1517695612, "post_id": 48602451, "comment_id": 84201659, "body": "Tested with your string and looks like this could work: <code>sed -re &#39;s&#47;\\t+&#47;\\n&#47;g&#39; test.txt</code>"}, {"owner": {"reputation": 7030, "user_id": 805031, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/093c4af6a8398df55385798583ab96c4?s=128&d=identicon&r=PG", "display_name": "TryTryAgain", "link": "https://stackoverflow.com/users/805031/trytryagain"}, "reply_to_user": {"reputation": 5895, "user_id": 2834978, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05b09a797fd0c59d1627b30fb4cdba01?s=128&d=identicon&r=PG&f=1", "display_name": "Luis Mu&#241;oz", "link": "https://stackoverflow.com/users/2834978/luis-mu%c3%b1oz"}, "edited": false, "score": 0, "creation_date": 1517695913, "post_id": 48602451, "comment_id": 84201754, "body": "@LuisMu&#241;oz that will add a new line for all tabs/columns, I only want new lines within the tags column. I tested what you provided and although it does get close (new lines are added before each tab in the tags column), it also ruins the rest of the data."}, {"owner": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "edited": false, "score": 0, "creation_date": 1517697792, "post_id": 48602451, "comment_id": 84202305, "body": "Are you just trying to replace tabs with newlines when they&#39;re within double quotes?"}, {"owner": {"reputation": 7030, "user_id": 805031, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/093c4af6a8398df55385798583ab96c4?s=128&d=identicon&r=PG", "display_name": "TryTryAgain", "link": "https://stackoverflow.com/users/805031/trytryagain"}, "reply_to_user": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "edited": false, "score": 0, "creation_date": 1517698060, "post_id": 48602451, "comment_id": 84202375, "body": "@EdMorton I think that&#39;s a safe scenario to go with, yes."}], "answers": [{"comments": [{"owner": {"reputation": 7030, "user_id": 805031, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/093c4af6a8398df55385798583ab96c4?s=128&d=identicon&r=PG", "display_name": "TryTryAgain", "link": "https://stackoverflow.com/users/805031/trytryagain"}, "edited": false, "score": 0, "creation_date": 1517697889, "post_id": 48602813, "comment_id": 84202337, "body": "Brilliant, it does indeed work! Can you please break down and describe the expression? Curious how it works on multiple matches as it does even though you apparently only use two capture groups?"}, {"owner": {"reputation": 7030, "user_id": 805031, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/093c4af6a8398df55385798583ab96c4?s=128&d=identicon&r=PG", "display_name": "TryTryAgain", "link": "https://stackoverflow.com/users/805031/trytryagain"}, "edited": false, "score": 0, "creation_date": 1517698140, "post_id": 48602813, "comment_id": 84202389, "body": "Also, I&#39;d be curious if anyone can make this work with OSX sed, this works fine with GNU sed, but if it could more portable that would be great."}, {"owner": {"reputation": 5895, "user_id": 2834978, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05b09a797fd0c59d1627b30fb4cdba01?s=128&d=identicon&r=PG&f=1", "display_name": "Luis Mu&#241;oz", "link": "https://stackoverflow.com/users/2834978/luis-mu%c3%b1oz"}, "edited": false, "score": 0, "creation_date": 1517698550, "post_id": 48602813, "comment_id": 84202511, "body": "this is the portable version I think: <code>sed -e &#39;:A;s&#47;\\(&quot;[^\\t]*\\)\\t\\(.*&quot;\\)&#47;\\1\\n\\2&#47;;tA&#39; test.txt</code>"}, {"owner": {"reputation": 7030, "user_id": 805031, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/093c4af6a8398df55385798583ab96c4?s=128&d=identicon&r=PG", "display_name": "TryTryAgain", "link": "https://stackoverflow.com/users/805031/trytryagain"}, "reply_to_user": {"reputation": 5895, "user_id": 2834978, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05b09a797fd0c59d1627b30fb4cdba01?s=128&d=identicon&r=PG&f=1", "display_name": "Luis Mu&#241;oz", "link": "https://stackoverflow.com/users/2834978/luis-mu%c3%b1oz"}, "edited": false, "score": 2, "creation_date": 1517698615, "post_id": 48602813, "comment_id": 84202520, "body": "@LuisMu&#241;oz <code>\\n</code> is not portable, unfortunately."}, {"owner": {"reputation": 5895, "user_id": 2834978, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05b09a797fd0c59d1627b30fb4cdba01?s=128&d=identicon&r=PG&f=1", "display_name": "Luis Mu&#241;oz", "link": "https://stackoverflow.com/users/2834978/luis-mu%c3%b1oz"}, "edited": false, "score": 0, "creation_date": 1517698698, "post_id": 48602813, "comment_id": 84202546, "body": "amazing! didn&#39;t know that"}, {"owner": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "edited": false, "score": 0, "creation_date": 1517698727, "post_id": 48602813, "comment_id": 84202554, "body": "The portable way to use a newline in sed is a backslash followed by a literal newline character."}, {"owner": {"reputation": 5895, "user_id": 2834978, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05b09a797fd0c59d1627b30fb4cdba01?s=128&d=identicon&r=PG&f=1", "display_name": "Luis Mu&#241;oz", "link": "https://stackoverflow.com/users/2834978/luis-mu%c3%b1oz"}, "edited": false, "score": 0, "creation_date": 1517698781, "post_id": 48602813, "comment_id": 84202567, "body": "how about using \\r in MacOSX?"}, {"owner": {"reputation": 7030, "user_id": 805031, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/093c4af6a8398df55385798583ab96c4?s=128&d=identicon&r=PG", "display_name": "TryTryAgain", "link": "https://stackoverflow.com/users/805031/trytryagain"}, "reply_to_user": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "edited": false, "score": 0, "creation_date": 1517698845, "post_id": 48602813, "comment_id": 84202586, "body": "@EdMorton, yes, but for some reason that isn&#39;t working with this answer...unless I&#39;m just breaking it some other way in trying that."}, {"owner": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "edited": false, "score": 1, "creation_date": 1517698980, "post_id": 48602813, "comment_id": 84202625, "body": "TryTryAgain - I highly doubt if any of the sed scripts we&#39;ve seen so far are portable, as soon as you veer of <code>s&#47;old&#47;new&#47;</code> with sed you&#39;re going down the rabbit hole of non-portable constructs. Event <code>\\t</code> is non-portable - you need a literal tab character for portability."}, {"owner": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "reply_to_user": {"reputation": 5895, "user_id": 2834978, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05b09a797fd0c59d1627b30fb4cdba01?s=128&d=identicon&r=PG&f=1", "display_name": "Luis Mu&#241;oz", "link": "https://stackoverflow.com/users/2834978/luis-mu%c3%b1oz"}, "edited": false, "score": 0, "creation_date": 1517699026, "post_id": 48602813, "comment_id": 84202632, "body": "@LuisMu&#241;oz <code>\\r</code> is a completely different character from <code>\\n</code> and is usually only present in line-endings when combined with <code>\\n</code> to form a newline string of <code>\\r\\n</code> (e.g. as used by Windows). Idk for sure if/how to represent <code>\\r</code> in a portable sed script but I expect you&#39;d need to enter the literal control character that <code>\\r</code> represents (e.g. <code>control-V control-M</code>)."}, {"owner": {"reputation": 5895, "user_id": 2834978, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05b09a797fd0c59d1627b30fb4cdba01?s=128&d=identicon&r=PG&f=1", "display_name": "Luis Mu&#241;oz", "link": "https://stackoverflow.com/users/2834978/luis-mu%c3%b1oz"}, "reply_to_user": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "edited": false, "score": 0, "creation_date": 1517699152, "post_id": 48602813, "comment_id": 84202658, "body": "@EdMorton used to be the Mac line ending. If the script is for Mac then it could be crafted for it and not necessarily portable. Anyway, interesting exercise."}, {"owner": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "reply_to_user": {"reputation": 5895, "user_id": 2834978, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05b09a797fd0c59d1627b30fb4cdba01?s=128&d=identicon&r=PG&f=1", "display_name": "Luis Mu&#241;oz", "link": "https://stackoverflow.com/users/2834978/luis-mu%c3%b1oz"}, "edited": false, "score": 0, "creation_date": 1517699232, "post_id": 48602813, "comment_id": 84202674, "body": "@LuisMu&#241;oz good to know but in any case for portability with sed you need to use literal characters, not the escape sequences that we typically use to represent them."}], "tags": [], "owner": {"reputation": 2285, "user_id": 8592975, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56fea54eef1c73000439a2c38b53d422?s=128&d=identicon&r=PG&f=1", "display_name": "ctac_", "link": "https://stackoverflow.com/users/8592975/ctac"}, "is_accepted": false, "score": 1, "last_activity_date": 1517702920, "last_edit_date": 1517702920, "creation_date": 1517697609, "answer_id": 48602813, "question_id": 48602451, "link": "https://stackoverflow.com/questions/48602451/insert-newline-before-after-match-for-tsv/48602813#48602813", "title": "Insert newline before/after match for TSV", "body": "<p>You can try this sed (GNU sed) 4.4</p>\n\n<pre><code>sed -E ':A;s/(\".*)\\t(.*\")/\\1\\n\\2/;tA' TSV_Data_File\n</code></pre>\n\n<p>With OSX sed, you can try this one.\nI think the \\t is ok.</p>\n\n<pre><code>sed -E '\n:A\ns/(\".*)\\t(.*\")/\\1\\\n\\2/\ntA\n' TSV_Data_File\n</code></pre>\n\n<p>brief explain :</p>\n\n<p>Catch the text inside \"</p>\n\n<p>Substitute the last \\t by \\n</p>\n\n<p>If a substitution occur jump to A else continue</p>\n\n<p>With awk :</p>\n\n<p>awk -v RS='\"' 'NR%2==0{gsub(\"\\t\",\"\\n\")}1' ORS='\"' TSV_Data_File</p>\n"}, {"tags": [], "owner": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "is_accepted": true, "score": 2, "last_activity_date": 1517701201, "last_edit_date": 1517701201, "creation_date": 1517698676, "answer_id": 48602933, "question_id": 48602451, "link": "https://stackoverflow.com/questions/48602451/insert-newline-before-after-match-for-tsv/48602933#48602933", "title": "Insert newline before/after match for TSV", "body": "<p>This will work using any awk in any shell on any UNIX box:</p>\n\n<pre><code>$ awk 'match($0,/\".*\"/){str=substr($0,RSTART,RLENGTH); gsub(/\\t/,\"\\n\",str); $0=substr($0,1,RSTART-1) str substr($0,RSTART+RLENGTH)} 1' file\nName    Monitoring      Tags\ni-RBwPyvq8wPbUhn495 enabled \"some:tags:with:colons=some:value:with:colons-and-dashes/and/slashes/yay606-values-001\nsome:other:tag:with-colons-and-hypens=MACHINE NAME\nName=NAMETAG\nbackup=true\"\ni-sMEwh2MXj3q47yWWP enabled \"description=RANDOM BUSINESS INT01\nbackup=true\nName=SOMENAME\"\n</code></pre>\n\n<p>It just extracts a string between <code>\"</code>s from the current record, replaces all tabs with newlines within that string, then puts the record back together before it's printed.</p>\n"}, {"tags": [], "owner": {"reputation": 2626, "user_id": 849967, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/137c89ef80ed860b95e68b42e0d5353e?s=128&d=identicon&r=PG", "display_name": "Kjetil S.", "link": "https://stackoverflow.com/users/849967/kjetil-s"}, "is_accepted": false, "score": 0, "last_activity_date": 1517714854, "creation_date": 1517714854, "answer_id": 48604382, "question_id": 48602451, "link": "https://stackoverflow.com/questions/48602451/insert-newline-before-after-match-for-tsv/48604382#48604382", "title": "Insert newline before/after match for TSV", "body": "<p>This is basically <em>ctac_'s</em> <code>awk</code> answer converted to perl:</p>\n\n<pre><code>perl -pe'1 while s/(\".*)\\t(.*\")/$1\\n$2/s' file.tsv\n</code></pre>\n\n<p>Where the <code>\\t</code> might be replaced by <code>\\t\\s*</code> if you want just one newline out of each tab-and-then-some.</p>\n"}, {"tags": [], "owner": {"reputation": 46858, "user_id": 967492, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/526ea226101e199d029049dda22a4e58?s=128&d=identicon&r=PG", "display_name": "potong", "link": "https://stackoverflow.com/users/967492/potong"}, "is_accepted": false, "score": 0, "last_activity_date": 1517742374, "creation_date": 1517742374, "answer_id": 48607402, "question_id": 48602451, "link": "https://stackoverflow.com/questions/48602451/insert-newline-before-after-match-for-tsv/48607402#48607402", "title": "Insert newline before/after match for TSV", "body": "<p>This might work for you (GNU sed):</p>\n\n<pre><code>sed 's/\\S\\+=\\S\\+/\\n&amp;/2g' file\n</code></pre>\n\n<p>Insert a newline in before the second or more non-empty strings containing an <code>=</code>.</p>\n"}], "owner": {"reputation": 7030, "user_id": 805031, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/093c4af6a8398df55385798583ab96c4?s=128&d=identicon&r=PG", "display_name": "TryTryAgain", "link": "https://stackoverflow.com/users/805031/trytryagain"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 186, "favorite_count": 1, "accepted_answer_id": 48602933, "answer_count": 4, "score": 3, "last_activity_date": 1517742374, "creation_date": 1517694847, "question_id": 48602451, "link": "https://stackoverflow.com/questions/48602451/insert-newline-before-after-match-for-tsv", "title": "Insert newline before/after match for TSV", "body": "<p>I'm going grey trying to figure out how to accomplish some regex matching to insert new lines. Example input/output below...</p>\n\n<p>Example TSV Data:</p>\n\n<pre><code>Name    Monitoring  Tags\ni-RBwPyvq8wPbUhn495 enabled \"some:tags:with:colons=some:value:with:colons-and-dashes/and/slashes/yay606-values-001  some:other:tag:with-colons-and-hypens=MACHINE NAME  Name=NAMETAG    backup=true\"\ni-sMEwh2MXj3q47yWWP enabled \"description=RANDOM BUSINESS INT01  backup=true Name=SOMENAME\"\n</code></pre>\n\n<p>Desired Output:</p>\n\n<pre><code>Name    Monitoring  Tags\ni-RBwPyvq8wPbUhn495 enabled \"some:tags:with:colons=some:value:with:colons-and-dashes/and/slashes/yay606-values-001\nsome:other:tag:with-colons-and-hyphens=MACHINE NAME \nName=NAMETAG    \nbackup=true\"\ni-sMEwh2MXj3q47yWWP enabled \"description=RANDOM BUSINESS INT01  \nbackup=true \nName=SOMENAME\"\n</code></pre>\n\n<p>I can guarantee each <code>key=value</code> within those quotes are separated by hard/literal tabs, although it may not appear that way with how the StackOverflow code block is displayed in HTML they did carry over into the code block editor, the data under the column <code>Tags</code> is in quotes so that even though they are tab separated they stay within the <code>Tags</code> column. For whatever reason I'm not able to successfully get the desired results.</p>\n\n<p>In my measly attempts, I've been basically capturing everything between the <code>\"\"</code> as if tabs aren't separated in my regex searches because of my use of wildcards <code>[TAB].*=.*[TAB]</code> is obviously not working because then I'm losing everything in between the first/last occurrence for each line. I've attempted storing them in capture groups without any success.</p>\n\n<p>I'm looking for a unix toolset solution (sed, awk, perl and the like). Any/All help is appreciated!</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 3269, "user_id": 93745, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8F5Wc.jpg?s=128&g=1", "display_name": "tinita", "link": "https://stackoverflow.com/users/93745/tinita"}, "edited": false, "score": 1, "creation_date": 1517695014, "post_id": 48602392, "comment_id": 84201488, "body": "Every user input read from STDIN or a file is a string, just like every commandline argument. Strings looking like a number in perl can be used as numbers without type casting, though. It seems the <code>command</code> method expects <code>right &lt;some number&gt;</code> and not <code>right &lt;number&gt;&#47;&lt;number&gt;</code>. You have to do the division yourself first. The module does not do that for you."}, {"owner": {"reputation": 17, "user_id": 9263601, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/55261f1008bd13137f7061e561e0b179?s=128&d=identicon&r=PG&f=1", "display_name": "user380892", "link": "https://stackoverflow.com/users/9263601/user380892"}, "reply_to_user": {"reputation": 3269, "user_id": 93745, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8F5Wc.jpg?s=128&g=1", "display_name": "tinita", "link": "https://stackoverflow.com/users/93745/tinita"}, "edited": false, "score": 0, "creation_date": 1517696423, "post_id": 48602392, "comment_id": 84201895, "body": "I didn&#39;t even think about doing the division outside. The answer is always staring me right in the face."}], "answers": [{"comments": [{"owner": {"reputation": 17, "user_id": 9263601, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/55261f1008bd13137f7061e561e0b179?s=128&d=identicon&r=PG&f=1", "display_name": "user380892", "link": "https://stackoverflow.com/users/9263601/user380892"}, "edited": false, "score": 0, "creation_date": 1517696384, "post_id": 48602477, "comment_id": 84201876, "body": "gets rid of the error, but does not execute correctly because the right command is no longer executed."}, {"owner": {"reputation": 357, "user_id": 9305335, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a6a20ea3826649e5b45bc663b7e5111f?s=128&d=identicon&r=PG&f=1", "display_name": "Herco", "link": "https://stackoverflow.com/users/9305335/herco"}, "reply_to_user": {"reputation": 17, "user_id": 9263601, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/55261f1008bd13137f7061e561e0b179?s=128&d=identicon&r=PG&f=1", "display_name": "user380892", "link": "https://stackoverflow.com/users/9263601/user380892"}, "edited": false, "score": 0, "creation_date": 1517730152, "post_id": 48602477, "comment_id": 84207999, "body": "Updated my answer"}], "tags": [], "owner": {"reputation": 357, "user_id": 9305335, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a6a20ea3826649e5b45bc663b7e5111f?s=128&d=identicon&r=PG&f=1", "display_name": "Herco", "link": "https://stackoverflow.com/users/9305335/herco"}, "is_accepted": true, "score": 0, "last_activity_date": 1517730139, "last_edit_date": 1517730139, "creation_date": 1517695047, "answer_id": 48602477, "question_id": 48602392, "link": "https://stackoverflow.com/questions/48602392/non-numeric-argument-from-user-input/48602477#48602477", "title": "non-numeric argument from user input", "body": "<p>What if you try:</p>\n\n<pre><code>$lo-&gt;command(\"forward $distance; right \" . (360/$number));\n</code></pre>\n\n<p>If that doesn't work, try to force Perl to \"see\" $number as a number by adding 0 to it:</p>\n\n<pre><code>$rotation = 360 / ($number+0); \n$command = \"forward $distance; right \" . $rotation;\n$lo-&gt;command($command);\n</code></pre>\n\n<p>And if that doesn't work either, try to manually set $command to something that DOES work, and report back.</p>\n"}], "owner": {"reputation": 17, "user_id": 9263601, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/55261f1008bd13137f7061e561e0b179?s=128&d=identicon&r=PG&f=1", "display_name": "user380892", "link": "https://stackoverflow.com/users/9263601/user380892"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 76, "favorite_count": 0, "accepted_answer_id": 48602477, "answer_count": 1, "score": 0, "last_activity_date": 1517738456, "creation_date": 1517694401, "last_edit_date": 1517738456, "question_id": 48602392, "link": "https://stackoverflow.com/questions/48602392/non-numeric-argument-from-user-input", "title": "non-numeric argument from user input", "body": "<p>In this code the user is asked to input a number from the keyboard. The variable is then used again at a later point in division.</p>\n\n<p>When the code is run it receives a</p>\n\n<blockquote>\n  <p>360/(whatever number was typed) isn't numeric in addition.</p>\n</blockquote>\n\n<p>Is Perl interpreting the user input as a string instead of a numeric value?</p>\n\n<pre><code>use strict;\nuse warnings;\n\nuse Language::Logo;\n\nprint \"Enter a number: \";\nchomp(my $number = &lt;STDIN&gt;);\n\nmy $lo = new Logo(title =&gt; \"Logo Demonstration\");\n$lo-&gt;command(\"update 2; color random; pendown; hideturtle\");\n\nfor ( my $i = 1; $i &lt; 999; $i++ ) {\n    my $distance = $i / 4;\n    $lo-&gt;command(\"forward $distance; right 360/$number\");\n}\n\n$lo-&gt;disconnect(\"Press ctrl+c to exit\");\n</code></pre>\n"}, {"tags": ["perl"], "answers": [{"comments": [{"owner": {"reputation": 25, "user_id": 9302674, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d772d7e1c8472b6734d5a20a1bf4225?s=128&d=identicon&r=PG&f=1", "display_name": "Senior-Jesticle", "link": "https://stackoverflow.com/users/9302674/senior-jesticle"}, "edited": false, "score": 0, "creation_date": 1517691367, "post_id": 48600132, "comment_id": 84200480, "body": "Thank you for you response. How do I use <code>Term::ReadLine::Perl5</code> ? I can&#39;t install it with <code>cpan  Term::ReadLine::Perl5</code>."}, {"owner": {"reputation": 54872, "user_id": 1521179, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/MH7pk.png?s=128&g=1", "display_name": "amon", "link": "https://stackoverflow.com/users/1521179/amon"}, "reply_to_user": {"reputation": 25, "user_id": 9302674, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d772d7e1c8472b6734d5a20a1bf4225?s=128&d=identicon&r=PG&f=1", "display_name": "Senior-Jesticle", "link": "https://stackoverflow.com/users/9302674/senior-jesticle"}, "edited": false, "score": 0, "creation_date": 1517692166, "post_id": 48600132, "comment_id": 84200707, "body": "@Senior-Jesticle Installing the module like that should work. I don&#39;t know why it failed for you."}, {"owner": {"reputation": 25, "user_id": 9302674, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d772d7e1c8472b6734d5a20a1bf4225?s=128&d=identicon&r=PG&f=1", "display_name": "Senior-Jesticle", "link": "https://stackoverflow.com/users/9302674/senior-jesticle"}, "edited": false, "score": 0, "creation_date": 1517694393, "post_id": 48600132, "comment_id": 84201306, "body": "I was able to install the package and your answer works as expected. Thanks! Branching off a little, how do I disable the bold and underline style of the readline prompt?"}, {"owner": {"reputation": 54872, "user_id": 1521179, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/MH7pk.png?s=128&g=1", "display_name": "amon", "link": "https://stackoverflow.com/users/1521179/amon"}, "reply_to_user": {"reputation": 25, "user_id": 9302674, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d772d7e1c8472b6734d5a20a1bf4225?s=128&d=identicon&r=PG&f=1", "display_name": "Senior-Jesticle", "link": "https://stackoverflow.com/users/9302674/senior-jesticle"}, "edited": false, "score": 0, "creation_date": 1517694994, "post_id": 48600132, "comment_id": 84201483, "body": "I don&#39;t know if the module provides such options. You can perhaps override formatting with <a href=\"https://en.wikipedia.org/wiki/ANSI_escape_code\" rel=\"nofollow noreferrer\">ANSI escape codes</a>, e.g. using the <a href=\"https://metacpan.org/pod/Term::ANSIColor\" rel=\"nofollow noreferrer\">Term::ANSIColor</a> module."}], "tags": [], "owner": {"reputation": 54872, "user_id": 1521179, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/MH7pk.png?s=128&g=1", "display_name": "amon", "link": "https://stackoverflow.com/users/1521179/amon"}, "is_accepted": true, "score": 5, "last_activity_date": 1517679598, "creation_date": 1517679598, "answer_id": 48600132, "question_id": 48600054, "link": "https://stackoverflow.com/questions/48600054/how-to-print-statement-that-can-then-be-manipulated-for-stdin/48600132#48600132", "title": "How to print statement that can then be manipulated for STDIN?", "body": "<p>Can't be done by using the STDIN/STDOUT <em>file</em> handles. Instead, you'll have to interact with the terminal, e.g. using a <code>Term::Readline</code> module.</p>\n\n<p>Example:</p>\n\n<pre><code>use strict;\nuse warnings;\nuse feature 'say';\nuse Term::ReadLine::Perl5;\n\nmy $terminal = Term::ReadLine::Perl5-&gt;new(\"example\");\nmy $result = $terminal-&gt;readline(\"&gt; \", \"default value\");\nsay \"you gave: $result\";\n</code></pre>\n"}], "owner": {"reputation": 25, "user_id": 9302674, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d772d7e1c8472b6734d5a20a1bf4225?s=128&d=identicon&r=PG&f=1", "display_name": "Senior-Jesticle", "link": "https://stackoverflow.com/users/9302674/senior-jesticle"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 57, "favorite_count": 1, "accepted_answer_id": 48600132, "answer_count": 1, "score": 2, "last_activity_date": 1517679598, "creation_date": 1517679040, "question_id": 48600054, "link": "https://stackoverflow.com/questions/48600054/how-to-print-statement-that-can-then-be-manipulated-for-stdin", "title": "How to print statement that can then be manipulated for STDIN?", "body": "<p>I would like to prefill the STDIN with a string. This will allow the user to delete the string if they do not want it for input or press return and the prefilled statement will be accepted as STDIN.</p>\n\n<p>How would I go about doing this in perl?</p>\n"}, {"tags": ["perl", "sorting", "unique"], "comments": [{"owner": {"reputation": 5701, "user_id": 35812, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e663162cefd6ac833e0555933b8583f?s=128&d=identicon&r=PG", "display_name": "Chris Charley", "link": "https://stackoverflow.com/users/35812/chris-charley"}, "edited": false, "score": 0, "creation_date": 1517688235, "post_id": 48600001, "comment_id": 84199526, "body": "The <code>printf</code> line says that the line has either been seen in file1 and (file2 1 or more times)  OR more than once in file2. The <code>print</code> line if the line is unique in file2 only. I think a hash is necessary to solve your problem. And I&#39;m not sure your code accomplishes  your goal."}, {"owner": {"reputation": 5701, "user_id": 35812, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e663162cefd6ac833e0555933b8583f?s=128&d=identicon&r=PG", "display_name": "Chris Charley", "link": "https://stackoverflow.com/users/35812/chris-charley"}, "edited": false, "score": 0, "creation_date": 1517689097, "post_id": 48600001, "comment_id": 84199775, "body": "Come to think of it, perhaps your code is the solution you want - lines in file2 that occur only once that are not in file1!"}, {"owner": {"reputation": 163, "user_id": 2203113, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/BGfK4.png?s=128&g=1", "display_name": "Ivan", "link": "https://stackoverflow.com/users/2203113/ivan"}, "reply_to_user": {"reputation": 5701, "user_id": 35812, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e663162cefd6ac833e0555933b8583f?s=128&d=identicon&r=PG", "display_name": "Chris Charley", "link": "https://stackoverflow.com/users/35812/chris-charley"}, "edited": false, "score": 0, "creation_date": 1517689228, "post_id": 48600001, "comment_id": 84199822, "body": "Let&#39;s assume that lines in file2 are uniq <b>for the file2</b>, it can be achived for example by runnign <code>uniq</code> unix command as an extreme measure"}], "answers": [{"tags": [], "owner": {"reputation": 5701, "user_id": 35812, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e663162cefd6ac833e0555933b8583f?s=128&d=identicon&r=PG", "display_name": "Chris Charley", "link": "https://stackoverflow.com/users/35812/chris-charley"}, "is_accepted": true, "score": 1, "last_activity_date": 1517690933, "last_edit_date": 1517690933, "creation_date": 1517690460, "answer_id": 48601800, "question_id": 48600001, "link": "https://stackoverflow.com/questions/48600001/how-do-i-properly-find-double-entries-in-two-files-in-perl/48601800#48601800", "title": "How do I properly find double entries in two files in Perl?", "body": "<p>If I understand correctly file1 and file2 each contain ips (unique in each file) And you want to get ips in file2 not in file1. If so, then maybe the following code achieves your goal.</p>\n\n<p>Although it seems your code will do it, this might be clearer.</p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\n\nmy $base = shift @ARGV;\nmy $input = shift @ARGV;\nmy $res = 'result.txt';\n\nopen (\"BASE\",\"&lt;\",\"$base\") or die $!;\nopen (\"INP\",\"&lt;\",\"$input\") or die $!;\nopen (\"RES\", \"&gt;\", \"$res\") or die $!;\n\nmy %seen;\n\nwhile (my $line = &lt;BASE&gt;) {\n    chomp $line;\n    $seen{$line}++;\n}\nclose BASE or die $!;\n\nwhile (my $line = &lt;INP&gt;) {\n    chomp $line;\n    print RES \"$line\\n\" unless $seen{$line}; # only in file2 not in file1\n}\nclose INP or die $!;\nclose RES or die $!;\n</code></pre>\n"}], "owner": {"reputation": 163, "user_id": 2203113, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/BGfK4.png?s=128&g=1", "display_name": "Ivan", "link": "https://stackoverflow.com/users/2203113/ivan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 35, "favorite_count": 0, "accepted_answer_id": 48601800, "answer_count": 1, "score": 1, "last_activity_date": 1517690933, "creation_date": 1517678659, "question_id": 48600001, "link": "https://stackoverflow.com/questions/48600001/how-do-i-properly-find-double-entries-in-two-files-in-perl", "title": "How do I properly find double entries in two files in Perl?", "body": "<p>Let's say I have two files with lists of ip-addresses. Lines in the first file are unique. Lines in the second may or may not be the same as in the first one. </p>\n\n<p>What I need is to compare two files, and remove possible doubles from the second file in order to merge it with the base file later.</p>\n\n<p>I've managed to write the following code and it seems to work properly, but I have a solid feeling that this code can be improved or I may be totally missing some important concept.</p>\n\n<p>Are there any ways to solve the task without using complex data structures, i.e. hashrefs?</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\n\nmy $base = shift @ARGV;\nmy $input = shift @ARGV;\nmy $res = 'result.txt';\n\nopen (\"BASE\",\"&lt;\",\"$base\");\nopen (\"INP\",\"&lt;\",\"$input\");\nopen (\"RES\", \"&gt;\", \"$res\");\n\nmy $rhash = {}; # result hash\n\nwhile (my $line = &lt;BASE&gt;) {chomp($line); $rhash-&gt;{$line}{'res'} = 1;} # create uniq table\nwhile (my $line = &lt;INP&gt;) { chomp($line); $rhash-&gt;{$line}{'res'}++; $rhash-&gt;{$line}{'new'} = 1; } # create compare table marking it's entries as new and incrementing double keys \nclose BASE;\nclose INP;\n\nfor my $line (sort keys %$rhash) {\n    next if $line =~ /\\#/; # removing comments\n    printf(\"%-30s%3s%1s\", $line, $rhash-&gt;{$line}{'res'}, \"\\n\") if $rhash-&gt;{$line}{'res'} &gt; 1; # kinda diagnosti output of doubles\n    if (($rhash-&gt;{$line}{'new'}) and ($rhash-&gt;{$line}{'res'} &lt; 2)) {\n        print RES \"$line\\n\"; # printing new uniq entries to result file\n    }\n}\nclose RES;\n</code></pre>\n"}, {"tags": ["perl", "debugging"], "comments": [{"owner": {"reputation": 917, "user_id": 3014263, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rFh51.jpg?s=128&g=1", "display_name": "AbhiNickz", "link": "https://stackoverflow.com/users/3014263/abhinickz"}, "edited": false, "score": 0, "creation_date": 1517648360, "post_id": 48595503, "comment_id": 84188215, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/229009/how-can-i-get-a-call-stack-listing-in-perl\">How can I get a call stack listing in Perl?</a>"}, {"owner": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "reply_to_user": {"reputation": 917, "user_id": 3014263, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rFh51.jpg?s=128&g=1", "display_name": "AbhiNickz", "link": "https://stackoverflow.com/users/3014263/abhinickz"}, "edited": false, "score": 0, "creation_date": 1517649619, "post_id": 48595503, "comment_id": 84188520, "body": "Thanks @AbhiNickz, but I am looking to know not how many stack frames deep I am (what Stack Trace will tell you), but how many levels of nesting ( <code>if ... { if ... { if ... { for ... {    } } } }</code>.  In python, you could count the leading spaces and divide by the indent amount to figure this out."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1517652924, "post_id": 48595503, "comment_id": 84189282, "body": "I may be lacking imagination, but I can&#39;t see how this information could be useful."}, {"owner": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "edited": false, "score": 1, "creation_date": 1517654175, "post_id": 48595503, "comment_id": 84189629, "body": "Imagine setting a debug flag with higher values for more detail about inner loops"}, {"owner": {"reputation": 2626, "user_id": 849967, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/137c89ef80ed860b95e68b42e0d5353e?s=128&d=identicon&r=PG", "display_name": "Kjetil S.", "link": "https://stackoverflow.com/users/849967/kjetil-s"}, "edited": false, "score": 0, "creation_date": 1517658449, "post_id": 48595503, "comment_id": 84190751, "body": "Since you know the $filename and the $line you could perhaps read the file, get that line and count the number of spaces and print that? (divided by 4 or 2 maybe)"}, {"owner": {"reputation": 377, "user_id": 6583638, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1zobe.jpg?s=128&g=1", "display_name": "Flying_whale", "link": "https://stackoverflow.com/users/6583638/flying-whale"}, "edited": false, "score": 2, "creation_date": 1517662831, "post_id": 48595503, "comment_id": 84191819, "body": "Indent your code properly and do just like in python"}, {"owner": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "edited": false, "score": 0, "creation_date": 1517706058, "post_id": 48595503, "comment_id": 84204014, "body": "Sure I could count spaces...I was thinking to perhaps use perltidy on the calling function and parse that, but I was hoping there was a less heavy-handed way of doing it, i.e. something the perl parser stores somewhere..."}, {"owner": {"reputation": 377, "user_id": 6583638, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1zobe.jpg?s=128&g=1", "display_name": "Flying_whale", "link": "https://stackoverflow.com/users/6583638/flying-whale"}, "edited": false, "score": 0, "creation_date": 1517822045, "post_id": 48595503, "comment_id": 84234633, "body": "@xxfelixxx my comment was kind of &quot;troll&quot; ;) , I just thought about it, but I guess it should work if you make the substraction: number of <code>{</code> -  number of <code>}</code>  to the point where the function call is"}, {"owner": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "reply_to_user": {"reputation": 377, "user_id": 6583638, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1zobe.jpg?s=128&g=1", "display_name": "Flying_whale", "link": "https://stackoverflow.com/users/6583638/flying-whale"}, "edited": false, "score": 1, "creation_date": 1517822325, "post_id": 48595503, "comment_id": 84234781, "body": "@Flying_whale That might work on some code, but it would be easily spoiled by quoted strings with <code>{</code> or <code>}</code> characters in them, so that&#39;s going into the I need a Full-Blown Parser route...which was what I was trying to avoid.  The Solution of using Scope::Upper works well, without the need to re-parse anything."}, {"owner": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "edited": false, "score": 0, "creation_date": 1517822587, "post_id": 48595503, "comment_id": 84234940, "body": "I wrapped it all into a package, so I can just add debug lines (with hires timing) wherever and then selectively turn them on and off.   <a href=\"https://metacpan.org/pod/Devel::Scope\" rel=\"nofollow noreferrer\">metacpan.org/pod/Devel::Scope</a>"}], "answers": [{"tags": [], "owner": {"reputation": 13399, "user_id": 716443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8d13509991dbbd5467f01f55988ae4e?s=128&d=identicon&r=PG", "display_name": "DavidO", "link": "https://stackoverflow.com/users/716443/davido"}, "is_accepted": true, "score": 6, "last_activity_date": 1517706926, "creation_date": 1517706926, "answer_id": 48603763, "question_id": 48595503, "link": "https://stackoverflow.com/questions/48595503/is-there-an-easy-way-for-a-perl-program-to-know-its-nesting-level/48603763#48603763", "title": "Is there an easy way for a perl program to know its nesting level?", "body": "<p>The Perl module available on CPAN, Scope::Upper will facilitate what you are asking for:</p>\n\n<pre><code>use strict;                     \nuse warnings;                   \n\nuse Scope::Upper qw(SCOPE);     \n\nprint SCOPE(), \"\\n\";            \n{                               \n    print SCOPE(), \"\\n\";        \n    {                           \n        print SCOPE(), \"\\n\";    \n        {                       \n            print SCOPE(), \"\\n\";\n        }                       \n        print SCOPE(), \"\\n\";    \n    }                           \n    print SCOPE(), \"\\n\";        \n}                               \nprint SCOPE(), \"\\n\";            \n</code></pre>\n\n<p>The output from this code is:</p>\n\n<pre><code>0\n1\n2\n3\n2\n1\n0\n</code></pre>\n\n<p>So it will enable you to see what depth your current scope is, which can be used to deduce how deeply nested loops are.  You can pass an offset to the <code>SCOPE()</code> function. So for example, if you called <code>{SCOPE(1)}</code> the return value would be zero despite being one scope deep. This could be useful in a situation where you don't care that you're inside of a subroutine or an <code>if</code> block, so want to start counting deeper in.  For example:</p>\n\n<pre><code>if ($foo) {\n    foreach my $x (1..10) {\n        foreach my $y (1..10) {\n            print SCOPE(1), \"\\n\";\n        }\n    }\n}\n</code></pre>\n\n<p>In this example response will show scope depth to be 2 rather than 3 because passing a 1 to <code>SCOPE()</code> hints it to disregard the scope of the <code>if(){...}</code> block.</p>\n"}], "owner": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 135, "favorite_count": 0, "accepted_answer_id": 48603763, "answer_count": 1, "score": 1, "last_activity_date": 1517706926, "creation_date": 1517646947, "last_edit_date": 1517648965, "question_id": 48595503, "link": "https://stackoverflow.com/questions/48595503/is-there-an-easy-way-for-a-perl-program-to-know-its-nesting-level", "title": "Is there an easy way for a perl program to know its nesting level?", "body": "<p>I am familiar with the <a href=\"https://perldoc.perl.org/functions/caller.html\" rel=\"nofollow noreferrer\">caller</a> function which can be used by a program to know where it was invoked, from which file, package etc.  Is there an easy way for a program to know how deeply nested the caller was?  The use case would be to add some debugging lines without having to explicitly count the nesting level.</p>\n\n<p>I am not looking for a Stack Trace.  I am trying to find how deeply nested a calling function is within the scope of another function.</p>\n\n<p>For example:</p>\n\n<pre><code>sub my_debug {\n    my ($txt) = @_;\n    my ($package, $filename, $line) = caller;\n    # Is there a way to know how deeply nested the caller is?\n    my $level = ... # How to get this?\n    print \"DEBUG: You are calling from package $package in $filename \"\n        . \"line $line nesting level $level: MSG: $txt\\n\";\n}\n\nsub badly_nested {\n    for my $i ( 1..10 ) {\n        # 1-level deep\n        for my $j ( 1 .. 10 ) {\n            # 2-levels deep\n            my_debug( \"j is $j\" );\n            for my $k ( 1 .. 10 ) {\n                # 3-levels deep\n            }\n        }\n    }\n}\n</code></pre>\n"}, {"tags": ["function", "perl", "variables", "operator-keyword", "equation"], "comments": [{"owner": {"reputation": 5455, "user_id": 3961170, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/PtFol.jpg?s=128&g=1", "display_name": "mkHun", "link": "https://stackoverflow.com/users/3961170/mkhun"}, "edited": false, "score": 0, "creation_date": 1517644786, "post_id": 48593147, "comment_id": 84187434, "body": "You can try this also <code>my $result = eval(&quot;$numA $func  $numB&quot;); </code> but not recommended"}], "answers": [{"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 7, "last_activity_date": 1517633356, "last_edit_date": 1517633356, "creation_date": 1517625644, "answer_id": 48593411, "question_id": 48593147, "link": "https://stackoverflow.com/questions/48593147/how-to-convert-a-perl-variable-in-a-operator-for-make-equations/48593411#48593411", "title": "How to convert a perl variable in a operator for make equations?", "body": "<p>It's convenient that the expression is already parsed.</p>\n\n<pre><code>my %ops = (\n   '+' =&gt; sub { $_[0] + $_[1] },\n   '-' =&gt; sub { $_[0] - $_[1] },\n   '*' =&gt; sub { $_[0] * $_[1] },\n   '/' =&gt; sub { $_[0] / $_[1] },\n);\n\nmy ($operand1, $operand2, $operator) = @ARGV;\n\nsay $ops{$operator}-&gt;($operand1, $operand2);\n</code></pre>\n"}], "owner": {"reputation": 525, "user_id": 9307632, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-v3DqUZEzTzk/AAAAAAAAAAI/AAAAAAAADRk/Z4_N66B5BWA/photo.jpg?sz=128", "display_name": "Leandro Matilla", "link": "https://stackoverflow.com/users/9307632/leandro-matilla"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 125, "favorite_count": 0, "accepted_answer_id": 48593411, "answer_count": 1, "score": 3, "last_activity_date": 1517633356, "creation_date": 1517622385, "question_id": 48593147, "link": "https://stackoverflow.com/questions/48593147/how-to-convert-a-perl-variable-in-a-operator-for-make-equations", "title": "How to convert a perl variable in a operator for make equations?", "body": "<pre><code>my $numA= $ARGV[0]; #5\nmy $numB= $ARGV[1]; #5\nmy $func= $ARGV[2]; #+\n\nmy $result = $numA .$func . $numB; #The result shoudl be 10\n\nprint \"The result is:  $result\"; # The result is: 5+5\n</code></pre>\n\n<p>I have this code and I want to get '$func' as an operator to add '$numA' with '$numB'.</p>\n"}, {"tags": ["perl"], "answers": [{"comments": [{"owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 3, "creation_date": 1517610169, "post_id": 48591514, "comment_id": 84180640, "body": "Writing to the pipe exclusively with <code>syswrite</code> also bypasses buffered I/O and makes <code>autoflush</code> unnecessary."}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 2, "creation_date": 1517636811, "post_id": 48591514, "comment_id": 84185818, "body": "The deadlock can also happen when trying to write to a full pipe buffer. See <a href=\"https://stackoverflow.com/q/40189625/2173773\">Deadlocks due to buffering. How does it work?</a>"}], "tags": [], "owner": {"reputation": 185733, "user_id": 152948, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/194ef8f807c34a9d7aab0e11a8674768?s=128&d=identicon&r=PG", "display_name": "hobbs", "link": "https://stackoverflow.com/users/152948/hobbs"}, "is_accepted": true, "score": 6, "last_activity_date": 1517620971, "last_edit_date": 1517620971, "creation_date": 1517609082, "answer_id": 48591514, "question_id": 48591415, "link": "https://stackoverflow.com/questions/48591415/when-communicating-with-a-pipe-is-it-necessary-to-use-autoflush/48591514#48591514", "title": "when communicating with a pipe, is it necessary to use AUTOFLUSH?", "body": "<p>Correct. If you don't turn on autoflush, everything will still work fine, except that the write buffer will only be flushed when it fills up, or when you close the pipe, instead of immediately on every write. If you're sending bulk data over the pipe then you can leave it off; if you're doing anything \"interactive\" then you probably want it on.</p>\n\n<p>In particular, if you're writing to <em>and</em> reading from a child process, it's easy for buffering to lead to a deadlock situation, as follows: you send a request to the child process, and then read a response from it. Without buffering, this works okay. But with buffering, the child doesn't see the request because it's still waiting in your output buffer, so it doesn't produce a response, so your read never unblocks, and nothing ever happens. Enabling autoflush, or doing a manual flush after each complete request before switching to reading, avoids this problem.</p>\n\n<p>You can also avoid output buffering by using <code>syswrite</code>, but don't mix <code>syswrite</code> and <code>print</code>; since <code>syswrite</code> bypasses <code>print</code>'s buffers, you can end up with output going out in a different order from what you expected!</p>\n"}], "owner": {"reputation": 5937, "user_id": 783314, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/b3d5692064779f501f7c2a639dc0076c?s=128&d=identicon&r=PG", "display_name": "Stephen", "link": "https://stackoverflow.com/users/783314/stephen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 56, "favorite_count": 0, "accepted_answer_id": 48591514, "answer_count": 1, "score": 2, "last_activity_date": 1517620971, "creation_date": 1517608578, "question_id": 48591415, "link": "https://stackoverflow.com/questions/48591415/when-communicating-with-a-pipe-is-it-necessary-to-use-autoflush", "title": "when communicating with a pipe, is it necessary to use AUTOFLUSH?", "body": "<p>This is at risk of being an excessively broad/subjective question, so I'll try to make it as specific as possible.</p>\n\n<p>I'm currently learning how to use pipes properly. Often in code I've reviewed, after creating a pipe with <code>pipe(my $pipe_reader, my $pipe_writer);</code>, somebody will call <code>$pipe_writer-&gt;autoflush(1);</code>. </p>\n\n<p>That isn't a requirement to use \"whenever you use pipes\", correct? You would just use it when you want to make sure the reader gets the data immediately after the writer writes it? </p>\n"}, {"tags": ["perl", "cmd", "output", "telnet"], "comments": [{"owner": {"reputation": 3269, "user_id": 93745, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8F5Wc.jpg?s=128&g=1", "display_name": "tinita", "link": "https://stackoverflow.com/users/93745/tinita"}, "edited": false, "score": 2, "creation_date": 1517606019, "post_id": 48590675, "comment_id": 84179078, "body": "I see several problems. <code>@komenda</code> should be just a scalar, maybe <code>join (&#39; &#39;, @komenda)</code>, but I don&#39;t know what the array contains. <code>cmd</code> returns only a value for success. rather use <code>@lines = $t-&gt;getlines</code>. Can you try with a simple command like <code>ls -l</code> or <code>echo hello</code> and see if it works? We cannot really reproduce it if we don&#39;t see the actual command."}, {"owner": {"reputation": 11, "user_id": 9306918, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f0eea501288dad889f2676e6afc1bd23?s=128&d=identicon&r=PG", "display_name": "Bartosz", "link": "https://stackoverflow.com/users/9306918/bartosz"}, "reply_to_user": {"reputation": 3269, "user_id": 93745, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8F5Wc.jpg?s=128&g=1", "display_name": "tinita", "link": "https://stackoverflow.com/users/93745/tinita"}, "edited": false, "score": 0, "creation_date": 1517609372, "post_id": 48590675, "comment_id": 84180361, "body": "Changed variable to scalar and command to show version  pattern match read eof at melt.pl line 36  also tried sending command to server using paste() and then getlines() and i got  read timed-out at melt.pl line 39  @lines = $t-&gt;getlines;"}], "owner": {"reputation": 11, "user_id": 9306918, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f0eea501288dad889f2676e6afc1bd23?s=128&d=identicon&r=PG", "display_name": "Bartosz", "link": "https://stackoverflow.com/users/9306918/bartosz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 213, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1573999500, "creation_date": 1517604529, "last_edit_date": 1573999500, "question_id": 48590675, "link": "https://stackoverflow.com/questions/48590675/perl-telnet-doesnt-return-output", "title": "Perl telnet doesn&#39;t return output", "body": "<p>I'm having a problem with my perl script. The Script executes a command on a server which takes approximately 10-30 seconds to process and return output that contains like 70 lines. </p>\n\n<pre><code>$t = new Net::Telnet (Timeout =&gt; 200, dump_log  =&gt; $file, input_log =&gt; $file1, output_log =&gt; $file2);\n$t-&gt;open($host);\n$t-&gt;waitfor('/User name:$/i');\n$t-&gt;print($username);\n$t-&gt;waitfor(match =&gt; '/User password:$/i');\n$t-&gt;print($passwd);\n#$t-&gt;waitfor('/.*(#|&gt;|\\))\\s*$/');\n@lines =  $t-&gt;cmd(string =&gt; @komenda, Timeout =&gt; 4000);\n39 $t-&gt;waitfor('/----\n------------------------------------------------------------------------\n-/');\n$t-&gt;getlines();\n\nprint @lines;\n</code></pre>\n\n<p>pattern match read eof at melt.pl line 39</p>\n\n<p>I'v changed code to </p>\n\n<pre><code>        $t = new Net::Telnet (Timeout =&gt; 200, dump_log  =&gt; $file, input_log =&gt; $file1, output_log =&gt; $file2);\n$t-&gt;open($host);\n    $t-&gt;waitfor('/User name:$/i');\n    $t-&gt;print($username);\n    $t-&gt;waitfor('/User password:$/i');\n    $t-&gt;print($passwd);\n    #$t-&gt;waitfor('/.*(#|&gt;|\\))\\s*$/');\n   39 @lines =  $t-&gt;cmd(string =&gt; @komenda,timeout =&gt; 2000);\nsleep(50);\n#$t-&gt;waitfor('/----------------------------------------------------------\n  -------------------/');\n  #@linie = $t-&gt;getlines();\n    print @linie;\n</code></pre>\n\n<p>and this returns </p>\n\n<p>pattern match read eof at melt.pl line 39</p>\n\n<p>All log files contain output of this command. </p>\n\n<p>Here comes the question, what am I doing wrong?</p>\n"}, {"tags": ["perl", "csh", "tcsh"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1517606449, "post_id": 48590639, "comment_id": 84179252, "body": "Why are you sourcing a csh script in <code>sh</code>?"}], "answers": [{"comments": [{"owner": {"reputation": 847, "user_id": 7514026, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/baca10c436cbd0cbdd232619d163cf19?s=128&d=identicon&r=PG&f=1", "display_name": "daveg", "link": "https://stackoverflow.com/users/7514026/daveg"}, "edited": false, "score": 0, "creation_date": 1517605401, "post_id": 48590681, "comment_id": 84178845, "body": "the system interpreter is c-shell"}, {"owner": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "reply_to_user": {"reputation": 847, "user_id": 7514026, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/baca10c436cbd0cbdd232619d163cf19?s=128&d=identicon&r=PG&f=1", "display_name": "daveg", "link": "https://stackoverflow.com/users/7514026/daveg"}, "edited": false, "score": 0, "creation_date": 1517605594, "post_id": 48590681, "comment_id": 84178922, "body": "@Daveg <a href=\"http://perldoc.perl.org/perlop.html#Quote-Like-Operators\" rel=\"nofollow noreferrer\">Backticks will always use <code>&#47;bin&#47;sh</code></a>."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "edited": false, "score": 1, "creation_date": 1517606271, "post_id": 48590681, "comment_id": 84179184, "body": "@Schwern While <code>&#47;bin&#47;sh</code> may be and often is a link to another shell.  However, that is indeed unlikely to be (or never is?) <code>tcsh</code>"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1517606507, "post_id": 48590681, "comment_id": 84179284, "body": "Re &quot;<i>The command in backticks is being interpreted by your system interpreter</i>&quot;, No, it&#39;s executed by <code>&#47;bin&#47;sh</code>. (Technically, it&#39;s executed by the program returned by <code>perl -V:sh</code>.)"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1517606666, "post_id": 48590681, "comment_id": 84179352, "body": "Re &quot;<i><code>&#47;bin&#47;sh</code> is bash on a lot of systems.</i>&quot;, I never said otherwise. I just pointed out that &quot;The command in backticks is being interpreted by your system interpreter&quot;&quot; is wrong. No idea what a &quot;system interpreter is&quot;, but the choice is not up to the system at all."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1517606868, "post_id": 48590681, "comment_id": 84179448, "body": "For that matter, &quot;<i><code>bash</code> will treat that as a <code>bash</code> script!</i>&quot; is also wrong. When executed as <code>sh</code>, <code>bash</code> tries to emulate <code>sh</code>."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1517606936, "post_id": 48590681, "comment_id": 84179486, "body": "huh? &quot;<i>The command in backticks is being interpreted by your command interpreter</i>&quot; is makes no sense. There&#39;s no such thing as &quot;<i>your</i> command interpreter&quot;."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1517606995, "post_id": 48590681, "comment_id": 84179511, "body": "Re &quot;<i>explicit use of certain extensions like source will continue to work.</i>&quot;, Why do you keep bringing up these straw men. I never said it wouldn&#39;t work."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1517607038, "post_id": 48590681, "comment_id": 84179532, "body": "Re &quot;<i>Your comments are not constructive.</i>&quot;, Sorry, I don&#39;t see any easy way to fix your answer, or I would have done it. I can only point out the many problems with it."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1517607137, "post_id": 48590681, "comment_id": 84179579, "body": "Re &quot;<i>command is treated similarly to system(&quot;command ...&quot;)</i>&quot;, That&#39;s wrong too. Aside from the non-capturing aspect, there are many differences between backticks and Perl&#39;s <code>system</code>, and C&#39;s."}], "tags": [], "owner": {"reputation": 48191, "user_id": 1250772, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/633e1f643d2c9b043231b4a32b078907?s=128&d=identicon&r=PG", "display_name": "Kaz", "link": "https://stackoverflow.com/users/1250772/kaz"}, "is_accepted": false, "score": -1, "last_activity_date": 1517868951, "last_edit_date": 1517868951, "creation_date": 1517604560, "answer_id": 48590681, "question_id": 48590639, "link": "https://stackoverflow.com/questions/48590639/from-perl-why-does-a-backticked-call-to-a-c-shell-pass-quoted-string-ok-if-call/48590681#48590681", "title": "From perl, why does a backticked call to a c-shell pass quoted string ok if called with tcsh but not source?", "body": "<p>The command in backticks is being interpreted by your system interpreter (invoked via <code>/bin/sh</code>), which I'm guessing might be GNU Bash. Or, in any case, it seems to be some shell which understands the <code>source</code> command, and almost certainly a POSIX-like shell. That <code>source</code> command quite probably tells that shell to read a script <strong>written in that shell's own language</strong>. So, for instance, if that shell happens to be Bash, it will treat that as a Bash script<sup>1</sup>, not as a Tcsh script.</p>\n\n<p>The only way both could work is if the script is a <a href=\"https://en.wikipedia.org/wiki/Polyglot_(computing)\" rel=\"nofollow noreferrer\">\"polyglot\"</a>: a program which can be interpreted by either <code>tcsh</code> or the system shell that is used by perl to implement backticks.</p>\n\n<p>(An easy example of a C Shell + POSIX shell polyglot is a script that contains nothing but a sequence of trivial commands consisting of space separated words like <code>cp from to</code>.)</p>\n\n<p>Your script isn't a polyglot; only Tcsh understands the <code>:q</code> syntax, not the other shell.</p>\n\n<hr>\n\n<ol>\n<li>More precisely, if <code>/bin/sh</code> is Bash, the original <code>source ...</code> command as well as the contents of the sourced <code>top.csh</code> script will be treated as a POSIX-mode Bash script, since when Bash is invoked as <code>/bin/sh</code>, it turns off its POSIX-incompatible behaviors. So even if Bash's pathname expansion supported the Tcsh <code>:q</code> mechanism, it would almost certainly be turned off under POSIX mode because <code>$*:q</code> already has a firm meaning in POSIX.</li>\n</ol>\n"}, {"comments": [{"owner": {"reputation": 847, "user_id": 7514026, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/baca10c436cbd0cbdd232619d163cf19?s=128&d=identicon&r=PG&f=1", "display_name": "daveg", "link": "https://stackoverflow.com/users/7514026/daveg"}, "edited": false, "score": 1, "creation_date": 1517606031, "post_id": 48590874, "comment_id": 84179086, "body": "Thanks you for the explanation.  I don&#39;t have control over top.csh  or the perl it calls :-(.  I hate to do all this nested calling, but I&#39;m stuck.  I will definately look into capturex.  I tried CaptureOutput::capture_exec_combined but couldn&#39;t &#39;source&#39; from it.  Turns out, I need to &#39;source&#39; it to get the env vars."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1517606159, "post_id": 48590874, "comment_id": 84179137, "body": "Great advice through and through. I&#39;d also recommend <code>Capture::Tiny</code> and <code>IPC::Run3</code>"}, {"owner": {"reputation": 48191, "user_id": 1250772, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/633e1f643d2c9b043231b4a32b078907?s=128&d=identicon&r=PG", "display_name": "Kaz", "link": "https://stackoverflow.com/users/1250772/kaz"}, "edited": false, "score": 0, "creation_date": 1517606503, "post_id": 48590874, "comment_id": 84179281, "body": "&gt; <i>This answer is about how to avoid this class of problems entirely.</i> Oh, I have one for that: don&#39;t use the @#$% C shell for scripting."}, {"owner": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "reply_to_user": {"reputation": 847, "user_id": 7514026, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/baca10c436cbd0cbdd232619d163cf19?s=128&d=identicon&r=PG&f=1", "display_name": "daveg", "link": "https://stackoverflow.com/users/7514026/daveg"}, "edited": false, "score": 0, "creation_date": 1517606884, "post_id": 48590874, "comment_id": 84179457, "body": "@daveg Sorry, but you cannot get environment variables from another process. The environment can only be inherited from a parent process, never from a child. <code>source</code> works by the shell executing shell code in the same process, like <code>require</code> in Perl. But if you try ` <code>source ...</code> ` in Perl, Perl forks a new child shell process (inheriting Perl&#39;s environment) which then executes the shell code gaining any changes to its environment. Then that process shuts down and its environment goes away. Perl&#39;s environment, the parent process, is unaffected."}, {"owner": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "reply_to_user": {"reputation": 847, "user_id": 7514026, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/baca10c436cbd0cbdd232619d163cf19?s=128&d=identicon&r=PG&f=1", "display_name": "daveg", "link": "https://stackoverflow.com/users/7514026/daveg"}, "edited": false, "score": 1, "creation_date": 1517607561, "post_id": 48590874, "comment_id": 84179757, "body": "@daveg I suspect you&#39;re working with a system built entirely in shell. These have a tendency to have configuration information set in shell scripts as environment variables. These are only accessible to other shell scripts via <code>source</code>ing the script. A good solution is to move these out into a common config file written in something like JSON and have everything refer to that. A work-around is to write a shell script which <code>source</code>s the relevant scripts and prints out the environment variables so other programs can read them in."}], "tags": [], "owner": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "is_accepted": false, "score": 4, "last_activity_date": 1517605637, "creation_date": 1517605637, "answer_id": 48590874, "question_id": 48590639, "link": "https://stackoverflow.com/questions/48590639/from-perl-why-does-a-backticked-call-to-a-c-shell-pass-quoted-string-ok-if-call/48590874#48590874", "title": "From perl, why does a backticked call to a c-shell pass quoted string ok if called with tcsh but not source?", "body": "<p><a href=\"https://stackoverflow.com/a/48590681/14660\">@Kaz has the answer as to why your code isn't working</a>. This answer is about how to avoid this class of problems entirely.</p>\n\n<p>First, if you can, add a <code>#!/bin/tcsh</code> to <code>top.csh</code> and make it executable (ie. <code>chmod +x</code>). Now it can be executed as <code>top.csh</code> without needing to know what shell to use.</p>\n\n<p>Then you'll want to avoid using <code>``</code> for anything but very simple commands. This is because <code>``</code> is interpreted by the shell and now you need to worry about shell special characters and escapes and spaces... it's a mess. What you need is a way to call external programs <em>without</em> invoking a shell.</p>\n\n<p>You can do this by passing a list to <a href=\"http://perldoc.perl.org/functions/system.html\" rel=\"nofollow noreferrer\"><code>system</code></a>, but <code>system</code> cannot capture the output.</p>\n\n<pre><code>system \"tcsh\", \"./top.csh\", \"-arg1\", \"this line has spaces\";\n</code></pre>\n\n<p>While you can cobble something together with <a href=\"http://perldoc.perl.org/functions/open.html\" rel=\"nofollow noreferrer\"><code>open</code></a> and pipes, it's better to use a pre-existing library such as <a href=\"https://metacpan.org/pod/IPC::System::Simple\" rel=\"nofollow noreferrer\">IPC::System::Simple</a>.</p>\n\n<pre><code>use IPC::System::Simple qw(capturex);\n\n# Or capturex(\"./top.csh\", ...) if you add a #! to top.csh.\nmy $msg = capturex(\"tcsh\", \"./top.csh\", \"-arg1\", \"this line has spaces\");\n</code></pre>\n\n<p>For more involved interactions with executables, look into <a href=\"https://metacpan.org/pod/System::Command\" rel=\"nofollow noreferrer\">System::Command</a> or <a href=\"https://metacpan.org/pod/IPC::Run\" rel=\"nofollow noreferrer\">IPC::Run</a>.</p>\n\n<hr>\n\n<p>Needless to say, Perl scripts which call shell scripts which call Perl scripts is a bit of a nightmare to maintain. Rather than do that, it is better to scoop the guts of <code>subperl.pl</code> out into a Perl library and have both <code>subperl.pl</code> and your code use that library.</p>\n"}], "owner": {"reputation": 847, "user_id": 7514026, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/baca10c436cbd0cbdd232619d163cf19?s=128&d=identicon&r=PG&f=1", "display_name": "daveg", "link": "https://stackoverflow.com/users/7514026/daveg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 71, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1600551849, "creation_date": 1517604383, "last_edit_date": 1600551849, "question_id": 48590639, "link": "https://stackoverflow.com/questions/48590639/from-perl-why-does-a-backticked-call-to-a-c-shell-pass-quoted-string-ok-if-call", "title": "From perl, why does a backticked call to a c-shell pass quoted string ok if called with tcsh but not source?", "body": "<p>I need to write a perl script that calls a c-shell script that calls yet another perl script.  I cannot change the c-shell script or the perl script it calls.  One of the args that needs to be passed is a quotes string with spaces.  If I use backticks to call the c-shell, and I run the c-shell with tcsh, the quoted string is respected as a single entity.  However, if I run the c-shell with source, it is not.  </p>\n\n<p>I feel that I need to use 'source' because when the c-shell is called by users from the command line, it is called through an alias that sources the c-shell.  E.g. </p>\n\n<pre><code>alias top \"source top.csh\"\n</code></pre>\n\n<p>Consider these...</p>\n\n<p>topmost.pl</p>\n\n<pre><code>#!/usr/bin/env perl\nuse strict;\n\nprint \"Try with tcsh...\\n\";\nmy $msg = `tcsh ./top.csh -arg1 \"this line has spaces\"`;\nprint \"$msg\\n\";\n\nprint \"Try with source...\\n\";\nmy $msg = `source ./top.csh -arg1 \"this line has spaces\"`;\nprint \"$msg\\n\";\n\nexit;\n</code></pre>\n\n<p>top.csh is simply....</p>\n\n<pre><code>perl ./subperl.pl $*:q\nexit\n</code></pre>\n\n<p>And subperl.pl is...</p>\n\n<pre><code>#!/usr/bin/env perl\nuse strict;\n\nprint \"In subperl.pl\\n\";\n\nforeach $x (@ARGV) {\n    print \"$x\\n\";\n}\nprint \"The End\\n\";\n\nexit;\n</code></pre>\n\n<p>When I run the topmost.pl script, I get...</p>\n\n<pre><code>Try with tcsh...\nIn subperl.pl\n-arg1\nthis line has spaces\nThe End\n\nTry with source...\nIn subperl.pl\n-arg1\nthis\nline\nhas\nspaces:q\nThe End\n</code></pre>\n\n<p>Why does the \"sourced\" call to the top.csh script fail to respect the quotes ?</p>\n"}, {"tags": ["multithreading", "perl", "inotify"], "comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 2, "creation_date": 1517602852, "post_id": 48589845, "comment_id": 84177813, "body": "(1) You need an event loop for inotify.  You&#39;d also need to <code>poll</code> manually since you have it as non-blocking. What do you mean by &quot;it will work&quot; -- that it doesn&#39;t &quot;crash&quot;? (2) Is that an infinite loop there?  How soon does it crash with threads? (3) What do you mean by &quot;crash&quot; -- a segfault? If not, did you try to wrap this in an <code>eval</code> and see the error?  I can&#39;t try at the moment. /// Btw, there is really no purpose to detaching a thread."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1517603413, "post_id": 48589845, "comment_id": 84178063, "body": "I vaguely recall that one cannot have multiple watches for the same entry? (Can&#39;t find it in docs now.) Each added thread picks up <code>$ino</code> so they would violate that restriction (if true)."}, {"owner": {"reputation": 8001, "user_id": 307297, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/e28FD.png?s=128&g=1", "display_name": "chris01", "link": "https://stackoverflow.com/users/307297/chris01"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1517645766, "post_id": 48589845, "comment_id": 84187610, "body": "Using read or poll makes no difference."}], "answers": [{"tags": [], "owner": {"reputation": 87, "user_id": 6479118, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/63708dea9abc1e12f5c0c38412aad735?s=128&d=identicon&r=PG&f=1", "display_name": "Theo Ohnsorge", "link": "https://stackoverflow.com/users/6479118/theo-ohnsorge"}, "is_accepted": false, "score": 1, "last_activity_date": 1525850886, "creation_date": 1525850886, "answer_id": 50247786, "question_id": 48589845, "link": "https://stackoverflow.com/questions/48589845/linuxinotify2-and-threads/50247786#50247786", "title": "Linux::Inotify2 and threads", "body": "<p>The following example implements the idea of zdim who proposed to use an event loop with poll() instead of read(). It's developed on CentOS 7 with Perl 5.16.2 and Linux-Inotify2 v1.22.</p>\n\n<p>The program spawns a thread that watches the <code>/tmp</code> directory. You can test it by touching and removing files: <code>touch /tmp/1 /tmp/2 &amp;&amp; rm /tmp/1 /tmp/2</code></p>\n\n<pre><code>#!/usr/bin/env perl\n\nuse warnings FATAL =&gt; 'all';\nuse strict;\nuse threads;\n\nthreads-&gt;new(\\&amp;_eventListener, '/tmp')-&gt;join();\n\nsub _eventListener {\n  my ($path) = @_;\n\n  require Linux::Inotify2;\n  Linux::Inotify2-&gt;import(qw(IN_CREATE IN_DELETE IN_DELETE_SELF));\n\n  my $fsEventListener = Linux::Inotify2-&gt;new() or \n    die('Cannot register Linux::Inotify2, stopped');\n\n  $fsEventListener-&gt;watch(\n    $path, \n    IN_CREATE() | IN_DELETE() | IN_DELETE_SELF(), \n    \\&amp;_watchCallback\n  ) or die(\"Watch creation failed. '$!'\");\n\n  $fsEventListener-&gt;blocking(undef);\n\n  while(1) {\n    $fsEventListener-&gt;poll();\n    sleep 1;\n  }\n\n  return;\n}\n\nsub _watchCallback {\n  my ($e) = @_;\n\n  printf STDOUT \"Receive event '0x%04x' for file '%s'\\n\", $e-&gt;mask(), $e-&gt;fullname();\n\n  return;\n}\n</code></pre>\n"}], "owner": {"reputation": 8001, "user_id": 307297, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/e28FD.png?s=128&g=1", "display_name": "chris01", "link": "https://stackoverflow.com/users/307297/chris01"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 215, "favorite_count": 1, "answer_count": 1, "score": 3, "last_activity_date": 1525850886, "creation_date": 1517600664, "last_edit_date": 1517648505, "question_id": 48589845, "link": "https://stackoverflow.com/questions/48589845/linuxinotify2-and-threads", "title": "Linux::Inotify2 and threads", "body": "<p>I try to use Linxu::Inotify2 - but not in a thread.</p>\n\n<p>If I have threads inside the program then I get a crash with Inotifys read.\nIf I do not use threads all is fine.</p>\n\n<p>Here is a little sample that should show the problem.</p>\n\n<pre><code>use strict;\nuse warnings;\nuse threads;\nuse Linux::Inotify2;\n\nmy $X = 0;  # terminate the thread: 0=nothing, 1=detach, 2=join\n\nSTDOUT-&gt;autoflush ();\nmy $ino = new Linux::Inotify2 ();\n\n$ino-&gt;blocking (0);\n$ino-&gt;watch (\".\", IN_MODIFY | IN_ATTRIB | IN_CREATE) or die \"error\";\n\nmy @ls = ();   # for save threads if $X == 2\nfor (my $i=0;;$i++)\n{\n    my $th = threads-&gt;create (sub { print \"\\nTH\". shift; }, $i);  # just to have threads; do nothing\n    if ($X == 1)\n    {\n        $th-&gt;detach ();     # detach the thread\n    }\n    elsif ($X == 2)\n    {\n        push (@ls, $th);    # save for joining after thread finished\n    }\n\n    my @events = $ino-&gt;read ();   # *** CRASH if $X = 1 or 2\n    if ($X == 2)\n    {\n        foreach (@ls)\n        {\n            if ($_-&gt;is_joinable ())\n            {\n                $_-&gt;join ();\n            }\n        }\n    }\n\n    sleep (1);\n}\n</code></pre>\n\n<p>If I set $X to 0 it will work.\nIf I set it to 1 or 2 then I get a runtime-error.</p>\n\n<pre><code>Linux::Inotify2: read error while reading events at /usr/local/lib/x86_64-linux-gnu/perl/5.26.0/Linux/Inotify2.pm line 266.\n</code></pre>\n\n<p>Why is that?</p>\n\n<p><strong>EDIT</strong></p>\n\n<p>I simplified my sample to give a better view of the problem.</p>\n\n<pre><code>use strict;\nuse warnings;\nuse threads;\nuse Linux::Inotify2;\n\nSTDOUT-&gt;autoflush ();\nmy $ino = new Linux::Inotify2 ();\n\n$ino-&gt;blocking (0);\n$ino-&gt;watch (\".\", IN_CREATE | IN_DELETE) or die \"error\";\n\nmy $th = threads-&gt;create (sub {  });\n$th-&gt;join ();\n\nprint \"\\nINO: \".$ino-&gt;poll();\n</code></pre>\n\n<p>Remove the join it will be ok, keep it and the poll will fail.</p>\n"}, {"tags": ["perl", "oop", "perl-module", "moose"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1517595970, "post_id": 48588647, "comment_id": 84174631, "body": "Your question title and the body of the post don&#39;t really fit together. Please try to make it more clear what your actual question is. Also note that in Perl package names are typically written in camel case with a capital first letter. <code>ActionA.pm</code> would be correct. I would go with <code>Action.pm</code> as the base class and <code>Action::A</code>, <code>Action::B</code> and so on for the actual action classes. You might also want to take a look at <a href=\"https://metacpan.org/release/MooseX-App\" rel=\"nofollow noreferrer\">metacpan.org/release/MooseX-App</a>."}, {"owner": {"reputation": 592, "user_id": 6498020, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7ed5163343848e636e84d00bef5bdc58?s=128&d=identicon&r=PG&f=1", "display_name": "willyjoker", "link": "https://stackoverflow.com/users/6498020/willyjoker"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1517597036, "post_id": 48588647, "comment_id": 84175114, "body": "@simbabque: I changed the question title, I hope now it fits better. You&#39;re right about the naming convention. This is not actual code, I just made example names up as I was writing."}, {"owner": {"reputation": 592, "user_id": 6498020, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7ed5163343848e636e84d00bef5bdc58?s=128&d=identicon&r=PG&f=1", "display_name": "willyjoker", "link": "https://stackoverflow.com/users/6498020/willyjoker"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1517597399, "post_id": 48588647, "comment_id": 84175273, "body": "@simbabque I already looked at MooseX::App and CLI::Framework, but it looks to me that these are good for writing one program with many commands. I need to write many separate programs with just one (implicit) command each, even if they all share some code."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1517939366, "post_id": 48588647, "comment_id": 84295615, "body": "Please see <a href=\"http://stackoverflow.com/help/someone-answers\">What should I do when someone answers my question?</a>"}], "answers": [{"comments": [{"owner": {"reputation": 592, "user_id": 6498020, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7ed5163343848e636e84d00bef5bdc58?s=128&d=identicon&r=PG&f=1", "display_name": "willyjoker", "link": "https://stackoverflow.com/users/6498020/willyjoker"}, "edited": false, "score": 0, "creation_date": 1517604120, "post_id": 48589643, "comment_id": 84178358, "body": "Thanks for your answer @ikegami. As I stated in the last paragraph of the question, I&#39;d rather not have the action name passed as a parameter. I&#39;d prefer getting the action name from the module which is being executed."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 592, "user_id": 6498020, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7ed5163343848e636e84d00bef5bdc58?s=128&d=identicon&r=PG&f=1", "display_name": "willyjoker", "link": "https://stackoverflow.com/users/6498020/willyjoker"}, "edited": false, "score": 0, "creation_date": 1517604297, "post_id": 48589643, "comment_id": 84178425, "body": "Look again. The parameter is the name of the module. Instead of <code>perl actionX.pm arguments</code>, use <code>action actionX arguments</code>."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 1, "last_activity_date": 1517605161, "last_edit_date": 1517605161, "creation_date": 1517599790, "answer_id": 48589643, "question_id": 48588647, "link": "https://stackoverflow.com/questions/48588647/can-i-know-which-child-class-am-i-from-parents-code-in-moose/48589643#48589643", "title": "Can I know which child class am I from parent&#39;s code in Moose?", "body": "<p>Fundamentally, you'll need to call <code>run</code> as a method, using the name of the child class (if it's a class method) or an object of the child class (if it's an instance method) as the invocant.</p>\n\n<p>Calling <code>run</code> as a class method:</p>\n\n<pre><code>ActionX-&gt;run(...)\n</code></pre>\n\n<p>Calling <code>run</code> as an instance method:</p>\n\n<pre><code>ActionX-&gt;new(...)-&gt;run(...)\n</code></pre>\n\n<hr>\n\n<p>The other issue is that you're executing a <code>.pm</code> file, which leads to problems. Load modules, don't execute them. For example,</p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\n\nmy $action = shift(@ARGV)\n   or die(\"usage\\n\");\n\n$action =~ /^\\w+\\z/\n   or die(\"Bad action\\n\");\n\nmy $pkg = $action;   # Or: my $pkg = \"...::\" . $action;\n\nmy $module =~ s{::}{/}g . '.pm';\nrequire $module;\n\n$pkg-&gt;new(@ARGV)-&gt;run();\n</code></pre>\n\n<p>If the script is named <code>action</code>, then you can do</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>action ActionX parameters\n</code></pre>\n"}], "owner": {"reputation": 592, "user_id": 6498020, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7ed5163343848e636e84d00bef5bdc58?s=128&d=identicon&r=PG&f=1", "display_name": "willyjoker", "link": "https://stackoverflow.com/users/6498020/willyjoker"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 65, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1517605161, "creation_date": 1517595382, "last_edit_date": 1517596932, "question_id": 48588647, "link": "https://stackoverflow.com/questions/48588647/can-i-know-which-child-class-am-i-from-parents-code-in-moose", "title": "Can I know which child class am I from parent&#39;s code in Moose?", "body": "<p>I am creating a set of small Perl programs which will be run like a CLI. I want all of them to share some features, eg. same input/output format (probably JSON). I also want each component to be black-box testable with mock arguments. This is what I have so far:</p>\n\n<ul>\n<li><p>A number of modules <code>actionA.pm</code>, <code>actionB.pm</code>... <code>actionZZZ.pm</code>, one for each component/operation. All of them will <code>use Moose</code> and should have a <code>sub run {...}</code> which will receive a data hasref/object with the operation's input parameters, and any handle (database, filesystem, whatever) they need to use, and return a data hashref/object with the operation's output parameters.</p></li>\n<li><p>A Moose role which <code>requires 'run'</code> and is consumed by every <code>actionX.pm</code> module, forcing them to implement <code>run</code>.</p></li>\n<li><p>Additional Moose roles and/or superclasses for certain subsets of the <code>actionX.pm</code> modules, so they can consume them to specify wether they need their <code>run</code> method to be provided with a database handler, a filesystem handler, etc. </p></li>\n<li><p>A common Moose superclass (don't know if this really needs to be either Moose nor a superclass, just want this to be a fairly simple one-liner on each <code>actionX.pm</code>), let's call it <code>abstractAction.pm</code>, for all of the <code>actionX.pm</code> classes, which converts them into some sort of Modulino (see below). </p></li>\n</ul>\n\n<p>What I want to achieve with this is that, when I run <code>perl actionX.pm arguments</code> from command line, some code in <code>abstractAction.pm</code> will:</p>\n\n<ol>\n<li><p>Read JSON/whatever from <code>@ARGV</code> and convert it to Perl data structures.</p></li>\n<li><p>This part is not clear: know that it was called from/as <code>actionX</code>, so it knows that if <code>actionX</code> consumes role <code>needDB</code>, it will need to get a database handler to pass it to <code>run</code>, etc.</p></li>\n<li><p>Call <code>actionX-&gt;run()</code> passing the data object and any handler obtained at step 2.</p></li>\n</ol>\n\n<hr>\n\n<p>I tried using both <code>run()</code> and <code>__PACKAGE__-&gt;run()</code> in <code>abstractAction.pm</code>, but it calls the superclass method, not the child's. Is there any way I can know the child's package name from the parent? That doesn't even sound good. Is there a better way to do what I am trying to achieve? </p>\n\n<p>I know I could simply do <code>perl abstractAction.pm actionX arguments</code> instead of <code>perl actionX.pm arguments</code> and call it a day, but I'd rather not.</p>\n"}, {"tags": ["xml", "perl", "csv"], "comments": [{"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1517586644, "post_id": 48586024, "comment_id": 84169436, "body": "404 means the URI you&#39;re accessing doesn&#39;t exist. Try doing <code>curl</code> to talk to it - you can <code>curl -XPUT</code>"}, {"owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "edited": false, "score": 1, "creation_date": 1517588604, "post_id": 48586024, "comment_id": 84170681, "body": "Is <code>$uri</code> correct? Add a line after populating it to print it out so you can verify it"}], "answers": [{"comments": [{"owner": {"reputation": 145, "user_id": 7541194, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/3EjPX.jpg?s=128&g=1", "display_name": "StayCalm", "link": "https://stackoverflow.com/users/7541194/staycalm"}, "edited": false, "score": 0, "creation_date": 1517839462, "post_id": 48588141, "comment_id": 84245285, "body": "<code>my $uri = &quot;https:&#47;&#47;hostname:9060&#47;ers&#47;config&#47;networkdevice&#47;$id&quot;</code> this is a right way to write. <code>id</code> without clips"}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": true, "score": 1, "last_activity_date": 1517593302, "creation_date": 1517593302, "answer_id": 48588141, "question_id": 48586024, "link": "https://stackoverflow.com/questions/48586024/add-information-from-a-csv-file-to-a-url/48588141#48588141", "title": "Add information from a CSV file to a URL", "body": "<p>The most obvious problem is that <code>$uri</code> won't be expanded in this statement</p>\n\n<pre><code>my $uri = 'https://hostname:9060/ers/config/networkdevice/($id)'\n</code></pre>\n\n<p>There are no embedded double-quotes in the string, so there's no problem with using them as delimiters, which <em>will</em> interpolate the scalar</p>\n\n<pre><code>my $uri = \"https://hostname:9060/ers/config/networkdevice/($id)\"\n</code></pre>\n\n<p>I cannot guarantee that this will solve the immediate problem as I have no way of testing it, but it seems likely</p>\n"}], "owner": {"reputation": 145, "user_id": 7541194, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/3EjPX.jpg?s=128&g=1", "display_name": "StayCalm", "link": "https://stackoverflow.com/users/7541194/staycalm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 58, "favorite_count": 0, "accepted_answer_id": 48588141, "answer_count": 1, "score": 0, "last_activity_date": 1517603576, "creation_date": 1517585774, "last_edit_date": 1517603576, "question_id": 48586024, "link": "https://stackoverflow.com/questions/48586024/add-information-from-a-csv-file-to-a-url", "title": "Add information from a CSV file to a URL", "body": "<p>I need to make multiple HTTP PUT requests.</p>\n\n<p>I have an XML template for them, and a CSV file with IDs, names and IPs from my devices. (I want to change names or IPs in my system).</p>\n\n<p>The devices have exactly the IDs in my CSV data.</p>\n\n<h3>Input.csv (id, name, ip)</h3>\n\n<pre><code>123,test1, 10.56.22.1\n124,test2, 10.56.2\n</code></pre>\n\n<h3>My Perl script</h3>\n\n<pre><code>use strict;\nuse warnings;\n\nuse XML::Twig;\nuse LWP::UserAgent;\nuse HTTP::Headers;\nuse HTTP::Request;\nuse File::Slurp;\nuse JSON -support_by_pp;\nuse LWP 5.64;\nuse MIME::Base64;\nuse IO::Socket::SSL;\nuse File::Slurp;\n\n# Create a user agent object\nmy $ua = LWP::UserAgent-&gt;new( ssl_opts =&gt; {\n    SSL_verify_mode =&gt; SSL_VERIFY_NONE(),\n    verify_hostname =&gt; 0,\n} );\n\nmy $xml = XML::Twig-&gt;new-&gt;parsefile ('iemplate.xml');\n$xml-&gt;set_pretty_print('indented_a');\n\nopen ( my $input, '&lt;', 'input.csv' ) or die $!;\n\n    while ( &lt;$input&gt; ) {\n        chomp;\n        my ($id, $name, $ip) = split /,/;\n\n        $xml-&gt;root-&gt;set_att('name', $name);\n        $xml-&gt;get_xpath('//ipaddress', 0)-&gt;set_text($ip);\n\n        my $uri = 'https://hostname:9060/ers/config/networkdevice/($id)';\n        my $req = HTTP::Request-&gt;new('PUT', $uri, [\n            Accept       =&gt; 'application/vnd.com.cisco.ise.network.networkdevice.1.1+xml',\n            Content_Type =&gt; 'application/vnd.com.cisco.ise.network.networkdevice.1.1+xml;charset=utf-8'\n        ],\n        $xml-&gt;sprint\n    );\n\n    $req-&gt;content($xml-&gt;sprint);\n    $req-&gt;authorization_basic(\"user\", \"user\");\n\n    # Pass request to the user agent and get a response back\n    my $res = $ua-&gt;request($req);\n\n    # Check the outcome of the response\n    if ($res-&gt;is_success) {\n        print $res-&gt;status_line, \"n\";\n    }\n    else {\n        print $res-&gt;status_line, \"n\";\n    }\n}\n</code></pre>\n\n<p>I get this error:</p>\n\n<blockquote>\n  <p>404 Not Found</p>\n</blockquote>\n\n<p>But I know that these IDs are in my system. How should I add my IDs to the URL for doing multiple PUT requests?</p>\n"}, {"tags": ["perl", "datetime", "mojolicious", "strftime"], "comments": [{"owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "edited": false, "score": 0, "creation_date": 1517582273, "post_id": 48584743, "comment_id": 84166551, "body": "What is <code>$data-&gt;[1]</code>? It doesn&#39;t look like it&#39;s a <code>Time::Piece</code> - it looks more like it&#39;s a string containing a date"}, {"owner": {"reputation": 1215, "user_id": 3525290, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/303246ebe05535ca2f4e437eb6cfb7f4?s=128&d=identicon&r=PG&f=1", "display_name": "user3525290", "link": "https://stackoverflow.com/users/3525290/user3525290"}, "reply_to_user": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "edited": false, "score": 0, "creation_date": 1517582374, "post_id": 48584743, "comment_id": 84166598, "body": "yes that is data from an array or hash.  I am not familiar with perl lingo.  But I received data from a query and I am looping over and displaying the data.  The output of data-&gt;[1] is Feb 5 2018 08:00AM"}, {"owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "edited": false, "score": 3, "creation_date": 1517583045, "post_id": 48584743, "comment_id": 84167050, "body": "Your question really needs fleshing out with a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> so we can see where <code>$data</code> is coming from."}, {"owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "edited": false, "score": 0, "creation_date": 1517585739, "post_id": 48584743, "comment_id": 84168873, "body": "And where does <code>$query_data</code> come from? And so on etc... eventually (hopefully) you&#39;ll get to the part of your code that generated &quot;Feb 5 2018 08:00AM&quot; and someone will be able to provide an answer for you."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1517594214, "post_id": 48584743, "comment_id": 84173821, "body": "There is a superfluous closing parenthesis in <code>push(@query, @{$dbh-&gt;$myquery)})</code>. You should always paste text copied directly from your live code to prevent simple errors like this."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1517594397, "post_id": 48584743, "comment_id": 84173910, "body": "What are all the percentage signs <code>%</code>? Are you also using <a href=\"https://metacpan.org/pod/Mojo::Template\" rel=\"nofollow noreferrer\"><code>Mojo::Template</code></a>?"}], "answers": [{"comments": [{"owner": {"reputation": 1215, "user_id": 3525290, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/303246ebe05535ca2f4e437eb6cfb7f4?s=128&d=identicon&r=PG&f=1", "display_name": "user3525290", "link": "https://stackoverflow.com/users/3525290/user3525290"}, "edited": false, "score": 0, "creation_date": 1517590187, "post_id": 48586811, "comment_id": 84171679, "body": "I was in the middle of trying that very code, but I am getting error parsing time.    sub strptime { my $time = shift;   my $string = shift;    my $format = @_ ? shift(@_) : &quot;%a, %d %b %Y %H:%M:%S %Z&quot;;     my @vals = _strptime($string, $format);      return scalar $time-&gt;_mktime(\\@vals, (ref($time) ? $time-&gt;[c_islocal] : 0)); 484: }"}, {"owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "reply_to_user": {"reputation": 1215, "user_id": 3525290, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/303246ebe05535ca2f4e437eb6cfb7f4?s=128&d=identicon&r=PG&f=1", "display_name": "user3525290", "link": "https://stackoverflow.com/users/3525290/user3525290"}, "edited": false, "score": 0, "creation_date": 1517592250, "post_id": 48586811, "comment_id": 84172808, "body": "It looks like that format isn&#39;t happy with the AM/PM at the end of the string, despite your example of output from <code>strftime</code> using it. I&#39;ve found a format that should work and have updated the question accordingly."}], "tags": [], "owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "is_accepted": false, "score": 1, "last_activity_date": 1517594719, "last_edit_date": 1517594719, "creation_date": 1517588463, "answer_id": 48586811, "question_id": 48584743, "link": "https://stackoverflow.com/questions/48584743/perl-mojolicious-datetime/48586811#48586811", "title": "Perl mojolicious datetime", "body": "<p>The problem is that you're doing a query to your database and one of the fields is being returned as a formatted date/time string. This isn't much use unless you're going to output it as is, so you need to parse it into a format that your code can use.</p>\n\n<p><code>Time::Piece</code> has a method for creating an object from a string called <code>strptime</code> which does the reverse of <code>strftime</code> that mimics the C function of the same name.</p>\n\n<p>You need to go through each row in the results you get and parse that first field into the <code>Time::Piece</code> object the code in your template is expecting. I've not got any means of testing this, but I believe based on what code you've provided, that something like this should do the trick.</p>\n\n<pre><code>foreach my $row (@{$dbh-&gt;$myquery})\n  {\n  $row-&gt;[0]=Time::Piece-&gt;strptime($row-&gt;[0],\"%b %e %Y %H:%M%p\");\n  push(@query, $row);\n  }\n$c-&gt;stash(query_data =&gt; \\@query);\n</code></pre>\n"}], "owner": {"reputation": 1215, "user_id": 3525290, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/303246ebe05535ca2f4e437eb6cfb7f4?s=128&d=identicon&r=PG&f=1", "display_name": "user3525290", "link": "https://stackoverflow.com/users/3525290/user3525290"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 228, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1517594719, "creation_date": 1517581500, "last_edit_date": 1517594487, "question_id": 48584743, "link": "https://stackoverflow.com/questions/48584743/perl-mojolicious-datetime", "title": "Perl mojolicious datetime", "body": "<p>I am trying to convert an array to a date</p>\n\n<pre><code>% use Time::Piece;\n% my $now = localtime;\n&lt;%= $now-&gt;strftime(\"%b %e %Y %X\") %&gt;&lt;br&gt;\nFeb 2 2018 09:13:04 AM &lt;- or current date and time\n&lt;%= $now-&gt;strftime('%Y%m%d', gmtime()) %&gt;\n</code></pre>\n\n<p>prints <code>20180202</code></p>\n\n<pre><code>&lt;%= $data-&gt;[1]-&gt;strftime('%Y%m%d', gmtime()) %&gt;\n</code></pre>\n\n<p>Getting error</p>\n\n<blockquote>\n  <p>can't locate object method <code>strftime</code> via package \"Feb 2 2018 09:13:04AM</p>\n</blockquote>\n\n<pre><code>% for my $data (@$query_data){\n  $data-&gt;[1]\n  $data-&gt;[2] etc...\n%}\n</code></pre>\n\n<p>The Data prints just fine, but when I try to I guess convert I get the error.</p>\n\n<pre><code>my $myquery = \"select date1, name, id from table where id=5;\";\n</code></pre>\n\n<p>Data returned from the query is Feb 5 2018 08:15AM,Mike,5</p>\n\n<pre><code>push(@query, @{$dbh-&gt;$myquery)});\n$c-&gt;stash(query_data =&gt; \\@query);\n</code></pre>\n"}, {"tags": ["perl"], "answers": [{"comments": [{"owner": {"reputation": 15, "user_id": 1857016, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/09479f2f87cf5252c3b0c9b60635ab51?s=128&d=identicon&r=PG", "display_name": "user1857016", "link": "https://stackoverflow.com/users/1857016/user1857016"}, "edited": false, "score": 0, "creation_date": 1517562570, "post_id": 48579032, "comment_id": 84154548, "body": "Hi and thanks for the comment. Actually this script worked perfectly in Windows platform.   Can you please provide solution for this or point what library I should use ?"}, {"owner": {"reputation": 9961, "user_id": 2139766, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/b3qcA.png?s=128&g=1", "display_name": "AnFi", "link": "https://stackoverflow.com/users/2139766/anfi"}, "reply_to_user": {"reputation": 15, "user_id": 1857016, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/09479f2f87cf5252c3b0c9b60635ab51?s=128&d=identicon&r=PG", "display_name": "user1857016", "link": "https://stackoverflow.com/users/1857016/user1857016"}, "edited": false, "score": 0, "creation_date": 1517563362, "post_id": 48579032, "comment_id": 84155013, "body": "Sample fixes added to the reply."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1517581100, "post_id": 48579032, "comment_id": 84165744, "body": "You should ordinarily put a path separator <code>&#47;</code> between the directory and the filename. There is no guarantee that the directory name will end with a slash, but multiple consecutive slashes will be collapsed into one."}, {"owner": {"reputation": 9961, "user_id": 2139766, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/b3qcA.png?s=128&g=1", "display_name": "AnFi", "link": "https://stackoverflow.com/users/2139766/anfi"}, "edited": false, "score": 0, "creation_date": 1517586297, "post_id": 48579032, "comment_id": 84169198, "body": "I have made the recommendation (end directory name with directory separator) to make the script portable between systems with different directory separators."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1517603923, "post_id": 48579032, "comment_id": 84178282, "body": "Rather than making a procedural rule, you should <code>use File::Spec::Functions &#39;catfile&#39;</code> and <code>$file = catfile($dir, $file)</code> which is portable across systems. As I said, it will all work anyway as long as you use <code>&quot;$dir&#47;$file&quot;</code> as multiple consecutive slashes will be collapsed to one."}, {"owner": {"reputation": 9961, "user_id": 2139766, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/b3qcA.png?s=128&g=1", "display_name": "AnFi", "link": "https://stackoverflow.com/users/2139766/anfi"}, "edited": false, "score": 0, "creation_date": 1517604844, "post_id": 48579032, "comment_id": 84178646, "body": "You are are right <b>for bigger scripts</b>.  I use frequently scripts with less than fifty lines. I makes me avoid using external modules for &quot;trivial&quot; tasks. One size does not fit all ;-)"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1517677812, "post_id": 48579032, "comment_id": 84196268, "body": "@Anfi: Then, like I said, just use <code>&quot;$dir&#47;$file&quot;</code>. It will always work whether there&#39;s a slash at the end of the directory path or not."}], "tags": [], "owner": {"reputation": 9961, "user_id": 2139766, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/b3qcA.png?s=128&g=1", "display_name": "AnFi", "link": "https://stackoverflow.com/users/2139766/anfi"}, "is_accepted": false, "score": 3, "last_activity_date": 1517563330, "last_edit_date": 1517563330, "creation_date": 1517561797, "answer_id": 48579032, "question_id": 48578409, "link": "https://stackoverflow.com/questions/48578409/check-file-size-and-if-file-is-not-growing-then-move-it-readdir/48579032#48579032", "title": "Check file size and if file is not growing, then move it [readdir]", "body": "<p>The filename returned by <code>readdir</code> is relative to the <code>opendir</code> directory.  Files test (e.g. <code>-s</code>) will not work (or test wrong file) if you execute the script with another directory as current directory.</p>\n\n<p><code>perldoc -f readdir</code>  </p>\n\n<blockquote>\n  <p><strong>readdir DIRHANDLE</strong><br>\n  [...] If you're planning to filetest the return values out of a\n  \"readdir\", you'd better prepend the directory in question.\n  Otherwise, because we didn't \"chdir\" there, it would have bee\n  testing the wrong file. [...]</p>\n</blockquote>\n\n<pre><code># FIX1 Keep directory name in variable, make it end with directory separator \nmy $dir = \"/share/Dropbox/test/in/\";\nwhile (opendir my $dirh, $dir ) {\n    ...\n    # FIX2: prepend directory name (with trailing directory separator)\n    #       for size tests  \n    my $size1 = -s \"$dir$file\";\n    print \"$size1\\n\";\n    sleep 2;\n    my $size2 = -s \"$dir$file\";\n    print \"$size2\\n\";\n    ....\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1073, "user_id": 1039320, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/28ba137ea03056ffb3a2e6db49ac29cd?s=128&d=identicon&r=PG", "display_name": "jreisinger", "link": "https://stackoverflow.com/users/1039320/jreisinger"}, "is_accepted": true, "score": -1, "last_activity_date": 1517580898, "last_edit_date": 1517580898, "creation_date": 1517570894, "answer_id": 48581727, "question_id": 48578409, "link": "https://stackoverflow.com/questions/48578409/check-file-size-and-if-file-is-not-growing-then-move-it-readdir/48581727#48581727", "title": "Check file size and if file is not growing, then move it [readdir]", "body": "<p>The problem is the one\n<a href=\"https://stackoverflow.com/a/48579032/622310\">described by @AnFi</a>.\nThis works for me on Linux (just comment out the <code>move</code> line):</p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\n\nmy $dirpath = shift;    # first cmdline argument\n\nopendir my $dirh, $dirpath\n  or die \"Can't opendir $dirpath: $!\\n\";\n\nchdir $dirpath\n  or die \"Can't chdir to $dirpath: $!\\n\";\n\nwhile ( my $file = readdir $dirh ) {\n\n    next if $file =~ m/^\\./;    # skip dotfiles\n    next if not -f $file;       # skip non-files\n\n    my $size1 = -s $file;\n    print \"$size1\\n\";\n    sleep 2;\n    my $size2 = -s $file;\n    print \"$size2\\n\";\n\n    if ( $size1 == $size2 ) {\n\n        print \"moving $file\\n\";\n        #move($file,\"/share/Dropbox/test/out\");\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 15, "user_id": 1857016, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/09479f2f87cf5252c3b0c9b60635ab51?s=128&d=identicon&r=PG", "display_name": "user1857016", "link": "https://stackoverflow.com/users/1857016/user1857016"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 383, "favorite_count": 0, "accepted_answer_id": 48581727, "answer_count": 2, "score": 1, "last_activity_date": 1518782059, "creation_date": 1517559222, "last_edit_date": 1592644375, "question_id": 48578409, "link": "https://stackoverflow.com/questions/48578409/check-file-size-and-if-file-is-not-growing-then-move-it-readdir", "title": "Check file size and if file is not growing, then move it [readdir]", "body": "<p>I made script first for Windows platform and it worked. Now I have moved the script to Ubuntu and can not get it working.</p>\n<p>Is the problem in reading the filesize?</p>\n<pre><code>while ( opendir my $dirh, &quot;/share/Dropbox/test/in&quot; ) {\n\n    while ( my $file = readdir $dirh ) {\n\n        # filter . &amp; .. folders out\n        next if ($file =~ m/^\\./);\n\n        my $size1 = -s $file;\n        print &quot;$size1\\n&quot;;\n\n        sleep 2;\n\n        my $size2 = -s $file;\n        print &quot;$size2\\n&quot;;\n\n        if ( $size1 == $size2 ) {\n            move( $file, &quot;/share/Dropbox/test/out&quot; );\n        }\n    }\n\n    sleep 1;\n}\nclosedir DIR;\n</code></pre>\n<p>And the warnings I get when running this:</p>\n<blockquote>\n<p>Use of uninitialized value $size1 in concatenation (.) or string at ./file_ready_2.pl line 20.</p>\n<p>Use of uninitialized value $size2 in concatenation (.) or string at ./file_ready_2.pl line 23.</p>\n<p>Use of uninitialized value $size2 in numeric eq (==) at ./file_ready_2.pl line 25.</p>\n<p>Use of uninitialized value $size1 in numeric eq (==) at ./file_ready_2.pl line 25.</p>\n<p>Use of uninitialized value $size1 in concatenation (.) or string at ./file_ready_2.pl line 20.</p>\n<p>Use of uninitialized value $size2 in concatenation (.) or string at ./file_ready_2.pl line 23.</p>\n</blockquote>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 3034, "user_id": 6101071, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9b1da77c00202a8477bee1a68950824f?s=128&d=identicon&r=PG&f=1", "display_name": "Srdjan M.", "link": "https://stackoverflow.com/users/6101071/srdjan-m"}, "edited": false, "score": 0, "creation_date": 1517574707, "post_id": 48577739, "comment_id": 84161893, "body": "Try <a href=\"https://regex101.com/r/rkLUXU/1\" rel=\"nofollow noreferrer\">regex101.com/r/rkLUXU/1</a>"}], "answers": [{"tags": [], "owner": {"reputation": 8926, "user_id": 5331061, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/g1Sv2.jpg?s=128&g=1", "display_name": "Gurmanjot Singh", "link": "https://stackoverflow.com/users/5331061/gurmanjot-singh"}, "is_accepted": false, "score": 1, "last_activity_date": 1517557222, "last_edit_date": 1517557222, "creation_date": 1517556820, "answer_id": 48577802, "question_id": 48577739, "link": "https://stackoverflow.com/questions/48577739/regexp-print-line-by-line-and-remove-last-word/48577802#48577802", "title": "regexp print line by line and remove last word", "body": "<p>Try this regex:</p>\n\n<pre><code>^(?=(?:\\w+ \\w+)).*\\K\\b\\w+\n</code></pre>\n\n<p>Replace each match with a blank string</p>\n\n<p><a href=\"https://regex101.com/r/vbbgjg/1\" rel=\"nofollow noreferrer\">Click for Demo</a></p>\n\n<p>OR</p>\n\n<pre><code>^((?=(?:\\w+ \\w+)).*\\b)\\w+\n</code></pre>\n\n<p>and replace each match with <code>\\1</code></p>\n\n<p><a href=\"https://regex101.com/r/vbbgjg/3\" rel=\"nofollow noreferrer\">Click for Demo</a></p>\n\n<p><strong>Explanation(1st Regex):</strong></p>\n\n<ul>\n<li><code>^</code> - asserts the start of the line</li>\n<li><code>(?=(?:\\w+ \\w+))</code> - positive lookahead to check if the string has 2 words present in it</li>\n<li><code>.*</code> - If the above condition satisfies, then match 0+ occurrences of any character(except newline) until the end of the line</li>\n<li><code>\\K</code> - forget everything matched so far</li>\n<li><code>\\b</code> - backtrack to find the last word boundary</li>\n<li><code>\\w+</code> - matches the last word</li>\n</ul>\n"}, {"comments": [{"owner": {"reputation": 8926, "user_id": 5331061, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/g1Sv2.jpg?s=128&g=1", "display_name": "Gurmanjot Singh", "link": "https://stackoverflow.com/users/5331061/gurmanjot-singh"}, "edited": false, "score": 1, "creation_date": 1517557463, "post_id": 48577928, "comment_id": 84152047, "body": "A much better solution"}, {"owner": {"reputation": 31, "user_id": 7843105, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/e84ed50162dbaadac55689f7921a1e56?s=128&d=identicon&r=PG&f=1", "display_name": "Krishh", "link": "https://stackoverflow.com/users/7843105/krishh"}, "edited": false, "score": 0, "creation_date": 1517564754, "post_id": 48577928, "comment_id": 84155911, "body": "above regexp is works well but for &quot;valuedescription&quot; it is giving only &quot;v&quot;. for other line it works perfectly"}, {"owner": {"reputation": 658023, "user_id": 548225, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/dab08478b226280d4a30894c9a7ed719?s=128&d=identicon&r=PG", "display_name": "anubhava", "link": "https://stackoverflow.com/users/548225/anubhava"}, "edited": false, "score": 0, "creation_date": 1517564975, "post_id": 48577928, "comment_id": 84156069, "body": "Check linked demo also. <code>valuedescription</code> doesn&#39;t match hence remains unchanged."}, {"owner": {"reputation": 31, "user_id": 7843105, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/e84ed50162dbaadac55689f7921a1e56?s=128&d=identicon&r=PG&f=1", "display_name": "Krishh", "link": "https://stackoverflow.com/users/7843105/krishh"}, "edited": false, "score": 0, "creation_date": 1517572130, "post_id": 48577928, "comment_id": 84160414, "body": "@anubhava: sorry there was space before single words so it was not working.. Thank you for your help :)"}, {"owner": {"reputation": 658023, "user_id": 548225, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/dab08478b226280d4a30894c9a7ed719?s=128&d=identicon&r=PG", "display_name": "anubhava", "link": "https://stackoverflow.com/users/548225/anubhava"}, "edited": false, "score": 0, "creation_date": 1517572174, "post_id": 48577928, "comment_id": 84160444, "body": "Glad to know it worked out, <a href=\"http://meta.stackexchange.com/a/5235/160242\">you may mark the answer as accepted by clicking on <b>tick mark</b> on top-left of this answer</a>"}], "tags": [], "owner": {"reputation": 658023, "user_id": 548225, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/dab08478b226280d4a30894c9a7ed719?s=128&d=identicon&r=PG", "display_name": "anubhava", "link": "https://stackoverflow.com/users/548225/anubhava"}, "is_accepted": false, "score": 4, "last_activity_date": 1517557289, "creation_date": 1517557289, "answer_id": 48577928, "question_id": 48577739, "link": "https://stackoverflow.com/questions/48577739/regexp-print-line-by-line-and-remove-last-word/48577928#48577928", "title": "regexp print line by line and remove last word", "body": "<p>You can use:</p>\n\n<pre><code>$_ =~ s/(?&lt;=\\w)\\h+\\w+$//m; \n</code></pre>\n\n<p><a href=\"https://regex101.com/r/dgnpA2/1\" rel=\"nofollow noreferrer\">RegEx Demo</a></p>\n\n<p><strong>Explanation:</strong></p>\n\n<ul>\n<li><code>(?&lt;=\\w)</code>: Lookbehind to assert that we have at least one word char before last word</li>\n<li><code>\\h+</code>: Match 1+ horizontal whitespaces</li>\n<li><code>\\w+</code>: match a word with 1+ word characters</li>\n<li><code>$</code>: End of line</li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 574, "user_id": 2656421, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6d8a27cef8664dd07145fb80c3191423?s=128&d=identicon&r=PG", "display_name": "Doug", "link": "https://stackoverflow.com/users/2656421/doug"}, "is_accepted": false, "score": 0, "last_activity_date": 1517557815, "creation_date": 1517557815, "answer_id": 48578062, "question_id": 48577739, "link": "https://stackoverflow.com/questions/48577739/regexp-print-line-by-line-and-remove-last-word/48578062#48578062", "title": "regexp print line by line and remove last word", "body": "<p>a single word with no whitespace matches your regex since you've used \\s* both before and after the \\S+, and \\s* matches an empty string.</p>\n\n<p>You could use $_ =~ s/^(.*\\S)\\s+(\\S+)$/$1/;</p>\n\n<p>[Explanation: Match the RegEx if the line contains some number of characters ending with a non-whitespace (stored in $1), followed by 1 or more white-space characters, followed by 1 or more non-white-space characters.  If there is a match, replace it all with the first part ($1).]</p>\n\n<p>Though you might want to trim leading/trailing whitespace if you think it might contain any - depends on what you want to happen in those cases.</p>\n"}], "owner": {"reputation": 31, "user_id": 7843105, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/e84ed50162dbaadac55689f7921a1e56?s=128&d=identicon&r=PG&f=1", "display_name": "Krishh", "link": "https://stackoverflow.com/users/7843105/krishh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 250, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1517557815, "creation_date": 1517556518, "question_id": 48577739, "link": "https://stackoverflow.com/questions/48577739/regexp-print-line-by-line-and-remove-last-word", "title": "regexp print line by line and remove last word", "body": "<p>I am trying to remove last word from each line if line contains more than one word.</p>\n\n<p>If line has only one word then print it as it, no need to delete it.</p>\n\n<p>say below are the lines</p>\n\n<pre><code>address 34 address\nvalue 1 value\nvaluedescription\nsize 4 size\n</code></pre>\n\n<p>from above lines I want to remove all last words from each line except from 3rd line as it has only one word using regexp ..</p>\n\n<p>I tried below regexp and it is removing single word lines also </p>\n\n<pre><code> $_ =~ s/\\s*\\S+\\s*+$//; \n</code></pre>\n\n<p>Need your help for the same.</p>\n"}, {"tags": ["perl"], "answers": [{"comments": [{"owner": {"reputation": 51, "user_id": 9192366, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/0e1ee151f4ec5285d9c36bba7211d722?s=128&d=identicon&r=PG&f=1", "display_name": "milan", "link": "https://stackoverflow.com/users/9192366/milan"}, "edited": false, "score": 0, "creation_date": 1517739041, "post_id": 48578130, "comment_id": 84210137, "body": "after declaring each variable it gives me an error of <code>syntax error at try.pl line 21, near &quot;$all_dirs[&quot;</code>. I actuallydon&#39;t have to enter each subdirectory, but lets say that the script and txt files are in the same directory, I just need to read each txt file into seperate array and to asses it as lets say <code>@array, @array1..</code> and so one depending how much txt files are inside.."}], "tags": [], "owner": {"reputation": 1442, "user_id": 4115522, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/KR2bz.jpg?s=128&g=1", "display_name": "Reenactor Rob", "link": "https://stackoverflow.com/users/4115522/reenactor-rob"}, "is_accepted": false, "score": 0, "last_activity_date": 1517558054, "creation_date": 1517558054, "answer_id": 48578130, "question_id": 48577115, "link": "https://stackoverflow.com/questions/48577115/reading-multiple-txt-files-into-multiple-arrays-in-the-subdirectory/48578130#48578130", "title": "Reading multiple *txt files into multiple arrays in the subdirectory", "body": "<p>I have not tested this, I only typed the code into the window.  I am also rusty on my perl and do things in a blunt manner.</p>\n\n<p>Assuming all the text dirs are under one main directory. You open the main directory using opendir.  You then read all the entries in the main directory and test to see if the entry is a subdirectory(where the .txt files will be). </p>\n\n<p>Accessing the sub directory, you then you test for the .txt extension using glob and regex which will return an array, pushing the array into the main array, creating an array of arrays.  You can look up how to iterate over this structure to get your information. </p>\n\n<pre><code>@all_subdirs;\n\n$main_dir = \"C:\\main_dir\";\n\nmy @files;\nopendir (DIR,$main_dir) || die $!;\n@files = readdir (DIR);\nclosedir (DIR) || die $!;\n\n$i = 0;\n\nforeach $subdir(@files){\n  if(-d $sub_dir){    #-d tests for directory\n    @tmp = glob \"$main_dir\\$subdir\\*.txt\";\n    $all_dirs[$i] = [ @tmp ];\n     $i++;\n  }\n}\n</code></pre>\n\n<p>This stores the subdir array as an array reference.  To get an array back, you need to dereference it as follows:</p>\n\n<pre><code>$arrayref = $all_subdirs[0];\n@an_array = @$array_ref;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 51, "user_id": 9192366, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/0e1ee151f4ec5285d9c36bba7211d722?s=128&d=identicon&r=PG&f=1", "display_name": "milan", "link": "https://stackoverflow.com/users/9192366/milan"}, "edited": false, "score": 0, "creation_date": 1517738641, "post_id": 48580215, "comment_id": 84210021, "body": "I want to read content of each txt file into an array and if there are five txt file to asses and name them as <code>@array1, @array2...5</code>. Hm I have never used this modules.. I actually dont even have to asses each subdirectory. Lets say that the script and files are in the same directory, just need to read each of them into seperate array.."}, {"owner": {"reputation": 101, "user_id": 3048983, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c71e0a1c0f06f3cc4ef15a9284665c4c?s=128&d=identicon&r=PG", "display_name": "Arjen", "link": "https://stackoverflow.com/users/3048983/arjen"}, "reply_to_user": {"reputation": 51, "user_id": 9192366, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/0e1ee151f4ec5285d9c36bba7211d722?s=128&d=identicon&r=PG&f=1", "display_name": "milan", "link": "https://stackoverflow.com/users/9192366/milan"}, "edited": false, "score": 0, "creation_date": 1518445643, "post_id": 48580215, "comment_id": 84497346, "body": "To read the contents of a file into an array, line by line, Perl has a very easy syntax: <code>sub read_file { my $file = shift; open my $fh, &quot;&lt;&quot;, $file or die &quot;$file: $!&quot;; my @array = &lt;$fh&gt;; close $fh; return \\@array; }</code>"}], "tags": [], "owner": {"reputation": 101, "user_id": 3048983, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c71e0a1c0f06f3cc4ef15a9284665c4c?s=128&d=identicon&r=PG", "display_name": "Arjen", "link": "https://stackoverflow.com/users/3048983/arjen"}, "is_accepted": false, "score": 0, "last_activity_date": 1517565822, "creation_date": 1517565822, "answer_id": 48580215, "question_id": 48577115, "link": "https://stackoverflow.com/questions/48577115/reading-multiple-txt-files-into-multiple-arrays-in-the-subdirectory/48580215#48580215", "title": "Reading multiple *txt files into multiple arrays in the subdirectory", "body": "<p>You are not clear whether you wish to read the <em>names</em> of the files into an array, or the <em>contents</em> of the files.</p>\n\n<p>In the former case, you may benefit from the <code>File::Find</code> module to collect all filenames in a specific directory and its subdirectories; in the latter case you should use both <code>File::Find</code> and <code>File::Slurp</code> to read the contents.</p>\n"}], "owner": {"reputation": 51, "user_id": 9192366, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/0e1ee151f4ec5285d9c36bba7211d722?s=128&d=identicon&r=PG&f=1", "display_name": "milan", "link": "https://stackoverflow.com/users/9192366/milan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 64, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1517565822, "creation_date": 1517553908, "question_id": 48577115, "link": "https://stackoverflow.com/questions/48577115/reading-multiple-txt-files-into-multiple-arrays-in-the-subdirectory", "title": "Reading multiple *txt files into multiple arrays in the subdirectory", "body": "<p>I have multiple <code>subdirectories</code> and within each of them I have different number of <code>txt</code> files. I am trying to read each of the <code>txt</code> files into an <code>array</code> from each <code>subdirectory</code>. Note that each <code>subdirectory</code> has different number of <code>txt</code> files.  I struggled to find that somebody did something similar. Does anybody has some suggestion where to look, how to do it or something like this?</p>\n\n<p>I have found some example how it can be done by using <code>server command</code>, but I it fails to do what I want. I am also a bit confused how to name each <code>array</code> although within different <code>subdirectory</code> arrays can have same names like <code>array1, array2, array3..</code></p>\n\n<pre><code>#!/usr/local/bin/perl\n\nuse strict;\nuse warnings;\nuse File::Glob;\n\n\nmy $txt;\nmy @fh;\nmy @table;\nmy $table;\n\nfor my $txt(glob'*.txt')\n{\nopen my $fh,'&lt;',$txt;\nprint \"$txt\\n\";\nfor (my $txt =1 ;$txt &lt;=8; $txt++)  \n{ \n    open ($fh,\"server$txt\"); \n    while (&lt;$fh&gt;) \n    { \n        chomp; \n        my @values = split \" \",$_; \n        push @{ \"table$txt\"},\\@values;\n        print \"$table$txt\\n\";\n    }\n}\n}\n</code></pre>\n\n<p>I can use this <code>bash script</code> to run <code>perl script</code> on all <code>subdirectories</code>:</p>\n\n<pre><code>for i in `ls -d */`;do cd $i; pwd; for j in *txt; do perl ../foo.pl $j; done; cd ../ ; done\n</code></pre>\n"}, {"tags": ["regex", "perl", "sequence", "fasta"], "comments": [{"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1517564059, "post_id": 48576532, "comment_id": 84155429, "body": "We cannot help you solve your problem if you don&#39;t post working code. I&#39;m guessing you&#39;ve pasted from a text editor, and it&#39;s truncated the long line."}, {"owner": {"reputation": 11, "user_id": 9303535, "user_type": "registered", "profile_image": "https://graph.facebook.com/10211428992456622/picture?type=large", "display_name": "James Sheppard", "link": "https://stackoverflow.com/users/9303535/james-sheppard"}, "reply_to_user": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1517567726, "post_id": 48576532, "comment_id": 84157893, "body": "Yes, you&#39;re right, just slipped my mind as I was copying the code. I&#39;ve updated the original post with the correct line."}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 9303535, "user_type": "registered", "profile_image": "https://graph.facebook.com/10211428992456622/picture?type=large", "display_name": "James Sheppard", "link": "https://stackoverflow.com/users/9303535/james-sheppard"}, "edited": false, "score": 0, "creation_date": 1517602145, "post_id": 48582642, "comment_id": 84177489, "body": "Hey there, thanks for the suggestions! I tried this line but am still getting the same output - it is still removing the IDs/gene names for EVERY record, not just those containing the strings of interest."}], "tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": false, "score": 0, "last_activity_date": 1517574291, "creation_date": 1517574291, "answer_id": 48582642, "question_id": 48576532, "link": "https://stackoverflow.com/questions/48576532/removing-identifier-with-unavailable-sequence-from-fasta-file/48582642#48582642", "title": "Removing identifier with &quot;unavailable sequence&quot; from FASTA file", "body": "<p>OK, so the root of your problem is your conditional expression:</p>\n\n<pre><code>print \"&gt;$_\" if ((length $seq) &gt; 10 &amp;&amp; ($seq !~ \"Sequence unavailable\" or $seq !~ \"No UTR is annotated for this transcript\"));\n</code></pre>\n\n<p>In particular - because you have a negated \"or\" condition - the not-or will <em>always</em> be \"true\" because <code>$seq !~ \"No UTR is annotated for this transcript\"</code> will evaluate as true when you have \"Sequence unavailable\". </p>\n\n<p>So decompose it - move the 'not' outside the brackets:</p>\n\n<pre><code>print \"&gt;$_\" if ((length $seq) &gt; 10 and not ($seq =~ /Sequence unavailable/ or $seq =~ /No UTR is annotated for this transcript/));\n</code></pre>\n\n<p>Or better still - break the conditions apart, and use a <code>next if</code> type construct to skip:</p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\n\n$/ = \"\\n&gt;\";\n\nwhile (&lt;&gt;) {\n\n   my ( $id, $seq ) = split /\\n/, ;\n\n   next if $seq =~ m/Sequence unavailable/;\n   next if $seq =~ m/No UTR is annotated for this transcript/;\n   next unless length $seq &gt; 10;\n   print;\n\n}\n</code></pre>\n\n<p>Which is hopefully clearer how the logic is operating? </p>\n"}], "owner": {"reputation": 11, "user_id": 9303535, "user_type": "registered", "profile_image": "https://graph.facebook.com/10211428992456622/picture?type=large", "display_name": "James Sheppard", "link": "https://stackoverflow.com/users/9303535/james-sheppard"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 117, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1517574291, "creation_date": 1517551021, "last_edit_date": 1517564980, "question_id": 48576532, "link": "https://stackoverflow.com/questions/48576532/removing-identifier-with-unavailable-sequence-from-fasta-file", "title": "Removing identifier with &quot;unavailable sequence&quot; from FASTA file", "body": "<p>I'm new to perl and regex, but have used the guidance from this article to try to remove gene sequences in a FASTA file that have either \"Sequence unavailable\" or \"No UTR is annotated...\" for a given identifier:\n<a href=\"https://www.biostars.org/p/127842/\" rel=\"nofollow noreferrer\">https://www.biostars.org/p/127842/</a></p>\n\n<p>Unfortunately, my perl script is not producing the desired results. The script is as follows: </p>\n\n<pre><code> #!/usr/bin/perl\nuse strict;\nuse warnings;\n\n$/=\"\\n&gt;\";\n\nwhile (&lt;&gt;) {\n\n s/&gt;//g;\n\n  my ($id, $seq) = split (/\\n/, $_);\n\n  print \"&gt;$_\" if ((length $seq) &gt; 10 &amp;&amp; ($seq !~ \"Sequence unavailable\" or $seq !~ \"No UTR is annotated for this transcript\"));\n\n}\n</code></pre>\n\n<p>The input file looks like this: </p>\n\n<pre><code>&gt;AT1G02810|AT1G02810.1\nCTGTGAGCCTATGGCATATGTACCACGTTAAGATTTAAGAAAATCTGGAATAAAAAATGC\nAACTAGATATTATGTTATACAAATCTAGGCCAGAGTCGGTTGTTTTCGGACCGTTCTGCC\nGTGAAACTGTGTTCCTTAACATTTTGATTTAACGTTTCCATATTTCTGACATTCCAATAA\nATTATTGATAACTAGTAATTAATTAAAACGGTTTACTCTGAACTCTGAAGTGTGTGAGGT\n&gt;AT1G04635|AT1G04635.1\nSequence unavailable\n&gt; ...\n</code></pre>\n\n<p>My script's output file is as follows:  </p>\n\n<pre><code>&gt;CTGTGAGCCTATGGCATATGTACCACGTTAAGATTTAAGAAAATCTGGAATAAAAAATGC\nAACTAGATATTATGTTATACAAATCTAGGCCAGAGTCGGTTGTTTTCGGACCGTTCTGCC\nGTGAAACTGTGTTCCTTAACATTTTGATTTAACGTTTCCATATTTCTGACATTCCAATAA\nATTATTGATAACTAGTAATTAATTAAAACGGTTTACTCTGAACTCTGAAGTGTGTGAGGT\n&gt; ...\n</code></pre>\n\n<p>However, my DESIRED output would be:  </p>\n\n<pre><code>&gt;AT1G02810|AT1G02810.1\nCTGTGAGCCTATGGCATATGTACCACGTTAAGATTTAAGAAAATCTGGAATAAAAAATGC\nAACTAGATATTATGTTATACAAATCTAGGCCAGAGTCGGTTGTTTTCGGACCGTTCTGCC\nGTGAAACTGTGTTCCTTAACATTTTGATTTAACGTTTCCATATTTCTGACATTCCAATAA\nATTATTGATAACTAGTAATTAATTAAAACGGTTTACTCTGAACTCTGAAGTGTGTGAGGT\n&gt; ...\n</code></pre>\n\n<p>From my understanding, I hope this is a simple syntax error in my perl script... would appreciate any guidance provided on obtaining the desired result.  </p>\n"}, {"tags": ["perl", "split", "command-line-arguments"], "answers": [{"comments": [{"owner": {"reputation": 2669, "user_id": 2193235, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/c30e9927de2a623831360a8b6ea20811?s=128&d=identicon&r=PG", "display_name": "msb", "link": "https://stackoverflow.com/users/2193235/msb"}, "edited": false, "score": 0, "creation_date": 1517535762, "post_id": 48574476, "comment_id": 84145677, "body": "Thanks for clarifying that. :) But this seems more like a comment than an answer... I don&#39;t understand how that explains the behaviour I&#39;m seeing (does that mean <code>readline</code> is the one trying to open the argument as a file?) or how that gives me an alternative that will help me not manually split inside my code. :thinking:"}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 0, "last_activity_date": 1517538920, "last_edit_date": 1517538920, "creation_date": 1517535530, "answer_id": 48574476, "question_id": 48574430, "link": "https://stackoverflow.com/questions/48574430/perl-autosplit-with-non-file-arguments/48574476#48574476", "title": "Perl autosplit with non-file arguments", "body": "<p><code>-n</code>, <code>-p</code>, <code>-l</code>, <code>-a</code> and <code>-F</code> don't change the state of the Perl interpreter. They literally alter the source code.</p>\n\n<pre><code>$ perl -MO=Deparse -a -ne'f()'\nLINE: while (defined($_ = readline ARGV)) {\n    our @F = split(' ', $_, 0);\n    f();\n}\n-e syntax OK\n</code></pre>\n\n<p>As you can see, there's really no such thing as autosplit. It's just a normal <code>split</code> injected into the source code, and it makes no sense to ask Perl to insert a <code>split</code> instead of just inserting a <code>split</code>. So, simply add the following to your loop:</p>\n\n<pre><code>my @F = split;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 2669, "user_id": 2193235, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/c30e9927de2a623831360a8b6ea20811?s=128&d=identicon&r=PG", "display_name": "msb", "link": "https://stackoverflow.com/users/2193235/msb"}, "edited": false, "score": 0, "creation_date": 1517538753, "post_id": 48574585, "comment_id": 84146382, "body": "Thanks, I like this idea. I had to remove my &quot;while&quot;, the fact that <code>-a</code> enables <code>-n</code> was unexpected but I&#39;m ok with it."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1517539008, "post_id": 48574585, "comment_id": 84146444, "body": "Why are you lying about what Perl adds?"}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1517539025, "post_id": 48574585, "comment_id": 84146449, "body": "@ikegami Which part is a lie?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1517539058, "post_id": 48574585, "comment_id": 84146455, "body": "The reversion. ."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1517539094, "post_id": 48574585, "comment_id": 84146467, "body": "@ikegami Can you be more specific?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1517539106, "post_id": 48574585, "comment_id": 84146472, "body": "Before that, it could have been a mistake, but now you intentionally changed it from the corrected version."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1517539155, "post_id": 48574585, "comment_id": 84146483, "body": "Or are you asking what&#39;s the <a href=\"https://perl5.git.perl.org/perl.git/blob/1654584e05038fee2cc4307f292f18e445d0e50f:/toke.c#l5300\" rel=\"nofollow noreferrer\">truth</a>? You&#39;ve just reverted it."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1517539191, "post_id": 48574585, "comment_id": 84146493, "body": "@ikegami The only functional change you made was to add a <code>LINE:</code> label, which is unused, so I omitted it from the explanation. That doesn&#39;t make my answer wrong."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1517539296, "post_id": 48574585, "comment_id": 84146513, "body": "Your claim that it&#39;s what Perl adds is what&#39;s wrong. Similar, sure, but that&#39;s not what you claimed."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1517539329, "post_id": 48574585, "comment_id": 84146518, "body": "It&#39;s not what Perl adds. You said that&#39;s what Perl adds."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1517539419, "post_id": 48574585, "comment_id": 84146543, "body": "@ikegami Wait, are you complaining that I used a different spelling of the same operators? <code>&lt;&gt;</code> vs. <code>readline</code>, etc?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1517539485, "post_id": 48574585, "comment_id": 84146566, "body": "There that, but there&#39;s also the functional changes."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1517539505, "post_id": 48574585, "comment_id": 84146572, "body": "@ikegami What functional changes?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1517539530, "post_id": 48574585, "comment_id": 84146577, "body": "Label presence and line numbering."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1517539661, "post_id": 48574585, "comment_id": 84146606, "body": "@ikegami The label is not functional in this program, and I didn&#39;t say the code in my answer is all that <code>-n</code> adds. It&#39;s just the relevant parts. I don&#39;t know what you mean by line numbering; your edit didn&#39;t add/remove any lines."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1517539792, "post_id": 48574585, "comment_id": 84146643, "body": "By your logic. I never claimed my edit was complete, so it was perfectly fine even though I missed something. Ridiculous, eh?"}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1517539875, "post_id": 48574585, "comment_id": 84146664, "body": "@ikegami Then, by your logic, you were also lying about what Perl adds. But seriously, I still don&#39;t know what you mean by line numbering."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1517539901, "post_id": 48574585, "comment_id": 84146671, "body": "No, I was mistaken, not lying. When the mistake was identified, I owned up to it."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1517540050, "post_id": 48574585, "comment_id": 84146702, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/164377/discussion-between-melpomene-and-ikegami\">continue this discussion in chat</a>."}], "tags": [], "owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "is_accepted": false, "score": 2, "last_activity_date": 1517538964, "last_edit_date": 1517538964, "creation_date": 1517536506, "answer_id": 48574585, "question_id": 48574430, "link": "https://stackoverflow.com/questions/48574430/perl-autosplit-with-non-file-arguments/48574585#48574585", "title": "Perl autosplit with non-file arguments", "body": "<p>There's not much of a \"mode\" here. <code>-n</code> adds</p>\n\n<pre><code>while (readline) {\n    ...\n}\n</code></pre>\n\n<p>around your code; <code>-a</code> adds a split statement:</p>\n\n<pre><code>while (readline) {\n    our @F = split;\n    ...\n}\n</code></pre>\n\n<p><code>readline</code> (without argument) reads from the filenames specified in <code>@ARGV</code> (or <code>STDIN</code> if <code>@ARGV</code> is empty).</p>\n\n<p><code>-a</code> implicitly enables <code>-n</code> because otherwise there is nothing for it to do; there is no \"autosplit mode\", it simply adds code around your program.</p>\n\n<p>Your best bet is to split manually:</p>\n\n<pre><code>while (&lt;STDIN&gt;) {\n    my @F = split;\n    print \"F $column: $F[$column]!\\n\";\n}\n</code></pre>\n\n<p>It's fairly short and it makes it obvious what's going on.</p>\n\n<p>I don't like using the command line shortcut switches (e.g. <code>-a</code>, <code>-p</code>, etc.) in script files. In a file you have enough space to write multiple lines, properly formatted / indented. It's better to be explicit.</p>\n\n<hr>\n\n<p>That said, you can technically do this:</p>\n\n<pre><code>#!perl -na\nour $column;\nBEGIN { $column = shift; }\nprint \"F $column: $F[$column]!\\n\";\n</code></pre>\n\n<p>This is equivalent to:</p>\n\n<pre><code>while (readline) {\n    our @F = split;\n    our $column;\n    BEGIN { $column = shift; }\n    print \"F $column: $F[$column]!\\n\";\n}\n</code></pre>\n\n<p>The <code>BEGIN</code> block only runs once, at compile time. Provided the script is only called with one argument, this will remove it from <code>@ARGV</code> before the <code>readline</code> loop starts, which will make it read from <code>STDIN</code>.</p>\n"}], "owner": {"reputation": 2669, "user_id": 2193235, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/c30e9927de2a623831360a8b6ea20811?s=128&d=identicon&r=PG", "display_name": "msb", "link": "https://stackoverflow.com/users/2193235/msb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 190, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1517538964, "creation_date": 1517535152, "question_id": 48574430, "link": "https://stackoverflow.com/questions/48574430/perl-autosplit-with-non-file-arguments", "title": "Perl autosplit with non-file arguments", "body": "<p>I'm trying to create a perl script that autosplits the STDIN, and then does something to column X. But I want the column to be passed by argument to the script. However, apparently, when I invoke perl with the autosplit flag, it switches to a mode where it tries to implicitly open the \"files\" defined in the command line arguments, even though my arguments aren't files.</p>\n\n<p>Example:</p>\n\n<pre><code>my $column = shift;\n\nwhile(&lt;STDIN&gt;) {\n      print \"F $column: $F[$column]!\\n\";\n}\n</code></pre>\n\n<p>Then I try to run it with argument <code>2</code> to print the 2nd column:</p>\n\n<pre><code>$ echo -e \"1 22\\n2 33\\n3 55\" | perl -a myscript.pl 2\n</code></pre>\n\n<p>When I turn on warnings and such, I get this error message:</p>\n\n<pre><code>Can't open 2: No such file or directory (#1)\n    (S inplace) The implicit opening of a file through use of the &lt;&gt;\n    filehandle, either implicitly under the -n or -p command-line\n    switches, or explicitly, failed for the indicated reason.  Usually\n    this is because you don't have read permission for a file which\n    you named on the command line.\n\n    (F) You tried to call perl with the -e switch, but /dev/null (or\n    your operating system's equivalent) could not be opened.\n</code></pre>\n\n<p>If I omit the <code>-a</code>, I don't get any errors and all is good, but then I need to manually split my lines. Is there any other flag I can use to make autosplit not do that? Or alternatively, can I start autosplit inside the script, so that it won't try to implicitly open the arguments as files? I can manually split my input, I just wanted to know what other alternatives I have.</p>\n"}, {"tags": ["python", "bash", "perl"], "comments": [{"owner": {"reputation": 930, "user_id": 9210255, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/00KKR.png?s=128&g=1", "display_name": "TigerTV.ru", "link": "https://stackoverflow.com/users/9210255/tigertv-ru"}, "edited": false, "score": 1, "creation_date": 1517532914, "post_id": 48574132, "comment_id": 84145029, "body": "add your code that you&#39;ve tried"}, {"owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "edited": false, "score": 0, "creation_date": 1517533394, "post_id": 48574132, "comment_id": 84145148, "body": "Welcome to StackOverflow.  Please read and follow the posting guidelines in the help documentation.  <a href=\"http://stackoverflow.com/help/mcve\">Minimal, complete, verifiable example</a> applies here.  We cannot effectively help you until you post your MCVE code and accurately describe the problem. We should be able to paste your posted code into a text file and reproduce the problem you described."}, {"owner": {"reputation": 17, "user_id": 9302719, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/17cf45f1402ec8fe081ede63309923f0?s=128&d=identicon&r=PG&f=1", "display_name": "Emc2", "link": "https://stackoverflow.com/users/9302719/emc2"}, "edited": false, "score": 0, "creation_date": 1517533420, "post_id": 48574132, "comment_id": 84145152, "body": "#!/bin/bash  while IFS=, read sku qty do     echo &quot;SKU=&#39;$sku&#39; QTY=&#39;$qty&#39;&quot; \tif [ &quot;$sku&quot; = &quot;$sku&quot; ] \tthen \t\techo &quot;1&quot; \t\t#$sku[]=$qty \tfi    done &lt; 2asg.csv"}, {"owner": {"reputation": 17, "user_id": 9302719, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/17cf45f1402ec8fe081ede63309923f0?s=128&d=identicon&r=PG&f=1", "display_name": "Emc2", "link": "https://stackoverflow.com/users/9302719/emc2"}, "edited": false, "score": 0, "creation_date": 1517533612, "post_id": 48574132, "comment_id": 84145208, "body": "as you can see, i was trying to go through some similar posts"}, {"owner": {"reputation": 930, "user_id": 9210255, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/00KKR.png?s=128&g=1", "display_name": "TigerTV.ru", "link": "https://stackoverflow.com/users/9210255/tigertv-ru"}, "edited": false, "score": 0, "creation_date": 1517533991, "post_id": 48574132, "comment_id": 84145291, "body": "insert code in the question"}, {"owner": {"reputation": 17, "user_id": 9302719, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/17cf45f1402ec8fe081ede63309923f0?s=128&d=identicon&r=PG&f=1", "display_name": "Emc2", "link": "https://stackoverflow.com/users/9302719/emc2"}, "reply_to_user": {"reputation": 930, "user_id": 9210255, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/00KKR.png?s=128&g=1", "display_name": "TigerTV.ru", "link": "https://stackoverflow.com/users/9210255/tigertv-ru"}, "edited": false, "score": 0, "creation_date": 1517534233, "post_id": 48574132, "comment_id": 84145346, "body": "@TigerTV.ru, thanks for walking me through this. First time here and a newbie in coding."}, {"owner": {"reputation": 930, "user_id": 9210255, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/00KKR.png?s=128&g=1", "display_name": "TigerTV.ru", "link": "https://stackoverflow.com/users/9210255/tigertv-ru"}, "edited": false, "score": 0, "creation_date": 1517534352, "post_id": 48574132, "comment_id": 84145374, "body": "read tour <a href=\"https://stackoverflow.com/tour\">stackoverflow.com/tour</a>"}, {"owner": {"reputation": 930, "user_id": 9210255, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/00KKR.png?s=128&g=1", "display_name": "TigerTV.ru", "link": "https://stackoverflow.com/users/9210255/tigertv-ru"}, "edited": false, "score": 0, "creation_date": 1517538549, "post_id": 48574132, "comment_id": 84146331, "body": "Do you need parentheses in output, I mean (2+33+46) for the first string"}, {"owner": {"reputation": 930, "user_id": 9210255, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/00KKR.png?s=128&g=1", "display_name": "TigerTV.ru", "link": "https://stackoverflow.com/users/9210255/tigertv-ru"}, "edited": false, "score": 0, "creation_date": 1517539276, "post_id": 48574132, "comment_id": 84146509, "body": "Have done, without parentheses, bash"}], "answers": [{"comments": [{"owner": {"reputation": 41204, "user_id": 1072112, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa3fecc914da2b7a82696d52729fc237?s=128&d=identicon&r=PG", "display_name": "ghoti", "link": "https://stackoverflow.com/users/1072112/ghoti"}, "edited": false, "score": 1, "creation_date": 1517551353, "post_id": 48574931, "comment_id": 84149567, "body": "Worth pointing out that associative arrays are a feature of bash 4. There are still some modern systems shipping with bash 3 (hello macOS). In macOS, bash 4 may be installed using <a href=\"http://macports.org/\" rel=\"nofollow noreferrer\">MacPorts</a> or <a href=\"http://brew.sh/\" rel=\"nofollow noreferrer\">Homebrew</a>."}, {"owner": {"reputation": 930, "user_id": 9210255, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/00KKR.png?s=128&g=1", "display_name": "TigerTV.ru", "link": "https://stackoverflow.com/users/9210255/tigertv-ru"}, "reply_to_user": {"reputation": 41204, "user_id": 1072112, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa3fecc914da2b7a82696d52729fc237?s=128&d=identicon&r=PG", "display_name": "ghoti", "link": "https://stackoverflow.com/users/1072112/ghoti"}, "edited": false, "score": 0, "creation_date": 1517551617, "post_id": 48574931, "comment_id": 84149660, "body": "Thanks for addition"}], "tags": [], "owner": {"reputation": 930, "user_id": 9210255, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/00KKR.png?s=128&g=1", "display_name": "TigerTV.ru", "link": "https://stackoverflow.com/users/9210255/tigertv-ru"}, "is_accepted": false, "score": 0, "last_activity_date": 1522011211, "last_edit_date": 1522011211, "creation_date": 1517539200, "answer_id": 48574931, "question_id": 48574132, "link": "https://stackoverflow.com/questions/48574132/how-to-find-matching-rows-of-the-first-column-and-add-quantities-of-the-second-c/48574931#48574931", "title": "How to find matching rows of the first column and add quantities of the second column? Bash", "body": "<p>For Bash 4: </p>\n\n<pre><code>#!/bin/bash\n\ndeclare -A astr\n\nwhile IFS=, read -r col1 col2\ndo\n    if [ \"$col1\" != \"SKU\" ] &amp;&amp; [ \"$col1\" != \"\" ]\n    then\n        (( astr[$col1] += col2 ))\n    fi\ndone &lt; 2asg.csv\n\necho \"SKU,QTY\"\nfor i in \"${!astr[@]}\"\ndo   \n    echo \"$i,${astr[$i]}\"\ndone | sort -t : -k 2n\n</code></pre>\n\n<p><a href=\"https://github.com/tigertv/stackoverflow-answers\" rel=\"nofollow noreferrer\">https://github.com/tigertv/stackoverflow-answers</a></p>\n"}, {"comments": [{"owner": {"reputation": 930, "user_id": 9210255, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/00KKR.png?s=128&g=1", "display_name": "TigerTV.ru", "link": "https://stackoverflow.com/users/9210255/tigertv-ru"}, "edited": false, "score": 0, "creation_date": 1517552297, "post_id": 48575724, "comment_id": 84149916, "body": "I run it, I&#39;ve got a line without first column &quot;,0&quot;. Correct the answer."}, {"owner": {"reputation": 41204, "user_id": 1072112, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa3fecc914da2b7a82696d52729fc237?s=128&d=identicon&r=PG", "display_name": "ghoti", "link": "https://stackoverflow.com/users/1072112/ghoti"}, "reply_to_user": {"reputation": 930, "user_id": 9210255, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/00KKR.png?s=128&g=1", "display_name": "TigerTV.ru", "link": "https://stackoverflow.com/users/9210255/tigertv-ru"}, "edited": false, "score": 1, "creation_date": 1517553825, "post_id": 48575724, "comment_id": 84150565, "body": "@TigerTV.ru, works for me. Is it possible you&#39;ve got a line in your input file that looks blank but has some non-printing character on it? Do you get the correct results if you replace <code>NR&gt;1</code> with <code>$2~&#47;[0-9]&#47;</code> ?"}, {"owner": {"reputation": 41204, "user_id": 1072112, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa3fecc914da2b7a82696d52729fc237?s=128&d=identicon&r=PG", "display_name": "ghoti", "link": "https://stackoverflow.com/users/1072112/ghoti"}, "edited": false, "score": 0, "creation_date": 1517554792, "post_id": 48575724, "comment_id": 84150925, "body": "Alright.. I suspect there may be something wonky on line 2 of your input file. You can see what it contains with greater depth by running <code>od -c file</code>, and you can <code>man oc</code> if you need some help interpreting those results. Good luck! :)"}, {"owner": {"reputation": 17, "user_id": 9302719, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/17cf45f1402ec8fe081ede63309923f0?s=128&d=identicon&r=PG&f=1", "display_name": "Emc2", "link": "https://stackoverflow.com/users/9302719/emc2"}, "reply_to_user": {"reputation": 41204, "user_id": 1072112, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa3fecc914da2b7a82696d52729fc237?s=128&d=identicon&r=PG", "display_name": "ghoti", "link": "https://stackoverflow.com/users/1072112/ghoti"}, "edited": false, "score": 0, "creation_date": 1517689168, "post_id": 48575724, "comment_id": 84199799, "body": "@ghoti It even sorts for me with a pipe awk -F, &#39;$2~/[0-9]/{a[$1] += $2}END{print &quot;SKU,QTY&quot;; for (i in a) print i&quot;,&quot;a[i]}&#39; 2asg.csv | sort -k1"}, {"owner": {"reputation": 17, "user_id": 9302719, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/17cf45f1402ec8fe081ede63309923f0?s=128&d=identicon&r=PG&f=1", "display_name": "Emc2", "link": "https://stackoverflow.com/users/9302719/emc2"}, "reply_to_user": {"reputation": 41204, "user_id": 1072112, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa3fecc914da2b7a82696d52729fc237?s=128&d=identicon&r=PG", "display_name": "ghoti", "link": "https://stackoverflow.com/users/1072112/ghoti"}, "edited": false, "score": 0, "creation_date": 1517689297, "post_id": 48575724, "comment_id": 84199842, "body": "@ghoti How do I make my code snippet look like yours with a nice grayish rectangle around it ?"}, {"owner": {"reputation": 17, "user_id": 9302719, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/17cf45f1402ec8fe081ede63309923f0?s=128&d=identicon&r=PG&f=1", "display_name": "Emc2", "link": "https://stackoverflow.com/users/9302719/emc2"}, "edited": false, "score": 0, "creation_date": 1517689484, "post_id": 48575724, "comment_id": 84199904, "body": "uupsss...am I supposed to give the credit to @kjpires ? If so, i can&#39;t thank you more as well"}, {"owner": {"reputation": 41204, "user_id": 1072112, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa3fecc914da2b7a82696d52729fc237?s=128&d=identicon&r=PG", "display_name": "ghoti", "link": "https://stackoverflow.com/users/1072112/ghoti"}, "reply_to_user": {"reputation": 17, "user_id": 9302719, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/17cf45f1402ec8fe081ede63309923f0?s=128&d=identicon&r=PG&f=1", "display_name": "Emc2", "link": "https://stackoverflow.com/users/9302719/emc2"}, "edited": false, "score": 1, "creation_date": 1517690816, "post_id": 48575724, "comment_id": 84200297, "body": "@Emc2, you can format code in your comments by surrounding it with backquotes. But remember, if code is relevant to your question, click the <a href=\"https://stackoverflow.com/posts/48574132/edit\">edit</a> link under your question and add it there. And .. you&#39;re welcome. :) I don&#39;t get any points on this one because I didn&#39;t provide an answer, but I&#39;m happy things are working for you and especially that you learned something!"}, {"owner": {"reputation": 621, "user_id": 1713351, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8b5f6f80d7ad92101ee021e9d013fafd?s=128&d=identicon&r=PG", "display_name": "kjpires", "link": "https://stackoverflow.com/users/1713351/kjpires"}, "edited": false, "score": 0, "creation_date": 1519834114, "post_id": 48575724, "comment_id": 85072411, "body": "I&#39;ve modified the answer to deal with blank lines as well as get the &quot;header&quot; from the original file."}], "tags": [], "owner": {"reputation": 621, "user_id": 1713351, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8b5f6f80d7ad92101ee021e9d013fafd?s=128&d=identicon&r=PG", "display_name": "kjpires", "link": "https://stackoverflow.com/users/1713351/kjpires"}, "is_accepted": false, "score": 3, "last_activity_date": 1519834355, "last_edit_date": 1519834355, "creation_date": 1517545842, "answer_id": 48575724, "question_id": 48574132, "link": "https://stackoverflow.com/questions/48574132/how-to-find-matching-rows-of-the-first-column-and-add-quantities-of-the-second-c/48575724#48575724", "title": "How to find matching rows of the first column and add quantities of the second column? Bash", "body": "<p>I'd use <strong>awk</strong>:</p>\n\n<pre><code>awk -F, 'NR==1{print} NR&gt;1{a[$1] += $2}END{for (i in a) print i\",\"a[i]}' file\n</code></pre>\n\n<p>If you want to ignore blank lines, you can either ignore lines less than 2 columns:</p>\n\n<pre><code>awk -F, 'NR==1{print} NR&gt;1 &amp;&amp; NF&gt;1{a[$1] += $2} END{for (i in a) print i\",\"a[i]}' file\n</code></pre>\n\n<p>or ignore ones without exactly 2 columns:</p>\n\n<pre><code>awk -F, 'NR==1{print} NR&gt;1 &amp;&amp; NF==2{a[$1] += $2} END{for (i in a) print i\",\"a[i]}' file\n</code></pre>\n\n<p>Alternatively, you can check to see that the second column begins with a digit:</p>\n\n<pre><code>awk -F, 'NR==1{print} NR&gt;1 &amp;&amp; $2~/^[0-9]/{a[$1] += $2} END{for (i in a) print i\",\"a[i]}' file\n</code></pre>\n"}], "owner": {"reputation": 17, "user_id": 9302719, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/17cf45f1402ec8fe081ede63309923f0?s=128&d=identicon&r=PG&f=1", "display_name": "Emc2", "link": "https://stackoverflow.com/users/9302719/emc2"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 93, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1522011211, "creation_date": 1517532708, "last_edit_date": 1517543249, "question_id": 48574132, "link": "https://stackoverflow.com/questions/48574132/how-to-find-matching-rows-of-the-first-column-and-add-quantities-of-the-second-c", "title": "How to find matching rows of the first column and add quantities of the second column? Bash", "body": "<p>I have a csv file that looks like this:</p>\n\n<pre><code>SKU,QTY\n\nKA006-001,2  \nKA006-001,33  \nKA006-001,46  \nKA009-001,22  \nKA009-001,7  \nKA010-001,18  \nKA014-001,3  \nKA014-001,42  \nKA015-001,1  \nKA015-001,16  \nKA020-001,6  \nKA022-001,56  \n</code></pre>\n\n<p>The first column is SKU. The second column is QTY number.</p>\n\n<p>Some lines in (SKU column only) are identical. </p>\n\n<p>I need to achieve the following: </p>\n\n<pre><code>SKU,QTY  \nKA006-001,81 (2+33+46)  \nKA009-001,29 (22+7)  \nKA010-001,18  \nKA014-001,45 (3+42)  \n</code></pre>\n\n<p>so on...</p>\n\n<p>I tried different things , loop statements and arrays. Got so lost, got headache.</p>\n\n<p>My code:  </p>\n\n<pre><code>#!/bin/bash\n\nwhile IFS=, read sku qty\ndo\n    echo \"SKU='$sku' QTY='$qty'\"\n    if [ \"$sku\" = \"$sku\" ]\n    then\n        #x=(\"$sku\" != \"$sku\")\n        for i in {0..3}; do echo $sku[$i]=$qty; done\n    fi\n\ndone &lt; 2asg.csv\n</code></pre>\n"}, {"tags": ["perl"], "answers": [{"comments": [{"owner": {"reputation": 21, "user_id": 9301990, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c2889617f2790bdf9e44f9555045f11b?s=128&d=identicon&r=PG&f=1", "display_name": "Alex", "link": "https://stackoverflow.com/users/9301990/alex"}, "edited": false, "score": 0, "creation_date": 1518451413, "post_id": 48572808, "comment_id": 84501588, "body": "I&#39;ve enhanced the original question to ask how to generate the answer programatically."}], "tags": [], "owner": {"reputation": 170445, "user_id": 149341, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/omfTQ.png?s=128&g=1", "display_name": "duskwuff -inactive-", "link": "https://stackoverflow.com/users/149341/duskwuff-inactive"}, "is_accepted": false, "score": 8, "last_activity_date": 1517524179, "creation_date": 1517524179, "answer_id": 48572808, "question_id": 48572795, "link": "https://stackoverflow.com/questions/48572795/combining-anonymous-functions-in-perl/48572808#48572808", "title": "combining anonymous functions in perl", "body": "<p>Create a new anonymous function that calls both of the functions you want to combine, e.g.</p>\n\n<pre><code>my $anon3 = sub { $anon1-&gt;() || $anon2-&gt;() };\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 9301990, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c2889617f2790bdf9e44f9555045f11b?s=128&d=identicon&r=PG&f=1", "display_name": "Alex", "link": "https://stackoverflow.com/users/9301990/alex"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 110, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1517601135, "creation_date": 1517524078, "last_edit_date": 1517601135, "question_id": 48572795, "link": "https://stackoverflow.com/questions/48572795/combining-anonymous-functions-in-perl", "title": "combining anonymous functions in perl", "body": "<pre><code>my $anon1 = sub { return ( $n &lt; 10 ? 0 : 2 ) }; # where $n is any numeric value say\nmy $anon2 = sub { return ( 1 ) };\n\nmy $anon3 = $anon1;\nprint ref($anon3).\"\\n\";\n</code></pre>\n\n<p>Answer = 'CODE', i.e. assigning to another variable works.</p>\n\n<p>Question: what is the syntax to create an anonymous function from 2 anonymous functions?</p>\n\n<pre><code>$anon3 = $anon1 || $anon2; # N.B. not expecting this to work but is to suggest that want a function that if $anon1 is 0 then assign to $anon2\n</code></pre>\n\n<p>N.B. I don't want to do &amp;$anon1 || &amp;$anon2.  I am trying to create a function which is a combination of $anon1 and $anon2.  The functions are not static.</p>\n\n<p>If I could enhance the question a little further : if the number of ANON functions is variable, e.g. stored in a hash table, how could anon3 be formed dynamically as a function of the keys?</p>\n\n<pre><code>%anon = (\n    'anon1' =&gt; sub { return ( $n &lt; 10 ? 1 : 0 ) },\n    'anon2' =&gt; sub { return ( $n &lt; 20 ? 2 : 0 ) },\n#and this may extend to N entries\n    'anonN' =&gt; sub { return ( 999 ) },\n); # the anonymous functions anonX are purely for example.\n</code></pre>\n\n<p>So aiming to create the following by iterating over 'sort keys %anon' :</p>\n\n<pre><code>$anon3 = sub { $anon{'anon1'}-&gt;() || $anon{'anon2'}-&gt;() || $anon{'anonN'}-&gt;() };\n</code></pre>\n"}, {"tags": ["perl", "mojolicious", "hypnotoad"], "answers": [{"tags": [], "owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "is_accepted": true, "score": 1, "last_activity_date": 1517526173, "creation_date": 1517526173, "answer_id": 48573175, "question_id": 48570274, "link": "https://stackoverflow.com/questions/48570274/why-would-hot-deploy-of-hypnotoad-rerun-old-http-requests/48573175#48573175", "title": "Why would hot deploy of Hypnotoad rerun old http requests?", "body": "<p>Your request will not be complete until the request handler returns. This little app, for example, will take 5 seconds to output \"test\":</p>\n\n<pre><code># test.pl\nuse Mojolicious::Lite;\nget '/test' =&gt; sub { $_[0]-&gt;render( text =&gt; \"test\" ); sleep 5 };\napp-&gt;start;\n</code></pre>\n\n<p>The workaround for your app would be to run <code>handleJobStatusUpdate</code> in a background process.</p>\n\n<pre><code>get '/jobStateChange/:jobId/:jobState/:jobCause' =&gt; sub {\n    my $c =shift;    \n    my $jobId = $c-&gt;stash(\"jobId\");\n    my $jobState = $c-&gt;stash(\"jobState\");\n    my $jobCause = $c-&gt;stash(\"jobCause\");\n    my $jobLocation = $c-&gt;req-&gt;param('jobLocation');\n    ...\n    $c-&gt;render(text =&gt; 'ok');\n    if (fork() == 0) {\n        handleJobStatusUpdate($c, $jobId, $jobState, $jobCause, $jobLocation);\n        exit;\n    }\n</code></pre>\n"}], "owner": {"reputation": 135, "user_id": 638478, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/949b4bfd0e0b044f32fccd6aab687db4?s=128&d=identicon&r=PG", "display_name": "wwwhack", "link": "https://stackoverflow.com/users/638478/wwwhack"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 104, "favorite_count": 1, "accepted_answer_id": 48573175, "answer_count": 1, "score": 4, "last_activity_date": 1517526173, "creation_date": 1517513040, "question_id": 48570274, "link": "https://stackoverflow.com/questions/48570274/why-would-hot-deploy-of-hypnotoad-rerun-old-http-requests", "title": "Why would hot deploy of Hypnotoad rerun old http requests?", "body": "<p><strong>The nutshell:</strong><br>\nWhen I do a hot deployment of Hypnotoad sometimes the new server immediately processes a slew of HTTP requests that were already handled by the previous server.</p>\n\n<p>If a response has been rendered but the thread is still doing some processing does Mojo/Hypnotoad retain the request until the processing has stopped? Do I need to tell the server that the HTTP request is resolved?</p>\n\n<p><strong>The long version:</strong><br>\nI have a Mojolicious::Lite app running under Hypnotoad.\nThe app's function is to accept HTTP requests from another service.</p>\n\n<p>We are processing jobs that progress through a series of states.\nAt each job state change the app is notified with an HTTP request.\nThis is a busy little script - recieving more than 1000 req/hour.</p>\n\n<p>The scripts job is to manipulate some data .. doing DB updates, editng files, sending mail.</p>\n\n<p>In an effort to keep things moving along, when it recieves the HTTP request it sanity checks the data it recieved. If the data looks good it sends a 200 response to the caller immediately and then continues on to do the more time consuming tasks. (I'm guessing this is the underlying cause)</p>\n\n<p>When I hot deploy - by rerunning the start script (which runs 'localperl/bin/hypnotoad $RELDIR/etc/bki/bki.pl') - some requests that were already handled are sent to the new server and reprocessed.</p>\n\n<p>Why are these old transactions still being held by the original server? Many have been long since completed!\nDoes the need to tell Mojolicious that the request is done before it goes off and messes with data?\n(I considered $c->finish() but that is just for sockets?)\nHow does Hypnotoad decide what requests should be passed to it's replacement server?</p>\n\n<p>Here is some psuedo code with what I'm doing:</p>\n\n<pre><code>get '/jobStateChange/:jobId/:jobState/:jobCause' =&gt; sub {\n    my $c =shift;\n\n    my $jobId = $c-&gt;stash(\"jobId\");\n    return $c-&gt;render(text =&gt; \"invalid jobId: $jobId\", status =&gt; 400) unless $jobId=~/^\\d+$/;\n\n    my $jobState = $c-&gt;stash(\"jobState\");\n    return $c-&gt;render(text =&gt; \"invalid jobState: $jobState\", status =&gt; 400) unless $jobState=~/^\\d+$/;\n\n    my $jobCause = $c-&gt;stash(\"jobCause\");\n    return $c-&gt;render(text =&gt; \"invalid jobCause: $jobCause\", status =&gt; 400) unless $jobCause=~/^\\d+$/;\n\n    my $jobLocation = $c-&gt;req-&gt;param('jobLocation');\n    if ($jobLocation){ $jobLocation = $ENV{'DATADIR'} . \"/jobs/\" . $jobLocation; }\n    unless ( $jobLocation &amp;&amp; -d $jobLocation ){\n        app-&gt;log-&gt;debug(\"determining jobLocation because passed job jobLocation isn't useable\");\n        $jobLocation = getJobLocation($jobId);\n        $c-&gt;stash(\"jobLocation\", $jobLocation);\n    }\n\n    # TODO - more validation? would BKI lie to us?\n    return if $c-&gt;tx-&gt;res-&gt;code &amp;&amp; 400 == $c-&gt;tx-&gt;res-&gt;code; # return if we rendered an error above\n\n    # tell BKI we're all set ASAP\n    $c-&gt;render(text =&gt; 'ok');\n    handleJobStatusUpdate($c, $jobId, $jobState, $jobCause, $jobLocation);\n\n};\n\nsub handleJobStatusUpdate{\n    my ($c, $jobId, $jobState, $jobCause, $jobLocation) = @_;\n    app-&gt;log-&gt;info(\"job $jobId, state $jobState, cause $jobCause, loc $jobLocation\");\n\n    # set the job states in jobs\n    app-&gt;work_db-&gt;do($sql, undef, @params);\n\n\n    if ($jobState == $SOME_JOB_STATE) { \n        ... do stuff ...\n        ... uses $c-&gt;stash to hold data used by other functions\n    }\n\n    if ($jobState == $OTHER_JOB_STATE) { \n        ... do stuff ...\n        ... uses $c-&gt;stash to hold data used by other functions\n    }\n}\n</code></pre>\n"}, {"tags": ["perl", "pipe", "ipc"], "comments": [{"owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 0, "creation_date": 1517509927, "post_id": 48569304, "comment_id": 84135282, "body": "Again, are you married to using pipes for this purpose? With a file for interprocess communication, you will have less hassles with capacity, deadlocks, signals, and portability. And debugging (at the end of the program you can inspect the file and see if it contains what you expect)."}, {"owner": {"reputation": 5937, "user_id": 783314, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/b3d5692064779f501f7c2a639dc0076c?s=128&d=identicon&r=PG", "display_name": "Stephen", "link": "https://stackoverflow.com/users/783314/stephen"}, "reply_to_user": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 0, "creation_date": 1517510142, "post_id": 48569304, "comment_id": 84135395, "body": "I was trying to use pipes because it seems like I really should learn how they work to be a good engineer. But it certainly does seem excessively complex by comparison. I feel like I\u2019m making progress with a good setup but I haven\u2019t reached a point of comfort where I think it should be sufficiently reliable"}, {"owner": {"reputation": 5937, "user_id": 783314, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/b3d5692064779f501f7c2a639dc0076c?s=128&d=identicon&r=PG", "display_name": "Stephen", "link": "https://stackoverflow.com/users/783314/stephen"}, "reply_to_user": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 0, "creation_date": 1517510183, "post_id": 48569304, "comment_id": 84135423, "body": "Pipes would also be a lot faster I believe"}, {"owner": {"reputation": 5937, "user_id": 783314, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/b3d5692064779f501f7c2a639dc0076c?s=128&d=identicon&r=PG", "display_name": "Stephen", "link": "https://stackoverflow.com/users/783314/stephen"}, "reply_to_user": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 0, "creation_date": 1517510235, "post_id": 48569304, "comment_id": 84135441, "body": "But yes, maybe I will abandon this effort :("}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1517512222, "post_id": 48569304, "comment_id": 84136494, "body": "If you&#39;re not comfortable with IPC in general then switching to using files won&#39;t help much: many of the same issues will arise, and in the end you must be aware of the consequences of running processes in parallel while sharing a resource. I assume you&#39;ve read and absorbed <a href=\"https://perldoc.perl.org/perlipc.html\" rel=\"nofollow noreferrer\"><code>perldoc perlipc</code></a>?"}, {"owner": {"reputation": 5937, "user_id": 783314, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/b3d5692064779f501f7c2a639dc0076c?s=128&d=identicon&r=PG", "display_name": "Stephen", "link": "https://stackoverflow.com/users/783314/stephen"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1517512935, "post_id": 48569304, "comment_id": 84136802, "body": "@Borodin if signals can interfere with pipes then by moving to files I will avoid that potential interference. I don&#39;t really get why signals should interfere with pipes, I&#39;m just going off of what zdim said in the comments on the linked post."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1517740425, "post_id": 48569304, "comment_id": 84210513, "body": "@Steph: <i>&quot;I don&#39;t really &quot;understand&quot; it&quot;</i> This is nothing to do with comprehension: <i>&quot;2.1 [with clause] Infer something from information received (often used as a polite formula in conversation) \u2018Apart from the art department, I understand that the school gives a pretty good education\u2019</i> (Oxford dictionaries)"}, {"owner": {"reputation": 5937, "user_id": 783314, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/b3d5692064779f501f7c2a639dc0076c?s=128&d=identicon&r=PG", "display_name": "Stephen", "link": "https://stackoverflow.com/users/783314/stephen"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1517770243, "post_id": 48569304, "comment_id": 84219966, "body": "@Borodin for context for everybody else this is related to a discussion of proposed edits. Yes, I&#39;m familiar with that sense of the word as well. Still, I wanted to ensure somebody less familiar with English wouldn&#39;t assume the other definition of the word."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1517772188, "post_id": 48569304, "comment_id": 84220627, "body": "@Stephen: I&#39;m sorry but that&#39;s ridiculous. To do that comprehensively would be all but impossible, and the interpretation that you meant doesn&#39;t make sense in this context. It&#39;s best to just write good English. I&#39;d appreciate it if you would avoid removing other people&#39;s edits unless they are genuinely wrong or confusing."}, {"owner": {"reputation": 5937, "user_id": 783314, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/b3d5692064779f501f7c2a639dc0076c?s=128&d=identicon&r=PG", "display_name": "Stephen", "link": "https://stackoverflow.com/users/783314/stephen"}, "edited": false, "score": 0, "creation_date": 1517772278, "post_id": 48569304, "comment_id": 84220670, "body": "It&#39;s my question, I think I should get some deference in how I&#39;d like to phrase it. And my own edit makes perfect sense and is indeed how it actually happened."}], "answers": [{"tags": [], "owner": {"reputation": 9262, "user_id": 124951, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/c46d5911a8fb4ffd5fb8523d56a60de0?s=128&d=identicon&r=PG", "display_name": "salva", "link": "https://stackoverflow.com/users/124951/salva"}, "is_accepted": false, "score": 2, "last_activity_date": 1517566216, "creation_date": 1517566216, "answer_id": 48580351, "question_id": 48569304, "link": "https://stackoverflow.com/questions/48569304/what-are-the-ways-that-signals-can-interfere-with-pipe-communication/48580351#48580351", "title": "What are the ways that signals can interfere with pipe communication?", "body": "<p>Signals may also interrupt I/O functions, causing then to fail with <code>$!</code> set to <code>EINTR</code>. So you should check for that error and retry when it happens.</p>\n\n<p>Not doing it is a common source of hard to find bugs.</p>\n"}, {"comments": [{"owner": {"reputation": 5937, "user_id": 783314, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/b3d5692064779f501f7c2a639dc0076c?s=128&d=identicon&r=PG", "display_name": "Stephen", "link": "https://stackoverflow.com/users/783314/stephen"}, "edited": false, "score": 0, "creation_date": 1517850050, "post_id": 48626137, "comment_id": 84252242, "body": "Thanks, this provides more context that I was missing. I understand now that the interruption occurs so that signal handlers I might have defined can proceed."}, {"owner": {"reputation": 5937, "user_id": 783314, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/b3d5692064779f501f7c2a639dc0076c?s=128&d=identicon&r=PG", "display_name": "Stephen", "link": "https://stackoverflow.com/users/783314/stephen"}, "edited": false, "score": 0, "creation_date": 1517850280, "post_id": 48626137, "comment_id": 84252400, "body": "One thing I don&#39;t understand: How could the write return <code>EPIPE</code>? Do you mean that the return value of the write condition itself would be a string EPIPE? How would that be better?"}, {"owner": {"reputation": 5937, "user_id": 783314, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/b3d5692064779f501f7c2a639dc0076c?s=128&d=identicon&r=PG", "display_name": "Stephen", "link": "https://stackoverflow.com/users/783314/stephen"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1517889135, "post_id": 48626137, "comment_id": 84267121, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/164587/discussion-between-stephen-and-zdim\">continue this discussion in chat</a>."}, {"owner": {"reputation": 5937, "user_id": 783314, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/b3d5692064779f501f7c2a639dc0076c?s=128&d=identicon&r=PG", "display_name": "Stephen", "link": "https://stackoverflow.com/users/783314/stephen"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1517889968, "post_id": 48626137, "comment_id": 84267351, "body": "@zdim since you&#39;re making corrections to your posts... I think it is wrong to loop over handles with <code>foreach my $handle (@ready)</code> when you know that there will be only one handle. In particular, since you are invoking the command <code>last READ;</code> the moment that you see a closed handle, the code won&#39;t even work with multiple handles."}, {"owner": {"reputation": 5937, "user_id": 783314, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/b3d5692064779f501f7c2a639dc0076c?s=128&d=identicon&r=PG", "display_name": "Stephen", "link": "https://stackoverflow.com/users/783314/stephen"}, "edited": false, "score": 0, "creation_date": 1517890922, "post_id": 48626137, "comment_id": 84267560, "body": "@ikegami, one thing that could be elaborated in the post: Why don&#39;t we ever try to re-read the handle if we encounter a warning ($rv is not defined). Couldn&#39;t there be a recoverable error? Maybe you explained this to zdim but the comments are deleted now."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1517892731, "post_id": 48626137, "comment_id": 84268011, "body": "As already mentioned, you should retry if you get <code>EINTR</code>, except it&#39;s not possible to get <code>EINTR</code> error in your program."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 4, "last_activity_date": 1517856937, "last_edit_date": 1517856937, "creation_date": 1517845169, "answer_id": 48626137, "question_id": 48569304, "link": "https://stackoverflow.com/questions/48569304/what-are-the-ways-that-signals-can-interfere-with-pipe-communication/48626137#48626137", "title": "What are the ways that signals can interfere with pipe communication?", "body": "<p>Two things.</p>\n\n<ol>\n<li><p>Writing to a pipe after the reader was closed (e.g. perhaps because the process on the other end exited) leads to a SIGPIPE. You can ignore this signal (<code>$SIG{PIPE} = 'IGNORE';</code>) in order to have the write to return error <code>EPIPE</code> instead.</p>\n\n<p>In your case, if you wanted to handle that error instead of having your program killed, simply add</p>\n\n<pre><code>$SIG{PIPE} = 'IGNORE';\n</code></pre></li>\n<li><p>If you have any signal handler defined (e.g. using <code>$SIG{...} = sub { ... };</code>, but not <code>$SIG{...} = 'IGNORE';</code> or <code>$SIG{...} = 'DEFAULT';</code>), long-running system calls (e.g. reading from a file handle) can be interrupted by a signal. If this happens, they will return with error <code>EINTR</code> to give the signal handler a chance to run. In Perl, you don't have to do anything but restart the system call that failed.</p>\n\n<p>In your case, you have no signal handlers defined, so this doesn't affect you.</p></li>\n</ol>\n\n<hr>\n\n<p>By the way, you check <code>$rv == 0</code> even when <code>$rv</code> is known to be undefined, and you place the length of the data in <code>@recd</code> instead of the data itself. In fact, it doesn't make much sense to use an array there at all. Replace</p>\n\n<pre><code>my @recd;\n\n...\n\nmy $rv = sysread $handle, $buff, ( 64 * 1024 );\nwarn \"Error reading: $!\" if not defined $rv;\n\nif ( defined $buff and $rv != 0 ) {\n    say \"Got \", length $buff, \" characters\";\n    push @recd, length $buff; \n}\n\nlast READ if $rv == 0;\n\n...\n\nsay \"Have data: @recd\"\n</code></pre>\n\n<p>with</p>\n\n<pre><code>my $buf = '';\n\n...\n\nmy $received = sysread($handle, $buf, 64 * 1024, length($buf));\nwarn \"Error reading: $!\" if !defined($received);\nlast if !$received;\n\nsay \"Got $received characters\";\n\n...\n\nsay \"Have data: $buf\"\n</code></pre>\n"}], "owner": {"reputation": 5937, "user_id": 783314, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/b3d5692064779f501f7c2a639dc0076c?s=128&d=identicon&r=PG", "display_name": "Stephen", "link": "https://stackoverflow.com/users/783314/stephen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 136, "favorite_count": 1, "accepted_answer_id": 48626137, "answer_count": 2, "score": 2, "last_activity_date": 1517856937, "creation_date": 1517509025, "last_edit_date": 1592644375, "question_id": 48569304, "link": "https://stackoverflow.com/questions/48569304/what-are-the-ways-that-signals-can-interfere-with-pipe-communication", "title": "What are the ways that signals can interfere with pipe communication?", "body": "<p>I don't know anything about signals, and only a little about pipes.</p>\n<p>From the comments on\n<a href=\"https://stackoverflow.com/questions/48558093\"><strong>zdim's</strong> answer here</a>\nit seems that signals may interfere with pipe communication between parent and child processes.</p>\n<p>I was told that, if you're using\n<a href=\"https://metacpan.org/pod/IO::Select\" rel=\"nofollow noreferrer\"><code>IO::Select</code></a>\nand\n<a href=\"https://perldoc.perl.org/functions/sysread.html\" rel=\"nofollow noreferrer\"><code>sysread</code></a>,\nthen the exit of a child process\ncould somehow mess up the behavior of <code>IO::Select::can_read</code>,\nespecially if there are multiple child processes.</p>\n<p>Please describe how to account for signals when using pipes? The below code is an example where signals are not accounted for.</p>\n<pre><code>use warnings;\nuse strict;\nuse feature 'say';\n\nuse Time::HiRes qw(sleep);\nuse IO::Select; \n\nmy $sel = IO::Select-&gt;new;\n\npipe my $rd, my $wr;\n$sel-&gt;add($rd); \n\nmy $pid = fork // die &quot;Can't fork: $!&quot;;  #/\n\nif ( $pid == 0 ) {     # Child code\n\n    close $rd; \n    $wr-&gt;autoflush;\n\n    for ( 1..4 ) {\n\n        sleep 1;\n        say &quot;\\tsending data&quot;;\n        say $wr 'a' x ( 120 * 1024 );\n    }\n\n    say &quot;\\tClosing writer and exiting&quot;;\n    close $wr;\n\n    exit; \n}\n\n# Parent code\nclose $wr;    \nsay &quot;Forked and will read from $pid&quot;;\n\nmy @recd;\n\nREAD:\nwhile ( 1 ) {\n\n    if ( my @ready = $sel-&gt;can_read(0) ) {  # beware of signals\n\n        foreach my $handle (@ready) {\n\n            my $buff;\n            my $rv = sysread $handle, $buff, ( 64 * 1024 );\n            warn &quot;Error reading: $!&quot; if not defined $rv;\n\n            if ( defined $buff and $rv != 0 ) {\n                say &quot;Got &quot;, length $buff, &quot; characters&quot;;\n                push @recd, length $buff; \n            }\n\n            last READ if $rv == 0;\n        }\n    }\n    else {\n        say &quot;Doing else ... &quot;;\n        sleep 0.5; \n    }\n}   \nclose $rd;\n\nmy $gone = waitpid $pid, 0;\n\nsay &quot;Reaped pid $gone&quot;;\nsay &quot;Have data: @recd&quot;\n</code></pre>\n"}, {"tags": ["mongodb", "perl"], "comments": [{"owner": {"reputation": 1523, "user_id": 4204037, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab78fa882cbf4a03c4fd2a0b92622dc5?s=128&d=identicon&r=PG&f=1", "display_name": "bytepusher", "link": "https://stackoverflow.com/users/4204037/bytepusher"}, "edited": false, "score": 0, "creation_date": 1517522307, "post_id": 48569046, "comment_id": 84141598, "body": "Why can&#39;t you simply pass in the value as a string? IIRC the ISODate function should be understood by MongoDB, right?"}, {"owner": {"reputation": 143, "user_id": 9301312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4ae69ee0a9aee1a69743f8088960e5ce?s=128&d=identicon&r=PG&f=1", "display_name": "Bobert1234", "link": "https://stackoverflow.com/users/9301312/bobert1234"}, "reply_to_user": {"reputation": 1523, "user_id": 4204037, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab78fa882cbf4a03c4fd2a0b92622dc5?s=128&d=identicon&r=PG&f=1", "display_name": "bytepusher", "link": "https://stackoverflow.com/users/4204037/bytepusher"}, "edited": false, "score": 0, "creation_date": 1517529935, "post_id": 48569046, "comment_id": 84144306, "body": "i&#39;ve tried, but when i use: &quot;lastModifiedDate&quot;: &quot;ISODate(&quot;2016-08-10T04:55:46.053+0000&quot;)&quot; it seems  to try to compare it to the string &quot;ISODate(&quot;2016-08-10T04:55:46.053+0000&quot;)&quot; instead of the actual date. if that would work, it would be ideal, but as indicated by the below link, it doesn&#39;t <a href=\"https://stackoverflow.com/questions/23709428/query-isodate-time-in-perl\" title=\"query isodate time in perl\">stackoverflow.com/questions/23709428/query-isodate-time-in-p&zwnj;&#8203;erl</a>"}, {"owner": {"reputation": 1523, "user_id": 4204037, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab78fa882cbf4a03c4fd2a0b92622dc5?s=128&d=identicon&r=PG&f=1", "display_name": "bytepusher", "link": "https://stackoverflow.com/users/4204037/bytepusher"}, "edited": false, "score": 0, "creation_date": 1517565745, "post_id": 48569046, "comment_id": 84156609, "body": "Even if you use a scalar reference? As in <code>\\qq{ISODate(2016-08-10T04:55:46.053+0000&quot;)}</code> ?"}, {"owner": {"reputation": 2855, "user_id": 11800, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d37a63484d9878cf6c07dcc08adda9e2?s=128&d=identicon&r=PG", "display_name": "xdg", "link": "https://stackoverflow.com/users/11800/xdg"}, "edited": false, "score": 0, "creation_date": 1517581498, "post_id": 48569046, "comment_id": 84166029, "body": "ISODate() is a helper function in Javascript in the shell.  It&#39;s not parsed by the database.  For Perl, you&#39;ll want to create a supported datetime object: see <a href=\"https://metacpan.org/pod/distribution/MongoDB/lib/MongoDB/DataTypes.pod#Dates\" rel=\"nofollow noreferrer\">MongoDB::DataTypes</a>"}, {"owner": {"reputation": 143, "user_id": 9301312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4ae69ee0a9aee1a69743f8088960e5ce?s=128&d=identicon&r=PG&f=1", "display_name": "Bobert1234", "link": "https://stackoverflow.com/users/9301312/bobert1234"}, "reply_to_user": {"reputation": 2855, "user_id": 11800, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d37a63484d9878cf6c07dcc08adda9e2?s=128&d=identicon&r=PG", "display_name": "xdg", "link": "https://stackoverflow.com/users/11800/xdg"}, "edited": false, "score": 0, "creation_date": 1517731209, "post_id": 48569046, "comment_id": 84208192, "body": "@xdg, i assumed that was the case (though i hoped for an alternative), but how do i iterate through the array to replace every instance of ISODate with a new datetime object? could you provide a sample bit of code for doing that?"}, {"owner": {"reputation": 143, "user_id": 9301312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4ae69ee0a9aee1a69743f8088960e5ce?s=128&d=identicon&r=PG&f=1", "display_name": "Bobert1234", "link": "https://stackoverflow.com/users/9301312/bobert1234"}, "edited": false, "score": 0, "creation_date": 1517738753, "post_id": 48569046, "comment_id": 84210056, "body": "it turns out that there is an easy alternative for dates, namely replace &#39;ISODate(...)&#39; with &#39;{$dateFromString: {dateString:...}&#39; unfortunately, that only works in the newest versions of mongo, and i&#39;m running on an older one, and can&#39;t upgrade for now. still hoping for a general solution as i mentioned before."}], "answers": [{"tags": [], "owner": {"reputation": 2855, "user_id": 11800, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d37a63484d9878cf6c07dcc08adda9e2?s=128&d=identicon&r=PG", "display_name": "xdg", "link": "https://stackoverflow.com/users/11800/xdg"}, "is_accepted": false, "score": 0, "last_activity_date": 1518032469, "last_edit_date": 1518032469, "creation_date": 1518018446, "answer_id": 48667881, "question_id": 48569046, "link": "https://stackoverflow.com/questions/48569046/insert-mongo-objects-into-perl-array/48667881#48667881", "title": "insert mongo objects into perl array", "body": "<p>I would have thought there'd be an easy module on CPAN to recursively walk a structure and let you transform values, but as I didn't find one, I wrote a new one: <a href=\"https://metacpan.org/pod/Data::Visitor::Tiny\" rel=\"nofollow noreferrer\">Data::Visitor::Tiny</a>.</p>\n\n<pre><code>use 5.010;\nuse strict;\nuse warnings;\n\nuse Data::Dumper;\nuse Data::Visitor::Tiny;\nuse Time::Moment;\n\nmy $ref = [\n    {\n        '$match' =&gt; { \"lastModifiedDate\" =&gt; \"ISODate(\\\"2016-08-10T04:55:46.053+0000\\\")\", }\n    },\n    { '$project' =&gt; { name =&gt; 1 } },\n];\n\nmy $visitor = sub {\n    my (undef, $valueref) = @_;\n\n    # skip over values that are just nested hash/array refs\n    return if ref;\n\n    # match values you want to replace\n    return unless /^ISODate\\(\"([^\"]+)\"\\)$/;\n\n    # convert captured string to Time::Moment\n    $$valueref = Time::Moment-&gt;from_string($1, lenient =&gt; 1);\n};\n\nvisit( $ref, $visitor);\n\nsay Dumper($ref);\nsay \"Date parsed as: \" . $ref-&gt;[0]{'$match'}{lastModifiedDate};\n</code></pre>\n\n<p>Result:</p>\n\n<pre><code>$VAR1 = [\n          {\n            '$match' =&gt; {\n                          'lastModifiedDate' =&gt; bless( do{\\(my $o = 'R\u00b8=\u0153\ufffd\ufffd\ufffd@\u2211(\ufffd\ufffd\ufffd\ufffd')}, 'Time::Moment' )\n                        }\n          },\n          {\n            '$project' =&gt; {\n                            'name' =&gt; 1\n                          }\n          }\n        ];\n\nDate parsed as: 2016-08-10T04:55:46.053Z\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 143, "user_id": 9301312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4ae69ee0a9aee1a69743f8088960e5ce?s=128&d=identicon&r=PG&f=1", "display_name": "Bobert1234", "link": "https://stackoverflow.com/users/9301312/bobert1234"}, "is_accepted": false, "score": 0, "last_activity_date": 1518422528, "creation_date": 1518422528, "answer_id": 48741850, "question_id": 48569046, "link": "https://stackoverflow.com/questions/48569046/insert-mongo-objects-into-perl-array/48741850#48741850", "title": "insert mongo objects into perl array", "body": "<p>thanks xdg, i was also surprised not to find something for the traversal. </p>\n\n<p>with a little help from the guys at perlmonks i also wrote something (see below).</p>\n\n<p>like i mention in the comments a better solution is to replace 'ISODate(...)' with '{$dateFromString: {dateString:...}}' since that can be done in the string itself, but as a more general solution that also works for older versions of mongo:</p>\n\n<pre><code>#get rid of comments\n$qstr=~s/[\\/][\\/](.*?)$//gms;\n#handle specially declared datatypes\n$qstr=~s/MONGOQUERY//gs;\n$qstr=~s/ISODate\\(\"([^)]*?)\\)/\"ISODate$1/gs;\n$qstr=~s/NumberDecimal\\(([^)]*?)\\)/$1/gs;\n$qstr=~s/NumberLong\\(([^)]*?)\\)/$1/gs;\n$qstr=~s/NumberInt\\(([^)]*?)\\)/$1/gs;\n#add qr flag for regexes\n$qstr=~s/[\\/]([\\.\\^].*?)([^\\\\])[\\/](i?)/\"qr\\/$1$2\\/$3\"/gs;\n\nmy $qarrayref = JSON::PP-&gt;new-&gt;allow_nonref-&gt;relaxed-&gt;allow_barekey-&gt;loose-&gt;decode($qry);\nmy $rlimit=50;\nrepl_mongo(\\@{$qarrayref},$rlimit);\n\n    sub repl_mongo{\n        if($_[1]&gt;0){\n            if(ref($_[0]) eq 'ARRAY'){\n                foreach my $item(@{$_[0]}){\n                    repl_mongo($item,$_[1]-1 );\n                }\n            }elsif(ref($_[0]) eq 'HASH'){\n                foreach my $key (keys %{$_[0]}){\n                    repl_mongo($_[0]-&gt;{$key},$_[1]-1 );\n                }\n            }else{\n                if(index($_[0],\"ISODate\") &gt;= 0){\n                    $_[0] =~s/ISODate//gs;\n                    if(index($_[0],\"Z\") &gt;= 0 || index($_[0],\"+\")){\n                        $_[0] =Time::Moment-&gt;from_string($_[0], lenient =&gt; 1);\n                    }else{\n                        $_[0] =Time::Moment-&gt;from_string($_[0] . 'Z', lenient =&gt; 1);\n                    }\n                }\n                #clean up regexes\n                if(index($_[0],\"qr/\") &gt;= 0){ \n                    $_[0] =~s/qr[\\/](.*?)([^\\\\])[\\/](i?)$/$1$2/s;\n                    if($3=='i'){\n                        $_[0] = qr/$_[0]/i;\n                    }else{\n                        $_[0] = qr/$_[0]/;\n                    }\n                }\n            }\n        }\n    }\n\nmy $mongores = $collection-&gt;aggregate( $qarrayref,{ allowDiskUse =&gt; 1 } \n</code></pre>\n"}], "owner": {"reputation": 143, "user_id": 9301312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4ae69ee0a9aee1a69743f8088960e5ce?s=128&d=identicon&r=PG&f=1", "display_name": "Bobert1234", "link": "https://stackoverflow.com/users/9301312/bobert1234"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 168, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1518422528, "creation_date": 1517508071, "question_id": 48569046, "link": "https://stackoverflow.com/questions/48569046/insert-mongo-objects-into-perl-array", "title": "insert mongo objects into perl array", "body": "<p>Apologies if this is a newbie question. I'm very new to perl.</p>\n\n<p>I have a series of strings read from a DB that contain queries, some of which are for mongodb and are in json format (loosely).<br>\nI am trying to read in those strings and run them on the appropriate DB by modifying an existing perl script that does something quite similar for MySQL queries.</p>\n\n<p>i.e. read the json string, decode it into an array, and then run it in mongodb.</p>\n\n<p>The simple case is working fine.\nThe problem is that certain data types (e.g. ISODate) need to be converted to perl objects before the query can be run. for example:</p>\n\n<pre><code>my $qstr = 'MONGOQUERY[\n    {\n        $match: {\n         \"lastModifiedDate\": \"ISODate(\"2016-08-10T04:55:46.053+0000\")\"\n        }\n    },\n    {\n        $project: {\n           name:1\n        }\n    },\n]';\n\n$qstr=~s/MONGOQUERY//gs;\n\nmy $qarrayref = JSON::PP-&gt;new-&gt;allow_nonref-&gt;relaxed-&gt;allow_barekey-&gt;loose-&gt;decode($qstr);\n\nmy $mongores = $collection-&gt;aggregate( $qarrayref,{ allowDiskUse =&gt; 1 } );\n</code></pre>\n\n<p>my workaround is to find and replace all instances of those specified datatypes (Timestamp,ISODate, NumberDecimal,NumberLong,NumberInt,Symbol) in the array with appropriate matching perl objects before I run the query, but as the arrays are not necessarily consistent depths, I'm not sure how to go about this. any ideas or alternate workarounds?</p>\n\n<p>Not that it would work any better, but note that if I remove the quotes and have:</p>\n\n<pre><code>\"lastModifiedDate\": ISODate(\"2016-08-10T04:55:46.053+0000\")\n</code></pre>\n\n<p>the json decode part doesn't even work. </p>\n"}, {"tags": ["image", "perl"], "answers": [{"tags": [], "owner": {"reputation": 183, "user_id": 1415769, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e6e7f59d114c4d945fb1c2aa29840d01?s=128&d=identicon&r=PG", "display_name": "lotyrin", "link": "https://stackoverflow.com/users/1415769/lotyrin"}, "is_accepted": true, "score": 2, "last_activity_date": 1517507204, "creation_date": 1517507204, "answer_id": 48568816, "question_id": 48568708, "link": "https://stackoverflow.com/questions/48568708/cannot-write-uploaded-image-to-file/48568816#48568816", "title": "Cannot write uploaded image to file", "body": "<p>You haven't opened OUTPUT for writing.</p>\n\n<p>replace</p>\n\n<pre><code>open (OUTPUT,\"$datapath/$dn/$fn\");\n</code></pre>\n\n<p>with</p>\n\n<pre><code>open (OUTPUT, \"&gt;\", \"$datapath/$dn/$fn\");\n</code></pre>\n\n<p>and Perl will create the file, truncate it if it exists already, and allow writes to it.</p>\n\n<p><a href=\"http://perldoc.perl.org/functions/open.html\" rel=\"nofollow noreferrer\">Relevant documentation.</a></p>\n"}], "owner": {"reputation": 8219, "user_id": 135605, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/7c56ff86a79852b167d84b3838756fba?s=128&d=identicon&r=PG", "display_name": "somejkuser", "link": "https://stackoverflow.com/users/135605/somejkuser"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 39, "favorite_count": 0, "accepted_answer_id": 48568816, "answer_count": 1, "score": 1, "last_activity_date": 1517507204, "creation_date": 1517506813, "question_id": 48568708, "link": "https://stackoverflow.com/questions/48568708/cannot-write-uploaded-image-to-file", "title": "Cannot write uploaded image to file", "body": "<p>I'm trying to save an animated gif to a file location. Here is my current code:</p>\n\n<pre><code># create folder location and file path name\nmy $dn=\"cmp\".int(rand(10));\nmy $fn=\"ca\".int(rand(10)).int(rand(10)).int(rand(10)).int(rand(10)).int(rand(10)).int(rand(10)).\".gif\";\nwhile (-f \"$datapath/$dn/$fn\") { $fn=\"ca\".int(rand(10)).int(rand(10)).int(rand(10)).int(rand(10)).int(rand(10)).int(rand(10)).\".gif\"; }\n\n# open the uploaded image for saving to a file\nopen (IMAGE,$insfn{'attachment'});\nbinmode(IMAGE);\n\n# open the file path for writing the image to\nopen (OUTPUT,\"$datapath/$dn/$fn\");\nbinmode(OUTPUT);\n\n# write the image to the file\nmy $buf;\nmy $bufSize=4096;\nwhile(read(IMAGE,$buf,$bufSize)) { print OUTPUT $buf; }\n</code></pre>\n\n<p>For some reason its not saving the image to the file.</p>\n\n<p>Not sure what to do past this point Im fairly new to perl.</p>\n"}, {"tags": ["perl", "character-encoding", "decode", "mime"], "answers": [{"comments": [{"owner": {"reputation": 163, "user_id": 2203113, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/BGfK4.png?s=128&g=1", "display_name": "Ivan", "link": "https://stackoverflow.com/users/2203113/ivan"}, "edited": false, "score": 0, "creation_date": 1517506826, "post_id": 48568487, "comment_id": 84133619, "body": "You live - you learn. Solution via the link you provided works perfectly. Thanks. Gotta read rfc for email specifications"}], "tags": [], "owner": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "is_accepted": true, "score": 1, "last_activity_date": 1517505989, "creation_date": 1517505989, "answer_id": 48568487, "question_id": 48567445, "link": "https://stackoverflow.com/questions/48567445/mimequoterdprint-decodes-everything-but-whitespaces-in-perl-script/48568487#48568487", "title": "MIME::QuoterdPrint decodes everything but whitespaces in perl script", "body": "<p>You cannot simple decode the full subject value with quoted-printable since not the full subject is encoded. If you have something like</p>\n\n<pre><code> Subject: =?UTF-8?Q?AAAAAAAA?=   =?UTF-8?Q?BBBBBBBB?=\n</code></pre>\n\n<p>you have to take each of <code>=?CHENC?Q?ENCODED?=</code> separately, decode the <code>ENCODED</code> part as quoted-printable and then interpret the result depending on the character encoding <code>CHENC</code> (i.e. UTF-8 in your specific case). After this is done replace the whole <code>=?...?=</code> part with the decoded data.</p>\n\n<p>For the exact details see <a href=\"https://www.ietf.org/rfc/rfc2047.txt\" rel=\"nofollow noreferrer\">RFC 2047</a>. For an existing implementation in Perl see for example <a href=\"https://perldoc.perl.org/Encode/MIME/Header.html\" rel=\"nofollow noreferrer\">Encode::MIME::Header</a>. See also <a href=\"https://stackoverflow.com/questions/126070/decode-an-utf8-email-header\">Decode an UTF8 email header</a>.</p>\n"}], "owner": {"reputation": 163, "user_id": 2203113, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/BGfK4.png?s=128&g=1", "display_name": "Ivan", "link": "https://stackoverflow.com/users/2203113/ivan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 148, "favorite_count": 1, "accepted_answer_id": 48568487, "answer_count": 1, "score": 0, "last_activity_date": 1517507112, "creation_date": 1517502495, "last_edit_date": 1517507112, "question_id": 48567445, "link": "https://stackoverflow.com/questions/48567445/mimequoterdprint-decodes-everything-but-whitespaces-in-perl-script", "title": "MIME::QuoterdPrint decodes everything but whitespaces in perl script", "body": "<p>I am writing a simple imap client with Perl's <strong>Net::IMAP::Simple</strong> module.\nI'd like to print subjects of messages on standart output. The subject is encoded in Quoted-Printables, so I have to decode it with <strong>MIME::QuotedPrint</strong> <em>decode_qp()</em> function.\nEverything is printed fine, except whitespaces, they remain encoded and I have no idea why. The output looks like this now:</p>\n\n<pre><code>[073] =?UTF-8?Q?[Myawesome_subject_topic]?= =?UTF-8?Q?_\u0421\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435?= =?UTF-8?Q?_\u043d\u043e\u043c\u0435\u0440?=\n</code></pre>\n\n<p>As you can see, whitespaces are locaed between ?= and =?UTF-8?Q?_ 'tags'.\nNot sure how to deal with them. The code for the relevant part is below</p>\n\n<pre><code>my $nm = $imap-&gt;select('INBOX');\nfor (my $i = 1; $i &lt;= $nm; $i++) {\nif ($imap-&gt;seen($i)) {\n    print '*';\n} \nelse {\n    print \" \";\n}\nmy $es = Email::Simple-&gt;new(join '', @{ $imap-&gt;top($i) } );\nmy $decoded = $es-&gt;header('Subject');\n$decoded = decode_qp($decoded);\nprintf(\"[%03d] %s\\n\", $i, $decoded);\n}\n</code></pre>\n\n<p><strong>UPDATE AND SOLUTION</strong></p>\n\n<ol>\n<li><p>Use <strong>Encode</strong> module instead of <strong>MIME::QuotedPrint</strong> </p>\n\n<p><code>use Encode qw(decode);</code></p></li>\n<li><p>Decode subject like this</p>\n\n<p><code>$decoded = decode(\"MIME-Header\", $encoded);</code></p></li>\n</ol>\n\n<p>additional info on the topic in the accepted answer below</p>\n"}, {"tags": ["windows", "perl", "utf-8", "perl-io"], "answers": [{"comments": [{"owner": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "edited": false, "score": 0, "creation_date": 1517513556, "post_id": 48567677, "comment_id": 84137131, "body": "If your source code is encoded in <code>UTF-8</code>, you should use <code>use utf8;</code>."}], "tags": [], "owner": {"reputation": 705, "user_id": 6490359, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/711f0af849e984c1633fe69ae8354b8f?s=128&d=identicon&r=PG&f=1", "display_name": "Silvar", "link": "https://stackoverflow.com/users/6490359/silvar"}, "is_accepted": true, "score": 0, "last_activity_date": 1517841114, "last_edit_date": 1517841114, "creation_date": 1517503220, "answer_id": 48567677, "question_id": 48566001, "link": "https://stackoverflow.com/questions/48566001/program-dies-on-umlauts-in-filename/48567677#48567677", "title": "Program dies on umlauts in filename", "body": "<p>On Windows, you need to either:</p>\n\n<ul>\n<li>manually encode file names (that have non-ASCII characters in them) before use, or</li>\n<li>use a package that does it for you while using its file functions, like <code>Win32::LongPath</code>.</li>\n</ul>\n\n<p>E.g.:</p>\n\n<pre><code>use strict;\nuse warnings;\nuse utf8;\n\nuse Win32::LongPath;\n\nmy $filename;\nmy $fh;\n\n$filename = \"Unicode file with \u00e4 in name.txt\";\nopenL(\\$fh, '&gt;:encoding(UTF-8)', $filename)\n    or die \"Could not open file '$filename' ($^E)\";\nprint $fh \"Unicode stuff written to file...\\n\";\nclose $fh;\n\n$filename = \"Another file with \u00f6 in it.txt\";\n# only three-argument version is supported - MODE argument is always required:\nopenL(\\$fh, '&lt;', $filename)\n    or die \"Could not open file '$filename' ($^E)\";\nmy @lines = &lt;$fh&gt;;\nclose $fh;\n</code></pre>\n\n<p>Note the use of a reference to the file handle variable (<code>\\$fh</code>) instead of the variable itself.</p>\n\n<p>As a bonus, using <code>Win32::LongPath</code> allows you to manipulate files with extra long full names (full path beyond the usual limit of 260 characters including the terminating NUL character). (You shouldn't get into a habit of doing this, however, since many other applications can't access such files.)</p>\n"}], "owner": {"reputation": 3, "user_id": 6507681, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-NwoevtYNzTU/AAAAAAAAAAI/AAAAAAAAAsE/bJu-wO1CPMg/photo.jpg?sz=128", "display_name": "zhengphor", "link": "https://stackoverflow.com/users/6507681/zhengphor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 212, "favorite_count": 0, "accepted_answer_id": 48567677, "answer_count": 1, "score": -1, "last_activity_date": 1517841114, "creation_date": 1517497905, "last_edit_date": 1517503138, "question_id": 48566001, "link": "https://stackoverflow.com/questions/48566001/program-dies-on-umlauts-in-filename", "title": "Program dies on umlauts in filename", "body": "<p>I hope you can help me, I can't find the reason why my code stops. I'd be grateful for every enhancement, I have to work with Perl and I've never done it before! Also I have to work on a Windows File System.</p>\n\n<p>Error: </p>\n\n<blockquote>\n  <p>Could not open file '' No such file or directory at\n  C:\\Users\\schacherl\\Documents\\perl\\tester.pl line 29,  line 1.</p>\n</blockquote>\n\n<p>FYI:\nthe FILElog.txt file contains subfolders like </p>\n\n<blockquote>\n  <p>\"vps_bayern_justiz_15027148042584275712825768716427\"</p>\n</blockquote>\n\n<p>EDALOG contains the fully qualified link to the EDA-File </p>\n\n<blockquote>\n  <p>\"W:\\EGVP\\manuelle\n  Nachrichten\\heruntergeladene_DONE\\EGVP_GP114503661816195610088017045919978\\attachments\\Sta\u00dffurt_AIA100.eda\"</p>\n</blockquote>\n\n<p>At this exact file above the program dies. For all others it seems to work so far, just those \"Sta\u00dffurt\" files it can't handle as it seems. If I'm encoding the other files with UTF-8 like the first one, I get a lot of </p>\n\n<blockquote>\n  <p>UTF-8 \"\\x84\" does not map to Unicode at\n  C:\\Users\\zhengphor\\Documents\\perl\\tester.pl line 32,  line 4.</p>\n  \n  <p>UTF-8 \"\\x81\" does not map to Unicode at\n  C:\\Users\\zhengpor\\Documents\\perl\\tester.pl line 32,  line 4.</p>\n</blockquote>\n\n<p>If I don't have a Sta\u00dffurt file, it works fine. This is just the Part where the error happens, I've excluded the whole handling of the $returner variable.</p>\n\n<p>I'd be really grateful! I can't find why the Sta\u00dffurt file makes this error.</p>\n\n<pre><code>#!/usr/local/bin/perl -w -l\n\nuse Switch;\nuse Data::Dumper;\n\n`chcp 65001`;\nsub getAusgabe{\n`dir \"W:\\\\EGVP\\\\manuelle Nachrichten\\\\heruntergeladene\\\\_DONE\\\\ /AD /B  1&gt;FILElog.txt`;\nprint 'written file log';\nmy $filename = 'FILElog.txt';\nopen(my $fh, '&lt;:encoding(UTF-8)', $filename)\n  or die \"Could not open file '$filename' $!\";\n\nwhile (my $row = &lt;$fh&gt;) {\nchomp $row;\n  if($row ne 'DONE'){\n    `dir \"W:\\\\EGVP\\\\manuelle Nachrichten\\\\heruntergeladene\\\\_DONE\\\\$row\\\\*.eda\" /S /B  1&gt;EDAlog.txt`;\n    print 'written eda log';\n    my $filename = 'EDAlog.txt';\n    open(my $fh1, $filename)\n      or die \"Could not open file '$filename' $!\";\n\n      while(my $row2 = &lt;$fh1&gt;){\n        chomp $row2;\n        print 'Datei:'. $row2;\n        open(my $fh2, $row2)\n          or die \"Could not open file '$$row2' $!\";\n            print 'ich bin drin';\n            while (my $rowFile = &lt;$fh2&gt;) {\n                $returner .= $rowFile;\n                print 'hier k\u00f6nnte ihr text stehen';\n            }\n\n    }\n  }\n\n}\nprint 'ich habe fertig';\nreturn $returner;\n}\n\n\n$ausgabe1 = getAusgabe;\n</code></pre>\n"}, {"tags": ["r", "perl", "pdl"], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 9300310, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb407272f93bc048390d2b19aa9d3178?s=128&d=identicon&r=PG&f=1", "display_name": "Stephan Loyd", "link": "https://stackoverflow.com/users/9300310/stephan-loyd"}, "edited": false, "score": 0, "creation_date": 1517838931, "post_id": 48565305, "comment_id": 84244914, "body": "No I&#39;m not asking for &quot;normal&quot; Perl. I&#39;m asking for <a href=\"https://metacpan.org/pod/distribution/PDL/Basic/Pod/QuickStart.pod#To-create-a-new-PDL-variable\" rel=\"nofollow noreferrer\">PDL</a>. Things like $x?$y:$z do not work for PDL."}], "tags": [], "owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "is_accepted": false, "score": 0, "last_activity_date": 1517495906, "creation_date": 1517495906, "answer_id": 48565305, "question_id": 48564707, "link": "https://stackoverflow.com/questions/48564707/whats-the-equivalent-of-rs-ifelse-in-perl-pdl/48565305#48565305", "title": "What&#39;s the equivalent of R&#39;s ifelse in Perl PDL", "body": "<p>Better than <code>$x ? $y : $z</code>? Not to my mind, but it's a matter of style and taste</p>\n\n<pre><code>sub ifelse {\n    my ($x,$y,$z) = @_;\n\n    $x ? $y : $z ;\n    if($x){$y}else{$z} ;\n    [$y,$z]-&gt;[!$x] ;\n    [$z,$y]-&gt;[!!$x] ;\n    ($x &amp;&amp; $y) || $z ;        # valid only if $y is always true\n    (!$x &amp;&amp; $z) || $y ;       # valid only if $z is always true\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 11, "user_id": 9300310, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb407272f93bc048390d2b19aa9d3178?s=128&d=identicon&r=PG&f=1", "display_name": "Stephan Loyd", "link": "https://stackoverflow.com/users/9300310/stephan-loyd"}, "edited": false, "score": 0, "creation_date": 1517839093, "post_id": 48565382, "comment_id": 84245046, "body": "Sorry but I&#39;m not asking for how to solve that particular example. I&#39;m actually asking for a generic way of abstraction like R&#39;s ifelse() method."}], "tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": false, "score": 2, "last_activity_date": 1517498100, "last_edit_date": 1517498100, "creation_date": 1517496127, "answer_id": 48565382, "question_id": 48564707, "link": "https://stackoverflow.com/questions/48564707/whats-the-equivalent-of-rs-ifelse-in-perl-pdl/48565382#48565382", "title": "What&#39;s the equivalent of R&#39;s ifelse in Perl PDL", "body": "<pre><code>#! /usr/bin/perl\nuse warnings;\nuse strict;\n\nuse PDL;\n\nmy $x     = 'PDL'-&gt;new([1, 2, 3, 4]);\nmy $where = ! ($x % 2);               # [0 1 0 1]\nmy $y     = $x * ($where + 1);\nprint $y;                             # [1 4 3 8]\n</code></pre>\n\n<p>or, shortly</p>\n\n<pre><code>my $y = $x * ( 2 - $x % 2 );\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 9300310, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb407272f93bc048390d2b19aa9d3178?s=128&d=identicon&r=PG&f=1", "display_name": "Stephan Loyd", "link": "https://stackoverflow.com/users/9300310/stephan-loyd"}, "is_accepted": true, "score": 1, "last_activity_date": 1517927453, "creation_date": 1517927453, "answer_id": 48645373, "question_id": 48564707, "link": "https://stackoverflow.com/questions/48564707/whats-the-equivalent-of-rs-ifelse-in-perl-pdl/48645373#48645373", "title": "What&#39;s the equivalent of R&#39;s ifelse in Perl PDL", "body": "<p>Answering the question myself. It can be something like this, </p>\n\n<pre><code>use PDL;                                                                      \n\nsub ifelse {                                                                  \n    my ( $test, $yes, $no ) = @_;                                             \n\n    $test = pdl($test);                                                       \n    my ( $ok, $nok ) = which_both($test);                                     \n\n    my $rslt = zeros( $test-&gt;dim(0) );                                        \n\n    unless ( $ok-&gt;isempty ) {                                                 \n        $yes = pdl($yes);                                                     \n        $rslt-&gt;slice($ok) .= $yes-&gt;index( $ok % $yes-&gt;dim(0) );               \n    }                                                                         \n    unless ( $nok-&gt;isempty ) {                                                \n        $no = pdl($no);                                                       \n        $rslt-&gt;slice($nok) .= $no-&gt;index( $nok % $no-&gt;dim(0) );               \n    }                                                                         \n    return $rslt;                                                             \n}                                                                             \n\nmy $x = pdl( 1, 2, 3, 4 );                                                    \nsay ifelse( $x % 2, $x, $x * 2 );       # [1 4 3 8]                                             \nsay ifelse( $x % 2, 5, sequence( 3 ) ); # [5 1 5 0]                                      \nsay ifelse( 42, $x, $x * 2 );           # [1]\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 9300310, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb407272f93bc048390d2b19aa9d3178?s=128&d=identicon&r=PG&f=1", "display_name": "Stephan Loyd", "link": "https://stackoverflow.com/users/9300310/stephan-loyd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 91, "favorite_count": 0, "accepted_answer_id": 48645373, "answer_count": 3, "score": 0, "last_activity_date": 1517927453, "creation_date": 1517494128, "question_id": 48564707, "link": "https://stackoverflow.com/questions/48564707/whats-the-equivalent-of-rs-ifelse-in-perl-pdl", "title": "What&#39;s the equivalent of R&#39;s ifelse in Perl PDL", "body": "<p>I am new to PDL. R's ifelse() method can do conditonal element selection. For example, </p>\n\n<pre><code>x &lt;- c(1,2,3,4)\nifelse(x%%2, x, x*2)\n# [1] 1 4 3 8\n</code></pre>\n\n<p>Anyone knows how to do this in PDL? I know you can do it like below, but is there any better ways?</p>\n\n<pre><code>pdl(map { $_ % 2 ? $_ : $_*2 } @{$x-&gt;unpdl} )\n</code></pre>\n"}, {"tags": ["json", "perl", "mojolicious"], "comments": [{"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1517490176, "post_id": 48562884, "comment_id": 84122492, "body": "I&#39;m not sure there&#39;s enough information here to help. For starters - <code>$tempHash</code> is probably not a hash. It&#39;s a reference to an array."}, {"owner": {"reputation": 21, "user_id": 9153431, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cb9a70f66ffe4566cae5ddd575ee71a4?s=128&d=identicon&r=PG&f=1", "display_name": "user1234", "link": "https://stackoverflow.com/users/9153431/user1234"}, "reply_to_user": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1517491222, "post_id": 48562884, "comment_id": 84123196, "body": "hi @Sobrique What information do you need more ? Thanks"}, {"owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "edited": false, "score": 1, "creation_date": 1517492737, "post_id": 48562884, "comment_id": 84124188, "body": "Where does <code>$comments</code> come from? There&#39;s a gap between the two blocks of code that mean you definitely don&#39;t have a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> for people to look at"}, {"owner": {"reputation": 21, "user_id": 9153431, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cb9a70f66ffe4566cae5ddd575ee71a4?s=128&d=identicon&r=PG&f=1", "display_name": "user1234", "link": "https://stackoverflow.com/users/9153431/user1234"}, "reply_to_user": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "edited": false, "score": 0, "creation_date": 1517494080, "post_id": 48562884, "comment_id": 84125144, "body": "Hi @ChrisTurner $comments doesn&#39;t exist. Is some kind of var (array?) with the json data that I want to send to the template. This is the code I was able to write, I have no idea if it&#39;s correct or not. Thanks"}, {"owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "edited": false, "score": 0, "creation_date": 1517495515, "post_id": 48562884, "comment_id": 84126178, "body": "If you&#39;re using variables that don&#39;t exist, the code can&#39;t be correct...as well as a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>, providing examples of the json input would also help too"}, {"owner": {"reputation": 21, "user_id": 9153431, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cb9a70f66ffe4566cae5ddd575ee71a4?s=128&d=identicon&r=PG&f=1", "display_name": "user1234", "link": "https://stackoverflow.com/users/9153431/user1234"}, "edited": false, "score": 0, "creation_date": 1517495779, "post_id": 48562884, "comment_id": 84126382, "body": "I added that variable after: &quot;The expected result would allow me to send the data (array?) to the template, in order to create a table.&quot; the code I have is on the first part."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1517496759, "post_id": 48562884, "comment_id": 84127030, "body": "I don&#39;t understand what you&#39;re asking."}, {"owner": {"reputation": 21, "user_id": 9153431, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cb9a70f66ffe4566cae5ddd575ee71a4?s=128&d=identicon&r=PG&f=1", "display_name": "user1234", "link": "https://stackoverflow.com/users/9153431/user1234"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1517497332, "post_id": 48562884, "comment_id": 84127444, "body": "Hi @melpomene the question is: How I can I received the JSON, parse it to Perl array, and send the array to template"}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1517497393, "post_id": 48562884, "comment_id": 84127474, "body": "Isn&#39;t that what your code does? If not, what does your code do?"}, {"owner": {"reputation": 21, "user_id": 9153431, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cb9a70f66ffe4566cae5ddd575ee71a4?s=128&d=identicon&r=PG&f=1", "display_name": "user1234", "link": "https://stackoverflow.com/users/9153431/user1234"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1517497737, "post_id": 48562884, "comment_id": 84127724, "body": "good question @melpomene ! I have no idea. I started to work around on this today. I even have problems to debug what I have"}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1517497878, "post_id": 48562884, "comment_id": 84127836, "body": "Well, which part are you having problems with? Receiving data over HTTP, decoding JSON, or what? Please ask a single, well-defined question."}, {"owner": {"reputation": 21, "user_id": 9153431, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cb9a70f66ffe4566cae5ddd575ee71a4?s=128&d=identicon&r=PG&f=1", "display_name": "user1234", "link": "https://stackoverflow.com/users/9153431/user1234"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1517498241, "post_id": 48562884, "comment_id": 84128077, "body": "@melpomene Changes added to post"}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 1, "creation_date": 1517498477, "post_id": 48562884, "comment_id": 84128255, "body": "That&#39;s not a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1517498501, "post_id": 48562884, "comment_id": 84128268, "body": "Why are you loading both <code>JSON::XS</code> and <code>JSON</code> but using neither?"}, {"owner": {"reputation": 21, "user_id": 9153431, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cb9a70f66ffe4566cae5ddd575ee71a4?s=128&d=identicon&r=PG&f=1", "display_name": "user1234", "link": "https://stackoverflow.com/users/9153431/user1234"}, "edited": false, "score": 0, "creation_date": 1517499355, "post_id": 48562884, "comment_id": 84128837, "body": "At the beggining I was using JSON. JSON::XS was already on the app"}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 1, "creation_date": 1517499410, "post_id": 48562884, "comment_id": 84128867, "body": "Have you ever written a program before?"}, {"owner": {"reputation": 21, "user_id": 9153431, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cb9a70f66ffe4566cae5ddd575ee71a4?s=128&d=identicon&r=PG&f=1", "display_name": "user1234", "link": "https://stackoverflow.com/users/9153431/user1234"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1517500442, "post_id": 48562884, "comment_id": 84129595, "body": "@melpomene jsut python. never Perl"}, {"owner": {"reputation": 25590, "user_id": 59135, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/90c563665ec03a1b9e80671bb95deeed?s=128&d=identicon&r=PG", "display_name": "daotoad", "link": "https://stackoverflow.com/users/59135/daotoad"}, "edited": false, "score": 0, "creation_date": 1517515423, "post_id": 48562884, "comment_id": 84138227, "body": "@user1234, Welcome to Perl.  If you&#39;re doing more Perl it&#39;s worth your time to visit <a href=\"https://learnxinyminutes.com/docs/perl/\" rel=\"nofollow noreferrer\">learnxinyminutes.com/docs/perl</a> and also spend some time looking at <a href=\"https://perldoc.perl.org\" rel=\"nofollow noreferrer\">perldoc.perl.org</a>  StackOverflow is a wonderful resource.  Perlmonks is also a great community for help with code review, solutions to problems and general coding advice:  <a href=\"http://www.perlmonks.org\" rel=\"nofollow noreferrer\">perlmonks.org</a>"}, {"owner": {"reputation": 21, "user_id": 9153431, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cb9a70f66ffe4566cae5ddd575ee71a4?s=128&d=identicon&r=PG&f=1", "display_name": "user1234", "link": "https://stackoverflow.com/users/9153431/user1234"}, "reply_to_user": {"reputation": 25590, "user_id": 59135, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/90c563665ec03a1b9e80671bb95deeed?s=128&d=identicon&r=PG", "display_name": "daotoad", "link": "https://stackoverflow.com/users/59135/daotoad"}, "edited": false, "score": 0, "creation_date": 1517567278, "post_id": 48562884, "comment_id": 84157606, "body": "Thanks @daotoad ! fortunately is just this task I have to do with Perl"}], "answers": [{"comments": [{"owner": {"reputation": 21, "user_id": 9153431, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cb9a70f66ffe4566cae5ddd575ee71a4?s=128&d=identicon&r=PG&f=1", "display_name": "user1234", "link": "https://stackoverflow.com/users/9153431/user1234"}, "edited": false, "score": 0, "creation_date": 1517502010, "post_id": 48567132, "comment_id": 84130671, "body": "Thank you very much for your answer. This api was just an example. Actually my API starts with : { &quot;data&quot;: [{..}, {...}] } so I hope I will not have a problem"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 21, "user_id": 9153431, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cb9a70f66ffe4566cae5ddd575ee71a4?s=128&d=identicon&r=PG&f=1", "display_name": "user1234", "link": "https://stackoverflow.com/users/9153431/user1234"}, "edited": false, "score": 1, "creation_date": 1517502118, "post_id": 48567132, "comment_id": 84130742, "body": "@user1234: Please read <a href=\"https://stackoverflow.com/help/someone-answers\">What should I do when someone answers my question?</a>."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 1, "creation_date": 1517502940, "post_id": 48567132, "comment_id": 84131320, "body": "Note that <code>decode_json($r-&gt;decoded_content)</code> is not quite right because <code>decoded_content</code> returns a unicode text string, but <code>decode_json</code> takes a byte string (in UTF-8 format)."}, {"owner": {"reputation": 21, "user_id": 9153431, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cb9a70f66ffe4566cae5ddd575ee71a4?s=128&d=identicon&r=PG&f=1", "display_name": "user1234", "link": "https://stackoverflow.com/users/9153431/user1234"}, "edited": false, "score": 0, "creation_date": 1517503744, "post_id": 48567132, "comment_id": 84131842, "body": "thanks @DaveCross and  melpomene. About my foreach, could please tell me if i&#39;m going in a good way? Thanks for you time to explain me this. Perl is really complicated, when you don&#39;t know anything, and you have to do some task fast."}], "tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 1, "last_activity_date": 1517503140, "last_edit_date": 1592644375, "creation_date": 1517501507, "answer_id": 48567132, "question_id": 48562884, "link": "https://stackoverflow.com/questions/48562884/perl-receive-json-and-render-on-template/48567132#48567132", "title": "Perl - Receive JSON and render on template", "body": "<p>Your error looks pretty clear:</p>\n<blockquote>\n<p>Can't use string (&quot;[ { &quot;postId&quot;: 1, &quot;id&quot;:&quot;...) as a HASH ref while &quot;strict refs&quot; in use at template view_.html.ep line 228.</p>\n</blockquote>\n<p>It's referring to this line in your template:</p>\n<pre><code>&lt;% foreach my $element (@{$body-&gt;{&quot;element&quot;}}) { %&gt;\n</code></pre>\n<p>In this code you're taking the variable <code>$body</code> and expecting it to contain a hash reference (because you're using the <code>-&gt;{...}</code> operator on it). But, as the error says, it doesn't contain a hash reference, it contains a string.</p>\n<p>So the problem is that you have a JSON string, where you expect a Perl reference. And that means that you haven't JSON-decoded your JSON string.</p>\n<p>Perhaps you think that <code>$response-&gt;decoded_content();</code> does the JSON decoding. But it doesn't. That does a higher level of decoding. As the <a href=\"https://metacpan.org/pod/HTTP::Response\" rel=\"nofollow noreferrer\">documentation for HTTP::Response says</a>:</p>\n<blockquote>\n<p><strong>$r-&gt;decoded_content( %options )</strong></p>\n<p>This will return the content after any Content-Encoding and charsets have been decoded. See HTTP::Message for details.</p>\n</blockquote>\n<p>Nothing in there about JSON decoding.</p>\n<p>And that's why you're loading (two!) JSON modules. You need to use one of them to decode the JSON to a Perl data structure. Something like this, perhaps:</p>\n<pre><code>my $body = decode_json( $response-&gt;decoded_content() );\n</code></pre>\n<p>[<strong>Note:</strong> In a comment, melpomene correctly points out a problem with this. The correct code is:</p>\n<pre><code>my $body = decode_json( $response-&gt;content() );\n</code></pre>\n<p>i.e. You shouldn't decode the response body before sending it into <code>decode_json()</code>.]</p>\n<p>That will, at least, get you a reference into <code>$body</code>. I see another problem though. Your JSON string starts with <code>[</code>, so it will decode into an array reference, not a hash reference. You'll need to deal with that change. Unfortunately, I don't know enough about your data or what you're trying to do to suggest a solution to that problem.</p>\n"}], "owner": {"reputation": 21, "user_id": 9153431, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cb9a70f66ffe4566cae5ddd575ee71a4?s=128&d=identicon&r=PG&f=1", "display_name": "user1234", "link": "https://stackoverflow.com/users/9153431/user1234"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 446, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1517515461, "creation_date": 1517488364, "last_edit_date": 1517515461, "question_id": 48562884, "link": "https://stackoverflow.com/questions/48562884/perl-receive-json-and-render-on-template", "title": "Perl - Receive JSON and render on template", "body": "<p>I'm trying to expand some app, but I never used Perl before. This uses de framework Mojolicious. \nFor now I was able to write this, but I can't find out how to check if it's correct or not.</p>\n\n<pre><code>    use JSON::XS;\n    use JSON qw( decode_json );\n    my $self = shift; \n    my $req = HTTP::Request-&gt;new(\"GET\", \"https://jsonplaceholder.typicode.com/comments\");\n\n    my $ua = LWP::UserAgent-&gt;new(\n            keep_alive =&gt; 1,\n            timeout =&gt; 3000,\n            ssl_opts =&gt; {\n                verify_hostname =&gt; 0,\n                SSL_verify_mode =&gt; IO::Socket::SSL::SSL_VERIFY_NONE\n            },\n        );\n    my $response = $ua-&gt;request($req);\n    my $body = $response-&gt;decoded_content();\n\n$self-&gt;stash(\n        'body' =&gt; $body\n        );\n\n    $self-&gt;render('view_');\n    return;\n</code></pre>\n\n<p>On template I try something like this: (Found somewhere example)</p>\n\n<pre><code>&lt;% foreach my $element (@{$body-&gt;{\"element\"}}) { %&gt;\n    &lt;p&gt;&lt;%= $element-&gt;[1]-&gt;{\"id\"} %&gt;&lt;/p&gt;\n&lt;% } %&gt;\n</code></pre>\n\n<p>But got the error:</p>\n\n<pre><code>Can't use string (\"[ { \"postId\": 1, \"id\":\"...) as a HASH ref while \"strict refs\" in use at template view_.html.ep line 228.\n</code></pre>\n"}, {"tags": ["windows", "bash", "perl", "powershell", "virtuoso"], "comments": [{"owner": {"reputation": 8217, "user_id": 241164, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c827c7be0a2d3dc7e4732934f62aa9a?s=128&d=identicon&r=PG", "display_name": "TallTed", "link": "https://stackoverflow.com/users/241164/tallted"}, "edited": false, "score": 0, "creation_date": 1517517123, "post_id": 48556374, "comment_id": 84139095, "body": "The first guide you followed comes from Virtuoso&#39;s creator (and my employer), <a href=\"http://www.openlinksw.com/\" rel=\"nofollow noreferrer\">OpenLink Software</a>, and should be considered authoritative. We would appreciate an alert of any errors you may find in that guide, optimally sent to the <a href=\"https://lists.sourceforge.net/lists/listinfo/virtuoso-users/\" rel=\"nofollow noreferrer\">Virtuoso Users mailing list</a> and/or posted in a <a href=\"http://support.openlinksw.com/support/online-support.vsp\" rel=\"nofollow noreferrer\">Support Case which may be opened at no cost</a>."}, {"owner": {"reputation": 8217, "user_id": 241164, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c827c7be0a2d3dc7e4732934f62aa9a?s=128&d=identicon&r=PG", "display_name": "TallTed", "link": "https://stackoverflow.com/users/241164/tallted"}, "edited": false, "score": 0, "creation_date": 1517519024, "post_id": 48556374, "comment_id": 84140067, "body": "Note as well that the first guide you followed was not for installation, but for building from source. The recommended pre-built binary installation is a simple ZIP extraction, and addition of the extracted <code>&#47;bin&#47;</code> subdirectory to your <code>$PATH</code>. One more note -- the binary is <code>virtuoso-t.exe</code>, not <code>virtuoso.exe</code>."}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user9298142"}, "edited": false, "score": 0, "creation_date": 1517473670, "post_id": 48558035, "comment_id": 84112280, "body": "I have added that path to $PATH but yet getting same error"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1517478730, "post_id": 48558035, "comment_id": 84115036, "body": "Okay, but why did you not do that before when it is part of the installation process? We now have no idea which parts of the installation were successful. It would be much better if you gave a more accurate account of what you did and what the results were instead of waiting while I made guesses."}, {"owner": {"user_type": "does_not_exist", "display_name": "user9298142"}, "edited": false, "score": 0, "creation_date": 1517479371, "post_id": 48558035, "comment_id": 84115459, "body": "thanks, I have already done that step but giving the wrong path its actually in the bin path so I have added that path to system path and now it will work. What mistake actually I have made that the virtuoso-t is in bin path so I have added only the path c:\\virtuoso. so I have added up to the bin path and now its working.thanks for your help."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1517480117, "post_id": 48558035, "comment_id": 84115892, "body": "@vimalDev: I was surprised that the prescribed path was <code>c:\\virtuoso</code>. There is a Linux convention that the &quot;binaries&quot; will be in a <code>bin</code> subdirectory but there is no penalty for breaking that convention so I couldn&#39;t be certain. The blame lies with the author of the guide, and you should write them a note that includes a link to this <i>Stack Overflow</i> page."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1517483617, "post_id": 48558035, "comment_id": 84118371, "body": "@vimalDev: Where is <code>virtuoso.exe</code> or <code>virtuoso.bat</code> or similar?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user9298142"}, "edited": false, "score": 0, "creation_date": 1517485927, "post_id": 48558035, "comment_id": 84119720, "body": "it&#39;s not available in the opensource version of OpenLink Virtuoso"}, {"owner": {"reputation": 8217, "user_id": 241164, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c827c7be0a2d3dc7e4732934f62aa9a?s=128&d=identicon&r=PG", "display_name": "TallTed", "link": "https://stackoverflow.com/users/241164/tallted"}, "edited": false, "score": 0, "creation_date": 1517597346, "post_id": 48558035, "comment_id": 84175250, "body": "In the pre-built binary distribution of VOS (Virtuoso Open Source Edition), the binary is <code>virtuoso-t.exe</code>, found in the <code>bin</code> subdirectory of the ZIP expansion."}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": true, "score": 0, "last_activity_date": 1517480203, "last_edit_date": 1517480203, "creation_date": 1517472603, "answer_id": 48558035, "question_id": 48556374, "link": "https://stackoverflow.com/questions/48556374/how-do-i-install-openlink-virtuoso-on-windows/48558035#48558035", "title": "How do i install openLink virtuoso on windows?", "body": "<p>I imagine that you haven't done step 3. properly:</p>\n\n<ul>\n<li>Add <code>c:\\virtuoso</code> to system <em>PATH</em></li>\n</ul>\n\n<p>How did you do this? Does it show <code>c:\\virtuoso</code> if you enter <code>$PATH</code>?</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user9298142"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 421, "favorite_count": 1, "closed_date": 1517489738, "accepted_answer_id": 48558035, "answer_count": 1, "score": 1, "last_activity_date": 1517518071, "creation_date": 1517465297, "last_edit_date": 1592644375, "question_id": 48556374, "link": "https://stackoverflow.com/questions/48556374/how-do-i-install-openlink-virtuoso-on-windows", "closed_reason": "Not suitable for this site", "title": "How do i install openLink virtuoso on windows?", "body": "<p>I am trying to install <a href=\"http://virtuoso.openlinksw.com/\" rel=\"nofollow noreferrer\">OpenLink Virtuoso (Open Source Edition)</a> on Windows but didn't make to install it correctly.</p>\n<p>What I have tried: First I follow all the step at <a href=\"http://vos.openlinksw.com/owiki/wiki/VOS/VOSMakeWindows#Prerequisites\" rel=\"nofollow noreferrer\">Installation steps for OpenLink Virtuoso on Windows</a>, which are as below --</p>\n<ol>\n<li>Cygwin bash with developer tools (gawk, flex, bison) installed.</li>\n<li>Active Perl, available from <a href=\"http://www.activestate.com/ActivePerl\" rel=\"nofollow noreferrer\">ActivePerlLink</a></li>\n<li>OpenSSL version 0.97 static libraries for Windows and header files.</li>\n</ol>\n<p>-- but that doesn't help me so I have googled for another and I found this link <a href=\"https://pythonhosted.org/SuRF/integration/virtuoso.html\" rel=\"nofollow noreferrer\">Steps to install OpenLink Virtuoso</a> for install OpenLink Virtuoso 5</p>\n<p>but I am stuck at step 4</p>\n<blockquote>\n<p>Execute from the shell:</p>\n<pre><code>$ cd c:\\virtuoso\\database\n\n$ virtuoso-t -f virtuoso.ini //\n</code></pre>\n</blockquote>\n<p>It gives me an error on Cygwin64 Terminal</p>\n<pre><code> /cygdrive/c/virtuoso/virtuoso-opensource-win32-20120802/virtuoso-opensource/database\n$ virtuoso -t -f virtuoso.ini\n-bash: virtuoso: command not found\n</code></pre>\n<p>and in PowerShell windows, it will be giving me an error as below</p>\n<pre><code> virtuoso-t -f virtuoso.ini\nvirtuoso-t : The term 'virtuoso-t' is not recognized as the name of a cmdlet, function, script file, or operable\nprogram. Check the spelling of the name, or if a path was included, verify that the path is correct and try again.\nAt line:1 char:1\n+ virtuoso-t -f virtuoso.ini\n+ ~~~~~~~~~~\n    + CategoryInfo          : ObjectNotFound: (virtuoso-t:String) [], CommandNotFoundException\n    + FullyQualifiedErrorId : CommandNotFoundException\n</code></pre>\n<p>Anybody, please help me to install this open source version of OpenLink Virtuoso.</p>\n<p>I have googled but didn't find a good source to install it correctly.</p>\n"}, {"tags": ["perl", "pipe"], "answers": [{"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1517454585, "post_id": 48554104, "comment_id": 84105760, "body": "Re &quot;<i>Let&#39;s assume that it is 4KB.</i>&quot;, In modern versions of Perl, it&#39;s 8 KiB by default. (Decided when <code>perl</code> is built.)"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1517454721, "post_id": 48554104, "comment_id": 84105792, "body": "Re &quot;<i>A &quot;flush&quot; operation on an output handle</i>&quot;, A flush operation on an input handle means getting rid of any buffered data."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1517454897, "post_id": 48554104, "comment_id": 84105828, "body": "Re &quot;<i>When there is enough capacity to contain the contents of your write operation, the operation will continue.</i>&quot;, It&#39;s also possible (e.g. when using <code>syswrite</code>) for partial writes to occur when there&#39;s isn&#39;t enough space in the handle for the whole message."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1517455097, "post_id": 48554104, "comment_id": 84105876, "body": "Re &quot;<i>It depends, but there is no guarantee that it will be anything good.</i>&quot;, No way, there&#39;s no problem writing a large message to a pipe. (That&#39;s why you&#39;ve never had to worry about the size of what you printt.) If you&#39;re using <code>print</code>, it will write the whole message (eventually). If you use <code>syswrite</code>, it will tell you how many bytes it did write."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1517455334, "post_id": 48554104, "comment_id": 84105918, "body": "Of course, if you&#39;re doing bi-directional communication (e.g. using two pipes), improperly written code could deadlock if a pipe files up. (That can occur with a large message, or even with lots of small messages.) It doesn&#39;t necessarily take much either. Last I checked, pipes could only hold 4 KiB in Windows."}, {"owner": {"reputation": 5937, "user_id": 783314, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/b3d5692064779f501f7c2a639dc0076c?s=128&d=identicon&r=PG", "display_name": "Stephen", "link": "https://stackoverflow.com/users/783314/stephen"}, "edited": false, "score": 0, "creation_date": 1517604183, "post_id": 48554104, "comment_id": 84178392, "body": "So is it accurate to say that as soon as data is in the pipe, it is always available for reading by the reader? The only way it is &quot;held back&quot; is by buffering on the writer&#39;s end before it reaches the pipe?"}], "tags": [], "owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "is_accepted": false, "score": 3, "last_activity_date": 1517505237, "last_edit_date": 1517505237, "creation_date": 1517449314, "answer_id": 48554104, "question_id": 48553644, "link": "https://stackoverflow.com/questions/48553644/several-questions-about-pipes/48554104#48554104", "title": "several questions about pipes", "body": "<p>Let's start with #2. Buffering and flushing of output handles is about efficiency. There is some overhead in a disk or a socket write operation, and in general it is more efficient to do write 1000 bytes in a single operation than to write 4 bytes in 250 separate operations. For programs that are heavy on I/O but light on computation, this can make a huge difference. So I/O libraries maintain a memory \"buffer\" with a size that has been chosen for optimal writing efficiency. Let's assume that it is <strike>4</strike> 8KB.</p>\n\n<p>In normal, buffered operation, your process writes some bytes to the output handle. The I/O library copies these bytes to the \"buffer\" until the buffer is full. When the buffer is full, the I/O library performs the actual write operation to the pipe/socket/disk of the entire buffer. Then it erases the buffer and waits for more output.</p>\n\n<p>(Input buffering is a thing, too. Like you might ask for 23 bytes from an input handle, and the I/O library might read 8KB of data from the input channel, return 23 bytes to you, and put the rest into memory for the next read requests you make)</p>\n\n<hr>\n\n<p>So now we will address #1. An obvious drawback of buffering is that bytes that have been ostensibly written to a file/pipe/socket might only exist in a buffer and so will not be available to a separate process that is reading the same data source, and you experience <a href=\"https://perl.plover.com/FAQs/Buffering.html\" rel=\"nofollow noreferrer\">suffering from buffering</a>. The amount of data that is not available to a reader can be as large as the size of the buffer on the output handle.</p>\n\n<p>A \"flush\" operation on an output handle tells the I/O library to write the current buffer to disk/pipe/socket, even if the buffer is not full. And this does make the data available for a separate reader.</p>\n\n<p>In Perl, output handles can be \"autoflushed\", meaning that the flush operation will be performed after every write or print on the handle. With autoflushing, you lose the efficiency gains from I/O buffering but you get better responsiveness from your output generator. Most handles are not autoflushed by default, so you have to enable it yourself with a call like</p>\n\n<pre><code>WRITER-&gt;autoflush(1)\n</code></pre>\n\n<p>after you create the output handle. Without autoflush, output is written only when the output buffer is full or the output handle is closed.</p>\n\n<hr>\n\n<p>#3. Pipes and sockets also have a finite capacity, which has nothing to do with the size of the I/O buffer we've been talking about (Files also have a finite capacity, since you will eventually run out of disk space). When you have written enough output to a pipe or socket so that it is full, your write operation will block. The pipe and socket can get emptied when other processes read from them. When there is enough capacity to contain the contents of your write operation, the operation will continue. In principle, you could write on the output handle up to the pipe's capacity (let's say 64KB) plus up to the size of the output handle's buffer (~8KB) before your operation would block.</p>\n\n<hr>\n\n<p>#4. So what will happen if you attempt a single very large write to a pipe? It depends, but there is no guarantee that it will be anything good. So it is best to take care not do that. For use cases where the amount of interprocess data is large relative to pipe capacity, consider using a file instead.</p>\n"}], "owner": {"reputation": 5937, "user_id": 783314, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/b3d5692064779f501f7c2a639dc0076c?s=128&d=identicon&r=PG", "display_name": "Stephen", "link": "https://stackoverflow.com/users/783314/stephen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 66, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1517505237, "creation_date": 1517445156, "question_id": 48553644, "link": "https://stackoverflow.com/questions/48553644/several-questions-about-pipes", "title": "several questions about pipes", "body": "<p>This is a follow-up to <a href=\"https://stackoverflow.com/questions/48531186/process-hangs-when-writing-large-data-to-pipe?noredirect=1#comment84067945_48531186\">process hangs when writing large data to pipe</a> where we identified problems in how I was using pipes. There was a helpful discussion in the comments but I have more questions, so posing them here.</p>\n\n<p>If you must assume a programming language assume Perl since that's what I'm using (so I'll keep the tag). I don't know how much of this varies by language...</p>\n\n<ol>\n<li><p>What is the definition of \"flush\" exactly? Before flushing, is the data\nin the pipe yet, or is the data only in the pipe after it has been flushed?</p>\n\n<p>1a. If it is not in the pipe yet, where is it? </p>\n\n<p>1b. If it <em>is</em> in the pipe, how is the reader prevented from reading it?</p></li>\n<li><p>What is the reason/motivation for having the concept of flushing?</p></li>\n<li><p>From a comments on the earlier post: \"A pipe is 'block buffered' so stuff \nis there to read only once a block (4kB?) has been written or pipe got full (64kB?)\" So is a pipe automatically flushed once it is full?</p></li>\n<li><p>What if you want to write a single variable to a pipe which is larger than the pipe's entire size? Assuming you also have a process actively reading from the pipe, will the process be smart enough to write the variable in chunks, or will it just freeze because it can't put the variable all in the pipe at once?</p></li>\n</ol>\n"}, {"tags": ["perl", "pipe"], "comments": [{"owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 0, "creation_date": 1517445829, "post_id": 48553585, "comment_id": 84103805, "body": "Are you married to using a pipe? A file has unlimited capacity (up to your disk space) and a socket generally has larger capacity than a pipe."}], "answers": [{"comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1519936296, "post_id": 48558093, "comment_id": 85121136, "body": "A (cleaned up) thread of comments that triggered a <a href=\"https://stackoverflow.com/q/48569304/4653379\">follow up question</a> is reflected in the answer that has been greatly expanded and edited in the meanwhile."}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": true, "score": 2, "last_activity_date": 1519464362, "last_edit_date": 1519464362, "creation_date": 1517472880, "answer_id": 48558093, "question_id": 48553585, "link": "https://stackoverflow.com/questions/48553585/non-blocking-read-of-a-pipe-while-doing-other-things/48558093#48558093", "title": "non-blocking read of a pipe while doing other things", "body": "<p>The first issue here is that of the non-blocking operation. Other questions are addressed below.</p>\n\n<p>As you quote, with <a href=\"https://perldoc.perl.org/functions/select.html\" rel=\"nofollow noreferrer\">select</a> (or <a href=\"http://perldoc.perl.org/IO/Select.html\" rel=\"nofollow noreferrer\">IO::Select</a>) one should not use buffered I/O. Specially here where you want non-blocking and non-buffered operation. The code below gets terribly confused with <code>&lt;&gt;</code>.</p>\n\n<p>Note that \"buffering\" is a multi-layered business. Some of it can be turned on/off by a simple program instruction, some is far more difficult to mess with, and some is a matter of implementation. It is in the language, libraries, OS, hardware. The least we can do is to use recommended tools.</p>\n\n<p>Thus read from the <code>select</code>-manipulated handle using <a href=\"https://perldoc.perl.org/functions/sysread.html\" rel=\"nofollow noreferrer\">sysread</a>, not <a href=\"https://perldoc.perl.org/functions/readline.html\" rel=\"nofollow noreferrer\">readline</a> (what <a href=\"https://perldoc.perl.org/perlop.html#I%2fO-Operators\" rel=\"nofollow noreferrer\">&lt;></a> uses).  It returns <code>0</code> on <code>EOF</code> so one can test when the writing end has been closed (when <code>EOF</code> gets sent).</p>\n\n<pre><code>use warnings;\nuse strict;\nuse feature 'say';\n\nuse Time::HiRes qw(sleep);\nuse IO::Select; \n\nmy $sel = IO::Select-&gt;new;\n\npipe my $rd, my $wr;\n$sel-&gt;add($rd); \n\nmy $pid = fork // die \"Can't fork: $!\";  #/\n\nif ($pid == 0) {\n    close $rd; \n    $wr-&gt;autoflush;\n    for (1..4) {\n        sleep 1;\n        say \"\\tsending data\";\n        say $wr 'a' x (120*1024);\n    }\n    say \"\\tClosing writer and exiting\";\n    close $wr;\n    exit; \n}   \nclose $wr;    \nsay \"Forked and will read from $pid\";\n\nmy @recd;\nREAD: while (1) {\n    if (my @ready = $sel-&gt;can_read(0)) {  # beware of signal handlers\n        foreach my $handle (@ready) {\n            my $buff;\n            my $rv = sysread $handle, $buff, 64*1024;\n            if (not $rv) {  # error (undef) or closed writer (==0)\n                if (not defined $rv) {\n                    warn \"Error reading: $!\";\n                }\n                last READ;  # single pipe (see text)\n            }\n            say \"Got \", length $buff, \" characters\";\n            push @recd, length $buff; \n        }\n    }\n    else {\n        say \"Doing else ... \";\n        sleep 0.5; \n    }\n}   \nclose $rd;\nmy $gone = waitpid $pid, 0;\nsay \"Reaped pid $gone\";\nsay \"Have data: @recd\"\n</code></pre>\n\n<p>This assumes that the parent doesn't do a lot of processing in <code>else</code> or that would make the pipe checks wait then. In such a case you need to fork yet another process for those long jobs.</p>\n\n<p>Some comments</p>\n\n<ul>\n<li><p>I ask for a lot of data from <code>sysread</code>  as that is the most efficient way to use it and as you expect big writes from the child. You can see from the prints (a sample is below) how that works out.</p></li>\n<li><p>The undefined return of <code>sysread</code> indicates an error. The pipe may still be readable and if we return to <code>sysread</code> via <code>while</code> we may end up in an infinite loop of errors, so we exit the loop. The read error might not happen the next time but counting on that would risk an infinite loop.</p></li>\n<li><p>On exceptional return (writer closed or error) the code exits the loop, as no more need be done here. But with more complex IPC (more pipes, all this in another loop taking new connections, signal handlers, etc) we'd need to remove the handle from the list of those to watch for and the handling of read error would differ from that of the closed writer.</p></li>\n<li><p>In this simple example the error handling is simple (really just <code>last READ if not $rv;</code>). But in general a read error is a different matter from the orderly closed writer and they are handled separately. (For one, on a read error we'd want to retry a fixed number of times.)</p></li>\n<li><p>All data can be collected into <code>$buff</code> by using <code>OFFSET</code>, the fourth argument for <code>sysread</code>, of <code>length $buff</code>. Then every write starts at the end of <code>$buff</code>, which gets extended.</p>\n\n<pre><code>my $rv = sysread $handle, $buff, 64*1024, length $buff;\n</code></pre>\n\n<p>In this case there is no need for <code>@recd</code>. This is a common way to collect data.</p></li>\n<li><p>Signals are a part and parcel of any IPC. A limited discussion follows</p></li>\n</ul>\n\n<p><a href=\"https://perldoc.perl.org/perlipc.html#Deferred-Signals-(Safe-Signals)\" rel=\"nofollow noreferrer\">\"Safe signals\"</a> generally protect I/O from being interrupted by a signal. But <a href=\"https://perldoc.perl.org/functions/select.html\" rel=\"nofollow noreferrer\">select</a> may be affected</p>\n\n<blockquote>\n  <p>Note that whether <code>select</code> gets restarted after signals (say, SIGALRM) is implementation-dependent.  </p>\n</blockquote>\n\n<p>and thus handles that use it may not be safe either. In my experience <code>can_read</code> can return (false) when a <code>SIGCHLD</code> is handled by the program. This simple example is safe, for a few reasons: </p>\n\n<ul>\n<li><p>If <code>can_read</code> returns empty as a signal is handled the <code>while</code> brings it right back to that handle, which is still readable. </p></li>\n<li><p>A signal can affect <code>select</code> if it comes while the program is blocked at <code>select</code>. But you have non-blocking operation and the chance that the signal comes in right while <code>select</code> is checking handles is minuscule</p></li>\n<li><p>Finally, I don't know whether a <code>SIGCHLD</code> for a process that wrote to a pipe can affect <code>select</code> on the other end of that very pipe, but even if it can odds are astronomically small.   </p></li>\n</ul>\n\n<p>With more complex code (if <code>can_read</code> isn't directly in a loop like above) consider whether its faulty return (due to a signal) can affect the program flow. If that is a concern add code to check false returns from <code>can_read</code>; if caused by a signal the <a href=\"https://perldoc.perl.org/perlvar.html#$!\" rel=\"nofollow noreferrer\"><code>$!</code></a> is <code>EINTR</code>. This can be checked by using <a href=\"https://perldoc.perl.org/perlvar.html#%!\" rel=\"nofollow noreferrer\">%!</a>, which when used gets <a href=\"http://perldoc.perl.org/Errno.html\" rel=\"nofollow noreferrer\">Errno</a> loaded. So you can check whether <code>can_read</code> returned because of an interrupt by <code>if $!{EINTR}</code>.  For instance</p>\n\n<pre><code>if (my @ready = $sel-&gt;can_read(0)) {\n   ...\n}\nelsif ($!{EINTR}) { \n   # interrupted by signal, transfer control as suitable\n   next READ;\n}\n</code></pre>\n\n<p>Again, the program above returns to <code>while</code> promptly anyway (by assumption that the <code>else</code> block isn't meant for long-running jobs, for which there should be another process).</p>\n\n<p>A different matter is <code>SIGPIPE</code> signal, which by default kills the program. Since you are dealing with pipes it is only prudent to handle it, by\ninstalling a <a href=\"https://perldoc.perl.org/perlvar.html#%SIG\" rel=\"nofollow noreferrer\">signal handler</a></p>\n\n<pre><code>    $SIG{PIPE} = \\&amp;handle_sigpipe;\n</code></pre>\n\n<p>where sub <code>handle_sigpipe</code> can do what the program needs. For example, set global variables used to check the validity of the pipe, so once it raised an error we don't try to read/write with it again. The very fact that we have assigned to <code>$SIG{PIPE}</code> protects from that signal.  However, unless it's <code>'IGNORE'</code>, the <code>can_read</code> need be restarted as discussed above.  See the <a href=\"https://stackoverflow.com/a/48626137/4653379\">follow-up post</a>.</p>\n\n<p>Comments on questions</p>\n\n<ul>\n<li><p>Your code fragment won't be able to \"<em>move on</em>\" as intended since it uses <code>&lt;&gt;</code> to read. (Besides, you got in a <code>while</code> over <code>&lt;&gt;</code> there, which does block. So once it reads what is available it would sit and wait until more comes. You want a single read instead, but again not with <code>&lt;&gt;</code>.)</p></li>\n<li><p>Every filenahdle is an <code>IO::Handle</code> (or <code>IO::File</code>) object, or at least gets blessed into those classes on demand. See (second part of) <a href=\"https://stackoverflow.com/a/48471450/4653379\">this post</a>.</p></li>\n<li><p>The warning on not mixing buffered I/O with <code>select</code> relates to filehandles that use it. While it is crucial for the pipe, writing to that other service is unrelated.</p></li>\n<li><p>Code comment: there is no need to condition all work on child's exit. You need to watch for when the child closes the pipe.  Reap the process (collect the signal) later.</p></li>\n</ul>\n\n<p>Another way to handle similar needs is to do each part of work in its own <code>fork</code>. So to do the 'keep-alive' with your <code>HTTP</code> in a yet separate process. Then all child processes can be managed more simply by the parent, by communicating using <a href=\"https://perldoc.perl.org/functions/socketpair.html\" rel=\"nofollow noreferrer\">socketpair</a>.</p>\n\n<p>See <a href=\"https://stackoverflow.com/q/36315124/4653379\">this post</a> for comparison of <code>read</code> and <code>sysread</code> that includes many relevant points.</p>\n\n<hr>\n\n<p>The code above prints</p>\n\n<pre>\nForked and will read from 4171\nDoing else ... \nDoing else ... \nDoing else ... \n        sending data\nGot 65536 characters\nGot 57345 characters\nDoing else ... \nDoing else ... \n        sending data\nGot 65536 characters\nGot 57345 characters\nDoing else ... \nDoing else ... \n        sending data\nDoing else ... \nGot 65536 characters\nGot 40960 characters\nGot 16385 characters\nDoing else ... \nDoing else ... \n        sending data\nGot 65536 characters\nGot 24576 characters\n        Closing writer and exiting\nGot 32769 characters\nDoing else ... \nReaped pid 4171\nHave data: 65536 57345 65536 57345 65536 40960 16385 65536 24576 32769\n</pre>\n"}], "owner": {"reputation": 5937, "user_id": 783314, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/b3d5692064779f501f7c2a639dc0076c?s=128&d=identicon&r=PG", "display_name": "Stephen", "link": "https://stackoverflow.com/users/783314/stephen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 729, "favorite_count": 0, "accepted_answer_id": 48558093, "answer_count": 1, "score": 1, "last_activity_date": 1519464362, "creation_date": 1517444661, "last_edit_date": 1517513723, "question_id": 48553585, "link": "https://stackoverflow.com/questions/48553585/non-blocking-read-of-a-pipe-while-doing-other-things", "title": "non-blocking read of a pipe while doing other things", "body": "<p>As a follow-up to <a href=\"https://stackoverflow.com/questions/48531186/process-hangs-when-writing-large-data-to-pipe\">process hangs when writing large data to pipe</a>, I need to implement a way for a parent process to read from a pipe being written to by its child process, while doing other things until the child has completed.</p>\n\n<p>More specifically, the parent is returning a response to a client over HTTP. The response consists of the string <code>&lt;PING/&gt;</code>, followed by the string <code>&lt;DONE/&gt;</code> when it is done pinging, followed by the actual content. This is being done to keep the connection alive until the actual response is ready.</p>\n\n<h3>My questions:</h3>\n\n<p>1) I'm mostly just looking for general feedback. Do you see any issues with this code? </p>\n\n<p>2) Will I achieve my goal of a non-blocking read? In particular once all of the currently available data has been read (but the writer is still writing more) will my code be able to move on from <code>while ( my $line = &lt;$pipe_reader&gt;){</code>? And will it work properly after the pipe has been closed but before the child terminates?</p>\n\n<p>3) The documentation for <code>IO::Select</code> says that <code>add()</code> takes an <code>IO::Handle</code> object. I keep seeing <code>IO::Handle</code> everywhere, but I don't know how to determine if a pipe created in this way counts as an <code>IO::Handle</code> object. <code>perl -e \"pipe(my $r, my $w); print(ref($r))\"</code> just gives me GLOB...</p>\n\n<p>4) The Perl documentation for <code>select</code> (on which I assume <code>IO::Select</code> is based) warns</p>\n\n<blockquote>\n  <p>WARNING: One should not attempt to mix buffered I/O (like <code>read</code> or <code>readline</code>) with <code>select</code>, except as permitted by POSIX, and even then only on POSIX systems. You have to use <code>sysread</code> instead.</p>\n</blockquote>\n\n<p>Does this mean it is a problem to have <code>$writer-&gt;write('&lt;PING/&gt;');</code> in the same loop?</p>\n\n<h3>Perl code</h3>\n\n<pre><code>pipe(my $pipe_reader, my $pipe_writer);\n$pipe_writer-&gt;autoflush(1);\n\nmy $pid = fork;\n\nif ( $pid ) {\n\n    # parent\n    close $pipe_writer;\n\n    $s = IO::Select-&gt;new();\n    $s-&gt;add($pipe_reader);\n\n    my $response  = \"\";\n    my $startTime = time;\n    my $interval  = 25;\n    my $pings     = 0;\n\n    while ( waitpid(-1, WNOHANG) &lt;= 0 ) {\n\n        if ( time &gt; $startTime + ($interval * $pings) ) {\n            $pings++;\n            $writer-&gt;write('&lt;PING/&gt;');\n        }\n\n        if ( $s-&gt;can_read(0) ) {\n\n            while ( my $line = &lt;$pipe_reader&gt; ) {\n                $response .= $line;\n            }\n        }\n    };\n\n    $writer-&gt;write('&lt;DONE/&gt;');\n    $writer-&gt;write($response);\n    close $pipe_reader;\n    $writer-&gt;close();\n\nelse {\n\n    #child\n    die \"cannot fork: $!\" unless defined $pid;\n    close $pipe_reader;\n\n    #...do writes here...\n\n    close $pipe_writer;\n}\n</code></pre>\n\n<p>Regarding <code>$writer</code>, it may be irrelevant to this question, but the overall solution follows the pattern in the\n<a href=\"https://metacpan.org/pod/PSGI#Delayed-Response-and-Streaming-Body\" rel=\"nofollow noreferrer\">second code sample here</a></p>\n\n<p>Since we aren't ready with the entire HTTP body yet, we return a callback to PSGI which gives us a <code>$responder</code> object. We give it just the HTTP status and content type, then it gives us a <code>$writer</code> to write the body later.</p>\n\n<p>We use <code>$writer</code> in the above code to write our ping values and the eventual body. All of the above code is in the callback returned to PSGI but I omitted that for brevity.</p>\n"}]