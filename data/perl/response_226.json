[{"tags": ["perl", "awk"], "answers": [{"comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1557366342, "post_id": 56050312, "comment_id": 98743388, "body": "The cleanest solution I&#39;d say -- why not do their actual &quot;<i>desired output</i>&quot;, <code>($3&#47;$2-1)*100</code>...?"}, {"owner": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1557409622, "post_id": 56050312, "comment_id": 98762008, "body": "@zdim I didn&#39;t notice a difference, I was just focused on fixing their awk code to do what they were trying to do with it. Fixed now, thanks."}], "tags": [], "owner": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "is_accepted": false, "score": 2, "last_activity_date": 1557409595, "last_edit_date": 1557409595, "creation_date": 1557358372, "answer_id": 56050312, "question_id": 56050285, "link": "https://stackoverflow.com/questions/56050285/perl-or-awk-zero-proof-division-with-perl-or-awk/56050312#56050312", "title": "perl or awk: zero proof division with perl or awk", "body": "<p>You're not telling awk that the fields are separated by commas so it's assuming the default, spaces, and so $2 is never greater than zero because it's null as there's only 1 space-separated field per line. Change it to:</p>\n\n<pre><code>$ awk 'BEGIN{FS=OFS=\",\"} $2&gt;0{$4=sprintf(\"%d(%.2f%)\", $3, ($3/$2)*100)}1' file\nBI,1266,908,908(71.72%)\nBIL,494,414,414(83.81%)\nBKC,597,380,380(63.65%)\nBOOM,2638,654,654(24.79%)\nBRER,1453,1525,1525(104.96%)\nBRIG,1080,763,763(70.65%)\nDCLE,0,775\n</code></pre>\n\n<p>and then tweak it for your desired output:</p>\n\n<pre><code>$ awk 'BEGIN{FS=OFS=\",\"} {$4=($2 &amp;&amp; $3 ? sprintf(\"%.2f%\", (($3/$2)-1)*100) : \"N/A\")} 1' file\nBI,1266,908,-28.28%\nBIL,494,414,-16.19%\nBKC,597,380,-36.35%\nBOOM,2638,654,-75.21%\nBRER,1453,1525,4.96%\nBRIG,1080,763,-29.35%\nDCLE,0,775,N/A\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "is_accepted": true, "score": 3, "last_activity_date": 1557359101, "last_edit_date": 1557359101, "creation_date": 1557358660, "answer_id": 56050343, "question_id": 56050285, "link": "https://stackoverflow.com/questions/56050285/perl-or-awk-zero-proof-division-with-perl-or-awk/56050343#56050343", "title": "perl or awk: zero proof division with perl or awk", "body": "<pre><code>$ awk -F, '$2 == 0 || $3 == 0 { printf(\"%s,-\\n\", $0); next }\n           { printf(\"%s,%.2f%%\\n\", $0, 100 * ($3 / $2) - 100) }' input.csv\nBI,1266,908,-28.28%\nBIL,494,414,-16.19%\nBKC,597,380,-36.35%\nBOOM,2638,654,-75.21%\nBRER,1453,1525,4.96%\nBRIG,1080,763,-29.35%\nDCLE,0,775,-\n</code></pre>\n\n<p>How it works: if the second or third columns are equal to 0, add a <code>-</code> field to the line. Otherwise, calculate the percentage difference and add that.</p>\n"}, {"tags": [], "owner": {"reputation": 2784, "user_id": 8413636, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d8c46d1ea221e93d32a1b3d2ee354cae?s=128&d=identicon&r=PG&f=1", "display_name": "zzxyz", "link": "https://stackoverflow.com/users/8413636/zzxyz"}, "is_accepted": false, "score": 3, "last_activity_date": 1557360739, "creation_date": 1557360739, "answer_id": 56050537, "question_id": 56050285, "link": "https://stackoverflow.com/questions/56050285/perl-or-awk-zero-proof-division-with-perl-or-awk/56050537#56050537", "title": "perl or awk: zero proof division with perl or awk", "body": "<p>Your perl's main issue was confusing awk's 1-based column indexes with perl's 0-based column indexes.  </p>\n\n<pre><code> perl -F, -ane 'print \"$1,\" if /(.+)/;if ($F[1] &gt; 0 &amp;&amp; $F[2] &gt; 0){printf (\"%.2f%\", ((100*$F[2]/$F[1])-100)) } else {print \"-\"};print \"\\n\"' file\n</code></pre>\n\n<p>The <code>$1</code> here refers to the capture group <code>(.+)</code> which means \"The whole line but the linefeed\".  The rest is probably self-explanatory if you understand the awk.</p>\n"}], "owner": {"reputation": 3409, "user_id": 424747, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/c186b6b71d44c1c7f36878c9e60f71e0?s=128&d=identicon&r=PG", "display_name": "Bubnoff", "link": "https://stackoverflow.com/users/424747/bubnoff"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 78, "favorite_count": 0, "accepted_answer_id": 56050343, "answer_count": 3, "score": 1, "last_activity_date": 1557409595, "creation_date": 1557358106, "last_edit_date": 1557377444, "question_id": 56050285, "link": "https://stackoverflow.com/questions/56050285/perl-or-awk-zero-proof-division-with-perl-or-awk", "title": "perl or awk: zero proof division with perl or awk", "body": "<p>I have to add a field showing the difference in percentage between 2 fields in a file like:</p>\n\n<pre><code>BI,1266,908\nBIL,494,414\nBKC,597,380\nBOOM,2638,654\nBRER,1453,1525\nBRIG,1080,763\nDCLE,0,775\n</code></pre>\n\n<p>The output should be:</p>\n\n<pre><code>BI,1266,908,-28.3%\nBIL,494,414,-16.2%\nBKC,597,380,-36.35%\nBOOM,2638,654,-75.2%\nBRER,1453,1525,5%\nBRIG,1080,763,-29.4%\nDCLE,0,775,-\n</code></pre>\n\n<p>Note the zero in the last row. Either of these fields could be zero. If a zero is present in either field, N/A or - is acceptable.</p>\n\n<p>What I'm trying --</p>\n\n<p>Perl:</p>\n\n<pre><code>perl -F, -ane 'if ($F[2] &gt; 0 || $F[3] &gt; 0){print $F[0],\",\",$F[1],\",\",$F[2],100*($F[2]/$F[3])}' file\n</code></pre>\n\n<p>I get <code>Illegal division by zero at -e line 1, &lt;&gt; line 2.</code> If I change the <code>||</code> to <code>&amp;&amp;</code> it prints nothing.</p>\n\n<p>In awk:</p>\n\n<pre><code>awk '$2&gt;0{$4=sprintf(\"%d(%.2f%)\", $3, ($3/$2)*100)}1' file\n</code></pre>\n\n<p>Just prints the file.</p>\n"}, {"tags": ["regex", "perl", "sed"], "comments": [{"owner": {"reputation": 8984, "user_id": 2485966, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dZj6A.jpg?s=128&g=1", "display_name": "Ruud Helderman", "link": "https://stackoverflow.com/users/2485966/ruud-helderman"}, "edited": false, "score": 1, "creation_date": 1557314990, "post_id": 56039268, "comment_id": 98721554, "body": "It seems you are trying to use lookbehind and lookahead. I don&#39;t think sed supports that. Can you show us your Perl attempt?"}, {"owner": {"reputation": 132964, "user_id": 171318, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ePRKy.jpg?s=128&g=1", "display_name": "hek2mgl", "link": "https://stackoverflow.com/users/171318/hek2mgl"}, "edited": false, "score": 0, "creation_date": 1557315318, "post_id": 56039268, "comment_id": 98721744, "body": "Is every column wrapped in quotes?"}, {"owner": {"reputation": 82895, "user_id": 372239, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/2twLb.jpg?s=128&g=1", "display_name": "Toto", "link": "https://stackoverflow.com/users/372239/toto"}, "edited": false, "score": 0, "creation_date": 1557315338, "post_id": 56039268, "comment_id": 98721756, "body": "What is the expected result?"}, {"owner": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "edited": false, "score": 0, "creation_date": 1557338625, "post_id": 56039268, "comment_id": 98734856, "body": "<code>The regex is valid</code> - no, it&#39;s not because there is no such thing as &quot;a valid regex&quot;. Every tool supports different regexp variants (e.g. BRE, ERE, PCRE) and has it&#39;s own caveats even within that (e.g. are backreferences supported, which delimiters need to be escaped, can escaped literals become ERE metachars, etc.). Online sites like rexex101, as I assume you used given your claim that &quot;The regex is valid&quot;, are not a way to verify that any given regexp will work in any given tool and certainly not across all tools - only running it in the target tool will tell you if it&#39;s valid or not."}], "answers": [{"comments": [{"owner": {"reputation": 5, "user_id": 10383075, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d852a098268a9615b97bc65fd96b7e3?s=128&d=identicon&r=PG&f=1", "display_name": "Jesse", "link": "https://stackoverflow.com/users/10383075/jesse"}, "edited": false, "score": 0, "creation_date": 1557366621, "post_id": 56039920, "comment_id": 98743437, "body": "Thanks, that worked perfectly. I had to check for newlines, because the group was capturing the last quote of a line, and the first of every line after 1."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "reply_to_user": {"reputation": 5, "user_id": 10383075, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d852a098268a9615b97bc65fd96b7e3?s=128&d=identicon&r=PG&f=1", "display_name": "Jesse", "link": "https://stackoverflow.com/users/10383075/jesse"}, "edited": false, "score": 0, "creation_date": 1557373432, "post_id": 56039920, "comment_id": 98744717, "body": "@Jesse Oops. I believe adding <code>\\n</code> to the second character class fixes that issue. Alternatively, use <code>perl -l</code> to strip newlines before matching and add them back on output."}], "tags": [], "owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "is_accepted": true, "score": 0, "last_activity_date": 1557373383, "last_edit_date": 1557373383, "creation_date": 1557315437, "answer_id": 56039920, "question_id": 56039268, "link": "https://stackoverflow.com/questions/56039268/how-to-locate-a-mismatched-text-delimiter/56039920#56039920", "title": "How to locate a mismatched text delimiter", "body": "<p>I assume you want to turn all occurrences of <code>\"</code> that are not on a field boundary (i.e. either preceded or succeeded by either a tab or the beginning/end of the string) by <code>'</code>.</p>\n\n<p>This can be done using perl and the following substitution:</p>\n\n<pre><code>s/(?&lt;=[^\\t])\"(?=[^\\t\\n])/'/g;\n</code></pre>\n\n<p>(With sed this is not directly possible as it does not support look-behind / look-ahead assertions.)</p>\n\n<p>To use this code on the command line, it needs to be escaped for whatever shell you're using. Assuming bash or a similar sh-like shell:</p>\n\n<pre><code>perl -pe 's/(?&lt;=[^\\t])\"(?=[^\\t\\n])/'\\''/g' test.txt\n</code></pre>\n\n<p>Here I use <code>'...'</code> to quote most of the code. To get a single <code>'</code> into the quoted string, I leave the quoted area <code>...'</code>, add an escaped single quote <code>\\'</code>, and switch back into a single-quoted string <code>'...</code>. That's why a literal <code>'</code> turns into <code>'\\''</code> on the command line.</p>\n"}], "owner": {"reputation": 5, "user_id": 10383075, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d852a098268a9615b97bc65fd96b7e3?s=128&d=identicon&r=PG&f=1", "display_name": "Jesse", "link": "https://stackoverflow.com/users/10383075/jesse"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 78, "favorite_count": 0, "accepted_answer_id": 56039920, "answer_count": 1, "score": 0, "last_activity_date": 1557373383, "creation_date": 1557313363, "last_edit_date": 1557326201, "question_id": 56039268, "link": "https://stackoverflow.com/questions/56039268/how-to-locate-a-mismatched-text-delimiter", "title": "How to locate a mismatched text delimiter", "body": "<p>I'm trying to remove double quotes that appear within a string coming from a dB because it's causing an stream error in another application. I can't clean up the dB to remove these, so I need to replace the character on the fly.</p>\n\n<p>I've tried using sed, ssed, and perl all without success. This regular expression is locating the problem quotes, but when I plug it into sed to replace them with a single quote my output still contains the double quote.</p>\n\n<pre><code>sed \"s/(\\?&lt;\\!\\t|^)\\\"(\\?\\!\\t|$)/'/g\" test.txt \n</code></pre>\n\n<p>I'm on Mac, if this looks a bit odd.</p>\n\n<p>The regex is valid, but when I test on a tab-delimited file containing this:</p>\n\n<pre><code>\"foo\"   \"rea\"son\"   \"text's\"\n</code></pre>\n\n<p>My output is identical to the above. Any idea what I'm doing wrong?</p>\n\n<p>Thanks</p>\n"}, {"tags": ["r", "perl", "matrix"], "comments": [{"owner": {"reputation": 6069, "user_id": 1618513, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/7f21fabe666713f3825297e6577a396c?s=128&d=identicon&r=PG", "display_name": "Elin", "link": "https://stackoverflow.com/users/1618513/elin"}, "edited": false, "score": 0, "creation_date": 1557312831, "post_id": 56038955, "comment_id": 98720335, "body": "Hi, we request that you not use images of data or results, it makes it much more difficult for people to answer the question since they cannot copy and paste."}, {"owner": {"reputation": 27, "user_id": 11469335, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-0RfuegXh4Oc/AAAAAAAAAAI/AAAAAAABxRc/7HSYCzJn9e0/photo.jpg?sz=128", "display_name": "Marcele Laux", "link": "https://stackoverflow.com/users/11469335/marcele-laux"}, "reply_to_user": {"reputation": 6069, "user_id": 1618513, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/7f21fabe666713f3825297e6577a396c?s=128&d=identicon&r=PG", "display_name": "Elin", "link": "https://stackoverflow.com/users/1618513/elin"}, "edited": false, "score": 0, "creation_date": 1557315375, "post_id": 56038955, "comment_id": 98721772, "body": "Hello, I tryed to copy and paste, but it got unformatted, how should I paste a table?"}, {"owner": {"reputation": 920, "user_id": 7320594, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/408c1f833962ef375a89868d14453bbd?s=128&d=identicon&r=PG&f=1", "display_name": "Koot6133", "link": "https://stackoverflow.com/users/7320594/koot6133"}, "edited": false, "score": 0, "creation_date": 1557315911, "post_id": 56038955, "comment_id": 98722047, "body": "The easiest thing is to share some code which creates similar sample data. There are several options to solve your problem. In Python you could use the Numpy library which is commonly used for data preparation. I think the np.subtract.outer() function should do the trick!"}, {"owner": {"reputation": 27, "user_id": 11469335, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-0RfuegXh4Oc/AAAAAAAAAAI/AAAAAAABxRc/7HSYCzJn9e0/photo.jpg?sz=128", "display_name": "Marcele Laux", "link": "https://stackoverflow.com/users/11469335/marcele-laux"}, "edited": false, "score": 0, "creation_date": 1557316888, "post_id": 56038955, "comment_id": 98722573, "body": "Thank you, I am going to check it all!"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1557317544, "post_id": 56038955, "comment_id": 98722940, "body": "Tip: You should ALWAYS use <code>use strict;</code>"}], "answers": [{"comments": [{"owner": {"reputation": 27, "user_id": 11469335, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-0RfuegXh4Oc/AAAAAAAAAAI/AAAAAAABxRc/7HSYCzJn9e0/photo.jpg?sz=128", "display_name": "Marcele Laux", "link": "https://stackoverflow.com/users/11469335/marcele-laux"}, "edited": false, "score": 0, "creation_date": 1557317131, "post_id": 56039974, "comment_id": 98722705, "body": "Thank you, but it is not working, when I enter the file it seems to start to process it, but it does not finish, seems to enter in some infinite loop, something like this"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 27, "user_id": 11469335, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-0RfuegXh4Oc/AAAAAAAAAAI/AAAAAAABxRc/7HSYCzJn9e0/photo.jpg?sz=128", "display_name": "Marcele Laux", "link": "https://stackoverflow.com/users/11469335/marcele-laux"}, "edited": false, "score": 0, "creation_date": 1557317441, "post_id": 56039974, "comment_id": 98722877, "body": "This version is more conventional in that it expects the file name on the command line. (Alternatively, the data can be fed via its STDIN.)"}, {"owner": {"reputation": 27, "user_id": 11469335, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-0RfuegXh4Oc/AAAAAAAAAAI/AAAAAAABxRc/7HSYCzJn9e0/photo.jpg?sz=128", "display_name": "Marcele Laux", "link": "https://stackoverflow.com/users/11469335/marcele-laux"}, "edited": false, "score": 0, "creation_date": 1557319036, "post_id": 56039974, "comment_id": 98723798, "body": "Sorry, could you please explain to me what is happening in the for loop? The $# creates an index, right? but what means &quot;0..$#&quot;? Because its seems to be calling the same for $y and $x."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 27, "user_id": 11469335, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-0RfuegXh4Oc/AAAAAAAAAAI/AAAAAAABxRc/7HSYCzJn9e0/photo.jpg?sz=128", "display_name": "Marcele Laux", "link": "https://stackoverflow.com/users/11469335/marcele-laux"}, "edited": false, "score": 0, "creation_date": 1557319321, "post_id": 56039974, "comment_id": 98723984, "body": "<code>$#cities</code> is the highest index of the array <code>@cities</code>. Actually, we don&#39;t need the indexes into the arrays (just the elements themselves), so I&#39;ve simplified the answer"}, {"owner": {"reputation": 27, "user_id": 11469335, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-0RfuegXh4Oc/AAAAAAAAAAI/AAAAAAABxRc/7HSYCzJn9e0/photo.jpg?sz=128", "display_name": "Marcele Laux", "link": "https://stackoverflow.com/users/11469335/marcele-laux"}, "edited": false, "score": 0, "creation_date": 1557319814, "post_id": 56039974, "comment_id": 98724300, "body": "THank you very much, now it worked, there was a little error here: &quot;my ($city, $temp) = split /t/;&quot; it should be &quot;my ($city, $temp) = split /\\t/;&quot;, now it&#39;s fine \\o/"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 27, "user_id": 11469335, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-0RfuegXh4Oc/AAAAAAAAAAI/AAAAAAABxRc/7HSYCzJn9e0/photo.jpg?sz=128", "display_name": "Marcele Laux", "link": "https://stackoverflow.com/users/11469335/marcele-laux"}, "edited": false, "score": 0, "creation_date": 1557319888, "post_id": 56039974, "comment_id": 98724340, "body": "Woops ! Fixed ."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 1, "last_activity_date": 1557319871, "last_edit_date": 1557319871, "creation_date": 1557315591, "answer_id": 56039974, "question_id": 56038955, "link": "https://stackoverflow.com/questions/56038955/creating-a-symmetric-matrix-populated-with-cross-subtraction/56039974#56039974", "title": "Creating a symmetric matrix populated with cross subtraction", "body": "<p>You're reading the file to its end, then trying to read on from there. The second loop terminates without a single pass. The solution here is to entirely eliminate the second loop because there's no point in creating two identical hashes.</p>\n\n<p>The second problem is that you only output one row of data. You'll need to have nested loops (a loop for columns inside of a loop for rows).</p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\nuse feature qw( say );\n\nmy @cities;\nmy %temps;\nwhile (&lt;&gt;) {\n   chomp;\n   my ($city, $temp) = split /\\t/;\n   push @cities, $city;\n   $temps{$city} = $temp;\n}\n\nsay join \"\\t\", \"\", @cities;\n\nfor my $city_y (@cities) {\n   my @diffs;\n   for my $city_x (@cities) {\n      push @diffs, $temps{$city_x} - $temps{$city_y};\n   }\n\n   say join \"\\t\", $city_y, @diffs;\n}\n</code></pre>\n\n<p>If you're feeling a bit adventurous, a <code>map</code> would work better for the inner loop.</p>\n\n<pre><code>for my $city_y (@cities) {\n   say join \"\\t\", $city_y, map { $temps{$_} - $temps{$city_y} } @cities;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 11312882, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-JNS4AGJX1ZI/AAAAAAAAAAI/AAAAAAAAAk8/P-ugugqm-G0/photo.jpg?sz=128", "display_name": "Th&#233;o GUILLERMINET", "link": "https://stackoverflow.com/users/11312882/th%c3%a9o-guillerminet"}, "is_accepted": false, "score": 1, "last_activity_date": 1557317644, "creation_date": 1557317644, "answer_id": 56040566, "question_id": 56038955, "link": "https://stackoverflow.com/questions/56038955/creating-a-symmetric-matrix-populated-with-cross-subtraction/56040566#56040566", "title": "Creating a symmetric matrix populated with cross subtraction", "body": "<p>Here is a solution in R. Maybe not the cleanest but it's one :</p>\n\n<pre><code>library(dplyr)\nlibrary(magrittr)\n\ndf &lt;- data.frame(city = c(\"Oslo\",\"Paris\",\"Londres\",\"Lima\",\"Lyon\",\"Memphis\",\"Ouagadougou\"),\n                 pop = runif(7, min = 5000, max = 10000))\n\nresult &lt;- data.frame(matrix(nrow = nrow(df), ncol = nrow(df)))\nnames(result) &lt;- df$city\nrow.names(result) &lt;- df$city\n\nfor(city in df$city) {\n  tmp &lt;- df$pop - df$pop[df$city == city]\n  result[,as.character(city)] &lt;- tmp\n}\n</code></pre>\n\n<p>The next three lines allows to transform the row names as a classic column :</p>\n\n<pre><code>result$city &lt;- row.names(result)\nrow.names(result) &lt;- 1:nrow(result)\nresult2 &lt;- result %&gt;% dplyr::select(city, everything())\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1557319475, "post_id": 56040705, "comment_id": 98724075, "body": "Virtually the same as the earlier answer, except it clobbers the order of the output."}, {"owner": {"reputation": 961, "user_id": 341930, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d2819a0020e657078218ed37f96b97b7?s=128&d=identicon&r=PG", "display_name": "TFBW", "link": "https://stackoverflow.com/users/341930/tfbw"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1557320574, "post_id": 56040705, "comment_id": 98724775, "body": "@ikegami, your answer is fine too. You are correct that I have chosen not to preserve the order of the input. Your solution works better if that is what&#39;s wanted. The question did not specify the need to preserve order, and sorted output is more readable."}], "tags": [], "owner": {"reputation": 961, "user_id": 341930, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d2819a0020e657078218ed37f96b97b7?s=128&d=identicon&r=PG", "display_name": "TFBW", "link": "https://stackoverflow.com/users/341930/tfbw"}, "is_accepted": true, "score": 1, "last_activity_date": 1557318107, "creation_date": 1557318107, "answer_id": 56040705, "question_id": 56038955, "link": "https://stackoverflow.com/questions/56038955/creating-a-symmetric-matrix-populated-with-cross-subtraction/56040705#56040705", "title": "Creating a symmetric matrix populated with cross subtraction", "body": "<p>Here's how I would do it in Perl. I hope you can learn by example. There are a few classic Perl-isms in this, which make it such a convenient language for this sort of thing.</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\n\n# Read temperature data from @ARGV files in \"city&lt;tab&gt;temperature\"\n# format into a hash of city =&gt; temperature.\nmy %temp;\nwhile (&lt;&gt;) {\n    /^(.+)\\t(-?\\d+)\\s*$/ # captures $1=city, $2=temp; enforces format\n        or die \"Bad data at line $.: $_\";\n    $temp{$1} = $2;\n}\n\n# Sort city names for rows and columns.\nmy @city = sort keys %temp;\n\n# A little convenience function for printing.\nsub tabulate { print join(\"\\t\", @_), \"\\n\" }\n\n# Print column header row.\ntabulate('', @city);\n\n# Print table body.\nfor my $row (@city) {\n    tabulate($row, map { $temp{$_} - $temp{$row} } @city);\n}\n\nexit(0);\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 27, "user_id": 11469335, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-0RfuegXh4Oc/AAAAAAAAAAI/AAAAAAABxRc/7HSYCzJn9e0/photo.jpg?sz=128", "display_name": "Marcele Laux", "link": "https://stackoverflow.com/users/11469335/marcele-laux"}, "edited": false, "score": 0, "creation_date": 1557319400, "post_id": 56040785, "comment_id": 98724033, "body": "That&#39;s nice! Thank you very much!"}], "tags": [], "owner": {"reputation": 208024, "user_id": 516548, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8d6b7cb1d943bc7a2f00c390be3fe97?s=128&d=identicon&r=PG", "display_name": "G. Grothendieck", "link": "https://stackoverflow.com/users/516548/g-grothendieck"}, "is_accepted": false, "score": 0, "last_activity_date": 1557318456, "creation_date": 1557318456, "answer_id": 56040785, "question_id": 56038955, "link": "https://stackoverflow.com/questions/56038955/creating-a-symmetric-matrix-populated-with-cross-subtraction/56040785#56040785", "title": "Creating a symmetric matrix populated with cross subtraction", "body": "<p>In R, read in the data (shown reproducibly in the Note at the end), create a numeric country vector from that whose names are the country names and use <code>outer</code> to create the desired matrix. </p>\n\n<pre><code>country &lt;- setNames(DF[[2]], DF[[1]])\n-outer(country, country, \"-\")\n</code></pre>\n\n<p>giving:</p>\n\n<pre><code>         Oslo Montreal Berlin London\nOslo        0       -1      2      2\nMontreal    1        0      3      3\nBerlin     -2       -3      0      0\nLondon     -2       -3      0      0\n</code></pre>\n\n<h2>Note</h2>\n\n<pre><code>Lines &lt;- \"Oslo      5\nMontreal  4\nBerlin    7\nLondon    7\"\n\n# DF &lt;- read.table(\"myfile\")\nDF &lt;- read.table(text = Lines, as.is = TRUE, strip.white = TRUE)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 6069, "user_id": 1618513, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/7f21fabe666713f3825297e6577a396c?s=128&d=identicon&r=PG", "display_name": "Elin", "link": "https://stackoverflow.com/users/1618513/elin"}, "edited": false, "score": 0, "creation_date": 1557320557, "post_id": 56041442, "comment_id": 98724759, "body": "I&#39;m thinking about the sign issue and will add when I know. Or someone else with comment."}], "tags": [], "owner": {"reputation": 6069, "user_id": 1618513, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/7f21fabe666713f3825297e6577a396c?s=128&d=identicon&r=PG", "display_name": "Elin", "link": "https://stackoverflow.com/users/1618513/elin"}, "is_accepted": false, "score": 0, "last_activity_date": 1557320502, "creation_date": 1557320502, "answer_id": 56041442, "question_id": 56038955, "link": "https://stackoverflow.com/questions/56038955/creating-a-symmetric-matrix-populated-with-cross-subtraction/56041442#56041442", "title": "Creating a symmetric matrix populated with cross subtraction", "body": "<p>This is not going to give you the signs you want, but the <code>dist()</code> function in r will get you started. </p>\n\n<pre><code>x &lt;- c(5,4,7,7)\nnames &lt;- c(\"Oslo\", \"Montreal\", \"Berlin\", \"London\")\nnames(x) &lt;- names\ndist(x, upper=TRUE, diag = TRUE)\n\n</code></pre>\n\n<pre><code>         Oslo Montreal Berlin London\nOslo        0        1      2      2\nMontreal    1        0      3      3\nBerlin      2        3      0      0\nLondon      2        3      0      0\n</code></pre>\n\n<p>The second answer here is also in an answer below <a href=\"https://stackoverflow.com/questions/14961747/signed-distance-matrix-in-r\">Signed distance matrix in R</a></p>\n"}], "owner": {"reputation": 27, "user_id": 11469335, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-0RfuegXh4Oc/AAAAAAAAAAI/AAAAAAABxRc/7HSYCzJn9e0/photo.jpg?sz=128", "display_name": "Marcele Laux", "link": "https://stackoverflow.com/users/11469335/marcele-laux"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 65, "favorite_count": 0, "accepted_answer_id": 56040705, "answer_count": 5, "score": 0, "last_activity_date": 1557320502, "creation_date": 1557312451, "last_edit_date": 1557315939, "question_id": 56038955, "link": "https://stackoverflow.com/questions/56038955/creating-a-symmetric-matrix-populated-with-cross-subtraction", "title": "Creating a symmetric matrix populated with cross subtraction", "body": "<p>I have the following tab-delimited file:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>Oslo      5\nMontreal  4\nBerlin    7\nLondon    7\n...\n</code></pre>\n\n<p>From that data, I am trying to construct a symmetric table populated with the subtraction among all x all, generating a table like the following:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>          Oslo      Montreal  Berlin    London\n          --------- --------- --------- ---------\nOslo              0        -1         2         2\nMontreal          1         0         3         3\nBerlin           -2        -3         0         0\nLondon           -2        -3         0         0\n</code></pre>\n\n<p>The output should be a tab-delimited file.</p>\n\n<p>I have been trying to do this with R and perl, which I have a basic experience, but for both I could not.\nIn Perl I have tryed using hash to do the subtraction, but again I have nothing.\nI presume that Python should have a good solution for this, but I never tryed to write a python script, I am just starting.\nI looked for it in google using several different keywords combinations and the unique similar case which I found was this, but in another language:\n<a href=\"https://stackoverflow.com/questions/30138339/creating-a-symmetric-matrix\">Creating a symmetric matrix</a></p>\n\n<p>Could you please help me? It will be much appreciated! </p>\n\n<p>PS: Since maybe my question is too shallow, you could at least advice me what languages (R, Perl or Python), functions, packages or even some more appropriate keywords to me to keep try to solve myself.</p>\n\n<p>I tryed this to get the all x all subtraction, but definitely I am lost here:</p>\n\n<pre><code>#!/usr/bin/perl\nuse diagnostics;\nuse warnings;\n\nprint \"file:\\t\";\n$arq1 = &lt;STDIN&gt;;\nopen (MYFILE, $arq1);\nmy %hash;\nwhile (my $line=&lt;MYFILE&gt;) {\n    chomp($line);\n    (my $city,my $value) = split /\\t/, $line;\n    $hash{$city} = $value;\n}\n\nmy %hash2;\nwhile (my $line=&lt;MYFILE&gt;) {\n    chomp($line);\n    (my $city,my $value) = split /\\t/, $line;\n    $hash2{$city} = $value;\n}\n\nmy @diff;\nforeach my $key (keys %hash) {\n    @diff = $hash{$key} - $hash2{$key};\n}\n\nprint \"difference @diff\\n\";\n</code></pre>\n"}, {"tags": ["perl", "code-coverage", "cpan"], "comments": [{"owner": {"reputation": 642, "user_id": 5467494, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/99Y3d.jpg?s=128&g=1", "display_name": "Andrea T.", "link": "https://stackoverflow.com/users/5467494/andrea-t"}, "reply_to_user": {"reputation": 45481, "user_id": 197758, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/628da6ba2a6c70e35c009b7e3c3a430a?s=128&d=identicon&r=PG", "display_name": "toolic", "link": "https://stackoverflow.com/users/197758/toolic"}, "edited": false, "score": 0, "creation_date": 1557663328, "post_id": 56026357, "comment_id": 98833186, "body": "Finally comment: improved understanding of test coverage led me catch a bug on a less used method that \u201cused to work before\u201d \ud83d\ude07"}], "answers": [{"comments": [{"owner": {"reputation": 642, "user_id": 5467494, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/99Y3d.jpg?s=128&g=1", "display_name": "Andrea T.", "link": "https://stackoverflow.com/users/5467494/andrea-t"}, "edited": false, "score": 0, "creation_date": 1557263177, "post_id": 56027836, "comment_id": 98704493, "body": "Thanks! I&#39;m so new to this that probably I was even not asking the right question. Now it&#39;s clearer"}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": false, "score": 4, "last_activity_date": 1557296117, "last_edit_date": 1557296117, "creation_date": 1557250564, "answer_id": 56027836, "question_id": 56026357, "link": "https://stackoverflow.com/questions/56026357/coverage-report-for-perl-modules-by-cpancover-com/56027836#56027836", "title": "Coverage report for Perl modules by cpancover.com", "body": "<p>Here is one part of documentation that provides information on the report format. </p>\n\n<p>In coverage testing, as <a href=\"https://metacpan.org/pod/Devel::Cover#UNCOVERABLE-CRITERIA\" rel=\"nofollow noreferrer\"><code>Devel::Cover</code> tells us</a>, there may be places in code which cannot be checked: they are \"uncoverable\"</p>\n\n<blockquote>\n  <p>Sometimes you have code which is uncoverable for some reason. Perhaps it is an else clause that cannot be reached, or a check for an error condition that should never happen. You can tell Devel::Cover that certain criteria are uncoverable and then they are not counted as errors when they are not exercised. In fact, they are counted as errors if they are exercised. [...]</p>\n</blockquote>\n\n<p>In dealing with this one can consider statements, branches, conditions, and subroutines. The example report you provide deals with Conditions, and for that the docs say</p>\n\n<blockquote>\n  <p>Because of the way in which Perl short-circuits boolean operations, there are three ways in which such conditionals can be uncoverable. In the case of <code>$x &amp;&amp; $y</code> for example, the left operator may never be true, the right operator may never be true, and the whole operation may never be false. These conditions may be modelled thus:  </p>\n\n<pre><code># uncoverable branch true\n# uncoverable condition left\n# uncoverable condition false\nif ($x &amp;&amp; !$y) {\n    $x++;  # uncoverable statement\n}\n\n# uncoverable branch true\n# uncoverable condition right\n# uncoverable condition false\nif (!$x &amp;&amp; $y) {\n}\n</code></pre>\n</blockquote>\n\n<p>With this discussion the linked report makes more sense.  </p>\n\n<p>Here is how I'd think of the first line in your link, for example. It is a <code>A &amp;&amp; B</code> kind of condition and it has the following coverage of the possible cases:</p>\n\n<ul>\n<li><p>left side false --- covered in tests (two)</p></li>\n<li><p>left true but right false  --- <em>not</em> covered</p></li>\n<li><p>both left and right true   --- covered (two)</p></li>\n</ul>\n\n<p>Then we click on \"line 214\" (it's a link) and see the overall percentile coverage (66 -- two thirds).  The color is telling and the codes can be seen on <a href=\"http://cpancover.com/blead/latest/coverage.html\" rel=\"nofollow noreferrer\">this page</a></p>\n\n<p>The docs also say that there is a variety of report formats so you may want to dig further.  However, I don't readily see where to look, what I find a little unsettling.</p>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 3, "last_activity_date": 1557258245, "last_edit_date": 1557258245, "creation_date": 1557257517, "answer_id": 56029347, "question_id": 56026357, "link": "https://stackoverflow.com/questions/56026357/coverage-report-for-perl-modules-by-cpancover-com/56029347#56029347", "title": "Coverage report for Perl modules by cpancover.com", "body": "<p><code>l</code> and <code>r</code> refer to the right-hand side and left-hand side of the expression, and the number represents the number of times the associated expression was true.</p>\n\n<p>For example, there is a coverage of <code>0</code> for <code>l &amp;&amp; !r</code> for the following expression:</p>\n\n<pre><code>exists $self-&gt;{'true'} and exists $self-&gt;{'false'} \n</code></pre>\n\n<p>That means that <code>0</code> tests cover the situation where the following is true:</p>\n\n<pre><code>(exists $self-&gt;{'true'}) &amp;&amp; !(exists $self-&gt;{'false'})\n</code></pre>\n\n<hr>\n\n<p>Logical-and and logical-or have two inputs that can take each of two values.</p>\n\n<pre><code>+-----------------+-----------------+\n| Left-hand side  | Right-hand side |\n+-----------------+-----------------+\n| False           | False           |\n| False           | True            |\n| True            | False           |\n| True            | True            |\n+-----------------+-----------------+\n</code></pre>\n\n<p>However, because of short-circuiting, Perl doesn't always evaluate the right-hand side. The cases are really the following:</p>\n\n<pre><code>+-----------------------------------+\n| Logical AND                       |\n+-----------------+-----------------+\n| Left-hand side  | Right-hand side |\n+-----------------+-----------------+\n| False           | -               |\n| True            | False           |\n| True            | True            |\n+-----------------+-----------------+\n\n+-----------------------------------+\n| Logical OR                        |\n+-----------------+-----------------+\n| Left-hand side  | Right-hand side |\n+-----------------+-----------------+\n| False           | False           |\n| False           | True            |\n| True            | -               |\n+-----------------+-----------------+\n</code></pre>\n\n<p>Devel::Cover is reporting which of these sets of inputs have been tested.</p>\n\n<pre><code>+--------------------------------------------------------+\n| Logical AND                                            |\n+--------------------+-----------------+-----------------+\n| Devel::Cover label | Left-hand side  | Right-hand side |\n+--------------------+-----------------+-----------------+\n| !l                 | False           | -               |\n| l &amp;&amp; !r            | True            | False           |\n| l &amp;&amp; r             | True            | True            |\n+--------------------+-----------------+-----------------+\n\n+--------------------------------------------------------+\n| Logical OR                                             |\n+--------------------+-----------------+-----------------+\n| Devel::Cover label | Left-hand side  | Right-hand side |\n+--------------------+-----------------+-----------------+\n| l                  | True            | -               |\n| !l &amp;&amp; r            | False           | True            |\n| !l &amp;&amp; !r           | False           | False           |\n+--------------------+-----------------+-----------------+\n</code></pre>\n\n<p>If we look at the first line of the linked page, we see</p>\n\n<pre><code>!l        2\nl &amp;&amp; !r   0\nl &amp;&amp; r    2\n</code></pre>\n\n<p>for</p>\n\n<pre><code>exists $self-&gt;{'true'} and exists $self-&gt;{'false'} \n</code></pre>\n\n<p>That means</p>\n\n<pre><code>!l       meaning  !(exists $self-&gt;{'true'})                               was true  2  times.\nl &amp;&amp; !r  meaning  (exists $self-&gt;{'true'}) &amp;&amp; !(exists $self-&gt;{'false'})  was true  0  times.\nl &amp;&amp; r   meaning  (exists $self-&gt;{'true'}) &amp;&amp; (exists $self-&gt;{'false'})   was true  2  times.\n</code></pre>\n\n<p>This means that <code>(exists $self-&gt;{'true'}) &amp;&amp; !(exists $self-&gt;{'false'})</code> being true was never tested.</p>\n"}], "owner": {"reputation": 642, "user_id": 5467494, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/99Y3d.jpg?s=128&g=1", "display_name": "Andrea T.", "link": "https://stackoverflow.com/users/5467494/andrea-t"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 97, "favorite_count": 0, "accepted_answer_id": 56029347, "answer_count": 2, "score": 3, "last_activity_date": 1557296117, "creation_date": 1557244386, "last_edit_date": 1557259868, "question_id": 56026357, "link": "https://stackoverflow.com/questions/56026357/coverage-report-for-perl-modules-by-cpancover-com", "title": "Coverage report for Perl modules by cpancover.com", "body": "<p><em>cpancover.com</em> produces reports on the code coverage of Perl modules.</p>\n\n<p>I understand it's just a webserver using Devel::Cover, but I would like to simply understand the meaning of reports like:\n<a href=\"http://cpancover.com/latest/JSON-PP-4.02/blib-lib-JSON-PP-pm--condition.html\" rel=\"nofollow noreferrer\">http://cpancover.com/latest/JSON-PP-4.02/blib-lib-JSON-PP-pm--condition.html</a></p>\n\n<p>where a table has columns like:</p>\n\n<ul>\n<li>!l</li>\n<li>l&amp;&amp;!r     </li>\n<li>l&amp;&amp;r</li>\n</ul>\n\n<p>Can you, please, link a relevant document to understand this or provide me some initial guidance to these reports?</p>\n"}, {"tags": ["perl", "utf-8", "win32ole"], "owner": {"reputation": 125, "user_id": 10663571, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rTypU.jpg?s=128&g=1", "display_name": "JNM", "link": "https://stackoverflow.com/users/10663571/jnm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 210, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1557234047, "creation_date": 1557234047, "question_id": 56023237, "link": "https://stackoverflow.com/questions/56023237/saving-a-word-document-as-utf-8-encoded-html", "title": "Saving a Word document as UTF-8 encoded HTML", "body": "<p>I'm having a Perl script which saves a Word document as a HTML one.\nThe following code works:</p>\n\n<pre><code>use strict;\nuse Win32::OLE::Const 'Microsoft Word';\n[...]\n$go_word_doc-&gt;SaveAs2({\n    FileName =&gt; $gs_html_name,\n    FileFormat =&gt; wdFormatFilteredHTML\n    });\n</code></pre>\n\n<p>In order to encode the output file in UTF-8, I wrote this:</p>\n\n<pre><code>use strict;\nuse Win32::OLE::Const 'Microsoft Word';\nuse Win32::OLE::Const 'Microsoft Office [0-9.]+ Object Library';\n[...]\n$go_word_doc-&gt;SaveAs2({\n    FileName =&gt; $gs_html_name,\n    FileFormat =&gt; wdFormatFilteredHTML,\n    Encoding =&gt; msoEncodingUTF8\n    });\n</code></pre>\n\n<p>The code runs, but the generated file is not properly encoded.</p>\n\n<p>I then wonder how to proceed.\nI read about using WebOptions but I cant' find how to address them.</p>\n\n<p>Could anyone help, please?\nThanks in advance.</p>\n"}, {"tags": ["perl", "utf-8", "ms-word", "win32ole"], "comments": [{"owner": {"reputation": 551, "user_id": 3123035, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e10b92a08c7e427f81d7337e15dbb24?s=128&d=identicon&r=PG&f=1", "display_name": "Noino", "link": "https://stackoverflow.com/users/3123035/noino"}, "edited": false, "score": 0, "creation_date": 1557231270, "post_id": 56021541, "comment_id": 98688464, "body": "Where did you find that &quot;msoEncodingUTF8&quot; is what you are supposed to give?"}, {"owner": {"reputation": 125, "user_id": 10663571, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rTypU.jpg?s=128&g=1", "display_name": "JNM", "link": "https://stackoverflow.com/users/10663571/jnm"}, "reply_to_user": {"reputation": 551, "user_id": 3123035, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e10b92a08c7e427f81d7337e15dbb24?s=128&d=identicon&r=PG&f=1", "display_name": "Noino", "link": "https://stackoverflow.com/users/3123035/noino"}, "edited": false, "score": 0, "creation_date": 1557232024, "post_id": 56021541, "comment_id": 98688923, "body": "Well, it&#39;s a good question since it doesn&#39;t seem to work, even with the solution given by Ikegami (65001 being the intended value, yes). :(  I found it here : <a href=\"http://code.activestate.com/lists/perl-win32-users/31952/\" rel=\"nofollow noreferrer\">code.activestate.com/lists/perl-win32-users/31952</a>"}, {"owner": {"reputation": 125, "user_id": 10663571, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rTypU.jpg?s=128&g=1", "display_name": "JNM", "link": "https://stackoverflow.com/users/10663571/jnm"}, "reply_to_user": {"reputation": 551, "user_id": 3123035, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e10b92a08c7e427f81d7337e15dbb24?s=128&d=identicon&r=PG&f=1", "display_name": "Noino", "link": "https://stackoverflow.com/users/3123035/noino"}, "edited": false, "score": 0, "creation_date": 1557232373, "post_id": 56021541, "comment_id": 98689110, "body": "&#39;Encoding&#39; is also said to be a parameter of the SaveAs2 function in MS&#39;s documentation, here: <a href=\"https://docs.microsoft.com/fr-fr/office/vba/api/word.saveas2\" rel=\"nofollow noreferrer\">docs.microsoft.com/fr-fr/office/vba/api/word.saveas2</a>"}, {"owner": {"reputation": 125, "user_id": 10663571, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rTypU.jpg?s=128&g=1", "display_name": "JNM", "link": "https://stackoverflow.com/users/10663571/jnm"}, "reply_to_user": {"reputation": 551, "user_id": 3123035, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e10b92a08c7e427f81d7337e15dbb24?s=128&d=identicon&r=PG&f=1", "display_name": "Noino", "link": "https://stackoverflow.com/users/3123035/noino"}, "edited": false, "score": 0, "creation_date": 1557232501, "post_id": 56021541, "comment_id": 98689171, "body": "I think I&#39;ll ask my question in a different way! Thanks for your time."}], "answers": [{"comments": [{"owner": {"reputation": 125, "user_id": 10663571, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rTypU.jpg?s=128&g=1", "display_name": "JNM", "link": "https://stackoverflow.com/users/10663571/jnm"}, "edited": false, "score": 1, "creation_date": 1557232448, "post_id": 56022586, "comment_id": 98689144, "body": "I finaly got by with &quot;use Win32::OLE::Const &#39;Microsoft Office [0-9.]+ Object Library&#39;;&quot;, but your suggestion also works. Thanks."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 1, "last_activity_date": 1557231832, "creation_date": 1557231832, "answer_id": 56022586, "question_id": 56021541, "link": "https://stackoverflow.com/questions/56021541/using-msoencodingutf8-with-win32ole-in-a-perl-script/56022586#56022586", "title": "Using &quot;msoEncodingUTF8&quot; with Win32::OLE in a perl script", "body": "<p>The <a href=\"https://docs.microsoft.com/en-us/dotnet/api/microsoft.office.core.msoencoding?view=office-pia\" rel=\"nofollow noreferrer\"><code>MsoEncoding</code> Enum</a> gives names to the Windows code pages. <code>msoEncodingUTF8</code> is the name given to the UTF-8 code page, <code>65001</code>.</p>\n\n<pre><code>use constant msoEncodingUTF8 =&gt; 65001;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 125, "user_id": 10663571, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rTypU.jpg?s=128&g=1", "display_name": "JNM", "link": "https://stackoverflow.com/users/10663571/jnm"}, "is_accepted": false, "score": 1, "last_activity_date": 1557303813, "last_edit_date": 1557303813, "creation_date": 1557236522, "answer_id": 56024024, "question_id": 56021541, "link": "https://stackoverflow.com/questions/56021541/using-msoencodingutf8-with-win32ole-in-a-perl-script/56024024#56024024", "title": "Using &quot;msoEncodingUTF8&quot; with Win32::OLE in a perl script", "body": "<p>The following command will create <code>msoEncodingUTF8</code> (and other constants) for you:</p>\n\n<pre><code>use Win32::OLE::Const 'Microsoft Office [0-9.]+ Object Library';\n</code></pre>\n"}], "owner": {"reputation": 125, "user_id": 10663571, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rTypU.jpg?s=128&g=1", "display_name": "JNM", "link": "https://stackoverflow.com/users/10663571/jnm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 80, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1557303813, "creation_date": 1557228291, "last_edit_date": 1557232225, "question_id": 56021541, "link": "https://stackoverflow.com/questions/56021541/using-msoencodingutf8-with-win32ole-in-a-perl-script", "title": "Using &quot;msoEncodingUTF8&quot; with Win32::OLE in a perl script", "body": "<p>I'm having a Perl script which saves a Word document as a HTML one.\nThe following code works:</p>\n\n<pre><code>use strict;\nuse Win32::OLE::Const 'Microsoft Word';\n[...]\n$go_word_doc-&gt;SaveAs2({\n    FileName =&gt; $gs_html_name,\n    FileFormat =&gt; wdFormatFilteredHTML\n    });\n</code></pre>\n\n<p>In order to encode the output file in UTF-8, I turned my command in this way:</p>\n\n<pre><code>$go_word_doc-&gt;SaveAs2({\n    FileName =&gt; $gs_html_name,\n    FileFormat =&gt; wdFormatFilteredHTML,\n    Encoding =&gt; msoEncodingUTF8\n    });\n</code></pre>\n\n<p>The problem is that \"msoEncodingUTF8\" is seen as a bareword, and I can't find anywhere what I'm supposed to add for it to work.</p>\n\n<p>Could anyone help, please?\nThanks in advance.</p>\n"}, {"tags": ["html", "perl"], "comments": [{"owner": {"reputation": 31386, "user_id": 9661424, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rnnvz.png?s=128&g=1", "display_name": "sticky bit", "link": "https://stackoverflow.com/users/9661424/sticky-bit"}, "edited": false, "score": 1, "creation_date": 1557227907, "post_id": 56021336, "comment_id": 98686530, "body": "If you want to show something bold in HTML use the <code>&lt;b&gt;</code> tag."}], "answers": [{"tags": [], "owner": {"reputation": 961, "user_id": 341930, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d2819a0020e657078218ed37f96b97b7?s=128&d=identicon&r=PG", "display_name": "TFBW", "link": "https://stackoverflow.com/users/341930/tfbw"}, "is_accepted": false, "score": 3, "last_activity_date": 1557228887, "creation_date": 1557228887, "answer_id": 56021697, "question_id": 56021336, "link": "https://stackoverflow.com/questions/56021336/print-text-in-bold-in-webpage/56021697#56021697", "title": "print text in bold in webpage", "body": "<p>The means by which web pages and terminals create effects such as colours and styles is very different. The web uses HTML, a markup language with tags and style sheets. Terminals use control codes and escape sequences. There is no single output you can generate which will work for both.</p>\n\n<p>You could, however, generate HTML output and pipe your output through an HTML-renderer for the console when operating on the console. Alternatively, you could create a set of functions for the styles you want (like bold), and have them produce different output depending on whether the destination is a terminal or not. You can test whether STDOUT is a terminal using <code>-t STDOUT</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 642, "user_id": 5467494, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/99Y3d.jpg?s=128&g=1", "display_name": "Andrea T.", "link": "https://stackoverflow.com/users/5467494/andrea-t"}, "is_accepted": true, "score": 2, "last_activity_date": 1557264363, "creation_date": 1557264363, "answer_id": 56030672, "question_id": 56021336, "link": "https://stackoverflow.com/questions/56021336/print-text-in-bold-in-webpage/56030672#56030672", "title": "print text in bold in webpage", "body": "<p>Term::ANSIColor allows you to change the aspect of the text printed to the terminal (via the command line interface, CLI).\nWeb pages are simple text documents that are <em>rendered</em> by the browser, as long as you use valid HTML/CSS/JavaScript code.</p>\n\n<p>To print <em>bold</em> text in HTML you should print something like:</p>\n\n<pre><code>print \"&lt;b&gt;This text is bold&lt;/b&gt; &lt;br&gt;\\n\";\n</code></pre>\n\n<p>where the <em>b</em> tag is for bold, and <em>br</em> is the line break (<em>i.e.</em> equivalent to the <code>\\n</code> in command line context). This snippet is to clarify how HTML tags work (see <a href=\"https://www.w3schools.com/html/html_intro.asp\" rel=\"nofollow noreferrer\">https://www.w3schools.com/html/html_intro.asp</a> for more).</p>\n\n<p>I agree with TFBW and you can use HTML-rendere downstream, or if you want more control and at the same time produce good HTML code you can use some Perl module for this (<a href=\"https://metacpan.org/search?size=20&amp;q=html\" rel=\"nofollow noreferrer\">https://metacpan.org/search?size=20&amp;q=html</a>).</p>\n\n<p>As a final comment, I personally use Term::ANSIColor only for scripts that I personally run, as seeing the scrolling text can be confusing an some colors will drive through the different informations. scripts that generate (usually dynamic) web pages are typically writing their text to a log file, making the colors less useful and possibly difficult to read.</p>\n"}], "owner": {"reputation": 19, "user_id": 11192101, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d25d229087e067a6609cdd883afb2a28?s=128&d=identicon&r=PG&f=1", "display_name": "Jack15", "link": "https://stackoverflow.com/users/11192101/jack15"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 315, "favorite_count": 0, "accepted_answer_id": 56030672, "answer_count": 2, "score": 0, "last_activity_date": 1557264363, "creation_date": 1557227592, "question_id": 56021336, "link": "https://stackoverflow.com/questions/56021336/print-text-in-bold-in-webpage", "title": "print text in bold in webpage", "body": "<p>I have a perl script which generates the output and display in webpage (in Nagios).</p>\n\n<p>So from the output I want to display particular line (called heading) in BOLD in script output as well as in webpage</p>\n\n<p>I am trying to use below- It display bold (Heading1) in command line But not in Nagios webpage.</p>\n\n<pre><code>use Term::ANSIColor qw(:constants);\n$Term::ANSIColor::AUTORESET = 1;\n\nsub display\n{\n    print BOLD (\"Heading1:\\n\");\n}\n</code></pre>\n\n<p>Could see in Webpage it displays followed with number But NO BOLD.</p>\n\n<pre><code>[1mHeading1:\n</code></pre>\n"}, {"tags": ["windows", "perl", "xmpp"], "answers": [{"comments": [{"owner": {"reputation": 473, "user_id": 8721281, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7DKU2.jpg?s=128&g=1", "display_name": "Chazg76", "link": "https://stackoverflow.com/users/8721281/chazg76"}, "edited": false, "score": 0, "creation_date": 1557229551, "post_id": 56021205, "comment_id": 98687429, "body": "Thanks for the quick reply...Unfortunately that does not fix my problem, I now get the error &quot;ERROR: XMPP connection failed at perlprog.pl line 23&quot;"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 473, "user_id": 8721281, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7DKU2.jpg?s=128&g=1", "display_name": "Chazg76", "link": "https://stackoverflow.com/users/8721281/chazg76"}, "edited": false, "score": 1, "creation_date": 1557229794, "post_id": 56021205, "comment_id": 98687575, "body": "Well, it did solve the problem you asked about. It seems you have another one. Error message appears to be in <code>$con-&gt;GetErrorCode()</code>. (Bad documentation!!!)"}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 2, "last_activity_date": 1557227725, "last_edit_date": 1557227725, "creation_date": 1557227148, "answer_id": 56021205, "question_id": 56020431, "link": "https://stackoverflow.com/questions/56020431/netxmpp-perl-modulessl-path-error-on-windows-system/56021205#56021205", "title": "Net::XMPP Perl module:ssl path error on windows system", "body": "<p>From what I can tell from a look at the sources, <code>ssl_ca_path</code> must be provided when <code>ssl =&gt; 1</code> or <code>tls =&gt; 1</code> is used. (It can be a file or directory.)</p>\n\n<p>For example,  believe you can use something like the following to trust the CAs that Mozilla trusts.</p>\n\n<pre><code>use Mozilla::CA       qw( );\nuse Net::XMPP::Client qw( );\n\nmy $con = Net::XMPP::Client-&gt;new();\n\n$con-&gt;Connect(  \n    ...\n    tls         =&gt; 1,\n    ssl_ca_path =&gt; Mozilla::CA::SSL_ca_file(),\n);  \n</code></pre>\n"}], "owner": {"reputation": 473, "user_id": 8721281, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7DKU2.jpg?s=128&g=1", "display_name": "Chazg76", "link": "https://stackoverflow.com/users/8721281/chazg76"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 73, "favorite_count": 0, "accepted_answer_id": 56021205, "answer_count": 1, "score": 0, "last_activity_date": 1557293217, "creation_date": 1557224382, "last_edit_date": 1557293217, "question_id": 56020431, "link": "https://stackoverflow.com/questions/56020431/netxmpp-perl-modulessl-path-error-on-windows-system", "title": "Net::XMPP Perl module:ssl path error on windows system", "body": "<p>I am trying to connect to an XMPP server using the perl module Net::XMPP on a windows 10 machine running Strawberry Perl and I get the following error:</p>\n\n<pre><code>Invalid or unreadable path specified for ssl_ca_path. at C:/strawberry/perl/site/lib/XML/Stream.pm line 640\n</code></pre>\n\n<p>The code I am using is below:</p>\n\n<pre><code>#!/bin/perl -w\n\nuse strict;\nuse warnings;\n\nuse Net::XMPP;\n\nmy $con = new Net::XMPP::Client(); \n\nmy $status = $con-&gt;Connect(  \n    hostname =&gt; 'hostnamepart',  \n    connectiontype =&gt; 'tcpip',  \n    tls =&gt; 1);  \ndie('ERROR: XMPP connection failed') if ! defined($status);\n</code></pre>\n\n<p>I have tested if I can connect to the server using the Pidgin client app on my Windows machine and it works fine. </p>\n\n<blockquote>\n  <p>Is there any way to fix my Perl problem?</p>\n</blockquote>\n"}, {"tags": ["perl", "anyevent"], "comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 3, "creation_date": 1557219632, "post_id": 56018877, "comment_id": 98681921, "body": "Would  <code>unbuffer</code> or a pseudo-terminal (pty) help, like on <a href=\"https://stackoverflow.com/q/54538273/4653379\">this page</a>"}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1557220279, "post_id": 56018877, "comment_id": 98682273, "body": "@zdim Yes this seems to work: <code>sudo apt-get install expect</code>, and then using <code>unbuffer</code> with <code>myscript.pl</code>. Thanks for the link!"}], "owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 46, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1557219167, "creation_date": 1557219167, "question_id": 56018877, "link": "https://stackoverflow.com/questions/56018877/how-to-make-external-commands-output-autoflush-with-anyeventsubprocess", "title": "How to make external command&#39;s output autoflush with AnyEvent::Subprocess?", "body": "<p>I am trying to monitor the output of an external command with <a href=\"https://metacpan.org/pod/AnyEvent::Subprocess\" rel=\"nofollow noreferrer\"><code>AnyEvent::Subprocess</code></a>:</p>\n\n<pre><code>use feature qw(say);\nuse strict;\nuse warnings;\n\nuse AnyEvent::Subprocess;\n\nmy $job = AnyEvent::Subprocess-&gt;new(\n    delegates     =&gt; [ 'StandardHandles', 'CompletionCondvar' ],\n    code          =&gt; 'myscript.pl',\n);\nmy $run = $job-&gt;run;\nmy $condvar = $run-&gt;delegate('completion_condvar');\n\n$run-&gt;delegate('stdout')-&gt;handle-&gt;on_read(\n    sub {\n        my ( $handle ) = @_;\n        my $line = $handle-&gt;rbuf;\n        chomp $line;\n        say \"Got output: '$line'\";\n        $handle-&gt;rbuf = \"\"; # clear buffer\n      }\n);\nmy $done = $condvar-&gt;recv;\n</code></pre>\n\n<p>In general, I do not have access to the source code of the external script, so I cannot insert commands like <code>STDOUT-&gt;autoflush(1)</code> into the script (if the script happens to be a Perl script). </p>\n\n<p>Here is the test script I used for testing:</p>\n\n<p><strong>myscript.pl</strong>:</p>\n\n<pre><code>use feature qw(say);\nuse strict;\nuse warnings;\n\n#STDOUT-&gt;autoflush(1);\nsleep 1;\nsay \"data 1\";\nsleep 1;\nsay \"data 2\";\nsleep 1;\nsay \"data 3\";\n</code></pre>\n\n<p>The output is coming all at once after <code>myscript.pl</code> finishes. I want to print each line from <code>myscript.pl</code> as it becomes available. How can this be done without modifying <code>myscript.pl</code> ?</p>\n"}, {"tags": ["arrays", "list", "perl", "reference", "subroutine"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1557217209, "post_id": 56018000, "comment_id": 98680493, "body": "It&#39;s called an array, not a list."}], "answers": [{"comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1557426712, "post_id": 56018151, "comment_id": 98771031, "body": "Speaking of lists and arrays (at the end), I recall an excellent <a href=\"http://www.friedo.com/blog/2013/07/arrays-vs-lists-in-perl\" rel=\"nofollow noreferrer\">article on Mike Friedman (&quot;friedo&quot;) blog</a>, but which is down right now."}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": true, "score": 6, "last_activity_date": 1591783596, "last_edit_date": 1591783596, "creation_date": 1557216482, "answer_id": 56018151, "question_id": 56018000, "link": "https://stackoverflow.com/questions/56018000/how-to-pass-variables-to-a-function-as-reference-and-get-them-changed-in-caller/56018151#56018151", "title": "How to pass variables to a function as reference and get them changed in caller without returning", "body": "<p>In principle, and in practically any language, you'd want to pass objects that refer to data structures in the caller, pointers or references. In Perl, that would be a reference -- and you are doing that.  </p>\n\n<p>But then in the sub you create local copies; the <code>$one</code>, <code>@list</code>, and <code>%hash</code> <em>in the sub</em> are <a href=\"https://perldoc.perl.org/functions/my.html\" rel=\"nofollow noreferrer\">lexical variables</a>\nlocal to <a href=\"https://perldoc.perl.org/perlsub.html#Private-Variables-via-my()\" rel=\"nofollow noreferrer\">sub's scope</a>, masking/shadowing the ones in the calling scope. Changes to those don't do anything outside of sub's scope.</p>\n\n<p>Instead, directly use the references that you passed in order to write to the caller's data.</p>\n\n<pre><code>sub foo { \n\n    my ($rscalar, $rary, $rhash) = @_;\n\n    $$rscalar = 2;\n\n    @$rary = (4,5,6);\n\n    $rhash-&gt;{'key'} = 'valueModified'; \n}\n\nfoo(\\$one, \\@list, \\%hash);\n</code></pre>\n\n<p>Now <code>$one</code>, <code>@list</code>, and <code>%hash</code> in the calling code have been changed. For details of working with references please see tutorial <a href=\"https://perldoc.perl.org/perlreftut.html\" rel=\"nofollow noreferrer\">perlreftut</a> and reference <a href=\"https://perldoc.perl.org/perlref.html\" rel=\"nofollow noreferrer\">perlref</a>.</p>\n\n<p>Note that <code>foo(\\@allLocalArgs);</code> passes the reference of the array with arguments, so the sub receives one element -- that array's reference.  You can do that but for the point of the question it isn't needed so I removed it and passed the list of arguments directly. </p>\n\n<p>Another thing to note is that arguments are aliased in <code>@_</code> --  so if in the sub you work with <code>@_</code> directly then you may change data in the caller. So if you were to pass a scalar variable as <code>foo($one)</code> then <code>$_[0] = 2</code> in the sub changes <code>$one</code> in the caller.  <em>This is in principle best avoided</em> in my opinion; if caller's data is to be changed that should be made as explicit as possible; pass the reference.</p>\n\n<hr>\n\n<p>A note on terminology</p>\n\n<p>A <em>list</em> in Perl is an elusive, ephemeral structure used to move data around in a program; think of a bunch of scalars (values) on the stack somewhere, about to be used and disappear. Perhaps to pass arguments to a function (<code>foo($v1, $v2)</code>), or to form a string (<code>join '', $v1, $v2</code>), or to create an anonymous array reference (<code>[$v1, $v2]</code>), etc.</p>\n\n<p>An <em>array</em>, on the other hand, is a multi-valued <em>variable</em>. Much like a hash (associative array) is a multi-valued variable, and as opposed to a <em>scalar</em>, being a single-valued variable.</p>\n\n<p>A lot has been written on this; here are a few links that came up readily: an <a href=\"https://www.effectiveperlprogramming.com/2010/01/whats-the-difference-between-a-list-and-an-array/\" rel=\"nofollow noreferrer\">Effective Perler article</a> (with links to a few more articles), and a Stackoverflow page <a href=\"https://stackoverflow.com/q/6023821/4653379\">Perl array vs list</a>.</p>\n\n<p>In short, you are asking about a \"scalar, array, hash.\"</p>\n"}], "owner": {"reputation": 2387, "user_id": 30868, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/732ae7c85e255086f3c720fe34a00767?s=128&d=identicon&r=PG", "display_name": "ashishsony", "link": "https://stackoverflow.com/users/30868/ashishsony"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 65, "favorite_count": 0, "accepted_answer_id": 56018151, "answer_count": 1, "score": 1, "last_activity_date": 1591816372, "creation_date": 1557215875, "last_edit_date": 1591816372, "question_id": 56018000, "link": "https://stackoverflow.com/questions/56018000/how-to-pass-variables-to-a-function-as-reference-and-get-them-changed-in-caller", "title": "How to pass variables to a function as reference and get them changed in caller without returning", "body": "<p>I need to pass in a variable,list and a hash to a subroutine, and get back changes from it without returning.</p>\n\n<p>This code doesnt do the job.</p>\n\n<pre><code>sub foo{\n    my $one = {$_[0]};   \n    my @list = @{$_[1]};\n    my %hash = %{$_[2]};\n    print(\"\\n inside foo: ${one}\\n\");\n    print(\"\\n inside foo: $one @list $hash{'key'}\\n\");\n    $one = 2;\n    @list = (4,5,6);\n    my %hash2;\n    $hash2{'key'} = 'valueModified';    \n    %hash = %hash2;\n    print(\"\\n inside foo after Mod: $one\\n\");\n    print(\"\\n inside foo after Mod: $one @list $hash{'key'}\\n\");\n}\n\nmy $one = 1;\nmy @list = (1,2,3);\nmy %hash;\n$hash{'key'} = 'value';\nmy @allLocalArgs = (\\$one,\\@list,\\%hash);\nfoo(\\@allLocalArgs);\nprint(\"\\nafter foo modification: $one @list $hash{'key'}\\n\");\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code> inside foo: HASH(0x234a240)\n\n inside foo: HASH(0x234a240)  \n\n inside foo after Mod: 2\n\n inside foo after Mod: 2 4 5 6 valueModified\n\nafter foo modification: 1 1 2 3 value\n</code></pre>\n\n<p>Thanks.</p>\n"}, {"tags": ["perl", "glob", "shopt"], "answers": [{"comments": [{"owner": {"reputation": 1448, "user_id": 5464233, "user_type": "registered", "profile_image": "https://graph.facebook.com/10208326386304302/picture?type=large", "display_name": "Guido Flohr", "link": "https://stackoverflow.com/users/5464233/guido-flohr"}, "edited": false, "score": 1, "creation_date": 1558790217, "post_id": 56038600, "comment_id": 99220955, "body": "Fixed in File-Globstar 0.6, see <a href=\"https://github.com/gflohr/File-Globstar/commit/396b320ed56ff6bb69ad1dedea1e2dd76e31f01a\" rel=\"nofollow noreferrer\">github.com/gflohr/File-Globstar/commit/&hellip;</a>"}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 2, "last_activity_date": 1558795441, "last_edit_date": 1558795441, "creation_date": 1557311266, "answer_id": 56038600, "question_id": 56017474, "link": "https://stackoverflow.com/questions/56017474/fileglobstar-not-working-for-some-patterns/56038600#56038600", "title": "File::Globstar not working for some patterns", "body": "<p>This appears to be a bug in File::Globstar.</p>\n\n<p>[ <strong>Fixed in <a href=\"https://github.com/gflohr/File-Globstar/commit/396b320ed56ff6bb69ad1dedea1e2dd76e31f01a\" rel=\"nofollow noreferrer\">0.6</a></strong> ]</p>\n\n<pre><code>&gt;md f_oo &amp; md f_oo\\bar &amp; copy nul f_oo\\bar\\a.js &gt;nul\n\n&gt;perl -MFile::Globstar=globstar -e\"CORE::say for globstar 'f_oo/**/*.js'\"\n\n&gt;md f.oo &amp; md f.oo\\bar &amp; copy nul f.oo\\bar\\a.js &gt;nul\n\n&gt;perl -MFile::Globstar=globstar -e\"CORE::say for globstar 'f.oo/**/*.js'\"\n\n&gt;md foo &amp; md foo\\bar &amp; copy nul foo\\bar\\a.js &gt;nul\n\n&gt;perl -MFile::Globstar=globstar -e\"CORE::say for globstar 'foo/**/*.js'\"\nfoo/bar/a.js\n</code></pre>\n\n<p>The bug isn't Windows-specific.</p>\n\n<pre><code>$ md -p f_oo/bar; touch f_oo/bar/a.js\n\n$ perl -MFile::Globstar=globstar -e'CORE::say for globstar \"f_oo/**/*.js\"'\n\n$ md -p f.oo/bar; touch f.oo/bar/a.js\n\n$ perl -MFile::Globstar=globstar -e'CORE::say for globstar \"f.oo/**/*.js\"'\n\n$ md -p foo/bar; touch foo/bar/a.js\n\n$ perl -MFile::Globstar=globstar -e'CORE::say for globstar \"foo/**/*.js\"'\nfoo/bar/a.js\n</code></pre>\n\n<p>Attempts to escape the problematic characters proved fruitless on both systems.</p>\n\n<p>You should <a href=\"https://github.com/gflohr/File-Globstar/issues\" rel=\"nofollow noreferrer\">reach out</a> to the maintainer.</p>\n\n<hr>\n\n<p>You could possibly use <a href=\"http://search.cpan.org/perldoc?File::Globstar\" rel=\"nofollow noreferrer\">File::Find::Rule</a> instead of File::Globstar.</p>\n\n<pre><code>&gt;md f_o.o &amp; md f_o.o\\bar &amp; copy nul f_o.o\\bar\\a.js &gt;nul\n\n&gt;perl -MFile::Find::Rule -e\"CORE::say for File::Find::Rule-&gt;name('*.js')-&gt;in('f_o.o')\"\nf_o.o/bar/a.js\n</code></pre>\n"}], "owner": {"reputation": 33, "user_id": 8779347, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/027fedf6f37ad7b600413612d3908361?s=128&d=identicon&r=PG&f=1", "display_name": "oly", "link": "https://stackoverflow.com/users/8779347/oly"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 56, "favorite_count": 0, "accepted_answer_id": 56038600, "answer_count": 1, "score": 1, "last_activity_date": 1576217502, "creation_date": 1557213691, "last_edit_date": 1576217502, "question_id": 56017474, "link": "https://stackoverflow.com/questions/56017474/fileglobstar-not-working-for-some-patterns", "title": "File::Globstar not working for some patterns", "body": "<p>I am trying to use the File::Globstar module to search for files recursively. \n<a href=\"https://metacpan.org/pod/File::Globstar#EXAMPLES\" rel=\"nofollow noreferrer\">https://metacpan.org/pod/File::Globstar#EXAMPLES</a>.</p>\n\n<p>However, some of the patterns given in the documentation are not working for me when the path contains a <code>.</code> or a <code>_</code>.</p>\n\n<p>For example, the search is empty when I do either of the following:</p>\n\n<pre><code>use File::Globstar qw(globstar);\nmy $path = 'D:/a.a/b/c/**/*.js';\nmy @results = globstar $path;\n</code></pre>\n\n<p>or</p>\n\n<pre><code>use File::Globstar qw(globstar);\nmy $path = 'D:/a_a/b/c/**/*.js';\nmy @results = globstar $path;\n</code></pre>\n\n<p>However, these work when I avoid using <code>**</code>.</p>\n\n<pre><code>my @results = globstar 'D:/a.a/b/c/e/*.js' \n</code></pre>\n\n<p>Am I doing something wrong?</p>\n"}, {"tags": ["arrays", "perl", "hash"], "answers": [{"comments": [{"owner": {"reputation": 131, "user_id": 11021403, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d94bf7aa2ba610176fd2d272f72dddfc?s=128&d=identicon&r=PG&f=1", "display_name": "cms72", "link": "https://stackoverflow.com/users/11021403/cms72"}, "edited": false, "score": 0, "creation_date": 1557210132, "post_id": 56016363, "comment_id": 98677086, "body": "I see! Thanks zdim! Quick question, why do you need to set the value of $seen{$val} to 1?"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 131, "user_id": 11021403, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d94bf7aa2ba610176fd2d272f72dddfc?s=128&d=identicon&r=PG&f=1", "display_name": "cms72", "link": "https://stackoverflow.com/users/11021403/cms72"}, "edited": false, "score": 0, "creation_date": 1557210255, "post_id": 56016363, "comment_id": 98677139, "body": "@cms72  That&#39;s how we keep track of what&#39;s been seen -- we add the value just seen as a key to that hash (then it&#39;s easy to use <code>exists</code> to check every new value).  The value for the key doesn&#39;t have to be <code>1</code> if that&#39;s what you mean, it can be anything (an empty string <code>&#39;&#39;</code> or <code>undef</code> would work for instance), but we have to assign <i>something</i> for that new key.  I just thought a <code>1</code> makes good sense :)"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 131, "user_id": 11021403, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d94bf7aa2ba610176fd2d272f72dddfc?s=128&d=identicon&r=PG&f=1", "display_name": "cms72", "link": "https://stackoverflow.com/users/11021403/cms72"}, "edited": false, "score": 0, "creation_date": 1557210501, "post_id": 56016363, "comment_id": 98677237, "body": "@cms72 Welcome :)  Let me know if explanations (and which) are needed/can help"}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": true, "score": 2, "last_activity_date": 1557247625, "last_edit_date": 1557247625, "creation_date": 1557208776, "answer_id": 56016363, "question_id": 56016161, "link": "https://stackoverflow.com/questions/56016161/in-an-array-of-hashes-how-to-remove-a-value-that-is-already-present-in-another/56016363#56016363", "title": "In an array of hashes, how to remove a value that is already present in another key?", "body": "<p>For each new value you need to check whether it's been seen. For this purpose all unique values should be recorded separately, to make it efficient and easy to check a new value against them.</p>\n\n<p>Then use a hash to store seen values as keys, since it only takes a lookup to check whether a key exists. If it doesn't then process (add data to your results etc), and add that key to the hash with the ones already seen.</p>\n\n<pre><code>use warnings;\nuse strict;\n\nuse Data::Dump qw(dd);\n\nmy $file = shift || 'File_A';\n\nmy (%result, %seen);\n\nopen my $fh_A, '&lt;', $file or die \"Can't open $file: $!\";\n\nwhile (&lt;$fh_A&gt;) { \n    my ($key, $val) = split;\n\n    next if exists $seen{$val};   # saw this value already, skip\n\n    push @{$result{$key}}, $val;\n\n    $seen{$val} = 1;\n}\n\ndd \\%result;\n</code></pre>\n\n<p>I use <a href=\"https://metacpan.org/pod/Data::Dump\" rel=\"nofollow noreferrer\">Data::Dump</a> to see complex data.  If installing this is a problem use core <a href=\"https://perldoc.perl.org/Data/Dumper.html\" rel=\"nofollow noreferrer\">Data::Dumper</a></p>\n"}], "owner": {"reputation": 131, "user_id": 11021403, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d94bf7aa2ba610176fd2d272f72dddfc?s=128&d=identicon&r=PG&f=1", "display_name": "cms72", "link": "https://stackoverflow.com/users/11021403/cms72"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 109, "favorite_count": 0, "accepted_answer_id": 56016363, "answer_count": 1, "score": 2, "last_activity_date": 1557382394, "creation_date": 1557207529, "last_edit_date": 1557382394, "question_id": 56016161, "link": "https://stackoverflow.com/questions/56016161/in-an-array-of-hashes-how-to-remove-a-value-that-is-already-present-in-another", "title": "In an array of hashes, how to remove a value that is already present in another key?", "body": "<p>How do I remove a value that is already present in another key?</p>\n\n<p>For example:</p>\n\n<p>I have a tabulated file, <code>File_A</code>:</p>\n\n<pre>\na   1\nb   4\nc   1\na   2\nb   5\nc   6\n</pre>\n\n<p>and</p>\n\n<pre><code>#!/usr/bin/env perl\nuse strict;\nuse warnings;\nuse Data::Dumper;\n\nmy %hash;\n\nwhile (File_A) {\n    push {@{$hash{$File_A[0]}, $File_A[1]}};\n}\n\nSo that my %hash is equal to this\n%hash = (\n    a =&gt; [ '1','2'],\n    b =&gt; [ '4','5'],\n    c =&gt; [ '1','6'],\n);\n</code></pre>\n\n<p>The value <code>1</code> is present in both keys <code>a</code> and <code>c</code>. Is there a way where I can prevent a duplicate value from being pushed into the \narray of hashes so that it looks like this?</p>\n\n<pre><code>%hash = (\n   a =&gt; [ '1','2'],\n   b =&gt; [ '4','5'],\n   c =&gt; [ '6'],\n);\n</code></pre>\n"}, {"tags": ["windows", "shell", "powershell", "perl", "cmd"], "answers": [{"comments": [{"owner": {"reputation": 181, "user_id": 4122699, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/90809e9b8be0cb98d55410aaeb00600f?s=128&d=identicon&r=PG&f=1", "display_name": "htfree", "link": "https://stackoverflow.com/users/4122699/htfree"}, "edited": false, "score": 0, "creation_date": 1557201516, "post_id": 56015118, "comment_id": 98674688, "body": "Great, thanks, i did quick test and the conversion seems to work but doesn&#39;t looks like adds empty lines when viewed in notepad++ , is it possible to do regex on the UCS2 file/stream without converting to UTF? thanks! (The end file after regex that i need should be in the same UCS2 format as the original.)"}, {"owner": {"reputation": 181, "user_id": 4122699, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/90809e9b8be0cb98d55410aaeb00600f?s=128&d=identicon&r=PG&f=1", "display_name": "htfree", "link": "https://stackoverflow.com/users/4122699/htfree"}, "edited": false, "score": 0, "creation_date": 1557203676, "post_id": 56015118, "comment_id": 98675145, "body": "strange even on the converted UTF-8 file , regex like perl -pi.BAK -e &#39;s/foo/bar/g;&#39; PerlOut1.txt doesn&#39;t seem to work and file output is same as original even though foo is definitely the top word at the top of the file."}, {"owner": {"reputation": 181, "user_id": 4122699, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/90809e9b8be0cb98d55410aaeb00600f?s=128&d=identicon&r=PG&f=1", "display_name": "htfree", "link": "https://stackoverflow.com/users/4122699/htfree"}, "edited": false, "score": 0, "creation_date": 1557203758, "post_id": 56015118, "comment_id": 98675172, "body": "regex perl -pi.BAK -e &#39;s/foo/bar/g;&#39; PerlOut1.txt doesn&#39;t work, and i just noticed notepad++ thinks file is Macintosh (CR) instead of windows, maybe that&#39;s why, it shows extra empty lines, but the top line does indeed have &quot;foo&quot;"}, {"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "reply_to_user": {"reputation": 181, "user_id": 4122699, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/90809e9b8be0cb98d55410aaeb00600f?s=128&d=identicon&r=PG&f=1", "display_name": "htfree", "link": "https://stackoverflow.com/users/4122699/htfree"}, "edited": false, "score": 0, "creation_date": 1557204230, "post_id": 56015118, "comment_id": 98675265, "body": "@htfree Using <code>IO</code> instead of <code>IN</code> (And dropping the <code>-C2</code>) will use the specified encoding as the default for input <i>and</i> output. But, really, avoid using UCS-2 or UTF-16 for text files as much as possible. It&#39;s way too much of a pain to work with."}, {"owner": {"reputation": 181, "user_id": 4122699, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/90809e9b8be0cb98d55410aaeb00600f?s=128&d=identicon&r=PG&f=1", "display_name": "htfree", "link": "https://stackoverflow.com/users/4122699/htfree"}, "edited": false, "score": 0, "creation_date": 1557207146, "post_id": 56015118, "comment_id": 98676056, "body": "I don&#39;t have much choice since i&#39;m manipulating files generated by windows built-in utils, will give it a try thanks. (sorry double posted since thought one was deleted then came back.)"}, {"owner": {"reputation": 181, "user_id": 4122699, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/90809e9b8be0cb98d55410aaeb00600f?s=128&d=identicon&r=PG&f=1", "display_name": "htfree", "link": "https://stackoverflow.com/users/4122699/htfree"}, "edited": false, "score": 0, "creation_date": 1557207848, "post_id": 56015118, "comment_id": 98676249, "body": "Does not work unfortunately. perl -Mopen=&quot;IO,:encoding(UCS-2LE),:std&quot; -0777 -pe 1 MyUCS2.txt &gt; PerloutUCS2.txt   produces file that notepad++ thinks is Ansi Macintosh CR and has NUL between every character. Is it possible to attach files here?"}, {"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "reply_to_user": {"reputation": 181, "user_id": 4122699, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/90809e9b8be0cb98d55410aaeb00600f?s=128&d=identicon&r=PG&f=1", "display_name": "htfree", "link": "https://stackoverflow.com/users/4122699/htfree"}, "edited": false, "score": 0, "creation_date": 1557207973, "post_id": 56015118, "comment_id": 98676300, "body": "@htfree &#39;NUL between every character&#39; suggests that your program is treating a UCS-2 file as a UTF-8/ASCII/etc. byte-oriented one."}, {"owner": {"reputation": 181, "user_id": 4122699, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/90809e9b8be0cb98d55410aaeb00600f?s=128&d=identicon&r=PG&f=1", "display_name": "htfree", "link": "https://stackoverflow.com/users/4122699/htfree"}, "edited": false, "score": 0, "creation_date": 1557208123, "post_id": 56015118, "comment_id": 98676348, "body": "If you have windows you can make such a file running from commandline &quot;icacls C:\\windows\\system32 /T /save Myfile.txt&quot;  Notepad++ opens the original MyUCS2.txt file just fine and identifies it as UCS2 Little Endian and windows CR LF"}, {"owner": {"reputation": 181, "user_id": 4122699, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/90809e9b8be0cb98d55410aaeb00600f?s=128&d=identicon&r=PG&f=1", "display_name": "htfree", "link": "https://stackoverflow.com/users/4122699/htfree"}, "edited": false, "score": 0, "creation_date": 1557208796, "post_id": 56015118, "comment_id": 98676577, "body": "I can edit the UCS2 file with notepad++ and resave changes and works perfect and windows tool is able to read resulting file, but it doesn&#39;t have commandline usage."}, {"owner": {"reputation": 181, "user_id": 4122699, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/90809e9b8be0cb98d55410aaeb00600f?s=128&d=identicon&r=PG&f=1", "display_name": "htfree", "link": "https://stackoverflow.com/users/4122699/htfree"}, "edited": false, "score": 0, "creation_date": 1557210056, "post_id": 56015118, "comment_id": 98677058, "body": "Im trying to read through this now <a href=\"https://www.perlmonks.org/?node_id=608532\" rel=\"nofollow noreferrer\">perlmonks.org/?node_id=608532</a>  since before this link i had tried to use something like perl &quot;-M5;binmode($_,&#39;:raw:encoding(UCS2-LE):crlf&#39;)for(STDIN,STDO&zwnj;&#8203;UT)&quot; -pe &quot;s/foo/bar/gi&quot; MyUCS2LE_CRLF.txt &gt; ModifiedUCS2LE_CRLF.txt  and it didn&#39;t work."}, {"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "reply_to_user": {"reputation": 181, "user_id": 4122699, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/90809e9b8be0cb98d55410aaeb00600f?s=128&d=identicon&r=PG&f=1", "display_name": "htfree", "link": "https://stackoverflow.com/users/4122699/htfree"}, "edited": false, "score": 0, "creation_date": 1557241215, "post_id": 56015118, "comment_id": 98694623, "body": "I&#39;ll have to scrounge up a windows computer and test there; everything I&#39;ve posted is working fine on Linux for reading and creating files of the desired encoding. Might need an explicit <code>:crlf</code> added in?"}, {"owner": {"reputation": 181, "user_id": 4122699, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/90809e9b8be0cb98d55410aaeb00600f?s=128&d=identicon&r=PG&f=1", "display_name": "htfree", "link": "https://stackoverflow.com/users/4122699/htfree"}, "edited": false, "score": 0, "creation_date": 1557258046, "post_id": 56015118, "comment_id": 98702408, "body": "if you&#39;d like i can probably setup some remote control access for you, I had already tried variations like perl -Mopen=&quot;IO,:encoding(UCS-2LE):crlf,:std&quot; -pe &#39;s/foo/bar/&#39; MyUCS2_ACLS.txt &gt; ShawnPerlout.txt  but the regex doesn&#39;t do anything and the output file is then messed up by putting NUL after every letter. I think perhaps if you can convert what this post says into something i can use maybe it would work? see <a href=\"https://www.perlmonks.org/?node_id=689841\" rel=\"nofollow noreferrer\">perlmonks.org/?node_id=689841</a>  He explains its some workaround that fixes windows issue with crlf etc"}, {"owner": {"reputation": 181, "user_id": 4122699, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/90809e9b8be0cb98d55410aaeb00600f?s=128&d=identicon&r=PG&f=1", "display_name": "htfree", "link": "https://stackoverflow.com/users/4122699/htfree"}, "edited": false, "score": 0, "creation_date": 1557264787, "post_id": 56015118, "comment_id": 98705016, "body": "I have also confirmed it works perfectly on LINUX. I verified this perl -Mopen=&quot;IO,:encoding(UCS-2LE),:std&quot; -pe &#39;s/foo/bar/&#39; Windows_UCS2le.txt &gt; PerlRegexedUCS2le.txt  on a linux box using exact same UCS2le file and works. It seems as they discussed at <a href=\"https://www.perlmonks.org/?node_id=608532\" rel=\"nofollow noreferrer\">perlmonks.org/?node_id=608532</a>  this seems to be a bug encountered only on Windows. Maybe its an issue with commandline in windows messing things somehow see <a href=\"https://stackoverflow.com/questions/16598785/save-text-file-in-utf-8-encoding-using-cmd-exe\" title=\"save text file in utf 8 encoding using cmd exe\">stackoverflow.com/questions/16598785/&hellip;</a>"}, {"owner": {"reputation": 181, "user_id": 4122699, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/90809e9b8be0cb98d55410aaeb00600f?s=128&d=identicon&r=PG&f=1", "display_name": "htfree", "link": "https://stackoverflow.com/users/4122699/htfree"}, "edited": false, "score": 0, "creation_date": 1557264851, "post_id": 56015118, "comment_id": 98705041, "body": "perhaps we can use chcp command to set winodws cmdline to ucs2-le but if utf8 is 1252 what is the code for UCS-2LE? I even tried running first &quot;cmd /u&quot; on DOS prompt and then running the perl command (see this interesting link <a href=\"https://stackoverflow.com/questions/32182619/chcp-65001-and-a-bat-file\" title=\"chcp 65001 and a bat file\">stackoverflow.com/questions/32182619/chcp-65001-and-a-bat-fi&zwnj;&#8203;le</a> ) but the perl regex did nothing and again added NUL after every letter."}, {"owner": {"reputation": 181, "user_id": 4122699, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/90809e9b8be0cb98d55410aaeb00600f?s=128&d=identicon&r=PG&f=1", "display_name": "htfree", "link": "https://stackoverflow.com/users/4122699/htfree"}, "edited": false, "score": 0, "creation_date": 1557265770, "post_id": 56015118, "comment_id": 98705320, "body": "windows is headache so chcp 1200 doesn&#39;t work! got code from here  <a href=\"https://docs.microsoft.com/en-us/windows/desktop/Intl/code-page-identifiers\" rel=\"nofollow noreferrer\">docs.microsoft.com/en-us/windows/desktop/Intl/&hellip;</a>  its for UTF-16 little endian which is same as UCS-2LE but seems not supported but supposedly powershell can handle ucs2-le correctly according to: <a href=\"https://superuser.com/questions/429069/utf-16-file-output-in-cmd-exe\" title=\"utf 16 file output in cmd exe\">superuser.com/questions/429069/utf-16-file-output-in-cmd-exe</a>"}, {"owner": {"reputation": 181, "user_id": 4122699, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/90809e9b8be0cb98d55410aaeb00600f?s=128&d=identicon&r=PG&f=1", "display_name": "htfree", "link": "https://stackoverflow.com/users/4122699/htfree"}, "edited": false, "score": 0, "creation_date": 1557271410, "post_id": 56015118, "comment_id": 98706638, "body": "WOW! Mind boggling, maybe I been just too sleep deprived and likely tried EVERY possible combination except the simplest one that seems to work!?!? here it is: perl -Mopen=IO,:raw:encoding(UCS-2LE) -pi.ZZZ -e &quot;s/foo/bar/g;&quot; Win_UCS2-LE.txt   I don&#39;t get it i thought we tried this before or almost that."}, {"owner": {"reputation": 181, "user_id": 4122699, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/90809e9b8be0cb98d55410aaeb00600f?s=128&d=identicon&r=PG&f=1", "display_name": "htfree", "link": "https://stackoverflow.com/users/4122699/htfree"}, "edited": false, "score": 0, "creation_date": 1557271569, "post_id": 56015118, "comment_id": 98706671, "body": "if you add some of the stuff i wrote into your answer, along with the ending command (which can safely subsitute ucs-2le for utf-16le) I&#39;ll accept your answer as the solution. thanks for your efforts! I&#39;ll have to confirm again this does work just in case i&#39;m so dead tired my eyes are playin&#39; mean tricks on me!"}, {"owner": {"reputation": 38072, "user_id": 46395, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5ce828f20abb195ef5d971205ee36c27?s=128&d=identicon&r=PG", "display_name": "daxim", "link": "https://stackoverflow.com/users/46395/daxim"}, "edited": false, "score": 0, "creation_date": 1557303511, "post_id": 56015118, "comment_id": 98715140, "body": "<a href=\"http://p3rl.org/piconv\" rel=\"nofollow noreferrer\">piconv</a>, an iconv work-alike, ships with Perl."}, {"owner": {"reputation": 181, "user_id": 4122699, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/90809e9b8be0cb98d55410aaeb00600f?s=128&d=identicon&r=PG&f=1", "display_name": "htfree", "link": "https://stackoverflow.com/users/4122699/htfree"}, "reply_to_user": {"reputation": 38072, "user_id": 46395, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5ce828f20abb195ef5d971205ee36c27?s=128&d=identicon&r=PG", "display_name": "daxim", "link": "https://stackoverflow.com/users/46395/daxim"}, "edited": false, "score": 0, "creation_date": 1557353558, "post_id": 56015118, "comment_id": 98740813, "body": "@daxim oh wow great, didn&#39;t know i had that, good to know, thanks!"}, {"owner": {"reputation": 181, "user_id": 4122699, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/90809e9b8be0cb98d55410aaeb00600f?s=128&d=identicon&r=PG&f=1", "display_name": "htfree", "link": "https://stackoverflow.com/users/4122699/htfree"}, "reply_to_user": {"reputation": 38072, "user_id": 46395, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5ce828f20abb195ef5d971205ee36c27?s=128&d=identicon&r=PG", "display_name": "daxim", "link": "https://stackoverflow.com/users/46395/daxim"}, "edited": false, "score": 0, "creation_date": 1557355151, "post_id": 56015118, "comment_id": 98741190, "body": "@daxim but if i used piconv -f UCS2-LE -t UCS2-LE inputfile &gt; piconvout   i see that piconv messes up windows CRLF into Macintosh CR and if the input UCS2-LE file does not have a BOM, the output becomes ANSI with NUL after every letter. Again this is on windows with piconv, since i&#39;ve confirmed linux seems to not have some issues i confirmed before, see previous comments."}], "tags": [], "owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "is_accepted": false, "score": 2, "last_activity_date": 1557204615, "last_edit_date": 1557204615, "creation_date": 1557199584, "answer_id": 56015118, "question_id": 56014378, "link": "https://stackoverflow.com/questions/56014378/perl-or-powershell-how-to-convert-from-ucs-2-little-endian-to-utf-8-or-do-inline/56015118#56015118", "title": "Perl or Powershell how to convert from UCS-2 little endian to utf-8 or do inline oneliner search replace regex on UCS-2 file", "body": "<p>The one liner way is to avoid perl entirely and just use <code>iconv -f UCS-2LE -t UTF-8 infile &gt; outfile</code>, but I'm not sure if that's available on Windows.</p>\n\n<p>So, with perl as a one liner:</p>\n\n<pre><code>$ perl -Mopen=\"IN,:encoding(UCS-2LE),:std\" -C2 -0777 -pe 1 infile &gt; outfile\n</code></pre>\n\n<ul>\n<li><code>-0777</code> combined with <code>-p</code> reads entire files at a time, instead of a line at a time, which is one thing where you were going wrong - when your codepoints are 16 bits but you're treating them as 8 bit ones, finding the line separators is going to be problematic. </li>\n<li><code>-C2</code> says to use UTF-8 for standard output.</li>\n<li><code>-Mopen=\"IN,:encoding(UCS-2LE),:std\"</code> says that the default encoding for input streams, including standard input (So it'll work with redirected input not just files), is UCS-2LE. See the <a href=\"https://perldoc.perl.org/open.html\" rel=\"nofollow noreferrer\">open pragma </a> for details (In a script it'd be <code>use open IN =&gt; ':encoding(UCS-2LE)', ':std';</code>). Speaking of encoding, another issue you're having is that <code>UCS-2</code> is a synonym for <code>UCS-2BE</code>. See <a href=\"https://perldoc.perl.org/Encode/Unicode.html\" rel=\"nofollow noreferrer\">Encode::Unicode</a> for details.</li>\n</ul>\n\n<p>So that just reads a file at a time, converting from UCS-2LE to perl's internal encoding, and prints it back out again as UTF-8.</p>\n\n<p>If you didn't have to worry about Windows line ending conversion,</p>\n\n<pre><code>$ perl -MEncode -0777 -pe 'Encode::from_to($_, \"UCS-2LE\", \"UTF-8\")' infile &gt; outfile\n</code></pre>\n\n<p>would also work.</p>\n\n<hr>\n\n<p>If you want the output file to be in UCS-2LE too, and not just convert between encodings:</p>\n\n<pre><code>$ perl -Mopen=\"IO,:encoding(UCS-2LE),:std\" -pe 's/what/ever/' infile &gt; outfile\n</code></pre>\n"}], "owner": {"reputation": 181, "user_id": 4122699, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/90809e9b8be0cb98d55410aaeb00600f?s=128&d=identicon&r=PG&f=1", "display_name": "htfree", "link": "https://stackoverflow.com/users/4122699/htfree"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 637, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1557240809, "creation_date": 1557192886, "last_edit_date": 1557240809, "question_id": 56014378, "link": "https://stackoverflow.com/questions/56014378/perl-or-powershell-how-to-convert-from-ucs-2-little-endian-to-utf-8-or-do-inline", "title": "Perl or Powershell how to convert from UCS-2 little endian to utf-8 or do inline oneliner search replace regex on UCS-2 file", "body": "<p>I'm using Windows ActivePerl and I can never seem to get conversion of a UCS2 little endian file to convert properly to utf-8. Best i could muster is what seems a proper conversion except that the first line which is 4 characters is mangled in strange chinese/japanese characters but the rest of file seems ok.</p>\n\n<p>What I really want is to do oneliner /search/replace perl regex of the usual:</p>\n\n<pre><code>perl -pi.bak -e 's/replacethis/withthat/g;' my_ucs2file.txt\n</code></pre>\n\n<p>That won't work so I tried to first see if perl can do proper conversion and I'm stuck, i'm using:</p>\n\n<pre><code>perl -i.BAKS -MEncode -p -e \"Encode::from_to($_, 'UCS-2', 'UTF-8')\" My_UCS2file.txt\n</code></pre>\n\n<p>I tried using <code>UCS2</code> or <code>UCS-2LE</code> but still can't get a proper conversion.</p>\n\n<p>I recall somewhere someone had to delete a couple bits or something at the beginning of a <code>UCS2</code> file to get conversion working but I can't remember...</p>\n\n<p>When I tried PowerShell it complained it didn't know <code>UCS2</code> / <code>UCS-2</code> ...??</p>\n\n<p>Appreciate any ideas. I noticed NotePad++ does open it and recognize it fine and I can edit and resave in notepad but there's no commandline ability...</p>\n"}, {"tags": ["perl", "cookies", "lwp"], "answers": [{"comments": [{"owner": {"reputation": 961, "user_id": 341930, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d2819a0020e657078218ed37f96b97b7?s=128&d=identicon&r=PG", "display_name": "TFBW", "link": "https://stackoverflow.com/users/341930/tfbw"}, "edited": false, "score": 1, "creation_date": 1557235261, "post_id": 56023421, "comment_id": 98690830, "body": "In relation to HTTPS, all HTTP cookies are available in HTTPS. You can make a cookie HTTPS-only with the &quot;secure&quot; flag (the second &quot;0&quot; in your example, just before &quot;365 * 86400&quot;) but watch out for the different port number of HTTPS (443)."}, {"owner": {"reputation": 2483, "user_id": 812839, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/94cf78435d74f1c20df8568a1f8fa66a?s=128&d=identicon&r=PG", "display_name": "gpvos", "link": "https://stackoverflow.com/users/812839/gpvos"}, "edited": false, "score": 0, "creation_date": 1557236307, "post_id": 56023421, "comment_id": 98691528, "body": "Okay, it looks like 127.0.0.1 works too, so I&#39;m unblocked."}], "tags": [], "owner": {"reputation": 961, "user_id": 341930, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d2819a0020e657078218ed37f96b97b7?s=128&d=identicon&r=PG", "display_name": "TFBW", "link": "https://stackoverflow.com/users/341930/tfbw"}, "is_accepted": true, "score": 2, "last_activity_date": 1557234731, "creation_date": 1557234731, "answer_id": 56023421, "question_id": 56013750, "link": "https://stackoverflow.com/questions/56013750/how-to-explicitly-set-cookie-using-lwp/56023421#56023421", "title": "How to explicitly set cookie using LWP", "body": "<p>If you replace \"localhost\" with \"example.com\", you'll get the result you're looking for. Domain names must contain at least one dot.</p>\n"}], "owner": {"reputation": 2483, "user_id": 812839, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/94cf78435d74f1c20df8568a1f8fa66a?s=128&d=identicon&r=PG", "display_name": "gpvos", "link": "https://stackoverflow.com/users/812839/gpvos"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 521, "favorite_count": 0, "accepted_answer_id": 56023421, "answer_count": 1, "score": 2, "last_activity_date": 1557234731, "creation_date": 1557186694, "last_edit_date": 1557215696, "question_id": 56013750, "link": "https://stackoverflow.com/questions/56013750/how-to-explicitly-set-cookie-using-lwp", "title": "How to explicitly set cookie using LWP", "body": "<p>I want to set some cookies for use in a <code>HTTP::Request</code> later. This is my code (shortest form that already exhibits the problem):</p>\n\n<pre><code>#!/usr/bin/perl -w\n\nuse strict;\nuse LWP::UserAgent;\nuse HTTP::Cookies;\nuse Data::Dumper; # DEBUG\n\nmy $ua = LWP::UserAgent-&gt;new;\n$ua-&gt;agent(\"test.pl/0.1\");\n$ua-&gt;cookie_jar({ });\n$ua-&gt;cookie_jar-&gt;set_cookie(0, \"mykey\", \"myvalue\", \"/\", \"localhost\", 80, 0, 0, 365 * 86400, 0);\nprint \"Cookie jar: \", $ua-&gt;cookie_jar-&gt;as_string, \"\\n\";\n#print Dumper($ua-&gt;cookie_jar);\nprint \"Cookies for URL: \", Dumper($ua-&gt;cookie_jar-&gt;get_cookies(\"http://localhost/\"));\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>Cookie jar: Set-Cookie3: mykey=myvalue; path=\"/\"; domain=localhost; port=80; expires=\"2020-05-05 23:40:21Z\"; version=0\n\nCookies for URL: $VAR1 = {};\n</code></pre>\n\n<p>The cookie seems to have been added correctly to the cookie jar. However, when asking for the cookies that apply to the domain that I'm going to send the request to, it returns nothing instead of the expected cookie. And indeed, in my full program, when I try to do so, the request is sent, but the cookies aren't.</p>\n\n<p>What am I missing?</p>\n\n<p>In the end, I want to send an HTTPS request, not HTTP, so please also inform me how to properly set the cookie for that.</p>\n"}, {"tags": ["perl", "terminal"], "comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 2, "creation_date": 1557186854, "post_id": 56013603, "comment_id": 98672167, "body": "exactly the same, <code>perl -e&#39;...&#39; &lt; in.txt &gt; out.txt</code>"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1557198477, "post_id": 56013603, "comment_id": 98674108, "body": "(really, with <a href=\"https://perldoc.perl.org/perlrun.html#Command-Switches\" rel=\"nofollow noreferrer\">command switches</a> <code>perl -ne&#39;...&#39;</code> or <code>perl -pe&#39;...&#39;</code> so loop over STDIN is set up)"}], "answers": [{"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 1, "last_activity_date": 1557219728, "last_edit_date": 1557219728, "creation_date": 1557218695, "answer_id": 56018734, "question_id": 56013603, "link": "https://stackoverflow.com/questions/56013603/input-and-output-file-in-perl-terminal/56018734#56018734", "title": "Input and output file in perl terminal", "body": "<ul>\n<li><code>echo</code> doesn't read from STDIN.</li>\n<li>You have an unmatched <code>'</code>.</li>\n<li><code>\\x{\\x{9000}</code> should be <code>\\x{9000}</code>.</li>\n<li>The range of characters you are removing is very peculiar, and surely incorrect.  It starts in the middle of a seemingly arbitrary block, and it includes a huge swath of space that's not just unassigned, but not part of any blocks. I'm unable to fix this without more information.</li>\n</ul>\n\n<p>Fixed:</p>\n\n<pre><code>perl -CS -pe's/[\\x{0830}-\\x{9000}]+//g' &lt;in.txt &gt;out.txt\n</code></pre>\n\n<p>or just</p>\n\n<pre><code>perl -CS -pe's/[\\x{0830}-\\x{9000}]+//g' in.txt &gt;out.txt\n</code></pre>\n\n<hr>\n\n<p>See also: <a href=\"https://stackoverflow.com/q/41742890/589924\">Specifying file to process to Perl one-liner</a></p>\n"}], "owner": {"reputation": 67, "user_id": 11208345, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab9ae248c55b751442724087ca674e65?s=128&d=identicon&r=PG", "display_name": "silver", "link": "https://stackoverflow.com/users/11208345/silver"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 39, "favorite_count": 0, "accepted_answer_id": 56018734, "answer_count": 1, "score": 0, "last_activity_date": 1557219728, "creation_date": 1557185533, "last_edit_date": 1557219392, "question_id": 56013603, "link": "https://stackoverflow.com/questions/56013603/input-and-output-file-in-perl-terminal", "title": "Input and output file in perl terminal", "body": "<p>Please something wrong in this code, in input and output, i don't know how i can correct this code:</p>\n\n<pre><code>echo &lt; in.txt | perl -CS -pe 's/[\\x{0830}-\\x{\\x{9000}]+//g  &gt; out.txt\n</code></pre>\n\n<p>The problem how i can import <code>in.txt</code> and export <code>out.txt</code>.</p>\n\n<p>In sed it's easy like this</p>\n\n<pre><code>sed &lt; in.txt &gt; out.txt\n</code></pre>\n"}, {"tags": ["perl"], "answers": [{"comments": [{"owner": {"reputation": 25, "user_id": 2297164, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cbd89e730d25f1f3647974d9f896cc25?s=128&d=identicon&r=PG", "display_name": "user2297164", "link": "https://stackoverflow.com/users/2297164/user2297164"}, "edited": false, "score": 0, "creation_date": 1557244631, "post_id": 56013543, "comment_id": 98696532, "body": "This worked, however, the function using the return is not happy because it is a different data type how do I convert the array back into a scaler?"}, {"owner": {"reputation": 1280, "user_id": 8513648, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c59086b9318c37cc02acaeb85fef8f6?s=128&d=identicon&r=PG", "display_name": "J-L", "link": "https://stackoverflow.com/users/8513648/j-l"}, "reply_to_user": {"reputation": 25, "user_id": 2297164, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cbd89e730d25f1f3647974d9f896cc25?s=128&d=identicon&r=PG", "display_name": "user2297164", "link": "https://stackoverflow.com/users/2297164/user2297164"}, "edited": false, "score": 0, "creation_date": 1557248964, "post_id": 56013543, "comment_id": 98698468, "body": "You&#39;ll want to return <code>\\@aohf</code>, which returns a reference to an array, just like the old code did.  (I added this to the <code>EDIT</code> section of my reply, which covers it in a little more detail.)"}], "tags": [], "owner": {"reputation": 1280, "user_id": 8513648, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c59086b9318c37cc02acaeb85fef8f6?s=128&d=identicon&r=PG", "display_name": "J-L", "link": "https://stackoverflow.com/users/8513648/j-l"}, "is_accepted": true, "score": 4, "last_activity_date": 1557248887, "last_edit_date": 1557248887, "creation_date": 1557185003, "answer_id": 56013543, "question_id": 56013239, "link": "https://stackoverflow.com/questions/56013239/remove-lines-from-csv-array-of-hashes/56013543#56013543", "title": "Remove lines from csv array of hashes", "body": "<p>In your line:</p>\n\n<pre><code>my $aohf = grep { substr($_-&gt;{'a'}, 0, 1) eq \":\" } @$aoh;\n</code></pre>\n\n<p>you are assigning the result of <code>grep</code> to a scalar (<code>$aohf</code>).</p>\n\n<p>And according to <code>perldoc -f grep</code>:</p>\n\n<pre><code>In scalar context, [it] returns the number of times the\nexpression was true.\n</code></pre>\n\n<p>Therefore, you are assigning a number (probably \"5\", by the looks of your error) to <code>$aohf</code>.  And in the very next line of code, you are trying to de-reference this \"5\" as an array with <code>@$aohf</code>.  That's not going to work.</p>\n\n<p>You probably intended to write the <code>grep</code> line to assign to an array, like this:</p>\n\n<pre><code>my @aohf = grep { substr($_-&gt;{'a'}, 0, 1) eq \":\" } @$aoh;\n</code></pre>\n\n<p>Then, you can write the first line of your foreach loop like this, without the need to de-reference anything:</p>\n\n<pre><code>foreach my $row (@aohf) {\n</code></pre>\n\n<p>So basically, you assign to an array, and use an array.  No de-referencing needed!  (This is simpler than assigning to a scalar, and then attempting to de-reference the scalar into an array.)</p>\n\n<p>Try out my changes, and see if they work for you.</p>\n\n<hr>\n\n<p><strong>EDIT:</strong></p>\n\n<p>The original code returned <code>$aoh</code>, which is a reference to an array.  If you still want to return a reference to an array in the new code, you can change the <code>return</code> statement to:</p>\n\n<pre><code>return \\@aohf;\n</code></pre>\n\n<p>The <code>\\</code> before the <code>@aohf</code> gets the reference to the <code>@aohf</code> array, which is then returned to the calling code.</p>\n"}], "owner": {"reputation": 25, "user_id": 2297164, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cbd89e730d25f1f3647974d9f896cc25?s=128&d=identicon&r=PG", "display_name": "user2297164", "link": "https://stackoverflow.com/users/2297164/user2297164"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 39, "favorite_count": 0, "accepted_answer_id": 56013543, "answer_count": 1, "score": 1, "last_activity_date": 1557248887, "creation_date": 1557182330, "question_id": 56013239, "link": "https://stackoverflow.com/questions/56013239/remove-lines-from-csv-array-of-hashes", "title": "Remove lines from csv array of hashes", "body": "<p>I am trying to remove all lines from the array that contains a ':' character. This is a part of a bigger system so I can't change much of the interface nor am I an expert in perl.</p>\n\n<p>I Started With This:</p>\n\n<pre><code>sub read_file {\n    my $file = shift;\n    my $aoh  = csv(in =&gt; $file, headers =&gt; {'a' =&gt; 'aa'});\n\n    foreach my $row (@$aoh) {\n        # trim any spurious leading/trailing space (in-place edit)\n        do { s/^\\s+//; s/\\s+$// } for values %$row;\n\n        # convert start/end bit values to be zero-based\n        for my $foo ('c', 'd') {\n            if ($row-&gt;{$foo} =~ /^\\d+$/) {\n                $row-&gt;{$bit} -= 100;\n            }\n        }\n    }\n\n    return $aoh;\n}\n</code></pre>\n\n<p>I tried this</p>\n\n<pre><code>sub read_file {\n    my $file = shift;\n    my $aoh  = csv(in =&gt; $file, headers =&gt; {'a' =&gt; 'aa'});\n    my $aohf = grep { substr($_-&gt;{'a'}, 0, 1) eq \":\" } @$aoh;\n\n    foreach my $row (@$aohf) {\n        # trim any spurious leading/trailing space (in-place edit)\n        do { s/^\\s+//; s/\\s+$// } for values %$row;\n\n        # convert start/end bit values to be zero-based\n        for my $foo ('c', 'd') {\n            if ($row-&gt;{$foo} =~ /^\\d+$/) {\n                $row-&gt;{$bit} -= 100;\n            }\n        }\n    }\n\n    return $aohf;\n}\n</code></pre>\n\n<p>After trying a few different things I keep getting an error similar to this: \n<code>Can't use string (\"5\") as an ARRAY ref while \"strict refs\" in use at</code></p>\n"}, {"tags": ["arrays", "regex", "perl", "hash"], "comments": [{"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 1, "creation_date": 1557161609, "post_id": 56007213, "comment_id": 98664095, "body": "Your pattern contains only one capture group, so it&#39;s unclear what <code>$2</code> is expected to be."}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 1, "creation_date": 1557161732, "post_id": 56007213, "comment_id": 98664157, "body": "Can you describe more clearly what <code>@array1</code> contains? It is not the correct way to instantiate a Perl array, and the regex you provide would not match since there&#39;s no comma before <code>#move</code>. (and a word character is <code>\\w</code>, not <code>&#47;w</code>)"}, {"owner": {"reputation": 115, "user_id": 10781549, "user_type": "registered", "profile_image": "https://graph.facebook.com/1991393544231190/picture?type=large", "display_name": "Jigar Vaidya", "link": "https://stackoverflow.com/users/10781549/jigar-vaidya"}, "reply_to_user": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1557174087, "post_id": 56007213, "comment_id": 98668852, "body": "updated the array and regex, thanks for point it out"}], "answers": [{"tags": [], "owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "is_accepted": false, "score": 1, "last_activity_date": 1557153698, "creation_date": 1557153698, "answer_id": 56007448, "question_id": 56007213, "link": "https://stackoverflow.com/questions/56007213/perl-array-pattern-matches-then-move-to-the-another-array/56007448#56007448", "title": "Perl array : Pattern matches then move to the another array", "body": "<p>Here is one way:</p>\n\n<pre><code>use feature qw(say);\nuse strict;\nuse warnings;\nuse Data::Printer;\n\nmy @array1 = (\"cat 2\", \"dog 3#move\", \"tiger 4#move\", \"lion 10\");\nmy @array2;\nmy @temp;\nfor my $elem (@array1) {\n    if ( $elem =~ m/^(.*)#move/) {\n        push @array2, $1;\n    }\n    else {\n        push @temp, $elem;\n    }\n}\n@array1 = @temp;\n\np \\@array1;\np \\@array2;\n</code></pre>\n\n<p><strong>Output</strong>:</p>\n\n<pre><code>[\n    [0] \"cat 2\",\n    [1] \"lion 10\"\n]\n[\n    [0] \"dog 3\",\n    [1] \"tiger 4\"\n]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 15409, "user_id": 2877364, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0a101160e41fd7fd75f5fc701f8acb1c?s=128&d=identicon&r=PG", "display_name": "cxw", "link": "https://stackoverflow.com/users/2877364/cxw"}, "is_accepted": false, "score": 4, "last_activity_date": 1557160882, "last_edit_date": 1557160882, "creation_date": 1557153966, "answer_id": 56007525, "question_id": 56007213, "link": "https://stackoverflow.com/questions/56007213/perl-array-pattern-matches-then-move-to-the-another-array/56007525#56007525", "title": "Perl array : Pattern matches then move to the another array", "body": "<p>There is more than one way to do it, so here's another one, inspired by <a href=\"https://stackoverflow.com/a/16895118/2877364\">this answer</a>: Use <code>grep</code> to keep the elements you want.  Since Perl only supports deleting elements from the array you're iterating over in certain situations, this does not require you to know which situations those are :) .</p>\n\n<pre><code>use strict; use warnings;\nmy @array1 = (\"cat 2\", \"dog 3#move\", \"tiger 4#move\", \"lion 10\");\nmy @array2;\n\n@array1 = grep {    # We are going to search over @array1 and only keep some elements.\n    if (/(.*)#move/) {  # If this is one we want to move...\n        push @array2, $1;   # ... save it in array2...\n        0;      # ... and do not keep it in array1.\n    } else {\n        1;      # Otherwise, do keep it in array1.\n    }\n} @array1;\n\n# Debug output - not required\nprint \"Array 1\\n\";\nprint join \"\\n\", @array1;\nprint \"\\nArray 2\\n\";\nprint join \"\\n\", @array2;\nprint \"\\n\";\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>Array 1\ncat 2\nlion 10\nArray 2\ndog 3\ntiger 4\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "is_accepted": false, "score": 1, "last_activity_date": 1557177374, "last_edit_date": 1557177374, "creation_date": 1557161643, "answer_id": 56009418, "question_id": 56007213, "link": "https://stackoverflow.com/questions/56007213/perl-array-pattern-matches-then-move-to-the-another-array/56009418#56009418", "title": "Perl array : Pattern matches then move to the another array", "body": "<p>This is what the extract_by function from <a href=\"https://metacpan.org/pod/List::UtilsBy\" rel=\"nofollow noreferrer\">List::UtilsBy</a> does:</p>\n\n<pre><code>use strict;\nuse warnings;\nuse List::UtilsBy 'extract_by';\nmy @array1 = (\"cat 2\", \"dog 3#move\", \"tiger 4#move\", \"lion 10\");\nmy @array2 = map { s/#move//r } extract_by { m/#move/ } @array1;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2349, "user_id": 6794384, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153707640356246/picture?type=large", "display_name": "drclaw", "link": "https://stackoverflow.com/users/6794384/drclaw"}, "is_accepted": false, "score": 0, "last_activity_date": 1557182501, "creation_date": 1557182501, "answer_id": 56013257, "question_id": 56007213, "link": "https://stackoverflow.com/questions/56007213/perl-array-pattern-matches-then-move-to-the-another-array/56013257#56013257", "title": "Perl array : Pattern matches then move to the another array", "body": "<p>A possible solution using List::Util</p>\n\n<pre><code>#!/usr/bin/env perl\n#\nuse warnings;\nuse strict;\nuse List::Util qw(pairs pairgrep pairkeys);\n\n\nmy @array1 = (\"cat 2\", \"dog 3#move\", \"tiger 4#move\", \"lion 10\");\n\nmy $i=0;\nmy @indexList= map { ($i++, $_) } @array1;                     #build kv pairs\n\nmy @removed;\nmy @filtered=pairgrep { ($b =~ /#move/);} @indexList;          #grep kv pairs\npush @removed, splice @array1, $_, 1 for (pairkeys @filtered); #splice and push\n\nprint \"Modified original: @array1\\n\";\nprint \"Removed elements: @removed\\n\";\n</code></pre>\n"}], "owner": {"reputation": 115, "user_id": 10781549, "user_type": "registered", "profile_image": "https://graph.facebook.com/1991393544231190/picture?type=large", "display_name": "Jigar Vaidya", "link": "https://stackoverflow.com/users/10781549/jigar-vaidya"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 93, "favorite_count": 0, "answer_count": 4, "score": 2, "last_activity_date": 1557182501, "creation_date": 1557152932, "last_edit_date": 1557174059, "question_id": 56007213, "link": "https://stackoverflow.com/questions/56007213/perl-array-pattern-matches-then-move-to-the-another-array", "title": "Perl array : Pattern matches then move to the another array", "body": "<p>Perl : I want to move each element of array which matches the pattern. </p>\n\n<p>For example, I have below array\n@array1 = {cat 2, dog 3#move, tiger 4#move, lion 10}</p>\n\n<p>Now I want to move dog 3, tiger 4 (as pattern #move matches)  to another array lets say @array2</p>\n\n<pre><code>foreach $array (@array1) {\n    if ($array =~ m/(./w*) (./d*)#move/) {\n          push @array2, $1.$2;\n    }\n</code></pre>\n\n<p>But I want to delete those elements from array1. Thanks in advance</p>\n"}, {"tags": ["perl", "gtk3"], "answers": [{"tags": [], "owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "is_accepted": true, "score": 0, "last_activity_date": 1557147397, "last_edit_date": 1557147397, "creation_date": 1557147095, "answer_id": 56005649, "question_id": 56005459, "link": "https://stackoverflow.com/questions/56005459/how-to-check-for-ctrls-in-gtk3/56005649#56005649", "title": "How to check for CTRL+s in Gtk3?", "body": "<p>The <code>$event-&gt;state</code> is of type <code>Gtk3::Gdk::ModifierType</code> which has <a href=\"http://gtk2-perl.sourceforge.net/doc/pod/Glib.html#This_Is_Now_That\" rel=\"nofollow noreferrer\">overloaded operators</a>. </p>\n\n<blockquote>\n  <p>Flags have some additional magic abilities in the form of overloaded\n  operators:</p>\n\n<pre><code>+ or |   union of two flagsets (\"add\")\n-        difference of two flagsets (\"sub\", \"remove\")   \n* or &amp;   intersection of two bitsets (\"and\")   \n/ or ^   symmetric difference (\"xor\", you will rarely need this)\n&gt;=       contains-operator (\"is the left set a superset of the right set?\")\n==       equality\n</code></pre>\n  \n  <p>In addition, flags in boolean context\n  indicate whether they are empty or not, which allows you to write\n  common operations naturally:</p>\n\n<pre><code>$widget-&gt;set_events ($widget-&gt;get_events - \"motion_notify_mask\");  \n$widget-&gt;set_events ($widget-&gt;get_events - [\"motion_notify_mask\",\n                                          \"button_press_mask\"]);\n\n# shift pressed (both work, it's a matter of taste)   \nif ($event-&gt;state &gt;= \"shift-mask\") { ...   \nif ($event-&gt;state * \"shift-mask\") { ...\n\n# either shift OR control pressed?   \nif ($event-&gt;state * [\"shift-mask\", \"control-mask\"]) { ...\n\n# both shift AND control pressed?\nif ($event-&gt;state &gt;= [\"shift-mask\", \"control-mask\"]) { ...\n</code></pre>\n</blockquote>\n\n<p>Also, the constants for the <a href=\"https://developer.gnome.org/gdk3/stable/gdk3-Windows.html#GdkModifierType\" rel=\"nofollow noreferrer\">GdkModifierType enum</a> becomes lower case strings in Perl. So the following should work:</p>\n\n<pre><code>sub control_pressed {\n    my ( $event ) = @_;\n\n    return $event-&gt;state &amp; 'control-mask';\n}\n</code></pre>\n"}], "owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 43, "favorite_count": 0, "accepted_answer_id": 56005649, "answer_count": 1, "score": 0, "last_activity_date": 1557147397, "creation_date": 1557146366, "question_id": 56005459, "link": "https://stackoverflow.com/questions/56005459/how-to-check-for-ctrls-in-gtk3", "title": "How to check for CTRL+s in Gtk3?", "body": "<p>How can I check if a key is pressed together with a specific modifier in <a href=\"https://metacpan.org/pod/Gtk3\" rel=\"nofollow noreferrer\">Gtk3</a> ? For example, here I want to check if <kbd>CTRL+s</kbd> is pressed:</p>\n\n<pre><code>use feature qw(say);\nuse strict;\nuse warnings;\nuse Gtk3 '-init';\nuse Glib qw(TRUE FALSE);\n\nmy $window = Gtk3::Window-&gt;new('toplevel');\n$window-&gt;set_title('Hello world');\n$window-&gt;set_position('center');\n$window-&gt;set_default_size(500, 500);\n$window-&gt;signal_connect('delete-event' =&gt; sub {\n    Gtk3-&gt;main_quit();\n});\n$window-&gt;signal_connect('key-press-event' =&gt; sub { handle_key( @_ ) } );\n$window-&gt;show_all();\nGtk3-&gt;main();\n\nsub handle_key {\n    my ( $widget, $event) = @_;\n\n    my $key = Gtk3::Gdk::keyval_name( $event-&gt;keyval );\n    if ( ($key eq 's') &amp;&amp; control_pressed( $event ) ) {\n        say \"CTRL+S\";\n    }\n    return FALSE; # FALSE -&gt; means propagate key further\n}\n</code></pre>\n\n<p>How should I defined the function <code>control_pressed()</code> above?</p>\n"}, {"tags": ["perl", "mqtt"], "answers": [{"tags": [], "owner": {"reputation": 1432, "user_id": 1184912, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cc5f9407e5093fbd916ea4d80c7a499f?s=128&d=identicon&r=PG", "display_name": "eyevan", "link": "https://stackoverflow.com/users/1184912/eyevan"}, "is_accepted": true, "score": 2, "last_activity_date": 1557176025, "creation_date": 1557176025, "answer_id": 56012299, "question_id": 56004921, "link": "https://stackoverflow.com/questions/56004921/netmqttsimple-new-hangs/56012299#56012299", "title": "Net::MQTT::Simple-&gt;new() hangs?", "body": "<p>It actually does execute. You are not seeing the output of it because of buffering. </p>\n\n<p>Either add a newline to <code>print</code>:</p>\n\n<pre><code>print \"After new\\n\";\n</code></pre>\n\n<p>Or enable autoflush:</p>\n\n<pre><code>$| = 1;\nprint \"After new\";\n</code></pre>\n\n<p>(If you look at the code of <code>Net::MQTT::Simple</code> you'll see that there are no blocking operations in the constructor at all. It's waiting for the messages in <code>$mqtt-&gt;run</code>, I guess there are no messages matching the topics you are subscribing to, so it appears to be \"stuck\")</p>\n"}], "owner": {"reputation": 2349, "user_id": 6794384, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153707640356246/picture?type=large", "display_name": "drclaw", "link": "https://stackoverflow.com/users/6794384/drclaw"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 124, "favorite_count": 0, "accepted_answer_id": 56012299, "answer_count": 1, "score": 1, "last_activity_date": 1557176025, "creation_date": 1557144558, "question_id": 56004921, "link": "https://stackoverflow.com/questions/56004921/netmqttsimple-new-hangs", "title": "Net::MQTT::Simple-&gt;new() hangs?", "body": "<p>I'm attempting to use the <a href=\"https://metacpan.org/pod/Net::MQTT::Simple\" rel=\"nofollow noreferrer\">Net::MQTT::Simple</a> package from cpan. The following is a modified version of the 'Object oriented' example on the same cpan page:</p>\n\n<pre><code>use Net::MQTT::Simple;\n\nmy $mqtt = Net::MQTT::Simple-&gt;new(\"test.mosquitto.org\");\n\n#This doesn't actually execute\n\nprint \"After new\";\n\n$mqtt-&gt;run(\n    \"test\" =&gt; sub {\n        my ($topic, $message) = @_;\n        die \"The building's on fire\" if $message &gt; 150;\n    },\n    \"#\" =&gt; sub {\n        my ($topic, $message) = @_;\n        print \"[$topic] $message\\n\";\n    },\n);\n</code></pre>\n\n<p>My script never seems to connect or at least the <code>print</code> line never gets executed. No error is reported and the program just hangs. The sever name is correct as I can connect via the mosquitto_sub client.</p>\n\n<p>I feel like I'm missing something obvious. Any ideas/pointers on why this would be hanging?</p>\n"}, {"tags": ["perl", "append", "byte"], "comments": [{"owner": {"reputation": 6468, "user_id": 293652, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/820308d5db420d7f0e1d0ba97e09f520?s=128&d=identicon&r=PG", "display_name": "Grant McLean", "link": "https://stackoverflow.com/users/293652/grant-mclean"}, "edited": false, "score": 1, "creation_date": 1557133305, "post_id": 56001861, "comment_id": 98650051, "body": "Instead of <code>10</code>, you might try <code>chr(10)</code> or <code>&quot;\\x0A&quot;</code>"}, {"owner": {"reputation": 45, "user_id": 4101469, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-K74aywA51rM/AAAAAAAAAAI/AAAAAAAAABU/rMeEuvyqUCc/photo.jpg?sz=128", "display_name": "Jan Pt&#225;\u010dn&#237;k", "link": "https://stackoverflow.com/users/4101469/jan-pt%c3%a1%c4%8dn%c3%adk"}, "reply_to_user": {"reputation": 6468, "user_id": 293652, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/820308d5db420d7f0e1d0ba97e09f520?s=128&d=identicon&r=PG", "display_name": "Grant McLean", "link": "https://stackoverflow.com/users/293652/grant-mclean"}, "edited": false, "score": 0, "creation_date": 1557133936, "post_id": 56001861, "comment_id": 98650329, "body": "oh, that was quite easy, thanks a lot"}], "answers": [{"comments": [{"owner": {"reputation": 45, "user_id": 4101469, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-K74aywA51rM/AAAAAAAAAAI/AAAAAAAAABU/rMeEuvyqUCc/photo.jpg?sz=128", "display_name": "Jan Pt&#225;\u010dn&#237;k", "link": "https://stackoverflow.com/users/4101469/jan-pt%c3%a1%c4%8dn%c3%adk"}, "edited": false, "score": 0, "creation_date": 1557135148, "post_id": 56002256, "comment_id": 98650945, "body": "Thanks for this detailed answer!"}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1557155419, "post_id": 56002256, "comment_id": 98661244, "body": "In the highly unlikely possibility that anyone cares, <code>\\N{U+00A0}</code> (and a couple of the others) is the most portable if you care about EBCDIC, since <code>\\x0A</code> is not the same character there."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1557157099, "post_id": 56002256, "comment_id": 98662092, "body": "@Grinnz, 1) There aren&#39;t many EBCDIC Windows machines, and 2) You have it backwards. The question is specifically about using char 10 instead of the local OS&#39;s line endings --the question is about editing a file in a foreign format-- so the last 5 would do exactly what you&#39;d want. (I don&#39;t know what <code>&quot;\\n&quot;</code> the various <code>\\N</code> versions do on such a machine.)"}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1557158485, "post_id": 56002256, "comment_id": 98662760, "body": "@ikegami Generally &quot;I want character 10&quot; is an ASCII-centric concern - if you&#39;re working with both ASCII and EBCDIC, you don&#39;t work in terms of the bytes they encode to. As such &quot;what you&#39;d want&quot; could be any of those - I also gleaned from the documentation that <code>\\n</code> may be further translated on EBCDIC to the &quot;NEXT LINE&quot; character, what fun. Regardless, an academic discussion all around."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1557160179, "post_id": 56002256, "comment_id": 98663492, "body": "@Grinnz, 1) Noone says &quot;I want character 10&quot; when they mean &quot;I want a local line feed&quot;, and 2) If the question is really the latter, then forget EBCDIC machines; it&#39;s more important to note that none of the answers I provided work on Windows."}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1557160654, "post_id": 56002256, "comment_id": 98663670, "body": "@ikegami Normally they wouldn&#39;t, but it should with the <code>:raw</code> layer being passed in the OP."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1557161019, "post_id": 56002256, "comment_id": 98663849, "body": "@Grinnz, Backwards again. You&#39;d have to stop passing it to get a local line ending from the solutions I provided."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 5, "last_activity_date": 1557157513, "last_edit_date": 1557157513, "creation_date": 1557134510, "answer_id": 56002256, "question_id": 56001861, "link": "https://stackoverflow.com/questions/56001861/how-to-append-lf-0a-character-to-a-file-using-pathtiny/56002256#56002256", "title": "How to append LF (0A) character to a file using Path::Tiny?", "body": "<p>The value produced by the numerical literal</p>\n\n<pre><code>10\n</code></pre>\n\n<p>is being stringified into the two character string</p>\n\n<pre><code>10\n</code></pre>\n\n<p>To get a string consisting of character 10, you can use any of the following:</p>\n\n<pre><code>\"\\n\"\n\"\\N{LINE FEED}\"\n\"\\N{LF}\"\n\"\\N{U+000A}\"\n\"\\x{0A}\"\n\"\\x0A\"\n\"\\012\"\nchr(10)\npack('C', 10)\n</code></pre>\n"}], "owner": {"reputation": 45, "user_id": 4101469, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-K74aywA51rM/AAAAAAAAAAI/AAAAAAAAABU/rMeEuvyqUCc/photo.jpg?sz=128", "display_name": "Jan Pt&#225;\u010dn&#237;k", "link": "https://stackoverflow.com/users/4101469/jan-pt%c3%a1%c4%8dn%c3%adk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 62, "favorite_count": 0, "accepted_answer_id": 56002256, "answer_count": 1, "score": 0, "last_activity_date": 1557157513, "creation_date": 1557133078, "last_edit_date": 1557134134, "question_id": 56001861, "link": "https://stackoverflow.com/questions/56001861/how-to-append-lf-0a-character-to-a-file-using-pathtiny", "title": "How to append LF (0A) character to a file using Path::Tiny?", "body": "<p>This approach doesn't work - just string \"10\" is added</p>\n\n<pre><code>use Modern::Perl;\nuse Path::Tiny qw( path );\nuse DateTime;\n\nmy $d1 = DateTime-&gt;new(year =&gt; 2019, month =&gt; 5, day =&gt; 6);\nmy @lines_to_add;\n\n$lines_to_add[0]= \"1|\" . $d1-&gt;dmy('.') . \"|\";\n\n$,=\"\\n\";\nmy $filename = \"./load\";\npath($filename)-&gt;spew_raw(@lines_to_add);\npath($filename)-&gt;append({binmode =&gt; \":raw\"}, 10);\n</code></pre>\n\n<p>I'd like to generate some data and then insert them into a table (Informix running on AIX). However, the environment requires the LF character at the end of files to load from. And I'd like to use just Path::Tiny library for that. (I am on Windows using Strawberry Perl)</p>\n"}, {"tags": ["regex", "string", "perl", "split"], "comments": [{"owner": {"reputation": 1956, "user_id": 2027146, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/mrrIp.jpg?s=128&g=1", "display_name": "Milk", "link": "https://stackoverflow.com/users/2027146/milk"}, "edited": false, "score": 4, "creation_date": 1557104777, "post_id": 55997698, "comment_id": 98642332, "body": "Welcome to StackOverflow! Could you please include a snippet of code you have tried so far so we can help further"}, {"owner": {"reputation": 10661, "user_id": 135351, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/8281b1bd2eaad90adfda7f9aefac1d24?s=128&d=identicon&r=PG", "display_name": "dave", "link": "https://stackoverflow.com/users/135351/dave"}, "edited": false, "score": 0, "creation_date": 1557106466, "post_id": 55997698, "comment_id": 98642568, "body": "You don&#39;t have to use a regular expression. You could remove the initial &quot;Also there is&quot; and split on the comma character. Then check each one to see if it&#39;s not one of your known entities. If it&#39;s not, then it&#39;s one of the list of names."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1559626068, "post_id": 55997698, "comment_id": 99469316, "body": "Please see <a href=\"http://stackoverflow.com/help/someone-answers\">What should I do when someone answers my question?</a>  In short, you can vote on answers and also accept one.  If things still aren&#39;t clear from posted answers you can let us know in comments."}], "answers": [{"tags": [], "owner": {"reputation": 196, "user_id": 3336523, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7b425660323c64ccad07e7908115ba55?s=128&d=identicon&r=PG&f=1", "display_name": "revelationnow", "link": "https://stackoverflow.com/users/3336523/revelationnow"}, "is_accepted": false, "score": 0, "last_activity_date": 1557106182, "creation_date": 1557106182, "answer_id": 55997808, "question_id": 55997698, "link": "https://stackoverflow.com/questions/55997698/regex-for-matching-words-preceding-commas-with-exceptions/55997808#55997808", "title": "RegEx for matching words preceding commas, with exceptions", "body": "<p>Code</p>\n\n<pre><code>sed -r ':a\ns/, ([a-zA-Z]*)([,\\.])/\\n##\\1\\n\\2/\nta\n' | sed -n 's/##//gp'\n</code></pre>\n\n<p>Output</p>\n\n<pre><code>randomperson\nrandomperson\nrandomperson\nrandomperson\n</code></pre>\n\n<p>Explanation:</p>\n\n<p>Start a loop    </p>\n\n<pre><code>sed -r ':a \n</code></pre>\n\n<p>Find all occurrences of ', oneword,' or ', oneword.' and replace with ##oneword, or ##oneword. The ## is a magic marker to identify the extracted names later</p>\n\n<pre><code>s/, ([a-zA-Z]*)([,\\.])/\\n##\\1\\n\\2/ \n</code></pre>\n\n<p>End loop   </p>\n\n<pre><code>ta\n</code></pre>\n\n<p>Filter lines based on ## to extract only oneword</p>\n\n<pre><code>' | sed -n 's/##//gp'\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": false, "score": 1, "last_activity_date": 1557162343, "last_edit_date": 1557162343, "creation_date": 1557119594, "answer_id": 55999130, "question_id": 55997698, "link": "https://stackoverflow.com/questions/55997698/regex-for-matching-words-preceding-commas-with-exceptions/55999130#55999130", "title": "RegEx for matching words preceding commas, with exceptions", "body": "<p>In a program</p>\n\n<pre><code>my $text = \"Also there is a reinforced stone wall, a wooden wall, a stone wall, \"\n    . \"randomperson, a lumbering earth elemental, randomperson, \"\n    . \"randomperson, randomperson.\"\n\nmy @single_words = \n    grep { split == 1 } \n    split /\\s*,|\\.|\\!|;\\s*/, \n        ($text =~ /Also there is (.*)/)[0];\n</code></pre>\n\n<p>The regex on <code>$text</code> gets text after that initial phrase, then <a href=\"https://perldoc.perl.org/functions/split.html\" rel=\"nofollow noreferrer\">split</a>\nreturns the list of strings between commas (or other punctuation), and <code>grep</code> filters out strings that have more than one word<sup>&dagger;</sup>.</p>\n\n<p>On the command line</p>\n\n<pre><code>echo \"Also there is a reinforced stone wall, a wooden wall,..., randomperson,...\"\n| perl -wnE'say for \n    grep { split  == 1 } \n    split /\\s*,|\\.|\\!|;\\s*/, (/Also there is (.*)/)[0]'\n</code></pre>\n\n<p>The same as above.</p>\n\n<p>Please show us what you have tried for additional explanations and commentary.</p>\n\n<hr>\n\n<p><sup>&dagger;</sup>&thinsp; A lone <code>split</code> uses defaults, <code>split ' ', $_</code>, where <code>' '</code> is a special pattern that splits on <code>\\s+</code> and discards leading and trailing space. But in the expression <code>split == 1</code> the <code>split</code> is in a scalar <a href=\"https://perldoc.perl.org/perldata.html#Context\" rel=\"nofollow noreferrer\">context</a> (imposed by the operator <code>==</code> which needs a single value on both sides) and so it returns the number of elements in the list, then compared against <code>1</code>.</p>\n"}], "owner": {"reputation": 31, "user_id": 11457145, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-pkNXyr2aeQ0/AAAAAAAAAAI/AAAAAAAADDM/7gEf_OvzFk8/photo.jpg?sz=128", "display_name": "Salandor", "link": "https://stackoverflow.com/users/11457145/salandor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 67, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1557295374, "creation_date": 1557104583, "last_edit_date": 1592644375, "question_id": 55997698, "link": "https://stackoverflow.com/questions/55997698/regex-for-matching-words-preceding-commas-with-exceptions", "title": "RegEx for matching words preceding commas, with exceptions", "body": "<p>The section of text I'm targeting always begins with \u201cAlso there is\u201d and ends with a period. The single names in between the commas is what I'm trying to target (i.e. &quot;randomperson&quot; in the example below. These names will always be different. It gets tricky because there\u2019s other things present that are not single word \u201cnames\u201d. Maybe I  can match everything in between the commas ONLY IF it\u2019s a single word/name, but I cant seem to figure that one out. The list of names could be much longer or even shorter, so the expression must be dynamic and not just match a set amount of names.</p>\n<h3>Targeted Text:</h3>\n<pre>\nAlso there is a reinforced stone wall, a wooden wall, a stone wall, \nrandomperson, a lumbering earth elemental, randomperson, randomperson,\nrandomperson.\n</pre>\n<p>(broken over multiple lines for readability)</p>\n<p>How do I solve this problem?</p>\n"}, {"tags": ["regex", "perl", "backreference"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1557112889, "post_id": 55996725, "comment_id": 98643594, "body": "The name of the language is Perl, not PERL. It&#39;s not an acronym"}], "answers": [{"comments": [{"owner": {"reputation": 717, "user_id": 7785387, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/eY4ka.jpg?s=128&g=1", "display_name": "tavalendo", "link": "https://stackoverflow.com/users/7785387/tavalendo"}, "edited": false, "score": 0, "creation_date": 1557094293, "post_id": 55996816, "comment_id": 98640655, "body": "I gave this case modified from similar patterns in multiple text files. It works fine with your answer. Thanks :)"}], "tags": [], "owner": {"reputation": 31386, "user_id": 9661424, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rnnvz.png?s=128&g=1", "display_name": "sticky bit", "link": "https://stackoverflow.com/users/9661424/sticky-bit"}, "is_accepted": true, "score": 3, "last_activity_date": 1557093994, "creation_date": 1557093994, "answer_id": 55996816, "question_id": 55996725, "link": "https://stackoverflow.com/questions/55996725/using-multiple-backreference-in-perl/55996816#55996816", "title": "Using multiple backreference in Perl", "body": "<p>You have to escape the <code>|</code> by prepending <code>\\</code> as they otherwise mean an alternation (<code>a|b</code> matches <code>a</code> or <code>b</code>). And for your third match you have to make the quantifier <code>*</code> non greedy by appending <code>?</code>. And you need to tweak the pattern following the third capture group a little to match a space an at least one upper character (It's not entirely clear here what the overall possibilities are as you just gave an expample without further details. It might need further adaption.)</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\n\nmy $string = \"&gt;abc|XYUXYU|KIOKEIK_7XNCU Happy, not-happy apple banana X ORIG=Came from trees NBMR 12345 OZ=1213379 NG=popZ AZ=2 BU=1\";\n$string =~ m/&gt;(abc)\\|(.*)\\|.*ORIG=(.*?)\\s[A-Z]+.*NG=(.*)\\s(.*)\\s/;\n\nprint \"First match should be 'abc'. We got: $1\\n\";\nprint \"Second match should be 'XYUXYU'. We got: $2\\n\";\nprint \"Third match should be 'Came from trees'. We got: $3\\n\";\nprint \"Fourth match should be 'popZ'. We got: $4\\n\";\nprint \"Fifth match should be 'AZ=2'. We got: $5\\n\";\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>First match should be 'abc'. We got: abc\nSecond match should be 'XYUXYU'. We got: XYUXYU\nThird match should be 'Came from trees'. We got: Came from trees\nFourth match should be 'popZ'. We got: popZ\nFifth match should be 'AZ=2'. We got: AZ=2\n</code></pre>\n"}], "owner": {"reputation": 717, "user_id": 7785387, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/eY4ka.jpg?s=128&g=1", "display_name": "tavalendo", "link": "https://stackoverflow.com/users/7785387/tavalendo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 53, "favorite_count": 0, "accepted_answer_id": 55996816, "answer_count": 1, "score": 0, "last_activity_date": 1559554476, "creation_date": 1557093056, "last_edit_date": 1559554476, "question_id": 55996725, "link": "https://stackoverflow.com/questions/55996725/using-multiple-backreference-in-perl", "title": "Using multiple backreference in Perl", "body": "<p>I am trying to use multiple backreference in Perl, to match 5 different patterns, but I am getting no match except for the first one.</p>\n\n<p>I tried the following:</p>\n\n<pre><code>my $string = \"&gt;abc|XYUXYU|KIOKEIK_7XNCU Happy, not-happy apple banana X ORIG=Came from trees NBMR 12345 OZ=1213379 NG=popZ AZ=2 BU=1\";\n$string =~ m/&gt;(abc)|(.*)|.*ORIG=(.*)[A-Z].*NG=(.*)\\s(.*)\\s/;\n\nprint \"First match should be 'abc'. We got: $1\\n\";\nprint \"Second match should be 'XYUXYU'. We got: $2\\n\";\nprint \"Third match should be 'Came from trees'. We got: $3\\n\";\nprint \"Fourth match should be 'popZ'. We got: $4\\n\";\nprint \"Fifth match should be 'AZ=2'. We got: $5\\n\";\n</code></pre>\n\n<p>I wanted as output:</p>\n\n<pre><code>First match should be 'abc'. We got: abc\nSecond match should be 'XYUXYU'. We got: XYUXYU\nThird match should be 'Came from trees'. We got: Came from trees\nFourth match should be 'popZ'. We got: popZ\nFifth match should be 'AZ=2'. We got: AZ=2\n</code></pre>\n\n<p>Any clue how to solve this in the correct way on Perl?</p>\n"}, {"tags": ["regex", "perl", "text-editor", "emeditor"], "comments": [{"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 3, "creation_date": 1557088071, "post_id": 55996096, "comment_id": 98639339, "body": "If you&#39;re not experienced, it&#39;s easier to start from the simpler tasks. You asked at least five different questions in one, some of them really complex."}, {"owner": {"reputation": 7, "user_id": 11454311, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/acff5f53e408345727aa1fd4f79c4650?s=128&d=identicon&r=PG&f=1", "display_name": "Nero", "link": "https://stackoverflow.com/users/11454311/nero"}, "reply_to_user": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1557088511, "post_id": 55996096, "comment_id": 98639444, "body": "A few years ago someone wrote me a regular expression, but unfortunately I do not have this pattern in my collection anymore. Reportedly, sometimes miracles can be done with a regular expression, but it is beyond my possibilities."}, {"owner": {"reputation": 43029, "user_id": 7505395, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4t4nq.jpg?s=128&g=1", "display_name": "Patrick Artner", "link": "https://stackoverflow.com/users/7505395/patrick-artner"}, "edited": false, "score": 1, "creation_date": 1557088712, "post_id": 55996096, "comment_id": 98639489, "body": "Questions that ask <a href=\"//meta.stackoverflow.com/q/285733\">&quot;Give me a regex that does X&quot;</a> with no attempt are off topic on Stack Overflow."}, {"owner": {"reputation": 43029, "user_id": 7505395, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4t4nq.jpg?s=128&g=1", "display_name": "Patrick Artner", "link": "https://stackoverflow.com/users/7505395/patrick-artner"}, "edited": false, "score": 2, "creation_date": 1557088756, "post_id": 55996096, "comment_id": 98639500, "body": "you can coipy your data into an online regex tool (f.e. <a href=\"http://regex101.com\" rel=\"nofollow noreferrer\">regex101.com</a> ) and play around until you get a regex that matches what you need."}, {"owner": {"reputation": 7, "user_id": 11454311, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/acff5f53e408345727aa1fd4f79c4650?s=128&d=identicon&r=PG&f=1", "display_name": "Nero", "link": "https://stackoverflow.com/users/11454311/nero"}, "edited": false, "score": 0, "creation_date": 1557089518, "post_id": 55996096, "comment_id": 98639677, "body": "I&#39;ve tested a lot of different regular expressions for a long time. It generated too many errors. I can try endlessly and waste a lot of time in vain, but nothing good will come of it. I asked a few people, but it&#39;s just as complicated for other users, just like for me, so refuse further help. Currently, I can calculate the number of sentences in simple sentences. Currently, the problem is numbers (with a dot) and links (url) that are incorrectly identified as sentences."}, {"owner": {"reputation": 7, "user_id": 11454311, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/acff5f53e408345727aa1fd4f79c4650?s=128&d=identicon&r=PG&f=1", "display_name": "Nero", "link": "https://stackoverflow.com/users/11454311/nero"}, "edited": false, "score": 0, "creation_date": 1557130535, "post_id": 55996096, "comment_id": 98648838, "body": "How can I explain how it is not possible to color the text and indicate which one would identify the first sentence and each subsequent one?&quot;31. Jemu wydawa\u0142o si\u0119, jakby to ona by\u0142a bez skazy. Ale mia\u0142a jedn\u0105 wad\u0119 - szuka\u0142a wad w sobie... Przez 24/7. 63 lat temu by\u0142a kiedy\u015b asteroida.&quot; There should be 4 Sentences. Regex Enabled &amp; Enabled Count Matches............ Regex 1 Count matches Found (Wrong!)"}, {"owner": {"reputation": 7, "user_id": 11454311, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/acff5f53e408345727aa1fd4f79c4650?s=128&d=identicon&r=PG&f=1", "display_name": "Nero", "link": "https://stackoverflow.com/users/11454311/nero"}, "edited": false, "score": 0, "creation_date": 1557131164, "post_id": 55996096, "comment_id": 98649128, "body": "Here the sentences are colored. See: <a href=\"https://postimg.cc/34VzkHsF\" rel=\"nofollow noreferrer\">postimg.cc/34VzkHsF</a>"}], "answers": [{"comments": [{"owner": {"reputation": 7, "user_id": 11454311, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/acff5f53e408345727aa1fd4f79c4650?s=128&d=identicon&r=PG&f=1", "display_name": "Nero", "link": "https://stackoverflow.com/users/11454311/nero"}, "edited": false, "score": 0, "creation_date": 1557099146, "post_id": 55997056, "comment_id": 98641491, "body": "Fantastic, thank you. Regex ignores URLs (very good). Regex finds the sentences (very good). Only still remains to solve the issues of numbering some sentences (only the beginning of the line) Screenshot text: <a href=\"https://postimg.cc/TywFXf2z\" rel=\"nofollow noreferrer\">postimg.cc/TywFXf2z</a>"}, {"owner": {"reputation": 1039, "user_id": 4386643, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b1407b4e2426e7d10d76859de4a9c2a5?s=128&d=identicon&r=PG&f=1", "display_name": "MakotoE", "link": "https://stackoverflow.com/users/4386643/makotoe"}, "reply_to_user": {"reputation": 7, "user_id": 11454311, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/acff5f53e408345727aa1fd4f79c4650?s=128&d=identicon&r=PG&f=1", "display_name": "Nero", "link": "https://stackoverflow.com/users/11454311/nero"}, "edited": false, "score": 0, "creation_date": 1557102356, "post_id": 55997056, "comment_id": 98641977, "body": "@Nero I&#39;m not sure what you mean. Do you want to match numbered sentences, or not match numbered sentences? Or did you want to match the sentence but not the number and dot?"}, {"owner": {"reputation": 7, "user_id": 11454311, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/acff5f53e408345727aa1fd4f79c4650?s=128&d=identicon&r=PG&f=1", "display_name": "Nero", "link": "https://stackoverflow.com/users/11454311/nero"}, "edited": false, "score": 0, "creation_date": 1557106705, "post_id": 55997056, "comment_id": 98642608, "body": "It should be: Count Match Sentences: 4 Of course, this is a special numbering in the text at the beginning of the new line - my authorship, to separate (indicate the separation) some texts in artulas, some prose, essays, to unnecessarily add empty lines or other separators. Of course, there is no numbering everywhere, but many places in the text - but it must exist. In this particular case (only on a line begining), consider one sentence. EXAMPLE 31. Jemu wydawa\u0142o si\u0119, jakby to ona by\u0142a bez skazy. Ale mia\u0142a jedn\u0105 wad\u0119 - szuka\u0142a wad w sobie... Przez 24/7. 63 lat temu by\u0142a kiedy\u015b asteroida."}, {"owner": {"reputation": 1039, "user_id": 4386643, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b1407b4e2426e7d10d76859de4a9c2a5?s=128&d=identicon&r=PG&f=1", "display_name": "MakotoE", "link": "https://stackoverflow.com/users/4386643/makotoe"}, "reply_to_user": {"reputation": 7, "user_id": 11454311, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/acff5f53e408345727aa1fd4f79c4650?s=128&d=identicon&r=PG&f=1", "display_name": "Nero", "link": "https://stackoverflow.com/users/11454311/nero"}, "edited": false, "score": 0, "creation_date": 1557116338, "post_id": 55997056, "comment_id": 98644195, "body": "@Nero Sorry I still do not understand you. But maybe this works? <code>[^\\d\\.\\s].*[.!?]$</code>"}, {"owner": {"reputation": 1039, "user_id": 4386643, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b1407b4e2426e7d10d76859de4a9c2a5?s=128&d=identicon&r=PG&f=1", "display_name": "MakotoE", "link": "https://stackoverflow.com/users/4386643/makotoe"}, "reply_to_user": {"reputation": 7, "user_id": 11454311, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/acff5f53e408345727aa1fd4f79c4650?s=128&d=identicon&r=PG&f=1", "display_name": "Nero", "link": "https://stackoverflow.com/users/11454311/nero"}, "edited": false, "score": 0, "creation_date": 1557179795, "post_id": 55997056, "comment_id": 98670728, "body": "@Nero Ah okay, your screenshot in the other comment helps a lot. This will match the selections in that screenshot: <code>(^\\d+\\..*?|.*?)(\\.\\.\\.|[\\.?!])</code>. Basically, a sentence ends with a &quot;.?!&quot; OR a sentence begins a line with a number + &quot;.&quot; and ends with &quot;.?!&quot;"}, {"owner": {"reputation": 1039, "user_id": 4386643, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b1407b4e2426e7d10d76859de4a9c2a5?s=128&d=identicon&r=PG&f=1", "display_name": "MakotoE", "link": "https://stackoverflow.com/users/4386643/makotoe"}, "reply_to_user": {"reputation": 7, "user_id": 11454311, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/acff5f53e408345727aa1fd4f79c4650?s=128&d=identicon&r=PG&f=1", "display_name": "Nero", "link": "https://stackoverflow.com/users/11454311/nero"}, "edited": false, "score": 0, "creation_date": 1557180768, "post_id": 55997056, "comment_id": 98670987, "body": "@Nero This works better: <code>(^\\d+\\..*?|[^\\s].*?)(\\.\\.\\.|[\\.?!])</code> to ignore spaces before the selection."}, {"owner": {"reputation": 7, "user_id": 11454311, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/acff5f53e408345727aa1fd4f79c4650?s=128&d=identicon&r=PG&f=1", "display_name": "Nero", "link": "https://stackoverflow.com/users/11454311/nero"}, "edited": false, "score": 0, "creation_date": 1557222166, "post_id": 55997056, "comment_id": 98683335, "body": "The sentence ends with a dot, exclamation mark or question mark. Yes, now it&#39;s almost okay, but you&#39;ve forgotten at the beginning of my question that it has to ignore characters in URLs. See new screenshot: <a href=\"https://postimg.cc/hzzVcNh2\" rel=\"nofollow noreferrer\">postimg.cc/hzzVcNh2</a>"}, {"owner": {"reputation": 1039, "user_id": 4386643, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b1407b4e2426e7d10d76859de4a9c2a5?s=128&d=identicon&r=PG&f=1", "display_name": "MakotoE", "link": "https://stackoverflow.com/users/4386643/makotoe"}, "reply_to_user": {"reputation": 7, "user_id": 11454311, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/acff5f53e408345727aa1fd4f79c4650?s=128&d=identicon&r=PG&f=1", "display_name": "Nero", "link": "https://stackoverflow.com/users/11454311/nero"}, "edited": false, "score": 0, "creation_date": 1557274171, "post_id": 55997056, "comment_id": 98707133, "body": "@Nero Ok, how about this: <code>(\\S+\\.(com|net|org|edu|gov)(\\&#47;\\S+)?)|((^\\d+\\..*?|[^\\s].*?)(\\&zwnj;&#8203;.\\.\\.|[\\.?!]))</code> I copied it from <a href=\"https://stackoverflow.com/questions/1141848/regex-to-match-url\">stackoverflow.com/questions/1141848/regex-to-match-url</a>. It searches for URLs first, then matches sentences."}, {"owner": {"reputation": 7, "user_id": 11454311, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/acff5f53e408345727aa1fd4f79c4650?s=128&d=identicon&r=PG&f=1", "display_name": "Nero", "link": "https://stackoverflow.com/users/11454311/nero"}, "edited": false, "score": 0, "creation_date": 1557283422, "post_id": 55997056, "comment_id": 98708683, "body": "I&#39;ve tested. Unfortunately, this pattern is incorrect because it matches the links as sentences."}], "tags": [], "owner": {"reputation": 1039, "user_id": 4386643, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b1407b4e2426e7d10d76859de4a9c2a5?s=128&d=identicon&r=PG&f=1", "display_name": "MakotoE", "link": "https://stackoverflow.com/users/4386643/makotoe"}, "is_accepted": false, "score": 0, "last_activity_date": 1557096291, "creation_date": 1557096291, "answer_id": 55997056, "question_id": 55996096, "link": "https://stackoverflow.com/questions/55996096/find-sentences-in-the-text-according-to-a-specific-pattern/55997056#55997056", "title": "Find sentences in the text, according to a specific pattern", "body": "<pre><code>^(?!\\d+\\.).*[.!?]$\n</code></pre>\n\n<p>This fulfills most of the requirements.</p>\n\n<p>Matches:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>Gdy patrz\u0119 na \u015bwiat, to jest tak pi\u0119kne i straszne w tym samym czasie!\n</code></pre>\n\n<p>Doesn't match:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>156. abc.\n</code></pre>\n\n<p>Step 3 and 4 are impossible to test for in regex.</p>\n"}], "owner": {"reputation": 7, "user_id": 11454311, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/acff5f53e408345727aa1fd4f79c4650?s=128&d=identicon&r=PG&f=1", "display_name": "Nero", "link": "https://stackoverflow.com/users/11454311/nero"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 90, "favorite_count": 0, "answer_count": 1, "score": -4, "last_activity_date": 1557096291, "creation_date": 1557087899, "question_id": 55996096, "link": "https://stackoverflow.com/questions/55996096/find-sentences-in-the-text-according-to-a-specific-pattern", "title": "Find sentences in the text, according to a specific pattern", "body": "<p>I am not experienced in patterns, so I would ask you not to remove the post. I try to precisely determine what my problem is and ask for help in finding sentences, according to my formula.</p>\n\n<p>Step1:</p>\n\n<p>Search sentences that allowed at end .!?\nExample sentence:\n!\nTEXT</p>\n\n<blockquote>\n  <p>Gdy patrz\u0119 na \u015bwiat, to jest tak pi\u0119kne i straszne w tym samym czasie!</p>\n</blockquote>\n\n<p>-or-\n.\nTEXT</p>\n\n<blockquote>\n  <p>Gdy patrz\u0119 na \u015bwiat, to jest tak pi\u0119kne i straszne w tym samym czasie.</p>\n</blockquote>\n\n<p>-or-\n?\nTEXT</p>\n\n<blockquote>\n  <p>Gdy patrz\u0119 na \u015bwiat, to jest tak pi\u0119kne i straszne w tym samym czasie?</p>\n</blockquote>\n\n<p>Step2:\nSearch sentences NOT allowed at end .\nThe beginning of the Line:</p>\n\n<blockquote>\n  <p>0.</p>\n</blockquote>\n\n<p>(ANY NUMBER + DOT)</p>\n\n<blockquote>\n  <p>5.</p>\n</blockquote>\n\n<p>(ANY NUMBER + DOT)</p>\n\n<blockquote>\n  <p>156.</p>\n</blockquote>\n\n<p>(ANY NUMBER + DOT)\nOnly at the beginning of the line, everywhere else is acceptable.</p>\n\n<p>Step3:\nAll languages of the world are allowed, except for Russian.</p>\n\n<p>Step4:\nAdd a search exception for any links (URLs). Completely ignore.</p>\n\n<p>Step5:</p>\n\n<p>Allow sentence detection when another sentence ends with \"three dots\", \"three exclamation marks\", \"three question marks\" and the next begins with a capital letter:\nExample:\nTEXT</p>\n\n<blockquote>\n  <p>Jestem w innym \u015bwiecie... W \u015bwiecie o innej kulturze, j\u0119zyku,\n  tradycjach, architekturze, przyrodzie, kuchni, pogodzie.</p>\n</blockquote>\n\n<p>TEXT</p>\n\n<blockquote>\n  <p>Jestem w innym \u015bwiecie!!! W \u015bwiecie o innej kulturze, j\u0119zyku, tradycjach, >architekturze, przyrodzie, kuchni, pogodzie.</p>\n</blockquote>\n\n<p>TEXT</p>\n\n<blockquote>\n  <p>Jestem w innym \u015bwiecie??? W \u015bwiecie o innej kulturze, j\u0119zyku, tradycjach, architekturze, przyrodzie, kuchni, pogodzie.</p>\n</blockquote>\n"}, {"tags": ["perl", "undefined-behavior", "raku", "sequence-points"], "comments": [{"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 1, "creation_date": 1557077299, "post_id": 55994128, "comment_id": 98636574, "body": "<i>&quot;the return value of an increment or decrement operation is value of the variable before the operation</i>&quot; Yes, but the value of <code>$i</code> is used on both sides of the equal sign, so the result that is put into the array may be the value before the operation, but the value of <code>$i</code> in the indexing operation could be the value after? See also: <a href=\"https://stackoverflow.com/q/43546839/2173773\">Perl increment operator</a>"}, {"owner": {"reputation": 4644, "user_id": 1431720, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/f5a1388d4d3b2bf03b11bb5658c68c29?s=128&d=identicon&r=PG", "display_name": "Robert", "link": "https://stackoverflow.com/users/1431720/robert"}, "edited": false, "score": 2, "creation_date": 1557078080, "post_id": 55994128, "comment_id": 98636798, "body": "Is this for the obfuscated Perl contest?"}, {"owner": {"reputation": 101, "user_id": 11453597, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Os9PA.jpg?s=128&g=1", "display_name": "David Hoekman", "link": "https://stackoverflow.com/users/11453597/david-hoekman"}, "edited": false, "score": 0, "creation_date": 1557082856, "post_id": 55994128, "comment_id": 98638024, "body": "It&#39;s from rosettacode.org, people have been know to showboat..."}, {"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "reply_to_user": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1557085920, "post_id": 55994128, "comment_id": 98638778, "body": "@H&#229;konH&#230;gland you should make that an answer.  the only problem here is that perl5 evaluates the right side of a scalar assignment first, while perl6 seems to do the left."}], "answers": [{"tags": [], "owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "is_accepted": false, "score": 0, "last_activity_date": 1557089597, "creation_date": 1557089597, "answer_id": 55996322, "question_id": 55994128, "link": "https://stackoverflow.com/questions/55994128/post-increment-and-variable-re-use-in-a-single-statement-perl-5-vs-perl-6/55996322#55996322", "title": "Post-increment and variable re-use in a single statement, Perl 5 vs Perl 6", "body": "<p>It seems that the difference between the Perl 5 and Perl 6 codes is that the Perl 5 code uses the updated <code>$i</code> earlier than Perl 6. For example, the following Perl 5 code:</p>\n\n<pre><code>my $n = 3;\nmy $i = 2;\nmy $x = 5/2;\nmy $y = -1;\nmy @sq;\n$sq[ ($i % $n ? $y-- : $y++) % $n] [ ($i % $n ? $x++ : $x) % $n ] = $i++;\nsay \"x = $x, y = $y\";\n</code></pre>\n\n<p>prints:</p>\n\n<pre><code>x = 2.5, y = 0\n</code></pre>\n\n<p>whereas the same Perl 6 code:</p>\n\n<pre><code>my $n = 3;\nmy $i = 2;\nmy $x = 5/2;\nmy $y = -1;\nmy @a;\n@sq[ ($i % $n ?? $y-- !! $y++) % $n][ ($i % $n ?? $x++ !! $x) % $n ] = $i++;\nsay \"x = $x, y = $y\";\n</code></pre>\n\n<p>prints</p>\n\n<pre><code>x = 3.5, y = -2\n</code></pre>\n\n<p>so the Perl 5 code uses the updated value of <code>$i++</code> on the right hand side (i.e. <code>$i = 3</code> to compute <code>$i % $n</code> on the left hand side, whereas Perl 6 uses the old value <code>$i = 2</code> to compute the indices on the left hand side of the equation.</p>\n"}, {"comments": [{"owner": {"reputation": 25859, "user_id": 1077672, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f00f8b55b0ade2c4748e94fb73a40662?s=128&d=identicon&r=PG", "display_name": "raiph", "link": "https://stackoverflow.com/users/1077672/raiph"}, "edited": false, "score": 0, "creation_date": 1557092183, "post_id": 55996467, "comment_id": 98640246, "body": "Could static analysis of code spot the potential for undefined behavior due to this? (Where &quot;this&quot; is the combination of multiple uses of a variable in a single statement where one of the uses is either an explicit modification of it or a method call -- because a method call might modify a value.)"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 25859, "user_id": 1077672, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f00f8b55b0ade2c4748e94fb73a40662?s=128&d=identicon&r=PG", "display_name": "raiph", "link": "https://stackoverflow.com/users/1077672/raiph"}, "edited": false, "score": 1, "creation_date": 1557113909, "post_id": 55996467, "comment_id": 98643791, "body": "@raiph, Obviously, it could catch some cases. There might even be a <code>perlcritic</code> rule that does just that. But it couldn&#39;t catch all cases either. For example, there&#39;s no way to know if <code>$_[0]</code> and <code>$_[1]</code> will be aliased to the same var or not in <code>sub { ++$_[0] + --$_[1] }</code>. That&#39;s why it&#39;s undefined behaviour rather than a compile-time error."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1557114691, "post_id": 55996467, "comment_id": 98643916, "body": "Re &quot;<i>Both Perl 5 and Perl 6 do not promise defined behavior if you modify and read the same variable within a single statement.</i>&quot;, Not quite. Perl5 actually does more or less document that the RHS of an assignment will be evaluated before the LHS. e.g. <code>local $x = f($x);</code> and <code>my $x = f($x);</code> are valid. It&#39;s a grey area because while specific cases are documented as valid, it&#39;s not clear to what extent this is true. But there is a basis in the documentation, and all versions and builds of Perl5 consistently execute the RHS of assignments separately and before their LHS."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1557118705, "post_id": 55996467, "comment_id": 98644694, "body": "In short, you <i>can</i> rely on Perl5&#39;s behaviour here. (You shouldn&#39;t though; it&#39;s hard to read.)"}], "tags": [], "owner": {"reputation": 12324, "user_id": 14132, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/579c95ecf03cf9f61e5e6637e57feebe?s=128&d=identicon&r=PG", "display_name": "moritz", "link": "https://stackoverflow.com/users/14132/moritz"}, "is_accepted": false, "score": 9, "last_activity_date": 1557090620, "creation_date": 1557090620, "answer_id": 55996467, "question_id": 55994128, "link": "https://stackoverflow.com/questions/55994128/post-increment-and-variable-re-use-in-a-single-statement-perl-5-vs-perl-6/55996467#55996467", "title": "Post-increment and variable re-use in a single statement, Perl 5 vs Perl 6", "body": "<p>Both Perl 5 and Perl 6 do not promise defined behavior if you modify and read the same variable within a single statement.</p>\n\n<p>The Perl 6 synopses talk about <a href=\"https://github.com/perl6/specs/blob/master/S03-operators.pod#Sequence-points\" rel=\"noreferrer\">sequence points in the context of parallel execution</a>, but I believe they also apply to the read+write problem within statements.</p>\n\n<p>But in general, you simply cannot rely on this in either language.</p>\n"}], "owner": {"reputation": 101, "user_id": 11453597, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Os9PA.jpg?s=128&g=1", "display_name": "David Hoekman", "link": "https://stackoverflow.com/users/11453597/david-hoekman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 268, "favorite_count": 0, "answer_count": 2, "score": 10, "last_activity_date": 1574835388, "creation_date": 1557074148, "last_edit_date": 1574835388, "question_id": 55994128, "link": "https://stackoverflow.com/questions/55994128/post-increment-and-variable-re-use-in-a-single-statement-perl-5-vs-perl-6", "title": "Post-increment and variable re-use in a single statement, Perl 5 vs Perl 6", "body": "<p>A line of code that I naively thought would translate fairly literally between Perl 6 and Perl 5 in fact did not, due to differences in how a post-increment variable is being handled.</p>\n\n<p>This Perl 6 yields the desired result, a magic square: [[8, 1, 6], [3, 5, 7], [4, 9, 2]]</p>\n\n<pre><code>my @sq; my $n = 3; my $i = 1; my $x = $n/2; my $y = 0;\n@sq[($i%$n ?? $y-- !! $y++) % $n][($i%$n ?? $x++ !! $x) % $n] = $i++ for 0..$n**2 - 1;\nsay join ' ', $_ for @sq;\n</code></pre>\n\n<p>The 'same' code in Perl 5 does not: [[8, 1, 3], [9, 5, 7], [4, 6, 2]]</p>\n\n<pre><code>$n = 3; $i = 1; $x = $n/2; $y = 0;\n$sq[($i%$n ? $y-- : $y++) % $n][($i%$n ? $x++ : $x) % $n] = $i++ for 0..$n**2 - 1;\nsay join ' ', @$_ for @sq;\n</code></pre>\n\n<p>Both work correctly if the statement is split up, and all the increments and decrements are done after the assignment, e.g. in Perl 5:</p>\n\n<pre><code>for (0 .. $n**2 - 1) {\n    $sq[ $y%$n ][ $x%$n ] = $i;\n    $i%$n ? $y-- : $y++;\n    $x++ if $i%$n;\n    $i++;\n}\n</code></pre>\n\n<p>If the return value of an increment or decrement operation is value of the variable <em>before</em> the operation, then Perl 5 would be seem to be in the wrong.  But experimenting with the code showed that the result of the <code>$i%$n</code> conditions was the source of the difference, so seemingly Perl 6 may be relying upon the value of <code>$i</code> in a way that is not strictly guaranteed.</p>\n\n<p>Thus I should have been more surprised that Perl 6 worked, than that Perl 5 didn't?</p>\n"}, {"tags": ["linux", "perl"], "comments": [{"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 0, "creation_date": 1557057555, "post_id": 55991449, "comment_id": 98631150, "body": "If, as it appears, this file contains JSON data, you should be using a module like <a href=\"https://metacpan.org/pod/JSON::XS\" rel=\"nofollow noreferrer\">JSON::XS</a> to parse its contents (Perhaps read with <a href=\"https://metacpan.org/pod/File::Slurper\" rel=\"nofollow noreferrer\">File::Slurper</a>) and manipulate the resulting data structure, instead of trying to use regular expressions on individual lines."}], "answers": [{"tags": [], "owner": {"reputation": 3364, "user_id": 693294, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d5935d56f077497b60c12cf86b9d2e1?s=128&d=identicon&r=PG", "display_name": "Gilbert", "link": "https://stackoverflow.com/users/693294/gilbert"}, "is_accepted": false, "score": 2, "last_activity_date": 1557056242, "creation_date": 1557056242, "answer_id": 55991519, "question_id": 55991449, "link": "https://stackoverflow.com/questions/55991449/perl-script-adds-extra-curly-brackets/55991519#55991519", "title": "perl script adds extra curly brackets", "body": "<p>Having some sample input and output would help but let me take a guess. Try truncating the file by the seek:</p>\n\n<p><code>truncate $a,0;\nseek $a,0,0;</code></p>\n\n<p>Without the truncate you will be overwriting what was there before. This works if you write more information than you read but not so good if you write less than you read. </p>\n"}], "owner": {"reputation": 1, "user_id": 4290934, "user_type": "registered", "profile_image": "https://graph.facebook.com/100001162744127/picture?type=large", "display_name": "Rushabh Kamdar", "link": "https://stackoverflow.com/users/4290934/rushabh-kamdar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 38, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1557056242, "creation_date": 1557055745, "last_edit_date": 1557055901, "question_id": 55991449, "link": "https://stackoverflow.com/questions/55991449/perl-script-adds-extra-curly-brackets", "title": "perl script adds extra curly brackets", "body": "<p>Following script, I'm using which performs everything well except it adds three extra curly brackets at the end of file.</p>\n\n<p><code>abc.jso</code> contains many lines where few lines have only opening/closing curly brackets (In case, this information helps)</p>\n\n<p>I tried by making <code>print $a \" $var\";</code> instead of <code>print $a \"$var\";</code>. In short I added space in front of this <code>print</code> &amp; it worked.</p>\n\n<pre><code>open (my $a,'+&lt;',\"abc.jso\") or die $!;\nmy @lines=&lt;$a&gt;;\nseek $a,0,0;\n    while (@lines) {\n        my $var = shift @lines;\n        if ($var=~ /^\\s*\\\"(netlist|filelist)\\\" : \\\".*$blk.*\\\",/) {\n            print $a \"            \\\"netlist\\\" : \\\"/t98/pnr/work/$blk\".\"_rk/run/dc/$blk\".\"_post_dft.v\\\",\\n\";\n            $count++;\n            print \"Netlist got replaced\\n\";\n        }\n        elsif ($var=~ /^\\s*\\\"spf\\\" : \\\".*$blk.*\\\"/) {\n            print $a \"            \\\"spf\\\" : \\\"/t98/scan/atpg/t98_1.0/spf/$blk\".\".scan_compress.spf\\\"\\n\";\n            $count++;\n            print \"SPF got replaced\\n\";\n        }\n        else {\n            print $a \"$var\";\n        }\n    }\nclose($a);\n</code></pre>\n\n<p>Can someone explain, why it is happening? Is there any such corner case of text handling that I'm not aware of?</p>\n"}, {"tags": ["perl", "applescript"], "answers": [{"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 1, "last_activity_date": 1557040913, "last_edit_date": 1557040913, "creation_date": 1557040463, "answer_id": 55989687, "question_id": 55989456, "link": "https://stackoverflow.com/questions/55989456/perl-script-for-calling-macapplescript-perl-module/55989687#55989687", "title": "Perl Script (for calling Mac::AppleScript Perl module)", "body": "<p>Problems:</p>\n\n<ul>\n<li>You have an unescaped <code>\"</code> in your double-quoted string literal.</li>\n<li>You use variables you never declared or initialized.</li>\n<li>You have a stray <code>,\"n\"</code> in your code.</li>\n<li>Your code suffers from <a href=\"https://en.wikipedia.org/wiki/Code_injection\" rel=\"nofollow noreferrer\">code injection</a> bugs.</li>\n<li>The error message is found in <code>$@</code>, not <code>$!</code>.</li>\n</ul>\n\n<p>Fixed:</p>\n\n<pre><code>sub text_to_as_lit { '\"'.( $_[0] =~ s/([\\\\\"])/\\\\$1/rg ).'\"' }  #'\n\nmy ($script, @args) = @ARGV;\n\nmy $rtn = RunAppleScript(sprintf(\n   \"return run script alias ((POSIX file %s) as text) with parameters {%s}\",\n   text_to_as_lit($script),\n   ( join ',', map text_to_as_lit($_), @args ),\n))\n    or die(\"AppleScript Error: $@\");\n</code></pre>\n\n<p>Untested.</p>\n"}], "owner": {"reputation": 1, "user_id": 11454330, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-jrb6T1b_enQ/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcqYgODRvqQ3zTY5UGK45rVlySVAg/mo/photo.jpg?sz=128", "display_name": "Jerry D", "link": "https://stackoverflow.com/users/11454330/jerry-d"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 36, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1557040913, "creation_date": 1557038161, "question_id": 55989456, "link": "https://stackoverflow.com/questions/55989456/perl-script-for-calling-macapplescript-perl-module", "title": "Perl Script (for calling Mac::AppleScript Perl module)", "body": "<p>I'm setting up some automation using shell and applescript scripting. Several of my modules require passing several params into the AppleScript. Although there are a few ways of doing so, a bit of research lead me to the \"Mac::AppleScript Perl module\" and it looks really promising. However it requires a short .pl script in /usr/local/bin. The only example of it I found has two syntax errors and I have absolutely no experience at all in Perl.</p>\n\n<p>I've tried guessing at what might be throwing the errors based on what I would use in the languages I've worked with but even though I can recognize the variables not expanding in a few spots, my attempts at correcting it results in further errors and I've been hacking at it for hours. Can someone please take a look and tell me what might be the syntax issues I can fix?</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse Mac::AppleScript qw/ RunAppleScript /;\n\nif( $#ARGV = 0) ? '\"'.join('\",\"',@ARGV).'\"' : \"\";\nmy $rtn = RunAppleScript( \"return run script alias ((POSIX file \"\"\n    .$script.'\") as text) with parameters {'.$args.'}' ),\"n\"\n        or die \"AppleScript Error: $!\";\n\n$rtn =~ s/(^\"|\"$)//g;\nprint $rtn,\"n\";\n</code></pre>\n"}, {"tags": ["perl", "ssh", "ftp", "sftp", "openssh"], "comments": [{"owner": {"reputation": 144837, "user_id": 850848, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/c287735beca76400cb9b6d08bf591cb9?s=128&d=identicon&r=PG", "display_name": "Martin Prikryl", "link": "https://stackoverflow.com/users/850848/martin-prikryl"}, "edited": false, "score": 0, "creation_date": 1557040859, "post_id": 55989117, "comment_id": 98627660, "body": "Show us output of <code>sftp -vvv -oPort=10022 -oIdentityFile=path&#47;sftp_download user@downloads-server</code>"}, {"owner": {"reputation": 899, "user_id": 632169, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/9ed201fb85017ee7c4c0f7882e01f42d?s=128&d=identicon&r=PG", "display_name": "Mike", "link": "https://stackoverflow.com/users/632169/mike"}, "reply_to_user": {"reputation": 144837, "user_id": 850848, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/c287735beca76400cb9b6d08bf591cb9?s=128&d=identicon&r=PG", "display_name": "Martin Prikryl", "link": "https://stackoverflow.com/users/850848/martin-prikryl"}, "edited": false, "score": 0, "creation_date": 1557125316, "post_id": 55989117, "comment_id": 98646636, "body": "I am checking with IT if I allowed to provide this information. I suspect that it may be related to multiple connection failing attempts with password. Is there a way to force using only key authentication?"}], "answers": [{"tags": [], "owner": {"reputation": 899, "user_id": 632169, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/9ed201fb85017ee7c4c0f7882e01f42d?s=128&d=identicon&r=PG", "display_name": "Mike", "link": "https://stackoverflow.com/users/632169/mike"}, "is_accepted": false, "score": 0, "last_activity_date": 1557209256, "creation_date": 1557209256, "answer_id": 56016447, "question_id": 55989117, "link": "https://stackoverflow.com/questions/55989117/sftp-connection-failure-with-perl-netsftp-module/56016447#56016447", "title": "SFTP connection failure with Perl &quot;Net::SFTP&quot; module", "body": "<p>The code to disable password authentication (only authentication key) is:</p>\n\n<pre><code>ssh_args =&gt; {\n  user    =&gt; $user,\n  options =&gt; [ 'PasswordAuthentication no' ],\n  identity_files =&gt; [ 'path/sftp_download'],\n  port     =&gt; $port,\n  protocol =&gt;'2,1',\n  debug    =&gt; 1,\n}\n</code></pre>\n"}], "owner": {"reputation": 899, "user_id": 632169, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/9ed201fb85017ee7c4c0f7882e01f42d?s=128&d=identicon&r=PG", "display_name": "Mike", "link": "https://stackoverflow.com/users/632169/mike"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1047, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1557209256, "creation_date": 1557034409, "last_edit_date": 1557130020, "question_id": 55989117, "link": "https://stackoverflow.com/questions/55989117/sftp-connection-failure-with-perl-netsftp-module", "title": "SFTP connection failure with Perl &quot;Net::SFTP&quot; module", "body": "<p>I am trying to connect to SFTP server using Perl but I get the following connection error: <code>Permission denied at /app/perl-5.24.3/lib/site_perl/5.24.3/Net/SFTP.pm line 63.</code></p>\n\n<p>My connection code 'sftp_test2.pl':</p>\n\n<pre><code>use strict;\nuse warnings;\n\nuse Net::SFTP;\n\nmy $server   = 'downloads-server';\nmy $user     = 'user';\nmy $port     = \"10022\";\nmy $password = '';\n\nmy %args = (\n     user =&gt; \"$user\",\n     port =&gt; \"$port\",\n     ssh_args =&gt; {\n         user =&gt; \"$user\",\n         identity_files =&gt; [ 'path/sftp_download'],\n         port =&gt; \"$port\",\n         protocol=&gt;'2,1',\n         debug =&gt; 1,\n     }\n);\n\nmy $sftp=Net::SFTP-&gt;new($server, %args) or die \"could not open connection to $server\\n\";\n</code></pre>\n\n<p>execution:</p>\n\n<pre><code>$&gt;perl sftp_test2.pl\nReading configuration data path/home/.ssh/config\nReading configuration data /etc/ssh_config\nConnecting to downloads-server, port 10022.\nRemote version string: SSH-2.0-CrushFTPSSHD\nRemote protocol version 2.0, remote software version CrushFTPSSHD\nNet::SSH::Perl Version 2.14, protocol version 2.0.\nNo compat match: CrushFTPSSHD.\nConnection established.\nSent key-exchange init (KEXINIT), waiting for response.\nUsing diffie-hellman-group-exchange-sha256 for key exchange\nHost key algorithm: ssh-rsa\nAlgorithms, c-&gt;s: aes256-ctr hmac-sha2-512-etm@openssh.com none\nAlgorithms, s-&gt;c: aes256-ctr hmac-sha2-512-etm@openssh.com none\nEntering Diffie-Hellman Group Exchange.\nSSH2_MSG_KEX_DH_GEX_REQUEST(2048&lt;4096&lt;8192) sent\nSent DH Group Exchange request, waiting for reply.\nReceived 4096 bit DH Group Exchange reply.\nGenerating new Diffie-Hellman keys.\nEntering Diffie-Hellman key exchange.\nSent DH public key, waiting for reply.\nReceived host key, type 'ssh-rsa'.\nHost 'downloads-server' is known and matches the host key.\nVerifying server signature.\nSend NEWKEYS.\nWaiting for NEWKEYS message.\nEnabling encryption/MAC/compression.\nSending request for user-authentication service.\nService accepted: ssh-userauth.\nTrying empty user-authentication request.\nAuthentication methods that can continue: password,publickey,keyboard-interactive.\nNext method to try is password.\nTrying password authentication.\nWill not query passphrase in batch mode.\nAuthentication methods that can continue: password,publickey,keyboard-interactive.\nNext method to try is password.\nTrying password authentication.\nWill not query passphrase in batch mode.\nAuthentication methods that can continue: password,publickey,keyboard-interactive.\nNext method to try is password.\nTrying password authentication.\nWill not query passphrase in batch mode.\nAuthentication methods that can continue: password,publickey,keyboard-interactive.\nNext method to try is password.\nNext method to try is publickey.\nPublickey: testing agent key 'my-server'\nAuthentication methods that can continue: password,publickey,keyboard-interactive.\nNext method to try is password.\nNext method to try is publickey.\nPublickey: testing agent key 'path/home/.ssh/id_rsa'\nAuthentication methods that can continue: password,publickey,keyboard-interactive.\nNext method to try is password.\nNext method to try is publickey.\nTrying pubkey authentication with key file 'path/sftp_download'\nAuthentication methods that can continue: password,publickey,keyboard-interactive.\nNext method to try is password.\nNext method to try is publickey.\nPermission denied at /app/perl-5.24.3/lib/site_perl/5.24.3/Net/SFTP.pm line 63.\n</code></pre>\n\n<p>I thought that it is related to my private key, but I can connect via unix command:</p>\n\n<blockquote>\n  <p>sftp -oPort=10022 -oIdentityFile=path/sftp_download user@downloads-server\n  <br>Connecting to downloads-server...\n  <br>sftp> </p>\n</blockquote>\n\n<p>I tried to find a solution in many articles and also tried few code variations, but without a success.</p>\n\n<p>Am I doing something wrong?\nIs it a known bug? any workaround?\nHow can I debug it to find the reason (I am not very well familiar with SSH/FTP).</p>\n\n<p><strong>EDIT</strong>:\nI suspected that it may be related to multiple connection failing attempts with password so I removed the password authentication from \"%AUTH_MAP\" in the file \"app/perl-5.24.3/lib/site_perl/5.24.3/x86_64-linux/Net/SSH/Perl/AuthMgr.pm\" and it connected as expected!\nIs there a way to force using only/first key authentication?</p>\n\n<p>Thanks in advance!\nMike</p>\n"}, {"tags": ["excel", "vba", "perl"], "comments": [{"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1557048504, "post_id": 55988556, "comment_id": 98629072, "body": "Seems like you can add VBA macros with the <a href=\"https://metacpan.org/pod/Excel::Writer::XLSX#add_vba_project(-&#39;vbaProject.bin&#39;-)\" rel=\"nofollow noreferrer\">add_vba_project()</a> function."}, {"owner": {"reputation": 1, "user_id": 10883102, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/071b6c596739d99bf373c8256dde84ca?s=128&d=identicon&r=PG&f=1", "display_name": "jacobi", "link": "https://stackoverflow.com/users/10883102/jacobi"}, "reply_to_user": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1560217177, "post_id": 55988556, "comment_id": 99653552, "body": "Thanks, it is good enough for my case !"}], "owner": {"reputation": 1, "user_id": 10883102, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/071b6c596739d99bf373c8256dde84ca?s=128&d=identicon&r=PG&f=1", "display_name": "jacobi", "link": "https://stackoverflow.com/users/10883102/jacobi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 87, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1557128883, "creation_date": 1557026350, "last_edit_date": 1557128883, "question_id": 55988556, "link": "https://stackoverflow.com/questions/55988556/how-to-write-the-excel-file-by-perl-with-vba-macro-inside", "title": "How to write the excel file by Perl with VBA macro inside", "body": "<p>My Perl scripts will write the excel file as the output to the user, and I also need this excel file includes the VBA codes.\nThat means after the use open the excel file, they can run the VBA macro by click the button.</p>\n\n<p>Can I use Perl to write the excel file with macro inside?\nIf it is unable to do so, the workaround may be :\n   1. the Perl only write the excel file without macro.\n   2. attach the macro to that excel file before send to user</p>\n"}, {"tags": ["perl", "timezone"], "answers": [{"tags": [], "owner": {"reputation": 31386, "user_id": 9661424, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rnnvz.png?s=128&g=1", "display_name": "sticky bit", "link": "https://stackoverflow.com/users/9661424/sticky-bit"}, "is_accepted": false, "score": 0, "last_activity_date": 1557009525, "creation_date": 1557009525, "answer_id": 55987393, "question_id": 55987269, "link": "https://stackoverflow.com/questions/55987269/perl-one-liner-command-to-convert-est-time-to-gmt-time/55987393#55987393", "title": "Perl one liner command to convert EST time to GMT time", "body": "<p>Where do you think <code>$dt</code> is set? And how is it gonna print without a <code>print()</code>? Try: </p>\n\n<pre><code>perl -MDateTime=set_Time_Zone -e \"print(DateTime-&gt;new(year=&gt;2019,month=&gt;5,day=&gt;10,hour=&gt;18,minute=&gt;40,time_zone=&gt;EST)-&gt;set_time_zone(GMT));\"\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 3, "last_activity_date": 1557010962, "last_edit_date": 1557010962, "creation_date": 1557010121, "answer_id": 55987439, "question_id": 55987269, "link": "https://stackoverflow.com/questions/55987269/perl-one-liner-command-to-convert-est-time-to-gmt-time/55987439#55987439", "title": "Perl one liner command to convert EST time to GMT time", "body": "<p>Four problems:</p>\n\n<ol>\n<li>DateTime doesn't export <code>set_Time_Zone</code>.</li>\n<li>You use <code>$dt</code> without ever giving it a value. (This is what produces the error message.)</li>\n<li>\"EST\" is not a standard time zone name, and should be avoided. It could refer to Eastern Standard Time (UTC-0500), a time zone that's mostly <em>unused</em> on May 10th. If so, specify <code>-0500</code> instead.</li>\n<li>You don't print anything.</li>\n</ol>\n\n<hr>\n\n<p>If you really did mean Eastern Standard Time (despite it not being used on May 10th in places that observe DST), use the following:</p>\n\n<pre><code>perl -MDateTime -le'print DateTime-&gt;new(...,time_zone=&gt;\"-0500\")-&gt;set_time_zone(\"UTC\")'\n</code></pre>\n\n<p>It's far more likely that you meant Eastern Daylight Time. If so, use the following:</p>\n\n<pre><code>perl -MDateTime -le'print DateTime-&gt;new(...,time_zone=&gt;\"-0400\")-&gt;set_time_zone(\"UTC\")'\n</code></pre>\n\n<p>Instead of using fixed offsets, you can specify the geographically-based names from the tz database. When using these, DateTime factors in whether DST is used on the date-time in question and uses the appropriate offset. This is done as follows:</p>\n\n<pre><code>perl -MDateTime -le'print DateTime-&gt;new(...,time_zone=&gt;\"America/New_York\")-&gt;set_time_zone(\"UTC\")'\n</code></pre>\n\n<p>Finally, the following is how you'd tell DateTime to use the local time zone:</p>\n\n<pre><code>perl -MDateTime -le'print DateTime-&gt;new(...,time_zone=&gt;\"local\")-&gt;set_time_zone(\"UTC\")'\n</code></pre>\n\n<hr>\n\n<p>Notes:</p>\n\n<ul>\n<li>If you want a different output format, you can use <code>-&gt;strftime(...)</code>.</li>\n<li>If using the Windows command shell, swap <code>'</code> and <code>\"</code>.</li>\n</ul>\n"}], "owner": {"reputation": 11, "user_id": 3101632, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2ffba35218645667e8bdeca4ab6bee60?s=128&d=identicon&r=PG&f=1", "display_name": "user3101632", "link": "https://stackoverflow.com/users/3101632/user3101632"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 275, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1557054617, "creation_date": 1557008273, "last_edit_date": 1557054617, "question_id": 55987269, "link": "https://stackoverflow.com/questions/55987269/perl-one-liner-command-to-convert-est-time-to-gmt-time", "title": "Perl one liner command to convert EST time to GMT time", "body": "<p>I am trying to build a one line command in Perl to convert an EST datetime to GMT time and print the result. I'm using the module \"DateTime\" to accomplish this.</p>\n\n<p>The command I tried is:</p>\n\n<pre><code>perl -MDateTime=set_Time_Zone -e \"DateTime-&gt;new(year=&gt;2019,month=&gt;5,day=&gt;10,hour=&gt;18,minute=&gt;40,time_zone=&gt;EST)\" -e \"$dt-&gt;set_time_zone(GMT)\"\n</code></pre>\n\n<p>The error it's throwing is </p>\n\n<blockquote>\n  <p>Can't call method \"set_time_zone\" on an undefined value at -e line 2.</p>\n</blockquote>\n\n<p>How to call a method and print the hour in GMT?</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 0, "creation_date": 1556996740, "post_id": 55984908, "comment_id": 98620881, "body": "Is that header in your actual data file?"}], "answers": [{"tags": [], "owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "is_accepted": false, "score": 1, "last_activity_date": 1557001944, "creation_date": 1557001944, "answer_id": 55986571, "question_id": 55984908, "link": "https://stackoverflow.com/questions/55984908/process-logfile-to-identify-stalled-data-creation/55986571#55986571", "title": "Process logfile to identify stalled data creation", "body": "<p>The CSV input and multiple datasets to group by make me think of databases. And indeed...</p>\n\n<pre class=\"lang-sh prettyprint-override\"><code>#!/bin/sh\nlogfile=\"$1\"\nsqlite3 -batch -noheader -csv &lt;&lt;EOF\nCREATE TABLE logs(dataset TEXT, ts INTEGER, size INTEGER\n                , PRIMARY KEY(dataset, size, ts)) WITHOUT ROWID;\n.import \"$logfile\" logs\nSELECT dataset\nFROM logs AS l\nGROUP BY dataset, size\nHAVING max(ts) - min(ts) &gt;= 3600\n   AND max(ts) = (SELECT max(ts) FROM logs AS l2 WHERE l.dataset = l2.dataset\n                                                   AND l.size = l2.size)\nORDER BY dataset;\nEOF\n</code></pre>\n\n<p>will print out <code>exp-201905040115a</code> when run on your sample data.</p>\n\n<p>But you want perl. There is a handy <a href=\"https://metacpan.org/pod/DBD::CSV\" rel=\"nofollow noreferrer\">driver</a> for DBI that works with CSV files, but the SQL dialect it supports doesn't include <code>HAVING</code> plus it's pretty slow. So, plan b.</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>#!/usr/bin/perl\nuse warnings;\nuse strict;\nuse feature qw/say/;\n\nmy %datasets;\n\n# Read the log file into a hash table of lists of (time,size) pairs.\nwhile (&lt;&gt;) {\n  chomp;\n  my ($ds, $time, $size) = split /,/;\n  push @{$datasets{$ds}}, [ $time =&gt; $size ];\n}\n\n# For each dataset listed in the file:\nDATASET:\nwhile (my ($ds, $data) = each %datasets) {\n  # Sort list in reverse order of time\n  @$data = sort { $b-&gt;[0] &lt;=&gt; $a-&gt;[0] } @$data;\n  # Get the most recent entry\n  my ($time, $size) = @{shift @$data};\n  # And compare it against the rest until...\n  for my $rec (@$data) {\n    # ... different size\n    next DATASET if $size != $rec-&gt;[1];\n    # ... Same size, entry more than an hour old\n    if ($time - $rec-&gt;[0] &gt;= 3600) {\n      say $ds;\n      next DATASET;\n    }\n  }\n}\n</code></pre>\n"}], "owner": {"reputation": 53, "user_id": 11433859, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2237cb2bc506f36181939fcd44317c00?s=128&d=identicon&r=PG&f=1", "display_name": "Werdle Sneng", "link": "https://stackoverflow.com/users/11433859/werdle-sneng"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 30, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1557001944, "creation_date": 1556989647, "question_id": 55984908, "link": "https://stackoverflow.com/questions/55984908/process-logfile-to-identify-stalled-data-creation", "title": "Process logfile to identify stalled data creation", "body": "<p>I have some processes running that create data at different rates. I'd like to use perl to identify those experiments that have not created data for more than 1 hour in order to terminate them early. The log file looks more or less like this (generated every 15 minutes, shortened for legibility):</p>\n\n<pre><code># Dataset,Timestamp,dataset size\nexp-201905040115a,1556932502,0\nexp-201905040115b,1556932502,0\nexp-201905040115a,1556934301,213906\nexp-201905040115b,1556934301,25487\nexp-201905040115a,1556936102,399950\nexp-201905040115b,1556936102,210548\nexp-201905040115a,1556937002,399950\nexp-201905040115b,1556937002,487250\nexp-201905040115a,1556937902,399950\nexp-201905040115b,1556937902,487250\nexp-201905040115a,1556938802,399950\nexp-201905040115b,1556938802,502145\nexp-201905040115a,1556939701,399950\nexp-201905040115b,1556939701,502145\nexp-201905040115a,1556940601,399950\nexp-201905040115b,1556940601,502145\nexp-201905040115a,1556941502,399950\nexp-201905040115b,1556941502,502145\nexp-201905040115a,1556942401,399950\nexp-201905040115b,1556942401,502145\n</code></pre>\n\n<p>The first dataset size is usually 0, but sometimes a small number (&lt;100).</p>\n\n<p>I've already learned how to read the data from the logfile and check it line by line (or perhaps turn that line into an array to extract the column entries).</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse warnings;\nuse strict;\n\nmy @datasets = ( 'exp-201905040115a', 'exp-201905040115b' );\n\nforeach my $dataset (@datasets) {\n        open my $logfile, '&lt;', 'data.log' or die \"Cannot open: $!\";\n        while (my $line = &lt;$logfile&gt;) {\n                chomp $line;\n                my ( $log_dataset, $log_timestamp, $log_datasize ) = split /,/, $line ;\n\n                if ( $dataset eq $log_dataset ) {\n                        print \"Matched: \" , $dataset, \"\\t\" ;\n                        printf('%10d', $log_datasize) ;\n                        print \" at \" , $log_timestamp , \"\\n\" ;\n                }\n        }\n        close $logfile;\n}\n\n</code></pre>\n\n<ol>\n<li><p>I'm a bit stumped though how to go about the part that tells me if any change has occurred in the third column within the last 3600 seconds. I guess I have to compare values from the various lines against each other, but here are so many to compare? </p></li>\n<li><p>Also, is there a more efficient way than going over the entire logfile several times (once for each dataset)?</p></li>\n</ol>\n\n<p>Can anyone give me a suggestion? Thanks!</p>\n"}, {"tags": ["perl", "mojo"], "answers": [{"tags": [], "owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "is_accepted": true, "score": 4, "last_activity_date": 1556976202, "creation_date": 1556976202, "answer_id": 55982963, "question_id": 55982547, "link": "https://stackoverflow.com/questions/55982547/finding-the-contents-under-div-with-specific-id-patterns-using-mojodom/55982963#55982963", "title": "Finding the contents under div with specific id patterns using MOJO::DOM", "body": "<p>The <a href=\"https://metacpan.org/pod/Mojo::DOM::CSS#E[foo%5E=%22bar%22]\" rel=\"nofollow noreferrer\">E[foo^=\"bar\"]</a> selector matches any element with a \"foo\" attribute starting with \"bar\". Thus you can use:</p>\n\n<pre><code>my $dom = Mojo::DOM-&gt;new($html);\nmy $rows = $dom-&gt;find('tr[id^=\"band\"]');\n</code></pre>\n\n<p><code>$rows</code> would be a Mojo::Collection of Mojo::DOM objects representing each matching element and its respective contents. For example, to get the list of matched IDs:</p>\n\n<pre><code>my @ids = $rows-&gt;map(attr =&gt; 'id')-&gt;each;\n</code></pre>\n\n<p>Or with more standard Perl:</p>\n\n<pre><code>my @ids = map { $_-&gt;{id} } @$rows;\n</code></pre>\n"}], "owner": {"reputation": 219, "user_id": 5179776, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/3b67ce56655c6fd60e9e22f36f5df01f?s=128&d=identicon&r=PG&f=1", "display_name": "Nissa", "link": "https://stackoverflow.com/users/5179776/nissa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 92, "favorite_count": 0, "accepted_answer_id": 55982963, "answer_count": 1, "score": 1, "last_activity_date": 1556976202, "creation_date": 1556973184, "question_id": 55982547, "link": "https://stackoverflow.com/questions/55982547/finding-the-contents-under-div-with-specific-id-patterns-using-mojodom", "title": "Finding the contents under div with specific id patterns using MOJO::DOM", "body": "<p>I need to parse some HTML codes. The patterns of the tag ID are:</p>\n\n<pre><code>&lt;tr id=\"date\"&gt;.....&lt;/tr&gt;\n&lt;tr id=\"band01\"&gt;&lt;td&gt;field1&lt;/td&gt;&lt;td&gt;field2&lt;/td&gt;&lt;/tr&gt;\n&lt;tr id=\"band02\"&gt;...contents...&lt;/tr&gt;\n.....\n&lt;tr id=\"(others\"&gt;.....\n</code></pre>\n\n<p>I'm using PERL Mojo::DOM parser, and want to extract all the actual ids with names starting with \"band\" following by a number, as well as its contents.</p>\n\n<p>How could I achieve this?</p>\n"}, {"tags": ["mysql", "perl", "docker", "docker-compose", "mariadb"], "comments": [{"owner": {"reputation": 10726, "user_id": 4956907, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1ypfs.jpg?s=128&g=1", "display_name": "michalk", "link": "https://stackoverflow.com/users/4956907/michalk"}, "edited": false, "score": 0, "creation_date": 1556950575, "post_id": 55979641, "comment_id": 98609640, "body": "Is it possible for you to access the mariadb container with user <code>orthomcl</code> using some software like <code>DBeaver</code> or anything? Moreover how do you execute the SQL script? You put it in mariadb container and let it execute on startup?"}, {"owner": {"reputation": 5561, "user_id": 977828, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/f71676e5d2fe91ec93573b686a486604?s=128&d=identicon&r=PG", "display_name": "user977828", "link": "https://stackoverflow.com/users/977828/user977828"}, "reply_to_user": {"reputation": 10726, "user_id": 4956907, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1ypfs.jpg?s=128&g=1", "display_name": "michalk", "link": "https://stackoverflow.com/users/4956907/michalk"}, "edited": false, "score": 0, "creation_date": 1557008675, "post_id": 55979641, "comment_id": 98623457, "body": "My understanding is that the SQL script get executed automatically as long it the extenstion *.sql."}], "answers": [{"tags": [], "owner": {"reputation": 315, "user_id": 2262790, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FJpnJ.png?s=128&g=1", "display_name": "ninjabber", "link": "https://stackoverflow.com/users/2262790/ninjabber"}, "is_accepted": false, "score": 0, "last_activity_date": 1556951228, "last_edit_date": 1556951228, "creation_date": 1556947822, "answer_id": 55979759, "question_id": 55979641, "link": "https://stackoverflow.com/questions/55979641/dbi-connectdatabase-orthomclhost-dbmysql-local-infile-1-orthomcl-fai/55979759#55979759", "title": "DBI connect(&#39;database=orthomcl;host=db;mysql_local_infile=1&#39;,&#39;orthomcl&#39;,...) failed: Access denied for user", "body": "<p>not entirely sure about the docker file setup but the error is:</p>\n\n<blockquote>\n  <p>Access denied for user 'orthomcl'@'172.17.0.4' (using password: YES)</p>\n</blockquote>\n\n<p>so grant privs to IP, range(172.%) or all </p>\n\n<pre><code>create user `orthomcl`@`%` identified by 'PAssw0rd';\nGRANT ALL PRIVILEGES on `orthomcl`.* to `orthomcl`@`%`;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 5561, "user_id": 977828, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/f71676e5d2fe91ec93573b686a486604?s=128&d=identicon&r=PG", "display_name": "user977828", "link": "https://stackoverflow.com/users/977828/user977828"}, "edited": false, "score": 0, "creation_date": 1557008577, "post_id": 55981532, "comment_id": 98623445, "body": "How do I provide robust forward and backward domain name resolution in my docker environment?"}, {"owner": {"reputation": 961, "user_id": 341930, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d2819a0020e657078218ed37f96b97b7?s=128&d=identicon&r=PG", "display_name": "TFBW", "link": "https://stackoverflow.com/users/341930/tfbw"}, "reply_to_user": {"reputation": 5561, "user_id": 977828, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/f71676e5d2fe91ec93573b686a486604?s=128&d=identicon&r=PG", "display_name": "user977828", "link": "https://stackoverflow.com/users/977828/user977828"}, "edited": false, "score": 0, "creation_date": 1557032400, "post_id": 55981532, "comment_id": 98626379, "body": "Not a simple question, but I will give the simplest answer I can. The &quot;thorough&quot; approach is to provide your own nameserver which can perform all the forward and reverse name resolution for your environment, and ensure that all containers use that nameserver as a resolver. The &quot;quick and dirty&quot; approach is to document all hosts and ip addresses in a hosts file, and ensure that copies of that hosts file are placed in /etc/hosts in every container."}, {"owner": {"reputation": 961, "user_id": 341930, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d2819a0020e657078218ed37f96b97b7?s=128&d=identicon&r=PG", "display_name": "TFBW", "link": "https://stackoverflow.com/users/341930/tfbw"}, "reply_to_user": {"reputation": 5561, "user_id": 977828, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/f71676e5d2fe91ec93573b686a486604?s=128&d=identicon&r=PG", "display_name": "user977828", "link": "https://stackoverflow.com/users/977828/user977828"}, "edited": false, "score": 0, "creation_date": 1557033508, "post_id": 55981532, "comment_id": 98626564, "body": "I should add that I&#39;m not a docker expert (yet), and there may be special facilities offered by or for docker to deal with this kind of thing, since it&#39;s a very common need."}], "tags": [], "owner": {"reputation": 961, "user_id": 341930, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d2819a0020e657078218ed37f96b97b7?s=128&d=identicon&r=PG", "display_name": "TFBW", "link": "https://stackoverflow.com/users/341930/tfbw"}, "is_accepted": false, "score": 3, "last_activity_date": 1556965085, "creation_date": 1556965085, "answer_id": 55981532, "question_id": 55979641, "link": "https://stackoverflow.com/questions/55979641/dbi-connectdatabase-orthomclhost-dbmysql-local-infile-1-orthomcl-fai/55981532#55981532", "title": "DBI connect(&#39;database=orthomcl;host=db;mysql_local_infile=1&#39;,&#39;orthomcl&#39;,...) failed: Access denied for user", "body": "<p>The cause of the error is that your database has not been able to resolve the IP address of the client, \"172.17.0.4\", back to the host name you used for the account, \"db\". You need to provide robust forward and backward domain name resolution in your docker environment if you want to work like this.</p>\n\n<p>Alternatively, if you are happy that your docker environment (and the private IP range it uses) are sufficiently shielded from outside access, you can drop the whole idea of limiting accounts to specific client addresses, and use the \"%\" wildcard for the host part. If that's your approach, you may also want to add \"--skip-name-resolve\" to your database server configuration so that connections are not triggering useless DNS queries and possible delays.</p>\n"}], "owner": {"reputation": 5561, "user_id": 977828, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/f71676e5d2fe91ec93573b686a486604?s=128&d=identicon&r=PG", "display_name": "user977828", "link": "https://stackoverflow.com/users/977828/user977828"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 367, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1556965085, "creation_date": 1556946533, "question_id": 55979641, "link": "https://stackoverflow.com/questions/55979641/dbi-connectdatabase-orthomclhost-dbmysql-local-infile-1-orthomcl-fai", "title": "DBI connect(&#39;database=orthomcl;host=db;mysql_local_infile=1&#39;,&#39;orthomcl&#39;,...) failed: Access denied for user", "body": "<p>I have <code>cat orthomcl/Dockerfile</code>:</p>\n\n<pre><code>FROM debian:stretch-backports\n\nRUN apt-get update  &amp;&amp; apt-get install -y --no-install-recommends \\\n        wget \\\n        cpanminus \\\n        build-essential \\\n        default-libmysqlclient-dev \\\n        python \\\n        ca-certificates \\\n        &amp;&amp; rm -rf /var/lib/apt/lists/*\n\nRUN cpanm DBI DBD::mysql\n</code></pre>\n\n<p>This is my <code>docker-compose.yml</code>: </p>\n\n<pre><code>orthomcl:\n    tty: true\n    build: orthomcl\n    restart: always\n    links:\n        - db\n    volumes:\n        - ./output_dir/:/output_dir\n\ndb:\n  image: mariadb\n  restart: always\n  environment:\n    - MYSQL_ROOT_PASSWORD=\"PAssw0rd\"\n    - MYSQL_DATABASE=\"orthomcl\"\n    - MYSQL_USER=\"orthomcl\"\n    - MYSQL_PASSWORD=\"PAssw0rd\"\n  ports:\n    - \"3306:3306\"\n  volumes:\n    - ./mysql/:/docker-entrypoint-initdb.d\n</code></pre>\n\n<p>This is the SQL config file:</p>\n\n<pre><code>$ cat mysql/orthomcl.sql \nCREATE DATABASE IF NOT EXISTS `orthomcl`;\ncreate user `orthomcl`@`db` identified by 'PAssw0rd';\nGRANT ALL PRIVILEGES on `orthomcl`.* to `orthomcl`@`db`;\n</code></pre>\n\n<p>The Perl script which connections to the database is <code>output_dir/test.pl</code></p>\n\n<pre><code>#!/bin/env perl  \nuse DBI;\nrequire DBD::mysql;\n\nmy $dbConnectString=\"DBI:mysql:database=orthomcl;host=db;mysql_local_infile=1\";\nmy $dbLogin=\"orthomcl\";\nmy $dbPassword=\"PAssw0rd\";\n\nDBI-&gt;connect($dbConnectString, $dbLogin, $dbPassword, { RaiseError =&gt; 1 } ) or\ndie ( \"Couldn't connect to database: \" . DBI-&gt;errstr );\n</code></pre>\n\n<p>Next, I used <code>docker-compose up</code> and after it I did:</p>\n\n<pre><code>$ docker-compose run orthomcl perl /output_dir/test.pl\nStarting orthomcl_db_1 ... done\nDBI connect('database=orthomcl;host=db;mysql_local_infile=1','orthomcl',...) failed: Access denied for user 'orthomcl'@'172.17.0.4' (using password: YES) at /output_dir/test.pl line 10.\n</code></pre>\n\n<p>MySQL logs shows:</p>\n\n<pre><code>...\ndb_1        | 2019-05-04  4:56:31 0 [Note] mysqld: ready for connections.\ndb_1        | Version: '10.3.14-MariaDB-1:10.3.14+maria~bionic'  socket: '/var/run/mysqld/mysqld.sock'  port: 3306  mariadb.org binary distribution\ndb_1        | 2019-05-04  4:58:19 8 [Warning] Access denied for user 'orthomcl'@'172.17.0.4' (using password: YES)\n</code></pre>\n\n<p>How is it possible to solve the above error? </p>\n\n<p>Thank you in advance.</p>\n"}, {"tags": ["perl", "dist-zilla"], "answers": [{"tags": [], "owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "is_accepted": true, "score": 2, "last_activity_date": 1556919771, "creation_date": 1556919771, "answer_id": 55977440, "question_id": 55977048, "link": "https://stackoverflow.com/questions/55977048/how-to-have-distzilla-specifying-min-perl-version-in-yaml/55977440#55977440", "title": "How to have Dist::zilla specifying min Perl version in YAML?", "body": "<p>The convention for specifying a minimum perl version for a distribution is a runtime-requires prerequisite on 'perl'. (Note: I say convention, because there is no 'perl' module, and you can't actually cause a CPAN client to install a newer Perl if it's too old.) The appropriate plugins will read this and set other things based on it, like \"use 5.XXX\" in the generated Makefile.PL. Instead of passing prereqs as options to <code>[@Basic]</code>, you need to use a plugin which can set prereqs, like <code>[Prereqs]</code>. <a href=\"https://metacpan.org/pod/Dist::Zilla::Plugin::Prereqs\" rel=\"nofollow noreferrer\">Here is the documentation</a>. You would want to use it like:</p>\n\n<pre><code>[Prereqs / RuntimeRequires]\nperl = 5.018\nJSON = 0\n</code></pre>\n\n<p>You can use the Prereqs plugin additional times for different Phase+Relationship combinations, but they each must have a unique name (the part after the /). </p>\n"}, {"tags": [], "owner": {"reputation": 5099, "user_id": 406224, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9bc79fa6fa58e2a4f5e6c2f803cabc48?s=128&d=identicon&r=PG", "display_name": "oalders", "link": "https://stackoverflow.com/users/406224/oalders"}, "is_accepted": false, "score": 2, "last_activity_date": 1557163295, "creation_date": 1557163295, "answer_id": 56009746, "question_id": 55977048, "link": "https://stackoverflow.com/questions/55977048/how-to-have-distzilla-specifying-min-perl-version-in-yaml/56009746#56009746", "title": "How to have Dist::zilla specifying min Perl version in YAML?", "body": "<p>You can do this explicitly as stated above or you can handle it automatically via <a href=\"https://metacpan.org/pod/Dist::Zilla::Plugin::MinimumPerlFast\" rel=\"nofollow noreferrer\">Dist::Zilla::Plugin::MinimumPerlFast</a></p>\n\n<pre><code># In your dist.ini:\n[MinimumPerlFast]\n</code></pre>\n"}], "owner": {"reputation": 642, "user_id": 5467494, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/99Y3d.jpg?s=128&g=1", "display_name": "Andrea T.", "link": "https://stackoverflow.com/users/5467494/andrea-t"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 67, "favorite_count": 0, "accepted_answer_id": 55977440, "answer_count": 2, "score": 2, "last_activity_date": 1557163295, "creation_date": 1556917198, "question_id": 55977048, "link": "https://stackoverflow.com/questions/55977048/how-to-have-distzilla-specifying-min-perl-version-in-yaml", "title": "How to have Dist::zilla specifying min Perl version in YAML?", "body": "<p>I\u2019d like to specify minimum required Perl version in the yaml file. While I did put perl among requirements in my dist.ini, I think I need some module to have it written to the yaml file at build time. </p>\n\n<p>My dist.ini is <a href=\"https://metacpan.org/source/PROCH/Proch-N50-0.032/dist.ini\" rel=\"nofollow noreferrer\">https://metacpan.org/source/PROCH/Proch-N50-0.032/dist.ini</a></p>\n\n<p>The kwalitee issue is described here <a href=\"https://cpants.cpanauthors.org/kwalitee/meta_yml_declares_perl_version\" rel=\"nofollow noreferrer\">https://cpants.cpanauthors.org/kwalitee/meta_yml_declares_perl_version</a></p>\n\n<p>Thanks for your help. </p>\n"}, {"tags": ["perl", "moose"], "answers": [{"comments": [{"owner": {"reputation": 642, "user_id": 5467494, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/99Y3d.jpg?s=128&g=1", "display_name": "Andrea T.", "link": "https://stackoverflow.com/users/5467494/andrea-t"}, "edited": false, "score": 0, "creation_date": 1556904607, "post_id": 55973583, "comment_id": 98599988, "body": "Thanks! When you start with Moose there are so many things that is difficult to get around."}, {"owner": {"reputation": 642, "user_id": 5467494, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/99Y3d.jpg?s=128&g=1", "display_name": "Andrea T.", "link": "https://stackoverflow.com/users/5467494/andrea-t"}, "edited": false, "score": 0, "creation_date": 1556951587, "post_id": 55973583, "comment_id": 98609795, "body": "Now the &quot;builder&quot; subroutine is indeed called after the population of all the attributes, thanks!  My problem is that I defined a method &quot;getline()&quot; in the module, that if invoked like <code>my $obj = Mod::Reader-&gt;new(filename..); $obj-&gt;print_line();</code> results in print_line() invoked <i>before</i> the builder. How can I defer also the execution of object methods (if this is what I should do)?"}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "reply_to_user": {"reputation": 642, "user_id": 5467494, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/99Y3d.jpg?s=128&g=1", "display_name": "Andrea T.", "link": "https://stackoverflow.com/users/5467494/andrea-t"}, "edited": false, "score": 1, "creation_date": 1556959346, "post_id": 55973583, "comment_id": 98611208, "body": "A lazy attribute is initialized when it&#39;s first needed. Why do you need to initialize it <i>before</i> it&#39;s needed?"}, {"owner": {"reputation": 642, "user_id": 5467494, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/99Y3d.jpg?s=128&g=1", "display_name": "Andrea T.", "link": "https://stackoverflow.com/users/5467494/andrea-t"}, "edited": false, "score": 0, "creation_date": 1556978833, "post_id": 55973583, "comment_id": 98615842, "body": "You&#39;re definitely right, I&#39;m missing something <i>else</i>. Your implementation works perfectly, as soon as I try to package a module (<a href=\"https://github.com/telatin/FASTQ-Parser/blob/master/lib/FASTQ/Reader.pm\" rel=\"nofollow noreferrer\">github.com/telatin/FASTQ-Parser/blob/master/lib/FASTQ/Reade&zwnj;&#8203;r.pm</a>) and a script calling it (<a href=\"https://github.com/telatin/FASTQ-Parser/blob/master/scripts/Reader.pl\" rel=\"nofollow noreferrer\">github.com/telatin/FASTQ-Parser/blob/master/scripts/Reader.&zwnj;&#8203;pl</a>) it stops working: i dont get anything from <code>readline $o-&gt;fh</code>. Thanks for your help"}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "reply_to_user": {"reputation": 642, "user_id": 5467494, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/99Y3d.jpg?s=128&g=1", "display_name": "Andrea T.", "link": "https://stackoverflow.com/users/5467494/andrea-t"}, "edited": false, "score": 0, "creation_date": 1556991791, "post_id": 55973583, "comment_id": 98619637, "body": "Weird, it works for me when I copy your code. The <code>defined $self-&gt;fh</code> test isn&#39;t needed, BTW."}, {"owner": {"reputation": 642, "user_id": 5467494, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/99Y3d.jpg?s=128&g=1", "display_name": "Andrea T.", "link": "https://stackoverflow.com/users/5467494/andrea-t"}, "edited": false, "score": 0, "creation_date": 1557038127, "post_id": 55973583, "comment_id": 98627251, "body": "Thanks! Just to know, which system did you test the two files? I used OS X (perl 5.18) and Ubuntu Linux (perl 5.22)."}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "reply_to_user": {"reputation": 642, "user_id": 5467494, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/99Y3d.jpg?s=128&g=1", "display_name": "Andrea T.", "link": "https://stackoverflow.com/users/5467494/andrea-t"}, "edited": false, "score": 0, "creation_date": 1557074149, "post_id": 55973583, "comment_id": 98635753, "body": "I&#39;m using OpenSuse with perl 5.18.2."}, {"owner": {"reputation": 642, "user_id": 5467494, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/99Y3d.jpg?s=128&g=1", "display_name": "Andrea T.", "link": "https://stackoverflow.com/users/5467494/andrea-t"}, "edited": false, "score": 0, "creation_date": 1557219499, "post_id": 55973583, "comment_id": 98681827, "body": "Thanks again for your help and patience: now everything works as expected!"}], "tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": true, "score": 5, "last_activity_date": 1556900139, "last_edit_date": 1556900139, "creation_date": 1556899793, "answer_id": 55973583, "question_id": 55973274, "link": "https://stackoverflow.com/questions/55973274/moose-builder-requires-a-value-that-sometimes-is-not-set-non-deterministic/55973583#55973583", "title": "Moose: builder requires a value that sometimes is not set (non deterministic)", "body": "<p>If a value of one attribute depends on another attribute, make it lazy.</p>\n\n<pre><code>#!/usr/bin/perl\nuse warnings;\nuse strict;\n\n{   package My::Class;\n    use Moose;\n\n    has filename =&gt; (is =&gt; 'ro', isa =&gt; 'Str', required =&gt; 1);\n    has fh =&gt; (is =&gt; 'rw', isa =&gt; 'FileHandle', lazy =&gt; 1, builder =&gt; '_build_fh');\n    #                                           ~~~~~~~~~\n\n    sub _build_fh {\n        my ($self) = @_;\n        open my $fh, '&lt;', $self-&gt;filename or die $!;\n        return $fh\n    }\n}\n\nmy $o = 'My::Class'-&gt;new(filename =&gt; __FILE__);\nprint while readline $o-&gt;fh;\n</code></pre>\n\n<p>See <a href=\"https://metacpan.org/pod/Moose::Manual::Attributes#Laziness\" rel=\"noreferrer\">Laziness in Moose::Manual::Attributes</a>:</p>\n\n<blockquote>\n  <p>if the default value for this attribute depends on some other attributes, then the attribute <em>must</em> be <code>lazy</code>.</p>\n</blockquote>\n"}], "owner": {"reputation": 642, "user_id": 5467494, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/99Y3d.jpg?s=128&g=1", "display_name": "Andrea T.", "link": "https://stackoverflow.com/users/5467494/andrea-t"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 94, "favorite_count": 0, "accepted_answer_id": 55973583, "answer_count": 1, "score": 3, "last_activity_date": 1556900139, "creation_date": 1556898616, "question_id": 55973274, "link": "https://stackoverflow.com/questions/55973274/moose-builder-requires-a-value-that-sometimes-is-not-set-non-deterministic", "title": "Moose: builder requires a value that sometimes is not set (non deterministic)", "body": "<p>I'm new to MOOSE and Perl OOP, and I'm struggling understanding the execution order of the code. </p>\n\n<p>I want to create a class reading files, so an attribute of the object should be the filehandle and another the filename to be read.</p>\n\n<p>My problem is that the attribute 'filehandle' has a builder that requires $self->filename, but sometimes at runtime 'filename' is not (yet) available when the builder is called.</p>\n\n<p>Thanks for you help</p>\n\n<p>My ideal object creation:</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>my $file = FASTQ::Reader-&gt;new(\n    filename =&gt; \"$Bin/test.fastq\",\n);\n</code></pre>\n\n<p>Perl module:</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>has filename =&gt; (\n    is =&gt; 'ro',     isa =&gt; 'Str',     required =&gt; 1,\n);\n\nhas fh =&gt; (\n  is =&gt; 'ro',   isa =&gt; 'FileHandle',   builder =&gt; '_build_file_handler',\n);\n\nsub _build_file_handler {\n   my ($self) = @_;\n   say Dumper $self;\n   open(my $fh, \"&lt;\", $self-&gt;filename) or die (\"cant open \" . $self-&gt;filename  . \"\\n\");\n   return $fh;\n}\n</code></pre>\n\n<p>See: <a href=\"https://gist.github.com/telatin/a81a4097913af55c5b86f9e01a2d89ae\" rel=\"nofollow noreferrer\">https://gist.github.com/telatin/a81a4097913af55c5b86f9e01a2d89ae</a></p>\n"}, {"tags": ["perl", "oop", "inheritance"], "comments": [{"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 1, "creation_date": 1556897850, "post_id": 55972958, "comment_id": 98596835, "body": "Why do you need it? Variables aren&#39;t inherited, only methods."}], "answers": [{"tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": false, "score": 4, "last_activity_date": 1556898541, "creation_date": 1556898541, "answer_id": 55973256, "question_id": 55972958, "link": "https://stackoverflow.com/questions/55972958/parent-method-using-a-variable-defined-in-a-child-class/55973256#55973256", "title": "Parent method using a variable defined in a child class", "body": "<p>I don't see why one should need it, but it's possible, if you turn off <a href=\"http://p3rl.org/strict\" rel=\"nofollow noreferrer\">strict</a> <code>refs</code>:</p>\n\n<pre><code>#!/usr/bin/perl\nuse warnings;\nuse strict;\n\n{   package My::Base;\n\n    sub new { bless {}, shift }\n    our $name = 'Base';\n    sub get_name {\n        my ($self) = @_;\n        my $class = ref $self || $self;\n        do { no strict 'refs';\n             ${ $class . '::name' }\n         }\n    }\n}\n\n{   package My::Child;\n    use parent -norequire =&gt; 'My::Base';\n    our $name = 'Child';\n}\n\nmy $ch = 'My::Child'-&gt;new;\nprint $ch-&gt;get_name, ' ', 'My::Child'-&gt;get_name;\n</code></pre>\n\n<p>But usually, you would just define a class method holding the name:</p>\n\n<pre><code>{   package My::Base;\n\n    sub new { bless {}, shift }\n    sub name { 'Base' }\n    sub get_name { shift-&gt;name }\n}\n\n{   package My::Child;\n    use parent -norequire =&gt; 'My::Base';\n    sub name { 'Child' }\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1861, "user_id": 1961574, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/184ac1de765a2428c4bbadfbf5beb517?s=128&d=identicon&r=PG&f=1", "display_name": "bluppfisk", "link": "https://stackoverflow.com/users/1961574/bluppfisk"}, "edited": false, "score": 0, "creation_date": 1558366787, "post_id": 55973387, "comment_id": 99069011, "body": "any reason why you&#39;d prefer constant over a sub as in ikegami&#39;s answer?"}, {"owner": {"reputation": 961, "user_id": 341930, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d2819a0020e657078218ed37f96b97b7?s=128&d=identicon&r=PG", "display_name": "TFBW", "link": "https://stackoverflow.com/users/341930/tfbw"}, "reply_to_user": {"reputation": 1861, "user_id": 1961574, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/184ac1de765a2428c4bbadfbf5beb517?s=128&d=identicon&r=PG&f=1", "display_name": "bluppfisk", "link": "https://stackoverflow.com/users/1961574/bluppfisk"}, "edited": false, "score": 1, "creation_date": 1558369370, "post_id": 55973387, "comment_id": 99070202, "body": "Constants are actually implemented as subs, so our answers aren&#39;t all that different. Constants do have the advantage that they can be part of compile-time optimisation, but not in cases where they are called as methods, so it&#39;s not a terribly significant distinction. I would actually prefer ikegami&#39;s approach if it were anticipated that some types might be variable rather than constant, but I prefer mine if the value really is understood to be a class constant."}], "tags": [], "owner": {"reputation": 961, "user_id": 341930, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d2819a0020e657078218ed37f96b97b7?s=128&d=identicon&r=PG", "display_name": "TFBW", "link": "https://stackoverflow.com/users/341930/tfbw"}, "is_accepted": false, "score": 3, "last_activity_date": 1556899024, "creation_date": 1556899024, "answer_id": 55973387, "question_id": 55972958, "link": "https://stackoverflow.com/questions/55972958/parent-method-using-a-variable-defined-in-a-child-class/55973387#55973387", "title": "Parent method using a variable defined in a child class", "body": "<p>As has been suggested, Perl inherits methods (subs), not variables, but constants are actually subs, so you can do something similar like this.</p>\n\n<pre><code>package DWDESReader;\nuse base qw(DWConfigFileReader);\nuse constant TYPE =&gt; \"DES\";\n</code></pre>\n\n<p>Then, if you call <code>$self-&gt;TYPE</code> somewhere in the base class, you'll get \"DES\" if the object is actually a DWDESReader object.</p>\n"}, {"comments": [{"owner": {"reputation": 1861, "user_id": 1961574, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/184ac1de765a2428c4bbadfbf5beb517?s=128&d=identicon&r=PG&f=1", "display_name": "bluppfisk", "link": "https://stackoverflow.com/users/1961574/bluppfisk"}, "edited": false, "score": 0, "creation_date": 1558364089, "post_id": 55979105, "comment_id": 99067512, "body": "All of these answers are excellent; however, in the constructor of the parent, I check whether a given (file) parameter is set and if not, I croak at the user mentioning the type. <code>if (!exists($args{file}) { croak($self-&gt;type.&quot; file not set&quot;); }</code>. This does not work as in the base class $self-&gt;type causes the &quot;override croak&quot;. I could of course just set some bogus information like &#39;config&#39; in the base class. But that&#39;s not exactly what I intended. Any ideas?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 1861, "user_id": 1961574, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/184ac1de765a2428c4bbadfbf5beb517?s=128&d=identicon&r=PG&f=1", "display_name": "bluppfisk", "link": "https://stackoverflow.com/users/1961574/bluppfisk"}, "edited": false, "score": 1, "creation_date": 1558365337, "post_id": 55979105, "comment_id": 99068260, "body": "@bluppfisk, Sounds like you incorrectly used <code>bless</code>. See the code in my answer."}, {"owner": {"reputation": 1861, "user_id": 1961574, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/184ac1de765a2428c4bbadfbf5beb517?s=128&d=identicon&r=PG&f=1", "display_name": "bluppfisk", "link": "https://stackoverflow.com/users/1961574/bluppfisk"}, "edited": false, "score": 0, "creation_date": 1558366067, "post_id": 55979105, "comment_id": 99068648, "body": "I&#39;m not using a reference to %args (because otherwise Perl complains about an odd number of elements), and I also had to declare type before new otherwise I cannot use it in my constructor, but otherwise I don&#39;t see what&#39;s wrong. I always get &quot;subclass must override&quot; now in my child classes."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 1861, "user_id": 1961574, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/184ac1de765a2428c4bbadfbf5beb517?s=128&d=identicon&r=PG&f=1", "display_name": "bluppfisk", "link": "https://stackoverflow.com/users/1961574/bluppfisk"}, "edited": false, "score": 0, "creation_date": 1558366666, "post_id": 55979105, "comment_id": 99068957, "body": "I meant the second parameter. It should be the class of the object, not the base class."}, {"owner": {"reputation": 1861, "user_id": 1961574, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/184ac1de765a2428c4bbadfbf5beb517?s=128&d=identicon&r=PG&f=1", "display_name": "bluppfisk", "link": "https://stackoverflow.com/users/1961574/bluppfisk"}, "edited": false, "score": 0, "creation_date": 1558366752, "post_id": 55979105, "comment_id": 99068997, "body": "No, I&#39;m sorry. I understand what you were saying: define $self first as a blessed class, then set its properties afterwards. That way you can refer to $self-&gt;type.  I was composing the %args list first and doing the blessing at the very end, which of course does not allow you to use $self-&gt;type. It does, however, mean that you have to create an object before you know you can. But that&#39;s nitpicking. Thank you!"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 1861, "user_id": 1961574, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/184ac1de765a2428c4bbadfbf5beb517?s=128&d=identicon&r=PG&f=1", "display_name": "bluppfisk", "link": "https://stackoverflow.com/users/1961574/bluppfisk"}, "edited": false, "score": 1, "creation_date": 1558366799, "post_id": 55979105, "comment_id": 99069023, "body": "Re &quot;<i>define $self first as a blessed class, then set its properties afterwards.</i>&quot;, Naw, just my stylistic choice so that the constructor of the base class and of the derived class look the same. That&#39;s not the issue at all."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 1861, "user_id": 1961574, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/184ac1de765a2428c4bbadfbf5beb517?s=128&d=identicon&r=PG&f=1", "display_name": "bluppfisk", "link": "https://stackoverflow.com/users/1961574/bluppfisk"}, "edited": false, "score": 1, "creation_date": 1558366858, "post_id": 55979105, "comment_id": 99069058, "body": "Re &quot;<i>It does, however, mean that you have to create an object before you know you can</i>&quot;, Or use <code>$class-&gt;type</code> (as long as <code>type</code> is meant to be called as a class method rather than an object method)"}, {"owner": {"reputation": 1861, "user_id": 1961574, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/184ac1de765a2428c4bbadfbf5beb517?s=128&d=identicon&r=PG&f=1", "display_name": "bluppfisk", "link": "https://stackoverflow.com/users/1961574/bluppfisk"}, "edited": false, "score": 0, "creation_date": 1558367028, "post_id": 55979105, "comment_id": 99069146, "body": "Oh wonderful. I didn&#39;t realise I could use <code>$class</code> as something else than a string. Clearly a Perl noob here. Thank you for your expert guidance."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 1861, "user_id": 1961574, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/184ac1de765a2428c4bbadfbf5beb517?s=128&d=identicon&r=PG&f=1", "display_name": "bluppfisk", "link": "https://stackoverflow.com/users/1961574/bluppfisk"}, "edited": false, "score": 1, "creation_date": 1558367170, "post_id": 55979105, "comment_id": 99069222, "body": "A string is a perfectly fine invocant --<code>Foo-&gt;new</code> is used as a shortcut for <code>&quot;Foo&quot;-&gt;new</code>, after all-- as long as that&#39;s what the method expects."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 4, "last_activity_date": 1557380113, "last_edit_date": 1557380113, "creation_date": 1556939070, "answer_id": 55979105, "question_id": 55972958, "link": "https://stackoverflow.com/questions/55972958/parent-method-using-a-variable-defined-in-a-child-class/55979105#55979105", "title": "Parent method using a variable defined in a child class", "body": "<p>Classes don't have attributes (variables) in Perl, only methods (subs).</p>\n\n<p>I recommend creating an abstract virtual class method.</p>\n\n<pre><code>package DWConfigFileReader;\n\nuse Carp qw( croak );\n\nsub new {\n    my ($class, %args) = @_;\n    my $self = bless(\\%args, $class);\n    return $self;\n}\n\nsub type { croak(\"Subclass must override \\\"type\\\".\"); }\n\n1;\n</code></pre>\n\n<p>&#x20;</p>\n\n<pre><code>package DWDESReader;\n\nuse parent 'DWConfigFileReader';\n\nsub type { \"DES\" }\n\n1;\n</code></pre>\n\n<p>You don't even need <code>$self-&gt;{type} = $class-&gt;type;</code>; just use <code>$self-&gt;type</code> instead of <code>$self-&gt;{type}</code>.</p>\n"}], "owner": {"reputation": 1861, "user_id": 1961574, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/184ac1de765a2428c4bbadfbf5beb517?s=128&d=identicon&r=PG&f=1", "display_name": "bluppfisk", "link": "https://stackoverflow.com/users/1961574/bluppfisk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 277, "favorite_count": 0, "accepted_answer_id": 55979105, "answer_count": 3, "score": 1, "last_activity_date": 1557429895, "creation_date": 1556897437, "last_edit_date": 1557354391, "question_id": 55972958, "link": "https://stackoverflow.com/questions/55972958/parent-method-using-a-variable-defined-in-a-child-class", "title": "Parent method using a variable defined in a child class", "body": "<p>In Python you can do:</p>\n\n<pre><code>class Binance(Exchange):\n    name = \"Binance\"\n    code = \"binance\"\n</code></pre>\n\n<p>and in the parent class have</p>\n\n<pre><code>class Exchange:\n    @classmethod\n    def get_name(cls):\n    return cls.name\n</code></pre>\n\n<h3>Now Perl!</h3>\n\n<p>This is lovely. I want the same for my Perl objects.</p>\n\n<pre><code>package DWDESReader;\nuse base qw(DWConfigFileReader);\nour $type = \"DES\";\n</code></pre>\n\n<p>and in the base class:</p>\n\n<pre><code>package DWConfigFileReader;\n\nour $type = \"\";\n\nsub new {\n    my ($class, %args) = @_;\n    $args{type} = $type;\n\n    return bless {%args}, $class;\n}\n\nsub getType {\n    my ($self) = @_;\n    return $self-&gt;{type};\n}\n</code></pre>\n\n<p>But this doesn't work, i.e. only returns the empty string assigned in the base class. I didn't expect it to work but am unsure how it should be done.</p>\n"}, {"tags": ["perl", "mojolicious"], "comments": [{"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1556920471, "post_id": 55972308, "comment_id": 98605528, "body": "Side note: Mojo::Util provides a &#39;dumper&#39; function which is a simple wrapper of Data::Dumper with some nice settings."}], "answers": [{"tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": true, "score": 2, "last_activity_date": 1556895825, "creation_date": 1556895825, "answer_id": 55972504, "question_id": 55972308, "link": "https://stackoverflow.com/questions/55972308/perl-mojolicious-stash-dump/55972504#55972504", "title": "Perl Mojolicious stash dump", "body": "<p>I tried the following in <a href=\"http://p3rl.org/Mojolicious::Lite\" rel=\"nofollow noreferrer\">Mojolicious::Lite</a>:</p>\n\n<pre><code>get '/' =&gt; sub {\n    my $c = shift;\n    $c-&gt;stash(mydata =&gt; $my_data);\n    use Data::Dumper; print Dumper($c-&gt;stash('mydata')-&gt;{me}{admin});\n};\n</code></pre>\n\n<p>The output was</p>\n\n<pre><code>$VAR1 = 'rhaen';\n</code></pre>\n"}], "owner": {"reputation": 1215, "user_id": 3525290, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/303246ebe05535ca2f4e437eb6cfb7f4?s=128&d=identicon&r=PG&f=1", "display_name": "user3525290", "link": "https://stackoverflow.com/users/3525290/user3525290"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 85, "favorite_count": 0, "accepted_answer_id": 55972504, "answer_count": 1, "score": 0, "last_activity_date": 1556895825, "creation_date": 1556895156, "question_id": 55972308, "link": "https://stackoverflow.com/questions/55972308/perl-mojolicious-stash-dump", "title": "Perl Mojolicious stash dump", "body": "<p>How do I dump out the stash in perl </p>\n\n<pre><code>my $my_data =  {\n    'me'    =&gt;  {\n        'admin' =&gt; 'rhaen',\n        'desc'  =&gt; 'webserver'\n    },\n    'you' =&gt; {\n        'admin' =&gt; 'hazel',\n        'desc'  =&gt; 'mailserver'\n    }\n};\nstash(mydata =&gt; $my_data);\nprint Dumper (stash 'mydata');\n</code></pre>\n\n<p>How do I print mydata me admin.  I have tried <code>print Dumper (stash 'mydata me'); print Dumper (stash 'mydata'=&gt;['me']);</code>\nNothing seems to work. Trying to troubleshoot why data is changing.</p>\n"}, {"tags": ["perl", "pipeline"], "comments": [{"owner": {"reputation": 385, "user_id": 2498818, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bee45efa81a6668cd0ff34d3feca5a06?s=128&d=identicon&r=PG", "display_name": "Arthur Nicoll", "link": "https://stackoverflow.com/users/2498818/arthur-nicoll"}, "edited": false, "score": 0, "creation_date": 1556891811, "post_id": 55969620, "comment_id": 98593339, "body": "Hi, what operating system? Have you tried running the command at the command prompt? Both with and without pipeline of course."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1556939596, "post_id": 55969620, "comment_id": 98608260, "body": "5.003_07 was released on Oct 10th, 1996!!! The average person of the time had never heard of the internet."}], "answers": [{"comments": [{"owner": {"reputation": 961, "user_id": 341930, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d2819a0020e657078218ed37f96b97b7?s=128&d=identicon&r=PG", "display_name": "TFBW", "link": "https://stackoverflow.com/users/341930/tfbw"}, "edited": false, "score": 0, "creation_date": 1556894994, "post_id": 55972167, "comment_id": 98595225, "body": "Come to think of it, I&#39;m not sure what &quot;tee&quot; would make of a situation where STDOUT was a pipe to itself. The universe might explode."}, {"owner": {"reputation": 961, "user_id": 341930, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d2819a0020e657078218ed37f96b97b7?s=128&d=identicon&r=PG", "display_name": "TFBW", "link": "https://stackoverflow.com/users/341930/tfbw"}, "edited": false, "score": 0, "creation_date": 1556895167, "post_id": 55972167, "comment_id": 98595333, "body": "Well, I just tried this, the desired effect was achieved, and the universe is still here. perl -we &#39;open STDOUT, &quot;|tee /tmp/foo&quot; or die &quot;$!\\n&quot;; system(&quot;ls&quot;)&#39;"}, {"owner": {"reputation": 385, "user_id": 2498818, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bee45efa81a6668cd0ff34d3feca5a06?s=128&d=identicon&r=PG", "display_name": "Arthur Nicoll", "link": "https://stackoverflow.com/users/2498818/arthur-nicoll"}, "edited": false, "score": 1, "creation_date": 1556896826, "post_id": 55972167, "comment_id": 98596267, "body": "Glad that risk panned out on all our behalves."}, {"owner": {"reputation": 961, "user_id": 341930, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d2819a0020e657078218ed37f96b97b7?s=128&d=identicon&r=PG", "display_name": "TFBW", "link": "https://stackoverflow.com/users/341930/tfbw"}, "reply_to_user": {"reputation": 385, "user_id": 2498818, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bee45efa81a6668cd0ff34d3feca5a06?s=128&d=identicon&r=PG", "display_name": "Arthur Nicoll", "link": "https://stackoverflow.com/users/2498818/arthur-nicoll"}, "edited": false, "score": 1, "creation_date": 1556897380, "post_id": 55972167, "comment_id": 98596595, "body": "If I&#39;m going to do something that might explode the universe, I figure it&#39;s easier to get forgiveness than permission."}, {"owner": {"reputation": 21, "user_id": 10446130, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fe2e3ef3374f7bb91e2a58f331ccd646?s=128&d=identicon&r=PG&f=1", "display_name": "Markus Huber", "link": "https://stackoverflow.com/users/10446130/markus-huber"}, "edited": false, "score": 0, "creation_date": 1557125165, "post_id": 55972167, "comment_id": 98646570, "body": "@TFBW It works with open ( STDOUT... and system($cmd) as you mentioned. Thank you very much. It can be marked as solved."}], "tags": [], "owner": {"reputation": 961, "user_id": 341930, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d2819a0020e657078218ed37f96b97b7?s=128&d=identicon&r=PG", "display_name": "TFBW", "link": "https://stackoverflow.com/users/341930/tfbw"}, "is_accepted": true, "score": 1, "last_activity_date": 1556894711, "creation_date": 1556894711, "answer_id": 55972167, "question_id": 55969620, "link": "https://stackoverflow.com/questions/55969620/how-do-i-fix-the-error-the-command-line-is-too-long-if-i-want-to-have-the-outp/55972167#55972167", "title": "How do i fix the error &#39;The command line is too long&#39; if i want to have the output from a command?", "body": "<p>That's a positively ancient version of Perl. The first one I used was 5.004 in the mid-90s. Granted, things may have changed, but I think that the following quotation from the <code>system()</code> documentation is still relevant.</p>\n\n<blockquote>\n  <p>If there is only one scalar argument, the argument is checked for shell metacharacters, and if there are any, the entire argument is passed to the system's command shell for parsing (this is \"/bin/sh -c\" on Unix platforms, but varies on other platforms). If there are no shell metacharacters in the argument, it is split into words and passed directly to \"execvp\", which is more efficient.</p>\n</blockquote>\n\n<p>It seems likely that you are experiencing the difference between these two cases, and that the (external) shell program is imposing the length limit when you add the pipe.</p>\n\n<p>You could work around this by temporarily re-opening STDOUT as \"| tee -a $log_file\", then just executing <code>system($cmd)</code>. I daren't try to tell you how exactly to do that (particularly if you want to get your old STDOUT back afterwards) under such an ancient version of Perl, because that most certainly has changed over time. You'll need to consult the documentation at hand.</p>\n\n<p>One possibility is to <code>fork()</code>, then in the child process <code>open STDOUT, \"| tee -a $log_file\"</code>, and <code>exec($cmd)</code>, and in the parent process <code>wait()</code> for all that to finish, bearing in mind that there is more than one child process because you opened a pipe.</p>\n"}], "owner": {"reputation": 21, "user_id": 10446130, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fe2e3ef3374f7bb91e2a58f331ccd646?s=128&d=identicon&r=PG&f=1", "display_name": "Markus Huber", "link": "https://stackoverflow.com/users/10446130/markus-huber"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 622, "favorite_count": 0, "accepted_answer_id": 55972167, "answer_count": 1, "score": 0, "last_activity_date": 1556894711, "creation_date": 1556885762, "last_edit_date": 1556891253, "question_id": 55969620, "link": "https://stackoverflow.com/questions/55969620/how-do-i-fix-the-error-the-command-line-is-too-long-if-i-want-to-have-the-outp", "title": "How do i fix the error &#39;The command line is too long&#39; if i want to have the output from a command?", "body": "<p>I have a perl code with a very long command and I want print the output to a log file. It looks like this:</p>\n\n<pre><code>system ( \"$cmd  | tee -a $log_file\" );\n</code></pre>\n\n<p>When I run the Perl script, the system call throws \"The command line is too long\".</p>\n\n<p>If I run the system call without pipeline, it works.</p>\n\n<p>So my questions are:</p>\n\n<ol>\n<li>Is there a limit of characters for pipeline?</li>\n<li>How can I fix the problem?</li>\n</ol>\n\n<p>Some additional informations:</p>\n\n<p>The command <code>$cmd</code> has a length of 8532. I am using Perl version 5.003_07 (yes, i know it's old. My company is the owner.).</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 5296, "user_id": 418066, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/38yuw.png?s=128&g=1", "display_name": "Biffen", "link": "https://stackoverflow.com/users/418066/biffen"}, "edited": false, "score": 0, "creation_date": 1556865227, "post_id": 55963528, "comment_id": 98579631, "body": "\u2018<i>using sed in Perl</i>\u2019 Why on earth would you do that?!"}], "answers": [{"comments": [{"owner": {"reputation": 27, "user_id": 11445504, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93bd33a2b0e4682255745f02a382d84f?s=128&d=identicon&r=PG&f=1", "display_name": "Dan", "link": "https://stackoverflow.com/users/11445504/dan"}, "edited": false, "score": 0, "creation_date": 1556864400, "post_id": 55963665, "comment_id": 98579289, "body": "Hi Ikegami,I still see an issue. sed: -e expression #1, char 9: unknown option to `s&#39;."}, {"owner": {"reputation": 27, "user_id": 11445504, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93bd33a2b0e4682255745f02a382d84f?s=128&d=identicon&r=PG&f=1", "display_name": "Dan", "link": "https://stackoverflow.com/users/11445504/dan"}, "edited": false, "score": 0, "creation_date": 1556864440, "post_id": 55963665, "comment_id": 98579310, "body": "I used system &quot;sed -i &#39;s/&#40;.*&#41;\\//\\1,/&#39; $a&quot; ;"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 27, "user_id": 11445504, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93bd33a2b0e4682255745f02a382d84f?s=128&d=identicon&r=PG&f=1", "display_name": "Dan", "link": "https://stackoverflow.com/users/11445504/dan"}, "edited": false, "score": 0, "creation_date": 1556864693, "post_id": 55963665, "comment_id": 98579396, "body": "That&#39;s not the solution I posted"}, {"owner": {"reputation": 27, "user_id": 11445504, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93bd33a2b0e4682255745f02a382d84f?s=128&d=identicon&r=PG&f=1", "display_name": "Dan", "link": "https://stackoverflow.com/users/11445504/dan"}, "edited": false, "score": 0, "creation_date": 1556864831, "post_id": 55963665, "comment_id": 98579449, "body": "I just used the same thing except that I used it in system() in a perl code"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 27, "user_id": 11445504, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93bd33a2b0e4682255745f02a382d84f?s=128&d=identicon&r=PG&f=1", "display_name": "Dan", "link": "https://stackoverflow.com/users/11445504/dan"}, "edited": false, "score": 0, "creation_date": 1556937366, "post_id": 55963665, "comment_id": 98608043, "body": "I&#39;ve adjusted my answer."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 3, "last_activity_date": 1556937349, "last_edit_date": 1556937349, "creation_date": 1556860493, "answer_id": 55963665, "question_id": 55963528, "link": "https://stackoverflow.com/questions/55963528/i-want-to-replace-last-by/55963665#55963665", "title": "I want to replace last / by ,", "body": "\n\n<p>First of all, the code you claim works doesn't.</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>$ printf 'a/b/c\\n' | sed 's/(.*)//\\1,/'\nsed: -e expression #1, char 9: unknown option to `s'\n</code></pre>\n\n<p>It should be</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>$ printf 'a/b/c\\n' | sed 's/\\(.*\\)\\//\\1,/'\na/b,c\n</code></pre>\n\n<p>You're asking how to execute this command from Perl. You can use the following:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code> system('sed', '-i', '/\\\\(.*\\\\)\\\\//\\\\1,/', '--', $qfn)\n</code></pre>\n\n<p>Note that you can quite easily do the same task in Perl itself.</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>local @ARGV = $qfn;\nlocal $^I = '';\nwhile (&lt;&gt;) {\n    s{^.*\\K/}{,};\n    print;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 27, "user_id": 11445504, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93bd33a2b0e4682255745f02a382d84f?s=128&d=identicon&r=PG&f=1", "display_name": "Dan", "link": "https://stackoverflow.com/users/11445504/dan"}, "edited": false, "score": 0, "creation_date": 1556864201, "post_id": 55963697, "comment_id": 98579223, "body": "Hi Tim, Still have an issue .sed: -e expression #1, char 12: unterminated `s&#39; command"}, {"owner": {"reputation": 27, "user_id": 11445504, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93bd33a2b0e4682255745f02a382d84f?s=128&d=identicon&r=PG&f=1", "display_name": "Dan", "link": "https://stackoverflow.com/users/11445504/dan"}, "edited": false, "score": 0, "creation_date": 1556864236, "post_id": 55963697, "comment_id": 98579236, "body": "I used this --&gt; sed -i &#39;s/^&#40;.*&#41;\\/&#40;.*&#41;$/\\1,\\2/&#39;"}, {"owner": {"reputation": 381798, "user_id": 1863229, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/4sh1l.png?s=128&g=1", "display_name": "Tim Biegeleisen", "link": "https://stackoverflow.com/users/1863229/tim-biegeleisen"}, "reply_to_user": {"reputation": 27, "user_id": 11445504, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93bd33a2b0e4682255745f02a382d84f?s=128&d=identicon&r=PG&f=1", "display_name": "Dan", "link": "https://stackoverflow.com/users/11445504/dan"}, "edited": false, "score": 0, "creation_date": 1556864543, "post_id": 55963697, "comment_id": 98579340, "body": "Use my answer as a starting point, and go from there.  It was working, at least in a Bash demo."}, {"owner": {"reputation": 27, "user_id": 11445504, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93bd33a2b0e4682255745f02a382d84f?s=128&d=identicon&r=PG&f=1", "display_name": "Dan", "link": "https://stackoverflow.com/users/11445504/dan"}, "edited": false, "score": 0, "creation_date": 1556865582, "post_id": 55963697, "comment_id": 98579770, "body": "Thanks Tim, thats working in bash. If I use the same in a perl code with system(), it does not."}], "tags": [], "owner": {"reputation": 381798, "user_id": 1863229, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/4sh1l.png?s=128&g=1", "display_name": "Tim Biegeleisen", "link": "https://stackoverflow.com/users/1863229/tim-biegeleisen"}, "is_accepted": false, "score": 0, "last_activity_date": 1556860693, "creation_date": 1556860693, "answer_id": 55963697, "question_id": 55963528, "link": "https://stackoverflow.com/questions/55963528/i-want-to-replace-last-by/55963697#55963697", "title": "I want to replace last / by ,", "body": "<p>Here is way to do this in <code>sed</code>:</p>\n\n<pre><code>echo \"365|366|367|369/0.18,improve/11.11,\" | sed 's/^\\(.*\\)\\/\\(.*\\)$/\\1,\\2/'\n\n      365|366|367|369/0.18,improve,11.11,\n</code></pre>\n\n<p>The regex pattern used is:</p>\n\n<pre><code>^\\(.*\\)\\/\\(.*\\)$\n</code></pre>\n\n<p>This says to match and capture everything up until the <em>last</em> forward slash.  Then, also match and capture everything <em>after</em> the last forward slash.  Finally replace with the first two capture groups, but now separated by a comma.</p>\n\n<p>Notes:</p>\n\n<ul>\n<li>forward slash <code>/</code> needs to be escaped by a backslash, to distinguish it from being the pattern delimiter</li>\n<li>parentheses in the capture groups also need to be escaped with backslash</li>\n</ul>\n"}], "owner": {"reputation": 27, "user_id": 11445504, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93bd33a2b0e4682255745f02a382d84f?s=128&d=identicon&r=PG&f=1", "display_name": "Dan", "link": "https://stackoverflow.com/users/11445504/dan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 65, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1556937349, "creation_date": 1556859468, "last_edit_date": 1556865162, "question_id": 55963528, "link": "https://stackoverflow.com/questions/55963528/i-want-to-replace-last-by", "title": "I want to replace last / by ,", "body": "<p>I want to replace this:</p>\n\n<pre><code>a/b/c|d,385|386|387|388|389|390|391|392|393|394|395|396|397|398|399|400/0.162,214|229|254|255|270|272|276|287|346|356|361|362|365|366|367|369/0.18,improve/11.11,\n</code></pre>\n\n<p>With:</p>\n\n<pre><code>a/b/c|d,385|386|387|388|389|390|391|392|393|394|395|396|397|398|399|400/0.162,214|229|254|255|270|272|276|287|346|356|361|362|365|366|367|369/0.18,improve,11.11,\n</code></pre>\n\n<p>With this sed command:</p>\n\n<pre><code>sed -i 's/\\(.*\\)\\//\\1,/'\n</code></pre>\n\n<p>This works in Unix. I tried to use this with system in Perl code, but it doesnt work. I request a solution using sed in Perl for the same.</p>\n"}, {"tags": ["json", "perl", "sigma.js"], "answers": [{"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 2, "last_activity_date": 1556861119, "creation_date": 1556861119, "answer_id": 55963748, "question_id": 55963240, "link": "https://stackoverflow.com/questions/55963240/how-to-create-a-specific-json-object-in-perl/55963748#55963748", "title": "How to create a specific json object in Perl", "body": "<p>You are repeatedly setting <code>$perl_data{nodes}</code> and <code>$perl_data{edges}</code> rather than adding to arrays referenced by them.</p>\n\n<pre><code>my %perl_data = (\n   nodes =&gt; [],\n   edges =&gt; [],\n);\n\nfor my $i (0..5) {\n   push @{ $perl_data{nodes} }, {\n      id    =&gt; \"..\",\n      label =&gt; \"..\",\n      x     =&gt; \"..\",\n      y     =&gt; \"..\",\n      size  =&gt; \"..\",\n   };\n\n   push @{ $perl_data{edges} }, {\n      id     =&gt; \"..\",\n      source =&gt; \"..\",\n      target =&gt; \"..\",\n      color  =&gt; \"..\",\n   };\n}\n</code></pre>\n"}], "owner": {"reputation": 45, "user_id": 11348001, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60c599cad5599beddfb07518a971eef1?s=128&d=identicon&r=PG&f=1", "display_name": "aesbetancourt", "link": "https://stackoverflow.com/users/11348001/aesbetancourt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 67, "favorite_count": 1, "accepted_answer_id": 55963748, "answer_count": 1, "score": 0, "last_activity_date": 1556861119, "creation_date": 1556857319, "question_id": 55963240, "link": "https://stackoverflow.com/questions/55963240/how-to-create-a-specific-json-object-in-perl", "title": "How to create a specific json object in Perl", "body": "<p>I am writing a script that allows to create a json object with information of a specific graph to use with SigmaJS.</p>\n\n<p>It is important to emphasize that the user must indicate how many iterations must be done to define the number of nodes that will exist in the graph.\nI am new in this language, in the code place the iterations in 5 just for example.</p>\n\n<pre><code>use strict;\nuse warnings;\nuse JSON;\nmy $json_obj = new JSON;\nmy %perl_data;\n\n\nfor (my $i=0; $i &lt;= 5 ; $i++) {\n    $perl_data{nodes} = [{id =&gt; \"..\", label =&gt; \"..\", label =&gt; \"..\", x =&gt; \"..\" , y =&gt; \"..\" , size =&gt; \"..\"}];\n    $perl_data{edges} = [{id =&gt; \"..\", source =&gt; \"..\", target =&gt; \"..\", color =&gt; \"..\"}];\n}\n\n\nprint $json_obj-&gt;pretty-&gt;encode(\\%perl_data);\n</code></pre>\n\n<p>I get this result:</p>\n\n<pre><code>{\n   \"nodes\" : [\n      {\n         \"x\" : \"..\",\n         \"id\" : \"..\",\n         \"y\" : \"..\",\n         \"label\" : \"..\",\n         \"size\" : \"..\"\n      }\n   ],\n   \"edges\" : [\n      {\n         \"target\" : \"..\",\n         \"id\" : \"..\",\n         \"color\" : \"..\",\n         \"source\" : \"..\"\n      }\n   ]\n}\n</code></pre>\n\n<p>But I need something like that:</p>\n\n<pre><code>{\n  \"nodes\": [\n    {\n      \"id\": \"n0\",\n      \"label\": \"A node\",\n      \"x\": 0,\n      \"y\": 0,\n      \"size\": 3\n    },\n    {\n      \"id\": \"n1\",\n      \"label\": \"Another node\",\n      \"x\": 3,\n      \"y\": 1,\n      \"size\": 2\n    },\n    {\n      \"id\": \"n2\",\n      \"label\": \"And a last one\",\n      \"x\": 1,\n      \"y\": 3,\n      \"size\": 1\n    }\n  ],\n  \"edges\": [\n    {\n      \"id\": \"e0\",\n      \"source\": \"n0\",\n      \"target\": \"n1\"\n    },\n    {\n      \"id\": \"e1\",\n      \"source\": \"n1\",\n      \"target\": \"n2\"\n    },\n    {\n      \"id\": \"e2\",\n      \"source\": \"n2\",\n      \"target\": \"n0\"\n    }\n  ]\n}\n</code></pre>\n"}, {"tags": ["perl", "ssl", "socks"], "comments": [{"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 0, "creation_date": 1556862422, "post_id": 55962571, "comment_id": 98578664, "body": "Maybe <a href=\"https://metacpan.org/pod/IO::Socket::Socks::Wrapper\" rel=\"nofollow noreferrer\">metacpan.org/pod/IO::Socket::Socks::Wrapper</a> will help?"}], "answers": [{"comments": [{"owner": {"reputation": 173, "user_id": 5587018, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/16ec6e1761227fb76e04356f9aa55d29?s=128&d=identicon&r=PG&f=1", "display_name": "philippe_44", "link": "https://stackoverflow.com/users/5587018/philippe-44"}, "edited": false, "score": 0, "creation_date": 1556894586, "post_id": 55964059, "comment_id": 98594966, "body": "Thanks for answering. What I fail to understand is once the start_SSL has happened, the object become blessed &quot;IO::Socket::SSL&quot;, so all the methods of the original objects are unaccessible, right? So, when a send() is called on the $cl, it will call IO::Socket::SSL::send() which will do the ciphering and then call its parents&#39;s send, which will be IO::Socket::INET::send (at least in ipv4). But that&#39;s not what we want, no? We want that call to call IO::Socket::Socks::send so that the SOCKS header is added and the encrypted packet is sent to the proxy."}, {"owner": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "reply_to_user": {"reputation": 173, "user_id": 5587018, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/16ec6e1761227fb76e04356f9aa55d29?s=128&d=identicon&r=PG&f=1", "display_name": "philippe_44", "link": "https://stackoverflow.com/users/5587018/philippe-44"}, "edited": false, "score": 0, "creation_date": 1556895822, "post_id": 55964059, "comment_id": 98595704, "body": "@philippe_44: As I said, SOCKS is only an initial handshake on the TCP connection. After this SOCKS handshake there is nothing more, just plain TCP. Thus there is no need to continue to write on the SOCKS socket since writing to the underlying TCP socket is exactly the same."}, {"owner": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "reply_to_user": {"reputation": 173, "user_id": 5587018, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/16ec6e1761227fb76e04356f9aa55d29?s=128&d=identicon&r=PG&f=1", "display_name": "philippe_44", "link": "https://stackoverflow.com/users/5587018/philippe-44"}, "edited": false, "score": 0, "creation_date": 1556896033, "post_id": 55964059, "comment_id": 98595818, "body": "@philippe_44: Or in other words: you could create an <code>IO::Socket::IP</code> object (or a plain AF_INET socket) and create a <code>socksify(socket)</code> function which just does the SOCKS handshake and then continue with the original socket."}, {"owner": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "reply_to_user": {"reputation": 173, "user_id": 5587018, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/16ec6e1761227fb76e04356f9aa55d29?s=128&d=identicon&r=PG&f=1", "display_name": "philippe_44", "link": "https://stackoverflow.com/users/5587018/philippe-44"}, "edited": false, "score": 0, "creation_date": 1556896042, "post_id": 55964059, "comment_id": 98595823, "body": "@philippe_44: or in other words: you could create an <code>IO::Socket::IP</code> object (or a plain AF_INET socket) and create a <code>socksify(socket)</code> function which just does the SOCKS handshake and then continue with the original socket."}, {"owner": {"reputation": 173, "user_id": 5587018, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/16ec6e1761227fb76e04356f9aa55d29?s=128&d=identicon&r=PG&f=1", "display_name": "philippe_44", "link": "https://stackoverflow.com/users/5587018/philippe-44"}, "edited": false, "score": 0, "creation_date": 1556898198, "post_id": 55964059, "comment_id": 98597049, "body": "Oh, I ot it now. I was reading the IO::Socket::Socks::send code and saw that   <code>sub send { \tmy $self = shift;  \tunless (defined ${*$self}-&gt;{SOCKS}-&gt;{TCP}) { \t\treturn $self-&gt;SUPER::send(@_); \t}  </code> and did not realize that it was only for UDP sockets"}], "tags": [], "owner": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "is_accepted": true, "score": 1, "last_activity_date": 1556863265, "creation_date": 1556863265, "answer_id": 55964059, "question_id": 55962571, "link": "https://stackoverflow.com/questions/55962571/using-iosocketssl-over-an-iosocketsocks-proxy/55964059#55964059", "title": "Using IO::Socket::SSL over an IO::Socket::SOCKS proxy", "body": "<p>Using a SOCKS proxy for TCP (and thus SSL) essentially means to first create a TCP socket, do some initial SOCKS handshake and then continue to work with the socket like with a normal TCP socket. <code>IO::Socket::Socks-&gt;new(...)</code> does this initial SOCKS handshake and returns a normal TCP socket. <code>IO::Socket::SSL-&gt;start_SSL($socket,...)</code> then does the TLS handshake on this socket. Combining both essentially does the same as <code>IO::Socket::SSL-&gt;new(...)</code>, only using a SOCKS proxy instead of a direct connection. </p>\n\n<p>Thus the code might look something like this:</p>\n\n<pre><code>use strict;\nuse warnings;\nuse IO::Socket::Socks;\nuse IO::Socket::SSL;\n\n# establish TCP connection to target via SOCKS proxy\nmy $cl = IO::Socket::Socks-&gt;new(\n    ProxyAddr =&gt; '127.0.0.1',\n    ProxyPort =&gt; 1234,\n    ConnectAddr =&gt; 'whatsmyip.net',\n    ConnectPort =&gt; 443\n) or die $!;\n\n# upgrade the TCP socket to TLS\nIO::Socket::SSL-&gt;start_SSL($cl,\n    # hostname is needed for SNI and certificate validation\n    SSL_hostname =&gt; 'whatsmyip.net'\n) or die $SSL_ERROR;\n\n# do a simple HTTP request on it\nprint $cl \"GET / HTTP/1.0\\r\\nHost: whatsmyip.net\\r\\n\\r\\n\";\nprint &lt;$cl&gt;;\n</code></pre>\n"}], "owner": {"reputation": 173, "user_id": 5587018, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/16ec6e1761227fb76e04356f9aa55d29?s=128&d=identicon&r=PG&f=1", "display_name": "philippe_44", "link": "https://stackoverflow.com/users/5587018/philippe-44"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 201, "favorite_count": 0, "accepted_answer_id": 55964059, "answer_count": 1, "score": 1, "last_activity_date": 1556863265, "creation_date": 1556850636, "question_id": 55962571, "link": "https://stackoverflow.com/questions/55962571/using-iosocketssl-over-an-iosocketsocks-proxy", "title": "Using IO::Socket::SSL over an IO::Socket::SOCKS proxy", "body": "<p>I'd like to mix SSL and SOCKS sockets. In other words, I want to send TLS encrypted data over a SOCKS proxy and I'd like to use IO::Socket::SSL and IO::Socket::Socks</p>\n\n<p>The only option I can think of is to duplicate IO::Socket::SSL into an IO::Socket::SocksSSL class that inherit from IO::Socket::Socks. That's the only way to have the right order for (eg send). I need first to have the SSL method invoked and then it will invoke the parent (IO::Socket::Socks) send. Same for connect where the SSL connect would invoke the Socks connect and then start the TLS negotiation. </p>\n\n<p>Unfortunately, the IO::Socket::SSL does not have a $SOCKET_CLASS var that would allow a subclass to easily decide what it inherits from, so I to change that one line in SSL.pm and duplicate all the code</p>\n\n<p>I'm probably missing something here</p>\n"}, {"tags": ["perl", "pipe"], "answers": [{"comments": [{"owner": {"reputation": 27241, "user_id": 363028, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/cP1F2.jpg?s=128&g=1", "display_name": "Ole Tange", "link": "https://stackoverflow.com/users/363028/ole-tange"}, "edited": false, "score": 0, "creation_date": 1556838470, "post_id": 55961270, "comment_id": 98574117, "body": "So much more elegant. I will need to try it for real, but the 5 minute test looks promising."}], "tags": [], "owner": {"reputation": 211, "user_id": 10776653, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d985f4c031e95a598d1b40a7a5059af2?s=128&d=identicon&r=PG&f=1", "display_name": "Uncle Billy", "link": "https://stackoverflow.com/users/10776653/uncle-billy"}, "is_accepted": true, "score": 5, "last_activity_date": 1556839544, "last_edit_date": 1556839544, "creation_date": 1556837978, "answer_id": 55961270, "question_id": 55961167, "link": "https://stackoverflow.com/questions/55961167/prepend-perl-program-with-filter/55961270#55961270", "title": "Prepend perl program with filter", "body": "<p>It's not at all clear from the description why a simple</p>\n\n<pre><code>open STDIN, '-|', 'your_filter', '--option1', ...\n</code></pre>\n\n<p>will not do.</p>\n"}, {"tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": false, "score": 1, "last_activity_date": 1560407770, "last_edit_date": 1560407770, "creation_date": 1556867102, "answer_id": 55964794, "question_id": 55961167, "link": "https://stackoverflow.com/questions/55961167/prepend-perl-program-with-filter/55964794#55964794", "title": "Prepend perl program with filter", "body": "<p>The way I see the problem is: To filter the <code>STDIN</code> for the script, by using an external program which is run from inside the script once the script is running (so, not with a pipeline).   With <a href=\"https://metacpan.org/pod/IPC::Run\" rel=\"nofollow noreferrer\">IPC::Run</a></p>\n\n<pre><code>use warnings;\nuse strict;\nuse feature 'say';\n\nuse IPC::Run qw(start pump finish);\n\nmy $filtered_in;\nFILTER_IN: {        \n    my @cmd = qw(a_filter.pl);  # add filter's options/arguments\n    my $h = start \\@cmd, \\my $in, \\$filtered_in;\n    while (&lt;&gt;) { \n        $in = $_; \n        pump $h while length $in;\n\n        # Wait for filter's output -- IF WANT to process lines as received\n        pump $h until $filtered_in =~ /\\n\\z/;\n        chomp $filtered_in;                    # process/use filter's output\n        $filtered_in .= '|';                   # as it's coming (if needed)\n    }    \n    finish $h or die \"Cleanup returned: $?\";\n};    \nsay $filtered_in // 'no input';\n</code></pre>\n\n<p>This allows one to process filter's lines of output as they are emitted. If that is not needed but we only want to accumulate filter's output for later then you don't need the code under <code># Wait for...</code></p>\n\n<hr>\n\n<p>Simplest test with <code>a_filter.pl</code> such as </p>\n\n<pre><code>use warnings;\nuse strict;\nSTDOUT-&gt;autoflush(1);\n\nmy $cnt = 0;    \nwhile (&lt;&gt;) { print \"line \", ++$cnt, \": \", $_ }\n</code></pre>\n\n<p>and then run</p>\n\n<pre><code>echo \"a\\nfew\\nlines\" | script.pl\n</code></pre>\n\n<p>with output</p>\n\n<pre>\nline 1: a|line 2: few|line 3: lines|\n</pre>\n\n<p>from our toy processing in <code>script.pl</code> above.</p>\n\n<p>This will filter input via a file as well, </p>\n\n<pre><code>script.pl &lt; input.txt\n</code></pre>\n"}], "owner": {"reputation": 27241, "user_id": 363028, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/cP1F2.jpg?s=128&g=1", "display_name": "Ole Tange", "link": "https://stackoverflow.com/users/363028/ole-tange"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 274, "favorite_count": 0, "accepted_answer_id": 55961270, "answer_count": 2, "score": 1, "last_activity_date": 1560407770, "creation_date": 1556837157, "question_id": 55961167, "link": "https://stackoverflow.com/questions/55961167/prepend-perl-program-with-filter", "title": "Prepend perl program with filter", "body": "<p>I want to write:</p>\n\n<pre><code>... | my_filter | myperlprogram\n</code></pre>\n\n<p>But I do not know how to run <code>my_filter</code> until I have started <code>myperlprogram</code>.</p>\n\n<p>Can I somehow in <code>myperlprogram</code> loop STDIN through <code>my_filter</code> before reading it?</p>\n\n<p>I am thinking something like:</p>\n\n<pre><code>pipe($a,$b);\nif(not fork()) {\n   close STDOUT; \n   open STDOUT, $b;\n   exec \"my_filter --with the correct --options\";\n} else {\n   close STDIN\n   open STDIN, $a\n}\n# continue reading STDIN now looped through `my_filter`\n</code></pre>\n"}, {"tags": ["linux", "perl", "unicode", "utf-8", "mork"], "comments": [{"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1556836177, "post_id": 55960901, "comment_id": 98573589, "body": "See also <a href=\"https://stackoverflow.com/q/8740106/2173773\">Evaluating escape sequences in perl</a>"}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1556836469, "post_id": 55960901, "comment_id": 98573660, "body": "See also <a href=\"https://metacpan.org/pod/String::Escape\" rel=\"nofollow noreferrer\">String::Escape</a>"}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1556836741, "post_id": 55960901, "comment_id": 98573723, "body": "If you omitted the last unescape substitution, you could simply have used <code>eval &quot;\\&quot;$folder\\&quot;&quot;</code>.. But using <code>eval</code> is in general not safe, so better to use e.g. <code>String::Escape</code>"}], "answers": [{"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1556849717, "post_id": 55961043, "comment_id": 98576177, "body": "choroba uses <code>&#47;r</code> causes the modified string to be returned rather than modifying the string in-place. Just remove the <code>r</code> is you want to continue working in-place."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1556849968, "post_id": 55961043, "comment_id": 98576207, "body": "Without knowing the spec, <code>\\\\(\\W)</code> is probably better than <code>\\\\([\\$\\\\])</code>. <code>s{\\\\(\\W)|\\\\(\\w))|\\$([0-9a-fA-F]{2})|\\$}{ defined($1) ? $1 : defined($2) ? die(&quot;Unsupported \\\\$2 escape&quot;) : defined($3) ? chr(hex($3)) : die(&#39;Invalid &quot;$&quot; sequence&#39;) }ges</code>"}, {"owner": {"reputation": 13, "user_id": 4170439, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aada892e553a685496736da6ab71693b?s=128&d=identicon&r=PG&f=1", "display_name": "Bangaio", "link": "https://stackoverflow.com/users/4170439/bangaio"}, "edited": false, "score": 0, "creation_date": 1556854251, "post_id": 55961043, "comment_id": 98576969, "body": "Thanks, that worked! Is using Encode::decode necessary if I just want to print out the result? (to capture it into a bash variable). From what I experimented if I use it, it complains about printing a wide character, unless i set <code>binmode (STDOUT, &quot;:utf8&quot;);</code>"}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "reply_to_user": {"reputation": 13, "user_id": 4170439, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aada892e553a685496736da6ab71693b?s=128&d=identicon&r=PG&f=1", "display_name": "Bangaio", "link": "https://stackoverflow.com/users/4170439/bangaio"}, "edited": false, "score": 0, "creation_date": 1556920649, "post_id": 55961043, "comment_id": 98605569, "body": "@Bangaio Yes, you need to encode all output to a terminal that will contain non-ascii characters. You can do this by either leaving it encoded (if you are sure it is already in the encoding your terminal expects and you don&#39;t want to do any string operations first), explicitly encoding the decoded string with Encode::encode, or setting an encoding layer like you mentioned so all strings are encoded when sent to that handle (but you should use <code>:encoding(UTF-8)</code>, not <code>:utf8</code>). The only problem with the last option is that it is a global effect, other things might not expect it."}], "tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": true, "score": 1, "last_activity_date": 1556859451, "last_edit_date": 1556859451, "creation_date": 1556836084, "answer_id": 55961043, "question_id": 55960901, "link": "https://stackoverflow.com/questions/55960901/printing-a-string-containing-utf-8-byte-sequences-on-perl/55961043#55961043", "title": "Printing a string containing utf-8 byte sequences on perl", "body": "<p>The following substitution seems to work for your input:</p>\n\n<pre><code>s/\\\\([\\$\\\\])|\\$(..)/$2 ? chr hex $2 : $1/ge;\n</code></pre>\n\n<p>Capture <code>\\$</code> or <code>\\\\</code>, if matched, replace them with <code>$</code> or <code>\\</code>. Otherwise, capture <code>$..</code> and convert to the corresponding byte.</p>\n\n<p>If you want to work with the result in Perl, don't forget to decode it from UTF-8.</p>\n\n<pre><code>$chars = decode('UTF-8', $bytes);\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 4170439, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aada892e553a685496736da6ab71693b?s=128&d=identicon&r=PG&f=1", "display_name": "Bangaio", "link": "https://stackoverflow.com/users/4170439/bangaio"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 113, "favorite_count": 0, "accepted_answer_id": 55961043, "answer_count": 1, "score": 1, "last_activity_date": 1556859451, "creation_date": 1556835109, "question_id": 55960901, "link": "https://stackoverflow.com/questions/55960901/printing-a-string-containing-utf-8-byte-sequences-on-perl", "title": "Printing a string containing utf-8 byte sequences on perl", "body": "<p>I'm new to perl, and I'm trying to print out the folderName from mork files (from Thunderbird).</p>\n\n<p>From: <a href=\"https://github.com/KevinGoodsell/mork-converter/blob/master/doc/mork-format.txt\" rel=\"nofollow noreferrer\">https://github.com/KevinGoodsell/mork-converter/blob/master/doc/mork-format.txt</a></p>\n\n<blockquote>\n  <p>The second type of special character sequence is a dollar sign\n  followed by two hexadecimal digits which give the value of the\n  replacement byte. This is often used for bytes that are non-printable\n  as ASCII characters, especially in UTF-16 text. For example, a string\n  with the Unicode snowman character (U+2603):</p>\n  \n  <p>\u2603snowman\u2603</p>\n  \n  <p>may be represented as UTF-16 text in an Alias this way:</p>\n  \n  <p>&lt;(83=$03$26s$00n$00o$00w$00m$00a$00n$00$03$26)></p>\n</blockquote>\n\n<p>From all the Thunderbird files I've seen it's actually encoded in UTF-8 (2 to 4 bytes).</p>\n\n<p>The following characters need to be escaped (with <code>\\</code>) within the string to be used literally: <code>$</code>, <code>)</code> and <code>\\</code></p>\n\n<p>Example: <code>aaa\\$AA$C3$B1b$E2$98$BA$C3$AD\\\\x08</code> should print <code>aaa$AA\u00f1b\u263a\u00ed\\x08</code></p>\n\n<p><code>$C3$B1</code> is <code>\u00f1</code>; <code>$E2$98$BA</code> is <code>\u263a</code>; <code>$C3$AD</code>is <code>\u00ed</code></p>\n\n<p>I tried using the regex to replaced unescaped <code>$</code> into <code>\\x</code></p>\n\n<pre><code>my $unescaped = qr/(?&lt;!\\\\)(?:(\\\\\\\\)*)/;\n$folder =~ s/$unescaped\\$/\\\\x/g;\n$folder =~ s/\\\\([\\\\$)])/$1/g;   # unescape \"\\ $ (\"\n</code></pre>\n\n<p>Within perl it just prints the literal string.</p>\n\n<p>My workaround is feeding it into bash's printf and it succeeds... unless there's a literal \"\\x\" in the string</p>\n\n<pre><code>$ folder=$(printf \"$(mork.pl 8777646a.msf)\")\n$ echo \"$folder\"\n  aaa$AA\u00f1b\u263a\u00ed\n</code></pre>\n\n<p>Questions i consulted:</p>\n\n<p><a href=\"https://stackoverflow.com/questions/12668670/convert-utf-8-character-sequence-to-real-utf-8-bytes\">Convert UTF-8 character sequence to real UTF-8 bytes</a>\nBut it seems it interprets every byte by itself, not in groups.</p>\n\n<p><a href=\"https://stackoverflow.com/questions/28788262/in-perl-how-can-i-convert-an-array-of-bytes-to-a-unicode-string\">In Perl, how can I convert an array of bytes to a Unicode string?</a>\nI don't know how to apply this solution to my use case.</p>\n\n<p>Is there any way to achieve this in perl?</p>\n"}, {"tags": ["bash", "perl", "awk", "sed"], "comments": [{"owner": {"reputation": 2519, "user_id": 3451029, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ba68a29f99c2baa28f481e20c5017aab?s=128&d=identicon&r=PG", "display_name": "pawamoy", "link": "https://stackoverflow.com/users/3451029/pawamoy"}, "edited": false, "score": 0, "creation_date": 1556824445, "post_id": 55958797, "comment_id": 98569370, "body": "Well it seems I found the solution already. The Perl command I wrote is working. Care to add an Awk version :) ?"}, {"owner": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "edited": false, "score": 0, "creation_date": 1556825916, "post_id": 55958797, "comment_id": 98570041, "body": "Are there always spaces after your leading <code>x</code>s? Are there ALWAYS leading <code>x</code>s? Do you care about the white space on each line remaining untouched?"}, {"owner": {"reputation": 68617, "user_id": 3776858, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/juunm.png?s=128&g=1", "display_name": "Cyrus", "link": "https://stackoverflow.com/users/3776858/cyrus"}, "edited": false, "score": 0, "creation_date": 1556826084, "post_id": 55958797, "comment_id": 98570123, "body": "With bash: <code>while read -r -a array; do array[0]=&quot;${#array[0]}&quot;; echo &quot;${array[@]}&quot;; done &lt; file</code>"}, {"owner": {"reputation": 2519, "user_id": 3451029, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ba68a29f99c2baa28f481e20c5017aab?s=128&d=identicon&r=PG", "display_name": "pawamoy", "link": "https://stackoverflow.com/users/3451029/pawamoy"}, "reply_to_user": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "edited": false, "score": 0, "creation_date": 1556828686, "post_id": 55958797, "comment_id": 98571098, "body": "@EdMorton yes, always the space. The character I use though is the &quot;group separator&quot; <code>\\035</code>. @Cyrus indeed, simple and pure bash! But I fear it would be a bit too slow on big files :)"}], "answers": [{"tags": [], "owner": {"reputation": 10642, "user_id": 6309601, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RNsPk.png?s=128&g=1", "display_name": "P....", "link": "https://stackoverflow.com/users/6309601/p"}, "is_accepted": false, "score": 1, "last_activity_date": 1556826786, "last_edit_date": 1556826786, "creation_date": 1556824656, "answer_id": 55958884, "question_id": 55958797, "link": "https://stackoverflow.com/questions/55958797/replace-pattern-by-its-length-portable-solution-for-bash/55958884#55958884", "title": "Replace pattern by its length (portable solution for Bash)", "body": "<p>Here is <code>gawk</code> version, but your perl solution is smarter and better. Capture the leading <code>xx....</code> into a variable called <code>first</code> using <code>gensub</code> function. and later replace the first column with its length. </p>\n\n<pre><code>awk '{first=gensub(/(^x+).*/,\"\\\\1\",\"g\", $0);$1=length(first)}1' file\n4 rest of the line\n3 again\n2 again and again\n5 you got my point\n</code></pre>\n\n<p>Which can be further shortened as:</p>\n\n<pre><code>awk '{$1=length(gensub(/(^x+).*/,\"\\\\1\",\"g\", $0))}1' file\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 2519, "user_id": 3451029, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ba68a29f99c2baa28f481e20c5017aab?s=128&d=identicon&r=PG", "display_name": "pawamoy", "link": "https://stackoverflow.com/users/3451029/pawamoy"}, "edited": false, "score": 0, "creation_date": 1556828789, "post_id": 55959122, "comment_id": 98571144, "body": "Wow, so simple. It&#39;s obvious now -_-&#39; Since my lines always start with a repetition of x followed by a space, it works perfectly."}, {"owner": {"reputation": 68617, "user_id": 3776858, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/juunm.png?s=128&g=1", "display_name": "Cyrus", "link": "https://stackoverflow.com/users/3776858/cyrus"}, "reply_to_user": {"reputation": 2519, "user_id": 3451029, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ba68a29f99c2baa28f481e20c5017aab?s=128&d=identicon&r=PG", "display_name": "pawamoy", "link": "https://stackoverflow.com/users/3451029/pawamoy"}, "edited": false, "score": 0, "creation_date": 1556830309, "post_id": 55959122, "comment_id": 98571734, "body": "This works so easy because you use one of awk&#39;s default field separators (white space or tab)."}], "tags": [], "owner": {"reputation": 68617, "user_id": 3776858, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/juunm.png?s=128&g=1", "display_name": "Cyrus", "link": "https://stackoverflow.com/users/3776858/cyrus"}, "is_accepted": true, "score": 6, "last_activity_date": 1556825687, "creation_date": 1556825687, "answer_id": 55959122, "question_id": 55958797, "link": "https://stackoverflow.com/questions/55958797/replace-pattern-by-its-length-portable-solution-for-bash/55959122#55959122", "title": "Replace pattern by its length (portable solution for Bash)", "body": "<p>Replace first pattern by its length:</p>\n\n<pre><code>awk '$1=length($1)' file\n</code></pre>\n\n<p>Output:</p>\n\n<pre>\n4 rest of the line\n3 again\n2 again and again\n5 you got my point\n</pre>\n"}, {"tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": false, "score": 2, "last_activity_date": 1556872992, "creation_date": 1556872992, "answer_id": 55966211, "question_id": 55958797, "link": "https://stackoverflow.com/questions/55958797/replace-pattern-by-its-length-portable-solution-for-bash/55966211#55966211", "title": "Replace pattern by its length (portable solution for Bash)", "body": "<p>It's tagged perl, and there's no solution that's perl, so I'll chip in with one. </p>\n\n<p>You're on the right road with your <code>/e</code> </p>\n\n<pre><code>#!/usr/bin/env perl; \nuse strict;\nuse warnings;\nuse Data::Dumper; \n\nwhile ( &lt;DATA&gt; ) {\n    s/^(x+)/length $1/e;\n    print;\n}\n__DATA__\nxxxx rest of the line\nxxx again\nxx again and again\nxxxxx you got my point\n</code></pre>\n\n<p>Or as a oneliner:</p>\n\n<pre><code>perl -pe 's/^(x+)/length $1/e' file. \n</code></pre>\n"}], "owner": {"reputation": 2519, "user_id": 3451029, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ba68a29f99c2baa28f481e20c5017aab?s=128&d=identicon&r=PG", "display_name": "pawamoy", "link": "https://stackoverflow.com/users/3451029/pawamoy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 111, "favorite_count": 1, "accepted_answer_id": 55959122, "answer_count": 3, "score": 2, "last_activity_date": 1556872992, "creation_date": 1556824270, "question_id": 55958797, "link": "https://stackoverflow.com/questions/55958797/replace-pattern-by-its-length-portable-solution-for-bash", "title": "Replace pattern by its length (portable solution for Bash)", "body": "<p>Is there a way to replace a pattern by its length with Sed/Awk/Perl? I'm looking for small portable commands that can be used in a Bash script.</p>\n\n<p>I have strings that all start with a specific character (let's say <code>x</code>), and I want to replace these repetitions of <code>x</code> by their length.</p>\n\n<p>So</p>\n\n<pre><code>xxxx rest of the line\nxxx again\nxx again and again\nxxxxx you got my point\n</code></pre>\n\n<p>Would become</p>\n\n<pre><code>4 rest of the line\n3 again\n2 again and again\n5 you got my point\n</code></pre>\n\n<p>Sed might not be a good candidate. I know Perl has a <code>e</code> option that allows to execute code in the substitution string, but I'm not sure how it would be used here: <code>perl -pe 's/^(x+)/length($1)/e'</code>?</p>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 82895, "user_id": 372239, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/2twLb.jpg?s=128&g=1", "display_name": "Toto", "link": "https://stackoverflow.com/users/372239/toto"}, "edited": false, "score": 1, "creation_date": 1556806244, "post_id": 55954244, "comment_id": 98560511, "body": "Your script doesn&#39;t run! Please edit your question and give real script."}, {"owner": {"reputation": 21, "user_id": 3914108, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/14ca8651eaa267a4151129ef77842bab?s=128&d=identicon&r=PG&f=1", "display_name": "coolent", "link": "https://stackoverflow.com/users/3914108/coolent"}, "reply_to_user": {"reputation": 82895, "user_id": 372239, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/2twLb.jpg?s=128&g=1", "display_name": "Toto", "link": "https://stackoverflow.com/users/372239/toto"}, "edited": false, "score": 0, "creation_date": 1556806820, "post_id": 55954244, "comment_id": 98560870, "body": "Hi Toto, please find the modified script. Thanks."}, {"owner": {"reputation": 3509, "user_id": 4243840, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aaeabd769bae1bf82fd4b8882fed6653?s=128&d=identicon&r=PG", "display_name": "JGNI", "link": "https://stackoverflow.com/users/4243840/jgni"}, "edited": false, "score": 2, "creation_date": 1556807452, "post_id": 55954244, "comment_id": 98561215, "body": "put <code>use strict;</code> and <code>use warnings;</code> at the top of your script then run it. Fix the reported errors."}, {"owner": {"reputation": 3509, "user_id": 4243840, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aaeabd769bae1bf82fd4b8882fed6653?s=128&d=identicon&r=PG", "display_name": "JGNI", "link": "https://stackoverflow.com/users/4243840/jgni"}, "edited": false, "score": 1, "creation_date": 1556807945, "post_id": 55954244, "comment_id": 98561472, "body": "That still does not compile <code>Unmatched ( in regex; marked by &lt;-- HERE in m&#47;mystatus=( &lt;-- HERE PASSED\\||FAILED&#47; at &#47;home&#47;john&#47;test.pl line 6</code> Perl version 5.24.1"}, {"owner": {"reputation": 21, "user_id": 3914108, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/14ca8651eaa267a4151129ef77842bab?s=128&d=identicon&r=PG&f=1", "display_name": "coolent", "link": "https://stackoverflow.com/users/3914108/coolent"}, "edited": false, "score": 0, "creation_date": 1556808498, "post_id": 55954244, "comment_id": 98561817, "body": "Hi, sorry about that. Please find the modified script. Thanks"}, {"owner": {"reputation": 21, "user_id": 3914108, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/14ca8651eaa267a4151129ef77842bab?s=128&d=identicon&r=PG&f=1", "display_name": "coolent", "link": "https://stackoverflow.com/users/3914108/coolent"}, "edited": false, "score": 0, "creation_date": 1556809813, "post_id": 55954244, "comment_id": 98562585, "body": "Hi, Updated the whole thing correctly. Please verify. thanks"}, {"owner": {"reputation": 82895, "user_id": 372239, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/2twLb.jpg?s=128&g=1", "display_name": "Toto", "link": "https://stackoverflow.com/users/372239/toto"}, "edited": false, "score": 0, "creation_date": 1556809908, "post_id": 55954244, "comment_id": 98562633, "body": "You can&#39;t grep two lines at the same time."}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1556810152, "post_id": 55954244, "comment_id": 98562768, "body": "Try this: <code>if (   (grep &#47;mystatus\\s*=\\s*(?:PASSED|FAILED)&#47;, @file) &amp;&amp;  !(grep &#47;myupdate\\s*=\\s*TEST&#47;, @file) ) { ... }</code>"}, {"owner": {"reputation": 21, "user_id": 3914108, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/14ca8651eaa267a4151129ef77842bab?s=128&d=identicon&r=PG&f=1", "display_name": "coolent", "link": "https://stackoverflow.com/users/3914108/coolent"}, "edited": false, "score": 0, "creation_date": 1556810162, "post_id": 55954244, "comment_id": 98562774, "body": "Please suggest any alternate way to match those two lines using those matching pattern. Thanks"}], "answers": [{"comments": [{"owner": {"reputation": 21, "user_id": 3914108, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/14ca8651eaa267a4151129ef77842bab?s=128&d=identicon&r=PG&f=1", "display_name": "coolent", "link": "https://stackoverflow.com/users/3914108/coolent"}, "edited": false, "score": 0, "creation_date": 1556811380, "post_id": 55955564, "comment_id": 98563473, "body": "Thank you for your suggestion. It prints <code>not matching</code> . but my input file contains matching lines which are  <code>mystatus=PASSED</code> <code>myupdate=TESTED</code>"}], "tags": [], "owner": {"reputation": 82895, "user_id": 372239, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/2twLb.jpg?s=128&g=1", "display_name": "Toto", "link": "https://stackoverflow.com/users/372239/toto"}, "is_accepted": false, "score": 1, "last_activity_date": 1556810343, "creation_date": 1556810343, "answer_id": 55955564, "question_id": 55954244, "link": "https://stackoverflow.com/questions/55954244/perl-grep-multiple-pattern/55955564#55955564", "title": "perl grep multiple pattern", "body": "<p>Here is a way to go:</p>\n\n<pre><code>use strict;\nuse warnings;\nuse feature 'say';\n\nmy $file;\n{ \n    local $/ = undef;\n    open my $fh, '&lt;', 'path/to/file' or die \"unable to open file: $!\"\n    $file = &lt;$fh&gt;;\n}\nif($file =~  /^(?=.*\\bmystatus=(?:PASSED|FAILED)\\b)(?=.*\\bmyupdate=TESTED\\b)/) {\n    say \"ok\";\n} else {\n    say \"not matching\";\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 21, "user_id": 3914108, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/14ca8651eaa267a4151129ef77842bab?s=128&d=identicon&r=PG&f=1", "display_name": "coolent", "link": "https://stackoverflow.com/users/3914108/coolent"}, "edited": false, "score": 1, "creation_date": 1556811778, "post_id": 55955808, "comment_id": 98563672, "body": "Thanks Toto and Sin and H&#229;kon H&#230;gland for your help."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1556813373, "post_id": 55955808, "comment_id": 98564525, "body": "Honestly, I&#39;d say regex really is the wrong tool for this particular job."}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user557597"}, "is_accepted": true, "score": 2, "last_activity_date": 1556811150, "creation_date": 1556811150, "answer_id": 55955808, "question_id": 55954244, "link": "https://stackoverflow.com/questions/55954244/perl-grep-multiple-pattern/55955808#55955808", "title": "perl grep multiple pattern", "body": "<pre><code>use strict;\nuse warnings;\n\n$/ = undef;\n\n\nmy $str = &lt;DATA&gt;;\n\nif ( $str =~ /(?s)^(?=.*mystatus\\s*=\\s*(?:PASSED|FAILED))(?=.*myupdate\\s*=\\s*(?!TEST\\b))/ ) {\n    print \"ok\";\n}\nelse {\n    print \"not matching\\n\";\n}\n\n\n__DATA__\n\nmystatus=PASSED\n\nmyupdate=TESTED\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 21, "user_id": 3914108, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/14ca8651eaa267a4151129ef77842bab?s=128&d=identicon&r=PG&f=1", "display_name": "coolent", "link": "https://stackoverflow.com/users/3914108/coolent"}, "edited": false, "score": 0, "creation_date": 1556814148, "post_id": 55956383, "comment_id": 98564910, "body": "Thank you so much Sobrique. I&#39;ll try this method."}], "tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": false, "score": 2, "last_activity_date": 1556813344, "creation_date": 1556813344, "answer_id": 55956383, "question_id": 55954244, "link": "https://stackoverflow.com/questions/55954244/perl-grep-multiple-pattern/55956383#55956383", "title": "perl grep multiple pattern", "body": "<p>OK, so no one's actually written about the actual problem with your code. </p>\n\n<p>grep matches a condition. You're specifying <code>//</code> which means 'match a regex', and then you don't supply an actual regex. </p>\n\n<p>Also you're escaping your <code>|</code> that's conditional, so you're matching a literal.</p>\n\n<pre><code>print \"This matches\\n\" if \"myupdate ne TEST\" =~ /myupdate ne TEST/;\n</code></pre>\n\n<p>This isn't going to do what you want. </p>\n\n<p>If you did want to do a <code>regex</code> test, you'd need something a little different, like this:</p>\n\n<p>So for example:</p>\n\n<pre><code>while ( &lt;DATA&gt; ) {\n   print \"Matching line $_\" if m/mystatus=(PASSED|FAILED)/;\n}\n\n__DATA__\nmystatus=PASSED\nmyupdate=TESTED\n</code></pre>\n\n<p>The second problem is - you read your file into <code>@try</code> which splits based on lines. So both patterns will <em>never</em> match, because they're evaluated separately. </p>\n\n<p>You can take several approaches to this, but one would be to set \"$/\" which is the record separator - set to <code>undef</code> and everything is read into a single  array element, but... then it gets a bit banal if you then slurp into an array. </p>\n\n<p>So I'd urge you not to use <code>grep</code> for this task in the first place - <code>grep</code> is great for filtering a list of elements based on a condition, but that's not actually what you're trying to do. </p>\n\n<p>So I'd suggest what you should actually do is not <code>grep</code> at all, and instead:</p>\n\n<pre><code>#!/usr/bin/env perl; \nuse strict;\nuse warnings;\nuse Data::Dumper; \n\nmy %values = map { /(\\w+)=(\\w+)/ } &lt;DATA&gt;;\n\n\n#for debug\nprint Dumper \\%values;\n\nprint \"OK\\n\" if $values{'mystatus'} eq 'PASSED' and $values{'myupdate'} eq 'TESTED'; \n\n__DATA__\nmystatus=PASSED\nmyupdate=TESTED\n</code></pre>\n\n<p>This will use the <code>map</code> function to select key-value pairs out of your input file, and then just let you test the contents of a particular key, like you seem to want. </p>\n\n<p>Or to use your more complicated logic:</p>\n\n<pre><code>#!/usr/bin/env perl; \nuse strict;\nuse warnings;\nuse Data::Dumper; \n\nmy %values = map { /(\\w+)=(\\w+)/ } &lt;DATA&gt;;\n\n\n#for debug\nprint Dumper \\%values;\n\nprint \"OK\\n\" if ( $values{'mystatus'} eq 'PASSED' or $values{'mystatus'} eq 'FAILED' ) \n                   and $values{'myupdate'} eq 'TESTED'; \n\n__DATA__\nmystatus=PASSED\nmyupdate=TESTED\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 3914108, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/14ca8651eaa267a4151129ef77842bab?s=128&d=identicon&r=PG&f=1", "display_name": "coolent", "link": "https://stackoverflow.com/users/3914108/coolent"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 805, "favorite_count": 1, "accepted_answer_id": 55955808, "answer_count": 3, "score": 0, "last_activity_date": 1556813344, "creation_date": 1556805891, "last_edit_date": 1556809561, "question_id": 55954244, "link": "https://stackoverflow.com/questions/55954244/perl-grep-multiple-pattern", "title": "perl grep multiple pattern", "body": "<p>I am trying to grep and match two patterns </p>\n\n<p><code>if(grep /mystatus eq 'PASSED\\||FAILED/ &amp;&amp; /myupdate ne TEST/, @try)</code>  then it should print \"ok\". However its not matching correctly. it prints 'not matching'. Could you please suggest ? Thanks in Advance.</p>\n\n<pre><code>use strict;\nuse warnings;\nopen(FILE,\"myfile\");\nmy @file = &lt;FILE&gt;;\n\n\nif(grep /mystatus eq 'PASSED\\||FAILED/ &amp;&amp; /myupdate ne TEST/, @file)\n{\nprint \"ok\";\n}\nelse\n{\nprint \"not matching\\n\";\n}\n</code></pre>\n\n<h1>myfile has these lines</h1>\n\n<h1>mystatus=PASSED</h1>\n\n<h1>myupdate=TESTED</h1>\n"}, {"tags": ["perl", "constants", "subroutine"], "comments": [{"owner": {"reputation": 38072, "user_id": 46395, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5ce828f20abb195ef5d971205ee36c27?s=128&d=identicon&r=PG", "display_name": "daxim", "link": "https://stackoverflow.com/users/46395/daxim"}, "edited": false, "score": 0, "creation_date": 1556808181, "post_id": 55953232, "comment_id": 98561629, "body": "<a href=\"https://metacpan.org/pod/Const::Fast#RATIONALE\" rel=\"nofollow noreferrer\">metacpan.org/pod/Const::Fast#RATIONALE</a>"}, {"owner": {"reputation": 3051, "user_id": 6237339, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8e4c4dd2523d09028942a397df378237?s=128&d=identicon&r=PG&f=1", "display_name": "Skeeve", "link": "https://stackoverflow.com/users/6237339/skeeve"}, "edited": false, "score": 0, "creation_date": 1556814725, "post_id": 55953232, "comment_id": 98565174, "body": "How did you come to know that? I can&#39;t find a hint about that in <a href=\"https://perldoc.perl.org/constant.html\" rel=\"nofollow noreferrer\">perldoc.perl.org/constant.html</a>"}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1556822508, "post_id": 55953232, "comment_id": 98568495, "body": "The speed of execution for using constants may not be the main reason why one want to use it. Usually constants are used to improve maintenance and readability of the code."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 3051, "user_id": 6237339, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8e4c4dd2523d09028942a397df378237?s=128&d=identicon&r=PG&f=1", "display_name": "Skeeve", "link": "https://stackoverflow.com/users/6237339/skeeve"}, "edited": false, "score": 1, "creation_date": 1556828096, "post_id": 55953232, "comment_id": 98570874, "body": "@Skeeve  It&#39;s right there (see my answer) ... ?"}], "answers": [{"comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1556827760, "post_id": 55959541, "comment_id": 98570755, "body": "Btw, I&#39;ve used <a href=\"https://metacpan.org/pod/Const::Fast\" rel=\"nofollow noreferrer\">Const::Fast</a> for years by now, without a glitch."}, {"owner": {"reputation": 89, "user_id": 7785514, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/957afe1f163ce1a41cdf8ee167249bfb?s=128&d=identicon&r=PG&f=1", "display_name": "tv1902", "link": "https://stackoverflow.com/users/7785514/tv1902"}, "edited": false, "score": 0, "creation_date": 1556875090, "post_id": 55959541, "comment_id": 98584316, "body": "Not only this answered my question, I also got to learn few other things. Thanks a lot!!"}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": true, "score": 5, "last_activity_date": 1559626867, "last_edit_date": 1559626867, "creation_date": 1556827680, "answer_id": 55959541, "question_id": 55953232, "link": "https://stackoverflow.com/questions/55953232/best-practices-of-using-constant-in-perl/55959541#55959541", "title": "Best practices of using constant in perl", "body": "<p>That is a reasonable concern but there is in fact no function call overhead.</p>\n\n<p>Let's first have a look at <a href=\"https://perldoc.perl.org/constant.html\" rel=\"nofollow noreferrer\">constant pragma</a> docs</p>\n\n<blockquote>\n  <p>When a constant is used in an expression, Perl replaces it with its value at compile time, and may then optimize the expression further. In particular, any code in an if (CONSTANT) block will be optimized away if the constant is false.</p>\n</blockquote>\n\n<p>So you are not paying for a function call at runtime.</p>\n\n<p>Further, under <code>Technical Notes</code> it says</p>\n\n<blockquote>\n  <p>In the current implementation, scalar constants are actually inlinable subroutines. As of version 5.004 of Perl, the appropriate scalar constant is inserted directly in place of some subroutine calls, thereby saving the overhead of a subroutine call. See \n  <a href=\"https://perldoc.perl.org/perlsub.html#Constant-Functions\" rel=\"nofollow noreferrer\">Constant Functions in perlsub</a> for details about how and when this happens.</p>\n</blockquote>\n\n<p>We should take note of the \"<em>current implementation</em>\" phrase, but I think it's safe to expect this not to change in a way that would impose a runtime penalty.</p>\n\n<p>Please read the rest of this section, and make sure to see the <a href=\"https://perldoc.perl.org/constant.html#CAVEATS\" rel=\"nofollow noreferrer\">Caveats</a>.</p>\n\n<p>The mentioned <a href=\"https://perldoc.perl.org/perlsub.html#Constant-Functions\" rel=\"nofollow noreferrer\">Constant Functions in perlsub</a> describes</p>\n\n<blockquote>\n  <p>Functions with a prototype of <code>()</code> are potential candidates for inlining. If the result after optimization and constant folding is either a constant or a lexically-scoped scalar which has no other references, then it will be used in place of function calls made without <code>&amp;</code>. Calls made using <code>&amp;</code> are never inlined. (See <em>constant.pm</em> for an easy way to declare most constants.)</p>\n</blockquote>\n\n<p>This confirms that one is generally fine efficiency wise. </p>\n\n<p>On the other hand, note that the use of <code>constant</code> pragma can raise questions of whether the use of barewords is of concern in your code (which it may or may not be).</p>\n\n<p>The \"good practice\" regards the <em>programming</em> benefits of using constant (read-only) declarations for variables that should not be changing. Such practice generally improves the code substantially.</p>\n"}], "owner": {"reputation": 89, "user_id": 7785514, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/957afe1f163ce1a41cdf8ee167249bfb?s=128&d=identicon&r=PG&f=1", "display_name": "tv1902", "link": "https://stackoverflow.com/users/7785514/tv1902"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 225, "favorite_count": 0, "closed_date": 1606856363, "accepted_answer_id": 55959541, "answer_count": 1, "score": 1, "last_activity_date": 1559626867, "creation_date": 1556802565, "question_id": 55953232, "link": "https://stackoverflow.com/questions/55953232/best-practices-of-using-constant-in-perl", "closed_reason": "Opinion-based", "title": "Best practices of using constant in perl", "body": "<p>I just started learning perl, I came to know that, constant are treated as subroutines in perl. I wonder then why the use of constants can be a good practice if everytime, it is making subroutine call and CPU needs to use stack/jump instruction?</p>\n"}, {"tags": ["perl", "command-line", "file-rename"], "answers": [{"tags": [], "owner": {"reputation": 6928, "user_id": 1015385, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8fc84a03227c566697c4a16b2e9f8782?s=128&d=identicon&r=PG", "display_name": "JRFerguson", "link": "https://stackoverflow.com/users/1015385/jrferguson"}, "is_accepted": true, "score": 3, "last_activity_date": 1556797798, "creation_date": 1556797798, "answer_id": 55951837, "question_id": 55951655, "link": "https://stackoverflow.com/questions/55951655/using-the-perl-based-rename-command-to-change-filenames-commencing-with-dashes/55951837#55951837", "title": "Using the perl-based rename command to change filenames commencing with dashes", "body": "<p>Many commands, including Perl's <code>rename</code> script, support a double-dash to denote the end of a command's options. Hence, to rename <code>--the-file-name</code> to <code>the-file-name</code>:</p>\n\n<pre><code>rename 's/-//g' -- --the-file-name\n</code></pre>\n\n<p>Perl's <a href=\"https://metacpan.org/pod/Getopt::Long\" rel=\"nofollow noreferrer\">Getopt::Long</a> module supports this and is used by <code>rename</code>.</p>\n\n<p>In general, see also: <a href=\"https://unix.stackexchange.com/questions/11376/what-does-double-dash-mean-also-known-as-bare-double-dash\">https://unix.stackexchange.com/questions/11376/what-does-double-dash-mean-also-known-as-bare-double-dash</a></p>\n"}, {"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2404501"}, "edited": false, "score": 0, "creation_date": 1556812629, "post_id": 55955974, "comment_id": 98564159, "body": "Note that <code>rename</code> applies the transformation to the pathname(s) exactly as given, not just the last component, so <code>rename &#39;s&#47;-&#47;&#47;g&#39; $PWD&#47;--*</code> will be bad if <code>$PWD</code> has any dashes in it."}, {"owner": {"reputation": 7570, "user_id": 17945, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/e8cbc0b9ed29b027a127d8df309af5a6?s=128&d=identicon&r=PG", "display_name": "reinierpost", "link": "https://stackoverflow.com/users/17945/reinierpost"}, "edited": false, "score": 0, "creation_date": 1556830474, "post_id": 55955974, "comment_id": 98571804, "body": "Good point. The <code>find</code> solution will also pass (relative) pathnames to <code>rename</code>."}], "tags": [], "owner": {"reputation": 7570, "user_id": 17945, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/e8cbc0b9ed29b027a127d8df309af5a6?s=128&d=identicon&r=PG", "display_name": "reinierpost", "link": "https://stackoverflow.com/users/17945/reinierpost"}, "is_accepted": false, "score": 1, "last_activity_date": 1556811850, "creation_date": 1556811850, "answer_id": 55955974, "question_id": 55951655, "link": "https://stackoverflow.com/questions/55951655/using-the-perl-based-rename-command-to-change-filenames-commencing-with-dashes/55955974#55955974", "title": "Using the perl-based rename command to change filenames commencing with dashes", "body": "<p>JRFerguson's answer actually works for many commands, not just <code>rename</code>.</p>\n\n<p>Some alternatives also work for commands that do not recognize <code>--</code>:</p>\n\n<ul>\n<li><p>Prefix the filename with <code>./</code> or the full path to it:</p>\n\n<pre><code>rename 's/-//g' ./--*\n</code></pre>\n\n<p>or</p>\n\n<pre><code>rename 's/-//g' $PWD/--*\n</code></pre></li>\n<li><p>Use <code>find</code> (which will also traverse any subdirectories):</p>\n\n<pre><code>find . -name '-*' -exec rename 's/-//g' '{}' ';'\n</code></pre>\n\n<p>or</p>\n\n<pre><code>find . -name '-*' -exec rename 's/-//g' '{}' +\n</code></pre></li>\n</ul>\n"}], "owner": {"reputation": 522, "user_id": 1776104, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/uvLfa.png?s=128&g=1", "display_name": "user02814", "link": "https://stackoverflow.com/users/1776104/user02814"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 94, "favorite_count": 0, "accepted_answer_id": 55951837, "answer_count": 2, "score": 1, "last_activity_date": 1556811850, "creation_date": 1556797177, "question_id": 55951655, "link": "https://stackoverflow.com/questions/55951655/using-the-perl-based-rename-command-to-change-filenames-commencing-with-dashes", "title": "Using the perl-based rename command to change filenames commencing with dashes", "body": "<p><code>rename</code> is a perl-based command-line tool to rename multiple files.</p>\n\n<p>I have, by accident, created numerous files with names that commence with, or contain, a dash or double dash (<code>-</code> or <code>--</code>). When I try to use rename to get rid of the dashes in, for example, '--the-file-name' using</p>\n\n<pre><code>rename 's/-//g' --the-file-name\n</code></pre>\n\n<p>rename (understandably) complains that 'the-file-name' is not an allowable option for the rename command.</p>\n\n<p>Is there a way to tell rename that '--the-file-name' is a file name and not an option.</p>\n"}, {"tags": ["perl", "class", "object", "declaration"], "answers": [{"tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": false, "score": 1, "last_activity_date": 1556796177, "creation_date": 1556796177, "answer_id": 55951371, "question_id": 55951236, "link": "https://stackoverflow.com/questions/55951236/cleaner-way-of-declaring-many-classes-in-perl/55951371#55951371", "title": "Cleaner way of declaring many classes in perl", "body": "<p>You can generate the <code>use</code> clauses in a Makefile. Generating the construction of the object will be more tricky as the arguments aren't uniform - but you can e.g. save the exceptions to a hash. This will make deployment more complex and searching the code tricky.</p>\n\n<p>It might be wiser to rename each step by its purpose, and group the steps together logically to form a hierarchy instead of a plain sequence of steps.</p>\n"}, {"comments": [{"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1556808773, "post_id": 55953032, "comment_id": 98561957, "body": "You&#39;re missing the <code>step_1_class-&gt;import</code> step."}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1556808829, "post_id": 55953032, "comment_id": 98561987, "body": "Also, you&#39;re using <code>$i_class</code> variable which is never declared nor defined."}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1556809028, "post_id": 55953032, "comment_id": 98562114, "body": "And (3), <code>strict &#39;vars&#39;</code> doesn&#39;t change what can be a class name or not."}, {"owner": {"reputation": 3509, "user_id": 4243840, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aaeabd769bae1bf82fd4b8882fed6653?s=128&d=identicon&r=PG", "display_name": "JGNI", "link": "https://stackoverflow.com/users/4243840/jgni"}, "reply_to_user": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1556809122, "post_id": 55953032, "comment_id": 98562190, "body": "@choroba re strict &#39;vars&#39; I didn&#39;t know that tx"}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1556817323, "post_id": 55953032, "comment_id": 98566219, "body": "There&#39;s no need to <code>can(&#39;import&#39;)</code>. Import is special and can always be called."}], "tags": [], "owner": {"reputation": 3509, "user_id": 4243840, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aaeabd769bae1bf82fd4b8882fed6653?s=128&d=identicon&r=PG", "display_name": "JGNI", "link": "https://stackoverflow.com/users/4243840/jgni"}, "is_accepted": true, "score": 3, "last_activity_date": 1556809072, "last_edit_date": 1556809072, "creation_date": 1556801899, "answer_id": 55953032, "question_id": 55951236, "link": "https://stackoverflow.com/questions/55951236/cleaner-way-of-declaring-many-classes-in-perl/55953032#55953032", "title": "Cleaner way of declaring many classes in perl", "body": "<p>Your use classes as written are equivalent to</p>\n\n<pre><code>BEGIN {\n    require step_1_class;\n    step_1_class-&gt;import() if step_1_class-&gt;can('import');\n    require step_2_class;\n    step_2_class-&gt;import() if step_2_class-&gt;can('import');\n    ...\n}\n</code></pre>\n\n<p>This can be rewritten as</p>\n\n<pre><code>BEGIN {\n    foreach my $i ( 1 .. $max_class ) {\n        eval \"require step_${i}_class\";\n        \"step_${i}_class\"-&gt;import() if \"step_${i}_class\"-&gt;can('import');\n    }\n}\n</code></pre>\n\n<p>The new statements are a little more complex as you have separate variables and differing parameters, however this can be worked around by storing all the objects in an array and also preprocessing the parameters like so</p>\n\n<pre><code>my @steps;\nmy @parameters = ( undef, \\@args1, \\@args2, \\@args3, [ @args4, $args_4_1], ...);\nfor ($i = 1; $i &lt;= $max_class; $i++) {\n    push @steps, \"step_${i}_class\"-&gt;new(@{$parameters[$i]});\n}\n</code></pre>\n"}], "owner": {"reputation": 981, "user_id": 7019069, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/SQoGB.jpg?s=128&g=1", "display_name": "nck", "link": "https://stackoverflow.com/users/7019069/nck"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 51, "favorite_count": 0, "accepted_answer_id": 55953032, "answer_count": 2, "score": 1, "last_activity_date": 1556809072, "creation_date": 1556795728, "question_id": 55951236, "link": "https://stackoverflow.com/questions/55951236/cleaner-way-of-declaring-many-classes-in-perl", "title": "Cleaner way of declaring many classes in perl", "body": "<p>I\u00b4m working in a code which follows some steps, and each of this steps is done in one class. Right now my code looks like this:</p>\n\n<pre><code>use step_1_class;\nuse step_2_class;\nuse step_3_class;\nuse step_4_class;\nuse step_5_class;\nuse step_6_class;\nuse step_7_class;\n...\nuse step_n_class;\n\n\nmy $o_step_1 = step_1_class-&gt;new(@args1);\nmy $o_step_2 = step_2_class-&gt;new(@args2);\nmy $o_step_3 = step_3_class-&gt;new(@args3);\nmy $o_step_4 = step_4_class-&gt;new(@args4,$args_4_1);\nmy $o_step_5 = step_5_class-&gt;new(@args5);\nmy $o_step_6 = step_6_class-&gt;new(@args6,$args_6_1);\nmy $o_step_7 = step_7_class-&gt;new(@args7);\n...\nmy $o_step_n = step_n_class-&gt;new(@argsn);\n</code></pre>\n\n<p>Is there a cleaner way of declaring this somewhat similar classes wihtout using hundreds of lines?</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 0, "creation_date": 1556829812, "post_id": 55950521, "comment_id": 98571540, "body": "In Perl, there are array variables and list values.  A value is never an array value.  A variable is never a list variable."}], "answers": [{"tags": [], "owner": {"reputation": 627, "user_id": 4689430, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/SJU8y.png?s=128&g=1", "display_name": "elixir", "link": "https://stackoverflow.com/users/4689430/elixir"}, "is_accepted": true, "score": 5, "last_activity_date": 1556793369, "creation_date": 1556793369, "answer_id": 55950578, "question_id": 55950521, "link": "https://stackoverflow.com/questions/55950521/how-to-add-an-item-in-the-middle-of-list-in-perl/55950578#55950578", "title": "How to add an item in the middle of list in perl", "body": "<p><a href=\"https://perldoc.perl.org/functions/splice.html\" rel=\"noreferrer\">splice</a> is what you need.</p>\n\n<pre><code>splice @array, 3, 0, 'sapota';\n</code></pre>\n"}], "owner": {"reputation": 25, "user_id": 11130057, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ad5d5fc7f183e98a174d850087c2e23a?s=128&d=identicon&r=PG&f=1", "display_name": "Ekanvitha", "link": "https://stackoverflow.com/users/11130057/ekanvitha"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 99, "favorite_count": 0, "accepted_answer_id": 55950578, "answer_count": 1, "score": 1, "last_activity_date": 1556793813, "creation_date": 1556793180, "last_edit_date": 1556793813, "question_id": 55950521, "link": "https://stackoverflow.com/questions/55950521/how-to-add-an-item-in-the-middle-of-list-in-perl", "title": "How to add an item in the middle of list in perl", "body": "<p>How to add an item in the middle of the list in Perl latest version.If there is any method, please help me out\nex:</p>\n\n<pre><code>@array=qw(apple mango waterlemon pineapple lemon);\nprint(\"@array\\n\");\n</code></pre>\n\n<p>This is the code and now I need to append an item \"sapota\" in the list with index[3]. How can I add this</p>\n"}, {"tags": ["regex", "perl", "pcre", "ultraedit"], "comments": [{"owner": {"reputation": 17840, "user_id": 2102956, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b347220471064a3cb72d768ec2314e6?s=128&d=identicon&r=PG", "display_name": "Pushpesh Kumar Rajwanshi", "link": "https://stackoverflow.com/users/2102956/pushpesh-kumar-rajwanshi"}, "edited": false, "score": 1, "creation_date": 1556781985, "post_id": 55947524, "comment_id": 98547660, "body": "If <code>$0</code> doesn&#39;t work then group the whole pattern and then use <code>$1</code> for whole match"}, {"owner": {"reputation": 784, "user_id": 1118630, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/466905ee415e4cd9667f29eea987f15b?s=128&d=identicon&r=PG", "display_name": "jonah_w", "link": "https://stackoverflow.com/users/1118630/jonah-w"}, "reply_to_user": {"reputation": 17840, "user_id": 2102956, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b347220471064a3cb72d768ec2314e6?s=128&d=identicon&r=PG", "display_name": "Pushpesh Kumar Rajwanshi", "link": "https://stackoverflow.com/users/2102956/pushpesh-kumar-rajwanshi"}, "edited": false, "score": 0, "creation_date": 1556782266, "post_id": 55947524, "comment_id": 98547806, "body": "Thanks @PushpeshKumarRajwanshi I was thinking about that solution, but was really curious why <code>$0</code> doesn&#39;t work on UltraEdit, I&#39;ve tried <code>$0</code> on Sublime Text, and it works fine."}, {"owner": {"reputation": 17840, "user_id": 2102956, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b347220471064a3cb72d768ec2314e6?s=128&d=identicon&r=PG", "display_name": "Pushpesh Kumar Rajwanshi", "link": "https://stackoverflow.com/users/2102956/pushpesh-kumar-rajwanshi"}, "edited": false, "score": 0, "creation_date": 1556782418, "post_id": 55947524, "comment_id": 98547887, "body": "Yes, in some regex dialects <code>$0</code> works like in Java also it works but in some other dialects it doesn&#39;t work, as it seems just not supported, hence that&#39;s the obvious and easy workaround."}, {"owner": {"reputation": 784, "user_id": 1118630, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/466905ee415e4cd9667f29eea987f15b?s=128&d=identicon&r=PG", "display_name": "jonah_w", "link": "https://stackoverflow.com/users/1118630/jonah-w"}, "reply_to_user": {"reputation": 17840, "user_id": 2102956, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b347220471064a3cb72d768ec2314e6?s=128&d=identicon&r=PG", "display_name": "Pushpesh Kumar Rajwanshi", "link": "https://stackoverflow.com/users/2102956/pushpesh-kumar-rajwanshi"}, "edited": false, "score": 1, "creation_date": 1556782590, "post_id": 55947524, "comment_id": 98547969, "body": "I&#39;ll go with that method if couldn&#39;t find another way. Thanks for the explanation."}], "answers": [{"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 1, "last_activity_date": 1556784532, "last_edit_date": 1556784532, "creation_date": 1556783359, "answer_id": 55947853, "question_id": 55947524, "link": "https://stackoverflow.com/questions/55947524/in-ultraedit-for-mac-i-want-to-replace-group0full-match-with-group0-plus-some/55947853#55947853", "title": "In UltraEdit for Mac, I want to replace group0(full match) with group0 plus some more", "body": "<p>When using \"Perl\" regular expressions in Ultra Edit,</p>\n\n<ul>\n<li><code>$&amp;</code> contains the matched text.</li>\n<li><code>$&#x60;</code> contains the portion of the document leading up to the matched text.</li>\n<li><code>$'</code> contains the portion of the document following the matched text.</li>\n</ul>\n\n<p>This is documented <a href=\"https://www.ultraedit.com/support/tutorials-power-tips/ultraedit/perl-regular-expressions.html\" rel=\"nofollow noreferrer\">here</a>. (Scroll down to \"Perl regex output modifiers\".)</p>\n\n<p>This is consistent with Perl, where <code>$0</code> contains the first argument to the program (the name of the program).</p>\n\n<p><a href=\"https://i.stack.imgur.com/dTYRr.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/dTYRr.png\" alt=\"Screenshot of Demonstration\"></a></p>\n"}], "owner": {"reputation": 784, "user_id": 1118630, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/466905ee415e4cd9667f29eea987f15b?s=128&d=identicon&r=PG", "display_name": "jonah_w", "link": "https://stackoverflow.com/users/1118630/jonah-w"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 48, "favorite_count": 0, "accepted_answer_id": 55947853, "answer_count": 1, "score": 0, "last_activity_date": 1556786670, "creation_date": 1556781902, "last_edit_date": 1556786670, "question_id": 55947524, "link": "https://stackoverflow.com/questions/55947524/in-ultraedit-for-mac-i-want-to-replace-group0full-match-with-group0-plus-some", "title": "In UltraEdit for Mac, I want to replace group0(full match) with group0 plus some more", "body": "<p>I'm using UltraEdit in Perl regex mode to do that.\ni.e. <code>(cat) (dog)</code> replaced with <code>$0\\n$1 $2</code></p>\n\n<p>Although the $1 and $2 worked, I couldn't find a way to make <code>$0</code> work.</p>\n\n<p>Does anyone experience this issue?</p>\n"}, {"tags": ["json", "perl"], "answers": [{"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 2387, "user_id": 30868, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/732ae7c85e255086f3c720fe34a00767?s=128&d=identicon&r=PG", "display_name": "ashishsony", "link": "https://stackoverflow.com/users/30868/ashishsony"}, "edited": false, "score": 0, "creation_date": 1556782501, "post_id": 55947491, "comment_id": 98547933, "body": "Decoded of course. Your question has nothing to do with JSON"}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 3, "last_activity_date": 1556784158, "last_edit_date": 1556784158, "creation_date": 1556781769, "answer_id": 55947491, "question_id": 55947321, "link": "https://stackoverflow.com/questions/55947321/how-to-find-a-key-and-return-its-path-through-the-hierarchy-in-a-json-using-perl/55947491#55947491", "title": "how to find a key and return its path through the hierarchy in a JSON using perl", "body": "<p>It's just a straightforward tree traversal. The following returns as soon as a match is found (rather than looking for all matches).</p>\n\n<pre><code>sub key_search {\n    my $target = $_[1];   \n    my @todo = [ $_[0] ];\n    while (@todo) {\n        my ($val, @path) = @{ shift(@todo) };\n        my $reftype = ref($val);\n        if (!$reftype) {\n           # Nothing to do\n        }\n        elsif ($reftype eq 'HASH') {\n           for my $key (keys(%$val)) {\n              return @path, $target if $key eq $target;\n\n              push @todo, [ $val-&gt;{$key}, @path, $key ];\n           }\n        }\n        elsif ($reftype eq 'ARRAY') {\n           for my $i (0..$#$val) {\n              push @todo, [ $val-&gt;[$i], @path, $i ];\n           }\n        }\n        else {\n           die(\"Invalid data.\\n\");\n        }\n    }\n\n    return;\n}\n\nmy @path = key_search($data, 'key8')\n   or die(\"Not found.\\n\");\n</code></pre>\n\n<p>Notes</p>\n\n<ul>\n<li>The result is ambiguous if the data can contain arrays, and if any of the hashes can have integers for keys. Steps can be taken to disambiguate them.</li>\n<li>The above doesn't check for cycles, but those can't exist in JSON.</li>\n<li>Replace <code>push</code> with <code>unshift</code> to get a depth-first search instead of a breadth-first search.</li>\n</ul>\n"}], "owner": {"reputation": 2387, "user_id": 30868, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/732ae7c85e255086f3c720fe34a00767?s=128&d=identicon&r=PG", "display_name": "ashishsony", "link": "https://stackoverflow.com/users/30868/ashishsony"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 46, "favorite_count": 0, "accepted_answer_id": 55947491, "answer_count": 1, "score": 0, "last_activity_date": 1556784158, "creation_date": 1556781098, "question_id": 55947321, "link": "https://stackoverflow.com/questions/55947321/how-to-find-a-key-and-return-its-path-through-the-hierarchy-in-a-json-using-perl", "title": "how to find a key and return its path through the hierarchy in a JSON using perl", "body": "<pre><code>{\n\n  \"root1\" : {\n      \"sub1\" : null,\n      \"sub2\" : {\n         \"subsub1\" : {\n            \"key1\" : {\n\n            },\n            \"key2\" : {\n\n            },\n            \"key3\" : {\n\n            },\n            \"key4\" : {\n\n            }\n         }\n      },\n      \"sub3\" : {\n         \"subsub2\" : {\n            \"key5\" : {\n\n            }\n         }\n      }\n  },\n  \"root2\" : {\n      \"sub1\" : null,\n      \"sub2\" : {\n         \"subsub1\" : {\n            \"key1\" : {\n\n            },\n            \"key2\" : {\n\n            },\n            \"key3\" : {\n\n            },\n            \"key4\" : {\n\n            }\n         }\n      },\n      \"sub3\" : {\n         \"subsub2\" : {\n            \"key8\" : {\n\n            }\n         }\n      }\n  }\n}\n</code></pre>\n\n<p>consider the above json.\nHow to know if 'key8' exists in this json and also find the path where its found in the json.</p>\n\n<p>e.g if searched for 'key8' need to get output similar to :</p>\n\n<pre><code>root2-&gt;sub3-&gt;subsub2-&gt;key8\n</code></pre>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1556772385, "post_id": 55945651, "comment_id": 98544148, "body": "That <code>$checkpoint[$k]</code> are elements of the array <code>@checkpoint</code> with indices <code>0, 1, 2</code> (what your <code>$k</code> is in the loop).  The &quot;<i>uninitialized value within...</i>&quot; means that the array <code>@checkpoint</code> doesn&#39;t actually have all those elements. So your first <code>split</code> probably returned not quite three elements, but fewer.  Print  out the whole <code>@checkpoint</code> to see."}], "answers": [{"tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": false, "score": 2, "last_activity_date": 1556822984, "last_edit_date": 1556822984, "creation_date": 1556773036, "answer_id": 55945905, "question_id": 55945651, "link": "https://stackoverflow.com/questions/55945651/how-to-make-initialized-value-with-in-array-in-regrep-compilation/55945905#55945905", "title": "How to make initialized value with in @array in regrep compilation", "body": "<p><strong>Update</strong> &nbsp; The question changed. Originally the loop went to <code>$k&lt;=2</code> (array size wasn't mentioned), what this answer addressed.  The main point remains and now it is clear that the loop goes up to the index <em>equal</em> to the array size, so one past the fence; the limit should be <code>$k &lt; $i</code>. Thus \"<em>value of <code>$k</code> for which there is no element</em>\" mentioned below is the last one looped over.</p>\n\n<hr>\n\n<p>The <code>$checkpoint[$k]</code>, that draws the warning in the regex, are elements of the array <code>@checkpoint</code> with indices <code>0, 1, 2</code> -- what <code>$k</code> is in the loop.  </p>\n\n<p>The \"<em>uninitialized value within...</em>\" means that the array <code>@checkpoint</code> doesn't actually have all those elements, so for a value of <code>$k</code> for which there is no element the regex attempts to retrieve an undefined value and complains.</p>\n\n<p>The first <code>split</code> likely returned fewer than three elements. Print  out the <code>@checkpoint</code> to see.</p>\n\n<p>A few more comments</p>\n\n<ul>\n<li><p>Please <em>always</em> have <code>use warnigs;</code> and <code>use strict;</code> at the beginning of a program</p></li>\n<li><p>Use <em>lexical filehandles</em>, so open files with <code>open my $name, ...</code> (not <code>open NAME, ...</code>)</p></li>\n<li><p>To loop over numbers from a range a nice way is</p>\n\n<pre><code>for my $k (0..2) { ... }\n</code></pre></li>\n<li><p>(<strong>update</strong>) &nbsp; ... but the question changed, with the loop (intended to be) over all array elements and then there is no reason to use the index. Iterate directly over elements</p>\n\n<pre><code>foreach my $checkpoint (@checkpoints) { .... }\n</code></pre></li>\n<li><p>Whenever you use <code>\\s+</code> for the separator pattern in <a href=\"https://perldoc.perl.org/functions/split.html\" rel=\"nofollow noreferrer\">split</a> most likely you should be using a special pattern <code>' '</code>, which splits by <code>\\s+</code> and also disregards leading and trailing space.</p></li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 2, "last_activity_date": 1556778109, "creation_date": 1556778109, "answer_id": 55946676, "question_id": 55945651, "link": "https://stackoverflow.com/questions/55945651/how-to-make-initialized-value-with-in-array-in-regrep-compilation/55946676#55946676", "title": "How to make initialized value with in @array in regrep compilation", "body": "<p><code>@checkpoint</code> has <code>$i</code> elements numbered <code>0</code> to <code>$i-1</code>, but you're accessing the element at index <code>$i</code>.</p>\n\n<pre><code>for (my $k=0; $k&lt;=$i; $k++)\n</code></pre>\n\n<p>should be</p>\n\n<pre><code>for (my $k=0; $k&lt;$i; $k++)\n</code></pre>\n\n<p>Actually, it should be</p>\n\n<pre><code>for my $k (0..$#checkpoints)\n</code></pre>\n\n<p>Actually, it should be</p>\n\n<pre><code>for my $checkpoint (@checkpoints)\n</code></pre>\n"}], "owner": {"reputation": 41, "user_id": 6283788, "user_type": "registered", "profile_image": "https://graph.facebook.com/789795011164491/picture?type=large", "display_name": "Tri Ngo", "link": "https://stackoverflow.com/users/6283788/tri-ngo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 47, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1556822984, "creation_date": 1556771108, "last_edit_date": 1556777821, "question_id": 55945651, "link": "https://stackoverflow.com/questions/55945651/how-to-make-initialized-value-with-in-array-in-regrep-compilation", "title": "How to make initialized value with in @array in regrep compilation", "body": "<p>i try to run this code lines,  </p>\n\n<pre><code>@checkpoint = split (/\\s+/,$array_lcp[0]);\n$i=scalar @checkpoint\nprint NAME \" $checkpoint[0] \";\nfor ($k=0; $k&lt;=i; $k++)\n{\nif ($array_ARGVTEMP[$d] =~ m/$checkpoint[$k]/i)\n                    {\n                            @array = split (/\\s+/,$array_ARGVTEMP[$d]);\n                            print NAME \"   $checkpoint[$k]|  $k|| \n                            $checkpoint[0]|||  $checkpoint[1] ||||$checkpoint[2]|||||  \";\n                    } }\n</code></pre>\n\n<p>but in the result warnings, it  said that:</p>\n\n<p>\"Use of uninitialized value within @checkpoint in regexp compilation at new3.pl line 64 (#2)\" and line 64 is \" if($array_ARGVTEMP[$d] =~ m/$checkpoint[$k]/i) \"</p>\n\n<p>Please help me, Thank you</p>\n"}]