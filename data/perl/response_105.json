[{"tags": ["arrays", "regex", "perl", "extract", "hostname"], "comments": [{"owner": {"reputation": 83048, "user_id": 2255089, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZNAsT.jpg?s=128&g=1", "display_name": "Casimir et Hippolyte", "link": "https://stackoverflow.com/users/2255089/casimir-et-hippolyte"}, "edited": false, "score": 1, "creation_date": 1484162147, "post_id": 41598596, "comment_id": 70400538, "body": "Split your string on dots and take the first part."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1484165808, "post_id": 41598596, "comment_id": 70402596, "body": "<code>[A-Za-z0-9-_]+</code> is usually written <code>[\\w-]</code>"}], "answers": [{"comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1484167374, "post_id": 41598743, "comment_id": 70403424, "body": "I think you have let the OP down here. This is a very tiny part of their solution, and for goodness sake explain that <code>$_</code> is the default operand."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1484174416, "post_id": 41598743, "comment_id": 70406739, "body": "@Borodin It didn&#39;t seem to me that this was a problem, but rather that they firstly needed to see the idiom <code>([^X]+)</code>. But on a more careful reading ... you are right about explanations, added."}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": true, "score": 2, "last_activity_date": 1485749870, "last_edit_date": 1485749870, "creation_date": 1484161404, "answer_id": 41598743, "question_id": 41598596, "link": "https://stackoverflow.com/questions/41598596/perl-regex-to-extract-machine-name-from-hostname/41598743#41598743", "title": "Perl regex to extract machine name from hostname", "body": "<p>The <em>negated character class</em> <code>[^...]</code> matches any character <em>except</em> those listed. Then</p>\n\n<pre><code>my ($name) = $_ =~ /([^.]+)/;\n</code></pre>\n\n<p>matches all characters up to the first <code>.</code> and stops at it, thus there is no reason to explicitly match the dot (nor the rest of the line). The match is captured and assigned to <code>$name</code>. </p>\n\n<hr>\n\n<p>When the <em>match operator</em> is used in the <em>list context</em> it returns the list of all matches</p>\n\n<pre><code>my @matches = $var =~ m/$pattern/g;\n</code></pre>\n\n<p><em>Even if there is only one match we need the list context so that the match is returned</em>, thus the parenthesis in <code>my ($name) = ...</code>, to impose the list context on the match operator. In the above example this is done by assigning to an array. Otherwise we'd have the <em>scalar context</em>, in which case the match operator behaves differently. See this <a href=\"http://perldoc.perl.org/perlop.html#Regexp-Quote-Like-Operators\" rel=\"nofollow noreferrer\">in perlop</a> and see <a href=\"http://perldoc.perl.org/perlretut.html\" rel=\"nofollow noreferrer\">perlretut</a>.</p>\n\n<p>The <code>m</code> above may be omitted and most often is. But note that this is not always the case, for example when different delimeters are used. I suggest a good read through <code>perlretut</code>.</p>\n\n<p>The <em>default input and pattern-searching space</em> (<code>$_</code>) in your loop holds the currently processed element.  Regex by default works with <code>$_</code> so <code>$_</code> need not be specified. See <a href=\"http://perldoc.perl.org/perlvar.html#General-Variables\" rel=\"nofollow noreferrer\">General Variables in perlvar</a>, and see a regex-related comment in the <code>perlop</code> link. So you can do</p>\n\n<pre><code>foreach (@vm_list) {\n    /([^.]+)/;           # OK but better assign directly from the match\n    my $host_name = $1;\n} \n</code></pre>\n\n<p>However, it is clearer to assign directly from the match, as in the answer.</p>\n"}, {"tags": [], "owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "is_accepted": false, "score": 1, "last_activity_date": 1484162863, "creation_date": 1484162863, "answer_id": 41599154, "question_id": 41598596, "link": "https://stackoverflow.com/questions/41598596/perl-regex-to-extract-machine-name-from-hostname/41599154#41599154", "title": "Perl regex to extract machine name from hostname", "body": "<p>I think you're making this more complicated than it needs to be. Split on periods and use the first part:</p>\n\n<pre><code>use strict;\nuse warnings;\nuse 5.012;\n\nwhile (&lt;DATA&gt;) {\n    chomp;\n    say ((split(/\\./))[0]);\n}\n\n__DATA__\nvmserver1.domain.com\nvmserver2\nvm-server-three.otherdomain.com\nserver_four.domain.com\nserver5\nserver6\nsome-silly-vm-name\nanother_server.maybewithadomain.com\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>vmserver1\nvmserver2\nvm-server-three\nserver_four\nserver5\nserver6\nsome-silly-vm-name\nanother_server\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 0, "last_activity_date": 1484167274, "last_edit_date": 1484167274, "creation_date": 1484166941, "answer_id": 41600229, "question_id": 41598596, "link": "https://stackoverflow.com/questions/41598596/perl-regex-to-extract-machine-name-from-hostname/41600229#41600229", "title": "Perl regex to extract machine name from hostname", "body": "<p>There are no such things as \"fully-qualified\" or \"partially-qualified\" host names. The host name is the first part of a URL after the protocol name, and its contents are protocol-dependent and host-dependent. You must define what you mean before writing regular expression patterns</p>\n\n<p>It is easy to separate parts of a string divided by dots, but you haven't specified which part or parts you want. It feels like you are casting about, writing varieties of random code in the hope that one of them works</p>\n\n<p>This isn't really an answer, and you will never get a proper solution until you have established exactly what you need. It is very wrong to keep trying things until you get a correct output for your sample input. Your software will throw your company's business if you publish it like that. Your code must work <em>for every input it could ever possibly have</em>. That is why you must understand the <em>meaning</em> of your requirement instead of just the words and your small amount of data</p>\n\n<p>Are you forced to use Hungarian notation like <code>@aVmList</code>? It is not very popular any more, and has no place in Perl, where the initial <code>@</code> says that the item is an array, so <code>a</code> is superfluous and makes your program less readable. And it is the Perl way to avoid capital letters in identifiers for lexical variables, so your array would be much better as <code>@vm_list</code></p>\n\n<p>Your first attempt</p>\n\n<pre><code>$_ =~ /(.*?)\\./;\n</code></pre>\n\n<p>is identical to</p>\n\n<pre><code>/(.*?)\\./;\n</code></pre>\n\n<p>which does nothing at all other than possibly setting <code>$1</code> if the pattern matches. You don't seem to have grasped the purpose of <code>$_</code>, and it's not the place to explain it fully here</p>\n\n<p>Forget about look-around constructs. The first thing you need to do is to define a <strong><em>rule</em></strong> that extracts the required part of your host name. How do you do it when you look at a host name</p>\n\n<p>What happens to <code>a.b.c.d.co.jp</code>?</p>\n\n<p>What happens to <code>a.b.c.vm-server-three.otherdomain.com.server_four.domain.com.co.uk</code>?</p>\n\n<p>You can't write those off on the basis that your code will never see such strings. If you cannot be certain that they have already been validated by the calling code then you must check them yourself before you attempt to extract the appropriate part.</p>\n"}], "owner": {"reputation": 11, "user_id": 5425233, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bc4635d190a7cb3e583855eb322d1951?s=128&d=identicon&r=PG&f=1", "display_name": "Equo", "link": "https://stackoverflow.com/users/5425233/equo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1358, "favorite_count": 0, "accepted_answer_id": 41598743, "answer_count": 3, "score": 0, "last_activity_date": 1485749870, "creation_date": 1484160982, "last_edit_date": 1495541347, "question_id": 41598596, "link": "https://stackoverflow.com/questions/41598596/perl-regex-to-extract-machine-name-from-hostname", "title": "Perl regex to extract machine name from hostname", "body": "<p>I am using Perl v5.10 on CentOS 6.8</p>\n\n<p>My program reads a list of host names into Perl array <code>@aVmList</code>. I am trying to extract only the machine name from each of them.</p>\n\n<p>Some of the host names are fully qualified, some are not. Some contain dashes or underscores.</p>\n\n<p>I have no control over the contents of the array.</p>\n\n<p>Here is an example of the data I'm working with.</p>\n\n<pre><code>my @aVmList = qw(\n    vmserver1.domain.com\n    vmserver2\n    vm-server-three.otherdomain.com\n    server_four.domain.com\n    server5\n    server6\n    some-silly-vm-name\n    another_server.maybewithadomain.com\n);\n</code></pre>\n\n<p>I would like to extract only the machine name from each element, ending up with the following.</p>\n\n<pre><code>vmserver1 \nvmserver2\nvm-server-three \nserver_four \nserver5\nserver6\nsome-silly-vm-name\nanother_server\n</code></pre>\n\n<p>I found the regex <code>/(.*?)\\./</code> which almost works, but only when all of the names are fully qualified.</p>\n\n<pre><code>foreach ( @aVmList ) {\n\n    $_ =~ /(.*?)\\./;\n\n    my $sVmName = $1;\n\n    print $sVmName;\n}\n</code></pre>\n\n<p>I thought I needed to use a look-behind for the dots. I came up with the following</p>\n\n<pre><code>$_ =~ /([A-Za-z0-9-_]+)(?!=\\.)/;\n</code></pre>\n\n<p>which seemed to work in the regex tester, but when I ran my Perl script it still matched the whole string.</p>\n\n<p>I don't like the path I'm headed down with the regex pattern above, because now I'm assuming that the host names will only contain \"word\" characters or a hyphen. </p>\n\n<p>I know I shouldn't have to account for special characters in host names, but I'm trying to base the regex pattern on matching anything before the first dot in a domain name <code>suffix.something.com</code>.</p>\n\n<p>I also found <a href=\"https://stackoverflow.com/questions/11415467\"><em>Regular expression to extract hostname from fully qualified domain name</em></a>\nwhich sounded like what I wanted, but neither of the suggestions from there seemed to work.</p>\n\n<p>I tried:</p>\n\n<pre><code>$_ =~ (.+?)(?=\\.)\n</code></pre>\n\n<p>and</p>\n\n<pre><code>$_ =~ ^([^.]+)\\..*$\n</code></pre>\n"}, {"tags": ["perl", "precision"], "comments": [{"owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 0, "creation_date": 1484160623, "post_id": 41598066, "comment_id": 70399739, "body": "Um, no? The string <code>8.22120183514065e-05</code> is itself just a finite-precision representation of the &quot;true&quot; value represented, for example, in the IEEE 754 standard."}, {"owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 0, "creation_date": 1484160738, "post_id": 41598066, "comment_id": 70399797, "body": "Unless you are just asking about string manipulations of string values, in which case I withdraw my objection."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1484160872, "post_id": 41598066, "comment_id": 70399872, "body": "I take it you want to add the number in the exponent to the precision -- so if it&#39;s <code>e-05</code> you add five digits to what you&#39;d normally have (15 by default).  If it&#39;s <code>e03</code> you&#39;d add three, etc.  I don&#39;t see how to retrieve the would-be &quot;exponent&quot; without working it out by hand first."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 2, "creation_date": 1484165208, "post_id": 41598066, "comment_id": 70402270, "body": "Re &quot;<i>Using an arbitrarily large precision adds additional digits</i>&quot;, No, it doesn&#39;t. That&#39;s the number that was actually stored since it was impossible to store 8.22120183514065e-05 exactly."}, {"owner": {"reputation": 34726, "user_id": 133939, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/pN9C5.png?s=128&g=1", "display_name": "Zaid", "link": "https://stackoverflow.com/users/133939/zaid"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1484165369, "post_id": 41598066, "comment_id": 70402370, "body": "@ikegami I get that. I just don&#39;t want to see any more or any fewer digits than what the scientific notation has. Similar to what <code>%g</code> does, except that <code>%g</code> maintains scientific notation for the example shown; it doesn&#39;t convert it to decimal notation"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 2, "creation_date": 1484165439, "post_id": 41598066, "comment_id": 70402421, "body": "There&#39;s no way to know how many digits the code literal had."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1484191705, "post_id": 41598066, "comment_id": 70411549, "body": "You&#39;re basically asking for something that doesn&#39;t make sense. You ask us to &quot;consider the float <code>8.22120183514065e-05</code>&quot; but that isn&#39;t a floating-point value: it&#39;s a string of characters. You may get a useful answer if you explain what you&#39;re trying to do with real-life examples, but unless the values you&#39;re dealing with are input as strings exactly as you show, and the precision of those values corresponds exactly to the number of digits in the string, then what you&#39;re hoping for is meaningless."}], "answers": [{"comments": [{"owner": {"reputation": 34726, "user_id": 133939, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/pN9C5.png?s=128&g=1", "display_name": "Zaid", "link": "https://stackoverflow.com/users/133939/zaid"}, "edited": false, "score": 0, "creation_date": 1484166596, "post_id": 41599913, "comment_id": 70403016, "body": "Fair enough. I was hoping for some sort of built-in, <code>sprintf</code>-y way to do this. Oh well."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 34726, "user_id": 133939, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/pN9C5.png?s=128&g=1", "display_name": "Zaid", "link": "https://stackoverflow.com/users/133939/zaid"}, "edited": false, "score": 1, "creation_date": 1484168024, "post_id": 41599913, "comment_id": 70403745, "body": "From a number? The information isn&#39;t there. From a string? That could cause a loss of precision. Best to work with the string form. Solution added to answer."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 3, "last_activity_date": 1484168235, "last_edit_date": 1484168235, "creation_date": 1484165613, "answer_id": 41599913, "question_id": 41598066, "link": "https://stackoverflow.com/questions/41598066/how-can-i-retain-display-precision-when-converting-from-scientific-to-decimal-no/41599913#41599913", "title": "How can I retain display precision when converting from scientific to decimal notation?", "body": "<p>I believe you are asking how to stringify a number such that the stringification has the same number of signficant digits as the code literal that produced the number.</p>\n\n<p>That's impossible. The number of significant digits in the code literal that produced the number (if there even was such a literal) is not stored anywhere.</p>\n\n<p>Simply put, there's no way to get</p>\n\n<pre><code>0.0000822120183514065\n</code></pre>\n\n<p>or even</p>\n\n<pre><code>8.22120183514065e-05\n</code></pre>\n\n<p>from the number</p>\n\n<pre><code>0.0000822120183514065132508730204818903075647540390491485595703125\n</code></pre>\n\n<p>from the available information.</p>\n\n<hr>\n\n<p>It would be different if you started with the string </p>\n\n<pre><code>8.22120183514065e-05\n</code></pre>\n\n<p>or if you knew the desired precision such that you could create the above string using</p>\n\n<pre><code>sprintf('%.*e', $significant_digits-1, $n)\n</code></pre>\n\n<p>If you had this, you could perform string manipulations to move the <code>.</code> as needed.</p>\n\n<pre><code>$n =~ s/^\\d\\K\\.// ? $n =~ s/^\\d+\\Ke([+-]\\d+)\\z// : $n =~ s/^\\d\\Ke([+-]\\d+)\\z// or die;\nmy $exp = $1 + 1;\nif    ( $exp &lt;= 0         ) { $n = '0.' . ( '0' x -$exp ) . $n;  }\nelsif ( $exp &lt; length($n) ) { substr($n, $exp, 0, '.');          }\nelsif ( $exp &gt; length($n) ) { $n .= '0' x ( $exp - length($n) ); }\n</code></pre>\n\n<hr>\n\n<pre><code>$ perl -e'printf \"%.70f\\n\", 8.22120183514065e-05;'\n0.0000822120183514065132508730204818903075647540390491485595703125000000\n\n$ perl -e'printf \"%.70e\\n\", 8.22120183514065e-05;'\n8.2212018351406513250873020481890307564754039049148559570312500000000000e-05\n\n$ perl -e'printf \"%.*e\\n\", 14, 8.22120183514065e-05;'\n8.22120183514065e-05\n</code></pre>\n"}], "owner": {"reputation": 34726, "user_id": 133939, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/pN9C5.png?s=128&g=1", "display_name": "Zaid", "link": "https://stackoverflow.com/users/133939/zaid"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 69, "favorite_count": 0, "accepted_answer_id": 41599913, "answer_count": 1, "score": 2, "last_activity_date": 1484168235, "creation_date": 1484159152, "question_id": 41598066, "link": "https://stackoverflow.com/questions/41598066/how-can-i-retain-display-precision-when-converting-from-scientific-to-decimal-no", "title": "How can I retain display precision when converting from scientific to decimal notation?", "body": "<p>Consider the following float:</p>\n\n<pre><code>8.22120183514065e-05\n</code></pre>\n\n<p>Now obviously <a href=\"http://perldoc.perl.org/functions/sprintf.html\" rel=\"nofollow noreferrer\"><code>(s)printf</code></a> is the standard thing to do here, but <code>%f</code> alters its precision:</p>\n\n<pre><code>printf \"%f\", 8.22120183514065e-05;    # 0.000082\n</code></pre>\n\n<p>Using an arbitrarily large precision, say <code>%.30f</code>, adds additional digits (<code>...6505</code>):</p>\n\n<pre><code>printf \"%.30f\", 8.22120183514065e-05; # 0.000082212081351406505000000000\n</code></pre>\n\n<p>Is there a way to maintain the precision present in the scientific notation without knowing its exact precision in advance?</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 2, "creation_date": 1484157577, "post_id": 41597597, "comment_id": 70398103, "body": "How many queries do you need to do? Using SQLite is a good approach here because you can also make it index stuff for you. Building your own index in a Perl data structure is easy if it&#39;s always the same query, but you need more memory if have more than one index. But if you don&#39;t index, your searches will be slow. DBI has a CSV driver, but that might be slow as well."}, {"owner": {"reputation": 501, "user_id": 2515337, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/23df530af23257756e35736c00f2dc60?s=128&d=identicon&r=PG", "display_name": "GrSrv", "link": "https://stackoverflow.com/users/2515337/grsrv"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1484158120, "post_id": 41597597, "comment_id": 70398358, "body": "10k queries per CSV. A lot of stuff is happening and it takes 10-12 minutes to process one CSV. I am currently using SQLite and it is quite fast. But I think I&#39;ll save some more time if I remove the insertion and selection altogether. Never heard of &quot;index in a Perl data structure&quot;. Could you give a link?"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 2, "creation_date": 1484158276, "post_id": 41597597, "comment_id": 70398461, "body": "You misunderstood me. What you need is called a <i>search index</i>. I wanted to say that you need to make your own such search index and put it inside of Perl data structures. See my answer. But the most important question is <b>How many different queries do you do?</b>."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 2, "creation_date": 1484158462, "post_id": 41597597, "comment_id": 70398558, "body": "For bulk inserts into a database, you normally want to use the ability to insert from a CSV file. But if you get rid of the database afterwards, you&#39;d be better off avoid the database entirely and just use a hash of hashes."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1484158529, "post_id": 41597597, "comment_id": 70398589, "body": "@ikegami I was going to add that to my answer, but I&#39;ll leave it to you."}, {"owner": {"reputation": 501, "user_id": 2515337, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/23df530af23257756e35736c00f2dc60?s=128&d=identicon&r=PG", "display_name": "GrSrv", "link": "https://stackoverflow.com/users/2515337/grsrv"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1484158761, "post_id": 41597597, "comment_id": 70398708, "body": "@simbabque Just one type of query as mentioned in the question, with different values of course. I also use order by in that query."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 2, "creation_date": 1484159225, "post_id": 41597597, "comment_id": 70398936, "body": "@simbabque, SQLite doesn&#39;t appear to have an SQL command to do this, but <a href=\"http://stackoverflow.com/a/1758033/589924\">using the <code>sqlite3</code> tool to create the initial database</a> from the CSV should be faster than using Perl."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1484221286, "post_id": 41597597, "comment_id": 70425830, "body": "@ikegami actually the highest-voted answer in the question you linked explains how to let the <code>sqlite3</code> tool do it It&#39;s not an SQL command, but it can still be passed to the utility. I&#39;ve tried it and updated my answer with a comparison of both approaches."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1484234138, "post_id": 41597597, "comment_id": 70434624, "body": "@simbabque, Not sure what your point is, but I didn&#39;t link to the top-voted question because it only lists part of the process, while the linked answer explains the entire process."}], "answers": [{"comments": [{"owner": {"reputation": 501, "user_id": 2515337, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/23df530af23257756e35736c00f2dc60?s=128&d=identicon&r=PG", "display_name": "GrSrv", "link": "https://stackoverflow.com/users/2515337/grsrv"}, "edited": false, "score": 0, "creation_date": 1484213329, "post_id": 41597816, "comment_id": 70420375, "body": "Hey, I love your answer but my main question is unanswered : <i>I was wondering if it okay to store this complete CSV in some complex perl Data structure?</i>. I have never created a Data structure of his size."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 501, "user_id": 2515337, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/23df530af23257756e35736c00f2dc60?s=128&d=identicon&r=PG", "display_name": "GrSrv", "link": "https://stackoverflow.com/users/2515337/grsrv"}, "edited": false, "score": 0, "creation_date": 1484215369, "post_id": 41597816, "comment_id": 70421783, "body": "@GrSrv oh. True, I did not answer that. Well as long as your machine doesn&#39;t crash it&#39;s ok to do anything you want. The question you should ask is if it&#39;s useful to do it. ;) I&#39;ll add a bit more to the answer."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 501, "user_id": 2515337, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/23df530af23257756e35736c00f2dc60?s=128&d=identicon&r=PG", "display_name": "GrSrv", "link": "https://stackoverflow.com/users/2515337/grsrv"}, "edited": false, "score": 0, "creation_date": 1484218122, "post_id": 41597816, "comment_id": 70423716, "body": "@GrSrv I&#39;m done updating the answer. There&#39;s a benchmark, some musing about viability of the approach and a comparison to SQLite. Have fun. :)"}, {"owner": {"reputation": 501, "user_id": 2515337, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/23df530af23257756e35736c00f2dc60?s=128&d=identicon&r=PG", "display_name": "GrSrv", "link": "https://stackoverflow.com/users/2515337/grsrv"}, "edited": false, "score": 0, "creation_date": 1484222871, "post_id": 41597816, "comment_id": 70426873, "body": "Whoa! That&#39;s simply brilliant. Couldn&#39;t thank you enough :-). I am using indexes in sqlite. I had to ask this because Currently I can process approx 150 CSVs/day and I am looking for areas which could be optimized to gain speed. In your example you directly imported the CSV to SQLite which isn&#39;t an option for me. I have to use a CSV module and insert into SQLite row by row which takes quite some time."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 501, "user_id": 2515337, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/23df530af23257756e35736c00f2dc60?s=128&d=identicon&r=PG", "display_name": "GrSrv", "link": "https://stackoverflow.com/users/2515337/grsrv"}, "edited": false, "score": 1, "creation_date": 1484223954, "post_id": 41597816, "comment_id": 70427574, "body": "@GrSrv why is that the case? Do you do that in Perl with DBI? If that makes it faster, there is nothing wrong with shelling out and calling the <code>sqlite3</code> tool I would say. Just document why you do that properly. If you really can&#39;t and want DBI, there should be faster ways than row by row. Doing it in blocks ok 1000 per <code>execute</code> for example. Or everything at once with a transaction. In any case, put in the index first, so it gets built up at the same time, which should be faster in total than adding it later like I did in my test."}, {"owner": {"reputation": 501, "user_id": 2515337, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/23df530af23257756e35736c00f2dc60?s=128&d=identicon&r=PG", "display_name": "GrSrv", "link": "https://stackoverflow.com/users/2515337/grsrv"}, "edited": false, "score": 0, "creation_date": 1484226093, "post_id": 41597816, "comment_id": 70428973, "body": "I use DBI. Actually I have to do some modifications in the data, like change case etc which is logically helpful if done before inserting to DB. So, I have to do row-by-row. Yes, I put in the index first. :)"}], "tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": true, "score": 2, "last_activity_date": 1484221474, "last_edit_date": 1495540373, "creation_date": 1484158225, "answer_id": 41597816, "question_id": 41597597, "link": "https://stackoverflow.com/questions/41597597/is-it-okay-to-keep-huge-data-in-perl-data-structure/41597816#41597816", "title": "Is it okay to keep huge data in Perl data structure", "body": "<p>If the query you show is the only kind of query you want to perform then this is rather straight-forward.</p>\n\n<pre><code>my $orders; # I guess\nwhile (my $row = &lt;DATA&gt; ) {\n    chomp $row;\n    my @fields = split /,/, $row;\n\n    push @{ $orders-&gt;{$fields[0]}-&gt;{$fields[1]} } \\@fields; # or as a hashref, but that's larger\n}\n\nprint join \"\\n\", @{ $orders-&gt;{Cutomer1}-&gt;{Product1}-&gt;[0] }; # typo in cuStomer\n\n__DATA__\nCutomer1,Product1,cat1,many,other,info\nCutomer1,Product2,cat1,many,other,info\nCutomer1,Product2,cat2,many,other,info\nCutomer1,Product3,cat1,many,other,info\nCutomer1,Product3,cat7,many,other,info\nCutomer2,Product5,cat1,many,other,info\nCutomer2,Product5,cat1,many,other,info\nCutomer2,Product5,cat4,many,other,info\nCutomer3,Product7,cat,many,other,info\n</code></pre>\n\n<p>You just build an index into a hash reference that is several levels deep. The first level has the customer. It contains another hashref, which has the list of rows that match this index. Then you can decide if you just want the whole thing as an array ref, or if you want to put a hash ref with keys there. I went with an array ref because that consumes less memory.</p>\n\n<p>Later you can query it easily. I included that above. Here's the output.</p>\n\n<pre><code>Cutomer1\nProduct1\ncat1\nmany\nother\ninfo\n</code></pre>\n\n<p>If you don't want to remember indexes but have to code a lot of different queries, you could make variables (or even constants) that represent the <a href=\"https://en.wikipedia.org/wiki/Magic_number_(programming)\" rel=\"nofollow noreferrer\">magic numbers</a>.</p>\n\n<pre><code>use constant {\n    CUSTOMER =&gt; 0,\n    PRODUCT  =&gt; 1,\n    CATEGORY =&gt; 2,\n    MANY     =&gt; 3,\n    OTHER    =&gt; 4,\n    INFO     =&gt; 5,\n};\n\n# build $orders ...\n\nmy $res = $orders-&gt;{Cutomer1}-&gt;{Product2}-&gt;[0];\n\nprint \"Category: \" . $res-&gt;[CATEGORY];\n</code></pre>\n\n<p>The output is:</p>\n\n<pre><code>Category: cat2\n</code></pre>\n\n<p>To order the result, you can use Perl's <a href=\"http://perldoc.perl.org/functions/sort.html\" rel=\"nofollow noreferrer\"><code>sort</code></a>. If you need to sort by two columns, there are answers on SO that explain how to do that.</p>\n\n<pre><code>for my $res ( \n    sort { $a-&gt;[OTHER] cmp $b-&gt;[OTHER] } \n    @{ $orders-&gt;{Customer2}-&gt;{Product1} } \n) {\n    # do stuff with $res ...\n}\n</code></pre>\n\n<p><strong>However, you can only search by Customer and Product like this.</strong> </p>\n\n<p>If there is more than one type of query, this gets expensive. If you would also group them by category only, you would either have to iterate all of them every single time you look one up, or build a second index. Doing that is harder than waiting a few extra seconds, so you probably don't want to do that.</p>\n\n<hr>\n\n<blockquote>\n  <p>I was wondering if it okay to store this complete CSV in some complex perl Data structure?</p>\n</blockquote>\n\n<p>For this specific purpose, absolutely. 20 Megabytes are not a lot.</p>\n\n<p>I've created a test file that is 20004881 bytes and 447848 lines with this code, which is not perfect, but gets the job done.</p>\n\n<pre><code>use strict;\nuse warnings;\nuse feature 'say';\nuse File::stat;\n\nopen my $fh, '&gt;', 'test.csv' or die $!;\nwhile ( stat('test.csv')-&gt;size &lt; 20_000_000 ) {\n    my $customer = 'Customer' . int rand 10_000;\n    my $product  = 'Product' . int rand 500;\n    my $category = 'cat' . int rand 7;\n    say $fh join ',', $customer, $product, $category, qw(many other info);\n}\n</code></pre>\n\n<p>Here is an excerpt of the file:</p>\n\n<pre><code>$ head -n 20 test.csv\nCustomer2339,Product176,cat0,many,other,info\nCustomer2611,Product330,cat2,many,other,info\nCustomer1346,Product422,cat4,many,other,info\nCustomer1586,Product109,cat5,many,other,info\nCustomer1891,Product96,cat5,many,other,info\nCustomer5338,Product34,cat6,many,other,info\nCustomer4325,Product467,cat6,many,other,info\nCustomer4192,Product239,cat0,many,other,info\nCustomer6179,Product373,cat2,many,other,info\nCustomer5180,Product302,cat3,many,other,info\nCustomer8613,Product218,cat1,many,other,info\nCustomer5196,Product71,cat5,many,other,info\nCustomer1663,Product393,cat4,many,other,info\nCustomer6578,Product336,cat0,many,other,info\nCustomer7616,Product136,cat4,many,other,info\nCustomer8804,Product279,cat5,many,other,info\nCustomer5731,Product339,cat6,many,other,info\nCustomer6865,Product317,cat2,many,other,info\nCustomer3278,Product137,cat5,many,other,info\nCustomer582,Product263,cat6,many,other,info\n</code></pre>\n\n<p>Now let's run our above program with this input file and look at the memory consumption and some statistics of the size of the data structure.</p>\n\n<pre><code>use strict;\nuse warnings;\nuse Devel::Size 'total_size';\n\nuse constant {\n    CUSTOMER =&gt; 0,\n    PRODUCT  =&gt; 1,\n    CATEGORY =&gt; 2,\n    MANY     =&gt; 3,\n    OTHER    =&gt; 4,\n    INFO     =&gt; 5,\n};\n\nopen my $fh, '&lt;', 'test.csv' or die $!;\n\nmy $orders;\nwhile ( my $row = &lt;$fh&gt; ) {\n    chomp $row;\n    my @fields = split /,/, $row;\n\n    $orders-&gt;{ $fields[0] }-&gt;{ $fields[1] } = \\@fields;\n}\n\nsay 'total size of $orders: ' . total_size($orders);\n</code></pre>\n\n<p>Here it is:</p>\n\n<pre><code>total size of $orders: 185470864\n</code></pre>\n\n<p>So that variable consumes 185 Megabytes. That's a lot more than the 20MB of CSV, but we have an easily searchable index. Using htop I figured out that the actual process consumes 287MB. My machine has 16G of memory, so I don't care about that. And with about 3.6s it's reasonably fast to run this program, but I have an SSD a newish CORE i7 machine.</p>\n\n<p>But it will not eat all your memory if you have 500MB to spare. Likely an SQLite approach would consume less memory, but you have to benchmark the speed of this versus the SQLite approach to decide which one is fater.</p>\n\n<p>I used the method <a href=\"https://stackoverflow.com/a/1045961/1331451\">described in this answer</a> to read the file into an SQLite database<sup>1</sup>. I needed to add a header line to the file first, but that's trivial.</p>\n\n<pre><code>$ sqlite3 test.db\nSQLite version 3.11.0 2016-02-15 17:29:24\nEnter \".help\" for usage hints.\nsqlite&gt; .mode csv test\nsqlite&gt; .import test.csv test\n</code></pre>\n\n<p>Since I couldn't measure this properly, let's say it <em>felt like</em> about 2 seconds. Then I added an index for the specific query.</p>\n\n<pre><code>sqlite&gt; CREATE INDEX foo ON test ( customer, product );\n</code></pre>\n\n<p>This felt like it took another one second. Now I could query.</p>\n\n<pre><code>sqlite&gt; SELECT * FROM test WHERE customer='Customer23' AND product='Product1';\nCustomer23,Product1,cat2,many,other,info\n</code></pre>\n\n<p>The result appeared instantaneously (which is not scientific!). Since we didn't measure how long retrieval from the Perl data structure takes, we cannot compare them, but it feels like it all takes about the same time.</p>\n\n<p>However, the SQLite file size is only 38839296, which is about 39MB. That's bigger than the CSV file, but not by a lot. It seems like the sqlite3 process only consumes about 30kB of memory, which I find weird given the index.</p>\n\n<p>In conclusion, the SQLite seems to be a bit more convenient and eat less memory. There is nothing wrong with doing this in Perl, and it might be the same speed, but using SQL for this type of query feels more natural, so I would go with this.</p>\n\n<p>If I might be so bold I would assume you didn't set an index on your table when you did it in SQLite and that made it take longer. The amount of rows we have here is not that much, even for SQLite. Properly indexed it's a piece of cake.</p>\n\n<p>If you don't actually know what an index does, think about a phone book. It has the index of first letters on the sides of the pages. To find John Doe, you grab D, then somehow look. Now imagine there was no such thing. You need to randomly poke around a lot more. And then try to find the guy with the phone number 123-555-1234. That's what your database does if there is no index.</p>\n\n<hr>\n\n<p><sup>1) If you want to script this, you can also pipe or read the commands into the <code>sqlite3</code> utility to create the DB, then use Perl's DBI to do the querying. As an example, <code>sqlite3 foo.db &lt;&lt;&lt;'.tables\\ .tables'</code> (where the backslash <code>\\</code> represents a literal linebreak) prints the list of tables twice, so importing like this will work, too.</sup></p>\n"}], "owner": {"reputation": 501, "user_id": 2515337, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/23df530af23257756e35736c00f2dc60?s=128&d=identicon&r=PG", "display_name": "GrSrv", "link": "https://stackoverflow.com/users/2515337/grsrv"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 141, "favorite_count": 1, "accepted_answer_id": 41597816, "answer_count": 1, "score": 2, "last_activity_date": 1484221474, "creation_date": 1484157440, "last_edit_date": 1484157963, "question_id": 41597597, "link": "https://stackoverflow.com/questions/41597597/is-it-okay-to-keep-huge-data-in-perl-data-structure", "title": "Is it okay to keep huge data in Perl data structure", "body": "<p>I am receiving some CSVs from client. The average size of these CSVs is 20 MB.</p>\n\n<p>The format is:</p>\n\n<pre><code>Cutomer1,Product1,cat1,many,other,info\nCutomer1,Product2,cat1,many,other,info\nCutomer1,Product2,cat2,many,other,info\nCutomer1,Product3,cat1,many,other,info\nCutomer1,Product3,cat7,many,other,info\nCutomer2,Product5,cat1,many,other,info\nCutomer2,Product5,cat1,many,other,info\nCutomer2,Product5,cat4,many,other,info\nCutomer3,Product7,cat,many,other,info\n</code></pre>\n\n<p>My current approach:\nI store all these records temporarily in a table, and then query in table:</p>\n\n<pre><code>where customer='customer1' and product='product1'\nwhere customer='customer1' and product='product2'\nwhere customer='customer2' and product='product1'\n</code></pre>\n\n<p><strong>Problem</strong> : inserting in DB and then selecting takes too much time. A lot of stuff is happening and it takes 10-12 minutes to process one CSV. I am currently using SQLite and it is quite fast. But I think I'll save some more time if I remove the insertion and selection altogether.</p>\n\n<p>I was wondering if it okay to store this complete CSV in some complex perl Data structure?</p>\n\n<p><em>The machine generally has 500MB+ free RAM.</em></p>\n"}, {"tags": ["django", "bash", "perl", "docker"], "answers": [{"comments": [{"owner": {"reputation": 832, "user_id": 4838830, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/0Drsc.png?s=128&g=1", "display_name": "Alexander George", "link": "https://stackoverflow.com/users/4838830/alexander-george"}, "edited": false, "score": 0, "creation_date": 1484158918, "post_id": 41597965, "comment_id": 70398777, "body": "Also, since you seem to have some troubles understanding the whole container architecture, I&#39;d suggest taking a look at the get-started docs."}], "tags": [], "owner": {"reputation": 832, "user_id": 4838830, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/0Drsc.png?s=128&g=1", "display_name": "Alexander George", "link": "https://stackoverflow.com/users/4838830/alexander-george"}, "is_accepted": false, "score": 1, "last_activity_date": 1484158767, "creation_date": 1484158767, "answer_id": 41597965, "question_id": 41597271, "link": "https://stackoverflow.com/questions/41597271/docker-running-bash-scripts-on-a-windows-host/41597965#41597965", "title": "Docker - Running bash scripts on a Windows host", "body": "<p>You've got some concepts wrong:</p>\n\n<ol>\n<li>You only load one image per container. The container runs an instance of that image. Think of the container as a contained virtual machine and of the image as an OS.</li>\n<li>You don't want one container per script. Containers are contained, if you run a script in one of them it won't affect another container. You could have many ubuntu images, of course, but it just doesn't make sense for what you want to do. Think of a container as a service that has to perform a task (run a database, host a webpage, etc); it has to have inside everything it needs to work.</li>\n<li>If you need to run a script in a container, you have to first provision it to the container using <code>ADD</code>or <code>COPY</code> in your Dockerfile, and then <code>CMD</code> to execute the script. That will execute it inside the container, and therefore will affect its state. Check the <a href=\"https://docs.docker.com/engine/reference/builder/%20%22Dockerfile%20reference\" rel=\"nofollow noreferrer\">Dockerfile reference</a> for more info on how to use these commands.</li>\n</ol>\n"}], "owner": {"reputation": 1459, "user_id": 7118905, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/e96fa65d2d24de06b70cc49988d63762?s=128&d=identicon&r=PG&f=1", "display_name": "Horse O&#39;Houlihan", "link": "https://stackoverflow.com/users/7118905/horse-ohoulihan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 861, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1484158767, "creation_date": 1484156283, "question_id": 41597271, "link": "https://stackoverflow.com/questions/41597271/docker-running-bash-scripts-on-a-windows-host", "title": "Docker - Running bash scripts on a Windows host", "body": "<p>I setup a django project with Docker, its got two containers, one for the <code>django</code> server, one for the <code>postgres</code> server. I want to be able to also do different things like run bash scripts and perl scripts for this project, for example I need to use a bash script to download and restore database dumps from the live site automatically. Do I setup a new Docker image for each bash script? Or would I need to setup a Ubuntu container and run the bash scripts through that? </p>\n\n<p>Heres the Dockerfile:</p>\n\n<pre><code>FROM python:3.5\n\nENV PYTHONBUFFERED 1\nENV APPLICATION_ROOT /app/\nENV APP_ENVIRONMENT L\nCOMPOSE_CONVERT_WINDOWS_PATHS=1\n\nRUN mkdir -p $APPLICATION_ROOT\nWORKDIR $APPLICATION_ROOT\nADD requirements.txt $APPLICATION_ROOT\nRUN pip install --upgrade pip\nRUN pip install -r requirements.txt\nADD . $APPLICATION_ROOT\n</code></pre>\n\n<p>And the docker-compose file:</p>\n\n<pre><code>web:\n    build: .\n    command: python manage.py runserver 0.0.0.0:8000\n    volumes:\n        - .:/app\n    ports:\n        - \"8998:8998\"\n    links:\n        - db\n\ndb:\n    image: postgres:9.4\n    environment:\n        APP_ENVIRONMENT: L\n        POSTGRES_USER: postgres\n        POSTGRES_PASSWORD: root\n        POSTGRES_DB: mydb\n</code></pre>\n\n<p>I'm new to Docker so don't yet know the best approach to doing things. Where would I put the bash script and new docker file, and how would I link it to this project so that I can execute the scripts whenever the project is running? Theres a few ways I can do this, I could just create a bash container, and use it to run the scripts. Or I could make a container built on a bash image which holds all the scripts I'll need, or I could make a container for each one of them. I might need to run <code>perl</code> or <code>awk</code> or <code>expect</code> alongside these bash scripts, so in that case, would I just import an image for each of these into the container? </p>\n"}, {"tags": ["bash", "perl", "awk", "sed"], "comments": [{"owner": {"reputation": 61700, "user_id": 5291015, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ZFijZ.jpg?s=128&g=1", "display_name": "Inian", "link": "https://stackoverflow.com/users/5291015/inian"}, "edited": false, "score": 4, "creation_date": 1484137500, "post_id": 41590878, "comment_id": 70385056, "body": "How should your expected output be?"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1484291559, "post_id": 41590878, "comment_id": 70458563, "body": "I encourage you not to apologise for errors, especially ones that don&#39;t invalidate the post. You should make changes (if you think you need to) and move on. Your opinion is as valid as everyone elses."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "edited": false, "score": 0, "creation_date": 1484291750, "post_id": 41590878, "comment_id": 70458640, "body": "@EdMorton: &lt;strike&gt;Do we REALLY have to wade through your long first sentence being rude to the OP?&lt;/strike&gt; <i>&quot;I feel like five lines of data would do it&quot;</i> would suffice."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "edited": false, "score": 0, "creation_date": 1484313790, "post_id": 41590878, "comment_id": 70470825, "body": "@EdMorton: I felt that your comment was unnecessarily rude and wordy, ironically when you were commenting about the OP being rude and wordy, so I said so. Why did you feel the need to be sarcastic when it was necessary only to point out that the data could be cut down? My <code>&lt;strike&gt;</code> tags are valid HTML, which work in posts but not in comments, and I saw no other way to convey the same intent. Your comment had an effect only because of the humility of the OP, mine was ineffective because you had no such humility, and chose to argue and counterattack instead of correcting your mistakes."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "edited": false, "score": 0, "creation_date": 1484314738, "post_id": 41590878, "comment_id": 70471406, "body": "@EdMorton: Are you saying that <i>&quot;Do we REALLY need to wade through 50 lines of input&quot;</i> wasn&#39;t meant to be sarcastic? You seem to have conveniently dropped the capitals, and it doesn&#39;t read as a genuine question to me. I&#39;m not interested in responding to your efforts at defending your rudeness any more."}, {"owner": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "edited": false, "score": 0, "creation_date": 1484315110, "post_id": 41590878, "comment_id": 70471621, "body": "Of course it wasn&#39;t meant to be sarcastic. What could possibly be read as sarcastic about it? I simply wanted the OP to think hard about whether or not we really had to see 50 lines of input and gave my opinion that about 5 lines would do. I&#39;m also done with this conversation and YOU are the only one being rude in this thread."}], "answers": [{"comments": [{"owner": {"reputation": 125, "user_id": 3925751, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7a48d1fbbb023f53b7459c989b87781b?s=128&d=identicon&r=PG&f=1", "display_name": "Asha", "link": "https://stackoverflow.com/users/3925751/asha"}, "edited": false, "score": 0, "creation_date": 1484219650, "post_id": 41591041, "comment_id": 70424714, "body": "Kent, if the name for the code does not exist, so I dont need anything to be replaced. I have posted an edited form of question for more clarity. Sorry for the trouble"}, {"owner": {"reputation": 172306, "user_id": 164835, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/ayYoh.jpg?s=128&g=1", "display_name": "Kent", "link": "https://stackoverflow.com/users/164835/kent"}, "reply_to_user": {"reputation": 125, "user_id": 3925751, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7a48d1fbbb023f53b7459c989b87781b?s=128&d=identicon&r=PG&f=1", "display_name": "Asha", "link": "https://stackoverflow.com/users/3925751/asha"}, "edited": false, "score": 0, "creation_date": 1484224878, "post_id": 41591041, "comment_id": 70428182, "body": "@Asha this would be a tiny modification.  just a check <code>$2 in a</code> I still don&#39;t understand the downvote... :( because it is too short?  You have already got solution? or should I update the answer?"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1484291417, "post_id": 41591041, "comment_id": 70458507, "body": "Please don&#39;t enquire about the reason for people&#39;s downvotes. They would have explained to you if they intended to, and asking about it pretty much never gets an answer. Votes are anonymous for a reason, and while it may be frustrating to lose points without being told why, that&#39;s the way it works."}], "tags": [], "owner": {"reputation": 172306, "user_id": 164835, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/ayYoh.jpg?s=128&g=1", "display_name": "Kent", "link": "https://stackoverflow.com/users/164835/kent"}, "is_accepted": true, "score": 0, "last_activity_date": 1484137816, "creation_date": 1484137816, "answer_id": 41591041, "question_id": 41590878, "link": "https://stackoverflow.com/questions/41590878/how-to-replace-all-the-values-in-one-file-with-their-corresponding-names-from-an/41591041#41591041", "title": "How to replace all the values in one file with their corresponding names from another file", "body": "<p>This awk one-liner should help:</p>\n\n<pre><code>awk 'NR==FNR{a[$1]=$2;next}{FS=\"[(,]\"}sub(/[^,]*/,\"(\"a[$2])+1' f2 f1\n</code></pre>\n\n<p>It outputs something like:</p>\n\n<pre><code>(, ':', [])\n(ALA_A_87, ':', [18])\n(THR_A_127, ':', [20, 41])\n(GLY_A_128, ':', [18])\n(ILE_A_130, ':', [17])\n(THR_A_166, ':', [])\n(THR_A_167, ':', [])\n(LYS_A_189, ':', [])\n(GLY_A_190, ':', [45])\n(ALA_A_191, ':', [])\n(GLY_A_192, ':', [26])\n(MET_A_193, ':', [23])\n(LEU_A_194, ':', [])\n(THR_B_200, ':', [37])\n.....\n</code></pre>\n\n<p><strong>Note</strong> the first line, the <code>0</code> doesn't exist in file2, so there is an empty in the <code>()</code>, if this is not what you want, please let me know what value should be there.</p>\n"}, {"comments": [{"owner": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "edited": false, "score": 1, "creation_date": 1484149587, "post_id": 41591226, "comment_id": 70392956, "body": "Careful with <code>sub()</code>s using input data as the regexp or replacement as they fail cryptically when the input contains regexp metacharacters (e.g. <code>. * ? +</code>) and/or backreference characters (e.g. <code>&amp;</code>)."}, {"owner": {"reputation": 31251, "user_id": 4162356, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/dGhuV.png?s=128&g=1", "display_name": "James Brown", "link": "https://stackoverflow.com/users/4162356/james-brown"}, "reply_to_user": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "edited": false, "score": 0, "creation_date": 1484154638, "post_id": 41591226, "comment_id": 70396267, "body": "@EdMorton Speaking of warnings, is it really not possible to use <code>&amp;</code> as a reference to an array in <code>sub</code>, as in: <code>sub(&#47;[0-9]+&#47;, a[&quot;&amp;&quot;], $i)</code>?"}, {"owner": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "edited": false, "score": 0, "creation_date": 1484155928, "post_id": 41591226, "comment_id": 70397083, "body": "That should work just fine. Are you getting a warning about it?"}, {"owner": {"reputation": 31251, "user_id": 4162356, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/dGhuV.png?s=128&g=1", "display_name": "James Brown", "link": "https://stackoverflow.com/users/4162356/james-brown"}, "edited": false, "score": 0, "creation_date": 1484156466, "post_id": 41591226, "comment_id": 70397450, "body": "<code>awk &#39;NR==FNR{a[$1]=$2;next}{for(i=2;++i&lt;=NF;)sub(&#47;[0-9]+&#47;,a[&quot;&amp;&quot;]&zwnj;&#8203;,$i)}1&#39; f2 f1</code> just returns empties, like: <code>(2, &#39;:&#39;, [, ])</code> with above data."}, {"owner": {"reputation": 31251, "user_id": 4162356, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/dGhuV.png?s=128&g=1", "display_name": "James Brown", "link": "https://stackoverflow.com/users/4162356/james-brown"}, "reply_to_user": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "edited": false, "score": 0, "creation_date": 1484157426, "post_id": 41591226, "comment_id": 70398017, "body": "@EdMorton Hmm, if I add <code>&amp; foo</code> to file <code>f2</code>, I get <code>(2, &#39;:&#39;, [foo, foo])</code>."}, {"owner": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "edited": false, "score": 1, "creation_date": 1484157670, "post_id": 41591226, "comment_id": 70398151, "body": "Of course. <code>&amp;</code> didn&#39;t exist in f2 so <code>a[&quot;&amp;&quot;]</code> was a null string then when you did add <code>&amp;</code> as an index you got what it maps too, <code>foo</code>."}, {"owner": {"reputation": 31251, "user_id": 4162356, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/dGhuV.png?s=128&g=1", "display_name": "James Brown", "link": "https://stackoverflow.com/users/4162356/james-brown"}, "edited": false, "score": 0, "creation_date": 1484157875, "post_id": 41591226, "comment_id": 70398257, "body": "Naturally I wanted to use the numeric value that <code>&amp;</code> would reference to in the regex but I guess it&#39;s not implemented that way."}, {"owner": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "edited": false, "score": 1, "creation_date": 1484157969, "post_id": 41591226, "comment_id": 70398297, "body": "Oh, hang on... are you trying to get the <code>&quot;&amp;&quot;</code> in the array index to be interpreted as the backreference? No,you can&#39;t do that, nor can you use it as the argument to a function <code>sub(&#47;X&#47;,tolower(&quot;&amp;&quot;))</code> etc as you might like.. That&#39;s one of the uses for the 3rd arg to match(): <code>match($0,&#47;(.*)([0-9]+)(.*)&#47;,b) { $0=b[1] a[b[2]] b[3]}</code> and <code>match($0,&#47;(.*)(X)(.*)&#47;,b) { $0=b[1] tolower(b[2]) b[3]}</code>"}, {"owner": {"reputation": 125, "user_id": 3925751, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7a48d1fbbb023f53b7459c989b87781b?s=128&d=identicon&r=PG&f=1", "display_name": "Asha", "link": "https://stackoverflow.com/users/3925751/asha"}, "edited": false, "score": 2, "creation_date": 1484219475, "post_id": 41591226, "comment_id": 70424587, "body": "@ James Brown and @ Ed Morton, I expect all the numbers in File-1.txt to be replaced i.e both inside [ ] and outside. I know i wasn&#39;t clear in my previous post but now i have edited the question for more clarity. I apologise for that"}, {"owner": {"reputation": 31251, "user_id": 4162356, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/dGhuV.png?s=128&g=1", "display_name": "James Brown", "link": "https://stackoverflow.com/users/4162356/james-brown"}, "reply_to_user": {"reputation": 125, "user_id": 3925751, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7a48d1fbbb023f53b7459c989b87781b?s=128&d=identicon&r=PG&f=1", "display_name": "Asha", "link": "https://stackoverflow.com/users/3925751/asha"}, "edited": false, "score": 0, "creation_date": 1484220515, "post_id": 41591226, "comment_id": 70425301, "body": "@Asha That&#39;s easy, use the latter code and change the <code>2</code> in the <code>for(i=2;...</code> to <code>0</code>: <code>for(i=0;...</code> I kind of expected that..."}, {"owner": {"reputation": 9362, "user_id": 2885763, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/l4VVG.jpg?s=128&g=1", "display_name": "NeronLeVelu", "link": "https://stackoverflow.com/users/2885763/neronlevelu"}, "edited": false, "score": 1, "creation_date": 1484298878, "post_id": 41591226, "comment_id": 70461921, "body": "wouaw, let me look at it once again :-) ... Got a new version (with new constraint that are easier for omptimization)"}], "tags": [], "owner": {"reputation": 31251, "user_id": 4162356, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/dGhuV.png?s=128&g=1", "display_name": "James Brown", "link": "https://stackoverflow.com/users/4162356/james-brown"}, "is_accepted": false, "score": 1, "last_activity_date": 1484306625, "last_edit_date": 1484306625, "creation_date": 1484138390, "answer_id": 41591226, "question_id": 41590878, "link": "https://stackoverflow.com/questions/41590878/how-to-replace-all-the-values-in-one-file-with-their-corresponding-names-from-an/41591226#41591226", "title": "How to replace all the values in one file with their corresponding names from another file", "body": "<p>I really wasn't sure which numbers were supposed to be replaced but this one replaces the ones inside <code>[]</code> as it felt more interesting. You should always provide expected results:</p>\n\n<pre><code>$ awk 'NR==FNR { a[$1]=$2; next }\n       {\n            b=$0;\n            gsub(/^.*\\[|\\].*$/,\"\",b); \n            if(split(b,c,\", \")) \n                for(i in c) \n                    sub(c[i],a[c[i]],b);\n            sub(/\\[.*\\]/,\"[\" b \"]\",$0)\n       } 1' f2 f1\n(0, ':', [])\n(1, ':', [GLY_B_235])\n(2, ':', [CYS_B_237, SER_D_310])\n(3, ':', [GLY_B_235])\n(4, ':', [ASP_B_234])\n...\n</code></pre>\n\n<p><strong>Edit</strong>: Added a version for @NeronLeVelu:</p>\n\n<pre><code>$ awk 'NR==FNR { a[$1]=$2; next }\n               { for(i=2;++i&lt;=NF;)\n                     sub(/[0-9]+/,a[substr($i,match($i,/[0-9]+/),RLENGTH)],$i)\n               } 1' f2 f1\n(0, ':', [])\n(1, ':', [GLY_B_235])\n(2, ':', [CYS_B_237, SER_D_310])\n(3, ':', [GLY_B_235])\n(4, ':', [ASP_B_234])\n...\n</code></pre>\n\n<p><strong>Another edit</strong>: After the requirements clarified (<code>2</code>-><code>0</code>), this is the working version:</p>\n\n<pre><code>$ awk 'NR==FNR { a[$1]=$2; next }\n               { for(i=0;++i&lt;=NF;)\n                     sub(/[0-9]+/,a[substr($i,match($i,/[0-9]+/),RLENGTH)],$i)\n               } 1' f2 f1\n(, ':', [])\n(ALA_A_87, ':', [GLY_B_235])\n(THR_A_127, ':', [CYS_B_237, SER_D_310])\n(GLY_A_128, ':', [GLY_B_235])\n(ILE_A_130, ':', [ASP_B_234])\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 9362, "user_id": 2885763, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/l4VVG.jpg?s=128&g=1", "display_name": "NeronLeVelu", "link": "https://stackoverflow.com/users/2885763/neronlevelu"}, "is_accepted": false, "score": 1, "last_activity_date": 1484298686, "last_edit_date": 1484298686, "creation_date": 1484139470, "answer_id": 41591606, "question_id": 41590878, "link": "https://stackoverflow.com/questions/41590878/how-to-replace-all-the-values-in-one-file-with-their-corresponding-names-from-an/41591606#41591606", "title": "How to replace all the values in one file with their corresponding names from another file", "body": "<p>in case this is the second part of the file2 that are names to substitute</p>\n\n<pre><code>awk 'FNR==NR{n[$1]=$2;next}\n    {\n    h=$0;gsub( /\\[.*/, \"[\", h)\n\n    N=$0;gsub( /.*\\[|].*/, \"\", N)\n    NsS = split( N, aNs, /,[[:blank:]]*/)\n\n    printf( \"%s\", h)\n    for ( i=1; i&lt;=NsS; i++) printf( \"%s%s\", (i==1 ? \"\" : \", \"), n[aNs[i]])\n    printf( \"]\\n\")\n    }\n    ' File-2.txt File-1.txt\n</code></pre>\n\n<p>Challenged by James Brown speed and ability, a second version :-)</p>\n\n<pre><code>awk -F '[][[:blank:],]*' '\n    FNR==NR{split($0,t,/[[:blank:]]*/);n[t[1]]=t[2];next}\n    {\n    printf( \"%s, %s, [\",$1, $2)\n    for ( i=3; i&lt;NF; i++) printf( \"%s%s\", (i==3 ? \"\" : \", \"), n[$i])\n    printf( \"])\\n\")\n    }\n    ' File-2.txt File-1.txt\n</code></pre>\n\n<p>reply to the internal \"challenge\" with @JamesBrown and with last OP info (change all number of F2)</p>\n\n<pre><code>awk -F '[^[:digit:]]*' '\n    FNR==NR{n[$1]=$2;next}\n    { for ( i=1; i&lt;NF; i++) sub( $i, n[$i]) }\n    7\n    ' File-2.txt File-1.txt\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 46858, "user_id": 967492, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/526ea226101e199d029049dda22a4e58?s=128&d=identicon&r=PG", "display_name": "potong", "link": "https://stackoverflow.com/users/967492/potong"}, "is_accepted": false, "score": 0, "last_activity_date": 1484139688, "creation_date": 1484139688, "answer_id": 41591667, "question_id": 41590878, "link": "https://stackoverflow.com/questions/41590878/how-to-replace-all-the-values-in-one-file-with-their-corresponding-names-from-an/41591667#41591667", "title": "How to replace all the values in one file with their corresponding names from another file", "body": "<p>This might work for you (GNU sed):</p>\n\n<pre><code>sed -r 's/^(\\S+)\\s+(\\S+)$/s:\\\\b\\1\\\\b:\\2:g/' file2 | sed -rf - file1\n</code></pre>\n\n<p>This turns file 2 into a sed script that acts as a lookup for file 1.</p>\n"}, {"comments": [{"owner": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "edited": false, "score": 1, "creation_date": 1484165119, "post_id": 41592157, "comment_id": 70402211, "body": "<code>s&#47;^\\(\\K(\\d+)&#47; $hash{$1} || $1 &#47;e;</code> in case you don&#39;t really need <code>$2</code>"}, {"owner": {"reputation": 125, "user_id": 3925751, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7a48d1fbbb023f53b7459c989b87781b?s=128&d=identicon&r=PG&f=1", "display_name": "Asha", "link": "https://stackoverflow.com/users/3925751/asha"}, "edited": false, "score": 0, "creation_date": 1484218977, "post_id": 41592157, "comment_id": 70424260, "body": "Thank you Osmanov  for the code, but I require all the numbers of the File-1.txt to b e replaced by their corresponding names given in File-2.txt. I know, the confusion was from my side and I apologise for not posting the expected output"}, {"owner": {"reputation": 17784, "user_id": 1646322, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/d9fd7a75e0d8ace7bb3276476786c2c0?s=128&d=identicon&r=PG", "display_name": "Ruslan Osmanov", "link": "https://stackoverflow.com/users/1646322/ruslan-osmanov"}, "reply_to_user": {"reputation": 125, "user_id": 3925751, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7a48d1fbbb023f53b7459c989b87781b?s=128&d=identicon&r=PG&f=1", "display_name": "Asha", "link": "https://stackoverflow.com/users/3925751/asha"}, "edited": false, "score": 0, "creation_date": 1484220050, "post_id": 41592157, "comment_id": 70424981, "body": "@Asha, then it&#39;s easy, just replace the substitution <code>s&#47;^\\((\\d+)(.*)$&#47;&#39;(&#39; . ( $hash{$1} || $1 ). $2&#47;e;</code> with <code>s&#47;(\\d+)&#47;$hash{$1} || $1&#47;ge; </code>"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1484289680, "post_id": 41592157, "comment_id": 70457783, "body": "Why does your substitution delete the whole of the rest of the line and then put it back again?"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1484290007, "post_id": 41592157, "comment_id": 70457935, "body": "You unnecessarily add <code>(.*)$</code> to the end of your pattern, which matches and removes the <i>whole</i> string, and then put it all back again by appending <code>$2</code> to the replacement text."}, {"owner": {"reputation": 17784, "user_id": 1646322, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/d9fd7a75e0d8ace7bb3276476786c2c0?s=128&d=identicon&r=PG", "display_name": "Ruslan Osmanov", "link": "https://stackoverflow.com/users/1646322/ruslan-osmanov"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1484290112, "post_id": 41592157, "comment_id": 70457986, "body": "@Borodin, ah, you mean that in the first part of the answer I could simply write <code>s&#47;^\\((\\d+)&#47;&#39;(&#39; . ( $hash{$1} || $1 )&#47;e;</code>, right? Fixed this."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1484290308, "post_id": 41592157, "comment_id": 70458077, "body": "That&#39;s correct. You also need to use <code>&#47;&#47;</code> instead of <code>||</code>, although it doesn&#39;t matter with the example data."}, {"owner": {"reputation": 17784, "user_id": 1646322, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/d9fd7a75e0d8ace7bb3276476786c2c0?s=128&d=identicon&r=PG", "display_name": "Ruslan Osmanov", "link": "https://stackoverflow.com/users/1646322/ruslan-osmanov"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1484290382, "post_id": 41592157, "comment_id": 70458102, "body": "@Borodin, actually I tried <code>&#47;&#47;</code> at first, but it failed to compile: <code>syntax error at 1.pl line 22, near &quot;$1 )&quot;</code>. Oops, it&#39;s because of the regex delimiter <code>&#47;</code>. I need to use another character"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1484290591, "post_id": 41592157, "comment_id": 70458193, "body": "And I would use <code>\\K</code> (&quot;keep&quot;) to avoid having to replace the opening parenthesis: <code>s&#47; ^\\( \\K (\\d+) &#47;{ $hash{$1} &#47;&#47; $1 }xe</code>. And while you&#39;re reading, <code>%hash</code> is a terrible name for a hash :)"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1484290920, "post_id": 41592157, "comment_id": 70458325, "body": "Okay, I&#39;m sorry I missed that. You simply need to change the delimiters for the replacement string. Braces <code>{...}</code> work well here as they emphasise that the replacement is executable code because you have used <code>&#47;e</code>. I&#39;ve fixed my code sample above. You can use them for the regex pattern too if you don&#39;t like having a mixture of delimiters."}], "tags": [], "owner": {"reputation": 17784, "user_id": 1646322, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/d9fd7a75e0d8ace7bb3276476786c2c0?s=128&d=identicon&r=PG", "display_name": "Ruslan Osmanov", "link": "https://stackoverflow.com/users/1646322/ruslan-osmanov"}, "is_accepted": false, "score": 1, "last_activity_date": 1484291133, "last_edit_date": 1484291133, "creation_date": 1484141112, "answer_id": 41592157, "question_id": 41590878, "link": "https://stackoverflow.com/questions/41590878/how-to-replace-all-the-values-in-one-file-with-their-corresponding-names-from-an/41592157#41592157", "title": "How to replace all the values in one file with their corresponding names from another file", "body": "<p>I will assume that the files are unsorted, i.e. line <em>m</em> in <em>File-1.txt</em> matches line <em>n</em> in <em>File-2.txt</em>, where <em>m</em> may not be equal to <em>n</em>. (At the time of writing, you haven't mentioned if the files were sorted.)</p>\n\n<p>One way to solve this problem is to build a hash from <em>File-2.txt</em>, read <em>File-1.txt</em> line by line, and substitute the values using the hash for each line.</p>\n\n<p><strong>Example in Perl</strong></p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\n\nmy $filename1 = 'File-1.txt';\nmy $filename2 = 'File-2.txt';\nmy %hash;\nmy $fh;\n\n\nopen($fh, '&lt;', $filename2) or die \"Failed to open $filename2: $!\";\nwhile (&lt;$fh&gt;) {\n  chomp;\n  my ($key, $value) = split;\n  $hash{$key} = $value if $value;\n}\nclose $fh;\n\n\nopen($fh, '&lt;', $filename1) or die \"Failed to open $filename1: $!\";\nwhile (&lt;$fh&gt;) {\n  s%^\\(\\K(\\d+)%$hash{$1} // $1%e;\n  print;\n}\nclose $fh;\n</code></pre>\n\n<p><em>Sample Output</em></p>\n\n<pre><code>(0, ':', [])\n(ALA_A_87, ':', [18])\n(THR_A_127, ':', [20, 41])\n(GLY_A_128, ':', [18])\n(ILE_A_130, ':', [17])\n(THR_A_166, ':', [])\n(THR_A_167, ':', [])\n...skipped...\n(LEU_D_391, ':', [30])\n(ASN_D_399, ':', [8])\n(TYR_D_402, ':', [])\n(SER_D_404, ':', [8])\n(NAO1, ':', [])\n</code></pre>\n\n<hr>\n\n<p>If you want to substitute <em>all the numbers</em>, then it is even easier. Replace this substitution:</p>\n\n<pre><code>s%^\\(\\K(\\d+)%$hash{$1} // $1%e;\n</code></pre>\n\n<p>with this:</p>\n\n<pre><code>s%(\\d+)%$hash{$1} // $1%ge;\n</code></pre>\n\n<p><em>Sample Output</em></p>\n\n<pre><code>(0, ':', [])\n(ALA_A_87, ':', [GLY_B_235])\n(THR_A_127, ':', [CYS_B_237, SER_D_310])\n(GLY_A_128, ':', [GLY_B_235])\n(ILE_A_130, ':', [ASP_B_234])\n(THR_A_166, ':', [])\n...skipped...\n(ARG_D_325, ':', [ASN_B_399, LEU_A_194, VAL_B_396])\n(LEU_D_391, ':', [SER_B_310])\n(ASN_D_399, ':', [GLY_A_190])\n(TYR_D_402, ':', [])\n(SER_D_404, ':', [GLY_A_190])\n(NAO1, ':', [])\n</code></pre>\n\n<p>You might apply this substitution for the entire file contents as well.</p>\n\n<hr>\n\n<p>Note, I have used <code>%</code> as the regular expression delimiter instead of the usual slash, because otherwise it is impossible to use the <code>//</code> operator within the substitution.</p>\n\n<p>Note, the original expression</p>\n\n<pre><code>s/^\\((\\d+)(.*)$/'(' . ( $hash{$1} || $1 ). $2/e;\n</code></pre>\n\n<p>was not optimal, because:</p>\n\n<ul>\n<li>the <code>(.*)$</code> part was unnecessarily processed;</li>\n<li>the first <code>(</code> might be kept intact with the help of <code>\\K</code> option;</li>\n</ul>\n\n<p>The expression was not quite correct because of the use of <em>OR</em> operator. If the key doesn't exist in <code>$hash</code>, then <code>$hash{$1}</code> is <code>undef</code>ined. And the <code>//</code> operator is more appropriate, as it returns the right-hand operand only if the left-hand operand is undefined. </p>\n"}, {"comments": [{"owner": {"reputation": 125, "user_id": 3925751, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7a48d1fbbb023f53b7459c989b87781b?s=128&d=identicon&r=PG&f=1", "display_name": "Asha", "link": "https://stackoverflow.com/users/3925751/asha"}, "edited": false, "score": 0, "creation_date": 1484219214, "post_id": 41595054, "comment_id": 70424409, "body": "I apologise for not providing the expected output from the code. I want all the numbers in File-1 to be replaced with names irrespective to the side of &quot; : &quot;"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 125, "user_id": 3925751, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7a48d1fbbb023f53b7459c989b87781b?s=128&d=identicon&r=PG&f=1", "display_name": "Asha", "link": "https://stackoverflow.com/users/3925751/asha"}, "edited": false, "score": 0, "creation_date": 1484289864, "post_id": 41595054, "comment_id": 70457869, "body": "So what should happen to zero <code>0</code> in <code>File-.txt</code>? It&#39;s much simpler this way; I&#39;ve changed my answer so that it leaves numbers that don&#39;t appear in `File-2.tx5"}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 1, "last_activity_date": 1484314461, "last_edit_date": 1484314461, "creation_date": 1484149467, "answer_id": 41595054, "question_id": 41590878, "link": "https://stackoverflow.com/questions/41590878/how-to-replace-all-the-values-in-one-file-with-their-corresponding-names-from-an/41595054#41595054", "title": "How to replace all the values in one file with their corresponding names from another file", "body": "\n\n<p>In Perl</p>\n\n<p>This builds a hash <code>%convert</code> directly from the contents of <code>File-2.txt</code> and builds a regular expression from its keys. It then checks each line of <code>File-1.txt</code> for a non-empty pair of square brackets, and converts all numbers within into the corresponding value of the hash</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>use strict;\nuse warnings 'all';\nuse autodie;\n\nmy %convert = do {\n    open my $fh, '&lt;', 'File-2.txt';\n    map { split } &lt;$fh&gt;;\n};\n\nmy $re = join '|', keys %convert;\n$re    = qr/\\b(?:$re)\\b/;\n\nopen my $fh, '&lt;', 'File-1.txt';\n\nwhile ( &lt;$fh&gt; ) {\n    s/($re)/$convert{$1}/g;\n    print;\n}\n</code></pre>\n\n<h3>output</h3>\n\n<pre class=\"lang-none prettyprint-override\"><code>(0, ':', [])\n(ALA_A_87, ':', [GLY_B_235])\n(THR_A_127, ':', [CYS_B_237, SER_D_310])\n(GLY_A_128, ':', [GLY_B_235])\n(ILE_A_130, ':', [ASP_B_234])\n(THR_A_166, ':', [])\n(THR_A_167, ':', [])\n(LYS_A_189, ':', [])\n(GLY_A_190, ':', [LEU_D_391])\n(ALA_A_191, ':', [])\n(GLY_A_192, ':', [ARG_B_304])\n(MET_A_193, ':', [ASP_B_241])\n(LEU_A_194, ':', [])\n(THR_B_200, ':', [SER_B_404])\n(MET_B_201, ':', [])\n(ASP_B_232, ':', [ASP_D_234])\n(ILE_B_233, ':', [ASN_B_399])\n(ASP_B_234, ':', [THR_B_200])\n(GLY_B_235, ':', [])\n(SER_B_236, ':', [])\n(CYS_B_237, ':', [LEU_D_311])\n(SER_B_238, ':', [GLN_B_305, ASN_B_240])\n(ASN_B_240, ':', [GLY_B_235, MET_A_193, GLN_B_305, ARG_B_304])\n(ASP_B_241, ':', [GLU_B_398])\n(ALA_B_279, ':', [])\n(GLU_B_280, ':', [])\n(ARG_B_304, ':', [ASP_B_241, GLY_A_128])\n(GLN_B_305, ':', [MET_A_193, VAL_B_396])\n(ARG_B_308, ':', [ASN_D_399])\n(ASP_B_309, ':', [THR_A_167])\n(SER_B_310, ':', [])\n(LYS_B_313, ':', [SER_B_238])\n(LEU_B_391, ':', [ARG_B_308])\n(TYR_B_395, ':', [MET_A_193, ARG_D_325, GLU_B_398, GLN_B_305])\n(VAL_B_396, ':', [])\n(GLU_B_398, ':', [ASP_B_309])\n(ASN_B_399, ':', [LYS_A_189])\n(SER_B_404, ':', [ARG_B_308])\n(GLY_C_192, ':', [])\n(ASP_D_234, ':', [ASP_B_309, LEU_D_391])\n(ASP_D_309, ':', [])\n(SER_D_310, ':', [ARG_D_325, LYS_A_189])\n(LEU_D_311, ':', [THR_D_314])\n(THR_D_314, ':', [ASN_B_240, GLY_B_235])\n(ARG_D_325, ':', [ASN_B_399, LEU_A_194, VAL_B_396])\n(LEU_D_391, ':', [SER_B_310])\n(ASN_D_399, ':', [GLY_A_190])\n(TYR_D_402, ':', [])\n(SER_D_404, ':', [GLY_A_190])\n(NAO1, ':', [])\n</code></pre>\n"}], "owner": {"reputation": 125, "user_id": 3925751, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7a48d1fbbb023f53b7459c989b87781b?s=128&d=identicon&r=PG&f=1", "display_name": "Asha", "link": "https://stackoverflow.com/users/3925751/asha"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 164, "favorite_count": 0, "accepted_answer_id": 41591041, "answer_count": 6, "score": 1, "last_activity_date": 1484826199, "creation_date": 1484137377, "last_edit_date": 1484826199, "question_id": 41590878, "link": "https://stackoverflow.com/questions/41590878/how-to-replace-all-the-values-in-one-file-with-their-corresponding-names-from-an", "title": "How to replace all the values in one file with their corresponding names from another file", "body": "<p>I need help in substituting values (numbers) in one file (File-1.txt) with those of names (string) in another file (File-2) containing the values in first column and corresponding names in the second column. The two files are as below:</p>\n\n<p>File-1.txt</p>\n\n<pre><code>(0, ':', [])\n(1, ':', [18])\n(2, ':', [20, 41])\n(3, ':', [18])\n(4, ':', [17])\n(5, ':', [])\n(6, ':', [])\n</code></pre>\n\n<p>File-2.txt</p>\n\n<pre><code>1   ALA_A_87\n2   THR_A_127\n3   GLY_A_128\n4   ILE_A_130\n5   THR_A_166\n6   THR_A_167\n</code></pre>\n\n<p>Expected Output:</p>\n\n<pre><code>(ALA_A_87, ':', [THR_A_127])\n(THR_A_127, ':', [ALA_A_87, GLY_A_128, ILE_A_130])\n(GLY_A_128, ':', [THR_A_127, 5])\n(ILE_A_130, ':', [THR_A_127])\n(THR_A_166, ':', [GLY_A_128, THR_A_167])\n(THR_A_167, ':', [THR_A_166])\n</code></pre>\n\n<p>I have been trying some awk code, but no luck!! The awk code is as below:</p>\n\n<pre><code>awk -F, '\n    BEGIN {\n        subs=\"ALA_A_87 THR_A_127 GLY_A_128 ILE_A_130 THR_A_166 THR_A_167\";\n        split( subs, subs_arr );\n    }\n    NR == 1 { \n        print; \n        next \n    } \n    NR&gt;1{\n        for i in {1 2 3 4 5 6 }; {\n            $i = subs_arr[ $i++ ];\n        }\n        print\n    }\n' File-1.txt\n</code></pre>\n\n<p>Here, I provided the names and values to be substituted in the code itself, but if it can be provided as an external file (File-2.txt) and matching the numbers in the File-1.txt with that of first column of File-2.txt and replace the numbers in File-1.txt with the corresponding names shown in File-2.txt. Help me resolve this code.</p>\n\n<p>Thanks in advance</p>\n"}, {"tags": ["regex", "perl"], "answers": [{"comments": [{"owner": {"reputation": 930, "user_id": 6594367, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/03c046cae270605c2376680482e52f6d?s=128&d=identicon&r=PG&f=1", "display_name": "John Doe", "link": "https://stackoverflow.com/users/6594367/john-doe"}, "edited": false, "score": 0, "creation_date": 1484132031, "post_id": 41588779, "comment_id": 70381382, "body": "Thank you! Do you know where this is documented?"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 930, "user_id": 6594367, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/03c046cae270605c2376680482e52f6d?s=128&d=identicon&r=PG&f=1", "display_name": "John Doe", "link": "https://stackoverflow.com/users/6594367/john-doe"}, "edited": false, "score": 3, "creation_date": 1484132826, "post_id": 41588779, "comment_id": 70381911, "body": "@JohnDoe also in <a href=\"http://perldoc.perl.org/perlop.html#Regexp-Quote-Like-Operators\" rel=\"nofollow noreferrer\">perldoc.perl.org/perlop.html#Regexp-Quote-Like-Operators</a> and the subchapter before it. You can use whatever single character you want as a delimiter for quote-like operators. If it&#39;s a kind of bracket that comes in pairs, those work. <code>s{foo}{bar}</code>, <code>s&lt;foo&gt;&lt;bar&gt;</code> and so on. But <code>s~foo~bar~</code> or <code>s]foo]bar]</code> also work. You can even use letters. <code>$foo =~ s sfoosbars;</code>, but you need a space after the <code>s</code>."}, {"owner": {"reputation": 930, "user_id": 6594367, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/03c046cae270605c2376680482e52f6d?s=128&d=identicon&r=PG&f=1", "display_name": "John Doe", "link": "https://stackoverflow.com/users/6594367/john-doe"}, "edited": false, "score": 2, "creation_date": 1484136650, "post_id": 41588779, "comment_id": 70384473, "body": "Each day, another Perl surprise for me! Thanks! :)"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1484150571, "post_id": 41588779, "comment_id": 70393622, "body": "@mkHun: I think you could give a much better example than the answer that you link to. A colon <code>:</code> is just as bad as a circumflex <code>^</code> and looks like line noise, which is made worse by your attempts to golf the solution and put no spaces after <code>;</code> and around <code>=~</code>."}], "tags": [], "owner": {"reputation": 5455, "user_id": 3961170, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/PtFol.jpg?s=128&g=1", "display_name": "mkHun", "link": "https://stackoverflow.com/users/3961170/mkhun"}, "is_accepted": true, "score": 2, "last_activity_date": 1484200326, "last_edit_date": 1484200326, "creation_date": 1484131631, "answer_id": 41588779, "question_id": 41588720, "link": "https://stackoverflow.com/questions/41588720/unusual-substitute-without-delimiter/41588779#41588779", "title": "Unusual substitute without delimiter", "body": "<p>Here <code>^</code> is used as the delimiter.</p>\n\n<p>We may use any printable character as a regex delimiter.</p>\n\n<pre><code>s^.*/^^g;\n\ns/.*\\///g;\n</code></pre>\n\n<p>Both regex are same</p>\n\n<p>A non-standard delimiter is mostly used to avoid the need to escape the delimiter character within a regex pattern. For</p>\n\n<pre><code>$c = \"this is a string with / slash\";\n</code></pre>\n\n<p>Now your regex should be</p>\n\n<pre><code>$c =~ s/.*\\///\n          ^^\n</code></pre>\n\n<p>Here you are escaping the slash.</p>\n\n<p>Both regex are same.\nWe will use whatever regex we want. @simbabque mentioned in comment.</p>\n\n<pre><code> s{foo}{bar}gs # here curly braces are delimiter\n s[some][same] # here square bracket are delimeter.\n</code></pre>\n\n<p>And we will use character also a regex delimiter for our convenient </p>\n\n<p>To avoid escaping we can use other delimiters.</p>\n"}, {"comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1484178321, "post_id": 41595347, "comment_id": 70408102, "body": "It might be my personal preference, but the pipe doesn&#39;t feel like a good fit to me. It looks too much like an or operator. If in doubt with these quote like operators I always use a pair of brackets as the delimiter. Usually the curly ones. After all they enclose two blocks of something. Just not the normal BLOCK block."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1484183003, "post_id": 41595347, "comment_id": 70409385, "body": "@simbabque: Of course it&#39;s personal preference, but you should be writing for other readers. <code>s|.*&#47;||</code> is visibly far cleaner than <code>s{.*&#47;}{}</code> and has the advantage that both <code>&#47;</code> and <code>|</code> are simple lines. Yes `s\\.*/\\\\` will also work, but that&#39;s a different problem!"}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 6, "last_activity_date": 1484183118, "last_edit_date": 1484183118, "creation_date": 1484150358, "answer_id": 41595347, "question_id": 41588720, "link": "https://stackoverflow.com/questions/41588720/unusual-substitute-without-delimiter/41595347#41595347", "title": "Unusual substitute without delimiter", "body": "<p>The default delimiter for <code>s///</code> is the slash, but you can use any printable character as an alternative.</p>\n\n<p>So</p>\n\n<pre><code>$c =~ s^.*/^^g\n</code></pre>\n\n<p>is equivalent to</p>\n\n<pre><code>$c =~ s/.*\\///g\n</code></pre>\n\n<p>Note that using the conventional delimiter requires the slash within the pattern itself to be escaped</p>\n\n<p>Some options are better than others, and in the case where you're just trying to avoid escaping slashes within the pattern I think a pipe character <code>|</code> is better</p>\n\n<p>I wouldn't hope to learn too much from this programmer. As you have experienced, <code>^</code> is a poor and confusing choice. Also, the <code>/g</code> modifier is superfluous, and <code>$c</code> is a terrible choice for an identifier</p>\n\n<p>I would write</p>\n\n<pre><code>$c =~ s|.*/||\n</code></pre>\n"}], "owner": {"reputation": 930, "user_id": 6594367, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/03c046cae270605c2376680482e52f6d?s=128&d=identicon&r=PG&f=1", "display_name": "John Doe", "link": "https://stackoverflow.com/users/6594367/john-doe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 68, "favorite_count": 0, "accepted_answer_id": 41588779, "answer_count": 2, "score": -1, "last_activity_date": 1484200326, "creation_date": 1484131485, "question_id": 41588720, "link": "https://stackoverflow.com/questions/41588720/unusual-substitute-without-delimiter", "title": "Unusual substitute without delimiter", "body": "<p>I was unable to decipher what does this regex:</p>\n\n<pre><code>$c =~ s^.*/^^g;\n</code></pre>\n\n<p>I don't have acces to the input or the output. </p>\n\n<p>Does anyone have a clue about what it does? </p>\n"}, {"tags": ["perl", "scope"], "comments": [{"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1484130027, "post_id": 41588070, "comment_id": 70380064, "body": "If this were possible, what would you use it for?"}, {"owner": {"reputation": 449, "user_id": 7368555, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/BzlYb.jpg?s=128&g=1", "display_name": "sureshkumar", "link": "https://stackoverflow.com/users/7368555/sureshkumar"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1484130320, "post_id": 41588070, "comment_id": 70380255, "body": "I don&#39;t know where I am going to use this. While reading I had this question. Is it possible or not ?"}], "answers": [{"tags": [], "owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "is_accepted": false, "score": 4, "last_activity_date": 1484130626, "creation_date": 1484130626, "answer_id": 41588397, "question_id": 41588070, "link": "https://stackoverflow.com/questions/41588070/how-to-use-a-state-and-local-keywords-for-a-single-variable-in-perl/41588397#41588397", "title": "How to use a state and local keywords for a single variable in perl?", "body": "<p>In Perl, <code>local</code> does not declare variables (unlike e.g. <code>my</code> or <code>state</code>). Instead, <code>local</code> temporarily changes the value of an existing (global) variable. You can't use <code>local</code> with real local (i.e. lexically scoped) variables, such as the ones created by <code>my</code> or <code>state</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1484137508, "post_id": 41589058, "comment_id": 70385063, "body": "Welcome to the Perl tag! Can you please fix the <i>perldod</i> typo and add a link to the relevant doc? Besides that, very good answer. Keep them coming! :)"}, {"owner": {"reputation": 403, "user_id": 7349485, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lzfEj.jpg?s=128&g=1", "display_name": "carlosn", "link": "https://stackoverflow.com/users/7349485/carlosn"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1484138202, "post_id": 41589058, "comment_id": 70385525, "body": "Thank you @simbabque, I already changed and added a link to the perldoc ! Hopefully I will answer more and more :)"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1484146870, "post_id": 41589058, "comment_id": 70391221, "body": "Re &quot;<i>You can&#39;t declare a variable with both state and local</i>&quot;, Mostly because there&#39;s no such thing as a &quot;variable declared with local&quot;. <code>local</code> doesn&#39;t declare a variable; it makes a backup of an existing variable."}], "tags": [], "owner": {"reputation": 403, "user_id": 7349485, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lzfEj.jpg?s=128&g=1", "display_name": "carlosn", "link": "https://stackoverflow.com/users/7349485/carlosn"}, "is_accepted": true, "score": 2, "last_activity_date": 1484137823, "last_edit_date": 1484137823, "creation_date": 1484132369, "answer_id": 41589058, "question_id": 41588070, "link": "https://stackoverflow.com/questions/41588070/how-to-use-a-state-and-local-keywords-for-a-single-variable-in-perl/41589058#41589058", "title": "How to use a state and local keywords for a single variable in perl?", "body": "<p>You can't declare a variable with both state and local. You can use them in different scopes.</p>\n\n<p>For example using global:</p>\n\n<pre><code>#!/usr/bin/env perl \n\nuse common::sense;\n\nour $global = 1;\n\nchange();\nunchanged();\n\nsub change {\n\n    local $global = 3;\n\n    print \"&gt; $global\\n\";\n\n}\n\nsub unchanged {\n\n    print \"&gt; $global\\n\";\n\n}\n</code></pre>\n\n<p>It will print 3 and 1 because our allows you change the value of your variable depending on your scope.</p>\n\n<p>According to <a href=\"http://perldoc.perl.org/perlsub.html#Persistent-Private-Variables\" rel=\"nofollow noreferrer\">perldoc - Persistent-Private-Variables</a>:</p>\n\n<blockquote>\n  <p>Beginning with Perl 5.10.0, you can declare variables with the state\n  keyword in place of my.</p>\n</blockquote>\n\n<p>And as some examples you can change it too:</p>\n\n<blockquote>\n  <p>For example, the following code maintains a private counter,\n  incremented each time the gimme_another() function is called:</p>\n</blockquote>\n\n<pre><code>     use feature 'state';\n    sub gimme_another { state $x; return ++$x }\n</code></pre>\n\n<p>And this example uses anonymous subroutines to create separate counters:</p>\n\n<pre><code>use feature 'state';\nsub create_counter {\nreturn sub { state $x; return ++$x }\n}\n</code></pre>\n\n<blockquote>\n  <p>Also, since $x is lexical, it can't be reached or modified by any Perl\n  code outside.</p>\n</blockquote>\n\n<p>Basically what you are trying to do is not possible, It is like if you were trying to declare:</p>\n\n<pre><code>local my $a\nmy local $b\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 2, "last_activity_date": 1484146827, "creation_date": 1484146827, "answer_id": 41594118, "question_id": 41588070, "link": "https://stackoverflow.com/questions/41588070/how-to-use-a-state-and-local-keywords-for-a-single-variable-in-perl/41594118#41594118", "title": "How to use a state and local keywords for a single variable in perl?", "body": "<p><code>state</code> (like <code>my</code>) creates a lexically-scoped variable. <code>local</code> creates temporary backups of package variables, hash elements and array elements. Since a <code>state</code> variable is none of those, <code>local</code> can't be used to backup a <code>state</code> variable.</p>\n\n<p>If you want to make a temporary backup of a <code>state</code> variable, you could use something like <a href=\"http://search.cpan.org/perldoc?Sub::ScopeFinalizer\" rel=\"nofollow noreferrer\">Sub::ScopeFinalizer</a>.</p>\n\n<pre><code>my $guard = scope_finalizer { $var = $_[0] } [ $var ];\n</code></pre>\n"}], "owner": {"reputation": 449, "user_id": 7368555, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/BzlYb.jpg?s=128&g=1", "display_name": "sureshkumar", "link": "https://stackoverflow.com/users/7368555/sureshkumar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 556, "favorite_count": 0, "accepted_answer_id": 41589058, "answer_count": 3, "score": 0, "last_activity_date": 1484146827, "creation_date": 1484129732, "last_edit_date": 1484131786, "question_id": 41588070, "link": "https://stackoverflow.com/questions/41588070/how-to-use-a-state-and-local-keywords-for-a-single-variable-in-perl", "title": "How to use a state and local keywords for a single variable in perl?", "body": "<p>While reading about the state and local method in Perl, I had one doubt.</p>\n\n<p>state: This is used to define the static variables for a subroutines.</p>\n\n<p>local: This is used to define the local variable, but if the variable is defined using the local method, it is visible to the called subroutines also.</p>\n\n<p>My question is:</p>\n\n<p>Is it possible to define a single variable with both the state and local functionalities. If it is possible please give me an example.</p>\n\n<p>I tried below but it gives error.</p>\n\n<pre><code> local state $a;\n state local $b;\n</code></pre>\n"}, {"tags": ["perl", "error-handling", "log4perl"], "answers": [{"comments": [{"owner": {"reputation": 588, "user_id": 6897492, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/d50889f9fb83f9a62eaec9df63aeb726?s=128&d=identicon&r=PG&f=1", "display_name": "Mohit", "link": "https://stackoverflow.com/users/6897492/mohit"}, "edited": false, "score": 0, "creation_date": 1484562528, "post_id": 41587914, "comment_id": 70545811, "body": "When do we enter the if block in the sub above. As I only want that whenever an error which will trigger the application to die occurs I want to log it and stop the script execution."}, {"owner": {"reputation": 19192, "user_id": 257635, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/El2tc.jpg?s=128&g=1", "display_name": "Chankey Pathak", "link": "https://stackoverflow.com/users/257635/chankey-pathak"}, "reply_to_user": {"reputation": 588, "user_id": 6897492, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/d50889f9fb83f9a62eaec9df63aeb726?s=128&d=identicon&r=PG&f=1", "display_name": "Mohit", "link": "https://stackoverflow.com/users/6897492/mohit"}, "edited": false, "score": 0, "creation_date": 1484562846, "post_id": 41587914, "comment_id": 70546026, "body": "@Mohit: <code>$^S</code> returns true when it is executing an <code>eval</code>."}], "tags": [], "owner": {"reputation": 19192, "user_id": 257635, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/El2tc.jpg?s=128&g=1", "display_name": "Chankey Pathak", "link": "https://stackoverflow.com/users/257635/chankey-pathak"}, "is_accepted": true, "score": 4, "last_activity_date": 1484129307, "creation_date": 1484129307, "answer_id": 41587914, "question_id": 41587105, "link": "https://stackoverflow.com/questions/41587105/log-all-unexpected-errors-using-loglog4perl/41587914#41587914", "title": "Log all unexpected errors using Log::Log4perl", "body": "<pre><code>use Log::Log4perl qw(get_logger);\n\n$SIG{__DIE__} = sub {\n    if($^S) {\n        # We're in an eval {} and don't want log\n        # this message but catch it later\n        return;\n    }\n    $Log::Log4perl::caller_depth++;\n    my $logger = get_logger(\"\");\n    $logger-&gt;fatal(@_);\n    die @_; # Now terminate really\n};\n</code></pre>\n\n<p>Also see <a href=\"http://log4perl.sourceforge.net/releases/Log-Log4perl/docs/html/Log/Log4perl/FAQ.html#42a83\" rel=\"nofollow noreferrer\">Log4perl - how can I make sure my application logs a message when it dies unexpectedly?</a></p>\n"}], "owner": {"reputation": 588, "user_id": 6897492, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/d50889f9fb83f9a62eaec9df63aeb726?s=128&d=identicon&r=PG&f=1", "display_name": "Mohit", "link": "https://stackoverflow.com/users/6897492/mohit"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 283, "favorite_count": 1, "accepted_answer_id": 41587914, "answer_count": 1, "score": 4, "last_activity_date": 1484129550, "creation_date": 1484127056, "last_edit_date": 1484129550, "question_id": 41587105, "link": "https://stackoverflow.com/questions/41587105/log-all-unexpected-errors-using-loglog4perl", "title": "Log all unexpected errors using Log::Log4perl", "body": "<p>I want to generate a log for my Perl script. But when I am using <a href=\"https://metacpan.org/pod/Log::Log4perl\" rel=\"nofollow noreferrer\">Log::Log4perl</a> how can I capture the errors which will be thrown by the script in any case. How to log that to the log file.Currently whatever I write explicitely in variouys tags like ERROR(),DEBUG() etc. are the only one being printed to the log file.</p>\n\n<p>Is there any way to do this using Log::Log4perl.</p>\n\n<p>For Example in the below code: </p>\n\n<pre><code>use strict;\nuse warnings;\nuse Log::Log4perl qw(:easy);\n\nLog::Log4perl-&gt;easy_init( { level   =&gt; $DEBUG,\n                            file    =&gt; \"&gt;&gt;test.log\" });\n\nmy $logger = Log::Log4perl-&gt;get_logger();                           \n\n$logger-&gt;fatal( \"This is\", \" fatal\");\n$logger-&gt;error( \"This is error\");\n$logger-&gt;warn(  \"This is warn\");\n$logger-&gt;info(  \"This is info\");\n$logger-&gt;debug( \"This is debug\");\n$logger-&gt;trace( \"This is trace\");\n\nmy $a = 10;\n\nmy $b = $a/0; \n</code></pre>\n\n<p>The divide by zero error is not logged to the script. Mine original script is too complex to check for each error so want something which logs the error on stderr to the log file also.</p>\n"}, {"tags": ["perl", "shell", "escaping", "quoting"], "answers": [{"comments": [{"owner": {"reputation": 1571, "user_id": 592739, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/c16a9b72a2f7b0b6ec74caaca9e5f70f?s=128&d=identicon&r=PG", "display_name": "Pierre Houston", "link": "https://stackoverflow.com/users/592739/pierre-houston"}, "edited": false, "score": 0, "creation_date": 1484122455, "post_id": 41585549, "comment_id": 70375352, "body": "<code>s&#47;&#47;&#47;</code> isn&#39;t regular expressions? Well you&#39;ve gone all quoted and escaped it already so I can&#39;t really complain. Disappointing that there isn&#39;t a canonical easy way to do the same thing."}, {"owner": {"reputation": 239138, "user_id": 45375, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/39f6e2dc52425b1e08027c01bb880be0?s=128&d=identicon&r=PG", "display_name": "mklement0", "link": "https://stackoverflow.com/users/45375/mklement0"}, "reply_to_user": {"reputation": 1571, "user_id": 592739, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/c16a9b72a2f7b0b6ec74caaca9e5f70f?s=128&d=identicon&r=PG", "display_name": "Pierre Houston", "link": "https://stackoverflow.com/users/592739/pierre-houston"}, "edited": false, "score": 0, "creation_date": 1484122912, "post_id": 41585549, "comment_id": 70375589, "body": "@smallduck: Fair point; <i>technically</i>, I&#39;m using a regex, but <i>conceptually</i> it is straightforward string replacement based on literals - I&#39;ve clarified."}], "tags": [], "owner": {"reputation": 239138, "user_id": 45375, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/39f6e2dc52425b1e08027c01bb880be0?s=128&d=identicon&r=PG", "display_name": "mklement0", "link": "https://stackoverflow.com/users/45375/mklement0"}, "is_accepted": true, "score": 2, "last_activity_date": 1484133328, "last_edit_date": 1495540372, "creation_date": 1484121672, "answer_id": 41585549, "question_id": 41585063, "link": "https://stackoverflow.com/questions/41585063/perl-output-shell-escaped-string/41585549#41585549", "title": "Perl output shell-escaped string", "body": "<p>You can roll your own quoting for POSIX-like shells fairly simply - no complicated regexes needed (just straightforward string substitution using literals):</p>\n\n<pre><code>$ echo \"I'm \\$HOME. 3\\\" of rain.\" | perl -lne \"s/'/'\\\\\\''/g; print q{'} . \\$_ . q{'}\"\n'I'\\''m $HOME. 3\" of rain.'\n</code></pre>\n\n<p>The approach is modeled after AppleScript's <code>quoted form of</code> command:</p>\n\n<p>The input string is broken into substrings by <code>'</code>, each substring is itself <code>'</code>-enclosed, with the original <code>'</code> chars. spliced between the substrings as <code>\\'</code> (an individually quoted <code>'</code>).  </p>\n\n<p>When passed to the shell, the shell rebuilds these parts into a single, literal string.  </p>\n\n<p>This multi-part string-concatenation approach is necessary, because POSIX-like shells categorically do not allow embedding <code>'</code> itself inside single-quoted strings (there's not even an escape sequence).</p>\n\n<hr>\n\n<p>Alternatively, you can install a CPAN module such as <a href=\"http://search.cpan.org/~rosch/String-ShellQuote-1.03/ShellQuote.pm\" rel=\"nofollow noreferrer\">ShellQuote</a>.</p>\n\n<hr>\n\n<h3>Optional background information</h3>\n\n<p>While it would be handy for Perl itself to support such a quoting mechanism for piecing together shell commands stored in a single string to pass to <code>qx//</code> (<code>`...`</code>), such a mechanism would have to operate <em>platform-specifically</em>.<br>\nNotably, quoting rules for Windows are very different from rules for Unix platforms, and except for simple cases shell commands as a whole will be incompatible too.</p>\n\n<p>From inside Perl, you may be able to bypass the need for quoting altogether, by using the <em>list</em> forms of <a href=\"http://perldoc.perl.org/functions/system.html\" rel=\"nofollow noreferrer\"><code>system()</code></a> and <a href=\"http://perldoc.perl.org/functions/open.html\" rel=\"nofollow noreferrer\"><code>open()</code></a>, which allow you to pass the command arguments individually, as-is, but note that this is only an option if your command doesn't use any <em>shell</em> features; for a \"shell-less\" <code>qx//</code> (<code>`...`</code>) alternative, see <a href=\"https://stackoverflow.com/a/32161361/45375\">this answer</a> of mine, which also covers shell-quoting on <em>Windows</em>.</p>\n"}], "owner": {"reputation": 1571, "user_id": 592739, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/c16a9b72a2f7b0b6ec74caaca9e5f70f?s=128&d=identicon&r=PG", "display_name": "Pierre Houston", "link": "https://stackoverflow.com/users/592739/pierre-houston"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 138, "favorite_count": 1, "accepted_answer_id": 41585549, "answer_count": 1, "score": 0, "last_activity_date": 1484133328, "creation_date": 1484119807, "question_id": 41585063, "link": "https://stackoverflow.com/questions/41585063/perl-output-shell-escaped-string", "title": "Perl output shell-escaped string", "body": "<p>I'm trying to use a perl one-liner to turn print0 output into quoted shell parameters, kind of like the trick that's something like <code>.. | xargs -0 printf \"%q\" {}</code> but I didn't want to require bash (whose printf implements <code>%p</code>). I was kind of amazed to, well, <em>not find</em> an easy way to do this in perl. For all of perl's quoting mechanisms, there's no way I saw for <strong>producing</strong> quoted strings. Surely I just haven't looked hard enough.</p>\n\n<p>Hopefully the answer isn't a regular expression. Quoting an elaborate regular expression to put into a shell command-line is not my idea of fun (if only a simple perl program could quote it for me, oh back to the same problem).</p>\n"}, {"tags": ["perl", "perl-module"], "answers": [{"comments": [{"owner": {"reputation": 588, "user_id": 6897492, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/d50889f9fb83f9a62eaec9df63aeb726?s=128&d=identicon&r=PG&f=1", "display_name": "Mohit", "link": "https://stackoverflow.com/users/6897492/mohit"}, "edited": false, "score": 0, "creation_date": 1484126606, "post_id": 41585319, "comment_id": 70377587, "body": "Thanks, Chankey u nailed it."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1484126840, "post_id": 41585319, "comment_id": 70377788, "body": "This cannot remove quotes that already exist when writing the file.  It will only not add them."}, {"owner": {"reputation": 588, "user_id": 6897492, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/d50889f9fb83f9a62eaec9df63aeb726?s=128&d=identicon&r=PG&f=1", "display_name": "Mohit", "link": "https://stackoverflow.com/users/6897492/mohit"}, "edited": false, "score": 0, "creation_date": 1484127281, "post_id": 41585319, "comment_id": 70378130, "body": "Yeah but my input did not had quotes but spaces which were leading to quotes."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 588, "user_id": 6897492, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/d50889f9fb83f9a62eaec9df63aeb726?s=128&d=identicon&r=PG&f=1", "display_name": "Mohit", "link": "https://stackoverflow.com/users/6897492/mohit"}, "edited": false, "score": 0, "creation_date": 1484127384, "post_id": 41585319, "comment_id": 70378202, "body": "@Mohit  Ah ... that&#39;s not what the question shows.  It has <i>&quot;Last Invoice : &quot;</i> (with quotes).  The description also indicates that quotes (originally)come from Excel data.  Good then, this will indeed <i>not</i> add quotes."}, {"owner": {"reputation": 588, "user_id": 6897492, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/d50889f9fb83f9a62eaec9df63aeb726?s=128&d=identicon&r=PG&f=1", "display_name": "Mohit", "link": "https://stackoverflow.com/users/6897492/mohit"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1484127821, "post_id": 41585319, "comment_id": 70378490, "body": "@zdim, No that &quot;Last Invoice: &quot; thing is in the CSV format which is the Output file I am referring to. But thanks for your quick response."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 588, "user_id": 6897492, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/d50889f9fb83f9a62eaec9df63aeb726?s=128&d=identicon&r=PG&f=1", "display_name": "Mohit", "link": "https://stackoverflow.com/users/6897492/mohit"}, "edited": false, "score": 0, "creation_date": 1484180428, "post_id": 41585319, "comment_id": 70408762, "body": "@Mohit Alright, thanks for explaining it. Just note that this doesn&#39;t come through in the question so I&#39;d suggest to pay attention to how they&#39;ll come across and write them more clearly in the future."}], "tags": [], "owner": {"reputation": 19192, "user_id": 257635, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/El2tc.jpg?s=128&g=1", "display_name": "Chankey Pathak", "link": "https://stackoverflow.com/users/257635/chankey-pathak"}, "is_accepted": true, "score": 2, "last_activity_date": 1484121097, "last_edit_date": 1484121097, "creation_date": 1484120790, "answer_id": 41585319, "question_id": 41584906, "link": "https://stackoverflow.com/questions/41584906/getting-double-quotes-in-a-value-in-csv/41585319#41585319", "title": "Getting Double Quotes in a value in CSV", "body": "<blockquote>\n  <p>By default, a space in a field would trigger quotation. As no rule\n  exists this to be forced in CSV, nor any for the opposite, the default\n  is true for safety. You can exclude the space from this trigger by\n  setting this attribute to 0. -<a href=\"https://metacpan.org/pod/Text::CSV#quote_space\" rel=\"nofollow noreferrer\">Text::CSV doc</a></p>\n</blockquote>\n\n<p>Therefore setting it to 0 will fix the issue for you.</p>\n\n<pre><code>$csv-&gt;quote_space (0);\n</code></pre>\n\n<p>You could also specify the same while creating the object.</p>\n\n<pre><code>$csv = Text::CSV-&gt;new ({\n           quote_space    =&gt; 0,\n       });\n</code></pre>\n"}], "owner": {"reputation": 588, "user_id": 6897492, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/d50889f9fb83f9a62eaec9df63aeb726?s=128&d=identicon&r=PG&f=1", "display_name": "Mohit", "link": "https://stackoverflow.com/users/6897492/mohit"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 502, "favorite_count": 0, "accepted_answer_id": 41585319, "answer_count": 1, "score": 0, "last_activity_date": 1484129008, "creation_date": 1484119245, "last_edit_date": 1484129008, "question_id": 41584906, "link": "https://stackoverflow.com/questions/41584906/getting-double-quotes-in-a-value-in-csv", "title": "Getting Double Quotes in a value in CSV", "body": "<p>I am working on a script which takes some values from an excel and logs it to a CSV file. In between we perform some calculations on the data and then log to the CSV. I am appending a string to a value from the excel and then saving it to an array element. I am using array as to simulate an excel sheet to save execution time and finally picking values from the array and logging it to CSV.</p>\n\n<p>But the problem I am facing is this values which I am getting for a column where I appended a string with a excel value is giving double quotes around. They are not visible in case of the excel but when I view that CSV in notepad++ I am getting those.</p>\n\n<p>I tried looking but not getting any reason for this. Can anyone help.</p>\n\n<p>Please find a code reference below:</p>\n\n<pre><code>$Array_Final[$R_FIN][11] = \"Last Invoice : \".$Array_Input_DP_Plan3[$W_R][$C_LI];\nmy $csv = Text::CSV-&gt;new ( { binary =&gt; 1, eol =&gt; \"\\n\"  } )  # should set binary attribute.\n                 or die \"Cannot use CSV: \".Text::CSV-&gt;error_diag ();\n\n    open my $fh, \"&gt;:encoding(utf8)\", $VPath.\"\\\\Temp\\\\\".$VCsvFileName;\n    my @log;\n    for my $row(1..$#Array_Final){\n        #COMMENT:EMPTY THE LOG ARRAY\n        $#log = -1;\n        for my $col(1..42){\n            if(defined $Array_Final[$row][$col] &amp;&amp; $Array_Final[$row][$col] ne \"\"){\n                push @log, $Array_Final[$row][$col];\n            }\n            else{\n                push @log, undef;\n            }   \n        }\n        #print (@log);\n        $csv-&gt;print ($fh, \\@log);\n    }\n    close $fh or die \"new.csv: $!\";\n</code></pre>\n\n<p>The CSV lines I am getting like this:</p>\n\n<blockquote>\n  <p>20161212-001,20170111,DEL,12,3,A,ABC,,,\"Last Invoice : 1111\",,,DP</p>\n</blockquote>\n"}, {"tags": ["python", "perl", "frameworks", "open-source"], "answers": [{"tags": [], "owner": {"reputation": 1979, "user_id": 2789312, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/4OgOz.png?s=128&g=1", "display_name": "palik", "link": "https://stackoverflow.com/users/2789312/palik"}, "is_accepted": false, "score": 1, "last_activity_date": 1484124362, "creation_date": 1484124362, "answer_id": 41586255, "question_id": 41584718, "link": "https://stackoverflow.com/questions/41584718/collection-framework-for-collecting-performance-metrics/41586255#41586255", "title": "Collection framework for collecting performance metrics", "body": "<p>Just use <a href=\"https://kairosdb.github.io/docs/build/html/restapi/index.html\" rel=\"nofollow noreferrer\">Kairosdb REST API</a> and some HTTP client e.g. <a href=\"https://metacpan.org/pod/HTTP::Tiny\" rel=\"nofollow noreferrer\">HTTP::Tiny</a>.</p>\n\n<p>Here an TFTP based example <a href=\"http://codegists.com/code/kairosdb%20stress%20yaml/\" rel=\"nofollow noreferrer\">Kairosdb Stress Yaml</a></p>\n"}], "owner": {"reputation": 47, "user_id": 7378470, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh4.googleusercontent.com/-3SbYm7bg5l0/AAAAAAAAAAI/AAAAAAAAACI/0Di7DIZW8ag/photo.jpg?sz=128", "display_name": "Mohan Raj", "link": "https://stackoverflow.com/users/7378470/mohan-raj"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 184, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1484124362, "creation_date": 1484118483, "question_id": 41584718, "link": "https://stackoverflow.com/questions/41584718/collection-framework-for-collecting-performance-metrics", "title": "Collection framework for collecting performance metrics", "body": "<p>I am working on collecting system metrics, running custom scripts to get the application related performance data and storing the data in time-series database(kairosdb with cassandra). I know there is collectd and telegraf framework for the same purpose. collectd seems to satisfy my requirements but not sure about the performance and also we need to run the custom scripts at different interval using exec plugin. I am not sure whether we can achieve this using collectd.</p>\n\n<p>Also i came across telegraf. It is written in go language. It is tag based, so it is easy for me to store the data using kairosdb. But I am not sure how efficient it is and whether it will server my purpose.  </p>\n\n<p>Is there any other opensource collection framework available in perl or python to collect system metrics,run custom scripts and store the data in time-series database(kairosdb)?</p>\n"}, {"tags": ["performance", "perl", "profiling", "execution-time"], "comments": [{"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 0, "creation_date": 1484118105, "post_id": 41583442, "comment_id": 70373278, "body": "If you&#39;re using PerlIO layers on the filehandle, the decoding is done for you. (Although <code>utf8</code> doesn&#39;t mean anything. You probably meant <code>:utf8</code> even though you <i>actually</i> want <code>:encoding(utf8)</code>.) If you have Unicode characters in your source code, you need to <code>use utf8;</code>. You shouldn&#39;t read the entire file into memory if you don&#39;t have to, and you shouldn&#39;t have an array and a scalar with the same name, because it&#39;s confusing."}, {"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 1, "creation_date": 1484118281, "post_id": 41583442, "comment_id": 70373369, "body": "And, despite all of the obvious goofiness with your code, the total run time is still less than a second. Why does it need to be faster than that?"}, {"owner": {"reputation": 946, "user_id": 1765406, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/Koqta.jpg?s=128&g=1", "display_name": "vanHoesel", "link": "https://stackoverflow.com/users/1765406/vanhoesel"}, "edited": false, "score": 1, "creation_date": 1484121762, "post_id": 41583442, "comment_id": 70374996, "body": "without going into detail about UTF-8 and decoding/encoding issues... you can reduce the time spend on decode_utf8 by half of the time: you are calling that function every iteration on $key, in general (with any function), you can move that outside the loop and use my $key_decoded = decode_utf8($key). then inside the loop use $key_decoded to compare with your $in."}, {"owner": {"reputation": 1665, "user_id": 1848140, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/c0bc64ef33e6ab5560ce5c534190a6a0?s=128&d=identicon&r=PG&f=1", "display_name": "Nagaraju", "link": "https://stackoverflow.com/users/1848140/nagaraju"}, "reply_to_user": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 0, "creation_date": 1484124292, "post_id": 41583442, "comment_id": 70376247, "body": "@MattJacob the code execution time posted here is just a working example in real it takes almost around 20 seconds in real time(huge database). And I have a main file that is opening the file in utf8 and in another subroutine decode_utf8 is called. The issue here is I dont want to be editing the main file from where the file is being opened"}, {"owner": {"reputation": 1665, "user_id": 1848140, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/c0bc64ef33e6ab5560ce5c534190a6a0?s=128&d=identicon&r=PG&f=1", "display_name": "Nagaraju", "link": "https://stackoverflow.com/users/1848140/nagaraju"}, "reply_to_user": {"reputation": 946, "user_id": 1765406, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/Koqta.jpg?s=128&g=1", "display_name": "vanHoesel", "link": "https://stackoverflow.com/users/1765406/vanhoesel"}, "edited": false, "score": 0, "creation_date": 1484124381, "post_id": 41583442, "comment_id": 70376289, "body": "@vanHoesel Yes its in the loop. I just prepared a snippet to make the users here understand the time taken for it to execute. I wanted to know is there anything I can do to avoid decode_utf8"}], "answers": [{"comments": [{"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 0, "creation_date": 1484152357, "post_id": 41594619, "comment_id": 70394826, "body": "You&#39;ve changed the intent of the original code. Instead of looking for <code>$key</code> in every line, you&#39;re only matching it once across the entire file."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 0, "creation_date": 1484153598, "post_id": 41594619, "comment_id": 70395573, "body": "@Matt Jacob, You have it backwards. The original code was buggy, and I produced the code that produces the intended result. There&#39;s no reason to believe the OP wanted to print the number of matches. And even if they did, the <code>if</code> should still be moved outside of the loop. (Just replace <code>$found=1;last;</code> with <code>++$found;</code>.) And hey, if the check really should be in the loop, the OP already knows how to do that, so nothing was lost."}, {"owner": {"reputation": 1665, "user_id": 1848140, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/c0bc64ef33e6ab5560ce5c534190a6a0?s=128&d=identicon&r=PG&f=1", "display_name": "Nagaraju", "link": "https://stackoverflow.com/users/1848140/nagaraju"}, "edited": false, "score": 0, "creation_date": 1484194002, "post_id": 41594619, "comment_id": 70412088, "body": "@ikegami I wanted to reproduce a minimal and verifiable working example to reproduce the issue.So the code looks buggy. In reality all these happens in multiple subroutines. I had intentionally placed utf8 in source code but actually that variable is also assigned from a file. And also read my comments that I clarified with the question to other users."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1484194594, "post_id": 41594619, "comment_id": 70412249, "body": "I don&#39;t see your point. What is your comment trying to say? Why do you think it matter if your bugs actually span subroutines? Have you fixed them as I showed you yet? Your other comments are also irrelevant, so I&#39;m not sure why you bring those up either. Except maybe the fact that some inputs come from the db. Cause there again, it&#39;s far cleaner to just ask the db driver to decode for you."}, {"owner": {"reputation": 1665, "user_id": 1848140, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/c0bc64ef33e6ab5560ce5c534190a6a0?s=128&d=identicon&r=PG&f=1", "display_name": "Nagaraju", "link": "https://stackoverflow.com/users/1848140/nagaraju"}, "edited": false, "score": 0, "creation_date": 1484199023, "post_id": 41594619, "comment_id": 70413491, "body": "I mean in order to make a minimal example these bugs have encounterted. I fixed the loading of entire file into memory. But I am still stuck with utf8. I am trying to find where am I doing wrong while dealing with utf8 in the subroutines that are being used. @ikegami"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1484199156, "post_id": 41594619, "comment_id": 70413535, "body": "Did you remove the calls to decode_utf8 and the IO layer on the open statement, keeping only the first two lines of the code I posted? Read the accompanying comments!!!"}, {"owner": {"reputation": 1665, "user_id": 1848140, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/c0bc64ef33e6ab5560ce5c534190a6a0?s=128&d=identicon&r=PG&f=1", "display_name": "Nagaraju", "link": "https://stackoverflow.com/users/1848140/nagaraju"}, "edited": false, "score": 0, "creation_date": 1484199687, "post_id": 41594619, "comment_id": 70413712, "body": "I have multiple files that are being read using Getopt::Long; Can I read them without the IO layer?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1484233551, "post_id": 41594619, "comment_id": 70434171, "body": "Getopt::Long doesn&#39;t read any files. /// I think you&#39;ll need <code>use open &#39;:encoding(UTF-8)&#39;;</code> (no <code>:std</code>) in the other source files that use <code>open</code> (or use <code>:encoding(UTF-8)</code> in the <code>open</code> function call, or decode manually)."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 1, "last_activity_date": 1484155008, "last_edit_date": 1484155008, "creation_date": 1484148192, "answer_id": 41594619, "question_id": 41583442, "link": "https://stackoverflow.com/questions/41583442/decode-utf8-consumes-time-in-execution/41594619#41594619", "title": "decode_utf8 consumes time in execution", "body": "<blockquote>\n  <p><em>The results are such that decode_utf8 consumes 34% of time.</em></p>\n</blockquote>\n\n<p>Well yeah, that's basically all your program does.</p>\n\n<p>More importantly, your code is buggy. You're decoding previously decoded strings!</p>\n\n<ul>\n<li>You decode the contents of the file when you read them (via <code>:utf8</code>), and then you decode the already-decoded content in the loop.</li>\n<li>You decode the contents of <code>$key</code> every pass through the loop so that by the fourth pass, you are using <code>decode_utf8(decode_utf8(decode_utf8(decode_utf8($key))))</code>.</li>\n</ul>\n\n<p>Fix:</p>\n\n<pre><code>use utf8;                             # Source code encoded using UTF-8.    \nuse open ':std', ':encoding(UTF-8)';  # Term provides and expects UTF-8. Default for files.\n\nuse strict;\nuse warnings;\n\nmy $key = \"\u0905\u091a\u094d\u091b\u093e\";\n\nmy $found = 0;\nwhile (my $line = &lt;&gt;) {\n    chomp($line);\n    if ($line eq $key) {\n        $found = 1;\n        last;\n    }\n}\n\nif ($found) {\n    print \"Match found\\n\";\nelse {\n    print \"No match\\n\";\n}\n</code></pre>\n\n<p>This fixes other issues too:</p>\n\n<ul>\n<li>Encodes outputs (using <code>use open ':std'</code>).</li>\n<li>Doesn't needlessly use global variables. (Use <code>open my $IN</code> instead of <code>open IN</code>.)</li>\n<li>Doesn't needlessly load the entire file into memory.</li>\n<li>Doesn't needlessly read the entire file.</li>\n<li>Doesn't print <code>Not matched</code> 34,999 times when the key is found.</li>\n<li>Avoids <code>:utf8</code> in favour of <code>:encoding(UTF-8)</code>.</li>\n<li>Doesn't reinvent <code>&lt;&gt;</code>.</li>\n<li>Doesn't hide a <code>die</code> in the middle of a line. (Put a line break before <code>or die</code>.)</li>\n<li>Doesn't use \"cannot\". (Use \"can't\"!)</li>\n</ul>\n"}], "owner": {"reputation": 1665, "user_id": 1848140, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/c0bc64ef33e6ab5560ce5c534190a6a0?s=128&d=identicon&r=PG&f=1", "display_name": "Nagaraju", "link": "https://stackoverflow.com/users/1848140/nagaraju"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 58, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1484155008, "creation_date": 1484113111, "question_id": 41583442, "link": "https://stackoverflow.com/questions/41583442/decode-utf8-consumes-time-in-execution", "title": "decode_utf8 consumes time in execution", "body": "<p>The following is the code snippet that I have been working on to improve its speed.</p>\n\n<pre><code>use strict;\nuse warnings;\nuse Encode;\n\nopen(IN,\"&lt;utf8\",$ARGV[0]) or die \"Cannot open $ARGV[0]:$!\\n\"; ##treat it as a huge data of 35,000 lines in devnagari script.\nmy @in = &lt;IN&gt;;\nclose(IN);\n\nmy $key = \"\u0905\u091a\u094d\u091b\u093e\";  #key to be matched contains devanagari script as a string \n\nforeach my $in(@in) {\n    chomp($in);\n    $key = decode_utf8($key);\n        $in = decode_utf8($in);\n    if($key eq $in) {\n        print \"$key: matched\\n\";\n    }\n    else {\n        print \"Not matched\\n\";\n    }\n}\n</code></pre>\n\n<p>I am  trying to match the lines in the file with key.\nBy profiling my code following are the results I get.</p>\n\n<p><a href=\"https://i.stack.imgur.com/B8FIA.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/B8FIA.png\" alt=\"enter image description here\"></a></p>\n\n<p>The results are such that <code>decode_utf8</code> consumes 34% of time.\nSince my data is in utf8 I used <code>decode_utf8</code>.</p>\n\n<p>What can I do to improve the speed here. Any other workaround for replacing <code>decode_utf8</code> in the code to match the unicode data.</p>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 1, "user_id": 5082884, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153303855465935/picture?type=large", "display_name": "Thorbj&#248;rn Wulf", "link": "https://stackoverflow.com/users/5082884/thorbj%c3%b8rn-wulf"}, "edited": false, "score": 0, "creation_date": 1484091810, "post_id": 41580434, "comment_id": 70365807, "body": "sorry. Format was wrong"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1484492625, "post_id": 41580434, "comment_id": 70523388, "body": "It sounds like you&#39;re trying to modify your data so that it can be parsed by just splitting on commas. Commas, spaces, and even double-quotes within quoted fields are fine in &quot;standard&quot; CSV data, and you should fix your parser instead of mutilating your data."}], "answers": [{"tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": false, "score": 3, "last_activity_date": 1484092943, "creation_date": 1484092943, "answer_id": 41580613, "question_id": 41580434, "link": "https://stackoverflow.com/questions/41580434/perl-oneliner-search-replace-pattern/41580613#41580613", "title": "perl oneliner search replace pattern", "body": "<p>Easy using <a href=\"http://p3rl.org/Text::CSV_XS\" rel=\"nofollow noreferrer\">Text::CSV_XS</a>:</p>\n\n<pre><code>perl -CS -MText::CSV_XS=csv -we '\n    my $aoa = csv(in =&gt; shift, allow_whitespace =&gt; 1);\n    $_-&gt;[1] =~ s/,//g for @$aoa;\n    csv(in =&gt; $aoa, out =&gt; *STDOUT, always_quote =&gt; 0);\n    ' input.csv &gt; output.csv\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1484492778, "post_id": 41587191, "comment_id": 70523437, "body": "<code>perl -pe  &#39;s{ &quot; ( [^&quot;]+ ) &quot; }{ $1 =~ tr&#47;,&#47;&#47;dr }xeg&#39; file.txt</code>"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1484493467, "post_id": 41587191, "comment_id": 70523650, "body": "Your solution removes the double quotes, which wasn&#39;t part of the requirement"}, {"owner": {"reputation": 5455, "user_id": 3961170, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/PtFol.jpg?s=128&g=1", "display_name": "mkHun", "link": "https://stackoverflow.com/users/3961170/mkhun"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1484550368, "post_id": 41587191, "comment_id": 70539678, "body": "@Borodin Yours snippet also not removing the <code>&quot;</code>. And thank you for you comment. I learn one method from you. Answer updated."}, {"owner": {"reputation": 1, "user_id": 5082884, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153303855465935/picture?type=large", "display_name": "Thorbj&#248;rn Wulf", "link": "https://stackoverflow.com/users/5082884/thorbj%c3%b8rn-wulf"}, "edited": false, "score": 0, "creation_date": 1484557319, "post_id": 41587191, "comment_id": 70542838, "body": "I have met this problem on various datasets - not just csv. That&#39;s why I&#39;m looking for a generic way of dealing with this kind of regex problem: how do you do only-in-group-search/replace"}], "tags": [], "owner": {"reputation": 5455, "user_id": 3961170, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/PtFol.jpg?s=128&g=1", "display_name": "mkHun", "link": "https://stackoverflow.com/users/3961170/mkhun"}, "is_accepted": false, "score": 0, "last_activity_date": 1484550592, "last_edit_date": 1484550592, "creation_date": 1484127256, "answer_id": 41587191, "question_id": 41580434, "link": "https://stackoverflow.com/questions/41580434/perl-oneliner-search-replace-pattern/41587191#41587191", "title": "perl oneliner search replace pattern", "body": "<p>Try this one liner</p>\n\n<pre><code>perl -p -e  's/\"([^\"]*)\"/my $m=$1;$m=~ s:,::g; $m /eg' file.txt\n</code></pre>\n\n<p>As per Borodin comment script updated. Because above script will remove the <code>\"</code> also.</p>\n\n<pre><code>perl -p -e  's/ (?&lt;=\") ([^\"]*) (?&lt;=\")/$1=~ s:,::rg; /xeg' file.txt\n</code></pre>\n\n<p>In second one, I used positive look ahead and look behind. With non-destructive  modifier <code>(r)</code>. Non-destructive modifier will work on only > 5.14.  </p>\n"}], "owner": {"reputation": 1, "user_id": 5082884, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153303855465935/picture?type=large", "display_name": "Thorbj&#248;rn Wulf", "link": "https://stackoverflow.com/users/5082884/thorbj%c3%b8rn-wulf"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 89, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1484550592, "creation_date": 1484091755, "last_edit_date": 1484493580, "question_id": 41580434, "link": "https://stackoverflow.com/questions/41580434/perl-oneliner-search-replace-pattern", "title": "perl oneliner search replace pattern", "body": "<p>I have thousands of rows where some contain the following:</p>\n\n<pre><code>id_s,title_dk\nKKS2826,\"S\u00f8slag ved \u00d8land og Gulland, 1564\",12312,2x2\nKKS935,\"Vignet til Edvard Brandes, afhandling om Johan Wiehe\", 1233, 4x4\n</code></pre>\n\n<p>I'm looking for a Perl one-liner where I can delete any comma that might occur within quotations (the second column). But obviously not the others, wince they are delimiters.</p>\n\n<p>So desired output would be:</p>\n\n<pre><code>id_s,title_dk\nKKS2826,\"S\u00f8slag ved \u00d8land og Gulland 1564\",12312,2x2\nKKS935,\"Vignet til Edvard Brandes afhandling om Johan Wiehe\", 1233, 4x4\n</code></pre>\n\n<p>I have been playing with this:  <code>perl -ne 's/(?&lt;!,),//g; print;'</code>\nBut I can't figure out how to keep the other commas.</p>\n"}, {"tags": ["html", "regex", "bash", "perl", "sed"], "comments": [{"owner": {"reputation": 68617, "user_id": 3776858, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/juunm.png?s=128&g=1", "display_name": "Cyrus", "link": "https://stackoverflow.com/users/3776858/cyrus"}, "edited": false, "score": 2, "creation_date": 1484077557, "post_id": 41576965, "comment_id": 70359006, "body": "I suggest to use an XML/HTML parser for this job, e.g.: xmlstarlet."}], "answers": [{"tags": [], "owner": {"reputation": 14395, "user_id": 1344961, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0b7ad173373ce2a48950108f5adc4b6d?s=128&d=identicon&r=PG", "display_name": "SLePort", "link": "https://stackoverflow.com/users/1344961/sleport"}, "is_accepted": false, "score": 1, "last_activity_date": 1484080383, "last_edit_date": 1484080383, "creation_date": 1484077390, "answer_id": 41577061, "question_id": 41576965, "link": "https://stackoverflow.com/questions/41576965/regular-expression-usage-in-command-line-replace-space-with-20-inside-href/41577061#41577061", "title": "Regular expression usage in command line - replace space with %20 inside href", "body": "<p>An xml parser would be more suited for that job(eg. <a href=\"http://xmlstar.sourceforge.net/\" rel=\"nofollow noreferrer\">XMLStarlet</a>, <a href=\"http://xmlsoft.org/xmllint.html\" rel=\"nofollow noreferrer\">xmllint</a>,...), but if you don't have newlines in your <code>a</code> tags, the below sed should work. </p>\n\n<p>Using the <code>t</code> command and backreferences, it loops over and replace all spaces up to last <code>\"</code> inside the <code>a</code> tags:</p>\n\n<pre><code>$ sed ':a;s/\\(&lt;a [^&gt;]*href=[^\"]*\"[^ ]*\\) \\([^\"]*\"&gt;\\)/\\1%20\\2/;ta' &lt;&lt;&lt; '&lt;a href=\"http://url with spaces\"&gt;'\n&lt;a href=\"http://url%20with%20spaces\"&gt;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 115587, "user_id": 56541, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/Wm7Xg.png?s=128&g=1", "display_name": "David Z", "link": "https://stackoverflow.com/users/56541/david-z"}, "edited": false, "score": 0, "creation_date": 1484081026, "post_id": 41577772, "comment_id": 70360826, "body": "Props for providing the proper parsing code that I couldn&#39;t figure out myself :-)"}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 3, "last_activity_date": 1484083600, "last_edit_date": 1484083600, "creation_date": 1484080028, "answer_id": 41577772, "question_id": 41576965, "link": "https://stackoverflow.com/questions/41576965/regular-expression-usage-in-command-line-replace-space-with-20-inside-href/41577772#41577772", "title": "Regular expression usage in command line - replace space with %20 inside href", "body": "<p>The problem is that you don't properly escape the single quotes in your program.</p>\n\n<p>If your program is</p>\n\n<pre><code>...[^'\"]...\n</code></pre>\n\n<p>The shell literal might be</p>\n\n<pre><code>'...[^'\\''\"]...'\n\n'...[^'\"'\"'\"]...'\n\n'...[^\\x27\"]...'    # Avoids using a single quote to avoid escaping it.\n</code></pre>\n\n<p>So, you were going for</p>\n\n<pre><code>perl -ne 's/href\\s*=\\s*['\\''\"][^'\\''\" ]*\\K\\h|(?!^)\\G[^'\\''\" ]*\\K\\h/%20/g; print;'\n</code></pre>\n\n<hr>\n\n<p>Don't try do everything at once. Here are some far cleaner (i.e. far more readable) solutions:</p>\n\n<pre><code>perl -pe's{href\\s*=\\s*['\\''\"]\\K([^'\\''\"]*)}{ $1 =~ s/ /%20/rg }eg'                # 5.14+\n\nperl -pe's{href\\s*=\\s*['\\''\"]\\K([^'\\''\"]*)}{ (my $s = $1) =~ s/ /%20/g; $s }eg'\n</code></pre>\n\n<p>Note that <code>-p</code> is the same as <code>-n</code>, except that it cause a <code>print</code> to be performed for each line.</p>\n\n<hr>\n\n<p>The above solutions make a large number of assumptions about the files that might be encountered<sup>[1]</sup>. All of these assumptions would go away if you use a proper parser.</p>\n\n<p>If you have HTML files:</p>\n\n<pre><code>perl -MXML::LibXML -e'\n   my $doc = XML::LibXML-&gt;new-&gt;parse_file($ARGV[0]);\n   $_-&gt;setValue( $_-&gt;getValue() =~ s/ /%20/gr )\n      for $doc-&gt;findnodes(q{//@href});\n   binmode(STDOUT);\n   print($doc-&gt;toStringHTML());\n' in_file.html &gt;out_file.html\n</code></pre>\n\n<p>If you have XML (incl XHTML) files:</p>\n\n<pre><code>perl -MXML::LibXML -e'\n   my $doc = XML::LibXML-&gt;new-&gt;parse_file($ARGV[0]);\n   $_-&gt;setValue( $_-&gt;getValue() =~ s/ /%20/gr )\n      for $doc-&gt;findnodes(q{//@href});\n   binmode(STDOUT);\n   $doc-&gt;toFH(\\*STDOUT);\n' in_file.html &gt;out_file.html\n</code></pre>\n\n<hr>\n\n<ol>\n<li><p>Assumptions made by the substitution-based solutions:</p>\n\n<ul>\n<li>File uses an ASCII-based encoding (e.g. UTF-8, iso-latin-1, but not UTF-16le).</li>\n<li>No newline between <code>href</code> and <code>=</code>.</li>\n<li>No newline between <code>=</code> and the value.</li>\n<li>No newline in the value of <code>href</code> attributes.</li>\n<li>Nothing matching <code>/href\\s*=/</code> in text (incl CDATA sections).</li>\n<li>Nothing matching <code>/href\\s*=/</code> in comments.</li>\n<li>No other attributes have a name ending in <code>href</code>.</li>\n<li>No single quote (<code>'</code>) in <code>href=\"...\"</code>.</li>\n<li>No double quote (<code>\"</code>) in <code>href='...'</code>.</li>\n<li>No <code>href=</code> with an unquoted value.</li>\n<li>Space in <code>href</code> attributes aren't encoded using a character entity (e.g <code>&amp;#x20;</code>).</li>\n<li>Maybe more?</li>\n</ul>\n\n<p>&#x20;</p>\n\n<p>(SLePort makes similar assumptions even though they didn't document them. They also assume <code>href</code> attributes don't contain <code>&gt;</code>.)</p></li>\n</ol>\n"}, {"comments": [{"owner": {"reputation": 115587, "user_id": 56541, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/Wm7Xg.png?s=128&g=1", "display_name": "David Z", "link": "https://stackoverflow.com/users/56541/david-z"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1484083428, "post_id": 41578012, "comment_id": 70362183, "body": "@ikegami Huh, I wasn&#39;t familiar with <code>\\K</code>. Anyway, the expression I had in my answer was not intended to support spaces. It would be easy to add that capability - in fact I see you used this in your own answer. So I think it&#39;s a little unfair to say the OP&#39;s regex is far better than the double substitution technique on that basis."}], "tags": [], "owner": {"reputation": 115587, "user_id": 56541, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/Wm7Xg.png?s=128&g=1", "display_name": "David Z", "link": "https://stackoverflow.com/users/56541/david-z"}, "is_accepted": false, "score": 0, "last_activity_date": 1484083200, "last_edit_date": 1484083200, "creation_date": 1484080943, "answer_id": 41578012, "question_id": 41576965, "link": "https://stackoverflow.com/questions/41576965/regular-expression-usage-in-command-line-replace-space-with-20-inside-href/41578012#41578012", "title": "Regular expression usage in command line - replace space with %20 inside href", "body": "<p>You seem to have neglected to escape the quotes inside the string you pass to Perl. So Bash sees you giving <code>perl</code> the following arguments:</p>\n\n<ol>\n<li><code>s/href\\s*=\\s*[][^'</code>, which results from the concatenation of the single-quoted string <code>'s/href\\s*=\\s*['</code> and the double-quoted string <code>\"][^'\"</code></li>\n<li><code>]*Kh</code>, unquoted, because <code>\\K</code> and <code>\\h</code> are not special characters in the shell so it just treats them as <code>K</code> and <code>h</code> respectively</li>\n</ol>\n\n<p>Then Bash sees a pipe character <code>|</code>, followed by a subshell invocation <code>(?!^)</code>, in which <code>!^</code> gets substituted with the first argument of the last command invoked. (See \"History Expansion > Word Designators\" in the <a href=\"https://linux.die.net/man/1/bash\" rel=\"nofollow noreferrer\">Bash man page</a>.) For example, if your last command was <code>echo myface</code> then <code>(?!^)</code> would look for the command named <code>?myface</code> and runs it in a subshell.</p>\n\n<p>And finally, Bash gets to the sequence <code>\\G[^'\" ]*\\K\\h/%20/g; print;'</code>, which is interpreted as the concatenation of <code>G</code> (from <code>\\G</code>), <code>[^</code>, and the single-quoted string <code>\" ]*\\K\\h/%20/g; print;</code>. Bash has no idea what to do with <code>G[^\" ]*\\K\\h/%20/g; print;</code>, since it just finished parsing a subshell invocation and expects to see a semicolon, line break, or logical operator (or so on) before getting another arbitrary string.</p>\n\n<p>Solution: properly quote the expression you give to <code>perl</code>. You'll need to use a combination of single and double quotes to pull it off, e.g.</p>\n\n<pre><code>perl -ne 's/href\\s*=\\s*['\"'\\\"][^'\\\" ]*\"'\\K\\h|(?!^)\\G[^'\"'\\\" ]*\"'\\K\\h/%20/g; print;'\n</code></pre>\n"}], "owner": {"reputation": 19, "user_id": 2086228, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/47c46d8c9ddb4b8647c2cf3c9405da8a?s=128&d=identicon&r=PG", "display_name": "Garak", "link": "https://stackoverflow.com/users/2086228/garak"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 476, "favorite_count": 0, "answer_count": 3, "score": 1, "last_activity_date": 1484486872, "creation_date": 1484077005, "last_edit_date": 1484486872, "question_id": 41576965, "link": "https://stackoverflow.com/questions/41576965/regular-expression-usage-in-command-line-replace-space-with-20-inside-href", "title": "Regular expression usage in command line - replace space with %20 inside href", "body": "<p>Find/replace space with %20</p>\n\n<p>I must replace all spaces in <code>*.html</code> files which are inside <code>href=\"something something .pdf\"</code> with <code>%20</code>.\nI found a regular expression for that task:</p>\n\n<pre><code>find    : href\\s*=\\s*['\"][^'\" ]*\\K\\h|(?!^)\\G[^'\" ]*\\K\\h\nreplace : %20\n</code></pre>\n\n<p>That regular expression works in text editors like Notepad++ or Geany.\nI want use that regular expression from the Linux command line with sed or perl.\nSolution (1):</p>\n\n<pre><code>    cat test002.html | perl -ne 's/href\\s*=\\s*['\\''\"][^'\\''\" ]*\\K\\h|(?!^)\\G[^'\\''\" ]*\\K\\h/%20/g; print;' &gt; Work_OK01.html\n</code></pre>\n\n<p>Solution (2):</p>\n\n<pre><code>    cat test002.html | perl -ne 's/href\\s*=\\s*[\\x27\"][^\\x27\" ]*\\K\\h|(?!^)\\G[^\\x27\" ]*\\K\\h/%20/g; print;' &gt; Work_OK02.html\n</code></pre>\n"}, {"tags": ["perl", "dictionary", "hash", "hashmap"], "comments": [{"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1484071735, "post_id": 41575326, "comment_id": 70355749, "body": "I&#39;m unclear what you&#39;re trying to do...can you please explain what you want <code>@decodedIDS</code> to contain?"}, {"owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 0, "creation_date": 1484071850, "post_id": 41575326, "comment_id": 70355799, "body": "&quot;I then save them with a MISC tag in the form of a hash map&quot; ... then maybe you meant to say <code>@decodedIDS = map { MISC =&gt; $_ } @{$id_array}</code>?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 0, "creation_date": 1484072106, "post_id": 41575326, "comment_id": 70355926, "body": "That&#39;s not a hash, @mob. <code>my %decodedIDS = map { $_ =&gt; 1 } @$id_array;</code> would create a hash keyed by id."}], "answers": [{"comments": [{"owner": {"reputation": 174, "user_id": 6409919, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/10208881690855599/picture?type=large", "display_name": "Andras Palfi", "link": "https://stackoverflow.com/users/6409919/andras-palfi"}, "edited": false, "score": 0, "creation_date": 1484072622, "post_id": 41575411, "comment_id": 70356195, "body": "Ahh realized my mistake. Earlier this script was expecting a JSOn input of id:&#39;MISC&#39;. But now the JSON is simply containing the id. Pretty easy fix, since I have no use for the map anymore and simply pass each id from my id_array into my main code."}], "tags": [], "owner": {"reputation": 19192, "user_id": 257635, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/El2tc.jpg?s=128&g=1", "display_name": "Chankey Pathak", "link": "https://stackoverflow.com/users/257635/chankey-pathak"}, "is_accepted": true, "score": 2, "last_activity_date": 1484071375, "creation_date": 1484071375, "answer_id": 41575411, "question_id": 41575326, "link": "https://stackoverflow.com/questions/41575326/cant-use-string-as-a-hash-ref-while-strict-refs-in-use/41575411#41575411", "title": "Can&#39;t use string as a HASH ref while &quot;strict refs&quot; in use", "body": "<p>I don't understand what you're trying to do but below is the reason of the error.</p>\n\n<pre><code>map { $_-&gt;{MISC} } @{$id_array}\n</code></pre>\n\n<p>means take each element from given dereferenced arrayref and access the <code>MISC</code> key of that element (it is expecting the element to be a hashref). In your case the element is literal string (3233 for example). So it kinda looks like this:</p>\n\n<pre><code>3233-&gt;{MISC}\n</code></pre>\n\n<p>Therefore you get below error:</p>\n\n<blockquote>\n  <p>\"Can't use string (\"3233\") as a HASH ref while \"strict refs\" in use</p>\n</blockquote>\n"}], "owner": {"reputation": 174, "user_id": 6409919, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/10208881690855599/picture?type=large", "display_name": "Andras Palfi", "link": "https://stackoverflow.com/users/6409919/andras-palfi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3580, "favorite_count": 0, "accepted_answer_id": 41575411, "answer_count": 1, "score": 1, "last_activity_date": 1484113312, "creation_date": 1484071068, "last_edit_date": 1484113312, "question_id": 41575326, "link": "https://stackoverflow.com/questions/41575326/cant-use-string-as-a-hash-ref-while-strict-refs-in-use", "title": "Can&#39;t use string as a HASH ref while &quot;strict refs&quot; in use", "body": "<p>First off, I know this is a fairly common issue but I have looked around and can't quite seem to pinpoint why its happening to me!</p>\n\n<p>I have some data I am reading from a <code>JSON</code> file, basically all it is are a set of string that represent IDs. </p>\n\n<p>I import it like so:</p>\n\n<pre><code> my $idFile='IDS.json';\n my $idJSON;\n\n\n\n {\n         local $/;\n         open my $fh, '&lt;', $idFile or die $!;\n         $idJSON = &lt;$fh&gt;;\n         close $fh;\n }\n\n my $id_array = decode_json $idJSON;\n</code></pre>\n\n<p>This is what <code>$id_array</code> looks like now:</p>\n\n<pre><code>$VAR1 = [\n          '3233',\n          '2758',\n          '2797'\n        ];\n</code></pre>\n\n<p>I then save them with a <code>MISC</code> tag in the form of a hash map, but this is where my <code>\"Can't use string (\"3233\") as a HASH ref while \"strict refs\" in use \"</code> error is being thrown:</p>\n\n<p><code>my @decodedIDS = map { $_ -&gt;{MISC}} @{$id_array};</code></p>\n\n<p>Anyone have suggestions as to what is causing this error? Any help is greatly appreciated, as always.</p>\n"}, {"tags": ["perl", "shell"], "comments": [{"owner": {"reputation": 7, "user_id": 6644545, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/f9fb36c436ec487ea7f8481b523a3d00?s=128&d=identicon&r=PG&f=1", "display_name": "Su_scriptingbee", "link": "https://stackoverflow.com/users/6644545/su-scriptingbee"}, "reply_to_user": {"reputation": 45481, "user_id": 197758, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/628da6ba2a6c70e35c009b7e3c3a430a?s=128&d=identicon&r=PG", "display_name": "toolic", "link": "https://stackoverflow.com/users/197758/toolic"}, "edited": false, "score": 0, "creation_date": 1484061375, "post_id": 41571951, "comment_id": 70348858, "body": "Hey @toolic I already tried like that and it works. But, i want to put it in one script itself. Can this be achieved?"}], "answers": [{"comments": [{"owner": {"reputation": 7, "user_id": 6644545, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/f9fb36c436ec487ea7f8481b523a3d00?s=128&d=identicon&r=PG&f=1", "display_name": "Su_scriptingbee", "link": "https://stackoverflow.com/users/6644545/su-scriptingbee"}, "edited": false, "score": 0, "creation_date": 1484064436, "post_id": 41572117, "comment_id": 70350985, "body": "am getting error while trying in the last way.                                                                 syntax error at line 10 : `&lt;&lt;&#39; unmatched"}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "reply_to_user": {"reputation": 7, "user_id": 6644545, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/f9fb36c436ec487ea7f8481b523a3d00?s=128&d=identicon&r=PG&f=1", "display_name": "Su_scriptingbee", "link": "https://stackoverflow.com/users/6644545/su-scriptingbee"}, "edited": false, "score": 0, "creation_date": 1484065005, "post_id": 41572117, "comment_id": 70351383, "body": "@Su_scriptingbee: Are you sure the closing <code>EOF</code> is alone on the line, i.e. no whitespace around it?"}, {"owner": {"reputation": 7, "user_id": 6644545, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/f9fb36c436ec487ea7f8481b523a3d00?s=128&d=identicon&r=PG&f=1", "display_name": "Su_scriptingbee", "link": "https://stackoverflow.com/users/6644545/su-scriptingbee"}, "edited": false, "score": 0, "creation_date": 1484065364, "post_id": 41572117, "comment_id": 70351658, "body": "There was a space between EOF and closing brace. I corrected it now and it works fine :) Thanks a lot"}], "tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": false, "score": 3, "last_activity_date": 1484061863, "last_edit_date": 1484061863, "creation_date": 1484061306, "answer_id": 41572117, "question_id": 41571951, "link": "https://stackoverflow.com/questions/41571951/syntax-error-unexpected-in-shell-script/41572117#41572117", "title": "syntax error: `(&#39; unexpected in shell script", "body": "<p>You can't switch from ksh to Perl that easily. Either, quote the script and pass it as a parameter to perl's <code>-e</code>:</p>\n\n<pre><code>perl -MIO::Socket -MIO::Socket::INET -we 'my ($host, $port) = qw( host.name 9443 ); ...'\n</code></pre>\n\n<p>or, store the perl script in a file of its own, and run it:</p>\n\n<pre><code>perl /path/to/the/script.pl\n</code></pre>\n\n<p>or, send the script to the stdin of <code>perl</code> - only works if you don't need to read input from within the script.</p>\n\n<pre><code>cat &lt;&lt;'EOF' | perl\nuse IO::Socket;\nuse IO::Socket::INET;\n...\nEOF\n</code></pre>\n"}], "owner": {"reputation": 7, "user_id": 6644545, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/f9fb36c436ec487ea7f8481b523a3d00?s=128&d=identicon&r=PG&f=1", "display_name": "Su_scriptingbee", "link": "https://stackoverflow.com/users/6644545/su-scriptingbee"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 536, "favorite_count": 0, "closed_date": 1484063724, "answer_count": 1, "score": -3, "last_activity_date": 1484061863, "creation_date": 1484060792, "question_id": 41571951, "link": "https://stackoverflow.com/questions/41571951/syntax-error-unexpected-in-shell-script", "closed_reason": "Duplicate", "title": "syntax error: `(&#39; unexpected in shell script", "body": "<p>I have a shell script which contains some functions in it. One of those functions has to be executed through perl. The perl functions checks whether port is opened on a remote server or not.</p>\n\n<pre><code>#!/usr/bin/ksh\n\nfunction1\nfunction2\ntelnet_check()\n{\n\n#!/usr/bin/perl -w\n\nuse IO::Socket;\nuse IO::Socket::INET;\n\nmy ($host,$port);\n$host=Ip address ;\n$port=9443;\nmy $sock=IO::Socket::INET-&gt;new(\"Ip address:$port\") or die \"\" ;\n\n}\n\nsome shell commands\n</code></pre>\n\n<p>while executing the above script, am getting the error </p>\n\n<pre><code> syntax error at line: `(' unexpected [which falls in the line my ($host,$port); under the Perl function]\n</code></pre>\n\n<p>Could any one help what can be done to fix the above error.</p>\n\n<p>Cheers in Advance :)</p>\n"}, {"tags": ["mysql", "perl", "utf-8", "utf8mb4"], "comments": [{"owner": {"reputation": 105046, "user_id": 1766831, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ee974306d2def46eb69534fbcf95cc5?s=128&d=identicon&r=PG", "display_name": "Rick James", "link": "https://stackoverflow.com/users/1766831/rick-james"}, "edited": false, "score": 0, "creation_date": 1484100127, "post_id": 41569860, "comment_id": 70367814, "body": "I hear what you are asking, but why not convert the column to <code>CHARACTER SET utf8mb4</code>?"}], "answers": [{"comments": [{"owner": {"reputation": 2895, "user_id": 1150325, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/lA9r5.jpg?s=128&g=1", "display_name": "Matthias Munz", "link": "https://stackoverflow.com/users/1150325/matthias-munz"}, "edited": false, "score": 0, "creation_date": 1484066253, "post_id": 41572539, "comment_id": 70352236, "body": "If I understand right, I have to convert the utf8 characters (e.g. the 4 byte char &quot;\ud835\udf00&quot;)  into BMP before applying your regex. Is there a function to do this?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 2895, "user_id": 1150325, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/lA9r5.jpg?s=128&g=1", "display_name": "Matthias Munz", "link": "https://stackoverflow.com/users/1150325/matthias-munz"}, "edited": false, "score": 1, "creation_date": 1484066823, "post_id": 41572539, "comment_id": 70352647, "body": "I don&#39;t know what you mean by converting &quot;\ud835\udf00&quot; into BMP. The BMP is a set of characters that doesn&#39;t include &quot;\ud835\udf00&quot;. You could create a mapping of characters outside of the BMP to characters inside of the BMP. I&#39;ve just added a demonstration of this to my answer."}, {"owner": {"reputation": 2895, "user_id": 1150325, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/lA9r5.jpg?s=128&g=1", "display_name": "Matthias Munz", "link": "https://stackoverflow.com/users/1150325/matthias-munz"}, "edited": false, "score": 0, "creation_date": 1484067188, "post_id": 41572539, "comment_id": 70352905, "body": "thanks for your comment, but I meant something else: I would like to remove the 4 byte utf8 chars by using your regex s/[^\\N{U+0000}-\\N{U+FFFF}]//g; However when I apply it to my file (which contains a &quot;\ud835\udf00&quot; instead of its BMP representation) the 4 byte chars are not filtered out."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 2895, "user_id": 1150325, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/lA9r5.jpg?s=128&g=1", "display_name": "Matthias Munz", "link": "https://stackoverflow.com/users/1150325/matthias-munz"}, "edited": false, "score": 0, "creation_date": 1484067291, "post_id": 41572539, "comment_id": 70352973, "body": "Are you sure you have decoded text (as opposed to UTF-8)?"}, {"owner": {"reputation": 2895, "user_id": 1150325, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/lA9r5.jpg?s=128&g=1", "display_name": "Matthias Munz", "link": "https://stackoverflow.com/users/1150325/matthias-munz"}, "edited": false, "score": 0, "creation_date": 1484067353, "post_id": 41572539, "comment_id": 70353015, "body": "No, I think it&#39;s not decoded. How can I do this? For example my file contains this phrase &quot;\ud835\udf00C = -2.4\u2030 &#177; 0.3\u2030; \ud835\udf00H = -57\u2030&quot;"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 2895, "user_id": 1150325, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/lA9r5.jpg?s=128&g=1", "display_name": "Matthias Munz", "link": "https://stackoverflow.com/users/1150325/matthias-munz"}, "edited": false, "score": 0, "creation_date": 1484067415, "post_id": 41572539, "comment_id": 70353058, "body": "For that to be possible, your source file would have to be encoded using UTF-8 and contain <code>use utf8;</code>. Is that the case?"}, {"owner": {"reputation": 2895, "user_id": 1150325, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/lA9r5.jpg?s=128&g=1", "display_name": "Matthias Munz", "link": "https://stackoverflow.com/users/1150325/matthias-munz"}, "edited": false, "score": 0, "creation_date": 1484067606, "post_id": 41572539, "comment_id": 70353193, "body": "I am little confused right now. Maybe you can give a explanation what I have to do with the file, after reading the text in to the memory?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 2895, "user_id": 1150325, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/lA9r5.jpg?s=128&g=1", "display_name": "Matthias Munz", "link": "https://stackoverflow.com/users/1150325/matthias-munz"}, "edited": false, "score": 0, "creation_date": 1484067774, "post_id": 41572539, "comment_id": 70353312, "body": "You said you had <code>&quot;\ud835\udf00C = -2.4\u2030 &#177; 0.3\u2030; \ud835\udf00H = -57\u2030&quot;</code>. Now you say you are reading it from a file. You&#39;ll need to decode the file. You can specify an <code>:encoding</code> layer when you open the file, or you could use the <code>open</code> pragma as I did in the example I&#39;ve added to my answer."}, {"owner": {"reputation": 2895, "user_id": 1150325, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/lA9r5.jpg?s=128&g=1", "display_name": "Matthias Munz", "link": "https://stackoverflow.com/users/1150325/matthias-munz"}, "edited": false, "score": 0, "creation_date": 1484069159, "post_id": 41572539, "comment_id": 70354228, "body": "Now got it, with replacement is even better. Perfect. Thanks a lot!"}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 9, "last_activity_date": 1501013106, "last_edit_date": 1501013106, "creation_date": 1484062585, "answer_id": 41572539, "question_id": 41569860, "link": "https://stackoverflow.com/questions/41569860/how-can-i-remove-characters-that-are-not-supported-by-mysqls-utf8-character-set/41572539#41572539", "title": "How can I remove characters that are not supported by MySQL&#39;s utf8 character set?", "body": "<p>MySQL's <code>utf8mb4</code> encoding is what the world calls <code>UTF-8</code>.</p>\n\n<p>MySQL's <code>utf8</code> encoding is a subset of <code>UTF-8</code> that only supports characters in the <a href=\"https://en.wikipedia.org/wiki/Plane_(Unicode)#Basic_Multilingual_Plane\" rel=\"nofollow noreferrer\">BMP</a> (meaning characters U+0000 to U+FFFF inclusive).</p>\n\n<p><a href=\"https://dev.mysql.com/doc/refman/5.5/en/charset-unicode-utf8mb4.html\" rel=\"nofollow noreferrer\">Reference</a></p>\n\n<p>So, the following will match the unsupported characters in question:</p>\n\n<pre><code>/[^\\N{U+0000}-\\N{U+FFFF}]/\n</code></pre>\n\n<p>Here are three different techniques you can use clean your input:</p>\n\n<p>1: Remove unsupported characters:</p>\n\n<pre><code>s/[^\\N{U+0000}-\\N{U+FFFF}]//g;\n</code></pre>\n\n<p>2: Replace unsupported characters with U+FFFD:</p>\n\n<pre><code>s/[^\\N{U+0000}-\\N{U+FFFF}]/\\N{REPLACEMENT CHARACTER}/g;\n</code></pre>\n\n<p>3: Replace unsupported characters using a translation map:</p>\n\n<pre><code>my %translations = (\n    \"\\N{MATHEMATICAL ITALIC SMALL EPSILON}\" =&gt; \"\\N{GREEK SMALL LETTER EPSILON}\",\n    # ...\n);\n\ns{([^\\N{U+0000}-\\N{U+FFFF}])}{ $translations{$1} // \"\\N{REPLACEMENT CHARACTER}\" }eg;\n</code></pre>\n\n<hr>\n\n<p>For example,</p>\n\n<pre><code>use utf8;                              # Source code is encoded using UTF-8\nuse open ':std', ':encoding(UTF-8)';   # Terminal and files use UTF-8.\n\nuse strict;\nuse warnings;\nuse 5.010;               # say, //\nuse charnames ':full';   # Not needed in 5.16+\n\nmy %translations = (\n   \"\\N{MATHEMATICAL ITALIC SMALL EPSILON}\" =&gt; \"\\N{GREEK SMALL LETTER EPSILON}\",\n   # ...\n);\n\n$_ = \"\ud835\udf00C = -2.4\u2030 \u00b1 0.3\u2030; \ud835\udf00H = -57\u2030\";\nsay;\n\ns{([^\\N{U+0000}-\\N{U+FFFF}])}{ $translations{$1} // \"\\N{REPLACEMENT CHARACTER}\" }eg;\nsay;\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>\ud835\udf00C = -2.4\u2030 \u00b1 0.3\u2030; \ud835\udf00H = -57\u2030\n\u03b5C = -2.4\u2030 \u00b1 0.3\u2030; \u03b5H = -57\u2030\n</code></pre>\n"}], "owner": {"reputation": 2895, "user_id": 1150325, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/lA9r5.jpg?s=128&g=1", "display_name": "Matthias Munz", "link": "https://stackoverflow.com/users/1150325/matthias-munz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1367, "favorite_count": 1, "accepted_answer_id": 41572539, "answer_count": 1, "score": 6, "last_activity_date": 1501013106, "creation_date": 1484054478, "last_edit_date": 1484063246, "question_id": 41569860, "link": "https://stackoverflow.com/questions/41569860/how-can-i-remove-characters-that-are-not-supported-by-mysqls-utf8-character-set", "title": "How can I remove characters that are not supported by MySQL&#39;s utf8 character set?", "body": "<p>How can I remove characters from a string that are not supported by MySQL's <a href=\"https://dev.mysql.com/doc/refman/5.5/en/charset-unicode-utf8.html\" rel=\"nofollow noreferrer\">utf8 character set</a>? In other words, characters with four bytes, such as \"\ud835\udf00\", that are only supported by MySQL's <a href=\"https://dev.mysql.com/doc/refman/5.5/en/charset-unicode-utf8mb4.html\" rel=\"nofollow noreferrer\">utf8mb4 character set</a>.</p>\n\n<p>For example,</p>\n\n<pre><code>\ud835\udf00C = -2.4\u2030 \u00b1 0.3\u2030; \ud835\udf00H = -57\u2030\n</code></pre>\n\n<p>should become</p>\n\n<pre><code>C = -2.4\u2030 \u00b1 0.3\u2030; H = -57\u2030\n</code></pre>\n\n<p>I want to load a data file into a MySQL table that has <code>CHARSET=utf8</code>.</p>\n"}, {"tags": ["bash", "perl"], "comments": [{"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1484064882, "post_id": 41567945, "comment_id": 70351296, "body": "Post your bashrc."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1484064913, "post_id": 41567945, "comment_id": 70351316, "body": "What&#39;s the actual error message?"}], "answers": [{"tags": [], "owner": {"reputation": 403, "user_id": 7349485, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lzfEj.jpg?s=128&g=1", "display_name": "carlosn", "link": "https://stackoverflow.com/users/7349485/carlosn"}, "is_accepted": false, "score": 0, "last_activity_date": 1484064726, "last_edit_date": 1484064726, "creation_date": 1484049992, "answer_id": 41568485, "question_id": 41567945, "link": "https://stackoverflow.com/questions/41567945/using-bash-insteal-of-perl-bashrc/41568485#41568485", "title": "Using Bash insteal of Perl? (bashrc)", "body": "<p>Make sure that you got everything to download the perlbrew, like curl or wget, it is simple to check, try one of theses:</p>\n\n<blockquote>\n  <p>which curl</p>\n  \n  <p>which wget</p>\n</blockquote>\n\n<p>If you have one of them you are able to download, otherwise you will need to install either curl or wget.</p>\n\n<p>The latest realease of perlbrew is 0.78.</p>\n\n<p>After theses first steps try to download it again as you did.</p>\n\n<p>There is a mini tutorial which you can use as a guide:</p>\n\n<p><a href=\"https://perlbrew.pl/\" rel=\"nofollow noreferrer\">https://perlbrew.pl/</a></p>\n\n<p>Also I am not sure if you have it installed so you could use:</p>\n\n<blockquote>\n  <p>which perlbrew</p>\n</blockquote>\n\n<p>To find out if you have it or not. Maybe you forgot the step as describe in the perlbrew site:</p>\n\n<blockquote>\n  <p>sudo cpan App::perlbrew</p>\n  \n  <p>perlbrew init</p>\n</blockquote>\n\n<p>Because it seems like your environment was not set yet.</p>\n"}], "owner": {"reputation": 307, "user_id": 7399100, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/0271320aef843165127b056df7c3fffa?s=128&d=identicon&r=PG&f=1", "display_name": "Rei", "link": "https://stackoverflow.com/users/7399100/rei"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 118, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1484064726, "creation_date": 1484048380, "question_id": 41567945, "link": "https://stackoverflow.com/questions/41567945/using-bash-insteal-of-perl-bashrc", "title": "Using Bash insteal of Perl? (bashrc)", "body": "<p>I was using a bash script in my bashrc and until now everything worked.</p>\n\n<p>Today, i decided to install Perl on my computer (since I'm looking to learn the language) using the method on the website learn.pearl</p>\n\n<pre><code>curl -L xrl.us/installperlnix | bash \n</code></pre>\n\n<p>(urls are not accepted )</p>\n\n<p>The problem is that now, my script doesn't work anymore, I'm having the error:\n\"no such file\nexport PERLBREW_BASHRC_VERSION=0.78\"</p>\n\n<p>I tried to use the command \"perlbrew switch-off\" but it seems that I don't have the program perlbrew installed, and my bashrc is starting with #!/bin/bash so I'm completely lost on you to fix the problem.</p>\n\n<p>I would appreciate some help.</p>\n\n<p>Thanks !</p>\n"}, {"tags": ["perl", "offset"], "comments": [{"owner": {"reputation": 17, "user_id": 7387690, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/367429523635561/picture?type=large", "display_name": "Narimen Dal", "link": "https://stackoverflow.com/users/7387690/narimen-dal"}, "edited": false, "score": 0, "creation_date": 1484052972, "post_id": 41559173, "comment_id": 70342759, "body": "i put a complete example of searched terms"}], "answers": [{"comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1484020683, "post_id": 41559441, "comment_id": 70326511, "body": "I think that it&#39;d be good to explain this, ie. what <code>@-</code> and <code>@+</code> are"}, {"owner": {"reputation": 17, "user_id": 7387690, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/367429523635561/picture?type=large", "display_name": "Narimen Dal", "link": "https://stackoverflow.com/users/7387690/narimen-dal"}, "edited": false, "score": 0, "creation_date": 1484052766, "post_id": 41559441, "comment_id": 70342601, "body": "I think you didn&#39;t change anything you replaced the if by while, and with my file i have these results ` 138 - 154 Fermionic fields 399 - 414 nuclear physics`, maybe the operation of opening the file can change the final results"}, {"owner": {"reputation": 17, "user_id": 7387690, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/367429523635561/picture?type=large", "display_name": "Narimen Dal", "link": "https://stackoverflow.com/users/7387690/narimen-dal"}, "edited": false, "score": 0, "creation_date": 1484054728, "post_id": 41559441, "comment_id": 70344064, "body": "i executed you same code and i have a different result! &gt;2 - 20 fluctuating vacuum 138 - 154 Fermionic fields 399 - 414 nuclear physics 1000 - 1015 nuclear physics 1080 - 1097 bag-model nucleon"}], "tags": [], "owner": {"reputation": 5701, "user_id": 35812, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e663162cefd6ac833e0555933b8583f?s=128&d=identicon&r=PG", "display_name": "Chris Charley", "link": "https://stackoverflow.com/users/35812/chris-charley"}, "is_accepted": false, "score": 0, "last_activity_date": 1484024209, "last_edit_date": 1484024209, "creation_date": 1484009042, "answer_id": 41559441, "question_id": 41559173, "link": "https://stackoverflow.com/questions/41559173/error-when-extracting-words-offset-in-perl/41559441#41559441", "title": "Error when extracting words offset in perl", "body": "<p>I'm not clear on your code, but when I run your provided data with my code, I get these results.</p>\n\n<p>The 2 variables <code>@-</code> and <code>@+</code>, (<code>$-[0]</code> and <code>$+[0]</code>) are described in the <a href=\"http://perldoc.perl.org/perlvar.html#Variables-related-to-regular-expressions\" rel=\"nofollow noreferrer\">Variables-related-to-regular-expressions</a>. (LAST_MATCH_START &amp; LAST_MATCH_END)</p>\n\n<p>My code:</p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\n\nmy $s = 'A fluctuating vacuum is a general feature ... (rest of line)';\n\nmy @terms = split /;/, 'fluctuating vacuum;Fermionic fields;nuclear physics;bag-model nucleon';\n\nfor my $term (@terms) {\n    while ($s =~ /$term/g) {\n        print \"$-[0] - $+[0] $term\\n\";\n    }   \n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>2 - 20 fluctuating vacuum\n135 - 151 Fermionic fields\n396 - 411 nuclear physics\n983 - 998 nuclear physics\n1063 - 1080 bag-model nucleon\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 230, "user_id": 7322508, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1aDE1.jpg?s=128&g=1", "display_name": "Duncan Carr", "link": "https://stackoverflow.com/users/7322508/duncan-carr"}, "is_accepted": false, "score": 0, "last_activity_date": 1484043760, "creation_date": 1484043760, "answer_id": 41566500, "question_id": 41559173, "link": "https://stackoverflow.com/questions/41559173/error-when-extracting-words-offset-in-perl/41566500#41566500", "title": "Error when extracting words offset in perl", "body": "<pre><code>#!/usr/bin/perl\n\n$string = \"A fluctuating vacuum is a general feature of quantum fields, of which the free Maxwell field considered in  [1\u201312] is but one example. Fermionic fields such as that describing the electron, also undergo vacuum fluctuations, consequently one expects to find Casimir effects associated with such fields whenever they are confined in some way. Such effects were first investigated in the context of nuclear physics, within the so-called \u201cMIT bag model\u201d of the nucleon  [13]. In the bag-model one envisages the nucleon as a collection of fermionic fields describing confined quarks. These quarks are subject to a boundary condition at the surface of the \u2018bag\u2019 that represents the nucleon\u2019s surface. Just as in the electromagnetic case, the bag boundary condition modifies the vacuum fluctuations of the field, which results in the appearance of a Casimir force  [14\u201318]. This force, although very weak at a macroscopic scale, can be significant on the small length scales encountered in nuclear physics. It therefore has important consequences for the physics of the bag-model nucleon  [19].\";\n\n@extracted_terms = ( \"fluctuating vacuum\", \"Fermionic fields\", \"nuclear physics\", \"bag-model nucleon\" );\n\nfor my $term ( @extracted_terms )\n{\n    $position = index $string, $term;\n\n    printf ( \"%s, %s\\n\", $position, $position + length($term) );\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 17, "user_id": 7387690, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/367429523635561/picture?type=large", "display_name": "Narimen Dal", "link": "https://stackoverflow.com/users/7387690/narimen-dal"}, "edited": false, "score": 0, "creation_date": 1484057115, "post_id": 41570138, "comment_id": 70345772, "body": "that works but, there is caracter not in utf8 that are lost"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 17, "user_id": 7387690, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/367429523635561/picture?type=large", "display_name": "Narimen Dal", "link": "https://stackoverflow.com/users/7387690/narimen-dal"}, "edited": false, "score": 0, "creation_date": 1484147761, "post_id": 41570138, "comment_id": 70391786, "body": "@NarimenDal: What characters do you think are &quot;not in utf8&quot;?"}, {"owner": {"reputation": 17, "user_id": 7387690, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/367429523635561/picture?type=large", "display_name": "Narimen Dal", "link": "https://stackoverflow.com/users/7387690/narimen-dal"}, "edited": false, "score": 0, "creation_date": 1484324183, "post_id": 41570138, "comment_id": 70477526, "body": "sorry for the late reply , if i turn the file to ANSI i have <b>dynamics&#194;</b> but in utf8 <b>dynamics</b> to there is some corrpted caracters :  cell&#226;\u20ac\u2122s,  [4&#226;\u20ac\u201c12]."}], "tags": [], "owner": {"reputation": 175, "user_id": 5186623, "user_type": "registered", "accept_rate": 33, "profile_image": "https://graph.facebook.com/10206691161224996/picture?type=large", "display_name": "Chedi Bechikh", "link": "https://stackoverflow.com/users/5186623/chedi-bechikh"}, "is_accepted": true, "score": 0, "last_activity_date": 1484055217, "creation_date": 1484055217, "answer_id": 41570138, "question_id": 41559173, "link": "https://stackoverflow.com/questions/41559173/error-when-extracting-words-offset-in-perl/41570138#41570138", "title": "Error when extracting words offset in perl", "body": "<p>You must open your filesin UTF8</p>\n\n<p>reaplce</p>\n\n<pre><code>open FIC, \"$f\" or warn \"$f E/S: $!\\n\";\n</code></pre>\n\n<p>by</p>\n\n<p><code>open FIC, \"&lt;:encoding(UTF-8)\", \"$f\" or warn \"$f E/S: $!\\n\";</code></p>\n"}], "owner": {"reputation": 17, "user_id": 7387690, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/367429523635561/picture?type=large", "display_name": "Narimen Dal", "link": "https://stackoverflow.com/users/7387690/narimen-dal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 86, "favorite_count": 1, "accepted_answer_id": 41570138, "answer_count": 3, "score": 0, "last_activity_date": 1484055217, "creation_date": 1484007192, "last_edit_date": 1484054163, "question_id": 41559173, "link": "https://stackoverflow.com/questions/41559173/error-when-extracting-words-offset-in-perl", "title": "Error when extracting words offset in perl", "body": "<p>I have a program that read tow files, the first file contain terms (one, or multiterms) seprated by  semicolon (; ), the second file contain text, the goal is to determine the offset of the terms in the first file!</p>\n\n<p>My program begin well fluctuating vacuum (correct offsset extracted 2 20, also 45 59 for quantum fields)    , but when extracting the offset for example for terms  <strong>nuclear physics</strong> (correct ofsset 396 411) my code generate 399 414!   or Fermionic fields (my code generate  138 154) but the correct is 135 151 </p>\n\n<p>The code used is:</p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;use warnings;\n\nmy @a = ();\nmy @b = ();\nmy @aa = ();\nmy $l=0;\nmy $v=1;\nmy $g=0;\nmy $kh;\nmy $ligne2;\nmy $texte;\n\nopen(FICC, $ARGV[0]);\n\nprint \"choose the name of the file\\n\";\nmy $fic = &lt;STDIN&gt;;\n\nopen(FIC1, \"&gt;$fic\");\n\nwhile (&lt;FICC&gt;) {\n    my $ligne2=$_;\n    $a[$l]=$ligne2;\n    $l++;\n}\n\nmy $aa;\nmy $ligne;\nmy $rep = \"C:\\\\scienceie2017_train\\\\train2\";\nopendir(REP,$rep) or die \"E/S : $!\\n\";\n\nforeach my $kh (@a) {\n    chomp($kh);\n\n    if ($kh=~/.*\\.txt/) {\n        $texte=$kh;\n        #print \"$kh\";\n        print FIC1 \"$texte\";\n    }\n\n    @aa=split(/;/,$kh);\n    #$u++;\n    while(defined(my $fic=readdir REP)){\n        my $f=\"${rep}\\\\$texte\";\n        open FIC, \"$f\" or warn \"$f E/S: $!\\n\";\n        while(&lt;FIC&gt;){\n            $ligne = $_;\n            chomp($ligne);\n            #print FIC1 \"@aa\";\n\n            foreach my $che (@aa) {\n                $che =~ s/^\\s+//; \n                $che =~ s/\\s+$//;\n                if ($ligne =~/\\Q$che\\E/) {\n                    print FIC1 \"T$v\\tTask $-[0] $+[0]\\t$che\\n\";\n                    $v++;\n                }\n            }\n            $v = 1; \n        }\n        print FIC1 \"\\n\";\n        close FIC;\n        goto che\n    }\nche:\n}\n</code></pre>\n\n<p>The text is:</p>\n\n<blockquote>\n  <p>A fluctuating vacuum is a general feature of quantum fields, of which the free Maxwell field considered in\u00a0 [1\u201312] is but one example. Fermionic fields such as that describing the electron, also undergo vacuum fluctuations, consequently one expects to find Casimir effects associated with such fields whenever they are confined in some way. Such effects were first investigated in the context of nuclear physics, within the so-called \u201cMIT bag model\u201d of the nucleon\u00a0 [13]. In the bag-model one envisages the nucleon as a collection of fermionic fields describing confined quarks. These quarks are subject to a boundary condition at the surface of the \u2018bag\u2019 that represents the nucleon\u2019s surface. Just as in the electromagnetic case, the bag boundary condition modifies the vacuum fluctuations of the field, which results in the appearance of a Casimir force\u00a0 [14\u201318]. This force, although very weak at a macroscopic scale, can be significant on the small length scales encountered in nuclear physics. It therefore has important consequences for the physics of the bag-model nucleon\u00a0 [19].</p>\n</blockquote>\n\n<p>The extracted terms are:</p>\n\n<blockquote>\n  <p>fluctuating vacuum;general feature;quantum fields;free Maxwell;free Maxwell field;Maxwell;Maxwell field;Maxwell field;Maxwell field;field considered in\u00a0;considered in\u00a0;1\u201312;Fermionic fields;vacuum fluctuations;Casimir;Casimir effects;Casimir effects;Casimir effects;such fields;Such effects;nuclear physics;so-called \u201cMIT;so-called \u201cMIT bag;\u201cMIT bag;\u201cMIT bag model\u201d;bag model\u201d;fermionic fields;fermionic fields describing;boundary condition;nucleon\u2019s surface;electromagnetic case;bag boundary;bag boundary condition;boundary condition;vacuum fluctuations;Casimir;Casimir force\u00a0;force\u00a0;14\u201318;macroscopic scale;small length;small length scales;length scales;nuclear physics;important consequences;bag-model nucleon\u00a0;</p>\n</blockquote>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 83048, "user_id": 2255089, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZNAsT.jpg?s=128&g=1", "display_name": "Casimir et Hippolyte", "link": "https://stackoverflow.com/users/2255089/casimir-et-hippolyte"}, "edited": false, "score": 1, "creation_date": 1483999303, "post_id": 41557647, "comment_id": 70320809, "body": "build a hash with unquoted strings as keys and sort the keys. You can also trim each value in the comparison."}, {"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 0, "creation_date": 1484000135, "post_id": 41557647, "comment_id": 70321146, "body": "If the keys are numeric, you probably want to use <code>&lt;=&gt;</code> rather than <code>cmp</code> for the second-level sort."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1484000881, "post_id": 41557647, "comment_id": 70321422, "body": "Your data set is wrong. You need to remove the quotes before they get anywhere near your hash. Are you dealing with CSV data perhaps?"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1484000951, "post_id": 41557647, "comment_id": 70321455, "body": "Please clarify: is every alternate line in your data really blank?"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1484001853, "post_id": 41557647, "comment_id": 70321758, "body": "What is the source of the data that has built your hash <code>%hash</code> (and <i>please</i> don&#39;t call things <code>@array</code> or <code>%hash</code> or <code>$scalar</code>). It should be rewritten."}, {"owner": {"reputation": 95, "user_id": 7236738, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/d661f20e95b55e15a2c6037654636265?s=128&d=identicon&r=PG&f=1", "display_name": "Xavia", "link": "https://stackoverflow.com/users/7236738/xavia"}, "edited": false, "score": 0, "creation_date": 1484057279, "post_id": 41557647, "comment_id": 70345904, "body": "this is just a sample data, the end result doesn&#39;t necessary has to have spaces in between, i just showed it like that to make it more clear to see"}], "answers": [{"comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1484002929, "post_id": 41557795, "comment_id": 70322122, "body": "You could include a Schwartzian transform to make it faster. Stripping out stuff all the time is expensive."}, {"owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1484003386, "post_id": 41557795, "comment_id": 70322282, "body": "Yes, a Schwartzian transform is worthwhile when the input is large and the transformations to the input before comparing are expensive."}], "tags": [], "owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "is_accepted": false, "score": 2, "last_activity_date": 1483999668, "creation_date": 1483999668, "answer_id": 41557795, "question_id": 41557647, "link": "https://stackoverflow.com/questions/41557647/alphabetical-order-with-special-characters-perl/41557795#41557795", "title": "Alphabetical order with special characters perl", "body": "<p>Use a custom sort function that strips out the characters you want to ignore.</p>\n\n<pre><code>foreach (sort {\n            my ($aa,$bb) = ($hash{$a},$hash{$b});\n            s/[\"]//g for $aa,$bb; # ignore \" char. Add whatever else you want\n            $aa cmp $bb           # or lc($aa) cmp lc($bb) case-insensitive search\n                || $a cmp $b\n       } keys %hash) { ... }\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 4, "creation_date": 1484000212, "post_id": 41557827, "comment_id": 70321169, "body": "You might want to mention that you need Perl &gt;= 5.14 to use <code>&#47;r</code>."}], "tags": [], "owner": {"reputation": 83048, "user_id": 2255089, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZNAsT.jpg?s=128&g=1", "display_name": "Casimir et Hippolyte", "link": "https://stackoverflow.com/users/2255089/casimir-et-hippolyte"}, "is_accepted": true, "score": 7, "last_activity_date": 1484047165, "last_edit_date": 1484047165, "creation_date": 1483999842, "answer_id": 41557827, "question_id": 41557647, "link": "https://stackoverflow.com/questions/41557647/alphabetical-order-with-special-characters-perl/41557827#41557827", "title": "Alphabetical order with special characters perl", "body": "<p>You can simply do that <em>(note that I changed the second <code>cmp</code> to the shuttle operator <code>&lt;=&gt;</code> for numeric values)</em>:</p>\n\n<pre><code>foreach (sort { ($hash{$a}=~s/^\\W+//r cmp $hash{$b}=~s/^\\W+//r) || ($a &lt;=&gt; $b) } keys %hash) {\n    print \"$hash{$_}\\n\";\n}\n</code></pre>\n\n<p>But if you have a lot of data, it's better to transform your data <em>(once and for all)</em>:\nFor example using a schwartzian transform:</p>\n\n<pre><code>my @result = map { $_-&gt;[2] }\n             sort { ($a-&gt;[0] cmp $b-&gt;[0]) || ($a-&gt;[1] &lt;=&gt; $b-&gt;[1]) }\n             map { [ $hash{$_}=~s/^\"|\"$//gr, $_, $hash{$_}] } keys %hash; \n\nprint join \"\\n\", @result;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 5455, "user_id": 3961170, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/PtFol.jpg?s=128&g=1", "display_name": "mkHun", "link": "https://stackoverflow.com/users/3961170/mkhun"}, "is_accepted": false, "score": 2, "last_activity_date": 1484028756, "last_edit_date": 1495540817, "creation_date": 1484028446, "answer_id": 41562167, "question_id": 41557647, "link": "https://stackoverflow.com/questions/41557647/alphabetical-order-with-special-characters-perl/41562167#41562167", "title": "Alphabetical order with special characters perl", "body": "<p>Try as follows</p>\n\n<pre><code>use strict; \nuse warnings; \nmy %hash = ( 5328 =&gt; 'Adorable', \n      26191 =&gt; '\"Giraffe\"', \n      57491 =&gt; 'Is Very', \n       4915 =&gt; 'Cute',);\n\nforeach (sort{my ($one)=$hash{$a}=~m/([\\w\\s]+)/; my ($two)=$hash{$b}=~m/([\\w\\s]+)/; $one cmp $two} keys %hash) \n{ \n    print \"$hash{$_}\\n\"; \n}\n</code></pre>\n\n<p>Group the elements and store into <code>$one</code> and <code>$two</code> then compare it. </p>\n\n<p>But it is very easy with <a href=\"https://stackoverflow.com/questions/41557647/alphabetical-order-with-special-characters-perl/41562167#41557827\">@Casimir et Hippolyte</a> answer. He used <a href=\"http://perldoc.perl.org/perlre.html#Modifiers\" rel=\"nofollow noreferrer\">non-destructive modifier(r).</a> but it will support above the 5.14 version</p>\n"}, {"comments": [{"owner": {"reputation": 82895, "user_id": 372239, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/2twLb.jpg?s=128&g=1", "display_name": "Toto", "link": "https://stackoverflow.com/users/372239/toto"}, "edited": false, "score": 0, "creation_date": 1484043055, "post_id": 41563608, "comment_id": 70336477, "body": "You missed the case where <code>$hash{$a} == $hash{$b}</code>, it must be ordered by key."}, {"owner": {"reputation": 3327, "user_id": 1604311, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/0frKT.jpg?s=128&g=1", "display_name": "Arunesh Singh", "link": "https://stackoverflow.com/users/1604311/arunesh-singh"}, "reply_to_user": {"reputation": 82895, "user_id": 372239, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/2twLb.jpg?s=128&g=1", "display_name": "Toto", "link": "https://stackoverflow.com/users/372239/toto"}, "edited": false, "score": 0, "creation_date": 1484045351, "post_id": 41563608, "comment_id": 70338050, "body": "@Toto Edited. I guess, it would be trivial, If I carry key instead of value :)."}, {"owner": {"reputation": 1073, "user_id": 1039320, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/28ba137ea03056ffb3a2e6db49ac29cd?s=128&d=identicon&r=PG", "display_name": "jreisinger", "link": "https://stackoverflow.com/users/1039320/jreisinger"}, "edited": false, "score": 0, "creation_date": 1484047928, "post_id": 41563608, "comment_id": 70339591, "body": "I think you should do numeric comparison for the hash keys: <code>sort { $a -&gt; [1] cmp $b -&gt; [1] || $a -&gt; [0] &lt;=&gt; $b -&gt; [0] }</code>."}, {"owner": {"reputation": 3327, "user_id": 1604311, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/0frKT.jpg?s=128&g=1", "display_name": "Arunesh Singh", "link": "https://stackoverflow.com/users/1604311/arunesh-singh"}, "reply_to_user": {"reputation": 1073, "user_id": 1039320, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/28ba137ea03056ffb3a2e6db49ac29cd?s=128&d=identicon&r=PG", "display_name": "jreisinger", "link": "https://stackoverflow.com/users/1039320/jreisinger"}, "edited": false, "score": 0, "creation_date": 1484048044, "post_id": 41563608, "comment_id": 70339660, "body": "@jreisinger Done."}], "tags": [], "owner": {"reputation": 3327, "user_id": 1604311, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/0frKT.jpg?s=128&g=1", "display_name": "Arunesh Singh", "link": "https://stackoverflow.com/users/1604311/arunesh-singh"}, "is_accepted": false, "score": 5, "last_activity_date": 1484047989, "last_edit_date": 1484047989, "creation_date": 1484034184, "answer_id": 41563608, "question_id": 41557647, "link": "https://stackoverflow.com/questions/41557647/alphabetical-order-with-special-characters-perl/41563608#41563608", "title": "Alphabetical order with special characters perl", "body": "<p>Create a function which truncates special characters (<code>truncate_special_chars</code> in my case). Then, use it under your <code>sort</code> routine.</p>\n\n<pre><code>use strict;\nuse warnings;\n\nmy %hash = (\n    5328 =&gt; 'Adorable',\n    26191 =&gt; '\"Giraffe\"',\n    57491 =&gt; 'Is Very',\n    4915 =&gt; 'Cute',\n    );\n\n\nprint join \"\\n\", \n    map { $hash{$_ -&gt; [0]} }\n    sort { $a -&gt; [1] cmp $b -&gt; [1] || $a -&gt; [0] &lt;=&gt; $b -&gt; [0] }\n    map { [ $_, truncate_special_chars($hash{$_}) ] }\n    keys %hash;\n\nsub truncate_special_chars {\n    my $str = shift;\n    $str =~ s/^\\W//;\n    # may be use lc if you want case insensitive sort\n    return $str;\n}\n</code></pre>\n\n<p>Otherwise you can use <code>/r</code> if you are using <code>Perl &gt;= 5.14</code>.</p>\n"}], "owner": {"reputation": 95, "user_id": 7236738, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/d661f20e95b55e15a2c6037654636265?s=128&d=identicon&r=PG&f=1", "display_name": "Xavia", "link": "https://stackoverflow.com/users/7236738/xavia"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 623, "favorite_count": 1, "accepted_answer_id": 41557827, "answer_count": 4, "score": 3, "last_activity_date": 1484047989, "creation_date": 1483998987, "question_id": 41557647, "link": "https://stackoverflow.com/questions/41557647/alphabetical-order-with-special-characters-perl", "title": "Alphabetical order with special characters perl", "body": "<p>I have this set of code:</p>\n\n<pre><code> use strict; \n use warnings; \n my %hash = ( 5328 =&gt; 'Adorable', \n              26191 =&gt; '\"Giraffe\"', \n              57491 =&gt; 'Is Very', \n               4915 =&gt; 'Cute',);\n foreach (sort { ($hash{$a} cmp $hash{$b}) || ($a cmp $b) } keys %hash) \n { print \"$hash{$_}\\n\"; }\n</code></pre>\n\n<p>this will result as:</p>\n\n<pre><code>\"Giraffe\"\n\nAdorable\n\nCute\n\nIs Very\n</code></pre>\n\n<p>I need it to be ordered alphabetically, and disregard the special character before the AlphaNumeric character like in this sample:</p>\n\n<pre><code>Adorable\n\nCute\n\n\"Giraffe\"\n\nIs Very\n</code></pre>\n\n<p>Any suggestions?</p>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1483994848, "post_id": 41556340, "comment_id": 70318589, "body": "You will get much better replies if you appear to have tried to write something yourself. You shouldn&#39;t be asking for your work to be done for free."}, {"owner": {"reputation": 1, "user_id": 5459651, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/j0spX.png?s=128&g=1", "display_name": "Sleepy", "link": "https://stackoverflow.com/users/5459651/sleepy"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1484000828, "post_id": 41556340, "comment_id": 70321407, "body": "Sorry I did some reserch but as I&#39;m quite new to any coding or scripting and I&#39;m not a native speaker I was happy with my question as it was. Thank you for improving the grammar, you deleted the right keyword though."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1484001386, "post_id": 41556340, "comment_id": 70321608, "body": "I imagine that you are learning, and most of us will understand you if you do your best with English. But you should read about Perl for a few days and try something that you think might work. It would be easy for you to write something that said you wanted to learn, but you ask only for a solution."}, {"owner": {"reputation": 1, "user_id": 5459651, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/j0spX.png?s=128&g=1", "display_name": "Sleepy", "link": "https://stackoverflow.com/users/5459651/sleepy"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1484002006, "post_id": 41556340, "comment_id": 70321820, "body": "I like to see solutions to problems that way I can learn better, I bet there are a lot of helpful guys here who don&#39;t mind to show how to do it."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1484002777, "post_id": 41556340, "comment_id": 70322069, "body": "If that is what you like then that is what will become your habit. If you are someone who likes to fill out puzzle books from the answers in the back then you will never master the problems. Perl is very well documented, and you should have a <code>perldoc</code> command with your installation. Please take a few weeks to read what you already have, which includes multiple examples, and then come back here to advise as well as hoping for help."}, {"owner": {"reputation": 1, "user_id": 5459651, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/j0spX.png?s=128&g=1", "display_name": "Sleepy", "link": "https://stackoverflow.com/users/5459651/sleepy"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1484003948, "post_id": 41556340, "comment_id": 70322471, "body": "I didn&#39;t specifically  want an answer involving perl, you deleted the powershell and pcregrep tag. I already have my own solution, by reading documentation."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1484006006, "post_id": 41556340, "comment_id": 70323084, "body": "I have tried to help you. <code>pcgrep</code> and <code>powershell</code> are poor solutions to your problem. Are you working on Windows? Which version? Have you tried anything at all? Why are you so angry when we ask what you have done for yourself?"}, {"owner": {"reputation": 1, "user_id": 5459651, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/j0spX.png?s=128&g=1", "display_name": "Sleepy", "link": "https://stackoverflow.com/users/5459651/sleepy"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1484042435, "post_id": 41556340, "comment_id": 70336041, "body": "It is on windows, but since the subsystem for linux is also available, I can also use the tools provided by ubuntu."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 5459651, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/j0spX.png?s=128&g=1", "display_name": "Sleepy", "link": "https://stackoverflow.com/users/5459651/sleepy"}, "edited": false, "score": 0, "creation_date": 1484001217, "post_id": 41556522, "comment_id": 70321551, "body": "Thanks for the help choroba, At the end I find a simpler solution. I tried to use pcregrep from bash at first with similar aproach as the solution that I came up with, but i couldn&#39;t replace the matching string with the multiple capturing groups."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1484006251, "post_id": 41556522, "comment_id": 70323148, "body": "I downvoted this because there is clearly a versioning system, and the real requirement is to update everything to the latest version. So there may be a <code>file(4)</code> and a <code>file(6)</code> whose fate no one has prescribed. I don&#39;t believe we should take questions as job specifications, either on principal or as hints to what is required."}, {"owner": {"reputation": 1, "user_id": 5459651, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/j0spX.png?s=128&g=1", "display_name": "Sleepy", "link": "https://stackoverflow.com/users/5459651/sleepy"}, "edited": false, "score": 0, "creation_date": 1484042197, "post_id": 41556522, "comment_id": 70335853, "body": "There is no file with greater then (2) in the name, and there won&#39;t be anymore files in this case. The original files are corrupted, and the ones with the suffix are the correct ones."}], "tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": false, "score": 3, "last_activity_date": 1483994252, "creation_date": 1483994252, "answer_id": 41556522, "question_id": 41556340, "link": "https://stackoverflow.com/questions/41556340/find-files-with-later-versions/41556522#41556522", "title": "Find files with later versions", "body": "<p>Perl script:</p>\n\n<pre><code>#!/usr/bin/perl\nuse warnings;\nuse strict;\n\nmy $dir = shift;\n\nfor my $file (glob \"$dir/*(2)\") {\n    my $original = substr $file, 0, -3;\n    unlink $original if -f $original;\n}\n</code></pre>\n\n<p>Specify the directory name as the argument. For explanation, see</p>\n\n<ul>\n<li><a href=\"http://p3rl.org/shift\" rel=\"nofollow noreferrer\">shift</a></li>\n<li><a href=\"http://p3rl.org/glob\" rel=\"nofollow noreferrer\">glob</a></li>\n<li><a href=\"http://p3rl.org/substr\" rel=\"nofollow noreferrer\">substr</a></li>\n<li><a href=\"http://p3rl.org/-x\" rel=\"nofollow noreferrer\">-f</a></li>\n</ul>\n"}, {"comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1484002874, "post_id": 41557948, "comment_id": 70322105, "body": "This is not a solution to your problem. It uses neither Perl nor regular expressions"}, {"owner": {"reputation": 1, "user_id": 5459651, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/j0spX.png?s=128&g=1", "display_name": "Sleepy", "link": "https://stackoverflow.com/users/5459651/sleepy"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1484003945, "post_id": 41557948, "comment_id": 70322469, "body": "You are a bit strange, it was you, who deleted the powershell and pcregrep tag from my question smarty."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1484004845, "post_id": 41557948, "comment_id": 70322743, "body": "<i>&quot;I have found the solution, after a bit of reading technet&quot;</i> That reading should have preceded your shout to the world to fix your problem. Stack Overflow is a resort where people who know what they are doing can ask their peers for help. It isn&#39;t for <i>&quot;I want to print 1 to 10. How to do it?&quot;</i>. You have a dreadful solution. Stop, and do some more reading."}, {"owner": {"reputation": 1, "user_id": 5459651, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/j0spX.png?s=128&g=1", "display_name": "Sleepy", "link": "https://stackoverflow.com/users/5459651/sleepy"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1484005195, "post_id": 41557948, "comment_id": 70322867, "body": "I am reading continuosly, then I had this very bad idea to ask a question here. As I see this is not the place to ask for help. This is the place where someone edit your question then try to make you look bad, insted of helping."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1484005504, "post_id": 41557948, "comment_id": 70322955, "body": "So you know that most questions provide a lot of explanation, and show what has been written. I think you don&#39;t know what tools you have. Your question has three down votes, and none of them are mine. I am trying to help, and you shouldn&#39;t be angry."}], "tags": [], "owner": {"reputation": 1, "user_id": 5459651, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/j0spX.png?s=128&g=1", "display_name": "Sleepy", "link": "https://stackoverflow.com/users/5459651/sleepy"}, "is_accepted": true, "score": -1, "last_activity_date": 1484069873, "last_edit_date": 1484069873, "creation_date": 1484000496, "answer_id": 41557948, "question_id": 41556340, "link": "https://stackoverflow.com/questions/41556340/find-files-with-later-versions/41557948#41557948", "title": "Find files with later versions", "body": "<p>I have found the solution, after a bit of reading technet. I used powershell at the end to delete the files without the sufix and keep the newer ones. I like oneliners so i came up with this:</p>\n\n<pre><code>Remove-Item ((Get-ChildItem).FullName -match \".+\\(2\\).+\" -replace \"(.+)\\s\\(2\\)(.+)\",'$1$2')\n</code></pre>\n\n<p>I'm sure it's not the best solution but it worked.</p>\n"}], "owner": {"reputation": 1, "user_id": 5459651, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/j0spX.png?s=128&g=1", "display_name": "Sleepy", "link": "https://stackoverflow.com/users/5459651/sleepy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 80, "favorite_count": 0, "closed_date": 1484033276, "accepted_answer_id": 41557948, "answer_count": 2, "score": -3, "last_activity_date": 1484069873, "creation_date": 1483993583, "last_edit_date": 1483994698, "question_id": 41556340, "link": "https://stackoverflow.com/questions/41556340/find-files-with-later-versions", "closed_reason": "Needs more focus", "title": "Find files with later versions", "body": "<p>I have a folder with about a thousand files in it.</p>\n\n<p>There are a few hundred files with duplicates with the string <code>(2)</code> at the end of the file name.</p>\n\n<p>What would be the easiest way to find the filenames with that suffix and delete the original files which don't have the <code>(2)</code> in the name?</p>\n"}, {"tags": ["perl", "lookahead", "lookbehind"], "comments": [{"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1483991377, "post_id": 41555633, "comment_id": 70316775, "body": "You could try use a substitution: <code>s&#47;^(create tablespace) (tablespace-name) (data.dbf)&#47;$1 $2 $2.dbf&#47;</code>"}, {"owner": {"reputation": 27, "user_id": 285490, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7d959c83f513d550faaf75e7bdadc705?s=128&d=identicon&r=PG", "display_name": "Peter", "link": "https://stackoverflow.com/users/285490/peter"}, "reply_to_user": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1483991610, "post_id": 41555633, "comment_id": 70316912, "body": "<i>tablespace-name</i> is different in each file and I have no previous knowledge of what that would be. That is why I thought it would be best to use the lookahead or lookbehind to get the word before &quot;data.dbf&quot; or word after &quot;tablespace&quot;."}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1483991855, "post_id": 41555633, "comment_id": 70317041, "body": "Ok, I see:) Then you could also try: <code>s&#47;^(create tablespace) (\\S+) (data.dbf)&#47;$1 $2 $2.dbf&#47;</code>"}, {"owner": {"reputation": 917, "user_id": 3014263, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rFh51.jpg?s=128&g=1", "display_name": "AbhiNickz", "link": "https://stackoverflow.com/users/3014263/abhinickz"}, "edited": false, "score": 1, "creation_date": 1483992251, "post_id": 41555633, "comment_id": 70317220, "body": "Why not just replace this? ` data` like <code>s&#47; data&#47;&#47;</code>"}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "reply_to_user": {"reputation": 917, "user_id": 3014263, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rFh51.jpg?s=128&g=1", "display_name": "AbhiNickz", "link": "https://stackoverflow.com/users/3014263/abhinickz"}, "edited": false, "score": 0, "creation_date": 1483992369, "post_id": 41555633, "comment_id": 70317265, "body": "@AbhiNickz <code>tablespace-name</code> could also contain literal <code>data</code>"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 917, "user_id": 3014263, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rFh51.jpg?s=128&g=1", "display_name": "AbhiNickz", "link": "https://stackoverflow.com/users/3014263/abhinickz"}, "edited": false, "score": 0, "creation_date": 1483992630, "post_id": 41555633, "comment_id": 70317394, "body": "@AbhiNickz, At best, that will give <code>create tablespace tablespace-name.dbf</code> instead of <code>create tablespace tablespace-name tablespace-name.dbf</code>"}, {"owner": {"reputation": 27, "user_id": 285490, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7d959c83f513d550faaf75e7bdadc705?s=128&d=identicon&r=PG", "display_name": "Peter", "link": "https://stackoverflow.com/users/285490/peter"}, "reply_to_user": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1483992735, "post_id": 41555633, "comment_id": 70317459, "body": "@H&#229;konH&#230;gland: Thanks, your solution works mostly. It fails only in cases where there is an extra space between TABLESPACE and <i>tablespace-name</i> and also when there is space between &quot;CREATE&quot; and &quot;TABLESPACE&quot;. Is there a way to handle these outliers?"}, {"owner": {"reputation": 917, "user_id": 3014263, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rFh51.jpg?s=128&g=1", "display_name": "AbhiNickz", "link": "https://stackoverflow.com/users/3014263/abhinickz"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1483992868, "post_id": 41555633, "comment_id": 70317537, "body": "@ikegami Yeah, didn&#39;t read the whole wanted output."}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1483992915, "post_id": 41555633, "comment_id": 70317555, "body": "@Peter Try this: <code>s&#47;^(create\\s+tablespace\\s+)(\\S+)(\\s+)data\\.dbf&#47;$1$2$3$2.dbf&#47;</code>"}, {"owner": {"reputation": 27, "user_id": 285490, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7d959c83f513d550faaf75e7bdadc705?s=128&d=identicon&r=PG", "display_name": "Peter", "link": "https://stackoverflow.com/users/285490/peter"}, "reply_to_user": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1483993567, "post_id": 41555633, "comment_id": 70317928, "body": "@H&#229;konH&#230;gland: Thank you, that works!"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1483993674, "post_id": 41555633, "comment_id": 70317979, "body": "@H&#229;konH&#230;gland: Please supply that as an <i>answer</i> that others can contribute to."}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1483994821, "post_id": 41555633, "comment_id": 70318574, "body": "@Borodin I think it is almost identical to what is included in <code>ikegami</code>&#39;s answer."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1483995196, "post_id": 41555633, "comment_id": 70318773, "body": "@H&#229;konH&#230;gland: The differences were enough to upset <code>AbhiNickz</code>, and in this case I think we have another drive-by question from someone who has never accepted an answer to any of their five questions."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 2, "creation_date": 1483995486, "post_id": 41555633, "comment_id": 70318962, "body": "@Peter: It is looking like you don&#39;t understand the philosophy of <i>Stack Overflow</i>. You have asked five questions now, all of them poorly-rated, and have never accepted a single answer. Please take the <a href=\"http://stackexchange.com/tour\"><b><i>Tour</i></b></a> and read <a href=\"http://stackoverflow.com/help/how-to-ask\"><b><i>How do I ask a good question?</i></b></a>. Then you should read <a href=\"http://stackoverflow.com/help/someone-answers\"><i>What should I do when someone answers my question?</i></a> and apply it to all of the answers you have received. You have engaged a host of computer professionals without any proper response."}, {"owner": {"reputation": 27, "user_id": 285490, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7d959c83f513d550faaf75e7bdadc705?s=128&d=identicon&r=PG", "display_name": "Peter", "link": "https://stackoverflow.com/users/285490/peter"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1484001322, "post_id": 41555633, "comment_id": 70321586, "body": "@Borodin: Thanks for your comment. However, if you look and understand the questions I have asked previously, though there were responses, they did not solve my issues. I have previously added the comment on what worked for this question."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1484001672, "post_id": 41555633, "comment_id": 70321699, "body": "Why do you keep asking if the whole world cannot help you? Please work hard to understand what we are doing here. You are cruel to say &quot;that works!&quot; and run away. Very many people have tried to help you and you say nothing."}, {"owner": {"reputation": 27, "user_id": 285490, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7d959c83f513d550faaf75e7bdadc705?s=128&d=identicon&r=PG", "display_name": "Peter", "link": "https://stackoverflow.com/users/285490/peter"}, "edited": false, "score": 0, "creation_date": 1484003032, "post_id": 41555633, "comment_id": 70322160, "body": "For this question, I did get the answer I was looking for and I indicated that with a comment. If you go back and look at my previous questions, I have commented on what worked or if it didn&#39;t work.  Now regarding why I keep asking: Firstly, that is none of your business. Secondly, that is what this site is about. Asking questions and getting answers. Maybe you should take the Tour yourself to figure this out. I&#39;m thankful to people who have answered me before, but, it does not mean I&#39;ll accept that as an answer if it did not work for me."}], "answers": [{"comments": [{"owner": {"reputation": 917, "user_id": 3014263, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rFh51.jpg?s=128&g=1", "display_name": "AbhiNickz", "link": "https://stackoverflow.com/users/3014263/abhinickz"}, "edited": false, "score": 0, "creation_date": 1483992666, "post_id": 41556033, "comment_id": 70317414, "body": "I think your edit contains unnecessary spaces, Don&#39;t you mean <code>^create\\s+tablespace\\s+(\\S+)\\s+\\Kdata(?=\\.dbf\\s*\\z)</code>"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 917, "user_id": 3014263, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rFh51.jpg?s=128&g=1", "display_name": "AbhiNickz", "link": "https://stackoverflow.com/users/3014263/abhinickz"}, "edited": false, "score": 2, "creation_date": 1483992905, "post_id": 41556033, "comment_id": 70317550, "body": "@AbhiNickz, That would be equivalent, but less readable. Note the use of <code>&#47;x</code>. It makes whitespace non-significant, allowing to one to add spaces for readability just like in regular Perl code."}, {"owner": {"reputation": 917, "user_id": 3014263, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rFh51.jpg?s=128&g=1", "display_name": "AbhiNickz", "link": "https://stackoverflow.com/users/3014263/abhinickz"}, "edited": false, "score": 0, "creation_date": 1483992979, "post_id": 41556033, "comment_id": 70317593, "body": "See this link: your regex is not working <a href=\"https://regex101.com/r/rlVC2J/1\" rel=\"nofollow noreferrer\">regex</a>"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 917, "user_id": 3014263, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rFh51.jpg?s=128&g=1", "display_name": "AbhiNickz", "link": "https://stackoverflow.com/users/3014263/abhinickz"}, "edited": false, "score": 2, "creation_date": 1483993020, "post_id": 41556033, "comment_id": 70317624, "body": "@AbhiNickz, Your test failed because you changed /x to /g."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 917, "user_id": 3014263, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rFh51.jpg?s=128&g=1", "display_name": "AbhiNickz", "link": "https://stackoverflow.com/users/3014263/abhinickz"}, "edited": false, "score": 0, "creation_date": 1483993279, "post_id": 41556033, "comment_id": 70317758, "body": "@AbhiNickz, <a href=\"https://regex101.com/r/rlVC2J/2\" rel=\"nofollow noreferrer\">Fixed test</a> using what I actually posted."}, {"owner": {"reputation": 6928, "user_id": 1015385, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8fc84a03227c566697c4a16b2e9f8782?s=128&d=identicon&r=PG", "display_name": "JRFerguson", "link": "https://stackoverflow.com/users/1015385/jrferguson"}, "reply_to_user": {"reputation": 917, "user_id": 3014263, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rFh51.jpg?s=128&g=1", "display_name": "AbhiNickz", "link": "https://stackoverflow.com/users/3014263/abhinickz"}, "edited": false, "score": 1, "creation_date": 1483993649, "post_id": 41556033, "comment_id": 70317971, "body": "@AbhiNickz - @ikegami used the <code>&#47;x</code> modifier to allow arbitrary whitespace to be added for readability."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 0, "last_activity_date": 1483992718, "last_edit_date": 1483992718, "creation_date": 1483992399, "answer_id": 41556033, "question_id": 41555633, "link": "https://stackoverflow.com/questions/41555633/using-perl-lookbehindor-lookahead-to-capture-word/41556033#41556033", "title": "Using perl lookbehind(or lookahead) to capture word", "body": "<pre><code>if (defined( $_ = &lt;&gt; )) {\n   s/^create \\s+ tablespace \\s+ (\\S+) \\s+ \\K data (?= \\.dbf \\b )/$1/x;\n   print;\n\n   print while &lt;&gt;;\n}\n</code></pre>\n\n<hr>\n\n<p>Technically, look-arounds and <code>\\K</code> aren't needed here.</p>\n\n<pre><code>s/^ ( create \\s+ tablespace \\s+ ) (\\S+) (\\s+) data ( \\.dbf \\b )/$1$2$3$2$4/x\n</code></pre>\n\n<p>They just make things less noisy.</p>\n"}], "owner": {"reputation": 27, "user_id": 285490, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7d959c83f513d550faaf75e7bdadc705?s=128&d=identicon&r=PG", "display_name": "Peter", "link": "https://stackoverflow.com/users/285490/peter"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 71, "favorite_count": 2, "answer_count": 1, "score": -3, "last_activity_date": 1483992718, "creation_date": 1483990787, "last_edit_date": 1483991154, "question_id": 41555633, "link": "https://stackoverflow.com/questions/41555633/using-perl-lookbehindor-lookahead-to-capture-word", "title": "Using perl lookbehind(or lookahead) to capture word", "body": "<p>I have a series of files each of which starts with the sentence </p>\n\n<blockquote>\n  <p>create tablespace <em>tablespace-name</em> data.dbf</p>\n</blockquote>\n\n<p>I need to extract the <em>tablespace-name</em> and substitute data.dbf to be <em>tablespace-name</em>.dbf.</p>\n\n<p>I'm new to perl, but looks like what I need is look behind (or look ahead) regex within perl.</p>\n\n<p>How can this be accomplished?</p>\n"}, {"tags": ["perl", "error-handling", "die"], "answers": [{"comments": [{"owner": {"reputation": 612, "user_id": 1117929, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Jq37H.png?s=128&g=1", "display_name": "Jonathan Cross", "link": "https://stackoverflow.com/users/1117929/jonathan-cross"}, "edited": false, "score": 0, "creation_date": 1483982687, "post_id": 41553460, "comment_id": 70312144, "body": "This almost works, but gives me a strange error: <code>Choose a timezone from https:&#47;&#47;en.wikipedia.org&#47;wiki&#47;List_of_tz_database_time_zones&zwnj;&#8203;#List at .&#47;test-die.pl line 6, &lt;DATA&gt; line 1.</code>"}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 2, "creation_date": 1483982792, "post_id": 41553460, "comment_id": 70312209, "body": "<code>my $tz; eval { $tz = .... ; 1 } or do { if ($@ =~</code> is safer. <code>$@</code> might be clobbered in some Perl versions. See <a href=\"http://p3rl.org/Try::Tiny\" rel=\"nofollow noreferrer\">Try::Tiny</a> and <a href=\"http://www.perlmonks.org/?node_id=1153468\" rel=\"nofollow noreferrer\">Bug in eval in pre-5.14</a>."}, {"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "reply_to_user": {"reputation": 612, "user_id": 1117929, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Jq37H.png?s=128&g=1", "display_name": "Jonathan Cross", "link": "https://stackoverflow.com/users/1117929/jonathan-cross"}, "edited": false, "score": 1, "creation_date": 1483983219, "post_id": 41553460, "comment_id": 70312433, "body": "@JonathanCross Add a <code>\\n</code> to the end of the string to prevent the location from being included."}, {"owner": {"reputation": 4191, "user_id": 1466640, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c0630f2d5ac5fb844675c58d3d2dfa57?s=128&d=identicon&r=PG&f=1", "display_name": "AKHolland", "link": "https://stackoverflow.com/users/1466640/akholland"}, "edited": false, "score": 3, "creation_date": 1483984773, "post_id": 41553460, "comment_id": 70313315, "body": "Try::Tiny is safer than evals."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 3, "creation_date": 1483987028, "post_id": 41553460, "comment_id": 70314516, "body": "@choroba, <code>my $tz = eval { ... } or do { ... };</code> would suffice since <code>DateTime::TimeZone-&gt;new</code> always returns a true value."}], "tags": [], "owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "is_accepted": true, "score": 5, "last_activity_date": 1484034220, "last_edit_date": 1484034220, "creation_date": 1483982487, "answer_id": 41553460, "question_id": 41553388, "link": "https://stackoverflow.com/questions/41553388/how-can-i-handle-a-perl-constructor-that-dies/41553460#41553460", "title": "How can I handle a perl constructor that dies?", "body": "<p>Use <code>eval { ... }</code> and <code>$@</code> to trap and manage fatal errors.</p>\n\n<pre><code>my $tz = eval { DateTime::TimeZone-&gt;new(name =&gt; 'America/San_Francisco') };\nif (!$tz) {\n    if ($@ =~ /The timezone .* could not be loaded/) {\n        warn \"Choose a timezone from \", \n            \"https://en.wikipedia.org/wiki/List_of_tz_database_time_zones#List\";\n    } else {\n        warn \"Error in DateTime::TimeZone constructor: $@\";\n    }\n    exit 1;\n}\n</code></pre>\n"}], "owner": {"reputation": 612, "user_id": 1117929, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Jq37H.png?s=128&g=1", "display_name": "Jonathan Cross", "link": "https://stackoverflow.com/users/1117929/jonathan-cross"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 184, "favorite_count": 0, "accepted_answer_id": 41553460, "answer_count": 1, "score": 2, "last_activity_date": 1484034220, "creation_date": 1483982226, "question_id": 41553388, "link": "https://stackoverflow.com/questions/41553388/how-can-i-handle-a-perl-constructor-that-dies", "title": "How can I handle a perl constructor that dies?", "body": "<p>Code snippet:</p>\n\n<pre><code>my $tz = DateTime::TimeZone-&gt;new(name =&gt; 'America/San_Francisco');\n</code></pre>\n\n<p>This immediately dies because <code>America/San_Francisco</code> is not a <a href=\"https://en.wikipedia.org/wiki/List_of_tz_database_time_zones#List\" rel=\"nofollow noreferrer\">recognized timezone</a>.</p>\n\n<p>The following message is printed:</p>\n\n<p><em>The timezone 'America/San_Francisco' could not be loaded, or is an invalid name.</em></p>\n\n<p>I would like to handle this error and print additional info for the user before the script exits.  I tried using <code>unless</code>, but no luck catching the <code>die</code>.</p>\n\n<p>How can this be done?</p>\n"}, {"tags": ["perl", "file-upload", "cgi", "filehandle"], "comments": [{"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 1, "creation_date": 1483977697, "post_id": 41551905, "comment_id": 70309092, "body": "For one thing, you need to add <code>use strict;</code> and <code>use warnings &#39;all&#39;;</code> to the top of your script; there&#39;s no <code>null</code> in Perl, so <code>$article{upload_file_name} ne null</code> checks if the filename is equal to the literal text &quot;null&quot;."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1483977737, "post_id": 41551905, "comment_id": 70309115, "body": "Do you have a subroutine or constant with the name <code>null</code> defined somewhere? Your line <code>f($article{upload_file_name} ne &quot;&quot; or $article{upload_file_name} ne null)</code> should be a syntax error unless you don&#39;t <code>use strict</code>. There is no <code>null</code> in Perl. You want <code>undef</code>, but you cannot check with <code>ne</code> for <code>undef</code>. In fact, doing <code>if ($article{upload_file_name}) { ... }</code> is sufficient because as long as there is something that&#39;s not empty or <code>undef</code> the value will be true."}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1483977866, "post_id": 41551905, "comment_id": 70309197, "body": "see <a href=\"http://p3rl.org/undef\" rel=\"nofollow noreferrer\">undef</a> and <a href=\"http://p3rl.org/defined\" rel=\"nofollow noreferrer\">defined</a>."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1483977878, "post_id": 41551905, "comment_id": 70309208, "body": "See the second part of my comment. You just need to check if <code>$article{upload_file_name}</code> is a <i>truthy</i> value. <code>0</code>, <code>undef</code> and the empty string <code>&quot;&quot;</code> are false. Everything else is true in Perl."}, {"owner": {"reputation": 360, "user_id": 7374617, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/72a22b7b862547b5395402cb286f05a0?s=128&d=identicon&r=PG&f=1", "display_name": "gregnnylf94", "link": "https://stackoverflow.com/users/7374617/gregnnylf94"}, "edited": false, "score": 0, "creation_date": 1483978045, "post_id": 41551905, "comment_id": 70309313, "body": "Okay, thank you for the information about null I didn&#39;t realize it was not universal. However that is not the reason for the error, since I have a corrupted file it is clearly hitting my statement. I did make the change concerning null and will update my Q. Is there a difference between the cgi-&gt;upload and cgi-&gt;param?"}, {"owner": {"reputation": 360, "user_id": 7374617, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/72a22b7b862547b5395402cb286f05a0?s=128&d=identicon&r=PG&f=1", "display_name": "gregnnylf94", "link": "https://stackoverflow.com/users/7374617/gregnnylf94"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1483979827, "post_id": 41551905, "comment_id": 70310396, "body": "@simbabque I made this change to my code, I still get a corrupted file. I am more concerned with the upload portion than my if condition, without the if statement the outcome is the same."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1483988258, "post_id": 41551905, "comment_id": 70315146, "body": "@gflynn94: Please don&#39;t edit your question in a way that makes nonsense of the help you already have. If you have changed your code then you should ask a new question."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1483988372, "post_id": 41551905, "comment_id": 70315201, "body": "@gflynn94: <i>&quot;thank you for the information about null I didn&#39;t realize it was not universal&quot;</i> No, it is not even common. At present I can&#39;t think of a single language that uses <code>null</code>."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1483992759, "post_id": 41551905, "comment_id": 70317472, "body": "This problem is because the OP doesn&#39;t understand even the basics of Perl, and would prefer to enrol the rest of the world in fixing it for him instead of putting in some work. Stack Overflow isn&#39;t here to teach a language, and so it is <b><i>too broad</i></b>."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1483992828, "post_id": 41551905, "comment_id": 70317517, "body": "@gflynn94: For goodness sake, what do you imagine <code>print UPLOADS</code> does?"}, {"owner": {"reputation": 360, "user_id": 7374617, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/72a22b7b862547b5395402cb286f05a0?s=128&d=identicon&r=PG&f=1", "display_name": "gregnnylf94", "link": "https://stackoverflow.com/users/7374617/gregnnylf94"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1483993305, "post_id": 41551905, "comment_id": 70317768, "body": "@borodin I clearly upset SOMEBODY. null is a common term? It is in C#, Ruby, PHP, and JavaScript for a few examples. Print UPLOADS does exactly what I thought it did I just had the glob scenario going on that  I didn&#39;t know about. The question has been answered you can move on. Thank you."}, {"owner": {"reputation": 360, "user_id": 7374617, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/72a22b7b862547b5395402cb286f05a0?s=128&d=identicon&r=PG&f=1", "display_name": "gregnnylf94", "link": "https://stackoverflow.com/users/7374617/gregnnylf94"}, "edited": false, "score": 0, "creation_date": 1483993418, "post_id": 41551905, "comment_id": 70317837, "body": "And before you go on about how PHP uses  is_null() and  how Ruby use nil, I know the point is null is a common thing."}], "answers": [{"comments": [{"owner": {"reputation": 360, "user_id": 7374617, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/72a22b7b862547b5395402cb286f05a0?s=128&d=identicon&r=PG&f=1", "display_name": "gregnnylf94", "link": "https://stackoverflow.com/users/7374617/gregnnylf94"}, "edited": false, "score": 0, "creation_date": 1483985297, "post_id": 41553307, "comment_id": 70313588, "body": "Thank you, that&#39;s exactly what it was. I was starting to suspect something with the hash, as I ran in to a weird bug. <code>my %hash(action =&gt;$cgi-&gt;param(&#39;action&#39;));</code> was returning &quot;Action&quot; rather than &quot;&quot;. However when I set my hash like this... <code>my %hash; $hash{action} = $cgi-&gt;param(&#39;action&#39;);</code> I got my expected result. Just while we&#39;re on the topic is this related to the glob scenario you pointed out?"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 360, "user_id": 7374617, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/72a22b7b862547b5395402cb286f05a0?s=128&d=identicon&r=PG&f=1", "display_name": "gregnnylf94", "link": "https://stackoverflow.com/users/7374617/gregnnylf94"}, "edited": false, "score": 0, "creation_date": 1483988597, "post_id": 41553307, "comment_id": 70315313, "body": "@gflynn94: Please don&#39;t treat Stack Overflow as a forum. It is a compendium of questions and answers that is much more like <i>Wikipedia</i>. You should add words here only if you imagine that they may be useful to the rest of the world, and you should write your submissions as if they are permanent public documents."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1483988676, "post_id": 41553307, "comment_id": 70315350, "body": "@mob: I would go for <code>$article{upload_file}-&gt;readline</code>, since <code>IO::File</code> has been loaded on demand since Perl v5.14."}, {"owner": {"reputation": 360, "user_id": 7374617, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/72a22b7b862547b5395402cb286f05a0?s=128&d=identicon&r=PG&f=1", "display_name": "gregnnylf94", "link": "https://stackoverflow.com/users/7374617/gregnnylf94"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1483989155, "post_id": 41553307, "comment_id": 70315589, "body": "@Borodin I was asking a general question about the same topic. I think that this is acceptable since I did not know about the glob scenario. Secondly I don&#39;t think it&#39;s hurting anyone if no one answers the question. I marked the question as answered. Thank you all for the feed back."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 360, "user_id": 7374617, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/72a22b7b862547b5395402cb286f05a0?s=128&d=identicon&r=PG&f=1", "display_name": "gregnnylf94", "link": "https://stackoverflow.com/users/7374617/gregnnylf94"}, "edited": false, "score": 0, "creation_date": 1483989516, "post_id": 41553307, "comment_id": 70315781, "body": "@gflynn94: Your statement <code>my %hash(action =&gt;$cgi-&gt;param(&#39;action&#39;));</code> won&#39;t even compile. If you have another question then please post it as such."}], "tags": [], "owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "is_accepted": true, "score": 1, "last_activity_date": 1483981925, "creation_date": 1483981925, "answer_id": 41553307, "question_id": 41551905, "link": "https://stackoverflow.com/questions/41551905/web-page-file-upload-is-always-corrupted/41553307#41553307", "title": "Web page file upload is always corrupted", "body": "<pre><code>&lt;$article{upload_file}&gt;\n</code></pre>\n\n<p>is not doing what you think it is doing. The diamond operator (<code>&lt;&gt;</code>) is used to stand in for Perl's <a href=\"http://metacpan.org/pod/perlfunc#readline\" rel=\"nofollow noreferrer\"><code>readline</code></a> function, but it has a second meaning where it does the same thing as Perl's <a href=\"http://metacpan.org/pod/perlfunc#glob\" rel=\"nofollow noreferrer\"><code>glob</code></a> function. And in Perl's parsing rules, <code>&lt;$hash{key}&gt;</code> is always treated as <code>glob</code>.</p>\n\n<p><a href=\"https://metacpan.org/pod/perlop#I/O-Operators\" rel=\"nofollow noreferrer\"><code>perldoc -f perlop</code></a> explains:</p>\n\n<blockquote>\n  <p>If what's within the angle brackets is neither a filehandle nor a simple scalar variable containing a filehandle name, typeglob, or typeglob reference, it is interpreted as a filename pattern to be globbed, and either a list of filenames or the next filename in the list is returned, depending on context. This distinction is determined on syntactic grounds alone. That means &lt;$x&gt; is always a readline() from an indirect handle, but &lt;$hash{key}&gt; is always a glob(). That's because $x is a simple scalar variable, but $hash{key} is not--it's a hash element. Even &lt;$x &gt; (note the extra space) is treated as glob(\"$x \"), not readline($x).</p>\n</blockquote>\n\n<p>There are at least a couple of workarounds:</p>\n\n<ol>\n<li><p>Use explicit <code>readline</code> call:</p>\n\n<pre><code>while (readline($article{upload_file}))\n</code></pre></li>\n<li><p>Assign filehandle to a simple scalar</p>\n\n<pre><code>my $upload_fh = $article{upload_file};\n...\nwhile (&lt;$upload_fh&gt;)\n</code></pre></li>\n</ol>\n"}], "owner": {"reputation": 360, "user_id": 7374617, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/72a22b7b862547b5395402cb286f05a0?s=128&d=identicon&r=PG&f=1", "display_name": "gregnnylf94", "link": "https://stackoverflow.com/users/7374617/gregnnylf94"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 95, "favorite_count": 0, "accepted_answer_id": 41553307, "answer_count": 1, "score": 1, "last_activity_date": 1483992424, "creation_date": 1483977572, "last_edit_date": 1483992424, "question_id": 41551905, "link": "https://stackoverflow.com/questions/41551905/web-page-file-upload-is-always-corrupted", "title": "Web page file upload is always corrupted", "body": "<p>I am trying to add a file upload to an existing web page.</p>\n\n<p>Every time I upload I get a file that is corrupted.</p>\n\n<p>I made sure to set <code>binmode</code> on the file handle. I also have my input <em>enctype</em> set to <code>multipart/formdata</code> in my form.</p>\n\n<p>My code is as follows</p>\n\n<pre><code>$article{upload_file_name} = $cgi-&gt;param( 'upFile' );\n$article{upload_file}      = $cgi-&gt;upload( 'upFile' );\n\nif ( $article{upload_file_name} ne \"\" or $article{upload_file_name} ne null ) {\n\n    open( UPLOADS, \"&gt;$uploads_dir/$article{upload_file_name}\" )\n            or die \"Could not open $uploads_dir/$article{upload_file_name}\";\n\n    binmode UPLOADS;\n\n    while ( &lt;$article{upload_file}&gt; ) {\n        print UPLOADS;\n    }\n\n    close UPLOADS;\n}\n</code></pre>\n\n<p>I also tried this</p>\n\n<pre><code>$article{upload_file} = $cgi-&gt;param( 'upFile' );\n\nif ( $article{upload_file} ne \"\" or $article{upload_file} ne null ) {\n\n    open( UPLOADS, \"&gt;$uploads_dir/$article{upload_file}\" )\n            or die \"Could not open $uploads_dir/$article{upload_file}\";\n    binmode UPLOADS;\n\n    while ( &lt;$article{upload_file}&gt; ) {\n        print UPLOADS;\n    }\n\n    close UPLOADS;\n}\n</code></pre>\n"}, {"tags": ["perl", "types", "moose"], "answers": [{"comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1483976255, "post_id": 41551349, "comment_id": 70308037, "body": "@Borodin you accidentally deleted half my answer with your edit ;)"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1483976297, "post_id": 41551349, "comment_id": 70308072, "body": "Oops :( I&#39;ll leave it to you!"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1483976338, "post_id": 41551349, "comment_id": 70308099, "body": "@Borodin don&#39;t worry about it. Thanks for trying to help. :)"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1483989138, "post_id": 41551349, "comment_id": 70315584, "body": "So to be clear, you&#39;re saying that a constraint called <code>mySpecialType</code> is already hard-coded into <code>Moose</code>? That&#39;s horrible."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1483994082, "post_id": 41551349, "comment_id": 70318179, "body": "No @borodin. I&#39;m saying that when an attribute in a Moose based class has a an <code>isa</code> value that is not a type constraint Moohse Moose creates one with that name to do an <code>isa</code> check. The deparse in my debug output shows that. And when that happens before you install one yourself, you can&#39;t create it any more because you can&#39;t seem to overwrite them."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1483994427, "post_id": 41551349, "comment_id": 70318376, "body": "That sounds like it&#39;s hard-coded into <code>Moose</code>. How else does it choose <code>mySpecialType</code> as an identifier? Are we being confused by language differences? It should at least use an empty string while forbidding empty strings, or some similar device."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1483995385, "post_id": 41551349, "comment_id": 70318893, "body": "@borodin I don&#39;t know if we are. Reread the huge list. It explains the execution order of the code from question. There is an attribute <code>has foo =&gt; ( isa =&gt; &#39;mySpecialType&#39;)</code>in a class that gets loaded before the code in main.pl. Moose created a type constraint already, so it crashes."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1483996042, "post_id": 41551349, "comment_id": 70319245, "body": "Then I&#39;m not understanding <code>Moose</code> properly. What list are you referring to? That line of code looks exactly like what I meant -- a hard-coded value. Are you saying that doing it that way is fine because it will crash only in the case of a wrong loading order? Then that should be trapped and reported as such by the module. I would go for something like an empty string, as I said, or perhaps <code>\\undef</code>, which should (?) never be the same twice. Why do you think it&#39;s okay? Someone has accidentally encountered an internal value and the resulting error message doesn&#39;t relate to the problem."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1483996494, "post_id": 41551349, "comment_id": 70319461, "body": "I think we need a chat to clear this up @borodin. Maybe I don&#39;t understand you properly."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1483996812, "post_id": 41551349, "comment_id": 70319629, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/132735/discussion-between-borodin-and-simbabque\">continue this discussion in chat</a>."}, {"owner": {"reputation": 177, "user_id": 4970085, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b524a9bd8ccab933d9cb01ffcdb4e415?s=128&d=identicon&r=PG", "display_name": "BReddy", "link": "https://stackoverflow.com/users/4970085/breddy"}, "edited": false, "score": 0, "creation_date": 1591571589, "post_id": 41551349, "comment_id": 110099461, "body": "@simbabque Thank you for your explanation. It explains why this error happens and choroba&#39;s answer gives a solution. However, This is a bug in my opinion. If I happen to define a type constraint that perhaps matches someone else&#39;s type constraint name anywhere in all the packages I use, it will break my code (and it happens at run time), which leaves my code vulnerable. This is a bad situation to be in. I wish there is a better way of managing namespaces in Moose."}, {"owner": {"reputation": 1399, "user_id": 3857002, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d723ed492dde5408b8839a82ef472cc8?s=128&d=identicon&r=PG&f=1", "display_name": "Ed.", "link": "https://stackoverflow.com/users/3857002/ed"}, "reply_to_user": {"reputation": 177, "user_id": 4970085, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b524a9bd8ccab933d9cb01ffcdb4e415?s=128&d=identicon&r=PG", "display_name": "BReddy", "link": "https://stackoverflow.com/users/4970085/breddy"}, "edited": false, "score": 0, "creation_date": 1617384776, "post_id": 41551349, "comment_id": 118296673, "body": "@BReddy A non-global types solution for Moose (and Moo, etc) is to use Type::Tiny, which is excellent."}], "tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": false, "score": 3, "last_activity_date": 1484039633, "last_edit_date": 1495540829, "creation_date": 1483975753, "answer_id": 41551349, "question_id": 41550691, "link": "https://stackoverflow.com/questions/41550691/the-type-constraint-xyz-has-already-been-created/41551349#41551349", "title": "The type constraint &#39;XYZ&#39; has already been created", "body": "<h2>This answer investigates why the error happens</h2>\n\n<p>First of all, we need to remember that Moose's type constraints are global. Moose itself keeps track of them.</p>\n\n<p>It seems that Moose automatically makes Moose::Util::TypeConstraints from <code>isa =&gt; 'Foo'</code>.</p>\n\n<p>I changed your code in <em>main.pl</em> to the following, <a href=\"https://metacpan.org/pod/Moose::Util::TypeConstraints#find_type_constraint($type_name)\" rel=\"nofollow noreferrer\">to check if this constraint already exists</a>.</p>\n\n<pre><code>use noUse;\nuse Data::Printer { deparse =&gt; 1 };\nmy $type = Moose::Util::TypeConstraints::find_type_constraint('mySpecialType');\np $type;\n</code></pre>\n\n<p>Turns out it does.</p>\n\n<pre><code>Moose::Meta::TypeConstraint::Class  {\n    Parents       Moose::Meta::TypeConstraint\n    public methods (9) : class, create_child_type, equals, get_message, is_a_type_of, is_subtype_of, meta, new, parents\n    private methods (1) : _new\n    internals: {\n        class                      \"mySpecialType\",\n        compiled_type_constraint   sub {\n                package Eval::Closure::Sandbox_150;\n                use warnings;\n                use strict;\n                do {\n                    $_[0]-&gt;isa('mySpecialType') if &amp;Scalar::Util::blessed($_[0])\n                };\n            },\n        constraint                 sub {\n                package Moose::Meta::TypeConstraint::Class;\n                use warnings;\n                use strict;\n                $_[0]-&gt;isa($class_name);\n            },\n        _default_message           sub {\n                package Moose::Meta::TypeConstraint;\n                use warnings;\n                use strict;\n                my $value = shift();\n                my $can_partialdump = try(sub {\n                    require Devel::PartialDump;\n                    'Devel::PartialDump'-&gt;VERSION(0.14);\n                    1;\n                }\n                );\n                if ($can_partialdump) {\n                    $value = 'Devel::PartialDump'-&gt;new-&gt;dump($value);\n                }\n                else {\n                    $value = defined $value ? overload::StrVal($value) : 'undef';\n                }\n                return q[Validation failed for '] . $name . \"' with value $value\";\n            },\n        inline_environment         {},\n        inlined                    sub {\n                package Moose::Meta::TypeConstraint::Class;\n                use warnings;\n                use strict;\n                my $self = shift();\n                my $val = shift();\n                return 'Scalar::Util::blessed(' . $val . ')' . ' &amp;&amp; ' . $val . '-&gt;isa(' . B::perlstring($self-&gt;class) . ')';\n            },\n        name                       \"mySpecialType\",\n        package_defined_in         \"Use1\",\n        parent                     Moose::Meta::TypeConstraint\n    }\n}\n</code></pre>\n\n<p>This is a simple <code>isa</code> check that Moose seems to put in if no other constraint already exists with that name. That way, you can do stuff like this.</p>\n\n<pre><code>use Moose;\nhas date =&gt; ( is =&gt; 'ro', isa =&gt; 'DateTime' );\n</code></pre>\n\n<p>The order of execution in our original <em>main.pl</em> is the problem, because <code>use</code> gets done at <em>compile time</em>. </p>\n\n<p>Here is your error again, with emphasis. </p>\n\n<blockquote>\n  <p>type constraint 'mySpecialType' <strong>has already been created in Use1</strong> and cannot be created again in main</p>\n</blockquote>\n\n<p>Let's take a look what is going on when <em>main.pl</em> gets run. I am ignoring Moose itself and other modules in the below analysis, which is highly simplified.</p>\n\n<ul>\n<li><em>compile time</em>: <em>main.pl</em> line 1 <code>use Moose::Util::TypeConstraints;</code>\n\n<ul>\n<li>that module gets loaded, a bunch of things happen, we ignore those</li>\n</ul></li>\n<li><em>compile time</em>: <em>main.pl</em> line 6 <code>use noUse;</code>\n\n<ul>\n<li><em>compile time</em>: <em>noUse.pm</em> line 2 <code>use Use1;</code>\n\n<ul>\n<li><em>compile time</em>: <em>Use1.pm</em> line 2 <code>use Moose;</code>\n\n<ul>\n<li>Moose gets loaded, a bunch of things happen, we ignore those</li>\n</ul></li>\n<li><em>run time</em>: <em>Use1.pm</em> line 3 <code>has 'object1' ...</code> puts the attribute <code>object1</code> into the <code>Use1</code> class. At this point Moose checks if there is a type constraint for <code>mySpecialType</code> and then makes one with an <code>isa</code> check because it asumes this is a package name.</li>\n</ul></li>\n<li><em>compile time</em>: <em>noUse.pm</em> line 3 <code>use Use2;</code> \n\n<ul>\n<li><em>compile time</em>: <em>Use2.pm</em> line 2 <code>use Moose;</code>\n\n<ul>\n<li>Moose gets loaded, a bunch of things happen, we ignore those</li>\n</ul></li>\n<li><em>run time</em>: <em>Use2.pm</em> line 3 <code>has 'object2' ...</code> puts the attribute <code>object2</code> into the <code>Use2</code> class. At this point Moose checks if there is a type constraint for <code>mySpecialType</code> and there is (because it was created in <code>Use1.pm</code>).</li>\n</ul></li>\n</ul></li>\n<li><em>run time</em>: <em>main.pl</em> line 2ff <code>subtype 'mySpecialType' ...</code> tries to create a type constraint <code>mySpecialType</code>. This fails, because there already is one. It was created in <code>Use1.pm</code>. BOOM.</li>\n</ul>\n\n<p>So the problem is that the code in packages that are <code>use</code>d in <em>main.pl</em> gets run before the normal code in <em>main.pl</em>. You need to declare your types before they are encountered at <em>run time</em> the first time.</p>\n\n<p>Let's prove this by doing a dirty hack.</p>\n\n<pre><code>use Moose::Util::TypeConstraints;\n\nBEGIN {\n    subtype 'mySpecialType' =&gt; as 'Object' =&gt; where sub { $_-&gt;does('something') };\n}\n\nuse noUse;\n</code></pre>\n\n<p>This will not blow up, because the <code>BEGIN</code> block gets run at <em>compile time</em>, which is before the <code>use noUse</code> statement. Therefore the type constraint will already be there when Moose encounters it the first time in a <code>has =&gt; ( ... isa =&gt; 'mySpecialType' )</code> construct.</p>\n\n<p>But that's not pretty. let's try another solution.\n    use Moose::Util::TypeConstraints;</p>\n\n<pre><code>subtype 'mySpecialType' =&gt; as 'Object' =&gt; where sub { $_-&gt;does('something') };\n\nrequire noUse;\n</code></pre>\n\n<p>This will also work, because the <code>require</code> is not called at <em>compile time</em>, but at <em>run time</em>. So the <code>subtype</code> gets installed first, and then it will load <code>noUse</code>. But this defers loading all your classes until we are already in run time in your main program, and that is bad form.</p>\n\n<p><strong>They correct way to do this</strong> is to put all your types into a <em>type library</em> and load that one first. See <a href=\"https://stackoverflow.com/a/41551350/1331451\">choroba's answer</a> for how to do that.</p>\n\n<p>For good measure, you should also <code>use</code> that type library module in all modules that use any of the types. That way you ensure that in the future, when you write other applications with the same classes, you don't need to remember to load that type library. <strong>Always <code>use</code> everything you need for a class in that class.</strong></p>\n"}, {"comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1483975785, "post_id": 41551350, "comment_id": 70307730, "body": "Let&#39;s merge. I was going to pretty much put that at the bottom of my explanation right now. :D"}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1483975861, "post_id": 41551350, "comment_id": 70307793, "body": "@simbabque: Yeah, I wanted to add a paragraph about what happens at compile time and how Moose resolves unknown type constraints :)"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1483975971, "post_id": 41551350, "comment_id": 70307870, "body": "I&#39;m going to link to your answer in mine."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1483976092, "post_id": 41551350, "comment_id": 70307944, "body": "And now we&#39;ve got a circular reference :D"}], "tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": true, "score": 4, "last_activity_date": 1483976065, "last_edit_date": 1495540829, "creation_date": 1483975758, "answer_id": 41551350, "question_id": 41550691, "link": "https://stackoverflow.com/questions/41550691/the-type-constraint-xyz-has-already-been-created/41551350#41551350", "title": "The type constraint &#39;XYZ&#39; has already been created", "body": "<p>The standard way is to <code>use</code> the common code from the libraries where it's needed, not to let it radiate from the main program.</p>\n\n<h2>MyTypes.pm</h2>\n\n<pre><code>package MyTypes;\nuse Moose::Util::TypeConstraints;\nsubtype 'mySpecialType'\n    =&gt; as 'Object'\n    =&gt; where sub { $_-&gt;does('something') };\n</code></pre>\n\n<h2>Use1.pm</h2>\n\n<pre><code>package Use1; \nuse Moose; \nuse MyTypes;\nhas 'object1' =&gt; ( is =&gt; 'ro', isa =&gt; 'mySpecialType' ); \n1;\n</code></pre>\n\n<h2>Use2.pm</h2>\n\n<pre><code>package Use2; \nuse Moose;\nuse MyTypes; \nhas 'object2' =&gt; ( is =&gt; 'ro', isa =&gt; 'mySpecialType' ); \n1;\n</code></pre>\n\n<p>And <code>main.pl</code> becomes just</p>\n\n<pre><code>use noUse;\n</code></pre>\n\n<p><code>noUse.pm</code> stays unchanged.</p>\n\n<p>See <a href=\"https://stackoverflow.com/users/1331451/simbabque\">simbabque</a>'s <a href=\"https://stackoverflow.com/a/41551349/1030675\">answer</a> for why.</p>\n"}], "owner": {"reputation": 111, "user_id": 5904894, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/8087bd829fb272e8de8ffb98902b8400?s=128&d=identicon&r=PG&f=1", "display_name": "dontPanic", "link": "https://stackoverflow.com/users/5904894/dontpanic"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 146, "favorite_count": 0, "accepted_answer_id": 41551350, "answer_count": 2, "score": 2, "last_activity_date": 1484039633, "creation_date": 1483973655, "last_edit_date": 1483999354, "question_id": 41550691, "link": "https://stackoverflow.com/questions/41550691/the-type-constraint-xyz-has-already-been-created", "title": "The type constraint &#39;XYZ&#39; has already been created", "body": "<p>I want to use a <a href=\"https://metacpan.org/pod/Moose::Util::TypeConstraints\" rel=\"nofollow noreferrer\"><code>Moose::Util::TypeConstraints</code></a> in my application.</p>\n\n<p>So I define one in my <code>main.pl</code></p>\n\n<h3>main.pl</h3>\n\n<pre><code>use Moose::Util::TypeConstraints;\n\nsubtype 'mySpecialType'\n    =&gt; as 'Object'\n    =&gt; where sub { $_-&gt;does('something') };\n\nuse noUse;\n</code></pre>\n\n<p>In the package <code>noUse.pm</code> are packages used, which use the type constraint</p>\n\n<h3>noUse.pm</h3>\n\n<pre><code>package noUse;\n\nuse Use1;\n\nuse Use2;\n\n1;\n</code></pre>\n\n<p>and my package <code>Use1</code> and <code>Use2</code> are working with the type constraint</p>\n\n<h3>Use1.pm</h3>\n\n<pre><code>package Use1; \n\nuse Moose; \n\nhas 'object1' =&gt; ( is =&gt; 'ro', isa =&gt; 'mySpecialType' ); \n\n1;\n</code></pre>\n\n<h3>Use2.pm</h3>\n\n<pre><code>package Use2; \n\nuse Moose; \n\nhas 'object2' =&gt; ( is =&gt; 'ro', isa =&gt; 'mySpecialType' ); \n\n1;\n</code></pre>\n\n<p>If I run <code>main.pl</code> I get this error:</p>\n\n<blockquote>\n  <p>The type constraint 'mySpecialType' has already been created in Use1 and cannot be created again in main at /usr/lib/x86_64-linux-gnu/perl5/5.22/Moose/Util/TypeConstraints.pm line 348\n          Moose::Util::TypeConstraints::subtype('mySpecialType', 'HASH(0x227f398)', 'HASH(0x2261140)') called at main.pl line 10</p>\n</blockquote>\n\n<p>What causes this error and how can I fix it?</p>\n"}, {"tags": ["database", "perl", "dbi"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 2, "creation_date": 1483973177, "post_id": 41550066, "comment_id": 70306085, "body": "Are you sure you created the database correctly? When you use <code>sqlite3</code> on the command line, is the table there? You can use the <code>.tables</code> command to show all tables in the database from that utility."}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 3, "creation_date": 1483975847, "post_id": 41550066, "comment_id": 70307784, "body": "Some guesses: 1) Since you don&#39;t specify an absolute path to the database, a new one is being created in your working directory instead of connecting to the existing one. 2) You made a typo in the database and/or table name (e.g. the actual name is <code>Company</code>, not <code>COMPANY</code>). 3) You never actually created the table successfully."}, {"owner": {"reputation": 21, "user_id": 7394840, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99199e4cc6c0844113a2d499405a08b4?s=128&d=identicon&r=PG&f=1", "display_name": "Ram", "link": "https://stackoverflow.com/users/7394840/ram"}, "edited": false, "score": 0, "creation_date": 1484028806, "post_id": 41550066, "comment_id": 70328941, "body": "Thanks for responding."}, {"owner": {"reputation": 21, "user_id": 7394840, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99199e4cc6c0844113a2d499405a08b4?s=128&d=identicon&r=PG&f=1", "display_name": "Ram", "link": "https://stackoverflow.com/users/7394840/ram"}, "edited": false, "score": 0, "creation_date": 1484029279, "post_id": 41550066, "comment_id": 70329123, "body": "Thanks for your response.  The database is created correctly and there are not mistakes when made in the database name or table name.  Note when I try to insert using the below code (in the next comment) it is working correctly but when I try to use OO model i.e. the above in the issue summary section it is giving me that error,"}, {"owner": {"reputation": 21, "user_id": 7394840, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99199e4cc6c0844113a2d499405a08b4?s=128&d=identicon&r=PG&f=1", "display_name": "Ram", "link": "https://stackoverflow.com/users/7394840/ram"}, "edited": false, "score": 0, "creation_date": 1484029291, "post_id": 41550066, "comment_id": 70329130, "body": "use DBI; \tuse strict;  \tmy $driver   = &quot;SQLite&quot;; \tmy $database = &quot;WEBSITE.db&quot;; \tmy $dsn = &quot;DBI:$driver:dbname=$database&quot;; \tmy $userid = &quot;&quot;; \tmy $password = &quot;&quot;; \tmy $dbh = DBI-&gt;connect($dsn, $userid, $password, { RaiseError =&gt; 1 }) or die $DBI::errstr;  \tmy $sth = $dbh-&gt;prepare(&#39;INSERT INTO COMPANY VALUES (?, ?, ?, ?, ?)&#39;); \tmy $rv = $sth-&gt;execute(&quot;003&quot;, &quot;Test&quot;, &quot;User&quot;, &quot;a\\@b.com&quot;, &quot;Test Comment&quot;) or die $DBI::errstr;"}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1484063822, "post_id": 41550066, "comment_id": 70350549, "body": "The DSN in your module is wrong: <code>&quot;DBI:$driver:dbname:$database&quot;</code> should be <code>&quot;DBI:$driver:dbname=$database&quot;</code> (there should be an equal sign after <code>dbname</code>, not a colon)."}, {"owner": {"reputation": 21, "user_id": 7394840, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99199e4cc6c0844113a2d499405a08b4?s=128&d=identicon&r=PG&f=1", "display_name": "Ram", "link": "https://stackoverflow.com/users/7394840/ram"}, "edited": false, "score": 0, "creation_date": 1485320093, "post_id": 41550066, "comment_id": 70871922, "body": "Thanks ThisSuitlsBlackNot.... I got this fixed."}], "answers": [{"tags": [], "owner": {"reputation": 21, "user_id": 7394840, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99199e4cc6c0844113a2d499405a08b4?s=128&d=identicon&r=PG&f=1", "display_name": "Ram", "link": "https://stackoverflow.com/users/7394840/ram"}, "is_accepted": false, "score": 1, "last_activity_date": 1485320136, "creation_date": 1485320136, "answer_id": 41843655, "question_id": 41550066, "link": "https://stackoverflow.com/questions/41550066/dbdsqlitedb-prepare-failed-no-such-table-perl/41843655#41843655", "title": "DBD::SQLite::db prepare failed: no such table Perl", "body": "<p>The DSN in your module is wrong: \"DBI:$driver:dbname:$database\" should be \"DBI:$driver:dbname=$database\" (there should be an equal sign after dbname, not a colon). Posted by ThisSuitIsBlackNot Jan 10 at 15:57 is the correct answer...</p>\n"}], "owner": {"reputation": 21, "user_id": 7394840, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99199e4cc6c0844113a2d499405a08b4?s=128&d=identicon&r=PG&f=1", "display_name": "Ram", "link": "https://stackoverflow.com/users/7394840/ram"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2293, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1527975888, "creation_date": 1483971728, "last_edit_date": 1484062171, "question_id": 41550066, "link": "https://stackoverflow.com/questions/41550066/dbdsqlitedb-prepare-failed-no-such-table-perl", "title": "DBD::SQLite::db prepare failed: no such table Perl", "body": "<p>I created a <strong>SQLite</strong> database and a table named 'COMPANY'.</p>\n\n<p>My intention is to create a module (<strong>Connect.pm</strong>) which blesses the <strong>DataBase Handler ($dbh)</strong> which is the connection to the database, and with the object created, I can call the insert method which is available in Connect.pm.</p>\n\n<p>When I try to insert data in to the database, it is giving me the below <strong>error:</strong></p>\n\n<blockquote>\n  <p>DBD::SQLite::db prepare failed: no such table: COMPANY at temp.pl\n  line 6.<br>\n  DBD::SQLite::db prepare failed: no such table: COMPANY at\n  temp.pl line 6.</p>\n</blockquote>\n\n<p><strong>Connect.pm</strong></p>\n\n<pre><code>package Connect;\n\nuse strict;\nuse DBI;\n\nuse Data::Dumper;\n\nsub new {\n    my $class = shift;\n    my $driver = \"SQLite\";\n    my $database = \"WEBSITE.db\";\n    my $dsn = \"DBI:$driver:dbname:$database\";\n    my $userid = \"\";\n    my $password = \"\";\n    my $dbh = DBI-&gt;connect($dsn, $userid, $password, { RaiseError =&gt; 1}) or die $DBI::errstr;\n    my $self = { dbh =&gt; $dbh};\n\n    print STDERR \"Opened database successfully\\n\";\n    bless $self, $class;\n    return $self;\n}\nsub insert {\n    my $self = shift;\n    my ($id, $firstName, $lastName, $email, $comment) = @_;\n    my $sth = $self-&gt;{ dbh }-&gt;prepare(\"INSERT INTO COMPANY VALUES (?, ?, ?, ?, ?)\");\n    my $rv = $sth-&gt;execute($id, $firstName, $lastName, $email, $comment) or die $DBI::errstr;\n\n    my $value = \"Inserted Successfully\";\n    if($rv &lt; 0){\n        $value = $DBI::errstr;\n    }\n    return $value;\n}\n\n1;\n</code></pre>\n\n<p><strong>temp.pl</strong></p>\n\n<pre><code>use DBI;\nuse strict;\nuse Connect;\n\nmy $obj = Connect-&gt;new();\nmy $status = $obj-&gt;insert(\"002\", \"Test\", \"User\", \"a\\@b.com\", \"Comment\");\n\n$obj-&gt;disconenct();\n</code></pre>\n\n<hr>\n\n<p>I can use this program to create the DB and query it, which works.</p>\n\n<pre><code>use DBI;\nuse strict;\nmy $driver   = \"SQLite\";\nmy $database = \"WEBSITE.db\";\nmy $dsn      = \"DBI:$driver:dbname=$database\";\nmy $userid   = \"\";\nmy $password = \"\";\nmy $dbh      = DBI-&gt;connect( $dsn, $userid, $password, { RaiseError =&gt; 1 } ) or die $DBI::errstr;\nmy $sth      = $dbh-&gt;prepare('INSERT INTO COMPANY VALUES (?, ?, ?, ?, ?)');\nmy $rv = $sth-&gt;execute( \"003\", \"Test\", \"User\", \"a\\@b.com\", \"Test Comment\" ) or die $DBI::errstr;\n</code></pre>\n"}, {"tags": ["c", "perl", "perl-io"], "comments": [{"owner": {"reputation": 147710, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 1, "creation_date": 1483972450, "post_id": 41549508, "comment_id": 70305613, "body": "Have you considered using <code>PerlIO_findFILE</code> with <code>fputs</code> instead?"}], "owner": {"reputation": 379, "user_id": 4533661, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a0c9c418921324d71b4d9b1380ab4990?s=128&d=identicon&r=PG&f=1", "display_name": "Semonit", "link": "https://stackoverflow.com/users/4533661/semonit"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 101, "favorite_count": 2, "answer_count": 0, "score": 4, "last_activity_date": 1489076207, "creation_date": 1483969686, "last_edit_date": 1489076207, "question_id": 41549508, "link": "https://stackoverflow.com/questions/41549508/embedded-perl-in-c-perlapio-interoperability-with-stdio", "title": "embedded perl in C, perlapio - interoperability with STDIO", "body": "<p>I just realized, that the PerlIO layer seems to do something more than just (more or less) easily wrap the stdio.h-functions.\nIf I try to use a file-descriptor resolved via <code>PerlIO_stdout()</code> and <code>PerlIO_fileno()</code> with functions from stdio.h, this fails.</p>\n\n<p>For example:</p>\n\n<pre><code>PerlIO* perlStdErr = PerlIO_stderr();\nfdStdErrOriginal = PerlIO_fileno(perlStdErr);\nrelocatedStdErr = dup(fdStdOutOriginal);\n_write(relocatedStdErr, \"something\", 8); //&lt;-- this fails\n</code></pre>\n\n<p>I've tried this with VC10. The embedded perl program is executed from a different context - so it's not possible to use PerlIO from the context where the write to the relocatedStdErr is performed.</p>\n\n<p>For the curious: I need to execute a perl script and forward the output of the script's stdout/stderr to a log whilst keeping the ability to write on stdout for myself. Moreover this should work platform independent (linux, windows console application, win32 desktop application). Just to forward the stdout/stderr doesn't work in Win32 desktop applications since there is none ;) - you need to use the perl's stdout/stderr.</p>\n\n<p>Needed solution: Be able to write on a filehandle (or descriptor) derived from perlio NOT using the PerlIO stack.</p>\n\n<p><strong>EDIT - my solution:</strong></p>\n\n<p>As Story Teller was pointing to PerlIO_findFILE, this did the trick.\nSo here an excerpt of the code - see the comments inside for descriptions:</p>\n\n<pre><code>FILE* stdErrFILE = PerlIO_findFILE(PerlIO_stderr()); //convert to Perl's stderr to stdio FILE handle\n\nfdStdErrOriginal = _fileno(stdErrFILE); //get descriptor using MSVC\n\nif (fdStdErrOriginal &gt;= 0)\n{\n    relocatedStdErr = _dup(fdStdErrOriginal); //relocate stdErr for external writing using MSVC\n    if (relocatedStdErr &gt;= 0)\n    {\n        if (pipe(fdPipeStdErr) == 0) //create pipe for forwarding stdErr - USE PERL's IO since win32subsystem(non-console) \"_pipe\" doesn't work\n        {\n            if (dup2(fdPipeStdErr[1], fdStdErrOriginal) &gt;= 0) //hang pipe on stdErr - USE PERL's IO (since it's created by perl)\n            {\n                close(fdPipeStdErr[1]); //close the now duplicated writer on stdErr for further usage - USE PERL's IO (since it's created by perl)\n                //\"StreamForwarder\" creates a thread that catches/reads the pipe's input and forwards it to the processStdErrOutput function (using the PerlIO)\n                stdErrForwarder = new StreamForwarder(fdPipeStdErr[0], &amp;processStdErrOutput, PerlIO_stderr()); \n                return relocatedStdErr; //return the relocated stdErr to be able to '_write' onto it\n            }\n        }\n    }\n}\n...\n...\n    _write(relocatedStdErr, \"Hello Stackoverflow!\", 20); //that works :)\n</code></pre>\n\n<p>One interesting thing that I actually don't understand is, that the perl documentation says that is't necessary to <code>#define PERLIO_NOT_STDIO 0</code> to be able to use <code>PerlIO_findFILE()</code>. But for me, that works fine without it and further I like to use PerlIO and the stdio together anyway. That's a point I didn't figured out what is going on.</p>\n"}, {"tags": ["perl"], "answers": [{"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 1, "last_activity_date": 1483970261, "last_edit_date": 1483970261, "creation_date": 1483964313, "answer_id": 41547950, "question_id": 41547765, "link": "https://stackoverflow.com/questions/41547765/perl-limiting-characters-on-string-scalar-variables/41547950#41547950", "title": "Perl: Limiting characters on String Scalar variables", "body": "<p>If <code>$value</code> is a number as you claim, then <code>ref</code> will return an empty string, so execution will continue on to the next statement. You simply want</p>\n\n<pre><code>if (!ref($value) &amp;&amp; length($value) &gt;= 1000 ) {\n    return;\n}\n</code></pre>\n\n<p>This will take the length of the stringification of the <code>$value</code>, so <code>length(500)</code> is the same as <code>length(\"500\")</code>, which is <code>3</code>.</p>\n\n<hr>\n\n<p>If <code>$value</code> is a reference to a number, your code is wrong too. <code>length($value)</code> will take the length of the stringification of the reference. You want</p>\n\n<pre><code>if (ref($ref) eq 'SCALAR' &amp;&amp; length($$ref) &gt;= 1000 ) {\n    return;\n}\n</code></pre>\n\n<p><code>$$ref</code> (short for <code>${ $ref }</code>) is the scalar to referenced by <code>$ref</code>.</p>\n\n<p>(Note that it's very rare to have a reference to a scalar.)</p>\n"}, {"tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": true, "score": 7, "last_activity_date": 1483983049, "last_edit_date": 1483983049, "creation_date": 1483964319, "answer_id": 41547951, "question_id": 41547765, "link": "https://stackoverflow.com/questions/41547765/perl-limiting-characters-on-string-scalar-variables/41547951#41547951", "title": "Perl: Limiting characters on String Scalar variables", "body": "<p>In your question, you are saying that you check the number of characters in a string, and that the variable containing it could also be a hash ref or array ref.</p>\n\n<blockquote>\n<pre><code>if (ref($value) eq 'SCALAR' &amp;&amp; length($value) &gt;= 1000 ) {\n    return;\n}\n</code></pre>\n</blockquote>\n\n<p>However, your code does not check the length of the string or number. It assumes the variable might be a scalar reference, but then checks the length of the stringification of the scalar reference.</p>\n\n<pre><code>say \\\"asdf\";\n# SCALAR(0x268e7f8)\n\nsay length \\\"asdf\";\n# 17\n</code></pre>\n\n<p>This length should always be 17 on 64 bit systems, or 16 on 32 bit systems.</p>\n\n<hr>\n\n<p>Once you actually dereference your scalar reference, the following will apply.</p>\n\n<pre><code>#                                     here  and here\n#                                      ##        #\nif (ref($value) eq 'SCALAR' &amp;&amp; length( ${ $value } ) &gt;= 1000 ) {\n    return;\n}\n</code></pre>\n\n<p>Since Perl has no types, the number will be treated as a string. Passing <code>\"500\"</code> is the same as passing <code>500</code>.</p>\n\n<pre><code>say length 500;\nsay length \"500\";\n\n__END__\n3\n3\n</code></pre>\n\n<p>The variable itself will not be <em>converted</em>. You don't need to care about that at all. Your code is fine, as long as you contain the number in a scalar reference.</p>\n\n<p>The scalar reference doesn't care if it references a string or a number.</p>\n\n<pre><code>say length ${ \\500 };\nsay length ${ \\\"500\" };\n\n__END__\n3\n3\n</code></pre>\n"}], "owner": {"reputation": 881, "user_id": 595855, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/37888a26f20e7467ff1f239c1b15b194?s=128&d=identicon&r=PG", "display_name": "snakespan", "link": "https://stackoverflow.com/users/595855/snakespan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 109, "favorite_count": 0, "accepted_answer_id": 41547951, "answer_count": 2, "score": 0, "last_activity_date": 1483983049, "creation_date": 1483963689, "question_id": 41547765, "link": "https://stackoverflow.com/questions/41547765/perl-limiting-characters-on-string-scalar-variables", "title": "Perl: Limiting characters on String Scalar variables", "body": "<p>I'm looking to ensure the number of characters on a given value are less than 1000. My function is unsure whether the value is an array, hash or scalar. </p>\n\n<pre><code>if (ref($value) eq 'SCALAR' &amp;&amp; length($value) &gt;= 1000 ) {\n    return;\n}\n</code></pre>\n\n<p>However, what happens if a number is passed in? Will I be unknowingly converting a number value to a string, and if so, is there a way of checking for a numeric value before checking its length?</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1483961687, "post_id": 41546978, "comment_id": 70298854, "body": "Going to need an example of &quot;junk&quot; to be able to answer."}, {"owner": {"reputation": 2192, "user_id": 1984289, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/8439edb6b6125f42df7333c3fca61bd0?s=128&d=identicon&r=PG", "display_name": "Fazlin", "link": "https://stackoverflow.com/users/1984289/fazlin"}, "reply_to_user": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1483961978, "post_id": 41546978, "comment_id": 70299054, "body": "Added a sample output!!"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1483962112, "post_id": 41546978, "comment_id": 70299165, "body": "<code>^[</code> is an escape code. Do you have a prompt configured, especially one with colours? (<code>echo $PS1</code> should tell you)"}, {"owner": {"reputation": 2192, "user_id": 1984289, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/8439edb6b6125f42df7333c3fca61bd0?s=128&d=identicon&r=PG", "display_name": "Fazlin", "link": "https://stackoverflow.com/users/1984289/fazlin"}, "reply_to_user": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1483962915, "post_id": 41546978, "comment_id": 70299651, "body": "<code>^[[H^[[J</code> is the garbage am getting"}], "answers": [{"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1483973971, "post_id": 41547212, "comment_id": 70306612, "body": "Prompt isn&#39;t used when <code>-c</code> is used, so it&#39;s not from a prompt. Probably from a badly-written shell startup file. This is the sequence that is emitted by <code>clear</code>."}], "tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": false, "score": 2, "last_activity_date": 1483963207, "last_edit_date": 1495539966, "creation_date": 1483961889, "answer_id": 41547212, "question_id": 41546978, "link": "https://stackoverflow.com/questions/41546978/shell-command-execution-from-perl-script-contains-garbage-characters/41547212#41547212", "title": "Shell command execution from perl script contains garbage characters", "body": "<p>1 - can't answer without knowing the command. If it's <code>ls</code> you shouldn't be parsing <code>ls</code>, but you indicate that you aren't. With the sample input you've given: <code>^[[H^[[J</code> - is an escape code, used for things like colours in terminals. See: <a href=\"https://www.gnu.org/software/screen/manual/html_node/Control-Sequences.html\" rel=\"nofollow noreferrer\">Control Sequences</a> -</p>\n\n<p>This <em>probably</em> comes from your prompt. Check what <code>$PS1</code> is set to in your shell. But there's a workaround there that involves bypassing shell:</p>\n\n<pre><code>open ( my $output, '-|', 'ls', '-ltr' );\nwhile ( &lt;$output&gt; ) { \n     print;\n}\n</code></pre>\n\n<p>That way you won't involve the shell in the processing at all, so any 'junk' comes directly from the command you're running. </p>\n\n<p>See: <a href=\"http://perldoc.perl.org/perlfaq8.html#How-can-I-call-backticks-without-shell-processing%3F\" rel=\"nofollow noreferrer\">perlfaq</a></p>\n\n<p>2 - Fix the command to not generate \"junk\". I can't be more specific, because I don't know what you mean. But running it through a regex to filter out particular \"junk\" characters is quite doable. E.g. <code>s/[^\\w\\s]+//g</code> will filter out anything that <em>isn't</em> alphanumeric and whitespace. Although note - this will remove punctuation, but you can figure out a more suitable example by reading <a href=\"http://perldoc.perl.org/perlre.html\" rel=\"nofollow noreferrer\"><code>perlre</code></a> </p>\n\n<p>In your example though - because it's escape codes - you're not getting just control codes, but rather escape sequences. This is probably altogether more annoying to filter, because there's not a fixed length to them. But perhaps this will help: <a href=\"https://stackoverflow.com/questions/7394889/best-way-to-remove-ansi-color-escapes-in-unix\">Best way to remove ANSI color escapes in Unix</a></p>\n\n<p>I'd point out as a supplemental - 3 argument <code>open</code> using lexical filehandles is good practice, and avoids some gotchas.</p>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 1, "last_activity_date": 1483974272, "creation_date": 1483974272, "answer_id": 41550890, "question_id": 41546978, "link": "https://stackoverflow.com/questions/41546978/shell-command-execution-from-perl-script-contains-garbage-characters/41550890#41550890", "title": "Shell command execution from perl script contains garbage characters", "body": "<p>You have configured your shell to call <code>clear</code> whenever it is launched. Those characters are emitted by <code>clear</code> to instruct your terminal to home the cursor and clear itself. You should limit calling <code>clear</code> to login shells and/or interactive shells.</p>\n"}], "owner": {"reputation": 2192, "user_id": 1984289, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/8439edb6b6125f42df7333c3fca61bd0?s=128&d=identicon&r=PG", "display_name": "Fazlin", "link": "https://stackoverflow.com/users/1984289/fazlin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 175, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1483977714, "creation_date": 1483961153, "last_edit_date": 1483977714, "question_id": 41546978, "link": "https://stackoverflow.com/questions/41546978/shell-command-execution-from-perl-script-contains-garbage-characters", "title": "Shell command execution from perl script contains garbage characters", "body": "<p>I have a perl script which runs a shell command and parses the output as shown below:</p>\n\n<pre><code># Using ls -ltr for illustration. Actual command is different.\nmy $cmd = \"ls -ltr 2&gt;&amp;1 | \";\nopen (CMD, $cmd ) || die \"Cant run $cmd\";\n\nwhile (my $line = &lt;CMD&gt;) {\n  chomp $line;\n  ...\n  ...\n}\n</code></pre>\n\n<p>The above <code>$line</code> contains junk characters even after using <code>chomp</code>. I have tried redirecting the output to file and also reading from file but still even the file has junk/garbage characters in them.</p>\n\n<p>The sample output of executing above command:</p>\n\n<pre><code>^[[H^[[Jtotal 12\ndrwx------ 2 root root 4096 Dec 19 15:30 tad4d\ndrwx------ 2 root root 4096 Jan  2 15:37 oup\n-rw-r--r-- 1 root root  137 Jan  9 06:25 alth.txt\n</code></pre>\n\n<p>In the above output, before <code>total 12</code>, there are some garbage characters present.</p>\n\n<ol>\n<li>What may be the reason for the junk characters getting into the output of shell command?</li>\n<li>How to avoid the garbage/junk characters?</li>\n</ol>\n\n<p>Thanks</p>\n"}, {"tags": ["perl"], "answers": [{"comments": [{"owner": {"reputation": 185, "user_id": 6328615, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh6.googleusercontent.com/-NnEjkxbPdHs/AAAAAAAAAAI/AAAAAAAAANg/R3M3QMQQ3BA/photo.jpg?sz=128", "display_name": "Bhargav Katkam", "link": "https://stackoverflow.com/users/6328615/bhargav-katkam"}, "edited": false, "score": 1, "creation_date": 1483961730, "post_id": 41546748, "comment_id": 70298884, "body": "I may have to go with your first alternate. Actually, there is dependency of variable <code>$pctDir</code> from user. Is there any alternative without using loop"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "reply_to_user": {"reputation": 185, "user_id": 6328615, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh6.googleusercontent.com/-NnEjkxbPdHs/AAAAAAAAAAI/AAAAAAAAANg/R3M3QMQQ3BA/photo.jpg?sz=128", "display_name": "Bhargav Katkam", "link": "https://stackoverflow.com/users/6328615/bhargav-katkam"}, "edited": false, "score": 1, "creation_date": 1483961949, "post_id": 41546748, "comment_id": 70299034, "body": "Why do you need to avoid using a loop? You&#39;re implicitly looping whatever you do, because that&#39;s the nature of the operation."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "reply_to_user": {"reputation": 185, "user_id": 6328615, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh6.googleusercontent.com/-NnEjkxbPdHs/AAAAAAAAAAI/AAAAAAAAANg/R3M3QMQQ3BA/photo.jpg?sz=128", "display_name": "Bhargav Katkam", "link": "https://stackoverflow.com/users/6328615/bhargav-katkam"}, "edited": false, "score": 1, "creation_date": 1483962053, "post_id": 41546748, "comment_id": 70299111, "body": "With <code>pctDir</code> being a variable (In case anyone&#39;s unclear - the original post had it as static text), then yes, you&#39;ll probably need to use the first example. Otherwise you&#39;ll end up with something nasty using <code>eval</code>."}], "tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": true, "score": 3, "last_activity_date": 1483965431, "last_edit_date": 1483965431, "creation_date": 1483960489, "answer_id": 41546748, "question_id": 41546637, "link": "https://stackoverflow.com/questions/41546637/map-arrays-to-hash-with-logical-defined-operator/41546748#41546748", "title": "Map arrays to hash with logical defined operator", "body": "<p>The boolean operators and <code>//</code> operate on scalars, so their LHS is evaluated in scalar context. This means that </p>\n\n<pre><code>@viewPaths{@viewFiles} //= ...;\n</code></pre>\n\n<p>is equivalent to</p>\n\n<pre><code>$viewPaths{ $viewFiles[-1] } //= ...;\n</code></pre>\n\n<p>So instead, you need to do it per entry:</p>\n\n<pre><code>my @viewFiles = (\"cdl\", \"lef\", \"verilog\", \"lib\");\nmy %defaults; \n@defaults{@viewFiles} = (\"pctDir/cdl/topCellName.cdl\", \"pctDir/lef/topCellName.lef\", \"pctDir/model/verilog/topCellName.v\", \"pctDir/model/timing/lib/topCellName.lib\");\n\n$viewPaths{$_} //= $defaults{$_} for keys %defaults;\n</code></pre>\n\n<p>However as an alternative - pre-filling the hash <em>should</em> work I think:</p>\n\n<pre><code>#!/usr/bin/perl\nuse warnings;\nuse strict;\n\nuse Data::Dumper;\nuse Getopt::Long;\nmy @viewFiles = (\"cdl\", \"lef\", \"verilog\", \"lib\");\nmy %viewPaths;\n\n@viewPaths{@viewFiles} = (\"pctDir/cdl/topCellName.cdl\", \"pctDir/lef/topCellName.lef\", \"pctDir/model/verilog/topCellName.v\", \"pctDir/model/timing/lib/topCellName.lib\");\n\nGetOptions(\n  \"cdl=s\" =&gt; \\$viewPaths{\"cdl\"},\n  \"lef=s\" =&gt; \\$viewPaths{\"lef\"},\n  \"verilog=s\" =&gt; \\$viewPaths{\"verilog\"},\n  \"lib=s\" =&gt; \\$viewPaths{\"lib\"},\n);\n\nprint Dumper \\%viewPaths;\n</code></pre>\n"}], "owner": {"reputation": 185, "user_id": 6328615, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh6.googleusercontent.com/-NnEjkxbPdHs/AAAAAAAAAAI/AAAAAAAAANg/R3M3QMQQ3BA/photo.jpg?sz=128", "display_name": "Bhargav Katkam", "link": "https://stackoverflow.com/users/6328615/bhargav-katkam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 53, "favorite_count": 0, "accepted_answer_id": 41546748, "answer_count": 1, "score": 3, "last_activity_date": 1483965431, "creation_date": 1483960073, "last_edit_date": 1483961603, "question_id": 41546637, "link": "https://stackoverflow.com/questions/41546637/map-arrays-to-hash-with-logical-defined-operator", "title": "Map arrays to hash with logical defined operator", "body": "<p>I am trying to set default value, if user doesn't supply it</p>\n\n<p>Following is my code. Please point how it can be done with // operator</p>\n\n<pre><code>use Data::Dumper;\nuse Getopt::Long;\nmy @viewFiles = (\"cdl\", \"lef\", \"verilog\", \"lib\");\nmy %viewPaths;\nmy $pctDir = \".\";\nGetOptions(\n  \"pctDir=s\" =&gt; \\$pctDir,\n  \"cdl=s\" =&gt; \\$viewPaths{\"cdl\"},\n  \"lef=s\" =&gt; \\$viewPaths{\"lef\"},\n  \"verilog=s\" =&gt; \\$viewPaths{\"verilog\"},\n  \"lib=s\" =&gt; \\$viewPaths{\"lib\"},\n);\n@viewPaths{@viewFiles} //= (\"$pctDir/cdl/topCellName.cdl\", \"$pctDir/lef/topCellName.lef\", \"$pctDir/model/verilog/topCellName.v\", \"$pctDir/model/timing/lib/topCellName.lib\");\nprint Dumper \\%viewPaths;\n</code></pre>\n\n<p>output is:</p>\n\n<pre><code>$VAR1 = {\n          'cdl' =&gt; undef,\n          'verilog' =&gt; undef,\n          'lib' =&gt; './model/timing/lib/topCellName.lib',\n          'lef' =&gt; undef\n        };\n</code></pre>\n\n<p>Expected output:</p>\n\n<pre><code>$VAR1 = {\n          'cdl' =&gt; './cdl/topCellName.cdl',\n          'verilog' =&gt; './model/verilog/topCellName.v',\n          'lib' =&gt; './model/timing/lib/topCellName.lib',\n          'lef' =&gt; './lef/topCellName.lef'\n        };\n</code></pre>\n"}, {"tags": ["bash", "perl"], "answers": [{"tags": [], "owner": {"reputation": 1750, "user_id": 873757, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/4948c4bd86deb7f50a6ba28e73505e31?s=128&d=identicon&r=PG", "display_name": "user001", "link": "https://stackoverflow.com/users/873757/user001"}, "is_accepted": false, "score": 1, "last_activity_date": 1483952616, "creation_date": 1483952616, "answer_id": 41544341, "question_id": 41544224, "link": "https://stackoverflow.com/questions/41544224/supplying-command-options-to-system-binaries-whose-paths-are-stored-in-variables/41544341#41544341", "title": "supplying command options to system binaries whose paths are stored in variables in perl", "body": "<p>OK, the answer was simply that <code>which</code> appends a newline to the path of the binary, which must be removed:</p>\n\n<pre><code>$ perl -e 'my $ls = `which ls`; chomp($ls); system(\"$ls\", \"-l\");'\n</code></pre>\n\n<p>Rather than delete the post, I'll leave it here for the benefit of future users who may encounter the same problem.</p>\n\n<p>I would still be interested to know why quotes are required around \"/bin/ls\" and not \"ls\", as mentioned at the beginning of the question.</p>\n"}, {"comments": [{"owner": {"reputation": 1750, "user_id": 873757, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/4948c4bd86deb7f50a6ba28e73505e31?s=128&d=identicon&r=PG", "display_name": "user001", "link": "https://stackoverflow.com/users/873757/user001"}, "edited": false, "score": 0, "creation_date": 1483953589, "post_id": 41544538, "comment_id": 70293703, "body": "Thanks, that makes sense."}, {"owner": {"reputation": 1750, "user_id": 873757, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/4948c4bd86deb7f50a6ba28e73505e31?s=128&d=identicon&r=PG", "display_name": "user001", "link": "https://stackoverflow.com/users/873757/user001"}, "edited": false, "score": 0, "creation_date": 1483954023, "post_id": 41544538, "comment_id": 70293947, "body": "Thanks, I didn&#39;t know about the &#39;-w&#39; option for <code>use warnings;</code> for one-liners. I always include it in scripts though."}, {"owner": {"reputation": 37256, "user_id": 736308, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/o5EqQ.jpg?s=128&g=1", "display_name": "cdarke", "link": "https://stackoverflow.com/users/736308/cdarke"}, "reply_to_user": {"reputation": 1750, "user_id": 873757, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/4948c4bd86deb7f50a6ba28e73505e31?s=128&d=identicon&r=PG", "display_name": "user001", "link": "https://stackoverflow.com/users/873757/user001"}, "edited": false, "score": 0, "creation_date": 1483954272, "post_id": 41544538, "comment_id": 70294087, "body": "The <code>-w</code> is the old way of switching-on warnings, but still supported.  <code>use warnings;</code> (introduced at 5.6) is preferred in a script because it is controllable and is more explicit."}], "tags": [], "owner": {"reputation": 37256, "user_id": 736308, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/o5EqQ.jpg?s=128&g=1", "display_name": "cdarke", "link": "https://stackoverflow.com/users/736308/cdarke"}, "is_accepted": false, "score": 1, "last_activity_date": 1483953811, "last_edit_date": 1483953811, "creation_date": 1483953456, "answer_id": 41544538, "question_id": 41544224, "link": "https://stackoverflow.com/questions/41544224/supplying-command-options-to-system-binaries-whose-paths-are-stored-in-variables/41544538#41544538", "title": "supplying command options to system binaries whose paths are stored in variables in perl", "body": "<p>The reason why quotes are required around:</p>\n\n<pre><code>perl -e 'system(/bin/ls);'\n</code></pre>\n\n<p>is because a bare <code>/</code> is seen as the start of a regular expression, and defaults to the <em>match-operator</em> (<code>m</code>).  As <a href=\"http://perldoc.co.uk/perlop.html\" rel=\"nofollow noreferrer\">perlop</a> says:</p>\n\n<p>m/PATTERN/msixpogc</p>\n\n<p>/PATTERN/msixpogc</p>\n\n<p><em>Searches a string for a pattern match, and in scalar context returns true if it succeeds, false if it fails. If no string is specified via the =~ or !~ operator, the $_ string is searched.</em></p>\n\n<p>But, I hear you ask, why didn't it throw a warning?  Because you don't have warnings set:</p>\n\n<pre><code>perl -we 'system(/bin/ls);'\nUse of uninitialized value $_ in pattern match (m//) at -e line 1.\n</code></pre>\n"}], "owner": {"reputation": 1750, "user_id": 873757, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/4948c4bd86deb7f50a6ba28e73505e31?s=128&d=identicon&r=PG", "display_name": "user001", "link": "https://stackoverflow.com/users/873757/user001"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 37, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1483953811, "creation_date": 1483952201, "question_id": 41544224, "link": "https://stackoverflow.com/questions/41544224/supplying-command-options-to-system-binaries-whose-paths-are-stored-in-variables", "title": "supplying command options to system binaries whose paths are stored in variables in perl", "body": "<p>I am having difficulty finding the correct syntax for executing system binaries via Perl.</p>\n\n<p>The following works as expected:</p>\n\n<pre><code>perl -e 'system(ls);'\n</code></pre>\n\n<p>The following does not work unless quotes are supplied around the binary's path:</p>\n\n<pre><code>perl -e 'system(/bin/ls);'\n</code></pre>\n\n<p>Given my understanding of the <a href=\"http://perldoc.perl.org/functions/system.html\" rel=\"nofollow noreferrer\">documentation</a>, in both cases, the argument to <code>system</code> is a single scalar without <a href=\"https://tiswww.case.edu/php/chet/bash/bashref.html#index-metacharacter\" rel=\"nofollow noreferrer\">shell metacharacters</a>, so the result should be the same. Moreover, since the perl command is enclosed by single quotes, shell interpolation can be ruled out as a problem.</p>\n\n<p>Options can be supplied to the command by various means, utilizing either its short name or the full path:</p>\n\n<pre><code>perl -e 'system(\"ls\", \"-l\");'\nperl -e 'my @args = (\"ls\",\"-l\"); system(@args);'\nperl -e 'my @args = (\"/bin/ls\",\"-l\"); system(@args);'\n</code></pre>\n\n<p>However, options fail if the binary path is stored in a variable:</p>\n\n<pre><code>perl -e 'my $ls = `which ls`; system($ls, \"-l\");'\nperl -e 'my $ls = `which ls`; system(\"$ls\", \"-l\");'\nperl -e 'my $ls = `which ls`; my @args = ($ls,\"-l\"); system(@args);'\nperl -e 'my $ls = `which ls`; my @args = (\"$ls\",\"-l\"); system(@args);'\n</code></pre>\n\n<p>Storing the path of the binary in a variable is acceptable provided that options are omitted:</p>\n\n<pre><code>perl -e 'my $ls = `which ls`; system($ls);'\n</code></pre>\n\n<p>On the other hand, options can be used with a variable containing the name of a binary:</p>\n\n<pre><code>perl -e 'my $ls = \"ls\"; my @args = ($ls,\"-l\"); system(@args);'\n</code></pre>\n\n<p>As can be discerned, I have been trying to determine the syntax for storing the path of a binary in a variable, and then executing a system call to that binary with options. I would appreciate enlightenment on the correct syntax.</p>\n"}, {"tags": ["bash", "perl", "unix", "makefile"], "comments": [{"owner": {"reputation": 82430, "user_id": 17833, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ExIEf.png?s=128&g=1", "display_name": "Petesh", "link": "https://stackoverflow.com/users/17833/petesh"}, "edited": false, "score": 0, "creation_date": 1483951741, "post_id": 41544069, "comment_id": 70292733, "body": "And how does the perl script invoke make?"}, {"owner": {"reputation": 2119, "user_id": 3196458, "user_type": "registered", "profile_image": "https://graph.facebook.com/100005547696898/picture?type=large", "display_name": "blackpen", "link": "https://stackoverflow.com/users/3196458/blackpen"}, "edited": false, "score": 2, "creation_date": 1483951960, "post_id": 41544069, "comment_id": 70292820, "body": "Are you trying to use perl script to set an environment variable and use it later? A perl script runs in a sub-shell; it doesn&#39;t carry it&#39;s value into parent shell."}, {"owner": {"reputation": 43, "user_id": 4082747, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/4da281ab31b4b74371b7af8099a0b093?s=128&d=identicon&r=PG&f=1", "display_name": "Vivek Patel", "link": "https://stackoverflow.com/users/4082747/vivek-patel"}, "edited": false, "score": 0, "creation_date": 1483952010, "post_id": 41544069, "comment_id": 70292840, "body": "perl script isn&#39;t invoking make. after execution of perl script .. make is recursively called so that env. variable update is visible to make"}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 1, "creation_date": 1483952074, "post_id": 41544069, "comment_id": 70292888, "body": "Changes in %ENV in Perl don&#39;t propagate to the parent process. You can <code>print</code> the value and capture it to a make variable, though."}, {"owner": {"reputation": 43, "user_id": 4082747, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/4da281ab31b4b74371b7af8099a0b093?s=128&d=identicon&r=PG&f=1", "display_name": "Vivek Patel", "link": "https://stackoverflow.com/users/4082747/vivek-patel"}, "reply_to_user": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1483952260, "post_id": 41544069, "comment_id": 70292970, "body": "@choroba : Okay .. so how can variable value available to makefile ?"}, {"owner": {"reputation": 1248, "user_id": 1542307, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BXRAC.jpg?s=128&g=1", "display_name": "Karan Shah", "link": "https://stackoverflow.com/users/1542307/karan-shah"}, "edited": false, "score": 0, "creation_date": 1483952422, "post_id": 41544069, "comment_id": 70293056, "body": "You have to export the variable globally to the OS level and fetch the same in the makefile"}, {"owner": {"reputation": 43, "user_id": 4082747, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/4da281ab31b4b74371b7af8099a0b093?s=128&d=identicon&r=PG&f=1", "display_name": "Vivek Patel", "link": "https://stackoverflow.com/users/4082747/vivek-patel"}, "reply_to_user": {"reputation": 1248, "user_id": 1542307, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BXRAC.jpg?s=128&g=1", "display_name": "Karan Shah", "link": "https://stackoverflow.com/users/1542307/karan-shah"}, "edited": false, "score": 0, "creation_date": 1483953039, "post_id": 41544069, "comment_id": 70293388, "body": "@Karan Shah: Could you guide me how it can be done in this case .. you mean to say using export inside system in perl"}, {"owner": {"reputation": 1248, "user_id": 1542307, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BXRAC.jpg?s=128&g=1", "display_name": "Karan Shah", "link": "https://stackoverflow.com/users/1542307/karan-shah"}, "edited": false, "score": 0, "creation_date": 1483954797, "post_id": 41544069, "comment_id": 70294443, "body": "Added it as an answer, please check if it works"}, {"owner": {"reputation": 37256, "user_id": 736308, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/o5EqQ.jpg?s=128&g=1", "display_name": "cdarke", "link": "https://stackoverflow.com/users/736308/cdarke"}, "edited": false, "score": 0, "creation_date": 1483956761, "post_id": 41544069, "comment_id": 70295631, "body": "You are misunderstanding how environment variables are used.  The environment block is <i>copied</i> from parent to child.  It is not shared, there is only an export, there is no &quot;import&quot;.  You have to set the variable in the <b>parent</b>, setting it in a child will only affect the child and its children."}], "answers": [{"tags": [], "owner": {"reputation": 2092, "user_id": 2678168, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd5a048ca5e77e9683d0197b5455b3a9?s=128&d=identicon&r=PG&f=1", "display_name": "Georg Mavridis", "link": "https://stackoverflow.com/users/2678168/georg-mavridis"}, "is_accepted": false, "score": 0, "last_activity_date": 1483953241, "creation_date": 1483953241, "answer_id": 41544486, "question_id": 41544069, "link": "https://stackoverflow.com/questions/41544069/setting-env-variable-from-perl-and-using-in-makefile/41544486#41544486", "title": "Setting env variable from Perl and using in Makefile", "body": "<pre><code>VIP_LIST=$(perl my.pl)\n</code></pre>\n\n<p>Would save the output of the script in the variable of the parent shell.</p>\n\n<p>HTH\nGeorg</p>\n"}, {"comments": [{"owner": {"reputation": 2119, "user_id": 3196458, "user_type": "registered", "profile_image": "https://graph.facebook.com/100005547696898/picture?type=large", "display_name": "blackpen", "link": "https://stackoverflow.com/users/3196458/blackpen"}, "edited": false, "score": 0, "creation_date": 1483954674, "post_id": 41544570, "comment_id": 70294342, "body": "Are you trying to run the perl interpreter in the current shell (by prefixing the shell script with a dot)?"}, {"owner": {"reputation": 1248, "user_id": 1542307, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BXRAC.jpg?s=128&g=1", "display_name": "Karan Shah", "link": "https://stackoverflow.com/users/1542307/karan-shah"}, "reply_to_user": {"reputation": 2119, "user_id": 3196458, "user_type": "registered", "profile_image": "https://graph.facebook.com/100005547696898/picture?type=large", "display_name": "blackpen", "link": "https://stackoverflow.com/users/3196458/blackpen"}, "edited": false, "score": 0, "creation_date": 1483954745, "post_id": 41544570, "comment_id": 70294396, "body": "yes, I am. This will export it in the same process."}, {"owner": {"reputation": 2119, "user_id": 3196458, "user_type": "registered", "profile_image": "https://graph.facebook.com/100005547696898/picture?type=large", "display_name": "blackpen", "link": "https://stackoverflow.com/users/3196458/blackpen"}, "edited": false, "score": 0, "creation_date": 1483958032, "post_id": 41544570, "comment_id": 70296491, "body": "@KaranShah, I am not the downvoter, but I guess it was probably downvoted because your intent is not clear."}], "tags": [], "owner": {"reputation": 1248, "user_id": 1542307, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BXRAC.jpg?s=128&g=1", "display_name": "Karan Shah", "link": "https://stackoverflow.com/users/1542307/karan-shah"}, "is_accepted": false, "score": 0, "last_activity_date": 1483953560, "creation_date": 1483953560, "answer_id": 41544570, "question_id": 41544069, "link": "https://stackoverflow.com/questions/41544069/setting-env-variable-from-perl-and-using-in-makefile/41544570#41544570", "title": "Setting env variable from Perl and using in Makefile", "body": "<p>When you execute your Perl script, do it like $(./myperlscript.pl) on the prompt. What you need to do is </p>\n\n<pre><code>$ENV{VIP_LIST} = $vip_exists;\n</code></pre>\n\n<p>Drop the quotes</p>\n"}, {"comments": [{"owner": {"reputation": 43, "user_id": 4082747, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/4da281ab31b4b74371b7af8099a0b093?s=128&d=identicon&r=PG&f=1", "display_name": "Vivek Patel", "link": "https://stackoverflow.com/users/4082747/vivek-patel"}, "edited": false, "score": 0, "creation_date": 1483958711, "post_id": 41545962, "comment_id": 70296938, "body": "thanks but it&#39;s not i&#39;m looking for. I need env. variable to be updated inside makefile from perl script(which was called from makefile)"}, {"owner": {"reputation": 43, "user_id": 4082747, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/4da281ab31b4b74371b7af8099a0b093?s=128&d=identicon&r=PG&f=1", "display_name": "Vivek Patel", "link": "https://stackoverflow.com/users/4082747/vivek-patel"}, "edited": false, "score": 0, "creation_date": 1484202069, "post_id": 41545962, "comment_id": 70414586, "body": "I have thought that make sense modification in some(x) file then it will run perl script to update env. variable then make uses updated variable but now it seems i have to read (X file) in make and update variable. Do you have any better suggestion ? thanks"}], "tags": [], "owner": {"reputation": 2119, "user_id": 3196458, "user_type": "registered", "profile_image": "https://graph.facebook.com/100005547696898/picture?type=large", "display_name": "blackpen", "link": "https://stackoverflow.com/users/3196458/blackpen"}, "is_accepted": false, "score": 1, "last_activity_date": 1483961657, "last_edit_date": 1483961657, "creation_date": 1483957878, "answer_id": 41545962, "question_id": 41544069, "link": "https://stackoverflow.com/questions/41544069/setting-env-variable-from-perl-and-using-in-makefile/41545962#41545962", "title": "Setting env variable from Perl and using in Makefile", "body": "<p>I don't think there is any elegant way to update environment of <strong>make</strong> by running any external command (like perl script) from it. Because even a direct way wouldn't work.</p>\n\n<pre><code>/home/user&gt; cat makefile\nNUM=100\n\nfirst:\n        NUM=200\n        echo $(NUM)    \nsecond:\n        NUM=200; echo $(NUM)    \nthird:\n        NUM=200; \\\n        echo $(NUM);\n\n/home/user&gt; make first\nNUM=200\necho 100\n100\n\n/home/user&gt; make second\nNUM=200; echo 100\n100\n\n/home/user&gt; make third\nNUM=200; \\\necho 100;\n100\n</code></pre>\n\n<hr>\n\n<p>If you are only looking for a perl script to modify it's parent's environment, something like this works (in a very limited way):</p>\n\n<pre><code>/home/user&gt; cat change_env.pl\n#!/usr/bin/perl -w\nprint \"NUM=100\\n\";\n\n/home/user&gt; NUM=1\n/home/user&gt; echo $NUM\n1\n/home/user&gt; eval $(./change_env.pl)\n/home/user&gt; echo $NUM\n100\n</code></pre>\n\n<hr>\n\n<p>Coming to original your question, .. can't you call make after making the changes to your shell environment?</p>\n"}], "owner": {"reputation": 43, "user_id": 4082747, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/4da281ab31b4b74371b7af8099a0b093?s=128&d=identicon&r=PG&f=1", "display_name": "Vivek Patel", "link": "https://stackoverflow.com/users/4082747/vivek-patel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 334, "favorite_count": 0, "answer_count": 3, "score": 1, "last_activity_date": 1483961657, "creation_date": 1483951573, "last_edit_date": 1483952030, "question_id": 41544069, "link": "https://stackoverflow.com/questions/41544069/setting-env-variable-from-perl-and-using-in-makefile", "title": "Setting env variable from Perl and using in Makefile", "body": "<p>I'm trying to set env variable from Perl script and using it inside Makefile doesn't work. While dumping ENV hash tree shows variable successfully set.    </p>\n\n<p>Makefile code</p>\n\n<pre><code>list_gen: $(TESTBENCH_PATH)/blocks/soc_tb/global/default \n    perl list_gen.pl; \\\n    $(MAKE) $(RECITAL_PATH)/catalog/catalog.xml \n\n    @ touch $@\n\n\n# Generates catalog.xml from .xmls of VIPs\n$(RECITAL_PATH)/catalog/catalog.xml: $(VIP_XMLs) \n    @echo \"#  generating catalog.xml \" ;                                \\\n    echo \"vip list is $(VIP_LIST)\" ;                                \\\n    rpfCatalog --add $(VIP_XMLs);                       \\\n    for vip in $(VIP_LIST);                                         \\\n    do                                  \\\n       rpfCatalog --add $$TESTBENCH_PATH/common_blocks/$$vip/global/default.xml; \\\n    done\n</code></pre>\n\n<p>Perl Script code</p>\n\n<pre><code>$ENV{\"VIP_LIST\"} = $vip_exists;\n</code></pre>\n"}, {"tags": ["perl", "unix", "sed", "text-processing"], "comments": [{"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1483950397, "post_id": 41543699, "comment_id": 70292073, "body": "<a href=\"https://www.gnu.org/software/sed/manual/sed.html#BRE-syntax\" rel=\"nofollow noreferrer\">gnu.org/software/sed/manual/sed.html#BRE-syntax</a>"}], "answers": [{"comments": [{"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1483963573, "post_id": 41543887, "comment_id": 70300049, "body": "Think the OP was after +2 days."}], "tags": [], "owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "is_accepted": true, "score": 0, "last_activity_date": 1483968243, "last_edit_date": 1483968243, "creation_date": 1483950773, "answer_id": 41543887, "question_id": 41543699, "link": "https://stackoverflow.com/questions/41543699/replace-date-in-a-txt-file-having-xml/41543887#41543887", "title": "Replace date in a txt file having xml", "body": "<p>Here's a perl version:</p>\n\n<pre><code>perl -MPOSIX=strftime -i -pe 's{&lt;Date&gt;.*?&lt;/Date&gt;}{\"&lt;Date&gt;\" . strftime(\"%m/%d/%Y\", localtime(time + 2 * 24 * 60 * 60)) . \"&lt;/Date&gt;\"}e' avltest.xml\n</code></pre>\n\n<p>I removed the redundant backslashes before <code>&lt;</code> and <code>&gt;</code>, added the missing <code>/</code> in <code>&lt;/Date&gt;</code>, and fixed the <code>*</code> part.</p>\n"}, {"tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": false, "score": 0, "last_activity_date": 1483953470, "last_edit_date": 1495540373, "creation_date": 1483953470, "answer_id": 41544546, "question_id": 41543699, "link": "https://stackoverflow.com/questions/41543699/replace-date-in-a-txt-file-having-xml/41544546#41544546", "title": "Replace date in a txt file having xml", "body": "<p>Don't use regular expressions to modify XML. <a href=\"https://stackoverflow.com/questions/1732348/regex-match-open-tags-except-xhtml-self-contained-tags\">It's dirty, hacky, brittle and unnecessary</a>:</p>\n\n<pre><code>#!/usr/bin/perl\nuse warnings;\nuse strict;\n\nuse XML::Twig;\nuse Time::Piece;\n\n#load your file\nmy $twig = XML::Twig-&gt;new-&gt;parsefile('avltest.xml');\n\n#iterate all &lt;Date&gt; elements. \nforeach my $date_elt ( $twig-&gt;get_xpath('//Date') ) {\n   my $date = localtime;\n   #increment it by two days. \n   $date += 2 * 60 * 60 * 24; #two days. \n   #replace it. \n   $date_elt -&gt; set_text($date -&gt; strftime(\"%m/%d/%Y\"));       \n}\n\n#print XML to STDOUT. \n$twig -&gt; set_pretty_print('indented_a');\n$twig -&gt; print;\n</code></pre>\n\n<p>This will do what you want as described, and not be tripped up by 'end of year/end of month'. </p>\n\n<p>You can use <code>parsefile_inplace</code> in XML twig if you prefer - that requires a slightly different code setup. </p>\n"}], "owner": {"reputation": 5970, "user_id": 2618323, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/3Czph.jpg?s=128&g=1", "display_name": "Developer", "link": "https://stackoverflow.com/users/2618323/developer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 54, "favorite_count": 0, "accepted_answer_id": 41543887, "answer_count": 2, "score": -1, "last_activity_date": 1483968243, "creation_date": 1483950023, "last_edit_date": 1483950433, "question_id": 41543699, "link": "https://stackoverflow.com/questions/41543699/replace-date-in-a-txt-file-having-xml", "title": "Replace date in a txt file having xml", "body": "<p>I have a text file in which i have a xml data. Now i want to replace the date from current date plus 2 days in dd/mm/yyyy format . I tried it will sed command in Unix but i am unable to do that .Below command i tried to change the date .But it is not changing the text.</p>\n\n<pre><code>sed -i 's/\\&lt;Date\\&gt;*\\&lt;Date\\&gt;/\\&lt;Date\\&gt;date +\"%m/%d/%y\"&lt;Date\\&gt;/g' avltest.xml\n\n&lt;Args&gt;\n     &lt;Date&gt;01/10/2017&lt;/Date&gt;\n&lt;\\Args&gt;\n</code></pre>\n\n<p>In the <em>Date</em> field i want to change the date whenever i run my command or i can use that command from a script.</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 5455, "user_id": 3961170, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/PtFol.jpg?s=128&g=1", "display_name": "mkHun", "link": "https://stackoverflow.com/users/3961170/mkhun"}, "edited": false, "score": 0, "creation_date": 1483952867, "post_id": 41543002, "comment_id": 70293292, "body": "<a href=\"http://stackoverflow.com/questions/36568162/how-do-i-read-the-last-line-of-a-file-with-a-bare-perl-on-windows/36570096\">Reading last line</a>"}], "answers": [{"tags": [], "owner": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "is_accepted": false, "score": 7, "last_activity_date": 1483952287, "last_edit_date": 1483952287, "creation_date": 1483951409, "answer_id": 41544026, "question_id": 41543002, "link": "https://stackoverflow.com/questions/41543002/file-parsing-in-perl-reading-first-and-last-lines/41544026#41544026", "title": "File parsing in perl reading first and last lines", "body": "<p>If you want to read the first and last line of a potentially very large log file, you shouldn't slurp it all into an array as it may consume a lot of memory. Instead, just read the first and last lines.</p>\n\n<p>You can read the first line easy enough.</p>\n\n<pre><code> use v5.10;\n use strict;\n use warnings;\n use autodie;\n\n open my $fh, $logfile;\n my $first = &lt;$fh&gt;;\n</code></pre>\n\n<p>You can read the last line by using <code>seek</code> to jump to the end of the file and then reading backwards in chunks with <code>read</code> until you get a whole line. That can get complicated. Fortunately there's <a href=\"https://metacpan.org/pod/File::ReadBackwards\" rel=\"noreferrer\">File::ReadBackwards</a> to do that for you.</p>\n\n<pre><code>use Carp;\nuse File::ReadBackwards;\n\nmy $backwards = File::ReadBackwards-&gt;new( $logfile )\n    or croak \"Can't open $logfile: $!\";\nmy $last = $backwards-&gt;readline;\n</code></pre>\n\n<p>Note that if there's any stray newlines at the end of the file those will be the last line, so you might want to continue reading until you get what you're looking for.</p>\n\n<pre><code># Read lines backwards until we get something that\n# contains non-whitespace.\nwhile( my $last = $backwards-&gt;readline ) {\n    last if $last =~ /\\S+/;\n}\n</code></pre>\n\n<hr>\n\n<p>Here's a simpler, but slower (for large files) way to get the first and last lines. Read the first line as before, then read each line but only keep the last one.</p>\n\n<pre><code>my $last;\nwhile( my $line = &lt;$fh&gt; ) { $last = $line }\n</code></pre>\n\n<p>It still has to read the whole file, but it only keeps the last one in memory.</p>\n\n<hr>\n\n<p>Once you have that, you can parse the line and turn it into a <a href=\"https://metacpan.org/pod/Time::Piece\" rel=\"noreferrer\">Time::Piece</a> object to work with it easier.</p>\n\n<pre><code># === Verbose logging started: 1/3/2017  17:41:55 ... ===\n# === Verbose logging stopped: 1/3/2017  17:49:17 ===\nsub log_time {\n    my $line = shift;\n\n    # This captures the 1/3/2017  17:49:17 part\n    my($datetime) = $line =~\n        /^=== Verbose logging (?:started|stopped):\\s*(\\d+/\\d+/\\d+\\s+\\d+:\\d+:\\d+)/;\n\n    # Parse it into a Time::Piece object.\n    return Time::Piece-&gt;strptime($datetime, \"%m/%d/%Y %H:%M:%S\");\n}\n</code></pre>\n\n<p><code>strptime</code> is a function used by many languages to parse dates (string parse time). <code>strftime</code> (string format time) is used to format dates. They share the same mini language. Have a look at the <a href=\"https://linux.die.net/man/3/strftime\" rel=\"noreferrer\">strftime</a> docs to understand what's going on there.</p>\n\n<p>Once you have that, <a href=\"https://metacpan.org/pod/Time::Piece#Date-Calculations\" rel=\"noreferrer\">you can get the difference in seconds by subtracting them</a>.</p>\n\n<pre><code>my $start = log_time($first);\nmy $end   = log_time($last);\n\nsay \"Seconds elapsed: \".$end - $start;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "edited": false, "score": 1, "creation_date": 1483952343, "post_id": 41544079, "comment_id": 70293009, "body": "I believe <code>tail -1</code> will read from the end of the file, so it avoids reading the whole file. Don&#39;t use prototypes; they&#39;re not function signatures, they&#39;re for very specialized purposes. If you want function signatures, use something like <a href=\"http://metacpan.org/pod/Method::Signatures\" rel=\"nofollow noreferrer\">Method::Signatures</a> or <code>use feature &#39;signatures&#39;</code> in newer Perls. Finally, there&#39;s no need to write <code>command()</code>, <a href=\"http://perldoc.perl.org/perlop.html#Quote-Like-Operators\" rel=\"nofollow noreferrer\">backticks</a> will do that for you. <code>my $first = `head -1 $ARGV[0]` </code>"}, {"owner": {"reputation": 6351, "user_id": 3498962, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GC9tW.jpg?s=128&g=1", "display_name": "Essex Boy", "link": "https://stackoverflow.com/users/3498962/essex-boy"}, "reply_to_user": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "edited": false, "score": 1, "creation_date": 1483953288, "post_id": 41544079, "comment_id": 70293530, "body": "@Schwern thanks, I think I&#39;ve stood still for 15 years with this.  I&#39;ve updated my answer with thanks."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1483973395, "post_id": 41544079, "comment_id": 70306228, "body": "Why do you have <code>use English</code>? You are not actually using any variable names."}, {"owner": {"reputation": 6351, "user_id": 3498962, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GC9tW.jpg?s=128&g=1", "display_name": "Essex Boy", "link": "https://stackoverflow.com/users/3498962/essex-boy"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1483973649, "post_id": 41544079, "comment_id": 70306405, "body": "@simbabque habit, I agree it&#39;s not necessary."}], "tags": [], "owner": {"reputation": 6351, "user_id": 3498962, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GC9tW.jpg?s=128&g=1", "display_name": "Essex Boy", "link": "https://stackoverflow.com/users/3498962/essex-boy"}, "is_accepted": false, "score": 2, "last_activity_date": 1483953225, "last_edit_date": 1483953225, "creation_date": 1483951602, "answer_id": 41544079, "question_id": 41543002, "link": "https://stackoverflow.com/questions/41543002/file-parsing-in-perl-reading-first-and-last-lines/41544079#41544079", "title": "File parsing in perl reading first and last lines", "body": "<p>I have a slightly less sophisticated approach to Schwern which is to use the Unix commands:</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse English;\n\nmy $first=`head -1 $ARGV[0]`;\nmy $last=`tail -1 $ARGV[0]`;\n\nprint \"$first\\n\";\nprint \"$last\\n\";\n</code></pre>\n"}], "owner": {"reputation": 89, "user_id": 2253876, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/333c9a40a324569228b11bfbad2f2183?s=128&d=identicon&r=PG", "display_name": "user2253876", "link": "https://stackoverflow.com/users/2253876/user2253876"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 981, "favorite_count": 1, "answer_count": 2, "score": 2, "last_activity_date": 1483953225, "creation_date": 1483947103, "last_edit_date": 1483947575, "question_id": 41543002, "link": "https://stackoverflow.com/questions/41543002/file-parsing-in-perl-reading-first-and-last-lines", "title": "File parsing in perl reading first and last lines", "body": "<p>I have a file with first line </p>\n\n<pre class=\"lang-none prettyprint-override\"><code>=== Verbose logging started: 1/3/2017  17:41:55  Build type: SHIP UNICODE 5.00.7601.00  Calling process: C:\\Windows\\SysWOW64\\msiexec.exe ===\n</code></pre>\n\n<p>and last line</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>=== Verbose logging stopped: 1/3/2017  17:49:17 ===\n</code></pre>\n\n<p>I am interested in time fields in those lines (<code>17:41:55</code> and <code>17:49:17</code>), want to find the difference in time from start to stop.</p>\n\n<p>I tried reading the file in an array and fetch first and last lines</p>\n\n<pre><code>my $last = pop (@array);\nmy $first = shift (@array);\n</code></pre>\n\n<p>But getting to time field in array is becoming difficult.</p>\n\n<p>Could you please suggest any alternative way?</p>\n"}, {"tags": ["perl", "do-while"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1483968696, "post_id": 41538483, "comment_id": 70303199, "body": "Welcome to Stack Overflow. Please take the <a href=\"https://stackoverflow.com/tour\">tour</a> and read [how to ask]. Your first question was well-written and well-received. Now that you have a good answer that obviously helped you, the next step is to mark it as <i>accepted</i> so visitors can later see that it solved the problem."}], "answers": [{"comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 2, "creation_date": 1483939245, "post_id": 41538581, "comment_id": 70287827, "body": "Since this involves user input it may be good to mention possible trailing spaces as well."}], "tags": [], "owner": {"reputation": 11096, "user_id": 2749717, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46af1ef54856d737d52b7667afd240ee?s=128&d=identicon&r=PG&f=1", "display_name": "bipll", "link": "https://stackoverflow.com/users/2749717/bipll"}, "is_accepted": false, "score": 13, "last_activity_date": 1483916264, "last_edit_date": 1483916264, "creation_date": 1483914481, "answer_id": 41538581, "question_id": 41538483, "link": "https://stackoverflow.com/questions/41538483/ne-is-not-working-in-do-while-loop-whereas-works/41538581#41538581", "title": "&#39;ne&#39; is not working in do-while loop, whereas &#39;!=&#39; works", "body": "<p>Perl's <code>ne</code> is the  <em>string</em> not-equal operator, so <code>$guess</code> and <code>12</code> are treated as strings.</p>\n\n<p>A string obtained via <code>&lt;&gt;</code> contains a newline character at the end, so it is not equal to the string <code>'12'</code>.</p>\n\n<p><code>!=</code> is the <em>numeric</em> not-equal operator, so both operands are treated as numbers. In this case Perl will ignore any trailing non-numeric characters when making the conversion, so the newline is ignored and the string <code>12&lt;newline&gt;</code> is treated as numeric <code>12</code>.</p>\n\n<p>Were you to <code>chomp</code> the obtained value before comparison, the <code>ne</code> operator would also work.</p>\n"}], "owner": {"reputation": 37, "user_id": 5421260, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51a4e129fcf28907dfd256c1d5d00f52?s=128&d=identicon&r=PG&f=1", "display_name": "Nag", "link": "https://stackoverflow.com/users/5421260/nag"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 217, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1483922901, "creation_date": 1483913759, "last_edit_date": 1483922901, "question_id": 41538483, "link": "https://stackoverflow.com/questions/41538483/ne-is-not-working-in-do-while-loop-whereas-works", "title": "&#39;ne&#39; is not working in do-while loop, whereas &#39;!=&#39; works", "body": "<p>I'm not sure what mistake I'm making, but I just changed <code>ne</code> to <code>!=</code> and it worked.</p>\n\n<p>This is a simple program to let the user guess a number until they hit a target number.</p>\n\n<pre><code>#!/usr/bin/perl\n\nmy $guess = 1;\n\ndo {\n    $guess = &lt;STDIN&gt;;\n} while ( $guess != 12 ) ; # it doesn't work if i replace != with ne\n\nsay \"you guessed \", $guess;\n</code></pre>\n"}, {"tags": ["perl", "parsing", "grep", "string-matching"], "answers": [{"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1483964632, "post_id": 41538460, "comment_id": 70300710, "body": "<code>.*?</code> is a fragile construct. There&#39;s no problems in your particular pattern, but I like to avoid it whenever possible. You could also use <code>grep -Po &#39;STRING1:\\K[^\\t]*(?=\\t)&#39; file</code> or just <code>grep -Po &#39;STRING1:\\K[^\\t]*&#39; file</code>"}], "tags": [], "owner": {"reputation": 68617, "user_id": 3776858, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/juunm.png?s=128&g=1", "display_name": "Cyrus", "link": "https://stackoverflow.com/users/3776858/cyrus"}, "is_accepted": true, "score": 1, "last_activity_date": 1483954917, "last_edit_date": 1495541240, "creation_date": 1483913501, "answer_id": 41538460, "question_id": 41538317, "link": "https://stackoverflow.com/questions/41538317/search-for-string-in-text-file-and-print-line-until-next-tab-t/41538460#41538460", "title": "Search for string in text file and print line until next tab \\t", "body": "<p>With GNU grep:</p>\n\n<pre><code>grep -Po 'STRING1:\\K.*?(?=\\t)' file\n</code></pre>\n\n<p>Output:</p>\n\n<pre>\nIwanttokeepthis\nandthis\n</pre>\n\n<p>See: <a href=\"https://stackoverflow.com/a/22944075/3776858\">The Stack Overflow Regular Expressions FAQ</a></p>\n"}, {"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 2, "creation_date": 1483932417, "post_id": 41538538, "comment_id": 70286165, "body": "Simpler: <code>perl -nle&#39;print for &#47;STRING1:([^\\t]*)\\t&#47;g&#39;</code>, or just <code>perl -nle&#39;print for &#47;STRING1:([^\\t]*)&#47;g&#39;</code>"}], "tags": [], "owner": {"reputation": 79972, "user_id": 298607, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/DVW9g.jpg?s=128&g=1", "display_name": "dawg", "link": "https://stackoverflow.com/users/298607/dawg"}, "is_accepted": false, "score": 5, "last_activity_date": 1483938839, "last_edit_date": 1483938839, "creation_date": 1483914191, "answer_id": 41538538, "question_id": 41538317, "link": "https://stackoverflow.com/questions/41538317/search-for-string-in-text-file-and-print-line-until-next-tab-t/41538538#41538538", "title": "Search for string in text file and print line until next tab \\t", "body": "<p>With Perl:</p>\n\n<pre><code>$ echo $'kjdafhldkhlfak\\tSTRING1:Iwanttokeepthis\\tfadfasdafldafh\\tSTRING1:andthis\\tafsdkfasldh' &gt; /tmp/file\nperl -lne 'while (/STRING1:([^\\t]+)\\t/g) {print $1}' /tmp/file\nIwanttokeepthis\nandthis\n</code></pre>\n\n<p>Or, as stated in comments:</p>\n\n<pre><code>$ perl -nle'print for /STRING1:([^\\t]*)\\t/g' /tmp/file\nIwanttokeepthis\nandthis\n</code></pre>\n"}], "owner": {"reputation": 12258, "user_id": 4596596, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/b00c839c9e28eb73aeb299bf3ef69a76?s=128&d=identicon&r=PG&f=1", "display_name": "ShanZhengYang", "link": "https://stackoverflow.com/users/4596596/shanzhengyang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 392, "favorite_count": 0, "accepted_answer_id": 41538460, "answer_count": 2, "score": 0, "last_activity_date": 1483954917, "creation_date": 1483912438, "question_id": 41538317, "link": "https://stackoverflow.com/questions/41538317/search-for-string-in-text-file-and-print-line-until-next-tab-t", "title": "Search for string in text file and print line until next tab \\t", "body": "<p>I have a fairly complex text file <code>file1.txt</code> that hasn't been munged properly. The file is tab-delimited however, i.e. each string is separated by <code>\\t</code>. </p>\n\n<p>I would like to write a script/use a Unix command that parses this entire file for a certain string <code>string1:</code> which will print the line after the colon until stopping at <code>\\t</code>. </p>\n\n<p>The text file looks like this: </p>\n\n<pre><code>...kjdafhldkhlfak\\tSTRING1:Iwanttokeepthis\\tfadfasdafldafh\\tSTRING1:andthis\\tafsdkfasldh....\n</code></pre>\n\n<p>So the <code>grep</code> like function outputs</p>\n\n<pre><code>Iwanttokeepthis\nandthis\n</code></pre>\n\n<p>In Perl, I know how to print a string if it occurs with </p>\n\n<pre><code>perl -wln -e 'print if /\\bSTRING1\\b/' file1.txt\n</code></pre>\n\n<p>How would one revise this to print the line between <code>STRING1:</code> and <code>\\t</code>? </p>\n"}, {"tags": ["sql", "postgresql", "perl"], "comments": [{"owner": {"reputation": 917, "user_id": 3014263, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rFh51.jpg?s=128&g=1", "display_name": "AbhiNickz", "link": "https://stackoverflow.com/users/3014263/abhinickz"}, "edited": false, "score": 0, "creation_date": 1483902013, "post_id": 41536203, "comment_id": 70278354, "body": "What are you doing with retrieved data?"}, {"owner": {"reputation": 71, "user_id": 7281752, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c0af94fb7196d4b7957e1512dd0d1b4a?s=128&d=identicon&r=PG&f=1", "display_name": "Lukas Nelson", "link": "https://stackoverflow.com/users/7281752/lukas-nelson"}, "reply_to_user": {"reputation": 917, "user_id": 3014263, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rFh51.jpg?s=128&g=1", "display_name": "AbhiNickz", "link": "https://stackoverflow.com/users/3014263/abhinickz"}, "edited": false, "score": 0, "creation_date": 1483902567, "post_id": 41536203, "comment_id": 70278558, "body": "I check the retrieved data to make sure its valid, if it is, it stays in the table. If it is invalid, it is marked as invalid with an update (as it may become valid at another time)."}, {"owner": {"reputation": 917, "user_id": 3014263, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rFh51.jpg?s=128&g=1", "display_name": "AbhiNickz", "link": "https://stackoverflow.com/users/3014263/abhinickz"}, "edited": false, "score": 0, "creation_date": 1483902773, "post_id": 41536203, "comment_id": 70278617, "body": "Then you retrieve it in a loop like this <code>while (my @row = $sth-&gt;fetchrow_array) {    # Do validation stuff on @row    # Mark If invalid }</code>, It will handle any number of rows in DB."}, {"owner": {"reputation": 917, "user_id": 3014263, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rFh51.jpg?s=128&g=1", "display_name": "AbhiNickz", "link": "https://stackoverflow.com/users/3014263/abhinickz"}, "edited": false, "score": 0, "creation_date": 1483903350, "post_id": 41536203, "comment_id": 70278835, "body": "Also look into this Perl monk discussion <a href=\"http://www.perlmonks.org/?node_id=273952\" rel=\"nofollow noreferrer\">Speeding up the DBI</a>, This will answer your concerns."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1483904469, "post_id": 41536203, "comment_id": 70279203, "body": "You appear to know about the <code>LIMIT</code> criterion. Combining that with <code>OFFSET</code> seems to do exactly what you want."}], "answers": [{"comments": [{"owner": {"reputation": 71, "user_id": 7281752, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c0af94fb7196d4b7957e1512dd0d1b4a?s=128&d=identicon&r=PG&f=1", "display_name": "Lukas Nelson", "link": "https://stackoverflow.com/users/7281752/lukas-nelson"}, "edited": false, "score": 0, "creation_date": 1483901721, "post_id": 41536336, "comment_id": 70278235, "body": "I do need all 10M records! I run a test against each one of them, so it takes a while. However, I do not need <i>every</i> column. So, my query would really need to look like this: &quot;SELECT col1, col2 FROM table&quot; along with all the entries. Now, couldn&#39;t I retrieve it in chunks using rows, by selecting the row count and storing that in the QUERY and then building it so that it will grab the results in row chunks until completed?"}], "tags": [], "owner": {"reputation": 71114, "user_id": 567435, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/zYyZz.jpg?s=128&g=1", "display_name": "Rahul", "link": "https://stackoverflow.com/users/567435/rahul"}, "is_accepted": false, "score": 0, "last_activity_date": 1483900579, "creation_date": 1483900579, "answer_id": 41536336, "question_id": 41536203, "link": "https://stackoverflow.com/questions/41536203/select-query-in-chunks-using-postgresql/41536336#41536336", "title": "SELECT query in chunks using PostgreSQL", "body": "<p>First of all do you really need all 10M records? don't think so and thus retrieve only the records for your work to be done. Second, do you really need all columns data? may not be and in such case select only the columns needed saying <code>select col1, col2, col3 ... from table</code> instead of doing a <code>select *...</code>. Cause, there is no point in getting all data and filling your server's memory.</p>\n\n<p>In worst case, if what you have said is what you actually in need then you have no other way than retrieving all records. You can probably implement paging to get data in batches rather than getting all of them at once.</p>\n"}, {"comments": [{"owner": {"reputation": 71, "user_id": 7281752, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c0af94fb7196d4b7957e1512dd0d1b4a?s=128&d=identicon&r=PG&f=1", "display_name": "Lukas Nelson", "link": "https://stackoverflow.com/users/7281752/lukas-nelson"}, "edited": false, "score": 0, "creation_date": 1483903436, "post_id": 41536686, "comment_id": 70278859, "body": "Is there no way to store the data in 100K chunks by selecting lets say row 0 to row 100K, then 101K to  200K, Then 201K to 300K, up to the end (10M)?"}, {"owner": {"reputation": 71, "user_id": 7281752, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c0af94fb7196d4b7957e1512dd0d1b4a?s=128&d=identicon&r=PG&f=1", "display_name": "Lukas Nelson", "link": "https://stackoverflow.com/users/7281752/lukas-nelson"}, "edited": false, "score": 0, "creation_date": 1483906272, "post_id": 41536686, "comment_id": 70279805, "body": "I suppose I can do what I&#39;m asking by creating an id sequence, and then just selecting chunks that way. I have no other ideas on how to do it."}], "tags": [], "owner": {"reputation": 230, "user_id": 7322508, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1aDE1.jpg?s=128&g=1", "display_name": "Duncan Carr", "link": "https://stackoverflow.com/users/7322508/duncan-carr"}, "is_accepted": false, "score": 0, "last_activity_date": 1483902630, "creation_date": 1483902630, "answer_id": 41536686, "question_id": 41536203, "link": "https://stackoverflow.com/questions/41536203/select-query-in-chunks-using-postgresql/41536686#41536686", "title": "SELECT query in chunks using PostgreSQL", "body": "<p>Pagination?</p>\n\n<p>Maybe this might be of use:\n<a href=\"https://www.postgresql.org/docs/8.3/static/queries-limit.html\" rel=\"nofollow noreferrer\">https://www.postgresql.org/docs/8.3/static/queries-limit.html</a></p>\n\n<p>Sorry if I have misunderstood.</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 12480844, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s7389.png?s=128&g=1", "display_name": "Pratama R", "link": "https://stackoverflow.com/users/12480844/pratama-r"}, "is_accepted": false, "score": 0, "last_activity_date": 1577200310, "last_edit_date": 1577200310, "creation_date": 1577199154, "answer_id": 59470457, "question_id": 41536203, "link": "https://stackoverflow.com/questions/41536203/select-query-in-chunks-using-postgresql/59470457#59470457", "title": "SELECT query in chunks using PostgreSQL", "body": "<p>Trick :</p>\n\n<p>you can use <strong>modulus</strong> for chunk data</p>\n\n<p><strong>e.g :</strong></p>\n\n<p>you want chunk data from 1000 record, chunk data 4 pieces using seq id\nyou just modulus seq id data 4, </p>\n\n<pre class=\"lang-sql prettyprint-override\"><code>SELECT *\n  FROM input_data_control b\n WHERE  b.bill_schedule_month = '201910' \n        AND mod(input_data_control_id, 4) = [1...4]\n</code></pre>\n"}], "owner": {"reputation": 71, "user_id": 7281752, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c0af94fb7196d4b7957e1512dd0d1b4a?s=128&d=identicon&r=PG&f=1", "display_name": "Lukas Nelson", "link": "https://stackoverflow.com/users/7281752/lukas-nelson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 2290, "favorite_count": 0, "answer_count": 3, "score": 2, "last_activity_date": 1577200310, "creation_date": 1483899842, "question_id": 41536203, "link": "https://stackoverflow.com/questions/41536203/select-query-in-chunks-using-postgresql", "title": "SELECT query in chunks using PostgreSQL", "body": "<p>I have a table with well over a million entries. I'm putting all this data into perl and storing it into a variable ($query = \"SELECT * FROM table1\". The problem now is that I'm using a lot of resources (mostly memory). Given my novice state with perl and postgres, How would I transform that query into chunks or parts?</p>\n\n<p>For example, </p>\n\n<pre><code>$query = \"SELECT * FROM table1 LIMIT 100000\";\n</code></pre>\n\n<p>Would put 100K results into $query. table1 is 10M records in size. How would I transform it so that only 100K results are stored into $query at a time until the query is finished?</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1483896177, "post_id": 41531162, "comment_id": 70276034, "body": "Note that the newest and best way to acquire an <code>import</code> method is to <i>import</i> it from <code>Exporter</code>. That is what you have done with the statement <code>use Exporter qw( import )</code>. The old-fashioned way is to use Perl&#39;s <i>inheritance</i> mechanism, and you have also implemented that with <code>@ISA = qw(Exporter)</code>. You shouldn&#39;t be using both methods at the same time, so <code>@ISA</code> should remain empty. It also probably better to use <code>our</code> instead of <code>use vars</code>, so you can define <code>@EXPORT_OK</code> using <code>our @EXPORT_OK = qw(@A %B, $C, foo)</code> and drop the <code>use vars</code> statement."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1483896260, "post_id": 41531162, "comment_id": 70276063, "body": "Finally, there is no need to load <code>Exporter</code> twice, so you can also remove <code>use Exporter ()</code>. These measures will substantially tidy your code."}], "answers": [{"tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": true, "score": 4, "last_activity_date": 1483895694, "last_edit_date": 1483895694, "creation_date": 1483868104, "answer_id": 41531292, "question_id": 41531162, "link": "https://stackoverflow.com/questions/41531162/how-to-import-all-variables-from-other-package/41531292#41531292", "title": "How to import all variables from other package?", "body": "<p><a href=\"https://en.wikipedia.org/wiki/Sigil_(computer_programming)\" rel=\"nofollow noreferrer\">The sigil</a> (<code>$</code>, <code>@</code> or <code>%</code>) needs to go first when using fully qualified variable names.</p>\n\n<pre><code>@Constants::A; \n%Constants::B; \n$Constants::C; \n</code></pre>\n\n<p>This is explained in the first parts of <a href=\"http://perldoc.perl.org/perldata.html\" rel=\"nofollow noreferrer\">perlsyn</a>.</p>\n\n<p>You might have seen that in other packages, like <a href=\"https://metacpan.org/pod/Data::Dumper\" rel=\"nofollow noreferrer\">Data::Dumper</a>, which allows you <a href=\"https://metacpan.org/pod/Data::Dumper#Configuration-Variables-or-Methods\" rel=\"nofollow noreferrer\">to configure it with its package variables</a>.</p>\n\n<pre><code>use Data::Dumper;\n$Data::Dumper::Indent = 0;\n</code></pre>\n\n<p>In your package you can use <code>$C</code>, which simply has an empty namespace, so the current one is assumed.</p>\n\n<pre><code>$           foo  # namespace is nothing\n$Constants::foo  # namespace is Constants::\n</code></pre>\n\n<p>It works with functions (what you're showing is not a method because there is no OOP involved, a method call would be <code>Constants-&gt;foo</code>) because those usually have no sigil. You could do <code>&amp;Constants::foo()</code>, which uses the <code>&amp;</code> to turn off any prototypes, but please don't do that unless you know what you're doing.</p>\n\n<p>There is one more sigil <code>*</code> for typeglobs. The same rules apply for it.</p>\n\n<hr>\n\n<p>The last sentence of your question is confusing.</p>\n\n<blockquote>\n  <p>[...] without calling chain them into qw(@A %B $C)?</p>\n</blockquote>\n\n<p>I think you mean <em>importing</em> them. That's what the Exporter lets you do when you put the names into <code>@EXPORT_OK</code>. The list of names you pass to <code>use Constants</code> tells Exporter which symbols it should install into your namespace.</p>\n\n<p>It then puts something like a pointer into your namespace that says your <code>$C</code> refers to the same thing as <code>$Constants::C</code>.</p>\n\n<p>When you declare package variables with <code>our</code> or <code>use vars</code> (let's consider them equivalent for the scope of this answer), they are always accessible from the outside. You just need to use the fully qualified package name. </p>\n\n<p>Importing them into your own namespace is just a convenience. You could do it yourself too.</p>\n\n<pre><code>use Constants (); # the empty list explicitly imports nothing\n*C = \\$Constants::C;\n</code></pre>\n\n<p>You just made your own import. But you probably don't want to do that.</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 9375217, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TlbMv.jpg?s=128&g=1", "display_name": "Tony O&#39;Quinn", "link": "https://stackoverflow.com/users/9375217/tony-oquinn"}, "is_accepted": false, "score": -2, "last_activity_date": 1518914125, "last_edit_date": 1518914125, "creation_date": 1518912440, "answer_id": 48847161, "question_id": 41531162, "link": "https://stackoverflow.com/questions/41531162/how-to-import-all-variables-from-other-package/48847161#48847161", "title": "How to import all variables from other package?", "body": "<pre><code>package Constants;\n\nuse strict;\n\nuse warnings;\n\nuse Exporter;\n\nour @ISA        = qw(Exporter);\n\nour @EXPORT     = qw(@A %B $C foo); # always exports these to main::\n\nour %B = (id  =&gt; 0, desc =&gt; \"AF :: BUILD SUCCEEDED\");\n\nour @A = (\n\n    \"Undefined symbols for architecture\",\n\n    \"BUILD FAILED\"\n\n);\n\nour  $C = \"blablabla\";\n\nsub foo(){}\n\n1;\n</code></pre>\n"}], "owner": {"reputation": 5023, "user_id": 3021358, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/xI263.png?s=128&g=1", "display_name": "snaggs", "link": "https://stackoverflow.com/users/3021358/snaggs"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 103, "favorite_count": 0, "accepted_answer_id": 41531292, "answer_count": 2, "score": 0, "last_activity_date": 1518914125, "creation_date": 1483867023, "question_id": 41531162, "link": "https://stackoverflow.com/questions/41531162/how-to-import-all-variables-from-other-package", "title": "How to import all variables from other package?", "body": "<p>I have package with globals:</p>\n\n<pre><code>package Constants;\n\nuse strict;\nuse warnings;    \n\nuse Exporter qw( import );\nuse Exporter ();\nuse vars qw(@ISA @EXPORT_OK);\n@ISA       = qw(Exporter);\n@EXPORT_OK = qw(@A %B, $C, foo);\n\nour %B = (id  =&gt; 0, desc =&gt; \"AF :: BUILD SUCCEEDED\");        \nour @A = (\n    \"Undefined symbols for architecture\",\n    \"BUILD FAILED\"\n);\nour  $C = \"blablabla\";\n\nsub foo(){}\n\n1;\n</code></pre>\n\n<p>in other Perl file I can use this package as:</p>\n\n<pre><code>use FindBin qw($RealBin);\nuse lib $RealBin;    \n\nuse Constants qw(@A %B, $C, foo); \n</code></pre>\n\n<p>It will work.</p>\n\n<p>I want to change a bit the package usage like:</p>\n\n<pre><code>use Constants;\n</code></pre>\n\n<p>So logically the usage should be:</p>\n\n<pre><code>Constants::@A;  # I get an error\nConstants::%B;  # I get an error\nConstants::$C;  # I get an error\n</code></pre>\n\n<p>This approach works with methods, for example: </p>\n\n<pre><code>Constants::foo(); # works!!\n</code></pre>\n\n<p>So how I can use <code>@A %B $C</code> without calling chain them into <code>qw(@A %B $C)</code>?</p>\n"}, {"tags": ["perl", "cgi"], "comments": [{"owner": {"reputation": 80882, "user_id": 18157, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4d3de78b198076dd5a5006abd17cb0f8?s=128&d=identicon&r=PG&f=1", "display_name": "Jim Garrison", "link": "https://stackoverflow.com/users/18157/jim-garrison"}, "edited": false, "score": 4, "creation_date": 1483858195, "post_id": 41530088, "comment_id": 70265879, "body": "Do not post images for text data such as input or output.  Always copy/paste the data into your post and format as code."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1488172900, "post_id": 41530088, "comment_id": 72096883, "body": "Please see <a href=\"http://stackoverflow.com/help/someone-answers\">What should I do when someone answers my question?</a>"}], "answers": [{"comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1483867995, "post_id": 41530248, "comment_id": 70267834, "body": "Actually they can very well dump a bunch of text in the browser with <code>text&#47;plain</code>. It will look like a bunch of text, which seems to be exactly what that program is supposed to do."}, {"owner": {"reputation": 15, "user_id": 6453374, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5890302852eb03de7464e985b4284b7c?s=128&d=identicon&r=PG&f=1", "display_name": "Deep Shah", "link": "https://stackoverflow.com/users/6453374/deep-shah"}, "edited": false, "score": 0, "creation_date": 1484150918, "post_id": 41530248, "comment_id": 70393870, "body": "Thanks for your suggestion."}], "tags": [], "owner": {"reputation": 80882, "user_id": 18157, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4d3de78b198076dd5a5006abd17cb0f8?s=128&d=identicon&r=PG&f=1", "display_name": "Jim Garrison", "link": "https://stackoverflow.com/users/18157/jim-garrison"}, "is_accepted": false, "score": 3, "last_activity_date": 1483861062, "last_edit_date": 1483861062, "creation_date": 1483858158, "answer_id": 41530248, "question_id": 41530088, "link": "https://stackoverflow.com/questions/41530088/perl-cgi-produces-unexpected-output/41530248#41530248", "title": "Perl CGI produces unexpected output", "body": "<p>The <code>BEGIN</code> block executes before anything else and thus before </p>\n\n<pre><code>my $q = new CGI;\n</code></pre>\n\n<p>The output goes to the server process' <code>stdout</code> and not to the HTTP stream, so the default is <code>text/plain</code> as you can see in the CGI output.</p>\n\n<p>After you solve that problem you'll find that the output still looks like a big ugly block because you need to format and send a valid HTML page, not just a big block of text.  You cannot just dump a bunch of text to the browser and expect it to do anything intelligent with it. You must create a complete HTML page with tags to layout your content, probably with CSS as well.</p>\n\n<p>In other words, the output required will be completely different from the output when writing only to the terminal.  How to structure it is up to you, and explaining how to do that is out of scope for StackOverflow.</p>\n"}, {"comments": [{"owner": {"reputation": 15, "user_id": 6453374, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5890302852eb03de7464e985b4284b7c?s=128&d=identicon&r=PG&f=1", "display_name": "Deep Shah", "link": "https://stackoverflow.com/users/6453374/deep-shah"}, "edited": false, "score": 0, "creation_date": 1484150858, "post_id": 41530916, "comment_id": 70393819, "body": "Thanks for your suggestion."}], "tags": [], "owner": {"reputation": 230, "user_id": 7322508, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1aDE1.jpg?s=128&g=1", "display_name": "Duncan Carr", "link": "https://stackoverflow.com/users/7322508/duncan-carr"}, "is_accepted": false, "score": 2, "last_activity_date": 1483864721, "creation_date": 1483864721, "answer_id": 41530916, "question_id": 41530088, "link": "https://stackoverflow.com/questions/41530088/perl-cgi-produces-unexpected-output/41530916#41530916", "title": "Perl CGI produces unexpected output", "body": "<p>I ran your cgi. The BEGIN block is run regardless and you print a content-type header here - you have explicitly asked for HTML here. Then later you attemp to print another header for PLAIN. This is why you can see the header text (that hasn't taken effect) at the beginning of the text in the browser window.</p>\n"}, {"comments": [{"owner": {"reputation": 15, "user_id": 6453374, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5890302852eb03de7464e985b4284b7c?s=128&d=identicon&r=PG&f=1", "display_name": "Deep Shah", "link": "https://stackoverflow.com/users/6453374/deep-shah"}, "edited": false, "score": 1, "creation_date": 1484150795, "post_id": 41531277, "comment_id": 70393773, "body": "Thanks a lot for your suggestion. The CGI now produces the expected output...! I appreciate your help."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 15, "user_id": 6453374, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5890302852eb03de7464e985b4284b7c?s=128&d=identicon&r=PG&f=1", "display_name": "Deep Shah", "link": "https://stackoverflow.com/users/6453374/deep-shah"}, "edited": false, "score": 0, "creation_date": 1488185662, "post_id": 41531277, "comment_id": 72102570, "body": "@DeepShah please see <a href=\"http://stackoverflow.com/help/someone-answers\">the help section</a> to learn what to do when your question gets answered."}], "tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": false, "score": 3, "last_activity_date": 1483867941, "last_edit_date": 1495541813, "creation_date": 1483867941, "answer_id": 41531277, "question_id": 41530088, "link": "https://stackoverflow.com/questions/41530088/perl-cgi-produces-unexpected-output/41531277#41531277", "title": "Perl CGI produces unexpected output", "body": "<p>As the other answers state, the <code>BEGIN</code> block is executed at the very start of your program. </p>\n\n<pre><code>BEGIN {\n    $|=1;\n    print \"Content-type: text/html\\n\\n\";\n    use CGI::Carp('fatalsToBrowser');\n}\n</code></pre>\n\n<p>There, you output an HTTP header <code>Content-type: text/html\\n\\n</code>. The browser sees that first, and treats all your output as HTML. But you only have text. Whitespace in an HTML page is collapsed into single spaces, so all your <code>\\n</code> line breaks disappear.</p>\n\n<p>Later, you print another header, the browser cannot see that as a header any more, because you already had one and finished it off with two newlines <code>\\n\\n</code>. It's now too late to switch back to <code>text/plain</code>.</p>\n\n<p>It is perfectly fine to have a CGI program return <code>text/plain</code> and just have text without markup be displayed in a browser when all you want is text, and no colors or links or tables. For certain use cases this makes a lot of sense, even if it doesn't have the <em>hyper</em> in Hypertext any more. But you're not really doing that. </p>\n\n<p>Your <code>BEGIN</code> block serves a purpose, but you are overdoing it. You're trying to make sure that when an error occurs, it gets nicely printed in the browser, so you don't need to deal with the server log while developing. </p>\n\n<p>The <a href=\"https://metacpan.org/pod/CGI::Carp\" rel=\"nofollow noreferrer\">CGI::Carp</a> module and it's <a href=\"https://metacpan.org/pod/CGI::Carp#MAKING-PERL-ERRORS-APPEAR-IN-THE-BROWSER-WINDOW\" rel=\"nofollow noreferrer\">functionality <code>fatalsToBrowser</code></a> bring their own mechanism for that. You don't have to do it yourself. </p>\n\n<p>You can safely remove the <code>BEGIN</code> block and just put your <code>use CGI::CARP</code> at the top of the script with all the other <code>use</code> statements. They all get run first anyway, because <code>use</code> gets run at <em>compile time</em>, while the rest of your code gets run at <em>run time</em>.</p>\n\n<p>If you want, you can keep the <code>$|++</code>, which turns off the buffering for your <code>STDOUT</code> handle. It gets flushed immediately and every time you print something, that output goes directly to the browser instead of collecting until it's enough or there is a newline. If your process runs for a long time, this makes it easier for the user to see that stuff is happening, which is also useful in production.</p>\n\n<p>The top of your program should look like this now.</p>\n\n<pre><code>#!/usr/bin/perl -T\n\n# middle.pl - a simple concordance\nuse strict;\nuse warnigns;\nuse diagnostics;\nuse CGI;\nuse CGI::Carp('fatalsToBrowser');\n\n$|=1;\n\nmy $q = CGI-&gt;new;\n</code></pre>\n\n<hr>\n\n<p>Finally, a a few quick words on the other parts I deleted from there.</p>\n\n<ul>\n<li>Your comment <em>requires</em> over the <code>use</code> statements is misleading. Those are <a href=\"http://perldoc.perl.org/functions/use.html\" rel=\"nofollow noreferrer\"><code>use</code></a>, not <a href=\"http://perldoc.perl.org/functions/require.html\" rel=\"nofollow noreferrer\"><code>require</code></a>. As I said above, <code>use</code> gets run at <em>compile time</em>. <code>require</code> on the other hand gets run at <em>run time</em> and can be done conditionally. Misleading comments will make it harder for others (or you) to maintain your code later on.</li>\n<li>I removed the <code>-w</code> flag from the shebang (<code>#!/usr/bin/perl</code>) and put the <a href=\"http://perldoc.perl.org/warnings.html\" rel=\"nofollow noreferrer\"><code>use warnings</code> pragma</a> in. That's a more modern way to turn on warnings, because sometimes the shebang can be ignored.</li>\n<li><a href=\"http://perldoc.perl.org/diagnostics.html\" rel=\"nofollow noreferrer\">The <code>use diagnostics</code> pragma</a> gives you extra long explanations when things go wrong. That's useful, <a href=\"https://stackoverflow.com/q/13566980/1331451\">but also extra slow</a>. You can use it during development, but please remove it for production.</li>\n<li>The comment <em>sanity check</em> should be moved down under the CGI instantiation.</li>\n<li>Please use the invocation form of <code>new</code> to instantiate CGI, and any other classes. The <code>-&gt;</code> syntax will take care of inheritance properly, while the old <code>new CGI</code> cannot do that.</li>\n</ul>\n"}], "owner": {"reputation": 15, "user_id": 6453374, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5890302852eb03de7464e985b4284b7c?s=128&d=identicon&r=PG&f=1", "display_name": "Deep Shah", "link": "https://stackoverflow.com/users/6453374/deep-shah"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 236, "favorite_count": 0, "answer_count": 3, "score": 2, "last_activity_date": 1483867941, "creation_date": 1483856576, "last_edit_date": 1592644375, "question_id": 41530088, "link": "https://stackoverflow.com/questions/41530088/perl-cgi-produces-unexpected-output", "title": "Perl CGI produces unexpected output", "body": "<p>I have a Perl CGI script for online concordance application that searches for an instance of word in a text and prints the sorted output.</p>\n<pre><code>#!/usr/bin/perl -wT\n\n# middle.pl - a simple concordance\n\n\n\n# require\nuse strict;\nuse diagnostics;\nuse CGI;\n\n\n# ensure all fatals go to browser during debugging and set-up\n# comment this BEGIN block out on production code for security\nBEGIN {\n    $|=1;\n    print &quot;Content-type: text/html\\n\\n&quot;;\n    use CGI::Carp('fatalsToBrowser');\n}\n\n# sanity check\nmy $q = new CGI;\nmy $target = $q-&gt;param(&quot;keyword&quot;);\nmy $radius = $q-&gt;param(&quot;span&quot;);\nmy $ordinal = $q-&gt;param(&quot;ord&quot;);\nmy $width = 2*$radius;\nmy $file    = 'concordanceText.txt';\nif ( ! $file or ! $target ) {\n\n    print &quot;Usage: $0 &lt;file&gt; &lt;target&gt;\\n&quot;;\n    exit;\n    \n}\n\n# initialize\nmy $count   = 0;\nmy @lines   = ();\n$/          = &quot;&quot;; # Paragraph read mode\n\n# open the file, and process each line in it\nopen(FILE, &quot; &lt; $file&quot;) or die(&quot;Can not open $file ($!).\\n&quot;);\nwhile(&lt;FILE&gt;){\n\n    # re-initialize\n    my $extract = '';\n    \n    # normalize the data\n    chomp;\n    s/\\n/ /g;        # Replace new lines with spaces\n    s/\\b--\\b/ -- /g; # Add spaces around dashes\n\n    # process each item if the target is found\n    while ( $_ =~ /\\b$target\\b/gi ){\n                \n        # find start position\n        my $match = $1;\n        my $pos   = pos;\n        my $start = $pos - $radius - length($match);\n\n        # extract the snippets\n        if ($start &lt; 0){\n            $extract = substr($_, 0, $width+$start+length($match));\n            $extract = (&quot; &quot; x -$start) . $extract;\n        }else{\n            $extract = substr($_, $start, $width+length($match));\n            my $deficit = $width+length($match) - length($extract);\n            if ($deficit &gt; 0) {\n                $extract .= (&quot; &quot; x $deficit);\n            }\n    \n        }\n\n        # add the extracted text to the list of lines, and increment\n        $lines[$count] = $extract;\n        ++$count;\n        \n    }\n    \n}\n\nsub removePunctuation {\n    my $string = $_[0];\n    $string = lc($string); # Convert to lowercase\n    $string =~ s/[^-a-z ]//g; # Remove non-aplhabetic characters \n    $string =~ s/--+/ /g; #Remove 2+ hyphens with a space \n    $string =~s/-//g; # Remove hyphens\n    $string =~ s/\\s=/ /g;\n    return($string);\n    \n}\n\nsub onLeft {\n    #USAGE: $word = onLeft($string, $radius, $ordinal);\n    my $left = substr($_[0], 0, $_[1]);\n    $left = removePunctuation($left);\n    my @word = split(/\\s+/, $left);\n    return($word[-$_[2]]);\n}\n\nsub byLeftWords {\n    my $left_a = onLeft($a, $radius, $ordinal);\n    my $left_b = onLeft($b, $radius, $ordinal);\n    lc($left_a) cmp lc($left_b);\n}\n\n\n# process each line in the list of lines\n\nprint &quot;Content-type: text/plain\\n\\n&quot;;\nmy $line_number = 0;\nforeach my $x (sort byLeftWords @lines){\n    ++$line_number;\n    printf &quot;%5d&quot;,$line_number;\n    print &quot; $x\\n\\n&quot;;\n}\n\n# done\nexit;\n</code></pre>\n<p>The perl script produces expected result in terminal (command line). But the CGI script for online application produces unexpected output. I cannot figure out what mistake I am making in the CGI script. The CGI script should ideally produce the same output as the command line script. Any suggestion would be very helpful.</p>\n<h1>Command Line Output</h1>\n<p><a href=\"https://i.stack.imgur.com/i5pYs.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/i5pYs.png\" alt=\"Command Line Output\" /></a></p>\n<h1>CGI Output</h1>\n<p><a href=\"https://i.stack.imgur.com/c5qBb.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/c5qBb.png\" alt=\"CGI Output\" /></a></p>\n"}, {"tags": ["linux", "perl", "perl-module", "cpan"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 2, "creation_date": 1483826846, "post_id": 41527057, "comment_id": 70260194, "body": "You can tell local::lib where to install things."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1483832872, "post_id": 41527057, "comment_id": 70261671, "body": "Are you hoping to install modules to be accessed from a different machine? I don&#39;t like the sound of that."}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1483880558, "post_id": 41527057, "comment_id": 70270944, "body": "See also <a href=\"http://stackoverflow.com/q/41191384/2173773\">INSTALL_BASE seems to be ignored by Makefile.PL</a>"}, {"owner": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "edited": false, "score": 0, "creation_date": 1483906180, "post_id": 41527057, "comment_id": 70279763, "body": "Stack Overflow is a site for programming and development questions. This question appears to be off-topic because it is not about programming or development. See <a href=\"http://stackoverflow.com/help/on-topic\">What topics can I ask about here</a> in the Help Center. Perhaps <a href=\"http://superuser.com/\">Super User</a> or <a href=\"http://unix.stackexchange.com/\">Unix &amp; Linux Stack Exchange</a> would be a better place to ask. Also see <a href=\"http://meta.stackexchange.com/q/134306\">Where do I post questions about Dev Ops?</a>"}], "answers": [{"tags": [], "owner": {"reputation": 42833, "user_id": 18914, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7a20a39ae2ef47ae042a3eddd5b5bd19?s=128&d=identicon&r=PG", "display_name": "Dave Sherohman", "link": "https://stackoverflow.com/users/18914/dave-sherohman"}, "is_accepted": false, "score": 0, "last_activity_date": 1483867396, "creation_date": 1483867396, "answer_id": 41531213, "question_id": 41527057, "link": "https://stackoverflow.com/questions/41527057/installing-perl-modules-to-a-specific-location/41531213#41531213", "title": "Installing Perl modules to a specific location", "body": "<p>Based on my own previous misadventures with <code>local::lib</code>, you should be able to set the location where modules are installed by setting <code>INSTALL_BASE</code> in <code>PERL_MM_OPT</code>, most likely by running a command similar to:</p>\n\n<pre><code>export PERL_MM_OPT='INSTALL_BASE=/usr/local/&lt;path to modules&gt;'\n</code></pre>\n\n<p>Alternately, if you're doing the Makefile/make/make test/make install process manually instead of using the CPAN toolchain, you can pass <code>--install_base=/usr/local/&lt;path to modules&gt;</code> as an argument to <code>Makefile.PL</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 3, "last_activity_date": 1483967579, "last_edit_date": 1483967579, "creation_date": 1483937953, "answer_id": 41541273, "question_id": 41527057, "link": "https://stackoverflow.com/questions/41527057/installing-perl-modules-to-a-specific-location/41541273#41541273", "title": "Installing Perl modules to a specific location", "body": "<p>For our convenience, let's assign the base location to a variable: (This var isn't used by anything but the following commands. There's actually no need to <code>export</code> it.)</p>\n\n<pre><code>export PERL_BASE=\"/usr/local/perl\"   # Or \"$HOME\" or whatever\n</code></pre>\n\n<p>Instruct ExtUtils::MakeMaker where to install: (This assumes <code>$PERL_BASE</code> doesn't include any shell metacharacters)</p>\n\n<pre><code>export PERL_MM_OPT=\"INSTALL_BASE=$PERL_BASE\"\n</code></pre>\n\n<p>Instruct Module::Build where to install: (This assumes <code>$PERL_BASE</code> doesn't include any shell metacharacters)</p>\n\n<pre><code>export PERL_MB_OPT=\"--install_base $PERL_BASE\"\n</code></pre>\n\n<p>Instruct Perl where to look for modules: (This assumes <code>$PERL_BASE</code> doesn't include <code>:</code>)</p>\n\n<pre><code>export PERL5LIB=\"$PERL_BASE/lib/perl5\"\n</code></pre>\n\n<p>Instruct the system where to look for scripts: (This assumes <code>$PERL_BASE</code> doesn't include <code>:</code>)</p>\n\n<pre><code>export PATH=\"$PERL_BASE/bin${PATH:+:$PATH}\"\n</code></pre>\n\n<p>Instruct the system where to look for man pages: (This assumes <code>$PERL_BASE</code> doesn't include <code>:</code>)</p>\n\n<pre><code>export MANPATH=\"$PERL_BASE/man${MANPATH:+:$MANPATH}\"\n</code></pre>\n\n<hr>\n\n<p>All together:</p>\n\n<pre><code>export PERL_BASE=\"/usr/local/perl\"\nexport PERL_MM_OPT=\"INSTALL_BASE=$PERL_BASE\"\nexport PERL_MB_OPT=\"--install_base $PERL_BASE\"\nexport PERL5LIB=\"$PERL_BASE/lib/perl5\"\nexport PATH=\"$PERL_BASE/bin${PATH:+:$PATH}\"\nexport MANPATH=\"$PERL_BASE/man${MANPATH:+:$MANPATH}\"\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "is_accepted": false, "score": 2, "last_activity_date": 1576517260, "creation_date": 1576517260, "answer_id": 59361568, "question_id": 41527057, "link": "https://stackoverflow.com/questions/41527057/installing-perl-modules-to-a-specific-location/59361568#59361568", "title": "Installing Perl modules to a specific location", "body": "<p><a href=\"https://metacpan.org/pod/local::lib\" rel=\"nofollow noreferrer\">local::lib</a> can be set up at any location, the location <code>~/perl5</code> is just a default:</p>\n\n<pre><code># set up PERL_MM_OPT, PERL_MB_OPT, PERL5LIB, and other shell variables\neval \"$(perl -I/opt/perllib/lib/perl5 -Mlocal::lib=/opt/perllib)\"\n</code></pre>\n\n<p>The <a href=\"https://metacpan.org/pod/cpanm\" rel=\"nofollow noreferrer\">cpanm</a> CPAN installer can install to any location as if it were a local::lib, regardless of how your environment is configured (whether by local::lib or other means):</p>\n\n<pre><code>cpanm -l /opt/perllib Some::Module\n</code></pre>\n\n<p>You can make use of any local::lib installation without having enabled it by adding the lib dir using <code>PERL5LIB</code> or <a href=\"https://perldoc.pl/lib\" rel=\"nofollow noreferrer\">lib</a> or the <code>-I</code> switch, and using the path to executables in the local::lib bin dir if needed:</p>\n\n<pre><code>PERL5LIB=/opt/perllib/lib/perl5 /path/to/script.pl\nperl -Mlib=/opt/perllib/lib/perl5 ./script.pl\nperl -I/opt/perllib/lib/perl5 /opt/perllib/bin/mojo version\n</code></pre>\n"}], "owner": {"reputation": 163, "user_id": 3398653, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/1ee0d34c68847322f4dea85fbd8bb0a9?s=128&d=identicon&r=PG&f=1", "display_name": "user44697", "link": "https://stackoverflow.com/users/3398653/user44697"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3600, "favorite_count": 0, "accepted_answer_id": 41541273, "answer_count": 3, "score": 3, "last_activity_date": 1576517260, "creation_date": 1483826477, "last_edit_date": 1483832767, "question_id": 41527057, "link": "https://stackoverflow.com/questions/41527057/installing-perl-modules-to-a-specific-location", "title": "Installing Perl modules to a specific location", "body": "<p>I have several Linux machines that run Perl programs and other programs and tools.</p>\n\n<p>I want to keep all tools between machines synchronized, so I have shared the <code>/usr/local</code> directory between one machine (Main) and the others.</p>\n\n<p>Now I would like to keep all my Perl modules and their dependencies synchronized as well in <code>/usr/local/&lt;path to modules&gt;</code>.</p>\n\n<p>I have found the <a href=\"https://metacpan.org/pod/local::lib\" rel=\"nofollow noreferrer\"><code>local::lib</code></a> module, but that is intended to install modules to your home directory.</p>\n\n<p>How can I set up CPAN (or CPAN alternatives) to install all modules and dependencies to one location? And how can I set up Perl on other machines to use that location to find modules?</p>\n"}, {"tags": ["perl", "bioperl"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1483809340, "post_id": 41524002, "comment_id": 70254118, "body": "No. You&#39;re not checking if the obj has been created. You are checking the return value of <code>$the_object-&gt;the_attribute</code> and the error message means that <code>$the_object</code> is not an object, but <code>undef</code>. If you include a bit more code (like where <code>$the_object</code> came from, and what attributes it is supposed to have), I can refine my answer."}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 7388205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f6a422f737b8aa130a10a0a82ef112e?s=128&d=identicon&r=PG&f=1", "display_name": "keeg", "link": "https://stackoverflow.com/users/7388205/keeg"}, "edited": false, "score": 0, "creation_date": 1483812298, "post_id": 41524201, "comment_id": 70255187, "body": "I see now that I had misunderstood/mixed up the original error message as it should have been related to an (non existing) object, and not be related to the method. Many thanks for your thorough explanation!"}], "tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": true, "score": 8, "last_activity_date": 1483810428, "last_edit_date": 1483810428, "creation_date": 1483809259, "answer_id": 41524201, "question_id": 41524002, "link": "https://stackoverflow.com/questions/41524002/how-to-check-whether-an-attribute-of-an-object-has-a-value/41524201#41524201", "title": "How to check whether an attribute of an object has a value?", "body": "<blockquote>\n<pre><code>if ($the_object-&gt;the_attribute) {\n</code></pre>\n</blockquote>\n\n<p>This checks if the return value of the method <code>the_attribute</code> is true. <em>True</em> means that it's not <code>0</code>, the empty string <code>q{}</code> or <code>undef</code>.</p>\n\n<p>But you said you want to know whether the object exists.</p>\n\n<p>Let's go over <strong>some basics</strong> first.</p>\n\n<pre><code>#   | this variable contains an object\n#   |          this arrow -&gt; tells Perl to call the method on the obj    \n#   |          | this is a method that is called on $the_object\n#   |          | |        \nif ($the_object-&gt;the_attribute) {\n#  (                          )\n# the if checks the return value of the expression between those parenthesis\n</code></pre>\n\n<p>It looks like you're confusing a few things.</p>\n\n<p>First, your <code>$the_object</code> is supposed to be an object. It probably came from a call like this:</p>\n\n<pre><code>my $the_object = Some::Class-&gt;new;\n</code></pre>\n\n<p>Or maybe it was returned from some other function call. Maybe some other object returned it.</p>\n\n<pre><code>my $the_object = $something_else-&gt;some_property_that_be_another_obj\n</code></pre>\n\n<p>Now <code>the_attribute</code> is a method (that's like a function) that returns a specific piece of data in your object. Depending on the implementation of the class (the building plan of the object), if that attribute is not set (<em>initialized</em>), it might either just return <code>undef</code>, or some other value.</p>\n\n<p>But the error message you are seeing is not related to <code>the_attribute</code>. If it was, you'd just not call the code in the block. The <code>if</code> check would catch it, and decide to go to <code>else</code>, or do nothing if there is no <code>else</code>.</p>\n\n<p>Your error message says you are trying to call a method on something that is <code>undef</code>. We know you are calling the <code>the_attribute</code> accessor method on <code>$the_object</code>. So <code>$the_object</code> is <code>undef</code>. </p>\n\n<hr>\n\n<p>The easiest way to check if something has a true value is to just put it in an <code>if</code>. But you already seem to know that.</p>\n\n<pre><code>if ($obj) {\n    # there is some non-false value in $obj\n}\n</code></pre>\n\n<p>You've now checked that <code>$obj</code> is something that is true. So it could be an object. So you could now call your method.</p>\n\n<pre><code>if ($obj &amp;&amp; $obj-&gt;the_attribute) { ... }\n</code></pre>\n\n<p>This will check the true-ness of <code>$obj</code> and only continue if there is something in <code>$obj</code>. If not, it will never call the right hand side of the <code>&amp;&amp;</code> and you will not get an error.</p>\n\n<p>But if you want to know whether <code>$obj</code> is an object that has a method, you can use <code>can</code>. Remember that <em>attributes</em> are just accessor methods to values stored inside the object.</p>\n\n<pre><code>if ($obj-&gt;can('the_attribute')) {\n    # $obj has a method the_attribute\n}\n</code></pre>\n\n<p>But that can blow up if <code>$obj</code> is not there.</p>\n\n<p>If you're not sure that <code>$obj</code> is really an object, you can use the <a href=\"https://metacpan.org/pod/Safe::Isa\" rel=\"noreferrer\">Safe::Isa</a> module. It provides a method <code>$_call_if_object</code><sup>1</sup> that you can use to safely call your method on your maybe-object.</p>\n\n<pre><code>$maybe_an_object-&gt;$_call_if_object(method_name =&gt; @args);\n</code></pre>\n\n<p>Your call would translate to.</p>\n\n<pre><code>my $the_attribute = $obj-&gt;$_call_if_object('the_attribute');\nif ($the_attribute) {\n    # there is a value in the_attribute\n}\n</code></pre>\n\n<p>The same way you can use <code>$_isa</code> and <code>$_can</code> from Safe::Isa.</p>\n\n<hr>\n\n<p><sup>1) Yes, the method starts with a <code>$</code>, it's really a variable. If you want to learn more about how and why this works, watch the talk <a href=\"https://www.youtube.com/watch?v=9aCsUxfRksE\" rel=\"noreferrer\"><em>You did what?</em></a> by mst.</sup></p>\n"}], "owner": {"reputation": 13, "user_id": 7388205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f6a422f737b8aa130a10a0a82ef112e?s=128&d=identicon&r=PG&f=1", "display_name": "keeg", "link": "https://stackoverflow.com/users/7388205/keeg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1282, "favorite_count": 0, "accepted_answer_id": 41524201, "answer_count": 1, "score": 1, "last_activity_date": 1483820726, "creation_date": 1483808310, "last_edit_date": 1483820726, "question_id": 41524002, "link": "https://stackoverflow.com/questions/41524002/how-to-check-whether-an-attribute-of-an-object-has-a-value", "title": "How to check whether an attribute of an object has a value?", "body": "<p>I get an error such as \"can't call method 'xxxx' on an undefined value\" when attempting to check if an object has been created (by the perl module Bio::Perl).</p>\n\n<p>Is there a general way of checking if an attribute has a value or not? I would have liked to do something like:</p>\n\n<pre><code>if ($the_object-&gt;the_attribute) {\n</code></pre>\n\n<p>But as long as the attribute is \"undef\", calling the method will only give me the error message. I have not been able to find a solution to this problem - which is real, because the object is created by the Bio::Perl module, and some attributes may or may not be set. Maybe I should add that I am not particularly perl-objects-savvy.</p>\n\n<p>edit:\nBelow is a relevant part of my code. The get_sequence() function is in the Bio::Perl module. On line 13, how can I make sure that there is a value (sequence in this case) before checking the length of it?</p>\n\n<pre><code>my @msgs;\nmy @sequence_objects;\nmy $maxlength = 0;\n\nfor ( @contigs ) {\n\n    my $seq_obj;\n\n    try {\n        $seq_obj = get_sequence( 'genbank', $_ );\n    }\n    catch Bio::Root::Exception with {\n        push @msgs, \"Nothing found for $_ \";\n    };\n\n    if ( $seq_obj ) {\n\n        my $seq_length = length( $seq_obj-&gt;seq );\n\n        if ( $seq_length &gt; $maxlength ) {\n            $maxlength = $seq_length;\n        }\n\n        push @sequence_objects, $seq_obj;\n    }\n}\n\n...\n</code></pre>\n"}, {"tags": ["perl", "ebay-api"], "answers": [{"comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1483799189, "post_id": 41522341, "comment_id": 70250741, "body": "For some reason the syntax highlighting markup doesn&#39;t work properly in my answer."}, {"owner": {"reputation": 35, "user_id": 7387708, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a5588ee89d329c24d8eccc8e878e6485?s=128&d=identicon&r=PG&f=1", "display_name": "Arsene Wenger", "link": "https://stackoverflow.com/users/7387708/arsene-wenger"}, "edited": false, "score": 0, "creation_date": 1483801831, "post_id": 41522341, "comment_id": 70251585, "body": "Thanks very much, I will check it out and see if I can get it working with that, will let you know"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 35, "user_id": 7387708, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a5588ee89d329c24d8eccc8e878e6485?s=128&d=identicon&r=PG&f=1", "display_name": "Arsene Wenger", "link": "https://stackoverflow.com/users/7387708/arsene-wenger"}, "edited": false, "score": 0, "creation_date": 1483803142, "post_id": 41522341, "comment_id": 70251967, "body": "@ArseneWenger no problem. :) Sometimes it just helps to read the documentation and also to dive into the code. You can learn a lot that way. Welcome to Stack Overflow and the Perl tag, btw. This was a great first question."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1483809929, "post_id": 41522341, "comment_id": 70254333, "body": "<i>&quot;For some reason the syntax highlighting markup doesn&#39;t work properly in my answer&quot;</i> Syntax highlighting reverts to the default within quote blocks. See <a href=\"http://meta.stackoverflow.com/questions/323566/is-there-a-way-to-provide-a-syntax-hint-for-code-within-a-blockquote\"><i>Is there a way to provide a syntax hint for code within a blockquote?</i></a>. I hope I&#39;ve fixed it satisfactorily."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1483810557, "post_id": 41522341, "comment_id": 70254574, "body": "@Borodin thanks. I&#39;m not sure. I don&#39;t see XML highlighting on the last block. The first one was supposed to be a quote because I copied it verbatim from that documentation. I thought switching around between Perl and XML would be enough, but I didn&#39;t understand why it would not do take for the last few code blocks."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1483815629, "post_id": 41522341, "comment_id": 70256445, "body": "@simbabque: I&#39;m sorry. That last block wasn&#39;t highlighted properly because I didn&#39;t mark it. It&#39;s fixed. It doesn&#39;t help that the CSS uses very grey pastel colours. I&#39;m tempted to think that Stack Exchange know that their highlighting is poor and are trying to do as little as possible to make its mistakes readable. I always try to start extended answers with ` &lt;!-- language-all: lang-none --&gt;` so that I can choose my own highlighting. Having XML in all-black is much better than highlighting it badly as Perl!"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1483815764, "post_id": 41522341, "comment_id": 70256490, "body": "Cheers @Borodin. I owe you another pint. :)"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1483815969, "post_id": 41522341, "comment_id": 70256555, "body": "@simbabque: Do you know Imperial gallons? They&#39;re better than US gallons. Generally less fizzy and better-tasting :)"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1483816287, "post_id": 41522341, "comment_id": 70256660, "body": "@Borodin we like our beer very fizzy and with a lot of foam over here. And of course in liters."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1483820291, "post_id": 41522341, "comment_id": 70258047, "body": "@simbabque: Eww! Fizzy and light like <i>Budweiser</i>? I can&#39;t drink even lemonade because the fizz <i>hurts</i>. I think I&#39;m one of a small market who can&#39;t cope with any carbonation at all, and have to pour my beer from a height and wait for ten minutes! Oh, and UK gallons are about 4.5 litres, whereas a US gallon comes to 3.8 litres :)"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1483821377, "post_id": 41522341, "comment_id": 70258435, "body": "@borodin I see. Well German beer doesn&#39;t work from pitchers or if it&#39;s too large. We have Pilsener mostly, which is not like your English stuff. But I prefer Guinness. mst is fond of dark Hefeweizen when he comes to Germany though. ;-)"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1483832387, "post_id": 41522341, "comment_id": 70261568, "body": "@simbabque: We don&#39;t have pitchers either, although I wish we did. It&#39;s mostly pints by metred tap. The government tried to enforce metric units, and there were grocers arrested for selling by the pound, but they gave up and now we&#39;re a mixture. Supermarkets play with the measurements to suit themselves, as they always will. Guinness has no fizz from the tap, only a head, so I often resort to that over a fizzy ale. &quot;mst&quot;? You mean <b>mso</b>?     Ah! <i>Dunkelweizen</i>!"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1483835827, "post_id": 41522341, "comment_id": 70262311, "body": "@Borodin I meant the Perl developer <a href=\"https://metacpan.org/author/MSTROUT\" rel=\"nofollow noreferrer\">mst</a>. <i>Dunkelweizen</i> is exactly what he calls it, but we call it <i>Dunkles Hefeweizen</i> because the yeast in it is important to us. You need to shake the bottle when it&#39;s almost empty to get the remaining yeast out and pour it into the glass. Some people roll it, others leave it laying on the sides too."}], "tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": true, "score": 2, "last_activity_date": 1483815418, "last_edit_date": 1483815418, "creation_date": 1483798315, "answer_id": 41522341, "question_id": 41522018, "link": "https://stackoverflow.com/questions/41522018/how-do-i-use-itemfilters-with-ebayapisimplefinding/41522341#41522341", "title": "How do I use ItemFilters with eBay::API::Simple::Finding?", "body": "<p></p>\n\n<p>Reading the <a href=\"https://developer.ebay.com/devzone/finding/callref/types/ItemFilter.html\" rel=\"nofollow noreferrer\">eBay API docs about <code>findCompletedItems</code></a> shows that you need to use child elements for <code>ItemFilter</code>s. There is <a href=\"https://developer.ebay.com/devzone/finding/callref/findCompletedItems.html#Samples\" rel=\"nofollow noreferrer\">a sample</a> that shows this nicely <a href=\"https://developer.ebay.com/devzone/finding/callref/Samples/findCompletedItems_basic_in_xml_xml.txt\" rel=\"nofollow noreferrer\">(link)</a>.</p>\n\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;findCompletedItemsRequest xmlns=\"http://www.ebay.com/marketplace/search/v1/services\"&gt;\n   &lt;keywords&gt;Garmin nuvi 1300 Automotive GPS Receiver&lt;/keywords&gt;\n   &lt;categoryId&gt;156955&lt;/categoryId&gt;\n   &lt;itemFilter&gt;\n      &lt;name&gt;Condition&lt;/name&gt;\n      &lt;value&gt;3000&lt;/value&gt;\n   &lt;/itemFilter&gt;\n   &lt;itemFilter&gt;\n      &lt;name&gt;FreeShippingOnly&lt;/name&gt;\n      &lt;value&gt;true&lt;/value&gt;\n   &lt;/itemFilter&gt;\n   &lt;itemFilter&gt;\n      &lt;name&gt;SoldItemsOnly&lt;/name&gt;\n      &lt;value&gt;true&lt;/value&gt;\n   &lt;/itemFilter&gt;\n   &lt;sortOrder&gt;PricePlusShippingLowest&lt;/sortOrder&gt;\n   &lt;paginationInput&gt;\n      &lt;entriesPerPage&gt;2&lt;/entriesPerPage&gt;\n      &lt;pageNumber&gt;1&lt;/pageNumber&gt;\n   &lt;/paginationInput&gt;\n&lt;/findCompletedItemsRequest&gt;\n</code></pre>\n\n<p>Looking at the source code of the <a href=\"https://metacpan.org/source/TKEEFER/eBay-API-Simple-0.29/lib/eBay/API/Simple/Finding.pm#L10\" rel=\"nofollow noreferrer\">eBay::API::Simple::Finding</a> module we can see that it uses <a href=\"http://p3rl.org/XML::Simple\" rel=\"nofollow noreferrer\">XML::Simple</a> to construct requests. While in general <code>XML::Simple</code> is discouraged, we will have to work with it.</p>\n\n<p>Taking a deeper look at the docs for the <code>ItemFilter</code> shows that we can provide one <code>&lt;itemFilter&gt;</code> block per filter. That implies that multiple ones are treated as AND automatically. </p>\n\n<p>To make a single item with the way XML::Simple get set up in the API module, we just need a hashref.</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>{\n    itemFilter =&gt; {\n        name =&gt; 'Condition',\n        value =&gt; 3000,\n    },\n}\n</code></pre>\n\n<p>will become</p>\n\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;itemFilter&gt;\n  &lt;name&gt;Condition&lt;/name&gt;\n  &lt;value&gt;3000&lt;/value&gt;\n&lt;/itemFilter&gt;\n</code></pre>\n\n<p>To get several, we need an array reference behind the <code>itemFilter</code> key.</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>{\n    itemFilter =&gt; [\n        {\n            name =&gt; 'Condition',\n            value =&gt; 3000,\n        },\n        {\n            name =&gt; 'FreeShippingOnly',\n            value =&gt; 'true',\n        },\n    ],\n}\n</code></pre>\n\n<p>This produces this XML.</p>\n\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;itemFilter&gt;\n  &lt;name&gt;Condition&lt;/name&gt;\n  &lt;value&gt;3000&lt;/value&gt;\n&lt;/itemFilter&gt;\n&lt;itemFilter&gt;\n  &lt;name&gt;FreeShippingOnly&lt;/name&gt;\n  &lt;value&gt;true&lt;/value&gt;\n&lt;/itemFilter&gt;\n</code></pre>\n\n<p>So far so good. We can easily hack that into the API module call. Instead of executing the call directly, I have prepared it, and then called the <a href=\"https://metacpan.org/source/TKEEFER/eBay-API-Simple-0.29/lib/eBay/API/Simple/Finding.pm#L282\" rel=\"nofollow noreferrer\">private method <code>_get_request_body</code></a>, which uses XML::Simple to form and return the request body string. That's neat to check if the request will look ok. I figured that out by reading the code, starting at the one I lined above, and working my way towards the base class, which provides <code>execute</code>.</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>use eBay::API::Simple::Finding;\n\nmy $api = eBay::API::Simple::Finding-&gt;new( {\n   appid   =&gt; 'APIKEY',\n   siteid  =&gt; 'EBAY-AU',\n} );\n\n$api-&gt;prepare(\n    'findCompletedItems',\n    {\n        keywords   =&gt; '\"princess cut\", \"diamond ring\", -\"14k*\"',\n        sortOrder  =&gt; 'PricePlusShippingHighest',\n        itemFilter =&gt; [\n            {\n                name  =&gt; 'SoldItemsOnly',\n                value =&gt; 'true',\n            },\n            {\n                name  =&gt; 'Condition',\n                value =&gt; 'Used',\n            },\n        ],\n    }\n);\n\nprint $api-&gt;_get_request_body;\n</code></pre>\n\n<p>Here's the XML that comes out.</p>\n\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;?xml version='1.0' encoding='utf-8'?&gt;\n&lt;findCompletedItemsRequest xmlns=\"http://www.ebay.com/marketplace/search/v1/services\"&gt;\n  &lt;itemFilter&gt;\n    &lt;name&gt;SoldItemsOnly&lt;/name&gt;\n    &lt;value&gt;true&lt;/value&gt;\n  &lt;/itemFilter&gt;\n  &lt;itemFilter&gt;\n    &lt;name&gt;Condition&lt;/name&gt;\n    &lt;value&gt;Used&lt;/value&gt;\n  &lt;/itemFilter&gt;\n  &lt;keywords&gt;&amp;quot;princess cut&amp;quot;, &amp;quot;diamond ring&amp;quot;, -&amp;quot;14k*&amp;quot;&lt;/keywords&gt;\n  &lt;sortOrder&gt;PricePlusShippingHighest&lt;/sortOrder&gt;\n&lt;/findCompletedItemsRequest&gt;\n</code></pre>\n\n<p>It doesn't matter that it' not indented nicely. It is clear that the filters are there.</p>\n\n<p>Since I don't have an API key I cannot run this myself, but I am pretty sure it's going to work.</p>\n"}], "owner": {"reputation": 35, "user_id": 7387708, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a5588ee89d329c24d8eccc8e878e6485?s=128&d=identicon&r=PG&f=1", "display_name": "Arsene Wenger", "link": "https://stackoverflow.com/users/7387708/arsene-wenger"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 406, "favorite_count": 0, "accepted_answer_id": 41522341, "answer_count": 1, "score": 2, "last_activity_date": 1483815418, "creation_date": 1483796167, "last_edit_date": 1483796544, "question_id": 41522018, "link": "https://stackoverflow.com/questions/41522018/how-do-i-use-itemfilters-with-ebayapisimplefinding", "title": "How do I use ItemFilters with eBay::API::Simple::Finding?", "body": "<p>I am playing with getting sold items from ebay using <a href=\"https://metacpan.org/pod/eBay::API::Simple::Finding\" rel=\"nofollow noreferrer\">eBay::API::Simple::Finding</a> and I want to use ItemFilters but I can't see where they go. \nIn particular I am looking to use the item filters</p>\n\n<pre><code>(itemFilter.name = SoldItemsOnly, itemFilter.value = true)\nand\n(itemFilter.name = Condition, itemFilter.value = Used)\n</code></pre>\n\n<p>I tried just including directly with the following here: </p>\n\n<pre><code>keywords =&gt; '\"princess cut\", \"diamond ring\", -\"14k*\"', \nCondition =&gt; 'Sold',\nSoldItemsOnly =&gt; 'true', \nsortOrder =&gt; 'PricePlusShippingHighest'\n</code></pre>\n\n<p>I have been on it quite a while and whilst I am sure it is somehow quite straight forward, I just can't seem to get it</p>\n\n<pre><code>use eBay::API::Simple::Finding;\n\nmy $api = eBay::API::Simple::Finding-&gt;new( {\n   appid   =&gt; 'APIKEY',\n   siteid  =&gt; 'EBAY-AU',\n} );\n\n$api-&gt;execute( \n    'findCompletedItems', { \n    keywords =&gt; '\"princess cut\", \"diamond ring\", -\"14k*\"',  \n    sortOrder =&gt; 'PricePlusShippingHighest',\n    } \n);\n\nif ( $api-&gt;has_error() ) {\n   die \"Call Failed:\" . $api-&gt;errors_as_string();\n}\n\nmy $dom  = $api-&gt;response_dom();\nmy $hash = $api-&gt;response_hash();\n</code></pre>\n\n<p>Any help is very appreciated,</p>\n\n<p>As for what I am seeing?\nThe sort is working, the search by keywords is working, but the itemfilters are not working, so it is returning new &amp; used items that have completed, whether sold or unsold</p>\n"}, {"tags": ["perl", "perl-module"], "comments": [{"owner": {"reputation": 830, "user_id": 2706533, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/2c7a264715622190ab125b8c04bbbb9e?s=128&d=identicon&r=PG&f=1", "display_name": "Nevermore", "link": "https://stackoverflow.com/users/2706533/nevermore"}, "edited": false, "score": 1, "creation_date": 1483789164, "post_id": 41520939, "comment_id": 70247765, "body": "Please format it properly."}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 1, "creation_date": 1483793315, "post_id": 41520939, "comment_id": 70248985, "body": "This does not look like a <a href=\"https://en.wikipedia.org/wiki/Office_Open_XML\" rel=\"nofollow noreferrer\"><code>.xlsx</code></a> file"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1483793657, "post_id": 41520939, "comment_id": 70249072, "body": "Is your question how to read and construct output to the screen similar to what a <code>VLOOKUP</code> would do, or how to insert the <code>=VLOOKUP(...)</code> formula into the XLSX file and save it to disk?"}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1483795719, "post_id": 41520939, "comment_id": 70249667, "body": "In your sample files there are no identical values in column A and M, is that correct?"}], "answers": [{"comments": [{"owner": {"reputation": 32063, "user_id": 4752675, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s6PS6.png?s=128&g=1", "display_name": "G5W", "link": "https://stackoverflow.com/users/4752675/g5w"}, "edited": false, "score": 0, "creation_date": 1483896176, "post_id": 41527238, "comment_id": 70276033, "body": "Alternatively,  you can also manipulate excel files using Win32::OLE"}, {"owner": {"reputation": 21, "user_id": 7387468, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a99a0501fc0263bafc458529e4f6162f?s=128&d=identicon&r=PG&f=1", "display_name": "Uzma", "link": "https://stackoverflow.com/users/7387468/uzma"}, "edited": false, "score": 0, "creation_date": 1483962887, "post_id": 41527238, "comment_id": 70299637, "body": "Hi all, I tired to parse excel file using perl modules. It reading successfully. But when i tired to apply vlookup formula its me an error:  Can&#39;t locate object method &quot;formula&quot; via package &quot;Spreadsheet::ParseExcel::Worksheet&quot; at read.pl line 33."}], "tags": [], "owner": {"reputation": 121, "user_id": 4373562, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/31lnT.png?s=128&g=1", "display_name": "Roger 71", "link": "https://stackoverflow.com/users/4373562/roger-71"}, "is_accepted": false, "score": 2, "last_activity_date": 1483827720, "creation_date": 1483827720, "answer_id": 41527238, "question_id": 41520939, "link": "https://stackoverflow.com/questions/41520939/how-to-use-vlookup-function-of-excel-in-perl/41527238#41527238", "title": "How to use Vlookup function of excel in perl", "body": "<p>If you want to process data contained in an xlsx file using only a perl program you can combine this two modules:<br>\n<a href=\"http://search.cpan.org/~mikeb/Spreadsheet-XLSX-0.15/lib/Spreadsheet/XLSX.pm\" rel=\"nofollow noreferrer\">Spreadsheet::XLSX</a><br>\n<a href=\"http://search.cpan.org/~jmcnamara/Excel-Writer-XLSX/lib/Excel/Writer/XLSX.pm\" rel=\"nofollow noreferrer\">Excel::Writer::XLSX</a><br>\nYou can take the xlsx file containing original data and create a new one with the processed data.<br>\nThe first module lets you read data from the excel file (so you can compare values), the second module lets you write a new excel spreadsheet, putting the values in the desired position.<br>\nYou can not edit the original file.  </p>\n\n<p>If instead you want to create an excel file containing a vba function (macro) that will do the processing after the file opening you still have to use the modules listed above, but you'll probably have to deal with 3 files:<br>\n - the file containing the original data;<br>\n - a support xlsx file containing the vba function (that will be extracted and than imported into the new file);<br>\n - the output file where you will merge data and vba function.</p>\n"}, {"tags": [], "owner": {"reputation": 21, "user_id": 7387468, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a99a0501fc0263bafc458529e4f6162f?s=128&d=identicon&r=PG&f=1", "display_name": "Uzma", "link": "https://stackoverflow.com/users/7387468/uzma"}, "is_accepted": false, "score": 0, "last_activity_date": 1483963424, "creation_date": 1483963424, "answer_id": 41547678, "question_id": 41520939, "link": "https://stackoverflow.com/questions/41520939/how-to-use-vlookup-function-of-excel-in-perl/41547678#41547678", "title": "How to use Vlookup function of excel in perl", "body": "<pre><code>Here is code: Sorry to post it as an answer because it wasn't taking complete code\n\nuse strict;\nuse Spreadsheet::ParseExcel;\nuse Spreadsheet::WriteExcel;\nuse Spreadsheet::Read;\nuse Spreadsheet::ParseExcel::SaveParser;\nuse Spreadsheet::XLSX;\n\nmy $parser   = Spreadsheet::ParseExcel-&gt;new();\nmy $workbook = $parser-&gt;parse('new_input.xls');\n\nif ( !defined $workbook ) \n{\n        die $parser-&gt;error(), \".\\n\";\n}\n\nmy $worksheet; \nfor  $worksheet ( $workbook-&gt;worksheets() ) \n{\n    my ( $row_min, $row_max ) = $worksheet-&gt;row_range();\n    my ( $col_min, $col_max ) = $worksheet-&gt;col_range();\n\n    for my $row ( $row_min .. $row_max ) \n    {\n        for my $col ( $col_min .. $col_max ) \n        {\n            my $cell = $worksheet-&gt;get_cell( $row, $col );\n            next unless $cell;\n            #print \"Row, Col    = ($row, $col)\\n\";\n            #print \"Value       = \", $cell-&gt;value(),       \"\\n\";\n            #print \"Unformatted = \", $cell-&gt;unformatted(), \"\\n\";\n            #print \"\\n\";\n            my $formula = $worksheet-&gt;formula('=VLOOKUP($A$1:$A$6711,$M$1:$N$6711,2,0)');\n        }\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 7387468, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a99a0501fc0263bafc458529e4f6162f?s=128&d=identicon&r=PG&f=1", "display_name": "Uzma", "link": "https://stackoverflow.com/users/7387468/uzma"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 823, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1483963424, "creation_date": 1483788518, "last_edit_date": 1483793607, "question_id": 41520939, "link": "https://stackoverflow.com/questions/41520939/how-to-use-vlookup-function-of-excel-in-perl", "title": "How to use Vlookup function of excel in perl", "body": "<p>I have one excel file in that I want to compare A col and M column and if values are identical in both the column then shift/copy last column before 2nd column. I can do that in excel using vlookup function but I want to write a code in perl, but I don't know how to apply formula in perl.\nHere I have given input file which is .xlsx\nThank you in advance</p>\n\n<p>input_file.xlsx</p>\n\n<pre><code>YAL001C YAL001C 100 3483    0   0   1   3483    1   3483    0   6433    YLL054C 2532\nYAL002W YAL002W 100 3825    0   0   1   3825    1   3825    0   7064    YDR374W-A   270\nYAL003W YAL003W 100 621 0   0   1   621 1   621 0   1147    YIR038C 705\nYAL004W YAL005C 100 648 0   0   1   648 672 25  0   1197    YMR252C 405\nYAL004W YAL004W 100 648 0   0   1   648 1   648 0   1197    YDR168W 1521\nYAL005C YAL005C 100 1929    0   0   1   1929    1   1929    0   3563    YOR117W 1305\nYAL005C YAL004W 100 648 0   0   25  672 648 1   0   1197    YMR152W 1098\nYAL007C YAL007C 100 648 0   0   1   648 1   648 0   1197    YJL138C 1188\nYAL008W YAL008W 100 597 0   0   1   597 1   597 0   1103    YML073C 531\nYAL009W YAL009W 100 780 0   0   1   780 1   780 0   1441    YBL089W 1380\nYAL010C YAL010C 100 1482    0   0   1   1482    1   1482    0   2737    YOR038C 2628\nYAL011W YAL011W 100 1878    0   0   1   1878    1   1878    0   3469    YOR220W 798\nYAL012W YAL012W 100 1185    0   0   1   1185    1   1185    0   2189    YIR033W 3342\nYAL013W YAL013W 100 1218    0   0   1   1218    1   1218    0   2250    YKL201C 3537\nYAL014C YAL014C 100 768 0   0   1   768 1   768 0   1419    YPL213W 717\nYAL015C YAL015C 100 1200    0   0   1   1200    1   1200    0   2217    YJL044C 1377\nYAL016C-A   YAL016C-A   100 315 0   0   1   315 1   315 9E-167  582 YDR022C 591\nYAL016C-A   YAL016W 100 191 0   0   1   191 191 1   8E-98   353 YOR053W 342\nYAL016C-B   YAL016C-B   100 186 0   0   1   186 1   186 3E-95   344 YLR233C 2100\nYAL016W YAL016W 100 1908    0   0   1   1908    1   1908    0   3524    YPR058W 924\nYAL016W YAL016C-A   100 191 0   0   1   191 191 1   5E-97   353 YPL026C 1509\nYAL017W YAL017W 100 4071    0   0   1   4071    1   4071    0   7518    YKL145W 1404\nYAL018C YAL018C 100 978 0   0   1   978 1   978 0   1807    YKR091W 741\nYAL019W YAL019W 100 3396    0   0   1   3396    1   3396    0   6272    YBR196C-A   150\nYAL019W-A   YAL019W-A   100 570 0   0   1   570 1   570 0   1053    YER168C 1641\nYAL019W-A   YAL020C 100 366 0   0   1   366 366 1   0   676 YOR306C 1566\nYAL020C YAL020C 100 1002    0   0   1   1002    1   1002    0   1851    YML101C-A   318\nYAL020C YAL019W-A   100 366 0   0   1   366 366 1   0   676 YBR131W 2115\nYAL021C YAL021C 100 2514    0   0   1   2514    1   2514    0   4643    YDR522C 1509\nYAL022C YAL022C 100 1554    0   0   1   1554    1   1554    0   2870    YGL179C 1683\nYAL023C YAL023C 100 2280    0   0   1   2280    1   2280    0   4211    YAR030C 342\nYAL024C YAL024C 100 4308    0   0   1   4308    1   4308    0   7956    YLL048C 4986\nYAL025C YAL025C 100 921 0   0   1   921 1   921 0   1701    YER019C-A   267\nYAL026C YAL026C 100 4068    0   0   1   4068    1   4068    0   7513    YLR204W 336\nYAL026C YAL026C-A   100 194 0   0   3875    4068    1   194 2E-98   359 YBR045C 1920\nYAL026C-A   YAL026C-A   100 438 0   0   1   438 1   438 0   809 YKL032C 1794\nYAL026C-A   YAL026C 100 194 0   0   1   194 3875    4068    2E-99   359 YOR353C 2376\nYAL027W YAL027W 100 786 0   0   1   786 1   786 0   1452    YGR109W-A   873\nYAL028W YAL028W 100 1587    0   0   1   1587    1   1587    0   2931    YEL029C 939\nYAL029C YAL029C 100 4416    0   0   1   4416    1   4416    0   8155    YBR246W 1164\nYAL030W YAL030W 100 354 0   0   1   354 1   354 0   654 YCL005W 771\nYAL031C YAL031C 100 2283    0   0   1   2283    1   2283    0   4217    YMR288W 2916\nYAL031C YAL031W-A   100 229 0   0   2055    2283    309 81  5E-118  424 YGL019W 837\nYAL031W-A   YAL031W-A   100 309 0   0   1   309 1   309 2E-163  571 YDR169C-A   150\nYAL031W-A   YAL031C 100 229 0   0   81  309 2283    2055    6E-119  424 YDL169C 672\nYAL032C YAL032C 100 1140    0   0   1   1140    1   1140    0   2106    YER114C 3123\nYAL033W YAL033W 100 522 0   0   1   522 1   522 0   965 YOR032W-A   201\nYAL034C YAL034C 100 1242    0   0   1   1242    1   1242    0   2294    YPL089C 2031\nYAL034C-B   YAL034C-B   100 354 0   0   1   354 1   354 0   654 YLR313C 1593\nYAL034C-B   YAL034W-A   100 125 0   0   1   125 125 1   4E-61   231 YHR187W 930\nYAL034W-A   YAL034W-A   100 870 0   0   1   870 1   870 0   1607    YDR243C 1767\nYAL034W-A   YAL034C-B   100 125 0   0   1   125 125 1   1E-60   231 YJR087W 351\n</code></pre>\n"}, {"tags": ["perl", "file", "file-handling", "filehandle"], "comments": [{"owner": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "edited": false, "score": 0, "creation_date": 1483775208, "post_id": 41518786, "comment_id": 70244189, "body": "Re: <code>Is there any way to move file handle position line wise?</code> No. <a href=\"http://xyproblem.info/\" rel=\"nofollow noreferrer\">xyproblem.info</a>"}], "answers": [{"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 4, "last_activity_date": 1483776868, "last_edit_date": 1483776868, "creation_date": 1483773292, "answer_id": 41518895, "question_id": 41518786, "link": "https://stackoverflow.com/questions/41518786/how-can-i-change-file-pointer-position-4-line-back-while-writing-the-file-using/41518895#41518895", "title": "How can I change File pointer position 4 line back while writing the file using perl?", "body": "<p>You can indeed move the position around using <a href=\"http://perldoc.perl.org/functions/seek.html\" rel=\"nofollow noreferrer\"><code>seek</code></a>. Files don't have indexes of lines, though, so you'll either have to keep track of the position of lines (as obtained using <a href=\"http://perldoc.perl.org/functions/tell.html\" rel=\"nofollow noreferrer\"><code>tell</code></a>) as you write them, or discover them using an approach similar to <a href=\"http://search.cpan.org/perldoc?File::ReadBackwards\" rel=\"nofollow noreferrer\">File::ReadBackwards</a>'s. </p>\n\n<p>What do you want to happen to the contents of the file that's between the position to which you seek and the end of the file? You will need to copy it  if you want to insert lines, or <a href=\"http://perldoc.perl.org/functions/truncate.html\" rel=\"nofollow noreferrer\"><code>truncate</code></a> the file if you want to delete it. </p>\n\n<p>If you can, maintain a buffer instead.</p>\n\n<pre><code>my @buf;\nwhile (...) {\n   if (...) {\n      splice(@buf, -4, 0, $line);   # Insert the line 4 lines from the end.\n   } else {\n      push(@buf, $line);            # Append a line.\n   }\n\n   print($fh shift(@buf)) while @buf &gt; 4;\n}\n\nprint($fh @buf);\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1483797449, "post_id": 41520497, "comment_id": 70250200, "body": "I&#39;m not sure I&#39;d call it advanced, as much as something that is (almost?) unique to perl. So means you have people who don&#39;t really understand the concept."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 1, "creation_date": 1483798444, "post_id": 41520497, "comment_id": 70250505, "body": "@Sobrique I chose the word <i>advanced</i> since it&#39;s hardly covered in modern learning resources, and there are not a lot of common use cases. I agree that it&#39;s rather unique, though I do remember seeing a talk recently where someone said that a couple newer language now have a similar feature, and that we&#39;ve had it for a long time. But I can&#39;t recall where that was, or which languages."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 1, "creation_date": 1483814812, "post_id": 41520497, "comment_id": 70256170, "body": "No, true enough. With OO being commonplace - and generally a better understood paradigm - the need for <code>tie</code> is diminished. And arguably, it&#39;s a bit hazardous to have a &#39;magic&#39; thing that looks like a normal variable."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1483828005, "post_id": 41520497, "comment_id": 70260517, "body": "Tie::File is almost always an abysmal solution. You&#39;re better off reading the entire file into memory. It will use less memory and be incredibly faster"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1483828107, "post_id": 41520497, "comment_id": 70260543, "body": "Advanced seems an appropriate term. It&#39;s on par with operator overloading which is an advanced topic"}], "tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": false, "score": 2, "last_activity_date": 1483814870, "last_edit_date": 1483814870, "creation_date": 1483785599, "answer_id": 41520497, "question_id": 41518786, "link": "https://stackoverflow.com/questions/41518786/how-can-i-change-file-pointer-position-4-line-back-while-writing-the-file-using/41520497#41520497", "title": "How can I change File pointer position 4 line back while writing the file using perl?", "body": "<p>You can use <a href=\"https://metacpan.org/pod/Tie::File\" rel=\"nofollow noreferrer\">Tie::File</a> to do all the magic for you. It <a href=\"http://perldoc.perl.org/functions/tie.html\" rel=\"nofollow noreferrer\">ties</a> a file to an array so each line is represented by an array element. <a href=\"http://perldoc.perl.org/perltie.html\" rel=\"nofollow noreferrer\">Tying</a> is a mechanism that is very powerful, but seems to be considered very advanced<sup>1</sup> nowadays.</p>\n\n<p>That makes it possible to use normal array operations like <a href=\"http://perldoc.perl.org/functions/push.html\" rel=\"nofollow noreferrer\"><code>push</code></a> and <a href=\"http://perldoc.perl.org/functions/unshift.html\" rel=\"nofollow noreferrer\"><code>unshift</code></a> or even <a href=\"http://perldoc.perl.org/functions/splice.html\" rel=\"nofollow noreferrer\"><code>splice</code></a> on the file. You don't need to put newlines. It uses <code>$/</code> automatically.</p>\n\n<pre><code>use Tie::File;\n\ntie my @file, 'Tie::File', 'foo.txt' or die $!;\n\npush @file, \"Line 1\";\npush @file, \"Line 2\";\npush @file, \"Line 3\";\npush @file, \"Line 4\";\npush @file, \"Line 5\";\n\n# to overwrite\n$file[-4] = 'Line 6 overwrote line 2';\n\n# to append\n$file[-3] .= ' and Line 7';\n\n# to insert\nsplice @file, -2, 0, 'Line 8';\n</code></pre>\n\n<p>The file will now contain:</p>\n\n<pre><code>Line 1\nLine 6 overwrote line 2\nLine 3 and Line 7\nLine 8\nLine 4\nLine 5\n</code></pre>\n\n<hr>\n\n<p><sup>1) I say <em>advanced</em>, but really I mean that it is not widely spread or understood nowadays. There are not a lot of learning materials that cover <code>tie</code>, and the original use-case of database file access is quite dated and. I would say a lot of people have never heard of it, though it's a powerful feature.</sup></p>\n"}], "owner": {"reputation": 53, "user_id": 6634729, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/8fbd232a5b4a7080d2b06774f176eb51?s=128&d=identicon&r=PG&f=1", "display_name": "Sanket", "link": "https://stackoverflow.com/users/6634729/sanket"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 480, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1483814870, "creation_date": 1483772363, "last_edit_date": 1483772773, "question_id": 41518786, "link": "https://stackoverflow.com/questions/41518786/how-can-i-change-file-pointer-position-4-line-back-while-writing-the-file-using", "title": "How can I change File pointer position 4 line back while writing the file using perl?", "body": "<p>I am writing the file using Perl. There is a situation where after writing 4 lines, I have to go back 4 lines and write something then come back to end of file and again start write. Is there any way to move file handle position line wise?</p>\n"}, {"tags": ["regex", "perl", "awk", "sed"], "answers": [{"comments": [{"owner": {"reputation": 581, "user_id": 2799940, "user_type": "registered", "accept_rate": 13, "profile_image": "https://www.gravatar.com/avatar/e4fd00e6b370e5627b4ec535d036541f?s=128&d=identicon&r=PG&f=1", "display_name": "Know Nothing", "link": "https://stackoverflow.com/users/2799940/know-nothing"}, "edited": false, "score": 0, "creation_date": 1483773307, "post_id": 41518263, "comment_id": 70243711, "body": "Thank you very much, what about using sed"}, {"owner": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "edited": false, "score": 0, "creation_date": 1483814000, "post_id": 41518263, "comment_id": 70255836, "body": "sed is for simple substitutions on individual lines, that is all. Using sed for anything else is completely inappropriate as there&#39;s always more clear, efficient, robust, portable, maintainable, extensible, etc. ways to do whatever it is you want to do and it would require use of arcane language constructs that became obsolete over 40 years ago when awk was invented."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 1, "last_activity_date": 1483773483, "last_edit_date": 1483773483, "creation_date": 1483768076, "answer_id": 41518263, "question_id": 41518123, "link": "https://stackoverflow.com/questions/41518123/replace-multi-line-text-with-multiline-text-in-sed-and-perl/41518263#41518263", "title": "replace multi line text with multiline text in sed and perl", "body": "<pre><code>perl -pe's/exit \\K\\d+/152/ if $f; $f = /status/'\n</code></pre>\n\n<p>Usage:</p>\n\n<pre><code>perl -i~ -pe'...' file            # Edit in place with backup\nperl -i -pe'...' file             # Edit in place without backup\nperl -pe'...' file.in &gt;file.out   # Read from file\nperl -pe'...' &lt;file.in &gt;file.out  # Read from stdin\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 14904, "user_id": 3161993, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/56e8M.png?s=128&g=1", "display_name": "Akshay", "link": "https://stackoverflow.com/users/3161993/akshay"}, "is_accepted": true, "score": 3, "last_activity_date": 1483807124, "last_edit_date": 1483807124, "creation_date": 1483775769, "answer_id": 41519197, "question_id": 41518123, "link": "https://stackoverflow.com/questions/41518123/replace-multi-line-text-with-multiline-text-in-sed-and-perl/41519197#41519197", "title": "replace multi line text with multiline text in sed and perl", "body": "<p>Using <code>Awk</code></p>\n\n<p><strong>Input</strong></p>\n\n<pre><code>$ cat f\n      start\n      exit 0\n\n      status\n      exit 0\n\n      stop\n      exit 0\n</code></pre>\n\n<p><strong>Output</strong></p>\n\n<pre><code>$ awk '/exit/ &amp;&amp; p {sub($NF,\"152\")}{p=/status/}1'  f\n      start\n      exit 0\n\n      status\n      exit 152\n\n      stop\n      exit 0\n</code></pre>\n\n<p><strong>Explanation</strong></p>\n\n<ul>\n<li><code>p=/status/</code> Set variable <code>p</code> true whenever <code>awk</code> finds word status</li>\n<li><code>/exit/ &amp;&amp; p</code>   when <code>awk</code> finds word <strong>exit</strong> on current record and variable <code>p</code> evaluates true then</li>\n</ul>\n\n<blockquote>\n  <p>sub(regexp, replacement [, target])</p>\n</blockquote>\n\n<p>Search target, which is treated as a string, for the leftmost, longest substring matched by the regular expression regexp. Modify the entire string by replacing the matched text with replacement. The modified string becomes the new value of target. Return the number of substitutions made (zero or one).  If 3rd argument is omitted, then the default is to use and alter <code>$0</code>.</p>\n\n<ul>\n<li><code>sub($NF,\"152\")</code></li>\n</ul>\n\n<p>Substitute last field (<code>$NF</code>) with <code>152</code> of current record, since 3rd argument is not given hence, default <code>$0</code> is altered. </p>\n\n<ul>\n<li><code>} 1</code></li>\n</ul>\n\n<p><code>1</code> always evaluates to true, it performs default operation <code>{print $0}</code></p>\n"}, {"tags": [], "owner": {"reputation": 41196, "user_id": 887539, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5baef9617bdee6db2f534c118bcbccee?s=128&d=identicon&r=PG", "display_name": "andlrc", "link": "https://stackoverflow.com/users/887539/andlrc"}, "is_accepted": false, "score": 0, "last_activity_date": 1483797807, "creation_date": 1483797807, "answer_id": 41522250, "question_id": 41518123, "link": "https://stackoverflow.com/questions/41518123/replace-multi-line-text-with-multiline-text-in-sed-and-perl/41522250#41522250", "title": "replace multi line text with multiline text in sed and perl", "body": "<p>With sed one can use:</p>\n\n<pre><code>$ sed '/status/{n;s/0/152/}' input\n      start\n      exit 0\n\n      status\n      exit 152\n\n      stop\n      exit 0\n</code></pre>\n"}], "owner": {"reputation": 581, "user_id": 2799940, "user_type": "registered", "accept_rate": 13, "profile_image": "https://www.gravatar.com/avatar/e4fd00e6b370e5627b4ec535d036541f?s=128&d=identicon&r=PG&f=1", "display_name": "Know Nothing", "link": "https://stackoverflow.com/users/2799940/know-nothing"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 231, "favorite_count": 0, "accepted_answer_id": 41519197, "answer_count": 3, "score": -2, "last_activity_date": 1483807124, "creation_date": 1483766680, "last_edit_date": 1483768033, "question_id": 41518123, "link": "https://stackoverflow.com/questions/41518123/replace-multi-line-text-with-multiline-text-in-sed-and-perl", "title": "replace multi line text with multiline text in sed and perl", "body": "<p>Here is my file</p>\n\n<pre><code>      start\n      exit 0\n\n      status\n      exit 0\n\n      stop\n      exit 0\n</code></pre>\n\n<p>the result file should be</p>\n\n<pre><code>      start\n      exit 0\n\n      status\n      exit 152\n\n      stop\n      exit 0\n</code></pre>\n\n<p>any help is appreciated\nHow can I do it using sed and perl</p>\n"}, {"tags": ["perl", "oop"], "comments": [{"owner": {"reputation": 2296, "user_id": 1575416, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/32e1e3caa938438115454a4688a3d4a2?s=128&d=identicon&r=PG", "display_name": "aggaton", "link": "https://stackoverflow.com/users/1575416/aggaton"}, "edited": false, "score": 2, "creation_date": 1483746485, "post_id": 41516161, "comment_id": 70238556, "body": "Check this out <a href=\"http://stackoverflow.com/questions/1734385/how-do-i-define-private-or-internal-methods-in-object-oriented-perl\" title=\"how do i define private or internal methods in object oriented perl\">stackoverflow.com/questions/1734385/&hellip;</a>"}, {"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 0, "creation_date": 1483746936, "post_id": 41516161, "comment_id": 70238712, "body": "there doesn&#39;t seem to me to be any reason not to just call it as <code>$self-&gt;_private_sub(%arg)</code>"}], "answers": [{"comments": [{"owner": {"reputation": 7570, "user_id": 17945, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/e8cbc0b9ed29b027a127d8df309af5a6?s=128&d=identicon&r=PG", "display_name": "reinierpost", "link": "https://stackoverflow.com/users/17945/reinierpost"}, "edited": false, "score": 0, "creation_date": 1483747551, "post_id": 41516194, "comment_id": 70238894, "body": "I think you&#39;re right, and your convention of using a leading underscore is widely used."}], "tags": [], "owner": {"reputation": 2002, "user_id": 2763000, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a5ea0af3a37d8989110a8fb4c656efb2?s=128&d=identicon&r=PG&f=1", "display_name": "goug", "link": "https://stackoverflow.com/users/2763000/goug"}, "is_accepted": false, "score": 4, "last_activity_date": 1483751625, "last_edit_date": 1483751625, "creation_date": 1483746444, "answer_id": 41516194, "question_id": 41516161, "link": "https://stackoverflow.com/questions/41516161/how-to-organize-private-methods-on-perl-objects/41516194#41516194", "title": "How to organize private methods on Perl objects?", "body": "<p>To my knowledge, there's no \"correct\" way. Perl doesn't provide the ability to hide the functions, at least that I've ever run across. What I've done is use a naming standard where I start the internal-only function names with an underscore and clearly document that they're never to be called by external callers.</p>\n\n<p>EDIT: The other answers triggered a thought. In each private method, you could check the results of the \"caller ()\" function and abort if the caller is anyone other than the local module. Honestly, I personally wouldn't go to the trouble, but if it's really important to you for some reason, that would emphasize the private nature of these methods.</p>\n"}, {"comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1483747611, "post_id": 41516275, "comment_id": 70238909, "body": "Alright, this is a real mind-job :)  (Just ... they&#39;ll probably look it up in the source and still go ahead)"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1483782802, "post_id": 41516275, "comment_id": 70246000, "body": "That is horrible. Private or not, security through obscurity is hardly a good idea. This will make your maintenance programmer hate you (remember that could be you), and stuff will break every time a user (or you) tries to call that <code>_private_sub</code> as a method. Mixing methods and functions in one class should not be the way to go."}, {"owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 0, "creation_date": 1483810415, "post_id": 41516275, "comment_id": 70254504, "body": "I often wish I could upvote my own answers, but yeah, sometimes I wish I could downvote them, too."}], "tags": [], "owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "is_accepted": false, "score": 1, "last_activity_date": 1483746988, "creation_date": 1483746988, "answer_id": 41516275, "question_id": 41516161, "link": "https://stackoverflow.com/questions/41516161/how-to-organize-private-methods-on-perl-objects/41516275#41516275", "title": "How to organize private methods on Perl objects?", "body": "<p>As opposed to <code>$self-&gt;_private_sub(...)</code>? In my mind, the <code>$obj-&gt;_method</code> notation is always used with function that act on an instance of your class, and other kinds of calls are always used for other kinds of functions.</p>\n\n<p>But if you're going to be paranoid, why not use an unconventional way of packing your arguments that will confound anyone that tries to use your private method in an object oriented way?</p>\n\n<pre><code>sub do_stuff {\n    my ( $self, %arg ) = @_;\n    ...\n    _private_sub( %arg, $self );\n}\n\nsub _private_sub {\n    my $self = pop;\n    my %args = @_;\n    ...\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 0, "creation_date": 1483747071, "post_id": 41516278, "comment_id": 70238749, "body": "Doesn&#39;t that make it hard for subclasses to inherit your private method?"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 0, "creation_date": 1483747175, "post_id": 41516278, "comment_id": 70238777, "body": "@mob Well, it does, thus the warning. It still can be a choice, for those that will not be subclassed.  Are you saying that it shouldn&#39;t be used really (as  a matter of &quot;good practices&quot;)?"}, {"owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 1, "creation_date": 1483747255, "post_id": 41516278, "comment_id": 70238804, "body": "No, but I am saying I just learned that <code>$sqrt=sub{sqrt($_[0])}; print 9-&gt;$sqrt</code> will actually output 3!"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 1, "creation_date": 1483747478, "post_id": 41516278, "comment_id": 70238872, "body": "@mob Huh ... ?? ... um, it does work!  I don&#39;t get it (yet -- don&#39;t tell me please! :)."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1483782531, "post_id": 41516278, "comment_id": 70245940, "body": "While you are at it, look up mst&#39;s talk <i>you did what?</i> on YouTube. :-)"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1483782928, "post_id": 41516278, "comment_id": 70246029, "body": "BTW, Moose doesn&#39;t help here. It makes everything more convenient, but it is also just Perl. There is hardly any magic involved and it cannot make things private."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1483785569, "post_id": 41516278, "comment_id": 70246754, "body": "@simbabque  Thank you, I&#39;ll look it up.  As for Moose, I didn&#39;t think one can make it <i>truly</i> private (but I did hope for something close to it) -- but I mean that it must stimulate a different mind set. I don&#39;t use it day to day but I&#39;d expect it to focus one on a far higher level and then it may simply never come to all kinds of picky decisions. (I&#39;m inching toward picking up a module for regular use, toward Moo.)"}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": true, "score": 3, "last_activity_date": 1483834947, "last_edit_date": 1495539949, "creation_date": 1483747000, "answer_id": 41516278, "question_id": 41516161, "link": "https://stackoverflow.com/questions/41516161/how-to-organize-private-methods-on-perl-objects/41516278#41516278", "title": "How to organize private methods on Perl objects?", "body": "<p>If your <code>do_stuff</code> method needs the functionality that you decided should be kept \"private\" then by all means call <code>_private_sub</code> within it.  That is precisely its purpose.  Of course, having a sub be \"private\" is a matter of convention as it cannot be enforced.</p>\n\n<p>I'd like to mention another way, of using coderefs for private subs</p>\n\n<pre><code>my $_private = sub { ... };  # must be at least predeclared\n\nsub do_stuff {\n    my ($self, %arg) = @_;\n    # ...\n    my $from_private = $self-&gt;$_private-&gt;(@args);    # or\n    my $more_private = $_private-&gt;($self, @args);\n}\n</code></pre>\n\n<p>The syntax is odd but that surely warns the users that it is a private method. This makes it hard for subclasses to inherit, thanks to <a href=\"https://stackoverflow.com/users/168657/mob\">mob</a> for emphasizing this. </p>\n\n<p>The second invocation uses <code>$_private</code> as a <em>function</em> rather than a method, so we have to pass the object if it needs it. This further warns against its use. Then it also doesn't undergo the normal method lookup process (and is thus slightly faster), something to be well aware of.</p>\n\n<p>I am a little uncertain as to what exactly the question seeks.</p>\n\n<p>If it is about whether to use \"private\" subroutines in your code, then there is really no accepted best practice.  They are very useful, but they are not truly private.  I use them, liberally.  </p>\n\n<p>A full answer is to use <a href=\"http://search.cpan.org/~ether/Moose-2.1807/lib/Moose.pm\" rel=\"nofollow noreferrer\">Moose</a> or <a href=\"http://search.cpan.org/~haarg/Moo-2.003000/lib/Moo.pm\" rel=\"nofollow noreferrer\">Moo</a>, or some other module.</p>\n"}, {"tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 1, "last_activity_date": 1483808564, "last_edit_date": 1592644375, "creation_date": 1483808564, "answer_id": 41524070, "question_id": 41516161, "link": "https://stackoverflow.com/questions/41516161/how-to-organize-private-methods-on-perl-objects/41524070#41524070", "title": "How to organize private methods on Perl objects?", "body": "<p>All of the answers you have received so far say that it can't be done. But it can - in Perl 5.18 and later. See the <a href=\"https://metacpan.org/pod/perlsub#Lexical-Subroutines\" rel=\"nofollow noreferrer\">section on lexical subroutines in <code>perldoc perlsub</code></a>.</p>\n<blockquote>\n<p><strong>Lexical Subroutines</strong></p>\n<p><strong>WARNING:</strong> Lexical subroutines are still experimental. The feature may be modified or removed in future versions of Perl.</p>\n<p>Lexical subroutines are only available under the <code>use feature 'lexical_subs'</code> pragma, which produces a warning unless the &quot;experimental::lexical_subs&quot; warnings category is disabled.</p>\n<p>Beginning with Perl 5.18, you can declare a private subroutine with <code>my</code> or <code>state</code>. As with state variables, the state keyword is only available under <code>use feature 'state'</code> or <code>use 5.010</code> or higher.</p>\n<p>These subroutines are only visible within the block in which they are declared, and only after that declaration:</p>\n<pre><code>no warnings &quot;experimental::lexical_subs&quot;;\nuse feature 'lexical_subs'; \n\nfoo();              # calls the package/global subroutine\n\nstate sub foo {\n  foo();            # also calls the package subroutine\n}\n\nfoo();              # calls &quot;state&quot; sub\nmy $ref = \\&amp;foo;    # take a reference to &quot;state&quot; sub\n\nmy sub bar { ... }\nbar();              # calls &quot;my&quot; sub\n</code></pre>\n<p>To use a lexical subroutine from inside the subroutine itself, you must predeclare it. The <code>sub foo {...}</code> subroutine definition syntax respects any previous <code>my sub;</code> or <code>state sub;</code> declaration.</p>\n<pre><code>my sub baz;         # predeclaration\nsub baz {           # define the &quot;my&quot; sub\n  baz();            # recursive call\n}\n</code></pre>\n</blockquote>\n"}], "owner": {"reputation": 223, "user_id": 5393293, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/af02e4b6b16115257c74eb388e944ba5?s=128&d=identicon&r=PG&f=1", "display_name": "Haloor", "link": "https://stackoverflow.com/users/5393293/haloor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 286, "favorite_count": 0, "accepted_answer_id": 41516278, "answer_count": 4, "score": 4, "last_activity_date": 1483834947, "creation_date": 1483746224, "question_id": 41516161, "link": "https://stackoverflow.com/questions/41516161/how-to-organize-private-methods-on-perl-objects", "title": "How to organize private methods on Perl objects?", "body": "<p>What is the correct way to handle methods which will not be called by the user? For example if the user calls a method, say <code>do_stuff()</code> from a driver script, and if <code>do_stuff()</code> relies on other subroutines, is it best practice to call those subs from within the <code>do_stuff()</code> method as follows:</p>\n\n<pre><code>sub do_stuff {\n    my ( $self, %arg ) = @_;\n    #does it things\n    #and then calls the private sub as follows\n    _private_sub( $self, %arg );\n}\n</code></pre>\n"}, {"tags": ["perl", "file"], "comments": [{"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 2, "creation_date": 1483727513, "post_id": 41511936, "comment_id": 70230057, "body": "I&#39;m guessing the sitemap won&#39;t work if you stop writing at exactly 10MB...what if the 10MB mark is in the middle of a tag?"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1483734766, "post_id": 41511936, "comment_id": 70233733, "body": "I don&#39;t see how <code>Number::Bytes::Human</code> will help you. It simply changes the representation of powers of 1024 to a string, which is only really useful when you are building output for human consumption. It won&#39;t help you write an algorithm based on file sizes."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1483738035, "post_id": 41511936, "comment_id": 70235349, "body": "I wouldn&#39;t have thought a site map over 10MB was of much use"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1483984780, "post_id": 41511936, "comment_id": 70313322, "body": "Please take a look at <a href=\"http://stackoverflow.com/help/someone-answers\"><i>What should I do when someone answers my question?</i></a>"}], "answers": [{"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": true, "score": 4, "last_activity_date": 1483735036, "creation_date": 1483735036, "answer_id": 41513953, "question_id": 41511936, "link": "https://stackoverflow.com/questions/41511936/write-to-a-file-until-it-reaches-a-certain-size/41513953#41513953", "title": "Write to a file until it reaches a certain size", "body": "<p>You may use the <code>tell</code> method on a file handle to establish the offset where the next data will be written. The method is provided by <a href=\"https://metacpan.org/pod/IO::Seekable\" rel=\"nofollow noreferrer\"><code>IO::Seekable</code></a>, which is subclassed by <a href=\"https://metacpan.org/pod/IO::File\" rel=\"nofollow noreferrer\"><code>IO::File</code></a>. Since v5.14 of Perl, <code>IO::File</code> is autoloaded on demand, so there is no need to explicitly <code>use</code> it</p>\n\n<p>Here's an example program that writes to a file until it exceeds 10MB</p>\n\n<pre><code>use strict;\nuse warnings 'all';\nuse autodie;\nuse feature 'say';\n\nopen my $fh, '&gt;', '10MB.txt';\n\nsay $fh-&gt;tell;\n\nprint $fh '1234567890' while $fh-&gt;tell &lt; 10 * 1024 * 1024;\n\nsay $fh-&gt;tell;\n\nclose $fh;\n</code></pre>\n\n<h3>output</h3>\n\n<pre><code>0\n10485760\n</code></pre>\n\n<p>Note that you you will have to be careful to reassemble the XML data correctly after it has been transmitted, as an XML document must contain exactly one root element</p>\n"}], "owner": {"reputation": 51, "user_id": 2452864, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f7493d1ef9445ce25b55d839ea058729?s=128&d=identicon&r=PG", "display_name": "Don Ellis", "link": "https://stackoverflow.com/users/2452864/don-ellis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 242, "favorite_count": 0, "accepted_answer_id": 41513953, "answer_count": 1, "score": 2, "last_activity_date": 1483735036, "creation_date": 1483727068, "last_edit_date": 1483734318, "question_id": 41511936, "link": "https://stackoverflow.com/questions/41511936/write-to-a-file-until-it-reaches-a-certain-size", "title": "Write to a file until it reaches a certain size", "body": "<p>I am writing an XML file for sitemap and Google says that the file cannot be greater than 10MB.</p>\n\n<p>I was wondering if there is a way to write to a file until a certain file size is met, then close it and open a new one.</p>\n\n<p>I have it so that once it reaches a certain number of entries, it will close file and open a new one.</p>\n\n<p>I was using <a href=\"https://metacpan.org/pod/Number::Bytes::Human\" rel=\"nofollow noreferrer\"><code>Number::Bytes::Human</code></a> to try to get the file size with no luck.</p>\n"}, {"tags": ["perl", "hash"], "comments": [{"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 3, "creation_date": 1483725955, "post_id": 41511602, "comment_id": 70229207, "body": "Always <code>use strict;</code> and <code>use warnings &#39;all&#39;;</code>. Turning on warnings would have given you a clue: &quot;Reference found where even-sized list expected&quot; (pointing to the line <code>%phoneNumbers={...};</code>)"}, {"owner": {"reputation": 121, "user_id": 7343081, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh4.googleusercontent.com/-IruSezP4uhU/AAAAAAAAAAI/AAAAAAAAABc/qGExR61C1Eo/photo.jpg?sz=128", "display_name": "Ramanjaneyulu Gudipati", "link": "https://stackoverflow.com/users/7343081/ramanjaneyulu-gudipati"}, "reply_to_user": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1483726611, "post_id": 41511602, "comment_id": 70229587, "body": "Now it&#39;s showing some compilation errors."}], "answers": [{"comments": [{"owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "edited": false, "score": 0, "creation_date": 1483728591, "post_id": 41511908, "comment_id": 70230586, "body": "Instead of having the global <code>$namesearch</code>, I&#39;d recommend localizing it: <code>while(1){my $namesearch = &lt;STDIN&gt;;...; last if $namesearch eq &#39;END&#39;;...}</code>"}], "tags": [], "owner": {"reputation": 403, "user_id": 7349485, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lzfEj.jpg?s=128&g=1", "display_name": "carlosn", "link": "https://stackoverflow.com/users/7349485/carlosn"}, "is_accepted": true, "score": 1, "last_activity_date": 1483726971, "creation_date": 1483726971, "answer_id": 41511908, "question_id": 41511602, "link": "https://stackoverflow.com/questions/41511602/debugging-the-following-perl-script-on-hashes/41511908#41511908", "title": "Debugging the following perl script on hashes", "body": "<p>As a good practice you should use <a href=\"http://perldoc.perl.org/strict.html\" rel=\"nofollow noreferrer\">strict</a> and <a href=\"http://perldoc.perl.org/warnings.html\" rel=\"nofollow noreferrer\">warnings</a> pragma in your code to make it easy to debug.</p>\n\n<p><strong>Strict</strong></p>\n\n<blockquote>\n  <p>The strict pragma disables certain Perl expressions that could\n  behave unexpectedly or are difficult to debug, turning them into\n  errors. The effect of this pragma is limited to the current file or\n  scope block.</p>\n</blockquote>\n\n<p><strong>Warnings</strong></p>\n\n<blockquote>\n  <p>This pragma works just like the strict pragma. This means that the\n  scope of the warning pragma is limited to the enclosing block. It also\n  means that the pragma setting will not leak across files (via use,\n  require or do). This allows authors to independently define the degree\n  of warning checks that will be applied to their module.</p>\n</blockquote>\n\n<p>I did some changes in your code and there are a few things that you should do to make it works:</p>\n\n<pre><code>use strict;\nuse warnings;\nuse diagnostics;\n\n#Always declare your variables\nmy $namesearch = \"\";\n\n#Change your hash ref to a simple hash\nmy %phoneNumbers = ( \"ramu\" =&gt; 123, \"rishi\" =&gt; 456, \"sai\" =&gt; 789 );\n\nwhile ( $namesearch ne \"END\" ) {\n    print(\"Enter name to search:\\n\");\n    $namesearch = &lt;STDIN&gt;;\n    chomp $namesearch;\n    if ( exists( $phoneNumbers{$namesearch} ) ) {\n        print\n          \"The phone Number of $namesearch is: ($phoneNumbers{$namesearch})\\n\";\n    }\n    elsif ( $namesearch eq \"END\" ) {\n        last;\n    }\n    else {\n        print \"Name not found in book\\n\";\n    }\n}\n</code></pre>\n\n<p>Also check at perldoc about references ( <a href=\"http://perldoc.perl.org/perlreftut.html\" rel=\"nofollow noreferrer\" title=\"perlreftut\">perlreftut</a> ) There are some explanations about how to use properly, because the syntax will change depending on what variable are you using like arrays or hashes for example.</p>\n"}], "owner": {"reputation": 121, "user_id": 7343081, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh4.googleusercontent.com/-IruSezP4uhU/AAAAAAAAAAI/AAAAAAAAABc/qGExR61C1Eo/photo.jpg?sz=128", "display_name": "Ramanjaneyulu Gudipati", "link": "https://stackoverflow.com/users/7343081/ramanjaneyulu-gudipati"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 92, "favorite_count": 0, "accepted_answer_id": 41511908, "answer_count": 1, "score": 0, "last_activity_date": 1483726971, "creation_date": 1483725800, "question_id": 41511602, "link": "https://stackoverflow.com/questions/41511602/debugging-the-following-perl-script-on-hashes", "title": "Debugging the following perl script on hashes", "body": "<p>I am working on a perl script that does search for a name in hash returns the phone number of that person. Just Like looking for a key in hash and returning the value of that found key. Otherwise It would print \"name not found in book\". I am unable to access the elements when I am giving a value that is existing in the Hash. What do I need to modify the code?</p>\n\n<pre><code>$namesearch=\"\";\n%phoneNumbers={\"ramu\"=&gt;123,\"rishi\"=&gt;456,\"sai\"=&gt;789};\nwhile($namesearch ne \"END\")\n{\n   print(\"Enter name to search:\\n\");\n   $namesearch=&lt;STDIN&gt;;\n   chomp $namesearch;\nif(exists($phoneNumbers{$namesearch}))\n{\n     print \"The phone Number of $namesearch is: ($phoneNumbers{$namesearch})\\n\";\n }\n elsif($namesearch eq \"END\")\n {\n     last;\n }\n else\n {\n     print \"Name not found in book\\n\";\n  }   \n}\n</code></pre>\n\n<p>The output I am getting is:</p>\n\n<pre><code>output \nEnter name to search:\nramu\nName not found in book\n</code></pre>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 0, "creation_date": 1483722068, "post_id": 41510514, "comment_id": 70226989, "body": "What versions of 32- and 64-bit perl do you have?"}, {"owner": {"reputation": 23, "user_id": 7384820, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d7dec867c992d324b532a4faef5b98e1?s=128&d=identicon&r=PG&f=1", "display_name": "izbabelle", "link": "https://stackoverflow.com/users/7384820/izbabelle"}, "reply_to_user": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 0, "creation_date": 1483727519, "post_id": 41510514, "comment_id": 70230061, "body": "64-bit : v5.22.1, 32-bit : v5.14"}], "answers": [{"tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": true, "score": 3, "last_activity_date": 1483722106, "creation_date": 1483722106, "answer_id": 41510568, "question_id": 41510514, "link": "https://stackoverflow.com/questions/41510514/lowercase-special-characters-with-perl-on-64-bit-system/41510568#41510568", "title": "Lowercase special characters with perl on 64-bit system", "body": "<p>You also need to specify the encoding of the input and output.</p>\n\n<pre><code>use open IO =&gt; ':encoding(iso-8859-1)', ':std';\n</code></pre>\n\n<p>You can also use</p>\n\n<pre><code>use open IO =&gt; ':locale', ':std';\n</code></pre>\n\n<p>but in that case, you need to set the locale in a BEGIN block before setting the <code>open</code> layer:</p>\n\n<pre><code>BEGIN { setlocale(LC_CTYPE, \"fr_CA.ISO-8859-1\"); }\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 7384820, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d7dec867c992d324b532a4faef5b98e1?s=128&d=identicon&r=PG&f=1", "display_name": "izbabelle", "link": "https://stackoverflow.com/users/7384820/izbabelle"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 81, "favorite_count": 0, "accepted_answer_id": 41510568, "answer_count": 1, "score": 2, "last_activity_date": 1483722106, "creation_date": 1483721916, "question_id": 41510514, "link": "https://stackoverflow.com/questions/41510514/lowercase-special-characters-with-perl-on-64-bit-system", "title": "Lowercase special characters with perl on 64-bit system", "body": "<p>I want to process a text file which contains a long list of sentences which have the form :</p>\n\n<pre><code>&lt;s&gt;  Hello world  &lt;/s&gt;\n&lt;s&gt;  \u00c7a world  &lt;/s&gt;\n&lt;s&gt;  He llo world  &lt;/s&gt;\n&lt;s&gt;  H.E.L.L.O world  &lt;/s&gt;\n</code></pre>\n\n<p>I want to lowercase the first letter of the first word of each sentence (\"Hello\" -> \"hello\") using Perl (5.22.1). I also don't want to modify abbreviations (eg. A.B.C.). \nMy problem is that the file might contain special characters (eg. \u00c7 ) and I think their encoding gives Perl a hard time . </p>\n\n<p>The file is encoded in ISO-8859-1. This is the code I use:</p>\n\n<pre><code>use strict;\nuse warnings;\nuse POSIX qw(locale_h);\nuse locale;\nsetlocale(LC_CTYPE, \"fr_CA.ISO-8859-1\");\n\nwhile (&lt;STDIN&gt;) {\n\n  s/(^&lt;s&gt; +)(\\w[^\\.\\ ][^\\ ]*)/\n    $1.lc($2)\n  /ge;\n\n  print;\n}\n</code></pre>\n\n<p>If I process the file with that code on cygwin (windows <strong>64</strong>-bit), the result I get is :</p>\n\n<pre><code>&lt;s&gt;  hello world  &lt;/s&gt;\n&lt;s&gt;  \u00c7a world  &lt;/s&gt;\n&lt;s&gt;  he llo world  &lt;/s&gt;\n&lt;s&gt;  H.E.L.L.O world  &lt;/s&gt;\n</code></pre>\n\n<p>The \"\u00c7\" character is still in uppercase.</p>\n\n<p>If I process it on cygwin (windows <strong>32</strong>-bit), the result I get is :</p>\n\n<pre><code>&lt;s&gt;  hello world  &lt;/s&gt;\n&lt;s&gt;  \u00e7a world  &lt;/s&gt;\n&lt;s&gt;  he llo world  &lt;/s&gt;\n&lt;s&gt;  H.E.L.L.O world  &lt;/s&gt;\n</code></pre>\n\n<p>The \"\u00c7\" character is now in lowercase.</p>\n\n<p>I would like the code to work on both 32 and 64 bit windows - and to understand why it doesn't work as is.</p>\n"}, {"tags": ["bash", "perl", "shell", "shebang"], "comments": [{"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1483721620, "post_id": 41510356, "comment_id": 70226685, "body": "Do you use the same shell in the terminal and in the script?"}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 1, "creation_date": 1483721985, "post_id": 41510356, "comment_id": 70226940, "body": "Is the first line of the script <code>#!&#47;bin&#47;sh</code>?"}, {"owner": {"reputation": 61700, "user_id": 5291015, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ZFijZ.jpg?s=128&g=1", "display_name": "Inian", "link": "https://stackoverflow.com/users/5291015/inian"}, "edited": false, "score": 0, "creation_date": 1483722011, "post_id": 41510356, "comment_id": 70226959, "body": "Which she-bang are you using, specify it explicitly as <code>bash</code>, i.e. <code>#!&#47;bin&#47;bash</code>"}, {"owner": {"reputation": 35, "user_id": 3543214, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34b8adf8897f7d2310f41823a32ab10c?s=128&d=identicon&r=PG&f=1", "display_name": "jtaylor", "link": "https://stackoverflow.com/users/3543214/jtaylor"}, "reply_to_user": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1483722352, "post_id": 41510356, "comment_id": 70227175, "body": "Adding #!/bin/sh doesn&#39;t change anything. Adding #!/bin/bash still fails that line but also fails my pip install commend. @choroba: I&#39;m new to linux, but I think you are asking if I am running the script in the same terminal that I&#39;m running the command? The answer is yes."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 1, "creation_date": 1483722527, "post_id": 41510356, "comment_id": 70227289, "body": "I didn&#39;t tell you to add <code>#!&#47;bin&#47;sh</code>. In fact, it&#39;s a potential source of problems, which is why I asked about it."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1483722570, "post_id": 41510356, "comment_id": 70227318, "body": "And no, choroba&#39;s question wasn&#39;t about terminals. What exactly is in your script file and how exactly are you running it?"}, {"owner": {"reputation": 35, "user_id": 3543214, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34b8adf8897f7d2310f41823a32ab10c?s=128&d=identicon&r=PG&f=1", "display_name": "jtaylor", "link": "https://stackoverflow.com/users/3543214/jtaylor"}, "edited": false, "score": 0, "creation_date": 1483722595, "post_id": 41510356, "comment_id": 70227331, "body": "Actually #! /bin/bash works! Maybe i typed it incorrectly before! AWESOME! THANKS!"}, {"owner": {"reputation": 68617, "user_id": 3776858, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/juunm.png?s=128&g=1", "display_name": "Cyrus", "link": "https://stackoverflow.com/users/3776858/cyrus"}, "edited": false, "score": 1, "creation_date": 1483727150, "post_id": 41510356, "comment_id": 70229875, "body": "Please take a look at: <a href=\"http://stackoverflow.com/help/someone-answers\">What should I do when someone answers my question?</a>"}, {"owner": {"reputation": 35, "user_id": 3543214, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34b8adf8897f7d2310f41823a32ab10c?s=128&d=identicon&r=PG&f=1", "display_name": "jtaylor", "link": "https://stackoverflow.com/users/3543214/jtaylor"}, "reply_to_user": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "edited": false, "score": 0, "creation_date": 1483820765, "post_id": 41510356, "comment_id": 70258239, "body": "@EdMorton Where I have perl it was originally sed, I changed it to perl during my troubleshooting, I never realized I didn&#39;t change it back to sed. I&#39;m sorry."}], "answers": [{"tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": true, "score": 1, "last_activity_date": 1483721765, "creation_date": 1483721765, "answer_id": 41510463, "question_id": 41510356, "link": "https://stackoverflow.com/questions/41510356/works-in-terminal-but-not-in-script/41510463#41510463", "title": "Works in terminal but not in script", "body": "<p>I'm getting the error if I execute the command in <code>dash</code>. <code>dash</code> doesn't seem to support the <code>$'...'</code> quotes.</p>\n\n<p>It works OK in <code>bash</code>, and emits different errors in <code>zsh</code> and <code>ksh</code>:</p>\n\n<pre><code>Unknown regexp modifier \"/D\" at -e line 1, at end of line\nUnknown regexp modifier \"/S\" at -e line 1, at end of line\nUnknown regexp modifier \"/P\" at -e line 1, at end of line\nUnknown regexp modifier \"/k\" at -e line 1, at end of line\nCan't find string terminator \"'\" anywhere before EOF at -e line 1.\n</code></pre>\n\n<p>Make sure to specify the correct shell on the first line of the script</p>\n\n<pre><code>#! /bin/bash\n</code></pre>\n\n<p>and to call the script correctly:</p>\n\n<pre><code>/path/to/the/script.sh\n</code></pre>\n\n<p>or</p>\n\n<pre><code>cd /path/to/the\n./script.sh\n</code></pre>\n"}], "owner": {"reputation": 35, "user_id": 3543214, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34b8adf8897f7d2310f41823a32ab10c?s=128&d=identicon&r=PG&f=1", "display_name": "jtaylor", "link": "https://stackoverflow.com/users/3543214/jtaylor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1461, "favorite_count": 0, "accepted_answer_id": 41510463, "answer_count": 1, "score": -1, "last_activity_date": 1483823383, "creation_date": 1483721414, "last_edit_date": 1483823383, "question_id": 41510356, "link": "https://stackoverflow.com/questions/41510356/works-in-terminal-but-not-in-script", "title": "Works in terminal but not in script", "body": "<pre><code>pip install sphinx\nsphinx-quickstart -q -p DSPackageDocs -a Me -v 1 --ext-autodoc\nperl -i -e $'s/#sys.path.insert(0, os.path.abspath(\\'.\\'))/sys.path.insert(0, os.path.abspath(\\'.\\/DSPackage\\'))/g' conf.py\n</code></pre>\n\n<p>The 3rd line looks into a file and replaces some text. Specifically, I replace </p>\n\n<pre><code>sys.path.insert(0, os.path.abspath('.')) \n</code></pre>\n\n<p>with</p>\n\n<pre><code>sys.path.insert(0, os.path.abspath('./DSPackage'))\n</code></pre>\n\n<p>This line works perfectly fine in the terminal in the shell script I get the error:</p>\n\n<blockquote>\n  <p>Syntax error: \")\" unexpected</p>\n</blockquote>\n"}, {"tags": ["regex", "perl", "escaping"], "answers": [{"comments": [{"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1483718454, "post_id": 41509380, "comment_id": 70224626, "body": "I&#39;d also use single quotes for readability, as double quotes aren&#39;t necessary."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1483718563, "post_id": 41509380, "comment_id": 70224696, "body": "@choroba Actually the double-quotes <code>&quot;&quot;</code> change the meaning of the string. The number of backslashes <code>\\</code> is odd, so the double-quoted string tries to interpolate <code>\\B</code>, which then breaks. Try <code>say &quot;\\\\\\\\\\\\\\BAGlobal\\\\\\6-Engineering\\\\\\3-Tech&quot;; say &#39;\\\\\\\\\\\\\\BAGlobal\\\\\\6-Engineering\\\\\\3-Tech&#39;;</code>."}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 1, "creation_date": 1483719616, "post_id": 41509380, "comment_id": 70225375, "body": "Note that <code>\\B</code> is valid in a regex, though, as the negation of <code>\\b</code>."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1483719777, "post_id": 41509380, "comment_id": 70225474, "body": "@choroba but that&#39;s <code>q{\\B}</code>, not <code>qq{\\B}</code>. In my above code we have the first one after I changed the quotes, which would turn into the character-class, but then there is <code>quotemeta</code> to make sure it doesn&#39;t."}, {"owner": {"reputation": 3, "user_id": 7071271, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2ee12743816601e4a400fa81d30b760c?s=128&d=identicon&r=PG&f=1", "display_name": "SKing", "link": "https://stackoverflow.com/users/7071271/sking"}, "edited": false, "score": 0, "creation_date": 1483721650, "post_id": 41509380, "comment_id": 70226706, "body": "With quotemeta, do I still want to escape my original back slashes? Or, does quotemeta do it for me?"}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "reply_to_user": {"reputation": 3, "user_id": 7071271, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2ee12743816601e4a400fa81d30b760c?s=128&d=identicon&r=PG&f=1", "display_name": "SKing", "link": "https://stackoverflow.com/users/7071271/sking"}, "edited": false, "score": 0, "creation_date": 1483721953, "post_id": 41509380, "comment_id": 70226916, "body": "@SKing: TITS = &quot;Try it to see&quot;"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1483722163, "post_id": 41509380, "comment_id": 70227060, "body": "@sk because you didn&#39;t indent your question properly and tried to make it look good. But when we fixed the markdown in your question that ended up as content. That&#39;s why it is important to be precise and use proper syntax for the question. Quotemeta will work anyway. Just try."}, {"owner": {"reputation": 3, "user_id": 7071271, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2ee12743816601e4a400fa81d30b760c?s=128&d=identicon&r=PG&f=1", "display_name": "SKing", "link": "https://stackoverflow.com/users/7071271/sking"}, "edited": false, "score": 1, "creation_date": 1483723748, "post_id": 41509380, "comment_id": 70227980, "body": "this is working now. I used quotemeta , single quotes, and no extra back slashes."}, {"owner": {"reputation": 3, "user_id": 7071271, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2ee12743816601e4a400fa81d30b760c?s=128&d=identicon&r=PG&f=1", "display_name": "SKing", "link": "https://stackoverflow.com/users/7071271/sking"}, "edited": false, "score": 0, "creation_date": 1483723780, "post_id": 41509380, "comment_id": 70228006, "body": "Thank you both for your help"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1483724532, "post_id": 41509380, "comment_id": 70228416, "body": "@sk If the answer solved your problem, accept it by ticking the checkmark on the left. Thank you."}], "tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": true, "score": 5, "last_activity_date": 1483719805, "last_edit_date": 1483719805, "creation_date": 1483718349, "answer_id": 41509380, "question_id": 41509342, "link": "https://stackoverflow.com/questions/41509342/how-to-escape-a-string-that-looks-like-a-regular-expression-in-perl/41509380#41509380", "title": "How to escape a string that looks like a regular expression in Perl", "body": "<p><strong>The problem is not the the dash in <code>6-</code> but all the backslashes <code>\\</code>.</strong> </p>\n\n<p>It thinks that <code>\\3</code> and <code>\\6</code> are back-references to previously matched groups, like <code>/foo(bar) foo\\1/</code> would match the string <code>foobar foobar</code>.</p>\n\n<p>If you use this in a pattern match you need to either include <code>\\Q</code> and <code>\\E</code> to add quoting, or apply the <a href=\"http://perldoc.perl.org/functions/quotemeta.html\" rel=\"nofollow noreferrer\"><code>quotemeta</code> built-in</a> to your <code>$find</code>.</p>\n\n<pre><code>my $find = '\\\\\\\\\\\\\\BAGlobal\\\\\\6-Engineering\\\\\\3-Tech';\n\n$string =~ m/\\Q$find\\E/;\n</code></pre>\n\n<p>Or with <code>quotemeta</code>.</p>\n\n<pre><code>my $find = quotemeta '\\\\\\\\\\\\\\BAGlobal\\\\\\6-Engineering\\\\\\3-Tech';\n\n$string =~ m/$find/;\n</code></pre>\n\n<p>Also see <a href=\"http://perldoc.perl.org/perlre.html#Quoting-metacharacters\" rel=\"nofollow noreferrer\">perlre</a>.</p>\n\n<p>Note that your example code is probably wrong. The number of backslashes you have there is uneven, and double quotes <code>\"\"</code> interpolate, so each pair of backslashes <code>\\\\</code> turn into one actual backslash in the string. But because you have 7 of them, the last one is seen as the escape for <code>B</code>, turning that into <code>\\B</code>, which is not a valid escape sequence. I used single quotes <code>''</code> in my code above.</p>\n"}], "owner": {"reputation": 3, "user_id": 7071271, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2ee12743816601e4a400fa81d30b760c?s=128&d=identicon&r=PG&f=1", "display_name": "SKing", "link": "https://stackoverflow.com/users/7071271/sking"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 80, "favorite_count": 0, "accepted_answer_id": 41509380, "answer_count": 1, "score": 0, "last_activity_date": 1483719805, "creation_date": 1483718216, "last_edit_date": 1483718281, "question_id": 41509342, "link": "https://stackoverflow.com/questions/41509342/how-to-escape-a-string-that-looks-like-a-regular-expression-in-perl", "title": "How to escape a string that looks like a regular expression in Perl", "body": "<p>I have a script that, among other things, searches a list of text files to replace a Windows path (text string) with another path.</p>\n\n<p>The problem is that some of the folder names begin with a number and a dash. Perl seems to think that I am trying to invoke a regular expression here. I get the message, \"Reference to nonexistent group in regex\".</p>\n\n<p>the string looks like this:</p>\n\n<pre><code>\\\\\\BAGlobal\\6-Engineering\\3-Tech\n</code></pre>\n\n<p>I have quoted it like this:</p>\n\n<pre><code> my $find = \"\\\\\\\\\\\\\\BAGlobal\\\\\\6-Engineering\\\\\\3-Tech\"\n</code></pre>\n\n<p>How do I escape the <code>6-</code>  and <code>3-</code>  ?</p>\n"}, {"tags": ["perl", "ssh", "multiprocessing"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1483716093, "post_id": 41508666, "comment_id": 70223142, "body": "You should show a more complete example. Do you fork or thread? What kind of programs are you running als children?"}, {"owner": {"reputation": 148, "user_id": 2477035, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1380a31e6e8acf9a0aa4a405dac33e00?s=128&d=identicon&r=PG", "display_name": "Pratyush Rathore", "link": "https://stackoverflow.com/users/2477035/pratyush-rathore"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1483716155, "post_id": 41508666, "comment_id": 70223179, "body": "Sure. Editing the question to reflect that."}, {"owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 2, "creation_date": 1483717980, "post_id": 41508666, "comment_id": 70224313, "body": "If the command might be waiting on user input, you could append <code>&lt;&#47;dev&#47;null</code> to your command string to prevent that (i.e. <code>my $out=qx($exec_command &lt;&#47;dev&#47;null)</code>)"}, {"owner": {"reputation": 148, "user_id": 2477035, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1380a31e6e8acf9a0aa4a405dac33e00?s=128&d=identicon&r=PG", "display_name": "Pratyush Rathore", "link": "https://stackoverflow.com/users/2477035/pratyush-rathore"}, "reply_to_user": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 0, "creation_date": 1483734165, "post_id": 41508666, "comment_id": 70233446, "body": "@mob: I have implemented what you said. I can only tell if that worked or not may be in a couple of days. The said problem only arises once a day or so. I haven&#39;t faced it thus far since I implemented your suggestion. Thanks a ton :)."}, {"owner": {"reputation": 148, "user_id": 2477035, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1380a31e6e8acf9a0aa4a405dac33e00?s=128&d=identicon&r=PG", "display_name": "Pratyush Rathore", "link": "https://stackoverflow.com/users/2477035/pratyush-rathore"}, "reply_to_user": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 0, "creation_date": 1483807116, "post_id": 41508666, "comment_id": 70253318, "body": "@mob: The error persists."}, {"owner": {"reputation": 148, "user_id": 2477035, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1380a31e6e8acf9a0aa4a405dac33e00?s=128&d=identicon&r=PG", "display_name": "Pratyush Rathore", "link": "https://stackoverflow.com/users/2477035/pratyush-rathore"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1483849393, "post_id": 41508666, "comment_id": 70264569, "body": "@zdim: No issues at all. :)"}], "owner": {"reputation": 148, "user_id": 2477035, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1380a31e6e8acf9a0aa4a405dac33e00?s=128&d=identicon&r=PG", "display_name": "Pratyush Rathore", "link": "https://stackoverflow.com/users/2477035/pratyush-rathore"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 54, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1483716335, "creation_date": 1483715894, "last_edit_date": 1483716335, "question_id": 41508666, "link": "https://stackoverflow.com/questions/41508666/executing-long-command-via-ssh-in-child-does-not-quit-unless-i-repeatedly-pres", "title": "Executing long command via ssh in child - does not quit unless I repeatedly press Enter. Unable to locate the source of hang up", "body": "<p>I have a perl script which takes a bunch of commands, say command1, command2. The commands supposedly take a long time to complete, about 3-4 hours. </p>\n\n<p>In the script (in perl), for each command, I create (fork) a child process and in that process I execute, <code>$ ssh s1 \"command1\"</code>. Then, I wait for the child to finish. </p>\n\n<pre><code>my $exec_command = \"ssh $machine \\\"$command\\\"\";\n</code></pre>\n\n<p>The <code>$command</code> is a long computationally intensive cplusplus exec. Nothing too fancy there. In the child,</p>\n\n<pre><code>my $out = `$exec_command`;\n</code></pre>\n\n<p>Now, sometimes, it so happens that the child does not quit by itself. I have to repeatedly press Enter and then, the children process quit.</p>\n\n<p>I have googled stuff, but to no avail. I don't even know where the problem is, in ssh or in my child-parent relationship.</p>\n\n<p>Thanks.</p>\n"}, {"tags": ["perl", "module", "hierarchy"], "comments": [{"owner": {"reputation": 470, "user_id": 6193608, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dliye.jpg?s=128&g=1", "display_name": "David Verdin", "link": "https://stackoverflow.com/users/6193608/david-verdin"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1483701207, "post_id": 41503829, "comment_id": 70214118, "body": "Indeed. Let me edit my question with actual classes."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1483701814, "post_id": 41503829, "comment_id": 70214456, "body": "By <i>composed of</i> you mean that it uses objects of these classes?"}, {"owner": {"reputation": 470, "user_id": 6193608, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dliye.jpg?s=128&g=1", "display_name": "David Verdin", "link": "https://stackoverflow.com/users/6193608/david-verdin"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1483701906, "post_id": 41503829, "comment_id": 70214510, "body": "Sorry for giving a misguiding example. Basically, it contains hashes of objects from these classes."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1483702115, "post_id": 41503829, "comment_id": 70214626, "body": "Are ::Class, ::Relation and ::Attribute used anywhere else? Is there another top level thing in MyProject:: next to ::Model?"}, {"owner": {"reputation": 470, "user_id": 6193608, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dliye.jpg?s=128&g=1", "display_name": "David Verdin", "link": "https://stackoverflow.com/users/6193608/david-verdin"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1483702234, "post_id": 41503829, "comment_id": 70214698, "body": "Yes, there are other things. Model is used by other modules. But it provides top-level methods, so that other modules don&#39;t use Class, relation or Attribute. Only Model does."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1483702355, "post_id": 41503829, "comment_id": 70214776, "body": "Then those three are integral parts of ::Model, and should go into the MyProject::Model:: namespace."}, {"owner": {"reputation": 470, "user_id": 6193608, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dliye.jpg?s=128&g=1", "display_name": "David Verdin", "link": "https://stackoverflow.com/users/6193608/david-verdin"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1483702405, "post_id": 41503829, "comment_id": 70214809, "body": "Like so? MyProject::Model::Component::Class?"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 470, "user_id": 6193608, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dliye.jpg?s=128&g=1", "display_name": "David Verdin", "link": "https://stackoverflow.com/users/6193608/david-verdin"}, "edited": false, "score": 0, "creation_date": 1483702739, "post_id": 41503829, "comment_id": 70214995, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/132485/discussion-between-simbabque-and-david-verdin\">continue this discussion in chat</a>."}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1483957436, "post_id": 41503829, "comment_id": 70296048, "body": "Crossposted to <a href=\"http://www.perlmonks.org/?node_id=1179070\" rel=\"nofollow noreferrer\">PerlMonks</a>."}, {"owner": {"reputation": 470, "user_id": 6193608, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dliye.jpg?s=128&g=1", "display_name": "David Verdin", "link": "https://stackoverflow.com/users/6193608/david-verdin"}, "edited": false, "score": 0, "creation_date": 1483958170, "post_id": 41503829, "comment_id": 70296582, "body": "Yes. I said it at the bottom of my question. Is it wrong?"}], "answers": [{"comments": [{"owner": {"reputation": 470, "user_id": 6193608, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dliye.jpg?s=128&g=1", "display_name": "David Verdin", "link": "https://stackoverflow.com/users/6193608/david-verdin"}, "edited": false, "score": 1, "creation_date": 1483701069, "post_id": 41504163, "comment_id": 70214045, "body": "That&#39;s crystal clear, thanks! A last concern, though: Suppose I have computers made of disks, processor and ram (that&#39;s a dumb example).  It would make sense to have a Computer.pm class. But I would still want to group computer elements in a dedicated namespace. In that case, should I:  1- create another namespace to hold components: ComputerComponent::Disk, ComputerComponents::RAM, ComputerComponents::CPU  2- Use the Computer namespace, which would go against your recommendations?"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 470, "user_id": 6193608, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dliye.jpg?s=128&g=1", "display_name": "David Verdin", "link": "https://stackoverflow.com/users/6193608/david-verdin"}, "edited": false, "score": 0, "creation_date": 1483701387, "post_id": 41504163, "comment_id": 70214217, "body": "@David hmm. If your main thing is Computer, then Computer::CPU, Computer::Disk and Computer::RAM make sense. But if besides the physical components, you also have classes that do something else, then maybe Computer, Computer::Component::CPU, Computer::Component::Disk, Computer::Role::Portable. If the components are only for the Computer, split it like that. They don&#39;t need to all <i>ship with</i> the Computer distribution, so they could be in different code repos, but if you want to make a new modul Computer::Component::Disk::SSD and release it, it&#39;s root will contain a bunch of empty folders first"}, {"owner": {"reputation": 470, "user_id": 6193608, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dliye.jpg?s=128&g=1", "display_name": "David Verdin", "link": "https://stackoverflow.com/users/6193608/david-verdin"}, "edited": false, "score": 0, "creation_date": 1483701812, "post_id": 41504163, "comment_id": 70214454, "body": "OK, so in a composition, I can simply add a sub-namespace that will be used to hold components. that makes sense, thanks!"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 470, "user_id": 6193608, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dliye.jpg?s=128&g=1", "display_name": "David Verdin", "link": "https://stackoverflow.com/users/6193608/david-verdin"}, "edited": false, "score": 0, "creation_date": 1483702156, "post_id": 41504163, "comment_id": 70214648, "body": "@David yes, exactly. I&#39;ll add another piece of example to the answer."}], "tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": true, "score": 9, "last_activity_date": 1483702706, "last_edit_date": 1483702706, "creation_date": 1483700166, "answer_id": 41504163, "question_id": 41503829, "link": "https://stackoverflow.com/questions/41503829/perl-modules-hierarchy-and-composition/41504163#41504163", "title": "Perl modules hierarchy and composition", "body": "<p>Your concern is correct. Typically, packages are named by either <em>inclusion</em> or <em>inheritance</em>. I'm going to make up a more realistic example. Let's say we are building an online shop.</p>\n\n<p><strong>Inclusion</strong></p>\n\n<p>You first pick a namespace for your project. In the business world, you often see namespaces with the company name first, to distinguish proprietary modules from CPAN ones. So the project's namespace could be:</p>\n\n<pre><code>OurCompany::Shop\n</code></pre>\n\n<p>Then probably the main class or module for the application is called the same, so we have a </p>\n\n<pre><code>OurCompany/Shop.pm\n</code></pre>\n\n<p>We will have a bunch of things that we need to make an online shop. If our project is MCV, there are controllers and models and stuff like that. So we might have these things:</p>\n\n<pre><code>OurCompany::Shop::Controller::ProductSearch\nOurCompany::Shop::Controller::Cart\nOurCompany::Shop::Controller::Checkout\nOurCompany::Shop::Model::Database\n</code></pre>\n\n<p>All of those map to modules direcly.</p>\n\n<pre><code>OurCompany/Shop/Controller/ProductSearch.pm\nOurCompany/Shop/Controller/Cart.pm\nOurCompany/Shop/Controller/Checkout.pm\nOurCompany/Shop/Model/Database.pm\n</code></pre>\n\n<p>But there is no <code>OurCompany::Controller</code> as a base class. That name is just a namespace to sort things into.</p>\n\n<p>Then there are some things that are just there, and get used by OurCompany::Shop, like the Session engine.</p>\n\n<pre><code>OurCompany::Shop::Session\n</code></pre>\n\n<p>Those go on the first level after the project, unless they are very specific.</p>\n\n<p>Now of course there is some kind of engine behind the session system. Let's say we are fancy and use Redis for our sessions. If we implement the communication ourselves (which we wouldn't because CPAN has done that already), we would stick that implementation into</p>\n\n<pre><code>OurCompany::Shop::Session::Engine::Redis\n</code></pre>\n\n<p>The only thing that uses this module is OurCompany::Shop::Session under the hood. The main application doesn't even know what engine is used. Maybe you don't have Redis on your development machine, so you are using plain files.</p>\n\n<pre><code>OurCompany::Shop::Session::Engine::File\n</code></pre>\n\n<p>Both of them are there, they belong to ::Session, but they don't get used by any other part of the system, so we file them away where they belong to.</p>\n\n<p><strong>Inheritance</strong></p>\n\n<p>We will also have Products<sup>1</sup>. The base product class could be this.</p>\n\n<pre><code>OurCompany::Shop::Product\n</code></pre>\n\n<p>And there is a file for it.</p>\n\n<pre><code>OurCompany/Shop/Product.pm\n</code></pre>\n\n<p>Just that this base product never gets used directly by the shop, other than checking that certain things have to have ::Product in their inheritance tree (that's an <code>isa</code> check). So this is different from ::Session, which gets used directly.</p>\n\n<p>But of course we sell different things, and they have different properties. All of them have prices, but shoes have sizes and hard drives have a capacity. So we create subclasses.</p>\n\n<pre><code>OurCompany::Shop::Product::Shoe\nOurCompany::Shop::Product::HardDrive\n</code></pre>\n\n<p>And those have their own files.</p>\n\n<pre><code>OurCompany/Shop/Product/Shoe.pm\nOurCompany/Shop/Product/HardDrive.pm\n</code></pre>\n\n<p>We might also distinguish between a mechanical HardDrive and an SSD, so we make an ::SSD subclass.</p>\n\n<pre><code>OurCompany::Shop::Product::HardDrive::SSD\n\nOurCompany/Shop/Product/HardDrive/SSD.pm\n</code></pre>\n\n<hr>\n\n<p>So basically things are put in the same namespace if they belong to each other. Here's a tree view of our lib.</p>\n\n<pre><code>.\n\u2514\u2500\u2500 OurCompany\n    \u251c\u2500\u2500 Shop\n    \u2502\u00a0\u00a0 \u251c\u2500\u2500 Controller\n    \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 Cart.pm\n    \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 Checkout.pm\n    \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2514\u2500\u2500 ProductSearch.pm\n    \u2502\u00a0\u00a0 \u251c\u2500\u2500 Model\n    \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2514\u2500\u2500 Database.pm\n    \u2502\u00a0\u00a0 \u251c\u2500\u2500 Product\n    \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 HardDrive\n    \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2514\u2500\u2500 SSD.pm\n    \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 HardDrive.pm\n    \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2514\u2500\u2500 Shoe.pm\n    |   \u251c\u2500\u2500 Product.pm\n    \u2502\u00a0\u00a0 \u2514\u2500\u2500 Session.pm\n    \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2514\u2500\u2500 Engine.pm\n    \u2502\u00a0\u00a0 \u2502\u00a0\u00a0     \u251c\u2500\u2500 File.pm\n    \u2502\u00a0\u00a0 \u2502\u00a0\u00a0     \u2514\u2500\u2500 Redis.pm\n    \u2514\u2500\u2500 Shop.pm\n</code></pre>\n\n<p>To sum up:</p>\n\n<ul>\n<li>For your main module, the file name is the last part of the project's package name. Everything else goes under there.</li>\n<li>Stuff that belongs together gets grouped under one namespace. </li>\n<li>Stuff that inherits from something goes under that something's namespace.</li>\n<li>Stuff that only gets used by one specific thing goes under that thing.</li>\n</ul>\n\n<p>Never append things together like MyProject::AB to indicate that it belongs to MyProject::A. Always use namespace separators to organize your namespaces. Consider this, which looks just plain wrong:</p>\n\n<pre><code>OurCompany::ShopProductShoe\n</code></pre>\n\n<hr>\n\n<p><sup>1) It might be that we also have a backoffice application that also uses the same product classes. In that case, we might have them as OurCompany::Product, and they get used by two different projects, OurCompany::Shop and OurCompany::BackOffice.</sup></p>\n"}], "owner": {"reputation": 470, "user_id": 6193608, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dliye.jpg?s=128&g=1", "display_name": "David Verdin", "link": "https://stackoverflow.com/users/6193608/david-verdin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 489, "favorite_count": 1, "accepted_answer_id": 41504163, "answer_count": 1, "score": 4, "last_activity_date": 1483702706, "creation_date": 1483699023, "last_edit_date": 1483702331, "question_id": 41503829, "link": "https://stackoverflow.com/questions/41503829/perl-modules-hierarchy-and-composition", "title": "Perl modules hierarchy and composition", "body": "<p>Reading more and more about Perl, I'm having doubts about how I organized my modules on my current project.</p>\n\n<p>I have a main namespace - let's call it \"MyProject\".</p>\n\n<p>In this project, the base data are graphs in which each object has a class. objects are linked with relations. Both objects and relations can have attributes.</p>\n\n<p>There is a part of the project where I use a model to validate these graphs.\nSo I have a Model class that is composed of objects of class Class, Relation and Attribute.</p>\n\n<p>Classes Class, Relation and Attribute are used by class Model only, so it made sense to me to organize the modules as follows:</p>\n\n<ul>\n<li>MyProject::Model</li>\n<li>MyProject::Model::Class</li>\n<li>MyProject::Model::Relation</li>\n<li>MyProject::Model::Attribute</li>\n</ul>\n\n<p>But I'm starting to think that it will make sense to me only if I ever dare to relase parts of my project in CPAN. I think people will believe that Class, Relation and Attribute are inheriting Model and not composing it.</p>\n\n<p>So: shall I reorganize my modules this way:</p>\n\n<ul>\n<li>MyProject::Model</li>\n<li>MyProject::Class</li>\n<li>MyProject::Relation</li>\n<li>MyProject::Attribute</li>\n</ul>\n\n<p>Or maybe indicate that Class, Relation and Attribute are parts of Model by appending their names?</p>\n\n<ul>\n<li>MyProject::Model</li>\n<li>MyProject::ModelClass</li>\n<li>MyProject::ModelRelation</li>\n<li>MyProject::ModelAttribute</li>\n</ul>\n\n<p><strong>My question</strong>: What is the currently considered a best practices for module organization and naming when it comes to composition?</p>\n\n<p><a href=\"http://www.perlmonks.org/?node_id=1179070\" rel=\"nofollow noreferrer\">Cross-posted at Perlmonks</a></p>\n"}, {"tags": ["perl", "centos", "admin"], "comments": [{"owner": {"reputation": 470, "user_id": 6193608, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dliye.jpg?s=128&g=1", "display_name": "David Verdin", "link": "https://stackoverflow.com/users/6193608/david-verdin"}, "edited": false, "score": 0, "creation_date": 1483696423, "post_id": 41502930, "comment_id": 70211320, "body": "There is a drastic solution: removing then installing.      yum remove perl     yum install perl"}, {"owner": {"reputation": 2086, "user_id": 171867, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/5a56dba6a32f4e8719b9a1b1f1fd6d43?s=128&d=identicon&r=PG&f=1", "display_name": "eastafri", "link": "https://stackoverflow.com/users/171867/eastafri"}, "reply_to_user": {"reputation": 470, "user_id": 6193608, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dliye.jpg?s=128&g=1", "display_name": "David Verdin", "link": "https://stackoverflow.com/users/6193608/david-verdin"}, "edited": false, "score": 1, "creation_date": 1483696472, "post_id": 41502930, "comment_id": 70211354, "body": "The yum reinstall was perfomed a while back. I have tried yum history undo and i get no package matched to remove xxx error."}, {"owner": {"reputation": 2086, "user_id": 171867, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/5a56dba6a32f4e8719b9a1b1f1fd6d43?s=128&d=identicon&r=PG&f=1", "display_name": "eastafri", "link": "https://stackoverflow.com/users/171867/eastafri"}, "reply_to_user": {"reputation": 470, "user_id": 6193608, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dliye.jpg?s=128&g=1", "display_name": "David Verdin", "link": "https://stackoverflow.com/users/6193608/david-verdin"}, "edited": false, "score": 0, "creation_date": 1483696568, "post_id": 41502930, "comment_id": 70211408, "body": "@DavidVerdin what are the greatest risks for this? I have perl version 5.16 maybe try and install that same version since it is a system perl install."}, {"owner": {"reputation": 470, "user_id": 6193608, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dliye.jpg?s=128&g=1", "display_name": "David Verdin", "link": "https://stackoverflow.com/users/6193608/david-verdin"}, "edited": false, "score": 0, "creation_date": 1483696626, "post_id": 41502930, "comment_id": 70211448, "body": "Well, no greatest risk than not having perl working at all."}, {"owner": {"reputation": 470, "user_id": 6193608, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dliye.jpg?s=128&g=1", "display_name": "David Verdin", "link": "https://stackoverflow.com/users/6193608/david-verdin"}, "edited": false, "score": 0, "creation_date": 1483696696, "post_id": 41502930, "comment_id": 70211487, "body": "Wait: is it a production server?"}, {"owner": {"reputation": 2086, "user_id": 171867, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/5a56dba6a32f4e8719b9a1b1f1fd6d43?s=128&d=identicon&r=PG&f=1", "display_name": "eastafri", "link": "https://stackoverflow.com/users/171867/eastafri"}, "reply_to_user": {"reputation": 470, "user_id": 6193608, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dliye.jpg?s=128&g=1", "display_name": "David Verdin", "link": "https://stackoverflow.com/users/6193608/david-verdin"}, "edited": false, "score": 0, "creation_date": 1483696768, "post_id": 41502930, "comment_id": 70211525, "body": "It is on our computing cluster and I can call it the production server. A lot of tools including slurm are dependent on the cluster system perl."}, {"owner": {"reputation": 470, "user_id": 6193608, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dliye.jpg?s=128&g=1", "display_name": "David Verdin", "link": "https://stackoverflow.com/users/6193608/david-verdin"}, "edited": false, "score": 0, "creation_date": 1483697051, "post_id": 41502930, "comment_id": 70211706, "body": "I see that rpm is wirtten in C AND Perl. So if you simply remove Perl, I don&#39;t know if RPM will still be working. You might need to try running yum reinstall perl again before trying more drastic solutions."}, {"owner": {"reputation": 470, "user_id": 6193608, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dliye.jpg?s=128&g=1", "display_name": "David Verdin", "link": "https://stackoverflow.com/users/6193608/david-verdin"}, "edited": false, "score": 0, "creation_date": 1483697651, "post_id": 41502930, "comment_id": 70212081, "body": "There are suggestions about a similar problem in this other question: <a href=\"http://stackoverflow.com/a/25818900/6193608\">stackoverflow.com/a/25818900/6193608</a>"}, {"owner": {"reputation": 2086, "user_id": 171867, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/5a56dba6a32f4e8719b9a1b1f1fd6d43?s=128&d=identicon&r=PG&f=1", "display_name": "eastafri", "link": "https://stackoverflow.com/users/171867/eastafri"}, "reply_to_user": {"reputation": 470, "user_id": 6193608, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dliye.jpg?s=128&g=1", "display_name": "David Verdin", "link": "https://stackoverflow.com/users/6193608/david-verdin"}, "edited": false, "score": 0, "creation_date": 1483700193, "post_id": 41502930, "comment_id": 70213556, "body": "Many thanks @DavidVerdin I  ran yum reinstall perl. It does not resolve the problem."}, {"owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 1, "creation_date": 1483718216, "post_id": 41502930, "comment_id": 70224480, "body": "Do you have root access? Build from source and install it as system perl (for example, in <code>&#47;usr&#47;bin&#47;perl</code>). Try to build the same version as the old system perl."}], "owner": {"reputation": 2086, "user_id": 171867, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/5a56dba6a32f4e8719b9a1b1f1fd6d43?s=128&d=identicon&r=PG&f=1", "display_name": "eastafri", "link": "https://stackoverflow.com/users/171867/eastafri"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1045, "favorite_count": 0, "answer_count": 0, "score": 3, "last_activity_date": 1483695997, "creation_date": 1483695997, "question_id": 41502930, "link": "https://stackoverflow.com/questions/41502930/fixing-a-corrupted-perl-installation-reinstallation-on-centos-7", "title": "fixing a corrupted perl installation/ reinstallation on centos 7", "body": "<p>I am running </p>\n\n<pre><code>perl -V\n</code></pre>\n\n<p>and I get </p>\n\n<pre><code>Can't undef active subroutine at /usr/local/lib64/perl5/Config_heavy.pl line 1418.\nCompilation failed in require at /usr/lib64/perl5/Config.pm line 79.\n</code></pre>\n\n<p>this was after a </p>\n\n<pre><code>yum reinstall perl\n</code></pre>\n\n<p>How can I resolve this and get a working perl installation on centos 7</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 9, "user_id": 7382994, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-JzTad-Vatx8/AAAAAAAAAAI/AAAAAAAAAAw/4ScHX64x-40/photo.jpg?sz=128", "display_name": "Adel SALAH", "link": "https://stackoverflow.com/users/7382994/adel-salah"}, "edited": false, "score": 0, "creation_date": 1483691314, "post_id": 41501707, "comment_id": 70208622, "body": "btw. I am using CCPERL (ClearCase Perl): This is perl, v5.8.6 built for MSWin32-x86-multi-thread"}, {"owner": {"reputation": 6972, "user_id": 2235811, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/Pra12.jpg?s=128&g=1", "display_name": "goto", "link": "https://stackoverflow.com/users/2235811/goto"}, "edited": false, "score": 4, "creation_date": 1483691502, "post_id": 41501707, "comment_id": 70208690, "body": "can you be more specific? what did you tried? what is &quot;it did not work&quot;"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1483693671, "post_id": 41501707, "comment_id": 70209647, "body": "Shame, your Perl is too old for the smartmatch operator <code>~~</code>. I personally don&#39;t like it, but it would have done exactly what you want."}, {"owner": {"reputation": 9, "user_id": 7382994, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-JzTad-Vatx8/AAAAAAAAAAI/AAAAAAAAAAw/4ScHX64x-40/photo.jpg?sz=128", "display_name": "Adel SALAH", "link": "https://stackoverflow.com/users/7382994/adel-salah"}, "edited": false, "score": 0, "creation_date": 1483696874, "post_id": 41501707, "comment_id": 70211592, "body": "print &quot;@astreams\\n&quot;; gives:   jatm5_INT jatm5_APPL jatm5_JAVA jatm5_RLS jatm5_EDAG jatm5_REC now I want in fact perform a negative search and tell only if some $stream_s means some string doesn&#39;t exist in the array, some owner from some CC Baseline must be changed otherwise nothing to do."}, {"owner": {"reputation": 9, "user_id": 7382994, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-JzTad-Vatx8/AAAAAAAAAAI/AAAAAAAAAAw/4ScHX64x-40/photo.jpg?sz=128", "display_name": "Adel SALAH", "link": "https://stackoverflow.com/users/7382994/adel-salah"}, "edited": false, "score": 0, "creation_date": 1483697230, "post_id": 41501707, "comment_id": 70211809, "body": "I honestly don&#39;t have much experience with Perl but some times I have to write simple scripts to make easy my work. thx for your support"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1483697650, "post_id": 41501707, "comment_id": 70212078, "body": "So you want to know if it doesn&#39;t match. Please make sure to <b>include all details in your question</b>. We cannot guess what you&#39;re not telling us."}], "answers": [{"comments": [{"owner": {"reputation": 9, "user_id": 7382994, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-JzTad-Vatx8/AAAAAAAAAAI/AAAAAAAAAAw/4ScHX64x-40/photo.jpg?sz=128", "display_name": "Adel SALAH", "link": "https://stackoverflow.com/users/7382994/adel-salah"}, "edited": false, "score": 0, "creation_date": 1483708701, "post_id": 41501849, "comment_id": 70218649, "body": "Problem solved with this expression: if ( ! grep { /$stream_s/ } @astreams ) {      # no match, do something } thx a lot."}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "reply_to_user": {"reputation": 9, "user_id": 7382994, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-JzTad-Vatx8/AAAAAAAAAAI/AAAAAAAAAAw/4ScHX64x-40/photo.jpg?sz=128", "display_name": "Adel SALAH", "link": "https://stackoverflow.com/users/7382994/adel-salah"}, "edited": false, "score": 0, "creation_date": 1483708827, "post_id": 41501849, "comment_id": 70218724, "body": "@AdelSALAH: Note that it if there are several matches, it tries all of them."}], "tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": false, "score": 3, "last_activity_date": 1483691801, "creation_date": 1483691801, "answer_id": 41501849, "question_id": 41501707, "link": "https://stackoverflow.com/questions/41501707/perl-array-search-a-string-in/41501849#41501849", "title": "Perl Array search a string in", "body": "<p>The binding operator interprets its left argument in scalar context, so it makes no sense to use it on an array (unless you want to match the number of elements). Use a loop or an equivalent construct:</p>\n\n<pre><code>#! /usr/bin/perl\nuse warnings;\nuse strict;\n\nuse List::MoreUtils qw{ any };\n\nmy @astreams = qw( jatm5_INT jatm5_APPL jatm5_JAVA\n                   jatm5_RLS jatm5_EDAG jatm5_REC );\n\nmy $stream_s = qr/EDA/;\n\nprint \"Matched\\n\" if any { /$stream_s/ } @astreams;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 9, "user_id": 7382994, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-JzTad-Vatx8/AAAAAAAAAAI/AAAAAAAAAAw/4ScHX64x-40/photo.jpg?sz=128", "display_name": "Adel SALAH", "link": "https://stackoverflow.com/users/7382994/adel-salah"}, "edited": false, "score": 0, "creation_date": 1483697281, "post_id": 41502318, "comment_id": 70211829, "body": "it is windows no grep posssible -:("}, {"owner": {"reputation": 3327, "user_id": 1604311, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/0frKT.jpg?s=128&g=1", "display_name": "Arunesh Singh", "link": "https://stackoverflow.com/users/1604311/arunesh-singh"}, "edited": false, "score": 4, "creation_date": 1483697474, "post_id": 41502318, "comment_id": 70211960, "body": "It is not <a href=\"https://www.gnu.org/software/grep/manual/grep.html\" rel=\"nofollow noreferrer\"><code>Linux grep</code></a> it is <a href=\"http://perldoc.perl.org/functions/grep.html\" rel=\"nofollow noreferrer\"><code>Perl grep</code></a> which is platform independent. Both of them behaves quite differently."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 9, "user_id": 7382994, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-JzTad-Vatx8/AAAAAAAAAAI/AAAAAAAAAAw/4ScHX64x-40/photo.jpg?sz=128", "display_name": "Adel SALAH", "link": "https://stackoverflow.com/users/7382994/adel-salah"}, "edited": false, "score": 1, "creation_date": 1483698273, "post_id": 41502318, "comment_id": 70212412, "body": "@Adel as Arunesh says, this is not the Linux command <code>grep</code>, but it&#39;s a keyword in Perl. Just like <code>if</code> or <code>foreach</code> or <code>print</code>. All of those work on any operating system. There are some built-ins in Perl that do things that are OS specific, like <a href=\"http://perldoc.perl.org/functions/say.html\" rel=\"nofollow noreferrer\"><code>say</code></a> or <a href=\"http://perldoc.perl.org/functions/gethostbyname.html\" rel=\"nofollow noreferrer\"><code>gethostbyname</code></a>, but Perl makes sure that it uses the right implementation under the hood so they will work on whatever OS you are, no matter if that&#39;s Windows or Linux or MacOS or Solaris or whatever else the Perl was compiled for."}, {"owner": {"reputation": 9, "user_id": 7382994, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-JzTad-Vatx8/AAAAAAAAAAI/AAAAAAAAAAw/4ScHX64x-40/photo.jpg?sz=128", "display_name": "Adel SALAH", "link": "https://stackoverflow.com/users/7382994/adel-salah"}, "edited": false, "score": 0, "creation_date": 1483698285, "post_id": 41502318, "comment_id": 70212418, "body": "OK but how to tall or to check that /$stream_s/ doesn&#39;t exist in @astreams;?"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 9, "user_id": 7382994, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-JzTad-Vatx8/AAAAAAAAAAI/AAAAAAAAAAw/4ScHX64x-40/photo.jpg?sz=128", "display_name": "Adel SALAH", "link": "https://stackoverflow.com/users/7382994/adel-salah"}, "edited": false, "score": 0, "creation_date": 1483698307, "post_id": 41502318, "comment_id": 70212436, "body": "@AdelSALAH see my update, I just included that in the answer"}], "tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": false, "score": 4, "last_activity_date": 1483698633, "last_edit_date": 1483698633, "creation_date": 1483693837, "answer_id": 41502318, "question_id": 41501707, "link": "https://stackoverflow.com/questions/41501707/perl-array-search-a-string-in/41502318#41502318", "title": "Perl Array search a string in", "body": "<p>If you want to find all elements in the array that match the pattern, <a href=\"http://perldoc.perl.org/functions/grep.html\" rel=\"nofollow noreferrer\">the <code>grep</code> builtin</a> in Perl is your friend.</p>\n\n<pre><code>my @matches = grep { /$stream_s/ } @astreams;\n</code></pre>\n\n<p>This will try to match each element against the pattern <code>/$stream_s/</code> and <em>let through</em> only the ones that contain <code>$stream_s</code>. Those end up in your new array.</p>\n\n<p>If you want to reverse this and find all the elements in <code>@astreams</code> that do not match a certain pattern, you just negate the match.</p>\n\n<pre><code>my @not_matched = grep { ! /$stream_s/ } @astreams;\n</code></pre>\n\n<p>Here's a full example:</p>\n\n<pre><code>use strict;\nuse warnings;\nuse Data::Dumper;\n\nmy @astreams = qw(\n    jatm5_INT jatm5_APPL jatm5_JAVA\n    jatm5_RLS jatm5_EDAG jatm5_REC\n    5_ASDF\n);\n\nmy $stream_s = 'jat';\n\nmy @not_matched = grep { !/$stream_s/ } @astreams;\n\nprint Dumper \\@not_matched;\n</code></pre>\n\n<p>This will output </p>\n\n<pre><code>$VAR1 = [\n          '5_ASDF'\n        ];\n</code></pre>\n\n<p>To just do something if any of them doesn't match, but you don't care which one that is, you can use <code>grep</code> inside an <code>if</code>, where its return value will be evaluated in <em>scalar context</em>. That means, the <code>if</code> will look at the number of elements returned by <code>grep</code>. If that is not 0, it is considered a <em>true value</em> and the check passes and the block will be entered.</p>\n\n<pre><code>if ( grep { /$stream_s/ } @astreams ) {\n    # we found a match, do stuff\n} else {\n    # no match, do something else\n}\n</code></pre>\n\n<p>You can of course also turn that around. All three forms below are equivalent.</p>\n\n<pre><code>if ( ! grep { /$stream_s/ } @astreams ) {\n     # no match, do something\n}\n\nif ( not grep { /$stream_s/ } @astreams ) {\n     # no match, do something\n}\n\nunless ( grep { /$stream_s/ } @astreams ) {\n     # no match, do something\n}\n</code></pre>\n\n<hr>\n\n<p>Note that your matching will check if any element in <code>@stream</code> <strong>contains</strong> (or does not contain) <code>$stream_s</code>.</p>\n\n<pre><code>my $stream_s = 'a';\nmy @astreams = qw(\n    jatm5_INT jatm5_APPL jatm5_JAVA\n    jatm5_RLS jatm5_EDAG jatm5_REC\n    5_ASDF 5_ASDF_FOOBAR\n);\n</code></pre>\n\n<p>In the above case, the first six elements contain an <code>a</code> somewhere. All of them will match.</p>\n\n<pre><code>my $stream_s = '5_';\nmy @astreams = qw(\n    jatm5_INT jatm5_APPL jatm5_JAVA\n    jatm5_RLS jatm5_EDAG jatm5_REC\n    5_ASDF 5_ASDF_FOOBAR\n);\n</code></pre>\n\n<p>In this example, all elements contain <code>5_</code>.</p>\n\n<pre><code>my $stream_s = '5_ASDF';\nmy @astreams = qw(\n    jatm5_INT jatm5_APPL jatm5_JAVA\n    jatm5_RLS jatm5_EDAG jatm5_REC\n    5_ASDF 5_ASDF_FOOBAR\n);\n</code></pre>\n\n<p>Now the last two will match. If you don't want partial matches, but want to check for <em>exactly</em> that string, don't use a regular expression match.</p>\n\n<pre><code>my $stream_s = 'FOOBAR';\nmy @astreams = qw(\n    jatm5_INT jatm5_APPL jatm5_JAVA\n    jatm5_RLS jatm5_EDAG jatm5_REC\n    5_ASDF 5_ASDF_FOOBAR\n);\n\nunless ( grep { $_ eq $stream_s } @astreams ) {\n     # only go here if there is no element 'FOOBAR' in @astreams\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3973, "user_id": 266747, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/da5e3914edcd58b1abd64a38a2cff8a5?s=128&d=identicon&r=PG", "display_name": "Barton Chittenden", "link": "https://stackoverflow.com/users/266747/barton-chittenden"}, "is_accepted": false, "score": 0, "last_activity_date": 1483738478, "creation_date": 1483738478, "answer_id": 41514724, "question_id": 41501707, "link": "https://stackoverflow.com/questions/41501707/perl-array-search-a-string-in/41514724#41514724", "title": "Perl Array search a string in", "body": "<p>This is more because TMTOWTDI than because I think this is a particularly good way to do it.</p>\n\n<p>You could also interpolate the array as a string, and do a regex search on that.</p>\n\n<pre><code>if ( \"@astreams\" !~ /$stream_s/ )\n</code></pre>\n\n<p>Would match on all of the values that you're looking for, because <code>\"@astreams\"</code> interpolates to <code>\"jatm5_INTjatm5_APPLjatm5_JAVAjatm5_RLSjatm5_EDAGjatm5_REC\"</code> ... unfortunately, it will also match on strings like <code>\"EDAGjatm5\"</code>.</p>\n\n<pre><code>if ( join( ' ', @astreams ) !~ /$stream_s/ )\n</code></pre>\n\n<p>Would <em>probably</em> do the right thing, assuming that <code>$stream_s</code> doesn't contain spaces. ... I wouldn't actually <em>use</em> this, because I want code that works, not code that probably works, but I think that it's instructive to think about the worse ways of doing things, and why they're not the best way.</p>\n"}], "owner": {"reputation": 9, "user_id": 7382994, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-JzTad-Vatx8/AAAAAAAAAAI/AAAAAAAAAAw/4ScHX64x-40/photo.jpg?sz=128", "display_name": "Adel SALAH", "link": "https://stackoverflow.com/users/7382994/adel-salah"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3106, "favorite_count": 1, "answer_count": 3, "score": 0, "last_activity_date": 1483738478, "creation_date": 1483691177, "last_edit_date": 1483693124, "question_id": 41501707, "link": "https://stackoverflow.com/questions/41501707/perl-array-search-a-string-in", "title": "Perl Array search a string in", "body": "<p>I have an array <code>@astreams</code> which contains following values </p>\n\n<pre><code>jatm5_INT jatm5_APPL jatm5_JAVA jatm5_RLS jatm5_EDAG jatm5_REC \n</code></pre>\n\n<p>I want to search a string in it with following construct </p>\n\n<pre><code>if ( @astreams !~ /$stream_s/ )\n</code></pre>\n\n<p>and want to print something in case of match or not but it did not work </p>\n\n<p>I am using <code>CCPERL (ClearCase Perl): This is perl, v5.8.6 built for MSWin32-x86-multi-thread</code></p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 470, "user_id": 6193608, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dliye.jpg?s=128&g=1", "display_name": "David Verdin", "link": "https://stackoverflow.com/users/6193608/david-verdin"}, "edited": false, "score": 1, "creation_date": 1483689809, "post_id": 41500308, "comment_id": 70208051, "body": "&quot;It does not work&quot; is a bit short. Could you please add details, such as error messages or the behaviour of the produced exe file?"}, {"owner": {"reputation": 118, "user_id": 5055195, "user_type": "registered", "accept_rate": 11, "profile_image": "https://www.gravatar.com/avatar/c972d44652eeadefd86ac423c3d6e629?s=128&d=identicon&r=PG&f=1", "display_name": "Nikhil Ranjan", "link": "https://stackoverflow.com/users/5055195/nikhil-ranjan"}, "reply_to_user": {"reputation": 470, "user_id": 6193608, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dliye.jpg?s=128&g=1", "display_name": "David Verdin", "link": "https://stackoverflow.com/users/6193608/david-verdin"}, "edited": false, "score": 0, "creation_date": 1483703006, "post_id": 41500308, "comment_id": 70215144, "body": "it does not give any error when we make exe file using pp command. my problem is:- after making exe file it does not 7z.exe and its dll file for create zip. May be i need to declare path of  7z.exe and its dll  or some like. Could you suggest me any idea"}, {"owner": {"reputation": 118, "user_id": 5055195, "user_type": "registered", "accept_rate": 11, "profile_image": "https://www.gravatar.com/avatar/c972d44652eeadefd86ac423c3d6e629?s=128&d=identicon&r=PG&f=1", "display_name": "Nikhil Ranjan", "link": "https://stackoverflow.com/users/5055195/nikhil-ranjan"}, "reply_to_user": {"reputation": 470, "user_id": 6193608, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dliye.jpg?s=128&g=1", "display_name": "David Verdin", "link": "https://stackoverflow.com/users/6193608/david-verdin"}, "edited": false, "score": 0, "creation_date": 1484551128, "post_id": 41500308, "comment_id": 70539964, "body": "David Verdin could you help me on this problem ???"}, {"owner": {"reputation": 470, "user_id": 6193608, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dliye.jpg?s=128&g=1", "display_name": "David Verdin", "link": "https://stackoverflow.com/users/6193608/david-verdin"}, "edited": false, "score": 0, "creation_date": 1484556898, "post_id": 41500308, "comment_id": 70542617, "body": "Does your code consists of only these two lines? If not, you might want to show the other ones."}, {"owner": {"reputation": 470, "user_id": 6193608, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dliye.jpg?s=128&g=1", "display_name": "David Verdin", "link": "https://stackoverflow.com/users/6193608/david-verdin"}, "edited": false, "score": 0, "creation_date": 1484557020, "post_id": 41500308, "comment_id": 70542686, "body": "Also: you should try to test whether your packaged file find the executable and dll, using -f for example."}, {"owner": {"reputation": 118, "user_id": 5055195, "user_type": "registered", "accept_rate": 11, "profile_image": "https://www.gravatar.com/avatar/c972d44652eeadefd86ac423c3d6e629?s=128&d=identicon&r=PG&f=1", "display_name": "Nikhil Ranjan", "link": "https://stackoverflow.com/users/5055195/nikhil-ranjan"}, "reply_to_user": {"reputation": 470, "user_id": 6193608, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dliye.jpg?s=128&g=1", "display_name": "David Verdin", "link": "https://stackoverflow.com/users/6193608/david-verdin"}, "edited": false, "score": 0, "creation_date": 1484559592, "post_id": 41500308, "comment_id": 70544124, "body": "No code is very long i can&#39;t put here :(. Because low &quot;REPUTATION&quot;,"}, {"owner": {"reputation": 470, "user_id": 6193608, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dliye.jpg?s=128&g=1", "display_name": "David Verdin", "link": "https://stackoverflow.com/users/6193608/david-verdin"}, "edited": false, "score": 0, "creation_date": 1484560547, "post_id": 41500308, "comment_id": 70544651, "body": "Okie dokie. Wait a little."}, {"owner": {"reputation": 470, "user_id": 6193608, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dliye.jpg?s=128&g=1", "display_name": "David Verdin", "link": "https://stackoverflow.com/users/6193608/david-verdin"}, "edited": false, "score": 0, "creation_date": 1484560932, "post_id": 41500308, "comment_id": 70544889, "body": "Re-reading the documentation of pp, it appears you&#39;re doing it wrong: it will help you pack yor perl executable with perl modules and distribute it. I doubt it will allow to add executables such as 7z. For one, you don&#39;t know where 7z expects to find its dll. If you just want to create a tar.gz file, you should rather use Archive::Tar module."}, {"owner": {"reputation": 118, "user_id": 5055195, "user_type": "registered", "accept_rate": 11, "profile_image": "https://www.gravatar.com/avatar/c972d44652eeadefd86ac423c3d6e629?s=128&d=identicon&r=PG&f=1", "display_name": "Nikhil Ranjan", "link": "https://stackoverflow.com/users/5055195/nikhil-ranjan"}, "reply_to_user": {"reputation": 470, "user_id": 6193608, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dliye.jpg?s=128&g=1", "display_name": "David Verdin", "link": "https://stackoverflow.com/users/6193608/david-verdin"}, "edited": false, "score": 0, "creation_date": 1484561006, "post_id": 41500308, "comment_id": 70544933, "body": "when i test file existence then it search outside of exe not inside of exe. Very confused why not work with inside exe  if i put both file in same direction then it work file but i don&#39;t want my program use outside file"}, {"owner": {"reputation": 118, "user_id": 5055195, "user_type": "registered", "accept_rate": 11, "profile_image": "https://www.gravatar.com/avatar/c972d44652eeadefd86ac423c3d6e629?s=128&d=identicon&r=PG&f=1", "display_name": "Nikhil Ranjan", "link": "https://stackoverflow.com/users/5055195/nikhil-ranjan"}, "reply_to_user": {"reputation": 470, "user_id": 6193608, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dliye.jpg?s=128&g=1", "display_name": "David Verdin", "link": "https://stackoverflow.com/users/6193608/david-verdin"}, "edited": false, "score": 0, "creation_date": 1484561201, "post_id": 41500308, "comment_id": 70545041, "body": "PAR allow to add additional on your exe file using -a"}], "answers": [{"comments": [{"owner": {"reputation": 118, "user_id": 5055195, "user_type": "registered", "accept_rate": 11, "profile_image": "https://www.gravatar.com/avatar/c972d44652eeadefd86ac423c3d6e629?s=128&d=identicon&r=PG&f=1", "display_name": "Nikhil Ranjan", "link": "https://stackoverflow.com/users/5055195/nikhil-ranjan"}, "edited": false, "score": 0, "creation_date": 1484563024, "post_id": 41674282, "comment_id": 70546103, "body": "I am very thank full, But using this module when you extract tar file then it extract file, without any extension. That&#39;s why i use &quot;7z&quot;. I already done it with this module, but it does not meet my requirement."}, {"owner": {"reputation": 470, "user_id": 6193608, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dliye.jpg?s=128&g=1", "display_name": "David Verdin", "link": "https://stackoverflow.com/users/6193608/david-verdin"}, "reply_to_user": {"reputation": 118, "user_id": 5055195, "user_type": "registered", "accept_rate": 11, "profile_image": "https://www.gravatar.com/avatar/c972d44652eeadefd86ac423c3d6e629?s=128&d=identicon&r=PG&f=1", "display_name": "Nikhil Ranjan", "link": "https://stackoverflow.com/users/5055195/nikhil-ranjan"}, "edited": false, "score": 0, "creation_date": 1484563244, "post_id": 41674282, "comment_id": 70546246, "body": "Wht do you mean &quot;without any extension&quot; ?"}, {"owner": {"reputation": 470, "user_id": 6193608, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dliye.jpg?s=128&g=1", "display_name": "David Verdin", "link": "https://stackoverflow.com/users/6193608/david-verdin"}, "reply_to_user": {"reputation": 118, "user_id": 5055195, "user_type": "registered", "accept_rate": 11, "profile_image": "https://www.gravatar.com/avatar/c972d44652eeadefd86ac423c3d6e629?s=128&d=identicon&r=PG&f=1", "display_name": "Nikhil Ranjan", "link": "https://stackoverflow.com/users/5055195/nikhil-ranjan"}, "edited": false, "score": 0, "creation_date": 1484563699, "post_id": 41674282, "comment_id": 70546513, "body": "Do you mean you want to also extract files with the same script?"}, {"owner": {"reputation": 118, "user_id": 5055195, "user_type": "registered", "accept_rate": 11, "profile_image": "https://www.gravatar.com/avatar/c972d44652eeadefd86ac423c3d6e629?s=128&d=identicon&r=PG&f=1", "display_name": "Nikhil Ranjan", "link": "https://stackoverflow.com/users/5055195/nikhil-ranjan"}, "edited": false, "score": 0, "creation_date": 1484564160, "post_id": 41674282, "comment_id": 70546783, "body": "No, When you extract the gz file, Then the extracted file should be .tar. But it extract file with only archive name and it have no extension. I was done it with Archive::Tar."}, {"owner": {"reputation": 118, "user_id": 5055195, "user_type": "registered", "accept_rate": 11, "profile_image": "https://www.gravatar.com/avatar/c972d44652eeadefd86ac423c3d6e629?s=128&d=identicon&r=PG&f=1", "display_name": "Nikhil Ranjan", "link": "https://stackoverflow.com/users/5055195/nikhil-ranjan"}, "edited": false, "score": 0, "creation_date": 1484564266, "post_id": 41674282, "comment_id": 70546843, "body": "Now, Only I want how to use any file inside of exe if I add using -M or -a"}, {"owner": {"reputation": 470, "user_id": 6193608, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dliye.jpg?s=128&g=1", "display_name": "David Verdin", "link": "https://stackoverflow.com/users/6193608/david-verdin"}, "reply_to_user": {"reputation": 118, "user_id": 5055195, "user_type": "registered", "accept_rate": 11, "profile_image": "https://www.gravatar.com/avatar/c972d44652eeadefd86ac423c3d6e629?s=128&d=identicon&r=PG&f=1", "display_name": "Nikhil Ranjan", "link": "https://stackoverflow.com/users/5055195/nikhil-ranjan"}, "edited": false, "score": 0, "creation_date": 1484565301, "post_id": 41674282, "comment_id": 70547383, "body": "No, that&#39;s just the way you name your archive. When gunzipping a file, if it ends with &quot;.gz&quot;, the resulting file is named after what is before &quot;.gz&quot;. If it&#39;s called &quot;.tgz&quot; or &quot;.tar.gz&quot;, you get a &quot;.tar&quot; file. Actually, I don&#39;t know if it&#39;s done when unzipping or when you zip with this extension. Anyway, look at my modified solution. You obtain a single .tar file as you wished."}, {"owner": {"reputation": 470, "user_id": 6193608, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dliye.jpg?s=128&g=1", "display_name": "David Verdin", "link": "https://stackoverflow.com/users/6193608/david-verdin"}, "reply_to_user": {"reputation": 118, "user_id": 5055195, "user_type": "registered", "accept_rate": 11, "profile_image": "https://www.gravatar.com/avatar/c972d44652eeadefd86ac423c3d6e629?s=128&d=identicon&r=PG&f=1", "display_name": "Nikhil Ranjan", "link": "https://stackoverflow.com/users/5055195/nikhil-ranjan"}, "edited": false, "score": 0, "creation_date": 1484565363, "post_id": 41674282, "comment_id": 70547417, "body": "And i won&#39;t be able to do more. I don&#39;t think you have a simple solution to embed 7zip in a perl packaged executable."}], "tags": [], "owner": {"reputation": 470, "user_id": 6193608, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dliye.jpg?s=128&g=1", "display_name": "David Verdin", "link": "https://stackoverflow.com/users/6193608/david-verdin"}, "is_accepted": false, "score": 1, "last_activity_date": 1484565143, "last_edit_date": 1484565143, "creation_date": 1484562582, "answer_id": 41674282, "question_id": 41500308, "link": "https://stackoverflow.com/questions/41500308/how-to-use-additional-file-in-perl-while-we-make-exe/41674282#41674282", "title": "How to use additional file in Perl while we make exe", "body": "<p>This is my suggested solution. It does not use 7zip which I have no idea how to make work within pp.</p>\n\n<p>It's based on <a href=\"http://search.cpan.org/~bingos/Archive-Tar-2.24/lib/Archive/Tar.pm\" rel=\"nofollow noreferrer\">Archive::Tar</a> instead.</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\n\nuse Cwd;\nuse Archive::Tar;\n\nmy $current_dir = getcwd();\nmy $file_name = 'archive';\n\nmy @files_to_archive;\n\nopendir(DIR, $current_dir) or die $!;\n\nwhile (my $file = readdir(DIR)) {\n    next if ($file =~ m/^\\./);\n    push @files_to_archive, $file;\n}\n\nclosedir(DIR);\n\nmy $tar = Archive::Tar-&gt;new;\n$tar-&gt;add_files(@files_to_archive);\n$tar-&gt;write(\"$current_dir/$file_name.tgz\", COMPRESS_GZIP);\n\nmy $extract_dir = '/tmp/test_arc';\nmkdir $extract_dir unless (-d $extract_dir );\nchdir $extract_dir;\n$tar-&gt;extract('archive.tar');\n</code></pre>\n\n<p>Afterwards, you run</p>\n\n<pre><code>pp -o zipper.exe archive.pl -M Archive::Tar\n</code></pre>\n\n<p>and you should have your standalone archiver.</p>\n"}], "owner": {"reputation": 118, "user_id": 5055195, "user_type": "registered", "accept_rate": 11, "profile_image": "https://www.gravatar.com/avatar/c972d44652eeadefd86ac423c3d6e629?s=128&d=identicon&r=PG&f=1", "display_name": "Nikhil Ranjan", "link": "https://stackoverflow.com/users/5055195/nikhil-ranjan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 70, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1484565143, "creation_date": 1483684780, "question_id": 41500308, "link": "https://stackoverflow.com/questions/41500308/how-to-use-additional-file-in-perl-while-we-make-exe", "title": "How to use additional file in Perl while we make exe", "body": "<p>I will add some extra file while I make .exe file using perl (PP). Please see my below code for making .exe file.</p>\n\n<pre><code>pp -gui -a 7z.exe -a 7z.dll -o gui_curl.exe gui_curl.pl\n</code></pre>\n\n<p>Both file are added when .exe build, But it does not work. I don't know why?</p>\n\n<p>I used both file in my code, like below:-</p>\n\n<pre><code>system(\"7z.exe a $current_dir/$file_name.tar $current_dir\");\nsystem(\"7z.exe a $current_dir/$file_name.gz $current_dir/$file_name.tar\");\n</code></pre>\n\n<p>Please suggest me how to use this file. I don't want to put this file outside from exe</p>\n"}, {"tags": ["xml", "perl"], "comments": [{"owner": {"reputation": 470, "user_id": 6193608, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dliye.jpg?s=128&g=1", "display_name": "David Verdin", "link": "https://stackoverflow.com/users/6193608/david-verdin"}, "edited": false, "score": 1, "creation_date": 1483690289, "post_id": 41500181, "comment_id": 70208213, "body": "Do you have an example of the code producing this error? Just like that it&#39;s pretty hard - at least to me - to understand what you&#39;re trying to achieve."}], "answers": [{"tags": [], "owner": {"reputation": 137436, "user_id": 415448, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/P2vVZ.png?s=128&g=1", "display_name": "Michael Kay", "link": "https://stackoverflow.com/users/415448/michael-kay"}, "is_accepted": false, "score": 1, "last_activity_date": 1483695053, "creation_date": 1483695053, "answer_id": 41502655, "question_id": 41500181, "link": "https://stackoverflow.com/questions/41500181/the-feature-http-xml-org-sax-features-namespaces-is-not-recognized-by-xmls/41502655#41502655", "title": "The feature &#39;http://xml.org/sax/features/namespaces&#39; is not recognized by XML::SAX::ExpatXS", "body": "<p>The (original Java) SAX API lets the client set options on the parser using property names which always take the form of URIs, of which <a href=\"http://xml.org/sax/features/namespaces\" rel=\"nofollow noreferrer\">http://xml.org/sax/features/namespaces</a> is an example. These are simply unique names, they are not locations on the internet that will be accessed. The SAX API specification says that every conformant parser must recognize certain options, of which <a href=\"http://xml.org/sax/features/namespaces\" rel=\"nofollow noreferrer\">http://xml.org/sax/features/namespaces</a> is an example. The error message means that you are using a parser which does not conform to this specification.</p>\n\n<p>Beyond that, I'm afraid I don't know enough about your processing environment to know what you can do about it. In the Java world, a workaround might be to insert a dummy parser as a man-in-the-middle to intercept the request from the client and avoid passing it on to the real parser.</p>\n"}], "owner": {"reputation": 1, "user_id": 7377596, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-0ocBQx95hzQ/AAAAAAAAAAI/AAAAAAAAAc0/eEGz-idVcJ4/photo.jpg?sz=128", "display_name": "Arun Agarwal", "link": "https://stackoverflow.com/users/7377596/arun-agarwal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 765, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1483736203, "creation_date": 1483684130, "last_edit_date": 1483736203, "question_id": 41500181, "link": "https://stackoverflow.com/questions/41500181/the-feature-http-xml-org-sax-features-namespaces-is-not-recognized-by-xmls", "title": "The feature &#39;http://xml.org/sax/features/namespaces&#39; is not recognized by XML::SAX::ExpatXS", "body": "<p>I am trying to submit a Perl validation script to the LSF server. The script runs fine on my local machine but the same script is throwing error</p>\n\n<blockquote>\n  <p>The feature '<a href=\"http://xml.org/sax/features/namespaces\" rel=\"nofollow noreferrer\">http://xml.org/sax/features/namespaces</a>' is not recognized by XML::SAX::ExpatXS</p>\n</blockquote>\n\n<p>on the LSF machine.</p>\n\n<p>The LSF machines do not have access to internet.</p>\n\n<p>Google doen't result in any good answers, please help how can I identify the config difference between the two machines which is causing this issue.</p>\n"}, {"tags": ["perl"], "answers": [{"tags": [], "owner": {"reputation": 1253, "user_id": 792479, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/59768793d816fc6e44f67a9bb5ffbe13?s=128&d=identicon&r=PG", "display_name": "Raghuveer", "link": "https://stackoverflow.com/users/792479/raghuveer"}, "is_accepted": true, "score": 3, "last_activity_date": 1483690650, "last_edit_date": 1483690650, "creation_date": 1483688545, "answer_id": 41501164, "question_id": 41499999, "link": "https://stackoverflow.com/questions/41499999/how-can-i-resolve-the-error-bash-corelist-command-not-found/41501164#41501164", "title": "How can I resolve the error &quot;-bash: corelist: command not found&quot;?", "body": "<p>The error suggests that corelist is not installed on your machine. If not installed, you can install it via </p>\n\n<p>Ubuntu: <code>sudo apt-get install libmodule-corelist-perl</code> </p>\n\n<p>Centos: <a href=\"http://rpm.pbone.net/index.php3/stat/4/idpl/31368120/dir/centos_6/com/perl-Module-CoreList-2.18-141.el6.x86_64.rpm.html\" rel=\"nofollow noreferrer\">Via RPM here</a></p>\n\n<p>Once you have it installed, you can find the differences between two versions of Perl as follows:</p>\n\n<pre><code>corelist --diff v5.12.0 v5.24.0\n</code></pre>\n\n<p>If you have problems installing it, there is a web version of <code>corelist</code> available online to which you can refer: <a href=\"http://perlpunks.de/corelist\" rel=\"nofollow noreferrer\">http://perlpunks.de/corelist</a> It supports doing differences between Perl versions too.</p>\n"}], "owner": {"reputation": 254, "user_id": 6752390, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/6071587a3b51842ff285ac4f5c43c0a7?s=128&d=identicon&r=PG&f=1", "display_name": "questionar", "link": "https://stackoverflow.com/users/6752390/questionar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 52, "favorite_count": 0, "accepted_answer_id": 41501164, "answer_count": 1, "score": 0, "last_activity_date": 1483724931, "creation_date": 1483683205, "last_edit_date": 1483724931, "question_id": 41499999, "link": "https://stackoverflow.com/questions/41499999/how-can-i-resolve-the-error-bash-corelist-command-not-found", "title": "How can I resolve the error &quot;-bash: corelist: command not found&quot;?", "body": "<p>I want to find the differences between two versions of Perl using the <a href=\"https://metacpan.org/pod/corelist\" rel=\"nofollow noreferrer\"><code>corelist</code></a> command line utility.</p>\n\n<p>I tried running the following command: </p>\n\n<pre><code>corelist File::Spec\n</code></pre>\n\n<p>but I got an error:</p>\n\n<blockquote>\n  <p>-bash: corelist: command not found</p>\n</blockquote>\n\n<p>How can I resolve this?</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 796, "user_id": 1807271, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/EskVD.jpg?s=128&g=1", "display_name": "user1807271", "link": "https://stackoverflow.com/users/1807271/user1807271"}, "reply_to_user": {"reputation": 45481, "user_id": 197758, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/628da6ba2a6c70e35c009b7e3c3a430a?s=128&d=identicon&r=PG", "display_name": "toolic", "link": "https://stackoverflow.com/users/197758/toolic"}, "edited": false, "score": 0, "creation_date": 1483651626, "post_id": 41494747, "comment_id": 70196058, "body": "That second 4 &quot;dup&quot; line in file B is another wrench in my series of problems. I just posted the anticipated output. Thanks."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1483657403, "post_id": 41494747, "comment_id": 70198701, "body": "These files are not sorted in any way and their lines may be mixed around, right?  (So line #2 from fileA may match line #50 from fileB.)  Are the files very large?  What do you mean by &quot;<i>the coordinates in field 3 to be exact <b>or overlap</b></i>&quot; -- how does the number in field 3 &quot;<i>overlap</i>&quot;?"}, {"owner": {"reputation": 796, "user_id": 1807271, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/EskVD.jpg?s=128&g=1", "display_name": "user1807271", "link": "https://stackoverflow.com/users/1807271/user1807271"}, "edited": false, "score": 0, "creation_date": 1483658775, "post_id": 41494747, "comment_id": 70199136, "body": "Not sorted at all.  I meant the range from fields 3 and 4. The logic is more explicit."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1483659140, "post_id": 41494747, "comment_id": 70199255, "body": "OK.  So, <code>10 20</code> and <code>18 30</code> &quot;match&quot; but <code>10 20</code> and <code>21 30</code> don&#39;t, right?  Also: are the files very very large?"}, {"owner": {"reputation": 796, "user_id": 1807271, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/EskVD.jpg?s=128&g=1", "display_name": "user1807271", "link": "https://stackoverflow.com/users/1807271/user1807271"}, "edited": false, "score": 0, "creation_date": 1483659314, "post_id": 41494747, "comment_id": 70199313, "body": "No. 10 20 is exactly like 10 20. 10 18 and 10 20 overlap. 10 20 and 21 31 don&#39;t over lap."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1483659636, "post_id": 41494747, "comment_id": 70199417, "body": "Well, OK -- but do you need to make a distinction between fields 3 and 4 being exactly the same or overlapping?  (As long as third is the same, I forgot that.  Lotsa rules :).  If they are <i>either</i> exactly the same <i>or</i> overlap the lines are considered to match, yes?"}], "answers": [{"comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1483664528, "post_id": 41497308, "comment_id": 70200766, "body": "@user1807271  Here is a basic solution, tested with your sample data.  Let me know whether it matches the requirements.  The criterion for how the third and fourth fields should be compared is tucked away in a sub so it can be adjusted if I misunderstood it.  The key trick is the hash that records all elements of B that <i>have been</i> found -- so the remaining ones (with value 0 in the hash) are the extra ones in B."}, {"owner": {"reputation": 796, "user_id": 1807271, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/EskVD.jpg?s=128&g=1", "display_name": "user1807271", "link": "https://stackoverflow.com/users/1807271/user1807271"}, "edited": false, "score": 0, "creation_date": 1483666879, "post_id": 41497308, "comment_id": 70201379, "body": "It looks good! The only thing missing (piece I need), is if it doesn&#39;t overlap then it needs to be put in \\@not_in_A or \\@not_in_B. Thank you so much!"}, {"owner": {"reputation": 796, "user_id": 1807271, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/EskVD.jpg?s=128&g=1", "display_name": "user1807271", "link": "https://stackoverflow.com/users/1807271/user1807271"}, "edited": false, "score": 0, "creation_date": 1483666930, "post_id": 41497308, "comment_id": 70201389, "body": "I don&#39;t think I mentioned that issue above."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 796, "user_id": 1807271, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/EskVD.jpg?s=128&g=1", "display_name": "user1807271", "link": "https://stackoverflow.com/users/1807271/user1807271"}, "edited": false, "score": 1, "creation_date": 1483676695, "post_id": 41497308, "comment_id": 70203558, "body": "@user1807271  It <i>is</i> put there.  If it doesn&#39;t overlap (the last, long, condition in the function) then the function returns false (lines don&#39;t match). Then that goes into <code>@not_in_B</code>.  All elements of <code>B</code> which were never matched by anything never got the <code>1</code> in the hash so they go into <code>@not_in_A</code> in the end.  It should take care of all cases.  It should be tested on bigger (and more varied) samples but it should be fine.  I think that the output fits the data, and matches what you show."}, {"owner": {"reputation": 796, "user_id": 1807271, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/EskVD.jpg?s=128&g=1", "display_name": "user1807271", "link": "https://stackoverflow.com/users/1807271/user1807271"}, "edited": false, "score": 0, "creation_date": 1483705037, "post_id": 41497308, "comment_id": 70216303, "body": "Ah. I missed it. I&#39;m going to give it a go today! Thanks. I will let you know what happens."}, {"owner": {"reputation": 796, "user_id": 1807271, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/EskVD.jpg?s=128&g=1", "display_name": "user1807271", "link": "https://stackoverflow.com/users/1807271/user1807271"}, "edited": false, "score": 0, "creation_date": 1483729744, "post_id": 41497308, "comment_id": 70231185, "body": "worked like a charm! (I had to edit the subroutine to better fit our definition of overlap) Really appreciate the help."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 796, "user_id": 1807271, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/EskVD.jpg?s=128&g=1", "display_name": "user1807271", "link": "https://stackoverflow.com/users/1807271/user1807271"}, "edited": false, "score": 1, "creation_date": 1483730089, "post_id": 41497308, "comment_id": 70231389, "body": "@user1807271 Great :)  That&#39;s what functions (and modular approaches) are for, it&#39;s much easier to tweak and change things. Btw, this should be fairly efficient, too. Let me know if any follow-up questions come up."}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": true, "score": 1, "last_activity_date": 1483730433, "last_edit_date": 1483730433, "creation_date": 1483664345, "answer_id": 41497308, "question_id": 41494747, "link": "https://stackoverflow.com/questions/41494747/comparing-two-files-where-one-piece-of-information-can-be-flexible/41497308#41497308", "title": "Comparing two files, where one piece of information can be flexible", "body": "<p>Here is a simple solution which is also fairly efficient.</p>\n\n<p>Iterate over lines of one file, checking each against all lines of the other (until a match is found). This is the very least we must do complexity wise, given all information that needs to be gathered.</p>\n\n<p>If a line from <code>A</code> is not found in <code>B</code>, it is added to <code>@not_in_B</code>.  To determine which lines in <code>B</code> are not in <code>A</code>, we prepare a hash where each element of <code>B</code> is a key with a value <code>0</code>. Once/if an element of <code>B</code> is found, the value of its key in the hash is set to <code>1</code>. Those that are not <code>1</code> at the end have never been found by elements of <code>A</code>, and so are the extra ones. They go in <code>@not_in_A</code>.</p>\n\n<p>Both files are first read into arrays for simplicity (but this <em>is</em> needed for the inner loop).</p>\n\n<pre><code>use warnings;\nuse strict;\nuse feature 'say';\n\nmy $f1 = 'f1.txt';\nmy $f2 = 'f2.txt';\n\nopen my $fh, '&lt;', $f1;\nmy @a1 = &lt;$fh&gt;; chomp(@a1);\nopen $fh, '&lt;', $f2;\nmy @a2 = &lt;$fh&gt;; chomp(@a2);\nclose $fh;\n\nmy (@not_in_A, @not_in_B);\nmy %Bs_in_A = map { $_ =&gt; 0 } @a2;\n\nforeach my $e1 (@a1)\n{\n    my $match = 0;\n    foreach my $e2 (@a2) \n    {\n        if ( lines_match($e1, $e2) ) { \n            $match = 1;\n            say \"Match:\\n\\tf1: $e1\\n\\tf2: $e2\";\n            $Bs_in_A{$e2} = 1;\n            last;\n        }\n    }   \n    push @not_in_B, $e1 if not $match;\n}\n@not_in_A = grep { $Bs_in_A{$_} == 0 } keys %Bs_in_A;\n\nsay '---';    \nsay \"Elements of A that are not in B:\";\nsay \"\\t$_\" for @not_in_B;\nsay \"Elements of B that are not in A:\";\nsay \"\\t$_\" for @not_in_A;\n\n\nsub lines_match\n{\n    my ($l1, $l2) = @_; \n    my @t1 = split ' ', $l1;\n    my @t2 = split ' ', $l2;\n\n    # First two fields must be the same\n    return if $t1[0] ne $t2[0] or $t1[1] ne $t2[1];\n\n    # Third-to-fourth-field ranges must overlap\n    return\n        if ($t1[2] &lt; $t2[2] and $t1[3] &lt; $t2[2])\n        or ($t1[2] &gt; $t2[3] and $t1[3] &gt; $t2[3]);\n\n    return 1;  # match\n}\n</code></pre>\n\n<p>Output</p>\n\n<pre>Match:\n        f1: 4 \"dup\" 37036335 37044984   \n        f2: 4 \"dup\" 37036335 37036735\nMatch:\n        f1: 3 \"dup\" 100146708 100147504 \n        f2: 3 \"dup\" 100146708 100147504\n---\nElements of A that are not in B:\n        7 \"del\" 100 203\n        2 \"dup\" 34 89\nElements of B that are not in A:\n        4 \"dup\" 68 109\n</pre>\n\n<p>Note that I've used <code>1</code> in place of <code>A</code> and <code>2</code> in place of <code>B</code>.</p>\n"}], "owner": {"reputation": 796, "user_id": 1807271, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/EskVD.jpg?s=128&g=1", "display_name": "user1807271", "link": "https://stackoverflow.com/users/1807271/user1807271"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 99, "favorite_count": 0, "accepted_answer_id": 41497308, "answer_count": 1, "score": 3, "last_activity_date": 1483730433, "creation_date": 1483650563, "last_edit_date": 1483652121, "question_id": 41494747, "link": "https://stackoverflow.com/questions/41494747/comparing-two-files-where-one-piece-of-information-can-be-flexible", "title": "Comparing two files, where one piece of information can be flexible", "body": "<p>Comparing two files. So easy, but comparing two files where one piece of information can be flexible is proving to be very challenging for me.</p>\n\n<pre><code>fileA \n4 \"dup\" 37036335 37044984   \n3 \"dup\" 100146708 100147504 \n7 \"del\" 100 203\n2 \"dup\" 34 89\n\nfileB\n4 \"dup\" 37036335 37036735\n3 \"dup\" 100146708 100147504\n4 \"dup\" 68 109\n</code></pre>\n\n<p>Anticipated output:</p>\n\n<pre><code>output_file1 (matching hits)\nfileA: 4 \"dup\" 37036335 37044984\nfileB: 4 \"dup\" 37036335 37036735\n\nfileA: 3 \"dup\" 100146708 100147504\nfileB: 3 \"dup\" 100146708 100147504\n\noutput_file2 (found in fileA, but not in FileB including non-overlap)\n7 \"del\" 100 203\n2 \"dup\" 34 89\n\noutput_file3 (found in fileB, but not in FileA including non-overlap)\n4 \"dup\" 68 109\n</code></pre>\n\n<p>The credentials are...\nI need field 1 and field 2 in the first file to exactly match the second file and the coordinates in field 3 to be exact or overlap.</p>\n\n<pre><code>This would mean these are the same.\nfileA :4 \"dup\" 37036335 37044984 \nfileB :4 \"dup\" 37036335 37036735\n</code></pre>\n\n<p>I also need to find differences between the two files. (no-overlap, 1 row isn't present in one file, but not in the other, etc)</p>\n\n<p>Here's the gist of what I've tried. I've written this code probably 4 different ways, alas, still no success. I've put both files into arrays (I've tried a hash too...idk)</p>\n\n<pre><code>## if no hits in original, but hits in calculated\n   if((! @ori) &amp;&amp; (@calc)){}\n\n## if CNV calls in original, but none in calculated\n   if((@ori) &amp;&amp; (! @calc)){}\n\n## if CNV calls in both\n   if((@ori) &amp;&amp; (@calc)){\n\n         ## compare calls with double 'for' loop\n         foreach my $l (@ori){\n\n                my @l = split(/\\s/,$l);\n                my $Ochromosome = $l[0];\n                my $Ostart = $l[2];\n                my $Oend = $l[3];\n                my $Otype = $l[1];\n\n                foreach my $l (@calc){\n\n                       my @l = split(/\\s/,$l);\n                       my $Cchromosome = $l[0];\n                       my $Cstart = $l[2];\n                       my $Cend = $l[3];\n                       my $Ctype = $l[1];\n\n                       ## check chromosome and type here\n                     if(($Ochromosome eq $Cchromosome) &amp;&amp; ($Otype eq $Ctype)){ ## what if there are two duplications on the same chromosome?\n                             ## check coordinates\n                             if(($Ostart &lt;= $Cend) &amp;&amp; ($Cstart &lt;= $Oend)){\n                                  ## overlap\n                              }else{\n                                  ## noOverlap\n                              }                                       \n                       }else{\n                         ## what if there is something found in one, but not in the other and they both have calls?\n                         ## ahhhh\n                                        }                               \n                                }\n                        }\n</code></pre>\n"}, {"tags": ["perl", "rabbitmq", "stomp"], "answers": [{"tags": [], "owner": {"reputation": 193, "user_id": 4033348, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/b2a10557f41f3fe8bbdf31b92c043ed9?s=128&d=identicon&r=PG&f=1", "display_name": "rjt_jr", "link": "https://stackoverflow.com/users/4033348/rjt-jr"}, "is_accepted": true, "score": 1, "last_activity_date": 1483652455, "creation_date": 1483652455, "answer_id": 41495190, "question_id": 41494037, "link": "https://stackoverflow.com/questions/41494037/subscribers-connecting-to-a-stomp-queue-dont-get-added-to-round-robin-distribut/41495190#41495190", "title": "Subscribers connecting to a STOMP queue don&#39;t get added to round-robin distribution", "body": "<p>On Rabbitmq's STOMP plugin the <code>activemq.prefetchSize</code> key shown in the <code>Net::Stomp</code> documentation does nothing. All I had to do was change it to <code>'prefetch-count'  =&gt; 1</code> and then it all worked as I expected.</p>\n"}], "owner": {"reputation": 193, "user_id": 4033348, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/b2a10557f41f3fe8bbdf31b92c043ed9?s=128&d=identicon&r=PG&f=1", "display_name": "rjt_jr", "link": "https://stackoverflow.com/users/4033348/rjt-jr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 99, "favorite_count": 0, "accepted_answer_id": 41495190, "answer_count": 1, "score": 0, "last_activity_date": 1483652455, "creation_date": 1483647870, "question_id": 41494037, "link": "https://stackoverflow.com/questions/41494037/subscribers-connecting-to-a-stomp-queue-dont-get-added-to-round-robin-distribut", "title": "Subscribers connecting to a STOMP queue don&#39;t get added to round-robin distribution", "body": "<p>I am using perl's <code>Net::Stomp</code> on top of RabbitMQ to rig up a very simple cross-platform distributed work queue. The idea is to submit a bunch of jobs to a single queue name and have a number of workers pull off jobs and execute them.</p>\n\n<p>If I start up \"workers\" and submit the frames/jobs to the queue, I get exactly what I expect: the workers pop the frames off the queue in a round-robin fashion.</p>\n\n<p>If I submit jobs to the persistent queue and then start up a number of workers, only the first pulls jobs off the queue.</p>\n\n<pre><code># submit.pl\nuse Net::Stomp;\nuse JSON::PP;\n\nmy $stomp = Net::Stomp-&gt;new( { hostname =&gt; 'localhost', port =&gt; '61613' } );\n\n$stomp-&gt;connect( { login =&gt; 'a', passcode =&gt; 'a' } ) or die;\n\nfor (my $i=0; $i &lt; 20; $i++) {\n    my $package = encode_json( { seed =&gt; $i } );\n    $stomp-&gt;send( { destination =&gt; '/queue/runs', body =&gt; $package } );\n}\n\n$stomp-&gt;disconnect;\n\n# worker.pl\nmy $stomp = Net::Stomp-&gt;new( { hostname =&gt; 'localhost', port =&gt; '61613' } );\n$stomp-&gt;connect( { login =&gt; 'a', passcode =&gt; 'a' } );\n$stomp-&gt;subscribe({\n        destination             =&gt; '/queue/runs',\n        ack                     =&gt; 'client',\n        'activemq.prefetchSize' =&gt; 1 });\n\n\nwhile (my $frame = $stomp-&gt;receive_frame) {\n    next unless defined $frame;\n    $stomp-&gt;ack( { frame =&gt; $frame } );\n    next unless $frame-&gt;body;\n    my $spec = decode_json $frame-&gt;body;\n    say $$ . \" \" . $spec-&gt;{seed};\n    sleep 1;\n}\n</code></pre>\n\n<p>Running this:</p>\n\n<pre><code>$ perl submit.pl &amp;&amp; perl worker.pl &amp; perl worker.pl\n</code></pre>\n\n<p>What I would expect to see is something like:</p>\n\n<pre><code>30026 0\n30024 1\n30026 2\n30024 3\n...\n</code></pre>\n\n<p>Instead I see only the first \"worker\" pulling frames off the queue. If I kill the first \"worker\" process, the second then begins pulling frames.</p>\n\n<pre><code>30024 0\n30024 1\n30024 2\n30024 3\n...\n</code></pre>\n\n<p>I would like it to be the case that immediately as workers subscribe to the queue they begin pulling frames in a round-robin fashion. I would rather not have to write explicit stuff to handle this. I assume there is some mechanism in the protocol already that I am overlooking, or perhaps a bug in <code>Net::Stomp</code>?</p>\n\n<p>As I said, the round-robin dispatch works perfectly if the workers are running before <code>submit.pl</code> is run.</p>\n"}, {"tags": ["perl", "debugging"], "comments": [{"owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 0, "creation_date": 1483646718, "post_id": 41492829, "comment_id": 70193474, "body": "Is DESTROY being called at the end of the script (global destruction phase)?"}, {"owner": {"reputation": 15304, "user_id": 4632019, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/8937eb40752cf51c7da61bd4a322a4ef?s=128&d=identicon&r=PG&f=1", "display_name": "Eugen Konkov", "link": "https://stackoverflow.com/users/4632019/eugen-konkov"}, "reply_to_user": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 0, "creation_date": 1483884371, "post_id": 41492829, "comment_id": 70272082, "body": "@mob I have found why <code>DESTROY</code> is called. See answer below"}], "answers": [{"comments": [{"owner": {"reputation": 15304, "user_id": 4632019, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/8937eb40752cf51c7da61bd4a322a4ef?s=128&d=identicon&r=PG&f=1", "display_name": "Eugen Konkov", "link": "https://stackoverflow.com/users/4632019/eugen-konkov"}, "edited": false, "score": 0, "creation_date": 1483647139, "post_id": 41493608, "comment_id": 70193714, "body": "I understand what is coming on from <code>Typical output</code> but your explanation is not clear"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1483647449, "post_id": 41493608, "comment_id": 70193857, "body": "@Engen Konkov, Explaining from the other direction, <code>&amp;$func(LIST)</code> is equivalent to <code>do { local @_; alias push @_, LIST; &amp;$func }</code>"}], "tags": [], "owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "is_accepted": true, "score": 5, "last_activity_date": 1483657453, "last_edit_date": 1483657453, "creation_date": 1483646127, "answer_id": 41493608, "question_id": 41492829, "link": "https://stackoverflow.com/questions/41492829/are-elements-of-reused-for-new-subroutine-call-or-new-is-created/41493608#41493608", "title": "Are elements of @_ reused for new subroutine call or new @_ is created?", "body": "<p>In a <code>&amp;func</code> call without an argument list, not only are the elements of <code>@_</code> reused, the whole <code>@_</code> is reused.</p>\n\n<pre><code>sub main {\n    print \"main: @_ is \", \\@_, \"\\n\";\n    func(@_);  # Values from @_ are copied into new @_. @_ after call: 1 2 3\n    &amp;func;     # Origin @_ is passed down.           So @_ after call: 2 3\n}\n\nsub func {\n    print \"func: @_ is \", \\@_, \"\\n\";\n    shift @_;  # Here @_ is modified. Pay attention what values @_ left after call\n}\n\nmain(1,2,3);  # @_ will be initialized by: 1 2 3\n</code></pre>\n\n<p>Typical output:</p>\n\n<pre><code>main: @_ is ARRAY(0xfc5958)\n@_ initial: 1 2 3\nfunc: @_ is ARRAY(0xfc5a00)\n@_ after func(): 1 2 3\nfunc: @_ is ARRAY(0xfc5958)\n@_ after &amp;func: 2 3\n</code></pre>\n\n<p>Going from <code>main</code> into the <code>&amp;func</code> call, <code>@_</code> is not localized, copied, or changed in any way. Altering <code>@_</code> inside <code>func</code> from a <code>&amp;func</code> call affects <code>@_</code> in the caller, but altering it from a <code>func()</code> call does not.</p>\n"}, {"tags": [], "owner": {"reputation": 15304, "user_id": 4632019, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/8937eb40752cf51c7da61bd4a322a4ef?s=128&d=identicon&r=PG&f=1", "display_name": "Eugen Konkov", "link": "https://stackoverflow.com/users/4632019/eugen-konkov"}, "is_accepted": false, "score": 2, "last_activity_date": 1483657574, "last_edit_date": 1483657574, "creation_date": 1483656494, "answer_id": 41496103, "question_id": 41492829, "link": "https://stackoverflow.com/questions/41492829/are-elements-of-reused-for-new-subroutine-call-or-new-is-created/41496103#41496103", "title": "Are elements of @_ reused for new subroutine call or new @_ is created?", "body": "<p>I have found why <code>DESTROY</code> is called while assigning:</p>\n\n<ol>\n<li>The old <code>@DB::context</code> items are destroyed</li>\n<li>Where first item is <code>ARRAYREF</code> to subroutine arguments <code>LIST</code></li>\n<li>When this item is destroyed there is no more links to arguments, they are destroyed</li>\n</ol>\n\n<p>Because of those links arguments are not destroyed when they should normally. Example:</p>\n\n<pre><code>{                                             #1\nmy $handle = DBI-&gt;connect(...);               #2\nsome_sub_call( 'arg', $handle, 1, 2, ... );   #3\n}                                             #4\nanother_call( a =&gt; 1 );                       #5\n</code></pre>\n\n<ol>\n<li>Here is some scope</li>\n<li><code>$handle</code> should be destroyed at the end of scope</li>\n<li>When <strong>this call is made under debugger</strong> the link to <code>@_</code> is stored at <code>@DB::context</code></li>\n<li>The end of scope. <code>$handle</code> is not destroyed because it still referred</li>\n<li>Another subroutine call. Old values of <code>@DB::context</code> are freed. So <code>$handle</code> destrucion is postponed until this</li>\n</ol>\n\n<p>So <code>@_</code> is not guilty. Thank you @mob for your explanation</p>\n"}], "owner": {"reputation": 15304, "user_id": 4632019, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/8937eb40752cf51c7da61bd4a322a4ef?s=128&d=identicon&r=PG&f=1", "display_name": "Eugen Konkov", "link": "https://stackoverflow.com/users/4632019/eugen-konkov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 117, "favorite_count": 0, "accepted_answer_id": 41493608, "answer_count": 2, "score": 8, "last_activity_date": 1483657574, "creation_date": 1483643399, "last_edit_date": 1483645250, "question_id": 41492829, "link": "https://stackoverflow.com/questions/41492829/are-elements-of-reused-for-new-subroutine-call-or-new-is-created", "title": "Are elements of @_ reused for new subroutine call or new @_ is created?", "body": "<p>I suppose it is depend on context.</p>\n\n<ol>\n<li>It is reused when <code>&amp;func</code> call is made</li>\n<li>It is created for all other calls</li>\n</ol>\n\n<p>I have <a href=\"https://github.com/KES777/Devel-DebugHooks/blob/develop/lib/Devel/DebugHooks.pm#L1004\" rel=\"nofollow noreferrer\">this code</a> where <strong>I got unexpected <code>eval</code> call</strong> at line 1004:</p>\n\n<pre><code>sub save_context {\n    @DB::context =  ( \\@_, (caller 2)[8..10], $@, $_ );  # line 1004\n    print_state \"\\nTRAPPED IN  \", \"\\n\\n\"   if _ddd;\n    DB::state( 'inDB', 1 );\n}\n</code></pre>\n\n<p>And this stacktrace:</p>\n\n<pre><code>DB /x/local/lib/perl5/Devel/DebugHooks.pm 1419 DB::orig_frames \nDB /x/local/lib/perl5/Devel/DebugHooks.pm 1460 DB::push_frame \nDB /x/local/lib/perl5/Devel/DebugHooks.pm 1004 DB::__ANON__[/x/local/lib/perl5/Devel/DebugHooks.pm:1460] \nDB /x/local/lib/perl5/Devel/DebugHooks.pm 1004 (eval) \nDB /x/local/lib/perl5/Devel/DebugHooks.pm 1251 DB::save_context \nDB /x/local/lib/perl5/Devel/DebugHooks.pm 1288 DB::DB_my 1\nMyApp::Controller::User /x/lib/MyApp/Controller/User.pm 41 DB::DB 1\nMojolicious /x/local/lib/perl5/Mojolicious.pm 133 MyApp::Controller::User::list \nMojolicious::Plugins /x/local/lib/perl5/Mojolicious/Plugins.pm 15 Mojolicious::__ANON__[/x/local/lib/perl5/Mojolicious.pm:133] \n...\n</code></pre>\n\n<p>From my log file I can see that <code>DBIx::Class::DESTROY</code> sub is called:</p>\n\n<pre><code>DB::sub  DB::state: l:1 d:0 s:5 t:0  /x/local/lib/perl5/Devel/DebugHooks.pm:1004  --&gt;  DBIx::Class::DESTROY\n</code></pre>\n\n<p><strong>Why object destruction is postponed?</strong> I suppose that is related to <code>@_</code> in some way</p>\n\n<p>Any suggestions appreciated about that what may trigger object destruction here</p>\n"}, {"tags": ["perl", "statistics", "pdl"], "comments": [{"owner": {"reputation": 1285, "user_id": 2805482, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/6e0b196a76577dc9ce97505c7cb6f387?s=128&d=identicon&r=PG&f=1", "display_name": "Explorer", "link": "https://stackoverflow.com/users/2805482/explorer"}, "edited": false, "score": 0, "creation_date": 1483642018, "post_id": 41492416, "comment_id": 70190710, "body": "Welcome to Stack Overflow! Please take the Tour <a href=\"http://stackoverflow.com/tour\">stackoverflow.com/tour</a> and read about the topics you actually can ask here <a href=\"http://stackoverflow.com/help/on-topic\">stackoverflow.com/help/on-topic</a>. You can also visit the meta site to learn how to ask questions on stack overflow <a href=\"http://meta.stackoverflow.com/\">meta.stackoverflow.com</a>"}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "reply_to_user": {"reputation": 1285, "user_id": 2805482, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/6e0b196a76577dc9ce97505c7cb6f387?s=128&d=identicon&r=PG&f=1", "display_name": "Explorer", "link": "https://stackoverflow.com/users/2805482/explorer"}, "edited": false, "score": 1, "creation_date": 1483642462, "post_id": 41492416, "comment_id": 70190979, "body": "@Novice The question is perfectly on-topic, although the OP could have explained it better. He&#39;s asking why the function <code>gsl_cdf_tdist_P</code> in the Perl module <a href=\"https://metacpan.org/pod/PDL::GSL::CDF#gsl_cdf_tdist_P\" rel=\"nofollow noreferrer\">PDL::GSL::CDF</a> (yes, it&#39;s a real module) is returning zero when the expected value is smaller than 1E-16. I&#39;m guessing the issue is that he&#39;s using <code>print</code>, which on many systems only keeps 15 digits of precision."}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 3, "creation_date": 1483642518, "post_id": 41492416, "comment_id": 70191009, "body": "@WoodyLin Can you please <a href=\"https://stackoverflow.com/posts/41492416/edit\">edit</a> your question to show the exact code you&#39;re using?"}, {"owner": {"reputation": 11, "user_id": 7380813, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1093d01b4cb869e4045aad4cbae3ac94?s=128&d=identicon&r=PG&f=1", "display_name": "Woody Lin", "link": "https://stackoverflow.com/users/7380813/woody-lin"}, "reply_to_user": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1483700445, "post_id": 41492416, "comment_id": 70213715, "body": "@ThisSuitIsBlackNot Yes, I think that the <code>print</code> function might be problmatic since <code>gsl_cdf_tdist_P</code> should return a double number. Is there a way to print all digits after decimal?"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1483720823, "post_id": 41492416, "comment_id": 70226148, "body": "In general you can use <code>sprintf</code> with <code>%.&lt;n&gt;f</code> where n is the number of decimals you want. But that&#39;s not exactly right all the time. <code>printf &#39;%.35f&#39;, 0.123456789012345678901234567890</code> gives <code>0.12345678901234567736988623209981597</code> on my machine."}, {"owner": {"reputation": 11, "user_id": 7380813, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1093d01b4cb869e4045aad4cbae3ac94?s=128&d=identicon&r=PG&f=1", "display_name": "Woody Lin", "link": "https://stackoverflow.com/users/7380813/woody-lin"}, "edited": false, "score": 0, "creation_date": 1483721709, "post_id": 41492416, "comment_id": 70226735, "body": "I tried <code>sprintf</code> with <code>%.4E</code>, but it gives me 0.0000E+00. I hope to output scientific format."}, {"owner": {"reputation": 11, "user_id": 7380813, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1093d01b4cb869e4045aad4cbae3ac94?s=128&d=identicon&r=PG&f=1", "display_name": "Woody Lin", "link": "https://stackoverflow.com/users/7380813/woody-lin"}, "edited": false, "score": 0, "creation_date": 1483722208, "post_id": 41492416, "comment_id": 70227088, "body": "I have also tried <code>printf</code> with <code>%.40f</code>, but it also gives me 0."}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1483742424, "post_id": 41492416, "comment_id": 70237030, "body": "It <a href=\"http://pdl.perl.org/PDLdocs/Core.html#pdl\" rel=\"nofollow noreferrer\">looks like</a> PDL uses double-precision floats, which only have a precision of 15-17 significant digits."}, {"owner": {"reputation": 11, "user_id": 7380813, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1093d01b4cb869e4045aad4cbae3ac94?s=128&d=identicon&r=PG&f=1", "display_name": "Woody Lin", "link": "https://stackoverflow.com/users/7380813/woody-lin"}, "edited": false, "score": 0, "creation_date": 1483757388, "post_id": 41492416, "comment_id": 70240913, "body": "PDL calls <code>gsl_cdf_tdist_P</code> from C. Is there an easy way to change it to double with more digits?"}, {"owner": {"reputation": 11, "user_id": 7380813, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1093d01b4cb869e4045aad4cbae3ac94?s=128&d=identicon&r=PG&f=1", "display_name": "Woody Lin", "link": "https://stackoverflow.com/users/7380813/woody-lin"}, "reply_to_user": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1483889800, "post_id": 41492416, "comment_id": 70273892, "body": "@ThisSuitIsBlackNot R (programing language) can return smaller than 16  digits after decimal. R is calling a C_pt function in C. Do you know which file name it is? Thanks."}, {"owner": {"reputation": 11, "user_id": 7380813, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1093d01b4cb869e4045aad4cbae3ac94?s=128&d=identicon&r=PG&f=1", "display_name": "Woody Lin", "link": "https://stackoverflow.com/users/7380813/woody-lin"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1483890519, "post_id": 41492416, "comment_id": 70274153, "body": "@simbabque I got the same results as yours. The problem is that <code>gsl_cdf_tdist_P</code> is using double-precision binary floating-point format. It seems only store up to 16 digits after decimal. Do you have any idea how to fix this?"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1483891322, "post_id": 41492416, "comment_id": 70274428, "body": "I don&#39;t I&#39;m afraid. If it only has 16 digits than you cannot display any more digits."}], "answers": [{"tags": [], "owner": {"reputation": 11, "user_id": 7380813, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1093d01b4cb869e4045aad4cbae3ac94?s=128&d=identicon&r=PG&f=1", "display_name": "Woody Lin", "link": "https://stackoverflow.com/users/7380813/woody-lin"}, "is_accepted": true, "score": 0, "last_activity_date": 1483988850, "creation_date": 1483988850, "answer_id": 41555158, "question_id": 41492416, "link": "https://stackoverflow.com/questions/41492416/about-gsl-cdf-tdist-p-from-pdlgslcdf-perl/41555158#41555158", "title": "About gsl_cdf_tdist_P from PDL::GSL::CDF (Perl)", "body": "<p>I found an easy solution for this problem. I used <code>gsl_cdf_tdist_Q</code> to get p-values. The p-values are not limited to 16 digits after decimal because they are not remapped p-values like <code>(1-gsl_cdf_tdist_P)</code>.</p>\n\n<p>Woody</p>\n"}], "owner": {"reputation": 11, "user_id": 7380813, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1093d01b4cb869e4045aad4cbae3ac94?s=128&d=identicon&r=PG&f=1", "display_name": "Woody Lin", "link": "https://stackoverflow.com/users/7380813/woody-lin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 130, "favorite_count": 1, "accepted_answer_id": 41555158, "answer_count": 1, "score": -2, "last_activity_date": 1483988850, "creation_date": 1483641952, "last_edit_date": 1483725098, "question_id": 41492416, "link": "https://stackoverflow.com/questions/41492416/about-gsl-cdf-tdist-p-from-pdlgslcdf-perl", "title": "About gsl_cdf_tdist_P from PDL::GSL::CDF (Perl)", "body": "<p>Could you please let me know how to get the full p-value from gsl_cdf_tdist_P function when p-value is smaller than 1E-16? I am getting 0 instead.</p>\n\n<p>Thanks,\nWoody</p>\n\n<pre><code>print \"t-test p-value = \" . ttest(\\@n,\\@t) . \"\\n\";\n\nsub ttest{\n\n    my ($n,$t) = @_;\n    my @n = @$n;\n    my @t = @$t;\n    my $nn = pdl(@n);\n    my $tt = pdl(@t);\n    my ($tstats, $df) = t_test( $nn, $tt );\n    use PDL::GSL::CDF; \n    my $p_2tail = 2 * (1 - gsl_cdf_tdist_P( $tstats-&gt;abs, $df ));\n    return $p_2tail;\n}\n</code></pre>\n\n<p>My input values as follows:</p>\n\n<pre><code>my @n = qw (1 2 4 2 3 1 2 4 2 1 2 4 2 3 1 2 4 2 1 2 4 2 3 1 2 4 2);\nmy @t = qw (11 12 13 12 13 11 14 11 12 13 12 13 11 14 11 12 13 12 13 11 14);\n</code></pre>\n"}, {"tags": ["linux", "perl", "tk"], "answers": [{"comments": [{"owner": {"reputation": 6728, "user_id": 2156952, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/3mMoE.gif?s=128&g=1", "display_name": "TrueY", "link": "https://stackoverflow.com/users/2156952/truey"}, "edited": false, "score": 0, "creation_date": 1483658077, "post_id": 41491871, "comment_id": 70198938, "body": "Thanks! Actually this is similar what happens in Tk::ExecuteCommand."}, {"owner": {"reputation": 6728, "user_id": 2156952, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/3mMoE.gif?s=128&g=1", "display_name": "TrueY", "link": "https://stackoverflow.com/users/2156952/truey"}, "edited": false, "score": 0, "creation_date": 1484051609, "post_id": 41491871, "comment_id": 70341870, "body": "You gave a great idea to remove waitVariable! IMHO Coro is a bit of overkill to use here as the parallel run can be handled by open (or better IPC::Open3) and fileevent. Thanks for it! Parenthesis added! :)"}], "tags": [], "owner": {"reputation": 19969, "user_id": 23512, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/tUj1I.png?s=128&g=1", "display_name": "Tanktalus", "link": "https://stackoverflow.com/users/23512/tanktalus"}, "is_accepted": false, "score": 2, "last_activity_date": 1483639848, "creation_date": 1483639848, "answer_id": 41491871, "question_id": 41491554, "link": "https://stackoverflow.com/questions/41491554/why-are-waitvariable-calls-not-independent-even-if-different-variable-ref-is-use/41491871#41491871", "title": "Why are waitVariable calls not independent even if different variable ref is used?", "body": "<p>You should not be waiting in an event loop.  What is happening is that you're producing a callstack that involves being inside the previous wait loop.  For example, if you add <code>use Carp;</code> at the top, and then change your <code>pr</code> function like this:</p>\n\n<pre><code>sub pr { # Write into ROText widget\n  $text-&gt;insert('end', Carp::longmess(join '', @_)); $text-&gt;yview('end');\n}\n</code></pre>\n\n<p>then you'll see the <code>waitVariable</code> showing up - we can't get back there until we're back in that loop, and you're ending up with loops inside of loops.</p>\n\n<p>To do what you want to do without inverting everything into events, you may want to try <a href=\"https://metacpan.org/pod/Coro\" rel=\"nofollow noreferrer\">Coro</a> which can invert the events like this.</p>\n\n<p>Also, in modern perls, <code>qw</code> does not imply parenthesis, so your <code>pack</code> calls need parenthesis around the <code>qw/.../</code> lists.</p>\n"}, {"comments": [{"owner": {"reputation": 6728, "user_id": 2156952, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/3mMoE.gif?s=128&g=1", "display_name": "TrueY", "link": "https://stackoverflow.com/users/2156952/truey"}, "edited": false, "score": 0, "creation_date": 1483657920, "post_id": 41491878, "comment_id": 70198885, "body": "Great! Thanks! Do you know a way to implement waitVariable which works independently? I tried to implement using polling, but it seems $widget-&gt;after(ms) also cannot handle two timers independently."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 6728, "user_id": 2156952, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/3mMoE.gif?s=128&g=1", "display_name": "TrueY", "link": "https://stackoverflow.com/users/2156952/truey"}, "edited": false, "score": 0, "creation_date": 1483658003, "post_id": 41491878, "comment_id": 70198909, "body": "Sorry. Would have added of I did."}, {"owner": {"reputation": 6728, "user_id": 2156952, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/3mMoE.gif?s=128&g=1", "display_name": "TrueY", "link": "https://stackoverflow.com/users/2156952/truey"}, "edited": false, "score": 0, "creation_date": 1484051305, "post_id": 41491878, "comment_id": 70341645, "body": "Finally I found the cited text in a Tk documentation, not in Perl/Tk. I decided to drop the usage of waitVariable and not callbacks are used instead... Thanks! Great help!"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 6728, "user_id": 2156952, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/3mMoE.gif?s=128&g=1", "display_name": "TrueY", "link": "https://stackoverflow.com/users/2156952/truey"}, "edited": false, "score": 0, "creation_date": 1484063440, "post_id": 41491878, "comment_id": 70350287, "body": "You are mistaken. This is clearly the documentation for the method of Perl class <a href=\"http://search.cpan.org/perldoc?Tk::Widget\" rel=\"nofollow noreferrer\">Tk::Widget</a> you are using (<code>$widget-&gt;waitVariable(\\$name)</code>)."}, {"owner": {"reputation": 6728, "user_id": 2156952, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/3mMoE.gif?s=128&g=1", "display_name": "TrueY", "link": "https://stackoverflow.com/users/2156952/truey"}, "edited": false, "score": 0, "creation_date": 1484227878, "post_id": 41491878, "comment_id": 70430124, "body": "Oops! You are absolutely right! Near the end of that doc! Sorry, I was distrait! Thanks!"}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 3, "last_activity_date": 1483639874, "creation_date": 1483639874, "answer_id": 41491878, "question_id": 41491554, "link": "https://stackoverflow.com/questions/41491554/why-are-waitvariable-calls-not-independent-even-if-different-variable-ref-is-use/41491878#41491878", "title": "Why are waitVariable calls not independent even if different variable ref is used?", "body": "<blockquote>\n  <p>$widget->waitVariable(\\$name)</p>\n  \n  <p>$widget->waitVisibility</p>\n  \n  <p>$widget->waitWindow</p>\n  \n  <p>The tk wait methods wait for one of several things to happen, then it returns without taking any other actions. The return value is always an empty string. waitVariable expects a reference to a perl variable and the command waits for that variable to be modified. This form is typically used to wait for a user to finish interacting with a dialog which sets the variable as part (possibly final) part of the interaction. waitVisibility waits for a change in $widget's visibility state (as indicated by the arrival of a VisibilityNotify event). This form is typically used to wait for a newly-created window to appear on the screen before taking some action. waitWindow waits for $widget to be destroyed. This form is typically used to wait for a user to finish interacting with a dialog box before using the result of that interaction. Note that creating and destroying the window each time a dialog is required makes code modular but imposes overhead which can be avoided by withdrawing the window instead and using waitVisibility.</p>\n  \n  <p>While the tk wait methods are waiting they processes events in the normal fashion, so the application will continue to respond to user interactions. <strong>If an event handler invokes tkwait again, the nested call to tkwait must complete before the outer call can complete.</strong></p>\n</blockquote>\n\n<p>Emphasis mine.</p>\n"}], "owner": {"reputation": 6728, "user_id": 2156952, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/3mMoE.gif?s=128&g=1", "display_name": "TrueY", "link": "https://stackoverflow.com/users/2156952/truey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 126, "favorite_count": 0, "accepted_answer_id": 41491878, "answer_count": 2, "score": 5, "last_activity_date": 1484051399, "creation_date": 1483638644, "last_edit_date": 1484051399, "question_id": 41491554, "link": "https://stackoverflow.com/questions/41491554/why-are-waitvariable-calls-not-independent-even-if-different-variable-ref-is-use", "title": "Why are waitVariable calls not independent even if different variable ref is used?", "body": "<p>I'm new to Tk and I'd like to know whether the issue in question is a normal Tk behavior or not.</p>\n\n<p>In short: I have a Perl/Tk (Tk version 804.028) script which uses two Tk::ExecuteCommand (v1.6) widgets. Such objects have an execute_command method which uses the defined fileevent callback to read the executed command's stdout and returns after it is finished. It is solved with the usage of waitVariable. But it seems if two ExecuteCommand started together they returns only when the slower returns. I may expect that the faster returns immediately, when finished.</p>\n\n<p>I made a small test Perl/Tk script to demonstrate the problem:</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\nuse Tk;\nuse Tk::ROText;\n\nmy $MAIN = new MainWindow -title =&gt; \"TEST\";\nmy $text = $MAIN-&gt;Scrolled('ROText')-&gt;pack(qw/-expand 1 -fill both/);\n\nsub pr { # Write into ROText widget\n  $text-&gt;insert('end', join '', @_); $text-&gt;yview('end');\n}\npr \"Tk version \", Tk-&gt;VERSION, \"\\n\";\n\nmy @v = (100, 200);\nsub doo { # Button callback\n  my ($rv, $txt) = @_;\n  pr \"B4 wait: $txt, ref=$rv, val=\", $$rv, \"\\n\";\n  $MAIN-&gt;waitVariable($rv);\n  pr \"Aft wait: $txt, ref=$rv, val=\", $$rv, \"\\n\";\n}\n\n$MAIN-&gt;Button(-text =&gt; 'Do 0', -command =&gt; [\\&amp;doo, \\$v[0], \"Do 0\" ]\n    )-&gt;pack(qw/-expand 1 -side left -fill both/);\n$MAIN-&gt;Button(-text =&gt; 'Stop 0', -command =&gt; [sub {++$v[0]; pr \"Stop 0\\n\";} ]\n    )-&gt;pack(qw/-expand 1 -side left -fill both/);\n$MAIN-&gt;Button(-text =&gt; 'Do 1', -command =&gt; [\\&amp;doo, \\$v[1], \"Do 1\" ]\n    )-&gt;pack(qw/-expand 1 -side left -fill both/);\n$MAIN-&gt;Button(-text =&gt; 'Stop 1', -command =&gt; [sub {++$v[1]; pr \"Stop 1\\n\";} ]\n    )-&gt;pack(qw/-expand 1 -side left -fill both/);\n\nMainLoop();\n</code></pre>\n\n<p>This draws an ROText widget and 4 Buttons ([Do 0][Stop 0][Do 1][Stop 1]) (see attached picture). Clicking on a Do button, calls the function <code>doo</code>, which waits until the assigned scalar has changed. The variables are changed when a Stop button is pressed.</p>\n\n<p>If the buttons are pressed in the [Do 0][Stop 0][Do 1][Stop 1] order the output seems to be ok (see lines 2-7). But if the \"tasks\" started in parallel then both callback finishes only if both are stopped. So pressing the Buttons in [Do 0][Do 1][Stop 0][Stop 1] (see lines 8-13) gives a weird result (see picture).</p>\n\n<p><a href=\"https://i.stack.imgur.com/eeJKw.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/eeJKw.png\" alt=\"enter image description here\"></a></p>\n\n<p>My expectation for the second test was that the first callback function returns immediately after pressing the first Stop Button. So I think output should be:  </p>\n\n<pre><code>B4 wait: Do 0, ref=SCALAR(0x9970560), val=101\nB4 wait: Do 1, ref=SCALAR(0x9970bfc), val=201\nStop 0\nAft wait: Do 0, ref=SCALAR(0x9970560), val=102\nStop 1\nAft wait: Do 1, ref=SCALAR(0x9970bfc), val=202\n</code></pre>\n\n<p>It runs on a Linux machine.</p>\n\n<p>Am I missing something? Thanks in advance!</p>\n\n<p><strong>UPDATE</strong></p>\n\n<p>To bypass this waitVariable issue I rewrote this widget to use callbacks instead (thanks to Tantalus!). Now execute_command returns immediately. There are two callbacks, one for Cancel, one for Finish. Now the caller is informed through these callbacks. Anyway I read somewhere (I cannot find the source now) that waiting in a callback for long is not a good idea in Tk. The new solution is compliant with this.</p>\n\n<p>Thank for your help!</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 2, "creation_date": 1483640353, "post_id": 41491451, "comment_id": 70189785, "body": "Better: <code>warn(&quot;Can&#39;t open \\&quot;$path\\&quot;: $!\\n&quot;);</code>"}], "answers": [{"tags": [], "owner": {"reputation": 1863, "user_id": 807131, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/6d81bbaf822883b608a42ac5fdb95350?s=128&d=identicon&r=PG", "display_name": "ddoxey", "link": "https://stackoverflow.com/users/807131/ddoxey"}, "is_accepted": false, "score": -1, "last_activity_date": 1483668970, "creation_date": 1483668970, "answer_id": 41497899, "question_id": 41491451, "link": "https://stackoverflow.com/questions/41491451/whats-the-best-way-to-check-the-result-of-calling-the-perl-open-function/41497899#41497899", "title": "What&#39;s the best way to check the result of calling the Perl open function?", "body": "<p>A better way to use the open function in Perl is to follow a pattern like this.</p>\n\n<pre><code>open my $fh, \"&gt;\", $path\n    or die \"failed to open $path: $!\"\n</code></pre>\n\n<p>In this way, you get a fatal error with a descriptive message provided by the OS error variable $!.</p>\n"}], "owner": {"reputation": 19, "user_id": 7380520, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d7736f637ad977863b108bb7c179d191?s=128&d=identicon&r=PG&f=1", "display_name": "Nabil Karroumi", "link": "https://stackoverflow.com/users/7380520/nabil-karroumi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 72, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1483673994, "creation_date": 1483638248, "last_edit_date": 1483673994, "question_id": 41491451, "link": "https://stackoverflow.com/questions/41491451/whats-the-best-way-to-check-the-result-of-calling-the-perl-open-function", "title": "What&#39;s the best way to check the result of calling the Perl open function?", "body": "<p>I have code in perl that runs the following: </p>\n\n<pre><code>sub runMyCommand{\n  my $filename =\"testing.txt\"\n  foreach my $arg (@_) {\n    my $path = catfile($arg, $filename);\n    if(open my $fh, \"&gt;\" , $path){\n      print $fh \"my path is :\\$pah\\n\"\n      close $fh;\n    }else{\n      ....\n    }\n  }\n} \n\nrunMyCommand(\"/opt/\");\n</code></pre>\n\n<p>for some reason this keeps going to the else part all the time. Even though I can go to /opt/ and write a file. Is there something wrong with the way I am using open?</p>\n\n<p>thank you,</p>\n"}, {"tags": ["regex", "perl"], "answers": [{"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 7, "last_activity_date": 1483629149, "last_edit_date": 1483629149, "creation_date": 1483628847, "answer_id": 41488291, "question_id": 41488220, "link": "https://stackoverflow.com/questions/41488220/how-to-cut-out-a-specific-substring/41488291#41488291", "title": "How to cut out a specific substring?", "body": "<pre><code>      _____________ Matches 0 chars at position 0 (\"\").\n     /       ______ Matches 0 chars at position 0 (\"\").\n    /       / _____ Matches 13 chars at position 0 (\"foo bar //baz\").\n  _/  _____/ /\n / \\ /     \\/\\\n(.*?)(\\/\\/)*.*\n</code></pre>\n\n<p>What you want:</p>\n\n<pre><code>( my $new_string = $string ) =~ s{//.*}{};\n\nmy $new_string = $string =~ s{//.*}{}r;            # 5.14+\n</code></pre>\n"}], "owner": {"reputation": 103, "user_id": 4855265, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/479d1117f049f31895aaef75c8baf5b1?s=128&d=identicon&r=PG&f=1", "display_name": "maikelmeyers", "link": "https://stackoverflow.com/users/4855265/maikelmeyers"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 72, "favorite_count": 0, "accepted_answer_id": 41488291, "answer_count": 1, "score": -4, "last_activity_date": 1483629149, "creation_date": 1483628604, "last_edit_date": 1483629032, "question_id": 41488220, "link": "https://stackoverflow.com/questions/41488220/how-to-cut-out-a-specific-substring", "title": "How to cut out a specific substring?", "body": "<p>I wonder if it is possible to cut a substring from a string if this substring's occurency can be zero or more times using a perl regex?</p>\n\n<p>So for example:</p>\n\n<p><code>\"foo bar //baz\"</code> and <code>\"foo bar\"</code> should both result into <code>\"foo bar\"</code>, cutting out everything behind a double slash, if it's there.</p>\n\n<p>I know this could be easily achieved using other methods, but I'm interested if a regex oneliner is possible for that.</p>\n\n<p>I tried <code>($new_string) = ($string =~ /(.*?)(\\/\\/)*.*/)</code>\nBut that does not work.</p>\n"}, {"tags": ["perl", "mojolicious"], "answers": [{"comments": [{"owner": {"reputation": 15304, "user_id": 4632019, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/8937eb40752cf51c7da61bd4a322a4ef?s=128&d=identicon&r=PG&f=1", "display_name": "Eugen Konkov", "link": "https://stackoverflow.com/users/4632019/eugen-konkov"}, "edited": false, "score": 0, "creation_date": 1483628086, "post_id": 41488008, "comment_id": 70181367, "body": "What about <code>any</code> with <code>partial</code> match? prons/cons"}, {"owner": {"reputation": 2064, "user_id": 3606329, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/027b912750dbb94c9c1ff89c9eb20f46?s=128&d=identicon&r=PG&f=1", "display_name": "user3606329", "link": "https://stackoverflow.com/users/3606329/user3606329"}, "reply_to_user": {"reputation": 15304, "user_id": 4632019, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/8937eb40752cf51c7da61bd4a322a4ef?s=128&d=identicon&r=PG&f=1", "display_name": "Eugen Konkov", "link": "https://stackoverflow.com/users/4632019/eugen-konkov"}, "edited": false, "score": 0, "creation_date": 1483630599, "post_id": 41488008, "comment_id": 70183145, "body": "&#39;any&#39; can take HTTP methods to match while under cannot.  $r-&gt;any([&#39;GET&#39;, &#39;POST&#39;]). What&#39;s your API doing when I send a HTTP request with DELETE? Are the same resources returned when accessed with POST? That&#39;s a bad API design."}], "tags": [], "owner": {"reputation": 2064, "user_id": 3606329, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/027b912750dbb94c9c1ff89c9eb20f46?s=128&d=identicon&r=PG&f=1", "display_name": "user3606329", "link": "https://stackoverflow.com/users/3606329/user3606329"}, "is_accepted": false, "score": -1, "last_activity_date": 1483627984, "creation_date": 1483627984, "answer_id": 41488008, "question_id": 41486686, "link": "https://stackoverflow.com/questions/41486686/what-is-the-difference-between-two-routes-in-mojolicious/41488008#41488008", "title": "What is the difference between two routes in Mojolicious?", "body": "<p>The <code>under</code> is called before anything else. You can place authentication code inside it.</p>\n\n<pre><code>use strict;\nuse warnings;\nuse Mojolicious::Lite;\n\nunder sub {\n    my $self = shift;\n    my $api_key = $self-&gt;req-&gt;url-&gt;to_abs-&gt;username;\n    my $api_secret = $self-&gt;req-&gt;url-&gt;to_abs-&gt;password;\n\n    if($api_key ne \"Admin\" &amp;&amp; $api_secret ne \"Password123\") {\n        $self-&gt;res-&gt;headers-&gt;www_authenticate('Basic');\n        $self-&gt;render(text =&gt; 'Error: API-Credentials are wrong', status =&gt; 401);\n        # No routes will be executed\n        return undef;\n    }\n\n    # Authentication with success, execute other routes\n    return 1;\n}\n\n# Only executed if the url is http://Admin:Password123@127.0.0.1:3000\nany '/' =&gt; sub  { \n    my $self = shift; \n    my $date = Mojo::Date-&gt;new; \n    $self-&gt;render(text =&gt; $date, status =&gt; 200);\n}; \n</code></pre>\n\n<p>It's very important that you have to place under above the routines you want to protect.</p>\n"}], "owner": {"reputation": 15304, "user_id": 4632019, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/8937eb40752cf51c7da61bd4a322a4ef?s=128&d=identicon&r=PG&f=1", "display_name": "Eugen Konkov", "link": "https://stackoverflow.com/users/4632019/eugen-konkov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 96, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1484479682, "creation_date": 1483623910, "last_edit_date": 1484479682, "question_id": 41486686, "link": "https://stackoverflow.com/questions/41486686/what-is-the-difference-between-two-routes-in-mojolicious", "title": "What is the difference between two routes in Mojolicious?", "body": "<p>I just create two routes:</p>\n\n<pre><code>$r-&gt;any  ( '/api/v:api', [ api =&gt; qr/\\d+/ ], { api =&gt; 1 } )-&gt;partial( 1 );\n$r-&gt;under( '/api/v:api', [ api =&gt; qr/\\d+/ ], { api =&gt; 1 } );\n</code></pre>\n\n<p>It seems both work same.</p>\n\n<p>What is the difference under hood between them?</p>\n\n<p><strong>UPD</strong><br>\nI have noticed that for first case (<code>-&gt;any</code>) link to static files are moved to <code>/api/v1</code>. This is noticeable when exception happen. <code>mojo/debug</code> template tries to load static files from <code>/api/v1/...</code> path and not <code>/...</code>. <strong>Why?</strong></p>\n"}, {"tags": ["javascript", "ajax", "perl"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1483619115, "post_id": 41484664, "comment_id": 70174861, "body": "Please show more of your Perl code. Specifically if there are any other <code>print</code> statements above the ones you&#39;ve shown."}, {"owner": {"reputation": 793701, "user_id": 19068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d2d3229ed1961d2bd81853242493247?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/19068/quentin"}, "edited": false, "score": 1, "creation_date": 1483620630, "post_id": 41484664, "comment_id": 70175958, "body": "If the status is <code>0</code> then there is usually a useful error message displayed on the Console in the browser&#39;s Developer Tools. You need to look there."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1483620831, "post_id": 41484664, "comment_id": 70176103, "body": "Your Perl code looks fine. There is nothing wrong with it. Look at the request in your Developer Tools too. It might be that your <code>POST</code> request is not actually submitting a form, but that the JS object  in <code>data</code> is serialized to JSON and submitted as the body of the request instead of converted to formdata. If that&#39;s the case, CGI.pm cannot read it and <code>$q-&gt;param(&#39;number&#39;)</code> will be false, thus your program will never print anything and just exit. If there&#39;s no output, you can&#39;t see anything."}, {"owner": {"reputation": 793701, "user_id": 19068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d2d3229ed1961d2bd81853242493247?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/19068/quentin"}, "edited": false, "score": 0, "creation_date": 1483620831, "post_id": 41484664, "comment_id": 70176104, "body": "Is that HTML code enough to constitute a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>? If there was a <code>&lt;form&gt;</code> element then that would make a significant difference."}, {"owner": {"reputation": 793701, "user_id": 19068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d2d3229ed1961d2bd81853242493247?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/19068/quentin"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1483620874, "post_id": 41484664, "comment_id": 70176134, "body": "@simbabque \u2014 <code>data</code> doesn&#39;t have a JSON data structure. Just a regular JS one. jQuery will serialize it using the normal form data encoding."}, {"owner": {"reputation": 3, "user_id": 7378877, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-mVo1wMPqlzc/AAAAAAAAAAI/AAAAAAAAAAs/kJ8CAE38vMc/photo.jpg?sz=128", "display_name": "twangsta", "link": "https://stackoverflow.com/users/7378877/twangsta"}, "edited": false, "score": 0, "creation_date": 1483628429, "post_id": 41484664, "comment_id": 70181621, "body": "I&#39;ve tried it with and without the a form, same result, statusText = &#39;error&#39;, status = 0.   The CGI script is getting the data from the web client, to be sure I just tested the same instance of the CGI script with an Android client running native code, it worked perfectly including able to read the response.  The web client can send the data correctly, the CGI can process that data just fine, seems to be sending it back alright too as I&#39;m able to view the return JSON object populated in the android client.   I&#39;ll post the complete HTML code here."}, {"owner": {"reputation": 3, "user_id": 7378877, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-mVo1wMPqlzc/AAAAAAAAAAI/AAAAAAAAAAs/kJ8CAE38vMc/photo.jpg?sz=128", "display_name": "twangsta", "link": "https://stackoverflow.com/users/7378877/twangsta"}, "edited": false, "score": 0, "creation_date": 1483629694, "post_id": 41484664, "comment_id": 70182496, "body": "I&#39;m running this CGI code on an apache EC2 instance I set up, could there be some issue with the server setup? Running multiple vhosts, with a single common cgi-bin directory. This HTML code is hosted within one of the vhosts."}], "answers": [{"tags": [], "owner": {"reputation": 793701, "user_id": 19068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d2d3229ed1961d2bd81853242493247?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/19068/quentin"}, "is_accepted": true, "score": 0, "last_activity_date": 1483634971, "last_edit_date": 1483634971, "creation_date": 1483634634, "answer_id": 41490278, "question_id": 41484664, "link": "https://stackoverflow.com/questions/41484664/getting-status-code-0-in-ajax-call-to-cross-site-perl-cgi-function/41490278#41490278", "title": "Getting status code 0 in ajax call to cross site Perl CGI function", "body": "<p>You run the JavaScript function when a submit button in a form is clicked.</p>\n\n<p>This:</p>\n\n<ol>\n<li>Sends the Ajax request</li>\n<li>Unloads the current page</li>\n<li>Submits the form</li>\n<li>Loads a new page</li>\n</ol>\n\n<hr>\n\n<h1>Quick hack</h1>\n\n<p>Use <code>type=\"button\"</code> for your button element so it is not a submit button</p>\n\n<h1>Proper solution</h1>\n\n<ol>\n<li>Set <code>&lt;form action=\"/cgi-bin/simple.cgi\"</code> so the form submits the correct place</li>\n<li>Add <code>name=\"number\"</code> to the input so it is included in the regular form data</li>\n<li>Add a means to distinguish between a form submission and an Ajax request such as a hidden input</li>\n<li>Update the script so if it gets the form submission it renders an appropriate HTML document instead of JSON</li>\n<li>Remove the <code>onclick</code> attribute and bind a proper event handler with JavaScript (which prevents the default behaviour of the form submission if JS successfully runs)</li>\n</ol>\n\n<p>Such:</p>\n\n<pre><code>function test_number(event) {\n    event.preventDefault();\n    $.ajax({\n        type: 'POST',\n        dataType: 'json',\n        url: '/cgi-bin/simple.cgi',\n        data: {\n            'number': $('#number').val()\n        },\n        success: function(data, textStatus) {\n            alert('request successful');\n        },\n        error: function(jqXHR, exception) {\n            msg = 'Request Status: ' + jqXHR.status + ' Status Text: ' + jqXHR.statusText + ' ' + jqXHR.responseText;\n            alert(msg);\n        }\n    });\n}\n\ndocument.querySelector(\"form\").addEventListener(\"submit\", test_number);\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 7378877, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-mVo1wMPqlzc/AAAAAAAAAAI/AAAAAAAAAAs/kJ8CAE38vMc/photo.jpg?sz=128", "display_name": "twangsta", "link": "https://stackoverflow.com/users/7378877/twangsta"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 96, "favorite_count": 0, "accepted_answer_id": 41490278, "answer_count": 1, "score": 0, "last_activity_date": 1483634971, "creation_date": 1483617916, "last_edit_date": 1483629127, "question_id": 41484664, "link": "https://stackoverflow.com/questions/41484664/getting-status-code-0-in-ajax-call-to-cross-site-perl-cgi-function", "title": "Getting status code 0 in ajax call to cross site Perl CGI function", "body": "<p>The Perl CGI script is being called; I can see the debug logs getting getting the parameters and executing.</p>\n\n<p>The issue is returning the results, the status code is always 0, with responseText empty.</p>\n\n<p>Have tried various header options etc, with no luck, any help would be much appreciated.</p>\n\n<p><em>Perl CGI handler</em></p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\n\nuse CGI;\nuse JSON;\nuse Data::Dumper qw( Dumper );\n\nmy $q = new CGI;\nmy %data;\n\nopen my $FH, '&gt;', 'outfile';\n\nif ( my $number = $q-&gt;param('number') ){\n    if ( $number =~ /^\\d+$/ ) {\n            $data{result} = $number % 2 ? 'odd' : 'even';\n    } else {\n            $data{result} = 'Not a number';\n    }\n\n    my $jret = to_json(\\%data);\n    print $FH Dumper($jret);\n    close $FH;\n\n    print $q-&gt;header('application/json');\n    print to_json(\\%data);\n}\n</code></pre>\n\n<p><em>HTML code</em></p>\n\n<pre><code>&lt;!DOCTYPE html&gt;\n&lt;html&gt;\n&lt;head&gt;\n&lt;title&gt;[% title %]&lt;/title&gt;\n&lt;meta charset='utf-8'&gt;\n    &lt;script src=\"https://ajax.googleapis.com/ajax/libs/jquery/3.1.0/jquery.min.js\"&gt;      &lt;/script&gt;\n    &lt;/script&gt;\n&lt;/head&gt;\n\n&lt;body&gt;\n    &lt;div id='result'&gt;&lt;/div&gt;Enter number:\n    &lt;form&gt;\n    &lt;input type='text' id='number'&gt; \n    &lt;button onclick='test_number();'&gt;Test&lt;/button&gt;\n\n    &lt;script&gt;\n        function test_number()\n        {\n            $.ajax({\n                    type: 'POST',\n                    dataType: 'json',\n                    url: '/cgi-bin/simple.cgi',\n                    data: {\n                            'number': $('#number').val()\n                    },\n                    success: function(data, textStatus ){\n                       alert('request successful');\n                    },\n                    error: function(jqXHR, exception) {\n                        msg =  'Request Status: ' + jqXHR.status + ' Status Text: ' + jqXHR.statusText + ' ' + jqXHR.responseText;\n                        alert(msg);\n                    }\n            });\n            return false;\n        }\n    &lt;/script&gt;\n    &lt;/form&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n"}, {"tags": ["linux", "perl", "oop"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1483615274, "post_id": 41483562, "comment_id": 70172234, "body": "This ist he perfect time for you to learn about <a href=\"http://p3rl.org/Moose\" rel=\"nofollow noreferrer\">Moose</a>. Check out <a href=\"https://www.youtube.com/watch?v=LKXvG6VKew4\" rel=\"nofollow noreferrer\">this talk by RJBS</a> that explains the basics in detail."}, {"owner": {"reputation": 42833, "user_id": 18914, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7a20a39ae2ef47ae042a3eddd5b5bd19?s=128&d=identicon&r=PG", "display_name": "Dave Sherohman", "link": "https://stackoverflow.com/users/18914/dave-sherohman"}, "edited": false, "score": 6, "creation_date": 1483615628, "post_id": 41483562, "comment_id": 70172476, "body": "Side note that neither answer mentions: <code>new MyModule</code> is called <i>indirect object notation</i> and is generally considered bad practice in Perl because it can confuse the parser and cause  non-obvious problems. I would recommend getting into the habit of saying <code>MyModule-&gt;new</code> instead."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 3, "creation_date": 1483617097, "post_id": 41483562, "comment_id": 70173497, "body": "@simbabque: I think it&#39;s essential to learn the mechanisms behind Perl&#39;s object-oriented support before they are lost behind the screen of <code>Moose</code> and its derivatives. I continue to achieve far better results using Perl to teach OO instead of something like Java or C++, simply because the concepts are so open and clear."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 2, "creation_date": 1483617233, "post_id": 41483562, "comment_id": 70173579, "body": "@Borodin I agree. But it&#39;s still a pain to write it, and Moose is beautiful. Just wanted to mention it, because in the long run it is the right choice for day to day stuff."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1483618804, "post_id": 41483562, "comment_id": 70174625, "body": "@simbabque: Yes, it would be ideal for the OP doing &quot;day-to-day stuff&quot;. But at present they unclear about ideas like <code>bless</code>, and there is no day-to-day work. Learning about <code>Moose</code>, or preferably its minor variants, should build on top of a thorough understanding of Perl, and I strongly disagree that <i>&quot;This ist he perfect time for you to learn about Moose&quot;</i>."}], "answers": [{"comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1483615066, "post_id": 41483664, "comment_id": 70172098, "body": "You beat me. :) The moon hat fits really well with your picture btw."}, {"owner": {"reputation": 1159, "user_id": 3302647, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/784a183178e06cdacc78678f3779cf7d?s=128&d=identicon&r=PG&f=1", "display_name": "shafeeq", "link": "https://stackoverflow.com/users/3302647/shafeeq"}, "edited": false, "score": 0, "creation_date": 1483615270, "post_id": 41483664, "comment_id": 70172232, "body": "Can you give me an idea about bless?"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1483615375, "post_id": 41483664, "comment_id": 70172304, "body": "If the <a href=\"http://perldoc.perl.org/functions/bless.html\" rel=\"nofollow noreferrer\">perldoc</a> is unclear, that&#39;s probably worth a separate question - because <code>bless</code> is pretty fundamental to perl-oo - it &#39;sets&#39; a class for a data structure."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 1159, "user_id": 3302647, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/784a183178e06cdacc78678f3779cf7d?s=128&d=identicon&r=PG&f=1", "display_name": "shafeeq", "link": "https://stackoverflow.com/users/3302647/shafeeq"}, "edited": false, "score": 1, "creation_date": 1483622085, "post_id": 41483664, "comment_id": 70177067, "body": "@shafeeq, It&#39;s how you construct an object. It associates a value with a class."}], "tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": true, "score": 5, "last_activity_date": 1483615033, "creation_date": 1483615033, "answer_id": 41483664, "question_id": 41483562, "link": "https://stackoverflow.com/questions/41483562/cant-locate-object-method-say-hello-via-package-1/41483664#41483664", "title": "Can&#39;t locate object method &quot;say_hello&quot; via package &quot;1&quot;", "body": "<p>You're not creating a new object, and thus <code>$myObj</code> is just the return code of the \"print\" statement (or 1). </p>\n\n<p>You need to <code>bless</code>  something and return it. </p>\n\n<pre><code>sub new { \n   my ( $class ) = @_;\n   print \"Calling Constructor\\n\";\n   my $self = {};\n   bless $self, $class;\n   return $self;\n }\n</code></pre>\n\n<p>That way <code>$myObj</code> will actually be an object, not just a return code :)</p>\n"}, {"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 8, "last_activity_date": 1483615977, "last_edit_date": 1483615977, "creation_date": 1483615190, "answer_id": 41483726, "question_id": 41483562, "link": "https://stackoverflow.com/questions/41483562/cant-locate-object-method-say-hello-via-package-1/41483726#41483726", "title": "Can&#39;t locate object method &quot;say_hello&quot; via package &quot;1&quot;", "body": "<p>Your constructor <code>new</code> needs to return a <em>blessed reference</em> to the data structure you are using to contain the object's information. You have no relevant data here, but you still need to return something</p>\n\n<p><code>bless</code> associates the data with a specific package. In this case, your object should be blessed into <code>MyModule</code>, so that perl knows to look for <code>MyModule::say_hello</code> when it sees a method call like <code>$myObj-&gt;say_hello()</code> </p>\n\n<p>Your current constructor returns the value returned by the <code>print</code> statement, which is <code>1</code> if it succeeded, as it almost certainly does. That is why you see the <code>\"1\"</code> in the error message</p>\n\n<blockquote>\n  <p>Can't locate object method \"say_hello\" via package \"1\" (perhaps you forgot to load \"1\"?) at ./main.pl line 8.</p>\n</blockquote>\n\n<p>The most common container for an object's data is a <em>hash</em>, so you need to change <code>new</code> to this</p>\n\n<pre><code>sub new {\n\n    print \"calling constructor\\n\";\n\n    my $self = { };\n    bless $self, 'MyModule';\n    return $self;\n}\n</code></pre>\n\n<p>and then your program will work as it should. It creates an anonymous hash and assigns it to the <code>$self</code> variable, then blesses and returns it</p>\n\n<p>Note that this can be made much more concise:</p>\n\n<ul>\n<li><p>Without a <code>return</code> statement, a subroutine will return the value of the most recently executed statement</p></li>\n<li><p>By default, <code>bless</code> will bless the data into the current package</p></li>\n<li><p>There is no need to store the reference in a variable before blessing it</p></li>\n</ul>\n\n<p>So the same effect may be achieved by writing</p>\n\n<pre><code>sub new {\n\n    print \"calling constructor\\n\";\n\n    bless { };\n}\n</code></pre>\n\n<p>Note also that your call</p>\n\n<pre><code>my $myObj = new MyModule()\n</code></pre>\n\n<p>is less than ideal. It is called <em>indirect object notation</em> and can be ambiguous. It is better to always use a direct method reference, such as</p>\n\n<pre><code>my $myObj = MyModule-&gt;new()\n</code></pre>\n\n<p>so as to disambiguate the call</p>\n"}], "owner": {"reputation": 1159, "user_id": 3302647, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/784a183178e06cdacc78678f3779cf7d?s=128&d=identicon&r=PG&f=1", "display_name": "shafeeq", "link": "https://stackoverflow.com/users/3302647/shafeeq"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 588, "favorite_count": 1, "accepted_answer_id": 41483664, "answer_count": 2, "score": 0, "last_activity_date": 1483615977, "creation_date": 1483614784, "last_edit_date": 1495540426, "question_id": 41483562, "link": "https://stackoverflow.com/questions/41483562/cant-locate-object-method-say-hello-via-package-1", "title": "Can&#39;t locate object method &quot;say_hello&quot; via package &quot;1&quot;", "body": "<p>I just started to learn Perl. When I moved to object orientation I am getting an error like </p>\n\n<pre><code>Can't locate object method \"say_hello\" via package \"1\" (perhaps you forgot to load \"1\"?) at ./main.pl line 8.\n</code></pre>\n\n<p>I googled a lot for a solution. Got some similar issues like <a href=\"https://stackoverflow.com/questions/15689661/perl-objects-error-cant-locate-object-method-via-package\">this</a>. My understanding is it's not a general issue.</p>\n\n<p>Here is my class </p>\n\n<pre><code># MyModule.pm\n\npackage MyModule;\nuse strict;\nuse warnings;\n\nsub new {\n    print \"calling constructor\\n\";\n}\n\nsub say_hello {\n    print \"Hello from MyModule\\n\";\n}\n\n1;\n</code></pre>\n\n<p>Here is my test script</p>\n\n<pre><code># main.pl\n\n#!/usr/bin/perl -w\nuse strict;\nuse warnings;\n\nuse MyModule;\n\nmy $myObj = new MyModule();\n$myObj-&gt;say_hello();\n</code></pre>\n\n<p>The code is working perfectly if remove last line from <code>main.pl</code></p>\n"}, {"tags": ["perl", "dbi"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1483613708, "post_id": 41483109, "comment_id": 70171171, "body": "What do you mean by multiple connection strings? Do you want to make more than one handle, each connecting to a different server?"}, {"owner": {"reputation": 759, "user_id": 2118804, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/ZZ6Vy.jpg?s=128&g=1", "display_name": "Robie Nayak", "link": "https://stackoverflow.com/users/2118804/robie-nayak"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1483613873, "post_id": 41483109, "comment_id": 70171261, "body": "server is same, the passwords are different with privileges."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1483613991, "post_id": 41483109, "comment_id": 70171345, "body": "So user and password are different, and you want multiple handles? Please specify what your output should be."}, {"owner": {"reputation": 759, "user_id": 2118804, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/ZZ6Vy.jpg?s=128&g=1", "display_name": "Robie Nayak", "link": "https://stackoverflow.com/users/2118804/robie-nayak"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1483614134, "post_id": 41483109, "comment_id": 70171435, "body": "if it fails to connect with the first connection string it should try the second one and capture the errors if any."}], "answers": [{"tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": false, "score": 1, "last_activity_date": 1483614946, "creation_date": 1483614946, "answer_id": 41483624, "question_id": 41483109, "link": "https://stackoverflow.com/questions/41483109/multiple-connection-strings-to-a-database-with-different-password/41483624#41483624", "title": "multiple connection strings to a database with different password", "body": "<p>You need to use a loop and retry until you get a working connection. In each loop, you need to grab the next set of config values and try to connect with it.</p>\n\n<pre><code>my @configs = (\n    {\n        # ...\n        user     =&gt; 'user1',\n        password =&gt; 'password1',\n    },\n    {\n        # ...\n        user     =&gt; 'user2',\n        password =&gt; 'password2',\n    },\n);\n\nmy $dbh;\nwhile ( not $dbh ) {\n    my $config = shift @configs;    # grab the next config\n    if ( not $config ) {\n        # we ran out of configs to try\n        die \"Couldn't connect to database\";\n    }\n\n    # try the config\n    $dbh = eval {\n        DBI-&gt;connect(\n            \"dbi:Pg:dbname=\" . $config-&gt;{db} . \";host=$socket_nm;port=\" . $config-&gt;{port} . \"\",\n            $config-&gt;{user}, $config-&gt;{password}, { RaiseError =&gt; 1, PrintError =&gt; 0 } );\n    };\n    # we don't need to look at $@ here, but if we care we can still do it\n}\n</code></pre>\n\n<p>The configs are now stored in an array <code>@configs</code>. Inside, there are hash references. In your loop we have a lexical <code>$config</code>, which contains the current one we want to try. Note that this also is a hash reference, so the you need to use <code>$config-&gt;{...}</code> with the arrow in the dsn.</p>\n\n<p>We loop as long as <code>$dbh</code> is not set. That's the case until the <code>eval</code> inside of the loop returns a working database handle object.</p>\n\n<p>We also need to exit the loop if we run out of configs. Dying seemed like a good idea for that.</p>\n\n<p>If you want, you can handle the errors that <code>eval</code> is catching for you, but for this to work you don't have to do it. If you all you care about is that you get a working connection in the end, this should be sufficient.</p>\n\n<hr>\n\n<p>Note: Your <code>%config = do 'dbconfig.pl'</code> is horrible. Please use a proper config file format like JSON and a module to read it. I really like <a href=\"http://p3rl.org/Config::ZOMG\" rel=\"nofollow noreferrer\">Config::ZOMG</a> as it supports lots of different formats and lets you  combine multiple files into one config hash. But <a href=\"https://metacpan.org/pod/Config::Simple\" rel=\"nofollow noreferrer\">Config::Simple</a> might be enough for you here.</p>\n"}], "owner": {"reputation": 759, "user_id": 2118804, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/ZZ6Vy.jpg?s=128&g=1", "display_name": "Robie Nayak", "link": "https://stackoverflow.com/users/2118804/robie-nayak"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 59, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1483614946, "creation_date": 1483613553, "question_id": 41483109, "link": "https://stackoverflow.com/questions/41483109/multiple-connection-strings-to-a-database-with-different-password", "title": "multiple connection strings to a database with different password", "body": "<p>Just trying to connect a database with multiple connection strings with different passwords. The passwords have different privileges. If one password fails, it should try with another one.</p>\n\n<p>The code has been written as below. Though it works fine, how can we refactor code (eval &amp; DBH) to handle multiple connection strings?</p>\n\n<pre><code>my %config = do 'dbconfig.pl';\n\nmy $dbh = eval { DBI-&gt;connect(\"dbi:Pg:dbname=\".$config{db}.\";host=$socket_nm;port=\".$config{port}.\"\", $config{user},$config{password},{RaiseError=&gt;1,PrintError=&gt;0}) };\n\nif (!$dbh) {\n$dbh = eval { DBI-&gt;connect(\"dbi:Pg:dbname=\".$config{db}.\";host=$socket_nm;port=\".$config{port}.\"\",$config{user},$config{password},{RaiseError=&gt;1,PrintError=&gt;0}) };         \n}\n\nif ( $@ ) {\n#Handle Exceptions\n}\n</code></pre>\n\n<p>dbconfig.pl contains :</p>\n\n<pre><code>db =&gt; 'db',\nport =&gt; '5432',\nuser =&gt; 'db_ro',\npassword =&gt; 'Pass01',\npassword2 =&gt; 'Pass02'\n</code></pre>\n"}, {"tags": ["perl", "call", "subroutine"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1483627104, "post_id": 41481745, "comment_id": 70180647, "body": "<code>(\\&amp;$name)-&gt;(@args)</code>"}], "answers": [{"comments": [{"owner": {"reputation": 34726, "user_id": 133939, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/pN9C5.png?s=128&g=1", "display_name": "Zaid", "link": "https://stackoverflow.com/users/133939/zaid"}, "edited": false, "score": 1, "creation_date": 1483610407, "post_id": 41481892, "comment_id": 70169030, "body": "I gave the man a fish, you taught him how to fish. +1"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 34726, "user_id": 133939, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/pN9C5.png?s=128&g=1", "display_name": "Zaid", "link": "https://stackoverflow.com/users/133939/zaid"}, "edited": false, "score": 1, "creation_date": 1483610453, "post_id": 41481892, "comment_id": 70169076, "body": "@Zaid oh, there are two more answers. I didn&#39;t see them yet. I was just busy hacking down half a blog post in here again... :D"}, {"owner": {"reputation": 195, "user_id": 4417286, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/3dcwY.jpg?s=128&g=1", "display_name": "Raj", "link": "https://stackoverflow.com/users/4417286/raj"}, "edited": false, "score": 0, "creation_date": 1483610594, "post_id": 41481892, "comment_id": 70169173, "body": "HI simbabque. Thanks. I was not knowing that.  In my case users are not providing subroutine name in arguments but good info."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 34726, "user_id": 133939, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/pN9C5.png?s=128&g=1", "display_name": "Zaid", "link": "https://stackoverflow.com/users/133939/zaid"}, "edited": false, "score": 0, "creation_date": 1483610847, "post_id": 41481892, "comment_id": 70169340, "body": "@Zaid I assumed the OP does not have <code>use strict</code> because there was no <code>my sub</code> in the loop. In that case, the OP&#39;s code works. With <code>strict</code> turned on however, <code>strict &#39;refs&#39;</code> needs to be disabled."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1483612587, "post_id": 41481892, "comment_id": 70170448, "body": "Am I getting downvoted because it&#39;s too much text?"}], "tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": false, "score": 10, "last_activity_date": 1483631826, "last_edit_date": 1483631826, "creation_date": 1483610155, "answer_id": 41481892, "question_id": 41481745, "link": "https://stackoverflow.com/questions/41481745/how-to-call-subroutine-in-perl-using-variable-name/41481892#41481892", "title": "How to call subroutine in perl using variable name", "body": "<p>Your code is correct in general, but you need to turn off <a href=\"http://perldoc.perl.org/strict.html\" rel=\"nofollow noreferrer\"><code>strict 'refs'</code></a> to make Perl allow you to use variable content as code refs.</p>\n\n<pre><code>use strict;\nuse warnings;\n\nsub foo { print \"foo\" }\nsub bar { print \"bar\" }\n\nmy @arr = qw/foo bar/;\nforeach my $sub (@arr) {\n    no strict 'refs';\n    print \"Calling $sub\\n\";\n\n    &amp;$sub();\n}\n</code></pre>\n\n<p>The output here is:</p>\n\n<pre><code>Calling foo\nfooCalling bar\nbar\n</code></pre>\n\n<p>I've also added parenthesis <code>()</code> after the call. That way we pass no arguments to <code>%$sub</code>. If we do not those, the <code>@_</code> argument list of the current subroutine will be used.</p>\n\n<hr>\n\n<p>However, you should probably not do this. Especially if <code>@arr</code> contains user input, this is a big problem. Your user can inject code. Consider this:</p>\n\n<pre><code>my @arr = qw/CORE::die/;\n</code></pre>\n\n<p>Now we get the following output:</p>\n\n<pre><code>Calling CORE::die\nDied at /home/code/scratch.pl line 1492.\n</code></pre>\n\n<p>Oops. You don't want to do this. The <code>die</code> example is not very bad, but like this you could easily call code in some different package that wasn't intended.</p>\n\n<p>It's probably better to make a <a href=\"https://en.wikipedia.org/wiki/Dispatch_table\" rel=\"nofollow noreferrer\">dispatch table</a>. There is a whole chapter about those in <em>Higher Order Perl</em> by Mark Jason Dominus, which you can <a href=\"http://hop.perl.plover.com/\" rel=\"nofollow noreferrer\">download for free on his website</a>.</p>\n\n<p>It basically means you put all the subs into a hash as code references, and then call those in your loop. That way you can control which ones are allowed.</p>\n\n<pre><code>use strict;\nuse warnings;\n\nsub baz { print \"baz\" }\n\nmy %dispatch = (\n    foo =&gt; sub { print \"foo\" },\n    bar =&gt; sub { print \"bar\" },\n    baz =&gt; \\&amp;baz,\n);\n\nmy @arr = qw/foo bar baz wrong_entry/;\nforeach my $sub ( @arr ) {\n    die \"$sub is not allowed\" \n        unless exists $dispatch{$sub};\n\n    $dispatch{$sub}-&gt;();\n}\n</code></pre>\n\n<p>This outputs:</p>\n\n<pre><code>foobarbaz\nwrong_entry is not allowed at /home/code/scratch.pl line 1494.\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": false, "score": 8, "last_activity_date": 1562387543, "last_edit_date": 1562387543, "creation_date": 1483610184, "answer_id": 41481909, "question_id": 41481745, "link": "https://stackoverflow.com/questions/41481745/how-to-call-subroutine-in-perl-using-variable-name/41481909#41481909", "title": "How to call subroutine in perl using variable name", "body": "<p>You want to do that using <em>code references</em>.</p>\n\n<pre><code>foreach my $sub (@arr) \n{\n    $sub-&gt;();\n}\n</code></pre>\n\n<p>where <code>@arr</code> contains scalars such as</p>\n\n<pre><code>my $rc = sub { print \"Anonymous subroutine\\n\" };\n</code></pre>\n\n<p>or </p>\n\n<pre><code>sub func { print \"Named sub\\n\" }\nmy $rc = \\&amp;func;\n</code></pre>\n\n<p>You can manipulate these scalars as you would any other, to form your array. However, it is more common and useful to use them as values in a hash, creating a <em>dispatch table</em>.</p>\n\n<p>See <a href=\"http://perldoc.perl.org/perlref.html\" rel=\"nofollow noreferrer\">perlref</a> and <a href=\"https://perldoc.perl.org/perlsub.html\" rel=\"nofollow noreferrer\">perlsub</a>, and (for example) <a href=\"https://stackoverflow.com/questions/41457255/how-to-pass-entire-subroutine-function-into-hashtable-data-using-perl/41457598#41457598\">this post</a> and links in it for comments and details.</p>\n"}], "owner": {"reputation": 195, "user_id": 4417286, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/3dcwY.jpg?s=128&g=1", "display_name": "Raj", "link": "https://stackoverflow.com/users/4417286/raj"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2368, "favorite_count": 1, "closed_date": 1483632695, "answer_count": 2, "score": 5, "last_activity_date": 1562387543, "creation_date": 1483609717, "last_edit_date": 1483610048, "question_id": 41481745, "link": "https://stackoverflow.com/questions/41481745/how-to-call-subroutine-in-perl-using-variable-name", "closed_reason": "Duplicate", "title": "How to call subroutine in perl using variable name", "body": "<p>Let say I have one array that contains all subroutine name and I want to call all one by one.</p>\n\n<pre><code>foreach $sub (@arr){\n      print \"Calling $sub\\n\";\n       #---How to call $sub?----\n       &amp;$sub;  ## will not work\n}\n</code></pre>\n"}, {"tags": ["html", "perl"], "answers": [{"tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": true, "score": 1, "last_activity_date": 1483613291, "creation_date": 1483613291, "answer_id": 41483015, "question_id": 41481737, "link": "https://stackoverflow.com/questions/41481737/going-to-a-specific-html-links-with-mechanize-firefox/41483015#41483015", "title": "going to a specific html links with mechanize-firefox", "body": "<p>You can use <a href=\"https://metacpan.org/pod/WWW::Mechanize::Firefox#mech-xpath-query-options\" rel=\"nofollow noreferrer\">$mech->xpath</a> to do that. All you need to do is build the right xpath expression to get all <code>a</code> tags under <code>class=\"testclass2\"</code>.</p>\n\n<pre><code>my @links = $mech-&gt;xpath('//div[@class=\"testclass2\"]//a');\n</code></pre>\n\n<p>The expression is the most tricky thing about it. The <code>//</code> means <em>anywhere under where you are</em>. This is like <code>div.testclass2 a</code> in CSS.</p>\n"}], "owner": {"reputation": 37, "user_id": 6588103, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/ba5f60d8309d126d2bd8e97dfb9ce98f?s=128&d=identicon&r=PG&f=1", "display_name": "Rakesh", "link": "https://stackoverflow.com/users/6588103/rakesh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 22, "favorite_count": 0, "accepted_answer_id": 41483015, "answer_count": 1, "score": 0, "last_activity_date": 1483613291, "creation_date": 1483609699, "question_id": 41481737, "link": "https://stackoverflow.com/questions/41481737/going-to-a-specific-html-links-with-mechanize-firefox", "title": "going to a specific html links with mechanize-firefox", "body": "<p>its a sample HTML and I want to get links with mechanize-firefox,which is in <code>&lt;div class=\"testclass2\"&gt;</code> not from others, how can I do it?</p>\n\n<pre><code>&lt;div class=\"testclass1\"&gt;\n    &lt;span class=\"SelectItem\"&gt;\n        &lt;a class=\"SelectLink\"&gt;\n            &lt;span class=\"SelectText\"&gt;link1&lt;/span&gt;\n        &lt;/a&gt;\n    &lt;/span&gt;\n&lt;/div&gt;\n\n&lt;div class=\"testclass2\"&gt;\n    &lt;span class=\"SelectItem\"&gt;\n        &lt;a class=\"SelectLink\"&gt;\n            &lt;span class=\"SelectText\"&gt;link 1&lt;/span&gt;\n        &lt;/a&gt;\n    &lt;/span&gt;\n    &lt;ul class=\"SelectList\"&gt;\n        &lt;li class=\"SelectItem\"&gt;\n            &lt;a class=\"SelectLink\"&gt;link 2&lt;/a&gt;\n        &lt;/li&gt;\n    &lt;/ul&gt;\n&lt;/div&gt;\n</code></pre>\n"}, {"tags": ["regex", "perl", "grep"], "comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 2, "creation_date": 1483605341, "post_id": 41480025, "comment_id": 70166035, "body": "The first code snippet is fine, that&#39;s how you would get elements that match the given regex.  The sample you show <i>does not</i> have that -- none of the lines have the literal <code>M1ARK1</code> in them ... ?  So none of them will be matched by the regex, <code>grep</code> will return no elements, and <code>@S</code> is emtpy. The <code>for</code> loop is completely unclear -- what do you want to do with it and what are the variables?   Can you please clarify.."}, {"owner": {"reputation": 917, "user_id": 3014263, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rFh51.jpg?s=128&g=1", "display_name": "AbhiNickz", "link": "https://stackoverflow.com/users/3014263/abhinickz"}, "edited": false, "score": 0, "creation_date": 1483607165, "post_id": 41480025, "comment_id": 70166992, "body": "So OP edited the question and I am getting the grep content through loop. What problem are you facing exactly?"}, {"owner": {"reputation": 383, "user_id": 3181681, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/e9059360247a8f344cc8ced514897074?s=128&d=identicon&r=PG&f=1", "display_name": "Vinay", "link": "https://stackoverflow.com/users/3181681/vinay"}, "reply_to_user": {"reputation": 917, "user_id": 3014263, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rFh51.jpg?s=128&g=1", "display_name": "AbhiNickz", "link": "https://stackoverflow.com/users/3014263/abhinickz"}, "edited": false, "score": 0, "creation_date": 1483607431, "post_id": 41480025, "comment_id": 70167147, "body": "@AbhiNickz: I am not returned with any output."}, {"owner": {"reputation": 917, "user_id": 3014263, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rFh51.jpg?s=128&g=1", "display_name": "AbhiNickz", "link": "https://stackoverflow.com/users/3014263/abhinickz"}, "edited": false, "score": 0, "creation_date": 1483607694, "post_id": 41480025, "comment_id": 70167298, "body": "@Vinay What is this <code>$ln1</code> in for loop, I used it like this <code>for(my $j=0; $j&lt;2; $j++){</code>"}, {"owner": {"reputation": 383, "user_id": 3181681, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/e9059360247a8f344cc8ced514897074?s=128&d=identicon&r=PG&f=1", "display_name": "Vinay", "link": "https://stackoverflow.com/users/3181681/vinay"}, "reply_to_user": {"reputation": 917, "user_id": 3014263, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rFh51.jpg?s=128&g=1", "display_name": "AbhiNickz", "link": "https://stackoverflow.com/users/3014263/abhinickz"}, "edited": false, "score": 0, "creation_date": 1483607826, "post_id": 41480025, "comment_id": 70167371, "body": "@Abhi:  $ln1  counts the number of lines. Code Snipper: while(my $line1=&lt;FILE&gt;) { push(@AR1,&quot;$line1&quot;); $ln1++;}"}, {"owner": {"reputation": 917, "user_id": 3014263, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rFh51.jpg?s=128&g=1", "display_name": "AbhiNickz", "link": "https://stackoverflow.com/users/3014263/abhinickz"}, "edited": false, "score": 2, "creation_date": 1483607970, "post_id": 41480025, "comment_id": 70167448, "body": "I also used this <code>for(my $j=0; $j&lt;$#AR1; $j++){</code> and <code>for(my $j=0; $j&lt;scalar(@AR1); $j++){</code> gives me correct result. <code>Before:$VAR1 = [           &#39;&gt;tr|M1A3B6|Uncharacterized protein &gt;&gt;MFNLHLLAVG&#39;         ]; After:$VAR1 = [           &#39;&gt;tr|M1A3B6|Uncharacterized protein &gt;&gt;MFNLHLLAVG&#39;         ]; </code>"}], "answers": [{"tags": [], "owner": {"reputation": 42833, "user_id": 18914, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7a20a39ae2ef47ae042a3eddd5b5bd19?s=128&d=identicon&r=PG", "display_name": "Dave Sherohman", "link": "https://stackoverflow.com/users/18914/dave-sherohman"}, "is_accepted": true, "score": 7, "last_activity_date": 1483609108, "creation_date": 1483609108, "answer_id": 41481549, "question_id": 41480025, "link": "https://stackoverflow.com/questions/41480025/how-can-i-grep-in-a-perl-loop/41481549#41481549", "title": "How can I grep in a Perl loop?", "body": "<p>There are a couple significant problems in the structure of your posted code:</p>\n\n<ol>\n<li>You're incrementing <code>$j</code> twice in each iteration (once with the <code>$j++</code> in the <code>for</code> statement itself, then another <code>$j++</code> in the body of the loop).  This will cause it to skip over every other element in <code>@AR1</code>.  Because it's so easy to make errors like this with C-style loops, it's generally better to use <code>for (@list)</code> instead of the C-style <code>for (;;)</code> when you're just iterating over a list of items.</li>\n<li>You're assigning directly to <code>@S</code> on each iteration of the loop, which replaces any existing content with the new <code>grep</code> result.  This means that, at the end of the loop, <code>@S</code> contains only the results found in the final iteration instead of all the results found throughout the process.  You need to append to <code>@S</code> instead.</li>\n<li><em>ALWAYS</em> <code>use strict;</code> and <code>use warnings;</code>.  Yes, it can be a minor hassle to get used to them and satisfying their demands, but they are your best friends when it comes time for debugging.</li>\n</ol>\n\n<p>Here's how I would do what your posted code appears to intend:</p>\n\n<pre><code>#!/usr/bin/env perl    \n\nuse strict;\nuse warnings;\nuse 5.010;\n\nmy @ar1 = qw( M1A3B6 M1AZ83 );\nmy @ar3 = (\n  '&gt;tr|M1A3B6|Uncharacterized protein &gt;&gt;MFNLHLLAVG',\n  '&gt;tr|M1AP92|Uncharacterized protein &gt;&gt;MQTLSRAQSQ',\n  '&gt;tr|M1AZ83|Uncharacterized protein &gt;&gt;MASFTTLTSLFFFF'\n);\n\nmy @s;\nfor my $key (@ar1) {\n  push @s, (grep /$key/, @ar3);\n} \n\nsay for @s;\n</code></pre>\n\n<p>And the resulting output:</p>\n\n<pre><code>&gt;tr|M1A3B6|Uncharacterized protein &gt;&gt;MFNLHLLAVG\n&gt;tr|M1AZ83|Uncharacterized protein &gt;&gt;MASFTTLTSLFFFF\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1009, "user_id": 2051109, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/216009d45e1b8e34f936173142f0648f?s=128&d=identicon&r=PG", "display_name": "BOC", "link": "https://stackoverflow.com/users/2051109/boc"}, "is_accepted": false, "score": 1, "last_activity_date": 1483709223, "last_edit_date": 1483709223, "creation_date": 1483627344, "answer_id": 41487805, "question_id": 41480025, "link": "https://stackoverflow.com/questions/41480025/how-can-i-grep-in-a-perl-loop/41487805#41487805", "title": "How can I grep in a Perl loop?", "body": "<p>I agree with Dave Sherohman, but I wanted to highlight a more concise syntax:</p>\n\n<pre><code>#!/usr/bin/env perl    \n\nuse strict;\nuse warnings;\nuse 5.010;\n\nmy @ar1 = qw( M1A3B6 M1AZ83 );\nmy @ar3 = (\n  '&gt;tr|M1A3B6|Uncharacterized protein &gt;&gt;MFNLHLLAVG',\n  '&gt;tr|M1AP92|Uncharacterized protein &gt;&gt;MQTLSRAQSQ',\n  '&gt;tr|M1AZ83|Uncharacterized protein &gt;&gt;MASFTTLTSLFFFF'\n);\n\nmy @s = map {my $key = $_;grep /$key/, @ar3} @ar1;\n\nsay for @s;\n</code></pre>\n\n<p>This uses the fact that the block part of map is evaluated in list context and may produce zero, one, or more elements in the returned value. This combine very nicely with grep when we want to concatenate all the outputs.</p>\n"}, {"tags": [], "owner": {"reputation": 5455, "user_id": 3961170, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/PtFol.jpg?s=128&g=1", "display_name": "mkHun", "link": "https://stackoverflow.com/users/3961170/mkhun"}, "is_accepted": false, "score": 0, "last_activity_date": 1483705441, "creation_date": 1483705441, "answer_id": 41505679, "question_id": 41480025, "link": "https://stackoverflow.com/questions/41480025/how-can-i-grep-in-a-perl-loop/41505679#41505679", "title": "How can I grep in a Perl loop?", "body": "<p>Try something like below as mentioned, Join the array using <code>|</code> then grep it.</p>\n\n<pre><code>my @ar1 = qw(M1A3B6 M1AZ83);\nmy @ar3 = (\n  '&gt;tr|M1A3B6|Uncharacterized protein &gt;&gt;MFNLHLLAVG',\n  '&gt;tr|M1AP92|Uncharacterized protein &gt;&gt;MQTLSRAQSQ',\n  '&gt;tr|M1AZ83|Uncharacterized protein &gt;&gt;MASFTTLTSLFFFF'\n);\n\nmy $pattern = join(\"|\",@ar1);\nmy @data = grep{ /$pattern/ } @ar3;\nprint \"@data\\n\";\n</code></pre>\n"}], "owner": {"reputation": 383, "user_id": 3181681, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/e9059360247a8f344cc8ced514897074?s=128&d=identicon&r=PG&f=1", "display_name": "Vinay", "link": "https://stackoverflow.com/users/3181681/vinay"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 611, "favorite_count": 0, "accepted_answer_id": 41481549, "answer_count": 3, "score": 1, "last_activity_date": 1483709223, "creation_date": 1483603647, "last_edit_date": 1483608452, "question_id": 41480025, "link": "https://stackoverflow.com/questions/41480025/how-can-i-grep-in-a-perl-loop", "title": "How can I grep in a Perl loop?", "body": "<p>I am trying to <code>grep</code> in Perl using the following code:</p>\n\n<pre><code>my @S = grep /M1A3B6/, @AR3; \nprint @S;\n</code></pre>\n\n<p>However, <code>grep</code> through loop did not return any value.</p>\n\n<pre><code>for(my $j=0; $j&lt;$ln1; $j++){\n    @S = grep /$AR1[$j]/, @AR3;\n    $j++;\n}\nprint @S;\n</code></pre>\n\n<p>The sample files are as follows:</p>\n\n<pre><code>@AR1\nM1A3B6\nM1AZ83\n\n@AR3\n&gt;tr|M1A3B6|Uncharacterized protein &gt;&gt;MFNLHLLAVG\n&gt;tr|M1AP92|Uncharacterized protein &gt;&gt;MQTLSRAQSQ\n&gt;tr|M1AZ83|Uncharacterized protein &gt;&gt;MASFTTLTSLFFFF\n</code></pre>\n\n<p>All suggestions will be appreciated.</p>\n"}, {"tags": ["perl", "upgrade"], "comments": [{"owner": {"reputation": 917, "user_id": 3014263, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rFh51.jpg?s=128&g=1", "display_name": "AbhiNickz", "link": "https://stackoverflow.com/users/3014263/abhinickz"}, "edited": false, "score": 1, "creation_date": 1483601288, "post_id": 41479271, "comment_id": 70164132, "body": "<a href=\"http://perldoc.perl.org/perldelta.html\" rel=\"nofollow noreferrer\">Differences between the 5.22.0 release and the 5.24.0 release</a>, If you already know the difference between perl 5.16 and 5.22 release."}, {"owner": {"reputation": 254, "user_id": 6752390, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/6071587a3b51842ff285ac4f5c43c0a7?s=128&d=identicon&r=PG&f=1", "display_name": "questionar", "link": "https://stackoverflow.com/users/6752390/questionar"}, "reply_to_user": {"reputation": 917, "user_id": 3014263, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rFh51.jpg?s=128&g=1", "display_name": "AbhiNickz", "link": "https://stackoverflow.com/users/3014263/abhinickz"}, "edited": false, "score": 0, "creation_date": 1483615501, "post_id": 41479271, "comment_id": 70172396, "body": "is there any ways to find the things that are deprecated instead of reading the docs??."}, {"owner": {"reputation": 917, "user_id": 3014263, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rFh51.jpg?s=128&g=1", "display_name": "AbhiNickz", "link": "https://stackoverflow.com/users/3014263/abhinickz"}, "edited": false, "score": 0, "creation_date": 1483636414, "post_id": 41479271, "comment_id": 70187322, "body": "<a href=\"http://search.cpan.org/dist/perl-5.24.0/pod/perldelta.pod#Deprecations\" rel=\"nofollow noreferrer\">Perl delta perl-5.24.0</a>, You could search for Deprecations heading in each version and look for the deprecated function above Perl 5.16 release."}], "answers": [{"comments": [{"owner": {"reputation": 254, "user_id": 6752390, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/6071587a3b51842ff285ac4f5c43c0a7?s=128&d=identicon&r=PG&f=1", "display_name": "questionar", "link": "https://stackoverflow.com/users/6752390/questionar"}, "edited": false, "score": 0, "creation_date": 1483613196, "post_id": 41479815, "comment_id": 70170841, "body": "I want to know what are the function that are deprecated in the perl 5.24 compared with perl 5.16. any idea on this??"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 6, "creation_date": 1483617551, "post_id": 41479815, "comment_id": 70173836, "body": "All of those documents contain a section entitled &quot;Deprecations&quot;, so it&#39;s easy enough to find the things that might affect you. Alternatively, install the new version of Perl on your test environment and run your test suite - you&#39;ll soon see what breaks."}, {"owner": {"reputation": 254, "user_id": 6752390, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/6071587a3b51842ff285ac4f5c43c0a7?s=128&d=identicon&r=PG&f=1", "display_name": "questionar", "link": "https://stackoverflow.com/users/6752390/questionar"}, "edited": false, "score": 0, "creation_date": 1483686008, "post_id": 41479815, "comment_id": 70206665, "body": "does perl have any test suite itself or do you mean to run my own test suite??"}, {"owner": {"reputation": 28015, "user_id": 63550, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/RIZKi.png?s=128&g=1", "display_name": "Peter Mortensen", "link": "https://stackoverflow.com/users/63550/peter-mortensen"}, "edited": false, "score": 0, "creation_date": 1604558703, "post_id": 41479815, "comment_id": 114384425, "body": "What <i>is</i> &quot;perldelta&quot;? An executable? A document? A set of text files? A Perl module?"}, {"owner": {"reputation": 28015, "user_id": 63550, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/RIZKi.png?s=128&g=1", "display_name": "Peter Mortensen", "link": "https://stackoverflow.com/users/63550/peter-mortensen"}, "edited": false, "score": 0, "creation_date": 1604559220, "post_id": 41479815, "comment_id": 114384560, "body": "OK, <code>perldoc perldelta</code> displays it. (&#39;perldoc&#39; is not installed by default on Ubuntu - sudo <code>apt-get update &amp;&amp; sudo apt-get install perl-doc</code>)"}], "tags": [], "owner": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "is_accepted": false, "score": 7, "last_activity_date": 1483775569, "last_edit_date": 1483775569, "creation_date": 1483602737, "answer_id": 41479815, "question_id": 41479271, "link": "https://stackoverflow.com/questions/41479271/what-is-the-major-difference-between-perl-5-16-to-5-24/41479815#41479815", "title": "What is the major difference between perl 5.16 to 5.24?", "body": "<p>You may want to check <code>perldelta</code> for every release,</p>\n\n<p><a href=\"https://metacpan.org/pod/release/RJBS/perl-5.18.0/pod/perldelta.pod\" rel=\"nofollow noreferrer\">https://metacpan.org/pod/release/RJBS/perl-5.18.0/pod/perldelta.pod</a>\n<a href=\"https://metacpan.org/pod/release/RJBS/perl-5.20.0/pod/perldelta.pod\" rel=\"nofollow noreferrer\">https://metacpan.org/pod/release/RJBS/perl-5.20.0/pod/perldelta.pod</a>\n<a href=\"https://metacpan.org/pod/release/RJBS/perl-5.22.0/pod/perldelta.pod\" rel=\"nofollow noreferrer\">https://metacpan.org/pod/release/RJBS/perl-5.22.0/pod/perldelta.pod</a>\n<a href=\"https://metacpan.org/pod/release/RJBS/perl-5.24.0/pod/perldelta.pod\" rel=\"nofollow noreferrer\">https://metacpan.org/pod/release/RJBS/perl-5.24.0/pod/perldelta.pod</a></p>\n"}], "owner": {"reputation": 254, "user_id": 6752390, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/6071587a3b51842ff285ac4f5c43c0a7?s=128&d=identicon&r=PG&f=1", "display_name": "questionar", "link": "https://stackoverflow.com/users/6752390/questionar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1156, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1607900995, "creation_date": 1483600705, "last_edit_date": 1607900995, "question_id": 41479271, "link": "https://stackoverflow.com/questions/41479271/what-is-the-major-difference-between-perl-5-16-to-5-24", "title": "What is the major difference between perl 5.16 to 5.24?", "body": "<p>How will I find the difference between Perl 5.16 and 5.24?</p>\n<p>I am able to get the difference between only the previous version, i.e. 5.22. I don't want to get only the difference between the previous version</p>\n<p>The Perl documentation only provides the difference to the previous version.</p>\n"}, {"tags": ["html", "perl"], "answers": [{"comments": [{"owner": {"reputation": 17, "user_id": 7367867, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh5.googleusercontent.com/-t4n7BCbKdKU/AAAAAAAAAAI/AAAAAAAAAbY/1VhX27f9h1c/photo.jpg?sz=128", "display_name": "manav sharma", "link": "https://stackoverflow.com/users/7367867/manav-sharma"}, "edited": false, "score": 0, "creation_date": 1483604330, "post_id": 41477988, "comment_id": 70165538, "body": "Thanks for the help. It&#39;s moved. But  getting below error now :- Undefined subroutine &amp;main::table called at  line 29."}, {"owner": {"reputation": 19969, "user_id": 23512, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/tUj1I.png?s=128&g=1", "display_name": "Tanktalus", "link": "https://stackoverflow.com/users/23512/tanktalus"}, "reply_to_user": {"reputation": 17, "user_id": 7367867, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh5.googleusercontent.com/-t4n7BCbKdKU/AAAAAAAAAAI/AAAAAAAAAbY/1VhX27f9h1c/photo.jpg?sz=128", "display_name": "manav sharma", "link": "https://stackoverflow.com/users/7367867/manav-sharma"}, "edited": false, "score": 0, "creation_date": 1483630393, "post_id": 41477988, "comment_id": 70182996, "body": "@manavsharma - in your code it&#39;s <code>$cgi-&gt;table</code> but in your &quot;Line 29&quot; above your code it&#39;s <code>$cgi=&gt;table</code> - if you changed this part from <code>-&gt;</code> to <code>=&gt;</code>, then that would give you a problem.  The full line should be as the other answer, <code>$cgi-&gt;table({ -border =&gt; 1 })</code> (not sure if the <code>-</code> is required in front of <code>border</code> - Roger is probably correct, I just don&#39;t use CGI.)"}], "tags": [], "owner": {"reputation": 19969, "user_id": 23512, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/tUj1I.png?s=128&g=1", "display_name": "Tanktalus", "link": "https://stackoverflow.com/users/23512/tanktalus"}, "is_accepted": false, "score": 0, "last_activity_date": 1483594784, "creation_date": 1483594784, "answer_id": 41477988, "question_id": 41477882, "link": "https://stackoverflow.com/questions/41477882/cant-modify-constant-item-in-scalar-assignment-in-aix/41477988#41477988", "title": "\u201cCan&#39;t modify constant item in scalar assignment\u201d? in AIX", "body": "<p><code>print $cgi=&gt;table({border=1});</code> is trying to assign <code>border=1</code>.  I think you meant <code>border =&gt; 1</code> (changing the assignment operator, <code>=</code>, to the fat comma, <code>=&gt;</code>).</p>\n"}, {"comments": [{"owner": {"reputation": 17, "user_id": 7367867, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh5.googleusercontent.com/-t4n7BCbKdKU/AAAAAAAAAAI/AAAAAAAAAbY/1VhX27f9h1c/photo.jpg?sz=128", "display_name": "manav sharma", "link": "https://stackoverflow.com/users/7367867/manav-sharma"}, "edited": false, "score": 0, "creation_date": 1483621732, "post_id": 41480820, "comment_id": 70176813, "body": "Thanks. The script is running fine from AIX m/c now. But when i&#39;m calling this script from html (APACHE) i&#39;m not getting any o/p in GUI. But able to get o/p from backend. Any clue ??"}, {"owner": {"reputation": 121, "user_id": 4373562, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/31lnT.png?s=128&g=1", "display_name": "Roger 71", "link": "https://stackoverflow.com/users/4373562/roger-71"}, "reply_to_user": {"reputation": 17, "user_id": 7367867, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh5.googleusercontent.com/-t4n7BCbKdKU/AAAAAAAAAAI/AAAAAAAAAbY/1VhX27f9h1c/photo.jpg?sz=128", "display_name": "manav sharma", "link": "https://stackoverflow.com/users/7367867/manav-sharma"}, "edited": false, "score": 0, "creation_date": 1483625622, "post_id": 41480820, "comment_id": 70179584, "body": "1) check if the page you&#39;re getting from apache is an error page or the requested page that is not displaying any content (try to view the source code of the page);          2) check the error log of apache (<code>&#47;var&#47;log&#47;httpd&#47;error_log</code>, <code>&#47;var&#47;log&#47;apache2&#47;error.log</code>, <code>&#47;var&#47;log&#47;httpd-error.log</code>, ... something else)."}, {"owner": {"reputation": 121, "user_id": 4373562, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/31lnT.png?s=128&g=1", "display_name": "Roger 71", "link": "https://stackoverflow.com/users/4373562/roger-71"}, "reply_to_user": {"reputation": 17, "user_id": 7367867, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh5.googleusercontent.com/-t4n7BCbKdKU/AAAAAAAAAAI/AAAAAAAAAbY/1VhX27f9h1c/photo.jpg?sz=128", "display_name": "manav sharma", "link": "https://stackoverflow.com/users/7367867/manav-sharma"}, "edited": false, "score": 0, "creation_date": 1483625942, "post_id": 41480820, "comment_id": 70179826, "body": "I tested your code and I&#39;m getting a normal html page with a visible table inside. Try removing <code>$\\=&quot;\\n&quot;;</code> on line 3."}, {"owner": {"reputation": 17, "user_id": 7367867, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh5.googleusercontent.com/-t4n7BCbKdKU/AAAAAAAAAAI/AAAAAAAAAbY/1VhX27f9h1c/photo.jpg?sz=128", "display_name": "manav sharma", "link": "https://stackoverflow.com/users/7367867/manav-sharma"}, "edited": false, "score": 0, "creation_date": 1483679929, "post_id": 41480820, "comment_id": 70204446, "body": "Below error is there in error.log file.  install_driver(Oracle) failed: Can&#39;t load &#39;/apache/perl/lib/site_perl/5.10.0/aix-thread-multi-64all/au&zwnj;&#8203;to/DBD/Oracle/Oracle&zwnj;&#8203;.so&#39; for module DBD::Oracle: Could not load module  \\tDependent module libclntsh.so could not be loaded.,   Could not load module libclntsh.so."}, {"owner": {"reputation": 121, "user_id": 4373562, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/31lnT.png?s=128&g=1", "display_name": "Roger 71", "link": "https://stackoverflow.com/users/4373562/roger-71"}, "reply_to_user": {"reputation": 17, "user_id": 7367867, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh5.googleusercontent.com/-t4n7BCbKdKU/AAAAAAAAAAI/AAAAAAAAAbY/1VhX27f9h1c/photo.jpg?sz=128", "display_name": "manav sharma", "link": "https://stackoverflow.com/users/7367867/manav-sharma"}, "edited": false, "score": 0, "creation_date": 1483734004, "post_id": 41480820, "comment_id": 70233357, "body": "Maybe you could takea look a this guide <a href=\"http://g14n.info/2013/07/how-to-install-dbdoracle/\" rel=\"nofollow noreferrer\">link</a> or at this <a href=\"http://stackoverflow.com/questions/11407513/perl-dbdoracle-module-installation\">link</a>. It seems that you have some problem with DBD::Oracle. We may be going off topic regarding the question subject, consider opening a new one."}], "tags": [], "owner": {"reputation": 121, "user_id": 4373562, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/31lnT.png?s=128&g=1", "display_name": "Roger 71", "link": "https://stackoverflow.com/users/4373562/roger-71"}, "is_accepted": false, "score": 1, "last_activity_date": 1483606878, "creation_date": 1483606878, "answer_id": 41480820, "question_id": 41477882, "link": "https://stackoverflow.com/questions/41477882/cant-modify-constant-item-in-scalar-assignment-in-aix/41480820#41480820", "title": "\u201cCan&#39;t modify constant item in scalar assignment\u201d? in AIX", "body": "<p>Line 29 should be like this:</p>\n\n<pre><code>print $cgi-&gt;table( { -border=&gt;\"1\" } );\n</code></pre>\n\n<p>There is something else that, although is not the cause of the error can produce some unexpected behavior: your SQL query return a two fields recordset;</p>\n\n<p>but inside the while loop you try to read a third field:</p>\n\n<pre><code>$Logical_Date_R = $data[2];\n</code></pre>\n\n<p>the variable Logical_Date_R is likely going to have a null value.</p>\n"}], "owner": {"reputation": 17, "user_id": 7367867, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh5.googleusercontent.com/-t4n7BCbKdKU/AAAAAAAAAAI/AAAAAAAAAbY/1VhX27f9h1c/photo.jpg?sz=128", "display_name": "manav sharma", "link": "https://stackoverflow.com/users/7367867/manav-sharma"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 757, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1483606878, "creation_date": 1483594201, "last_edit_date": 1483594730, "question_id": 41477882, "link": "https://stackoverflow.com/questions/41477882/cant-modify-constant-item-in-scalar-assignment-in-aix", "title": "\u201cCan&#39;t modify constant item in scalar assignment\u201d? in AIX", "body": "<p>I'm getting this compilation error when running my code. Can anyone help what is wrong with this code. ?\nOperating system is AIX </p>\n\n<p>Error - </p>\n\n<blockquote>\n  <p><em>Can't modify constant item in scalar assignment at pet_logical_date.pl line 29, near \"1}\" Execution of\n  pet_logical_date.pl aborted due to compilation errors.</em></p>\n</blockquote>\n\n<pre><code>Line 29 is - *print $cgi=&gt;table({border=1});\n</code></pre>\n\n<p>CODE is -</p>\n\n<pre><code>#!/usr/bin/perl -w\n#####################################################################################\n$\\=\"\\n\";\n$ENV{ORACLE_HOME}='/oravl01/11.2.0.3';\n$LD_LIBRARY_PATH='/oravl01/11.2.0.3/lib';\n\nuse Shell;\nuse DBI ;\nuse CGI ;\n\nmy $cgi = new CGI;\nprint $cgi-&gt;header;\n\nprint $cgi-&gt;start_html(-title=&gt;'Basic CGI');\n\nmy $dsn = \"DBI:Oracle:$db_inst\";\n\n$dbh = DBI-&gt;connect( 'dbi:Oracle:ABC',\"DEF\",\"IJK\") or die \"Database connection not made: $DBI::errstr\";\n\nmy $sql = qq{SELECT logical_date,logical_date_type from logical_date where expiration_date is null };\n\nmy $sth = $dbh-&gt;prepare( $sql ) || die $dbh-&gt;errstr;\n\n$sth-&gt;execute() || die $dbh-&gt;errstr;\n\nprint $cgi-&gt;table({border=1});\n\nprint \"&lt;tr align=center&gt;&lt;th&gt;$sth-&gt;{NAME}-&gt;[0]&lt;/th&gt;&lt;th&gt;$sth-&gt;{NAME}-&gt;[1]&lt;/th&gt;&lt;/tr&gt;\";\n\n while (@data = $sth-&gt;fetchrow_array()) {\n   $Logical_Date_O = $data[0];\n   $Logical_Date_B = $data[1];\n   $Logical_Date_R = $data[2];\n\n   print \"&lt;tr&gt;&lt;td&gt;&lt;font color='black'&gt;$Logical_Date_O&lt;/font&gt;&lt;/td&gt;\n          &lt;td&gt;$Logical_Date_B&lt;/td&gt;&lt;td&gt;$Logical_Date_R&lt;/td&gt;&lt;/tr&gt;\\n\";\n}\n\nprint $cgi-&gt;end_table;\nprint $cgi-&gt;end_html;\n</code></pre>\n"}, {"tags": ["perl", "input-buffer"], "comments": [{"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1483738773, "post_id": 41475421, "comment_id": 70235636, "body": "When I try running <code>who -m</code> from the terminal window it gives no output, but when I <code>ssh</code> into another server and then run <code>who -m</code>, it gives me the user name. I am not sure if this is related to your question though.."}, {"owner": {"reputation": 393, "user_id": 1437387, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/87d4eb36e3cc1e8104979974f0c616d9?s=128&d=identicon&r=PG", "display_name": "Speeddymon", "link": "https://stackoverflow.com/users/1437387/speeddymon"}, "reply_to_user": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1483738912, "post_id": 41475421, "comment_id": 70235692, "body": "That&#39;s strange! What distribution and version?"}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1483738983, "post_id": 41475421, "comment_id": 70235720, "body": "I am using Ubuntu 16.10. And I ran <code>who -m</code> from the <code>gnome-terminal</code> window"}, {"owner": {"reputation": 393, "user_id": 1437387, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/87d4eb36e3cc1e8104979974f0c616d9?s=128&d=identicon&r=PG", "display_name": "Speeddymon", "link": "https://stackoverflow.com/users/1437387/speeddymon"}, "reply_to_user": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1483743336, "post_id": 41475421, "comment_id": 70237378, "body": "Interesting, when I do that on CentOS7 in gnome-terminal it works fine. I am running gnome-terminal through a remote x session tho, let me try on a physical session."}, {"owner": {"reputation": 393, "user_id": 1437387, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/87d4eb36e3cc1e8104979974f0c616d9?s=128&d=identicon&r=PG", "display_name": "Speeddymon", "link": "https://stackoverflow.com/users/1437387/speeddymon"}, "reply_to_user": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 1, "creation_date": 1484166189, "post_id": 41475421, "comment_id": 70402808, "body": "I finally got this working via <code>scalar(getpwuid(stat(readlink(&quot;&#47;proc&#47;$PID&#47;fd&#47;1&quot;))-&gt;uid))</code> which removes the dependency on <code>who -m</code>, <code>ENV{$SSH_TTY}</code> and <code>ENV{$USER}</code> and prevents any need to emulate a pty to the called child process."}], "answers": [{"comments": [{"owner": {"reputation": 393, "user_id": 1437387, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/87d4eb36e3cc1e8104979974f0c616d9?s=128&d=identicon&r=PG", "display_name": "Speeddymon", "link": "https://stackoverflow.com/users/1437387/speeddymon"}, "edited": false, "score": 0, "creation_date": 1483708913, "post_id": 41501387, "comment_id": 70218768, "body": "Thanks for this suggestion but it unfortunately won&#39;t cover the cases where the parent is run as a generic system user like <code>root</code> or <code>oracle</code>. I&#39;ve updated the question again to clarify this."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 393, "user_id": 1437387, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/87d4eb36e3cc1e8104979974f0c616d9?s=128&d=identicon&r=PG", "display_name": "Speeddymon", "link": "https://stackoverflow.com/users/1437387/speeddymon"}, "edited": false, "score": 0, "creation_date": 1483743420, "post_id": 41501387, "comment_id": 70237419, "body": "Why wouldn&#39;t it? I take it you mean it&#39;s a setuid script, because <code>who -m</code> wouldn&#39;t work for a daemon, in which case <code>$ENV{USER}</code> and either <code>getpwuid($&gt;)</code> or <code>getpwuid($&lt;)</code> should work."}, {"owner": {"reputation": 393, "user_id": 1437387, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/87d4eb36e3cc1e8104979974f0c616d9?s=128&d=identicon&r=PG", "display_name": "Speeddymon", "link": "https://stackoverflow.com/users/1437387/speeddymon"}, "edited": false, "score": 0, "creation_date": 1483743677, "post_id": 41501387, "comment_id": 70237515, "body": "What I&#39;m saying is that the alternatives <code>$ENV{USER}</code> and <code>getpwuid($&gt;)</code> output <code>root</code> and <code>who</code> without any option flags output all users, so on a multiuser server, this won&#39;t give the desired output. I realize that the terminal has been replaced. I saw something about emulating a pty for stdin with <code>open3</code> back when I was researching my first question, but as you rightly pointed out, <code>run3</code> should be used instead of <code>open3</code> so I am hoping to find a way to do that with <code>run3</code>."}, {"owner": {"reputation": 393, "user_id": 1437387, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/87d4eb36e3cc1e8104979974f0c616d9?s=128&d=identicon&r=PG", "display_name": "Speeddymon", "link": "https://stackoverflow.com/users/1437387/speeddymon"}, "edited": false, "score": 0, "creation_date": 1483743929, "post_id": 41501387, "comment_id": 70237604, "body": "It is not a setuid script. It is intended to be run as a standard user who has their own unique UID. However, if any given SA or DBA switches user to a generic user such as oracle or root after the person opens an ssh session to the server, I want the script to still work without trying to login to the webapp as root or oracle. Therefore, I want it to find out who started the ssh session without some <code>ps|grep</code> hackery."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 393, "user_id": 1437387, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/87d4eb36e3cc1e8104979974f0c616d9?s=128&d=identicon&r=PG", "display_name": "Speeddymon", "link": "https://stackoverflow.com/users/1437387/speeddymon"}, "edited": false, "score": 0, "creation_date": 1483747283, "post_id": 41501387, "comment_id": 70238809, "body": "My ssh daemon sets env var <code>SSH_TTY</code>, so you could use <code>perl -MFile::stat -E&#39;say scalar(getpwuid(stat($ENV{SSH_TTY})-&gt;uid))&#39;</code>. Default to <code>scalar(getpwuid($&gt;))</code> if it&#39;s not set."}, {"owner": {"reputation": 393, "user_id": 1437387, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/87d4eb36e3cc1e8104979974f0c616d9?s=128&d=identicon&r=PG", "display_name": "Speeddymon", "link": "https://stackoverflow.com/users/1437387/speeddymon"}, "edited": false, "score": 0, "creation_date": 1483747368, "post_id": 41501387, "comment_id": 70238835, "body": "Thanks, I&#39;ll look into that when I&#39;m back in the office and let you know if it exists."}, {"owner": {"reputation": 393, "user_id": 1437387, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/87d4eb36e3cc1e8104979974f0c616d9?s=128&d=identicon&r=PG", "display_name": "Speeddymon", "link": "https://stackoverflow.com/users/1437387/speeddymon"}, "edited": false, "score": 0, "creation_date": 1484080788, "post_id": 41501387, "comment_id": 70360694, "body": "That works perfectly and it eliminates the dependency on the external command which may or may not work. Thank you SO much!"}, {"owner": {"reputation": 393, "user_id": 1437387, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/87d4eb36e3cc1e8104979974f0c616d9?s=128&d=identicon&r=PG", "display_name": "Speeddymon", "link": "https://stackoverflow.com/users/1437387/speeddymon"}, "edited": false, "score": 0, "creation_date": 1484081423, "post_id": 41501387, "comment_id": 70361026, "body": "it works great for when I login, but after I switch user, the <code>$SSH_TTY</code> variable goes away. The <code>-</code> flag to <code>su</code> resets the environment. So for example <code>su -</code> or <code>su - oracle</code> will cause <code>$SSH_TTY</code> to be unset until I exit back to the account which the ssh session first logged into."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 393, "user_id": 1437387, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/87d4eb36e3cc1e8104979974f0c616d9?s=128&d=identicon&r=PG", "display_name": "Speeddymon", "link": "https://stackoverflow.com/users/1437387/speeddymon"}, "edited": false, "score": 0, "creation_date": 1484082761, "post_id": 41501387, "comment_id": 70361795, "body": "You&#39;re still left with <code>who</code> without <code>-m</code>."}, {"owner": {"reputation": 393, "user_id": 1437387, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/87d4eb36e3cc1e8104979974f0c616d9?s=128&d=identicon&r=PG", "display_name": "Speeddymon", "link": "https://stackoverflow.com/users/1437387/speeddymon"}, "edited": false, "score": 0, "creation_date": 1484082867, "post_id": 41501387, "comment_id": 70361856, "body": "No I agree, this is way better. I am probably going to have to do some hackery to get it to work with generic users unfortunately, but this is still much better than using who -m."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 393, "user_id": 1437387, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/87d4eb36e3cc1e8104979974f0c616d9?s=128&d=identicon&r=PG", "display_name": "Speeddymon", "link": "https://stackoverflow.com/users/1437387/speeddymon"}, "edited": false, "score": 0, "creation_date": 1484083117, "post_id": 41501387, "comment_id": 70362013, "body": "You can tell <code>su</code> to not clear certain vars, I think. But it&#39;s cleared because it would be unsafe to trust the less-privileged user&#39;s <code>$SSH_TTY</code>."}, {"owner": {"reputation": 393, "user_id": 1437387, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/87d4eb36e3cc1e8104979974f0c616d9?s=128&d=identicon&r=PG", "display_name": "Speeddymon", "link": "https://stackoverflow.com/users/1437387/speeddymon"}, "edited": false, "score": 0, "creation_date": 1484083317, "post_id": 41501387, "comment_id": 70362121, "body": "Yep. <code>su -m</code> but as you rightly pointed out, that&#39;s less secure. I&#39;ll look into the various Perl terminal modules and see if anything jumps out that might work. I know that the noecho mode of <code>Term::Readkey</code> works in the child script so there&#39;s possibly still some way from one of those modules. Anyway, thanks again."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 393, "user_id": 1437387, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/87d4eb36e3cc1e8104979974f0c616d9?s=128&d=identicon&r=PG", "display_name": "Speeddymon", "link": "https://stackoverflow.com/users/1437387/speeddymon"}, "edited": false, "score": 0, "creation_date": 1484083437, "post_id": 41501387, "comment_id": 70362191, "body": "i thought you could do it more selectively using a config file, but maybe not."}, {"owner": {"reputation": 393, "user_id": 1437387, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/87d4eb36e3cc1e8104979974f0c616d9?s=128&d=identicon&r=PG", "display_name": "Speeddymon", "link": "https://stackoverflow.com/users/1437387/speeddymon"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1484089177, "post_id": 41501387, "comment_id": 70364928, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/132855/discussion-between-speeddymon-and-ikegami\">continue this discussion in chat</a>."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 1, "last_activity_date": 1483743328, "last_edit_date": 1483743328, "creation_date": 1483689492, "answer_id": 41501387, "question_id": 41475421, "link": "https://stackoverflow.com/questions/41475421/perl-ipcrun3-how-to-emulate-a-pty-for-stdin-to-child-process/41501387#41501387", "title": "Perl IPC::Run3: How to emulate a pty for stdin to child process?", "body": "<p><code>who -m</code> specifically gives information about the terminal connected to its stdin.</p>\n\n<pre><code>-m     only hostname and user associated with stdin\n</code></pre>\n\n<p>You've replaced the terminal, so you can't obtain information from it.</p>\n\n<pre><code>$ who -m\nikegami  pts/1        ...\n\n$ who -m &lt;/dev/null\n\n$\n</code></pre>\n\n<p>You could drop the <code>-m</code> and use just <code>who</code>.</p>\n\n<pre><code>$ who &lt;/dev/null\nikegami  pts/1        ...\n</code></pre>\n\n<p>Alternatively, you could use <code>$ENV{USER}</code> or <code>getpwuid($&gt;)</code> (the name of the user as which the process is executing) instead.</p>\n"}], "owner": {"reputation": 393, "user_id": 1437387, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/87d4eb36e3cc1e8104979974f0c616d9?s=128&d=identicon&r=PG", "display_name": "Speeddymon", "link": "https://stackoverflow.com/users/1437387/speeddymon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 284, "favorite_count": 1, "accepted_answer_id": 41501387, "answer_count": 1, "score": 2, "last_activity_date": 1484080678, "creation_date": 1483575872, "last_edit_date": 1495542829, "question_id": 41475421, "link": "https://stackoverflow.com/questions/41475421/perl-ipcrun3-how-to-emulate-a-pty-for-stdin-to-child-process", "title": "Perl IPC::Run3: How to emulate a pty for stdin to child process?", "body": "<p>This is a follow up question to <a href=\"https://stackoverflow.com/questions/41454627/ipcopen3-and-determining-if-child-is-waiting-for-input\">IPC::Open3 and determining if child is waiting for input</a> though they admittedly are not related.</p>\n\n<p>Take the following sample code:</p>\n\n<pre><code>use strict;\nuse warnings;\nuse IPC::Run3;\n\nsub foo\n{\n    my $cmd = shift;\n    my $CH_IN = \"foo\\n\";\n    run3($cmd, \\$CH_IN, my $CH_OUT, my $CH_ERR);\n    return 1;\n}\nmy @LIST = ( 'command','arg1','arg2','arg3' );\nfoo \\@LIST;\n</code></pre>\n\n<p>For the above code <code>command</code> is another perl script. The child script calls <code>who -m</code> to find who owns stdin from the terminal, which is intended to be used in case the child or parent script is called using root or another generic system user.</p>\n\n<p>The error I get from the child when called by the parent is as follows.</p>\n\n<pre><code>Use of uninitialized value in split at child.pl line 354.\nWHOAMI is undef\n</code></pre>\n\n<p>Child code below.</p>\n\n<p>Code around line 354:</p>\n\n<pre><code># Function Name:        'determine_user'\n# Function Inputs:      'Optional Scalar: Username to login as'\n# Function Returns:     'If username is provided: Scalar: the username provided, If username is not provided: The output of who -m'\n# Function Description: 'Figures out the user to login as'\nsub determine_user\n{\n    my $USER = shift;\n    if (!defined $USER)\n    {\n        my $WHOAMI;\n        open my $WHOPROC, q{-|}, 'who -m'                   or die \"Unable to open 'who -m' for output.\\n\";\n        $WHOAMI=&lt;$WHOPROC&gt;;\n        close $WHOPROC                                      or die \"Unable to close 'who -m'.\\n\";\n        $USER       = split m{[\\s]+}xms, $WHOAMI          or die \"WHOAMI is undef\\n\";    # This is line 354\n    }\n\n    chomp $USER;\n\n    return $USER;\n}\n</code></pre>\n\n<p>The code above works just fine when I call the child script from the command line, but since <code>who -m</code> is trying to see who owns stdin of the terminal and the terminal has been replaced by the parent script, I believe I need to find a way to call who -m with an emulated pty when running from the parent. Whether that's by modifying the child or the parent or both doesn't matter, as I can modify both.</p>\n\n<p>So my question is: how can I run the child inside of the parent and still rely on the output of <code>who -m</code> being fed to the child?</p>\n\n<p>EDIT: ikegami has provided the best solution in the comments of his answer. It does not answer the question, but it does solve my problem.</p>\n\n<blockquote>\n  <p>My ssh daemon sets env var <code>SSH_TTY</code>, so you could use <code>perl -MFile::stat -E'say scalar(getpwuid(stat($ENV{SSH_TTY})-&gt;uid))'</code>. Default to <code>scalar(getpwuid($&gt;))</code> if it's not set.</p>\n</blockquote>\n"}]